{"TopicId":113108,"ForumId":29,"TopicTitle":"Hiding an animation when it stops (?)","CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2015-06-16T13:41:06Z","PageNum":1,"Articles":[{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2015-06-16T13:41:06Z","Content":"\n\u003Cp\u003EI\u0027m trying to work on supporting a blinkenlights looping animation in RasterPropMonitor. Sumghai\u0027s post on the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/30803-FusTek-Station-Parts-Dev-Thread-%28continuation-of-fusty-s-original-work%29?p=2018147\u0026amp;viewfull=1#post2018147\u0022 rel=\u0022external nofollow\u0022\u003EFusTek Station Parts Dev\u003C/a\u003E thread illustrates the idea.\u003C/p\u003E\u003Cp\u003EWhat I have currently is:\u003C/p\u003E\u003Cp\u003EBefore I play the animation, the lamps are all off (the animation is not visible).\u003C/p\u003E\u003Cp\u003EWhen I start playing the animation, the lamps blink (per the animation).\u003C/p\u003E\u003Cp\u003EWhen I stop playing the animation, the lamps freeze (some on, some off).\u003C/p\u003E\u003Cp\u003EWhat I \u003Cem\u003Ewant\u003C/em\u003E is to make the lamps (the animation) not visible when the animation stops.\u003C/p\u003E\u003Cp\u003EIs there a way in Unity to make the lamp animation not visible again, like before it was played?\u003C/p\u003E\u003Cp\u003EI know sumghai can change the animation so frame 0 has all the lamps off, but that introduces a periodic flicker on the power indicator lamps, which is not ideal, so I would like to see if there\u0027s another way to change the animation state. My Unity-specific expertise is minimal, and I\u0027m not entirely sure what I specifically need to look for.\u003C/p\u003E\u003Cp\u003E-MOARdV\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-06-16T14:27:31Z","Content":"\n\u003Cp\u003EWhy not use two animation clips? One would be a single-shot, single-frame clip of the lamps being off, the other your looping, blinking animation. Instead of stopping the animation, \u0022play\u0022 the stop clip. \u003C/p\u003E\u003Cp\u003EYou can, of course, simply disable the lamps in code when you stop the animation\u003C/p\u003E\n"},{"CreatedByName":"landeTLS","CreatedById":97925,"CreatedDateTime":"2015-06-16T16:12:10Z","Content":"\n\u003Cp\u003ELike this?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ENameofyouranimationstate.normalizedTime = 0;\u003Cbr\u003E\u0022=\u0022.normalizedSpeed = 0;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis will stop the animation and set it to the start time. If the light is off at this time in the animation then you should be good. You can also use blend to get a smoother transition. Or you can reverse the animation with normalizedSpeed = -1; and clamp it when it reaches 0. \u003C/p\u003E\u003Cp\u003EHopefully i didnt misunderstand what youre trying to do here. If so then just ignore this:-P\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2015-06-16T17:48:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022landeTLS\u0022 data-cite=\u0022landeTLS\u0022\u003E\u003Cdiv\u003ELike this?\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ENameofyouranimationstate.normalizedTime = 0;\u003Cbr\u003E\u0022=\u0022.normalizedSpeed = 0;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis will stop the animation and set it to the start time. If the light is off at this time in the animation then you should be good. You can also use blend to get a smoother transition. Or you can reverse the animation with normalizedSpeed = -1; and clamp it when it reaches 0. \u003C/p\u003E\u003Cp\u003EHopefully i didnt misunderstand what youre trying to do here. If so then just ignore this:-P\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EExcept that there is no frame in the animation where the lights are off. They are on for every frame, so when I set normalizedTime and normalizedSpeed to 0 (which I already do), the animation is visible, because the lights are on in every frame of the animation. They are not visible before I play the animation (I don\u0027t know why), but they are always on once I start the animation (because all frames have lights on).\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-06-16T21:34:57Z","Content":"\n\u003Cp\u003EAs MOARdV mentioned previously, I can easily modify my animation to have the first frame as the \u0022off\u0022 state - however, playback of the animation loop would include that first \u0022off state\u0022 frame, resulting in the aforementioned (and undesired) flicker in the POWER LED indicators.\u003C/p\u003E\u003Cp\u003EIs there a way to tell the loop playback to skip certain frames in an animation? According to Unity docs, it appears that Unity works with time indexes rather than frames, which compounds the problem by making it dependent on the framerate.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-06-16T22:54:40Z","Content":"\n\u003Cp\u003ENo, what xEvilReeperx means is to have two separate animation clips. One with your loop and the light on, the other simply with the light off - can be single keyframe. Using animation.blend, rather than play, you can set it to blend over right to the animation with the off state. It\u0027s rather cunning! Shout if that doesn\u0027t make sense, though\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-06-16T23:05:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003ENo, what xEvilReeperx means is to have two separate animation clips. One with your loop and the light on, the other simply with the light off - can be single keyframe. Using animation.blend, rather than play, you can set it to blend over right to the animation with the off state. It\u0027s rather cunning! Shout if that doesn\u0027t make sense, though\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, I understood xEvilReeperx - it just seems rather redundant to have an empty animation.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-06-16T23:09:14Z","Content":"\n\u003Cp\u003EIt\u0027s not empty, it\u0027s a single frame clip that disables the light (you can animate Renderer\u0027s \u0022enabled\u0022 property). It\u0027s a bit nicer than doing it (entirely) in code\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-06-17T00:08:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EIt\u0027s not empty, it\u0027s a single frame clip that disables the light (you can animate Renderer\u0027s \u0022enabled\u0022 property). It\u0027s a bit nicer than doing it (entirely) in code\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI see what you mean. It\u0027s not ideal, but barring further input by MOARdV, it\u0027ll have to do.\u003C/p\u003E\u003Cp\u003EAlso, these LED lights are just emissive animations:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/iAYWIqT.gif\u0022 alt=\u0022iAYWIqT.gif\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2015-06-17T01:13:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EIt\u0027s not empty, it\u0027s a single frame clip that disables the light (you can animate Renderer\u0027s \u0022enabled\u0022 property). It\u0027s a bit nicer than doing it (entirely) in code\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EForgive my Unity ignorance - you are saying I would play the \u0022off animation\u0022 when I want to stop the blinking lights. I get that part. Do I need to stop the \u0022blinking\u0022 animation as well? (and vice-versa when I want to restart the blinking animation?) And what do you mean by \u0022animate Renderer\u0027s \u0027enabled\u0027 property\u0022?\u003C/p\u003E\u003Cp\u003EAlthough lo-fi also suggests using blend(), and I see there\u0027s a cross-fade method as well.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-06-17T05:14:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MOARdV\u0022 data-cite=\u0022MOARdV\u0022\u003E\u003Cdiv\u003EForgive my Unity ignorance - you are saying I would play the \u0022off animation\u0022 when I want to stop the blinking lights. I get that part. Do I need to stop the \u0022blinking\u0022 animation as well? (and vice-versa when I want to restart the blinking animation?) And what do you mean by \u0022animate Renderer\u0027s \u0027enabled\u0027 property\u0022?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, don\u0027t need to stop the blinking animation. They wouldn\u0027t be visible anyway.\u003C/p\u003E\u003Cp\u003EAs to animating Renderer enabled: just like you can create an AnimationClip out of keyframes of Transform position, rotation, various material properties etc, so too can you create keyframes for Renderer.enabled\u003C/p\u003E\u003Cp\u003ERe: blend, crossfade: those are for mixing animations. Probably not applicable in this instance\u003C/p\u003E\n"}]}