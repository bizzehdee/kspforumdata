{"TopicId":139192,"ForumId":36,"TopicTitle":"GUI.button image and child UI\u0026#039;s","CreatedByName":"jmbon","CreatedById":87472,"CreatedDateTime":"2016-05-07T04:33:28Z","PageNum":1,"Articles":[{"CreatedByName":"jmbon","CreatedById":87472,"CreatedDateTime":"2016-05-07T04:33:28Z","Content":"\n\u003Cp style=\u0022line-height:normal;\u0022\u003E\n\u003Cspan style=\u0022font-size:12pt;font-family:\u0027Times New Roman\u0027, serif;\u0022\u003EHello,\u00A0\u003C/span\u003E\u003C/p\u003E\n\u003Cp\u003E\u003C/p\u003E\n\u003Cp style=\u0022line-height:normal;\u0022\u003E\n\u003Cspan style=\u0022font-size:12pt;font-family:\u0027Times New Roman\u0027, serif;\u0022\u003EI\u0027m relatively new to Unity still and I am having two issues that are GUI related. First, I am trying to set a .png image as the background for a GUI.button(rect, image). I just can not get the image to display as the background of the button. My second problem is that I am trying to use the same button to open another config UI for my mod so that players can enable and disable certain mod features. However, when I click the button (button appears even if the background image doesn\u0027t), my debug statement prints but the second UI doesn\u0027t draw to the screen. For the past several hours, I have searched forums, Github code (mainly Stage Recovery as it\u0027s code is commented and not a mess) and Unity 5.3 tutorials/examples/manual entries trying to figure out what I am doing wrong. Nothing has helped thus far. Hopefully someone here can spot my mistake. I greatly appreciate the help.\u00A0\u003C/span\u003E\u003C/p\u003E\n\u003Cp\u003E\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Epublic void OnDraw(int windowID)\n        {\n            draw_Icon_GUI(windowID);\n//            GUILayout.Window(windowID, control_window_Rect, draw_Control_GUI, \u0022Control\u0022, HighLogic.Skin.window);\n        }\n\n        void draw_Icon_GUI(int windowID)\n        {\n            Rect _Icon_Rect = new Rect(Screen.width - 40, 220, 40, 40);\n//            Texture image = (Texture)Resources.Load(\u0022C:/Program Files (x86)/Steam/SteamApps/common/Kerbal Space Program/Resources/_symbol.png\u0022) as Texture; // \u0026lt;------- First attempt at displaying an image as the button background\n//            GUI.skin.button.active.background = image; // \u0026lt;------- First attempt at displaying an image as the button background\n\n            GUIContent image = new GUIContent(\u0022Click me\u0022, (Texture)Resources.Load(\u0022C:/Program Files (x86)/Steam/SteamApps/common/Kerbal Space Program/Resources/_symbol\u0022)); // \u0026lt;------- Third attempt at displaying an image as the button background\n            if (image != null)\n            {\n                // Draw the background.\n //               GUI.DrawTexture(wind_Icon_Rect, image); // \u0026lt;------- Second attempt at displaying an image as the button background\n            }\n            else\n                Debug.Log(\u0022Bad texture: \u0022 \u002B image);\n\n\n            if (GUI.Button(wind_Icon_Rect, image))\n            {\n                Debug.Log(\u0022[MOD : Gui Draw] Button was clicked.\u0022); // Prints when the button is clicked\n                control_window_Rect = GUILayout.Window(windowID, control_window_Rect, draw_Control_GUI, \u0022Control\u0022, HighLogic.Skin.window); // Doesn\u0027t execute ever. Worked before I started trying to make a button execute it.\n            }\n\n        }\n\n        void draw_Control_GUI(int windowID) // Worked before I started trying to make a button execute it.\n        {\n            GUILayout.BeginVertical();\n\n            // toggle setup\n            GUILayout.Label(\u0022Toggle\u0022, HighLogic.Skin.label);\n            wind_toggle = GUILayout.Toggle(wind_toggle, \u0022Toggle\u0022, HighLogic.Skin.toggle);\n\n            // Slider setup\n            hSliderValue = GUILayout.HorizontalSlider(Mathf.Round(hSliderValue), 0f, 10f);\n            GUILayout.Label(\u0022Scaling = \u0022 \u002B Mathf.Round(hSliderValue), HighLogic.Skin.box);\n\n            // End the Groups and Area\n            GUILayout.EndVertical();\n\n            GUI.DragWindow(); // GUI window is also having issues with not being draggable even when this section of code worked\n        }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nAbove is the code that handles my GUI drawing. OnGUI() is in another class but all id does is call OnDraw(int windowID). I put // \u0026lt;---- comments where I believe my code is having the issues. I greatly appreciate any help I can get. Thank you.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2016-05-07T06:05:07Z","Content":"\n\u003Cp\u003E\nCan\u0027t help with the image, but the second window won\u0027t draw because button is only ever true once and it needs to be called every frame you want the window to be visible in. I would suggest toggling a boolean and drawing the window elsewhere based on the state of that bool\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Ebool\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E visible \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Efalse\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n\u003C/span\u003E\u003Cspan\u003EOnGUI\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E()\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ebutton\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E...)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\tvisible \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E!\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Evisible\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Evisible\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\tdrawWindow\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E...\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-07T06:06:39Z\u0022 title=\u002205/07/2016 06:06  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 7, 2016\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"jmbon","CreatedById":87472,"CreatedDateTime":"2016-05-08T00:13:57Z","Content":"\n\u003Cp\u003E\nThanks for that. I already had the bool in the code, I just wasn\u0027t using it there. Putting it there solved that issue. Still trying to figure out how to add an image. If I figure it out, I\u0027ll post it here. Thanks again.\u00A0\n\u003C/p\u003E\n"}]}