{"TopicId":153803,"ForumId":36,"TopicTitle":"Adding to the right-click menu on other craft","CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-12-21T06:19:23Z","PageNum":1,"Articles":[{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-12-21T06:19:23Z","Content":"\n\u003Cp\u003E\nWhen you right-click a docking port on another ship, you can set it as the target. If you right click anything, you can center the camera on it now. How would I in code add to that menu?\n\u003C/p\u003E\n\u003Cp\u003E\nIf you\u0027re curious, I\u0027m thinking something akin to Extraplanetary Launchpad\u0027s recycle bin, only it works just from right clicking the other craft and saying \u0022recycle\u0022\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-12-21T15:02:37Z","Content":"\n\u003Cp\u003E\nIsn\u0027t that just a KSPEvent with guiActiveUnfocused = true?\n\u003C/p\u003E\n\u003Cp\u003E\nNot sure about the center camera option, but the docking port one is almost certainly that.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-12-21T19:25:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222895684\u0022 data-ipsquote-contentid=\u0022153803\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221482332557\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIsn\u0027t that just a KSPEvent with guiActiveUnfocused = true?\n\u003C/p\u003E\n\u003Cp\u003E\nNot sure about the center camera option, but the docking port one is almost certainly that.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPossibly. I don\u0027t see in the configs where it\u0027s set on those parts but I am by no means an expert (hence the question \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E). I\u0027ll play around with that tonight thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-12-29T09:59:46Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003EAHA. The below code DOES work, only it only works with an EVA\u0027d Kerbal. I need this to work while controlling another active ship.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe below code is valid but I removed most of the commentary because I wrote it before I realized what the actual problem was. The code works but only with an EVA\u0027d Kerbal.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222895684\u0022 data-ipsquote-contentid=\u0022153803\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221482332557\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 12/21/2016 at 10:02 AM, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIsn\u0027t that just a KSPEvent with guiActiveUnfocused = true?\n\u003C/p\u003E\n\u003Cp\u003E\nNot sure about the center camera option, but the docking port one is almost certainly that.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nsource code:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\n\nnamespace RightClickRecycler\n{\n    public class RCRecycle : PartModule\n    {\n        [KSPEvent(guiActive = false, guiActiveEditor = false, guiActiveUnfocused = true, guiName = \u0022Recycle\u0022)]\n        public void DoRCRecycle()\n        {\n            print(\u0022RCR: It worked!\u0022);\n        }\n    }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nmodulemanager config:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[*]:FINAL\n{\n\tMODULE\n\t{\n\t\tname = RCRecycle\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-12-29T10:12:00Z\u0022 title=\u002212/29/2016 10:12  AM\u0022 data-short=\u00227 yr\u0022\u003EDecember 29, 2016\u003C/time\u003E by 5thHorseman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-12-29T15:31:48Z","Content":"\n\u003Cp\u003E\nWhat happens if you set externalToEVAOnly = false in the KSPEvent?\n\u003C/p\u003E\n\u003Cp\u003E\nThose two settings (guiActiveUnfocued and externalToEVAOnly) would be what I expect to control visibility of the event as you are trying to use it.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-12-29T18:36:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222904223\u0022 data-ipsquote-contentid=\u0022153803\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221483025508\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat happens if you set externalToEVAOnly = false in the KSPEvent?\n\u003C/p\u003E\n\u003Cp\u003E\nThose two settings (guiActiveUnfocued and externalToEVAOnly) would be what I expect to control visibility of the event as you are trying to use it.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat is extremely close. It does add it to command pods, but it\u0027s still on the Krebal. That\u0027s surely \u0022close enough\u0022 to what I want as I\u0027m going to at least warn when you don\u0027t have storage for the ship you\u0027re recycling (a Kerbal would never have enough storage, I\u0027d think) an may even disallow if you can\u0027t store everything. Or maybe I\u0027ll allow a temporary quasi-storage that you can load into nearby ships or something...\n\u003C/p\u003E\n\u003Cp\u003E\nThanks everybody!\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-12-29T18:48:35Z","Content":"\n\u003Cp\u003E\nTo not add it to the Kerbal you need to modify the \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patch you are using.\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t remember if it was in KSP 1.0 or 1.1, but they added \u0022kerbal\u0022 and \u0022flag\u0022 objects so \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E scripts could affect those.\n\u003C/p\u003E\n\u003Cp\u003E\nYou\u0027ll have to dig up the specifics yourself as I don\u0027t know them myself, but I know the functionality is there.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-12-29T19:25:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222904388\u0022 data-ipsquote-contentid=\u0022153803\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221483037315\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n35 minutes ago, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTo not add it to the Kerbal you need to modify the \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patch you are using.\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t remember if it was in KSP 1.0 or 1.1, but they added \u0022kerbal\u0022 and \u0022flag\u0022 objects so \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E scripts could affect those.\n\u003C/p\u003E\n\u003Cp\u003E\nYou\u0027ll have to dig up the specifics yourself as I don\u0027t know them myself, but I know the functionality is there.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBut that would remove the \u0022recycle\u0022 menu option from right-clicked Kerbals. Which is probably a good thing but not what the problem is. The problem isn\u0027t that the Kerbal has the menu option, it\u0027s that a ship has the menu option when I\u0027m controlling a Kerbal.\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-12-29T19:54:20Z","Content":"\n\u003Cp\u003E\nOh, you\u0027re going to have to change the KSPEvent\u0027s visibility in code then.\n\u003C/p\u003E\n\u003Cp\u003E\nSomething like this in the partModule:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eif(FlightGlobals.ActiveVessel.isEva)\n{\n\tKSPEvent.hide(); //pseduo-command, not actually valid\n}\nelse\n{\n\tKSPEvent.show(); //more pseudo-code\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nSo if a kerbal is being controlled, the KSPEvent is hidden, otherwise it shows. Can add checks for room to recycle and such here too.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n"}]}