{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":89,"Articles":[{"CreatedByName":"cobbman11","CreatedById":76711,"CreatedDateTime":"2015-12-03T03:58:04Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E From the looks of it this will take another 15 minutes as my internet is unbelievably slow in upload. Get a drink, clean up your KSP install and chill out while waiting.\n\u003E \n\nUnderstood. Thanks for all the hard work, Blackrack!"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-03T03:58:37Z","Content":"I spent a couple of hours earlier adding mods one by one to figure out which one was crashing it, turns out none of them."},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-12-03T04:00:29Z","Content":"\\*screams internally\\*"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-12-03T04:06:36Z","Content":"\u003E \n\u003E \n\u003E 55 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E Wheres Azimech when you need him, hes got a carrier and a mod for carriers\n\u003E \n\nNeed. Some. Sleep.\n\nOkay, three hours is enough. Hey what\u0027s happening?"},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-12-03T04:07:54Z","Content":"\u003E \n\u003E \n\u003E Just now, Azimech said:\n\u003E \n\u003E \n\u003E Need. Some. Sleep.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Okay, three hours is enough. Hey what\u0027s happening?\n\u003E \n\nOhh....Blackrack is just revolutionizing KSP visuals yet again... Yah know... Just nuthin..."},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-12-03T04:15:46Z","Content":"Agh. I hope my relationship survives this.\n\nBut if needed, I have a 247 part, 56000 tons, 350 meter aircraft carrier for ya, blackrack. You can fill that deck with a filthy amount of F14\u0027s. I also have a 260 meter battleship."},{"CreatedByName":"cobbman11","CreatedById":76711,"CreatedDateTime":"2015-12-03T04:19:33Z","Content":"My pontoons quiver with anticipation."},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-12-03T04:20:43Z","Content":"That sounds nasty ... need some soap?"},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-12-03T04:44:03Z","Content":"ITS OUT\n\n**Edited \u003Ctime datetime=\u00222015-12-03T04:44:38Z\u0022 title=\u002212/03/2015 04:44  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 3, 2015\u003C/time\u003E by Nhawks17**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-03T04:44:10Z","Content":"It\u0027s up.\n\n\u003E \n\u003E \n\u003E 27 minutes ago, Azimech said:\n\u003E \n\u003E \n\u003E Agh. I hope my relationship survives this.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E But if needed, I have a 247 part, 56000 tons, 350 meter aircraft carrier for ya, blackrack. You can fill that deck with a filthy amount of F14\u0027s. I also have a 260 meter battleship.\n\u003E \n\nI\u0027m heading to bed now, but I need to find some screens of that when I wake up."},{"CreatedByName":"cobbman11","CreatedById":76711,"CreatedDateTime":"2015-12-03T04:45:59Z","Content":"YUSS! Downloading now."},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-12-03T04:46:02Z","Content":"[This is what I\u0027m doing right now](https://d.gr-assets.com/hostedimages/1380380625ra/737563.gif)"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-12-03T04:48:36Z","Content":"Yeah, me too. But first a colonel coffee."},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-03T04:51:19Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Well, this bit of code is called to create several meshes [https://github.com/LGhassen/Scatterer/blob/ocean/scatterer/Ocean/OceanNode.cs#L239-L287](https://github.com/LGhassen/Scatterer/blob/ocean/scatterer/Ocean/OceanNode.cs#L239-L287)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E But I haven\u0027t really looked much into or what happens later inside the shader. I cared mostly about getting it running ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\u003E \n\nGotcha... Just quickly skimmed it... looks like they do some funky things in there that I honestly have no clue why they do it that way... In this case, they create a plane in front of the camera (much as I would expect... we do a cube for our purposes) but what is odd is the mesh... instead of a single quad with 4 vertices spanning the camera view, they make MANY quads with 1 vertex PER PIXEL. I can\u0027t think of a good reason that they would do this, unless they were doing this in Proland for another engine and the guy porting it to Unity didn\u0027t bother with any optimization.  \n\nAt any rate, this explains why lights and shadows (and projectors) would not work... they simply can\u0027t. The geometry doesn\u0027t place them in the right location and there is no possible geometry to go off of. However I have a possible work-around though. Much like you\u0027ve seen with the projectors with the ocean geometry, what we can do is create a large quad that moves around the craft that is transparent, and receives shadows and lights. We keep it at ocean level, and just rotate it to always be underneath the craft. It\u0027d have to be somewhat large, but the performance should be pretty negligible (four vertexes only). We\u0027d want to disable projectors on it though.   \n\nAs for projectors (and by extension cloud shadows), I\u0027m not sure I have a good solution. I\u0027m thinking I could create a companion shader that does something similar as your ocean shader (plane/cube in front of camera) but then in EVE, we need a method to detect that there is no ocean (or it is disabled) so EVE could do this."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-03T04:51:30Z","Content":"Thanks Blackrack for all the hours you have put in, rbray89 and Nhawks17, you guys too, I am just a huge fan of all of you."},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-12-03T04:52:35Z","Content":"Oh my god... I can\u0027t deal with it.. Blackrack this is gorgeous."},{"CreatedByName":"gkorgood","CreatedById":124879,"CreatedDateTime":"2015-12-03T04:53:20Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, Nhawks17 said:\n\u003E \n\u003E \n\u003E [This is what I\u0027m doing right now](https://d.gr-assets.com/hostedimages/1380380625ra/737563.gif)\n\u003E \n\n[@Nhawks17](https://forum.kerbalspaceprogram.com/index.php?/profile/32999-nhawks17/) do you recommend using your custom configs for scatterer with the new release and SVE, or just [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/)\u0027s standard atmo configs?"},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-12-03T04:56:40Z","Content":"Ok odd..... I don\u0027t know if this is because I\u0027m super sampling my screenshots but the shader isn\u0027t showing up in screenshots taken within the game but thats why we have other ways. I don\u0027t even know how you did this in the slightest but I\u0027m so grateful you did.\n\nSpoiler\n\n![xkDMLvl.jpg](https://i.imgur.com/xkDMLvl.jpg)\n\n\u003E \n\u003E \n\u003E 8 minutes ago, gkorgood said:\n\u003E \n\u003E \n\u003E [@Nhawks17](https://forum.kerbalspaceprogram.com/index.php?/profile/32999-nhawks17/) do you recommend using your custom configs for scatterer with the new release and SVE, or just [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/)\u0027s standard atmo configs?\n\u003E \n\nNot right now. I\u0027m going to guess the configs have changed to accommodate the ocean stuff now so they probably won\u0027t work. Stick with the default stuff.\n\nEdit: ~~Nevermind, he implemented the configs separately. They should work fine~~ \n\nScratch that, I think I need to look into this more ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\n**Edited \u003Ctime datetime=\u00222015-12-03T05:02:11Z\u0022 title=\u002212/03/2015 05:02  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 3, 2015\u003C/time\u003E by Nhawks17**"},{"CreatedByName":"gkorgood","CreatedById":124879,"CreatedDateTime":"2015-12-03T04:57:58Z","Content":"also [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) I think you forgot a folder. right now it goes \\Scatterer-v0.021\\GameData\\Config\n\nyou usually make it \\Scatterer-v0.021\\GameData\\scatterer\\Config"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-12-03T05:00:30Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E Thanks Blackrack for all the hours you have put in, rbray89 and Nhawks17, you guys too, I am just a huge fan of all of you.\n\u003E \n\nSame here."},{"CreatedByName":"gkorgood","CreatedById":124879,"CreatedDateTime":"2015-12-03T05:03:43Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, Nhawks17 said:\n\u003E \n\u003E \n\u003E Not right now. I\u0027m going to guess the configs have changed to accommodate the ocean stuff now so they probably won\u0027t work. Stick with the default stuff.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Edit: ~~Nevermind, he implemented the configs separately. They should work fine~~ \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Scratch that, I think I need to look into this more ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\u003E \n\nalso, is it a bug that nice SVE textures don\u0027t show up in map view?"},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2015-12-03T05:05:36Z","Content":"\u003E \n\u003E \n\u003E Just now, gkorgood said:\n\u003E \n\u003E \n\u003E also, is it a bug that nice SVE textures don\u0027t show up in map view?\n\u003E \n\nSVE textures are showing up for me in map view.... Post screenshots of it in my thread if it continues. Don\u0027t clog Blackrack\u0027s thread with it ![:sticktongue:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif \u0022:sticktongue:\u0022)"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-03T05:09:42Z","Content":"\u003E \n\u003E \n\u003E 21 minutes ago, gkorgood said:\n\u003E \n\u003E \n\u003E also [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) I think you forgot a folder. right now it goes \\Scatterer-v0.021\\GameData\\Config\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E you usually make it \\Scatterer-v0.021\\GameData\\scatterer\\Config\n\u003E \n\nThis needs to be the right case for Linux so if it don\u0027t work change it to an lowercase c - edit\n\n**Edited \u003Ctime datetime=\u00222015-12-03T05:19:52Z\u0022 title=\u002212/03/2015 05:19  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 3, 2015\u003C/time\u003E by selfish\\_meme**"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-03T05:20:37Z","Content":"It seems you put the source of ReconstructedHeight in the zip file too\n\nHaha, I\u0027m out of memory, need to pull my box apart and add in a couple more sticks\n\n    [ERR 16:21:20.713] Could not allocate memory: System out of memory!\n    Trying to allocate: 65540B with 32 alignment. MemoryLabel: Texture\n    Allocation happend at: Line:411 in \n    Memory overview\n\n    [ ALLOC_DEFAULT ] used: 344566591B | peak: 344609435B | reserved: 348892241B \n    \n    [ ALLOC_GAMEOBJECT ] used: 27186924B | peak: 29555965B | reserved: 28791996B \n    \n    [ ALLOC_GFX ] used: 426862298B | peak: 571404864B | reserved: 427097925B \n    \n    [ ALLOC_PROFILER ] used: 94356B | peak: 94356B | reserved: 112703B \n\n    [ERR 16:21:20.713] Texture \u0027\u0027 has no data\n    \n    [ERR 16:21:20.713] No Texture memory available to upload"},{"CreatedByName":"cobbman11","CreatedById":76711,"CreatedDateTime":"2015-12-03T05:28:09Z","Content":"Blackrack, you done good.  \n  \n![PkyliU3.png](http://i.imgur.com/PkyliU3.png)\n\n![QBzb9wB.png](http://i.imgur.com/QBzb9wB.png)\n\n**Edited \u003Ctime datetime=\u00222015-12-03T05:28:21Z\u0022 title=\u002212/03/2015 05:28  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 3, 2015\u003C/time\u003E by cobbman11**"}]}