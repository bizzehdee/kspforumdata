{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":42,"Articles":[{"CreatedByName":"Terrible Inclinations","CreatedById":111011,"CreatedDateTime":"2015-06-14T16:59:18Z","Content":"\u003E \n\u003E Hyomoto, is this what you are referring to? I\u0027m not sure I even see a specific answer to that one. I accept I could be 100% wrong. And I know a lot if people have been asking repeat questions. But we are all here to help each other after all.\n\nno. The Mod author has stated multiple times that these artifacts are caused by this altitude being the cutoff point for rendering, resulting in that patchy effect, and that the fix will be included in the next release. It is hard coded and happens to everyone to varying degrees."},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-06-14T19:58:35Z","Content":"\u003E \n\u003E no. The Mod author has stated multiple times that these artifacts are caused by this altitude being the cutoff point for rendering, resulting in that patchy effect, and that the fix will be included in the next release. It is hard coded and happens to everyone to varying degrees.\n\nOh ok thank you. Like I said I didn\u0027t run into that issue or see the answer for myself."},{"CreatedByName":"Vandest","CreatedById":122250,"CreatedDateTime":"2015-06-14T20:01:18Z","Content":"\u003E \n\u003E In the politest tone possible with text; the solution is to read back the past twenty pages.\n\nThe [**Hyomoto**](https://forum.kerbalspaceprogram.com/members/66529-Hyomoto) response is so relevant that not even know of whereof he speaks. Hyomoto, you use the politest tone, yet as a reader I feel insulted.\n\nYou think maybe relieve the thread creator by answering his place, if that\u0027s the case I think it is more than capable of doing himself.\n\n By the way if [**blackrack**](https://forum.kerbalspaceprogram.com/members/107168-blackrack) really bothered by repeated questions, it\u0027s sufficient to consider it and modify the 1st post.\n\n\u003E \n\u003E Do you mean the lens flare or the moon?\n\u003E Edit: Also I do apologize if anyone else has mentioned this but. I had an Idea. Is it possible to have a settings menu for in atmosphere viewing, and a completely separate settings menu for outer atmosphere viewing? Then an automatic transmission between the two during ascent? It\u0027s a simple suggestion that I\u0027m sure has monumental coding mountains to overcome. But the idea would be to tailor what it looks like when you are flying through a planet verses passing over one. I have not been able to find a happy medium between the two. Scatterer makes in atmosphere look breathtaking. But as soon as I enter orbit. It looks like a ball of blue soup. I am sure some of this is my own ignorance in not being able to find a happy medium in the settings menu. I will keep playing with it. And please don\u0027t take anything I just said as negative. Scatterer is freaking amazing! And KSP will never be the same again.\n\nI think it is a good idea, until we get better. [**Avera9eJoe**](https://forum.kerbalspaceprogram.com/members/82464-Avera9eJoe) had already asked a similar question in this [post](https://forum.kerbalspaceprogram.com/threads/115408-WIP-Scatterer-atmospheric-scattering-mod-%28v0-0151-20-05-2015%29?p=1925843\u0026viewfull=1#post1925843) and **blackrack** said he was not against but nothing more."},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-06-14T20:06:56Z","Content":"\u003E \n\u003E The [**Hyomoto**](https://forum.kerbalspaceprogram.com/members/66529-Hyomoto) response is so relevant that not even know of whereof he speaks. Hyomoto, you use the politest tone, yet as a reader I feel insulted.\n\u003E You think maybe relieve the thread creator by answering his place, if that\u0027s the case I think it is more than capable of doing himself.\n\u003E \n\u003E  By the way if [**blackrack**](https://forum.kerbalspaceprogram.com/members/107168-blackrack) really bothered by repeated questions, it\u0027s sufficient to consider it and modify the 1st post.\n\u003E \n\u003E I think it is a good idea, until we get better. [**Avera9eJoe**](https://forum.kerbalspaceprogram.com/members/82464-Avera9eJoe) had already asked a similar question in this [post](https://forum.kerbalspaceprogram.com/threads/115408-WIP-Scatterer-atmospheric-scattering-mod-%28v0-0151-20-05-2015%29?p=1925843\u0026viewfull=1#post1925843) and **blackrack** said he was not against but nothing more.\n\nRight on thank you Vandest. That was exactly what I was asking. Sorry for the repeat question guys. And thank you for the tactful response. I know with all the repeats question everyone is getting a bit edgy. And rightfully so, but we all miss things from time to time."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-06-14T20:18:45Z","Content":"\u003E \n\u003E The [**Hyomoto**](https://forum.kerbalspaceprogram.com/members/66529-Hyomoto) response is so relevant that not even know of whereof he speaks. Hyomoto, you use the politest tone, yet as a reader I feel insulted.\n\u003E You think maybe relieve the thread creator by answering his place, if that\u0027s the case I think it is more than capable of doing himself.\n\u003E \n\u003E  By the way if [**blackrack**](https://forum.kerbalspaceprogram.com/members/107168-blackrack) really bothered by repeated questions, it\u0027s sufficient to consider it and modify the 1st post.\n\u003E \n\u003E I think it is a good idea, until we get better. [**Avera9eJoe**](https://forum.kerbalspaceprogram.com/members/82464-Avera9eJoe) had already asked a similar question in this [post](https://forum.kerbalspaceprogram.com/threads/115408-WIP-Scatterer-atmospheric-scattering-mod-%28v0-0151-20-05-2015%29?p=1925843\u0026viewfull=1#post1925843) and **blackrack** said he was not against but nothing more.\n\nEh?\n\n\\*re-reads\\*\n\nOh yeah! I suggested this as a way of removing the flickering circles from orbit. I\u0027m taking back that suggestion until future updates when EVE-Scatterer integration is at a more solid state. In the current moment of scatterers development I don\u0027t feel that suggesting fixes or even reporting bugs is all that useful. Keep reading before you judge this comment. This time of year is usually tests and finals for colleges/schools as well as other irl business that has been effecting numerous modders on the forums (including myself). Just as a guess, Blackrack might be busy irl, and posting bugs and suggestions is probably not beneficial. Especially as the suggestions and bugs have probably already been posted. My two cents on the matter. ^-^\n\nEDIT:\n\nHey Blackrack! NASA just released an awesome 4 minute video of the ISS and earth from orbit in 4K. Idk if you have a 4K monitor (I don\u0027t) but regardless it shows some phenomenal footage of the earths atmospheric scattering from orbit as the sun falls. It could be useful! If now, it\u0027s a fun video to watch regardless haha. ^-^\n\n\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/ouv1Un1F36A?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\n\n**Edited \u003Ctime datetime=\u00222015-06-16T04:39:31Z\u0022 title=\u002206/16/2015 04:39  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 16, 2015\u003C/time\u003E by Avera9eJoe**\n  \nfound a use for the word solid in this message"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2015-06-17T20:44:16Z","Content":"\u003E \n\u003E [http://i.imgur.com/NK1dLnJ.png](http://i.imgur.com/NK1dLnJ.png)\n\u003E [http://i.imgur.com/U6rs7x5.jpg](http://i.imgur.com/U6rs7x5.jpg)\n\u003E \n\u003E So good. I dont think I can ever actually yank this out of my install\n\nSorry to dig up such an old post... but any chance you could share your reshade configuration? I\u0027m not having much luck!"},{"CreatedByName":"jandcando","CreatedById":66121,"CreatedDateTime":"2015-06-21T21:06:45Z","Content":"Woah... I just installed this mod and I can\u0027t get over how good the KSC looks at dusk with the mountains in the background... I can wait to see more. This might be my favorite visual mod by far."},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-06-23T03:25:51Z","Content":"Hey Just tossed this into 1.0.3. It runs so far better than 1.0.2 but... When using custom lens flairs it cuts it off in atmosphere. Not saying to say go fix it. Just saying it so everyone is aware until someone figures it out."},{"CreatedByName":"Eskandare","CreatedById":62742,"CreatedDateTime":"2015-06-23T05:02:24Z","Content":"I love this mod, actually look forward to seeing it completely available for all planets especially Jool, so the density is so thick we no longer see the big green bouncy rubber ball. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nEdit: I may have said this already and forgot..."},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-06-24T14:58:51Z","Content":"[http://blogs.unity3d.com/2015/05/28/atmospheric-scattering-in-the-blacksmith/](http://blogs.unity3d.com/2015/05/28/atmospheric-scattering-in-the-blacksmith/)\n\nUnity released neat free asset showcasing their new implementation of atmospheric scattering with occlusion, might be useful as a reference in the future. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-06-24T15:50:59Z","Content":"\u003E \n\u003E [http://blogs.unity3d.com/2015/05/28/atmospheric-scattering-in-the-blacksmith/](http://blogs.unity3d.com/2015/05/28/atmospheric-scattering-in-the-blacksmith/)\n\u003E Unity released neat free asset showcasing their new implementation of atmospheric scattering with occlusion, might be useful as a reference in the future. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nVery nice find bac9, though it probably won\u0027t work for a round planet and for the view from orbit. However I could adapt their occluded scattering/godrays implementation and it could make a great addition."},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-06-24T18:28:32Z","Content":"By the way, not sure how much of problem would that pose for you and rbray, but it looks like Unity plans to deprecate the Material object constructor with a shader source argument, which will render an approach used to sideload shaders from plaintext library resources used by many mods right now impossible. Material constructors will only accept Material references or Shader references going forward, and a string-based Shader constructor doesn\u0027t exist either. Not sure how to work around that.\n\n[http://aras-p.info/blog/2015/04/27/optimizing-unity-renderer-3-fixed-function-removal/](http://aras-p.info/blog/2015/04/27/optimizing-unity-renderer-3-fixed-function-removal/)\n\nAs far as I understand, it\u0027s just marked as obsolete at the moment but still works on Unity 5.1, but it won\u0027t anymore once 5.2 lands. This spells trouble for any shader mod should KSP move to that release.\n\nThere might be a way to load Assets containing Shaders as an alternative, but I never looked at it before. Asset Bundles were a Pro feature before, if I\u0027m not mistaken, but with Unity 5 unlocking all previously Pro-only features, it\u0027s worth a look\n\n**Edited \u003Ctime datetime=\u00222015-06-24T18:37:30Z\u0022 title=\u002206/24/2015 06:37  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 24, 2015\u003C/time\u003E by bac9**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-06-24T18:38:10Z","Content":"\u003E \n\u003E By the way, not sure how much of problem would that pose for you and rbray, but it looks like Unity plans to deprecate the Material object constructor with a shader source argument, which will render an approach used to sideload shaders from plaintext library resources used by many mods right now impossible. Material constructors will only accept Material references or Shader references going forward, and a string-based Shader constructor doesn\u0027t exist either. Not sure how to work around that.\n\u003E [http://aras-p.info/blog/2015/04/27/optimizing-unity-renderer-3-fixed-function-removal/](http://aras-p.info/blog/2015/04/27/optimizing-unity-renderer-3-fixed-function-removal/)\n\u003E \n\u003E As far as I understand, it\u0027s just marked as obsolete at the moment but still works on Unity 5.1, but it won\u0027t anymore once 5.2 lands. This spells trouble for any shader mod should KSP move to that release.\n\nI use the text constructor to load shaders and as far as I know rbray does the same too. Unless the devs add a proper way to import shaders this would effectively mean all shader mods are dead."},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-06-24T19:05:04Z","Content":"\u003E \n\u003E By the way, not sure how much of problem would that pose for you and rbray, but it looks like Unity plans to deprecate the Material object constructor with a shader source argument, which will render an approach used to sideload shaders from plaintext library resources used by many mods right now impossible. Material constructors will only accept Material references or Shader references going forward, and a string-based Shader constructor doesn\u0027t exist either. Not sure how to work around that.\n\u003E [http://aras-p.info/blog/2015/04/27/optimizing-unity-renderer-3-fixed-function-removal/](http://aras-p.info/blog/2015/04/27/optimizing-unity-renderer-3-fixed-function-removal/)\n\u003E \n\u003E As far as I understand, it\u0027s just marked as obsolete at the moment but still works on Unity 5.1, but it won\u0027t anymore once 5.2 lands. This spells trouble for any shader mod should KSP move to that release.\n\u003E \n\u003E There might be a way to load Assets containing Shaders as an alternative, but I never looked at it before. Asset Bundles were a Pro feature before, if I\u0027m not mistaken, but with Unity 5 unlocking all previously Pro-only features, it\u0027s worth a look\n\nAs if I\u0027m not already having enough trouble with the Reflection plugin."},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-06-24T19:26:43Z","Content":"Mike (Mu) suggested that using AssetBundles can be a workaround. They should not be locked behind the Pro license in Unity 5.x in contrast with 4.x, so any modder might be able to build them with a Unity Editor and it might be worth to start trying them out.\n\n[http://docs.unity3d.com/Manual/BuildingAssetBundles5x.html](http://docs.unity3d.com/Manual/BuildingAssetBundles5x.html)"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-06-24T19:37:24Z","Content":"\u003E \n\u003E Mike (Mu) suggested that using AssetBundles can be a workaround. They should not be locked behind the Pro license in Unity 5.x in contrast with 4.x, so any modder might be able to build them with a Unity Editor and it might be worth to start trying them out.\n\u003E [http://docs.unity3d.com/Manual/BuildingAssetBundles5x.html](http://docs.unity3d.com/Manual/BuildingAssetBundles5x.html)\n\nthat s some welcome news"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-06-24T19:58:08Z","Content":"That does not sound good. I really hope there is a work around for this... ![;.;](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif)\n\nAnd what was that about a reflection plugin?"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-06-24T20:22:52Z","Content":"\u003E \n\u003E Mike (Mu) suggested that using AssetBundles can be a workaround. They should not be locked behind the Pro license in Unity 5.x in contrast with 4.x, so any modder might be able to build them with a Unity Editor and it might be worth to start trying them out.\n\u003E [http://docs.unity3d.com/Manual/BuildingAssetBundles5x.html](http://docs.unity3d.com/Manual/BuildingAssetBundles5x.html)\n\nThat\u0027s good to hear. I\u0027ll have to experiment a bit... hopefully I\u0027ll be able to release WIP EVE before Squad gets to 5.2 ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n- - - Updated - - -\n\n\u003E \n\u003E By the way, not sure how much of problem would that pose for you and rbray, but it looks like Unity plans to deprecate the Material object constructor with a shader source argument, which will render an approach used to sideload shaders from plaintext library resources used by many mods right now impossible. Material constructors will only accept Material references or Shader references going forward, and a string-based Shader constructor doesn\u0027t exist either. Not sure how to work around that.\n\u003E [http://aras-p.info/blog/2015/04/27/optimizing-unity-renderer-3-fixed-function-removal/](http://aras-p.info/blog/2015/04/27/optimizing-unity-renderer-3-fixed-function-removal/)\n\u003E \n\u003E As far as I understand, it\u0027s just marked as obsolete at the moment but still works on Unity 5.1, but it won\u0027t anymore once 5.2 lands. This spells trouble for any shader mod should KSP move to that release.\n\u003E \n\u003E There might be a way to load Assets containing Shaders as an alternative, but I never looked at it before. Asset Bundles were a Pro feature before, if I\u0027m not mistaken, but with Unity 5 unlocking all previously Pro-only features, it\u0027s worth a look\n\nActually, I just read the blog entry... We are fine. Aras was talking about fixed function shaders. We use compiled shaders, so we\u0027ll be unaffected."},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-06-24T20:34:52Z","Content":"\u003E \n\u003E Actually, I just read the blog entry... We are fine. Aras was talking about fixed function shaders. We use compiled shaders, so we\u0027ll be unaffected.\n\nI don\u0027t think so. The cause for removal was the fact that this constructor was initially created with fixed function shaders in mind and the fact that FFS support is being removed, yes - but the string-based constructor is removed entirely, as far as I understand. It makes no difference what you actually intend to pass into the string when string-based constructor is removed.\n\n**Edited \u003Ctime datetime=\u00222015-06-24T20:39:05Z\u0022 title=\u002206/24/2015 08:39  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 24, 2015\u003C/time\u003E by bac9**"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-06-24T21:15:55Z","Content":"\u003E \n\u003E I don\u0027t think so. The cause for removal was the fact that this constructor was initially created with fixed function shaders in mind and the fact that FFS support is being removed, yes - but the string-based constructor is removed entirely, as far as I understand. It makes no difference what you actually intend to pass into the string when string-based constructor is removed.\n\nAh... I see. Yeah, this may be problematic."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-06-24T21:32:06Z","Content":"Well I hope the asset bundles will do the trick, I already considered using them once for compute shaders. But really SQUAD could just add a proper way."},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-06-24T23:05:07Z","Content":"\u003E \n\u003E Well I hope the asset bundles will do the trick, I already considered using them once for compute shaders. But really SQUAD could just add a proper way.\n\nAsset bundles are probably how Squad does it themselves. That\u0027s how you do things in Unity."},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2015-06-24T23:53:29Z","Content":"I suggest asking Harv/Mike/Jim/Ted et al. directly regarding your situation\n\nThey might be able to address your concerns, or even incorporate something accommodating your case like the aero takeover flag Ferram got for FAR"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2015-06-25T07:34:05Z","Content":"\u003E \n\u003E I suggest asking Harv/Mike/Jim/Ted et al. directly regarding your situation\n\u003E They might be able to address your concerns, or even incorporate something accommodating your case like the aero takeover flag Ferram got for FAR\n\nShader loading is one of those rare things where \u0022Unity not us :^)\u0022 can be said unironically, so nope, I doubt that.\n\n\u003E \n\u003E Asset bundles are probably how Squad does it themselves. That\u0027s how you do things in Unity.\n\nNope, they are automatically included by Unity into any build containing scenes using those shaders, so no special Squad-side system for loading them exists at the moment, afaik. They are just there in the game.\n\nTheir own game never needs that system as they have full control over builds themselves and require no sideloading.\n\nAnd if Asset Bundles indeed work, then there is no need for a system like that anyway on the modding scene side either."},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-06-28T14:50:13Z","Content":"\u003E \n\u003E Hey Just tossed this into 1.0.3. It runs so far better than 1.0.2 but... When using custom lens flairs it cuts it off in atmosphere. Not saying to say go fix it. Just saying it so everyone is aware until someone figures it out.\n\nOk, so I reinstalled scatterer AVP and EVE and a lens flare in the asset9 file in 1.0.4. One at a time, as well as did not convert any of the EVE / AVP textures to dds. And it all ran just fine (in win 7 x64)\n\nSo I really don\u0027t think Scatterer had anything to do with the sun flare disappearing after all. Looks like it may be an issue with one of the textures and the way I converted it for 1.0.2. Sorry for not looking close enough before posting."}]}