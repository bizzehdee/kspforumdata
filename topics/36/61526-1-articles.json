{"TopicId":61526,"ForumId":36,"TopicTitle":"KerbalGIS version 1.0-alpha2 (Just usable edition)","CreatedByName":"Gnonthgol","CreatedById":99344,"CreatedDateTime":"2014-01-29T22:34:39Z","PageNum":1,"Articles":[{"CreatedByName":"Gnonthgol","CreatedById":99344,"CreatedDateTime":"2014-01-29T22:34:39Z","Content":"\n\u003Cp\u003EIf you have seen KerbalMaps.com then you have a pretty good idea of what I am trying to do. This plugin will setup your own tile server inside your game. This allows you to get better resolution, newer maps and better plugin integration.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/Gnonthgol/KerbalGIS/releases/download/1.0-alpha2/KerbalGIS.zip\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022font-size:24px;\u0022\u003EDownload v1.0-alpha2\u003C/span\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe plugin is not done quite yet and requires lots of work to be fully working. I am releasing it because it is in a state where it will be useful and I am requesting help.\u003C/p\u003E\u003Cp\u003EWhat needs to be done:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EData from the PQS system needs to be cached to improve performance\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EMore layers to show more interesting things\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETesting with mods that modify the world\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFront end needs some tweeks so that it does not look like it is made by someone who don\u0027t know JavaScript (me)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ENeed to show more information about the flights around the body\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOther projections including polar projections\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ELayers for resources added by plugins like Kethane\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EChangelog:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E1.0-alpha2:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E Add configuration\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Allow for directories in the http file requests and move the files to the www directory\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Add simple body selector\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E1.0-alpha1:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E Initial commit\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you want to help out read the source code is available at \u003Ca href=\u0022https://github.com/Gnonthgol/KerbalGIS\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Gnonthgol/KerbalGIS\u003C/a\u003E. BSD license as always.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-03T14:49:21Z\u0022 title=\u002202/03/2014 02:49  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 3, 2014\u003C/time\u003E by Gnonthgol\u003C/strong\u003E\n\u003Cbr\u003ENew version\n\u003C/span\u003E\n"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2014-01-29T22:44:23Z","Content":"\n\u003Cp\u003EShould be moved to Add-on Development.\u003C/p\u003E\n"},{"CreatedByName":"Moach","CreatedById":9,"CreatedDateTime":"2014-01-30T00:01:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022GregroxMun\u0022 data-cite=\u0022GregroxMun\u0022\u003E\u003Cdiv\u003EShould be moved to Add-on Development.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E ...And that\u0027s where we are now - done! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif\u0022 alt=\u0022:rolleyes:\u0022\u003E\u003C/p\u003E\u003Cp\u003EThis project does have my attention anyhow -- if this does what I think it might, then it\u0027s gonna be quite a treat once it\u0027s working! keep it up!\u003C/p\u003E\u003Cp\u003Echeers!\u003C/p\u003E\n"},{"CreatedByName":"Gnonthgol","CreatedById":99344,"CreatedDateTime":"2014-01-30T00:16:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Moach\u0022 data-cite=\u0022Moach\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIf this does what I think it might, then it\u0027s gonna be quite a treat once it\u0027s working! keep it up!\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, it is working and is quite a treat. However it needs a lot of polish and testing before I dare call it version 1.0. I am already using it to find biomes.\u003C/p\u003E\n"},{"CreatedByName":"hakan","CreatedById":92934,"CreatedDateTime":"2014-01-30T00:27:23Z","Content":"\n\u003Cp\u003ENow if this could be integrated with TeleMachus.... I need additional computers on my KSP station \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"hakan","CreatedById":92934,"CreatedDateTime":"2014-01-30T00:49:06Z","Content":"\n\u003Cp\u003EOne tiny thing: The server seems to explicitly bind to localhost.\u003C/p\u003E\u003Cp\u003EIf I run the browser on the same machine as KSP and access \u003Ca href=\u0022http://localhost:8080/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://localhost:8080/\u003C/a\u003E, the map is displayed. But when I access it from my tablet, with \u003Ca href=\u0022\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://\u0026lt;ip-of-my-laptop\u0026gt;:8080/,\u003C/a\u003E I get a page with the text \u0022Bad Request (Invalid host)\u0022.\u003C/p\u003E\n"},{"CreatedByName":"Gnonthgol","CreatedById":99344,"CreatedDateTime":"2014-01-30T15:23:36Z","Content":"\n\u003Cp\u003EI did not think of this, and I do not have two computers with graphical interfaces to test this. Could you test if removing all the \u0022http://localhost:8080\u0022 strings from the index.html file included helps?\u003C/p\u003E\n"},{"CreatedByName":"hakan","CreatedById":92934,"CreatedDateTime":"2014-01-30T23:43:25Z","Content":"\n\u003Cp\u003ESorry, manipulating the \u0022http://localhost:8080\u0022 part did not help. I fear the culprit is\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E                public void Update ()\u003Cbr\u003E                {\u003Cbr\u003E                        if (listener == null) {\u003Cbr\u003E                                listener = new HttpListener ();\u003Cbr\u003E                                listener.Prefixes.Add (\u0022http://localhost:8080/\u0022);\u003Cbr\u003E                                listener.Start ();\u003Cbr\u003E                                listener.BeginGetContext (new AsyncCallback (httpCallback), listener);\u003Cbr\u003E                        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ein your KerbalGIS.cs class. \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/24594-0-23-Telemachus-%E2%80%93-Telemetry-and-Flight-Control-in-the-Web-Browser-%282014-1-11%29\u0022 rel=\u0022external nofollow\u0022\u003ETelemachus\u003C/a\u003E has the same problem to open up local web servers, but he seems to have created his own HttpListener classes. I can access the Telemachus pages perfectly fine from my tablet.\u003C/p\u003E\u003Cp\u003EMaybe you could find something to let yourself be inspired from at his \u003Ca href=\u0022https://github.com/richardbunt/Telemachus/tree/master/Servers/Servers/src\u0022 rel=\u0022external nofollow\u0022\u003Egithub project\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"Gnonthgol","CreatedById":99344,"CreatedDateTime":"2014-01-31T00:18:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hakan\u0022 data-cite=\u0022hakan\u0022\u003E\u003Cdiv\u003ESorry, manipulating the \u0022http://localhost:8080\u0022 part did not help.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmm, I suspect the HttpListener class works different on different systems. On my Linux it listens on all interfaces, that may be a Mono bug though.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hakan\u0022 data-cite=\u0022hakan\u0022\u003E\u003Cdiv\u003ETelemachus has the same problem to open up local web servers, but he seems to have created his own HttpListener classes. I can access the Telemachus pages perfectly fine from my tablet.\u003Cp\u003EMaybe you could find something to let yourself be inspired from at his github project.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI did look at that code before, but writing your own http server when there is one included in the runtime is just silly and a waste of time in my opinion. What Telemacus does is it lets the connection be configured by an external configuration file. There is a configuration system for plugins in KSP already. There are several other places I have just put arbitrary numbers that should be configurable.\u003C/p\u003E\n"},{"CreatedByName":"hakan","CreatedById":92934,"CreatedDateTime":"2014-01-31T23:51:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gnonthgol\u0022 data-cite=\u0022Gnonthgol\u0022\u003E\u003Cdiv\u003EHmm, I suspect the HttpListener class works different on different systems. On my Linux it listens on all interfaces, that may be a Mono bug though.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAaaaaaahhhhh... Windows... Let me check whether some stupid windows firewall blocks the access from other hosts on the same network. I would never notice a requester from Windows since I run my KSP always in full-screen mode.\u003C/p\u003E\u003Cp\u003E*edit*: I just tried... No popups from Windows firewalls, even while trying to access the web server from my tablet. So much for a theory \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-01T01:30:22Z\u0022 title=\u002202/01/2014 01:30  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 1, 2014\u003C/time\u003E by hakan\u003C/strong\u003E\n\u003Cbr\u003Etested personal firewall theory\n\u003C/span\u003E\n"},{"CreatedByName":"Gnonthgol","CreatedById":99344,"CreatedDateTime":"2014-02-03T14:33:14Z","Content":"\n\u003Cp\u003ECan you try the new version. I added a configuration option that allows you to change the listening parameters.\u003C/p\u003E\n"},{"CreatedByName":"hakan","CreatedById":92934,"CreatedDateTime":"2014-02-03T23:43:58Z","Content":"\n\u003Cp\u003EThank you, after discovering the config.xml in the plugin directory everthing works like a charm. Access from the netbook and the mobile (Galaxy S4) works fine and is actually kind of usable...\u003C/p\u003E\u003Cp\u003ENow all I need to do is find a way to run KSP or KerbalGIS headlessly on my server so just browsing the map does not kill my active game framerate \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Gnonthgol","CreatedById":99344,"CreatedDateTime":"2014-02-04T00:36:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hakan\u0022 data-cite=\u0022hakan\u0022\u003E\u003Cdiv\u003ENow all I need to do is find a way to run KSP or KerbalGIS headlessly on my server so just browsing the map does not kill my active game framerate \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is something i also want to try out. If you stick varnish or squid in front of it then it might be usable. You can still set the framerate in the config file but the map quality will suffer, it gives you lower resolution tiles if it takes too long.\u003C/p\u003E\u003Cp\u003EI am working on trying to improve the framerate by caching the PQS data or deliver multiple in game frames for each tile.\u003C/p\u003E\n"},{"CreatedByName":"likke_A_boss","CreatedById":94697,"CreatedDateTime":"2014-02-11T05:04:59Z","Content":"\n\u003Cp\u003E*bump* Hows this coming in along? This looks like its gonna be pretty sweet soon.\u003C/p\u003E\n"},{"CreatedByName":"Gnonthgol","CreatedById":99344,"CreatedDateTime":"2014-02-12T21:56:25Z","Content":"\n\u003Cp\u003EI have been a bit under the weather lately and it takes time to come up with good ways to work around the horribly slow PQS system. It seams like I have to implement some sort of persistent cache to get it to run relatively smooth.\u003C/p\u003E\n"}]}