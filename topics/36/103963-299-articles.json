{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":299,"Articles":[{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-11-09T03:47:21Z","Content":"[@Poodmund](https://forum.kerbalspaceprogram.com/index.php?/profile/128643-poodmund/)\n\n\u003E \n\u003E \n\u003E Quote\n\u003E \n\u003E \n\u003E **The flooded \u003Cabbr style=\u0022border-bottom:none;\u0022 title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E bug still haunts so many people and constantly fills up the KSP sub-reddit.**\n\u003E \n\nIf you want to see something interesting: switch all cameras to Deferred Shading. You\u0027ll notice that PQS draws the terrain of Kerbin precisely where \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E becomes flooded.\n\nIf you want to improve performance, the first step would be change how it renders: right now it moves with the camera and has to re-render every frame to keep up with that, but in fact you could render much less frequently against a non-rotating skybox instead (for the far scatter), so the camera moving around just show different parts of the skybox. Also, try not to ever copy any textures or renders. For example, a static skybox material can be used for the background galaxy; then each of the 6 atmosphere skybox cameras could have their own skybox object referenced to that same single galaxy material, and all 6 rendering each into 1 face of another skybox material. That atmosphere skybox material is then used as the full game skybox: i.e. RenderSettings.Skybox. Due to the location of main camera being the same location as the atmo camera cluster, even though the camera cluster rotation is static, it appears correctly due to the atmo shader rendering against the depth from the scaledspace objects. The last step is simply to change the main camera to have it\u0027s clearflags also using skybox (which is now a scattered atmosphere \u002B galaxy skybox). The localscenery scatter will then be properly separated from the far scatter because the far scatter is part of the skybox anyway.\n\nThis setup means that nothing renders twice and nothing is copied (the 6 atmo cams render directly into the clearFlags of the live local camera), they all use reference memory down the hierarchy from Galaxy -\u003E Atmo / Scaled Space -\u003E Local Scenery, and since it\u0027s all done within cubemaps, the camera can pan however it wants and you only have to render local scenery with it: all of the galaxy and atmo scattering/shading can be done as infrequently as you choose and the player is none the wiser.\n\nYou could also put non-volumetric clouds in the atmo layer too, unless you want shadows cast from them onto local scenery (I\u0027m unsure if the 2d clouds cast shadows, or if it\u0027s just the volumetric ones currently).\n\nFar Scatter Re-render:\n\n- When on the ground, the far scatter only has to update to show the difference in time-of-day. So even once every 10\u002B seconds at no-time-warp is more than fine.\n    - this also means you can stagger the camera renders to be 1 face per x seconds and go round-robin to reduce tick lag\n- When flying, the rate of re-render is dependent on the altitude change rate. At constant altitude, again, it only has to render maybe once every 10\u002B seconds for day/night.\n- In orbit, it mostly just needs to re-render for day/night; but needs to be more frequent: like once every 2 or so seconds due to you moving so fast and your position versus the scaled space position slides when in low orbit.\n\n**Edited \u003Ctime datetime=\u00222018-11-09T04:27:37Z\u0022 title=\u002211/09/2018 04:27  AM\u0022 data-short=\u00225 yr\u0022\u003ENovember 9, 2018\u003C/time\u003E by Electrocutor**"},{"CreatedByName":"Stevie_D","CreatedById":103007,"CreatedDateTime":"2018-11-09T13:27:37Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Every time i see you come back to this mod it makes my inner child jump with joy. Great to see you wanna continue this onwards."},{"CreatedByName":"Kevin Kyle","CreatedById":110492,"CreatedDateTime":"2018-11-09T16:40:49Z","Content":"\u003E \n\u003E \n\u003E 17 hours ago, Tyko said:\n\u003E \n\u003E \n\u003E The biggest thing I\u0027d love to see would be removing the black line on the horizon when in the atmosphere of Kerbin. You see that line every time you launch or fly around Kerbin.\n\u003E \n\nYep, this is the only thing I see that could be improved. Im sure there is more, reading some of the stuff in here, but its looking pretty good on my machine.\n\nSome of the latest mod updates have been awesome lately, this is certainly no exception."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2018-11-09T17:40:40Z","Content":"\u003E \n\u003E \n\u003E 18 hours ago, Poodmund said:\n\u003E \n\u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E Quote\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E -Adding proland trees in scatterer **This would be very nice. I\u0027m not sure how you specify which areas of the terrain are covered in the trees though, maybe link it to a per biome basis?**\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E ***I was thinking per biome values for distribution/tree types or a density map or a combination of both***\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E -Improving the localspace/orbit transition and getting rid of (or reducing the need for) configpoints **Improving the transition is always good but it does work quite well already if you actually set up with good values in the config.**\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E ***So actually I have a new approach in mind which should make the transition perfect by default (without finetuning), as well as fix the horizon effect you mention, and unify the shading method used in scaledSpace and localSpace (imo the colors look a bit better in localSpace right now)***\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E -Integrating the precomputation code into the game (ie having the config tool functionality ingame instead) **I wouldn\u0027t see this as much of a priority at all. I almost think it would be better to keep it separate as it is now. Implementing it into the game could cause further mod issues, perfomance issues etc.**\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E ***Point taken, this is for modders only anyway so if it\u0027s not needed better implement something more useful.***\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E -Doing the godrays correctly and adding them to clouds as well **With reference to clouds, improving the ongoing Scatterer-\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E relationship is a battle I don\u0027t envy you for tackling.**\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E ***Although hard to configure correctly, I\u0027m pretty happy with the way the cloud integration has turned out so far and it wasn\u0027t so much trouble to implement***\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E -Displaying all effects correctly in any camera (mod cameras, bdarmory cameras etc) **Getting Scatterer to render using the in-game screenshot function would be nice as it currently does not when creating super-sampled screenshots.**\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E ***I thought the supersampled screens were working correctly? Apart from maybe the sunflare shader?***\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E -Underwater caustics **Improving Scatterer\u0027s liquid rendering and performance is always welcome as the ocean effects are one of the main draws. ALSO! The flooded \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E bug still haunts so many people and constantly fills up the KSP sub-reddit.**\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E ***Yep, that bug is still a pain and I find it impossible to reproduce on purpose***\n\u003E \u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The main things I\u0027d like to see potentially resolved are:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E - Editing the Alpha values of the Scatterer atmo effects seems to not actually make the effect more transparent but actually just makes the body fade to a dark grey sphere. Is this intended? I\u0027ve always thought that this behaviour is super weird as it is hard to implement Scatterer on a body that has a very thin atmosphere as you lower the Alpha setting a lot to reduce the Scatterer effect but then have to massively over-expose the effect to stop the body from become a dark-grey/black sphere.\n\u003E \n\nI added my response in italic, regarding the alpha values, can you provide some screens of the behaviour in question? Since the shaders switched from alpha blending to additive/soft-additive we don\u0027t have alpha anymore and instead the value added is lowered I thought it was more or less equivalent, but I guess you have more experience playing with configs, please provide some visuals so I can get an idea of whta you\u0027d like to have.\n\n\u003E \n\u003E \n\u003E 18 hours ago, Tyko said:\n\u003E \n\u003E \n\u003E The biggest thing I\u0027d love to see would be removing the black line on the horizon when in the atmosphere of Kerbin. You see that line every time you launch or fly around Kerbin.\n\u003E \n\nThe horizon line on the ocean or the one on the edge of terrain or the one in the middle of mountains? Please be specific and maybe provide screens if you can, they would help me.\n\n\u003E \n\u003E \n\u003E 13 hours ago, therealcrow999 said:\n\u003E \n\u003E \n\u003E I am going to be the guy who ask this, is there a way to not use the stock icon settings? I was looking in the config file, but did not see anything.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Or have it use Toolbar Controller.\n\u003E \n\nIs toolbar controller a mod? I thought there was another popular mod for toolbars? The name escapes me. Anyway, what do you want exactly? To disable the button?\n\n\u003E \n\u003E \n\u003E 13 hours ago, Electrocutor said:\n\u003E \n\u003E \n\u003E [@Poodmund](https://forum.kerbalspaceprogram.com/index.php?/profile/128643-poodmund/)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E If you want to see something interesting: switch all cameras to Deferred Shading. You\u0027ll notice that PQS draws the terrain of Kerbin precisely where \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E becomes flooded.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E If you want to improve performance, the first step would be change how it renders: right now it moves with the camera and has to re-render every frame to keep up with that, but in fact you could render much less frequently against a non-rotating skybox instead (for the far scatter), so the camera moving around just show different parts of the skybox. Also, try not to ever copy any textures or renders. For example, a static skybox material can be used for the background galaxy; then each of the 6 atmosphere skybox cameras could have their own skybox object referenced to that same single galaxy material, and all 6 rendering each into 1 face of another skybox material. That atmosphere skybox material is then used as the full game skybox: i.e. RenderSettings.Skybox. Due to the location of main camera being the same location as the atmo camera cluster, even though the camera cluster rotation is static, it appears correctly due to the atmo shader rendering against the depth from the scaledspace objects. The last step is simply to change the main camera to have it\u0027s clearflags also using skybox (which is now a scattered atmosphere \u002B galaxy skybox). The localscenery scatter will then be properly separated from the far scatter because the far scatter is part of the skybox anyway.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E This setup means that nothing renders twice and nothing is copied (the 6 atmo cams render directly into the clearFlags of the live local camera), they all use reference memory down the hierarchy from Galaxy -\u003E Atmo / Scaled Space -\u003E Local Scenery, and since it\u0027s all done within cubemaps, the camera can pan however it wants and you only have to render local scenery with it: all of the galaxy and atmo scattering/shading can be done as infrequently as you choose and the player is none the wiser.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E You could also put non-volumetric clouds in the atmo layer too, unless you want shadows cast from them onto local scenery (I\u0027m unsure if the 2d clouds cast shadows, or if it\u0027s just the volumetric ones currently).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Far Scatter Re-render:\n\u003E \n\u003E \n\u003E \n\u003E - When on the ground, the far scatter only has to update to show the difference in time-of-day. So even once every 10\u002B seconds at no-time-warp is more than fine.\n\u003E     - this also means you can stagger the camera renders to be 1 face per x seconds and go round-robin to reduce tick lag\n\u003E - When flying, the rate of re-render is dependent on the altitude change rate. At constant altitude, again, it only has to render maybe once every 10\u002B seconds for day/night.\n\u003E - In orbit, it mostly just needs to re-render for day/night; but needs to be more frequent: like once every 2 or so seconds due to you moving so fast and your position versus the scaled space position slides when in low orbit.\n\u003E \n\nThe thing is, while this is all technically very nice, the sky shader is already using **precomputed** values, it\u0027s essentially a glorified texture lookup.\n\nOut of all the effects in scatterer, the sky shader is by far the least expensive and you wouldn\u0027t see any noticeable performance improvements either by implementing this approach or even disabling the shader.\n\nin fact in the early versions of the mod (before post-processing), I ran it on a low-tier laptop with a performance hit of 1 fps when the game was running at 35-40 fps.\n\nNow on the other hand, post-processing has to render a depth buffer and the water shader has to do a LOT of math...\n\n\u003E \n\u003E \n\u003E 3 hours ago, Stevie\\_D said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Every time i see you come back to this mod it makes my inner child jump with joy. Great to see you wanna continue this onwards.\n\u003E \n\nThank you, of all the projects I work on in my free time, this is always one of the most meaningful and enjoyable."},{"CreatedByName":"therealcrow999","CreatedById":19331,"CreatedDateTime":"2018-11-09T20:01:56Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E I added my response in italic, regarding the alpha values, can you provide some screens of the behaviour in question? Since the shaders switched from alpha blending to additive/soft-additive we don\u0027t have alpha anymore and instead the value added is lowered I thought it was more or less equivalent, but I guess you have more experience playing with configs, please provide some visuals so I can get an idea of whta you\u0027d like to have.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The horizon line on the ocean or the one on the edge of terrain or the one in the middle of mountains? Please be specific and maybe provide screens if you can, they would help me.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Is toolbar controller a mod? I thought there was another popular mod for toolbars? The name escapes me. Anyway, what do you want exactly? To disable the button?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The thing is, while this is all technically very nice, the sky shader is already using **precomputed** values, it\u0027s essentially a glorified texture lookup.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Out of all the effects in scatterer, the sky shader is by far the least expensive and you wouldn\u0027t see any noticeable performance improvements either by implementing this approach or even disabling the shader.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E in fact in the early versions of the mod (before post-processing), I ran it on a low-tier laptop with a performance hit of 1 fps when the game was running at 35-40 fps.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Now on the other hand, post-processing has to render a depth buffer and the water shader has to do a LOT of math...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Thank you, of all the projects I work on in my free time, this is always one of the most meaningful and enjoyable.\n\u003E \n\nYeah just to disable it. Toolbar Controller is something that tells the icon to go in Stock bar or Blizzy Toolbar or both. \n\n[https://forum.kerbalspaceprogram.com/index.php?/topic/169509-151-toolbar-controller-for-modders/](https://forum.kerbalspaceprogram.com/index.php?/topic/169509-151-toolbar-controller-for-modders/)"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2018-11-09T22:56:25Z","Content":"\u003E \n\u003E \n\u003E On 11/8/2018 at 4:05 PM, blackrack said:\n\u003E \n\u003E \n\u003E I\u0027\uFEFFm returning to the mod now and going to spend some more time on it, I have plenty of ideas and a lot of bugs on my list.\n\u003E \n\nsqueeeeee!!!\n\n\u003E \n\u003E \n\u003E On 11/8/2018 at 5:54 PM, blackrack said:\n\u003E \n\u003E \n\u003E Some ideas I have I think should have priority instead:\uFEFF\uFEFF\n\u003E \n\nI\u0027m still a big proponent of planetshine and I\u0027m curious as to why it wasn\u0027t on this list given that you\u0027ve posted some WIP shots before so I had hoped it was at least closer to being implemented than not."},{"CreatedByName":"airtrafficcontroller","CreatedById":174649,"CreatedDateTime":"2018-11-10T04:10:48Z","Content":"\u003E \n\u003E \n\u003E 10 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E So actually\uFEFF\uFEFF\uFEFF I have a new approach in mind which should\uFEFF make the transition perfect by default (without finetuning), as well as fix the horizon effe\uFEFFc\uFEFF\uFEFF\uFEFFt\uFEFF\uFEFF\n\u003E \n\nMan, for me thats the priority, and if it works, you should put that in your curriculum vitae."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2018-11-11T09:38:09Z","Content":"\u003E \n\u003E \n\u003E On 11/9/2018 at 9:01 PM, therealcrow999 said:\n\u003E \n\u003E \n\u003E Yeah just to disable it. Toolbar Controller is something that tells the icon to go in Stock bar or Blizzy Toolbar or both. \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://forum.kerbalspaceprogram.com/index.php?/topic/169509-151-toolbar-controller-for-modders/](https://forum.kerbalspaceprogram.com/index.php?/topic/169509-151-toolbar-controller-for-modders/)\n\u003E \n\nI will look into it.\n\n\u003E \n\u003E \n\u003E On 11/9/2018 at 11:56 PM, Drew Kerman said:\n\u003E \n\u003E \n\u003E squeeeeee!!!\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m still a big proponent of planetshine and I\u0027m curious as to why it wasn\u0027t on this list given that you\u0027ve posted some WIP shots before so I had hoped it was at least closer to being implemented than not.\n\u003E \n\nBasically it added a lot of complexity in the interaction with other effects and I decided to finalize other things before going back to it. It also raises the question of how to interact with the planetshine mod which I haven\u0027t looked in enough to see what it can handle and if I should instead add my code to it and make scatterer compatible with it. I should get back to it."},{"CreatedByName":"maja","CreatedById":168379,"CreatedDateTime":"2018-11-11T10:05:32Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Just a warning, that if you use the Toolbar Controller, it will be a hard dependence alongside with the Click Through Blocker. Another option is to add only [ToolbarWrapper](https://github.com/linuxgurugamer/ksp_toolbar/blob/master/Wrapper/ToolbarWrapper.cs) and implement a button placement yourself."},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2018-11-11T22:56:22Z","Content":"\u003E \n\u003E \n\u003E 13 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E It \uFEFFalso raises the question of how to interact with the planetshine mod\n\u003E \n\ninteresting, I never thought that would be a consideration. Seemed to me implementation in Scatterer was just going to be a complete alternative to the current planetshine mod, not something to compliment it. It\u0027s not really under any active development at the moment and would better serve those people who have less-powerful computers and/or want planetshine but not all the bells and whistles of other visual mods"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2018-11-11T23:18:29Z","Content":"\u003E \n\u003E \n\u003E 13 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E On 11/9/2018 at 2:01 PM, therealcrow999 said:\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E Yeah just to disable it. Toolbar Controller is something that tells the icon to go in Stock bar or Blizzy Toolbar or both. \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E [https://forum.kerbalspaceprogram.com/index.php?/topic/169509-151-toolbar-controller-for-modders/](https://forum.kerbalspaceprogram.com/index.php?/topic/169509-151-toolbar-controller-for-modders/)\n\u003E \u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I will look into it.\uFEFF\n\u003E \n\nFWIW, I would prefer not having to add two more functionally unrelated mods simply for the sake of using this mod.  It\u0027s not that difficult to add a checkbox config option to the mod\u0027s config dialog to say \u0022Use Blizzy\u0027s Toolbar if Available\u0022.  I did that for Distant Object Enhancement."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2018-11-12T18:54:15Z","Content":"\u003E \n\u003E \n\u003E 19 hours ago, Drew Kerman said:\n\u003E \n\u003E \n\u003E interesting, I never thought that would be a consideration. Seemed to me implementation in Scatterer was just going to be a complete alternative to the current planetshine mod, not something to compliment it. It\u0027s not really under any active development at the moment and would better serve those people who have less-powerful computers and/or want planetshine but not all the bells and whistles of other visual mods\n\u003E \n\nHmm, I haven\u0027t really been up to date with the mod\u0027s development, but I was under the impression it had several features which I shouldn\u0027t bother reimplementing and instead should make them complement each other. Anyway, we will see, maybe it\u0027s better to do like you said.\n\n\u003E \n\u003E \n\u003E 19 hours ago, MOARdV said:\n\u003E \n\u003E \n\u003E FWIW, I would prefer not having to add two more functionally unrelated mods simply for the sake of using this mod.  It\u0027s not that difficult to add a checkbox config option to the mod\u0027s config dialog to say \u0022Use Blizzy\u0027s Toolbar if Available\u0022.  I did that for Distant Object Enhancement.\n\u003E \n\nI also don\u0027t like dependencies, but I was under the impression the ToolbarWrapper linked above gets rid of the hard dependency and makes it a case of \u0022use toolbar mod if available else use stock toolbar\u0022"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-11-12T19:02:57Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E I also don\u0027t like dependencies, but I was under the impression the ToolbarWrapper linked above gets rid of the hard dependency and makes it a case of \u0022use toolbar mod if available else use stock toolbar\u0022\n\u003E \n\nYou could put your interface into the settings window too, as usually, scatterer doesn\u0027t need a real-time gui: just something to set things up once how you want them."},{"CreatedByName":"maja","CreatedById":168379,"CreatedDateTime":"2018-11-12T19:47:49Z","Content":"\u003E \n\u003E \n\u003E 46 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E I also don\u0027t like dependencies, but I was under the impression the ToolbarWrapper linked above gets rid of the hard dependency and makes it a case of \u0022use toolbar mod if available else use stock toolbar\u0022\n\u003E \n\nYou can even have buttons in both toolbars simultanously. ToolbarWrapper is just the interface for a button in Blizzy\u0027s Toolbar (there is also a check, if toolbar is available)."},{"CreatedByName":"Damon","CreatedById":162728,"CreatedDateTime":"2018-11-12T22:47:57Z","Content":"Noticed you picked up modding again, and this release has been really smooth for me! Thank you taking your precious time to keep improving this much loved mod!"},{"CreatedByName":"alexus","CreatedById":163084,"CreatedDateTime":"2018-11-16T05:21:54Z","Content":"Bug report.\n\n1. ksp x64 1.5.1\n\n2. installed mods: scatterer only last version\n\n3. problem: it is transparent hills.\n\nwhat will I do? Can you fix it?\n\nSpoiler\n\n[![KSP-x64-2018-11-16-15-03-15-31.jpg](https://preview.ibb.co/gLhJ0L/KSP-x64-2018-11-16-15-03-15-31.jpg)](https://ibb.co/bKnkfL)[![KSP-x64-2018-11-16-15-17-34-77.jpg](https://preview.ibb.co/iV6NS0/KSP-x64-2018-11-16-15-17-34-77.jpg)](https://ibb.co/mC9bn0)[![KSP-x64-2018-11-16-15-17-40-55.jpg](https://preview.ibb.co/nsG0Ef/KSP-x64-2018-11-16-15-17-40-55.jpg)](https://ibb.co/kCxU70)[![KSP-x64-2018-11-16-15-18-08-64.jpg](https://preview.ibb.co/b5tQfL/KSP-x64-2018-11-16-15-18-08-64.jpg)](https://ibb.co/gUyrLL)\n\n**Edited \u003Ctime datetime=\u00222018-11-16T05:22:57Z\u0022 title=\u002211/16/2018 05:22  AM\u0022 data-short=\u00225 yr\u0022\u003ENovember 16, 2018\u003C/time\u003E by alexus**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2018-11-16T13:21:06Z","Content":"\u003E \n\u003E \n\u003E 7 hours ago, alexus said:\n\u003E \n\u003E \n\u003E Bug report.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 1. ksp x64 1.5.1\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 2. installed mods: scatterer only last version\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 3. problem: it is transparent hills.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E what will I do? Can you fix it?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E Hide contents\n\u003E \n\u003E \n\u003E [![KSP-x64-2018-11-16-15-03-15-31.jpg](https://preview.ibb.co/gLhJ0L/KSP-x64-2018-11-16-15-03-15-31.jpg)](https://ibb.co/bKnkfL)[![KSP-x64-2018-11-16-15-17-34-77.jpg](https://preview.ibb.co/iV6NS0/KSP-x64-2018-11-16-15-17-34-77.jpg)](https://ibb.co/mC9bn0)[![KSP-x64-2018-11-16-15-17-40-55.jpg](https://preview.ibb.co/nsG0Ef/KSP-x64-2018-11-16-15-17-40-55.jpg)](https://ibb.co/kCxU70)[![KSP-x64-2018-11-16-15-18-08-64.jpg](https://preview.ibb.co/b5tQfL/KSP-x64-2018-11-16-15-18-08-64.jpg)](https://ibb.co/gUyrLL)\n\u003E \n\nReproduction steps? This in dx11?"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-11-16T19:43:38Z","Content":"\u003E \n\u003E \n\u003E 6 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Reproduction steps? This in dx11?\n\u003E \n\nAs far as I know, this has always been present on scatterer (might also be \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E related). At the very least both the last version and this, both dx11 and glcore. I rarely run d3d9, so am unsure if it too had the transparency on terrain. The amount of transparency changes with view angle.\n\n**Edited \u003Ctime datetime=\u00222018-11-16T19:48:06Z\u0022 title=\u002211/16/2018 07:48  PM\u0022 data-short=\u00225 yr\u0022\u003ENovember 16, 2018\u003C/time\u003E by Electrocutor**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2018-11-16T20:57:40Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Electrocutor said:\n\u003E \n\u003E \n\u003E As far as I know, this has always been present on scatterer (might also be \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E related). At the very least both the last version and this, both dx11 and glcore. I rarely run d3d9, so am unsure if it too had the transparency on terrain. The amount of transparency changes with view angle.\n\u003E \n\nOnly on Duna or everywhere?\n\nI only see this on dx11 since I think 1.4"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-11-16T21:03:26Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, blackrack said:\n\u003E \n\u003E \n\u003E Only on Duna or everywhere?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I only see this on dx11 since I think 1.4\n\u003E \n\nThat\u0027s actually a good question: I had only consciously noticed it on Duna since that is my go-to planet for testing things. It\u0027s not an especially noticeable effect unless you are looking for it.\n\nI\u0027ll pay more attention when I install it again and see if I can see any specific patterns."},{"CreatedByName":"alexus","CreatedById":163084,"CreatedDateTime":"2018-11-16T21:08:48Z","Content":"\u003E \n\u003E \n\u003E 10 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Only on Duna or everywhere?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I only see this on dx11 since I think 1.4\n\u003E \n\neverywhere.I am playing on dx11"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2018-11-16T21:11:20Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, Electrocutor said:\n\u003E \n\u003E \n\u003E That\u0027s actually a good question: I had only consciously noticed it on Duna since that is my go-to planet for testing things. It\u0027s not an especially noticeable effect unless you are looking for it.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027ll pay more attention when I install it again and see if I can see any specific patterns.\n\u003E \n\nThanks, and please look if toggling godrays affects it also.\n\n\u003E \n\u003E \n\u003E Just now, alexus said:\n\u003E \n\u003E \n\u003E everywhere.I am playing on dx11\n\u003E \n\nIt\u0027s broken on dx11, and I stopped supporting dx11 since it started to be unstable in KSP a few versions ago. Was that ever fixed?"},{"CreatedByName":"alexus","CreatedById":163084,"CreatedDateTime":"2018-11-16T21:14:13Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Was that ever fixed?\n\u003E \n\nWhat did you mean? dx11 is stable. can you fix it?"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-11-16T21:15:39Z","Content":"dx11 is actually more stable than dx9, but the icons are broken unless you drop TU into your install.\n\nopengl and glcore will CTD instantly if scatterer is installed and you even query all shaders (not even using them), but if in dx11 or dx12 there is no issue. (I suspect you may have a half-corrupt shader in your bundle or something that makes opengl angry when unity tries to look at it).\n\nThe most stable of all modes is glcore, but dx11 is a bit faster (both in load time and fps)."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2018-11-16T21:22:46Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, Electrocutor said:\n\u003E \n\u003E \n\u003E dx11 is actually more stable than dx9, but the icons are broken unless you drop TU into your install.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E opengl and glcore will CTD instantly if scatterer is installed and you even query all shaders (not even using them), but if in dx11 or dx12 there is no issue. (I suspect you may have a half-corrupt shader in your bundle or something that makes opengl angry when unity tries to look at it).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The most stable of all modes is glcore, but dx11 is a bit faster (both in load time and fps).\n\u003E \n\nHmm, I ran opengl and glcore with no issues several times before uploading the last release...\n\nFor dx11, that\u0027s great news! It\u0027s my favourite video mode, so that means squad fixed the issue with frequent crashes in dx11 on scene changes?"}]}