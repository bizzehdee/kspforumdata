{"TopicId":10325,"ForumId":36,"TopicTitle":"0.15 PartTools - New model tools","CreatedByName":"Mu.","CreatedById":15543,"CreatedDateTime":"2012-05-08T13:31:42Z","PageNum":1,"Articles":[{"CreatedByName":"Mu.","CreatedById":15543,"CreatedDateTime":"2012-05-08T13:31:42Z","Content":"So time to talk about models and the much hyped hierarchical model format, rather suspiciously named \u0027.mu\u0027\n\nThe old DAE importer was a bit wrong. It was messy to use and did weird things like flatten the heirarchy out. Also it only imported static meshes. When you\\\u0027re dealing with a system like Unity we dont want you, or ourselves, limited. My aim was to create a WYSIWYG part exporter for our artists so that we could be certain what went in came out the same. With Unity as a backbone i\\\u0027ve created us simple exporter tool. It comes as a unitypackage and you can import it into any existing project. Should work on non-pro versions too.\n\n**Overview**\n\nTo use it you would create a PartTools gameobject in a scene, add/setup your model as a child of the PartTools object, then click Write. It automatically writes the hierarchy and any textures into the given directory ready to be playtested.\n\nYou can write each PartTools object individually or use the bulk exporter. This works on the entire project currently. Every PartTools prefab in the project will get written to its respective directory. Will possibly expand these features a little in the future.\n\nCurrently the only supported filename for .mu files is \u0027model.mu\u0027. Just place it in the directory with the part.cfg and it will be looked for as priority over any other models.\n\n**How-to**\n\n1. Create a new GameObject in a scene and add the KSP/PartTools component to it. This GameObject becomes the \\\u0027model\\\u0027 parent when it is loaded into the game, its name is irrelevant.\n\n2. Drag and drop your model into the scene and parent it to the PartTools GameObject.\n\n3. Assign KSP materials to your model. This version of PartTools only supports the included shaders.\n\n4. Set up PartTools making sure that the directory is set correctly.\n\n5. If your materials use formats other than JPEG or PNG then you must convert the textures.\n\n6. Press Write!\n\n**Meshes**\n\nStandard meshes and skinned meshes are supported along with tangents and vertex colours. You may also use meshcollider components tho must usually ensure isConvex is ticked. Submeshes are supported.\n\n**Materials and shaders**\n\nYou may only use shaders from the list provided with PartTools. Shared material references are preserved. Multiple materials on a renderer are also supported.\n\n**Textures**\n\nCurrently there are three types of texture format supported by KSP; JPEG, PNG and MBM. You may not use cube maps. I do want to ditch MBM in favour of something user-editable but we\\\u0027re stuck with it for a few weeks. At least you wont have to convert everything manually.\n\nIf you tick \u0027Convert Textures\u0027 then all textures are converted to MBM format. It is often a safer route to leave convert ticked.\n\n**Animations**\n\nAnimation components can be written along with the hierarchy so you can force an animation to play forever or use them from script (part.FindModelAnimator is useful). Transform/bone animations are supported along with Light and Material animations.\n\n**Supported components**\n\nMeshFilter, MeshRenderer, SkinnedMeshRenderer\n\nMeshCollider, SphereCollider, CapsuleCollider, BoxCollider\n\nAnimation (Lights, Materials \u0026 Transforms)\n\nLight\n\n**Supported shaders**\n\nKSP/Diffuse\n\nKSP/Specular\n\nKSP/Bumped\n\nKSP/Bumped Specular\n\nKSP/Emissive/Diffuse\n\nKSP/Emissive/Specular\n\nKSP/Emissive/Bumped Specular\n\nKSP/Alpha/Cutoff\n\nKSP/Alpha/Cutoff Bumped"},{"CreatedByName":"Nomad","CreatedById":4989,"CreatedDateTime":"2012-05-09T02:27:26Z","Content":"So, we still have the ability to use .dae and .obj files or will we have to move over to the new .mu system, and that .mu files just get loaded first?"},{"CreatedByName":"r4m0n","CreatedById":5404,"CreatedDateTime":"2012-05-09T04:25:27Z","Content":"\u003E \n\u003E So, we still have the ability to use .dae and .obj files or will we have to move over to the new .mu system, and that .mu files just get loaded first?\n\nEverything is still backward-compatible, the new system just gives you better options."},{"CreatedByName":"Nomad","CreatedById":4989,"CreatedDateTime":"2012-05-09T04:37:12Z","Content":"Ah okay, thanks for clarifying that."},{"CreatedByName":"HarvesteR","CreatedById":4,"CreatedDateTime":"2012-05-09T14:32:00Z","Content":"I\\\u0027m unstickying this post and some others, because we have way too many sticky posts now, there\\\u0027s almost no room for the regular posts. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nCheers"},{"CreatedByName":"NovaSilisko","CreatedById":3897,"CreatedDateTime":"2012-05-10T07:31:42Z","Content":"![Mgaur.jpg](http://i.imgur.com/Mgaur.jpg)\n\nI\\\u0027m having fun with this!"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-18T17:16:31Z","Content":"Is there a way to *read model.mu* files to see how are they made?"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-18T17:59:25Z","Content":"Sorry, I did not understand anything.\n\nWhat do I have to do with this KSP PartTools 015.unitypackage file I just downloaded? Where do I have to install it? What is this Unity thing? Will I still be able to use 3DS Max for my 3d models?\n\nThanks\n\nMaraz"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-05-18T18:08:34Z","Content":"\u003E \n\u003E Sorry, I did not understand anything.\n\u003E What do I have to do with this KSP PartTools 015.unitypackage file I just downloaded? Where do I have to install it? What is this Unity thing? Will I still be able to use 3DS Max for my 3d models?\n\u003E \n\u003E Thanks\n\u003E \n\u003E Maraz\n\nWe may still work as we did before: model in 3DS Max and export as .DAE. New features (like bump-mapping) won\\\u0027t be supported.\nAlternatively, we may install Unity (it\\\u0027s free), learn how to use it =P, and use a package supplied to convert those .DAE models into new format, with all new fancy features.\n\nBut I\\\u0027ve still no luck with it ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2012-05-18T18:10:25Z","Content":"The Unity download is over 500megs and may not work for me in Wine, is there any other way?"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-18T18:58:57Z","Content":"THanks for explanation, still I do not understand whether Unity is a 3D modelling tool. I\\\u0027ve been working with 3DS Max for years now, and still I do know 50% of it, and it\\\u0027s out of question that I start learning another tool. I hope that models made in other tools can work with Unity... ![:o](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png)\n\nMaraz"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-18T21:51:27Z","Content":"I could import a MAX model, it seems to me that I made all the steps, I obtained the .mu and .mbm files, but they are not displayed in game. The object is present in the VAB but nothing is displayed. Please help! A sample scene, with a simple object, could be really useful.\n\nThanks\n\nMaraz"},{"CreatedByName":"Cykyrios","CreatedById":17639,"CreatedDateTime":"2012-05-19T10:39:43Z","Content":"Are you sure that nothing is displayed?\n\nI apparently had the same issue, but this was due to the gameobject and the model not being in the same place.\n\nThe GameObject is defaulted to 0,0,0, so you should put your model at the same place, and then parent it.\n\nHope that helps."},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-19T12:14:49Z","Content":"\u003E \n\u003E I\\\u0027m having fun with this!\n\nI am completely stuck, please can you help by giving some hints about how to set up the scene?\n\nThanks\n\nMaraz"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-19T12:42:37Z","Content":"\u003E \n\u003E Are you sure that nothing is displayed?\n\u003E \n\u003E I apparently had the same issue, but this was due to the gameobject and the model not being in the same place.\n\u003E \n\u003E The GameObject is defaulted to 0,0,0, so you should put your model at the same place, and then parent it.\n\u003E \n\u003E Hope that helps.\n\nYou are right, thanks. That was part of the problem, now I have solved it.\n\nBut now I have two other problems:\n\n- scale: the object is rendered as large as an ant ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif), at first i thought it was a particle of dirt on my monitor. But the scale in the MAX model was correct (meters). I could try and increase the scale, but how much? 100x ? 1000x?\n\n- I can see the object in the object menu on the left (because it has auto-scaling) and I can see that the node collider is rendered as is was a visible object. I have set it in Unity to Mesh Collider and unchecked the box Mesh Renderer.\n\nMaraz"},{"CreatedByName":"Cykyrios","CreatedById":17639,"CreatedDateTime":"2012-05-19T13:43:07Z","Content":"Set the scale to 1 in the part.cfg if you modeled the part at this scale in Max.\n\nAlso, when importing the asset in Unity, delete the node\\_collider from the Hierarchy on the left, and in your part\\\u0027s Mesh Collider, click on the circle on the right of the Mesh box, and choose your collider.\n\nMy problem has probably nothing to do with Unity itself, but how can I set multiple modules to one part? Is it possible from within the part.cfg?"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-19T17:17:06Z","Content":"\u003E \n\u003E Set the scale to 1 in the part.cfg if you modeled the part at this scale in Max.\n\u003E \n\u003E Also, when importing the asset in Unity, delete the node\\_collider from the Hierarchy on the left, and in your part\\\u0027s Mesh Collider, click on the circle on the right of the Mesh box, and choose your collider.\n\nThanks for these tips. The scale is 1 already, though. Maybe there was a mismatch metres/millimetres when importing from MAX tro Unity ?...\n\n\u003E \n\u003E My problem has probably nothing to do with Unity itself, but how can I set multiple modules to one part? Is it possible from within the part.cfg?\n\nThis thread can be helpful:\n\n[http://kerbalspaceprogram.com/forum/index.php?topic=11734.msg195012;boardseen#new](http://kerbalspaceprogram.com/forum/index.php?topic=11734.msg195012;boardseen#new)\n\nYou can now have multiple modules for the same part.\n\nBye\n\nMaraz"},{"CreatedByName":"CardBoardBoxProcessor","CreatedById":10179,"CreatedDateTime":"2012-05-20T04:56:23Z","Content":"can you go into alittle more detail about animations and the maps that show heating of the engines?"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-20T09:34:23Z","Content":"\u003E \n\u003E Set the scale to 1 in the part.cfg if you modeled the part at this scale in Max.\n\u003E \n\u003E Also, when importing the asset in Unity, delete the node\\_collider from the Hierarchy on the left, and in your part\\\u0027s Mesh Collider, click on the circle on the right of the Mesh box, and choose your collider.\n\nThanks a lot.\n\nI solved the collider problem as you said.\n\nThen I had to input a scale factor of 100x and a rotation of 180\u00C2\u00B0 around the Y axis to have the model displayed correctly in game.\n\nNow the model in game is displayed but the normal map is not rendered.\n\nInstead it is rendered correctly in the Unity window.\n\nProbably I made something wrong when setting the shader. I chose the \u0027Bumber Diffuse\u0027 one, that has a Normal map. This my Unity setup, could someone help ?\n\n[![unityn.th.jpg](http://img100.imageshack.us/img100/613/unityn.th.jpg)](http://img100.imageshack.us/img100/613/unityn.jpg)\n\nThanks\n\nMaraz"},{"CreatedByName":"Maraz","CreatedById":22308,"CreatedDateTime":"2012-05-20T15:03:20Z","Content":"Now I found probably the correct shader, that is named KSP/Bumped.\n\nEffect is now showed in game, but bumps appear to be inverted in up/down direction, compares to those showed in 3DS Max.\n\nCan someone help?\n\nThanks\n\nMaraz"},{"CreatedByName":"Radion","CreatedById":3273,"CreatedDateTime":"2012-05-21T03:00:41Z","Content":"I\\\u0027ve been trying to add the PartTools component to the GameObject, but I keep getting an error that says - \n\nCan\\\u0027t Add Script\n\nScript PartTools has not finished compilation yet."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2012-05-21T09:20:36Z","Content":"Hi, I\\\u0027d like to know if there is any other way to use the new system with software *other than* Unity3D, as I just managed to install it but it\\\u0027s requiring me to register for a one time only 30 day trial.\n\nI have not progressed beyond that screen as I am reluctant to start using a product that may expire in 30 days and then cost me $1500 to \u0027upgrade\u0027, this point may be moot anyway as Unity3D may not work correctly or at all in Wine.\n\nThe demo version may well keep working after the 30 days with a nag screen, but continuing to use it after that point isn\\\u0027t strictly legal because of the terms of use you agree to when installing.\n\nI understand the game will maintain backwards compatibility with the DAE files for the time being, but I have also recently found it is not possible to do something as simple as a texture change without using Unity3D.\n\nWhat I (and I expect others as well) would like is a plugin for blender that can handle exporting to the new file format if this is possible.\n\nI, like many people who play KSP, do not have $1500 to spend on a developer tool I may only use for a few addons."},{"CreatedByName":"r4m0n","CreatedById":5404,"CreatedDateTime":"2012-05-21T09:56:03Z","Content":"\u003E \n\u003E Hi, I\\\u0027d like to know if there is any other way to use the new system with software *other than* Unity3D, as I just managed to install it but it\\\u0027s requiring me to register for a one time only 30 day trial.\n\u003E \n\u003E I have not progressed beyond that screen as I am reluctant to start using a product that may expire in 30 days and then cost me $1500 to \u0027upgrade\u0027, this point may be moot anyway as Unity3D may not work correctly or at all in Wine.\n\u003E \n\u003E The demo version may well keep working after the 30 days with a nag screen, but continuing to use it after that point isn\\\u0027t strictly legal because of the terms of use you agree to when installing.\n\u003E \n\u003E I understand the game will maintain backwards compatibility with the DAE files for the time being, but I have also recently found it is not possible to do something as simple as a texture change without using Unity3D.\n\u003E \n\u003E What I (and I expect others as well) would like is a plugin for blender that can handle exporting to the new file format if this is possible.\n\u003E \n\u003E I, like many people who play KSP, do not have $1500 to spend on a developer tool I may only use for a few addons.\n\nUnity has a free version, even if it doesn\\\u0027t work on Wine, you won\\\u0027t have any problems."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2012-05-21T11:22:21Z","Content":"I just installed [this version](http://unity3d.com/unity/download/) which is listed on the site as the free download, and it is this version that has the *one time only, 30 day trial*.\n\nHere is the screen the \u0027free\u0027 version of Unity displays.\n\n\u003E ![zZwcv.jpg](http://i.imgur.com/zZwcv.jpg)\n\nAnd here is the EULA in the installer.\n\n\u003E ![itm81.jpg](http://i.imgur.com/itm81.jpg)\n\nFrom the Unity3D free version [End User Licence Agreement on the website.](http://unity3d.com/unity/unity-end-user-license-3.x)\n\n\u003E \n\u003E 6. Term.\n\u003E \n\u003E If you have licensed a trial version of the Software, the license granted under this Agreement will remain in effect for a period of 30 days, unless earlier terminated in accordance with this Agreement. For all other versions of the Software, the license granted under this Agreement will remain in effect unless earlier terminated in accordance with this Agreement. You may terminate the license at any time by destroying all copies of the Software in your possession or control. The license granted under this Agreement will automatically terminate, with or without notice from Unity, if you breach any term of this Agreement. Upon termination, you must at Unity\u00E2\u20AC\u2122s option either promptly delete and destroy or return to Unity all copies of the Software in your possession or control. \n\u003E \n\u003E \n\nThe \u0027Free\u0027 version of Unity3D is *trialware* with a 30 day limit, when you first run the software you have to register for a one time only licence, after 30 days you have to uninstall and stop using the software or pay $1500 for the desktop edition of Unity3D.\n\nContinuing to use Unity3D *after* 30 days without paying for it is in breach of the EULA you agree to when registering the software, potentially putting users at risk of legal action against them.\n\nContinuing to use a product after your right to use it has expired without paying for it is theft, it\\\u0027s like keeping a hire car after the lease expires.\n\nIf I\\\u0027m wrong about this I\\\u0027d really like to know, as I want to make mods using the new system and a lot of people who are making mods want to continue to do so, maybe Squad should have their legal team look at this as most players aren\\\u0027t going to pay much attention to it, as they will ignore EULA\\\u0027s and think it doesn\\\u0027t apply to them."},{"CreatedByName":"r4m0n","CreatedById":5404,"CreatedDateTime":"2012-05-21T15:52:25Z","Content":"\u003E \n\u003E I just installed [this version](http://unity3d.com/unity/download/) which is listed on the site as the free download, and it is this version that has the *one time only, 30 day trial*.\n\u003E \n\u003E Here is the screen the \u0027free\u0027 version of Unity displays.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003E ![zZwcv.jpg](http://i.imgur.com/zZwcv.jpg)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E And here is the EULA in the installer.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003E ![itm81.jpg](http://i.imgur.com/itm81.jpg)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E From the Unity3D free version [End User Licence Agreement on the website.](http://unity3d.com/unity/unity-end-user-license-3.x)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003E \n\u003E \u003E 6. Term.\n\u003E \u003E \n\u003E \u003E If you have licensed a trial version of the Software, the license granted under this Agreement will remain in effect for a period of 30 days, unless earlier terminated in accordance with this Agreement. For all other versions of the Software, the license granted under this Agreement will remain in effect unless earlier terminated in accordance with this Agreement. You may terminate the license at any time by destroying all copies of the Software in your possession or control. The license granted under this Agreement will automatically terminate, with or without notice from Unity, if you breach any term of this Agreement. Upon termination, you must at Unity\u00E2\u20AC\u2122s option either promptly delete and destroy or return to Unity all copies of the Software in your possession or control. \n\u003E \u003E \n\u003E \u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The \u0027Free\u0027 version of Unity3D is *trialware* with a 30 day limit, when you first run the software you have to register for a one time only licence, after 30 days you have to uninstall and stop using the software or pay $1500 for the desktop edition of Unity3D.\n\u003E \n\u003E Continuing to use Unity3D *after* 30 days without paying for it is in breach of the EULA you agree to when registering the software, potentially putting users at risk of legal action against them.\n\u003E \n\u003E Continuing to use a product after your right to use it has expired without paying for it is theft, it\\\u0027s like keeping a hire car after the lease expires.\n\u003E \n\u003E If I\\\u0027m wrong about this I\\\u0027d really like to know, as I want to make mods using the new system and a lot of people who are making mods want to continue to do so, maybe Squad should have their legal team look at this as most players aren\\\u0027t going to pay much attention to it, as they will ignore EULA\\\u0027s and think it doesn\\\u0027t apply to them.\n\nJust go to the [Unity store](https://store.unity3d.com/products), select the non-Pro version of Unity, register it and you will have a lifetime license of the standard version, no cost.\n\nIt is a bit weird you have to \u0027buy\u0027 the free version, but that is the way it works. You will receive a license number to use with it after that."}]}