{"TopicId":162200,"ForumId":36,"TopicTitle":"[WIP][1.8.1, 1.9.1, 1.10.1, 1.11.0\u20132, 1.12.2\u20135] Principia\u2014version \u200E\u200EKleene, released 2024-07-05\u2014n-Body and Extended Body Gravitation","CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-02-05T00:19:35Z","PageNum":14,"Articles":[{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-10-03T01:02:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022fibonatic\u0022 data-cite=\u0022fibonatic\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ETo be sure I also checked whether my approach gives the same results for position and velocity components as in document you linked to, by expanding all the vector products. My final results match\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESounds good then, if you make sure you use the correct anomaly.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EFor my definition of \u00C3\u017D\u00C2\u00BC I assume that the semi-major axis is given relative to the barycenter of that body and its parent body. Because for orbital elements the fictitious parent body lies at the barycenter, thus I changed \u00C3\u017D\u00C2\u00BC to such a value that the gravitational force of this fictitious body would be equal to that of the actual parent body. The resulting \u00C3\u017D\u00C2\u00BC then becomes \u00C3\u017D\u00C2\u00BC = G * M^3 / (M \u002B m)^2. I do remember seeing \u00C3\u017D\u00C2\u00BC = G(M \u002Bm), however I good not think of a logical argument why I should use it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMostly \u0022because the other one is wrong\u0022, see e.g. \u003Ca href=\u0022https://en.wikipedia.org/wiki/Orbital_speed#Mean_orbital_speed\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E for circular orbits of two bodies around their barycentre.\u003C/p\u003E\u003Cp\u003EYou say \u0022The resulting \u00C3\u017D\u00C2\u00BC then becomes\u0022, so you must have an actual definiton for your \u00C3\u017D\u00C2\u00BC, but you do not give it, so I have no idea where that expression comes from.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EEDIT:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EIf you want to see how that \u00C3\u017D\u00C2\u00BC ends up there, \u003Ca href=\u0022http://www.math.ethz.ch/~gruppe5/group5/lectures/mmp/hs12/Files/The%20Discrete%20Fourier%20Transform%20(lecture%20notes%20December%2021).pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E, p. 41-49 is a thorough derivation of the whole 2-body problem, ending with an explicit time-dependent expression (which is mostly useless, since it involves series of Bessel functions, but it\u0027s nice to see that the time-dependent solution is ugly; it tells you that you should not expect something which is a direct simple computation to be correct).\u003C/p\u003E\u003Cp\u003ENote that \u00C3\u017D\u00C2\u00BC means \u0022the numerator of the 2-body Newtonian potential\u0022 here, namely G(m\u002BM), and this is the same \u00C3\u017D\u00C2\u00BC that appears, e.g., as an inverse square root in the period (denoted \u00C3\u00E2\u20AC\u017E, on page 48).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-03T01:42:17Z\u0022 title=\u002210/03/2014 01:42  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 3, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DerpyHoovesX","CreatedById":120020,"CreatedDateTime":"2014-10-03T12:37:02Z","Content":"\n\u003Cp\u003EDo you have alpha release(pack) of this mod, to be able to play?\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2014-10-03T12:46:27Z","Content":"\n\u003Cp\u003EIt\u0027s not fully functional yet. You\u0027ll need to wait a while longer.\u003C/p\u003E\n"},{"CreatedByName":"fibonatic","CreatedById":73180,"CreatedDateTime":"2014-10-03T13:49:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EMostly \u0022because the other one is wrong\u0022, see e.g. \u003Ca href=\u0022https://en.wikipedia.org/wiki/Orbital_speed#Mean_orbital_speed\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E for circular orbits of two bodies around their barycentre.\u003C/p\u003E\u003Cp\u003EYou say \u0022The resulting \u00C3\u017D\u00C2\u00BC then becomes\u0022, so you must have an actual definiton for your \u00C3\u017D\u00C2\u00BC, but you do not give it, so I have no idea where that expression comes from.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EEDIT:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EIf you want to see how that \u00C3\u017D\u00C2\u00BC ends up there, \u003Ca href=\u0022http://www.math.ethz.ch/~gruppe5/group5/lectures/mmp/hs12/Files/The%20Discrete%20Fourier%20Transform%20(lecture%20notes%20December%2021).pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E, p. 41-49 is a thorough derivation of the whole 2-body problem, ending with an explicit time-dependent expression (which is mostly useless, since it involves series of Bessel functions, but it\u0027s nice to see that the time-dependent solution is ugly; it tells you that you should not expect something which is a direct simple computation to be correct).\u003C/p\u003E\u003Cp\u003ENote that \u00C3\u017D\u00C2\u00BC means \u0022the numerator of the 2-body Newtonian potential\u0022 here, namely G(m\u002BM), and this is the same \u00C3\u017D\u00C2\u00BC that appears, e.g., as an inverse square root in the period (denoted \u00C3\u00E2\u20AC\u017E, on page 48).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI am still not convinced, since none of your sources explain why G(m\u002BM) is used.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EThis is how I derived my expression for \u00C3\u017D\u00C2\u00BC:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ESuppose you would like to construct elliptical orbits, with eccentricity e, of two body with mass m1 and m2, with a given semi-major axis a1 relative to the barycenter (a2 can be derived from m1 and m2), which initial conditions would you have to give them, assuming that the barycenter would be the origin of the coordinates system?\u003C/p\u003E\u003Cp\u003EFor simplicity I will limit this problem to 2D (so inclination can be ignored), use an initial true anomaly of zero, and choose the longitude of the ascending node and argument of periapsis in such a way that unit vector of the initial position will be equal to the x-axis.\u003C/p\u003E\u003Cp\u003EThe initial positions will be simple, namely:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ex1 = a1 * (1 - e)\u003Cbr\u003Ey1 = 0\u003Cbr\u003Ea2 = a1 * m1 / m2\u003Cbr\u003Ex2 = -a2 * (1 - e)\u003Cbr\u003Ey2 = 0\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe initial velocities are harder, for this I will initially use \u00C3\u017D\u00C2\u00BC1 and \u00C3\u017D\u00C2\u00BC2 as temporary variables, which will have to be solved later.\u003C/p\u003E\u003Cp\u003EBy using the following equation it can be shown that:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Do12fyO.png\u0022 alt=\u0022Do12fyO.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Evx1 = 0\u003Cbr\u003Evy1 = sqrt(\u00C3\u017D\u00C2\u00BC1 * (1 \u002B e) / (a1 * (1 - e)))\u003Cbr\u003Evx2 = 0\u003Cbr\u003Evy2 = -sqrt(\u00C3\u017D\u00C2\u00BC2 * (1 \u002B e) / (a2 * (1 - e)))\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe total momentum should be zero (barycenter is stationary), so\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Em1 * sqrt(\u00C3\u017D\u00C2\u00BC1 * (1 \u002B e) / (a1 * (1 - e))) = m2 * sqrt(\u00C3\u017D\u00C2\u00BC2 * (1 \u002B e) / (a2 * (1 - e)))\u003Cbr\u003Em1^2 * \u00C3\u017D\u00C2\u00BC1 / a1 = m2^2 * \u00C3\u017D\u00C2\u00BC2 / a2\u003Cbr\u003Em1^3 * \u00C3\u017D\u00C2\u00BC1 = m2^3 * \u00C3\u017D\u00C2\u00BC2\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFrom these equations it can already become clear that \u00C3\u017D\u00C2\u00BC1 = \u00C3\u017D\u00C2\u00BC2 = G * (m1 \u002B m2) is incorrect. To derive the equation, which I mentioned in an previous post, I will use acceleration and the fact that r1 / r2 will be constant.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Er1 / r2 = m2 / m1\u003Cbr\u003EF = G * m1 * m2 / (r1 \u002B r2)^2\u003Cbr\u003Eacc1 = G * m2 / (r1 \u002B r2)^2 = G * m2 / (r1 \u002B r1 * m1 / m2)^2 = G * m2 / (r1 * (m1 \u002B m2) / m2)^2 = G * m2^3 / (r1^2 * (m1 \u002B m2)^2)\u003Cbr\u003Eacc2 = G * m1 / (r1 \u002B r2)^2 = G * m1 / (r2 * m2 / m1 \u002B r2)^2 = G * m1 / (r2 * (m1 \u002B m2) / m1)^2 = G * m1^3 / (r2^2 * (m1 \u002B m2)^2)\u003Cbr\u003E\u00C3\u017D\u00C2\u00BC1 = G * m2^3 / (m1 \u002B m2)^2\u003Cbr\u003E\u00C3\u017D\u00C2\u00BC2 = G * m1^3 / (m1 \u002B m2)^2\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhen using these equations for \u00C3\u017D\u00C2\u00BC1 and \u00C3\u017D\u00C2\u00BC2 it will be clear that the total momentum will be zero.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EEDIT:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI also \u003Ca href=\u0022http://scicomp.stackexchange.com/questions/14689/\u0022 rel=\u0022external nofollow\u0022\u003Efound out\u003C/a\u003E that my integration method, also called position Verlet, is actually not symplectic because it does not use velocities (I am still a noob when it comes to symplectic integrators).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-03T14:02:06Z\u0022 title=\u002210/03/2014 02:02  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 3, 2014\u003C/time\u003E by fibonatic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-10-03T22:19:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022fibonatic\u0022 data-cite=\u0022fibonatic\u0022\u003E\u003Cdiv\u003EI am still not convinced, since none of your sources explain why G(m\u002BM) is used\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cstrong\u003EEDIT:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThese lecture notes from ETHZ indeed pertain to the problem with a body orbiting another fixed body, so they are irrelevant. Sorry about that. The remarks below are still relevant.\u003C/p\u003E\u003Cp\u003EThe question is not whether \u00C3\u017D\u00C2\u00BC = G(m\u002BM). This \u003Ca href=\u0022https://en.wikipedia.org/wiki/Standard_gravitational_parameter#Two_bodies_orbiting_each_other\u0022 rel=\u0022external nofollow\u0022\u003Eis\u003C/a\u003E the \u003Ca href=\u0022http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-07-dynamics-fall-2009/lecture-notes/MIT16_07F09_Lec15.pdf\u0022 rel=\u0022external nofollow\u0022\u003Edefinition\u003C/a\u003E of \u003Ca href=\u0022https://engineering.purdue.edu/AAE/Academics/Courses/aae251/2005a/fall2005/LECTURES/ORBITS/Introduction%20to%20Orbits\u0022 rel=\u0022external nofollow\u0022\u003Ethe\u003C/a\u003E standard gravitational parameter in the 2-body problem.\u003C/p\u003E\u003Cp\u003EIf your formula for the velocity is correct for your definition of \u00C3\u017D\u00C2\u00BC, it is incorrect with the usual notation, and conversely.\u003C/p\u003E\u003Cp\u003EI may at some point write a pdf about solving the 2-body problem from first principles, but right now I\u0027m busy writing tests for the existing plugin.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EDerpyHoovesX\u003C/strong\u003E, if you want you can try to compile the plugin, instructions can be found \u003Ca href=\u0022https://github.com/mockingbirdnest/Principia/blob/master/documentation/Setup.md\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E. They may be incorrect, in which case I would welcome feedback on where they fail.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-04T00:17:06Z\u0022 title=\u002210/04/2014 12:17  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 4, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"fibonatic","CreatedById":73180,"CreatedDateTime":"2014-10-04T01:36:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003EEDIT:\u003C/strong\u003E\u003Cp\u003EThese lecture notes from ETHZ indeed pertain to the problem with a body orbiting another fixed body, so they are irrelevant. Sorry about that. The remarks below are still relevant.\u003C/p\u003E\u003Cp\u003EThe question is not whether \u00C3\u017D\u00C2\u00BC = G(m\u002BM). This \u003Ca href=\u0022https://en.wikipedia.org/wiki/Standard_gravitational_parameter#Two_bodies_orbiting_each_other\u0022 rel=\u0022external nofollow\u0022\u003Eis\u003C/a\u003E the \u003Ca href=\u0022http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-07-dynamics-fall-2009/lecture-notes/MIT16_07F09_Lec15.pdf\u0022 rel=\u0022external nofollow\u0022\u003Edefinition\u003C/a\u003E of \u003Ca href=\u0022https://engineering.purdue.edu/AAE/Academics/Courses/aae251/2005a/fall2005/LECTURES/ORBITS/Introduction%20to%20Orbits\u0022 rel=\u0022external nofollow\u0022\u003Ethe\u003C/a\u003E standard gravitational parameter in the 2-body problem.\u003C/p\u003E\u003Cp\u003EIf your formula for the velocity is correct for your definition of \u00C3\u017D\u00C2\u00BC, it is incorrect with the usual notation, and conversely.\u003C/p\u003E\u003Cp\u003EI may at some point write a pdf about solving the 2-body problem from first principles, but right now I\u0027m busy writing tests for the existing plugin.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for replying to my posts. Every thing I know about Kepler orbits is mainly self-taught so I am not very familiar with the usual notation. I mainly base my calculations and equations of Newton\u0027s law of universal gravitation, Newton\u0027s second law and Kepler\u0027s laws.\u003C/p\u003E\u003Cp\u003EBy the way my posts where about finding a stable configuration of the three heaviest moons of Jool. A related \u003Ca href=\u0022http://physics.stackexchange.com/questions/91210/why-is-the-orbital-resonance-of-the-galilean-moons-stable\u0022 rel=\u0022external nofollow\u0022\u003Equestion on stackexchange\u003C/a\u003E asks why three Galilean moons around Jupiter, with 4:2:1 resonance, are stable. It does not have any answers, but it does has a comment with a few upvotes which is linking to a document about this. I have only skimmed through this documents and did not see anything about weight ratios. Maybe this is because it is only about Galilean moons, so not the general 4:2:1 resonance situation.\u003C/p\u003E\n"},{"CreatedByName":"S1gmoid","CreatedById":124382,"CreatedDateTime":"2014-10-06T15:53:34Z","Content":"\n\u003Cp\u003EHey,\u003C/p\u003E\u003Cp\u003EThanks for the hard work, and the scientific explanations. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E I\u0027m really looking forward to this mod.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-10-29T00:30:04Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EStatus update:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ECode has been written to plot the trajectories in nonrotating body-centred reference frames (and barycentric corotating, not reviewed yet). While abstractions will have to be written to do that more cleanly and efficiently, this yields some pretty pictures.\u003C/p\u003E\u003Cp\u003E\u003Cem\u003ECaveat lector\u003C/em\u003E: While some of the following orbits may look very wild, bear in mind they are in non-inertial reference frames. Two of these wilder trajectories are followed by the same trajectory in a more pedestrian reference frame. In the Kerbin-centric non-rotating reference frame, they would all look like two or three elliptic orbits connected by strange segments\u003C/p\u003E\u003Cp\u003Ewhere the perturbation by the Mun is to blame.\u003C/p\u003E\u003Cp\u003EThe last picture below (in the barycentric corotating frame of the Kerbin-Mun system, that is, the unique frame in which the Kerbin-Mun barycentre as well as the line through Kerbin and the Mun are invariant) shows a trajectory that differs strongly from what stock KSP would have yielded: in stock this would have been a circular orbit around the Mun near the edge of its SoI. Instead it is a transfer to an eccentric Kerbin orbit, which is picked up by the Mun again after a while and ends with a crash on the Mun.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/f6Iv3\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EWith the addition of plotting, the C\u002B\u002B plugin has caught up with the features of the initial C# prototype. After the abstractions for plotting are written (we will add the remaining interesting reference frames in the process), the next step will be to take care of altering the trajectory when, e.g., engines are used.\u003C/p\u003E\u003Cp\u003EIt is apparent that the C\u002B\u002B plugin is significantly faster, much more reliable, and easier to debug than the C# prototype (it is also correct; some hasty shortcuts were made in the prototype that resulted in unreliable initial states and other problems).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-29T00:40:47Z\u0022 title=\u002210/29/2014 12:40  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 29, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"TMS","CreatedById":57134,"CreatedDateTime":"2014-10-29T07:28:37Z","Content":"\n\u003Cp\u003EHeh... our very own interactive Spirograph.\u003C/p\u003E\u003Cp\u003ELooking good, eggrobin.\u003C/p\u003E\n"},{"CreatedByName":"AndreyATGB","CreatedById":62674,"CreatedDateTime":"2014-10-29T08:59:00Z","Content":"\n\u003Cp\u003EIt\u0027s been a few months since I\u0027ve tried it, at least a couple hundred commits (nice progress BTW) and even then it was displaying trajectories a lot better in the future but still not enough to be usable. Are you closer now to being able to show these relatively accurately for 1-2 years in the future, maybe more if used with RSS? Maybe you can use Kepler simulations for interplanetary sections since they shoulnt differ much from Newtonian ones.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-10-29T21:39:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AndreyATGB\u0022 data-cite=\u0022AndreyATGB\u0022\u003E\u003Cdiv\u003EIt\u0027s been a few months since I\u0027ve tried it, at least a couple hundred commits (nice progress BTW) and even then it was displaying trajectories a lot better in the future but still not enough to be usable. Are you closer now to being able to show these relatively accurately for 1-2 years in the future, maybe more if used with RSS? Maybe you can use Kepler simulations for interplanetary sections since they shoulnt differ much from Newtonian ones.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo, there are really two questions here.\u003C/p\u003E\u003Cp\u003EWhen the vessel is not being perturbed by player-dependent actions (aka firing the engines), displaying predictions and prolonging them is not more costly than moving the vessels around.\u003C/p\u003E\u003Cp\u003EWhen the vessel is being moved around by the player, well, at the moment that\u0027s not implemented yet. It seems however that it will be possible to recalculate predictions fast enough. Many possible optimisations have already been discussed in the thread, including FMM, caching the orbits of the celestials (caching would almost certainly massively help and isn\u0027t all that ridiculous in terms of memory usage), varying the timestep (we don\u0027t care as much about breaking symplecticity for predictions, and we only have one vessel we care about), etc.\u003C/p\u003E\n"},{"CreatedByName":"dreadicon","CreatedById":117295,"CreatedDateTime":"2014-10-30T06:50:54Z","Content":"\n\u003Cp\u003EReally glad to see work continuing on this. I still can\u0027t wait to try it out!\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-10-30T13:51:13Z","Content":"\n\u003Cp\u003EGlad to see this has not been forgotten. Hope there will be some useable fruit soon.\u003C/p\u003E\n"},{"CreatedByName":"Baughn","CreatedById":107565,"CreatedDateTime":"2014-11-02T19:58:35Z","Content":"\n\u003Cp\u003EHow about threading? Would that be a possible optimisation, or are your calculations natively single-threaded?\u003C/p\u003E\n"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2014-11-02T20:19:31Z","Content":"\n\u003Cp\u003EYour introductory documents are excellent, but could you maybe recompile them so they don\u0027t get the curl connecting the \u0022ct\u0022 and \u0022st\u0022 ligatures? They\u0027re visually distracting, and they also disrupt text-searching within the document.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-11-03T01:40:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Baughn\u0022 data-cite=\u0022Baughn\u0022\u003E\u003Cdiv\u003EHow about threading? Would that be a possible optimisation, or are your calculations natively single-threaded?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EParallelism may be possible, as discussed previously (see e.g. \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/68502-WIP-Principia-N-Body-Gravitation-and-Better-Integrators-for-Kerbal-Space-Program?p=1033726\u0026amp;viewfull=1#post1033726\u0022 rel=\u0022external nofollow\u0022\u003Esuggestions\u003C/a\u003E by \u003Cstrong\u003ESSR Kermit\u003C/strong\u003E).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kerbas_ad_astra\u0022 data-cite=\u0022Kerbas_ad_astra\u0022\u003E\u003Cdiv\u003EYour introductory documents are excellent, but could you maybe recompile them so they don\u0027t get the curl connecting the \u0022ct\u0022 and \u0022st\u0022 ligatures? They\u0027re visually distracting, and they also disrupt text-searching within the document.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut they\u0027re pretty! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EIf they\u0027re really distracting I may reconsider the ct and st \u0022historical\u0022 ligatures, but search will never really work (while the fi ligature is searchable, Th isn\u0027t for instance).\u003C/p\u003E\n"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2014-11-03T07:54:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022eggrobin\u0022 data-cite=\u0022eggrobin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EBut they\u0027re pretty! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EIf they\u0027re really distracting I may reconsider the ct and st \u0022historical\u0022 ligatures, but search will never really work (while the fi ligature is searchable, Th isn\u0027t for instance).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, beauty is in the eye of the beholder. I wouldn\u0027t mind so much if there weren\u0027t so many words with \u0022ct\u0022 and \u0022st\u0022 in them -- and since we\u0027re talking about symple\u003Cstrong\u003Ect\u003C/strong\u003Eically integrating sy\u003Cstrong\u003Est\u003C/strong\u003Eem \u003Cstrong\u003Est\u003C/strong\u003Eate ve\u003Cstrong\u003Ect\u003C/strong\u003Eor fun\u003Cstrong\u003Ect\u003C/strong\u003Eions, they stand out. Anyway, it seems that the \u0022st\u0022 ligature \u003Cem\u003Eis\u003C/em\u003E searchable (I\u0027d tried searching for a word with \u0022ct\u0022 and couldn\u0027t find any, so I\u0027d assumed that \u0022st\u0022 was the same way), and it seems to be the more common kind, so I guess I can make do if you insist on keeping the darned things.\u003C/p\u003E\n"},{"CreatedByName":"AndreyATGB","CreatedById":62674,"CreatedDateTime":"2014-11-05T20:28:39Z","Content":"\n\u003Cp\u003EIs there some key combination I\u0027m missing? It used to display 2 windows one for selecting frame of reference and I can\u0027t really remember what the other did TBH. Now there\u0027s one which can start/stop plugin and 2 boxes next to all bodies. None of them seem to draw paths on the map anymore though, it does draw my past so to speak. \u003C/p\u003E\u003Cp\u003EDamn building release is so much faster than debug, really impressive how little (almost none) performance impact this has.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-05T21:11:22Z\u0022 title=\u002211/05/2014 09:11  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 5, 2014\u003C/time\u003E by AndreyATGB\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-11-07T16:31:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AndreyATGB\u0022 data-cite=\u0022AndreyATGB\u0022\u003E\u003Cdiv\u003EIs there some key combination I\u0027m missing? It used to display 2 windows one for selecting frame of reference and I can\u0027t really remember what the other did TBH. Now there\u0027s one which can start/stop plugin and 2 boxes next to all bodies. None of them seem to draw paths on the map anymore though, it does draw my past so to speak. \u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, you built it? This means the setup instructions work then. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe 2-window version you\u0027re referring to is the C# prototype, which was last worked on about 6 months ago. In the meantime a lot of work was done to reimplement this in C\u002B\u002B with lots of abstractions (partly deal with the KSP API madness, partly because my C# code had got really messy on its own), and the plugin was reborn (with the actual work done in C\u002B\u002B called through P/Invoke) in the last update.\u003C/p\u003E\u003Cp\u003EThe C# prototype had 2 windows, they have now been fused into one. Some functionalities from the C# plugin has not been implemented yet, predictions are one of those (but predictions are only really interesting when intrinsic acceleration, a.k.a. rockets, works). Histories are drawn.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EDamn building release is so much faster than debug, really impressive how little (almost none) performance impact this has.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIndeed, the C\u002B\u002B plugin is much faster than the C# prototype was (you need to build it on release, otherwise no optimization is done, and the abstractions get costly without inlining).\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EStatus update:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ESome work has been done on better abstractions for rendered trajectories, nothing significant yet (in particular there still is something in \u00C3\u0192\u00E2\u20AC\u00A2(\u003Cem\u003En\u003C/em\u003E) which could be in \u00C3\u0192\u00E2\u20AC\u00A2(1), runs at each frame, where the constant factor involves evaluating trig functions, and \u003Cem\u003En\u003C/em\u003E~10_000 is the number of rendered points, so that rendering trajectories in the barycentric rotating frame is slow), but some pretty pictures.\u003C/p\u003E\u003Cp\u003EThis shows a vessel near the L\u003Csub\u003E5\u003C/sub\u003E point of the Kerbin-Mun system.\u003C/p\u003E\u003Cp\u003EIn the first image, the trajectory of the vessel is displayed in the nonrotating reference frame centred on the Mun, in the second it is displayed in the nonrotating reference frame centred on Kerbin, and in all subsequent images it is displayed in the barycentric corotating reference frame of the Kerbin-Mun system.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/RzNmL\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EWork on intrinsic acceleration is ongoing.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-07T17:18:25Z\u0022 title=\u002211/07/2014 05:18  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 7, 2014\u003C/time\u003E by eggrobin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"fibonatic","CreatedById":73180,"CreatedDateTime":"2014-11-07T17:19:17Z","Content":"\n\u003Cp\u003EI am not sure what is meant by fixing the barycenters:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EThe barycenters will be fixed in order to stabilise the Jool system. Scott Manley (illectro)\u0027s predictions indicate this will make it stable over at least 1_000 years (Pol was not part of those predictions, its stability remains to be determined).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf it is referring to viewing the orbital elements as seen from the barycenter, then according to my simulations this does not fix it. Or is it referring to fixing Jool onto the barycenter and thus Jool would not experience any forces from its moons? If physical parameters would have to be changed I would prefer not to change the difficulty relative to the stock game. Changing the mass of one or more moons would affect this, so I would prefer not to do that, however it is already impossible to land on Jool itself, so increasing its mass might be a possibility. Another possibility might be increasing the inclination of one or more of its moons, however this will affect the difficulty to transfer between them.\u003C/p\u003E\u003Cp\u003EThe main problem is that Vall has a resonant orbit with Laythe and Tylo and gets kicked out by them (mainly because its mass is an order of magnitude lower). These moons are analog for Io, Europa and Ganymede. However according to \u003Ca href=\u0022https://docs.google.com/spreadsheet/ccc?key=0AuySrGPsDeq2dFdaS19xc2lobGc2aWNXUkJsZlVtWFE#gid=0\u0022 rel=\u0022external nofollow\u0022\u003Ethis sheet\u003C/a\u003E of orbital elements the phase difference does not match the phase difference for \u003Ca href=\u0022https://en.wikipedia.org/wiki/Orbital_resonance#The_Laplace_resonance\u0022 rel=\u0022external nofollow\u0022\u003E1:2:4 resonance\u003C/a\u003E. To fix this I set the mean anomaly (at epoch) from 0.9 to 3.14-pi=0.0016. This in combination with orbital elements interpreted from the barycenter, as stated above, it not yet enough to make them stable.\u003C/p\u003E\u003Cp\u003EMy next attempt involved increasing the mass of Jool, also because this is an analog for Jupiter, which has relative to the sun and Earth a bigger mass than Jool has to Kerbol and Kerbin, this is namely of by a factor 4. However increasing the mass of Jool by a factor 3 already seems to make Vall stable for 63.4 years (2e9 seconds).\u003C/p\u003E\u003Cp\u003EAnother option would be increase the inclination of Vall. Due to the resonance Vall should always have close encounters with Laythe and Tylo in one spot in its orbit and with the corrected starting mean anomaly the close encounters with Laythe should be 180\u00C3\u201A\u00C2\u00B0 away from those with Tylo. So by placing the ascending node of Vall between those two points of close encounters should allow me to increase the distance of both close encounters when increasing the inclination. However after increasing the inclination up to 90\u00C3\u201A\u00C2\u00B0 still do did not give an stable configuration.\u003C/p\u003E\u003Cp\u003ESo concluding I would suggest that increasing the mass of Jool would be the way to go. If you want to keep the orbital periods the same as stock you could also increase the semi-major axes of all moons of Jool, this should not affect stability.\u003C/p\u003E\n"},{"CreatedByName":"eggrobin","CreatedById":4680,"CreatedDateTime":"2014-11-07T18:12:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022fibonatic\u0022 data-cite=\u0022fibonatic\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIf it is referring to viewing the orbital elements as seen from the barycenter,\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt is.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Ethen according to my simulations this does not fix it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAccording to Scott\u0027s it does (at least without Pol). We\u0027ll see which simulation was right when I get to that, at the moment sorting out the abstractions for the plugin and implementing intrinsic acceleration are much greater priorites.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThe main problem is that Vall has a resonant orbit with Laythe and Tylo and gets kicked out by them (mainly because its mass is an order of magnitude lower). These moons are analog for Io, Europa and Ganymede. However according to \u003Ca href=\u0022https://docs.google.com/spreadsheet/ccc?key=0AuySrGPsDeq2dFdaS19xc2lobGc2aWNXUkJsZlVtWFE#gid=0\u0022 rel=\u0022external nofollow\u0022\u003Ethis sheet\u003C/a\u003E of orbital elements the phase difference does not match the phase difference for \u003Ca href=\u0022https://en.wikipedia.org/wiki/Orbital_resonance#The_Laplace_resonance\u0022 rel=\u0022external nofollow\u0022\u003E1:2:4 resonance\u003C/a\u003E.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EStarting from real-world positions and velocities, the Jupiter system is (strongly) unstable if you assume Jupiter is spherical. You need to take the J\u003Csub\u003E2\u003C/sub\u003E coefficient into account.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003ESo concluding I would suggest that increasing the mass of Jool would be the way to go. If you want to keep the orbital periods the same as stock you could also increase the semi-major axes of all moons of Jool, this should not affect stability.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf the system turns out not to be stable, this is definitely a possibility.\u003C/p\u003E\n"},{"CreatedByName":"bs1110101","CreatedById":58438,"CreatedDateTime":"2014-11-07T18:41:12Z","Content":"\n\u003Cp\u003EDoes anyone know what happened to the plugin that sorta did n body orbits and could timewarp with ion drives running? I lost all my mods to a reformat and i cant find it anymore, and i really need it with 6.4 scale kerbin and it\u0027s 40 minute long burn times for most nuclear ships and 2 hour\u002B burntimes for anything electrically propelled. Does that plugin still work, or was it killed by one of the updates and never patched, i really think that would be a shame.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-11-07T20:37:26Z","Content":"\n\u003Cp\u003Eeggrobin: awesome! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003Ebs1110101: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/70881\u0022 rel=\u0022external nofollow\u0022\u003EOrbit Manipulator\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Chase","CreatedById":69765,"CreatedDateTime":"2014-11-08T08:35:14Z","Content":"\n\u003Cp\u003EI am curious are you doing n-body with the planets as well? I am wondering if it would just be easier to keep those on rails.\u003C/p\u003E\n"},{"CreatedByName":"AndreyATGB","CreatedById":62674,"CreatedDateTime":"2014-11-08T10:18:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Chase\u0022 data-cite=\u0022Chase\u0022\u003E\u003Cdiv\u003EI am curious are you doing n-body with the planets as well? I am wondering if it would just be easier to keep those on rails.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGo big or go home. I don\u0027t think on rails planets should be a thing anymore. This does n-body for all, Vall gets kicked out in a few days.\u003C/p\u003E\n"}]}