{"TopicId":39302,"ForumId":36,"TopicTitle":"[WIP] [HELP] Mk2 Cockpit Internals with insane lighting problem","CreatedByName":"Sam Hall","CreatedById":11263,"CreatedDateTime":"2013-07-27T02:31:34Z","PageNum":1,"Articles":[{"CreatedByName":"Sam Hall","CreatedById":11263,"CreatedDateTime":"2013-07-27T02:31:34Z","Content":"\n\u003Cp\u003EI\u0027ve run into an extremely bizarre problem with a cockpit I\u0027ve been building. Briefly: sunlight and shadow are not being projected in the correct direction in the IVA view. Here are some screenshots which illustrate the problem.\u003C/p\u003E\u003Cp\u003EHere, the sun is visible straight ahead, yet the shadows on the floor indicate that the light source is straight up.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/Vz6LJqd.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/Vz6LJqdm.jpg\u0022 alt=\u0022Vz6LJqdm.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHere, the sun is visible straight up, yet the shadows on Bill\u0027s face indicate that the light source is straight ahead.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/RirtQ64.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/RirtQ64m.png\u0022 alt=\u0022RirtQ64m.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHere, the sun is visible out the right window, yet the shadows on the canopy indicate that the light source is shining in through the left window.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/fjAKOtg.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/fjAKOtgm.jpg\u0022 alt=\u0022fjAKOtgm.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe sunlight is being projected as though the orientation of the whole scene has been rotated weirdly. Like the Z and Y axes have been swapped, and the X axis flipped. Obviously something is extremely wrong, but looking through my project I\u0027ll be damned if I can figure out what. All transformations were zeroed out before exporting. Nothing in the scene hierarchy is set to a negative scale. Everything that needs to be visible or clickable is on layer 16. What the hell gives?\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/8H7zMTo.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/8H7zMTom.jpg\u0022 alt=\u00228H7zMTom.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe only clue I have to go on at this point is this line from \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/27068?p=330439\u0026amp;viewfull=1#post330439\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/showthread.php/27068?p=330439\u0026amp;viewfull=1#post330439\u003C/a\u003E :\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022EndlessWaves\u0022 data-cite=\u0022EndlessWaves\u0022\u003E\u003Cdiv\u003E\u002Bz is the direction of travel, \u002Bx is right, \u002By is the direction that\u0027s left (up in the SPH, \u0027back\u0027 in the VAB).\u003Cp\u003EThe part tools may ignore any orientation data on the object they\u0027re attached to, so ensure that is 0,0,0 and you only rotate child objects.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s talking about external parts though. Wings, engines, fuel tanks. In my experience, IVA stuff needs to be oriented \u002Bz BACKWARD, \u002Bx LEFT and \u002By up. Trying to arrange the scene with \u002Bz forward just ends up with both pilot and cockpit facing the rear of the ship. Is it just supposed to be different for IVA scenery?\u003C/p\u003E\u003Cp\u003EFrom tjitte\u0027s tutorial:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tjitte\u0022 data-cite=\u0022tjitte\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Enow add the interior models in the interion object and the exterior models in the exterior. select the interior and the exterior and add the part tools componet to them. now orientate the models corectly, with the exterior facing up, and the interior on the z axis. like so: (no image)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo KSP requires that IVA geometry be oriented \u0022on the z axis\u0022 (global z axis? local z axis? plus z or minus z?), and external geometry with \u002By forward? Maybe? Guys, help. I used to think I understood to make KSP parts but this is starting to corrode my ability to think rationally. I looked at a bunch of other mod IVAs to see if they suffer from this problem and it seems like most people deal with it by just turning \u0022cast and receive shadows\u0022 off on all geometry. I think the stock Mk1 cockpit might have its lighting misaligned too, but it\u0027s hard to tell since its window\u0027s shadow is just kind of a big indistinct rectangle.\u003C/p\u003E\n"},{"CreatedByName":"mushroomman","CreatedById":236,"CreatedDateTime":"2013-07-27T03:57:08Z","Content":"\n\u003Cp\u003EMy god\u003C/p\u003E\u003Cp\u003EI love you\u003C/p\u003E\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003Esorry I can\u0027t help though\u003C/p\u003E\n"},{"CreatedByName":"astropapi1","CreatedById":57507,"CreatedDateTime":"2013-07-27T03:58:42Z","Content":"\n\u003Cp\u003EAwwwwwwwww yesssssss! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EFinally!\u003C/p\u003E\n"},{"CreatedByName":"Scotius","CreatedById":57622,"CreatedDateTime":"2013-07-27T05:51:13Z","Content":"\n\u003Cp\u003EThat looks beautiful! Can\u0027t wait for the released version (especially since only new internal we got is for Hitchhiker). And i wouldn\u0027t even mind the shadows - who needs them when we can look outside.\u003C/p\u003E\n"},{"CreatedByName":"Lurven","CreatedById":70423,"CreatedDateTime":"2013-07-27T11:41:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Scotius\u0022 data-cite=\u0022Scotius\u0022\u003E\u003Cdiv\u003EThat looks beautiful! Can\u0027t wait for the released version (especially since only new internal we got is for Hitchhiker). And i wouldn\u0027t even mind the shadows - who needs them when we can look outside.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShadows IMO would be a \u0022after test realease\u0022 priority\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2013-07-28T00:15:00Z","Content":"\n\u003Cp\u003EFrom my experience on other 3d environments Z is basically up and down. From your screenshots I\u0027m not sure if when the cockpit has a light directly from the front to the back it gets the right shadows. Also (this could be noobish, sorry, never messed with KSP) could it be that you don\u0027t have faces outside so the light source ignores any shadow projection?\u003C/p\u003E\n"},{"CreatedByName":"Tw1","CreatedById":59717,"CreatedDateTime":"2013-07-28T06:27:25Z","Content":"\n\u003Cp\u003ELike the others, can\u0027t help much. \u003C/p\u003E\u003Cp\u003EI say this looks awesome, and would be happy to use it even if the shadows aren\u0027t right at first.\u003C/p\u003E\u003Cp\u003EOne comment: As this is for the inline cockpit, won\u0027t that front window be blocked most of the time? Not that that would stop me from using it.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003EEdit:\u003C/span\u003E Or does it match up with the dome thing on top?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-28T06:39:03Z\u0022 title=\u002207/28/2013 06:39  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 28, 2013\u003C/time\u003E by Tw1\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stubbles","CreatedById":36867,"CreatedDateTime":"2013-07-28T06:35:22Z","Content":"\n\u003Cp\u003ELooking at the example in part tools, it seems like your internal is fine. Have you checked the position/orientation of the \u0022internal\u0022 and \u0022parttools_GameObject\u0022 parent nodes? If those are not centered out in pos/rot, you could have issues. Otherwise I\u0027m not sure, it looks correct.\u003C/p\u003E\n"},{"CreatedByName":"Mekan1k","CreatedById":48750,"CreatedDateTime":"2013-07-28T07:19:45Z","Content":"\n\u003Cp\u003EWow. Please release this, and the devs will hire you I bet.\u003C/p\u003E\u003Cp\u003ESeriously, Nice work. I am \u002Brepping and subscribing.\u003C/p\u003E\n"},{"CreatedByName":"Qumefox","CreatedById":43197,"CreatedDateTime":"2013-07-28T07:42:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mekan1k\u0022 data-cite=\u0022Mekan1k\u0022\u003E\u003Cdiv\u003EWow. Please release this, and the devs will hire you I bet.\u003Cp\u003ESeriously, Nice work. I am \u002Brepping and subscribing.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUnlikely they\u0027d hire him. I don\u0027t think they have a huge workload for their modelers right now or else Nova would probably have more to do. \u003C/p\u003E\u003Cp\u003EAnd only being the most amateurish of a modeler myself, My only guess is you have an axis off somewhere.\u003C/p\u003E\n"},{"CreatedByName":"Sam Hall","CreatedById":11263,"CreatedDateTime":"2013-07-29T19:45:33Z","Content":"\n\u003Cp\u003EOkay, after staring at Unity so long that my vitreous jelly has started to curdle I have finally concluded that whatever\u0027s going on with the shadows, the problem\u0027s not with my mod. Or at least not SOLELY with my mod, as here we can see it effecting the stock MK1 cockpit:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/zMqxlB2.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/zMqxlB2m.png\u0022 alt=\u0022zMqxlB2m.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESee? Sun straight ahead, shadows of the navball and other instruments straight down. I\u0027ll check around with some other people to see if they notice the same bug on their systems, but in the meantime I\u0027m just going to disable shadows on my own cockpit and throw it up on spaceport. Enjoy!\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://kerbalspaceprogram.com/mk2cockpitinternals/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kerbalspaceprogram.com/mk2cockpitinternals/\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2013-07-29T20:06:50Z","Content":"\n\u003Cp\u003ELove the tube radio on the right!\u003C/p\u003E\n"},{"CreatedByName":"CERVERUS","CreatedById":15589,"CreatedDateTime":"2013-07-29T20:26:19Z","Content":"\n\u003Cp\u003EAmazing,very good work.\u003C/p\u003E\n"},{"CreatedByName":"Scotius","CreatedById":57622,"CreatedDateTime":"2013-07-29T21:07:19Z","Content":"\n\u003Cp\u003EThank you. This cockpit sorely needed some love \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"BigFatStupidHead","CreatedById":44217,"CreatedDateTime":"2013-07-30T00:41:50Z","Content":"\n\u003Cp\u003EGlad you decided to release this! Now we can finally have IVA\u0027s for all our aircraft!\u003C/p\u003E\n"},{"CreatedByName":"Vorgra","CreatedById":69564,"CreatedDateTime":"2013-07-30T01:11:02Z","Content":"\n\u003Cp\u003EAhh, Z is supposed to be vertical, xy are the horizontal plane, also x looks flipped, I am unsure as to how it the game renders it, but it looks like shadows come from the corresponding axis, just try rotating the model so its aligned correctly with the modeling programs xyz.\u003C/p\u003E\n"}]}