{"TopicId":74576,"ForumId":36,"TopicTitle":"Module is not found","CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T15:10:56Z","PageNum":1,"Articles":[{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T15:10:56Z","Content":"\n\u003Cp\u003EHi!\u003C/p\u003E\u003Cp\u003EI have the following problem: I add a Module to a Part. The module is added to the Part:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cbr\u003EPART\u003Cbr\u003E{\u003Cbr\u003E part = trussPiece1x_4294755220\u003Cbr\u003E partName = Part\u003Cbr\u003E pos = -7.737654E-08,6.068702,-0.8850844\u003Cbr\u003E rot = -3.090862E-08,0.7071068,-0.7071068,-3.090862E-08\u003Cbr\u003E attRot = 0,0,0,1\u003Cbr\u003E mir = 1,1,1\u003Cbr\u003E istg = 0\u003Cbr\u003E dstg = 0\u003Cbr\u003E sidx = -1\u003Cbr\u003E sqor = -1\u003Cbr\u003E attm = 1\u003Cbr\u003E srfN = srfAttach,trussPiece3x_4294755240\u003Cbr\u003E EVENTS\u003Cbr\u003E {\u003Cbr\u003E }\u003Cbr\u003E ACTIONS\u003Cbr\u003E {\u003Cbr\u003E }\u003Cbr\u003E MODULE\u003Cbr\u003E {\u003Cbr\u003E name = ModuleActiveStrutFreeAttachTarget\u003Cbr\u003E isEnabled = True\u003Cbr\u003E Id = bd975dc5-056a-460c-b89f-0bc6a1ccc1b1\u003Cbr\u003E EVENTS\u003Cbr\u003E {\u003Cbr\u003E }\u003Cbr\u003E ACTIONS\u003Cbr\u003E {\u003Cbr\u003E }\u003Cbr\u003E }\u003Cbr\u003E}\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EBut the following code returns an empty list:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFlightGlobals.ActiveVessel.Parts.Where(p =\u0026gt; p.Modules.Contains(\u0022ModuleActiveStrutFreeAttachTarget\u0022))\u003Cbr\u003E                                 .Select(p =\u0026gt; p.Modules[\u0022ModuleActiveStrutFreeAttachTarget\u0022] as ModuleActiveStrutFreeAttachTarget)\u003Cbr\u003E                                 .ToList();\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m doing exactly the same (with different module name) with another module where it works without any problems. I also checked the spelling twice.\u003C/p\u003E\u003Cp\u003EThe only thing that\u0027s different: in the workign case the module is in the part\u0027s cfg file while in the not workign case I add the module at runtime using \u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003Epart.AddModule\u003C/span\u003E.\u003C/p\u003E\u003Cp\u003EFor any help I would be very grateful since this is currently a showstopper...\u003C/p\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-06-09T15:55:10Z","Content":"\n\u003Cp\u003Emight be (but I have no clue what I\u0027m talking about) that the current API-function AddModule does not interact correctly with linq right now.\u003C/p\u003E\u003Cp\u003EI\u0027ve read something similiar somewhere completely else once..\u003C/p\u003E\u003Cp\u003EDid you try to loop through the PartModules the standard way just to make sure?\u003C/p\u003E\u003Cp\u003ELet me know if that worked please..\u003C/p\u003E\u003Cp\u003EWithin the next few days, I planned to implement the same thing for KSPI modules in my Impulse-Drive DLL - so your experience will be appreciated than..\u003C/p\u003E\n"},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T16:06:22Z","Content":"\n\u003Cp\u003EI did try to enumerate the PartList manually, yes.\u003C/p\u003E\u003Cp\u003EMy current suspicion is that AddModule works only temporarily. A scene change will only add those modules defined in the part\u0027s cfg to the PartList.\u003C/p\u003E\u003Cp\u003EI originally didn\u0027t want to add my target module to every part because it won\u0027t be used or needed 99% of the time but only add it to those parts which really need it.\u003C/p\u003E\u003Cp\u003EThis doesn\u0027t seem to be possible, so I have no other choice as to add it to every part in the whole game with a manually created opt-out list... \u003C/p\u003E\u003Cp\u003EThis is REALLY a pitty wasting memory! If you find any solution \u003Cstrong\u003Eplease \u003C/strong\u003Etell me so that I can fix this!\u003C/p\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-06-09T16:33:24Z","Content":"\n\u003Cp\u003EOh I see lol\u003C/p\u003E\u003Cp\u003ESo you can Add the module by code, but it does not stay persistent..\u003C/p\u003E\u003Cp\u003EActually I never expected it to stay..\u003C/p\u003E\u003Cp\u003EAddModule is from my understanding a virtual thing..\u003C/p\u003E\u003Cp\u003ESo I suggest the following without having it tested..\u003C/p\u003E\u003Cp\u003Eloop through the parts, find the part that should have the mod, add it - do that in onStart or if that is not enough in FixedUpdate.\u003C/p\u003E\u003Cp\u003EBut onStart should be enough in my understanding..\u003C/p\u003E\u003Cp\u003EI don\u0027t know your requirements to select the part - but I hope you got the point..\u003C/p\u003E\u003Cp\u003EIf you want some additional script complications, you \u003Cstrong\u003Ecan \u003C/strong\u003Eindeed add stuff to the VESSEL section of the persitent file - just make sure it does not get overwritten by the game itselfe on scene end - so the timing is crucial there..\u003C/p\u003E\u003Cp\u003EBut if you manage that part, the modules should be loaded on scene change as if it where in cfg at beginning..\u003C/p\u003E\u003Cp\u003EA third option (iirc there is something like this) - did you experiment with the \u0022IsPersistent\u0022 thingy that is around in partModule?\u003C/p\u003E\u003Cp\u003EThat might do the above part for you - but I never used it..\u003C/p\u003E\u003Cp\u003Ebtw - if you are from austria, we live close and could talk german aswelll..\u003C/p\u003E\n"},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T16:45:40Z","Content":"\n\u003Cp\u003EI\u0027d suggest we stay with English for the good of the greater audience (you know, there may come others with this problem), if you\u0027d like to express something in German simply send me a PM \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003Eon topic:\u003C/p\u003E\u003Cp\u003EActually I only need to identify a single part reliably. Currently I add a module which contains a GUID. However, each part gets assigned a what seems to be unique ID (maybe Ticks?) anyway (e.g. part = DockingStrutTargeter_4294787888). If this doesn\u0027t ever change (through scene changes, reloads, docking, etc) and I can access it I won\u0027t need my module at all.\u003C/p\u003E\u003Cp\u003E@IsPersistent: haven\u0027t seen that in a PartModule but only at Fields?\u003C/p\u003E\u003Cp\u003EI\u0027d like to avoid adding stuff to the vessel itself, also having decoupling/docking in mind...\u003C/p\u003E\n"},{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2014-06-09T16:51:57Z","Content":"\n\u003Cp\u003EYou should be using ProtoVessel and ProtoPartSnapshot.\u003C/p\u003E\n"},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T16:57:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022malkuth\u0022 data-cite=\u0022malkuth\u0022\u003E\u003Cdiv\u003EYou should be using ProtoVessel and ProtoPartSnapshot.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the hint, I googled a bit but didn\u0027t find good information what those are and escpecially how to use them corectly. \u003C/p\u003E\u003Cp\u003EDo you know any resources describing or mods using them I can look at?\u003C/p\u003E\n"},{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2014-06-09T17:25:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marce\u0022 data-cite=\u0022marce\u0022\u003E\u003Cdiv\u003EThanks for the hint, I googled a bit but didn\u0027t find good information what those are and especially how to use them correctly. \u003Cp\u003EDo you know any resources describing or mods using them I can look at?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EProtoVessel Returns active information of all unloaded craft.\u003C/p\u003E\u003Cp\u003Ereading your situation again think your looking for current active vessel? In which case flightglobals might be throwing an exception. So I overcame this in an active flight with this.\u003C/p\u003E\u003Cp\u003Ebut if its other vessels your searching for then ProtoVessel is what you want to use. Best to foreach each step to get to what you want. Since its a pretty big list.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprivate Vessel activeVessel\u003Cbr\u003E        {\u003Cbr\u003E            get\u003Cbr\u003E            {\u003Cbr\u003E                // We need this try-catch-block, because FlightGlobals.ActiveVessel might throw\u003Cbr\u003E                // an exception\u003Cbr\u003E                try\u003Cbr\u003E                {\u003Cbr\u003E                    if (HighLogic.LoadedSceneIsFlight \u0026amp;\u0026amp; FlightGlobals.ActiveVessel != null)\u003Cbr\u003E                    {\u003Cbr\u003E                        return FlightGlobals.ActiveVessel;\u003Cbr\u003E                    }\u003Cbr\u003E                    else\u003Cbr\u003E                    {\u003Cbr\u003E                        return null;\u003Cbr\u003E                    }\u003Cbr\u003E                }\u003Cbr\u003E                catch\u003Cbr\u003E                {\u003Cbr\u003E                    return null;\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENow you can refrence acitvevessel and won\u0027t get any exceptions in case the code is null at time of check. Not so important during editor or out of flight, but becomes much more of a problem in flight.\u003C/p\u003E\u003Cp\u003EFeel free to check out Mission controller code on my github page. It has lots and lots of examples of loading Parts, and Active parts, and even finding modules. Most important parts would be. \u003Ca href=\u0022https://github.com/malkuth1974/KSPMissionController/blob/master/plugin/MissionControllerEvents.cs\u0022 rel=\u0022external nofollow\u0022\u003EThis.\u003C/a\u003E and \u003Ca href=\u0022https://github.com/malkuth1974/KSPMissionController/blob/master/plugin/MissionControllerCalc.cs\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E. \u003C/p\u003E\u003Cp\u003EMany more examples spread through the code, to many to find and list though.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-09T17:29:22Z\u0022 title=\u002206/09/2014 05:29  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 9, 2014\u003C/time\u003E by malkuth\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-06-09T17:36:42Z","Content":"\n\u003Cp\u003EOne question: does your \u0022ModuleActiveStrutFreeAttachTarget\u0022 have an Awake method?\u003C/p\u003E\u003Cp\u003EP.S. Your code works fine in my test\u003C/p\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-06-09T17:48:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marce\u0022 data-cite=\u0022marce\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E@IsPersistent: haven\u0027t seen that in a PartModule but only at Fields?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ejust for reference..\u003C/p\u003E\u003Cp\u003EIt\u0027s in part\u003C/p\u003E\u003Cp\u003EPart.isPersistent\u003C/p\u003E\u003Cp\u003EI thought it might save the added modules with it..\u003C/p\u003E\u003Cp\u003Ebut never tried..\u003C/p\u003E\u003Cp\u003EMalkuth is a better source right now..\u003C/p\u003E\n"},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T17:49:36Z","Content":"\n\u003Cp\u003EI have some tiny OnStart code to create an ID if none is present and to register for some controller functions when in editor, but no Awake. And I do handle editor or inflight differently, so no NullRefs (mostly \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E), I\u0027m adding to the correct part.\u003C/p\u003E\u003Cp\u003EI think I have to elaborate a bit: I add the module to a part which does NOT have it in its cfg file in the editor (or inflight, both should work) using AddModule. The module is now present until I change scene (like launch from VAB). Now the module is saved in the craft file just fine but won\u0027t be present on the launchpad.\u003C/p\u003E\u003Cp\u003EMaybe the protopart can make the module persistent, but I have to look through the MissonController code for longer to understand what that is and how it works.\u003C/p\u003E\u003Cp\u003EExcept someone can come up with exactly the code I need to use instead of AddModule for me? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2014-06-09T17:55:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marce\u0022 data-cite=\u0022marce\u0022\u003E\u003Cdiv\u003EI have some tiny OnStart code to create an ID if none is present and to register for some controller functions when in editor, but no Awake. And I do handle editor or inflight differently, so no NullRefs (mostly \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E), I\u0027m adding to the correct part.\u003Cp\u003EI think I have to elaborate a bit: I add the module to a part which does NOT have it in its cfg file in the editor (or inflight, both should work) using AddModule. The module is now present until I change scene (like launch from VAB). Now the module is saved in the craft file just fine but won\u0027t be present on the launchpad.\u003C/p\u003E\u003Cp\u003EMaybe the protopart can make the module persistent, but I have to look through the MissonController code for longer to understand what that is and how it works.\u003C/p\u003E\u003Cp\u003EExcept someone can come up with exactly the code I need to use instead of AddModule for me? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHave you tried to replace the module name in your code to see if its actually a code problem or maybe a module problem.. Something simple like ModuleEngineFX or ModuleEngine. Because it seems EvilReaper checked you code and it worked for him.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-09T18:01:56Z\u0022 title=\u002206/09/2014 06:01  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 9, 2014\u003C/time\u003E by malkuth\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T17:59:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022malkuth\u0022 data-cite=\u0022malkuth\u0022\u003E\u003Cdiv\u003ENo pretty sure protopart only takes a snapshot of the peristant file and whats available for craft.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWas afraid of that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022malkuth\u0022 data-cite=\u0022malkuth\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027m not sure what you mean about not having a Module Listed in .cfg file? Does that actually work? Oh are you using ModuleManger yea that should work.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt is added purely programmatically and is then present, but only temporarily, that\u0027s the reason why I now use a MM config to add it to the cfg of all parts ensuring that it will be present. However, that\u0027s not very performance oriented...\u003C/p\u003E\n"},{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2014-06-09T18:06:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marce\u0022 data-cite=\u0022marce\u0022\u003E\u003Cdiv\u003EWas afraid of that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003Cp\u003EIt is added purely programmatically and is then present, but only temporarily, that\u0027s the reason why I now use a MM config to add it to the cfg of all parts ensuring that it will be present. However, that\u0027s not very performance oriented...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmmm, so your trying to take away a module that is already loaded on a craft? Pretty sure that any craft launched keeps whatever module it has for it lifetime, and can\u0027t be taken away, unless you Delete the module reference from the persistent file, for that ship.\u003C/p\u003E\u003Cp\u003EOne of the big reasons that part makers try hardest to keep all name references the same, to keep Player Save Game files safe from Deleting Ships that don\u0027t match any know parts or modules.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-09T18:08:17Z\u0022 title=\u002206/09/2014 06:08  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 9, 2014\u003C/time\u003E by malkuth\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T18:19:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022malkuth\u0022 data-cite=\u0022malkuth\u0022\u003E\u003Cdiv\u003EHmmm, so your trying to take away a module that is already loaded on a craft?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOn the contrary, I try to add one.\u003C/p\u003E\u003Cp\u003Eot: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/82557-Hook-into-Part-onCopy-from-PartModule\u0022 rel=\u0022external nofollow\u0022\u003EI\u0027d like to point to my second question (wich is actually even more important for me)\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2014-06-09T18:26:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marce\u0022 data-cite=\u0022marce\u0022\u003E\u003Cdiv\u003EOn the contrary, I try to add one.\u003Cp\u003Eot: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/82557-Hook-into-Part-onCopy-from-PartModule\u0022 rel=\u0022external nofollow\u0022\u003EI\u0027d like to point to my second question (wich is actually even more important for me)\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI see, interesting. \u003C/p\u003E\u003Cp\u003ESo, could it be possible that your check is happening before the module is added? Hence why your getting a Blank return? But if your using MM then that should not be the case. MM adds modules and load.\u003C/p\u003E\u003Cp\u003ELike I said I would eliminate module problems and check to see if the code works with a known working module.. If it does then your looking at the wrong problem \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T18:31:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022malkuth\u0022 data-cite=\u0022malkuth\u0022\u003E\u003Cdiv\u003ESo, could it be possible that your check is happening before the module is added? Hence why your getting a Blank return?\u003C/div\u003E\u003C/blockquote\u003E No I request the modules of all parts (to be on the safe side) continously again and again.\u003Cp\u003E \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022malkuth\u0022 data-cite=\u0022malkuth\u0022\u003E\u003Cdiv\u003EBut if your using MM then that should not be the case. MM adds modules and load.\u003C/div\u003E\u003C/blockquote\u003E Yes, adding it to all parts with MM works, it\u0027s just inefficient.\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022malkuth\u0022 data-cite=\u0022malkuth\u0022\u003E\u003Cdiv\u003ELike I said I would eliminate module problems and check to see if the code works with a known working module.. If it does then your looking at the wrong problem \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E The problem is the same for stock modules too, I tried.\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-06-09T18:45:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marce\u0022 data-cite=\u0022marce\u0022\u003E\u003Cdiv\u003EThe module is now present until I change scene (like launch from VAB). Now the module is saved in the craft file just fine but won\u0027t be present on the launchpad.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s persistent, but not how you think. If you added the part inflight, changing scenes is no problem. The problem you\u0027re encountering is that KSP treats \u0022persistent\u0022 and \u0022regular\u0022 data differently. Your module is added to the .craft file but is ignored if that file isn\u0027t loaded as a persistent save, which it isn\u0027t when moving from editor to flight. So it\u0027s deleted, KSP writes a warning about not being able to load a module for any affected parts and things proceed.\u003C/p\u003E\u003Cp\u003EIs there a reason you\u0027re adding the PartModules in the editor as opposed to when flight begins? A description of what you\u0027re trying to do would be helpful.\u003C/p\u003E\n"},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-09T19:07:39Z","Content":"\n\u003Cp\u003EUnderstand!\u003C/p\u003E\u003Cp\u003EWhat I\u0027m trying to do: I\u0027m near to the release of a mod that combines the features of DockingStruts \u0026amp; QuantumStruts \u002B adds a few more. It is possible to activate an \u0022aiming\u0022 mode and select any part of the vessel as long as it\u0027s not out of range or the angle is too big etc.\u003C/p\u003E\u003Cp\u003EThe last step was to add editor support as in: connecting targeters with targets or any part can be done in editor too instead on in flight only. \u003C/p\u003E\u003Cp\u003ETo reconnect this \u0022free\u0022 attached strut I need a unique and unchanging reference to the selected part. So my first intention was to add a Module which contains only a GUID when the user selects the target part. The I save this ID in the targeter part and can reconnect whenever required. Since this module is volatile (as xEvilRepperx explained) I now switched over to adding the module with the GUID preemptive to all parts so that it is always there. \u003C/p\u003E\u003Cp\u003EOf course a module containing a single field is not terrible regarding performance but I\u0027d like to avoid it if possible.\u003C/p\u003E\u003Cp\u003EEDIT: I made a quick \u003Ca href=\u0022http://static.marce.at/file/KSP/link_modes.mp4\u0022 rel=\u0022external nofollow\u0022\u003Evideo \u003C/a\u003Eshowing the two link modes. This thread relates to the second mode (attach anywhere)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-09T19:19:44Z\u0022 title=\u002206/09/2014 07:19  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 9, 2014\u003C/time\u003E by marce\u003C/strong\u003E\n\u003Cbr\u003Eadded video link\n\u003C/span\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-06-09T20:17:58Z","Content":"\n\u003Cp\u003Eintresting project - good luck..\u003C/p\u003E\u003Cp\u003Eonce more I don\u0027t know if there is a better way..\u003C/p\u003E\u003Cp\u003Ebut I\u0027d try the part module approach..\u003C/p\u003E\u003Cp\u003EI guess you have same issues like DavonTC - each engine there can be assigned to groups - he wasn\u0027t able to make those settings available in editor either..\u003C/p\u003E\u003Cp\u003EI guess there too it lost the settings on flight..\u003C/p\u003E\u003Cp\u003Ehowever - complicated work arounds are allways possible..\u003C/p\u003E\u003Cp\u003Efor a \u0022formation mode\u0022 to allow vessels to fly together, I had to write an independent manager last week, that was created as a singleton and called by each vessel\u0027s partModule\u003C/p\u003E\u003Cp\u003ESo each vessel announced it\u0027s presence and the manager remebered all settings per vessel GUID to pass along to the other vessels if needed..\u003C/p\u003E\u003Cp\u003EI could imagine creating a strut-manager, that remembers those settings by assigning an id based on partinfo and position to the data set..\u003C/p\u003E\u003Cp\u003ELater you could read that out and parse it with the active vessel..\u003C/p\u003E\u003Cp\u003EI hope you got the point - it\u0027s complicated stuff to explain..\u003C/p\u003E\n"},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2014-06-10T05:04:12Z","Content":"\n\u003Cp\u003EThe problem of safely identifying a specific part remains. Once I have the unique ID I can store it in the targeting module as well without the need of an additional manager.\u003C/p\u003E\u003Cp\u003EWell, I\u0027ll continue with my current approach for the moment since more complex solutions also create more complex bugs and the gains isn\u0027t really worth the effort...\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-06-10T05:09:28Z","Content":"\n\u003Cp\u003EI hesitate to suggest this since it\u0027s quite hacky and will prevent your mod from working with any other mod that happens to also use it, but one thing you could do is stuff your data into Part.customPartData and redo your editor associations on ship launch. I can\u0027t think of any other way to uniquely identify any given part from the editor to flight than either that or doing what you\u0027re doing and adding a new PartModule with a single field to all existing parts\u003C/p\u003E\u003Cp\u003EEdit: Also I didn\u0027t try this out, but another possibility (that I haven\u0027t explored and so may not work as imagined):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EWhen the player enters the editor, add your identifying PartModule to ALL part prefabs\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIf the player leaves the editor and it\u0027s not to launch the ship, remove the PartModule from all part prefabs again\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIf the player leaves the editor and it\u0027s to launch the ship, leave the PartModules attached until the ship is loaded, then strip all PartModules from all part prefabs, do your logic with whatever uses them to identify parts, and then strip all unused identifier PartModules from the ship\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe idea is to get around the issue of the .craft loading a PartModule that it doesn\u0027t recognize. If it\u0027s attached temporarily, you could use it to smuggle your GUID data out of the editor and into the flight vessel.\u003C/p\u003E\u003Cp\u003EThe main attraction of this method is that you wouldn\u0027t clobber any other mod functionality doing it, although it could be argued that it\u0027s even uglier than the first method\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-10T05:15:55Z\u0022 title=\u002206/10/2014 05:15  AM\u0022 data-short=\u002210 yr\u0022\u003EJune 10, 2014\u003C/time\u003E by xEvilReeperx\u003C/strong\u003E\n\u003C/span\u003E\n"}]}