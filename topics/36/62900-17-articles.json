{"TopicId":62900,"ForumId":36,"TopicTitle":"Kerbal Construction Time/StageRecovery Dev Thread","CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-02-11T19:11:39Z","PageNum":17,"Articles":[{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-06-28T00:56:26Z","Content":"\n\u003Cp\u003EI\u0027ve narrowed it down to an issue with MechJeb. I\u0027ll have to try a newer version when I get home from work tonight to see if the problem persists.\u003C/p\u003E\n"},{"CreatedByName":"severedsolo","CreatedById":80345,"CreatedDateTime":"2014-06-28T08:26:32Z","Content":"\n\u003Cp\u003EI\u0027m runnning mechjeb, none of the others\u003C/p\u003E\n"},{"CreatedByName":"ericwdhs","CreatedById":80080,"CreatedDateTime":"2014-06-28T08:27:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003EI also have considered doing something like this, as I\u0027m not a big fan of people building rockets in the VAB or planes in the SPH. I had also considered dropping the rate of whichever building isn\u0027t used (choose VAB or SPH at game start, set that one to 1BP/s and the other to 0.5BP/s). Other people have expressed that they like being able to build vessels wherever they want, and once you are sufficiently upgraded using the SPH for rockets isn\u0027t as practical. I haven\u0027t decided if I\u0027m going to change anything yet or not. If people really want to go out of their way to build things in the \u0022wrong\u0022 building, I don\u0027t know if I should stop them.\u003Cp\u003EThe unified queue is a good solution though, but from a gameplay aspect I like upgrading the two buildings separately. If anyone else has an opinion on this, let me know. It\u0027s easy enough, imo, to just limit yourself from building in the wrong building.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EInstead of unifying the queue or penalizing use of both buildings, could you have incentives/penalties tied to the actual type of craft? It would make sense considering the buildings are supposed to be specialized. I\u0027m not familiar with KSP\u0027s internals, but it seems like it should be as easy as the coding equivalent of: \u0022If the ship launches with thrust down, it\u0027s a rocket. It will take twice as long to build in the SPH. If the ship launches with thrust horizontal, it\u0027s a plane. It will take twice as long to build in the VAB.\u0022 Personally, I\u0027d prefer a penalty more on the order of 5 or 10 times as long, but twice is good for easing up gameplay.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-28T08:36:50Z\u0022 title=\u002206/28/2014 08:36  AM\u0022 data-short=\u002210 yr\u0022\u003EJune 28, 2014\u003C/time\u003E by ericwdhs\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-06-28T09:19:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ericwdhs\u0022 data-cite=\u0022ericwdhs\u0022\u003E\u003Cdiv\u003EInstead of unifying the queue or penalizing use of both buildings, could you have incentives/penalties tied to the actual type of craft? It would make sense considering the buildings are supposed to be specialized. I\u0027m not familiar with KSP\u0027s internals, but it seems like it should be as easy as the coding equivalent of: \u0022If the ship launches with thrust down, it\u0027s a rocket. It will take twice as long to build in the SPH. If the ship launches with thrust horizontal, it\u0027s a plane. It will take twice as long to build in the VAB.\u0022 Personally, I\u0027d prefer a penalty more on the order of 5 or 10 times as long, but twice is good for easing up gameplay.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow would you account for VTOLs then? I honestly don\u0027t see what\u0027s wrong with the current situation outside of code efficiency. If people want to waste points upgrading the SPH to build rockets instead of upgrading the VAB, then I say let them. The end game result is always going to be highly upgraded version of both anyway...\u003C/p\u003E\n"},{"CreatedByName":"ericwdhs","CreatedById":80080,"CreatedDateTime":"2014-06-28T10:04:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003EHow would you account for VTOLs then? I honestly don\u0027t see what\u0027s wrong with the current situation outside of code efficiency. If people want to waste points upgrading the SPH to build rockets instead of upgrading the VAB, then I say let them. The end game result is always going to be highly upgraded version of both anyway...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EVTOLs would follow the same rules. It just wouldn\u0027t be as elegant. If what you actually set to build is tweaked to vertical thrust, assume it\u0027s better off launching from the launchpad. If it\u0027s tweaked to horizontal thrust, assume it\u0027s better off on the runway. Make that clear to the user and you should have no problems. Even if the user does split points half SPH, half VAB, they should get what they want eventually. It\u0027ll just take longer overall, and that\u0027s perfectly fine since developing VTOL craft takes more time and effort in the real world anyway.\u003C/p\u003E\u003Cp\u003EThat all said, I only replied because magico said he\u0027s \u0022\u003Cem\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003Enot a big fan of people building rockets in the VAB or planes in the SPH\u003C/span\u003E\u003C/em\u003E\u0022 (I assume VAB and SPH are supposed to be switched.) I agree with him there, but I think the proposed solution of unifying the queue doesn\u0027t actually do anything to solve that. It would only remove the distinction between SPH and VAB, and that\u0027s a step backward. Then again, I haven\u0027t gotten more than few minutes into testing this mod (just saw it today), so I\u0027m may have missed the obvious or woefully misinterpreted some stuff about how the mod works. I\u0027m also assuming there\u0027s an easy way to read a craft\u0027s thrust direction, the one given by the Center of Thrust icon in the editor. I really don\u0027t know how feasible my \u0022solution\u0022 to this one concern is.\u003C/p\u003E\n"},{"CreatedByName":"TurielD","CreatedById":57290,"CreatedDateTime":"2014-06-28T11:18:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003EGuto8797 was reporting the same bug a few pages back. If you can get me a log I can see if anything is being reported there that might explain the problem. Hopefully that bug actually has an error associated with it in the log...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUnfortunately nubby question: How do I save a log of game events?\u003C/p\u003E\n"},{"CreatedByName":"severedsolo","CreatedById":80345,"CreatedDateTime":"2014-06-28T11:34:20Z","Content":"\n\u003Cp\u003ECamera Sim Error happened again: \u003Ca href=\u0022https://www.dropbox.com/s/ivrtklna104p7ty/output_log.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/ivrtklna104p7ty/output_log.txt\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EDon\u0027t know if it helps, but it kicked in when I reverted to editor after already running a simulation once (I used the KSP menu, not KCTs)\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-06-28T12:55:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ericwdhs\u0022 data-cite=\u0022ericwdhs\u0022\u003E\u003Cdiv\u003EInstead of unifying the queue or penalizing use of both buildings, could you have incentives/penalties tied to the actual type of craft?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s a pretty cool way of handling it (and I definitely switched VAB and SPH in that quote, derp). For simplicity\u0027s sake what I\u0027ve done in my dev version is drop the initial build rates to 0.1 and given the user 15 upgrades. I may need to increase that number though, since it isn\u0027t quite enough to reach 1BP/s in either facility (0.85BP/s actually, 0.1 in the other). I like the early game flexibility this provides, as the user has more options at first and there\u0027s more buildup required to reach the comparatively high rates of late game. Also it\u0027s way simpler to code \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TurielD\u0022 data-cite=\u0022TurielD\u0022\u003E\u003Cdiv\u003EUnfortunately nubby question: How do I save a log of game events?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENothing special you need to do, just find the Kerbal Space Program folder on your computer, go into the KSP_DATA folder and find output_log.txt. Simple as that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022severedsolo\u0022 data-cite=\u0022severedsolo\u0022\u003E\u003Cdiv\u003ECamera Sim Error happened again: \u003Ca href=\u0022https://www.dropbox.com/s/ivrtklna104p7ty/output_log.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/ivrtklna104p7ty/output_log.txt\u003C/a\u003E\u003Cp\u003EDon\u0027t know if it helps, but it kicked in when I reverted to editor after already running a simulation once (I used the KSP menu, not KCTs)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll take a look but I\u0027m afraid that the log won\u0027t have anything too useful. I\u0027m going to compare mechjeb versions to see if there\u0027s anything corresponding there.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-06-28T12:58:10Z","Content":"\n\u003Cp\u003ESo updating to the newest dev build of MechJeb *seems* to have fixed the locked view issue.\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-06-28T13:09:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027ll take a look but I\u0027m afraid that the log won\u0027t have anything too useful. I\u0027m going to compare mechjeb versions to see if there\u0027s anything corresponding there.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, this time the log actually contained an error that would explain the camera lockup, but unfortunately not a reason for why it happened. I\u0027ll keep looking to see if I can figure something out though.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at FlightCamera.GetAutoModeForVessel (.Vessel v) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at FlightCamera.setMode (Modes m) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at FlightCamera.setModeImmediate (Modes m) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at MapView.exitMapView () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at MapView.ExitMapView () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at FlightUIModeController.SetMode (FlightUIMode mode) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at FlightUIModeController.Start () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003ESo updating to the newest dev build of MechJeb *seems* to have fixed the locked view issue.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, keep me posted. It\u0027s starting to look like there are multiple sources of this bug, as they usually don\u0027t have anything in the log file.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-07-02T06:22:29Z","Content":"\n\u003Cp\u003ESo I\u0027ve stumbled across a new bug. Sometimes when switching vehicles, a whole slew of functionality ceases to function properly. Here\u0027s how it manifests:\u003C/p\u003E\u003Cp\u003E- Revert buttons and space center button in the escape menu stop working.\u003C/p\u003E\u003Cp\u003E- Quicksave stops working\u003C/p\u003E\u003Cp\u003E- Switch vessels stops working\u003C/p\u003E\u003Cp\u003E- All vessel icons and orbits in the map view are gone\u003C/p\u003E\u003Cp\u003EThe only way to get everything back is to restart the game and even then, jumping back to the situation you just got stuck in can cause the whole thing to start over again. I\u0027m not 100% sure KCT is entirely at fault, but when I had a look at the logs after this happened, there were a lot of null reference exceptions attached to KCT and then removing KCT from my GameData folder fixed the issue.\u003C/p\u003E\u003Cp\u003EEDIT: Trying to replicate it again so I can deliver the logs\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-02T06:26:58Z\u0022 title=\u002207/02/2014 06:26  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 2, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-07-02T07:43:43Z","Content":"\n\u003Cp\u003EOk, here\u0027s the KSP and the Output logs zipped. Looks like something super nasty happened as there are actually something like 1.1 million lines in the output log relating to null reference exceptions. That being said, I\u0027m not 100% sure KCT has anything to do with it, but the behavior most certainly stops with KCT taken out of GameData.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://drive.google.com/file/d/0BzPO9eXfO6xGazR0SnhYSEE2MjQ/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/file/d/0BzPO9eXfO6xGazR0SnhYSEE2MjQ/edit?usp=sharing\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"montyben101","CreatedById":74173,"CreatedDateTime":"2014-07-02T08:45:44Z","Content":"\n\u003Cp\u003EWill this work on an already started save? also will it work with mods?\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-07-02T09:34:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022montyben101\u0022 data-cite=\u0022montyben101\u0022\u003E\u003Cdiv\u003EWill this work on an already started save? also will it work with mods?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes and yes\u003C/p\u003E\n"},{"CreatedByName":"montyben101","CreatedById":74173,"CreatedDateTime":"2014-07-02T10:18:13Z","Content":"\n\u003Cp\u003ESorry but im still confused as to what \u0022build points\u0022 are? do you spend them to make ships build faster and then earn more from..... somthing?\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-07-02T10:51:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022montyben101\u0022 data-cite=\u0022montyben101\u0022\u003E\u003Cdiv\u003ESorry but im still confused as to what \u0022build points\u0022 are? do you spend them to make ships build faster and then earn more from..... somthing?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShips cost a certain amount of build points based on how complex they are (which parts and how many). Your KCT will build those ships at a rate of x build points per second (pretty sure its per second), with the default being 1bp/s. You can upgrade your KCT to build ships faster or more at the same time.\u003C/p\u003E\n"},{"CreatedByName":"montyben101","CreatedById":74173,"CreatedDateTime":"2014-07-02T14:26:09Z","Content":"\n\u003Cp\u003EOk i think i get it now, ships cost build points and then after they are complete the build points are returned to be used again on a different craft?\u003C/p\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2014-07-02T15:49:51Z","Content":"\n\u003Cp\u003EBuild points are how much \u0022work\u0022 it takes to make the ship. They aren\u0027t a resource so don\u0027t get \u0022spent\u0022 but are completed by how fast each of your assembly line works, which is akin to how advance your construction facility is. Simple examples would be a basic ship being 1000 built points (BP) on a construction like that can manufacture at 1 built point per second (BP/s) would take 1000 seconds to complete. That same ship on a line that can produce at 2BP/s would take 500 seconds to finish. Similarly, a complex ship could require say 10,000BP which makes the prospect of upgrading assembly lines attractive. This is what the upgrade points are utilized for (as well as other neat things \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E )\u003C/p\u003E\n"},{"CreatedByName":"montyben101","CreatedById":74173,"CreatedDateTime":"2014-07-02T16:08:09Z","Content":"\n\u003Cp\u003EAh i get it now thanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-07-02T16:14:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003EOk, here\u0027s the KSP and the Output logs zipped. Looks like something super nasty happened as there are actually something like 1.1 million lines in the output log relating to null reference exceptions. That being said, I\u0027m not 100% sure KCT has anything to do with it, but the behavior most certainly stops with KCT taken out of GameData.\u003Cp\u003E\u003Ca href=\u0022https://drive.google.com/file/d/0BzPO9eXfO6xGazR0SnhYSEE2MjQ/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/file/d/0BzPO9eXfO6xGazR0SnhYSEE2MjQ/edit?usp=sharing\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELooking through the logs there are a large number of Null Reference Exceptions starting with the second flight. KCT mentions some errors with the Crew Selection GUI (which I\u0027ve already fixed in the latest version, but which don\u0027t have any real effect). The NRE\u0027s mentioned are with the PersistentEmitterManager.FixedUpdate(), which seems to be a KSP function. Then it appears as if you reverted several times, with the same errors, then only in the last two flight attempts does it mention anything with KCT (with the OnDestroy event, but specifically with trying to get the active vessel (I may need to add a check for if FlightGlobals is null, but it shouldn\u0027t be during a flight). It all seems to be spurred on from an initial error when going from the Space Center to Flight, but nothing mentioned with KCT (though KCT initiates the change, so it\u0027s entirely possible it\u0027s at fault). \u003C/p\u003E\u003Cp\u003EIs this only with a specific ship? Is it only with the second flight?\u003C/p\u003E\u003Cp\u003E(I\u0027ve found that even if KCT is never mentioned, there\u0027s a decent chance it is still at fault. There are so many weird bugs with KSP that can get called upon by seemingly normal things with KCT)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022montyben101\u0022 data-cite=\u0022montyben101\u0022\u003E\u003Cdiv\u003EOk i think i get it now, ships cost build points and then after they are complete the build points are returned to be used again on a different craft?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot quite. Build Points are just a convenient way to describe the complexity/cost of the vessel. They aren\u0027t a \u0022tangible\u0022 thing, per se. When a ship is being built it is done so at a rate of X Build Points per second (the default at this time is 1BP/s but can be upgraded). When the progress exceeds the number of Build Points that a ship is worth, the ship is finished. It should be pretty clear when you start playing with it. The total amount of time that a ship will take to complete (in seconds) is just the number of Build Points divided by the rate.\u003C/p\u003E\u003Cp\u003EIt\u0027s basically a unit of time, and prior to the upgrades update it was just the total time (since before upgrades there was only a single 1 BP/s rate per building). So just think of it like the total build time.\u003C/p\u003E\u003Cp\u003EEdit: Ninja\u0027d and with a response that was probably clearer than mine \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-02T16:17:32Z\u0022 title=\u002207/02/2014 04:17  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 2, 2014\u003C/time\u003E by magico13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"montyben101","CreatedById":74173,"CreatedDateTime":"2014-07-02T16:30:19Z","Content":"\n\u003Cp\u003ERight i just launched a craft and even though i selected crew only the commanding (root part) was filled with crew and not the crew container below?\u003C/p\u003E\u003Cp\u003E(400th post!)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-02T17:38:27Z\u0022 title=\u002207/02/2014 05:38  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 2, 2014\u003C/time\u003E by montyben101\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-07-02T17:17:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022montyben101\u0022 data-cite=\u0022montyben101\u0022\u003E\u003Cdiv\u003ERight i just launched a craft and even though i selected crew only the commanding (root part) was filled with crew and not the crew container below?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUsing the launch button from the Build List I\u0027m assuming? The Crew Select GUI has a ton of bugs that no one has ever reported that I\u0027m working on fixing. It depends on the parts being ordered the same way in the file as in flight, which may not be the case (or the code is just messed up) as I\u0027ve seen similar issues (it was trying to assign crew to the radiators...). The debug log would likely contain some text saying that KCT tried to assign crew to a part but it exceeded the crew capacity. I\u0027ll likely be rewriting that code for the next version. In the mean time, you may need to use Crew Manifest or Ship Manifest. I\u0027d like to get that update out in a few days though, if not as soon as later today.\u003C/p\u003E\n"},{"CreatedByName":"montyben101","CreatedById":74173,"CreatedDateTime":"2014-07-02T17:38:09Z","Content":"\n\u003Cp\u003EWe\u0027ll apart from said bugs this mod is amazing! It adds so much more to the game than just launch crafts whenever you want!\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-07-02T21:01:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003ELooking through the logs there are a large number of Null Reference Exceptions starting with the second flight. KCT mentions some errors with the Crew Selection GUI (which I\u0027ve already fixed in the latest version, but which don\u0027t have any real effect). The NRE\u0027s mentioned are with the PersistentEmitterManager.FixedUpdate(), which seems to be a KSP function. Then it appears as if you reverted several times, with the same errors, then only in the last two flight attempts does it mention anything with KCT (with the OnDestroy event, but specifically with trying to get the active vessel (I may need to add a check for if FlightGlobals is null, but it shouldn\u0027t be during a flight). It all seems to be spurred on from an initial error when going from the Space Center to Flight, but nothing mentioned with KCT (though KCT initiates the change, so it\u0027s entirely possible it\u0027s at fault). \u003Cp\u003EIs this only with a specific ship? Is it only with the second flight?\u003C/p\u003E\u003Cp\u003E(I\u0027ve found that even if KCT is never mentioned, there\u0027s a decent chance it is still at fault. There are so many weird bugs with KSP that can get called upon by seemingly normal things with KCT)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn the specific case of these logs there should have only been one flight which was reverted twice, with the second one being the one where everything stopped working. I was trying to land on the Moon and my dV budget was a lot tighter than I should have allowed for so my descent stage kept running out of fuel at about 100m-200m and I was trying different profiles to try and get it down. Anyway, my thinking based on the nature of the failure (all of the buttons ceasing to function) that this *may* be related to KCT\u0027s disabling of the launch button. I haven\u0027t had a chance to look through your code at all, but are you managing the click event or are you disabling the button in a different manner?\u003C/p\u003E\u003Cp\u003EAs for KCT being at fault even though it might not be mentioned, I can believe that, though I definitely wouldn\u0027t rule out negative interactions with other mods. It seems that KCT does, however, have a bad habit of exacerbating issues with other mods that KSP might be able to ignore otherwise such as the camera issues with MechJeb.\u003C/p\u003E\u003Cp\u003EEDIT: I guess I\u0027ll just have to avoid reverting as much as possible from now on.\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-07-02T22:24:14Z","Content":"\n\u003Cp\u003EThe disabling of the launch button in the editor is performed by setting a control lock (visible in the debug menu if you have it display all the current locks). The code for that is InputLockManager.SetControlLock(ControlTypes.EDITOR_LAUNCH, \u0022KCTLaunchLock\u0022); and is the same thing that KSP does when you open the Load menu in the editor. Simulating from the editor is performed with this function: EditorLogic.fetch.launchVessel(); along with some additional locks (quicksave and quickload, along with vessel switching in the public version [removed in the new update]). Launching from the Build List is performed with these two functions (the first is part of the GUI [specifically the VAB storage], the second is contained within the KCT_BuildListVessel class): \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E                    if (GUILayout.Button(\u0022Launch\u0022, GUILayout.ExpandWidth(false)))\u003Cbr\u003E                    {\u003Cbr\u003E                        KCT_GameStates.launchedVessel = b;\u003Cbr\u003E                        if (ShipAssembly.CheckLaunchSiteClear(HighLogic.CurrentGame.flightState, \u0022LaunchPad\u0022, false))\u003Cbr\u003E                        {\u003Cbr\u003E                            if (!IsCrewable(b.ExtractedParts))\u003Cbr\u003E                                b.Launch();\u003Cbr\u003E                            else\u003Cbr\u003E                            {\u003Cbr\u003E                                showBuildList = false;\u003Cbr\u003E                                centralWindowPosition.height = 1;\u003Cbr\u003E                                KCT_GameStates.launchedCrew.Clear();\u003Cbr\u003E                                partNames = KCT_GameStates.launchedVessel.GetPartNames();\u003Cbr\u003E                                parts = KCT_GameStates.launchedVessel.ExtractedParts;\u003Cbr\u003E                                pseudoParts = KCT_GameStates.launchedVessel.GetPseudoParts();\u003Cbr\u003E                                KCT_GameStates.launchedCrew = new List\u0026lt;CrewedPart\u0026gt;();\u003Cbr\u003E                                foreach (PseudoPart pp in pseudoParts)\u003Cbr\u003E                                    KCT_GameStates.launchedCrew.Add(new CrewedPart(pp.uid, new List\u0026lt;ProtoCrewMember\u0026gt;()));\u003Cbr\u003E\u003Cbr\u003E                                showShipRoster = true;\u003Cbr\u003E                            }\u003Cbr\u003E                        }\u003Cbr\u003E                        else\u003Cbr\u003E                        {\u003Cbr\u003E                            showBuildList = false;\u003Cbr\u003E                            showClearLaunch = true;\u003Cbr\u003E                        }\u003Cbr\u003E                    }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic void Launch()\u003Cbr\u003E{\u003Cbr\u003E      KCT_GameStates.flightSimulated = false;\u003Cbr\u003E      string tempFile = KSPUtil.ApplicationRootPath \u002B \u0022saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/Ships/temp.craft\u0022;\u003Cbr\u003E      shipNode.Save(tempFile);\u003Cbr\u003E      FlightDriver.StartWithNewLaunch(tempFile, flag, launchSite, new VesselCrewManifest()); //flag is the location of the flag as set by the editor, launchSite is either \u0022launchpad\u0022 or \u0022runway\u0022, the last thing is an empty crew list since the crew selection gui takes care of that\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(All code here is from the development version. There are slight changes from the current public version, which is available on the main branch of the github page [this is all on the dev-branch])\u003C/p\u003E\u003Cp\u003EAS you can see, I don\u0027t really ever understand all the issues with launching as of late since the functions I use are part of KSP. The one time I tried writing my own it never worked.\u003C/p\u003E\u003Cp\u003EThe buttons ceasing to function is likely KSP failing to execute the functions required for scene change (same thing happens when the persistence fails to save). The log shows 10 total changes to flight scenes, the first being fine but starting with the second there were issues. 8 of them are from flight to flight after the flight that had issues. Some of them are this short \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E [HighLogic]: =========================== Scene Change : From FLIGHT to FLIGHT =====================\u003Cbr\u003E\u003Cbr\u003ETac.LifeSupportController[FFED6468][2541.58]: Game scene load requested: FLIGHT\u003Cbr\u003E\u003Cbr\u003ENullReferenceException\u003Cbr\u003E  at (wrapper managed-to-native) UnityEngine.GameObject:get_transform ()\u003Cbr\u003E  at PersistentEmitterManager.OnSceneChange (GameScenes scene) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at EventData\u00601[GameScenes].Fire (GameScenes data) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at HighLogic.LoadScene (GameScenes scene) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at FlightDriver.RevertToLaunch () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at PauseMenu.drawRevertOptions () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at MultiOptionDialog.drawContent (Int32 id) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at UnityEngine.GUILayout\u002BLayoutedWindow.DoWindow (Int32 windowID) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at UnityEngine.GUI.CallWindowDelegate (UnityEngine.WindowFunction func, Int32 id, UnityEngine.GUISkin _skin, Int32 forceRect, Single width, Single height, UnityEngine.GUIStyle style) [0x00000] in \u0026lt;filename unknown\u0026gt;:0  \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThough I am now seeing a change between this later one and the initial errors, as this one mentions an issue with reverting and the initial one references an error with FlightDriver.StartAndFocusVessel (but more specifically with the PersistentEmitterManager)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ENullReferenceException\u003Cbr\u003E  at (wrapper managed-to-native) UnityEngine.GameObject:get_transform ()\u003Cbr\u003E  at PersistentEmitterManager.OnSceneChange (GameScenes scene) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at EventData\u00601[GameScenes].Fire (GameScenes data) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at HighLogic.LoadScene (GameScenes scene) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at FlightDriver.StartAndFocusVessel (.Game stateToLoad, Int32 vesselToFocusIdx) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at QuickSaveLoad.quickLoad (System.String filename, System.String folder) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at QuickSaveLoad.onHoldComplete () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003ENullReferenceException\u003Cbr\u003E  at (wrapper managed-to-native) UnityEngine.GameObject:get_transform ()\u003Cbr\u003E  at PersistentEmitterManager.FixedUpdate () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"}]}