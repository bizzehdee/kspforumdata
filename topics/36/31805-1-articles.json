{"TopicId":31805,"ForumId":36,"TopicTitle":"Anyone got the new 0.20 attachment nodes working yet?","CreatedByName":"Razchek","CreatedById":62645,"CreatedDateTime":"2013-06-07T04:33:10Z","PageNum":1,"Articles":[{"CreatedByName":"Razchek","CreatedById":62645,"CreatedDateTime":"2013-06-07T04:33:10Z","Content":"\n\u003Cp\u003E[RESOLVED] Sort-of. The nodes themselves are broken.\u003C/p\u003E\u003Cp\u003EConstruct your attach nodes as follows:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ENODE\u003Cbr\u003E{\u003Cbr\u003E    name = top\u003Cbr\u003E    transform = myTransform\u003Cbr\u003E    size = 1 // this is not used - ksp bug.\u003Cbr\u003E    method = FIXED_JOINT // this is not used - ksp bug.\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EMake sure the transform is a child of the part-tools game object and that the transform has the blue arrow (Z) pointing down away from the attach point. I.e. Down if you place it at the top of a model.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E---- Resolved, the post below is the original post ----\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve been playing around with the new attach method but have yet to get the node in-game.\u003C/p\u003E\u003Cp\u003ECommenting out the old attach code and trying the new stuff is not working.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// --- node definitions ---\u003Cbr\u003E// definition format is Position X, Position Y, Position Z, Up X, Up Y, Up Z\u003Cbr\u003E//node_stack_top = \t0.0,  0.5, 0.0, 0.0, 1.0, 0.0, 2\u003Cbr\u003E//node_stack_bottom = \t0.0, -0.5, 0.0, 0.0, 1.0, 0.0, 2\u003Cbr\u003EATTACH\u003Cbr\u003E{\u003Cbr\u003E   name = top\u003Cbr\u003E   transformName = topNodeTransform\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe hierarchy in Unity:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPartTools Object\u003Cbr\u003E|- myPartModel\u003Cbr\u003E|-- myPartMeshes\u003Cbr\u003E|-- ...\u003Cbr\u003E|- topNodeTransform\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve also tried making the transform a child of the mesh:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPartTools Object\u003Cbr\u003E|- myPartModel\u003Cbr\u003E|-- myPartMeshes\u003Cbr\u003E|-- ...\u003Cbr\u003E|-- topNodeTransform\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe empty GameObject that I\u0027m using for the transform has been tried with all axis facing \u0027up\u0027 (and of course positioned at the top of the model).\u003C/p\u003E\u003Cp\u003EI\u0027ve tried tagging the transform on a couple of different layers with no luck.\u003C/p\u003E\u003Cp\u003EAnyone else had any success? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-27T02:03:25Z\u0022 title=\u002206/27/2013 02:03  AM\u0022 data-short=\u002211 yr\u0022\u003EJune 27, 2013\u003C/time\u003E by Razchek\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2013-06-12T01:37:32Z","Content":"\n\u003Cp\u003ENope. Zero success. I really wish there was more documentation than what was given.\u003C/p\u003E\n"},{"CreatedByName":"Devo","CreatedById":22750,"CreatedDateTime":"2013-06-12T01:49:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sirkut\u0022 data-cite=\u0022sirkut\u0022\u003E\u003Cdiv\u003ENope. Zero success. I really wish there was more documentation than what was given.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cem\u003ESome \u003C/em\u003Einformation would be better than\u003Cem\u003E none at all\u003C/em\u003E, I agree.\u003C/p\u003E\n"},{"CreatedByName":"Fel","CreatedById":57121,"CreatedDateTime":"2013-06-12T03:40:37Z","Content":"\n\u003Cp\u003ETry \u0022transform\u0022 instead of \u0022transformName\u0022 (Calling \u0022Part.AddAttachNode(null)\u0022 returned: \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EPart: Cannot add attach node. Node requires a \u0027name\u0027 value.\u003Cp\u003EPart: Cannot add attach node. Node requires a \u0027transform\u0027 value.\u003C/p\u003E\u003Cp\u003EPart: Cannot add attach node. Transform of name \u0027\u0027\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EStill, this doesn\u0027t seem to be called OnAwake (I should see an error in the DebugLog).... hence try this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPAddon(KSPAddon.Startup.MainMenu, false)]\u003Cbr\u003Epublic class thingy : UnityEngine.MonoBehaviour {\u003Cbr\u003E\tprivate static bool initKerbal = false;\u003Cbr\u003E\u003Cbr\u003E\tpublic void Update() {\u003Cbr\u003E\t\tif (initKerbal == false) {\u003Cbr\u003E\t\t\tinitKerbal = true;\u003Cbr\u003E\u003Cbr\u003E\t\t\tConfigNode hi = new ConfigNode(\u0022Attach\u0022);\u003Cbr\u003E\t\t\thi.AddValue(\u0022name\u0022,\u0022top\u0022);\u003Cbr\u003E\t\t\thi.AddValue(\u0022transform\u0022,\u0022topNodeTransform\u0022);\u003Cbr\u003E\t\t\tPartLoader.getPartInfoByName(\u0022mk1pod\u0022).partPrefab.AddAttachNode(hi);\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E*** I don\u0027t have all that modeling stuff (and really don\u0027t want it), so I don\u0027t have something I can test on.\u003C/p\u003E\n"},{"CreatedByName":"Razchek","CreatedById":62645,"CreatedDateTime":"2013-06-12T05:35:43Z","Content":"\n\u003Cp\u003E-snip- double post\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-18T13:37:28Z\u0022 title=\u002206/18/2013 01:37  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 18, 2013\u003C/time\u003E by Razchek\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Razchek","CreatedById":62645,"CreatedDateTime":"2013-06-12T06:21:42Z","Content":"\n\u003Cp\u003EI decided to take another whack at it and figured it out..\u003C/p\u003E\u003Cp\u003EConstruct your \u0027attachment\u0027 nodes like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ENODE\u003Cbr\u003E{\u003Cbr\u003E   name = top\u003Cbr\u003E   transform = topTransform // Or whatever your transform name is.\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESize and Method are not being respected, so they will just be place-holders until it\u0027s fixed in the AttachNode class.\u003C/p\u003E\u003Cp\u003E--edit\u003C/p\u003E\u003Cp\u003EShould have edited previous post, sorry.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-18T13:37:52Z\u0022 title=\u002206/18/2013 01:37  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 18, 2013\u003C/time\u003E by Razchek\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2013-06-12T10:57:07Z","Content":"\n\u003Cp\u003EWas there anything special that needed to be done to the game object in unity for it to work aside of having the name correct?\u003C/p\u003E\n"},{"CreatedByName":"Razchek","CreatedById":62645,"CreatedDateTime":"2013-06-12T11:04:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sirkut\u0022 data-cite=\u0022sirkut\u0022\u003E\u003Cdiv\u003EWas there anything special that needed to be done to the game object in unity for it to work aside of having the name correct?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMake sure the transform is a child of the part-tools gameobject and that the transform has the blue arrow (Z) pointing down away from the attach point. I.e. Down if you place it at the top of a model.\u003C/p\u003E\u003Cp\u003EDon\u0027t expect the new nodes to work properly yet though, there are other problems with the nodes it seems. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EFor one, both size \u0026amp; method fields are not used. Size is always 0, method is always FIXED_JOINT.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-12T11:25:05Z\u0022 title=\u002206/12/2013 11:25  AM\u0022 data-short=\u002211 yr\u0022\u003EJune 12, 2013\u003C/time\u003E by Razchek\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2013-06-12T15:00:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Razchek\u0022 data-cite=\u0022Razchek\u0022\u003E\u003Cdiv\u003EMake sure the transform is a child of the part-tools gameobject and that the transform has the blue arrow (Z) pointing down away from the attach point. I.e. Down if you place it at the top of a model.\u003Cp\u003EDon\u0027t expect the new nodes to work properly yet though, there are other problems with the nodes it seems. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EFor one, both size \u0026amp; method fields are not used. Size is always 0, method is always FIXED_JOINT.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAhhhh. The arrow pointing down. That was the trick. I had the node code figured out already I just didn\u0027t have the silly arrow pointed in the right way. It was late last night when I was going through this and must have forgotten to try pointing the arrow down. :/\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2013-06-13T12:47:33Z","Content":"\n\u003Cp\u003ELooking at the code I think \u0027method\u0027 is in being passed correctly. I still have no idea what the methods actually do though.\u003C/p\u003E\n"},{"CreatedByName":"Razchek","CreatedById":62645,"CreatedDateTime":"2013-06-13T13:57:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sirkut\u0022 data-cite=\u0022sirkut\u0022\u003E\u003Cdiv\u003ELooking at the code I think \u0027method\u0027 is in being passed correctly. I still have no idea what the methods actually do though.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI first tested it with a plugin, the method parameter is not used in-game. \u003Cem\u003E-snip-\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EThe method field determines how the physics will handle the connected part relative to the joint, I think. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFIXED_JOINT, // Standard stacking attachment\u003Cbr\u003EHINGE_JOINT, // Standard surface attachment\u003Cbr\u003ELOCKED_JOINT,\u003Cbr\u003EMERGED_PHYSICS,\u003Cbr\u003ENO_PHYSICS,\u003Cbr\u003ENONE\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-18T13:38:37Z\u0022 title=\u002206/18/2013 01:38  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 18, 2013\u003C/time\u003E by Razchek\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2013-06-16T00:28:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Razchek\u0022 data-cite=\u0022Razchek\u0022\u003E\u003Cdiv\u003EI first tested it with a plugin, the method parameter is not used in-game. Later checking the code proved it. \u003Cp\u003EIf you look at the AttachNode class initializer overload with params you will see before the method returns the code just assigns \u0022FIXED_JOINT\u0022 to the method parameter, the original param never leaves the method scope and doesn\u0027t get assigned to the public field. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe method field determines how the physics will handle the connected part relative to the joint, I think. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFIXED_JOINT, // Standard stacking attachment\u003Cbr\u003EHINGE_JOINT, // Standard surface attachment\u003Cbr\u003ELOCKED_JOINT,\u003Cbr\u003EMERGED_PHYSICS,\u003Cbr\u003ENO_PHYSICS,\u003Cbr\u003ENONE\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYup. You are correct. I completely missed that part. I guess that\u0027s why it doesn\u0027t work because it snuck past someone else. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"KhaosCorp","CreatedById":61149,"CreatedDateTime":"2013-08-04T04:45:20Z","Content":"\n\u003Cp\u003EHas anyone tried using this type of node definition along with the standard definitions?\u003C/p\u003E\u003Cp\u003EI understand unity defined nodes are not functioning properly yet, just curious.\u003C/p\u003E\n"},{"CreatedByName":"codepoet","CreatedById":73449,"CreatedDateTime":"2014-01-09T20:56:32Z","Content":"\n\u003Cp\u003EI think that this is the place to find some solutions for the problems I am experiencing. I and writing a part that I hope will have multiple surface attachment nodes. Indeed I hope it will have a variable number of these. I had planned to just make a call to AddAttachNode, but the config to pass to it is proving to be a bit tricky. In particular I get errors about the transform. Do I have to define the transform in unity, or is there a way that I can define / create it and use it on the fly to created multiple attachment nodes is various locations at runtime?\u003C/p\u003E\u003Cp\u003EThanks in advance \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}