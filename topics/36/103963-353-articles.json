{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":353,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-01T13:28:53Z","Content":"\u003E \n\u003E \n\u003E On 7/28/2020 at 7:44 PM, mor128 said:\n\u003E \n\u003E \n\u003E I had Scatterer \u002B Astronomer\u0027s installed with and without the .dll in my 1.10 game and I am getting some flickering oceans at high altitudes in a small square around engine exhausts. I uninstalled Scatterer to wait for the official 1.10 version but I could reinstall scatterer and provide the log \u002B screenshot if that would help.\n\u003E \n\nScreens?"},{"CreatedByName":"Munarmunar","CreatedById":197726,"CreatedDateTime":"2020-08-01T15:03:15Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E Screens?\n\u003E \n\n![bAqN9LN.png](https://i.imgur.com/bAqN9LN.png)Taken on 1.9.1, the same happened on 1.10.1."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-01T15:21:18Z","Content":"\u003E \n\u003E \n\u003E 17 minutes ago, Munarmunar said:\n\u003E \n\u003E \n\u003E [![bAqN9LN.png](https://i.imgur.com/bAqN9LN.png)](https://i.imgur.com/bAqN9LN.png \u0022Enlarge image\u0022)Taken on 1.9.1, the same happened on 1.10.1.\n\u003E \n\nSo what do engine exhausts have to do with this? Seems like it\u0027s happening everywhere."},{"CreatedByName":"Munarmunar","CreatedById":197726,"CreatedDateTime":"2020-08-01T15:22:04Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E So what do engine exhausts have to do with this? Seems like it\u0027s happening everywhere.\n\u003E \n\nNo no, it\u0027s not the engine exhaust but the water itself"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-01T15:25:04Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Munarmunar said:\n\u003E \n\u003E \n\u003E No no, it\u0027s not the engine exhaust but the water itself\n\u003E \n\nAh ok, the other person who reported this said it was around engine exhausts. Looks like z-fighting, this is with scatterer 0.0610? Which other mods and which versions? And was this working on 1.8 with the same configs?"},{"CreatedByName":"Munarmunar","CreatedById":197726,"CreatedDateTime":"2020-08-01T15:31:22Z","Content":"\u003E \n\u003E \n\u003E 23 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Ah ok, the other person who reported this said it was around engine exhausts. Looks like z-fighting, this is with scatterer 0.0610? Which other mods and which versions? And was this working on 1.8 with the same configs?\n\u003E \n\nYeah it\u0027s with Scatterer 0.0610, the only visual mods that i had (?) were SVE (and its dependencies) and \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, everything updated to the latest version. I haven\u0027t tested 1.8 myself so idk\n\n**Edited \u003Ctime datetime=\u00222020-08-01T15:48:08Z\u0022 title=\u002208/01/2020 03:48  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 1, 2020\u003C/time\u003E by Munarmunar**"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2020-08-01T15:56:39Z","Content":"Odd... It almost looks like there an \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E cloud layer at water level. Not sure what that is but I haven\u0027t seen it using Spectra/Scatterer."},{"CreatedByName":"Munarmunar","CreatedById":197726,"CreatedDateTime":"2020-08-01T16:20:04Z","Content":"\u003E \n\u003E \n\u003E 23 minutes ago, Avera9eJoe said:\n\u003E \n\u003E \n\u003E Odd... It almost looks like there an \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E cloud layer at water level. Not sure what that is but I haven\u0027t seen it using Spectra/Scatterer.\n\u003E \n\nWeird... I could try with other visual addons, maybe it is an SVE issue, but i wouldn\u0027t say so, idk"},{"CreatedByName":"VoidSquid","CreatedById":196199,"CreatedDateTime":"2020-08-01T17:48:48Z","Content":"I\u0027m not having any issues with Scatterer, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, SVE, a friend of mine though does. Turned out he\u0027s using Windows 10 with DX12 (or at least 11.2), while I\u0027m using Windows 7 with DX11 incl. the Platform Update - maybe this is related to the reported issues?"},{"CreatedByName":"Munarmunar","CreatedById":197726,"CreatedDateTime":"2020-08-01T19:02:05Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, VoidSquid said:\n\u003E \n\u003E \n\u003E I\u0027m not having any issues with Scatterer, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, SVE, a friend of mine though does. Turned out he\u0027s using Windows 10 with DX12 (or at least 11.2), while I\u0027m using Windows 7 with DX11 incl. the Platform Update - maybe this is related to the reported issues?\n\u003E \n\nYeah i\u0027m using Windows 10 with DX12 as well, maybe it is DirectX?\n\n**Edited \u003Ctime datetime=\u00222020-08-01T19:02:16Z\u0022 title=\u002208/01/2020 07:02  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 1, 2020\u003C/time\u003E by Munarmunar**"},{"CreatedByName":"VoidSquid","CreatedById":196199,"CreatedDateTime":"2020-08-01T19:05:50Z","Content":"Curious: have you tried forcing DX11, i.e. launching KSP with \u0022-force-d3d11\u0022 ?"},{"CreatedByName":"Munarmunar","CreatedById":197726,"CreatedDateTime":"2020-08-01T19:22:23Z","Content":"\u003E \n\u003E \n\u003E 16 minutes ago, VoidSquid said:\n\u003E \n\u003E \n\u003E Curious: have you tried forcing DX11, i.e. launching KSP with \u0022-force-d3d11\u0022 ?\n\u003E \n\nNope"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2020-08-01T20:41:13Z","Content":"DX could be a culprit, Blackrack has had problems with DX vs opengl in the past for different OS\n\n**Edited \u003Ctime datetime=\u00222020-08-01T20:41:33Z\u0022 title=\u002208/01/2020 08:41  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 1, 2020\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"R-T-B","CreatedById":200868,"CreatedDateTime":"2020-08-01T22:04:48Z","Content":"I experienced this as well on JNSQ but assumed (perhaps correctly) it was an \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E bug.  Using the scatterer ocean shaders mostly kills it."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-02T11:24:52Z","Content":"\u003E \n\u003E \n\u003E 13 hours ago, R-T-B said:\n\u003E \n\u003E \n\u003E I experienced this as well on JNSQ but assumed (perhaps correctly) it was an \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E bug.  Using the scatterer ocean shaders mostly kills it.\n\u003E \n\nOk so I tested and this happens with stock with the ocean shaders off, thanks for the report guys. Also happens on 1.9\n\n**Edited \u003Ctime datetime=\u00222020-08-02T11:41:51Z\u0022 title=\u002208/02/2020 11:41  AM\u0022 data-short=\u00223 yr\u0022\u003EAugust 2, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-02T12:33:45Z","Content":"\u003E \n\u003E \n\u003E On 7/3/2020 at 10:43 PM, OrbitalManeuvers said:\n\u003E \n\u003E \n\u003E Hi ... not sure how interested you\u0027ll be in this, but I\u0027m currently testing Kopernicus Continued, on 1.10 with JNSQ 0.90.0. With that bare bones config, the visuals are correct. Adding scatterer causes the water on Kerbin to disappear. I\u0027ve tested this by copying my scatterer folder from a working 1.8.1 install, and replacing the DLL with the one you linked a few messages back, built 7/3. The water can be fixed by disabling the Ocean Shaders option and restarting.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027ve put log files for two runs on my google drive if you\u0027re interested. One run is starting with ocean shaders on, the other with them option off. The larger log contains more shiz because I launched a capsule just to make sure it was the same in the flight scene as the space center scene.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://drive.google.com/drive/folders/1A_Gn6nW1teghxLQTpvVmr1j9wVBQz-ZK?usp=sharing](https://drive.google.com/drive/folders/1A_Gn6nW1teghxLQTpvVmr1j9wVBQz-ZK?usp=sharing)\n\u003E \n\u003E \n\u003E \u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022200888\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed5403536262\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/194936-191-kopernicus-continued/\u0026do=embed\u0022 style=\u0022height:208px;max-width:500px;\u0022\u003E\u003C/iframe\u003E\n\u003E \n\nSo I\u0027m not getting this issue, downloaded JNSQ 0.90.0 and the latest download of Kopernicus Continued, and the ocean is working correctly.\n\nEdited: NVM I had the wrong version of Kopernicus Continued, let me try again.\n\nEdited again: Nope, works fine, no problems\n\n**Edited \u003Ctime datetime=\u00222020-08-02T12:40:43Z\u0022 title=\u002208/02/2020 12:40  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 2, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-02T12:57:07Z","Content":"So guys I couldn\u0027t reproduce the issue reported above with JNSQ, but I fixed the issue with the stock ocean reported above.\n\nOther than that I found no other issues on 1.10, I played for a while and it all seems pretty stable.\n\nI\u0027m going to package a release with what I have now, and if there are issues you can report them and I will fix them when I have time."},{"CreatedByName":"Munarmunar","CreatedById":197726,"CreatedDateTime":"2020-08-02T13:12:39Z","Content":"\u003E \n\u003E \n\u003E 14 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E So guys I couldn\u0027t reproduce the issue reported above with JNSQ, but I fixed the issue with the stock ocean reported above.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Other than that I found no other issues on 1.10, I played for a while and it all seems pretty stable.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m going to package a release with what I have now, and if there are issues you can report them and I will fix them when I have time.\n\u003E \n\nNice, thanks!  \n\nI\u0027ve got to play with shaders off because it burns my GPU a little, but otherwise, scatterer is awesome ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)"},{"CreatedByName":"DasSkelett","CreatedById":188118,"CreatedDateTime":"2020-08-02T13:30:28Z","Content":"Heyho [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), did you use a different software to create the zip file for this release than you did in the past?\n\nThe NetKAN bot gets the following error trying to open the file to index it:\n\n\u003E \n\u003E \n\u003E Quote\n\u003E \n\u003E \n\u003E [https://spacedock.info/mod/141/scatterer/download/0.0621](https://spacedock.info/mod/141/scatterer/download/0.0621) is not a valid ZIP file: Error in step EntryHeader for GameData/scatterer/config/config.cfg: Exception during test - \u0027Compression method not supported\u0027\n\u003E \n\n**Edited \u003Ctime datetime=\u00222020-08-02T13:37:51Z\u0022 title=\u002208/02/2020 01:37  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 2, 2020\u003C/time\u003E by DasSkelett**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-02T13:46:32Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, DasSkelett said:\n\u003E \n\u003E \n\u003E Heyho [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), did you use a different software to create the zip file for this release than you did in the past?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The NetKAN bot gets the following error trying to open the file to index it:\n\u003E \n\nI did, I\u0027ll revert back to the old one.\n\nEdited: done\n\n**Edited \u003Ctime datetime=\u00222020-08-02T14:49:35Z\u0022 title=\u002208/02/2020 02:49  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 2, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"OrbitalManeuvers","CreatedById":190887,"CreatedDateTime":"2020-08-03T06:20:03Z","Content":"\u003E \n\u003E \n\u003E 17 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E So I\u0027m not getting this issue, downloaded JNSQ 0.90.0 and the latest download of Kopernicus Continued, and the ocean is working correctly.\n\u003E \n\nOK, I\u0027m back on 1.8.1, with released versions of everything. With a bare-bones JNSQ/AVP installation, scatterer does not render water for me until I turn off the ocean shader. But let\u0027s ignore that for a sec ... I\u0027m also getting a debug log spam message from scatterer. Maybe you can help me figure this one out and see if it leads to something that I\u0027ve installed wrong, etc. Here\u0027s a link to the log file, which should have a list of the mods?\n\n[https://drive.google.com/drive/folders/1WE8T87K4zcIEqRzjhTQRYjPRVyRfI3KO?usp=sharing](https://drive.google.com/drive/folders/1WE8T87K4zcIEqRzjhTQRYjPRVyRfI3KO?usp=sharing)\n\nThe repeated message is \n\n[EXC 23:01:54.599] NullReferenceException: Object reference not set to an instance of an object  \n\n    scatterer.SkyNode.UpdateStuff () (at \u003Cc242f3d90315428492d244d6912c4c64\u003E:0)\u003Cbr\u003E\n    scatterer.SkyNode.OnPreRender () (at \u003Cc242f3d90315428492d244d6912c4c64\u003E:0)\u003Cbr\u003E\n    UnityEngine.DebugLogHandler:LogException(Exception, Object)\u003Cbr\u003E\n    ModuleManager.UnityLogHandle.InterceptLogHandler:LogException(Exception, Object)\u003Cbr\u003E\n    UnityEngine.Debug:CallOverridenDebugHandler(Exception, Object)\u003Cbr\u003E\n \n\u003C/c242f3d90315428492d244d6912c4c64\u003E\u003C/c242f3d90315428492d244d6912c4c64\u003E\n\nAny ideas?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-03T09:10:50Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, OrbitalManeuvers said:\n\u003E \n\u003E \n\u003E OK, I\u0027m back on 1.8.1, with released versions of everything. With a bare-bones JNSQ/AVP installation, scatterer does not render water for me until I turn off the ocean shader. But let\u0027s ignore that for a sec ... I\u0027m also getting a debug log spam message from scatterer. Maybe you can help me figure this one out and see if it leads to something that I\u0027ve installed wrong, etc. Here\u0027s a link to the log file, which should have a list of the mods?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://drive.google.com/drive/folders/1WE8T87K4zcIEqRzjhTQRYjPRVyRfI3KO?usp=sharing](https://drive.google.com/drive/folders/1WE8T87K4zcIEqRzjhTQRYjPRVyRfI3KO?usp=sharing)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The repeated message is \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [EXC 23:01:54.599] NullReferenceException: Object reference not set to an instance of an object  \n\u003E \n\u003E     scatterer.SkyNode.UpdateStuff () (at \u003Cc242f3d90315428492d244d6912c4c64\u003E:0)\u003Cbr\u003E\n\u003E     scatterer.SkyNode.OnPreRender () (at \u003Cc242f3d90315428492d244d6912c4c64\u003E:0)\u003Cbr\u003E\n\u003E     UnityEngine.DebugLogHandler:LogException(Exception, Object)\u003Cbr\u003E\n\u003E     ModuleManager.UnityLogHandle.InterceptLogHandler:LogException(Exception, Object)\u003Cbr\u003E\n\u003E     UnityEngine.Debug:CallOverridenDebugHandler(Exception, Object)\u003Cbr\u003E\n\u003E  \n\u003E \u003C/c242f3d90315428492d244d6912c4c64\u003E\u003C/c242f3d90315428492d244d6912c4c64\u003E\n\u003E \n\u003E \n\u003E \n\u003E Any ideas?\n\u003E \n\n[LOG 22:56:16.112] [Scatterer][Debug]  Atmosphere config not found for: Kerbin"},{"CreatedByName":"mor128","CreatedById":64046,"CreatedDateTime":"2020-08-03T12:41:31Z","Content":"\u003E \n\u003E \n\u003E On 8/1/2020 at 5:21 PM, blackrack said:\n\u003E \n\u003E \n\u003E So what do engine exhausts have to do with this? Seems like it\u0027s happening everywhere.\n\u003E \n\nI had this z-fighting in a small square around the exhaust effects. The rest of the ocean looked normal. When I cut the engines it was gone. However the new version fixed it for me, too."},{"CreatedByName":"OrbitalManeuvers","CreatedById":190887,"CreatedDateTime":"2020-08-03T13:45:04Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E [LOG 22:56:16.112] [Scatterer][Debug]  Atmosphere config not found for: Kerbin\n\u003E \n\nSorry, what conclusion should I be drawing from this line?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-03T17:37:02Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, OrbitalManeuvers said:\n\u003E \n\u003E \n\u003E Sorry, what conclusion should I be drawing from this line?\n\u003E \n\nThat your Kerbin atmosphere config is missing or named incorrectly, in other words, better reinstall your mods and configs one by one"}]}