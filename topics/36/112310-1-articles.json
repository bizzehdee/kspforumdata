{"TopicId":112310,"ForumId":36,"TopicTitle":"(Answered): Trouble with non-hollow cargo bays?","CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-06-07T22:05:26Z","PageNum":1,"Articles":[{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-06-07T22:05:26Z","Content":"(I\u0027ve left my question post intact for transparency; see the second for the answer.)\n\nI\u0027ve had cargo bays on my mind for a little while now, especially with adding them to deserving parts, but I\u0027ve run into some snags. I think I\u0027ve got the common cause, but I want to get some input from you all.\n\nThe [DP Horizontal Space Bases](https://forum.kerbalspaceprogram.com/threads/100952-DP-Horizontal-Space-Bases!-V0-12-%28Nov26%29-Stock-Alike-Cargo-Bay!) mod has horizontal space base parts, including some cargo bays. I added cargo bay modules to the relevant parts with [my hotfix patch](https://forum.kerbalspaceprogram.com/threads/100952-DP-Horizontal-Space-Bases!-V0-12-%28Nov26%29-Stock-Alike-Cargo-Bay!?p=1997229\u0026viewfull=1#post1997229), but while the inline cargo bay parts properly shield their contents, the leg holder does not. (I\u0027ve been testing the shielding by installing a solar panel, binding it to an action group, and attempting to actuate it while the bay is closed. If the bay is shielding properly, I get the message saying they won\u0027t open while shielded.) I\u0027ve also noticed the same thing with the service fuel tanks from Nertea\u0027s [Near Future Technologies](https://forum.kerbalspaceprogram.com/threads/52042-0-25-Near-Future-Technologies-%2810-10-14-All-packs-0-25-update-fixes%29) and the rugged probe body from Dr. Jet\u0027s [Chop Shop](https://forum.kerbalspaceprogram.com/threads/84443-1-0-Dr-Jet-s-Chop-Shop-v0-7-0-%2829-04-2015%29) (which does not come with ModuleCargoBay, but I\u0027ve been trying to add it).\n\nThe common factor seems to be that none of these parts have hollow interiors. I\u0027ve tried adding extra internal nodes (in the same place as the outer nodes, but in the opposite direction, just like the hollow Mk2 and Mk3 cargo bays have) to give to the ModuleCargoBay, and also tried defining lookupCenter, and while the initial results were promising (a part attached to the interior node of the FL-T6000 was shielded, having a zero/unchanging drag vector when the door was closed), there\u0027s still something missing (a solar panel attached to that part still opened when the door was closed). Is it the extra interior colliders that KSP doesn\u0027t like, or is there something else at work?\n\n**Edited \u003Ctime datetime=\u00222015-06-10T02:40:15Z\u0022 title=\u002206/10/2015 02:40  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 10, 2015\u003C/time\u003E by Kerbas\\_ad\\_astra**"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-06-10T02:42:25Z","Content":"To answer my own question after further study, yes, the interior colliders are causing problems. The issue is that ModuleCargoBay seems to work by raycasting from a central point. When the rays hit a part (other than the service bay itself), the part is protected, but when the rays hit a collider of the service bay part, they stop. (Many thanks to Starwaster for [showing this to me](https://forum.kerbalspaceprogram.com/threads/94427-1-0-2-REVIVED-Zero-Point-Inline-Fairings-v1-0-1-%282015-06-09%29?p=2007013\u0026viewfull=1#post2007013).) When the default center of a part (0,0,0) is inside a collider, the rays are all trapped by the central structure and nothing gets protected. The solution is to define multiple ModuleCargoBays with different lookupCenters in each hollow space of the service bay. For some examples, check out my hotfix patches for [the service tanks from Nertea\u0027s Near Future Spacecraft](https://forum.kerbalspaceprogram.com/threads/52042-1-02-Near-Future-Technologies-%28All-packs-updated-to-1-02-Finally%21%29?p=2008469#post2008469), [the landing leg container from DP Horizontal Bases](https://forum.kerbalspaceprogram.com/threads/100952-DP-Horizontal-Space-Bases%21-V0-12-%28Nov26%29-Stock-Alike-Cargo-Bay%21?p=1997229\u0026viewfull=1#post1997229), and [the rugged rover from Dr. Jet\u0027s Chop Shop](https://forum.kerbalspaceprogram.com/threads/84443-1-0-2-Dr-Jet-s-Chop-Shop-v0-7-2-%2823-05-2015%29?p=2008522\u0026viewfull=1#post2008522).\n\n**Edited \u003Ctime datetime=\u00222015-06-10T03:09:41Z\u0022 title=\u002206/10/2015 03:09  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 10, 2015\u003C/time\u003E by Kerbas\\_ad\\_astra**\n  \nAdded link to Dr. Jet\u0027s Chop Shop hotfix."},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-06-10T03:17:24Z","Content":"That.... wasn\u0027t exactly what I was trying to get across in that post, but if it helped you in implementing cargo bays in other parts then that\u0027s good."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-06-10T03:22:40Z","Content":"Sure -- you were explaining why the Zero-Point fairings were protecting stuff that fell outside of their visual (but non-colliding) boundaries. However, your post gave me an epiphany, and I realized that the problem I was having with these parts is sort of the opposite: the collider in the interior was getting in the way and stopping the part from protecting anything. (In fact, this was probably also the issue I had before defining the lookupCenter in the ZPIF config -- 0,0,0 falls inside the base, which *is* a collider, so the rays were trapped and nothing got protected.)"}]}