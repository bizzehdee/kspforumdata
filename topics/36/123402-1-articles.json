{"TopicId":123402,"ForumId":36,"TopicTitle":"[Tutorial] Soft-Docking Docking Ports","CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2015-10-19T23:35:44Z","PageNum":1,"Articles":[{"CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2015-10-19T23:35:44Z","Content":"\n\u003Cp\u003EAlmost on accident, I\u0027ve figured out how to take advantage of the acquireForce/docking port magnetism, and animated colliders, to make docking ports soft-dock before they hard dock. \u003C/p\u003E\u003Cp\u003EBoth the Apollo and the Soyuz \u0022soft-dock\u0022 before they hard dock. In KSP, the advantage to soft-docking before hard-docking, is that you can rotate your spacecraft to the desired orientation, before you commit to a hard-dock, and join the spacecraft together. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003E\u003Cstrong\u003EReal Life and In-Game Demonstrations\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003EScrub to 17:52 in the ESA video...\u003C/p\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/M2_NeFbFcSw?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/H6ZF02him7w?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022http://imgur.com/4xpMUO0.gif\u0022 alt=\u00224xpMUO0.gif\u0022\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/9pq93Vm.png\u0022 alt=\u00229pq93Vm.png\u0022\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/WI356XJ.gif\u0022 alt=\u0022WI356XJ.gif\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/sh/78afj5zx6ke0d3j/AADxpYbuVX5WEL1NI3Wky898a?dl=1\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003EBeta Dropbox Download\u003C/span\u003E\u003C/strong\u003E\u003C/a\u003E (When you download, please try to break it and make it do ugly things so I can make it better.)\u003C/p\u003E\u003Cp\u003EBasically, what you\u0027re seeing is a basic collision mesh extending and retracting with the probe meshes in Unity. In game, when the probe is extended, and the two docking ports come within their acquire range, the magnetism kicks in, and brings the two docking ports together, but is prevented from docking by the collider in the way. The player can then rotate their spacecraft to their liking, then retract the docking probe, retracting the collider, and allowing the mating faces and dockingNode empties to connect and register as docked. \u003C/p\u003E\u003Cp\u003EThis all came from revamping some docking ports from Beale\u0027s Tantares add-on pack. Next up will be some APAS ports. I don\u0027t have models for them yet, but I know how I\u0027m going to make them work in Unity I believe.\u003C/p\u003E\u003Cp\u003EJust wanted to share this technique with you all. Might make docking more realistic, and more forgiving. No more hoping you\u0027re rotated perfectly, and having to perform multiple docking to get your rotation \u003Cem\u003Ejuuust right.\u003C/em\u003E Now, you can take all the time in the world, and make it look awesome to boot. \u003C/p\u003E\u003Cp\u003EDiscuss. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EFull Modeling credit to Beale, author of the Tantares add-on.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-20T00:15:45Z\u0022 title=\u002210/20/2015 12:15  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 20, 2015\u003C/time\u003E by curtquarquesso\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"davidy12","CreatedById":143411,"CreatedDateTime":"2015-10-20T00:02:20Z","Content":"\n\u003Cp\u003EAwesomeness!!! I wish you\u0027d make an Apollo style docking port. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EPS: How do you install them? I can\u0027t find them anywhere. Can you make a zip for it?\u003C/p\u003E\n"},{"CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2015-10-20T00:07:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022davidy12\u0022 data-cite=\u0022davidy12\u0022\u003E\u003Cdiv\u003EAwesomeness!!! I wish you\u0027d make an Apollo style docking port. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EPS: How do you install them? I can\u0027t find them anywhere. Can you make a zip for it?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUpdated the link to be a Dropbox download. Should work better.\u003C/p\u003E\n"},{"CreatedByName":"xxhansonmaxx","CreatedById":130093,"CreatedDateTime":"2015-10-20T00:10:42Z","Content":"\n\u003Cp\u003EOhhhhh snap your a genius!\u003C/p\u003E\n"},{"CreatedByName":"FungusForge","CreatedById":148313,"CreatedDateTime":"2015-10-20T00:12:46Z","Content":"\n\u003Cp\u003ESoft docking really needs to be a stock thing. However until then I\u0027m downloading this.\u003C/p\u003E\n"},{"CreatedByName":"davidy12","CreatedById":143411,"CreatedDateTime":"2015-10-20T00:18:12Z","Content":"\n\u003Cp\u003EBada bing bada boom. Works like a dream \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-10-20T00:41:57Z","Content":"\n\u003Cp\u003EWay too cool \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI suspect that for the APAS docking ports, since they don\u0027t really have a probe to provide sufficient distance by themselves for soft-docking in KSP, you\u0027re looking into also tweaking the \u003Cstrong\u003EacquireRange\u003C/strong\u003E and \u003Cstrong\u003EcaptureRange\u003C/strong\u003E parameters to suit?\u003C/p\u003E\n"},{"CreatedByName":"theJesuit","CreatedById":122369,"CreatedDateTime":"2015-10-20T00:48:46Z","Content":"\n\u003Cp\u003EWow. So cool. Looking forward to testing out!\u003C/p\u003E\n"},{"CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2015-10-20T01:10:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sumghai\u0022 data-cite=\u0022sumghai\u0022\u003E\u003Cdiv\u003EWay too cool \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EI suspect that for the APAS docking ports, since they don\u0027t really have a probe to provide sufficient distance by themselves for soft-docking in KSP, you\u0027re looking into also tweaking the \u003Cstrong\u003EacquireRange\u003C/strong\u003E and \u003Cstrong\u003EcaptureRange\u003C/strong\u003E parameters to suit?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI may not have to by the looks of it. If you look at where the extending probe collider is, it doesn\u0027t extend very far above the mating surface really. If you look at the APAS-95 and APAS-89 designs, the active docking ring doesn\u0027t extend too far from the structural ring either, so I think my probe collider might be near the right place already. Shouldn\u0027t have to tweak the forces much if at all.\u003C/p\u003E\u003Cp\u003EI think I may add some challenge to the APAS ports by making the guide fins have proper colliders. You won\u0027t have to spin around to align, the guide fins should do it for you.\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2015-10-20T02:48:06Z","Content":"\n\u003Cp\u003EGreat idea! Downloaded.\u003C/p\u003E\u003Cp\u003EI like the alignment fin idea too.\u003C/p\u003E\n"},{"CreatedByName":"davidy12","CreatedById":143411,"CreatedDateTime":"2015-10-20T14:56:18Z","Content":"\n\u003Cp\u003EIt\u0027s still not showing up. I just put the file in the game data folder.\u003C/p\u003E\n"},{"CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2015-10-20T17:50:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022davidy12\u0022 data-cite=\u0022davidy12\u0022\u003E\u003Cdiv\u003EIt\u0027s still not showing up. I just put the file in the game data folder.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThese are beta parts for the Tantares add on, so you\u0027re going to put them in the Tantares folder. Make sure it\u0027s installed. It\u0027s required. Place in Tantares/Parts/SOYUZ. I\u0027ll clarify in the front page. \u003C/p\u003E\u003Cp\u003ERemember, this is really a demo of the whole idea of soft docking in general. The parts matter not really. I want to see if it\u0027s useful, if people like it, and more importantly, if it causes any grief that would make it a bad idea for add-on authors to implement in their own docking port designs.\u003C/p\u003E\n"},{"CreatedByName":"E.Nygma","CreatedById":104703,"CreatedDateTime":"2015-10-20T19:46:40Z","Content":"\n\u003Cp\u003EThis is incredible, I always wanted docking ports to work that way...THANK YOU!\u003C/p\u003E\n"},{"CreatedByName":"RushilP","CreatedById":152433,"CreatedDateTime":"2015-10-20T20:23:58Z","Content":"\n\u003Cp\u003EReally nice docking ports!\u003C/p\u003E\n"},{"CreatedByName":"Cheesecake","CreatedById":138400,"CreatedDateTime":"2015-10-23T06:14:12Z","Content":"\n\u003Cp\u003EIs there a chance to make a plugin for other Dockingports such as Raidernicks Soyuz-Dockingports or CBMs?\u003C/p\u003E\n"},{"CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2015-10-23T06:52:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cheesecake\u0022 data-cite=\u0022Cheesecake\u0022\u003E\u003Cdiv\u003EIs there a chance to make a plugin for other Dockingports such as Raidernicks Soyuz-Dockingports or CBMs?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo. No plugins are required for this. If you look at how it\u0027s done in Unity, it\u0027ll all tricky collider animation. Only way it works is if they\u0027re built and animated that way.\u003C/p\u003E\u003Cp\u003EThe goal of this thread is to show people how to do it in Unity so they can make their own variations.\u003C/p\u003E\n"},{"CreatedByName":"PugzInSpace","CreatedById":151638,"CreatedDateTime":"2015-10-24T02:05:28Z","Content":"\n\u003Cp\u003EAmazing! I\u0027d love to use this in all of my future mods. Thumbs up!\u003C/p\u003E\n"},{"CreatedByName":"Ghosty141","CreatedById":142498,"CreatedDateTime":"2015-10-24T12:34:39Z","Content":"\n\u003Cp\u003EThis looks awesome, alot more realistic than the stock ports.\u003C/p\u003E\n"},{"CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2015-10-24T20:44:45Z","Content":"\n\u003Cp\u003EHey all,\u003C/p\u003E\u003Cp\u003EI have a question regarding the config file for this thing:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleDockingNode\u003Cbr\u003E\tdeployAnimationController = 1\u003Cbr\u003E\treferenceAttachNode = top\u003Cbr\u003E\tnodeType = size1\t\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleAnimateGeneric\u003Cbr\u003E\tanimationName = ProbeExtend\u003Cbr\u003E\tactionGUIName = Toggle Docking Probe\u003Cbr\u003E\tstartEventGUIName = Extend Probe\u003Cbr\u003E\tendEventGUIName = Retract Probe\u003Cbr\u003E\tallowAnimationWhileShielded = False\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe question is, does referenceAttachNode conflict with deployAnimation controller? Is there any reason I can\u0027t have a docking port with a fixed dockingNode have an animation that is only allowed to be toggled while it\u0027s in the undocked state? I have a feeling that you can\u0027t have a docking port that has a referenceAttachNode that also has a deployAnimationController, as none of the stock ports are this way either. \u003C/p\u003E\u003Cp\u003ETL;DR: I need to make sure the animation can\u0027t be toggled while the docking port is in the docked state, just like the stock animated Clamp-O-Trons.\u003C/p\u003E\n"},{"CreatedByName":"_Augustus_","CreatedById":115084,"CreatedDateTime":"2015-10-24T20:48:43Z","Content":"\n\u003Cp\u003EI\u0027m already using this for my Mir-2 station. Good work curt!\u003C/p\u003E\n"},{"CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2015-10-28T20:48:16Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003ESoyuz Docking Mechanism Update:\u003C/strong\u003E (Copy/paste from the Tantares thread.)\u003C/p\u003E\u003Cp\u003ESo, I\u0027ve run into a road block. \u003C/p\u003E\u003Cp\u003EAs Beale pointed out, if you do not follow instructions, and extend the probe while docked, and then undock, or load the scene in that state, the spacecraft explodes\u003Cspan style=\u0022font-size:8px;\u0022\u003E just a little...\u003C/span\u003E Because of that possibility, I\u0027ve tried to dummy-proof the docking ports. Granted, it\u0027s really not that hard to use the docking ports properly, because if you dock normally, you\u0027ll never need to extend the probe while docked, and all will be fine, but, for the sake of safety, I\u0027ve tried\u003C/p\u003E\u003Cp\u003EThe verdict is complicated: In the stock Shielded Clamp-O-Tron .cfg file, there\u0027s a parameter called \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003EdeployAnimationController = 1\u003C/span\u003E When 1 is a value for this, the docking port will not be allowed to animate while docked. In game, this is why you can\u0027t open or close the inline, Mk2, and shielded docking ports while docked.\u003C/p\u003E\u003Cp\u003EThe issue is this: This parameter activates in the acquire/magnetism stage of docking, not in the docked stage. This means, that if I enable this parameter, once you\u0027re soft-docked, you can no longer retract the probe to hard-dock. I experimented with stock Clamp-O-Trons and confirmed my suspicions. \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/2BtIZePl.png\u0022 alt=\u00222BtIZePl.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs you can see here, the docking ports are trying to dock, but the I-Beams are in the way. While they\u0027re separated, I can\u0027t close the shields in the same way I can\u0027t retract the probe on my ports. Very frustrating. \u003C/p\u003E\u003Cp\u003EUnfortunately, without writing a crazy plugin, there are limitations within the game that make dummy-proofing the ports difficult. As soon as the ports acquire, you can\u0027t retract the probe. \u003C/p\u003E\u003Cp\u003EI\u0027m actually thinking about sending a message to one of the KSP devs about this. If they made the \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003EdeployAnimationController\u003C/span\u003E activate when ACTUALLY docked, instead of when you\u0027re in the acquire stage, it could allow further development of add-on soft-docking ports.\u003C/p\u003E\u003Cp\u003EAny thoughts?\u003C/p\u003E\n"},{"CreatedByName":"Dafni","CreatedById":149636,"CreatedDateTime":"2015-10-28T20:54:00Z","Content":"\n\u003Cp\u003EGo ahead and send them a message about it. Would be nice if they would listen... or maybe even start thinking about implementing soft docking into stock KSP. IMHO that\u00C3\u201A\u00C2\u00B4s how docking should work.\u003C/p\u003E\n"},{"CreatedByName":"curtquarquesso","CreatedById":42872,"CreatedDateTime":"2015-10-28T20:56:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dafni\u0022 data-cite=\u0022Dafni\u0022\u003E\u003Cdiv\u003EGo ahead and send them a message about it. Would be nice if they would listen... or maybe even start thinking about implementing soft docking into stock KSP. IMHO that\u00C3\u201A\u00C2\u00B4s how docking should work.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not looking for support so much, as I\u0027m looking for a way to find a loophole in the way things currently work.\u003C/p\u003E\n"},{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2015-10-28T21:37:09Z","Content":"\n\u003Cp\u003EI guess there\u0027s no other way than a plugin.\u003C/p\u003E\n"},{"CreatedByName":"PugzInSpace","CreatedById":151638,"CreatedDateTime":"2015-10-29T00:43:48Z","Content":"\n\u003Cp\u003ESounds like it really adds to the realism though. I have a suspicion that the ISS would explode if they forgot to undock before re-arming the docking node. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}