{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":24,"Articles":[{"CreatedByName":"Darkway","CreatedById":142879,"CreatedDateTime":"2015-05-08T23:02:45Z","Content":"I could not resist, and installed 1.0 KSP today at last (some entertainment is needed sometimes, isnt it? ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)). Ofc, the first thing I did was to test this fantastic mod! Quickly stitched together a few aerodynamic parts, and set sail into the sunset! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\n[http://imgur.com/a/zLQ6m#0](http://imgur.com/a/zLQ6m#0)\n\nExtremely nice, and promising! Thank you for your time and work, blackrack! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nEDIT: The install is totally free of graphical mods, KSP is run with all graphical settings at max, changed nothing else (not opengl mode, changed nothing in the nvidia control panel). I have ATM.\n\nEDIT2: Added some description to the images.\n\nEDIT3: Wouldn\u0027t it be technically more feasible to just draw 1-2 layers of blue spheres around Kerbin, like other atmo mods do? Like, one to represent the lower, and one to represent the higher atmosphere. When the camera passes a certain height (be4 the Moire patterns start to kick in), the scatterer effect could fade out, while the blue sphere(s) simultaneously fade in. That way, theres no need to fight with the depth buffer, or anything else, and Moire patterns could be eliminated. Just an idea, I\u0027m not familiar with the toolset Unity provides at all. \n\n- - - Updated - -\n\n**Edited \u003Ctime datetime=\u00222015-05-09T09:57:47Z\u0022 title=\u002205/09/2015 09:57  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 9, 2015\u003C/time\u003E by Darkway**"},{"CreatedByName":"Morberis","CreatedById":103417,"CreatedDateTime":"2015-05-09T00:16:54Z","Content":"Oh wow, removing this frees up 800mb of ram on my system. As good as it looks, it doesn\u0060t look 800mb good."},{"CreatedByName":"Kuu Lightwing","CreatedById":142724,"CreatedDateTime":"2015-05-09T12:02:16Z","Content":"This is an awesome mod, I just having random visual glitches and crashes sometimes. I\u0027m pretty sure everybody has reported that already, so, I\u0027ll just say - keep up the good work! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"steelthunder","CreatedById":101067,"CreatedDateTime":"2015-05-09T12:13:16Z","Content":"I keep getting black lines/circles. Any idea how to stop that? Im running in openGL to save on ram."},{"CreatedByName":"Darkway","CreatedById":142879,"CreatedDateTime":"2015-05-09T13:41:25Z","Content":"\u003E \n\u003E I keep getting black lines/circles. Any idea how to stop that? Im running in openGL to save on ram.\n\n/\n\nDark lines can be easily removed by setting \u0022Render quality\u0022 in the grapihics settings to \u0022Fastest\u0022 in OpenGL mode. Moire effects, and other gliches are common under all modes now, given the mod is in an experimental stage.\n\n**Edited \u003Ctime datetime=\u00222015-05-09T13:44:51Z\u0022 title=\u002205/09/2015 01:44  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 9, 2015\u003C/time\u003E by Darkway**"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-05-09T20:56:23Z","Content":"Guys. You may want to see this... someone made a shader mod. And it\u0027s been rediscovered.\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/7l16V)\n\n**Edited \u003Ctime datetime=\u00222015-05-09T21:32:39Z\u0022 title=\u002205/09/2015 09:32  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 9, 2015\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"cobbman11","CreatedById":76711,"CreatedDateTime":"2015-05-10T00:49:51Z","Content":"\u003E \n\u003E Guys. You may want to see this... someone made a shader mod. And it\u0027s been rediscovered.\n\u003E [http://imgur.com/a/7l16V](http://imgur.com/a/7l16V)\n\nHey, it\u0027s Andrew from the Facebook group. Looks like you got GEMFX working just fine. Looks great!"},{"CreatedByName":"metl","CreatedById":82406,"CreatedDateTime":"2015-05-10T01:23:08Z","Content":"\u003E \n\u003E Oh wow, removing this frees up 800mb of ram on my system. As good as it looks, it doesn\u0060t look 800mb good.\n\nYeah I also experience a huge memory spike and it seems to cause a memory leak (or at the very least exacerbates one of the smaller, existing ones.)"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-05-10T04:00:21Z","Content":"I can confirm a comparability issue with PlanetShine. :L"},{"CreatedByName":"Valerian","CreatedById":124076,"CreatedDateTime":"2015-05-10T05:29:37Z","Content":"\u003E \n\u003E I can confirm a comparability issue with PlanetShine. :L\n\nWhat\u0027s the issue exactly? With Direct3D 9, Direct3D 11, or OpenGL? What is your OS and what are your KSP visual settings? Can you post screenshots?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-10T08:30:33Z","Content":"![sPkqPMy.jpg](http://i.imgur.com/sPkqPMy.jpg)\n\nThis wasn\u0027t supposed to happen (not supposed to be an eclipse) but it looked neat.\n\nAnybody know how to grab the sunCorona object?\n\n**Edited \u003Ctime datetime=\u00222015-05-10T09:01:20Z\u0022 title=\u002205/10/2015 09:01  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 10, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-05-10T08:35:38Z","Content":"\u003E \n\u003E What\u0027s the issue exactly? With Direct3D 9, Direct3D 11, or OpenGL? What is your OS and what are your KSP visual settings? Can you post screenshots?\n\nOh haha! I misspelled compatibility. I\u0027ll post pictures when I next can. I\u0027m away from my PC currently. The issue is that whenever you load up a save game, the KSC main screen starts zoomed in on the SPH and no buildings can be clicked on. I was running with -force-OpenGL so that may have been an issue. I haven\u0027t tested plain. I\u0027m running full resolution on Windows 8.1. I\u0027ll post pictures when I next can."},{"CreatedByName":"worir4","CreatedById":75980,"CreatedDateTime":"2015-05-10T09:05:32Z","Content":"\u003E \n\u003E [http://i.imgur.com/sPkqPMy.jpg](http://i.imgur.com/sPkqPMy.jpg)\n\u003E This wasn\u0027t supposed to happen (not supposed to be an eclipse) but it looked neat.\n\u003E \n\u003E Anybody know how to grab the sunCorona object?\n\nI may havw missed this earlier on the thread, but how did you get the clouds? Are they from EVE? If so how do you get them to show when looking upwards. For me I can only see them and smoke when the ground is behind it."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-10T09:09:11Z","Content":"\u003E \n\u003E I may havw missed this earlier on the thread, but how did you get the clouds? Are they from EVE? If so how do you get them to show when looking upwards. For me I can only see them and smoke when the ground is behind it.\n\nYes they\u0027re from EVE, they now show up in the sky. I haven\u0027t released it yet because it brought some other issues with the sun. I\u0027ve also trimmed the memory usage from 800mb to about 200-400, there still seems to be a small memory leak somewhere though."},{"CreatedByName":"Valerian","CreatedById":124076,"CreatedDateTime":"2015-05-10T09:16:22Z","Content":"\u003E \n\u003E Oh haha! I misspelled compatibility. I\u0027ll post pictures when I next can. I\u0027m away from my PC currently. The issue is that whenever you load up a save game, the KSC main screen starts zoomed in on the SPH and no buildings can be clicked on. I was running with -force-OpenGL so that may have been an issue. I haven\u0027t tested plain. I\u0027m running full resolution on Windows 8.1. I\u0027ll post pictures when I next can.\n\nI never had this issue, I\u0027m playing the same as you but without opengl.\n\nI have no idea how that can even be related with PlanetShine!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-10T09:21:56Z","Content":"\u003E \n\u003E Oh haha! I misspelled compatibility. I\u0027ll post pictures when I next can. I\u0027m away from my PC currently. The issue is that whenever you load up a save game, the KSC main screen starts zoomed in on the SPH and no buildings can be clicked on. I was running with -force-OpenGL so that may have been an issue. I haven\u0027t tested plain. I\u0027m running full resolution on Windows 8.1. I\u0027ll post pictures when I next can.\n\nThe bug where KSC starts at a weird angle and you can\u0027t click anything happens to me randomly, like once out of 20 bootups, with scatterer."},{"CreatedByName":"Valerian","CreatedById":124076,"CreatedDateTime":"2015-05-10T09:48:25Z","Content":"\u003E \n\u003E The bug where KSC starts at a weird angle and you can\u0027t click anything happens to me randomly, like once out of 20 bootups, with scatterer.\n\nWith or without PlanetShine? ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nIt used to happen to me randomly in 0.25 or 0.90 (not sure)"},{"CreatedByName":"Ival70","CreatedById":75336,"CreatedDateTime":"2015-05-10T09:49:12Z","Content":"I\u0027m so glad to see a mod being made for this! I\u0027ve wanted these kinds of effects in stock for a long time."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-10T10:15:54Z","Content":"\u003E \n\u003E With or without PlanetShine? ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\u003E It used to happen to me randomly in 0.25 or 0.90 (not sure)\n\nWithout planetshine, I never tried with."},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-05-10T14:15:44Z","Content":"\u003E \n\u003E Oh haha! I misspelled compatibility. I\u0027ll post pictures when I next can. I\u0027m away from my PC currently. The issue is that whenever you load up a save game, the KSC main screen starts zoomed in on the SPH and no buildings can be clicked on. I was running with -force-OpenGL so that may have been an issue. I haven\u0027t tested plain. I\u0027m running full resolution on Windows 8.1. I\u0027ll post pictures when I next can.\n\nThat is a stock bug, I think. I got it pretty often, since 0.90. With or without mods, but seem to happen often if are mods present.\n\n- - - Updated - - -\n\n\u003E \n\u003E [http://i.imgur.com/sPkqPMy.jpg](http://i.imgur.com/sPkqPMy.jpg)\n\u003E This wasn\u0027t supposed to happen (not supposed to be an eclipse) but it looked neat.\n\u003E \n\u003E Anybody know how to grab the sunCorona object?\n\nThe stock one? Must be inside the assets, no?. *Unity assets explorer.* ![:blush:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif)\n\n**EDIT:** Blackrack, there is a doubt that I have since some time ago. May I ask for what is used the black texture?\n\n**Edited \u003Ctime datetime=\u00222015-05-10T14:27:52Z\u0022 title=\u002205/10/2015 02:27  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 10, 2015\u003C/time\u003E by Proot**"},{"CreatedByName":"EladDv","CreatedById":118368,"CreatedDateTime":"2015-05-10T15:14:52Z","Content":"maybe try and find the children of the sun object. one of them should be a corona but i have no idea how to differentiate it other then searching for the name (but squad knows that isnt going to be helpful with their labels and weird naming schemes)"},{"CreatedByName":"Tripod27","CreatedById":68324,"CreatedDateTime":"2015-05-10T15:20:38Z","Content":"Awesome mod but I\u0027m having a few issues\n\nI can\u0027t seem to get the alt-f11 settings to stick (just want post processing alpha to be 60 instead of 78) and changing them every time I lauch the game is a bit annoying, is there a file I can edit to have 60 be the default for that setting instead of 78?\n\nAlso the clouds mod I have looks like it\u0027s being covered up by your effect, at least from below. I can see the clouds from above and from orbit, but from below they\u0027re completely invisible except for when backdropped by mountains"},{"CreatedByName":"Darkway","CreatedById":142879,"CreatedDateTime":"2015-05-10T16:06:17Z","Content":"\u003E \n\u003E Awesome mod but I\u0027m having a few issues\n\u003E I can\u0027t seem to get the alt-f11 settings to stick (just want post processing alpha to be 60 instead of 78) and changing them every time I lauch the game is a bit annoying, is there a file I can edit to have 60 be the default for that setting instead of 78?\n\u003E \n\u003E Also the clouds mod I have looks like it\u0027s being covered up by your effect, at least from below. I can see the clouds from above and from orbit, but from below they\u0027re completely invisible except for when backdropped by mountains\n\nBoth of the \u0022bugs\u0022 you mention are caused by the EXPERIMENTAL stage of the mod, and none of them have been implemented yet in the current release (well, I\u0027m sure in the second, the first was a question a while back too, but i dont think its been added)."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-05-10T17:12:31Z","Content":"UPDATE: It appears as though I cannot reproduce the bug. I may have corrupted the save (I\u0027ve had the same glitch happen after a corrupt save), or if I\u0027m forgetting which KSP directory the glitch happened on, I could have had an incompatibility issue with Hyperedit (Which also glitches the same way), which I know is incompatible. Also, it appears as though added -force-opengl to the back of a KSP.exe shortcut no longer is working for me. It boots up frozen and says it cannot switch resolutions ![:confused:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif). Anyhoo, it looks as though PlanetShine is off. It may have been Hyperedit or a save corruption.\n\nEDIT: Blackrack I have a suggestion that *might* fix the circles and flickering from orbit. If it works. What if you made the scatterer haze fade away as you leave the atmosphere, and at the same time use the new atmosphere coloring from EVE to make it look as though the haze is still present? That might solve issues with scaled space too as EVE is visible in scaled space. Is this possible?\n\n**Edited \u003Ctime datetime=\u00222015-05-10T17:55:48Z\u0022 title=\u002205/10/2015 05:55  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 10, 2015\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-10T18:15:34Z","Content":"\u003E \n\u003E That is a stock bug, I think. I got it pretty often, since 0.90. With or without mods, but seem to happen often if are mods present.\n\u003E - - - Updated - - -\n\u003E \n\u003E The stock one? Must be inside the assets, no?. *Unity assets explorer.* ![:blush:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif)\n\u003E \n\u003E **EDIT:** Blackrack, there is a doubt that I have since some time ago. May I ask for what is used the black texture?\n\nYeah but I want to toggle it or fade it in an and out ingame. The black texture is just used for when I disable the sunglare that scatterer uses, I think it\u0027s obvious since they have the same dimensions. It was supposed to be just a quick fix.\n\n\u003E \n\u003E What do you want to do exactly with the coronas?\n\nToggle it on/off, I changed a few things to get the clouds to display but now the coronas draw on top of the sky no matter what. Controlling it would also mean I can have eclipses working in scatterer (they don\u0027t work right now).\n\n\u003E \n\u003E maybe try and find the children of the sun object. one of them should be a corona but i have no idea how to differentiate it other then searching for the name (but squad knows that isnt going to be helpful with their labels and weird naming schemes)\n\nI had the same idea today but have been putting it off because it\u0027s tedious.\n\n\u003E \n\u003E Awesome mod but I\u0027m having a few issues\n\u003E I can\u0027t seem to get the alt-f11 settings to stick (just want post processing alpha to be 60 instead of 78) and changing them every time I lauch the game is a bit annoying, is there a file I can edit to have 60 be the default for that setting instead of 78?\n\u003E \n\u003E Also the clouds mod I have looks like it\u0027s being covered up by your effect, at least from below. I can see the clouds from above and from orbit, but from below they\u0027re completely invisible except for when backdropped by mountains\n\nI haven\u0027t added persistent settings yet, I\u0027m working on the mod at a very reduced pace these days.\n\n\u003E \n\u003E UPDATE: It appears as though I cannot reproduce the bug. I may have corrupted the save (I\u0027ve had the same glitch happen after a corrupt save), or if I\u0027m forgetting which KSP directory the glitch happened on, I could have had an incompatibility issue with Hyperedit (Which also glitches the same way), which I know is incompatible. Also, it appears as though added -force-opengl to the back of a KSP.exe shortcut no longer is working for me. It boots up frozen and says it cannot switch resolutions ![:confused:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif). Anyhoo, it looks as though PlanetShine is off. It may have been Hyperedit or a save corruption.\n\u003E EDIT: Blackrack I have a suggestion that *might* fix the circles and flickering from orbit. If it works. What if you made the scatterer haze fade away as you leave the atmosphere, and at the same time use the new atmosphere coloring from EVE to make it look as though the haze is still present? That might solve issues with scaled space too as EVE is visible in scaled space. Is this possible?\n\nThis is totally possible, but I never really fiddled with EVE\u0027s settings. I guess I could just fade the haze out after a certain altitude. What does EVE\u0027s haze look like from orbit anyway?"}]}