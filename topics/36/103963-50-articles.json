{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":50,"Articles":[{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-07-25T13:00:44Z","Content":":drool: That looks simply amazing."},{"CreatedByName":"_Augustus_","CreatedById":115084,"CreatedDateTime":"2015-07-25T13:11:11Z","Content":"\u003E \n\u003E Magic hour on Duna:\n\u003E [http://imgur.com/a/S0kSC](http://imgur.com/a/S0kSC)\n\u003E \n\u003E Lots of horizon artifacts to fix.\n\u003E \n\u003E [http://i.imgur.com/9J5qTDl.jpg](http://i.imgur.com/9J5qTDl.jpg)\n\u003E \n\u003E compare with a real image:\n\u003E \n\u003E [http://www.jpl.nasa.gov/images/msl/20150508b/pia19400-16.jpg](http://www.jpl.nasa.gov/images/msl/20150508b/pia19400-16.jpg)\n\u003E \n\u003E Rim blend and rim power do control the \u0022edge glow\u0022 effect, they are actually a component of the stock atmosphere shader but I kept it because it looked good with scatterer. If they don\u0027t seem to do anything maybe you have the stock shader completely disabled in RSS.\n\u003E \n\u003E Unfortunately the horizon line issue starts arising when you change the atmosphere height too much, I just ran into the same issue with my Duna config and will start looking for a fix soon.\n\n Wow. I want to test that!"},{"CreatedByName":"Yukon0009","CreatedById":109376,"CreatedDateTime":"2015-07-25T14:11:10Z","Content":"No, that\u0027s an EVE bug with the city lights."},{"CreatedByName":"makkz","CreatedById":148060,"CreatedDateTime":"2015-07-25T14:17:00Z","Content":"I just realized after trying those again, sorry. Is there a fix?\n\nSorry about deleting the post, I thought it didn\u0027t have a reply."},{"CreatedByName":"Yukon0009","CreatedById":109376,"CreatedDateTime":"2015-07-25T14:19:02Z","Content":"Reload KSP and hope it goes away, or delete the CityLights folder in BoulderCo."},{"CreatedByName":"MoeKitsune","CreatedById":127670,"CreatedDateTime":"2015-07-25T16:17:08Z","Content":"I want this. I want magic Duna sunset/sunrise."},{"CreatedByName":"Vandest","CreatedById":122250,"CreatedDateTime":"2015-07-26T00:48:58Z","Content":"It bodes well! It will be awesome!! ![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif)"},{"CreatedByName":"Prasiatko","CreatedById":148247,"CreatedDateTime":"2015-07-26T02:47:21Z","Content":"Any idea what could be causing concentric black circles to be appearing on the water when this is installed? Is not EVE as tried uninstalling that to no effect. I have a Radeon 7950 if it being an ati card makes any difference.\n\nRunning in Dx11 too.\n\nEDIT: Nevermind Dx11 was cause, works fine in DX9\n\n**Edited \u003Ctime datetime=\u00222015-07-26T02:52:47Z\u0022 title=\u002207/26/2015 02:52  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 26, 2015\u003C/time\u003E by Prasiatko**"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-07-26T03:44:29Z","Content":"\u003E \n\u003E Rim blend and rim power do control the \u0022edge glow\u0022 effect, they are actually a component of the stock atmosphere shader but I kept it because it looked good with scatterer. If they don\u0027t seem to do anything maybe you have the stock shader completely disabled in RSS.\n\u003E \n\u003E Unfortunately the horizon line issue starts arising when you change the atmosphere height too much, I just ran into the same issue with my Duna config and will start looking for a fix soon.\n\nLooks like an issue with the depth buffer. Is depth data for the terrain being written at all do you know?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-26T06:10:30Z","Content":"\u003E \n\u003E Looks like an issue with the depth buffer. Is depth data for the terrain being written at all do you know?\n\nNot sure what you mean here but the sky shader does not depend on the depth buffer."},{"CreatedByName":"JaredTheDragon","CreatedById":137445,"CreatedDateTime":"2015-07-26T07:58:37Z","Content":"Are these the moire patterns? Is there any way to fix this in DX11? GTX660 here, if that makes a difference. The atmosphere otherwise looks just splendid.\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/DwTan)"},{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2015-07-26T08:33:09Z","Content":"I have the same patterns on dx11 and Nvidia 740m. \n\nBy the way, they aren\u0027t visible when in Space center view."},{"CreatedByName":"Grach","CreatedById":107422,"CreatedDateTime":"2015-07-26T08:44:13Z","Content":"\u003E \n\u003E Are these the moire patterns? Is there any way to fix this in DX11? GTX660 here, if that makes a difference. The atmosphere otherwise looks just splendid.\n\u003E [http://imgur.com/a/DwTan](http://imgur.com/a/DwTan)\n\n\u003E \n\u003E I have the same patterns on dx11 and Nvidia 740m. \n\u003E By the way, they aren\u0027t visible when in Space center view.\n\nIt\u0027s already been said that DX11(and OpenGL) causes issues with the mod. However the mod is stable with DX9 so you can use that.\n\nEDIT: blackrack, I really think you should make a list of known issues on the first page to prevent the same questions being posted."},{"CreatedByName":"Fl0oo","CreatedById":112121,"CreatedDateTime":"2015-07-26T11:16:08Z","Content":"I need EVE for this? Tnx"},{"CreatedByName":"Prasiatko","CreatedById":148247,"CreatedDateTime":"2015-07-26T14:21:14Z","Content":"\u003E \n\u003E It\u0027s already been said that DX11(and OpenGL) causes issues with the mod. However the mod is stable with DX9 so you can use that.\n\u003E EDIT: blackrack, I really think you should make a list of known issues on the first page to prevent the same questions being posted.\n\nI agree i initially dismissed DX11 as cause as there was a configurator for it on the first post."},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-07-26T14:56:01Z","Content":"\u003E \n\u003E I need EVE for this? Tnx\n\nIt\u0027s not a requirement, just works well with it. I myself use 7-4 but overhaul works well too."},{"CreatedByName":"FireFaced","CreatedById":141290,"CreatedDateTime":"2015-07-26T16:01:57Z","Content":"Does anybody know how to make this work with KScale2 or have a config for it?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-26T16:44:37Z","Content":"\u003E \n\u003E Does anybody know how to make this work with KScale2 or have a config for it?\n\nI saw screens of someone using it with Kscale2 earlier today so I\u0027m assuming it works. it looks quite good too, the new scale goes much better with the scattering effects\n\n[http://i.imgur.com/mTV6x0o.jpg](http://i.imgur.com/mTV6x0o.jpg)\n\n[http://i.imgur.com/QID25IR.jpg](http://i.imgur.com/QID25IR.jpg)\n\nHaven\u0027t tried it myself though. What seems to be the problem?\n\n**Edited \u003Ctime datetime=\u00222015-07-26T16:50:47Z\u0022 title=\u002207/26/2015 04:50  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 26, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"JaredTheDragon","CreatedById":137445,"CreatedDateTime":"2015-07-26T18:57:42Z","Content":"\u003E \n\u003E It\u0027s already been said that DX11(and OpenGL) causes issues with the mod. However the mod is stable with DX9 so you can use that.\n\u003E EDIT: blackrack, I really think you should make a list of known issues on the first page to prevent the same questions being posted.\n\nI know it\u0027s an issue, and even posted screens of it. My question was how to overcome the issue. DX9 and OGL aren\u0027t an option anymore for my playing style (with tons of mods, in 1.04) and so if nobody\u0027s fixed the moire patterns, I\u0027ll have to wait until someone does. Given the nature of moire patterns, it doesn\u0027t seem impossible to fix, since we fix this all the time in other programs. Could we not exclude the water from Scatterer as a start, somehow?"},{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2015-07-26T19:19:27Z","Content":"Scatterer with excluded water looks weird an ugly. I\u0027ve captured the moment when Z-fighting was invisible, here it is.\n\n![8oHJRQw.png](http://i.imgur.com/8oHJRQw.png)\n\nWould be nice to have a fix tho, I\u0027ve revertet to dx9 so far at a cost of a deleted mod. ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-26T19:46:20Z","Content":"\u003E \n\u003E I know it\u0027s an issue, and even posted screens of it. My question was how to overcome the issue. DX9 and OGL aren\u0027t an option anymore for my playing style (with tons of mods, in 1.04) and so if nobody\u0027s fixed the moire patterns, I\u0027ll have to wait until someone does. Given the nature of moire patterns, it doesn\u0027t seem impossible to fix, since we fix this all the time in other programs. Could we not exclude the water from Scatterer as a start, somehow?\n\nI never gave the moire patterns much thougbt since they only appear in dx11 and I\u0027m eventually going to replace the water anyway. I haven\u0027t looked into it but I\u0027m assuming the shader replacement I do to get the water writing to the depth buffer messes something up and I haven\u0027t updated since many KSP versions back. What do you mean exactly by excluding the water from scatterer? Not applying postprocessing to it?\n\n\u003E \n\u003E Scatterer with excluded water looks weird an ugly. I\u0027ve captured the moment when Z-fighting was invisible, here it is.\n\u003E [http://i.imgur.com/8oHJRQw.png](http://i.imgur.com/8oHJRQw.png)\n\u003E \n\u003E Would be nice to have a fix tho, I\u0027ve revertet to dx9 so far at a cost of a deleted mod. ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\nI have literally no idea what is going on in your screenshot, what did you do and why would you want to do that?"},{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2015-07-26T20:03:26Z","Content":"I hadn\u0027t done anything, it\u0027s just the problem with Z-fighting or whatever it is on water with dx11 with a screen taken at a right time. Just posted it to illustrate \u0022exclude the water from Scatterer\u0022 idea from the post above."},{"CreatedByName":"JaredTheDragon","CreatedById":137445,"CreatedDateTime":"2015-07-26T20:12:57Z","Content":"Generally, moire patterns emerge from a lack of filtering or the wrong level of filtering. I\u0027m talking about in Maya or Blender for example, not sure how that relates to Scatterer or your work here. My guess is that the bump (no displacement in KSP water?) map is freaking out when Scatterer is running in DX11, coughing up absolutes or something as it\u0027s filtered through? I don\u0027t know much about how this works in Unity/KSP, but it\u0027s a one-click fix in Maya for example. I know that is not helpful at all for KSP, but might get you started on a path to a fix, which hopefully wouldn\u0027t be impossible. Either way, great mod - everything else looks just amazing, and there\u0027s no going back. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-07-26T20:13:51Z","Content":"\u003E \n\u003E I hadn\u0027t done anything, it\u0027s just the problem with Z-fighting or whatever it is on water with dx11 with a screen taken at a right time. Just posted it to illustrate \u0022exclude the water from Scatterer\u0022 idea from the post above.\n\nUh okay, weird that should be z-fighting since it\u0027s just postprocessing. I\u0027ll look into it."},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2015-07-27T00:14:19Z","Content":"\u003E \n\u003E Magic hour on Duna:\n\u003E [http://imgur.com/a/S0kSC](http://imgur.com/a/S0kSC)\n\u003E \n\u003E Lots of horizon artifacts to fix.\n\u003E \n\u003E [http://i.imgur.com/9J5qTDl.jpg](http://i.imgur.com/9J5qTDl.jpg)\n\u003E \n\u003E compare with a real image:\n\u003E \n\u003E [http://www.jpl.nasa.gov/images/msl/20150508b/pia19400-16.jpg](http://www.jpl.nasa.gov/images/msl/20150508b/pia19400-16.jpg)\n\u003E \n\u003E Rim blend and rim power do control the \u0022edge glow\u0022 effect, they are actually a component of the stock atmosphere shader but I kept it because it looked good with scatterer. If they don\u0027t seem to do anything maybe you have the stock shader completely disabled in RSS.\n\u003E \n\u003E Unfortunately the horizon line issue starts arising when you change the atmosphere height too much, I just ran into the same issue with my Duna config and will start looking for a fix soon.\n\nAh right, yeah that makes sense, I had the stock atmosphere turned off as it was replaced by the Eve atmo shader. Oh and regarding the atmosphere height I was referring to its entire vertical scale essentially not so much to the altitude of its start point. Maybe it\u0027s something that could be edited in the configuration editor? Or is it hard limited to being proportionate to a planets radius?"}]}