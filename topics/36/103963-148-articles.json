{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":148,"Articles":[{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2016-03-09T15:21:29Z","Content":"\u003E \n\u003E \n\u003E 38 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Wait, what fading extinction?\n\u003E \n\nmore on the edge.. less in the middle?\n\nEDIT: also having the extinction and falloff effect for it in PQS is really cool ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Like this is starting to look better/same as current flight sims like DCS I swear\n\n![nSO8DoT.png](http://i.imgur.com/nSO8DoT.png)\n\n**Edited \u003Ctime datetime=\u00222016-03-09T15:44:33Z\u0022 title=\u002203/09/2016 03:44  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 9, 2016\u003C/time\u003E by pingopete**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-03-09T16:07:41Z","Content":"\u003E \n\u003E \n\u003E 46 minutes ago, pingopete said:\n\u003E \n\u003E \n\u003E more on the edge.. less in the middle?\n\u003E \n\nAhh yes, the new extinction method does that implicitly.\n\nBtw check this out, looks more and more like apollo-era photos of eath imo::\n\n![mp1LdIq.jpg](http://i.imgur.com/mp1LdIq.jpg)\n\n![AS11-36-5339_lrg.jpg](http://eoimages.gsfc.nasa.gov/images/imagerecords/84000/84038/AS11-36-5339_lrg.jpg)\n\n**Edited \u003Ctime datetime=\u00222016-03-09T16:08:17Z\u0022 title=\u002203/09/2016 04:08  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 9, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"MrMeeb","CreatedById":84238,"CreatedDateTime":"2016-03-09T17:26:09Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E \\*truly awesome photo showing exactly what I need in life\\*\n\u003E \n\n![lhjhbB9.gif](http://i.imgur.com/lhjhbB9.gif)"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2016-03-09T18:10:47Z","Content":"BTW my atmosphere still seems to be rendering behind clouds?\n\nAnd yeah with the colours it looks better than real life :3\n\n![aLC2vxR.png](http://i.imgur.com/aLC2vxR.png)"},{"CreatedByName":"MrMeeb","CreatedById":84238,"CreatedDateTime":"2016-03-09T18:45:26Z","Content":"\u003E \n\u003E \n\u003E 33 minutes ago, pingopete said:\n\u003E \n\u003E \n\u003E BTW my atmosphere still seems to be rendering behind clouds?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E And yeah with the colours it looks better than real life :3\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![aLC2vxR.png](http://i.imgur.com/aLC2vxR.png)](http://i.imgur.com/aLC2vxR.png \u0022Enlarge image\u0022)\n\u003E \n\nPete, stop flinging planes so damn high! They aren\u0027t supposed to go there! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)"},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2016-03-09T18:48:37Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, MrMeeb said:\n\u003E \n\u003E \n\u003E Pete, stop flinging planes so damn high! They aren\u0027t supposed to go there! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\u003E \n\nWell this is KSP we are talking about.... ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)"},{"CreatedByName":"MrMeeb","CreatedById":84238,"CreatedDateTime":"2016-03-09T18:49:03Z","Content":"\u003E \n\u003E \n\u003E Just now, V8jester said:\n\u003E \n\u003E \n\u003E Well this is KSP we are talking about.... ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\u003E \n\nTrue...true ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)"},{"CreatedByName":"Poodmund","CreatedById":128643,"CreatedDateTime":"2016-03-09T19:05:46Z","Content":"\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/JCsfTlpk9ak?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\nI thought you might like to watch this, [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), if you\u0027ve not seen it already."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-03-09T19:42:07Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, pingopete said:\n\u003E \n\u003E \n\u003E BTW my atmosphere still seems to be rendering behind clouds?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E And yeah with the colours it looks better than real life :3\n\u003E \n\nYeah I haven\u0027t released it yet, I\u0027m still working on it. Considering the postProcessing needs to be drawn behind it this brings even more complications in the transition between PQS and scaledSpace.\n\n\u003E \n\u003E \n\u003E 37 minutes ago, Poodmund said:\n\u003E \n\u003E \n\u003E I thought you might like to watch this, [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), if you\u0027ve not seen it already.\n\u003E \n\nHaven\u0027t seen this particular video but I\u0027ve seen some photos. The result in KSP seems pretty close [https://www.youtube.com/watch?v=zWwITlAYd_A](https://www.youtube.com/watch?v=zWwITlAYd_A)\n\n\u003E \n\u003E \n\u003E 4 hours ago, pingopete said:\n\u003E \n\u003E \n\u003E EDIT: also having the extinction and falloff effect for it in PQS is really cool ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Like this is starting to look better/same as current flight sims like DCS I swear\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![nSO8DoT.png](http://i.imgur.com/nSO8DoT.png)](http://i.imgur.com/nSO8DoT.png \u0022Enlarge image\u0022)\n\u003E \n\nBtw that does look a lot more natural than it ever would in the stock-sized planets. Looks pretty close to what you see in the config tool/proland even.\n\n**Edited \u003Ctime datetime=\u00222016-03-09T19:43:36Z\u0022 title=\u002203/09/2016 07:43  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 9, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"Arditan427","CreatedById":96857,"CreatedDateTime":"2016-03-09T19:43:34Z","Content":"\u003E \n\u003E \n\u003E 9 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Post the log but I doubt there will be anything in it. Really just play with the settings and see if anything affects it.\n\u003E \n\nThe only thing I found that stops it is turning off post-processing (which I assume is pretty obvious)."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-03-09T19:47:50Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Arditan427 said:\n\u003E \n\u003E \n\u003E The only thing I found that stops it is turning off post-processing (which I assume is pretty obvious).\n\u003E \n\nActually I would\u0027ve thought It\u0027d happen in the sky shader since it\u0027s higher up than the ground or in the ocean shader since it also has some horizon artifcats. Try playing with Postprocessing extinction tint and Postprocessing extinction multiplier/amount and see if that affects it, make sure to select the right config point for the altitude you\u0027re at. Also, which video mode are you running?"},{"CreatedByName":"Arditan427","CreatedById":96857,"CreatedDateTime":"2016-03-09T19:49:06Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E Actually I would\u0027ve thought It\u0027d happen in the sky shader since it\u0027s higher up than the ground or in the ocean shader since it also has some horizon artifcats. Try playing with Postprocessing extinction tint and Postprocessing extinction multiplier/amount and see if that affects it, make sure to select the right config point for the altitude you\u0027re at. Also, which video mode are you running?\n\u003E \n\nI haven\u0027t forced opengl or dx11 or anything like that."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-03-09T19:50:34Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Arditan427 said:\n\u003E \n\u003E \n\u003E I haven\u0027t forced opengl or dx11 or anything like that.\n\u003E \n\nCould you try forcing dx11? Also try the settings I posted above."},{"CreatedByName":"Arditan427","CreatedById":96857,"CreatedDateTime":"2016-03-09T20:30:22Z","Content":"\u003E \n\u003E \n\u003E 38 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Could you try forcing dx11? Also try the settings I posted above.\n\u003E \n\nWhich settings? I looked through the last few pages and couldn\u0027t distinguish what you were referring to."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-03-09T20:32:34Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Arditan427 said:\n\u003E \n\u003E \n\u003E Which settings? I looked through the last few pages and couldn\u0027t distinguish what you were referring to.\n\u003E \n\n\u003E \n\u003E \n\u003E 44 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Actually I would\u0027ve thought It\u0027d happen in the sky shader since it\u0027s higher up than the ground or in the ocean shader since it also has some horizon artifcats. Try playing with Postprocessing extinction tint and Postprocessing extinction multiplier/amount and see if that affects it, make sure to select the right config point for the altitude you\u0027re at. Also, which video mode are you running?\n\u003E"},{"CreatedByName":"Arditan427","CreatedById":96857,"CreatedDateTime":"2016-03-09T20:35:14Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E \n\u003E \n\nOh ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022) I thought you meant config settings that I had to mess around with in the files, I did that and found no results. I did find something interesting though, the artifacts appear on the dark side of Kerbin when godrays are disabled, but on the day side when godrays are enabled."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-03-09T20:36:46Z","Content":"\u003E \n\u003E \n\u003E Just now, Arditan427 said:\n\u003E \n\u003E \n\u003E Oh ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022) I thought you meant config settings that I had to mess around with in the files, I did that and found no results. I did find something interesting though, the artifacts appear on the dark side of Kerbin when godrays are disabled, but on the day side when godrays are enabled.\n\u003E \n\nHmm, I see. And could you try in directx 11?"},{"CreatedByName":"Arditan427","CreatedById":96857,"CreatedDateTime":"2016-03-09T20:37:16Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E Hmm, I see. And could you try in directx 11?\n\u003E \n\nWill try it in a bit."},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2016-03-09T21:25:45Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E Yeah I haven\u0027t released it yet, I\u0027m still working on it. Considering the postProcessing needs to be drawn behind it this brings even more complications in the transition between PQS and scaledSpace.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Haven\u0027t seen this particular video but I\u0027ve seen some photos. The result in KSP seems pretty close [https://www.youtube.com/watch?v=zWwITlAYd_A](https://www.youtube.com/watch?v=zWwITlAYd_A)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Btw that does look a lot more natural than it ever would in the stock-sized planets. Looks pretty close to what you see in the config tool/proland even.\n\u003E \n\nYeah I\u0027ve noticed a huge improvement in PQS haze since moving to the most recent version, it all looks so natural and smooth now even on opengl, just look at these ![:o](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png \u0022:o\u0022) !! - Flying around Alaska, absolutely stunning\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/WCGNj/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\n**Edited \u003Ctime datetime=\u00222016-03-09T21:26:42Z\u0022 title=\u002203/09/2016 09:26  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 9, 2016\u003C/time\u003E by pingopete**"},{"CreatedByName":"Arditan427","CreatedById":96857,"CreatedDateTime":"2016-03-09T21:28:38Z","Content":"\u003E \n\u003E \n\u003E 46 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E And could you try in directx 11?\n\u003E \n\nYep, that fixed the artifacts, although it does cause a couple bugs here and there which I can deal with."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-03-09T21:43:33Z","Content":"\u003E \n\u003E \n\u003E 18 minutes ago, pingopete said:\n\u003E \n\u003E \n\u003E Yeah I\u0027ve noticed a huge improvement in PQS haze since moving to the most recent version, it all looks so natural and smooth now even on opengl, just look at these ![:o](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png \u0022:o\u0022) !! - Flying around Alaska, absolutely stunning\n\u003E \n\nGreat, I did do a lot of changes under the hood to get it looking better. Btw does the lens flare not work for you? Also, I\u0027m guessing terrain shadows aren\u0027t working or are disabled from that last shot.\n\n\u003E \n\u003E \n\u003E 15 minutes ago, Arditan427 said:\n\u003E \n\u003E \n\u003E Yep, that fixed the artifacts, although it does cause a couple bugs here and there which I can deal with.\n\u003E \n\nAlright, I will fix it later on if I can narrow down the original issue, but at least there\u0027s this workaround for now.\n\n**Edited \u003Ctime datetime=\u00222016-03-09T21:44:27Z\u0022 title=\u002203/09/2016 09:44  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 9, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2016-03-09T21:45:50Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, blackrack said:\n\u003E \n\u003E \n\u003E Great, I did do a lot of changes under the hood to get it looking better. Btw does the lens flare not work for you or did you just take these screens using the screenshot supersampling function? Also, I\u0027m guessing terrain shadows aren\u0027t working or are disabled from that last shot.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Alright, I will fix it later on if I can narrow down the original issue, but at least there\u0027s this workaround for now.\n\u003E \n\nTerrain shadows are working but I couldn\u0027t get the sunflare to work, I tried up scaling the size values of the flare components in the config but nothing to see in game :/"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-03-09T21:48:23Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, pingopete said:\n\u003E \n\u003E \n\u003E Terrain shadows are working but I couldn\u0027t get the sunflare to work, I tried up scaling the size values of the flare components in the config but nothing to see in game :/\n\u003E \n\nAre you on the latest version (0.0233)? There was this issue with the sun flare not working in OpenGL but I thought I fixed it 0.0232. Do you occasionally get a random pink square near or on your craft when launching or switching to a craft in orbit?\n\nEdited: Also, you can test if it works with the stock game.\n\n**Edited \u003Ctime datetime=\u00222016-03-09T21:50:43Z\u0022 title=\u002203/09/2016 09:50  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 9, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2016-03-09T21:52:42Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, blackrack said:\n\u003E \n\u003E \n\u003E Are you on the latest version (0.0233)? There was this issue with the sun flare not working in OpenGL but I thought I fixed it 0.0232. Do you occasionally get a random pink square near or on your craft when launching or switching to a craft in orbit?\n\u003E \n\nI\u0027m on that version, and nah I don\u0027t get that square either, might have messed up the config or seomthing, are the 2nd values in the config for the first two flares their scale?\n\n    //sunFlare.png\n    flareSettings = 0.45,1,0.85\n    \n    //sunSpikes.png\n    spikesSettings = 0.6,1,1"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-03-09T21:54:50Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, pingopete said:\n\u003E \n\u003E \n\u003E I\u0027m on that version, and nah I don\u0027t get that square either, might have messed up the config or seomthing, are the 2nd values in the config for the first two flares their scale?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     //sunFlare.png\n\u003E     flareSettings = 0.45,1,0.85\n\u003E     \n\u003E     //sunSpikes.png\n\u003E     spikesSettings = 0.6,1,1\n\u003E \n\nThe last values are the scale (inverse of), but even with the default scale you should see the other components. So try if it works with the base game.\n\n**Edited \u003Ctime datetime=\u00222016-03-09T21:56:12Z\u0022 title=\u002203/09/2016 09:56  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 9, 2016\u003C/time\u003E by blackrack**"}]}