{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":74,"Articles":[{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-11-12T20:53:56Z","Content":"\u003E \n\u003E Btw I noticed something really weird the other day, while testing multiplanet support I noticed memory was never freed after unloading a planet (from scatterer). I was doing everything correctly so this was completely weird. I decided to just call the collector myself after each unload operation and it just worked, memory was being freed correctly and everything. So what the hell, does KSP never call the collector on it\u0027s own?\n\nProbably. One of the downsides of c# is that the built-in GC makes devs less than responsible with memory. Always call the destructor when removing things."},{"CreatedByName":"NAMROG","CreatedById":41280,"CreatedDateTime":"2015-11-12T21:37:54Z","Content":"Curious, but is there a reason why, at times, Kerbin is a blue marble with no land from orbit? I\u0027ve noticed it every once in a while and was wondering if there\u0027s a fix?"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-11-12T23:52:03Z","Content":"\u0022RSS Compatibility\u0022 isn\u0027t worth a Dingo\u0027s Kidneys.\n\nWhen it is enabled, the game slows to a standstill and there is NREs. Not a spam of them, but they are definitely there, and definitely caused by Scatterer. I have no issues with Scatterer in stock scale, only in RSS.\n\n[Output_Log.txt](https://www.dropbox.com/s/i8n7689w4vy1ddn/output_log.txt?dl=0)\n\nEDIT: The problem is that ParentPlanetTransformName = Kerbin instead of ParentPlanetTransformName = Earth. It should say Earth, not Kerbin. Changing that fixed it.\n\nUnfortunately the orbit shader does not appear to function. :/\n\n**Edited \u003Ctime datetime=\u00222015-11-12T23:58:44Z\u0022 title=\u002211/12/2015 11:58  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 12, 2015\u003C/time\u003E by GregroxMun**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-12T23:59:21Z","Content":"\u003E \n\u003E \u0022RSS Compatibility\u0022 isn\u0027t worth a Dingo\u0027s Kidneys.\n\u003E When it is enabled, the game slows to a standstill and there is NREs. Not a spam of them, but they are definitely there, and definitely caused by Scatterer. I have no issues with Scatterer in stock scale, only in RSS.\n\u003E \n\u003E [Output_Log.txt](https://www.dropbox.com/s/i8n7689w4vy1ddn/output_log.txt?dl=0)\n\u003E \n\u003E EDIT: The problem is that ParentPlanetTransformName = Kerbin instead of ParentPlanetTransformName = Earth. It should say Earth, not Kerbin. Changing that fixed it.\n\nCould you stop complaining about this? Every couple pages I have to say this was already reported."},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-11-13T00:15:08Z","Content":"\u003E \n\u003E Could you stop complaining about this? Every couple pages I have to say this was already reported.\n\nI apologize. Putting it in the OP would help?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-13T00:25:49Z","Content":"\u003E \n\u003E I apologize. Putting it in the OP would help?\n\ndone."},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-11-13T02:49:58Z","Content":"\u003E \n\u003E done.\n\nYou could put also \u0022Change the Kerbin in ParentPlanetTransformName to say Earth\u0022 so that it is helpful to players who want it to work. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"G\u0026#039;th","CreatedById":98595,"CreatedDateTime":"2015-11-13T04:30:34Z","Content":"Is there any way to get rid of the \u0022banding\u0022 that occurs at certain altitudes?"},{"CreatedByName":"Elthy","CreatedById":63317,"CreatedDateTime":"2015-11-13T10:43:02Z","Content":"\u003E \n\u003E There would be a limit... I think it is 8K for unity (and most hardware) but I could be wrong.\n\nDamn, thats sad. With 64bit we could finaly have almost unlimited detail, afaik Nasa released Earth textures with over 20000\\*20000 pixels."},{"CreatedByName":"lextacy","CreatedById":107955,"CreatedDateTime":"2015-11-13T11:23:31Z","Content":"![Screenshot%20from%202015-11-13%20052001.png](http://i1164.photobucket.com/albums/q561/chadro_6963/Screenshot%20from%202015-11-13%20052001.png)\n\nGetting this problem after installing Scatterer for RSS and using EVE/RVE overhaul. There is harsh borders as you can see, plus there is a black halo around the sun. I removed the clouds so you guys can see the problem better."},{"CreatedByName":"Hattivat","CreatedById":110255,"CreatedDateTime":"2015-11-13T16:57:17Z","Content":"I think RVE pretty explicitly instructs you not to use the RSS version of Scaterrer in its readme."},{"CreatedByName":"mythbusters844","CreatedById":72313,"CreatedDateTime":"2015-11-14T01:12:45Z","Content":"\u003E \n\u003E You could put also \u0022Change the Kerbin in ParentPlanetTransformName to say Earth\u0022 so that it is helpful to players who want it to work. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nYou could also try to realize that not all players are like you and actually try to figure things out on their own ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nIt\u0027s also already there:\n\n\u003E \n\u003E RSS compatibility:\n\u003E [spoiler: click to see]\n\u003E \n\u003E RSS only changes the name of the CelestialBody to Earth; it leaves the scaledversion transform/gameobject named Kerbin. Scatterer now handles this, if you wish to play with RSS, put the following in the \u0022config/PlanetName.txt\u0022 file\n\u003E \n\u003E ParentPlanetCelestialBodyName = Earth\n\u003E \n\u003E ParentPlanetTransformName = Kerbin\n\n**Edited \u003Ctime datetime=\u00222015-11-14T02:18:06Z\u0022 title=\u002211/14/2015 02:18  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 14, 2015\u003C/time\u003E by mythbusters844**"},{"CreatedByName":"lextacy","CreatedById":107955,"CreatedDateTime":"2015-11-14T02:17:53Z","Content":"\u003E \n\u003E I think RVE pretty explicitly instructs you not to use the RSS version of Scaterrer in its readme.\n\n\u003E \n\u003E Is there any way to get rid of the \u0022banding\u0022 that occurs at certain altitudes?\n\nI went back and checked install....it appears I never even had scatter installed fully. My bad."},{"CreatedByName":"Goddess Bhavani","CreatedById":14001,"CreatedDateTime":"2015-11-14T02:21:46Z","Content":"1.0.5 near stock install - during one late afternoon I looked at the slowly setting sun and its awesome lens flare and suddenly my framerates dropped to 1/3. Running on a nVidia 850M here. Any way to get the old lens flare back (or tell me off to not look at the sun? ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)) hehe"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-11-14T02:36:11Z","Content":"\u003E \n\u003E 1.0.5 near stock install - during one late afternoon I looked at the slowly setting sun and its awesome lens flare and suddenly my framerates dropped to 1/3. Running on a nVidia 850M here. Any way to get the old lens flare back (or tell me off to not look at the sun? ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)) hehe\n\nYeah jeez Pandoras Kitten! No staring at the sun! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\n![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"lextacy","CreatedById":107955,"CreatedDateTime":"2015-11-14T05:44:51Z","Content":"\u003E \n\u003E 1.0.5 near stock install - during one late afternoon I looked at the slowly setting sun and its awesome lens flare and suddenly my framerates dropped to 1/3. Running on a nVidia 850M here. Any way to get the old lens flare back (or tell me off to not look at the sun? ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)) hehe\n\nto get old flare back you will have to get the sharedasset back from an original KSP repo , unless of course you backed up that file you replaced to get the sunflare"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-11-14T16:13:06Z","Content":"\u003E \n\u003E You could also try to realize that not all players are like you and actually try to figure things out on their own ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\u003E It\u0027s also already there:\n\nI *did* figure it out on my own, and the instructions in the RSS compatibility spoiler are *wrong*, because they tell you to put ParentPlanetTransformName equal to Kerbin instead of Earth.\n\n\u003E \n\u003E EDIT: The problem is that ParentPlanetTransformName = Kerbin instead of ParentPlanetTransformName = Earth. It should say Earth, not Kerbin. Changing that fixed it.\n\nI figured that out on my own. And given that Blackrack said:\n\n\u003E \n\u003E Every couple pages I have to say this was already reported.\n\nIt is entirely possible that a lot of players *were* the type of people who don\u0027t try and figure things out on their own. And for those players, a simple fix of the part of the OP that says ParentPlanetTransformName = Kerbin to change it to ParentPlanetTransformName = Earth (which makes it work) would suffice. *Simply putting the correct information in the OP* is what I was suggesting. \n\nThis would be helpful because not all players are like me, they don\u0027t all actually try to figure things out on their own. (see what I did there?)\n\n- - - Updated - - -\n\nIn fact, pretty much full RSS compatibility can be had if you have:\n\nSettings config\n\n    MapViewScale = 10.61//10.61 because Earth is slightly larger than 10x Kerbin.\n\nand\n\nPlanetName config\n\n    ParentPlanetCelestialBodyName = EarthParentPlanetTransformName = Earth\n\nProof:\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/ys5xc)\n\n*Note: In RSS using KSP 1.0.5 you will also get MissingFieldExceptions logspam. This is because of the Kopernicus plugin not being compatible, not because of RSS config and/or Scatterer.*\n\n**Edited \u003Ctime datetime=\u00222015-11-14T16:32:19Z\u0022 title=\u002211/14/2015 04:32  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 14, 2015\u003C/time\u003E by GregroxMun**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-14T18:09:57Z","Content":"NathanKell himself said the transform name should be left as kerbin (hardcoded) and the celestialbody name is earth. I don\u0027t know how you\u0027re getting this to work but something else must be broken somewhere. The op doesn\u0027t have false information."},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-11-14T18:34:16Z","Content":"\u003E \n\u003E NathanKell himself said the transform name should be left as kerbin (hardcoded) and the celestialbody name is earth. I don\u0027t know how you\u0027re getting this to work but something else must be broken somewhere. The op doesn\u0027t have false information.\n\nWell at the very least, it can be made to work this way. I am confused why this works too, actually. It *definitely* works with the changes to the config that I made. I think that since RSS converted to the Kopernicus plugin it is a new body instead of modifying the stock Kerbin, which might have something to do with it.\n\nRSSKopernicus.cfg\n\n    Body\t{\t\tname = Kerbin\t\t//nameLater = Earth\t\tcbNameLater = Earth\t\tTemplate\t\t{\t\t\tname = Kerbin\t\t}                ... more stuff         }\n\nActually, that does say the name = Kerbin. I really am confused as to why the fix works. The only thing I can say with certainty is that changing the scatterer config seems to work well except for one thing: The tracking station does not show any scatterer on it at all, only in-flight map view.\n\n![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\n**Edited \u003Ctime datetime=\u00222015-11-14T18:41:19Z\u0022 title=\u002211/14/2015 06:41  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 14, 2015\u003C/time\u003E by GregroxMun**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-14T19:08:21Z","Content":"Effects are disabled on the tracking station right now, I might enable them later though I don\u0027t really see the point, I want the tracking station screen to be snappy and load fast"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-11-14T19:30:10Z","Content":"\u003E \n\u003E Effects are disabled on the tracking station right now, I might enable them later though I don\u0027t really see the point, I want the tracking station screen to be snappy and load fast\n\nI figured that was the case, I just forgot if it was like that normally or not."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-11-14T19:37:09Z","Content":"\u003E \n\u003E Effects are disabled on the tracking station right now, I might enable them later though I don\u0027t really see the point, I want the tracking station screen to be snappy and load fast\n\nIs there a way to have them off by default in map mode? I kinda want my map to be...a map. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-11-14T19:59:52Z","Content":"\u003E \n\u003E Is there a way to have them off by default in map mode? I kinda want my map to be...a map. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nI\u0027ll make this an option.\n\nEdited: We space engine now\n\n![ba2P6C1.jpg](http://i.imgur.com/ba2P6C1.jpg)\n\n![LAMMZY4.jpg](http://i.imgur.com/LAMMZY4.jpg)\n\n(decided to stick Kerbin\u0027s atmo on Jool for testing, it doesn\u0027t even look half bad, will try custom, greener configs soon)\n\n**Edited \u003Ctime datetime=\u00222015-11-14T21:37:12Z\u0022 title=\u002211/14/2015 09:37  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 14, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-11-14T22:14:34Z","Content":"\u003E \n\u003E I\u0027ll make this an option.\n\u003E Edited: We space engine now\n\u003E \n\u003E [http://i.imgur.com/ba2P6C1.jpg](http://i.imgur.com/ba2P6C1.jpg)\n\u003E \n\u003E [http://i.imgur.com/LAMMZY4.jpg](http://i.imgur.com/LAMMZY4.jpg)\n\u003E \n\u003E (decided to stick Kerbin\u0027s atmo on Jool for testing, it doesn\u0027t even look half bad, will try custom, greener configs soon)\n\nA few days ago I looked at pictures of the real planets and remembered that for Little Green Men from Mars I had made Mars\u0027 atmosphere rims blue, and wondered what the stock planets would look like with blue rims. They look pretty great even in with the default rim effects (modified using Kopernicus to all use bluish tinted ramps) and here\u0027s what I got:\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/IrYlu)\n\nI was going to release it but then remembered scatterer was a thing that was much better anyway, and it would soon have multi-planet support."},{"CreatedByName":"TyrannoFan","CreatedById":87395,"CreatedDateTime":"2015-11-14T22:48:21Z","Content":"Do those planets (especially Saturn) really have blue tinged edges that are that noticeable? I\u0027m no expert, but could it look like that because of telescope or camera related reasons?"}]}