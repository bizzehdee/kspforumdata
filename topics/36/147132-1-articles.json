{"TopicId":147132,"ForumId":36,"TopicTitle":"Saving mod data to sfs files","CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2016-09-05T17:12:40Z","PageNum":1,"Articles":[{"CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2016-09-05T17:12:40Z","Content":"\n\u003Cp\u003E\nHello there!\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve been working on my mod, PersistentRotation, for quite a long time. If you never heard of it make sure to check it out, to know what I am talking about.\n\u003C/p\u003E\n\u003Cp\u003E\nThe mod is currently saving it\u0027s data into a custom made cfg file. Every time the game quicksaves or switches scenes, a new file is generated.\n\u003C/p\u003E\n\u003Cp\u003E\nWhile I have added code to clean up deprecated versions of the file, I still have the feeling that it isn\u0027t the optimal solution to store the data.\n\u003C/p\u003E\n\u003Cp\u003E\nA while ago, I have heard about saving mod data to the game\u0027s sfs files. This would of course be a a lot more effective way of storing data.\n\u003C/p\u003E\n\u003Cp\u003E\nNow, the problem is, my mod saves data per vessel and has no custom parts at all.\n\u003C/p\u003E\n\u003Cp\u003E\nCould someone explain me how to do this or send me the corrseponding piece of code?\n\u003C/p\u003E\n\u003Cp\u003E\nThanks in advance.\n\u003C/p\u003E\n"},{"CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2016-09-05T17:31:32Z","Content":"\n\u003Cp\u003E\nSo I\u0027ve found [KSPField(isPersistant = \u003Cspan\u003Efalse\u003C/span\u003E) in MechJeb\u0027s source code.\n\u003C/p\u003E\n\u003Cp\u003E\nBut that only works for part modules, right?\n\u003C/p\u003E\n"},{"CreatedByName":"Boris-Barboris","CreatedById":133181,"CreatedDateTime":"2016-09-05T17:32:18Z","Content":"\n\u003Cp\u003E\nVesselModule may be helpful as a simple storage wrapper, when filled with persistent KSPFields.\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/113689-vessel-modules-discussion/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2016-09-05T18:28:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222743048\u0022 data-ipsquote-contentid=\u0022147132\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473096738\u0022 data-ipsquote-userid=\u0022133181\u0022 data-ipsquote-username=\u0022Boris-Barboris\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n55 minutes ago, Boris-Barboris said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nVesselModule may be helpful as a simple storage wrapper, when filled with persistent KSPFields.\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/113689-vessel-modules-discussion/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo you have any examples or a post that explains how to? I found nothing.\n\u003C/p\u003E\n"},{"CreatedByName":"nathan1","CreatedById":144486,"CreatedDateTime":"2016-09-05T18:31:34Z","Content":"\n\u003Cp\u003E\nYou could just move the data into a Scenario (which KSP will save into the persistent.sfs file) instead of manually saving it into\u00A0a separate file. Many mods save their data in a Scenario like this (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/138917-112-altfunding-v020/\u0022 rel=\u0022\u0022\u003EAltFunding\u003C/a\u003E\u00A0which I made does this,\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/105202-113-usi-life-support-044/\u0022 rel=\u0022\u0022\u003E\u003Cabbr title=\u0022Umbra Space Industries (a collection of mods)\u0022\u003EUSI\u003C/abbr\u003E Life Support\u003C/a\u003E\u00A0by RoverDude does,\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/72679-113-scansat-v166-real-scanning-real-science-at-warp-speed-august-18-2016/\u0022 rel=\u0022\u0022\u003ESCANSat\u003C/a\u003E\u00A0does, etc).\n\u003C/p\u003E\n\u003Cp\u003E\nThe things to look for are subclasses of\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EScenarioModule\u003C/span\u003E and calls to\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EGame.AddProtoScenarioModule()\u003C/span\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve never used VesselModules, but converting to use that would probably be a bigger change (but I also suspect it would be a better approach in the long-term since your data really is specifically tied to each vessel\u00A0and not just generic per-save information).\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: I had assumed VesselModule can persist data the same way PartModule does, but the post Boris linked above says that VesselModule itself provides no facilities for persistence. If so, then \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EScenarioModule\u003C/span\u003E is what you\u0027ll want.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-05T18:44:54Z\u0022 title=\u002209/05/2016 06:44  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 5, 2016\u003C/time\u003E by nathan1\u003C/strong\u003E\n\u003C/span\u003E\n"}]}