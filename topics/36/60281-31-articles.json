{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":31,"Articles":[{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-01-07T12:05:19Z","Content":"\n\u003Cp\u003EGiven that the sketches you linked to work, try to run the following:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[COLOR=#339933]#include \u0022LedControl.h\u0022[/COLOR]\u003Cbr\u003E[COLOR=#666666][I]// Arduino Pin 7 to DIN, 6 to Clk, 5 to LOAD, no.of devices is 1[/I][/COLOR]\u003Cbr\u003ELedControl lc[COLOR=#339933]=[/COLOR]LedControl[COLOR=#009900]([/COLOR][COLOR=#0000dd]7[/COLOR][COLOR=#339933],[/COLOR][COLOR=#0000dd]6[/COLOR][COLOR=#339933],[/COLOR][COLOR=#0000dd]5[/COLOR][COLOR=#339933],[/COLOR][COLOR=#0000dd]1[/COLOR][COLOR=#009900])[/COLOR][COLOR=#339933];[/COLOR]\u003Cbr\u003E[COLOR=#993333]void[/COLOR] setup[COLOR=#009900]([/COLOR][COLOR=#009900])[/COLOR]\u003Cbr\u003E[COLOR=#009900]{[/COLOR]\u003Cbr\u003E [COLOR=#666666][I]// Initialize the MAX7219 device[/I][/COLOR]\u003Cbr\u003E  lc.[COLOR=#202020]shutdown[/COLOR][COLOR=#009900]([/COLOR][COLOR=#0000dd]0[/COLOR][COLOR=#339933],[/COLOR][COLOR=#000000][B]false[/B][/COLOR][COLOR=#009900])[/COLOR][COLOR=#339933];[/COLOR]   [COLOR=#666666][I]// Enable display[/I][/COLOR]\u003Cbr\u003E  lc.[COLOR=#202020]setIntensity[/COLOR][COLOR=#009900]([/COLOR][COLOR=#0000dd]0[/COLOR][COLOR=#339933],[/COLOR][COLOR=#0000dd]10[/COLOR][COLOR=#009900])[/COLOR][COLOR=#339933];[/COLOR]  [COLOR=#666666][I]// Set brightness level (0 is min, 15 is max)[/I][/COLOR]\u003Cbr\u003E  lc.[COLOR=#202020]clearDisplay[/COLOR][COLOR=#009900]([/COLOR][COLOR=#0000dd]0[/COLOR][COLOR=#009900])[/COLOR][COLOR=#339933];[/COLOR]     [COLOR=#666666][I]// Clear display register[/I][/COLOR]\u003Cbr\u003E[COLOR=#009900]}[/COLOR]\u003Cbr\u003E[COLOR=#993333]void[/COLOR] loop[COLOR=#009900]([/COLOR][COLOR=#009900])[/COLOR]\u003Cbr\u003E[COLOR=#009900]{[/COLOR]\u003Cbr\u003E\u003Cbr\u003E  long alt = 23456789; // Raising this so digits are different from digit positions\u003Cbr\u003E\u003Cbr\u003E  int tens;\u003Cbr\u003E  int digit;\u003Cbr\u003E\u003Cbr\u003E  for(int i = 7; i \u0026gt; -1; i--) {  //we need to start lowest digit first\u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    tens = alt / 10;                  \u003Cbr\u003E    digit = alt - (10*tens);\u003Cbr\u003E    alt = tens; \u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E    Serial.Print(i);\u003Cbr\u003E    Serial.Print(\u0027 \u0027);\u003Cbr\u003E    Serial.Println(digit);\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003E  delay(70);\u003Cbr\u003E[COLOR=#009900]}[/COLOR]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ERun this with your serial monitor open, it should read\u003C/p\u003E\u003Cp\u003E7 9\u003C/p\u003E\u003Cp\u003E6 8\u003C/p\u003E\u003Cp\u003E5 7\u003C/p\u003E\u003Cp\u003E4 6\u003C/p\u003E\u003Cp\u003E3 5\u003C/p\u003E\u003Cp\u003E2 4\u003C/p\u003E\u003Cp\u003E1 3\u003C/p\u003E\u003Cp\u003E0 2\u003C/p\u003E\u003Cp\u003Eand your display should read 23456789 if I am able to modify sketches correctly without an Arduino at hand.\u003C/p\u003E\u003Cp\u003EThen try to replace my way of seperating digits with MrOnaks, which is a far more eloquent way of doing things, and see if it makes any difference. That is, replace\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eint tens;\u003C/pre\u003E\u003Cp\u003E with \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eint digitPlace = 1;\u003C/pre\u003E\u003Cp\u003E and\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    tens = alt / 10;                  \u003Cbr\u003E    digit = alt - (10*tens);\u003Cbr\u003E    alt = tens;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWith \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E    digit = (alt / digitPlace) % 10;\u003Cbr\u003E    digitPlace = digitPlace *10;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2015-01-07T12:14:51Z","Content":"\n\u003Cp\u003EZitronen\u0027s approach sure is viable but he already knows my vague dislike of Strings on an Arduino. You might want to give his approach a shot though since it is working for him.\u003C/p\u003E\u003Cp\u003EYou can also replace your loop() function with this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid loop()\u003Cbr\u003E{  \u003Cbr\u003E  // update KSP data\u003Cbr\u003E  input();\u003Cbr\u003E\u003Cbr\u003E  byte digit;\u003Cbr\u003E  byte digitPlace = 1;\u003Cbr\u003E\u003Cbr\u003E  for (byte i = 0; i \u0026lt; 8; i\u002B\u002B) { \u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    digit = ((unsigned long) (VData.Alt / digitPlace) % 10);\u003Cbr\u003E    digitPlace = digitPlace *10;\u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003E  delay(70); // roughly matches the default update frequency of KSPIO\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis is extremely close to the code that I use myself to read the altitude and on my display it works.\u003C/p\u003E\u003Cp\u003EYou might get an error about the (unsigned long) typecast - if you do, try (uint32_t) instead but I doubt that works in the Arduino IDE.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EUpdate\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EIn case that also doesn\u0027t work, try this\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid loop()\u003Cbr\u003E{  \u003Cbr\u003E  // update KSP data\u003Cbr\u003E  input();\u003Cbr\u003E\u003Cbr\u003E  lc.setDigit(0, 0, ((unsigned long) (VData.Alt / 10000000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 1, ((unsigned long) (VData.Alt / 1000000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 2, ((unsigned long) (VData.Alt / 100000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 3, ((unsigned long) (VData.Alt / 10000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 4, ((unsigned long) (VData.Alt / 1000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 5, ((unsigned long) (VData.Alt / 100) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 6, ((unsigned long) (VData.Alt / 10) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 7, ((unsigned long) VData.Alt % 10), false); \u003Cbr\u003E\u003Cbr\u003E  delay(70); // roughly matches the default update frequency of KSPIO\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat\u0027s as simple as it gets.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-07T12:32:01Z\u0022 title=\u002201/07/2015 12:32  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 7, 2015\u003C/time\u003E by MrOnak\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2015-01-07T18:16:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003EZitronen\u0027s approach sure is viable but he already knows my vague dislike of Strings on an Arduino. You might want to give his approach a shot though since it is working for him.\u003Cp\u003EYou can also replace your loop() function with this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid loop()\u003Cbr\u003E{  \u003Cbr\u003E  // update KSP data\u003Cbr\u003E  input();\u003Cbr\u003E\u003Cbr\u003E  byte digit;\u003Cbr\u003E  byte digitPlace = 1;\u003Cbr\u003E\u003Cbr\u003E  for (byte i = 0; i \u0026lt; 8; i\u002B\u002B) { \u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    digit = ((unsigned long) (VData.Alt / digitPlace) % 10);\u003Cbr\u003E    digitPlace = digitPlace *10;\u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003E  delay(70); // roughly matches the default update frequency of KSPIO\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis just displays 00000000 even after the scene loads and KSP serial detects the Com port\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIn case that also doesn\u0027t work, try this\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid loop()\u003Cbr\u003E{  \u003Cbr\u003E  // update KSP data\u003Cbr\u003E  input();\u003Cbr\u003E\u003Cbr\u003E  lc.setDigit(0, 0, ((unsigned long) (VData.Alt / 10000000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 1, ((unsigned long) (VData.Alt / 1000000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 2, ((unsigned long) (VData.Alt / 100000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 3, ((unsigned long) (VData.Alt / 10000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 4, ((unsigned long) (VData.Alt / 1000) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 5, ((unsigned long) (VData.Alt / 100) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 6, ((unsigned long) (VData.Alt / 10) % 10), false);\u003Cbr\u003E  lc.setDigit(0, 7, ((unsigned long) VData.Alt % 10), false); \u003Cbr\u003E\u003Cbr\u003E  delay(70); // roughly matches the default update frequency of KSPIO\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat\u0027s as simple as it gets.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESame again I\u0027m afraid, just 00000000 and nothing else.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Freshmeat\u0022 data-cite=\u0022Freshmeat\u0022\u003E\u003Cdiv\u003EGiven that the sketches you linked to work, try to run the following:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[COLOR=#339933]#include \u0022LedControl.h\u0022[/COLOR]\u003Cbr\u003E[COLOR=#666666][I]// Arduino Pin 7 to DIN, 6 to Clk, 5 to LOAD, no.of devices is 1[/I][/COLOR]\u003Cbr\u003ELedControl lc[COLOR=#339933]=[/COLOR]LedControl[COLOR=#009900]([/COLOR][COLOR=#0000dd]7[/COLOR][COLOR=#339933],[/COLOR][COLOR=#0000dd]6[/COLOR][COLOR=#339933],[/COLOR][COLOR=#0000dd]5[/COLOR][COLOR=#339933],[/COLOR][COLOR=#0000dd]1[/COLOR][COLOR=#009900])[/COLOR][COLOR=#339933];[/COLOR]\u003Cbr\u003E[COLOR=#993333]void[/COLOR] setup[COLOR=#009900]([/COLOR][COLOR=#009900])[/COLOR]\u003Cbr\u003E[COLOR=#009900]{[/COLOR]\u003Cbr\u003E [COLOR=#666666][I]// Initialize the MAX7219 device[/I][/COLOR]\u003Cbr\u003E  lc.[COLOR=#202020]shutdown[/COLOR][COLOR=#009900]([/COLOR][COLOR=#0000dd]0[/COLOR][COLOR=#339933],[/COLOR][COLOR=#000000][B]false[/B][/COLOR][COLOR=#009900])[/COLOR][COLOR=#339933];[/COLOR]   [COLOR=#666666][I]// Enable display[/I][/COLOR]\u003Cbr\u003E  lc.[COLOR=#202020]setIntensity[/COLOR][COLOR=#009900]([/COLOR][COLOR=#0000dd]0[/COLOR][COLOR=#339933],[/COLOR][COLOR=#0000dd]10[/COLOR][COLOR=#009900])[/COLOR][COLOR=#339933];[/COLOR]  [COLOR=#666666][I]// Set brightness level (0 is min, 15 is max)[/I][/COLOR]\u003Cbr\u003E  lc.[COLOR=#202020]clearDisplay[/COLOR][COLOR=#009900]([/COLOR][COLOR=#0000dd]0[/COLOR][COLOR=#009900])[/COLOR][COLOR=#339933];[/COLOR]     [COLOR=#666666][I]// Clear display register[/I][/COLOR]\u003Cbr\u003E[COLOR=#009900]}[/COLOR]\u003Cbr\u003E[COLOR=#993333]void[/COLOR] loop[COLOR=#009900]([/COLOR][COLOR=#009900])[/COLOR]\u003Cbr\u003E[COLOR=#009900]{[/COLOR]\u003Cbr\u003E\u003Cbr\u003E  long alt = 23456789; // Raising this so digits are different from digit positions\u003Cbr\u003E\u003Cbr\u003E  int tens;\u003Cbr\u003E  int digit;\u003Cbr\u003E\u003Cbr\u003E  for(int i = 7; i \u0026gt; -1; i--) {  //we need to start lowest digit first\u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    tens = alt / 10;                  \u003Cbr\u003E    digit = alt - (10*tens);\u003Cbr\u003E    alt = tens; \u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E    Serial.Print(i);\u003Cbr\u003E    Serial.Print(\u0027 \u0027);\u003Cbr\u003E    Serial.Println(digit);\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003E  delay(70);\u003Cbr\u003E[COLOR=#009900]}[/COLOR]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ERun this with your serial monitor open, it should read\u003C/p\u003E\u003Cp\u003E7 9\u003C/p\u003E\u003Cp\u003E6 8\u003C/p\u003E\u003Cp\u003E5 7\u003C/p\u003E\u003Cp\u003E4 6\u003C/p\u003E\u003Cp\u003E3 5\u003C/p\u003E\u003Cp\u003E2 4\u003C/p\u003E\u003Cp\u003E1 3\u003C/p\u003E\u003Cp\u003E0 2\u003C/p\u003E\u003Cp\u003Eand your display should read 23456789 if I am able to modify sketches correctly without an Arduino at hand.\u003C/p\u003E\u003Cp\u003EThen try to replace my way of seperating digits with MrOnaks, which is a far more eloquent way of doing things, and see if it makes any difference. That is, replace\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eint tens;\u003C/pre\u003E\u003Cp\u003E with \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eint digitPlace = 1;\u003C/pre\u003E\u003Cp\u003E and\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    tens = alt / 10;                  \u003Cbr\u003E    digit = alt - (10*tens);\u003Cbr\u003E    alt = tens;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWith \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E    digit = (alt / digitPlace) % 10;\u003Cbr\u003E    digitPlace = digitPlace *10;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGetting an error thrown up when I try to upload...\u003C/p\u003E\u003Cp\u003Esketch_jan07a.ino: In function \u0027void loop()\u0027:\u003C/p\u003E\u003Cp\u003Esketch_jan07a:26: error: invalid use of \u0027class Print\u0027\u003C/p\u003E\u003Cp\u003Esketch_jan07a:27: error: invalid use of \u0027class Print\u0027\u003C/p\u003E\u003Cp\u003Esketch_jan07a:28: error: \u0027class HardwareSerial\u0027 has no member named \u0027Println\u0027\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003ESo the way I\u0027ve been using my 7 segs is by converting the number to a string first using dtostrf(), then writing the string to the LEDs. This way you have better control of the formatting and you can also display letters and symbols.\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Echar SSLED[9] = \u0022--------\u0022;\u003Cbr\u003E\u003Cbr\u003E...\u003Cbr\u003Ebyte decimal = 9; //decimal is where you want the decimal point, set it to \u0026gt;9 if you don\u0027t want it.\u003Cbr\u003E\u003Cbr\u003Edtostrf(round(###put value here###),8,0,SSLED);\u003Cbr\u003Ewrite7Segment(display, SSLED, decimal);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid write7Segment(byte display, char value[9], byte decimal)\u003Cbr\u003E{\u003Cbr\u003E  for (byte j = 0; j\u0026lt;8; j\u002B\u002B) {\u003Cbr\u003E    lc.setChar(display,j,value[j],decimal==j);\u003Cbr\u003E  }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI have a whole convoluted function for moving the decimal point around and displaying the unit on the lcd (see video in first post), I would post it here but it\u0027s kind of hard coded to use only 6 digits.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is very promising as it sounds like you are using both LedSerial and a chip similar to the MAX7219. Where do I put this code... in Void Loop?\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2015-01-07T18:45:28Z","Content":"\n\u003Cp\u003EHmm okay I\u0027m out for now, sorry. Its very difficult to debug your display without having it sitting on my desk where I can poke it. I\u0027ll be hovering around, good luck till then!\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-01-07T19:13:02Z","Content":"\n\u003Cp\u003EWell, my bad with a forgotten init and a capital letter. I was a work so I could not test it. Try this\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#include \u0022LedControl.h\u0022\u003Cbr\u003E// Arduino Pin 7 to DIN, 6 to Clk, 5 to LOAD, no.of devices is 1\u003Cbr\u003ELedControl lc=LedControl(7,6,5,1);\u003Cbr\u003Evoid setup()\u003Cbr\u003E{\u003Cbr\u003E  // initialize serial communication at 9600 bits per second:\u003Cbr\u003E  Serial.begin(9600);\u003Cbr\u003E\u003Cbr\u003E// Initialize the MAX7219 device\u003Cbr\u003E  lc.shutdown(0,false);   // Enable display\u003Cbr\u003E  lc.setIntensity(0,10);  // Set brightness level (0 is min, 15 is max)\u003Cbr\u003E  lc.clearDisplay(0);     // Clear display register\u003Cbr\u003E}\u003Cbr\u003Evoid loop()\u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003E  long alt = 23456789; // Raising this so digits are different from digit positions\u003Cbr\u003E\u003Cbr\u003E  int tens;\u003Cbr\u003E  int digit;\u003Cbr\u003E\u003Cbr\u003E  for(int i = 7; i \u0026gt; -1; i--) {  //we need to start lowest digit first\u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    tens = alt / 10;                  \u003Cbr\u003E    digit = alt - (10*tens);\u003Cbr\u003E    alt = tens; \u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E    Serial.print(i);\u003Cbr\u003E    Serial.print(\u0027 \u0027);\u003Cbr\u003E    Serial.println(digit);\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003E  delay(70);\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd MrOnak, if I understand the syntax correct in the reference, I think typecasting looks like \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ealt = long(VData.Alt)\u003C/pre\u003E\u003Cp\u003E instead of \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ealt = (long)(VData.Alt)\u003C/pre\u003E\u003Cp\u003E. That might be the reason alt reads a bunch of zeroes.\u003C/p\u003E\u003Cp\u003EAnd for sopmething completely different. I\u0027d like to hook up a string of MAX7219\u0027s, a 74HC595 and some CD4021B\u0027s for various inputs and outputs. Is it possible for the three chips to share clock pin, and for the 74HC595 and MAX7219 to share data pin, so I can do it in 6 pins (clock, data in, data out, latch 1, latch 2, latch 3)?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-07T19:21:28Z\u0022 title=\u002201/07/2015 07:21  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 7, 2015\u003C/time\u003E by Freshmeat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2015-01-07T19:18:12Z","Content":"\n\u003Cp\u003Elong() typecasts to a signed long. But I want to typecast to an unsigned long which the Arduino \u0022language special\u0022 doesn\u0027t document. Hence the (unsigned long) variant. That\u0027s actually how it is done in C, only arduino thought wrapping another shroud of mystery over basic language constructs was required \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnyway, long() might also work but I highly doubt that this is the problem. The code I\u0027m pasting actually works on an LCD so.... I\u0027m really out of ideas - for now.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2015-01-07T20:18:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Freshmeat\u0022 data-cite=\u0022Freshmeat\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ERun this with your serial monitor open, it should read\u003C/p\u003E\u003Cp\u003E7 9\u003C/p\u003E\u003Cp\u003E6 8\u003C/p\u003E\u003Cp\u003E5 7\u003C/p\u003E\u003Cp\u003E4 6\u003C/p\u003E\u003Cp\u003E3 5\u003C/p\u003E\u003Cp\u003E2 4\u003C/p\u003E\u003Cp\u003E1 3\u003C/p\u003E\u003Cp\u003E0 2\u003C/p\u003E\u003Cp\u003Eand your display should read 23456789 if I am able to modify sketches correctly without an Arduino at hand.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, updated and uploaded... but the display now shows 9-----00 (where - represents a blank digit)\u003C/p\u003E\u003Cp\u003ESerial monitor shows a constant stream of 2 digit numbers scrolling up too fast to read.\u003C/p\u003E\u003Cp\u003EI don\u0027t know if it is of any use but here is the data sheet for the type of chip I\u0027m using (seems to be standard chip for most 7 segments arduino boards) \u003Ca href=\u0022https://www.sparkfun.com/datasheets/Components/General/COM-09622-MAX7219-MAX7221.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.sparkfun.com/datasheets/Components/General/COM-09622-MAX7219-MAX7221.pdf\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Echar SSLED[9] = \u0022--------\u0022;\u003Cbr\u003E\u003Cbr\u003E...\u003Cbr\u003Ebyte decimal = 9; //decimal is where you want the decimal point, set it to \u0026gt;9 if you don\u0027t want it.\u003Cbr\u003E\u003Cbr\u003Edtostrf(round(###put value here###),8,0,SSLED);\u003Cbr\u003Ewrite7Segment(display, SSLED, decimal);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid write7Segment(byte display, char value[9], byte decimal)\u003Cbr\u003E{\u003Cbr\u003E  for (byte j = 0; j\u0026lt;8; j\u002B\u002B) {\u003Cbr\u003E    lc.setChar(display,j,value[j],decimal==j);\u003Cbr\u003E  }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETry as I might I can\u0027t find anywhere to paste these bits of code that doesn\u0027t just throw up a pile of errors... is there some code missing? Remember... I\u0027m not a coder, I\u0027m a prop builder \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Never assume I can fill in the blanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E I get there in the end with help though, managed to master switches, warning lights and analogue gauges, determined to crack this one too to complete my build!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-07T20:05:43Z\u0022 title=\u002201/07/2015 08:05  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 7, 2015\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-01-08T07:26:41Z","Content":"\n\u003Cp\u003E@MrOnak: Thanks, I learn something new every day by this. Eventually, I probably will have to learn C, but I\u0027d like to put it off as long as possible. @Mulbin: If you get rows of two single numbers on the serial monitor, I am pretty certain you get the right data out in the digit and i variables. Maybe try to increase from delay(70) to delay(500) so you can read the numbers on the serial. But I am at a total loss as to why they dont get written on the display.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2015-01-08T08:28:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003Elong() typecasts to a signed long. But I want to typecast to an unsigned long which the Arduino \u0022language special\u0022 doesn\u0027t document. Hence the (unsigned long) variant. That\u0027s actually how it is done in C, only arduino thought wrapping another shroud of mystery over basic language constructs was required \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003Cp\u003EAnyway, long() might also work but I highly doubt that this is the problem. The code I\u0027m pasting actually works on an LCD so.... I\u0027m really out of ideas - for now.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Euint32_t, uin8_t and stuff all work just fine in the Arduino IDE, \u0022Arduino\u0022 is just C (as in exactly the same as C) with some added libraries. You can also do low level stuff like PORTD = 0x00 or even inline assembly code in the IDE. It\u0027s just a bit primitive compared to a \u0022proper\u0022 IDE.\u003C/p\u003E\u003Cp\u003EInstead of trying to typecast stuff have you tried the built in round() function? Seems like you guys are stuck on some kind of weird type conversion problem. If that still doesn\u0027t work you can try my char array method.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2015-01-08T09:45:05Z","Content":"\n\u003Cp\u003E@Zitronen: You\u0027re right of course. What makes me mad is that the Arduino reference (as an example) prominently documents int(), long() and other functions for typecasting, but makes no mention of the more ..hmm... traditional? way of (int) or (long) - or in fact (uint32_t). Since there is no unsignedlong() typecast wrapper in the Arduino IDE I believe that\u0027s a serious problem especially for people who don\u0027t have a C background when they start with the Arduino. Some tasks simply appear not to be solvable if all you have is the reference.\u003C/p\u003E\u003Cp\u003EOf course it doesn\u0027t help that some of the more essential Arduino wrappers like digitalWrite() require so much more clock cycles and so much more memory (the library that includes them) that people frequently recommend getting a beefier microcontroller to solve trivial tasks. See this instructable for an admittedly not very indepth example of the performance hit with Arduino libraries: \u003Ca href=\u0022http://www.instructables.com/id/Arduino-is-Slow-and-how-to-fix-it/?ALLSTEPS\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.instructables.com/id/Arduino-is-Slow-and-how-to-fix-it/?ALLSTEPS\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAfter saying all this, don\u0027t get me wrong. Arduino in my opinion is still the best option to get started with microcontrollers, partly of course because of the wrappers. However some of the wrapping goes too far (in my opinion, anyway) and the documentation available lacks an \u0022where to go from here\u0022 section if you know what I mean.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2015-01-08T16:33:31Z","Content":"\n\u003Cp\u003E@Zitronen Any chance you could spare the time to help me get my board running? Sounds like you\u0027ve already got 7 segments working with LedControl and a Max7219, but the little bits of code you\u0027ve shown aren\u0027t enough for a code noob like me to know what to do with!\u003C/p\u003E\n"},{"CreatedByName":"carlosfandango","CreatedById":134420,"CreatedDateTime":"2015-01-09T08:59:41Z","Content":"\n\u003Cp\u003EStill waiting on parts for my panel....! Looks like it will take a while before I\u0027m at the same stage (ha ha) as some of you chaps on here. I\u0027m hoping to machine some parts for my meters today, these are going to use little stepper motors so I can get a 270 degree needle swing. I\u0027m also planning on making a somewhat elaborate altitude meter with an embedded 7 segment display and a stepper driven needle. Hopefully this will come together OK, when I have more to display other than just hot air, I\u0027ll post some images.\u003C/p\u003E\u003Cp\u003EI still have a few questions...\u003C/p\u003E\u003Cp\u003EAlthough I\u0027m going to be using the Arduino as my main board (actually a ChipKit Max32) I\u0027m planning on running a number of other controls through one of the common USB MAME boards that you can on Ebay, amongst other places. Does anyone have any experience of these? For example, can keyboard actions such as time warp be assigned to buttons connected to one of these things?\u003C/p\u003E\u003Cp\u003EThis is what I\u0027m talking about:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.ebay.co.uk/itm/2x-ZERO-DELAY-ARCADE-USB-ENCODER-PC-TO-JOYSTICK-FOR-ARCADE-MAME-FIT-HAPP-PARTS-/261481039277?pt=UK_Video_Games_Coin_Operated_MJ\u0026amp;hash=item3ce17c05ad\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.ebay.co.uk/itm/2x-ZERO-DELAY-ARCADE-USB-ENCODER-PC-TO-JOYSTICK-FOR-ARCADE-MAME-FIT-HAPP-PARTS-/261481039277?pt=UK_Video_Games_Coin_Operated_MJ\u0026amp;hash=item3ce17c05ad\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E-CF\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-01-09T11:05:05Z","Content":"\n\u003Cp\u003E@Mulbin: I think I got it!\u003C/p\u003E\u003Cp\u003EI finally got time to hook up a MAX myself, and the problem with my code was the var tens. It need to be of type long instead of int, as I copy alt into it, and alt is larger than the range of int. Changing line 19 from \u0022int tens;\u0022 to \u0022long tens;\u0022 will make my example work. However, my code does only work when the input is 8 digits long, MrOnaks code (with a slight modifiation) is what you really is looking for.\u003C/p\u003E\u003Cp\u003ETry this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#include \u0022LedControl.h\u0022\u003Cbr\u003E// Arduino Pin 7 to DIN, 6 to Clk, 5 to LOAD, no.of devices is 1\u003Cbr\u003ELedControl lc=LedControl(7,6,5,1);\u003Cbr\u003Evoid setup()\u003Cbr\u003E{\u003Cbr\u003E  // initialize serial communication at 9600 bits per second:\u003Cbr\u003E  Serial.begin(9600);\u003Cbr\u003E\u003Cbr\u003E// Initialize the MAX7219 device\u003Cbr\u003E  lc.shutdown(0,false);   // Enable display\u003Cbr\u003E  lc.setIntensity(0,10);  // Set brightness level (0 is min, 15 is max)\u003Cbr\u003E  lc.clearDisplay(0);     // Clear display register\u003Cbr\u003E}\u003Cbr\u003Evoid loop()\u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003E  long alt = 23456789; // Raising this so digits are different from digit positions\u003Cbr\u003E\u003Cbr\u003E  long tens;\u003Cbr\u003E  byte digit;\u003Cbr\u003E\u003Cbr\u003E  for(int i = 7; i \u0026gt; -1; i--) {  //we need to start lowest digit first\u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    tens = alt / 10;                  \u003Cbr\u003E    digit = alt - (10*tens);\u003Cbr\u003E    alt = tens; \u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E    Serial.print(i);\u003Cbr\u003E    Serial.print(\u0027 \u0027);\u003Cbr\u003E    Serial.println(digit);\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003E  delay(500);\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf that works, try this in your KSP sketch (assuming you have initialized the display somewhere else)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E  input(); \u003Cbr\u003E\u003Cbr\u003E  long alt;\u003Cbr\u003E  long tens;\u003Cbr\u003E  byte digit;\u003Cbr\u003E\u003Cbr\u003E  alt = long(Vdata.Alt);\u003Cbr\u003E\u003Cbr\u003E  for(int i = 7; i \u0026gt; -1; i--) {  //we need to start lowest digit first\u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    tens = alt / 10;                  \u003Cbr\u003E    digit = alt - (10*tens);\u003Cbr\u003E    alt = tens; \u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E\u003Cbr\u003E  }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis is also why MrOnaks code malfunctions, he starts by declaring digit and digitPlace bytes, when they need to be long. Note that you do not need them to be unsigned long, but you will need some form of checking to ensure that the value is within 8 digits by converting to km, Mm or GM as nescessary, something I am yet to figure how to solve in practice. Try his code again, but with small change:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid loop()\u003Cbr\u003E{  \u003Cbr\u003E  // update KSP data\u003Cbr\u003E  input();\u003Cbr\u003E\u003Cbr\u003E  unsigned long digit;\u003Cbr\u003E  long digitPlace = 1;\u003Cbr\u003E\u003Cbr\u003E  for (byte i = 0; i \u0026lt; 8; i\u002B\u002B) { \u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    digit = ((unsigned long) (VData.Alt / digitPlace) % 10);\u003Cbr\u003E    digitPlace = digitPlace *10;\u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003E  delay(70); // roughly matches the default update frequency of KSPIO\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E@CarlosFandango: I run quite a few functions, timewarp included, through a Logitech gamepad, so I cannot see why the MAME board should be unable to do so.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-09T13:25:27Z\u0022 title=\u002201/09/2015 01:25  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 9, 2015\u003C/time\u003E by Freshmeat\u003C/strong\u003E\n\u003Cbr\u003EKept messing around\n\u003C/span\u003E\n"},{"CreatedByName":"carlosfandango","CreatedById":134420,"CreatedDateTime":"2015-01-09T19:38:15Z","Content":"\n\u003Cp\u003E@Freshmeat thanks, kind of confirms what I thought was the case... glad to see I probably haven\u0027t spent money on things that are no good. This time anyway! Of course, coming from China, it will be the end of Jan before I see much of it.\u003C/p\u003E\n"},{"CreatedByName":"madlemur","CreatedById":116597,"CreatedDateTime":"2015-01-09T19:59:12Z","Content":"\n\u003Cp\u003EI have really got to work out a Linux-compatible way of accessing the Arduino from C#/Unity/KSP...\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2015-01-10T20:27:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Freshmeat\u0022 data-cite=\u0022Freshmeat\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ETry this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#include \u0022LedControl.h\u0022\u003Cbr\u003E// Arduino Pin 7 to DIN, 6 to Clk, 5 to LOAD, no.of devices is 1\u003Cbr\u003ELedControl lc=LedControl(7,6,5,1);\u003Cbr\u003Evoid setup()\u003Cbr\u003E{\u003Cbr\u003E  // initialize serial communication at 9600 bits per second:\u003Cbr\u003E  Serial.begin(9600);\u003Cbr\u003E\u003Cbr\u003E// Initialize the MAX7219 device\u003Cbr\u003E  lc.shutdown(0,false);   // Enable display\u003Cbr\u003E  lc.setIntensity(0,10);  // Set brightness level (0 is min, 15 is max)\u003Cbr\u003E  lc.clearDisplay(0);     // Clear display register\u003Cbr\u003E}\u003Cbr\u003Evoid loop()\u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003E  long alt = 23456789; // Raising this so digits are different from digit positions\u003Cbr\u003E\u003Cbr\u003E  long tens;\u003Cbr\u003E  byte digit;\u003Cbr\u003E\u003Cbr\u003E  for(int i = 7; i \u0026gt; -1; i--) {  //we need to start lowest digit first\u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    tens = alt / 10;                  \u003Cbr\u003E    digit = alt - (10*tens);\u003Cbr\u003E    alt = tens; \u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E    Serial.print(i);\u003Cbr\u003E    Serial.print(\u0027 \u0027);\u003Cbr\u003E    Serial.println(digit);\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003E  delay(500);\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EProgress... now it displayes 98765432 Still seems to be in reverse order but better than the random numbers before!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Freshmeat\u0022 data-cite=\u0022Freshmeat\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIf that works, try this in your KSP sketch (assuming you have initialized the display somewhere else)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E  input(); \u003Cbr\u003E\u003Cbr\u003E  long alt;\u003Cbr\u003E  long tens;\u003Cbr\u003E  byte digit;\u003Cbr\u003E\u003Cbr\u003E  alt = long(Vdata.Alt);\u003Cbr\u003E\u003Cbr\u003E  for(int i = 7; i \u0026gt; -1; i--) {  //we need to start lowest digit first\u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    tens = alt / 10;                  \u003Cbr\u003E    digit = alt - (10*tens);\u003Cbr\u003E    alt = tens; \u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E\u003Cbr\u003E  }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is throwing up an error...\u003C/p\u003E\u003Cp\u003EKSPIODemo8.ino: In function \u0027void loop()\u0027:\u003C/p\u003E\u003Cp\u003EKSPIODemo8:149: error: \u0027Vdata\u0027 was not declared in this scope\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Freshmeat\u0022 data-cite=\u0022Freshmeat\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThis is also why MrOnaks code malfunctions, he starts by declaring digit and digitPlace bytes, when they need to be long. Note that you do not need them to be unsigned long, but you will need some form of checking to ensure that the value is within 8 digits by converting to km, Mm or GM as nescessary, something I am yet to figure how to solve in practice. Try his code again, but with small change:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid loop()\u003Cbr\u003E{  \u003Cbr\u003E  // update KSP data\u003Cbr\u003E  input();\u003Cbr\u003E\u003Cbr\u003E  unsigned long digit;\u003Cbr\u003E  long digitPlace = 1;\u003Cbr\u003E\u003Cbr\u003E  for (byte i = 0; i \u0026lt; 8; i\u002B\u002B) { \u003Cbr\u003E    // this isolates the i-th digit\u003Cbr\u003E    digit = ((unsigned long) (VData.Alt / digitPlace) % 10);\u003Cbr\u003E    digitPlace = digitPlace *10;\u003Cbr\u003E\u003Cbr\u003E    lc.setDigit(0, i, digit, false);\u003Cbr\u003E  }\u003Cbr\u003E\u003Cbr\u003E  delay(70); // roughly matches the default update frequency of KSPIO\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESadly no better, still just keeps displaying 00000000\u003C/p\u003E\u003Cp\u003EThanks for continued efforts though, I feel we must be getting closer!\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-01-11T07:19:43Z","Content":"\n\u003Cp\u003EI meant VData.Alt\u003C/p\u003E\u003Cp\u003EUnder what conditons in KSP do you test your code? May I suggest that you orbit a sattelite at 80000 m, so we know what the VData.Alt should read?\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-01-11T15:27:37Z","Content":"\n\u003Cp\u003Ezitronen, I\u0027ve been looking at your git repository, and the most recent commit says it\u0027s for 0.16.0. Is 0.16.1 not uploaded yet? (also, yeah, that pull request was totally me. keen to know what you think about it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E )\u003C/p\u003E\u003Cp\u003EI was a little disappointed to find that the plugin doesn\u0027t provide any control of rovers and did a little digging. Looking at the kOS source, it seems the FlightCtrlState object has wheelThrottle and wheelSteer fields (see \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/blob/develop/src/kOS/Binding/FlightControlManager.cs#L326\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E and \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/blob/develop/src/kOS/Binding/FlightControlManager.cs#L278\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E). I\u0027d be keen to add rover control, either as separate controls, or just emulate the default keybindings and set wheelThrottle and wheelSteer when modifying pitch and yaw?\u003C/p\u003E\n"},{"CreatedByName":"AmeliaEatyaheart","CreatedById":115681,"CreatedDateTime":"2015-01-12T05:31:01Z","Content":"\n\u003Cp\u003EAlso, is it possible to add EVA flight controls? Or is that too much / too hard to ask?\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-01-12T05:38:04Z","Content":"\n\u003Cp\u003EEVA control is something else I\u0027d be keen on, but I\u0027m not aware of any control for it. But the \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/API:FlightCtrlState\u0022 rel=\u0022external nofollow\u0022\u003Ecommunity API docs\u003C/a\u003E for FlightCtrlState are woefully lacking. I was thinking about adding some introspection to a test module and seeing what popped out.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-12T05:42:08Z\u0022 title=\u002201/12/2015 05:42  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 12, 2015\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AmeliaEatyaheart","CreatedById":115681,"CreatedDateTime":"2015-01-12T09:23:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003EOk, it was far easier than I expected to get a 7 segment running! Wired the first one up and have also added the LedControl library and got the display to fire up a simple sketch.\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/MlhZ5b4.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/MlhZ5b4.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENext request... can anyone give me a sample arduino code to include in my code? Something to display some data, such as MET so I can start to get my head around how to code outputs for 7 segment.\u003C/p\u003E\u003Cp\u003EI am using LedControl plugin via 8 digit 7 segments (can daisy chain them.. I have 6 boards currently!) each is running on a MAX7219 chip. Thanks in advance for any help!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETake this code \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E[EDIT: link updated] \u003Ca href=\u0022https://www.dropbox.com/s/nmrvrhj1fj0es3v/Demo_for_7segMAX7219_module.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/ud69sks1u6z30kf/Demo_for_7segMAX7219_module_updated.zip?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI wrote a bunch of small functions to write numbers using these modules, partly thanks to some very kind members on this forum that pointed out some hardware bugs with these, and partly seeing everyone else\u0027s photos, I decided I\u0027d sat on these for too long. I\u0027ll update my thread with pix soon \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIf you give this a go, and numbers are still not displaying, try pushing down on the actual displays; sometimes they can get unseated and drop a segment or a digit.\u003C/p\u003E\u003Cp\u003EI really hope this helps, hate to see you struggling buddy! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: You will need to adjust for the number of displays you have hooked in, and what pins they connect to.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-25T17:39:17Z\u0022 title=\u002207/25/2015 05:39  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 25, 2015\u003C/time\u003E by AmeliaEatyaheart\u003C/strong\u003E\n\u003Cbr\u003EEDIT: link updated\n\u003C/span\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-01-12T14:33:14Z","Content":"\n\u003Cp\u003E@Amelia: Thanks, that looks really useful, in case I get around to actually assemble all the parts I have scrounged for an update to my display. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"AmeliaEatyaheart","CreatedById":115681,"CreatedDateTime":"2015-01-12T16:21:12Z","Content":"\n\u003Cp\u003EJust had a look at your thread - looks like you\u0027re doing well! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThose 7 segment modules make a huge difference, once I got my act together it took me 3 days to troubleshoot, fix, and wire all the modules together - go for it! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EIf you\u0027re finding problems with your modules, KK4TEE posted a fix on my thread: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/100977-Hardware-Custom-KSP-flight-panel-with-flight-computer?p=1577824\u0026amp;viewfull=1#post1577824\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/100977-Hardware-Custom-KSP-flight-panel-with-flight-computer?p=1577824\u0026amp;viewfull=1#post1577824\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI found about half the modules in the batch I got had the fault, so test all boards individually \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2015-01-12T20:04:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AmeliaEatyaheart\u0022 data-cite=\u0022AmeliaEatyaheart\u0022\u003E\u003Cdiv\u003ETake this code \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/nmrvrhj1fj0es3v/Demo_for_7segMAX7219_module.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/nmrvrhj1fj0es3v/Demo_for_7segMAX7219_module.zip?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI wrote a bunch of small functions to write numbers using these modules, partly thanks to some very kind members on this forum that pointed out some hardware bugs with these, and partly seeing everyone else\u0027s photos, I decided I\u0027d sat on these for too long. I\u0027ll update my thread with pix soon \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIf you give this a go, and numbers are still not displaying, try pushing down on the actual displays; sometimes they can get unseated and drop a segment or a digit.\u003C/p\u003E\u003Cp\u003EI really hope this helps, hate to see you struggling buddy! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: You will need to adjust for the number of displays you have hooked in, and what pins they connect to.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt works! so now I can display A 1234.56 But how do I get it to display data from KSP?\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-01-12T21:02:24Z","Content":"\n\u003Cp\u003EAdding wheel control is pretty straightforward. I\u0027ve got the changes sitting in my fork now, but probably won\u0027t have time to test it properly and send another pull request until the end of the week. If you\u0027re keen, \u003Ca href=\u0022https://github.com/phardy/KSPSerialIO/tree/wheelcontrol\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/phardy/KSPSerialIO/tree/wheelcontrol\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEVA control isn\u0027t impossible, but it isn\u0027t exposed the same way other fly by wire stuff is and looks pretty daunting to be honest.\u003C/p\u003E\n"}]}