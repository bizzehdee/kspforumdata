{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":106,"Articles":[{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2015-12-09T22:33:23Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E Edited: Btw I hope you guys have quad-core CPUs.\n\u003E \n\nWill a quad-threaded two-core 3GHz one be enough?  \n\nAs for foam - it is not what I meant. I meant render the foam only up to a certain distance from camera, in a circle placed right under a camera. Outside it, render ocean with slightly compensated (lighter) color, possibly - with lower detail. It\u0027s the way it is done in majority of games.  \n\nBtw, a suggestion - render very dense and differently-colored version of a Scatterer fog beneath ocean surface. Again, that\u0027s how most of games do it. Doubt I need to explain advantages of that. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022) \n\n**Edited \u003Ctime datetime=\u00222015-12-09T23:10:33Z\u0022 title=\u002212/09/2015 11:10  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 9, 2015\u003C/time\u003E by sashan**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-09T22:33:48Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, Avera9eJoe said:\n\u003E \n\u003E \n\u003E You have an avatar!!! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022) - I have an Intel Skylake I5 6500 3.5 GHz quad core so I should be pretty good.\n\u003E \n\nYeah I\u0027m pretty happy with my new avatar. You should be good for medium settings ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\n\u003E \n\u003E \n\u003E 7 minutes ago, sashan said:\n\u003E \n\u003E \n\u003E Will a quad-threaded two-core 3GHz one be enough?  \n\u003E   \n\u003E \n\u003E As for foam - it is not what I meant. I meant render the foam only up to a certain distance from camera, in a circle placed right under a camera. Outside it, render ocean with slightly compensated (lighter) color, possibly - with lower detail. It\u0027s the way it is done in majority of games.  \n\u003E \n\u003E    \n\u003E \n\u003E Btw, a suggestion - render very dense and differently-colored version of a Scatterer fog beneath ocean surface. Again, that\u0027s how most of games do it. Doubt I need to explain advantages of that. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\u003E \n\nActually I don\u0027t know yet, it might run very well, is it an i3? I still have work to do and I can already see a few optimzations. Plus there\u0027s one setting that can be turned down and provide a big speed boost.\n\nFor the foam I got what you meant and I was already thinking about it myself, I was just replying to mreadshaw about a different issue earlier.\n\nFor the underwater effects I have something better in mind but maybe later on.\n\n**Edited \u003Ctime datetime=\u00222015-12-09T22:41:37Z\u0022 title=\u002212/09/2015 10:41  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 9, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2015-12-09T23:11:34Z","Content":"\u003E \n\u003E \n\u003E 35 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E i3\n\u003E \n\ni5 - 3230m. Best laptop I managed to find for below 550 bucks.\n\n\u003E \n\u003E \n\u003E 37 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E For the underwater effects I have something better in mind but maybe later on.\n\u003E \n\nGreat, I\u0027ve thought you may have some plans for that but had to ask. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022) Also, how hard would it be to implement water refraction? I know I ask much, but half a year ago we couldn\u0027t even dream of what we have now and here. Thanks man, my eyes no longer bleed when I look at the horizon. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-09T23:18:29Z","Content":"\u003E \n\u003E \n\u003E 43 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E For the underwater effects I have something better in mind but maybe later on.\n\u003E \n\nMe too... I really liked the effects [@RoverDude](https://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/) added. I want to get celestial shadows in place first though I think."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-09T23:22:13Z","Content":"\u003E \n\u003E \n\u003E 12 minutes ago, sashan said:\n\u003E \n\u003E \n\u003E i5 - 3230m. Best laptop I managed to find for below 550 bucks.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Great, I\u0027ve thought you may have some plans for that but had to ask. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022) Also, how hard would it be to implement water refraction? I know I ask much, but half a year ago we couldn\u0027t even dream of what we have now and here. Thanks man, my eyes no longer bleed when I look at the horizon. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\u003E \n\nHmm, I expected it to be a desktop i3 due to the clock speed, i think that might be the turbo clock and not the base clock if it\u0027s a laptop.\n\nAnyway, it should run fine but we\u0027ll have to wait and see. To be less cryptic, I\u0027m working on adding wave-craft interactions, the first step is to make the waves generate on the CPU instead of on the GPU, which I\u0027m doing now. With multithreading for the wave math it should run fine but for those who can\u0027t run it I guess I\u0027ll include the option to generate the waves on the GPU (these calculations run so fast on the GPU they\u0027re almost free) but they won\u0027t have access to craft-wave interactions. Fortunately, lowering the fourier grid size seems to provide a pretty huge boost when the calculations are running on the CPU, I think most laptops and halfway recent computers should be able to run at least a fourier grid of 64, which isn\u0027t ideal (128 is the default included setting right now) but at least it works.\n\nRefraction maybe, but in my experience refraction is very performance intensive so for what little effect it adds, although they might be tricks and faster, less pretty methods. I don\u0027t have anything planned for it yet but maybe in the future.\n\n\u003E \n\u003E \n\u003E 5 minutes ago, rbray89 said:\n\u003E \n\u003E \n\u003E Me too... I really liked the effects [@RoverDude](https://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/) added. I want to get celestial shadows in place first though I think.\n\u003E \n\nAre these released? I only saw a short a short gif somewhere of what looks like bubbles and underwater particles.\n\n**Edited \u003Ctime datetime=\u00222015-12-09T23:24:16Z\u0022 title=\u002212/09/2015 11:24  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 9, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-09T23:28:57Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Are these released? I only saw a short a short gif somewhere of what looks like bubbles and underwater particles.\n\u003E \n\nNot to my knowledge. The GIF looked great though."},{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2015-12-09T23:29:15Z","Content":"\u003E \n\u003E \n\u003E 13 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Hmm, I expected it to be a desktop i3 due to the clock speed, i think that might be the turbo clock and not the base clock if it\u0027s a laptop.\n\u003E \n\nOh, yes, it\u0027s 2.6GHz normally. It runs at 3 while I play tho, checked it. Scatterer perfomance hit is also minimal with my nvidia 740m. Let\u0027s just say that I can play games from 2014 like Dragon Age Inquisition on med-max settings. The rest of KSP is really unoptimized tho.  \n\nAs for refraction - I\u0027ve noticed that many games have refractions if you apply normal map to a transparent (or half transparent) surface, with zero perfomance impact. Crysis, for example. Maybe you can try searching for some onfo about that?  \n\n**Edited \u003Ctime datetime=\u00222015-12-09T23:35:11Z\u0022 title=\u002212/09/2015 11:35  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 9, 2015\u003C/time\u003E by sashan**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-09T23:32:37Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, sashan said:\n\u003E \n\u003E \n\u003E Oh, yes, it\u0027s 2.6GHz normally. It runs at 3 while I play tho, checked it. Scatterer perfomance hit is also minimal with my nvidia 740m. Let\u0027s just say that I can play games from 2014 like Dragon Age Inquisition on med-max settings. The rest of KSP is really unoptimized tho.  \n\u003E \n\u003E As for refraction - I\u0027ve noticed that many games have refractions if you apply normal map to a transparent (or half transparent) surface, with zero perfomance impact. Crysis, for example. Maybe you can try searching for some onfo about that?\n\u003E \n\nTo my knowledge, these CPUs only hit the turbo frequency when only one or two cores are loaded. I think the more cores are loaded the lower the turbo frequency. Anyway, maybe later, I\u0027m sure the internet is filled with info about rendering techniques and the like.\n\nEdited: Seems to be the case [http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter19.html](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter19.html)\n\n\u003E \n\u003E \n\u003E 5 minutes ago, rbray89 said:\n\u003E \n\u003E \n\u003E Not to my knowledge. The GIF looked great though.\n\u003E \n\nAgreed.\n\n**Edited \u003Ctime datetime=\u00222015-12-09T23:34:11Z\u0022 title=\u002212/09/2015 11:34  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 9, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"sashan","CreatedById":98897,"CreatedDateTime":"2015-12-09T23:35:55Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, blackrack said:\n\u003E \n\u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E 4 minutes ago, sashan said:\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E Oh, yes, it\u0027s 2.6GHz normally. It runs at 3 while I play tho, checked it. Scatterer perfomance hit is also minimal with my nvidia 740m. Let\u0027s just say that I can play games from 2014 like Dragon Age Inquisition on med-max settings. The rest of KSP is really unoptimized tho.  \n\u003E \u003E \n\u003E \u003E As for refraction - I\u0027ve noticed that many games have refractions if you apply normal map to a transparent (or half transparent) surface, with zero perfomance impact. Crysis, for example. Maybe you can try searching for some onfo about that?\n\u003E \u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E To my knowledge, these CPUs only hit the turbo frequency when only one or two cores are loaded. I think the more cores are loaded the lower the turbo frequency. Anyway, maybe later, I\u0027m sure the internet is filled with info about rendering techniques and the like.\n\u003E \n\nNo, they can run turbo always, but not always at full power. For example my one runs at up to 2.6 without turbo, up to 3GHz with two cores loaded and up to 3.3 with one core loaded. Well, ok, enough offtopic. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)  \n  \nCraft interaction sounds just great. What real impact on gameplay does fourier grid size have? I guess repeating wave pattern? So far I\u0027ve spotted none with default settings."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-09T23:40:07Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, sashan said:\n\u003E \n\u003E \n\u003E No, they can run turbo always, but not always at full power. For example my one runs at up to 2.6 without turbo, up to 3GHz with two cores loaded and up to 3.3 with one core loaded. Well, ok, enough offtopic. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)  \n\u003E   \n\u003E Craft interaction sounds just great. What real impact on gameplay does fourier grid size have? I guess repeating wave pattern? So far I\u0027ve spotted none with default settings.\n\u003E \n\nRepeating patterns but you only really notice them if you look at the reflection of the sun, everything else looks fine. Try it ingame and you\u0027ll see."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-12-10T00:14:38Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Edited: Btw I hope you guys have quad-core CPUs.\n\u003E \n\nNooooo! /me hangs his head in dual core shame."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-10T00:20:33Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, Red Iron Crown said:\n\u003E \n\u003E \n\u003E Nooooo! /me hangs his head in dual core shame.\n\u003E \n\nHow bad is it?"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-12-10T00:21:49Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, Red Iron Crown said:\n\u003E \n\u003E \n\u003E Nooooo! /me hangs his head in dual core shame.\n\u003E \n\nRed Iron Crown maybe I should make a kickstarter to fund a new CPU for you ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\nEdit: I also wanted to ask, can I have a link to this Roverdude GIF that you guys are talking about?\n\n**Edited \u003Ctime datetime=\u00222015-12-10T00:24:44Z\u0022 title=\u002212/10/2015 12:24  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 10, 2015\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-10T00:26:30Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, Avera9eJoe said:\n\u003E \n\u003E \n\u003E Red Iron Crown maybe I should make a kickstarter to fund a new CPU for you ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\u003E \n\u003E \n\u003E \n\u003E Edit: I also wanted to ask, can I have a link to this Roverdude GIF that you guys are talking about?\n\u003E \n\n[https://www.reddit.com/r/KerbalSpaceProgram/comments/3vaoj9/since_oceanic_effects_are_a_thing_right_now/](https://www.reddit.com/r/KerbalSpaceProgram/comments/3vaoj9/since_oceanic_effects_are_a_thing_right_now/)"},{"CreatedByName":"sDaZe","CreatedById":111181,"CreatedDateTime":"2015-12-10T00:42:42Z","Content":"Made a video using your mod again blackrack, hope you guys enjoy!\n\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/wkAPJLLg8Mc?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-12-10T00:48:30Z","Content":"\u003E \n\u003E \n\u003E 25 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E How bad is it?\n\u003E \n\nNot bad at all so far, it\u0027s overclocked to 4.0GHz and still has some headroom. I have some money in the upgrade fund, was going to pick between a new CPU or more RAM depending on how 1.1 performs.\n\n\u003E \n\u003E \n\u003E 24 minutes ago, Avera9eJoe said:\n\u003E \n\u003E \n\u003E Red Iron Crown maybe I should make a kickstarter to fund a new CPU for you ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\u003E \n\nLOL, no thanks. If I really need one I\u0027ll buy one. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-10T04:06:59Z","Content":"It liiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiives\n\n![6a43CXu.jpg](http://i.imgur.com/6a43CXu.jpg)\n\n(Waves are now generated on the CPU, it\u0027s one huge step towards wave-craft interactions)\n\n\u003E \n\u003E \n\u003E 3 hours ago, Red Iron Crown said:\n\u003E \n\u003E \n\u003E Not bad at all so far, it\u0027s overclocked to 4.0GHz and still has some headroom. I have some money in the upgrade fund, was going to pick between a new CPU or more RAM depending on how 1.1 performs.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E LOL, no thanks. If I really need one I\u0027ll buy one. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nIs it one of those anniversary-edition something-K CPUs with just two cores and no hyperthreading?\n\n\u003E \n\u003E \n\u003E 3 hours ago, DaZeInBok said:\n\u003E \n\u003E \n\u003E Made a video using your mod again blackrack, hope you guys enjoy!\n\u003E \n\nKeep\u0027em coming ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\n**Edited \u003Ctime datetime=\u00222015-12-10T04:08:43Z\u0022 title=\u002212/10/2015 04:08  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 10, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-12-10T04:26:14Z","Content":"Yes, a Pentium G3258. Awesome performance for a $70 processor. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-10T04:35:03Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, Red Iron Crown said:\n\u003E \n\u003E \n\u003E Yes, a Pentium G3258. Awesome performance for a $70 processor. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nYeah they\u0027re really good value."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-12-10T04:54:13Z","Content":"My jaw still drops every time (this with SVE/EVE):\n\n![screenshot156.png](https://dl.dropboxusercontent.com/u/61004449/ksp/1.0.5/screenshot156.png)\n\nWave interaction is going to be awesome. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-10T05:02:38Z","Content":"\u003E \n\u003E \n\u003E 7 minutes ago, Red Iron Crown said:\n\u003E \n\u003E \n\u003E My jaw still drops every time (this with RVE/EVE):\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![screenshot156.png](https://dl.dropboxusercontent.com/u/61004449/ksp/1.0.5/screenshot156.png)](https://dl.dropboxusercontent.com/u/61004449/ksp/1.0.5/screenshot156.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Wave interaction is going to be awesome. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nIndeed it is, there\u0027s still some things to figure out, hopefully I can do it. \n\nBtw that ship is awesome, built of struts and plane wings."},{"CreatedByName":"Hary R","CreatedById":111339,"CreatedDateTime":"2015-12-10T05:27:29Z","Content":"I have to say, with this and EVE, KSP look way better. this should be stock.\n\nBy the way, is my old Core2quad  Q9550S enough for what you intend to do or will i have to stick with the graphic card and not have wave interaction?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-10T05:38:40Z","Content":"\u003E \n\u003E \n\u003E 9 minutes ago, Hary R said:\n\u003E \n\u003E \n\u003E I have to say, with this and EVE, KSP look way better. this should be stock.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E By the way, is my old Core2quad  Q9550S enough for what you intend to do or will i have to stick with the graphic card and not have wave interaction?\n\u003E \n\nI think it should work with fouriergridsize at 64. Going from 128 to 64 gives a 4x-5x speed boost when running these calculations on the CPU so it should be fine."},{"CreatedByName":"evileye.x","CreatedById":153755,"CreatedDateTime":"2015-12-10T06:04:29Z","Content":"I have i5 3570k boosted to 4400MHz, if you need to measure perfomance hit for different setups. Video is Radeon 7950"},{"CreatedByName":"Yukon0009","CreatedById":109376,"CreatedDateTime":"2015-12-10T09:05:42Z","Content":"Any way to tune down the mod so that it doesnt kill my computer when I try to play?"}]}