{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":346,"Articles":[{"CreatedByName":"OnlyLightMatters","CreatedById":204296,"CreatedDateTime":"2020-04-30T13:56:09Z","Content":"I used to playing with Spectra before. I don\u0027t really see a difference with AVP except AVP\u0027s texture are really gorgeous. Except the Skybox I dont\u0027 like at all."},{"CreatedByName":"alberro\u002B","CreatedById":199496,"CreatedDateTime":"2020-04-30T14:28:43Z","Content":"\u003E \n\u003E \n\u003E 31 minutes ago, OnlyLightMatters said:\n\u003E \n\u003E \n\u003E I used to playing with Spectra before. I don\u0027t really see a difference with AVP except AVP\u0027s texture are really gorgeous. Except the Skybox I dont\u0027 like at all.\n\u003E \n\nYeah, AVP\u0027s clouds are gorgeous, but It\u0027s skybox is kinda.. iffy."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-04-30T14:52:16Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, alberro\u002B said:\n\u003E \n\u003E \n\u003E I\u0027ve had an issue with framerate recently too. No log spamming, same mods. I\u0027ve resorted to using AVP without Scatterer just to help my frames a bit.\n\u003E \n\n\u003E \n\u003E \n\u003E 1 hour ago, OnlyLightMatters said:\n\u003E \n\u003E \n\u003E I\u0027ve tested \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E and Scatterer alone with a new sandbox game, no issue. I\u0027m adding all my mods by small batches and launching the same rocket again and again to see if there are bad interactions. I will end up with AVP which is a well known framerate shatterer, at least for my 1060 6Gb ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\u003E \n\nHave you guys tried reducing the shadows distance or lowering the default override with 8192x8192 shadowmaps?\n\nAnyway, I have a gtx 1060 3gb and I usually ship the config that works well on my machine. I\u0027m getting 60 fps with stock scatterer \u002B stock \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, and textures unlimited, however I do have stock reflection probes resolution lowered to 256 and the lowered refresh setting (pretty useless to have it set higher from my testing).\n\nWith my old CPU however (i5-3470) I don\u0027t go crazy on the part counts.\n\n**Edited \u003Ctime datetime=\u00222020-04-30T14:53:14Z\u0022 title=\u002204/30/2020 02:53  PM\u0022 data-short=\u00224 yr\u0022\u003EApril 30, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"LucasSousa353","CreatedById":204335,"CreatedDateTime":"2020-04-30T16:06:07Z","Content":"[https://imgur.com/a/2i70HF8](https://imgur.com/a/2i70HF8)\n\nHello! Does someone knows a fix for this bug? It starts to happen exactly at 20000ft above the ocean and dissapears at more or less 60000\n\nI\u0027m almost sure it is due the Scatterer. When I enable Ocean Shader, the sky becomes black and the ocean, in any altitude ASL, becomes buggy like that.\n\nThe visuals mods I\u0027m using are: AVP, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E and Scatterer."},{"CreatedByName":"Danvanthevacuumman","CreatedById":204336,"CreatedDateTime":"2020-04-30T16:13:17Z","Content":"[https://imgur.com/YPbZbjN](https://imgur.com/YPbZbjN) I am getting lower fps than usual while using this mod? Clean install and everything and only mod On. also the ocean has some graphical bugs"},{"CreatedByName":"FasterThanFlourite","CreatedById":177938,"CreatedDateTime":"2020-05-01T16:07:35Z","Content":"\u003E \n\u003E \n\u003E On 4/30/2020 at 3:02 PM, OnlyLightMatters said:\n\u003E \n\u003E \n\u003E I\u0027ve tested \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E and Scatterer alone with a new sandbox game, no issue. I\u0027m adding all my mods by small batches and launching the same rocket again and again to see if there are bad interactions.\n\u003E \n\nWould you mind keeping me updated about the progress? I have about 200 mods installed and if one of them really is a resource hog, I might consider getting rid of it."},{"CreatedByName":"FasterThanFlourite","CreatedById":177938,"CreatedDateTime":"2020-05-01T18:33:56Z","Content":"\u003E \n\u003E \n\u003E On 4/30/2020 at 4:52 PM, blackrack said:\n\u003E \n\u003E \n\u003E Anyway, I have a gtx 1060 3gb and I usually ship the config that works well on my machine. I\u0027m getting 60 fps with stock scatterer \u002B stock \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, and textures unlimited, however I do have stock reflection probes resolution lowered to 256 and the lowered refresh setting (pretty useless to have it set higher from my testing).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E With my old CPU however (i5-3470) I don\u0027t go crazy on the part counts.\n\u003E \n\nThe important question would be which resolution you\u0027re playing at. With my previous setup with an i5-4670, 16 GB RAM and a 1070 GTX 8GB I got only about 15-3\n\n0 FPS after start in with a 120ish part stock rocket. I was playing in 2560 \\* 1400.\n\nNow with an upgrade to AMD Ryzen 5 1600  (still paired with 16 GB RAM and GTX 1070 8 GB I get about 35 - 45 FPS, typically. Pretty much never 60 FPS. In Stock without scatterer it\u0027s something like 120 FPS. But scatterer (especially the ocean shader) is so gorgeous that I can\u0027t ever play KSP without it :). So I really do wonder which resolution you\u0027re playing at."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-05-01T18:50:18Z","Content":"\u003E \n\u003E \n\u003E 17 minutes ago, FasterThanFlourite said:\n\u003E \n\u003E \n\u003E The important question would be which resolution you\u0027re playing at. With my previous setup with an i5-4670, 16 GB RAM and a 1070 GTX 8GB I got only about 15-3\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 0 FPS after start in with a 120ish part stock rocket. I was playing in 2560 \\* 1400.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Now with an upgrade to AMD Ryzen 5 1600  (still paired with 16 GB RAM and GTX 1070 8 GB I get about 35 - 45 FPS, typically. Pretty much never 60 FPS. In Stock without scatterer it\u0027s something like 120 FPS. But scatterer (especially the ocean shader) is so gorgeous that I can\u0027t ever play KSP without it :). So I really do wonder which resolution you\u0027re playing at.\n\u003E \n\nI play at 1080p, so your numbers add up.\n\nHere\u0027s what you can do:\n\n- Change the ocean mesh resolution from the default value of 4 to 8 or 16, this makes the ocean mesh less dense, but the difference is not noticeable with the default calm ocean setting (in fact I should probably change the default value of this that I ship)\n\n- Lower in-game MSAA to 4x or 2x (it scales badly with the dense ocean mesh)\n\n- Change the shadowmap resolution override to 4096 instead of 8192 and the shadow distance to 25000 instead of 50000\n\n- If it\u0027s still slow change the ocean fourier grid size from 128 to 64 (probably won\u0027t see a big difference with a GTX 1070 though)\n\nLet me know what kind of performance increases you see with these settings, I expect you to hit at least 42-55 FPS.\n\n**Edited \u003Ctime datetime=\u00222020-05-01T18:52:00Z\u0022 title=\u002205/01/2020 06:52  PM\u0022 data-short=\u00224 yr\u0022\u003EMay 1, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"OnlyLightMatters","CreatedById":204296,"CreatedDateTime":"2020-05-01T19:10:51Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, FasterThanFlourite said:\n\u003E \n\u003E \n\u003E Would you mind keeping me updated about the progress? I have about 200 mods installed and if one of them really is a resource hog, I might consider getting rid of it.\n\u003E \n\nI installed every mod I am playing with, last one being AVP. This is the one which kills my framerate but things are better than earlier. I thought I had made a clean install previously but it appears it was not. So nothing has to be claimed against Scatterer on my side.\n\n**Edited \u003Ctime datetime=\u00222020-05-01T19:14:01Z\u0022 title=\u002205/01/2020 07:14  PM\u0022 data-short=\u00224 yr\u0022\u003EMay 1, 2020\u003C/time\u003E by OnlyLightMatters**"},{"CreatedByName":"Tachtra","CreatedById":199668,"CreatedDateTime":"2020-05-02T17:14:54Z","Content":"Hey, the tutorial for the Config tool seems outdated, there is no \u0022settings.cfg\u0022 file in my \u0022scatterer/config/planets/Kerbin\u0022 file. Can you help me out?"},{"CreatedByName":"alberro\u002B","CreatedById":199496,"CreatedDateTime":"2020-05-02T18:10:12Z","Content":"\u003E \n\u003E \n\u003E On 4/30/2020 at 9:42 AM, Arco123 said:\n\u003E \n\u003E \n\u003E AVP is one the of worst for framerates.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E SVE Is usually the best.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Spectra is even better.\n\u003E \n\nSorry for the late reply.\n\nI tested all of these, and Spectra works best for me. It looks gorgeous, and framerate is pretty nice,"},{"CreatedByName":"modybird","CreatedById":146703,"CreatedDateTime":"2020-05-03T03:38:07Z","Content":"How can I fix these bugged textures? [https://imgur.com/a/hUqAfBq](https://imgur.com/a/hUqAfBq)"},{"CreatedByName":"FasterThanFlourite","CreatedById":177938,"CreatedDateTime":"2020-05-03T10:19:54Z","Content":"\u003E \n\u003E \n\u003E On 5/1/2020 at 8:50 PM, blackrack said:\n\u003E \n\u003E \n\u003E - Change the ocean mesh resolution from the default value of 4 to 8 or 16, this makes the ocean mesh less dense, but the difference is not noticeable with the default calm ocean setting (in fact I should probably change the default value of this that I ship)\n\u003E \n\nI changed the other settings in the config file, as recommended :). But where do I find this setting?"},{"CreatedByName":"BezKartuza","CreatedById":200469,"CreatedDateTime":"2020-05-03T10:46:28Z","Content":"\u003E \n\u003E \n\u003E 7 hours ago, modybird said:\n\u003E \n\u003E \n\u003E How can I fix these bugged textures? [https://imgur.com/a/hUqAfBq](https://imgur.com/a/hUqAfBq)\n\u003E \n\nSo far, no way. Do you play constantly being in game menu?  ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-05-03T12:05:29Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, FasterThanFlourite said:\n\u003E \n\u003E \n\u003E I changed the other settings in the config file, as recommended :). But where do I find this setting?\n\u003E \n\nIn the planet\u0027s ocean settings file. If you use stock scatterer in scatterer/config/Kerbin/ocean.cfg (if I recall correctly), if you use another mod in the config they ship."},{"CreatedByName":"modybird","CreatedById":146703,"CreatedDateTime":"2020-05-03T22:06:54Z","Content":"\u003E \n\u003E \n\u003E 11 hours ago, BezKartuza said:\n\u003E \n\u003E \n\u003E So far, no way. Do you play constantly being in game menu?  ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\u003E \n\nIt looks like that in game too"},{"CreatedByName":"Jognt","CreatedById":176871,"CreatedDateTime":"2020-05-03T23:41:51Z","Content":"\u003E \n\u003E \n\u003E On 4/22/2020 at 12:14 AM, plakman said:\n\u003E \n\u003E \n\u003E Hello there, (i also put this on github including log file)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I just tried \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003Eckan\u003C/abbr\u003E and i have an issue with the latest shatterer.  \n\u003E \n\u003E Before i was using RTB his version wich worked great.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E i tried shatterer alone without spectra and have thesame issue.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I am playing on the latest steam version.  \n\u003E \n\u003E now i have this issue:  \n\u003E   \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E Reveal hidden contents\n\u003E \n\u003E \n\u003E \u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 width=\u0022480\u0022 data-embed-src=\u0022https://www.youtube.com/embed/W48Dicq8kPY?feature=oembed\u0022\u003E\u003C/iframe\u003E\n\u003E \n\u003E \n\u003E \n\u003E Mods installed:\n\u003E \n\u003E \n\u003E \n\u003E Reveal hidden contents\n\u003E \n\u003E \n\u003E ![6D2apPh.png](https://i.imgur.com/6D2apPh.png)\n\u003E \n\nNote that you\u0027re going to have problems down the road if you keep both Spectra and the \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E sample configs (boulderco) installed."},{"CreatedByName":"FasterThanFlourite","CreatedById":177938,"CreatedDateTime":"2020-05-05T23:00:49Z","Content":"\u003E \n\u003E \n\u003E On 5/1/2020 at 8:50 PM, blackrack said:\n\u003E \n\u003E \n\u003E Here\u0027s what you can do:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [...]\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Let me know what kind of performance increases you see with these settings, I expect you to hit at least 42-55 FPS.\n\u003E \n\nI changed all the settings as you suggested. The FPS hovers around 40 FPS, but rarely more. What\u0027s interesting is that the GPU usage of the GTX 1070 is barely at 50% with those changes. Looks like the my Ryzen 5 1600 AF is limiting and not allowing me to get over the 40 FPS."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-05-06T07:01:37Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, FasterThanFlourite said:\n\u003E \n\u003E \n\u003E I changed all the settings as you suggested. The FPS hovers around 40 FPS, but rarely more. What\u0027s interesting is that the GPU usage of the GTX 1070 is barely at 50% with those changes. Looks like the my Ryzen 5 1600 AF is limiting and not allowing me to get over the 40 FPS.\n\u003E \n\nWhat kind of ship are you launching? Do you have some mods that are heavy on the CPU installed?"},{"CreatedByName":"FasterThanFlourite","CreatedById":177938,"CreatedDateTime":"2020-05-06T20:00:59Z","Content":"Currently still ships below 30 parts, as I haven\u0027t unlocked the level 2 \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E in hard mode career yet.\n\nI am running KSP 1.9.1, [with about 200 mods installed through \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E](https://pastebin.com/zAw6biqH) (all the most common ones).  I\u0027m not sure whether there are particularly CPU-intensive ones."},{"CreatedByName":"Bombaatu","CreatedById":157643,"CreatedDateTime":"2020-05-07T20:14:27Z","Content":"\u003E \n\u003E \n\u003E On 5/6/2020 at 3:00 PM, FasterThanFlourite said:\n\u003E \n\u003E \n\u003E Currently still ships below 30 parts, as I haven\u0027t unlocked the level 2 \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E in hard mode career yet.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I am running KSP 1.9.1, [with about 200 mods installed through \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E](https://pastebin.com/zAw6biqH) (all the most common ones).  I\u0027m not sure whether there are particularly CPU-intensive ones.\n\u003E \n\nI\u0027ve had a performance issue with Trajectories in 1.9.1 - try uninstalling that to see if the situation improves."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-05-07T20:25:26Z","Content":"\u003E \n\u003E \n\u003E On 5/6/2020 at 10:00 PM, FasterThanFlourite said:\n\u003E \n\u003E \n\u003E I am running KSP 1.9.1, [with about 200 mods installed through \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E](https://pastebin.com/zAw6biqH) (all the most common ones).  I\u0027m not sure whether there are particularly CPU-intensive ones.\n\u003E \n\nYeah, uhm... you\u0027re on your own ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\n**Edited \u003Ctime datetime=\u00222020-05-07T20:25:48Z\u0022 title=\u002205/07/2020 08:25  PM\u0022 data-short=\u00224 yr\u0022\u003EMay 7, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"4nxs","CreatedById":80680,"CreatedDateTime":"2020-05-08T14:15:53Z","Content":"\u003E \n\u003E \n\u003E On 4/30/2020 at 6:06 PM, LucasSousa353 said:\n\u003E \n\u003E \n\u003E [https://imgur.com/a/2i70HF8](https://imgur.com/a/2i70HF8)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Hello! Does someone knows a fix for this bug? It starts to happen exactly at 20000ft above the ocean and dissapears at more or less 60000\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m almost sure it is due the Scatterer. When I enable Ocean Shader, the sky becomes black and the ocean, in any altitude ASL, becomes buggy like that.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The visuals mods I\u0027m using are: AVP, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E and Scatterer.\n\u003E \n\nI am running into the same height effect as seen in the image. Not to sure about the upper limit when it disappears seems higher because I see it in \u003Cabbr title=\u0022Low Kerbin Orbit\u0022\u003ELKO\u003C/abbr\u003E but definitely the 20km altitude limit. Below that limit and in timewarp all looks normal. \n\nAlso running Spectra with it\u0027s dependencies so I don\u0027t know if the problem lies with them or with Scatterer. \n\nIs anyone familiar with the issue? And knows where I could go for support?"},{"CreatedByName":"FasterThanFlourite","CreatedById":177938,"CreatedDateTime":"2020-05-08T18:03:59Z","Content":"\u003E \n\u003E \n\u003E On 5/7/2020 at 10:25 PM, blackrack said:\n\u003E \n\u003E \n\u003E Yeah, uhm... you\u0027re on your own ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\u003E \n\n[Slightly reduced modlist now.](https://pastebin.com/9T3YeJ3Q)\n\nStill above 200. I don\u0027t understand how someone could have less. How do you manage to play with less? I nearly consider all of those mods essential ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022) .\n\nI tried reducing it even further in the attempt to find out what causes the game to crash after about an hour with the **access violation** error message I mentioned some time back. Turns out it wasn\u0027t scatterer, as even when deinstalling it the game crashes on a scene change.\n\nI\u0027m not sure, I read that it could be caused by too much alt-tabbing (which I do every few minutes).\n\nAfter removing some mods, the FPS seem to be up now at ~55 FPS  2560x1440 with the standard scatterer options (instead of ~30 FPS). Could have been that the previously installed KS3P had caused that FPS drop. This now seems much more in line with the numbers you gave [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/).\n\n**Edited \u003Ctime datetime=\u00222020-05-08T22:19:45Z\u0022 title=\u002205/08/2020 10:19  PM\u0022 data-short=\u00224 yr\u0022\u003EMay 8, 2020\u003C/time\u003E by FasterThanFlourite**"},{"CreatedByName":"Damdelittle","CreatedById":204457,"CreatedDateTime":"2020-05-09T15:06:26Z","Content":"The scatter is not really working for me it is just all white and yellow every where"}]}