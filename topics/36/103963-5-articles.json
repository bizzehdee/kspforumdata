{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":5,"Articles":[{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-04-17T01:33:58Z","Content":"\u003E \n\u003E Looks like there\u0027s an inverted \u0022/\u0022, is this like a platform-specific thing?\n\nYes, there are Unity/C# tools in the API to make your program platform-agnostic."},{"CreatedByName":"papics","CreatedById":77783,"CreatedDateTime":"2015-04-17T09:33:19Z","Content":"\u003E \n\u003E Looks like there\u0027s an inverted \u0022/\u0022, is this like a platform-specific thing? Hold on I\u0027ll check why it works for the rest of the path.\n\u003E Edited: Replace your scatterer.dll with this [http://s000.tinyupload.com/index.php?file_id=42296570119783257966](http://s000.tinyupload.com/index.php?file_id=42296570119783257966)\n\u003E \n\u003E Report back if it works and I\u0027ll update the link in the OP.\n\u003E \n\u003E Also, right now the haze shader doesn\u0027t work in opengl but you should at least get in game and get the sky shaders.\n\nI can confirm that with this dll I can get in the game (which did not work before), and the sky shader is there. Hoping to get the haze too at one point ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Mighty1","CreatedById":95750,"CreatedDateTime":"2015-04-17T09:39:54Z","Content":"That pic. WOW. There are so many great moders out there and so little RAM avalible. Oooooh the agony of reaching your RAM limit."},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2015-04-17T09:40:50Z","Content":"\u003E \n\u003E Yes, there are Unity/C# tools in the API to make your program platform-agnostic.\n\nTo be specific, [this line](https://github.com/blackrack/Scatterer/blob/d82c9529826b55e475983e877adbb1ff08b4ae94/scatterer/ShaderReplacer.cs#L32)\n\n    Shader shader = ShaderTool.GetShader2(\u0022ReplacementShaders/\u0022 \u002Bname \u002B \u0022.shader\u0022);\n\nshould be\n\n    Shader shader = ShaderTool.GetShader2(Path.Combine(\u0022ReplacementShaders\u0022, name \u002B \u0022.shader\u0022));\n\nYou can see examples of assorted methods of getting/messing with the path in C# [here](https://github.com/pizzaoverhead/SoundtrackEditor/blob/e918a2f87d4e4060d407e3de7f6bc49ce0e4549e/SoundtrackEditor/SoundtrackEditor.cs#L410-447).\n\n**Edited \u003Ctime datetime=\u00222015-04-17T09:43:38Z\u0022 title=\u002204/17/2015 09:43  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 17, 2015\u003C/time\u003E by pizzaoverhead**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T09:52:14Z","Content":"\u003E \n\u003E I can confirm that with this dll I can get in the game (which did not work before), and the sky shader is there. Hoping to get the haze too at one point ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nNice, I will now update the link in the OP.\n\n\u003E \n\u003E To be specific, [this line](https://github.com/blackrack/Scatterer/blob/d82c9529826b55e475983e877adbb1ff08b4ae94/scatterer/ShaderReplacer.cs#L32)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     Shader shader = ShaderTool.GetShader2(\u0022ReplacementShaders/\u0022 \u002Bname \u002B \u0022.shader\u0022);\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E should be\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     Shader shader = ShaderTool.GetShader2(Path.Combine(\u0022ReplacementShaders\u0022, name \u002B \u0022.shader\u0022));\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E You can see examples of assorted methods of getting/messing with the path in C# [here](https://github.com/pizzaoverhead/SoundtrackEditor/blob/e918a2f87d4e4060d407e3de7f6bc49ce0e4549e/SoundtrackEditor/SoundtrackEditor.cs#L410-447).\n\nThanks for this, I\u0027ll implement it."},{"CreatedByName":"TheGamingNoobster","CreatedById":94887,"CreatedDateTime":"2015-04-17T10:38:36Z","Content":"I understand that this is a WIP mod but when installed I cannot load any saves, scenarios or even tutorials. Looks good though..."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T10:48:06Z","Content":"\u003E \n\u003E I understand that this is a WIP mod but when installed I cannot load any saves, scenarios or even tutorials. Looks good though...\n\nIf you\u0027re on linux or OSX, download the fixed version I just uploaded to kerbalstuff, or the fixed .dll linked a few posts up. Keep in mind that only the sky works in opengl right now, haze doesn\u0027t work because of an issue with texture reads inside dynamic branches in opengl, to get around this I\u0027m eliminating branches (expect a performance cost) but I still keep going over the arithmetic operations limit."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T12:20:23Z","Content":"I added OpenGL compatibility, performance is pretty low compared to dx9 and there are issues like this from certain angles, especially at low altitude [http://i.imgur.com/M0B5VY1.jpg](http://i.imgur.com/M0B5VY1.jpg) but it works.\n\nAlso, directx versions get a slight boost in performance in some situations."},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-04-17T15:22:35Z","Content":"You should use versioning and dating in the title to denote to readers when an update has occurred. (esp. date; put the date of the last update in the title so readers can tell at a glance if there\u0027s an update they might want to get)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T16:14:42Z","Content":"\u003E \n\u003E You should use versioning and dating in the title to denote to readers when an update has occurred. (esp. date; put the date of the last update in the title so readers can tell at a glance if there\u0027s an update they might want to get)\n\nAlright, done."},{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-04-17T16:35:13Z","Content":"@Blackrack, just tested it out to see for myself and man this looks promising! Good job! \n\nAlmost makes me think of ditching Better Atmo\u0027s mod, when you get every aspect of it working correctly.\n\nBetter Atmo\u0027s does also have issues, clouds seems like large \u0027edge pixelated rings\u0027 above a certain altitude. But that is known from what I read.\n\nPerformance, is fine for me. Didn\u0027t really notice any real hit, but I might have been a little distracted at dawns launch to really have noticed.\n\nKeep it up! I\u0027d say this is a must have already.\n\nI really hope you can work out the atmo transitions with rbray, if I read reddit correctly."},{"CreatedByName":"BrutalRIP","CreatedById":59065,"CreatedDateTime":"2015-04-17T16:36:21Z","Content":"\u003E \n\u003E I\u0027ll get around to it... eventually. I haven\u0027t worked on it today because I had too much fun just flying around sightseeing in kerbin.\n\u003E [http://i.imgur.com/9XQdA3A.jpg](http://i.imgur.com/9XQdA3A.jpg)\n\u003E \n\u003E [http://i.imgur.com/Mg5vDnQ.jpg](http://i.imgur.com/Mg5vDnQ.jpg)\n\nam i right in thinking the latest version should look like your pics??? as mine looks more like [this](http://imgur.com/a/PLWr7)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T16:41:33Z","Content":"\u003E \n\u003E @Blackrack, just tested it out to see for myself and man this looks promising! Good job! \n\u003E Almost makes me think of ditching Better Atmo\u0027s mod, when you get every aspect of it working correctly.\n\u003E \n\u003E Better Atmo\u0027s does also have issues, clouds seems like large \u0027edge pixelated rings\u0027 above a certain altitude. But that is known from what I read.\n\u003E \n\u003E Performance, is fine for me. Didn\u0027t really notice any real hit, but I might have been a little distracted at dawns launch to really have noticed.\n\u003E \n\u003E Keep it up! I\u0027d say this is a must have already.\n\u003E \n\u003E I really hope you can work out the atmo transitions with rbray, if I read reddit correctly.\n\nOh I\u0027ll get it there don\u0027t worry, I haven\u0027t been this excited about making anything in a while. I just started work on the transitions right now and rbray\u0027s pointers and EVE\u0027s source code should be of the greatest help.\n\n\u003E \n\u003E am i right in thinking the latest version should look like your pics??? as mine looks more like [this](http://imgur.com/a/PLWr7)\n\nHave you tried pressing the \u0022toggle postprocessing\u0022 button?"},{"CreatedByName":"BrutalRIP","CreatedById":59065,"CreatedDateTime":"2015-04-17T16:45:01Z","Content":"Yeah that did it Thanks GREAT WORK BTW\n\nEDIT: WOW just WOW [http://imgur.com/a/gMX93](http://imgur.com/a/gMX93)\n\n**Edited \u003Ctime datetime=\u00222015-04-17T17:30:12Z\u0022 title=\u002204/17/2015 05:30  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 17, 2015\u003C/time\u003E by BrutalRIP**"},{"CreatedByName":"papics","CreatedById":77783,"CreatedDateTime":"2015-04-17T17:59:32Z","Content":"\u003E \n\u003E Yeah that did it Thanks GREAT WORK BTW\n\u003E EDIT: WOW just WOW [http://imgur.com/a/gMX93](http://imgur.com/a/gMX93)\n\nThese shots need to appear on the opening page, this is just beautiful!"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-04-17T18:02:31Z","Content":"\u003E \n\u003E Yeah that did it Thanks GREAT WORK BTW\n\u003E EDIT: WOW just WOW [http://imgur.com/a/gMX93](http://imgur.com/a/gMX93)\n\nJust gorgeous."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T18:13:45Z","Content":"\u003E \n\u003E Yeah that did it Thanks GREAT WORK BTW\n\u003E EDIT: WOW just WOW [http://imgur.com/a/gMX93](http://imgur.com/a/gMX93)\n\nLooking at these mountains I expect a dragon to pop out of there any minute."},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2015-04-17T18:17:08Z","Content":"I\u0027m having the same issue (i think) as the above where by there is no ground haze just that above the horizon, and that is only in PQS and not scaledspace - however hitting toggle postprocessing doesn\u0027t do a thing except sometimes create a nice looking horizon sideways on the screen (90 degrees to the actual in-game horizon). toggling depth buffer simply makes the entire screen white? I\u0027ve removed all instances of EVE and RSS, however still no ground haze, sometimes when adjusting some of the camera toggles I get that decent looking groundhaze/horizon but it\u0027s miles beyond the actual in game horizon i.e. way of in the distant space somewhere.\n\nI\u0027m not running openGL or DX9, but am on windows 8, and the problem still persits ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\nP.s. I don\u0027t mean to sound annoyed I\u0027m just exited about how beautiful this mod is and it\u0027s potential with RVE ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nGreat job thus far, this could be the fix for EVE\u0027s volumetrics I\u0027ve been waiting for to kick-start RVE development again!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T18:21:26Z","Content":"\u003E \n\u003E I\u0027m having the same issue (i think) as the above where by there is no ground haze just that above the horizon, and that is only in PQS and not scaledspace - however hitting toggle postprocessing doesn\u0027t do a thing except sometimes create a nice looking horizon sideways on the screen (90 degrees to the actual in-game horizon). toggling depth buffer simply makes the entire screen white? I\u0027ve removed all instances of EVE and RSS, however still no ground haze, sometimes when adjusting some of the camera toggles I get that decent looking groundhaze/horizon but it\u0027s miles beyond the actual in game horizon i.e. way of in the distant space somewhere.\n\u003E I\u0027m not running openGL or DX9, but am on windows 8, and the problem still persits ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\u003E \n\u003E P.s. I don\u0027t mean to sound annoyed I\u0027m just exited about how beautiful this mod is and it\u0027s potential with RVE ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\u003E \n\u003E Great job thus far, this could be the fix for EVE\u0027s volumetrics I\u0027ve been waiting for to kick-start RVE development again!\n\nIf you don\u0027t see the PQS in the depth buffer then the mod is not working for some reason. I usually get the sideways horizon after messing with the toggle postprocessing butoon in mapview.\n\nEdit: better remove all mods to narrow it down, if it doesn\u0027t work in a stock install then something has gone seriously wrong."},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2015-04-17T18:23:59Z","Content":"\u003E \n\u003E If you don\u0027t see the PQS in the depth buffer then the mod is not working for some reason. I usually get the sideways horizon after messing with the toggle postprocessing butoon in mapview.\n\u003E Edit: better remove all mods to narrow it down, if it doesn\u0027t work in a stock install then something has gone seriously wrong.\n\nThanks for the speedy reply, I\u0027ll try to reproduce/narrow it down and will get back ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-04-17T18:31:26Z","Content":"That last version partly resolved the issue I was seeing with it but it still throws an error occasionally that kills haze\n\nQuestion: are you compiling against .NET 3.5? (you want to because KSP uses 3.5 and not 4.0, which your compiler might be defaulting to)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T18:32:39Z","Content":"\u003E \n\u003E Thanks for the speedy reply, I\u0027ll try to reproduce/narrow it down and will get back ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\ngodspeed\n\n\u003E \n\u003E P.s. I don\u0027t mean to sound annoyed I\u0027m just exited about how beautiful this mod is and it\u0027s potential with RVE ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\u003E \n\u003E Great job thus far, this could be the fix for EVE\u0027s volumetrics I\u0027ve been waiting for to kick-start RVE development again!\n\nGlad you guys are enjoying this, the one thing that would remain missing then is true volumetric clouds.\n\nNotice how much of a difference the clouds make to the feel of the scene:\n\n\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/0ygZCDoCVec?start=71\u0026feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\n\n\u003E \n\u003E That last version partly resolved the issue I was seeing with it but it still throws an error occasionally that kills haze\n\u003E Question: are you compiling against .NET 3.5? (you want to because KSP uses 3.5 and not 4.0, which your compiler might be defaulting to)\n\nI\u0027m compiling against 4.0, 3.5 doesn\u0027t compile for me, errors everywhere. Are you sure KSP uses 3.5? I thought they upgraded with unity.\n\nAnd if you\u0027re talking about the haze messing up when you change scenes without disabling it or after using the map view, that\u0027s not a compiler error, that\u0027s a minor thing that I fixed but didn\u0027t think it warranted an update ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\n**Edited \u003Ctime datetime=\u00222015-04-17T18:38:03Z\u0022 title=\u002204/17/2015 06:38  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 17, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-04-17T18:53:02Z","Content":"@Blackrack, would it be possible to add a section in your OP where you lists the currently \u0027known issues\u0027? \n\nNow most issues, or the ones solved, are a bit spread throughout the thread ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nBtw I get these odd looking circles on the oceans, this a known thing?\n\n![N5G0Vln.png](http://i.imgur.com/N5G0Vln.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-17T18:55:24Z","Content":"\u003E \n\u003E @Blackrack, would it be possible to add a section in your OP where you lists the currently \u0027known issues\u0027? \n\u003E Now most issues, or the ones solved, are a bit spread throughout the thread ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\u003E \n\u003E Btw I get these odd looking circles on the oceans, this a known thing?\n\u003E \n\u003E [http://i.imgur.com/N5G0Vln.png](http://i.imgur.com/N5G0Vln.png)\n\nDefinitely not a known thing, which platform are your running on? Directx or opengl?"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2015-04-17T18:59:32Z","Content":"ok so removed all other mods except scatterer, still no ground haze, looking in more detail however I noticed the post processing ground haze is only being applied to game objects (e.g. KSC and runway) but not to the actual terrain.\n\nBesides starting up the game and hitting toggle postprocessing once on the launch pad what else would I need to adjust or should it look as your screens do with the -out the box- default settings?\n\nCheers again\n\nP"}]}