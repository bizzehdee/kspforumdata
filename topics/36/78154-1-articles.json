{"TopicId":78154,"ForumId":36,"TopicTitle":"Contract Modding Information for Mod Authors","CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2014-07-18T09:00:31Z","PageNum":1,"Articles":[{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2014-07-18T09:00:31Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EModding Contracts\u003C/span\u003E\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/rOXdl\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAs you can see, there are now some contracts asking you to dock around Kerbin, of course, it needs some work (the insane rewards are insane), but it is basically the framework for a modded contract. It was also generated based on how far i had advanced (none at all, because it was a testing world, hence why it said Kerbin instead of Jool or something crazy like that)\u003C/p\u003E\u003Cp\u003ENotes:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EMOST Contract related stuff is found in the Contracts namespace \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Eany class extending Contract (in the namespace Contracts) is automatically found and added \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ECreating a contract:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EMake a class that extends Contract, the game automatically finds all classes extending Contract and adds them in. \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Eoverride the following methods:\u003Cbr\u003E\u003Cul\u003E\u003Cli\u003EGenerate() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECanBeCancelled() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECanBeDeclined() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EGetHashString() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EGetTitle() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EGetDescription() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EGetSynopsis() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EMessageCompleted() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOnLoad() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOnSave() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EMeetRequirements() \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E[*]In Generate(), you \u003Cstrong\u003EMUST\u003C/strong\u003E call the following things:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003Ebase.SetExpiry() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Ebase.SetScience(float reward, CelestialBody) \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Ebase.SetDeadlineYears(float numberOfYears, CelestialBody targetBody) \u003Cstrong\u003EOR\u003C/strong\u003E base.SetDeadlineDays(float numberOfDays, CelestialBody targetBody) \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Ebase.SetReputation(float reward, float failiure, CelestialBody targetBody) \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Ebase.SetFunds(float advance, float reward, float failiure, targetBody) \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E[*]In Generate(), add some parameters using this.AddParameter(ContractParameter parameter, string id). I have no clue what id does, I just use null, which seems to work, Ill talk about ContractParameters later in this thread, but for now, just use new KerbalDeaths(), which will make you fail the contract if you kill any \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Evictims\u003C/span\u003E kerbals while the contract is active. The stock ContractParameters are in the namespace Contracts.Parameters, so try messing around with those. \u003C/p\u003E\u003Cp\u003E[*]In MeetRequirements(), you can check if this contract should show up in mission control, and return false is it shouldn\u0027t and true if it should. \u003C/p\u003E\u003Cp\u003E[*]the rest is customizable, but if you fill out the GetTitle(), GetDescription(), GetSynopsis(), and MessageCompleted(), it should show up in game. Mess around with the TextGen class (which, of course, is in the namespace Contracts) \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EContractParameters:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EMake a class extending ContractParameter \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOverride the following methods:\u003Cbr\u003E\u003Cul\u003E\u003Cli\u003EOnRegister() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOnUnregister() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOnLoad() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOnSave() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EGetTitle() \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EGetHashString() \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E[*]In OnRegister(), put initialization code such as adding to a GameEvent, or instantiating a new MonoBehaviour \u003C/p\u003E\u003Cp\u003E[*]In OnUnregister(), put code similar to what you would expect in OnDestroy(), such as removing a GameEvent added in OnRegister() or destroying a MonoBehaviour created in OnRegister() \u003C/p\u003E\u003Cp\u003E[*]OnSave() and OnLoad() are where you handle persistence, keep in mind that in OnSave(), NEVER use node.SetValue(), ALWAYS usennode.AddValue() \u003C/p\u003E\u003Cp\u003E[*]In GetTitle(), simply return the name of your parameter, like \u0022Orbit \u0022 \u002B targetBody.the name \u003C/p\u003E\u003Cp\u003E[*]use base.SetComplete() to complete the contract. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EUsing ProgressTracking to select targets based on progress:\u003C/strong\u003E \u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#a9a9a9;\u0022\u003Esuch an imaginative title!\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u20AC\u00B9just mess around with the ProgressTracking class and the protected static methods in the Contract class, such as Contract.GetBodies_NextUnvisited(). Use these in Generate () in your contract class to select the targetBody parameter used in SetScience() and SetFunds() in your contract class. You should also pipe the targetBody parameter into the the ContractParameter you made.\u003C/span\u003E\u003C/span\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EExample Code: \u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ENote: I dont care what you do with this code, its in the public domain\u003C/p\u003E\u003Cp\u003EDockingContract.cs:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing System;\u003Cbr\u003Eusing System.IO;\u003Cbr\u003Eusing System.Collections;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003Eusing Contracts;\u003Cbr\u003Eusing Contracts.Parameters;\u003Cbr\u003Eusing KSP;\u003Cbr\u003Eusing KSPAchievements;\u003Cbr\u003Eusing ContractsPlus.Contracts.Parameters;\u003Cbr\u003E\u003Cbr\u003Enamespace ContractsPlus.Contracts\u003Cbr\u003E{\u003Cbr\u003E    public class DockingContract : Contract\u003Cbr\u003E    {\u003Cbr\u003E        CelestialBody targetBody = null;\u003Cbr\u003E\u003Cbr\u003E        protected override bool Generate ()\u003Cbr\u003E        {\u003Cbr\u003E            targetBody = GetNextUnreachedTarget (1, true, false);\u003Cbr\u003E            if (targetBody == null)\u003Cbr\u003E            {\u003Cbr\u003E                targetBody = Planetarium.fetch.Home;\u003Cbr\u003E                Debug.LogWarning (\u0022targetBody could not be computed, using Kerbin\u0022);\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E            CelestialBodySubtree progress = null;\u003Cbr\u003E            foreach (var node in ProgressTracking.Instance.celestialBodyNodes) \u003Cbr\u003E            {\u003Cbr\u003E                if (node.Body == targetBody)\u003Cbr\u003E                    progress = node;\u003Cbr\u003E            }\u003Cbr\u003E            if (progress == null)\u003Cbr\u003E            {\u003Cbr\u003E                Debug.LogError (\u0022ProgressNode for targetBody \u0022 \u002B targetBody.bodyName \u002B \u0022 not found, terminating contract\u0022);\u003Cbr\u003E                return false;\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E            if (progress.docking.IsComplete)\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log (\u0022Docking has already been completed for targetBody \u0022 \u002B targetBody.bodyName \u002B \u0022, terminating contract\u0022);\u003Cbr\u003E                return false;\u003Cbr\u003E            }\u003Cbr\u003E            bool manned = UnityEngine.Random.Range (0, 1) == 0;\u003Cbr\u003E\u003Cbr\u003E            this.AddParameter (new DockingParameter (targetBody, manned), null);\u003Cbr\u003E            if (manned)\u003Cbr\u003E                this.AddParameter (new KerbalDeaths(), null);\u003Cbr\u003E\u003Cbr\u003E            base.SetExpiry ();\u003Cbr\u003E            base.SetScience (2.25f, targetBody);\u003Cbr\u003E            base.SetDeadlineYears (1f, targetBody);\u003Cbr\u003E            base.SetReputation (150f, 60f, targetBody);\u003Cbr\u003E            base.SetFunds(15000f, 50000f, 35000f, targetBody);\u003Cbr\u003E            return true;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public override bool CanBeCancelled ()\u003Cbr\u003E        {\u003Cbr\u003E            return true;\u003Cbr\u003E        }\u003Cbr\u003E        public override bool CanBeDeclined ()\u003Cbr\u003E        {\u003Cbr\u003E            return true;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        protected override string GetHashString ()\u003Cbr\u003E        {\u003Cbr\u003E            return targetBody.bodyName;\u003Cbr\u003E        }\u003Cbr\u003E        protected override string GetTitle ()\u003Cbr\u003E        {\u003Cbr\u003E            return \u0022Dock in orbit around \u0022 \u002B targetBody.theName;\u003Cbr\u003E        }\u003Cbr\u003E        protected override string GetDescription ()\u003Cbr\u003E        {\u003Cbr\u003E            //those 3 strings appear to do nothing\u003Cbr\u003E            return TextGen.GenerateBackStories (Agent.Name, Agent.GetMindsetString (), \u0022docking\u0022, \u0022dock\u0022, \u0022kill all humans\u0022, new System.Random ().Next());\u003Cbr\u003E        }\u003Cbr\u003E        protected override string GetSynopsys ()\u003Cbr\u003E        {\u003Cbr\u003E            return \u0022Dock two vessels in orbit around \u0022 \u002B targetBody.theName;\u003Cbr\u003E        }\u003Cbr\u003E        protected override string MessageCompleted ()\u003Cbr\u003E        {\u003Cbr\u003E            return \u0022You have succesfully docked around \u0022 \u002B targetBody.theName;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        protected override void OnLoad (ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            int bodyID = int.Parse(node.GetValue (\u0022targetBody\u0022));\u003Cbr\u003E            foreach(var body in FlightGlobals.Bodies)\u003Cbr\u003E            {\u003Cbr\u003E                if (body.flightGlobalsIndex == bodyID)\u003Cbr\u003E                    targetBody = body;\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E        protected override void OnSave (ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            int bodyID = targetBody.flightGlobalsIndex;\u003Cbr\u003E            node.AddValue (\u0022targetBody\u0022, bodyID);\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        //for testing purposes\u003Cbr\u003E        public override bool MeetRequirements ()\u003Cbr\u003E        {\u003Cbr\u003E            return true;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        protected static CelestialBody GetNextUnreachedTarget(int depth, bool removeSun, bool removeKerbin)\u003Cbr\u003E        {\u003Cbr\u003E            var bodies = Contract.GetBodies_NextUnreached (depth, null);\u003Cbr\u003E            if (bodies != null)\u003Cbr\u003E            {\u003Cbr\u003E                if (removeSun)\u003Cbr\u003E                    bodies.Remove (Planetarium.fetch.Sun);\u003Cbr\u003E                if (removeKerbin)\u003Cbr\u003E                    bodies.Remove (Planetarium.fetch.Home);\u003Cbr\u003E\u003Cbr\u003E                if (bodies.Count \u0026gt; 0)\u003Cbr\u003E                    return bodies [UnityEngine.Random.Range (0, bodies.Count - 1)];\u003Cbr\u003E            }\u003Cbr\u003E            return null;\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDockingParameter.cs:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing System;\u003Cbr\u003Eusing System.IO;\u003Cbr\u003Eusing System.Collections;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003Eusing Contracts;\u003Cbr\u003Eusing KSP;\u003Cbr\u003Eusing KSPAchievements;\u003Cbr\u003E\u003Cbr\u003Enamespace ContractsPlus.Contracts.Parameters\u003Cbr\u003E{\u003Cbr\u003E    public class DockingParameter : ContractParameter\u003Cbr\u003E    {\u003Cbr\u003E        public CelestialBody targetBody;\u003Cbr\u003E        public bool manned = false;\u003Cbr\u003E\u003Cbr\u003E        public DockingParameter(CelestialBody target, bool manned)\u003Cbr\u003E        {\u003Cbr\u003E            this.targetBody = target;\u003Cbr\u003E            this.manned = manned;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        protected override string GetHashString ()\u003Cbr\u003E        {\u003Cbr\u003E            return targetBody.bodyName;\u003Cbr\u003E        }\u003Cbr\u003E        protected override string GetTitle ()\u003Cbr\u003E        {\u003Cbr\u003E            return \u0022Dock two vessels in orbit around \u0022 \u002B targetBody.theName;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        protected override void OnRegister ()\u003Cbr\u003E        {\u003Cbr\u003E            GameEvents.onPartCouple.Add (OnDock);\u003Cbr\u003E        }\u003Cbr\u003E        protected override void OnUnregister ()\u003Cbr\u003E        {\u003Cbr\u003E            GameEvents.onPartCouple.Remove (OnDock);\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        protected override void OnSave (ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            int bodyID = int.Parse(node.GetValue (\u0022targetBody\u0022));\u003Cbr\u003E            foreach(var body in FlightGlobals.Bodies)\u003Cbr\u003E            {\u003Cbr\u003E                if (body.flightGlobalsIndex == bodyID)\u003Cbr\u003E                    targetBody = body;\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E        protected override void OnLoad (ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            int bodyID = targetBody.flightGlobalsIndex;\u003Cbr\u003E            node.AddValue (\u0022targetBody\u0022, bodyID);\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        private void OnDock(GameEvents.FromToAction\u0026lt;Part, Part\u0026gt; action)\u003Cbr\u003E        {\u003Cbr\u003E            if (manned)\u003Cbr\u003E            {\u003Cbr\u003E                if (action.from.vessel.GetVesselCrew ().Count \u0026gt; 0 \u0026amp;\u0026amp; action.to.vessel.GetVesselCrew ().Count \u0026gt; 0)\u003Cbr\u003E                {\u003Cbr\u003E                    if (action.from.vessel.mainBody == targetBody \u0026amp;\u0026amp; action.to.vessel.mainBody)\u003Cbr\u003E                    {\u003Cbr\u003E                        base.SetComplete ();\u003Cbr\u003E                    }\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E            else\u003Cbr\u003E            {\u003Cbr\u003E                if (action.from.vessel.mainBody == targetBody \u0026amp;\u0026amp; action.to.vessel.mainBody)\u003Cbr\u003E                {\u003Cbr\u003E                    base.SetComplete ();\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EFeel free to contribute and/or correct me if im wrong.\u003C/strong\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-18T23:26:50Z\u0022 title=\u002207/18/2014 11:26  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 18, 2014\u003C/time\u003E by MrHappyFace\u003C/strong\u003E\n\u003Cbr\u003Eadded source code\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-07-18T09:37:56Z","Content":"\n\u003Cp\u003EHm. Sooooo judging by the dots and brackets, I\u0027m guessing this is a job for programmers and not us untrained folk.\u003C/p\u003E\n"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2014-07-18T09:52:10Z","Content":"\n\u003Cp\u003EIt does say so in the title\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-07-18T10:18:19Z","Content":"\n\u003Cp\u003EAny plug-in coder would like to make a user-friendly interface ?\u003C/p\u003E\u003Cp\u003EBasically, provide the same things but a in config file like:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022\\\u0022 data-cite=\u0022\\\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Ename=a new contract\u003C/p\u003E\u003Cp\u003Esummary = do this\u003C/p\u003E\u003Cp\u003Ereward = a shiny kandy\u003C/p\u003E\u003Cp\u003Edescription = do this or that this way\u003C/p\u003E\u003Cp\u003Econditions = ...\u003C/p\u003E\u003Cp\u003Erestrictions = (science/parts/... allowed)\u003C/p\u003E\u003Cp\u003Edelay = 3.5 hours/days/months/years (or just h/d/m/y for parsing ease)\u003C/p\u003E\u003Cp\u003E... other relevant fields...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ewhat do you think ?\u003C/p\u003E\n"},{"CreatedByName":"m4v","CreatedById":67965,"CreatedDateTime":"2014-07-18T10:27:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Justin Kerbice\u0022 data-cite=\u0022Justin Kerbice\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Ewhat do you think ?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003ELearn some C# for Christ sake \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2014-07-18T10:56:39Z","Content":"\n\u003Cp\u003EExcept plugins, especially on this forum (what with all this \u0022post source and license\u0022) are, generally, a hassle. An easy, human-readable config would allow much more flexibility. Also, I\u0027ve been hoping that it\u0027d be possible to tweak Squad contract so that, for example, RSS users could have real company names and logos in there. There must be a plugin that allows editing contracts with a config file.\u003C/p\u003E\n"},{"CreatedByName":"kujuman","CreatedById":28299,"CreatedDateTime":"2014-07-18T11:37:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dragon01\u0022 data-cite=\u0022Dragon01\u0022\u003E\u003Cdiv\u003EExcept plugins, especially on this forum (what with all this \u0022post source and license\u0022) are, generally, a hassle. An easy, human-readable config would allow much more flexibility. Also, I\u0027ve been hoping that it\u0027d be possible to tweak Squad contract so that, for example, RSS users could have real company names and logos in there. There must be a plugin that allows editing contracts with a config file.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECompany names and pictures are in GameData/Squad/Agencies\u003C/p\u003E\u003Cp\u003EIt looks pretty easy to add/change companies using module manager, but this is untested.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003ENotes:\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EMOST Contract related stuff is found in the Contracts namespace\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Eany class extending Contract (in the namespace Contracts) is automatically found and added\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s almost as easy as I was hoping it would be. Thanks for taking the time to figure this all out.\u003C/p\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-07-18T13:34:01Z","Content":"\n\u003Cp\u003ERiiight... Well, guess what I\u0027ll be doing this weekend...\u003C/p\u003E\n"},{"CreatedByName":"Arsonide","CreatedById":32604,"CreatedDateTime":"2014-07-18T19:41:19Z","Content":"\n\u003Cp\u003EI approve of this thread! I was looking at the same classes last night, and came to the same conclusions. ContractParameters are fairly straightforward as well. Have you figured out what ContractPredicates are? From what I understand, they are abstract classes that Contracts and Parameters build on, and thus are not something that you really have to worry about, but I might be wrong.\u003C/p\u003E\u003Cp\u003EEDIT: Contract ideas - satellite deployment, docking, payload deployment and/or docking, base/station building, orbital adjustment (object spawns with incorrect orbit, move to correct inclination/keosynchronous orbit whatev) using docking/claw, debris cleanup, easter egg hunt (gives player vague location and asks them to find something interesting vaguely - one shot mission), sample collection (kind of like the flag placement mission except the sample has to make it back to Kerbin to complete the mission.) ARM, Repair (player goes to spawned object and uses some context sensitive actions in EVA).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-18T19:47:46Z\u0022 title=\u002207/18/2014 07:47  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 18, 2014\u003C/time\u003E by Arsonide\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-07-18T19:54:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arsonide\u0022 data-cite=\u0022Arsonide\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EEDIT: Contract ideas - satellite deployment, docking, payload deployment and/or docking, base/station building, orbital adjustment (object spawns with incorrect orbit, move to correct inclination/keosynchronous orbit whatev) using docking/claw, debris cleanup, easter egg hunt (gives player vague location and asks them to find something interesting vaguely - one shot mission), sample collection (kind of like the flag placement mission except the sample has to make it back to Kerbin to complete the mission.) ARM, Repair (player goes to spawned object and uses some context sensitive actions in EVA).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOnce I figure out how to actually make contracts, missions like these and more will all be part of the \u0022Cabana Corporation Research \u0026amp; Development: Sub-Contracting\u0022 (working title) pack. Along with possibly a passive \u0022salary\u0022 addition, which I\u0027ve covered elsewhere on a thread...\u003C/p\u003E\n"},{"CreatedByName":"Arsonide","CreatedById":32604,"CreatedDateTime":"2014-07-18T20:02:00Z","Content":"\n\u003Cp\u003EThat\u0027s all I can really think of for stock, perhaps there are more creative options, like a race contract that has you go between two waypoints as fast as possible, starting a timer when you hit the first waypoint, and failing if you don\u0027t make it to the second one in time, with constrictions like \u0022cannot leave the ground\u0022 or \u0022cannot touch the ground\u0022 or \u0022must be splashed down\u0022 for boat racing. There are some mods that lend themselves well to contract types, like Kethane could have \u0022scan this hex\u0022 or \u0022drill x kethane out of this hex\u0022.\u003C/p\u003E\u003Cp\u003EOne thing I would like to point out if you plan on doing these...I will be working on this too, but my time is limited...if you add them and an agency, make the agency optional, for people who want the extra contract variety, but with the stock agencies. Perhaps release two versions. (Just my two cents.)\u003C/p\u003E\n"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2014-07-18T21:23:16Z","Content":"\n\u003Cp\u003EUpdate: I added ContractParameter and ProgressTracking information and uploaded some example code.\u003C/p\u003E\n"},{"CreatedByName":"Arsonide","CreatedById":32604,"CreatedDateTime":"2014-07-18T22:17:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrHappyFace\u0022 data-cite=\u0022MrHappyFace\u0022\u003E\u003Cdiv\u003EUpdate: I added ContractParameter and ProgressTracking information and uploaded some example code.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI really appreciate it man, this was my first thought about 0.24 when I realized it only had five templates: \u0022we need to double that number\u0022. Your pioneering is a great help to the game and the community.\u003C/p\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-07-18T22:46:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arsonide\u0022 data-cite=\u0022Arsonide\u0022\u003E\u003Cdiv\u003EI really appreciate it man, this was my first thought about 0.24 when I realized it only had five templates: \u0022we need to double that number\u0022. Your pioneering is a great help to the game and the community.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIndeed.\u003C/p\u003E\u003Cp\u003EI\u0027ll be getting on the modding wagon post-haste!\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-07-19T21:07:46Z","Content":"\n\u003Cp\u003EThanks for this. I\u0027ll be adding contracts to my own mod soon and I\u0027ll make to sure to post here if I learn anything useful.\u003C/p\u003E\u003Cp\u003EIt would be great if this could be stickied (or maybe moved to the plugin forum and stickied) like the science experiment thread is.\u003C/p\u003E\n"},{"CreatedByName":"kiwiak","CreatedById":82796,"CreatedDateTime":"2014-07-19T22:40:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EThanks for this. I\u0027ll be adding contracts to my own mod soon and I\u0027ll make to sure to post here if I learn anything useful.\u003Cp\u003EIt would be great if this could be stickied (or maybe moved to the plugin forum and stickied) like the science experiment thread is.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo you plan to ad some new types of contracts?\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-07-20T02:50:20Z","Content":"\n\u003Cp\u003EI assume we can add new agencies by simply including a config file with the AGENT{} with the name, logo (and I\u0027m guessing the scaled logo is just smaller?), and whatever modifiers you want to add.\u003C/p\u003E\u003Cp\u003EIt seems to add it according to the log file during loading, though I haven\u0027t actually added any actual contracts, so I can\u0027t tell for sure if it\u0027s working.\u003C/p\u003E\u003Cp\u003EEdit: Yep, this works for adding new agents.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-20T03:30:53Z\u0022 title=\u002207/20/2014 03:30  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 20, 2014\u003C/time\u003E by DMagic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arsonide","CreatedById":32604,"CreatedDateTime":"2014-07-20T02:58:30Z","Content":"\n\u003Cp\u003EI might have added a new contract type today...I might have also killed some kerbals trying it out...\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://content.screencast.com/users/Arsonide/folders/Jing/media/e64fa67e-5d59-4115-8826-b9870d5ceca6/2014-07-19_2147.png\u0022 alt=\u00222014-07-19_2147.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-07-20T03:10:09Z","Content":"\n\u003Cp\u003EHuzzah! A contract to \u0022Do something\u0022 asks you to collect some science from Kerbin orbit. I\u0027ll have to do something about that terrible scaled logo..., Edit: or maybe just not use the scaled logo for both types...\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/RNfWHEp.png\u0022 alt=\u0022RNfWHEp.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo am I thinking about this right that we\u0027ll need a new instance of the Contract class for every contract we make? \u003C/p\u003E\u003Cp\u003EThen I guess the idea would be to make the contract parameters as flexible as we need them to be. Alternatively, would it be possible to create a config file with parameters for several contracts, then write some code to load those parameters, create a new instance of our Contract-derived class, and pass those parameters into it? I probably need to spend more time thinking about the Contract.Parameters.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-20T03:12:15Z\u0022 title=\u002207/20/2014 03:12  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 20, 2014\u003C/time\u003E by DMagic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arsonide","CreatedById":32604,"CreatedDateTime":"2014-07-20T03:16:31Z","Content":"\n\u003Cp\u003EYeah, you really want to make the parameters as single purposed as possible. Like when I was designing the rover contract, I had some check in there to make sure that the rover was launched after the contract was accepted (so that the player couldn\u0027t just accept a contract to drive on the mun and use a rover that was already sitting there), and about half way through it I decided that would actually apply to many different types of contracts, so I split it off into it\u0027s own parameter, as you can see in the screenshot.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-07-20T03:30:13Z","Content":"\n\u003Cp\u003EIf you want to force it to a specific agent you need:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E     base.agent = new Contracts.Agents.Agent(\u0022DMagic\u0022, \u0022logo URL\u0022, \u0022logo Scaled URL\u0022);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ein your Generate code, with the URLs being the location of the logos specified in the Agent config file.\u003C/p\u003E\u003Cp\u003EEdit: Use the code in the next post to fetch an existing agent rather than creating a new one.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-20T18:12:34Z\u0022 title=\u002207/20/2014 06:12  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 20, 2014\u003C/time\u003E by DMagic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2014-07-20T03:58:33Z","Content":"\n\u003Cp\u003EI\u0027m making* a new type of contract:\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#a9a9a9;\u0022\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E*attempting and failing miserably\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://i.imgur.com/wa3gHeC.png\u0022 alt=\u0022wa3gHeC.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: DMagic, shouldnt you use\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E base.agent = Contracts.Agents.AgentList.Instance.GetAgent(\u0022DMagic\u0022);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-20T04:15:51Z\u0022 title=\u002207/20/2014 04:15  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 20, 2014\u003C/time\u003E by MrHappyFace\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-07-20T04:32:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrHappyFace\u0022 data-cite=\u0022MrHappyFace\u0022\u003E\u003Cdiv\u003EEDIT: DMagic, shouldnt you use\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E base.agent = Contracts.Agents.AgentList.Instance.GetAgent(\u0022DMagic\u0022);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, that would probably make more sense.\u003C/p\u003E\n"},{"CreatedByName":"kiwiak","CreatedById":82796,"CreatedDateTime":"2014-07-20T08:05:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrHappyFace\u0022 data-cite=\u0022MrHappyFace\u0022\u003E\u003Cdiv\u003EI\u0027m making* a new type of contract:\u003Cp\u003E\u003Cspan style=\u0022color:#a9a9a9;\u0022\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E*attempting and failing miserably\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://i.imgur.com/wa3gHeC.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://i.imgur.com/wa3gHeC.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT: DMagic, shouldnt you use\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E base.agent = Contracts.Agents.AgentList.Instance.GetAgent(\u0022DMagic\u0022);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt woudl be nice if it required specific orbit parameters, for example molniya orbit-like. Players are launching exuatorial all the time, except rare cases of when they want to encounter asterid or put satellite on polar orbit.\u003C/p\u003E\u003Cp\u003EAlso, is it possible to make use of asteroid/stranded kerbal spawning system to make game spawn its own ships?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-20T08:11:21Z\u0022 title=\u002207/20/2014 08:11  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 20, 2014\u003C/time\u003E by kiwiak\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arsonide","CreatedById":32604,"CreatedDateTime":"2014-07-20T12:00:57Z","Content":"\n\u003Cp\u003EOne orbital parameter could be geostationary, if you get vessel.orbit.period and compare it to the orbital period of the celestial body (it\u0027s in there somewhere too) and see how close they are versus an allowance of sorts, you can detect a synchronous orbit pretty easily.\u003C/p\u003E\u003Cp\u003EMy rover missions are done for the most part, if you guys want to help me hunt bugs in the plugin, I started a thread here: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/87106-0-24-WIP-Extra-Contracts\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/87106-0-24-WIP-Extra-Contracts\u003C/a\u003E\u003C/p\u003E\n"}]}