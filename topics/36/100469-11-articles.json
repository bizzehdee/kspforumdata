{"TopicId":100469,"ForumId":36,"TopicTitle":"KSPBlender - Blender Addon for importing .craft files (now with complete mod support!)","CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-02-22T22:45:19Z","PageNum":11,"Articles":[{"CreatedByName":"Zucal","CreatedById":139764,"CreatedDateTime":"2015-04-09T17:10:10Z","Content":"Well, I tried mucking about with the directory and it seems to be working- partially though. It refuses to import .craft files, and gives me various error messages when I try. I was able to import the Skipper .mu file straight from Squad\u0027s Gamedata, although it appeared only partially and way off center. Can someone tell me what I\u0027m doing wrong?\n\nAn album of my failure: [http://imgur.com/a/PHtyD#0](http://imgur.com/a/PHtyD#0)"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2015-04-09T22:43:19Z","Content":"It seems that the nozzles of engines are painted white for me... though I haven\u0027t grabbed an update in a while. Was this fixed?"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-10T00:07:46Z","Content":"\u003E \n\u003E It seems that the nozzles of engines are painted white for me... though I haven\u0027t grabbed an update in a while. Was this fixed?\n\nI haven\u0027t noticed that, though I haven\u0027t imported much lately. The poodle engine i think it was in my muncan1-5 video was fine."},{"CreatedByName":"Zucal","CreatedById":139764,"CreatedDateTime":"2015-04-10T00:28:33Z","Content":"This badly needs a Mac tutorial starting from the beginning. I\u0027m having a lot of trouble, and would sell my soul for a step-by-step guide for OSX. File placement especially- where do I find and paste the directory?"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-10T01:11:17Z","Content":"\u003E \n\u003E This badly needs a Mac tutorial starting from the beginning. I\u0027m having a lot of trouble, and would sell my soul for a step-by-step guide for OSX. File placement especially- where do I find and paste the directory?\n\nIs ksp.app the executable or a folder? I don\u0027t know the different paths you tried for kspdir.txt, but maybe try this one:\n\n    /users/gdoehne/Desktop/KSP 0.90/\n\nLooks like you have the addons in the right place though. Also try using a stock craft first and see if that works."},{"CreatedByName":"Zucal","CreatedById":139764,"CreatedDateTime":"2015-04-10T02:04:52Z","Content":"\u003E \n\u003E Is ksp.app the executable or a folder? I don\u0027t know the different paths you tried for kspdir.txt, but maybe try this one:\n\u003E Code:\n\u003E \n\u003E /users/gdoehne/Desktop/KSP 0.90/\n\u003E \n\u003E Looks like you have the addons in the right place though. Also try using a stock craft first and see if that works.\n\nKSP.app is the executable (I assume you mean the actual game) and it\u0027s within KSP 0.90, which is a folder. So would it be \\\\users\\\\gdoehne\\\\Desktop\\\\KSP. 0.90\\\\KSP.app? It wasn\u0027t clear whether to use the two backwards slashes or not, or whether the folder hierarchy was backwards."},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-10T03:31:05Z","Content":"\u003E \n\u003E KSP.app is the executable (I assume you mean the actual game) and it\u0027s within KSP 0.90, which is a folder. So would it be \\\\users\\\\gdoehne\\\\Desktop\\\\KSP. 0.90\\\\KSP.app? It wasn\u0027t clear whether to use the two backwards slashes or not, or whether the folder hierarchy was backwards.\n\nThat should do it, although you shouldn\u0027t need the \\\\ just a single \\ should work, you also shouldn\u0027t need ksp.app, as all it needs is the path, because it uses that as the base of where to automatically find the parts.\n\nOriginally Dasoccerguy had it setup only for windows which uses \\ (i think it had to be doubled because \\ is used in the code to designate certain things, and having it double effectively turned it into the normal single \\ However on linux and Mac (because it is unix/linux based) they use / which doesn\u0027t need the double / or \\, just the single / Long story short because I brought this to his attention he was able to write the code so that it would detect whether it was linux/mac or windows.\n\nLong story short again.... try using **/** **users/gdoehne/Desktop/KSP. 0.90** or **/****users/gdoehne/Desktop/KSP. 0.90/** Not sure if it needs that last one or not.\n\nOnce you get it working, you may find that some parts import really big, or really small, or offset. So you might have to manually adjust those. The addon has a menu you can bring up by pushing the K key (think it works the same on all OS). So, like say you want to move/resize landing gear, you can click on part of it, hit the K key, and in the menu that comes up there should be an option to \u0022select all of part\u0022 i think, that way you can resize the whole thing. Also another good menu item in that menu is the \u0022toggle deploy\u0022 button, which may or may not work on all parts lol.\n\nGood luck ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Zucal","CreatedById":139764,"CreatedDateTime":"2015-04-10T04:46:10Z","Content":"I tried both versions, nothing. The way I\u0027m trying to import the craft is Blender Program -\u003E File -\u003E Import -\u003E KSP Craft (.craft) -\u003E Desktop -\u003E KSP 0.90 -\u003E saves -\u003E KSP Forum- Replicas and Designs (this is the save file) -\u003E Ships -\u003E VAB -\u003E [REPLICA] Soyuz.craft. No matter what .craft I select, it throws up an error message like this one:\n\n![9IZd0rN.png](http://i.imgur.com/9IZd0rN.png)\n\nApologies, Imgur is up to weird stuff the past few days. I\u0027m wondering if a( I need to place the .craft file somewhere else, b( There\u0027s a different way to import the craft, c( The directory in kspdir.txt needs some kind of prefix."},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-10T13:19:07Z","Content":"\u003E \n\u003E I tried both versions, nothing. The way I\u0027m trying to import the craft is Blender Program -\u003E File -\u003E Import -\u003E KSP Craft (.craft) -\u003E Desktop -\u003E KSP 0.90 -\u003E saves -\u003E KSP Forum- Replicas and Designs (this is the save file) -\u003E Ships -\u003E VAB -\u003E [REPLICA] Soyuz.craft. No matter what .craft I select, it throws up an error message like this one:\n\u003E [http://i.imgur.com/9IZd0rN.png](http://i.imgur.com/9IZd0rN.png)\n\u003E \n\u003E \n\u003E \n\u003E Apologies, Imgur is up to weird stuff the past few days. I\u0027m wondering if a( I need to place the .craft file somewhere else, b( There\u0027s a different way to import the craft, c( The directory in kspdir.txt needs some kind of prefix.\n\nHuh, don\u0027t think I\u0027ve seen an error like that before. From what the error is showing \n\n    UnicodeDecodeError: \u0027ascii\u0027 codec can\u0027t decode byte 0xe2 in position 1828: ordinal not in range(128)\n\n it seems to me that all your paths are correct. The only thing I can think of is that MAYBE your text file is being saved in a different format/character encoding that the script isn\u0027t handling. I don\u0027t what text editor you are using but if there is a way to check when you save the file (or in settings) and make sure it is being saved in UTF-8 format (thats what mine uses) and then try it again with one of the folder paths I listed in my previous post.\n\n**Update:** I tried saving my kspdir.txt with a different format (UTF-2 in this case) and it said it had an error, not the same error as you though. In my case it was a \u0022*TypeError: embedded NUL character*\u0022 Also, another thought I had is, depending on your locale settings for your keyboard, it\u0027s might be possible keyboard layout is using a character encoding that some how encodes the slashes differently. So when the script tries to read the kspdir.txt it has that error. Though I think it\u0027s still more likely it\u0027s the encoding of the file it\u0027s self. If you are still having trouble with it, I can try saving a kspdir.txt and upload it somewhere for you to try. Though if you don\u0027t trust me to do that I wouldn\u0027t blame you lol\n\n**Edited \u003Ctime datetime=\u00222015-04-10T13:35:43Z\u0022 title=\u002204/10/2015 01:35  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 10, 2015\u003C/time\u003E by Sma**"},{"CreatedByName":"Zucal","CreatedById":139764,"CreatedDateTime":"2015-04-10T15:29:45Z","Content":"No, I trust you! That would be fine. The kspdir.txt is being edited with Textedit. One thing: does the directory in kspdir.txt need some kind of prefix before?"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-10T15:47:42Z","Content":"\u003E \n\u003E No, I trust you! That would be fine. The kspdir.txt is being edited with Textedit. One thing: does the directory in kspdir.txt need some kind of prefix before?\n\nSent you a PM with a link to the file. Hopefully this does the trick for you. I don\u0027t think it needs a prefix, as you can see in your screenshots the path to blender just starts with the /"},{"CreatedByName":"Zucal","CreatedById":139764,"CreatedDateTime":"2015-04-10T16:03:33Z","Content":"That didn\u0027t quite do the trick. The kspdir.txt is being saved in the right format. I\u0027ve also moved both folders from the desktop to the Applications folder. Neither importing a craft file from the Blender add ons folder or from my KSP saves folder has worked. This is the new error message, which I\u0027ve gotten trying to make things work several times before.\n\n![oqzzO1L.png](http://i.imgur.com/oqzzO1L.png)\n\nIf it doesn\u0027t work soon, I\u0027ll sit tight and wait for an updated version or something, you and Dasoccerguy have better things to do than be IT for one guy. Thanks for all the help though!"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-10T16:44:28Z","Content":"\u003E \n\u003E That didn\u0027t quite do the trick. The kspdir.txt is being saved in the right format. I\u0027ve also moved both folders from the desktop to the Applications folder. Neither importing a craft file from the Blender add ons folder or from my KSP saves folder has worked. This is the new error message, which I\u0027ve gotten trying to make things work several times before.\n\u003E [http://i.imgur.com/oqzzO1L.png](http://i.imgur.com/oqzzO1L.png)\n\u003E \n\u003E If it doesn\u0027t work soon, I\u0027ll sit tight and wait for an updated version or something, you and Dasoccerguy have better things to do than be IT for one guy. Thanks for all the help though!\n\nHuh, sorry about that. Hopefully someone who knows mac better than me will be able to help you. I did some googling on the file structure in mac and didn\u0027t really find much (the /blender.app/ thing keeps throwing me off lol). I mean, it seems as if you have all the paths right to me though, as it is running the python scripts. Maybe it\u0027s just some glitch in the addon I guess, or we have the wrong folder some how in the partdir.txt file... lol and it\u0027s just not finding the gamedata folder."},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-04-11T00:33:08Z","Content":"Well if you can\u0027t find where the problem is, you can try the good old way of placing prints to console everywhere on the import method. \u0022printf mines\u0022 as I would call them. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Cptman","CreatedById":101643,"CreatedDateTime":"2015-04-12T21:42:15Z","Content":"Sorry, I don\u0027t have any idea on how to correct problems for Mac users but I have some updates for the add-on:\n\n-If you want to use, the script with B9 crafts you have to comment the lines \u0027exceptions = make\\_exceptions()\u0027 and \u0027exceptions\\_manager(p,rl,exceptions)\u0027 at the beginning of part\\_dict.py in the make\\_dict function.\n\nThe problem was that my piece of code tried to correct the name of B9 part from \u0027B9\\_part123\u0027 in the .cfg (part file) to \u0027B9.part123\u0027 for the .craft (craft file) (in part\\_dict.py) and Dasoccerguy tried to correct the name from \u0027B9.part456\u0027 in the .craft to \u0027B9\\_part456\u0027 for the .cfg (in import\\_craft.py). So, in the end the script had diffulties matching the name: from a \u0027B9\\_part\u0027 vs \u0027B9.part\u0027 problem we went to a \u0027B9.part\u0027 vs \u0027B9\\_part\u0027 problem. ![:confused:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif)\n\nHere is a quick render of a B9 craft in Blender : [http://www.pasteall.org/pic/show.php?id=86598](http://www.pasteall.org/pic/show.php?id=86598)\n\nAs you can see, the imported craft needs a bit of clean up since a lot of useless meshes (manually moved to side in the picture) are created during the import process. Use the fix at your own risk. However, we have a hint for you: a lot of these objects have \u0027proxy\u0027 in their name and even better, Dasoccerguy pointed out that these objects don\u0027t seem to have a texture or a material.\n\n-I\u0027ve also been able to correct the part where the make\\_dict function creates the right\\_scale dict (not in the current release of the add-on but it was in previous on). \n\nFor people who want to test things or know how it works (otherwise you can skip the text between \u0027\\*\\*\\*\u0027):\n\n\\*\\*\\*\n\nThe problem was that I wasn\u0027t paying enough attention to the wiki and right\\_scale.py from Dasoccerguy. So, I guess RTFM to me.\n\nHere, is how it works now: it still looks for \u0027rescaleFactor\u0027 and \u0027scale\u0027 in the .cfg (but only the one with \u0027scale = 2,5,9\u0027 and not \u0027scale = 1.3566\u0027 the second one is just for the nodes (and it was where I made a mistake)):\n\nrescale\\_factor \\_\\_scale\n\nfalse \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_ false -\u003E scale =1.25 (I was also one of my mistakes)\n\nfalse \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_ true -\u003E scale (not sure about that one, should it be scale\\*1.25 ?)\n\ntrue \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_ false -\u003E rescale\\_factor\n\ntrue \\_\\_\\_\\_\\_\\_\\_\\_\\_\\_ true -\u003E rescale\\_fatcor \\* scale\n\nIf you want to try it (not recommended if you are afraid of potential bugs) you can go to [https://github.com/Cptmann/ksp_partdic](https://github.com/Cptmann/ksp_partdic) and dowload partdic.py . You then have to copy-paste it in the right folder and rename it to part\\_dict.py (after making a save of the old one) and change the name of \u0027make\\_dict\\_with\\_rs\u0027 to \u0027make\\_dict\u0027, remove the other make\\_dict function and change at the beginning of import\\_craft.py after the rocket drawing (which is very nice by the way ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) ) \u0027[partdir,right\\_location] = part\\_dict.make\\_dict(ksp); rightscale = right\\_scale.make()\u0027 to \u0027[partdir,rightscale,right\\_location] = part\\_dict.make\\_dict(ksp)\u0027.\n\n\\*\\*\\*\n\n-Finally, you might have some problems with parts that are actually two parts stuck together (two models are indicated the .cfg)\n\nSorry for the long post.\n\n**Edited \u003Ctime datetime=\u00222015-04-12T21:52:31Z\u0022 title=\u002204/12/2015 09:52  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 12, 2015\u003C/time\u003E by Cptman**"},{"CreatedByName":"burnoutforzai","CreatedById":93344,"CreatedDateTime":"2015-04-17T07:46:40Z","Content":"I have no clue how to install this. If you could link me to a tutorial that would be great!"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-04-19T03:52:18Z","Content":"\u003E \n\u003E I have no clue how to install this. If you could link me to a tutorial that would be great!\n\nIf you haven\u0027t already, check the readme file in the download, or on the github page at [https://github.com/Dasoccerguy/io_kspblender/blob/master/README.txt](https://github.com/Dasoccerguy/io_kspblender/blob/master/README.txt) It\u0027s just a basic description of how to install it."},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-04-19T08:55:07Z","Content":"\u003E \n\u003E I have no clue how to install this. If you could link me to a tutorial that would be great!\n\nI\u0027m very slowly working on a video series for the addon. I have quite a few projects going at the moment, but I\u0027m going to make a push this week before 1.0 rolls out.\n\nFor now, the Readme on Github will have to do. Feel free to ask any questions!"},{"CreatedByName":"burnoutforzai","CreatedById":93344,"CreatedDateTime":"2015-04-19T09:54:19Z","Content":"Thanks Sma ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\n**Edited \u003Ctime datetime=\u00222015-04-19T09:58:14Z\u0022 title=\u002204/19/2015 09:58  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 19, 2015\u003C/time\u003E by burnoutforzai**"},{"CreatedByName":"esinohio","CreatedById":57681,"CreatedDateTime":"2015-04-30T14:06:04Z","Content":"Seems the 1.0 update caused all sorts of havoc with the mod. Anyone else experiencing problems? I can\u0027t import craft anymore ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)"},{"CreatedByName":"Cptman","CreatedById":101643,"CreatedDateTime":"2015-05-02T15:20:49Z","Content":"I\u0027m having problems too and it seems that it comes from the images.\n\nBut it seems (to me) that the problem comes from the .mu importer.\n\nI\u0027ve quickly checked and the problem might come from the fact that the textures are not in a .mbm file anymore but are .dds now (You can check the full changelog from KSP 1.0).\n\nI\u0027ve tried modifying a little the io\\_object\\_mu addon and it seems to be ok now. Try adding \u0022.dds\u0022 in the list wherever \u0022.png\u0022 is mentionned in import\\_mu.py (I think that the addon is checking for a .png or a .tga file (used by modders) when there is no .mbm file (used by Squad), so adding the \u0022.dds\u0022 should tell the script to look for the new texture files from Squad )\n\nAlso, if you were previously able to import craft from mods they shouldn\u0027t be affected by the problem since a lot of them use .png files.\n\nI hope this works.\n\n**Edited \u003Ctime datetime=\u00222015-05-03T21:17:57Z\u0022 title=\u002205/03/2015 09:17  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 3, 2015\u003C/time\u003E by Cptman**"},{"CreatedByName":"gardocki","CreatedById":58921,"CreatedDateTime":"2015-05-02T17:37:29Z","Content":"\u003E \n\u003E Seems the 1.0 update caused all sorts of havoc with the mod. Anyone else experiencing problems? I can\u0027t import craft anymore ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\nIt\u0027s working for me on stock craft but the UV (texture) mapping is messed up. Weird offsets like the bottom of fuel tanks showing up on the sides. Probably an easy fix but I\u0027m not familiar enough with Python to suggest how.\n\n- - - Updated - - -\n\nOkay I figured out the issue. All the texture UV\u0027s are rotated 180 degrees. Most obvious on things like the Kerbal X craft."},{"CreatedByName":"arc5555","CreatedById":103212,"CreatedDateTime":"2015-05-03T12:12:29Z","Content":"Hello , Dasoccerguy ! I\u0027m using your great addon for my papercraft project right now , but it seems that the textures are messed up unfortunately ![;.;](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif) Can you please help me with this problem ? \n\nIt seems that the new parts don\u0027t work too ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\n**Edited \u003Ctime datetime=\u00222015-05-03T12:18:12Z\u0022 title=\u002205/03/2015 12:18  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 3, 2015\u003C/time\u003E by arc5555**"},{"CreatedByName":"Cptman","CreatedById":101643,"CreatedDateTime":"2015-05-03T21:15:39Z","Content":"For the parts which are not importing you can try the manipulation I described above (only if the addon was working with 0.90 otherwise that\u0027s a whole different problem (a problem in the addon itself)). Just make sure to make a copy of the io\\_import\\_mu addon before.\n\nThe problem with the messed up texture is that they are not rotated correctly like gardocki pointed out. So, you can go select the part and and open a UV editor window and then try to rotate the uv map (a 180\u00C3\u201A\u00C2\u00B0 rotation plus sometime a -1 scale on the y axis should do it).\n\nOr you can try something like this:\n\n\u003E \n\u003E import bpy\n\u003E from math import radians\n\u003E \n\u003E last\\_area = bpy.context.area.type\n\u003E \n\u003E bpy.ops.object.editmode\\_toggle()\n\u003E \n\u003E bpy.context.area.type = \u0027IMAGE\\_EDITOR\u0027\n\u003E \n\u003E bpy.ops.uv.select\\_all(action=\u0027SELECT\u0027)\n\u003E \n\u003E bpy.ops.transform.rotate(value=radians(180))\n\u003E \n\u003E bpy.ops.transform.mirror(constraint\\_axis=(True,False,False))\n\u003E \n\u003E bpy.ops.object.editmode\\_toggle()\n\u003E \n\u003E bpy.context.area.type = last\\_area\n\nPaste it in the text editor, select the part (the mesh not the green empty made of circles) you want to modify and it \u0027Run Script\u0027.\n\nThe only problem is that it doesn\u0027t work with every part (example: the landing gear of the Aeris 3A) and might not be exact.\n\nI hope this work"},{"CreatedByName":"arc5555","CreatedById":103212,"CreatedDateTime":"2015-05-04T08:25:44Z","Content":"Thank you , i\u0027ll try it ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"}]}