{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":89,"Articles":[{"CreatedByName":"sandroxil","CreatedById":149348,"CreatedDateTime":"2020-05-20T08:49:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223787724\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221589905457\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUnfortunately not right now. I think we talked about it back in the days. Getting more info in the controlpacket is easy, but getting things working with other mods will be annoying, you have to worry about which version of KSPSerialIO supports which version of AGE, for which version of KSP. When KSP updates you have to make sure both mods are updated. Then also you have to make sure things don\u0027t break for people who don\u0027t use AGE...\n\u003C/p\u003E\n\u003Cp\u003E\nAn easier work around is just to use an Arduino Leo in keyboard emulation mode and bind the keys to AG(R)E.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI understand. Thank you.\n\u003C/p\u003E\n\u003Cp\u003E\nNow I\u0027m testing a board from a cheap usb keyboard, to use it for adding more buttons to my controller without using Arduino pins.\u003Cbr\u003E\nMay be I can do something with it.\n\u003C/p\u003E\n\u003Cp\u003E\nI will share my experience when I get something that works.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks again. See you in space\n\u003C/p\u003E\n"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-07-06T00:11:54Z","Content":"\n\u003Cp\u003E\nHad a question for anyone that\u0027s tinkered with the protocol of this mod. Has anyone modding the code to get multiple Arduinos to connect at once that they have code to browse? I\u0027m thinking of splitting the workload across devices (each with specific data) and wanted to check if anyone had done something similar before I continue with my Frankenstein of a project.\n\u003C/p\u003E\n\u003Cp\u003E\nBefore anyone\u00A0 says \u0022I don\u0027t need multiple devices\u0022, please know that I\u0027ve already extended the existing protocol to\u00A0run\u00A0most of the \u003Ca href=\u0022https://github.com/Mihara/RasterPropMonitor/wiki/Defined-variables\u0022 rel=\u0022external nofollow\u0022\u003ERPM variable set\u003C/a\u003E through KSPSerialIO. This is done through 412 bytes (so far) split across 3 different update\u00A0protocols that update at different speeds. Only 174 bytes are updating at the fastest speeds. As I\u0027m running a Teensy 3.6, I\u0027ve yet to hit a speed limit that overflows the buffer, but I\u0027m watching like a hawk with monitoring and timing checks.\n\u003C/p\u003E\n\u003Cp\u003E\nStress tests shows it works fine with\u00A0115200 baud and 50ms refresh, but I\u0027m planning for longer term expansion plans. I figure\u00A0it might be prudent to allow a compartmentalisation of the communication to give more throughput across multiple devices (using only one process in KSP) for when I need it.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-07-06T01:02:17Z\u0022 title=\u002207/06/2020 01:02  AM\u0022 data-short=\u00224 yr\u0022\u003EJuly 6, 2020\u003C/time\u003E by cyberKerb\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Manul","CreatedById":189366,"CreatedDateTime":"2020-07-11T15:42:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223815586\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221593994314\u0022 data-ipsquote-userid=\u002228891\u0022 data-ipsquote-username=\u0022cyberKerb\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 7/6/2020 at 3:11 AM, cyberKerb said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nmultiple Arduinos\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n- How to run multiple threads on Arduino?\u003Cbr\u003E\n- Use multiple Arduinos\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0As for me, Stm32 \u002B FreeRTOS looks more reasonable for this purpose.\n\u003C/p\u003E\n"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-07-12T10:22:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223818930\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221594482166\u0022 data-ipsquote-userid=\u0022189366\u0022 data-ipsquote-username=\u0022Manul\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, Manul said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nStm32 \u002B FreeRTOS looks more reasonable for this purpose.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the suggestion. I had a look and it seems to be a bit overkill for what I was after. It wasn\u0027t multi-threading arduinos that I\u00A0was looking for, but rather a way for the process that runs in the mod DLL to talk to multiple arduinos so not all traffic is\u00A0going to a single micro-controller.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve still got to do some more testing, but so far I\u0027ve changed\u00A0the code\u00A0and added a second SerialPort object called \u0027Port2\u0027 (existing object is \u003Cspan style=\u0022background-color:#ffffff;color:#6f42c1;font-size:12px;\u0022\u003ESerialPort\u003C/span\u003E\u003Cspan style=\u0022background-color:#ffffff;color:#24292e;font-size:12px;\u0022\u003E \u003C/span\u003E\u003Cspan style=\u0022background-color:#ffffff;color:#24292e;font-size:12px;\u0022\u003EPort)\u003C/span\u003E. I also changed some of the subroutines (\u003Cspan style=\u0022background-color:#ffffff;color:#6f42c1;font-size:12px;\u0022\u003EsendPacket,\u00A0Port_ReceivedEvent, etc...)\u00A0\u003C/span\u003Eso each part runs it\u0027s own code or I parameterise the code to pass which serial port to use, rather than\u00A0assuming it\u0027s always the default port to process an instruction. Fingers crossed I can get it to work.\n\u003C/p\u003E\n"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-07-14T16:08:46Z","Content":"\n\u003Cp\u003E\nI managed to answer my own question. After a rather late night of testing (2am here and going to bed now), I\u0027ve found that it isn\u0027t too hard to just add another SerialPort object into the DLL code and so long as you are careful about the making sure the routines all work for the separated ports, it\u0027s certainly viable. It also lets me know that if I ever hit any limit of what I can push to my existing micro-controller or it gets too busy with whatever I\u0027ll be demanding of it, I can always bang on another connection to a separate micro-controller and pipe data to it as well.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-07-14T16:10:43Z\u0022 title=\u002207/14/2020 04:10  PM\u0022 data-short=\u00223 yr\u0022\u003EJuly 14, 2020\u003C/time\u003E by cyberKerb\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2020-07-14T23:39:17Z","Content":"\n\u003Cp\u003E\nJesus.. When I started this I thought surely 255 bytes should be enough for everybody...\n\u003C/p\u003E\n"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-07-15T15:23:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223820680\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221594769957\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nJesus.. When I started this I thought surely 255 bytes should be enough for everybody...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, I\u0027d say for the vast majority, that will be fine for those whole don\u0027t want to code up some custom monstrosity. A KSP cockpit has so much\u00A0data to display and\u00A0the potential for sci-fi blinky-lights all around me was far too appealing. I\u0027m regularly browsing aircraft cockpit builder forums looking for tips and tricks in both software and hardware.\n\u003C/p\u003E\n"},{"CreatedByName":"sec3","CreatedById":167394,"CreatedDateTime":"2020-07-16T18:50:11Z","Content":"\n\u003Cp\u003E\nAs i now know that usb-joy encoders exist ;-),\u00A0i would never ever use the SerialIO for Keys/switches as inputs ... only for display. also reached out for a 3d-printer. awesome...\n\u003C/p\u003E\n\u003Cp\u003E\nbtw:\u00A0 does the mod work for 1.10 ?\u00A0 \u00A0the party goes on. most of\u00A0my 81 mods useless\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-07-16T18:50:33Z\u0022 title=\u002207/16/2020 06:50  PM\u0022 data-short=\u00223 yr\u0022\u003EJuly 16, 2020\u003C/time\u003E by sec3\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2020-07-25T17:10:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223821631\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221594925411\u0022 data-ipsquote-userid=\u0022167394\u0022 data-ipsquote-username=\u0022sec3\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 7/16/2020 at 7:50 PM, sec3 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs i now know that usb-joy encoders exist ;-),\u00A0i would never ever use the SerialIO for Keys/switches as inputs ... only for display. also reached out for a 3d-printer. awesome...\n\u003C/p\u003E\n\u003Cp\u003E\nbtw:\u00A0 does the mod work for 1.10 ?\u00A0 \u00A0the party goes on. most of\u00A0my 81 mods useless\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWorking fine for me so far, but I don\u0027t using everything available on my setup. Let me know if you have problems.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: updated SpaceDock/\u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-07-25T17:11:36Z\u0022 title=\u002207/25/2020 05:11  PM\u0022 data-short=\u00223 yr\u0022\u003EJuly 25, 2020\u003C/time\u003E by zitronen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AlanWik","CreatedById":206957,"CreatedDateTime":"2020-08-24T18:44:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223691793\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221571659475\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 10/21/2019 at 2:04 PM, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOK you do not want to put anything in \u0022loop()\u0022, the loop needs to run very fast without being slowed down by slow LCD stuff. Put your LCD code in \u0022input()\u0022 under the KSP receive data if statement like this:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003Eif (KSPBoardReceiveData()){\n    deadtimeOld = now;\n    returnValue = id;\n    switch(id) {\n    case 0: //Handshake packet\n      Handshake();\n      break;\n    case 1:\n      Indicators();\n\n      //LCD CODE HERE **************\n      lcd.setCursor(0,0);\n      lcd.print((long)VData.AP);\n      lcd.setCursor(0,1);\n      lcd.print((long)VData.PE);\n\n      break;\n    }\n\n    //We got some data, turn the green led on\n    digitalWrite(GLED,HIGH);\n    Connected = true;\n  }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for this answer. Solved the same problem for me!\n\u003C/p\u003E\n"},{"CreatedByName":"CommanderMAM","CreatedById":200916,"CreatedDateTime":"2020-09-02T13:51:35Z","Content":"\n\u003Cp\u003E\nHi, I\u0027m working on building my own Kerbal Controller (the physical side of it is nearly finished) and was trying to test this plugin on another Arduino using the light demo. Unfortunately, I haven\u0027t been able to get it to work. The first LED lights during the loading screen, but then my game briefly freezes (not responding) and the light goes off. It then stays off for the rest of the flight until I\u0027m in the loading screen before launch again, after which the whole cycle repeats. I\u0027m using the demo code exactly as is, running on Windows 10 with the latest KSP version. I do have a few mods installed (mod list below) through \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E, however I installed KerbalSerialIO manually. Is there something I\u0027m missing? Thanks for your help.\u003Cbr\u003E\u003Cbr\u003E\nMod list:\u003Cbr\u003E\nB9 Part Switch (B9PartSwitch v2.17.0)\u003Cbr\u003E\nBreaking Ground (BreakingGround-DLC 1.5.1)\u003Cbr\u003E\nCommunity Tech Tree (CommunityTechTree 1:3.4.2)\u003Cbr\u003E\nKerbal Engineer Redux (KerbalEngineerRedux 1.1.7.2)\u003Cbr\u003E\nKerbal Joint Reinforcement Continued (KerbalJointReinforcementContinued v3.5.1)\u003Cbr\u003E\nMaking History (MakingHistory-DLC 1.10.1)\u003Cbr\u003E\nMechJeb 2 (MechJeb2 2.10.0.0)\u003Cbr\u003E\nModule Manager (ModuleManager 4.1.4)\u003Cbr\u003E\nNear Future IVA Props (NearFutureProps 1:0.6.3)\u003Cbr\u003E\nStockalike Mining Extension (StockalikeMiningExtension 1.1.6)\u003Cbr\u003E\nStockalike Station Parts Expansion Redux (StationPartsExpansionRedux 1.3.6)\n\u003C/p\u003E\n"},{"CreatedByName":"CommanderMAM","CreatedById":200916,"CreatedDateTime":"2020-09-02T15:22:02Z","Content":"\n\u003Cp\u003E\nNevermind, I had the wrong Arduino code. Apparently the code for demo 4 has a link to download v16, whereas the link below the plugin download is v17 that works.\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2020-09-07T16:22:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223847934\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221599060122\u0022 data-ipsquote-userid=\u0022200916\u0022 data-ipsquote-username=\u0022CommanderMAM\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 9/2/2020 at 4:22 PM, CommanderMAM said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNevermind, I had the wrong Arduino code. Apparently the code for demo 4 has a link to download v16, whereas the link below the plugin download is v17 that works.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOops, I change the first post now.\n\u003C/p\u003E\n"},{"CreatedByName":"CommanderMAM","CreatedById":200916,"CreatedDateTime":"2020-09-08T17:06:02Z","Content":"\n\u003Cp\u003E\nWas having trouble coding momentary buttons to toggle \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E and \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E, but I figured it out.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-09-09T16:25:54Z\u0022 title=\u002209/09/2020 04:25  PM\u0022 data-short=\u00223 yr\u0022\u003ESeptember 9, 2020\u003C/time\u003E by CommanderMAM\u003C/strong\u003E\n\u003Cbr\u003ESolved problem\n\u003C/span\u003E\n"},{"CreatedByName":"CommanderMAM","CreatedById":200916,"CreatedDateTime":"2020-09-14T16:12:07Z","Content":"\n\u003Cp\u003E\nHey, its me again, I was wondering if it was at all possible to control whether the keyboard controls for throttle are enabled via a switch? For example, if no input/low input, then throttle enable = 0, but if there\u0027s a high input then throttle enable = 1.\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2020-09-16T10:41:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223854173\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221600099927\u0022 data-ipsquote-userid=\u0022200916\u0022 data-ipsquote-username=\u0022CommanderMAM\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 9/14/2020 at 5:12 PM, CommanderMAM said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHey, its me again, I was wondering if it was at all possible to control whether the keyboard controls for throttle are enabled via a switch? For example, if no input/low input, then throttle enable = 0, but if there\u0027s a high input then throttle enable = 1.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn the config file:\n\u003C/p\u003E\n\u003Cp\u003E\nEnable value settings for axes:\n\u003C/p\u003E\n\u003Cp\u003E\n0: The internal value (supplied by KSP) is always used.\n\u003C/p\u003E\n\u003Cp\u003E\n1: The external value (read from serial packet) is always used.\n\u003C/p\u003E\n\u003Cp\u003E\n2: If the internal value is not zero use it, otherwise use the external value. (Now default!!!)\n\u003C/p\u003E\n\u003Cp\u003E\n3: If the external value is not zero use it, otherwise use the internal value.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo if you set ThrottleEnable to 3, then the plugin will use your arduino throttle when it\u0027s not 0. You could for example have a switch to only send 0 when it\u0027s off and send analog input when it\u0027s on.\n\u003C/p\u003E\n"},{"CreatedByName":"requiembob","CreatedById":16878,"CreatedDateTime":"2020-09-21T08:38:41Z","Content":"\n\u003Cp\u003E\nHi there! Is anyone able to send packets through relating to Pitch, Roll, Yaw, TX, TY, or TZ?\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t seem to get anything to input properly. It detects that something has been sent (and disables the \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E for the duration) however it does not actually send the packets!\n\u003C/p\u003E\n\u003Cp\u003E\nCheers,\n\u003C/p\u003E\n\u003Cp\u003E\nK\n\u003C/p\u003E\n"},{"CreatedByName":"c4ooo","CreatedById":168905,"CreatedDateTime":"2020-09-21T17:22:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223857352\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221600677521\u0022 data-ipsquote-userid=\u002216878\u0022 data-ipsquote-username=\u0022requiembob\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, requiembob said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi there! Is anyone able to send packets through relating to Pitch, Roll, Yaw, TX, TY, or TZ?\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t seem to get anything to input properly. It detects that something has been sent (and disables the \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E for the duration) however it does not actually send the packets!\n\u003C/p\u003E\n\u003Cp\u003E\nCheers,\n\u003C/p\u003E\n\u003Cp\u003E\nK\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAre you talking about controlling pitch yaw roll?\u003Cbr\u003E\nMaybe the axis config is set wrong to where KSP receives the data but ignores it? (See above)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-09-21T17:23:10Z\u0022 title=\u002209/21/2020 05:23  PM\u0022 data-short=\u00223 yr\u0022\u003ESeptember 21, 2020\u003C/time\u003E by c4ooo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CommanderMAM","CreatedById":200916,"CreatedDateTime":"2020-09-21T19:40:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223855148\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221600252888\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 9/16/2020 at 6:41 AM, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIn the config file:\n\u003C/p\u003E\n\u003Cp\u003E\nEnable value settings for axes:\n\u003C/p\u003E\n\u003Cp\u003E\n0: The internal value (supplied by KSP) is always used.\n\u003C/p\u003E\n\u003Cp\u003E\n1: The external value (read from serial packet) is always used.\n\u003C/p\u003E\n\u003Cp\u003E\n2: If the internal value is not zero use it, otherwise use the external value. (Now default!!!)\n\u003C/p\u003E\n\u003Cp\u003E\n3: If the external value is not zero use it, otherwise use the internal value.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo if you set ThrottleEnable to 3, then the plugin will use your arduino throttle when it\u0027s not 0. You could for example have a switch to only send 0 when it\u0027s off and send analog input when it\u0027s on.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the help, I did get it to where the throttle could be manually disabled via a switch. I then went on\u00A0to do the same thing\u00A0for the axis controls\u00A0as well using the same switch, which (after almost posting an issue here only to realize my ground wire had come unplugged) is now working perfectly.\u00A0Here\u0027s the code I\u0027m using:\n\u003C/p\u003E\n\u003Cp\u003E\n//throttle slide pot\u003Cbr\u003E\n\u00A0 \u00A0 int THROTTLE = map(1018-analogRead(THROTTLEPIN),0,1018,0,1000);\u003Cbr\u003E\n\u00A0 \u00A0 //switch\u003Cbr\u003E\n\u00A0 \u00A0 if (!digitalRead(MASTERSWITCH)){\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 CPacket.Throttle = constrain(THROTTLE,0,1000);\u00A0\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 //joysticks rotational\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 if(analogRead(pRX) \u0026gt;= 530){CPacket.Yaw = constrain(map(analogRead(pRX),660,530,-1000,0),-1000,0);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else if(analogRead(pRX) \u0026lt;= 490){CPacket.Yaw = constrain(map(analogRead(pRX),490,360,0,1000),0,1000);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else {CPacket.Yaw = 0;}\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 if(analogRead(pRY) \u0026gt;= 530){CPacket.Pitch = constrain(map(analogRead(pRY),530,660,0,1000),0,1000);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else if(analogRead(pRY) \u0026lt;= 490){CPacket.Pitch = constrain(map(analogRead(pRY),360,490,-1000,0),-1000,0);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else {CPacket.Pitch = 0;}\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 if(analogRead(pRZ) \u0026lt;= 490){CPacket.Roll = constrain(map(analogRead(pRZ),300,490,-1000,0),-1000,0);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else if(analogRead(pRZ) \u0026gt;= 510){CPacket.Roll = constrain(map(analogRead(pRZ),510,700,0,1000),0,1000);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else {CPacket.Roll = 0;}\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 //joysticks translational\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 if(analogRead(pTX) \u0026gt;= 530){CPacket.TX = constrain(map(analogRead(pTX),530,660,0,1000),0,1000);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else if(analogRead(pTX) \u0026lt;= 490){CPacket.TX = constrain(map(analogRead(pTX),360,490,-1000,0),-1000,0);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else {CPacket.TX = 0;}\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 if(analogRead(pTY) \u0026gt;= 530){CPacket.TY = constrain(map(analogRead(pTY),660,530,-1000,0),-1000,0);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else if(analogRead(pTY) \u0026lt;= 490){CPacket.TY = constrain(map(analogRead(pTY),490,360,0,1000),0,1000);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else {CPacket.TY = 0;}\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 if(analogRead(pTZ) \u0026lt;= 490){CPacket.TZ = constrain(map(analogRead(pTZ),300,490,-1000,0),-1000,0);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else if(analogRead(pTZ) \u0026gt;= 510){CPacket.TZ = constrain(map(analogRead(pTZ),510,700,0,1000),0,1000);} //calibrated\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 else {CPacket.TZ = 0;}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNow all that\u0027s left is the abort and stage arm toggle switches, some specific action group buttons (gear, comms, solar, brakes, etc), a numpad (for action groups in general plus time warp if it gets added), joystick buttons (for \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E states), LCD and its accompanying control switches, and the LED bar graphs (to show fuel levels and for the gods to torture me with). Will post pics/vids of it when I\u0027m done coding and have made a proper case for it (right now its a nice clear laser-engraved acrylic\u00A0faceplate balanced on a cardboard box). Thanks again for the help!\n\u003C/p\u003E\n"},{"CreatedByName":"c4ooo","CreatedById":168905,"CreatedDateTime":"2020-10-18T06:09:48Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/11842-zitronen/\u0026amp;do=hovercard\u0022 data-mentionid=\u002211842\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/11842-zitronen/\u0022 rel=\u0022\u0022\u003E@zitronen\u003C/a\u003E\u00A0Hey, What exactly was the point of the turn-off-\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003Esas\u003C/abbr\u003E when joystick-was-used code? I was trying to improve joystick input a little and noticed that \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003Esas\u003C/abbr\u003E was turned off with joystick input. Seems like this was introduced in 18.3.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-10-18T06:10:13Z\u0022 title=\u002210/18/2020 06:10  AM\u0022 data-short=\u00223 yr\u0022\u003EOctober 18, 2020\u003C/time\u003E by c4ooo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"c4ooo","CreatedById":168905,"CreatedDateTime":"2020-10-21T04:33:43Z","Content":"\n\u003Cp\u003E\n\u003Cimg alt=\u0022yXXzVIu.png\u0022 data-ratio=\u002259.52\u0022 width=\u0022793\u0022 src=\u0022https://i.imgur.com/yXXzVIu.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHmm, looks like your post disappeared \u003Cspan\u003E\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//s3.us-west-2.amazonaws.com/kerbal-forum-uploads/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/span\u003E\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnyways, I removed the disable-\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003E\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003Esas\u003C/abbr\u003E\u003C/abbr\u003E code in my own plugin, and it seems to work fine. I based a lot of my TCP plugin on yours, so I think it may be worth a shot in your plugin too.\u00A0Maybe the internals of how input is handled got changed sometime after you added joystick input?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe reason I brought this up is becouse I was looking through Advanced Fly By Wire\u00A0 and noticed that it doesn\u0027t disable \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003E\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E\u003C/abbr\u003E on joystick input.\u00A0\u003Ca href=\u0022https://github.com/linuxgurugamer/ksp-advanced-flybywire/tree/master/AFBW\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/linuxgurugamer/ksp-advanced-flybywire/tree/master/AFBW\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-10-21T04:37:34Z\u0022 title=\u002210/21/2020 04:37  AM\u0022 data-short=\u00223 yr\u0022\u003EOctober 21, 2020\u003C/time\u003E by c4ooo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2020-10-29T13:58:37Z","Content":"\n\u003Cp\u003E\nHuh.. weird...\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway so now axes work fine with \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E on? What did you do, just delete the \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E check?\n\u003C/p\u003E\n"},{"CreatedByName":"gt3073b","CreatedById":208034,"CreatedDateTime":"2020-11-07T22:21:10Z","Content":"\n\u003Cp\u003E\nI\u0027m new to KSP, and just got a Teensy 3.0 working with Windows 10. This plugin is AWESOME!!!!\u00A0 Thank you!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI am working on replicating some of the UI in hardware, and on the Advanced Orbital Info tab, there is the LAN and ARG PE values, which I do not see in the VesselData. Is this available somewhere, and is it used often? I am reliably getting to orbit, and have managed to orbit Mun, but I\u0027d like to get a cockpit going before I get too far in the game, so I\u0027m not sure how much I will need that data to match orbits / orbit another body / docking.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, what is VesselData.VVI?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThank you,\n\u003C/p\u003E\n\u003Cp\u003E\nBryan.\n\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2020-11-08T07:31:45Z","Content":"\n\u003Cp\u003E\nWelcome around, and gratulations on the Mun orbit.\n\u003C/p\u003E\n\u003Cp\u003E\nVVI is IIRC vertical velocity.\n\u003C/p\u003E\n\u003Cp\u003E\nThere is a lot of info unavailable in VesselData, including orbital parameters. But unless you are a college level physics student, you will find little use for the things omitted, if any at all. That being said, if you want to make your own autopilot, you will need it, and are probably better served with \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/130742-15x-to-122-krpc-control-the-game-using-c-c-java-lua-python-ruby-haskell-c-arduino-v048-28th-october-2018/\u0022 rel=\u0022\u0022\u003EkRPC\u003C/a\u003E, or a combined KSPSerialIO/kRPC control panel.\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2020-11-08T15:40:20Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#B22222;\u0022\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003EUpdate 0.19.3b:\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nChanges:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nOk so not sure when this happened, but it seems you no longer have to disable \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003E\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E\u003C/abbr\u003E to update vessel controls, so the annoy issue of having to disable \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003E\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E\u003C/abbr\u003E to move an axis is gone (the whole business with SASTol no longer an issue, it now doesn\u0027t do anything). Now the axis control behaves like normal joystick input. I didn\u0027t do anything apart from remove the check and doing some testing. Please let me know if this is actually fixed, that would be great! Thanks to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/168905-c4ooo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022168905\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/168905-c4ooo/\u0022 rel=\u0022\u0022\u003E@c4ooo\u003C/a\u003E for letting me know.\n\u003C/li\u003E\n\u003Cli\u003E\nAlso recompiled against 1.10.1\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nPlugin download link:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPSerialIO_019_3b.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPSerialIO_019_3b.zip\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nArduino code dowload (same as before):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPIODemo17.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPIODemo17.zip\u003C/a\u003E\n\u003C/p\u003E\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223878724\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221604787670\u0022 data-ipsquote-userid=\u0022208034\u0022 data-ipsquote-username=\u0022gt3073b\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, gt3073b said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m new to KSP, and just got a Teensy 3.0 working with Windows 10. This plugin is AWESOME!!!!\u00A0 Thank you!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI am working on replicating some of the UI in hardware, and on the Advanced Orbital Info tab, there is the LAN and ARG PE values, which I do not see in the VesselData. Is this available somewhere, and is it used often? I am reliably getting to orbit, and have managed to orbit Mun, but I\u0027d like to get a cockpit going before I get too far in the game, so I\u0027m not sure how much I will need that data to match orbits / orbit another body / docking.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, what is VesselData.VVI?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThank you,\n\u003C/p\u003E\n\u003Cp\u003E\nBryan.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBasically what \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022111048\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/111048-freshmeat/\u0022 rel=\u0022\u0022\u003E@Freshmeat\u003C/a\u003E said. Because we use the serial port, and need to support lower end arduino boards without a lot of RAM, we can\u0027t just send all the data. That\u0027s the limitation of this plugin. I never thought people would want to sending so much data to the arduino at the beginning. Surely 250 bytes ought to be enough for everybody.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-11-08T15:43:46Z\u0022 title=\u002211/08/2020 03:43  PM\u0022 data-short=\u00223 yr\u0022\u003ENovember 8, 2020\u003C/time\u003E by zitronen\u003C/strong\u003E\n\u003C/span\u003E\n"}]}