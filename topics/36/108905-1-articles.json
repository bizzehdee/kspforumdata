{"TopicId":108905,"ForumId":36,"TopicTitle":"[WIP][Plugin][1.0.2] RealisticNuke - (More) Realistic Nuclear Rocket Engines","CreatedByName":"Pixel of Life","CreatedById":45646,"CreatedDateTime":"2015-05-12T14:02:03Z","PageNum":1,"Articles":[{"CreatedByName":"Pixel of Life","CreatedById":45646,"CreatedDateTime":"2015-05-12T14:02:03Z","Content":"I present to you: **RealisticNuke**! The result of a random chat we had on the KSP Forum Steam group last night. Still extremely WIP.\n\n**What it does:**\n\n- Removes the LV-N\u0027s alternator module and internal energy storage (done with a ModuleManager Config).\n\n- Implements its own energy generation method - the amount of ElectricCharge produced depends on the rate of energy flow to and from the engine. Maximum power is about 7.25 Ec/s. This is achieved when the engine is running close to its maximum operating temperature of 2500 degrees. Once the engine is shut down, power output will gradually decrease but the engine will still produce power several hours after shutdown thanks to residual heat in the reactor core.\n\n- Adds a custom resource - UraniumDioxide. The LV-N has an internal storage that contains 50 units of UraniumDioxide. The engine needs this in order to produce heat. It cannot be refueled, so once the UraniumDioxide is depleted, the engine is useless. Consumes 0.00815 UraniumDioxide per 0.9 LiquidFuel. 50 units is enough to keep it running at full power for about an hour (but the real lifetime is longer because you can\u0027t run the engine at full power all the time or it\u0027ll overheat and explode). This will need to be tweaked if/when zero-thrust electricity generation is added.\n\n**What it doesn\u0027t do (yet):**\n\n- Produce power when the engine is not producing thrust. This is the #1 problem at the moment. **DONE!**\n\n- Support Tweakscale.\n\n- Support other NTR engines - for now, it only works with the stock LV-N.\n\nSource and download available at [https://github.com/CaptainKorhonen/RealisticNuke](https://github.com/CaptainKorhonen/RealisticNuke). **REQUIRES MODULEMANAGER!**\n\nChangelog:\n\n0.1.0:\n\n- Initial release.\n\n0.2.0:\n\n- Overhauled the power system. The engine now has a separate \u0022reactor\u0022 which produces all the power. Reactor power level can be adjusted in the right-click menu (between 0% and 100%). The engine itself no longer produces heat. UraniumDioxide consumption now depends on the reactor\u0027s power level, not throttle setting.\n\nLicense: GNU GPL V2. You are free to modify and redistribute my code as long as you credit me as the original creator.\n\n**Edited \u003Ctime datetime=\u00222015-05-12T20:38:29Z\u0022 title=\u002205/12/2015 08:38  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 12, 2015\u003C/time\u003E by CaptainKorhonen**"},{"CreatedByName":"rtxoff","CreatedById":107622,"CreatedDateTime":"2015-05-12T14:34:13Z","Content":"\u003E \n\u003E - Produce power when the engine is not producing thrust. This is the #1 problem at the moment. **Need suggestions on how to do this in a way that fits the stock game**.\n\nI never programmed any mod so far but as far as is see and i may be wrong here:\n\nI think the problem here is that you used a hack to crate energy. You used part.RequestResource(\u0022ElectricCharge\u0022, -powerOutput \\* TimeWarp.deltaTime);\n\nHowever this command should be used for parts that are using some resources. By negating powerOutput you made it produce electric charge iunstead of taking it. The drawback here is that it only works as long as the engine is active.\n\nI think the correct aproach is to use\n\nPart.AddResource ( Config node)\n\nand then define it in the part file. However i may be wrong on that, maybe someone with more experience in part creating has another idea on that.\n\n**Edited \u003Ctime datetime=\u00222015-05-12T14:37:03Z\u0022 title=\u002205/12/2015 02:37  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 12, 2015\u003C/time\u003E by gpisic**"},{"CreatedByName":"lajoswinkler","CreatedById":79159,"CreatedDateTime":"2015-05-12T16:34:38Z","Content":"Allright, things are rolling! ![:cool:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif)"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-05-12T17:04:06Z","Content":"\u003E \n\u003E Consumes 0.00815 UraniumDioxide per 0.9 LiquidFuel.\n\nRealistically a solid-core nuclear thermal rocket engine would never \u0022consume\u0022 its nuclear fuel, are you attempting to model a different sort of engine? I mean, you\u0027ll certainly get some decay but at the rate you specify I imagine the entire engine would simply break up from fast neutron embrittlement or something."},{"CreatedByName":"Pixel of Life","CreatedById":45646,"CreatedDateTime":"2015-05-12T17:26:05Z","Content":"\u003E \n\u003E Realistically a solid-core nuclear thermal rocket engine would never \u0022consume\u0022 its nuclear fuel, are you attempting to model a different sort of engine? I mean, you\u0027ll certainly get some decay but at the rate you specify I imagine the entire engine would simply break up from fast neutron embrittlement or something.\n\nThe density of the nuclear fuel is zero, its only purpose is to limit the engine\u0027s lifespan. The fuel consumption rate will be fixed in the next version - I think I\u0027ve found a way to separate the engine and the \u0022reactor\u0022 (you control the reactor with a slider in the rightclick menu, and thrust and electricity output depends on the reactor\u0027s power output - the engine itself doesn\u0027t heat the part anymore). Since there\u0027s now a reason to keep the reactor running even if the engine isn\u0027t used, I can decrease the fuel burn so that it takes years or even decades for it to run out. Or that\u0027s the plan, at least. We\u0027ll see.\n\nE: To clarify, the fuel consumption was so high because 1 hour worth of fuel is more than enough for just about any mission when it\u0027s only used to produce thrust for short periods of time.\n\n**Edited \u003Ctime datetime=\u00222015-05-12T17:38:28Z\u0022 title=\u002205/12/2015 05:38  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 12, 2015\u003C/time\u003E by CaptainKorhonen**"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-05-12T18:57:21Z","Content":"\u003E \n\u003E The density of the nuclear fuel is zero, its only purpose is to limit the engine\u0027s lifespan.\n\nWhy would the nuclear fuel density be zero? Uranium is quite dense, there\u0027s a reason we use it for kinetic penetrators.\n\n\u003E \n\u003E E: To clarify, the fuel consumption was so high because 1 hour worth of fuel is more than enough for just about any mission when it\u0027s only used to produce thrust for short periods of time.\n\nWell, to labor the point, that\u0027s hardly \u0022realistic\u0022. I guess I was hoping for something a bit different but clearly this is just a re-imagining.\nGood luck!"},{"CreatedByName":"Pixel of Life","CreatedById":45646,"CreatedDateTime":"2015-05-12T19:28:31Z","Content":"\u003E \n\u003E Why would the nuclear fuel density be zero? Uranium is quite dense, there\u0027s a reason we use it for kinetic penetrators.\n\nBecause no mass is lost as the fuel is turned into nuclear waste since it doesn\u0027t just go out the back (Isn\u0027t that how a closed reactor system works? Correct me if I\u0027m wrong). I tried to add a NuclearWaste resource with the same mass as UraniumDioxide but it turns out KSP doesn\u0027t like negative numbers in the part.cfg\u0027s PROPELLANT section. I couldn\u0027t be bothered to try to get it working so I just gave UraniumOxide a density of zero so that the mass of the reactor doesn\u0027t change as fuel is burnt.\n\n\u003E \n\u003E Well, to labor the point, that\u0027s hardly \u0022realistic\u0022. I guess I was hoping for something a bit different but clearly this is just a re-imagining.\n\u003E Good luck!\n\nDon\u0027t worry, it\u0027ll be more realistic. Basically, the idea is this: The engine\u0027s right-click menu has a slider for the reactor\u0027s power setting. This adjusts the reactor core\u0027s power output. At the moment, ElectricCharge output depends on the reactor\u0027s temperature, and UraniumOxide consumption depends on the reactor\u0027s power setting (**Note: Not the engine\u0027s power setting! These are two completely independent things now** ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)).\n\nI\u0027m also planning to modify it so that the temperature also affects thrust and ISP (higher temperature = higher thrust and ISP), but I\u0027m having some trouble doing this.. I\u0027ve tried assigning the atmosphereCurve to a new FloatCurve and using a for loop to go through all the keys and multiply them with a multiplier (current temperature / maximum temperature) and then replacing the atmosphereCurve with the modified FloatCurve but it doesn\u0027t seem to be working. I\u0027ve looked at the KSP Interstellar \u0022DT Vista\u0022 engine source and it seems to do the ISP modification thing in almost the exact same way as I\u0027m doing it, apart from the fact that FractalUK creates a whole new FloatCurve and gives it values, instead of importing the atmosphereCurve and editing it like I\u0027m trying to do.\n\n**Edited \u003Ctime datetime=\u00222015-05-12T19:36:10Z\u0022 title=\u002205/12/2015 07:36  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 12, 2015\u003C/time\u003E by CaptainKorhonen**"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-05-12T19:42:13Z","Content":"\u003E \n\u003E Because no mass is lost as the fuel is turned into nuclear waste\n\nWell, actually, as you use the fuel for heat you most assuredly do lose mass since the entire process of heating the reaction mass relies on the fission process, which gives up free neutrons (which is why you need shadow shields and have to worry about neutron embrittlement). Other implementations I\u0027ve seen around here have converted from nuclear fuel to depleted nuclear fuel of some sort.\n\n\u003E \n\u003E I\u0027ve looked at the KSP Interstellar \u0022DT Vista\u0022 engine source and it seems to do the ISP modification thing in almost the exact same way as I\u0027m doing it, apart from the fact that FractalUK creates a whole new FloatCurve and gives it values, instead of importing the atmosphereCurve and editing it like I\u0027m trying to do.\n\nThat may be an actual limitation of floatCurves, you might want to ask around in plugin development."},{"CreatedByName":"lajoswinkler","CreatedById":79159,"CreatedDateTime":"2015-05-13T00:45:35Z","Content":"Loss of mass is negligible and can be ignored. If he has trouble getting the UraniumDioxide deplete and NuclearFuel build up, he might as well just use UraniumDioxide depletion and make it massless. It changes nothing and no trouble is caused."},{"CreatedByName":"StahnAileron","CreatedById":139783,"CreatedDateTime":"2015-05-13T06:35:20Z","Content":"\u003E \n\u003E Loss of mass is negligible and can be ignored. If he has trouble getting the UraniumDioxide deplete and NuclearFuel build up, he might as well just use UraniumDioxide depletion and make it massless. It changes nothing and no trouble is caused.\n\nTo add to this: the idea was to make the engine useless once the nuclear core was used up; i.e. it\u0027s a sealed system, so no refueling, as originally stated. Therefore, the mass difference is going to be negligible given E = MC^2 (unless he will be producing a MASSIVE amount of power with that hunk of radioactivity AND high efficiency conversion).\n\nIt\u0027s a closed-loop system, so really no need to make it more complex by adding another resource you wouldn\u0027t be able to manipulate anyway. (Mods like Near Future Electrical have resources like Depleted Uranium because you CAN remove the waste material and refuel reactors.)\n\nGiven that the engine already had the reactor in it, the one thing you could ask for is to increase the base mass of the engine to accommodate the addition of a power generator. Maybe a handful of kilos at most. (As far as I know, RTG masses are mainly in the shielding, insulation, and fuel. All that is already in-place. Some thermocouples and extra cabling shouldn\u0027t be that much more in mass. RTG designers may and should correct me if I\u0027m wrong.)\n\nAnd some math just for fun: Assuming Wikipedia can be trusted (sometimes it can\u0027t), 1 gram of matter = 89.9 terajoules of energy, assuming complete, 100% conversion/efficiency of mass to energy. Using an example Wikipedia cites, the Hiroshima nuke loss less than a gram of mass when it exploded (~63TJ of energy was supposedly released.) For scale, 89.9TJ (1 gram) of energy/power would let a high-end gaming PC drawing 1kw of power run for ~2850 YEARS straight. (Assuming my math is right, anyway...)\n\nSo yeah: negligible mass losses = no reason for a waste resource you can\u0027t do anything with = massless intake resource.\n\n**Edited \u003Ctime datetime=\u00222015-05-13T06:38:11Z\u0022 title=\u002205/13/2015 06:38  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 13, 2015\u003C/time\u003E by StahnAileron**"},{"CreatedByName":"Spanier","CreatedById":57247,"CreatedDateTime":"2015-05-13T16:59:53Z","Content":"This sounds good. Nertea is currently working on similar stuff, you maybe could join forces.\n\nHow are you ging to handle heat generation? Dies it drop, when the Engine drains fuel?"},{"CreatedByName":"Pixel of Life","CreatedById":45646,"CreatedDateTime":"2015-05-13T20:51:54Z","Content":"\u003E \n\u003E This sounds good. Nertea is currently working on similar stuff, you maybe could join forces.\n\u003E How are you ging to handle heat generation? Dies it drop, when the Engine drains fuel?\n\nFor now, the heat generation and fuel consumption are constants, but I \\*may\\* change them to exponential functions once everything is working nicely (depending on my interest in this project).\n\nSitrep: The engine\u0027s ISP (and therefore thrust as well) now depend on the reactor\u0027s temperature. I\u0027ll have to edit things a bit as it still produces thrust at a temperature of 4 K, which is more than 16 K lower than the temperature of the fuel (assuming it\u0027s liquid hydrogen). I might scrap the stock thermal system integration and replace it with a scripted one as that would make things A LOT simpler and easier both for me and for the people who use the mod. The current system, being 100% physics based, is just way too unpredictable and difficult to control accurately."},{"CreatedByName":"Pixel of Life","CreatedById":45646,"CreatedDateTime":"2015-05-14T11:42:12Z","Content":"Another status update: My GPU appears to have died and I\u0027ll be ordering a new one today or tomorrow. Assuming the store has the card in stock, the project will be on hold for about a week. If not, it could take a lot longer.\n\nEDIT: New graphics card has been acquired and is working well!\n\n**Edited \u003Ctime datetime=\u00222015-05-14T19:49:34Z\u0022 title=\u002205/14/2015 07:49  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 14, 2015\u003C/time\u003E by CaptainKorhonen**"}]}