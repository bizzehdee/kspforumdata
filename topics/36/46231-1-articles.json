{"TopicId":46231,"ForumId":36,"TopicTitle":"I can\u0026#039;t understand the coordinate system: why am I moving vertically when on ground?","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T18:41:24Z","PageNum":1,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T18:41:24Z","Content":"\n\u003Cp\u003EI started using the KOS scriptable autopilot mod and it sometimes exposes bits of the underlying API to people who\u0027ve never written mods and some of those bits are really confusing. Right now I\u0027m trying to wrack my brain over why velocity vectors always seem to be quite a bit off from what the navball says.\u003C/p\u003E\u003Cp\u003EI looked at the GitHub code and I think I might be able to get some help from other people who\u0027ve coded mods before because I think the issue I\u0027m having is with the entire coordinate system itself - I can\u0027t find documentation on how it\u0027s set up.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EFirst here\u0027s everything I *DO* think I understand:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EWhen you ask the mod to tell you the current orbital velocity, from reading through the mod\u0027s code on GitHub I get the impression that it just maps to returning this in underlying KSP mod API:\u003C/p\u003E\u003Cp\u003EVessel.obt_velocity\u003C/p\u003E\u003Cp\u003EAnd this appears to be in a coordinate system in which its polar rather than rectangular, with the current main body at the center, in which X = upward (away from origin), Y = northward, and Z = eastward.\u003C/p\u003E\u003Cp\u003EThat all makes sense to me. I verified that it is in a polar coordinate system by simply time warping around Kerbin\u0027s daily rotation to see what the values were at different positions around the sphere and velocity is the same at all positions.\u003C/p\u003E\u003Cp\u003EThe ground speed due to Kerbin\u0027s daily rotation is 174.53 m/s so I\u0027d expect to see a vector of 174.53 or close to it in magnitude if I sample my velocity while I\u0027m just sitting on the ground not moving, and I do. I get this:\u003C/p\u003E\u003Cp\u003E(-46.4125, 0.000258, 168.2678 )\u003C/p\u003E\u003Cp\u003EWhich with the Pythagorean theorem is VERY close to 174.53 in magnitude, so that\u0027s all sensible to me.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ENow the part that I just don\u0027t get:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EYes the magnitude is about 174 m/s, BUT... why isn\u0027t it directly along one of the axes? Why isn\u0027t it something closer to this:\u003C/p\u003E\u003Cp\u003E(0,0,174)\u003C/p\u003E\u003Cp\u003Erather than \u003C/p\u003E\u003Cp\u003E(-46,0,168)\u003C/p\u003E\u003Cp\u003EWhat is the coordinate system the game uses here? On the one hand it behaves like a polar coordinate system centered on the planetary body, but then it doesn\u0027t because the direction of \u0022up\u0022 doesn\u0027t seem to actually be straight up from the planet but is a bit canted off from Up.\u003C/p\u003E\u003Cp\u003ECan someone help me understand why this is? Is there an \u0022introduction to the coordinate system of KSP\u0022 somewhere? I googled a lot trying to find it but came up empty.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-17T18:45:36Z\u0022 title=\u002209/17/2013 06:45  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 17, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003Cbr\u003EForgot to make it clear in the body that this is the velocity while sitting still on the ground.\n\u003C/span\u003E\n"},{"CreatedByName":"InfiniteDice","CreatedById":57451,"CreatedDateTime":"2013-09-17T19:07:49Z","Content":"\n\u003Cp\u003EI\u0027m not a mathematician. Now that that is out of the way. When you are asking for the magnitude of a vector3 you\u0027re going to get one number. And why do you get a number different from each axis value? I think it\u0027s much like the hypotenuse of a triangle. It takes all 3 floats of the vector and calculates them combined. If you want an accurate x y or z just pull the one value instead of pulling the whole vector3.magnitude. A vector3 junkie will likely chime in with a more accurate answer. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T19:20:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022InfiniteDice\u0022 data-cite=\u0022InfiniteDice\u0022\u003E\u003Cdiv\u003EI\u0027m not a mathematician. Now that that is out of the way. When you are asking for the magnitude of a vector3 you\u0027re going to get one number. And why do you get a number different from each axis value? I think it\u0027s much like the hypotenuse of a triangle. It takes all 3 floats of the vector and calculates them combined. If you want an accurate x y or z just pull the one value instead of pulling the whole vector3.magnitude. A vector3 junkie will likely chime in with a more accurate answer. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou really didn\u0027t get what I was asking. The magnitude is FINE. It\u0027s correct. THAT isn\u0027t the problem.\u003C/p\u003E\u003Cp\u003EThe problem is that I don\u0027t understand the DIRECTION of the vector. The fact that the direction is NOT due east but is in fact east plus 14 degrees of downward pitch is what\u0027s confusing me. That seems to indicate that the coordinate system in use isn\u0027t the one I thought it was and has a frame of reference in which the origin is NOT the center of the planet. I\u0027m trying to steer by these vectors and the fact that they\u0027re off from what I\u0027d expect is really screwing me up.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2013-09-17T19:49:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E(-46.4125, 0.000258, 168.2678 )\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m just guessing but maybe this represents the velocities of your orbit around the sun. Is the first number always the same?\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-09-17T19:50:16Z","Content":"\n\u003Cp\u003EWell, idk what coord system kOS, but sounds like you get the vessels velocity in the world space (center of planet as origin, north pole as up) but want it in vessel space (center of vessel as origin, direction its facing as up). You don\u0027t care about the origin, so just rotate the vector accordingly and you should be fine.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2013-09-17T19:56:53Z","Content":"\n\u003Cp\u003EI think this is going to take multiple readings to figure out.\u003C/p\u003E\u003Cp\u003EMy first thought is that co-ordinate system in the game is actually a fixed box with the sun at the center and everything moving on those co-ordinates. \u003C/p\u003E\u003Cp\u003EIf so, when you get numbers in reference to Kerbin, those are just a calculation between Kerbin\u0027s center and your current position on the game-wide co-ordinate system.\u003C/p\u003E\u003Cp\u003ETherefore the vector you got was your vector both for the surface of Kerbin turning, but also Kerbin\u0027s orbit around the sun. The vector you got was not actually related to Kerbin at all, beyond the fact that your point of reference happens to be on Kerbin\u0027s surface.\u003C/p\u003E\u003Cp\u003E(I am guessing here, I don\u0027t actually know how the in-game co-ordinates work.)\u003C/p\u003E\u003Cp\u003ENow, you said the readings you got were all very close to Kerbin\u0027s surface speed, if you plot them do they max out at Kerbin\u0027s surface speed \u002B Orbital speed and at Kerbin\u0027s surface speed - Orbital speed?\u003C/p\u003E\u003Cp\u003EIf so, then your vector is relative to the game-wide co-ordinates of the solar system, not to anything on Kerbin.\u003C/p\u003E\u003Cp\u003E(I think, beware of holes in my logic that I\u0027ve not thought of yet.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T21:10:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EWell, idk what coord system kOS, but sounds like you get the vessels velocity in the world space (center of planet as origin, north pole as up) but want it in vessel space (center of vessel as origin, direction its facing as up). You don\u0027t care about the origin, so just rotate the vector accordingly and you should be fine.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe fact that I DON\u0027T have center of planet as origin but ALMOST do is why it makes no sense. If it was a system with the center at the planet, then sitting still at the equator should be giving an answer with two of the numbers always zero or very close to zero with a bit of floating point wobble. THIS would make sense:\u003C/p\u003E\u003Cp\u003E(0,0,174)\u003C/p\u003E\u003Cp\u003Eor this\u003C/p\u003E\u003Cp\u003E(174,0,0)\u003C/p\u003E\u003Cp\u003Eor this\u003C/p\u003E\u003Cp\u003E(0,174,0)\u003C/p\u003E\u003Cp\u003EBut what I get is this:\u003C/p\u003E\u003Cp\u003E(-46,0,168)\u003C/p\u003E\u003Cp\u003ENow, the thing is, that MIGHT make sense if it was a cartesian coordinate system with a grid of cubes, but only if it was a number that keeps changing as I rotate around the surface. If it was not polar coordinates, but rectangular, then I might get numbers that move over time as I rotate around the surface, like say,\u003C/p\u003E\u003Cp\u003E(-46,0,168) now, and then\u003C/p\u003E\u003Cp\u003E(-70,0,150) a little while later, and then\u003C/p\u003E\u003Cp\u003E(-126,0,120) a little later,\u003C/p\u003E\u003Cp\u003Eand so on as I move around the circle.\u003C/p\u003E\u003Cp\u003EBUT that is not what I get. I consistently get a number that is floating-point-close to (-46,0,168) no matter what time of day it is on Kerbin (no matter where I\u0027ve rotated to on the surface relative to the rest of the solar system). \u003C/p\u003E\u003Cp\u003ESo it\u0027s neither centered at the planet center, NOR is it centered at the solar system.... so.... what is it? That\u0027s what I can\u0027t figure out.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T21:19:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003ENow, you said the readings you got were all very close to Kerbin\u0027s surface speed, if you plot them do they max out at Kerbin\u0027s surface speed \u002B Orbital speed and at Kerbin\u0027s surface speed - Orbital speed?\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENeither. They remain fixed. At exactly 174.52 m/s magnitude, no matter when in the Kerbin day I look (no matter where I\u0027ve rotated to on the Kerbin surface - on the side facing the sun, on the side facing away from the sun, it\u0027s the same), which proves it HAS to be a relative coord system relative to Kerbin somehow and not one global to the solar system. And yet... if it\u0027s relative to Kerbin, why isn\u0027t it relative to the CENTER of Kerbin? The direction of the X axis isn\u0027t straight up away from planet center. It\u0027s about 14 degrees off from that. And this remains consistent no matter the time of day.\u003C/p\u003E\u003Cp\u003EIt\u0027s behaving for all the world like it is a polar coordinate system, but one that instead of having an origin at the center of Kerbin it has one at a point that is inside Kerbin, but is about 14,000 miles away from Kerbin\u0027s center. That can\u0027t possibly be right. There\u0027d be no reason to design the game that way, so I don\u0027t get what\u0027s going on.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2013-09-17T21:20:32Z","Content":"\n\u003Cp\u003EHmm. I did find this:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E \u0026lt;member name=\u0022T:Krakensbane\u0022\u0026gt;\u003C/p\u003E\u003Cp\u003E \u0026lt;summary\u0026gt;\u003C/p\u003E\u003Cp\u003E The physics simulation has problems if vessels move too fast relative to\u003C/p\u003E\u003Cp\u003E the underlying reference frame used by the simulation, or get too far from\u003C/p\u003E\u003Cp\u003E the origin of the coordinate system. Krakensbane shifts the reference frame\u003C/p\u003E\u003Cp\u003E origin and velocity so that the active vessel is always near the origin of,\u003C/p\u003E\u003Cp\u003E and moving slowly with respect to, the underlying coordinate system used by the\u003C/p\u003E\u003Cp\u003E physics simulation.\u003C/p\u003E\u003Cp\u003E \u0026lt;/summary\u0026gt;\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Efrom Anatid\u0027s github documentation. There is a bunch of subclass stuff that looks like it might also apply. \u003C/p\u003E\u003Cp\u003EAlternatively, what happens if you rotate in place? I\u0027m thinking it might be relative to your current control part\u0027s facing.\u003C/p\u003E\u003Cp\u003EIf you face due east, does it move to something like -46,0,168?\u003C/p\u003E\u003Cp\u003EI will admit to being stumped at this point.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-17T21:25:01Z\u0022 title=\u002209/17/2013 09:25  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 17, 2013\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T21:23:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EHmm. I did find this:\u003Cp\u003Efrom Anatid\u0027s github documentation. There is a bunch of subclass stuff that looks like it might also apply. \u003C/p\u003E\u003Cp\u003EWhat happens if you rotate in place? (IE: Don\u0027t actually move, just change your facing.)\u003C/p\u003E\u003Cp\u003EI will admit to being stumped at this point.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI guess if the KOS plugin allowed me to obtain the position in the same coordinate system as the velocity, then I\u0027d be able to see where the origin is relative to the vessel and then I\u0027d know what\u0027s going on. But all I can get is the velocity.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2013-09-17T21:28:07Z","Content":"\n\u003Cp\u003ESorry, edited my post about 3 times while you were posting.\u003C/p\u003E\u003Cp\u003EWhat if it is relative to your current control part in a box co-ordinate system.\u003C/p\u003E\u003Cp\u003E-46 for the motion down as Kerbin\u0027s rotation pulls you down, 0 because you are not moving north or south and 168 for the eastward motion of Kerbin\u0027s spin? so -46,0,168 that you are seeing.\u003C/p\u003E\u003Cp\u003ESo zero point is your current vessel on a typical X,Y,Z box.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: If this is the case, rotating your craft to face east, instead of north, should give something like -46,168,0 I think?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-17T21:31:16Z\u0022 title=\u002209/17/2013 09:31  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 17, 2013\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T21:37:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003ESorry, edited my post about 3 times while you were posting.\u003Cp\u003EWhat if it is relative to your current control part in a box co-ordinate system.\u003C/p\u003E\u003Cp\u003E-46 for the motion down as Kerbin\u0027s rotation pulls you down, 0 because you are not moving north or south and 168 for the eastward motion of Kerbin\u0027s spin? so -46,0,168 that you are seeing.\u003C/p\u003E\u003Cp\u003ESo zero point is your current vessel on a typical X,Y,Z box.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: If this is the case, rotating your craft to face east, instead of north, should give something like -46,168,0 I think?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERotation makes no difference.\u003C/p\u003E\u003Cp\u003EAlso, I don\u0027t understand your phrase \u0022-46 for the motion down as Kerbin\u0027s rotation pulls you down\u0022. How does rotation pull you down? Did you mean gravity? If so, then that would make sense if this was a force vector but it\u0027s not. It\u0027s a velocity vector. A ship that\u0027s TRYING to move downward but is failing to because there\u0027s ground in the way is still moving zero downward just as much as a ship with no gravity acting on it.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2013-09-17T21:41:56Z","Content":"\n\u003Cp\u003EIf rotation of your craft makes no different then I am out of ideas.\u003C/p\u003E\u003Cp\u003EWhat I meant by the \u0022-46 for the motion down as Kerbin\u0027s rotation pulls you down\u0022 was in my assumed method where it was box co-ordinates, you are 46 units lower then the horizon plane from your last position due to Kerbin\u0027s rotation.\u003C/p\u003E\u003Cp\u003EAs that has now been proven to not be what is being used, it does not apply regardless.\u003C/p\u003E\u003Cp\u003ESo I am stumped. Good luck with this but I can\u0027t be of any more help.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2013-09-17T22:24:15Z","Content":"\n\u003Cp\u003ECould it be because in the X, Y, Z coordinate system for KSP that Y is vertical/height, instead of Z (like a normal cartesian system would be)?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T22:53:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NoMrBond\u0022 data-cite=\u0022NoMrBond\u0022\u003E\u003Cdiv\u003ECould it be because in the X, Y, Z coordinate system for KSP that Y is vertical/height, instead of Z (like a normal cartesian system would be)?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope. It\u0027s because the XYZ system is tilted at a funny angle. Neither X, nor Y, nor Z is pointing straight up. X points up-ish, about 14 degrees off from up. What I\u0027m trying to figure out is... why? And how do I convert from the coordinates I can see to this weird system?\u003C/p\u003E\n"},{"CreatedByName":"Gaius","CreatedById":66495,"CreatedDateTime":"2013-09-17T22:57:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003ENow the part that I just don\u0027t get:\u003C/strong\u003E\u003Cp\u003EYes the magnitude is about 174 m/s, BUT... why isn\u0027t it directly along one of the axes? Why isn\u0027t it something closer to this:\u003C/p\u003E\u003Cp\u003E(0,0,174)\u003C/p\u003E\u003Cp\u003Erather than \u003C/p\u003E\u003Cp\u003E(-46,0,168)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBecause you\u0027re not at the right place on the planet, and it\u0027s not a spherical coordinate system. There is one particular point on the equator where your velocity would be \u0026lt;0,0,174\u0026gt;. On the opposite side of the planet, your velocity would be \u0026lt;0,0,-174\u0026gt;, and at 90 degrees from those points you\u0027d find \u0026lt;174,0,0\u0026gt; and \u0026lt;-174,0,0\u0026gt;. \u0026lt;0,0,174\u0026gt; always indicates a particular direction in universal space, which is the opposite of the direction you\u0027d be moving while on the opposite side of the planet. The center number will always be zero since it indicates movement along the Y axis, which is identical to the planet\u0027s axis since all Kerbol\u0027s planets have no axial tilt. At the north pole, \u0026lt;0,1,0\u0026gt; would be moving straight up, whereas at the south pole, that\u0027d be the direction of the ground. In other words, the same direction in universal space, just the opposite direction relative to the surface of the planet at those locations.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-17T23:06:08Z\u0022 title=\u002209/17/2013 11:06  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 17, 2013\u003C/time\u003E by Gaius\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2013-09-17T23:02:10Z","Content":"\n\u003Cp\u003EThat\u0027s even weirder that what I was wondering, is there an origin around which this rotation occurs, or is it a consistent/flat 14\u00C3\u201A\u00C2\u00B0 everywhere?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T23:03:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EIf rotation of your craft makes no different then I am out of ideas.\u003Cp\u003EWhat I meant by the \u0022-46 for the motion down as Kerbin\u0027s rotation pulls you down\u0022 was in my assumed method where it was box co-ordinates, you are 46 units lower then the horizon plane from your last position due to Kerbin\u0027s rotation.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf it was calculated by taking two sample positions over a delta time and looking at how far it moved during that time then such a larger error is in principle poissible... BUT.... to be 14 degrees off requires it to be a VERY slow sampling rate, because it\u0027s going to take 14 minutes to move that far off. (The fact that it\u0027s 14 minutes to move 14 degrees is purely a coincidental effect of the fact that a Kerbin day is 6 hours long. and 6 * 60 = 360, making it move one degree per minute.)\u003C/p\u003E\n"},{"CreatedByName":"check","CreatedById":71875,"CreatedDateTime":"2013-09-17T23:09:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaius\u0022 data-cite=\u0022Gaius\u0022\u003E\u003Cdiv\u003EBecause you\u0027re not at the right place on the planet, and it\u0027s not a spherical coordinate system. There is one particular point on the equator where your velocity would be \u0026lt;0,0,174\u0026gt;. On the opposite side of the planet, your velocity would be \u0026lt;0,0,-174\u0026gt;, and at 90 degrees from those points you\u0027d find \u0026lt;174,0,0\u0026gt; and \u0026lt;-174,0,0\u0026gt;. \u0026lt;0,0,174\u0026gt; always indicates a particular direction in universal space, which is the opposite of the direction you\u0027d be moving while on the opposite side of the planet. The center number will always be zero since it indicates movement along the Y axis, which is identical to the planet\u0027s axis since all Kerbol\u0027s planets have no axial tilt. At the north pole, \u0026lt;0,1,0\u0026gt; would be moving straight up, whereas at the south pole, that\u0027d be the direction of the ground.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis makes sense to me... I think. So I\u0027m assuming that point would be Lat 0, Long 0? Or does it not rotate along with the planet? Hopefully it does... and hopefully it\u0027s a consistent point across all planets/moons so that conversion to something useful will be possible... otherwise velocity:surface is going to be a pain to work with.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T23:09:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaius\u0022 data-cite=\u0022Gaius\u0022\u003E\u003Cdiv\u003EBecause you\u0027re not at the right place on the planet, and it\u0027s not a spherical coordinate system. There is one particular point on the equator where your velocity would be \u0026lt;0,0,174\u0026gt;. On the opposite side of the planet, your velocity would be \u0026lt;0,0,-174\u0026gt;, and at 90 degrees from those points you\u0027d find \u0026lt;174,0,0\u0026gt; and \u0026lt;-174,0,0\u0026gt;. \u0026lt;0,0,174\u0026gt; always indicates a particular direction in universal space, which is the opposite of the direction you\u0027d be moving while on the opposite side of the planet. The center number will always be zero since it indicates movement along the Y axis, which is identical to the planet\u0027s axis since all Kerbol\u0027s planets have no axial tilt. At the north pole, \u0026lt;0,1,0\u0026gt; would be moving straight up, whereas at the south pole, that\u0027d be the direction of the ground.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut that would require that the numbers CHANGE depending on the time of day. And They Don\u0027t.\u003C/p\u003E\u003Cp\u003EFor what you\u0027re saying to be the reason it would have to mean that as I rotate around the surface in a kerbin day, I\u0027d be in all those different positions, and \u0027\u0027I already tested that before I posted here\u0027\u0027, as I mentioned in my first post description. What you describe does not happen. My velocity is always \u0026lt;-46,0,168\u0026gt; no matter whether I take the sample at high noon (on the sunward-facing side of Kerbin) or at dusk (on the retrograde side of Kerbin\u0027s orbit of the sun or at midnight (on the side of Kerbin farthest from the sun) or at dawn (on the side of Kerbin facing Kerbin\u0027s prograde direction around the sun). Whatever the frame of reference happens to be, it is definitely moving with me as I rotate through a Kerbin day. That shoots down the universal space coordinate explanation. Besides, I\u0027m certain the devs have said that they use a coordinate system centered on the body you are in the SOI of.\u003C/p\u003E\u003Cp\u003E[Edit: Wait.. there is ONE way it would work now that I think of it and it\u0027s not exactly what you described, though. You describe a universal space coordinate system, and that can\u0027t be true given what I saw. Given what I\u0027m seeing it does have to be centered on Kerbin... BUT.... just because it\u0027s centered on Kerbin doesn\u0027t have to mean it\u0027s polar. It could still be an orthogonal grid centered on Kerbin. that might be it... let me try some math to see if that\u0027s it.]\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-17T23:15:18Z\u0022 title=\u002209/17/2013 11:15  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 17, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gaius","CreatedById":66495,"CreatedDateTime":"2013-09-17T23:10:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022check\u0022 data-cite=\u0022check\u0022\u003E\u003Cdiv\u003EThis makes sense to me... I think. So I\u0027m assuming that point would be Lat 0, Long 0?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou would think, but no, that is not the case. Why the offset, I\u0027m not sure...\u003C/p\u003E\n"},{"CreatedByName":"Gaius","CreatedById":66495,"CreatedDateTime":"2013-09-17T23:13:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EBut that would require that the numbers CHANGE depending on the time of day. And They Don\u0027t.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, nothing I said requires the numbers to change depending on the time of day. The system is relative to Kerbin, and rotates with it. But everything I posted is true nonetheless. If your velocity is \u0026lt;x, 0, z\u0026gt; at your current point on the surface, it\u0027ll be \u0026lt;-x, 0, -z\u0026gt; if you were 180 longitude degrees away. It\u0027s \u0022universal\u0022 in that sense. \u0026lt;x, 0, z\u0026gt; is the same direction no matter where you are, which may make it the opposite direction relative to the surface at that point (i.e. if it\u0027s motion due east where you are, it\u0027d be due west 180 degrees from where you are -- the same direction from a \u0022universal\u0022 point of view, but opposite relative to the surface at that point).\u003C/p\u003E\u003Cp\u003EI guess \u0022universal\u0022 is not the best term to use here. Or it is, kinda, with the understanding that your current sphere of influence defines the \u0022universe\u0022. The point being, the numbers don\u0027t change depending on where you are within the sphere of influence. At a given moment in time, everyone flying in the direction \u0026lt;x, y, z\u0026gt; will be flying parallel, heading towards the same star.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-17T23:27:02Z\u0022 title=\u002209/17/2013 11:27  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 17, 2013\u003C/time\u003E by Gaius\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T23:31:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E[Edit: Wait.. there is ONE way it would work now that I think of it and it\u0027s not exactly what you described, though. You describe a universal space coordinate system, and that can\u0027t be true given what I saw. Given what I\u0027m seeing it does have to be centered on Kerbin... BUT.... just because it\u0027s centered on Kerbin doesn\u0027t have to mean it\u0027s polar. It could still be an orthogonal grid centered on Kerbin. that might be it... let me try some math to see if that\u0027s it.]\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe Kerbal Space Center is at 76 degrees West longitude. Which is exactly 14 degrees off from 90 degrees. The amount by which the coordinates were angled from straight-up was exactly 14 degrees.\u003C/p\u003E\u003Cp\u003EThe coordinate system IS a grid and not polar, but it DOES rotate as your main body rotates For some reason I couldn\u0027t picture that. I kept tying together \u0022it rotates with Kerbin\u0022 with \u0022It is therefore polar coordinates\u0022 in my head.\u003C/p\u003E\u003Cp\u003EThanks for people helping by being a sounding board to bounce ideas off of. Finally solved.\u003C/p\u003E\u003Cp\u003EThe Grid looks like this:\u003C/p\u003E\u003Cp\u003EX = Draw a ray from the center of the SOI body out through its 90 degree west longitude line on the equator. That\u0027s the X axis.\u003C/p\u003E\u003Cp\u003EY = Draw a ray from the center of the SOI body along its axis through its north pole. That\u0027s the Y axis.\u003C/p\u003E\u003Cp\u003EZ = Draw a ray from the center of the SOI body out through its prime meridian (0 degree longitude) line on the equator. That\u0027s the Z axis.\u003C/p\u003E\u003Cp\u003EI think.\u003C/p\u003E\u003Cp\u003EAnd this grid rotates as the planet rotates.... but... wait... no...darn it. If that was the case then the orbital and the surface vectors would be the same.\u003C/p\u003E\u003Cp\u003EDarn I thought I had it.\u003C/p\u003E\u003Cp\u003EI was \u0022this\u0022 close to figuring it out.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-09-17T23:33:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EBut that would require that the numbers CHANGE depending on the time of day.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo. You know, in KSP physics are horrible complicated. As long as you are on the ground, the planet does not rotate and instead the entire universe including sun flies around the planet, just like Christians would have loved it^^\u003C/p\u003E\u003Cp\u003EAfaik the reason is similar to the krakensbane... a moving ground \u002B still standing (but for the physics sys also moving) obj can create problems for the physics engine so not rotating physics makes sense once your get close to the surface. The planet Kerbin actually starts \u0022rotating\u0022 exactly at 100km.\u003C/p\u003E\u003Cp\u003EBut still, whats the problem? You need an \u0022Up in the sky\u0022 vector? Well, the coordinates systems origin should be the center of the planet, so all you have to do is normalize your position vector and your fine. If your velocity is not pointing in the same direction that means your not going to space today \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003E*edit*\u003C/p\u003E\u003Cp\u003E\u0022So why do i have a velocity if the plant is not rotating?\u0022 your asking? KSP does calculate the \u0022what would it be actually\u0022-velocity, so you can use only this one and do not have to consider such stuff... usually^^\u003C/p\u003E\u003Cp\u003EYear, its soooo complicated and coooooool (to quote southpark)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-17T23:39:24Z\u0022 title=\u002209/17/2013 11:39  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 17, 2013\u003C/time\u003E by Faark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-17T23:35:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaius\u0022 data-cite=\u0022Gaius\u0022\u003E\u003Cdiv\u003ENo, nothing I said requires the numbers to change depending on the time of day. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, I can\u0027t read your mind. That\u0027s true of what you *meant*, when clarified, but not what you *said*, which was that the coordinate system was universal space. It\u0027s not if it\u0027s centered on the SOI body.\u003C/p\u003E\u003Cp\u003EAnyway, the one sticking point though is that if the coordinate space moves relative to kerbin, how can the surface-based velocity differ from the orbital one?\u003C/p\u003E\n"}]}