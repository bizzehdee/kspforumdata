{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":354,"Articles":[{"CreatedByName":"OrbitalManeuvers","CreatedById":190887,"CreatedDateTime":"2020-08-03T18:44:22Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E That your Kerbin atmosphere config is missing or named incorrectly, in other words, better reinstall your mods and configs one by one\n\u003E \n\nOK, I started with 1.8.1 only the 2 squad folders in GameData. Then I installed (by hand) Kopernicus, JNSQ, Eve, scatterer. Everything runs fine.\n\nAdded AVP (a single directory) and the 8k AVP textures (2 merged folders) and now ... water is gone, and scatterer is spamming nullrefs. \n\nJNSQ has a kerbin atomosphere definition. AVP has a file avp\\_configs\\atmosphere.cfg which has a blank eve atmosphere config in it. I tried removing that file, but I get the same results. So, without totally understanding this ... somewhere in the AVP configs there\u0027s something replacing(?) the JNSQ config for Kerbin atmosphere?\n\np.s. I really appreciate your help with this!\n\n**Edited \u003Ctime datetime=\u00222020-08-03T18:44:57Z\u0022 title=\u002208/03/2020 06:44  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 3, 2020\u003C/time\u003E by OrbitalManeuvers**\n  \nadded ps"},{"CreatedByName":"Hohmannson","CreatedById":202712,"CreatedDateTime":"2020-08-03T21:33:34Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, OrbitalManeuvers said:\n\u003E \n\u003E \n\u003E OK, I started with 1.8.1 only the 2 squad folders in GameData. Then I installed (by hand) Kopernicus, JNSQ, Eve, scatterer. Everything runs fine.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Added AVP (a single directory) and the 8k AVP textures (2 merged folders) and now ... water is gone, and scatterer is spamming nullrefs. \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E JNSQ has a kerbin atomosphere definition. AVP has a file avp\\_configs\\atmosphere.cfg which has a blank eve atmosphere config in it. I tried removing that file, but I get the same results. So, without totally understanding this ... somewhere in the AVP configs there\u0027s something replacing(?) the JNSQ config for Kerbin atmosphere?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E p.s. I really appreciate your help with this!\n\u003E \n\nAVP is not for JNSQ. It is for stock system and OPM afaik. Try Ad Astra if you need AVP visuals in JNSQ."},{"CreatedByName":"Shoujo Q","CreatedById":206637,"CreatedDateTime":"2020-08-06T12:19:43Z","Content":"**KSP:** 1.10.1.2939 Windows 64bit\n\n**Problem:** Godrays from the sun disappear when there is a spacecraft between the camera and the centre of the sun.\n\n**Mods installed:**\n\n![L2Ciu0G.png](https://i.imgur.com/L2Ciu0G.png)\n\n**Reproduction steps:**\n\nSend a craft to an orbit near the sun, or load up such a craft, then manipulate the camera until the craft is between the sun and the camera. The godrays will disappear."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-06T13:39:59Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Shoujo Q said:\n\u003E \n\u003E \n\u003E **KSP:** 1.10.1.2939 Windows 64bit\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Problem:** Godrays from the sun disappear when there is a spacecraft between the camera and the centre of the sun.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Mods installed:**\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Reproduction steps:**\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Send a craft to an orbit near the sun, or load up such a craft, then manipulate the camera until the craft is between the sun and the camera. The godrays will disappear.\n\u003E \n\nThese aren\u0027t godrays, it\u0027s the sunflare, and yes that\u0027s how it works, if something occludes the sun (only one point at the center is checked) the flare disappears.\n\nPotentially I can check multiple points and make the sunflare dim with the amount of sun coverage instead of just cutting out when something covers the center point.\n\n**Edited \u003Ctime datetime=\u00222020-08-06T13:40:14Z\u0022 title=\u002208/06/2020 01:40  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 6, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"Shoujo Q","CreatedById":206637,"CreatedDateTime":"2020-08-06T13:53:14Z","Content":"\u003E \n\u003E \n\u003E 12 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E These aren\u0027t godrays, it\u0027s the sunflare, and yes that\u0027s how it works, if something occludes the sun (only one point at the center is checked) the flare disappears.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Potentially I can check multiple points and make the sunflare dim with the amount of sun coverage instead of just cutting out when something covers the center point.\n\u003E \n\nMy bad. If that\u0027s how it is intended to work, then that\u0027s fine. I just thought it might have been unintended, since it causes a weird transition when you\u0027re moving the camera around and suddenly the sun gets a LOT dimmer for just a moment."},{"CreatedByName":"TimKerbin","CreatedById":83805,"CreatedDateTime":"2020-08-07T20:39:01Z","Content":"**KSP:** 1.10.1.2939 Windows 64bit\n\n**Problem:** Massive frame-rate drops when moving from Map View to Ship View\n\n**Mods installed:**\n\nAudio Muffler Redux  \n\nChatterer  \n\nDistantObject  \n\nKerboKatz (a little onscreen framerate monitor)  \n\nNavBallDockingAlignmentIndicatorCE  \n\nPlanetShine  \n\nRealPlume  \n\nRealPlume-Stock  \n\nSmokeScreen  \n\nSquad  \n\nTextureReplacer  \n\nTweakScale\n\n(Most mods were carried over from 1.9.1 without a problem.)\n\n**Reproduction steps:**\n\nI installed Scatterer, tried moving from Map View to Ship View (size of vessel doesn\u0027t matter, the issue still occurs), and frame-rate drops from 30-60fps to 3fps. The entire game, UI, menus, drops to 3 fps. Sometimes it recovers, but mostly it doesn\u0027t and I have no option but to CTRL-ALT-DEL and end it in Task Manager. When I remove the Scatterer folder, I am no longer able to reproduce this issue, everything behaves as it should. KSP Debug menu and the ksp log file show nothing abnormal during frame-rate drop (the Performance window shows the frame-rate drop). I tried using the default Scatterer folder/settings, and my custom folder/settings. The results were the same. I tried removing other mods to see if they were to blame but I haven\u0027t had this problem until I installed the 0.0621b update."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2020-08-07T23:00:06Z","Content":"Heyo, I\u0027m getting a NullRef from Scatterer/Spectra and was curious if you know what the cause is/if there is anything I can do to fix-\n\n    [EXC 15:52:53.903] NullReferenceException: Object reference not set to an instance of an objectscatterer.SkyNode.cleanupScaledScatteringMaterial () (at :0)scatterer.SkyNode.Cleanup () (at :0)scatterer.ProlandManager.OnDestroy () (at :0)scatterer.ScattererCelestialBodiesManager.UpdateProlandManagers () (at :0)scatterer.ScattererCelestialBodiesManager.Update () (at :0)scatterer.Scatterer.Update () (at :0)UnityEngine.DebugLogHandler:LogException(Exception, Object)ModuleManager.UnityLogHandle.InterceptLogHandler:LogException(Exception, Object)UnityEngine.Debug:CallOverridenDebugHandler(Exception, Object)\n\nIt seems to occur whenever I leave the editor, though I\u0027m not exactly sure.\n\n**Edited \u003Ctime datetime=\u00222020-08-07T23:02:42Z\u0022 title=\u002208/07/2020 11:02  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 7, 2020\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-08T07:36:52Z","Content":"\u003E \n\u003E \n\u003E 10 hours ago, TimKerbin said:\n\u003E \n\u003E \n\u003E **KSP:** 1.10.1.2939 Windows 64bit\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Problem:** Massive frame-rate drops when moving from Map View to Ship View\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Mods installed:**\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Audio Muffler Redux  \n\u003E \n\u003E Chatterer  \n\u003E \n\u003E DistantObject  \n\u003E \n\u003E KerboKatz (a little onscreen framerate monitor)  \n\u003E \n\u003E NavBallDockingAlignmentIndicatorCE  \n\u003E \n\u003E PlanetShine  \n\u003E \n\u003E RealPlume  \n\u003E \n\u003E RealPlume-Stock  \n\u003E \n\u003E SmokeScreen  \n\u003E \n\u003E Squad  \n\u003E \n\u003E TextureReplacer  \n\u003E \n\u003E TweakScale\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E (Most mods were carried over from 1.9.1 without a problem.)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Reproduction steps:**\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I installed Scatterer, tried moving from Map View to Ship View (size of vessel doesn\u0027t matter, the issue still occurs), and frame-rate drops from 30-60fps to 3fps. The entire game, UI, menus, drops to 3 fps. Sometimes it recovers, but mostly it doesn\u0027t and I have no option but to CTRL-ALT-DEL and end it in Task Manager. When I remove the Scatterer folder, I am no longer able to reproduce this issue, everything behaves as it should. KSP Debug menu and the ksp log file show nothing abnormal during frame-rate drop (the Performance window shows the frame-rate drop). I tried using the default Scatterer folder/settings, and my custom folder/settings. The results were the same. I tried removing other mods to see if they were to blame but I haven\u0027t had this problem until I installed the 0.0621b update.\n\u003E \n\nCan you test it without your other mods?\n\n\u003E \n\u003E \n\u003E 8 hours ago, Avera9eJoe said:\n\u003E \n\u003E \n\u003E Heyo, I\u0027m getting a NullRef from Scatterer/Spectra and was curious if you know what the cause is/if there is anything I can do to fix-\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     [EXC 15:52:53.903] NullReferenceException: Object reference not set to an instance of an objectscatterer.SkyNode.cleanupScaledScatteringMaterial () (at :0)scatterer.SkyNode.Cleanup () (at :0)scatterer.ProlandManager.OnDestroy () (at :0)scatterer.ScattererCelestialBodiesManager.UpdateProlandManagers () (at :0)scatterer.ScattererCelestialBodiesManager.Update () (at :0)scatterer.Scatterer.Update () (at :0)UnityEngine.DebugLogHandler:LogException(Exception, Object)ModuleManager.UnityLogHandle.InterceptLogHandler:LogException(Exception, Object)UnityEngine.Debug:CallOverridenDebugHandler(Exception, Object)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It seems to occur whenever I leave the editor, though I\u0027m not exactly sure.\n\u003E \n\nI\u0027ve seen this error reported but didn\u0027t manage to reproduce it, if I install just spectra will this appear?"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2020-08-08T10:33:31Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Can you test it without your other mods?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027ve seen this error reported but didn\u0027t manage to reproduce it, if I install just spectra will this appear?\n\u003E \n\nI can\u0027t say for sure, but it did happen and I have Spectra installed. The bug seems to be fairly harmless and I can\u0027t see any effect of it. If I notice a reoccurring thing causing it I\u0027ll let you know. It seems to happen randomly when I leave an editor.\n\n**Edited \u003Ctime datetime=\u00222020-08-08T10:33:40Z\u0022 title=\u002208/08/2020 10:33  AM\u0022 data-short=\u00223 yr\u0022\u003EAugust 8, 2020\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2020-08-08T12:38:02Z","Content":"So, uh, about that performance thing...\n\n![Screenshot-20200809-002832.png](https://i.postimg.cc/X7wbM5WL/Screenshot-20200809-002832.png)\n\n![Screenshot-20200809-002548.png](https://i.postimg.cc/pLJRjF1r/Screenshot-20200809-002548.png)\n\nI mean, I get that improved graphics costing frames bit and all... But ~60FPS? Seriously? With no change in GPU load? Something fishy is going on here...\n\nNo, I haven\u0027t changed any settings, that\u0027s a clean (1.10.1)  install with only scatterer (v0.0621) and it\u0027s default config.\n\n[Log.](https://damnation.dynu.net/nextcloud/index.php/s/x5RRKdCezQwDfyK)\n\nThoughts?\n\n**Edited \u003Ctime datetime=\u00222020-08-08T12:46:04Z\u0022 title=\u002208/08/2020 12:46  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 8, 2020\u003C/time\u003E by steve\\_v**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-08T15:24:54Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, steve\\_v said:\n\u003E \n\u003E \n\u003E I mean, I get that improved graphics costing frames bit and all... But ~60FPS? Seriously? With no change in GPU load? Something fishy is going on here...\n\u003E \n\nWhat\u0027s fishy is that you\u0027re using OpenGL\n\nEdited: I see no problems with your log or install or anything, just that the performance on OpenGL has always been garbage (can\u0027t remember the exact reason, but it was something like having no separate render thread on OpenGL). You have a more than decent machine, but I get double the framerates on a slower CPU in Directx 11.\n\n**Edited \u003Ctime datetime=\u00222020-08-08T15:33:36Z\u0022 title=\u002208/08/2020 03:33  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 8, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2020-08-08T15:34:48Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E What\u0027s fishy is that you\u0027re using OpenGL\n\u003E \n\nAnd what exactly would you suggest I use then, considering that DirectX is Windows-only and Vulkan is not available in KSP?  \n\nA great many other things, including KSP itself and scatterer up until a few releases ago, work just swimmingly with OpenGL. Something has clearly changed, and I\u0027m pretty sure it\u0027s not the graphics API on my system."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-08T15:40:07Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, steve\\_v said:\n\u003E \n\u003E \n\u003E And what exactly would you suggest I use then, considering that DirectX is Windows-only and Vulkan is not available in KSP?  \n\u003E \n\u003E A great many other things, including KSP itself and scatterer up until a few releases ago, work just swimmingly with OpenGL. Something has clearly changed, and I\u0027m pretty sure it\u0027s not the graphics API on my system.\n\u003E \n\nI actually suggest you use Windows and DirectX. Other than that, if you\u0027re serious about changes, make comparative benchmarks with older versions of scatterer and post the results here. I have no idea which version you\u0027re coming from or what kind of performance you used to get.\n\n**Edited \u003Ctime datetime=\u00222020-08-08T15:40:43Z\u0022 title=\u002208/08/2020 03:40  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 8, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2020-08-08T17:07:38Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E I actually suggest you use Windows and DirectX.\n\u003E \n\n![giphy.webp](https://i.giphy.com/media/ECtLJKdGj8jfy/giphy.webp)\n\nWait, you\u0027re serious? I haven\u0027t used Windows for nearly 20 years, I\u0027m not about to now.\n\n\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E make comparative benchmarks with older versions of scatterer and post the results here.\n\u003E \n\nOkay then. All clean installs, settings.cfg copied, same test scene \u0026 craft, averaged \u0026 rounded to nearest 5FPS:  \n\nKSP 1.8.1 stock: 140FPS  \n\nKSP 1.8.1 \u002B scatterer (0.0550-0.0621): 95FPS  \n\nKSP 1.9.1 stock: 140FPS  \n\nKSP 1.9.1 \u002B scatterer (0.0550-0.0621): 95FPS  \n\nKSP 1.10.1 stock: 130FPS  \n\nKSP 1.10.1 \u002B scatterer (0.0550-0.0621): 65FPS\n\nConclusion:  \n\nA performance regression occurred somewhere in the  KSP 1.9.1-1.10.1 window. This is compounded (and not in a small way) by scatterer, regardless of scatterer version (or as far as 0.0550 - 0.0621 anyway).\n\nThis is frankly not at all what I expected, and pretty much exonerates you as far as the cause of the regression. It\u0027s most likely Squads fault, somebody must have got all s/degraded/improved/g on the patch notes again. ![:rolleyes:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif \u0022:rolleyes:\u0022)  \n\nNevertheless it makes scatterer nearly unusable on OpenGL, particularly in combination with other graphically intensive mods such as \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E. Given that a great many other applications perform just as well rendering with OpenGL as DirectX, I find this somewhat baffling - particularly as it does not appear to be using the full potential of the GPU.\n\nRegressions aside, and as cool as the mod is, a 50-60FPS performance tax for what scatter brings isn\u0027t a real great trade IMO.\n\nAs for what version I was coming from, that would be 1.8.1 \u002B 0.550. So the performance I was expecting was in the 90-100FPS range. That I can just about live with. 60 on the runway with a 15-part craft is a bit underwhelming to say the least.\n\nEd. (scrolled up): That would indeed make sense, if KSP/Unity is doing all the render calls on the main thread it could well be CPU bound... Though why anyone would write a game engine that way in this day and age is beyond me. We did that kind of stuff in the \u002790s when GPUs were slow and polys few, but now? Why Unity, WHY?\n\n**Edited \u003Ctime datetime=\u00222020-08-08T17:30:20Z\u0022 title=\u002208/08/2020 05:30  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 8, 2020\u003C/time\u003E by steve\\_v**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-08T17:44:28Z","Content":"\u003E \n\u003E \n\u003E 37 minutes ago, steve\\_v said:\n\u003E \n\u003E \n\u003E [![giphy.webp](https://i.giphy.com/media/ECtLJKdGj8jfy/giphy.webp)](https://i.giphy.com/media/ECtLJKdGj8jfy/giphy.webp \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Wait, you\u0027re serious? I haven\u0027t used Windows for nearly 20 years, I\u0027m not about to now.\n\u003E \n\nAs much as I love linux for work, this is why I avoid anyone who identifies themselves by their linux usage.\n\n**Edited \u003Ctime datetime=\u00222020-08-08T17:44:59Z\u0022 title=\u002208/08/2020 05:44  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 8, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2020-08-08T17:48:55Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E this is why I avoid anyone who identifies themselves by their linux usage\n\u003E \n\nI could say the same about people who expect me to set aside a few hundred gig of SSD and install a (pirated, \u0027cause I \u0027m sure not going to *buy* it) operating system I haven\u0027t used for decades, absent all the other software I use regularly, just for a single game. But that would lead to pointless arguments, now wouldn\u0027t it.\n\nWhen someone asks me a windows-centric question, I either do my best or shut my mouth. I don\u0027t say \u0022Just use GNU/Linux\u0022, because that\u0027s not a reasonable answer. I kinda expect similar treatment TBH.\n\n**Edited \u003Ctime datetime=\u00222020-08-08T17:54:35Z\u0022 title=\u002208/08/2020 05:54  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 8, 2020\u003C/time\u003E by steve\\_v**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-08T18:12:07Z","Content":"\u003E \n\u003E \n\u003E 20 minutes ago, steve\\_v said:\n\u003E \n\u003E \n\u003E I could say the same about people who expect me to set aside a few hundred gig of SSD and install a (pirated, \u0027cause I \u0027m sure not going to *buy* it) operating system I haven\u0027t used for decades, absent all the other software I use regularly, just for a single game. But that would lead to pointless arguments, now wouldn\u0027t it.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E When someone asks me a windows-centric question, I either do my best or shut my mouth. I don\u0027t say \u0022Just use GNU/Linux\u0022, because that\u0027s not a reasonable answer. I kinda expect similar treatment TBH.\n\u003E \n\nIt is still the only way to get decent performance in KSP, and most games for that matter. Anyway, you have your solutions..."},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2020-08-08T18:27:56Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E most games\n\u003E \n\nMost games that run on GNU/Linux (or MacOS for that matter) natively perform just fine. Using OpenGL.  \n\nA couple of very recent games I could mention run better on GNU/Linux than they do on Windows, using Vulkan.  \n\nA large percentage of non-native games games these days run at almost windows-native framerates using DXVK.\n\nIn fact, I\u0027d go as far as to say KSP is the *only* game I\u0027ve ever played which suffers from this problem... And it only becomes a *problem* when scatterer is installed. Go figure.\n\n\u003E \n\u003E \n\u003E 9 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E you have your solutions\n\u003E \n\nIndeed.  \n\n1) Don\u0027t try to run scatterer on OpenGL, it tanks performance.  \n\n2) Don\u0027t bother asking blackrack why, he doesn\u0027t know and doesn\u0027t care."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-08-08T19:04:46Z","Content":"\u003E \n\u003E \n\u003E 36 minutes ago, steve\\_v said:\n\u003E \n\u003E \n\u003E 2) Don\u0027t bother asking blackrack why, he doesn\u0027t know and doesn\u0027t care\n\u003E \n\nYes, I don\u0027t care. scatterer is open-source, if you care go ahead and fix it"},{"CreatedByName":"KermitKiller","CreatedById":206686,"CreatedDateTime":"2020-08-09T01:22:53Z","Content":"For me, Scatterer has an issue where it doesn\u0027t work and causes the oceans to disappear. I have several other mods installed like \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEnvironmental Visual Enhancements\u003C/abbr\u003E but I am sure Scatterer is the cause of this. I am playing in 1.10.1 on Windows 10. If someone could help, that would be amazing. Thank you!"},{"CreatedByName":"Athur Dent","CreatedById":158513,"CreatedDateTime":"2020-08-09T13:35:31Z","Content":"Hey guys, does anybody know what value in a scatterer config file could cause the night sky of a planet to have a bright rim like this?\n\nI\u0027m playing around with scatterer configs and I do not seem to find the value that turns this off, and lets the dark side of this planet be realistically black.\n\nThanks for any hints.\n\n![xPbkK23.png](https://i.imgur.com/xPbkK23.png)\n\n**Edited \u003Ctime datetime=\u00222020-08-09T13:36:42Z\u0022 title=\u002208/09/2020 01:36  PM\u0022 data-short=\u00223 yr\u0022\u003EAugust 9, 2020\u003C/time\u003E by Athur Dent**"},{"CreatedByName":"JWag","CreatedById":112631,"CreatedDateTime":"2020-08-09T21:29:29Z","Content":"I\u0027m seeing a bunch of NREs also. I haven\u0027t found a way to reproduce it yet. Everything works great for a while, until suddenly the night side of any body becomes completely black except for the skybox and whatever part is highlighted. The log shows a bunch of NREs.\n\nHere\u0027s my modlist, log, and a copy of the save from today\u0027s incident: [https://drive.google.com/file/d/1y03gegllBMr_k3TWN5R3ZvbC59-SvInw/view?usp=sharing](https://drive.google.com/file/d/1y03gegllBMr_k3TWN5R3ZvbC59-SvInw/view?usp=sharing)\n\nAdd mods installed with \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E, though I temporarily relaxed the version limiting so that I could get Kerbal Alarm Clock installed. I don\u0027t believe I\u0027ve changed any Scatterer configurations; I\u0027ve been running with it as-installed via \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E.\n\nHave not tried yet without other mods installed, but that\u0027s mostly because I have no way of knowing when/if the NRE spam or Black Night problems will happen and I\u0027ve got enough going on that playing without \u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E is tough. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"AnFa","CreatedById":200695,"CreatedDateTime":"2020-08-10T04:26:07Z","Content":"**KSP:** 1.10 Windows 64bit\n\n**Problem:** Unlit side of kerbin is black\n\n**Mods installed:**\n\nScatterer 0.0621b\n\nEnvironmentalVisualEnhancements 1.8.0.2\n\n\u003Cabbr title=\u0022KSP Renaissance Compilation (mod)\u0022\u003EKSPRC\u003C/abbr\u003E 0.7 Prerelease 3\n\nTexture Replacer 4.2.2\n\nSpectra 1.4.0\n\nKS3P - V6.1\n\n**Reproduction steps:**\n\nN/A\n\n**Log:**\n\n[https://www.dropbox.com/s/lyt0mflg9dg75i8/Player.log?dl=0](https://www.dropbox.com/s/lyt0mflg9dg75i8/Player.log?dl=0)\n\nThe unlit side of every planet and moon looks like this, a black hole. What do I do?\n\n![JImU7PA.jpg](https://i.imgur.com/JImU7PA.jpg)\n\n**Edited \u003Ctime datetime=\u00222020-08-10T04:38:35Z\u0022 title=\u002208/10/2020 04:38  AM\u0022 data-short=\u00223 yr\u0022\u003EAugust 10, 2020\u003C/time\u003E by AnFa**"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2020-08-10T07:55:19Z","Content":"\u003E \n\u003E \n\u003E 18 hours ago, Athur Dent said:\n\u003E \n\u003E \n\u003E I\u0027m playing around with scatterer configs and I do not seem to find the value that turns this off, and lets the dark side of this planet be realistically black.\n\u003E \n\nThat\u0027s legit. google search \u0022Pluto haze\u0022"},{"CreatedByName":"R-T-B","CreatedById":200868,"CreatedDateTime":"2020-08-11T05:44:14Z","Content":"\u003E \n\u003E \n\u003E On 8/8/2020 at 8:34 AM, steve\\_v said:\n\u003E \n\u003E \n\u003E And what exactly would you suggest I use then, considering that DirectX is Windows-only and Vulkan is not available in KSP?  \n\u003E \n\u003E A great many other things, including KSP itself and scatterer up until a few releases ago, work just swimmingly with OpenGL. Something has clearly changed, and I\u0027m pretty sure it\u0027s not the graphics API on my system.\n\u003E \n\nI would actually advise giving dxvk and wine a try.  It performs...  pretty damn well with it\u0027s DX11 layer.  Provided NVIDIAs vulkan driver is ok (it works by translating DX11 calls to vulkan ones).\n\nPM me if you need help with that.  The results are surprisingly good.\n\n\u003E \n\u003E \n\u003E On 8/8/2020 at 11:27 AM, steve\\_v said:\n\u003E \n\u003E \n\u003E Indeed.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 1) Don\u0027t try to run scatterer on OpenGL, it tanks performance.  \n\u003E \n\u003E 2) Don\u0027t bother asking blackrack why, he doesn\u0027t know and doesn\u0027t care.\n\u003E \n\nWhile I don\u0027t agree with [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/)\u0027s linux/OpenGL general dislike, I do agree that there\u0027s not much he can do to fix it.  The OpenGL implementation in Kerbal at the moment has been badly neglected in the stock game.  There isn\u0027t much modders can do about that.  Ie, it runs like crap on Windows, too.  The only driver configuration that seems to run KSP OpenGL mode acceptably is AMD\u0027s full open source stack, and even it is questionable and riding on the advancements of open source rather than the cards themselves.\n\nFor now, use dxvk, extract 90% of native performance, and blame squad.\n\n**Edited \u003Ctime datetime=\u00222020-08-11T05:52:34Z\u0022 title=\u002208/11/2020 05:52  AM\u0022 data-short=\u00223 yr\u0022\u003EAugust 11, 2020\u003C/time\u003E by R-T-B**"}]}