{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":2,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T17:21:48Z","Content":"\u003E \n\u003E Alt F11 doesn\u0027t close the window in Linux so the window stays up all the time.\n\nFor now just use the newer version, it has a smaller window.\n\n\u003E \n\u003E Looks positively amazing.\n\u003E Sadly, I play using in dx11 forced mode. I know this messes up a lot of shaders, so I must ask:\n\u003E \n\u003E -Is this compatible with dx11?\n\nThis works best in dx11."},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2015-04-12T17:33:27Z","Content":"With the new version yes, I can get in the game but ALT-F11 doesn\u0027t close the window.\n\nEDIT- \n\n\u003E ![screenshot1.png](https://dl.dropboxusercontent.com/u/72893034/Untitled%20Folder/screenshot1.png)![screenshot4.png](https://dl.dropboxusercontent.com/u/72893034/Untitled%20Folder/screenshot4.png)\n\n**Edited \u003Ctime datetime=\u00222015-04-12T17:59:01Z\u0022 title=\u002204/12/2015 05:59  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 12, 2015\u003C/time\u003E by Mecripp2**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T18:06:35Z","Content":"\u003E \n\u003E With the new version yes, I can get in the game but ALT-F11 doesn\u0027t close the window.\n\nI\u0027ll add a button in the next version. From your second screen it looks like the mod isn\u0027t working (stuck in wake() state). You\u0027re running on linux right? Which version of the game are you running?"},{"CreatedByName":"Thomas988","CreatedById":92699,"CreatedDateTime":"2015-04-12T18:30:28Z","Content":"\u003E \n\u003E From your second screen it looks like the mod isn\u0027t working (stuck in wake() state). You\u0027re running on linux right? Which version of the game are you running?\n\nI\u0027m having the same problem, too. However, I have Windows 8, KSP 0.90 and the latest version of the mod. I\u0027ve even set the rendering settings to \u0022Fast,\u0022 but nothing is showing up.\n\n\u003E ![sGpb4yB.png](http://i.imgur.com/sGpb4yB.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T18:47:19Z","Content":"\u003E \n\u003E I\u0027m having the same problem, too. However, I have Windows 8, KSP 0.90 and the latest version of the mod. I\u0027ve even set the rendering settings to \u0022Fast,\u0022 but nothing is showing up.\n\u003E \n\u003E \n\u003E \n\u003E \u003E [http://i.imgur.com/sGpb4yB.png](http://i.imgur.com/sGpb4yB.png)\n\nI\u0027ll check this out, does the old version work normally?\n\nEdit: It seems I have forgotten to include one file in the new version here it is now complete:[http://s000.tinyupload.com/index.php?file_id=12532677761757698937](http://s000.tinyupload.com/index.php?file_id=12532677761757698937)\n\n\u003E \n\u003E Huh. Just downloaded the mod (finaly ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)) and saw, that there is no source included. I think, if you offer compiled binaries, the forum rules requires a link to the source (GitHub f.e.) and a license. Would be good If you\u0027d show us the source. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) (So that a) the mods are happy ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif) and ![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png) others could search bugs / provide fixes.) ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nI\u0027ll include a source, but first I\u0027ll have to clean it up, I wouldn\u0027t want you all laughing at my duct-taped code yet.\n\n**Edited \u003Ctime datetime=\u00222015-04-12T19:50:29Z\u0022 title=\u002204/12/2015 07:50  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 12, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-04-12T21:44:18Z","Content":"well here are some shots under DX9 32-bit exe w/W7 x64 and all graphics settings enabled and maxed out:\n\nSunrise. Wow.\n\n[![3N92UAAl.png](http://i.imgur.com/3N92UAAl.png)](http://i.imgur.com/3N92UAA.png)\n\nDaytime. Can see the lines, can also see them at night but during sunrise/sunset they aren\u0027t really noticeable. Also, the sun bounces around a lot when moving the camera about. not a big deal for images, but for video\n\n[![ygStRwwl.png](http://i.imgur.com/ygStRwwl.png)](http://i.imgur.com/ygStRww.png)\n\nOrbit. Yea needs some work here still. Map view however looks just fine\n\n[![L3JtAsBl.png](http://i.imgur.com/L3JtAsBl.png)](http://i.imgur.com/L3JtAsB.png)\n\nOverall a good start tho IMO"},{"CreatedByName":"Elthy","CreatedById":63317,"CreatedDateTime":"2015-04-12T22:05:36Z","Content":"This looks like the beginning of something big...\n\nGood to see there are other people able to do graphics magic after Rbray seems to be gone."},{"CreatedByName":"Arron Rift","CreatedById":113722,"CreatedDateTime":"2015-04-12T22:06:24Z","Content":"Out of curiosity, could this one day create \u0022blood moons\u0022 like the one Saturday before last? This is where the moon passes in just the right angle so it gets hit by many of Earth\u0027s sunsets at once."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T22:21:43Z","Content":"\u003E \n\u003E Also, the sun bounces around a lot when moving the camera about. not a big deal for images, but for video\n\npress \u0022transform from cam 0 to cam 1\u0022"},{"CreatedByName":"BoomShroom","CreatedById":124216,"CreatedDateTime":"2015-04-12T22:52:35Z","Content":"Well recently I haven\u0027t been going to space so that orbital ugliness won\u0027t be bothering me much right now. I am curious if there are similar effects on Eve, Duna, and Laythe, or if plan to mess with those later.\n\n(EDIT) Well I went and popped this in so I could ride my P-40 into the sunset. I was rolling the craft to pass the time until I got to the mountains and the sky went bonkers.\n\n![1GOHddm.jpg](http://i.imgur.com/1GOHddm.jpg)\n\nIt isn\u0027t as severe out of phys warp but the sky still shifts around a bit.\n\n**Edited \u003Ctime datetime=\u00222015-04-12T23:14:35Z\u0022 title=\u002204/12/2015 11:14  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 12, 2015\u003C/time\u003E by BoomShroom**"},{"CreatedByName":"djnattyd","CreatedById":63737,"CreatedDateTime":"2015-04-13T00:36:47Z","Content":"I\u0027m getting some weirdness going on with this. The sun appears as a black disc with a glowing centre and no scattering is applied at all. I\u0027m using Kerbin 365 which may or may not be conflicting however."},{"CreatedByName":"Bartybum","CreatedById":81780,"CreatedDateTime":"2015-04-13T10:21:06Z","Content":"KSP has needed atmospheric scattering for ages. So glad someone\u0027s finally bit the bullet and taken it on themselves ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif) Thank you so much dude!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-13T13:21:21Z","Content":"I fixed up the line artifacts and the messed up dx9 and opengl shaders from orbit. Transition from atmosphere to orbit is now smooth. I also fixed the sky getting messed up when alt-tabbing or switching from/to fullscreen.\n\nRight now the problem is the atmosphere will start looking like this after a certain altitude\n\n![hsPuU11.jpg](http://i.imgur.com/hsPuU11.jpg)\n\nSimply using alpha channel just makes the planet look like it\u0027s covered with a blue overlay filter and the continents don\u0027t look good at all so I\u0027ll need to figure out something else. For now you can play with the exposure, alpha and alpha cutoff settings.\n\nThere\u0027s also a minor problem with the sunglare in space but it\u0027ll be fixed. The shader is also not always closely following the camera, this is because I\u0027m using graphics.drawmesh right now, using a regular meshrenderer doesn\u0027t allow me to control which camera the mesh is rendered to and as a result it ends up occluding everything more than 500m away, I\u0027m hoping I\u0027ll get around this by using a different mesh shape.\n\nNew version is in the OP."},{"CreatedByName":"KYKYPY3A","CreatedById":36594,"CreatedDateTime":"2015-04-13T13:28:25Z","Content":"Awesome progress in such a short time."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-13T13:33:23Z","Content":"\u003E \n\u003E Awesome progress in such a short time.\n\nWell, to be honest, the hard part was getting the shaders to work in dx9 and ogl at all, compared to that, it\u0027s smooth sailing from now on."},{"CreatedByName":"Thomas988","CreatedById":92699,"CreatedDateTime":"2015-04-13T14:00:43Z","Content":"I see you edited the OP today, blackrack. But I\u0027m at school and can\u0027t preview that update. What\u0027s new? ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Kartoffelkuchen","CreatedById":108501,"CreatedDateTime":"2015-04-13T17:51:52Z","Content":"Awwww my god it\u0027s so fantastiiiiiic!![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif):0.0:![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif):0.0:![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif):0.0:![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif):0.0:![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif):0.0:![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif):0.0:![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif):0.0:![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif):0.0:![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif)\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/UNKmF)"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-04-13T17:58:47Z","Content":"Ok the lines are gone, but now for some reason it suppresses EVE clouds during the day. At night they show up, but still no volumetrics. You can see them rolling past the mountains during the day but they only show against the terrain not the sky:\n\n[![lhuT2kbl.png](http://i.imgur.com/lhuT2kbl.png)](http://i.imgur.com/lhuT2kb.png)\n\nSun in the sky while in atmo is no longer bobbly, but as you did mention it still needs some work up in orbit:\n\n[![E3e2DLcl.png](http://i.imgur.com/E3e2DLcl.png)](http://i.imgur.com/E3e2DLc.png)\n\nThis atmosphere after sunset though is awesome!\n\n[![n9XGdbul.png](http://i.imgur.com/n9XGdbul.png)](http://i.imgur.com/n9XGdbu.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-13T18:37:13Z","Content":"\u003E \n\u003E Ok the lines are gone, but now for some reason it suppresses EVE clouds during the day. At night they show up, but still no volumetrics. You can see them rolling past the mountains during the day but they only show against the terrain not the sky:\n\nWell, in this new version I disabled the stock atmosphere\u0027s renderer, that\u0027s the most major change, if EVE relies on that for some reason then I guess I could wait until high up in the atmosphere before disabling it (when lower in the atmosphere it\u0027s occluded anyway).\n\n\u003E \n\u003E I see you edited the OP today, blackrack. But I\u0027m at school and can\u0027t preview that update. What\u0027s new? ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nMostly fixes and a few improvements here and there."},{"CreatedByName":"SmallFatFetus","CreatedById":137860,"CreatedDateTime":"2015-04-13T19:27:34Z","Content":"![2cLdqOo.jpg](http://i.imgur.com/2cLdqOo.jpg)\n\nOh, one can dream... ![;.;](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif)"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-04-13T19:39:20Z","Content":"Now *that\u0027s* pretty. But, I gotta say, your name is really disturbing."},{"CreatedByName":"Climberfx","CreatedById":57126,"CreatedDateTime":"2015-04-13T20:58:05Z","Content":"I have to agree with that Gaalidas...\n\n![:o](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-14T07:05:16Z","Content":"Does anybody have any experience with the way the cameras in KSP handle depth buffers? I need to know if KSP\u0027s default terrain shaders write to the depth buffer. I know KSP uses multiple cameras and it makes rebuilding a coherent depth buffer difficult and yadda yadda but since I\u0027m working on atmospheric scattering, it only applies to the farthest objects and would only require the depth buffer of the farthest camera.\n\nI know rbray was working on something similar, but if possible, I\u0027d like to not have to replace the stock terrain shaders with other shaders that write to the depth buffer as rbray did something similar but it did not look good in the end.\n\n\u003E Oh, one can dream... ![;.;](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif)\n\nWe\u0027ll get there eventually, don\u0027t you worry.\n\n\u003E \n\u003E Now *that\u0027s* pretty. But, I gotta say, your name is really disturbing.\n\n\u003E \n\u003E I have to agree with that Gaalidas...\n\u003E ![:o](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png)\n\nI made that name up when I was 12, I do not think it means what you think it means."},{"CreatedByName":"Climberfx","CreatedById":57126,"CreatedDateTime":"2015-04-14T11:13:02Z","Content":"Hey BlackRat, i think we was talking about SmallFatFetus...\n\n![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-04-14T19:58:55Z","Content":"But now that you mention it, that name is a bit odd too... but I blame my sick brain on the people I\u0027m hanging out with right now. It\u0027s not my fault, I swear."}]}