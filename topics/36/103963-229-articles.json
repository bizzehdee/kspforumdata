{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":229,"Articles":[{"CreatedByName":"Andi K.","CreatedById":156312,"CreatedDateTime":"2017-01-23T21:03:25Z","Content":"I am having a strange problem with scatterer. Instead of all of the clouds appearing black, the entire planet appears black, while the clouds are their proper color. Here\u0027s some screeshots\n\nSpoiler\n\n![Bup0fuN.png](http://i.imgur.com/Bup0fuN.png)\n\n![dxCdMfH.png](http://i.imgur.com/dxCdMfH.png)\n\nI\u0027m using the exact same configs that I used for the experimental build [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) sent me. Something must of changed between the experimental version and version 0.0300 that is causing me this issue.\n\noutput log: [https://drive.google.com/open?id=0B4wjXOtt9_9XdmY4bVFQUW1DYlk](https://drive.google.com/open?id=0B4wjXOtt9_9XdmY4bVFQUW1DYlk)"},{"CreatedByName":"Motokid600","CreatedById":66349,"CreatedDateTime":"2017-01-23T21:06:36Z","Content":"Thanks guy ill try removing some mods to maybe isolate it a bit more."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T21:06:52Z","Content":"\u003E \n\u003E \n\u003E 11 minutes ago, AndrewDrawsPrettyPictures said:\n\u003E \n\u003E \n\u003E I am having a strange problem with scatterer. Instead of all of the clouds appearing black, the entire planet appears black, while the clouds are their proper color. Here\u0027s some screeshots\n\u003E \n\u003E \n\u003E \n\u003E Reveal hidden contents\n\u003E \n\u003E \n\u003E [![Bup0fuN.png](http://i.imgur.com/Bup0fuN.png)](http://i.imgur.com/Bup0fuN.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![dxCdMfH.png](http://i.imgur.com/dxCdMfH.png)](http://i.imgur.com/dxCdMfH.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E I\u0027m using the exact same configs that I used for the experimental build [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) sent me. Something must of changed between the experimental version and version 0.0300 that is causing me this issue.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E output log: [https://drive.google.com/open?id=0B4wjXOtt9_9XdmY4bVFQUW1DYlk](https://drive.google.com/open?id=0B4wjXOtt9_9XdmY4bVFQUW1DYlk)\n\u003E \n\nif you remove the configs for this planet, do the other planets work?\n\nAlso, if you disable the sunflare, does everything else work?\n\nEdited: Forget the planet configs, try to disable just the sunflare.\n\n**Edited \u003Ctime datetime=\u00222017-01-23T21:15:43Z\u0022 title=\u002201/23/2017 09:15  PM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by blackrack**"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T21:08:12Z","Content":"I removed all volumetric only layers and clouds remain black"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T21:12:11Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, Galileo said:\n\u003E \n\u003E \n\u003E I removed all volumetric only layers and clouds remain black\n\u003E \n\nTry this :[https://mega.nz/#!jQxigQIR!eS8-9sszzVfjxg0rMHERmv4Ohp86busHIRfeHPWvF8E](https://mega.nz/#!jQxigQIR!eS8-9sszzVfjxg0rMHERmv4Ohp86busHIRfeHPWvF8E)\n\nIf you still have black clouds send me a log"},{"CreatedByName":"Andi K.","CreatedById":156312,"CreatedDateTime":"2017-01-23T21:18:01Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Removing sunflares fixes the issue. Did I perhaps screw up the sunflare configs? I made sure I added the ghost fade stuff..."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T21:22:00Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, AndrewDrawsPrettyPictures said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Removing sunflares fixes the issue. Did I perhaps screw up the sunflare configs? I made sure I added the ghost fade stuff...\n\u003E \n\nOn second look at your log\n\n    [Scatterer] Custom sunflare cannot be added to ProximaCentauri System.IO.IsolatedStorage.IsolatedStorageException: Could not find a part of the path \u0022C:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program\\GameData\\CVO\\CVO_scatterer\\config\\Sunflares\\ProximaCentauri\\sunSpikes.png\u0022."},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T21:32:22Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) with that dll\n\n[https://www.dropbox.com/s/9tbhp4mz2z8cqlg/output_log.txt?dl=0](https://www.dropbox.com/s/9tbhp4mz2z8cqlg/output_log.txt?dl=0)\n\n![BTzI8Lg.png](http://i.imgur.com/BTzI8Lg.png)  \n![S3PPCE6.png](http://i.imgur.com/S3PPCE6.png)\n\n**Edited \u003Ctime datetime=\u00222017-01-23T21:33:02Z\u0022 title=\u002201/23/2017 09:33  PM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by Galileo**"},{"CreatedByName":"Andi K.","CreatedById":156312,"CreatedDateTime":"2017-01-23T21:32:37Z","Content":"\u003E \n\u003E \n\u003E 9 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E On second look at your log\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     [Scatterer] Custom sunflare cannot be added to ProximaCentauri System.IO.IsolatedStorage.IsolatedStorageException: Could not find a part of the path \u0022C:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program\\GameData\\CVO\\CVO_scatterer\\config\\Sunflares\\ProximaCentauri\\sunSpikes.png\u0022.\n\u003E \n\nThat would be the issue. Thanks!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T21:39:05Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, Galileo said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) with that dll\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://www.dropbox.com/s/9tbhp4mz2z8cqlg/output_log.txt?dl=0](https://www.dropbox.com/s/9tbhp4mz2z8cqlg/output_log.txt?dl=0)\n\u003E \n\nHow many volumetric layers do you have on Kerbin? how many of them don\u0027t have a 2d layer?"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T21:44:38Z","Content":"atm i only have 1.. there isn\u0027t a single body that has more than 1 volume layer currently"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T21:48:49Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, Galileo said:\n\u003E \n\u003E \n\u003E atm i only have 1.. there isn\u0027t a single body that has more than 1 volume layer currently\n\u003E \n\nHmm, well, no idea what\u0027s going on, just send me your scatterer and \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E configs for Kerbin when you can."},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T22:10:34Z","Content":"\u003E \n\u003E \n\u003E 21 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Hmm, well, no idea what\u0027s going on, just send me your scatterer and \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E configs for Kerbin when you can.\n\u003E \n\nill do it now"},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2017-01-23T22:13:49Z","Content":"[@Blacks](https://forum.kerbalspaceprogram.com/index.php?/profile/145137-blacks/) I am well aware of the changes required for the new Scatterer release. If you take a look on my developement branch you will see that i have been working on it for a while. Today i did a semi-final pass and i will be pushing a new release candidate soon^TM^."},{"CreatedByName":"Blacks","CreatedById":145137,"CreatedDateTime":"2017-01-23T22:26:52Z","Content":"[@Phineas Freak](https://forum.kerbalspaceprogram.com/index.php?/profile/146521-phineas-freak/) i not have doubt you was not working to came with a proper release ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) i am not rushing you with anything, i just test my self how thing goo \u0026 post feedback or help ppls who need it ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\nAbout black cloud simple question [@Galileo](https://forum.kerbalspaceprogram.com/index.php?/profile/150430-galileo/) black cloud it apear when you edit \u0026 hit apply thing in Eve UI ? coz it sems that\u0027s it make them triger instant \u0026 i will post a simple test (picture are made with experimental version scattererTrackingStation upgrade to scattererWobblingFIX then upgrade to auroraFix) i will check if v 300 it doo same thing  \n\nFresh Load game  \n![xBhPXKy.png](http://i.imgur.com/xBhPXKy.png)  \n\nOpen Eve UI \u0026 just hiting Apply\n\n![YU0z8iT.png](http://i.imgur.com/YU0z8iT.png)\n\nSame file load same setting v300 test \u002Bapply test all is look fine  \n![M0x0suE.png](http://i.imgur.com/M0x0suE.png)\n\n**Edited \u003Ctime datetime=\u00222017-01-23T22:43:42Z\u0022 title=\u002201/23/2017 10:43  PM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by Blacks**"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T22:34:33Z","Content":"[@Blacks](https://forum.kerbalspaceprogram.com/index.php?/profile/145137-blacks/) no they are black upon loading the game"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T23:09:37Z","Content":"All i need now is white volumetric clouds and its done\n\n![5PiRPax.png](http://i.imgur.com/5PiRPax.png)  \n![pa6D1jF.png](http://i.imgur.com/pa6D1jF.png)![vtCfrt0.png](http://i.imgur.com/vtCfrt0.png)![ChNUQ1f.png](http://i.imgur.com/ChNUQ1f.png)![Hys8vj5.png](http://i.imgur.com/Hys8vj5.png)![qw5RP08.png](http://i.imgur.com/qw5RP08.png)"},{"CreatedByName":"PmThay","CreatedById":117293,"CreatedDateTime":"2017-01-23T23:50:34Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Congratulations on the fantastic update!!! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)  \n\nsome nice pictures ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n![73EnWPO.jpg](http://i.imgur.com/73EnWPO.jpg)\n\n![DA0dMUe.jpg](http://i.imgur.com/DA0dMUe.jpg)\n\n![UTqBtXy.jpg](http://i.imgur.com/UTqBtXy.jpg)\n\nAwesome work!  \n\n;)"},{"CreatedByName":"alexus","CreatedById":163084,"CreatedDateTime":"2017-01-23T23:51:33Z","Content":"Anybody, how you can make shadows on the rings?\n\n**Edited \u003Ctime datetime=\u00222017-01-24T00:20:19Z\u0022 title=\u002201/24/2017 12:20  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 24, 2017\u003C/time\u003E by alexus**"},{"CreatedByName":"Blacks","CreatedById":145137,"CreatedDateTime":"2017-01-24T00:26:22Z","Content":"[@Galileo](https://forum.kerbalspaceprogram.com/index.php?/profile/150430-galileo/) i done all combination what i can to narrow the issue \u0026 for me is clear v256 was work fine with volumetric cloud, from experimental (each zip file what i get \u0026 test), how i say in a early post, i see black volumetric cloud sneak in, first time i was belive i done something bad on my side pushing to much eve ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022) it will not be first time when i scrue up thing badly ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022). In V300 for me black cloud not want to appear in with what config i test at list till now. When you will release a test version or a final version i will grab \u0026 see how it goo  \n\nall test done was with:  \n\nKerbal Space Program - 1.2.2.1622 (WindowsPlayer x64)  \n\nOS: Windows 7 Service Pack 1 (6.1.7601) 64bit  \n\nCPU: Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz (4)  \n\nRAM: 8153  \n\nGPU: NVIDIA GeForce GTX 1060 3GB (2986MB)  \n\nSM: 30 (Direct3D 9.0c [nvd3dumx.dll 21.21.13.7633])  \n\nRT Formats: ARGB32, Depth, ARGBHalf, Shadowmap, RGB565, Default, ARGB2101010, DefaultHDR, ARGBFloat, RGFloat, RGHalf, RFloat, RHalf, R8  \n\nShorcut using only -popupwindow"},{"CreatedByName":"Bombaatu","CreatedById":157643,"CreatedDateTime":"2017-01-24T01:04:22Z","Content":"When I updated to the latest version of scatterer (v0.0300), this keeps getting spammed in the log and the framerate tanks:\n\n\u003E \n\u003E \n\u003E Quote\n\u003E \n\u003E \n\u003E [LOG 19:00:39.591] [Scatterer] Added eclipse caster Mun for Kerbin  \n\u003E \n\u003E [LOG 19:00:39.592] [Scatterer] Added eclipse caster Minmus for Kerbin  \n\u003E \n\u003E [LOG 19:00:39.597] [Scatterer] Atmosphere config found for: Kerbin  \n\u003E \n\u003E [EXC 19:00:39.619] NullReferenceException: Object reference not set to an instance of an object  \n\u003E \n\u003E     scatterer.Manager.getDirectionToSun ()  \n\u003E \n\u003E     scatterer.SkyNode.InitPostprocessMaterial (UnityEngine.Material mat)  \n\u003E \n\u003E     scatterer.SkyNode.Start ()  \n\u003E \n\u003E     scatterer.Manager.Awake ()  \n\u003E \n\u003E     scatterer.Core.Update ()\n\u003E"},{"CreatedByName":"sDaZe","CreatedById":111181,"CreatedDateTime":"2017-01-24T01:08:23Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Galileo said:\n\u003E \n\u003E \n\u003E All i need now is white volumetric clouds and its done\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![5PiRPax.png](http://i.imgur.com/5PiRPax.png)](http://i.imgur.com/5PiRPax.png \u0022Enlarge image\u0022)  \n\u003E [![pa6D1jF.png](http://i.imgur.com/pa6D1jF.png)](http://i.imgur.com/pa6D1jF.png \u0022Enlarge image\u0022)[![vtCfrt0.png](http://i.imgur.com/vtCfrt0.png)](http://i.imgur.com/vtCfrt0.png \u0022Enlarge image\u0022)[![ChNUQ1f.png](http://i.imgur.com/ChNUQ1f.png)](http://i.imgur.com/ChNUQ1f.png \u0022Enlarge image\u0022)[![Hys8vj5.png](http://i.imgur.com/Hys8vj5.png)](http://i.imgur.com/Hys8vj5.png \u0022Enlarge image\u0022)[![qw5RP08.png](http://i.imgur.com/qw5RP08.png)](http://i.imgur.com/qw5RP08.png \u0022Enlarge image\u0022)\n\u003E \n\nShouldnt the Duna terminator be more bluish?"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-24T01:12:29Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, sDaZe said:\n\u003E \n\u003E \n\u003E Shouldnt the Duna terminator be more bluish?\n\u003E \n\nIt is on the surface, but my old cfgs wouldn\u0027t play nice with the update so, it looks like this now lol"},{"CreatedByName":"cyberpunkdreams","CreatedById":161836,"CreatedDateTime":"2017-01-24T01:49:29Z","Content":"Hey, so, I launched KSP today and am suddenly getting a framerate of approximately zero (it\u0027s usually fine). A quick glance at the logs shows insane NRE spam from Scatterer:\n\n[LOG 01:37:06.578] [Scatterer] Added eclipse caster Mun for Kerbin  \n\n[LOG 01:37:06.579] [Scatterer] Added eclipse caster Minmus for Kerbin  \n\n[LOG 01:37:06.583] [Scatterer] Atmosphere config found for: Kerbin  \n\n[EXC 01:37:07.107] NullReferenceException: Object reference not set to an instance of an object  \n\n    scatterer.Manager.getDirectionToSun ()  \n\n    scatterer.SkyNode.InitPostprocessMaterial (UnityEngine.Material mat)  \n\n    scatterer.SkyNode.Start ()  \n\n    scatterer.Manager.Awake ()  \n\n    scatterer.Core.Update ()\n\nOver and over again. I\u0027m running quite a lot of mods, but nothing like \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E or anything. I\u0027ve also not modified any of the Scatterer config. Just Stock Visual Enhancements.\n\n**Edited \u003Ctime datetime=\u00222017-01-24T01:50:33Z\u0022 title=\u002201/24/2017 01:50  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 24, 2017\u003C/time\u003E by cyberpunkdreams**"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-24T02:39:21Z","Content":"\u003E \n\u003E \n\u003E 48 minutes ago, cyberpunkdreams said:\n\u003E \n\u003E \n\u003E Hey, so, I launched KSP today and am suddenly getting a framerate of approximately zero (it\u0027s usually fine). A quick glance at the logs shows insane NRE spam from Scatterer:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [LOG 01:37:06.578] [Scatterer] Added eclipse caster Mun for Kerbin  \n\u003E \n\u003E [LOG 01:37:06.579] [Scatterer] Added eclipse caster Minmus for Kerbin  \n\u003E \n\u003E [LOG 01:37:06.583] [Scatterer] Atmosphere config found for: Kerbin  \n\u003E \n\u003E [EXC 01:37:07.107] NullReferenceException: Object reference not set to an instance of an object  \n\u003E \n\u003E     scatterer.Manager.getDirectionToSun ()  \n\u003E \n\u003E     scatterer.SkyNode.InitPostprocessMaterial (UnityEngine.Material mat)  \n\u003E \n\u003E     scatterer.SkyNode.Start ()  \n\u003E \n\u003E     scatterer.Manager.Awake ()  \n\u003E \n\u003E     scatterer.Core.Update ()\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Over and over again. I\u0027m running quite a lot of mods, but nothing like \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E or anything. I\u0027ve also not modified any of the Scatterer config. Just Stock Visual Enhancements.\n\u003E \n\nIf you read back the last page, you would see SVE does not work with the latest update. Use the version packaged. I package it for a reason. So even if there is an update you have a version to play with. I will have a version of SVE out soon that includes the latest scatterer."}]}