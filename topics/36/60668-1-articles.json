{"TopicId":60668,"ForumId":36,"TopicTitle":"using prefabs","CreatedByName":"codepoet","CreatedById":73449,"CreatedDateTime":"2014-01-21T21:29:35Z","PageNum":1,"Articles":[{"CreatedByName":"codepoet","CreatedById":73449,"CreatedDateTime":"2014-01-21T21:29:35Z","Content":"\n\u003Cp\u003EKSP has a class AssetBase that provides a public method GetPrefab(). I assume I can use this to access prefabs for gameobjects priovided by the game, such as attachment node icons, CoM Markers, Models of the VAB. The problem is not knowing what the prefabs are called. Does anyone have experience of doing this, or can offer solutions?\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-01-21T23:50:02Z","Content":"\n\u003Cp\u003EHm, i never heard about that class before and couldn\u0027t get it to work, so it looks like another dead piece of code. KSP has quite a few of them... some kept for mod-compatibility, others like this for no apparent reason.\u003C/p\u003E\u003Cp\u003EYou should check out GameDatabase. It lists pretty much everything from GameData... at least Texture, Models and Audio files and you can query them via the Get...(string name) methods. The names there are the same you can find in the ingame debug menu or the objects name property. For vessel related prefabs... PartLoader provided nearly all i ever needed.\u003C/p\u003E\n"},{"CreatedByName":"codepoet","CreatedById":73449,"CreatedDateTime":"2014-01-22T20:07:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EHm, i never heard about that class before and couldn\u0027t get it to work, so it looks like another dead piece of code. KSP has quite a few of them... some kept for mod-compatibility, others like this for no apparent reason.\u003Cp\u003EYou should check out GameDatabase. It lists pretty much everything from GameData... at least Texture, Models and Audio files and you can query them via the Get...(string name) methods. The names there are the same you can find in the ingame debug menu or the objects name property. For vessel related prefabs... PartLoader provided nearly all i ever needed.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI do not think it is dead - it is called by the EditorLogic to retrieve the prefab for an Attachment Node Icon when it creates those (which is something I want to do as I am messing around with AttachmentNodes). However the problem is it is not clear what the name of any of the PreFabs are for be able to access them AssetBase::GetPrefab(\u0022myPrefab\u0022) ought to work, if you know what prefab you want. I tried a brute force attack to try to find something, anything in there, but it quickly became inefficent at more than 6 characters.\u003C/p\u003E\u003Cp\u003EIs there a way of asking a GameObject which prefab it came from? Does anyone know what is in the .assets files in KSP_Data, or what format they are in?\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-01-22T20:27:12Z","Content":"\n\u003Cp\u003E@ codepoet: just a guess here, I don\u0027t really know about Prefabs. But if you resorted to a brute force attack to find something...could Prefabs have anything to do with Subassemblies (what goes saved within VAB/SPH)? If you have none in your development copy of KSP, then you would never find one.\u003C/p\u003E\n"},{"CreatedByName":"codepoet","CreatedById":73449,"CreatedDateTime":"2014-01-22T20:30:30Z","Content":"\n\u003Cp\u003EA Prefab is a unity concept - it can be used as a template to create a new GameObject. I know that some are there as the stock game is calling this code to get them, and use them. I just do not know what they are called!\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-01-22T21:41:43Z","Content":"\n\u003Cp\u003EOK, thanks. Have never gone in depth with Unity objects, and I missed you were not talking about one from KSP itself. Hope I am not actually making you lose time. \u003C/p\u003E\u003Cp\u003EBut if that is a Unity concept, and KSP uses it as a template to build one of its own objects, then it is very possible that KSP never creates instances of a Prefab, just creates derivative objects based on that. Of course the GetPrefab() method is inherited as well, but I miss to see how you could find anything belonging to the Prefab class, while there may be plenty of objects of other inherited classes.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-01-22T22:54:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022codepoet\u0022 data-cite=\u0022codepoet\u0022\u003E\u003Cdiv\u003EI do not think it is dead - it is called by the EditorLogic to retrieve the prefab for an Attachment Node [...]\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, i thought the prefab is EditorLogic.attachNodePrefab and directly assigned via Unity. Anyway, have you tried the GameObject\u0027s name property? Ksp usually uses them to retrieve prefabs, and if you are lucky it might was not or just slightly changed. Also AssertBase instances do expose lists of all their asserts. Getting that reference should be easy via Object.FindObjectsOfType. That way you can at least look for their names...\u003C/p\u003E\n"},{"CreatedByName":"codepoet","CreatedById":73449,"CreatedDateTime":"2014-01-22T23:12:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EOkay, i thought the prefab is EditorLogic.attachNodePrefab and directly assigned via Unity. Anyway, have you tried the GameObject\u0027s name property? Ksp usually uses them to retrieve prefabs, and if you are lucky it might was not or just slightly changed. Also AssertBase instances do expose lists of all their asserts. Getting that reference should be easy via Object.FindObjectsOfType. That way you can at least look for their names...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOf course - get the AssetBase using Object.FindObjectsOfType! Sorry, I was being dull, and could not see the wood for the trees.\u003C/p\u003E\u003Cp\u003EHaving said that, your are right about EditorLogic.attachNodePrefab - it is being used, but not asigned in the KSP code, which makes me wonder where is comes from (somehow I had concluded it was assetbase, but now I am not so sure!) Could you please explain what you mean by \u0022directly assigned via unity\u0022? How does that work, and in practical terms do I have access to it? I guess I can just use the prefab straigh out of EditorLogic?\u003C/p\u003E\n"}]}