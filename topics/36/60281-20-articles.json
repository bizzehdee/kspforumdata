{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":20,"Articles":[{"CreatedByName":"Jebidiah!","CreatedById":70284,"CreatedDateTime":"2014-09-19T11:20:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003EPretty much.\u003Cp\u003EInstall the KSPIO mod into KSP.\u003C/p\u003E\u003Cp\u003EUpload the sketch to the Arduino\u003C/p\u003E\u003Cp\u003EStart KSP.\u003C/p\u003E\u003Cp\u003EIt\u0027ll automatically connect once you load a vessel (so not in VAB etc)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethank im a bit of a beginner with arduino\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-09-19T21:01:37Z","Content":"\n\u003Cp\u003E@Zitronen, you have a private message \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"brndonaut","CreatedById":122117,"CreatedDateTime":"2014-09-19T21:38:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EHave you \u003Cem\u003Ere\u003C/em\u003E-downloaded the demo 8 code lately (since 10 says ago)? If not you need to do that. There was a version mismatch since I uploaded the wrong code.\u003Cp\u003EIf you have problems with indicators it seems like you have the wrong version.\u003C/p\u003E\u003Cp\u003EYou can easily check: the struct VesselData in the first arduino tab should have 45 elements in the new version.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat was exactly it. Actually i re-downloaded, but i still had the previous version in my download folder and extracted that instead. \u003C/p\u003E\u003Cp\u003ESo a big pebcak there from me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIn addition: when i refactored my arduino code, i moved the initTxPackets() function, still with CPacket.id = 1; instead of = 101; \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo there were two mismatches. It\u0027s working now and i can go back to further implement my buttons. \u003C/p\u003E\u003Cp\u003EThanks for the quick help, everyone \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Jebidiah!","CreatedById":70284,"CreatedDateTime":"2014-09-21T08:02:36Z","Content":"\n\u003Cp\u003ECan you use multiple arduinos at the same time if so how many? Thanks\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-09-21T14:02:46Z","Content":"\n\u003Cp\u003EFor those who prefer to work with Atmel microprocessors directly and without the overhead of the Arduino GUI, I\u0027ve ported Zitronen\u0027s Demo8 to native AVR C:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/MrOnak/avr_KSPIO\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/MrOnak/avr_KSPIO\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEnjoy\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-09-21T23:58:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jebidiah!\u0022 data-cite=\u0022Jebidiah!\u0022\u003E\u003Cdiv\u003ECan you use multiple arduinos at the same time if so how many? Thanks\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe ksp plugin only supports 1 serial connection, but you can connect multiple arduinos by using one as the hub and distributing the data to others (or some other network topology). The protocol was made to support it, and someone in this thread has been doing that. However, there is no example code and this will require some quite complicated coding. So not recommended for beginners. If you are running out of pins for things, it\u0027s easier to just buy an arduino mega for ~$10 on ebay.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003EFor those who prefer to work with Atmel microprocessors directly and without the overhead of the Arduino GUI, I\u0027ve ported Zitronen\u0027s Demo8 to native AVR C:\u003Cp\u003E\u003Ca href=\u0022https://github.com/MrOnak/avr_KSPIO\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/MrOnak/avr_KSPIO\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEnjoy\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAdded to first post!\u003C/p\u003E\n"},{"CreatedByName":"Josh Hawley","CreatedById":98666,"CreatedDateTime":"2014-09-22T02:10:36Z","Content":"\n\u003Cp\u003EAny issues with me hacking up your code to make a Netduino version?\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-09-22T08:49:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Josh Hawley\u0022 data-cite=\u0022Josh Hawley\u0022\u003E\u003Cdiv\u003EAny issues with me hacking up your code to make a Netduino version?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust in case you\u0027re refering to my ported code, go ahead. The code is released as Creative Common Attributions. As long as you keep a reference to me and Zitronen you\u0027re good to go. \u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EHowever\u003C/strong\u003E be aware the UART code I used is released under GPL, this affects the licensing that you can put your port under (no commercial products, etc). Just so you know.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-09-22T08:51:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jebidiah!\u0022 data-cite=\u0022Jebidiah!\u0022\u003E\u003Cdiv\u003ECan you use multiple arduinos at the same time if so how many? Thanks\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELike Zitronen said, you can have multiple Arduinos talk to each other via SPI or I\u00C3\u201A\u00C2\u00B2C but to be honest that\u0027s not really worth it. If you\u0027re simply running out of pins I highly recommend checking out how shift-registers work (74*595 if you need lots of outputs, 74*165 if you need lots of inputs). Those are cheaper than \u0022moar Arduinos\u0022 and essentially can be talked to with the SPI protocol. \u003C/p\u003E\u003Cp\u003EMaybe if you outline why you want to use more than one Arduinos in the first place I can give you an idea of how you might get around that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-22T12:17:05Z\u0022 title=\u002209/22/2014 12:17  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 22, 2014\u003C/time\u003E by MrOnak\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Josh Hawley","CreatedById":98666,"CreatedDateTime":"2014-09-22T14:06:31Z","Content":"\n\u003Cp\u003EHere is a great video on understanding outputs on shift registers:\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/videoseries?list=UU42d7zFnWU0dYVk_M0JED6w\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EAnd another one for inputs using shift registers. \u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/nXl4fb_LbcI?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-22T14:16:01Z\u0022 title=\u002209/22/2014 02:16  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 22, 2014\u003C/time\u003E by Josh Hawley\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Josh Hawley","CreatedById":98666,"CreatedDateTime":"2014-09-22T14:16:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003EJust in case you\u0027re refering to my ported code, go ahead. The code is released as Creative Common Attributions. As long as you keep a reference to me and Zitronen you\u0027re good to go. \u003Cp\u003E\u003Cstrong\u003EHowever\u003C/strong\u003E be aware the UART code I used is released under GPL, this affects the licensing that you can put your port under (no commercial products, etc). Just so you know.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGreat! I\u0027ll post here when I get it working.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-09-22T14:34:16Z","Content":"\n\u003Cp\u003EI know the video... its alright and it does explain shift registers okay, but honestly, using the 595\u0027s to control inputs is just plain wrong \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E the 165\u0027s are so much easier for that.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-09-22T15:53:51Z","Content":"\n\u003Cp\u003EIf you guys have any problems/suggestions with my code let me know. There are probably many bugs since I just hacked it together. It\u0027s a bit scary seeing people using it as some kind of standard, I\u0027m not even a software person!\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-09-22T17:23:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EIf you guys have any problems/suggestions with my code let me know. There are probably many bugs since I just hacked it together. It\u0027s a bit scary seeing people using it as some kind of standard, I\u0027m not even a software person!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh... don\u0027t worry too much about it, the code is alright to show what can be done. Anyone using it in a project will very likely adapt it to his / her own style anyway. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Josh Hawley","CreatedById":98666,"CreatedDateTime":"2014-09-25T18:30:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003EI know the video... its alright and it does explain shift registers okay, but honestly, using the 595\u0027s to control inputs is just plain wrong \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E the 165\u0027s are so much easier for that.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have never played with those, but now I want to \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EDo you have a source for these? Sparkfun does not carry them anymore, and the only other source I could find was in the EU.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-09-26T08:43:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Josh Hawley\u0022 data-cite=\u0022Josh Hawley\u0022\u003E\u003Cdiv\u003EI have never played with those, but now I want to \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003Cp\u003EDo you have a source for these? Sparkfun does not carry them anymore, and the only other source I could find was in the EU.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmm frankly speaking every electronic shop should have them, they\u0027re bread and butter ICs. That said Sparkfun and the likes will be much too expensive for simple components like that unless you\u0027re lucky. \u003C/p\u003E\u003Cp\u003EI got a pack of 50 74595\u0027s from ebay (seller from Hongkong, free shipping) for \u003Cem\u003Every\u003C/em\u003E little money. If you can wait a few weeks for the delivery to arrive I\u0027d say check there, its usually worth it (not always). In the case of the 50 74595\u0027s, they were cheaper than 10 ICs of the same kind if I had bought them locally. I doubt I\u0027ll ever need 50 pieces but hey... I can now afford to fry a few.\u003C/p\u003E\u003Cp\u003ECheck radioshack or your local equivalent if you can\u0027t find anything on ebay or you don\u0027t want to wait a few weeks. I\u0027ve also had good experience with more specialized shops for some components although I\u0027m not sure about shift-registers (but you\u0027ll find transistors, resistors, condensators and the like very cheap in car-hifi supplier shops for example).\u003C/p\u003E\u003Cp\u003ENote that virtually any *74*595 and *74*165 will do (595 for outputs, 165 for inputs). The letters before the \u002274\u0022 simply denote the manufacturer and the letters in between the numbers denote the manufacturing proces (TTL variants).\u003C/p\u003E\u003Cp\u003ERegarding the manufacturing process, if you can get \u0022HC\u0022 or \u0022HCT\u0022 variants, they\u0027re preferable (faster switching, less voltage sensitive) but in the end it won\u0027t matter much.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-26T09:28:16Z\u0022 title=\u002209/26/2014 09:28  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 26, 2014\u003C/time\u003E by MrOnak\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"drmag","CreatedById":114380,"CreatedDateTime":"2014-09-29T20:07:52Z","Content":"\n\u003Cp\u003ERe: SOI\u003C/p\u003E\u003Cp\u003EI\u0027ve finally gotten around to poking at this project again, and just updated myself on all the new comments. I saw someone do some rough calculations to extract the SOI from orbital parameters; looking through the API, I think we can get the SOI directly fairly easily. From the \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/API:CelestialBody\u0022 rel=\u0022external nofollow\u0022\u003EAPI documentation\u003C/a\u003E:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ECelestialBody Class\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E[TABLE=class: wikitable]\u003C/p\u003E\u003Cp\u003E[TR]\u003C/p\u003E\u003Cp\u003E[TH=bgcolor: #F2F2F2, align: center]Inherits[/TH]\u003C/p\u003E\u003Cp\u003E[TH=bgcolor: #F2F2F2, align: center]Implements[/TH]\u003C/p\u003E\u003Cp\u003E[/TR]\u003C/p\u003E\u003Cp\u003E[TR]\u003C/p\u003E\u003Cp\u003E[TD]UnityEngine.MonoBehaviour[/TD]\u003C/p\u003E\u003Cp\u003E[TD]ITargetable, IDiscoverable[/TD]\u003C/p\u003E\u003Cp\u003E[/TR]\u003C/p\u003E\u003Cp\u003E[/TABLE]\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003EA CelestialBody represents a \u003C/span\u003E\u003C/span\u003E\u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Celestials\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003Eplanet, moon, or star\u003C/span\u003E\u003C/span\u003E\u003C/a\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E that acts as a source of gravity and has some sphere of influence. You can find the CelestialBody whose sphere of influence you are currently in with the vessel.mainBody field.\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003EWe should be able to get to it by having another field in KSPSerialIO:\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E// Early on in the code, define a dictionary with all the possible spheres of influence\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003EDictionary\u0026lt;string, int\u0026gt; celestialBodies = new Dictionary\u0026lt;string, int\u0026gt;()\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E{\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E    {\u0022Kerbol\u0022, 0},\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E    {\u0022Kerbin\u0022, 1},\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E    {\u0022Mun\u0022, 2},\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E    {\u0022Minmus\u0022, 3}\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E    // etc.\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E};\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E// Add a field to the packet definition, maybe force an 8-bit value here?\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003Epublic int SOI;\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003EIn the packet packing section, add\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[COLOR=#000000][FONT=sans-serif]KSPSerialPort.VData.SOI =  celestialBodies[ActiveVessel.mainBody.name];[/FONT][/COLOR][COLOR=#000000][FONT=sans-serif]\u003Cbr\u003E[/FONT][/COLOR]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003EI\u0027m a Python guy, not much experience with C#, so I may have done some of this up incorrectly. We\u0027d also have to check to be sure we\u0027re getting the correct strings as used in mainBody.name, and perhaps add some logic to include a {\u0022No SOI\u0022, -1} pair (what does mainBody.name hold when not in any SOI? Is that even possible in KSP?) Anyone with some C# knowledge want to look into this and see if it works?\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003E:: forum is insisting on adding an extra CODE /CODE pair... no idea why. ::\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-29T21:40:20Z\u0022 title=\u002209/29/2014 09:40  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 29, 2014\u003C/time\u003E by drmag\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-09-30T23:09:59Z","Content":"\n\u003Cp\u003EYeah quite a few people have wanted a SOI thing. My original thinking was to use a 16 bit uint. So a value like 10300 means 1(Kerbol)03(planet 3, Kerbin)00(moon 0 or not near moon). I could pack it all into a byte, but this is more human readable and makes it easier if squad decide to add more bodies later.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-10-01T06:53:08Z","Content":"\n\u003Cp\u003EkOS is providing access to the current SOI - you might be able to borrow some code from there \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Murzyn","CreatedById":124279,"CreatedDateTime":"2014-10-02T17:42:54Z","Content":"\n\u003Cp\u003EHello\u003C/p\u003E\u003Cp\u003EI have a small issue with this plugin - input from Arduino isn\u0027t working, but my displays are working perfectly.\u003C/p\u003E\u003Cp\u003EI tried updating plugin and data structs in program, but it\u0027s still not working.\u003C/p\u003E\u003Cp\u003EAny ideas?\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-10-03T10:05:26Z","Content":"\n\u003Cp\u003EAre you using your own code or the demo code on the first post?\u003C/p\u003E\n"},{"CreatedByName":"jandcando","CreatedById":66121,"CreatedDateTime":"2014-10-04T21:02:50Z","Content":"\n\u003Cp\u003EI really like this mod, and I build a controller for it, but it doesn\u0027t work in .24. (it worked fine in .23.5) I have the latest version of the KSP side of the mod, and my Arduino code is a modified version of your code. I already added the pitch, heading, and roll float values to the vesselData struct, but it doesn\u0027t do anything in the game. Are there any other changes I need to make to the Arduino code besides that?\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-10-05T01:18:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003EkOS is providing access to the current SOI - you might be able to borrow some code from there \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the \u0022intelligence\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E. Since 0.25 is coming out soon, I\u0027ll wait till it comes out and see if there are any problems. If it works fine in 0.25 I will look into adding SOI output.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jandcando\u0022 data-cite=\u0022jandcando\u0022\u003E\u003Cdiv\u003EI really like this mod, and I build a controller for it, but it doesn\u0027t work in .24. (it worked fine in .23.5) I have the latest version of the KSP side of the mod, and my Arduino code is a modified version of your code. I already added the pitch, heading, and roll float values to the vesselData struct, but it doesn\u0027t do anything in the game. Are there any other changes I need to make to the Arduino code besides that?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou may need to look at the \u0022handshake\u0022 tab, since things have changed. It should look like this \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E// Handshake\u003Cbr\u003E\u003Cbr\u003Evoid Handshake(){\u003Cbr\u003E  digitalWrite(GLED,HIGH); \u003Cbr\u003E\u003Cbr\u003E  HPacket.id = 0;\u003Cbr\u003E  HPacket.M1 = 3;\u003Cbr\u003E  HPacket.M2 = 1;\u003Cbr\u003E  HPacket.M3 = 4;\u003Cbr\u003E\u003Cbr\u003E  KSPBoardSendData(details(HPacket));\u003Cbr\u003E  //Serial.println(F(\u0022KSP;0\u0022));  \u003Cbr\u003E  //delay(1000);\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAlso check your\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Estruct ControlPacket\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eis the same as the demo8 code, and lastly under \u0022ultilities\u0022 check initTxPackets, should be \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Evoid InitTxPackets() {\u003Cbr\u003E  HPacket.id = 0;  \u003Cbr\u003E  CPacket.id = 101;\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf that doesn\u0027t work post your debug log here.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-05T01:26:01Z\u0022 title=\u002210/05/2014 01:26  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 5, 2014\u003C/time\u003E by zitronen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"jandcando","CreatedById":66121,"CreatedDateTime":"2014-10-05T14:57:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EYou may need to look at the \u0022handshake\u0022 tab, since things have changed. It should look like this \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E// Handshake\u003Cbr\u003E\u003Cbr\u003Evoid Handshake(){\u003Cbr\u003E  digitalWrite(GLED,HIGH); \u003Cbr\u003E\u003Cbr\u003E  HPacket.id = 0;\u003Cbr\u003E  HPacket.M1 = 3;\u003Cbr\u003E  HPacket.M2 = 1;\u003Cbr\u003E  HPacket.M3 = 4;\u003Cbr\u003E\u003Cbr\u003E  KSPBoardSendData(details(HPacket));\u003Cbr\u003E  //Serial.println(F(\u0022KSP;0\u0022));  \u003Cbr\u003E  //delay(1000);\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAlso check your\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Estruct ControlPacket\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eis the same as the demo8 code, and lastly under \u0022ultilities\u0022 check initTxPackets, should be \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Evoid InitTxPackets() {\u003Cbr\u003E  HPacket.id = 0;  \u003Cbr\u003E  CPacket.id = 101;\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf that doesn\u0027t work post your debug log here.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk thanks for that, I\u0027m trying it out now!\u003C/p\u003E\u003Cp\u003EEDIT--Things are working now... Everything except throttle. I\u0027ll see if I can work it out myself.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-05T14:59:24Z\u0022 title=\u002210/05/2014 02:59  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 5, 2014\u003C/time\u003E by jandcando\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-10-05T22:15:21Z","Content":"\n\u003Cp\u003ETo enable throttle you need to edit the config file, see first post.\u003C/p\u003E\n"}]}