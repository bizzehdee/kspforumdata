{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":7,"Articles":[{"CreatedByName":"JackDugan","CreatedById":139522,"CreatedDateTime":"2015-04-20T20:45:40Z","Content":"\u003E \n\u003E Nice video, anyway, you seem to be puzzled about what post processing is. Post processing just means the effect is added to the frame after the frame is done rendering, like an image effect you\u0027d add in photoshop. The haze is done this way. This has two main implications:\n\u003E \n\u003E 1-The effect applies to everything and it\u0027s much easier to make it work with everything than setting up a separate shader for every element.\n\u003E \n\u003E 2-The effect is applied over a rendered image so this may not always play nice, clouds for example would turn completely blue the moment they pass in front of a mountain.\n\u003E \n\u003E It\u0027s mostly for debugging. The \u0022toggle postprocessing\u0022 button is the only one you need.\n\nThanks for the explanation! I figured it had something to do with \u0022after\u0022 just because \u0022post\u0022 was in it, although I didn\u0027t want to say anything I wasn\u0027t sure of in the video. I can\u0027t wait for more updates to the mod!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-20T23:52:08Z","Content":"I made a config tool, it allows you to change the atmosphere properties, generate new .raw files (this is the precomputed data that the shaders use to render the effect inexpensively in real-time) and an .xml file that goes into the mod folder.\n\nThis tool only works in dx11 because it uses compute shaders, it gives you a nice 3d preview, you just adjust the settings and hit generate, transfer the .raw files and the .xml file in the tool folder to the mod folder and you get a new atmosphere.\n\nYou can set it to work on any planet by typing it\u0027s name in the planet name field, the planet you choose gets the new atmosphere and the other planets retain stock atmosphere. However, most planets have their problems, laythe doesn\u0027t write to the depthbuffer so postprocessing is messed up and duna is messed up in several ways but it sort of works if you scale up the atmosphere. EVE seems to work well.\n\nRSS should now work ( I tested with 6.4x KSP and it works), however in my experience, it doesn\u0027t look good because these mods make the terrain extremely flat.\n\nTwo UI settings are very useful to both RSS and stock planets that aren\u0027t Kerbin, Atmosphere Global Scale allows you to modify the scale of the atmosphere, as if the planet was bigger or smaller for both the sky and the postprocessing, postprocessing scale is the same setting but for postprocessing only.\n\nBlack circle around the sun is fixed but may act up with some custom configs. Postprocessing is now enabled by default and doesn\u0027t mess up when switching scenes or opening map view.\n\nHere\u0027s an example of what you can do with the config tool:\n\n![GGCwDqj.jpg](http://i.imgur.com/GGCwDqj.jpg)\n\nAnd the result in KSP:\n\n![GEiwBoB.jpg](http://i.imgur.com/GEiwBoB.jpg)\n\n![yA9XJGW.jpg](http://i.imgur.com/yA9XJGW.jpg)\n\nHope you guys can come up with some good configs, I\u0027ll be adding the links and a few explanations in the OP shortly. Have fun.\n\nEdited: I also switched it to .NET 3.5 so this may fix a few issues some people are facing.\n\n**Edited \u003Ctime datetime=\u00222015-04-24T20:15:55Z\u0022 title=\u002204/24/2015 08:15  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 24, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-04-21T00:12:33Z","Content":"\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/-IpPPDYWexE?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"Thomas988","CreatedById":92699,"CreatedDateTime":"2015-04-21T00:31:51Z","Content":"\u003E \n\u003E [snip]\n\nWHAT EVEN IS KSP\n\nYou sir are amazing! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"SmallFatFetus","CreatedById":137860,"CreatedDateTime":"2015-04-21T00:52:55Z","Content":"I... What... \n\nWOW ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)![:confused:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif)\n\nThis would look amazing in jumbo 32! Also, can you post an album of descending to Eve with heavy purple haze? (heh)\n\nHave some rep!\n\nSmallFatFetus"},{"CreatedByName":"CalculusWarrior","CreatedById":58313,"CreatedDateTime":"2015-04-21T01:48:58Z","Content":"Wow, this update is fantastic!\n\n![oh4cR6J.png](http://i.imgur.com/oh4cR6J.png)\n\nIs there a fix for the \u0027pale blue sphere\u0027 which Kerbin turns into if you go too high?\n\n![5WRsxPb.png](http://i.imgur.com/5WRsxPb.png)"},{"CreatedByName":"daniel l.","CreatedById":57763,"CreatedDateTime":"2015-04-21T02:43:00Z","Content":"\u003E \n\u003E WHAT\n\u003E \\*falls out of chair and dies in amazement\\*\n\n\\*buries\\*"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-04-21T08:58:44Z","Content":"![VFAZX2C.jpg](http://i.imgur.com/VFAZX2C.jpg)\n\nImpressive. Seriously. Many thanks and kudos.\n\nI haven\u0027t time yet to try the tool to create new atmos, but I will post a little review as soon as I can.\n\nThings I still miss:\n\n- The effect in the map view.\n\n- It seems fully compatible now with EVE and WIP EVE, but still redender the scattering over the clouds, so you can\u0027t see the clouds if you aren\u0027t very, very close.\n\nCould you render the scatter \u0022under\u0022 the clouds layers? Or maybe over them, using the dispersion effect style over the physical objects? Is that possible?\n\n(I know I\u0027m requesting compatibility features with a bit outdated mod and his WIP version, so please don\u0027t be mad with me, lol)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-21T10:17:54Z","Content":"\u003E \n\u003E Things I still miss:\n\u003E \n\u003E - The effect in the map view.\n\u003E \n\u003E - It seems fully compatible now with EVE and WIP EVE, but still redender the scattering over the clouds, so you can\u0027t see the clouds if you aren\u0027t very, very close.\n\u003E \n\u003E Could you render the scatter \u0022under\u0022 the clouds layers? Or maybe over them, using the dispersion effect style over the physical objects? Is that possible?\n\u003E \n\u003E (I know I\u0027m requesting compatibility features with a bit outdated mod and his WIP version, so please don\u0027t be mad with me, lol)\n\nFor me personally, the effect in the map view is not a very important feature, especially since it hides the continents and makes it difficult to see where you\u0027re landing but it will be added after the mod works in scaled space. About the clouds, not sure, the way postprocessing works in unity it may not be possible. If I can get the clouds to write white to the depth buffer after everything else is done writing it\u0027ll work but I don\u0027t know if that\u0027s feasible, we\u0027ll see how it goes.\n\n\u003E \n\u003E Is there a fix for the \u0027pale blue sphere\u0027 which Kerbin turns into if you go too high?\n\nThis will be the object of the next update."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-21T10:52:30Z","Content":"\u003E \n\u003E I... What... \n\u003E WOW ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)![:confused:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif)\n\u003E \n\u003E This would look amazing in jumbo 32! Also, can you post an album of descending to Eve with heavy purple haze? (heh)\n\u003E \n\u003E Have some rep!\n\u003E \n\u003E SmallFatFetus\n\nI see what you did there.\n\nI made this config in two minutes so it doesn\u0027t look very good and the color and atmosphere height are way overdone but here you go:\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/TjZbb)\n\nobligatory album music\n\n\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/PQyGrPw8P50?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\n\nIf anyone wants to try this config or \u0022reverse-engineer\u0022 it [http://wikisend.com/download/727486/Eve%20haze%20config.zip](http://wikisend.com/download/727486/Eve%20haze%20config.zip)\n\n**Edited \u003Ctime datetime=\u00222015-04-21T22:43:09Z\u0022 title=\u002204/21/2015 10:43  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 21, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"iDInkeD06","CreatedById":141151,"CreatedDateTime":"2015-04-21T11:59:25Z","Content":"It\u0027s an incredible mod, but there are some bugs that make it difficult to use correctly. Maybe add the possibility to toggle the custom sunglare.\n\nI hope this mod will grow and i\u0027ll use it when more advanced,\n\nit looks pretty difficult so good luck ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"Sage","CreatedById":103634,"CreatedDateTime":"2015-04-21T12:06:57Z","Content":"\u003E \n\u003E I see what you did there.\n\u003E I made this config in two minutes so it doesn\u0027t look very good and the color and atmosphere height are way overdone but here you go:\n\u003E \n\u003E [http://imgur.com/a/TjZbb](http://imgur.com/a/TjZbb)\n\u003E \n\u003E obligatory album music\n\u003E \n\u003E \n\u003E \u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/PQyGrPw8P50?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\n\nThat green sunrise/sunset is perfect. Magic of wavelenghts ![:cool:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-21T12:24:30Z","Content":"\u003E \n\u003E It\u0027s an incredible mod, but there are some bugs that make it difficult to use correctly. Maybe add the possibility to toggle the custom sunglare.\n\u003E I hope this mod will grow and i\u0027ll use it when more advanced,\n\u003E \n\u003E it looks pretty difficult so good luck ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nWith the new version the sunglare toggles automatically, is the bug still happening in the new version? Also, the mod can\u0027t be \u0022used correctly\u0022 right now as there are many areas where it still doesn\u0027t work.\n\n\u003E \n\u003E That green sunrise/sunset is perfect. Magic of wavelenghts ![:cool:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif)\n\nYeah, physics are magic."},{"CreatedByName":"iDInkeD06","CreatedById":141151,"CreatedDateTime":"2015-04-21T12:52:19Z","Content":"The black circle doesn\u0027t appear anymore ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nOne return i can do, is the sun does not perfectly follow the movement of camera, it moves little in the direction of the movement then takes its place back, but it is made in a time very court, what gives the impression of a vibration of the sun when we move.\n\nAnd maybe this mod can be used with \u0022graphics pack\u0022, allowing to each to set some diffrents parameters to the atsmosphere"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-21T13:16:58Z","Content":"I added a new setting that allows the highest mountains to retain their colors, this allows for the snowy peaks to be seen from space, however it doesn\u0027t look very good because of the low-quality textures.\n\nBefore:\n\n![e1qdO8w.jpg](http://i.imgur.com/e1qdO8w.jpg)\n\nAfter:\n\n![Z6pMcpQ.jpg](http://i.imgur.com/Z6pMcpQ.jpg)\n\n\u003E \n\u003E The black circle doesn\u0027t appear anymore ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\u003E One return i can do, is the sun does not perfectly follow the movement of camera, it moves little in the direction of the movement then takes its place back, but it is made in a time very court, what gives the impression of a vibration of the sun when we move.\n\u003E \n\u003E And maybe this mod can be used with \u0022graphics pack\u0022, allowing to each to set some diffrents parameters to the atsmosphere\n\nYeah the movement thing is a well known issue, I\u0027m considering ways of fixing it. The graphics packs thing is the reason I made the config tool.\n\nEdited: I did some additional tweaking and I\u0027m going to need you guys to tell me which looks better.\n\nOld config:\n\n![dWCcKyr.jpg](http://i.imgur.com/dWCcKyr.jpg)\n\nNew config:\n\n![IBavitD.jpg](http://i.imgur.com/IBavitD.jpg)\n\nOld config from space:\n\n![ngW8nHR.jpg](http://i.imgur.com/ngW8nHR.jpg)\n\nNew config from space:\n\n![37Vx0MV.jpg](http://i.imgur.com/37Vx0MV.jpg)\n\n**Edited \u003Ctime datetime=\u00222015-04-21T13:41:42Z\u0022 title=\u002204/21/2015 01:41  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 21, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"SmallFatFetus","CreatedById":137860,"CreatedDateTime":"2015-04-21T14:47:57Z","Content":"\u003E \n\u003E I see what you did there.\n\u003E I made this config in two minutes so it doesn\u0027t look very good and the color and atmosphere height are way overdone but here you go:\n\u003E \n\u003E [http://imgur.com/a/TjZbb](http://imgur.com/a/TjZbb)\n\u003E \n\u003E obligatory album music\n\u003E \n\u003E \n\u003E \u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/PQyGrPw8P50?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\n\n\u0022you must spread some reputation around before giving it to blackrack again\u0022\n\nThat is spectacular! I love the sunrise/set in the last picture. How does this mod affect preformance? (compared to, say, EVE)\n\nNow I want to see Jool! Duna! Laythe! [TEKTO!](https://forum.kerbalspaceprogram.com/threads/104280-0-90-Outer-Planets-Mod-%281-6-5%29-We-need-help-writing-science-blurbs-for-Urlum-s-moons!-29-Mar) ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nThank you so much for bringing this into my life!\n\nSmallFatFetus\n\n**Edited \u003Ctime datetime=\u00222015-04-21T14:58:27Z\u0022 title=\u002204/21/2015 02:58  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 21, 2015\u003C/time\u003E by SmallFatFetus**"},{"CreatedByName":"SpeedyB","CreatedById":76386,"CreatedDateTime":"2015-04-21T16:30:49Z","Content":"I think the new config is a bit better. It allows some more detail to show through the distance fog. It also gives the surface of the planet more contrast while in orbit."},{"CreatedByName":"Endersmens","CreatedById":80723,"CreatedDateTime":"2015-04-21T16:43:01Z","Content":"This is amazing. Will be sure to check it out later."},{"CreatedByName":"Errol","CreatedById":118622,"CreatedDateTime":"2015-04-21T16:43:10Z","Content":"I would like cast my vote on the new .cfg in both comparisons. Loving the work you are doing with this mod!"},{"CreatedByName":"Friedrich Nietzsche","CreatedById":106208,"CreatedDateTime":"2015-04-21T16:48:18Z","Content":"Hi,\n\nI\u0027ve tried out the mod today and I noticed some weird circles on the sky. Anyone else has this issue?\n\n[http://i.imgur.com/vfSTytA.png](http://i.imgur.com/vfSTytA.png)"},{"CreatedByName":"Errol","CreatedById":118622,"CreatedDateTime":"2015-04-21T16:51:18Z","Content":"Which version of the mod are you using? That was supposed to be fixed a few versions ago. Try installing the latest version (v.012) and see if that helps.\n\nIf you are already running the latest version, your issue is above my pay-grade."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-21T17:41:55Z","Content":"\u003E \n\u003E \u0022you must spread some reputation around before giving it to blackrack again\u0022\n\u003E That is spectacular! I love the sunrise/set in the last picture. How does this mod affect preformance? (compared to, say, EVE)\n\u003E \n\u003E Now I want to see Jool! Duna! Laythe! [TEKTO!](https://forum.kerbalspaceprogram.com/threads/104280-0-90-Outer-Planets-Mod-%281-6-5%29-We-need-help-writing-science-blurbs-for-Urlum-s-moons!-29-Mar) ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\u003E \n\u003E Thank you so much for bringing this into my life!\n\u003E \n\u003E SmallFatFetus\n\nGood to see you\u0027re enjoying this. Performance seems to be different for every PC and it may play weird because of othermods so you\u0027re going to have to test it yourself.\n\n\u003E \n\u003E I think the new config is a bit better. It allows some more detail to show through the distance fog. It also gives the surface of the planet more contrast while in orbit.\n\nMy thoughts exactly.\n\n\u003E \n\u003E I would like cast my vote on the new .cfg in both comparisons. Loving the work you are doing with this mod!\n\nThanks, so which .cfg do you like more?\n\n\u003E \n\u003E Hi,\n\u003E I\u0027ve tried out the mod today and I noticed some weird circles on the sky. Anyone else has this issue?\n\u003E \n\u003E [http://i.imgur.com/vfSTytA.png](http://i.imgur.com/vfSTytA.png)\n\nI can see you\u0027re using the newest version but this was supposed to be fixed a few versions ago, if you have a mod that forces anisotropic filtering to apply to everything it might bring it back, or maybe you\u0027re forcing aniso through the drivers?"},{"CreatedByName":"Errol","CreatedById":118622,"CreatedDateTime":"2015-04-21T18:02:47Z","Content":"I like your new .cfgs better. Both of them."},{"CreatedByName":"Friedrich Nietzsche","CreatedById":106208,"CreatedDateTime":"2015-04-21T18:18:07Z","Content":"\u003E \n\u003E Which version of the mod are you using? That was supposed to be fixed a few versions ago. Try installing the latest version (v.012) and see if that helps.\n\u003E If you are already running the latest version, your issue is above my pay-grade.\n\n\u003E \n\u003E I can see you\u0027re using the newest version but this was supposed to be fixed a few versions ago, if you have a mod that forces anisotropic filtering to apply to everything it might bring it back, or maybe you\u0027re forcing aniso through the drivers?\n\nThanks you two!\n\nYes, I was forcing AF over driver. Turning it off fixed it, thanks!"},{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-04-21T20:11:52Z","Content":"\u003E \n\u003E i see what you did there.\n\u003E I made this config in two minutes so it doesn\u0027t look very good and the color and atmosphere height are way overdone but here you go:\n\u003E \n\u003E [http://imgur.com/a/tjzbb](http://imgur.com/a/tjzbb)\n\u003E \n\u003E obligatory album music [https://www.youtube.com/watch?v=pqygrpw8p50](https://www.youtube.com/watch?v=pqygrpw8p50)\n\nThis is what eve *should* look like! Wow!\n\n**Edited \u003Ctime datetime=\u00222015-04-21T20:16:42Z\u0022 title=\u002204/21/2015 08:16  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 21, 2015\u003C/time\u003E by skykooler**"}]}