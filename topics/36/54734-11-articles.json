{"TopicId":54734,"ForumId":36,"TopicTitle":"[1.2.0] Toolbar 1.7.13 - Common API for draggable/resizable buttons toolbar","CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2013-11-29T22:39:58Z","PageNum":11,"Articles":[{"CreatedByName":"MrWizerd","CreatedById":106063,"CreatedDateTime":"2014-04-20T19:14:05Z","Content":"\n\u003Cp\u003EHello all, I want to start by saying I am a complete NOOB at this, that includes C#... I have been trying to add toolbar to the protractor module and I am positive I have borked things pretty bad. When I run debug it pops one error message about\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eclass ProtractorButtton : MonoBehavior\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eregaurding the MonoBehavior...\u003C/p\u003E\u003Cp\u003EI created a fork at \u003Ca href=\u0022https://github.com/mrwizerd/protractor\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/mrwizerd/protractor\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EMy first goal was to get toolbar in and working, then figure out how to remove the old toolbutton. Any help would be appreciated.\u003C/p\u003E\u003Cp\u003EI am not sure if it will find other problems, but if I can figure out how to get it in then how to get the rest out... I am a total noob though so I don\u0027t know if I will be successful.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-20T21:38:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrWizerd\u0022 data-cite=\u0022MrWizerd\u0022\u003E\u003Cdiv\u003EHello all, I want to start by saying I am a complete NOOB at this, that includes C#...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think you should seek help in creating KSP plugins in the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/forums/30\u0022 rel=\u0022external nofollow\u0022\u003Eappropriate forum\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"MrWizerd","CreatedById":106063,"CreatedDateTime":"2014-04-21T02:54:20Z","Content":"\n\u003Cp\u003EWell, unfortunately, I was unsure as to were to go. I had hoped, that I could get help here to add toolbar to this mod. Unfortunately the creator of the mod was not available to help so I figured I would try on my own. I don\u0027t wish to be rude, nor offend anyone I am just at a loss. The documentation that is available, shows that this is how to add the toolbar to a mod with instructions to add the line with monobehavior and though I doubt it was my only mistake, it was the only thing that Visual Studio complained about when I debugged. Anyways, I will seek help elsewhere, sorry for the inconvenience.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T03:01:26Z","Content":"\n\u003Cp\u003EI\u0027m sorry if my previous comment sounded harsh, I certainly didn\u0027t mean to offend. I just don\u0027t think this is the right place or thread to seek help in programming KSP plugins, even with the mild Toolbar Plugin relevance.\u003C/p\u003E\n"},{"CreatedByName":"Amaroq","CreatedById":57607,"CreatedDateTime":"2014-04-21T07:32:21Z","Content":"\n\u003Cp\u003EHey blizzy, you might want to add \u0022Science Alert\u0022 to your list of Toolbar-clients; he\u0027s making some interesting use of it as an indicator light.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T12:46:14Z","Content":"\n\u003Cp\u003EThanks, I haven\u0027t added it yet because it looked like it was still a work in progress. It seems to be more complete now on a closer look. I just wish he would make use of the new PopupMenuDrawable feature instead of rolling his own drop-down menu :-/\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-04-21T14:02:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EI just wish he would make use of the new PopupMenuDrawable feature instead of rolling his own drop-down menu :-/\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHi Blizzy, thanks for adding ScienceAlert your list. I didn\u0027t end up going with PopupMenuDrawable because it doesn\u0027t offer any advantage over IDrawable in my case.\u003C/p\u003E\u003Cp\u003EHere\u0027s what PopupMenuDrawable and my IDrawable implementation look like side-by-side:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i549.photobucket.com/albums/ii371/Trigsby/PopupMenudrawable-vs-custom.png\u0022 alt=\u0022PopupMenudrawable-vs-custom.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EThe skin of PopupMenuDrawable can\u0027t be changed, and does not change with the button skins. Since I designed ScienceAlert to look as stock as possible, it was instantly jarring when compared to the options window\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Eit doesn\u0027t give you an option on placement. Feedback from my development thread made it clear consistent placement was desirable\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Eit will display either a button or a line. There\u0027s no opportunity to label anything unless I want it to be indistinguishable from a button\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Eit will only let you add buttons, not remove them. Although I could recreate it every time a new experiment changed status while it was visible, that feels like coding my way around an oversight than a good solution\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe actual implementation of PopupMenuDrawable is hidden so it can\u0027t be fixed or customized in any way\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T14:08:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003Eit doesn\u0027t give you an option on placement. Feedback from my development thread made it clear consistent placement was desirable\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPositioning is determined by the drawable mechanism itself. It doesn\u0027t matter what the actual drawable is displaying.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003Eit will display either a button or a line. There\u0027s no opportunity to label anything unless I want it to be indistinguishable from a button\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot sure what you mean here. Are you talking about the \u0022Available Experiments\u0022 label?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003Eit will only let you add buttons, not remove them. Although I could recreate it every time a new experiment changed status while it was visible, that feels like coding my way around an oversight than a good solution\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt is indeed intended to be recreated every time you need something changed.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EThe actual implementation of PopupMenuDrawable is hidden so it can\u0027t be fixed or customized in any way\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI usually make things private/internal from the start, then gradually open up once I figure out what\u0027s necessary. So just speak up and we\u0027ll see \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Amaroq","CreatedById":57607,"CreatedDateTime":"2014-04-21T15:02:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003Eit doesn\u0027t give you an option on placement. Feedback from my development thread made it clear consistent placement was desirable\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBlizzy, in particular, what was happening there was, if you place Toolbar adjacent to a stock display, e.g., directly underneath the altimeter .. then with a \u0022short\u0022 window, such as his 1-button case, it would appear above, overwriting the altimeter .. with a \u0022tall\u0022 window, it would appear below. More predictability was desirable given the frequency with which Science Alert gets used! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T15:06:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Amaroq\u0022 data-cite=\u0022Amaroq\u0022\u003E\u003Cdiv\u003Ethen with a \u0022short\u0022 window, such as his 1-button case, it would appear above, overwriting the altimeter\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, I see. Perhaps I should add some code to the drawable positioning so that it will never block the altimeter (and other important GUI features.)\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-04-21T16:17:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003ENot sure what you mean here. Are you talking about the \u0022Available Experiments\u0022 label?\u003C/div\u003E\u003C/blockquote\u003EIn this case yes, but goes for any contents. There isn\u0027t any visible indication of which button opened the popup menu. Let me illustrate with a contrived example:\u003Cp\u003E\u003Ca href=\u0022http://s549.photobucket.com/user/Trigsby/media/which_button_nobody_knows.png.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i549.photobucket.com/albums/ii371/Trigsby/which_button_nobody_knows.png\u0022 alt=\u0022which_button_nobody_knows.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EWhich \u0022plugin\u0022 opened that menu, and how do I close it? My main issue with it isn\u0027t that though; it\u0027s that you can\u0027t customize it at all. It looks very ... utilitarian. How readable is it if it appeared over a GUI element?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://puu.sh/8hDHV.jpg\u0022 alt=\u00228hDHV.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ENot great. It could be handy for a quick debug menu (in fact, my debug menu could have been done more easily this way) but it doesn\u0027t fit with the rest of the game\u0027s style. \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EPositioning is determined by the drawable mechanism itself. It doesn\u0027t matter what the actual drawable is displaying.\u003C/div\u003E\u003C/blockquote\u003EYes it does. The drawable is expected to return the rect it used. If that rect can change, drawable can choose a new location under the right circumstances. Let\u0027s say I\u0027ve got three experiments available. A fourth just became available! Recreate the menu, add the extra option, and ..\u003Cp\u003E\u003Cimg src=\u0022http://i549.photobucket.com/albums/ii371/Trigsby/drawable_repositions_rect.png\u0022 alt=\u0022drawable_repositions_rect.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EOf course, the moment the user clicks any of those buttons and it gets removed from the list, the popup will jump back to the previous position because it\u0027ll fit there now. You can see how a user who\u0027s likely running through the list of experiments could be irritated with that. This alone is a dealbreaker in my case\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EI usually make things private/internal from the start, then gradually open up once I figure out what\u0027s necessary. So just speak up and we\u0027ll see \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003EI asked about why you hide the texture and forced modders to go through GameDatabase once. I thought it was just an oversight. I was still unable to convince you and had to use an ugly hack and cause thousands of unnecessary string reference comparisons per second to make ScienceAlert\u0027s animation work \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T16:57:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EThere isn\u0027t any visible indication of which button opened the popup menu.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is correct, and I\u0027d agree that this needs to be worked on (in the Toolbar Plugin itself.)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EThe drawable is expected to return the rect it used. If that rect can change, drawable can choose a new location under the right circumstances. ... Of course, the moment the user clicks any of those buttons and it gets removed from the list, the popup will jump back to the previous position because it\u0027ll fit there now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s not what I actually meant. I was under the impression that you didn\u0027t use the PopupMenuDrawable because one of the reasons was that its positioning was not always the same. So I was trying to point out that the positioning is not done by the PopupMenuDrawable itself, but the drawable mechanism as a whole, regardless of what actual drawable you\u0027re implementing.\u003C/p\u003E\u003Cp\u003EAnyway, I see your point there. The current positioning mechanism is meant more for sporadic use, which in its current implementation gets in the way when the drawable gets interacted with more often (such as in your case with the experiments buttons.) I think I should modify it to some sort of \u0022prefer last position\u0022 kind of way. It would position things like it does right now, moving them if they don\u0027t fit. But the next time the drawable needs to be displayed, it would position it the same way as before, as long as it fits there, only moving it if necessary.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EI asked about why you hide the texture and forced modders to go through GameDatabase once. I thought it was just an oversight. I was still unable to convince you and had to use an ugly hack and cause thousands of unnecessary string reference comparisons per second to make ScienceAlert\u0027s animation work \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually I don\u0027t really see the point with animated toolbar buttons, but that\u0027s maybe just me. I\u0027m perfectly fine with buttons that permanently change their icon to represent some state to notify the user, but I think doing animations is going overboard.\u003C/p\u003E\u003Cp\u003EI haven\u0027t looked at the code you did for animations, but you could also use some sort of state machine that uses ints instead of strings to represent the current animation frame.\u003C/p\u003E\u003Cp\u003EAs for not allowing access to the actual Texture2D object, that is one of the things I mentioned keeping private at first. I don\u0027t like the idea having developers modify random textures without the Toolbar Plugin noticing. I\u0027d rather make them go through a well-defined API.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-04-21T17:47:41Z","Content":"\n\u003Cp\u003EI use an animation to get the player\u0027s attention. The sound of rocket engines or chatterer can easily drown out the rather subtle bubble sound. But why put limits on it? \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EI haven\u0027t looked at the code you did for animations, but you could also use some sort of state machine that uses ints instead of strings to represent the current animation frame.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOf course I use an int. And at some point that int has to turn into a string to pass into IButton.TexturePath, and then TexturePath will compare that string to every string in GameDatabase one at a time until it gets a hit. That\u0027s exactly my problem with it.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EAs for not allowing access to the actual Texture2D object, that is one of the things I mentioned keeping private at first. I don\u0027t like the idea having developers modify random textures without the Toolbar Plugin noticing. I\u0027d rather make them go through a well-defined API.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhy wouldn\u0027t the toolbar plugin notice? Why does the toolbar care what the texture is? What\u0027s wrong with a public property?\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T18:00:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EI use an animation to get the player\u0027s attention. The sound of rocket engines or chatterer can easily drown out the rather subtle bubble sound. But why put limits on it?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBecause there is no way for the player to turn stuff down if it gets annoying. If I go and add a nice button icon animation feature to the Toolbar, I\u0027m almost 100% sure we\u0027ll see blinking and flashing buttons in no time. The next thing I see me adding then is an option for players to turn off animations. Of course not for all buttons at once, but for specific buttons. Things tend to spiral out of control pretty quickly if there are no restrictions.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003Eand then TexturePath will compare that string to every string in GameDatabase one at a time until it gets a hit.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt doesn\u0027t do that. It uses GameDatabase.Instance.GetTexture(\u0022...\u0022), and if that method doesn\u0027t use a hash map, then Squad is doing something fundamentally wrong.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EWhy does the toolbar care what the texture is? What\u0027s wrong with a public property?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt does not care. I just don\u0027t like things like these being changed behind my back.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-04-21T18:26:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EBecause there is no way for the player to turn stuff down if it gets annoying. If I go and add a nice button icon animation feature to the Toolbar, I\u0027m almost 100% sure we\u0027ll see blinking and flashing buttons in no time. The next thing I see me adding then is an option for players to turn off animations. Of course not for all buttons at once, but for specific buttons. Things tend to spiral out of control pretty quickly if there are no restrictions.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUh ... shouldn\u0027t that be between the developers of the mod and their users? Why would you care? Why would you need to police the animations yourself? I\u0027m not talking about adding an animation feature, I\u0027m talking about letting a modder assign a texture with a public Texture2D property instead of making them give you a string and the toolbar fishing it out of GameDatabase. You really have no way to stop anybody from animating their buttons if they want to. You\u0027re just punishing the player by harming performance \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EIt doesn\u0027t do that. It uses GameDatabase.Instance.GetTexture(\u0022...\u0022), and if that method doesn\u0027t use a hash map, then Squad is doing something fundamentally wrong.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUh, that\u0027s \u003Cem\u003Eexactly\u003C/em\u003E what it does. TexturePath takes a string, gives the string to GameDatabase and GetTexture looks through \u003Cstrong\u003ESystem.Collections.List\u0026lt;GameDatabase.TextureInfo\u0026gt;\u003C/strong\u003E one by one doing a comparison on the texture\u0027s url. You can access this list directly yourself and see.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EIt does not care. I just don\u0027t like things like these being changed behind my back.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat? Is setting an IButton\u0027s TexturePath to something different \u0022changing stuff behind your back\u0022 too? Are we talking about the same thing? Is there a technical reason why TexturePath can take a string and notify the toolbar of a change but a Texture property can\u0027t take a Texture2D and do the same? Maybe I\u0027m misunderstanding the API in some way\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T18:46:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EYou\u0027re just punishing the player by harming performance\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot the way you make it seem with \u0022thousands of unnecessary string reference comparisons per second.\u0022 Of course I\u0027m holding onto the Texture2D object as long as the IButton.TexturePath does not change. I\u0027m not looking up all buttons\u0027 textures every single frame.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EYou really have no way to stop anybody from animating their buttons if they want to.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is correct. But that doesn\u0027t mean I have to open up API that I don\u0027t want to open up.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EGetTexture looks through \u003Cstrong\u003ESystem.Collections.List\u0026lt;GameDatabase.TextureInfo\u0026gt;\u003C/strong\u003E one by one doing a comparison on the texture\u0027s url. You can access this list directly yourself and see.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can, but that doesn\u0027t really help because I don\u0027t have the source of GetTexture() to look at. If you believe Squad doesn\u0027t use some sort of hash map there and is hurting performance, you should file a bug report with them.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EIs there a technical reason why TexturePath can take a string and notify the toolbar of a change but a Texture property can\u0027t take a Texture2D and do the same?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can modify the texture\u0027s contents directly.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-04-21T19:55:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003ENot the way you make it seem with \u0022thousands of unnecessary string reference comparisons per second.\u0022 Of course I\u0027m holding onto the Texture2D object as long as the IButton.TexturePath does not change. I\u0027m not looking up all buttons\u0027 textures every single frame.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, I mean in the case of somebody doing an animated button. The only person who suffers is the player, and your fears that all buttons will become animated are irrelevant because that capability already exists and has been used. Either you prevent it and interested modders will find an alternative, or you allow it to occur and mod users will choose for themselves what they prefer. \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EI can, but that doesn\u0027t really help because I don\u0027t have the source of GetTexture() to look at. If you believe Squad doesn\u0027t use some sort of hash map there and is hurting performance, you should file a bug report with them.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EScienceAlert accesses that list directly and places textures in there. It should be apparent that Squad uses no hash map. You don\u0027t need the source of GetTexture to know that a public list is no hash map. I go right from adding items to the list to assigning a toolbar texture and it works. If Squad used some kind of hash map and rebuilt it somewhere, that wouldn\u0027t work.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EYou can modify the texture\u0027s contents directly.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EEvery texture you use is kept in a public list so trying to prevent modders from changing a texture is like trying to hold back a river with your hands. I can, of course, always change the texture myself without informing the toolbar at any time. That\u0027s why it\u0027s surprising to hear how vehement you are against \u0022mods changing the texture behind your back\u0022. You realize that adding such a property \u003Cem\u003Edoes the exact opposite thing\u003C/em\u003E right? You\u0027ll be informed any time the plugin wants the texture to change\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ETexture2D tex = GameDatabase.Instance.GetTexture(\u0022000_Toolbar/folder\u0022, false);\u003Cbr\u003E\u003Cbr\u003Eif (tex == null)\u003Cbr\u003E    Log.Error(\u0022Toolbar tex is null\u0022);\u003Cbr\u003E\u003Cbr\u003Evar pixels = tex.GetPixels32();\u003Cbr\u003E\u003Cbr\u003Efor (int i = 0; i \u0026lt; pixels.Length; \u002B\u002Bi)\u003Cbr\u003E{\u003Cbr\u003E    var c = pixels[i];\u003Cbr\u003E\u003Cbr\u003E    pixels[i] = new Color((1f - c.r / 255f), 1f - c.g / 255f, 1f - c.b / 255f, 0.5f);\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Etex.SetPixels32(pixels);\u003Cbr\u003Etex.Apply();\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EThat is correct. But that doesn\u0027t mean I have to open up API that I don\u0027t want to open up.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFair enough. It\u0027s your mod. It\u0027s not your right to opening it that I question, I just don\u0027t agree with the reasons that you\u0027re giving. They don\u0027t make sense to me. It\u0027s apparent that you don\u0027t see any logic fault in your argument so I won\u0027t argue any further. Thanks for a great mod\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T20:23:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EScienceAlert accesses that list directly and places textures in there. It should be apparent that Squad uses no hash map. You don\u0027t need the source of GetTexture to know that a public list is no hash map.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe way you describe it makes it apparent, of course. It didn\u0027t occur to me to place textures into that list directly, because that list should have been private from the get go. So this is where my previous statement comes in, that is, Squad is doing something wrong there. Access to an internal list like that should never be granted directly.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EEvery texture you use is kept in a public list so trying to prevent modders from changing a texture is like trying to hold back a river with your hands.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI know that. Still it doesn\u0027t mean I need to open up specific API. If you want to modify it by fetching it from the GameDatabase first, please do so. If you want to use reflection to put it directly into the Toolbar Plugin\u0027s structures, then by any means, please do it. But don\u0027t complain later if something breaks for any reason.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EIt\u0027s not your right to opening it that I question\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot quite, but you\u0027re kind of pressuring to open up API to accomplish things that \u0022can be achieved using different tools anyway\u0022 (my words.) As stated above, I am aware that the textures can be changed without me ever noticing it. I\u0027m not happy about that, quite to the contrary - I\u0027d rather have them be immutable, or have developers jump through some other hoops to be able to change them. But at least I can make Toolbar API users go into some direction by not allowing access to the textures directly.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-04-21T21:14:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EThe way you describe it makes it apparent, of course. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI thought I made it clear I knew exactly what I was talking about. You didn\u0027t even look into it?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EBut at least I can make Toolbar API users go into some direction by not allowing access to the textures directly.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWe just agreed you can\u0027t force them to do anything. All you can do is punish the player when the api user goes around you. You don\u0027t want them to go around you but you\u0027re also not willing to provide a method that lets them go through you either.\u003C/p\u003E\u003Cp\u003EI\u0027m not pressuring you to add a public texture property because it will let me do what I can\u0027t already, I\u0027m doing it because the average player can benefit from not wasting cpu time in a cpu-limited game on what I consider to be an API oversight. If that\u0027s not a good enough reason then we aren\u0027t going to be able to find any common ground.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T21:26:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EI\u0027m doing it because the average player can benefit from not wasting cpu time in a cpu-limited game\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI wonder what kind of CPU time waste you are thinking of here. I don\u0027t know the specifics of the animations you are doing, but I can\u0027t imagine they\u0027re beyond the 5-10 FPS range.\u003C/p\u003E\n"},{"CreatedByName":"Amaroq","CreatedById":57607,"CreatedDateTime":"2014-04-21T21:41:32Z","Content":"\n\u003Cp\u003EGentlemen, please don\u0027t take anything personally -- you are both very intelligent people with awesomely useful mods that have contributed a lot to the community. \u003C/p\u003E\u003Cp\u003EYou disagree about the API - and sadly, \u003Cstrong\u003Ein part due to my feedback to xEvilReeperx\u003C/strong\u003E during WIP testing; I feel some responsibility. \u003C/p\u003E\u003Cp\u003EI would prefer you two to get along, or if not, at least keep cool enough heads that you\u0027ve no forum-feud bad blood!\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-04-21T22:28:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EI wonder what kind of CPU time waste you are thinking of here. I don\u0027t know the specifics of the animations you are doing, but I can\u0027t imagine they\u0027re beyond the 5-10 FPS range.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s not a lot, but why waste it? \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Amaroq\u0022 data-cite=\u0022Amaroq\u0022\u003E\u003Cdiv\u003EYou disagree about the API - and sadly, in part due to my feedback \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually, this aspect of the api doesn\u0027t have anything to do with any feedback from ScienceAlert so you\u0027re in the clear. It\u0027s just a discussion\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-21T22:33:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EIt\u0027s not a lot, but why waste it?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf it\u0027s so much that it bothers you, there\u0027s always the possibility to use a hash map in the Toolbar Plugin.\u003C/p\u003E\n"},{"CreatedByName":"akherber","CreatedById":101253,"CreatedDateTime":"2014-04-25T01:20:33Z","Content":"\n\u003Cp\u003EBlizzy, is your page going to be down for awhile?\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-25T01:23:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022akherber\u0022 data-cite=\u0022akherber\u0022\u003E\u003Cdiv\u003EBlizzy, is your page going to be down for awhile?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can access the download page just fine here.\u003C/p\u003E\n"}]}