{"TopicId":89734,"ForumId":36,"TopicTitle":"Uncooperative models in model nodes","CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2014-11-08T04:51:38Z","PageNum":1,"Articles":[{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2014-11-08T04:51:38Z","Content":"\n\u003Cp\u003EI\u0027m running into what might be a bug when trying to swap textures on the Mk1 Pod\u0027s internal using model nodes. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@INTERNAL[mk1PodCockpit]\u003Cbr\u003E{\u003Cbr\u003E    MODEL {\u003Cbr\u003E        model = Squad/Spaces/mk1PodCockpit/model\u003Cbr\u003E        texture = model000 , aaa/model000\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThrows the following error\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at PartLoader.ReplaceTextures (UnityEngine.GameObject model, System.Collections.Generic.List\u00601 textureNames, System.Collections.Generic.List\u00601 newTextures) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at PartLoader.CompileModel (.UrlConfig cfg, .ConfigNode partCfg, Single scaleFactor) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at PartLoader.LoadInternalSpace (.UrlConfig urlConf) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at PartLoader\u002B.MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003EUnityEngine.MonoBehaviour:StartCoroutine_Auto(IEnumerator)\u003Cbr\u003EUnityEngine.MonoBehaviour:StartCoroutine(IEnumerator)\u003Cbr\u003E:MoveNext()\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003EThis happens when you try to replace *any* texture associated with that mu. It\u0027s not the texture or the load order as the same texture loads fine for the Mk 1-2 pod interior. The mu won\u0027t let you replace a texture with itself (\u0027texture = model000 , Squad/Spaces/mk1PodCockpit/model000\u0027). It\u0027s perfectly content loaded with a model node as long a you leave the textures alone. \u003C/p\u003E\u003Cp\u003EHas anyone run across this problem before? Or is there some part loader arcana that I\u0027m missing here?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-11-08T07:01:59Z","Content":"\n\u003Cp\u003EI do recall something about Internals being more limited with MODEL support, but nothing specific, sorry. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-11-08T07:34:36Z","Content":"\n\u003Cp\u003EI think you need to specify every textures associated with mk1PodCockpit in order for that to work. as you have right now, MODEL{} is only replacing 1 texture on mk1PodCockpit while the MU is asking for 7.\u003C/p\u003E\n"},{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2014-11-08T16:04:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EI do recall something about Internals being more limited with MODEL support, but nothing specific, sorry. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI thought of that too but tried loading the interior as a part model. While the cutaway effect looks *very* cool in the VAB it still won\u0027t remap the textures.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EI think you need to specify every textures associated with mk1PodCockpit in order for that to work. as you have right now, MODEL{} is only replacing 1 texture on mk1PodCockpit while the MU is asking for 7.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHaven\u0027t tried that yet. If that\u0027s the case it\u0027s weird that internals require every texture to be spec\u0027d for model nodes but part models only require the changed textures. \u003C/p\u003E\u003Cp\u003EWorst comes to worst I\u0027ll just dump the mu into a new folder and hex edit the texture names. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-11-08T16:10:34Z","Content":"\n\u003Cp\u003EEdit: I see the problem. I tend to specify all textures when I use MODEL{} so never encountered this issue before. \u003C/p\u003E\u003Cp\u003EI changed the Internal cfg with model{} like in your OP. the error occurs,\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-08T18:03:04Z\u0022 title=\u002211/08/2014 06:03  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 8, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2014-11-08T17:35:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EI changed the Internal cfg with model{} like in your OP. the error occurs, but the Internal still compiles and game loads as if nothing is wrong. no texture missing in game, no missing internals.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you pointing at new textures or the internal\u0027s existing textures? (Sorry I\u0027d check myself but am stuck at work on a Saturday.)\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-11-08T17:46:48Z","Content":"\n\u003Cp\u003EI\u0027m pointing at a texture from a different location\u003C/p\u003E\u003Cp\u003E\u003Cem\u003Etexture = model000, RetroFuture/Textures/rectFuselage_DIF\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EI get the same error about not able to replace texture at internal compile and internal is broken. (it appeared loading before because it was loading the JSI alternate Internal)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-08T18:03:43Z\u0022 title=\u002211/08/2014 06:03  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 8, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2014-11-08T17:52:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EI\u0027m pointing at a texture from a different location\u003Cp\u003E\u003Cem\u003Etexture = model000, RetroFuture/Textures/rectFuselage_DIF\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EI get the same error about not able to replace texture at internal compile; but mk1PodCockpit loads fine in game, correct internal with original textures.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESounds like it\u0027s just failing over to the textures specified in the mu \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-11-08T18:18:15Z","Content":"\n\u003Cp\u003Eit\u0027s a bit odd though, I think the MU itself may be a little messed up. \u003C/p\u003E\u003Cp\u003EI tried specifying all the textures\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODEL{\u003Cbr\u003E\tmodel = Squad/Spaces/mk1PodCockpit/model\u003Cbr\u003E\ttexture = model000, Squad/Parts/Command/probeStackSphere/model000\u003Cbr\u003E\ttexture = model001, Squad/Parts/Command/probeStackSphere/model000\t\u003Cbr\u003E\ttexture = model002, Squad/Parts/Command/probeStackSphere/model000\t\u003Cbr\u003E\ttexture = model003, Squad/Parts/Command/probeStackSphere/model000\u003Cbr\u003E\ttexture = model004, Squad/Parts/Command/probeStackSphere/model000\u003Cbr\u003E\ttexture = model005, Squad/Parts/Command/probeStackSphere/model000\u003Cbr\u003E\ttexture = model006, Squad/Parts/Command/probeStackSphere/model000\u003Cbr\u003E\ttexture = model007, Squad/Parts/Command/probeStackSphere/model000\t\u003Cbr\u003E\t}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand I still the same NullRef error as your OP.\u003C/p\u003E\u003Cp\u003EI use MODEL{} for pretty much everything, except some small props. don\u0027t recall running into this issue with any Internals I made so far.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-08T18:24:43Z\u0022 title=\u002211/08/2014 06:24  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 8, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-11-26T20:20:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022somnambulist\u0022 data-cite=\u0022somnambulist\u0022\u003E\u003Cdiv\u003EI\u0027m running into what might be a bug when trying to swap textures on the Mk1 Pod\u0027s internal using model nodes. \u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@INTERNAL[mk1PodCockpit]\u003Cbr\u003E{\u003Cbr\u003E    MODEL {\u003Cbr\u003E        model = Squad/Spaces/mk1PodCockpit/model\u003Cbr\u003E        texture = model000 , aaa/model000\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThrows the following error\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at PartLoader.ReplaceTextures (UnityEngine.GameObject model, System.Collections.Generic.List\u00601 textureNames, System.Collections.Generic.List\u00601 newTextures) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at PartLoader.CompileModel (.UrlConfig cfg, .ConfigNode partCfg, Single scaleFactor) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at PartLoader.LoadInternalSpace (.UrlConfig urlConf) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at PartLoader\u002B.MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003EUnityEngine.MonoBehaviour:StartCoroutine_Auto(IEnumerator)\u003Cbr\u003EUnityEngine.MonoBehaviour:StartCoroutine(IEnumerator)\u003Cbr\u003E:MoveNext()\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003EThis happens when you try to replace *any* texture associated with that mu. It\u0027s not the texture or the load order as the same texture loads fine for the Mk 1-2 pod interior. The mu won\u0027t let you replace a texture with itself (\u0027texture = model000 , Squad/Spaces/mk1PodCockpit/model000\u0027). It\u0027s perfectly content loaded with a model node as long a you leave the textures alone. \u003C/p\u003E\u003Cp\u003EHas anyone run across this problem before? Or is there some part loader arcana that I\u0027m missing here?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have done this before, experimentally as a proof of concept (because someone was saying it couldn\u0027t be done) and did successfully replace the Mk1 internal texture with something else. I think I used the same syntax you\u0027re trying there but I dont have that file anymore so can\u0027t double check. Maybe this is a new error in 0.25....\u003C/p\u003E\n"},{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2014-11-26T21:21:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwaster\u0022 data-cite=\u0022Starwaster\u0022\u003E\u003Cdiv\u003EI have done this before, experimentally as a proof of concept (because someone was saying it couldn\u0027t be done) and did successfully replace the Mk1 internal texture with something else. I think I used the same syntax you\u0027re trying there but I dont have that file anymore so can\u0027t double check. Maybe this is a new error in 0.25....\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI honestly gave up on it -- it simply refused to work no matter the load order, texture format, etc. Hitchiker interior behaves the same way. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"SuperRedNova","CreatedById":115837,"CreatedDateTime":"2015-04-01T20:23:58Z","Content":"\n\u003Cp\u003EI\u0027ll throw in my two cents on how I was able to fix this issue for myself. \u003C/p\u003E\u003Cp\u003EI was trying to make it so that KSP didn\u0027t have to load a texture that I made for multiple models multiple times.\u003C/p\u003E\u003Cp\u003EFirst of all, the part I was having trouble with had two materials:\u003C/p\u003E\u003Cp\u003EMaterial: One with the texture I didn\u0027t want to need to reload (ModelTexture)\u003C/p\u003E\u003Cp\u003EVariable: One without an assigned texture because the texture is just replaced in game anyways with a custom PartModule.\u003C/p\u003E\u003Cp\u003EHere is the MODEL node I had for the part:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODEL{\u003Cbr\u003Emodel = ModelRocketry/Parts/Structural/ModelTubeSmall/NewModel\u003Cbr\u003Eposition = 0.0, 0.0, 0.0\u003Cbr\u003Escale = 1.0, 1.0, 1.0\u003Cbr\u003Erotation = 0, 0, 0\u003Cbr\u003Etexture = ModelTexture , ModelRocketry/Parts/Aero/ModelFin/ModelTexture\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWith just this I was getting that annoying null reference error.\u003C/p\u003E\u003Cp\u003EHow I was able to fix this is giving the Variable material its own texture (just a small 1 x 1 white texture). I didn\u0027t actually need to put a \u0022texture =\u0022 for both of the textures and it compiled without any problems in KSP.\u003C/p\u003E\n"}]}