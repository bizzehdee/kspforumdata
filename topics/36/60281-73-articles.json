{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":73,"Articles":[{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-02-26T11:12:34Z","Content":"\n\u003Cp\u003E\nIt does not. The way this plugin receives data uses serial event handlers that only seem to function properly in win32.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve got a \u003Ca href=\u0022https://github.com/phardy/KSPSerialIO\u0022 rel=\u0022external nofollow\u0022\u003EKSPSerialIO fork\u003C/a\u003E that replaces the serial handling, and does work on Linux (and MacOS). I haven\u0027t been maintaining it much recently, and it\u0027s one or two releases out of date. Can get a new build uploaded if there\u0027s interest, though.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-03-04T03:00:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222968205\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488107554\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 26/02/2017 at 10:12 PM, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan get a new build uploaded if there\u0027s interest, though.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSorry for the delay, but I\u0027ve just updated my cross-platform fork for the latest plugin / KSP release. Note that I\u0027ve built it and tested that the demo sketch in KSPIODemo16 successfully handshakes on my Mac. Haven\u0027t done any further testing than that, but also have no reason to believe the rest won\u0027t work.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf you\u0027re interested in trying out KSPSerialIO on MacOS or Linux, you can get it from SpaceDock:\u00A0\u003Ca href=\u0022https://spacedock.info/mod/850/KSP%20Serial%20IO%20%28cross%20platform%29\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://spacedock.info/mod/850/KSP Serial IO (cross platform)\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n(ping \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/135673-denko666/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022135673\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/135673-denko666/\u0022 rel=\u0022\u0022\u003E@Denko666\u003C/a\u003E, who was interested in this last week)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-04T03:01:44Z\u0022 title=\u002203/04/2017 03:01  AM\u0022 data-short=\u00227 yr\u0022\u003EMarch 4, 2017\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"c4ooo","CreatedById":168905,"CreatedDateTime":"2017-03-05T18:51:38Z","Content":"\n\u003Cp\u003E\nSo, i have finally learned how to dock, with the power of locked screen mode. Since i am currently away from my hardware and cant test, could someone tell me how \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E behaves with the plugin? Is it relative to the orientation of the craft (like locked screen mode) or is it relative to the surface of kerbin? (Like all other screen modes). I think having a switch to toggle between absolute and relative \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E mode would be useful, could i accomplish relative \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E mode with something like:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(0,0,0);font-family:Arial, Helvetica, sans-serif;font-size:medium;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(250,250,250);float:none;\u0022\u003Ercs_x\u0027 = rcs_x*cos roll - rcs_y*sin(roll)\u00A0\u003C/span\u003E\u003Cbr style=\u0022color:rgb(0,0,0);font-family:Arial, Helvetica, sans-serif;font-size:medium;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(250,250,250);\u0022\u003E\u003Cspan style=\u0022color:rgb(0,0,0);font-family:Arial, Helvetica, sans-serif;font-size:medium;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(250,250,250);float:none;\u0022\u003Ercs_y\u0027 = rcs_x*sin roll \u002B rcs_y*cos(roll)\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nor am i misunderstanding how this works?\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-03-05T21:00:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222976656\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488739898\u0022 data-ipsquote-userid=\u0022168905\u0022 data-ipsquote-username=\u0022c4ooo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, c4ooo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0Is it relative to the orientation of the craft (like locked screen mode) or is it relative to the surface of kerbin? (Like all other screen modes).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe plugin doesn\u0027t make any changes to how \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E inputs are interpreted. \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E \u0027up\u0027 always translates to craft up. \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E \u0027foward\u0027 always translates to craft prograde. This is regardless of the camera mode. I\u0027ve never known \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E function to change with the camera view, either with this plugin or without.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe only benefit you should be getting from the fixed view is that your craft stays in the same place relative to the camera, so the \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E axes stay fixed from your perspective.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222976656\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488739898\u0022 data-ipsquote-userid=\u0022168905\u0022 data-ipsquote-username=\u0022c4ooo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, c4ooo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ncould i accomplish relative \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E mode with something like:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(0,0,0);font-family:Arial, Helvetica, sans-serif;font-size:medium;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(250,250,250);float:none;\u0022\u003Ercs_x\u0027 = rcs_x*cos roll - rcs_y*sin(roll)\u00A0\u003C/span\u003E\u003Cbr style=\u0022color:rgb(0,0,0);font-family:Arial, Helvetica, sans-serif;font-size:medium;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(250,250,250);\u0022\u003E\u003Cspan style=\u0022color:rgb(0,0,0);font-family:Arial, Helvetica, sans-serif;font-size:medium;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(250,250,250);float:none;\u0022\u003Ercs_y\u0027 = rcs_x*sin roll \u002B rcs_y*cos(roll)\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nor am i misunderstanding how this works?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis will get you some of the way towards \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E being relative to the centre of mass you\u0027re orbiting. But you also need to account for the Z axis. Sorry, it\u0027s way too early here for me to get my head around the maths.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-05T21:01:46Z\u0022 title=\u002203/05/2017 09:01  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 5, 2017\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"c4ooo","CreatedById":168905,"CreatedDateTime":"2017-03-05T23:28:58Z","Content":"\n\u003Cp\u003E\nHuh, you\u0027re right, camera mode doesn\u0027t affect how \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E works. (It is *always* relative to the craft).\n\u003C/p\u003E\n\u003Cp\u003E\nWhat\u0027s confusing though, is that sometimes I/K move the target_prograde vector up/down (respectively) and othertimes down/up (respectively)\u00A0\u00A0(when facing target vecotr).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-05T23:32:05Z\u0022 title=\u002203/05/2017 11:32  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 5, 2017\u003C/time\u003E by c4ooo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2017-03-06T21:14:27Z","Content":"\n\u003Cp\u003E\nAre you sure you are looking at target prograde and not target retrograde?\n\u003C/p\u003E\n"},{"CreatedByName":"c4ooo","CreatedById":168905,"CreatedDateTime":"2017-03-10T01:11:12Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977938\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488834867\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/6/2017 at 4:14 PM, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre you sure you are looking at target prograde and not target retrograde?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHeh, that must be it\u00A0\u003Cimg alt=\u0022:/\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon1.png\u0022 title=\u0022:/\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-03-13T12:45:55Z","Content":"\n\u003Cp\u003E\nThis evening I spent some time testing KSPSerialIO with some of my growing collection of microcontrollers on my Windows 10 install. There\u0027s been reports that it functions properly on 3rd-party Arduino compatible boards that use the ch340g chip for the serial interface, so I thought it\u0027d be worth confirming that and seeing what else I have that would be compatible.\n\u003C/p\u003E\n\u003Cp\u003E\nThe setup I\u0027m using:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nWindows 10 Home (fully up to date)\n\u003C/li\u003E\n\u003Cli\u003E\nKSP 1.2.2, no other mods installed. I tested both 32 and 64 bit binaries.\n\u003C/li\u003E\n\u003Cli\u003E\nKSPSerialIO 0.18.6.\n\u003C/li\u003E\n\u003Cli\u003E\nThe KSPIODemo16 test sketch \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/11842-zitronen/\u0026amp;do=hovercard\u0022 data-mentionid=\u002211842\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/11842-zitronen/\u0022 rel=\u0022\u0022\u003E@zitronen\u003C/a\u003E\u00A0wrote.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nTo test, I just ran the game and loaded the Kerbal X sitting on the launch pad. Confirmed that the game reported it had opened the appropriate serial port on screen, and the KSP.log file logged that it had sent and received handshake packets. I didn\u0027t attach\u00A0any other hardware to my microcontrollers. But the handshaking demonstrates successful serial comms in both directions - I\u0027d be very surprised if any of the other code is affected here.\n\u003C/p\u003E\n\u003Cp\u003E\nSo far I can report:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nA Teensy 3.2 works properly. Flashed it with the newest release of the Teensyduino package, only thing to worry about is ensuring the \u0022USB Type\u0022 in the Tools menu is set to \u0022Serial\u0022. This ensures the Teensy is set up with the USB Serial descriptor. I\u0027d never used this board on my Windows box before, so it came up as an unknown device and I let Windows 10 download and install its own drivers.\n\u003C/li\u003E\n\u003Cli\u003E\nAn Arduino Pro Mini (specifically, the \u003Ca href=\u0022https://www.sparkfun.com/products/11113\u0022 rel=\u0022external nofollow\u0022\u003E5V/16MHz board from SparkFun\u003C/a\u003E), with an FTDI cable. This setup also worked fine. My cable is specifically an \u003Ca href=\u0022http://www.ftdichip.com/Products/Cables/USBTTLSerial.htm\u0022 rel=\u0022external nofollow\u0022\u003EFTL-232R-5V\u003C/a\u003E, but any FT232-based device should be fine (and probably any of the FTDI serial chips, but don\u0027t blame me if that\u0027s wrong). Again, I plugged it in and let Windows 10 download and install its preferred drivers.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nI don\u0027t yet have a CH340G serial breakout, but will be able to test that some time this week. The next time I set this up I\u0027ll also plug in a Leonardo-compatible board and see if it has any success.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:10px;\u0022\u003E(Do\u00A0not expect any of these to work with my cross-platform KSPSerialIO fork on Windows yet, though. Also, weirdly, the Teensy didn\u0027t work for me on OSX at all, but both of these did run with my fork on Linux.)\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2017-03-13T15:42:49Z","Content":"\n\u003Cp\u003E\nHuh... you can receive the controls packet as well? Maybe fake some button or axis movement in the sketch just to be sure. But I guess if it receives the handshake then it should work.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDoes this mean the problem is limited to the uno\u0027s with their atmega based USB thingie?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"happytor","CreatedById":176124,"CreatedDateTime":"2017-03-22T01:40:46Z","Content":"\n\u003Cp\u003E\nHello\n\u003C/p\u003E\n\u003Cp\u003E\nI just found this plugin and I would love to use it but I am very new to arduino in general and Im not sure how to use this at all. Are there tutorials written anywhere? Thanks for making this plugin... looks very interesting\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nedit: I cant get my arduino to do anything, I load up the plugin on KSP and the arduino and the LEDs do not light up like it said they would in the tiny tutorial. Is there any other documentation??\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-22T01:57:12Z\u0022 title=\u002203/22/2017 01:57  AM\u0022 data-short=\u00227 yr\u0022\u003EMarch 22, 2017\u003C/time\u003E by happytor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-03-22T11:51:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222993259\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221490146846\u0022 data-ipsquote-userid=\u0022176124\u0022 data-ipsquote-username=\u0022happytor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, happytor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nedit: I cant get my arduino to do anything, I load up the plugin on KSP and the arduino and the LEDs do not light up like it said they would in the tiny tutorial. Is there any other documentation??\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCould you give some more details about your setup? What operating system are you using? What sort of Arduino? Which version of the plugin and demo sketch? Does the plugin log anything interesting in the KSP debug log? What does the plugin log to the screen when you first load the flight scene?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSorry, but to the best of my knowledge there\u0027s no decent docs for using this plugin apart from what you can gather from this thread. But I\u0027d love to be proven wrong!\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2017-03-22T16:57:52Z","Content":"\n\u003Cp\u003E\nSomeone mentioned making a video tutorial. Can\u0027t remember who or if it happened. If someone want to make one I\u0027ll put it on the first page.\n\u003C/p\u003E\n"},{"CreatedByName":"Sputnix","CreatedById":141420,"CreatedDateTime":"2017-03-23T09:32:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222993775\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221490201872\u0022 data-ipsquote-userid=\u002211842\u0022 data-ipsquote-username=\u0022zitronen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 hours ago, zitronen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSomeone mentioned making a video tutorial. Can\u0027t remember who or if it happened. If someone want to make one I\u0027ll put it on the first page.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah... that would be me :\u0027(\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUnfortunately, right when I was about to start the video series (I have about 3 or 4 planned) I had to move; so everything got packed up -- and I\u0027m in the process of moving again, so now everything is in storage.\n\u003C/p\u003E\n\u003Cp\u003E\nMight be another couple months till I get to it. I\u0027ll start working on some of the documentation though. Will send you a PM \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/11842-zitronen/\u0026amp;do=hovercard\u0022 data-mentionid=\u002211842\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/11842-zitronen/\u0022 rel=\u0022\u0022\u003E@zitronen\u003C/a\u003E once I have some stuff to share \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2017-03-24T22:08:05Z","Content":"\n\u003Cp\u003E\nCool thanks for that!\n\u003C/p\u003E\n"},{"CreatedByName":"happytor","CreatedById":176124,"CreatedDateTime":"2017-03-26T21:14:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222993555\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221490183463\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/22/2017 at 6:51 AM, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCould you give some more details about your setup? What operating system are you using? What sort of Arduino? Which version of the plugin and demo sketch? Does the plugin log anything interesting in the KSP debug log? What does the plugin log to the screen when you first load the flight scene?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSorry, but to the best of my knowledge there\u0027s no decent docs for using this plugin apart from what you can gather from this thread. But I\u0027d love to be proven wrong!\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHey thanks for the reply. I\u0027m on windows 10 so that might be the issue. Im trying to read old comments and see what helped other peoples builds working. I\u0027ve got a Teensy 3.6 which is a HID Arduino device. I\u0027m using the latest plugin downloaded through \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E with the latest Arduino sketch (13 I think). When I load up a ship I get the message that its connected to my \u003Cabbr title=\u0022Center of Mass\u0022\u003ECOM\u003C/abbr\u003E port on my arduino and that the IO is awake. If I turn the handshake ON my green LED lights up for a second and then turns off. If I turn handshake OFF, no LEDs light up ever. That\u0027s all I have been able to accomplish so far. Has anyone else been able to fix this problem? I just want to get some data out of the game and onto an OLED screen \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: MY log file:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n[LOG 16:01:35.342] KSPSerialIO: Version 0.18.3\u003Cbr\u003E\n[LOG 16:01:35.342] KSPSerialIO: Getting serial ports...\u003Cbr\u003E\n[LOG 16:01:35.342] KSPSerialIO: Output packet size: 191/255\u003Cbr\u003E\n[LOG 16:01:35.344] KSPSerialIO: Found 2 serial ports\u003Cbr\u003E\n[LOG 16:01:35.344] KSPSerialIO: trying default port COM8\u003Cbr\u003E\n[LOG 16:01:35.354] KSPSerialIO: Handshake disabled, using COM8\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSometimes it will randomly say:\n\u003C/p\u003E\n\u003Cp\u003E\n[LOG 16:01:57.738] KSPSerialIO: Port closed\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-26T21:17:41Z\u0022 title=\u002203/26/2017 09:17  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 26, 2017\u003C/time\u003E by happytor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2017-03-26T22:29:44Z","Content":"\n\u003Cp\u003E\nIf you are using a teensy, you will need to add struct __attribute__((__packed__)), because it is 32bit. \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257865\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57865-stibbons/\u0022 rel=\u0022\u0022\u003E@stibbons\u003C/a\u003E is the person you need to ask.\n\u003C/p\u003E\n"},{"CreatedByName":"happytor","CreatedById":176124,"CreatedDateTime":"2017-03-26T23:48:02Z","Content":"\n\u003Cp\u003E\nIm glad that you know what was wrong, I was about to lose my mind \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u00A0I only understand enough arduino code to do basic I/O so I\u0027m not sure where to put that line of code. If I add it to the first line of KSPIODemo13 tab it returns an error\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nKSPIODemo13:61: error: expected identifier before \u0027unsigned\u0027\u003Cbr\u003E\n\u00A0unsigned long deadtime, deadtimeOld, controlTime, controlTimeOld;\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0^\n\u003C/p\u003E\n\u003Cp\u003E\nKSPIODemo13:61: error: invalid type in declaration before \u0027,\u0027 token\u003Cbr\u003E\n\u00A0unsigned long deadtime, deadtimeOld, controlTime, controlTimeOld;\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0^\n\u003C/p\u003E\n\u003Cp\u003E\nexpected identifier before \u0027unsigned\u0027\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAny ideas?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-03-27T01:43:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222998412\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221490572082\u0022 data-ipsquote-userid=\u0022176124\u0022 data-ipsquote-username=\u0022happytor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, happytor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIm glad that you know what was wrong, I was about to lose my mind \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u00A0I only understand enough arduino code to do basic I/O so I\u0027m not sure where to put that line of code.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe KSPIODemo13 tab defines three structs, VesselData, HandShakePacket and ControlPacket. Each one of those is of the form\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Estruct\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EHandShakePacket\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// Lots of different fields in here\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E};\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nBy default, the build environment for the Teensy boards treats structs slightly differently than for the 8 bit CPUs in other Arduino boards. To tell the compiler to create the structs the same way, you need to add the \u0022packed\u0022 attribute. Do this by modifying\u00A0\u003Cstrong\u003Eall three\u003C/strong\u003E\u00A0structs like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Estruct\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EHandShakePacket\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// Lots of different fields in here\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E __attribute__ \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E((\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Epacked\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E));\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat should help ensure that the Teensy encodes data how the plugin expects it, and vice-versa.\n\u003C/p\u003E\n"},{"CreatedByName":"JONYghost","CreatedById":157216,"CreatedDateTime":"2017-03-27T09:46:27Z","Content":"\n\u003Cp\u003E\nHello,\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI am planning on controlling the pitch, yaw and roll of a vessel using a gyro connected to Arduino which gives those 3 values (processed) via serial port. (Throttle and more are also planned but not urgent). Is there a way this mod could allow me to control my vessel in such way?\n\u003C/p\u003E\n"},{"CreatedByName":"Mad_Scientist","CreatedById":145581,"CreatedDateTime":"2017-03-27T14:16:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222998739\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221490607987\u0022 data-ipsquote-userid=\u0022157216\u0022 data-ipsquote-username=\u0022JONYghost\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, JONYghost said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHello,\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI am planning on controlling the pitch, yaw and roll of a vessel using a gyro connected to Arduino which gives those 3 values (processed) via serial port. (Throttle and more are also planned but not urgent). Is there a way this mod could allow me to control my vessel in such way?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHi,\n\u003C/p\u003E\n\u003Cp\u003E\nI guess in this case gyro is used as normal potentiometer, so I don\u0027t see why it won\u0027t work with this library. If you quickly look into KSPIODemo 13 (link on the first page), library sends ControlPacket, which has values for pitch, yaw and roll (-1000 -\u0026gt; 1000). So, all you need to do is to modify file output.ino in the method controls() for reading input and then sending it back to the game.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"JONYghost","CreatedById":157216,"CreatedDateTime":"2017-03-27T14:34:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222998923\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221490624164\u0022 data-ipsquote-userid=\u0022145581\u0022 data-ipsquote-username=\u0022Mad_Scientist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 minutes ago, Mad_Scientist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi,\n\u003C/p\u003E\n\u003Cp\u003E\nI guess in this case gyro is used as normal potentiometer, so I don\u0027t see why it won\u0027t work with this library. If you quickly look into KSPIODemo 13 (link on the first page), library sends ControlPacket, which has values for pitch, yaw and roll (-1000 -\u0026gt; 1000). So, all you need to do is to modify file output.ino in the method controls() for reading input and then sending it back to the game.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the suggestion, I\u0027ll try it out \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"happytor","CreatedById":176124,"CreatedDateTime":"2017-03-28T20:37:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222998516\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221490579004\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/26/2017 at 8:43 PM, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe KSPIODemo13 tab defines three structs, VesselData, HandShakePacket and ControlPacket. Each one of those is of the form\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022kwd\u0022\u003Estruct\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EHandShakePacket\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// Lots of different fields in here\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E};\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nBy default, the build environment for the Teensy boards treats structs slightly differently than for the 8 bit CPUs in other Arduino boards. To tell the compiler to create the structs the same way, you need to add the \u0022packed\u0022 attribute. Do this by modifying\u00A0\u003Cstrong\u003Eall three\u003C/strong\u003E\u00A0structs like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022kwd\u0022\u003Estruct\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EHandShakePacket\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// Lots of different fields in here\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E __attribute__ \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E((\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Epacked\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E));\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat should help ensure that the Teensy encodes data how the plugin expects it, and vice-versa.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nJust wanted to personally thank you. I\u0027m in high-school and I just started learning how to use arduinos with this plugin and I would have never figured out how to fix it haha. Really appreciate the help from both you and\u00A0zitronen\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0Off-topic but\u00A0are you German Zitronen? Im learning German and I noticed your name was German for lemons haha\n\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2017-03-29T17:59:45Z","Content":"\n\u003Cp\u003E\nCool, I think you are the only one using a teensy 3.6, let us know how it works.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not German. I needed a user name when I lived in Austria many years ago, and had a bottle of zitronensaft on my table...\n\u003C/p\u003E\n"},{"CreatedByName":"gremlinWrangler","CreatedById":170291,"CreatedDateTime":"2017-03-30T10:46:47Z","Content":"\n\u003Cp\u003E\nOther than the structs thing have had no hassles with my Teensy 3.6 on early 2017 version of the library. \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/176124-happytor/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022176124\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/176124-happytor/\u0022 rel=\u0022\u0022\u003E@happytor\u003C/a\u003E if you have a 3.3. volt FTDI USB\u0026lt;-\u0026gt;serial adaptor editing can be a lot less painful if you point KSP io at the adapter where it can happily stream serial data and leave you with the Teensy USB to program and debug.\u00A0 Also if trying to do use the floating point unit don\u0027t forget to use the floating point unit commands (sqrtf for example), otherwise it assumes you wanted double and does them the long way.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-03-30T10:59:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223002697\u0022 data-ipsquote-contentid=\u002260281\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221490870807\u0022 data-ipsquote-userid=\u0022170291\u0022 data-ipsquote-username=\u0022gremlinWrangler\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 minutes ago, gremlinWrangler said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nif you have a 3.3. volt FTDI USB\u0026lt;-\u0026gt;serial adaptor editing can be a lot less painful if you point KSP io at the adapter where it can happily stream serial data and leave you with the Teensy USB to program and debug.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHey, mind if I ask which FTDI adaptor you\u0027re using, and on what operating system you\u0027re running KSP? I\u0027ve been hacking on the actual serial interface bits a fair bit, and would like to get more info on which combinations of hardware and OS are known good.\n\u003C/p\u003E\n"}]}