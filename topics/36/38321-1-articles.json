{"TopicId":38321,"ForumId":36,"TopicTitle":"Extension for ModuleManager with wildcard and conditional - v0.2 - 24 july 2013","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-07-23T16:16:51Z","PageNum":1,"Articles":[{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-07-23T16:16:51Z","Content":"\n\u003Cp\u003EThis is an extension for ModuleManager ( \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/31342-0-20-ModuleManager-1-3-for-all-your-stock-modding-needs\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/showthread.php/31342-0-20-ModuleManager-1-3-for-all-your-stock-modding-needs\u003C/a\u003E ).\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003EIt does not woks when ModuleManager is not installed.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Eialdabaoth suggested to do extension for things that he don\u0027t think fits in the default ModuleManager. This one let you search part with wildcard and conditionals. Most of this code come from ialdabaoth\u0027s code.\u003C/p\u003E\u003Cp\u003EYou should be able to do things like searching for \u0022any PART that contains both a ModuleAlternator and a ModuleEngines MODULE and a ModuleGimbal, but only if the ModuleEngines contains an Oxidizer PROPELLANT.\u0022 \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*]:HAS[@MODULE[ModuleEngines]:HAS[PROPELLANT[Oxidizer]],@MODULE[ModuleAlternator],@MODULE[ModuleGimbal]]\u003Cbr\u003E{\u003Cbr\u003Exxxxx\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAdd mechjeb to every probe core, but not to crew capsule (capsule don\u0027t use ElectricCharge)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[@RESOURCE[ElectricCharge]]]\u003Cbr\u003E{\u003Cbr\u003E    !MODULE[MechJebCore]\u003Cbr\u003E\u003Cbr\u003E    MODULE\u003Cbr\u003E    {\u003Cbr\u003E        name = MechJebCore\u003Cbr\u003E    }\u003Cbr\u003E}       \u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEdit all fixed wings \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*]:HAS[#module[Winglet]]\u003Cbr\u003E{\u003Cbr\u003E    @maxTemp=200\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAdd MonoPropellant to all tank who don\u0027t have any :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*Tank*]:HAS[!RESOURCE[MonoPropellant]]\u003Cbr\u003E{\u003Cbr\u003E   RESOURCE\u003Cbr\u003E   {\u003Cbr\u003E    name = MonoPropellant\u003Cbr\u003E    amount = 750\u003Cbr\u003E    maxAmount = 750\u003Cbr\u003E   }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEdit all part from the Propulsion category who don\u0027t have any SolidFuel and XenonGas\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*]:HAS[#category[Propulsion]:HAS[!RESOURCE[SolidFuel],!RESOURCE[XenonGas]]]\u003Cbr\u003E{\u003Cbr\u003E    @maxTemp=200\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EYou can also do things like @PART[b9_*] or @PART[b9_Cockpit_???] ( * or ? )\u003C/p\u003E\u003Cp\u003EFeel free to post any bug with the .cfg file you used, or point out how horrible my code is\u003C/p\u003E\u003Cp\u003EChangelog : \u003C/p\u003E\u003Cp\u003E0.1 : \u003C/p\u003E\u003Cp\u003E Ready for testing.\u003C/p\u003E\u003Cp\u003E0.2 : \u003C/p\u003E\u003Cp\u003E Now you can use ! to check if a module is NOT here, and # to check a properties of the part ( like module = Winglet )\u003C/p\u003E\u003Cp\u003E you need to use HAS ( all uppercase ) instead of Has\u003C/p\u003E\u003Cp\u003ESource : \u003Ca href=\u0022https://github.com/sarbian/MMSarbianExt/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/sarbian/MMSarbianExt/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EDownload : \u003Ca href=\u0022http://www.sarbian.com/sarbian/MMSarbianExt.dll\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.sarbian.com/sarbian/MMSarbianExt.dll\u003C/a\u003E \u003C/p\u003E\u003Cp\u003EInstall it by dropping it in the gamedata folder. Put your patch .cfg files anywhere in the gamedata folder or subfolders.\u003C/p\u003E\u003Cp\u003ELicenced under CC share-alike license.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-01T10:10:27Z\u0022 title=\u002209/01/2013 10:10  AM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 1, 2013\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"betaking","CreatedById":58281,"CreatedDateTime":"2013-07-23T16:44:01Z","Content":"\n\u003Cp\u003Ethis would be quite useful for mission controller, in terms of part requirements\u003C/p\u003E\n"},{"CreatedByName":"scottholio","CreatedById":67477,"CreatedDateTime":"2013-07-24T12:50:17Z","Content":"\n\u003Cp\u003EAlmost missed this, looks like a great idea. I\u0027ll be giving this a good look when I get back home.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-07-24T18:51:22Z","Content":"\n\u003Cp\u003E0.2 is released. \u003C/p\u003E\u003Cp\u003ECan\u0027t edit the first post now since the forum is dying with .21 release. Link in first post\u003C/p\u003E\u003Cp\u003ENow you can use ! to check if a module is NOT here, and # to check a properties of the part ( like module = Winglet )\u003C/p\u003E\u003Cp\u003Eyou need to use HAS ( all uppercase ) instead of Has\u003C/p\u003E\u003Cp\u003EEdit all fixed wings \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*]:HAS[#module[Winglet]]\u003Cbr\u003E{\u003Cbr\u003E    @maxTemp=200\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAdd MonoPropellant to all tank who don\u0027t have any :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*Tank*]:HAS[!RESOURCE[MonoPropellant]]\u003Cbr\u003E{\u003Cbr\u003E   RESOURCE\u003Cbr\u003E   {\u003Cbr\u003E    name = MonoPropellant\u003Cbr\u003E    amount = 750\u003Cbr\u003E    maxAmount = 750\u003Cbr\u003E   }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEdit all part from the Propulsion category who don\u0027t have any SolidFuel and XenonGas\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*]:HAS[#category[Propulsion]:HAS[!RESOURCE[SolidFuel],!RESOURCE[XenonGas]]]\u003Cbr\u003E{\u003Cbr\u003E    @maxTemp=200\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"sidfu","CreatedById":70409,"CreatedDateTime":"2013-07-24T23:48:18Z","Content":"\n\u003Cp\u003Eanyone got how to get the new .cfg for the new sas to work? in the stock command parts i found the .cfg for the new sas feature but when copied it over it doesnt work. any ideas?\u003C/p\u003E\n"},{"CreatedByName":"Moon Goddess","CreatedById":57446,"CreatedDateTime":"2013-07-25T00:14:25Z","Content":"\n\u003Cp\u003EAmazing!!!! I must have this!\u003C/p\u003E\n"},{"CreatedByName":"CreationMe","CreatedById":10464,"CreatedDateTime":"2013-08-13T11:40:13Z","Content":"\n\u003Cp\u003Esorry for kinda necroing this, but I was wondering how to add a module to all parts except the parts who already come with this module. For example, I want to add the KASModuleGrab to all parts except the parts who came from KAS itself which already have this module. I tried several things such as \u003C/p\u003E\u003Cp\u003E@PART[*]:HAS[#MODULE[KASModuleGrab]]\u003C/p\u003E\u003Cp\u003E{...}\u003C/p\u003E\u003Cp\u003Eor like this \u003C/p\u003E\u003Cp\u003E@PART[*]:HAS[!MODULE[KASModuleGrab]]\u003C/p\u003E\u003Cp\u003E{...}\u003C/p\u003E\u003Cp\u003Eor combined them like this\u003C/p\u003E\u003Cp\u003E@PART[*]:HAS[!#MODULE[KASModuleGrab]]\u003C/p\u003E\u003Cp\u003E{...}\u003C/p\u003E\u003Cp\u003EBut none of these actually do the trick for me. The first one adds it to everything, and the rest doesn\u0027t add anything at all. Can someone please advise me how to pull it off?\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-08-13T11:46:47Z","Content":"\n\u003Cp\u003EThe second one should do it. If it does not then I messed up.\u003C/p\u003E\u003Cp\u003EI\u0027ll do a quick check tonight but I\u0027am busy until next week.\u003C/p\u003E\n"},{"CreatedByName":"CreationMe","CreatedById":10464,"CreatedDateTime":"2013-08-13T11:54:19Z","Content":"\n\u003Cp\u003EThanks for your quick reply, you don\u0027t need to check. Second worked after all. I guess I made some typo or something else, don\u0027t know what went wrong. Anyway, it works now. Thanks you very much!\u003C/p\u003E\n"},{"CreatedByName":"Crater","CreatedById":48907,"CreatedDateTime":"2013-08-13T11:56:00Z","Content":"\n\u003Cp\u003EI can confirm that the second variant works fine for me. I use it to add MJ, Protractor, and other stuff to command pods, e.g.\u003C/p\u003E\u003Cp\u003E@PART[*]:HAS[@MODULE[ModuleCommand],!MODULE[MechJebCore]]\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E MODULE\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E name = MechJebCore\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EAnd it does exactly what I would expect.\u003C/p\u003E\u003Cp\u003E@CreationME: take a look in the KSP.log file. There is a section in there where it tells you what rules and which parts it is matching and applying. Also, try your rule to just patch the new module onto a single part, by name, and see if it works for that one.\u003C/p\u003E\u003Cp\u003EEdit: lol, you posted while I was typing \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-08-13T12:01:02Z","Content":"\n\u003Cp\u003ELess work for me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd it\u0027s nice to see some people using it, the lack of reply was kinda sad ^^\u003C/p\u003E\n"},{"CreatedByName":"Crater","CreatedById":48907,"CreatedDateTime":"2013-08-13T12:31:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003ELess work for me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EAnd it\u0027s nice to see some people using it, the lack of reply was kinda sad ^^\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPersonally, I\u0027d be lost without it! I used to have a perl script that parsed all the parts and edited/inserted the various modules I wanted, but it was a pain to maintain, and constantly needed tweaking as things changed (I first wrote it against 0.17 part files).\u003C/p\u003E\u003Cp\u003ENow I just have a handful of rules for your excellent MM extension, and I don\u0027t need to worry \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd when an update to a mod arrives, I just drop it into place, knowing that my deltas will happily apply themselves!\u003C/p\u003E\u003Cp\u003EThank you.\u003C/p\u003E\n"},{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2013-08-17T13:31:22Z","Content":"\n\u003Cp\u003EThis is a must-have extension of MM.\u003C/p\u003E\u003Cp\u003EI do like the capability to add a module to all parts. Some plugins really need this. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit: OMG... this plugin corrupted my persistent.sfs... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EFor the first time i get into the game, everything works fine and i have my part module added into all parts. The first launch was also successful. But after i quit the game and restart it, i got an exception when i\u0027m pressing \u0022Resume Saved\u0022 on the main menu. It seems to be a check-up failure of part\u0027s prototype. I guess the prototype was directly read from the part.cfg, which is different from the one in the persistent.sfs (the one in persistent.sfs has my additional part module).\u003C/p\u003E\u003Cp\u003EDon\u0027t know how to do, and is wondering why other MODs that use basic ModuleManager plugin don\u0027t have such issues...\u003C/p\u003E\u003Cp\u003EEdit2: My fault. Turn out that the issue is on my plugin\u0027s side. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EAgain this plugin is awesome!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-18T14:07:30Z\u0022 title=\u002208/18/2013 02:07  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 18, 2013\u003C/time\u003E by HoneyFox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Paul Kingtiger","CreatedById":57455,"CreatedDateTime":"2013-08-22T16:15:27Z","Content":"\n\u003Cp\u003EFantastic mod! Really opens up the possibilities of Module Manger!\u003C/p\u003E\n"},{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2013-08-24T23:15:53Z","Content":"\n\u003Cp\u003EHi Sarbian, found a bug -- your extension does not match explicitly named parts when that part has no additional pattern matching applied. For testing purposes, all I have installed is a stock install of KSP and the latest version of Module Manager and your extension.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[Mark1-2Pod]\u003Cbr\u003E{\u003Cbr\u003E\t@description = test\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDoes not work.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*Mark1-2Pod*]\u003Cbr\u003E{\u003Cbr\u003E\t@description = test\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWorks.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[Mark1-2Pod]:HAS[@MODULE[ModuleCommand]\u003Cbr\u003E{\u003Cbr\u003E\t@description = test\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWorks.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-08-24T23:46:35Z","Content":"\n\u003Cp\u003EIf there is no *, ? or :HAS my extension won\u0027t try to parse it because it should be processed by the normal Modulemanager. Modulemanager does not log as much, so it may just be that the change is done silently.\u003C/p\u003E\n"},{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2013-08-24T23:55:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EIf there is no *, ? or :HAS my extension won\u0027t try to parse it because it should be processed by the normal Modulemanager. Modulemanager does not log as much, so it may just be that the change is done silently.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThen maybe ModuleManager is erroring on the syntax from the extension? My first example does not work when the extension and ModuleManager are loaded, but works fine with only ModuleManager loaded.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-08-25T00:15:50Z","Content":"\n\u003Cp\u003EOk, I\u0027ll need to look at it more then. Thanks for pointing it out \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-08-25T00:40:53Z","Content":"\n\u003Cp\u003EI just remembered some post by Majiir I read before my holiday and it may be related ( \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/45107-KSPAddon-bug-causes-mod-incompatibilities\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/showthread.php/45107-KSPAddon-bug-causes-mod-incompatibilities\u003C/a\u003E ).\u003C/p\u003E\u003Cp\u003EJust did a new version with that fix. Can you try it ? ( same link \u003Ca href=\u0022http://www.sarbian.com/sarbian/MMSarbianExt.dll\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.sarbian.com/sarbian/MMSarbianExt.dll\u003C/a\u003E ). I\u0027ll go sleep on it.\u003C/p\u003E\n"},{"CreatedByName":"somnambulist","CreatedById":62108,"CreatedDateTime":"2013-08-25T18:38:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EJust did a new version with that fix. Can you try it ? ( same link \u003Ca href=\u0022http://www.sarbian.com/sarbian/MMSarbianExt.dll\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.sarbian.com/sarbian/MMSarbianExt.dll\u003C/a\u003E ). I\u0027ll go sleep on it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EStill no good \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E I put a copy of the log up on Pastebin. This is on OS X 10.8.4, but the problem is identical on Win7 64-bit. \u003Ca href=\u0022http://pastebin.com/cHidRCvd\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/cHidRCvd\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENot sure if this is helpful or not, but running the same test w/o your extension leaves an entry \u0027Applying node /test/@PART[Mark1-2Pod]\u0027 in the log file.\u003C/p\u003E\n"},{"CreatedByName":"GavinZac","CreatedById":68719,"CreatedDateTime":"2013-08-26T10:32:02Z","Content":"\n\u003Cp\u003EI love this mod! Makes adding stuff very quick and future-proof. Anyone want to post some of their example configs?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// Add kOS to all Command parts that don\u0027t already have it\u003Cbr\u003E\u003Cbr\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[!MODULE[kOSProcessor]]]\u003Cbr\u003E{\u003Cbr\u003E    MODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = kOSProcessor\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E// Add MechJeb to all Command parts that don\u0027t already have it\u003Cbr\u003E\u003Cbr\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[!MODULE[MechJebCore]]]\u003Cbr\u003E{\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = MechJebCore\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E// Add RemoteTech1 to all Command parts that don\u0027t already have it\u003Cbr\u003E\u003Cbr\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[!MODULE[MODULERemoteTechSPU]]]\u003Cbr\u003E{\u003Cbr\u003E    MODULE\u003Cbr\u003E    {\u003Cbr\u003E\tname = MODULERemoteTechSPU\u003Cbr\u003E\tminimumCrew = 0\u003Cbr\u003E\tEnergyDrain = 0.02777778\u003Cbr\u003E\tisRemoteCommand = false\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E// Add KAS EVA construction to all parts \u0026lt; 1 ton (Kerbals are mega strong in spaaaace)\u003Cbr\u003E\u003Cbr\u003E@PART[*]:HAS[#mass \u0026lt; 1]\u003Cbr\u003E{\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = KASModuleGrab\u003Cbr\u003E\t\tgrabKey = g\u003Cbr\u003E\t\tmaxDistance = 3\u003Cbr\u003E\t\tbreakForce = 3\u003Cbr\u003E\t\tevaPartPos = (0.0, 0.1, -0.3)\u003Cbr\u003E\t\tevaPartRot = (10.0, -180.0, 180.0)\u003Cbr\u003E\t\taddPartMass = false\u003Cbr\u003E\t\tgrabSndPath = KAS/Sounds/grab\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = KASModuleAttach\u003Cbr\u003E\t\tattachKey = h\u003Cbr\u003E\t\trotateLeftKey = b\t\u003Cbr\u003E\t\trotateRightKey = n\u003Cbr\u003E\t\tsurfaceDist = 0.169\u003Cbr\u003E\t\tmaxDistance = 3\u003Cbr\u003E\t\tallowPart = True\u003Cbr\u003E\t\tallowEva = False\u003Cbr\u003E\t\tallowStatic = True \u003Cbr\u003E\t\tsendMsgOnly = False \u003Cbr\u003E\t\tpointerUseModel = True\t\u003Cbr\u003E\t\tpartRot = (-90.0, -15.0, 0.0)\u003Cbr\u003E\t\tattachSndPath = KAS/Sounds/attach\u003Cbr\u003E\t\tdetachSndPath = KAS/Sounds/detach\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-26T13:14:01Z\u0022 title=\u002208/26/2013 01:14  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 26, 2013\u003C/time\u003E by GavinZac\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"GavinZac","CreatedById":68719,"CreatedDateTime":"2013-08-26T13:22:58Z","Content":"\n\u003Cp\u003EI want to try to match all \u0027manned\u0027 command pods, for a very silly reason involving an automatic coffee maker. However, this:\u003C/p\u003E\u003Cp\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[#CrewCapacity \u0026gt; 0]]\u003C/p\u003E\u003Cp\u003EMatches every part in the game. What have I done wrong?\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-08-26T13:35:41Z","Content":"\n\u003Cp\u003EComparator are not supported. \u003C/p\u003E\u003Cp\u003EAnyway it\u0027s strange that it matches all part with that. I\u0027ll try at home to check why.\u003C/p\u003E\u003Cp\u003EBut if you want your coffee maker you\u0027ll need multiple line. One for each crew capacity\u003C/p\u003E\u003Cp\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[#CrewCapacity[1]]\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[#CrewCapacity[2]]\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[#CrewCapacity[3]]\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EMaybe I could add a HAS[#CrewCapacity[\u0026gt;3]. I\u0027ll need to check how KSP cfg parser react to \u0026lt; and \u0026gt; first.\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-08-26T15:18:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EComparator are not supported. \u003Cp\u003EAnyway it\u0027s strange that it matches all part with that. I\u0027ll try at home to check why.\u003C/p\u003E\u003Cp\u003EBut if you want your coffee maker you\u0027ll need multiple line. One for each crew capacity\u003C/p\u003E\u003Cp\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[#CrewCapacity[1]]\u003C/p\u003E\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003EMaybe I could add a HAS[#CrewCapacity[\u0026gt;3]. I\u0027ll need to check how KSP cfg parser react to \u0026lt; and \u0026gt; first.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not fully familiar with your extensions but it seems like there ought to be a way...\u003C/p\u003E\u003Cp\u003EHe\u0027s already checking for the presence of a command module so all he should have to do is check that there is NOT a crewCapacity of 0. That should satisfy the conditional... the only way that I can see that it fails is if a part is just missing the property outright and has a command module. Can you check that the property exists at all in addition to checking if it is not 0?\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EEdit:\u003C/strong\u003E Ok, would THIS let him add his coffee machine using existing syntax?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[#CrewCapacity[*]]:HAS[!#CrewCapacity[0]]\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENot clear on if you can combine operators like that....\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-26T16:41:40Z\u0022 title=\u002208/26/2013 04:41  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 26, 2013\u003C/time\u003E by Starwaster\u003C/strong\u003E\n\u003Cbr\u003ESolution?\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-08-26T16:51:17Z","Content":"\n\u003Cp\u003EThere is no easier way right now. You can\u0027t do that with the current version. \u003C/p\u003E\u003Cp\u003EI just did some quick test and the problem was in fact easy : there is a missing ] in the expression you posted. Missing square bracket are evil \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E It does not work any better since operators are not implemented but it does not apply to all part.\u003C/p\u003E\u003Cp\u003EAnd I checked that \u0026lt; and \u0026gt; are parsed by KSP, so I could add those checks. No guarantee since the code is already more and more messy. Adding much more would need a proper syntax parser and I don\u0027t want to go there.\u003C/p\u003E\u003Cp\u003EI\u0027ll add a check for square bracket parity soon.\u003C/p\u003E\n"}]}