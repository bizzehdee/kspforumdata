{"TopicId":54734,"ForumId":36,"TopicTitle":"[1.2.0] Toolbar 1.7.13 - Common API for draggable/resizable buttons toolbar","CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2013-11-29T22:39:58Z","PageNum":8,"Articles":[{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-02-02T16:36:28Z","Content":"\n\u003Cp\u003ENo, text icons haven\u0027t been supported for quite some time.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-02-04T01:29:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ENot sure, I\u0027ll need to think about it. You see, the problem with something like folder \u0022hints\u0022 is that it gets tricky to decide if the folder should be added once the toolbar loads up or not. Like, is this the first time the hinting plugin is run? Or is this a subsequent run, but the user has decided to keep the folder? What do we do if the user throws the folder away (moving all buttons into the main toolbar), then restarts KSP?\u003C/p\u003E\u003Cp\u003E The way things are right now is rather simple: Plugins add their buttons, and they usually go into the main toolbar. Then, if the user decides to add folders and put buttons into them, that information is saved, and can be used for subsequent toolbar plugin runs. There just is nothing a third-party plugin can do to override which buttons go into which folders.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECross-responding to your post in the SteamGauges thread.\u003C/p\u003E\u003Cp\u003EI figured it was set up something like that. I don\u0027t know that its really worth being able to force folders on users anyway, just a thought I had since I was adding no less than 10 buttons with one mod. \u003C/p\u003E\u003Cp\u003EKeep it up!\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-04T19:38:13Z","Content":"\n\u003Cp\u003EToolbar Plugin 1.4.5 is now available for download.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-02-04T21:42:25Z","Content":"\n\u003Cp\u003EYou like releasing a new version right after someone releases a new mod version that comes with toolbar bundled in, don\u0027t you?\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-04T22:10:27Z","Content":"\n\u003Cp\u003EOh shoot, you discovered my evil plan \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Oinker","CreatedById":62538,"CreatedDateTime":"2014-02-04T22:42:13Z","Content":"\n\u003Cp\u003EIt\u0027s precisely because of mods like Trueborn\u0027s (thanks for adding the \u0022ton of icons\u0022 mode) that I ask for the functionality of dragging icons from the icon repository to the toolbar(s). I actually only use one of those gauges and only want that icon. Also, the goofy way Sarbian had to add individual icons for each MechJeb module because he didn\u0027t want to spam the toolbar with icons for every module. I envision every author able to include whatever icons they want and the users able to choose from those icons (from the repository) which of them they want on the toolbar(s). The toolbar itself will just send the click notification to the icons corresponding dll and change the icon if the addon\u0027s dll tells it to.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003E\u003Cp\u003EFrom previous post:\u003C/p\u003E\u003Cp\u003ESuggested toolbar functionality:\u003C/p\u003E\u003Cp\u003EAll add-ons with dependency or option for Toolbar have their icons made available in a \u0027toolbar icon set repository\u0027 (like the Firefox list of icons when customizing its toolbar). From drop-down menu, click \u0022Customize\u0022 (unlock shape \u0026amp; position and unlock icon position functions are combined on \u0022Customize\u0022). The available icon set list shows up (with two buttons - \u0022Add New Toolbar\u0022 and \u0022Done\u0022). Then drag and drop icons to the toolbar(s). Adjust their position(s) and/or the shape(s) and position(s) of the toolbar(s). Click \u0022Done\u0022 in the icon set list window to finish customizing.\u003C/p\u003E\u003Cp\u003EGet the double-horizontal-arrow or double-diagonal-arrow when mousing over border of toolbar(s) to indicate you can change size/shape. Place anchor points at 1/3 \u0026amp; 2/3 positions for mouse over to switch to the \u0027you can move the toolbar\u0027 icon.\u003C/p\u003E\u003Cp\u003EAfter this fine toolbar is tweaked, I\u0027d like to see something like the MCM for Skyrim/Fallout3 made for all the addons and stock options in Kerbal. One button on the Toolbar (same as any other toolbar icon set) to open/close the MCM (MCM with tabs to set options for all the add-ons). Each mod maker makes their own MCM plugin to set the options in their config.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-04T23:02:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Oinker\u0022 data-cite=\u0022Oinker\u0022\u003E\u003Cdiv\u003EI envision every author able to include whatever icons they want and the users able to choose from those icons (from the repository) which of them they want on the toolbar(s).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhile I personally find this a good concept, there is however an issue that shouldn\u0027t be overlooked: Discoverability. Say you have your toolbar all set up, then install a new plugin that adds new buttons. They won\u0027t appear on the toolbar the next time you run KSP, but instead go in a hidden repository where you can drag the ones out you want. I can already see the complaints about not finding the buttons that the new plugin is supposed to have. I don\u0027t know how many pages you read on the two Toolbar Plugin threads, but you might be surprised that some players are actually unable to find the option to reposition the toolbar because they just don\u0027t try and click on that triangle. And I actually stole the triangle button idea from other programs, so it\u0027s not like that\u0027s a new thing.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Oinker\u0022 data-cite=\u0022Oinker\u0022\u003E\u003Cdiv\u003EI\u0027d like to see something like the MCM for Skyrim/Fallout3 made for all the addons\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t know anything about that MCM thing.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-02-05T00:59:26Z","Content":"\n\u003Cp\u003EDon\u0027t worry Oinker, I\u0027ve got you covered with the next release.\u003C/p\u003E\u003Cp\u003Eblizzy, I\u0027ve got another thought. Other than changing the caption and visibility, how about some way to indicate if a button is selected or not? Like, changing the style to \u0022in\u0022 instead of \u0022out,\u0022 or changing the texture. Personally, I would prefer the style change, but I\u0027m not sure if the GUI can do that easily or not.\u003C/p\u003E\n"},{"CreatedByName":"PrivateFlip","CreatedById":68273,"CreatedDateTime":"2014-02-05T18:45:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EOh shoot, you discovered my evil plan \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E^^this. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThere\u0027s little we can do to stop you unfortunately.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-05T19:48:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EI don\u0027t know anything about that MCM thing.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, so I had a look to see what the MCM is. It is the Mod Configuration Menu that can be opened from the pause menu in Fallout. All mods supporting it can be configured from this central place. So essentially it is some sort of standardized interface that third-party mod authors can use, I\u0027d guess also saving the GUI work along the way.\u003C/p\u003E\u003Cp\u003ESo while I do think that\u0027s a good thing to have (I\u0027m used to something like that from WoW), it is clearly out of scope for the Toolbar Plugin.\u003C/p\u003E\n"},{"CreatedByName":"Pontiac","CreatedById":62216,"CreatedDateTime":"2014-02-05T22:12:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EWhile I personally find this a good concept, there is however an issue that shouldn\u0027t be overlooked: Discoverability. Say you have your toolbar all set up, then install a new plugin that adds new buttons. They won\u0027t appear on the toolbar the next time you run KSP, but instead go in a hidden repository where you can drag the ones out you want. I can already see the complaints about not finding the buttons that the new plugin is supposed to have. I don\u0027t know how many pages you read on the two Toolbar Plugin threads, but you might be surprised that some players are actually unable to find the option to reposition the toolbar because they just don\u0027t try and click on that triangle. And I actually stole the triangle button idea from other programs, so it\u0027s not like that\u0027s a new thing.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFor the icon, both on iPad and Android devices, the \u0022Settings\u0022 icon is typically a picture of a gear. Maybe draw one up and use that instead of the DOWN arrow? I\u0027d make a request to even highlight the button AS a button, as it could blend into the background.\u003C/p\u003E\u003Cp\u003EAs for the discoverablity ideal, the two thoughts I had on this is allowing the developers to automatically make their own folders, or, allowing the user to hide and show icons.\u003C/p\u003E\u003Cp\u003EI\u0027ve not looked at (Or remember looking at -- maybe I have?) the code or the API, so you\u0027ll have to translate.\u003C/p\u003E\u003Cp\u003EThe first thought I\u0027d have is for your code to determine if \u0022by default\u0022 the mod developer using your toolbar wants to throw a command into a folder directly. So in the case of MJ, using the icons for Settings, Launch and Landing icons, the developer could use something like \u0022MJ2:Settings\u0022, \u0022MJ2:Launch\u0022, and \u0022MJ2:Landing\u0022. Depending on how your code creates the buttons, you may not be able to create a component named \u0022MJ2:Landing\u0022 but prior to actually making the button, you actively change the developer naming scheme from MJ2:Landing to MJ2_Landing but then programatically go through the routine of creating the MJ2 folder then moving the MJ2_Landing button to the MJ2 folder, with appropriate config saves. As for icons, the author could also include the default icon by providing the PNG or whatever named as mj2_folder.png or define via the API what the folder icon is supposed to be. With this approach, a mod author could throw in multiple root folders if the functions of the mod conceivably cover more than one root function.\u003C/p\u003E\u003Cp\u003EThe second thought I had was just throw everything at the user at the main menu that the mod wants to have, but allow for the user to easily hide the buttons. One method would be to use the middle mouse button to hide the icons, or, ALT\u002BRight-Click for them Mac lovers who may not have a middle button. \u003Cspan style=\u0022color:#a9a9a9;\u0022\u003E(HOW DO YOU FUNCTION WITHOUT A MIDDLE BUTTON!?!?!)\u003C/span\u003E Either that, have something in the settings drop down that will allow the user to selectively hide and unhide buttons that are controlled by the toolbar.\u003C/p\u003E\n"},{"CreatedByName":"Oinker","CreatedById":62538,"CreatedDateTime":"2014-02-06T08:46:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Pontiac\u0022 data-cite=\u0022Pontiac\u0022\u003E\u003Cdiv\u003EAs for the discoverablity ideal, ... The second thought I had was just throw everything at the user at the main menu that the mod wants to have, but allow for the user to easily hide the buttons. One method would be to use the middle mouse button to hide the icons, or, ALT\u002BRight-Click for them Mac lovers who may not have a middle button. Either that or have something in the settings drop down that will allow the user to selectively hide and unhide buttons that are controlled by the toolbar.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat works. It\u0027s just as easy to hide the unwanted icons as it is to show already hidden ones. As long as the toolbar knows which icons the user wants hidden in the different screens and there is a means of unhiding them later if the user desires, that will work.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-07T00:45:00Z","Content":"\n\u003Cp\u003EToolbar Plugin 1.5.0 is now available for download, adding the ability for players to configure the visibility of each button.\u003C/p\u003E\u003Cp\u003EWith this change, there is no longer a need for plugin authors (*) to provide a configuration mechanism that lets players chose which buttons to show on the toolbar, because they can now configure that themselves. Just plop all your buttons into the Toolbar Plugin API. Of course you should continue to set IButton.Visible=false etc. as necessary.\u003C/p\u003E\u003Cp\u003E* Hi Sarbian.\u003C/p\u003E\n"},{"CreatedByName":"drtedastro","CreatedById":70911,"CreatedDateTime":"2014-02-07T02:30:10Z","Content":"\n\u003Cp\u003ELooks great, but after selecting which buttons i wanted to show for each page, would never close and go away. I kept changing pages until all froze. will try again and post info.\u003C/p\u003E\u003Cp\u003Eagain, wow, great idea and looking good, just some new version bug(s) ....\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-07T18:04:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022drtedastro\u0022 data-cite=\u0022drtedastro\u0022\u003E\u003Cdiv\u003ELooks great, but after selecting which buttons i wanted to show for each page, would never close and go away. I kept changing pages until all froze.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot sure what you are talking about. Does \u0022page\u0022 mean \u0022game scene,\u0022 such as vehicle assembly building or the flight scene?\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-07T18:16:28Z","Content":"\n\u003Cp\u003EToolbar Plugin 1.5.1 is now available for download.\u003C/p\u003E\n"},{"CreatedByName":"a__gun","CreatedById":83859,"CreatedDateTime":"2014-02-07T19:06:56Z","Content":"\n\u003Cp\u003EWould it be possible to have different settings for the regular flight scene and the flight scene\u0027s map view? Kethane button keeps resizing my toolbar :/\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-08T15:54:45Z","Content":"\n\u003Cp\u003EToolbar Plugin 1.5.2 is now available for download.\u003C/p\u003E\u003Cp\u003EI have created an official wrapper that enables plugin authors to provide Toolbar Plugin support without creating a hard dependency to it. This wrapper provides \u003Cstrong\u003Efull\u003C/strong\u003E compatibility to the Toolbar Plugin API and can be used as a complete drop-in replacement without the need to change code.\u003C/p\u003E\u003Cp\u003EPlease see the OP for details on how to use.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-08T16:06:05Z\u0022 title=\u002202/08/2014 04:06  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 8, 2014\u003C/time\u003E by blizzy78\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2014-02-08T21:16:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EToolbar Plugin 1.5.2 is now available for download.\u003Cp\u003EI have created an official wrapper that enables plugin authors to provide Toolbar Plugin support without creating a hard dependency to it. This wrapper provides \u003Cstrong\u003Efull\u003C/strong\u003E compatibility to the Toolbar Plugin API and can be used as a complete drop-in replacement without the need to change code.\u003C/p\u003E\u003Cp\u003EPlease see the OP for details on how to use.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAwesome Blizzy78, thanks. Just one note in your instructions for using this, I\u0027ll just \u0022use\u0022 the namespace in my code files rather than changing the wrapper file, then updating will be easier, maybe you could add a note to that effect in the instructions - \u0022Either Edit the namespace in ToolbarWrapper.cs to match your plugin\u0027s namespace, or call the functions via the ToolbarWrapper Namespace\u0022\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-08T21:49:16Z","Content":"\n\u003Cp\u003ENot changing the namespace might run the risk of having two separate copies (in different plugins) with different functionality in the same namespace. I\u0027m not sure how the mindless DLL system handles that. It could end up with your code calling ToolbarWrapper.cs code from a different plugin that could be incompatible. Changing the namespace to your plugin\u0027s namespace will prevent that.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2014-02-09T02:10:33Z","Content":"\n\u003Cp\u003EGood point Blizzy78, I\u0027ll test it a lot before I go down that road then \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"jpinard","CreatedById":89401,"CreatedDateTime":"2014-02-10T00:03:14Z","Content":"\n\u003Cp\u003EBlizzy - your link is no longer working.\u003C/p\u003E\n"},{"CreatedByName":"nothke","CreatedById":51185,"CreatedDateTime":"2014-02-10T03:48:30Z","Content":"\n\u003Cp\u003EAgain returning to the toolbar icons redesign. Trying to install all the mods possible =)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/XGq3iuB.png?1\u0022 alt=\u0022XGq3iuB.png?1\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-02-10T09:14:39Z","Content":"\n\u003Cp\u003EJust a minor nitpick there, perhaps the text icon for the rendezvous AP should be \u0022RDV AP\u0022, not \u0022RDZ AP\u0022? Same for the rendezvous planner. (Reason being, the Z is silent as far as I know.)\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2014-02-10T09:36:25Z","Content":"\n\u003Cp\u003ESo after some fiddling with the wrapper file I have it all working well, but I didn\u0027t use the same namespace as my dll as the terms Button and ClickEvent were too similar in the test project. I considered renaming em to TButton, TClickEvent, etc where necessary so I can tell a Toolbar object from others at a glance, but just using the full namespace was enough for now.\u003C/p\u003E\u003Cp\u003EThanks again blizzy78, I really like this, and can only see the dynamic dependacy option helping with uptake.\u003C/p\u003E\n"}]}