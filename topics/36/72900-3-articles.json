{"TopicId":72900,"ForumId":36,"TopicTitle":"[DEV][0.24.x][Jul 24] SCANsat v7.0rc4 -- Real Scanning, Real Science, at Warp Speed!","CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-20T21:11:56Z","PageNum":3,"Articles":[{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-22T15:37:04Z","Content":"\n\u003Cp\u003EWell fudge. This method of using a non-bitmask for the resource scanner type won\u0027t work. \u003C/p\u003E\u003Cp\u003EWhen the system registers a scan it looks at a position on the planet and the scanner type. It says at Long X and Lat Y the scanner type 2 (hi res altimetry) has scanned this area. So the array gets set to: [x,y] = 0000 0010. Now when scanner type 8 (biome) comes along to the same position the array gets set to: [x,y] = 0000 1010. So when we want to check if a position has been scanned we take our scanner type and check if it matches the array, position [x,y] = 0000 1010 so both the biome and hi res altimetry bits have been set, but the low res altimetry (type 1, 0000 0001) hasn\u0027t been set.\u003C/p\u003E\u003Cp\u003EWhen we use a non-bitmask enumeration to set the array this all breaks down. When resource sensor type 21 (uranium) passes over long x and lat y the array gets set to: [x,y] = 0001 0101. Now let\u0027s say we want to check if resource scanner type 1 (Kethane) has passed over this same location; we look at the array: [x,y] = 0001 0101 and see that the Kethane byte: 0000 0001 has been set, so we can say that the Kethane scanner has also scanned this area. This is obviously a problem.\u003C/p\u003E\u003Cp\u003EWith the regular SCANsat sensors every sensor is assigned its own bit in a single byte. So we can unambiguously determine which sensor has passed over which location. With the resource sensors that doesn\u0027t work, each sensor is assigned more than one bit and so we can no longer determine exactly what has been recorded. \u003C/p\u003E\u003Cp\u003EI can try setting the standard coverage map to be a short or an integer array, that would give us 16 or 32 bits (meaning 16 or 32 different scanner types). For now there are five SCANsat sensors, two Kethane resources and eight ORS resources. So I\u0027m thinking that a short would not be very wise. I\u0027m not sure how much using an integer array will blow up the data stored in the persistent file. But I\u0027m already storing two coverage maps, so maybe this won\u0027t be so bad. Hopefully the fact that many of the potential bits remain unused will keep the size of the string stored in the persistent file to a reasonable size (you can easily see the difference between the string for an unscanned vs. a scanned planet already).\u003C/p\u003E\u003Cp\u003EOf course, this could also simplify some things. I think doing it this way should get around some of the weirdness I\u0027ve been seeing when trying to use a separate scanner type.\u003C/p\u003E\n"},{"CreatedByName":"Morgan","CreatedById":77234,"CreatedDateTime":"2014-05-22T16:51:47Z","Content":"\n\u003Cp\u003EHi techi, great job!\u003C/p\u003E\u003Cp\u003EBut sadly I ran into 2 bugs with 7.0.\u003C/p\u003E\u003Cp\u003E1st: No BigMap \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003E(No idea why)\u003C/p\u003E\u003Cp\u003E2nd:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/VMfhpUw.jpg\u0022 alt=\u0022VMfhpUw.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E(maybe a problem with one of the visual mods, testing it now)\u003C/p\u003E\u003Cp\u003EEdit1:\u003C/p\u003E\u003Cp\u003EOk, these bugs belong together. The navball thingy reappears if I \u0022close\u0022 the invisible Big Map.\u003C/p\u003E\u003Cp\u003EEdit2:\u003C/p\u003E\u003Cp\u003ESame goes for Settings and Instrument Windows of the Small Map. They disappear if I try to open the Big Map.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-22T17:01:51Z\u0022 title=\u002205/22/2014 05:01  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 22, 2014\u003C/time\u003E by Morgan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-22T17:32:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Morgan\u0022 data-cite=\u0022Morgan\u0022\u003E\u003Cdiv\u003EHi techi, great job!\u003Cp\u003EBut sadly I ran into 2 bugs with 7.0.\u003C/p\u003E\u003Cp\u003E1st: No BigMap \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003E(No idea why)\u003C/p\u003E\u003Cp\u003E2nd:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/VMfhpUw.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/VMfhpUw.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E(maybe a problem with one of the visual mods, testing it now)\u003C/p\u003E\u003Cp\u003EEdit1:\u003C/p\u003E\u003Cp\u003EOk, these bugs belong together. The navball thingy reappears if I \u0022close\u0022 the invisible Big Map.\u003C/p\u003E\u003Cp\u003EEdit2:\u003C/p\u003E\u003Cp\u003ESame goes for Settings and Instrument Windows of the Small Map. They disappear if I try to open the Big Map.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes. I ran into this bug today. This is a pretty serious one, but it\u0027s intermittent. Restarting KSP seems to sometimes get rid of it.\u003C/p\u003E\u003Cp\u003EIt seems the \u0027big map\u0027 button in the toolbar will open/close a variety of windows. Earlier, my game was such that clicking the Big Map button opened/closed two BOSS (Screenshot) windows AND the SCANsat Instruments window.\u003C/p\u003E\u003Cp\u003EThe problem seems to be in SCANui.gui_show(). I\u0027ll take a look. DMagic: can you also take a look?\u003C/p\u003E\u003Cp\u003EIn my output_log.txt, I am seeing lots and lots of this: \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[MechJeb2] Adding button for Vessel_Info\u003Cbr\u003E\u003Cbr\u003E(Filename: /BuildAgent/work/d3d49558e4d408f4/artifacts/LinuxStandalonePlayerGenerated/UnityEngineDebug.cpp Line: 53)\u003Cbr\u003E\u003Cbr\u003EUnpacking Scanner 3\u003Cbr\u003E\u003Cbr\u003E(Filename: /BuildAgent/work/d3d49558e4d408f4/artifacts/LinuxStandalonePlayerGenerated/UnityEngineDebug.cpp Line: 53)\u003Cbr\u003E\u003Cbr\u003EArgumentOutOfRangeException: Argument is out of range.\u003Cbr\u003EParameter name: index\u003Cbr\u003E  at System.Collections.Generic.List\u00601[System.String].get_Item (Int32 index) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at SCANsat.SCANui.gui_show () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at (wrapper delegate-invoke) Callback:invoke_void__this__ ()\u003Cbr\u003E  at RenderingManager.OnGUI () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E(Filename:  Line: 4294967295)\u003Cbr\u003E\u003Cbr\u003EArgumentOutOfRangeException: Argument is out of range.\u003Cbr\u003EParameter name: index\u003Cbr\u003E  at System.Collections.Generic.List\u00601[System.String].get_Item (Int32 index) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at SCANsat.SCANui.gui_show () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at (wrapper delegate-invoke) Callback:invoke_void__this__ ()\u003Cbr\u003E  at RenderingManager.OnGUI () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E(Filename:  Line: 4294967295)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI talked to blizzy78 and he suggests that it really is in gui_show and is probably not toolbar related.\u003C/p\u003E\u003Cp\u003EDMagic:\u003C/p\u003E\u003Cp\u003EAlso, the dev version seems to have some issues big map rendering. All of these images are rendered with the branch \u0027dev\u0027 -- except the one that looks correct. When I checkout \u0027master\u0027 and/or \u0027master\u0027 with cherry-picked palette changes, it works fine.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/F7gpZ\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-22T17:35:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EWell fudge. This method of using a non-bitmask for the resource scanner type won\u0027t work. \u003Cp\u003EWhen the system registers a scan it looks at a position on the planet and the scanner type. It says at Long X and Lat Y the scanner type 2 (hi res altimetry) has scanned this area. So the array gets set to: [x,y] = 0000 0010. Now when scanner type 8 (biome) comes along to the same position the array gets set to: [x,y] = 0000 1010. So when we want to check if a position has been scanned we take our scanner type and check if it matches the array, position [x,y] = 0000 1010 so both the biome and hi res altimetry bits have been set, but the low res altimetry (type 1, 0000 0001) hasn\u0027t been set.\u003C/p\u003E\u003Cp\u003EWhen we use a non-bitmask enumeration to set the array this all breaks down. When resource sensor type 21 (uranium) passes over long x and lat y the array gets set to: [x,y] = 0001 0101. Now let\u0027s say we want to check if resource scanner type 1 (Kethane) has passed over this same location; we look at the array: [x,y] = 0001 0101 and see that the Kethane byte: 0000 0001 has been set, so we can say that the Kethane scanner has also scanned this area. This is obviously a problem.\u003C/p\u003E\u003Cp\u003EWith the regular SCANsat sensors every sensor is assigned its own bit in a single byte. So we can unambiguously determine which sensor has passed over which location. With the resource sensors that doesn\u0027t work, each sensor is assigned more than one bit and so we can no longer determine exactly what has been recorded. \u003C/p\u003E\u003Cp\u003EI can try setting the standard coverage map to be a short or an integer array, that would give us 16 or 32 bits (meaning 16 or 32 different scanner types). For now there are five SCANsat sensors, two Kethane resources and eight ORS resources. So I\u0027m thinking that a short would not be very wise. I\u0027m not sure how much using an integer array will blow up the data stored in the persistent file. But I\u0027m already storing two coverage maps, so maybe this won\u0027t be so bad. Hopefully the fact that many of the potential bits remain unused will keep the size of the string stored in the persistent file to a reasonable size (you can easily see the difference between the string for an unscanned vs. a scanned planet already).\u003C/p\u003E\u003Cp\u003EOf course, this could also simplify some things. I think doing it this way should get around some of the weirdness I\u0027ve been seeing when trying to use a separate scanner type.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhy can\u0027t we just move \u0027everything\u0027 in the bitmask way, way up to to 2^30 (from 2^8) or something -- and use all the values in between? Would this break existing persistent.sfs files?\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-22T17:39:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022phoenix_ca\u0022 data-cite=\u0022phoenix_ca\u0022\u003E\u003Cdiv\u003EUnfortunately not true. The colour altitude map kinda falls apart. That website you linked is interesting, though I wouldn\u0027t trust it completely. The best way to test for colour-blindness support is to actually proof the colours with an example image. Photoshop has two proof modes for colour blindness, and there are piles of simulators that can do it.\u003Cp\u003EHere\u0027s an online simulator you can use: \u003Ca href=\u0022http://www.color-blindness.com/coblis-color-blindness-simulator/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.color-blindness.com/coblis-color-blindness-simulator/\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELast night I extracted all of the colors SCANsat uses anywhere into a new file called \u003Ca href=\u0022https://github.com/S-C-A-N/SCANsat/blob/add_color_palettes/SCANpalette.cs\u0022 rel=\u0022external nofollow\u0022\u003ESCANpalette.cs\u003C/a\u003E:\u003C/p\u003E\u003Cp\u003EAll of the colors that start with cb_ are the colorblind safe ones. Clearly, these do not comprise a majority of color usage in SCANsat, however. And it\u0027s also clear they are not used for map drawing (the heightGradient colors are all xkcd colors).\u003C/p\u003E\u003Cp\u003EAnd I would trust the site I linked because someone\u0027s PhD thesis depended on its correctness \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png\u0022 alt=\u0022:o\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Morgan","CreatedById":77234,"CreatedDateTime":"2014-05-22T17:58:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003EYes. I ran into this bug today. This is a pretty serious one, but it\u0027s intermittent. Restarting KSP seems to sometimes get rid of it.\u003Cp\u003EIt seems the \u0027big map\u0027 button in the toolbar will open/close a variety of windows. Earlier, my game was such that clicking the Big Map button opened/closed two BOSS (Screenshot) windows AND the SCANsat Instruments window.\u003C/p\u003E\u003Cp\u003EThe problem seems to be in SCANui.gui_show(). I\u0027ll take a look. DMagic: can you also take a look?\u003C/p\u003E\u003Cp\u003EIn my output_log.txt, I am seeing lots and lots of this: \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[MechJeb2] Adding button for Vessel_Info\u003Cbr\u003E\u003Cbr\u003E(Filename: /BuildAgent/work/d3d49558e4d408f4/artifacts/LinuxStandalonePlayerGenerated/UnityEngineDebug.cpp Line: 53)\u003Cbr\u003E\u003Cbr\u003EUnpacking Scanner 3\u003Cbr\u003E\u003Cbr\u003E(Filename: /BuildAgent/work/d3d49558e4d408f4/artifacts/LinuxStandalonePlayerGenerated/UnityEngineDebug.cpp Line: 53)\u003Cbr\u003E\u003Cbr\u003EArgumentOutOfRangeException: Argument is out of range.\u003Cbr\u003EParameter name: index\u003Cbr\u003E  at System.Collections.Generic.List\u00601[System.String].get_Item (Int32 index) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at SCANsat.SCANui.gui_show () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at (wrapper delegate-invoke) Callback:invoke_void__this__ ()\u003Cbr\u003E  at RenderingManager.OnGUI () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E(Filename:  Line: 4294967295)\u003Cbr\u003E\u003Cbr\u003EArgumentOutOfRangeException: Argument is out of range.\u003Cbr\u003EParameter name: index\u003Cbr\u003E  at System.Collections.Generic.List\u00601[System.String].get_Item (Int32 index) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at SCANsat.SCANui.gui_show () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at (wrapper delegate-invoke) Callback:invoke_void__this__ ()\u003Cbr\u003E  at RenderingManager.OnGUI () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E(Filename:  Line: 4294967295)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI talked to blizzy78 and he suggests that it really is in gui_show and is probably not toolbar related.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EResetting Window Positions fixed it in my career savegame, but not in my sandbox one.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-05-22T18:19:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003EWhy can\u0027t we just move \u0027everything\u0027 in the bitmask way, way up to to 2^30 (from 2^8) or something -- and use all the values in between? Would this break existing persistent.sfs files?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust thinking aloud, but another solution could be to keep the \u0022normal\u0022 SCANsat bitmask at 2^8, to deal with SCANsat sensors and Kethane resources, and add another \u0022ORS resources\u0022 bitmask, minimum at 2^8 but you may want to enlarge that. Both bitmasks written in the persistent.sfs for each body, and managed the same way (LZF compression and all, you know that much better than me). That would minimize impact on existing saves, possibly avoiding you to build a conversion method from old to new bitmasks.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-22T19:05:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003EYes. I ran into this bug today. This is a pretty serious one, but it\u0027s intermittent. Restarting KSP seems to sometimes get rid of it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve seen versions of this too. I don\u0027t think it has anything to do with the toolbar or any other mod, it\u0027s just SCANsat\u0027s GUI screwing with others (in a similar way that other mods can reset the GUI to the KSP style buttons rather than the Unity style). And gui_show is the all-purpose GUI handler for SCANsat, it\u0027s where everything seems to get collected before being sent off to the rendering manager.\u003C/p\u003E\u003Cp\u003EAre the people who are seeing this using both Kethane and ORS resources? Does it happen right away when opening the big map, or only after changing things in the settings menu?\u003C/p\u003E\u003Cp\u003EThe one sure way that I know of to cause it (at least when I tried it) is to select \u0022Open Resources\u0022 button, then select one of the last resources on the list, say Alumina, then change to the \u0022Kethane Resources\u0022 button. Because Kethane only has one or two options something is getting confused and thinking that the third option is selected when it doesn\u0027t actually exist (presumably the same would happen in the reverse, but there are generally more ORS resources than Kethane resources). If you don\u0027t have Kethane resources installed then you\u0027ll notice that selecting the \u0022Kethane Resources\u0022 button just shuts everything off, the toggle button above it disappears along with the overlay buttons on the big map. Doing something similar should be fairly simple when you have both resource types installed, probably just resetting the selection to the first resource option when changing types. And these UI elements are all temporary, I\u0027m certain there are better ways of handling which resource you want to display.\u003C/p\u003E\u003Cp\u003EBut if people are seeing this happen in other cases something else may be going on. I\u0027d be interested to know if everyone else is seeing the same error in the debug log, that \u0022system.collections.generic.list\u0022 line at the top may be the important part, the list in question being the list of available resources to display and the integer being which member of the list is selected.\u003C/p\u003E\u003Cp\u003EDid the map distortion weirdness persist through re-sizing it? I noticed that once, but just changed the size, and since I was checking something else didn\u0027t pay much attention to it. It\u0027s also possible that I didn\u0027t copy something right into that branch. You might want to try the v7 branch and see if the same thing happens, it doesn\u0027t include any of the color changes, but has all of my other updates.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-22T19:07:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EI\u0027ve seen versions of this too. I don\u0027t think it has anything to do with the toolbar or any other mod, it\u0027s just SCANsat\u0027s GUI screwing with others (in a similar way that other mods can reset the GUI to the KSP style buttons rather than the Unity style). And gui_show is the all-purpose GUI handler for SCANsat, it\u0027s where everything seems to get collected before being sent off to the rendering manager.\u003Cp\u003EAre the people who are seeing this using both Kethane and ORS resources? Does it happen right away when opening the big map, or only after changing things in the settings menu?\u003C/p\u003E\u003Cp\u003EThe one sure way that I know of to cause it (at least when I tried it) is to select \u0022Open Resources\u0022 button, then select one of the last resources on the list, say Alumina, then change to the \u0022Kethane Resources\u0022 button. Because Kethane only has one or two options something is getting confused and thinking that the third option is selected when it doesn\u0027t actually exist (presumably the same would happen in the reverse, but there are generally more ORS resources than Kethane resources). If you don\u0027t have Kethane resources installed then you\u0027ll notice that selecting the \u0022Kethane Resources\u0022 button just shuts everything off, the toggle button above it disappears along with the overlay buttons on the big map. Doing something similar should be fairly simple when you have both resource types installed, probably just resetting the selection to the first resource option when changing types. And these UI elements are all temporary, I\u0027m certain there are better ways of handling which resource you want to display.\u003C/p\u003E\u003Cp\u003EBut if people are seeing this happen in other cases something else may be going on. I\u0027d be interested to know if everyone else is seeing the same error in the debug log, that \u0022system.collections.generic.list\u0022 line at the top may be the important part, the list in question being the list of available resources to display and the integer being which member of the list is selected.\u003C/p\u003E\u003Cp\u003EDid the map distortion weirdness persist through re-sizing it? I noticed that once, but just changed the size, and since I was checking something else didn\u0027t pay much attention to it. It\u0027s also possible that I didn\u0027t copy something right into that branch. You might want to try the v7 branch and see if the same thing happens, it doesn\u0027t include any of the color changes, but has all of my other updates.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, it did persist through resizing. I\u0027ll look further.\u003C/p\u003E\u003Cp\u003Eedit:\u003C/p\u003E\u003Cp\u003EYes, it persists through resizing. Yes, it happens on v7-Resource-Overlay. And v7.0.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-22T19:21:09Z\u0022 title=\u002205/22/2014 07:21  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 22, 2014\u003C/time\u003E by technogeeky\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-22T19:14:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003EWhy can\u0027t we just move \u0027everything\u0027 in the bitmask way, way up to to 2^30 (from 2^8) or something -- and use all the values in between? Would this break existing persistent.sfs files?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is what I was thinking. This would get around any issues of dealing with two coverage maps, and I think 32 sensor types is more than enough. I\u0027ve been working on converting an Int32 array into a byte array that the compression algorithm can handle, I seem to have dealt with that, I just need to handle the reverse now. It\u0027s possible that it may affect existing data, I can imagine that in converting from a byte array to an integer array it might get confused about which values go where (ie the first four bytes get added to the first element of the array, instead of getting added to four consecutive elements).\u003C/p\u003E\u003Cp\u003EUsing a second 2 or 4 byte array might better option for preserving existing data.\u003C/p\u003E\n"},{"CreatedByName":"Morgan","CreatedById":77234,"CreatedDateTime":"2014-05-22T19:29:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EAre the people who are seeing this using both Kethane and ORS resources? Does it happen right away when opening the big map, or only after changing things in the settings menu?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBigMap Bug right after install and yes, Kethane! And I can reproduce it, clicking Kethane is the fix (not \u0022reset window position\u0022 as I mentioned before)\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-22T19:32:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EThis is what I was thinking. This would get around any issues of dealing with two coverage maps, and I think 32 sensor types is more than enough. I\u0027ve been working on converting an Int32 array into a byte array that the compression algorithm can handle, I seem to have dealt with that, I just need to handle the reverse now. It\u0027s possible that it may affect existing data, I can imagine that in converting from a byte array to an integer array it might get confused about which values go where (ie the first four bytes get added to the first element of the array, instead of getting added to four consecutive elements).\u003Cp\u003EUsing a second 2 or 4 byte array might better option for preserving existing data.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll just have to get better at testing before we release something like that.\u003C/p\u003E\u003Cp\u003ECan you get on IRC this week? I\u0027m set up to be in there whenever now (using irssi). But if you just want to get on there temporarily, the mibbit client isn\u0027t so bad.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-22T19:53:47Z","Content":"\n\u003Cp\u003EDMagic: there is something else interesting about this bug (the bigmap-click-button bug): it causes the smallmap scanline speed to be much faster than usual.\u003C/p\u003E\u003Cp\u003EIt makes me question several things, one of which being the effect that framerate limiting would have on SCANsat (right now I have it set to unlimited).\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-22T20:51:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003EI\u0027ll just have to get better at testing before we release something like that.\u003Cp\u003ECan you get on IRC this week? I\u0027m set up to be in there whenever now (using irssi). But if you just want to get on there temporarily, the mibbit client isn\u0027t so bad.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll get on tonight. \u003C/p\u003E\u003Cp\u003EI\u0027ve found a way to load up and convert the byte array stored in previous versions to a usable integer array (I think something like this was done in a previous SCANsat update), it\u0027s pretty simple, but it may need to be some kind of one-time thing. SCANsat can store the required information for this in its scenario module, but I\u0027ll need to find a way to handle new vs old saves.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-22T22:24:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EI\u0027ll get on tonight. \u003Cp\u003EI\u0027ve found a way to load up and convert the byte array stored in previous versions to a usable integer array (I think something like this was done in a previous SCANsat update), it\u0027s pretty simple, but it may need to be some kind of one-time thing. SCANsat can store the required information for this in its scenario module, but I\u0027ll need to find a way to handle new vs old saves.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn order for me to work on it, and in order to debug (if needed) the Settings window, I broke it out from being one function and made it eight.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        public static void gui_settings_build ( int wid ) {\u003Cbr\u003E            GUI.skin = null;\u003Cbr\u003E\u003Cbr\u003E            GUILayout.BeginVertical ();\u003Cbr\u003E\u003Cbr\u003E            GUILayout.Space (8);\u003Cbr\u003E            gui_settings_xmarks(wid);                 /* X marker selection */\u003Cbr\u003E            GUILayout.Space(16);\u003Cbr\u003E            gui_settings_resources(wid);                /* resource details sub-window */\u003Cbr\u003E            GUILayout.Space (16);\u003Cbr\u003E            gui_settings_toggle_body_scanning(wid);        /* background and body scanning toggles */\u003Cbr\u003E            GUILayout.Space (16);\u003Cbr\u003E            gui_settings_timewarp (wid);                /* time warp resolution settings */\u003Cbr\u003E            GUILayout.Space (8);\u003Cbr\u003E            GUILayout.Label (gui_settings_numbers (wid));/* sensor/scanning statistics */\u003Cbr\u003E            GUILayout.Space (16);\u003Cbr\u003E            gui_settings_data_resets (wid);            /* reset data and/or reset resources */\u003Cbr\u003E            GUILayout.Space (8);\u003Cbr\u003E            gui_settings_window_resets (wid);            /* reset windows and positions */\u003Cbr\u003E            GUILayout.Space (16);\u003Cbr\u003E            if (GUILayout.Button (\u0022Close\u0022)) settings_visible = false;    /* close settings */\u003Cbr\u003E\u003Cbr\u003E            GUILayout.EndVertical ();\u003Cbr\u003E            GUI.DragWindow ();\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENone of them actually need the window id, but I didn\u0027t know better at the time.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-22T23:14:00Z","Content":"\n\u003Cp\u003EI\u0027ve reverted the changes I made to v7 for the Kethane side of things and fixed a number of bugs. It should initialize properly now, checking for the presence of any resources, and disabling the overlay if none are found. This will prevent the big map from freaking out if you don\u0027t have any ORS resources installed (it defaults to ORS resources, not Kethane). I\u0027ve also fixed the problem I described above about switch from ORS to Kethane resources causing the same problem. I also fixed the screwed up map, the pixel color just needs to be re-initialized for each pixel, not each line.\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif\u0022 alt=\u0022:mad:\u0022\u003E\u003C/p\u003E\u003Cp\u003EMost of these changes are separate from the problems I discussed about using different scanner types, so these things needed to be fixed anyway. This version still doesn\u0027t have any support for Kethane resources.\u003C/p\u003E\u003Cp\u003ETG: You can rebuild the v7-Resource-Overlay branch, leave out SCANsatKethane, like last time. It doesn\u0027t have any of the color palette changes, I just updated directly from the released version of the code.\u003C/p\u003E\u003Cp\u003EChangelog:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E- Big map should no longer break if no ORS resources are installed\u003Cbr\u003E- Switching from a high-number ORS resource to Kethane should not break the big map\u003Cbr\u003E- Incomplete big map should render properly\u003Cbr\u003E- Spottiness of resource scanners may be improved, it\u0027s hard to say, maybe ok up to 100-1000X timewarp\u003Cbr\u003E- Setting menu buttons don\u0027t change color anymore\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-05-22T23:26:42Z","Content":"\n\u003Cp\u003EHuh? SCANsat got updated? Why did I not hear of this...\u003C/p\u003E\u003Cp\u003E(a.k.a shameless sub post)\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-22T23:28:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BananaDealer\u0022 data-cite=\u0022BananaDealer\u0022\u003E\u003Cdiv\u003EHuh? SCANsat got updated? Why did I not hear of this...\u003Cp\u003E(a.k.a shameless sub post)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can try out v7, but it is primarily for testing, and the released version has a number of bugs, only some of which were fixed in the update described above.\u003C/p\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-05-22T23:33:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EYou can try out v7, but it is primarily for testing, and the released version has a number of bugs, only some of which were fixed in the update described above.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI am used to bugs... This is the KSP modding community we are it, after all...\u003C/p\u003E\u003Cp\u003EAlso, on a related note- Updating my 50-odd mods is tedious...\u003C/p\u003E\u003Cp\u003EI leave KSP alone for a month and y\u0027all decide to have a coding party...\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-23T01:48:34Z","Content":"\n\u003Cp\u003EOn the topic of colors, I\u0027m wondering if the overlay should always have a background shade to help differentiate resource areas from empty areas.\u003C/p\u003E\u003Cp\u003EI think this would be helpful, not only for color-blind support, but for making it easier to see what areas have and haven\u0027t been scanned. The ORS resources overlays currently don\u0027t do this; I think those need a better method for assigning a resource concentration cutoff first. Right now the cutoff is just the scaleFactor * scaleMultiplier and doesn\u0027t consider the display threshold value.\u003C/p\u003E\u003Cp\u003EI\u0027m also thinking that the grey scale map should stick with one color/shade for all resources, and only the color map should use different colors. Using a grey background for empty areas would probably help in finding compatible colors for that map too.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/AT2b4G7.jpg\u0022 alt=\u0022AT2b4G7.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"phoenix_ca","CreatedById":50380,"CreatedDateTime":"2014-05-23T02:37:40Z","Content":"\n\u003Cp\u003EThose are good ideas. I rather like the one on the right. For colour-blind support, one colour for all resources wouldn\u0027t do it. Ideally you\u0027d have a choice of about three colours to use, one for each primary type. More ideally, just grab the colour from a user-editable text file in some format like nodes we have now, or XML, or JSON, etc., so that colour-blind support would be as easy as creating a new colour profile for all colours in SCANsat. I\u0027d happily volunteer making such configs if you need them.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-23T03:29:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022phoenix_ca\u0022 data-cite=\u0022phoenix_ca\u0022\u003E\u003Cdiv\u003EThose are good ideas. I rather like the one on the right. For colour-blind support, one colour for all resources wouldn\u0027t do it. Ideally you\u0027d have a choice of about three colours to use, one for each primary type. More ideally, just grab the colour from a user-editable text file in some format like nodes we have now, or XML, or JSON, etc., so that colour-blind support would be as easy as creating a new colour profile for all colours in SCANsat. I\u0027d happily volunteer making such configs if you need them.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESlow your roll!\u003C/p\u003E\u003Cp\u003EI\u0027m working on color palettes as a whole package. Everything will be editable in-game. The primary unit of color currency will be a palette, not a color.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EThe default color palette should be colorblind friendly.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThere should be three or four color palettes available for choosing on the right hand side (laid out vertically) of the Big Map.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThese three or four should be selectable from a larger set on some yet-to-be-named palette settings window.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EYou should be able to add your own palette, or copy existing palettes and make changes to them.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThere should be smaller palettes for overlays (two or three colors).\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"rottielover","CreatedById":73403,"CreatedDateTime":"2014-05-23T03:33:09Z","Content":"\n\u003Cp\u003EEarlier in the thread you mentioned that you were still considering more idea\u0027s for extending SCANsat\u0027s functions, so I\u0027ll re-suggest something I put in the original SCANsat thread back when it was in the 2nd or 3rd release (if I remember right).\u003C/p\u003E\u003Cp\u003E\u0022Landing Zone Assistant\u0022 \u003C/p\u003E\u003Cp\u003EHighlight \u0022good landing zone candidate spots\u0022 based on user selected criteria. Examples would include a slope range selection (IE I would like to land on level ground, or I\u0027ll tolerate x% slope). I would like to land in a spot that is within Y number of kilometers from Z number of biomes. \u003C/p\u003E\u003Cp\u003EThoughts?\u003C/p\u003E\n"},{"CreatedByName":"phoenix_ca","CreatedById":50380,"CreatedDateTime":"2014-05-23T03:33:50Z","Content":"\n\u003Cp\u003ESounds good. I\u0027ll just resort to breaking it later then. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-23T14:23:34Z","Content":"\n\u003Cp\u003EI\u0027ve updated the first post to reflect the release of v7.0rc1. This includes several bug fixes with resource scanning. If you are using the DEV version and having bugs, we recommend you upgrade.\u003C/p\u003E\n"}]}