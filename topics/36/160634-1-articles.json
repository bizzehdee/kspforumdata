{"TopicId":160634,"ForumId":36,"TopicTitle":"Scale, Rescalefactor and mesh volume (all related)","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-15T00:10:34Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-15T00:10:34Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to determine the volume of a part by using the collider mesh. \u00A0I found some code on the net which calculates the volume of a mesh (see below), but it has no relation that I can tell to the actual part volume. \u00A0I suspect it has to do with the internal scaling of the part.\n\u003C/p\u003E\n\u003Cp\u003E\nWhich brings me to the Scale and Rescalefactor values. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHow do they relate to the actual .mu file being used for the model?\n\u003C/p\u003E\n\u003Cp\u003E\nWhat can I do to take the volume calculated by the code below to scale it properly to give me correct data?\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m using the standard tanks for testing; I can easily get their size by the following call:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Ep.partPrefab.GetPartRendererBound().size\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nand just use the formula to calculate volume of a cylinder:\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:80px;\u0022\u003E\nv = h * Pi* r^2\n\u003C/p\u003E\n\u003Cp\u003E\nwhere:\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:80px;\u0022\u003E\nv = volume\u003Cbr\u003E\nh = height\u003Cbr\u003E\nr = radius (I divide the diameter by w)\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:80px;\u0022\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo I know what the approximate volume should be, but the values I\u0027m getting are totally off.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, here is the code I use to get the mesh of a part (here is the link: \u003Ca href=\u0022http://answers.unity3d.com/questions/52664/how-would-one-calculate-a-3d-mesh-volume-in-unity.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://answers.unity3d.com/questions/52664/how-would-one-calculate-a-3d-mesh-volume-in-unity.html\u003C/a\u003E):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EGameObject model = GameDatabase.Instance.GetModel(meshstr);\nif (model != null)\n{\n\tMeshFilter[] meshFilters = model.GetComponentsInChildren\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;MeshFilter\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E(true);\n\tforeach (var m in meshFilters)\n\t{\n\t\tvar mesh = m.sharedMesh;\n\n\t\tif (mesh != null)\n\t\t\tvolume \u002B= VolumeOfMesh(mesh);\n\t\telse\n\t\t\tDebug.Log(\u0022Component MeshFilter not found for part: \u0022 \u002B p.name);\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nand here is the code I found to get the volume of a mesh:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E        public float SignedVolumeOfTriangle(Vector3 p1, Vector3 p2, Vector3 p3)\n        {\n            float v321 = p3.x * p2.y * p1.z;\n            float v231 = p2.x * p3.y * p1.z;\n            float v312 = p3.x * p1.y * p2.z;\n            float v132 = p1.x * p3.y * p2.z;\n            float v213 = p2.x * p1.y * p3.z;\n            float v123 = p1.x * p2.y * p3.z;\n            return (1.0f / 6.0f) * (-v321 \u002B v231 \u002B v312 - v132 - v213 \u002B v123);\n        }\n        public float VolumeOfMesh(Mesh mesh)\n        {\n            float volume = 0;\n            Vector3[] vertices = mesh.vertices;\n            int[] triangles = mesh.triangles;\n            \n            for (int i = 0; i \u0026lt; mesh.triangles.Length; i \u002B= 3)\n            {\n                Vector3 p1 = vertices[triangles[i \u002B 0]];\n                Vector3 p2 = vertices[triangles[i \u002B 1]];\n                Vector3 p3 = vertices[triangles[i \u002B 2]];\n                volume \u002B= SignedVolumeOfTriangle(p1, p2, p3);\n            }\n            return Mathf.Abs(volume);\n        }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-15T00:28:12Z\u0022 title=\u002205/15/2017 12:28  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 15, 2017\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2017-05-15T01:21:34Z","Content":"\n\u003Cp\u003E\nIf you\u0027re using Blender there\u0027s a 3D Mesh Toolbox that has an area and volume calculator - select your model and click the button and it returns the value. I think it\u0027s included but not enabled by default - I can dig deeper if you want to try it and can\u0027t find it.\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2017-05-15T01:39:49Z","Content":"\n\u003Cp\u003E\n\u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E does calculate the volumes of parts, so you could take a gander at their code. Not completely sure if their computed \u0022volume\u0022 is accurate or merely an approx ballpark (for gameplay, not physics/realism).\n\u003C/p\u003E\n\u003Cp\u003E\nKeep in mind animated/deployable parts and such (volume can change with animation) -- \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E provides a means to supply a manual override value if you find that the computed value is really off the mark.\u003Cbr\u003E\nLikewise for parts that have collider not exactly matching visual model (for whatever reason, e.g. part is surface mount and has a portion that is \u0022embedded\u0022 into its parent).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nrescalefactor is default to 1.25 if not specified \u0026lt;-- this might be the source of your grief?\n\u003C/p\u003E\n\u003Cp\u003E\nscale/rescalefactor apply to all 3 axes, so if you need to scale the volume, it should be by scale^3 / rescalefactor^3\n\u003C/p\u003E\n\u003Cp\u003E\niirc scale in MODEL nodes (as opposed to mesh = ...) specifies 3 axes independently.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nhth\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2017-05-15T03:48:59Z","Content":"\n\u003Cp\u003E\nOkay, now that I actually looked at what your code is doing, and here\u0027s the other thing that might be getting you.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EGameObject model = GameDatabase.Instance.GetModel(meshstr);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nJust to confirm, here you\u0027re feeding the url for the model, for example, \u0022Squad/Parts/Command/mk1Cockpits/CockpitInline\u0022, right?\n\u003C/p\u003E\n\u003Cp\u003E\nThat pulls the whole model, which could include a whole bunch of things:\u003Cbr\u003E\n- colliders \u0026lt;-- what you want\u003Cbr\u003E\n- visual meshes \u0026lt;-- not guaranteed to be convex, or even closed\u003Cbr\u003E\n- empty transforms\u003Cbr\u003E\n- etc\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\t\u003C/span\u003E\u003Cspan\u003EMeshFilter\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E[]\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E meshFilters \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E model\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EGetComponentsInChildren\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026lt;\u003C/span\u003E\u003Cspan\u003EMeshFilter\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026gt;(\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Etrue\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\tforeach \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Evar m in meshFilters\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\t\u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// ...\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\tvolume \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u002B=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EVolumeOfMesh\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Emesh\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\t\u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// ...\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nLooks like you\u0027re summing the volumes of anything in there that has a mesh, not just the colliders. That\u0027s probably what\u0027s making things go completely haywire.\u003Cbr\u003E\nCheck that the parent GO of the mesh filter has some form of collider component attached to it (that is not set as a trigger). Calculate only using those.\n\u003C/p\u003E\n\u003Cp\u003E\n-----\n\u003C/p\u003E\n\u003Cp\u003E\nThe VolumeOfMesh() code you\u0027ve got is a sum of tetrahedrons; I\u0027m a bit rusty but it looks fundamentally sound from here.\n\u003C/p\u003E\n\u003Cp\u003E\n-----\n\u003C/p\u003E\n\u003Cp\u003E\nI made you a plain and simple 1m cube that you can use to calibrate and make sure your code is working. Just gimme a moment to upload and link it...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/uc?id=0Bzrn-CQh0q4naGF0dmxTQVA2WFk\u0022 rel=\u0022external nofollow\u0022\u003Edownload link\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis is a 1x1x1m cube, you can stack with a mk1 part to confirm. It contains visual mesh (8 vertices, 12 tris) with attached box collider.\n\u003C/p\u003E\n\u003Cp\u003E\nVolume should be 1 or 1.953125. Depends on whether rescaleFactor actually gets applied to the model meshes, or if it\u0027s a scaling factor only applied to the whole part\u0027s root transform. Probably the latter, case (so 1m\u003Csup\u003E3\u003C/sup\u003E) If you get any other result, check to see if it is N x (expected value) or N\u003Csup\u003E3\u003C/sup\u003E x (expected value) which should be telling re: what went wrong.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d suggest trying to get the cube right before moving on to more complex models.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-15T04:05:22Z\u0022 title=\u002205/15/2017 04:05  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 15, 2017\u003C/time\u003E by cake\u0026gt;pie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-15T10:39:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056855\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494811294\u0022 data-ipsquote-userid=\u0022120438\u0022 data-ipsquote-username=\u0022wasml\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, wasml said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you\u0027re using Blender there\u0027s a 3D Mesh Toolbox that has an area and volume calculator - select your model and click the button and it returns the value. I think it\u0027s included but not enabled by default - I can dig deeper if you want to try it and can\u0027t find it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, this needs to be done \u00A0in-game\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056966\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494820139\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cake\u0026gt;pie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, cake\u0026gt;pie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOkay, now that I actually looked at what your code is doing, and here\u0027s the other thing that might be getting you.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan\u003EGameObject\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E model \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EGameDatabase\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EInstance\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EGetModel\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Emeshstr\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nJust to confirm, here you\u0027re feeding the url for the model, for example, \u0022Squad/Parts/Command/mk1Cockpits/CockpitInline\u0022, right?\n\u003C/p\u003E\n\u003Cp\u003E\nThat pulls the whole model, which could include a whole bunch of things:\u003Cbr\u003E\n- colliders \u0026lt;-- what you want\u003Cbr\u003E\n- visual meshes \u0026lt;-- not guaranteed to be convex, or even closed\u003Cbr\u003E\n- empty transforms\u003Cbr\u003E\n- etc\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003E\t\u003C/span\u003E\u003Cspan\u003EMeshFilter\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E[]\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E meshFilters \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E model\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EGetComponentsInChildren\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026lt;\u003C/span\u003E\u003Cspan\u003EMeshFilter\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026gt;(\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Etrue\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eforeach\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Evar\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E m \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Ein\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E meshFilters\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\t\u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// ...\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\tvolume \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u002B=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EVolumeOfMesh\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Emesh\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\t\u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// ...\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nLooks like you\u0027re summing the volumes of anything in there that has a mesh, not just the colliders. That\u0027s probably what\u0027s making things go completely haywire.\u003Cbr\u003E\nCheck that the parent GO of the mesh filter has some form of collider component attached to it (that is not set as a trigger). Calculate only using those.\n\u003C/p\u003E\n\u003Cp\u003E\n-----\n\u003C/p\u003E\n\u003Cp\u003E\nThe VolumeOfMesh() code you\u0027ve got is a sum of tetrahedrons; I\u0027m a bit rusty but it looks fundamentally sound from here.\n\u003C/p\u003E\n\u003Cp\u003E\n-----\n\u003C/p\u003E\n\u003Cp\u003E\nI made you a plain and simple 1m cube that you can use to calibrate and make sure your code is working. Just gimme a moment to upload and link it...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/uc?id=0Bzrn-CQh0q4naGF0dmxTQVA2WFk\u0022 rel=\u0022external nofollow\u0022\u003Edownload link\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis is a 1x1x1m cube, you can stack with a mk1 part to confirm. It contains visual mesh (8 vertices, 12 tris) with attached box collider.\n\u003C/p\u003E\n\u003Cp\u003E\nVolume should be 1 or 1.953125. Depends on whether rescaleFactor actually gets applied to the model meshes, or if it\u0027s a scaling factor only applied to the whole part\u0027s root transform. Probably the latter, case (so 1m\u003Csup\u003E3\u003C/sup\u003E) If you get any other result, check to see if it is N x (expected value) or N\u003Csup\u003E3\u003C/sup\u003E x (expected value) which should be telling re: what went wrong.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d suggest trying to get the cube right before moving on to more complex models.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks, the cube will be helpful. \u00A0I was using the stock tanks because they were easy to figure out.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-15T10:55:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056870\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494812389\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cake\u0026gt;pie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, cake\u0026gt;pie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E does calculate the volumes of parts, so you could take a gander at their code. Not completely sure if their computed \u0022volume\u0022 is accurate or merely an approx ballpark (for gameplay, not physics/realism).\n\u003C/p\u003E\n\u003Cp\u003E\nKeep in mind animated/deployable parts and such (volume can change with animation) -- \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E provides a means to supply a manual override value if you find that the computed value is really off the mark.\u003Cbr\u003E\nLikewise for parts that have collider not exactly matching visual model (for whatever reason, e.g. part is surface mount and has a portion that is \u0022embedded\u0022 into its parent).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nrescalefactor is default to 1.25 if not specified \u0026lt;-- this might be the source of your grief?\n\u003C/p\u003E\n\u003Cp\u003E\nscale/rescalefactor apply to all 3 axes, so if you need to scale the volume, it should be by scale^3 / rescalefactor^3\n\u003C/p\u003E\n\u003Cp\u003E\niirc scale in MODEL nodes (as opposed to mesh = ...) specifies 3 axes independently.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nhth\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t care about animated/deployable parts. \u00A0This is for fuel and other resources.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, I can get the following values from the parts regarding scaling:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\npartPrefab.scaleFactor\n\u003C/li\u003E\n\u003Cli\u003E\npartPrefab.rescaleFactor\n\u003C/li\u003E\n\u003Cli\u003E\npartPrefab.transform.localScale.x\n\u003C/li\u003E\n\u003Cli\u003E\npartPrefab.transform.localScale.y\n\u003C/li\u003E\n\u003Cli\u003E\npartPrefab.transform.localscale.z\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nSo, I don\u0027t know what scaleFactor\u00A0is. \u00A0It\u0027s usually equal to the rescaleFactor, but there are some parts where it is way different.\n\u003C/p\u003E\n\u003Cp\u003E\nThe FL-T*00 tanks for example, have a scaleFactor = 0.08, yet the rescaleFactor = 1.25\n\u003C/p\u003E\n\u003Cp\u003E\nFinally, in some part cfg files, I see a \u0022scale =\u0022, but can\u0027t find anything related. \u00A0Is this just old and leftover?\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, thanks, this helps a lot.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-15T11:11:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056966\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494820139\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cake\u0026gt;pie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, cake\u0026gt;pie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLooks like you\u0027re summing the volumes of anything in there that has a mesh, not just the colliders. That\u0027s probably what\u0027s making things go completely haywire.\u003Cbr\u003E\nCheck that the parent GO of the mesh filter has some form of collider component attached to it (that is not set as a trigger). Calculate only using those.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDoes GO refer to GameObject?\n\u003C/p\u003E\n\u003Cp\u003E\nWould this suffice:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Evar c = m.gameObject.GetComponents\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Collider\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\nif (c.Count() \u0026gt; 0)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-15T11:24:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056966\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494820139\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cake\u0026gt;pie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, cake\u0026gt;pie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI made you a plain and simple 1m cube that you can use to calibrate and make sure your code is working. Just gimme a moment to upload and link it...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/uc?id=0Bzrn-CQh0q4naGF0dmxTQVA2WFk\u0022 rel=\u0022external nofollow\u0022\u003Edownload link\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis is a 1x1x1m cube, you can stack with a mk1 part to confirm. It contains visual mesh (8 vertices, 12 tris) with attached box collider.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nLooks like it is a 1.25m cube, see the pic (that\u0027s a FL-T100 attached):\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedOther ipsEmbeddedOther_limited\u0022\u003E\n\u003Ciframe data-controller=\u0022core.front.core.autosizeiframe\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?app=core\u0026amp;module=system\u0026amp;controller=embed\u0026amp;url=http://imgur.com/a/5q9K6\u0022 style=\u0022height:457px;\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057163\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494846708\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDoes GO refer to GameObject?\n\u003C/p\u003E\n\u003Cp\u003E\nWould this suffice:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022kwd\u0022\u003Evar\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E c \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E m\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EgameObject\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EGetComponents\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026lt;\u003C/span\u003E\u003Cspan\u003ECollider\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026gt;();\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ec\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ECount\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E()\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNope, it doesn\u0027t. \u00A0I added this, and many of the tanks failed the check.\n\u003C/p\u003E\n\u003Cp\u003E\nOn the other hand, I got your cube in, and using the size of 1.25, got the correct volume\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2017-05-15T11:51:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057169\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494847450\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLooks like it is a 1.25m cube, see the pic (that\u0027s a FL-T100 attached):\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWorking exactly as intended. The model is 1m cube, and default rescaleFactor is 1.25. So the cube matches up to the FL-T100.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs for your other question:\u003Cbr\u003E\n- yes GO = gameobject. but...\u003Cbr\u003E\n- I did not consider all possibilities earlier, so that advice is flawed: it only works if you\u0027re dealing with mesh collider generated from the visual mesh, and both are attached to the same game object\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what the FL-T200 looks like dissected:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022flt200.png\u0022 class=\u0022ipsImage\u0022 src=\u0022https://s18.postimg.org/plzuenph5/flt200.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt uses a mesh collider (blue, GO:node_collider) that is a much simplified cylinder. This is what you want to compute your volume with.\u003Cbr\u003E\nThe visual mesh is orange (GO:fueltank).\n\u003C/p\u003E\n\u003Cp\u003E\nInstead of having those two components reside in the same GO, they are in separate GOs. Here, the two are parented to the same parent transform (GO:fuelTank) but that is not guaranteed to be the case in general.\u003Cbr\u003E\nSo I don\u0027t think you can use \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EgetComponent\u0026lt;MeshFilter\u0026gt;()\u003C/span\u003E as your starting point ... it is not guaranteed to help you find the colliders. And you\u0027d want to compute volume using colliders, not with the visual meshes.\u003Cbr\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Emesh = m.sharedMesh\u003C/span\u003E only works if it happens to be a mesh collider sharing a mesh with the visual model. You\u0027d often have colliders unrelated to visual mesh -- either simplified meshes, or primitive colliders (cheaper)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d suggest trying \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Emodel.GetComponentsInChildren\u0026lt;Collider\u0026gt;()\u003C/span\u003E and handle volume depending on what kind of colliders you find. Exclude colliders that are triggers (check collider.isTrigger, also layer 21 part triggers).\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s a small gotcha there, though -- there may be colliders you actually don\u0027t want. On the FL-T200, that\u0027s the spherical collider \u0022Surface Attach Collider\u0022. Not sure what it\u0027s purpose is, but I don\u0027t think you\u0027d consider that to be part of the tank\u0027s volume, and there is nothing here in tag/layer to help distinguish it from the collider(s) you want. =$\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-15T11:51:57Z","Content":"\n\u003Cp\u003E\nSo, I removed that check, and the numbers are looking much better. \u00A0But not yet perfect.\n\u003C/p\u003E\n\u003Cp\u003E\nI would expect that if I calculated the volume of the cylinder (back to the FL-T tanks) using the outer bounds, that it would always be greater than or equal to the mesh volume.\n\u003C/p\u003E\n\u003Cp\u003E\nThis isn\u0027t always the case. \u00A0The FL-T100 comes up with a wrong volume\n\u003C/p\u003E\n\u003Ctable border=\u00221\u0022 cellpadding=\u00221\u0022 cellspacing=\u00221\u0022 style=\u0022width:0px;\u0022\u003E\u003Cthead\u003E\u003Ctr\u003E\u003Cth scope=\u0022col\u0022\u003E\nName\n\u003C/th\u003E\n\u003Cth scope=\u0022col\u0022\u003E\nTitle\n\u003C/th\u003E\n\u003Cth scope=\u0022col\u0022\u003E\nMesh volume\n\u003C/th\u003E\n\u003Cth scope=\u0022col\u0022\u003E\nv = h * Pi * r^2\n\u003C/th\u003E\n\u003C/tr\u003E\u003C/thead\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nfuelTank3-2\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nRockomax Jumbo-64 Fuel Tank\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n36.37697\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n39.46097\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nfuelTankSmallFlat\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nFL-T100 Fuel Tank\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n1.323484\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n\u003Cspan style=\u0022color:#c0392b;\u0022\u003E0.800261\u003C/span\u003E\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nfuelTankSmall\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nFL-T200 Fuel Tank\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n0.955222\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n1.356731\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nfuelTank\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nFL-T400 Fuel Tank\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n1.973512\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n2.337787\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nfuelTank.long\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nFL-T800 Fuel Tank\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n3.969568\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n4.637522\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nfuelTank2-2\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nRockomax X200-16 Fuel Tank\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n8.878579\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n10.04194\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nfuelTank1-2\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nRockomax X200-32 Fuel Tank\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n18.0017\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n19.85342\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nfuelTank4-2\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd height=\u002220\u0022 width=\u002264\u0022\u003E\nRockomax X200-8 Fuel Tank\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n4.368142\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003Ctd\u003E\n\u003Ctable border=\u00220\u0022 cellpadding=\u00220\u0022 cellspacing=\u00220\u0022 width=\u002264\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd align=\u0022right\u0022 height=\u002220\u0022 width=\u002264\u0022\u003E\n5.182893\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057189\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494849111\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cake\u0026gt;pie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, cake\u0026gt;pie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWorking exactly as intended. The model is 1m cube, and default rescaleFactor is 1.25. So the cube matches up to the FL-T100.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs for your other question:\u003Cbr\u003E\n- yes GO = gameobject. but...\u003Cbr\u003E\n- I did not consider all possibilities earlier, so that advice is flawed: it only works if you\u0027re dealing with mesh collider generated from the visual mesh, and both are attached to the same game object\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what the FL-T200 looks like dissected:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022flt200.png\u0022 class=\u0022ipsImage\u0022 src=\u0022https://s18.postimg.org/plzuenph5/flt200.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt uses a mesh collider (blue, GO:node_collider) that is a much simplified cylinder. This is what you want to compute your volume with.\u003Cbr\u003E\nThe visual mesh is orange (GO:fueltank).\n\u003C/p\u003E\n\u003Cp\u003E\nInstead of having those two components reside in the same GO, they are in separate GOs. Here, the two are parented to the same parent transform (GO:fuelTank) but that is not guaranteed to be the case in general.\u003Cbr\u003E\nSo I don\u0027t think you can use \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EgetComponent\u0026lt;MeshFilter\u0026gt;()\u003C/span\u003E as your starting point ... it is not guaranteed to help you find the colliders. And you\u0027d want to compute volume using colliders, not with the visual meshes.\u003Cbr\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Emesh = m.sharedMesh\u003C/span\u003E only works if it happens to be a mesh collider sharing a mesh with the visual model. You\u0027d often have colliders unrelated to visual mesh -- either simplified meshes, or primitive colliders (cheaper)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d suggest trying \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Emodel.GetComponentsInChildren\u0026lt;Collider\u0026gt;()\u003C/span\u003E and handle volume depending on what kind of colliders you find. Exclude colliders that are triggers (check collider.isTrigger, also layer 21 part triggers).\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s a small gotcha there, though -- there may be colliders you actually don\u0027t want. On the FL-T200, that\u0027s the spherical collider \u0022Surface Attach Collider\u0022. Not sure what it\u0027s purpose is, but I don\u0027t think you\u0027d consider that to be part of the tank\u0027s volume, and there is nothing here in tag/layer to help distinguish it from the collider(s) you want. =$\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ll continue this this evening, need to go to work.\n\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s a nice display, is it an available mod?\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-15T12:18:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057189\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494849111\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cake\u0026gt;pie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n26 minutes ago, cake\u0026gt;pie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo I don\u0027t think you can use \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EgetComponent\u0026lt;MeshFilter\u0026gt;()\u003C/span\u003E as your starting point ... it is not guaranteed to help you find the colliders. And you\u0027d want to compute volume using colliders, not with the visual meshes.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOther than a performance issue, why wouldn\u0027t I want to use the visual meshes for volume?\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2017-05-15T13:44:28Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057149\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494845703\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFinally, in some part cfg files, I see a \u0022scale =\u0022, but can\u0027t find anything related. \u00A0Is this just old and leftover?\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, thanks, this helps a lot.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn part cfgs, scale and rescale factor both affect the final visual size in the game.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057190\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494849117\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n44 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat\u0027s a nice display, is it an available mod?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSarbian\u0027s \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?showtopic=135726\u0022 rel=\u0022\u0022\u003EDebug Stuff\u003C/a\u003E. Incredibly handy tool.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057206\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494850694\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n31 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOther than a performance issue, why wouldn\u0027t I want to use the visual meshes for volume?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere is no guarantee that the visual meshes are closed polyhedra. Visual model can be pretty much whatever as long as it \u0022looks fine\u0022, and does not have to be physically \u0022correct\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nThat means there may be breaks, seams, and missing faces, whether for visual reasons (edge split for sharp corners) or cost savings (removal of faces that are not outward facing) or just plain convenience for the 3d artist (using copies/mirroring to save effort; subdividing mesh a certain way for easier texture mapping).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s a simple example that I cooked up real quick to illustrate why calculating with the visual mesh could really mess things up:\u003Cbr\u003E\u003Ca href=\u0022https://postimg.org/image/xrf8y5tvj/\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://s3.postimg.org/xrf8y5tvj/degen_ex.jpg\u0022 class=\u0022ipsImage\u0022 alt=\u0022degen_ex.jpg\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSo here\u0027s a part that is fundamentally a 2x2x4 cuboid. boxcollider is what you\u0027d expect: 2x2x4, 6 sided cuboid, 12 tris -- reflects the physical shape of the part. Visually, though, it is made up of two meshes, one for each half. visCube1 is selected (yellow) -- only 5 sides of a cube, 10 tris. visCube2 (orange) on the other half is the same. The \u0022inside\u0022 face of each cube is unnecessary in the visual mesh.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you compute on the visual meshes, I suspect you\u0027re going to end up with a volume that is only 5/6 of what it should be -- each mesh is calculated as a sum of 10 tetrahedra about its local origin, so your final total is missing an octohedral volume where the two cubes meet.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is a very simplified example, of course; a real example would have far more detailed visual meshes.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd to hopefully convince you that this is not just a contrived example -- a real use case that is analogous to this would be a series of parts which share a set of standard end caps, but have a different middle section. Artist would model the end caps once and just reuse them.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-15T14:48:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057267\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494855868\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cake\u0026gt;pie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n54 minutes ago, cake\u0026gt;pie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIn part cfgs, scale and rescale factor both affect the final visual size in the game.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSarbian\u0027s \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?showtopic=135726\u0022 rel=\u0022\u0022\u003EDebug Stuff\u003C/a\u003E. Incredibly handy tool.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere is no guarantee that the visual meshes are closed polyhedra. Visual model can be pretty much whatever as long as it \u0022looks fine\u0022, and does not have to be physically \u0022correct\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nThat means there may be breaks, seams, and missing faces, whether for visual reasons (edge split for sharp corners) or cost savings (removal of faces that are not outward facing) or just plain convenience for the 3d artist (using copies/mirroring to save effort; subdividing mesh a certain way for easier texture mapping).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s a simple example that I cooked up real quick to illustrate why calculating with the visual mesh could really mess things up:\u003Cbr\u003E\u003Ca href=\u0022https://postimg.org/image/xrf8y5tvj/\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022degen_ex.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022https://s3.postimg.org/xrf8y5tvj/degen_ex.jpg\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSo here\u0027s a part that is fundamentally a 2x2x4 cuboid. boxcollider is what you\u0027d expect: 2x2x4, 6 sided cuboid, 12 tris -- reflects the physical shape of the part. Visually, though, it is made up of two meshes, one for each half. visCube1 is selected (yellow) -- only 5 sides of a cube, 10 tris. visCube2 (orange) on the other half is the same. The \u0022inside\u0022 face of each cube is unnecessary in the visual mesh.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you compute on the visual meshes, I suspect you\u0027re going to end up with a volume that is only 5/6 of what it should be -- each mesh is calculated as a sum of 10 tetrahedra about its local origin, so your final total is missing an octohedral volume where the two cubes meet.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is a very simplified example, of course; a real example would have far more detailed visual meshes.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd to hopefully convince you that this is not just a contrived example -- a real use case that is analogous to this would be a series of parts which share a set of standard end caps, but have a different middle section. Artist would model the end caps once and just reuse them.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, I would never think that. \u00A0I know my limitations, and appreciate your taking the time to explain the issues.\n\u003C/p\u003E\n\u003Cp\u003E\nso. you mentioned that scale \u0026amp; rescale factor affect the final size. \u00A0You explained everything else, except the \u0022scale =\u0022 for a mesh.\n\u003C/p\u003E\n\u003Cp\u003E\nUnless, specifying that for a mesh is the same as specifying all three for a model?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2017-05-15T16:04:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057314\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494859733\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n36 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNo, I would never think that. \u00A0I know my limitations, and appreciate your taking the time to explain the issues.\n\u003C/p\u003E\n\u003Cp\u003E\nso. you mentioned that scale \u0026amp; rescale factor affect the final size. \u00A0You explained everything else, except the \u0022scale =\u0022 for a mesh.\n\u003C/p\u003E\n\u003Cp\u003E\nUnless, specifying that for a mesh is the same as specifying all three for a model?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMy bad. I wasn\u0027t accusing you or anything, I just like to cover the bases -- in this case illustrate that the toy example does indeed reflect pertinent aspects of real use cases.\n\u003C/p\u003E\n\u003Cp\u003E\nYeah scale and rescaleFactor outside of a MODEL node have a single scalar for all three axes. scale inside a MODEL node specifies each axis independently.\u003Cbr\u003E\nDisclaimer: I\u0027ve never tried MODEL node in conjunction with non-standard scale/rescaleFactor outside the MODEL node. I don\u0027t know if there might be any unforeseen interactions if you do that.\n\u003C/p\u003E\n\u003Cp\u003E\nIt also occurs to me that you might be able to get away with ignoring whatever is in the part cfgs. The game has already parsed that stuff!\u003Cbr\u003E\nI would suspect that the the final scale multiplier is already in the root transform\u0027s \u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/Transform-localScale.html\u0022 rel=\u0022external nofollow\u0022\u003ElocalScale\u003C/a\u003E; at least, that seems to be the most logical place to look first.\n\u003C/p\u003E\n\u003Cp\u003E\nThis brings to mind another potential gotcha: child transforms in the part may have scaling applied locally. So to be real safe and/or pedantic, for any mesh/collider of interest, you\u0027d want to trace all the way back up the hierarchy to check for that. (It\u0027s not straightforward multiplication all the way, though; things get messy if rotations are involved -- see \u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/Transform-lossyScale.html\u0022 rel=\u0022external nofollow\u0022\u003ElossyScale\u003C/a\u003E)\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2017-10-16T22:03:36Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E\u00A0did you ever find a solution to this problem?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0I have a similar issue and would like to roughly calculate the surface area and / or volume of a part\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-10-16T22:53:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223196723\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221508191416\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n48 minutes ago, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E\u00A0did you ever find a solution to this problem?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0I have a similar issue and would like to roughly calculate the surface area and / or volume of a part\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot fully. I can get a rough number but only for things like cylinders squares Etc. What I would really like is for someone to be able to do this for any part, but this involves certain types of knowledge which I don\u0027t have.\n\u003C/p\u003E\n\u003Cp\u003E\nIf someone would be able to get me that code, I have a mod in mind which would be able to automatically set volumes of tanks and masses of Tanks to be fully consistent no matter what mod they come from including squads. But in order to do that, I need to know the volume and surface area of the part in question.\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2017-10-16T22:57:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223196774\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221508194421\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\norder to do that, I need to know the volume and surface area of the part in question.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, I think that ultimately it will be an approximation unless the game engine does it for us as it would be too difficult due to the variety of shapes. You could limit to just cylinders, spheres...\u003Cbr\u003E\nAnyway, I did find that \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E is just using the bounds\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/ihsoft/KIS/blob/master/Source/KIS_Shared.cs#L539\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/ihsoft/\u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E/blob/master/Source/KIS_Shared.cs#L539\u003C/a\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E public static float GetPartVolume(AvailablePart partInfo) {\n    var p = partInfo.partPrefab;\n    float volume;\n\n    // If there is a KIS item volume then use it but still apply scale tweaks. \n    var kisItem = p.GetComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ModuleKISItem\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n    if (kisItem \u0026amp;\u0026amp; kisItem.volumeOverride \u0026gt; 0) {\n      volume = kisItem.volumeOverride;\n    } else {\n      var boundsSize = PartGeometryUtil.MergeBounds(p.GetRendererBounds(), p.transform).size;\n      volume = boundsSize.x * boundsSize.y * boundsSize.z * 1000f;\n    }\n\n    // Apply cube of the scale modifier since volume involves all 3 axis.\n    return (float) (volume * Math.Pow(GetPartExternalScaleModifier(partInfo), 3));\n  }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-10-16T23:16:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223196778\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221508194641\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 minutes ago, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYeah, I think that ultimately it will be an approximation unless the game engine does it for us as it would be too difficult due to the variety of shapes. You could limit to just cylinders, spheres...\u003Cbr\u003E\nAnyway, I did find that \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E is just using the bounds\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/ihsoft/KIS/blob/master/Source/KIS_Shared.cs#L539\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/ihsoft/\u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E/blob/master/Source/KIS_Shared.cs#L539\u003C/a\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003E public static float GetPartVolume(AvailablePart partInfo) {\n    var p = partInfo.partPrefab;\n    float volume;\n\n    // If there is a KIS item volume then use it but still apply scale tweaks. \n    var kisItem = p.GetComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ModuleKISItem\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n    if (kisItem \u0026amp;\u0026amp; kisItem.volumeOverride \u0026gt; 0) {\n      volume = kisItem.volumeOverride;\n    } else {\n      var boundsSize = PartGeometryUtil.MergeBounds(p.GetRendererBounds(), p.transform).size;\n      volume = boundsSize.x * boundsSize.y * boundsSize.z * 1000f;\n    }\n\n    // Apply cube of the scale modifier since volume involves all 3 axis.\n    return (float) (volume * Math.Pow(GetPartExternalScaleModifier(partInfo), 3));\n  }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo that would be fine for the volume, up to a point, but doesn\u0027t do anything for the surface area\n\u003C/p\u003E\n"},{"CreatedByName":"gomker","CreatedById":141269,"CreatedDateTime":"2017-10-16T23:18:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223196803\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221508195794\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nsurface area\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI was thinking of trying to back track it with a ratio\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Surface-area-to-volume_ratio\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Surface-area-to-volume_ratio\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nBut same problem, approximation. If its just using the Rectangular bounds, but this will not be accurate for irregular shaped parts... I guess it could work for sphere\u0027s, cylinders and rectangular parts\n\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2017-10-17T00:09:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223196804\u0022 data-ipsquote-contentid=\u0022160634\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221508195937\u0022 data-ipsquote-userid=\u0022141269\u0022 data-ipsquote-username=\u0022gomker\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n42 minutes ago, gomker said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI was thinking of trying to back track it with a ratio\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Surface-area-to-volume_ratio\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Surface-area-to-volume_ratio\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nBut same problem, approximation. If its just using the Rectangular bounds, but this will not be accurate for irregular shaped parts... I guess it could work for sphere\u0027s, cylinders and rectangular parts\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOnly ish at best as bounding boxes in KSP, appear under my interrogation, to be regardless of actual mesh form. rectangular, seemingly formed\u00A0 from the tallest and widest vertices and projected into a cube. The only purpose of the bounds is to prevent the object spawning inside another.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2017-10-17T03:15:47Z","Content":"\n\u003Cp\u003E\nI think \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E\u00A0finds the volume of a parts/parts using voxelisation\u00A0\u003Ca href=\u0022https://github.com/mattatz/unity-voxel\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/mattatz/unity-voxel\u003C/a\u003E\n\u003C/p\u003E\n"}]}