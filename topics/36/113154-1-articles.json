{"TopicId":113154,"ForumId":36,"TopicTitle":"[Idea] Realistic ground scatter","CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-06-16T23:02:03Z","PageNum":1,"Articles":[{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-06-16T23:02:03Z","Content":"The trees on Kerbin (which can only be seen with ground scatter enabled) are rather low-poly when standing right by them - but they have too many polygons to render a realistic number of them.\n\nSo, I\u0027ve been thinking about how one might make a mod to fix this. I made some mock-ups in GIMP of what I came up with (and what I believe many modern games do); grey is what you\u0027d actually be seeing, red is the edges of in-game polygons.\n\nMy proposed solution: A proper LOD (level of detail) system for trees. Close up, trees would be fairly high-poly models, with at a few polygons per branch:\n\n![5clKpNF.png](http://i.imgur.com/5clKpNF.png)\n\nOnce the camera is more than say 100 meters away from them, they fade into a more simplistic model of three intersecting planes. The key to making this look realistic is a combination of proper normal mapping, so the trees appear lit from the correct angle, and a shader which fades the planes to transparent as they come close to edge-on (which avoids the effect of stretched trees).\n\n![6WUQa6f.png](http://i.imgur.com/6WUQa6f.png)\n\nFinally, for further distances, the trees are all drawn on the same texture, parallel to the ground. Ideally, this would be part of the terrain shader itself rather than seperate geometry. (This is a top-down view.)\n\n![EoYFQTF.png](http://i.imgur.com/EoYFQTF.png)\n\nTo prevent pop-in, the low-poly trees should fade out as the ground texture fades in. Here is a mock-up of how that might look (notice the fading of the furthest trees):\n\n![osX3t13.png](http://i.imgur.com/osX3t13.png)\n\nAnd that same image with polygons visible, showing the transition from high(ish)-poly trees to low-poly trees at about a hundred meters out:\n\n![GAq2OTx.png](http://i.imgur.com/GAq2OTx.png)\n\nSo why did I start this thread? Quite simply, because I need help. I\u0027ve created some mods for KSP but don\u0027t know enough about Unity to do this - in particular, I don\u0027t know how to modify geometry directly without adding a game object for each tree, and I don\u0027t know very much about Unity shaders. So, I am looking for feedback, and pointers if anyone can help."},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-06-17T00:11:27Z","Content":"I doubt I\u0027d be of any help plugin-wise, but I\u0027m very keen on seeing how this turns out.\n\nI\u0027m also interested in procedurally generating cities, towns, villages and roads, although that\u0027s another topic altogether."},{"CreatedByName":"G\u0026#039;th","CreatedById":98595,"CreatedDateTime":"2015-06-17T01:37:16Z","Content":"LOD would do wonders for visuals in this game. Especially for planet creators, as then they could do real jungle type worlds and not have it be crazy hard to run."},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-06-17T01:58:40Z","Content":"I\u0027d like to add a few more suggestions to the original proposal:\n\n**Variations in plant size / maturity**\n\nShould be fairly easy, with randomized scaling\n\n**Variations in plant types depending on biome**\n\n - Palm trees near Shores\n\n - Deciduous (broadleaf) in Grasslands/Highlands\n\n - Coniferous (evergreen) in Mountains\n\n - Cacti in Desert\n\n - Shrubs in most biomes to add visual interest\n\n**Seed-based procedural generation**\n\nThe same seed value results in the same distribution of scatter between savegames"},{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-06-17T02:03:26Z","Content":"\u003E \n\u003E I\u0027d like to add a few more suggestions to the original proposal:\n\u003E **Variations in plant size / maturity**\n\u003E \n\u003E Should be fairly easy, with randomized scaling\n\nIndeed.\n\n\u003E \n\u003E **Variations in plant types depending on biome**\n\u003E  - Palm trees near Shores\n\u003E \n\u003E  - Deciduous (broadleaf) in Grasslands/Highlands\n\u003E \n\u003E  - Coniferous (evergreen) in Mountains\n\u003E \n\u003E  - Cacti in Desert\n\u003E \n\u003E  - Shrubs in most biomes to add visual interest\n\nThat was something I was hoping to do once I had the basic system working, as well as grass.\n\n\u003E \n\u003E **Seed-based procedural generation**\n\u003E The same seed value results in the same distribution of scatter between savegames\n\nHaving them line up predictably is required anyway, so that they match up with the static textures at long draw distances."},{"CreatedByName":"Joshwoo70","CreatedById":111345,"CreatedDateTime":"2015-06-17T02:16:20Z","Content":"Might as well add the stock feature that we need to somehow disable it so that the users will not compilain the low poly trees. (Add coliders too? Amount of scatter percentage?)\n\nEDIT : do also do for other planets. Eg (laythe mun minmus etc)\n\nEDIT 2 : nice idea i like it!\n\n- - - Updated - - -\n\n\u003E I\u0027m also interested in procedurally generating cities, towns, villages and roads, although that\u0027s another topic altogether.\n\nit is kinda difficult. You know that those cities need meshes and colliders.\n\nEDIT 3 : i just realised it is the EPL original owner! ![:o](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png)"},{"CreatedByName":"KillAshley","CreatedById":128696,"CreatedDateTime":"2015-06-17T09:56:27Z","Content":"i really hope you can pull this off dude, one selfish suggestion as a planet pack creator is the ability to add custom models \u0026 textures. Then we can add alien objects as scatter to other worlds easily ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nare you planning on having a collision mesh system? or just the current \u0022trees aren\u0027t relly there\u0022 system?"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-06-17T13:12:49Z","Content":"So, basically you are proposing reinventing the realtree system for KSP. Nice."},{"CreatedByName":"mysteriosmind","CreatedById":128626,"CreatedDateTime":"2015-06-18T15:50:37Z","Content":"You might want to have a look at this video then: \n\n\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/4Ghulpp6CPw?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\n\nIt shows how what you are describing is done in Proland and gives some details on how it is achieved. Not that I understand much off it, but maybe it makes more sense to you. The source code and some documentation is available on the Proland website as well: [http://proland.inrialpes.fr/index.html](http://proland.inrialpes.fr/index.html) I am not sure if it is even possible to bring this to KSP, but there seems to exist a (basic) port to Unity [http://scrawkblog.com/2014/05/20/proland-to-unity-forests/](http://scrawkblog.com/2014/05/20/proland-to-unity-forests/)"},{"CreatedByName":"skykooler","CreatedById":60459,"CreatedDateTime":"2015-06-18T16:18:20Z","Content":"I\u0027ve looked at Proland\u0027s trees before. The trouble with them in regards to KSP is that they use geometry shaders (bits of code that the GPU uses to figure out where polygons are), which requires a higher level of DirectX/OpenGL compatibility than KSP has."},{"CreatedByName":"mysteriosmind","CreatedById":128626,"CreatedDateTime":"2015-06-18T16:44:06Z","Content":"Yeah, I kinda expected that there were some reasons, why this wouldn\u0027t work in KSP. Anyway, it sounds like you know about KSP\u0027s limitations pretty well, so you might be able to make something similar in a different way!"},{"CreatedByName":"Mekan1k","CreatedById":48750,"CreatedDateTime":"2015-06-22T02:53:57Z","Content":"If someone managed to make a working test version of this mod, I would test it to destruction."},{"CreatedByName":"Joshwoo70","CreatedById":111345,"CreatedDateTime":"2015-06-22T15:49:46Z","Content":"\u003E \n\u003E If someone managed to make a working test version of this mod, I would test it to destruction.\n\nSame.. wait where have you been?! We want to see the atories you write!"}]}