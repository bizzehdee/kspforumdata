{"TopicId":86596,"ForumId":36,"TopicTitle":"0.90 Kerbal Weather Systems! Alpha 0.5.3 WIP! (Jan 2)","CreatedByName":"silverfox8124","CreatedById":125032,"CreatedDateTime":"2014-10-09T03:27:37Z","PageNum":15,"Articles":[{"CreatedByName":"ThatOneBritishGuy...","CreatedById":144135,"CreatedDateTime":"2015-08-24T13:52:11Z","Content":"\n\u003Cp\u003EThat\u0027s because they didn\u0027t have you and your team helping them \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"silverfox8124","CreatedById":125032,"CreatedDateTime":"2015-08-24T16:26:53Z","Content":"\n\u003Cp\u003E@ThatOneBritishGuy... oh stahp it you~ I\u0027m not as good as you make me out to be. Don\u0027t get your hopes up too high, I don\u0027t want to crush them hard when I can\u0027t deliver. However,\u003C/p\u003E\u003Cp\u003EDev Note: We\u0027re making progress slowly still, working on some calcs regarding rain droplet size, then it\u0027ll be putting together the on-paper model and then seeing what it outputs. From there I will let you know what comes out of it. Should be hopefully soon. Wish us luck!\u003C/p\u003E\u003Cp\u003E~SilverFox8124\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-08-26T16:19:40Z","Content":"\n\u003Cp\u003EHow does it work doing crosswind landings with KSP\u0027s wheels?\u003C/p\u003E\u003Cp\u003EWith this mod it looks like it becomes possible to fly a plane at a crab angle, and therefore have to land on the runway \u0022diagonally\u0022. Has anyone tried dealing with this and how well it works with KSP\u0027s strange wheel physics? I\u0027m a bit concerned that it might not model \u0022skidding\u0022 at the point of touchdown properly and therefore instead of the wheel friction forcing the plane to turn a few degrees until it\u0027s aligned with the runway, it will instead make the wheels \u0022jam up\u0022 a bit and impart flip-over rotation to the vessel.\u003C/p\u003E\u003Cp\u003EI have a landing script in kOS that I\u0027d like to try how it behaves when a crosswind causes surface prograde direction to differ a few degrees from the planes\u0027 facing, but installing this mod, as it\u0027s not updated to 1.0 and also depends on FAR, may come with a bit of baggage that makes it take effort to get it working. I was sort of hoping others might already have tried this (about the wheels on landing) and could report on whether it works well or not before I decide to embark upon getting this installed and working.\u003C/p\u003E\n"},{"CreatedByName":"silverfox8124","CreatedById":125032,"CreatedDateTime":"2015-08-31T19:17:21Z","Content":"\n\u003Cp\u003E@Steven Mading, crosswind can be fun, it should be fine, idk.\u003C/p\u003E\u003Cp\u003EDev Update! So... good news and bad news. Good news is that the model is making further progress. Bad news is that Squad doesn\u0027t like doing planets right. The temperature scales for all the planets are/can be off by a good chunk and temps at different latitudes don\u0027t correspond with what our model is showing, and with such, we\u0027d have to butcher a perfectly good model just to accommodate for stock\u0027s crap. It\u0027s seriously starting to annoy me. I know you guys want stock really badly, but I\u0027m afraid to say that it\u0027s not looking too peachy. RSS support will be had in the next update as it gives \u0022realler\u0022 values for us to work with.\u003C/p\u003E\u003Cp\u003EStock support has butchered not only our model, but the chances for players to make their own planets to add to KWS. It has butchered it to the point where we could\u0027ve had a model going by now. It has butchered it to the point where we have to un-butcher it to get RSS support, and that is ass-backwards.\u003C/p\u003E\u003Cp\u003EIf full on stock support is to be a thing, it may not be until it\u0027s in the stock game itself, as there is too much squad has gotten wrong for me to work with reliably.\u003C/p\u003E\u003Cp\u003EIt has killed too much of my dreams. I am holding off full-stock support. The only stock support I may put in, is for stock aero, in prep for a potential future stock support if a KWS Lite comes out.\u003C/p\u003E\u003Cp\u003EUntil next time,\u003C/p\u003E\u003Cp\u003E~SilverFox8124\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-09-01T01:14:41Z","Content":"\n\u003Cp\u003Ethings might be better depending on how Real Heat turns out. I think it\u0027s supposed to fix the temp model for planets, although not sure if that applies to stock as well. Out of the box it\u0027s made for RSS\u003C/p\u003E\n"},{"CreatedByName":"silverfox8124","CreatedById":125032,"CreatedDateTime":"2015-09-01T01:43:03Z","Content":"\n\u003Cp\u003EThe thing is, with RSS, things are MUCH, MUCH larger, meaning the cells have lesser accuracy, and that means I need to up the cells for more accuracy, and then that means a lot more resource usage... about 280MB - 1GB per planet... so yeah... As much as I\u0027d love to go stock, the stock model is just absolute crap for use with weather.\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-09-10T10:21:09Z","Content":"\n\u003Cp\u003EIs high accuracy really needed? What if use the huge cells for weather calculations and then make some approximation inside a cell?\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-09-10T18:11:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ser\u0022 data-cite=\u0022Ser\u0022\u003E\u003Cdiv\u003EIs high accuracy really needed? What if use the huge cells for weather calculations and then make some approximation inside a cell?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s a question worth asking. Indeed is so important, it is considered also in the development of the weather model.\u003C/p\u003E\u003Cp\u003EActually, there isn\u0027t any answer yet. It would require to test the model in KWS, and conduct some good amount of testing, to see how accurate it is. How much values drifts from what is expected, if stability ensues and how long it takes. Accuracy isn\u0027t only about the size of cells actually, is about the time between updates. We need to find the nice spots where accuracy and performance are both achieved.\u003C/p\u003E\u003Cp\u003EOne value that shows this problem of accuracy is horizontal windspeed. Windspeed is the value that allows an equilibrium among the forces acting on air (pressure gradient, coriolis, friction). Pressure gradient requires to compute the average pressure (at each specific reference altitude) in a range of cells, and divide by the distance among cells (the actual mechanic considers all surrounding cells). With larger cells, pressure would have to be the average of a larger area, and that smoothes highs and lows; and dividing for a greater distance, the resulting gradient pressure force would often be too low.\u003C/p\u003E\u003Cp\u003EOf course wind has major effects on other weather aspects, like the relative movement of air masses, driving to weather fronts and all associated phenomena, but also about the amount of evaporation and convection.\u003C/p\u003E\u003Cp\u003EWith some values, the lack of accuracy could be \u0022adjusted\u0022 tuning the model. Windspeed however isn\u0027t that simple: if a \u0022tuning\u0022 factor was used to bring windspeed to its expected value, with a large cell that would mean hugely more air moving than would naturally occur, and for larger distances. I\u0027d expect than to see humid air over deserts, warm air over the poles (with imaginable consequences).\u003C/p\u003E\u003Cp\u003EUnfortunately, using large cells for \u0022general weather\u0022 could then make the values totally unfit. Isn\u0027t like the found values would be known with some lesser accuracy (say, like \u002B/- 1% of the true values) and then some \u0022refinement\u0022 process could allow to improve them (e.g. to \u002B/- 0.1%): the found values would bring to a completely different situation instead.\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-09-11T13:32:07Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@diomedea\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI see. You are definitely more familiar with the subject than I am, so I\u0027m just trying to understand.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Ewith a large cell that would mean hugely more air moving than would naturally occur, and for larger distances\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut doesn\u0027t having pressure difference between larger cells mean that in case of large amount of smaller cells we\u0027d have the same amount of air moving as a sum of smaller flows? In other words, wouldn\u0027t the sum of smaller flows tend to do the same job of moving the same amount of air as a big flow between large areas if there\u0027s a difference in their potentials? On other hand, if we had many little winds that compensate each other, that would be equal to zero difference in pressure between large cells, in average, so IMHO using larger cells would just nullify local weather variety. Yes, in that case we\u0027d have, say, desert air areas covering significant areas of ocean but that\u0027s a question of accuracy, the same picture just in larger \u0022pixels\u0022.\u003C/p\u003E\n"},{"CreatedByName":"silverfox8124","CreatedById":125032,"CreatedDateTime":"2015-09-11T18:32:50Z","Content":"\n\u003Cp\u003E@Ser\u003C/p\u003E\u003Cp\u003E(Note: I could be wrong, but I\u0027m probably not)\u003C/p\u003E\u003Cp\u003EHaving larger cells means less accuracy, and of course, less weather phenomenon can happen. Smaller cells means that we can more reliably produce real world results as weather in a local area is a result of the sum of the surrounding area\u0027s data. No matter how we do this, it\u0027s a metric .... tonne of data to process, store, and retrieve, there\u0027s almost no way around it. It\u0027s going to be CPU intensive, and probably consume some good amounts of RAM, when graphical weather effects come in, graphics specs will go up as well. Make sure to note all of this and not try and run KWS on a tiny little netbook, it will not go well for you.\u003C/p\u003E\u003Cp\u003EAnother thing to note: A cell\u0027s data is for that local area. If a cell encompasses something like... half a country, then half the country will be more or less the same temperature, the same humidity, and have the same weather details, pretty much, and the sunrise time wouldn\u0027t be reliable either because there\u0027s too much surface covered by a cell. \u003C/p\u003E\u003Cp\u003EThe main problem here is the memory usage and the amount of cells that come in the grid as we move up the levels. We\u0027re going to need to do some number crunching and such, but I\u0027d honestly tell you to expect to have about 2-6GB of RAM dedicated to KWS. That\u0027s just how it\u0027s going to be.\u003C/p\u003E\u003Cp\u003EBuilding this weather simulation has not been easy at all for us, there are challenges and hurdles literally *every* step of the way, with the entire time we need to be concerned about how much your computer would melt. What makes it even harder for us is that Unity stuff isn\u0027t kind to multi-threading, so we can\u0027t easily work with it in that way of parallelizing our work. We want to bring you guys something that\u0027s as real as we can get it, and it\u0027s going to come at a hefty resource cost, that\u0027s how it is until some godly revelation is had.\u003C/p\u003E\u003Cp\u003ETL;DR: Yes, smaller cells accumulate into the larger picture, but are necessary for weather phenomena to function properly to scale. This work is hard, and it\u0027ll take a while to develop, and will be resource heavy, sorry but that\u0027s how she goes for now.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-09-12T10:00:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ser\u0022 data-cite=\u0022Ser\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EBut doesn\u0027t having pressure difference between larger cells mean that in case of large amount of smaller cells we\u0027d have the same amount of air moving as a sum of smaller flows? In other words, wouldn\u0027t the sum of smaller flows tend to do the same job of moving the same amount of air as a big flow between large areas if there\u0027s a difference in their potentials? On other hand, if we had many little winds that compensate each other, that would be equal to zero difference in pressure between large cells, in average, so IMHO using larger cells would just nullify local weather variety. Yes, in that case we\u0027d have, say, desert air areas covering significant areas of ocean but that\u0027s a question of accuracy, the same picture just in larger \u0022pixels\u0022.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPressure gradient and therefore wind is computed separately for each cell (actually, same goes with alll other weather values). With smaller cells, factors influencing pressure are more localized, and the resulting winds too. Sure I expect large areas of cells with a relatively constant pressure gradient, and therefore wind. But often the barometric field will be uneven, and result in local winds (affecting only a small area, and changing in force/direction, therefore moving air in a very different way). \u003C/p\u003E\u003Cp\u003ELet me consider with large cells, if the conditions exist for a cyclonic low pressure. In the optimal case, it would appear in the center of one cell, so all surrounding cells would show a strong pressure gradient and winds flowing around the central cell (however, changes in windspeed would be averaged for the larger distance). In the worst case, the low is placed at the point where 3 cells meet: each cell than has the same average pressure, and no pressure gradient, no wind: at that scale, it would appear like the cyclone completely disappeared. That would make for fine weather even when it shouldn\u0027t be, but if players want fine weather, they don\u0027t need KWS.\u003C/p\u003E\u003Cp\u003EAnother thing I hope to see, the jet streams occurring at the top of the boundary of air masses with marked thermal differences: if Earth has intense jet streams a few hundred Km wide, the different scale of Kerbin would make me expect to see them a few tens Km. The streams would be wide as the cells, but also average for the cell size, therefore appear less intense if the cells are too wide.\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-09-12T13:19:02Z","Content":"\n\u003Cp\u003EGuys, if you succeed that would be wonderful. Have you looked at FSX weather addons, like Real Enviroment Extereme? They simulate weather somehow too and don\u0027t produce a significant load on system resources. Guess they use some cheaty way like a set of precalculated values to achieve this.\u003C/p\u003E\n"},{"CreatedByName":"silverfox8124","CreatedById":125032,"CreatedDateTime":"2015-09-12T21:06:04Z","Content":"\n\u003Cp\u003E@Ser, I have not looked at it, but simulating weather without large resource consumption would mean they\u0027re either doing really local weather, or they\u0027re just polling the weather from a website or weather network, probably adding in some fancy effects with it.\u003C/p\u003E\n"},{"CreatedByName":"ThatOneBritishGuy...","CreatedById":144135,"CreatedDateTime":"2015-09-13T03:34:58Z","Content":"\n\u003Cp\u003EHave you thought about just \u0027faking\u0027 a model using pseudo-random numbers? Changes in weather in an active ships vicinity would be stores in the persistence file, and there\u0027d be a chance of a change in weather at a particular point at any time, with initial conditions depending on a value predicted by the system based on the overall map, while the weather in locations outside the active ships vicinity is generated randomly at the start of each save, and updated every 30 seconds or so with a certain deviation (and thus determining the wind direction and intensity of active craft)? This would mean you don\u0027t actually have to simulate all that stuff, reducing the amount of data usage to more feasible levels. Hurricanes, tornadoes, etc, could also all be simulated with pseudo random numbers. Have a tiny chance of one occurring and when it does, slowly change the model of weather in the area affected, and then eventually deteriorate it over a randomly generated period of time. KSP is still part game after all and most of us aren\u0027t meteorologists. We can do with a bit of faking. It is far better than nothing after all.\u003C/p\u003E\u003Cp\u003ETo summarize, my proposition is to \u0027fake\u0027 the weather model using procedural generation, thus avoiding the ram-void this mod would be if it simulated an actual weather model.\u003C/p\u003E\n"},{"CreatedByName":"silverfox8124","CreatedById":125032,"CreatedDateTime":"2015-09-14T14:45:44Z","Content":"\n\u003Cp\u003E@ThatOneBritishGuy... it was proposed, and I declined it before, and I\u0027ll decline it again. Having random weather isn\u0027t predictable and you can\u0027t use it in any meaningful manner, it\u0027d just be there for aesthetics at that point, there\u0027s no science behind it. It feels dirty and fake. I want reliable, predictable weather that should happen a certain way given set parameters. *THAT* is a weather model, predictive or simulated, not some whimsical \u0022I\u0027ll make a storm here for the lulz\u0022 kind of thing.\u003C/p\u003E\u003Cp\u003EWhat you\u0027re suggesting is the equivalent of leaving the world\u0027s weather at pure chaos. There could be hurricanes in the antarctic, dust storms in the poles, and snow in the deserts. Weather is inofitself a cause-effect relationship, that\u0027s how it is, that\u0027s how it\u0027s meant to be, that\u0027s how it shall stay.\u003C/p\u003E\u003Cp\u003EThat being said, if you guys want some random weather .... going on, make it yourselves, feel free to, because I sure won\u0027t be making it anytime soon.\u003C/p\u003E\u003Cp\u003E~SilverFox8124\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2015-09-14T18:31:33Z","Content":"\n\u003Cp\u003EHey guys, I came across an article from 2008 on Gamasutra earlier today, on the topic of practical fluid dynamics in video games. I haven\u0027t had the time to read through it thoroughly, so I don\u0027t know if it could be of some use to the mod or not, but I figured I\u0027d pass it along anyway.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.gamasutra.com/view/feature/1615/practical_fluid_dynamics_part_2.php\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.gamasutra.com/view/feature/1615/practical_fluid_dynamics_part_2.php\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-09-15T10:28:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022capi3101\u0022 data-cite=\u0022capi3101\u0022\u003E\u003Cdiv\u003EHey guys, I came across an article from 2008 on Gamasutra earlier today, on the topic of practical fluid dynamics in video games. I haven\u0027t had the time to read through it thoroughly, so I don\u0027t know if it could be of some use to the mod or not, but I figured I\u0027d pass it along anyway.\u003Cp\u003E\u003Ca href=\u0022http://www.gamasutra.com/view/feature/1615/practical_fluid_dynamics_part_2.php\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.gamasutra.com/view/feature/1615/practical_fluid_dynamics_part_2.php\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, thanks. Any suggestion about practical ways to tame the complexity of the matter is welcome.\u003C/p\u003E\u003Cp\u003EIn the specific case, this covers just one aspect of a very complex field of study. But the specific solution it describes (calculating pressure differentials in a range of cells to generate a velocity field) is correct, and actually already in the weather model to produce wind. The model is actually based on a small subset of the equations and concepts valid for \u003Ca href=\u0022https://en.wikipedia.org/wiki/Fluid_dynamics\u0022 rel=\u0022external nofollow\u0022\u003Efluid dynamics\u003C/a\u003E, e.g. \u003Ca href=\u0022https://en.wikipedia.org/wiki/Pressure-gradient_force\u0022 rel=\u0022external nofollow\u0022\u003EPressure-gradient force\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Advection\u0022 rel=\u0022external nofollow\u0022\u003Eadvection\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Divergence\u0022 rel=\u0022external nofollow\u0022\u003Edivergence\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Navier%E2%80%93Stokes_equations\u0022 rel=\u0022external nofollow\u0022\u003ENavier-stokes\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Viscosity\u0022 rel=\u0022external nofollow\u0022\u003Eviscosity\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Vorticity\u0022 rel=\u0022external nofollow\u0022\u003Evorticity\u003C/a\u003E (sorry for the amount of math, I spent days on that to arrive to something usable).\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2015-09-15T13:22:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003EWell, thanks. Any suggestion about practical ways to tame the complexity of the matter is welcome.\u003Cp\u003EIn the specific case, this covers just one aspect of a very complex field of study. But the specific solution it describes (calculating pressure differentials in a range of cells to generate a velocity field) is correct, and actually already in the weather model to produce wind. The model is actually based on a small subset of the equations and concepts valid for \u003Ca href=\u0022https://en.wikipedia.org/wiki/Fluid_dynamics\u0022 rel=\u0022external nofollow\u0022\u003Efluid dynamics\u003C/a\u003E, e.g. \u003Ca href=\u0022https://en.wikipedia.org/wiki/Pressure-gradient_force\u0022 rel=\u0022external nofollow\u0022\u003EPressure-gradient force\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Advection\u0022 rel=\u0022external nofollow\u0022\u003Eadvection\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Divergence\u0022 rel=\u0022external nofollow\u0022\u003Edivergence\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Navier%E2%80%93Stokes_equations\u0022 rel=\u0022external nofollow\u0022\u003ENavier-stokes\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Viscosity\u0022 rel=\u0022external nofollow\u0022\u003Eviscosity\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Vorticity\u0022 rel=\u0022external nofollow\u0022\u003Evorticity\u003C/a\u003E (sorry for the amount of math, I spent days on that to arrive to something usable).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENaw, I certainly understand the amount of math involved; I spent five years earning a degree in the subject. I\u0027m still trying to think of any methods that could be employed to simplify matters while keeping things realistic; blanking, unfortunately.\u003C/p\u003E\u003Cp\u003EThis is probably a grotesquely stupid thought, but could the cell data be calculated ahead of time and then accessed at runtime? How is the model handling the planet\u0027s initial conditions right now?\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-09-15T15:29:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022capi3101\u0022 data-cite=\u0022capi3101\u0022\u003E\u003Cdiv\u003ENaw, I certainly understand the amount of math involved; I spent five years earning a degree in the subject. I\u0027m still trying to think of any methods that could be employed to simplify matters while keeping things realistic; blanking, unfortunately.\u003Cp\u003EThis is probably a grotesquely stupid thought, but could the cell data be calculated ahead of time and then accessed at runtime? How is the model handling the planet\u0027s initial conditions right now?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECertainly someone with your qualification would be very welcome, should you have time to spend on KWS.\u003C/p\u003E\u003Cp\u003EAbout precalculated data. Most of data with each cell are variables, and will have to be refreshed at each update cycle. \u003C/p\u003E\u003Cp\u003EThe initial temperature at each cell and layer\u0027s altitude would be made to resemble the current data in KSP (I\u0027m confident they can actually be fetched from KSP, otherwise they should be computed from the same set of values KSP uses at runtime), but then will follow the dynamic from KWS. \u003C/p\u003E\u003Cp\u003EInitial pressure will be the set base pressure in KSP for altitude=0, but the pressure variance with altitude changes with temperature, so it will be computed for any altitude != 0; and clearly also the base pressure will then dynamically change in KWS. \u003C/p\u003E\u003Cp\u003EHumidity isn\u0027t covered in KSP, my intent is to start with some \u0022credible\u0022 values following a simple equation (based on biome and temperature). Of course KWS then will update.\u003C/p\u003E\u003Cp\u003EThose above are enough to compute any further values, e.g. air density, cloud coverage, reflectivity and absorption.\u003C/p\u003E\u003Cp\u003EClouds reflectivity and absorption are probably the best area where values should be precalculated. The math required to compute those values depends on a few variables (amount of water vapor, effective droplets size and cloud thickness; other conditions are averaged for the spectrum of incident light and reflected IR, or the scatter angles, and then assumed constant). However the development of that math would take a significant portion of all the exectuion time in KWS, so the best approach is to use a set of precomputed tables.\u003C/p\u003E\u003Cp\u003ESilverfox and me both hope to find other areas where values may be precalculated, that will certainly help mightly with KWS performance. When the weather model is finished, I hope to use it to find specific relationships from one or few values and the outcomes. That could come both as a simplification in the internal math used, or as discovery of significant \u0022patterns\u0022 (cause-effect relationships in the weather across the modelled body, like e.g. the formation of a specific pressure field in an area associated with presence of humid/warm air, will develop in 80% of cases in a thunderstorm after 6 hours). Though I have yet to consider how KWS could be programmed to deal with those \u0022patterns\u0022.\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2015-09-15T17:12:31Z","Content":"\n\u003Cp\u003ESilverfox has approached me before on helping with the mod; I\u0027ve got a few too many commitments at the moment to get involved with another project but I\u0027d definitely be willing to consult with y\u0027all.\u003C/p\u003E\u003Cp\u003EI\u0027ll give the simulation of initial dewpoint values some thought...that one should only be an issue on Kerbin and Laythe, right? Maybe Eve?\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-09-15T18:57:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022capi3101\u0022 data-cite=\u0022capi3101\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027ll give the simulation of initial dewpoint values some thought...that one should only be an issue on Kerbin and Laythe, right? Maybe Eve?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks about the initial dewpoint. Of course Kerbin and Laythe, having the same atmospheric mix of Earth, are easier to consider, and with them I\u0027m actually only concerned about water dew. And given their resemblance with Earth\u0027s atmosphere, I\u0027m actually using values valid for Earth (such as those for the Magnus formula in \u003Ca href=\u0022http://www.nasa.gov/centers/dryden/pdf/87878main_H-937.pdf\u0022 rel=\u0022external nofollow\u0022\u003Edew point calculations\u003C/a\u003E, but also Antoine\u0027s and Wagner\u0027s equations). \u003C/p\u003E\u003Cp\u003EThe other bodies are still a big unknown (must say I\u0027ve started to consider some plausible mix of gases for them, but the matter requires more research). \u003C/p\u003E\u003Cp\u003EEve certainly has liquid on its surface, therefore a mass going through evaporation and dew. Unfortunately I could not yet find what that would be, to stay liquid at 5bar and 360-420\u00C3\u201A\u00C2\u00B0K. However the temperature changes enormously with altitude, I could imagine even water being present (only, water rain would never fall to the surface before evaporating again). Any thought about Eve will be of immense help.\u003C/p\u003E\u003Cp\u003EDon\u0027t think initial dewpoint requires a thought for other stock bodies. Duna only seems affected by sublimation/deposition of CO2, so my effort goes only towards computing the amount changing state and the heat exchanged. Jool seems to only have very light substances, unable to condense in its atmosphere.\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2015-09-15T20:15:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003E\u0026lt;snip /\u0026gt; Unfortunately I could not yet find what that would be, to stay liquid at 5bar and 360-420\u00C3\u201A\u00C2\u00B0K. \u0026lt;snip /\u0026gt;\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EElemental mercury comes to mind given the temperature and pressure conditions, though the conditions under which mercury would be present in quantities great enough to fill a planet\u0027s oceans would be......unique, I\u0027ll say. Plus the color is all wrong...\u003C/p\u003E\n"},{"CreatedByName":"EladDv","CreatedById":118368,"CreatedDateTime":"2015-09-15T21:03:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003EUnfortunately I could not yet find what that would be, to stay liquid at 5bar and 360-420\u00C3\u201A\u00C2\u00B0K\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Efunny enough i found that iodine almost perfectly matches these criteria and is purple at large concentrations. at roughly 5 bars it\u0027s liquid at 400k ,solid at just below at 350k and evaporates at 450k which might be just right for eve, also because temps decrease slower then temps it will be vapor at higher altitudes and just above the surface and create \u0022snow\u0022 at even higher altitudes constantly within clouds and give it a purple look with some water/ammonia vapor in the atmosphere\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.iaea.org/inis/collection/NCLCollectionStore/_Public/07/255/7255152.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.iaea.org/inis/collection/NCLCollectionStore/_Public/07/255/7255152.pdf\u003C/a\u003E page 31\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.nist.gov/data/PDFfiles/jpcrd55.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.nist.gov/data/PDFfiles/jpcrd55.pdf\u003C/a\u003E apde 26\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-15T21:40:39Z\u0022 title=\u002209/15/2015 09:40  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 15, 2015\u003C/time\u003E by EladDv\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-09-15T22:18:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022EladDv\u0022 data-cite=\u0022EladDv\u0022\u003E\u003Cdiv\u003Efunny enough i found that iodine almost perfectly matches these criteria and is purple at large concentrations. at roughly 5 bars it\u0027s liquid at 400k and solid at just below at 350k and evaporates at 450k which might be fine for \u003Cp\u003E\u003Ca href=\u0022http://www.iaea.org/inis/collection/NCLCollectionStore/_Public/07/255/7255152.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.iaea.org/inis/collection/NCLCollectionStore/_Public/07/255/7255152.pdf\u003C/a\u003E page 31\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.nist.gov/data/PDFfiles/jpcrd55.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.nist.gov/data/PDFfiles/jpcrd55.pdf\u003C/a\u003E apde 26\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022capi3101\u0022 data-cite=\u0022capi3101\u0022\u003E\u003Cdiv\u003EElemental mercury comes to mind given the temperature and pressure conditions, though the conditions under which mercury would be present in quantities great enough to fill a planet\u0027s oceans would be......unique, I\u0027ll say. Plus the color is all wrong...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks guys. I actually considered both iodine and mercury, but because of molar mass they can\u0027t be major atmosphere constituents (mercury (Hg) 200.59, iodine (I2) 253.8 g/mol). \u003C/p\u003E\u003Cp\u003EEve\u0027s atmosphere mix averages 43 g/mol, any gas 500% heavier than the average should only fill the deepest layers, can\u0027t see why it would lift and stay mixed with lighter components. Of all the gas components in Earth\u0027s atmosphere (apart minor traces of He), all are within 55-152% of the average molar mass. Clearly those heavyweights have to be a small percentage, or other even lighter components would make their part to bring the average molar mass; therefore the difference between heavy and light components would be even more marked. \u003C/p\u003E\u003Cp\u003EI can consider Eve to have a layered atmosphere, but then would certainly enjoy some help to devise its characteristics, there would be neat boundaries from one to another layer (not to talk about densities, all of the aerodynamic properties in KSP would seem wrong). \u003C/p\u003E\u003Cp\u003EE.g., I did venture to consider an atmospheric mix for Eve with I2 at small concentrations: but then the I2 layer would only reach a few tens of meters above sea level (using the correct ScaleHeight for pressure on Eve, 35 mt of I2 would account for 1% of the total pressure). Above that level aerodynamic properties may not be really affected, but I2 would not really affect the atmosphere dynamics too, can only guess at heat exchanges through the layer boundary I2/lighter gas.\u003C/p\u003E\n"},{"CreatedByName":"EladDv","CreatedById":118368,"CreatedDateTime":"2015-09-15T22:51:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003EThanks guys. I actually considered both iodine and mercury, but because of molar mass they can\u0027t be major atmosphere constituents (mercury (Hg) 200.59, iodine (I2) 253.8 g/mol). \u003Cp\u003EEve\u0027s atmosphere mix averages 43 g/mol, any gas 500% heavier than the average should only fill the deepest layers, can\u0027t see why it would lift and stay mixed with lighter components. Of all the gas components in Earth\u0027s atmosphere (apart minor traces of He), all are within 55-152% of the average molar mass. Clearly those heavyweights have to be a small percentage, or other even lighter components would make their part to bring the average molar mass; therefore the difference between heavy and light components would be even more marked. \u003C/p\u003E\u003Cp\u003EI can consider Eve to have a layered atmosphere, but then would certainly enjoy some help to devise its characteristics, there would be neat boundaries from one to another layer (not to talk about densities, all of the aerodynamic properties in KSP would seem wrong). \u003C/p\u003E\u003Cp\u003EE.g., I did venture to consider an atmospheric mix for Eve with I2 at small concentrations: but then the I2 layer would only reach a few tens of meters above sea level (using the correct ScaleHeight for pressure on Eve, 35 mt of I2 would account for 1% of the total pressure). Above that level aerodynamic properties may not be really affected, but I2 would not really affect the atmosphere dynamics too, can only guess at heat exchanges through the layer boundary I2/lighter gas.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ehmm the ground is purple in itself so it might not be the atmosphere itself that has the purple shade BUUUUUT if you can calculate the atmospheric composition of an atmosphere of one that diffuses mostly purple light at 380-420nm using Rayleigh scattering formula is a close enough approximation OR you could go for spectral lines (molecular emission lines at high energy like getting hit by photons) hydrogen is a strong contender in that category but might be a bit too light but other ones will be better for sure (also take into account that higher energy photons will be emitted more often then lower ones due to the nature of photon emission in atoms so they will be more vibrant) gallium is also a strong contender in this category and is just at the upper bound of your hypothetical eve molar mass at 69.7 and also iron, titanium and phosphorus but again those are only acting as emissive atoms and molecules are much more complicated to find data for. in all honesty a multi layered atmosphere might get the most realistic results but would be much harder to code and implement with all the math involved (please take into account that i am hardly familiar with these matters and just throwing ideas that \u003Cstrong\u003ESEEM \u003C/strong\u003Eplausible but might not actually be realistic in any way)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-15T23:02:33Z\u0022 title=\u002209/15/2015 11:02  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 15, 2015\u003C/time\u003E by EladDv\u003C/strong\u003E\n\u003C/span\u003E\n"}]}