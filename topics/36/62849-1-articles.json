{"TopicId":62849,"ForumId":36,"TopicTitle":"[WIP] Selene - Lua based autopilot \u0026amp; general purpose scripting layer for KSP","CreatedByName":"BlackNecro","CreatedById":7728,"CreatedDateTime":"2014-02-11T01:12:18Z","PageNum":1,"Articles":[{"CreatedByName":"BlackNecro","CreatedById":7728,"CreatedDateTime":"2014-02-11T01:12:18Z","Content":"\n\u003Cp\u003EWhile working on the latest version of my PartCatalog (big update inbound soon\u00C3\u00A2\u00E2\u20AC\u017E\u00C2\u00A2), I ended up having a perfectly fine Lua scripting engine in KSP. \u003C/p\u003E\u003Cp\u003EBefore letting all of that go to waste I decided to actually write a nice usable wrapper around and ended up creating \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022text-align:center;\u0022\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003ESelene\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003ELua Scripting Layer\u003C/span\u003E\u003C/p\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003EThe Concept\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ESelene allows you to use the scripting language \u003Ca href=\u0022www.lua.org\u0022 rel=\u0022external nofollow\u0022\u003ELua\u003C/a\u003E for both completely controlling your flight as well as a general purpose scripting engine for writing small plugins.\u003C/p\u003E\u003Cp\u003EYou can either use the Selene specific API which is optimized for autopiloting related tasks, or utilize the full power of NLua (the C# / lua interface library I used) and use any of KSPs C# classes from lua.\u003C/p\u003E\u003Cp\u003EScripts are organized in processes in order to encapsulate certain functionality and thus ensure reusability.\u003C/p\u003E\u003Cp\u003EEach process has it\u0027s own variable environment and can register functions to certain hooks to be notified of events in the KSP world.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EImplemented Features\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003ENon optional \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/60066-0-23-0-Toolbar-Plugin-1-5-2-Common-API-for-draggable-resizable-buttons-toolbar\u0022 rel=\u0022external nofollow\u0022\u003Etoolbar\u003C/a\u003E integration\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ELua backend up and running.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EManagement GUI up and running.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe Selene API core is implemented.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EHooks:\u003Cbr\u003E\u003Cul\u003E\u003Cli\u003ETick \u0026amp; PhysicsUpdate - Called every frame / every physics iteration\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Control - Called when updating the control state of the vessel\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Load \u0026amp; Save - Called when loading / saving the state of the process into persistence\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ECurrently Missing Features\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003ELast touchups on the GUI.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECelestialBody support\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EManeuver node support\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EVessel Part listing and Action Group interfacing\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EManaged GUI library to be used from Lua\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EOutstanding Questions\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EResource usage to balance everything?\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EWhat did I miss yet?\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe project can be found at \u003Ca href=\u0022https://github.com/blacknecro/selene/tree/testing\u0022 rel=\u0022external nofollow\u0022\u003Egithub\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003ETo use it add a Selene Interpreter part to your ship, launch it and click on the Selene button in the toolbar and creating a new process by hitting the \u0022\u002B\u0022 on the root process.\u003C/p\u003E\u003Cp\u003EFor now please refer to the \u003Ca href=\u0022https://github.com/BlackNecro/Selene/blob/testing/Reference.txt\u0022 rel=\u0022external nofollow\u0022\u003EAPI Reference\u003C/a\u003E as well as the rudimentary \u003Ca href=\u0022https://github.com/BlackNecro/Selene/tree/testing/Plugins/PluginData/SeleneCore\u0022 rel=\u0022external nofollow\u0022\u003Eexample scripts\u003C/a\u003E for some ideas on how to work with the API.\u003C/p\u003E\u003Cp\u003EI\u0027ll post some more in detail information about everything after the next weekend, need some holidays first.\u003C/p\u003E\u003Cp\u003EIf this sparked your interest please leave a comment.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-11T13:24:57Z\u0022 title=\u002202/11/2014 01:24  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 11, 2014\u003C/time\u003E by BlackNecro\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-02-11T02:13:55Z","Content":"\n\u003Cp\u003EAt this pace we will be able to control KSP vehicles in any language within months \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2014-02-11T02:37:18Z","Content":"\n\u003Cp\u003EYou beat me to it :-) I was thinking a Lua interpreter would make a great flight computer in RasterPropMonitor. I will have to look at this when I get home Thursday.\u003C/p\u003E\n"},{"CreatedByName":"sirklick","CreatedById":76119,"CreatedDateTime":"2014-02-11T02:51:09Z","Content":"\n\u003Cp\u003EGreat work. I can imagine this opening up quite a bit of potential for those not willing to venture into C# to get some simple things done.\u003C/p\u003E\n"},{"CreatedByName":"Gaius","CreatedById":66495,"CreatedDateTime":"2014-02-11T03:48:49Z","Content":"\n\u003Cp\u003Edo want! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2014-02-11T08:36:46Z","Content":"\n\u003Cp\u003EJust by looking at the title, it makes me feel wanting to use and add what I want into this plugin. Is forking and giving pull requests welcomed? Oh, it\u0027s MIT license... so yes?\u003C/p\u003E\u003Cp\u003EEDIT: Alright, it seems like Selene is also using LuaNET to automatically load the KSP\u0027s assembly so these classes (\u0026amp; their member variables/methods) will be accessible in Lua, is that correct?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-11T08:46:05Z\u0022 title=\u002202/11/2014 08:46  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 11, 2014\u003C/time\u003E by HoneyFox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"BlackNecro","CreatedById":7728,"CreatedDateTime":"2014-02-11T10:20:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022HoneyFox\u0022 data-cite=\u0022HoneyFox\u0022\u003E\u003Cdiv\u003EJust by looking at the title, it makes me feel wanting to use and add what I want into this plugin. Is forking and giving pull requests welcomed? Oh, it\u0027s MIT license... so yes?\u003Cp\u003EEDIT: Alright, it seems like Selene is also using LuaNET to automatically load the KSP\u0027s assembly so these classes (\u0026amp; their member variables/methods) will be accessible in Lua, is that correct?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually that is very welcome yes. \u003C/p\u003E\u003Cp\u003EYes I\u0027m using luanet through NLua, but the main API uses a set of proxy classes. If you don\u0027t want to use those you could for example do something like this \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightGlobals = luanet.import_type(\u0027FlightGlobals\u0027) \u003Cbr\u003ECurrentVessel = FlightGlobals.ActiveVessel\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2014-02-11T11:06:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BlackNecro\u0022 data-cite=\u0022BlackNecro\u0022\u003E\u003Cdiv\u003EActually that is very welcome yes. \u003Cp\u003EYes I\u0027m using luanet through NLua, but the main API uses a set of proxy classes. If you don\u0027t want to use those you could for example do something like this \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightGlobals = luanet.import_type(\u0027FlightGlobals\u0027) \u003Cbr\u003ECurrentVessel = FlightGlobals.ActiveVessel\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat looks good. some helper lua scripts that provide different kinds of data, functions should be very useful when later users start to write actual scripts.\u003C/p\u003E\n"},{"CreatedByName":"aeTIos","CreatedById":17032,"CreatedDateTime":"2014-02-11T12:12:32Z","Content":"\n\u003Cp\u003EOh boy I\u0027ve been wanting this for such a long time. Lua is just the language for me. I\u0027m trying this at the very moment. Expect feedback from me. \u003C/p\u003E\u003Cp\u003EAgain, thanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit: Can\u0027t seem to find the download. Probably it\u0027s too obvious and therefore I\u0027m missing it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-11T12:24:43Z\u0022 title=\u002202/11/2014 12:24  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 11, 2014\u003C/time\u003E by aeTIos\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2014-02-11T12:55:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aeTIos\u0022 data-cite=\u0022aeTIos\u0022\u003E\u003Cdiv\u003EOh boy I\u0027ve been wanting this for such a long time. Lua is just the language for me. I\u0027m trying this at the very moment. Expect feedback from me. \u003Cp\u003EAgain, thanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit: Can\u0027t seem to find the download. Probably it\u0027s too obvious and therefore I\u0027m missing it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can try the \u0022Testing\u0022 branch I guess.\u003C/p\u003E\u003Cp\u003EThe default \u0022Master\u0022 branch is empty.\u003C/p\u003E\n"},{"CreatedByName":"TeddyDD","CreatedById":28806,"CreatedDateTime":"2014-02-11T13:18:32Z","Content":"\n\u003Cp\u003EReally nice \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E I love lua \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"aeTIos","CreatedById":17032,"CreatedDateTime":"2014-02-11T13:19:32Z","Content":"\n\u003Cp\u003EOkay, found it, tried it. Doesn\u0027t have toolbar integration somehow, and I cannot attach the core. Halp!111!\u003C/p\u003E\n"},{"CreatedByName":"BlackNecro","CreatedById":7728,"CreatedDateTime":"2014-02-11T13:29:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022HoneyFox\u0022 data-cite=\u0022HoneyFox\u0022\u003E\u003Cdiv\u003EThat looks good. some helper lua scripts that provide different kinds of data, functions should be very useful when later users start to write actual scripts.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s exactly what the actual Selene API is made for. The luanet backend is mostly for advanced scriptery around some internal stuff.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022HoneyFox\u0022 data-cite=\u0022HoneyFox\u0022\u003E\u003Cdiv\u003EYou can try the \u0022Testing\u0022 branch I guess.\u003Cp\u003EThe default \u0022Master\u0022 branch is empty.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EExactly, fixed the github link.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aeTIos\u0022 data-cite=\u0022aeTIos\u0022\u003E\u003Cdiv\u003EOkay, found it, tried it. Doesn\u0027t have toolbar integration somehow, and I cannot attach the core. Halp!111!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHave a recent version of the toolbar installed, download selene from testing branch, if you downloaded it via zip file kill githubs annoying -testing appendix to the foldername so it\u0027s just GameData/Selene and you should be up and running.\u003C/p\u003E\n"},{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2014-02-11T14:10:46Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at SeleneKSP.ModuleSelene.OnSave (.ConfigNode node) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at PartModule.Save (.ConfigNode node) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at ShipConstruct.SaveShip () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at ShipConstruction.CreateBackup (.ShipConstruct ship) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at EditorLogic.SetBackup () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at EditorLogic.UpdatePartMode () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at EditorLogic.Update () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOops... it throws this exception when I am trying to attach SeleneCPU onto my ship.\u003C/p\u003E\n"},{"CreatedByName":"BlackNecro","CreatedById":7728,"CreatedDateTime":"2014-02-11T14:26:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022HoneyFox\u0022 data-cite=\u0022HoneyFox\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at SeleneKSP.ModuleSelene.OnSave (.ConfigNode node) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at PartModule.Save (.ConfigNode node) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at ShipConstruct.SaveShip () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at ShipConstruction.CreateBackup (.ShipConstruct ship) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at EditorLogic.SetBackup () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at EditorLogic.UpdatePartMode () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at EditorLogic.Update () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOops... it throws this exception when I am trying to attach SeleneCPU onto my ship.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E*facepalm* that\u0027s my fault, forgot to sync after merging dev branch into testing, try again after redownloading, should work now\u003C/p\u003E\n"},{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2014-02-11T15:00:57Z","Content":"\n\u003Cp\u003EThis sounds like a scripting engine I will actually use! I even like the name. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWith all due respect to the valliant efforts of the other script engine writers, but I\u0027m really not interested in learning yet another limited language that lacks absolutely basic features like vectormath.\u003C/p\u003E\u003Cp\u003E(Vector math is in.... right? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E )\u003C/p\u003E\n"},{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2014-02-11T15:10:16Z","Content":"\n\u003Cp\u003EUmm... something is still wrong...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFailed to load assembly E:\\Kerbal Space Program v0.23\\GameData\\Selene\\KopiLua.dll:\u003Cbr\u003ESystem.Security.SecurityException: Assembly E:\\Kerbal Space Program v0.23\\GameData\\Selene\\KopiLua.dll tried to use forbidden type System.Diagnostics.Process!\u003Cbr\u003EAllows launching of external processes.\u003Cbr\u003E\u003Cbr\u003E  at AssemblyLoader.ScanForBadTypeRefs (System.String file) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at AssemblyLoader.LoadExternalAssembly (System.String file) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E...\u003Cbr\u003E...\u003Cbr\u003E\u003Cbr\u003EType wasn\u0027t correct\u003Cbr\u003E\u003Cbr\u003EType wasn\u0027t Params object.\u003Cbr\u003E\u003Cbr\u003EType wasn\u0027t correct\u003Cbr\u003E\u003Cbr\u003EType wasn\u0027t Params object.\u003Cbr\u003E\u003Cbr\u003EPart seleneStack_4294476404 cannot load module #2. It only has 2 modules defined\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI checked the Alt\u002BF12 -\u0026gt; Database -\u0026gt; Assemblies.\u003C/p\u003E\u003Cp\u003EThere\u0027re:\u003C/p\u003E\u003Cp\u003EKeraLua, NLua, SeleneCore, SeleneKSP. But I cannot find KopiLua.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-11T15:28:38Z\u0022 title=\u002202/11/2014 03:28  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 11, 2014\u003C/time\u003E by HoneyFox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"BlackNecro","CreatedById":7728,"CreatedDateTime":"2014-02-11T15:40:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022HoneyFox\u0022 data-cite=\u0022HoneyFox\u0022\u003E\u003Cdiv\u003EUmm... something is still wrong...\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFailed to load assembly E:\\Kerbal Space Program v0.23\\GameData\\Selene\\KopiLua.dll:\u003Cbr\u003ESystem.Security.SecurityException: Assembly E:\\Kerbal Space Program v0.23\\GameData\\Selene\\KopiLua.dll tried to use forbidden type System.Diagnostics.Process!\u003Cbr\u003EAllows launching of external processes.\u003Cbr\u003E\u003Cbr\u003E  at AssemblyLoader.ScanForBadTypeRefs (System.String file) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at AssemblyLoader.LoadExternalAssembly (System.String file) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E...\u003Cbr\u003E...\u003Cbr\u003E\u003Cbr\u003EType wasn\u0027t correct\u003Cbr\u003E\u003Cbr\u003EType wasn\u0027t Params object.\u003Cbr\u003E\u003Cbr\u003EType wasn\u0027t correct\u003Cbr\u003E\u003Cbr\u003EType wasn\u0027t Params object.\u003Cbr\u003E\u003Cbr\u003EPart seleneStack_4294476404 cannot load module #2. It only has 2 modules defined\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI checked the Alt\u002BF12 -\u0026gt; Database -\u0026gt; Assemblies.\u003C/p\u003E\u003Cp\u003EThere\u0027re:\u003C/p\u003E\u003Cp\u003EKeraLua, NLua, SeleneCore, SeleneKSP. But I cannot find KopiLua.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh the joys of getting WIP stuff up running on any other machine but my own. I tried getting it to work with a vanilla installation, fixed two or three things and it _should_ be working now \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003ERedownload Rinse Repeat\u003C/p\u003E\n"},{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2014-02-11T16:19:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BlackNecro\u0022 data-cite=\u0022BlackNecro\u0022\u003E\u003Cdiv\u003EAh the joys of getting WIP stuff up running on any other machine but my own. I tried getting it to work with a vanilla installation, fixed two or three things and it _should_ be working now \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003Cp\u003ERedownload Rinse Repeat\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E No it still doesn\u0027t work. And the output_log.txt contains the same error information.\u003C/p\u003E\u003Cp\u003EDo you have similar output in your log file? especially the KopiLua.dll assembly.\u003C/p\u003E\n"},{"CreatedByName":"BlackNecro","CreatedById":7728,"CreatedDateTime":"2014-02-11T16:23:03Z","Content":"\n\u003Cp\u003EI just noticed blizzy removed the default icon from his latest versions of the toolbar, fixed that for the moment.\u003C/p\u003E\u003Cp\u003EYes KopiLua fails to get loaded by the AssemblyLoader but it doesn\u0027t really matter as mono fixes that internally (that would only be problematic if that would be the initial plugin to be used by KSP but that\u0027s what the SeleneKSP is for)\u003C/p\u003E\u003Cp\u003ERRR\u003C/p\u003E\u003Cp\u003EIf that still doesn\u0027t work message me on the ksp modders IRC, steam or somewhere else, still got half an hour before I leave\u003C/p\u003E\n"},{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2014-02-13T15:58:54Z","Content":"\n\u003Cp\u003EOk my first practical script! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Etimer = 0.0\u003Cbr\u003EburnTime = 0.0\u003Cbr\u003E\u003Cbr\u003Efunction BurnRCSUllage(burnTimeVal)\u003Cbr\u003E\tburnTime = burnTimeVal\u003Cbr\u003E\ttimer = 0.0\u003Cbr\u003E\tprint(\u0022Burn RCS for \u0022 .. burnTime .. \u0022 seconds.\u0022)\u003Cbr\u003Eend\u003Cbr\u003E\u003Cbr\u003Efunction MainLoop(delta)\u003Cbr\u003E\tTime = luanet.import_type(\u0027UnityEngine.Time\u0027)\u003Cbr\u003E\tdeltaTime = Time.deltaTime\u003Cbr\u003E\tif(burnTime == 0.0) then\u003Cbr\u003E\t\treturn 0\u003Cbr\u003E\tend\u003Cbr\u003E\u003Cbr\u003E\ttimer = timer \u002B deltaTime\u003Cbr\u003E\tif(timer \u0026gt; burnTime) then\u003Cbr\u003E\t\ttimer = 0.0\u003Cbr\u003E\t\tburnTime = 0.0\u003Cbr\u003E\telse\u003Cbr\u003E\t\tFlightGlobals = luanet.import_type(\u0027FlightGlobals\u0027)\u003Cbr\u003E\t\tCurrentVessel = FlightGlobals.ActiveVessel\u003Cbr\u003E\t\tFlightCtrl = CurrentVessel.ctrlState\u003Cbr\u003E\u003Cbr\u003E\t\tif(FlightCtrl.mainThrottle == 0.0) then\u003Cbr\u003E\t\t\tFlightCtrl.Z = FlightCtrl.Z - 1.0\u003Cbr\u003E\t\t\tprint(\u0022Time: \u0022 .. timer .. \u0022/\u0022 .. burnTime)\u003Cbr\u003E\t\tend\u003Cbr\u003E\tend\u003Cbr\u003E\u003Cbr\u003E\treturn 0\u003Cbr\u003Eend\u003Cbr\u003E\u003Cbr\u003ESelene:RegisterTick(MainLoop)\u003Cbr\u003EBurnRCSUllage(10)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENow it seems like we need a way to input commands, otherwise it\u0027s not convenient to call that function with the number I want...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-13T16:45:39Z\u0022 title=\u002202/13/2014 04:45  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 13, 2014\u003C/time\u003E by HoneyFox\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"xZise","CreatedById":59798,"CreatedDateTime":"2014-03-04T19:04:13Z","Content":"\n\u003Cp\u003EHi, I tried to test Selene. So I downloaded the ZIP of the testing and in-dev branch and extracted them into the GameData directory. The result is, that I\u0027m able to add the unit to my craft and the Toolbar allows me to make it visible, but it doesn\u0027t show up anyway.\u003C/p\u003E\u003Cp\u003EFabian\u003C/p\u003E\n"},{"CreatedByName":"OminousPenguin","CreatedById":93710,"CreatedDateTime":"2014-03-29T13:40:35Z","Content":"\n\u003Cp\u003EYES!\u003C/p\u003E\u003Cp\u003EI started using LUA when I found \u003Ca href=\u0022http://www.computercraft.info\u0022 rel=\u0022external nofollow\u0022\u003EComputerCraft\u003C/a\u003E for Minecraft which adds computers that run LUA.\u003C/p\u003E\u003Cp\u003EI\u0027m really looking forward to this plugin maturing!\u003C/p\u003E\u003Cp\u003EIs it pretty much a full LUA interpreter? ie In ComputerCraft there are a few \u003Ca href=\u0022http://www.computercraft.info/wiki/String_%28API%29\u0022 rel=\u0022external nofollow\u0022\u003Enon-working functions\u003C/a\u003E due to the specific LUA implementation but other than that it\u0027s all there.\u003C/p\u003E\u003Cp\u003EWill we be able to do stuff like raise/lower gears. Do science? Transfer fuel?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-30T11:52:41Z\u0022 title=\u002203/30/2014 11:52  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 30, 2014\u003C/time\u003E by OminousPenguin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"mtndrew1","CreatedById":107221,"CreatedDateTime":"2014-03-31T20:48:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022OminousPenguin\u0022 data-cite=\u0022OminousPenguin\u0022\u003E\u003Cdiv\u003EYES!\u003Cp\u003EI started using LUA when I found \u003Ca href=\u0022http://www.computercraft.info\u0022 rel=\u0022external nofollow\u0022\u003EComputerCraft\u003C/a\u003E for Minecraft which adds computers that run LUA.\u003C/p\u003E\u003Cp\u003EI\u0027m really looking forward to this plugin maturing!\u003C/p\u003E\u003Cp\u003EIs it pretty much a full LUA interpreter? ie In ComputerCraft there are a few \u003Ca href=\u0022http://www.computercraft.info/wiki/String_%28API%29\u0022 rel=\u0022external nofollow\u0022\u003Enon-working functions\u003C/a\u003E due to the specific LUA implementation but other than that it\u0027s all there.\u003C/p\u003E\u003Cp\u003EWill we be able to do stuff like raise/lower gears. Do science? Transfer fuel?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou should be able to do everything with how the program is now, if the part of the api you wish to use isn\u0027t exposed you can expose it using luanet.import_type. I wanted to stage my rocket, so I imported the staging class and used it to stage my rocket\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Efunction stage()\tStag = luanet.import_type(\u0027Staging\u0027)\u003Cbr\u003E\tif(Stag.CurrentStage == 0) then\u003Cbr\u003E\t\treturn\u003Cbr\u003E\tend\u003Cbr\u003E\tprint(\u0027Staging\u0027)\u003Cbr\u003E\tStag.ActivateNextStage()\u003Cbr\u003Eend\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EYou can use the various API references in the wiki to help you, or if you have visual studio, open up the source of the mod and browse the classes in the object browser.\u003C/p\u003E\n"},{"CreatedByName":"OminousPenguin","CreatedById":93710,"CreatedDateTime":"2014-03-31T21:53:03Z","Content":"\n\u003Cp\u003EAh ok. Thanks.\u003C/p\u003E\u003Cp\u003ESo I could use \u003Ca href=\u0022https://github.com/Cilph/RemoteTech2/blob/master/src/RemoteTech2/API/API.cs\u0022 rel=\u0022external nofollow\u0022\u003ERemote Tech 2\u0027s API methods\u003C/a\u003E like this: ?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ERTech = luanet.import_type(\u0027RemoteTech.API\u0027)\u003Cbr\u003Elocal guid = myVessel.getGuid() // No idea how to get guid yet\u003Cbr\u003Elocal x = RTech.HasFlightComputer(guid)\u003Cbr\u003E// ...\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m away from home so I can\u0027t actually start playing around with it yet otherwise I\u0027d try before asking.\u003C/p\u003E\n"}]}