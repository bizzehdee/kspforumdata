{"TopicId":67431,"ForumId":36,"TopicTitle":"Trying to put toggle-able limits on IR parts. Just need help with last bit of code","CreatedByName":"VR_Dev","CreatedById":92196,"CreatedDateTime":"2014-04-01T15:20:34Z","PageNum":1,"Articles":[{"CreatedByName":"VR_Dev","CreatedById":92196,"CreatedDateTime":"2014-04-01T15:20:34Z","Content":"\n\u003Cp\u003ESo I\u0027m trying to incorporate the code for the B9 VTOL engines with the Infernal Robotics parts to be able to toggle through the parts rotation limits. So far I have been successful at loading the \u0022FSVTOLrotator\u0022 Module from the engines into a IR hinge. This loads all the options I desire into the hotkey menu for the part, as seen here.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/ljzWHbT.png\u0022 alt=\u0022ljzWHbT.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhat I can\u0027t accomplish is getting the hinge\u0027s \u0022RotateMin\u0022 and \u0022Rotatemax\u0022 to recognize the limits the user sets in the table, exactly like you can with the engines. I believe these inputs to be \u0022maxDownAngle\u0022 and \u0022availableAngles1\u0022 in the VTOL MODULE. Even though I set the max angle to 180 the hinge stops at 90.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/BhPJULx.png\u0022 alt=\u0022BhPJULx.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI believe there is a simple solution, but it\u0027s been a while since I took any coding classes. I need to make the \u0022maxDownAngle\u0022 and \u0022availableAngles1\u0022 variables available for the \u0022MUMechServo\u0022 MODULE to apply to \u0022RotationMin/Max.\u0022 This involves Modules sharing variables, which is where I\u0027m confused. Here is the code I have gotten the closest with.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPART\u003Cbr\u003E{\u003Cbr\u003E// --- general parameters ---\u003Cbr\u003Ename = IRHingeTallND_VTOL2\u003Cbr\u003Emodule = MuMechServo\u003Cbr\u003Eauthor = Sirkut \u0026amp; Devo\u003Cbr\u003E\u003Cbr\u003E// --- asset parameters ---\u003Cbr\u003Emesh = model.mu\u003Cbr\u003Escale = 1.0\u003Cbr\u003EspecPower = 0.1\u003Cbr\u003ErimFalloff = 3\u003Cbr\u003EalphaCutoff = 0\u003Cbr\u003E\u003Cbr\u003E// --- node definitions ---\u003Cbr\u003Enode_attach = 0.0, -0.254, 0.0 , 0.0, -1.0, 0.0\u003Cbr\u003Enode_stack_top = 0.0, 0.0, -0.325, 0.0, 0.0, -1.0, 0\u003Cbr\u003Enode_stack_bottom = 0.0, -0.254, 0.0 , 0.0, -1.0, 0.0, 0\u003Cbr\u003E\u003Cbr\u003E// --- editor parameters ---\u003Cbr\u003ETechRequired = advConstruction\u003Cbr\u003EentryCost = 0\u003Cbr\u003Ecost = 50\u003Cbr\u003Ecategory = Utility\u003Cbr\u003Esubcategory = 0\u003Cbr\u003Etitle = Adjustable limit hinge 2\u003Cbr\u003Emanufacturer = Magic Smoke Industries\u003Cbr\u003Edescription = Taller motorized hinge.\u003Cbr\u003E\u003Cbr\u003E// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\u003Cbr\u003EattachRules = 1,1,1,1,0\u003Cbr\u003E\u003Cbr\u003E// --- standard part parameters ---\u003Cbr\u003Emass = 0.1\u003Cbr\u003EdragModelType = default\u003Cbr\u003Emaximum_drag = 0.2\u003Cbr\u003Eminimum_drag = 0.2\u003Cbr\u003EangularDrag = 2\u003Cbr\u003EcrashTolerance = 15\u003Cbr\u003EmaxTemp = 3000\u003Cbr\u003EbreakingForce = 999\u003Cbr\u003EbreakingTorque = 999\u003Cbr\u003E\u003Cbr\u003ErotateJoint = True\u003Cbr\u003ErotateAxis = -1, 0, 0\u003Cbr\u003EkeyRotateSpeed = 20.0\u003Cbr\u003ErotateLimits = True\u003Cbr\u003ErotateMin = -90\u003Cbr\u003ErotateMax = 90\u003Cbr\u003E\u003Cbr\u003ErotateLimitsRevertKey = False\u003Cbr\u003EjointSpring = 0\u003Cbr\u003EjointDamping = 0\u003Cbr\u003EonActivate = False\u003Cbr\u003ErotateKey = up\u003Cbr\u003ErevRotateKey = down\u003Cbr\u003EfixedMesh = Base\u003Cbr\u003EservoName = New Hinge\u003Cbr\u003EinvertSymmetry = False\u003Cbr\u003EmotorSndPath = MagicSmokeIndustries/Sounds/infernalRoboticMotor\t\t// Motor loop sound path\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = FSVTOLrotator\u003Cbr\u003E        deployedAngle = 90 //the starting max value\u003Cbr\u003E        maxDownAngle = -90 // Allowed rotation below the default parked state\u003Cbr\u003E        stepAngle = 1 // How much each action group button press will rotate the engine\u003Cbr\u003E        targetPartObject = engine_holder\u003Cbr\u003E        availableAngles1 = 90, 0, 0 //max three values, use 0 to skip the value and shorten the list. The first value is the default, so smaller than default values should be the final numbers.\u003Cbr\u003E        //availableAngles2 = 0, 0, 0 // more angles, for a max of 6\u003Cbr\u003E        startInverted = True\u003Cbr\u003E        steerDirection = -1\u003Cbr\u003E}\t\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI know RotateMin/Max shouldn\u0027t be 90, but it\u0027s the only way to get all the options to load like I want. Somehow those have to be variables that you can change in the VTOL Module. I have tried a bunch of different configurations of the code as well.\u003C/p\u003E\u003Cp\u003E-Having the FSVTOLRotator module be the base with the MuMechServo MODULE being called within it.\u003C/p\u003E\u003Cp\u003E-Having the base module be a part, and calling both FSVTOLRotator and MuMEchServo as MODULES{} within it.\u003C/p\u003E\u003Cp\u003E-Having Min/max = Module{FSVTOLRotator maxDownAngle/availableAngles1}\u003C/p\u003E\u003Cp\u003ELike I said I believe there is an easy solution to this, and if so being able to change a parts rotation limits with a toggle will open up a whole new world for IR development, especially our walking mechs.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/73364-Walking-Flying-Custom-Replica-Mech-Mod\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/73364-Walking-Flying-Custom-Replica-Mech-Mod\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-01T18:19:35Z\u0022 title=\u002204/01/2014 06:19  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 1, 2014\u003C/time\u003E by clown_baby\u003C/strong\u003E\n\u003Cbr\u003EMade clearer\n\u003C/span\u003E\n"},{"CreatedByName":"VR_Dev","CreatedById":92196,"CreatedDateTime":"2014-04-01T20:31:11Z","Content":"\n\u003Cp\u003ESo now I\u0027m trying to add the FSVTOLrotator class to the MuMechServo class in the Servo.cs to compile a tweaked plugin. But I\u0027m not super sure what I\u0027m doing, so there\u0027s that\u003C/p\u003E\n"},{"CreatedByName":"VR_Dev","CreatedById":92196,"CreatedDateTime":"2014-04-08T16:01:14Z","Content":"\n\u003Cp\u003ESo I\u0027ve moved onto loading my T-Rex into the game. This got put on hold. If there\u0027s anyone half way proficient at c# I could explain to you what has to be done in the plugins. You could take credit for the whole thing. \u003C/p\u003E\u003Cp\u003EI just really need those limits\u003C/p\u003E\n"}]}