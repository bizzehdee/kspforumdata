{"TopicId":5772,"ForumId":36,"TopicTitle":"Can a node_collider mesh be concave?","CreatedByName":"Yorik","CreatedById":3479,"CreatedDateTime":"2012-01-19T15:36:12Z","PageNum":1,"Articles":[{"CreatedByName":"Yorik","CreatedById":3479,"CreatedDateTime":"2012-01-19T15:36:12Z","Content":"\n\u003Cp\u003EI\\\u0027m thinking about making a Babylon5-Starfury for KSP, and was wondering whether I\\\u0027d need to make the body in 5 separate pieces or whether 1 big piece would suffice. That would require the collision-mesh to be concave.\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-01-19T15:40:15Z","Content":"\n\u003Cp\u003EI\\\u0027ve heard that node_collider must be convex but I\\\u0027ve never tried a concave one. Might you test a simple model with concave node_collider and tell here what happens? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EUPDATE. It\\\u0027s strange but I made a part with concave collider -- and it worked just fine. It neither exploded nor fell through the ground nor even became unclickable in the VAB.\u003C/p\u003E\u003Cp\u003EAm I doing something wrong? :-X\u003C/p\u003E\n"},{"CreatedByName":"feanor","CreatedById":430,"CreatedDateTime":"2012-01-19T20:22:13Z","Content":"\n\u003Cp\u003EI strongly remember it not being possible -and I\\\u0027ve done all my parts in that way. I also have never seen a concave part in any mod pack.\u003C/p\u003E\n"},{"CreatedByName":"Killerhurtz","CreatedById":320,"CreatedDateTime":"2012-01-19T23:36:43Z","Content":"\n\u003Cp\u003EShort answer: No.\u003C/p\u003E\u003Cp\u003ELong answer: No, the physics engine that Unity runs on (PhysX if I\\\u0027m not mistaken) doesn\\\u0027t support concave collision meshes. Having a concave collision mesh will result in unpredictable results as the engine will not know how to handle it (although from experience it will attribute it a generic box collider which englobes the model). However, splitting your part in 5 pieces does indeed work. Although as long as it\\\u0027s convex, you can wrap it around your part (Such as putting a surface between two beams - since in KSP the likelihood of hitting something that would pass through the space between said beams is very thin, having a hard surface them is a good approximation of the interaction which is going to happen 99.9% of the time.)\u003C/p\u003E\n"},{"CreatedByName":"C7Studios","CreatedById":3895,"CreatedDateTime":"2012-01-20T17:07:05Z","Content":"\n\u003Cp\u003EUnity is indeed based off of Phys-X. Concave meshes do not properly solve, so its best to avoid them if at all possible. One of two things will happen with unity, Either it will automatically detect and correct the mesh by creating a box around it (and use that instead of your mesh) or it will just fail completely and your object will explode or fall through things randomly. \u003C/p\u003E\u003Cp\u003EI\\\u0027m under the impression that its the second option, as when I\\\u0027ve tested concave meshes, things just blow up all the time.\u003C/p\u003E\u003Cp\u003EThat being said there are a few guidelines that are not as obvious. (Not all of these are set in stone, but they work well for me)\u003C/p\u003E\u003Cp\u003EThe collider has to be under 256 triangles. So only use simple primitives if possible. Its unnecessary to have a complex mesh.\u003C/p\u003E\u003Cp\u003EThe mesh\\\u0027s complexity will determine how much an impact your part has on the physics engine. More complex meshes take much longer to check for collisions then simple ones. So people with weak computers or a lot of parts at once will make the engine chug.\u003C/p\u003E\u003Cp\u003EI tend to make the collider just a little bit smaller then the actual part. This allows connections to be made without them turning red (colliding another part). It also seems to help objects randomly being destroyed, and makes it look like things are resting on the ground instead of floating over it slightly. \u003C/p\u003E\u003Cp\u003EAdditional information to all your questions can be found on these two links.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://unity3d.com/support/documentation/Manual/Physics.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://unity3d.com/support/documentation/Manual/Physics.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://unity3d.com/support/documentation/Components/class-MeshCollider.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://unity3d.com/support/documentation/Components/class-MeshCollider.html\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-01-20T17:29:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022C7Studios\u0022 data-cite=\u0022C7Studios\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EUnity is indeed based off of Phys-X. Concave meshes do not properly solve, so its best to avoid them if at all possible. One of two things will happen with unity, Either it will automatically detect and correct the mesh by creating a box around it (and use that instead of your mesh) or it will just fail completely and your object will explode or fall through things randomly.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt seems that I faced the first case. A part I tested behave just as if its collider was completely O.K. Probably Unity auto-corrected it. \u003C/p\u003E\u003Cp\u003EUPDATE. C7, thanks a lot for an explanation. I\\\u0027ve added a reference to \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=6109.0\u0022 rel=\u0022external nofollow\u0022\u003ETips and tricks\u003C/a\u003E list.\u003C/p\u003E\n"},{"CreatedByName":"JWebb","CreatedById":17560,"CreatedDateTime":"2012-02-28T14:17:09Z","Content":"\n\u003Cp\u003EHow does the collider mesh of the NP payload faitrings look?\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2012-02-28T17:10:19Z","Content":"\n\u003Cp\u003EHere\\\u0027s a image of it in Blender; This is an old SudayPunch part, and the only change I made was a config edit to add stack nodes so they attach to the baseplate I made.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/hnhWN.png\u0022 alt=\u0022hnhWN.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe collider is the green cube.\u003C/p\u003E\u003Cp\u003ESo, as you can see, colliders do not even have to encompass or touch your mesh at all, they\\\u0027re pretty unrelated, and you only need to match the mesh shape if you\\\u0027re going to be surface-attaching things to it (though its generally better to do so if you can.) Since the fairings are just cosmetic right now, the collider pretty much just serves as the attachment point, so it being small, and moving the visual mesh out to form the \u00272m\u0027 ring of panels worked fine. Of course, the small collider is also what makes it harder to click on.\u003C/p\u003E\u003Cp\u003ESince the fairing is concave, Sundaypunch had to do something else. You must remember that this part is probably the 1st fairing in the game, and people have refined how to make thing since then (which is why I converted them into using the base plate, they originally were surface-attach only)\u003C/p\u003E\n"},{"CreatedByName":"ximrm","CreatedById":111063,"CreatedDateTime":"2014-09-28T03:45:11Z","Content":"\n\u003Cp\u003EI have to resurrect this thread because I was about to make a concave collider for my part and might run into some problems.\u003C/p\u003E\u003Cp\u003EI\u0027m not exactly sure how what shape the collider would have.\u003C/p\u003E\u003Cp\u003EI wanted to make two colliders: one for the folded version(basically a cylinder) and and an additional that comes with toggling to the unfold animation.(hollow tube)\u003C/p\u003E\u003Cp\u003ENow I don\u0027t know if it would work. The toggled expanded bucket is worrying me. What would be the best solution if I had to split up the collider into multiple parts? Make boxes for the various parts of the mesh?\u003C/p\u003E\u003Cp\u003EHere\u0027s the animated version I posted a while ago( it\u0027s basically still the same model as in the picture, just added some polys to circumvent the z-fighting issue I ran into.polycount is still low)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Tr6Ked7.gif\u0022 alt=\u0022Tr6Ked7.gif\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-28T04:39:25Z","Content":"\n\u003Cp\u003EI supposed the first question would be what is this and what does it do?\u003C/p\u003E\u003Cp\u003Ebased on pWings... I think you can build your mesh collider at the smallest shape; skin it to your rig that opens the net thing. the collider should change up along with the bucket. a simpler collider for the base cylinder will ensure the part is right-clickable. \u003C/p\u003E\u003Cp\u003EHonestly I recommend redesigning the part. As it is now, you either have to settle with a \u0022solid\u0022 center; or a high number of individual colliders that may eat up frame rate in VAB/SPH, and potentially nightmarish collision calculations if something gets caught in the netting.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-28T06:13:49Z\u0022 title=\u002209/28/2014 06:13  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 28, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Greys","CreatedById":57109,"CreatedDateTime":"2014-09-28T16:58:23Z","Content":"\n\u003Cp\u003EThe prior discussion of this thread does not apply any more, node_collider has been obsolete since PartTools was introduced in 0.18\u003C/p\u003E\u003Cp\u003EConcave colliders are permissible but they are much more expensive, orders of magnetudes of magnetudes more expensive, and if two concave colliders touch each other weird things happen up to and including the heat death of the universe. Keep in mind that terrain is a concave collider.\u003C/p\u003E\u003Cp\u003EThe better option would be for you to section the hollow collider into a bunch of fingers, this can be done via duplication and rotation once a single one is configured properly. As mentioned, concave colliders are very expensive to compute collisions against, so a large number of concave colliders will likely still be cheaper; and if you can built and animate it using cube primitive colliders then it will be almost free.\u003C/p\u003E\u003Cp\u003EHowever, if this part is to be any of the normal stack diameters we\u0027re used to in KSP, having that many colliders in a small space may very likely result in krakens, and if something were in the mouth of it when it closed, they would likely both explode.\u003C/p\u003E\u003Cp\u003EFinally, I know of no way without a plugin to toggle the collideability of colliders, I also haven\u0027t really ever seen anyone try so you\u0027ll have to test; but you may just have to live with all of these colliders being active at all times.\u003C/p\u003E\u003Cp\u003EI recommend you start a new thread on the matter once you get to trying things, this thread will only confuse people trying to help you and won\u0027t appropriately attract people with applicable knowledge\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2014-09-28T17:03:25Z","Content":"\n\u003Cp\u003EYou know, there\u0027s a really easy way to make a concave box collider though I don\u0027t know if Unity can handle it.\u003C/p\u003E\u003Cp\u003EHave one collider inside another with the top surfaces flush with each other, if something is intersecting the outer collider you have a collision, if it\u0027s intersecting the inner collider as well it is ignored, a negative collider in effect.\u003C/p\u003E\u003Cp\u003EIt\u0027s just two cubes, light on resources and gives you four sides and a base, great for a cargo bay \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Greys","CreatedById":57109,"CreatedDateTime":"2014-09-28T17:12:12Z","Content":"\n\u003Cp\u003EYea, in Unity you get a double collision which might or might not destroy the world, it seems to be a dice roll. I\u0027ve had parts that would jump 20 meters into the air when I walked up to them because of that\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-09-28T19:35:20Z","Content":"\n\u003Cp\u003EAre you sure guys about concave colliders, according to \u003Ca href=\u0022http://docs.unity3d.com/Manual/class-MeshCollider.html\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EThere are some limitations when using the Mesh Collider. Usually, \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Etwo Mesh Colliders cannot collide with each other\u003C/span\u003E. All Mesh Colliders can collide with any primitive Collider. If your mesh is marked as Convex, then it can collide with other Mesh Colliders.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E(colliders which can\u0027t collide ? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E)\u003C/p\u003E\u003Cp\u003EWhat I\u0027ve done with my part is split concave mesh into convex sub-meshes, ex: a V shape is just split into the two V arms, so I can put small parts like z-100 battery inside the V (impossible if one single convex collider used).\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-28T19:54:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Justin Kerbice\u0022 data-cite=\u0022Justin Kerbice\u0022\u003E\u003Cdiv\u003EAre you sure guys about concave colliders, according to \u003Ca href=\u0022http://docs.unity3d.com/Manual/class-MeshCollider.html\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E:\u003Cp\u003E(colliders which can\u0027t collide ? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E)\u003C/p\u003E\u003Cp\u003EWhat I\u0027ve done with my part is split concave mesh into convex sub-meshes, ex: a V shape is just split into the two V arms, so I can put small parts like z-100 battery inside the V (impossible if one single convex collider used).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eread a few lines down. or the end of that sentence.\u003C/p\u003E\u003Cp\u003E\u003Cem\u003EConvex If enabled, this Mesh Collider will collide with other Mesh Colliders. Convex Mesh Colliders are limited to 255 triangles.\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EAnd no, no such thing as concave colliders in Unity. anything that appears concave in game is a collection of overlapping colliders to approximate a concavity.\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-09-28T20:25:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Eread a few lines down. or the end of that sentence.\u003Cp\u003EAnd no, no such thing as concave colliders in Unity. anything that appears concave in game is a collection of overlapping colliders to approximate a concavity.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOf course, still a \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Enon-convex\u003C/span\u003E (checkbox not checked) collider won\u0027t collide (why call this collider ?)\u003C/p\u003E\u003Cp\u003EIf you look at Squad parts, they have never made concave shape, never, and all \u0022concave looking\u0022 shapes (like NASA mission engines cluster for example) are a big convex thing. And hollow cylinders like the 2.5 SAS module is not hollow, you can\u0027t put parts inside, the same as others parts, holes/concavity are filled by convex colliders.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-28T22:43:51Z","Content":"\n\u003Cp\u003Eit will collide with other colliders, just not another non-convex mesh collider.\u003C/p\u003E\n"},{"CreatedByName":"ximrm","CreatedById":111063,"CreatedDateTime":"2014-09-29T06:21:35Z","Content":"\n\u003Cp\u003EThe thing is part of an air-to-air refueling system.(where the fuel boom gets into to suck fuel)\u003C/p\u003E\u003Cp\u003EMy latest idea was to basically use 2 collider set-ups.\u003C/p\u003E\u003Cp\u003EOne for the base,where a cylinder might be enough and a few flat boxes scattered around the net(should be ~18).\u003C/p\u003E\u003Cp\u003ENo animation for those colliders, just a switch to enable the flat boxes(cylinder stays the same)after the net has expanded.(not very elegant but ok for an alpha release)\u003C/p\u003E\u003Cp\u003EThe hole in the middle should still be accessible.\u003C/p\u003E\u003Cp\u003EWould that eat up too much resources?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-29T06:37:26Z\u0022 title=\u002209/29/2014 06:37  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 29, 2014\u003C/time\u003E by ximrm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-29T14:10:43Z","Content":"\n\u003Cp\u003Eprimitive colliders are not too resources, that arrangement could work.\u003C/p\u003E\n"},{"CreatedByName":"OrbitusII","CreatedById":57305,"CreatedDateTime":"2014-09-29T14:30:56Z","Content":"\n\u003Cp\u003EI\u0027m able to approximate concave colliders by using convex mesh colliders. Basically, I split the collision mesh into four 90-degree sections and use those, rather than a single one. That\u0027s how I\u0027m able to get my active-passive docking port working correctly.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/iOdEisP.jpg\u0022 alt=\u0022iOdEisP.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt does require a bit of wizardy besides the collider setup to work but I\u0027d say that the collider setup is the coolest part of this docking port. It\u0027s very finicky but that\u0027s likely because the drogue (where the orange probe goes when docking) is so small, but it works as a proof-of-concept.\u003C/p\u003E\u003Cp\u003EI\u0027ll post a Unity Package here later today so everyone can take a look at it. It may be what you\u0027re looking for to get that air-to-air refueling working, ximrm.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-29T14:34:31Z\u0022 title=\u002209/29/2014 02:34  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 29, 2014\u003C/time\u003E by OrbitusII\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ximrm","CreatedById":111063,"CreatedDateTime":"2014-09-29T19:09:23Z","Content":"\n\u003Cp\u003EThanks for the replies and I\u0027d love to see that unity pack.\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif\u0022 alt=\u0022:kiss:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"OrbitusII","CreatedById":57305,"CreatedDateTime":"2014-09-30T01:10:41Z","Content":"\n\u003Cp\u003EHere\u0027s the Unity Package, and apparently the thing isn\u0027t set up the way I thought, but it still works.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/s4e285s2efodacd/DockingPortUnity.zip\u0022 rel=\u0022external nofollow\u0022\u003EDockingPortUnity.zip\u003C/a\u003E (DropBox)\u003C/p\u003E\u003Cp\u003EI\u0027d recommend observing some of its behavior in KSP so you have an idea of what it does, here\u0027s the link to my mod with the functional version.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/90406-One-Eye-Industries-Stylish-Cargo-Transportation-Options%21\u0022 rel=\u0022external nofollow\u0022\u003EOne-Eye Industries\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EAlso, 1000 posts. \u003C/strong\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"}]}