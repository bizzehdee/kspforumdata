{"TopicId":225431,"ForumId":36,"TopicTitle":"[WIP] LaserComm - optical communication system","CreatedByName":"IO","CreatedById":29120,"CreatedDateTime":"2024-07-13T21:08:35Z","PageNum":1,"Articles":[{"CreatedByName":"IO","CreatedById":29120,"CreatedDateTime":"2024-07-13T21:08:35Z","Content":"\n\u003Cp\u003E\nI had a thought: we have quite a few mods adding extra planetary systems, but even the modded antennas usually struggle to reach them. There is an existing technology that would fit that niche nicely though, but is not yet represented in the KSP: laser communication.\n\u003C/p\u003E\n\u003Cp\u003E\nOn the plugin side: it needs more testing, but I managed to get the basic functionality working i.e. added new kind of \u0022antenna\u0022 and link on top of CommNet. You need 2 optical terminals to connect vessels via laser link, but you can have different kind of links along the control path e.g. rover \u0026lt;-radio-\u0026gt; probe \u0026lt;-laser-\u0026gt; relay \u0026lt;-radio-\u0026gt; \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI also implemented a part module for tracking commnet nodes. Laser will always attempt to point at a valid relay or a ground station:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022q1LQYXF.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022120.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/q1LQYXF.png\u0022\u003E\u003Cimg alt=\u0022DrJajgS.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022120.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/DrJajgS.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nNow I\u0027m working on occlusion: it shouldn\u0027t be possible to communicate via laser from Eve\u0027s surface or Jool\u0027s athmosphere (assuming you\u0027re using cloud mods). I want to make it so the signal gradually degrades as you descend through an opaque atmosphere.\n\u003C/p\u003E\n\u003Cp\u003E\nThat leaves the most dreaded part: models and textures. I gathered quite a few references, and it\u0027s not like I have absolutely no experience with 3d modelling, but not really confident that I\u0027ll be able to make nice looking ones. So yeah, help welcome.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/IO5/KspLaserComm\u0022 rel=\u0022external nofollow\u0022\u003Egithub source\u003C/a\u003E if someone\u0027s interested.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"KspNoobUsernameTaken","CreatedById":229307,"CreatedDateTime":"2024-07-13T21:28:17Z","Content":"\n\u003Cp\u003E\nThis is great! It\u0027s a useful feature not filled by existing mods, and I like the implementation.\n\u003C/p\u003E\n"},{"CreatedByName":"BSS_Snag","CreatedById":205397,"CreatedDateTime":"2024-07-14T03:43:13Z","Content":"\n\u003Cp\u003E\nThis Looks Great!\n\u003C/p\u003E\n"},{"CreatedByName":"Fizzlebop Smith","CreatedById":227275,"CreatedDateTime":"2024-07-14T03:48:57Z","Content":"\n\u003Cp\u003E\nI am trying to fine tune some of the quirks in my current interstellar mod list. This looks super exciting.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2024-07-14T06:58:55Z","Content":"\n\u003Cp\u003E\nYES AND YES !\n\u003C/p\u003E\n\u003Cp\u003E\nAs for \u0022most dreaded part: models and textures\u0022 - to me coding is most dreaded part \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EModeling ... not such a big issue.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EDoes plugin have provisions for playing animations based on state of the laser comms ? Also it would be a good idea to post some kind of demonstration mesh in FBX or blender format so anyone trying to design parts can see object hierarchy, what goes where (especially transform hierarchy - i\u0027ve seen people struggle to work out animations/tracking\u00A0 on new models for other mods).\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EThat\u0027s my two cents.\u003C/span\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"IO","CreatedById":29120,"CreatedDateTime":"2024-07-14T11:37:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224407553\u0022 data-ipsquote-contentid=\u0022225431\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221720940335\u0022 data-ipsquote-userid=\u002293302\u0022 data-ipsquote-username=\u0022fatcargo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, fatcargo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan\u003EDoes plugin have provisions for playing animations based on state of the laser comms ? \u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nRight now nothing beside tracking. Depending on what\u0027s defined in the .cfg, if the laser loses its target, it either goes back to the defined rest position or just stops moving. I thought of having a deploy animation, but after looking through some references it didn\u0027t seem like I need one:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/a/x6PhHaY\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://imgur.com/a/x6PhHaY\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nshouldn\u0027t be too hard to add though.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224407553\u0022 data-ipsquote-contentid=\u0022225431\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221720940335\u0022 data-ipsquote-userid=\u002293302\u0022 data-ipsquote-username=\u0022fatcargo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, fatcargo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAlso it would be a good idea to post some kind of demonstration mesh in FBX or blender format so anyone trying to design parts can see object hierarchy, what goes where (especially transform hierarchy - i\u0027ve seen people struggle to work out animations/tracking\u00A0 on new models for other mods).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGood idea although in this case it just needs a heading pivot with a pitch pivot child:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022jsNTOrd.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002270.74\u0022 height=\u0022162\u0022 width=\u0022229\u0022 src=\u0022https://i.imgur.com/jsNTOrd.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nNames can be changed in part\u0027s .cfg too:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003EheadingPivotName = headingPivot\npitchPivotName = pitchPivot\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nUnfortunately this won\u0027t work with a more fancy setups like:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022E9MKd7N.jpeg\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002299.75\u0022 height=\u0022802\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/E9MKd7N.jpeg\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nso I might play with it some more.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222024-07-14T14:10:50Z\u0022 title=\u002207/14/2024 02:10  PM\u0022 data-short=\u00225 dy\u0022\u003ESunday at 02:10 PM\u003C/time\u003E by IO\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2024-07-15T10:13:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224407585\u0022 data-ipsquote-contentid=\u0022225431\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221720957035\u0022 data-ipsquote-userid=\u002229120\u0022 data-ipsquote-username=\u0022IO\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 hours ago, IO said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nRight now nothing beside tracking. Depending on what\u0027s defined in the .cfg, if the laser loses its target, it either goes back to the defined rest position or just stops moving.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOhh this reminds me : IF you are using stock module to do tracking, what are its limitations ? Target distance itself may not an issue if for example using solar panel module for track since it is designed to track sun at great distances. What i see as larger issue is precision loss due to large numerical values for interstellar target coordinates (akin to floating origin errors - well known issue for planet modders). On its own it isn\u0027t much - you\u0027ll have a targeting error and thats it. BUT, problem may arise if tracking module (stock or custom) tries to perform changes close to floating point errors - visually it may produce jerky movement, constantly yanking the mesh. You could allow for greater errors still below perceptible levels and do some kind of smoothing/integrating over time for smooth movement.\n\u003C/p\u003E\n\u003Cp\u003E\nDeploy/retract may not be needed if done via some other animation module, but it\u0027d be nice if your tracker could pay attention to deployed state and allow functions only if part is deployed [NB: deploy/retract animations may be looped].\u003Cbr\u003E\nFeature request (for general modder public) : playing animations on comm status. One for established and one for stop. Also please if this is implemented, do wait for comms on/off animations to complete prior to running anything else.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222024-07-15T10:14:33Z\u0022 title=\u002207/15/2024 10:14  AM\u0022 data-short=\u00225 dy\u0022\u003EMonday at 10:14 AM\u003C/time\u003E by fatcargo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"IO","CreatedById":29120,"CreatedDateTime":"2024-07-15T11:00:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224407859\u0022 data-ipsquote-contentid=\u0022225431\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221721038402\u0022 data-ipsquote-userid=\u002293302\u0022 data-ipsquote-username=\u0022fatcargo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n31 minutes ago, fatcargo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOhh this reminds me : IF you are using stock module to do tracking, what are its limitations ? Target distance itself may not an issue if for example using solar panel module for track since it is designed to track sun at great distances. What i see as larger issue is precision loss due to large numerical values for interstellar target coordinates (akin to floating origin errors - well known issue for planet modders). On its own it isn\u0027t much - you\u0027ll have a targeting error and thats it. BUT, problem may arise if tracking module (stock or custom) tries to perform changes close to floating point errors - visually it may produce jerky movement, constantly yanking the mesh. You could allow for greater errors still below perceptible levels and do some kind of smoothing/integrating over time for smooth movement.\n\u003C/p\u003E\n\u003Cp\u003E\nDeploy/retract may not be needed if done via some other animation module, but it\u0027d be nice if your tracker could pay attention to deployed state and allow functions only if part is deployed [NB: deploy/retract animations may be looped].\u003Cbr\u003E\nFeature request (for general modder public) : playing animations on comm status. One for established and one for stop. Also please if this is implemented, do wait for comms on/off animations to complete prior to running anything else.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not using the stock module, IIRC it doesn\u0027t support rotation limits. IDK about rounding errors producing jerky motion: I interpolate the current and the target direction via \u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/Mathf.SmoothDampAngle.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.unity3d.com/ScriptReference/Mathf.SmoothDampAngle.html\u003C/a\u003E so even if the former jumps around the movement should still be smooth.\n\u003C/p\u003E\n\u003Cp\u003E\nAbout deploy animation: I had one other person asking about it, so I\u0027ll probably add it and handle it within the module.\n\u003C/p\u003E\n"}]}