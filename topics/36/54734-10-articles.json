{"TopicId":54734,"ForumId":36,"TopicTitle":"[1.2.0] Toolbar 1.7.13 - Common API for draggable/resizable buttons toolbar","CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2013-11-29T22:39:58Z","PageNum":10,"Articles":[{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2014-03-05T14:18:30Z","Content":"\n\u003Cp\u003EInteresting with the drawable idea. Since your heading down this road anyway it seems, maybe a future custom pop up message window people can use to display an event...\u003C/p\u003E\n"},{"CreatedByName":"GraAingeal","CreatedById":104775,"CreatedDateTime":"2014-03-05T22:13:51Z","Content":"\n\u003Cp\u003EHello, after installing the toolbar i get this message in the Debug Toolbar when im launching a rocket: [Exception]: NullReferenceException\u003C/p\u003E\u003Cp\u003EAnd when im returning to my vessel from the tracking station i get this: KeyNotFoundException: The given key was not present in the dictionary.\u003C/p\u003E\u003Cp\u003EIs this bad?\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-03-05T22:27:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022GraAingeal\u0022 data-cite=\u0022GraAingeal\u0022\u003E\u003Cdiv\u003EHello, after installing the toolbar i get this message in the Debug Toolbar when im launching a rocket: [Exception]: NullReferenceException\u003Cp\u003EAnd when im returning to my vessel from the tracking station i get this: KeyNotFoundException: The given key was not present in the dictionary.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENeed more information. Please find those exceptions in your output_log.txt, which has way more information, then post them with the complete stack trace here.\u003C/p\u003E\u003Cp\u003EAs to if they\u0027re \u0022bad\u0022: Even if they\u0027re caused by the Toolbar Plugin, they could be harmless. It\u0027s not easy to tell with too few information.\u003C/p\u003E\n"},{"CreatedByName":"GraAingeal","CreatedById":104775,"CreatedDateTime":"2014-03-05T22:51:18Z","Content":"\n\u003Cp\u003ENullReferenceException\u003C/p\u003E\u003Cp\u003E at (wrapper managed-to-native) UnityEngine.Component:InternalGetTransform ()\u003C/p\u003E\u003Cp\u003E at UnityEngine.Component.get_transform () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SpaceCenterCamera2.UpdateTransformOverview () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SpaceCenterCamera2.UpdateTransform () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SpaceCenterCamera2.Update () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E(Filename: Line: -1)\u003C/p\u003E\u003Cp\u003E__________________________________________________________________________________________________\u003C/p\u003E\u003Cp\u003EKeyNotFoundException: The given key was not present in the dictionary.\u003C/p\u003E\u003Cp\u003E at System.Collections.Generic.Dictionary\u00602[Vessel,MapObject].get_Item (.Vessel key) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at SpaceTracking.OnDestroy () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E(Filename: Line: -1)\u003C/p\u003E\u003Cp\u003EDo you need more information?\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-03-05T22:54:03Z","Content":"\n\u003Cp\u003EThe stack traces do not mention the Toolbar Plugin directly, and it doesn\u0027t do anything with vessels or camera objects. So I think these are not caused by the plugin.\u003C/p\u003E\n"},{"CreatedByName":"GraAingeal","CreatedById":104775,"CreatedDateTime":"2014-03-05T23:09:48Z","Content":"\n\u003Cp\u003EHmm, after removing the Toolbar Plugin the NullReferenceException is gone but the KeyNotFoundException is still happening.\u003C/p\u003E\u003Cp\u003ECan you tell me if they are bad?\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-03-05T23:11:02Z","Content":"\n\u003Cp\u003EI\u0027m afraid I can\u0027t.\u003C/p\u003E\n"},{"CreatedByName":"GraAingeal","CreatedById":104775,"CreatedDateTime":"2014-03-05T23:19:10Z","Content":"\n\u003Cp\u003EOk, thanks anyway.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-03-06T01:50:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022GraAingeal\u0022 data-cite=\u0022GraAingeal\u0022\u003E\u003Cdiv\u003EOk, thanks anyway.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt might be helpful if you include all the mods you have installed, or even better your entire output_log.txt. But if you did fully remove toolbar, it is probably caused by some other mod.\u003C/p\u003E\n"},{"CreatedByName":"GraAingeal","CreatedById":104775,"CreatedDateTime":"2014-03-06T18:28:37Z","Content":"\n\u003Cp\u003EIt was a fresh install with no other mods than toolbar. In the meantime i tested with other mods too (every mod seperate) and some where causing the NullReferenceException and some not. But i always got the key KeyNotFoundException.\u003C/p\u003E\u003Cp\u003EI now think that the KeyNotFoundException is caused by KSP itself (I\u0027ve tested without mods). It does not always appear but most of the time, thats why i first thought it was caused by toolbar.\u003C/p\u003E\u003Cp\u003ENow i tested again with toolbar and i dont get the NullReferenceException anymore but still the KeyNotFoundException. I dont know why.\u003C/p\u003E\u003Cp\u003ESo i dont think toolbar is causing those messages.\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-03-09T16:23:22Z","Content":"\n\u003Cp\u003EI\u0027m trying to integrate Toolbar into my mod without a hard dependency (using the Toolbar Wrapper) but keep running into an error. It works great when I build against the .dll by the way, so thank you for that! I\u0027ve changed the namespace to that of my mod and it compiles just fine, but whenever I try to actually load the game I keep getting this error:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ENon platform assembly: C:\\Program Files (x86)\\Steam\\SteamApps\\common\\Kerbal Space Program\\GameData\\KerbalConstructionTime\\Kerbal_Construction_Time.dll (this message is harmless)\u003Cbr\u003EAssemblyLoader: Exception loading \u0027Kerbal_Construction_Time\u0027: System.Reflection.ReflectionTypeLoadException: The classes in the module cannot be loaded.\u003Cbr\u003E\u003Cbr\u003E  at (wrapper managed-to-native) System.Reflection.Assembly:GetTypes (bool)\u003Cbr\u003E\u003Cbr\u003E  at System.Reflection.Assembly.GetTypes () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at AssemblyLoader.LoadAssemblies () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003EAdditional information about this exception:\u003Cbr\u003E\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027Kerbal_Construction_Time.ToolbarManager\u0027 from assembly \u0027Kerbal_Construction_Time, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003Cbr\u003E\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027Kerbal_Construction_Time.GameScenesVisibility\u0027 from assembly \u0027Kerbal_Construction_Time, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/ea95e74f6e5f192d/Runtime/ExportGenerated/StandalonePlayer/UnityEngineDebug.cpp Line: 54)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m sure it\u0027s something that I\u0027m doing wrong, but I can\u0027t seem to figure it out.\u003C/p\u003E\u003Cp\u003EI\u0027ve also got this in my main file to add the button:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Einternal Kerbal_Construction_Time()\u003Cbr\u003E        {\u003Cbr\u003E            if (ToolbarManager.ToolbarAvailable)\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log(\u0022[KCT] Adding Toolbar Button\u0022);\u003Cbr\u003E                KCT_GameStates.kctToolbarButton = ToolbarManager.Instance.add(\u0022Kerbal_Construction_Time\u0022, \u0022MainButton\u0022);\u003Cbr\u003E                KCT_GameStates.kctToolbarButton.TexturePath = KCT_Utilities.GetButtonTexture();\u003Cbr\u003E                KCT_GameStates.kctToolbarButton.ToolTip = \u0022Kerbal Construction Time\u0022;\u003Cbr\u003E                KCT_GameStates.kctToolbarButton.OnClick \u002B= ((e) =\u0026gt;\u003Cbr\u003E                {\u003Cbr\u003E                    KCT_GUI.onClick();\u003Cbr\u003E                });\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public void OnDestroy()\u003Cbr\u003E        {\u003Cbr\u003E            if (KCT_GameStates.kctToolbarButton != null)\u003Cbr\u003E            {\u003Cbr\u003E                KCT_GameStates.kctToolbarButton.Destroy();\u003Cbr\u003E            }\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand in KCT_GameStates I have \u0022public static IButton kctToolbarButton;\u0022\u003C/p\u003E\u003Cp\u003EThanks for your help! Let me know if I need to provide anything else.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-03-09T16:25:18Z","Content":"\n\u003Cp\u003EDid you set your target .NET version to 3.5? That\u0027s what KSP uses.\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-03-09T16:30:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EDid you set your target .NET version to 3.5? That\u0027s what KSP uses.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell that was a remarkably easy fix... Thank you! Now it works perfectly fine!\u003C/p\u003E\n"},{"CreatedByName":"K3-Chris","CreatedById":61664,"CreatedDateTime":"2014-03-09T16:42:44Z","Content":"\n\u003Cp\u003EWhy does all toolbar buttons default to hidden anyway? It\u0027s confusing and annoying to have to add each new mod\u0027s icon to the bar, they should be visible by default, most people will want to see them all or hide specific ones they don\u0027t want, not only show a few.\u003C/p\u003E\n"},{"CreatedByName":"softweir","CreatedById":2795,"CreatedDateTime":"2014-03-09T18:02:35Z","Content":"\n\u003Cp\u003EGiven the number of buttons that some mods have (I\u0027m looking at yooooou, MechJeb), the default of hiding all buttons may be better than revealing all.\u003C/p\u003E\u003Cp\u003EHowever, an even better idea might be to show all buttons but to have a Hide All facility.\u003C/p\u003E\n"},{"CreatedByName":"K3-Chris","CreatedById":61664,"CreatedDateTime":"2014-03-09T18:05:59Z","Content":"\n\u003Cp\u003EMJ has no buttons by default except the MJ menu one, you need to hit the small t on the window to add them as far as I know.\u003C/p\u003E\u003Cp\u003EI just put all of them in a folder with the MJ icon as the folder icon.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-03-09T18:07:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022K3|Chris\u0022 data-cite=\u0022K3|Chris\u0022\u003E\u003Cdiv\u003EMJ has no buttons by default except the MJ menu one, you need to hit the small t on the window to add them as far as I know.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have advised Sarbian to get rid of the little T because players can now choose themselves which buttons they want to see.\u003C/p\u003E\n"},{"CreatedByName":"K3-Chris","CreatedById":61664,"CreatedDateTime":"2014-03-09T18:12:58Z","Content":"\n\u003Cp\u003EWhat do you think about my suggestion to make buttons visible by default instead of hidden? I find it annoying, every time I install a mod that uses the toolbar I need to remember to show it\u0027s button to use it, just feels like it\u0027s less work hiding what you don\u0027t want than showing everything you want, seems a bit backwards currently.\u003C/p\u003E\n"},{"CreatedByName":"Roxette","CreatedById":84963,"CreatedDateTime":"2014-03-15T14:01:39Z","Content":"\n\u003Cp\u003ECurrent release 1.7.0 fails silently if there is no pre-existing toolbar-settings.dat file present.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-03-15T14:05:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Roxette\u0022 data-cite=\u0022Roxette\u0022\u003E\u003Cdiv\u003ECurrent release 1.7.0 fails silently if there is no pre-existing toolbar-settings.dat file present.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWorks fine for me.\u003C/p\u003E\n"},{"CreatedByName":"Roxette","CreatedById":84963,"CreatedDateTime":"2014-03-15T14:39:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EWorks fine for me.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EApologies... more investigation revealed subtle difference in behaviour. IIRC, previous versions said hello and created the toolbar.dat all by themselves, this one does nothing unless and until another plugin requests it. i.e. if the only present plugins are built with it as an option rather than a hard dependency, until they are configured to use it, it does not create the file or show itself. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"smunisto","CreatedById":57789,"CreatedDateTime":"2014-03-15T20:26:18Z","Content":"\n\u003Cp\u003EI have a problem - Toolbar seems to have 2 instances running. \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/xc46vjp9btdrnul/Screenshot%202014-03-15%2022.24.37.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/xc46vjp9btdrnul/Screenshot%202014-03-15%2022.24.37.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI have tried searching my Game Data folder - there is just one toolbar.dll, and just one 000_Toolbar folder(aside from the secondary 000_Toolbar) in BoulderCo.\u003C/p\u003E\n"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2014-03-15T21:59:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022smunisto\u0022 data-cite=\u0022smunisto\u0022\u003E\u003Cdiv\u003EI have a problem - Toolbar seems to have 2 instances running. \u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/xc46vjp9btdrnul/Screenshot%202014-03-15%2022.24.37.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/xc46vjp9btdrnul/Screenshot%202014-03-15%2022.24.37.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI have tried searching my Game Data folder - there is just one toolbar.dll, and just one 000_Toolbar folder(aside from the secondary 000_Toolbar) in BoulderCo.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s because you must\u0027ve created another one somewhen. A couple if updates ago, blizzy made so you can have multiple ones. See the delete toolbar option in the dropdown? Click that.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-03-16T01:07:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hfbs\u0022 data-cite=\u0022hfbs\u0022\u003E\u003Cdiv\u003EThat\u0027s because you must\u0027ve created another one somewhen. A couple if updates ago, blizzy made so you can have multiple ones. See the delete toolbar option in the dropdown? Click that.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, this. In your screenshot, the \u0022Delete Toolbar\u0022 option is enabled. It will only ever be enabled if there is more than one toolbar (so that you cannot delete the last one.)\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-04-02T16:55:23Z","Content":"\n\u003Cp\u003EToolbar Plugin 1.7.1 is now available for download.\u003C/p\u003E\n"}]}