{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":221,"Articles":[{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2016-12-14T11:07:40Z","Content":"Sry to break up this awesome ring shader discussion but OMG just realized I would take back all my previous suggestions for future shader work in exchange for planet shine ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) how\u0027d I forget about that??"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2016-12-14T13:16:26Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) is it possible to add shadow support for non atmo bodies during eclipses?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-12-14T13:30:29Z","Content":"\u003E \n\u003E \n\u003E 13 minutes ago, Galileo said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) is it possible to add shadow support for non atmo bodies during eclipses?\n\u003E \n\nPlanned for the future, and I want to do it the right way, not just adding a fake atmo etc"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2016-12-15T05:33:00Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Remember that totally awesome experiment you had, the wave interaction demo from a year ago? Well ... a lot has happened with the water physics since then and how KSP handles interaction with colliders ... You\u0027ve got you hands full with scatterer and I\u0027m grateful for that. But if you ever feel like doing something else ... ;-)"},{"CreatedByName":"The White Guardian","CreatedById":148627,"CreatedDateTime":"2016-12-15T12:38:19Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) How does Scatterer\u0027s detection system work nowadays? I mean, do I still need to put all of the planet-specific files in scatterer/config/Planets or can I place them elsewhere, for example in the folder of a Kopernicus mod?\n\nAnd do I still need to add all of the info to scatterer/config/PlanetsList or can I create another config elsewhere in which I provide info for Scatterer for mod planets?\n\nJust wondering if I need to help people through the Scatterer install instructions when I update my Kopernicus mods again, or if I can make it in such a way that it activates automatically upon Scatterer install."},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2016-12-15T13:39:49Z","Content":"[@The White Guardian](https://forum.kerbalspaceprogram.com/index.php?/profile/148627-the-white-guardian/) Scatterer now can be patched via \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E so your configs (be it the planet list, the sun flare or the body-specific scatter parameters) can be anywhere inside the GameData folder."},{"CreatedByName":"The White Guardian","CreatedById":148627,"CreatedDateTime":"2016-12-15T13:51:16Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, Phineas Freak said:\n\u003E \n\u003E \n\u003E [@The White Guardian](https://forum.kerbalspaceprogram.com/index.php?/profile/148627-the-white-guardian/) Scatterer now can be patched via \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E so your configs (be it the planet list, the sun flare or the body-specific scatter parameters) can be anywhere inside the GameData folder.\n\u003E \n\nAlright, thank you!\n\nSo how should I do this placement exactly? A config with my mod that reads:\n\n    Scatterer_planetsList\n    {scattererCelestialBodies{\tX}\n    }\n\nAnd another one with\n\n    Scatterer_atmosphere\n    {PLANETNAME{}PLANETNAME{}PLANETNAME{}\n    }\n\nOr would that not work / cause conflicts with Scatterer\u0027s default files?"},{"CreatedByName":"cy4n","CreatedById":185531,"CreatedDateTime":"2016-12-15T13:57:20Z","Content":"[@The White Guardian](https://forum.kerbalspaceprogram.com/index.php?/profile/148627-the-white-guardian/)\n\n    @Scatterer_planetsList\n    {\t\t@scattererCelestialBodies{\tItem\t{\t\tcelestialBodyName = BODY_NAME\t\t\t\tstuff...\t}}\n    }\n\nand then\n\n    @Scatterer_atmosphere\n    {BODY_NAME{\tstuff...}\n    }"},{"CreatedByName":"The White Guardian","CreatedById":148627,"CreatedDateTime":"2016-12-15T13:57:41Z","Content":"\u003E \n\u003E \n\u003E Just now, cy4n said:\n\u003E \n\u003E \n\u003E [@The White Guardian](https://forum.kerbalspaceprogram.com/index.php?/profile/148627-the-white-guardian/)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     @Scatterer_planetsList\n\u003E     {\t\t@scattererCelestialBodies{\tItem\t{\t\tcelestialBodyName = BODY_NAME\t\t\t\tstuff...\t}}\n\u003E     }\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E and then\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     @Scatterer_atmosphere\n\u003E     {BODY_NAME{\tstuff...}\n\u003E     }\n\u003E \n\nAlright, thanks!"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-12-15T14:11:11Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, Azimech said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Remember that totally awesome experiment you had, the wave interaction demo from a year ago? Well ... a lot has happened with the water physics since then and how KSP handles interaction with colliders ... You\u0027ve got you hands full with scatterer and I\u0027m grateful for that. But if you ever feel like doing something else ... ;-)\n\u003E \n\nThe approach I was using last time is just not the right way to do it (basically just offseting the ocean level for seaparate parts every physics frame, which is flawed for multiple reasons). Last I checked nothing in the water physics changed from last time I attempted this and I\u0027m still convinced I\u0027d need to write my own buoyancy engine to get this working correctly. Which is not a simple task and also a field I know nothing about. I would have to spend a long time just researching and experimenting. And while this is interesting I\u0027m not going to do it anytime soon ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2016-12-15T14:13:24Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, blackrack said:\n\u003E \n\u003E \n\u003E The approach I was using last time is just not the right way to do it (basically just offseting the ocean level for seaparate parts every physics frame, which is flawed for multiple reasons). Last I checked nothing in the water physics changed from last time I attempted this and I\u0027m still convinced I\u0027d need to write my own buoyancy engine to get this working correctly. Which is not a simple task and also a field I know nothing about. I would have to spend a long time just researching and experimenting. And while this is interesting I\u0027m not going to do it anytime soon ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nUnderstood, thanks for the insight :-)"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2016-12-15T16:15:59Z","Content":"hey Blackrack, are there any different steps in the config tool when creating atmospheres on planets other than Kerbin? I was able to edit Kerbin efficiently, but I don\u0027t know how to change the effects on Eve/Duna/Jool/Laythe. Anything different I should do for planets with different sizes? Do I just simply copy the configs and files from the tool straight over like I do so with Kerbin?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-12-15T18:41:25Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Avera9eJoe said:\n\u003E \n\u003E \n\u003E hey Blackrack, are there any different steps in the config tool when creating atmospheres on planets other than Kerbin? I was able to edit Kerbin efficiently, but I don\u0027t know how to change the effects on Eve/Duna/Jool/Laythe. Anything different I should do for planets with different sizes? Do I just simply copy the configs and files from the tool straight over like I do so with Kerbin?\n\u003E \n\nYes same as usual, it\u0027s better not to modify Rg in the config tool, leave it at default, scale Rt and Rl accordingly, then copy everything to the game and it will resize automatically to any planet."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2016-12-15T18:59:28Z","Content":"\u003E \n\u003E \n\u003E 23 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Yes same as usual, it\u0027s better not to modify Rg in the config tool, leave it at default, scale Rt and Rl accordingly, then copy everything to the game and it will resize automatically to any planet.\n\u003E \n\nAwesome - I half assumed that it it did that on it\u0027s own. I\u0027ll be messing around with this a bit tonight - I was pleased to see that Kerbin is reddish once again! Or maybe it\u0027s just my eyes. Either way since the old \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E port is still compatible with Scatterer I\u0027ll be having some fun with it tonight revamping some old packs for my KSPTV debut on Friday ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n**Edited \u003Ctime datetime=\u00222016-12-15T19:05:18Z\u0022 title=\u002212/15/2016 07:05  PM\u0022 data-short=\u00227 yr\u0022\u003EDecember 15, 2016\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"Poodmund","CreatedById":128643,"CreatedDateTime":"2016-12-15T19:36:32Z","Content":"\u003E \n\u003E \n\u003E 5 hours ago, The White Guardian said:\n\u003E \n\u003E \n\u003E \\*snip\\*\n\u003E \n\n\u003E \n\u003E \n\u003E 5 hours ago, cy4n said:\n\u003E \n\u003E \n\u003E \\*snip\\*\n\u003E \n\nI am using the same method as cy4n to implement Scatter in my own mod directory for the OPM bodies but I am having issues where the default Scatterer files/configs need to be present for my own configs to work and also the config path for the modded bodies all default to the default Scatterer, Duna config path in the GUI.\n\nLet me know how you get on with it if you may.\n\nMy ultimate test is to create a Scatterer config that works outside of the main Scatterer directory with only the Scatterer .dll present. It does not seem to function fully in this way at the moment but that would be the sure fire way to test whether \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E hook ins are working fully and as expected."},{"CreatedByName":"Nansuchao","CreatedById":135151,"CreatedDateTime":"2016-12-15T19:43:02Z","Content":"\u003E \n\u003E \n\u003E 43 minutes ago, Avera9eJoe said:\n\u003E \n\u003E \n\u003E Awesome - I half assumed that it it did that on it\u0027s own. I\u0027ll be messing around with this a bit tonight - I was pleased to see that Kerbin is reddish once again! Or maybe it\u0027s just my eyes. Either way since the old \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E port is still compatible with Scatterer I\u0027ll be having some fun with it tonight revamping some old packs for my KSPTV debut on Friday ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nShare them, please! ![:blush:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif \u0022:blush:\u0022)"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2016-12-15T20:01:01Z","Content":"\u003E \n\u003E \n\u003E 26 minutes ago, Nansuchao said:\n\u003E \n\u003E \n\u003E Share them, please! ![:blush:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif \u0022:blush:\u0022)\n\u003E \n\nxD I\u0027ll give it to you ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) - I\u0027m not allowed to \u0027mass distribute\u0027 it though since it\u0027s pulling textures from both Astronomer\u0027s Interstellar and Better Atmospheres. I got clear permission from the owner of BA but only half-permission from Astronomer. Going to try and insert the \u003Cabbr title=\u0022KSP Renaissance Compilation (mod)\u0022\u003EKSPRC\u003C/abbr\u003E terrain [in these images](https://forum.kerbalspaceprogram.com/index.php?/topic/69702-112-ksprc-renaissance-compilation-artworks-remake-v-07-pre-release-3/\u0026page=82#comment-2336686) through Kopernicus tonight if I have the time tonight. I\u0027ll need all the luck I can get... ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\n- As a side note I really wish I could do more in new \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E... so much of what I loved with atmospheres is impossible with it now. It\u0027s a trade off between putting [glow on every single planet](http://imgur.com/a/tdx9c), or having cloud shadows.\n\n**Edited \u003Ctime datetime=\u00222016-12-15T20:10:05Z\u0022 title=\u002212/15/2016 08:10  PM\u0022 data-short=\u00227 yr\u0022\u003EDecember 15, 2016\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-12-15T20:13:42Z","Content":"\u003E \n\u003E \n\u003E 36 minutes ago, Poodmund said:\n\u003E \n\u003E \n\u003E I am using the same method as cy4n to implement Scatter in my own mod directory for the OPM bodies but I am having issues where the default Scatterer files/configs need to be present for my own configs to work and also the config path for the modded bodies all default to the default Scatterer, Duna config path in the GUI.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Let me know how you get on with it if you may.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E My ultimate test is to create a Scatterer config that works outside of the main Scatterer directory with only the Scatterer .dll present. It does not seem to function fully in this way at the moment but that would be the sure fire way to test whether \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E hook ins are working fully and as expected.\n\u003E \n\nNot sure what\u0027s going on here but I will investigate."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2016-12-16T01:14:23Z","Content":"I\u0027ve started fiddling with your configurator again Blackrack and I have to say that once you get fast at copying and pasting from the config tool it can be surprisingly simple to get something you like.\n\nI have a small bug to report which I sadly don\u0027t have any pictures of... It appears as though Laythe\u0027s atmosphere has a strong, black rim around it\u0027s edge that\u0027s visible when it passes in front of Jool. It was also on Jool until I changed scenes. Is there a button somewhere I should press to fix this or is it just a bug that hasn\u0027t yet had the time to be squashed?"},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2016-12-16T08:03:20Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) speaking about Rt and Rl: is there any definite way to pre-calculate (eyeball) them based on the parameters of a body (i.e. atmospheric height, atmospheric density etc) or is it all trial-and-error? I have been using a algorithm but it seems like it does not work for all computer configurations:\n\n- Get the atmospheric body altitude\n- Divide it by two to get Rt\n- Add a (random?) value to get Rl\n\n(or the issue with the cloud fade-in and out is not caused by these two parameters but from the actual scatter point values?)"},{"CreatedByName":"cy4n","CreatedById":185531,"CreatedDateTime":"2016-12-16T11:23:54Z","Content":"[@Poodmund](https://forum.kerbalspaceprogram.com/index.php?/profile/128643-poodmund/) Are you using\n\n    @Scatterer_atmosphere\n    {stuff...\n    }\n\nin your configs? If so, the reason they don\u0027t work without the default configs is that there\u0027s no Scatterer\\_atmosphere to edit."},{"CreatedByName":"Poodmund","CreatedById":128643,"CreatedDateTime":"2016-12-16T18:26:38Z","Content":"\u003E \n\u003E \n\u003E 7 hours ago, cy4n said:\n\u003E \n\u003E \n\u003E [@Poodmund](https://forum.kerbalspaceprogram.com/index.php?/profile/128643-poodmund/) Are you using\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     @Scatterer_atmosphere\n\u003E     {stuff...\n\u003E     }\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E in your configs? If so, the reason they don\u0027t work without the default configs is that there\u0027s no Scatterer\\_atmosphere to edit.\n\u003E \n\nI was using %Scatterer\\_atmosphere and so on for the others, % being Edit existing or Create if none found."},{"CreatedByName":"RufousTreepie","CreatedById":172660,"CreatedDateTime":"2016-12-18T18:01:23Z","Content":"First of all, a big thanks [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) for the wonderful work. I had a bug report, didn\u0027t see it mentioned anywhere. Sorry if it is already known.\n\nOn a stock 1.2.2 install, on exiting from the space centre to the main menu, the \u0022Mun or bust\u0022 screen appears. But with only scatterer 0.256 added to stock, the main menu is kerbin, not the mun or bust screen. Not much of an issue, but it would be interesting to know why. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n[http://imgur.com/l6OcuTK](http://imgur.com/l6OcuTK)\n\n[http://imgur.com/T1FNKYV](http://imgur.com/T1FNKYV)\n\n**Edited \u003Ctime datetime=\u00222016-12-19T10:36:18Z\u0022 title=\u002212/19/2016 10:36  AM\u0022 data-short=\u00227 yr\u0022\u003EDecember 19, 2016\u003C/time\u003E by RufousTreepie**\n  \ncorrected broken link"},{"CreatedByName":"THX-1138","CreatedById":56367,"CreatedDateTime":"2016-12-18T20:59:45Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, RufousTreepie said:\n\u003E \n\u003E \n\u003E First of all, a big thanks [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) for the wonderful work. I had a bug report, didn\u0027t see it mentioned anywhere. Sorry if it is already known.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E On a stock 1.2.2 install, on exiting from the space centre to the main menu, the \u0022Mun or bust\u0022 screen appears. But with only scatterer 0.256 added to stock, the main menu is kerbin, not the mun or bust screen. Not much of an issue, but it would be interesting to know why. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E [http://imgur.com/l6OcuTK](http://imgur.com/l6OcuTK)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [http://imgur.com/AfeLshQ](http://imgur.com/AfeLshQ)\n\u003E \n\n[@RufousTreepie](https://forum.kerbalspaceprogram.com/index.php?/profile/172660-rufoustreepie/) Hello! As far as I understand, this is normal.  I get the same thing."},{"CreatedByName":"RufousTreepie","CreatedById":172660,"CreatedDateTime":"2016-12-19T10:27:56Z","Content":"\u003E \n\u003E \n\u003E 12 hours ago, THX-1138 said:\n\u003E \n\u003E \n\u003E [@RufousTreepie](https://forum.kerbalspaceprogram.com/index.php?/profile/172660-rufoustreepie/) Hello! As far as I understand, this is normal.  I get the same thing.\n\u003E \n\n Ok. I just mentioned it in case it was unplanned behaviour or indicated some deeper issue. Also, exiting directly to main menu from flight still brings up the \u0022Mun or Bust\u0022 screen."}]}