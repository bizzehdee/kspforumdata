{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":2,"Articles":[{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-01-31T17:41:18Z","Content":"\n\u003Cp\u003EOk... Ive been trying some early experiments with my first arduino today (and learning about resistors!). I\u0027ve tried wiring up your light demo but I\u0027m not getting it to work.\u003C/p\u003E\u003Cp\u003EI think I\u0027ve wired it up the same (I\u0027m using a Mega2560... I assume the blue wire on yours is plugged into the ground but it looks like it is in the wrong place...) but all that happens is the green led comes on for about 2 or 3 seconds when the game loads in to the main menu. The warning lights aren\u0027t working in game and I\u0027m getting the tiny RX led flashing like crazy on the board.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-01-31T19:01:12Z","Content":"\n\u003Cp\u003EHere is a more detailed description. I have no other mods installed.\u003C/p\u003E\u003Cp\u003EKSP Loads...\u003C/p\u003E\u003Cp\u003EWhen title screen appears all three leds flicker once (almost imperceptibly).\u003C/p\u003E\u003Cp\u003EGreen LED then turns on for about 2 seconds - then turns off.\u003C/p\u003E\u003Cp\u003EI load a game.\u003C/p\u003E\u003Cp\u003ESelect a ship and load.\u003C/p\u003E\u003Cp\u003EAs soon as the scene is loaded in and I\u0027m on the launchpad the tiny LED marked \u0022RX\u0022 on the Arduino begins flickering really quickly.\u003C/p\u003E\u003Cp\u003EThe red, yellow and green warning lights do nothing throughout the flight :/\u003C/p\u003E\u003Cp\u003EI also have the log file but I don\u0027t know how people post them in those clever scrolling text boxes!\u003C/p\u003E\u003Cp\u003EHere is how I have it wired. The resistors are the ones supplied with the LEDs specifically for use with the Arduino.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/aKXChu1.jpg\u0022 alt=\u0022aKXChu1.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-01-31T19:08:12Z\u0022 title=\u002201/31/2014 07:08  PM\u0022 data-short=\u002210 yr\u0022\u003EJanuary 31, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-31T21:44:43Z","Content":"\n\u003Cp\u003EHmm.. OK your wiring is correct, and if the rx led is flashing it means it\u0027s talking to the arduino. It\u0027s probably because you need the latest version of the plugin which outputs some more data. I guess I only updated the source code to github and forgot to re-upload the new dll files. Try it again with the 0.11 plugin, same link on the first page.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-01-31T21:56:21Z","Content":"\n\u003Cp\u003EOk just downloaded again... I\u0027ll set up the board again.\u003C/p\u003E\u003Cp\u003ENot sure this is the problem though as the file size and dates of the new DLLs are identical to my old ones.\u003C/p\u003E\u003Cp\u003EOk, still not working \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E exactly the same as before although I have noticed that I am getting a message on KSP saying something like Starting Port Com1 when the launchpad scene is loaded. Still no lights though other than the green one in the main title menu.\u003C/p\u003E\u003Cp\u003EThe only differences I can think of are...\u003C/p\u003E\u003Cp\u003EI am using an Arduino Mega 2560 rev3\u003C/p\u003E\u003Cp\u003EI am using different power LEDS with 220r resistors\u003C/p\u003E\u003Cp\u003EIve just noticed that your serial port.dll still says last edited 25/12/2013 Is that up to date? KSPSerialIO is newer..\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-03T18:40:35Z\u0022 title=\u002202/03/2014 06:40  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 3, 2014\u003C/time\u003E by sal_vager\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-31T22:58:23Z","Content":"\n\u003Cp\u003EThe dlls should be correct, I pulled them directly from my ksp folder which I just tested, and I didn\u0027t do anything to serialport.dll lately. When you say there are no lights does that mean you are not even getting the rx blinks any more? If you don\u0027t see the rx blinks any more then that\u0027s quite important.\u003C/p\u003E\u003Cp\u003EThe correct behaviour of the demo should be: \u003C/p\u003E\u003Cp\u003EStart KSP, main menu loads, plugin loads and searches for the arduino, green LED on when it finds it then turns off. (press alt - F2 during loading to see if there are any error messages)\u003C/p\u003E\u003Cp\u003EAt the launch pad, when the scene loads it should say \u0022Starting serial port X\u0022 or \u0022Using serial port X\u0022 in the middle of the screen and the green LED should be on. When you launch you should see the warning lights if there\u0027s something to warn (G or low fuel).\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-01-31T23:43:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EThe dlls should be correct, I pulled them directly from my ksp folder which I just tested, and I didn\u0027t do anything to serialport.dll lately. When you say there are no lights does that mean you are not even getting the rx blinks any more? If you don\u0027t see the rx blinks any more then that\u0027s quite important.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERX is blinking, so the plugin is sending data to the board.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EThe correct behaviour of the demo should be: \u003Cp\u003EStart KSP, main menu loads, plugin loads and searches for the arduino, green LED on when it finds it then turns off. (press alt - F2 during loading to see if there are any error messages)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECheck! All fine so far...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EAt the launch pad, when the scene loads it should say \u0022Starting serial port X\u0022 or \u0022Using serial port X\u0022 in the middle of the screen... \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECheck! Still just as you describe...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003E...and the green LED should be on.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope. No green LED (but I know it works from the handshake on the main menu).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EWhen you launch you should see the warning lights if there\u0027s something to warn (G or low fuel).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope, no lights at all during flight \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T00:19:13Z","Content":"\n\u003Cp\u003EI just tried rebooting in windows xp... still not working so not likely to be anything to do with my windows install.\u003C/p\u003E\u003Cp\u003EI don\u0027t know much about Arduino as it only arrived today, is it possible the KSPIODemo just doesn\u0027t work on a mega 2560?\u003C/p\u003E\u003Cp\u003EAhh... there is something in the debug console on the title screen that might be a clue...\u003C/p\u003E\u003Cp\u003E[Log]: AddonLoader: Instantiating addon \u0027KSPSerialPort\u0027 from assembly \u0027KSPSerialIO\u0027\u003C/p\u003E\u003Cp\u003E[Log]: KSPSerialIO: Getting serial ports...\u003C/p\u003E\u003Cp\u003E[Log]: KSPSerialIO: Found 1 serial ports\u003C/p\u003E\u003Cp\u003E[Log]: KSPSerialIO: trying port \\Device\\USBSER000 - COM1\u003C/p\u003E\u003Cp\u003E[Log]: KSPSerialIO: KSP Display not found\u003C/p\u003E\u003Cp\u003EIt still turns the green light on and off though.\u003C/p\u003E\u003Cp\u003EOh wait, just loaded again and now it says..\u003C/p\u003E\u003Cp\u003E[Log]: KSPSerialIO: found KSP Display at COM1\u003C/p\u003E\u003Cp\u003E... but its still not working.\u003C/p\u003E\u003Cp\u003EWatching the debug in flight, the plugin doesn\u0027t seem to be trying to do anything since the menu screen. No log entries at all in flight for KSPSerialIO\u003C/p\u003E\u003Cp\u003ERX light still pulsing constantly, without ever stopping until I end the flight.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-03T18:40:59Z\u0022 title=\u002202/03/2014 06:40  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 3, 2014\u003C/time\u003E by sal_vager\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Chaosratt","CreatedById":71354,"CreatedDateTime":"2014-02-01T03:40:07Z","Content":"\n\u003Cp\u003EDidn\u0027t work the first time for me, got an access denied error. Turns out, you can\u0027t have the arduino IDE\u0027s serial debugger open at the same time!\u003C/p\u003E\u003Cp\u003EWorked like a charm the 2nd time around. My LEDs and resistors are mis-matched (safely!), but you can see the first one lit here, and the rx LED as well:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/wJYvdCZ\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/wJYvdCZl.jpg\u0022 alt=\u0022wJYvdCZl.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENow I just need to figure out the LedControl library, and figure out a simple sketch to send the data to my two SPI displays.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T10:52:39Z","Content":"\n\u003Cp\u003EI dont have the debugger open.\u003C/p\u003E\u003Cp\u003EEdit - I notice you have more wires plugged in than th OP. Are you running a 5v line through as well?\u003C/p\u003E\u003Cp\u003EEdit - nevermind, it doesn\u0027t seem to connect to the circuit in any way...\u003C/p\u003E\u003Cp\u003EEdit - Does anyone have an example of this working on a Mega 2560?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-01T11:31:18Z\u0022 title=\u002202/01/2014 11:31  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 1, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T14:01:57Z","Content":"\n\u003Cp\u003ESorry for wall of posts!, Xitronen will wake up with plenty to read \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EJust tried it on another computer with exactly the same result, no lights in flight, only the green one in the main menu.\u003C/p\u003E\u003Cp\u003ETested the board on lots of Arduino experiments and seems to be working fine.\u003C/p\u003E\u003Cp\u003EXitronen - Could you tell me exactly what type of LED and resistors you are using? Unlikely to have anything to do with it but worth a shot...\u003C/p\u003E\u003Cp\u003E... otherwise I have to report your plugin doesn\u0027t work on Megas.\u003C/p\u003E\u003Cp\u003EEDIT - I\u0027m seeing quite a few posts online saying that some projects that work fine on an UNO dont work on a MEGA... I don\u0027t have the technical knowhow to understand why though :/\u003C/p\u003E\u003Cp\u003EEDIT 2 - I don\u0027t know if there are any clues here... particularly the line \u0022The Mega2560 differs from all preceding boards in that it does not use the FTDI USB-to-serial driver chip. Instead, it features the ATmega16U2 \u0022 \u003Ca href=\u0022http://arduino.cc/en/Main/arduinoBoardMega2560\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://arduino.cc/en/Main/arduinoBoardMega2560\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT 3 - If it is any help here are the schematics for both boards... not sure what it means by \u0022pin functions\u0022 (I\u0027m only on day 2 of learning electronics!) but they are different on pins 5,6, and 7 on each board... is this relevant?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/aCLNWCG.png\u0022 alt=\u0022aCLNWCG.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Qpcx5Zl.jpg\u0022 alt=\u0022Qpcx5Zl.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ESorry again for the all the bother! Perhaps I can return the favour with advice on enclosure design etc (I\u0027m a designer by trade).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-01T14:30:40Z\u0022 title=\u002202/01/2014 02:30  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 1, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-01T15:08:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Chaosratt\u0022 data-cite=\u0022Chaosratt\u0022\u003E\u003Cdiv\u003EDidn\u0027t work the first time for me, got an access denied error. Turns out, you can\u0027t have the arduino IDE\u0027s serial debugger open at the same time!\u003Cp\u003EWorked like a charm the 2nd time around. My LEDs and resistors are mis-matched (safely!), but you can see the first one lit here, and the rx LED as well:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/wJYvdCZ\u0022 rel=\u0022external nofollow\u0022\u003E\u003C/a\u003E\u003Ca href=\u0022http://i.imgur.com/wJYvdCZl.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/wJYvdCZl.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENow I just need to figure out the LedControl library, and figure out a simple sketch to send the data to my two SPI displays.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOK great, at least it\u0027s working for someone!!\u003C/p\u003E\u003Cp\u003EMullbin I think there\u0027s nothing wrong with your wiring, but just in case I put together a quick test code just to check your LEDs are working:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//pins for LEDs\u003Cbr\u003E#define GLED 5\u003Cbr\u003E#define YLED 6\u003Cbr\u003E#define RLED 7\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Evoid setup(){\u003Cbr\u003E  initLEDS();\u003Cbr\u003E\u003Cbr\u003E  LEDSAllOff();\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Evoid loop()\u003Cbr\u003E{\u003Cbr\u003E  LEDSAllOn();\u003Cbr\u003E  delay(1000);\u003Cbr\u003E  LEDSAllOff();\u003Cbr\u003E  delay(1000);\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Evoid LEDSAllOff() {\u003Cbr\u003E  digitalWrite(GLED,LOW);\u003Cbr\u003E  digitalWrite(YLED,LOW);\u003Cbr\u003E  digitalWrite(RLED,LOW);\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Evoid LEDSAllOn() {\u003Cbr\u003E  digitalWrite(GLED,HIGH);\u003Cbr\u003E  digitalWrite(YLED,HIGH);\u003Cbr\u003E  digitalWrite(RLED,HIGH);\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Evoid initLEDS() {\u003Cbr\u003E  pinMode(GLED,OUTPUT);\u003Cbr\u003E  digitalWrite(GLED,HIGH);\u003Cbr\u003E\u003Cbr\u003E  pinMode(YLED,OUTPUT);\u003Cbr\u003E  digitalWrite(YLED,HIGH);\u003Cbr\u003E\u003Cbr\u003E  pinMode(RLED,OUTPUT);\u003Cbr\u003E  digitalWrite(RLED,HIGH);\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EJust make a new sketch and paste it in, it will blink all the LEDs once per second.\u003C/p\u003E\u003Cp\u003EThere are some differences between the mega and the rest, but I don\u0027t have a mega so it\u0027s really hard to say what\u0027s going on. If your rx led is blinking then that means the plugin is working properly and the arduino is getting the data. But for some reason it\u0027s not doing anything with the data.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-01T15:54:12Z\u0022 title=\u002202/01/2014 03:54  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 1, 2014\u003C/time\u003E by zitronen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-01T15:53:05Z","Content":"\n\u003Cp\u003EOK here\u0027s a stab in the dark. I increased the wait time in the plugin so it will wait a bit longer during the handshake. This is specifically for Mulbin: \u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPSerialIO_M1.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPSerialIO_M1.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENo idea if it will work or not, but it should make it less likely for you to get \u0022KSPSerialIO: KSP Display not found\u0022 error.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EI would like to add a .cfg file so some of the settings can be adjusted without having to rebuild the dll, anyone know what\u0027s the easiest way of doing that with a partless plugin? Trigger?\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EMulbin can you load this on to the arduino and tell me what happens: \u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPIODemoWTF.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPIODemoWTF.zip\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-01T16:22:55Z\u0022 title=\u002202/01/2014 04:22  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 1, 2014\u003C/time\u003E by zitronen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T17:20:06Z","Content":"\n\u003Cp\u003EGreat, I\u0027ll give these a try and report back!\u003C/p\u003E\n"},{"CreatedByName":"Chaosratt","CreatedById":71354,"CreatedDateTime":"2014-02-01T17:27:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EOK here\u0027s a stab in the dark. I increased the wait time in the plugin so it will wait a bit longer during the handshake. This is specifically for Mulbin: \u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPSerialIO_M1.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPSerialIO_M1.zip\u003C/a\u003E\u003Cp\u003ENo idea if it will work or not, but it should make it less likely for you to get \u0022KSPSerialIO: KSP Display not found\u0022 error.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EI would like to add a .cfg file so some of the settings can be adjusted without having to rebuild the dll, anyone know what\u0027s the easiest way of doing that with a partless plugin? Trigger?\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EMulbin can you load this on to the arduino and tell me what happens: \u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPIODemoWTF.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPIODemoWTF.zip\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think a config file would be great to customizing down the line (if at all possible). I notice right now that the plugin iterates through every COM port. I have two, an unused hardware port, and the Arduino. I can see where someone might have another COM port actually in use, and this handshaking each port to see if an arduino is attached might cause problems. A config file where by default it\u0027s set to search each COM port, but leaves the option to hard-code a specific port for those who need it.\u003C/p\u003E\u003Cp\u003EAlso, looking at your first post I don\u0027t see that AGL is an available output. One of the reasons I embarked on this was specifically to get AGL on a display to aid in landing attempts without lithobraking.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T17:40:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EMullbin I think there\u0027s nothing wrong with your wiring, but just in case I put together a quick test code just to check your LEDs are working:\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat works fine, all three LEDs flashing together at 1 second intervals.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EOK here\u0027s a stab in the dark. I increased the wait time in the plugin so it will wait a bit longer during the handshake.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo change, still have the same problem.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EMulbin can you load this on to the arduino and tell me what happens: \u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPIODemoWTF.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPIODemoWTF.zip\u003C/a\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo change, still have the same problem. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT - Here is the log from the point of entering the flight - any clues here?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[WRN 17:50:45.191] [HighLogic]: =========================== Scene Change : From SPACECENTER to FLIGHT =====================\u003Cbr\u003E[EXC 17:50:45.211] NullReferenceException\u003Cbr\u003E[LOG 17:50:47.846] AddonLoader: Instantiating addon \u0027KSPSerialIO\u0027 from assembly \u0027KSPSerialIO\u0027\u003Cbr\u003E[LOG 17:50:47.891] ------------------- initializing flight mode... ------------------\u003Cbr\u003E[LOG 17:50:47.895] Loading ship from file: C:\\Users\\Joe\\Desktop\\Simpit KSP\\KSP_win\\Ships\\VAB\\Kerbal 2.craft\u003Cbr\u003E[ERR 17:50:47.924] Cannot load Module ModuleTripLogger because the associated module on the part doesn\u0027t match the saved module\u003Cbr\u003E[LOG 17:50:48.059] Kerbal 2 loaded!\u003Cbr\u003E[LOG 17:50:53.561] putting ship to ground: 0\u003Cbr\u003E[LOG 17:50:53.569] [Kerbal 2]: Ready to Launch - waiting to start physics...\u003Cbr\u003E[LOG 17:50:53.578] Crewmember Jebediah Kerman assigned to Mk1-2 Command Pod, seat # 0 (crew seat index: 0)\u003Cbr\u003E[LOG 17:50:53.580] Crewmember Bill Kerman assigned to Mk1-2 Command Pod, seat # 1 (crew seat index: 1)\u003Cbr\u003E[LOG 17:50:53.582] Crewmember Bob Kerman assigned to Mk1-2 Command Pod, seat # 2 (crew seat index: 2)\u003Cbr\u003E[LOG 17:50:53.584] [FLIGHT GLOBALS]: Switching To Vessel Kerbal 2 ---------------------- \u003Cbr\u003E[LOG 17:50:53.588] setting new dominant body: Kerbin\u003Cbr\u003EFlightGlobals.mainBody: Kerbin\u003Cbr\u003E[LOG 17:50:53.591] Reference Frame: Rotating\u003Cbr\u003E[LOG 17:50:53.636] stage manager resuming...\u003Cbr\u003E[LOG 17:50:53.638] Vessel assembly complete!\u003Cbr\u003E[LOG 17:50:53.639] stage manager starting...\u003Cbr\u003E[LOG 17:50:53.641] all systems started\u003Cbr\u003E[LOG 17:51:00.529] [PlanetariumCamera]: Focus: Kerbal 2\u003Cbr\u003E[LOG 17:51:00.844] Flight State Captured\u003Cbr\u003E[LOG 17:51:00.845] Saving Achievements Tree...\u003Cbr\u003E[LOG 17:51:00.859] Game State Saved as persistent\u003Cbr\u003E[LOG 17:51:02.460] [Kerbal 2]: ground contact! - error: 0.141m\u003Cbr\u003E[LOG 17:51:02.462] Unpacking Kerbal 2\u003Cbr\u003E[LOG 17:51:12.608] activating stage 2 - current stage: 3\u003Cbr\u003E[LOG 17:51:12.610] [asasmodule1-2]: Activated\u003Cbr\u003E[LOG 17:51:12.611] [RCSTank1-2]: Activated\u003Cbr\u003E[LOG 17:51:12.612] [fuelTank4-2]: Activated\u003Cbr\u003E[LOG 17:51:12.614] [liquidEngine1-2]: Activated\u003Cbr\u003E[LOG 17:51:12.615] [winglet3]: Activated\u003Cbr\u003E[LOG 17:51:12.617] [winglet3]: Activated\u003Cbr\u003E[LOG 17:51:12.618] [winglet3]: Activated\u003Cbr\u003E[LOG 17:51:12.629] [launchClamp1]: Activated\u003Cbr\u003E[LOG 17:51:12.636] [launchClamp1]: Activated\u003Cbr\u003E[LOG 17:51:12.642] [launchClamp1]: Activated\u003Cbr\u003E[LOG 17:51:12.643] [RCSBlock]: Activated\u003Cbr\u003E[LOG 17:51:12.645] [RCSBlock]: Activated\u003Cbr\u003E[LOG 17:51:12.646] [RCSBlock]: Activated\u003Cbr\u003E[LOG 17:51:12.648] [RCSBlock]: Activated\u003Cbr\u003E[LOG 17:51:12.649] [00:00:00]: Liftoff!!\u003Cbr\u003E[LOG 17:51:12.662] [Progress Node Reached]: FirstLaunch\u003Cbr\u003E[LOG 17:51:12.665] [Progress Node Complete]: FirstLaunch\u003Cbr\u003E[LOG 17:51:15.909] Packing Kerbal 2 Debris for orbit\u003Cbr\u003E[LOG 17:51:15.911] Packing Kerbal 2 Debris for orbit\u003Cbr\u003E[LOG 17:51:15.912] Packing Kerbal 2 Debris for orbit\u003Cbr\u003E[LOG 17:51:21.367] activating stage 1 - current stage: 2\u003Cbr\u003E[LOG 17:51:21.374] [00:00:08]: Separation of stage 2 confirmed\u003Cbr\u003E[LOG 17:51:21.376] [decoupler1-2]: Activated\u003Cbr\u003E[LOG 17:51:25.788] Kerbal 2 Debris Unloaded\u003Cbr\u003E[LOG 17:51:25.790] Kerbal 2 Debris Unloaded\u003Cbr\u003E[LOG 17:51:25.792] Kerbal 2 Debris Unloaded\u003Cbr\u003E[LOG 17:51:35.778] activating stage 0 - current stage: 1\u003Cbr\u003E[LOG 17:51:35.779] [Mark1-2Pod]: Activated\u003Cbr\u003E[LOG 17:51:35.781] [parachuteLarge]: Activated\u003Cbr\u003E[LOG 17:51:43.428] Game Paused!\u003Cbr\u003E[LOG 17:51:43.430] Active Vessel is in atmosphere. Cannot save.\u003Cbr\u003E[WRN 17:51:47.949] [HighLogic]: =========================== Scene Change : From FLIGHT to SPACECENTER =====================\u003Cbr\u003E[LOG 17:51:49.045] [PlanetariumCamera]: Focus: Kerbin\u003Cbr\u003E[LOG 17:51:56.221] [Progress Tracking]: Posted anonymous data to server successfully. Server Reply: KSP PROGRESS DATA OBTAINED\u003Cbr\u003E[LOG 17:52:00.054] Flight State Captured\u003Cbr\u003E[LOG 17:52:00.056] Saving Achievements Tree...\u003Cbr\u003E[LOG 17:52:00.067] Game State Saved as persistent\u003Cbr\u003E[WRN 17:52:00.068] [HighLogic]: =========================== Scene Change : From SPACECENTER to MAINMENU =====================\u003Cbr\u003E[LOG 17:52:02.793] AddonLoader: Instantiating addon \u0027KSPSerialPort\u0027 from assembly \u0027KSPSerialIO\u0027\u003Cbr\u003E[LOG 17:52:02.795] KSPSerialIO: Getting serial ports...\u003Cbr\u003E[LOG 17:52:02.796] KSPSerialIO: Found 2 serial ports\u003Cbr\u003E[LOG 17:52:02.798] KSPSerialIO: trying port \\Device\\Serial0 - COM2\u003Cbr\u003E[LOG 17:52:07.807] KSPSerialIO: found KSP Display at COM2\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-01T17:57:54Z\u0022 title=\u002202/01/2014 05:57  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 1, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T18:03:30Z","Content":"\n\u003Cp\u003EJust trying to think outside the box... could I be missing some other essential files like .net framework stuff?\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-01T18:10:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Chaosratt\u0022 data-cite=\u0022Chaosratt\u0022\u003E\u003Cdiv\u003EI think a config file would be great to customizing down the line (if at all possible). I notice right now that the plugin iterates through every COM port. I have two, an unused hardware port, and the Arduino. I can see where someone might have another COM port actually in use, and this handshaking each port to see if an arduino is attached might cause problems. A config file where by default it\u0027s set to search each COM port, but leaves the option to hard-code a specific port for those who need it.\u003Cp\u003EAlso, looking at your first post I don\u0027t see that AGL is an available output. One of the reasons I embarked on this was specifically to get AGL on a display to aid in landing attempts without lithobraking.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERAlt = AGL, it\u0027s radar altitude.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ENo change, still have the same problem. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOK that make no sense because I changed the code so either the green or the other leds should go on.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T18:16:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust double checked, reinstalled KSPIODemoWTF and still exactly the same. Green light comes on for 1 second at the title screen, no lights at all in flight.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-01T18:45:00Z","Content":"\n\u003Cp\u003EDebuging over the internet with only 3 LEDs is pretty tricky! I think I found a potential bug that causes the arduino code to lock up if there happens to be garbage on the serial port, may not be related but try the arduino demo code on the first post again, I have re-uploaded the new code.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T18:57:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EDebuging over the internet with only 3 LEDs is pretty tricky!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHa, yes, Thanks for trying! I\u0027ll give the new code a go and let you know...\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-01T18:58:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Chaosratt\u0022 data-cite=\u0022Chaosratt\u0022\u003E\u003Cdiv\u003EI think a config file would be great to customizing down the line (if at all possible). I notice right now that the plugin iterates through every COM port. I have two, an unused hardware port, and the Arduino. I can see where someone might have another COM port actually in use, and this handshaking each port to see if an arduino is attached might cause problems. A config file where by default it\u0027s set to search each COM port, but leaves the option to hard-code a specific port for those who need it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is exactly what I want to do, I know how config files work with partmodules, it\u0027s super easy, but I\u0027m not sure how it works with a partless plugin.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T19:02:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EI think I found a potential bug that causes the arduino code to lock up if there happens to be garbage on the serial port, may not be related but try the arduino demo code on the first post again, I have re-uploaded the new code.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, sorry, still exactly the same \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-01T19:34:59Z","Content":"\n\u003Cp\u003EI might need to buy an arduino mega to track this one down...\u003C/p\u003E\u003Cp\u003EEdit: just did! I will put this on hold for a bit till I get the 2560.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-01T19:42:31Z\u0022 title=\u002202/01/2014 07:42  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 1, 2014\u003C/time\u003E by zitronen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T19:43:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EI might need to buy an arduino mega to track this one down...\u003Cp\u003EEdit: just did! I will put this on hold for a bit till I get the 2560.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was just thinking I might have to buy an UNO just to get started on my project lol.\u003C/p\u003E\u003Cp\u003EIf you want to try the exact one I have, this is it, Funduino Mega 2560. \u003Ca href=\u0022http://www.ebay.com/itm/Funduino-Mega-2560-R3-Arduino-Compatible-ATMage16U2-with-USB-Cable-/291048141694?pt=LH_DefaultDomain_0\u0026amp;hash=item43c3d2337e\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.ebay.com/itm/Funduino-Mega-2560-R3-Arduino-Compatible-ATMage16U2-with-USB-Cable-/291048141694?pt=LH_DefaultDomain_0\u0026amp;hash=item43c3d2337e\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT - I just ordered a cheap UNO which should be here next week. Will know for certain then if I can run it on an UNO or if there is some other problem.... I can\u0027t think what though as I have tried now on two different computers with fresh ksp installs and a total of 3 operating systems.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-01T20:05:30Z\u0022 title=\u002202/01/2014 08:05  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 1, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-01T22:53:33Z","Content":"\n\u003Cp\u003EOk some other general questions about your plugin!\u003C/p\u003E\u003Cp\u003EI\u0027m still in the very early stages of learning Arduino... but am I right in thinking the only bit I\u0027d really need to edit to add more lights / dials etc to run off the existing fields would be Utilities? - adding similar parameter to caution \u002B, warning \u002B etc. The rest (kspiodemo, handshake, serialcoms) looks like stuff I probably shouldn\u0027t touch or I\u0027ll break the plugin...\u003C/p\u003E\u003Cp\u003EAlso... I picked this up with the hope that I can eventually get it to run as a dial using the plugin, any advice on how to safely wire it up? Do I need to run this in series with a resistor on the gnd like with an LED?.. don\u0027t want to put it near the arduino until I\u0027m sure it won\u0027t fry my board!\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/ZhAbkQS.jpg\u0022 alt=\u0022ZhAbkQS.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ESorry for the noobish questions, you are the best source of info on ksp simulator panels I\u0027ve found!\u003C/p\u003E\n"}]}