{"TopicId":96531,"ForumId":36,"TopicTitle":"Adding functionality to a part by copying MODULE entry","CreatedByName":"suicidemission","CreatedById":104642,"CreatedDateTime":"2015-01-13T04:23:28Z","PageNum":1,"Articles":[{"CreatedByName":"suicidemission","CreatedById":104642,"CreatedDateTime":"2015-01-13T04:23:28Z","Content":"\n\u003Cp\u003EBackground: I have no experience modding KSP but I figured I\u0027d give it a go to learn a little bit by doing something I\u0027ve wanted to for a long time- adding the \u0022Ore\u0022 scanning function from Extraplanetary Launchpad\u0027s magnetometer to the much prettier magnetometer from DMagic Science Parts. According to the \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/CFG_File_Documentation#MODULES\u0022 rel=\u0022external nofollow\u0022\u003ECFG File Documentation\u003C/a\u003E and \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Tutorial:Changing_Part_Configuration_Files#Modules\u0022 rel=\u0022external nofollow\u0022\u003E\u0022Changing Part Configuration Files\u0022\u003C/a\u003E pages on the KSP wiki it should be as simple as copying the MODULE from the EL part to the DMagic part. Seems that, nope, that\u0027s not gonna do it.\u003C/p\u003E\u003Cp\u003EHere\u0027s what I was copying:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneDetector\u003Cbr\u003E    DetectingPeriod = 1.5\u003Cbr\u003E    DetectingHeight = 60000\u003Cbr\u003E    PowerConsumption = 0.4\u003Cbr\u003E    Resource\u003Cbr\u003E    {\u003Cbr\u003E    \tName = Ore\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI dropped that inside the PART {} at the end of the DMagic CFG, the same way it appears inside the EL CFG but... de nada. No such module appears in the editor or on the ship once launched. My new magnetometer doesn\u0027t magnetowhatever.\u003C/p\u003E\u003Cp\u003EI also tried to make a copy of the part and adjust the references inside the CFG so it looked like a second part, identical but with added functionality. Also de nada.\u003C/p\u003E\u003Cp\u003EDid I completely misunderstand the tutorials? Is there some functionality I\u0027m overlooking or a conflict? I\u0027ll post the CFG details from both in the post below.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-01-13T05:42:04Z","Content":"\n\u003Cp\u003EWelcome to the forums! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs this is cfg modding, rather than the specific \u0027writing a plugin\u0027 topic for this subforum, I\u0027m moving this back to Addon Development.\u003C/p\u003E\u003Cp\u003EFirst, I would suggest making your changes via Module Manager. That\u0027s what it\u0027s for. You can create a cfg file, stick it somewhere in GameData, and do\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[name_of_part_to_modify] // where that name is found by looking the cfg for the name = whatever line.\u003Cbr\u003E{\u003Cbr\u003E    MODULE\u003Cbr\u003E    {\u003Cbr\u003E        name = KethaneDetector\u003Cbr\u003E        DetectingPeriod = 1.5\u003Cbr\u003E        DetectingHeight = 60000\u003Cbr\u003E        PowerConsumption = 0.4\u003Cbr\u003E        Resource\u003Cbr\u003E        {\u003Cbr\u003E        \tName = Ore\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat will add that new node to the part.\u003C/p\u003E\u003Cp\u003EAs for cloning, you can do\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u002BPART[name_of_source_part]\u003Cbr\u003E{\u003Cbr\u003E    @name = new_name_for_new_part\u003Cbr\u003E    // whatever other changes you want to make\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"suicidemission","CreatedById":104642,"CreatedDateTime":"2015-01-13T06:42:05Z","Content":"\n\u003Cp\u003ELOL go figure, I thought diving into Module Manager would be the \u003Cem\u003Ehard\u003C/em\u003E way! Thanks Nathan.\u003C/p\u003E\u003Cp\u003EI decided my first foray into modding would be to mess around with some CFGs to get the hang of them. Next I plan on cooking up some improved models for a few parts. I have a WIP smelter for EL I\u0027m hoping to configure for use with Near Future\u0027s heat sink mechanic, so understanding how CFG tweaking and Module Manager worked was pretty important.\u003C/p\u003E\u003Cp\u003EThis is the first one I\u0027m working on- an improved smelter model for Extraplanetary Launchpads, visually based on IRL smelters. Exported to SketchUp for a quick texture job to get an idea for appearances without having to unwrap and paint the UV map. I\u0027m gonna try to get the tricount down by giving the pipes fewer sides (they have 12 at present, I think 9 will be enough visually), modifying the 1.25m 45deg ports (which are intended for mounting heat sinks for use with the Near Future \u0022Thermal Load\u0022 mechanic), removing one of the radial tanks and making the 2.5m radial attach points flush with the body near the 3m bottom. At present it\u0027s about 7000 but I think I can make some improvements and get it down to 2000-3000 or so while keeping the overall similarity with IRL smelters intact. I\u0027ll be redoing the CFG to make the smelter\u0027s characteristics more similar to IRL smelters as well, based on the improved smelters settings from a smelter model I found here on the forums.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/aUFVePE.jpg\u0022 alt=\u0022aUFVePE.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks again NathanKell! A journey of a thousand miles started with this single step! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"suicidemission","CreatedById":104642,"CreatedDateTime":"2015-01-14T16:27:45Z","Content":"\n\u003Cp\u003EOkay, so experimenting a little I tried this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u002BPART[stackDecouplerMini]\u003Cbr\u003E{\u003Cbr\u003E    @name = stackDecouplerMini-NoForce\u003Cbr\u003E\ttitle = TR-2VNF Stack Decoupler\u003Cbr\u003E\tdescription = The TR-2VNF Stack Decoupler is a miniature detachment utility for small rockets and space probes that separates the payload but does not exert any force upon it.\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = ModuleDecouple\u003Cbr\u003E    ejectionForce = 0\u003Cbr\u003E\texplosiveNodeID = top\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut when I ran KSP the new \u0022no force\u0022 decoupler showed:\u003C/p\u003E\u003Cp\u003EDecoupler Force: 0\u003C/p\u003E\u003Cp\u003EDecoupler Force: 15\u003C/p\u003E\u003Cp\u003ESo reading through the ModuleManager docs on GitHub I found the Edit operator but copying the node, modifying it to remove ejectionForce = 15 and modifying it again to add ejectionForce = 0 did nothing (I still saw both values in the editor). Do I suck at computer? I think I suck at computer.\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2015-01-15T02:48:22Z","Content":"\n\u003Cp\u003EI\u0027ve started playing with config files too - not sure I have a firm grasp on MM yet so take this with a grain of salt. \u003C/p\u003E\u003Cp\u003EI think you need a @ in front of all the fields you want to modify.\u003C/p\u003E\u003Cp\u003EIf I understand this right: \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u002BPART[stackDecouplerMini]\u003Cbr\u003E{\u003Cbr\u003E    // Find the name field and change to stackDecouplerMini-NoForce\u003Cbr\u003E    @name = stackDecouplerMini-NoForce\u003Cbr\u003E    // Find the title field and change...\u003Cbr\u003E    @title = TR-2VNF Stack Decoupler\u003Cbr\u003E    // Find the description field and change...\u003Cbr\u003E    @description = The TR-2VNF Stack Decoupler is a miniature detachment utility for small rockets and space probes that separates the payload but does not exert any force upon it.\u003Cbr\u003E\u003Cbr\u003E// Find the MODULE with name = ModuleDecouple - not sure if this will do all or just the first\u003Cbr\u003E@MODULE[ModuleDecouple]\u003Cbr\u003E{\u003Cbr\u003E    // In MODULE[ModuleDecouple] find the ejectionForce field and change...\u003Cbr\u003E    @ejectionForce = 0\u003Cbr\u003E    // In MODULE[ModuleDecouple] find the explosiveNodeID field and change...\u003Cbr\u003E    @explosiveNodeID = top\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"suicidemission","CreatedById":104642,"CreatedDateTime":"2015-01-15T03:48:02Z","Content":"\n\u003Cp\u003ESo re-reading the way MM handles operators the default is INSERT, so if no operator is specified it adds it, which is why my second attempt created two values- I wasn\u0027t using the @ operator to edit the values, I was using \u002BMODULE -MODULE but not modifying the operators within the values. Since it\u0027s not necessary to edit any MODULE values besides ejectionForce within ModuleDecouple, I cut out everything else and obtained this, which functions as intended:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u002BPART[stackDecouplerMini]\u003Cbr\u003E{\u003Cbr\u003E    @name = stackDecouplerMini-NoForce\u003Cbr\u003E    @title = TR-2VNF Stack Decoupler\u003Cbr\u003E    @description = The TR-2VNF Stack Decoupler is a miniature detachment utility for small rockets and space probes that separates the payload but does not exert any force upon it.\u003Cbr\u003E\u003Cbr\u003E@MODULE[ModuleDecouple]\u003Cbr\u003E{\u003Cbr\u003E    @ejectionForce = 0\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m going to start experimenting with the modified CFGs and EL\u0027s native textured primitive smelter tomorrow and see if I can get it working as intended. After that I\u0027ll start learning the MM method of configuring the attachment nodes before I finalize the model and start the texturing process.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-15T03:51:45Z\u0022 title=\u002201/15/2015 03:51  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 15, 2015\u003C/time\u003E by suicidemission\u003C/strong\u003E\n\u003C/span\u003E\n"}]}