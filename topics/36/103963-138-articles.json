{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":138,"Articles":[{"CreatedByName":"Baleine","CreatedById":131757,"CreatedDateTime":"2016-02-25T23:07:10Z","Content":"Just an update on my situation [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) to tell you last version corrected my issue as well.\n\nGreat reactivity man ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n(Sorry for not having replied sooner, but I think we\u0027re not in the same timezone :-p )"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-25T23:09:50Z","Content":"\u003E \n\u003E \n\u003E 31 minutes ago, Cooboo said:\n\u003E \n\u003E \n\u003E I know this is an ongoing issue but I just want to report that my sun also appears as a tiny dot in atmosphere with out the flare\n\u003E \n\nCan you try the file I posted in the last page?\n\n\u003E \n\u003E \n\u003E 30 minutes ago, Svm420 said:\n\u003E \n\u003E \n\u003E Do you plan to add editability of these parameters in game? Thanks!\n\u003E \n\nThey\u0027re editable only through the config file but if you revert flight or change scenes it\u0027ll load the new settings.\n\n\u003E \n\u003E \n\u003E 2 minutes ago, Baleine said:\n\u003E \n\u003E \n\u003E Just an update on my situation [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) to tell you last version corrected my issue as well.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Great reactivity man ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E (Sorry for not having replied sooner, but I think we\u0027re not in the same timezone :-p )\n\u003E \n\nGreat!\n\n**Edited \u003Ctime datetime=\u00222016-02-25T23:10:14Z\u0022 title=\u002202/25/2016 11:10  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 25, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2016-02-25T23:29:56Z","Content":"\u003E \n\u003E \n\u003E 19 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E They\u0027re editable only through the config file but if you revert flight or change scenes it\u0027ll load the new settings.\n\u003E \n\nPerfect thanks for the heads up."},{"CreatedByName":"Cooboo","CreatedById":144519,"CreatedDateTime":"2016-02-25T23:37:47Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Alright I\u0027m gonna test it now and tell you what I get ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"Mad Rocket Scientist","CreatedById":139256,"CreatedDateTime":"2016-02-26T00:02:42Z","Content":"Hey, look, SpaceX has scatterer installed:\n\n![CcGNejgUYAAa4_Z.jpg:large](https://pbs.twimg.com/media/CcGNejgUYAAa4_Z.jpg:large)"},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2016-02-26T00:03:08Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/)\n\nI tried editing the config for the sun flare in the last position as you indicated. I am not seeing any difference after a scene change. It is the last digit on the 2 lists, and only those, the correct position for what I need to decrease inversely to scale? Thanks!"},{"CreatedByName":"davidy12","CreatedById":143411,"CreatedDateTime":"2016-02-26T01:10:30Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/): I\u0027m having issues with Sigma Dimensions.\n\n\u003E \n\u003E \n\u003E Quote\n\u003E \n\u003E \n\u003E // Base Settings\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E SigmaDimensions  \n\u003E \n\u003E {  \n\u003E \n\u003E     Resize = 6.4  \n\u003E \n\u003E     Rescale = 6.4  \n\u003E \n\u003E     Atmosphere = 1.285  \n\u003E \n\u003E     dayLengthMultiplier = 4  \n\u003E \n\u003E }\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E // Advanced Settings\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E @SigmaDimensions  \n\u003E \n\u003E {  \n\u003E \n\u003E     geeASLmultiplier = 1  \n\u003E \n\u003E     landscape = 0.25  \n\u003E \n\u003E     atmoVisualEffect = 6.4  \n\u003E \n\u003E     resizeScatter = 0.25  \n\u003E \n\u003E     CustomSoISize = 0  \n\u003E \n\u003E     CustomRingSize = 0  \n\u003E \n\u003E     atmoASL = 1  \n\u003E \n\u003E     tempASL = 1  \n\u003E \n\u003E }\n\u003E \n\nThese are the settings I have and It causes the sun glow to disappear.\n\n**Edited \u003Ctime datetime=\u00222016-02-26T01:11:14Z\u0022 title=\u002202/26/2016 01:11  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 26, 2016\u003C/time\u003E by davidy12**"},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2016-02-26T01:50:52Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, CamillyCA said:\n\u003E \n\u003E \n\u003E I have strange artifact with the new version (0.0230 and 0.0231), it appears both on my win64 and on a clean win32 install with only scatterer. Artifact only appears from zenith to night.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E This not happen with Terrain shadow off. Any idea?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/KaMfo/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\u003E \n\nI noticed this as well, however for whatever reason it stopped doing this after a couple of seconds of time warp."},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2016-02-26T02:15:18Z","Content":"Hey [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) what RGB scale is the config tool using? 0-1 or 0-255. I\u0027m guessing 0-1 I just want to make sure."},{"CreatedByName":"cobbman11","CreatedById":76711,"CreatedDateTime":"2016-02-26T03:10:24Z","Content":"![SLUKyQd.png](http://i.imgur.com/SLUKyQd.png)\n\nStunning!"},{"CreatedByName":"Vegemeister","CreatedById":135079,"CreatedDateTime":"2016-02-26T04:39:05Z","Content":"I\u0027m seeing an artifact on Linux/Nvidia that\u0027s similar to what [@CamillyCA](https://forum.kerbalspaceprogram.com/index.php?/profile/135893-camillyca/) is reporting, except the black lines are more horizontal:\n\n![cNF8YC6.jpg](http://i.imgur.com/cNF8YC6.jpg)\n\nIt also happens on the Mun:\n\n![7MuZbQP.jpg](http://i.imgur.com/7MuZbQP.jpg)\n\nAlso, I\u0027m seeing some kind of stacking-order issue between the haze and ground clutter:\n\n![MCk8ahx.jpg](http://i.imgur.com/MCk8ahx.jpg)"},{"CreatedByName":"hieywiey","CreatedById":99098,"CreatedDateTime":"2016-02-26T04:50:53Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, Mad Rocket Scientist said:\n\u003E \n\u003E \n\u003E Hey, look, SpaceX has scatterer installed:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![CcGNejgUYAAa4_Z.jpg:large](https://pbs.twimg.com/media/CcGNejgUYAAa4_Z.jpg:large)](https://pbs.twimg.com/media/CcGNejgUYAAa4_Z.jpg:large \u0022Enlarge image\u0022)\n\u003E \n\nI ***legitimately*** cannot tell whether this is a real picture or Scatterer, that\u0027s how damn good this mod is! I would insert hailprobe, but this isn\u0027t the Orbiter Forum ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-26T05:11:14Z","Content":"\u003E \n\u003E \n\u003E 6 hours ago, CamillyCA said:\n\u003E \n\u003E \n\u003E I have strange artifact with the new version (0.0230 and 0.0231), it appears both on my win64 and on a clean win32 install with only scatterer. Artifact only appears from zenith to night.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E This not happen with Terrain shadow off. Any idea?\n\u003E \n\n\u003E \n\u003E \n\u003E 3 hours ago, Nhawks17 said:\n\u003E \n\u003E \n\u003E I noticed this as well, however for whatever reason it stopped doing this after a couple of seconds of time warp.\n\u003E \n\n\u003E \n\u003E \n\u003E 25 minutes ago, Vegemeister said:\n\u003E \n\u003E \n\u003E I\u0027m seeing an artifact on Linux/Nvidia that\u0027s similar to what [@CamillyCA](https://forum.kerbalspaceprogram.com/index.php?/profile/135893-camillyca/) is reporting, except the black lines are more horizontal:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It also happens on the Mun:\n\u003E \n\nThat is known as \u0022shadow acne\u0022 and happens with shadow mapping techniques, all I can suggest is to try bumping up your shadow quality (via bumping up the renderin quality slider of KSP) or playing with the shadow cascades setting. You can also try decreasing the shadow distance from the planetsList.cfg file in scatterer.\n\n\u003E \n\u003E \n\u003E 28 minutes ago, Vegemeister said:\n\u003E \n\u003E \n\u003E Also, I\u0027m seeing some kind of stacking-order issue between the haze and ground clutter:\n\u003E \n\nThis could be fixable but I\u0027m not sure.\n\n\u003E \n\u003E \n\u003E 5 hours ago, Svm420 said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I tried editing the config for the sun flare in the last position as you indicated. I am not seeing any difference after a scene change. It is the last digit on the 2 lists, and only those, the correct position for what I need to decrease inversely to scale? Thanks!\n\u003E \n\nYeah, the last value, I don\u0027t know really, could be something else wrong, just play with the values and see if anything changes at all.\n\n\u003E \n\u003E \n\u003E 3 hours ago, davidy12 said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/): I\u0027m having issues with Sigma Dimensions.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E These are the settings I have and It causes the sun glow to disappear.\n\u003E \n\nSee posts above or in previous page about rescaling sun flare with RSS, it\u0027s the same idea.\n\n\u003E \n\u003E \n\u003E 2 hours ago, Nhawks17 said:\n\u003E \n\u003E \n\u003E Hey [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) what RGB scale is the config tool using? 0-1 or 0-255. I\u0027m guessing 0-1 I just want to make sure.\n\u003E \n\nThese are scattering coefficients and can go all the way to infinity. Values close to 1 will result in a pretty thick and foggy atmosphere (maybe good for Eve?), just use the default values as a guideline and go from there.\n\n\u003E \n\u003E \n\u003E 1 hour ago, cobbman11 said:\n\u003E \n\u003E \n\u003E [![SLUKyQd.png](http://i.imgur.com/SLUKyQd.png)](http://i.imgur.com/SLUKyQd.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Stunning!\n\u003E \n\nJust gorgeous!"},{"CreatedByName":"davidy12","CreatedById":143411,"CreatedDateTime":"2016-02-26T05:34:39Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/): How do I scale it up? I saw your previous post, but I can\u0027t figure it out.\n\n**Edited \u003Ctime datetime=\u00222016-02-26T05:35:04Z\u0022 title=\u002202/26/2016 05:35  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 26, 2016\u003C/time\u003E by davidy12**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-26T05:41:02Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, davidy12 said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/): How do I scale it up? I saw your previous post, but I can\u0027t figure it out.\n\u003E \n\nIn the lines that say sunSpikes.png and sunFlare.png the last value is the inverse of the scale."},{"CreatedByName":"davidy12","CreatedById":143411,"CreatedDateTime":"2016-02-26T05:45:12Z","Content":"??? I don\u0027t understand. Once again I have 64k."},{"CreatedByName":"davidy12","CreatedById":143411,"CreatedDateTime":"2016-02-26T05:53:41Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/): What is the inverse of 6.4?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-26T05:55:11Z","Content":"\u003E \n\u003E \n\u003E Just now, davidy12 said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/): What is the inverse of 6.4?\n\u003E \n\nThe inverse of the sunflare scale and not whatever scaling mod you are using. Basically if you want the sunflare to be bigger you decrease the value and if youw ant it smaller you increase the value."},{"CreatedByName":"davidy12","CreatedById":143411,"CreatedDateTime":"2016-02-26T05:56:23Z","Content":"Ohhh... \n\n[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/): Wait, I found out what happened. There were // in front of the png\u0027s."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-26T06:00:00Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, davidy12 said:\n\u003E \n\u003E \n\u003E Ohhh... \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/): Wait, I found out what happened. There were // in front of the png\u0027s.\n\u003E \n\nThat\u0027s a comment, that line doesn\u0027t matter and is provided for users to understand what\u0027s going on. The lines you want to change are:\n\nflareSettings = 0.45,1,0.85  \n\nspikesSettings = 0.6,1,1\n\nAm I being trolled here?"},{"CreatedByName":"davidy12","CreatedById":143411,"CreatedDateTime":"2016-02-26T06:01:05Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E That\u0027s a comment, that line doesn\u0027t matter and is provided for users to understand what\u0027s going on. The lines you want to change are:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E flareSettings = 0.45,1,0.85  \n\u003E \n\u003E spikesSettings = 0.6,1,1\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Am I being trolled here?\n\u003E \n\nSorry. I just realized it as soon as I posted I SWEAR."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-26T06:03:36Z","Content":"So I just realized the extinction shader seems to be bugged in OpenGL, in that it attenuates colors but doesn\u0027t tint them, anyone else notice this?"},{"CreatedByName":"Vegemeister","CreatedById":135079,"CreatedDateTime":"2016-02-26T06:10:40Z","Content":"@blackrack changing shadow cascades didn\u0027t do it, but I was able to trace the problem to the anisotropic filtering setting applied by my Nvidia application profile.  Reducing it from 16x to 2x got rid of the black lines *and* reduced the shimmering of distant terrain.  I suppose it has some sort of detrimental interaction with the shadow mapping."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-26T06:12:05Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Vegemeister said:\n\u003E \n\u003E \n\u003E @blackrack changing shadow cascades didn\u0027t do it, but I was able to trace the problem to the anisotropic filtering setting applied by my Nvidia application profile.  Reducing it from 16x to 2x got rid of the black lines *and* reduced the shimmering of distant terrain.  I suppose it has some sort of detrimental interaction with the shadow mapping.\n\u003E \n\nCould be, what\u0027s your rendering quality setting?"},{"CreatedByName":"Vegemeister","CreatedById":135079,"CreatedDateTime":"2016-02-26T06:22:58Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Could be, what\u0027s your rendering quality setting?\n\u003E \n\n![BU03yLM.png](http://i.imgur.com/BU03yLM.png)\n\nVsync is disabled because the compositor handles that, and I have anti-aliasing off because it doesn\u0027t seem to do anything on Linux.  Instead, I\u0027m forcing 4xMS\u002B4xCS with an application profile."}]}