{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":17,"Articles":[{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-19T10:30:35Z","Content":"\n\u003Cp\u003EThis time I have a serious suggestion for improvement, which imho should find its way to your main release. You know I\u0027ve been working on setups where more than one arduino is involved, which requires one unit to handle the serial communication with KSPSerialIO and the distribution to the other Arduinos. What puzzles me is that you developed a cool architecture with the three packet types, but then give the vessel data and the control packet the same id. For exchange of information it would be easier to have the id byte distinguish between CPacket and VData.\u003C/p\u003E\n"},{"CreatedByName":"NeoMorph","CreatedById":58200,"CreatedDateTime":"2014-05-19T14:35:22Z","Content":"\n\u003Cp\u003ERegarding Arduino performance, have you guys heard of the new Arduino Zero? Totally geeking out here... (does the Homer Simpson Douuuuuuuuugghnuts sound... but saying \u0022Zeeeeeeeeeeeeeero\u0022 instead).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://arduino.cc/en/uploads/Main/Arduino_Zero_front450.png\u0022 alt=\u0022Arduino_Zero_front450.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://arduino.cc/en/Main/ArduinoBoardZero\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://arduino.cc/en/Main/ArduinoBoardZero\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve been looking at using a Chipkit Max32 which is a Arduino based form factor (see below) which runs on a Pic SPU instead of an Atmel. But now I\u0027m thinking of waiting until the Zero comes out.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://digilentinc.com/Data/Products/CHIPKIT-MAX32/chipKIT-Max32-obl-500.jpg\u0022 alt=\u0022chipKIT-Max32-obl-500.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo what am I doing that is taking so much space? My darn DSKY/AGC, that\u0027s what! I really need to see if I can pare my code down.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-19T20:31:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cm2227\u0022 data-cite=\u0022cm2227\u0022\u003E\u003Cdiv\u003EThis time I have a serious suggestion for improvement, which imho should find its way to your main release. You know I\u0027ve been working on setups where more than one arduino is involved, which requires one unit to handle the serial communication with KSPSerialIO and the distribution to the other Arduinos. What puzzles me is that you developed a cool architecture with the three packet types, but then give the vessel data and the control packet the same id. For exchange of information it would be easier to have the id byte distinguish between CPacket and VData.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAll right, this weekend I will look into:\u003C/p\u003E\u003Cp\u003E1. Improving handshake, so it will actually check the returned packet and not be fooled by a loop back device\u003C/p\u003E\u003Cp\u003E2. Change the packet IDs, I think the packets sent from the plugin will have ID starting from 1 and packets sent to the plugin will have ID starting from 101\u003C/p\u003E\u003Cp\u003EThese will mostly benefit people trying to connect multiple boards.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeoMorph\u0022 data-cite=\u0022NeoMorph\u0022\u003E\u003Cdiv\u003ERegarding Arduino performance, have you guys heard of the new Arduino Zero? Totally geeking out here... (does the Homer Simpson Douuuuuuuuugghnuts sound... but saying \u0022Zeeeeeeeeeeeeeero\u0022 instead).\u003Cp\u003E\u003Ca href=\u0022http://arduino.cc/en/uploads/Main/Arduino_Zero_front450.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://arduino.cc/en/uploads/Main/Arduino_Zero_front450.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://arduino.cc/en/Main/ArduinoBoardZero\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://arduino.cc/en/Main/ArduinoBoardZero\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve been looking at using a Chipkit Max32 which is a Arduino based form factor (see below) which runs on a Pic SPU instead of an Atmel. But now I\u0027m thinking of waiting until the Zero comes out.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://digilentinc.com/Data/Products/CHIPKIT-MAX32/chipKIT-Max32-obl-500.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://digilentinc.com/Data/Products/CHIPKIT-MAX32/chipKIT-Max32-obl-500.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESo what am I doing that is taking so much space? My darn DSKY/AGC, that\u0027s what! I really need to see if I can pare my code down.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve have had enough with these stupid names on my f*** arduino!\u003C/p\u003E\n"},{"CreatedByName":"cm2227","CreatedById":54899,"CreatedDateTime":"2014-05-20T12:31:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EAll right, this weekend I will look into:\u003Cp\u003E1. Improving handshake, so it will actually check the returned packet and not be fooled by a loop back device\u003C/p\u003E\u003Cp\u003E2. Change the packet IDs, I think the packets sent from the plugin will have ID starting from 1 and packets sent to the plugin will have ID starting from 101\u003C/p\u003E\u003Cp\u003EThese will mostly benefit people trying to connect multiple boards.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESounds great!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EI\u0027ve have had enough with these stupid names on my f*** arduino!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI just read this in Samuel L. Jackson voice.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-05-25T17:30:11Z","Content":"\n\u003Cp\u003E\u003Cspan\u003ENot so weekly \u0022Weekly\u0022 update 11\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EChanged:\u003C/p\u003E\u003Cp\u003E1. Improving handshake, so it will actually check the returned packet code (Byte 1 = 3, Byte 2 = 1, Byte 3 = 4)\u003C/p\u003E\u003Cp\u003E2. Change the packet IDs, packets sent from the plugin will have ID starting from 1 (Vessel data) and packets sent to the plugin will have ID starting from 101 (Control Packet)\u003C/p\u003E\u003Cp\u003EIn the future, I may add options in the settings file so you can change the IDs to what you want, but I don\u0027t see any need for now...\u003C/p\u003E\u003Cp\u003ENo need to update if you are not having issues or not trying to connect multiple displays.\u003C/p\u003E\u003Cp\u003EPlugin:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPSerialIO_015_2.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPSerialIO_015_2.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EArduino Code\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPIODemo7.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://sites.google.com/site/zitronfiles/KSPIODemo7.zip\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-05-25T18:10:54Z","Content":"\n\u003Cp\u003EWow, just checking in to the forums (new baby so not much free time at the moment!), progress is looking awesome! Will hopefully have a go with the new version soon...\u003C/p\u003E\n"},{"CreatedByName":"lmarr28","CreatedById":107540,"CreatedDateTime":"2014-06-13T14:20:48Z","Content":"\n\u003Cp\u003ECan anyone help me map a latching button/switch to the \u0027Map\u0027 function? I\u0027m assuming this is available since it\u0027s called out in the comments of the ControlPacket struct (see below: byte Mode) in KSPIODemo6. However, I can\u0027t find a reference to \u0022Mode\u0022 anywhere else - unless I\u0027m just missing it...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Estruct ControlPacket {\u003Cbr\u003E  byte id;\u003Cbr\u003E  byte MainControls;                  //SAS RCS Lights Gear Brakes Precision Abort Stage \u003Cbr\u003E  byte Mode;                          //0 = stage, 1 = docking, 2 = map\u003Cbr\u003E  unsigned int ControlGroup;          //control groups 1-10 in 2 bytes\u003Cbr\u003E  byte AdditionalControlByte1;        //other stuff\u003Cbr\u003E  byte AdditionalControlByte2;\u003Cbr\u003E};\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-06-13T17:41:02Z","Content":"\n\u003Cp\u003EUnfortunately switch to map is not implemented yet...\u003C/p\u003E\n"},{"CreatedByName":"lmarr28","CreatedById":107540,"CreatedDateTime":"2014-06-13T17:51:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EUnfortunately switch to map is not implemented yet...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo worries. Thanks for all of your hard work on this plugin! I love it!\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-19T17:17:17Z","Content":"\n\u003Cp\u003EOkay.\u003C/p\u003E\u003Cp\u003EWay back when I started my Action Groups Extended mod, one of the goals was to interface with this to allow sim pits with lots and lots of switches.\u003C/p\u003E\u003Cp\u003EI have AGX stable at this point and I am at a point where I\u0027m ready to look at integrating with this mod.\u003C/p\u003E\u003Cp\u003EThe problem is I don\u0027t have an arduino myself to test and I have no clue how one works.\u003C/p\u003E\u003Cp\u003ELooking at the plugin source code, it looks like the control groups are a 16 bit integer of which 10 bits are used, one for each control group. This integer is then sent every update from the arduino to the PC and if the integer changes, that triggers that control to action.\u003C/p\u003E\u003Cp\u003EUsing this method on my AGX mod would require 16 of these integers to support the full 250 groups (16 integers times 16 bits is 256 bits total). The current total packet control size is 21 bytes, so extending the current method to 16 integers for the control groups would take a control packet to 51 bytes. I don\u0027t know serial communications at all, would this be a problem?\u003C/p\u003E\u003Cp\u003EIf this method is possible, it would be straightforward for me to put together a pull request for your review, there are actually not that many changes to the code on the plug-in end. However, I have no clue what this would entail on the arduino\u0027s physical end to get it to recognize more then the ten groups is currently does.\u003C/p\u003E\u003Cp\u003EAnd this is assuming one arduino can do this. For that many groups would we be looking at multiple arduinos? (Looking at the website, it looks like it\u0027s typically 14 or 15 digital inputs per board?)\u003C/p\u003E\u003Cp\u003EThat brings me to my question about an alternate method. Rather then the state of each control group being sent each update, is it possible to send a packet on state change? So when group 43 it sends a data packet of {bool} Activate/Deactivate and {ushort} ActionGroup Number?\u003C/p\u003E\u003Cp\u003EThoughts from people who have actually used the arduino on this?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2014-06-20T05:23:58Z","Content":"\n\u003Cp\u003EProblem: I would like to use the fuel per stage to stay in map view during ascent. However, it does not work on rockets with asperagus staging, as the game reports fuel available to any active engine. When your outer rockets burn out you will not see this in the fuel gauge.\u003C/p\u003E\u003Cp\u003EWorkaround: I plan to check for change in acceleration occuring without change in thrust. This will give some problems with RCS, but better than nothing. \u003C/p\u003E\u003Cp\u003ERequest: Is it possible to check for active engines not producing thrust?\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-06-20T11:28:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EOkay.\u003Cp\u003EWay back when I started my Action Groups Extended mod, one of the goals was to interface with this to allow sim pits with lots and lots of switches.\u003C/p\u003E\u003Cp\u003EI have AGX stable at this point and I am at a point where I\u0027m ready to look at integrating with this mod.\u003C/p\u003E\u003Cp\u003EThe problem is I don\u0027t have an arduino myself to test and I have no clue how one works.\u003C/p\u003E\u003Cp\u003ELooking at the plugin source code, it looks like the control groups are a 16 bit integer of which 10 bits are used, one for each control group. This integer is then sent every update from the arduino to the PC and if the integer changes, that triggers that control to action.\u003C/p\u003E\u003Cp\u003EUsing this method on my AGX mod would require 16 of these integers to support the full 250 groups (16 integers times 16 bits is 256 bits total). The current total packet control size is 21 bytes, so extending the current method to 16 integers for the control groups would take a control packet to 51 bytes. I don\u0027t know serial communications at all, would this be a problem?\u003C/p\u003E\u003Cp\u003EIf this method is possible, it would be straightforward for me to put together a pull request for your review, there are actually not that many changes to the code on the plug-in end. However, I have no clue what this would entail on the arduino\u0027s physical end to get it to recognize more then the ten groups is currently does.\u003C/p\u003E\u003Cp\u003EAnd this is assuming one arduino can do this. For that many groups would we be looking at multiple arduinos? (Looking at the website, it looks like it\u0027s typically 14 or 15 digital inputs per board?)\u003C/p\u003E\u003Cp\u003EThat brings me to my question about an alternate method. Rather then the state of each control group being sent each update, is it possible to send a packet on state change? So when group 43 it sends a data packet of {bool} Activate/Deactivate and {ushort} ActionGroup Number?\u003C/p\u003E\u003Cp\u003EThoughts from people who have actually used the arduino on this?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe Mega has many more inputs, and you can use io expander chips that will give you basically unlimited number of inputs. \u003C/p\u003E\u003Cp\u003EI think realistically no one will need physical 250 control switch/buttons! That would be nuts, imagine drilling 250 holes, soldering all the wires and testing they all work! I think 64 should be more than enough for anybody . Either way 51 bytes is not a problem at all. 51 bytes will only take ~10mS to send at 38400 BAUD, and that can easily be tripled to 115200. Since the arduino can\u0027t do 64 bit stuff, it will be best to use a couple 32bit uint variables in the control packet.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Freshmeat\u0022 data-cite=\u0022Freshmeat\u0022\u003E\u003Cdiv\u003EProblem: I would like to use the fuel per stage to stay in map view during ascent. However, it does not work on rockets with asperagus staging, as the game reports fuel available to any active engine. When your outer rockets burn out you will not see this in the fuel gauge.\u003Cp\u003EWorkaround: I plan to check for change in acceleration occuring without change in thrust. This will give some problems with RCS, but better than nothing. \u003C/p\u003E\u003Cp\u003ERequest: Is it possible to check for active engines not producing thrust?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmm... assuming it\u0027s possible (I donno, the engine list thing I stole from KOS), would you want a number representing the number of active engines out of fuel?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-20T13:43:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EThe Mega has many more inputs, and you can use io expander chips that will give you basically unlimited number of inputs. \u003Cp\u003EI think realistically no one will need physical 250 control switch/buttons! That would be nuts, imagine drilling 250 holes, soldering all the wires and testing they all work! I think 64 should be more than enough for anybody . Either way 51 bytes is not a problem at all. 51 bytes will only take ~10mS to send at 38400 BAUD, and that can easily be tripled to 115200. Since the arduino can\u0027t do 64 bit stuff, it will be best to use a couple 32bit uint variables in the control packet.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAlright, if 51byte messages are not a problem, I\u0027ll go with 8 uint\u0027s for the control stuff.\u003C/p\u003E\u003Cp\u003EOne thing I am going to do is because I have so many groups, I\u0027m going to provide 2 styles of control:\u003C/p\u003E\u003Cp\u003EGroups 1-125 ( 4 uints): Control as currently exists, send KSP GroupActivate on state change to 1 and GroupDeactivate on state change to 0.\u003C/p\u003E\u003Cp\u003EGroups 126-250 (4 units): Activate control only. Send KSP GroupActivate on state change to 1 but do nothing on state change to 0. This is to support things like a pushbutton or a toggle switch.\u003C/p\u003E\u003Cp\u003EPushbutton: Send GroupActivate on pressing the button (state change to 1) but send nothing on button release (state change to 0)\u003C/p\u003E\u003Cp\u003EToggle Switch: Send GroupActivate(Group126) on flipping the switch up, send GroupActivate(Group127) on flipping the switch down.\u003C/p\u003E\u003Cp\u003EI\u0027ll pull a github fork on the weekend so you can see exactly how I\u0027m thinking to implement this. The arduino end is still a question mark though. I\u0027ll download the software and see if I can make something work without actually having an arduino to connect.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-20T14:38:03Z\u0022 title=\u002206/20/2014 02:38  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 20, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003Cbr\u003EMath Failure\n\u003C/span\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2014-06-21T12:06:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EHmm... assuming it\u0027s possible (I donno, the engine list thing I stole from KOS), would you want a number representing the number of active engines out of fuel?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the reply. I just need to know if any engine is out of fuel, but others might appreciate the number.\u003C/p\u003E\u003Cp\u003EAfter some testing, I have designed the circuits and the actual physical design is taking form. I have no access to print boards, so nails, wire and chipboard it is. Will show pictures when I have something to show.\u003C/p\u003E\n"},{"CreatedByName":"KvickFlygarn87","CreatedById":76314,"CreatedDateTime":"2014-06-22T09:27:02Z","Content":"\n\u003Cp\u003EWould it be possible for me to see the source of that LCD? I\u0027m quite clueless as to how I would print stuff to the arduino \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-06-23T13:39:12Z","Content":"\n\u003Cp\u003EMy LCD code is a huge mess, I would suggest you look at the tutorial here: \u003Ca href=\u0022http://arduino.cc/en/Tutorial/LiquidCrystal\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://arduino.cc/en/Tutorial/LiquidCrystal\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"KvickFlygarn87","CreatedById":76314,"CreatedDateTime":"2014-06-23T17:45:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EMy LCD code is a huge mess, I would suggest you look at the tutorial here: \u003Ca href=\u0022http://arduino.cc/en/Tutorial/LiquidCrystal\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://arduino.cc/en/Tutorial/LiquidCrystal\u003C/a\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut how do I get data from KSP?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-24T00:36:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KvickFlygarn87\u0022 data-cite=\u0022KvickFlygarn87\u0022\u003E\u003Cdiv\u003EBut how do I get data from KSP?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s where the communication module on the first page comes in.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPIODemo6.zip\u0022 rel=\u0022external nofollow\u0022\u003ESouce code for Arduino 4: Input Axes\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIn your Arduino program, you will have to combine the two so that a variable is set from KSP via the serial communications and then display that variable on the LCD.\u003C/p\u003E\u003Cp\u003ESo for altitude, find that variable in the KSPIODemo6 program and then append the LCD code with a \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elcd.print(AltitudeFromKsp);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI hope that will be enough to get you started, I don\u0027t have an arduino myself to test and be anymore detailed with.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"KvickFlygarn87","CreatedById":76314,"CreatedDateTime":"2014-06-24T06:45:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThat\u0027s where the communication module on the first page comes in.\u003Cp\u003E\u003Ca href=\u0022https://sites.google.com/site/zitronfiles/KSPIODemo6.zip\u0022 rel=\u0022external nofollow\u0022\u003ESouce code for Arduino 4: Input Axes\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIn your Arduino program, you will have to combine the two so that a variable is set from KSP via the serial communications and then display that variable on the LCD.\u003C/p\u003E\u003Cp\u003ESo for altitude, find that variable in the KSPIODemo6 program and then append the LCD code with a \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elcd.print(AltitudeFromKsp);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI hope that will be enough to get you started, I don\u0027t have an arduino myself to test and be anymore detailed with.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks a lot, Diazo!\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2014-06-28T19:43:18Z","Content":"\n\u003Cp\u003EI will not go into space today........\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 alt=\u0022;.;\u0022\u003E\u003C/p\u003E\u003Cp\u003EMy build was going along fairly nicely, and most of the coding was done when I discovered a fatal hardware weakness:\u003C/p\u003E\u003Cp\u003ETo increase my amount of switches, I ran groups of four through different resistors in parallel, reading the results on the analog pins. However, when I throw a switch, the increase in drawn current is enough to disturb the reading on the other pins. As it stands, most of the basic functions will work without fail, but the advanced ones disturb one another. While this is pretty kerbal, I would like my stuff to work every time. I guess it is time to look into pin extender chips.\u003C/p\u003E\u003Cp\u003EThought: Will it help to scale the resistors up? The ones I am using is in the 100-1k range, and could be changed by one or two orders of magnitude once I get new ones.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-28T19:46:09Z\u0022 title=\u002206/28/2014 07:46  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 28, 2014\u003C/time\u003E by Freshmeat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-28T20:38:38Z","Content":"\n\u003Cp\u003EThe other analog pins are seeing their readings change when you toggle one of the 4 switches on the first pin?\u003C/p\u003E\u003Cp\u003EThat sounds odd, what\u0027s the setup you have? (Mainly, what\u0027s the part number of the analog pins sensor? Or board they came mounted on.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-06-28T21:09:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Freshmeat\u0022 data-cite=\u0022Freshmeat\u0022\u003E\u003Cdiv\u003EI will not go into space today........\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 alt=\u0022;.;\u0022\u003E\u003Cp\u003EMy build was going along fairly nicely, and most of the coding was done when I discovered a fatal hardware weakness:\u003C/p\u003E\u003Cp\u003ETo increase my amount of switches, I ran groups of four through different resistors in parallel, reading the results on the analog pins. However, when I throw a switch, the increase in drawn current is enough to disturb the reading on the other pins. As it stands, most of the basic functions will work without fail, but the advanced ones disturb one another. While this is pretty kerbal, I would like my stuff to work every time. I guess it is time to look into pin extender chips.\u003C/p\u003E\u003Cp\u003EThought: Will it help to scale the resistors up? The ones I am using is in the 100-1k range, and could be changed by one or two orders of magnitude once I get new ones.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHuh? Did you wire it up correctly? Can you show the schematics? I can\u0027t see how a 1k resister will change the power supply voltage by much... I am doing some thing similar, I\u0027m using 1k - 8.2k resistors. You may also need to check for switch bounce and wait a bit for the voltage to stabilise.\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2014-06-29T12:33:31Z","Content":"\n\u003Cp\u003EIt is not the 1k resistor, it is having a bunch of them in parallel. I had 3 circuits going as low as 330 ohm each in parallel -\u0026gt; 100 ohm effective resistance \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E I ought to have seen that one from a mile away.\u003C/p\u003E\u003Cp\u003EI changed the resistors this morning, going from 100-670 ohm to 3300-15000 ohm, and added a 330 ohm more between the leds drawn directly from \u002B5V. Now the resistance behaves properly, and I can continue debugging my software. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-29T12:59:16Z\u0022 title=\u002206/29/2014 12:59  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 29, 2014\u003C/time\u003E by Freshmeat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-06-30T14:40:54Z","Content":"\n\u003Cp\u003EAll right that makes more sense.\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2014-07-01T21:40:56Z","Content":"\n\u003Cp\u003ESo, I made progress: \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/84672-My-homebuild-controller-for-KSP-%28Picture-heavy%29?p=1242766#post1242766\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/84672-My-homebuild-controller-for-KSP-%28Picture-heavy%29?p=1242766#post1242766\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThanks for all the help, I\u0027ll come running back when I have money to spend on a display unit.\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}