{"TopicId":85527,"ForumId":36,"TopicTitle":"Addon Controller - Toggle addons and parts on/off for individual saves","CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-09-27T09:25:35Z","PageNum":1,"Articles":[{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-09-27T09:25:35Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/94426-0-24-2-Addon-Controller-Toggle-addons-and-parts-on-off-for-individual-saves\u0022 rel=\u0022external nofollow\u0022\u003ERelease thread\u003C/a\u003E\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/zWChV\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is the development thread for my Addon Cotroller plugin.\u003C/p\u003E\u003Cp\u003EBasic goal of this project is to create a way for users to control what addons and parts should be running/be available for individual saves, and provide an endpoint that addon developers can use to enable their addons to be dynamically turned on or off.\u003C/p\u003E\u003Cp\u003EDiscussion and suggestions are welcome.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003EFeatures\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EPrevent specific addons from running for a given save (if it implements support)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPrevent specific part modules from running for a given save\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPrevent specific parts from being available for a given save\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003ESource\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://bitbucket.org/uzza/kspaddoncontroller\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bitbucket.org/uzza/kspaddoncontroller\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003EAPI\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe API can be found by looking at the AddonControllerApi and RefelctionAddonControllerApi classes. The RefelctionAddonControllerApi class is built so it does not need an assembly reference, so just copy the class to your addon project and start using it, and it\u0027ll return correct values i.e. return true on AddonIsAllowed when not installed, and the actual value when it is.\u003C/p\u003E\u003Cp\u003EAlso, all addons are allowed to run during the loading screen and while in the main menu. In all other cases, the actual value is returned.\u003C/p\u003E\u003Cp\u003EIf you add support using the API, please comment so I can compile a list of supported addons.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003ETodo\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003EFuture plans\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EInvestigate possibility of dynamically unloading and loading textures to only keep textures of loaded parts in memory.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EInvestigate if it\u0027s possible to show existing part info window when hovering over part in the part list.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAdd support for \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/79745\u0022 rel=\u0022external nofollow\u0022\u003EKSP-AVC\u003C/a\u003E.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-02T13:55:30Z\u0022 title=\u002211/02/2014 01:55  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 2, 2014\u003C/time\u003E by Uzza\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-09-28T09:50:53Z","Content":"\n\u003Cp\u003EI\u0027ve spent the most of yesterday figuring out how the Unity UI works, and I think I\u0027ve gotten it mostly figured out.\u003C/p\u003E\u003Cp\u003EHere\u0027s the current UI, addons section still WIP:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/6H20slH.png\u0022 alt=\u00226H20slH.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/nY9HVfn.png\u0022 alt=\u0022nY9HVfn.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAlso, based on NathanKells comment in the release thread, I\u0027ve made the functionality of preventing addons from loading a config option.\u003C/p\u003E\u003Cp\u003EI think I\u0027m also going to make it an option per addon in the UI, so if you know an addon can be toggled off by it not loading, you can toggle it for that addon.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-28T09:59:40Z\u0022 title=\u002209/28/2014 09:59  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 28, 2014\u003C/time\u003E by Uzza\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MK3424","CreatedById":19932,"CreatedDateTime":"2014-09-28T10:11:04Z","Content":"\n\u003Cp\u003EOh, wow! this is so usefull for multiplayer.\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-09-28T20:38:24Z","Content":"\n\u003Cp\u003Ev 0.3 has just been released and the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/94811-Addon-Controller-Toggle-addons-and-parts-on-off-for-individual-saves\u0022 rel=\u0022external nofollow\u0022\u003Erelease thread\u003C/a\u003E has been updated.\u003C/p\u003E\u003Cp\u003ENext task on the list is to expand the API.\u003C/p\u003E\u003Cp\u003EI was thinking of adding the ability for addons to register parts that\u0027s associated with them, so when an addon is disabled, the parts are also removed.\u003C/p\u003E\u003Cp\u003EThoughts on that, or other ideas for expanding the API?\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-04T16:43:16Z","Content":"\n\u003Cp\u003EAlmost a week later and no comments? Was hoping that at least someone would have something to say about this.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-10-04T17:05:55Z","Content":"\n\u003Cp\u003EOk i have some questions and comments\u003C/p\u003E\u003Cp\u003E1. Does the game still load everything into memory at startup?\u003C/p\u003E\u003Cp\u003E2. Do you have any plans for organising the choices a bit? People with hundreds of parts will probably not bother with it unless you can check or uncheck whole mods or folders.\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-04T17:25:13Z","Content":"\n\u003Cp\u003E1: Currently I don\u0027t touch any of the loading sequence, so everything is loaded normally.\u003C/p\u003E\u003Cp\u003EHmm, loading only the parts needed as you load load a game would be an interesting idea, and unloading them when you exit. Don\u0027t know if it\u0027s easy, hard, or even possible though.\u003C/p\u003E\u003Cp\u003E2: My initial plan was to have a directory tree where you can check or uncheck an entire node at once.\u003C/p\u003E\u003Cp\u003EThis is my first foray into the Unity UI system though, so I very quickly changed initial goal to just get a usable UI so you don\u0027t have to edit the config manually.\u003C/p\u003E\u003Cp\u003EShould probably start looking at how to implement it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-04T17:30:23Z\u0022 title=\u002210/04/2014 05:30  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 4, 2014\u003C/time\u003E by Uzza\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-05T02:32:22Z","Content":"\n\u003Cp\u003ESo I\u0027ve played around with the UI, and I\u0027ve ended up with a tree view that I think looks pretty good!\u003C/p\u003E\u003Cp\u003EI\u0027m basically using the folder structure, though cleaned slightly to remove excess nodes like /Parts.\u003C/p\u003E\u003Cp\u003EBesides the obvious unlit and green lights, the orange lights represent nodes where not all child nodes are selected. Clicking on an orange node will deselect all child nodes.\u003C/p\u003E\u003Cp\u003EWhat do you guys think?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Em0oRgj.png\u0022 alt=\u0022Em0oRgj.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-05T02:37:39Z\u0022 title=\u002210/05/2014 02:37  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 5, 2014\u003C/time\u003E by Uzza\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-10-05T04:48:57Z","Content":"\n\u003Cp\u003ENice, but at the moment this mod effectively does the same that the part organiser does, just in a different way. It\u0027s probably why there\u0027s not a lot of interest in it.\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-05T11:34:06Z","Content":"\n\u003Cp\u003EI just looked at part organizer, and while you can get the same effect, that plugin is more intended for sorting and finding specific parts when building. My plugin prevents the parts from even appearing in the first place.\u003C/p\u003E\u003Cp\u003EThat\u0027s just the parts though. My plugin also allows you to, with some limitations, stop plugins/mods from running for specific saves.\u003C/p\u003E\u003Cp\u003EThis way you should be able to tailor the game experience for each save.\u003C/p\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-10-05T12:36:52Z","Content":"\n\u003Cp\u003EI would really love this to work..\u003C/p\u003E\u003Cp\u003Ebut it probbably can\u0027t..\u003C/p\u003E\u003Cp\u003Eyou are walking in a good direction - but I\u0027m not sure there is a place to arraive there..\u003C/p\u003E\u003Cp\u003Eat the time you select the save file, the addon loader is allready through..\u003C/p\u003E\u003Cp\u003Eall parts/plugins are allready in the memory..\u003C/p\u003E\u003Cp\u003Esince THIS is the actual problem that needs to be solved (lag because of ram and gameload crashes because of too many mods) - this plugin does not serve it\u0027s purpose right now.. - sorry to be so blunt :-)\u003C/p\u003E\u003Cp\u003EI mean if my lag does not go away, I might aswell show the parts in editor - becaue if they are just hidden but still lag my game, why would I wan\u0027t them to be hidden?\u003C/p\u003E\u003Cp\u003EAlso with your plugin, the only way to get B9 out my memory for one save is to remove it physically from gamedata.\u003C/p\u003E\u003Cp\u003EI was thinking a few minutes how to solve this - but I guess since KSP loads all parts \u003Cstrong\u003Ebefore \u003C/strong\u003Eyou select the save, it might be a futile excercise to try..\u003C/p\u003E\u003Cp\u003Eyou would need to restart the game load after selecting your plugins - and then this setting would affect all save games..\u003C/p\u003E\u003Cp\u003Ethe only \u0022real\u0022 way to have it work with current KSP would be a standalone application, that will rename files (dll =\u0026gt; dll.txt, same for pics and cfg, and models) so they wont load..\u003C/p\u003E\u003Cp\u003Ebut I\u0027m sure, this is not what you intended to code..\u003C/p\u003E\u003Cp\u003EOr: KSP needs to have a hook point prior the part loader and the part loader has to run after the save game select or this will never work I\u0027m afraid..\u003C/p\u003E\u003Cp\u003Ecorrect me if I\u0027m wrong guys..\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-10-05T16:08:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Uzza\u0022 data-cite=\u0022Uzza\u0022\u003E\u003Cdiv\u003EThat\u0027s just the parts though. My plugin also allows you to, with some limitations, stop plugins/mods from running for specific saves.\u003Cp\u003EThis way you should be able to tailor the game experience for each save.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOops. You should advertise this aspect of it a lot more. I just quickly scanned through this thread initially and what stands out most is the part hiding feature.\u003C/p\u003E\u003Cp\u003EIt\u0027s definitely great to be able to disable e.g. DRE and FAR for a particular save, but what would be even greater is if you could stop plugins and art assets from loading at all. This would be a great tool for modders. Right now we\u0027re all forced to keep seperate installs for development with minimum/no mods installed for quick loading.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022philotical\u0022 data-cite=\u0022philotical\u0022\u003E\u003Cdiv\u003EOr: KSP needs to have a hook point prior the part loader and the part loader has to run after the save game select or this will never work I\u0027m afraid..\u003Cp\u003Ecorrect me if I\u0027m wrong guys..\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/60880\u0022 rel=\u0022external nofollow\u0022\u003EDev Helper\u003C/a\u003E has a way of specifying which save to load automatically which it stores in an XML file IIRC. Maybe there could be some cooperation there.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-05T16:12:48Z\u0022 title=\u002210/05/2014 04:12  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 5, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-05T21:08:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EOops. You should advertise this aspect of it a lot more. I just quickly scanned through this thread initially and what stands out most is the part hiding feature.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI should probably update the first post to be more informative, like the release thread, to make it more clear.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EIt\u0027s definitely great to be able to disable e.g. DRE and FAR for a particular save, but what would be even greater is if you could stop plugins and art assets from loading at all. This would be a great tool for modders. Right now we\u0027re all forced to keep seperate installs for development with minimum/no mods installed for quick loading.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can stop KSPAddons from loading, so mods that are wholly contained inside a KSPAddon is stopped if you toggle off \u0022Allow Start\u0022. I don\u0027t do anything with PartModules though currently, which is something I need to figure out how to disable.\u003C/p\u003E\u003Cp\u003EI did have a quick look at textures, and it\u0027s easy to unload them, so I can unload all part textures as they\u0027re being loaded, and then only load the ones that\u0027s needed when loading a game.\u003C/p\u003E\u003Cp\u003EI\u0027m having some difficulty with loading them again though. I tried using the existing texture loaders (e.g. DatabaseLoaderTexture_MBM), but they were never successful.\u003C/p\u003E\u003Cp\u003EI then used the MBMReader to directly load an mbm texture for a squad part, but I could never get the model to use the new texture. Feels like I\u0027m missing something.\u003C/p\u003E\u003Cp\u003EHere\u0027s the code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprivate void Stuff()\u003Cbr\u003E{\u003Cbr\u003E    GameDatabase.Instance.RemoveTexture(\u0022Squad/Parts/Command/advSasModule/model000\u0022);\u003Cbr\u003E    GameDatabase.Instance.RemoveTexture(\u0022Squad/Parts/Command/advSasModule/model001\u0022);\u003Cbr\u003E\u003Cbr\u003E    this.LoadTexture(\u0022Squad/Parts/Command/advSasModule/model000\u0022);\u003Cbr\u003E    this.LoadTexture(\u0022Squad/Parts/Command/advSasModule/model001\u0022);\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Eprivate void LoadTexture(string textureName)\u003Cbr\u003E{\u003Cbr\u003E    var fullPath = KSPUtil.ApplicationRootPath \u002B \u0022/GameData/\u0022 \u002B textureName \u002B \u0022.mbm\u0022;\u003Cbr\u003E    var isNormal = false;\u003Cbr\u003E    var tex = MBMReader.Read(fullPath, out isNormal);\u003Cbr\u003E    if (tex != null)\u003Cbr\u003E    {\u003Cbr\u003E        Debug.Log(\u0022Loading successful \u0022 \u002B fullPath);\u003Cbr\u003E        var info = new GameDatabase.TextureInfo(tex, isNormal, true, true);\u003Cbr\u003E        info.name = textureName;\u003Cbr\u003E\u003Cbr\u003E        GameDatabase.Instance.databaseTexture.Add(info);\u003Cbr\u003E    }\u003Cbr\u003E    else\u003Cbr\u003E    {\u003Cbr\u003E        Debug.Log(\u0022Loading not successful \u0022 \u002B fullPath);\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-05T21:50:47Z\u0022 title=\u002210/05/2014 09:50  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 5, 2014\u003C/time\u003E by Uzza\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-10-06T08:11:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/60880\u0022 rel=\u0022external nofollow\u0022\u003EDev Helper\u003C/a\u003E has a way of specifying which save to load automatically which it stores in an XML file IIRC. Maybe there could be some cooperation there.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh I see where you are getting at..\u003C/p\u003E\u003Cp\u003Eas a work around for the limiting KSP procedures on partload, one could make a list of stuff to rename (pics, mu, cfg, and dlls), force the game to close, start a batch that does the renaming and restarting the game with allready selected save..\u003C/p\u003E\u003Cp\u003Ethat way, the \u0022unloading\u0022, that happens \u003Cstrong\u003Eafter\u003C/strong\u003E the tediouse loading time can be prevented by not loading them in the first place.\u003C/p\u003E\u003Cp\u003EThat unloading is btw done by KSP itselfe - check logs - every X frames, the garbadge collecter runs and unloads unused assets..\u003C/p\u003E\u003Cp\u003Edoes really not save any time at game load..\u003C/p\u003E\u003Cp\u003Ein other words, it still solves a problem that does not exist..\u003C/p\u003E\u003Cp\u003Ethe better way to solve the \u0022existing\u0022 problem could be the auto renaming - although it\u0027s a messy workaround it could work.\u003C/p\u003E\u003Cp\u003Eat least on windows - not sure if mac has batch files..\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-06T09:47:04Z","Content":"\n\u003Cp\u003EWhile I find the intent, idea (and code) great just know that replacing the addon loader (and other part of the stock loader) as you do will just means one thing : I will not provide any support for any of my mod when yours is present.\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-06T11:37:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EWhile I find the intent, idea (and code) great just know that replacing the addon loader (and other part of the stock loader) as you do will just means one thing : I will not provide any support for any of my mod when yours is present.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhile wrapping the loader was my initial idea to be able to prevent addons from starting, which would have worked without support from other mods, it became obvious that it was not nearly a universal solution, which is why it\u0027s currently a secondary citizen and only used if the user explicitly sets it.\u003C/p\u003E\u003Cp\u003EI\u0027ve been thinking about removing that part completely, but that would require that other mods add support and starts checking against my plugin if the user has allowed it.\u003C/p\u003E\u003Cp\u003EGiven how dependent it was on how the addons were coded though, removing the loader replacement might be the best path, and hope that addon devs add support through the api.\u003C/p\u003E\u003Cp\u003EA question. Is it possible to revert the changes to parts that Module Manager does? If so it might be possible to integrate so a user could stop specific changes to parts, which I could then show in my UI.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-06T11:56:27Z","Content":"\n\u003Cp\u003ENo, there are too much things going on after loading for something to work properly. The GameDatabase loads the .cfg, then MM does its work and after that PartLoader compiles the part from the GameDatabase. And some mods builds things from GameDatabase when they reach the game menu or spaceport (or earlier, but it\u0027s a bad idea imho).\u003C/p\u003E\u003Cp\u003EMM allows for a reload of the DB that reapply the patch so it would be possible if I added a way to block some mod from loading in MM, but mods that builds some of their config when reaching the Main Menu may break. \u003C/p\u003E\u003Cp\u003EBut it\u0027s still a support nightmare. You can\u0027t know if something failed because a user deactivated a dependency of an other mod. Like those who removed MM from FAR install because they tough MM was somehow bad.\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-06T19:48:29Z","Content":"\n\u003Cp\u003EThat\u0027s a shame, would have hoped it for it to be easy, as it means it\u0027s not possible to revert changes to, for example, stock parts if MM is installed.\u003C/p\u003E\u003Cp\u003EOn dependencies though, I could probably check the KSPAssemblyDependency, so if a user disables a mod, those that depend on it are also disabled.\u003C/p\u003E\u003Cp\u003EWould you have any suggestions on what kind of API functions you think would be useful? As I mentioned previously, I\u0027ve thought about addons being able to register parts that should be disabled when the addon is disabled, which should add some easy of use for end users.\u003C/p\u003E\u003Cp\u003EAlso, does anyone know if it\u0027s possible to show the part information window on the fly outside of the editor/R\u0026amp;D? Would be nice to be able to show it when hovering over parts in the part list.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-10-06T20:52:08Z","Content":"\n\u003Cp\u003EHas anyone seen \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/73236\u0022 rel=\u0022external nofollow\u0022\u003Ethis thread\u003C/a\u003E?\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-07T07:06:32Z","Content":"\n\u003Cp\u003EI\u0027ve seen it before and it works pretty well. Some quick testing doesn\u0027t show any issues together with my plugin.\u003C/p\u003E\u003Cp\u003EI\u0027ll see if unloading textures of excluded parts works together with it. In that case I\u0027ll add it as a feature that runs on the condition that LOD is installed.\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-11T16:30:14Z","Content":"\n\u003Cp\u003EA new week, more development (working on this mostly on weekends).\u003C/p\u003E\u003Cp\u003EI have decided to completely remove the ability to prevent addons from running, as per the previous discussions. So now it\u0027s only possible to stop addons if they implement support through the API.\u003C/p\u003E\u003Cp\u003ESpeaking of the API, I\u0027ve created an actual API class and a \u003Ca href=\u0022https://bitbucket.org/uzza/kspaddoncontroller/src/31eff0a114b13e6bc088afb7a2cf44290e41f1e1/AddonController/API/RefelctionAddonControllerApi.cs?at=default\u0022 rel=\u0022external nofollow\u0022\u003Ereflection based version of it\u003C/a\u003E. Just copy the RefelctionAddonControllerApi class to your project. and start using it.\u003C/p\u003E\u003Cp\u003EI\u0027ve added an examples project that shows how to use the API.\u003C/p\u003E\u003Cp\u003EI\u0027ve also been finishing up the tree view, so now there\u0027s a tree view for both addons and parts. It also remembers it\u0027s state for each save, so it\u0027s easy to switch between saves and see what\u0027s toggled on/off.\u003C/p\u003E\u003Cp\u003EAddons are grouped by first subfolder in GameData, and then by the assembly they\u0027re in.\u003C/p\u003E\u003Cp\u003EHave a look at it below.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/CGzdG\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EGoing to see if there\u0027s any more changes I\u0027m going to add before making a new release.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-10-13T19:55:00Z","Content":"\n\u003Cp\u003EHow are you handling cleanup of the mods? There are many things in EVE that I think would not play nicely with being removed in-game.\u003C/p\u003E\u003Cp\u003EI could see how other mods might change many stateful aspects of things in KSP that would not work.\u003C/p\u003E\u003Cp\u003EOn the other-hand, If you altered the AddonLoader mechanism to delay loading mods until after a save is selected that could work. It would just mean that in order to properly clean things up, you would have to quit the game to load a new save.\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-13T22:22:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EHow are you handling cleanup of the mods? There are many things in EVE that I think would not play nicely with being removed in-game.\u003Cp\u003EI could see how other mods might change many stateful aspects of things in KSP that would not work.\u003C/p\u003E\u003Cp\u003EOn the other-hand, If you altered the AddonLoader mechanism to delay loading mods until after a save is selected that could work. It would just mean that in order to properly clean things up, you would have to quit the game to load a new save.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat was the problem, I couldn\u0027t actually do that, and EVE was actually the first one I noticed it on.\u003C/p\u003E\u003Cp\u003EThis is one of the reasons that I\u0027ve now moved away from altering the addon loading process, and now doing a purely API driven approach. The support will be much easier, as then it\u0027s just a case of if the mod supports toggling by checking it\u0027s state.\u003C/p\u003E\u003Cp\u003EThe API is currently just a function that takes an addon type and returns a boolean that indicates if it has been disabled, so it shouldn\u0027t be that difficult to update a mod around that.\u003C/p\u003E\n"},{"CreatedByName":"Zeenobit","CreatedById":125578,"CreatedDateTime":"2014-10-23T03:05:46Z","Content":"\n\u003Cp\u003EA quick suggestion until the problem is solved for loading/unloading textures dynamically:\u003C/p\u003E\u003Cp\u003EWould it be possible to generate a list of all parts disabled?\u003C/p\u003E\u003Cp\u003EIf that\u0027s done, then manually or automatically we can disable those parts.\u003C/p\u003E\n"},{"CreatedByName":"Uzza","CreatedById":74600,"CreatedDateTime":"2014-10-23T06:56:56Z","Content":"\n\u003Cp\u003EWhat form do you suggest this list would take. A list ingame, exported to a file, or through the API?\u003C/p\u003E\n"}]}