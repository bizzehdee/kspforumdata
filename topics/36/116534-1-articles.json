{"TopicId":116534,"ForumId":36,"TopicTitle":"Questions re: cfg file parameters for Science Labs","CreatedByName":"rasta013","CreatedById":140002,"CreatedDateTime":"2015-07-21T23:53:11Z","PageNum":1,"Articles":[{"CreatedByName":"rasta013","CreatedById":140002,"CreatedDateTime":"2015-07-21T23:53:11Z","Content":"Apologies ahead of time for the somewhat tl;dr post but this is bugging me and I can\u0027t seem to figure it out...\n\nSo, I\u0027ve been digging for days and only finding snippets of info here and there but have not been able to get any truly complete answers so figured I\u0027d bring my question here to see if anyone can provide some insight. I\u0027m working to reconfigure some of the cfg files for Better Science Labs Continued in an effort to create some variety for each lab beyond form factor as a prelude to me creating my own new labs mod. That said, changing the parameters results in some extremely unpredictable behavior. Specifically, I cannot figure out the mathematics behind these values nor how they interact with each other : SurfaceBonus, ContextBonus, scientistBonus, researchTime, scienceMultiplier. Furthermore, it seems the parameters dataStorage and scienceCap have an additional effect and interaction with these values.\n\nHere\u0027s an example of what I mean:\n\n\u003E \n\u003E  dataStorage = 2000\n\u003E \n\u003E  crewsRequired = 4\n\u003E \n\u003E  SurfaceBonus = 0.15\n\u003E \n\u003E  ContextBonus = 0.35\n\u003E \n\u003E  homeworldMultiplier = 0.01\n\u003E \n\u003E  scientistBonus = 0.25\n\u003E \n\u003E  researchTime = 7\n\u003E \n\u003E  scienceMultiplier = 6\n\u003E \n\u003E  scienceCap = 1000\n\u003E \n\u003E \n\n\u003E \n\u003E  dataStorage = 500\n\u003E \n\u003E  crewsRequired = 2\n\u003E \n\u003E  SurfaceBonus = 0.25\n\u003E \n\u003E  ContextBonus = 0.1\n\u003E \n\u003E  homeworldMultiplier = 0.01\n\u003E \n\u003E  scientistBonus = 0.25\n\u003E \n\u003E  researchTime = 5\n\u003E \n\u003E  scienceMultiplier = 3\n\u003E \n\u003E  scienceCap = 500\n\u003E \n\u003E \n\nI understand the basics of these values, scientist bonus increases data values per scientist, surface bonus increases data values when data comes from the body the lab is landed on, research time is an exponential value that affects length of research etc etc etc. These are all very clear cut but if you look at the values I have listed above you would expect the 4 man Mk3-8 would actually generate a fair amount of science in relation to the 2 man Mk2-LC but that is far from the case. With these values, both labs landed on the Mun, both labs with the same amount of data same experiments and the Mk2-LC was generating 224 science/day and the Mk3-8 was generating only 7. That doesn\u0027t seem right and is ***VERY*** confusing too me. I\u0027ve tried altering the values somewhat and played around with different values but short of matching the numbers between the two labs, the Mk2-LC ALWAYS performs better than the MK3-8 and that makes no sense. It has less scientists, stores less data, has a lower science cap and lower science multipliers yet generates more science per day. This is counter-intuitive so I\u0027m seeking clarification.\n\nFYI - I rebuilt the craft in between my changes to the cfg files to insure that I had the correctly loaded values for the craft when testing numbers.\n\ntl;dr summation: SurfaceBonus, ContextBonus, scientistBonus, researchTime, scienceMultiplier, dataStorage and scienceCap interactions don\u0027t seem to make any mathematical sense...\n\nIf anyone has any input I would love to hear it."},{"CreatedByName":"Iodun","CreatedById":148845,"CreatedDateTime":"2015-07-27T02:05:12Z","Content":"I don\u0027t like current OP mechanics of the science lab and also read the forums for some information. The lab is a little more balanced when a life support mod is used, but its still producing too much science compared to the little supply consumption in USI LS. For my personal taste the lab is supposed to just produce a little bit of extra science in the background while running other missions.\n\nLooking at the values in those 2 config files its not really surprising you get such confusing results... imho its a mess and has nothing to do with reasonable variation.\n\n**Values of the current stock science lab**\n\n        MODULE    {        name = ModuleScienceLab        containerModuleIndex = 0        dataStorage = 500        crewsRequired = 1        canResetConnectedModules = True        canResetNearbyModules = True        interactionRange = 5        SurfaceBonus = 0.1        ContextBonus = 0.25        homeworldMultiplier = 0.1        RESOURCE_PROCESS        {            name = ElectricCharge            amount = 10        }    }    MODULE    {        name = ModuleScienceConverter        scientistBonus = 0.25    //Bonus per scientist star - need at least one! So 0.25x - 2.5x         researchTime = 7         //Larger = slower.  Exponential!        scienceMultiplier = 5    //How much science does data turn into?        scienceCap = 500         //How much science can we store before having to transmit?                powerRequirement = 5     //EC/Sec to research        ConverterName = Research        StartActionName = Start Research        StopActionName = Stop Research    }\n\n**Independent parts**\n\n- Experiments -\u003E Data  \n\n    - *Maybe*: Experiment science \\* (1.0 \u002B **SurfaceBonus**) \\* (1.0 \u002B **ContextBonus**)\n    - *Or*: Experiment science \\* (1.0 \u002B **SurfaceBonus** \u002B **ContextBonus**)\n    - **homeworldMultiplier** is also applied here (as a penalty)\n    - =\u003E Imho this part should be kept identical for all labs...\n\n    [\\*]Data -\u003E Science ratio\n\n    - Based on **scienceMultiplier** only\n    - 1 Data =\u003E 5 Science\n    - =\u003E Far too much for my taste...\n    - Essentially this means that you get more than 6 times the science per experiment!\n    - =\u003E Primary cause for the extreme misbalancing...\n\n    [\\*]Data -\u003E Science time constraints\n\n    - Based on **researchTime** **AND** **dataStorage**\n    - (And somehow also on the sum of stars of all scientists in the lab =\u003E **scientistBonus**)\n    - The exact equation seems to be absolutely unknown in this forum...\n    - The stock comment says **researchTime** is an **exponential** modifier!\n    - The stock comment says **Larger** = **slower**!\n    - **dataStorage** actually is part of the equation and influences the processing speed!\n    - =\u003E Most difficult part to tweak...\n    - =\u003E Most important part to balance against Life Support...\n\n**Back to the values in the post above**\n\ndataStorage ***500*** vs.  ***2000*** **-\u003E** ***slower*** vs. ***faster***\n\n researchTime ***5*** vs. ***7*** **-\u003E** ***faster*** vs. ***slower***\n\nThose 2 values have the most influence on the outcome (exponential part of the equation).\n\nMost of the other values also have been changed (to cause absolute confusion), but I think those should be rather secondary (only linear influence).\n\n**Reasonable tweaks and variation between labs**\n\n- Keep **Experiments -\u003E Data** constant for all labs  \n\n    - =\u003E or maybe adapt the bonuses a little to create stationary labs and highly mobile labs\n    - =\u003E stationary labs don\u0027t get much bonus from correct context\n    - =\u003E highly mobile labs are supposed to be moved around to benefit from the higher bonus values\n\n    [\\*]Modify **Data -\u003E Science ratio** a bit with the different labs\n\n    - =\u003E Quality of the lab\n    - maybe numbers between 0.5 and 1.0 (instead of the stock 5.0)\n    - =\u003E more expensive lab =\u003E better hardware =\u003E more science from the same data\n\n    [\\*]Adapt **Data -\u003E Science time constraints** to balance against Life Support mods\n\n    - Larger labs (higher **dataStorage** values) somehow have to be compensated with higher **scienceMultiplier** values\n    - =\u003E Therefore we need some sort of guess about what the equation looks like... :/\n    - Integers are not enough here... 5 -\u003E 6 makes a huuuge difference\n    - Hopefully floats are allowed?"},{"CreatedByName":"rasta013","CreatedById":140002,"CreatedDateTime":"2015-07-27T04:55:28Z","Content":"Well to be perfectly honest, these values were never meant to represent any kind of final version. For that matter, they were values that were far out of whack of each other for the purposes of trying to balance outputs through variations of values. The point I was trying to make was given the explanations for the parameters that are available in the wiki, forums, various cfg files and several different reddit threads they do not match up to the explanations given.\n\nFor instance, the SurfaceBonus parameter is supposed to represent a bonus to the value of the science you receive when conducting research while landed on a body. That is true - to a point but only in so far as the bonus that is applied to the value of the *data* while you are located on the surface. However, if you take the same data and move it to orbit before loading it in the lab you will lose that surface bonus so the parameter does not represent an actual bonus to the *science* but rather to the data value while landed. In a way, this is a bit of an exploit since you can spend the time to load the data (far shorter) then move to orbit to maintain a steady supply of solar power to do the research (far longer) and you ultimately receive the same science total you would if you remained on the surface. The same thing applies to the ContextBonus only in this case it relates to the location of the lab combined with the location of the experiment. If you conduct an experiment on the Mun and then process said results either on the surface or in orbit around the Mun you will have the ContextBonus value applied again to the *data* value received when adding into the lab. The bonus applies to an experiment\u0027s data value so long as you remain in the SOI where you did the experiment. One additional thing to note is that these values are also affected by the bonuses that are already given to an experiment based on location - Kerbin\u003CMun\u003CMinmus\u003Cduna etc=\u0022\u0022 etc=\u0022\u0022 etc.=\u0022\u0022 this=\u0022\u0022 adds=\u0022\u0022 another=\u0022\u0022 later=\u0022\u0022 of=\u0022\u0022 complexity=\u0022\u0022 to=\u0022\u0022 figuring=\u0022\u0022 out=\u0022\u0022 balanced=\u0022\u0022 values=\u0022\u0022 and=\u0022\u0022 how=\u0022\u0022 the=\u0022\u0022 parameters=\u0022\u0022 interrelate.=\u0022\u0022 the=\u0022\u0022 homeworldmultiplier=\u0022\u0022 is=\u0022\u0022 meant=\u0022\u0022 to=\u0022\u0022 function=\u0022\u0022 as=\u0022\u0022 a=\u0022\u0022 penalty;=\u0022\u0022 however,=\u0022\u0022 that=\u0022\u0022 penalty=\u0022\u0022 is=\u0022\u0022 only=\u0022\u0022 applied=\u0022\u0022 if=\u0022\u0022 you=\u0022\u0022 are=\u0022\u0022 landed=\u0022\u0022 on=\u0022\u0022 the=\u0022\u0022 surface=\u0022\u0022 of=\u0022\u0022\u003E\u003C/duna\u003E\n\nOne problem I see is these values are always applied as modifiers to the data value itself and has nothing to do with the actual science return you receive from the lab. This is almost counter-intuitive as it places a higher value on the location of the data processing rather than on the science results you receive for conducting the research. While data from an experiment is the valuable commodity here and that correlates to common sense, where you process the data at normally doesn\u0027t matter at all. If you take your results from the Amazon and process them in Las Vegas it doesn\u0027t matter - it\u0027s the results of the experiment that should make the difference.\n\nAs for returns - well it can be debated whether the returns are too high or not. If you take the standard MPL-LG-2 with its default values, the science return is actually rather slow. While you do receive a large amount of science in return (5x the data value) you will trade off time for receiving that. When playing with a life support mod the time factor becomes an issue and I would always recommend that people play with some version of life support no matter which you choose - I actually prefer TACLS myself. Without some sort of LS mod though, time is of no importance and makes a lab a VERY powerful ally to the science game. I fully understand the exponential factor involved in the ResearchTime parameter - that actually has been the easiest to figure out with a value of 1 equating into ~1 second and it works in an exponential form from there with approximate time values of 1-2-4-16-256-65536 etc. These time values relate to how long it takes to process 1 data into 1 science. The equation is then affected by the total amount of data you have in the lab and also appears to be affected by the maximum amount the lab can hold but I\u0027m not sure about that part. How these pieces work I have not been able to nail down yet but it is one of the critical pieces of information needed to fully flesh out the mathematics behind the process. \n\nScienceRatio is a whole number value only so no fractional decimal forms can be used. As a matter of fact, if you use a decimal value it seems to default to a value of 5 but I have not 100% verified that since finding that whole numbers are the only thing that works - I\u0027ve only toyed with those.\n\nThe end result of all this research into the lab mechanics is intended to be exactly what you mention - a mod containing a variety of labs specialized to do different things in different situations. Mobile labs for fast data processing but very low returns, labs specialized at surface research, very large/heavy labs with slow processing/high returns/huge data storage etc. The biggest issue I\u0027m having though is solving the math behind the interrelation of all the parameters including the data storage values combined with research time as a big hurdle to overcome. In the end, to fully accomplish what I have in mind may take a custom plugin to get past the limitations of stock but I\u0027m hoping that can be avoided for simplicity sake. Ultimately, the math behind all of these relationships will determine whether that is going to be needed or not."},{"CreatedByName":"Iodun","CreatedById":148845,"CreatedDateTime":"2015-07-27T11:16:55Z","Content":"\u003E \n\u003E For instance, the SurfaceBonus parameter is supposed to represent a bonus to the value of the science you receive when conducting research while landed on a body. That is true - to a point but only in so far as the bonus that is applied to the value of the *data* while you are located on the surface. However, if you take the same data and move it to orbit before loading it in the lab you will lose that surface bonus so the parameter does not represent an actual bonus to the *science* but rather to the data value while landed. In a way, this is a bit of an exploit since you can spend the time to load the data (far shorter) then move to orbit to maintain a steady supply of solar power to do the research (far longer) and you ultimately receive the same science total you would if you remained on the surface. The same thing applies to the ContextBonus only in this case it relates to the location of the lab combined with the location of the experiment. If you conduct an experiment on the Mun and then process said results either on the surface or in orbit around the Mun you will have the ContextBonus value applied again to the *data* value received when adding into the lab. The bonus applies to an experiment\u0027s data value so long as you remain in the SOI where you did the experiment. One additional thing to note is that these values are also affected by the bonuses that are already given to an experiment based on location - Kerbin\u003CMun\u003CMinmus\u003Cduna etc=\u0022\u0022 etc=\u0022\u0022 etc.=\u0022\u0022 this=\u0022\u0022 adds=\u0022\u0022 another=\u0022\u0022 later=\u0022\u0022 of=\u0022\u0022 complexity=\u0022\u0022 to=\u0022\u0022 figuring=\u0022\u0022 out=\u0022\u0022 balanced=\u0022\u0022 values=\u0022\u0022 and=\u0022\u0022 how=\u0022\u0022 the=\u0022\u0022 parameters=\u0022\u0022 interrelate.=\u0022\u0022 the=\u0022\u0022 homeworldmultiplier=\u0022\u0022 is=\u0022\u0022 meant=\u0022\u0022 to=\u0022\u0022 function=\u0022\u0022 as=\u0022\u0022 a=\u0022\u0022 penalty;=\u0022\u0022 however,=\u0022\u0022 that=\u0022\u0022 penalty=\u0022\u0022 is=\u0022\u0022 only=\u0022\u0022 applied=\u0022\u0022 if=\u0022\u0022 you=\u0022\u0022 are=\u0022\u0022 landed=\u0022\u0022 on=\u0022\u0022 the=\u0022\u0022 surface=\u0022\u0022 of=\u0022\u0022\u003E\u003C/duna\u003E\n\u003E One problem I see is these values are always applied as modifiers to the data value itself and has nothing to do with the actual science return you receive from the lab. This is almost counter-intuitive as it places a higher value on the location of the data processing rather than on the science results you receive for conducting the research. While data from an experiment is the valuable commodity here and that correlates to common sense, where you process the data at normally doesn\u0027t matter at all. If you take your results from the Amazon and process them in Las Vegas it doesn\u0027t matter - it\u0027s the results of the experiment that should make the difference.\n\nThats true... after all it is a bit strange that the location of the lab is important when the data is generated. I guess the devs thought it would be too simple without this mechanics, but implementing this modifiers for the **data -\u003E science** part instead would have introduced too much complexity. This would mean that the science you receive always changes when the lab is moved and that you have to keep track of all experiments currently researched in the lab. The player then would also want to know which experiments are still processing to find out when he can safely move the lab. That requires quite some implementation effort on the backend side and also some new UI elements. Instead the devs went the easy way and simply said they check the location and bonuses when the data is generated... after that step there is only that generic bunch of data left and the lab does not care anymore where exactly it came from.\n\nSo I guess you can either remove that part completely by setting the bonuses to zero to make it more realistic, but then you have less variation for your mod. Or you stick to the system the devs implemented... or you implement your own one that continuously tracks the experiments to be researched and the location of the lab.\n\n\u003E \n\u003E As for returns - well it can be debated whether the returns are too high or not. If you take the standard MPL-LG-2 with its default values, the science return is actually rather slow. While you do receive a large amount of science in return (5x the data value) you will trade off time for receiving that. When playing with a life support mod the time factor becomes an issue and I would always recommend that people play with some version of life support no matter which you choose - I actually prefer TACLS myself. Without some sort of LS mod though, time is of no importance and makes a lab a VERY powerful ally to the science game.\n\nFrom what I know TAC LS consumes ressources much quicker compared to USI LS. So with TAC LS the science return could and should be higher to be balanced correctly. Maybe the 5x modifier actually makes sense there, I don\u0027t know. I just did some simple calculations regarding USI LS and noticed you can keep those 2 scientist alive forever with just a few tons of supplies and can abuse the time warp again. With only one inline module of supplies you can run your lab a few hundred days and produce a few thousand science. Also keep in mind that if the data bonus modifiers are removed you can keep your lab in kerbin orbit without a problem and easily send lots of supplies or all that stuff TAC uses. Then there is not much anymore that keeps you from time warping until the tech the is unlocked.\n\n\u003E \n\u003E I fully understand the exponential factor involved in the ResearchTime parameter - that actually has been the easiest to figure out with a value of 1 equating into ~1 second and it works in an exponential form from there with approximate time values of 1-2-4-16-256-65536 etc. These time values relate to how long it takes to process 1 data into 1 science. The equation is then affected by the total amount of data you have in the lab and also appears to be affected by the maximum amount the lab can hold but I\u0027m not sure about that part. How these pieces work I have not been able to nail down yet but it is one of the critical pieces of information needed to fully flesh out the mathematics behind the process.\n\u003E ScienceRatio is a whole number value only so no fractional decimal forms can be used. As a matter of fact, if you use a decimal value it seems to default to a value of 5 but I have not 100% verified that since finding that whole numbers are the only thing that works - I\u0027ve only toyed with those.\n\nI fear the restriction to integer values actually is a huge problem. There is no way to make one lab a little bit faster or slower. If you lower the science value you instantly have a super speed lab and you cant easily compensated for that with one of the other modifiers that only have linear impact on the speed. The current amount of data stored in the lab is also part of the equation and changing the maximum amount of data that can be stored indirectly influences that value if I understand it correctly. So if you create 2 labs and the only difference is that one lab has a maximum data storage of 1000 instead of 500 those labs would be equally fast if you fill them both with only 500 data. But the lab with the larger data storage can become much quicker if you actually fill it up with more than 500 data and reaches the highest speed with 1000 data.\n\n\u003E \n\u003E The end result of all this research into the lab mechanics is intended to be exactly what you mention - a mod containing a variety of labs specialized to do different things in different situations. Mobile labs for fast data processing but very low returns, labs specialized at surface research, very large/heavy labs with slow processing/high returns/huge data storage etc. The biggest issue I\u0027m having though is solving the math behind the interrelation of all the parameters including the data storage values combined with research time as a big hurdle to overcome. In the end, to fully accomplish what I have in mind may take a custom plugin to get past the limitations of stock but I\u0027m hoping that can be avoided for simplicity sake. Ultimately, the math behind all of these relationships will determine whether that is going to be needed or not.\n\nThat sounds awesome and I am really looking forward to your plugin/mod. Sorry I wasn\u0027t able to help with the equation, but from what we can currently see it really does not look too good. An exponential modifier that only allows integers is just rather useless. The only thing that could be tried is to keep all numbers for 2 testing labs the same and increase the **researchTime** modifier for one lab by 1. This makes the adapted lab much slower than the usual one. Now the **dataStorage** can be increased step by step until the speed of the new lab is the same as the speed of the usual one again (for maximum amount of data stored). This is then more or less the implementation enforced value that you have to accept if you dont want to create your own plugin. With a bit of luck you get the same speed with a few thousand data storage capacity. With bad luck this value has to be much greater and is not useful anymore.\n\n**EDIT:**\n\nInstead of just talking I decided to actually do something useful... ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\n- **researchTime \u002B 1** leads to **1/10** of the research speed\n- **dataStorage \\* 2** leads to **double** the research speed\n\n    scienceMultiplier = 1    researchTime = 6        dataStorage = 500            @100% =\u003E 28.3500 sci/day    researchTime = 7        dataStorage = 500            @100% =\u003E 2.8350 sci/day        dataStorage = 1000            @50%  =\u003E 2.8350 sci/day            @100% =\u003E 5.6700 sci/day        dataStorage = 2000            @25%  =\u003E 2.8350 sci/day            @50%  =\u003E 5.6700 sci/day            @100% =\u003E 11.3400 sci/day    researchTime = 8        dataStorage = 500            @100% =\u003E 0.2835 sci/day        dataStorage = 1000            @100% =\u003E 0.5670 sci/day        dataStorage = 2000            @100% =\u003E 1.1340 sci/day        dataStorage = 4000            @100% =\u003E 2.2680 sci/day    researchTime = 9        dataStorage = 500            @100% =\u003E 0.0284 sci/day\n\n**EDIT2:**\n\nI investigated this further by changing only one variable and keeping the others constant.\n\nIm quite sure this is the correct equation:\n\nsci/day = dataStored \\* scienceMultiplier \\* sumScientistStars \\* scientistBonus \\* 1/10^researchTime \\* 22680\n\nExample:\n\ndataStored = 500\n\nscienceMultiplier = 2\n\nsumScientistStars = 5 (one scientist with 5 stars in the lab)\n\nscientistBonus = 0.25\n\nresearchTime = 7 (default)\n\n500 \\* 2 \\* (5 \\* 0.25) \\* 1/10000000 \\* 22680\n\n= 1000 \\* 1.25 \\* 0.002268\n\n= 1.25 \\* 2.268\n\n= 2.835 sci/day\n\n**Edited \u003Ctime datetime=\u00222015-07-27T14:34:06Z\u0022 title=\u002207/27/2015 02:34  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 27, 2015\u003C/time\u003E by Iodun**"}]}