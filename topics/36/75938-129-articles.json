{"TopicId":75938,"ForumId":36,"TopicTitle":"[1.0.x] [V1.9f] Kerbal Foundries wheels, anti-grav repulsors and tracks","CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-06-25T17:24:04Z","PageNum":129,"Articles":[{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-07-13T15:02:34Z","Content":"\n\u003Cp\u003EI guess Gaalidas used \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/84102-PARTS-PLUGIN-1-0-x-V1-8G-Kerbal-Foundries-wheels-anti-grav-repulsors-and-tracks?p=2073404\u0026amp;viewfull=1#post2073404\u0022 rel=\u0022external nofollow\u0022\u003Emy example\u003C/a\u003E as a basis.\u003C/p\u003E\u003Cp\u003EI don\u0027t know what he coded there but I guess he didn\u0027t include that:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic void Start() {\u003Cbr\u003E    RenderingManager.AddToPostDrawQueue(0, new Callback (drawGUI));\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis should make sure, that the drawGUI() method \u003Cspan style=\u0022font-size:8px;\u0022\u003E(I think he renamed it to InitGUIElements())\u003C/span\u003E runs in the context of the GUI thread.\u003C/p\u003E\u003Cp\u003EBut seriously the current three GUI systems just suck. Maybe you should wait for KSP 1.1 and it\u0027s new GUI.\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-07-13T15:30:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022*Aqua*\u0022 data-cite=\u0022*Aqua*\u0022\u003E\u003Cdiv\u003EI guess Gaalidas used \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/84102-PARTS-PLUGIN-1-0-x-V1-8G-Kerbal-Foundries-wheels-anti-grav-repulsors-and-tracks?p=2073404\u0026amp;viewfull=1#post2073404\u0022 rel=\u0022external nofollow\u0022\u003Emy example\u003C/a\u003E as a basis.\u003Cp\u003EI don\u0027t know what he coded there but I guess he didn\u0027t include that:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic void Start() {\u003Cbr\u003E    RenderingManager.AddToPostDrawQueue(0, new Callback (drawGUI));\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis should make sure, that the drawGUI() method \u003Cspan style=\u0022font-size:8px;\u0022\u003E(I think he renamed it to InitGUIElements())\u003C/span\u003E runs in the context of the GUI thread.\u003C/p\u003E\u003Cp\u003EBut seriously the current three GUI systems just suck. Maybe you should wait for KSP 1.1 and it\u0027s new GUI.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI started with your example but, over the course of 5 or 6 iterations, I slowly migrated over to several other attempts to implement this stuff. In the end, everything failed to function properly.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-13T15:52:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022*Aqua*\u0022 data-cite=\u0022*Aqua*\u0022\u003E\u003Cdiv\u003EI guess Gaalidas used \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/84102-PARTS-PLUGIN-1-0-x-V1-8G-Kerbal-Foundries-wheels-anti-grav-repulsors-and-tracks?p=2073404\u0026amp;viewfull=1#post2073404\u0022 rel=\u0022external nofollow\u0022\u003Emy example\u003C/a\u003E as a basis.\u003Cp\u003EI don\u0027t know what he coded there but I guess he didn\u0027t include that:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic void Start() {\u003Cbr\u003E    RenderingManager.AddToPostDrawQueue(0, new Callback (drawGUI));\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis should make sure, that the drawGUI() method \u003Cspan style=\u0022font-size:8px;\u0022\u003E(I think he renamed it to InitGUIElements())\u003C/span\u003E runs in the context of the GUI thread.\u003C/p\u003E\u003Cp\u003EBut seriously the current three GUI systems just suck. Maybe you should wait for KSP 1.1 and it\u0027s new GUI.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, I was just poking through your original posts. I\u0027m trying to get the app launcher button working correctly first, then I\u0027ll look at the GUI stuff.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaalidas\u0022 data-cite=\u0022Gaalidas\u0022\u003E\u003Cdiv\u003EI started with your example but, over the course of 5 or 6 iterations, I slowly migrated over to several other attempts to implement this stuff. In the end, everything failed to function properly.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s not far off. I can get the app launcher button up, but it\u0027s turned all the other buttons to the KF logo and doesn\u0027t have one itself, just a blank square... Though progress is being made!\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-07-13T16:17:04Z","Content":"\n\u003Cp\u003E\u0022settingsRect = GUI.Window(GUI_ID, settingsRect, KFGUI, string.Empty);\u0022 is what I copied directly from another mod (changing the method names to match what I called them) and I put it under the same method that they used in their mod. The mods I used as templates are BDArmory and PlanetShine. As for the \u0022outside OnGUI\u0022 business, I wasn\u0027t aware I was trying to do that at all. I\u0027m simply copying what I\u0027ve seen other mods do, which don\u0027t produce any errors when used. I\u0027m not trying to do anything that hasn\u0027t been done before. That\u0027s why this is so frustrating.\u003C/p\u003E\u003Cp\u003EKeep in mind, the state of the code right now is not what I would have liked it to be in. It\u0027s been messed with a lot while trying to figure out what is supposed to happen when certain method calls are made in a certain format. I\u0027m getting conflicting information from the other mods that seem to do the same thing in many different ways.\u003C/p\u003E\u003Cp\u003EWhat confuses me about what you\u0027re getting in the logs is that I never got any errors related to \u0022OnStart\u0022 in the first place. All my errors were related to \u0022OnGUI\u0022 and the complaint about trying to do GUI-related things outside of that method. Overall, I\u0027m tired of struggling with the cruddy GUI systems in KSP.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003EThanks, I was just poking through your original posts. I\u0027m trying to get the app launcher button working correctly first, then I\u0027ll look at the GUI stuff.\u003Cp\u003EIt\u0027s not far off. I can get the app launcher button up, but it\u0027s turned all the other buttons to the KF logo and doesn\u0027t have one itself, just a blank square... Though progress is being made!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s funky. So, we can change the icons of other mods eh? Could be useful if we ever want to hijack another mod.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-13T18:33:55Z","Content":"\n\u003Cp\u003EYou really did get in a pickle between the blizzy and stock stuff, didn\u0027t you! I\u0027ve almost got it working. Buttons are fixed - as Aqua pointed out, variables that want to be accessed by the gui stuff need to be declared static or something else I can\u0027t remember.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m just going to put this here \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/uNrDGuH.png\u0022 alt=\u0022uNrDGuH.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ESave/load of the config nodes seems to work, so you got that bit spot on. Only thing is it doesn\u0027t reset the colour of the icon when the save button is used, but I\u0027ll hand it over to you for tinkering now it\u0027s actually working.\u003C/p\u003E\u003Cp\u003EAlso. someone please rep *Aqua* for UI assistance. It won\u0027t let me again!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-13T18:41:40Z\u0022 title=\u002207/13/2015 06:41  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 13, 2015\u003C/time\u003E by lo-fi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-07-13T19:36:15Z","Content":"\n\u003Cp\u003EI\u0027ll see about all of that when I get home from class in a few hours. Looks great. I knew someone here could fix my blunders. By the way, the variables were being read perfectly fine from the other modules before I screwed with he GUI stuff, so that at least will be okay. I\u0027ll clean things up and get the GUI to fit the content within it. The icon thing is a strange one, but should be easy to fix now that the rest of it is fixed.\u003C/p\u003E\u003Cp\u003EThe icon is pretty basic. If we have a mod logo, I could look into integrating it. I also need to see if filter extensions can be set to load an icon from outside its own folder structure. If so, I can add a patch (there\u0027s MM again) to add KF to a dedicated editor category like I have on my local install.\u003C/p\u003E\u003Cp\u003EEDIT: Okay, looks a lot better than it did with my attempts. Still having a spammed NullRef on the \u0022OnGUI\u0022 method though. Gonna look at some other mods to see if there\u0027s anything we\u0027re missing, but either way we need to squash that.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-13T21:49:54Z\u0022 title=\u002207/13/2015 09:49  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 13, 2015\u003C/time\u003E by Gaalidas\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-13T21:53:44Z","Content":"\n\u003Cp\u003ECool, it just wants tweaking now. I\u0027m now working on the repulsors to get the status and energy drain sorted. Dust stuff needs tweaking, and I still can\u0027t work out why the dust is white anywhere on Kerbin when using the biome defs.\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-07-13T22:12:19Z","Content":"\n\u003Cp\u003EYour computer just has issues with the biome defs I guess. I can\u0027t figure it out really, since it works on my end.\u003C/p\u003E\u003Cp\u003ESo, I\u0027ve tried several different options but still can\u0027t seem to squash the \u0022NullReferenceException: Object reference not set to an instance of an object KerbalFoundries.KFConfigManager.OnGUI ()\u0022 spam I\u0027m getting. There is absolutely nothing missing that is present in any other mod which uses OnGUI, though I have noticed some of the mods out there simply not having an OnGUI at all, which is really confusing me since it appears you \u003Cem\u003Emust\u003C/em\u003E have it in there somewhere for this stuff to work at all. I reduced the height of the window to 250 which feels better. Couldn\u0027t figure out the strange mathematics required to scale the height to the content, so we\u0027ll have to wing it as we add more options.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003EAlso. someone please rep *Aqua* for UI assistance. It won\u0027t let me again!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETaken care of.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-07-13T22:33:16Z","Content":"\n\u003Cp\u003EThanks for the rep! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe OnGUI method is required when you use Unity\u0027s GUI system. But KSP has additionally \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Etwo\u003C/span\u003E other GUIs systems (something selfmade for the main menu I believe and EZGUI)! I guess that\u0027s the reason why you are confused.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003ECouldn\u0027t figure out the strange mathematics required to scale the height to the content\u003C/div\u003E\u003C/blockquote\u003EIt should autosize when you don\u0027t specify width \u0026amp; height.\u003Cp\u003EConcerning the NulRef problem there must be something different between your\u0027s and lo-fi\u0027s dev versions.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-13T23:27:47Z","Content":"\n\u003Cp\u003EGrab the latest, I broke, then fixed then broke as usual.\u003C/p\u003E\u003Cp\u003EBiome colors are 100% broken on Kerbin. Fresh install of 1.04, dust is white wherever I go. My KF \u003Cem\u003Eis\u003C/em\u003E what\u0027s in Git, as it pulls it straight from GameData. Used to turn brown the moment I drove off the side of the runway. Now it\u0027s just white everywhere:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/DeRHQxa.png\u0022 alt=\u0022DeRHQxa.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ETo prove my point, I set:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EDustColorDefinitions\u003Cbr\u003E{\u003Cbr\u003E    DefaultColor = 0.75,0.75,0.75,0.007\u003Cbr\u003E    BodyDustColors\u003Cbr\u003E    {\u003Cbr\u003E        Item\u003Cbr\u003E        {\u003Cbr\u003E            Name = Kerbin\u003Cbr\u003E            [B]DefaultColor = 0.75,0.75,0.75,1.0[/B]\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhich gives:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/TTwRaPl.png\u0022 alt=\u0022TTwRaPl.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EIn other words, it\u0027s not marrying the biome name up with what\u0027s named in the config and it\u0027s defaulting. Which is what we were batting back and fore before I went all leftfield and started messing with the camera. Duna is fine, just for reference:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/FMiyXbP.png\u0022 alt=\u0022FMiyXbP.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI hard coded the plugin to temporarily ignore the camera, just to make 100% sure it\u0027s not getting data from that. Kerbin, we have a problem.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-13T23:38:52Z\u0022 title=\u002207/13/2015 11:38  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 13, 2015\u003C/time\u003E by lo-fi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-07-14T00:57:36Z","Content":"\n\u003Cp\u003EWeird. For me it\u0027s working. In the left picture you can even see different colors (white on landing strip, green/brown on shore biome).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/4yrcuPE.jpg\u0022 alt=\u00224yrcuPE.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EI drove a bit here and there and IMO it looks like it\u0027s working. Or did you change something in your local install in the last half hour?\u003C/p\u003E\u003Cp\u003EEdit: Is there something for me to do?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-14T01:17:09Z\u0022 title=\u002207/14/2015 01:17  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 14, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-07-14T02:01:37Z","Content":"\n\u003Cp\u003ESee lo-fi? It works fine for the rest of us. I\u0027m totally baffled as to why it won\u0027t work for you. There is simply no good reason as to why it would fail. My only idea would be if you were using some sort of custom biome mod, but I doubt you are. The only other idea is that something has gone wonky with how you\u0027re calling them up in the dust init method. However, if all you did was uncomment the previously working line of code which allowed that system to work, then I really don\u0027t get it. You\u0027d need to ask xEvilReaperx to look at it, since he wrote most of the stuff that sits in the background.\u003C/p\u003E\u003Cp\u003EAlso, what\u0027s up with the super huge particles in the desert region? You messing with different effect models? I am glad to see that Duna works, I never tried any of the other planets.\u003C/p\u003E\u003Cp\u003EThe trouble with not defining a height and width is that all the Rect() calls require a height and width to be inserted into them.\u003C/p\u003E\u003Cp\u003EThe question now remains: Why is OnGUI spamming NullRefs from the moment the start scene selected is reached, all the way until the game is shut down?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at KerbalFoundries.KFConfigManager.OnGUI () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[COLOR=#ff0000]void[/COLOR] [COLOR=#191970][B]OnGUI[/B][/COLOR]()\u003Cbr\u003E{\u003Cbr\u003E    [COLOR=#0000ff][B]if[/B][/COLOR] ([I]isGUIEnabled[/I])\u003Cbr\u003E    {\u003Cbr\u003E        [COLOR=#191970][B]KFGUI[/B][/COLOR]([I]GUI_ID[/I]);\u003Cbr\u003E        [I]appButton[/I].[COLOR=#191970][B]SetTexture[/B][/COLOR]([I]appTextureColor[/I]);\u003Cbr\u003E    }\u003Cbr\u003E    [COLOR=#0000ff][B]else[/B][/COLOR]\u003Cbr\u003E        [I]appButton[/I].[COLOR=#191970][B]SetTexture[/B][/COLOR]([I]appTextureGrey[/I]);\u003Cbr\u003E    [COLOR=#000080]return[/COLOR];\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-14T02:17:15Z\u0022 title=\u002207/14/2015 02:17  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 14, 2015\u003C/time\u003E by Gaalidas\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mekan1k","CreatedById":48750,"CreatedDateTime":"2015-07-14T05:17:00Z","Content":"\n\u003Cp\u003EAny Idea when we, the humble players, may have a version to play around with?\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-14T08:03:26Z","Content":"\n\u003Cp\u003ESoon\u003Csup\u003ETM\u003C/sup\u003E(ish). Still a lot to do finishing parts and balancing config, but the list is shrinking!\u003C/p\u003E\u003Cp\u003EThat\u0027s very odd with the dust colours. Be interesting to see what happens when it\u0027s released into the wild!\u003C/p\u003E\u003Cp\u003ELooks like you\u0027re using an out of date commit, Gaalidas. Those appbutton.settexture lines are the culprits. They snuck in while I wasn\u0027t looking and since got fixed. Naughty things...\u003C/p\u003E\u003Cp\u003EI guess it depends how much of a challenge you want, Aqua! I\u0027m afraid many areas of the code aren\u0027t very well commented, so it may be a little tricky right off the bat. Most of the core stuff is ready for testing, with the most critical bits being KFModuleWheel, KFWheel, KFRepulsor, DustFX. A little code review probably wouldn\u0027t hurt! If you would like a real challenge, have a peek at the hitch code and see if you have any bright ideas for reload/time acceleration problem! I had an idea that we could force docking when time acceleration is started, but I\u0027m not sure this would be possible when scene changing or save/reloading. It all seemed a little flimsy! It will be a total mess from where I was messing with trying to force things back together.\u003C/p\u003E\u003Cp\u003EI can\u0027t think of any other features we\u0027ve talked about but not got round to implementing... Unless! Was musing about some code to figure out vessel weight and wheel loading to be able to auto set the spring rate and braking force. Not critical, but nice to have. Oh, also, accessing the wheel collider slip properties to allow a sound to be played when they\u0027re slipping. Could also tie in some extra dust.\u003C/p\u003E\u003Cp\u003EA few bits to play with, but open to ideas \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-07-14T15:07:23Z","Content":"\n\u003Cp\u003ECode reviewing is a good idea! I see quite a lot of weird code. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI created KFPersistenceManager which will now handle all reads \u0026amp; writes from \u0026amp; to the config files. That means KFConfigManager now only handles the GUI and therefore is renamed to KFGUIManager. I also reworked all of the dust color definition stuff. It should be now much more easiler to handle. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWorks great!\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/9TJAZ3b.jpg\u0022 alt=\u00229TJAZ3b.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003E@lo-fi\u003C/p\u003E\u003Cp\u003EPlease give me access to the KF_plugin repo so I can commit my changes.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-14T15:09:40Z\u0022 title=\u002207/14/2015 03:09  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 14, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-14T15:22:58Z","Content":"\n\u003Cp\u003EMarvelous! Done \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ENot surprised, it\u0027s all just sort of fallen out of my head and been beaten into shape until VS stopped bleating \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-07-14T15:34:36Z","Content":"\n\u003Cp\u003EYou guys really have some neat stuff on the horizon, Definitely looking forward to what\u0027s ahead.\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-07-14T16:27:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022*Aqua*\u0022 data-cite=\u0022*Aqua*\u0022\u003E\u003Cdiv\u003ECode reviewing is a good idea! I see quite a lot of weird code. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003Cp\u003EI created KFPersistenceManager which will now handle all reads \u0026amp; writes from \u0026amp; to the config files. That means KFConfigManager now only handles the GUI and therefore is renamed to KFGUIManager. I also reworked all of the dust color definition stuff. It should be now much more easiler to handle. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWorks great!\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/9TJAZ3b.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/9TJAZ3b.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003E@lo-fi\u003C/p\u003E\u003Cp\u003EPlease give me access to the KF_plugin repo so I can commit my changes.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDoes this mean the way we\u0027re calling up the globals needs to be changed? Currently we call them up using \u0022KFConfigManager.KFConfig.variable_name\u0022 and what does this mean for the biome color configs? are there any changes to the format of that file? To be honest, this morning I was considering scrapping the current definitions in favor some something simpler such as the setup that PlanetShine and/or DistantObjects uses, where you simply have a bunch of nodes all named something like \u0022BiomeDustColor\u0022 and then the \u0022name\u0022 parameter under that node would be the planet name or the biome name and the \u0022color\u0022 parameter would contain the color, obviously. This would eliminate the complicated curly brace setup of the current def file. I\u0027m unsure which would be more efficient in the long run though.\u003C/p\u003E\u003Cp\u003EI must say, however, that seeing the wheels producing different colors based on what they\u0027re colliding with is awesome. That\u0027s one thing that the camera color sampler isn\u0027t able to do yet, unless we can find a way to sample a small area under each wheel without killing performance.\u003C/p\u003E\u003Cp\u003EWhich brings me to another thought: we need to look at making sure the camera isn\u0027t still sampling when the craft gains air or takes off from the planet surface. Also, on crafts with both wheels and repulsors, we\u0027re probably redundantly setting the color average way too much. If we could do all the color sampling through the class that handles the camera itself, we might increase performance a bit. Sure, if we end up sampling per-wheel or something, it will have to be moved back into the dust class, but if we\u0027re doing it per-craft then I\u0027d think the vessel modules would be a better place to do most of the non-part-specific setup for these effects.\u003C/p\u003E\u003Cp\u003EAlso, lo-fi... you said that Duna was working okay with the biome definitions, but did you try moving into another biome on Duna? If you enter the polar regions, for example, it should change to a snowy color to match. It\u0027s possible that none of the biome defs were working for you, only the planetary defaults. Kerbin defaults to a grey dust (the default usually corresponds to whatever dust you want when colliding with something other than the surface of the planet since all the planets are covered with biomes I believe) and Duna defaults to a more reddish tone to match the layer of dust that would likely settle on every open surface on the planet.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-14T16:38:33Z\u0022 title=\u002207/14/2015 04:38  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 14, 2015\u003C/time\u003E by Gaalidas\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-07-14T16:37:41Z","Content":"\n\u003Cp\u003EThx for access, lo-fi! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/GFgCulh.png\u0022 alt=\u0022GFgCulh.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI guess you could call the GUI almost finished. But only the first toggle works. For the others I don\u0027t know where to hook into yet.\u003C/p\u003E\u003Cp\u003EAlso the app button isn\u0027t displayed in the VAB yet.\u003C/p\u003E\u003Cp\u003E@Gaalidas\u003C/p\u003E\u003Cp\u003ELook into the commits I pushed a few minutes ago. I literally remade most of the dust color stuff. I hope it\u0027s more easier to understand and use.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EI forgot to push the new DustColors.cfg. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif\u0022 alt=\u0022:blush:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-14T16:41:00Z\u0022 title=\u002207/14/2015 04:41  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 14, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-07-14T16:46:08Z","Content":"\n\u003Cp\u003EBy the way, I heard back from the FilterExtension guy, and I can actually provide an icon for that mod in our Assets folder and, assuming it\u0027s a uniquely named icon, I can assign it by name only in a filter extension config which I can also simply stick into our Parts folder. I\u0027m going to rework my config i created a while back and upload the files. This means that, for users of Filter Extensions, there will be a dedicated category in the editors for KF-related parts, along with subcategories for the various part types (wheels, utilities, structural, pods, etc. if defined in the part configs). No hard dependencies either, just available if the other mod is present.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-14T16:47:50Z","Content":"\n\u003Cp\u003ELooks great! The camera toggle does nothing just yet - the state needs to be picked up by the vessel module and dustfx module. The orientation marker bool gets picked up by the orientation marker module. Just reads the bool and figures out what to do.\u003C/p\u003E\u003Cp\u003EActually, no I didn\u0027t go to the poles on Duna. Will do later. I checked that the load is successful, have up to date MM, only other thing I\u0027m running is the dev helper and a couple of parts. Very odd indeed. I\u0027ll have another play later.\u003C/p\u003E\u003Cp\u003EThanks V8Jester. We\u0027ll get there eventually!\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-07-14T16:47:55Z","Content":"\n\u003Cp\u003Eas for the config stuff, you don\u0027t need to hook into anything specific right now. All you need to do is set them to toggle the variables that I was previously referencing in my old GUI attempt. I named them internally the same as what\u0027s in the KFGlobals.cfg in the KF root folder.\u003C/p\u003E\u003Cp\u003EI run the dev helper too. I love being able to skip the main menu, yet still have the main menu initialized for a moment so that mods which start at the main menu still function correctly. If I was still a user of Load On Demand, that would have totally fixed the incompatibility between the two mods.\u003C/p\u003E\u003Cp\u003EOh, and back to the GUI stuff now... I committed a change last night that told the icon to only load in the space center scene. If that\u0027s what you started with, then that would explain it. I was trying to limit the number of odd problems I might have which would cause the spammed nullrefs by limiting where the addon would be initialized. It still failed for me but, theoretically, if you have it fixed now, you could re-enable every-scene initialization from the top of the class in the [KSPAddon] entry. That should Allow it in the VAB/SPH and the flight scene. What I am unsure of is if the modules, while actively running, would respond to changes in those configs.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-14T16:53:38Z\u0022 title=\u002207/14/2015 04:53  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 14, 2015\u003C/time\u003E by Gaalidas\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-07-14T16:48:34Z","Content":"\n\u003Cp\u003EKIS and IR adds subcategories without the help of Filter Extensions. Maybe we should do that too.\u003C/p\u003E\u003Cp\u003EEdit: Ninja\u0027d. You guys really post too fast for me. ^^\u003C/p\u003E\u003Cp\u003E@Gaalidas\u003C/p\u003E\u003Cp\u003ESo far the GUI only changes the global variables. As it should.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-14T16:52:47Z\u0022 title=\u002207/14/2015 04:52  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 14, 2015\u003C/time\u003E by *Aqua*\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-14T16:57:51Z","Content":"\n\u003Cp\u003EHehe! Ninja! I really need to start bashing the configs into shape so we can release this stuff at some point..\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-07-14T17:08:53Z","Content":"\n\u003Cp\u003EThose other mods may do that, but that has been known to conflict with users of Filter Extensions, which I find to be immensely helpful in my craft editing sessions. Also, that requires a bunch of new coding to make it happen, whereas Filter Extensions has already done the hard work for us. Either way, I\u0027m going to provide the config and icons because even if we do create our own category code, if someone is using the other mod, that category may not show up and thus will need a config for it to work right.\u003C/p\u003E\u003Cp\u003EBy the way, Aqua, if you\u0027re going to change file names and stuff, updating the project file to match the new structure would be awesome. I usually just use Winmerge to merge the changes to just that area of the project file, so that I don\u0027t mess the rest of you up with my differing local paths for reference DLLs and stuff.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-14T17:11:48Z\u0022 title=\u002207/14/2015 05:11  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 14, 2015\u003C/time\u003E by Gaalidas\u003C/strong\u003E\n\u003C/span\u003E\n"}]}