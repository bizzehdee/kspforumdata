{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":40,"Articles":[{"CreatedByName":"Dmitrik","CreatedById":143725,"CreatedDateTime":"2015-05-11T14:45:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EI think we would need to steal some code from mechjeb/engineer for that \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIs it possible to get all that directly from engineer, without stealing code? I understand - it\u0060s unpleasant to be dependant on others plugins, but it will save so much time.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-11T16:03:27Z\u0022 title=\u002205/11/2015 04:03  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 11, 2015\u003C/time\u003E by Dmitrik\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"I_KILL_HORSES","CreatedById":143023,"CreatedDateTime":"2015-05-11T15:13:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003ELooks like you can just replace \u0022numdisp\u0022 with \u0022lc\u0022? \u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI could kiss you! Thank you so much for taking your time with my problem.\u003C/p\u003E\u003Cp\u003EEdit: deleted bad code.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-11T17:02:24Z\u0022 title=\u002205/11/2015 05:02  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 11, 2015\u003C/time\u003E by I_KILL_HORSES\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2015-05-11T15:34:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dmitrik\u0022 data-cite=\u0022Dmitrik\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIs it possible to get all that directly from engineer, without stealing code? I understand - it\u0060s unpleasant to be dependant on others plugins, but it will save so much time.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENa I try to avoid that. It\u0027s hard enough trying to debug my own code and people\u0027s hardware problems over the intarwebs. If you want to do that you are more than welcome to fork the code yourself.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022I_KILL_HORSES\u0022 data-cite=\u0022I_KILL_HORSES\u0022\u003E\u003Cdiv\u003EI could kiss you! Thank you so much for taking your time with my problem.\u003Cp\u003EFor anyone else who wants the same format as me, this results in a different problem. I will give an example.\u003C/p\u003E\u003Cp\u003ESay that we want to print VData.AP in meters. We then type this:\u003C/p\u003E\u003Cp\u003E\u003Cem\u003EprintNumLED(0, (long)(VData.AP),\u0027 \u0027, DEC)\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EWith this code, the problem is that when for example AP is 1000 meters, the display will show 00001000, making it a little less pleasing to my eyes then just 1000. For the display to not show zeroes, but blank spaces instead we type:\u003C/p\u003E\u003Cp\u003E\u003Cem\u003EprintNumLED(0, (long)(VData.AP),\u0027 \u0027,0);\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EThis puts us back to square one, where the first digit of the display is left blank, permanent. My solution to these problems is to combine the two different formats.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E if (VData.AP\u0026lt;10000000)\u003Cbr\u003E    {printNumLED(0, (long)(VData.AP), \u0027 \u0027 );\u003Cbr\u003E      }\u003Cbr\u003E    else\u003Cbr\u003E      {printNumLED(0, (long)(VData.AP),\u0027 \u0027, DEC);}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m pretty sure you should be using the new function she sent you, why are you still using the original one? Try \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EprintNumLEDnew(0, (long)(VData.AP), \u0027 \u0027, 0, DEC)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"I_KILL_HORSES","CreatedById":143023,"CreatedDateTime":"2015-05-11T16:39:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027m pretty sure you should be using the new function she sent you, why are you still using the original one? Try \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EprintNumLEDnew(0, (long)(VData.AP), \u0027 \u0027, 0, DEC)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, this is embarrasing...\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-05-12T10:57:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dmitrik\u0022 data-cite=\u0022Dmitrik\u0022\u003E\u003Cdiv\u003E2zitronen: Hi! your plugin is awesome. I\u0060m doing my own hardware controller too, and looks like you saved a ton of my time. I would like to make a powered landing helper, that would show me when it\u0060s time to start suicide burn. And take-off helper, that wil show me how far I\u0060m from terminal velocity. For those I need a TWR, or even better - current thrust and mass of a vessel. Is it possible to get that kind of data through your plugin?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI did some coding on that in my controller, in the thread linked below. Caveat is that you have to enter TWR manually. I guess you\u0027ll need the drag coeffcient of your vessel as well, as terminal velocity no longer can be simply approximated in 1.x. I will get back to look at it once examinations start.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2015-05-12T15:21:27Z","Content":"\n\u003Cp\u003EI guess you could also make a function that forces say 10% throttle for a second and measure the acceleration then multiply by 10 to get your TWR.\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-05-16T07:57:29Z","Content":"\n\u003Cp\u003EI think this is the best place to ask these things: How robust is the signal from a CD4021? I want to make a separate unit for my joystick setup, and have found an old VGA cable and two connectors. This gives 13 pins to connect, so I am a bit limited. The analog signals will naturally get a line each, but my ideal setup will include more digital lines than available.\u003C/p\u003E\u003Cp\u003EThe natural solution is a shift-in IC, but the signal will have to travel about a meter and across two vga connectors, which is bound to introduce a bit noise. Is this noise enough to disturb the signal?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-17T06:40:24Z\u0022 title=\u002205/17/2015 06:40  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 17, 2015\u003C/time\u003E by Freshmeat\u003C/strong\u003E\n\u003Cbr\u003EConfused the shift-out and shift-in IC\u0026#039;s. Doh.\n\u003C/span\u003E\n"},{"CreatedByName":"AmeliaEatyaheart","CreatedById":115681,"CreatedDateTime":"2015-05-20T02:35:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022I_KILL_HORSES\u0022 data-cite=\u0022I_KILL_HORSES\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003EI have of course asked Amelia for help, but due to time difference our \u003C/span\u003Ecorrespondence is pretty slow. Anyone here who can help me with how and where to declare \u0027numdisp\u0027?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ereplace \u0027numdisp\u0027 with \u0027lc\u0027 in your code - it\u0027s just the name of the displays you\u0027re using \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve PM\u0027d you with updated code - once I\u0027m near my hardware and can confirm it works, I\u0027ll update my dropbox, but I\u0027ve sent you an advance copy in your messages \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Updated code can be found here: \u003Ca href=\u0022https://www.dropbox.com/s/ud69sks1u6z30kf/Demo_for_7segMAX7219_module_updated.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/ud69sks1u6z30kf/Demo_for_7segMAX7219_module_updated.zip?dl=0\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-25T17:35:01Z\u0022 title=\u002207/25/2015 05:35  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 25, 2015\u003C/time\u003E by AmeliaEatyaheart\u003C/strong\u003E\n\u003Cbr\u003EFixed some code\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2015-05-22T14:19:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AmeliaEatyaheart\u0022 data-cite=\u0022AmeliaEatyaheart\u0022\u003E\u003Cdiv\u003Ereplace \u0027numdisp\u0027 with \u0027lc\u0027 in your code - it\u0027s just the name of the displays you\u0027re using \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EI\u0027ve PM\u0027d you with updated code - once I\u0027m near my hardware and can confirm it works, I\u0027ll update my dropbox, but I\u0027ve sent you an advance copy in your messages \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think we got it sorted a couple of pages back. Thanks for the code.\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2015-05-24T13:51:39Z","Content":"\n\u003Cp\u003EHello everyone! \u003C/p\u003E\u003Cp\u003EFirst thing, very much thanks to Zitronen for making such a amazing plugin/mod and thank to all who help make it even better. Its amazing thing, realy, I love it. And second thing, I need little help from you, experienced builders. As many of you, when i saw way of making physical control panel for ksp i simply couldnt resis and start making my own. Building stuff based on Arduino isnt something new for me so no prob here. I have my prototy build on Mega 2560 board with stuff on breadboard (prototype \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E ). I got my 3 leds, stage button, throttle pot, graphics lcd as info panel. Well everything working well and smoth, control ok, info from ksp/plugin ok, BUT sometimes my comunication just went out from some reason. Green led go off, Tx led on Mega stop blink (Rx still blink), and all data stop go in and out. No controls, no info, nothing. Then sometimes and randomly Tx blink, green led went on, then go off again as no data come in. And weirdest thing is that sometimes I got comunication back complety so i can control/read data from ksp again. I tryed to lower bit rate from 115200 to 57600 and still same. Update rate is same (0.08). Any idea what can cause those com drops? I would love fix it and finalize my panel \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EPS: If this problem is somewhere discused already, just punch me in face with link, but I am sorry i couldnt fine it. And i read all! Hell of reading 99 pages, belive me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-05-24T20:33:40Z","Content":"\n\u003Cp\u003EHi Mattew,\u003C/p\u003E\u003Cp\u003EWelcome to the board!\u003C/p\u003E\u003Cp\u003EI think someone else had this issue a few weeks ago.\u003C/p\u003E\u003Cp\u003ESomething to do with mismatched plugins on \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/66393-Hardware-Plugin-Arduino-based-physical-display-serial-port-io-tutorial-%2809-Mar%29/page93\u0022 rel=\u0022external nofollow\u0022\u003EPage 93\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EGood luck!\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2015-05-24T22:06:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mattew\u0022 data-cite=\u0022Mattew\u0022\u003E\u003Cdiv\u003EHello everyone! \u003Cp\u003EFirst thing, very much thanks to Zitronen for making such a amazing plugin/mod and thank to all who help make it even better. Its amazing thing, realy, I love it. And second thing, I need little help from you, experienced builders. As many of you, when i saw way of making physical control panel for ksp i simply couldnt resis and start making my own. Building stuff based on Arduino isnt something new for me so no prob here. I have my prototy build on Mega 2560 board with stuff on breadboard (prototype \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E ). I got my 3 leds, stage button, throttle pot, graphics lcd as info panel. Well everything working well and smoth, control ok, info from ksp/plugin ok, BUT sometimes my comunication just went out from some reason. Green led go off, Tx led on Mega stop blink (Rx still blink), and all data stop go in and out. No controls, no info, nothing. Then sometimes and randomly Tx blink, green led went on, then go off again as no data come in. And weirdest thing is that sometimes I got comunication back complety so i can control/read data from ksp again. I tryed to lower bit rate from 115200 to 57600 and still same. Update rate is same (0.08). Any idea what can cause those com drops? I would love fix it and finalize my panel \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EPS: If this problem is somewhere discused already, just punch me in face with link, but I am sorry i couldnt fine it. And i read all! Hell of reading 99 pages, belive me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think this might be caused by the arduino code not being able to keep up with all the data (maybe your lcd code is taking all the processing time for example), try reducing the data rate, change it to 0.2 or something.\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2015-05-25T07:53:06Z","Content":"\n\u003Cp\u003EI read all from page 93 to end. But that isnt my issue since i got handshake and data. Maybe zitronen is right about code isnt able to keep up with plugin since most of time whe communication fail is during ascend or descend when game produce mist data (speed, alt and so on) But when ship orbits doing nothing then everything is fine. Most of time. when i come home i try to change refresh rate to be slower and see what happen.\u003C/p\u003E\n"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-05-25T11:18:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mattew\u0022 data-cite=\u0022Mattew\u0022\u003E\u003Cdiv\u003EI read all from page 93 to end. But that isnt my issue since i got handshake and data. Maybe zitronen is right about code isnt able to keep up with plugin since most of time whe communication fail is during ascend or descend when game produce mist data (speed, alt and so on) But when ship orbits doing nothing then everything is fine. Most of time. when i come home i try to change refresh rate to be slower and see what happen.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf I recall correctly, I had the odd drop out and reconnect when my console was still together.\u003C/p\u003E\u003Cp\u003ESometimes my 7 Seg diplays would freeze up too.\u003C/p\u003E\u003Cp\u003EIts in bits, so I can\u0027t test anything at the moment (or for a while yet).\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-05-25T11:26:06Z","Content":"\n\u003Cp\u003EIf you\u0027re getting intermittent dropouts then I\u0027d also suggest checking your USB cable. I\u0027ve had a couple of arduino boards ship with dodgy cables, that I had a hard time pushing decent transfer rates through until I changed them.\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2015-05-25T14:07:21Z","Content":"\n\u003Cp\u003ESo I got my testing done. Changed refresh rate in config file one by one and come to 0.2 rate, same as Zitronen suggest and it has possitive results. No more drop outs. everytihng is smooth. So far done 4 flights ground-orbit-ground a 100% of time wokring. I am guessing its realy to much time consuming calculation for GLDC. It will need some heavy optimalisation bcs at this moment, I am refreshing and redrawing everything on it with each program cycle even when nothing change at all.\u003C/p\u003E\u003Cp\u003EAnyway, thank all for theyr suggestions and ideas. Hopefuly it ll work now and ever \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E And when i get my prototype from breadboard to real control panel i definetly post some pictures \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-05-26T01:40:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stibbons\u0022 data-cite=\u0022stibbons\u0022\u003E\u003Cdiv\u003EIf you\u0027re getting intermittent dropouts then I\u0027d also suggest checking your USB cable. I\u0027ve had a couple of arduino boards ship with dodgy cables, that I had a hard time pushing decent transfer rates through until I changed them.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy compute is ancient, may be part of the problem. No replacement until I finish studying.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2015-05-27T15:53:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mattew\u0022 data-cite=\u0022Mattew\u0022\u003E\u003Cdiv\u003ESo I got my testing done. Changed refresh rate in config file one by one and come to 0.2 rate, same as Zitronen suggest and it has possitive results. No more drop outs. everytihng is smooth. So far done 4 flights ground-orbit-ground a 100% of time wokring. I am guessing its realy to much time consuming calculation for GLDC. It will need some heavy optimalisation bcs at this moment, I am refreshing and redrawing everything on it with each program cycle even when nothing change at all.\u003Cp\u003EAnyway, thank all for theyr suggestions and ideas. Hopefuly it ll work now and ever \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E And when i get my prototype from breadboard to real control panel i definetly post some pictures \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENice. I think what happens is if you spend too much time doing stuff the arduino\u0027s serial buffer gets filled up and you end up with incomplete packets and keep getting them until the buffer can be cleared. There\u0027s probably some ways to handle that or at least give you a warning it\u0027s happening.\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-05-27T23:10:02Z","Content":"\n\u003Cp\u003EA big part of the problem is that the built in Arduino Serial library uses a 64 byte buffer. If it\u0027s increased to match the size of VesselData then you can get away with only polling once per refresh cycle. But because it\u0027s smaller you need to be able to poll it frequently enough to drain it while data is coming in.\u003C/p\u003E\u003Cp\u003EI know that increasing the serial buffer size used to be very annoying. In 1.0.x versions of Arduino you need to edit library source, and then hope you haven\u0027t accidentally allocated more RAM than the Uno has. It looks to be more accessible in 1.6, but I still haven\u0027t been able to figure out how to do it nicely.\u003C/p\u003E\u003Cp\u003EOf course, in a perfect world user code would also just get an interrupt when the receive buffer was full and could deal with it appropriately. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2015-05-29T09:21:00Z","Content":"\n\u003Cp\u003Eit maybe case of overload arduino with to much work. But maybe not bcs sadly i run in com drops again and i didnt change anything. No code change or hardware change, just using my prototype. Its better then before bt still getting random drop. Even tryed change usb cable and port and same thing. Closely observing I found its completly random. Com drops during launch, deorbiting, orbital flight and work on orbit. It even happend when game is paused! I start thinks its more hardware problem related since i build it on bredboard. During testing i found when wire from push button isnt properly connected and ends \u0022in air\u0022 arduino went crazy and block coms. When wire is connected to gnd or 5v (simulate push or release) in most cases it start working again. Disconect wire and bam, com drops. Is this can be issue? Like noise in wires bcs of not good connections on bredboard and jumpwires?\u003C/p\u003E\n"},{"CreatedByName":"MrBlackstone","CreatedById":145282,"CreatedDateTime":"2015-05-30T08:23:40Z","Content":"\n\u003Cp\u003EZitronen,I\u0027m having troubles making the anolog axis work with my potentiometers (pitch,yaw,roll) ,would you please show me the arduino code i can use to control axis? \u003C/p\u003E\u003Cp\u003EIn the output sheet of your demo code there is this \u0022CPacket.Pitch = constrain(map(analogRead(PITCHPIN),PITCHDB,1024-PITCHDB,0,1515),0, 1515);\u0022,but only the throttle is working and i still cant figure out how to program and control all the others axes.Can you help me?\u003C/p\u003E\n"},{"CreatedByName":"Freshmeat","CreatedById":111048,"CreatedDateTime":"2015-05-30T12:27:42Z","Content":"\n\u003Cp\u003EHave you checked the config file? Try forcing everything to take commands only from the plugin.\u003C/p\u003E\u003Cp\u003EAlso the above line need to have subtracted half its max value to get a range to both sides.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2015-05-30T21:09:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mattew\u0022 data-cite=\u0022Mattew\u0022\u003E\u003Cdiv\u003Eit maybe case of overload arduino with to much work. But maybe not bcs sadly i run in com drops again and i didnt change anything. No code change or hardware change, just using my prototype. Its better then before bt still getting random drop. Even tryed change usb cable and port and same thing. Closely observing I found its completly random. Com drops during launch, deorbiting, orbital flight and work on orbit. It even happend when game is paused! I start thinks its more hardware problem related since i build it on bredboard. During testing i found when wire from push button isnt properly connected and ends \u0022in air\u0022 arduino went crazy and block coms. When wire is connected to gnd or 5v (simulate push or release) in most cases it start working again. Disconect wire and bam, com drops. Is this can be issue? Like noise in wires bcs of not good connections on bredboard and jumpwires?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWait you have your reset pin floating?\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/G_i1ZhadTa0?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"Mattew","CreatedById":144806,"CreatedDateTime":"2015-05-31T08:29:51Z","Content":"\n\u003Cp\u003EYes i have it floating. I never connected Reset pin to anything. I read something about using capacitor on that pin to ensure correct function. I may give a try se what will happen.\u003C/p\u003E\u003Cp\u003EBtw i have only two buttons right now. Stage button wich is using internal pull-up resistor and menu change button (switch \u0022menus\u0022 on GLDC to show different things) that use external pull-down resisor.\u003C/p\u003E\u003Cp\u003EEDIT: I just did test with capacitors and check wires and so on. No positive results at all. So little desperate i took prototype (with Mega) apart and build mini simple test platform based on uno. Just three leds, stage button, throttle pot. Upload code, do flights and guess what? no errors at all. All smooth all time. (for two hours of playing, we ll se later). So It ll be probably oveloaded mCU due to glcd or i dont realy know. \u003C/p\u003E\u003Cp\u003EI probably change \u0022theme\u0022 of panel from modern with displays and nice light buttons to more retro (apollo) era with analog meters that dont eat my mCU to dinner doing calculations \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-01T05:43:47Z\u0022 title=\u002206/01/2015 05:43  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 1, 2015\u003C/time\u003E by Mattew\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2015-06-02T07:44:11Z","Content":"\n\u003Cp\u003EYou really need to not have the reset ping floating. You can use the my schematic from my board from the first post as an example of how to wire up the reset pin correctly for serial programming.\u003C/p\u003E\n"}]}