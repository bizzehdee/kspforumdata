{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":169,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-20T23:08:52Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Dead Pixel said:\n\u003E \n\u003E \n\u003E I seem to have found a bug, or i have a faulty download and it\u0027s corrupted, but whenever you go into cockpit view and zoom in on something and exit out of cockpit view, it locks the FOV at whatever it was set to while zooming in, and it messes up scatterer that makes the ocean go away, the sky messed up, or have the atmosphere bug up.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [http://imgur.com/a/V33fI](http://imgur.com/a/V33fI)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Most recent version of scatterer\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Ksp 1.1\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I don\u0027t know if my specs have anything to do with it, it has worked perfectly before 1.1\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Nvidia Gtx-970\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I5-4690K\n\u003E \n\nI will check it out when I can.\n\n\u003E \n\u003E \n\u003E 3 minutes ago, Tricky14 said:\n\u003E \n\u003E \n\u003E Can anyone give me some more specific advice on what to do with anisotropic filtering? Things usually break when I start to alter drivers, so I wouldn\u0027t mind some help. Running KSP on an NVidia 780\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I can confirm that one also.\n\u003E \n\nTerrain shadows appear to be completely messed in Unity 5 no matter what you do, in my testing nothing helped, dx11, opengl and anisotropic filtering didn\u0027t help it either unlike with Unity 4. You\u0027re welcome to do more testing though, force different aniso settings 2x 4x etc or test other driver-related options."},{"CreatedByName":"isnowmobile","CreatedById":162362,"CreatedDateTime":"2016-04-21T01:24:58Z","Content":"Not sure if this helps at all but in 1.1 when i go to cockpit view and use the scroll wheel to change the FOV I get the ocean flooding every time. I haven\u0027t been able to get the flooding to happen any other way. Hope this helps resolve some issues"},{"CreatedByName":"TheCrimsonCorndog","CreatedById":94733,"CreatedDateTime":"2016-04-21T01:43:41Z","Content":"Still getting the ocean/coast flicker over here!  Anything I can do on my end to fix it myself or help you fix it?"},{"CreatedByName":"Nhawks17","CreatedById":32999,"CreatedDateTime":"2016-04-21T02:48:57Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, isnowmobile said:\n\u003E \n\u003E \n\u003E Not sure if this helps at all but in 1.1 when i go to cockpit view and use the scroll wheel to change the FOV I get the ocean flooding every time. I haven\u0027t been able to get the flooding to happen any other way. Hope this helps resolve some issues\n\u003E \n\n\u003E \n\u003E \n\u003E 1 hour ago, TheCrimsonCorndog said:\n\u003E \n\u003E \n\u003E Still getting the ocean/coast flicker over here!  Anything I can do on my end to fix it myself or help you fix it?\n\u003E \n\nYou guys should check out the OP next time. It says in the known issues section\n\n\u003E \n\u003E \n\u003E Quote\n\u003E \n\u003E \n\u003E In 1.1 you might get the ocean flooding and behaving erratically, what causes this is unknown at the moment.\n\u003E \n\nI can only imagine that Blackrack is a busy man and you all not reading the OP doesn\u0027t help ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-04-21T03:38:05Z","Content":"You know I was just ditching in the ocean...as you do...and I was thinking, there is no visual cue pertaining to your distance from the water, no shadow or reflection. I guessing using raycasting would be quite expensive on the rendered water?"},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2016-04-21T04:36:14Z","Content":"\u003E \n\u003E \n\u003E 57 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E You know I was just ditching in the ocean...as you do...and I was thinking, there is no visual cue pertaining to your distance from the water, no shadow or reflection. I guessing using raycasting would be quite expensive on the rendered water?\n\u003E \n\nHave you tried enabled light reflections and just used landing lights?"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-04-21T04:37:57Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, V8jester said:\n\u003E \n\u003E \n\u003E Have you tried enabled light reflections and just used landing lights?\n\u003E \n\nNo, I just installed the new version and didn\u0027t know I could, excellent, though I think that lights is a 10 FPS hit"},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2016-04-21T04:39:08Z","Content":"\u003E \n\u003E \n\u003E Just now, selfish\\_meme said:\n\u003E \n\u003E \n\u003E No, I just installed the new version and didn\u0027t know I could, excellent, though I think that lights is a 10 FPS hit\n\u003E \n\n haven\u0027t tried it myself, but I will most definitely ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"pingopete","CreatedById":74168,"CreatedDateTime":"2016-04-21T11:46:59Z","Content":"OH the glorious smooth -windows- haze!\n\n[http://i.imgur.com/qzQjslc.png](http://i.imgur.com/qzQjslc.png)![qzQjslc.png](http://i.imgur.com/qzQjslc.png)\n\n**Edited \u003Ctime datetime=\u00222016-04-21T11:51:03Z\u0022 title=\u002204/21/2016 11:51  AM\u0022 data-short=\u00228 yr\u0022\u003EApril 21, 2016\u003C/time\u003E by pingopete**"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-04-21T12:45:44Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, V8jester said:\n\u003E \n\u003E \n\u003E haven\u0027t tried it myself, but I will most definitely ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nSeems to work OK\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/3IlhS/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-21T12:47:48Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E Seems to work OK\n\u003E \n\nTry it at night, use the far-reaching lights, use lots of them and multiple colors ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)"},{"CreatedByName":"Whiskybob","CreatedById":160012,"CreatedDateTime":"2016-04-21T12:49:46Z","Content":"\u003E \n\u003E \n\u003E 21 hours ago, rbray89 said:\n\u003E \n\u003E \n\u003E Also try resolution, and make sure that any other windows in the background are minimized. Also make sure all your drivers are up-to-date.\n\u003E \n\nOk so i tried it with lower resolution Fps goes up to 80 but overall KSP Is very blurred :-( also i noticed that fps drop is only on planets with oceans . Even with stock ksp i got 50 FPS when looking at planet with ocean and 180FPS when looking at mun surface so its rellated to ksp :-/"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-04-21T13:16:14Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) do you use HyperEdit to test at different heights?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-21T13:23:19Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) do you use HyperEdit to test at different heights?\n\u003E \n\nI use it mostly to quickly test at other planets. Why?"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-04-21T13:28:14Z","Content":"I just saw some strange behaviour when putting craft in orbit of Kerbin, when I went up the normal way it did not happen. So I hyperedited a capsule into 100km orbit and the bottom half of my screen got water rendered over it, I could see through it, like if you go underground at the KSC. Sorry I didn\u0027t take a screenshot, I thought it was my ISS replica that was playing up, that went very far from the camera view, still had portrait and stuff like everything was normal but water and ISS off in the distance. Anyway I thought I might mention it, I am on OpenGl, which I know you can\u0027t test so it might just be me, but strange it didn\u0027t affect a craft that launched to the same height."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-21T14:29:13Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E I just saw some strange behaviour when putting craft in orbit of Kerbin, when I went up the normal way it did not happen. So I hyperedited a capsule into 100km orbit and the bottom half of my screen got water rendered over it, I could see through it, like if you go underground at the KSC. Sorry I didn\u0027t take a screenshot, I thought it was my ISS replica that was playing up, that went very far from the camera view, still had portrait and stuff like everything was normal but water and ISS off in the distance. Anyway I thought I might mention it, I am on OpenGl, which I know you can\u0027t test so it might just be me, but strange it didn\u0027t affect a craft that launched to the same height.\n\u003E \n\nYeah press rebuild ocean and it should clear it up. The ocean got a bit messed up now."},{"CreatedByName":"Kamuchi","CreatedById":110857,"CreatedDateTime":"2016-04-21T16:13:23Z","Content":"For some reason Scatterer is throwing nullrefs with the latest SVE/EVE, no other mods except for Squad and it can spam the same error on a modded install with 10k lines when rotating around alot.  \n\nNo idea if it\u0060s a Scatterer or EVE issue.\n\n\u003E \n\u003E \n\u003E Quote\n\u003E \n\u003E \n\u003E NullReferenceException: Object reference not set to an instance of an object  \n\u003E \n\u003E   at Utils.DeferredRenderer.OnWillRenderObject () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0 \u003Cbr\u003E\n\u003E UnityEngine.Camera:RenderWithShader(Shader, String)\u003Cbr\u003E\n\u003E scatterer.CustomDepthBufferCam:OnPreRender()\n\u003E \u003C/filename\u003E\n\u003E \n\n[https://www.dropbox.com/s/t9irgth7cr74vtv/output_log.txt?dl=0](https://www.dropbox.com/s/t9irgth7cr74vtv/output_log.txt?dl=0)  \n[https://www.dropbox.com/s/q0w1lfftlazsyak/KSP.log?dl=0](https://www.dropbox.com/s/q0w1lfftlazsyak/KSP.log?dl=0)"},{"CreatedByName":"Blacks","CreatedById":145137,"CreatedDateTime":"2016-04-21T16:20:44Z","Content":"\u003E \n\u003E \n\u003E 11 minutes ago, Kamuchi said:\n\u003E \n\u003E \n\u003E For some reason Scatterer is throwing nullrefs with the latest SVE/EVE, no other mods except for Squad and it can spam the same error on a modded install with 10k lines when rotating around alot.  \n\u003E \n\u003E No idea if it\u0060s a Scatterer or EVE issue.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://www.dropbox.com/s/t9irgth7cr74vtv/output_log.txt?dl=0](https://www.dropbox.com/s/t9irgth7cr74vtv/output_log.txt?dl=0)  \n\u003E [https://www.dropbox.com/s/q0w1lfftlazsyak/KSP.log?dl=0](https://www.dropbox.com/s/q0w1lfftlazsyak/KSP.log?dl=0)\n\u003E \n\nMost important question you use EVE what came with SVE zip fille ? if yes then get last update from [@rbray89](https://forum.kerbalspaceprogram.com/index.php?/profile/48847-rbray89/) was release it corect some important nullreff spam ... if not then it will be a diferite problem\n\nsoo first get last update for EVE [https://github.com/rbray89/EnvironmentalVisualEnhancements](https://github.com/rbray89/EnvironmentalVisualEnhancements) \u0026 use SVE texture \u0026 Config file only ...\n\np.s. all who use SVE i will say MUST get last EVE release AnyCPU-EVE-Release.zip till [@Nhawks17](https://forum.kerbalspaceprogram.com/index.php?/profile/32999-nhawks17/) it will release new full updated pack !!! 6.2, 6.3 not mater ... but i gues he will doo that after integrate Kopernicus to work to\n\n**Edited \u003Ctime datetime=\u00222016-04-21T16:29:04Z\u0022 title=\u002204/21/2016 04:29  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 21, 2016\u003C/time\u003E by Blacks**"},{"CreatedByName":"Kamuchi","CreatedById":110857,"CreatedDateTime":"2016-04-21T16:32:36Z","Content":"\u003E \n\u003E \n\u003E 18 minutes ago, Blacks said:\n\u003E \n\u003E \n\u003E Most important question you use EVE what came with SVE zip fille ? if yes then get last update from  rbray89 was release it corect some important nullreff spam ... if not then it will be a diferite problem\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E soo first get last update for EVE [https://github.com/rbray89/EnvironmentalVisualEnhancements](https://github.com/rbray89/EnvironmentalVisualEnhancements) \u0026 use SVE texture \u0026 Config file only ...\n\u003E \n\nThanks for the quick reply and solution ![:kiss:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif \u0022:kiss:\u0022)\n\nFished out the  [AnyCPU-EVE.zip](https://github.com/rbray89/EnvironmentalVisualEnhancements/blob/master/AnyCPU-EVE.zip \u0022AnyCPU-EVE.zip\u0022)  with last build from 23 hours ago which fixed the nullspam issue and isn\u0060t in the normal releases yet.\n\nThe fun of debugging after a new release, this one had me scratching my head for abit ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)  \n\nEdit: where are my manners... Thank you for all your work! \n\n**Edited \u003Ctime datetime=\u00222016-04-21T16:39:15Z\u0022 title=\u002204/21/2016 04:39  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 21, 2016\u003C/time\u003E by Kamuchi**"},{"CreatedByName":"Blacks","CreatedById":145137,"CreatedDateTime":"2016-04-21T16:48:18Z","Content":"[@Kamuchi](https://forum.kerbalspaceprogram.com/index.php?/profile/110857-kamuchi/) i was know about issue coz i was spot the problem \u0026 signal to rbrary in eve treath post who was fix it, that i was able to give you a quick fix ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\n\u0026 np have fun"},{"CreatedByName":"Kamik423","CreatedById":111881,"CreatedDateTime":"2016-04-21T19:26:46Z","Content":"Not sure if this has already been reported, but changing the FOV (alt\u002Bscrolling) makes the ocean angle up and be a vertical wall in front of my plane. Must be some weird issue with coordinates relative to the planet / the KSC / the craft / the camera"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2016-04-21T19:27:43Z","Content":"also, for dx11:\n\nFound the root cause: [http://forum.unity3d.com/threads/d3d-shader-create-error-for-shader-0x80070057-vs_5_0.355433/](http://forum.unity3d.com/threads/d3d-shader-create-error-for-shader-0x80070057-vs_5_0.355433/)  \nMight be a solution here: [http://answers.unity3d.com/questions/483671/directx-11-not-working-dx11-on-dx10-gpu.html](http://answers.unity3d.com/questions/483671/directx-11-not-working-dx11-on-dx10-gpu.html)  \nLooks like the proper fix would be in unity version  5.3.2"},{"CreatedByName":"TheCrimsonCorndog","CreatedById":94733,"CreatedDateTime":"2016-04-21T19:48:49Z","Content":"\u003E \n\u003E \n\u003E 16 hours ago, Nhawks17 said:\n\u003E \n\u003E \n\u003E You guys should check out the OP next time. It says in the known issues section\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I can only imagine that Blackrack is a busy man and you all not reading the OP doesn\u0027t help ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nI read the Known Issues, but the changelog states:\n\n    Issue where ocean flickers and bobs around with camera movements appears to be fixed\n\nI\u0027m just reporting that it\u0027s still an issue for me (other people too, apparently) and asking if there\u0027s any way I can help."},{"CreatedByName":"Numi","CreatedById":57971,"CreatedDateTime":"2016-04-21T21:49:04Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, TheCrimsonCorndog said:\n\u003E \n\u003E \n\u003E I\u0027m just reporting that it\u0027s still an issue for me (other people too, apparently) and asking if there\u0027s any way I can help.\n\u003E \n\nIts an issue for me as well. Pretty much makes the mod unusable for anything but screenshots much of Kerbin flickers as you move the camera."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-04-21T21:58:42Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, Numi said:\n\u003E \n\u003E \n\u003E Its an issue for me as well. Pretty much makes the mod unusable for anything but screenshots much of Kerbin flickers as you move the camera.\n\u003E \n\n\u003E \n\u003E \n\u003E 2 hours ago, TheCrimsonCorndog said:\n\u003E \n\u003E \n\u003E I read the Known Issues, but the changelog states:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     Issue where ocean flickers and bobs around with camera movements appears to be fixed\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m just reporting that it\u0027s still an issue for me (other people too, apparently) and asking if there\u0027s any way I can help.\n\u003E \n\nSo it seems some of you guys are confusing two completely different issues, the flickering issue referenced in the changelog and the known issues section is this: [https://www.youtube.com/watch?v=hLX9f2OOFtk](https://www.youtube.com/watch?v=hLX9f2OOFtk) Now I would like to know if this was really fixed or if it still occurs.\n\nThe other is a fov-related issue which happens with the ocean appearing to be stuck at the old fov when you change your fov, this can be fixed by pressing \u0022rebuild ocean\u0022 after you change your fov, I will fix it correctly when I can.\n\n\u003E \n\u003E \n\u003E 2 hours ago, Kamik423 said:\n\u003E \n\u003E \n\u003E Not sure if this has already been reported, but changing the FOV (alt\u002Bscrolling) makes the ocean angle up and be a vertical wall in front of my plane. Must be some weird issue with coordinates relative to the planet / the KSC / the craft / the camera\n\u003E \n\nSee above.\n\n\u003E \n\u003E \n\u003E 2 hours ago, rbray89 said:\n\u003E \n\u003E \n\u003E also, for dx11:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Found the root cause: [http://forum.unity3d.com/threads/d3d-shader-create-error-for-shader-0x80070057-vs_5_0.355433/](http://forum.unity3d.com/threads/d3d-shader-create-error-for-shader-0x80070057-vs_5_0.355433/)  \n\u003E Might be a solution here: [http://answers.unity3d.com/questions/483671/directx-11-not-working-dx11-on-dx10-gpu.html](http://answers.unity3d.com/questions/483671/directx-11-not-working-dx11-on-dx10-gpu.html)  \n\u003E Looks like the proper fix would be in unity version  5.3.2\n\u003E \n\nI am not sure this is the same issue, reading the text, it seems this affects non-dx11 cards failing to run a dx11 shader because the dx9 fallback isn\u0027t kicking in or something similar. Whereas I\u0027m failing to run a dx11 shader on a dx11 card."}]}