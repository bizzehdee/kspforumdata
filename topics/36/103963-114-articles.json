{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":114,"Articles":[{"CreatedByName":"kirneh1986","CreatedById":155760,"CreatedDateTime":"2015-12-23T10:48:02Z","Content":"blackrack: Thank you for your work on this mod! It really improves the visuals of the game by a lot! A minor bug report: the small calculator icon from RemoteTech (up by the warp controls) is not showing when this mod is active. You can still click there, just the icon is not drawing. Maybe you are not resetting the render state to what is expected? I am on a mac so this is in OpenGL mode. Obviously a minor thing, just thought I\u0027d let you know ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-23T11:24:39Z","Content":"Does anybody know how to get the value of how much the PQS is faded at any given moment? I\u0027m talking about when it starts fading out to blend into the scaledSpace mesh.\n\nEdited: nevermind, I think I got it.\n\n\u003E \n\u003E \n\u003E 1 hour ago, kirneh1986 said:\n\u003E \n\u003E \n\u003E blackrack: Thank you for your work on this mod! It really improves the visuals of the game by a lot! A minor bug report: the small calculator icon from RemoteTech (up by the warp controls) is not showing when this mod is active. You can still click there, just the icon is not drawing. Maybe you are not resetting the render state to what is expected? I am on a mac so this is in OpenGL mode. Obviously a minor thing, just thought I\u0027d let you know ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nCould you try disabling postprocessing/extinction/ocean and see if anything changes?\n\n**Edited \u003Ctime datetime=\u00222015-12-23T12:24:56Z\u0022 title=\u002212/23/2015 12:24  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 23, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"kirneh1986","CreatedById":155760,"CreatedDateTime":"2015-12-23T11:39:42Z","Content":"\u003E \n\u003E \n\u003E 7 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Could you try disabling postprocessing/extinction/ocean and see if anything changes?\n\u003E \n\nIt is still missing with oceans turned off. I\u0027m not sure what the best way to disable postprocessing or extinction is? It is still missing above the 160000 altitude which seems to be the postprocessing cutoff for Kerbin."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-23T12:13:01Z","Content":"\u003E \n\u003E \n\u003E 32 minutes ago, kirneh1986 said:\n\u003E \n\u003E \n\u003E It is still missing with oceans turned off. I\u0027m not sure what the best way to disable postprocessing or extinction is? It is still missing above the 160000 altitude which seems to be the postprocessing cutoff for Kerbin.\n\u003E \n\nThere are buttons in the atmosphere UI for turning off postprocessing and extinction."},{"CreatedByName":"kirneh1986","CreatedById":155760,"CreatedDateTime":"2015-12-23T12:35:46Z","Content":"\u003E \n\u003E \n\u003E 21 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E There are buttons in the atmosphere UI for turning off postprocessing and extinction.\n\u003E \n\nAlright, it is still missing with any of those turned off."},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-23T17:11:52Z","Content":"\u003E \n\u003E \n\u003E 5 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Does anybody know how to get the value of how much the PQS is faded at any given moment? I\u0027m talking about when it starts fading out to blend into the scaledSpace mesh.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Edited: nevermind, I think I got it.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Could you try disabling postprocessing/extinction/ocean and see if anything changes?\n\u003E \n\nThere is the \\_PlanetOpacity that is passed to the shaders as a global shader param."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-23T22:24:02Z","Content":"\u003E \n\u003E \n\u003E 5 hours ago, rbray89 said:\n\u003E \n\u003E \n\u003E There is the \\_PlanetOpacity that is passed to the shaders as a global shader param.\n\u003E \n\nThanks!"},{"CreatedByName":"Darkway","CreatedById":142879,"CreatedDateTime":"2015-12-23T23:16:11Z","Content":"The last build fixed everything for me, too, both DX9 and 11. Everything is clean and bug free (except for the z fightin) \n\nThe new fake ocean also fixed an ugly glich that happened to me regularly around 60-70km in the earlier build. (It was a major glich covering the whole scene with bits and pieces of the ocean shader).\n\nThe mod is becoming absolutely fantastic, blackrack. One question tho, sorry if its been asked be4. Is there a way to add some ambient light to the ocean at night? Had a look at the config but couldnt figure it out. Thanks!"},{"CreatedByName":"cubinator","CreatedById":150330,"CreatedDateTime":"2015-12-23T23:19:05Z","Content":"This mod is amazing, here\u0027s the things I think could be improved upon:\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/4CuWe/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\nI\u0027m using the 10x Kerbol mod, EVE, Distant Object Enhancement, and Simple Realism."},{"CreatedByName":"*MajorTom*","CreatedById":144002,"CreatedDateTime":"2015-12-23T23:20:31Z","Content":"water bugs in version  0.0218 (...215,216) , but I dont have any of it then I use 0.021c (version is totaly ok)\n\nmy video mods- texture replacer (latest), EVE (105-4), windows shine, planet shine, distant object\n\n(hardware-videocard Radeon r9290)\n\n![afd25845a6d4.png](http://s020.radikal.ru/i702/1512/26/afd25845a6d4.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-23T23:24:52Z","Content":"\u003E \n\u003E \n\u003E 13 minutes ago, Darkway said:\n\u003E \n\u003E \n\u003E The last build fixed everything for me, too, both DX9 and 11. Everything is clean and bug free (except for the z fightin) \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The new fake ocean also fixed an ugly glich that happened to me regularly around 60-70km in the earlier build. (It was a major glich covering the whole scene with bits and pieces of the ocean shader).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The mod is becoming absolutely fantastic, blackrack. One question tho, sorry if its been asked be4. Is there a way to add some ambient light to the ocean at night? Had a look at the config but couldnt figure it out. Thanks!\n\u003E \n\nNot yet but it will be added, maybe even with moon light reflections if the performance isn\u0027t bad. For the z fighting I\u0027m working on it.\n\n\u003E \n\u003E \n\u003E 11 minutes ago, cubinator said:\n\u003E \n\u003E \n\u003E This mod is amazing, here\u0027s the things I think could be improved upon:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m using the 10x Kerbol mod, EVE, Distant Object Enhancement, and Simple Realism.\n\u003E \n\nIs this using the latest version?\n\n**Edited \u003Ctime datetime=\u00222015-12-23T23:30:22Z\u0022 title=\u002212/23/2015 11:30  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 23, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"cubinator","CreatedById":150330,"CreatedDateTime":"2015-12-24T00:50:28Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E Not yet but it will be added, maybe even with moon light reflections if the performance isn\u0027t bad. For the z fighting I\u0027m working on it.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Is this using the latest version?\n\u003E \n\nYes it is. I know the Known Issues section mentions \u0022RSS might not actually work.\u0022 Might this be applicable to 10x Kerbol too?\n\nEdit: downloaded via CKAN btw.\n\n**Edited \u003Ctime datetime=\u00222015-12-24T00:53:03Z\u0022 title=\u002212/24/2015 12:53  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 24, 2015\u003C/time\u003E by cubinator**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-24T01:19:18Z","Content":"\u003E \n\u003E \n\u003E 28 minutes ago, cubinator said:\n\u003E \n\u003E \n\u003E Yes it is. I know the Known Issues section mentions \u0022RSS might not actually work.\u0022 Might this be applicable to 10x Kerbol too?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Edit: downloaded via CKAN btw.\n\u003E \n\nYep, I should change it to rescale mods. But yeah, I\u0027ll look into it when I can, I have other things in mind for now."},{"CreatedByName":"cubinator","CreatedById":150330,"CreatedDateTime":"2015-12-24T01:34:11Z","Content":"\u003E \n\u003E \n\u003E 12 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Yep, I should change it to rescale mods. But yeah, I\u0027ll look into it when I can, I have other things in mind for now.\n\u003E \n\nCool! I\u0027ll try playing around with the settings to see if there are a few fixes there. I believe there was a \u0022shininess\u0022 parameter...\n\nOtherwise, the mod is awesome, can\u0027t wait to see what else you come up with! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"Goliathan","CreatedById":110871,"CreatedDateTime":"2015-12-24T05:21:14Z","Content":"\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/iu847/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\nThese artifacts keep cropping up. it seems to be an issue with the reflection mapping, I\u0027m running Ubuntu 64bit, any workarounds I might try? \n\n**Edited \u003Ctime datetime=\u00222015-12-24T05:22:40Z\u0022 title=\u002212/24/2015 05:22  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 24, 2015\u003C/time\u003E by Goliathan**\n  \nActual album now lul."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-24T06:58:10Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Goliathan said:\n\u003E \n\u003E \n\u003E These artifacts keep cropping up. it seems to be an issue with the reflection mapping, I\u0027m running Ubuntu 64bit, any workarounds I might try?\n\u003E \n\nThe only thing that seems to work sometimes is spamming the rebuild ocean in the UI or apply settings in the graphics settings until you get an artifact free ocean.\n\nEdited:\n\nI\u0027m uploading a version which minimizes z-fighting on the fake ocean. I implemented a logarithmic buffer but for some reason the precision gains weren\u0027t as good as I expected, I switched to using a mesh and attempting to reuse the stock ocean mesh to display the fake ocean but ran into other issues.\n\nIn the end I went back to the old dirty trick of moving the clip planes, I moved them only slightly this time and as far as I can tell z-fighting is minimized and there don\u0027t seem to be any other problems. Results with RSS/rescale mods may be different. This is only a temporary fix.\n\n**Edited \u003Ctime datetime=\u00222015-12-24T07:37:36Z\u0022 title=\u002212/24/2015 07:37  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 24, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-12-24T08:18:31Z","Content":"Had to roll back from V0.218 to previous version - time warping in low kerbin orbit (80km) for some reason gave me HUGE FPS drop and couple seconds after NVidia drivers crashed and recovered. I thought it was due to some other stuff, but I tried again, and although there were no more driver crashes, I still experienced a massive FPS drops as soon as I started timewarping with Kerbin visible in low orbit. Reverting back to 0.216 solved this problem (at least made it less prominent) and got rid of ugly z-fighting.\n\nBUT: I\u0027m using 64-bit workaround and DX9 on i5930 \u002B gtx980ti so I have no right to complain, just giving you some heads-up."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-24T08:31:35Z","Content":"\u003E \n\u003E \n\u003E 16 minutes ago, Ziw said:\n\u003E \n\u003E \n\u003E Had to roll back from V0.218 to previous version - time warping in low kerbin orbit (80km) for some reason gave me HUGE FPS drop and couple seconds after NVidia drivers crashed and recovered. I thought it was due to some other stuff, but I tried again, and although there were no more driver crashes, I still experienced a massive FPS drops as soon as I started timewarping with Kerbin visible in low orbit. Reverting back to 0.216 solved this problem (at least made it less prominent) and got rid of ugly z-fighting.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E BUT: I\u0027m using 64-bit workaround and DX9 on i5930 \u002B gtx980ti so I have no right to complain, just giving you some heads-up.\n\u003E \n\nWeird, I guess we\u0027ll wait and see if this an isolated case or indeed there\u0027s a big problem somewhere. Btw reverting to \u00220.0216\u0022 will fix z-fighting but will get you back to the old problems of artifact soup in low orbit and visible ocean floor.\n\nBtw I\u0027m using the 64-bit workaround too, all the time, and it doesn\u0027t seem to bring any additional problems, so by all means keep reporting if problems come up on 64bit.\n\nEdited: Just gave it a quick try, I get some fps drops but only when the time warp is \u0022changing\u0022 from 50x down to 10x or 1x. When at a constant 50x or 10x it seems ro work fine.\n\nIs this what you\u0027re experiencing or are you getting drops all the time?\n\n**Edited \u003Ctime datetime=\u00222015-12-24T08:36:13Z\u0022 title=\u002212/24/2015 08:36  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 24, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-12-24T09:36:32Z","Content":"Well, I cannot test right now, but maybe it was the problem while \u0022changing\u0022 warp speed indeed. But it was so unexpected and massive, so I started dialing it back down to 1x. On 1x all was buttery smooth again.\n\nI\u0027ll test with 0.2182 later today and report.\n\n**Edited \u003Ctime datetime=\u00222015-12-24T09:37:26Z\u0022 title=\u002212/24/2015 09:37  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 24, 2015\u003C/time\u003E by Ziw**"},{"CreatedByName":"Aludra","CreatedById":155608,"CreatedDateTime":"2015-12-24T10:08:32Z","Content":"Amazing. I love this water. And atmospheres are great. Became so hooked I started on every planet with an atmosphere.\n\nOnly to spend hours trying to figure out why this happened to no avail. \n\n[https://www.dropbox.com/s/ztxg24798l0tlfb/bugged-rings.png?dl=0](https://www.dropbox.com/s/ztxg24798l0tlfb/bugged-rings.png?dl=0)\n\nIn the topic of z-fighting... This is what scatterer does to rings. Renders all of the rings behind the planet. So the ring no longer wraps the planet its behind it. Looks very silly and wrong."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-24T10:33:58Z","Content":"\u003E \n\u003E \n\u003E 24 minutes ago, Aludra said:\n\u003E \n\u003E \n\u003E Amazing. I love this water. And atmospheres are great. Became so hooked I started on every planet with an atmosphere.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Only to spend hours trying to figure out why this happened to no avail. \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://www.dropbox.com/s/ztxg24798l0tlfb/bugged-rings.png?dl=0](https://www.dropbox.com/s/ztxg24798l0tlfb/bugged-rings.png?dl=0)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E In the topic of z-fighting... This is what scatterer does to rings. Renders all of the rings behind the planet. So the ring no longer wraps the planet its behind it. Looks very silly and wrong.\n\u003E \n\nSomeone reported this a few days ago, I have a fix in mind for it."},{"CreatedByName":"Val","CreatedById":126227,"CreatedDateTime":"2015-12-24T10:57:22Z","Content":"\u003E \n\u003E \n\u003E 11 hours ago, \\*MajorTom\\* said:\n\u003E \n\u003E \n\u003E water bugs in version  0.0218 (...215,216) , but I dont have any of it then I use 0.021c (version is totaly ok)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E my video mods- texture replacer (latest), EVE (105-4), windows shine, planet shine, distant object\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E (hardware-videocard Radeon r9290)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![afd25845a6d4.png](http://s020.radikal.ru/i702/1512/26/afd25845a6d4.png)](http://s020.radikal.ru/i702/1512/26/afd25845a6d4.png \u0022Enlarge image\u0022)\n\u003E \n\nThis happens to me, too.\n\nAs far as I can tell it is EVE cloud shadows, as it only happens when I\u0027m below clouds. It\n\nIt started with version v0.0216. It does not happen in v0.0215.\n\nIt is still in v0.02182 using both -force-opengl and -force-d3d11 on a GTX 980."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-24T11:01:27Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, Val said:\n\u003E \n\u003E \n\u003E This happens to me, too.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E As far as I can tell it is EVE cloud shadows, as it only happens when I\u0027m below clouds. It\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It started with version v0.0216. It does not happen in v0.0215.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It is still in v0.02182 using both -force-opengl and -force-d3d11 on a GTX 980.\n\u003E \n\nIn the version where this doesn\u0027t happen, do the EVE cloud shadows work at all or are they just invisible in the water? If ithey are invisible and you want to keep them like that take the \u0022EmptyShader.shader\u0022 file from the old version and stick it in the new one, that should do it."},{"CreatedByName":"Val","CreatedById":126227,"CreatedDateTime":"2015-12-24T11:58:11Z","Content":"\u003E \n\u003E \n\u003E 44 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E In the version where this doesn\u0027t happen, do the EVE cloud shadows work at all or are they just invisible in the water? If ithey are invisible and you want to keep them like that take the \u0022EmptyShader.shader\u0022 file from the old version and stick it in the new one, that should do it.\n\u003E \n\nThe EVE Shadows work in v0.0215 as far as I can tell.\n\nReplacing the EmptyShader.shader in v0.02182 with the version from v0.0215 did have a small effect, but did not fix it.\n\nI do see some small artefacts with v0.0215\n\n- There\u0027s a thin line where the shadows aren\u0027t applied.\n- Black dots with -force-d3d11, that are not there with -force-opengl.\n\nAll of the above is with default configs for everything.\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/S2HMp/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"Rodger","CreatedById":153575,"CreatedDateTime":"2015-12-24T12:01:34Z","Content":"So I\u0027ve just tried installing this again now that I\u0027m running the 64bit mac (basically same as linux I\u0027m guessing), after having memory problems in 32bit. But anyway, I load my world, and get this:\n\n[http://i.imgur.com/ZB6OyT9.jpg](http://i.imgur.com/ZB6OyT9.jpg)  \n\nAnd like I said, running 64bit on mac, with Stock Visual Enhancements, and a whole bunch of other mods. Any ideas?"}]}