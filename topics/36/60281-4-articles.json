{"TopicId":60281,"ForumId":36,"TopicTitle":"[Hardware, Plugin] Arduino based physical display \u002B serial port io\u002B tutorial (24-11-19)","CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-01-18T01:25:25Z","PageNum":4,"Articles":[{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-05T14:00:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EUnfortunately arduino only supports 8bit PWM, so you only get 255 steps.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes.. but I\u0027m not getting 255 steps, I\u0027m getting exactly 100 (I counted them) which is a very slow, noticable jump. Surely if you used a decimal it would force the arduino to use all 255 steps instead which would be much smoother. Also, a decimal point would be better for any digital fuel gauge, particularly on very small engined craft where a whole percent is actually quite a bit of DV.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-05T15:56:06Z","Content":"\n\u003Cp\u003EMy Uno arrived today and I can confirm the plugin works fine no matter how I launch - from the VAB or from the launchpad menu.\u003C/p\u003E\u003Cp\u003EOn the Mega it only works from the VAB.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-05T16:26:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003EYes.. but I\u0027m not getting 255 steps, I\u0027m getting exactly 100 (I counted them) which is a very slow, noticable jump. Surely if you used a decimal it would force the arduino to use all 255 steps instead which would be much smoother. Also, a decimal point would be better for any digital fuel gauge, particularly on very small engined craft where a whole percent is actually quite a bit of DV.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh duh \u0022map()\u0022 only works for integers, try: analogWrite(PWMPin, round(fuelp*100/255))\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003EMy Uno arrived today and I can confirm the plugin works fine no matter how I launch - from the VAB or from the launchpad menu.\u003Cp\u003EOn the Mega it only works from the VAB.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EVery weird. I will do more tests when I get my mega.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-05T19:14:03Z","Content":"\n\u003Cp\u003EanalogWrite(PWMPin, round(fuelp*100/255)) just throws up an error when I try to upload it. - error: \u0027Fuelp\u0027 was not declared in this scope\u003C/p\u003E\u003Cp\u003E... so I tried using VData.Fuelp instead of just Fuelp... but that causes the gauge to act very strangely, with 100% fuel the guage only moves up to about 1/6 full...(as if it is only receiving less than 1 volt) and still ticks down in the same big steps as before.\u003C/p\u003E\u003Cp\u003EEDIT - Obviously I\u0027d still like to get the gauge to read 255 steps instead of 100 but I\u0027ve decided to also fit a capacitor to smooth it out even more. I have two electrolytic capacitors... 1 is 1uf 100v, the other is 0.1 uf 63v. So I just wire it parallel to the gauge?... or do I need to give it a resistor as well? Still learning basic electronics lol and don\u0027t want to put anything on unless I\u0027m sure its not going to fry \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks for the continued noob patience!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-05T20:37:07Z\u0022 title=\u002202/05/2014 08:37  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 5, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-05T21:15:21Z","Content":"\n\u003Cp\u003EOh oops, try analogWrite(PWMPin, round(VData.Fuelp*255/100)).\u003C/p\u003E\u003Cp\u003EYeah just put the cap parallel to the meter should do it. The bigger the cap the smoother, but it will also make it lag a bit.\u003C/p\u003E\n"},{"CreatedByName":"NeoMorph","CreatedById":58200,"CreatedDateTime":"2014-02-05T21:36:44Z","Content":"\n\u003Cp\u003EOK... colour me VERY IMPRESSED. Where did you get the matrix display from?\u003C/p\u003E\u003Cp\u003EI love making hardware cockpits and fell in love with the Arduino\u0027s simplicity. I\u0027ve got so many arduino shields (chinese knock-offs) and boards and drivers and buttons and switches ready to build my setup. I\u0027ve just got to sit down and finish the various bits. Some of my stuff comes out of real 60\u0027s aerospace cockpits... should make it look interesting.\u003C/p\u003E\u003Cp\u003EI\u0027ve been using Telemachus as the interface between KSP and my hardware. Works quite well with what I have breadboarded so far. \u003C/p\u003E\u003Cp\u003ENice to see you are using 7219\u0027s to drive the seven seg displays. I\u0027ve used them for my Kerpollo DSKY... (although I\u0027ve used the narrow bodied CNG version as I had bought a bulk order from China some time back as I use them in a lot of projects using Seven Seg displays).\u003C/p\u003E\u003Cp\u003EHave you thought of making meters and such from a servo driver. You can make some nice analogue displays that way and a 16 meter system can be driven using one of these...\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://learn.adafruit.com/system/assets/assets/000/009/154/medium800/1411_ORIG.jpg?1371756163\u0022 alt=\u00221411_ORIG.jpg?1371756163\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-05T21:40:51Z\u0022 title=\u002202/05/2014 09:40  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 5, 2014\u003C/time\u003E by NeoMorph\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-05T21:46:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EOh oops, try analogWrite(PWMPin, round(VData.Fuelp*255/100)).\u003Cp\u003EYeah just put the cap parallel to the meter should do it. The bigger the cap the smoother, but it will also make it lag a bit.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGreat I\u0027ll give those a try.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeoMorph\u0022 data-cite=\u0022NeoMorph\u0022\u003E\u003Cdiv\u003ESome of my stuff comes out of real 60\u0027s aerospace cockpits... should make it look interesting.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESounds awesome! I\u0027m basing my build on 1960s stuff, from Mercury, Gemini, Apollo.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/66742-Custom-hardware-control-switch-panel-simpit-WIP?p=920057#post920057\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/66742-Custom-hardware-control-switch-panel-simpit-WIP?p=920057#post920057\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIf you start a thread for your build let me know and I\u0027ll add it to my repository thread here! I asked the mods if we could have a sub forum but they said there isn\u0027t enough interest yet but would reconsider if the sub-hobby takes off.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/66763-Custom-hardware-simpit-repository-For-people-who-take-KSP-a-little-too-far?p=920499#post920499\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/66763-Custom-hardware-simpit-repository-For-people-who-take-KSP-a-little-too-far?p=920499#post920499\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT - lol just realised that not only have we already spoken on my thread... but I\u0027ve already linked your nav-ball project on the repository! Would be great to see your DSKY stuff! I\u0027m planning my third panel to be a flight data panel based on the look of the apollo computer. It will show AP/PE etc... possibly later it will actually be programmable but one step at a time!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-05T22:21:39Z\u0022 title=\u002202/05/2014 10:21  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 5, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-06T11:27:13Z","Content":"\n\u003Cp\u003EThe new code is much better, thanks. It now ticks down in 255 segments. Adding a 1uf capacitor in parallel doesnt seem to have made it any smoother though.\u003C/p\u003E\u003Cp\u003EBut I\u0027m on track now for my build for the dial panel and I can start buying up some nice retro gauges in preparation! I hope you make good progress on the UI you mentioned so I can add all the other resources I need to display \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI might start looking ar 8 digit 7 segment displays too for my third panel (flight data)\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-06T17:59:13Z","Content":"\n\u003Cp\u003EThe next step is figure out the weird issue with arduino MEGAs, then look into user editable config file, then controlling KSP from arduino, after that I will add more features, so you might need to wait for a bit...\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-06T18:04:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeoMorph\u0022 data-cite=\u0022NeoMorph\u0022\u003E\u003Cdiv\u003EWhere did you get the matrix display from? \u003Cp\u003ENice to see you are using 7219\u0027s to drive the seven seg displays. I\u0027ve used them for my Kerpollo DSKY... (although I\u0027ve used the narrow bodied CNG version as I had bought a bulk order from China some time back as I use them in a lot of projects using Seven Seg displays).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s just a standard 20x4 character display, you can get one on ebay or many websits for ~$10. I don\u0027t actually use MAX7219s since they are super expensive. I\u0027m using AS1117, which is basically the same just much cheaper.\u003C/p\u003E\n"},{"CreatedByName":"NeoMorph","CreatedById":58200,"CreatedDateTime":"2014-02-06T20:35:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EIt\u0027s just a standard 20x4 character display, you can get one on ebay or many websits for ~$10. I don\u0027t actually use MAX7219s since they are super expensive. I\u0027m using AS1117, which is basically the same just much cheaper.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EROFL... I just found I have a couple of them in one of my parts boxes (I tend to buy stuff on ebay that sounds interesting and then forget about them... I\u0027m most definitely a parts whore - I\u0027ll take anything).\u003C/p\u003E\u003Cp\u003EWeird about those 7219\u0027s because according to your BOM you use two wide 7219 SOICs (U7 and U8). Maybe you forgot to update it. If you buy a batch of them from China they aren\u0027t that expensive tbh. Just a long lead time is all.\u003C/p\u003E\u003Cp\u003EMulbin, the reason I had stalled on my project was that I was saving up for a CNC so that I can cut my parts with more accuracy. I\u0027ll be getting a four axis 6040Z in the next couple of months and then I will be able to make everything from the engraved panels to the custom mountings for my nav ball innards (which were driving me bonkers last year due to being out of alignment slightly which caused friction drag at one part of the 3D rotation which led to drift after about 5 mins... not good).\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-06T22:03:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeoMorph\u0022 data-cite=\u0022NeoMorph\u0022\u003E\u003Cdiv\u003Eengraved panels to the custom mountings\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI like the sound of that... I will initially be creating transfer prints for my labels etc, but as a graphic designer I have a really good printing company I use who can print directly on to the composite board (which I am using for my project) for more permanent boards in the future. But now you have mentioned engraved panels I\u0027ve realised I have access to my old college laser etcher / cutter so that might be another option.\u003C/p\u003E\n"},{"CreatedByName":"NeoMorph","CreatedById":58200,"CreatedDateTime":"2014-02-07T20:13:32Z","Content":"\n\u003Cp\u003EThe reason I want to go with the engraved panels is that I love backlighting them. Nothing that makes a sim more fun than working it in a darkened room. There is a cheat way you can go if you can\u0027t afford backlighting though... My first cockpit I made used labels that were UV reactive and had a black light overhead. Was pretty much the way they did it back in the 30\u0027s and 40\u0027s iirc.\u003C/p\u003E\u003Cp\u003EMy ATR72 cockpit for example (panels that I bought from a Flight Sim parts supplier) used white semi-transparent acrylic which was first painted and then engraved. Light behind then comes through where the paint has been removed. I\u0027ve got the idea of doing the spacecraft ones using clear acrylic and then spraying the panel black (two coats to block the light), then adding a white and then grey final layer. Then spraying the whole panel with liquid masking and then engraving it. The next step will be to add a think layer of white paint before removing the masking. That SHOULD leave the white lettering that will glow when a backlight is placed behind the panel.\u003C/p\u003E\u003Cp\u003EBut first I have got to get my CNC machine and learn how to use it properly... this is not a project that is going to be finished overnight.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-07T22:44:43Z","Content":"\n\u003Cp\u003EUm... I got my mega, and what do you know? It works perfectly fine! I don\u0027t even.... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E\u003C/p\u003E\u003Cp\u003EUnless people complain, I think I\u0027ll just leave this at that. So it seems for some people as long as you launch from VAB or SPH it works, it\u0027s annoying but I think I\u0027ll move on to add more features.\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-08T19:21:13Z","Content":"\n\u003Cp\u003E\u003Cspan\u003EUpdate 4: Added user settings! See first post.\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"Donziboy2","CreatedById":74984,"CreatedDateTime":"2014-02-08T19:48:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003EThe new code is much better, thanks. It now ticks down in 255 segments. Adding a 1uf capacitor in parallel doesnt seem to have made it any smoother though.\u003Cp\u003EBut I\u0027m on track now for my build for the dial panel and I can start buying up some nice retro gauges in preparation! I hope you make good progress on the UI you mentioned so I can add all the other resources I need to display \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI might start looking ar 8 digit 7 segment displays too for my third panel (flight data)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe capacitor size really depends on the resistance of the gauge. If the resistance is high and the capacitance is low it will charge to fast making it jump between ticks and if the resistance is to low and the capacitance to high it may never settle in the right spot at all. You will most likely have to increase the size until your happy with its speed, keep in mind that the larger the cap you use the longer it will take to settle when you first power the gauge and it goes to 100%(full tank/battery).\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-08T20:50:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Donziboy2\u0022 data-cite=\u0022Donziboy2\u0022\u003E\u003Cdiv\u003EThe capacitor size really depends on the resistance of the gauge. If the resistance is high and the capacitance is low it will charge to fast making it jump between ticks and if the resistance is to low and the capacitance to high it may never settle in the right spot at all. You will most likely have to increase the size until your happy with its speed, keep in mind that the larger the cap you use the longer it will take to settle when you first power the gauge and it goes to 100%(full tank/battery).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks thats really helpful, I\u0027ll probably pick up a grab back of mixed caps and have a play around.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003E\u003Cspan\u003EUpdate 4: Added user settings! See first post.\u003C/span\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E!!!! wow, that was quick. what can we edit?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EUm... I got my mega, and what do you know? It works perfectly fine! I don\u0027t even.... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E\u003Cp\u003EUnless people complain, I think I\u0027ll just leave this at that. So it seems for some people as long as you launch from VAB or SPH it works, it\u0027s annoying but I think I\u0027ll move on to add more features.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAlthough it would be great to track down the bug later, I agree... there is a work around so more important to get functionality up and the ability to add more data types / a user editor.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-08T20:54:54Z\u0022 title=\u002202/08/2014 08:54  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 8, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AMirrodin","CreatedById":102604,"CreatedDateTime":"2014-02-09T19:28:38Z","Content":"\n\u003Cp\u003EFound a way to send commands from my arduino to the plugin. I made a new function to check if a button was pressed and if it was then it executed Serial.println(F(\u0022KSP;1\u0022)). I also had to put a new if statement in the plugin C# code to look for the message.\u003C/p\u003E\u003Cp\u003EArduino code snip:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evoid SendStage(){\u003Cbr\u003E  if(digitalRead(2) == HIGH){\u003Cbr\u003E    Serial.println(F(\u0022KSP;1\u0022));\u003Cbr\u003E  }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EPlugin code snip:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//This part is usually here\u003Cbr\u003Eif (parsed[0] == \u0022KSP\u0022)\u003Cbr\u003E{\u003Cbr\u003E   short messageID = (short)double.Parse(parsed[1]);\u003Cbr\u003E   if (messageID == 0)\u003Cbr\u003E   {\u003Cbr\u003E      DisplayFound = true;\u003Cbr\u003E   }\u003Cbr\u003E//Added code below\u003Cbr\u003E   if (messageID == 1)\u003Cbr\u003E   {\u003Cbr\u003E      Staging.ActivateNextStage();\u003Cbr\u003E   }                            \u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-09T22:28:23Z","Content":"\n\u003Cp\u003EThat\u0027s fine, bear in mind that I will be overhauling the input code next week. Right now it\u0027s just a place holder. It will be much easier to use and will allow many inputs but will be completely different. If you guys can come up with a list of controls (RCS, SAS, etc.) you would like to have that would be helpful.\u003C/p\u003E\n"},{"CreatedByName":"katton","CreatedById":97529,"CreatedDateTime":"2014-02-10T03:09:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zitronen\u0022 data-cite=\u0022zitronen\u0022\u003E\u003Cdiv\u003EThat\u0027s fine, bear in mind that I will be overhauling the input code next week. Right now it\u0027s just a place holder. It will be much easier to use and will allow many inputs but will be completely different. If you guys can come up with a list of controls (RCS, SAS, etc.) you would like to have that would be helpful.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe ones that I had in mind were:\u003C/p\u003E\u003Cp\u003E - Action groups 1-10 (\u002B Abort) (if you could have the plugin tell the arduino whether these had actions assigned to them, ie. whether they\u0027re empty or not it would be pretty neat)\u003C/p\u003E\u003Cp\u003EFor the following, it could either be a toggle-the-value type of command, or two dedicated commands for each (plus, if the plugin once again could report on the state of all of them, it would be helpful for indicators and the like)\u003C/p\u003E\u003Cp\u003E - SAS on / off\u003C/p\u003E\u003Cp\u003E - RCS on / off\u003C/p\u003E\u003Cp\u003E - Precision mode on/off\u003C/p\u003E\u003Cp\u003E - Lights on/off\u003C/p\u003E\u003Cp\u003E - Gear on/off\u003C/p\u003E\u003Cp\u003E - Brakes on/off\u003C/p\u003E\u003Cp\u003E - Set throttle to X (also, once again, returning the current throttle to the arduino would be neat)\u003C/p\u003E\u003Cp\u003E - Stage (of course)\u003C/p\u003E\u003Cp\u003E - Time Warp (eventually, I assume that this one is going to be hard to program) (set to X multiplier command from arduino, and return to arduino current warp multiplier, whether it\u0027s physical or not, and perhaps the max multiplier, if possible)\u003C/p\u003E\u003Cp\u003E - Rotation and Translation Commands - I\u0027m not sure if this is the best way to do it, but eventually hooking up joysticks through the arduino would be neat. I don\u0027t know if the refresh rate would make it possible or not, but sending pitch, yaw, roll, and x, y z translation commands would be peachy.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-10T10:13:00Z","Content":"\n\u003Cp\u003EDo controls need to go through the plugin? They are just keystrokes which KSP already understands without the plugin... why not just use keyboard.print?\u003C/p\u003E\u003Cp\u003EAlso why do you need to put the joystick through Arduino... joysticks already work.\u003C/p\u003E\u003Cp\u003EOr am I missing something?\u003C/p\u003E\u003Cp\u003EAnyway if there is actually a reason to send keystrokes though the plugin can I suggest a nice option would be to program it to allow for toggle switches as well as momentary switches? i.e. flipping a switch to the \u0022on\u0022 or back to the \u0022off\u0022 postion just sends a short \u0022tap\u0022 on the control... otherwise it will be like holding a keyboard button down.\u003C/p\u003E\u003Cp\u003EBelow is what I mean by sending a \u0022tap\u0022 rather than a constant \u0022on\u0022 signal - although in this example it is sending a joypad button press rather than keyboard.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.desktopaviator.com/Products/Model_2120/2120B.gif\u0022 alt=\u00222120B.gif\u0022\u003E\u003C/p\u003E\u003Cp\u003EFor me - as it is already quite simple to send commands to KSP without this plugin the much more important factor is to get more usful data coming out of the plugin to drive displays.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-10T10:18:55Z\u0022 title=\u002202/10/2014 10:18  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 10, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Donziboy2","CreatedById":74984,"CreatedDateTime":"2014-02-10T11:51:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003EDo controls need to go through the plugin? They are just keystrokes which KSP already understands without the plugin... why not just use keyboard.print?\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think katton was referring to custom Keyboards or control panels that would be controlled by the Arduino. Having a nice display and then an IBM keyboard on your desk kind of kills the immersion.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAlso why do you need to put the joystick through Arduino... joysticks already work.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ekatton said nothing about a joystick, but making a custom joystick similar to in game ones would be pretty cool. Also not everyone has a joystick, maybe katton wants fine control of the throttle instead of the limited control you get with the keyboard.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnyway if there is actually a reason to send keystrokes though the plugin can I suggest a nice option would be to program it to allow for toggle switches as well as momentary switches? i.e. flipping a switch to the \u0022on\u0022 or back to the \u0022off\u0022 postion just sends a short \u0022tap\u0022 on the control... otherwise it will be like holding a keyboard button down.\u003C/p\u003E\u003Cp\u003EBelow is what I mean by sending a \u0022tap\u0022 rather than a constant \u0022on\u0022 signal - although in this example it is sending a joypad button press rather than keyboard.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.desktopaviator.com/Products/Model_2120/2120B.gif\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.desktopaviator.com/Products/Model_2120/2120B.gif\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is actually the best way to implement it, a few if statements would probably be all that is required.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003EFor me - as it is already quite simple to send commands to KSP without this plugin the much more important factor is to get more usful data coming out of the plugin to drive displays.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think hammering down what other data needs to be sent is important, I would like to know the actual limit to information that can be received in the 80ms default time frame given.\u003C/p\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-10T12:19:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Donziboy2\u0022 data-cite=\u0022Donziboy2\u0022\u003E\u003Cdiv\u003EI think katton was referring to custom Keyboards or control panels that would be controlled by the Arduino. Having a nice display and then an IBM keyboard on your desk kind of kills the immersion.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes I know, I\u0027ve built one... it doesn\u0027t need the plugin. You can just program the Arduino to send keystrokes... which KSP already understands, sending them via the plugin is redundant.\u003C/p\u003E\u003Cp\u003EFor example, program the Arduino so that when you press a button, it sends the signal for the \u0022G\u0022 key... when you press the button/switch, the gear will lower (because KSP thinks you have pressed G on your keyboard)... no need for the plugin to get involved.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Donziboy2\u0022 data-cite=\u0022Donziboy2\u0022\u003E\u003Cdiv\u003Ekatton said nothing about a joystick\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThats exactly what he said..l\u0027m just not sure what the point is as joysticks already work with ksp.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022katton\u0022 data-cite=\u0022katton\u0022\u003E\u003Cdiv\u003Eeventually hooking up joysticks through the arduino would be neat.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAgain, I might have missed something but can\u0027t really see the what the bonus is of putting this data through zitronens plugin is rather than just sending straight to your computer as usual which works just fine. I can do all this without the plugin even installed... The genius of this plugin is that it gets data out of KSP, putting commands into the game is a standard feature of the game already.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-10T12:22:06Z\u0022 title=\u002202/10/2014 12:22  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 10, 2014\u003C/time\u003E by Mulbin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mulbin","CreatedById":55562,"CreatedDateTime":"2014-02-10T12:29:40Z","Content":"\n\u003Cp\u003ETo illustrate my point here is my current setup, neither the joystick or the switch board need to go through zitronens plugin as ksp already listens for joystick commands and keystrokes by default. Why have an RCS command on the plugin when your arduino can just send the signal \u0022R\u0022 via the \u0022keyboard.print\u0022 command...\u003C/p\u003E\u003Cp\u003E...seriously though, I might have missed some advantage to pushing these commands through an extra plugin but I\u0027m scratching my head as to what the point is.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/zuxv4oA.jpg\u0022 alt=\u0022zuxv4oA.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"zitronen","CreatedById":11842,"CreatedDateTime":"2014-02-10T14:02:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mulbin\u0022 data-cite=\u0022Mulbin\u0022\u003E\u003Cdiv\u003EDo controls need to go through the plugin? They are just keystrokes which KSP already understands without the plugin... why not just use keyboard.print?\u003Cp\u003EAlso why do you need to put the joystick through Arduino... joysticks already work.\u003C/p\u003E\u003Cp\u003EOr am I missing something?\u003C/p\u003E\u003Cp\u003EAnyway if there is actually a reason to send keystrokes though the plugin can I suggest a nice option would be to program it to allow for toggle switches as well as momentary switches? i.e. flipping a switch to the \u0022on\u0022 or back to the \u0022off\u0022 postion just sends a short \u0022tap\u0022 on the control... otherwise it will be like holding a keyboard button down.\u003C/p\u003E\u003Cp\u003EBelow is what I mean by sending a \u0022tap\u0022 rather than a constant \u0022on\u0022 signal - although in this example it is sending a joypad button press rather than keyboard.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.desktopaviator.com/Products/Model_2120/2120B.gif\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.desktopaviator.com/Products/Model_2120/2120B.gif\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EFor me - as it is already quite simple to send commands to KSP without this plugin the much more important factor is to get more usful data coming out of the plugin to drive displays.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk the problem is say you have a switch that turns the lights on, but what if your lights are already on? If you flip the switch to on the lights will turn off. If you want to use use a separate device for control that\u0027s fine, it\u0027s what I do as well, but other people would like the ability to send commands to KSP, maybe for a guidance computer which will require input and output. I think that\u0027s reasonable and quite cool. \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Donziboy2\u0022 data-cite=\u0022Donziboy2\u0022\u003E\u003Cdiv\u003EI think hammering down what other data needs to be sent is important, I would like to know the actual limit to information that can be received in the 80ms default time frame given.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe packet is currently limited to 255 bytes, we are using 69 bytes right now so still lots of space left, because we are using a relatively efficient binary format. If we ever run out of bytes it\u0027s easy to just make a new packet type. It takes less than 10ms to transmit 255 bytes at the default 38400 Baud. If that ever becomes an issue we can triple the Baud rate to 115200, which if I may quote the great Bill Gates \u0022should be enough for anyone\u0022.\u003C/p\u003E\u003Cp\u003EEdit: If you guys want to put together a list of data you want sent from KSP that would be nice too. I will start on that when I get basic inputs working.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-10T14:05:12Z\u0022 title=\u002202/10/2014 02:05  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 10, 2014\u003C/time\u003E by zitronen\u003C/strong\u003E\n\u003C/span\u003E\n"}]}