{"TopicId":60163,"ForumId":34,"TopicTitle":"[0.90] Custom Biomes 1.7.0 [17 Dec]","CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-01-16T19:09:54Z","PageNum":7,"Articles":[{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-04-28T04:59:50Z","Content":"\n\u003Cp\u003EGreat! Thank you so much. Will do.\u003C/p\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2014-04-28T16:41:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Hotblack Desiato\u0022 data-cite=\u0022Hotblack Desiato\u0022\u003E\u003Cdiv\u003Efeature idea: is it possible to alter the biome map, like an animated gif? or switch between various similar biome maps.\u003Cp\u003Ereason for that: if it is possible to do that, planets could have seasons. research could be done through various seasons, and not once per location\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENow get someone to integrate your idea into FAR and SCANsat for variable weather effects! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-05-04T16:03:39Z","Content":"\n\u003Cp\u003EWere these biomes made in Paint or are they based on the actual terrains?\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-05-05T17:03:06Z","Content":"\n\u003Cp\u003EThey were based off SCANSAT maps for each of the bodies, overlaid in GIMP. I don\u0027t guarantee that the boundaries will match up perfectly with all the terrain everywhere, but if you notice glaring errors let me know so I can fix them.\u003C/p\u003E\n"},{"CreatedByName":"Raven.","CreatedById":99340,"CreatedDateTime":"2014-05-07T06:01:43Z","Content":"\n\u003Cp\u003ETrueborn, I have a question for you if you don\u0027t mind. I don\u0027t think this is possible, but I am curious as to the size of the biome maps. Is it possible to have higher resolution biome maps? Or is the 1024x512 resolution a limitation set by KSP itself?\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-05-07T16:36:51Z","Content":"\n\u003Cp\u003EI haven\u0027t done any experiments with higher rest maps, so I can\u0027t say for sure. But you\u0027re welcome to try scaling one of the maps up and seeing what happens \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E For most of the smaller bodies I think the 1024 rest is plenty, but I could see a higher rest map being used on some of the more complex planets.\u003C/p\u003E\n"},{"CreatedByName":"Kowal04","CreatedById":109342,"CreatedDateTime":"2014-05-07T16:56:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022porrohman\u0022 data-cite=\u0022porrohman\u0022\u003E\u003Cdiv\u003EI\u0027m getting some work done\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/SESAXbe.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/SESAXbe.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EWho knows what might be hidden in that detail........\u003C/p\u003E\u003Cp\u003EI should have everything done and in a zip by monday\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo unfortunate it was abandoned. I would love to see this incorporated into the game.\u003C/p\u003E\n"},{"CreatedByName":"Raven.","CreatedById":99340,"CreatedDateTime":"2014-05-08T03:18:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kowal04\u0022 data-cite=\u0022Kowal04\u0022\u003E\u003Cdiv\u003ESo unfortunate it was abandoned. I would love to see this incorporated into the game.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat planet/moon is this? I think that map may be in the Custom Biomes 1.5 download.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trueborn\u0022 data-cite=\u0022Trueborn\u0022\u003E\u003Cdiv\u003EI haven\u0027t done any experiments with higher rest maps, so I can\u0027t say for sure. But you\u0027re welcome to try scaling one of the maps up and seeing what happens \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E For most of the smaller bodies I think the 1024 rest is plenty, but I could see a higher rest map being used on some of the more complex planets.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll probably give it a try if you don\u0027t mind me messing around with the source. I noticed you had it hard coded in the source, and was wondering if that could be changed.\u003C/p\u003E\u003Cp\u003EI you\u0027re right, for smaller planets and moons such as Minmus, 1024x512 is more than fine. But for Kerbin, Eve, and Duna, I think it needs 2048x1024.\u003C/p\u003E\n"},{"CreatedByName":"Kowal04","CreatedById":109342,"CreatedDateTime":"2014-05-08T08:43:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Raven.\u0022 data-cite=\u0022Raven.\u0022\u003E\u003Cdiv\u003EWhat planet/moon is this? I think that map may be in the Custom Biomes 1.5 download.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt is Duna. You can find it in second page of this thread.\u003C/p\u003E\n"},{"CreatedByName":"Raven.","CreatedById":99340,"CreatedDateTime":"2014-05-08T12:24:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kowal04\u0022 data-cite=\u0022Kowal04\u0022\u003E\u003Cdiv\u003EIt is Duna. You can find it in second page of this thread.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, sometime this summer I will be tackling Duna, as I\u0027ve been asked by a few people to do a biome map for that particular planet. But I cannot tackle it until I\u0027m finished with my current Kerbin project. In the meantime, Trueborn has a basic biome map for Duna in the main download that should hold you over until then.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-05-08T22:08:21Z","Content":"\n\u003Cp\u003EIf you get some good utility out of larger biome maps, I\u0027ll change the code to just look for aspect ratio instead.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-10T09:24:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trueborn\u0022 data-cite=\u0022Trueborn\u0022\u003E\u003Cdiv\u003EAnd as suggested, I have released version 1.5\u003Cp\u003E\u003Ca href=\u0022www.kerbalspaceprogram.com/custombiomes\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003ESpaceport Download\u003C/span\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EFor users, there won\u0027t be much of a change except that you can expect to see more customized Science results from across the Kerbol system. At least on Bop, Dres, Duna, Eeloo, and Eve. Eventually I\u0027ll do more (and spell check it), but just those five planets is almost 500 lines. The way I\u0027m putting these into the game is a little odd, so there is a good chance there will be an error or two. Please let me know so I can track them down.\u003C/p\u003E\u003Cp\u003EFor those of you interested in building your own custom biomes, there are a few more changes.\u003C/p\u003E\u003Cp\u003EFirst, is the addition of a ScienceResults.txt file in the biome directory. This is where I\u0027m putting all of the science results that get input with the new biomes. The format is pretty simple. The file is divided up by experiment, with the lead being a line:\u003C/p\u003E\u003Cp\u003Eid = \u003Cem\u003EExperimentID\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EThis is then followed by a number of lines for specific biomes. These use the same format as the ScienceDefs file, which is \u003Cem\u003EBody Name\u003C/em\u003E, \u003Cem\u003ESrfLanded\u003C/em\u003E or \u003Cem\u003ESrfSplashed\u003C/em\u003E, and then the \u003Cem\u003EBiome Name\u003C/em\u003E. The next id line or end of the file automatically terminates each experiment.\u003C/p\u003E\u003Cp\u003EThe second change is to the attribute files. The first line of each attribute file is now checked to see if the exact search feature is used or not. If the line is 0, exact search is not used. All of my biomes are currently set to 0. You can set your own value, which is read as a float. This enables exact search and sets the threshold to the provided value. None of squad\u0027s biomes use a value, so I can\u0027t recommend a good one. If you find something that works well, let us know!\u003C/p\u003E\u003Cp\u003EIf there is anything else you have questions about, please let me know.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://1drv.ms/1einCrz\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003EAlternate Download\u003C/span\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://1drv.ms/1einxEp\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003ESource code.\u003C/span\u003E\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI know I\u0027m quoting something quite old here, but I\u0027ve got a question that doesn\u0027t seem to have been addressed at all, namely, what exactly does the search threshold value do? From reading, I get the impression that if you set it to zero, you get a return of the exact biome you\u0027re currently sitting over but what changes if you adjust this number to some other value? Is there a possibility this could get rid of random biomes showing up where they aren\u0027t supposed to?\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-05-10T22:51:34Z","Content":"\n\u003Cp\u003EWe\u0027ve done a little research on it, but it doesn\u0027t seem like it was fully implemented by Squad. None of the stock biomes use it. You\u0027re free to play around with different values yourself (it is the first line in each biome file), and if you get good results let me know.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-12T13:41:11Z","Content":"\n\u003Cp\u003EOut of curiosity, how much does increasing the number of biomes increase memory usage, if at all? I\u0027m working on a fairly complex biome map for the RSS Moon, and I\u0027m having to fight to get myself under 60 biomes...\u003C/p\u003E\n"},{"CreatedByName":"Raven.","CreatedById":99340,"CreatedDateTime":"2014-05-12T18:49:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003EI know I\u0027m quoting something quite old here, but I\u0027ve got a question that doesn\u0027t seem to have been addressed at all, namely, what exactly does the search threshold value do? From reading, I get the impression that if you set it to zero, you get a return of the exact biome you\u0027re currently sitting over but what changes if you adjust this number to some other value? Is there a possibility this could get rid of random biomes showing up where they aren\u0027t supposed to?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m gonna repost this below to help the question.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Raven.\u0022 data-cite=\u0022Raven.\u0022\u003E\u003Cdiv\u003EOk, last night I did some rather intensive testing with Custom Biomes 1.5 with a biome map that incorporated 20\u002B biomes for Kerbin. I found some interesting things out.\u003Cp\u003EMe personally, I do not think that the ExactMatch variable does what we were thinking it does. Even with the variable enabled, it still attempts to smooth the transition between biomes. However, instead of every biome with in-between RGB values being reported as the player is transitioning from one biome to the next, it instead reports the first biome in the .att file during the transfer. Basically the current RGB values are still making a smooth transfer between different regions on the map, but the game does not report the current biome unless the RGB values match \u003Cstrong\u003Eexactly\u003C/strong\u003E with a defined biome in the att file. If the RGB values do not match, the game reports the first biome defined in the att file. With ExactMatch disabled, if the RGB values do not match, the game rounds to the nearest defined biome. \u003C/p\u003E\u003Cp\u003EThe ExactMatchThreshold value does not seem to have any effect on the biomes and biomes detection method. In fact, it seems to be a pure boolean value; if the value is zero, then ExactMatch is \u003Cstrong\u003Efalse,\u003C/strong\u003E if the value is something other than zero, then ExactMatch is \u003Cstrong\u003Etrue.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe ExactMatch variable does have a lot of usefulness, just not in the way we were expecting. For example the first biome listed in an att file can be a \u0022Transitioning\u0022 biome, or a \u0022Middle of Nowhere\u0022 biome with zero science value. That way the player is aware that the game is transitioning from one biome to the next, and won\u0027t automatically report the transition as a bug. Basically the first biome listed is the \u003Cstrong\u003Edefault\u003C/strong\u003E biome when ExactMatch is enabled.\u003C/p\u003E\u003Cp\u003EIn my own personal experience of working with biomes thus far, it my personal recommendation that ExactMatch be enabled (with threshold set to 1.0) for biome maps that have biomes that are generally very large in surface area, and that a default biome be defined as the first biome for that particular biome map. ExactMatch should be turned off for maps that contain biomes that are very small in surface area, as the game has a hard time picking up small biomes when ExactMatch is enabled for some odd reason. The threshold value does not appear to matter. I also strongly recommend that as part of a biome map\u0027s design, that special attention is paid to contrast and what colors are being used. Choosing colors that are close to each other in RGB values directly next to each other (low contrast) will minimize the transitioning effects where as much higher contrast will cause transitioning issues. I\u0027ve noticed that a difference of ten is recognizable by the game, where as with smaller value differences the game gets confused. For example, the game will recognize the difference between two biomes with values 255, 255, 255 and 245, 255, 255. But the game will get confused with values 255, 255, 255 and 250, 255, 255 unless ExactMatch is enabled.\u003C/p\u003E\u003Cp\u003EI hope this helps with anyone wanting to develop biome maps. Also, special thanks to Trueborn for creating this resource and for implementing the ExactMatch feature, as my current project would not be possible otherwise \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003EOut of curiosity, how much does increasing the number of biomes increase memory usage, if at all? I\u0027m working on a fairly complex biome map for the RSS Moon, and I\u0027m having to fight to get myself under 60 biomes...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt does not increase memory usage, at least none that I\u0027ve been able to detect. If it does, then it\u0027s so small that it doesn\u0027t register in Windows 7\u0027s resource manager. I believe the memory usage would be from the size of the biome map itself.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-12T18:52:59Z\u0022 title=\u002205/12/2014 06:52  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 12, 2014\u003C/time\u003E by Raven.\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-05-12T19:51:37Z","Content":"\n\u003Cp\u003EThe only way you should notice a memory increase is in using larger textures for the biomes maps. The definitions themselves are a string and a couple of floats, so pretty tiny.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-13T11:33:23Z","Content":"\n\u003Cp\u003EThanks for the input so far.. Now I\u0027ve got my Moon map working in game, but it\u0027s stuck on the old Mun biome names. Is there a way to rename or omit the old names so I can use all of my own new names? Doesn\u0027t seem like anyone has mentioned this up until now (and yes, I searched)...\u003C/p\u003E\u003Cp\u003EEDIT: Nevermind... stupid formatting error was stupid... I included the ExactMatchThreshold value for each entry instead of just one for the whole file, fixing that fixed the incorrectly displayed names.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-13T12:43:22Z\u0022 title=\u002205/13/2014 12:43  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 13, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-15T12:07:42Z","Content":"\n\u003Cp\u003EOk so I could use a little help / input...\u003C/p\u003E\u003Cp\u003EThis is my mostly completed map of the Moon:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/eDRj0OY.png\u0022 alt=\u0022eDRj0OY.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe problem I\u0027m running into is color selection to ensure crossing boundaries doesn\u0027t make the biomes jump all over the place. As is, there are only a few places where transitions don\u0027t cause jumping biomes, so I definitely need to do something about it. Any input would be helpful. Also, I tried ExactMatchThreshold at 1 and created a transition biome, only to have that pretty much be the only biome ever reported...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-15T12:48:23Z\u0022 title=\u002205/15/2014 12:48  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 15, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-05-16T21:31:08Z","Content":"\n\u003Cp\u003EMy suggestion is to increase the contrast between neighboring biomes as much as possible. Instead of going from light purple to medium purple to dark purple, go from light purple to yellow to dark purple, etc. That should help with mis-reporting the biomes. I\u0027m not sure if compression impacts the transitions at all, but that\u0027s something else to consider.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-17T09:25:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trueborn\u0022 data-cite=\u0022Trueborn\u0022\u003E\u003Cdiv\u003EMy suggestion is to increase the contrast between neighboring biomes as much as possible. Instead of going from light purple to medium purple to dark purple, go from light purple to yellow to dark purple, etc. That should help with mis-reporting the biomes. I\u0027m not sure if compression impacts the transitions at all, but that\u0027s something else to consider.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe issue isn\u0027t so much that its not detecting the change, but rather that it\u0027s detecting other biomes as it smooths the transition. For example, when I go from the yellow to the red, it detects orange and delivers that biome. I will try what you suggest, but I\u0027m concerned that I\u0027m going to end up having to spend a lot of time creating a color list where no two bordering biomes create a color similar to another biome.\u003C/p\u003E\u003Cp\u003EAlso, PNG compression is lossless, so I don\u0027t think that plays a factor here. What I would like to know if there is a way to use a larger map for this. It may help get better definition between biomes if there are fewer transition pixels to deal with.\u003C/p\u003E\n"},{"CreatedByName":"Thrust","CreatedById":110981,"CreatedDateTime":"2014-05-17T15:47:47Z","Content":"\n\u003Cp\u003EI think that to avoid biomes jumping the image needs to be \u0022pixel sharp\u0022. Every pixel must be in one of the colors from the list (.att).\u003C/p\u003E\u003Cp\u003ELook at this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/cKUZncp.jpg\u0022 alt=\u0022cKUZncp.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ELeft is too blurry.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-05-17T20:14:50Z","Content":"\n\u003Cp\u003EAlso, the fact that PNG is lossless doesn\u0027t matter; KSP converts loaded textures to DXT1 (if RGB) or DXT5 (if RGBA). Since DXT5 uses the same compression for RGB as DXT1, we\u0027ll just talk about that. DXT1 \u003Cstrong\u003E\u003Cem\u003Eis\u003C/em\u003E\u003C/strong\u003E lossy, \u003Cstrong\u003Eand \u003C/strong\u003Eis only 16-bit color (5\u002B6\u002B5 bits), so there\u0027s even more reason to be sure spatial neighbors aren\u0027t color neighbors.\u003C/p\u003E\n"},{"CreatedByName":"Raven.","CreatedById":99340,"CreatedDateTime":"2014-05-17T21:07:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003EThe issue isn\u0027t so much that its not detecting the change, but rather that it\u0027s detecting other biomes as it smooths the transition. For example, when I go from the yellow to the red, it detects orange and delivers that biome. I will try what you suggest, but I\u0027m concerned that I\u0027m going to end up having to spend a lot of time creating a color list where no two bordering biomes create a color similar to another biome.\u003Cp\u003EAlso, PNG compression is lossless, so I don\u0027t think that plays a factor here. What I would like to know if there is a way to use a larger map for this. It may help get better definition between biomes if there are fewer transition pixels to deal with.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOne thing on my to-do list is to modify the code to see if a higher resolution biome map can be used. I do not know if it\u0027s possible or not, but it\u0027s worth a shot. \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EAlso, the fact that PNG is lossless doesn\u0027t matter; KSP converts loaded textures to DXT1 (if RGB) or DXT5 (if RGBA). Since DXT5 uses the same compression for RGB as DXT1, we\u0027ll just talk about that. DXT1 \u003Cstrong\u003E\u003Cem\u003Eis\u003C/em\u003E\u003C/strong\u003E lossy, \u003Cstrong\u003Eand \u003C/strong\u003Eis only 16-bit color (5\u002B6\u002B5 bits), so there\u0027s even more reason to be sure spatial neighbors aren\u0027t color neighbors.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat explains some things I\u0027ve noticed with the biome maps, such as the game getting confused with RGB value differences that are less than 10 for example.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-18T11:27:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Thrust\u0022 data-cite=\u0022Thrust\u0022\u003E\u003Cdiv\u003EI think that to avoid biomes jumping the image needs to be \u0022pixel sharp\u0022. Every pixel must be in one of the colors from the list (.att).\u003Cp\u003ELook at this:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/cKUZncp.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/cKUZncp.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ELeft is too blurry.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is one thing I figured out for myself. The fuzziness of my image is a direct result of the source data being at least 20x larger than the final 1024x512 image. I had been using photoshop default bicubic resampling when I shrunk the working image down to the final size, which resulted in all those soft edges. I\u0027ve since gone back and used nearest-neighbor which preserves hard edges, though it still leaves quite a few pixels that need to be made solid. Its something that I\u0027m going to have to figure out how to automate if I want to keep using large scale, real data.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EAlso, the fact that PNG is lossless doesn\u0027t matter; KSP converts loaded textures to DXT1 (if RGB) or DXT5 (if RGBA). Since DXT5 uses the same compression for RGB as DXT1, we\u0027ll just talk about that. DXT1 \u003Cstrong\u003E\u003Cem\u003Eis\u003C/em\u003E\u003C/strong\u003E lossy, \u003Cstrong\u003Eand \u003C/strong\u003Eis only 16-bit color (5\u002B6\u002B5 bits), so there\u0027s even more reason to be sure spatial neighbors aren\u0027t color neighbors.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll really have to look into the colors that I\u0027m using then, as I\u0027m pretty sure some of them are 32-bit. After I\u0027ve cleaned up the edges through the above method, the map is a lot more accurate, but there are still some issues. For example, when I try to use ExactMatchThreshold, certain areas still only return the transition biome rather than the correct biome, though most of the others work much better now. I\u0027m currently trying to find a more efficient way of distributing colors so that mixed colors are kept to a minimum... I feel like this might be easily done with a script, but sadly my coding skills are quite rusty these days.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Raven.\u0022 data-cite=\u0022Raven.\u0022\u003E\u003Cdiv\u003EOne thing on my to-do list is to modify the code to see if a higher resolution biome map can be used. I do not know if it\u0027s possible or not, but it\u0027s worth a shot.\u003Cp\u003EThat explains some things I\u0027ve noticed with the biome maps, such as the game getting confused with RGB value differences that are less than 10 for example.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHaving a higher resolution probably won\u0027t get rid of transition biomes, but I really think that it would make them pass much quicker. As always though, the issue of memory will start to grow pretty quickly.\u003C/p\u003E\u003Cp\u003EThe question I have right now, is might it not just be a better approach to have all of the colors be variations on that same hue with different saturation / value settings? I\u0027ve got 21 biomes (22 if you include the transition zone), which means that even with at least 10 points difference between each, there should be room to spare on the spectrum. This would get rid of the issues with two neighboring colors combining to make a third, at least for most circumstances, though it will probably get confused still if a lighter and darker neighboring set result in a value that is similar to another found on the map...\u003C/p\u003E\u003Cp\u003EEDIT: I can confirm that I\u0027ve been working in 16-bit only mode the whole time, so I guess that\u0027s not necessarily a big issue, though I wouldn\u0027t 100% rule it out.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-18T22:34:49Z\u0022 title=\u002205/18/2014 10:34  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 18, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-18T23:18:40Z","Content":"\n\u003Cp\u003ESo, a little bit of an update...\u003C/p\u003E\u003Cp\u003EAfter some playing with colors and testing, I\u0027ve found that the absolute best detection between two biomes is when the colors used are as close as possible on the color wheel.\u003C/p\u003E\u003Cp\u003EHere is the most recent color map:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/vmu8QUy.png\u0022 alt=\u0022vmu8QUy.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ENow, if you look right in the middle of the map, there is a circular area in yellow-green, which is a lowland crater in my list, and then inside of it is another region of green with a little less yellow, which is a lunar lake feature. According to the theory the you need high contrast, KSP should have a lot of difficulty detecting the difference between the two biomes, but this is actually the opposite of whats happening. No matter what variation I try, the fewer color options that exist between neighboring features, the more likely that the game will detect a direct transition from one biome to another. This is further supported by the fact that in areas of high contrast such as going from bright pink to yellow or bright green to orange, the game often reports some intermediary biome(s) before settling on the new biome. \u003C/p\u003E\u003Cp\u003EWhen I get home tonight, I\u0027ll altering the map to keep all of the neighboring biome colors as close as possible to see if that solves the issues. That being said, if it works, it would be great for in-game use, but much more difficult to use as an out of game reference...\u003C/p\u003E\u003Cp\u003EEDIT: Assuming this pans out, it brings up the question of how hard it would be to expand custom biomes to allow for two maps instead of one. The first would be the one the game uses to figure out where you are, while the second would be the one displayed to the user so they could easily figure out what biome was where...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-19T08:46:38Z\u0022 title=\u002205/19/2014 08:46  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 19, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"}]}