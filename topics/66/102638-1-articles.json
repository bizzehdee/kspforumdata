{"TopicId":102638,"ForumId":66,"TopicTitle":"Devnote Tuesday: Smooth Transitions","CreatedByName":"SQUAD","CreatedById":66485,"CreatedDateTime":"2015-03-24T22:02:00Z","PageNum":1,"Articles":[{"CreatedByName":"SQUAD","CreatedById":66485,"CreatedDateTime":"2015-03-24T22:02:00Z","Content":"\u003Cfigure data-orig-height=\u002292\u0022 data-orig-width=\u0022480\u0022\u003E\u003Cimg data-orig-height=\u002292\u0022 data-orig-width=\u0022480\u0022 alt=\u0022image\u0022 src=\u0022https://40.media.tumblr.com/0ff9377afa68dc3ad3fe6844aaf1bd38/tumblr_inline_nlqiriiarD1rr2wit_500.jpg\u0022\u003E\u003C/figure\u003E\n\n**Felipe (HarvesteR):** This week was mostly devoted to bug fixing and integrating features which have gone through their initial QA phases, and also largely focused on migrating the build servers to their new home (we\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2re moving them out of the office into a new place which provides much faster pipes for them, so they\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ll have plenty of room to run around and do their build server-y things\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6 we trust they will be happy there). However, the move itself is a pretty large amount of work, so things have been a bit hectic this week, especially because we haven\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t been able to run builds as well as we like to. Hopefully things will settle down over the next few days.\n\nOn my end, I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ve been mostly running around tying loose ends here and there, and fixing issues that came up during the integration of these recent features\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6 Admittedly, not the most interesting thing to write about, but it did take up most of my time this week.\n\nI have been able to do one thing which I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ve been really wanting to do for ages now: You may have noticed when vessels cross spheres of influence at high time warp, that the resulting orbit after the transition can be quite different from what was originally estimated. This is caused not by an imprecision with the estimation itself, nor is this a floating-point inaccuracy issue for once; the problem is with the way the actual orbit component in the vessel behaves when switching reference frames. That bit of code was written much longer ago than the patched conics system, and it was less accurate than the maths used to estimate your upcoming trajectories.\n\nThe inaccuracy came from the fact that, while the patch conics estimation is very precise in pinpointing the exact moment the vessel crosses SOI\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s, the actual orbit code would simply react to the dominant body having changed between the last frame and the current one, and recalculate the new orbit based on the current position and velocity vectors. That is okay as long as you are not running the game at a high warp factor, but at very high time compressions, a vessel may move a lot in one frame. Quite enough to fly far past the true point of SOI transition, which means the state vectors it used to calculate its new orbit could be off by as much as an entire frame\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s worth of movement.\n\nThe solution was simple enough: Instead of simply recalculating after a change in sphere of influence, the vessel orbit code now searches backwards between its position in the last frame and now, for the exact point where the it crossed over to the new SOI. This search finds the moment of SOI transition down to 1/100th of a second. We then calculate the new orbit from the state vectors at that point in time, which gives us much more accurate results, and is unaffected by the warp factor.\n\nIn practice, this means we will now be able to cross SOI boundaries without having to worry so much about warping down before the transition, as the orbit on the other side will be very much the same as the estimated one from before you crossed over.\n\nIn any case, however, there is also a new system in place which sets a time warp limit when approaching an SOI transition. This was something I added before this new fix, and even though it isn\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t strictly necessary anymore, it is quite nice to have anyway, as it highlights the SOI transition event, and lets you know something important is happening.\n\n**Alex (aLeXmOrA):** After a really exotic weekend in which I got a wisdom tooth extraction surgery that gave me a hamster cheek (that I still have), I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2m back to continue solving accounting issues and paperwork. Also, working on the license system\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6 almost there.\n\n**Mike (Mu):** It\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s been an exciting week. The aero/thermal branch was finally merged into develop and brings with it a load of performance improvements. The VAB/SPH scenes no longer require reloads when you clear/load a vessel, PQS reset/startup has been smoothed - lowering the time required to transition scenes, and lots of little tweaks to reduce the game\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s CPU load and garbage collection. The QA team and myself have also been working on improving and balancing the new physics systems.\n\n**Marco (Samssonart):** I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2m officially done with the implementation of the tutorials, I just had to get a number for the QA line and see how that goes. I moved back to the demo this week, I had an about 80% complete Sandbox and hadn\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t started on the Career part yet, because there were a few things left to define, I proposed a rule set for Career on the demo and just started working on it.\n\nOther than that I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ve been helping with a little build server maintenance we have going on at the moment. \n\n**Daniel (danRosas):** Animation is moving forward, we\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2re doing our first renders and testing out color palettes for the different environments that will need their own lights set up. We\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2re dangling with lots of frames here, I think it\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s the most ambitious animation up-to-date, so we\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2re figuring out the best way to move those frames from the server into our workstations. And at the same time don\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t die in the process. \n\n**Jim (Romfarer):** This week I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ve enabled the resource panel in the Knowledge Base. It was the first GUI project I worked on in KSP. At the time the Knowledge Base was created (two years ago) it came with a panel to show planetary resources. Long story short we decided to not release it so i flipped a checkbox and it has been hidden for all this time. This is the backstory, now then\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6 a while ago RoverDude came to me asking to implement a panel in the Knowledge Base for the resource system he\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s working on: \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201CIs this possible to do given the current timeframe?\u00C3\u00A2\u00E2\u201A\u00AC\u00C2 he asked, and I replied with a lengthy \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201CHmmmmm, yes\u00C3\u00A2\u00E2\u201A\u00AC\u00C2 as i clicked the checkbox and uploaded it.\n\n**Max (Maxmaps):** Besides reading your feedback and looking over the development of 1.0, I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ve been neck deep in talks regarding distribution, marketing and merchandise for Kerbal Space Program. It\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s been a lot of what you can call business-y work, and it\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s not particularly fun to share in the devnotes but it has been absorbing my time recently.  \n\nOn my free time I keep popping into our internal alpha builds (every update goes through QA and Experimentals, essentially alpha and beta) and checking out how the stuff in 1.0 is looking. The fairings in particular are spectacular. Can\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t wait to get this to our media group.\n\n**Ted (Ted):** Over the past week I\u2019ve been working hard with the QA Team to get the develop branch checked over for issues. This is to ensure we\u2019re not missing any features that should have been merged in but aren\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t there due to bugging out.\n\nWe\u2019ve been having a few build server issues, so there\u2019s been a fair while spent on looking into those and working with the team to sort them out. Additionally, I\u2019ve been doing a large amount of non-KSP related work which has taken up a fair amount of time, but should hopefully be over for a little while now.\n\nMoving on, there\u2019s been a lot of planning taking place for the rest of KSP 1.0\u2019s testing process, with documents and processes for Experimentals getting a good eye over as well as the trackers that we have for storing issues that can\u2019t yet be addressed due to either scope or time constraints, but hopefully will in the future.\n\nAll in all, 1.0 is really taking shape and it\u2019s a lot of fun working with the QA Team on getting it straightened out with the fantastic features that the developers are putting out.\n\n**Rogelio (Roger):** I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ve been busy for the last two weeks playing around with the smoke simulation, it has been an interesting task but a little hard since I didn\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t know too much about fluids in Maya. Before I could visualize how the smoke will look, I had to make some particle emitters to make them the emitting source for the fluid. It is a time consuming process but it\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s worth it, finally I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2m watching some results and I like them a lot. I will try different values for incandescence, density, and transparency to get more accurate results. \n\n**Kasper (KasperVld):** Make sure you tune into Squadcast on KSPTV this Friday, as Maxmaps will be showing off female Kerbals as they look in-game! Speaking of KSPTV, DigitalPsychosis has joined the group of streamers on our official channel and will be streaming Thursdays. Other than that there\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s been a lot of media planning for 1.0, and I have no doubt that\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ll continue right up until release, and a while after. Busy times, but it\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s worth being a part of!"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-03-24T22:03:11Z","Content":"Woo first!\n\nEDIT: OMG HarvestR thank you for looking into that SOI error! That\u0027s one of the oldest standing issues I\u0027ve run into constantly. Glad to see it gone ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif).\n\n**Edited \u003Ctime datetime=\u00222015-03-24T22:09:33Z\u0022 title=\u002203/24/2015 10:09  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 24, 2015\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"JedTech","CreatedById":104003,"CreatedDateTime":"2015-03-24T22:04:07Z","Content":"2nd!\n\nSo excited for the SOI Transition fix!!! Thank you!\n\n**Edited \u003Ctime datetime=\u00222015-03-24T22:07:09Z\u0022 title=\u002203/24/2015 10:07  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 24, 2015\u003C/time\u003E by JedTech**"},{"CreatedByName":"Greenfire32","CreatedById":36705,"CreatedDateTime":"2015-03-24T22:05:14Z","Content":"Sounds good, keep up the good work!"},{"CreatedByName":"Nemrav","CreatedById":91029,"CreatedDateTime":"2015-03-24T22:08:55Z","Content":"Liking the load time reductions ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2015-03-24T22:12:01Z","Content":"Get well soon Alex! That sounds nasty. Otherwise I cannot wait for 1.0! Also good to hear about a reduction in the garbage collection.\n\n This will reduce the micro freezes that have plagued some peoples game."},{"CreatedByName":"Daze","CreatedById":57997,"CreatedDateTime":"2015-03-24T22:15:50Z","Content":"@Roger: I really hope that with new smoke we will have a sort of RealPlume into stock game."},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-03-24T22:19:05Z","Content":"Fantastic stuff."},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-03-24T22:21:57Z","Content":"Huzzah! The new devnotes!\n\n\u003E \n\u003E **Felipe (HarvesteR):**  You may have noticed when vessels cross spheres of influence at high time warp, that the resulting orbit after the transition can be quite different from what was originally estimated... The solution was simple enough: Instead of simply recalculating after a change in sphere of influence, the vessel orbit code now searches backwards between its position in the last frame and now, for the exact point where the it crossed over to the new SOI.\n\nI\u0027m not going to say I said this was possible a year ago. I\u0027m just going to strongly imply it by stating it but putting \u0022I\u0027m not going to say...\u0022 in front of it. Great to hear, though. That was a huge annoyance.\n\n\u003E \n\u003E **Kasper (KasperVld):** Make sure you tune into Squadcast on KSPTV this Friday, as Maxmaps will be showing off female Kerbals as they look in-game!\n\nAwesome can\u0027t wait ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"basic.syntax","CreatedById":109920,"CreatedDateTime":"2015-03-24T22:23:41Z","Content":"Thanks for another great progress report!\n\nI think it would be helpful for future Devnotes, especially for new readers just tuning in - to always specify what the target is, for any work that is not clear by context. \n\nAnimation, effects, and modelling work can be done both for the game, and the pre-rendered trailer."},{"CreatedByName":"SorryDave","CreatedById":119474,"CreatedDateTime":"2015-03-24T22:24:44Z","Content":"SOI fixed! This bug fix is almost a feature. I\u0027ll almost miss working around it."},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-03-24T22:24:44Z","Content":"\u003E \n\u003E **Felipe (HarvesteR):** In any case, however, there is also a new system in place which sets a time warp limit when approaching an SOI transition. This was something I added before this new fix, and even though it isn\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t strictly necessary anymore, it is quite nice to have anyway, as it highlights the SOI transition event, and lets you know something important is happening.\n\nIs there a way to disable that \u0022feature\u0022? Also, you guys should really unclamp the timewarp at low altitudes, it\u0027s terribly annoying to spin around Kerbin at 50x speed in a low parking/transition orbit...\nOtherwise that\u0027s some really good news.\n\n\u003E \n\u003E **Mike (Mu):** The VAB/SPH scenes no longer require reloads when you clear/load a vessel, PQS reset/startup has been smoothed - lowering the time required to transition scenes, and lots of little tweaks to reduce the game\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s CPU load and garbage collection.\n\nFantastic! Is the ocean lag problem in the cards this update?\n\n\u003E \n\u003E **Kasper (KasperVld):** Make sure you tune into Squadcast on KSPTV this Friday, as Maxmaps will be showing off female Kerbals as they look in-game!\n\n:groan: Can we get some pictures posted to the forums too? Squadcast is just a cringe-worthy display of how badly Max plays the game..."},{"CreatedByName":"A-Stax32","CreatedById":113992,"CreatedDateTime":"2015-03-24T22:25:18Z","Content":"\u003E \n\u003E **Marco (Samssonart):** I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2m officially done with the implementation of the tutorials\n\nYES! SO MUCH AWESOMENESS!![:confused:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif)"},{"CreatedByName":"Bill Phil","CreatedById":127797,"CreatedDateTime":"2015-03-24T22:29:04Z","Content":"Good news, everyone!\n\nThanks for the devnotes, guys. And the SOI transition fix is great news!"},{"CreatedByName":"TMS","CreatedById":57134,"CreatedDateTime":"2015-03-24T22:30:26Z","Content":"\u003E \n\u003E Mike (Mu): ...and lots of little tweaks to reduce the game\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s CPU load and garbage collection.\n\nHas this had any effect on the long-standing bug that creates a stutter in the game?\n\nI seem to recall that GC was the suggested culprit."},{"CreatedByName":"Dazpoet","CreatedById":132380,"CreatedDateTime":"2015-03-24T22:32:00Z","Content":"\u003E \n\u003E **Kasper (KasperVld):** Make sure you tune into Squadcast on KSPTV this Friday, as Maxmaps will be showing off female Kerbals as they look in-game!\n\nCan\u0027t wait ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"RocketPilot573","CreatedById":62803,"CreatedDateTime":"2015-03-24T22:32:00Z","Content":"SOI transition is fixed? Nice!"},{"CreatedByName":"KasperVld","CreatedById":40700,"CreatedDateTime":"2015-03-24T22:33:04Z","Content":"\u003E \n\u003E :groan: Can we get some pictures posted to the forums too? Squadcast is just a cringe-worthy display of how badly Max plays the game...\n\nThe pictures Max shows on Squadcast are always shared on our social media immediately afterwards. Keep an eye on those on Friday - although I\u0027m sure someone will post them to the forums within minutes!"},{"CreatedByName":"billbobjebkirk","CreatedById":104713,"CreatedDateTime":"2015-03-24T22:33:58Z","Content":"\u003E \n\u003E :groan: Can we get some pictures posted to the forums too? Squadcast is just a cringe-worthy display of how badly Max plays the game...\n\nIf it\u0027s a picture, it will get posted her just like squadcast images always do, and if it\u0027s a video, you can just go to the archive and skip to the end."},{"CreatedByName":"Motokid600","CreatedById":66349,"CreatedDateTime":"2015-03-24T22:37:29Z","Content":"Seconded on hoping the new smoke effects make for more realistic exhaust. Essentially meaning.. yea.. RealPlume. Some transparency in the exhaust would be nice too as it increases velocity.\n\n**Edited \u003Ctime datetime=\u00222015-03-24T22:42:09Z\u0022 title=\u002203/24/2015 10:42  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 24, 2015\u003C/time\u003E by Motokid600**"},{"CreatedByName":"HarvesteR","CreatedById":4,"CreatedDateTime":"2015-03-24T22:39:12Z","Content":"\u003E \n\u003E I\u0027m not going to say I said this was possible a year ago...\n\nIt certainly was possible a year ago... I\u0027ve been wanting to get this done since I first noticed the issue, which was sometime around version 0.17 or so... \n\nHowever, between wanting to fix something and taking the time to do it lies the big hurdle, which until now, has always been insurmountably obstructed by the myriad other things that needed to get done. \n\nI\u0027m very glad to have gotten a chance to do this one at last!\n\nCheers"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-03-24T22:44:26Z","Content":"\u003E \n\u003E It certainly was possible a year ago... I\u0027ve been wanting to get this done since I first noticed the issue, which was sometime around version 0.17 or so... \n\u003E However, between wanting to fix something and taking the time to do it lies the big hurdle, which until now, has always been insurmountably obstructed by the myriad other things that needed to get done. \n\u003E \n\u003E I\u0027m very glad to have gotten a chance to do this one at last!\n\u003E \n\u003E Cheers\n\nBy all means. I was more bragging than nitpicking ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif) At the time, I remember a few people saying that I was talking out my... hat. Let\u0027s say hat. To keep the forums child friendly.\n\nAnd I\u0027m excited to see it in action!\n\nEDIT: OH! One thing, while I have your attention. Do you have code to handle what happens if you time warp though \\*TWO\\* SOI changes? Like if you\u0027re warping around Eve and go right through Gilly\u0027s SOI in a single tick?\n\n**Edited \u003Ctime datetime=\u00222015-03-24T22:46:48Z\u0022 title=\u002203/24/2015 10:46  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 24, 2015\u003C/time\u003E by 5thHorseman**"},{"CreatedByName":"Yakuzi","CreatedById":85181,"CreatedDateTime":"2015-03-24T23:02:32Z","Content":"Thanks for the devnotes guys. Any specifics on which previously announced features are not making it into the next update? Also, any news on the \u0022schmelta-vee like\u0022 feature and the new pilot, engineer and scientist skills (it\u0027s been some time now since [these were announced](https://twitter.com/Maxmaps/status/564909904557649920)).\n\n\u003E **Rogelio (Roger):** I\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ve been busy for the last two weeks playing around with the smoke simulation, it has been an interesting task but a little hard since I didn\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t know too much about fluids in Maya.\n\nIs this for in-game animations or for the KSP cinematic?\n\n**Edited \u003Ctime datetime=\u00222015-03-24T23:06:40Z\u0022 title=\u002203/24/2015 11:06  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 24, 2015\u003C/time\u003E by Yakuzi**\n  \nlinkzzz"},{"CreatedByName":"Wjolcz","CreatedById":39636,"CreatedDateTime":"2015-03-24T23:05:53Z","Content":"So does SOI transition thing means we\u0027re going to get little notes that something, somewhere in the solar system is hitting a SOI change? That would be pretty useful if you ask me. If so, coule we get the same notes about probes and other stuff getting close to manouver nodes? Something like KAC but way more simple.\n\nAnyway, glad to see that SOI change error is dealt with. It really was needed."},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2015-03-24T23:14:11Z","Content":"\u003E \n\u003E Thanks for the devnotes guys. Any specifics on which previously announced features are not making it into the next update? Also, any news on the \u0022schmelta-vee like\u0022 feature and the new pilot, engineer and scientist skills (it\u0027s been some time now since [these were announced](https://twitter.com/Maxmaps/status/564909904557649920)).\n\nMax mentioned the delta-v feature specifically as something that probably won\u0027t make the 1.0 cutoff, but said that the features cut from 1.0 were very likely to turn up in 1.1. Basically, I got the impression that if it got mentioned in the dev notes, it was going to make the cutoff, if it hadn\u0027t progressed far enough to get a mention there, it was probably going to be on the delayed list. The first part of that has been confirmed, the second part of that implied.\n\nI\u0027m quite happy with that standard, as I feel the aero changes need to go into 1.0, but most of the rest of the stuff I care about is polishing or bug fixing."}]}