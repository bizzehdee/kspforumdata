{"TopicId":193162,"ForumId":39,"TopicTitle":"Ascent Autopilot kOS","CreatedByName":"arthur106","CreatedById":203096,"CreatedDateTime":"2020-04-16T05:13:13Z","PageNum":1,"Articles":[{"CreatedByName":"arthur106","CreatedById":203096,"CreatedDateTime":"2020-04-16T05:13:13Z","Content":"\n\u003Cp\u003E\nI\u0027ve been working for the past several days on an ascent autopilot.\u00A0 It\u0027s not quite done yet, but I\u0027m excited to have some tangible results at this point, as 90% of the work didn\u0027t really yield anything tangible, other than some function libraries.\u00A0 It still needs tweaking, I\u0027m confident I can eliminate the position error to less than 1 meter at least 90% of the time; I chose the values for my PID control by shooting from the hip, so unless I got really lucky, there\u0027s room for improvement.\u00A0 Anyway, this is my first kOS program so I just wanted to show off.\u00A0 More details are in the video link.\n\u003C/p\u003E\n\u003Cp\u003E\nIf the position initialization isn\u0027t exciting enough for you, just skip to 0:50\u00A0 \u00A0\u003Cspan\u003E\u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 width=\u0022480\u0022 data-embed-src=\u0022https://www.youtube.com/embed/tRA7g5psGxU?feature=oembed\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"CBase","CreatedById":189476,"CreatedDateTime":"2020-04-16T10:16:44Z","Content":"\n\u003Cp\u003E\nNice Job for starting from scartch \u003Cspan\u003E\u003Cspan\u003E\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003EJust being curious, what is your guidance like ? I seems mostly a Gravity Turn starting at 100 m/s with 5-10 degree initial turn. However I did notice small throttle changes and heading is sometimes slightly off from prograde, which does not make sense to happen if GT is scripted. And the position / velocity error indicate that your script tries to follow some trajectory, but how did you gather this ? Or is it computed with MatLab ?\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"arthur106","CreatedById":203096,"CreatedDateTime":"2020-04-16T18:15:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223771663\u0022 data-ipsquote-contentid=\u0022193162\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221587032204\u0022 data-ipsquote-userid=\u0022189476\u0022 data-ipsquote-username=\u0022CBase\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, CBase said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNice Job for starting from scartch \u003Cspan\u003E\u003Cspan\u003E\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003EJust being curious, what is your guidance like ? I seems mostly a Gravity Turn starting at 100 m/s with 5-10 degree initial turn. However I did notice small throttle changes and heading is sometimes slightly off from prograde, which does not make sense to happen if GT is scripted. And the position / velocity error indicate that your script tries to follow some trajectory, but how did you gather this ? Or is it computed with MatLab ?\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAlthough ive started work on actually creating an ascent profile in matlab, i havent created any tangible results yet (mostly because of my limited understand long of drag ins stock ksp).\u00A0 That will be my next phase of this project.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is simply a proof of concept.\u00A0 The profile was recorded from a previous launch of the same rocket so that I could guaruntee the profile would be viable.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\u00A0 the\u00A0guidance is just a list of 1.) coordinates at discrete time increments of where the rocket should be and suggested facing vector and throttle position to stay on track.\u00A0 Position error is decomposed into components along \u0022track error\u0022\u00A0and perpendicular \u0022lateral error\u0022 to the facing vector.\u00A0 I correct the error by prescribing a desired acceleration in the proper direction (by increase in throttle for track\u00A0error and by adding correction angle theta=Accel*mass/thrust\u00A0to the unit facing vector for lateral error).\u00A0 Assuming all errors are small, the dynamics are linear(ish) and stability SHOULD be achieved for track and lateral error using the same PID controller.\u00A0 I\u0027m\u00A0still working on this bit here--digging through my old college textbooks trying to understand a subject area I never was too good at... \u003Cspan\u003E\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EOne area of concern is that im currently using kOS built-in \u0022cooked\u0022 steering to actually point my rocket in the prescribed direction.\u00A0 This uses two nested PID loops..blah blah blah...to point the rocket where you tell it.\u00A0 It\u0027s a jack of all trades but master of none.\u00A0 I\u0027m thinking I could expand my guidance to use raw control inputs as control variables (rather than desired attitude) but this would open up a whole can of worms I\u0027m not sure I\u0027m\u00A0ready to deal with right now.\u00A0 \u003Cstrong\u003EI\u0027d be interested if anyone has created their own (or knows someone who has) steering controls already and see how they\u0027ve done it\u003C/strong\u003E.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-04-16T18:45:08Z\u0022 title=\u002204/16/2020 06:45  PM\u0022 data-short=\u00224 yr\u0022\u003EApril 16, 2020\u003C/time\u003E by arthur106\u003C/strong\u003E\n\u003Cbr\u003ETypo and added content\n\u003C/span\u003E\n"}]}