{"TopicId":6663,"ForumId":25,"TopicTitle":"Mini-challenge: max altitude with this supplied spacecraft","CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-14T18:26:41Z","PageNum":1,"Articles":[{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-14T18:26:41Z","Content":"\n\u003Cp\u003EThere has been some discussion about thrust/velocity profiles for fuel-efficient ascent, so here\\\u0027s a way to test your own strategy. In fact this is known as the \u0027Goddard problem\u0027 in control theory and there are papers on it, but nowhere near so much fun as testing it yourself.\u003C/p\u003E\u003Cp\u003EThis is also a \u0027fuel efficiency\u0027 challenge, but will take you less than 5 minutes\\\u0027 flight time. We are launching the supplied sounding rocket into the upper atmosphere (.craft file attached). No modifications allowed, no .cfg edits. The challenge is simply to reach the highest altitude with the spacecraft supplied. \u003C/p\u003E\u003Cp\u003EA bunch of these were found lying around the junkyard, and were being used for upper-atmosphere research. The ASAS module is payload, you can keep it turned off if you want. And yes, I know we can get higher with 1 tank\u002BLFE, but I chose this design to give us a large range of possible thrust/weight ratios, and so that we would not have to wait a long time for the \u0027coast\u0027 phase of the flight to apokerb. If you can think of a better challenge craft for everyone, please let us know, but have a go with this one first.\u003C/p\u003E\u003Cp\u003EProof of claimed altitude required: \u003C/p\u003E\u003Cp\u003E- screenshot of your spacecraft close to max. altitude (to prove it is the one supplied, with no modifications)\u003C/p\u003E\u003Cp\u003E- screenshot of the end-of-flight results, clearly showing no prior stages, the maximum altitude, AND your impact velocity when it hits (sorry Kerbals). If you cheated by reducing any drag factors in the .cfg files, your impact velocity will be higher than ~110 m/s, which will give the game away.\u003C/p\u003E\u003Cp\u003E- Optionally, a video of your flight if you used some clever speed vs. altitude profile. Otherwise a few words of explanation.\u003C/p\u003E\u003Cp\u003EMy first attempts: If I blindly floor it at 100% throttle, I (and you) will reach about 22000m. Using careful thrust management (including the \u0027X\u0027 key briefly) I managed 33289m.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i40.tinypic.com/3522gig.png\u0022 alt=\u00223522gig.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i39.tinypic.com/28i70w3.jpg\u0022 alt=\u002228i70w3.jpg\u0022\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you can get above 33500m without cheating, please tell us all how!\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ELeader board: \u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E1st\u003Csup\u003E*\u003C/sup\u003E DayBlur 33632 m - \u003Csup\u003E*\u003C/sup\u003Eusing autopilot plugin code to control throttle.\u003C/p\u003E\u003Cp\u003E1st DayBlur 33560 m 2nd antbin: 33549 m 3rd Kosmo-not : 33519 m \u003C/p\u003E\u003Cp\u003E4th nichampagne 33514 m 5th jebbe: 33495m 6th closette: 33490 m \u003C/p\u003E\u003Cp\u003E7th PakledHostage 33487.5 m 8th boolybooly: 33479 m \u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-14T19:10:58Z","Content":"\n\u003Cp\u003EI\\\u0027ve gotten a max altitude of 33,405. I don\\\u0027t believe the final velocity would be a good measure of whether someone has done the job honestly, as not impacting capsule first can slow you down a bit. For instance, I had a final velocity of 64.1 due to this. Mission time would be a better indication. Somewhere near 4:30.\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-14T19:23:34Z","Content":"\n\u003Cp\u003EI somehow knew you\\\u0027d beat me! Well, mission time is on the screenshot too, but I didn\\\u0027t expect that changing the orientation would change the impact speed so much. Perhaps something to do with angularDrag in the .cfg settings gets used in the calculation.\u003C/p\u003E\u003Cp\u003EI think you\\\u0027re pretty much close to optimal, but someone out there might be able to gain a few more meters? Thank you for giving it a go!\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-14T19:58:58Z","Content":"\n\u003Cp\u003EI had the spacecraft pointed skyward the whole time. It\\\u0027s the same concept as building a rocket with an impact cushion. I\\\u0027m a bit rusty at mathematics to calculate an optimal ascent plan.\u003C/p\u003E\n"},{"CreatedByName":"foamyesque","CreatedById":2982,"CreatedDateTime":"2012-02-14T20:25:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022closette\u0022 data-cite=\u0022closette\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI somehow knew you\\\u0027d beat me! Well, mission time is on the screenshot too, but I didn\\\u0027t expect that changing the orientation would change the impact speed so much. Perhaps something to do with angularDrag in the .cfg settings gets used in the calculation.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EStock capsule has 33% more drag when falling sideways.\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-14T20:31:35Z","Content":"\n\u003Cp\u003E(Just replied on the other thread, but thanks for taking a look at this one). \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EStock capsule has 33% more drag when falling sideways.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIs that an experimental result, or is there a formula based on the .cfg settings that one can use to figure out orientation effects on drag?\u003C/p\u003E\u003Cp\u003EOh by the way: \u003Cspan style=\u0022text-decoration:underline;\u0022\u003E33418m\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i44.tinypic.com/3134n88.png\u0022 alt=\u00223134n88.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i39.tinypic.com/w9ipab.png\u0022 alt=\u0022w9ipab.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"jebbe","CreatedById":16329,"CreatedDateTime":"2012-02-14T20:55:43Z","Content":"\n\u003Cp\u003EBy trial-and-error, but with the general shape of the solutions to Goddards problem somwhere in the back of my head: \u003Cspan style=\u0022text-decoration:underline;\u0022\u003E33,480m\u003C/span\u003E.\u003C/p\u003E\u003Cp\u003E\u003Cem\u003Eedit\u003C/em\u003E: I should probably mention that I used time warp. In other scenarios it\\\u0027s obvious that the solver gives different results for different time stepping (which time warp seems to imply), so I\\\u0027m guessing that this might influence the final height somehow.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E\u003Ca href=\u0022http://postimage.org/image/u5c2nwvzv/\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://s17.postimage.org/u5c2nwvzv/screenshot8.png\u0022 alt=\u0022screenshot8.png\u0022\u003E\u003C/a\u003E\u003Ca href=\u0022http://postimage.org/image/gn0kxvugr/\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://s17.postimage.org/gn0kxvugr/screenshot0.png\u0022 alt=\u0022screenshot0.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHas anyone tried to actually calculate the speed at which the singularity in thrust occurs, and the optimal setting afterwards?\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-14T21:06:45Z","Content":"\n\u003Cp\u003E@jebbe,\u003C/p\u003E\u003Cp\u003EGreat job with the challenge - I doubt I could even get close to that altitude! Clever use of time warp is not forbidden, therefore allowed (it\\\u0027s not clear whether it will help).\u003C/p\u003E\u003Cp\u003EI\\\u0027ve seen the term \u0027singularity\u0027 used before for this problem, but could you please explain what it means in this context?\u003C/p\u003E\u003Cp\u003EAnd if \u003Cem\u003Eyou\u003C/em\u003E are able to derive the theoretical solution, which nobody has done AFAIK, please message me and I\\\u0027ll send you all the details I have. This should be a much easier problem to optimize than in real life, and I\\\u0027d really like to know!\u003C/p\u003E\u003Cp\u003E(Also, due to KSP\\\u0027s funky drag model, the optimal ascent profile should pretty much apply to any launch vehicle up to staging).\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-14T21:15:10Z","Content":"\n\u003Cp\u003EOk, here is my official submission: 33,519m\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://img820.imageshack.us/img820/6677/screenshot7s.png\u0022 alt=\u0022screenshot7s.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://img836.imageshack.us/img836/9852/screenshot8gp.png\u0022 alt=\u0022screenshot8gp.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"jebbe","CreatedById":16329,"CreatedDateTime":"2012-02-15T10:30:49Z","Content":"\n\u003Cp\u003E@Kosmo-not,\u003C/p\u003E\u003Cp\u003EWow, another 40m - how many attempts did that take you? I think I have to forfeit this and bow my head. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EDo you use the \u0027x\u0027 key after the initial full throttle burn? I found that it was a little more efficient to just throttle down using \u0027ctrl\u0027.\u003C/p\u003E\u003Cp\u003E@closette,\u003C/p\u003E\u003Cp\u003ESingularity is probably not the right term, I think I should rather just call it discontinuity. I mean the point after initial full throttle ascent, when you suddenly drop the thrust.\u003C/p\u003E\u003Cp\u003EAbout the theoretical solution: While I do have a background in physics and numerics of PDEs, I don\\\u0027t know much about control theory, and it would probably take me quite some time to solve this problem by myself. For the actual challenge I just googled \u0027Goddard\\\u0027s problem\u0027 and quickly looked at a couple of papers. All of them have this one graph of optimal thrust over time, and they always look roughly the same, so I just tried to go for something like that in the challenge.\u003C/p\u003E\u003Cp\u003E\u003Cem\u003Eedit:\u003C/em\u003E typo\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-15T16:19:55Z","Content":"\n\u003Cp\u003EYep, Kosmo-not has probably shut down the competition here! Unless....\u003C/p\u003E\u003Cp\u003EJebbe, could you post one of those curves - I too looked at a few Goddard problem papers and did not extract anything useful from them.\u003C/p\u003E\u003Cp\u003EI can \u0027reveal\u0027 my strategy that at least got close to Kosmo-not\\\u0027s record: Max thrust to get up to terminal speed (~ 100 m/s), followed by a rapid drop in thrust such that the rocket followed something close to (never below, but sometimes a bit above):\u003C/p\u003E\u003Cp\u003Ev(height) = 100 Exp(height/9900m).\u003C/p\u003E\u003Cp\u003Ewhich I had evaluated every 1000m in an open Excel window next to the KSP window. As long as the acceleration is less than g, this profile translates into a thrust/weight ratio of just above 2.0. \u003C/p\u003E\u003Cp\u003EIt was easy to follow this profile up to about 12000m, in fact for 3000m to about 10000m there was a \u0027sweet spot\u0027 in the throttle position when the craft would naturally hit the right velocities. Above 10000m this function begins to take off rapidly, so I winged it, but made sure that I \u0027finished with a flourish\u0027 at full throttle when the fuel ran out.\u003C/p\u003E\u003Cp\u003EI think the small differences we\\\u0027re getting in max altitude can be traced back to how well we throttled back in the first few seconds. I would be surprised if the optimal solution was a real discontinuity though, since all the other forces are continuous. \u003C/p\u003E\u003Cp\u003EOK Kosmo-not, what did you do to get the record and shut out the competition?\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-15T16:52:10Z","Content":"\n\u003Cp\u003EMy flight plan went as follows:\u003C/p\u003E\u003Cp\u003EMax throttle at launch (who wouldn\\\u0027t?)\u003C/p\u003E\u003Cp\u003Ethrottle down at around 100m/s\u003C/p\u003E\u003Cp\u003Emaintain TWR at around 2\u003C/p\u003E\u003Cp\u003Eincrease TWR gradually after passing 6km I think\u003C/p\u003E\u003Cp\u003EI\\\u0027m going to fiddle with excel to see what it can do.\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-15T16:57:51Z","Content":"\n\u003Cp\u003E@Kosmo: Cool - message me if you need any assistance. I presume you kept TWR=2 by using a similar velocity scheme as me? (Since there is no \u0027thrust indicator\u0027 or \u0027weight indicator\u0027 for that matter).\u003C/p\u003E\u003Cp\u003E@jebbe - sorry, I just crept past you into 2nd place at \u003Cspan style=\u0022text-decoration:underline;\u0022\u003E33490m\u003C/span\u003E, and that\\\u0027s about as good as I can get. It seems that the closer I follow my speed vs. height scheme, the higher I can reach, so it\\\u0027s down to my imperfect hand-eye coordination in the first and last few seconds.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i44.tinypic.com/eg32fm.png\u0022 alt=\u0022eg32fm.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i41.tinypic.com/70ezw8.png\u0022 alt=\u002270ezw8.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-15T18:28:35Z","Content":"\n\u003Cp\u003EI\\\u0027ve tried and tried, but I cannot beat my record.\u003C/p\u003E\n"},{"CreatedByName":"jebbe","CreatedById":16329,"CreatedDateTime":"2012-02-15T18:53:40Z","Content":"\n\u003Cp\u003EFrom what I found, the actual solution is really discontinuous, which in my understanding comes from the fact that we artificially set a maximum for the thrust. Without this constraint I would expect a singularity at v=0; since we don\\\u0027t allow for that, the system responds with the discontinuity.\u003C/p\u003E\u003Cp\u003EAn numerical solution to the problem is shown e.g. here, \u003Ca href=\u0022http://cas.ensmp.fr/~petit/papers/ifac2008/0637.pdf\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://cas.ensmp.fr/~petit/papers/ifac2008/0637.pdf\u003C/a\u003E, fifth page (14305), Fig. 2, (black lines are the actual solution).\u003C/p\u003E\u003Cp\u003EThey use an exponentially decaying atmospheric drag, but I don\\\u0027t think this is responsible for the discontinuity.\u003C/p\u003E\u003Cp\u003EYour strategy to keep the TWR constant seems to contradict this figure, but the increase in thrust in the paper is probably due to the atmosphere. In my first attempts I increased the throttle quite a bit later in the ascent, but for my best result I kept it almost constant. Still, I\\\u0027m not sure if keeping the TWR constant is a good idea, since that would mean throttling down, which I saw in none of the figures so far. Anyway, I think what we definitely need to do is power up as soon as we reach the second atmospheric layer at around 13km.\u003C/p\u003E\u003Cp\u003E\u003Cem\u003Eedit:\u003C/em\u003E Added some thoughts on the discontinuity\u003C/p\u003E\n"},{"CreatedByName":"thosesneakyfrench","CreatedById":8432,"CreatedDateTime":"2012-02-15T21:26:58Z","Content":"\n\u003Cp\u003EThere are a few properties about the physics of this game that make the problem much easier to solve in this scenario:\u003C/p\u003E\u003Cp\u003E-Gravity is a conservative force, meaning that in the absence of drag, moving from point A to B takes the same amount of energy, regardless of the path or speed.\u003C/p\u003E\u003Cp\u003E- Fluid dynamics is a huge discipline that is practically, but not fully, understood. For the purposes of the game, the drag force is going to be proportional to either velocity or velocity squared.\u003C/p\u003E\u003Cp\u003E-Drag force is also dependent on fluid density. Fluid density can easily be modeled as a function of altitude in this game. \u003C/p\u003E\u003Cp\u003E-As the rocket uses fuel, it\\\u0027s mass decreases, meaning less thrust is needed to accelerate it at a constant rate.\u003C/p\u003E\u003Cp\u003EUsing these facts, goddard\\\u0027s problem for KSP can be solved knowing:\u003C/p\u003E\u003Cp\u003E-A function describing the change in fluid density as altitude increases\u003C/p\u003E\u003Cp\u003E-What power of V drag force is proportional to.\u003C/p\u003E\u003Cp\u003E-The mass, fuel consumption rate, and drag coefficient of a rocket\u003C/p\u003E\u003Cp\u003EThe goal here isn\\\u0027t to find the maximum altitude, but to find an optimal function for fuel consumption rate, using a given altitude.\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-15T22:28:17Z","Content":"\n\u003Cp\u003EDensity:\u003C/p\u003E\u003Cp\u003Edensity = 0.0098*exp(-altitude/5000)\u003C/p\u003E\u003Cp\u003Eit\\\u0027s not perfect, but it\\\u0027s pretty close\u003C/p\u003E\u003Cp\u003EDrag force is proportional to v\u003Csup\u003E2\u003C/sup\u003E\u003C/p\u003E\u003Cp\u003EF\u003Csub\u003ED\u003C/sub\u003E = .5*density*C\u003Csub\u003ED\u003C/sub\u003E*m*v\u003Csup\u003E2\u003C/sup\u003E\u003C/p\u003E\u003Cp\u003Edrag coefficient is 0.2 for most stock parts\u003C/p\u003E\u003Cp\u003EMass consumption rate:\u003C/p\u003E\u003Cp\u003E200 thrust LFE: mass rate = 2.2/(500/(8*thrust*n/(200)))\u003C/p\u003E\u003Cp\u003En = number of engines\u003C/p\u003E\u003Cp\u003EI\\\u0027ve heard that the optimal velocity to be climbing at is one which the drag force equals the weight of the rocket.\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-15T23:03:46Z","Content":"\n\u003Cp\u003EHere\\\u0027s how progress is going on my excel spreadsheet\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://img607.imageshack.us/img607/1740/goddardchart.png\u0022 alt=\u0022goddardchart.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt still needs some work with how it handles the throttle. The throttle gauge is an indication of which tick mark the throttle is at.\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-16T00:18:46Z","Content":"\n\u003Cp\u003ESome excellent knowledge in this challenge thread!\u003C/p\u003E\u003Cp\u003E@jebbe - I see the reason for discontinuous thrust vs. time now, thanks.\u003C/p\u003E\u003Cp\u003E@thosesneakyfrench,\u003C/p\u003E\u003Cp\u003EFirst, welcome! Second, I agree that this is a simpler Goddard problem than real life. I personally don\\\u0027t have the skills to solve it. The info you need is in Kosmo-not\\\u0027s post below yours. If you can do it - great! (I\\\u0027d love to know what the theoretical maximum altitude for this spacecraft is, and the thrust profile that produces it).\u003C/p\u003E\u003Cp\u003E@Kosmo-not,\u003C/p\u003E\u003Cp\u003E The T/W=2.0 criterion is an instantaneous maximum in efficiency for small accelerations (\u0026lt;\u0026lt;g), as you showed in an earlier thread. It is obtained exactly when the drag force = weight and a=0, i.e. the craft is moving upwards at exactly the local terminal speed.\u003C/p\u003E\u003Cp\u003EBut keeping the acceleration in Newton\\\u0027s 2nd law, \u003Cem\u003Ema= T - W -bv\u003C/em\u003E\u003Csup\u003E2\u003C/sup\u003E, the max. efficiency is actually for T/W = 2 \u002B2(a/g). Below ~10km you can get away with neglecting the acceleration term, but above that altitude it will start to dominate. \u003C/p\u003E\u003Cp\u003EEdit: In fact since instantaneous optimum thrust \u003Cem\u003ET = W(2\u002B2a/g)\u003C/em\u003E by this equation, this might explain why you can get away with constant thrust for a while (~3000-9000m for me) at the \u0027sweet spot\u0027 throttle setting, since over time as weight \u003Cem\u003EW\u003C/em\u003E decreases, acceleration \u003Cem\u003Ea\u003C/em\u003E increases, and for a while they nearly cancel each other\\\u0027s effects out in this equation for required thrust \u003Cem\u003ET\u003C/em\u003E. \u003C/p\u003E\u003Cp\u003EUnfortunately this extra term ties the instantaneous acceleration to the cumulative history of what the rocket did up to that moment, which made a big mess when I tried to solve for v(t) or v(y). The weight is history-dependent also.\u003C/p\u003E\u003Cp\u003EYou might be able to include this term via iteration, however, since once you have v(y) you can compute a=dv/dt = v dv/dy.\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T00:34:05Z","Content":"\n\u003Cp\u003EHere. Have a copy of my spreadsheet. Maybe you can come to some interesting conclusions. Be aware that the thrust column has different formulas in certain areas until I can find a better way of doing it.\u003C/p\u003E\u003Cp\u003EI should create a program to calculate this stuff, but it\\\u0027s been so long since I\\\u0027ve programmed anything.\u003C/p\u003E\u003Cp\u003EI added another line to the chart to show how the TWR changes with altitude (read from the left vertical scale).\u003C/p\u003E\n"},{"CreatedByName":"PakledHostage","CreatedById":8059,"CreatedDateTime":"2012-02-16T03:03:31Z","Content":"\n\u003Cp\u003EEver the sceptic, I dusted off my old \u0027off the pad acceleration\u0027 spreadsheet and did my own test. I had tried this once before but I\\\u0027d failed to get a good fit so I gave up. Now that I know that drag in the game is a function of mass (mass??!!!? okay whatever... [flicks the radioactive cockroach away in disgust]) as well as velocity and drag coefficient, I was able to get quite a good fit. I\\\u0027m posting my test results here so that they can be reviewed and given whatever credibility (or lack thereof) that they deserve:\u003C/p\u003E\u003Cp\u003EI launched the spacraft shown in the image below at 100% throttle, with the SAS turned on. \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/2eMbk.jpg\u0022 alt=\u00222eMbk.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EI let it climb until it reached apoapsis and then fell back to Kerbin. I recorded altitude and velocity at roughly 10 second intervals. I also set up an Excel spreadsheet to integrate the accelerations, computing the drag, velocity, acceleration and altitude at each 0.025 second time step. As above, drag was computed as a function of C\u003Csub\u003Ed\u003C/sub\u003E, velocity squared and mass. \u003C/p\u003E\u003Cp\u003EBy my figures:\u003C/p\u003E\u003Cp\u003EC\u003Csub\u003Ed\u003C/sub\u003E for the stack shown above is 1.1\u003C/p\u003E\u003Cp\u003EInitial mass is 7.4 tonnes\u003C/p\u003E\u003Cp\u003EThrust is 200 kN\u003C/p\u003E\u003Cp\u003EI then adjusted the \u0027density scaling parameter\u0027 so that my predictions matched my data. Here\\\u0027s a plot showing the resulting altitude vs. time:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/juexv.jpg\u0022 alt=\u0022juexv.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd here\\\u0027s a plot showing the resulting velocity vs. time:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/P0EYh.jpg\u0022 alt=\u0022P0EYh.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe density scaling parameter that resulted in the best fit was 0.0017. This differs quite a bit from the 0.0098 quoted above. Maybe the difference can be accounted for in our differing methods, Kosmo-not?\u003C/p\u003E\u003Cp\u003EI\\\u0027d be interested to see anyone else\\\u0027s results. Maybe together we can nail down Kerbin\\\u0027s atmospheric properties. The results will be useful for more than just this challenge.\u003C/p\u003E\u003Cp\u003EPH.\u003C/p\u003E\u003Cp\u003EPS. I tried to include my spreadsheet as an attachment to this post so that others could play with it but I got a message from the server that it was too big...\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T05:29:58Z","Content":"\n\u003Cp\u003EFor your rocket, were you using edited parts to have a C\u003Csub\u003ED\u003C/sub\u003E of 1.1? My calculated C\u003Csub\u003ED\u003C/sub\u003E for it is about 0.2027.\u003C/p\u003E\u003Cp\u003EHow did you calculate your C\u003Csub\u003ED\u003C/sub\u003E?\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-16T06:02:38Z","Content":"\n\u003Cp\u003E@PakledHostage,\u003C/p\u003E\u003Cp\u003E I love DATA! So glad you could share the graphs from your tests, which were similar to Kosmo-not\\\u0027s drop test found here \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=5813.msg86098#msg86098\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kerbalspaceprogram.com/forum/index.php?topic=5813.msg86098#msg86098\u003C/a\u003E with analysis below.\u003C/p\u003E\u003Cp\u003EPartly based on these, and other tests, the most detailed discussion of the atmosphere, complete with density profile, scale height, composition(!), and the drag force law can be found here: \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=5623.0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kerbalspaceprogram.com/forum/index.php?topic=5623.0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EFrom the same data I found a similar density law ~ 0.01 kg/m\u003Csup\u003E3\u003C/sup\u003E exp(-height/5000 m), assuming that:\u003C/p\u003E\u003Cp\u003E- command pod mass = 1 kg (silly I know - I would guess 1000 kg but this makes comparisons easier).\u003C/p\u003E\u003Cp\u003E- the drag force is F\u003Csub\u003ED\u003C/sub\u003E = 1/2 maximum_drag x mass x density x v\u003Csup\u003E2\u003C/sup\u003E (note the factor of 1/2 which is by convention)\u003C/p\u003E\u003Cp\u003EThe unrealistic presence of the mass term was confirmed in the second linked thread above (by Kosmo-not yet again!). He found that for an assembled ship, the total drag force is just the sum of the individual F\u003Csub\u003ED\u003C/sub\u003E\\\u0027s of the parts, so the conventional \u0027drag coefficient x area\u0027 c\u003Csub\u003ED\u003C/sub\u003EA in the conventional equation F\u003Csub\u003ED\u003C/sub\u003E = 1/2 c\u003Csub\u003ED\u003C/sub\u003E A x density x v\u003Csup\u003E2\u003C/sup\u003E would be given by:\u003C/p\u003E\u003Cp\u003E(maximum_drag\u003Csub\u003E1\u003C/sub\u003E x mass\u003Csub\u003E1\u003C/sub\u003E \u002B maximum_drag\u003Csub\u003E2\u003C/sub\u003E x mass\u003Csub\u003E2\u003C/sub\u003E \u002B ...)\u003C/p\u003E\u003Cp\u003Ewhich for your rocket could easily be a number close to 1.1.\u003C/p\u003E\u003Cp\u003EHope this helps.\u003C/p\u003E\u003Cp\u003E(edited to include the area term A).\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T06:13:44Z","Content":"\n\u003Cp\u003EThe drag coefficient is maximum_drag. m*C\u003Csub\u003ED\u003C/sub\u003E would be the (maximum_drag1 x mass1 \u002B maximum_drag2 x mass2 \u002B ...)\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-16T06:23:44Z","Content":"\n\u003Cp\u003EI think PakledHostage is using the conventional/terrestrial definition of c\u003Csub\u003ED\u003C/sub\u003EA which is basically 2*F\u003Csub\u003ED\u003C/sub\u003E/ (density x v\u003Csup\u003E2\u003C/sup\u003E), so includes KSP\\\u0027s mass term. But I could be wrong...anyway your numbers check out with mine. \u003C/p\u003E\u003Cp\u003EI\\\u0027ll take a look at your TWR spreadsheet tomorrow, thanks for sharing it.\u003C/p\u003E\n"}]}