{"TopicId":61273,"ForumId":39,"TopicTitle":"Timelapse of autonomous rover on Duna (kOS mod)","CreatedByName":"check","CreatedById":71875,"CreatedDateTime":"2014-01-27T13:59:12Z","PageNum":1,"Articles":[{"CreatedByName":"check","CreatedById":71875,"CreatedDateTime":"2014-01-27T13:59:12Z","Content":"\n\u003Cp\u003EA couple of months ago, I wrote a script for the kOS mod which would autonomously guide a rover across Duna. It\u0027s a little more complicated than just setting a waypoint in the script and locking the wheels to that location. If you\u0027ve used kOS with rovers you\u0027ll know that as soon as you hit an incline your rover will go mad and flip over if it\u0027s locked to a target. The script accounts for the rovers speed and attitude by unlocking the wheels over uneven ground and only making adjustments to heading when the speed is low.\u003C/p\u003E\u003Cp\u003EAnyway, here\u0027s the video! It takes place over 4 hours but the time has been sped up by a factor of 80.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/9du08jlFS1w?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"Tw1","CreatedById":59717,"CreatedDateTime":"2014-01-27T14:02:31Z","Content":"\n\u003Cp\u003ENicely done! \u003C/p\u003E\u003Cp\u003EIs the script specific to that rover?\u003C/p\u003E\u003Cp\u003EWhat was the rover\u0027s average speed?\u003C/p\u003E\n"},{"CreatedByName":"check","CreatedById":71875,"CreatedDateTime":"2014-01-27T14:18:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tw1\u0022 data-cite=\u0022Tw1\u0022\u003E\u003Cdiv\u003ENicely done! \u003Cp\u003EIs the script specific to that rover?\u003C/p\u003E\u003Cp\u003EWhat was the rover\u0027s average speed?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe script can be used for any rover, I suppose. It does have a couple of lines in there that checks if the solar panels are catching the sun and if not, it turns on the headlights \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe version of the script I have saved now says I had the nominal speed set to about 14 m/s (this was a couple of months ago) but I think with this run I set it lower--maybe 8-10 m/s? \u003C/p\u003E\u003Cp\u003EkOS really lags the game after running it continuously for more than 15-20 minutes so the drive was actually slower and more laggy.\u003C/p\u003E\u003Cp\u003ECode:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003Eclearscreen.\u003Cbr\u003EPrint \u0022Duna Pole to Pole by check\u0022.\u003Cbr\u003Eset waypoint1 to latlng(-41,-10).\u003Cbr\u003Eset waypoint2 to latlng(-35,-18).\u003Cbr\u003Eset waypoint3 to latlng(-28.5,-24.3).\u003Cbr\u003E\u003Cbr\u003Eset waypoint4 to latlng(-28.3,-30.2).\u003Cbr\u003Eset waypoint5 to latlng(-19,-42).\u003Cbr\u003Eset waypoint6 to latlng(-7.8,-35.9).\u003Cbr\u003E\u003Cbr\u003Eset waypoint7 to latlng(1,-19).\u003Cbr\u003Eset waypoint8 to latlng(4.6,-13.8).\u003Cbr\u003Eset waypoint9 to latlng(8,-5.5).\u003Cbr\u003E\u003Cbr\u003Eset waypoint10 to latlng(17,17).\u003Cbr\u003Eset waypoint11 to latlng(31,37).\u003Cbr\u003Eset waypoint12 to latlng(47.5,44.8).\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Eset nextwaypoint to waypoint1.\u003Cbr\u003Eset w to 1.\u003Cbr\u003Euntil w = 13 {\u003Cbr\u003Elock wheelthrottle to -0.2.\u003Cbr\u003Ewait 3.\u003Cbr\u003Elock wheelsteering to nextwaypoint.\u003Cbr\u003Elock wheelthrottle to 0.1.\u003Cbr\u003Ewait 5.\u003Cbr\u003Elock wheelthrottle to 0.5.\u003Cbr\u003Euntil nextwaypoint:distance \u0026lt; 50 {\u003Cbr\u003Eprint \u0022Waypoint \u0022\u002Bw\u002B \u0022 \u0022\u002Bnextwaypoint distance at (3,3).\u003Cbr\u003E\tif inlight = \u0022True\u0022 {lights off.}.\u003Cbr\u003E\tif inlight = \u0022False\u0022 {lights on.}.\u003Cbr\u003Eset x to up - facing.\u003Cbr\u003Eset attitude to sqrt((x:pitch)^2\u002B(x:yaw)^2).\u003Cbr\u003Eif attitude \u0026gt; 2 {unlock wheelsteering.}.\u003Cbr\u003Eif surfacespeed \u0026gt; 14 {lock wheelthrottle to 0.1.}.\u003Cbr\u003Eif surfacespeed \u0026lt; 14 {lock wheelthrottle to 0.5.}.\u003Cbr\u003Eif surfacespeed \u0026gt; 18 {lock wheelthrottle to -0.1.}.\u003Cbr\u003E\u003Cbr\u003Eif attitude \u0026lt; 2 {lock wheelsteering to nextwaypoint.}.\u003Cbr\u003E}.\u003Cbr\u003Eset w to w \u002B1.\u003Cbr\u003Eif w = 2 {set nextwaypoint to waypoint2.}.\u003Cbr\u003Eif w = 3 {set nextwaypoint to waypoint3.}.\u003Cbr\u003Eif w = 4 {set nextwaypoint to waypoint4.}.\u003Cbr\u003Eif w = 5 {set nextwaypoint to waypoint5.}.\u003Cbr\u003Eif w = 6 {set nextwaypoint to waypoint6.}.\u003Cbr\u003Eif w = 7 {set nextwaypoint to waypoint7.}.\u003Cbr\u003Eif w = 8 {set nextwaypoint to waypoint8.}.\u003Cbr\u003Eif w = 9 {set nextwaypoint to waypoint9.}.\u003Cbr\u003Eif w = 10 {set nextwaypoint to waypoint10.}.\u003Cbr\u003Eif w = 11 {set nextwaypoint to waypoint11.}.\u003Cbr\u003Eif w = 12 {set nextwaypoint to waypoint12.}.\u003Cbr\u003E}.\u003Cbr\u003Elock wheelthrottle to -0.1.\u003Cbr\u003Ewait until surfacespeed \u0026lt; 3.\u003Cbr\u003Ebrakes on.\u003Cbr\u003Eunlock all.\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt only made it past waypoint 1.\u003C/p\u003E\n"}]}