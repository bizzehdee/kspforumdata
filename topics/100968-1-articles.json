{"TopicId":100968,"ForumId":44,"TopicTitle":"Help with some math: delta-v to actual velocity relationship","CreatedByName":"Rosco P. Coltrane","CreatedById":61065,"CreatedDateTime":"2015-02-28T22:36:34Z","PageNum":1,"Articles":[{"CreatedByName":"Rosco P. Coltrane","CreatedById":61065,"CreatedDateTime":"2015-02-28T22:36:34Z","Content":"\n\u003Cp\u003EHello. So I\u0027m missing something here and don\u0027t what what it is, but I\u0027m sure is something stupid. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhat I\u0027d like to do is calculate the dV needed to go from one orbit to another around the same body. Using the Vis-Viva equation I know the speeds I\u0027ll have at different altitudes in my (circular) orbit. So my guts tell me there must be some way of calculating the dV that would take me from one velocity to the other, hence from one orbit to the other... but how exactly does one go about calculating that?\u003C/p\u003E\u003Cp\u003ESo for instance I\u0027m in circular orbit some 2.6 Gm above this planet Sarnus, (yes, Gm), both the Vis-Viva and the navball say I\u0027m traveling at 176 m/s. If I where to lower my orbit to 315 km, then per the equation the speed would be some 3800 m/s. So how much dv would I need to do it? Performing the maneuver myself gives me some 162 at Ap and 1564 at Pe burns to completely circularize at 315 km, so 1726 m/s of dV spent. I just don\u0027t know how to get to that number mathematically.\u003C/p\u003E\u003Cp\u003EAny help?\u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\n"},{"CreatedByName":"andrewas","CreatedById":24662,"CreatedDateTime":"2015-02-28T22:49:36Z","Content":"\n\u003Cp\u003EYou don\u0027t go directly from one circular orbit to another, you go into an intermediate elliptical orbit first. So, calculate the difference in velocity between your starting orbit and the transfer orbit, and the same at the other end, sum the two, and you have your overall deltaV budget.\u003C/p\u003E\n"},{"CreatedByName":"Rosco P. Coltrane","CreatedById":61065,"CreatedDateTime":"2015-02-28T23:09:38Z","Content":"\n\u003Cp\u003EHa, I told you it was going to be something stupid. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks a lot, andrewas.\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2015-03-01T02:50:02Z","Content":"\n\u003Cp\u003EYou need vis-viva and angular momentum conservation to do transfer calculations. If you apply these to apsides of the elliptical orbit, you get the equation v\u003Csub\u003Ep\u003C/sub\u003E = sqrt(GM/a) * sqrt(r\u003Csub\u003Ea\u003C/sub\u003E/r\u003Csub\u003Ep\u003C/sub\u003E). The formula for v\u003Csub\u003Ea\u003C/sub\u003E is the same, with r\u003Csub\u003Ea\u003C/sub\u003E and r\u003Csub\u003Ep\u003C/sub\u003E switched around.\u003C/p\u003E\u003Cp\u003EBetween two co-planar circular orbits the simplest and usually (but not always) most efficient transfer is the Hohmann, which simply connects the two orbits with an elliptical one. The above formula is all you need to compute the dV cost of such transfer. In general, the most efficient transfer between two circular orbits is the bi-elliptic transfer, which requires some numerical work to compute on case-by-case basis.\u003C/p\u003E\n"},{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-03-01T15:21:04Z","Content":"\n\u003Cp\u003EUse the formula K-2 provided with a couple of amendments. \u003C/p\u003E\u003Cp\u003EHohman transfers consist of 2 burns, the first i abbreviate H1 and second H2\u003C/p\u003E\u003Cp\u003EIt is slightly better if possible to choose a H1 that is radial to the apogee on the target orbit so that the intercept is on the periapsis of the target orbit (H2 is generally 180\u0027 from optimal H1). This may require several passes of H1 theta to approximate _or_ simply set H1 at next pass and wait until the opportune moment(s) to collapse the ellipse (H2) successively (over many orbits, takes practice). H2 does not have to be a single burn, it can be broken up into several burns and these successive burns can be accomplished by simply firing at near exactly H2. With proper planning partial H2 burns can collapse the orbit within a km of the target. If you are doing transfers from altitudes that have huge (yearly or more) orbital periods to small orbital periods (monthly), then its best to let the closer body approximate but follow future position on H2 (meaning you might deviate slight from optimal H2), this means that the first partial H2 will bring orbital period very close to the target orbital period so the wait for the intercept burn will be minimal. \u003C/p\u003E\u003Cp\u003EThe other amendment is that you may also need additional dV to correct inclination, and the amount of fuel varies depending on whether it AN/DN nodes are close to or far from the optimal transfer point. if the AN/DN have a theta ~90\u0027 from H2 then you might want to shift transfer points to AN/DN alter both in one vector burn and then once you reach perigee begin collapsing the orbit to match the Theta of your target. \u003C/p\u003E\u003Cp\u003EBTW don\u0027t forget to also include RCS for precision intercepting. Use RCS fuel \u00AE and (N or H) at the end of burns to precisely adjust your altitude.\u003C/p\u003E\u003Cp\u003ESome useful info:\u003C/p\u003E\u003Cp\u003EA\u003Cem\u003Ex\u003C/em\u003E = (Pe\u003Cem\u003Ex\u003C/em\u003E \u002B Rc) \u002B (Ap\u003Cem\u003Ex\u003C/em\u003E \u002B Rc) where Rc = radius of central body if central body is SOI center. \u003C/p\u003E\u003Cp\u003Ea\u003Cem\u003Ex\u003C/em\u003E = A\u003Cem\u003Ex\u003C/em\u003E/2\u003C/p\u003E\u003Cp\u003EThere are three a to think of\u003C/p\u003E\u003Cp\u003Ea1 = 0.5 * A1= semimajor axis of starting orbit \u003C/p\u003E\u003Cp\u003Ea2 = \u0022 \u0022 of orbit between H1 and H2\u003C/p\u003E\u003Cp\u003Ea3 = \u0022 \u0022 of target orbit. \u003C/p\u003E\u003Cp\u003EIf optimal transfer is used then\u003C/p\u003E\u003Cp\u003Etwo pe\u003C/p\u003E\u003Cp\u003Epe1 = pe of starting orbit\u003C/p\u003E\u003Cp\u003Epe2 = pe3= Pe of target orbit\u003C/p\u003E\u003Cp\u003Ethree apo\u003C/p\u003E\u003Cp\u003Eapo1 = starting orbits apo\u003C/p\u003E\u003Cp\u003Eapo2 = close to point of H2\u003C/p\u003E\u003Cp\u003Eapo3 = target orbit apo\u003C/p\u003E\u003Cp\u003EThis give you all the information then to use the formula K-2 provided except apo2. \u003C/p\u003E\u003Cp\u003Ee1 = (Apo1-Pe1)/A1\u003C/p\u003E\u003Cp\u003E(apo2 \u002B Rc) ~ a x (1 - e1^2)/(1 \u002B e1 cosine theta) where theta is the angle of H2 relative to theta of pe1\u003C/p\u003E\u003Cp\u003Ea2 ~ ((apo2 \u002B Rc) \u002B (Pe3 \u002B Rc))/2\u003C/p\u003E\u003Cp\u003Ewith this you can calculate all the dV. If SOI center is different form central bodies center, then you are going then it will not be precise.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-01T15:23:56Z\u0022 title=\u002203/01/2015 03:23  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 1, 2015\u003C/time\u003E by PB666\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-03-01T16:47:52Z","Content":"\n\u003Cp\u003EI should probably also add.\u003C/p\u003E\u003Cp\u003Eyour can derive H2 r because at the point of the burn you would know v (at least in KSP) mu = Central bodies gravitational coefficient\u003C/p\u003E\u003Cp\u003Ev1\u00AE = (mu * (2/r - 1/a1))^0.5\u003C/p\u003E\u003Cp\u003Ev2(Apo2) = (mu * (2/(Apo2\u002B Rc) - 1/a2))^0.5\u003C/p\u003E\u003Cp\u003Ev2(Pe2/3) = (mu * (2/(Pe2 \u002B Rc) - 1/a2))^0.5\u003C/p\u003E\u003Cp\u003Ev3(pe3) = (mu * (2/(Pe3 \u002B Rc) - 1/a3))^0.5\u003C/p\u003E\u003Cp\u003EdV(H1) = v1\u00AE - V2(Apo2)\u003C/p\u003E\u003Cp\u003EdV(H2) = v2(Pe2) - V3(pe3)\u003C/p\u003E\u003Cp\u003EdV = dV(H1) \u002B dV(H2)\u003C/p\u003E\n"},{"CreatedByName":"Rosco P. Coltrane","CreatedById":61065,"CreatedDateTime":"2015-03-03T02:46:24Z","Content":"\n\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E I actually have pretty much everything covered. The only thing I don\u0027t really have is the dV for the inclination change, precisely because the point where you perform it will vary on a case-by-case basis. So my \u0022theoretical situation\u0022 approach goes out the window. I can tell you how much dV you\u0027ll need to go from X altitude to Y altitude with a decent approximation, but inclination... nope. I could go the route of \u0022the best/worst place to do it is A, you\u0027ll need B m/s at that point\u0022... but still.\n"},{"CreatedByName":"Kibble","CreatedById":131042,"CreatedDateTime":"2015-03-03T03:23:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rosco P. Coltrane\u0022 data-cite=\u0022Rosco P. Coltrane\u0022\u003E\u003Cdiv\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E I actually have pretty much everything covered. The only thing I don\u0027t really have is the dV for the inclination change, precisely because the point where you perform it will vary on a case-by-case basis. So my \u0022theoretical situation\u0022 approach goes out the window. I can tell you how much dV you\u0027ll need to go from X altitude to Y altitude with a decent approximation, but inclination... nope. I could go the route of \u0022the best/worst place to do it is A, you\u0027ll need B m/s at that point\u0022... but still.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDelta vee for an inclination change is related to your orbital speed, and can be imagined as a triangle with your current vector and your desired vector. The third line is the change in velocity. For example a change of 60 degrees in inclination would create an equilateral triangle, and so the required delta vee is equal to your current orbital speed.\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2015-03-03T04:11:36Z","Content":"\n\u003Cp\u003EI\u0027m pretty sure Rosco knows how to compute dV for inclination change at a given altitude. He seems to be interested in finding best altitude to do so.\u003C/p\u003E\u003Cp\u003EI can\u0027t help you much. Every time I need optimal bi-elliptic, I end up writing a script in Mathematica to compute dV given altitude of intermediate node, and then optimize that value numerically. Given the monstrosity that is the general form of that dV equation, I don\u0027t think there is an analytic solution. If you don\u0027t have access to Mathematica, this works equally well in Matlab or its free cousin Octave.\u003C/p\u003E\u003Cp\u003EI\u0027m starting to think that we might just need to set up a community pool of various KSP-related Octave scripts.\u003C/p\u003E\n"},{"CreatedByName":"Bill Phil","CreatedById":127797,"CreatedDateTime":"2015-03-03T04:38:02Z","Content":"\n\u003Cp\u003EIf it\u0027s related to velocity, then the highest altitude possible would be the best, right?\u003C/p\u003E\n"},{"CreatedByName":"Kibble","CreatedById":131042,"CreatedDateTime":"2015-03-03T04:49:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Bill Phil\u0022 data-cite=\u0022Bill Phil\u0022\u003E\u003Cdiv\u003EIf it\u0027s related to velocity, then the highest altitude possible would be the best, right?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes. I guess the question is balancing the Oberth effect with the potential savings from high orbital altitude and inclination. Which is why EML-2 is such a great place, you get loads of both!\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2015-03-03T06:21:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Bill Phil\u0022 data-cite=\u0022Bill Phil\u0022\u003E\u003Cdiv\u003EIf it\u0027s related to velocity, then the highest altitude possible would be the best, right?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, because if your final altitude is low, you are wasting a ton of dV on that transfer to high altitude, which might actually be greater than savings on inclination change. For very small inclination changes it\u0027s often most efficient to do inclination change at your initial or final orbit (whichever is higher) and do a standard Hohmann in between. For very large inclination changes, it\u0027s best to go to the edge of SOI or Hill Sphere, do the inclination change there, and then return to your target altitude. For everything in between, there\u0027s the sweet spot somewhere above the higher of the two orbits and you need to do an honest bi-elliptic optimization.\u003C/p\u003E\u003Cp\u003EAlso, the limits of how high is \u0022very high\u0022 and how low is \u0022very low\u0022 is entirely up to the parameters of initial and final orbits.\u003C/p\u003E\n"},{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-03-03T14:36:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022K^2\u0022 data-cite=\u0022K^2\u0022\u003E\u003Cdiv\u003EI\u0027m starting to think that we might just need to set up a community pool of various KSP-related Octave scripts.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere needs to be a repository of useful orbital algorithms. I have an excel sheet using VB scripts where I can enter coordinate and SOI center based velocity vectors and derive the ellipse, but VB is on the wane because of the virus issues. Wikipedia is not the place to look for formula, they are so scattered about willy-nilly, and the formula generally cannot be cut and pasted into anything.\u003C/p\u003E\u003Cp\u003EI have a whole bunch of stuff in Excel (nicely tabled) that I can DL, but it assumes they users have access to spreadsheets. And of couse any scripting has to VB, and I haven\u0027t migrated to 2010 yet so its its only going to be compatible version\u0026lt;=2007.\u003C/p\u003E\n"},{"CreatedByName":"Rosco P. Coltrane","CreatedById":61065,"CreatedDateTime":"2015-03-03T16:24:29Z","Content":"\n\u003Cp\u003EWell, my exact problem right now is like this:\u003C/p\u003E\u003Cp\u003EI\u0027m working on a dV map for the Outer Planets Mod, which adds new planets to KSP. Now listed on that map, along with the dV you need to go there, dV to capture, circularize, take off, etc. there\u0027s the dV you need to do the inclination change for the transfer from Kerbin to the other planet. \u003C/p\u003E\u003Cp\u003ENow, you (or at least I) would do the inc. change at the An/Dn, but where exactly that An/Dn is, differers from window to window. Because you don\u0027t always launch at the very best window possible, you launch at the next one. Planets in this mod also are very far away so waiting for a window takes a long time, so the first acceptable phase angle you get, you launch. As a result, different launches will end up with An/Dn in very different places, sometimes they are close to Kerbin, sometimes they are farther away.\u003C/p\u003E\u003Cp\u003EWhat I\u0027ve done is use dV = 2*v*sin(ang/2) to calculate said dV. v here being the velocity I have when I do the change and \u0022ang\u0022 the angle I\u0027m aiming for. The problem is of course picking a place to do the maneuver, hence v. Also I\u0027m not too what value should I pick for the angle.\u003C/p\u003E\u003Cp\u003EBut in any case, my head hurts. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"}]}