{"TopicId":103430,"ForumId":70,"TopicTitle":"Can anyone confirm if my KSP is crashing due to hitting the memory barrier?","CreatedByName":"Honeybadga","CreatedById":64977,"CreatedDateTime":"2015-04-05T04:05:13Z","PageNum":1,"Articles":[{"CreatedByName":"Honeybadga","CreatedById":64977,"CreatedDateTime":"2015-04-05T04:05:13Z","Content":"\n\u003Cp\u003EI keep getting constant crashes with my modded 32-bit KSP 0.90 installment. The application is hitting the 3.7 - 3.8 GB mark with me trying to get a 30 part rocket into orbit. When I enter my VAB in career mode and load the rocket, KSP is already at around 3.4ish GB. Because I\u0027m $h!t and I need a couple of tries to get that thing into orbit with FAR, everytime I do revert to launch, memory usage keeps increasing until after the 5th or so try, the game crashes at around 3.78ish GB. Could this be a memory leak?\u003C/p\u003E\u003Cp\u003EAfter some months of absence, I finally wanted to play KSP again with all the awesome new features for the career mode and I remember that in the past, the game was running fine for me with a good bunch of mods that added even more parts than the installment I\u0027m currently running. Right now I\u0027m very early into career mode and this is a real bummer. I\u0027m trying to avoid to run Active Texture Management in the aggressive setting since the textures look ....ty then, but perhaps I won\u0027t have any other choice.\u003C/p\u003E\u003Cp\u003EApologies advance for the following little rant: I consider KSP to be one of the best if not THE best game ever made, I\u0027ve sunk hundreds (probably 1000\u002B) hours into it, but these technical issues are really holding the game back. KSP\u0027s recommended system requirements of 4 GB have nothing to do with reality. [/rant]\u003C/p\u003E\u003Cp\u003EIs there any word if we can expect things to get better with the 1.0 release? I\u0027ve already read \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/content/328-The-future-of-Windows-64-bit-builds-for-KSP\u0022 rel=\u0022external nofollow\u0022\u003ETed\u0027s post about Windows 64-bit builds for KSP\u003C/a\u003E so I\u0027m not counting on a stable 64-bit version anytime soon, but still, as I\u0027ve already mentioned, I remember things have been better before.\u003C/p\u003E\u003Cp\u003EHere are some logs from three instances of the application crashing:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/6m8mqu44d6x0jzl/2015-04-05_033706.rar\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/6m8mqu44d6x0jzl/2015-04-05_033706.rar\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/pj0m4qntk86r9mz/2015-04-05_035540.rar\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/pj0m4qntk86r9mz/2015-04-05_035540.rar\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/ks4aylmsc8f1utz/2015-04-05_044748.rar\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/ks4aylmsc8f1utz/2015-04-05_044748.rar\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EMost of this stuff is hieroglyphs to me.\u003C/p\u003E\u003Cp\u003EList of mods:\u003C/p\u003E\u003Cp\u003EActiveTextureManagement 32bit Basic\u003C/p\u003E\u003Cp\u003EAlternate_Resource_Panel-2.6.3.0\u003C/p\u003E\u003Cp\u003EAtmospheric Trajectories-1.1.3\u003C/p\u003E\u003Cp\u003EB9_Aerospace_Pack-R5.2.8\u003C/p\u003E\u003Cp\u003EEnhancedNavBall_1_3_5\u003C/p\u003E\u003Cp\u003EEnvironmentalVisualEnhancements-7-4\u003C/p\u003E\u003Cp\u003EFerram_Aerospace_Research-v0.14.7\u003C/p\u003E\u003Cp\u003EInfernal_Robotics_Model_Rework_-_Core_Pack-v01\u003C/p\u003E\u003Cp\u003EInfernal_Robotics_Model_Rework_-_Expansion_Pack-v01\u003C/p\u003E\u003Cp\u003EInfernal_Robotics_Model_Rework_-_Utility_Pack-v01\u003C/p\u003E\u003Cp\u003EIR.Rework.P2\u003C/p\u003E\u003Cp\u003EKarbonite_0.5.5\u003C/p\u003E\u003Cp\u003EKAS_0.4.10\u003C/p\u003E\u003Cp\u003EKerbal_Alarm_Clock-3.2.4.0\u003C/p\u003E\u003Cp\u003EKerbal_Joint_Reinforcement-v3.1.2\u003C/p\u003E\u003Cp\u003EKIS_v1.0.1\u003C/p\u003E\u003Cp\u003EKSPX-v0.2.8.1\u003C/p\u003E\u003Cp\u003EKW_Rocketry-2.6d2\u003C/p\u003E\u003Cp\u003EMark_IV_Spaceplane_System-1.1.2\u003C/p\u003E\u003Cp\u003EMechJeb2-2.4.2.0\u003C/p\u003E\u003Cp\u003EModuleManager-2.5.13\u003C/p\u003E\u003Cp\u003ENavball_Docking_Alignment_Indicator-6\u003C/p\u003E\u003Cp\u003ENear_Future_Construction-0.4.0\u003C/p\u003E\u003Cp\u003ENear_Future_Electrical-0.3.1\u003C/p\u003E\u003Cp\u003ENear_Future_Propulsion-0.4.0\u003C/p\u003E\u003Cp\u003ENear_Future_Solar-0.4.0\u003C/p\u003E\u003Cp\u003ENear_Future_Spacecraft_Parts-0.3.1\u003C/p\u003E\u003Cp\u003EProcedural_Wings-0.9.3\u003C/p\u003E\u003Cp\u003EProcFairings_3.11\u003C/p\u003E\u003Cp\u003ERCSBuildAid_v0.6.1\u003C/p\u003E\u003Cp\u003ERealChute_Parachute_Systems-1.3.1\u003C/p\u003E\u003Cp\u003ERemoteTech-1.6.3\u003C/p\u003E\u003Cp\u003ESCANsat-v10.0\u003C/p\u003E\u003Cp\u003EScienceAlert-1.8.4\u003C/p\u003E\u003Cp\u003ETacFuelBalancer_2.4.1.1008\u003C/p\u003E\u003Cp\u003EToolbar-1.7.8\u003C/p\u003E\u003Cp\u003ETweakScale_-_Rescale_Everything-v1.52.1\u003C/p\u003E\u003Cp\u003EHere\u0027s a screen grab of my game data folder:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://puu.sh/h1WvY/246e3c5614.png\u0022 alt=\u0022246e3c5614.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EMy system specs:\u003C/p\u003E\u003Cp\u003EWindows 7 Ultimate 64-bit SP1\u003C/p\u003E\u003Cp\u003EIntel Core i7 930 @ 2.8 GHz\u003C/p\u003E\u003Cp\u003E6 GB RAM\u003C/p\u003E\u003Cp\u003EZotac GTX470 AMP!\u003C/p\u003E\u003Cp\u003E3 Samsung HDDs, no SSDs\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-05T04:23:18Z\u0022 title=\u002204/05/2015 04:23  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 5, 2015\u003C/time\u003E by Honeybadga\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2015-04-06T06:08:10Z","Content":"\n\u003Cp\u003EBased your post and my own observed crashes, you\u0027re definitely crashing due to memory.\u003C/p\u003E\u003Cp\u003EI see you already have AdvancedTextureManagement in your mod list. You might try setting your texture resolution to half and/or using more aggressive settings for ATM to squeeze out a bit more memory.\u003C/p\u003E\u003Cp\u003EAlternatively, the -force-d3d11 or -force-opengl launch options may help with memory usage -- but you may notice some pretty significant graphical glitches.\u003C/p\u003E\u003Cp\u003ELastly, you can try removing some texture-heavy mods.\u003C/p\u003E\u003Cp\u003ERegardless of all this, there does appear to be a memory leak so this merely buys more time between crashes. Whether the leak is stock or an addon or both is anybody\u0027s guess though.\u003C/p\u003E\n"},{"CreatedByName":"Windspren","CreatedById":134441,"CreatedDateTime":"2015-04-06T18:49:09Z","Content":"\n\u003Cp\u003EDo you have the patcher in your ksp file? You should delete it as it made my KSP load in 30 seconds. Also, you can make a folder in your gamedata called Part Packs. Move your part mods inside of there and KSP loads way faster\u003C/p\u003E\n"},{"CreatedByName":"Honeybadga","CreatedById":64977,"CreatedDateTime":"2015-04-07T01:42:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dewin\u0022 data-cite=\u0022dewin\u0022\u003E\u003Cdiv\u003EBased your post and my own observed crashes, you\u0027re definitely crashing due to memory.\u003Cp\u003EI see you already have AdvancedTextureManagement in your mod list. You might try setting your texture resolution to half and/or using more aggressive settings for ATM to squeeze out a bit more memory.\u003C/p\u003E\u003Cp\u003EAlternatively, the -force-d3d11 or -force-opengl launch options may help with memory usage -- but you may notice some pretty significant graphical glitches.\u003C/p\u003E\u003Cp\u003ELastly, you can try removing some texture-heavy mods.\u003C/p\u003E\u003Cp\u003ERegardless of all this, there does appear to be a memory leak so this merely buys more time between crashes. Whether the leak is stock or an addon or both is anybody\u0027s guess though.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI did indeed set ActiveTextureManagement to aggressive but as you already said, it only buys more time between crashes. With ATM basic, from startup to going to the VAB in my career save I was already looking at 3.4 GB RAM usage. ATM\u0027s aggessive setting bought me around 500MB of RAM. However, KSP\u0027s memory usage keeps increasing for me with each change of scenery which includes going from VAB to the starting ramp, doing revert flight back to both start or the VAB, quickloading, finishing a mission etc. This results in me having to restart the game between most successful flights or just waiting for it to crash and then restart.\u003C/p\u003E\u003Cp\u003EI have tried starting it with the openGL parameter but it doesn\u0027t really help due to my video card having an issue with it. As I\u0027ve said, I\u0027ve been running heaviliy modded installs of KSP in the past with a good bunch of more texture heavy mods than I do now but it has never been as bad.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Laythe Dweller\u0022 data-cite=\u0022Laythe Dweller\u0022\u003E\u003Cdiv\u003EDo you have the patcher in your ksp file? You should delete it as it made my KSP load in 30 seconds. Also, you can make a folder in your gamedata called Part Packs. Move your part mods inside of there and KSP loads way faster\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EKPS\u0027s loading time isn\u0027t really that much of an issue for me since once ActiveTextureManagement compresses the textures, it doesn\u0027t take that long for the game to load during the consecutive starts. I\u0027m not sure what you mean by the patcher. Also, I\u0027m not sure if I feel comfortable with altering the folder structure of mods like B9.\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2015-04-07T01:55:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Honeybadga\u0022 data-cite=\u0022Honeybadga\u0022\u003E\u003Cdiv\u003EI did indeed set ActiveTextureManagement to aggressive but as you already said, it only buys more time between crashes. With ATM basic, from startup to going to the VAB in my career save I was already looking at 3.4 GB RAM usage. ATM\u0027s aggessive setting bought me around 500MB of RAM. However, KSP\u0027s memory usage keeps increasing for me with each change of scenery which includes going from VAB to the starting ramp, doing revert flight back to both start or the VAB, quickloading, finishing a mission etc. This results in me having to restart the game between most successful flights or just waiting for it to crash and then restart.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve also ran into this problem, FWIW, and I use to be able to run a much heavier install in 0.22/0.23 as well. \u003C/p\u003E\u003Cp\u003EMy hope is that I can free up some memory so I can at least go longer between crashes/restarts. (Actually, now I\u0027m on a project to see if I can get KSP to play nice in a 64-bit Linux VM so I can play it without dual-booting, but there\u0027s already a topic for that.)\u003C/p\u003E\n"},{"CreatedByName":"helaeon","CreatedById":101767,"CreatedDateTime":"2015-04-07T02:16:36Z","Content":"\n\u003Cp\u003EI\u0027m using DDS Loader and the DDS tool found in the forums and no AFT. NearFuture and the MK4 spaceplane can have their textures dropped to 1/2 if DDSed and you won\u0027t likely notice but you\u0027ll save a TON of memory. You may want to do something similar to B9 and KW.\u003C/p\u003E\u003Cp\u003EAlso forcing openGL is pretty much mandatory as far as I can tell.\u003C/p\u003E\n"},{"CreatedByName":"bernh","CreatedById":140617,"CreatedDateTime":"2015-04-09T04:09:24Z","Content":"\n\u003Cp\u003EHere\u0027s the solution I came up with - \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/115069-0-90-Possible-Windows-Memory-Wall-Crash-Workaround\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/115069-0-90-Possible-Windows-Memory-Wall-Crash-Workaround\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIt is similar to what helaeon is suggesting, but I am adding in an extra step in the form of a RAM optimizer. I still couldn\u0027t get past the loading screen until I added the RAM optimizer into the mix.\u003C/p\u003E\n"},{"CreatedByName":"ColKlonk","CreatedById":137078,"CreatedDateTime":"2015-04-09T10:33:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dewin\u0022 data-cite=\u0022dewin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI see you already have AdvancedTextureManagement in your mod list. You might try setting your texture resolution to half and/or using more aggressive settings for ATM to squeeze out a bit more memory.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have a good one with regard to ATM... running KSP under OpenGL.\u003C/p\u003E\u003Cp\u003EATM under 2x compression was messing up my instruments so I dumped it... and gained 100MBs of memory.. interesting \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E.\u003C/p\u003E\u003Cp\u003EI regularly cleaned ATMs cache as I tried and deleted mods, so there was never any leftover images that loaded unnecessary.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-09T10:36:02Z\u0022 title=\u002204/09/2015 10:36  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 9, 2015\u003C/time\u003E by ColKlonk\u003C/strong\u003E\n\u003C/span\u003E\n"}]}