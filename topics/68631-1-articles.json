{"TopicId":68631,"ForumId":44,"TopicTitle":"Please help me validate these maths","CreatedByName":"BlazeFallow","CreatedById":83905,"CreatedDateTime":"2014-04-08T10:38:39Z","PageNum":1,"Articles":[{"CreatedByName":"BlazeFallow","CreatedById":83905,"CreatedDateTime":"2014-04-08T10:38:39Z","Content":"\n\u003Cp\u003EHello Folks,\u003C/p\u003E\u003Cp\u003EI have been kind of obsessed with Optimizations as of late. So today I sat down and started making some formulas. Now I wish to validate my formulas by submitting them to you good people.\u003C/p\u003E\u003Cp\u003EPlease assume the following values:\u003C/p\u003E\u003Cp\u003EX = M\u003Csub\u003Edry\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003EY = M\u003Csub\u003Ewet\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003EZ = # of Engines\u003C/p\u003E\u003Cp\u003EP = Payload tonnage\u003C/p\u003E\u003Cp\u003EQ = tank dry/wet ratio (ussually around 0.11)\u003C/p\u003E\u003Cp\u003ES = Engine Weight\u003C/p\u003E\u003Cp\u003ET = Engine Thrust\u003C/p\u003E\u003Cp\u003ESo that given the following static values:\u003C/p\u003E\u003Cp\u003EdV, I\u003Csub\u003Esp\u003C/sub\u003E, P, Q, S, T, TWR = some number \u0026gt; 1\u003C/p\u003E\u003Cp\u003ECalculate the following:\u003C/p\u003E\u003Cp\u003EX = Mdry\u003C/p\u003E\u003Cp\u003EY = Mwet\u003C/p\u003E\u003Cp\u003EZ = # of Engines\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003E\u003Cp\u003EWith the above we can apply it to the dV equation, yielding:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EdV = I\u003C/strong\u003E\u003Csub\u003E\u003Cstrong\u003Esp\u003C/strong\u003E\u003C/sub\u003E\u003Cstrong\u003E * Ln(Y/X)\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EKeeping in mind that the values that KSP gives us for I\u003Csub\u003Esp\u003C/sub\u003E of engines are in seconds so we must multiply them by 9.82 to get the I\u003Csub\u003Esp\u003C/sub\u003E for this equation\u003C/p\u003E\u003Cp\u003EDeriving this yields:\u003C/p\u003E\u003Cp\u003EdV/I\u003Csub\u003Esp\u003C/sub\u003E = Ln (Y/X)\u003C/p\u003E\u003Cp\u003Ee\u003Csup\u003EdV/I\u003C/sup\u003E\u003Csub\u003E\u003Csup\u003Esp\u003C/sup\u003E\u003C/sub\u003E = Y/X\u003C/p\u003E\u003Cp\u003EWhich then yields:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY = X * e\u003C/strong\u003E\u003Csup\u003E\u003Cstrong\u003EdV/I\u003C/strong\u003E\u003C/sup\u003E\u003Csub\u003E\u003Csup\u003E\u003Cstrong\u003Esp\u003C/strong\u003E\u003C/sup\u003E\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003EThe thing is that X and Y are dependant on one another. As tanks are not massless when empty, X=P simply isn\u0027t true unless X=Y in which case dV will = 0\u003C/p\u003E\u003Cp\u003EFor this I came up with the formula (please validate my maths below, as I\u0027m not 100% sure on it)\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EX = (Y - P - SZ)*Q \u002B P \u002B SZ\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI then algebra\u0027d the equation to relate it to Y\u003C/p\u003E\u003Cp\u003EX = QY - QP - QSZ \u002B P \u002B SZ\u003C/p\u003E\u003Cp\u003EX - QY = -QP - QSZ \u002B P \u002B SZ\u003C/p\u003E\u003Cp\u003E-QY = -QP - QSZ - X \u002B P \u002B SZ\u003C/p\u003E\u003Cp\u003EQY = QP \u002B QSZ \u002B X - P - SZ\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY = P \u002B SZ \u002B (X - P - SZ)/Q\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThat\u0027s great and all, but how do we optimize for a good enough TWR to get off Kerbin.\u003C/p\u003E\u003Cp\u003EFor this we have the TWR equation:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ETWR = Z*T/Y*9.82\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ERelated to Y this becomes:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY = (1/TWR)*Z*T/9.82\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ESo here we have three equations for optimizing:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY = X * e\u003C/strong\u003E\u003Csup\u003E\u003Cstrong\u003EdV/I\u003C/strong\u003E\u003C/sup\u003E\u003Csub\u003E\u003Csup\u003E\u003Cstrong\u003Esp\u003C/strong\u003E\u003C/sup\u003E\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY = P \u002B SZ \u002B (X - P - SZ)/Q\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY = (1/TWR)*Z*T/9.82\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThis is where my brain starts to hurt. Can someone let me know if I\u0027m actually on to something here, or if my brain is broken?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-08T11:18:14Z\u0022 title=\u002204/08/2014 11:18  AM\u0022 data-short=\u002210 yr\u0022\u003EApril 8, 2014\u003C/time\u003E by BlazeFallow\u003C/strong\u003E\n\u003Cbr\u003EEdited to include end goal of equations\n\u003C/span\u003E\n"},{"CreatedByName":"Kialar","CreatedById":60893,"CreatedDateTime":"2014-04-08T10:47:44Z","Content":"\n\u003Cp\u003ECan you provide, how you came to this:\u003C/p\u003E\u003Cp\u003EX = (Y - P - SZ)*Q \u002B P \u002B SZ\u003C/p\u003E\u003Cp\u003E?\u003C/p\u003E\u003Cp\u003EI don\u0027t get it.\u003C/p\u003E\n"},{"CreatedByName":"Kialar","CreatedById":60893,"CreatedDateTime":"2014-04-08T10:58:17Z","Content":"\n\u003Cp\u003EI would confirm this: Y = X * edV/Isp\u003C/p\u003E\u003Cp\u003Eand this: Y = (1/TWR)*Z*T/9.82\u003C/p\u003E\u003Cp\u003EOk. I gonna try you second formula, wich seems bugged to me.\u003C/p\u003E\u003Cp\u003ENumber of Engines times Enigne count.\u003C/p\u003E\u003Cp\u003ES*Z\u003C/p\u003E\u003Cp\u003Eadd Payload () just for convinience....\u003C/p\u003E\u003Cp\u003EP\u002B(S*Z)\u003C/p\u003E\u003Cp\u003Eadd dry mass\u003C/p\u003E\u003Cp\u003EX\u002BP\u002B(S*Z)\u003C/p\u003E\u003Cp\u003EDivide dry mass by tank ratio\u003C/p\u003E\u003Cp\u003E(X/Q)\u002BP\u002B(S*Z)\u003C/p\u003E\u003Cp\u003Eequals wet mass.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY=(X/Q)\u002BP\u002B(S*Z)\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EAlgebra\u0027d to X\u003C/p\u003E\u003Cp\u003EY=(X/Q)\u002BP\u002B(S*Z) | -Y -(X/Q)\u003C/p\u003E\u003Cp\u003E-(X/Q)=P\u002B(S*Z)-Y | * (-Q)\u003C/p\u003E\u003Cp\u003EX= -Q*(P\u002B(S*Z)-Y)\u003C/p\u003E\u003Cp\u003EX= -PQ-(Q*S*Z)\u002B(Q*Y) |rearange for convinience\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EX= (Q*Y)-(P*Q)-(Q*S*Z)\u003C/strong\u003E\u003C/p\u003E\n"},{"CreatedByName":"BlazeFallow","CreatedById":83905,"CreatedDateTime":"2014-04-08T11:04:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kialar\u0022 data-cite=\u0022Kialar\u0022\u003E\u003Cdiv\u003ECan you provide, how you came to this:\u003Cp\u003EX = (Y - P - SZ)*Q \u002B P \u002B SZ\u003C/p\u003E\u003Cp\u003E?\u003C/p\u003E\u003Cp\u003EI don\u0027t get it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAbsolutely.\u003C/p\u003E\u003Cp\u003EAlso i completely forgot to include the reason for my doing this. I want to end up with a way in which to omptomize the following problem:\u003C/p\u003E\u003Cp\u003EGiven the following static values:\u003C/p\u003E\u003Cp\u003EdV\u003C/p\u003E\u003Cp\u003EI\u003Csub\u003Esp\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003ETWR = some number \u0026gt; 1\u003C/p\u003E\u003Cp\u003EP = Payload tonnage\u003C/p\u003E\u003Cp\u003EQ = tank dry/wet ratio (ussually around 0.11)\u003C/p\u003E\u003Cp\u003ES = Engine Weight\u003C/p\u003E\u003Cp\u003ET = Engine Thrust\u003C/p\u003E\u003Cp\u003ECalculate the following:\u003C/p\u003E\u003Cp\u003EX = M\u003Csub\u003Edry\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003EY = M\u003Csub\u003Ewet\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003EZ = # of Engines\u003C/p\u003E\u003Cp\u003EOn to your question:\u003C/p\u003E\u003Cp\u003EX = (Y - P - SZ)*Q \u002B P \u002B SZ\u003C/p\u003E\u003Cp\u003E(Y - P - SZ) represents the full mass of the fuel tanks. Multipliying by Q (the dry/wet tank ratio) results in the dry mass of the tanks (as derived from Y wet mass) then adding back in the payload mass and engine mass you get the dry weight of the entire craft, here represent by X = M\u003Csub\u003Edry\u003C/sub\u003E.\u003C/p\u003E\n"},{"CreatedByName":"Kialar","CreatedById":60893,"CreatedDateTime":"2014-04-08T11:09:48Z","Content":"\n\u003Cp\u003EAh. I see, where I missunderstood the basic concept. The definitions were given, but I didn\u0027t catch\u0027em.\u003C/p\u003E\u003Cp\u003EX and Y are based on the CRAFT.\u003C/p\u003E\u003Cp\u003EQ is based on the FUEL TANK.\u003C/p\u003E\u003Cp\u003EI have to rethink.\u003C/p\u003E\n"},{"CreatedByName":"BlazeFallow","CreatedById":83905,"CreatedDateTime":"2014-04-08T11:10:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kialar\u0022 data-cite=\u0022Kialar\u0022\u003E\u003Cdiv\u003EI would confirm this: Y = X * edV/Isp\u003Cp\u003Eand this: Y = (1/TWR)*Z*T/9.82\u003C/p\u003E\u003Cp\u003EOk. I gonna try you second formula, wich seems bugged to me.\u003C/p\u003E\u003Cp\u003ENumber of Engines times Enigne count.\u003C/p\u003E\u003Cp\u003ES*Z\u003C/p\u003E\u003Cp\u003Eadd Payload () just for convinience....\u003C/p\u003E\u003Cp\u003EP\u002B(S*Z)\u003C/p\u003E\u003Cp\u003Eadd dry mass\u003C/p\u003E\u003Cp\u003EX\u002BP\u002B(S*Z)\u003C/p\u003E\u003Cp\u003EDivide dry mass by tank ratio\u003C/p\u003E\u003Cp\u003E(X/Q)\u002BP\u002B(S*Z)\u003C/p\u003E\u003Cp\u003Eequals wet mass.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY=(X/Q)\u002BP\u002B(S*Z)\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EAlgebra\u0027d to X\u003C/p\u003E\u003Cp\u003EY=(X/Q)\u002BP\u002B(S*Z) | -Y -(X/Q)\u003C/p\u003E\u003Cp\u003E-(X/Q)=P\u002B(S*Z)-Y | * (-Q)\u003C/p\u003E\u003Cp\u003EX= -Q*(P\u002B(S*Z)-Y)\u003C/p\u003E\u003Cp\u003EX= -PQ-(Q*S*Z)\u002B(Q*Y) |rearange for convinience\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EX= (Q*Y)-(P*Q)-(Q*S*Z)\u003C/strong\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou are actually making the exact same error I was originally making when I first develope dthe formula.\u003C/p\u003E\u003Cp\u003EIt originally looked like:\u003C/p\u003E\u003Cp\u003EX = P \u002B Q*Y \u002BS*Z\u003C/p\u003E\u003Cp\u003EThen I realized that Y included P and S*Z in it, so applying Q to the full Y can\u0027t happen, as Q only applies to the fuel tanks.\u003C/p\u003E\u003Cp\u003EThe same is said about X. X is the full mass of the dry craft, so X includes P, S*Z and the dry mass of the tanks. Thus you cannot apply Q to X itself, but first need to remove P and S*Z from X so that you are only applying Q to the tanks.\u003C/p\u003E\u003Cp\u003EDoes that make sense?\u003C/p\u003E\n"},{"CreatedByName":"Kialar","CreatedById":60893,"CreatedDateTime":"2014-04-08T11:12:39Z","Content":"\n\u003Cp\u003EYes, sir, it makes sense. I am going for a nicotine drug stick and have a think.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-04-08T11:13:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kialar\u0022 data-cite=\u0022Kialar\u0022\u003E\u003Cdiv\u003ECan you provide, how you came to this:\u003Cp\u003EX = (Y - P - SZ)*Q \u002B P \u002B SZ\u003C/p\u003E\u003Cp\u003E?\u003C/p\u003E\u003Cp\u003EI don\u0027t get it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf I understand it correctly, it is:\u003C/p\u003E\u003Cp\u003EDryMass = TankMass*TankRatio \u002B Payload \u002B TotalEngineMass\u003C/p\u003E\u003Cp\u003E= (WetMass - Payload - EngineMass)*TankRatio \u002B Payload \u002B SingleEngineMass*NumberEngines\u003C/p\u003E\u003Cp\u003EIn the variation you\u0027ve posted, you\u0027ve used the dry mass of the tanks only as X, which won\u0027t yield the correct results in the delta V calculation.\u003C/p\u003E\u003Cp\u003EEdit: I am slow.\u003C/p\u003E\n"},{"CreatedByName":"BlazeFallow","CreatedById":83905,"CreatedDateTime":"2014-04-08T11:53:14Z","Content":"\n\u003Cp\u003EAlright... I think I have come up with a monstrous equation the relates all things to Y.\u003C/p\u003E\u003Cp\u003EWith\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY = X * e\u003C/strong\u003E\u003Csup\u003E\u003Cstrong\u003EdV/I\u003C/strong\u003E\u003C/sup\u003E\u003Csub\u003E\u003Csup\u003E\u003Cstrong\u003Esp\u003C/strong\u003E\u003C/sup\u003E\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003EAnd \u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EX = (Y - P - SZ)*Q \u002B P \u002B SZ\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EBut Z is still in the mix. Let\u0027s solve that problem\u003C/p\u003E\u003Cp\u003ETWR = Z*T/Y*9.82\u003C/p\u003E\u003Cp\u003ETWR*Y*9.82 = Z*T\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EZ = (TWR * Y * 9.82)/T\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ESo then we have:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY = ((Y - P - (S * TWR * Y * 9.82)/T)*Q \u002B P \u002B (S * TWR * Y * 9.82)/T) * e\u003C/strong\u003E\u003Csup\u003E\u003Cstrong\u003EdV/I\u003C/strong\u003E\u003C/sup\u003E\u003Csub\u003E\u003Csup\u003E\u003Cstrong\u003Esp\u003C/strong\u003E\u003C/sup\u003E\u003C/sub\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kialar","CreatedById":60893,"CreatedDateTime":"2014-04-08T11:59:40Z","Content":"\n\u003Cp\u003EThis is not trivial, sir. Because the tank and fuel weight are included in X and Y respectively, and Q is based on TankEmpty and (TankEmpty \u002B Fuel), the whole thing gets quadratic. I am on it.\u003C/p\u003E\n"},{"CreatedByName":"BlazeFallow","CreatedById":83905,"CreatedDateTime":"2014-04-08T12:19:02Z","Content":"\n\u003Cp\u003EI think that the last equation I came up with which relates everything to Y is valid.\u003C/p\u003E\u003Cp\u003EI just put it in to Wolfram and let it do all the complex math I am incapable of (yeah, lazy way out, but I did the hard leg work of deriving the equations from my understanding of KSP\u0027s implimentation of orbital mechanics... so there\u0027s that)\u003C/p\u003E\u003Cp\u003EIt came up with a value that was pretty much what I was expecting. Which is that with a dV of 5000 and an I\u003Csub\u003Esp\u003C/sub\u003E of 420 and a payload mass of 2000T I would need lifter of roughly 11000T And now that Y is given, I can then derive from it X, and Z, giving me the number of engines, and the total quantity of fuel.\u003C/p\u003E\u003Cp\u003EHuzzah!\u003C/p\u003E\u003Cp\u003EGranted, that 11000 could likely be a lot lower with multiple stages, as the number given is for effectively a SSTO design. Splitting it into smaller DV chunks and then using the Y value given as the new P for the next roung could possibly result in an overall lower Y value....\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.wolframalpha.com/input/?i=y%3D%28%28%28y-2000-%28%2815*y*9.82%29%2F5200%29%29*.11%29%2B2000%2B%28%2815*y*9.82%29%2F5200%29%29*e%5E%285000%2F%28420*9.82%29%29\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003EMATH\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Doozler","CreatedById":103369,"CreatedDateTime":"2014-04-08T12:26:53Z","Content":"\n\u003Cp\u003EIs the idea:\u003C/p\u003E\u003Cp\u003Egiven the desired delta V, engine type and tank type, calculate the number of tanks and engines?\u003C/p\u003E\u003Cp\u003EThen would it be better to have the unknown variables just Z, number of engines, and Nt, number of tanks? Then you would just have two variable to solve for? I\u0027ll have a play over lunch.\u003C/p\u003E\n"},{"CreatedByName":"AmpsterMan","CreatedById":32671,"CreatedDateTime":"2014-04-08T12:36:20Z","Content":"\n\u003Cp\u003EThanks OP. I wake up, sign into KSP, and this is the first thing I read... I\u0027ll be pondering this for most of the day XD.\u003C/p\u003E\u003Cp\u003EEdit: so i did a quick over view and noticed you had a bit of a redundancy. You don\u0027t need SZ. Just make S the total mass of the engines of that stage and you\u0027re good to go. Furthermore, these formulas can\u0027t give you stats for your whole vehicle. Only a single stage. I\u0027ve done this before. I\u0027ll do some meditating on it through out the day and post my results later on tonight.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-08T12:45:26Z\u0022 title=\u002204/08/2014 12:45  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 8, 2014\u003C/time\u003E by AmpsterMan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kialar","CreatedById":60893,"CreatedDateTime":"2014-04-08T12:38:49Z","Content":"\n\u003Cp\u003E/ignore this ON\u003C/p\u003E\u003Cp\u003ESorry, BlazeFallow, I don\u0027t think your formula is correct.\u003C/p\u003E\u003Cp\u003E/ignore this OFF\u003C/p\u003E\u003Cp\u003EHail to you, BlazeFallow, I think your formula might work.\u003C/p\u003E\u003Cp\u003EY=X\u002B(Z*S)\u002BP\u002BFuel | Enter more Detail\u003C/p\u003E\u003Cp\u003EY=X-TankEmpty\u002B(Z*S)\u002BP\u002BFuel\u002BTankEmpty\u003C/p\u003E\u003Cp\u003ETankEmpty/(TankEmpty\u002BFuel)=Q\u003C/p\u003E\u003Cp\u003E1/(TankEmpty\u002BFuel)=Q/TankEmpty\u003C/p\u003E\u003Cp\u003ETankEmpty/Q=(TankEmpty\u002BFuel)\u003C/p\u003E\u003Cp\u003EY=X-TankEmpty\u002B(Z*S)\u002BP\u002BTankEmpty/Q\u003C/p\u003E\u003Cp\u003E/ignore this ON\u003C/p\u003E\u003Cp\u003EAs long as you don\u0027t take care of the empty Tank\u0027s mass, you will not get a valid solution. It may be, that the overall mass of the tank is small enough that your formular results in plausible numbers.\u003C/p\u003E\u003Cp\u003EBut I think, it is not correct. And the bug is in the different calculation bases (craft for one set of numbers, fueltank for Q).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003E/ignore this OFF\u003C/p\u003E\u003Cp\u003EFull weight of the vessel is\u003C/p\u003E\u003Cp\u003EY\u003C/p\u003E\u003Cp\u003Esubstract Payload and Thrusters\u003C/p\u003E\u003Cp\u003EY - P - (S*Z)\u003C/p\u003E\u003Cp\u003Egives. Full tanks\u003C/p\u003E\u003Cp\u003ETimes Q\u003C/p\u003E\u003Cp\u003E(Y-P-(S*Z))*Q\u003C/p\u003E\u003Cp\u003Eresults in EmptyTank\u003C/p\u003E\u003Cp\u003EOMFG. This dollar fell down in cents....\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-08T12:52:41Z\u0022 title=\u002204/08/2014 12:52  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 8, 2014\u003C/time\u003E by Kialar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Doozler","CreatedById":103369,"CreatedDateTime":"2014-04-08T13:22:06Z","Content":"\n\u003Cp\u003EHi all,\u003C/p\u003E\u003Cp\u003EIf we\u0027re all having a go I\u0027ll chip in my attempt! From what I understand you want the number of tanks (Nt) and number of engines for a give engine type (empty mass Me, full mas Mf), fuel tank type, payload and delta V.\u003C/p\u003E\u003Cp\u003EI get an equation for number of engines:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://latex.codecogs.com/gif.latex?z=%5Cfrac%7B(P\u0026amp;plus;M_%7Bfulltank%7DN_t)%7D%7BS%7D%5Calpha\u0022 alt=\u0022gif.latex?z=\\frac{(P\u0026amp;plus;M_{fulltank}N_t)}{S}\\alpha\u0022\u003E\u003C/p\u003E\u003Cp\u003Ewhich tells you how many engines you need to lift the craft off the ground,\u003C/p\u003E\u003Cp\u003Eand an equation for the number of tanks,\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://latex.codecogs.com/gif.latex?N_t=(P\u0026amp;plus;SZ)%5COmega\u0022 alt=\u0022gif.latex?N_t=(P\u0026amp;plus;SZ)\\Omega\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhich tells you how many tanks you need to give you the delta-V.\u003C/p\u003E\u003Cp\u003EWhere alpha\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://latex.codecogs.com/gif.latex?%5Calpha=%5Cfrac%7B1%7D%7B%5Cfrac%7BT%7D%7BS%5Ccdot%20TWR%7D-1%7D\u0022 alt=\u0022gif.latex?\\alpha=\\frac{1}{\\frac{T}{S\\cdot TWR}-1}\u0022\u003E\u003C/p\u003E\u003Cp\u003EGives the ratio of the desired TWR to the \u0022excess\u0022 thrust to weight after you take off the weight of the engines\u003C/p\u003E\u003Cp\u003Eand Omega\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://latex.codecogs.com/gif.latex?%5COmega\u0026amp;space;=\u0026amp;space;%5Cfrac%7B1%7D%7B%5Cfrac%7BM_%7Bfuel%7D%7D%7B1-e%5E%7BdV/Isp%7D%7D-M_%7Bemptytank%7D%20%20%7D\u0022 alt=\u0022Isp}}-M_{emptytank}  }\u0022\u003E\u003C/p\u003E\u003Cp\u003EIs something like the Delta-V left for accelerating everything but the empty tank.\u003C/p\u003E\u003Cp\u003EI should be able to substitute one into the other to get an analytic solution... give me a moment\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EEdit: \u003C/strong\u003EGot it! Even better got it in a way that might mean something:\u003C/p\u003E\u003Cp\u003EThe number of tanks you need is Nt:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://latex.codecogs.com/gif.latex?N_t=P\u0026amp;space;%5Cfrac%7B%5COmega(1\u0026amp;plus;%5Calpha)%7D%7B1-%5COmega\u0026amp;space;M_%7Bfulltank%7D\u0026amp;space;%5Calpha%7D\u0022 alt=\u0022gif.latex?N_t=P\u0026amp;space;\\frac{\\Omega(1\u0026amp;plus;\\alpha)}{1-\\Omega\u0026amp;space;M_{fulltank}\u0026amp;space;\\alpha}\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-09T13:57:28Z\u0022 title=\u002204/09/2014 01:57  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 9, 2014\u003C/time\u003E by Doozler\u003C/strong\u003E\n\u003Cbr\u003E(nice looking) MATHS!\n\u003C/span\u003E\n"},{"CreatedByName":"BlazeFallow","CreatedById":83905,"CreatedDateTime":"2014-04-09T11:27:45Z","Content":"\n\u003Cp\u003EHey Guys,\u003C/p\u003E\u003Cp\u003ESo I have my final Equation and the method for solving it.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EY = ((Y - P - (S * TWR * Y * 9.82)/T)*Q \u002B P \u002B (S * TWR * Y * 9.82)/T) * e\u003C/strong\u003E\u003Csup\u003E\u003Cstrong\u003EdV/I\u003C/strong\u003E\u003C/sup\u003E\u003Csub\u003E\u003Csup\u003E\u003Cstrong\u003Esp\u003C/strong\u003E\u003C/sup\u003E\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003ETo solve we then re-label the function to match the standard algebraic function y = f(x)\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003Ey = ((x - P - (S * TWR * x * 9.82)/T)*Q \u002B P \u002B (S * TWR * x * 9.82)/T) * e\u003C/strong\u003E\u003Csup\u003E\u003Cstrong\u003EdV/I\u003C/strong\u003E\u003C/sup\u003E\u003Csub\u003E\u003Csup\u003E\u003Cstrong\u003Esp\u003C/strong\u003E\u003C/sup\u003E\u003C/sub\u003E\u003C/p\u003E\u003Cp\u003EAt this point we will find our solution where \u003Cstrong\u003Ey=x\u003C/strong\u003E. \u003C/p\u003E\u003Cp\u003ESo we can plot out both of these functions in a graphing calculator and find the intersect. You could also find the intersect by hand if you hate yourself or are just a huge fan of simplifying complex algebraic functions in your head. The sounds about as fun as Seppuku to me though.\u003C/p\u003E\u003Cp\u003EEither way, as AmpsterMan stated this is just for a single stage structure. You can take the equation and turn it iterative though. Meaning run it once for your last stage for whatever amount of dV you want it to have, and then take the resulting Y value and plug it into the equation again as the X value and whatever dV value you want that stage to have. Do this as many times as you want stages and your end Y value will be the full weight of your whole vehicle as each stage treats the stage above it as its payload.\u003C/p\u003E\u003Cp\u003EThen with the Y values you plug that into the Z TWR formula to get the number of engines you need to get the TWR you desired.\u003C/p\u003E\u003Cp\u003ENote also that this equation is set up for linear staging, not asparagus or boosters, as it is not set up to use the thrust of the next stage in the calculations. That would require a slight modification which I may mull over and put up as a follow up post.\u003C/p\u003E\u003Cp\u003ECheers!\u003C/p\u003E\u003Cp\u003EBlazeFallow\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2014-04-09T11:35:49Z","Content":"\n\u003Cp\u003EDoozler has the right take on it. This is a much simpler problem if your variables are number of engines and the amount of fuel. And this isn\u0027t really an optimization problem. It\u0027s a simple algebraic equation.\u003C/p\u003E\n"},{"CreatedByName":"Aghanim","CreatedById":76587,"CreatedDateTime":"2014-04-09T12:10:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Doozler\u0022 data-cite=\u0022Doozler\u0022\u003E\u003Cdiv\u003EHi all,\u003Cp\u003EIf we\u0027re all having a go I\u0027ll chip in my attempt! From what I understand you want the number of tanks (Nt) and number of engines for a give engine type (empty mass Me, full mas Mf), fuel tank type, payload and delta V.\u003C/p\u003E\u003Cp\u003EI get an equation for number of engines:\u003C/p\u003E\u003Cp\u003E\u0026lt;img src=\u0022http://latex.codecogs.com/gif.latex?z=\\frac{(P\u002BM_{fulltank}N_t)}{S}\\alpha\u0022 title=\u0022z=\\frac{(P\u002BM_{fulltank}N_t)}{S}\\alpha\u0022 /\u0026gt;\u003C/p\u003E\u003Cp\u003Ewhich tells you how many engines you need to lift the craft off the ground,\u003C/p\u003E\u003Cp\u003Eand an equation for the number of tanks,\u003C/p\u003E\u003Cp\u003E\u0026lt;img src=\u0022http://latex.codecogs.com/gif.latex?N_t=(P\u002BSZ)\\Omega\u0022 title=\u0022N_t=(P\u002BSZ)\\Omega\u0022 /\u0026gt;\u003C/p\u003E\u003Cp\u003EWhich tells you how many tanks you need to give you the delta-V.\u003C/p\u003E\u003Cp\u003EWhere alpha\u003C/p\u003E\u003Cp\u003E\u0026lt;img src=\u0022http://latex.codecogs.com/gif.latex?\\alpha=\\frac{1}{\\frac{T}{S*TWR}-1}\u0022 title=\u0022\\alpha=\\frac{TWR9.82}{T/S-1}\u0022 /\u0026gt;\u003C/p\u003E\u003Cp\u003EGives the ratio of the desired TWR to the \u0022excess\u0022 thrust to weight after you take off the weight of the engines\u003C/p\u003E\u003Cp\u003Eand Omega\u003C/p\u003E\u003Cp\u003E\u0026lt;img src=\u0022http://latex.codecogs.com/gif.latex?\\Omega\u0026amp;space;=\u0026amp;space;\\frac{1}{\\frac{M_{fuel}}{1-e^{dV/Isp}}-M_{emptytank}}\u0022 title=\u0022\\Omega = \\frac{1}{\\frac{M_{fuel}}{1-e^{dV/Isp}}-M_{emptytank}}\u0022 /\u0026gt;\u003C/p\u003E\u003Cp\u003EIs something like the Delta-V left for accelerating everything but the empty tank.\u003C/p\u003E\u003Cp\u003EI should be able to substitute one into the other to get an analytic solution... give me a moment\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EEdit: \u003C/strong\u003EGot it! Even better got it in a way that might mean something:\u003C/p\u003E\u003Cp\u003EThe number of tanks you need is Nt:\u003C/p\u003E\u003Cp\u003E\u0026lt;img src=\u0022http://latex.codecogs.com/gif.latex?N_t=P\u0026amp;space;\\frac{\\Omega(1\u002B\\alpha)}{1-\\Omega\u0026amp;space;M_{fulltank}\u0026amp;space;\\alpha}\u0022 title=\u0022N_t=P \\frac{\\Omega(1\u002B\\alpha)}{1-\\Omega M_{fulltank} \\alpha}\u0022 /\u0026gt;\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYour latex is failing... if only KSP forums have its own latex parser...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-09T13:32:26Z\u0022 title=\u002204/09/2014 01:32  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 9, 2014\u003C/time\u003E by Aghanim\u003C/strong\u003E\n\u003Cbr\u003Ededuplication\n\u003C/span\u003E\n"},{"CreatedByName":"Doozler","CreatedById":103369,"CreatedDateTime":"2014-04-09T13:08:38Z","Content":"\n\u003Cp\u003EGah, it was working yesterday \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnyone have a solution?\u003C/p\u003E\n"},{"CreatedByName":"Aghanim","CreatedById":76587,"CreatedDateTime":"2014-04-09T13:34:17Z","Content":"\n\u003Cp\u003EI suppose HTML tags doesn\u0027t work here... \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://latex.codecogs.com/gif.latex?z=%5Cfrac%7B(P\u002BM_%7Bfulltank%7DN_t)%7D%7BS%7D%5Calpha\u0022 alt=\u0022gif.latex?z=\\frac{(P\u002BM_{fulltank}N_t)}{S}\\alpha\u0026quot; title=\u0026quot;z=\\frac{(P\u002BM_{fulltank}N_t)}{S}\\alpha\u0022\u003E\u003C/p\u003E\u003Cp\u003EChange your \u0026lt;img src=\u0026gt; /\u0026gt; to \u003Cimg src=\u0022%7Boption%7D\u0022 class=\u0022ipsImage\u0022 alt=\u0022%7Boption%7D\u0022\u003E [/ IMG] one (remove the space between the slash and img), or use the forum built in image insert function\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-09T13:37:05Z\u0022 title=\u002204/09/2014 01:37  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 9, 2014\u003C/time\u003E by Aghanim\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Doozler","CreatedById":103369,"CreatedDateTime":"2014-04-09T13:59:27Z","Content":"\n\u003Cp\u003EYup, that worked. I think I might have done that last time, it was appearing in the preview yesterday for some reason so I must have got lazy.\u003C/p\u003E\u003Cp\u003ENow where\u0027s that KSP Forum Latex Parser Petition for me to sign...\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2014-04-09T14:02:46Z","Content":"\n\u003Cp\u003EI\u0027d sign it too. In fact, I\u0027d be entirely happy to do all the work of setting it up, if admins are too bussy.\u003C/p\u003E\n"},{"CreatedByName":"Jimbimbibble","CreatedById":77859,"CreatedDateTime":"2014-04-09T16:19:49Z","Content":"\n\u003Cp\u003EOne thing to consider is that when you take into account variable Isp, staging, varying TWR, varying TWR requirements (as you change your speed), drag, and miscellaneous parts like decouplers, these formulas lose their usefulness pretty quickly. Honestly, your best bet is to download Kerbal Engineer Redux and go build stuff.\u003C/p\u003E\n"},{"CreatedByName":"BlazeFallow","CreatedById":83905,"CreatedDateTime":"2014-04-10T04:41:30Z","Content":"\n\u003Cp\u003EI completely agree Jim. My equation is just meant to give a rough estimate of what it would require. So those individuals trying to launch a 2KT payload to orbit can just do the maths quickly and realize \u0022Holy Kerb! I will need an 10KT rocket to do that!\u0022 \u003C/p\u003E\u003Cp\u003EOf course, it gets even more difficult when you are doing horizontal staging rather than vertical, as the engines from the first stage continue to fire throughout the rest of the stages as well, so their weight would be added as the payload weight at the beginning of your iteration, but should not be accounted for (only the new stages as you grow outward). But that\u0027s just their mass, their thrust would still be present. \u003C/p\u003E\u003Cp\u003EThe math gets pretty fuzzy and I admire and respect the folks who made MechJeb and Engineering Redux for implementing a bunch of crazy maths my brain has a hard time wrapping itself around. I do try though, as I\u0027m sure is evident by my attempts shown in this thread.\u003C/p\u003E\n"},{"CreatedByName":"KASASpace","CreatedById":71352,"CreatedDateTime":"2014-04-10T04:44:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EdV = Isp * Ln(Y/X)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust got here, but if I know the Dv equation, then where is 9.8?\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EIsp * 9.8 * Ln(Y/X)\u003C/strong\u003E\u003C/p\u003E\n"}]}