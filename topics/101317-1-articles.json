{"TopicId":101317,"ForumId":39,"TopicTitle":"T.A.P.O.R. KSP SimPit Oddyssey","CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-05T20:30:28Z","PageNum":1,"Articles":[{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-05T20:30:28Z","Content":"This is the first step in building my own KSP custom control rig.\n\nWhile I am no stranger to [electronics](http://theawesomepowerofrockets.blogspot.com.au/), I am not a professional and the closest thing I\u0027ve done in terms of \u0022code\u0022 \n\nis a bit of HTML \u0026 Javascript back in the early 2000\u0027s and writing Macro\u0027s in Excel.\n\nNot exactly applicable, but hopefully that experience assists with debugging.\n\nI\u0027ve got my prototype up \u0026 running with a few switches and LEDs embdded into a scrap of MDF.\n\nThe rectangular holes were done with a coping saw \u0026 tidied up with a chisel.\n\nTo make testing various things easier, I\u0027ve wired up a basic shield, so that I can unplug my control panel quickly and transfer between the UNO \u0026 Leonardo.\n\nInitial BOM\n\n- A bunch of SPDT switches\n- Cheap 7 Segment LED modules\n- 1 x Arduino UNO\n- 1 x Adruino Leonardo\n- 1 x LCD shield\n- 20 x chrome LED bezels.\n\n![IMG_0391.JPG](https://lh3.googleusercontent.com/-P9LGH3EQI-I/VPqyGXiHUfI/AAAAAAAABl0/iFhpaQfksVU/w490-h653-no/IMG_0391.JPG)\n\n\u003E \n\u003E As is plainly obvious in the first gif, it didn\u0027t work very well when trying to debug on my own.\n\u003E \n\u003E ![8segLed.gif](https://lh3.googleusercontent.com/-WIcqP646pNo/VOlSGYtwLUI/AAAAAAAABiI/vdCl_9a7qPg/s480/8segLed.gif)\n\u003E \n\u003E As you can see in gif #2, that has now been fixed, thanks to [this thread](https://forum.kerbalspaceprogram.com/threads/66393-Hardware-Plugin-Arduino-based-physical-display-serial-port-io-tutorial-%2817-Dec%29) and AmeliaEatYaheart for the solution below.\n\u003E \n\u003E ![output_rwboDL.gif](https://lh4.googleusercontent.com/-7BfRFVVDw3U/VPi6gQQGRhI/AAAAAAAABic/8q_Zh4zDnio/s192/output_rwboDL.gif)\n\u003E \n\u003E Note: these displays are wired serially and did not suffer from the overheating problem present in K4TEE and AmeliaEatYaheart\u0027s 7 Seg modules.\n\u003E \n\u003E \n\n\u003E \n\u003E With some PM help from AmeliaEatyaHeart I managed to get my 7 Seg LED Displays and my controls working!\n\u003E \n\u003E Here\u0027s the fix:\n\u003E \n\u003E **Tab: KSPIODemo10**\n\u003E \n\u003E \n\u003E \n\u003E #include \u003Cledcontrol.h\u003E \u003Cbr\u003E\u003Cbr\u003E #define LEDClkPin 4\u003Cbr\u003E #define LEDChipSel 3 \u003Cbr\u003E #define LEDDatain 2\u003Cbr\u003E //these pins were set up for an Arduino Uno, adjust as appropriate.\u003Cbr\u003E\u003Cbr\u003E LedControl lc=LedControl(LEDDatain,LEDClkPin,LEDChipSel,2);//1==num of 8x8pixel arrays in line. can be up to 8.\u003Cbr\u003E\u003Cbr\u003E\u003C/ledcontrol.h\u003E\n\u003E \n\u003E \n\u003E     \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E void setup()  \n\u003E { Serial.begin(38400);  \n\u003E   \n\u003E [B]LedControl lc=LedControl(LEDDatain,LEDClkPin,LEDChipSel,2); //number of displays is the last variable, will be 1-8.  \n\u003E  blankLEDscreens(); //initialise screen, and show display number examples.[/B]  \n\u003E   \n\u003E  initLEDS();  \n\u003E  InitTxPackets();  \n\u003E  controlsInit();  \n\u003E   \n\u003E  LEDSAllOff();   \n\u003E }  \n\u003E   \n\u003E void loop()  \n\u003E {   \n\u003E  input();  \n\u003E  output();  \n\u003E }\n\u003E \n\u003E \n\u003E     \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Tab: Utilities**\n\u003E \n\u003E \n\u003E \n\u003E {   \n\u003E [B]printNumLED(0, (long)(VData.AP), \u0027A\u0027, 3);//will display apoapsis, with the decimal point separating km and m.  \n\u003E printNumLED(1, (long)(VData.RAlt), \u0027B\u0027, 3);//will display Radar Alt in same format.[/B]  \n\u003E   \n\u003E  caution = 0;  \n\u003E  warning = 0;  \n\u003E   \n\u003E  caution \u002B= VData.G \u003E GCAUTION;  \n\u003E  warning \u002B= VData.G \u003E GWARN;  \n\u003E  caution \u002B= VData.LiquidFuelS/VData.LiquidFuelTotS\\*100 \u003C FUELCAUTION;  \n\u003E  warning \u002B= VData.LiquidFuelS/VData.LiquidFuelTotS\\*100 \u003C FUELWARN;  \n\u003E   \n\u003E  if (caution != 0)  \n\u003E  digitalWrite(YLED,HIGH);  \n\u003E  else  \n\u003E  digitalWrite(YLED,LOW);  \n\u003E   \n\u003E  if (warning != 0)  \n\u003E  digitalWrite(RLED,HIGH);  \n\u003E  else  \n\u003E  digitalWrite(RLED,LOW);  \n\u003E   \n\u003E  digitalWrite(SASLED,ControlStatus(AGSAS));  \n\u003E  digitalWrite(RCSLED,ControlStatus(AGRCS));  \n\u003E  digitalWrite(CG1LED,ControlStatus(AGCustom01));  \n\u003E   \n\u003E }\n\u003E \n\u003E \n\u003E     void Indicators() \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Don\u0027t forget to include AmeliaEatYaheart\u0027s LedControlFunctions tab from** [**this sketch**](https://www.dropbox.com/s/nmrvrhj1fj0es3v/Demo_for_7segMAX7219_module.zip?dl=0)**.**\n\u003E \n\u003E \n\n\u003E \n\u003E **Tab Utilities**\n\u003E \n\u003E \n\u003E \n\u003E { analogWrite(VUAPIN, round(VData.LiquidFuelS/VData.LiquidFuelTotS\\*250));   \n\u003E  analogWrite(VUBPIN, round(VData.LiquidFuel/VData.LiquidFuelTot\\*250));   \n\u003E  }\n\u003E \n\u003E \n\u003E     \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\nI\u0027ve been considering a few options as I\u0027ve collected a lot of stuff over the years.\n\nDo I go a small SimPit with basic controls, repurpose an old faceplate from an unknown device or re-purpose a vintage gaming console?\n\n\u003E \n\u003E ![IMG_0396.JPG](https://lh5.googleusercontent.com/-vNMitCSJA5g/VPqyINCMb7I/AAAAAAAABlk/hjA7JmOG9CE/w653-h490-no/IMG_0396.JPG)![IMG_0400.JPG](https://lh6.googleusercontent.com/-TPx6d1V5uas/VPqyIRlQCgI/AAAAAAAABlo/F_KyjhN8z-c/w653-h490-no/IMG_0400.JPG)\n\u003E \n\u003E ![4_VeiKvph8rxXBUCQNL2OqFDp9C3yuocFI6lYvylKnI=w613-h264-no](https://lh5.googleusercontent.com/4_VeiKvph8rxXBUCQNL2OqFDp9C3yuocFI6lYvylKnI=w613-h264-no)![IMG_0395.JPG](https://lh3.googleusercontent.com/-Hdnft0f9_Bs/VPqyHlpAsXI/AAAAAAAABlg/M7OnMDBYmbs/w653-h490-no/IMG_0395.JPG)\n\u003E \n\u003E \n\n**Edited \u003Ctime datetime=\u00222015-03-18T20:49:57Z\u0022 title=\u002203/18/2015 08:49  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 18, 2015\u003C/time\u003E by T.A.P.O.R.**"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-11T08:11:21Z","Content":"Small update, I\u0027ve expanded my prototype with VU\u0027s from some old audio console \u0026 a non-backlit LCD (and lots of hot glue).\n\nNeither are connected at the moment as I\u0027ve run out of pins on the arduino \u0026 am trying to get my head around shift registers.\n\nI\u0027ve ordered a mega2650 (just in case I can\u0027t figure out shift registers) and some different displays.\n\n![IMG_0406.JPG](https://lh5.googleusercontent.com/-oUDMtWnpSWE/VP_3XOAsh9I/AAAAAAAABns/rx017xpQFf4/w800-h600-no/IMG_0406.JPG)"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-03-11T09:34:43Z","Content":"That is a fantastic looking panel so far. Nice work! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) My inner small child is very glad you didn\u0027t butcher the Atari for it."},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-11T20:48:39Z","Content":"Thanks Stibbons,\n\nI couldn\u0027t in good conscience chop up the Atari (I don\u0027t even know if it works).\n\nThis proto-panel is the result of no planning whatsoever.\n\nWhen I bought the big red button, I didn\u0027t realise that the switching mechanism would protrude quite so far out the back.\n\nHence the unused space toward the front.\n\nAnother thing that I hadn\u0027t anticipated was the toggle switch covers make it harder to see the switch position.\n\nOn my next Proto, I\u0027ll probably split it into two parts:\n\n a horizontal control board to sit behind the keyboard \u0026 under the monitor\n\na vertical display board to sit adjacent to the monitor, for a more heads-up approach.\n\n\u003E \n\u003E ![IMG_0390.JPG](https://lh5.googleusercontent.com/-lxE4W9cMTNc/VPqyFRkrgFI/AAAAAAAABk4/motnijXo8HQ/w653-h490-no/IMG_0390.JPG)\n\u003E \n\u003E ![IMG_0410.JPG](https://lh4.googleusercontent.com/-jt5qyK9MIIY/VQCoIdj--QI/AAAAAAAABoY/WNLR3Leekag/w600-h450-no/IMG_0410.JPG)\n\u003E \n\u003E ![IMG_0411.JPG](https://lh6.googleusercontent.com/-NAd5ctk6dsg/VQCoI4caExI/AAAAAAAABoc/hgk-8iy7B-c/w600-h450-no/IMG_0411.JPG)\n\u003E \n\u003E ![IMG_0407.JPG](https://lh6.googleusercontent.com/-dZjHVcF0oj0/VQCoHwS2_fI/AAAAAAAABoI/Dp0-djWdaQM/w600-h450-no/IMG_0407.JPG)\n\u003E \n\u003E ![IMG_0408.JPG](https://lh3.googleusercontent.com/-3R1BXi9BBJ4/VQCoIIxaiHI/AAAAAAAABoQ/fqzDovFikUM/w600-h450-no/IMG_0408.JPG)\n\u003E \n\u003E"},{"CreatedByName":"Gmack85","CreatedById":136511,"CreatedDateTime":"2015-03-11T22:10:43Z","Content":"Wow, man! Nice work. I wish I had the knowledge in electronics and coding to build one of these. Guess I\u0027ll just have to stick to Ye Olde Keyboard."},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-12T20:52:29Z","Content":"\u003E \n\u003E Wow, man! Nice work. I wish I had the knowledge in electronics and coding to build one of these. Guess I\u0027ll just have to stick to Ye Olde Keyboard.\n\nHi Gmack85,\n\nYou can get a simple simpit going for under $20 and with no soldering.\n\nI did my first altimeter with an Arduino Leonardo \u0026 a 1602 LCD Shield, simply plug in the shield to the Arduino, and the Arduino to your compute.\n\nThen add a little code to Zitronen\u0027s Sketch \u0026 you\u0027re in business ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n\u003E \n\u003E ![KSPIO%2BLCD%2BShield%2BAltimeter.JPG](https://lh5.googleusercontent.com/-7QFfCnn3Md0/VQH0pFdD_II/AAAAAAAABo0/I-SDTGhcy_4/w600-h450-no/KSPIO%2BLCD%2BShield%2BAltimeter.JPG)\n\u003E \n\u003E \n\u003E \n\u003E [B]//This goes at the top of tab one  \n\u003E   \n\u003E [/B]#include \u003Cliquidcrystal.h\u003E\u003Cbr\u003ELiquidCrystal lcd(8, 9, 4, 5, 6, 7);\u003Cbr\u003E\u003Cbr\u003E[B]//This goes down the bottom of tab one\u003Cbr\u003E\u003Cbr\u003E[/B]void setup(){\u003Cbr\u003E Serial.begin(38400);\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E // initLEDS();\u003Cbr\u003E // InitTxPackets();\u003Cbr\u003E // controlsInit();\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E // LEDSAllOff(); \u003Cbr\u003E\u003Cbr\u003E// set up the LCD\u0027s number of columns and rows:\u003Cbr\u003Elcd.begin(16, 2);\u003Cbr\u003E// Print a message to the LCD.\u003Cbr\u003Elcd.setCursor(0,0);\u003Cbr\u003Elcd.print(\u0022GForce \u0022);\u003Cbr\u003Elcd.setCursor(0,1);\u003Cbr\u003Elcd.print(\u0022RAlt \u0022);\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Evoid loop()\u003Cbr\u003E{ \u003Cbr\u003E input();\u003Cbr\u003E output();\u003Cbr\u003E\u003Cbr\u003Elcd.setCursor(8,0);\u003Cbr\u003Elcd.print(VData.G);\u003Cbr\u003Elcd.setCursor(6,1);\u003Cbr\u003Elcd.print(VData.RAlt);\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003C/liquidcrystal.h\u003E\n\u003E \n\u003E \n\u003E     \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2015-03-13T01:23:59Z","Content":"And don\u0027t forget the simplest option for custom inputs - pull apart a keyboard and wire new switches in to it. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-13T08:25:09Z","Content":"\u003E \n\u003E And don\u0027t forget the simplest option for custom inputs - pull apart a keyboard and wire new switches in to it. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nAnd remember, don\u0027t do what I did and tear the trace off the board in the process of learning the pinouts:(\n\nNot a big deal really, but Arduino is a fair bit easier than the board I tried.\n\nThe guts were just two pieces of plastic with circuits printed on them."},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2015-03-13T08:43:07Z","Content":"\u003E \n\u003E And remember, don\u0027t do what I did and tear the trace off the board in the process of learning the pinouts:(\n\u003E Not a big deal really, but Arduino is a fair bit easier than the board I tried.\n\u003E \n\u003E The guts were just two pieces of plastic with circuits printed on them.\n\nIf it\u0027s not too bad you can solder them back on. Or retrace them in solder"},{"CreatedByName":"marzubus","CreatedById":68021,"CreatedDateTime":"2015-03-13T17:42:09Z","Content":"Hej T.A.P.O.R! Awesome work!\n\nWhere did you get the analog volt gauges, and what sensitivity are they? Can they be opened and replace the backing-cards?"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-13T19:05:49Z","Content":"\u003E \n\u003E If it\u0027s not too bad you can solder them back on. Or retrace them in solder\n\nOh no, I did a very good job of messing up the PCB.\n\nI\u0027ve got a stack of old keyboards, but then I found Arduino for cheap on the wide wide world of web ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\n\u003E \n\u003E Hej T.A.P.O.R! Awesome work!\n\u003E Where did you get the analog volt gauges, and what sensitivity are they? Can they be opened and replace the backing-cards?\n\nThanks Mazubus,\n\nIf only you could see it in meat space, it\u0027s not very impressive.\n\nEven if it does have a strut made from MDF \u0026 melted plastic ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nThe analogue gauges came to me in a box of junk (stuff for recycling) from a guy who runs a synth building club.\n\nThere are two transparent panels in the middle of the two VU\u0027s that make me think it might have been pulled from an old tape deck, or maybe reel to reel.\n\nFrom the looks of the light mount behind them, it predates LED\u0027s. There are no markings as to what it was actually a part of though.\n\nI don\u0027t know the voltages, but I think they\u0027re about 3v as a couple of AA\u0027s can max them out.\n\nThey can be easily opened and the backing cards can be replaced (just tried this now), in fact they were held together by sticky tape \u0026 the pressure of the screws holding them to the old panel.\n\n![USgl82nz1bwDG0WmEU86ugoq2uhPt7vKMOtxAeQOiQo=w600-h450](https://lh4.googleusercontent.com/USgl82nz1bwDG0WmEU86ugoq2uhPt7vKMOtxAeQOiQo=w600-h450)\n\nThere\u0027s a hipster 2nd hand dealer on the other side of town that has awesome vintage test \u0026 radio gear, but its really expensive.\n\nOh how I would like to have them as part of my KSP rig!\n\n\\*\\*corrected typo\n\n**Edited \u003Ctime datetime=\u00222015-03-14T05:08:20Z\u0022 title=\u002203/14/2015 05:08  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 14, 2015\u003C/time\u003E by T.A.P.O.R.**"},{"CreatedByName":"marzubus","CreatedById":68021,"CreatedDateTime":"2015-03-13T19:17:41Z","Content":"I have been looking for some round VU meters in the 3.3 to 5v range, but had no luck in finding any that I can change the back card. :/ At least I have my OLED solution now. I think I will make a digital needle like meter or something akin to airbus or boeing instruments."},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-14T08:01:40Z","Content":"In had a hunt about on the internet for a round VU with removable innards, but didn\u0027t have any luck either.\n\nWhat I did find was a pair of 20 segment 3 coloured led bar graphs.\n\nThese will come in handing for one thing or another.\n\nI\u0027ve managed to get LEDs to go on my shift register, but getting an LCD to work? \n\nNope.\n\nI\u0027ve tried heaps of options, even went back to the regular way of driving an LCD to make sure I hadn\u0027t broken anything and it was fine, something I\u0027m doing wrong :\u0027("},{"CreatedByName":"marzubus","CreatedById":68021,"CreatedDateTime":"2015-03-16T08:03:32Z","Content":"I never tried running a lcd on a shift register, I guess it would be real funky for the driver. What kind of lcd?"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-16T20:48:16Z","Content":"H marzubus,\n\nI have two, one was off the shelf at a [local electronics supplier](http://www.jaycar.com.au/p/QP5517) and another made by Optrex that was in my box of junk.\n\nThey both have the same pin designations.\n\nI\u0027ve tried [this example](http://playground.arduino.cc/Main/LiquidCrystal) and others that are similar, but all I get are a series of rectangles on the LCD.\n\nNo matter, Ihave a 4 x 20 screen coming with an i2c adapter to minimise the amount of pins required, and my Mega should be here tomorrow, so I\u0027ll have pins galore ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"marzubus","CreatedById":68021,"CreatedDateTime":"2015-03-16T21:56:28Z","Content":"I try to stick to lcd modules which are supported by u8glib, and I believe you can have a custom communications procedure for the custom defined modules. \n\nSee [https://code.google.com/p/u8glib/wiki/devicedesign](https://code.google.com/p/u8glib/wiki/devicedesign)\n\nMight be worth a try if ur module is supported. that said, I\u0027ve never tried. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nYeah all those mega pins!!! There area couple of really nice lcd modules on aliexpress! It\u0027s super easy if u find one that has the same chip as u8glib supports!"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-16T22:45:45Z","Content":"The mega has arrived!\n\ntoo bad I have to wait all day before I can go home and play.\n\nI shall checkout that store as I\u0027ve not used it before. Thanks for the tip!\n\n\\*\\* Transplanted pins from the UNO to the Mega and uploaded the same sketch.\n\nIt works perfectly. \n\nI\u0027ll need to reassign the pins in order to free up the PWM functions for my VU\u0027s\n\nBut as far as LCDs, LEDs \u0026 switches go, I\u0027m all set and don\u0027t need to mess about with hard stuff like shift registers for the time being.\n\nThat brings me to another piont.\n\nDo I need all the Action Groups on the board, when I can do them all on my flight stick?\n\nI think yes.\n\n**Edited \u003Ctime datetime=\u00222015-03-17T09:14:15Z\u0022 title=\u002203/17/2015 09:14  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 17, 2015\u003C/time\u003E by T.A.P.O.R.**"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-17T20:47:17Z","Content":"LCD Works, Analogue VU kinda works...\n\nI have 10k reistor in series.\n\nI\u0027ve placed this:\n\n    analogWrite(VUAPIN, round(VData.LiquidFuelS*255/100));\n\nin \u0022Void Indicators\u0022 and it appears to sit at roughly the right value.\n\nBut as I burn, it goes to zero fairly quickly then springs to the dial maximum and repeats down to zero until the fuel is depleted.\n\nIs this just a case of needing a higher value resistor, or am I missing something?\n\nI don\u0027t know the spec of my VU\u0027s as they\u0027re out of an old machine and have no markings that are of any use."},{"CreatedByName":"marzubus","CreatedById":68021,"CreatedDateTime":"2015-03-17T21:29:54Z","Content":"I guess u could push 3.0v to the VU and see if it reads max. Else have you got a stable power supply? One with lcd screen and all. Try ramp it up to determine the actual max voltage. Carefully though.\n\nUr using a 5v Arduino right? So ur pushing 5v to that thing at peak I guess. Else maybe a cap or something to smooth out sudden shifts in value? I\u0027m just guessing here. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\n\u003E \n\u003E LCD Works, Analogue VU kinda works...\n\u003E I have 10k reistor in series.\n\u003E \n\u003E I\u0027ve placed this:\n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     analogWrite(VUAPIN, round(VData.LiquidFuelS*255/100));\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E in \u0022Void Indicators\u0022 and it appears to sit at roughly the right value.\n\u003E \n\u003E But as I burn, it goes to zero fairly quickly then springs to the dial maximum and repeats down to zero until the fuel is depleted.\n\u003E \n\u003E Is this just a case of needing a higher value resistor, or am I missing something?\n\u003E \n\u003E I don\u0027t know the spec of my VU\u0027s as they\u0027re out of an old machine and have no markings that are of any use."},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-17T22:32:00Z","Content":"Yep, just powering off the usb at the moment.\n\nI\u0027ve got a regulator kit (1.5-12v)in my workshop(I ARDUINO in the dining room/office), so I\u0027ll try that when I get home.\n\nI will also post another gif showing the weirdness, for posterity.\n\nIn other news my oled arrived, it\u0027s so small!\n\nI laughed when I pulled it out of the bag, as it\u0027s about twice the with of my thumbnail."},{"CreatedByName":"marzubus","CreatedById":68021,"CreatedDateTime":"2015-03-18T08:47:30Z","Content":"It\u0027s so hard with all these secondary workspaces. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) what oled did u buy? \n\n\u003E \n\u003E Yep, just powering off the usb at the moment.\n\u003E I\u0027ve got a regulator kit (1.5-12v)in my workshop(I ARDUINO in the dining room/office), so I\u0027ll try that when I get home.\n\u003E \n\u003E I will also post another gif showing the weirdness, for posterity.\n\u003E \n\u003E In other news my oled arrived, it\u0027s so small!\n\u003E \n\u003E I laughed when I pulled it out of the bag, as it\u0027s about twice the with of my thumbnail."},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-18T10:29:54Z","Content":"Ok, looks like the VU maxes out at 0.8v\n\nI fixed the weird cycling issue by changing my code and added 11k of resistance in series.\n\n        {    analogWrite(VUAPIN, round(VData.LiquidFuelS/VData.LiquidFuelTotS*250));           analogWrite(VUBPIN, round(VData.LiquidFuel/VData.LiquidFuelTot*250));           } \n\nNow I\u0027m getting a weird staging bug when I engage SAS, but it only happens for the first stage.![:confused:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif)\n\nNope, nothing wrong with the code, but possibly my eyesight.\n\nMy stage button is set to 10, but I\u0027d plugged it into 13!\n\nThis somehow (I don\u0027t have the foggiest) enabled SAS to stage.\n\nNow for a shaky test video!\n\n\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/TOXwJlUX0II?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\n\n**Edited \u003Ctime datetime=\u00222015-03-18T20:44:36Z\u0022 title=\u002203/18/2015 08:44  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 18, 2015\u003C/time\u003E by T.A.P.O.R.**"},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-18T20:20:20Z","Content":"\u003E \n\u003E It\u0027s so hard with all these secondary workspaces. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) what oled did u buy?\n\nYeah I guess....The dining room is also my office and the workshoppe is kinda crummy, but I built it myself (so I can only blame one person for the crumminess).\n\nOLED Specs:\n\nSPI Interface\n\nDriver IC: SSD1306Pin Definitions:\n\nVCC:3.3-5V\n\nGND: grounding\n\nCLK: clock module\n\nMOSI: Data input\n\nCs: Chip select signal\n\nD/C: Command / data change\n\nHere\u0027s some perspective that I was missing from your OLED pic, though I guess the USB plug should have been a bit of a giveaway.\n\nI had thought it would be about the size of the Nokia 5110 display below.\n\n![IMG_0416.JPG](https://lh6.googleusercontent.com/-rkGuGXDNfI8/VQnZuC-srTI/AAAAAAAABps/Qe4TCTSeI4o/w600-h450-no/IMG_0416.JPG)\n\n![85Zos3gSz8cMQfrokEYjykFKw88uyAmXkjT6Tdd0KTc=w540-h551-no](https://lh5.googleusercontent.com/85Zos3gSz8cMQfrokEYjykFKw88uyAmXkjT6Tdd0KTc=w540-h551-no)\n\nThanks for your explanation of your OLED code by the way, I didn\u0027t understand a word of it, but I tried reading before my morning coffee."},{"CreatedByName":"marzubus","CreatedById":68021,"CreatedDateTime":"2015-03-18T22:49:59Z","Content":"Hi! Yeah that\u0027s the same oled driver. Sorry I didn\u0027t clarify its size. My plan with these was to emulate a single analog style VU each. I bought six of them because I got them cheap.\n\nYou should be able to use my code as is for that particular display. Is it the monochrome or 2 color version? \n\nI am still shopping for a display double that size. If u find any other well priced ones, just check if the chip is mentioned in the u8glib drivers wiki."},{"CreatedByName":"T.A.P.O.R.","CreatedById":137748,"CreatedDateTime":"2015-03-18T23:50:39Z","Content":"I don\u0027t mind, it was cheap ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nyellow/blue\n\nThere is one [rgb OLED](http://www.jaycar.com.au/p/XC4270) that I found that is about $50aud (way overpriced IMO) and a teensie bit bigger than the ones we have.\n\n\u0022Active display area 28.8 x 26.8 mm, (1.5 inch diagonal) \u0022\n\n![XC4270gallery1-300Wx300H?context=bWFzdGVyfGltYWdlc3w3ODk0NXxpbWFnZS9qcGVnfGltYWdlcy9oOTcvaDkwLzg4MTU2MzUyMDIwNzguanBnfDQ2YjA5ZTNlNTZiZTJkMDE3MGEwYzMzYTQyNjliZmQ3MmQ5MmQyYTFlYmIyOTA3YWM2M2IwYWU0NjdlZDFiM2Q](http://www.jaycar.com.au/medias/XC4270gallery1-300Wx300H?context=bWFzdGVyfGltYWdlc3w3ODk0NXxpbWFnZS9qcGVnfGltYWdlcy9oOTcvaDkwLzg4MTU2MzUyMDIwNzguanBnfDQ2YjA5ZTNlNTZiZTJkMDE3MGEwYzMzYTQyNjliZmQ3MmQ5MmQyYTFlYmIyOTA3YWM2M2IwYWU0NjdlZDFiM2Q)\n\n**Edited \u003Ctime datetime=\u00222015-03-19T08:18:12Z\u0022 title=\u002203/19/2015 08:18  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 19, 2015\u003C/time\u003E by T.A.P.O.R.**"}]}