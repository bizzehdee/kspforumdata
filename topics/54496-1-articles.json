{"TopicId":54496,"ForumId":44,"TopicTitle":"Calculating orbits yourself","CreatedByName":"Xetalim","CreatedById":64539,"CreatedDateTime":"2013-11-27T14:01:46Z","PageNum":1,"Articles":[{"CreatedByName":"Xetalim","CreatedById":64539,"CreatedDateTime":"2013-11-27T14:01:46Z","Content":"\n\u003Cp\u003EWe all love KSP.\u003C/p\u003E\u003Cp\u003EBut there is one thing I always wanted to do.\u003C/p\u003E\u003Cp\u003ECalculating your orbit path yourself.\u003C/p\u003E\u003Cp\u003EDoes anyone know how to do this in KSP?\u003C/p\u003E\u003Cp\u003EI have searched with Google, not with success.\u003C/p\u003E\u003Cp\u003EThanks in advance,\u003C/p\u003E\u003Cp\u003EXetalim\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-11-27T17:55:11Z","Content":"\n\u003Cp\u003ECould you be a bit more specific? What do you want to compute based on what information? It is relatively easy to do things like compute the necessary delta-V for a transfer from one orbit to another. Or to compute amount of time it would take you to go from periapsis to apoapsis. Your question doesn\u0027t make it clear what exactly you want to know.\u003C/p\u003E\n"},{"CreatedByName":"Xetalim","CreatedById":64539,"CreatedDateTime":"2013-11-27T18:14:57Z","Content":"\n\u003Cp\u003EMy exact goal is to know my orbit trajectory.(Eccentry/height)\u003C/p\u003E\u003Cp\u003ENot \u00C3\u017D\u00E2\u20ACv, just the trajectory.\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-11-27T19:04:57Z","Content":"\n\u003Cp\u003EBased on what information?\u003C/p\u003E\n"},{"CreatedByName":"Xetalim","CreatedById":64539,"CreatedDateTime":"2013-11-27T19:37:22Z","Content":"\n\u003Cp\u003EOn any information, current height, speed and heading?\u003C/p\u003E\n"},{"CreatedByName":"Sternface","CreatedById":83299,"CreatedDateTime":"2013-11-27T20:07:25Z","Content":"\n\u003Cp\u003ECheck out the wiki article: \u003Ca href=\u0022https://en.wikipedia.org/wiki/Orbital_mechanics\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Orbital_mechanics\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EWithout defined parameters, I find it hard to give you a \u0027universal\u0027 formula. There are many, depending on what you are trying to calculate.\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-11-27T20:45:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Xetalim\u0022 data-cite=\u0022Xetalim\u0022\u003E\u003Cdiv\u003EOn any information, current height, speed and heading?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you can measure angle between your current direction of motion and a line from center of the body to your ship, yeah. Call that angle \u00C3\u017D\u00C2\u00B8. It\u0027s also more convenient to use distance from center, which you can compute as r = h \u002B R, where h is the height above the body and R is the body\u0027s radius. For KSP, you can look up the radius in the wiki. Then your specific angular momentum is L = v r sin\u00C3\u017D\u00C2\u00B8. Here, v is your ship\u0027s speed. Also, you know the specific energy, which is E = v\u00C3\u201A\u00C2\u00B2/2 - MG/r, where M is planet\u0027s mass and G is the gravitational constant. In wiki, you can look up the value \u00C3\u017D\u00C2\u00BC = GM, called gravitational parameter, directly.\u003C/p\u003E\u003Cp\u003EAt the periapsis and apoapsis, \u00C3\u017D\u00C2\u00B8 = 90\u00C3\u201A\u00C2\u00B0. And values of L and E remain constant through the orbit. So you can solve the following system of equations.\u003C/p\u003E\u003Cp\u003Ev\u003Csub\u003Eaps\u003C/sub\u003E r\u003Csub\u003Eaps\u003C/sub\u003E = L\u003C/p\u003E\u003Cp\u003Ev\u003Csub\u003Eaps\u003C/sub\u003E\u00C3\u201A\u00C2\u00B2/2 - \u00C3\u017D\u00C2\u00BC/r\u003Csub\u003Eaps\u003C/sub\u003E = E\u003C/p\u003E\u003Cp\u003EThe first equation can be written 1/r\u003Csub\u003Eaps\u003C/sub\u003E = v\u003Csub\u003Eaps\u003C/sub\u003E/L. Which I can now substitute into second equation.\u003C/p\u003E\u003Cp\u003Ev\u003Csub\u003Eaps\u003C/sub\u003E\u00C3\u201A\u00C2\u00B2/2 - \u00C3\u017D\u00C2\u00BC v\u003Csub\u003Eaps\u003C/sub\u003E/L - E = 0.\u003C/p\u003E\u003Cp\u003EThat\u0027s a quadratic equation, which has two solutions.\u003C/p\u003E\u003Cp\u003Ev\u003Csub\u003Eaps\u003C/sub\u003E = \u00C3\u017D\u00C2\u00BC/L \u00C3\u201A\u00C2\u00B1 Sqrt(\u00C3\u017D\u00C2\u00BC\u00C3\u201A\u00C2\u00B2/L\u00C3\u201A\u00C2\u00B2 \u002B 2E)\u003C/p\u003E\u003Cp\u003EAnd, of course, you can obtain r\u003Csub\u003Eaps\u003C/sub\u003E = L/v\u003Csub\u003Eaps\u003C/sub\u003E now, which will give you two solutions corresponding to apoapsis and periapsis. You can use these together to determine semi-major axis and eccentricity based on equations from Sternface\u0027s link.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-27T20:49:48Z\u0022 title=\u002211/27/2013 08:49  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 27, 2013\u003C/time\u003E by K^2\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Xetalim","CreatedById":64539,"CreatedDateTime":"2013-11-28T12:40:25Z","Content":"\n\u003Cp\u003EWow, that is really useful!\u003C/p\u003E\u003Cp\u003EThanks, both of you.\u003C/p\u003E\n"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2013-11-28T13:24:17Z","Content":"\n\u003Cp\u003EThe two pdf\u0027s \u003Ca href=\u0022https://downloads.rene-schwarz.com/dc/category/19\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://downloads.rene-schwarz.com/dc/category/19\u003C/a\u003E and \u003Ca href=\u0022https://downloads.rene-schwarz.com/dc/category/20\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://downloads.rene-schwarz.com/dc/category/20\u003C/a\u003E contain formulas needed for conversion between cartesian and keppler coordinates.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2013-11-28T15:23:16Z","Content":"\n\u003Cp\u003EPlease note all the above is perfectly valid with the assumption that no gravitational fields from other bodies (else than the one your ship is orbiting around) exist. This is exactly what KSP does, and the formulas provided before are perfectly good to obtain orbital elements with such assumption. Generally speaking, this is the 2-body problem (the two bodies actually orbiting around their common center of mass, without perturbation from other bodies), that allows for a perfect numerical solution.\u003C/p\u003E\u003Cp\u003EHowever IRL that is often seen as a gross approximation. Calculation of true orbital parameters is one peculiar aspect of the n-body problem (\u003Ca href=\u0022https://en.wikipedia.org/wiki/N-body_problem\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://en.wikipedia.org/wiki/N-body_problem\u003C/a\u003E), and there is no simple mathematical way to solve it (this is a NP-complete complexity class problem in computational theory). There is no easy, elegant formula able to predict position of a body in a n-body system; instead, solution to the n-body problem can be obtained by integration of the polinomial equations of motion over time, as it is a convergent series. In case anybody is interested, I can provide a document describing interpolation formulas used to predict orbital movements in a n-body system, used in another space simulator.\u003C/p\u003E\n"},{"CreatedByName":"MajorThomas","CreatedById":94499,"CreatedDateTime":"2013-11-28T17:57:35Z","Content":"\n\u003Cp\u003EOK, looks like I\u0027ve found the right thread. I\u0027ve been meaning to ask why my numbers don\u0027t add up. I am familiar with the orbital mechanics equations, and applying the simple formula for circular orbit velocity given altitude and mu, I figured I could calculate mu based on such things as the given alt for geosynchronous orbit around Kerbin. (Period is 6 hours.) But the numbers don\u0027t quite add up... using the Mun in these equations seem to give a different value for mu. (Then, I\u0027ve heard that the heavenly bodies here don\u0027t follow Newtonian physics so the comparison may be wrong.)\u003C/p\u003E\u003Cp\u003E1. Does G (grav. constant of this universe) vary or is it constant?\u003C/p\u003E\u003Cp\u003E2. Can anyone give me a sample number crunch or two so I can see what I might be doing wrong?\u003C/p\u003E\u003Cp\u003ECheers-\u003C/p\u003E\u003Cp\u003EMT\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2013-11-28T20:19:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MajorThomas\u0022 data-cite=\u0022MajorThomas\u0022\u003E\u003Cdiv\u003Eheavenly bodies here don\u0027t follow Newtonian physics so the comparison may be wrong.)\u003Cp\u003E1. Does G (grav. constant of this universe) vary or is it constant?\u003C/p\u003E\u003Cp\u003E2. Can anyone give me a sample number crunch or two so I can see what I might be doing wrong?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe heavenly bodies themselves are on rails. I haven\u0027t checked if orbits make sense with gravitational parameters of the parent bodies. But yeah, if you use period of the Mun to get gravitational parameter of Kerbin, it doesn\u0027t necessarily have to make sense.\u003C/p\u003E\u003Cp\u003EFor ships, however, gravitational constant is consistent. So if you have a ship in orbit, you should be able to compute gravitational parameter to within the precision with which you can get the values for period and semi-major axis. Keep in mind that apses are given with respect to mean sea level, so you have to add planet\u0027s radius. Alternatively, you can make measurements at different orbits and estimate that as well. Math is going to be a bit more complex for that, though.\u003C/p\u003E\n"},{"CreatedByName":"PakledHostage","CreatedById":8059,"CreatedDateTime":"2013-11-28T20:49:04Z","Content":"\n\u003Cp\u003EThe Mun orbits at a speed that is consistent with it having zero mass. If you took the Mun\u0027s mass into account and used a kerbin centric coordinate frame, it should be moving about 5 m/s faster in its 12000 km radius circular orbit.\u003C/p\u003E\n"},{"CreatedByName":"MajorThomas","CreatedById":94499,"CreatedDateTime":"2013-11-29T00:51:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022K^2\u0022 data-cite=\u0022K^2\u0022\u003E\u003Cdiv\u003EThe heavenly bodies themselves are on rails. I haven\u0027t checked if orbits make sense with gravitational parameters of the parent bodies. But yeah, if you use period of the Mun to get gravitational parameter of Kerbin, it doesn\u0027t necessarily have to make sense.\u003Cp\u003EFor ships, however, gravitational constant is consistent. So if you have a ship in orbit, you should be able to compute gravitational parameter to within the precision with which you can get the values for period and semi-major axis. Keep in mind that apses are given with respect to mean sea level, so you have to add planet\u0027s radius. Alternatively, you can make measurements at different orbits and estimate that as well. Math is going to be a bit more complex for that, though.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, altitudes not radii given. Check. I\u0027ll try the calcs again, thanks much! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\n"}]}