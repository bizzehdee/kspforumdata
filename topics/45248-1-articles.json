{"TopicId":45248,"ForumId":15,"TopicTitle":"Problem Exporting From Unity to KSP.","CreatedByName":"Dispatcher","CreatedById":78707,"CreatedDateTime":"2013-09-07T23:08:38Z","PageNum":1,"Articles":[{"CreatedByName":"Dispatcher","CreatedById":78707,"CreatedDateTime":"2013-09-07T23:08:38Z","Content":"\n\u003Cp\u003EHi. I was using the relevant tutorials and information (\u0027stuck\u0027 to the top of the thread list) to help me learn how to export models from Unity. I followed them every step of the way, and yet I seem to be experiencing a problem not covered in any guide. \u003C/p\u003E\u003Cp\u003EMy export results. First, with the model file in the Hierarchy pane, I was unable to generate an MBM, but was able to generate a 4kb .mu file. Then I placed the model file (properly imported into Unity after properly exporting it from Blender as a .dae file) from within the hierarchy into the Part Tools GameObject, and that relationship allowed the MBM to be generated, but the now 45kb .mu file still doesn\u0027t seem to do anything. My .cfg file appears right and refers to the assets of the .mu and .mbm files but these do not load into the game and are not seen or referenced to within either the VAB or the SPH. I have a mod made by someone else properly located in my local game folders and it does load, so I doubt that the problem is due to placing my mod in the wrong folder.\u003C/p\u003E\u003Cp\u003EEdit: whoops! I had this in my text and then deleted it. I\u0027m using the latest versions of: Mac OS, Blender, Unity, KSP, Part Tools; cfg file using diff apps: TextWrangler, TextEdit, OpenOffice. /Edit.\u003C/p\u003E\u003Cp\u003EThanks in advance for any help on this!\u003C/p\u003E\u003Cp\u003EPS -- for comparison, another thread in another part of the forum (where I also posted to). I think the Mod \u0026amp; Texture Discussion sub forum is a better place for my question.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/34640-Problems-exporting-from-Unity\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/showthread.php/34640-Problems-exporting-from-Unity\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-08T16:50:22Z\u0022 title=\u002209/08/2013 04:50  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 8, 2013\u003C/time\u003E by Dispatcher\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"KhaosCorp","CreatedById":61149,"CreatedDateTime":"2013-09-07T23:21:53Z","Content":"\n\u003Cp\u003EYou don\u0027t need to export the model from Blender into any other format, Unity will load a .blend file just fine.\u003C/p\u003E\u003Cp\u003EAlso why are you using .mbm for your textures? Sure they load fast, but are rather big, and KSP is rather limited to how much it can load atm. Best choices for textures atm are .tga compressed or .png, though Im not sure if the .png Unity bug has been sorted yet.\u003C/p\u003E\u003Cp\u003EWithout more info though its kinda hard to pinpoint your issue. A screen shot of your Unity hierarchy and copy of your config will do wonders for other trying to help ya get this sorted. Also what versions of PartTools and Unity are ya running.\u003C/p\u003E\n"},{"CreatedByName":"Dispatcher","CreatedById":78707,"CreatedDateTime":"2013-09-07T23:40:05Z","Content":"\n\u003Cp\u003EYes, Unity likes .blend files; even better than .dae files. I was merely following the tutorial directions. I am using .mbm as the export setting since it is default in the Part Tools exporter. I agree that .mbm files are large. It took my 512 x 512 texture and pumped it up to 1.1 mb.\u003C/p\u003E\u003Cp\u003EI edited my post above because I dropped the info in the versions I am using. ^They are as current as can be.^\u003C/p\u003E\u003Cp\u003EI\u0027ll put up a shot and the .cfg as time permits, by way of edit.\u003C/p\u003E\u003Cp\u003EThe screenshot(s combined):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://farm4.staticflickr.com/3776/9697852164_23e9300a09_z.jpg\u0022 alt=\u00229697852164_23e9300a09_z.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe .cfg:\u003C/p\u003E\u003Cp\u003E// Kerbal Space Program - Part CFG file\u003C/p\u003E\u003Cp\u003E// its a fancy name\u003C/p\u003E\u003Cp\u003E// --- General Parameters ---\u003C/p\u003E\u003Cp\u003Ename = model\u003C/p\u003E\u003Cp\u003Emodule = FuelTank\u003C/p\u003E\u003Cp\u003Eauthor = Dispatcher\u003C/p\u003E\u003Cp\u003E// --- Asset Parameters ---\u003C/p\u003E\u003Cp\u003E// mesh = model.dae\u003C/p\u003E\u003Cp\u003Emesh = model.mu\u003C/p\u003E\u003Cp\u003Escale = 1\u003C/p\u003E\u003Cp\u003Etexture = model.mbm\u003C/p\u003E\u003Cp\u003E// texture = model.png\u003C/p\u003E\u003Cp\u003EspecPower = 0.5 \u003C/p\u003E\u003Cp\u003ErimFalloff = 3\u003C/p\u003E\u003Cp\u003EalphaCutoff = 0.5\u003C/p\u003E\u003Cp\u003E// rescale factor = 1.25\u003C/p\u003E\u003Cp\u003E// --- Node Definitions ---\u003C/p\u003E\u003Cp\u003Enode_stack_bottom = 0, -0.75, 0, 0, -1, 0, 2\u003C/p\u003E\u003Cp\u003Enode_stack_top = 0, 0.75, 0, 0, 1.0, 0, 1\u003C/p\u003E\u003Cp\u003E//node_attach = 0.75, 0.75, 0, 0.5, 0.5, 0.5, 0\u003C/p\u003E\u003Cp\u003E// --- FX Definitions ---\u003C/p\u003E\u003Cp\u003E// ---Editor parameters ---\u003C/p\u003E\u003Cp\u003Ecost = 1350\u003C/p\u003E\u003Cp\u003Ecategory = Propulsion\u003C/p\u003E\u003Cp\u003Esubcategory = 0\u003C/p\u003E\u003Cp\u003Etitle = a nice title\u003C/p\u003E\u003Cp\u003Emanufacturer = a nice one of those too\u003C/p\u003E\u003Cp\u003Edescription = it will be decent, I think\u003C/p\u003E\u003Cp\u003E// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\u003C/p\u003E\u003Cp\u003EattachRules = 1,1,1,1,1\u003C/p\u003E\u003Cp\u003E// symmetry rules: 0=1x, 1=2x, 2=3x, 3=4x and so on...\u003C/p\u003E\u003Cp\u003E// --- Standard part parameters ---\u003C/p\u003E\u003Cp\u003Emass = 2.65\u003C/p\u003E\u003Cp\u003EdragModelType = default\u003C/p\u003E\u003Cp\u003Emaximum_drag = 0.5\u003C/p\u003E\u003Cp\u003Eminimum_drag = 0\u003C/p\u003E\u003Cp\u003EangularDrag = 0.25\u003C/p\u003E\u003Cp\u003EcrashTolerance = 50\u003C/p\u003E\u003Cp\u003EbreakingForce = 1024\u003C/p\u003E\u003Cp\u003EbreakingTorque = 512\u003C/p\u003E\u003Cp\u003EmaxTemp = 3000\u003C/p\u003E\u003Cp\u003EheatConductivity = 3.6\u003C/p\u003E\u003Cp\u003EheatDissipation = 0.014\u003C/p\u003E\u003Cp\u003E// --- Special Part Parameters --- OR Specific Part Parameters ---\u003C/p\u003E\u003Cp\u003Efuel = 215\u003C/p\u003E\u003Cp\u003Eoxidizer = 262\u003C/p\u003E\u003Cp\u003EdryMass = 0.265\u003C/p\u003E\u003Cp\u003EfullExplosionPotential = 10\u003C/p\u003E\u003Cp\u003EemptyExplosionPotential = 0.9\u003C/p\u003E\u003Cp\u003EThanks again for any help!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-08T16:52:19Z\u0022 title=\u002209/08/2013 04:52  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 8, 2013\u003C/time\u003E by Dispatcher\u003C/strong\u003E\n\u003Cbr\u003EFollow up info.\n\u003C/span\u003E\n"},{"CreatedByName":"Milkshakefiend","CreatedById":70644,"CreatedDateTime":"2013-09-08T12:59:46Z","Content":"\n\u003Cp\u003EWhen you say it doesn\u0027t load into KSP, have you checked the alt \u002B F12 debug menu? I\u0027ve been using that to see which specific pieces of parts load (or not!). In the \u0027name\u0027 field of your .cfg have you changed that to whatever you call your object in Unity? For example, in your hierarchy screenshot it\u0027s still called \u0027model\u0027. I *think* the name you call it in Unity and what you reference in the name field of your .cfg have to match.\u003C/p\u003E\u003Cp\u003EEDIT: Screenshot \u003Ca href=\u0022http://i.imgur.com/0lGk3LC.png\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E (This link actually works this time, I promise!) In my Hierarchy I\u0027ve called my \u0027thing\u0027 HexBattery, but in part tools I kept the name field as model - I don\u0027t think I explained that very clearly before. It took me a while to realise they were two different things.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-08T13:09:00Z\u0022 title=\u002209/08/2013 01:09  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 8, 2013\u003C/time\u003E by Milkshakefiend\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dispatcher","CreatedById":78707,"CreatedDateTime":"2013-09-08T17:50:15Z","Content":"\n\u003Cp\u003EI followed your advice and matched the name field in the config file. Made no difference. Changed the file name to match the model file name also. No difference. Finally changed the cfg. file name to part.cfg just because it works for others. No difference. I\u0027ve also tried with exported .dae file into Unity as well as the .blend file into Unity. No difference. I also followed your advice on the debug menu. Interestingly, while nothing shows up in the VAB parts area, the debug shows that my model and textures are in there. The config file does not show up. But since my problem is consistent, I am of the opinion that the game first looks for the .mu file, then the .cfg file. Since I think the .mu file is no good, it may then follow that .cfg file isn\u0027t seen due to that. I can\u0027t see anything wrong with my .cfg file. Here are images of mod icon files. The first image is of a mod by another author which loads and in fact appears in the game, in the VAB parts. The second is my mod.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://farm6.staticflickr.com/5531/9700393005_6a1fee0507_z.jpg\u0022 alt=\u00229700393005_6a1fee0507_z.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://farm8.staticflickr.com/7421/9703627038_afa519712d.jpg\u0022 alt=\u00229703627038_afa519712d.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe .cfg file icons differ because in this instance I used OpenOffice instead of TextWrangler to save that file. They are both text editors. Note that the .mu file icons differ. I don\u0027t think that should be the case. Mine is still about 45 kb in size. The other mod .mu file is about 418 kb in size. That is strange also because my model is more complex than the other model. I\u0027ve tried different diffuse as well as bm shaders too, which is why you see an icon for a normal file for bump map as well as the other texture MBM file.\u003C/p\u003E\u003Cp\u003EPerhaps my Part Tools didn\u0027t set up properly in KSP? At any rate, until a solution is found here, I\u0027m thinking of doing the simplest model I can; a cube and a texture to test.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-08T17:57:27Z\u0022 title=\u002209/08/2013 05:57  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 8, 2013\u003C/time\u003E by Dispatcher\u003C/strong\u003E\n\u003Cbr\u003EFurther testing.\n\u003C/span\u003E\n"},{"CreatedByName":"Cheebsta","CreatedById":74167,"CreatedDateTime":"2013-09-08T18:51:24Z","Content":"\n\u003Cp\u003EThe log will tell you flat out if it \u0022crashed\u0022 on the mu or cfg file, no need to guess.\u003C/p\u003E\u003Cp\u003EThat said, the cfg is the problem from what I see. Look at the existing files from Squad. If you\u0027re making a new tank you can pretty much copy an existing file and then just change the part name and tweak whatever other settings you want to fit your part. At the very least this should help you find where you\u0027ve gone wrong thus far. Many tutorials contain some fairly dated information.\u003C/p\u003E\u003Cp\u003EAlso, you do not need to match cfg name to Unity name for the part itself. \u0022name=something\u0022 just defines the name KSP will use internally, however, that name must be unique among all loaded parts or things get a little screwy. You do have to match the \u0022mesh=something.mu\u0022 line to whatever you entered as the name for the exported model in Unity though, and if you add thrust transforms, seat pivots, intakes, or other things like that, their names must match in the config to what they are in Unity.\u003C/p\u003E\n"},{"CreatedByName":"Dispatcher","CreatedById":78707,"CreatedDateTime":"2013-09-08T20:54:09Z","Content":"\n\u003Cp\u003EI took your suggestion. Modifying an existing .cfg file is what I would have done if there were not a tutorial on said files. :-O It works like a charm now! Its clear from an actual vanilla part .cfg file that its a script; that\u0027s less clear in the tutorial. I need to adjust a few figures (the mass number is apparently dry mass, not total mass, for example) and now I can tweak the texture settings for looks. Another thing I did is generate the collision mesh only in Unity instead of in Blender (actually its the same mesh; just allows it to be collision as well as rendered). Its a simple mesh so no need for a separate collision mesh. I\u0027ll add a few things in gradually into the .cfg to modify behavior, but its off to a very good start now.\u003C/p\u003E\u003Cp\u003EThanks again!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-08T20:56:39Z\u0022 title=\u002209/08/2013 08:56  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 8, 2013\u003C/time\u003E by Dispatcher\u003C/strong\u003E\n\u003Cbr\u003EAdded detail.\n\u003C/span\u003E\n"},{"CreatedByName":"Cheebsta","CreatedById":74167,"CreatedDateTime":"2013-09-08T21:34:06Z","Content":"\n\u003Cp\u003ENo problem.\u003C/p\u003E\u003Cp\u003EPS; As long as any mesh colliders you use have the \u0022Convex\u0022 option checked they\u0027ll work. It is \u0022better\u0022 to use a primitive if at all possible though. The game seems to handle primitives a lot more carefully than mesh, ie, a box collider will rarely get stuck in the ground while mesh colliders are notorious for doing so. The whole process is really just a lot of playing around to get to what works best for a given part, so you\u0027re on the right track there.\u003C/p\u003E\n"},{"CreatedByName":"O.R.C","CreatedById":81880,"CreatedDateTime":"2013-09-10T02:35:32Z","Content":"\n\u003Cp\u003EIs unity supost to export my textures as well. If it is why would it not be doing it for me.\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2013-09-10T03:12:24Z","Content":"\n\u003Cp\u003EYes it will export at least one texture file in addition to the .mu, depending on the type of shader you chose in Unity. It will be either a .mbm, .png, or .tga file.\u003C/p\u003E\u003Cp\u003Eif you are only getting a .mu file then something is causing the export to error out. There is a way to open the unity program\u0027s log to see what it might be.\u003C/p\u003E\u003Cp\u003EUsually, its a scene setup issue and the easiest way is to remove eveything from the \u0022scene\u0022 section (including your Gameobject you added part tools to, the one where you set up the part name and texture type) and then add everything back in.\u003C/p\u003E\u003Cp\u003EStuff like animations and moving around objects as objects and parents too many times can bug out the scene, though those aren\u0027t the only causes.\u003C/p\u003E\n"},{"CreatedByName":"O.R.C","CreatedById":81880,"CreatedDateTime":"2013-09-10T03:46:15Z","Content":"\n\u003Cp\u003EI tried what you said, I even made a new project but it still does not export the texture.\u003C/p\u003E\n"},{"CreatedByName":"O.R.C","CreatedById":81880,"CreatedDateTime":"2013-09-10T03:49:03Z","Content":"\n\u003Cp\u003EI tried what you said but it still is not exporting the texture. The unity log is not showing any problems. What am I doing wrong\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2013-09-10T03:50:27Z","Content":"\n\u003Cp\u003EI don\u0027t know, If you can take a screenshot of unity with your part tools object highlighted and post it here so we can see your settings, maybe I can help you further\u003C/p\u003E\n"}]}