{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":304,"Articles":[{"CreatedByName":"stratvox","CreatedById":134498,"CreatedDateTime":"2019-01-03T22:04:32Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Thank you, I have managed to fix the tsunami bug as well (thanks to [@damonvv](https://forum.kerbalspaceprogram.com/index.php?/profile/162728-damonvv/) for his reproduction method), more testing is necessary to verify it\u0027s gone for good however ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Hmm, if it doesn\u0027t appear on the recording then it looks like it\u0027s an issue with your system and not the game itself or the mod. I suggest downvolting or downclocking your GPU, setting a more agressive fan profile, or setting a framerate limit, and verifying if it holds better when temps are lower.\n\u003E \n\nMay also want to check out how dusty the heat sinks are on the video card... could be as simple as blowing some of it off with compressed air."},{"CreatedByName":"Adamcor","CreatedById":194463,"CreatedDateTime":"2019-01-03T22:43:14Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Thank you, I have managed to fix the tsunami bug as well (thanks to [@damonvv](https://forum.kerbalspaceprogram.com/index.php?/profile/162728-damonvv/) for his reproduction method), more testing is necessary to verify it\u0027s gone for good however ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Hmm, if it doesn\u0027t appear on the recording then it looks like it\u0027s an issue with your system and not the game itself or the mod. I suggest downvolting or downclocking your GPU, setting a more agressive fan profile, or setting a framerate limit, and verifying if it holds better when temps are lower.\n\u003E \n\n\u003E \n\u003E \n\u003E 40 minutes ago, stratvox said:\n\u003E \n\u003E \n\u003E May also want to check out how dusty the heat sinks are on the video card... could be as simple as blowing some of it off with compressed air.\n\u003E \n\nI\u0027ve managed to get it working much better by changing a few settings. My GPU temp now sits between 60-70 while playing. This also stopped the screen flickering while using Scatterer. I\u0027m beginning to notice this screen flickering problem occur more often when I pick up my laptop though. Maybe there is something wrong internally. I think I will go ahead and clean off the inside with some compressed air just in case.\n\nThanks for the support everyone!"},{"CreatedByName":"strudo76","CreatedById":175831,"CreatedDateTime":"2019-01-04T00:37:03Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Adamcor said:\n\u003E \n\u003E \n\u003E I\u0027ve managed to get it working much better by changing a few settings. My GPU temp now sits between 60-70 while playing. This also stopped the screen flickering while using Scatterer. I\u0027m beginning to notice this screen flickering problem occur more often when I pick up my laptop though. Maybe there is something wrong internally. I think I will go ahead and clean off the inside with some compressed air just in case.\n\u003E \n\nYou can also try elevating the laptop so it\u0027s not sitting flat on the surface. Couple of bits of wood at each end does the trick. That way the underneath is clear for the air to move more heat away. Not exactly a comfortable to play on set up like that though."},{"CreatedByName":"Adamcor","CreatedById":194463,"CreatedDateTime":"2019-01-04T01:02:59Z","Content":"\u003E \n\u003E \n\u003E 19 hours ago, strudo76 said:\n\u003E \n\u003E \n\u003E You can also try elevating the laptop so it\u0027s not sitting flat on the surface. Couple of bits of wood at each end does the trick. That way the underneath is clear for the air to move more heat away. Not exactly a comfortable to play on set up like that though.\n\u003E \n\nThat\u0027s exactly what I was doing haha. But instead I was balancing it on my knee so I wouldn\u0027t block any fans. I noticed it very much improved the cooling of my GPU. I am in the process of looking through the millions of laptop stands on Amazon right now.\n\nI was playing some Career this morning and unfortunately the Flickering started again. I\u0027m not sure if my GPU was the cause as its temperature was only 60 degrees C. I noticed a strange exception at the end of my Log this time. Maybe someone else can take a look?\n\n[https://www.dropbox.com/s/w6pjtig1sc42ip5/output_log.txt?dl=0](https://www.dropbox.com/s/w6pjtig1sc42ip5/output_log.txt?dl=0)\n\n**Edited \u003Ctime datetime=\u00222019-01-04T19:36:27Z\u0022 title=\u002201/04/2019 07:36  PM\u0022 data-short=\u00225 yr\u0022\u003EJanuary 4, 2019\u003C/time\u003E by Adamcor**"},{"CreatedByName":"TimKerbin","CreatedById":83805,"CreatedDateTime":"2019-01-06T03:54:29Z","Content":"Any idea when/if Scatterer for 1.6.0 will be ready? I\u0027ve seen videos on YouTube of people in 1.6.0 using 1.5.1 versions of environmental mods including Scatterer, but I don\u0027t know how they did it because I cannot get any of them to work at all. KSP just keeps telling me \u0022not supported in 1.6.0, use 1.5.1\u0022 even though that\u0027s what I\u0027m trying to do!![\u003C_\u003C](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_dry.png \u0022\u003C_\u003C\u0022)\n\nI miss my environmental mods; KSP looks so naked without them.![:lol:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_laugh.png \u0022:lol:\u0022)"},{"CreatedByName":"airtrafficcontroller","CreatedById":174649,"CreatedDateTime":"2019-01-06T07:09:24Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, TimKerbin said:\n\u003E \n\u003E \n\u003E \u0022not\uFEFF\uFEFF\uFEFF\uFEFF \uFEFFsupported in 1.6.0, use\uFEFF 1.5.1\uFEFF\uFEFF\u0022\n\u003E \n\nThere is a trick, you can edit the .version file inside the mod folder. It will make KSP think that the mod is updated, doesnt work with all but you can try. Scatterer is good in 1.6."},{"CreatedByName":"Atmoz","CreatedById":145981,"CreatedDateTime":"2019-01-06T10:22:40Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, airtrafficcontroller said:\n\u003E \n\u003E \n\u003E There is a trick, you can edit the .version file inside the mod folder. It will make KSP think that the mod is updated, doesnt work with all but you can try. Scatterer is good in 1.6.\n\u003E \n\n\u0022.version file inside the mod folder\u0022 ?????\n\nWhere ?"},{"CreatedByName":"airtrafficcontroller","CreatedById":174649,"CreatedDateTime":"2019-01-06T17:14:40Z","Content":"\u003E \n\u003E \n\u003E 6 hours ago, Atmoz said:\n\u003E \n\u003E \n\u003E Where ?\n\u003E \n\nThe folder of the mod that is giving you this message.\n\nScatterer 0.0336 is working fine in KSP 1.6."},{"CreatedByName":"Brigadier","CreatedById":147109,"CreatedDateTime":"2019-01-07T02:05:08Z","Content":"\u003E \n\u003E \n\u003E 15 hours ago, Atmoz said:\n\u003E \n\u003E \n\u003E \u0022.version file inside the mod folder\u0022 ?????\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Where ?\n\u003E \n\nGenerally, go to your KSP\\GameData folder and look for the mod in question.  Open that mod folder and look for a .version file, often in the mod\u0027s root directory but not always.  Make a backup copy and then open it with any decent text editor.  It\u0027ll look something like this one from FMRS:\n\n    {\n      \u0022NAME\u0022: \u0022FMRS (Flight Manager For Reusable Stages)\u0022,\n      \u0022URL\u0022: \u0022http://ksp.spacetux.net/avc/FMRS\u0022,\n      \u0022DOWNLOAD\u0022: \u0022https://github.com/linuxgurugamer/FMRS/releases\u0022,\n      \u0022GITHUB\u0022: {\n        \u0022USERNAME\u0022: \u0022linuxgurugamer\u0022,\n        \u0022REPOSITORY\u0022: \u0022FMRS\u0022\n      },\n      \u0022VERSION\u0022: {\n        \u0022MAJOR\u0022: 1,\n        \u0022MINOR\u0022: 2,\n        \u0022PATCH\u0022: 7,\n        \u0022BUILD\u0022: 3\n      },\n      \u0022KSP_VERSION\u0022: {\n        \u0022MAJOR\u0022: 1,\n        \u0022MINOR\u0022: 5,\n        \u0022PATCH\u0022: 1\n      },\n      \u0022KSP_VERSION_MIN\u0022: {\n        \u0022MAJOR\u0022: 1,\n        \u0022MINOR\u0022: 5,\n        \u0022PATCH\u0022: 1\n      },\n      \u0022KSP_VERSION_MAX\u0022: {\n        \u0022MAJOR\u0022: 1,\n        \u0022MINOR\u0022: 5,\n        \u0022PATCH\u0022: 99\n      }\n    }\n\nEdit the KSP\\_VERSION and KSP\\_VERSION\\_MAX, if necessary.  Save the file and start KSP.\n\nIn your case, however, Scatterer doesn\u0027t seem to have one, so I don\u0027t know what [@airtrafficcontroller](https://forum.kerbalspaceprogram.com/index.php?/profile/174649-airtrafficcontroller/) is getting at.\n\n**Edited \u003Ctime datetime=\u00222019-01-07T02:05:33Z\u0022 title=\u002201/07/2019 02:05  AM\u0022 data-short=\u00225 yr\u0022\u003EJanuary 7, 2019\u003C/time\u003E by Brigadier**\n  \nSpelling error"},{"CreatedByName":"gsc","CreatedById":172046,"CreatedDateTime":"2019-01-09T13:13:42Z","Content":"\u003E \n\u003E \n\u003E On 1/3/2019 at 11:43 PM, Adamcor said:\n\u003E \n\u003E \n\u003E I\u0027ve managed to get it working much better by changing a few settings. My GPU temp now sits between 60-70 while playing. This also stopped the screen flickering while using Scatterer. I\u0027m beginning to notice this screen flickering problem occur more often when I pick up my laptop though. Maybe there is something wrong internally. I think I will go ahead and clean off the inside with some compressed air just in case.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Thanks for the support everyone!\n\u003E \n\nHaha...how do you pick up your laptop - lemme guess: right hand right edge fingers halfway under laptop towards center? Yeah...that causes hairline cracks over time in board, usually that area there around center is also where GPU is located ergo: hairline cracks/cracked solder joints around GPU, wont show up during normal operation, YET, but due to heat buildup they can expand hence flickering...i had the same a couple years back\n\n**Edited \u003Ctime datetime=\u00222019-01-09T13:15:16Z\u0022 title=\u002201/09/2019 01:15  PM\u0022 data-short=\u00225 yr\u0022\u003EJanuary 9, 2019\u003C/time\u003E by gsc**\n  \ncos i felt like it, pr\u00F6blem?"},{"CreatedByName":"Adamcor","CreatedById":194463,"CreatedDateTime":"2019-01-09T22:24:58Z","Content":"\u003E \n\u003E \n\u003E 9 hours ago, gsc said:\n\u003E \n\u003E \n\u003E Haha...how do you pick up your laptop - lemme guess: right hand right edge fingers halfway under laptop towards center? Yeah...that causes hairline cracks over time in board, usually that area there around center is also where GPU is located ergo: hairline cracks/cracked solder joints around GPU, wont show up during normal operation, YET, but due to heat buildup they can expand hence flickering...i had the same a couple years back\n\u003E \n\n I honestly think that is the problem my laptop is starting to have. Very disappointing to learn about now, as my laptop is already about 2 years old."},{"CreatedByName":"GrimT","CreatedById":119548,"CreatedDateTime":"2019-01-10T00:11:06Z","Content":"Hello, cant tell if this is an astronomers pack issue, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E issue or Scatterer issue. I use the word issue loosely though.  From orbit it would seem I can not see the land that the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E resides on, and on the night side of Kerbin, white lights flicker in a glitchy way.  Is there a setting that can be changed that Im missing? Is it even Scatterer?"},{"CreatedByName":"theonegalen","CreatedById":71012,"CreatedDateTime":"2019-01-12T08:31:32Z","Content":"\u003E \n\u003E \n\u003E On 1/9/2019 at 6:11 PM, GrimT said:\n\u003E \n\u003E \n\u003E Hello, cant tell if this is an astronomers pack issue, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E issue or Scatterer issue. I use the word issue loosely though.  From orbit it would seem I can not see the land that the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E resides on, and on the night side of Kerbin, white lights flicker in a glitchy way.  Is there a setting that can be changed that Im missing? Is it even Scatterer?\n\u003E \n\n\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E seems like isn\u0027t compatible with 1.6 or 1.6.1. There are conflicting reports. I had issues like you report, and was running \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E without Scatterer.\n\n**Edited \u003Ctime datetime=\u00222019-01-13T01:24:04Z\u0022 title=\u002201/13/2019 01:24  AM\u0022 data-short=\u00225 yr\u0022\u003EJanuary 13, 2019\u003C/time\u003E by theonegalen**"},{"CreatedByName":"sirchazzvader","CreatedById":191273,"CreatedDateTime":"2019-01-12T12:36:16Z","Content":"Hello. I am making a planet pack that adds more star systems orbiting a black hole. Since the sun needs to be the origin point of the simulation, I changed it into something that looks like a black hole. However scatterer has effects on the sun. I can\u0027t find a way to disable without deleted the cfg file. Is there a \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patch i could use."},{"CreatedByName":"Gapone","CreatedById":193365,"CreatedDateTime":"2019-01-13T08:45:52Z","Content":"Where can I change the color of atmosphere?"},{"CreatedByName":"GrimT","CreatedById":119548,"CreatedDateTime":"2019-01-13T21:56:06Z","Content":"\u003E \n\u003E \n\u003E On 1/12/2019 at 3:31 AM, theonegalen said:\n\u003E \n\u003E \n\u003E \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E seems like isn\u0027t compatible with 1.6 or 1.6.1. There are conflicting reports. I had issues like you report, and was running \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E without Scatterer.\n\u003E \n\nAppreciate the response. Its a little relieving to know that someone else has experienced similar. I was debating switching to SVE in the interim but I like the number of other changes \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E w/ Astronomers Pack have made with the planets.  Then again it could simply be an \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E issue which would persist with SVE anyway but I have a feeling that may not be the case.  The SVE changes appear to be \u0022sharper\u0022.  Its cosmetic and its not like I dont know where the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E is while in orbit so, I\u0027ll probably stick it out for now."},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2019-01-14T08:34:35Z","Content":"[@GrimT](https://forum.kerbalspaceprogram.com/index.php?/profile/119548-grimt/) I think that the \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E incompatibility issue has been debunked by the same user as being bogus:\n\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed5952020022\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/149733-14-13-122-environmentalvisualenhancements-140-1/\u0026do=embed\u0026comment=3521084\u0026embedComment=3521084\u0026embedDo=findComment\u0022 style=\u0022height:240px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\n(no Unity engine updates happened between the KSP 1.5 and KSP 1.6 branches so shaders remain the same)"},{"CreatedByName":"Gordon Fecyk","CreatedById":157121,"CreatedDateTime":"2019-01-16T02:19:44Z","Content":"~~**Dramatic Frame Rate Drop with Kopernicus \u0022Change My Kerbin\u0022**~~\n\n~~I work on [Alien Space Programs](https://github.com/GregroxMun/Alien-Space-Programs), which lets you start a game from a stock world other than Kerbin. Earlier in late 2018 I released a rebuilt version that takes advantage of Kopernicus 1.5.1\u0027s \u0022Change My Kerbin\u0022 feature, which lets me use a different stock world as the template for the home world. When I do things this way, it preserves that world\u0027s easter eggs; you can find the Face on Homeworld Duna, or the cave on Homeworld Tylo, for instance.~~\n\n~~I uncovered a frame rate problem with more complex craft, however; anything greater than 100 or so parts will cause a severe frame rate drop. The physics ticks become slower than a 1/4 second, and time slows down to two real-world seconds per game second.~~\n\n~~This didn\u0027t happen with previous versions of Alien Space Programs, and it also doesn\u0027t happen if I build the home world using the Kerbin template, use removeAllPQSMods = True, and build the home world from \u0027scratch,\u0027 using data from KittopiaTech. When I do this however, I can\u0027t add that world\u0027s easter eggs back except for monoliths.~~\n\n~~**Here\u0027s where I ask about Scatterer**~~\n\n~~I narrowed the frame rate problem down to Scatterer and no other add-on. When I remove Scatterer, I get the same frame rates regardless of how I build the home world. This includes adding \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E and a heavy particle count configuration like SVE. When I put Scatterer back though, the frame rate severely drops when I build the home world from a non-Kerbin template, and returns to normal when I build it from scratch. The frame rate drop ceases during on-rails time warp, either landed or in low orbit.~~\n\n~~What I want to know, is if I can change something in how I\u0027m building the home world that would avoid the Scatterer frame rate drop and still preserve that world\u0027s easter eggs.~~\n\n~~**To reproduce the problem**~~\n\n~~Since Scatterer\u0027s latest KSP release is 1.5.1, use KSP 1.5.1, Kopernicus 1.5.1-x (either -1 -2 or -3), and Alien Space Programs 1.5.1. Get the Scatterer release for KSP 1.5.1. Eve seems to be the easiest place to reproduce the problem, so set the home world to Eve and put a 100\u002B part craft on the runway or launch pad. On my Intel i4770 CPU plus GTX-1080 graphics I get a frame rate drop to below 15 FPS when I do this. To restore the frame rate to \u0027playable,\u0027 replace Eve.cfg with Eve.full-cfg from the [ASP 1.5.1 project site](https://github.com/GregroxMun/Alien-Space-Programs/tree/master/GameData/AlienSpacePrograms/Eve). You can remove and re-add Scatterer to test Eve.basic-cfg and Eve.full-cfg to observe the frame rate difference.~~\n\n~~**Suggestions?**~~\n\n~~Is there something I can do in my Kopernicus configuration to improve performance when Scatterer is used?~~\n\n~~Part of my thought process is how the home world still needs to be named \u0022Kerbin\u0022 internally, at least at first, and use cbNameLater to rename it. It appears Scatterer keys its atmosphere settings on the cbNameLater value, but I wonder if it\u0027s trying to draw Kerbin\u0027s and Eve\u0027s atmospheres at the same time.~~\n\n~~I also have a Scatterer patch file in ASP that renames any configuration for Kerbin to use \u0027Bin\u0027 instead, which is what non-homeworld Kerbin is called internally. Cheating a 100\u002B part craft to \u0027Bin\u0027 regardless of how \u0027Bin\u0027 is built gives me the same decent frame rate.~~\n\n**So here is what happened**\n\nScatterer apparently wants a full Ocean{} configuration in the definition for whatever the home world is, even if it\u0027s templated from a stock world that has an ocean. I copied the Ocean{} configurations from dumps saved from Kittopia into the home world definitions, and frame rates with Scatterer and complex craft improve to original values.\n\nMake sure your home world has an ocean configuration, even if it\u0027s hidden under a continuous PQS land mass, to make KSP and Scatterer happy.\n\n**Edited \u003Ctime datetime=\u00222019-01-28T03:02:58Z\u0022 title=\u002201/28/2019 03:02  AM\u0022 data-short=\u00225 yr\u0022\u003EJanuary 28, 2019\u003C/time\u003E by Gordon Fecyk**\n  \nThe fix"},{"CreatedByName":"Turbo Ben","CreatedById":193979,"CreatedDateTime":"2019-01-16T18:16:52Z","Content":"Hi, I asked this question in the technical help (modded) section about 3 weeks ago, but haven\u0027t had any replies.\n\nBasicly, after playing the game for 200 hours or so, I decided it was time to give some mods a go with a new career. I had some extra planets and wanted \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E and scatterer to add the visual enhancements. Problem is, after installing scatterer, my frame rate tanked, even at the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E scene, and I was stuck with a permanently yellow timer. Even with only scatterer installed, the lag was not improved.\n\nJust for comparison, with no mods and high graphics settings, I can run at 3x speed in atmosphere with only the occasional flicker of a yellow clock.\n\nA few specs and things I\u0027ve tried:\n\n     Windows 10 64 bit. I\u0027ve I actually installed a fresh copy of windows on a clean hard drive. It did make a very noticeable improvement in the physics calculations, but the frame rate lag is still there and is unbearable.\n\n     Intel i7-7700K overclocked to 5gHz (delidded with liquid metal thermal compound and water cooled. Runs to 70C tops with all 4 cores being stress tested)\n\n     16GB DDR4 RAM\n\n     NVIDIA GTX 1050 Graphics running the game on 3 monitors with a resolution of 1080 x  5760. Tweeked the nvidia graphics settings using online guide with no noticeable improvement.\n\n     Samsung evo SSD\n\n     Power settings set to performance - made no difference.\n\n     running -force-d3d11 made no difference other than to introduce some glitches.\n\n     Running 64bit KSP 1.5.1 - Scatterer installed using \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E so should be up to date.\n\nI\u0027ve now done another 200 hours or so with quite a few mods installed and only really noticed a slowdown on a Duna decent. I\u0027d really like to give scatterer another chance, so if anyone can offer any suggestions I\u0027d be very grateful. The only weak spot on my system I think is the graphics card at the resolution I\u0027m running, but it\u0027s coping well with all the other mods installed.\n\nThanks"},{"CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2019-01-16T22:48:18Z","Content":"\u003E \n\u003E \n\u003E 20 hours ago, Gordon Fecyk said:\n\u003E \n\u003E \n\u003E **Dramatic Frame Rate Drop with Kopernicus \u0022Change My Kerbin\u0022**\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I work on [Alien Space Programs](https://github.com/GregroxMun/Alien-Space-Programs), which lets you start a game from a stock world other than Kerbin. Earlier in late 2018 I released a rebuilt version that takes advantage of Kopernicus 1.5.1\u0027s \u0022Change My Kerbin\u0022 feature, which lets me use a different stock world as the template for the home world. When I do things this way, it preserves that world\u0027s easter eggs; you can find the Face on Homeworld Duna, or the cave on Homeworld Tylo, for instance.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I uncovered a frame rate problem with more complex craft, however; anything greater than 100 or so parts will cause a severe frame rate drop. The physics ticks become slower than a 1/4 second, and time slows down to two real-world seconds per game second.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E This didn\u0027t happen with previous versions of Alien Space Programs, and it also doesn\u0027t happen if I build the home world using the Kerbin template, use removeAllPQSMods = True, and build the home world from \u0027scratch,\u0027 using data from KittopiaTech. When I do this however, I can\u0027t add that world\u0027s easter eggs back except for monoliths.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Here\u0027s where I ask about Scatterer**\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I narrowed the frame rate problem down to Scatterer and no other add-on. When I remove Scatterer, I get the same frame rates regardless of how I build the home world. This includes adding \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E and a heavy particle count configuration like SVE. When I put Scatterer back though, the frame rate severely drops when I build the home world from a non-Kerbin template, and returns to normal when I build it from scratch. The frame rate drop ceases during on-rails time warp, either landed or in low orbit.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E What I want to know, is if I can change something in how I\u0027m building the home world that would avoid the Scatterer frame rate drop and still preserve that world\u0027s easter eggs.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **To reproduce the problem**\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Since Scatterer\u0027s latest KSP release is 1.5.1, use KSP 1.5.1, Kopernicus 1.5.1-x (either -1 -2 or -3), and Alien Space Programs 1.5.1. Get the Scatterer release for KSP 1.5.1. Eve seems to be the easiest place to reproduce the problem, so set the home world to Eve and put a 100\u002B part craft on the runway or launch pad. On my Intel i4770 CPU plus GTX-1080 graphics I get a frame rate drop to below 15 FPS when I do this. To restore the frame rate to \u0027playable,\u0027 replace Eve.cfg with Eve.full-cfg from the [ASP 1.5.1 project site](https://github.com/GregroxMun/Alien-Space-Programs/tree/master/GameData/AlienSpacePrograms/Eve). You can remove and re-add Scatterer to test Eve.basic-cfg and Eve.full-cfg to observe the frame rate difference.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E **Suggestions?**\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Is there something I can do in my Kopernicus configuration to improve performance when Scatterer is used?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Part of my thought process is how the home world still needs to be named \u0022Kerbin\u0022 internally, at least at first, and use cbNameLater to rename it. It appears Scatterer keys its atmosphere settings on the cbNameLater value, but I wonder if it\u0027s trying to draw Kerbin\u0027s and Eve\u0027s atmospheres at the same time.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I also have a Scatterer patch file in ASP that renames any configuration for Kerbin to use \u0027Bin\u0027 instead, which is what non-homeworld Kerbin is called internally. Cheating a 100\u002B part craft to \u0027Bin\u0027 regardless of how \u0027Bin\u0027 is built gives me the same decent frame rate.\n\u003E \n\nCan confirm that during development of my upcoming Beyond Home mod, I get significantly reduced FPS on the home world compared to a default stock kerbin.\n\nThe cause is my GPU ramping up to 70%\u002B usage which is ridiculous since it\u0027s a GTX 1080. However I don\u0027t think the underlying issue is scatterer - more how the rebuild kerbin is applied. I noticed that it doesn\u0027t lag at night. Try timewarping to night - your FPS should jump right up.\n\n\u003E \n\u003E \n\u003E 4 hours ago, Turbo Ben said:\n\u003E \n\u003E \n\u003E NVIDIA\uFEFF GTX 1050 Graphics running the game on 3 monitors with a resolution of 1080 x  5760. Tweeked the nvidia graphics settings using online guide with no\uFEFF noticeable\uFEFF \uFEFFimprovement\uFEFF.\n\u003E \n\nAn I reading 1080 X 5760 correctly? I assume that\u0027s 5760 X 1080, being a triple-monitor or a large sized wide-screen.\n\nI think it\u0027s to do with the pixel density you\u0027re trying to render - is your GPU usage at 100%?\n\nYou\u0027re rendering slightly less than 3840 x 2160 (4k) pixels. I play at 4k and experience a huge impact in my performance and GPU usage with scatterer, rocketing usages to 70\u002B percent.\n\nThat said, I think scatterer is too demanding on the GPU at this resolution. This is definitely to do with optimization, but if nothing can be done (and we should wait for the new release at least), you\u0027re being bottlenecked by your graphics card."},{"CreatedByName":"gamerscircle","CreatedById":151261,"CreatedDateTime":"2019-01-16T22:57:28Z","Content":"I am new to scatter [okay.. that is a little white lie]  \n\nI used to use it back in 1.05, but it made things too dark and other things.. now , I understand that is better control.  Would someone mind sharing with me how I can keep the cool atmo effects, but perhaps reduce the pitch blackness on the darkside of planets by like 50% ... thank you"},{"CreatedByName":"Gordon Fecyk","CreatedById":157121,"CreatedDateTime":"2019-01-17T01:18:30Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, Gameslinx said:\n\u003E \n\u003E \n\u003E However I don\u0027t think the underlying issue is scatterer - more how the rebuild kerbin is applied. I noticed that it doesn\u0027t lag at night. Try timewarping to night - your FPS should jump right up.\n\u003E \n\nI just did that and I see the same frame rate at dawn, high noon, dusk, and pitch black. Nothing but Scatterer and the \u0027simple\u0027 homeworld Eve, and I get 17 FPS on said PC and consistent yellow clock. Now I didn\u0027t check the GPU usage vs CPU usage... I\u0027ll be right back.\n\n[Update] Now this is interesting, GPU usage is at about 90% during on-rails time warp and I get a playable frame rate. CPU usage is about 35-40%. I exit on-rails time warp, and both CPU and GPU usage drop to 30% and 45% respectively. Something seems to be throttling the CPU and GPU outside of time warp.\n\n[Update two] Using the full build the GPU is consistent at 90-100% usage at all states.\n\nI\u0027d like there to be a simple problem where maybe it\u0027s using two scatter configurations at once on the simple build.\n\n[Update three] It seems I found a compromise that fixes my frame rate issue, at least for Eve. I can template Eve and still build out everything from scratch, which I suspect gives Scatterer enough information to function. And I just tried the same technique for Homeworld Duna, which preserves Duna\u0027s easter eggs. I still have frame rate issues at Homeworld Duna, but they\u0027re not Scatterer-related as I get the same frame rates with or without it.\n\nMaybe Scatterer just needs enough atmosphere and ocean information in the configuration such as to avoid wasteful lookups in memory or disk? I don\u0027t know.\n\n**Edited \u003Ctime datetime=\u00222019-01-17T02:45:25Z\u0022 title=\u002201/17/2019 02:45  AM\u0022 data-short=\u00225 yr\u0022\u003EJanuary 17, 2019\u003C/time\u003E by Gordon Fecyk**\n  \nSome more results"},{"CreatedByName":"Natokerbal","CreatedById":171505,"CreatedDateTime":"2019-01-17T04:36:55Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) when can we expect a release of the new lighting and fixing of the terrain edge?"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2019-01-17T06:58:12Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Natokerbal said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) when can we expect a release of the new lighting and fixing of the terrain edge?\n\u003E \n\nAs soon as it\u0027s ready, I would assume.  Presumably if he wanted to announce a date he would have done so.\n\nPlease be patient. Remember that modding is a labor intensive, time consuming task that modders do for free, in their spare time, and naturally has to take a back seat to IRL priorities such as work, school, family, etc.\n\nTherefore, it\u0027s rarely appropriate to ask \u0022when\u0022. Since they\u0027re hard at work to give us shiny new toys for free, asking nothing in return, it seems only polite not to breathe down their necks and jostle their elbows, no? ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\nIt\u0027s great that folks love the mod, and perfectly understandable that they\u0027re eager to lay hands on it. It\u0027s an awesome piece of work; for that matter, I\u0027m pretty darn eager myself. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nBut it\u0027ll be ready when it\u0027s ready, and asking about it doesn\u0027t make it come any faster. So let\u0027s just give him a bit of breathing room to do his work, shall we?"},{"CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2019-01-17T07:56:33Z","Content":"\u003E \n\u003E \n\u003E 6 hours ago, Gordon Fecyk said:\n\u003E \n\u003E \n\u003E [Update\uFEFF two] Using \uFEFFthe fu\uFEFF\uFEFFll build the GPU is consistent at 90-100% usage at all states.\n\u003E \n\nIt\u0027s the same here. I think the post processing shaders are causing it. Try dropping your resolution and seeing if that helps. But playing below native is never fun..."}]}