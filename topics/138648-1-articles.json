{"TopicId":138648,"ForumId":36,"TopicTitle":"1.1\u002B Landing gear and strut variables","CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2016-05-01T13:31:46Z","PageNum":1,"Articles":[{"CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2016-05-01T13:31:46Z","Content":"\n\u003Cp\u003E\nThis is what I\u0027ve worked out/ learned from debugging the stock parts and researching Unity5 wheel collider. Some of it may be incorrect and some of it is a mystery to me, so please help fill in the gaps!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cu\u003E\u003Cstrong\u003EmoduleWheelBase\u003C/strong\u003E\u003C/u\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nradius:(x) the radius of the collider wheel in meters\n\u003C/p\u003E\n\u003Cp\u003E\ncenter: (x,y,z) The cartesian offset of the forces imparted to the wheel from the bottom of the wheel in meters. Set by default to 0,0,0; the bottom center of the wheel.\n\u003C/p\u003E\n\u003Cp\u003E\nmass: (x) I\u0027m not sure about this one, but I believe it\u0027s the sprung mass of the suspension before KSP scales it to real life. Increasing this allows you to use higher spring rates without jittering.\n\u003C/p\u003E\n\u003Cp\u003E\ngroundHeightOffset: (x) I\u0027m not sure what this is about, but I think it\u0027s the offset between physics enabled ground height vs physics disabled (such as during time warp or gear retraction). I\u0027ve had no luck so far playing with it.\n\u003C/p\u003E\n\u003Cp\u003E\nfrictionSharpness: I *think* this is how far the grip falls off from peak once maximum cornering is exceeded. Not really sure, though.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cu\u003E\u003Cstrong\u003EmoduleWheelSuspension:\u003C/strong\u003E\u003C/u\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nsuspensionDistance: (x), meters. the travel distance of the suspension from fully extended to fully compressed. Altering this must be compensated for by suspensionOffset. Small suspension distances will require very high spring ratios, which may lead to skittering and oscillations.\n\u003C/p\u003E\n\u003Cp\u003E\nsuspensionOffset: (x), meters. An adjustment between the visual wheel and collision wheel. Negative raises the visual wheel.\n\u003C/p\u003E\n\u003Cp\u003E\ntargetPosition: (0-1). The amount of compression (0 fully extended, 1 fully compressed) of the suspension *as drawn*. This allows you to adjust where the suspensionDistance lives. Changing this will have to be compensated for with suspensionOffset.\n\u003C/p\u003E\n\u003Cp\u003E\nspringRatio: (x). Units unknown, but I suspect it\u0027s the ratio of the spring force in N/m to the mass provided in moduleWheelBase. High spring ratio tightens the suspension and increases the resonant frequency of the spring/mass system. Too high spring ratio causes terrain collisions and skittering, especially when lightly loaded.\n\u003C/p\u003E\n\u003Cp\u003E\ndamperRatio: (0-1) The ratio of drag imparted by the damper to the velocity of displacement. 0 is completely undamped, while 1 is critically damped. Exceeding 1 will cause forces greater than the original displacing force, leading to oscillations and bizarre behavior.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022300px-Damping_1.svg.png\u0022 class=\u0022ipsImage\u0022 src=\u0022https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Damping_1.svg/300px-Damping_1.svg.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI like to use .6. It\u0027s just high enough to damp out oscillations, and low enough to allow the spring to absorb impacts smoothly.\n\u003C/p\u003E\n\u003Cp\u003E\nboostRatio: I dunno, and I\u0027d really like to. This affects the suspension. I\u0027ve had good luck with simply commenting it out...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo... Unity takes all of this info, and figures out a spring rate and damper that will fulfill these requirements. Then KSP takes that and scales it appropriately to the load of the actual vehicle. The end result is that struts and landing gear will ride at the same height regardless of load... but they will not act the same. light loads and tight springs is a recipe for Kraken bait.\n\u003C/p\u003E\n\u003Cp\u003E\nOne other thing. For struts:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cu\u003E\u003Cstrong\u003EModuleWheelDeployment\u003C/strong\u003E\u003C/u\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nTsubSys (0-1) :\u003Cspan style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003E\u00A0when the wheelCollider becomes active during wheel/leg deployment. 0 is start of deploy animation; 1 is end.\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0So that\u0027s all I\u0027ve got at the moment. Please help fill in the gaps and correct anything I\u0027ve got wrong!\n\u003C/p\u003E\n\u003Cp\u003E\nBest,\u003Cbr\u003E\n-Slashy\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-02T16:33:10Z\u0022 title=\u002205/02/2016 04:33  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 2, 2016\u003C/time\u003E by GoSlash27\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starhawk","CreatedById":131400,"CreatedDateTime":"2016-05-01T13:44:32Z","Content":"\n\u003Cp\u003E\nThank you, Slashy!\n\u003C/p\u003E\n\u003Cp\u003E\nThis is amazing work.\u00A0 There\u0027s some serious complexity in the system.\u00A0 No wonder tuning the wheels and landing gear has been so difficult.\n\u003C/p\u003E\n\u003Cp\u003E\nKudos on getting specifically mentioned in the 1.1.1 changelog, as well.\n\u003C/p\u003E\n\u003Cp\u003E\nHappy landings!\n\u003C/p\u003E\n"},{"CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2016-05-01T13:50:54Z","Content":"\n\u003Cp\u003E\nStarhawk,\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0Thanks for the kudos, but the original batch of adjustments for 1.1.1 was a terrible kludge IMO. I loosened the suspensions way too much in the process, turning early planes into lumberwagons.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0Now that we have more rigid mountings, I was able to return to near- 1.0 suspension stiffness without jittering.\n\u003C/p\u003E\n\u003Cp\u003E\nBest,\u003Cbr\u003E\n-Slashy\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-05-01T20:52:49Z","Content":"\n\u003Cp\u003E\nThese settings don\u0027t apply 100% to KSP since KSP implemented a 3rd party wheel system from VPP. Unity docs describe basic PhysX wheel collider.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/138574-the-new-landing-gear-system/\u0026amp;do=embed\u0026amp;embedComment=2551373\u0026amp;embedDo=findComment\u0022\u003E\u003C/iframe\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ETsubSys\u003C/strong\u003E determins when the wheelCollider becomes active during wheel/leg deployment. 0 is start of deploy animation; 1 is end.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-01T20:53:07Z\u0022 title=\u002205/01/2016 08:53  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 1, 2016\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"}]}