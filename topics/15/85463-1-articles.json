{"TopicId":85463,"ForumId":15,"TopicTitle":"Control From Here- MiniTutorial on making a docking port","CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-26T20:05:14Z","PageNum":1,"Articles":[{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-26T20:05:14Z","Content":"\n\u003Cp\u003EThis is a mini tutorial on how to set the \u0027control from here\u0027 axis and position on a docking port. I wanted to make docking ports that hung off the side of my service modules. When I first loaded it into KSP, if I clicked on the service module and selected \u0022Control From Here\u0022 nothing happened... because the game defaults to assuming that the \u0027control from here\u0027 of a part should come from the part\u0027s origin, and point in the part\u0027s \u0027up\u0027 direction... in this case up the nose of the rocket... exactly the same way that the command module on top of the service module was pointed... and totally the WRONG direction in relation to the docking port. This meant that my RCS didn\u0027t move the right way... that Navy Fish\u0027s plugin gave me bad data... and that Mechjeb\u0027s automatic docking would just slam the nose of my ship 6 meters into the space station you told it to dock with.\u003C/p\u003E\u003Cp\u003EYou may not need any of this info - if you\u0027re making a standalone docking port where the docking axis - the place the other ship will be that you want to dock with\u0027 is \u0027straight up from the part\u0027 then control from here will automatically go the right direction. This will hold true no matter how you attach that docking port to the ship - whichever way was \u0027up\u0027 when you first grabbed the part in the VAB will be where the \u0027control from here\u0027 points. (Just like the stock clamp-o-tron).\u003C/p\u003E\u003Cp\u003EBut if you\u0027re trying to make an inline docking port... or a part where the docking port may be offset from the port\u0027s root and/or origin... then you should specify the control axis as well. It\u0027s so easy to do that I do it manually for all docking ports, so I never get surprises!\u003C/p\u003E\u003Cp\u003E1. The magic happens in Unity- once you\u0027ve got your docking port model imported into Unity, you want to go to the top of the window \u0022GameObject\u0022 menu and select \u0022Add Empty\u0022. This will create an empty gameobject randomly placed in your scene. \u003C/p\u003E\u003Cp\u003E2. In the Hierarchy panel (usually on the left side of the screen) you want to drag this new empty gameobject on top of your model and let go - this will make your model the parent for the gameobject. \u003C/p\u003E\u003Cp\u003E3. If your empty game object is a long way from the model... you can quickly get them to the same place by selecting the gameobject in the hierarchy window, and then in the Inspector window (usually the top right) under \u0022Transform\u0022 set the location to 0,0,0. This will put the game object at the center of your model. (Because the model is the game object\u0027s parent!)\u003C/p\u003E\u003Cp\u003E4. Fine tune the game object\u0027s position - you want it lined up with the center of the docking port, and sitting right on the surface of the part. I\u0027m not sure if that\u0027s clear enough - I may get around to adding a picture later... but... If you\u0027re standing outside the ship, facing your docking port(as in, standing in a position where you\u0027d be squished between the vessels if another ship came to dock with your port right now), and I told you to stick your chewing gum right in the middle of the docking port... your gum would be stuck right where you want the game object to be. (Astronaut\u0027s note: Sticking chewing gum to precision and mission critical components such as docking ports is generally a poor idea and will likely void the warranty on both your docking port and your gum.)\u003C/p\u003E\u003Cp\u003E5. Now rotate the game object so the blue arrow, in Unity, is pointing out into space - pointing towards where you were just standing when you DIDN\u0027T put gum all over your spaceship part.\u003C/p\u003E\u003Cp\u003E6. Rename this gameobject \u0022dockingNode\u0022 . The actual name isn\u0027t important as long as it matches the config file, but you\u0027ve got to keep two nodes straight, so you might as well follow my example! If you MUST name your two nodes Abott and Costello there\u0027s no technical reason you can\u0027t... but...\u003C/p\u003E\u003Cp\u003E7. In the Hierarchy, select your \u0027dockingNode\u0022 object. Right click and \u0022Duplicate\u0022 it. \u003C/p\u003E\u003Cp\u003E8. Rename the duplicate \u0022controlNode.\u0022 \u003C/p\u003E\u003Cp\u003E9. Rotate the controlNode until the GREEN arrow points out into space. (Towards those obnoxious gum sticking kids that you\u0027d like to crush between the two docking vessels.)\u003C/p\u003E\u003Cp\u003E10. Out in your text editor - Add the following code to the .cfg file for your part:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = ModuleDockingNode\u003Cbr\u003E    nodeType = size0    \u003Cbr\u003E    nodeTransformName = dockingNode\u003Cbr\u003E    controlTransformName = controlNode\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe nodeTransformName property tells the game what empty game object represents the actual docking mechanism... the controlTransformName sets the \u0027control from here\u0027 position and direction reference.\u003C/p\u003E\u003Cp\u003ESo you can now load up your part and you\u0027re good to go!\u003C/p\u003E\u003Cp\u003EArt\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-26T21:55:41Z\u0022 title=\u002209/26/2014 09:55  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 26, 2014\u003C/time\u003E by artwhaley\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-26T20:26:40Z","Content":"\n\u003Cp\u003EGreat! I\u0027ll add it now.\u003C/p\u003E\u003Cp\u003EYour title is incomplete.\u003C/p\u003E\u003Cp\u003EEDIT.\u003C/p\u003E\u003Cp\u003EI just realised something interesting. This thing might allow you to change the control direction arbitrarily for other things like probe cores and command pods. If you\u0027d like to test this out with a few angles on a probe core then this would be a really great tut, and actually might help my Skylon mod a LOT because my control direction needs to be slightly tilted.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-27T02:36:51Z\u0022 title=\u002209/27/2014 02:36  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 27, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2014-09-26T22:03:14Z","Content":"\n\u003Cp\u003EI updated the title, I\u0027m not sure if that will break your link or not, Cpt. \u003C/p\u003E\u003Cp\u003EAnd.. on parts that DON\u0027T include a docking port... I\u0027m not sure where you would specify the control transform.... \u003C/p\u003E\u003Cp\u003EBut I can tell you that on a part that was a combination command pod and docking port I animated an empty object in Blender and used that as the control transform, specified in the docking port module .cfg, and it animated the control axis... you could trigger the animation and just watch the navball roll around to reorient to the new heading. It was kind of funny to hold an RCS button down while activating it and watch the ship try to adjust the jets as the control reference changed. If we could figure out where to specify the control transform, this sort of manipulation could be really handy for special purposes - i.e. a lander pod that could operate in a forward referencing mode while flying but switch over to ground reference during landings. \u003C/p\u003E\u003Cp\u003EI\u0027ll poke around and see if I can find a way to specify a control transform for the whole part.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-27T02:21:59Z","Content":"\n\u003Cp\u003EIt wont break the link. Afaik links only use the the number part.\u003C/p\u003E\u003Cp\u003EI\u0027m looking forward to your findings.\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003EI\u0027ve found that this transform is also useful on parts that have multiple docking nodes. Without it the part has multiple \u0022control from here\u0022 buttons. IIUC adding the transform allows you to only have one button. I don\u0027t know how busy you are, but this is another thing you can test out and add to the tutorial if you want.\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003EYou can try placing the transform in the ModuleCommand module.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-27T02:36:58Z\u0022 title=\u002209/27/2014 02:36  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 27, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-01-09T10:42:56Z","Content":"\n\u003Cp\u003EArtwhaley this is in response to your post \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/106557?p=1658125\u0026amp;viewfull=1#post1658125\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EI\u0027ve used this technique to give one of my skylon probes a moving vector and I don\u0027t see double \u0022Control from here\u0022 buttons.\u003C/p\u003E\u003Cp\u003ECan you post your config and a screenshot of your hierarchy?\u003C/p\u003E\n"}]}