{"TopicId":66013,"ForumId":15,"TopicTitle":"Main and Nose Landing Gear Rigging/Animating","CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-03-16T22:51:29Z","PageNum":3,"Articles":[{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-09T15:52:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EOk I\u0027m going through this now.\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EI\u0027m having difficult working out the locations of the transforms. Because there are meshes childed to the transforms, clicking the parents doesn\u0027t show the translation handles at the place of the parent, instead it shows the average location (I think) of the whole branch of the hierarchy. How do I view just the location of the parent?\u003C/span\u003E\u003C/p\u003E\u003Cp\u003ENevermind I found it. There\u0027s a Pivot/Center toggle at the top.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyour wheel was goign out too far because the transform you were using for suspension was at the tip of the piston rod. all you needed to do was move the suspension parent to where the wheel axle is; and child the suspension assembly to it.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-09T15:53:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Eyour wheel was goign out too far because the transform you were using for suspension was at the tip of the piston rod. all you needed to do was move the suspension parent to where the wheel axle is; and child the suspension assembly to it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYep I realised that a few minutes ago \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI have a few questions:\u003C/p\u003E\u003Cp\u003E1. The bottom arm mover transform has rotations applied to it in the prefab. X=74.22566 Y=-180 z=-180. Is that necessary? If so, why?\u003C/p\u003E\u003Cp\u003E2. Is \u0022suspensionParent\u0022 a necessary name like \u0022wheelCollider\u0022. What other necessary names are there?\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003E3. Are the mover transforms still necessary if the pivots of those arms are in the right place?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-09T15:58:45Z\u0022 title=\u002209/09/2014 03:58  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 9, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-09T16:28:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EYep I realised that a few minutes ago \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EI have a few questions:\u003C/p\u003E\u003Cp\u003E1. The bottom arm mover transform has rotations applied to it in the prefab. X=74.22566 Y=-180 z=-180. Is that necessary? If so, why?\u003C/p\u003E\u003Cp\u003E2. Is \u0022suspensionParent\u0022 a necessary name like \u0022wheelCollider\u0022. What other necessary names are there?\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003E3. Are the mover transforms still necessary if the pivots of those arms are in the right place?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E1. Yes. the LookAt constraint points along the \u002BZ direction. the way to position the mover transforms was: \u003C/p\u003E\u003Cp\u003Ecreate empty object; \u003C/p\u003E\u003Cp\u003Echild it to the piston arm; \u003C/p\u003E\u003Cp\u003Ereset the mover transform\u0027s Rot/Pos using the cog icon; (now position matches exactly so the arm won\u0027t shift position when the mover rotates)\u003C/p\u003E\u003Cp\u003Erotate the mover transform so the \u002BZ is pointed along the piston arm (\u002B/- 90 degrees around X); \u003C/p\u003E\u003Cp\u003Echild mover transform to same parent as piston arm (now it has the odd rotations because the parent changed); \u003C/p\u003E\u003Cp\u003Echild piston arm to mover transform. (now when LookAt constraint is active, the piston arm will point in the correct direction because the mover\u0027s \u002BZ will point at the piston sleeve\u0027s pivot)\u003C/p\u003E\u003Cp\u003EYou have to adjust the pivot of the piston arms in Blender, so their \u002BZ are pointed along the piston rod/sleeve, if you want to use mesh objects directly with LookAt constraint, perfectly fine, as long as the pivots are oriented correctly. Depending on which direction the \u002BX is pointed at the piece may be flipped when the constraint is active, easily fixed by rotating the pivot 180 degress around \u002BZ. Or if the mesh is symmetrical around \u002BZ, it still looks the same. Starting rotation doesn\u0027t matter, and no need to animate them. The LookAt constraint will take care of all the movements.\u003C/p\u003E\u003Cp\u003E2. no, they can be whatever you want, as long as you feed them to the respective variables in Wheel or LandingGear modules as you\u0027ve named them in the MU.\u003C/p\u003E\u003Cp\u003E3. nope. see 1. The transform were necessary because the local pivots of many mesh objects were aligned to world axis; not very useful for animating. Generally I find it easier just to position the mesh object\u0027s pivots based on how the piece is supposed to move. align them correctly if they are used for constraintFX stuff. Saves some work in creating mover objects in Unity.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-09T16:32:39Z\u0022 title=\u002209/09/2014 04:32  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 9, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-09T16:40:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003E... piston ...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was specifically asking about the torque arms, not the pistons. I have animated the hydraulics in Blender so that\u0027s not a problem. I\u0027m assuming the torque arms have to be pointing Z\u002B in blender to begin with as well, right?\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-09T16:44:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EI was specifically asking about the torque arms, not the pistons. I have animated the hydraulics in Blender so that\u0027s not a problem. I\u0027m assuming the torque arms have to be pointing Z\u002B in blender to begin with as well, right?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eanything that gets moved by LookAt constraint. piston, torque arms, straw skirts. whatever.\u003C/p\u003E\u003Cp\u003EI setup the main gear strut\u0027s hydraulic piston using LookAt Constraint just like the torque arms. Only thing that need to be keyed was the main strut and lights on/off.\u003C/p\u003E\u003Cp\u003Ealso if you have the heirarchy setup correctly, the upper/lower torque arms can swap positions and it will all work just the same since their relative positions to each other stays constant.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-09T16:49:33Z\u0022 title=\u002209/09/2014 04:49  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 9, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-10T06:28:39Z","Content":"\n\u003Cp\u003EIf you don\u0027t mind, could you make the link to that download available in the thread for everyone to see. There\u0027s a lot of useful info in this thread and having source files to go with it will be of great help to everyone.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-09-10T07:39:49Z","Content":"\n\u003Cp\u003ESome invaluable info there from nli2work. Knowledge many of us (myself included) probably take for granted.\u003C/p\u003E\u003Cp\u003EThe point about modeling with pivots aligned for how you want the parts to move is a very good one. I would second that if you do this with a weather eye on how it will be set up in unity it removes the need to rejig the hierarchy, which saves a lot of work. It also means you don\u0027t break the prefab, so if you update the model the changes are still automatically updated from the fbx, dae, blend or whatever automatically in Unity. I go so far as to add dummy objects before export - a good example would be the torque arms that need a GameObject on the ends for the LookAt to point towards. Sounds like you\u0027re very close to getting this nailed, though.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-10T12:10:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003ESounds like you\u0027re very close to getting this nailed, though.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMaybe.\u003C/p\u003E\u003Cp\u003EI\u0027ve got an aesthetic problem. They way nli2work rigged that gear is that the LookAt target for the top torque arm is parented to the suspensionParent. That means the movement of that LookAt target is linear; up and down. Unfortunately that means that the top torque arm movement is not entirely correct and the torque arms don\u0027t meet except only when fully compressed.\u003C/p\u003E\u003Cp\u003EI made a mockup in Blender to work out the correct position of the top arm LookAt target and found this problem.\u003C/p\u003E\u003Cp\u003EIs there a comprehensive reference for all the constraints that are available to us in KSP?\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003EWhat I really could use is Inverse Kinematics in KSP. It would make this whole thing super easy.\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003EThis is probably the last major hurdle. I just exported the part and everything else works brilliantly, although I\u0027ll need to do a lot of fiddling with the wheelCollider settings to get it to behave realistically.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/claHzQL.gif\u0022 alt=\u0022claHzQL.gif\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-11T19:19:16Z\u0022 title=\u002209/11/2014 07:19  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 11, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-10T14:45:38Z","Content":"\n\u003Cp\u003EMaybe I spoke to soon. I have trouble animating the light now. Despite checking \u0022Read/Write enabled\u0022 the animation is \u0022read-only\u0022. Everything is greyed out and I can\u0027t add keyframes for the light. This is the animation I imported from the fbx that I made in blender.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-10T14:54:26Z","Content":"\n\u003Cp\u003Esure thing, I figured it\u0027s your assets and let you share the files as you deemed fit. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ECaptainKipard\u0027s Skylon Nose Gear setup with Unity project; part file and config\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www./download/psu9e2k70d6wwz0/skylonNoseGear.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./download/psu9e2k70d6wwz0/skylonNoseGear.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Eif you want to add additional stuff like light on/off, additonal animated bits like Emissives, to animations you imported, you need to duplicate the clip in Unity. When you first import it, the clip will be under the import FBX\u0027s heirarchy, that\u0027s read-only because the import FBX is read-only. Select it, and CTRL-D, then a copy of it will be created in Unity, outside the import FBX\u0027s heirarchy, that one you can add/edit like normal animation clips in Unity.\u003C/p\u003E\u003Cp\u003Eto simulate true IK, you can break lower arm into two parts, piston rod and sleeve. then child one half of it to opposing torque arm at the tip. Set that half to look at the other half of the piston arm. would be pretty complicated to set up in config file as there\u0027s no visual help. You might need to add additional mover objects in Unity, not sure how LookAt and Position constraints will play along controlling the same transform. image helps a little bit. Red dot is Lower Torque Arm LookAt target; marker in lower right is Upper Torque Arm LookAt target.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/oWp8BCT.jpg\u0022 alt=\u0022oWp8BCT.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnother way is adjust the Upper Torque Arm\u0027s LookAt target position to find a compromise; since the whole chain is basically depends on how much the Upper Arm moves to look at the Target. \u003C/p\u003E\u003Cp\u003EThere\u0027s no way that I can see to equally divide the position constraint weight in KSP, not even possible to constraint to 2 targets. Ideally I would script the Upper Torque Arm\u0027s LookAt Target to always sit halfway (on the local Y-axis) between the Suspension Root (the half that doesn\u0027t move up/down); and the SuspensionParent (the half that moves up/down). 3d apps generally have stuff to set this up, Max has wire parameters e.g. Maya has driven-keys or something. But I don\u0027t think that\u0027s really worth the effort in KSP.\u003C/p\u003E\u003Cp\u003EPersonally I just set the suspension distance short enough that it never breaks the torque arm joint.\u003C/p\u003E\u003Cp\u003EThe wheelcollider friction settings are funky. Lo-Fi covered it nicely in the twitch feed. To add to it, the Stiffness factor is a multiplier to the asymptotic and static values, so 500 friction value and 0.5 Stiffness factor is same as 250 friction value and 1 Stiffness factor. Too high a sideways friction value will increase the odds of vessel flipping out of control during take off roll. Spring strength affects this as well. a fully compressed suspenion are more prone to uncontrollable take off roll. I set my friction values to 2/1 Static/Asymptote, stiffness factor of 1. forward generally around 400/200; sideways 80/40. Works most of the time.\u003C/p\u003E\u003Cp\u003EI also noticed if you don\u0027t add Bounds box, you can test the suspension in SPH by dragging and pushing the gear against the floor.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-10T15:35:22Z\u0022 title=\u002209/10/2014 03:35  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 10, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2014-09-10T15:36:18Z","Content":"\n\u003Cp\u003EHi the LookAt and Position constraints will quite happily play nice together, in a recent rover suspension I needed a lookat and a constrain position at the same location and they are behaving as expected, with complex setups though you have to avoid creating loops of actions much like Inverse kinematics.\u003C/p\u003E\u003Cp\u003EAlthough not looked at the unity stuff, I have a feeling that you may need to actually add some child transforms to the top and bottom link , so to the top torque arm add another transform and call it RodEnd or something , then center it to the position you wish the lower pivot point to be, do the same to the bottom arm but using a unique name for the transform of course, then in the config \u003C/p\u003E\u003Cp\u003Esomething like\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = FXModuleConstrainPosition\u003C/p\u003E\u003Cp\u003E matchRotation = false\u003C/p\u003E\u003Cp\u003E matchPosition = true\u003C/p\u003E\u003Cp\u003E CONSTRAINFX\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E targetName = RodEnd\u003C/p\u003E\u003Cp\u003E moversName = low arm\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E CONSTRAINFX\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E targetName = RodEndB\u003C/p\u003E\u003Cp\u003E moversName = bottomBrkt\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EThis way the top arm has to follow the bottom arm rather than the standard straight up and down that the stock layout provides for\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-10T15:44:19Z","Content":"\n\u003Cp\u003EI meant feeding multiple targets to the same mover; so the mover\u0027s rotation/position is averaged between the targets. Might still be possible in KSP, but probably not without some complex layered transform setups.\u003C/p\u003E\u003Cp\u003Ewith KSP you can create infinite dependency loops. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E The mover will look like some horror movie monster flipping back and forth endlessly.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-10T16:16:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Eto simulate true IK, you can break lower arm into two parts, piston rod and sleeve\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s not IK unfortunately. Torque arms are meant to be rigid. They don\u0027t contract and expand.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EIdeally I would script the Upper Torque Arm\u0027s LookAt Target to always sit halfway (on the local Y-axis) between the Suspension Root (the half that doesn\u0027t move up/down); and the SuspensionParent (the half that moves up/down). 3d apps generally have stuff to set this up, Max has wire parameters e.g. Maya has driven-keys or something. But I don\u0027t think that\u0027s really worth the effort in KSP.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBlender has weighted influence of constraints.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EI also noticed if you don\u0027t add Bounds box, you can test the suspension in SPH by dragging and pushing the gear against the floor.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EInteresting, thanks.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpannerMonkey(smce)\u0022 data-cite=\u0022SpannerMonkey(smce)\u0022\u003E\u003Cdiv\u003EHi the LookAt and Position constraints will quite happily play nice together, in a recent rover suspension I needed a lookat and a constrain position at the same location and they are behaving as expected, with complex setups though you have to avoid creating loops of actions much like Inverse kinematics.\u003Cp\u003EAlthough not looked at the unity stuff, I have a feeling that you may need to actually add some child transforms to the top and bottom link , so to the top torque arm add another transform and call it RodEnd or something , then center it to the position you wish the lower pivot point to be, do the same to the bottom arm but using a unique name for the transform of course, then in the config \u003C/p\u003E\u003Cp\u003Esomething like\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = FXModuleConstrainPosition\u003C/p\u003E\u003Cp\u003E matchRotation = false\u003C/p\u003E\u003Cp\u003E matchPosition = true\u003C/p\u003E\u003Cp\u003E CONSTRAINFX\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E targetName = RodEnd\u003C/p\u003E\u003Cp\u003E moversName = low arm\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E CONSTRAINFX\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E targetName = RodEndB\u003C/p\u003E\u003Cp\u003E moversName = bottomBrkt\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EThis way the top arm has to follow the bottom arm rather than the standard straight up and down that the stock layout provides for\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat is bottomBrkt? Also I\u0027m having difficult figuring out why that\u0027s not a dependency loop.\u003C/p\u003E\u003Cp\u003EI have requested a better constraint plugin \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/93425-Plugin-More-constraint-modules\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E. Not holding my breath.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-10T17:37:57Z","Content":"\n\u003Cp\u003Eanother option is move the lower arm\u0027s pivot to the tip of upper arm, child lower arm to upper arm. upper arm lookAt the same target as before. lower arm looks at a target that is at it\u0027s old pivot position. But either way, if the suspension distance is too long, one of the joints will separate since there\u0027s no good way to move the upper arm target\u0027s position. It would have to be a pretty specialized plugin to add that capability to KSP which still relies on Unity\u0027s legacy animation system. Unity4 only supports IK for characters using Mechanim.\u003C/p\u003E\u003Cp\u003Ean easier way to do it is drive the suspension as an animation tied to the suspensionParent\u0027s position between TargetPostion 0 and 1. I believe Orbitus was doing that for the 747 gears, not sure if that\u0027s still going forward of not.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-10T17:41:35Z\u0022 title=\u002209/10/2014 05:41  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 10, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-10T18:35:14Z","Content":"\n\u003Cp\u003EI think I would be able to put a hierarchy together to do this even if the FXModuleConstrainPosition module just allowed to to duplicate the movement and/or rotation in reverse. It would be hacky but it would work.\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003EI don\u0027t know how I\u0027m supposed to duplicate the animation. Duplicating the fbx in the assets window makes no difference, and duplicating the whole blue hierarchy in the hierarchy window also makes no difference.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-10T18:57:14Z\u0022 title=\u002209/10/2014 06:57  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 10, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-10T19:06:14Z","Content":"\n\u003Cp\u003Edo share if you find an IK setup using KSP\u0027s constraint and lookAt modules. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003Eopen up the FBX tree in the imported asset, Blue cube icon with little white page in the lower right corner. highlight the animation clip inside. CTRL-D. a new animation clip outside the FBX tree will appear, this new one is editable. but otherwise identical to the one inside. You can add to the heirarchy (lights, dummy objects, etc), but not change any of the original parts order or the animation will break.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/z3xikRi.jpg\u0022 alt=\u0022z3xikRi.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-10T19:10:48Z","Content":"\n\u003Cp\u003EThankyou. You deserve a lot of rep for your help here, so I\u0027ll check if the forum allows me to add to it every few days \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-09-11T22:06:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EOne thing I hadn\u0027t planned for was the fact that my design resulted in hitting a KSP limitation. FXModuleConstrainPosition and FXModuleLookAtConstraint are simply too basic to precisely animate something like the torque arms.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhy? They work just fine for me in far more complicated hierarchies. And why are you even using ConstrainPosition here? Just child the torque arms to the lower and upper part of the strut respectively. Constrain position is only particularly helpful if you want to translate an object with the position of another but not inherit rotation, or vice-versa. Otherwise it\u0027s a pointless waste of resources and a very unwieldy way to configure things.\u003C/p\u003E\u003Cp\u003ENow, ignore the fact that half the mesh has the normals mangled and the animation may not be exactly as it should be and watch the torque arms:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/qVXCvj3QSug?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EThe only thing in the config driving this is as follows:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = FXModuleLookAtConstraint\u003Cbr\u003E    CONSTRAINLOOKFX\u003Cbr\u003E    {\u003Cbr\u003E        targetName = DLBEnd\u003Cbr\u003E        rotatorsName = DLT\u003Cbr\u003E    }\u003Cbr\u003E    CONSTRAINLOOKFX\u003Cbr\u003E    {\u003Cbr\u003E        targetName = DLTEnd\u003Cbr\u003E        rotatorsName = DLB\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDLTEnd and DLBEnd are empty gameobjects used as targets. They are children of each torque arm placed at the end of each where the pin would be. It\u0027s simple: each torque arm (DLB and DLT) is set to look at the object on the end of the other. With the usual caveats that they must have the Z axis orientated where you want them to \u0027look\u0027, of course. The piston is animated with the gear raise/lower. I saw no reason to use a lookat here, it only ever performs one pre-determined motion.\u003C/p\u003E\u003Cp\u003EI can bundle up the Unity stuff and the part, but it\u0027s configured to be driven by my plugin, not FS or stock, and it\u0027s Unity 422.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-11T22:34:43Z","Content":"\n\u003Cp\u003EOk that\u0027s interesting. I did think about doing that, but I dismissed it without testing because I thought it wouldn\u0027t work when they both depend on eachothers children. It seemed like an infinite regression of dependancy. I\u0027m trying this now.\u003C/p\u003E\u003Cp\u003EBTW I wasn\u0027t using FXModuleConstrainPosition in this particular case, I\u0027m just complaining about it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-11T22:47:39Z\u0022 title=\u002209/11/2014 10:47  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 11, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-09-11T23:01:24Z","Content":"\n\u003Cp\u003EAh, assumption is the mother of all (redacted)-ups, and all that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E It won\u0027t work in 3ds (yes, it does complain about a loop - I assume the same in Blender), but KSP works fine. This is because of the serial nature in which things are processed, which gives limitations in itself (the first constraint is always 1 physics frame behind the second), but it\u0027s absolutely suffer-able for our purposes here. Agreed the position constraint has its limitations , though my only ask over what it does now would be that relative position is maintained to the target rather than snapping to the same position. It\u0027s quite manageable with a few tricks, though, and I find it very useful.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-11T23:04:34Z","Content":"\n\u003Cp\u003Eyou have the unity setup somewhere lo-fi? I\u0027d like to take a look at it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E might help improve my setups.\u003C/p\u003E\u003Cp\u003EI\u0027ve made dependency loops in KSP before; the two sides just flip back and forth non-stop. I suspect your setup doesn\u0027t have it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-11T23:08:44Z\u0022 title=\u002209/11/2014 11:08  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 11, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-11T23:06:37Z","Content":"\n\u003Cp\u003EIt\u0027s not working for me. In fact I can\u0027t even select the part from the menu now.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-09-11T23:17:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Eyou have the unity setup somewhere lo-fi? I\u0027d like to take a look at it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E might help improve my setups.\u003Cp\u003EI\u0027ve made dependency loops in KSP before; the two sides just flip back and forth non-stop. I suspect your setup doesn\u0027t have it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOf course, I\u0027ll package up shortly. There are (what looks like) dependency loops even in the stock stuff and my large wheels also use a similar setup.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/a31ho9nd8pyky6q/SkylonGearTorqueArmDemo.unitypackage?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/a31ho9nd8pyky6q/SkylonGearTorqueArmDemo.unitypackage?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Apologies if it doesn\u0027t bring the model into the scene, Unity can be a bit funny about that when the prefab is broken before export. I had to cheat because the torque arms transforms were not aligned correctly and I couldn\u0027t be bothered to sort out in 3ds and re-export, so I added a couple of dummy GO\u0027s, of which both the mesh and end objects are children.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EIt\u0027s not working for me. In fact I can\u0027t even select the part from the menu now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPost your config and a screen grab showing your Unity hierarchy?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-11T23:23:41Z\u0022 title=\u002209/11/2014 11:23  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 11, 2014\u003C/time\u003E by lo-fi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-11T23:33:20Z","Content":"\n\u003Cp\u003EI don\u0027t actually know what happened here. I reverted all the changes back to the way it was yesterday (that I remember), and even commented out the whole module and it still wont let me select. I think something else broke.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/tqzehu7.png\u0022 alt=\u0022tqzehu7.png\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EPART\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E// --- general parameters ---\u003C/p\u003E\u003Cp\u003Ename = KipEngSkylonNoseGear\u003C/p\u003E\u003Cp\u003Emodule = Part\u003C/p\u003E\u003Cp\u003Eauthor = Cpt. Kipard\u003C/p\u003E\u003Cp\u003E// --- asset parameters ---\u003C/p\u003E\u003Cp\u003Escale = 1.0\u003C/p\u003E\u003Cp\u003ErescaleFactor = 1\u003C/p\u003E\u003Cp\u003EMODEL\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E model = KipEng/parts/SkylonC2/SkylonNoseGear\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E// --- node definitions ---\u003C/p\u003E\u003Cp\u003Enode_stack_top = 0, 0, 0, 0, 1, 0, 2\u003C/p\u003E\u003Cp\u003E// --- FX definitions ---\u003C/p\u003E\u003Cp\u003E// --- Sound FX definition ---\u003C/p\u003E\u003Cp\u003E// --- editor parameters ---\u003C/p\u003E\u003Cp\u003ETechRequired = landing\u003C/p\u003E\u003Cp\u003EentryCost = 3200\u003C/p\u003E\u003Cp\u003Ecost = 450\u003C/p\u003E\u003Cp\u003Ecategory = Utility\u003C/p\u003E\u003Cp\u003Esubcategory = 0\u003C/p\u003E\u003Cp\u003Etitle = Skylon Nose Gear\u003C/p\u003E\u003Cp\u003Emanufacturer = Kip. Engineering\u003C/p\u003E\u003Cp\u003Edescription = Skylon Nose Gear\u003C/p\u003E\u003Cp\u003E// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\u003C/p\u003E\u003Cp\u003EattachRules = 1,0,0,0,1\u003C/p\u003E\u003Cp\u003E// --- standard part parameters ---\u003C/p\u003E\u003Cp\u003Emass = 0.5\u003C/p\u003E\u003Cp\u003EdragModelType = default\u003C/p\u003E\u003Cp\u003Emaximum_drag = 0.3\u003C/p\u003E\u003Cp\u003Eminimum_drag = 0.2\u003C/p\u003E\u003Cp\u003EangularDrag = 1\u003C/p\u003E\u003Cp\u003EcrashTolerance = 7\u003C/p\u003E\u003Cp\u003EmaxTemp = 1800\u003C/p\u003E\u003Cp\u003EcrashTolerance = 50\u003C/p\u003E\u003Cp\u003EbreakingForce = 50\u003C/p\u003E\u003Cp\u003EbreakingTorque = 50\u003C/p\u003E\u003Cp\u003E// --------------- module party -------------------------\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleLandingGear\u003C/p\u003E\u003Cp\u003E animationName = NoseGearAnimation\u003C/p\u003E\u003Cp\u003E suspensionParentName = suspensionParent\u003C/p\u003E\u003Cp\u003E wheelName = NoseGearWheels\u003C/p\u003E\u003Cp\u003E wheelRotationAxis = 1,0,0\u003C/p\u003E\u003Cp\u003E deployedDragMax = 0.6\u003C/p\u003E\u003Cp\u003E deployedDragMin = 0.4\u003C/p\u003E\u003Cp\u003E BrakeTorque = 3.0\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E//MODULE\u003C/p\u003E\u003Cp\u003E//{\u003C/p\u003E\u003Cp\u003E// name = ModuleLight\u003C/p\u003E\u003Cp\u003E// lightName = NoseGearLight\u003C/p\u003E\u003Cp\u003E// useAutoDim = true\u003C/p\u003E\u003Cp\u003E//}\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleSteering\u003C/p\u003E\u003Cp\u003E steeringResponseSpeed = 0.5\u003C/p\u003E\u003Cp\u003E controlAxisType = Forward\u003C/p\u003E\u003Cp\u003E steeringAxis = 0, 0, 1\u003C/p\u003E\u003Cp\u003E steeringTransformName = NoseGearSteering\u003C/p\u003E\u003Cp\u003E steeringLocked = false\u003C/p\u003E\u003Cp\u003E steeringCurve\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E key = 0 16\u003C/p\u003E\u003Cp\u003E key = 10 9\u003C/p\u003E\u003Cp\u003E key = 30 2\u003C/p\u003E\u003Cp\u003E key = 100 1\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E// ------------ Torque Arms ---------------\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = FXModuleLookAtConstraint\u003C/p\u003E\u003Cp\u003E CONSTRAINLOOKFX \u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E targetName = NoseTorqueArmTopTip\u003C/p\u003E\u003Cp\u003E rotatorsName = NoseTorqueArmBottom\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E CONSTRAINLOOKFX\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E targetName = NoseTorqueArmBottomTip\u003C/p\u003E\u003Cp\u003E rotatorsName = NoseTorqueArmTop\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-11T23:44:13Z","Content":"\n\u003Cp\u003EI just noticed that if I set the animation to play automatically then the wheel pokes up through the floor when the gear retracts. It looks like the part is spawning under the SPH floor.\u003C/p\u003E\n"}]}