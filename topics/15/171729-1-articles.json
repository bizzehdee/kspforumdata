{"TopicId":171729,"ForumId":15,"TopicTitle":"How to create a simple animated part in Unity 5.4? (not Blender)","CreatedByName":"kerbiloid","CreatedById":129408,"CreatedDateTime":"2018-03-06T06:54:23Z","PageNum":1,"Articles":[{"CreatedByName":"kerbiloid","CreatedById":129408,"CreatedDateTime":"2018-03-06T06:54:23Z","Content":"\n\u003Cp\u003E\nSay, there is a simple cube which represents an antenna. Normal state - \u0022retracted\u0022, scaled and/or moved up - \u0022extended\u0022.\u003Cbr\u003E\nAnother simple cube - the antenna base, unchangeable.\n\u003C/p\u003E\n\u003Cp\u003E\nBasically, I understand that there are \u0022animations\u0022 in Unity, they have nodes. We select a node, select an object and set its position, rotation, scale for the animation phase.\u003Cbr\u003E\nThis worked in Unity player.\u003Cbr\u003E\nThen we export this animation inside the mu file of the part and add a corresponding animation module in cfg (say, taking a stock antenna as an example).\u003Cbr\u003E\nI did this but still can\u0027t see this working in KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nThere are several tutorials on this forum and on youtube, but the problem is that all of them are either \u0022how to export an animation from Blender to Unity\u0022, or \u0022animation in Unity 3.x or 4.x\u0022.\u003Cbr\u003E\nI\u0027m just a casual user of Unity editor, so I don\u0027t know the mechanism very well, and 4.x interface looks very different for me, so probably I miss something.\n\u003C/p\u003E\n\u003Cp\u003E\nPlease, is it possible to give a step--by-step sequence of this?\n\u003C/p\u003E\n\u003Cp\u003E\n1. Given a Unity 5.4 project with a simple antenna part. As a static part it successfully gets exported and works.\u003Cbr\u003E\n2. In this part\u0027s GameObject we have two cubes (or at least just one for simplicity). Doesn\u0027t matter, imported or just created in Unity. But no animations, no FBX, etc.\u003Cbr\u003E\n3. Which steps should we click to make one cube to have two positions: \u0022antenna retracted\u0022 / \u0022antenna extended\u0022? \u003Cem\u003EWithout Blender, just Unity\u003C/em\u003E.\u003Cbr\u003E\n4. .. . and to correctly export it to mu file, so this would work in KSP.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-03-06T06:59:00Z\u0022 title=\u002203/06/2018 06:59  AM\u0022 data-short=\u00226 yr\u0022\u003EMarch 6, 2018\u003C/time\u003E by kerbiloid\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Eleusis La Arwall","CreatedById":116286,"CreatedDateTime":"2018-03-06T15:08:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223311358\u0022 data-ipsquote-contentid=\u0022171729\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221520319263\u0022 data-ipsquote-userid=\u0022129408\u0022 data-ipsquote-username=\u0022kerbiloid\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, kerbiloid said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n...\n\u003C/p\u003E\n\u003Cp\u003E\nPlease, is it possible to give a step--by-step sequence of this?\n\u003C/p\u003E\n\u003Cp\u003E\n1. Given a Unity 5.4 project with a simple antenna part. As a static part it successfully gets exported and works.\u003Cbr\u003E\n2. In this part\u0027s GameObject we have two cubes (or at least just one for simplicity). Doesn\u0027t matter, imported or just created in Unity. But no animations, no FBX, etc.\u003Cbr\u003E\n3. Which steps should we click to make one cube to have two positions: \u0022antenna retracted\u0022 / \u0022antenna extended\u0022? \u003Cem\u003EWithout Blender, just Unity\u003C/em\u003E.\u003Cbr\u003E\n4. .. . and to correctly export it to mu file, so this would work in KSP.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nStep-by-step unity only sequence for 2 cubes with moving animation:\n\u003C/p\u003E\n\u003Cp\u003E\nCreating an empty GameObject and the two cubes is self-explaining I think. Make sure GameObject is at 0,0,0 and has the parttools-component.\n\u003C/p\u003E\n\u003Cp\u003E\nSelect the GameObject (\u003Cspan style=\u0022color:#c0392b;\u0022\u003E1\u003C/span\u003E) and hit \u0022Add Component\u0022(\u003Cspan style=\u0022color:#c0392b;\u0022\u003E2\u003C/span\u003E). Under Miscellaneous click on \u0022Animation\u0022(\u003Cspan style=\u0022color:#c0392b;\u0022\u003E3\u003C/span\u003E) (not AnimatoR!). This way the animation component\u003Cbr\u003E\nis located at the GameObject.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022B7qowum.png\u0022 class=\u0022ipsImage\u0022 height=\u0022768\u0022 src=\u0022https://i.imgur.com/B7qowum.png\u0022 width=\u00221021\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nOpen the Animation window. Ctrl \u002B 6 or Window/Animation.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022FuM4AYF.png\u0022 class=\u0022ipsImage\u0022 height=\u0022768\u0022 src=\u0022https://i.imgur.com/FuM4AYF.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nCreate a new Animation, in this case \u0022TestAnimation\u0022.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022SF4Ybb9.png\u0022 class=\u0022ipsImage\u0022 height=\u0022768\u0022 src=\u0022https://i.imgur.com/SF4Ybb9.png\u0022 width=\u0022991\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nIn the top left (\u003Cspan style=\u0022color:#c0392b;\u0022\u003E1\u003C/span\u003E) you can switch between different animations if you want to have multiple. Switch to curve-view (\u003Cspan style=\u0022color:#c0392b;\u0022\u003E2\u003C/span\u003E) and hit \u0022Add Property\u0022(\u003Cspan style=\u0022color:#c0392b;\u0022\u003E3\u003C/span\u003E). Navigate down to the transformation of the mesh you want to move and add \u0022Position\u0022(\u003Cspan style=\u0022color:#c0392b;\u0022\u003E4\u003C/span\u003E).\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022wx0eioM.png\u0022 class=\u0022ipsImage\u0022 height=\u0022768\u0022 src=\u0022https://i.imgur.com/wx0eioM.png\u0022 width=\u0022992\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nGo to frame 60 (\u003Cspan style=\u0022color:#c0392b;\u0022\u003E1\u003C/span\u003E) and change the value of the Y coordinate from 0 to 1 (\u003Cspan style=\u0022color:#c0392b;\u0022\u003E2\u003C/span\u003E).\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022njMsLht.png\u0022 class=\u0022ipsImage\u0022 height=\u0022768\u0022 src=\u0022https://i.imgur.com/njMsLht.png\u0022 width=\u0022991\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nThat\u0027s it. Close the animation window, export the model and all you need is a config:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EPART\n{\n\t// General parameters\n\tname = TestAnim\n\tmodule = Part\n\tauthor = A\n\n\t// Asset parameters\n\tmesh = model.mu\n\tscale = 1\n\trescaleFactor = 1\n\n\t// Node definitions - Position X, Position Y, Position Z, Up X, Up Y, Up Z\n\tnode_stack_top = 0.0, 0.5, 0.0, 0.0, 1.0, 0.0, 2\n\tnode_stack_bottom = 0.0, -0.5, 0.0, 0.0, -1.0, 0.0, 2\n\n\t// Editor parameters\n\tTechRequired = experimentalElectrics\n\tentryCost = 10\n\tcost = 10\n\tcategory = Utility\n\tsubcategory = 0\n\ttitle = TestAnim\n\tmanufacturer = A\n\tdescription = \n\n\t// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\n\tattachRules = 1,1,1,0,0\n\n\t// Standard part parameters\n\tmass = 1.85\n\tfuelCrossFeed = True\n\tbulkheadProfiles = size2, srf\n\n\t// Drag\n\tdragModelType = default\n\tmaximum_drag = 0.2\n\tminimum_drag = 0.2\n\tangularDrag = 2\n\n\t// Damage and Temperature\n\tcrashTolerance = 10\n\tmaxTemp = 1400\n\n\t// Modules\n\tMODULE\n\t{\n\t\tname = ModuleAnimateGeneric\n\t\tanimationName = TestAnimation\n\t\tactionAvailable = true\n\t\tactionGUIName = Toggle Cube\n\t\tstartEventGUIName = Deploy Cube\n\t\tendEventGUIName = Retract Cube\n\t\teventAvailableEditor = true\n\t\teventAvailableEVA = true\n\t\teventAvailableFlight = true\n\t\tevaDistance = 5\n\t}\n\n\t// Resources\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe only important lines inside the Module are name and animationName. I\u0027ve used ModuleAnimateGeneric but ModuleAnimationGroup is also valid.\n\u003C/p\u003E\n\u003Cp\u003E\nNotes: The hirarchy and names of GameObjects and meshes cannot be changed after you created the animation. There are ways around that but it\u0027s easier to make the animations as last step when everything else is already set up.\n\u003C/p\u003E\n\u003Cp\u003E\n(\u003Ca href=\u0022https://imgur.com/a/xVbPs\u0022 rel=\u0022external nofollow\u0022\u003Eimgur album\u003C/a\u003E)\n\u003C/p\u003E\n\u003Cp\u003E\nHope this solves your problem \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"kerbiloid","CreatedById":129408,"CreatedDateTime":"2018-03-06T19:34:41Z","Content":"\n\u003Cp\u003E\nIt\u0027s excellent!\n\u003C/p\u003E\n\u003Cp\u003E\nMy test part is now animated as desired.\n\u003C/p\u003E\n\u003Cp\u003E\nThank you very much for your help!\n\u003C/p\u003E\n"}]}