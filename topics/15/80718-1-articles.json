{"TopicId":80718,"ForumId":15,"TopicTitle":"Multiple Animations on part","CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-08-04T18:49:42Z","PageNum":1,"Articles":[{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-08-04T18:49:42Z","Content":"\n\u003Cp\u003ESo I am trying to make a part that has multiple animations on it. I was able to successfully able to export it from blender to unity and it \u0022works\u0022 fine but I am having an issue ingame with it. For some reason when I load the part up it starts halfway between BOTH animations instead of at frame 0. If you right click the part it shows both animations in the undeployed state as it should be. I have to deploy and undeploy the animation to get the part to show as it should, at frame 0. This persists even after load the ship from VAB to pad.\u003C/p\u003E\u003Cp\u003EI was originally trying to use animategeneric but gave up as it doesn\u0027t have enough control for what I am trying to do. I switched to using firespitters fsanimate and it is working a lot better but I have the same issue with it starting half deployed between both animations instead of at the first frame.\u003C/p\u003E\u003Cp\u003EHere is my cfg code for the animations:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003Ename = FSanimateGeneric\u003Cbr\u003EanimationName = Inflate1\u003Cbr\u003EstartEventGUIName = Inflate\u003Cbr\u003EendEventGUIName = Debug Deflate\u003Cbr\u003EtoggleActionName = Toggle Inflate\u003Cbr\u003EstartDeployed = False\u003Cbr\u003E// Animation Layer. If you have more than one animation on a part, this must be unique for each one in order for them to not interrupt each other. If the stock engine heat animation module is used, that\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s probably on layer 0, so make this 1 or higher.\u003Cbr\u003Elayer = 1\u003Cbr\u003EplayAnimationOnEditorSpawn = False\u003Cbr\u003EuseActionEditorPopup = True\u003Cbr\u003E\u003Cbr\u003E// If you have more than one FSanimateGeneric on a part, give each a unique ID to. This makes the popup menu appear in a separate location for each module, and not steal each others windows. values: 0-9.\u003Cbr\u003EmoduleID = 0\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003Ename = FSanimateGeneric\u003Cbr\u003EanimationName = Deflate2\u003Cbr\u003EstartEventGUIName = Deflate\u003Cbr\u003EendEventGUIName = Reinflate\u003Cbr\u003EtoggleActionName = Toggle Deflate\u003Cbr\u003EstartDeployed = False\u003Cbr\u003E// Animation Layer. If you have more than one animation on a part, this must be unique for each one in order for them to not interrupt each other. If the stock engine heat animation module is used, that\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s probably on layer 0, so make this 1 or higher.\u003Cbr\u003Elayer = 2\u003Cbr\u003EplayAnimationOnEditorSpawn = False\u003Cbr\u003EuseActionEditorPopup = True\u003Cbr\u003E\u003Cbr\u003E// If you have more than one FSanimateGeneric on a part, give each a unique ID to. This makes the popup menu appear in a separate location for each module, and not steal each others windows. values: 0-9.\u003Cbr\u003EmoduleID = 1\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHere are pictures showing what I mean:\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/VIffR\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-08-04T19:32:16Z","Content":"\n\u003Cp\u003Elooks like you can use ModuleAnimateGeneric and include the AnimSwitch = true flag; that will play the Inflate animation in reverse. Might wanna check out RoverDude\u0027s deployable airbags and see how that\u0027s setup. looks very similar to what you are trying to set up here.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/83134\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/83134\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-08-04T19:46:58Z","Content":"\n\u003Cp\u003EI already tried that, if I reverse it the bags start open instead of half open and I still have to toggle them closed on launch. So it doesn\u0027t really solve the problem. For instance using that switch makes it start on frame 25 so the bags are open. If I don\u0027t use that it appears to start on frame 12 and frame 38 at the same time.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-08-04T20:41:56Z","Content":"\n\u003Cp\u003Eyeah, you only need 1 animation, Inflate. In the animation component, only assign 1 animation; Animations list size is 1, and the entry in the list is the same as the Animation field above it. so the deflate clip is not exported to the mu.\u003C/p\u003E\u003Cp\u003EmoduleAnimateGeneric would look something like this\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleAnimateGeneric\u003C/p\u003E\u003Cp\u003E animationName = Inflate1\u003C/p\u003E\u003Cp\u003E startEventGUIName = Inflate\u003C/p\u003E\u003Cp\u003E endEventGUIName = Deflate\u003C/p\u003E\u003Cp\u003E actionGUIName = Deploy Air Bag\u003C/p\u003E\u003Cp\u003E animSwitch = true //technically not necessary as it defaults to \u0022true\u0022 \u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003ELooks like the animation isn\u0027t loading correctly in your screenshots. check the cases and names in the module and unity settings and make sure you are using legacy animation. also check the animation make sure there aren\u0027t keyframes on attributes other than the ones you need to make it inflate and deflate. Only one of the event names should be visible depending on where the animation is on frame 0 or frame 25.\u003C/p\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-08-04T20:57:17Z","Content":"\n\u003Cp\u003EThere has to be 2 animations. The first animation inflates the airbags and shrinks the outer covering to size 0. The second shrinks the airbags to size zero while LEAVING the outer covering at zero. If you just take the inflate and reverse it the airbags will shrink but the outer covering will still be there which I don\u0027t want.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-08-04T21:11:10Z","Content":"\n\u003Cp\u003EOoooh you mean the gray egg is the casing... the brown ball is the air bag.\u003C/p\u003E\u003Cp\u003Ehm... are both pieces keyframed in both animations? might need to do that in the deflate animation, even thought the egg doesn\u0027t do anything, Unity needs to know the starting state of that piece in the deflate animation. in other words.\u003C/p\u003E\u003Cp\u003Ein Inflate; Airbag scales up, 0 ~ 1; egg shell scales down 1~0\u003C/p\u003E\u003Cp\u003Ein Deflate; Airbag scales down, 1~0; egg shell stays scaled at 0 ~ 0.\u003C/p\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-08-04T21:19:56Z","Content":"\n\u003Cp\u003EActually the \u0022grey egg\u0022 is a separate part. It doesn\u0027t change at all, it has the \u0022brown bag\u0022 placed on top of it. I\u0027ll try to explain the sequence better. First, you have the brown covering. When you click inflate, the brown covering should shrink to 0, the yellow airbags should inflate from 0 to 1000. When you hit deflate, the yellow airbags should shrink back to 0 and the brown bag will stay at zero. The grey egg is a separate probe part with it\u0027s own cfg and animations. It sits \u0022inside\u0022 the airbag part which basically becomes invisible around it once deflated although it is still technically there.\u003C/p\u003E\u003Cp\u003EThe yellow airbags and brown bag are keyframed separately using the action editor in blender.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-08-04T21:19:58Z","Content":"\n\u003Cp\u003EI see. I\u0027d definitely check out RoverDude\u0027s inflatable airbag part then. maybe the stock parachute code could be more useful than genericAnimate module. this is kind of like a parachute that looks like something else.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-04T21:26:12Z\u0022 title=\u002208/04/2014 09:26  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 4, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-08-04T21:37:37Z","Content":"\n\u003Cp\u003EI checked out his parts. His airbags are a single inflate/reverse-inflate animation. His custom library is good for adapting the bounce module to better suit an airbag but it doesn\u0027t seem to have anything to do with animation. It\u0027s looking like I\u0027ll need to separate the airbags and covering into two separate parts which I didn\u0027t want to do.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-08-04T21:43:20Z","Content":"\n\u003Cp\u003Eyeah that\u0027d be too complicated. Still seems like your original solution should work. Anything in the log files?\u003C/p\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-08-04T22:02:09Z","Content":"\n\u003Cp\u003EThe only error pertaining to this is the general Compute mesh inertia tensor failed when you have a collider that has a zero value. This shouldn\u0027t have anything to do with the function of the animation, I test it with the colliders disabled so this error doesn\u0027t show up for testing.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-08-05T14:11:18Z","Content":"\n\u003Cp\u003EI checked snjo\u0027s docs, don\u0027t see anything else that might help. :/ can\u0027t think of a solution that would use only 1 animation either, except a very long deflate duration; but that\u0027s very hacky and not a great way to do it.\u003C/p\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-08-19T13:30:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022raidernick\u0022 data-cite=\u0022raidernick\u0022\u003E\u003Cdiv\u003EThe only error pertaining to this is the general Compute mesh inertia tensor failed when you have a collider that has a zero value. This shouldn\u0027t have anything to do with the function of the animation, I test it with the colliders disabled so this error doesn\u0027t show up for testing.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMaybe too late - but for reference:\u003C/p\u003E\u003Cp\u003Efirst - inertia tensior is because you try to add a collider to a plane..\u003C/p\u003E\u003Cp\u003Euse in blender \u0022solidify\u0022 on that plane or merge it with an other mesh peace - that solves it\u003C/p\u003E\u003Cp\u003Esecond - I\u0027ve managed to import several animations from one blend file to unity by adding the key frames after each other..\u003C/p\u003E\u003Cp\u003Ein unity you can set a start and end time/frame for each animation you import..\u003C/p\u003E\u003Cp\u003Ethat way you can seperate them..\u003C/p\u003E\u003Cp\u003Ehowever - to call them independently I was using a plugin and called the animations by script..\u003C/p\u003E\u003Cp\u003Eso - not sure if there is a way to call them any differently..\u003C/p\u003E\u003Cp\u003Ethat generic animation thing is \u0022one only per part\u0022.\u003C/p\u003E\u003Cp\u003EI havent tested any of the available animation modules - so I can\u0027t say if they could help..\u003C/p\u003E\n"},{"CreatedByName":"VR_Dev","CreatedById":92196,"CreatedDateTime":"2014-08-19T14:38:37Z","Content":"\n\u003Cp\u003EI just kind of skimmed over the thread but I just wanted to suggest the easiest thing. Are sure you saved it at frame 0 in blender or whatever you made it in?\u003C/p\u003E\u003Cp\u003ETwo separate animations can be done successfully\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://giant.gfycat.com/JointCrazyFossa.gif\u0022 alt=\u0022JointCrazyFossa.gif\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-10-09T07:25:20Z","Content":"\n\u003Cp\u003EHope this isn\u0027t necro posting but\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/Starwaster/LayeredAnimations\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Starwaster/LayeredAnimations\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIt extends the stock animator and accepts the same fields plus one other, layer, which you use the same as you would in the firespitter generic animator. (different unique layer for each animation you have on the part)\u003C/p\u003E\n"},{"CreatedByName":"philotical","CreatedById":109390,"CreatedDateTime":"2014-10-09T12:38:16Z","Content":"\n\u003Cp\u003Edoes that mean, that animations run independantly - so if I open door 2, door one will not be changed?\u003C/p\u003E\u003Cp\u003EI mean if you have the door1 on frame 1-100 and door2 on frame 100-200, if you run the door2 animation, door1 will allways be at it\u0027s end state.\u003C/p\u003E\u003Cp\u003Ethat\u0027s annoying - does your code solve that issue?\u003C/p\u003E\u003Cp\u003Emaybe a ingnorant question.. sorry...\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2014-10-09T13:02:35Z","Content":"\n\u003Cp\u003EHi, the easiest way to do multiple animations is simply to animate each part in unity, I originally messed around with animating in my chosen modelling software and then split the animation in unity , but the results where mixed and mostly not satisfactory. Once you get used to the animation editor in unity it\u0027s much easier than messing around splitting clip. \u003C/p\u003E\u003Cp\u003EBelow is an example of a recent project that was totally animated in unity and it all works perfectly, I believe it\u0027s because the unity animation doesn\u0027t reference the models root in the same way that many modelling applications do. ( this is likely the wrong reason but i\u0027m no expert) \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Xvb2190.png\u0022 alt=\u0022Xvb2190.png\u0022\u003E\u003C/p\u003E\n"}]}