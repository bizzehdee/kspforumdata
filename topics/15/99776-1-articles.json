{"TopicId":99776,"ForumId":15,"TopicTitle":"[Solved]Some Collider questions","CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-15T22:05:58Z","PageNum":1,"Articles":[{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-15T22:05:58Z","Content":"\n\u003Cp\u003EOkay, \u003C/p\u003E\u003Cp\u003ESo I\u0027ve spent yesterday and today getting to grips with some of the basics of blender, unity, part tools and getting them all to play together. Thanks to the information on here, I have largely figured it out now, except for one detail. I\u0027ll start with what I\u0027ve done, so you know where I am.\u003C/p\u003E\u003Cp\u003EI need to update some models for an existing mod, which was not my own. I have managed to import the .mu files into blender, and export them into .blend, and get those to play together fairly well with unity. The problem arises with one particular model and generating colliders for it. \u003C/p\u003E\u003Cp\u003EThe model has a high-detail, high polygon count object, and a simple cylindrical collider mesh. It\u0027s taken me most of the afternoon to figure out that it kept falling through the launchpad because unity was throwing errors about the polygon count in the high-detail object\u0027s (unity-generated Mesh collider) collider being too high. Once I generated another simple collider for that object (another cylinder), and gave both cylinders collider meshes in Unity, and removed the one for the original object, it no longer falls through the launchpad. If I remove either one of the colliders it falls through. \u003C/p\u003E\u003Cp\u003ESo, that\u0027s where I am now. It\u0027s basically working, but I\u0027m not sure if I\u0027m doing something wrong. I\u0027ve tried using a simple cylinder model instead, and that works provided I give it a collision mesh in blender (a total of two cylinders - one for the object and one collision mesh), and give both of these items Mesh Colliders when I import into Unity. \u003C/p\u003E\u003Cp\u003EThe only problem is, using this method, the edge highlight has stopped working in the VAB. The part can still be selected and moved, but shows no tooltip. \u003C/p\u003E\u003Cp\u003ENo matter how I try to rearrange the collider hierarchical relationships, if I have anything less than 2 Mesh Colliders it just seems to fall straight through the pad. I \u003Cstrong\u003Emust\u003C/strong\u003E be doing something wrong, right?\u003C/p\u003E\u003Cp\u003ECan anyone advise best practice for this kind of thing?\u003C/p\u003E\u003Cp\u003EEDIT: Yes, The Mesh Colliders are set to Convex \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Using Unity 4.6.2 and the latest Blender (2.73).\u003C/p\u003E\u003Cp\u003ESolved: Attempting to animate a part without an animation may cause collider issues!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-16T15:22:17Z\u0022 title=\u002202/16/2015 03:22  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 16, 2015\u003C/time\u003E by Kielm\u003C/strong\u003E\n\u003Cbr\u003ESolved\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-02-15T22:40:22Z","Content":"\n\u003Cp\u003EHaving a little trouble figuring out what you\u0027re doing, but I\u0027ll try and point you in the right direction for best practice..\u003C/p\u003E\u003Cp\u003EAdding mesh collider to a visible mesh object and clicking convex is \u003Cem\u003Ethe\u003C/em\u003E worst thing you can do. For some objects, it won\u0027t even work. Others, as you\u0027ve found, will go over the 255 poly limit and won\u0027t work either. It gives the already over-worked physics engine a hard time too.\u003C/p\u003E\u003Cp\u003EThe best solution performance wise is to use the primitive colliders added to empty game objects. These can be children of the mesh objects, and this is usually the best way to do it.\u003C/p\u003E\u003Cp\u003EIf you must use a mesh collider (cone or pyramid sort of shapes are a great example of this), make a dedicate mesh that\u0027s as simple as you can and add the mesh collider component (with convex) as you\u0027ve been doing. To prevent this being visible in game, remove the \u0022Mesh Renderer\u0022 component on that object, but NOT the mesh filter.\u003C/p\u003E\u003Cp\u003EYou\u0027ll find that setting collider objects to certain layers stops them being used to select a part in the editor or for the RCM. WheelCollidersIgnore is a great example of this. The collider will still function for collisions, but the mouse will totally ignore it.\u003C/p\u003E\u003Cp\u003EUnity 4.2.2 is the best option, as the later versions have animation mechanisms that KSP doesn\u0027t support, and you\u0027ll struggle with animations. I doubt that\u0027s the problem here, though. I suspect you\u0027ve got some errors in the console in Unity when you click write? Part tools little or no error handling. It will merrily go about its job until it can\u0027t, then stop without warning or message unless you\u0027re looking at the console, and this can lead to half exported parts.\u003C/p\u003E\n"},{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-15T23:17:07Z","Content":"\n\u003Cp\u003ESome good advice there, thanks!\u003C/p\u003E\u003Cp\u003EI tried adding a single collision mesh as a child object in unity, using one of the primitives available added to a blank game objects. It allows surface attachment on the part in the VAB, but the part will fall through the pad if it\u0027s the bottom part, and still doesn\u0027t show any tooltip or edge highlighting :\\\u003C/p\u003E\u003Cp\u003EI\u0027m not getting any errors in Unity since the 255 polygon message much earlier today, it\u0027s all just copying textures or cleaning up leaked objects.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI guess I should summarize my problems, as there are a couple here.\u003C/p\u003E\u003Cp\u003E1. The new part falls through the launchpad, but can be selected, moved and right clicked in the VAB\u003C/p\u003E\u003Cp\u003E2. The part has no tooltip in the VAB or edge highlighting to show the mouse is over it\u003C/p\u003E\u003Cp\u003E3. If I have anything less than two colliders attached to it in Unity it falls through the launch pad.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-02-15T23:19:58Z","Content":"\n\u003Cp\u003EIs the collider definitely a child of the game object that part tools is applied to? Very easy for it to look like that\u0027s the case, when actually it\u0027s just in the scene. It caught somebody making an engine out recently. A definite way to tell is delete the object with part tools applied. What\u0027s left in the scene wasn\u0027t underneath it in the hierarchy, and won\u0027t have been exported. It\u0027s showing all the signs of being a plain old missing collider issue.. surface attachment doesn\u0027t rely on there being a collider, while selection for moving, rcm and highlighting does.\u003C/p\u003E\n"},{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-15T23:50:58Z","Content":"\n\u003Cp\u003EI\u0027ve tried this:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/XIwTYTf\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/XIwTYTf\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Eand this\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/XJ2XDEY\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/XJ2XDEY\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIn both cases, collider_base and collider_base_collider both have Mesh Colliders. It only works with both enabled. If I remove either one, it does not. \u003C/p\u003E\u003Cp\u003EAt this point, I think I may have to try an earlier version of Unity and reinstall Part Tools. :\\\u003C/p\u003E\n"},{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-16T08:17:36Z","Content":"\n\u003Cp\u003EUpdate:\u003C/p\u003E\u003Cp\u003EI installed Unity 4.2.2 as well as part tools 023 and still have this problem :\\\u003C/p\u003E\n"},{"CreatedByName":"Van Disaster","CreatedById":58876,"CreatedDateTime":"2015-02-16T08:49:42Z","Content":"\n\u003Cp\u003EYea, downgrading won\u0027t help a basic problem like that, it is just to help with animations ( and I did read somewhere you can use the new anim system if you rig your model with a single piece skeleton I think? certainly some trick to it ).\u003C/p\u003E\u003Cp\u003EShow us a screenshot of the model in unity with the colliders visible in the 3d view?\u003C/p\u003E\n"},{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-16T09:23:40Z","Content":"\n\u003Cp\u003ESure. I took the extra collider off to show what I\u0027m doing. \u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/ha05G\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EI take the mesh renderer for the collider off (4th pic) before writing.\u003C/p\u003E\u003Cp\u003E3rd pic shows the collider mesh.\u003C/p\u003E\n"},{"CreatedByName":"Van Disaster","CreatedById":58876,"CreatedDateTime":"2015-02-16T09:57:40Z","Content":"\n\u003Cp\u003EI can\u0027t spot anything obvious wrong there although I\u0027m a unity newbie - try temporarily replacing your mesh collider with a box collider of roughly the same size? that might help decide if it\u0027s your mesh collider or a problem with the part setup.\u003C/p\u003E\n"},{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-16T10:08:56Z","Content":"\n\u003Cp\u003EThanks for taking a look. I used a basic box collider from unity instead and that hasn\u0027t resolved the problem. \u003C/p\u003E\u003Cp\u003ENow I\u0027m starting to think it may be something in the part config. Can you spot anything obviously wrong with this?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPART\u003Cbr\u003E{\u003Cbr\u003Ename = ESLD_LB-10\u003Cbr\u003Emodule = Part\u003Cbr\u003Eauthor = EKSTRA Superluminal Logistics Division\u003Cbr\u003EMODEL\u003Cbr\u003E{\u003Cbr\u003E\tmodel = ESLDBeacons/Parts/Beacons/LB10\u003Cbr\u003E\ttexture = ESLDBeacons/Parts/Beacons/LB10tex\u003Cbr\u003E\tscale = 0.3125, 0.3125, 0.3125\u003Cbr\u003E}\u003Cbr\u003ErescaleFactor = 1\u003Cbr\u003E\u003Cbr\u003ECrewCapacity = 0\u003Cbr\u003E\u003Cbr\u003Enode_stack_bottom = 0.0, -0.375, 0.0, 0.0, 1.0, 0.0, 1\u003Cbr\u003Enode_stack_top = 0.0, 0.375, 0.0, 0.0, 1.0, 0.0, 1\u003Cbr\u003E\u003Cbr\u003ETechRequired = advElectrics\u003Cbr\u003EentryCost = 17800\u003Cbr\u003Ecost = 110000\u003Cbr\u003Ecategory = Utility\u003Cbr\u003Esubcategory = 0\u003Cbr\u003Etitle = LB-10 \u0022Shortcut\u0022 Beacon\u003Cbr\u003Emanufacturer = EKSTRA Superluminal Logistics Division\u003Cbr\u003Edescription = Developed to simplify in-system transfers, the LB-10 detonates crystalline Karborundum to rip a small hole in space-time.  Ships can then (potentially) pass through the breach and (hopefully) emerge (mostly) intact at another beacon.  That\u0027s the theory, anyway.  The LB-10 is optimized for distances of under 1 gigameter, but is okay with a wide range of weights.\u003Cbr\u003E\u003Cbr\u003EattachRules = 1,0,1,1,0\u003Cbr\u003E\u003Cbr\u003E// --- standard part parameters ---\u003Cbr\u003Emass = 1\u003Cbr\u003EdragModelType = default\u003Cbr\u003Emaximum_drag = 0.2\u003Cbr\u003Eminimum_drag = 0.2\u003Cbr\u003EangularDrag = 2\u003Cbr\u003EcrashTolerance = 9\u003Cbr\u003EmaxTemp = 3400\u003Cbr\u003E\u003Cbr\u003EexplosionPotential = 0\u003Cbr\u003E\u003Cbr\u003EvesselType = Station\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleEnviroSensor\u003Cbr\u003E\tsensorType = GRAV\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ESLDBeacon\u003Cbr\u003E\tbeaconModel = LB10\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = ModuleAnimateGeneric\u003Cbr\u003E    animationName = LB10Anim\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ERESOURCE\u003Cbr\u003E{\u003Cbr\u003E\tname = ElectricCharge\u003Cbr\u003E\tamount = 100\u003Cbr\u003E\tmaxAmount = 100\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ERESOURCE\u003Cbr\u003E{\u003Cbr\u003E\tname = Karborundum\u003Cbr\u003E\tamount = 0\u003Cbr\u003E\tmaxAmount = 50\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI have just noticed that Unity is throwing some errors:\u003C/p\u003E\u003Cp\u003EtypeTree.m_Children.front ().m_Type != SerializeTraits\u0026lt;SInt32\u0026gt;::GetTypeString (NULL)\u003C/p\u003E\u003Cp\u003EUnityEditor.DockArea:OnGUI()\u003C/p\u003E\n"},{"CreatedByName":"Van Disaster","CreatedById":58876,"CreatedDateTime":"2015-02-16T11:34:07Z","Content":"\n\u003Cp\u003ESomeone with a bit more experience will have to dig in at this point I think. However it\u0027s probably good at this point to go back and do all your final transformations in Blender, so you have a correctly oriented piece\u002Bcollider in Unity ( and in game ) which doesn\u0027t need any scaling. You can also put colliders for visible objects in the same game object as the mesh - provided they don\u0027t need translation - if you wanted to simplify your unity tree a little.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-16T12:21:49Z\u0022 title=\u002202/16/2015 12:21  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 16, 2015\u003C/time\u003E by Van Disaster\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-16T12:55:37Z","Content":"\n\u003Cp\u003EThanks for your help so far. \u003C/p\u003E\u003Cp\u003EI\u0027ve managed to fix the unity errors, which were left over from an earlier installation. After completely removing it and reinstalling 4.2.2 the errors seem to have cleared up. \u003C/p\u003E\u003Cp\u003EThe problem is still there however, so I\u0027m a bit stumped until I can get this fixed :\\\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-02-16T13:26:02Z","Content":"\n\u003Cp\u003EBundle it up and send over if you like?\u003C/p\u003E\u003Cp\u003EBest way to do that is - in Unity - select your scene, model, material and texture (anything that\u0027s related to this part), right click and select Export Package. This will spit out a .unitypackage, which includes all the metadata to link the game objects to the bots of mesh etc. Zip that up, post the link and I\u0027ll see what I can do for you.\u003C/p\u003E\u003Cp\u003EShould look something like this:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/1FQ67e8\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/1FQ67e8.png\u0022 alt=\u00221FQ67e8.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-16T14:06:57Z","Content":"\n\u003Cp\u003EThanks for the continued help \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/MrKiel/ESLDBeacons/blob/KM/Source/lb10.zip?raw=true\u0022 rel=\u0022external nofollow\u0022\u003EZipped package is linked here.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI hope someone can advise what I\u0027m doing wrong!\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-02-16T14:24:53Z","Content":"\n\u003Cp\u003ECheers fella, though you missed the scene file with that (little 3D black and white cube icon). If in doubt, File, Save Scene As. Select with the rest, just as you have and re-export.\u003C/p\u003E\n"},{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-16T14:38:53Z","Content":"\n\u003Cp\u003EOops!\u003C/p\u003E\u003Cp\u003EIncluded it and updated the .zip, \u003Ca href=\u0022https://github.com/MrKiel/ESLDBeacons/blob/KM/Source/lb10.zip?raw=true\u0022 rel=\u0022external nofollow\u0022\u003Elink is the same.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-02-16T14:58:25Z","Content":"\n\u003Cp\u003EConfig error. Or animation error, depending how you want to look at it.\u003C/p\u003E\u003Cp\u003EThere\u0027s no animation called LB10, so ModuleAnimateGeneric was throwing an index out of range exception. Diagnostic steps, for future reference:\u003C/p\u003E\u003Cp\u003EAlways look at the ALT\u002BF2 log if you\u0027re having trouble. In this case, an error shows up in red, though it\u0027s not very helpful as it doesn\u0027t tell you what threw the exception. Output_log in the KSP_Data directory is more verbose and tells you this, though:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EIndexOutOfRangeException: Array index is out of range.\u003Cbr\u003E  at ModuleAnimateGeneric.OnStart (StartState state) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E  at Part.ModulesOnStart () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E  at Part\u002B.MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis tells you that there\u0027s an issue with MAG. Remove it from the config, and everything starts working. If you do want an animation, there are some tutorials in the mod dev links that will run you through how to set it up. Otherwise, it looks fine in Unity. Good luck!\u003C/p\u003E\n"},{"CreatedByName":"Kielm","CreatedById":82247,"CreatedDateTime":"2015-02-16T15:19:54Z","Content":"\n\u003Cp\u003EInsert Scream Here.\u003C/p\u003E\u003Cp\u003EI didn\u0027t even want an animation - it was left over from the config of the old part I\u0027m replacing. That\u0027ll teach me. You\u0027re right, everything works absolutely fine without that module!\u003C/p\u003E\u003Cp\u003EWell, two days, one lesson learnt \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks very much for your help lo-fi, I\u0027ll make sure to check the logs first in future. Not enough rep in the world for you.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-02-16T15:31:56Z","Content":"\n\u003Cp\u003ECheers \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EYou\u0027re very welcome, we all have to start somewhere!\u003C/p\u003E\n"}]}