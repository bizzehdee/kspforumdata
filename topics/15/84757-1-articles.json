{"TopicId":84757,"ForumId":15,"TopicTitle":"[SOLVED] Armature animation import weirdness.","CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-16T17:16:19Z","PageNum":1,"Articles":[{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-16T17:16:19Z","Content":"\n\u003Cp\u003EMy Skylon cargo bay had to be animated with bones. Besides that I followed the same steps as I did when exporting and importing the gear animation fbx.\u003C/p\u003E\u003Cp\u003EWhen I placed the thing in the scene, it gave me these \u003Cstrong\u003ESkinned Mesh Renderer \u003C/strong\u003Ecomponents on many of the objects in the hierarchy.\u003C/p\u003E\u003Cp\u003ECould someone please explain the indicated things?\u003C/p\u003E\u003Cp\u003EWhat does that component do?\u003C/p\u003E\u003Cp\u003EWhat are those bounds and why are they so huge? The one in the image for example is for a tiny part of the bay door mechanism indicated by the arrow in the middle. They don\u0027t even move that far.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/dqVGGQt.png\u0022 alt=\u0022dqVGGQt.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-18T23:40:23Z\u0022 title=\u002209/18/2014 11:40  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 18, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-16T18:16:49Z","Content":"\n\u003Cp\u003Ecast/receive shadows work just like standard mesh renderer; same for Materials list.\u003C/p\u003E\u003Cp\u003EKSP doesn\u0027t use Light Probes far as I know. I don\u0027t know exactly what it does or how it works.\u003C/p\u003E\u003Cp\u003EQuality is vertex weights and bones. Unity supports maximum of 4 bone influences per vertex. the setting that controls how many bones you want to influence a vertex in a mesh.\u003C/p\u003E\u003Cp\u003EUpdate when Offscreen will keep the mesh from being culled from rendering when bounds box is outside of camera\u0027s view cone. The bounds box is used to estimate whether a skinned mesh object is in view or not. if the bounds box is not in view, the entire mesh is not rendered, even if parts of it are still in view of camera. If some bit of the bounds box is inside the camera view cone, then the entire mesh is rendered and updated with whatever bone animation there is. I don\u0027t know how much of a performance hit it is to always render a skinned mesh object, but probably not a big deal for simple things. Bac9 did mention Kerbals are expensive to render because of skinned mesh.\u003C/p\u003E\u003Cp\u003Emesh and root bone are not really changed much, assigning wrong mesh to bones not intended for it is pointless.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-16T19:01:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EUpdate when Offscreen will keep the mesh from being culled from rendering when bounds box is outside of camera\u0027s view cone. The bounds box is used to estimate whether a skinned mesh object is in view or not. if the bounds box is not in view, the entire mesh is not rendered, even if parts of it are still in view of camera. If some bit of the bounds box is inside the camera view cone, then the entire mesh is rendered and updated with whatever bone animation there is.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo i guess it\u0027s safe to make some of those slightly smaller.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EI don\u0027t know how much of a performance hit it is to always render a skinned mesh object, but probably not a big deal for simple things. Bac9 did mention Kerbals are expensive to render because of skinned mesh.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat do you consider simple?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/qAF03PM.gif\u0022 alt=\u0022qAF03PM.gif\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Emesh and root bone are not really changed much, assigning wrong mesh to bones not intended for it is pointless.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t understand. What do I do here?\u003C/p\u003E\u003Cp\u003EAlso, how do you know so much about these things?\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-16T19:26:08Z","Content":"\n\u003Cp\u003EI\u0027d consdier skinned mesh for a procedural Wing simple. the mesh is maybe 2 dozen vertices and whole rig is 3 bones.\u003C/p\u003E\u003Cp\u003EWhat you have is kind of complex. the amount of mesh being driven by bones probably affects performance more than anything else. I\u0027d try just childing the armature pieces to the bone rig instead of skinning them, they are rigid parts anyway. it\u0027s just that it was easier to setup the constraints and animation in Blender and bake the animation instead of fiddling around with KSP\u0027s constraints no? unless the whole armature is a single piece of mesh?\u003C/p\u003E\u003Cp\u003Emesh and skeletons are tied together by the vertex numbers associated bone influences. essentially a big spreadsheet: vertex #222 is influenced by bone A @ 0.4; bone B @ 0.1; bone C @ 0.5. etc etc. For each frame the whole spreadsheet has to be processed to update the skinned mesh; reasonable to figure more vertex and more bones = bigger performance cost.\u003C/p\u003E\u003Cp\u003Eso in relation to mesh and root bone; not much you need to do. unless the object in the scene lost it\u0027s link to the import file, then you just go back and reassign the mesh and root bone back to what it\u0027s supposed to be. for a mesh to be interchangable for skinned mesh render; the vertex order of the meshes have to be exactly the same or you get bits stretch off into odd places.\u003C/p\u003E\u003Cp\u003EI\u0027m guessing most of the stuff, lot of people here know a lot more. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E I just happened to be messing with skinned mesh render last night because I noticed my pWings were being culled in SPH and in flight.\u003C/p\u003E\u003Cp\u003Eand yeah you can make those bounding boxes much smaller, bigger bounding boxes just means they are less likely to disappear when near the edge of camera view cone. for something small it\u0027s usually not a big deal.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-16T19:36:58Z\u0022 title=\u002209/16/2014 07:36  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 16, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-16T20:12:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Eit\u0027s just that it was easier to setup the constraints and animation in Blender and bake the animation instead of fiddling around with KSP\u0027s constraints no?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah. It\u0027s also easier to work with bones, instead of creating your own hierarchy in blender out of mesh objects and empties. But I guess I\u0027ll have to do it now.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-16T20:21:39Z","Content":"\n\u003Cp\u003Eback to the original question. the skinned mesh renderer component is added when you import mesh objects skinned to other objects (bone, mesh, dummies, etc), Blender calls it \u0022Armature modifier\u0022; max calls it \u0022Skin Modifier\u0022. I\u0027d just child the mesh to the bones in blender, exactly like how you\u0027d do it in Unity. or you can child them after import. If the meshes don\u0027t bend or stretch or whatever, childing/linking/parenting is the best way to do it.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-16T20:36:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EI\u0027d just child the mesh to the bones in blender, exactly like how you\u0027d do it in Unity\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat would be ideal but attempts to do so have resulted in the objects being transformed because the \u0022Child of\u0022 modifier makes them inherit bone transforms immediately.\u003C/p\u003E\u003Cp\u003EThere is another way to parent things in blender which allows you to keep the object in the same relative place, but it doesn\u0027t work with individual bones afaik.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-16T20:49:39Z","Content":"\n\u003Cp\u003Ecan\u0027t just drag/drop it under the bone like in Unity? non-inverse-mode? I guess bones are special type of objects and doesn\u0027t work exactly the same as regular object.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-16T21:26:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Ecan\u0027t just drag/drop it under the bone like in Unity? non-inverse-mode? I guess bones are special type of objects and doesn\u0027t work exactly the same as regular object.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot in Blender afaik. The armature is the object. Edit mode allows you do edit the individual bones, like you do with individual vertices on a mesh.\u003C/p\u003E\u003Cp\u003EI\u0027ll try exporting just the armature and drag/dropping the meshes in Unity.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-16T21:28:44Z\u0022 title=\u002209/16/2014 09:28  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 16, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-17T01:08:17Z","Content":"\n\u003Cp\u003EOk I see. In that case, exporting the armature out and childing the mesh objects in Unity should work just as well.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-18T23:38:25Z","Content":"\n\u003Cp\u003EIt works just fine. Exporting all the unchilded mesh objects in their starting positions together with the fbx animation, allows childing those objects without having to go through the torture of translation and rotation in Unity.\u003C/p\u003E\n"}]}