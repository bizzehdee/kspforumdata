{"TopicId":139398,"ForumId":15,"TopicTitle":"Forced node snap angle?","CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-05-09T16:17:52Z","PageNum":1,"Articles":[{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-05-09T16:17:52Z","Content":"\n\u003Cp\u003E\nI started a small experiment with dodecahedric\u00A0modular system.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022zP1t8S2.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/zP1t8S2.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe trouble is that nodes are perfectly normal to surface of dodecahedron and parts snap perfectly normal to surface too, but their rotation around that normal is... not perfect.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis brings 2 questions... no, 3 questions.\u00A0\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nIs there some way to force snap angle in VAB (around node normal)?\n\u003C/li\u003E\n\u003Cli\u003E\nIf not...\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/83952-nertea/\u0022 rel=\u0022\u0022\u003ENertea\u0027s\u003C/a\u003E Near Future Construction has docking port that snaps only at right angle.\u00A0How to replicate such behavior?\u00A0(I thought it were some strangely shaped colliders, but no, colliders in model are pretty basic.)\n\u003C/li\u003E\n\u003Cli\u003E\nIs there some\u00A0way to safely add 10-12 docking nodes on one part?\u00A0\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-09T16:27:58Z\u0022 title=\u002205/09/2016 04:27  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 9, 2016\u003C/time\u003E by Dr. Jet\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-09T16:34:30Z","Content":"\n\u003Cp\u003E\n1 - Nope, they obey only the normal only; the rotation around that normal is set arbitrarily;\u00A0 In order to have a rotation they would need to either use euler angles or quaternion for specification; currently they just use the vector as specified in the node config as the \u0027normal\u0027 or \u0027forward\u0027 for the node.\u00A0 Might be doable with a custom plugin that had extra parameters to force the part rotation after it was attached, but it would be a work-around at best.\n\u003C/p\u003E\n\u003Cp\u003E\n2 - Hmm... have not looked at those in recent years.\u00A0 Does it do the snapping while in the VAB, or is it part of the in-flight docking port alignment code that forces alignment before the docking ports will engage?\n\u003C/p\u003E\n\u003Cp\u003E\n3 - Yes, but each docking module needs its own uniquely named docking transform and control transform.\u00A0 I\u0027ve done quite a bit of experimentation on these and it was certainly possible in 1.05, have not tried again in 1.1.\u00A0 I had a custom docking port module that allowed for renaming of the \u0027undock\u0027 and \u0027control from here\u0027 labels to include a unique name so that you could tell which port you were undocking (otherwise they all just say \u0027undock\u0027).\u00A0 \u003Ca href=\u0022https://github.com/shadowmage45/SSTULabs/blob/master/Source/WIPModule/SSTUMultiDockingPort.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/shadowmage45/SSTULabs/blob/master/Source/WIPModule/SSTUMultiDockingPort.cs\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-05-09T16:40:37Z","Content":"\n\u003Cp\u003E\n1.\u00A0you can use transforms to specify attach nodes at precise angles, \u002BZ pointed at the object/node you want to attach to.\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/105766-friendly-psa-stack-node-fixes-in-10/#comment-1860523\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/105766-friendly-psa-stack-node-fixes-in-10/#comment-1860523\u003C/a\u003E\u00A0nodes specified this way will only attach at the angle of the transform in the MU.\u003Cbr\u003E\u003Cbr\u003E\n2. there\u0027s angle enforcement for ModuleDockingNode, you can set acquire/engage/snap angle deltas. e.g. begin acquiring when angle difference is less than X degrees; dock when less than Y degrees, only dock at Z degree increments. the settings you need should be\u00A0in Nertea\u0027s docking port config files\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-09T16:49:50Z\u0022 title=\u002205/09/2016 04:49  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 9, 2016\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-05-09T17:22:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222571130\u0022 data-ipsquote-contentid=\u0022139398\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462811670\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n48 minutes ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n1 - Nope, they obey only the normal only; the rotation around that normal is set arbitrarily;\u00A0 In order to have a rotation they would need to either use euler angles or quaternion for specification; currently they just use the vector as specified in the node config as the \u0027normal\u0027 or \u0027forward\u0027 for the node.\u00A0 Might be doable with a custom plugin that had extra parameters to force the part rotation after it was attached, but it would be a work-around at best.\n\u003C/p\u003E\n\u003Cp\u003E\n2 - Hmm... have not looked at those in recent years.\u00A0 Does it do the snapping while in the VAB, or is it part of the in-flight docking port alignment code that forces alignment before the docking ports will engage?\n\u003C/p\u003E\n\u003Cp\u003E\n3 - Yes, but each docking module needs its own uniquely named docking transform and control transform.\u00A0 I\u0027ve done quite a bit of experimentation on these and it was certainly possible in 1.05, have not tried again in 1.1.\u00A0 I had a custom docking port module that allowed for renaming of the \u0027undock\u0027 and \u0027control from here\u0027 labels to include a unique name so that you could tell which port you were undocking (otherwise they all just say \u0027undock\u0027).\u00A0 \u003Ca href=\u0022https://github.com/shadowmage45/SSTULabs/blob/master/Source/WIPModule/SSTUMultiDockingPort.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/shadowmage45/SSTULabs/blob/master/Source/WIPModule/SSTUMultiDockingPort.cs\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Col\u003E\u003Cli\u003E\nSad.\n\u003C/li\u003E\n\u003Cli\u003E\nIn flight. Nodes attract\u00A0to each other but don\u0027t snap, then you have to rotate with Q/E to\u00A0finally snap at 90\u00B0. I was sure it was made with colliders... until I imported a .mu in blender...\n\u003C/li\u003E\n\u003Cli\u003E\nGood... On the other hand... core is INSIDE... no clicks will be available...\u00A0\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222571143\u0022 data-ipsquote-contentid=\u0022139398\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462812037\u0022 data-ipsquote-userid=\u0022106805\u0022 data-ipsquote-username=\u0022nli2work\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n42 minutes ago, nli2work said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n1.\u00A0you can use transforms to specify attach nodes at precise angles, \u002BZ pointed at the object/node you want to attach to.\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/105766-friendly-psa-stack-node-fixes-in-10/#comment-1860523\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/105766-friendly-psa-stack-node-fixes-in-10/#comment-1860523\u003C/a\u003E\u00A0nodes specified this way will only attach at the angle of the transform in the MU.\u003Cbr\u003E\u003Cbr\u003E\n2. there\u0027s angle enforcement for ModuleDockingNode, you can set acquire/engage/snap angle deltas. e.g. begin acquiring when angle difference is less than X degrees; dock when less than Y degrees, only dock at Z degree increments. the settings you need should be\u00A0in Nertea\u0027s docking port config files\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Col\u003E\u003Cli\u003E\nIt\u0027s already done with empty objects and NODE{}s. I won\u0027t be able to precisely set normals otherwise.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nAah... So there are additional non-documented parameters... Interesting...\u00A0\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cpre style=\u0022font-family:monospace, Courier;color:#000000;border:1px solid rgb(221,221,221);padding:1em;line-height:1.3em;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;word-spacing:0px;background-color:rgb(249,249,249);\u0022\u003E\nMODULE\n{\n name = ModuleDockingNode\n referenceAttachNode = top\n nodeType = size2\n undockEjectionForce = 0.25\n minDistanceToReEngage = 3.5\n acquireForce = 3.5\n acquireTorque = 3.5\n acquireRange = 3.0\n captureRange = 1.5 \n}\u003C/pre\u003E\n\u003Cp\u003E\nThis one is from kerbal\u00A0wiki.\n\u003C/p\u003E\n\u003Cpre style=\u0022font-family:monospace, Courier;color:#000000;border:1px solid rgb(221,221,221);padding:1em;line-height:1.3em;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;word-spacing:0px;background-color:rgb(249,249,249);\u0022\u003E\nMODULE\n{\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0name = ModuleDockingNode\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0referenceAttachNode = top\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0nodeType = octo\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0captureMinRollDot = 0.99999\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0snapRotation = true\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0snapOffset = 45\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0This one is from Near Future Construction.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAgain some juicy UNDOCUMENTED features... Need to \u003Cs\u003Ecatch\u003C/s\u003E\u00A0learn them all!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-09T17:23:02Z\u0022 title=\u002205/09/2016 05:23  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 9, 2016\u003C/time\u003E by Dr. Jet\u003C/strong\u003E\n\u003C/span\u003E\n"}]}