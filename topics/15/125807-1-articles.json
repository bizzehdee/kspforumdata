{"TopicId":125807,"ForumId":15,"TopicTitle":"Updating Old Mod... Maybe having problem with ModuleControlSurface?","CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2015-11-18T09:40:14Z","PageNum":1,"Articles":[{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2015-11-18T09:40:14Z","Content":"\nSo, I\u0026#39;m trying to update my old mods to work with newer versions... and I haven\u0026#39;t touched them since around the .90 era.... \u003Cbr\u003E\n\u003Cbr\u003E\nI\u0026#39;m running into a VERY strange problem in the VAB. Of the parts in my Dreamchaser mod, the two wings, tail surface, nosecone and booster engine all have ModuleControlSurface modules (Yes, I know... booster engines and fixed noses shouldn\u0026#39;t be control surfaces... but it took some hacking to make a lifting body that launches at the nose of a rocket fly in stock aerodynamics.... so let\u0026#39;s skip over that bit of oddness and get to the bug.\u003Cbr\u003E\n\u003Cbr\u003E\nNow... all of the parts EXCEPT the wings are exhibiting the following behavior in the VAB - \u003Cbr\u003E\n\u003Cbr\u003E\nIf I drag them straight from the selection menu panel to the right place on the ship I\u0026#39;m assembling, and then don\u0026#39;t do any of the following things I\u0026#39;m going to list, I can launch and everything works perfectly... and the control surface is functioning correctly - i.e. the craft flies differently with the module commented out than with it included, so the module is doing it\u0026#39;s job.\u003Cbr\u003E\n\u003Cbr\u003E\nBUT.... if I do either of the following, breakage occurs.\u003Cbr\u003E\nIf I attempt to left click the part attached to the craft, i cannot select and drag the part away from the ship. \u003Cbr\u003E\nIf I shift click the craft to move the whole thing... the bugged part DOES NOT move with the craft. It stays right where it was. It DOES, however, remain fully opaque as if it was still a part of the craft... it\u0026#39;s noticeably different from when a part is detached from the ship and left in space.\u003Cbr\u003E\n\u003Cbr\u003E\nIf I\u0026#39;ve done either of those things, when I launch the craft the bugged part will not be present in the flight scene at all. Just gone.\u003Cbr\u003E\n\u003Cbr\u003E\nThe ONLY difference in the config notecard format between the wings, which don\u0026#39;t have the bug, and the other parts that do is that the wings actually have an animated part of the model with a transformName = obj_ctrlSrf defined, whereas the other parts, by virtue of being hacky control surfaces... don\u0026#39;t have any moving pieces so don\u0026#39;t have a transform defined. This didn\u0026#39;t used to be a problem, but... is this now a required parameter? I don\u0026#39;t have the original unity and blender files readily available... or i\u0026#39;d have added an empty transform and tested this myself... so it\u0026#39;s a hassle I don\u0026#39;t want to go through if it\u0026#39;s not the fix... \u003Cbr\u003E\n\u003Cbr\u003E\nAny other thoughts? Anyone else having problems with it?\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-11-18T14:36:44Z","Content":"\nWow, that\u0026#39;s really strange. \u003Cbr\u003E\n\u003Cbr\u003E\nI have tons of parts I haven\u0026#39;t touched since back in the 0.90 days that still work, so it\u0026#39;s not an issue with recompiling the MU files or whatever.\u003Cbr\u003E\n\u003Cbr\u003E\nI\u0026#39;ve noticed some oddities in the VAB though, when I\u0026#39;ve had saved crafts that incorporated parts that needed to have their attachment nodes changed, among other things. Are you building the new ships from scratch in the VAB, or starting with a saved vehicle? If it\u0026#39;s the latter, try starting fresh and see if it still does it.\u003Cbr\u003E\n\u003Cbr\u003E\nOne thing that changed since 0.90 is that the attachment node orientation matters, and is enforced by default, as an FYI.\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2015-11-18T18:58:39Z","Content":"\nNope, I\u0026#39;m starting fresh... and again, if I drag the part right into place and don\u0026#39;t left click on it again in the VAB, it functions perfectly in flight. I can even RIGHT click on it in the VAB and adjust menu items without causing the error. But if I left click, I can\u0026#39;t select it to move it, it doesn\u0026#39;t follow the ship if I drag it away from that spot (but doesn\u0026#39;t go translucent) and won\u0026#39;t be present in the flight scene. Craziest thing I\u0026#39;ve seen in a while. And it\u0026#39;s only the 3 parts with control surface modules... and removing the module fixes it.\u003Cbr\u003E\n\u003Cbr\u003E\nThe wings have a control surface module but also a lifting surface module... so I tried adding a lifting surface module to the other three parts, and it didn\u0026#39;t fix it. I also tried adding the line transformName = obj_ctrlSrf to each of the control surface modules on the hope that, while the transform didn\u0026#39;t exist and would generate a different error, that it might be enough to get them working, but no noticeable change. I\u0026#39;m going to try a clean install of KSP to make sure I\u0026#39;m not seeing the result of something else strange, and then I\u0026#39;m going to have to get Unity set up on my new machine and try to get my old hard drive working as an external to see if actually adding a transform helps... it\u0026#39;s the only difference I\u0026#39;m seeing at the moment!\u003Cbr\u003E\n\u003Cbr\u003E\nI SUPPOSE.... that since I\u0026#39;m still being lazy and using Firespitter for the wheels (gave up after a day of trying to make the stock wheel module work, but that was ages ago, and maybe I\u0026#39;m smarter now!) I could try firespitter\u0026#39;s wing module instead of the stock control surface module... but I really planned to eventually fix the wheels and clear the firespitter dependency instead of using it more!\u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\nEDITED UPDATE : Clean install of KSP did NOT fix anything.... continuing to investigate!\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-18T19:19:57Z\u0022 title=\u002211/18/2015 07:19  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 18, 2015\u003C/time\u003E by artwhaley\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-11-18T20:02:23Z","Content":"\nThat\u0026#39;s really strange. The only things I noticed changing with the stock control surfaces are just a few settings (actuatorSpeed, ctrlSurfaceRange). KSP 1.0.5 changed some things pretty considerably with contracts and heat, but not control surfaces.\u003Cbr\u003E\n\u003Cbr\u003E\nLooking at the 0.90-\u0026gt;1.0.X changes though, I see that \u0022transformName\u0022 field you\u0026#39;re referring to. I\u0026#39;ll bet this is it. Not specifying the right transforms for things that are expecting them can have [I]strange[/I] side-effects. I\u0026#39;d set that field to point to the name of one of your transforms in the model, so that it at least exists, and see what that does.\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2015-11-19T02:40:22Z","Content":"\nNecroBones, thanks for talking through it with me- digging through each part and pointing \u0022[COLOR=#333333]transformName =\u0022 at an actual null inside the .mu did in fact make it just work! \u003Cbr\u003E\n\u003Cbr\u003E\nThanks! Hope that helps someone else when they get confused! Really annoying error in that the symptoms have so little to do with the problem, given that the control surface is working fine even with the problem![/COLOR]\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-11-19T15:25:03Z","Content":"\nHey, glad it worked! Glad to help. :)\u003Cbr\u003E\n\u003Cbr\u003E\nYeah, there are a lot of things like that. Sometimes leaving a variable out is better than pointing it to something that doesn\u0026#39;t exist, and other things need to exist even if it still works with it pointed at something empty like that, and so on. It can be very confusing, and it\u0026#39;s different for each of the part modules.\n"}]}