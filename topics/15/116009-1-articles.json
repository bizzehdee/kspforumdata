{"TopicId":116009,"ForumId":15,"TopicTitle":"2 prefab particles, one part","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-15T22:50:14Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-15T22:50:14Z","Content":"Has anyone discovered a way to add 2 prefab\\_particle objects to a single part? I tried adding 2 of them with different transformName \u0027s under Effects/running\\_trust and KSP only recognizes the first one in the .cfg. Any ideas?\n\n    \t\trunning_thrust\t\t{\t\t\t\t\t\tAUDIO\t\t\t{\t\t\t\tchannel = Ship\t\t\t\tclip = sound_jet_deep\t\t\t\tvolume = 0.0 0.0\t\t\t\tvolume = 0.05 0.4\t\t\t\tvolume = 1.0 1.0\t\t\t\tpitch = 0.0 0.6\t\t\t\tpitch = 1.0 1.0\t\t\t\tloop = true\t\t\t}\t\t\tPREFAB_PARTICLE\t\t\t{\t\t\t\tprefabName = fx_smokeTrail_light\t\t\t\ttransformName = exhaustport\t\t\t\temission = 0.0 0.0\t\t\t\temission = 0.05 0.0\t\t\t\temission = 0.075 0.25\t\t\t\temission = 1.0 1.25\t\t\t\tspeed = 0.0 0.25\t\t\t\tspeed = 1.0 1.0\t\t\t\tlocalOffset = 0, 0, 1\t\t\t\tlocalRotation = 1, 0, 0, -90\t\t\t}\t\t\t\t\t\t\t\tPREFAB_PARTICLE\t\t\t{\t\t\t\tprefabName = fx_smokeTrail_light\t\t\t\ttransformName = exhaustport2\t\t\t\temission = 0.0 0.0\t\t\t\temission = 0.05 0.0\t\t\t\temission = 0.075 0.25\t\t\t\temission = 1.0 1.25\t\t\t\tspeed = 0.0 0.25\t\t\t\tspeed = 1.0 1.0\t\t\t\tlocalOffset = 0, 0, 1\t\t\t\tlocalRotation = 1, 0, 0, -90\t\t\t}\t\t\t\t\t\t\t}"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-07-16T13:31:06Z","Content":"I haven\u0027t tried it, no. But I\u0027m wondering why you need this. I\u0027m not criticizing, I\u0027m genuinely curious, because I love finding all sorts of interesting use-cases that Squad didn\u0027t think of. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nIn the case of multiple-nozzle engines, all of the transforms should be named the same, and it\u0027ll apply the effect to all of them. If it\u0027s also multi-mode, then you can have different transform names for the modes, and they can have separate effects blocks.\n\nAre you trying to have smoke coming from a place that\u0027s not directly associated with a nozzle? \n\nOne of the things that the stock Mammoth engine does (and I copied for SpaceY), is that it has a set of four \u0022thrustTransform\u0022 transforms that are associated with the individual nozzles, but a single \u0022smokePoint\u0022 transform in the middle (associated with the PREFAB\\_PARTICLE) so that it generates one smoke trail.\n\nEDIT: Oh right, you\u0027re doing boats (\\*slaps forehead\\*). If you\u0027re doing smoke from exhaust ports, it should apply it (I think) if you have multiple transforms with the same name.\n\n**Edited \u003Ctime datetime=\u00222015-07-16T13:33:45Z\u0022 title=\u002207/16/2015 01:33  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 16, 2015\u003C/time\u003E by NecroBones**"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-16T15:45:20Z","Content":"\u003E EDIT: Oh right, you\u0027re doing boats (\\*slaps forehead\\*). If you\u0027re doing smoke from exhaust ports, it should apply it (I think) if you have multiple transforms with the same name.\n\nExactly. I\u0027m toying around with the idea of a paddlewheeler and using ore for a fuel. Thot it would be kinda neat if I could replicate the twin stacks of old river boats and have the exhaust come out of them. The fx medium puts out enough smoke that it would look pretty decent. But, it\u0027s just not working.\n\nI\u0027ve tried them both with the same name, one animates.\n\nBoth with different transforms and names, one animates.\n\nI\u0027ve even rearranged the .cfg to look like this:\n\n    \t\trunning_thrust\t\t{\t\t\t\t\t\tPREFAB_PARTICLE\t\t\t{\t\t\t\tprefabName = fx_smokeTrail_medium\t\t\t\ttransformName = exhaustport\t\t\t\temission = 0.0 0.0\t\t\t\temission = 0.05 0.0\t\t\t\temission = 0.075 0.25\t\t\t\temission = 1.0 1.25\t\t\t\tspeed = 0.0 0.25\t\t\t\tspeed = 1.0 1.0\t\t\t\tlocalOffset = 0, 0, 1\t\t\t\tlocalRotation = 1, 0, 0, -90\t\t\t}\t\t\t\t\t\t\t}\t\trunning_thrust\t\t{\t\t\t\t\t\tPREFAB_PARTICLE\t\t\t{\t\t\t\tprefabName = fx_smokeTrail_medium\t\t\t\ttransformName = exhaustport\t\t\t\temission = 0.0 0.0\t\t\t\temission = 0.05 0.0\t\t\t\temission = 0.075 0.25\t\t\t\temission = 1.0 1.25\t\t\t\tspeed = 0.0 0.25\t\t\t\tspeed = 1.0 1.0\t\t\t\tlocalOffset = 0, 0, 1\t\t\t\tlocalRotation = 1, 0, 0, -90\t\t\t}\t\t\t\t\t\t\t}\n\nAnd still, only one animates.\n\nSince stock water doesn\u0027t appear to be something they paid a lot of attention to, I highly doubt they would have thot of someone making a paddlewheel boat for a space sim."},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-16T21:15:32Z","Content":"So I had this BRILLIANT idea on the way to work. I\u0027d just make two smoke stacks they could place anywhere and have an FX on each of them. Right. So I did this.\n\n    \tMODULE\t{ \t\tname = ModuleEnginesFX \t\tthrustVectorTransformName = thrustTransform \t\texhaustDamage = False \t\tignitionThreshold = 0.1 \t\tminThrust = 0 \t\tmaxThrust = 0 \t\theatProduction = 0\t\tfxOffset = 0, 0, 0.125\t\tpowerEffectName = running_thrust \t\tPROPELLANT \t\t{   \t\t\tname = LiquidFuel  \t\t\tratio = 0  \t\t\tDrawGauge = False \t\t}\t}\tEFFECTS\t{\t\t\t\trunning_thrust\t\t{\t\t\t\t\t\tPREFAB_PARTICLE\t\t\t{\t\t\t\tprefabName = fx_smokeTrail_medium\t\t\t\ttransformName = exhaustport\t\t\t\temission = 0.0 0.0\t\t\t\temission = 0.05 0.0\t\t\t\temission = 0.075 0.25\t\t\t\temission = 1.0 1.25\t\t\t\tspeed = 0.0 0.25\t\t\t\tspeed = 1.0 1.0\t\t\t\tlocalOffset = 0, 0, 1\t\t\t\tlocalRotation = 1, 0, 0, -90\t\t\t}\t\t\t\t\t\t\t}\t}\n\nAnd THAT was a mistake. A visit from the Kraken that required the entire save game to be deleted was the result.\n\nAnd I tried the MODEL\\_MULTI\\_PARTICLE, which does work. But I\u0027m not looking for 2 different effects. I would like them to be the same. The problem there is, one uses a prefab, which I want, and the other uses a model. If I could use 2 models or 2 prefabs, that would be great. I don\u0027t see it working though.\n\nI even tried 2 MODEL\\_MULTI\\_PARTICLE and again, one works, the other doesn\u0027t\n\n**Edited \u003Ctime datetime=\u00222015-07-16T22:32:47Z\u0022 title=\u002207/16/2015 10:32  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 16, 2015\u003C/time\u003E by Fengist**"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-07-16T22:58:43Z","Content":"\u003E \n\u003E So I had this BRILLIANT idea on the way to work. I\u0027d just make two smoke stacks they could place anywhere and have an FX on each of them. Right. So I did this.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E         MODULE    {         name = ModuleEnginesFX         thrustVectorTransformName = thrustTransform         exhaustDamage = False         ignitionThreshold = 0.1         minThrust = 0         maxThrust = 0         heatProduction = 0        fxOffset = 0, 0, 0.125        powerEffectName = running_thrust         PROPELLANT         {               name = LiquidFuel              ratio = 0              DrawGauge = False         }    }    EFFECTS    {                running_thrust        {                        PREFAB_PARTICLE            {                prefabName = fx_smokeTrail_medium                transformName = exhaustport                emission = 0.0 0.0                emission = 0.05 0.0                emission = 0.075 0.25                emission = 1.0 1.25                speed = 0.0 0.25                speed = 1.0 1.0                localOffset = 0, 0, 1                localRotation = 1, 0, 0, -90            }                            }    }\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E And THAT was a mistake. A visit from the Kraken that required the entire save game to be deleted was the result.\n\u003E \n\u003E And I tried the MODEL\\_MULTI\\_PARTICLE, which does work. But I\u0027m not looking for 2 different effects. I would like them to be the same. The problem there is, one uses a prefab, which I want, and the other uses a model. If I could use 2 models or 2 prefabs, that would be great. I don\u0027t see it working though.\n\u003E \n\u003E I even tried 2 MODEL\\_MULTI\\_PARTICLE and again, one works, the other doesn\u0027t\n\nIt\u0027s not precisely the same thing, I think this will work for you (Tiberions post specifically): [http://forum.kerbalspaceprogram.com/threads/48222-2-nozzles-in-a-engine](https://forum.kerbalspaceprogram.com/threads/48222-2-nozzles-in-a-engine)\n\nI\u0027ve done it with engines nozzles and the effects generate on each transform, so in theory it should work for what you\u0027re trying to do.\n\nEdit: Here\u0027s my Unity hierarchy. The game searches each GameObject path for the transform name, and will only apply whatever it is it\u0027s trying to do to the first object with the correct name then ignores the rest by default. By putting the transforms with identical names but under different game objects, it applies to all of the transforms. \n\n![5Hz0VJZ.png](http://i.imgur.com/5Hz0VJZ.png)\n\n**Edited \u003Ctime datetime=\u00222015-07-16T23:04:07Z\u0022 title=\u002207/16/2015 11:04  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 16, 2015\u003C/time\u003E by Randazzo**"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-07-18T20:36:27Z","Content":"It\u0027s also important to note that your prefab particles will need unique names. Something I just stumbled across. \n\n    PREFAB_PARTICLE            {                name = flamethrust2   // This                prefabName = fx_smokeTrail_light                 transformName = smokePoint                emission = 0.0 0.0                emission = 0.05 0.0                emission = 0.075 0.25                emission = 1.0 1.25                speed = 0.0 0.25                speed = 1.0 1.0                localOffset = 0, 0, 1            }"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-19T20:18:05Z","Content":"Ok, I spent 3 hours trying to get this right and still, one works the other doesn\u0027t. I\u0027ve used multiple names, multiple hierarchies, multiple locations. I\u0027ve added parts, taken off parts... I give up. Sorry, modding was fun at first. Now, the total lack of documentation from Squad is becoming rather aggravating. Any time you want to try to do something new you have to spend hours googling and experimenting and half the time, end up getting nowhere."},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-07-19T23:36:12Z","Content":"\u003E \n\u003E Ok, I spent 3 hours trying to get this right and still, one works the other doesn\u0027t. I\u0027ve used multiple names, multiple hierarchies, multiple locations. I\u0027ve added parts, taken off parts... I give up. Sorry, modding was fun at first. Now, the total lack of documentation from Squad is becoming rather aggravating. Any time you want to try to do something new you have to spend hours googling and experimenting and half the time, end up getting nowhere.\n\nI\u0027m having the same issue now, trying to get this to work on another engine. It works on the other one I put up there, but it just uses regular particle effects and ModuleEngine. It\u0027s not wanting to work with ModuleEngineFX, but I don\u0027t see what the difference is. If I get lucky and figure it out, I\u0027ll put up here.\n\nIn the meantime, don\u0027t give up on it, your mod is way too cool man."},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-07-20T13:45:34Z","Content":"Yeah, don\u0027t give up. Sometimes certain things won\u0027t work out, but you can change direction and do something else instead. It\u0027s all part of the process."},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-20T15:12:58Z","Content":"Ok, I finally got it working but now, I\u0027ve decided it\u0027s not what I really want. Imagine that. But, you were correct Rand, the name in the .cfg is how it separates them. I have 2 empty GameObjects in Unity, both are children of the PartTools root. I didn\u0027t have to put them on any mesh or add any mesh to them. They are their own objects. Under each is another empty object with the blue arrow pointing the direction of the prefab. Both have unique names. One is named exhaustport and the other exhaustport1.\n\n    ParttoolsObject    meshes \u0026 colliders    GameObject          exhaustport    GameObject          exhaustport1\n\nIn the .cfg, each prefab has it\u0027s own node and a unique name. Apparently the name does nothing except to identify them as separate entities. Without the names, it only recognizes the first one. I named them exhaust1 and exhaust2. Each transformName refers to the two object names in unity.\n\nThe .cfg looks like this:\n\n    \t\trunning_thrust\t\t{\t\t\t\t\t\tAUDIO\t\t\t{\t\t\t\tchannel = Ship\t\t\t\tclip = sound_jet_deep\t\t\t\tvolume = 0.0 0.0\t\t\t\tvolume = 0.05 0.4\t\t\t\tvolume = 1.0 1.0\t\t\t\tpitch = 0.0 0.6\t\t\t\tpitch = 1.0 1.0\t\t\t\tloop = true\t\t\t}\t\t\tPREFAB_PARTICLE\t\t\t{\t\t\t\tname = exhaust1\t\t\t\tprefabName = fx_smokeTrail_medium\t\t\t\ttransformName = exhaustport\t\t\t\temission = 0.0 0.0\t\t\t\temission = 0.05 0.0\t\t\t\temission = 0.075 0.25\t\t\t\temission = 1.0 1.25\t\t\t\tspeed = 0.0 0.25\t\t\t\tspeed = 1.0 1.0\t\t\t\tlocalOffset = 0, 0, 1\t\t\t\tlocalRotation = 1, 0, 0, -90\t\t\t}\t\t\tPREFAB_PARTICLE\t\t\t{\t\t\t\tname = exhaust2\t\t\t\tprefabName = fx_smokeTrail_medium\t\t\t\ttransformName = exhaustport1\t\t\t\temission = 0.0 0.0\t\t\t\temission = 0.05 0.0\t\t\t\temission = 0.075 0.25\t\t\t\temission = 1.0 1.25\t\t\t\tspeed = 0.0 0.25\t\t\t\tspeed = 1.0 1.0\t\t\t\tlocalOffset = 0, 0, 1\t\t\t\tlocalRotation = 1, 0, 0, -90\t\t\t}            }\t\t\n\nAnd the proof.\n\n![2exhaust.jpg](http://www.datainterlock.com/Kerbal/Shipyard/2exhaust.jpg)\n\nI assume, using this method you could have as many prefabs as you wanted.\n\nNow, I\u0027m off to crash ksp some more and try to make this a particle effect tied to the throttle using FXModuleAnimateThrottle (I tried this once and the animation failed to load). While this 2 particles, one part works and may be my backup plan, it ties the particles to the part where the engine is. If, say I have an exhaust stack and I want the user to be able to place it wherever they want and still get a particle effect based on throttle, I\u0027d have to place an engine on that part.\n\nWhich brings up the next question. Anyone have any experience with using either the unity or the ksp particle emitter. It would appear that simply adding the emitter to a gameobject doesn\u0027t work as KSP claims it can\u0027t find the model.\n\n**Edited \u003Ctime datetime=\u00222015-07-20T21:35:10Z\u0022 title=\u002207/20/2015 09:35  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 20, 2015\u003C/time\u003E by Fengist**"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-07-28T22:50:56Z","Content":"Unity\u0027s shuriken particle system won\u0027t work in KSP at the moment. You have to use KSP particle. After Unity 5 part tools that might change.\n\nKSP Particle is really the unity legacy particle system settings collected in one place. My engine tutorial covers some of KSP Particle tool. It should still apply since PartTools haven\u0027t changed so far with KSP 1.x.\n\n\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/0mArVHil_ek?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E"}]}