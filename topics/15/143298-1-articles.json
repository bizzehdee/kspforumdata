{"TopicId":143298,"ForumId":15,"TopicTitle":"The trouble with Klaws","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-07-07T15:14:44Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-07-07T15:14:44Z","Content":"\n\u003Cp\u003E\nOk, so I made this part quite a while back, a tug-boat bow for the Maritime Pack. \u00A0On it, I put a ModuleGrappleNode and a very basic animation. \u00A0Here\u0027s the\u00A0.cfg file:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\tname = FS_15MTugBow\n\tmodule = Part\n\tauthor = Fengist\n\tmesh = model.mu\n\tscale = 1\n\trescaleFactor = 1\n\tnode_stack_bottom = 0.0, -2.60375, 0.0, 0.0, -1.0, 0.0, 1\n\tnode_stack_top = 0.0, 0.0, -0.648, 0.0, 0.0, -1.0, 1\n\tTechRequired = generalConstruction\n\tentryCost = 2500\n\tcost = 380\n\tcategory = Structural\n\tsubcategory = 0\n\ttitle = Tug Boat Bow\n\tmanufacturer = Fengist\u0027s Shipyard\n\tdescription = One of our engineers dropped a torch on one of our styrofoam hulls and this is the result. We liked the pointy bit so we decided to sell it.\n\tattachRules = 1,0,1,1,0\n\tmass = 10\n\tdragModelType = default\n\tmaximum_drag = 0.2\n\tminimum_drag = 0.3\n\tangularDrag = 2\n\tcrashTolerance = 70\n\tbreakingForce = 50\n\tbreakingTorque = 50\n\tmaxTemp = 2000 // = 3000\n\tfuelCrossFeed = True\n\tbulkheadProfiles = size1, srf\n\tMODULE\n\t{\n\t\tname = ModuleGrappleNode\n\t\tnodeTransformName = dockTransform\n\t\tdeployAnimationController = 1\n\t\tnodeType = size1\n\t\tcaptureRange = 0.06\n\t\tcaptureMinFwdDot = 0.733\n\t\tcaptureMaxRvel = 1\n\t}\n\tMODULE\n\t{\n\t\tname = ModuleAnimateGeneric\n\t\tanimationName = clampAnim\n\t\tstartEventGUIName = Arm\n\t\tendEventGUIName = Disarm\n\t\tactionGUIName = Toggle Arming\n\t}\n\tMODULE\n\t{\n\t    name = TweakScale\n\t    type = surface\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe theory is: \u00A0Take the tugboat bow, run it into another ship, activate the Klaw and move the other ship to where you want it and release.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m able to activate the Klaw and grab the other ship with no problem. \u00A0The issue arises when I try to release. \u00A0Clicking the Disarm button doesn\u0027t change the button name back to Arm. \u00A0It remains \u0027Disarm.\u0027 And while the Klaw does release what I\u0027ve grabbed, that object then floats away. \u00A0And I don\u0027t mean float as in drift, I mean floats as in - becomes massless and starts to rise up into the atmosphere!\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve played with the transform orientation, captureRange and captureMinFwdDot and no real difference. \u00A0I\u0027ve also tested the sock Klaw on the front of this part and it has no problems grabbing and releasing other parts. \u00A0Mine turns them into baloons.\n\u003C/p\u003E\n\u003Cp\u003E\nAny ideas why?\n\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-07-07T16:52:18Z","Content":"\n\u003Cp\u003E\nThe Klaw can\u0027t be the Root part. there\u0027s minor bug in the way force is applied when you detach the claw such that if the Klaw is the root part of the vessel, you get NullRef and IndexOutofBounds error (you should see it in the debug log in game)\u00A0and it\u0027ll screw up the game and you get symptoms like you described and the Klaw will not attach to anything else.\u00A0Padishar logged the bug in the Tracker, but no telling when it\u0027ll be fixed.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-07T16:54:49Z\u0022 title=\u002207/07/2016 04:54  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 7, 2016\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-07-07T17:41:27Z","Content":"\n\u003Cp\u003E\nThat explains it \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/106805-nli2work/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022106805\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/106805-nli2work/\u0022 rel=\u0022\u0022\u003E@nli2work\u003C/a\u003E. \u00A0Always the man with the answer.\n\u003C/p\u003E\n\u003Cp\u003E\nI probably was making it the root part. \u00A0I\u0027ll change the config so that won\u0027t happen again.\n\u003C/p\u003E\n\u003Cp\u003E\nThank you. \u00A0Was driving me nuts.\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-07-07T18:58:57Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022line-height:1.6;\u0022\u003EEdit: You can ignore the below Nli\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022line-height:1.6;\u0022\u003EI should have known it needed a mesh collider, every damned thing else does. \u00A0The error below was caused because I had the Z scale set to 0 on the transform and the collider became 2D. Unity apparently abhors a 2D collider.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n------------------------------------------------------------\n\u003C/p\u003E\n\u003Cp\u003E\nHey \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/106805-nli2work/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022106805\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/106805-nli2work/\u0022 rel=\u0022external\u0022\u003E@nli2work\u003C/a\u003E, \u00A0Back a couple years ago, you made this post:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/78665-klaw-functionality-and-setup/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nDid I read correctly? \u00A0You put a mesh collider on the claw transform????\n\u003C/p\u003E\n\u003Cp\u003E\nI tried that and umm... I ended up floating in space with a lot of\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n[LOG 13:52:48.786] E is NaN! tA: 3.14159265358979, e = NaN\u003Cbr\u003E\n[ERR 13:52:48.812] Infinity or NaN floating point numbers appear when calculating the transform matrix for a Collider. Scene hierarchy path \u0022FS.15MTugBow/model/Tug 1/dockTransform\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nfollowed by explosion awesomness \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-07T19:44:48Z\u0022 title=\u002207/07/2016 07:44  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 7, 2016\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-07-07T19:45:57Z","Content":"\n\u003Cp\u003E\nno collider on GrappleNode. it should be an empty transform with Z pointing at the grab target. the part does need collider.\n\u003C/p\u003E\n\u003Cp\u003E\nI was thinking of this one.\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/140218-grappler-part-spams-aor-errors-on-release/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2016-07-07T19:47:21Z","Content":"\n\u003Cp\u003E\nActually, I couldn\u0027t get it to work right till I did put a mesh collider on the node.\n\u003C/p\u003E\n\u003Cp\u003E\nNow, it\u0027s almost perfect.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd I\u0027m not sure if it\u0027s the way I designed the part or the fact that my boats are built in the \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E, but the Y on my transform is pointed at the target.\n\u003C/p\u003E\n\u003Cp\u003E\nI dunno, but it works great now.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-07T19:53:59Z\u0022 title=\u002207/07/2016 07:53  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 7, 2016\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"}]}