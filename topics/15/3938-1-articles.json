{"TopicId":3938,"ForumId":15,"TopicTitle":"Some problems with Strut Connectors...","CreatedByName":"Technical Ben","CreatedById":10512,"CreatedDateTime":"2011-11-16T15:37:10Z","PageNum":1,"Articles":[{"CreatedByName":"Technical Ben","CreatedById":10512,"CreatedDateTime":"2011-11-16T15:37:10Z","Content":"\n\u003Cp\u003EI\\\u0027ve uploaded the files for anyone to check them. But I cannot get strut connectors to work if modded. To test, I even imported a standard one, and exported. Even though I did not change anything, they were all wrong in game. The strut bolts had shrunk (to 0.1 scale) and the strut was sticking out at the wrong angle. Now, I guess this is because Blender insists on applying these options to the export, but I have no idea how to stop it. Before you ask, yes I rotated the parts, but Blender seems to want to continue to add additional transforms to them too.\u003C/p\u003E\u003Cp\u003E\u0027SC.blend\u0027 is the default Strut Connector. As an example, that is how it imports, yet it fails to export back to the game. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u0027testcubesc\u0027 is my attempt at exporting a custom model.\u003C/p\u003E\u003Cp\u003EAny help would be much appreciated.\u003C/p\u003E\n"},{"CreatedByName":"GeorgeTirebiter","CreatedById":4778,"CreatedDateTime":"2011-11-17T09:32:57Z","Content":"\n\u003Cp\u003ELooking at the file for the strut connector, there\\\u0027s actually several things that are causing problems.\u003C/p\u003E\u003Cp\u003EThe default parts are built to a scale of 10 units/meter, but Blender\\\u0027s .dae importer forces the scene scale to 1 unit/meter and then applies individual scaling to each object in the file. This means you\\\u0027ll need to change the scene scale yourself. In the properties panel, select the Scene tab (the one with the icon that\\\u0027s a tiny sphere, cylinder, and light). Scroll down to the Units properties, set the Scale to 10 (i.e., the inverse of the scale setting in the part.cfg file), and make sure the units are set to Metric instead of None.\u003C/p\u003E\u003Cp\u003EThis will correct the scaling for most of the default parts, but it\\\u0027s not enough for these strut connectors because of a bug in Blender\\\u0027s .dae exporter. The problem is that the bolts at each end of the strut are parented to a geometry-less object (called an \u0027Empty\u0027 in Blender). These empties also get scaled on import, and that scaling incorrectly gets applied to their children during export.\u003C/p\u003E\u003Cp\u003EThere are a number of ways around this--I\\\u0027ll only describe one. In the 3D view, select one of the bolts. Remove the parent link by pressing ALT-P and choosing \u0027Clear Parent\u0027 (or look under Parent in the Object menu). Next, select the empty for that bolt (it\\\u0027s represented in the 3D viewport as the set of axes that\\\u0027s barely sticking out of the mesh) and press ALT-S to clear its scale. Finally, re-link the objects by first selecting the bolt, then hold SHIFT and click on the empty so they\\\u0027re both selected (in the correct order). Now press CTRL-P and choose \u0027Set Parent to Object.\u0027 Repeat for the other bolt.\u003C/p\u003E\u003Cp\u003EAs for the rotation, it\\\u0027s wrong because KSP assumes animated parts are created with the Y-axis as the vertical axis, while Blender exports parts with the Z-axis as vertical (this doesn\\\u0027t seem to be an issue for non-animated parts). Fortunately, this is easy to fix. Start by rotating everything so the Y-axis is up (this is only necessary if you rotated the part after import or you\\\u0027re making a new part from scratch). Export the collada file, then open it with a text editor. Near the top of the file, find the line \u0027\u0026lt;up_axis\u0026gt;Z_UP\u0026lt;/up_axis\u0026gt;\u0027 and change it to Y_UP. Now your strut connector should work in KSP.\u003C/p\u003E\n"},{"CreatedByName":"Technical Ben","CreatedById":10512,"CreatedDateTime":"2011-11-17T10:29:54Z","Content":"\n\u003Cp\u003EOk, thanks. I\\\u0027ve followed half of those things before, but not the other half. It\\\u0027s the inconsistency (IE errors in Collada export/import) that\\\u0027s really confusing. Because If you correct everything, only half is, and if you leave half of it, the other half breaks. ???\u003C/p\u003E\u003Cp\u003EEven worse, the likes of Sketcup strips the files important data. When importing from Sketchup, blender can totally trash a scene with parts in completely the wrong place.\u003C/p\u003E\n"}]}