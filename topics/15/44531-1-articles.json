{"TopicId":44531,"ForumId":15,"TopicTitle":"Control surfaces?","CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2013-08-31T23:02:36Z","PageNum":1,"Articles":[{"CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2013-08-31T23:02:36Z","Content":"\n\u003Cp\u003EI have made a custom control surface and it shows up in-game and produces lift but it doesn\u0027t move. Im sure there is some bits missing in unity like a tag, animation or something im missing. I just copied the stock small control surface cfg and used its parameters.\u003C/p\u003E\u003Cp\u003EAny help would be appreciated.\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2013-08-31T23:35:19Z","Content":"\n\u003Cp\u003EControlSurface is one of the last hold-outs using the old system from the DAE days. You just need to name your objects correctly and have the proper orientation.\u003C/p\u003E\u003Cp\u003EThe moving surface is named obj_ctrlSrf\u003C/p\u003E\u003Cp\u003EThe base part is named obj_base (not really sure that name is required, its just tradition maybe)\u003C/p\u003E\u003Cp\u003Eof course now you can just add your own mesh collider to each part instead of making a custom collider.\u003C/p\u003E\u003Cp\u003ETo get the moving surface to rotate properly, you must align its mesh with the X axis, so that its pivot point is on the line.\u003C/p\u003E\u003Cp\u003EHere\u0027s the shuttle tailfin as an example:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/NCZhV0J.png\u0022 alt=\u0022NCZhV0J.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EIn blender the inside of the edge is aligned on the X axis, then once in unity I rotate the whole thing -29 degrees to make the bottom edge of the fin align with the Y axis (Z in KSP) which makes it attach in the proper orienation without needing to adjust it with the WASD keys in the VAB.\u003C/p\u003E\n"},{"CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2013-09-01T06:31:00Z","Content":"\n\u003Cp\u003EWow, I would have never figured that one out. Thanks for the help. Naming the moving part \u0022obj_ctrlSrf\u0022 did the trick. Obj_base was not required.\u003C/p\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-12-27T02:13:16Z","Content":"\n\u003Cp\u003E\nI got trapped on this for a bit, so here\u0027s my learnings.\n\u003C/p\u003E\n\u003Cp\u003E\nBoth the non-control surface and the control surface should match their X-axis along the line of hinging.\u00A0 I spent a bit of time messing around trying to figure out why my control surface kept pivoting around the wrong axis.\u00A0 :-/\u00A0 It was pivoting around the axis of it\u0027s parent object\u0027s x-axis, not it\u0027s own X axis.\u00A0 Although, pivoting at it\u0027s own origin.\n\u003C/p\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-12-27T05:05:47Z","Content":"\n\u003Cp\u003E\nWell, I thought I was done.\u00A0 My control surfaces swing the wrong way.\u00A0 :-(\u00A0 I suspect we need to check the other axis.\n\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2016-01-02T19:55:29Z","Content":"\n\u003Cp\u003E\nJust made a fin in 1.0.5 and it seems the control surface no longer needs to be named \u0022obj_ctrlSrf\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nFrom Blender Hierarchy:\n\u003C/p\u003E\n\u003Cp\u003E\nFinGameObject\u003Cbr\u003E\n\u00A0\u00A0 \u00A0Fin\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0collider\u00A0\u00A0\u00A0\u00A0\u00A0 - collider for the whole fin\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u003Cstrong\u003Econtrol\u003C/strong\u003E\u00A0\u00A0\u00A0\u00A0 - mesh for the control surface\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0Mesh\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 - mesh for the fixed part of the fin\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd the cfg file:\n\u003C/p\u003E\n\u003Cp\u003E\nMODULE\u003Cbr\u003E\n{\u003Cbr\u003E\n\u00A0\u00A0 \u00A0name = ModuleControlSurface\u003Cbr\u003E\n\u00A0\u00A0 \u00A0useInternalDragModel = True\u003Cbr\u003E\n\u00A0\u00A0 \u00A0dragCoeff = 0.6\u003Cbr\u003E\n\u00A0\u00A0 \u00A0deflectionLiftCoeff = 0.61\u003Cbr\u003E\n\u00A0\u00A0 \u00A0ctrlSurfaceRange = 40\u003Cbr\u003E\n\u00A0\u00A0 \u00A0ctrlSurfaceArea = 2.3\u003Cbr\u003E\n\u00A0\u00A0 \u00A0actuatorSpeed = 25\u003Cbr\u003E\n\u00A0\u00A0 \u00A0transformName = \u003Cstrong\u003Econtrol\u003C/strong\u003E\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-02T19:59:24Z\u0022 title=\u002201/02/2016 07:59  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 2, 2016\u003C/time\u003E by wasml\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2016-01-03T01:39:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222346178\u0022 data-ipsquote-contentid=\u002244531\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221451764529\u0022 data-ipsquote-userid=\u0022120438\u0022 data-ipsquote-username=\u0022wasml\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, wasml said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nJust made a fin in 1.0.5 and it seems the control surface no longer needs to be named \u0022obj_ctrlSrf\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nFrom Blender Hierarchy:\n\u003C/p\u003E\n\u003Cp\u003E\nFinGameObject\u003Cbr\u003E\n\u00A0\u00A0 \u00A0Fin\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0collider\u00A0\u00A0\u00A0\u00A0\u00A0 - collider for the whole fin\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u003Cstrong\u003Econtrol\u003C/strong\u003E\u00A0\u00A0\u00A0\u00A0 - mesh for the control surface\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0Mesh\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 - mesh for the fixed part of the fin\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd the cfg file:\n\u003C/p\u003E\n\u003Cp\u003E\nMODULE\u003Cbr\u003E\n{\u003Cbr\u003E\n\u00A0\u00A0 \u00A0name = ModuleControlSurface\u003Cbr\u003E\n\u00A0\u00A0 \u00A0useInternalDragModel = True\u003Cbr\u003E\n\u00A0\u00A0 \u00A0dragCoeff = 0.6\u003Cbr\u003E\n\u00A0\u00A0 \u00A0deflectionLiftCoeff = 0.61\u003Cbr\u003E\n\u00A0\u00A0 \u00A0ctrlSurfaceRange = 40\u003Cbr\u003E\n\u00A0\u00A0 \u00A0ctrlSurfaceArea = 2.3\u003Cbr\u003E\n\u00A0\u00A0 \u00A0actuatorSpeed = 25\u003Cbr\u003E\n\u00A0\u00A0 \u00A0transformName = \u003Cstrong\u003Econtrol\u003C/strong\u003E\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYep, looks like you can now define which mesh is the control surface. You can choose not to, in which case I\u0027d guess it defaults to obj_ctrlSrf.\u00A0 Right click details of parts matched to cfg details is handy for figuring out what the values actually are.\u00A0 deflectionLiftCoeff seems to be surface area of the whole wing surface in m divided by 3.5ish.\u00A0 ctrlSurfaceArea appears to the the proportion of that that\u0027s a control surface.\u00A0 For instance if you have a 7sqr m wing, with 25% as control surface, deflectionLiftCoeff would be 2, and ctrlSurfaceArea would be 0.25.\u00A0 I think.\u00A0 Not 100% sure on any of that.\n\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2016-01-03T02:21:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ndeflectionLiftCoeff seems to be surface area of the whole wing surface in m divided by 3.5ish.\u00A0 ctrlSurfaceArea appears to the the proportion of that that\u0027s a control surface.\u00A0 For instance if you have a 7sqr m wing, with 25% as control surface, deflectionLiftCoeff would be 2, and ctrlSurfaceArea would be 0.25.\u00A0 I think.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAh - I saw ctrlSurfaceArea and assumed it meant what it said - thanks. I\u0027ll take a closer look at those cfg details and update.\n\u003C/p\u003E\n"},{"CreatedByName":"The_Doctor_John_Smith","CreatedById":133566,"CreatedDateTime":"2016-01-19T05:24:29Z","Content":"\n\u003Cp\u003E\nHey, does anybody know how to solve the animation inversion problem? I have a pair of elevators, one port and one starboard, that need to be separate as their meshes do not mirror. I have imported them and they work as expected except that the animation for the port elevator is inverted and moves the opposite way. Strangely enough, they control the aircraft normally so it seems to be an animation issue.\n\u003C/p\u003E\n"},{"CreatedByName":"jerethdatiger","CreatedById":156817,"CreatedDateTime":"2016-03-09T05:00:39Z","Content":"\n\u003Cp\u003E\nok while i was following the instructions , even though my mesh was aligned in my 3d app in unit everything is off again\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2016-03-09T15:20:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222369226\u0022 data-ipsquote-contentid=\u002244531\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453181069\u0022 data-ipsquote-userid=\u0022133566\u0022 data-ipsquote-username=\u0022The_Doctor_John_Smith\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/19/2016 at 0:24 AM, The_Doctor_John_Smith said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHey, does anybody know how to solve the animation inversion problem? I have a pair of elevators, one port and one starboard, that need to be separate as their meshes do not mirror. I have imported them and they work as expected except that the animation for the port elevator is inverted and moves the opposite way. Strangely enough, they control the aircraft normally so it seems to be an animation issue.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDo they actually face opposite to each other in your modeler, and in Unity? KSP expects everything to face certain ways. I\u0027d design them both as \u0022left side\u0022 parts as far as the coordinate system is concerned, and let the rotation happen in the VAB/SPH.\n\u003C/p\u003E\n"},{"CreatedByName":"The_Doctor_John_Smith","CreatedById":133566,"CreatedDateTime":"2016-03-12T05:16:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222449238\u0022 data-ipsquote-contentid=\u002244531\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457536836\u0022 data-ipsquote-userid=\u0022105424\u0022 data-ipsquote-username=\u0022NecroBones\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/9/2016 at 7:20 AM, NecroBones said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDo they actually face opposite to each other in your modeler, and in Unity? KSP expects everything to face certain ways. I\u0027d design them both as \u0022left side\u0022 parts as far as the coordinate system is concerned, and let the rotation happen in the VAB/SPH.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have done that technique for the rudder, but the models are left - right dependent.\n\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2016-03-12T14:17:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222453503\u0022 data-ipsquote-contentid=\u002244531\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457759815\u0022 data-ipsquote-userid=\u0022133566\u0022 data-ipsquote-username=\u0022The_Doctor_John_Smith\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, The_Doctor_John_Smith said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI have done that technique for the rudder, but the models are left - right dependent.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nRight, but I think you\u0027ll still get the best results if you design them both as \u0022left\u0022 wings in terms of how they\u0027re oriented in the Blender/Unity, and let the VAB rotate it back the way it needs to be. In other words, take your right wing, and flip it around in Blender and update the part CFG accordingly. It\u0027s worth a try.\n\u003C/p\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2016-03-13T03:03:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222453826\u0022 data-ipsquote-contentid=\u002244531\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457792268\u0022 data-ipsquote-userid=\u0022105424\u0022 data-ipsquote-username=\u0022NecroBones\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/12/2016 at 0:17 AM, NecroBones said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nRight, but I think you\u0027ll still get the best results if you design them both as \u0022left\u0022 wings in terms of how they\u0027re oriented in the Blender/Unity, and let the VAB rotate it back the way it needs to be. In other words, take your right wing, and flip it around in Blender and update the part CFG accordingly. It\u0027s worth a try.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve had an issue with fin control surfaces for my V-2 that is probably this.\u00A0 Pretty sure I did my fins as right side parts.\u00A0 Stoked if this is all it was.\u00A0 :-)\n\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s all it was, but now ....\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-23T21:42:36Z\u0022 title=\u002205/23/2016 09:42  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 23, 2016\u003C/time\u003E by TiktaalikDreaming\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"The_Doctor_John_Smith","CreatedById":133566,"CreatedDateTime":"2016-03-18T03:29:44Z","Content":"\n\u003Cp\u003E\nI have tried that.\u00A0It corrected the animation, but all that happened was that it started responding the wrong way. (i.e. opposite how it should have.) Currently, only the animation is reversed, but it functions normally.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-18T03:30:26Z\u0022 title=\u002203/18/2016 03:30  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 18, 2016\u003C/time\u003E by The_Doctor_John_Smith\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2016-05-23T22:02:26Z","Content":"\n\u003Cp\u003E\nI\u0027m working on some wings (with built in control surfaces, so using ModuleControlSurface), and they\u0027re set up the same way I set up other control surfaces.\n\u003C/p\u003E\n\u003Cp\u003E\nOutboard is Unity Local -X,\u00A0 Blender \u002BX.\u00A0 Forward/Up is UL\u002BZ, B\u002BZ.\u00A0 I\u0027ve started parenting control surfaces to an empty object with the right axis as this both works and makes setting said axis a lot easier.\u00A0 And they work.\u00A0 But when attached in the VAB/SPH in mirror symmetry, the control surfaces operate in opposite directions.\u00A0 Again, like most of these issues, it\u0027s just the animation of the control surfaces that\u0027s wrong.\u00A0 The wings provide control in the correct direction, but they look like they shouldn\u0027t.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyways, here\u0027s what it looks like, (all the control directions are pitch, no roll, even though it all looks like roll)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/cQheV/embed?background=ffffff\u0026amp;text=1a1a1a\u0026amp;link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPS: I grepped out all the stock squad notes on DeflectionLiftCoeff, and it\u0027s exactly the listed surface area divided by 3.5 in all cases.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd, as soon as I\u0027ve described the issue I find the offending config.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nmirrorRefAxis = 0, 0, -1\n\u003C/p\u003E\n\u003Cp\u003E\nWhich, once removed (like virtually all the control surface parts) it\u0027s happy.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-23T22:07:30Z\u0022 title=\u002205/23/2016 10:07  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 23, 2016\u003C/time\u003E by TiktaalikDreaming\u003C/strong\u003E\n\u003C/span\u003E\n"}]}