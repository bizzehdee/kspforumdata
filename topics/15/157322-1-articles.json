{"TopicId":157322,"ForumId":15,"TopicTitle":"Trailer Hitch Grapple Device","CreatedByName":"SchwinnTropius","CreatedById":165170,"CreatedDateTime":"2017-03-04T19:34:43Z","PageNum":1,"Articles":[{"CreatedByName":"SchwinnTropius","CreatedById":165170,"CreatedDateTime":"2017-03-04T19:34:43Z","Content":"\n\u003Cp\u003E\nI started modding for KSP a few weeks ago for my own edu-tainment, and I have an idea for a part I want to make but not sure where or how to start.\n\u003C/p\u003E\n\u003Cp\u003E\nI want to make a\u00A0trailer hitch part (akin to semi-truck/trailer hitches) that can give free movement once it joins two parts (akin to the stock klaw). I imported the klaw into Blender but I\u0027m so overwhelmed by the sheer number of objects in the klaw model that it\u0027s difficult to decipher what objects do what. The klaw\u0027s config has FXModuleLookAtConstraint with almost as many references. I\u0027m only looking to move one object with my part idea to keep things simple for the moment while still emulating the klaw\u0027s free joint movement.\n\u003C/p\u003E\n\u003Cp\u003E\nSo how can I set this up to do what I want to do? Is it manageable for a newbie, or am I in over my head?\n\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2017-03-04T19:58:23Z","Content":"\n\u003Cp\u003E\nHi, the fx constraint modules function by simulating animation of a part, for instance, you want to have a ram opening a claw, well the look\u00A0 at and constraints when setup correctly allow the ram to function without actually having to create a physical animation all you animate is the opening claw.\u00A0 For your purposes you only need the part that is the Base and trigger\u00A0 , ignore all the constraint stuff ( btw for future ref the constraint look at axis is Z\u002B. in that two objects must have the z\u002B axis rotated to face each other in order for it to work)\n\u003C/p\u003E\n\u003Cp\u003E\nThis can be modeled in two simple parts an outer and an inner, the inner part is the actual attachment part and is the part that will move when you click arm\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 For a good easy to follow example of how it works when not a claw, check out the SM Marine mod, in the tugboat kit there are two parts, one a pushbar, and the other a truck tyre style fender, both are module wise and as far as the game knows claws,\u00A0 these parts allow the tugs to attach and drag things much bigger things around .\n\u003C/p\u003E\n\u003Cp\u003E\nDo note that I\u0027ve tried this method with vertical\u00A0 fifth wheel lookalikes on my up coming SM AFV mod but it\u0027s no good that way around as you can\u0027t get enough force to trigger the grab , without batting the trailer across the airfield.\u00A0 The best way is to mount it horizontally\u00A0 on the rear of the tow vehicle\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022aorbm1D.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022http://i.imgur.com/aorbm1D.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-04T20:00:20Z\u0022 title=\u002203/04/2017 08:00  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 4, 2017\u003C/time\u003E by SpannerMonkey(smce)\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SchwinnTropius","CreatedById":165170,"CreatedDateTime":"2017-03-06T19:45:46Z","Content":"\n\u003Cp\u003E\nSo I took Spanner\u0027s comment above and ran with it, building and testing and tweaking for the past couple days (real life interrupted me too), and finally arriving at a working solution. But now I have a new small question: how can I increase the pivot range of a klaw-type device? I tried adding a line listed as Public Attributes from \u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_module_grapple_node.html\u0022 rel=\u0022external nofollow\u0022\u003Ethis page\u003C/a\u003E\u00A0in my part config but it didn\u0027t seem to work. I\u0027m guessing pivotRange only works under to hood and is not changeable, but I\u0027m hoping I\u0027m wrong. Can it be changed?\n\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2017-03-07T01:29:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222977838\u0022 data-ipsquote-contentid=\u0022157322\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488829546\u0022 data-ipsquote-userid=\u0022165170\u0022 data-ipsquote-username=\u0022SchwinnTropius\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, SchwinnTropius said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI tried adding a line listed as Public Attributes from \u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_module_grapple_node.html\u0022 rel=\u0022external nofollow\u0022\u003Ethis page\u003C/a\u003E\u00A0in my part config but it didn\u0027t seem to work.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nJust curious as I\u0027m doing some more for something else , what did you put as a value for that range?\u00A0 and how did you put it\u00A0 eg\u00A0 1.0 or 1\u00A0 ?\n\u003C/p\u003E\n"},{"CreatedByName":"SchwinnTropius","CreatedById":165170,"CreatedDateTime":"2017-03-07T02:38:13Z","Content":"\n\u003Cp\u003E\nI tried 90, 180 and 360 for pivotRange, didn\u0027t occur to me to\u00A0try using \u002B/-1.0 as rotation value because the sample value for pivotRange on the page had 30 in it (actual value is \u002230f\u0022, if F means something appropriate here). Should I use 1.0 for the value?\n\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2017-03-07T02:50:03Z","Content":"\n\u003Cp\u003E\nF is for float and floats are usually expressed as 1.0,\u00A0 0.1 rather than integers 1,2,3\u00A0 etc \u00A0 but\u00A0 I\u0027m sure it\u0027d read 1 as 1 , just wont be able to read 180, 90 etc\u00A0 and would like show an error in the log for an\u00A0 incorrect format.\u00A0 Golden rule 390276.3\u00A0 \u0022\u003Cem\u003Ewhen tinkering , check the logs first\u003C/em\u003E\u0022, a lot of the time if you search for the part name you\u0027ll find the answers in that same log\u00A0\u00A0\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI doubt they\u0027d have left it 180 or above as that would usually mean the object being grappled would clip into the grappling object, and either be very bad, or look awful. But\u00A0 30deg\u00A0 yeah I can see that working most of the time,\u00A0 so perhaps 30.0 or is that now a double?? i dunno it\u0027s code stuff \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"paulprogart","CreatedById":174587,"CreatedDateTime":"2017-03-07T06:58:48Z","Content":"\n\u003Cp\u003E\nThe config system doesn\u0027t care whether you put 1 or 1.0 as it\u0027ll know what type it\u0027s expecting and convert it properly.\u00A0 It\u0027ll likely choke on 1f or 1.0f though... I\u0027ve never seen a config value use it.\u00A0 That\u0027s only for writing the value in C# code.\u00A0 (For the record, in C#, 1 is an int which will convert to a float, but 1.0 is a double which will not.\u00A0 1f and 1.0f are both floats and are equivalent.)\n\u003C/p\u003E\n\u003Cp\u003E\nAnd yeah unfortunately just because pivotRange is in the API docs doesn\u0027t mean it\u0027s loadable via part config.\u00A0 It may have been omitted (whether accidentally or deliberately is anyone\u0027s guess).\u00A0 Though to be sure I would try a value like 29, or something else that\u0027ll be apparent when you load your part but is still fairly close to 30, just in case the value is clamped to a more narrow range.\u00A0 Failing that, it would need to be set via code... hmm unless maybe ModuleManager could do it\u003Cs\u003E, but I haven\u0027t got into \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E yet so I don\u0027t know whether it operates at the config level or the code level\u003C/s\u003E... nope, I got curious and looked, it\u0027s config level.\u00A0 Oh well.\n\u003C/p\u003E\n\u003Cp\u003E\nHey maybe there should be a dedicated \u0022Ask a Coder\u0022 thread for part-maker questions like this... dunno where to put it though (here or the Plug-In forum?).\u00A0 My main thing is coding but luckily I sometimes dabble in model making so I like like to poke in here from time to time in case I can learn stuff.\u00A0 \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-07T07:16:30Z\u0022 title=\u002203/07/2017 07:16  AM\u0022 data-short=\u00227 yr\u0022\u003EMarch 7, 2017\u003C/time\u003E by paulprogart\u003C/strong\u003E\n\u003Cbr\u003EMM correction, also C# int/float clarification\n\u003C/span\u003E\n"},{"CreatedByName":"SchwinnTropius","CreatedById":165170,"CreatedDateTime":"2017-03-07T14:33:29Z","Content":"\n\u003Cp\u003E\nI had a nagging suspicion my solution would be in coding. As\u00A0I\u0027ve only started modding, I haven\u0027t gotten into learning anything related to code outside of \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patches.\u00A0I would like to learn code but not quite yet. When I do start coding, I\u0027m sure I can find great help in the Plugin Forum.\n\u003C/p\u003E\n\u003Cp\u003E\nAs for my hitch idea, I\u0027ll experiment so more, see how the stock klaw, Spanner\u0027s parts and my hitch compare and see what I can do. Thank you guys for your help so far. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"SchwinnTropius","CreatedById":165170,"CreatedDateTime":"2017-03-09T03:51:47Z","Content":"\n\u003Cp\u003E\nSo I\u0027ve done some digging and testing I\u0027ve figured something out: pivotRange is a configurable stat, and it only accepts values with decimals (e.g. 20.0) which I thought I tested but apparently not. Also, any value is accepted and is used as degrees (expected), though any value above 180 gives nearly unlimited swing. So it will be useful for my purpose, as I had hoped.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, thanks again for your help \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/174587-paulprogart/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022174587\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/174587-paulprogart/\u0022 rel=\u0022\u0022\u003E@paulprogart\u003C/a\u003E\u00A0and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0026amp;do=hovercard\u0022 data-mentionid=\u002250907\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0022 rel=\u0022\u0022\u003E@SpannerMonkey(smce)\u003C/a\u003E\u00A0for your help on this matter. As for me, my pivotRange = 359.9 because I can. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"paulprogart","CreatedById":174587,"CreatedDateTime":"2017-03-09T05:09:14Z","Content":"\n\u003Cp\u003E\nThat\u0027s weird because I have used config values without decimals in my own add-ons and it takes them fine, but this is for config settings rather than parts, so perhaps the part .cfg loader is stricter.\u00A0 (ConfigNode is a behemoth of a class, who knows how consistent it is.)\n\u003C/p\u003E\n\u003Cp\u003E\nAnyhow, glad you got it, sounds like a neat little mod.\u00A0 (BTW I love the thread title... it\u0027s like one of those cheeky long names the Mythbusters would use when they weren\u0027t allowed to say brand names.)\n\u003C/p\u003E\n"},{"CreatedByName":"SchwinnTropius","CreatedById":165170,"CreatedDateTime":"2017-03-17T18:58:22Z","Content":"\n\u003Cp\u003E\nSo after a bit more playing around with what little free time I had this week, I still seem to be having the same issue. I read the wiki on the Advanced Grabbing Unit (when it worked, seems to be empty at this time) that the pivot on the grabber can bend at the specified pivotRange (what I was testing with an MK1 Command Pod) but the pivot cannot twist (what I\u0027ve been trying to do with\u00A0\u003Ca href=\u0022https://kerbalx.com/SchwinnTropius/Cargo-Trailer\u0022 rel=\u0022external nofollow\u0022\u003Ethis trailer\u003C/a\u003E)*. I even moved the attach point on the model in Unity to see if that made a difference (doesn\u0027t appear to). This frustrates and saddens me. The good part is that the models for the male and female hitch parts hook well enough together, due to my custom colliders, that they will hold together under \u0022normal\u0022 driving conditions, though I haven\u0027t tested\u00A0them further than that. For now, I\u0027ll just tidy up the models. In the meantime, any other ideas on how I can get the connection to work like real hitches? Maybe a plugin like Kerbal Attachment System?\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: *relevant wiki bit about Klaw pivot*\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOnce the AGU is attached, its claw\u0027s pivot can be toggled. The pivot is locked whenever armed and not attached, but can then be unlocked by right-clicking the AGU and choosing\u00A0Free Pivot. While freed,\u00A0reaction wheels\u00A0or\u00A0\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E\u00A0can be used to alter the craft\u0027s pitch and yaw (from the AGU\u0027s perspective) relative to the target, but not roll; the claw turns, not twists.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEDIT2: I tinkered with the grappleNode orientation in Unity, but the game doesn\u0027t care about that orientation except in part alignment before it attaches. It never occurred to me until this morning to rotate the whole model to make it work. ModuleGrappleNode apparently uses the\u00A0\u002BY axis to determine how the pivot behaves once something attaches. Rotating the model in Unity to have it\u0027s \u002BY\u00A0to point toward the global -Z\u00A0will make the hitch behave as I intend. And like Spanner mentioned above, the trailer does clip\u00A0into the truck and looks weird, though there seems to be no ill effects beyond that.\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT3: Not sure if my description reflects what\u0027s in my head, maybe pics in this\u00A0\u003Ca href=\u0022http://imgur.com/a/UE8Ul\u0022 rel=\u0022external nofollow\u0022\u003EImgur album\u003C/a\u003E will help.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-18T20:47:37Z\u0022 title=\u002203/18/2017 08:47  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 18, 2017\u003C/time\u003E by SchwinnTropius\u003C/strong\u003E\n\u003Cbr\u003Ewiki suddenly works after posting, quoted relevant bits; Unity and editors rotation info\n\u003C/span\u003E\n"}]}