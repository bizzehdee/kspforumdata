{"TopicId":119571,"ForumId":15,"TopicTitle":"Blender .Mu import and removing double vertices = weird artifacts","CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-08-28T11:46:53Z","PageNum":1,"Articles":[{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-08-28T11:46:53Z","Content":"\n\u003Cp\u003EHi\u003C/p\u003E\u003Cp\u003EI am messing around in Blender getting the hang of it and I imported some models to customize them a bit for my purposes.\u003C/p\u003E\u003Cp\u003EBut every model I imported has double vertices which is a pain to work with obviously. So I deleted all doubled ones using [A] to select all vertices and then selected the remove double function in the [w] menu.\u003C/p\u003E\u003Cp\u003EAnd then the model turned to ... the smoothing looks weird\u003C/p\u003E\u003Cp\u003Ebefore\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/zEs2i5R.png\u0022 alt=\u0022zEs2i5R.png\u0022\u003E\u003C/p\u003E\u003Cp\u003Eafter\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/u2HhpDq.png\u0022 alt=\u0022u2HhpDq.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EHere some other screenshots of this ingame. \u003C/p\u003E\u003Cp\u003EDoes anybody know what this is and how I can get rid of it?\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/b6vya\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-15T15:02:46Z\u0022 title=\u002209/15/2015 03:02  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 15, 2015\u003C/time\u003E by VentZer0\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2015-08-28T11:53:15Z","Content":"\n\u003Cp\u003ETry turning off \u0022Smooth Shading\u0022. In the first picture, left hand side, middle screen, there\u0027s two buttons, \u0022Smooth\u0022 and \u0022Flat\u0022. With the cockpit selected click \u0022Flat\u0022. That\u0027s the first step, try it and see what you get. (I don\u0027t know for sure but I have a hunch, and if it works I know how to make it smooth in-game)\u003C/p\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-08-28T11:59:55Z","Content":"\n\u003Cp\u003EI already tried doing this and thought it might make a difference, but it doesn\u0027t. Smooth or flat shading in Blender does not affect how the model looks in KSP\u003C/p\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2015-08-28T12:06:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022VentZer0\u0022 data-cite=\u0022VentZer0\u0022\u003E\u003Cdiv\u003EI already tried doing this and thought it might make a difference, but it doesn\u0027t. Smooth or flat shading in Blender does not affect how the model looks in KSP\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s in unity, yes. But does it fix the problem with the weird shading in Blender? (This seems to be the issue.)\u003C/p\u003E\u003Cp\u003EIf your artifacts are in-game, what you\u0027re going to want to do is switch the imported shaders in Unity to calculated ones. When you add in a model in Unity, click the model in the assets bar, go to the inspector tab, (or one of the tabs on the same bar), and click through until you find the \u0022Normals and Tangents\u0022 bit, and set it to these values:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/9E4oy0E.png\u0022 alt=\u00229E4oy0E.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-08-28T12:25:03Z","Content":"\n\u003Cp\u003EYes the flat shading looks ok just flat and coarse, which is to be expected. \u003C/p\u003E\u003Cp\u003EHmm I haven\u0027t done that with unity yet, I just used the import export function of that blender script. Will try and report.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EOk I have it in Unity and it has its texture and stuff, it renders fine without any weird artifacts, but how do I export it into a .mu from within unity?\u003C/p\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2015-08-28T12:36:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022VentZer0\u0022 data-cite=\u0022VentZer0\u0022\u003E\u003Cdiv\u003EYes the flat shading looks ok just flat and coarse, which is to be expected. \u003Cp\u003EHmm I haven\u0027t done that with unity yet, I just used the import export function of that blender script. Will try and report.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EOk I have it in Unity and it has its texture and stuff, it renders fine without any weird artifacts, but how do I export it into a .mu from within unity?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re going to need KSP PartTools, the dev\u0027s custom part exporter.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/65356-0-23-PartTools\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/65356-0-23-PartTools\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe version number seems out of date but it\u0027s still fine AFAIK.\u003C/p\u003E\u003Cp\u003EExtract the .zip, then place the PartTools folder inside of your Unity project\u0027s Assets folder. That should begin the import process. After that, you\u0027re going to want to select your GameData directory (I believe the plugin automatically creates a window). Now it\u0027s time to select your model, and add a few things. The first is a collider if your model does not have one by default. Go to the Inspector tab with the model in the editor window (the 3d one) selected, and click \u0022Add Component\u0022 at the bottom. Click Physics -\u0026gt; Mesh Collider, and in the new menu select \u0022Convex\u0022.\u003C/p\u003E\u003Cp\u003EThen go to KSP -\u0026gt; Part Tools and change your export directory, and model name to something recognizable. Export it, and then put it in the folder of the original part. (You might just export to the folder.) Go into the .cfg and change the Model line from \u0022model.mu\u0022 to whatever you changed the exported model\u0027s name to.\u003C/p\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-08-28T12:43:44Z","Content":"\n\u003Cp\u003EI have part tools installed already because I was also doing IVAs ... but I dont see ANY export option aynwhere, all I can do is export as a .unitypackage\u003C/p\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2015-08-28T12:48:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022VentZer0\u0022 data-cite=\u0022VentZer0\u0022\u003E\u003Cdiv\u003EI have part tools installed already because I was also doing IVAs ... but I dont see ANY export option aynwhere, all I can do is export as a .unitypackage\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhoops, sorry, that might be confusing. On the Part Tools menu (the script component) there\u0027s a button that says \u0022Write\u0022. Click it.\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-08-28T12:59:03Z","Content":"\n\u003Cp\u003EAt the top level of your GameObject for the part, you need to have the Part Tools component added there. Just installing it alone isn\u0027t enough. If the GameObject doesn\u0027t have it, you can click \u0022Add Component\u0022, then select KSP-\u0026gt;Part Tools.\u003C/p\u003E\u003Cp\u003EOnce added, you should see the field to pick a filename for the .MU, select a format for textures, and hit \u0022Write\u0022.\u003C/p\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2015-08-28T13:01:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NecroBones\u0022 data-cite=\u0022NecroBones\u0022\u003E\u003Cdiv\u003EAt the top level of your GameObject for the part, you need to have the Part Tools component added there. Just installing it alone isn\u0027t enough. If the GameObject doesn\u0027t have it, you can click \u0022Add Component\u0022, then select KSP-\u0026gt;Part Tools.\u003Cp\u003EOnce added, you should see the field to pick a filename for the .MU, select a format for textures, and hit \u0022Write\u0022.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, this. This is what I was trying to say but looking back it wasn\u0027t \u003Cem\u003Ewhat\u003C/em\u003E I said.\u003C/p\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-08-28T13:01:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwhip\u0022 data-cite=\u0022Starwhip\u0022\u003E\u003Cdiv\u003EWhoops, sorry, that might be confusing. On the Part Tools menu (the script component) there\u0027s a button that says \u0022Write\u0022. Click it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt does after I clicked add component ^^\u003C/p\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-08-28T14:03:59Z","Content":"\n\u003Cp\u003EOk I got it to work now, BUT the cockpit is upside down ingame, its weird ... I tried rotating it by 180\u00C3\u201A\u00C2\u00B0 in unity and saved it again, nothing... still upside down... dafuq? \u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/9lH9O\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003Emeh fixed it, gameobject and the mesh itself where rotated 180\u00C3\u201A\u00C2\u00B0\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-28T14:19:53Z\u0022 title=\u002208/28/2015 02:19  PM\u0022 data-short=\u00228 yr\u0022\u003EAugust 28, 2015\u003C/time\u003E by VentZer0\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"martinezfg11","CreatedById":59995,"CreatedDateTime":"2015-08-28T15:21:54Z","Content":"\n\u003Cp\u003EOk, so for the first picture you originally posted, the reason you get those smoothing artifacts after removing the double verts is because I used the edge split modifier in Blender to make sharp edges. Once you merged those verts the smoothing took effect on the whole model.\u003C/p\u003E\u003Cp\u003EEdit: so if you want to modify a mesh, then you would merge the verts. But you would have to re-apply the splits in order to get sarp edges once again.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-28T15:24:31Z\u0022 title=\u002208/28/2015 03:24  PM\u0022 data-short=\u00228 yr\u0022\u003EAugust 28, 2015\u003C/time\u003E by martinezfg11\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Stoney3K","CreatedById":139954,"CreatedDateTime":"2015-08-28T20:40:51Z","Content":"\n\u003Cp\u003EI believe the part\u0027s \u0022zero\u0022 orientation is defined in your Blender model, not in Unity.\u003C/p\u003E\u003Cp\u003EIf you flip the part 180 degrees in the Unity editor, you are only flipping it in \u0022world coordinates\u0022 just like you would by rotating it in the SPH. It\u0027s still upside down relative to its local coordinate system.\u003C/p\u003E\u003Cp\u003EYou can fix that by flipping the part in Blender and re-exporting it.\u003C/p\u003E\u003Cp\u003EI am not sure how Unity handles split verts to make sharp edges. I\u0027ve had a few exports to and from Sketchup which looked good (and with sharp edges) in Blender but had the normals pointing the wrong way when imported into Unity.\u003C/p\u003E\u003Cp\u003EThe correct way to make sharp edges is to mark them as sharp in Blender, or mark the associated faces as \u0027flat\u0027. Switching to a different shader isn\u0027t going to be of much use.\u003C/p\u003E\n"},{"CreatedByName":"Eskandare","CreatedById":62742,"CreatedDateTime":"2015-08-29T01:23:53Z","Content":"\n\u003Cp\u003EYou need to go into edit mode and select the whole model using the A key. Then select smooth or flat shading.\u003C/p\u003E\n"},{"CreatedByName":"mariohm1311","CreatedById":114131,"CreatedDateTime":"2015-08-29T11:00:08Z","Content":"\n\u003Cp\u003EI\u0027m pretty sure you had applied an Edge Split modifier before. That modifier doubles the edges that are supposed to be sharp to make them appear like that. When you removed doubles, you removed those edges, and your model started looking wrong.\u003C/p\u003E\n"}]}