{"TopicId":92459,"ForumId":15,"TopicTitle":"Using multiple textures on one Mesh","CreatedByName":"Socke","CreatedById":104842,"CreatedDateTime":"2014-12-10T13:27:12Z","PageNum":1,"Articles":[{"CreatedByName":"Socke","CreatedById":104842,"CreatedDateTime":"2014-12-10T13:27:12Z","Content":"\n\u003Cp\u003EI\u0027m reworking some easy fueltanks now, and to reduce RAM usage I wanted to put the top and bottom portions one one texture file and all the sides one one texture file. \u003C/p\u003E\u003Cp\u003EI have already made two UV layouts of the first tank for the two textures:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/fwMKfij.png\u0022 alt=\u0022fwMKfij.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/lpL94Ak.png\u0022 alt=\u0022lpL94Ak.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003ENow I have pretty much no idea on how to assign parts of the mesh to the two textures. I have read some blender tutorials using multiple materials, but they were no real help. I could kinda make it work in blender (though I was not sure what I was actually doing), but ocne I tried getting the thing into Unity the material names and textures were all messed up.\u003C/p\u003E\u003Cp\u003ESo my question is how to get multiple textures on one mesh in Blender and how to set the textures up in Unity. Some examples would be greatly appreciated.\u003C/p\u003E\u003Cp\u003EThanks for any help.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-12-10T15:29:20Z","Content":"\n\u003Cp\u003Eput the two UVs into a single texture. you\u0027ve got plenty of space for both. It\u0027ll be more efficient in game than two materials. you can then adjust the UVs for the various tanks to sample different areas, sides sample the side area of the texture, ends sample the end area of the texture, so you have 1 texture for all your tanks.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/8P8F4yF.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/8P8F4yF.jpg\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-10T15:33:48Z\u0022 title=\u002212/10/2014 03:33  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 10, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Socke","CreatedById":104842,"CreatedDateTime":"2014-12-10T15:40:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Eput the two UVs into a single texture. you\u0027ve got plenty of space for both. It\u0027ll be more efficient in game than two materials. you can then adjust the UVs for the various tanks to sample different areas, sides sample the side area of the texture, ends sample the end area of the texture, so you have 1 texture for all your tanks.\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/8P8F4yF.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/8P8F4yF.jpg\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe room I left was on purpose, since I haven\u0027t modeled the smaller tanks yet. They will be filled.\u003C/p\u003E\u003Cp\u003EI found the problem I had too, I was using two UV layouts, which apparently doesn\u0027t work.\u003C/p\u003E\u003Cp\u003ENow I still have a problem, once I export my mdoel to KSP it looks like this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/espRyoX.png\u0022 alt=\u0022espRyoX.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt only shwos the parts that are mapped on the top texture, but with the side texture applied.\u003C/p\u003E\u003Cp\u003EThis is how the mesh is set up in unity:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/nqvMWzo.png\u0022 alt=\u0022nqvMWzo.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-12-10T15:59:13Z","Content":"\n\u003Cp\u003EGotcha. KSP only reads 1st material on a mesh object. you have to split the tank into as many mesh objects as materials you use. 1 UV set per mesh as well. That said, unless the smaller tanks will have completely different looks, in which case it\u0027s probably more efficient to group the smaller tanks into another texture.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-10T16:05:17Z\u0022 title=\u002212/10/2014 04:05  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 10, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Socke","CreatedById":104842,"CreatedDateTime":"2014-12-10T16:08:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003EGotcha. KSP only reads 1st material on a mesh object. you have to split the tank into as many mesh objects as materials you use. 1 UV set per mesh as well. That said, unless the smaller tanks will have completely different looks, in which case it\u0027s probably more efficient to group the smaller tanks into another texture. I would just sample smaller areas of the main texture on the smaller tanks. e.g. a half length tank would sample the ends as the full size tank, but only half the side texture area.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOoh, that explains my problems of course.\u003C/p\u003E\u003Cp\u003EThe sides of the smaller tanks are supposed to look different, only the top and bottom parts will be reused across all of them. \u003C/p\u003E\u003Cp\u003EHm, If I put it all on a 1024x1024 texture the quality is drastically reduced, So I\u0027ll probably have to go with a single huge 2048x2048x texture. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks for your help!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-10T18:51:23Z\u0022 title=\u002212/10/2014 06:51  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 10, 2014\u003C/time\u003E by Socke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-11T16:57:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Socke\u0022 data-cite=\u0022Socke\u0022\u003E\u003Cdiv\u003EOoh, that explains my problems of course.\u003Cp\u003EThe sides of the smaller tanks are supposed to look different, only the top and bottom parts will be reused across all of them. \u003C/p\u003E\u003Cp\u003EHm, If I put it all on a 1024x1024 texture the quality is drastically reduced, So I\u0027ll probably have to go with a single huge 2048x2048x texture. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks for your help!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHoly cow, 2k x 2k? That\u0027s pretty huge. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt\u0027s really simple to just have the ends be separate mesh objects in blender, and then they can use the shared end-cap texture. Just make sure they use different materials, and then in Unity you just have to assign the right textures and shaders to each mesh-object.\u003C/p\u003E\u003Cp\u003EThis is a really useful thing to keep in mind for cases like this. Separate mesh objects also can be useful if you want to have more than one emissive, or different shaders for different parts of the model.\u003C/p\u003E\n"},{"CreatedByName":"Socke","CreatedById":104842,"CreatedDateTime":"2014-12-11T17:12:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NecroBones\u0022 data-cite=\u0022NecroBones\u0022\u003E\u003Cdiv\u003EHoly cow, 2k x 2k? That\u0027s pretty huge. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EIt\u0027s really simple to just have the ends be separate mesh objects in blender, and then they can use the shared end-cap texture. Just make sure they use different materials, and then in Unity you just have to assign the right textures and shaders to each mesh-object.\u003C/p\u003E\u003Cp\u003EThis is a really useful thing to keep in mind for cases like this. Separate mesh objects also can be useful if you want to have more than one emissive, or different shaders for different parts of the model.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn the end I was able to put it all into one 1024x1024 texture \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/lULEqC8.png\u0022 alt=\u0022lULEqC8.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003EThis texture is used by six fuel tank models \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m still a bit puzzled about the shared texture thing. The MODEL section of the cfg files looks like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODEL{\u003Cbr\u003E\tmodel = SockeAA/Parts/F25/model\u003Cbr\u003E\ttexture = tank.mbm, SockeAA/Parts/F100/tank.mbm\u003Cbr\u003E\ttexture = NRM.mbm, SockeAA/Parts/F100/NRM.mbm\u003Cbr\u003E\t}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe texture lines are the same in all of them but I still need to have the texture saved six times, and according to the debug menu it also is loaded six times. How would I fix this?\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-12-11T17:36:50Z","Content":"\n\u003Cp\u003Eyou need a dummy texture in the part folders for MODEL{}. \u003C/p\u003E\u003Cp\u003EI export the proper MBM textures with the 1st part; move the MBMs to the centralized folder for the pack; export the part again but with different texture format like PNG, resize those PNGs to 1x1; one color PNG is 1KB. now export the rest of the parts into their part folders, texture format doesn\u0027t matter at this point. copy the 1x1 dummies to all the subsequent parts that share the same texture; and delete the full size textures in those part folders. \u003C/p\u003E\u003Cp\u003Efor future part updates, export one of the parts with format you use for actual textures, move those into the centralized location and replace the old textures, and that updates textures for all the parts that share the texture. other part updates (new mesh or UV) just export to a different format than what you use for the dummy textures, and delete the new exported textures, keeping the dummies in the part folders.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-11T17:39:44Z\u0022 title=\u002212/11/2014 05:39  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 11, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Socke","CreatedById":104842,"CreatedDateTime":"2014-12-11T17:59:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Eyou need a dummy texture in the part folders for MODEL{}. \u003Cp\u003EI export the proper MBM textures with the 1st part; move the MBMs to the centralized folder for the pack; export the part again but with different texture format like PNG, resize those PNGs to 1x1; one color PNG is 1KB. now export the rest of the parts into their part folders, texture format doesn\u0027t matter at this point. copy the 1x1 dummies to all the subsequent parts that share the same texture; and delete the full size textures in those part folders. \u003C/p\u003E\u003Cp\u003Efor future part updates, export one of the parts with format you use for actual textures, move those into the centralized location and replace the old textures, and that updates textures for all the parts that share the texture. other part updates (new mesh or UV) just export to a different format than what you use for the dummy textures, and delete the new exported textures, keeping the dummies in the part folders.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, thank you. I assume I need a dummy for the normalmap too then, right?\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-12-11T18:17:09Z","Content":"\n\u003Cp\u003Eyou need one for every texture (Normal; Diffuse; Emissive) referenced by MODEL{}, file name has to be exact match. those that aren\u0027t shared can stay in the part folder and not reference them in MODEL{}. KSP loads everything (used or not) in GameData; and MODEL{} texture replacement happens during part compile phase. if a texture isn\u0027t being replaced using MODEL{}, KSP will look for it in the same folder as the MU. I haven\u0027t had any problems doing things that way, but a few has run into issues where MODEL{} doesn\u0027t replace textures correctly preventing parts from compiling correctly.\u003C/p\u003E\u003Cp\u003Eanother option is export everything with dummy texture to begin with. and your MODEL{} would look something like this\u003C/p\u003E\u003Cp\u003EMODEL{\u003C/p\u003E\u003Cp\u003Emodel = model path\u003C/p\u003E\u003Cp\u003Etexture = dummyDIF, Diffuse texture path\u003C/p\u003E\u003Cp\u003Etexture = dummyNRM, Normal texture path\u003C/p\u003E\u003Cp\u003Etexture = dummyEMI, Emissive texture path\u003C/p\u003E\u003Cp\u003E//Only necessary if other than 0,0,0 and 1,1,1\u003C/p\u003E\u003Cp\u003Epostion = x,y,z\u003C/p\u003E\u003Cp\u003Erotation = x,y,z\u003C/p\u003E\u003Cp\u003Escale = x,y,z\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-11T18:43:33Z\u0022 title=\u002212/11/2014 06:43  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 11, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"}]}