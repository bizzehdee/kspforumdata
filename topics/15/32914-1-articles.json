{"TopicId":32914,"ForumId":15,"TopicTitle":"Lighted windows","CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2013-06-14T07:09:44Z","PageNum":1,"Articles":[{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2013-06-14T07:09:44Z","Content":"\n\u003Cp\u003EI\u0027m relatively new to the KSP part modding scene, although I have managed to create some station modules with (reasonably) working airlocks and EVA handles.\u003C/p\u003E\u003Cp\u003EMy next challenge is lighted windows toggleable in-game, similar to what Lack of LLL and udk_lethal_d0se have on their parts. How would I go about implementing this - are they animations with emissives, or something else?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-16T23:11:07Z\u0022 title=\u002206/16/2013 11:11  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 16, 2013\u003C/time\u003E by sumghai\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Lack","CreatedById":47978,"CreatedDateTime":"2013-06-14T07:31:09Z","Content":"\n\u003Cp\u003EYes, they\u0027re done via animations. You change the Emissive.alpha and then use \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleLight\u003Cbr\u003E        lightName = lightname\u003Cbr\u003E\tuseAnimationDim = true\u003Cbr\u003E\tlightBrightenSpeed = 1\u003Cbr\u003E\tlightDimSpeed = 1\u003Cbr\u003E\tresourceAmount = 0.01\u003Cbr\u003E\tanimationName = animationname\u003Cbr\u003E\tuseResources = true\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eto reference it in the .cfg\u003C/p\u003E\u003Cp\u003EYou may also want to add a light entity in Unity, that\u0027ll cost more processing power to run though. You do that by having the animation also change the intensity and range of the light.\u003C/p\u003E\u003Cp\u003EHere\u0027s a quick picture I did for someone else:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/bHAkbQ8.jpg\u0022 alt=\u0022bHAkbQ8.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt\u0027s missing quite a few points, such as selecting the parent object (where you put the part-tools) when making the new animation, but you get the idea. \u003C/p\u003E\u003Cp\u003EI was meant to write a proper tutorial about this, but kind of forgot. I should get round to that really.\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2013-06-15T06:58:24Z","Content":"\n\u003Cp\u003EMucho gracias, Lack - I managed to implement the lighted windows after a few hours of head-scratching.\u003C/p\u003E\u003Cp\u003ESome extra tips/observations for those who may come across this thread:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E1)\u003C/strong\u003E \u003Cstrong\u003E[iGNORE - See \u003C/strong\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/35778-Lighted-windows?p=453238\u0026amp;viewfull=1#post453238\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003ELack\u0027s workaround\u003C/strong\u003E\u003C/a\u003E\u003Cstrong\u003E] \u003C/strong\u003E\u003Cstrong\u003EMake sure your meshes are *direct* children of the PartTools GameObject in Unity\u0027s Hierachy\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EAs a Blender user, I had the habit of directly dragging my .blend file under the aforementioned GameObject to import my meshes, resulting in the meshes being grandchildren (i.e. \u003Cstrong\u003EGameObject \u0026gt; *blender_filename* \u0026gt; desired_meshes\u003C/strong\u003E). While this usually worked for most of my parts, I found that the nested hierarchy would prevent you from expanding the materials you wish to animate for the emissives.\u003C/p\u003E\u003Cp\u003EThe solution is to manually drag the meshes directly under the GameObject itself (i.e \u003Cstrong\u003EGameObject \u0026gt; desired_meshes\u003C/strong\u003E), which allows the animation properties in the parent GameObject to actually be able to access the desired meshes.\u003C/p\u003E\u003Cp\u003ENote that this does break any prefab connections between Unity and Blender, so if you make any changes to the mesh / UVs in Blender, you\u0027ll have to manually reimport your model(s).\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E2)\u003C/strong\u003E \u003Cstrong\u003EPart windows lit in VAB/SPH part preview thumbnails list? Here\u0027s the solution\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve noticed that in Lack\u0027s canopy windows, when the part is previewed in the VAB/SPH part thumbnails list, all the windows are lit (although actually dragging the part out into the building area results in the expected dimmed windows). I suspect that the parts preview shows the model in its final end-of-animation stage.\u003C/p\u003E\u003Cp\u003EIf you\u0027re a stickler like me and want the part preview thumnails to also show dimmed windows, then define the initial alpha value of the emissive color to 0, and have the animation keyframes change it as usual - this will dim the lights in the thumbnail, but you\u0027ll still be able to toggle and animate the lights as normal during flight.\u003C/p\u003E\u003Cp\u003E(PS If someone could verify my observations on their own setups, that would be great)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-16T01:34:16Z\u0022 title=\u002206/16/2013 01:34  AM\u0022 data-short=\u002211 yr\u0022\u003EJune 16, 2013\u003C/time\u003E by sumghai\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Razchek","CreatedById":62645,"CreatedDateTime":"2013-06-15T08:12:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sumghai\u0022 data-cite=\u0022sumghai\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003E1)\u003C/strong\u003E \u003Cstrong\u003EMake sure your meshes are *direct* children of the PartTools GameObject in Unity\u0027s Hierachy\u003C/strong\u003E\u003Cp\u003EAs a Blender user, I had the habit of directly dragging my .blend file under the aforementioned GameObject to import my meshes, resulting in the meshes being grandchildren (i.e. \u003Cstrong\u003EGameObject \u0026gt; *blender_filename* \u0026gt; desired_meshes\u003C/strong\u003E). While this usually worked for most of my parts, I found that the nested hierarchy would prevent you from expanding the materials you wish to animate for the emissives.\u003C/p\u003E\u003Cp\u003EThe solution is to manually drag the meshes directly under the GameObject itself (i.e \u003Cstrong\u003EGameObject \u0026gt; desired_meshes\u003C/strong\u003E), which allows the animation properties in the parent GameObject to actually be able to access the desired meshes.\u003C/p\u003E\u003Cp\u003ENote that this does break any prefab connections between Unity and Blender, so if you make any changes to the mesh / UVs in Blender, you\u0027ll have to manually reimport your model(s).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI encountered this problem on my first animation. Instead of breaking the prefab simply create/assign the animation on the Model, then to animate each mesh simply select them in the hierarchy.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPartToolsObject\u003Cbr\u003E-Model \u0026lt;- Create Animation here.\u003Cbr\u003E--Mesh \u0026lt;- Modify variables after clicking this,\u003Cbr\u003E--Mesh2 \u0026lt;- or this,\u003Cbr\u003E--Mesh3 \u0026lt;- .. or this.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat way you can expand each component on each mesh. The problem still remains where you cannot expand each component/mesh when you have the model selected.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-15T08:15:19Z\u0022 title=\u002206/15/2013 08:15  AM\u0022 data-short=\u002211 yr\u0022\u003EJune 15, 2013\u003C/time\u003E by Razchek\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Lack","CreatedById":47978,"CreatedDateTime":"2013-06-15T09:43:51Z","Content":"\n\u003Cp\u003EYeah, sumghai, you\u0027re observations are pretty spot on.\u003C/p\u003E\u003Cp\u003ERe: \u003Cstrong\u003E1).\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EYou can tackle the not being able to select the drop down icon problem by holding down the left-mouse button, and dragging it from left to right across the row (towards the drop down icon), when it goes grey you can release and the menu will expand properly. Essentially the trigger for the drop-down isn\u0027t where the icon is visually, but it\u0027s still there. Or you can do what Razchek recommends, that works as well.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E2). \u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI didn\u0027t discover that till later so have left it as is for the majority of the parts, my cupola parts have it set up so the icon isn\u0027t lit though.\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2013-06-16T01:41:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lack\u0022 data-cite=\u0022Lack\u0022\u003E\u003Cdiv\u003EYou can tackle the not being able to select the drop down icon problem by holding down the left-mouse button, and dragging it from left to right across the row (towards the drop down icon), when it goes grey you can release and the menu will expand properly. Essentially the trigger for the drop-down isn\u0027t where the icon is visually, but it\u0027s still there.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks again, Lack - my part now retains the Blender/Unity prefab connection, while the animation can still be configured in Unity / played in-game.\u003C/p\u003E\u003Cp\u003EIn my particular case, I had a mesh in my model hierarchy dubbed \u0022viewport_1\u0022 - in the original situation described in my last post, I would not have been able to open the materials instance in the animator. However, using a slight variation of Lack\u0027s workaround, I \u003Cem\u003Edragged\u003C/em\u003E viewport_1 from my main hierarchy to a position just below the corresponding item\u0027s materials instance in the animator - this has the effect of \u0022forcing\u0022 drop-down icon open.\u003C/p\u003E\u003Cp\u003EI suspect this is a minor bug with Unity, but at least there\u0027s a workaround for it now.\u003C/p\u003E\n"},{"CreatedByName":"Errol","CreatedById":118622,"CreatedDateTime":"2014-08-17T03:13:32Z","Content":"\n\u003Cp\u003EDoes a mod exist that adds lighting to all the stock part windows?\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-08-17T16:00:57Z","Content":"\n\u003Cp\u003EI don\u0027t think that\u0027s possible. Part models have to be compiled specifically with emission shaders and on/off animations and I\u0027m convinced stock models are not compiled this way.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2015-01-08T18:31:35Z","Content":"\n\u003Cp\u003EThanks guys, this helped me a lot, though I replaced the .cfg code with the Space Plane plus one:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleAnimateGeneric\u003Cbr\u003E\tanimationName = CockpitStandardLight\u003Cbr\u003E\tactionGUIName = Toggle Lights\u003Cbr\u003E\tstartEventGUIName = Lights On\u003Cbr\u003E\tendEventGUIName = Lights Off\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI did that because I wanted a simple light toggle without the RGB sliders, which I am not going to use for now. However, the right click menu has an entry reading \u003Cem\u003EStatus:\u003C/em\u003E and it shows \u003Cem\u003ELocked\u003C/em\u003E when the light is on or off, and \u003Cem\u003EMoving\u003C/em\u003E when in between. This seems to be the result of ModuleAnimateGeneric.\u003C/p\u003E\u003Cp\u003EAny idea how I can remove that \u003Cem\u003EMoving\u003C/em\u003E bit?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-08T19:07:02Z\u0022 title=\u002201/08/2015 07:07  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 8, 2015\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"}]}