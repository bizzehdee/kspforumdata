{"TopicId":126154,"ForumId":15,"TopicTitle":"Ambient Occlusion","CreatedByName":"fairy","CreatedById":152892,"CreatedDateTime":"2015-11-22T11:55:24Z","PageNum":1,"Articles":[{"CreatedByName":"fairy","CreatedById":152892,"CreatedDateTime":"2015-11-22T11:55:24Z","Content":"\n[COLOR=#000000]I make parts and launchers for KSP as a hobby and for my own personal use, but I noticed my parts lack the minor detailing that most modders have on their parts. I did a little research and found that in addition to just being good at making textures, they also used Ambient Occlusion. I tried it out following these steps:[/COLOR]\u003Cbr\u003E\n\u003Cbr\u003E\n[COLOR=#000000]- AO bake on a white-ish material.\u003Cbr\u003E\n- Export as PNG.\u003Cbr\u003E\n- Open AO Map in Gimp/Photoshop and paste it onto a layer above the main texture.\u003Cbr\u003E\n- Set the AO layer to multiply.\u003Cbr\u003E\n- Voila?\u003Cbr\u003E\n\u003Cbr\u003E\nTo be honest, it does not come out all that great. Yes there are some details and what not, but I think I might not be making the AO map correctly. It doesn\u0026#39;t look as good as I would like it to.\u003Cbr\u003E\n\u003Cbr\u003E\nAre there any tutorials out there on how to make good AO maps? I am mostly interested in how to do it in Blender for KSP parts. If any modder out there wants to share their tips and tricks, that would be greatly appreciated.[/COLOR]\n"},{"CreatedByName":"landeTLS","CreatedById":97925,"CreatedDateTime":"2015-11-22T16:19:20Z","Content":"\nHi. Texture baking is a very powerful tool. From your post it is not so easy to tell in what way it is not coming out well (as there are several ways it can come out bad)\u003Cbr\u003E\n\u003Cbr\u003E\nThe first and most common way is that the ao is grainy/spotty. This is due to insufficient samples(i havent used blender in ages but the setting for that is in the baking menu i think)\u003Cbr\u003E\n\u003Cbr\u003E\nThe second way is that there are black splotches/hard outlines around where meshes are intersecting (in blender i believe the only way to get around this is to eather detach the intersecting objects(this is called exploding) and bake seperatly or paint out the artifacts in post)\u003Cbr\u003E\n\u003Cbr\u003E\nThe third way is that there are too much/not enough \u0022shadows\u0022(this is caused by a too high/too low distance and/or spread parameter, again i dont remember how to set this in blender but its there)\u003Cbr\u003E\n\u003Cbr\u003E\nThere are also other map types that are useful for texturing that are not much used here on the ksp forums. Those are materialcolor, curvature , cavity/concavity and dirt. Of those i mainly use curvature as it can be used to get procedural/semiprocedural worn edges and materialcolor for blocking out pure colors for the base layer. But i dont remember if blender has the ability to bake those.\u003Cbr\u003E\n\u003Cbr\u003E\nActually baking ao(\u002Bothers) from your lowpoly to itself is the \u0022worst\u0022 way to do it. Baking from a hipoly will give a much better result (but takes much more effort) \u003Cbr\u003E\nhope this helps\u003Cbr\u003E\nMaybe someone who uses blender will outline the process for you\n"},{"CreatedByName":"fairy","CreatedById":152892,"CreatedDateTime":"2015-11-22T16:44:12Z","Content":"\nI guess my bake settings are not optimal. I can get rid of the grainyness by upping the samples, but the hard shadows(?) are still very much visible, even though none of the UVs are intersecting. I\u0026#39;m not happy with where the shadows/dark areas are projected on the model after AO baking. It is almost as though there are issues with the lighting, or the \u0022world\u0022 settings. I honestly don\u0026#39;t know what the issues is, or how to fix it, as this is my first crack at AO baking.\u003Cbr\u003E\n\u003Cbr\u003E\nI\u0026#39;m interested in trying out the other mapping techniques you mentioned, so I\u0026#39;ll give those a try and see what the outcome is.\n"},{"CreatedByName":"CobaltWolf","CreatedById":105588,"CreatedDateTime":"2015-11-22T16:49:20Z","Content":"\nI just paint it in on the textures by hand haha\n"},{"CreatedByName":"InsaneDruid","CreatedById":137849,"CreatedDateTime":"2015-11-22T16:53:30Z","Content":"\n[URL]http://www.katsbits.com/tutorials/blender/baking-ambient-occlusion.php[/URL]\u003Cbr\u003E\n\u003Cbr\u003E\nIt would help to see your model and the textures you baked. Otherwise, the things that landeTLS said are THE common problem spots.\u003Cbr\u003E\n\u003Cbr\u003E\nJust another neat trick: you usually have to set a new texture when baking: make this as huge as possible!. Then resample it in Photoshop/Gimp to your texture size. This way you increase the quality.\u003Cbr\u003E\n\u003Cbr\u003E\nAlso I use a layer adjustment 0 1 250 to improve the ao map.\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-22T16:56:59Z\u0022 title=\u002211/22/2015 04:56  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 22, 2015\u003C/time\u003E by InsaneDruid\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"fairy","CreatedById":152892,"CreatedDateTime":"2015-11-22T17:10:00Z","Content":"\n[quote name=\u0027CobaltWolf\u0027]I just paint it in on the textures by hand haha[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nYeah, that is kind of why I am wanting to try AO baking and/or other techniques. I\u0026#39;ve only got a mouse, no tablet, so handpainting shadows and other small details is a royal pain and time-consuming.\u003Cbr\u003E\n\u003Cbr\u003E\n[COLOR=silver][SIZE=1]- - - Updated - - -[/SIZE][/COLOR]\u003Cbr\u003E\n\u003Cbr\u003E\n[quote name=\u0027InsaneDruid\u0027]Just another neat trick: you usually have to set a new texture when baking: make this as huge as possible!. Then resample it in Photoshop/Gimp to your texture size. This way you increase the quality.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nI\u0026#39;ll give that a shot. Is 4096x4096 a bit overkill, or does it not matter when I resample it back down afterwards?\n"},{"CreatedByName":"InsaneDruid","CreatedById":137849,"CreatedDateTime":"2015-11-22T17:15:51Z","Content":"\n4096*4096 is \u0022barely\u0022 just ok. Its 2015, not 1996. ;) Also yet it doesnt matter if you resample it. In fact, the better the original render, the better the resampled version.\n"},{"CreatedByName":"fairy","CreatedById":152892,"CreatedDateTime":"2015-11-22T17:23:44Z","Content":"\n[quote name=\u0027InsaneDruid\u0027]4096*4096 is \u0022barely\u0022 just ok. Its 2015, not 1996. ;) Also yet it doesnt matter if you resample it. In fact, the better the original render, the better the resampled version.[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nWell I just re-did the process with the AO map res at 4096x4096 and the difference was leaps and bounds better. It created beautiful soft-edge shadows exactly where they needed to be, instead of the previous \u0022microsoft paint\u0022-hard-edge-shadows.\u003Cbr\u003E\n\u003Cbr\u003E\nThe only small issue I am left with is that the model is mostly supposed to be white, but the AO map makes the white areas very dark grey. I can of course fix that with layering and changing the opacity and such, but out of curiosity, are there any light settings I am missing? Is there a way to make the baking not cast shadows on the big white areas? I mean the biggest parts of the models are supposed to be white, and would most definitely get alot of light.\n"},{"CreatedByName":"landeTLS","CreatedById":97925,"CreatedDateTime":"2015-11-22T19:11:02Z","Content":"\nToo dark aos are caused by a too high distance parameter(in blender i think this is the bias parameter but im not 100% sure about this) also always use multiply for ao map layers.\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2015-11-22T19:18:10Z","Content":"\nIf your AO map is coming out too dark the first thing to check is the material assigned to it. By default Blender\u0026#39;s materials have an \u0026#39;intensity\u0026#39; slider under the diffuse color that starts out at 80%. You have to up that to 100% to get white things to come out white!\u003Cbr\u003E\n\u003Cbr\u003E\nBeyond that - don\u0026#39;t accept your AO map just the way it is, feel free to edit it. I\u0026#39;m a photoshop guy, so someone else may be more help with specifically what to do in Gimp, but I\u0026#39;m certain there\u0026#39;s a simple brightness/contrast slider somewhere you can use to adjust both the lightness of the white areas and then the depth of the shadows?\n"},{"CreatedByName":"landeTLS","CreatedById":97925,"CreatedDateTime":"2015-11-22T19:31:24Z","Content":"\nNot sure how blender treats this but in 3dsmax the standard ao bake is based on geometry only(materials and lighting are not considered) but i sometimes use an alternative workflow in mentalray where i bake a complete map from a completly white material with 100% self illumination(so lights dont affect it) and an ambient occlusion shader in the diffuse slot. I think this would be closer to how the process works in blender\n"},{"CreatedByName":"fairy","CreatedById":152892,"CreatedDateTime":"2015-11-22T19:32:48Z","Content":"\n[quote name=\u0027artwhaley\u0027]If your AO map is coming out too dark the first thing to check is the material assigned to it. By default Blender\u0026#39;s materials have an \u0026#39;intensity\u0026#39; slider under the diffuse color that starts out at 80%. You have to up that to 100% to get white things to come out white!\u003Cbr\u003E\n\u003Cbr\u003E\nBeyond that - don\u0026#39;t accept your AO map just the way it is, feel free to edit it. I\u0026#39;m a photoshop guy, so someone else may be more help with specifically what to do in Gimp, but I\u0026#39;m certain there\u0026#39;s a simple brightness/contrast slider somewhere you can use to adjust both the lightness of the white areas and then the depth of the shadows?[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nI just tried that and it worked like a charm. Still a tiny bit grey, but that was fixable by layering the AO map over the texture, setting the mode to \u0022Multiply\u0022 and a little bit of tweaking.\u003Cbr\u003E\n\u003Cbr\u003E\nThanks a lot guys, really appreciate the help. I\u0026#39;m very happy with how the textures look now.\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-11-22T21:46:33Z","Content":"\n[quote name=\u0027CobaltWolf\u0027]I just paint it in on the textures by hand haha[/QUOTE]\u003Cbr\u003E\n\u003Cbr\u003E\nThat\u0026#39;s what I do. Gradients in Photoshop do wonders. :)\n"},{"CreatedByName":"artwhaley","CreatedById":118388,"CreatedDateTime":"2015-11-22T23:29:14Z","Content":"\nOr just take the paint tool to it really roughly, in a new layer, then gausian blur it until it looks good!\n"},{"CreatedByName":"Van Disaster","CreatedById":58876,"CreatedDateTime":"2015-11-24T16:39:47Z","Content":"\nYeah, I haven\u0026#39;t set a bake up for KSP, just as fast to do it by hand ( in PS, vector masks \u0026 gradients are really quick - I think the latest PS can even shape gradient layers to non-rectangular masks? and layer effects are magical ) - but I was doing that before we had AO baking anyway :). Plus KSP\u0026#39;s art style doesn\u0026#39;t generally lend itself for external models at least; I haven\u0026#39;t done an IVA but that would be an obvious place ( not least because most of the lighting is static ).\u003Cbr\u003E\n\u003Cbr\u003E\nI\u0026#39;m also sticking by the idea that unless your surface is *really* complex, it\u0026#39;s probably cheaper to model detail rather than use a normal map.\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2015-11-24T20:39:55Z","Content":"\nBaking AO in blender -- make sure you have it set to \u0026#39;Normalize\u0026#39; (e.g. have \u0026#39;Normalize\u0026#39; enabled) -- this causes it to ignore any material settings/colors/lighting values, and should result in a \u0026#39;neutral\u0026#39; AO bake -- white will be fully lit, black will be fully shaded (the default settings use the material values, where the fully-lit color might be.. dark grey).\n"}]}