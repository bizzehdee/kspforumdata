{"TopicId":135392,"ForumId":15,"TopicTitle":"Strange shader behavior.","CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-03-30T19:22:30Z","PageNum":1,"Articles":[{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-03-30T19:22:30Z","Content":"\n\u003Cp\u003E\nDecided to rework SSP Mk2 model a bit so it could fit both 1.25m and 2.5m designs. Recompiled, re-added animations, all physics, etc., set back KSP/Specular shader and... got THIS:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Os2dhX9.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/Os2dhX9.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nWhat can cause such... unexpected behavior? I\u0027m still at Unity 4.2.2 with old part tools for this particular task.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s how it looked before.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/qEytLUw.jpg\u0022 alt=\u0022qEytLUw.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-30T19:31:45Z\u0022 title=\u002203/30/2016 07:31  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 30, 2016\u003C/time\u003E by Dr. Jet\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2016-03-30T20:46:19Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDid you make any changes to the texture? I\u0027ve sometimes seen parts of the texture turn white if the alpha channel has pure black in those locations. It\u0027s inconsistent though. I usually avoid using 0 (black) and 255 (white) in my alpha channel to avoid that, and only use values in the range of 1-254. I\u0027m not sure if that\u0027s what\u0027s happening here or not.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-03-31T03:22:22Z","Content":"\n\u003Cp\u003E\nwhich shader did you export this with? There seem to be two sets of Unity4 shaders with the new partTools, one in PartTools Legacy, this pack contains a KSP Standard Shader in the Shaders/PBR folder. another set in SquadCore from the assetbundles.unitypackage. The set in squadcore seem to be somewhat broken.. or maybe a special set only for KSPedia content.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-31T03:25:46Z\u0022 title=\u002203/31/2016 03:25  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 31, 2016\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"martinezfg11","CreatedById":59995,"CreatedDateTime":"2016-03-31T03:32:19Z","Content":"\n\u003Cp\u003E\nSo only PartTools legacy is for parts?\n\u003C/p\u003E\n\u003Cp\u003E\nI Assumed that we could make AssetBundle parts using PartTools1.1 and load the .ksp files into KSP.\n\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-03-31T05:17:55Z","Content":"\n\u003Cp\u003E\nmaybe the case. but so far it seems like assetbundles are for plugins only, and maybe things like FX prefabs, Shaders. things that gets access through code instead of config files.\u00A0I can get a partbundle.ksp to load, but part compiler seems to only process configs, MUs and textures like it always did before.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-31T05:19:25Z\u0022 title=\u002203/31/2016 05:19  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 31, 2016\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-03-31T07:49:50Z","Content":"\n\u003Cp\u003E\nNo-no-no. I use OLD PartTools with OLD Unity 4.2.2. I didn\u0027t even try to put PartTools 1.1 there.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat is strange, all new experimntal parts I made last month do have Specular or Translucent/Specular shader and don\u0027t have such problem. It seems to appear\u00A0only for old parts I haven\u0027t touched since before my Unity crashed and was reinstalled twice, losing cache and all assets metas.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere was no alpha channel in this particular texture (and it still is not,\u00A0as I didn\u0027t edit it). \u0022Specular\u0022 was chosen to simulate metal glossiness and it always worked as expected until now.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHm-m-m... Can it be somehow damaged .mat file? I didn\u0027t create a new one - just replaced shader in old one.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-31T07:54:05Z\u0022 title=\u002203/31/2016 07:54  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 31, 2016\u003C/time\u003E by Dr. Jet\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-03-31T13:20:01Z","Content":"\n\u003Cp\u003E\ndamaged mat file maybe the case... any errors or warnings in Unity Console or in KSP debug when this part loads in Editor? from the screencap it almost look like Z fighting between the diffuse and specular passes.\n\u003C/p\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-03-31T16:31:01Z","Content":"\n\u003Cp\u003E\nHm-m-m... deleting and recreating .mat then using PartTools to export\u00A0actually produced some debug output.\n\u003C/p\u003E\n\u003Cp\u003E\n1) \u003Cspan style=\u0022color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;font-size:14.6667px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:20.5333px;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003EShader wants texture coordinates, but the mesh doesn\u0027t have them\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n2)\u00A0Shader wants Tangents but the mesh doesnt have any\n\u003C/p\u003E\n\u003Cp\u003E\nHow so? UW map\u00A0is mapped\u00A0right and texture displays itself right.... in Unity. And what is \u0022tangents\u0022 BTW?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-03-31T16:39:10Z","Content":"\n\u003Cp\u003E\nweird... are there multiple UV sets(channels) on the mesh? I thought KSP shaders always used the first UV set for everything. Never seen anything like this before. Missing UVs would produce the kind of artifact you\u0027re seeing though, strange that it\u0027s only on the specular pass and not the diffuse. This is in KSP 1.0.5 ya?\n\u003C/p\u003E\n\u003Cp\u003E\nTangent is direction perpendicular to the Normal. every vertex has one. Have you tried setting Tangents to \u0022Calculate\u0022 or \u0022Import\u0022, or vice verse, on the imported\u00A0asset\u0027s Model Panel?\n\u003C/p\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-03-31T17:09:40Z","Content":"\n\u003Cp\u003E\nYou won\u0027t believe... Bug persisted even after exporting as ssp2.fbx\u00A0and re-doing Unity stuff\u00A0through it... \u00A0(I hoped it would force Unity to recalculate normals and tangents... whatever they are... but it didn\u0027t)\u00A0BUT! \u00A0Nasty bug\u00A0disappeared after \u0022Save as\u0022 ssp2b.blender...\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s some weird Unity voodoo black magic that just hated the old file name... Cannot think of any REASONABLE explanation.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-31T17:10:29Z\u0022 title=\u002203/31/2016 05:10  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 31, 2016\u003C/time\u003E by Dr. Jet\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"InsaneDruid","CreatedById":137849,"CreatedDateTime":"2016-03-31T17:54:03Z","Content":"\n\u003Cp\u003E\nLooks like the colliiders or something are beeing rendered.\n\u003C/p\u003E\n\u003Cp\u003E\nLike, it all looks to me like massive zfighting due to a coplanar model with no texture beeing rendered. Recheck you unity setup for correct mesh renderer assignment.\n\u003C/p\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-03-31T18:22:18Z","Content":"\n\u003Cp\u003E\nAs I\u00A0said above, re-importing or format change didn\u0027t help,\u00A0\u003Cu\u003Ebug disappeared\u003C/u\u003E after re-saving blender file with \u003Cu\u003Edifferent name\u003C/u\u003E. It surely was some black magic within Unity cache - maybe undead metadata that supposed to be deleted long ago\u00A0or something like that.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/zKniSKc.jpg\u0022 alt=\u0022zKniSKc.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-03-31T18:52:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222485467\u0022 data-ipsquote-contentid=\u0022135392\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459444180\u0022 data-ipsquote-userid=\u002299880\u0022 data-ipsquote-username=\u0022Dr. Jet\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Dr. Jet said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou won\u0027t believe... Bug persisted even after exporting as ssp2.fbx\u00A0and re-doing Unity stuff\u00A0through it... \u00A0(I hoped it would force Unity to recalculate normals and tangents... whatever they are... but it didn\u0027t)\u00A0BUT! \u00A0Nasty bug\u00A0disappeared after \u0022Save as\u0022 ssp2b.blender...\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s some weird Unity voodoo black magic that just hated the old file name... Cannot think of any REASONABLE explanation.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSource of the problem might be in the blender file then... jumbling the UVs on FBX export. I\u0027ve encountered the similar with Max where UVs get randomized per face,\u00A0but thought that was a Max issue. Apparently not.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-31T18:53:28Z\u0022 title=\u002203/31/2016 06:53  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 31, 2016\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-03-31T21:05:12Z","Content":"\n\u003Cp\u003E\nAnd again - NO. Blender file was not changed. It\u0027s FILENAME was. Both .blender and .fbx with old name did not work. After name change - everything miraculously self-repaired. It\u0027s voodoo.\u00A0\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-04-01T00:04:01Z","Content":"\n\u003Cp\u003E\nimportant thing is it\u0027s resolved. magically\n\u003C/p\u003E\n"},{"CreatedByName":"Porkjet","CreatedById":92433,"CreatedDateTime":"2016-04-01T11:37:38Z","Content":"\n\u003Cp\u003E\nLooks much like Z-fighting. Did it flicker? Could be an accidental duplicate of the mesh z fighting with the other\n\u003C/p\u003E\n"}]}