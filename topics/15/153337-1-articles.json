{"TopicId":153337,"ForumId":15,"TopicTitle":"Exhaust FX - tweaking particle size and adding smoke trail","CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2016-12-11T02:17:00Z","PageNum":1,"Articles":[{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2016-12-11T02:17:00Z","Content":"\n\u003Cp\u003E\nFor the next update to SDHI SMS, I\u0027m replacing the stock exhaust FX in the \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E part with a new particle FX emitter model.\n\u003C/p\u003E\n\u003Cp\u003E\nI consulted \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/62013-nazari1382/\u0026amp;do=hovercard\u0022 data-mentionid=\u002262013\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/62013-nazari1382/\u0022 rel=\u0022\u0022\u003E@Nazari1382\u003C/a\u003E\u0027s tutorial in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/59710-hotrockets-particle-fx-replacement-tutorial/\u0022 rel=\u0022\u0022\u003Ethe old HotRockets thread\u003C/a\u003E, and managed to get something working so far, using the following Particle Emitter and EFFECTS node definitions:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022doyLVOW.png\u0022 class=\u0022ipsImage ipsAttachLink_image\u0022 height=\u002276\u0022 src=\u0022http://i.imgur.com/doyLVOW.png\u0022 style=\u0022width:322px;height:auto;\u0022 width=\u0022322\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:8px;\u0022\u003ENote:\u003Cbr\u003E\n- FX_SDHI_ServiceModuleSystem is just a dummy GameObject for holding all my current and future Particle FX definitions\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E- SDHI_LES_Thruster is the actual PartTool export script for the eponymous SDHI_LES_Thruster.mu\u003Cbr\u003E\n- emit is where the KSP Particle Emitter script is attached\u003Cbr\u003E\n- smokePoint is a placeholder location for exhaust smoke\u003C/span\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022eHynwIw.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/eHynwIw.png\u0022\u003E\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EEFFECTS\n{\n\tles_running\n\t{\n\t\tAUDIO\n\t\t{\n\t\t\tchannel = Ship\n\t\t\tclip = sound_rocket_spurts\n\t\t\tvolume = 0.0 0.0\n\t\t\tvolume = 1.0 1.0\n\t\t\tpitch = 0.0 0.2\n\t\t\tpitch = 1.0 1.0\n\t\t\tloop = true\n\t\t}\n\t\tMODEL_MULTI_PARTICLE\n\t\t{\n\t\t\tmodelName = SDHI/Service Module System/FX/SDHI_LES_Thruster\n\t\t\ttransformName = thrustTransform\n\t\t\temission = 0.0 0.0\n\t\t\temission = 0.05 0.0\n\t\t\temission = 0.075 0.25\n\t\t\temission = 1.0 1.25\n\t\t\tspeed = 0.0 0.5\n\t\t\tspeed = 1.0 1.2\n\t\t}\n\t}\n\t\n\tengage\n\t{\n\t\tAUDIO\n\t\t{\n\t\t\tchannel = Ship\n\t\t\tclip = sound_vent_soft\n\t\t\tvolume = 1.0\n\t\t\tpitch = 2.0\n\t\t\tloop = false\n\t\t}\n\t}\n\tflameout\n\t{\n\t\tAUDIO\n\t\t{\n\t\t\tchannel = Ship\n\t\t\tclip = sound_explosion_low\n\t\t\tvolume = 1.0\n\t\t\tpitch = 2.0\n\t\t\tloop = false\n\t\t}\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022XyCmadw.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/XyCmadw.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHowever, I noticed that when I zoomed in closer to the exhaust, the particle effects thin out:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00225G2fMIy.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/5G2fMIy.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIs there a way to maintain a desired plume size irrespective of zoom level?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, how would I add smoke trails to the \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E plume? I tried using the stock smoke effects, but only one of the four thrustTransforms on my \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E emits smoke.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"SuicidalInsanity","CreatedById":143878,"CreatedDateTime":"2016-12-16T01:15:59Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66272-sumghai/\u0026amp;do=hovercard\u0022 data-mentionid=\u002266272\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66272-sumghai/\u0022 rel=\u0022\u0022\u003E@sumghai\u003C/a\u003E: The shrinking FX is caused by the \u0022Max Size\u0022 setting of the KSP Particle Emitter, located under the color selection. For best results, the Max Size should be about the same size as the main Size setting - for the \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E, something in the range of 3.5 - 4 should be good.\n\u003C/p\u003E\n\u003Cp\u003E\nSince KSP doesn\u0027t like doing multiple smoke trails per part adding smoke to the \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E is a bit more involved than simply adding an additional Prefab Particle in the .cfg; some alterations to the part in Unity will need to be made first. In the \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E Unity scene, open the \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E\u0027 tree hierarchy, I\u0027m guessing it will look something like:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EPartTools\n\t\u0026gt; \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E\n\t\t\u0026gt; LESCollider\n\t\t\u0026gt; thrustransform\n\t\t\u0026gt; thrustransform\n\t\t\u0026gt; thrustransform\n\t\t\u0026gt; thrustransform\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nFor multiple smoke points, each smoke point will need to be unique to be called by KSP, so the tree hierarchy will end up something looking like:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EPartTools\n\t\u0026gt; \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E\n\t\t\u0026gt; LESCollider\n\t\t\u0026gt; thrusttransform\n\t\t\t\u0026gt; PortSmokePoint\n\t\t\u0026gt; thrustransform\n\t\t\t\u0026gt; StarSmokePoint\n\t\t\u0026gt; thrustransform\n\t\t\t\u0026gt; VentralSmokePoint\n\t\t\u0026gt; thrustransform\n\t\t\t\u0026gt; DorsalSmokePoint\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nYou don\u0027t have to call them that, all that matters is that the smoke point transforms don\u0027t share names. Then re-export the model. In the .cfg, in the EFFECTS section, in the \u0027les_running\u0027\u00A0 segment add a PREFAB_PARTICLE for each smoke point, with some alterations from standard:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EPREFAB_PARTICLE\n\t\t\t{\n\t\t\t\tname = Leftexhaust\t//Each multismoke prefab needs a unique name\n\t\t\t\tprefabName = fx_smokeTrail_light\n\t\t\t\ttransformName = PortSmokePoint\t//Each multismoke prefab needs to reference one of the smoketransforms\n\t\t\t\temission = 0.0 0.0\t\t\t\t\t\t\t\n\t\t\t\temission = 0.05 0.0\t\t\t\t\t\t\t\n\t\t\t\temission = 0.075 0.25\n\t\t\t\temission = 1.0 1.25\n\t\t\t\tspeed = 0.0 0.25\n\t\t\t\tspeed = 1.0 1.0\n\t\t\t\tlocalOffset = 0, 0, 1\n\t\t\t\tlocalRotation = 1, 0, 0, -90\t//Include if smoke point transform oriented same as thrusttransform\n\t\t\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-12-16T01:18:24Z\u0022 title=\u002212/16/2016 01:18  AM\u0022 data-short=\u00227 yr\u0022\u003EDecember 16, 2016\u003C/time\u003E by SuicidalInsanity\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2016-12-16T04:27:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222889452\u0022 data-ipsquote-contentid=\u0022153337\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221481850959\u0022 data-ipsquote-userid=\u0022143878\u0022 data-ipsquote-username=\u0022SuicidalInsanity\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, SuicidalInsanity said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66272-sumghai/\u0026amp;do=hovercard\u0022 data-mentionid=\u002266272\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66272-sumghai/\u0022 rel=\u0022\u0022\u003E@sumghai\u003C/a\u003E: The shrinking FX is caused by the \u0022Max Size\u0022 setting of the KSP Particle Emitter, located under the color selection. For best results, the Max Size should be about the same size as the main Size setting - for the \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E, something in the range of 3.5 - 4 should be good.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBased on this advice, I decided to set my main Size settings to 0.5 and 1, and Max Size to 1. This gives me the desired FX size with no shrinking.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222889452\u0022 data-ipsquote-contentid=\u0022153337\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221481850959\u0022 data-ipsquote-userid=\u0022143878\u0022 data-ipsquote-username=\u0022SuicidalInsanity\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, SuicidalInsanity said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSince KSP doesn\u0027t like doing multiple smoke trails per part adding smoke to the \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E is a bit more involved than simply adding an additional Prefab Particle in the .cfg; some alterations to the part in Unity will need to be made first.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI added the extra unique SmokePoints directly to the \u003Cabbr title=\u0022Launch Escape System\u0022\u003ELES\u003C/abbr\u003E model, and I got the multiple smoke trails as desired.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, I liked how you\u0027ve used Port/Starboard/Ventral/Dorsal in your naming scheme - that\u0027s something I tend to do as well.\n\u003C/p\u003E\n\u003Cp\u003E\nMucho gracias for the help! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}