{"TopicId":103994,"ForumId":15,"TopicTitle":"[HELP] Parachute not deploying?","CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-12T20:09:17Z","PageNum":1,"Articles":[{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-12T20:09:17Z","Content":"Not sure what went wrong but here\u0027s an Imgur Gallery to illustrate: [http://imgur.com/a/Ooaz4](http://imgur.com/a/Ooaz4) my custom parachute is the white cylinder with the off-center red arrows. (I need to fix the texture later)\n\n1. Test Craft, Initial takeoff\n2. In-Flight\n3. Engines off, decoupler activated (nose cone flew off)\n4. XLI-SP1 Stack Parachute activated, the cap flew off but the canopy isn\u0027t visible. not sure why the stage icon is yellow.\n5. The stage icon turned green? canopy is still not visible.\n6. The craft lands and only the engine is destroyed. stage icon red?\n\n**Edited \u003Ctime datetime=\u00222015-04-12T20:33:13Z\u0022 title=\u002204/12/2015 08:33  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 12, 2015\u003C/time\u003E by Xyphos**"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-04-12T20:46:44Z","Content":"Here\u0027s a quick explanation of the parachute icon colors:\n\n- white (default): parachute not yet activated / deployed\n\n- cyan (predeployed): parachute activated, but not actually deployed until it reaches a low enough altitude\n\n- yellow (semi-deployed): parachute risers come out, but the canopy is still scrunched up like a streamer; semi-deployed drag is applied\n\n- green (fully deployed): parachute canopy inflates and expands to full diameter; fully-deployed drag is applied\n\n- red (spent): vessel has landed and parachute has been auto-cut\n\nTo diagnose your specific problem, we\u0027re going to need the following pieces of information:\n\n - A screenshot showing how your parachute is configured in Unity (specifically, a hierarchy of object names making up the parachute part)\n\n - The name of the semi-deployment and full deployment animations\n\n - The code for the CFG file for your parachute part (you can paste it directly on the forums using \n\n     tags)"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-12T21:55:16Z","Content":"My screenie resolution may break the forums so here\u0027s the links instead.\n\nBlender: [http://i.imgur.com/alc9WdU.png](http://i.imgur.com/alc9WdU.png)\n\nUnity: [http://i.imgur.com/Ij3CTjV.png](http://i.imgur.com/Ij3CTjV.png)\n\nthe cfg file is a direct copy of the stock MK25 \u0022drouge\u0022 parachute but edited where needed. here\u0027s the pastebin link: [http://pastebin.com/5VN27MNT](http://pastebin.com/5VN27MNT)\n\n**Edited \u003Ctime datetime=\u00222015-04-12T21:58:01Z\u0022 title=\u002204/12/2015 09:58  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 12, 2015\u003C/time\u003E by Xyphos**"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-04-12T22:31:20Z","Content":"Okay.\n\nSo your Unity model hierarchy is:\n\n    -PartTools    -XLI-SP1        -base        -canopy        -cap\n\nAnd your ModuleParachute definition in your Part CFG file is:\n\n    MODULE {         name = ModuleParachute         invertCanopy = true         autoCutSpeed = 0.5         capName = cap         canopyName = canopy         semiDeployedAnimation = semiDeploy         fullyDeployedAnimation = fullDeploy         stowedDrag = 0.22         semiDeployedDrag = 4         fullyDeployedDrag = 500         minAirPressureToOpen = 0.2         deployAltitude = 250         deploymentSpeed = 1         semiDeploymentSpeed = 1 }\n\nSo far, so good.\n\nFor the parachute animations, I strongly recommend making them in Unity instead of in Blender, because trying to import and configure the latter into the former after the fact adds complication to the process.\n\n**In Blender:**\n\n1) Completely remove your existing animation definitions\n\n2) Make sure that the origin of the canopy mesh is located at the point where all the risers (strings) converge; this is where the parachute would pivot when deployed\n\n3) Scale your canopy mesh up to its fully deployed and inflated state\n\n4) With the canopy still selected, press **Ctrl-A** then choose to apply **Scale**\n\n5) In the properties sidebar, set the X, Y, Z scales to 0.001; this effectively makes the canopy small enough to hide inside the parachute container part\n\n6) Save your Blender model file\n\n**In Unity:**\n\n1) Make sure the Blender prefab has reloaded to the updated model\n\n2) In the model hierarchy, selected the **XLI-SP1** parent object and add an **Animation** component to it\n\n3) In the Animation View window/pane, create and save a new animation called **semiDeploy**4) While still in Animation View, browse for the **XLI-SP1 \u003E canopy** object and add the **Scale** property to the animation\n\n5) At keyframe t=0, ensure that the scale of the canopy for all three dimensions is 0.001;\n\n6) Create a new keyframe at t=4\n\n7) At keyframe t=4, change the scale values so that the canopy is fully stretched out along its length (scale=1) while the width and depth of the canopy is only partially deployed (scale=0.2)\n\n8) Preview this animation to see how it plays out\n\n9) Create and save a new animation called **fullDeploy**\n\n10) Again, browse for the XLI-SP1 \u003E canopy object and add the Scale property to the animation\n\n11) At keyframe t=0, ensure that the scale of the canopy is 1 for the length axis and 0.2 for the width/depth axes\n\n12) Create a new keyframe at t=4\n\n13) At keyframe t=4, change the scale values so that the canopy is fully stretched out along its length and the canopy is fully inflated (i.e. all three have scale=1)\n\n14) Preview this animation to see how it plays out\n\n15) Add the new **semiDeploy** and **fullDeploy** animations to the **Animation** component defined for the **XLI-SP1** parent object; this is so that the animations will get written into the MU model file itself, where ModuleParachute will then be able to actually find them\n\n16) Export the part using the PartTools script and test it in-game.\n\nI\u0027m currently at work, so I\u0027m recalling these instructions off the top of my head. Do let me know how you get on, though."},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-13T00:31:36Z","Content":"Thanks, I\u0027ll try it... I\u0027m not sure how to remove animations so I\u0027ve decided to start over from scratch just to be sure. after all, it\u0027ll be good practice anyhow. I\u0027ll post any updates later."},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-13T09:12:44Z","Content":"Update: I got it to work! \n\nbut you forgot to mention a step. \n\nin Unity, I had to set the root node to \u0027canopy\u0027 and it worked like a charm! \n\nnow I just gotta fine-tune the textures a bit and it\u0027ll be finished.\n\nthanks for the help, \u002Brep."},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-04-13T20:25:27Z","Content":"\u003E \n\u003E Update: I got it to work! \n\u003E but you forgot to mention a step. \n\u003E \n\u003E in Unity, I had to set the root node to \u0027canopy\u0027 and it worked like a charm! \n\u003E \n\u003E now I just gotta fine-tune the textures a bit and it\u0027ll be finished.\n\u003E \n\u003E thanks for the help, \u002Brep.\n\nGood to hear that it worked - but I\u0027m not sure what you mean by root node, though, since I don\u0027t recall any such step when making my own parachute models for SDHI and RealChutes."},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-15T20:49:11Z","Content":"\u003E \n\u003E I\u0027m not sure what you mean by root node, though, since I don\u0027t recall any such step when making my own parachute models for SDHI and RealChutes.\n\nthere\u0027s an \u0022Rig\u0022 option in Unity when you import your model from Blender, but you\u0027re right, it\u0027s not nessessary. I accidentally stumbled on to it and figured it might be something important, like an attachment point or something.\n\nOk, time for new problems: [http://i.imgur.com/Io0SOT1.jpg](http://i.imgur.com/Io0SOT1.jpg)\n\nBlender Screenie: [http://i.imgur.com/laa9Zte.png](http://i.imgur.com/laa9Zte.png)\n\nUnity Screenie: [http://i.imgur.com/2uNDNYD.png](http://i.imgur.com/2uNDNYD.png)\n\nCFG unchanged.\n\n1) the base container is supposed to have an outside and inside wall, but some wierd kind of clipping is ocuring here.\n\n2) the base container is 24-sided, as suggested, but it\u0027s too rigid-looking and doesn\u0027t match the 24-sided fuel tank below\n\n3) the parachute deploys, **semiDeploy** is animated, **fullDeploy** never occurs, and the debug log shows a null reference exception."},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-04-15T21:33:37Z","Content":"\u003E \n\u003E 1) the base container is supposed to have an outside and inside wall, but some wierd kind of clipping is ocuring here.\n\nYou might need to recalculate normals on your mesh.\n\n\u003E \n\u003E 2) the base container is 24-sided, as suggested, but it\u0027s too rigid-looking and doesn\u0027t match the 24-sided fuel tank below\n\n - Apply Shade Smooth to your mesh\n\n - Add a Edge Split Modifier and set it to 30~45 degrees (**but do not apply it**)\n\n - Select the top and bottom rings of the cylinder and Mark Sharp\n\nThis would make the curved surface of the container less faceted-looking\n\n\u003E \n\u003E 3) the parachute deploys, **semiDeploy** is animated, **fullDeploy** never occurs, and the debug log shows a null reference exception.\n\nThis is interesting...\n\nCould you please grab a screenshot of your Animation component. How many items are in the animation array?"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-15T23:41:14Z","Content":"\u003E \n\u003E You might need to recalculate normals on your mesh.\n\nWhat? How?\n\n\u003E \n\u003E - Apply Shade Smooth to your mesh\n\u003E \n\u003E - Add a Edge Split Modifier and set it to 30~45 degrees (**but do not apply it**)\n\u003E \n\u003E  - Select the top and bottom rings of the cylinder and Mark Sharp\n\u003E \n\u003E This would make the curved surface of the container less faceted-looking\n\n- Smooth, ok...\n\n- Edge Split Modifier? amplify? lost me here.\n\n- What\u0027s the difference between mark seam and mark sharp?\n\n\u003E \n\u003E This is interesting...\n\u003E \n\u003E Could you please grab a screenshot of your Animation component. How many items are in the animation array?\n\nThis?\n\n[http://i.imgur.com/8ChMlXP.png](http://i.imgur.com/8ChMlXP.png)"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-04-15T23:56:59Z","Content":"\u003E \n\u003E You might need to recalculate normals on your mesh.\n\n\u003E \n\u003E What? How?\n\n - Select your mesh\n\n - Go into **Edit Mode**\n\n - Press **A** to select everything\n\n - In the Tool Shelf on the left, go to the **Shadings / UV** tab and click on **Normals: \u003E Recalculate**\n\n\u003E \n\u003E - Apply Shade Smooth to your mesh\n\u003E  - Add a Edge Split Modifier and set it to 30~45 degrees (**but do not apply it**)\n\u003E \n\u003E  - Select the top and bottom rings of the cylinder and Mark Sharp\n\n\u003E \n\u003E - Smooth, ok...\n\u003E \n\u003E - Edge Split Modifier? amplify? lost me here.\n\u003E \n\u003E - What\u0027s the difference between mark seam and mark sharp?\n\n- Make sure that your container is still selected\n\n- Find the **Properties** panel (bottom right-ish)\n\n- In the [**Buttons (Properties) Window Header**](http://wiki.blender.org/index.php/Doc:2.6/Manual/Interface/Window_system#Buttons_.28Properties.29_Window_Header), click on the **Modifiers** icon (blue wrench)\n\n- Add a **Edge Split** modifier using the drop-down menu\n\n- Set the angle to anywhere between 30~45 degrees\n\n- **DO NOT** press apply (or your\u0027ll be causing yourself grief later)\n\n- Select the top and bottom rings of the cylinder and Mark Sharp\n\n(Mark Sharp tells the Edge Split modifier and Mesh Smooth shader to not smooth these selected edges; Mark Seam is for UV mapping, which is not related)\n\n\u003E \n\u003E This is interesting...\n\u003E Could you please grab a screenshot of your Animation component. How many items are in the animation array?\n\n\u003E \n\u003E This?\n\u003E [http://i.imgur.com/8ChMlXP.png](http://i.imgur.com/8ChMlXP.png)\n\nNo, this:\n\n[http://docs.unity3d.com/uploads/Main/AnimationInspector35.png](http://docs.unity3d.com/uploads/Main/AnimationInspector35.png)"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-16T00:35:22Z","Content":"\u003E \n\u003E No, this:\n\u003E \n\u003E [http://docs.unity3d.com/uploads/Main/AnimationInspector35.png](http://docs.unity3d.com/uploads/Main/AnimationInspector35.png)\n\nthat would be here, I think? [http://i.imgur.com/NxiQ2H9.png](http://i.imgur.com/NxiQ2H9.png)\n\nalso, this \u0022greif\u0022 you speak of, meaning that the part won\u0027t load in KSP and has to be remade from scratch? (oopsie, I had to find out the hard way...)\n\n**Edited \u003Ctime datetime=\u00222015-04-16T00:40:19Z\u0022 title=\u002204/16/2015 12:40  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 16, 2015\u003C/time\u003E by Xyphos**"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-04-16T01:19:23Z","Content":"\u003E \n\u003E that would be here, I think? [http://i.imgur.com/NxiQ2H9.png](http://i.imgur.com/NxiQ2H9.png)\n\nHmm... **semiDeploy** and **fullDeploy** are both listed, so KSP should recognize them.\n\nTry clearing the **Animation** field, but keep **semiDeploy** and **fullDeploy** in **Element 0** and **Element 1**.\n\nEDIT: Arrgh, get rid of the **Animat****or** controller - that doesn\u0027t work for KSP.\n\n\u003E \n\u003E also, this \u0022greif\u0022 you speak of, meaning that the part won\u0027t load in KSP and has to be remade from scratch? (oopsie, I had to find out the hard way...)\n\nYou you do apply the Split Edge modifier, it does exactly what it says - split a shared edge into two coinciding but separate edges, which simply makes it harder to edit the cylinder later because you\u0027ll need to manipulate twice as many vertices as before.\n\nBy adding the Split Edge modifier to the mesh but not permanently applying, you get the same edge sharpening effects while keeping the edges/vertices easily editable later down then line."},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-16T03:59:20Z","Content":"\u003E \n\u003E Hmm... **semiDeploy** and **fullDeploy** are both listed, so KSP should recognize them.\n\u003E Try clearing the **Animation** field, but keep **semiDeploy** and **fullDeploy** in **Element 0** and **Element 1**.\n\u003E \n\u003E EDIT: Arrgh, get rid of the **Animat****or** controller - that doesn\u0027t work for KSP.\n\u003E \n\u003E You you do apply the Split Edge modifier, it does exactly what it says - split a shared edge into two coinciding but separate edges, which simply makes it harder to edit the cylinder later because you\u0027ll need to manipulate twice as many vertices as before.\n\u003E \n\u003E By adding the Split Edge modifier to the mesh but not permanently applying, you get the same edge sharpening effects while keeping the edges/vertices easily editable later down then line.\n\nOoooooooohhhh thanks."},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-26T07:42:43Z","Content":"\\*sigh\\* I\u0027m back to where I started, and that null error keeps appearing.\n\nKSP: [http://i.imgur.com/jt9lX3S.jpg](http://i.imgur.com/jt9lX3S.jpg)\n\nBlender: [http://i.imgur.com/vJg7JEr.png](http://i.imgur.com/vJg7JEr.png)\n\nUnity: [http://i.imgur.com/H5T2xe0.png](http://i.imgur.com/H5T2xe0.png)\n\nconfig: [http://pastebin.com/ZKYwYPGx](http://pastebin.com/ZKYwYPGx)\n\n**Edited \u003Ctime datetime=\u00222015-04-26T07:45:14Z\u0022 title=\u002204/26/2015 07:45  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 26, 2015\u003C/time\u003E by Xyphos**"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-04-26T23:21:04Z","Content":"MODULE {         name = ModuleParachute         invertCanopy = true         autoCutSpeed = 0.5         capName = cap         canopyName = canopy         semiDeployedAnimation = semiDeploy         fullyDeployedAnimation = fullyDeploy    [B]\u003C--------[/B]         stowedDrag = 0.22         semiDeployedDrag = 1         fullyDeployedDrag = 500         minAirPressureToOpen = 0.01         deployAltitude = 500         deploymentSpeed = 1         semiDeploymentSpeed = 1  }\n\nAh, a typo - in Unity, change the name of the full deployment animation from **fullDeploy** to **fullyDeploy**."},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2015-04-28T00:40:15Z","Content":"oh darn, I totally overlooked that.\n\nthanks again!"}]}