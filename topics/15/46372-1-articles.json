{"TopicId":46372,"ForumId":15,"TopicTitle":"Big bad bumps :(","CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2013-09-24T06:39:09Z","PageNum":1,"Articles":[{"CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2013-09-24T06:39:09Z","Content":"\n\u003Cp\u003EI just got my second ship into KSP and this time I thought I\u0027d try using a bump map. It looks terrible.\u003C/p\u003E\u003Cp\u003EHere\u0027s the ship without a bump map. The texture needs some improvment, but it\u0027s servicable.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://cloud-2.steampowered.com/ugc/920148996330329902/BB67F301A6676F43D16A6EE68947D402117BB6F4/\u0022 alt=\u0022BB67F301A6676F43D16A6EE68947D402117BB6F4\u0022\u003E\u003C/p\u003E\u003Cp\u003EThis is the same area with a bumpmap applied in Unity. \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://cloud-2.steampowered.com/ugc/920148996330090084/346F8CC30553ECB6687BDBACB30DB0D88D19E799/\u0022 alt=\u0022346F8CC30553ECB6687BDBACB30DB0D88D19E799\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe bumpmap was made with the same texture that made the lines on the hull. The idea was that they\u0027d have a slight indent. I used a medium grey color (128v) for the basecoat on the bumpmap. The lines were pure black, but after a few attempts to tone it down I lowered the opacity for them till theres very little contrast between the base and lines. It still looks like crap in KSP. \u003C/p\u003E\u003Cp\u003EWhen I import the bumpmap into unity, the first time I try to use it I get a message saying it\u0027s not marked as a normal map and do I want to fix it. I do and it looks fine in Unity, but when I get it into KSP I get this mess. \u003C/p\u003E\u003Cp\u003EI\u0027ve played with the bumpiness in unity and it changes there, but even if I set it at a super low value before I write the KSP part, it still has the same depth.\u003C/p\u003E\u003Cp\u003EIs there perhaps something else I need to do in unity to lock the new bump settings to the object before I write the object with parttools? The amount of bump shown in KSP is more than the maximum bump setting shows me in unity. When I turn it down so it looks good in Unity, I assume that\u0027s what it\u0027s going to save for KSP. That doesn\u0027t seem to be the case.\u003C/p\u003E\u003Cp\u003EThe other thing is that the normal map isn\u0027t working the way I intended my bump map to look. The black line in the upper picture is supposed to be a slight indent into the surface where the hull plate meets the frame. Yet the right edge of the vertical line looks like it\u0027s got a raised lip. You see the same thing above and to the right of the door.\u003C/p\u003E\u003Cp\u003EShould I be choosing NOT to convert the bump image to a normal map?\u003C/p\u003E\u003Cp\u003EAnyone got any advice on how to fix my bumpmaps or able to point me to a decent tutorial?\u003C/p\u003E\n"},{"CreatedByName":"Dispatcher","CreatedById":78707,"CreatedDateTime":"2013-09-25T00:23:13Z","Content":"\n\u003Cp\u003EFirst of all, I recommend that you use 1024 resolution textures (including UV island maps exported from your 3D editor (like Blender). Always use a solid color background layer (I usually use black) in your image editor (like Gimp). Sometimes the UV unwraps will produce a line with a jag in it instead of a straight line in one or more islands. Not sure why this is but its a pain and you may need to rotate your model a little and try unwrapping again. (I\u0027m too lazy to do that but its something I\u0027ve been tempted to do, even though my models are perfectly aligned with respect to grids and degrees.) Also try zooming in on your layers and fixing pixels which look wrong (jaggy or otherwise out of place). Come to think of it, you might want to work in higher resolutions and then sample down to 1024. I\u0027ve not tried that. Instead of applying bumps in Unity (which I have done), I\u0027ve also been applying bump filters in Gimp and then just using a non bump KSP shader in Unity. I haven\u0027t experimented between choosing normal or not, but you could try both and compare. Unity does seem to like blowing imperfections right out of proportion.\u003C/p\u003E\n"},{"CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2013-09-25T05:16:12Z","Content":"\n\u003Cp\u003EI\u0027m actually using 1024 res textures. It\u0027s the lowest choice in Wings 3d. The hatch is a fairly small part of the texture, butI don\u0027t think the resolution is the problem though in spite of how bad it looks around the door. It looks good as a bumpmap in Unity. It\u0027s turned down so it\u0027s subtle enough that you only really see it as a break in a specular highlight. Like the depth of the indent is about half of the width of one of the lines in the upper image. \u003C/p\u003E\u003Cp\u003EIt\u0027s not untill I export it to KSP that it looks WAY overdone like in the lower image. \u003C/p\u003E\u003Cp\u003EI am using a solid color for the background. I use a medium gray so I can go lighter for a bump coming out from the surface and darker for an indent into the surface. I started with pure black lines but later dropped the contrast to try to get to to look better in KSP. I took a closer look at the bump texture over a high contrast background and it needs some cleanup. I took a lot of time tweaking the UV\u0027s in wings so I\u0027d have all straight lines, but it looks like a couple were\u0027t quite perfect. I wish there was a snap to grid in the UV editor in Wings. It looks like photoshop may have tried to antialias a couple of lines and that may be what\u0027s causing the raised edge. Still does\u0027t explain what\u0027s causing it to be amplified so much from what Unity is showing.\u003C/p\u003E\n"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2013-09-26T02:52:47Z","Content":"\n\u003Cp\u003EIt looks like compression artifacts in the normal map texture, what image type are you using for the normal map texture file?\u003C/p\u003E\u003Cp\u003EIf you\u0027re currently using a compressed image type, try it with PNG. While this will load slower (until 0.22/Unity4.2 fixes) it might fix your issue?\u003C/p\u003E\n"},{"CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2013-09-26T04:27:50Z","Content":"\n\u003Cp\u003EI use PNG non-interlaced to go from photoshop to Unity. I\u0027m saving from unity as MBM. I thing I might have to try TGA and just re-edit the normal map after unity saves it with the KSP object. \u003C/p\u003E\u003Cp\u003EI still haven\u0027t figured out why is amplified so much from what I\u0027m seeing in Unity. This is probably 10 to 20 times as much bump as I\u0027m seeing in Unity.\u003C/p\u003E\u003Cp\u003EI may try clearing everything out and starting from scratch. I could rebuild the scene faster than finding the problem if it\u0027s a glitch in Unity.\u003C/p\u003E\n"},{"CreatedByName":"Ohfive30","CreatedById":74380,"CreatedDateTime":"2013-10-01T23:00:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kerba Fett\u0022 data-cite=\u0022Kerba Fett\u0022\u003E\u003Cdiv\u003EI just got my second ship into KSP and this time I thought I\u0027d try using a bump map. It looks terrible.\u003Cp\u003EHere\u0027s the ship without a bump map. The texture needs some improvment, but it\u0027s servicable.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://cloud-2.steampowered.com/ugc/920148996330329902/BB67F301A6676F43D16A6EE68947D402117BB6F4/\u0022 alt=\u0022BB67F301A6676F43D16A6EE68947D402117BB6F4\u0022\u003E\u003C/p\u003E\u003Cp\u003EThis is the same area with a bumpmap applied in Unity. \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://cloud-2.steampowered.com/ugc/920148996330090084/346F8CC30553ECB6687BDBACB30DB0D88D19E799/\u0022 alt=\u0022346F8CC30553ECB6687BDBACB30DB0D88D19E799\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe bumpmap was made with the same texture that made the lines on the hull. The idea was that they\u0027d have a slight indent. I used a medium grey color (128v) for the basecoat on the bumpmap. The lines were pure black, but after a few attempts to tone it down I lowered the opacity for them till theres very little contrast between the base and lines. It still looks like crap in KSP. \u003C/p\u003E\u003Cp\u003EWhen I import the bumpmap into unity, the first time I try to use it I get a message saying it\u0027s not marked as a normal map and do I want to fix it. I do and it looks fine in Unity, but when I get it into KSP I get this mess. \u003C/p\u003E\u003Cp\u003EI\u0027ve played with the bumpiness in unity and it changes there, but even if I set it at a super low value before I write the KSP part, it still has the same depth.\u003C/p\u003E\u003Cp\u003EIs there perhaps something else I need to do in unity to lock the new bump settings to the object before I write the object with parttools? The amount of bump shown in KSP is more than the maximum bump setting shows me in unity. When I turn it down so it looks good in Unity, I assume that\u0027s what it\u0027s going to save for KSP. That doesn\u0027t seem to be the case.\u003C/p\u003E\u003Cp\u003EThe other thing is that the normal map isn\u0027t working the way I intended my bump map to look. The black line in the upper picture is supposed to be a slight indent into the surface where the hull plate meets the frame. Yet the right edge of the vertical line looks like it\u0027s got a raised lip. You see the same thing above and to the right of the door.\u003C/p\u003E\u003Cp\u003EShould I be choosing NOT to convert the bump image to a normal map?\u003C/p\u003E\u003Cp\u003EAnyone got any advice on how to fix my bumpmaps or able to point me to a decent tutorial?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not sure if you got this solved or not yet. but for future reference a bump map is not the same as a normal map. while a bump map is simply a greyscale image to show height off a surface, a normal map is an RGB image, normal maps look quite purple when you look at them.\u003C/p\u003E\u003Cp\u003Ethere are programs that will convert a bump map to a normal map, I think xNormal64 is a free one that does it.\u003C/p\u003E\u003Cp\u003Eas far as the artifacts around the door, to me that looks like JPG artifacting from a highly compressed JPG, that may be unity causing that in the conversion, alternately look at your bump map and see if there\u0027s similar artifacts in that. You siad you use PNG and then unity saves as MBM, I\u0027ve been using PNG and saving as TGA compressed, and I haven\u0027t had any sort problems so far. In the end it may just be a result of unity trying to interpret a greyscale image as a normal map.\u003C/p\u003E\n"},{"CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2013-10-03T14:20:54Z","Content":"\n\u003Cp\u003EI didn\u0027t manage to find a solution yet. I just went on to other things while looking for the solution. The artifacts around the door are partly the fault of the bump map, but Unity is what\u0027s making them look like a mess when it writes the image. It amplifies the bump effect many times when writing the KSP object. I\u0027ve tried outputing from unity in MBM, TGA, and PNG and I get the same result every time. \u003C/p\u003E\u003Cp\u003EThe thing that bugs me is that it looks good in Unity and it\u0027s not saving what I\u0027m seeing.\u003C/p\u003E\u003Cp\u003EI did realize that bump maps and normal maps are different. As I understand it, bump maps only show height while normal maps show height as well as a simulated angle for surface features. What I haven\u0027t figured out yet is what the actual colors mean to hand paint one. A lot of white in a bump map translates to a lot of yellow in a normal map. Darker colors show up as more purple. But how to hand make one in Photoshop is something I haven\u0027t figured out yet. \u003C/p\u003E\u003Cp\u003EBecause normal maps seem to need multiple pixels to do what a bump map is able to do in a single pixel line, it seems like normal maps would be unsuitable for fine mechanical detail and more useful for organic or more random textures. I\u0027ve also tried raising the resolution of the maps to 2000 pixels square and it looks just as bad as 1000 pixel images when Unity writes them.\u003C/p\u003E\u003Cp\u003EI\u0027ll try the conversion program you mentioned, and I\u0027ve also heard of a photoshop plugin that does the same thing. Perhaps I can just replace the faulty map that Unity is writing.\u003C/p\u003E\n"},{"CreatedByName":"Ohfive30","CreatedById":74380,"CreatedDateTime":"2013-10-04T00:58:42Z","Content":"\n\u003Cp\u003Ehere\u0027s some info on bringing in a greyscale image and having it work as a normal map, you have to specify some conversion settings in the texture importer\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://docs.unity3d.com/Documentation/Manual/HOWTO-bumpmap.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/Documentation/Manual/HOWTO-bumpmap.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Eis that the process you\u0027re going through?\u003C/p\u003E\u003Cp\u003EI\u0027d never used the conversion of bump to normal in xNormal before so I thought I\u0027d give it a try, I used the Height Map to Normal Map option in the tool section. The bump was a medium grey with some black lines for indents and some white lines for raised detail. you can see the result of the normal map generation. I wouldn\u0027t expect white areas to be coming out yellow unless they\u0027re defining a detail at a strange angle to the surface.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.randomspandrel.com/downloads/nrmlmapexample.png\u0022 alt=\u0022nrmlmapexample.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve yet to try this workflow in unity/KSP but from what I\u0027ve seen previously in other normal maps I\u0027ve done, putting this normal map into the bump texture slot of a KSP material would give a reasonable result.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-04T01:00:06Z\u0022 title=\u002210/04/2013 01:00  AM\u0022 data-short=\u002210 yr\u0022\u003EOctober 4, 2013\u003C/time\u003E by Ohfive30\u003C/strong\u003E\n\u003Cbr\u003Egrammar\n\u003C/span\u003E\n"},{"CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2013-10-04T14:03:20Z","Content":"\n\u003Cp\u003EYou were just a gigantic help. \u003C/p\u003E\u003Cp\u003EWhile composing a long and detailed reply on exactly what I\u0027ve been doing with my bumpmap I stumbled across the solution. Normal maps seem to need more pixels to work. I assumed that the imagemaps written for KPS would be the same size as I loaded into Unity. They\u0027re not. There\u0027s a maximum size setting in the bumpmap inspector window. The heading of the window says import settings so I thought that was the maximum size that it would bring them into unity as. In fact, in the link you sent me to it\u0027s the field right under the words \u0022Texture importer\u0022\u003C/p\u003E\u003Cp\u003EThat turns out to be the size that Unity writes for KSP models. By turning this up to 2048 for the bump/normal image I got the samed results in KSP as I was seeing in Unity. \u003C/p\u003E\u003Cp\u003ESo, problem solved and I can move onto the next issue. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Absolution","CreatedById":4156,"CreatedDateTime":"2014-04-04T00:47:30Z","Content":"\n\u003Cp\u003EThanks a lot for this thread! I\u0027ve always understood the theory behind normal maps but never understood how to make them work. Now I do. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EMy first try at making a panel by normal map worked out okay. However, I noticed that the \u0022gap\u0022 between panels are quite subtle. I can only tell that it\u0027s there because I know it\u0027s supposed to be but a casual observer probably cant tell the difference between the normally mapped texture and a plain one.\u003C/p\u003E\u003Cp\u003EI am using a 2048x map as suggested above but I am not really sure how big to make the \u0022gap\u0022. At the moment its only 3 pixels wide which, in retrospect, is quite tiny. I will, of course, experiment on my own to find something that works for me but I was wondering if there was a \u0022best practice\u0022 or \u0022rule of thumb\u0022 people have come up with when it comes to good execution of a normal map? Any tips?\u003C/p\u003E\u003Cp\u003E(Sorry to bring back a relatively old thread but it\u0027s a good one and deserves more discussion.)\u003C/p\u003E\n"}]}