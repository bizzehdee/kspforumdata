{"TopicId":107992,"ForumId":69,"TopicTitle":"How to modify settings.cfg for PPJoy in 1.0.2?","CreatedByName":"taylornate","CreatedById":33202,"CreatedDateTime":"2015-05-07T00:39:12Z","PageNum":1,"Articles":[{"CreatedByName":"taylornate","CreatedById":33202,"CreatedDateTime":"2015-05-07T00:39:12Z","Content":"\n\u003Cp\u003EI\u0027m trying to use PPJoy joystick remixer to force KSP to use a calibrated version of my joystick. I\u0027ve done this long ago in a previous version, and this required editing settings.cfg to manually select the virtual stick. However, settings.cfg now uses a different format than was explained in the original thread on this matter ( \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/42683-How-to-fix-horribly-calibrated-Joysticks-in-KSP-(Workaround)\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/42683-How-to-fix-horribly-calibrated-Joysticks-in-KSP-(Workaround)\u003C/a\u003E ).\u003C/p\u003E\u003Cp\u003EMy settings.cfg now looks like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EAXIS_PITCH\u003Cbr\u003E{\u003Cbr\u003E\tPRIMARY\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = Logitech Extreme 3D Pro\u003Cbr\u003E\t\taxis = 1\u003Cbr\u003E\t\tinv = False\u003Cbr\u003E\t\tsensitivity = 1\u003Cbr\u003E\t\tdeadzone = 0.05\u003Cbr\u003E\t\tscale = 1\u003Cbr\u003E\t\tgroup = 0\u003Cbr\u003E\t\tmodeMask = 7\u003Cbr\u003E\t}\u003Cbr\u003E\tSECONDARY\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = None\u003Cbr\u003E\t\taxis = -1\u003Cbr\u003E\t\tinv = False\u003Cbr\u003E\t\tsensitivity = 1\u003Cbr\u003E\t\tdeadzone = 0.05\u003Cbr\u003E\t\tscale = 1\u003Cbr\u003E\t\tgroup = 0\u003Cbr\u003E\t\tmodeMask = -1\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI tried changing \u0022Logitech Extreme 3D Pro\u0022 to \u0022PPJoy Virtual Joystick 1\u0022 to match what it\u0027s called in Windows game controller configuration, but that just caused KSP to hang when I entered the settings page to look at it.\u003C/p\u003E\u003Cp\u003EMy settings.cfg from an older version of KSP looks like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EAXIS_PITCH\u003Cbr\u003E{\u003Cbr\u003E\tname = VirY\u003Cbr\u003E\tid = joy0.1\u003Cbr\u003E\tinv = False\u003Cbr\u003E\tsensitivity = 1\u003Cbr\u003E\tdeadzone = 0.05\u003Cbr\u003E\tscale = 1\u003Cbr\u003E\tgroup = 0\u003Cbr\u003E\tswitchState = Any\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAs you can see, the joystick selection is done via the id setting, which doesn\u0027t seem to exist in 1.0.2.\u003C/p\u003E\u003Cp\u003EAs an aside... Why on Earth does Unity seem indifferent to calibration? To me that seems like a pretty glaring flaw...\u003C/p\u003E\u003Cp\u003Ee: There is also this, at the beginning of the control settings:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EINPUT_DEVICES\u003Cbr\u003E{\u003Cbr\u003E\tLogitech Extreme 3D Pro = 0\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI tried changing two things here. (1) I changed the 0 to a 1. (2) I changed it back to a 0, changed the name here and under the axis to the PPJoy name. Neither of these attempts panned out.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-07T00:53:22Z\u0022 title=\u002205/07/2015 12:53  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 7, 2015\u003C/time\u003E by taylornate\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"taylornate","CreatedById":33202,"CreatedDateTime":"2015-05-09T23:25:04Z","Content":"\n\u003Cp\u003ETo give a bit of background, the problem is that Unity ignores the joystick calibration for some reason, making some joysticks unusable. I can\u0027t be the only one trying to work around it in 1.0. An official work-around would be lovely. It\u0027s really frustrating to not be able to use my joystick.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-11T08:05:36Z","Content":"\n\u003Cp\u003ESorry I don\u0027t know how to help you with this taylornate.\u003C/p\u003E\n"},{"CreatedByName":"hellbender","CreatedById":18199,"CreatedDateTime":"2015-05-11T10:10:08Z","Content":"\n\u003Cp\u003EThis is a serious issue with Unity and it makes using certain joysticks a pain. \u003C/p\u003E\u003Cp\u003EAlong with proper dual screen support, I feel these are the last two things really holding back KSP.\u003C/p\u003E\u003Cp\u003EAnyhow, I personally switched from PPJoy and GlovePIE to using \u003Cstrong\u003EvJoy\u003C/strong\u003E and \u003Cstrong\u003EFreePIE\u003C/strong\u003E for my Microsoft Sidewinder Force Feedback 2 and Saitek X-52 (throttle only).\u003C/p\u003E\u003Cp\u003EI also use a small program called \u003Cstrong\u003EsimFFB\u003C/strong\u003E to keep my stick centered as there is no centering force present otherwise.\u003C/p\u003E\u003Cp\u003EUninstall PPJoy, get vJoy instead (no need to disable driver signing in Windows for vJoy), then create a virtual joystick.\u003C/p\u003E\u003Cp\u003EYou can set up your virtual stick with whatever physical input you want in FreePIE (in my case: X-Y-Z axes on the MSFFB2, throttle and small slider on the X-52 throttle) and bind axes directly in the KSP Input screen. \u003C/p\u003E\u003Cp\u003ESometimes KSP will pick up the physical axis instead of the virtual axis when you\u0027re binding it (e.g. \u0022Microsoft Sidewinder JoystickAxis 1\u0022 instead of \u0022vJoy Virtual JoystickAxis 1\u0022). \u003C/p\u003E\u003Cp\u003EJust keep rebinding till it shows you the virtual axis (shouldn\u0027t take you more than one or two tries, otherwise something is wrong).\u003C/p\u003E\u003Cp\u003EAs for joystick buttons and POV hats, try to bind as few of them as possible within KSP. Instead, bind keyboard keys for default functions to buttons directly in FreePIE or some other programming software.\u003C/p\u003E\u003Cp\u003EFor example, the big button on my X-52 throttle \u0022\u003Cstrong\u003Ejoystick[2].getDown(29)\u003C/strong\u003E\u0022 is bound to \u0022\u003Cstrong\u003EKey.M\u003C/strong\u003E\u0022 and brings up map view. Much easier than getting KSP to recognise the joystick button in the Input screen.\u003C/p\u003E\u003Cp\u003EThe POV hat on my MSFFB2 directly triggers the up, down, left and right keyboard keys (for changing the camera angle in external views -- I use TrackIR for internal views).\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003Evjoy\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://vjoystick.sourceforge.net/site/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://vjoystick.sourceforge.net/site/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EFreePIE\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://andersmalmgren.github.io/FreePIE/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://andersmalmgren.github.io/FreePIE/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EsimFFB\u003C/strong\u003E (for those using a stick with Force Feedback)\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://forums.eagle.ru/showpost.php?p=1394206\u0026amp;postcount=18\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forums.eagle.ru/showpost.php?p=1394206\u0026amp;postcount=18\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnd here\u0027s the FreePIE code which I use (joystick[1] is the MSFFB2, joystick[2] is the Saitek X-52):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E# KERBAL virtual joystick\u003Cbr\u003E\u003Cbr\u003Efrom System import Int16\u003Cbr\u003E\u003Cbr\u003Eif starting:\u003Cbr\u003E\tsystem.setThreadTiming(TimingTypes.HighresSystemTimer)\u003Cbr\u003E\tsystem.threadExecutionInterval = 5\u003Cbr\u003E\tjoystick[1].setRange(Int16.MinValue / 2.001, Int16.MaxValue / 2.001)\u003Cbr\u003E\tjoystick[2].setRange(Int16.MinValue / 2.001, Int16.MaxValue / 2.001)\u003Cbr\u003E\u003Cbr\u003E# map analogue\u003Cbr\u003EvJoy[0].x = joystick[1].x\u003Cbr\u003EvJoy[0].y = joystick[1].y\u003Cbr\u003EvJoy[0].z = -1 * joystick[2].z\u003Cbr\u003EvJoy[0].rz = joystick[1].zRotation\u003Cbr\u003EvJoy[0].slider = -1 * joystick[1].sliders[0]\u003Cbr\u003EvJoy[0].dial = joystick[2].sliders[0]\u003Cbr\u003E\u003Cbr\u003E# map keys to buttons\u003Cbr\u003Ekeyboard.setKey(Key.NumberPadMinus, joystick[2].getDown(19))\u003Cbr\u003Ekeyboard.setKey(Key.NumberPadPlus, joystick[2].getDown(21))\u003Cbr\u003Ekeyboard.setKey(Key.M, joystick[2].getDown(29))\u003Cbr\u003E\u003Cbr\u003E# map pov hats\u003Cbr\u003Ekeyboard.setKey(Key.UpArrow, joystick[1].pov[0] == 0)\u003Cbr\u003Ekeyboard.setKey(Key.RightArrow, joystick[1].pov[0] == 9000)\u003Cbr\u003Ekeyboard.setKey(Key.DownArrow, joystick[1].pov[0] == 18000)\u003Cbr\u003Ekeyboard.setKey(Key.LeftArrow, joystick[1].pov[0] == 27000)\u003Cbr\u003E\u003Cbr\u003E# end of script\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-11T10:16:24Z\u0022 title=\u002205/11/2015 10:16  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 11, 2015\u003C/time\u003E by hellbender\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"texasflyboy","CreatedById":105498,"CreatedDateTime":"2015-10-07T17:14:48Z","Content":"\n\u003Cp\u003ESo for those of us that don\u0027t program regularly or write scripts, would you suggest a tutorial or walk through explaining how to write and implement scripts like this in FreePIE? \u003C/p\u003E\u003Cp\u003EI think your example has all I need to map what I need to map (for the X-55) but would also be interested in understanding what syntax etc. this script uses so I can write it properly. \u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"}]}