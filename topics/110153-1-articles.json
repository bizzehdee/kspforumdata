{"TopicId":110153,"ForumId":20,"TopicTitle":"Memory Crashes and trying to prevent them - tips and tricks","CreatedByName":"Minwaabi","CreatedById":91050,"CreatedDateTime":"2015-05-20T21:39:13Z","PageNum":1,"Articles":[{"CreatedByName":"Minwaabi","CreatedById":91050,"CreatedDateTime":"2015-05-20T21:39:13Z","Content":"\n\u003Cp\u003EI wanted to make a thread to help other people deal with the memory crashes that frequently come up when running \u0022too many mods\u0022, and now that I finally have my game running fairly well, I can start posting what I\u0027ve found. I know some folks are very experienced with this, but I\u0027m sure we have some new players with the release of 1.0 who don\u0027t know how to get KSP to run with lots of mods without crashing. Personally, I can still use some help in this. It used to be that I could just use ATM and everything worked fine, so I\u0027m not terribly experienced, but we need to start somewhere. \u003C/p\u003E\u003Cp\u003ESo, I\u0027ve got about 1 GB of stuff in my GameData folder and about 60 mods. When I run the game normally I have about 3.1 \u002B/- .1 GB of RAM used and I get crashes just about any time I try to change the scene. This makes the game virtually unplayable. For those of you who are new to the party, that\u0027s because KSP is a 32 bit application for windows and it won\u0027t use more than about 3.5 GB of RAM. Use more than that, and bam crash to desktop. \u003C/p\u003E\u003Cp\u003EWhen I tried ATM \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/59005-1-0-Release-5-0-April-28-2015-Active-Texture-Management-Save-RAM%21/page373\u0022 rel=\u0022external nofollow\u0022\u003EActive Texture Management\u003C/a\u003E, basically nothing happened. I still use about 3.1 \u002B/- .1 GB of RAM, but I can at least do stuff because I can switch scenes and launch rockets and well ... do stuff. This is at least an improvement, but I did notice it messed up the textures for some mods (Infernal Robotics model rework and expansion). So I removed ATM.\u003C/p\u003E\u003Cp\u003ENext, I tried -force-opengl. Instructions on how to do this is below. After putting in the commands correctly, I am now getting about 2.1 \u002B/- .1 GB of RAM, but no more shadows. The graphics also seem to be decidedly worse, but not by much and all the textures work fine. I launched a rocket and noticed that the memory usage increased about 100 MB but stayed pretty consistent around 2.2 GB. The game seems stable and playable and this option actually improves my FPS too (but others have had the opposite results).\u003C/p\u003E\u003Cp\u003EI have also tried - force-d3d11. After putting in the commands correctly, I am getting about 2.2 \u002B/- .1 GB of RAM, with no negative drawbacks I can see. I launched a rocket and noticed that the memory usage increased about 100 MB but stayed pretty consistent around 2.3 GB. The game seems rather stable and quite playable even with a bunch of mods. \u003C/p\u003E\u003Cp\u003EAdditionally, I have tried using the stock renderer settings (no special instructions), but changed the settings to halve my texture resolution. I *think* I was getting about 2.6 \u002B/- .2 GB or RAM usage. This was also a little bit faster than the opengl setting. I\u0027m not 100% sure if I actually halved my texture resolution or quartered it. When I tried to test out my d3d11 again to check FPS, I was getting about 1.3 GB or RAM. I think I picked up a bug that forced my texture resolution to the minimum and told me it was different than it was. (This has happened to other people). So *maybe* d3d11 \u002B lowest texture settings = 1.3 GB for my install.\u003C/p\u003E\u003Cp\u003EOkay, so I figured out what the problem was with opengl and d3d11. If you are using steam, you have to set it up differently than if you are not running steam. I found this over \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/84203-Less-memory-usage-by-using-OpenGL\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIf you use Steam, simply right-click Kerbal Space Program in your Library, click \u0022Set launch options...\u0022 and put in \u0022-force-opengl\u0022. You have to start the game out of steam (or the start menu) for this to work, if you start the KSP.exe manually it will ignore your Steam launch options!\u003Cp\u003EOtherwise, or if you don\u0027t want to start through Steam, open your Kerbal Space Program folder, right-click KSP.exe, select \u0022Create shortcut\u0022, and put \u0022-force-opengl\u0022 in the \u0022Target\u0022 field after the quotation marks, with a blank in between. You can now put that shortcut where you need it, e.g. onto your desktop.\u003C/p\u003E\u003Cp\u003EAlternatively, if you want to start KSP through the start menu, right-click on Kerbal Space Program in there, and put the \u0022-force-opengl\u0022 at the end of the \u0022target\u0022-field, again with a blank in between. (This does not work if you have the Steam version, as the start menu link then links to Steam)\u003C/p\u003E\u003Cp\u003EUsing the appropriate instructions (the ones for steam users), I was able to get -force-opengl to work. I now have about 2 \u002B/- .1 GB of RAM usage. I have to go to work soon so I don\u0027t have time for further testing, but this looks very promising.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMore helpful hints are below and I\u0027ll try some of those later and report back on how big an improvement they actually make. If you have some tips. Please post!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-22T20:34:35Z\u0022 title=\u002205/22/2015 08:34  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 22, 2015\u003C/time\u003E by Minwaabi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"basic.syntax","CreatedById":109920,"CreatedDateTime":"2015-05-20T21:49:36Z","Content":"\n\u003Cp\u003E\u003Cem\u003E\u0022about 60 mods\u0022 \u003C/em\u003E\u003C/p\u003E\u003Cp\u003EIt sounds like you\u0027ve tried some good things to minimize ram load, such as ATM, but, the camel can only carry so many straws before its back is broken. Would you call all 60 of those mods \u0022essential?\u0022 You could make a copy of your complete KSP installation in a separate folder, to explore a subset of those mods, and run different scenarios on different copies.\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2015-05-21T00:54:09Z","Content":"\n\u003Cp\u003EOne thing I\u0027ve found is that for many mods I\u0027ll only use a few of the parts and I can significantly reduce the initial RAM used by deleting unused parts. For others there are a few (sometimes large) parts that I never use and can delete - deleting just a few parts from 10 or 20 mods can make a big difference.\u003C/p\u003E\n"},{"CreatedByName":"Minwaabi","CreatedById":91050,"CreatedDateTime":"2015-05-21T22:17:49Z","Content":"\n\u003Cp\u003EI\u0027m going to commence more testing shortly, but I thought a good question to ask is: what is a good goal to set for memory usage? Obviously, as low as possible, but I\u0027m talking about the best combinations of features (mods/resolution/etc) and stability. So in other words: How much RAM usage is considered a stable KSP game? 2MB? 2.5GB?\u003C/p\u003E\u003Cp\u003EAlso, does anyone know of any drawbacks to using -force-opengl or -force-d3d11?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-22T01:09:04Z\u0022 title=\u002205/22/2015 01:09  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 22, 2015\u003C/time\u003E by Minwaabi\u003C/strong\u003E\n\u003C/span\u003E\n"}]}