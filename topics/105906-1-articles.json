{"TopicId":105906,"ForumId":15,"TopicTitle":"Is anyone else having trouble with stack nodes on modded parts?","CreatedByName":"Quiznos323","CreatedById":114900,"CreatedDateTime":"2015-04-29T06:51:40Z","PageNum":1,"Articles":[{"CreatedByName":"Quiznos323","CreatedById":114900,"CreatedDateTime":"2015-04-29T06:51:40Z","Content":"For some reason I\u0027m having a really hard time getting modded pieces to attach to stock ones. They will only attach if they are parts with two nodes (top and bottom) and I hold Alt and connect the second node ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif) They surface attach no problem. Anyone else come across this or know of a solution?\n\nEx: \n\n![zi8LPRyh.png](http://i.imgur.com/zi8LPRyh.png)\n\n![f4g1przh.png](http://i.imgur.com/f4g1przh.png)"},{"CreatedByName":"AlphaAsh","CreatedById":105348,"CreatedDateTime":"2015-04-29T06:53:33Z","Content":"[http://forum.kerbalspaceprogram.com/threads/117365-We-re-working-on-1-0-1?p=1876977\u0026viewfull=1#post1876977](https://forum.kerbalspaceprogram.com/threads/117365-We-re-working-on-1-0-1?p=1876977\u0026viewfull=1#post1876977)\n\nYou should see parts mods being updated soon."},{"CreatedByName":"Quiznos323","CreatedById":114900,"CreatedDateTime":"2015-04-29T07:04:59Z","Content":"\u003E \n\u003E [http://forum.kerbalspaceprogram.com/threads/117365-We-re-working-on-1-0-1?p=1876977\u0026viewfull=1#post1876977](https://forum.kerbalspaceprogram.com/threads/117365-We-re-working-on-1-0-1?p=1876977\u0026viewfull=1#post1876977)\n\u003E You should see parts mods being updated soon.\n\nHmm interesting... The cockpit above is from my own mod so I can fix all of the parts that are doing this. How exactly do the nodes have to work now? The only part of mine that works correctly with stack nodes is the one that I have nodes defined with NODE{}. I looked through stock configs and they seem to still have the old node coordinates.."},{"CreatedByName":"AlphaAsh","CreatedById":105348,"CreatedDateTime":"2015-04-29T07:31:09Z","Content":"I\u0027m looking at the issue myself today. As far as I can see it\u0027s a case of making sure node orientation is set correctly to -1.0 or 1.0, rather than just letting it default.\n\n**Edited \u003Ctime datetime=\u00222015-04-29T07:46:53Z\u0022 title=\u002204/29/2015 07:46  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 29, 2015\u003C/time\u003E by AlphaAsh**"},{"CreatedByName":"Quiznos323","CreatedById":114900,"CreatedDateTime":"2015-04-29T07:40:35Z","Content":"Ok, I\u0027ll see if that is the issue on mine as well."},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-04-29T07:50:48Z","Content":"I suspect this will be a problem with many mods. The stock parts afaik are all correct. If you have game object nodes that don\u0027t work you will need to turn them around 180 degrees. The correct orientation is \u002BZ.\n\nThere are also other fixes to the stack nodes for anyone interested, which allow you to create more varied parts without side-effects. [Here\u0027s what I found.](https://forum.kerbalspaceprogram.com/threads/117411)\n\n![9jGSKa7.png](http://i.imgur.com/9jGSKa7.png)"},{"CreatedByName":"Quiznos323","CreatedById":114900,"CreatedDateTime":"2015-04-29T07:57:34Z","Content":"\u003E \n\u003E I suspect this will be a problem with many mods. The stock parts afaik are all correct. If you have game object nodes that don\u0027t work you will need to turn them around 180 degrees. The correct orientation is \u002BZ.\n\u003E There are also other fixes to the stack nodes for anyone interested, which allow you to create more varied parts without side-effects. [Here\u0027s what I found.](https://forum.kerbalspaceprogram.com/threads/117411)\n\u003E \n\u003E [http://i.imgur.com/9jGSKa7.png](http://i.imgur.com/9jGSKa7.png)\n\nAhh this info is great to know, thanks! Good thing I made sure all of my attach nodes were facing \u002BZ from the start."},{"CreatedByName":"Beale","CreatedById":70533,"CreatedDateTime":"2015-04-29T13:24:38Z","Content":"\u003E \n\u003E I suspect this will be a problem with many mods. The stock parts afaik are all correct. If you have game object nodes that don\u0027t work you will need to turn them around 180 degrees. The correct orientation is \u002BZ.\n\u003E There are also other fixes to the stack nodes for anyone interested, which allow you to create more varied parts without side-effects. [Here\u0027s what I found.](https://forum.kerbalspaceprogram.com/threads/117411)\n\u003E \n\u003E [http://i.imgur.com/9jGSKa7.png](http://i.imgur.com/9jGSKa7.png)\n\nI may feel awful silly, but you can define stack nodes in Unity?"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-04-29T13:32:11Z","Content":"\u003E \n\u003E I may feel awful silly, but you can define stack nodes in Unity?\n\n[Indeed you can](https://forum.kerbalspaceprogram.com/threads/95336?p=1450592\u0026viewfull=1#post1450592). Best way really. No need to mess around with numbers. It\u0027s just an empty referenced with a module. Very convenient. Remember that orientation must be \u002BZ and not what it says in that thread.\n\n- - - Updated - - -\n\nI\u0027ve edited my post there to reflect that. Remember to give them names like \u0022top\u0022 and \u0022bottom\u0022 if other modules make use of the nodes, like the docking node."},{"CreatedByName":"Beale","CreatedById":70533,"CreatedDateTime":"2015-04-29T15:01:18Z","Content":"\u003E \n\u003E [Indeed you can](https://forum.kerbalspaceprogram.com/threads/95336?p=1450592\u0026viewfull=1#post1450592). Best way really. No need to mess around with numbers. It\u0027s just an empty referenced with a module. Very convenient. Remember that orientation must be \u002BZ and not what it says in that thread.\n\u003E - - - Updated - - -\n\u003E \n\u003E I\u0027ve edited my post there to reflect that. Remember to give them names like \u0022top\u0022 and \u0022bottom\u0022 if other modules make use of the nodes, like the docking node.\n\nThe more you know eh!\n\nMany thanks for the information. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Starbuckminsterfullerton","CreatedById":117494,"CreatedDateTime":"2015-04-29T23:23:40Z","Content":"\u003E \n\u003E [Indeed you can](https://forum.kerbalspaceprogram.com/threads/95336?p=1450592\u0026viewfull=1#post1450592). Best way really. No need to mess around with numbers. It\u0027s just an empty referenced with a module. Very convenient. Remember that orientation must be \u002BZ and not what it says in that thread.\n\nIs there a way to snap an empty object to a mesh vertex in unity? I ended up using the old coordinate method in the past because I couldn\u0027t line them up precisely, but since I have to update the nodes anyway it\u0027s a good time to try again. Btw holding v didn\u0027t seem to do it."},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-04-29T23:31:36Z","Content":"\u003E \n\u003E Is there a way to snap an empty object to a mesh vertex in unity? I ended up using the old coordinate method in the past because I couldn\u0027t line them up precisely, but since I have to update the nodes anyway it\u0027s a good time to try again. Btw holding v didn\u0027t seem to do it.\n\nYou\u0027ll probably have to figure out the 3D coordinates of that vertex in Blender (or whatever 3D modelling program you\u0027re using), and then transcribe the values manually to the empty GameObject you\u0027re using to define the node."},{"CreatedByName":"Quiznos323","CreatedById":114900,"CreatedDateTime":"2015-04-30T00:06:08Z","Content":"I\u0027m still a bit confused on which values exactly to change in the nodes...I\u0027ve been looking at some configs and can\u0027t really tell. For example I was noticing that with the flat base in procedural fairings I can\u0027t connect the fairings, and the others I can, but the node values are exactly the same except for some different height values.\n\nAny chance someone could post a successful before and after of their node in a config?"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-04-30T05:56:09Z","Content":"\u003E \n\u003E I\u0027m still a bit confused on which values exactly to change in the nodes...I\u0027ve been looking at some configs and can\u0027t really tell. For example I was noticing that with the flat base in procedural fairings I can\u0027t connect the fairings, and the others I can, but the node values are exactly the same except for some different height values.\n\u003E Any chance someone could post a successful before and after of their node in a config?\n\nThe second three numbers define the orientation. If you\u0027re working with axis-aligned nodes, then one of those numbers will be -1 or 1. change it to its negative. -1 becomes 1 and vice versa. If you\u0027d dealing with angled nodes I would forget all that and just switch to EGOs. In fact I would switch to EGOs anyway. \u002BZ then is all you need to know.\n\n**Edited \u003Ctime datetime=\u00222015-04-30T06:00:17Z\u0022 title=\u002204/30/2015 06:00  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 30, 2015\u003C/time\u003E by Cpt. Kipard**"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2015-04-30T09:43:52Z","Content":"\u003E \n\u003E Is there a way to snap an empty object to a mesh vertex in unity?\n\nNot any that I know of. I just used Blender empties and \u0022snap to vertex\u0022 for all nodes and thrustTransforms. Unity treats Blender empties as it\u0027s own."},{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-05-01T01:24:18Z","Content":"\u003E \n\u003E The second three numbers define the orientation. If you\u0027re working with axis-aligned nodes, then one of those numbers will be -1 or 1. change it to its negative. -1 becomes 1 and vice versa. If you\u0027d dealing with angled nodes I would forget all that and just switch to EGOs. In fact I would switch to EGOs anyway. \u002BZ then is all you need to know.\n\nCan we get someone from squad to explain what they have changed with the node definitions, or at least a refined and detailed descrition of how to set stack nodes in unity. \n\nIn fact the cfg files have had rather consistent appearance over the last few versions have changed alot, I think the Squad folks should detail the changes and effects.\n\n\u003E \n\u003E For some reason I\u0027m having a really hard time getting modded pieces to attach to stock ones. They will only attach if they are parts with two nodes (top and bottom) and I hold Alt and connect the second node ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif) They surface attach no problem. Anyone else come across this or know of a solution?\n\nEven scale mods of stock parts do not attach properly, so \n\nI made a scale mod of the RT10 SFRB it will attach to the MK1 capsule in all orientations on stack nodes, but a half scale mod of RT10 will only attach to the bottom. So there appears to be a bug in the program on that limits further attachment. \n\nMy own part constructs will attach on the top node correctly but when I try to attach from the bottom instead they attach at the 0,0,0 position. \n\nThis is something squad needs to explain precisely.\n\n**Edited \u003Ctime datetime=\u00222015-05-01T03:49:54Z\u0022 title=\u002205/01/2015 03:49  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 1, 2015\u003C/time\u003E by sumghai**\n  \nMerged consecutive posts"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-05-01T04:02:34Z","Content":"\u003E \n\u003E Can we get someone from squad to explain what they have changed with the node definitions, or at least a refined and detailed descrition of how to set stack nodes in unity. \n\u003E -snip-\n\u003E \n\u003E This is something squad needs to explain precisely.\n\nSQUAD developers are often too busy to respond to individual questions, so it\u0027s up to us add-on authors to figure out the answers.\n\nTo cut a long story short:\n\n - The stack attachment node definition format *has not changed* - it is still of the form:\n\n    node_stack_bottom = x, y, z, angx, angy, angz, sizenode_stack_top = x, y, z, angx, angy, angz, sizenode_attach = x, y, z, angx, angy, angz, size\n\n - What SQUAD *has* changed is the underlying logic of the game that handles stack nodes. In 0.90 and earlier, the direction stack nodes face didn\u0027t matter (this was actually a bug). This was fixed in 1.0, to the stack node directions now *do* matter.\n\nConsider the relationship between Blender and Unity coordinate systems:\n\n![Blender_to_KSP_Co-Ordinates.png](http://www.alternatewars.com/Games/KSP/Tut1/Blender_to_KSP_Co-Ordinates.png)\n\nIn the case of the stack nodes, note that \u0022Up\u0022 is Y\u002B and \u0022Down\u0022 is Y-.\n\nSo to fix your add-on part\u0027s stack nodes, make sure that the sign of the angy parameter in each of your stack node definitions is correct (i.e. 1.0 for a stack node facing upwards, and -1.0 for downwards)"},{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-05-01T23:41:00Z","Content":"\u003E \n\u003E SQUAD developers are often too busy to respond to individual questions, so it\u0027s up to us add-on authors to figure out the answers.\n\u003E To cut a long story short:\n\u003E \n\u003E  - The stack attachment node definition format *has not changed* - it is still of the form:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     node_stack_bottom = x, y, z, angx, angy, angz, sizenode_stack_top = x, y, z, angx, angy, angz, sizenode_attach = x, y, z, angx, angy, angz, size\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  - What SQUAD *has* changed is the underlying logic of the game that handles stack nodes. In 0.90 and earlier, the direction stack nodes face didn\u0027t matter (this was actually a bug). This was fixed in 1.0, to the stack node directions now *do* matter.\n\u003E \n\u003E Consider the relationship between Blender and Unity coordinate systems:\n\u003E \n\u003E [http://www.alternatewars.com/Games/KSP/Tut1/Blender_to_KSP_Co-Ordinates.png](http://www.alternatewars.com/Games/KSP/Tut1/Blender_to_KSP_Co-Ordinates.png)\n\u003E \n\u003E In the case of the stack nodes, note that \u0022Up\u0022 is Y\u002B and \u0022Down\u0022 is Y-.\n\u003E \n\u003E So to fix your add-on part\u0027s stack nodes, make sure that the sign of the angy parameter in each of your stack node definitions is correct (i.e. 1.0 for a stack node facing upwards, and -1.0 for downwards)\n\nNice explanation but it did not work, i\u0027m going to take a close look at my stock scale mod and see if it set differently. This is a much deeper problem than the orientation vector."},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-05-02T00:07:26Z","Content":"\u003E \n\u003E Nice explanation but it did not work, i\u0027m going to take a close look at my stock scale mod and see if it set differently. This is a much deeper problem than the orientation vector.\n\nScaling might be tangentially related, but for the most part, is a different animal altogether.\n\nTry starting a new thread and post your config for us to examine."},{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-05-02T00:22:10Z","Content":"\u003E \n\u003E Scaling might be tangentially related, but for the most part, is a different animal altogether.\n\u003E Try starting a new thread and post your config for us to examine.\n\nI managed to get it to work, it would appear that they flipped the polarity on the attach vector, so now I will have to go flip it on all the scale mods.\n\nScaling is simply a means of reducing the parameters of working with a full mod, I did get it to work, almost all of my old scale mods will have to be shifted. \n\nSome bug."},{"CreatedByName":"Starbuckminsterfullerton","CreatedById":117494,"CreatedDateTime":"2015-05-02T20:43:13Z","Content":"\u003E \n\u003E Unity treats Blender empties as it\u0027s own.\n\nThank you, that\u0027s one less thing I have to do in unity\u0027s miserable interface.\n\n\u003E \n\u003E \\\n\u003E Consider the relationship between Blender and Unity coordinate systems:\n\nSo if I use blender empties I have to rotate them 90\\* from where they would be in unity right?"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-05-02T22:47:17Z","Content":"\u003E \n\u003E So if I use blender empties I have to rotate them 90\\* from where they would be in unity right?\n\nIf you\u0027re using the latest versions of Blender and Unity editor, there is a built-in Blender prefab system that automatically handles Blender model import and corrects the orientation without further user intervention."},{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-05-03T12:34:30Z","Content":"\u003E \n\u003E If you\u0027re using the latest versions of Blender and Unity editor, there is a built-in Blender prefab system that automatically handles Blender model import and corrects the orientation without further user intervention.\n\nYep, the only problem is that if you try to shift your zero position in blender from its starting zero position, depending on how you set up your game object unity may try to use the original position, you have to still keep an eye on the coordinates in Unity to get the orientation and zero-ing that you want."},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-05-03T21:12:13Z","Content":"\u003E \n\u003E Yep, the only problem is that if you try to shift your zero position in blender from its starting zero position, depending on how you set up your game object unity may try to use the original position, you have to still keep an eye on the coordinates in Unity to get the orientation and zero-ing that you want.\n\nIf you shift your zero position in Blender, remember to apply the position/rotation/scale transformation, so that Unity will also update itself accordingly."},{"CreatedByName":"PB666","CreatedById":107380,"CreatedDateTime":"2015-05-04T12:17:19Z","Content":"\u003E \n\u003E If you shift your zero position in Blender, remember to apply the position/rotation/scale transformation, so that Unity will also update itself accordingly.\n\nAnd you can still have a problem in Unity. Let me give an example where this can pop up, I should add that it might also shift back to the old axis. Suppose that you want to add a collider mesh to a another design. In this case you create a game object that contains two parallel created game objects. Unity will want to place the first mesh into the level 1 object, in this case you move the object to the second layer, and you might find the mesh reverts to the old rotation or old reference coordinates. Therefore if you are making complex parts in Unity you have to continually check to make sure the coordinates and orientation remain set properly."}]}