{"TopicId":88659,"ForumId":15,"TopicTitle":"Cargo bay doors and surface attachment.","CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-10-27T14:01:44Z","PageNum":1,"Articles":[{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-10-27T14:01:44Z","Content":"\n\u003Cp\u003EHey all, I have a bit of a question, that I\u0027m hoping someone can help me with.\u003C/p\u003E\u003Cp\u003EI\u0027m trying to make some cargo bays, and I want to replicate the behavior of the (now stock) SP\u002B cargo bays, in that the body of the bay accepts surface attachment, but the doors do not. So far, I have the collision meshes animating properly, but surface attachment appears to be all or nothing. If I allow attachment, the VAB allows parts to be stuck to the doors, which of course results in \u0022floating\u0022 parts, and the doors pass through them when animating. \u003C/p\u003E\u003Cp\u003EIs there a layer setting or something, that will specify certain collision meshes as being non-attachable for surface attachment?\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-10-27T15:10:28Z","Content":"\n\u003Cp\u003EHilariously, when googling for an answer to this, I\u0027m finding my own thread here. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-10-27T20:18:33Z","Content":"\n\u003Cp\u003EI had a go with the .mu importer and a little plugin to write the layer of specific game objects to the log. No luck so far. What appears to be bay door colliders do not seem to exist (gives null-ref), and the doors themselves are layer zero. Unless it\u0027s driven with tags...\u003C/p\u003E\u003Cp\u003EAsk Porkjet?\u003C/p\u003E\u003Cp\u003EI\u0027ll keep you posted if I do find anything - it will be useful for one of my projects.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-10-27T20:25:33Z","Content":"\n\u003Cp\u003EBingo!! The tag is set to NoAttach. \u003C/p\u003E\u003Cp\u003EFor reference, I used the following code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Text;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Enamespace UtilPlugins\u003Cbr\u003E{\u003Cbr\u003E    public class LayerFinder : PartModule\u003Cbr\u003E    {\u003Cbr\u003E        [KSPField]\u003Cbr\u003E        public string objectName;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        GameObject _gameObject;\u003Cbr\u003E        [KSPField(isPersistant = false, guiActive = true, guiActiveEditor = true, guiName = \u0022layer\u0022)]\u003Cbr\u003E        public string thisLayer;\u003Cbr\u003E        [KSPField(isPersistant = false, guiActive = true, guiActiveEditor = true, guiName = \u0022tag\u0022)]\u003Cbr\u003E        public string thisTag;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        public override void OnStart(PartModule.StartState state)\u003Cbr\u003E        {\u003Cbr\u003E            base.OnStart(state);\u003Cbr\u003E            _gameObject = this.part.FindModelTransform(objectName).gameObject;\u003Cbr\u003E            if (_gameObject != null)\u003Cbr\u003E            {\u003Cbr\u003E                thisLayer = _gameObject.layer.ToString();\u003Cbr\u003E                thisTag = _gameObject.tag.ToString();\u003Cbr\u003E            }\u003Cbr\u003E            else\u003Cbr\u003E            {\u003Cbr\u003E                thisLayer = \u0022object not found\u0022;\u003Cbr\u003E                thisTag = \u0022object not found\u0022;\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E            if (HighLogic.LoadedSceneIsFlight)\u003Cbr\u003E            {\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E                _gameObject = this.part.FindModelTransform(objectName).gameObject;\u003Cbr\u003E                if (_gameObject != null)\u003Cbr\u003E                {\u003Cbr\u003E                    Debug.LogWarning(\u0022Layer is:\u0022 \u002B _gameObject.layer);\u003Cbr\u003E                    Debug.LogWarning(\u0022Tag is\u0022 \u002B _gameObject.tag);\u003Cbr\u003E                }\u003Cbr\u003E                else\u003Cbr\u003E                    Debug.LogError(\u0022object not found\u0022);\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = LayerFinder\u003Cbr\u003E    objectName = BayDoorL1\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ELicense: \u003Ca href=\u0022http://creativecommons.org/publicdomain/zero/1.0/\u0022 rel=\u0022external nofollow\u0022\u003ECC0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIt will spit the layer for the named GameObject out to the log, as well as the GUI menu.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-11T00:31:37Z\u0022 title=\u002212/11/2014 12:31  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 11, 2014\u003C/time\u003E by lo-fi\u003C/strong\u003E\n\u003Cbr\u003EUpdated source\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-10-27T20:44:42Z","Content":"\n\u003Cp\u003EYes, in so far as it\u0027s applied to the gameobject that has the mesh collider component applied, which also happens to be the mesh itself. There are some confusing artefacts from the .mu \u0026gt; .mu import process that threw me a little to start with, so ignore comments about the collider object not being present.\u003C/p\u003E\u003Cp\u003E I was going to message you, as this will no doubt be useful for your Skylon; you\u0027ve ninja\u0027d me rather successfully \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E Just posted a thread in add-on dev I was going to put forward for submission to your modding links too.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-10-27T20:47:24Z","Content":"\n\u003Cp\u003ENinja\u0027d indeed. since I posted the question I managed to read your new thread, delete the question and already add it to the compilation, lol!\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-10-27T20:50:24Z","Content":"\n\u003Cp\u003EHaha! Epicly ninja\u0027d \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-10-27T21:10:56Z","Content":"\n\u003Cp\u003Egreat bit of detective work lo-fi. little bit of undocumented feature no doubt would benefit many.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-10-27T21:45:19Z","Content":"\n\u003Cp\u003ECheers, I hope so! Seemed too good not to spread the word\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-10-28T15:27:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003EBingo!! The tag is set to NoAttach. \u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGreat! I was going to try contacting PorkJet today if we didn\u0027t figure anything out by now. Awesome job!\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-10-28T15:41:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003EBingo!! The tag is set to NoAttach. \u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NecroBones\u0022 data-cite=\u0022NecroBones\u0022\u003E\u003Cdiv\u003EGreat! I was going to try contacting PorkJet today if we didn\u0027t figure anything out by now. Awesome job!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EConfirmed. Tested, and working.\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-10-28T16:08:22Z","Content":"\n\u003Cp\u003EYou\u0027re welcome, glad to be able to help.\u003C/p\u003E\n"},{"CreatedByName":"Tokamak","CreatedById":115593,"CreatedDateTime":"2016-09-15T19:13:55Z","Content":"\n\u003Cp\u003E\nI hope it\u0027s okay to resurrect an old thread, but this is the closest I\u0027ve found to an answer to the question NecroBones asks. I\u0027m also trying to make a cargo bay part, and I have animations and collision meshes and all of that working, and want to disallow attachment to the doors.\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t quite understand the answer given, however. I\u0027ve successfully made animated parts so I thought I understood more or less what goes into the models and configs, but I\u0027ve not run into the issue of tags, so I\u0027m not clear on what I am meant to do. I\u0027d really appreciate it if someone could nudge me in the right direction.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Tokamak","CreatedById":115593,"CreatedDateTime":"2016-09-15T19:34:48Z","Content":"\n\u003Cp\u003E\nAh, nevermind. I think I\u0027ve got it. If anyone else finds this and is asking the same question, this may be useful:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/88679-for-future-reference-prevent-surface-attachment-on-a-specific-collider/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}