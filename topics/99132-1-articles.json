{"TopicId":99132,"ForumId":36,"TopicTitle":"Rotation and acceleration","CreatedByName":"thegreatgonz","CreatedById":135977,"CreatedDateTime":"2015-02-09T00:22:16Z","PageNum":1,"Articles":[{"CreatedByName":"thegreatgonz","CreatedById":135977,"CreatedDateTime":"2015-02-09T00:22:16Z","Content":"\n\u003Cp\u003E[i can\u0027t quite figure out the best place to ask this. Please let me know if I should take it somewhere else]\u003C/p\u003E\u003Cp\u003EI\u0027ve been noticing that rotating a ship can actually accelerate it by substantial fractions of a m/s, which violates conservation of momentum. I see this in the velocities reported by KER and kOS, but it\u0027s not just a mod issue: you can see these accelerations changing your trajectory in base KSP (it\u0027s easiest to see in the movement of the apsides in a near-circular orbit). This isn\u0027t just an issue of torque producing phantom forces either: you can set a ship spinning, and then turn off all sources of torque, and the ship\u0027s velocity will continue to oscillate as long as it\u0027s rotating.\u003C/p\u003E\u003Cp\u003EDoes anyone have a good explanation for what\u0027s going on here? My best guess is that KSP is \u0022measuring\u0022 the velocity somewhere other than the center of mass (either that or it\u0027s using something other than the center of mass as the center of rotation). I think that would explain everything I\u0027m seeing. If that\u0027s right, does anyone know what point it\u0027s measuring at?\u003C/p\u003E\u003Cp\u003EThe specific reason I ask is that I have a kOS script that\u0027s getting fouled up by the accelerations created by its own steering actions, so I\u0027d like to figure out a way to correct for the bogus accelerations and find the \u0027true\u0027 velocity of the ship.\u003C/p\u003E\n"},{"CreatedByName":"Konstantine the Great","CreatedById":103021,"CreatedDateTime":"2015-02-09T00:27:39Z","Content":"\n\u003Cp\u003EWell if you have rcs on then it is realistic.\u003C/p\u003E\n"},{"CreatedByName":"cicatrix","CreatedById":120831,"CreatedDateTime":"2015-02-09T00:39:11Z","Content":"\n\u003Cp\u003EDepends. This video demonstrates how to exploit this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/Lnvh08GBOII?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EProvided you have a great deal of free time and godly patience you can fly ANYWHERE with this \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"thegreatgonz","CreatedById":135977,"CreatedDateTime":"2015-02-09T04:29:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Konstantine the Great\u0022 data-cite=\u0022Konstantine the Great\u0022\u003E\u003Cdiv\u003EWell if you have rcs on then it is realistic.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhen I said \u0022turn off all sources of torque\u0022, that includes RCS. I\u0027ve also reproduced the problem on ships with no RCS.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cicatrix\u0022 data-cite=\u0022cicatrix\u0022\u003E\u003Cdiv\u003EDepends. This video demonstrates how to exploit this:\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not sure what\u0027s shown in that video is what I\u0027m talking about. The effect shown there is that when the ship\u0027s center of mass shifts relative to the structure, the structure stays fixed relative to the parent body, whereas in reality the center of mass should stay fixed while the structure moves. However, being able to move the COM within the structure is key to this effect: you only change velocity when you\u0027re pumping fuel. The issue I\u0027m talking about can occur even when there\u0027s no mass movement at all within the ship, so its COM stays fixed relative to the structure.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-09T04:44:32Z","Content":"\n\u003Cp\u003EPhysX (the physics engine) doesn\u0027t simulate real physics. Instead it only calculates an approximation because of speed reasons.\u003C/p\u003E\u003Cp\u003EMy speculation:\u003C/p\u003E\u003Cp\u003EI think it starts at the root part and cycles through the part tree applying forces to each part and calculating it\u0027s new position relative to the next part in the upper node of the part tree. When finished the moved parts will result in a moved CoM but the physic engine doesn\u0027t reposition the whole craft. That would need another run through the part tree leading to recalculation of everything. (It calculated with wrong positions leading to wrong force numbers.) If there\u0027s a second pass if will refine all numbers but still won\u0027t be completely accurate and so on.\u003C/p\u003E\u003Cp\u003ESo a small error is introduced which amplifies on every physics pass and the further down of the part tree a part is. This is also one of the sources of rapid unplanned disassemblies: The errors accumulate at the leafes of the tree producing phantom forces causing a vessel to spin out of control of ripping it apart in certain circumstances.\u003C/p\u003E\u003Cp\u003EAs I said it\u0027s only a speculation by me. Without a look at the code I don\u0027t know for sure.\u003C/p\u003E\n"},{"CreatedByName":"duckofthemoon","CreatedById":43214,"CreatedDateTime":"2015-02-09T05:51:38Z","Content":"\n\u003Cp\u003EI think it\u0027s because the game calculates the orbits based on the movement of either the command pod or the root part of the vessel (not sure which) and so when you rotate it applies that sideways momentum to the orbit, because the root/command part is not the same as the center of mass. This means when the ship rotates (around the center of mass) the part for which the orbit is calculated spins around the CoM, changing the orbit. When you stop rotating, it stops moving \u0022sideways\u0022 and the orbit settles down. The way to eliminate the wiggle would be to recalculate the trajectory yourself using the CoM as the calculation.\u003C/p\u003E\u003Cp\u003ETL;DR: The orbit is predicted for a part other than the CoM\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-02-09T14:47:58Z","Content":"\n\u003Cp\u003EYou might be on to something.\u003C/p\u003E\u003Cp\u003EWhen referring to the \u0022Vessel\u0022 object in code for things such as position, rotation, etc., it is known that the \u0022Vessel\u0022 object is simply a link to the current \u0022Control From Here\u0022 part. \u003C/p\u003E\u003Cp\u003EWhile I have not messed around with orbits, it would make sense to me that the same thing is happening there as well and a part that is off-center is being used for orbital calculations leading to weirdness.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"thegreatgonz","CreatedById":135977,"CreatedDateTime":"2015-02-10T05:09:30Z","Content":"\n\u003Cp\u003EHmm. I\u0027m doing some experiments in kOS, and the results I\u0027m getting are consistent with this theory in terms of direction (the velocity changes are parallel to the tangential motion of the control-from part), but not in terms of magnitude: the changes in reported velocity are an order of magnitude or so smaller than the velocity of the control-from part.\u003C/p\u003E\n"}]}