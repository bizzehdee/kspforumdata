{"TopicId":58635,"ForumId":16,"TopicTitle":"Calculating perigee on changing SOI","CreatedByName":"Voxels","CreatedById":74550,"CreatedDateTime":"2014-01-02T18:13:29Z","PageNum":1,"Articles":[{"CreatedByName":"Voxels","CreatedById":74550,"CreatedDateTime":"2014-01-02T18:13:29Z","Content":"\n\u003Cp\u003EHi all,\u003C/p\u003E\u003Cp\u003EI\u0027m currently planning a Voyager II style flyby of Duna and Jool (similar orbital inclination), and was wondering how you would calculate the perigee of the spacecraft once it has transferred SOI.\u003C/p\u003E\u003Cp\u003EThanks all,\u003C/p\u003E\u003Cp\u003EVoxels\u003C/p\u003E\n"},{"CreatedByName":"AmpsterMan","CreatedById":32671,"CreatedDateTime":"2014-01-02T18:19:26Z","Content":"\n\u003Cp\u003EI wouldn\u0027t know how to calculate it to be honest. However, if you play with the Maneuver Nodes you should be able to see where the next SOI path will be; the Perihelion should show up there.\u003C/p\u003E\n"},{"CreatedByName":"Voxels","CreatedById":74550,"CreatedDateTime":"2014-01-02T18:50:14Z","Content":"\n\u003Cp\u003EThanks for the reply- the thing is that I want to calculate the mission before launch, because I enjoy calculating stuff before I launch, as well as allowing me to work out the correct launch window for a dual flyby.\u003C/p\u003E\n"},{"CreatedByName":"Smidge204","CreatedById":89677,"CreatedDateTime":"2014-01-02T19:07:31Z","Content":"\n\u003Cp\u003ESince all the planets are \u0022on rails\u0022 you can use Kepler orbit equations and they should be spot-on. All the information you need to define the planet\u0027s orbits and locations is available on the wiki and in the game.\u003C/p\u003E\u003Cp\u003EThen it\u0027s just a matter of solving a bunch of 2-body problems, with SOI determining which planetary body you use.\u003C/p\u003E\u003Cp\u003EMight want to write some software - or at least a spreadsheet - to do the math for you... \u0027cause there\u0027s gonna be a lot of it.\u003C/p\u003E\u003Cp\u003E=Smidge=\u003C/p\u003E\n"},{"CreatedByName":"Yasmy","CreatedById":79995,"CreatedDateTime":"2014-01-02T19:43:30Z","Content":"\n\u003Cp\u003EI will assume you mean after transferring from Kerbol SOI to outer planetary SOI, since going from Kerbin to Kerbol SOI,\u003C/p\u003E\u003Cp\u003Eyou are pretty much already at your Kerbol periapsis (if you exited Kerbin\u0027s SOI reasonably prograde.)\u003C/p\u003E\u003Cp\u003EThe standard answer to your question is that you don\u0027t. The game does it for you.\u003C/p\u003E\u003Cp\u003EChanging your periapsis at the target planet takes a tiny bit of delta-v when you are far away,\u003C/p\u003E\u003Cp\u003Eif you already have an encounter. It won\u0027t be part of typical delta-v calculations\u003C/p\u003E\u003Cp\u003Eor mission planning, other than \u0022now I should adjust my encounter periapsis.\u0022\u003C/p\u003E\u003Cp\u003EBut I enjoy all things nerdy, and if you wish to calculate everything, read my next reply...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-01-02T22:19:15Z\u0022 title=\u002201/02/2014 10:19  PM\u0022 data-short=\u002210 yr\u0022\u003EJanuary 2, 2014\u003C/time\u003E by Yasmy\u003C/strong\u003E\n\u003Cbr\u003EReducing negativity.\n\u003C/span\u003E\n"},{"CreatedByName":"Yasmy","CreatedById":79995,"CreatedDateTime":"2014-01-02T20:59:50Z","Content":"\n\u003Cp\u003EHonestly, I don\u0027t think that the question you asked is really one you need to ask for mission planning.\u003C/p\u003E\u003Cp\u003ELike I said in the previous post, periapsis adjustment at the target, while you are far from the target SOI, is cheap.\u003C/p\u003E\u003Cp\u003EGenerally all you need to do any orbital calculations is the \u003Ca href=\u0022en.wikipedia.org/wiki/Vis-viva_equation\u0022 rel=\u0022external nofollow\u0022\u003Evis-viva equation\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EI won\u0027t go over how you use it to calculate delta-v for going from one body to another here. There are tutorials around for that.\u003C/p\u003E\u003Cp\u003EOr check out \u003Ca href=\u0022en.wikipedia.org/wiki/Hohmann_transfer_orbit\u0022 rel=\u0022external nofollow\u0022\u003Een.wikipedia.org/wiki/Hohmann_transfer_orbit\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EBut I will go ahead and answer your original question anyway.\u003C/p\u003E\u003Cp\u003EFirst you need to know the velocity (both speed and direction) of your spacecraft and the target planet at the SOI boundary.\u003C/p\u003E\u003Cp\u003ENext, when entering a planetary body\u0027s SOI, you have to subtract the body\u0027s orbital velocity from the spacecraft velocity,\u003C/p\u003E\u003Cp\u003Eto get the spacecraft velocity relative to the planet. Using the planet\u0027s average orbital speed will not work unless the planet\u003C/p\u003E\u003Cp\u003Eis in a perfectly circular, zero inclination orbit. You will have to calculate the planet\u0027s trajectory from its \u003Ca href=\u0022en.wikipedia.org/wiki/Orbital_elements\u0022 rel=\u0022external nofollow\u0022\u003Eorbital elements\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003ENow the question becomes: Given a velocity \u003Cem\u003Ev\u003C/em\u003E and radius \u003Cem\u003Er\u003C/em\u003E of an orbit, what is the periapsis \u003Cem\u003Ep\u003C/em\u003E?\u003C/p\u003E\u003Cp\u003EThe standard way to approach such a calculation is to use conservation of energy and conservation of angular momentum.\u003C/p\u003E\u003Cp\u003EInstead I\u0027ll use the vis-viva equation (which has conservation of energy implicit in it) and conservation of angular momentum.\u003C/p\u003E\u003Cp\u003EUse the vis-viva equation at the SOI boundary to find your semi-major axis: 1/a = 2/\u003Cem\u003Er\u003C/em\u003E - \u003Cem\u003Ev\u003C/em\u003E\u003Csup\u003E2\u003C/sup\u003E/mu.\u003C/p\u003E\u003Cp\u003ENote that \u003Cem\u003Er\u003C/em\u003E is just the SOI radius.\u003C/p\u003E\u003Cp\u003EUse the vis-viva equation again at periapsis: v\u003Csub\u003Ep\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E = mu(2/\u003Cem\u003Ep\u003C/em\u003E - 1/a) = mu(2/\u003Cem\u003Ep\u003C/em\u003E - 2/\u003Cem\u003Er\u003C/em\u003E) \u002B \u003Cem\u003Ev\u003C/em\u003E\u003Csup\u003E2\u003C/sup\u003E\u003C/p\u003E\u003Cp\u003ENow use conservation of angular momentum to eliminate the periapsis velocity, v\u003Csub\u003Ep\u003C/sub\u003E:\u003C/p\u003E\u003Cp\u003EAt periapsis, the magnitude of the angular momentum is just \u003Cem\u003EL\u003C/em\u003E = \u003Cem\u003Em\u003C/em\u003E v\u003Csub\u003Ep\u003C/sub\u003E\u003Cem\u003Ep\u003C/em\u003E, \u003C/p\u003E\u003Cp\u003Esince at periapsis, the velocity is perpendicular to the radius.\u003C/p\u003E\u003Cp\u003EAt the SOI boundary, the magnitude of the angular momentum is \u003Cem\u003EL\u003C/em\u003E = \u003Cem\u003Em\u003C/em\u003E \u003Cem\u003Ev\u003C/em\u003E \u003Cem\u003Er\u003C/em\u003E sin(theta),\u003C/p\u003E\u003Cp\u003Ewhere theta is the angle between the line from the planet to the spacecraft and the velocity vector.\u003C/p\u003E\u003Cp\u003EConservation of angular momentum says these two values are equal: \u003Cem\u003Em\u003C/em\u003E v\u003Csub\u003Ep\u003C/sub\u003E\u003Cem\u003Ep\u003C/em\u003E = \u003Cem\u003Em\u003C/em\u003E \u003Cem\u003Ev\u003C/em\u003E \u003Cem\u003Er\u003C/em\u003E sin(theta).\u003C/p\u003E\u003Cp\u003ESubstitute v\u003Csub\u003Ep\u003C/sub\u003E = \u003Cem\u003Ev\u003C/em\u003E \u003Cem\u003Er\u003C/em\u003E sin(theta) / \u003Cem\u003Ep\u003C/em\u003E into the previous equation: v\u003Csub\u003Ep\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E = mu(2/\u003Cem\u003Ep\u003C/em\u003E - 2/\u003Cem\u003Er\u003C/em\u003E) \u002B \u003Cem\u003Ev\u003C/em\u003E\u003Csup\u003E2\u003C/sup\u003E\u003C/p\u003E\u003Cp\u003E(\u003Cem\u003Ev\u003C/em\u003E \u003Cem\u003Er\u003C/em\u003E sin(theta) / \u003Cem\u003Ep\u003C/em\u003E)\u003Csup\u003E2\u003C/sup\u003E = mu(2/\u003Cem\u003Ep\u003C/em\u003E - 2/\u003Cem\u003Er\u003C/em\u003E) \u002B \u003Cem\u003Ev\u003C/em\u003E\u003Csup\u003E2\u003C/sup\u003E.\u003C/p\u003E\u003Cp\u003ENow multiply both sides by \u003Cem\u003Ep\u003C/em\u003E\u003Csup\u003E2\u003C/sup\u003E and you get a quadratic equation for the periapsis \u003Cem\u003Ep\u003C/em\u003E.\u003C/p\u003E\u003Cp\u003ESolve the quadratic equation. There are two roots: the periapsis and the apoapsis.\u003C/p\u003E\u003Cp\u003ESince you are on a hyperbolic orbit, the apoapsis will be meaningless. It should be obvious which root is the periasis.\u003C/p\u003E\u003Cp\u003E(Hint: It\u0027s the positive root.)\u003C/p\u003E\u003Cp\u003ENow the important thing to note in all of this, ie, the reason why I said this is pretty much useless to almost everyone,\u003C/p\u003E\u003Cp\u003Eis that tiny changes in velocity while you are far form the target planet\u0027s SOI will have a huge effect on the velocity\u003C/p\u003E\u003Cp\u003Eat the SOI. Specifically, it will have a huge effect on the sin(theta) term, the angle between the velocity and the line \u003C/p\u003E\u003Cp\u003Efrom the planet to the spacecraft.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-01-02T22:27:25Z\u0022 title=\u002201/02/2014 10:27  PM\u0022 data-short=\u002210 yr\u0022\u003EJanuary 2, 2014\u003C/time\u003E by Yasmy\u003C/strong\u003E\n\u003Cbr\u003ETypos\n\u003C/span\u003E\n"}]}