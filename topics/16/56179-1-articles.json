{"TopicId":56179,"ForumId":16,"TopicTitle":"Adding a lower stage causes uneven fuel flow - Asparagus \u002B inner booster ring","CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2013-12-14T23:45:34Z","PageNum":1,"Articles":[{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2013-12-14T23:45:34Z","Content":"\n\u003Cp\u003EI\u0027m now very confused - trying to get a decent payload fraction, I\u0027ve set up a normal Asparagus (on I-beams) setup, outer tanks flowing to each other, then to the inner tank.\u003C/p\u003E\u003Cp\u003EThen I put boosters right on the inner tank, drawing fuel from the inner tank, and it\u0027s fine.\u003C/p\u003E\u003Cp\u003EThen I put a stage below it that feeds the outermost asparagus stage above it... and the inner booster ring is not only drawing fuel from the asparagus ring, but from only one side of it!\u003C/p\u003E\u003Cp\u003EKSP 0.22, Mechjeb 2.1, Kerbal Flight Engineer 6.1.4.\u003C/p\u003E\u003Cp\u003ECraft file:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/zjrE0r5t\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/zjrE0r5t\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-16T06:25:34Z\u0022 title=\u002212/16/2013 06:25  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 16, 2013\u003C/time\u003E by Nadrek\u003C/strong\u003E\n\u003Cbr\u003EAnswered\n\u003C/span\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-12-14T23:52:29Z","Content":"\n\u003Cp\u003EI feel like you\u0027ve done a fuel loop. A screenshot would help\u003C/p\u003E\n"},{"CreatedByName":"Andon","CreatedById":21251,"CreatedDateTime":"2013-12-14T23:57:41Z","Content":"\n\u003Cp\u003EI\u0027ve had similar happen for no reason I can replicate. I solved it by removing and then re-adding the fuel lines. Same configuration, same staging, but it worked when previously it didn\u0027t. It\u0027s only happened a handful of times, and now my go-to fix is to just redo the fuel lines.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2013-12-15T07:12:05Z","Content":"\n\u003Cp\u003EOkay, I figured out what the problem is.\u003C/p\u003E\u003Cp\u003EThe problem is in the four engines which feed from the central tank. The central tank works as single fuel consumer in the loop - it branches out to the two asparagus stages which then join back to the orange tank. If I put it simple, you have four points:\u003C/p\u003E\u003Cp\u003EC - central tank from which the four engines feed\u003C/p\u003E\u003Cp\u003EL - left asparagus branch\u003C/p\u003E\u003Cp\u003ER - right asparagus branch\u003C/p\u003E\u003Cp\u003EO - orange tank\u003C/p\u003E\u003Cp\u003EC draws fuel from L and R\u003C/p\u003E\u003Cp\u003EL and R draw fuel from O\u003C/p\u003E\u003Cp\u003ENow when one of the central engines goes to look for fuel, it starts at C, then goes to L, then goes to O and finds the tank to draw fuel from there. Then it backs up and goes to R, but then it does not continue to O because that\u0027s already been searched. Therefore it draws fuel from R.\u003C/p\u003E\u003Cp\u003EMy suggestion is: instead of fuel line from each asparagus stage to the central tank, put a pipe from each asparagus stage directly to two of the four engines (directly to engines, not to the tank above them). Then it\u0027ll work as you want.\u003C/p\u003E\n"},{"CreatedByName":"Dogface","CreatedById":75396,"CreatedDateTime":"2013-12-15T11:53:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EOkay, I figured out what the problem is.\u003Cp\u003EThe problem is in the four engines which feed from the central tank. The central tank works as single fuel consumer in the loop - it branches out to the two asparagus stages which then join back to the orange tank. If I put it simple, you have four points:\u003C/p\u003E\u003Cp\u003EC - central tank from which the four engines feed\u003C/p\u003E\u003Cp\u003EL - left asparagus branch\u003C/p\u003E\u003Cp\u003ER - right asparagus branch\u003C/p\u003E\u003Cp\u003EO - orange tank\u003C/p\u003E\u003Cp\u003EC draws fuel from L and R\u003C/p\u003E\u003Cp\u003EL and R draw fuel from O\u003C/p\u003E\u003Cp\u003ENow when one of the central engines goes to look for fuel, it starts at C, then goes to L, then goes to O and finds the tank to draw fuel from there. Then it backs up and goes to R, but then it does not continue to O because that\u0027s already been searched. Therefore it draws fuel from R.\u003C/p\u003E\u003Cp\u003EMy suggestion is: instead of fuel line from each asparagus stage to the central tank, put a pipe from each asparagus stage directly to two of the four engines (directly to engines, not to the tank above them). Then it\u0027ll work as you want.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cem\u003EFrick!\u003C/em\u003E Nice work Kasuha\u003C/p\u003E\n"},{"CreatedByName":"Nadrek","CreatedById":25326,"CreatedDateTime":"2013-12-16T05:33:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EOkay, I figured out what the problem is.\u003Cp\u003EThe problem is in the four engines which feed from the central tank. The central tank works as single fuel consumer in the loop - it branches out to the two asparagus stages which then join back to the orange tank. If I put it simple, you have four points:\u003C/p\u003E\u003Cp\u003EC - central tank from which the four engines feed\u003C/p\u003E\u003Cp\u003EL - left asparagus branch\u003C/p\u003E\u003Cp\u003ER - right asparagus branch\u003C/p\u003E\u003Cp\u003EO - orange tank\u003C/p\u003E\u003Cp\u003EC draws fuel from L and R\u003C/p\u003E\u003Cp\u003EL and R draw fuel from O\u003C/p\u003E\u003Cp\u003ENow when one of the central engines goes to look for fuel, it starts at C, then goes to L, then goes to O and finds the tank to draw fuel from there. Then it backs up and goes to R, but then it does not continue to O because that\u0027s already been searched. Therefore it draws fuel from R.\u003C/p\u003E\u003Cp\u003EMy suggestion is: instead of fuel line from each asparagus stage to the central tank, put a pipe from each asparagus stage directly to two of the four engines (directly to engines, not to the tank above them). Then it\u0027ll work as you want.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy thanks to you, Kasuha - I now know more about 0.22 fuel flow than I did before - it sounds like my technique is being killed by a minor fuel code optimization.\u003C/p\u003E\u003Cp\u003EYour suggestion does solve the unbalancing problem, and I appreciate that - unfortunately, it does mean I can\u0027t use this technique to replace radial engines in asparagus configurations, so I do still need other engines for the final stage.\u003C/p\u003E\u003Cp\u003EOne question - if I\u0027m drawing fuel lines from the L and R tanks directly to the radial decoupled engines, for what reason do you suggest drawing them directly to the engines instead of the tank above them? Those little tanks are there solely as an attachment point for the engines that\u0027s far enough out from the C tank and won\u0027t have any issues I\u0027d heard about with cubic octagonal struts, not because I wanted extra mass along for the ride.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2013-12-16T07:05:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nadrek\u0022 data-cite=\u0022Nadrek\u0022\u003E\u003Cdiv\u003EOne question - if I\u0027m drawing fuel lines from the L and R tanks directly to the radial decoupled engines, for what reason do you suggest drawing them directly to the engines instead of the tank above them? Those little tanks are there solely as an attachment point for the engines that\u0027s far enough out from the C tank and won\u0027t have any issues I\u0027d heard about with cubic octagonal struts, not because I wanted extra mass along for the ride.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere already are fuel lines from the central tank to these four tanks. If you added fuel pipes from asparagus stages to them, too, these engines would draw fuel from the central tank and the asparagus branches at the same time.\u003C/p\u003E\u003Cp\u003EIf you put the pipe directly to the engine, the engine will use the pipe first and only after it dries out it will start drawing fuel from the tank above it and subsequently from the central tank.\u003C/p\u003E\u003Cp\u003EWhen a part is asked for fuel (not necessarily a fuel tank, the search actually starts at engine body), it first tries to delegate that duty to parts around. So first it tries to use whatever fuel pipes leading to it and continues to draw fuel from these as long as at least one provides some. Then it goes along main attach points (usually two) and again provides fuel as long as some is available through these. When these dry out, if it is a fuel tank, it finally offers its own fuel. If it is not a fuel tank, it tries to ask the part to which it is radially attached as the last resort.\u003C/p\u003E\n"}]}