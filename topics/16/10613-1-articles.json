{"TopicId":10613,"ForumId":16,"TopicTitle":"Calculating Velocity During Accent","CreatedByName":"ElasticRaven","CreatedById":25316,"CreatedDateTime":"2012-05-15T00:52:28Z","PageNum":1,"Articles":[{"CreatedByName":"ElasticRaven","CreatedById":25316,"CreatedDateTime":"2012-05-15T00:52:28Z","Content":"I\\\u0027m trying to calculate the velocity of my rocket at a given time, assuming I ascend straight up with no worries about wobbling and steering issues. Here is what I have so far:\n\nv(t\u003Csub\u003Ef\u003C/sub\u003E) = t\u003Csub\u003Ef\u003C/sub\u003E \u002B ?\u003Csub\u003E0\u003C/sub\u003E^t^\u003Csub\u003E\u003Csup\u003Ef\u003C/sup\u003E\u003C/sub\u003E(F(t)/m(t)) dt\n\nwhere\n\nF(t) = T(t) \u002B F\u003Csub\u003Eg\u003C/sub\u003E(t) \u002B F\u003Csub\u003Ed\u003C/sub\u003E(t)\n\nT(t) = thrust at time t\n\nF\u003Csub\u003Eg\u003C/sub\u003E(t) = force of gravity at time t ? -gm(t) at low altitudes\n\ng = Kerbin\\\u0027s gravitational accel at sea level = 9.8066 m/s\n\nF\u003Csub\u003Ed\u003C/sub\u003E(t) = force of drag at time t = -\u00C2\u00BDge^-x(t)/5000^C\u003Csub\u003Ed\u003C/sub\u003E(t)v^2^(t) [source](http://kerbalspaceprogram.com/forum/index.php?topic=7161.msg102592#msg102592)\n\nx(t) = altitude at time t = ?\u003Csub\u003E0\u003C/sub\u003E^t^v(t)dt\n\nC\u003Csub\u003Ed\u003C/sub\u003E(t) = mass-weighted drag factor at time t\n\nm(t) = mass at time t\n\nIf I work all this out, I get v(t\u003Csub\u003Ef\u003C/sub\u003E) as an integral equation involving not only ?v^2^(t) dt but also ?e^?v(t)dt^ dt. How does one solve this? My first thought was to take derivatives until the integrals go away, then solve the ODE. But unless I goofed up, the exponential term causes the integral to remain forever.\n\nMy rocket is simple: stock chute, stock pod, Z02 main, stock solid booster. So it\\\u0027s easy to account for everything except drag (of course!). Any hints would be appreciated."},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2012-05-15T02:12:33Z","Content":"You\\\u0027re gonna have to solve this numerically, but I would do this:\n\n^dx^/\u003Csub\u003Edt\u003C/sub\u003E = v(t)\n\n^dv^/\u003Csub\u003Edt\u003C/sub\u003E = ^(T(t) - \u00C2\u00BD\\*m(t)\\*0.0098\\*e^^-x(t)/5000^C\u003Csub\u003Ed\u003C/sub\u003E(t)\\*v^2^(t) - ^mu\\*m(t)^/\u003Csub\u003E(R\u003C/sub\u003E\u003Csub\u003E\u003Csub\u003EK\u003C/sub\u003E\u003C/sub\u003E\u002Bx(t))^2^)/\u003Csub\u003Em(t)\u003C/sub\u003E\n\nwhere mu = 3530.35 ^km^^3^/\u003Csub\u003Es\u003C/sub\u003E^\u003Csub\u003E2\u003C/sub\u003E^\n\nThen solve it using a standard 4th order Runge-Kutta scheme. It\\\u0027ll give you velocity and altitude as functions of time.\n\nIf you\\\u0027re looking for an analytic solution then I think you\\\u0027re out of luck.\n\nEdit: forgot mass in the gravity force term. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-05-17T20:48:29Z","Content":"Attached is a PDF of some restricted solutions I found analytically, on the assumption that \u0027g\u0027 and the drag factor are both constant, and that the Thrust/Weight ratio is held constant (different from constant-thrust). \n\nEven with these simplifications, the functions are hard to evaluate (exponential integrals), and it would be better to use a numerical method such as RK4, although if you use a smaller time-step (0.01s) you can use a simple step-wise linear method, as jebbe and I did for the Goddard Problem challenge thread, here: [http://kerbalspaceprogram.com/forum/index.php?topic=7161](http://kerbalspaceprogram.com/forum/index.php?topic=7161)\n\nKosmo-not implemented something similar just by using an Excel spreadsheet to update the mass, velocity, thrust etc. in each timestep (referenced in the same thread above). We all learned a lot about the atmosphere and optimal ascent strategies in that thread!\n\nFor constant thrust (therefore dm/dt = constant), even assuming a constant-density atmosphere I cannot get an analytical solution. If someone is interested enough I can post the C\u002B\u002B code I use, but you have to edit the thrust, mass, and drag factors for each particular rocket, using information from the KSP Parts Wiki."},{"CreatedByName":"ElasticRaven","CreatedById":25316,"CreatedDateTime":"2012-05-18T04:54:24Z","Content":"Thanks both. This is great stuff."},{"CreatedByName":"Panichio","CreatedById":2858,"CreatedDateTime":"2012-05-19T15:56:36Z","Content":"My brain nearly exploded."}]}