{"TopicId":105424,"ForumId":16,"TopicTitle":"Reverse engineering Jet Engines - how do velCurve and atmCurve work?","CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-27T23:32:37Z","PageNum":1,"Articles":[{"CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-27T23:32:37Z","Content":"In the code for the new 1.0 jetEngineTurbo.cfg part, we find this:\n\n    // Jet params\t\tatmChangeFlow = True\t\tuseVelCurve = True\t\tuseAtmCurve = True\t\tmachLimit = 2.5\t\tmachHeatMult = 6.0\t\tvelCurve\t\t{\t\t\tkey = 0 1 0 0\t\t\tkey = 0.2 0.98 0 0\t\t\tkey = 0.8395604 1.716071 1.051736 1.051736\t\t\tkey = 1.617582 3.022408 1.986082 1.986082\t\t\tkey = 2.327472 4.626338 1.452677 1.452677\t\t\tkey = 3.00 5.3 0.0005786046 0.0005786046\t\t\tkey = 4.25422 2.495532 -4.279616 -4.279616\t\t\tkey = 6 0 -0.02420209 0\t\t}\t\tatmCurve\t\t{\t\t\t// definite \u0027kink\u0027 to the curve at high altitude, compared to flatter BJE curve\t\t\tkey = 0 0 0 0\t\t\tkey = 0.045 0.166 4.304647 4.304647\t\t\tkey = 0.16 0.5 0.5779132 0.5779132\t\t\tkey = 0.5 0.6 0.4809403 0.4809403\t\t\tkey = 1 1 1.013946 0\t\t}\n\n[Iffn](https://forum.kerbalspaceprogram.com/members/53884-Iffn) posted a [great analysis of the old jet performance](https://forum.kerbalspaceprogram.com/threads/82157-A-detailed-look-at-Kerbal-s-jet-engines), and Ferram [chimed in here](https://forum.kerbalspaceprogram.com/threads/50522-Velocity-curve-and-atmosphere-curve). Anyone want to take a crack at the same analysis for the 1.0 New Aero?\n\n**Edited \u003Ctime datetime=\u00222015-04-27T23:35:18Z\u0022 title=\u002204/27/2015 11:35  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 27, 2015\u003C/time\u003E by antbin**"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-27T23:50:43Z","Content":"I dont know what third and forth numbers mean. First 2 I can guess. KER can already show thrust at specific speed/altitde\n\n**Edited \u003Ctime datetime=\u00222015-04-28T00:05:33Z\u0022 title=\u002204/28/2015 12:05  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 28, 2015\u003C/time\u003E by Radam**"},{"CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-28T00:25:13Z","Content":"Here\u0027s my guess. How to get atmosphericpressure from altitude and mach number from velocity is TBD.\n\n![Ut6goCZ.png](http://i.imgur.com/Ut6goCZ.png)"},{"CreatedByName":"waterlubber","CreatedById":119333,"CreatedDateTime":"2015-04-28T00:27:42Z","Content":"Bingo! This is a really good discovery...now we know why in Das\u0027 spaceplane stream why things were so glitchy.\n\nIt looks like it\u0027s not *just* a function of intakeAir, but also of atmospheric pressure..."},{"CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2015-04-28T00:30:55Z","Content":"The velocity curve looks like the value is Mach number and the second is thrust in kN.\n\nFor the atmosphere curve, the first should be pressure (relative Kerbin Sea Level) and the second is Isp multiplier. \n\n I don\u0027t know this for a fact, and I have no idea what the other values are.\n\nBest,\n\n-Slashy"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T00:33:37Z","Content":"Or like this:\n\n![vwjD09z.jpg](http://i.imgur.com/vwjD09z.jpg)\n\nThis is for turbojet. Altho I think its a bit off as KER shows twice as much thrust at mach 3 and 15km."},{"CreatedByName":"waterlubber","CreatedById":119333,"CreatedDateTime":"2015-04-28T00:38:02Z","Content":"Uh oh, I don\u0027t think we could SSTO like that..."},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T01:16:03Z","Content":"Well not with turbojets, rapiers are the way. Altho I still dont know why KER is showing different (possibly more accurate) results."},{"CreatedByName":"AmpsterMan","CreatedById":32671,"CreatedDateTime":"2015-04-28T01:26:12Z","Content":"Atmospheric pressure is a thing when it comes to planes now. So is air density. Engines perform better in the cold night because the air is denser and so there is more air to combust."},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T02:00:00Z","Content":"\u003E \n\u003E Atmospheric pressure is a thing when it comes to planes now. So is air density. Engines perform better in the cold night because the air is denser and so there is more air to combust.\n\nAFAIK temperature has nothing to do with it, in ksp."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-28T02:13:49Z","Content":"Radam: This is 1.0, not .90 ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\n[Please see this thread on how floatcurve tangents work](https://forum.kerbalspaceprogram.com/threads/93332) or [here if you want the math behind evaluating them](http://answers.unity3d.com/questions/464782/t-is-the-math-behind-animationcurveevaluate.html). tl;dr the numbers are time, value, intangent, outtangent.\n\natmCurve relates density (in atmospheres, so density/1.225) to a flow multiplier. velCurve relates mach to a flow multiplier. Final thrust is based on the requested flow (from throttle) times the flow multipliers times Isp times g0 (9.80665m/s^2)."},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2015-04-28T02:24:44Z","Content":"It used to be a linear interpolation between the values in the file. I hope that\u0027s not the case now."},{"CreatedByName":"AmpsterMan","CreatedById":32671,"CreatedDateTime":"2015-04-28T02:30:02Z","Content":"\u003E \n\u003E -big braining mathy stuff-\n\nI think Nathan is saying that, yes, Temperature DOES affect Density ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-28T03:20:32Z","Content":"Kosmo-not: it was never linear interpolation, it was interpolation of a Unity AnimationCurve without tangents specified (i.e. autotangents). Look at that first link I gave. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nAlso, again, atmosphereCurve uses pressure, and is for Isp. atmCurve uses density, and is for flow (i.e. thrust)."},{"CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-28T04:45:04Z","Content":"Thanks for the insight Nathan. Pressure and mach make sense, but what pilots could really use is a thrust multiplier chart in terms of m/s and altitude. Does it take many assumptions to recalculate the curves for those measures?"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T07:23:18Z","Content":"\u003E \n\u003E Radam: This is 1.0, not .90 ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\u003E [Please see this thread on how floatcurve tangents work](https://forum.kerbalspaceprogram.com/threads/93332) or [here if you want the math behind evaluating them](http://answers.unity3d.com/questions/464782/t-is-the-math-behind-animationcurveevaluate.html). tl;dr the numbers are time, value, intangent, outtangent.\n\u003E \n\u003E atmCurve relates density (in atmospheres, so density/1.225) to a flow multiplier. velCurve relates mach to a flow multiplier. Final thrust is based on the requested flow (from throttle) times the flow multipliers times Isp times g0 (9.80665m/s^2).\n\nI know it is 1.0 and I have been assuming its a curve. Thanks for the link to what it actually is. But even without exact tangents I have been able to get reasonably close. As jet seems to have constant isp figure, flow is directly proportional to thrust. \n\nI have also been assuming its basing the thrust off of stationary thrust value and multiplying it by both atmospheric pressure curve and velocity curve.\n\n\u003E \n\u003E Thanks for the insight Nathan. Pressure and mach make sense, but what pilots could really use is a thrust multiplier chart in terms of m/s and altitude. Does it take many assumptions to recalculate the curves for those measures?\n\n3D graph I posted is reasonably close to the actual thrust vs both speed and altitude."},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2015-04-28T07:31:05Z","Content":"Thrust/Pressure relation instead of ISP/Pressure? It would be really great in terms of atmospheric engines.\n\nNow I will be able to release experimental impeller part."},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T07:42:08Z","Content":"\u003E \n\u003E Thrust/Pressure relation instead of ISP/Pressure? It would be really great in terms of atmospheric engines.\n\u003E Now I will be able to release experimental impeller part.\n\nIf your isp is constant, your thrust/pressure is also directly related. \n\nWhat would your impeller do?\n\n\u003E \n\u003E I think Nathan is saying that, yes, Temperature DOES affect Density ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\nIt does in real life, while in ksp density is just directly modeled to altitude."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-28T08:28:37Z","Content":"Radam: Two things. one, atmCurve uses density, not pressure. Jet thrust (and you\u0027re right with constant Isp thrust is a linear function of flow) is related to density and mach, not pressure and mach. Two, density most certainly does take temperature into account. I invite you to grab AeroGUI and turn it on, and check how density changes between day and night."},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T08:59:35Z","Content":"\u003E \n\u003E Radam: Two things. one, atmCurve uses density, not pressure. Jet thrust (and you\u0027re right with constant Isp thrust is a linear function of flow) is related to density and mach, not pressure and mach. Two, density most certainly does take temperature into account. I invite you to grab AeroGUI and turn it on, and check how density changes between day and night.\n\nThat would explain thrust increase in upper layers, now I remember someone plotting temperature vs height a few versions back."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-04-28T09:27:12Z","Content":"The atmosphere appears to follow an \u002280% Earth\u0022 pattern now, where the values at 8km on Kerbin are the same as 10km on Earth (modulo the temperature offset from sunlight and/or latitude)."},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2015-04-28T10:23:48Z","Content":"\u003E \n\u003E What would your impeller do?\n\nSpin, buzz, consume electricity and provide thrust for tiniest unmanned drones. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\nSomething like this.\n\n![104880_Impeller_Aluminium_90_mm_1620KV_12_Blatt_6S_Lander_Technology_Co_Ltd_LEDFDPSMBS90_1A1661915_300.jpg](http://www.der-schweighofer.at/public/files/300/104880_Impeller_Aluminium_90_mm_1620KV_12_Blatt_6S_Lander_Technology_Co_Ltd_LEDFDPSMBS90_1A1661915_300.jpg)\n\n**Edited \u003Ctime datetime=\u00222015-04-28T10:27:32Z\u0022 title=\u002204/28/2015 10:27  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 28, 2015\u003C/time\u003E by Dr. Jet**"},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T11:07:57Z","Content":"\u003E \n\u003E Spin, buzz, consume electricity and provide thrust for tiniest unmanned drones. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\u003E Something like this.\n\u003E \n\u003E [http://www.der-schweighofer.at/public/files/300/104880_Impeller_Aluminium_90_mm_1620KV_12_Blatt_6S_Lander_Technology_Co_Ltd_LEDFDPSMBS90_1A1661915_300.jpg](http://www.der-schweighofer.at/public/files/300/104880_Impeller_Aluminium_90_mm_1620KV_12_Blatt_6S_Lander_Technology_Co_Ltd_LEDFDPSMBS90_1A1661915_300.jpg)\n\nJust replace liquid fuel requirement with electricity..."},{"CreatedByName":"antbin","CreatedById":22389,"CreatedDateTime":"2015-04-28T14:40:40Z","Content":"Nathan, could you post the math relating altitude to density at the equator? And day/night if you like.\n\nAlso need the relationship between speed, altitude and mach."},{"CreatedByName":"Radam","CreatedById":79910,"CreatedDateTime":"2015-04-28T15:57:13Z","Content":"\u003E \n\u003E Nathan, could you post the math relating altitude to density at the equator? And day/night if you like.\n\u003E Also need the relationship between speed, altitude and mach.\n\n340m/s = mach\n\nRelationship of speed altitude and thrust is a 3d graph. Like the one I made a few posts back. Might be slightly off but close enough.\n\nSeems like the SSTO ascent is now: ascent to 5km, break the sound barrier, pitch up if heat becomes too excessive. Switch to rocket mode at 1300ms..."}]}