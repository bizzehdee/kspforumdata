{"TopicId":47841,"ForumId":16,"TopicTitle":"My repacked chutes won\u0026#039;t deploy from a stage. (Can manually deploy though.)","CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-09T18:02:11Z","PageNum":1,"Articles":[{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-09T18:02:11Z","Content":"\n\u003Cp\u003EI\u0027ve had this happen several times now, so I\u0027m pretty convinced that this is a 100% reproducible situation for me. Can anyone help me work around this?\u003C/p\u003E\u003Cp\u003EI have a fairly large lander with a rover that I\u0027ve flown to Duna and back a couple of times. Sometimes, I\u0027ve gotten it back to Kerbin with enough fuel left in its tanks to actually rocket-brake and land on its landing legs, instead of the more traditional method of separating and re-entering the command capsule. Part of the lander design involves a pretty big cluster of radial-mount parachutes. There\u0027s a lot of them because it\u0027s a fairly big lander with a lot of fuel for a lander (and eight poodle engines).\u003C/p\u003E\u003Cp\u003EThe parachutes work perfectly when I get to Duna. They are in their own stage, and I pop them with the staging key, and float gently to Duna\u0027s surface. Then I EVA and walk around the lander and repack all the chutes. Works fine, all the chutes are visibly repacked. I have a little fun with the rover.\u003C/p\u003E\u003Cp\u003EThen I use the staging bar at the left side of the screen to put the chutes into a new stage, and put that stage in the proper sequential place for my return to Kerbin.\u003C/p\u003E\u003Cp\u003EThen I launch back off the surface of Duna, dock with the gas tank I left parked in Duna orbit (the gas tank was my Third Stage which had fuel left over when I got to Duna), top off my lander\u0027s tanks, undock from the now-empty gas tank, and burn back to Kerbin. When I get back to Kerbin, I triple-check that all of my staging is correct, and that the parachutes are in their own stage, they have been repacked, and are ready to use.\u003C/p\u003E\u003Cp\u003EI retro-brake to get safely into Kerbin\u0027s atmosphere, and I\u0027m at a reasonable rate of descent. The Space Center is below me, I\u0027m ready to make my triumphant return by landing on my lander\u0027s landing legs, back at the actual space center. It\u0027s going to be so awesome.\u003C/p\u003E\u003Cp\u003EI press the staging key to pop the chutes and....\u003C/p\u003E\u003Cp\u003ENothing. The chutes don\u0027t pop. In the staging bar, the chute stage combines with whatever stage was above it.\u003C/p\u003E\u003Cp\u003EI press the staging key again. The contents of that next stage work (in this case, it\u0027s the separator ring that connects my command capsule to the lander), but the chutes on the lander stage still don\u0027t pop. Luckily I had a couple unused chutes on the command capsule, and those were in their own, final, stage, and that stage works. But my lander body plummets to the ground and shatters.\u003C/p\u003E\u003Cp\u003EImportant note: The \u0022save a couple chutes for the capsule\u0022 design was a late-added feature. On earlier versions of this trip, I\u0027d included the command capsule\u0027s chutes in the same group as the chutes on the lander body, and I had used those chutes in the Duna landing. I had repacked those chutes on Duna as well. When I did that, those chutes also failed to pop when I got back to Kerbin. Luckily, since there were only two of those, I was able, in the last few seconds, to right-click on them on my capsule and select \u0022Deploy Chute\u0022 from the flyout menu. This got my capsule safely back to Kerbin. Barely.\u003C/p\u003E\u003Cp\u003ESo what I\u0027m getting as a take-away from this, is is that repacked chutes don\u0027t work in a *stage*, but they do work if you hand-deploy them.\u003C/p\u003E\u003Cp\u003EDoes that sound accurate?\u003C/p\u003E\u003Cp\u003EIs there a fix for this?\u003C/p\u003E\n"},{"CreatedByName":"PringleMan","CreatedById":1396,"CreatedDateTime":"2013-10-09T18:10:43Z","Content":"\n\u003Cp\u003EYes. It is a flaw in the parachute code. The same thing happens with parachute breaks for planes. The solution is to map the chutes to a action group and manually fire them. I prefer doing this anyways so that chutes can be in stage 0 and I wont accidentally deploy them.\u003C/p\u003E\n"},{"CreatedByName":"Specialist290","CreatedById":58489,"CreatedDateTime":"2013-10-09T18:14:13Z","Content":"\n\u003Cp\u003EI\u0027d say it\u0027s less a flaw in the parachute code and more a general flaw in the staging logic (since the same thing happens with staged engines that are later disabled), but what you\u0027ve observed is indeed correct. Like PringleMan mentioned, I\u0027d highly advise that if you plan on using the parachutes twice, you map them to an Action Group so you can press one key to fire all of them.\u003C/p\u003E\n"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2013-10-09T18:15:32Z","Content":"\n\u003Cp\u003EAnother annoyance is that chutes instantly cut on ground contact. This can suddenly remove all your support causing you to topple and can render aircraft braking chutes useless once you hit the tarmac.\u003C/p\u003E\u003Cp\u003EThat aside, Pringle is right. reusable chutes are best mapped to action groups to ensure reliability. Action groups WILL fire chutes multiple times AND in symmetry with multiple.\u003C/p\u003E\n"},{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-09T18:15:37Z","Content":"\n\u003Cp\u003EThanks for the quick reply!\u003C/p\u003E\u003Cp\u003ECan you give me more details about how to put the parachutes in an action group, and how that action group gets fired off when I\u0027m on the mission? As in, step by step instructions and which keys to press? I\u0027ve never done that before. I have too many parachutes in this design to manually trigger one by one.\u003C/p\u003E\n"},{"CreatedByName":"Rhomphaia","CreatedById":2440,"CreatedDateTime":"2013-10-09T18:47:37Z","Content":"\n\u003Cp\u003EIn the VAB at the top left is the action group icon {middle one of the three blue icons), clicking that will hide the parts list and replace it with the action group list. First you select the action group you want to edit in the first panel, The second panel is the list of actions in the group.\u003C/p\u003E\u003Cp\u003EClick any part on the build which has groupable actions. A list of the actions will appear in the third panel, Click the ones you want to add to the action group. you can remove actions by clicking them in the second panel.\u003C/p\u003E\u003Cp\u003EAction groups 0-9 are activated in flight by pressing the corresponding number key. Abort is backspace. Brakes, gears, lights, RCS, SAS and stage will fire whenever you press the key for them. I would not bother with those much, though If you have a rover that tends to flip under heavy braking, then removing the brakes on its front wheels from the brakes group is a help.\u003C/p\u003E\u003Cp\u003EOne thing to note is that parts added with symmetry will always be selected together when grouping. but if you later try to reposition those parts, then only one part will remain in the action group, so best save setting up the groups \u0027till the end of the build and double check them if you make any later edits.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-09T18:51:03Z\u0022 title=\u002210/09/2013 06:51  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 9, 2013\u003C/time\u003E by Rhomphaia\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-09T18:48:55Z","Content":"\n\u003Cp\u003EThank you! I will try that!\u003C/p\u003E\n"},{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-10T05:24:39Z","Content":"\n\u003Cp\u003EOkay, I tried that. I assigned \u0022deploy chute\u0022 for all the chutes to the Custom Action 1 action group. \u003C/p\u003E\u003Cp\u003EI didn\u0027t try going all the way to Duna and back, I just landed my lander near the space center to test it out. First, I climbed to several thousand feet, cut the throttle and let the lander drop, then used the regular staging key to pop the chutes and land the first time. Landed perfectly, gentle touchdown. I disconnected my rover from the lander, then I EVA\u0027d and repacked all the chutes (there was a lot of them), and took off again. Basically simulating what I would have done on the surface of Duna.\u003C/p\u003E\u003Cp\u003EI got up to a few thousand feet, going about the speed I was going when I popped the chutes the first time. I pressed the Custom Action 1 key (the 1 key on the keyboard), and....\u003C/p\u003E\u003Cp\u003EMy lander instantly exploded and ripped apart in mid-air. :-(\u003C/p\u003E\u003Cp\u003EI\u0027m pretty sure that I wasn\u0027t going any faster than I have gone before when popping the chutes. Is there something different about the physics when you use an action group versus when you use the staging?\u003C/p\u003E\n"},{"CreatedByName":"Rhomphaia","CreatedById":2440,"CreatedDateTime":"2013-10-10T06:35:59Z","Content":"\n\u003Cp\u003ENothing different about the physics, but there is a difference in your lander after you decouple the rover. If you were traveling at the same speed when you opened the parachutes, they are going to cause a more severe deceleration on a lighter craft.\u003C/p\u003E\u003Cp\u003EBest bet would be to not deploy them all at once, and maybe use some of the drogues.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2013-10-10T09:11:11Z","Content":"\n\u003Cp\u003EAll main chutes open at exactly the same point - 500 m above surface. If you deploy them lower, they go to full open immediately, applying substantial force on the ship. If your ship is fast enough at that point, they rip it apart.\u003C/p\u003E\u003Cp\u003EDrogues and main chutes provide you four stages of braking in the atmosphere.\u003C/p\u003E\u003Cp\u003EFirst stage: drogues deployed\u003C/p\u003E\u003Cp\u003ESecond stage: drogues and main chutes deployed\u003C/p\u003E\u003Cp\u003EThird stage: drogues open, main deployed but not open yet\u003C/p\u003E\u003Cp\u003EFourth stage: all chutes open\u003C/p\u003E\u003Cp\u003EThe role of drogues is to slow down your ship so it is not in danger when you deploy your main chutes (applies only to really large speeds and/or really fragile ships) and (after they open) to slow down your ship enough so it is not ripped apart when your main chutes open fully.\u003C/p\u003E\u003Cp\u003EDeploying anything below 500 m above terrain is usually too late and pointless.\u003C/p\u003E\n"},{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-10T16:16:20Z","Content":"\n\u003Cp\u003EI\u0027ve tried it several times and my ship keeps getting ripped apart. All the times that this happened, I didn\u0027t do the group-action deployment below 500m, so that wasn\u0027t it. The ship was in the neighborhood of 2000m altitude above ground, over the space center. The ship really wasn\u0027t going that fast either, maybe 100m/s vertical speed.\u003C/p\u003E\u003Cp\u003EHaving a lighter craft overall might have something to do with it, as Rhomphaia suggested. So I thought, maybe what I need to do is to slow down my speed significantly with my main engines, before deploying. \u003C/p\u003E\u003Cp\u003ESo I did that: I slowed to within 10m/s vertical speed and deployed the chutes with the group action key. That worked, the chutes didn\u0027t rip the ship apart, but then something different than usual happened. Because I was using my engines, the ship did a little climbing, went up slightly past 0m/s vertical speed, so I cut the engines. The parachutes were still deployed (not popped open yet) and they had swung below my ship. As my ship gently crested and slowly started descending again, the parachutes started to drift upwards above my ship again. But then suddenly, just as my ship went from slightly ascending to slightly descending (at the 0kph crossover point), all the parachutes vanished, and I had no more parachutes all of a sudden. Plummet.\u003C/p\u003E\u003Cp\u003EThis is a maneuver that I\u0027ve done dozens of times in \u0022normal stagin\u0022 mode with this ship, both in testing on Kerbin and also during a real flight to Duna, and I\u0027ve never had the chutes disappear unexpectedly at slow speed like that. When I deployed the chutes with the staging key, they always stayed attached, even if the ship was tumbling (it wasn\u0027t tumbling in this case, it was a gentle transition from ascending to descending). I know there were times in the past that if I was going massively fast I could rip the chutes off, but that wasn\u0027t the case this time.\u003C/p\u003E\u003Cp\u003EHere\u0027s what I\u0027m wondering: Is this somehow related to the fact that, after the ship lands, the parachutes disappear? Maybe there\u0027s a bit of code saying \u0022delete the parachutes if the ship is going zero kph and it has at some point in the past touched the ground\u0022. Would that explain it?\u003C/p\u003E\n"},{"CreatedByName":"Specialist290","CreatedById":58489,"CreatedDateTime":"2013-10-10T17:16:08Z","Content":"\n\u003Cp\u003EI think that\u0027s exactly what happens. The parachutes probably go by your surface speed to determine whether or not they should disappear, since zero surface speed usually means you\u0027ve landed.\u003C/p\u003E\u003Cp\u003EAs for parachute opening altitudes: In general, the higher, the better. Parachutes will deploy once exposed to an air pressure above a certain threshold, and they\u0027ll help decelerate the craft the whole time. My \u003Ca href=\u0022http://i.imgur.com/mNAUEiu.png\u0022 rel=\u0022external nofollow\u0022\u003EAtmospheric Density Table\u003C/a\u003E includes the maximum altitude at which both drogues and regular chutes will deploy.\u003C/p\u003E\u003Cp\u003EI\u0027m also going to second the recommendation that you add a few drogue chutes to the craft, since they don\u0027t decelerate the craft nearly as quickly when they fully open, and they can open from a slightly higher altitude than the main chutes can.\u003C/p\u003E\n"},{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-10T17:30:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Specialist290\u0022 data-cite=\u0022Specialist290\u0022\u003E\u003Cdiv\u003EI think that\u0027s exactly what happens. The parachutes probably go by your surface speed to determine whether or not they should disappear, since zero surface speed usually means you\u0027ve landed.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo you think it would make sense that this wouldn\u0027t happen until after my first touchdown and re-launch? Because, like I said, on my first pop-chutes-via-the-staging key landing, I can make my craft go up and down and the chutes don\u0027t vanish.\u003C/p\u003E\u003Cp\u003EI\u0027ll try drogues, thanks!\u003C/p\u003E\n"},{"CreatedByName":"Specialist290","CreatedById":58489,"CreatedDateTime":"2013-10-10T17:37:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tfabris\u0022 data-cite=\u0022tfabris\u0022\u003E\u003Cdiv\u003EDo you think it would make sense that this wouldn\u0027t happen until after my first touchdown and re-launch? Because, like I said, on my first pop-chutes-via-the-staging key landing, I can make my craft go up and down and the chutes don\u0027t vanish.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere might be a difference in how the game treats items that are staged versus those that are activated by action groups. I haven\u0027t really noticed myself, but then I haven\u0027t run into the problem much since most of the payloads I put on the surface haven\u0027t been all that heavy (yet). It certainly bears looking into.\u003C/p\u003E\n"},{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-10T21:05:10Z","Content":"\n\u003Cp\u003EOkay, there\u0027s definitely something fishy going on here. \u003C/p\u003E\u003Cp\u003ETrying to test in more controlled conditions. For instance, getting rid of the lander weight as a variable. I built a small simple lander: Capsule, separator ring, fuel tank (720 capacity), poodle, some RCS thrusters and monoprop tanks, 12 radial mount parachutes arrayed symmetrically around the sides of the fuel tank, some landing legs. The 12 chutes are in custom action group 1, as well as existing in their own separate stage, and there are a couple emergency chutes on the top of the capsule that aren\u0027t in the group, aren\u0027t part of the test, and are in their own stage just in case:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://geekhackfilk.com/paratest.png\u0022 alt=\u0022paratest.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EStart by lowering the gear and leave them lowered. Fly it straight up at max throttle until it runs out of fuel. It crests at above 9-10 km. Let it fall. As it\u0027s falling, turn it sideways (press D until it\u0027s pointing 90 degrees right) to give it the most stress on the airframe when I pop the chutes.\u003C/p\u003E\u003Cp\u003EWhen it falls to 3000 meters, press the staging key. In that case, the chutes open normally and gently, the craft is undamaged, and (assuming I turn it upright before landing) it lands without a scratch.\u003C/p\u003E\u003Cp\u003ENow, revert to launch, and do this instead:\u003C/p\u003E\u003Cp\u003ELower the gear, fly it a very tiny distance (altitude only 100m or so), tilt it a bit just to clear it from the launch pad, cut the throttle, pop the chutes with the staging key, let it land. It lands gently near the launch pad. EVA and repack all the chutes. Hardly any fuel was used. Now, fly straight up at max throttle again until it runs out of fuel, Again, it crests at above 9-10km. Let it fall, turn it sideways.\u003C/p\u003E\u003Cp\u003EAt 3000 meters, press the Custom Action key that I assigned to the chutes. KERBLAM! There is an explosion and the craft is ripped apart. The capsule is still intact and falling.\u003C/p\u003E\u003Cp\u003EOkay, so I have removed all variables. The craft configuration is identical. The weight is identical, I didn\u0027t have a lander to drop off. The amount of fuel left is identical (zero fuel). The altitude is the same, the speed is the same. There is something about the second parachute deployment that is different from the first parachute deployment. With all other variables removed, the second parachute deployment rips the craft apart, while the first was just fine.\u003C/p\u003E\u003Cp\u003ESome things I\u0027m suspecting and experimenting, to rule out:\u003C/p\u003E\u003Cp\u003E- Suspicion that it\u0027s not the difference between the first and second deployment, but rather, the difference between staged deployment and custom action deployment. To test this, do the full climb-to-10k-then-fall-to-3k-sideways test, straight from the launch pad, but instead of popping the chutes with the staging key on this first flight, pop them with the custom action key instead. Result: Chutes deploy without an incidenct, craft is undamaged, lands gently without a scratch.\u003C/p\u003E\u003Cp\u003EConclusion:\u003C/p\u003E\u003Cp\u003E- The issue here isn\u0027t with \u0022custom action versus staging action\u0022, the issue here is with a second chute deployment versus a first chute deployment. There\u0027s something going on here that we don\u0027t understand.\u003C/p\u003E\u003Cp\u003E- Suspicion that the second parachute deployment is deploying them fully (ie, their full puff-out that they\u0027d normally get at 500m) instead of deploying them partially. To test this, after doing the short-hop-and-repack-chutes, I flew up to several thousand meters, got my vertical speed close to zero, and deployed the chutes. They *looked* normal, i.e., they were not fully puffed out, they were the partially-open shape that I would have expected at that altitude. Conclusion: I don\u0027t think that\u0027s the problem. I mean I guess it could be, if the parachutes are fully popping on the second deployment but only for a microsecond before the problem corrects itself.\u003C/p\u003E\u003Cp\u003EI\u0027m wondering if it\u0027s that last thing. Perhaps the game is neglecting to re-initialize the drag variable in the right spot. Maybe at the moment of deployment, the second time, the variable says that the chutes have 500 drag instead of 1 drag. Because at the last landing time, their deployed drag *was* 500. The variable corrects itself a split second later, but the crucial thing is that split second when the chutes first deploy. And that\u0027s enough for the physics engine to rip the craft apart instantly. This is just a guess of course, but it\u0027s sounding logical to me.\u003C/p\u003E\u003Cp\u003EAnyone else able to replicate my results?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-10T22:51:55Z\u0022 title=\u002210/10/2013 10:51  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 10, 2013\u003C/time\u003E by tfabris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Rhomphaia","CreatedById":2440,"CreatedDateTime":"2013-10-10T21:46:13Z","Content":"\n\u003Cp\u003EAnd here I thought being stuck with a computer that makes a slideshow of even the simplest of crafts was entirely bad...\u003C/p\u003E\u003Cp\u003EI tested your theory with a mechjeb info window showing the drag coeficient of the craft and (thanks to a frame rate of 2 per second) can indeed confirm that on a second deployment there is a momentary spike to the fully deployed drag before the normal partial deployment values reassert themselves.\u003C/p\u003E\u003Cp\u003EThe question now would be what happens if you leave them unpacked until you get to orbit?\u003C/p\u003E\n"},{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-10T21:49:10Z","Content":"\n\u003Cp\u003EHah, fantastic, it\u0027s confirmed then! :-)\u003C/p\u003E\u003Cp\u003EIs there a way I can report this to the developers as a bug?\u003C/p\u003E\n"},{"CreatedByName":"Rhomphaia","CreatedById":2440,"CreatedDateTime":"2013-10-10T22:11:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tfabris\u0022 data-cite=\u0022tfabris\u0022\u003E\u003Cdiv\u003EHah, fantastic, it\u0027s confirmed then! :-)\u003Cp\u003EIs there a way I can report this to the developers as a bug?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere is the support and bugs subforum. read the bug reporting guidelines stickied there before you post.\u003C/p\u003E\u003Cp\u003EFor now though I have found that if you quit the flight scene after you repack the parachutes, then select the ship from the tracking station again, then the bug doesn\u0027t occur .\u003C/p\u003E\n"},{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-10T22:44:23Z","Content":"\n\u003Cp\u003EThanks! Bug has been reported! :-)\u003C/p\u003E\n"},{"CreatedByName":"tfabris","CreatedById":82885,"CreatedDateTime":"2013-10-11T02:05:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rhomphaia\u0022 data-cite=\u0022Rhomphaia\u0022\u003E\u003Cdiv\u003EBest bet would be to not deploy them all at once, and maybe use some of the drogues.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, it took me a while to get the details worked out, but you CAN work around this bug with careful use of drogues. But it\u0027s tricky.\u003C/p\u003E\u003Cp\u003EWhat\u0027s interesting is that the drogues, by default, don\u0027t auto-deploy at useful altitiudes. Their auto-deploy height for partial deployment is only just barely above the auto-deploy height for the main chutes. So when this bug happens, the drogues haven\u0027t fully deployed yet, so the ship rips apart when the main chutes pop anyway.\u003C/p\u003E\u003Cp\u003EWhat you need to do is put the drogues on a separate custom action group. Fire that off up high, very high, and after they auto-deploy, just leave the drogues out, and ONLY the drogues out, until they fully open. When testing on Kerbin, they fully opened at around 2-3k. THEN, only after the drogues have FULLY opened and had a chance to brake you a bit, THEN you pop the mains with their custom action key.\u003C/p\u003E\u003Cp\u003EI\u0027ve only successfully done this with a test ship so far, but that was the successful strategy. Now I need to try that out with my Duna lander and see if I can do the same thing. Crossing my fingers!\u003C/p\u003E\u003Cp\u003EThanks for your help!\u003C/p\u003E\n"}]}