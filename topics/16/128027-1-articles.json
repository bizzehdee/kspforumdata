{"TopicId":128027,"ForumId":16,"TopicTitle":"Isp dependent on velocity","CreatedByName":"JediMasterSterling1","CreatedById":155361,"CreatedDateTime":"2015-12-17T07:54:29Z","PageNum":1,"Articles":[{"CreatedByName":"JediMasterSterling1","CreatedById":155361,"CreatedDateTime":"2015-12-17T07:54:29Z","Content":"\n\u003Cp\u003E\nI\u0027m altering the config file\u00A0on an electric aircraft propeller, and was almost done.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I want specific impulse on the engine to be dependent on velocity so that I can force a constant fuel flow and still get a sharp drop off in force past mach 0.85 as if the propeller tips are going super sonic.\n\u003C/p\u003E\n\u003Cp\u003E\nI did a similar thing with Atmosphere here.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E\t\tname = ModuleEnginesFX\n\t\t...\n\n\t\tatmosphereCurve\n\t\t{\n\t\t\tkey = 0 800 0 1000000\n\t\t\tkey = 0.000001 0 0 0.3012048\n\t\t\tkey = 0.5 789.496 0.02686068 0.02686068\n\t\t\tkey = 20 960 0 0\n   \t \t}\n\n\t\t// Jet Params\n\t\t...\n\n\t\tatmCurve\n\t\t{\n\t\t\tkey = 0 0 0 0\t\t\t\n\t\t\tkey = 0.000001 0 0 0.3012048\n\t\t\tkey = 0.5 0.98687 0.02686068 0.02686068\n\t\t\tkey = 20 1.2 0 0\n\t\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nBasically force and isp drop off equally with altitude so that the fuel flow remains the same, but the engine is less effective as air gets thinner.\n\u003C/p\u003E\n\u003Cp\u003E\nI tried doing a similar thing with velocity using:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E\t\tname = ModuleEnginesFX\n\t\t...\n\n\t\tvelocityCurve\n\t\t{\n\t\t\tkey = 0 600 0 0\n\t\t\tkey = 0.5 800 0 0\n\t\t\tkey = 0.85 400 -2.055445 -10.22015\n\t\t\tkey = 1 0 0 0\n\t\t}\n\n\t\t// Jet Params\n\t\t...\n\n\t\tvelCurve\n\t\t{\n\t\t\tkey = 0 0.75 0 0\n\t\t\tkey = 0.5 1 0 0\n\t\t\tkey = 0.85 0.5 -2.055445 -10.22015\n\t\t\tkey = 1 0 0 0\n\t\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nBut it seems the game recognizes velCurve but doesn\u0027t\u00A0do anything with\u00A0velocityCurve\n\u003C/p\u003E\n\u003Cp\u003E\nIs my syntax a little off, or am I\u00A0completely off the mark, or is this impossible?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s the whole module:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nMODULE\n{\n\tname = ModuleEnginesFX\n\tthrustVectorTransformName = thrustTransform\n\texhaustDamage = False\n\tignitionThreshold = 0.1\n\tminThrust = 0\n\tmaxThrust = 50\n\theatProduction = 8\n\tuseEngineResponseTime = True\n\tengineAccelerationSpeed = 20\n\tengineDecelerationSpeed = 20\n\tuseVelocityCurve = True\n\tEngineType = Turbine\n\tPROPELLANT\n\t{\n\t\tname = ElectricCharge\n\t\tratio = 0.4\n\t\tDrawGauge = True\n\t}\n\tPROPELLANT\n\t{\n\t\tname = FSCoolant\n\t\tignoreForIsp = True\n\t\tratio = 0.01\n\t}\n    \tatmosphereCurve\n    \t{\n\t\t\tkey = 0 800 0 1000000\n\t\t\tkey = 0.000001 0 0 0.3012048\n\t\t\tkey = 0.5 789.496 0.02686068 0.02686068\n\t\t\tkey = 20 960 0 0\n    \t}\n\t\tvelocityCurve\n\t\t{\n\t\t\tkey = 0 600 0 0\n\t\t\tkey = 0.5 800 0 0\n\t\t\tkey = 0.85 400 -2.055445 -10.22015\n\t\t\tkey = 1 0 0 0\n\t\t}\n\n\t\t// Jet params\n\t\tatmChangeFlow = False\n\t\tuseVelCurve = True\n\t\tuseAtmCurve = True\n\t\tflameoutBar = 0.001\n\t\tflowCapMult = 1.0\n\t\t//machLimit = 2\n\t\tmachHeatMult = 10\n\n\t\tatmCurve\n\t\t{\n\t\t\tkey = 0 0 0 0\n\t\t\tkey = 0.000001 0 0 0.3012048\n\t\t\tkey = 0.5 0.98687 0.02686068 0.02686068\n\t\t\tkey = 20 1.2 0 0\n\t\t}\n\t\tvelCurve\n\t\t{\n\t\t\tkey = 0 0.75 0 0\n\t\t\tkey = 0.5 1 0 0\n\t\t\tkey = 0.85 0.5 -2.055445 -10.22015\n\t\t\tkey = 1 0 0 0\n\t\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Streetwind","CreatedById":98962,"CreatedDateTime":"2015-12-17T18:30:14Z","Content":"\n\u003Cp\u003E\nPretty sure the only thing the velocity curve scales is thrust, not Isp. In fact, atmospheric engines have stopped scaling by Isp completely in 1.0\u002B. They just use a fixed value that never changes.\n\u003C/p\u003E\n\u003Cp\u003E\nThe reason for that is, in an environment where you must constantly apply power to maintain your speed against drag, thrust and Isp are directly related in ways you would never consider them for rocket engines in space.\n\u003C/p\u003E\n\u003Cp\u003E\nImagine the following: you set your throttle to 100%. This sets a certain fuel flow rate depending on your Isp. Because that is fixed, the fuel flow rate never changes, no matter what you do. Let\u0027s say that for this example, you have enough fuel for 10 minutes of constant engine operation at this throttle setting. (And when I say fuel, you can substitute any resource here, even electric charge.)\n\u003C/p\u003E\n\u003Cp\u003E\nYou are in level flight. Depending on your plane\u0027s drag characteristics and your current altitude, you should eventually reach your top speed, the point where the drag you experience exactly cancels out the thrust of your engine. Then that speed, multiplied by the runtime of your engines, becomes the distance you can travel. The actual measure of your plane\u0027s reach, as opposed to its dV, which is meaningless for planes. If you can increase that top speed at the same throttle setting, you can go further; you have better fuel economy. You could, for instance, try to go higher up, where there is less drag.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever! Your engine thrust output scales with altitude. By going higher, you have less drag, but also less thrust. The important part to keep in mind is: because your Isp still never changes, your fuel flow rate i still constant. And here\u0027s the clincher: if your thrust drops faster than the drag drops, because you are already exceeding the engine\u0027s optimal altitude, then you may actually get \u003Cem\u003Eworse\u003C/em\u003E fuel economy - you get \u003Cem\u003Eless\u003C/em\u003E total range traveled, because your top speed starts dropping while your fuel consumption stays constant.\n\u003C/p\u003E\n\u003Cp\u003E\nAs you can see, for an\u00A0atmospheric engine, scaling the thrust with certain factors (like altitude and speed) directly and completely replaces Isp as the main way to control how fuel efficient you are in various flight regimes. If your engine has 5000s Isp, and you are flying in a regime where only 50% of your total thrust is available, you now have a virtual, \u0022effective Isp\u0022 of only 2500s. That\u0027s because to get back to nominal thrust, you would have to throttle up to 200%, which means 200% fuel flow rate.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTL;DR: set your Isp to a constant value and scale thrust only. It does everything you need. \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-17T18:32:55Z\u0022 title=\u002212/17/2015 06:32  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 17, 2015\u003C/time\u003E by Streetwind\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JediMasterSterling1","CreatedById":155361,"CreatedDateTime":"2015-12-17T20:15:59Z","Content":"\n\u003Cp\u003E\nYour\u0027re talking to me as if i\u0027m asking how to make a space plane. Yes, I understand how the engine mechanics work, and they work perfectly for rockets, and are a decent approximation for jets. I, however, am making a propeller engine, which should dramatically lose thrust past mach\u00A00.85, produce no net thrust at about mach\u00A00.90\u00A0and produce negative thrust past mach 1; all while the engine is at full throttle. I can do this with the velCurve, but it changes force by making the engine use less electricity, not by making it less efficient. An engine at full throttle using no electricity (mach 0.90) makes no sense, and an\u00A0engine at full throttle producing excess electricity while it should be breaking apart\u00A0(mach 1) makes no sense either.\n\u003C/p\u003E\n\u003Cp\u003E\nMy question was: is there a way to alter engine efficiency over velocity or is it impossible using stock game mechanics?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-17T20:23:17Z\u0022 title=\u002212/17/2015 08:23  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 17, 2015\u003C/time\u003E by JediMasterSterling1\u003C/strong\u003E\n\u003Cbr\u003Emiss-spelling\n\u003C/span\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2015-12-17T20:38:56Z","Content":"\n\u003Cp\u003E\nDon\u0027t know the answer to the question myself... but just a thought:\u00A0 perhaps it would be worth asking the question over in the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/forum/29-plugin-development-help-and-support/\u0022\u003Eforum for add-on development help and support\u003C/a\u003E?\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s my go-to place for when I\u0027m writing a mod and get stuck on some technical point.\u00A0 Lotta good folks over there.\n\u003C/p\u003E\n"},{"CreatedByName":"JediMasterSterling1","CreatedById":155361,"CreatedDateTime":"2015-12-17T21:04:00Z","Content":"\n\u003Cp\u003E\nSnark\n\u003C/p\u003E\n\u003Cp\u003E\nSounds like it might be a good idea. I\u0027ll give it a try. Thanks\n\u003C/p\u003E\n"},{"CreatedByName":"Streetwind","CreatedById":98962,"CreatedDateTime":"2015-12-17T21:41:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222326802\u0022 data-ipsquote-contentid=\u0022128027\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221450383359\u0022 data-ipsquote-userid=\u0022155361\u0022 data-ipsquote-username=\u0022JediMasterSterling1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, JediMasterSterling1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYour\u0027re talking to me as if i\u0027m asking how to make a space plane. Yes, I understand how the engine mechanics work, and they work perfectly for rockets, and are a decent approximation for jets. I, however, am making a propeller engine, which should dramatically lose thrust past mach\u00A00.85, produce no net thrust at about mach\u00A00.90\u00A0and produce negative thrust past mach 1; all while the engine is at full throttle. I can do this with the velCurve, but it changes force by making the engine use less electricity, not by making it less efficient. An engine at full throttle using no electricity (mach 0.90) makes no sense, and an\u00A0engine at full throttle producing excess electricity while it should be breaking apart\u00A0(mach 1) makes no sense either.\n\u003C/p\u003E\n\u003Cp\u003E\nMy question was: is there a way to alter engine efficiency over velocity or is it impossible using stock game mechanics?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmmm, I\u0027m trying to recall, but I don\u0027t think I\u0027ve ever seen an engine with an Isp velocity curve. Even before the rework, jet engines scaled Isp by altitude only, like all other engines. Maybe the module is deprecated?\n\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-12-18T06:38:42Z","Content":"\n\u003Cp\u003E\nuseVelCurveIsp = True\n\u003C/p\u003E\n\u003Cp\u003E\nvelCurveIsp\n\u003C/p\u003E\n\u003Cp\u003E\n{\n\u003C/p\u003E\n\u003Cp\u003E\nkey = mach0 multiplier0 intangent0 outtangent0\n\u003C/p\u003E\n\u003Cp\u003E\nkey = mach1 multiplier1 intangent1 outtangent1\n\u003C/p\u003E\n\u003Cp\u003E\n....\n\u003C/p\u003E\n\u003Cp\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s also an atmCurveIsp if you want an Isp multiplier based on density. You should set a fixed single-value atmosphereCurve and then use atmCurveIsp (and useAtmCurveIsp = true) to vary Isp with density, since prop performance varies with density not pressure.\n\u003C/p\u003E\n"},{"CreatedByName":"JediMasterSterling1","CreatedById":155361,"CreatedDateTime":"2015-12-19T05:15:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222327453\u0022 data-ipsquote-contentid=\u0022128027\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221450420722\u0022 data-ipsquote-userid=\u002275006\u0022 data-ipsquote-username=\u0022NathanKell\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 hours ago, NathanKell said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nuseVelCurveIsp = True\n\u003C/p\u003E\n\u003Cp\u003E\nvelCurveIsp\n\u003C/p\u003E\n\u003Cp\u003E\n{\n\u003C/p\u003E\n\u003Cp\u003E\nkey = mach0 multiplier0 intangent0 outtangent0\n\u003C/p\u003E\n\u003Cp\u003E\nkey = mach1 multiplier1 intangent1 outtangent1\n\u003C/p\u003E\n\u003Cp\u003E\n....\n\u003C/p\u003E\n\u003Cp\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s also an atmCurveIsp if you want an Isp multiplier based on density. You should set a fixed single-value atmosphereCurve and then use atmCurveIsp (and useAtmCurveIsp = true) to vary Isp with density, since prop performance varies with density not pressure.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIT WORKS!\n\u003C/p\u003E\n\u003Cp\u003E\nThanks, I would never have found these parameters on my own.\n\u003C/p\u003E\n"}]}