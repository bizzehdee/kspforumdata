{"TopicId":189694,"ForumId":16,"TopicTitle":"How can I get MechJeb to guide an Atlas-type 1 1/2 stage rocket?","CreatedByName":"Zeiss Ikon","CreatedById":174016,"CreatedDateTime":"2019-11-10T00:17:48Z","PageNum":1,"Articles":[{"CreatedByName":"Zeiss Ikon","CreatedById":174016,"CreatedDateTime":"2019-11-10T00:17:48Z","Content":"\n\u003Cp\u003E\nI\u0027m playing 1.6.1 with \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E, Realism Overhaul, and RP-1 (the latter probably relevant only in that it\u0027s responsible for my rocket design).\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve built a rocket that\u0027s a pretty good likeness of an Atlas -- not the early SM-65 ICBM (that was the first version), but the next generation that actually launched John Glenn \u003Cem\u003Eet. al.\u003C/em\u003E into orbit in a succession of Mercury spacecraft.\u00A0 I have verified that it can make orbit, at least without a payload, by manually launching in simulation; I can fly it to a marginal orbit (apogee too high, perigee well down in the atmosphere) using only Smart A.S.S. and a simple gravity turn (establish 5 degrees pitch at appr. 50 m/s, then follow SVEL\u002B).\u00A0 I know MechJeb can do it better than that.\n\u003C/p\u003E\n\u003Cp\u003E\nAt the point of staging away the booster engines, I\u0027m above 2500 m/s horizontal velocity, and immediately after staging, MechJeb\u0027s \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E display shows above 6000 m/s remaining in the tank (orbit is appr. 7800 m/s).\u00A0 \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E is just above 1 at staging, 2;15 after launch, with (current iteration) 3:20 remaining with the center sustainer engine.\n\u003C/p\u003E\n\u003Cp\u003E\nIf I attempt to engage MechJeb Ascent Guidance (\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E/\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E version, what used to be call PEG) on the launch pad, however, the autopilot will not advance the throttles and displays \u0022target unreachable\u0022 -- even when I have the target set to 142 km apogee and 0 perigee (signifying circularize), \u0022current\u0022 inclination (28.6 or so degrees, launching from Canaveral), so about the least \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E requirement you can have (barring moving the launch site to the equator or similar).\u00A0 Auto staging is off (doesn\u0027t work well with low tech rockets, which often require things like hot staging and always need ullage management).\u00A0 I\u0027ve been assuming this is because MechJeb is failing to calculate the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E correctly due to boosters and sustainer running off the same tank, hence no cue for \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E that I\u0027ll be ditching a bunch of mass when the \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E starts to get high.\u00A0 Clearly, the rocket is short \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E without staging the boosters -- it shows only about 8660 m/s in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E, and my recent experience is I need around 9200 there to reach a stable orbit (gravity losses etc.).\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a known way to get \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E to correctly handle stage-and-a-half launchers (image below is the ICBM version, but the new one differs only by having a longer tank and higher thrust)?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00229PLKYr6.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002256.25\u0022 height=\u0022576\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/9PLKYr6.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-11-10T00:19:08Z\u0022 title=\u002211/10/2019 12:19  AM\u0022 data-short=\u00224 yr\u0022\u003ENovember 10, 2019\u003C/time\u003E by Zeiss Ikon\u003C/strong\u003E\n\u003Cbr\u003Eduplicated phrase\n\u003C/span\u003E\n"},{"CreatedByName":"Laie","CreatedById":110461,"CreatedDateTime":"2019-11-10T09:28:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223702796\u0022 data-ipsquote-contentid=\u0022189694\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221573345068\u0022 data-ipsquote-userid=\u0022174016\u0022 data-ipsquote-username=\u0022Zeiss Ikon\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Zeiss Ikon said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs there a known way to get \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E to correctly handle stage-and-a-half launchers (image below is the ICBM version, but the new one differs only by having a longer tank and higher thrust)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nProbably not.\n\u003C/p\u003E\n\u003Cp\u003E\nYou can try to take off yourself, then activate the \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E steering after staging -- but knowing \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E a bit, I suspect it\u0027s first order of business upon taking command will be killing the throttle. There goes your one and only ignition.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, for manual launches,\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\na) don\u0027t follow the gravity turn all the way to orbit. IIRC (it\u0027s been a while) an Atlas needs to start on a relatively shallow turn, but then has to pitch up for a while after booster separation.\n\u003C/li\u003E\n\u003Cli\u003E\nb) Quite generally, lacking a throttle, you can still control time-to-apoapsis by pitch -- try to make it so that it\u0027s close to zero towards the end of your fuel. It\u0027s pretty easy to launch into a near-circular orbit that way, the hard part is hitting a certain altitude. I was happy if I got altitude to within \u002B-10km.\n\u003C/li\u003E\n\u003Cli\u003E\nc) remember the verniers (LV-101?) -- even the original plans for Atlas involved the sustainer being cut a few m/s before reaching the desired velocity, and finalizing it on the verniers. Which will provide perhaps 0.1g rather than the 3\u002Bg you get from the sustainer, so it\u0027s quite leisurely.\n\u003C/li\u003E\n\u003C/ul\u003E\n"},{"CreatedByName":"Zeiss Ikon","CreatedById":174016,"CreatedDateTime":"2019-11-10T12:15:27Z","Content":"\n\u003Cp\u003E\nThanks, Laie.\u00A0 I\u0027ve never gotten a decent orbit manually in \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E -- in the stock(ish) game I\u0027ve always done it by pushing apo up to the desired height, then setting up a node to circularize while I coast up.\u00A0 Obviously, can\u0027t do that with a single ignition.\u00A0 I find it hard to watch time to apo, fuel, and velocity all at the same time, but it sounds like that\u0027s what\u0027s needed.\n\u003C/p\u003E\n\u003Cp\u003E\nI presume you\u0027d use an action group to shut down the LR-105 and let the LR-101s burn.\u00A0 When I\u0027ve gotten \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E to fly this booster to orbit, it was with a second stage (which was heavy enough to be required for orbit), and \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E handles that fine, though I\u0027m not sure how much better it\u0027d do if it actually planned for the big drop in \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E at staging.\u00A0 But yes, \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E pitches up a bunch (25-30 degrees?) after staging, then pitches the next stage down pretty sharply once it\u0027s burning.\u00A0 I\u0027ve been presuming the big pitch-up was to compensate for the sudden drop in thrust/acceleration, since the curve up to staging was based on about five times the thrust and exepecting conventional staging after less than three minutes.\n\u003C/p\u003E\n\u003Cp\u003E\nI understand the Prime Vector Guidance code is based on actual NASA guidance code, but last I read (a year or so ago) the devs were working on upgrading from Gemini-era code (for Titan II etc. conventional staging) to Shuttle-era code (accounts for thrust drops before MECO, but via booster burn-out rather than timed shutdown; that is, \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E can \u0022know\u0022 before launch when thrust will drop and how much).\u00A0 I might have to put in a feature request to support timed staging, but it\u0027s probably not worth the devs\u0027 effort to support a sort of niche booster (the low reliability engine stage is fairly short in \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E -- from first launch to early manned orbit, but really only matters from around 1957-1963 equivalent -- and the Atlas equivalent is the only booster type that needs this, since the Russian line went with conventional side boosters).\n\u003C/p\u003E\n\u003Cp\u003E\nHonestly, if I\u0027d known this was a problem, I\u0027d probably have just bypassed the whole stage-and-a-half setup, by using tanked booster like the Soviets did -- but it does perform significantly better than conventional staging for unreliable engines, and saves funds on engines and tanks compared to the Soviet method.\n\u003C/p\u003E\n"},{"CreatedByName":"Laie","CreatedById":110461,"CreatedDateTime":"2019-11-10T14:50:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223702948\u0022 data-ipsquote-contentid=\u0022189694\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221573388127\u0022 data-ipsquote-userid=\u0022174016\u0022 data-ipsquote-username=\u0022Zeiss Ikon\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Zeiss Ikon said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI find it hard to watch time to apo, fuel, and velocity all at the same time, but it sounds like that\u0027s what\u0027s needed.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think I spent a whole sunday on failed attempts until it started to get better; after that, results improved quickly. In hindsight, it was fun; not sure if I\u0027d have said the same then and there.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}