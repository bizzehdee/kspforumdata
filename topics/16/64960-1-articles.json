{"TopicId":64960,"ForumId":16,"TopicTitle":"Fuel Calculations","CreatedByName":"RedDevilEA","CreatedById":101034,"CreatedDateTime":"2014-03-05T17:03:56Z","PageNum":1,"Articles":[{"CreatedByName":"RedDevilEA","CreatedById":101034,"CreatedDateTime":"2014-03-05T17:03:56Z","Content":"\n\u003Cp\u003EI\u0027m trying to write a formula to determine which fuel tank to use for a rocket, based on the mass of the tank. I\u0027m working backwards from the rocket equation:\u003C/p\u003E\u003Cp\u003E\u00C3\u017D\u00E2\u20AC-\u00C3\u017D\u00C2\u00BD = ISP \u00C3\u00A2\u00E2\u20AC\u201D\u00C2 ln(MFull / MEmpty) \u00C3\u00A2\u00E2\u20AC\u201D\u00C2 9.81\u003C/p\u003E\u003Cp\u003EIf I know the mass of the fuel tank I\u0027m using, I can add it\u0027s empty mass to MEmpty and calculate the amount of fuel burned with this:\u003C/p\u003E\u003Cp\u003EMFuel = MFull - MFull/{e^[\u00C3\u017D\u00E2\u20AC-\u00C3\u017D\u00C2\u00BD/(ISP\u00C3\u00A2\u00E2\u20AC\u201D\u00C29.81)] }\u003C/p\u003E\u003Cp\u003EMy question is how do I determine the weight of the fuel tank I would need for a given \u00C3\u017D\u00E2\u20AC-\u00C3\u017D\u00C2\u00BD and ISP and mass of everything but the tank?\u003C/p\u003E\u003Cp\u003EThe assumption is that for whatever mass of the tank, 10% is the empty tank and 90% is the fuel.\u003C/p\u003E\u003Cp\u003EOh, man. I hope that made sense.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-05T22:47:08Z\u0022 title=\u002203/05/2014 10:47  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 5, 2014\u003C/time\u003E by RedDevilEA\u003C/strong\u003E\n\u003Cbr\u003EAnswered\n\u003C/span\u003E\n"},{"CreatedByName":"Dave Kerbin","CreatedById":78777,"CreatedDateTime":"2014-03-05T19:51:40Z","Content":"\n\u003Cp\u003EYou sort of go around a bit, but it sounds like you know your payload (engines, capsule, basically everything but the fuel tanks) and you know how much delta-v you need, you just need to know how many fuel tanks you need to bring along.\u003C/p\u003E\u003Cp\u003EWith the exception of the smallest fuel tanks (the Round8 and Oscar) all the stock fuel tanks have a ratio of 8:1 for fuel to tank. If we assume that we will only use those tanks we can figure it out without too much trouble, though because of the way the fuel ratios work (and the fact that I don\u0027t know how to format equations on these forums) I\u0027ll break the problem down into 2 parts.\u003C/p\u003E\u003Cp\u003EThe first part is figuring out what value is going into ln which is the wet to dry mass ratio. Let\u0027s calculate a value for MassRatio as follows, \u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EMassRatio = EXP(DeltaV / 9.81 / ISP)\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EUsing that ratio lets figure out the total weight of the fuel tanks (including the fuel in them)\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EWetTankMass = (9* Payload * (MassRatio - 1)) / ( 9 - MassRatio)\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EYou now have the mass of your fuel tanks and fuel. So if WetTankMass = 4.5t that means you need exactly one T800 tanks (360 units of liquid fuel plus 440 units of oxidizer). If you want you can check that I haven\u0027t made a mistake (and that you got it correctly) by calculating the delta-v of a particular combination of engine and fuel tank, then reverse it by using my equestion to figure out the tank using the weight of the engine and the delta-v.\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2014-03-05T21:00:02Z","Content":"\n\u003Cp\u003EOh....Dave, that\u0027s wrong, the mass ratio is 9:1, not 8:1.\u003C/p\u003E\u003Cp\u003EThe rest of that is right, though - the mass of everything but your tanks can be broken down into individual components, the tank mass and everything else. That \u0022everything else\u0022 is your dead mass, which you can represent by X, thus the rocket equation becomes:\u003C/p\u003E\u003Cp\u003EdV = ln(M\u002Bx / Md \u002B x) * Isp * Go\u003C/p\u003E\u003Cp\u003EAnd now you put in the relationship M = 9Md:\u003C/p\u003E\u003Cp\u003EdV = ln(9Md\u002Bx / Md \u002B x) * Isp * Go\u003C/p\u003E\u003Cp\u003EAnd solve the equation for Md:\u003C/p\u003E\u003Cp\u003Ee^(dV/(Isp*Go)) = y = 9Md\u002Bx / Md \u002B x\u003C/p\u003E\u003Cp\u003E9Md\u002Bx = yMd\u002Byx\u003C/p\u003E\u003Cp\u003E(9-y)Md = (y-1)x\u003C/p\u003E\u003Cp\u003EMd = (y-1)x/(9-y)\u003C/p\u003E\u003Cp\u003ESolve for that, then feed the result back into M = 9Md, and you have the fuel mass you need.\u003C/p\u003E\u003Cp\u003EThen take that result and divide it by .05625, the full mass of an FL-T100 fuel tank, and round up; the result is the number of FL-T100 equivalents you\u0027ll need to generate roughly the amount of delta-V you want. By rounding up, you don\u0027t short yourself. An FL-T200 is the same as 2 FL-T100s, an FL-T400 is the same as 4 FL-T100s, an FL-T800/X200-32 is the same as 8 FL-T100s, an X200-16 is the same as 16 FL-T100s, an X200-32 is the same as 32 FL-T100s, and a Jumbo64 (the orange tank) is the same as 64 FL-T100s.\u003C/p\u003E\u003Cp\u003EEquation in action: I want 4550 m/s of delta V with a 300 Isp Engine, with 1 tonne of deadmass. Plug everything in:\u003C/p\u003E\u003Cp\u003Ey = e^(dV/(Isp*Go)) = e^(4550/(300*9.81)) = 4.693\u003C/p\u003E\u003Cp\u003EMd = (y-1)x/(9-y) = ((4.693-1)*1)/(9-4.683) = 3.693 / 4.317 = .855\u003C/p\u003E\u003Cp\u003EM = 9Md = 7.699, 7.699 / 0.5625 = 13.68, round up to 14 FL-T100s (A combination FL-T800, FL-T400 and FL-T200 stack).\u003C/p\u003E\u003Cp\u003EHope that helps.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-05T21:11:30Z\u0022 title=\u002203/05/2014 09:11  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 5, 2014\u003C/time\u003E by capi3101\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RedDevilEA","CreatedById":101034,"CreatedDateTime":"2014-03-05T21:02:17Z","Content":"\n\u003Cp\u003EWow, that\u0027s awesome. Thank you so much!\u003C/p\u003E\n"},{"CreatedByName":"Dave Kerbin","CreatedById":78777,"CreatedDateTime":"2014-03-05T21:27:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022capi3101\u0022 data-cite=\u0022capi3101\u0022\u003E\u003Cdiv\u003EOh....Dave, that\u0027s wrong, the mass ratio is 9:1, not 8:1.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe ratio between a full and empty tank is 9:1 and it\u0027s the easier number to use in most equations. That\u0027s why it\u0027s easy to overlook that the ratio between the \u003Cstrong\u003Efuel \u003C/strong\u003Eand the \u003Cstrong\u003Etank \u003C/strong\u003Eitself is 8:1. For example a full Rockomax X200-16 is composed 1 of ton of kaluminum tank, 3.6 tons of liquid fuel and 4.4 tons of oxidizer. 9:1 is easiest to use for math problems while 8:1 is easiest to use when explaining how fuel storage works: You need 1 ton of tank to hold 8 tons of fuel.\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2014-03-05T22:02:32Z","Content":"\n\u003Cp\u003EAh. Okay. In any event, it looks like we both wound up giving the exact same advice, just with different terms.\u003C/p\u003E\u003Cp\u003ELet me ask you this: have you ever come across a situation where the MassRatio is greater than nine (i.e. a negative result)? That\u0027s happened to me a few times before and I\u0027m not sure what exactly that signifies.\u003C/p\u003E\n"},{"CreatedByName":"Dave Kerbin","CreatedById":78777,"CreatedDateTime":"2014-03-05T22:33:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022capi3101\u0022 data-cite=\u0022capi3101\u0022\u003E\u003Cdiv\u003EAh. Okay. In any event, it looks like we both wound up giving the exact same advice, just with different terms.\u003Cp\u003ELet me ask you this: have you ever come across a situation where the MassRatio is greater than nine (i.e. a negative result)? That\u0027s happened to me a few times before and I\u0027m not sure what exactly that signifies.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt means that what you are asking is impossible. This generally happens when you ask for the fuel requirements to give a very large payload a very large delta-v. As you know there are diminishing returns as you add more fuel because some of that new fuel will be burned to push all the other fuel and tanks. It reaches a tipping point where the fuel mass you add (say 8 tons) is not enough to even move the fuel tank (1 ton) that it came in. At that point the MassRatio formula is basically going to come back and say you need some kind of negative-mass fuel to get that much delta-v for the given ISP constant. If you follow through the formula I think one of the terms ends up being infinity.\u003C/p\u003E\n"},{"CreatedByName":"RedDevilEA","CreatedById":101034,"CreatedDateTime":"2014-03-05T22:46:18Z","Content":"\n\u003Cp\u003EI used 10:1 because I\u0027m using KW tanks. 20t tank = 2 tons empty. At any rate, thanks for the replies, guys. I was completely lost.\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2014-03-05T23:02:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dave Kerbin\u0022 data-cite=\u0022Dave Kerbin\u0022\u003E\u003Cdiv\u003EIt means that what you are asking is impossible. This generally happens when you ask for the fuel requirements to give a very large payload a very large delta-v. As you know there are diminishing returns as you add more fuel because some of that new fuel will be burned to push all the other fuel and tanks. It reaches a tipping point where the fuel mass you add (say 8 tons) is not enough to even move the fuel tank (1 ton) that it came in. At that point the MassRatio formula is basically going to come back and say you need some kind of negative-mass fuel to get that much delta-v for the given ISP constant. If you follow through the formula I think one of the terms ends up being infinity.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was afraid you were going to tell me that...I have a \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/70872-SSTKE-Single-Stage-to-Kerbol-Escape\u0022 rel=\u0022external nofollow\u0022\u003Echallenge going on\u003C/a\u003E and was having issues applying the equation for my VAB entry. Tiny one too, though apparently not tiny enough...\u003C/p\u003E\n"},{"CreatedByName":"RedDevilEA","CreatedById":101034,"CreatedDateTime":"2014-03-06T04:51:26Z","Content":"\n\u003Cp\u003EOut of curiosity, how did you get from 9Md\u002Bx = yMd\u002Byx\u003C/p\u003E\u003Cp\u003Eto\u003C/p\u003E\u003Cp\u003E(9-y)Md = (y-1)x ?\u003C/p\u003E\n"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2014-03-06T12:58:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022capi3101\u0022 data-cite=\u0022capi3101\u0022\u003E\u003Cdiv\u003EI was afraid you were going to tell me that...I have a \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/70872-SSTKE-Single-Stage-to-Kerbol-Escape\u0022 rel=\u0022external nofollow\u0022\u003Echallenge going on\u003C/a\u003E and was having issues applying the equation for my VAB entry. Tiny one too, though apparently not tiny enough...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you need more dV in a single stage, you could combine a LV-N with multiple lower-ISP-engines and let the fuel to them run out. Tavert managed in my Delta-V Maximization Challenge to pack \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/59823-Delta-V-Maximization-Challenge?p=810931\u0026amp;viewfull=1#post810931\u0022 rel=\u0022external nofollow\u0022\u003E9124 m/s dV into a single stage\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2014-03-06T13:10:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022RedDevilEA\u0022 data-cite=\u0022RedDevilEA\u0022\u003E\u003Cdiv\u003EOut of curiosity, how did you get from 9Md\u002Bx = yMd\u002Byx\u003Cp\u003Eto\u003C/p\u003E\u003Cp\u003E(9-y)Md = (y-1)x ?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EStart: 9Md\u002Bx = yMd\u002Byx\u003C/p\u003E\u003Cp\u003ESubtract yMd from both sides: 9Md \u002B x - yMd = yx\u003C/p\u003E\u003Cp\u003ESubtract x from both sides: 9Md - yMd = yx - x\u003C/p\u003E\u003Cp\u003ETake out the common factors: (9-y)Md = (y-1)x\u003C/p\u003E\u003Cp\u003EAnd there you go.\u003C/p\u003E\n"},{"CreatedByName":"RedDevilEA","CreatedById":101034,"CreatedDateTime":"2014-03-06T13:54:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022capi3101\u0022 data-cite=\u0022capi3101\u0022\u003E\u003Cdiv\u003EStart: 9Md\u002Bx = yMd\u002Byx\u003Cp\u003ESubtract yMd from both sides: 9Md \u002B x - yMd = yx\u003C/p\u003E\u003Cp\u003ESubtract x from both sides: 9Md - yMd = yx - x\u003C/p\u003E\u003Cp\u003ETake out the common factors: (9-y)Md = (y-1)x\u003C/p\u003E\u003Cp\u003EAnd there you go.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks. I am not a clever man.\u003C/p\u003E\n"}]}