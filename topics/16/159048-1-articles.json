{"TopicId":159048,"ForumId":16,"TopicTitle":"Way to see drag vales?","CreatedByName":"Tychonoir","CreatedById":176536,"CreatedDateTime":"2017-04-12T05:03:27Z","PageNum":1,"Articles":[{"CreatedByName":"Tychonoir","CreatedById":176536,"CreatedDateTime":"2017-04-12T05:03:27Z","Content":"\n\u003Cp\u003E\nSo I\u0027m making a spaceplace in the 50-60 ton range, and I don\u0027t know what I did, but some relatively minor change now causes it to no longer go to space.\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t figure out what happened, but I think something is causing massive drag that shouldn\u0027t be, as it now feels sluggish and underpowered, and this is compared to another fairly similar spaceplane that\u0027s 15 tons heavier, with the same engines, it it goes to space just fine. Even worse, I just now forgot to retract the landing gear, and it \u003Cem\u003Estill\u003C/em\u003E outperformed the lighter plane.\n\u003C/p\u003E\n\u003Cp\u003E\nSo something\u0027s very wrong.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried to figure out what\u0027s causing the drag, but no luck.\u003Cbr\u003E\nI\u0027m not even sure if it\u0027s really drag, but it seems to be the most likely culprit. So far, I haven\u0027t any way to even see drag values.\u003Cbr\u003E\nSupposedly MechJeb shows atmospheric drag, but I can\u0027t find that feature. And some other mods I tried were out of date. At any rate, this will only confirm if drag is the issue, not what part is causing it.\u003Cbr\u003E\u003Cbr\u003E\nAny ideas?\u003Cbr\u003E\nAny suggestions to see the drag of parts?\n\u003C/p\u003E\n"},{"CreatedByName":"fourfa","CreatedById":151713,"CreatedDateTime":"2017-04-12T05:29:29Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#272a34;\u0022\u003EAlt-F12 -\u0026gt; Physics -\u0026gt; Aero -\u0026gt; \u0022Display Aero Data in Action Menus\u0022\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#272a34;\u0022\u003ENow fly the ship, right click on various parts in flight, and read out their individual drag values. \u00A0There\u0027s also the AeroGUI in that same Alt-F12 menu that shows aggregate values for the whole ship. \u00A0And of course, F12 (no Alt) brings up a visual overlay with red arrows for drag, blue for wing lift, light blue for body lift, yellow for control surfaces etc. \u00A0The red drag arrows can be a bit confusing though; they\u0027re sometimes confused about which parts are shielded in cargo bays.\u00A0\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Tychonoir","CreatedById":176536,"CreatedDateTime":"2017-04-12T06:25:03Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/151713-fourfa/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022151713\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/151713-fourfa/\u0022 rel=\u0022\u0022\u003E@fourfa\u003C/a\u003E\u003Cbr\u003E\nI think the cargo bays are the issue.\u003Cbr\u003E\nI\u0027m seeing huge red lines from the (empty) bays themselves, and quite a bit from a bay that\u0027s behind another bay. Additionally, there are a number of parts causing significant drag that should be shielded in the bay.\n\u003C/p\u003E\n\u003Cp\u003E\nBut let me clarify what you said with regard to shielded parts: Do you mean the red lines might be showing erroneous info? Or that parts are causing drag they shouldn\u0027t?\u003Cbr\u003E\nIf the latter, how do I fix that?\n\u003C/p\u003E\n"},{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2017-04-12T07:07:58Z","Content":"\n\u003Cp\u003E\nYes, sometimes the arrows are wrong. It\u0027s better to go with the action menu values. Especially if the values in the action menus add up to something close to the total drag value in the AeroGui window.\n\u003C/p\u003E\n\u003Cp\u003E\nAs fourfa said, a really good idea is to compare the action window and AeroGui numbers between your two planes. Also posting the bad plane, if it\u0027s unmodded (or only lightly modded), so we can test it a little.\n\u003C/p\u003E\n\u003Cp\u003E\nAs far as shielding the parts goes, are they attached to the outer skin of the bay? Or the bulkheads? And is this KSP 1.2.2?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Tychonoir","CreatedById":176536,"CreatedDateTime":"2017-04-12T07:38:59Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/154251-bewing/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022154251\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/154251-bewing/\u0022 rel=\u0022\u0022\u003E@bewing\u003C/a\u003E\u003Cbr\u003E\nWell the arrows seem to generally agree with the action menu values.\u003Cbr\u003E\nThe largest individual values seems to come from the bays themselves, as well as the \u0022shielded\u0022 items collectively. Those items aren\u0027t clipping into the outer walls of the bay, and are attached to the inside front and back ends. In the case where two bays are connected, some items cross the empty boundary, and some are attached to the bay nodes. A few parts have some slight clipping into the back end, but into another part, so it should still be covered, no? Either way, they aren\u0027t the most significant source of drag.\n\u003C/p\u003E\n\u003Cp\u003E\nHow does KSP calculate if a part should cause drag?\u003Cbr\u003E\nIs it by the center point of the object, or the bounds of the object?\u003Cbr\u003E\nWould a part with a center point inside of one bay but with bounds that cross into another bay erroneously cause drag?\n\u003C/p\u003E\n\u003Cp\u003E\nI also understand that exposed nodes along the ships longitudinal axis causes drag, so does that mean unused bay nodes create drag?\n\u003C/p\u003E\n\u003Cp\u003E\nI can post the plane, but it\u0027s in a state of disarray at the moment.\u003Cbr\u003E\nNo part or physics mods. KSP 1.2.2\n\u003C/p\u003E\n"},{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2017-04-12T07:50:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223018251\u0022 data-ipsquote-contentid=\u0022159048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221491982739\u0022 data-ipsquote-userid=\u0022176536\u0022 data-ipsquote-username=\u0022Tychonoir\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Tychonoir said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nHow does KSP calculate if a part should cause drag?\u003Cbr\u003E\nIs it by the center point of the object, or the bounds of the object?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHeh. You are asking some of the most difficult technical questions in the game. I don\u0027t know most of the answers, and some of my answers are wrong. You can probably learn more by doing a quick test than by asking me. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAll parts cause drag unless they are inside a cargo or service bay or fairing. If they are inside a cargo or service bay, the first thing the game checks is the attachment point. If the attachment point is on the flat front or back wall, then the part is shielded and has no drag. If the part is attached to the curving outer wall, then the game checks the bounds of the object. (And you should use the \u0022Move\u0022 gizmo to move the object a little way in from the wall.)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Tychonoir said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI also understand that exposed nodes along the ships longitudinal axis causes drag, so does that mean unused bay nodes create drag?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo. But you should test that because I might be lying.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Tychonoir said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI can post the plane, but it\u0027s in a state of disarray at the moment.\u003Cbr\u003E\nNo part or physics mods. KSP 1.2.2\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Tychonoir","CreatedById":176536,"CreatedDateTime":"2017-04-12T11:05:53Z","Content":"\n\u003Cp\u003E\nOk, I did some testing.\u003Cbr\u003E\nI\u0027m afraid it\u0027s bad news for Mk2 cargo bays. They are almost surely bugged.\u003Cbr\u003E\u003Cbr\u003E\nThe problem plane happens to have 4 of them:\u003Cbr\u003E\n1 large bay centerline, followed by 1 small bay.\u003Cbr\u003E\n1 large bay on both right and left sides.\n\u003C/p\u003E\n\u003Cp\u003E\nWell, it turns out that the small centerline bay itself was generating \u003Cem\u003E5 times\u003C/em\u003E the drag of the Mk2 cockpit.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I then emptied all bays, but otherwise had streamlined body parts attached to the front and back, except the centerline bays which are attached to each other, but had streamlined parts in front and back of the combo.\n\u003C/p\u003E\n\u003Cp\u003E\nThe single most draggy parts are still the large bays, about 10% more than the cockpit when open. And here\u0027s the surprising bit, drag \u003Cem\u003Eincreases\u003C/em\u003E when the bays are \u003Cem\u003Eclosed\u003C/em\u003E by about 50%(!) Now parts inside the bay are shielded when the bay is closed, but closed bays apparently generate so much more drag there really isn\u0027t any benefit.\u003Cbr\u003E\u003Cbr\u003E\nAlso when empty, the small bay generates about half as much drag as the large bays.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter attaching nosecones to all the bay nodes, I saw further drag improvement, but the drag is still significantly more than one would expect for a part not directly exposed to the air. Even so, the resulting improvements are dramatic. A plane that struggled to hit 300m/s at 5km in level flight, now hits over 1000m/s at 5km on a 10\u00B0 climb.\n\u003C/p\u003E\n"},{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2017-04-12T14:25:35Z","Content":"\n\u003Cp\u003E\nDefinitely sounds like two bugs there -- the open nodes bug, and the open/closed drag reversal bug. I will try reproducing your results and filing two\u00A0bug reports.\n\u003C/p\u003E\n\u003Cp\u003E\nIt is nearly impossible to convince the devs that a particular drag value is \u0022inappropriate\u0022 however. So don\u0027t hold your breath about getting the drag values changed. I understand that it makes MK2 cargo bays pretty useless compared to fairings, but that\u0027s KSP for ya.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-12T14:52:46Z\u0022 title=\u002204/12/2017 02:52  PM\u0022 data-short=\u00227 yr\u0022\u003EApril 12, 2017\u003C/time\u003E by bewing\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tychonoir","CreatedById":176536,"CreatedDateTime":"2017-04-13T09:13:50Z","Content":"\n\u003Cp\u003E\nAdditionally, I\u0027m finding that most items supposedly shielded are still producing drag in a closed bay.\u003Cbr\u003E\nI haven\u0027t been able to isolate what criteria causes them to still produce drag, but so far anything connected to a bay node causes drag. And some items connected to \u003Cem\u003Ethose\u003C/em\u003E items cause drag, and some do not. Not sure why. None of the items are clipping into the bay walls. (Although the default position of node-connected items might clip a little bit - the way some objects are shaped, they can\u0027t be totally unclipped from the surface with the move tool. However, the nodes between two bays have nowhere to clip into.)\n\u003C/p\u003E\n\u003Cp\u003E\nLet me know if you can\u0027t reproduce any behavior. If not, we\u0027ll have to try to figure out what the differences are.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd as far as appropriate drag values for parts, the bays are producing more drag that the fuselage parts that have exactly the same size and shape, and typically more drag that parts they are connected behind. That alone tells me something is off, but that\u0027s a minor point compared to all the other problems.\n\u003C/p\u003E\n"},{"CreatedByName":"fourfa","CreatedById":151713,"CreatedDateTime":"2017-04-13T15:43:20Z","Content":"\n\u003Cp\u003E\nItems in cargo bays can be tricky; I know I spent a lot of time working out the rules about node attach, clipping limits, etc. I also recall one mod I had (\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E Sounds) that had no parts and only minor gameplay effects but broke the cargo bay drag model somehow - uninstalled and drag went away.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAt this point maybe you should share the craft and see if others get the same results.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Tychonoir","CreatedById":176536,"CreatedDateTime":"2017-04-13T23:18:39Z","Content":"\n\u003Cp\u003E\nOk, here\u0027s where things get weird.\n\u003C/p\u003E\n\u003Cp\u003E\nI just made an example plane with the intent of using it as a simple demo, and I could reproduce none of the problems. Not a single one.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I went back to the problem plane to try to figure it out what was different.\u003Cbr\u003E\nOne thing I noticed, is that the bays aren\u0027t connect perfectly - there was a teeny tiny overlap. I thought it was odd at the time, but it\u0027s where KSP wanted to snap them together despite several tries. Eventually I just shrugged and figured that\u0027s just how they were. But on the new plane, there was no such overlap. Hmmm.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I went back and removed everything from they bay, deleted it and reattached a new part, then put everything back together.\u003Cbr\u003E\nThis has appeared to fix the shielded item drag, and the open nodes bug, but I\u0027m still getting inverted open/closed drag values, but I can\u0027t reproduce this on the new example plane.\u003Cbr\u003E\u003Cbr\u003E\nI\u0027m starting to think that there\u0027s something wrong with the file, and the solutions is increasingly looking like, \u0022rebuild the plane from scratch.\u0022\n\u003C/p\u003E\n"},{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2017-04-14T00:50:38Z","Content":"\n\u003Cp\u003E\nSorry it took me a while. Open/closed bay drag bug confirmed:\n\u003C/p\u003E\n\u003Cp\u003E\n850 m/s, closed bay -- note drag = 29.4 kN:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022bDAv2ca.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/bDAv2ca.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n888 m/s, open bay -- drag = 27.4 kN\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022nnKoI1M.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/nnKoI1M.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nClosed node bug also confirmed. Total Drag on the open bay version dropped from 113.5kN to 75.2kN when I attached\u00A0type A cones to the nodes in the bay.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd the open bay also seems to be providing more lift ....\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-14T01:12:36Z\u0022 title=\u002204/14/2017 01:12  AM\u0022 data-short=\u00227 yr\u0022\u003EApril 14, 2017\u003C/time\u003E by bewing\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AeroGav","CreatedById":152027,"CreatedDateTime":"2017-04-14T17:41:34Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/154251-bewing/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022154251\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/154251-bewing/\u0022 rel=\u0022\u0022\u003E@bewing\u003C/a\u003E\u00A0Well, I didn\u0027t expect that. \u00A0Perhaps a new bug?\n\u003C/p\u003E\n\u003Cp\u003E\nIf you have enabled \u0022show aero data in action menus\u0022 then at the very top of the right click menu for that part it should show \u0022Shielded : True\u0022 or \u0022shielded : false\u0022. \u00A0 If shielded, i\u0027ve only ever seen the drag be zero.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve known for a while that mk2 cargo bays aren\u0027t very reliable at working out whether they\u0027re shielding something or not.\n\u003C/p\u003E\n\u003Cp\u003E\nRadially attaching stuff to walls of the bay is asking for trouble, also it\u0027s really easy to attach inline parts to the front and back nodes of the bay, only for them to attach to the preceding or following fuselage piece of the stack instead, and end up not shielded. \u00A0This is more an issue with items that can attach radially as well as inline, eg. docking ports. (so your docking port, and the satellite attached to it, are actually hooked on to the cockpit radially and are being treated as \u0022outside\u0022 the ship, even though it looks like they\u0027re in the cargo bay.\n\u003C/p\u003E\n\u003Cp\u003E\nIt works the other way too. \u00A0I flew a spaceplane to Laythe with intakes (engine pre-cooler) that were part of sponsons either side of the cargo bay. \u00A0The intakes worked on Kerbin, but when i came to take off from :Laythe - no air, because the intakes were \u0022shielded\u0022. \u00A0 I suspect a minor game update had caused this, or perhaps due to the greater distance from centre of KSP universe (Kerbol) rounding errors were greater, causing issues.\n\u003C/p\u003E\n\u003Cp\u003E\nFinally, the mk2 bay can also screw up if you fill it with non-radially attaching parts eg. reaction wheels then try to attach another mk2 bay behind it. \u00A0 \u00A0 You can end up with the second bay attaching to the cargo (the reaction wheel) instead of the bay that\u0027s ahead of it in the stack. \u00A0 Perhaps this is the reason for the \u0022slightly overlapping\u0022 effect \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/176536-tychonoir/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022176536\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/176536-tychonoir/\u0022 rel=\u0022\u0022\u003E@Tychonoir\u003C/a\u003E\u00A0saw\n\u003C/p\u003E\n"}]}