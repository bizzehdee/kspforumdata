{"TopicId":200764,"ForumId":16,"TopicTitle":"Contracts losing IDs, fixing save instead of alt\u002Bf12","CreatedByName":"Mythos","CreatedById":137308,"CreatedDateTime":"2021-03-03T19:28:32Z","PageNum":1,"Articles":[{"CreatedByName":"Mythos","CreatedById":137308,"CreatedDateTime":"2021-03-03T19:28:32Z","Content":"\n\u003Cp\u003E\nIt seems broken contracts are a problem that existed for long (I remember around 1.3 I had a\u00A0\u0022build base on asteroid\u0022 contract, that could never\u00A0be finished) and recently new incarnations of similar problems are created (I had a \u0022attach antenna to satellite\u0022 problem). Here are two recent examples with good explanation of the savefile content and how to solve:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/200367-is-this-a-bug-or-i-do-something-wrong/#comment-3926658\u0022 rel=\u0022\u0022\u003EIs this a bug or I do something wrong? - Gameplay Questions and Tutorials - Kerbal Space Program Forums\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/199968-attaching-a-new-part-to-a-satellite-for-a-contract-a-glitch-or-my-mistake/#comment-3922071\u0022 rel=\u0022\u0022\u003EAttaching a new part to a Satellite for a contract: A glitch or my mistake? - Gameplay Questions and Tutorials - Kerbal Space Program Forums\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIn my recent save I now encountered a \u0022repair antenna of satellite\u0022 contract. I suppose this is one where you need a repair kid, never done any of those. But again, the save is messed up: The contract points to no vessel ID at all, and the mentioned vessel name refers to no existing vessel as well. It seems the satellite\u00A0has never been created in the first place.\n\u003C/p\u003E\n\u003Cp\u003E\nWell, there is a way to solve this (except alt\u002Bf12): Create another satellite and make the IDs match. But since my contract data is already erroneous, I would need to know, how the contract likes\u00A0to call the ID.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nFor a rover construction contract, it is called \u0022\u003Cspan style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003Erover\u003C/span\u003E\u003Cspan style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003EVslId\u003C/span\u003E\u0022 (see first link)\n\u003C/li\u003E\n\u003Cli\u003E\nFor a satellite construction contract it is called \u0022constructionVslId\u0022 (see second link)\n\u003C/li\u003E\n\u003Cli\u003E\nFor a repair contract it is called \u0022...\u0022?\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nAlso since I\u0027m the developer of the KML savegame editor, I\u0027d like to include some checks and fixes about contracts in the next upcoming version, so that any players not so keen about text file editing, get a tool at hand. So any more details and\u00A0other known problems with such excellent descriptions like the above are very welcome\u00A0\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"VoidSquid","CreatedById":196199,"CreatedDateTime":"2021-03-03T19:32:13Z","Content":"\n\u003Cp\u003E\nThanks, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/137308-mythos/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022137308\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/137308-mythos/\u0022 rel=\u0022\u0022\u003E@Mythos\u003C/a\u003E\u00A0, it is a really really useful tool, part of my KSP toolbox for years. Didn\u0027t need it often, but for the few times, saved me a lot of sweating and cursing and some pulled out hairs! \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Mythos","CreatedById":137308,"CreatedDateTime":"2021-03-03T23:15:30Z","Content":"\n\u003Cp\u003E\nThere is even more confusion about those \u0022repair part X on vessel Y\u0022 contracts (type = VesselRepairContract). I also need to know what part is referred to by ID. Again I don\u0027t know how the attribute is called on the contract side (directly under the CONTRACT tag, I do know how it is called under the PARAM (RepairPartParameter) section). Additionally I don\u0027t know what ID on the part side it\u00A0refers to. There is a \u0022uid\u0022, \u0022mid\u0022 (seems to be = uid) and a \u0022persistentId\u0022 (!= uid). For vessels there is only a \u0022persistentId\u0022 (in my 1.11 to 1.11.1 save) that is used in correct contracts. For parts I only found a \u0022recover part from orbit\u0022 (type = RecoverAsset) contract, that seems to be intact, and that one uses the part\u0027s \u0022uid\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nHas anyone ever finished a\u00A0\u0022repair part X on vessel Y\u0022 contract? Maybe only whithout leaving the game between accepting and finishing (maybe in works in RAM, but fails as soon as the save is considered).\n\u003C/p\u003E\n"},{"CreatedByName":"Mythos","CreatedById":137308,"CreatedDateTime":"2021-03-04T04:51:10Z","Content":"\n\u003Cp\u003E\nOk with some guess work I managed to fix the \u003Cspan style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003EVesselRepairContract\u003C/span\u003E\u00A0with my unreleased build of KML. There is no need to have ID attributes directly in the CONTRACT node, the attributes within the PARAM node are sufficient. Just a typical kerbal test procedure:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nbuilt a new \u0022not really a satellite\u0022 probe with antenna\n\u003C/li\u003E\n\u003Cli\u003E\ntried to break the antenna while driving around, didn\u0027t get it done\n\u003C/li\u003E\n\u003Cli\u003E\nplaced a solar panel, broke that, wanted to copy the state over to the antenna\n\u003C/li\u003E\n\u003Cli\u003E\nfigured out that I had the wrong antenna\n\u003C/li\u003E\n\u003Cli\u003E\nused KML to replace (rename) the antenna to\u00A0the correct one and change that\u00A0to broken\n\u003C/li\u003E\n\u003Cli\u003E\nrenamed the probe to the name given in the contract\n\u003C/li\u003E\n\u003Cli\u003E\nused KML to repair the contract, automatically figuring out the vessel and part IDs from the given names\n\u003C/li\u003E\n\u003Cli\u003E\nrealized I had no engineer ready, hired a new one\n\u003C/li\u003E\n\u003Cli\u003E\nwondered why I always think of elderly males when I encounder \u0022...dorf Kerman\u0022 and find a female\n\u003C/li\u003E\n\u003Cli\u003E\ntried not to forget a repair kit, checked\u00A0there are some in the rover storage\n\u003C/li\u003E\n\u003Cli\u003E\ndrove the engineer over to the probe\n\u003C/li\u003E\n\u003Cli\u003E\nforgot to leave chute and jetpack at home, messing around a bit to make place for the repair kit\n\u003C/li\u003E\n\u003Cli\u003E\nrealized my engineer is a noob and lacks the skill to repair the antenna\n\u003C/li\u003E\n\u003Cli\u003E\nused KML to copy the career and flight log from another level 1 kerbal, now she has skill\n\u003C/li\u003E\n\u003Cli\u003E\nfixed the antena with the engineer\n\u003C/li\u003E\n\u003Cli\u003E\nnice green checkboxes on the contract, heureka!\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cimg alt=\u0022Yj2aCji.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002290.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/Yj2aCji.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-03-04T05:00:26Z\u0022 title=\u002203/04/2021 05:00  AM\u0022 data-short=\u00223 yr\u0022\u003EMarch 4, 2021\u003C/time\u003E by Mythos\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mythos","CreatedById":137308,"CreatedDateTime":"2021-03-05T14:25:10Z","Content":"\n\u003Cp\u003E\nI just released the KML version that can help fixing this.\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022137308\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed1501762008\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/133971-win-kml-persistence-file-editor/\u0026amp;do=embed\u0022 style=\u0022height:195px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nStill the main idea of this post was not to be an ad, but to get some more feedback from anyone else with similar problems and I might extend the check and repair functions based on that \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}