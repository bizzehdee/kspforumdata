{"TopicId":68746,"ForumId":16,"TopicTitle":"Extracting ship(s) from SFS","CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2014-04-09T07:57:11Z","PageNum":1,"Articles":[{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2014-04-09T07:57:11Z","Content":"\n\u003Cp\u003EI didn\u0027t want to make a whole thread for this, but I couldn\u0027t find any existing ones for it.\u003C/p\u003E\u003Cp\u003EAnyway.\u003C/p\u003E\u003Cp\u003EI made a nice crew shuttle and launched it, but I neglected to save it as a distinct ship file because I wanted to make sure it worked first. It did. And then I went and built and launched something else, forgetting that I hadn\u0027t saved a copy of the shuttle. So now I have the shuttle in space, but not saved as a craft file.\u003C/p\u003E\u003Cp\u003EI tried copying and pasting the corresponding block from my save, but the editor failed to read it and claimed it had no parts.\u003C/p\u003E\u003Cp\u003EIs there any way to save my ship? Including a mod or external program? I really don\u0027t want to go through building it all over again.\u003C/p\u003E\n"},{"CreatedByName":"XyllyX","CreatedById":105335,"CreatedDateTime":"2014-04-09T10:06:10Z","Content":"\n\u003Cp\u003EWhy not just save it and delete it if it doesn\u0027t work?\u003C/p\u003E\u003Cp\u003EAlso, why not just edit the design until something works instead of starting over?\u003C/p\u003E\n"},{"CreatedByName":"kurja","CreatedById":66303,"CreatedDateTime":"2014-04-09T10:36:56Z","Content":"\n\u003Cp\u003ECheck what you have as the \u0027autosaved ship\u0027, if you haven\u0027t built other stuff since, your creation should be there.\u003C/p\u003E\n"},{"CreatedByName":"Claw","CreatedById":100668,"CreatedDateTime":"2014-04-09T11:14:49Z","Content":"\n\u003Cp\u003ERescuing ships from save files by hand is possible but rather difficult. Unfortunately you can\u0027t just copy and paste the section from the persistent.sfs. I\u0027ve done it for smaller ships, but if your ship is complex it will take a long time.\u003C/p\u003E\u003Cp\u003EI\u0027m not sure if there are any mods that can do it...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022XyllyX\u0022 data-cite=\u0022XyllyX\u0022\u003E\u003Cdiv\u003EWhy not just save it and delete it if it doesn\u0027t work?\u003Cp\u003EAlso, why not just edit the design until something works instead of starting over?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBecause he doesn\u0027t have the save file but wants it. The ship was launched and is not only in his save file.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kurja\u0022 data-cite=\u0022kurja\u0022\u003E\u003Cdiv\u003ECheck what you have as the \u0027autosaved ship\u0027, if you haven\u0027t built other stuff since, your creation should be there.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHe said he built and launched another ship. So his autosave has been rewritten.\u003C/p\u003E\u003Cp\u003EThe only other easy option is if you happened to save it as \u0022Untitled Space Craft\u0022\u003C/p\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2014-04-09T18:47:14Z","Content":"\n\u003Cp\u003EI overwrote the autosaved ship when I launched something else. Similar deal with my \u0022Untitled Space Craft\u0022 and \u0022WIP\u0022. I\u0027ve rescued other ships from there before, but this time it won\u0027t do me any good.\u003C/p\u003E\u003Cp\u003EThanks for the suggestions; lemme know if anyone digs up a mod for this or anything! In the meantime I\u0027ll just assume the ship is lost and start making a better one... :\\\u003C/p\u003E\n"},{"CreatedByName":"Ezriilc","CreatedById":34556,"CreatedDateTime":"2015-10-15T18:56:04Z","Content":"\n\u003Cp\u003EHi all! I realize this thread is a bit old, but a recent request for this functionality has prompted me to build a tool.\u003C/p\u003E\u003Cp\u003EI\u0027m almost done, but there are some properties that need translation from the .sfs (VESSEL node) to the .craft file, and I\u0027m having trouble figuring that out.\u003C/p\u003E\u003Cp\u003EIf anyone has input, please post here or contact me - thanks in advance!\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-10-16T01:21:28Z","Content":"\n\u003Cp\u003Eno point keeping useful info out of the public eye. So what do you need? I hand edit my SFS all the time for so many different things, I\u0027m also familiar with the craft file format.\u003C/p\u003E\n"},{"CreatedByName":"steuben","CreatedById":77368,"CreatedDateTime":"2015-10-16T11:19:56Z","Content":"\n\u003Cp\u003Ei\u0027m working the other way, inserting a craft file into a sfs, so I\u0027m interested in the notes as well.\u003C/p\u003E\n"},{"CreatedByName":"Ezriilc","CreatedById":34556,"CreatedDateTime":"2015-10-16T14:05:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003Eno point keeping useful info out of the public eye. So what do you need? I hand edit my SFS all the time for so many different things, I\u0027m also familiar with the craft file format.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe part tree, as represented by link and attN/srfN in the .craft file is apparently done differently in the .sfs file. That\u0027s my biggest hurdle at this point.\u003C/p\u003E\u003Cp\u003ESome values are easy to transform (position = pos, rotation = rot, etc.), but others are more mysterious (attPos, attPos0, etc.), and some are outright missing \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E(istg, dstg, etc.)\u003C/span\u003E. EDIT: It varies with the part.\u003C/p\u003E\u003Cp\u003ESince I already have a .cfg node parser and part database handy, the rest is/was/should be pretty easy. I have a good bit of experience parsing .craft files, but not so much with .sfs.\u003C/p\u003E\u003Cp\u003EIf someone could point me to a quick summary that cuts to the chase and gets me up to speed, that would be awesome, otherwise I\u0027ve got some reading to do. I will likely need to read through the existing code as well as the related threads here to catch up on what\u0027s already been done.\u003C/p\u003E\u003Cp\u003EI will post a link to my web-based tool once I have a testable version to upload - prolly later today.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-16T18:52:41Z\u0022 title=\u002210/16/2015 06:52  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 16, 2015\u003C/time\u003E by Ezriilc\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"steuben","CreatedById":77368,"CreatedDateTime":"2015-10-16T14:39:43Z","Content":"\n\u003Cp\u003EI\u0027m seeing the istg,dstg, etc in my samples. slightly different orders but there.\u003C/p\u003E\n"},{"CreatedByName":"Ezriilc","CreatedById":34556,"CreatedDateTime":"2015-10-16T14:42:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022steuben\u0022 data-cite=\u0022steuben\u0022\u003E\u003Cdiv\u003EI\u0027m seeing the istg,dstg, etc in my samples. slightly different orders but there.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs do I. I must have misremembered on those.\u003C/p\u003E\n"},{"CreatedByName":"Ezriilc","CreatedById":34556,"CreatedDateTime":"2015-10-16T17:50:14Z","Content":"\n\u003Cp\u003EI\u0027ve finished the web tool enough to test it. The output is properly formatted, but the ships don\u0027t work in-game yet.\u003C/p\u003E\u003Cp\u003EIf anyone is willing to help test and give feedback (THANKS! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E), please PM me here or in IRC for the URL.\u003C/p\u003E\n"},{"CreatedByName":"Ezriilc","CreatedById":34556,"CreatedDateTime":"2015-10-21T23:16:24Z","Content":"\n\u003Cp\u003EUpdate: I now have a .craft file that can be loaded by the KSP editor, but it is bugged in a way that borks the editor - only the root part shows, and the player cannot take or move it.\u003C/p\u003E\u003Cp\u003EI think I have the basic part tree figured out via the \u0022parent\u0022 property, with parts indexed by the order they appear in the .sfs file (first is root).\u003C/p\u003E\u003Cp\u003EThe pos, attPos, rot, attRot properties exist in .craft files, but don\u0027t seem to have easily translated counterparts in the .sfs. There may be some math that can figure them, but I don\u0027t see it.\u003C/p\u003E\u003Cp\u003EI\u0027m not surprised that it doesn\u0027t work yet, but I think I\u0027m close.\u003C/p\u003E\n"},{"CreatedByName":"steuben","CreatedById":77368,"CreatedDateTime":"2015-10-21T23:37:48Z","Content":"\n\u003Cp\u003Elink/post the craft and the ship in the sfs and we\u0027ll take look.\u003C/p\u003E\n"},{"CreatedByName":"Ruedii","CreatedById":57704,"CreatedDateTime":"2015-10-21T23:54:13Z","Content":"\n\u003Cp\u003EThe last ship launched is auto-saved under \u0022Auto-saved ship\u0022\u003C/p\u003E\u003Cp\u003EYou can check if it is still there.\u003C/p\u003E\u003Cp\u003EHowever, an auto-ship saver mod, and a ship extractor mods are two mods you might want to suggest.\u003C/p\u003E\n"},{"CreatedByName":"Zephram Kerman","CreatedById":15270,"CreatedDateTime":"2015-10-22T02:18:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022steuben\u0022 data-cite=\u0022steuben\u0022\u003E\u003Cdiv\u003Ei\u0027m working the other way, inserting a craft file into a sfs, so I\u0027m interested in the notes as well.\u003C/div\u003E\u003C/blockquote\u003EI\u0027ve no help for Ezriilc; that\u0027s a hard one, and I\u0027ve been hoping for a mod for this problem for years, literally. \u003Cp\u003EFor Steuben, this one is easy! Simply launch the vessel, then position it with hyperedit. Or, did I misunderstand your question?\u003C/p\u003E\n"},{"CreatedByName":"steuben","CreatedById":77368,"CreatedDateTime":"2015-10-22T09:43:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Zephram Kerman\u0022 data-cite=\u0022Zephram Kerman\u0022\u003E\u003Cdiv\u003EFor Steuben, this one is easy! Simply launch the vessel, then position it with hyperedit. Or, did I misunderstand your question?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethat process i know. problem is i\u0027m pushing things too hard for step one to work. so i\u0027m trying to cut out the middle man.\u003C/p\u003E\n"},{"CreatedByName":"Ezriilc","CreatedById":34556,"CreatedDateTime":"2015-10-22T16:30:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Zephram Kerman\u0022 data-cite=\u0022Zephram Kerman\u0022\u003E\u003Cdiv\u003EI\u0027ve no help for Ezriilc; that\u0027s a hard one, and I\u0027ve been hoping for a mod for this problem for years, literally.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, good! I\u0027m glad someone else is interested.\u003C/p\u003E\u003Cp\u003EUpdate: Progress! My latest output .craft file can be fully loaded in the KSP editor, AND the player can take/move parts\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E, BUT... the parts are not connected to each other - rather they appear in a \u0022pile\u0022 on the floor. I think all that is left is figuring the exact position and rotation of the non-root parts\u003C/span\u003E. \u003Cstrong\u003E\u003Cem\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003EEDIT: It works! \u003C/span\u003E\u003C/em\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EHere are some reference links: EDIT: Updated these links. These are not the tool itself, that is further down this thread.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EEDIT: The Craft Extractor is now at the bottom of our Craft Kitchen page.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.kerbaltek.com/craftkitchen\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E\u003Cem\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003Ewww.Kerbaltek.com/craftkitchen\u003C/span\u003E\u003C/span\u003E\u003C/em\u003E\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-24T18:03:34Z\u0022 title=\u002210/24/2015 06:03  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 24, 2015\u003C/time\u003E by Ezriilc\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"steuben","CreatedById":77368,"CreatedDateTime":"2015-10-22T16:38:32Z","Content":"\n\u003Cp\u003Elooks like pos isn\u0027t either extracted from the sfs or insterted to the craft, or both.\u003C/p\u003E\u003Cp\u003EI think if you generate it as POS[root] \u002BattPos0[part] you might get what you need.\u003C/p\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2015-10-22T17:01:20Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022https://github.com/ClawKSP/InflightShipSave/releases\u0022 rel=\u0022external nofollow\u0022\u003EClaw\u0027s InflightShipSave Mod\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBack when Inigma had lost the .craft file for his \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/108219-STS-1-Space-Shuttle-%28NASA-Replica-Easy-to-Load-Fly%29-Full-O-Y-Tanks-to-Orbit-VIDEO-CRAFT\u0022 rel=\u0022external nofollow\u0022\u003ESpace Shuttle Replica\u003C/a\u003E, Claw and I attempted to write programs to convert the .sfs to a .craft. Claw\u0027s version is linked above. (Considering mine was never finished \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E)\u003C/p\u003E\u003Cp\u003EI have not the slightest clue if it will still work in Version 1.0.4, as IIRC this was made in Version 0.90.0.\u003C/p\u003E\n"},{"CreatedByName":"Claw","CreatedById":100668,"CreatedDateTime":"2015-10-22T17:57:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwhip\u0022 data-cite=\u0022Starwhip\u0022\u003E\u003Cdiv\u003EI have not the slightest clue if it will still work in Version 1.0.4, as IIRC this was made in Version 0.90.0.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYep, it was written in 0.90. I have\u0027t tried it in 1.0.X.\u003C/p\u003E\u003Cp\u003EIt had maybe 6 downloads, so I never bothered to update it.\u003C/p\u003E\u003Cp\u003ECheers,\u003C/p\u003E\u003Cp\u003E-Claw\u003C/p\u003E\n"},{"CreatedByName":"Ezriilc","CreatedById":34556,"CreatedDateTime":"2015-10-22T20:10:23Z","Content":"\n\u003Cp\u003EMORE progress! The parts are now connected together, but the distance between them is off - something in my math, I think.\u003C/p\u003E\u003Cp\u003EI\u0027ve updated the output file in the links above, so maybe someone can see what I\u0027m messing up.\u003C/p\u003E\u003Cp\u003EI\u0027m beginning to think this might actually work!\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EFor some reason, I\u0027ve not been getting notifications for this thread - a known problem.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022steuben\u0022 data-cite=\u0022steuben\u0022\u003E\u003Cdiv\u003Elooks like pos isn\u0027t either extracted from the sfs or insterted to the craft, or both.\u003Cp\u003EI think if you generate it as POS[root] \u002BattPos0[part] you might get what you need.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat was exactly it, but something in my math is off, leaving gaps between parts. Perhaps you can see from the output where I\u0027ve gone wrong?\u003C/p\u003E\u003Cp\u003EAs for Claw\u0027s mod, I\u0027ve looked at that, but it\u0027s all being done with the in-game API, and doesn\u0027t do anything with the config node texts. My web based tool is working strictly from the text of the .sfs file - with a little help from the parts database.\u003C/p\u003E\u003Cp\u003EI do appreciate all the help! I look forward to getting this working to some usable level.\u003C/p\u003E\n"},{"CreatedByName":"Ezriilc","CreatedById":34556,"CreatedDateTime":"2015-10-22T22:42:59Z","Content":"\n\u003Cp\u003EI\u0027ve done it! ... I think.\u003C/p\u003E\u003Cp\u003EThe tool produces a seemingly complete ship with all the parts in the right place. The math for position is strange - the attPos0 prop is cumulative with every part in the tree before it, and then pos is calculated from its parent\u0027s pos \u002B attPos0.\u003C/p\u003E\u003Cp\u003EI strongly suspect that there remains other issues with the final craft, and \u003Cstrong\u003Emuch testing is in order\u003C/strong\u003E as I\u0027ve not yet tried anything \u003Cstrong\u003Ewith parts rotated and/or in symmetry\u003C/strong\u003E.\u003C/p\u003E\u003Cp\u003ENow that it appears to be working, I\u0027ll post the \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003ETEMPORARY\u003C/span\u003E link to \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Ewhat I\u0027m calling the ALPHA version of\u003C/span\u003E this tool. \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EIf it works well in the long run,\u003C/span\u003E I\u0027ll incorporate it into my Craft Kitchen page.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EEDIT: I\u0027ve moved this tool to our Craft Kitchen page.\u003C/em\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.kerbaltek.com/craftkitchen\u0022 rel=\u0022external nofollow\u0022\u003Ewww.Kerbaltek.com/craftkitchen\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI look forward to any bug reports ya\u0027all can send me. Thanks again for the ongoing help! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-23T16:29:27Z\u0022 title=\u002210/23/2015 04:29  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 23, 2015\u003C/time\u003E by Ezriilc\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AlextheBodacious","CreatedById":139447,"CreatedDateTime":"2015-10-22T23:32:45Z","Content":"\n\u003Cp\u003EI had the EXACT same problem. What you want is this. NOTE: It doesn\u0027t work for docked vessels. \u003Ca href=\u0022https://github.com/ClawKSP/InflightShipSave/releases\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/ClawKSP/InflightShipSave/releases\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EPS there are tons of these threads, don\u0027t worry.\u003C/p\u003E\n"},{"CreatedByName":"Ezriilc","CreatedById":34556,"CreatedDateTime":"2015-10-23T16:22:16Z","Content":"\n\u003Cp\u003ENow that my Craft Extractor tool is working, I\u0027ve moved it into BETA testing, and integrated it into our Craft Kitchen page.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.kerbaltek.com/craftkitchen\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E\u003Cem\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003Ewww.Kerbaltek.com/craftkitchen\u003C/span\u003E\u003C/span\u003E\u003C/em\u003E\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m unsubscribing from this thread but I\u0027ll take up discussion of this tool in the Craft Kitchen thread here:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/62126\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E\u003Cem\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/62126\u003C/span\u003E\u003C/em\u003E\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESee ya\u0027all around! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\n"}]}