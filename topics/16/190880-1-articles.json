{"TopicId":190880,"ForumId":16,"TopicTitle":"Controlling a Quad copter","CreatedByName":"Curveball Anders","CreatedById":107529,"CreatedDateTime":"2020-01-06T21:30:25Z","PageNum":1,"Articles":[{"CreatedByName":"Curveball Anders","CreatedById":107529,"CreatedDateTime":"2020-01-06T21:30:25Z","Content":"\n\u003Cp\u003E\nOk, I managed to get a Quad to land and work (-ish) at Duna.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022E0LINfe.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002262.50\u0022 height=\u0022640\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/E0LINfe.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nBut it was 100% trail and error (mainly error).\n\u003C/p\u003E\n\u003Cp\u003E\nGetting the blade angle was by adding the angle to a control, adding the aero overlay and testing.\n\u003C/p\u003E\n\u003Cp\u003E\nI think that the idea is to control the lift by assigning the RPM limiters to a control, which works, but a complete nightmare.\n\u003C/p\u003E\n\u003Cp\u003E\nSo Ye Gurus how know this stuff,\u00A0 how is it done properly?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-01-07T09:16:26Z","Content":"\n\u003Cp\u003E\nWell, for the time being I\u0027ve given up trying to get a propeller powered vehicle to work on Duna. (But maybe I should try again with the ducted fans, allegedly they work better than the normal props.)\n\u003C/p\u003E\n\u003Cp\u003E\nThe quadcopter I made for Kerbin (current version \u003Ca href=\u0022https://kerbalx.com/AHHans/Basic-Quadcopter-ng\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E, with most of the instructions \u003Ca href=\u0022https://kerbalx.com/AHHans/Basic-Quadcopter\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E) is controlled in the way that the RPM of the rotors is kept constant and the lift is controlled by collective pitch angle of the blades. Because in a quadcopter the blades are always in the same general direction from the \u003Cabbr title=\u0022Center of Mass\u0022\u003ECOM\u003C/abbr\u003E of the craft (i.e. the blades of the front left rotor are always to the front and left of the \u003Cabbr title=\u0022Center of Mass\u0022\u003ECOM\u003C/abbr\u003E during the full rotation of the fan, which is in contrast to the blades of a classical helicopter), the blades can be used as control surfaces without the logic of KSP freaking out. So they can be used for pitch and yaw control (control direction is up). The difference between the two designs is how collective and cyclic (well, control) pitch is implemented: the old version needed extra servos, but since 1.8 the deflection angle and the authority limiter are separate on the blades so no extra servos are needed anymore. Roll control is done by changing the RPM of the clockwise and counterclockwise rotation fans via a KAL.\n\u003C/p\u003E\n"},{"CreatedByName":"Fierce Wolf","CreatedById":200019,"CreatedDateTime":"2020-01-07T14:09:35Z","Content":"\n\u003Cp\u003E\nIm just gonna say: I wish SQUAD would test a quadcopter (or rather, a squadcopter, amairite?) in Duna so they can get ALL the bugs with rotors.\n\u003C/p\u003E\n"},{"CreatedByName":"Curveball Anders","CreatedById":107529,"CreatedDateTime":"2020-01-07T15:35:09Z","Content":"\n\u003Cp\u003E\nI\u0027ve ignored the cyclic totally and cheats by using a reaction wheel.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve got the rotors and blades counter rotating in diagonal pairs so the torque cancels out.\n\u003C/p\u003E\n\u003Cp\u003E\nI tried using pitch to control lift but it becomes very hard to control with any precision, it\u0027s easier but laggier by using the rpm limiter.\n\u003C/p\u003E\n\u003Cp\u003E\nMy main problem is the control the horizontal motion but it might be that I\u0027m just stupid and not reading the visual ques correctly.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I can lift off, I can fly in any direction at quite a good lick but it\u0027s very hard to hover, and thereby very hard to land without falling over \u003Cspan\u003E\u003Cimg alt=\u0022:/\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon1.png\u0022 title=\u0022:/\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-01-07T16:06:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223725553\u0022 data-ipsquote-contentid=\u0022190880\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221578411309\u0022 data-ipsquote-userid=\u0022107529\u0022 data-ipsquote-username=\u0022Curveball Anders\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 minutes ago, Curveball Anders said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve ignored the cyclic totally and cheats by using a reaction wheel.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, my design was also kind of a self-imposed challenge to design ad quadcopter without reaction wheels. After I thought that this should be possible.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223725553\u0022 data-ipsquote-contentid=\u0022190880\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221578411309\u0022 data-ipsquote-userid=\u0022107529\u0022 data-ipsquote-username=\u0022Curveball Anders\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 minutes ago, Curveball Anders said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI tried using pitch to control lift but it becomes very hard to control with any precision, it\u0027s easier but laggier by using the rpm limiter.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWith the first version - that used extra servos for collective pitch - I could increase precision by reducing the range of the servos. I also always keep a \u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E of the blades open so that I can see the actual value. I guess I just prefer the fast and fairly direct control over the climb-/sink-rate over the less finicky control.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223725553\u0022 data-ipsquote-contentid=\u0022190880\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221578411309\u0022 data-ipsquote-userid=\u0022107529\u0022 data-ipsquote-username=\u0022Curveball Anders\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 minutes ago, Curveball Anders said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy main problem is the control the horizontal motion but it might be that I\u0027m just stupid and not reading the visual ques correctly.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWith the control direction being straight up, I can set \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E to \u0022surface - radial-out\u0022 which will keep the quadcopter steady, then I can use pitch and yaw control inputs to nullify my horizontal motion (center the pro- or retrograde marker on the navball). And once it is zeroed out, it stays zeroed out.\u00A0 [Looking at your screenshot] Well, I added a probe-core that supplies \u0022radial-hold\u0022 in \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E. You might want to give it a try yourself.\n\u003C/p\u003E\n\u003Cp\u003E\nOne drawback of my design is that the control direction has to be straight up! If you want to change that then you would need to change the setting on the blades (for which direction they act as control surfaces) and the action group that is currently bound to roll control. That makes long-distance navigation rather cumbersome...\n\u003C/p\u003E\n"},{"CreatedByName":"IkranMakto","CreatedById":198477,"CreatedDateTime":"2020-01-10T07:38:16Z","Content":"\n\u003Cp\u003E\nWell, I think it\u0027s time to post my quad copters. I\u0027ll do it later on Spacecraft exchange.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBest way to do it is using one KAL-1000 for each axis. X, Y, Z \u0438 Lift. Respectively bind to pitch, roll, yaw and throttle axis in action groups.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nForvard left rotor - clockwise, forward right - counter clockwise.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nRear left - counter clockwise, rear right - clockwise.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMotor speed - constant, as your craft needs.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nKAL-1000 should change rotor\u0027s deploy angle in inverse:\n\u003C/p\u003E\n\u003Cp\u003E\nFor pitch - rear and forward (from - 10 to \u002B20 degrees for examples).\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFor roll - left and right.\n\u003C/p\u003E\n\u003Cp\u003E\nFor yaw - rotors which spin clockwise and counter clockwise.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs result blades will have mean angle between all 4 axes.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"IkranMakto","CreatedById":198477,"CreatedDateTime":"2020-01-10T21:39:39Z","Content":"\n\u003Cp\u003E\nDone. It\u0027s quad copter, but complicated \u003Cspan\u003E:p Of course no reaction wheels\u003C/span\u003E\u003Cbr\u003E\u003Ca href=\u0022https://kerbalx.com/IkranMakto/Dragon-Gunship\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://kerbalx.com/IkranMakto/Dragon-Gunship\u003C/a\u003E\u003Cbr\u003E\u003Cspan\u003E\u003Cimg alt=\u0022A61AFFy.gif\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002262.50\u0022 height=\u0022300\u0022 width=\u0022480\u0022 src=\u0022https://i.imgur.com/A61AFFy.gif\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"BigFatStupidHead","CreatedById":44217,"CreatedDateTime":"2020-01-14T01:23:25Z","Content":"\n\u003Cp\u003E\nWe had quite a good discussion a while back about this over\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/186600-duna-electric-rotocraft/\u0022 rel=\u0022\u0022\u003EHERE.\u003C/a\u003E\u00A0This was before shrouds came out, so they may make a world of difference.\n\u003C/p\u003E\n"}]}