{"TopicId":104068,"ForumId":16,"TopicTitle":"\u0022Lagrange\u0022 point woes","CreatedByName":"impyre","CreatedById":116031,"CreatedDateTime":"2015-04-13T20:19:09Z","PageNum":1,"Articles":[{"CreatedByName":"impyre","CreatedById":116031,"CreatedDateTime":"2015-04-13T20:19:09Z","Content":"--I know that Lagrange points don\u0027t exist in KSP... that\u0027s why I wrote \u0022Lagrange\u0022 instead--\n\nNow that that\u0027s out of the way. Here\u0027s what I\u0027ve been trying to do. I want to eventually build a station just outside Kerbin\u0027s SoI. Since KSP uses two-body orbital mechanics, I thought this should be possible.... so I started trying to launch communication satellites up there (RT2). I establish escape trajectory, wait until I\u0027m outside the SoI (quite a bit outside it in some cases), and then attempt to match kerbin\u0027s orbital velocity. I\u0027ve tried matching the orbital periods, but it doesn\u0027t seem to make much sense... it seems like in order to get an orbital period that matches kerbin\u0027s, I have to raise my apoapsis well above kerbin\u0027s (and thus I drift off). If I try to match kerbin\u0027s orbital velocity, I end up falling back to kerbin (though I shouldn\u0027t if I understand the two-body system correctly). What am I doing wrong? Is this even possible? I\u0027ve done it with the Mun with no issues... but I can\u0027t seem to replicate my success with Kerbin.\n\nThe only theory that I\u0027ve been able to come up with is that Kerbin is \u0022on rails\u0022 in an orbit that makes no sense given its velocity. Is this true?\n\nEDIT: Unless they manually calculated gravity in the kerbin-kerbol system accounting for both masses, and treated the mun as massless in the kerbin-mun system..... but why would they do that?\n\n**Edited \u003Ctime datetime=\u00222015-04-13T20:30:52Z\u0022 title=\u002204/13/2015 08:30  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 13, 2015\u003C/time\u003E by impyre**"},{"CreatedByName":"Deutherius","CreatedById":125381,"CreatedDateTime":"2015-04-13T20:42:59Z","Content":"It\u0027s not very clear from your post which Lagrange point you are trying to simulate. I think you\u0027re trying to simulate L4/L5, which should be possible (well... they won\u0027t be automatically stable like the real ones would, you\u0027d have to get the trajectory absolutely perfect for it to work - but you probably know that), but it should be stated somewhere in your post. \u0022Just outside SOI\u0022 is pretty general and might get interpreted like you are trying to simulate L1 or L2, which will, of course, never work in a 2-body system.\n\nAs for the reason why it does work with the Mun but doesn\u0027t work with Kerbin... No idea. It most definitely should.\n\n**Edited \u003Ctime datetime=\u00222015-04-13T20:46:03Z\u0022 title=\u002204/13/2015 08:46  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 13, 2015\u003C/time\u003E by Deutherius**\n  \ncorrected quotes"},{"CreatedByName":"Taki117","CreatedById":89975,"CreatedDateTime":"2015-04-13T20:45:10Z","Content":"If you ate just outside kerbins soi it is entirely possible that the rounding errors are putting you back inside kerbins soi. What you should do is get a significant portion of an orbit behind kerbon, then put one opposite kerbin in its orbit. You want to match kerbins orbital period, which might be difficult."},{"CreatedByName":"impyre","CreatedById":116031,"CreatedDateTime":"2015-04-13T20:55:26Z","Content":"\u003E \n\u003E It\u0027s not very clear from your post which Lagrange point you are trying to simulate. I think you\u0027re trying to simulate L4/L5, which should be possible (well... they won\u0027t be automatically stable like the real ones would, you\u0027d have to get the trajectory absolutely perfect for it to work - but you probably know that), but it should be stated somewhere in your post. \u0022Just outside SOI\u0022 is pretty general and might get interpreted like you are trying to simulate L1 or L2, which will, of course, never work in a 2-body system.\n\u003E As for the reason why it does work with the Mun but doesn\u0027t work with Kerbin... No idea. It most definitely should.\n\nYou\u0027re right, L1/L2 couldn\u0027t work. As is, I wasn\u0027t trying to simulate an actual lagrange point... just a point on kerbin\u0027s orbit a little ahead of it in such a way that I don\u0027t drift off or \u0022fall\u0022 back in. \n\nAs for distance from kerbin being the issue, I\u0027ve been pretty far... I can try for further though."},{"CreatedByName":"Yakky","CreatedById":94432,"CreatedDateTime":"2015-04-13T21:34:18Z","Content":"I just did some calculations based on the listed Kerbal Wiki orbit data, and it looks like the \u0022on rails\u0022 Kerbin orbital velocity may indeed be wrong. Either that or some part of the Wiki data is wrong.\n\nNote that for a circular orbit, the orbital speed *s* = sqrt(*mu*/*r*) where *r* is the orbital radius and *mu* is a gravitational parameter. More importantly for our purposes, given two different orbital radii *r1* and *r2*, and one corresponding *s1*, we can quickly calculate *s2* as *s1*\\*sqrt(*r1*/*r2*). We don\u0027t even need to mess with *mu* because it conveniently cancels out.\n\nI plugged the following Kerbal Wiki data into that equation:\n\nKerbol radius: 261,600 km\n\nKerbol surface rotation speed: 3.8048 km/s\n\nKerbol synchronous orbit altitude (\u0022*r1*\u0022): 1,508,045.29 km\n\nKerbol synchronous orbit speed (\u0022*s1*\u0022): 25.6548 km/s (calculated from the three numbers above)\n\nKerbin orbit altitude above Kerbol (\u0022*r2*\u0022): 13,599,840.26 km and perfectly circular (Edit: see my note below)\n\nNow, plugging *r1*, *s1*, and *r2* into our equation, we get *s2* = 9.16884 km/s. But Kerbin\u0027s orbital speed is listed in the wiki as 9.2845 km/s, which doesn\u0027t match. So if the Kerbal Wiki data is to be believed, that right there tells us something is inconsistent.\n\nSo while I haven\u0027t fired up KSP to verify what you said, from this math it looks like your suspicion is correct and staying in a Kerbin-following or Kerbin-leading orbit is impossible. But it also seems to me that someone would have stumbled across this already. Am I missing something obvious here?\n\nEdit: It turns out that if Kerbin\u0027s listed orbital radius is taken as being from the *center* of Kerbol while the kerbosynchronous altitude is interpreted as being from the *surface* of Kerbol, then the calculated speed is 9.28446 km/s which pretty much matches the listed speed. But I don\u0027t know if the orbital radius is defined that way or not. Seems like one or the other value should be updated in the wiki so they are defined consistently. \n\nAnd since your in-game altitude display is shown relative to the *surface* of the celestial body you\u0027re orbiting, you might be off from the correct altitude by 261,600 km if you\u0027re basing your satellite\u0027s altitude on some reference that is relative to Kerbol\u0027s *center* (such as the wiki).\n\n(I have not launched KSP to look at what altitude Kerbin is shown to be orbiting in the game. Is it above Kerbol\u0027s surface or relative to Kerbol\u0027s center?) \n\n**Edited \u003Ctime datetime=\u00222015-04-13T21:53:50Z\u0022 title=\u002204/13/2015 09:53  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 13, 2015\u003C/time\u003E by Yakky**"},{"CreatedByName":"LethalDose","CreatedById":92657,"CreatedDateTime":"2015-04-13T21:39:50Z","Content":"While I understand that you aren\u0027t trying to simulate any particular Lagrangian point, it may be helpful to try to roughly simulate L4 or L5, which are 60 degrees before or behind Kerbin\u0027s orbit.\n\nThis will provide a very wide margin for error in the positioning of the satellite so libration (back and forth oscillation of a body when viewed from an other point) doesn\u0027t cause the satellite to encounter Kerbin\u0027s SoI. Libration occurs when a synchronous orbit has a non zero eccentricity (horizontal libration) or non-zero inclination (vertical inclination). When simulating a Lagrange point, you are essentially placing the satellite in an orbit that has the same orbital period as the sibling body (In this case, Kerbin, as the the sun is the parent).\n\nYour target orbit should have AP \u002B PE = 2 \\* Kerbin\u0027s orbital radius, which will give cause your satellite\u0027s orbit\u0027s semi-major axis to match the length of Kerbin\u0027s semi-major axis, and hence, have similar orbital periods (this is a simplification of the math, but it should work). NOTE: The orbital radius given in the wiki *is not the orbital radius displayed in the map view.* The wiki includes the radius of the parent body (again, the sun, in this case) in the radius, while the map display in the game does not. Just be consistent between the two and you\u0027ll be fine.\n\nIf the AP doesn\u0027t equal the PE (hence e != 0), the satellite will appear to librate back and forth in reference to Kerbin, but if it\u0027s far enough away, the movement should lead to encounters with Kerbin\u0027s SoI.\n\n**Proactive Addendum:** Yes, I know this may not be the exact definition of \u0022librate\u0022 but it works well enough in this situation.\n\n- - - Updated - - -\n\n\u003E \n\u003E Kerbin orbit altitude above Kerbol (\u0022*r2*\u0022): 13,599,840.26 km\n\u003E Now, plugging *r1*, *s1*, and *r2* into our equation, we get *s2* = 9.16884 km/s. But Kerbin\u0027s orbital speed is listed in the wiki as 9.2845 km/s, which doesn\u0027t match. So if the Kerbal Wiki data is to be believed, that right there tells us something is inconsistent.\n\nAs I noted in the previous post, make sure you\u0027re aware that the wiki reports orbital altitude *from the parent\u0027s center* while the map view reports orbital altitude *from the parent\u0027s surface at sea level*. This is consistent across the wiki entries (typically the first footnote).\n\nBasically, just make sure you know what numbers you\u0027re using. Since you listed Kerbin\u0027s orbital altitude as it appears in the wiki and labeled it \u0022orbital altitude above Kerbol\u0022, I fear you may have fallen victim to one of the classic blunders.\n\n**Update:** Using the orbital radius provided by the wiki as the footnote indicates it should be used, Kerbin\u0027s orbital velocity is calculated to be 9284.5 m/s using eq 4.6 [here](http://www.braeunig.us/space/orbmech.htm). This value is consistent with wiki entry.\n\n**Edited \u003Ctime datetime=\u00222015-04-13T21:59:25Z\u0022 title=\u002204/13/2015 09:59  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 13, 2015\u003C/time\u003E by LethalDose**"},{"CreatedByName":"Yakky","CreatedById":94432,"CreatedDateTime":"2015-04-13T21:56:27Z","Content":"\u003E Basically, just make sure you know what numbers you\u0027re using. Since you listed Kerbin\u0027s orbital altitude as it appears in the wiki and labeled it \u0022orbital altitude above Kerbol\u0022, I fear you may have fallen victim to one of the classic blunders.\n\nYup, just realized the numbers are not presented the same way... but thanks for pointing it out. It does raise the possibility that impyre is basing his target orbital altitude off an incorrectly calibrated reference."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-04-13T22:50:19Z","Content":"\u003E \n\u003E Your target orbit should have AP \u002B PE = 2 \\* Kerbin\u0027s orbital radius, which will give cause your satellite\u0027s orbit\u0027s semi-major axis to match the length of Kerbin\u0027s semi-major axis, and hence, have similar orbital periods (this is a simplification of the math, but it should work).\n\nThis is the key. Matching orbital periods is critical to avoiding drift, and it is the semi-major axis that determines period. It is better to have Ap 1000 km too high and Pe 1000km too low than to have both too high by 100km."},{"CreatedByName":"impyre","CreatedById":116031,"CreatedDateTime":"2015-04-14T01:42:12Z","Content":"Thanks guys, I\u0027ll have another look and pay a bit more attention to exactly what\u0027s going on. I\u0027ll update once I know for sure what I\u0027m doing wrong.\n\nUPDATE: My issue was a combination of floating point error and very slight orbital period mismatch.... so I kept falling back into kerbin\u0027s soi. Setting up just outside the soi and \\*behind\\* kerbin was much easier (and I was able to stay relatively close without fear of being \u0022caught\u0022). Another thing that was confusing me (but not causing problems really) was that KER was showing orbital periods in 24-hour days rather than 6 hour days. I also managed to set up a much more interesting \u0022pseudo orbit\u0022 by burning radial-out once out of the soi, this eliminated accidental encounters and made it seem as if I were still orbiting kerbin (was kinda cool).\n\n**Edited \u003Ctime datetime=\u00222015-04-14T04:48:23Z\u0022 title=\u002204/14/2015 04:48  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 14, 2015\u003C/time\u003E by impyre**"},{"CreatedByName":"kerbiloid","CreatedById":129408,"CreatedDateTime":"2015-04-14T06:27:27Z","Content":"Btw. There are two well-known problems: near-Langrange orbit stability and synchronous orbit stability.\n\nBoth problems are the same: some virtual point in space moves along a fixed trajectory, and we want all crafts in its proximity to float around this point without an engine burn.\n\nMaybe the best solution would be if anybody skilled in the KSP modding would create a mod for such purposes, smth like \u0022Attractive Points\u0022.\n\nI.e. a player manually puts/defines in cfg a virtual non-visual object - where some Lagrange or synchronous position would be.\n\nThe he/she launches any craft to its proximity range.\n\nAnd then this object just cyclically searches all crafts in some radius and corrects their position with a brute mathematical force - to keep the craft in proximity unless craft\u0027s engines are on.\n\nI.e. then we have not a N-bodies problem, but just an orbit patching.\n\nupd: Maybe Kopernicus mod would be a quick-and-dirty solution for Lagrange points. Defining invisible and untouchable pseudo-\u0022celestial bodies\u0022 in desired points. \n\nWith some little mass, weak gravity and small SOI: enough to keep the craft aside, insignificant to effect something another, invisible (or with weak particle effect).\n\n**Edited \u003Ctime datetime=\u00222015-04-14T07:01:21Z\u0022 title=\u002204/14/2015 07:01  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 14, 2015\u003C/time\u003E by kerbiloid**"}]}