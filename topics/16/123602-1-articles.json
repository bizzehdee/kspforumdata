{"TopicId":123602,"ForumId":16,"TopicTitle":"atmCurve formula for 1.0.4","CreatedByName":"SpecTRe-X","CreatedById":126052,"CreatedDateTime":"2015-10-23T10:02:04Z","PageNum":1,"Articles":[{"CreatedByName":"SpecTRe-X","CreatedById":126052,"CreatedDateTime":"2015-10-23T10:02:04Z","Content":"\n\u003Cp\u003EI\u0027m not sure if this is the right section so if this is posted in the wrong spot please move it. The forums seemed to change since my last posting lol.\u003C/p\u003E\u003Cp\u003EThe other day a friend who plays KSP asked me to alter some files for him because he\u0027s squeamish about doing it himself. He told me what he wanted changed and to about where he wanted it performance wise. Basically he wants a more realistic version of the broadsword from the \u003Cem\u003EMk IV system\u003C/em\u003E mod and a dual or tri mode Mk 2 TurboRam Jet (\u0022screamjet\u0022) from the \u003Cem\u003EOPT\u003C/em\u003E mod.\u003C/p\u003E\u003Cp\u003EFor the broadsword alterations I\u0027m looking for a formula or equation to calculate specific ATM pressures for custom altitudes not listed here: \u003Ca href=\u0022\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Kerbin#Atmosphere\u003C/a\u003E ; such as 32,500 ft. I found this equation Formula: \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EATM * e ^ ( -ALTITUDE / SCALE ) \u003C/pre\u003E\u003Cp\u003E but the post didn\u0027t specify what \u0022e\u0022 is supposed to be or if this even still works (I read that there may not be a simple equation for this anymore). I\u0027ve spent the last ~5 hours searching here and google and found nothing that seems to make sense for this.\u003C/p\u003E\u003Cp\u003EFor the Mk2 turboram, I can\u0027t seem to get the exhaust nozzle lighting to work for both modes. If I place it like this.....\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    MODULE\u003Cbr\u003E    {\u003Cbr\u003E        name = ModuleEnginesFX\u003Cbr\u003E        engineID = TurboJet\u003Cbr\u003E        thrustVectorTransformName = thrustTransform\u003Cbr\u003E        exhaustDamage = True\u003Cbr\u003E        ignitionThreshold = 0.03\u003Cbr\u003E        minThrust = 0\u003Cbr\u003E        maxThrust = 650\u003Cbr\u003E        heatProduction = 291\u003Cbr\u003E        useEngineResponseTime = True\u003Cbr\u003E        engineAccelerationSpeed = 0.2\u003Cbr\u003E        engineDecelerationSpeed = 0.4\u003Cbr\u003E        useVelocityCurve = False\u003Cbr\u003E        flameoutEffectName = flameout\u003Cbr\u003E        powerEffectName = running_thrust\u003Cbr\u003E        engageEffectName = engage\u003Cbr\u003E        disengageEffectName = disengage\u003Cbr\u003E        spoolEffectName = running_turbine\u003Cbr\u003E        engineSpoolIdle = 0.05\u003Cbr\u003E        engineSpoolTime = 2.0\u003Cbr\u003E        EngineType = Turbine\u003Cbr\u003E\u003Cbr\u003E        PROPELLANT\u003Cbr\u003E        {\u003Cbr\u003E            name = LiquidFuel\u003Cbr\u003E            resourceFlowMode = STAGE_PRIORITY_FLOW\u003Cbr\u003E            ratio = 4\u003Cbr\u003E            DrawGauge = True\u003Cbr\u003E        }\u003Cbr\u003E        PROPELLANT\u003Cbr\u003E        {\u003Cbr\u003E            name = IntakeAir\u003Cbr\u003E            ignoreForIsp = True\u003Cbr\u003E            ratio = 9\u003Cbr\u003E        }\u003Cbr\u003E        atmosphereCurve\u003Cbr\u003E        {\u003Cbr\u003E            key = 0 7000 0 0 \u003Cbr\u003E        }\u003Cbr\u003E        // Jet params\u003Cbr\u003E        atmChangeFlow = True\u003Cbr\u003E        useVelCurve = True\u003Cbr\u003E        useAtmCurve = True\u003Cbr\u003E        machLimit = 4\u003Cbr\u003E        machHeatMult = 3.0\u003Cbr\u003EvelCurve\u003Cbr\u003E{\u003Cbr\u003Ekey = 0 0.6\u003Cbr\u003E\u003Cbr\u003Ekey = 0.2 0.8\u003Cbr\u003E\u003Cbr\u003Ekey = 1.36 0.9\u003Cbr\u003E\u003Cbr\u003Ekey = 2.0875 1.306206 0.558359 0.2083685\u003Cbr\u003E\u003Cbr\u003Ekey = 2.474524 1.870126 1.621842 1.29743\u003Cbr\u003E\u003Cbr\u003Ekey = 2.945652 2.160394 0.3836924 -0.04622887\u003Cbr\u003E\u003Cbr\u003Ekey = 3.842887 1.940503 -0.2246427 -0.2246427\u003Cbr\u003E\u003Cbr\u003Ekey = 6 1.5\u003Cbr\u003E\u003Cbr\u003Ekey = 7.5 0\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E        atmCurve\u003Cbr\u003E        {\u003Cbr\u003E        //Airflow vs max thrust?\u003Cbr\u003E        key = 0 0\u003Cbr\u003E        key = 0.005 0.3\u003Cbr\u003E\u003Cbr\u003E        key = 0.03469022 0.8916956 19.92897 0.5922443\u003Cbr\u003E\u003Cbr\u003E        key = 0.2 1\u003Cbr\u003E\u003Cbr\u003E        key = 0.3 1\u003Cbr\u003E\u003Cbr\u003E        key = 1 0.6\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E    MODULE\u003Cbr\u003E    {\u003Cbr\u003E        name = FXModuleAnimateThrottle\u003Cbr\u003E        ThermalAnim = engine_light\u003Cbr\u003E        dependOnEngineState = True\u003Cbr\u003E        responseSpeed = 0.01\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI only get the throttle controlled lighting for the air breathing mode. If I place it anywhere else it is either always on or always off for both modes.\u003C/p\u003E\u003Cp\u003EMy second question for this engine is: Is it possible to set a tertiary mode in the below module to allow for a LF/O closed cycle engine option alongside the turbojet and ramjet for use in an SSTO or would the tertiary setting not be recognized?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E   MODULE\u003Cbr\u003E    {\u003Cbr\u003E            name = MultiModeEngine\u003Cbr\u003E            primaryEngineID = TurboJet\u003Cbr\u003E            secondaryEngineID = RamJet\u003Cbr\u003E            tertiaryEngineID = Closed-Cycle\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHopefully you guys can help me out with this, I\u0027ve hit a dead end with the first two issues.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-10-23T13:07:10Z","Content":"\n\u003Ca href=\u0022https://en.wikipedia.org/wiki/E_(mathematical_constant)\u0022 rel=\u0022external nofollow\u0022\u003Ee is the base of the natural logarithm, or about 2.718.\u003C/a\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-10-23T19:03:07Z","Content":"\n\u003Cp\u003E1. Nope, multimode engine supports only two modes.\u003C/p\u003E\u003Cp\u003E2. Um. atmCurve uses normalized density (where 1.0 in the curve = 1.225kg/m^3 density). If you want to find Kerbin atmospheric properties, your best bet is to \u003Ca href=\u0022http://www.digitaldutch.com/atmoscalc/\u0022 rel=\u0022external nofollow\u0022\u003Ego here\u003C/a\u003E, take your Kerbin altitude and multiply it by 1.25, and put it in the altitude box. Then change the density readout to \u0027sigma\u0027 not kg/m^3.\u003C/p\u003E\u003Cp\u003EI\u0027m...not even going to address how crazy it is to have an engine provide nearly double the thrust of sea level with only 1/3 the mass flow of sea level, that\u0027s all on your head. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"SpecTRe-X","CreatedById":126052,"CreatedDateTime":"2015-10-23T21:12:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003E\u003Ca href=\u0022https://en.wikipedia.org/wiki/E_(mathematical_constant)\u0022 rel=\u0022external nofollow\u0022\u003Ee is the base of the natural logarithm, or about 2.718.\u003C/a\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you so much! It never occurred to me that it was a constant and not a placeholder.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003E1. Nope, multimode engine supports only two modes.\u003Cp\u003E2. Um. atmCurve uses normalized density (where 1.0 in the curve = 1.225kg/m^3 density). If you want to find Kerbin atmospheric properties, your best bet is to \u003Ca href=\u0022http://www.digitaldutch.com/atmoscalc/\u0022 rel=\u0022external nofollow\u0022\u003Ego here\u003C/a\u003E, take your Kerbin altitude and multiply it by 1.25, and put it in the altitude box. Then change the density readout to \u0027sigma\u0027 not kg/m^3.\u003C/p\u003E\u003Cp\u003EI\u0027m...not even going to address how crazy it is to have an engine provide nearly double the thrust of sea level with only 1/3 the mass flow of sea level, that\u0027s all on your head. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E1) That\u0027s what I had figured.\u003C/p\u003E\u003Cp\u003E2) Right, but the curve table in cfg files uses the \u0022atm\u0022 value to denote altitude for the atmCurve, from what I\u0027ve read. If the equation I posted in the OP is still accurate then I can use that in a spreadsheet since I now have \u0022e\u0022. (If it proves to be no longer accurate I\u0027ll definitely use that calculator!)\u003C/p\u003E\u003Cp\u003E3) Yeah, I\u0027m going to have to adjust that. I haven\u0027t even begun changing the velCurve tables yet, I wanted to get the atmCurve tables done first.\u003C/p\u003E\u003Cp\u003EThanks for the help Red and Nathan!\u003C/p\u003E\u003Cp\u003EI could still use some insight with making the throttle controlled jet exhaust nozzle lighting effect work for both modes though.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-10-23T23:32:43Z","Content":"\n\u003Cp\u003ESure! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ERe: 2, it\u0027s no longer accurate. Thought I made that clear, sorry. That formula calculates pressure (not density, let alone normalized density) and is only correct for KSP \u003Cem\u003Eprior\u003C/em\u003E to 1.0.\u003C/p\u003E\n"},{"CreatedByName":"SpecTRe-X","CreatedById":126052,"CreatedDateTime":"2015-10-24T15:57:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003ESure! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003ERe: 2, it\u0027s no longer accurate. Thought I made that clear, sorry. That formula calculates pressure (not density, let alone normalized density) and is only correct for KSP \u003Cem\u003Eprior\u003C/em\u003E to 1.0.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI found that out when I tried using it after posting yesterday. I was able to fix it though, by using a dynamic scale height which I estimated by graphing the known altitudes/ATM values from the kerbin table in the wiki, then graphing my desired altitude. I found that if I slid it along the altitude line that when it lined up to the curve that I get a close enough scale height factor to use in the calculation (since the scale height appears to be nonlinear). Based on that, I was able to find the scale height and ATM value for my desired 10,833m altitude (which comes to about 5714 and .150 respectively).\u003C/p\u003E\u003Cp\u003EOf course, the above was rather pointless if I\u0027m understanding you correctly because I need the density and not pressure. I was under the impression that the first number in the atmCurve table was atm pressure which told ksp what altitude was desired and then ksp looked up the density based on the input pressure for the altitude. It doesn\u0027t help that I\u0027ve been trying to do this when I\u0027m already tired but I\u0027ve come across conflicting explanations of what the numbers in the atm and velCurve tables represent and what\u0027s worse is none of what I found was posted as \u0022official\u0022, just findings of random forum posters.\u003C/p\u003E\u003Cp\u003EI\u0027ll have to come back to this after I\u0027ve had some rest.\u003C/p\u003E\n"},{"CreatedByName":"paul23","CreatedById":120544,"CreatedDateTime":"2015-10-24T16:43:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003E1. Nope, multimode engine supports only two modes.\u003Cp\u003E2. Um. atmCurve uses normalized density (where 1.0 in the curve = 1.225kg/m^3 density). If you want to find Kerbin atmospheric properties, your best bet is to \u003Ca href=\u0022http://www.digitaldutch.com/atmoscalc/\u0022 rel=\u0022external nofollow\u0022\u003Ego here\u003C/a\u003E, take your Kerbin altitude and multiply it by 1.25, and put it in the altitude box. Then change the density readout to \u0027sigma\u0027 not kg/m^3.\u003C/p\u003E\u003Cp\u003EI\u0027m...not even going to address how crazy it is to have an engine provide nearly double the thrust of sea level with only 1/3 the mass flow of sea level, that\u0027s all on your head. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EKSP really follows the (US) standard atmosphere?\u003C/p\u003E\u003Cp\u003EThe standard atmosphere isn\u0027t isothermal, and hence isn\u0027t a simple exponent. (First 12km the temperature drops, then it stays constant up to an altitude of 20km, after which is rises), the density is calculated from this temperature, and it\u0027s slightly deviated from an exponent.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Comparison_US_standard_atmosphere_1962.svg/500px-Comparison_US_standard_atmosphere_1962.svg.png\u0022 alt=\u0022500px-Comparison_US_standard_atmosphere_1962.svg.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-10-25T02:37:16Z","Content":"\n\u003Cp\u003Epaul23: Yes, it does, with a .8 multiplier to height. There\u0027s lots of discussion in the Overhauls for 1.0 thread: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/119108-Overhauls-for-1-0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/119108-Overhauls-for-1-0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESpecTRe-X: atmosphereCurve, which is used to set Isp, uses pressure (in units of one atmosphere of pressure). atmCurve, used for changing flow with density, uses normalized density (normalized so a sea level density of 1.225kg/m^3 appears as 1.0).\u003C/p\u003E\n"},{"CreatedByName":"SpecTRe-X","CreatedById":126052,"CreatedDateTime":"2015-10-25T06:15:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESpecTRe-X: atmosphereCurve, which is used to set Isp, uses pressure (in units of one atmosphere of pressure). atmCurve, used for changing flow with density, uses normalized density (normalized so a sea level density of 1.225kg/m^3 appears as 1.0).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh dear, I understand now. I had myself all turned around. I appreciate your patience and taking the time to iron me out! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-10-25T16:38:51Z","Content":"\n\u003Cp\u003ENo problem! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}