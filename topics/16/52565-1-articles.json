{"TopicId":52565,"ForumId":16,"TopicTitle":"How to modify Temstar\u0026#039;s asparagus logic for serial and onion staging","CreatedByName":"luchelibre","CreatedById":61140,"CreatedDateTime":"2013-11-10T04:42:36Z","PageNum":1,"Articles":[{"CreatedByName":"luchelibre","CreatedById":61140,"CreatedDateTime":"2013-11-10T04:42:36Z","Content":"\n\u003Cp\u003ETemstar has an excellent post \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/28248-Is-asparagus-the-best-staging-system-%28might-contain-science%29?p=346702\u0026amp;viewfull=1#post346702\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E that makes asparagus design crazy-simple for work out, especially thanks to his hard-won contribution of the stack/booster power ratio.\u003C/p\u003E\u003Cp\u003EI understand that, because there is no dead engine weight and almost no dead tank weight, calculating the design can be much more straightforward.\u003C/p\u003E\u003Cp\u003EHowever, is there a method posted for serial staging and/or non-feed onion staging that comes close to the sort of simplicity that Temstar\u0027s post does?\u003C/p\u003E\u003Cp\u003EHere\u0027s what I\u0027ve got so far (2-stage serial lifter to 75km with FAR):\u003C/p\u003E\u003Cp\u003EIf I\u0027m lifting 5 tons at 12% with 1.7 TWR, math says I need 696kN off the pad. Now, my upper circ-stage gives me 17% (what percentage should this be?) of total dV at .75 TWR and increases the weight to 6.9 tons. Is there Temstar-easy logic and math that I can do to figure out the lower stage?\u003C/p\u003E\u003Cp\u003EDo I do the above again at 12% or drop it down by some calculated ratio, perhaps by 17%?\u003C/p\u003E\u003Cp\u003ENow on to onion (2-stage with two boosters):\u003C/p\u003E\u003Cp\u003ESame as before, 696kN off the pad. What\u0027s the recommended stack/booster power ratio and burn-time ratio? With asparagus, the stack is more powerful. But with non-feed onion, the stack would be weaker. My brain starts to get fuzzled by this point trying to figure out how to spread the fuel and engines around.\u003C/p\u003E\u003Cp\u003EIf anything, I\u0027d appreciate a pointer to a relevant thread. My search-fu has been sorely lacking in trying to find simple principles to serial- and onion-staging.\u003C/p\u003E\n"},{"CreatedByName":"arq","CreatedById":71084,"CreatedDateTime":"2013-11-10T04:56:52Z","Content":"\n\u003Cp\u003EIn stock, I usually just keep adding stages to keep the TWR ~1.7 (except for the last 1000m/s I can go lower) until I hit the necessary dV. I haven\u0027t played with asparagus in FAR enough to have a good sense for doing it there - the lower dV to orbit has prevented me from really needing it yet.\u003C/p\u003E\n"},{"CreatedByName":"SRV Ron","CreatedById":69806,"CreatedDateTime":"2013-11-10T12:31:53Z","Content":"\n\u003Cp\u003EIt takes the right engine tank combo to get an efficient lift. Too much fuel or too little thrust on a Asparagus or onion stage and that booster is contributing almost nothing to getting the payload in orbit. result, a monster rocket with very poor payload performance. Get a good balance, either with stock or mod parts and this is possible;\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/CVnE8D2.jpg\u0022 alt=\u0022CVnE8D2.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/pg7ZOax.jpg\u0022 alt=\u0022pg7ZOax.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd, sometimes, those multiple engines setups can be more efficient then a Mainsail or Skipper when relying on stock only parts. A cluster of four LV-30s gave me better performance on a given fuel load then either a skipper, too weak, or a mainsail, too powerful.\u003C/p\u003E\n"},{"CreatedByName":"luchelibre","CreatedById":61140,"CreatedDateTime":"2013-11-10T14:43:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIn stock, I usually just keep adding stages to keep the TWR ~1.7 (except for the last 1000m/s I can go lower) until I hit the necessary dV. I haven\u0027t played with asparagus in FAR enough to have a good sense for doing it there - the lower dV to orbit has prevented me from really needing it yet.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is a good starting point, but it leads to overbuilt rockets with excess dead weight.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIt takes the right engine tank combo to get an efficient lift. Too much fuel or too little thrust on a Asparagus or onion stage and that booster is contributing almost nothing to getting the payload in orbit. result, a monster rocket with very poor payload performance.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s the great thing about Temstar\u0027s post. Given a reasonable payload ratio, the tank/engine ratio for a stack/booster rocket is already (mostly) done. It\u0027s figuring out how much stays on the center stack after staging that is confusing.\u003C/p\u003E\u003Cp\u003EBoosters that can\u0027t lift themselves are not technically a problem if the center engine (cluster) is powerful. The reason not to do it is the jump in TWR after staging.\u003C/p\u003E\n"},{"CreatedByName":"Spaceweezle","CreatedById":92331,"CreatedDateTime":"2013-11-10T14:44:30Z","Content":"\n\u003Cp\u003EWow, that\u0027s a lot of fuel!\u003C/p\u003E\n"},{"CreatedByName":"luchelibre","CreatedById":61140,"CreatedDateTime":"2013-11-11T07:57:23Z","Content":"\n\u003Cp\u003ENote: In the spreadsheet pics, the bolded numbers are arbitrary constants, which the others are calculated from them. \u003C/p\u003E\u003Cp\u003ESo this is what I have so far for non-feed onion staging(40 ton payload as example):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/11356661/KSP/Equations.jpg\u0022 alt=\u0022Equations.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhich leads to this (will orbit with power to spare):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://cloud.steampowered.com/ugc/903264587125178650/46B8A365BFF2D7B2D9A66CE8310689AB59E3BEB4/\u0022 alt=\u002246B8A365BFF2D7B2D9A66CE8310689AB59E3BEB4\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd here for serial staging (20 ton):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/11356661/KSP/Equations2.jpg\u0022 alt=\u0022Equations2.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ENote that the S1 mass is derived from totalmass-payload-S2. But S1 thrust is (payload\u002BS2)/.25\u003C/p\u003E\u003Cp\u003EThe .25 part is one I\u0027d like to get somebody with experience on what the optimal number is.\u003C/p\u003E\u003Cp\u003EI\u0027d also like some help on efficient upper/lower stage dV ratios.\u003C/p\u003E\u003Cp\u003EThis comes out as:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://cloud-2.steampowered.com/ugc/903264587125593914/2D99B061BAA3D0CDBF6772EE0B8CACAE58C6F79F/\u0022 alt=\u00222D99B061BAA3D0CDBF6772EE0B8CACAE58C6F79F\u0022\u003E\u003C/p\u003E\u003Cp\u003EBut I\u0027d appreciate some help with refining my numbers. Or even some pointers on how I can make this easier. I can only trial-and-error my way through the constants so much before my eyes start to bleed.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-11T08:57:06Z\u0022 title=\u002211/11/2013 08:57  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 11, 2013\u003C/time\u003E by luchelibre\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"700NitroXpress","CreatedById":90322,"CreatedDateTime":"2013-11-11T08:30:24Z","Content":"\n\u003Cp\u003EMy method of slack tank asparagus staging can lift over double the max payload that I saw on his post with the same number of engines.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/57409-Leviathan-Heavy-Lifter\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/57409-Leviathan-Heavy-Lifter\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"luchelibre","CreatedById":61140,"CreatedDateTime":"2013-11-11T08:33:37Z","Content":"\n\u003Cp\u003EWhat\u0027s the math you used and how can it be adapted to serial and non-feed onion staging?\u003C/p\u003E\n"},{"CreatedByName":"700NitroXpress","CreatedById":90322,"CreatedDateTime":"2013-11-11T08:43:20Z","Content":"\n\u003Cp\u003EI don\u0027t need fancy shmancy math. I know the the 1500 power engines have the most power, so If you have 9 of them on one payload then you have a huge amount of power. Then you figure that any asparagus staging that has engines that flameout cause sudden deceleration which hurts your structural integrity and your TWR. So if you eliminate this, you get a TWR that increases at a linear rate, and 0% loss in velocity. This means that you can throttle down at a linear rate and therefore use less fuel to keep the same TWR. By the time the craft is in space, you can use half to 1/4 throttle for light craft and full throttle to 3/4 throttle for ultra heavy craft. This lifter design is a one size fits all solution for just about everything so I don\u0027t have to redesign a lifter every time I build a new craft. If you\u0027re using light craft, then just redesign it for the smaller engines and smaller fuel tanks. The power of the current version can be increased if needed and more fuel can be added without major changes.\u003C/p\u003E\n"},{"CreatedByName":"luchelibre","CreatedById":61140,"CreatedDateTime":"2013-11-11T17:07:21Z","Content":"\n\u003Cp\u003ESoo.... how can I modify what you\u0027ve learned to serial and non-feed onion staging?\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2013-11-11T19:53:34Z","Content":"\n\u003Cp\u003EIn general, if I\u0027m building an SSTO rocket booster, I go with a payload fraction of 4% and a launch TWR of 1.2; that becomes 8% for onion and a launch TWR of 1.5. In general serial staging is somewhere between the two.\u003C/p\u003E\u003Cp\u003EExample time: Your payload is five tonnes. Okay, with 4% payload fraction, you need a rocket that has a total mass of 125 tonnes (5/0.04=125). You therefore need a booster that has 1471.5 kN of thrust available to it (9.81*1.2*125 = 1471.5). That\u0027s a single Mainsail, of course. Mainsails weigh six tonnes, so 11 tonnes of your rocket is deadmass - the rest (114 tonnes if I\u0027m not mistaken) is fuel. Now, I would take that much and start divvying it up to see what tank combination comes out the easiest (as it is, you\u0027ve got three orange tanks plus six tonnes, and three orange tanks isn\u0027t exactly stable of course). I would set it up as a center stack with four outboard stacks, the four outboard stacks feeding into the center stack, and each stack containing an X200-32 and an X200-8 tank. If necessary, add an FL-T200 tank to the central stack or possibly two FL-T100s attached radially somewhere along the stack. \u003C/p\u003E\u003Cp\u003EThe secret to serial staging: use Tsiolkovsky backwards. To both the mass and drymass portions of the equation, add the previous stage\u0027s \u0022dead mass\u0022 (i.e its weight) as well as the dead mass of the current stage (everything but the tanks). You can also simplify things by setting M = 9Md; this is an assumption based on the fact that every liquid fuel tank in KSP with the exception of the Oscar-B and the Round-8 has a 9:1 full-to-dry mass ratio. Set delta-V goals for each stage based on the number of stages you\u0027re using, like this:\u003C/p\u003E\u003Cp\u003E1 stage: 1/1 (all 4550 in one go)\u003C/p\u003E\u003Cp\u003E2 stage: 1/3 for the first stage, 2/3 for the second \u003C/p\u003E\u003Cp\u003E3 stage: 1/6 for the first stage, 1/3 for the second, 1/2 for the third\u003C/p\u003E\u003Cp\u003E4 stage: 1/10 (455 m/s) for the first stage, 1/5 (910) for the second, 3/10 (1,365) for the third, 2/5 (1,820) for the fourth.\u003C/p\u003E\u003Cp\u003EAnd so on.\u003C/p\u003E\u003Cp\u003EHope that helps. I can provide additional examples if you wish.\u003C/p\u003E\n"},{"CreatedByName":"luchelibre","CreatedById":61140,"CreatedDateTime":"2013-11-11T23:40:09Z","Content":"\n\u003Cp\u003EThank you very much for the information.\u003C/p\u003E\u003Cp\u003EI\u0027m surprised you use such a low payload fraction and TWR. I might be missing something when I calculate my fraction, though. I divide the payload total mass by the rocket\u0027s total mass. That does seem too simplistic though.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E1 stage: 1/1 (all 4550 in one go)\u003Cp\u003E2 stage: 1/3 for the first stage, 2/3 for the second \u003C/p\u003E\u003Cp\u003E3 stage: 1/6 for the first stage, 1/3 for the second, 1/2 for the third\u003C/p\u003E\u003Cp\u003E4 stage: 1/10 (455 m/s) for the first stage, 1/5 (910) for the second, 3/10 (1,365) for the third, 2/5 (1,820) for the fourth.\u003C/p\u003E\u003Cp\u003EAnd so on.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo I actually have this backwards then. I was figuring only 30% of total dV for the upper stage in order to keep TWR up with smaller engines. I\u0027ll turn it around and see what I come up with. What principle or math did you use to come to your conclusion?\u003C/p\u003E\u003Cp\u003EAlso, what payload fraction do you use for the upper stage?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-12T00:09:46Z\u0022 title=\u002211/12/2013 12:09  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 12, 2013\u003C/time\u003E by luchelibre\u003C/strong\u003E\n\u003Cbr\u003EQuestions...questions...\n\u003C/span\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2013-11-12T02:35:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022luchelibre\u0022 data-cite=\u0022luchelibre\u0022\u003E\u003Cdiv\u003EThank you very much for the information.\u003Cp\u003EI\u0027m surprised you use such a low payload fraction and TWR. I might be missing something when I calculate my fraction, though. I divide the payload total mass by the rocket\u0027s total mass. That does seem too simplistic though.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re calculating payload fraction correctly - in the case of my earlier post, payload mass/total mass = 0.04, thus payload/0.04 = total mass.\u003C/p\u003E\u003Cp\u003EI use a low TWR because I fly SSTO rockets a fair amount. To fly them, you want to the same thing you\u0027d do with asparagus staging and shuck off thrust as it\u0027s no longer needed. With an SSTO, you can\u0027t shuck off thrusters, so what you have to do is use the throttle. In general, by the time of the gravity turn at 10k, an SSTO rocket that started with a 1.2 launch TWR is close to 2.0 TWR - you start that low so you don\u0027t have to muck with the throttle during that lowest 10k, when the thrust is needed the most.\u003C/p\u003E\u003Cp\u003ESSTO rockets are inefficient - I\u0027ll just say that outright; you can lift the same payload with substantially less fuel on an asparagus or even an onion design. The sole advantage is ease of construction.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022luchelibre\u0022 data-cite=\u0022luchelibre\u0022\u003E\u003Cdiv\u003ESo I actually have this backwards then. I was figuring only 30% of total dV for the upper stage in order to keep TWR up with smaller engines. I\u0027ll turn it around and see what I come up with. What principle or math did you use to come to your conclusion?\u003Cp\u003EAlso, what payload fraction do you use for the upper stage?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI came up with those fractions largely through observation. I use KER for construction and flight, and I noticed with people\u0027s asparagus designs that it\u0027s the later stages that carry the bulk of the design\u0027s delta-V. You think about it and an asparagus-staged rocket is actually pretty much the same as a serial staged rocket, it\u0027s just that you can use the engines in those later stages while the \u0022lowest stage\u0022 is still on going. Anyway, I applied the same principles to serial stage rockets for a number of forum challenges I was involved in, and they worked as anticipated.\u003C/p\u003E\u003Cp\u003EAs far as payload fractions are concerned, I only concern myself with the final payload - the bit that I want to put into space - and treat the booster as one big piece. I don\u0027t have a hard and fast rule for payload fractions for each stage, because I mainly concern myself with \u0022how much fuel do I need, given the mass of everything else in this stage, to give it the amount of delta-V that I want?\u0022. That sometimes means that I have to adjust the engine combination I\u0027m using to make sure I\u0027ve got enough thrust and recalculate (another reason why I prefer to do it all in one stage if I can).\u003C/p\u003E\u003Cp\u003EI should probably develop guidelines for multi-stage rocket payload fractions per stage; it would make that initial stage engine selection so much easier...\u003C/p\u003E\n"},{"CreatedByName":"Seanner","CreatedById":91816,"CreatedDateTime":"2013-11-12T11:08:31Z","Content":"\n\u003Cp\u003EI don\u0027t have a simple proof handy, but I suspect you want equal dV for each stage. Intuitively, I\u0027d say adding fuel has diminishing returns....removing or adding X units of fuel has at first glance an equal effect on burn time, but the mass of the additional fuel lowers the performance enabled by the existing fuel. In fact, that\u0027s kind of the point of staging in the first place, or you would just add all the additional fuel to your sole stage. As someone else said in the thread you referenced, if you could build infinitesimal stages, you\u0027d have an ideal rocket. So there\u0027s some good amount of dV that gives acceptable TWR and short-ish burn time (to approach an ideal rocket) but doesn\u0027t fall below the minimum of a given engine (e.g. using a mainsail with an FL-T100 tank as a stage is clearly below this because the mainsail is too massive).\u003C/p\u003E\u003Cp\u003Eedit: deleted my ridiculous math because I stayed up too late and it\u0027s embarrassing. Apparently 10% to any power is still 10% (...)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-12T20:23:32Z\u0022 title=\u002211/12/2013 08:23  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 12, 2013\u003C/time\u003E by Seanner\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2013-11-12T15:49:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Seanner\u0022 data-cite=\u0022Seanner\u0022\u003E\u003Cdiv\u003EI don\u0027t have a simple proof handy, but I suspect you want equal dV for each stage. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, how about an example?\u003C/p\u003E\u003Cp\u003ELet\u0027s take five tonnes and get it into orbit with a three serial stage booster. Let\u0027s further stay we want the third stage to have an initial TWR of 1.6, the second stage to have an initial WR of 1.4 and the first stage to have a launch TWR of 1.2. If we want to divide the delta-V evenly among the stages, that\u0027s 1,517 m/s of delta-V per stage (assuming 4,550 to orbit like the delta-V map indicates on the wiki). My divisions for three stages would be 1/6, 1/3 and 1/2 (actually 1/6, 2/6 and 3/6 but I\u0027m simplifying here), so that would be 758 m/s in the first stage, 1,517 in the second and 2,275 in the third. In both cases, I\u0027ll be using the Tsiolkovsky equation backwards to calculate fuel requirements and the assumption that M=9Md.\u003C/p\u003E\u003Cp\u003ETsiolkovsky: dV = ln(M/Md) * Isp * g\u003C/p\u003E\u003Cp\u003Edv / * Isp * g = ln((M \u002B x)/(Md \u002B x)) = ln((9Md\u002Bx)/(Md\u002Bx)), where x is the dead mass.\u003C/p\u003E\u003Cp\u003Ee^(dv / (Isp * g)) = (9Md\u002Bx)/(Md\u002Bx), set y = e^(dv / (Isp * g))\u003C/p\u003E\u003Cp\u003Ey = (9Md\u002Bx)/(Md\u002Bx)\u003C/p\u003E\u003Cp\u003Ey(Md\u002Bx) = 9Md\u002Bx\u003C/p\u003E\u003Cp\u003EyMd \u002B yx = 9Md \u002B x\u003C/p\u003E\u003Cp\u003Eyx - x = 9Md - yMd\u003C/p\u003E\u003Cp\u003E(y-1)x = (9-y)Md\u003C/p\u003E\u003Cp\u003EMd = (y-1)x /(9-y)\u003C/p\u003E\u003Cp\u003EOkay, so three stages at equal amounts (1,517). Five tonnes, plus a stack decoupler (0.05 tonnes for the TR-18A), plus an engine. We\u0027re shooting for 1.6 TWR and we have no idea what our final weight will be, so let\u0027s just use an LV-T45 engine for this stage; that\u0027ll add 1.5 tonnes to our mass so far. So we have 5 \u002B 0.05 \u002B 1.5 = 6.55 tonnes for the third stage, which has a delta-V target of 1,517 m/s. We don\u0027t know if we\u0027ll be out of atmosphere when we light the stage, so you plan for full atmo and use the 320 Isp for the engine. \u003C/p\u003E\u003Cp\u003EPlug in the values: e^(dv / (Isp * g)) = y, y = e^(1517 / (320 * 9.81)) = 1.62133\u003C/p\u003E\u003Cp\u003Ex = 6.55, Md = (y-1)x /(9-y) = (1.62133-1)6.55 /(9-1.62133)\u003C/p\u003E\u003Cp\u003EMd = 0.55155\u003C/p\u003E\u003Cp\u003EM = 9Md = 4.96396 tonnes. So the third stage would need 4.96396 tonnes of fuel mass to produce 1,517 m/s of of fuel. There\u0027s not a clean way of getting exactly that much fuel in the stage, but we can go with an equivalent of 9 FL-T100s for 5.0625 tonnes of fuel, giving the stage (working Tsiolkovsky forwards now) 11.6125 tonnes full, 7.1125 tonnes empty, a delta-V of 1,538.92 m/s and a TWR of 1.76. So far so good.\u003C/p\u003E\u003Cp\u003ESecond stage - same delta-V target, we\u0027ve got 11.6125 \u002B 0.05 of deadmass so far (the third stage and payload, plus the decoupler). Let\u0027s try a pair of LV-T45s on this stage, use BZ-52s to attach them and then a long girder to attach the assembly to the first stage. 0.6\u002B1.5\u002B1.5 = 3.6 tonnes of mass, so the deadmass is 15.2625 tonnes. Atmo Isp is 320. Plug everything in:\u003C/p\u003E\u003Cp\u003Ey = e^(1517 / (320 * 9.81)) = 1.62133\u003C/p\u003E\u003Cp\u003EMd = (y-1)x /(9-y) = (1.62133-1)15.2625 /(9-1.62133) = 1.285198\u003C/p\u003E\u003Cp\u003EM = 9Md = 11.56678 tonnes, \u002B 15.2625 = 26.82933 tonnes (TWR = 400 / (26.82933 * 9.81) = 1.52; we overshot the TWR target, but not by much. You may question the engine configuration here; I actually did this equation first with a Skipper and wound up with a TWR of 2.31 - way too high. A single LV-T45 wouldn\u0027t cut it, though.\u003C/p\u003E\u003Cp\u003EAs for fuel configuration, you want 21 FL-T100 equivalents - say five FL-T400s with an extra FL-T100 in the center stack. 11.8125 tonnes of fuel gives us 27.025 tonnes full, 16.575 empty, a delta-V of 1,534 m/s and a TWR of 1.51. Still cool.\u003C/p\u003E\u003Cp\u003EFirst stage - same delta-V target. 27.025 \u002B 0.05 tonnes deadmass, let\u0027s try a Skipper for this stage, so 4 tonnes of engine gives us 31.075 tonnes deadweight. Isp is 300.\u003C/p\u003E\u003Cp\u003Ey = e^(1517 / (300 * 9.81)) = 1.674409\u003C/p\u003E\u003Cp\u003EMd = (y-1)x /(9-y) = (1.674409-1)27.025 /(9-1.674409)\u003C/p\u003E\u003Cp\u003EMd = 2.487978, M = 9Md = 22.39180 tonnes \u002B 27.025 = 49.4168, 650 / (49.4168 * 9.81) = 1.34, so TWR is good.\u003C/p\u003E\u003Cp\u003EClosest fuel configuration is 40 FL-T100s equivalent, or five X200-8s (one X200-8 and one X200-32). 22.5 tonnes fuel, 49.525 tonnes full, 29.525 empty, delta-V = 1,522, TWR = 1.34.\u003C/p\u003E\u003Cp\u003EFinal total delta-V is 1,522 \u002B 1,534 \u002B 1,539 = 4,595 m/s of delta-V. This process gave us a 49.525 tonne rocket to lift 5 tonnes to orbit, a final payload fraction of 10.096%. Not bad.\u003C/p\u003E\u003Cp\u003EI\u0027ll need to make my example next; this post has taken a while to type so I\u0027ll get back to it when I can.\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2013-11-12T17:46:48Z","Content":"\n\u003Cp\u003EAlrighty - my turn. 758 m/s in the first stage, 1,517 in the second and 2,275 for the third. Five tonnes to orbit.\u003C/p\u003E\u003Cp\u003EThird Stage: 2275 dV target, 5 tonne payload, .05 tonne decoupler, 1.5 LV-T45 for an LV-T45 = 6.55 tonnes. Isp is 320.\u003C/p\u003E\u003Cp\u003Ey = e^(2275 / (320 * 9.81)) = 2.06413\u003C/p\u003E\u003Cp\u003EMd = (y-1)x /(9-y) = (2.06413-1)6.55 /(9-2.06413) = 1.0049\u003C/p\u003E\u003Cp\u003EM = 9Md = 9.0443, ~16 FL-T100 equivalents. 9 tonnes fuel =\u0026gt; 15.55 full, 7.55 empty, 2,268 m/s delta-V, 1.31 TWR (low but acceptable)\u003C/p\u003E\u003Cp\u003ESecond Stage: 1,517 dV target, 15.55 tonne payload, .05 tonne decoupler. Let\u0027s go with two LV-T45s and an LV-T30 for 615 kN thrust and 4.25 tonnes engines = 19.85 tonnes. Isp is 320.\u003C/p\u003E\u003Cp\u003Ey = e^(1517 / (320 * 9.81)) = 1.62133\u003C/p\u003E\u003Cp\u003EMd = (y-1)x /(9-y) = (1.62133-1)19.85 /(9-1.62133) = 1.67148\u003C/p\u003E\u003Cp\u003EM = 9 Md = 15.04333, ~27 FL-T100 equivalents. 15.1875 tonnes fuel =\u0026gt; 35.0375 full, 21.5375 empty, 1,528 m/s delta-V, 1.79 TWR (high)\u003C/p\u003E\u003Cp\u003EFirst Stage: 758 dV target, 35.0375 payload, .05 decoupler. Let\u0027s go with three LV-T30s and one LV-T45; that gives us 845 kN thrust and 5.25 tonnes engines = 40.3375 tonnes. Isp is 320.\u003C/p\u003E\u003Cp\u003Ey = e^(758 / (320 * 9.81)) = 1.27311\u003C/p\u003E\u003Cp\u003EMd = (y-1)x /(9-y) = (1.27311-1)40.3375 /(9-1.27311) = 1.45745\u003C/p\u003E\u003Cp\u003EM = 9Md = 12.8317, ~23 FL-T100 equivalents. 12.9375 tonnes fuel =\u0026gt; 53.275 full, 41.775 empty, 763 m/s delta-V, 1.62 TWR (high)\u003C/p\u003E\u003Cp\u003EFinal Total Delta-V is 2,268 \u002B 1,528 \u002B 763 = 4,559 m/s delta-V. This process gave us a 53.275 tonne rocket to lift 5 tonnes to orbit. Final payload fraction is 9.385%.\u003C/p\u003E\u003Cp\u003ELong and the short of it: \u003Cstrong\u003ESeanner was correct - you want your delta-V roughly equal in each stage\u003C/strong\u003E. Shows what I know......at least I hope I\u0027ve shown the usefulness of being able to work Tsiolkovsky backwards. \u003C/p\u003E\u003Cp\u003EAlso looks like I\u0027ve got a guideline for a stage thrust guestimate now. Take your payload and divide it by .03; the result is roughly where you want to put your level of thrust. Dividing by a larger number gives you higher TWR, by a lower number gives you a lower TWR.\u003C/p\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2013-11-12T18:16:43Z","Content":"\n\u003Cp\u003EActually, let\u0027s do one more example; we\u0027re going to reverse the delta-V targets from my last example - 2,275 m/s in the first stage, 1,517 in the second and 758 for the third. Five tonnes to orbit. Just curious.\u003C/p\u003E\u003Cp\u003EThird stage: 758 dV target, 5 tonne payload, .05 tonne decoupler. My guidelines suggest I need 167 kN of thrust, so let\u0027s say 8 24-77s. That\u0027s .72 tonnes of engines, deadmass is 5.77 tonnes. Isp is 250.\u003C/p\u003E\u003Cp\u003EM = 2.462348 tonnes, ~5 FL-T100 equivalents. 8.5825 tonnes full, 6.0825 tonnes empty, 844 m/s delta-V, 1.84 TWR. I probably could\u0027ve knocked off a couple of 24-77s.\u003C/p\u003E\u003Cp\u003ESecond Stage: 1517 target, 8.5825 tonne payload, .05 tonne decoupler. Guidelines suggest 286 kN of thrust, so let\u0027s say an LV-T45 and six 24-77s. That\u0027s 2.04 tonnes of engines, deadmass is 10.6225 tonnes. Isp will be 289.59 since we\u0027ve got an mixed engine combo (combined thrust divided by the sum of the ratio of thrust to Isp for each engine).\u003C/p\u003E\u003Cp\u003EM = 9.249457 tonnes, ~17 FL-T100 equivalents. 20.188 tonnes full, 11.688 tonnes empty, 1,552 m/s of delta-V, 1.62 TWR.\u003C/p\u003E\u003Cp\u003EFirst stage: 2275 target, 20.188 tonne payload, .05 tonne decoupler. Guidelines suggest 673 kN of thrust, so let\u0027s simplify and say a Skipper. 4 tonnes of engines, 24.238 deadmass, Isp is 300.\u003C/p\u003E\u003Cp\u003EM = 37.23006 tonnes, ~67 FL-T100 equivalents. 57.8755 tonnes full, 24.2755 tonnes empty, 2,544 m/s of delta-V, 1.14 TWR (low...)\u003C/p\u003E\u003Cp\u003EFinal Total Delta-V is 2544\u002B1552\u002B844 = 4,940 m/s delta-V. This process gave us a 57.8755 tonne rocket to lift five tonnes to orbit; final payload fraction is 8.639%, the worst of the lot.\u003C/p\u003E\u003Cp\u003EOkay - I think this whole thing has been a useful demonstration. I definitely know I learned something today...\u003C/p\u003E\u003Cp\u003EAn SSTO for five tonnes, incidentally, would use a single Mainsail, have a launch TWR of 1.24, and would weigh 123.55 tonnes total - a payload fraction of 4.047%. It\u0027d need ~200 FL-T100s equivalent (or three Jumbo 64s \u002B one X200-8).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-12T18:25:04Z\u0022 title=\u002211/12/2013 06:25  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 12, 2013\u003C/time\u003E by capi3101\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Seanner","CreatedById":91816,"CreatedDateTime":"2013-11-12T20:11:17Z","Content":"\n\u003Cp\u003Eedit: DISREGARD BELOW, I\u0027M A STUPIDDDDD...correct is to add 1/9th of 4.9636 to the denominator....please carry on...also thanks for doing all that!\u003C/p\u003E\u003Cp\u003Ecapi3101, I\u0027m not exactly sure where the error in the equations are, but double checking for dV directly using the 3rd stages fuel of 4.96396, it produces 1771 dV instead of 1517, i.e. ln((6.55\u002B4.9636)/6.55)*320*9.81 = 1771\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-12T20:19:35Z\u0022 title=\u002211/12/2013 08:19  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 12, 2013\u003C/time\u003E by Seanner\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"capi3101","CreatedById":59027,"CreatedDateTime":"2013-11-12T22:00:19Z","Content":"\n\u003Cp\u003ENo problem. I have no issues with proving myself wrong mathematically aside from having to swallow my (largely non-existent) pride. It\u0027ll help me build my own craft better in the long run.\u003C/p\u003E\n"},{"CreatedByName":"700NitroXpress","CreatedById":90322,"CreatedDateTime":"2013-11-12T22:23:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022luchelibre\u0022 data-cite=\u0022luchelibre\u0022\u003E\u003Cdiv\u003ESoo.... how can I modify what you\u0027ve learned to serial and non-feed onion staging?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDon\u0027t use serial or non-feed staging. If you\u0027re using boosters, then at the end of the boosters, they flameout and cause sudden deceleration. With slack tanks, there is no deceleration ever, because you just drop dead weight and not something that was providing thrust. You could use this in combination with serial staging, but basically this is just a method to get things into orbit, so that way your serial or non-feed staging rocket can start out in orbit and not on the surface of Kerban. That way, since it\u0027s in space already, you get maximum efficiency out of your craft because you don\u0027t have to fight your way through the atmosphere first. Also this method works very well for transfer stages for interplanetary travel, maintain thrust with the nuclear engines and then drop the empty slack tanks as you go without loosing thrust.\u003C/p\u003E\n"},{"CreatedByName":"luchelibre","CreatedById":61140,"CreatedDateTime":"2013-11-13T03:02:46Z","Content":"\n\u003Cp\u003ECapi and Sean, thank you very much for laying this out for me. I haven\u0027t completely assimilated it into my head yet, but I just got back to the computer and wanted to put up a quick post to thank you.\u003C/p\u003E\u003Cp\u003ENitro........\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://picardfacepalm.com/picard-facepalm.jpg\u0022 alt=\u0022picard-facepalm.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"luchelibre","CreatedById":61140,"CreatedDateTime":"2013-11-15T19:30:41Z","Content":"\n\u003Cp\u003EOkay, three days of trying to figure out rocket-building while moving and planning for a week-long trip has been fun.\u003C/p\u003E\u003Cp\u003EThat said, THANK YOU THANK YOU! I finally \u003Cem\u003Ereally\u003C/em\u003E understand what I\u0027m doing!\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/11356661/KSP/Equations3.jpg\u0022 alt=\u0022Equations3.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/11356661/KSP/Equations4.jpg\u0022 alt=\u0022Equations4.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo, if you\u0027re feeling adventurous, hows \u0027bout we figure out the non-feed stage/booster thrust and deltav ratios for onion rockets?\u003C/p\u003E\u003Cp\u003EAddition: I\u0027m now working out if the mass ratios between stages (S1:13%, S2:22.3%, S3:47.8%) hold up under different payloads. If it does, then I could figure out what to build only with two numbers: payload mass and payload fraction (16.8%).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-15T19:36:52Z\u0022 title=\u002211/15/2013 07:36  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 15, 2013\u003C/time\u003E by luchelibre\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Seanner","CreatedById":91816,"CreatedDateTime":"2013-11-15T20:40:35Z","Content":"\n\u003Cp\u003EI suggest a slightly different approach...you see in theory you just would use 100% payload fraction and not bother with engines to be perfectly efficient, but of course this is not possible (pending teleportation...), so it\u0027s kind of odd to use payload fraction as the independent variable. The payload fraction is actually set/capped for a payload by available engine and fuel tank designs. What you are REALLY using for input parameters to your optimal rocket building function is payload, TWR, and deltaV--i.e. the rocket has to carry so much, so fast, and so far (\u0022so fast\u0022 because \u0022actual v\u0022 is not deltaV when you lose 100% of it at TWR 1 in a hover over Kerbin--farness depends on fastness). Certain engines are better at certain deltaV and TWR combinations for various payloads, so given a payload, there is some proper engine choice to accomplish the mission, and you get whatever payload fraction you get. If you want a higher fraction, you\u0027re going to have to invent a better engine or a lighter fuel tank.\u003C/p\u003E\u003Cp\u003Eedit: Stand by for a mod from me to figure engines and fuel given a mass to lift...\u003C/p\u003E\u003Cp\u003Eedit: Done! But spaceport is down \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif\u0022 alt=\u0022:mad:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-16T08:49:26Z\u0022 title=\u002211/16/2013 08:49  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 16, 2013\u003C/time\u003E by Seanner\u003C/strong\u003E\n\u003C/span\u003E\n"}]}