{"TopicId":74865,"ForumId":16,"TopicTitle":"How does KSP\u0026#039;s water physics work?","CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2014-06-12T19:31:38Z","PageNum":1,"Articles":[{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2014-06-12T19:31:38Z","Content":"\n\u003Cp\u003EI\u0027m trying to understand how KSP\u0027s water physics work, so I can build nice floaty things without simply spamming radial intakes. So far, all I\u0027m finding is that it\u0027s screwy.\u003C/p\u003E\u003Cp\u003EHere are some tests I\u0027ve done using some simple craft. All fuel tanks are empty. The craft with 2 400 tanks is exactly twice the mass and twice the length of the one with a single 400 tank, therefore I would expect it to float with the same fraction of its length below the waterline, as long as the visible water lines up with the physical water. The craft with the 800 tank is the same as the one with 2 400 tanks except for changing the tanks, therefore I would expect it to float identically, even if the visible water and physical water are consistently misaligned.\u003C/p\u003E\u003Cp\u003EInstead, I get these results.\u003C/p\u003E\u003Cp\u003E[table]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]\u003Ca href=\u0022https://flic.kr/p/nEDy9t\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm6.staticflickr.com/5120/14220846259_6d9e92c15b_n.jpg\u0022 alt=\u002214220846259_6d9e92c15b_n.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nEDy9t\u0022 rel=\u0022external nofollow\u0022\u003ELow Detail, 400 tank\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr[/td]\u003C/p\u003E\u003Cp\u003E [td]\u003Ca href=\u0022https://flic.kr/p/nV6CrY\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm6.staticflickr.com/5155/14384364586_5240a5c33a_n.jpg\u0022 alt=\u002214384364586_5240a5c33a_n.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nV6CrY\u0022 rel=\u0022external nofollow\u0022\u003ELow Detail, 2x 400 tanks\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr[/td]\u003C/p\u003E\u003Cp\u003E [td]\u003Ca href=\u0022https://flic.kr/p/nX2qud\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm4.staticflickr.com/3885/14406176892_c2483bf899_n.jpg\u0022 alt=\u002214406176892_c2483bf899_n.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nX2qud\u0022 rel=\u0022external nofollow\u0022\u003ELow Detail, 800 tank\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]\u003Ca href=\u0022https://flic.kr/p/nEDMof\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm6.staticflickr.com/5586/14220890790_705b611ff9_n.jpg\u0022 alt=\u002214220890790_705b611ff9_n.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nEDMof\u0022 rel=\u0022external nofollow\u0022\u003EMedium Detail, 400 tank\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr[/td]\u003C/p\u003E\u003Cp\u003E [td]\u003Ca href=\u0022https://flic.kr/p/nEDwHc\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm4.staticflickr.com/3913/14220841429_6f28b66d12_n.jpg\u0022 alt=\u002214220841429_6f28b66d12_n.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nEDwHc\u0022 rel=\u0022external nofollow\u0022\u003EMedium Detail, 2x 400 tanks\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr[/td]\u003C/p\u003E\u003Cp\u003E [td]\u003Ca href=\u0022https://flic.kr/p/nEDx16\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm3.staticflickr.com/2901/14220842409_ce1248f478_n.jpg\u0022 alt=\u002214220842409_ce1248f478_n.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nEDx16\u0022 rel=\u0022external nofollow\u0022\u003EMedium Detail, 800 tank\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]\u003Ca href=\u0022https://flic.kr/p/nWQV8X\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm3.staticflickr.com/2917/14404127041_6bc41da329_n.jpg\u0022 alt=\u002214404127041_6bc41da329_n.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nWQV8X\u0022 rel=\u0022external nofollow\u0022\u003EHigh Detail, 400 tank\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr[/td]\u003C/p\u003E\u003Cp\u003E [td]\u003Ca href=\u0022https://flic.kr/p/nEDKVq\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm4.staticflickr.com/3887/14220885870_ac6e4d9564_n.jpg\u0022 alt=\u002214220885870_ac6e4d9564_n.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nEDKVq\u0022 rel=\u0022external nofollow\u0022\u003EHigh Detail, 2x 400 tanks\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr[/td]\u003C/p\u003E\u003Cp\u003E [td]\u003Ca href=\u0022https://flic.kr/p/nWQUr6\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm6.staticflickr.com/5531/14404124671_576220ba9d_n.jpg\u0022 alt=\u002214404124671_576220ba9d_n.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nWQUr6\u0022 rel=\u0022external nofollow\u0022\u003EHigh Detail, 800 tank\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[/table]\u003C/p\u003E\u003Cp\u003EI don\u0027t know what to make of these really. Low terrain detail seems to throw the visible water level, which I somewhat expected. More baffling is that an 800 tank has different buoyancy properties to a pair of 400 tanks.\u003C/p\u003E\u003Cp\u003EI\u0027ve looked in the part.cfg\u0027s for anything that might hint at buoyancy, hypothesising that maybe part scaling throws things off, but the 400 and 800 tanks differ only in name, node positions, tech tree position and cost, description, mass, and fuel and oxizider capacity - in short, nothing that I can see that would make the pair of 400 tanks float higher than the single 800 one.\u003C/p\u003E\u003Cp\u003ESo what\u0027s going on? How exactly does KSP work out part buoyancy?\u003C/p\u003E\n"},{"CreatedByName":"allmhuran","CreatedById":66124,"CreatedDateTime":"2014-06-13T01:15:38Z","Content":"\n\u003Cp\u003EYeah, I\u0027ve been wondering this too. The only (vague) conclusion I\u0027ve been able to draw is that \u0022water physics\u0022 are only applied to parts that are directly in contact with the water. IE, parts connected to parts touching the water are essentially ignored unless they are also touching the water. This hypothesis would be strengthened if your two craft have the same waterline when on their side, so that both tanks in the 2x400 ship are in contact with the water.\u003C/p\u003E\u003Cp\u003EBut that\u0027s just my empirical musing.\u003C/p\u003E\n"},{"CreatedByName":"thescientist","CreatedById":69046,"CreatedDateTime":"2014-06-13T13:02:19Z","Content":"\n\u003Cp\u003EWater physics is really, really bad at the moment.\u003C/p\u003E\u003Cp\u003EIn KSP water is an extremely dense fluid, and each parts tends to float (exept for full jumbo tanks and similar ultra heavy object). Intakes are very light and they have a very high water line. The game calculate the floating line \u003Cem\u003Ewithout\u003C/em\u003E considering that clipped parts subtract volume, so your packed intakes are have an enormous volume for the game physics, and this, combined with their minimal mass, makes your intakes to be a perfect float.\u003C/p\u003E\u003Cp\u003EThe water physics makes also splashing more dangerous than landing. Instead of increasing your crash tollerance, if you came in hard the parts that collide with water just explode without reducing your speed (instead this happens on solid ground), so \u0022lithobraking\u0022 landers don\u0027t work in water.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-06-13T13:10:17Z","Content":"\n\u003Cp\u003ECue the suggestions that Squad fix the unrealistic water physics.\u003C/p\u003E\n"},{"CreatedByName":"Tw1","CreatedById":59717,"CreatedDateTime":"2014-06-13T13:20:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022thescientist\u0022 data-cite=\u0022thescientist\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIn KSP water is an extremely dense fluid,\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDon\u0027t think of it as a fluid, but a surface that produces buoyancy-like forces. Girders are the best for making \u0022buoyant\u0022 structures in my experience- my Eve Oceans Explorer has an internal I-beam structure, that lifts its waterline significantly.\u003C/p\u003E\n"},{"CreatedByName":"the_bT","CreatedById":3876,"CreatedDateTime":"2014-06-13T13:22:13Z","Content":"\n\u003Cp\u003EIn addition to the above regarding floating, drag when moving sideways in water (for building boats) is just the same drag you would get from stock aerodynamics multiplied by some number. That\u0027s why intakes work so well, they have no ordinary drag and instead get drag applied to them from the intake air code which does not care about water.\u003C/p\u003E\u003Cp\u003EIn effect, radial intakes are almost without drag in water, have an impact tolerance of 70m/s or something, and if you mount them in a row they even kinda look like a float.\u003C/p\u003E\u003Cp\u003EWings work also because they have their own drag code that doesn\u0027t care about water, but they have a crash tolerance of about 10m/s or so. Crash tolerance is only checked when something enters the water and rarely when it leaves. So if you avoid that you can use wings instead of intakes. They have more volume, so you can do with less.\u003C/p\u003E\u003Cp\u003EAt least I think that\u0027s how it works.\u003C/p\u003E\u003Cp\u003EI don\u0027t care if or when squad does something to the water. Aerodynamics yes, but water, I could live with it as it is now...\u003C/p\u003E\u003Cp\u003ENot to say I wouldn\u0027t immediately download \u0022MysteryPersons Hydrospace Research\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit: I just remembered, I think buoyancy calculation based on the internal volume of the colliding geometry is a feature of the unity engine you can use out of the box. Maybe that\u0027s whats going on here... It does not really explain why two small tanks float better than one large tank though Oo\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-13T13:28:05Z\u0022 title=\u002206/13/2014 01:28  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 13, 2014\u003C/time\u003E by the_bT\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2014-06-14T01:14:14Z","Content":"\n\u003Cp\u003EI tried allmhuran\u0027s experiment (placing the craft flat), and the one with the single 800 tank naturally floated slightly lower at the tank end, while the one with 2 400 tanks floated level and maybe a shade higher. The discrepancy was small, but noticeable. I did it with default/medium terrain detail.\u003C/p\u003E\u003Cp\u003ESubsequently, I\u0027ve run experiments using a common \u0022pontoon\u0022 and varying loads on top of it., which have determined, in line with what Tw1 said, that water in KSP doesn\u0027t provide a normal buoyancy force. Doubling the weight of a ship considerably less than doubles the amount of water it displaces, contrary to reality. I still need to chart up the results and see if I can figure out a formula to model it.\u003C/p\u003E\n"},{"CreatedByName":"Hodo","CreatedById":78218,"CreatedDateTime":"2014-06-14T01:46:39Z","Content":"\n\u003Cp\u003EKSPs water is the consistency of maple syrup.\u003C/p\u003E\n"},{"CreatedByName":"robopilot99","CreatedById":102126,"CreatedDateTime":"2014-06-14T03:00:11Z","Content":"\n\u003Cp\u003EHow it works?\u003C/p\u003E\u003Cp\u003EIt doesn\u0027t \u003C/p\u003E\u003Cp\u003ESeriously though the reason you see different water legals on different detail distances is because with a lower detail setting fewer polygons are used to draw the ocean. If you hack your config you can sometimes see crafts that float in the air without touching the water.\u003C/p\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2014-06-21T23:37:30Z","Content":"\n\u003Cp\u003EIndeed, that\u0027s a major confounding factor.\u003C/p\u003E\u003Cp\u003EMy latest results, as I reported previously, may be getting me somewhere. Here\u0027s the basic \u0022oil rig\u0022 design:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/o3SxDV\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm4.staticflickr.com/3881/14472343971_6787cec246_o.png\u0022 alt=\u002214472343971_6787cec246_o.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI made versions with various loads on the top and threw them into the water, then took screenshots and measured the percentage of the length of the FL-T800\u0027s that was submerged. Graphing my results, I get the following:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/o4cLhX\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm4.staticflickr.com/3902/14476093615_77705727fc_o.png\u0022 alt=\u002214476093615_77705727fc_o.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EA linear relationship with an offset gives a good fit. I experimented with things like power laws, but was not able to improve on the simple, and physically expected, straight line.\u003C/p\u003E\u003Cp\u003EFrom this, and my previous results, I\u0027m prepared to make some hypotheses:\u003C/p\u003E\u003Cp\u003E* An object with negligible weight will float with half its volume submerged, with possible small offsets from that due to terrain detail. This is physically incorrect.\u003C/p\u003E\u003Cp\u003E* An object will displace additional volume in proportion to the weight on it. This is physically correct.\u003C/p\u003E\u003Cp\u003EThe other key observation made is that the float depths do not depend on whether the fuel is in the tank on top or the float tanks themselves. The weight gets counted where-ever it is, as is physically correct.\u003C/p\u003E\u003Cp\u003EFull \u0022data\u0022: \u003Ca href=\u0022https://www.flickr.com/photos/52548818@N05/sets/72157644731171337/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.flickr.com/photos/52548818@N05/sets/72157644731171337/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe next factor to investigate is whether, with our hypothesis that massless = float half-submerged, the buoyancy force depends simply on the extra volume of water displaced or whether there are part-specific factors.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-21T23:38:05Z\u0022 title=\u002206/21/2014 11:38  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 21, 2014\u003C/time\u003E by cantab\u003C/strong\u003E\n\u003Cbr\u003Etypo correction\n\u003C/span\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2014-06-30T01:17:53Z","Content":"\n\u003Cp\u003EMore SCIENCE!\u003C/p\u003E\u003Cp\u003ESo I did some more runs using a similar setup, with the slight tweak that I dumped fuel (using TAC Fuel Balancer) to change the \u0022oil rig\u0022 masses. In addition to the FL-T800, I also tested the FL-T400 and the BACC. As ever, my \u0022raw data\u0022 (ie screenshots) are in the Flickr album.\u003C/p\u003E\u003Cp\u003EFirstly, graphing the new data as we graphed the previous set, we back up our previous hypothesis: For a given part the relation between percentage underwater and mass on the part is linear, and extrapolates back to around 50% at zero mass. Note that I did remove an outlier from each of the FL-T400 and BACC data sets, in both cases the lowest mass value.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/o9JSaB\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm4.staticflickr.com/3848/14538744325_901b74304c_o.png\u0022 alt=\u002214538744325_901b74304c_o.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/o9JSaB\u0022 rel=\u0022external nofollow\u0022\u003EFloat Test 3 Graph 1\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr\u003C/p\u003E\u003Cp\u003ESecondly, I plotted the absolute volume displaced vs the mass, on a per tank basis (so dividing both quantities by 4 for these tests). The volume displaced was calculated from the diameter and length of the tanks, assuming they are cylinders.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nSgx66\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022https://farm4.staticflickr.com/3899/14352348187_72c805a688_o.png\u0022 alt=\u002214352348187_72c805a688_o.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://flic.kr/p/nSgx66\u0022 rel=\u0022external nofollow\u0022\u003EFloat Test 3, Graph 2\u003C/a\u003E by \u003Ca href=\u0022https://www.flickr.com/people//\u0022 rel=\u0022external nofollow\u0022\u003Ecantab314\u003C/a\u003E, on Flickr\u003C/p\u003E\u003Cp\u003EThe key result here is that the lines do \u003Cem\u003Enot\u003C/em\u003E all have the same gradient. This means that the amount of water a given mass displaces in KSP \u003Cem\u003Edepends on the part doing the displacing\u003C/em\u003E.\u003C/p\u003E\u003Cp\u003EA third graph instead plots only the excess volume displaced over and above the 50% that\u0027s always underwater, in this case leaving the outliers in. The different gradients between the three parts tested are more striking. \u003Ca href=\u0022https://flic.kr/p/obw3H2\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://flic.kr/p/obw3H2\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIn conclusion, whatever KSP is doing, it\u0027s very unlike physically correct buoyancy and I still haven\u0027t got to the bottom of it.\u003C/p\u003E\u003Cp\u003EI\u0027m not sure what to investigate next. But I\u0027m considering the following scenario: If a part is completely submerged, does its buoyancy then stay constant as its depth increases?\u003C/p\u003E\u003Cp\u003EIt also occurs to me that a precision altimeter mod would be highly useful. Then I could read off the height of the probe core above the water directly, rather than having to measure screenshots. VOID doesn\u0027t seem to do it, the altitude it reports is not that of the command pod (I suspect it is instead that of the CoM).\u003C/p\u003E\n"},{"CreatedByName":"Dedjal","CreatedById":57220,"CreatedDateTime":"2014-06-30T17:10:16Z","Content":"\n\u003Cp\u003EKerbal engineer has a read out of distance above water and above ground.\u003C/p\u003E\u003Cp\u003ESo when you are over water, it will measure the distance to the water and to the geound underneath the water.\u003C/p\u003E\u003Cp\u003EIf that was what you were looking for.\u003C/p\u003E\u003Cp\u003EEdit.\u003C/p\u003E\u003Cp\u003EI do not know if it calculates from the CoM or the object in control, though\u003C/p\u003E\n"}]}