{"TopicId":33195,"ForumId":16,"TopicTitle":"calculate dark side period","CreatedByName":"Flawless_Cowboy","CreatedById":62427,"CreatedDateTime":"2013-06-15T23:14:33Z","PageNum":1,"Articles":[{"CreatedByName":"Flawless_Cowboy","CreatedById":62427,"CreatedDateTime":"2013-06-15T23:14:33Z","Content":"\n\u003Cp\u003EI\u0027m trying to practice much tighter engineering, so I\u0027m beginning to design my rockets/vessels to just reach design specifications.\u003C/p\u003E\u003Cp\u003EOne that I\u0027ve run into is battery life. I\u0027d like to know if there\u0027s a way to calculate my satellite\u0027s time in the dark according to gravity and altitude.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-18T18:08:55Z\u0022 title=\u002206/18/2013 06:08  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 18, 2013\u003C/time\u003E by purpletarget\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AncientAstronaut","CreatedById":36093,"CreatedDateTime":"2013-06-15T23:44:03Z","Content":"\n\u003Cp\u003EEasy enough. You want to find the orbital period of the spacecraft and then divide it in half, as you\u0027ll be in darkness for half of an orbit.\u003C/p\u003E\u003Cp\u003EThe formula for orbital period is as follows:\u003C/p\u003E\u003Cp\u003EPi*2 (squareroot) (A^3/U)\u003C/p\u003E\u003Cp\u003EWhere:\u003C/p\u003E\u003Cp\u003EPi = 3.14\u003C/p\u003E\u003Cp\u003EA = Semi Major Axis of the orbit.\u003C/p\u003E\u003Cp\u003EU = Gravitational Parameter of parent body.\u003C/p\u003E\u003Cp\u003ESo pretending you\u0027re on Kerbin, we can calculate orbital period. I\u0027ll do this as an example for you. It works anywhere, but you have to have the right values. IE: Gravitational parameter is different with each planet.\u003C/p\u003E\u003Cp\u003ESo say we have a satellite in a 92x74km orbbit. \u003C/p\u003E\u003Cp\u003ETo find semi major axis, we have to do another equation. Also easy enough. The diameter of Kerbin is 1200km. Add the periapsis and apoapsis to that and then divide the total sum in half.\u003C/p\u003E\u003Cp\u003ESemi Major Axis is 683 kilometers.\u003C/p\u003E\u003Cp\u003EWe know Kerbin\u0027s gravitational parameter. It\u0027s 3530.461 km^3/s^2 (those units won\u0027t even be used)\u003C/p\u003E\u003Cp\u003ESo the total equation for orbital period of a 92x74km orbit is this:\u003C/p\u003E\u003Cp\u003Epi*2 [squareroot] (683^3/3530.461)\u003C/p\u003E\u003Cp\u003ESo we then have our orbital period in seconds. It\u0027s 1,887.510248 seconds. But minutes is a much nicer value. Divide that by sixty.\u003C/p\u003E\u003Cp\u003EOrbital Period of our orbit is 31.46 minutes.\u003C/p\u003E\u003Cp\u003ENow if we want to know how much time will be spent in darkness, it\u0027s actually not 100% accurate for eccentric orbits (as you might be moving faster or slower on the dark side depending on the longitude of your AP/PE) but it will give you a pretty good idea.\u003C/p\u003E\u003Cp\u003EIn that orbit, we\u0027d spend APPROXIMATELY 15.73 minutes in darkness.\u003C/p\u003E\n"},{"CreatedByName":"dustinsonger","CreatedById":57482,"CreatedDateTime":"2013-06-15T23:56:16Z","Content":"\n\u003Cp\u003Emmmmm math \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. by far my favorite part of playing this game. No other game gives you a chance to sit down and bust out some fun equations like this one.\u003C/p\u003E\n"},{"CreatedByName":"AncientAstronaut","CreatedById":36093,"CreatedDateTime":"2013-06-16T00:00:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dustinsonger\u0022 data-cite=\u0022dustinsonger\u0022\u003E\u003Cdiv\u003Emmmmm math \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. by far my favorite part of playing this game. No other game gives you a chance to sit down and bust out some fun equations like this one.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah I know. Last year around this time, I flew some real time Kerbin Orbit missions in a capsule and kept myself busy by testing out orbital mechanics theory in the game. Things like orbital energy, period, transfer delta-v, etc.\u003C/p\u003E\n"},{"CreatedByName":"purpletarget","CreatedById":57317,"CreatedDateTime":"2013-06-16T00:22:01Z","Content":"\n\u003Cp\u003EDetermining the orbital period is part of the process, but depending on the size of the orbit, it can be much less than half the time. LPO orbits are close enough that it\u0027s around half, but out at a semi or Geo Stationary, it can be a lot less.\u003C/p\u003E\u003Cp\u003ESo, it helps to split the planet, and orbit down the middle and do some quick trig...\u003C/p\u003E\u003Cp\u003EThe Semi-Major axis from the centre of the planet, to the orbit of your satellite, as AncientAstronaut described is your hypotenuse side and the shadow zone forms a right angle that can be only as wide as the planet\u0027s radius...so 600km. Take the sin of that angle, and you\u0027ll have 1/2 of the orbit angle that will be spent in darkness. Double the angle for the other side of the planet, and you\u0027ll have a full angle out of 360, which will give you the proper fraction of your orbit in darkness.\u003C/p\u003E\u003Cp\u003ESo, LKO orbit at 80km \u002B R 600km, = aSin (600/680) = ~62 degrees, double for the other side of the planet for 124/360 degrees times 31min orbital period and we\u0027re closer to 11 minutes.\u003C/p\u003E\u003Cp\u003EAt KSO, with SA around 2868km = 3468km. aSin (600/3468) = 10 degrees, so 20/360 of 6 hours will give us 20 minutes in darkness.\u003C/p\u003E\n"},{"CreatedByName":"Flawless_Cowboy","CreatedById":62427,"CreatedDateTime":"2013-06-16T17:55:12Z","Content":"\n\u003Cp\u003EGentlemen, this was exactly the kind of answer I was looking for. Thanks!\u003C/p\u003E\u003Cp\u003EI thought we\u0027d have to go into calculating angular velocity, and then take the dark portion of the circle and divide them. Though, I was thinking strictly in circular orbits.\u003C/p\u003E\n"},{"CreatedByName":"jbakes","CreatedById":145551,"CreatedDateTime":"2015-11-11T14:09:42Z","Content":"\n\u003Cp\u003EVery nice math but what if you don\u0027t know your orbital period? Say you know what altitude you want your craft to be at around a given body but you don\u0027t know how long the orbital period will be of that specific orbit.\u003C/p\u003E\n"},{"CreatedByName":"paul23","CreatedById":120544,"CreatedDateTime":"2015-11-11T15:30:56Z","Content":"\n\u003Cp\u003EWhat the hell. This is actually exactly what I am trying to solve. - But the solutions here aren\u0027t exactly correct.\u003C/p\u003E\u003Cp\u003EBeing in the shadow is nothing like the \u0022half of the orbit\u0022 - that\u0027s a ridiculous over estimation, and only even close for LKO - for any other orbit it\u0027s off by a mile. (for KEO it\u0027s about 8-10 times as little). An image that shows how the calculation works:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.stack.imgur.com/D31E7.png\u0022 alt=\u0022D31E7.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhere the sun would be to the far left.\u003C/p\u003E\u003Cp\u003EFor a circular orbit this is quite easy to calculate. The image should show the basic equation already (remember to add 600km to the altitude to get the radius).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://latex.codecogs.com/gif.latex?r_%7Borbit%7D%20%5Csin%20%5Ctheta%20%3D%20R_%7Bkerbin%7D\u0022 alt=\u0022gif.latex?r_%7Borbit%7D%20%5Csin%20%5Ctheta%20%3D%20R_%7Bkerbin%7D\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd the time can be calculated from:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://latex.codecogs.com/gif.latex?t%3DT%5Cfrac%7B%5Ctheta%7D%7B%5Cpi%7D\u0022 alt=\u0022gif.latex?t%3DT%5Cfrac%7B%5Ctheta%7D%7B%5Cpi%7D\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhere T is the orbital period:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://upload.wikimedia.org/math/3/9/a/39a113020f05c658deef664318c4814b.png\u0022 alt=\u002239a113020f05c658deef664318c4814b.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd here mu stands for the gravitational parameter (and r is again the altitude \u002B 600 km, radius kerbin).\u003C/p\u003E\u003Cp\u003ENow for a generic-an orbit that is not a circle this is quite involving to calculate. At \u003Ca href=\u0022http://physics.stackexchange.com/questions/217840/time-spent-in-eclipse-of-an-object\u0022 rel=\u0022external nofollow\u0022\u003EPhysics.SE\u003C/a\u003E and \u003Ca href=\u0022http://math.stackexchange.com/questions/1524224/numerical-optimization-routine-for-difficult-function\u0022 rel=\u0022external nofollow\u0022\u003EMath.SE\u003C/a\u003E I\u0027ve got two questions running to solve this problem, anyone who could help me is more than welcome. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E.\u003C/p\u003E\n"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2015-11-11T16:18:32Z","Content":"\n\u003Cp\u003E@jbakes:\u003C/p\u003E\u003Cp\u003EIf you know the specific orbit (meaning you know Apoapsis and Periapsis) then you can calculate the orbital period. (See \u003Ca href=\u0022https://en.wikipedia.org/wiki/Orbital_period\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Orbital_period\u003C/a\u003E)\u003C/p\u003E\u003Cp\u003E@paul23:\u003C/p\u003E\u003Cp\u003EThe longest possible time the ship spends in the shadow is when the apoapsis of the ships orbit is in the shadow.\u003C/p\u003E\u003Cp\u003EThe calculation for this shadow-duration is explained in\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Orbit_darkness_time\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Orbit_darkness_time\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Eor you might have a look in chapter 9.2 of my \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/93426\u0022 rel=\u0022external nofollow\u0022\u003Ephysics of KSP documentation\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2015-11-11T17:30:03Z","Content":"\n\u003Cp\u003ENice to see this one back from it\u0027s two-year death.\u003C/p\u003E\u003Cp\u003EStill useful and relevant I\u0027d say so no vote to lock, or even re-bury, it here.\u003C/p\u003E\n"},{"CreatedByName":"paul23","CreatedById":120544,"CreatedDateTime":"2015-11-11T18:24:29Z","Content":"\n\u003Cp\u003E@mhoram: actually I\u0027d like to see proof for that function. - I have tested it by running a \u0022simulation\u0022 and calculating the time in eclipse at several (kind of many) points in the eclipse. Using the simple mathematics I\u0027ve shown in the stackexchange posts:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/231iCCA.png\u0022 alt=\u0022231iCCA.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThis is done using kerbin gravitational constant \u0026amp; radius. And an semi major axis of 1E7, an eccentricity of 0.925.\u003C/p\u003E\u003Cp\u003EAs you can see the \u0022maxima\u0022 are not coinciding with the sun in the apoapsis, rather the maxima are slightly before/after that point. Now the point in apoapsis is quite close and for nearly any other orbit it is correct: but for the highly elliptical (e \u0026gt; 0.8), very low periapsis orbits (pe \u0026lt; 800km) this is incorrect and the numerical solution shows it. - If you like I\u0027ll upload the python script used to make above graph.\u003C/p\u003E\n"},{"CreatedByName":"LostOblivion","CreatedById":111504,"CreatedDateTime":"2015-11-11T18:47:49Z","Content":"\n\u003Cp\u003EWell, those calculations are only valid if the orbital plane lies on the vector between Kerbol and Kerbin. Otherwise, you\u0027d spend less time in the shadow down to nothing if it is normal to it.\u003C/p\u003E\n"},{"CreatedByName":"paul23","CreatedById":120544,"CreatedDateTime":"2015-11-11T19:14:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022LostOblivion\u0022 data-cite=\u0022LostOblivion\u0022\u003E\u003Cdiv\u003EWell, those calculations are only valid if the orbital plane lies on the vector between Kerbol and Kerbin. Otherwise, you\u0027d spend less time in the shadow down to nothing if it is normal to it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy test have also been all 0 inclination.\u003C/p\u003E\n"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2015-11-13T10:44:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022paul23\u0022 data-cite=\u0022paul23\u0022\u003E\u003Cdiv\u003E@mhoram: actually I\u0027d like to see proof for that function. - I have tested it by running a \u0022simulation\u0022 and calculating the time in eclipse at several (kind of many) points in the eclipse. Using the simple mathematics I\u0027ve shown in the stackexchange posts:\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/231iCCA.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/231iCCA.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThis is done using kerbin gravitational constant \u0026amp; radius. And an semi major axis of 1E7, an eccentricity of 0.925.\u003C/p\u003E\u003Cp\u003EAs you can see the \u0022maxima\u0022 are not coinciding with the sun in the apoapsis, rather the maxima are slightly before/after that point. Now the point in apoapsis is quite close and for nearly any other orbit it is correct: but for the highly elliptical (e \u0026gt; 0.8), very low periapsis orbits (pe \u0026lt; 800km) this is incorrect and the numerical solution shows it. - If you like I\u0027ll upload the python script used to make above graph.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EGreat info. Thanks for making me see what I did wrong.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EThis basically means that in the following picture on the orbit the duration for the path through the green area is shorter than the duration for the path through the red area.\u003C/span\u003E (Edit: see post below)\u003C/p\u003E\u003Cp\u003EAnd since you asked, yes I would like to get my hands on the script you used.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/r2xQ1Ze.png\u0022 alt=\u0022r2xQ1Ze.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-17T09:28:58Z\u0022 title=\u002211/17/2015 09:28  AM\u0022 data-short=\u00228 yr\u0022\u003ENovember 17, 2015\u003C/time\u003E by mhoram\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Octa","CreatedById":140058,"CreatedDateTime":"2015-11-13T11:47:59Z","Content":"\n\u003Cp\u003EOh Jesus, this is compicated math.\u003C/p\u003E\u003Cp\u003EI would have guessed that the worst case darkness time of an elliptical orbit would be in a situation where Sun, PE, Body and AP where aligned in that order (like in the green area) but now with seeing the picture, i\u0027d like to correct my opionion on that, may i take a guess, just to verify i got that right:\u003C/p\u003E\u003Cp\u003E- Ap is the where you move the slowest in your orbit.\u003C/p\u003E\u003Cp\u003E- in the green area (all points of interest in one line), you do spend 50% of your darkness time losing speed (until Ap) and the other 50% gaining speed (after Ap)\u003C/p\u003E\u003Cp\u003ESo the worst case would be where the Ap is right at the end of your darkness time, because i keep losing speed during all my time in darkness? (Assuming a clockwise orbit in the picture above)\u003C/p\u003E\u003Cp\u003EAs im writing, i start to wonder what average speed/time i spend in those areas, because the speed where i enter the shadow is higher in the red area. So i have to consider which is slower/longer in total: getting slower from a higher speed until you reach your lowest velocity (red), or a decreasing and increasing velocity, but starting from a slower speed).\u003C/p\u003E\u003Cp\u003EThis, gentlemen is the point where my brain slowly starts melting, because the longer i think about it, the more factors i see that have to be considered.\u003C/p\u003E\n"},{"CreatedByName":"FancyMouse","CreatedById":142946,"CreatedDateTime":"2015-11-13T12:32:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mhoram\u0022 data-cite=\u0022mhoram\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThis basically means that in the following picture on the orbit the duration for the path through the green area is shorter than the duration for the path through the red area.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot exactly. Kepler\u0027s second law counts from the planet (i.e. one of the focus of the ellipse), not from the center.\u003C/p\u003E\n"},{"CreatedByName":"paul23","CreatedById":120544,"CreatedDateTime":"2015-11-16T16:56:34Z","Content":"\nActually I made a major mistake, looking through the calculation I made the utterly stupid mistake of stating for mean anomaly vs eccentric: \u0022M = E \u002B e*sin(E)\u0022 instead of \u0022M = E - e*sin(E)\u0022 - the longest time in shadow is when the sun is in the apoapsis, and the object in periapsis. You can find the code which is used to calculate it:\u003Cbr\u003E\n\u003Cbr\u003E\n[URL=\u0022https://github.com/pulli23/KSP_helper\u0022]In this github repository[/URL]. It requires (obviously) matplotlib and numpy/scipy. It works by simply running main.py. \u003Cbr\u003E\nI\u0026#39;ve extended it a bit so it now plots for several different eccentricities (all ignoring inclination though):\u003Cbr\u003E\n\u003Cbr\u003E\n[IMG]http://i.imgur.com/IR2xABv.png[/IMG]\u003Cbr\u003E\nAll orbits have a semimajor axis of 10000km, and the final one with an eccentricity of 0.94 has a periapsis that coincides with the surface of the earth. The time is the \u0022time in eclipse\u0022\u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\nMade me wonder though, for the eclipse calculations, what is used: the planet radius - or the radius \u002B atmospheric height?\n"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2015-11-17T09:31:04Z","Content":"\n@paul23:\u003Cbr\u003E\nThanks for the update and the script.\u003Cbr\u003E\n\u003Cbr\u003E\nFor the eclipse calculation usually the planet radius is taken without the atmosphere.\n"},{"CreatedByName":"Apurva Kawthalkar","CreatedById":143652,"CreatedDateTime":"2016-06-10T15:41:01Z","Content":"\n\u003Cp\u003E\nHi guys I am facing a problem\n\u003C/p\u003E\n\u003Cp\u003E\nwhen my\u00A0spacecraft moves over to the dark side of the mun , i have LOS loss of signal\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\ni need a way to calculate :-\u00A0(1)\u00A0when my craft will enter the shadow region\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 (2) for how many time my craft will stay in the shadow region\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 (3) when my craft will reappear form shadow region\n\u003C/p\u003E\n\u003Cp\u003E\nif you want can give you my orbital parameters\n\u003C/p\u003E\n"}]}