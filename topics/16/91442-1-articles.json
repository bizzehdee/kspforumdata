{"TopicId":91442,"ForumId":16,"TopicTitle":"NaN as opposed to 0.0","CreatedByName":"LordFerret","CreatedById":111598,"CreatedDateTime":"2014-11-28T03:10:52Z","PageNum":1,"Articles":[{"CreatedByName":"LordFerret","CreatedById":111598,"CreatedDateTime":"2014-11-28T03:10:52Z","Content":"\n\u003Cp\u003EI\u0027ve noticed a number of times when doing orbital plane alignment that \u0022NaN\u0022 will appear rather than 0.0 degrees. Do I take it that internally it\u0027s trying to tell me I\u0027m at -0.0 degees and \u0022NaN\u0022 is \u0022Not a Number\u0022? I\u0027ve also seen mention of the \u0027NaN Kraken\u0027... is there some manner of risk or bug related to this? If so, I\u0027ve not run across it yet. Just curious.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-29T01:30:10Z\u0022 title=\u002211/29/2014 01:30  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 29, 2014\u003C/time\u003E by LordFerret\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"robopilot99","CreatedById":102126,"CreatedDateTime":"2014-11-28T03:40:44Z","Content":"\n\u003Cp\u003ENow that you mention it I\u0027ve noticed that too. Not sure what the deal with it is.\u003C/p\u003E\n"},{"CreatedByName":"TythosEternal","CreatedById":117821,"CreatedDateTime":"2014-11-28T03:50:32Z","Content":"\n\u003Cp\u003EWhen calculating the angle between two planes, one operation that is performed will return NaN if the planes are aligned within numerical tolerances of zero. NaN is like a stain--once one of your calculations returns NaN, everything else that is computed from that calculation will result in NaN, too, including the end solution.\u003C/p\u003E\u003Cp\u003EFor differential orbit calculations, there are some basic checks you can perform to fall back on simpler, more robust calculations for cases like aligned planes. However, a lot of basic, casually-implemented astrodynamic routines (like those likely underlying your calculations here) don\u0027t bother implementing anything other than the generic solution.\u003C/p\u003E\u003Cp\u003EThere are some other, similar instances where you will see certain elements reported as NaN not for numerical reasons, but rather because Keplerian formulations have singularities for certain cases. (Singularity, in this case, means that one possible state in inertial space maps to multiple states in Keplerian space.) For example, for zero-inclined orbits, RAAN and AoP are now redundant--when trying to back out the equivalent elements, some frameworks will just compute one and report the other as NaN, or zero, because it is no longer necessary.\u003C/p\u003E\n"},{"CreatedByName":"Taki117","CreatedById":89975,"CreatedDateTime":"2014-11-28T03:51:38Z","Content":"\n\u003Cp\u003ENaN is in fact \u0022Not a Number\u0022 this means that the rounding is so close to -0.0 that it doesn\u0027t register. As far as the NaN Kraken more information can be found \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Kraken#NaN_Kraken\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2014-11-28T04:30:37Z","Content":"\n\u003Cp\u003ENaN is KSP\u0027s error message for \u0022I can\u0027t divide by zero\u0022. Your match to the target\u0027s inclination is perfect. I always shoot for NaN when intercepting.\u003C/p\u003E\u003Cp\u003EBest,\u003C/p\u003E\u003Cp\u003E-Slashy\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-11-28T15:20:07Z","Content":"\n\u003Cp\u003EIt is when numbers get so low (or high) that they need a power to represent them like \u00601.2*10^-12\u0060 and KSP does not see that as a number so it flags a NaN error. If the number was zero then that is a number and so causes no error.\u003C/p\u003E\u003Cp\u003EThis can crash your game.\u003C/p\u003E\n"},{"CreatedByName":"SciMan","CreatedById":12748,"CreatedDateTime":"2014-11-28T17:20:29Z","Content":"\n\u003Cp\u003EAFAIK, a NaN result in KSP can only cause an error if it shows up outside of the plane alignment display or a debug log message that says something like \u0022Error: Dt is NaN!\u0022 (which usually shows up when you target or un-target things).\u003C/p\u003E\u003Cp\u003EFrom experience, those two NaN errors are quite harmless. I\u0027ve had both of them show up several times around 20 minutes after I started KSP, and I continued playing without any odd behaviour happening for several hours, all while running several mods.\u003C/p\u003E\u003Cp\u003ESome NaN\u0027s are more harmful than others. In my experience the two I pointed out above are totally and completely harmless.\u003C/p\u003E\u003Cp\u003ENullReferenceExceptions, on the other hand, are ALWAYS problematic. If you go into the debug log and see red text with that phrase in it, it means that some part of the game is looking for something that isn\u0027t there. These probably will eventually crash your game, and they always mean something isn\u0027t working right.\u003C/p\u003E\n"},{"CreatedByName":"LordFerret","CreatedById":111598,"CreatedDateTime":"2014-11-29T01:28:40Z","Content":"\n\u003Cp\u003EWith only two exceptions (orbit adjustments out of Kerbin\u0027s SOI), it appears most often while I\u0027m trying to match orbit planes of other craft/stations. Sometimes I get 0.0, others (less frequent) I get NaN. So basically it is what I thought. Thanks for clarifying that. I\u0027ve not yet run into the NaN Kraken (and hope to keep it that way lol).\u003C/p\u003E\u003Cp\u003EThanks \u003Cstrong\u003ESlashy\u003C/strong\u003E, that saves me additional head-ache trying to hit 0.0 instead.\u003C/p\u003E\u003Cp\u003EAnd thanks also \u003Cstrong\u003ETaki117\u003C/strong\u003E, I\u0027m off to go read that now.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2014-11-29T02:47:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022John FX\u0022 data-cite=\u0022John FX\u0022\u003E\u003Cdiv\u003EIt is when numbers get so low (or high) that they need a power to represent them like \u00601.2*10^-12\u0060 and KSP does not see that as a number so it flags a NaN error. If the number was zero then that is a number and so causes no error.\u003Cp\u003EThis can crash your game.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA number that is too large will be represented as inf, whereas a number that is very small will become 0 (or -inf if by small you mean a large negative number).\u003C/p\u003E\u003Cp\u003ENaN is for numbers that aren\u0027t reals, such as sqrt(-1) or log(-1) or asin(2). The issue here isn\u0027t that the machine accuracy is limited, but that mathematically you have asked a question with no answer (in the reals), so the computer responds by saying the answer is \u0022not a number\u0022.\u003C/p\u003E\u003Cp\u003EAnd as explained above, any arithmetic operation involving a NaN returns a NaN, so a NaN will propagate if you aren\u0027t careful.\u003C/p\u003E\u003Cp\u003EThis may cause problems, or it may be completely harmless; it depends on what parts of the code use the NaN. You can\u0027t easily determine that.\u003C/p\u003E\u003Cp\u003EApparently, the calculation of the AN/DN angles aren\u0027t problematic. So I aim for NaN -- that means I\u0027ve precisely matched the planes! I rarely hit it; usually I\u0027m at 0.0 or worse.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2014-11-29T03:14:46Z","Content":"\n\u003Cp\u003Eyou can detect nans an change the value to 0 for example or stop calculations all together. you can also just ignore nans and put in some logic in the ui that checks if a number is a nan and replace it with a 0 or whatever for display purposes. but i think that is one of those spit and polish things that shouldnt be done until later in beta.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-29T03:17:19Z\u0022 title=\u002211/29/2014 03:17  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 29, 2014\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"pvtnum11","CreatedById":58904,"CreatedDateTime":"2014-11-29T04:08:33Z","Content":"\n\u003Cp\u003ENaN is basically the best inclination match possible, I\u0027ve had it happen a few times, makes for some great orbital rendezvous.\u003C/p\u003E\n"}]}