{"TopicId":115170,"ForumId":29,"TopicTitle":"limitations to ModuleResourceConverter?","CreatedByName":"seanth","CreatedById":79989,"CreatedDateTime":"2015-07-06T06:31:31Z","PageNum":1,"Articles":[{"CreatedByName":"seanth","CreatedById":79989,"CreatedDateTime":"2015-07-06T06:31:31Z","Content":"I think I might have found a limitation in how ModuleResourceConverter works when combining productions steps.\n\nAs a specific example, I have a setup where I am making liquid methane from CO2 gas pulled out of the atmosphere by a part \u002B H2 gas being released from a tank by another part, and the rxn takes place in a 3rd part. So:\n\nAtmospheric extractor ---\u003E CO2 gas\n\nLiquid H2 tank --\u003Erelease valve part--\u003EH2 gas\n\nCO2gas\u002BH2gas--\u003Ereactor part--\u003Emethane\n\nmethane--\u003Ecompressor part--\u003Eliquid methane\n\nThere is very limited storage of both CO2 gas and H2 gas on the test setup. And I know this seems absurdly complicated, it\u0027s just how I set it up using parts I had been using for some biology-related reactions (production of H2 and CH4 from waste breakdown, and then their compression)\n\nEverything works fine until I switch away to the space center, time accelerate, slow down time, and then return focus to the ship. Regardless of the amount of time accelerated, there is no increase in the product of the CO2 \u002B H2\n\nAm I correct in thinking that ModuleResourceConverter is doing the math to look at the time delta, finding there is not enough room on the craft to store the CO2 and H2 that would have been generated in that time frame, and just stopping the calculation? Without a calculation of the the intermediate products, any further rxns are not calculated using the time delta? Is this correct?\n\nMaybe I need to skip the production of gas intermediates and just use and produce the compressed forms? So CO2\u002BliquidH2 --\u003E liquidMethane, or have something like biological breakdown input and output liquid forms of gasses (liquidMethane\u002BliquidOxygen --\u003E liquidCO2\u002BliquidHydrogen, even though the CO2 and Oxygen are used in gas form with life support mods)\n\nGuidance?"},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-06T12:25:02Z","Content":"Maybe you can try using ModuleGenerator instead.\n\nSo what you can do is adding proper resources to the module in parts config.\n\n    MODULE{      name = ModuleGenerator      isAlwaysActive = false      activateGUIName = Turn on      shutdownGUIName = Turn off      INPUT_RESOURCE      {            name = InputResource1Name            rate = rate      }      INPUT_RESOURCE      {            name = InputResource2Name            rate = rate      }      OUTPUR_RESOURCE      {            name = OutputResourceName            rate = rate      }}"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-07-06T13:50:38Z","Content":"Actually, the issue is that ships outside the currently physics bubble \u0022freeze\u0022 and don\u0027t process, the current time warp doesn\u0027t matter.\n\nIf you want to do that you need to either implement a \u0022time passed\u0022 check every time the vessel initializes, or look at using the \u0022Background Processing\u0022 mod which provides a frame work that does that for you.\n\nD."},{"CreatedByName":"seanth","CreatedById":79989,"CreatedDateTime":"2015-07-06T15:31:23Z","Content":"\u003E \n\u003E Actually, the issue is that ships outside the currently physics bubble \u0022freeze\u0022 and don\u0027t process, the current time warp doesn\u0027t matter.\n\u003E If you want to do that you need to either implement a \u0022time passed\u0022 check every time the vessel initializes, or look at using the \u0022Background Processing\u0022 mod which provides a frame work that does that for you.\n\u003E \n\u003E D.\n\nOh! I had thought the ModuleResourceConverter worked on rails so you\u0027d get the illusion that Ore processing was happening even when the craft is not selected. That would explain what I\u0027m seeing.\n\nI just did a test and the ModuleResourceConverter module on the ISRU Converter does work on rails. Give it a lot of Ore, and a big empty LiquidFuel tank, start it up, go to the space center, fast-forward time for a few days, go back to the craft, and the LiquidFuel tank is full.\n\nI stand by my initial thought that the module is not able to link more complicated production strings.\n\nEDIT #2: I edited RoverDude\u0027s inflatable airbags to act like excess gas balloon parts to hold intermediate gas products and everything works as I thought it should. So **ModuleResourceConverter definitely needs intermediate products to have storage space, even if your setup would normally consume the intermediates immediately**.\n\n**Edited \u003Ctime datetime=\u00222015-07-06T18:52:55Z\u0022 title=\u002207/06/2015 06:52  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 6, 2015\u003C/time\u003E by seanth**"},{"CreatedByName":"AaronLS","CreatedById":142846,"CreatedDateTime":"2015-07-06T21:31:41Z","Content":"If ore conversion is written as suggested, such that conversion is calculated when it comes off rails based on time elapsed, then that would explain what you are seeing in your test, so it\u0027s creating the illusion of working on rails.\n\nIf that is true, then when you come off rails, to account for all the possible combinations lf complex workflows you might need to look at the time elapsed when you come off rails, divide that into many small intervals, and do iterative loop to calculate processing.\n\nYou could try to do it all at once, start with the beginning of the work flow to ensure later steps have input ingredients, but that doesn\u0027t account for intermediate tanks being overfilled, and vice versa starting at the last step to consume full tanks will fail when an intermediate tank is empty (but would otherwise incrementally fill from an earlier process).\n\nAn iterative method will mitigate error introduced from both problems. The smaller the interval thd better. You\u0027ll have to balance processing time with accuracy."}]}