{"TopicId":115170,"ForumId":29,"TopicTitle":"limitations to ModuleResourceConverter?","CreatedByName":"seanth","CreatedById":79989,"CreatedDateTime":"2015-07-06T06:31:31Z","PageNum":1,"Articles":[{"CreatedByName":"seanth","CreatedById":79989,"CreatedDateTime":"2015-07-06T06:31:31Z","Content":"\n\u003Cp\u003EI think I might have found a limitation in how ModuleResourceConverter works when combining productions steps.\u003C/p\u003E\u003Cp\u003EAs a specific example, I have a setup where I am making liquid methane from CO2 gas pulled out of the atmosphere by a part \u002B H2 gas being released from a tank by another part, and the rxn takes place in a 3rd part. So:\u003C/p\u003E\u003Cp\u003EAtmospheric extractor ---\u0026gt; CO2 gas\u003C/p\u003E\u003Cp\u003ELiquid H2 tank --\u0026gt;release valve part--\u0026gt;H2 gas\u003C/p\u003E\u003Cp\u003ECO2gas\u002BH2gas--\u0026gt;reactor part--\u0026gt;methane\u003C/p\u003E\u003Cp\u003Emethane--\u0026gt;compressor part--\u0026gt;liquid methane\u003C/p\u003E\u003Cp\u003EThere is very limited storage of both CO2 gas and H2 gas on the test setup. And I know this seems absurdly complicated, it\u0027s just how I set it up using parts I had been using for some biology-related reactions (production of H2 and CH4 from waste breakdown, and then their compression)\u003C/p\u003E\u003Cp\u003EEverything works fine until I switch away to the space center, time accelerate, slow down time, and then return focus to the ship. Regardless of the amount of time accelerated, there is no increase in the product of the CO2 \u002B H2\u003C/p\u003E\u003Cp\u003EAm I correct in thinking that ModuleResourceConverter is doing the math to look at the time delta, finding there is not enough room on the craft to store the CO2 and H2 that would have been generated in that time frame, and just stopping the calculation? Without a calculation of the the intermediate products, any further rxns are not calculated using the time delta? Is this correct?\u003C/p\u003E\u003Cp\u003EMaybe I need to skip the production of gas intermediates and just use and produce the compressed forms? So CO2\u002BliquidH2 --\u0026gt; liquidMethane, or have something like biological breakdown input and output liquid forms of gasses (liquidMethane\u002BliquidOxygen --\u0026gt; liquidCO2\u002BliquidHydrogen, even though the CO2 and Oxygen are used in gas form with life support mods)\u003C/p\u003E\u003Cp\u003EGuidance?\u003C/p\u003E\n"},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-06T12:25:02Z","Content":"\n\u003Cp\u003EMaybe you can try using ModuleGenerator instead.\u003C/p\u003E\u003Cp\u003ESo what you can do is adding proper resources to the module in parts config.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E      name = ModuleGenerator\u003Cbr\u003E      isAlwaysActive = false\u003Cbr\u003E      activateGUIName = Turn on\u003Cbr\u003E      shutdownGUIName = Turn off\u003Cbr\u003E      INPUT_RESOURCE\u003Cbr\u003E      {\u003Cbr\u003E            name = InputResource1Name\u003Cbr\u003E            rate = rate\u003Cbr\u003E      }\u003Cbr\u003E      INPUT_RESOURCE\u003Cbr\u003E      {\u003Cbr\u003E            name = InputResource2Name\u003Cbr\u003E            rate = rate\u003Cbr\u003E      }\u003Cbr\u003E      OUTPUR_RESOURCE\u003Cbr\u003E      {\u003Cbr\u003E            name = OutputResourceName\u003Cbr\u003E            rate = rate\u003Cbr\u003E      }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-07-06T13:50:38Z","Content":"\n\u003Cp\u003EActually, the issue is that ships outside the currently physics bubble \u0022freeze\u0022 and don\u0027t process, the current time warp doesn\u0027t matter.\u003C/p\u003E\u003Cp\u003EIf you want to do that you need to either implement a \u0022time passed\u0022 check every time the vessel initializes, or look at using the \u0022Background Processing\u0022 mod which provides a frame work that does that for you.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"seanth","CreatedById":79989,"CreatedDateTime":"2015-07-06T15:31:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EActually, the issue is that ships outside the currently physics bubble \u0022freeze\u0022 and don\u0027t process, the current time warp doesn\u0027t matter.\u003Cp\u003EIf you want to do that you need to either implement a \u0022time passed\u0022 check every time the vessel initializes, or look at using the \u0022Background Processing\u0022 mod which provides a frame work that does that for you.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EOh! I had thought the ModuleResourceConverter worked on rails so you\u0027d get the illusion that Ore processing was happening even when the craft is not selected. That would explain what I\u0027m seeing.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI just did a test and the ModuleResourceConverter module on the ISRU Converter does work on rails. Give it a lot of Ore, and a big empty LiquidFuel tank, start it up, go to the space center, fast-forward time for a few days, go back to the craft, and the LiquidFuel tank is full.\u003C/p\u003E\u003Cp\u003EI stand by my initial thought that the module is not able to link more complicated production strings.\u003C/p\u003E\u003Cp\u003EEDIT #2: I edited RoverDude\u0027s inflatable airbags to act like excess gas balloon parts to hold intermediate gas products and everything works as I thought it should. So \u003Cstrong\u003EModuleResourceConverter definitely needs intermediate products to have storage space, even if your setup would normally consume the intermediates immediately\u003C/strong\u003E.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-06T18:52:55Z\u0022 title=\u002207/06/2015 06:52  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 6, 2015\u003C/time\u003E by seanth\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AaronLS","CreatedById":142846,"CreatedDateTime":"2015-07-06T21:31:41Z","Content":"\n\u003Cp\u003EIf ore conversion is written as suggested, such that conversion is calculated when it comes off rails based on time elapsed, then that would explain what you are seeing in your test, so it\u0027s creating the illusion of working on rails.\u003C/p\u003E\u003Cp\u003EIf that is true, then when you come off rails, to account for all the possible combinations lf complex workflows you might need to look at the time elapsed when you come off rails, divide that into many small intervals, and do iterative loop to calculate processing.\u003C/p\u003E\u003Cp\u003EYou could try to do it all at once, start with the beginning of the work flow to ensure later steps have input ingredients, but that doesn\u0027t account for intermediate tanks being overfilled, and vice versa starting at the last step to consume full tanks will fail when an intermediate tank is empty (but would otherwise incrementally fill from an earlier process).\u003C/p\u003E\u003Cp\u003EAn iterative method will mitigate error introduced from both problems. The smaller the interval thd better. You\u0027ll have to balance processing time with accuracy.\u003C/p\u003E\n"}]}