{"TopicId":43707,"ForumId":34,"TopicTitle":"kOS Scriptable Autopilot System 0.9","CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-08-24T14:28:17Z","PageNum":80,"Articles":[{"CreatedByName":"drtedastro","CreatedById":70911,"CreatedDateTime":"2013-11-22T07:16:13Z","Content":"\n\u003Cp\u003EThe idea of running a program when rebooting would be excellent. Like coming out of a \u0027safeboot\u0027, or a safe time... This safe boot prog, would be like a bios and would run whichever prog user had stored in its nonvolatile memory. something like, point ant to kerbin and wait for instructions, or such... Nice stuff....\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-22T08:02:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022drtedastro\u0022 data-cite=\u0022drtedastro\u0022\u003E\u003Cdiv\u003EThe idea of running a program when rebooting would be excellent. Like coming out of a \u0027safeboot\u0027, or a safe time... This safe boot prog, would be like a bios and would run whichever prog user had stored in its nonvolatile memory. something like, point ant to kerbin and wait for instructions, or such... Nice stuff....\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt doesn\u0027t even need to be that complicated. Just a convention that says \u0022any program file called \u0027BOOT\u0027 that exists on your hard drive will be run when the machine boots. If you want to make a routine to run upon bootup, just call it BOOT.\u0022\u003C/p\u003E\u003Cp\u003EThat would be rather analogous to several real-world operating systems that do or did a thing like that.\u003C/p\u003E\n"},{"CreatedByName":"drtedastro","CreatedById":70911,"CreatedDateTime":"2013-11-22T08:04:48Z","Content":"\n\u003Cp\u003ESounds great....\u003C/p\u003E\n"},{"CreatedByName":"Bizz Keryear","CreatedById":68896,"CreatedDateTime":"2013-11-22T09:21:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003ERegarding your discussion on the Github page: I have been thinking about a way of maybe automatically running a certain script on boot. Preloading, as it were. That seems a lot nicer when playing (I can not count the times I typed\u003Cem\u003E copy prog from 0.\u003C/em\u003E ... \u003Cem\u003Erun prog.\u003C/em\u003E) and it is also realistic. A craft that shuts down due to an error or some other unforeseen circumstance should really try to run its software, possible extend antennas and phone home. Now, when you reboot, you are just dead in the water.\u003Cp\u003EIf the craft is able to phone home, it could even automatically access a script containing new programs/scripts to run. Pretty much like the real thing. I am just not really sure about how you can preload anything on startup, because that is where the repeatedly typing in your program names starts to count after a while.\u003C/p\u003E\u003Cp\u003EIt would of course be really nice if scripts could run while unloaded. I think of geostationary stationkeeping or long, long journeys. Having the craft look after itself would be ideal, as babysitting the geosync of my satellites is not my favorite hobby and warp adds to the problem quickly. That is at the same time a big hurdle. How is kOS ever going to run different ships at the same time, with physics (on rails it\u0027s hard for kOS to do anything) and without player supervision? I suspect that KSP is going to throw a royal fit.\u003C/p\u003E\u003Cp\u003EOf course, if the workload could be properly offloaded to seperate cores the problem would be pretty much solved - unless you run many more ships. That would, however, probably mean that physics also have to be offloaded and I am not sure that is even possible.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022drtedastro\u0022 data-cite=\u0022drtedastro\u0022\u003E\u003Cdiv\u003EThe idea of running a program when rebooting would be excellent. Like coming out of a \u0027safeboot\u0027, or a safe time... This safe boot prog, would be like a bios and would run whichever prog user had stored in its nonvolatile memory. something like, point ant to kerbin and wait for instructions, or such... Nice stuff....\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIt doesn\u0027t even need to be that complicated. Just a convention that says \u0022any program file called \u0027BOOT\u0027 that exists on your hard drive will be run when the machine boots. If you want to make a routine to run upon bootup, just call it BOOT.\u0022\u003Cp\u003EThat would be rather analogous to several real-world operating systems that do or did a thing like that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI also suggest this way back. Was rejected. Was I wanted was if you have a file with a certain name in archive it will be executed as soon as you create a new vessel.\u003C/p\u003E\u003Cp\u003EThe things is you can edit it outside which is quite comfortable. And within would be commands like\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ECOPY XYZ from 0.\u003Cbr\u003Ecopy ABC from 0.\u003Cbr\u003E// and so on\u003Cbr\u003Erun xyz.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Sacred Aardvark","CreatedById":85856,"CreatedDateTime":"2013-11-22T10:13:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EDoes anyone know how to unset a target?\u003Cp\u003EIf I do this:\u003C/p\u003E\u003Cp\u003Eset target to \u0022Duna\u0022.\u003C/p\u003E\u003Cp\u003EThen I can\u0027t figure out how to de-select Duna after that (from in the script, I mean).\u003C/p\u003E\u003Cp\u003Eset target to 0.\u003C/p\u003E\u003Cp\u003Eset target to \u0022None\u0022.\u003C/p\u003E\u003Cp\u003Eset target to \u0022\u0022.\u003C/p\u003E\u003Cp\u003ENone of the above work. Maybe I\u0027m missing something really obvious.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOld hack re-purposed: \u0022set target to ship:body.\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\u003Cp\u003ELast time it required an immediate action afterwards, this time it requires a slight delay in accessing target info \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_happy.png\u0022 alt=\u0022^_^\u0022\u003E\u003C/p\u003E\u003Cp\u003E[edit] for those who might have missed the earlier discussion, \u0022set target to ship:body\u0022 will set your target to the body of whatever SOI you\u0027re in, which the game doesn\u0027t really like you doing and will clear your target in a fraction of a second. If your intent was to clear your target, no problem. (and if you\u0027re quick there\u0027s some unreliable trickery that can be made with the split second target)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-22T11:01:21Z\u0022 title=\u002211/22/2013 11:01  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 22, 2013\u003C/time\u003E by Sacred Aardvark\u003C/strong\u003E\n\u003Cbr\u003Esome phrasing adjustments\n\u003C/span\u003E\n"},{"CreatedByName":"a1270","CreatedById":92031,"CreatedDateTime":"2013-11-22T12:07:25Z","Content":"\n\u003Cp\u003EI\u0027ll rehash what i said on github here. UNSET ALL/variable will unset user-defined variables. Bulk node removal is targeted for REMOVE ALL NODES, Kevin has said REMOVE is to be generic. Target removal is added to my list but all non-critical issues are getting the backburner as of now. I am uncomfortable about having so many pull request on master.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-22T15:53:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Bizz Keryear\u0022 data-cite=\u0022Bizz Keryear\u0022\u003E\u003Cdiv\u003EI also suggest this way back. Was rejected. Was I wanted was if you have a file with a certain name in archive it will be executed as soon as you create a new vessel.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat doesn\u0027t sound like the same suggestion at all. It\u0027s a lot more complex and that could be why it was rejected. I\u0027m just talking about a self-contained thing that lives entirely on the module itself that it activates when rebooted.\u003C/p\u003E\n"},{"CreatedByName":"erbmur","CreatedById":57112,"CreatedDateTime":"2013-11-22T17:36:31Z","Content":"\n\u003Cp\u003EI have the sensor plugin and am trying to write something that hovers.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ELOCK tVal TO THROTTLE.\u003Cbr\u003ELOCK grav TO SENSOR!GRAV().\u003Cbr\u003EUNTIL STATUS = \u0022LANDED\u0022 {\u003Cbr\u003E     SET tVal TO (MASS * grav)/MAXTHRUST.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn theory, shouldn\u0027t this cause the thrust produced to always equal the gravitational pull at the current location, therefore having no net acceleration present, causing the craft to hover?\u003C/p\u003E\u003Cp\u003EInstead, it causes the craft to rather descend with an acceleration and eventually crash.\u003C/p\u003E\u003Cp\u003EAnybody have any pointers?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-22T17:53:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erbmur\u0022 data-cite=\u0022erbmur\u0022\u003E\u003Cdiv\u003EI have the sensor plugin and am trying to write something that hovers.\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ELOCK tVal TO THROTTLE.\u003Cbr\u003ELOCK grav TO SENSOR!GRAV().\u003Cbr\u003EUNTIL STATUS = \u0022LANDED\u0022 {\u003Cbr\u003E     SET tVal TO (MASS * grav)/MAXTHRUST.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn theory, shouldn\u0027t this cause the thrust produced to always equal the gravitational pull at the current location, therefore having no net acceleration present, causing the craft to hover?\u003C/p\u003E\u003Cp\u003EInstead, it causes the craft to rather descend with an acceleration and eventually crash.\u003C/p\u003E\u003Cp\u003EAnybody have any pointers?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have no experience using the sensor mod for KOS, but I can see that you have your throttle lock syntax backward.\u003C/p\u003E\u003Cp\u003EWhere you do this: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Elock tVal to throttle.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Eyou need to do this: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Elock throttle to tVal.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t know if that\u0027s the only problem you\u0027re having, but it\u0027s certainly one problem.\u003C/p\u003E\n"},{"CreatedByName":"erbmur","CreatedById":57112,"CreatedDateTime":"2013-11-22T18:02:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI have no experience using the sensor mod for KOS, but I can see that you have your throttle lock syntax backward.\u003Cp\u003EWhere you do this: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Elock tVal to throttle.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Eyou need to do this: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Elock throttle to tVal.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t know if that\u0027s the only problem you\u0027re having, but it\u0027s certainly one problem.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy bad, it is lock throttle to tVal, just misstyped it.\u003C/p\u003E\u003Cp\u003EThe sensor mod just takes the value given by the grav sensor. so the variable \u0022grav\u0022 will always be the equal to the acceleration due to gravity at the current location. Shouldn\u0027t the \u0022SET tVal TO (MASS * grav)/MAXTHRUST.\u0022 cause the thrust generated to always equal the gravitational pull at the current location?\u003C/p\u003E\n"},{"CreatedByName":"a1270","CreatedById":92031,"CreatedDateTime":"2013-11-22T18:05:18Z","Content":"\n\u003Cp\u003EThe other issue is UNTIL, IF, WHEN.. THEN all won\u0027t accept string literals for comparison. There is a fix but it needs to get pulled in. SET landed TO \u0022LANDED\u0022. UNTIL STATUS == landed { code. }. seems to be a workaround.\u003C/p\u003E\n"},{"CreatedByName":"erbmur","CreatedById":57112,"CreatedDateTime":"2013-11-22T18:11:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022a1270\u0022 data-cite=\u0022a1270\u0022\u003E\u003Cdiv\u003EThe other issue is UNTIL, IF, WHEN.. THEN all won\u0027t accept string literals for comparison. There is a fix but it needs to get pulled in. SET landed TO \u0022LANDED\u0022. UNTIL STATUS == landed { code. }. seems to be a workaround.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat would help with the final stage when i actually manage to land and want to cut the engines, but the issue is that it\u0027s more like a crash rather then a land because the hover mechanic doesn\u0027t seem to function properly.\u003C/p\u003E\u003Cp\u003EI guess what im asking is if anybody has an equation that i can use as a hover mechanic? Because mine just seems to make it want to descend rather quickly rather then actually hover.\u003C/p\u003E\n"},{"CreatedByName":"CrAzY GeNiUs","CreatedById":93837,"CreatedDateTime":"2013-11-22T18:27:23Z","Content":"\n\u003Cp\u003EBUG\u003C/p\u003E\u003Cp\u003Eset p to 0.\u003C/p\u003E\u003Cp\u003Eprint p.\u003C/p\u003E\u003Cp\u003E0\u003C/p\u003E\u003Cp\u003Eif altitude \u0026gt; 1000 {set p to 1.}. // I\u0027m on ALTITUDE 1358 m.\u003C/p\u003E\u003Cp\u003Eprint p.\u003C/p\u003E\u003Cp\u003E1\u003C/p\u003E\u003Cp\u003Eif altitude \u0026lt; 1000 {set p to 2.}. // I\u0027m on ALTITUDE 589 m.\u003C/p\u003E\u003Cp\u003Eprint p.\u003C/p\u003E\u003Cp\u003E1\u003C/p\u003E\u003Cp\u003EHELP\u003C/p\u003E\n"},{"CreatedByName":"AbeS","CreatedById":80644,"CreatedDateTime":"2013-11-22T19:12:54Z","Content":"\n\u003Cp\u003EAre you running that code when you are at 1358m? Because I don\u0027t see any loops in there, so it will only run once and then end. \u003C/p\u003E\u003Cp\u003ETry this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset p to 0.\u003Cbr\u003Eprint \u0022P:\u0022 at (0,1).\u003Cbr\u003E\u003Cbr\u003Euntil 0 {\u003Cbr\u003E     print p at (10,1).\u003Cbr\u003E     if altitude \u0026gt; 1000 {set p to 1.}.\u003Cbr\u003E     if altitude \u0026lt; 1000 {set p to 2.}.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDoes that work?\u003C/p\u003E\n"},{"CreatedByName":"CrAzY GeNiUs","CreatedById":93837,"CreatedDateTime":"2013-11-22T21:16:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AbeS\u0022 data-cite=\u0022AbeS\u0022\u003E\u003Cdiv\u003EAre you running that code when you are at 1358m? Because I don\u0027t see any loops in there, so it will only run once and then end. \u003Cp\u003ETry this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset p to 0.\u003Cbr\u003Eprint \u0022P:\u0022 at (0,1).\u003Cbr\u003E\u003Cbr\u003Euntil 0 {\u003Cbr\u003E     print p at (10,1).\u003Cbr\u003E     if altitude \u0026gt; 1000 {set p to 1.}.\u003Cbr\u003E     if altitude \u0026lt; 1000 {set p to 2.}.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDoes that work?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E! Thank you ! ! Thank you ! ! Thank you ! ! Thank you !\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-22T21:24:04Z\u0022 title=\u002211/22/2013 09:24  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 22, 2013\u003C/time\u003E by CrAzY GeNiUs\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Bizz Keryear","CreatedById":68896,"CreatedDateTime":"2013-11-22T21:27:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThat doesn\u0027t sound like the same suggestion at all. It\u0027s a lot more complex and that could be why it was rejected. I\u0027m just talking about a self-contained thing that lives entirely on the module itself that it activates when rebooted.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EKevin also stated that one target is that kOS will one day continue programs as soon as you return to the vessel. Due current technical reasons it boots every time you load the vessel.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-23T00:38:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022a1270\u0022 data-cite=\u0022a1270\u0022\u003E\u003Cdiv\u003EThe other issue is UNTIL, IF, WHEN.. THEN all won\u0027t accept string literals for comparison. There is a fix but it needs to get pulled in. SET landed TO \u0022LANDED\u0022. UNTIL STATUS == landed { code. }. seems to be a workaround.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe following part of my descend script has always worked just fine:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E      if STATUS = \u0022LANDED\u0022 or STATUS = \u0022SPLASHED\u0022 {\u003Cbr\u003E\tif descType = \u0022hover\u0022 or descType = \u0022lander\u0022 {\u003Cbr\u003E\t  // Stop moving:\u003Cbr\u003E\t  set mySteer to up.\u003Cbr\u003E\t  lock throttle to 0.\u003Cbr\u003E\t  wait 10.\u003Cbr\u003E\t  set beDone to 1. \u003Cbr\u003E\t}\u003Cbr\u003E\tif descType = \u0022skycrane\u0022 or descType = \u0022skycrane/lander\u0022 {\u003Cbr\u003E\t  SAS ON. // To ensure the payload is holding itself stable.\u003Cbr\u003E\t  set dMode to 2.\u003Cbr\u003E\t}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI thought comparing to string literals only was a problem when the object being compared isn\u0027t normally a string. The objects in KOS implement toString() methods that allow them to cast themselves to a string when needed. The problem as you explained it before, is that this conversion isn\u0027t being triggered by attempts to compare versus a string literal like it should be, but it *is* being triggered when comparing versus a string variable.\u003C/p\u003E\u003Cp\u003ESince STATUS really *is* a string, rather than just masquerading as one, no casting is needed so it works fine regardless of whether you compare it to a string literal or a string variable.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-23T00:46:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erbmur\u0022 data-cite=\u0022erbmur\u0022\u003E\u003Cdiv\u003EThat would help with the final stage when i actually manage to land and want to cut the engines, but the issue is that it\u0027s more like a crash rather then a land because the hover mechanic doesn\u0027t seem to function properly.\u003Cp\u003EI guess what im asking is if anybody has an equation that i can use as a hover mechanic? Because mine just seems to make it want to descend rather quickly rather then actually hover.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI do the same thing you do but I don\u0027t use the grav sensor and have no idea how it functions.\u003C/p\u003E\u003Cp\u003EInstead i just calculate it myself based on body\u0027s mass and my altitude and the standard law of gravitation, like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E  lock heregrav to gConst*bodyMass/((altitude\u002BbodyRadius)^2).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFrom then on \u0027heregrav\u0027 will be the same thing you\u0027re trying to read from sensor!grav.\u003C/p\u003E\u003Cp\u003EWhere:\u003C/p\u003E\u003Cp\u003E- gConst is the gravitational constant.\u003C/p\u003E\u003Cp\u003E- bodyMass is the mass of the body you are orbiting (you can get this now from Body(body):mass , which you couldn\u0027t before.)\u003C/p\u003E\u003Cp\u003E- bodyRadius is he equatorial radius of the body you are orbiting (which I don\u0027t think is in the Body struct yet in KOS so you\u0027ll have to get it from a wiki search).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset gConst to 6.67384*10^(0-11). // The Gravitational constant - same no matter what body you orbit.\u003Cbr\u003Eset bodyRadius to 600000 .   // For kerbin, for example.\u003Cbr\u003Eset bodyMass to 5.2915793*10^22.   // for kerbin, for example.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2013-11-23T10:21:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erbmur\u0022 data-cite=\u0022erbmur\u0022\u003E\u003Cdiv\u003EI guess what im asking is if anybody has an equation that i can use as a hover mechanic? Because mine just seems to make it want to descend rather quickly rather then actually hover.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat I use is \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock throttle to 1/(maxthrust/(mass*sensor!grav())).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EPlease note that for some reason this will not maintain a proper steady hover. It comes very close, but will always have a very small upwards acceleration, so some compensatory mechanism is necessary. This is a known thing, comes from KSP itself and is how it should function.\u003C/p\u003E\u003Cp\u003ETo be honest, that makes it a little more fun \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I am currently exploring several options, each of which has strong points and weaknesses. Two are already working (dividing and a PID-controller), on the third one I am working at the moment.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-23T10:48:18Z\u0022 title=\u002211/23/2013 10:48  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 23, 2013\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"erbmur","CreatedById":57112,"CreatedDateTime":"2013-11-23T10:46:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EWhat I use is \u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock throttle to 1/(maxthrust/(mass*sensor!grav())).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EPlease note that for some reason this will not maintain a proper steady hover. It comes very close, but will always have a very small upwards acceleration, so some compensatory mechanism is necessary. This is a known thing, comes from KSP itself and it how is should function.\u003C/p\u003E\u003Cp\u003ETo be honest, that makes it a little more fun \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I am currently exploring several options, each of which has strong points and weaknesses. Two are already working (dividing and a PID-controller), on the third one I am working at the moment.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for this!\u003C/p\u003E\u003Cp\u003EYour code seems to do the exact opposite of mine. Mine causes it to descend with a tiny bit of acceleration whereas your causes it to lift with a tiny bit. I guess my code is fine after all and the issue is inherent within KSP.\u003C/p\u003E\u003Cp\u003EThanks for making me feel better about myself.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-23T10:51:10Z\u0022 title=\u002211/23/2013 10:51  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 23, 2013\u003C/time\u003E by erbmur\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2013-11-23T11:04:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erbmur\u0022 data-cite=\u0022erbmur\u0022\u003E\u003Cdiv\u003EYour code seems to do the exact opposite of mine. Mine causes it to descend with a tiny bit of acceleration whereas your causes it to lift with a tiny bit. I guess my code is fine after all and the issue is inherent within KSP.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is actually starting to make me think that the problem might not be inherent at all. Maybe it has to do with current vertical speed and the time it takes kOS to switch to the calculated throttle speed, as that is not 0.\u003C/p\u003E\u003Cp\u003ESome testing is in order! Could you post the full code you use to get to 0 m/s and hover?\u003C/p\u003E\n"},{"CreatedByName":"AbeS","CreatedById":80644,"CreatedDateTime":"2013-11-23T14:05:48Z","Content":"\n\u003Cp\u003Eare you making gravity as a constant? that could really mess up hovering, you should be using \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset Gc to 6.67384*10^-11. // Grav Constant\u003Cbr\u003Eset PM to 5.2915793*10^22. // Planet Mass (stock Kerbin)\u003Cbr\u003Eset PR to 600000. // Planet Radius (stock Kerbin)\u003Cbr\u003Elock alt to altitude \u002B PR. // Real altitude\u003Cbr\u003Elock grav to Gc*PM/(alt^2).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you are using it, forget I said anything \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"a1270","CreatedById":92031,"CreatedDateTime":"2013-11-23T14:08:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThe following part of my descend script has always worked just fine:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E      if STATUS = \u0022LANDED\u0022 or STATUS = \u0022SPLASHED\u0022 {\u003Cbr\u003E\tif descType = \u0022hover\u0022 or descType = \u0022lander\u0022 {\u003Cbr\u003E\t  // Stop moving:\u003Cbr\u003E\t  set mySteer to up.\u003Cbr\u003E\t  lock throttle to 0.\u003Cbr\u003E\t  wait 10.\u003Cbr\u003E\t  set beDone to 1. \u003Cbr\u003E\t}\u003Cbr\u003E\tif descType = \u0022skycrane\u0022 or descType = \u0022skycrane/lander\u0022 {\u003Cbr\u003E\t  SAS ON. // To ensure the payload is holding itself stable.\u003Cbr\u003E\t  set dMode to 2.\u003Cbr\u003E\t}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI thought comparing to string literals only was a problem when the object being compared isn\u0027t normally a string. The objects in KOS implement toString() methods that allow them to cast themselves to a string when needed. The problem as you explained it before, is that this conversion isn\u0027t being triggered by attempts to compare versus a string literal like it should be, but it *is* being triggered when comparing versus a string variable.\u003C/p\u003E\u003Cp\u003ESince STATUS really *is* a string, rather than just masquerading as one, no casting is needed so it works fine regardless of whether you compare it to a string literal or a string variable.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI originally thought it was a casting issue, i\u0027ll blame that goose chase on insomnia. After i got some sleep i looked at the parsing itself and it was a simple fix. \u003C/p\u003E\u003Cp\u003EWhat\u0027s happening with that code is OR(AND will as well) forces a conversion to boolean. IF, WHEN..THEN and UNTIL have no issue with booleans. The real issue was the regex for the conditional forbids the usage of double quotes and braces. Doing \u0027status == \u0022LANDED\u0022\u0027 should have also converted to boolean but the bug prevented it getting that far.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2013-11-23T14:17:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AbeS\u0022 data-cite=\u0022AbeS\u0022\u003E\u003Cdiv\u003Eare you making gravity as a constant?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWe are measuring gravity with the Negative Gravioli Detector. Unless that\u0027s off for some reason, it \u003Cem\u003Eshould\u003C/em\u003E be perfect. Just like with real reality, it is not \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"AbeS","CreatedById":80644,"CreatedDateTime":"2013-11-23T14:20:06Z","Content":"\n\u003Cp\u003Edidn\u0027t know we could use the sensors \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png\u0022 alt=\u0022:o\u0022\u003E, anyways I would check by printing the grav from the formula and printing the sensor\u0027s readings and see if it is accurate?\u003C/p\u003E\n"}]}