{"TopicId":160040,"ForumId":20,"TopicTitle":"Bad performance with mods (1.2.2 and 1.2.9)","CreatedByName":"Tau137","CreatedById":100466,"CreatedDateTime":"2017-05-01T15:01:22Z","PageNum":1,"Articles":[{"CreatedByName":"Tau137","CreatedById":100466,"CreatedDateTime":"2017-05-01T15:01:22Z","Content":"\n\u003Cp\u003E\nSo, I finally came back to playing KSP, gradually and carefully built my mod list... only to realize that the game is unplayable with my mod setup (nothing excessive, mind you - all fits under 2Gb).\n\u003C/p\u003E\n\u003Cp\u003E\nI have not \u0022the latest and greatest\u0022 but still a pretty decent CPU, GTX780, 16G ram.\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT:\u00A0 Removed \u0022observations from prior versions\u0022 comment because I did proper testing with 1.1.3 and found that it was just false memory on my part - tendencies are the same in terms of slowness (except that 1.1.3 is ~25-30% slower overall).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNow in 1.2.2 (identical behavior in 1.2.9, at least for those mods that work with it) I see huge performance hits.\u00A0 Example: a 300-part airplane on the runway:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Full stock: 50fps, down to 35 over ocean (\u003Cstrong\u003Ebtw, why such a drastic drop in fps, when there is little to render and nothing has changed in physics/parts?\u003C/strong\u003E)\n\u003C/p\u003E\n\u003Cp\u003E\n2. Scatterer: 48-35 fps\n\u003C/p\u003E\n\u003Cp\u003E\n3. Scatterer \u002B Kopernicus \u002B SVT: 41-29 fps\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E4a. SVE \u002B SVT (\u002B\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, Kopernicus, Scatterer)): 21-12 fps\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E4b. Same mods, but flying Aeris 3a: 60-44 fps (!!!)\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n5. KJR only: 31-12 fps (!!)\n\u003C/p\u003E\n\u003Cp\u003E\nSo, these are heavy visual mods and one physics mod, so one would expect a performance hit (even though it was not nearly as noticeable in 1.1.3).\u00A0 BTW, at no point do I get 100% CPU core usage - at most it goes up to ~75%, with a couple more cores at ~25-30%.\u00A0 Graphics is definitely not the bottleneck either (see 1 and 4a/b above).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo, what if we install a few essential and light-weight mods that should, in theory, have minimal impact on in-flight performance?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E6a. \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E, Toolbar, Better burn time, Better time warp, \u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E, CCK, CRP, CTT, AGX, EasyVesselSwitch, EditorExtensions, \u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E, \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E, MechJeb2, Docking alignment, Vanguard Parachutes, no KJR, same 300-parts airplane: 31-25fps (just a reminder - 50-35fps in pure stock).\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E6b. Same mods, but flying Aeris 3A: 60 fps (limit!!!).\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAt some point I tended to blame the total memory footprint as being the culprit, but it does not seem to be the case - although total RAM consumption and part count (existing in game, not on vessel on in the scene) does have some effect, it is nothing compared to number of mod DLLs installed.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EConclusion:\u003C/strong\u003E what (tf) is going on here?\u00A0 Why mods that should not work on per-part basis (visual enhancements, utility non-physics mods) slow the game down proportionally to the size of the craft?\u00A0 And even if, for some bizarre reason, they are called on each part, why the execution is so slow for what is essentially just a few lines of code (from my long-past days of hands-on programming, this feels like every call to third-party procedures is wrapped in several layers or extreme debug exception handling - btw, no exceptions reported in the log)?\n\u003C/p\u003E\n\u003Cp\u003E\nDo you experience something similar, or perhaps you have 200 mods and more than 5GB in GameData folder and yet everything runs just as smoothly as in stock?\u00A0 \u003Cstrong\u003EEither way, please report your experiences here (keep it civil, avoid excessive quoting, and include your rig configuration and specific test results if available).\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-08T15:11:34Z\u0022 title=\u002205/08/2017 03:11  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 8, 2017\u003C/time\u003E by Tau137\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ruedii","CreatedById":57704,"CreatedDateTime":"2017-05-01T18:16:03Z","Content":"\n\u003Cp\u003E\nThere are two possibilities.\u00A0\u003Cbr\u003E\u003Cbr\u003E\nFirst: One of these mods is obsolete and is thus throwing an exception on a regular interval.\u00A0 (I know Vanguard parachutes is obsolete and has been replaced with a community drop in\u00A0\u00A0\u00A0\u00A0 replacement mod. This might be your problem.)\u00A0 This should show up in the log (Under the dubug menu, same menu as the cheats).\u00A0 Toolbar is also undermaintained, and uses the old \u0022legacy\u0022 GUI which always bogged things down but now causes massive slowdown in KSP 1.2 and later.\u00A0 (Also, double check that you have the latest Mechjeb2 version.\u00A0 Older versions also use Legacy GUI.)\u003Cbr\u003E\u003Cbr\u003E\nSecond, you have a mod creating a lot of garbage due to changes to the version of Unity3D (The dev-kit used to make KSP).\u003Cbr\u003E\u003Cbr\u003E\nGC Cycles are memory bottlenecked and operate solely on the main thread (thus only use one core).\u00A0 During this process all other parts of the game are temporarily stopped.\u00A0 Under normal situations these cycles are so quick you don\u0027t notice them, but when a mod is using a lot of script variables instead of using static assets, it has much more to check, and often much more to clean up.\u00A0\u003Cbr\u003E\u003Cbr\u003E\nYou can check if it\u0027s the GC by checking the performance tab.\u00A0 This will provide you with a chart of the memory usage and frame rate info.\u00A0 The memory should be a sawtooth pattern.\u00A0 If, instead you see frequent huge spikes that occur right before the stutters, that is a garbage issue.\u003Cbr\u003E\u003Cbr\u003E\nEither way, the first thing I recommend is checking that all your mods are updated.\u00A0 Sometimes, as is the case with Toolbar, the mod is no longer necessary, or you may need to find the community update.\u003Cbr\u003E\u003Cbr\u003E\nI have a few of them for you already:\u003Cbr\u003E\u003Cbr\u003E\nEVA Parachutes: \u003Ca href=\u0022https://spacedock.info/mod/991/EVA%20Parachutes%20%26%20Ejection%20Seats\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://spacedock.info/mod/991/EVA Parachutes %26 Ejection Seats\u003C/a\u003E\u003Cbr\u003E\nMechjeb2: \u003Ca href=\u0022https://ksp.sarbian.com/jenkins/job/MechJeb2-Dev/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ksp.sarbian.com/jenkins/job/MechJeb2-Dev/\u003C/a\u003E\u003Cbr\u003E\nEditor Extensions: \u003Ca href=\u0022https://spacedock.info/mod/48/Editor%20Extensions%20Redux\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://spacedock.info/mod/48/Editor Extensions Redux\u003C/a\u003E\u003Cbr\u003E\u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E (with links to \u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E):\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/149848-122-kerbal-inventory-system-kis-v143/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Tau137","CreatedById":100466,"CreatedDateTime":"2017-05-01T18:36:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223041398\u0022 data-ipsquote-contentid=\u0022160040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493662563\u0022 data-ipsquote-userid=\u002257704\u0022 data-ipsquote-username=\u0022Ruedii\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Ruedii said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFirst: One of these mods is obsolete and is thus throwing an exception on a regular interval.\n\u003C/p\u003E\n\u003Cp\u003E\nSecond, you have a mod creating a lot of garbage due to changes to the version of Unity3D (The dev-kit used to make KSP).\u003Cbr\u003E\u003Cbr\u003E\nGC Cycles are memory bottlenecked and operate solely on the main thread (thus only use one core).\u00A0 During this process all other parts of the game are temporarily stopped.\u00A0 Under normal situations these cycles are so quick you don\u0027t notice them, but when a mod is using a lot of script variables instead of using static assets, it has much more to check, and often much more to clean up.\u00A0\u003Cbr\u003E\u003Cbr\u003E\nYou can check if it\u0027s the GC by checking the performance tab.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFirst - not applicable, all mods are latest and greatest, compiled for 1.2.2 (the only exception is KJR, 1.2.0).\u00A0 I guess I should have stated that in the first place, but I presumed that to be self-evident (for every self-respecting and at least somewhat experienced KSP player).\n\u003C/p\u003E\n\u003Cp\u003E\nSecond - reasonable assumption, but I cannot localize ONE single mod(s), and there is no garbage in the output log (does not negate your argument completely, but still) - it looks like EVERY SINGLE mod I add creates more problems/slowdown (I can even see slowdown on high-partcount ships with just \u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E(!) installed).\n\u003C/p\u003E\n\u003Cp\u003E\nGC Cycles... does not help me to understand why the performance is so abysmal on my rig, while not being neither graphically nor CPU bound.\u00A0 Surely, if I have a mod that is not optimized and, on every cycle, keeps pulling a lot of info or doing a lot of stuff - that could be a culprit.\u00A0 But how would a visual enhancement mod (textures, clouds, shaders) be so much slower on a large ship compared to a small one (even though the mod has nothing to do with object interaction aka \u0022physics\u0022, and there is a plenty of other objects/vertices to render in the scene, so part count on the vessel should not matter that much - after all, somehow I get better fps flying around \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E compared to flying over the ocean with nothing in sight)?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EBTW, comparing frame rate in flight scene vs. map view (while flying) - map view is better, but not by much (~25-50% fps difference), so looks like it\u0027s mostly in physics and/or external (mod) calls - still somehow dependent on physics/partcount.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nPerformance tab in KSP is a big lier - actual numbers (as reported by Windows and NVidia) are quite a lot different (significantly lower fps, significantly higher actual RAM consumption; and the performance tab tends to freeze often, showing nothing after a while).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EAnyhow, the idea of this topic was not to try to discredit one\u0027s observations/experience, but rather to collect more of them (preferably supported by not just \u0022feelings\u0022 but actual recorded/verifiable numbers) to be able to make any sort of fact- and statistics-based conclusions - to (hopefully) bring this issue to the developers\u0027 attention.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIn other words, are you in a similar (mod-wise) situation to one of those described above?\u00A0 If so, what are your benchmarks compared to stock game?\u00A0 At what PC specs?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTHAT is what I would like to see in this thread, and would greatly appreciate if the (mostly) irrelevant arguments were kept out, despite the oh-so-sweet urge to comment \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-02T02:36:42Z\u0022 title=\u002205/02/2017 02:36  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 2, 2017\u003C/time\u003E by Tau137\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Bornholio","CreatedById":173101,"CreatedDateTime":"2017-05-03T00:38:13Z","Content":"\n\u003Cp\u003E\nAre you running in Dx11 mode? Make sure its 64bit.\u00A0 (KSP_x64.exe -single-instance -force-d3d11)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d suggest running Memgraph mod.\u00A0 Make sure you learn the hotkeys (alt *) and read its usage \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nLarge part count i move on to using Welding mod to get rid of unneeded part complexity. Again read the \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E for the mod or you will make mistakes.\n\u003C/p\u003E\n"},{"CreatedByName":"Tau137","CreatedById":100466,"CreatedDateTime":"2017-05-08T15:05:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223043013\u0022 data-ipsquote-contentid=\u0022160040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493771893\u0022 data-ipsquote-userid=\u0022173101\u0022 data-ipsquote-username=\u0022Bornholio\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/2/2017 at 7:38 PM, Bornholio said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre you running in Dx11 mode? Make sure its 64bit.\u00A0 (KSP_x64.exe -single-instance -force-d3d11)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d suggest running Memgraph mod.\u00A0 Make sure you learn the hotkeys (alt *) and read its usage \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nLarge part count i move on to using Welding mod to get rid of unneeded part complexity. Again read the \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E for the mod or you will make mistakes.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you for the tips, I will check out Memgraph.\n\u003C/p\u003E\n\u003Cp\u003E\nI always run x64, but not forcing DX11.\u00A0 I should test DX11 and OGL and see if that makes any difference.\n\u003C/p\u003E\n\u003Cp\u003E\nMy main concern is that even utility mods slow the came down in proportion to part count (how clouds can be so much slower on 300 part ship vs 10-part ship?\u00A0 Why it is noticeably slower with just Alarm Clock?) - the rest is kind of self-explanatory, given that any improvement demands some performance sacrifice.\n\u003C/p\u003E\n\u003Cp\u003E\nUboWelding - I use it occasionally, but its limitations (graphical for animated parts, and need to restart the game - and that takes at least 5 minutes with my 2GB mod setup... with the game installed on SSD) make it not ideal for routine tasks, mostly useful for one-of-a-kind space station or IP mission (and those I tend to assemble in space with \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E and Konstruction, and would like to start utilizing GroundContsruction more, but it has one annoying glitch that throws exceptions on part count changes).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-08T15:55:23Z\u0022 title=\u002205/08/2017 03:55  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 8, 2017\u003C/time\u003E by Tau137\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diddly Feelerino","CreatedById":116824,"CreatedDateTime":"2017-05-09T00:50:12Z","Content":"\n\u003Cp\u003E\nHey; just logging to post. I too encountered a similar problem (running KSP 64-bit); when I played last month the game (or a mod) appeared\u00A0to have a memory leak of some sort, but only on the Launchpad. Once you hit the Launch key the FPS returned\u00A0to normal. I also got a significant drop going through the cloud layer in SVT-Scatterer. Was bad enough to make me quit last month.\n\u003C/p\u003E\n\u003Cp\u003E\nAll this on an ASUS G752VS (16GB RAM, 64-bit, I7-1600Q, GTX1070).\n\u003C/p\u003E\n"},{"CreatedByName":"DrLicor","CreatedById":165712,"CreatedDateTime":"2017-05-09T01:55:36Z","Content":"\n\u003Cp\u003E\nJust to give extra information here:\u003Cbr\u003E\nFor me, and several others, DX11 has a higher change on causing graphic glitches than for your game to open in OpenGL mode.\u003Cbr\u003E\nFor \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E/\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E, DX11 sometimes has the behaviour to glitch with the horizon.\u00A0However, the game runs smoother for me with a install of 9.15GB at the moment using DX11.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nAnother thing: KSP isn\u0027t optimised for multicore processing. An i7 is offcourse fast and efficient, but when it has those 8 cores, it won\u0027t do better than a i5 with 4 cores and exact the same hertz. KSP will only use on or 2 cores for the main proccesing and so do most games. A few games are multicore optimized. In case of the ASUS laptop \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/116824-diddly-feelerino/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022116824\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/116824-diddly-feelerino/\u0022 rel=\u0022\u0022\u003E@Diddly Feelerino\u003C/a\u003E\u00A0has, this doesn\u0027t count, since that i7 has 4 cores.\u00A0\u003Cbr\u003E\u003Cbr\u003E\nKSP is a game that\u0027s pulled by RAM and CPU, GPU is only a bit important when running heavy visual mods, but will not be the main reason frames drop, a GTX1050 is even overpowered. A powerfull GPU comes handy with games like Battlefield, Crysis, Total War etc. KSP\u0027s energy goes mostly to calculation stuff.\u003Cbr\u003E\u003Cbr\u003E\nIt\u0027s indeed a pitty that the engine works the way it does,\u00A0that it has to calculate everything per part. But for games like this,\u00A0I don\u0027t see another way I think.\u003Cbr\u003E\nFor now, I\u0027m okay with reloading the game completely for the sake of welding parts together, I grab a coffee, take the dog for a walk or just bring a little visit to the toilet. It helps me to take a break from the game sometimes. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003Cbr\u003E\nAnd most of the time I reuse my launch vehicles either way.\n\u003C/p\u003E\n"},{"CreatedByName":"Diddly Feelerino","CreatedById":116824,"CreatedDateTime":"2017-05-09T02:02:06Z","Content":"\n\u003Cp\u003E\nThanks for the feedback.\u003Cbr\u003E\u003Cbr\u003E\nI figured the CPU might bottleneck performance, but to cause significant lag with a relatively low part count? Not to mention the inexplicable mem leak on Launchpad.\u003Cbr\u003E\u003Cbr\u003E\nI\u0027ll try redownloading the core mods and reinstalling - it\u0027s been a while since I\u0027ve played and maybe the leaks have been sorted.\n\u003C/p\u003E\n"},{"CreatedByName":"Ruedii","CreatedById":57704,"CreatedDateTime":"2017-05-11T03:50:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223041419\u0022 data-ipsquote-contentid=\u0022160040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493663770\u0022 data-ipsquote-userid=\u0022100466\u0022 data-ipsquote-username=\u0022Tau137\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/1/2017 at 2:36 PM, Tau137 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFirst - not applicable, all mods are latest and greatest, compiled for 1.2.2 (the only exception is KJR, 1.2.0).\u00A0 I guess I should have stated that in the first place, but I presumed that to be self-evident (for every self-respecting and at least somewhat experienced KSP player).\n\u003C/p\u003E\n\u003Cp\u003E\nSecond - reasonable assumption, but I cannot localize ONE single mod(s), and there is no garbage in the output log (does not negate your argument completely, but still) - it looks like EVERY SINGLE mod I add creates more problems/slowdown (I can even see slowdown on high-partcount ships with just \u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E(!) installed).\n\u003C/p\u003E\n\u003Cp\u003E\nGC Cycles... does not help me to understand why the performance is so abysmal on my rig, while not being neither graphically nor CPU bound.\u00A0 Surely, if I have a mod that is not optimized and, on every cycle, keeps pulling a lot of info or doing a lot of stuff - that could be a culprit.\u00A0 But how would a visual enhancement mod (textures, clouds, shaders) be so much slower on a large ship compared to a small one (even though the mod has nothing to do with object interaction aka \u0022physics\u0022, and there is a plenty of other objects/vertices to render in the scene, so part count on the vessel should not matter that much - after all, somehow I get better fps flying around \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E compared to flying over the ocean with nothing in sight)?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFirst, I know for a fact you are mistaken on that one.\u00A0 Specifically Vanguard Parachutes is not available for 1.2.2 specifically due to exception errors.\u00A0 There is a complete from-scratch rewrite that I provided a link to.\u003Cbr\u003E\u003Cbr\u003E\nSecond, Things don\u0027t necessarily appear in the output log as far as you can tell.\u00A0 NRE Exceptions and bad call exceptions only appear in the Unity Player.log, not the KSP\u0027s output log, and definately not the Operating System output log.\u003Cbr\u003E\u003Cbr\u003E\nFinally, if you don\u0027t know what GC problems are, then don\u0027t question me about it.\u00A0 GOOGLE IT!\u00A0 I\u0027m not going to explain basic computer concepts to someone.\u00A0 Let\u0027s just say KSP isn\u0027t the only game affected.\u003Cbr\u003E\u003Cbr\u003E\nGC operations are memory-bandwidth bound on the main thread, meaning one CPU will be running at about 1/4-1/2 capacity, shutting down all background activity by the game engine.\u00A0 I can go into detail about Unity\u0027s archaic GC engine but you can find plenty of complaints about that online as well, and even some articles from last (finally) fall promising a fix \u0022soon.\u0022\u00A0 You may notice this is a topic that makes me irate, because I know there is nothing Squad can do about it without paying a fortune to have Unity create a replacement GC at top priority.\u003Cbr\u003E\u003Cbr\u003E\nAnyways, KSP does not support multithreading on all operations, especially with mods.\u00A0 (Many mods are called in manners that create world-freezes this stops all background activity.\u00A0\u00A0 This is something that can only be fixed by the mod developer or a contributor who knows coding if the mod is open source.)\u003Cbr\u003E\u003Cbr\u003E\nAs a note, for the person who is having trouble with Kerbal Alarm Clock, there is one function that can be quite heavy on \u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E that can be fixed.\u00A0 By turning down the update times of certain things in the options for \u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E you can drastically improve performance.\u00A0 I\u0027m thinking of filing a request to put the mod on a timer other than the frame timer to boost performance, and to move as much of it as possible to a helper thread.\u00A0 I need to look up the exact timer call to completely offload it to a helper thread.\n\u003C/p\u003E\n"},{"CreatedByName":"Tau137","CreatedById":100466,"CreatedDateTime":"2017-05-11T15:30:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223052709\u0022 data-ipsquote-contentid=\u0022160040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494474658\u0022 data-ipsquote-userid=\u002257704\u0022 data-ipsquote-username=\u0022Ruedii\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, Ruedii said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFirst, I know for a fact you are mistaken on that one.\u00A0 Specifically Vanguard Parachutes is not available for 1.2.2 specifically due to exception errors.\u00A0 There is a complete from-scratch rewrite that I provided a link to.\u003Cbr\u003E\u003Cbr\u003E\nSecond, Things don\u0027t necessarily appear in the output log as far as you can tell.\u00A0 NRE Exceptions and bad call exceptions only appear in the Unity Player.log, not the KSP\u0027s output log, and definately not the Operating System output log.\u003Cbr\u003E\u003Cbr\u003E\nFinally, if you don\u0027t know what GC problems are, then don\u0027t question me about it.\u00A0 GOOGLE IT!\u00A0 I\u0027m not going to explain basic computer concepts to someone.\u00A0 Let\u0027s just say KSP isn\u0027t the only game affected.\u003Cbr\u003E\u003Cbr\u003E\nGC operations are memory-bandwidth bound on the main thread, meaning one CPU will be running at about 1/4-1/2 capacity, shutting down all background activity by the game engine.\u00A0 I can go into detail about Unity\u0027s archaic GC engine but you can find plenty of complaints about that online as well, and even some articles from last (finally) fall promising a fix \u0022soon.\u0022\u00A0 You may notice this is a topic that makes me irate, because I know there is nothing Squad can do about it without paying a fortune to have Unity create a replacement GC at top priority.\u003Cbr\u003E\u003Cbr\u003E\nAnyways, KSP does not support multithreading on all operations, especially with mods.\u00A0 (Many mods are called in manners that create world-freezes this stops all background activity.\u00A0\u00A0 This is something that can only be fixed by the mod developer or a contributor who knows coding if the mod is open source.)\u003Cbr\u003E\u003Cbr\u003E\nAs a note, for the person who is having trouble with Kerbal Alarm Clock, there is one function that can be quite heavy on \u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E that can be fixed.\u00A0 By turning down the update times of certain things in the options for \u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E you can drastically improve performance.\u00A0 I\u0027m thinking of filing a request to put the mod on a timer other than the frame timer to boost performance, and to move as much of it as possible to a helper thread.\u00A0 I need to look up the exact timer call to completely offload it to a helper thread.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n1. Irrelevant, as it does work.\u00A0 Also irrelevant because it was not used it the test cases presented.\n\u003C/p\u003E\n\u003Cp\u003E\n2. Yep, never argued that.\n\u003C/p\u003E\n\u003Cp\u003E\n3. Google!\u00A0 Yes, I never realized it exists, thank you!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E: this one was brought up as an example of a mod that should not be affected by part count, and yet there is a noticeable hit.\u00A0 Same way as \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, in theory, should have a \u0022constant\u0022 (not dependent on part count) performance hit.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ELet\u0027s consider this simple example: stock vs. visual mods (\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u002BKopernicus\u002BSVT), huge craft.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nLet\u0027s further simplify that each frame game spends most of cycles on graphics and physics.\n\u003C/p\u003E\n\u003Cp\u003E\nSTOCK: 50fps, 20ms per frame. P\u002BGc\u002BGu=20 (Physics, Graphics-craft, Graphics-universe)\n\u003C/p\u003E\n\u003Cp\u003E\nMOD: 20fps, 50ms per frame. P\u002BGc\u002BMGu=50 (modded graphics - universe).\u00A0 Result: \u003Cstrong\u003EMGu \u0026gt;= 30ms\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ENow let\u0027s fly the simplest smallest craft possible (P2\u002BGc2 \u0026lt;\u0026lt; P\u002BGc):\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nMOD: 60fps, \u0026lt;17ms per frame.\u00A0 P2\u002BG2 \u002B MGu = 17.\u00A0\u003Cstrong\u003E Result: MGu \u0026lt;= 17ms\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EAnyone else noticed an inconsistency?\u00A0 Somehow the mod graphics (terrain \u0026amp; clouds) work twice as slow for 300 part ship vs. 10-part ship!\u00A0 Or we have to assume that somehow Physics depends on the presence of modded graphics.\u00A0 Either - or, as these mods do not touch physics or craft rendering.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSome might say (or direct me to Google) something regarding 3D rendering and how it is done and why computational complexity of drawing an object within a background scene would be affect by the way background is drawn.\u00A0 True, but only partially, and most importantly.... absolutely irrelevant to the argument, as \u003Cstrong\u003Ethe performance problem remains even in map view with almost nothing to render!\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nNow, what else have we missed so far that can explain this?\u00A0 Perhaps collisions (Kopernicus), that could explain it.... except it does not, because the same behavior is evident without Kopernicus, with just \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, or with a bunch of mods that have nothing to do with part count whatsoever, and yet each adding a bit of lag on per-part basis!\u00A0 I do not have fps numbers handy for these - I might have time to get those, too, and I encourage everyone to test this \u0022assumption\u0022 themselves!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cu\u003EConclusion\u003C/u\u003E: physics (or something else related to part-count) is somehow affected by presence of graphics (and other) mods.\u00A0 \u003Cu\u003EThis means that something out of these mods is being called in each physics processing iteration!\u003C/u\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnd THAT is the problem I am trying to bring up here.\u003Cstrong\u003E\u00A0 \u003C/strong\u003ESo, instead of misdirecting and implying my utter incompetency (it is only partial, not total), would you be willing to run similar tests and present results here?\u00A0 The purpose is to either:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Prove that the problem is specific to my computer and vast majority of users are not affected.\u00A0 If that is the case, I\u0027ll gladly admit that it is \u0022my\u0022 problem, and will shut up.\n\u003C/p\u003E\n\u003Cp\u003E\n2. Bring more \u003Cstrong\u003Efactual \u003C/strong\u003Econfirmation that the problem does exist.\u00A0 Perhaps it is Squad coders\u0027 mistake, perhaps it is an inherent Unity issue - I do not know (again, Unity and C# programming is definitely not my strong sides), but that is even more reason to get devs\u0027 attention - in the interest of all players, especially those who actually do extensive career and exploration sessions and build ships and stations with hundreds of parts, those who love the game and want to make it better - even if all they are able to put in the pot is a few tests and observations.\n\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2017-05-11T16:38:37Z","Content":"\n\u003Cp\u003E\nKSP being a Unity based game, makes use of whatever libraries Unity includes. One such library is \u003Ca href=\u0022https://blogs.unity3d.com/2014/07/08/high-performance-physics-in-unity-5/\u0022 rel=\u0022external nofollow\u0022\u003EPhysX\u003C/a\u003E (now version 3.3) that devolves to a nVidia GPU most of the physics calculations. The more parts with a vessel, the more physics calculations per frame. A GPU is actually a very powerful parallel computing unit, using it to save CPU cycles is generally a good choice; however KSP is a lot heavier than other games when it comes to physics, having lots more interactions among parts (or with ground, water, atmosphere). The result is the GPU is often loaded way more than advisable and, concurrently with its true graphical tasks, can become the real bottleneck.\n\u003C/p\u003E\n\u003Cp\u003E\nI do use \u003Ca href=\u0022https://technet.microsoft.com/it-it/sysinternals/processexplorer.aspx\u0022 rel=\u0022external nofollow\u0022\u003EProcess Explorer\u003C/a\u003E to keep track of resource usage while KSP is running (and even when not). One good feature of Process Explorer over other similar apps (e.g. Task Manager) is to show the % of GPU used in real time by any application, not only of CPU, RAM, or else. I have a nVidia GPU and guess what? when KSP is running with even a low partcount vessel, even without anything graphical to show (as when orbiting without looking at any object) the GPU% is at least double than the CPU%. Proof without doubt of the GPU being effectively charged with those PhysX calcs, not the CPU.\n\u003C/p\u003E\n\u003Cp\u003E\nOn the other side, KSP doesn\u0027t use more than one CPU core unless it can make use of different threads (like when dealing with more vessels). With that same app is fairly easy to check each one of the threads started by KSP; there is always one that makes up the largest part (by far) of all CPU cycles (should it alone arrive to a CPU% = 100% / CPU cores, it would create lag); add-ons also add to that thread unless effectively using multithreading.\n\u003C/p\u003E\n\u003Cp\u003E\nIndeed, one could think there are some inherent Unity issues when CPU or GPU usage is not optimized. Maybe Squad could find new ways to improve over the basic multithreading Unity offers, or to reduce Physics computations when not really required, or else.\n\u003C/p\u003E\n"},{"CreatedByName":"Ruedii","CreatedById":57704,"CreatedDateTime":"2017-05-13T07:07:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223053285\u0022 data-ipsquote-contentid=\u0022160040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494516647\u0022 data-ipsquote-userid=\u0022100466\u0022 data-ipsquote-username=\u0022Tau137\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/11/2017 at 11:30 AM, Tau137 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n1. Irrelevant, as it does work.\u00A0 Also irrelevant because it was not used it the test cases presented.\n\u003C/p\u003E\n\u003Cp\u003E\n2. Yep, never argued that.\n\u003C/p\u003E\n\u003Cp\u003E\n3. Google!\u00A0 Yes, I never realized it exists, thank you!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E: this one was brought up as an example of a mod that should not be affected by part count, and yet there is a noticeable hit.\u00A0 Same way as \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, in theory, should have a \u0022constant\u0022 (not dependent on part count) performance hit.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ELet\u0027s consider this simple example: stock vs. visual mods (\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u002BKopernicus\u002BSVT), huge craft.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nLet\u0027s further simplify that each frame game spends most of cycles on graphics and physics.\n\u003C/p\u003E\n\u003Cp\u003E\nSTOCK: 50fps, 20ms per frame. P\u002BGc\u002BGu=20 (Physics, Graphics-craft, Graphics-universe)\n\u003C/p\u003E\n\u003Cp\u003E\nMOD: 20fps, 50ms per frame. P\u002BGc\u002BMGu=50 (modded graphics - universe).\u00A0 Result: \u003Cstrong\u003EMGu \u0026gt;= 30ms\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ENow let\u0027s fly the simplest smallest craft possible (P2\u002BGc2 \u0026lt;\u0026lt; P\u002BGc):\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nMOD: 60fps, \u0026lt;17ms per frame.\u00A0 P2\u002BG2 \u002B MGu = 17.\u00A0\u003Cstrong\u003E Result: MGu \u0026lt;= 17ms\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EAnyone else noticed an inconsistency?\u00A0 Somehow the mod graphics (terrain \u0026amp; clouds) work twice as slow for 300 part ship vs. 10-part ship!\u00A0 Or we have to assume that somehow Physics depends on the presence of modded graphics.\u00A0 Either - or, as these mods do not touch physics or craft rendering.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSome might say (or direct me to Google) something regarding 3D rendering and how it is done and why computational complexity of drawing an object within a background scene would be affect by the way background is drawn.\u00A0 True, but only partially, and most importantly.... absolutely irrelevant to the argument, as \u003Cstrong\u003Ethe performance problem remains even in map view with almost nothing to render!\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nNow, what else have we missed so far that can explain this?\u00A0 Perhaps collisions (Kopernicus), that could explain it.... except it does not, because the same behavior is evident without Kopernicus, with just \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, or with a bunch of mods that have nothing to do with part count whatsoever, and yet each adding a bit of lag on per-part basis!\u00A0 I do not have fps numbers handy for these - I might have time to get those, too, and I encourage everyone to test this \u0022assumption\u0022 themselves!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cu\u003EConclusion\u003C/u\u003E: physics (or something else related to part-count) is somehow affected by presence of graphics (and other) mods.\u00A0 \u003Cu\u003EThis means that something out of these mods is being called in each physics processing iteration!\u003C/u\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnd THAT is the problem I am trying to bring up here.\u003Cstrong\u003E\u00A0 \u003C/strong\u003ESo, instead of misdirecting and implying my utter incompetency (it is only partial, not total), would you be willing to run similar tests and present results here?\u00A0 The purpose is to either:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Prove that the problem is specific to my computer and vast majority of users are not affected.\u00A0 If that is the case, I\u0027ll gladly admit that it is \u0022my\u0022 problem, and will shut up.\n\u003C/p\u003E\n\u003Cp\u003E\n2. Bring more \u003Cstrong\u003Efactual \u003C/strong\u003Econfirmation that the problem does exist.\u00A0 Perhaps it is Squad coders\u0027 mistake, perhaps it is an inherent Unity issue - I do not know (again, Unity and C# programming is definitely not my strong sides), but that is even more reason to get devs\u0027 attention - in the interest of all players, especially those who actually do extensive career and exploration sessions and build ships and stations with hundreds of parts, those who love the game and want to make it better - even if all they are able to put in the pot is a few tests and observations.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHow about you not question my competence to begin with?\u00A0 I only replied at the start to be nice.\u003Cbr\u003E\u003Cbr\u003E\nThe probem IS in Unity, and if you search Unity GC issues you would find thousands of articles on it.\u003Cbr\u003E\u003Cbr\u003E\nInstead of trying to accept a person\u0027s help you are picking a fight with them, WAY TO GO!\n\u003C/p\u003E\n"},{"CreatedByName":"Tau137","CreatedById":100466,"CreatedDateTime":"2017-05-13T21:58:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223055119\u0022 data-ipsquote-contentid=\u0022160040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494659230\u0022 data-ipsquote-userid=\u002257704\u0022 data-ipsquote-username=\u0022Ruedii\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, Ruedii said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow about you not question my competence to begin with?\u00A0 I only replied at the start to be nice.\u003Cbr\u003E\u003Cbr\u003E\nThe probem IS in Unity, and if you search Unity GC issues you would find thousands of articles on it.\u003Cbr\u003E\u003Cbr\u003E\nInstead of trying to accept a person\u0027s help you are picking a fight with them, WAY TO GO!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you for your insightful and extremely informative response, it is greatly appreciated!\n\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2017-05-14T08:14:23Z","Content":"\n\u003Cp\u003E\nUnless all posters show to abide to forum rules from now on (in particular rule 2.2.d. \u0022 Insults and threats, stalking, bullying or any other behavior construed to be of a potentially rude, slanderous, accusatory, combative or otherwise harassing nature to/of another person \u0022), this thread \u003Cspan style=\u0022color:#e67e22;\u0022\u003Eis going to be closed\u003C/span\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nNow, can everybody drop personal attacks and spicy replies?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/100466-tau137/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022100466\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/100466-tau137/\u0022 rel=\u0022\u0022\u003E@Tau137\u003C/a\u003E, you have stated a number of times you intend this thread to collect data about users experience with lag-inducing add-ons. Please note you can\u0027t avoid other users to discuss the method and validity of the idea itself, as indeed ignoring what causes lag or why a system may slow down at times can only give useless readings. Knowledge of the possible factors with anything observed is the basis for building a valid theory, based on scientific grounds. Only once the method to take readings (and isolate possible concurrent factors) is properly defined, data collected following that method will be of value; data \u0022taken in the wild\u0022 may only feed false beliefs about something being wrong. Of course spreading false ideas isn\u0027t welcome on this forum.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you don\u0027t like to have those factors discussed as happened above, then what will come from data collected? Will they be used to pressure modders to improve add-ons while isn\u0027t their fault?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Tau137","CreatedById":100466,"CreatedDateTime":"2017-05-15T17:46:48Z","Content":"\n\u003Cp\u003E\n\u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/93700-diomedea/\u0026amp;do=hovercard\u0022 data-mentionid=\u002293700\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/93700-diomedea/\u0022 rel=\u0022\u0022\u003E@diomedea\u003C/a\u003E Thanks for the voice of reason.\u00A0 On my part, I will try to be less passive-aggressive\u003C/span\u003E.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-15T17:47:33Z\u0022 title=\u002205/15/2017 05:47  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 15, 2017\u003C/time\u003E by Tau137\u003C/strong\u003E\n\u003Cbr\u003Etypo corrected\n\u003C/span\u003E\n"},{"CreatedByName":"Akira_R","CreatedById":117470,"CreatedDateTime":"2017-05-15T18:45:30Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/100466-tau137/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022100466\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/100466-tau137/\u0022 rel=\u0022\u0022\u003E@Tau137\u003C/a\u003EJust a wild theory here.\n\u003C/p\u003E\n\u003Cp\u003E\nSo while the GPU doe the main work of rendering what you see, the CPU still has to tell the GPU what to render and how, from my limited understanding these are draw calls and they can be very CPU intensive and usually make up a fair chunk of the CPU load in a game. My theory is that the added graphical mods increase the number of draw calls, now I know that for a single object if it is affected by multiple lights it will have multiple draw calls for that single object (4 lights 1 object 4 separate draw calls). Based on how KSP handles things I suspect that each part is essentially an object and that maybe the graphical mods are not just increasing the number of draw calls but increasing the number of draw calls \u003Cu\u003Eper part\u003C/u\u003E\u00A0which from my understanding will have a huge impact on performance.\n\u003C/p\u003E\n\u003Cp\u003E\nAnother possible scenario is that with a high part count ship the CPU is already being taxed and the added draw calls from the graphical mods results in a loss of performance, but when you have a low part count ship the CPU is under far less strain and so the added draw calls have little effect on the performance.\n\u003C/p\u003E\n\u003Cp\u003E\nJust spit-balling some ideas here based on my limited understanding of how these things work and applying a little bit of logic. If I am making some wrong assumptions here or if my logic is flawed I would love to here some feedback as to how and why.\n\u003C/p\u003E\n\u003Cp\u003E\nI am at work right now so i can\u0027t give you any performance numbers for my set up but I will see what I can do when I get home\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-15T18:46:38Z\u0022 title=\u002205/15/2017 06:46  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 15, 2017\u003C/time\u003E by Akira_R\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kerbal101","CreatedById":157058,"CreatedDateTime":"2017-05-28T04:01:35Z","Content":"\n\u003Cp\u003E\nThis thread is quite interesting,.. just noticed a fairly-sized asteroid mining station (like 200 parts tops) over at twitch stream from I2ocketGuy lagged on .. 4.2 ghz overclocked 4790K with 970 gtx.\n\u003C/p\u003E\n\u003Cp\u003E\nI suspect the most fps impact is done by part calculations, either physics and/or light. Still, I\u0027ve seen people reporting heavy fps decrease because of .. \u003Ca href=\u0022https://github.com/KSP-RO/RP-0/issues/166\u0022 rel=\u0022external nofollow\u0022\u003EContract mods\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nEitherway, I\u0027ll be following this. There can never be excessive performance.\n\u003C/p\u003E\n\u003Cp\u003E\nFrom my tests in 1.2.2, I know that fairings cause significant performance drops, \u003Cem\u003Ewhen over 10\u003C/em\u003E were present (used instead of caps due to T tolerances). Thats probably because those have complex aerodynamics calculation. Replacing those with regular caps hugely improved fps.\n\u003C/p\u003E\n\u003Cp\u003E\nHere are some more infos:\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/158929-impact-of-physicssignificance-on-part-count-vs-frame-rate/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nconclusions: lights cause fps drop, higher physics delta impacts fps, open ports cause fps drop.\n\u003C/p\u003E\n"},{"CreatedByName":"Ruedii","CreatedById":57704,"CreatedDateTime":"2017-05-28T20:34:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223070712\u0022 data-ipsquote-contentid=\u0022160040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495944095\u0022 data-ipsquote-userid=\u0022157058\u0022 data-ipsquote-username=\u0022Kerbal101\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 hours ago, Kerbal101 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis thread is quite interesting,.. just noticed a fairly-sized asteroid mining station (like 200 parts tops) over at twitch stream from I2ocketGuy lagged on .. 4.2 ghz overclocked 4790K with 970 gtx.\n\u003C/p\u003E\n\u003Cp\u003E\nI suspect the most fps impact is done by part calculations, either physics and/or light. Still, I\u0027ve seen people reporting heavy fps decrease because of .. \u003Ca href=\u0022https://github.com/KSP-RO/RP-0/issues/166\u0022 rel=\u0022external nofollow\u0022\u003EContract mods\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHere are some more infos:\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/158929-impact-of-physicssignificance-on-part-count-vs-frame-rate/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nconclusions: lights cause fps drop, higher physics delta impacts fps, open ports cause fps drop.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, the visual enhancement mods will drastically increase the amount of function done per a light source adjusting your rendered light count (in the settings) to something sane (usually 8 or 16) will often drastically improve performance.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Tau137","CreatedById":100466,"CreatedDateTime":"2017-05-29T17:26:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223071507\u0022 data-ipsquote-contentid=\u0022160040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221496003697\u0022 data-ipsquote-userid=\u002257704\u0022 data-ipsquote-username=\u0022Ruedii\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 hours ago, Ruedii said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYes, the visual enhancement mods will drastically increase the amount of function done per a light source adjusting your rendered light count (in the settings) to something sane (usually 8 or 16) will often drastically improve performance.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is interesting, but, presumably, graphics (local lighting etc.) would not be calculated in map mode (which is clearly seen in testing, when \u0022time per frame\u0022 decreases somewhat, but not enough).\u00A0 And I do not believe I saw any difference between stock settings (8 light count?) in 1.2.9 and my regular setup with that settings maximized (1.2.2).\n\u003C/p\u003E\n\u003Cp\u003E\nSo the core of the problem is not rendering or GPU, it is how mods calls are made (apparently quite irrationally, somehow linked with part count and physics where they should not be).\u00A0 Probably need to make a test with all the mods I can find that have nothing to do with physics or graphics.... just need to yet again overcome this dreadful combination of feelings I have towards KSP - addiction, adornment and frustration.... probably soon, with 1.3 once a reasonable number of mods is updated.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso would like to thank everyone who looked into this thread and started thinking about it (and/or testing) - perhaps we will get something (performance improvement) out of it, eventually, in future versions, assuming Squad ever resumes focusing the development towards more depth and refinement rather than breadth and accessibility.\n\u003C/p\u003E\n"},{"CreatedByName":"Urses","CreatedById":175990,"CreatedDateTime":"2017-05-29T18:19:47Z","Content":"\n\u003Cp\u003E\nFor problem with lights it was a diskussion for one month\u00A0on many part treads. The most problems as mentioned was that the Lights from orbital crafts reached the surface of planets and lit them up. It was a work around found to depricate this behaivor but it means impo that this will be a computing in behind the scenes for shadow fall and illuminating. It would be not visible but the processing is stil there.\n\u003C/p\u003E\n\u003Cp\u003E\nFor grafik behaivour it was a glitch that calculated a oceanic surface on every craft but was only visible under specific circumstances like Kerbal EVA and a specific view angle. It was narrowed\u00A0back to Kopernicus and there was a patched .dll.\n\u003C/p\u003E\n\u003Cp\u003E\nAs interested noob i would hereby wink at this treads and gather more information there. I personaly think, and will not insult some wiser heads as mine, this would give a trace for problematic with high part counted ships, if the hidden calculations are present they would be performed for all parts and this will give a heavy hit on performance rates.\n\u003C/p\u003E\n\u003Cp\u003E\nFor me personally the Kopernicus patch helped a lot and after implementation i has a significant performance upgrade.\n\u003C/p\u003E\n\u003Cp\u003E\nHope i could provide some helpful informations.\n\u003C/p\u003E\n\u003Cp\u003E\nFunny Kabooms\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUrses\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-29T18:22:01Z\u0022 title=\u002205/29/2017 06:22  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 29, 2017\u003C/time\u003E by Urses\u003C/strong\u003E\n\u003C/span\u003E\n"}]}