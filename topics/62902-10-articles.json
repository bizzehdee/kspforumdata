{"TopicId":62902,"ForumId":36,"TopicTitle":"[1.8.x to 1.12.x] kRPC: Remote Procedure Call Server (v0.5.1, 2nd March 2023)","CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2014-02-11T20:00:32Z","PageNum":10,"Articles":[{"CreatedByName":"Lorentz","CreatedById":123879,"CreatedDateTime":"2015-07-10T17:20:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022apdapreturns\u0022 data-cite=\u0022apdapreturns\u0022\u003E\u003Cdiv\u003EIs there any way to use this with C or will I have to integrate with Python?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn principle this should be straightforward - you just need a sockets library and the protocol buffers library. Then its just a matter of building the message to send over TCP to the server and wait for a reply, or am I missing something?\u003C/p\u003E\u003Cp\u003Eedit: by \u0022this\u0022 I assumed you meant the krpc addon in general (not the krpc-toolkit).\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-07-11T09:20:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022apdapreturns\u0022 data-cite=\u0022apdapreturns\u0022\u003E\u003Cdiv\u003EIs there any way to use this with C or will I have to integrate with Python?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere is a C\u002B\u002B client here: \u003Ca href=\u0022https://github.com/djungelorm/krpc/issues/142\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/djungelorm/krpc/issues/142\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m also working on merging this client into the main repo (and it will probably be included in the next release) \u003Ca href=\u0022https://github.com/djungelorm/krpc/tree/feature/cpp-client\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/djungelorm/krpc/tree/feature/cpp-client\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Desert-Cow","CreatedById":146776,"CreatedDateTime":"2015-07-19T22:58:38Z","Content":"\n\u003Cp\u003EApologies for the late response, work has been getting in the way lately... but thanks for the help! Your response resolved my issue and makes sense! Also appreciate all the time and effort you have put into this MOD, really opens the door to do some really cool stuff in KSP. Plus it\u0027s a fun platform to learn python and a good use for my raspberry pi.\u003C/p\u003E\u003Cp\u003EI\u0027m currently working on a Mun landing script and one of the critical data streams is the ships vertical speed. The following code is attempting to setup a stream to access my vertical speed and is based off the syntax used to setup the altitude (which is also from the flight class). Unfortunately the current setup always returns 0 for my vertical speed. I belive i am making the correct class call but not sure why it\u0027s always zero... \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EVertical_Speed = conn.add_stream(getattr, vessel.flight(), \u0027vertical_speed\u0027)\u003Cbr\u003E\u003Cbr\u003Eprint (\u0027\\nVertical Speed = %d\u0027 % Vertical_Speed())\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThanks,\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-07-30T14:44:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Desert-Cow\u0022 data-cite=\u0022Desert-Cow\u0022\u003E\u003Cdiv\u003EApologies for the late response, work has been getting in the way lately... but thanks for the help! Your response resolved my issue and makes sense! Also appreciate all the time and effort you have put into this MOD, really opens the door to do some really cool stuff in KSP. Plus it\u0027s a fun platform to learn python and a good use for my raspberry pi.\u003Cp\u003EI\u0027m currently working on a Mun landing script and one of the critical data streams is the ships vertical speed. The following code is attempting to setup a stream to access my vertical speed and is based off the syntax used to setup the altitude (which is also from the flight class). Unfortunately the current setup always returns 0 for my vertical speed. I belive i am making the correct class call but not sure why it\u0027s always zero... \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EVertical_Speed = conn.add_stream(getattr, vessel.flight(), \u0027vertical_speed\u0027)\u003Cbr\u003E\u003Cbr\u003Eprint (\u0027\\nVertical Speed = %d\u0027 % Vertical_Speed())\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThanks,\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry for the slow response! It returns zero because the reference frame you are using moves with the vessel (by default vessel.flight() uses reference frame vessel.reference_frame). What you want is a reference frame that is fixed relative to the surface under the vessel, i.e. vessel.orbit.body.reference_frame\u003C/p\u003E\u003Cp\u003EThe following should do what you want:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eref = vessel.orbit.body.reference_frame\u003Cbr\u003EVertical_Speed = conn.add_stream(getattr, vessel.flight(ref), \u0027vertical_speed\u0027)\u003Cbr\u003E\u003Cbr\u003Eprint (\u0027\\nVertical Speed = %d\u0027 % Vertical_Speed())\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-30T14:55:49Z\u0022 title=\u002207/30/2015 02:55  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 30, 2015\u003C/time\u003E by djungelorm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stevehead","CreatedById":137745,"CreatedDateTime":"2015-08-01T05:53:14Z","Content":"\n\u003Cp\u003EI was trying to write an auto-launch script for the Saturn V in RSS/RO with kOS, but the steering autopilot did not work since the rocket receives its control through engine gimbals instead of reaction wheels (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/68089?p=2093222\u0026amp;viewfull=1#post2093222\u0022 rel=\u0022external nofollow\u0022\u003Esee this post on the kOS forums\u003C/a\u003E). I re-wrote the launch script as a python script for kRPC and I was having the same issue. I saw that kRPC borrows from other mods such as kOS for the autopilot coding, so it seems kRPC has the same problem as kOS regarding steering control for rockets that do not use reaction wheels primarily for control.\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-08-02T12:10:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stevehead\u0022 data-cite=\u0022stevehead\u0022\u003E\u003Cdiv\u003EI was trying to write an auto-launch script for the Saturn V in RSS/RO with kOS, but the steering autopilot did not work since the rocket receives its control through engine gimbals instead of reaction wheels (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/68089?p=2093222\u0026amp;viewfull=1#post2093222\u0022 rel=\u0022external nofollow\u0022\u003Esee this post on the kOS forums\u003C/a\u003E). I re-wrote the launch script as a python script for kRPC and I was having the same issue. I saw that kRPC borrows from other mods such as kOS for the autopilot coding, so it seems kRPC has the same problem as kOS regarding steering control for rockets that do not use reaction wheels primarily for control.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m actually in the process of rewriting the autopilot code to use a PID controller (details here \u003Ca href=\u0022https://github.com/djungelorm/krpc/issues/75\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/djungelorm/krpc/issues/75\u003C/a\u003E), and will be included in the next release. Should hopefully resolve this issue, but thanks for bringing this to my attention. The current autopilot was indeed adapted from kOS/MechJeb/etc.\u003C/p\u003E\n"},{"CreatedByName":"stevehead","CreatedById":137745,"CreatedDateTime":"2015-08-02T16:53:32Z","Content":"\n\u003Cp\u003EAwesome! I look forward to it. Keep up the good work! I try to use kOS because it\u0027s more \u0022Kerbalish\u0022, but I end up going back to kRPC: I prefer to use a language that I actually know well (and is complete), plus I\u0027m not restricted to just in-game resources and can use external libraries like any real program.\u003C/p\u003E\n"},{"CreatedByName":"Agsom","CreatedById":149235,"CreatedDateTime":"2015-08-03T03:54:38Z","Content":"\n\u003Cp\u003EIs there a way to send commands to my vessel using kRPC when I lose (RemoteTech) connection?. I am trying to use kRPC as an \u0022on-board\u0022 computer to put my satellite network in orbit but when I lose connection my program stops executing. For my particular case, when I don\u0027t have a connection I would like to be able to execute (kRPC) programs but still be unable to control my vessel from the keyboard. Is there some simple way to achieve this?\u003C/p\u003E\u003Cp\u003EBTW, great mod. I\u0027m trying to make my own kRPC client using my own favorite language: Common Lisp \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-08-03T11:22:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Agsom\u0022 data-cite=\u0022Agsom\u0022\u003E\u003Cdiv\u003EIs there a way to send commands to my vessel using kRPC when I lose (RemoteTech) connection?. I am trying to use kRPC as an \u0022on-board\u0022 computer to put my satellite network in orbit but when I lose connection my program stops executing. For my particular case, when I don\u0027t have a connection I would like to be able to execute (kRPC) programs but still be unable to control my vessel from the keyboard. Is there some simple way to achieve this?\u003Cp\u003EBTW, great mod. I\u0027m trying to make my own kRPC client using my own favorite language: Common Lisp \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOoops... looks like I broke the RemoteTech integration slightly in 0.1.10. The intended behaviour is indeed for your scripts to still work if the connection is lost -- and if you want your script to stop working you can always check vessel.comms.has_connection. I\u0027ll fix this and a get a new release out soon as I can!\u003C/p\u003E\n"},{"CreatedByName":"Agsom","CreatedById":149235,"CreatedDateTime":"2015-08-04T03:22:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022djungelorm\u0022 data-cite=\u0022djungelorm\u0022\u003E\u003Cdiv\u003EOoops... looks like I broke the RemoteTech integration slightly in 0.1.10. The intended behaviour is indeed for your scripts to still work if the connection is lost -- and if you want your script to stop working you can always check vessel.comms.has_connection. I\u0027ll fix this and a get a new release out soon as I can!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUpon further testing... everything seems to work fine when I don\u0027t have connection except the throttle. I don\u0027t know, maybe it\u0027s a conflict with another of my mods. I will try to test it with just kRPC \u002B RemoteTech\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-08-04T13:14:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Agsom\u0022 data-cite=\u0022Agsom\u0022\u003E\u003Cdiv\u003EUpon further testing... everything seems to work fine when I don\u0027t have connection except the throttle. I don\u0027t know, maybe it\u0027s a conflict with another of my mods. I will try to test it with just kRPC \u002B RemoteTech\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah I\u0027m seeing that throttle behaviour too with just kRPC and RemoteTech. It looks like setting the throttle using FlightInputHandler.state.mainThrottle is disabled by RemoteTech.\u003C/p\u003E\u003Cp\u003EI also found another issue with control inputs: getting the values of the roll/pitch/yaw inputs doesn\u0027t return what\u0027s shown on the HUD. It just returns what was set using kRPC.\u003C/p\u003E\n"},{"CreatedByName":"TheHolm","CreatedById":100460,"CreatedDateTime":"2015-08-05T05:06:26Z","Content":"\n\u003Cp\u003EI\u0027m trying to get surface velocity vector. I can not find any direct way to get it. Best I managed was\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Erefframe = vessel.orbit.body.reference_frame\u003Cbr\u003Esurface_ref = vessel.surface_reference_frame\u003Cbr\u003Ev_vector = conn.space_center.transform_direction(vessel.velocity(refframe),refframe,surface_ref)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut this method is really inaccurate around around ground altitude, probably due to rounding. \u003C/p\u003E\u003Cp\u003EIs there better way?\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-08-05T16:28:34Z","Content":"\n\u003Cp\u003EI think that is the most direct way. I tried it out the following code for a plane flying low around KSC, and it returns an accurate vector. What situation is causing you to get poor results?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eimport krpc\u003Cbr\u003Eimport time\u003Cbr\u003Eimport sys\u003Cbr\u003Eimport numpy as np\u003Cbr\u003E\u003Cbr\u003Econn = krpc.connect()\u003Cbr\u003Evessel = conn.space_center.active_vessel\u003Cbr\u003E\u003Cbr\u003Ewhile True:\u003Cbr\u003E\u003Cbr\u003E    refframe = vessel.orbit.body.reference_frame\u003Cbr\u003E    surface_ref = vessel.surface_reference_frame\u003Cbr\u003E    v_vector = conn.space_center.transform_direction(vessel.velocity(refframe),refframe,surface_ref)\u003Cbr\u003E\u003Cbr\u003E    conn.space_center.clear_drawing()\u003Cbr\u003E    conn.space_center.draw_line((0,0,0), v_vector, surface_ref, (1,0,0))\u003Cbr\u003E\u003Cbr\u003E    print \u0027(%\u002B.4f, %\u002B.4f, %\u002B.4f)\u0027 % v_vector, \u0027%\u002B.4f\u0027 % np.linalg.norm(v_vector)\u003Cbr\u003E    time.sleep(0.1)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EResults:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E(\u002B52.1619, \u002B181.1078, \u002B142.7503) \u002B236.4287\u003Cbr\u003E(\u002B52.1747, \u002B181.1405, \u002B142.7724) \u002B236.4699\u003Cbr\u003E(\u002B52.1794, \u002B181.1772, \u002B142.7983) \u002B236.5148\u003Cbr\u003E(\u002B52.1910, \u002B181.2066, \u002B142.8070) \u002B236.5451\u003Cbr\u003E(\u002B52.2081, \u002B181.2417, \u002B142.8388) \u002B236.5949\u003Cbr\u003E...\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EVersion 0.1.11 has been released!\u003C/p\u003E\u003Cp\u003EDownload link: \u003Ca href=\u0022https://kerbalstuff.com/mod/636/kRPC...0Call%20Server\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://kerbalstuff.com/mod/636/kRPC...0Call%20Server\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe main changes are:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EAdded a Lua client\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ERewritten the autpilot to use a PID controller, which can be manually tuned\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe active vessel is settable (you can use this to switch vessels)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAdded functions to launch new vessels from the VAB/SPH\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAdded more thermal properties from the improved heating model in KSP 1.0.4\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESupport for FAR 0.15\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFix bug setting the throttle with RemoteTech enabled and no connection\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEnjoy!\u003C/p\u003E\n"},{"CreatedByName":"martin","CreatedById":1218,"CreatedDateTime":"2015-08-05T17:36:58Z","Content":"\n\u003Cp\u003EI\u0027ve been fiddling with using kRPC recently, trying to use it from a C# program. I\u0027ve hit a bit of a brick wall with property getters and setters.\u003C/p\u003E\u003Cp\u003EFor example, the GetServices call tells me this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EVessel_set_Name\u003Cbr\u003E   Class.Property.Set(SpaceCenter.Vessel,Name)\u003Cbr\u003E   ParameterType(0).Class(SpaceCenter.Vessel)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo according to this, setting the name doesn\u0027t take a name parameter. This seems to be a problem with all property setters, including rather important ones like set throttle!\u003C/p\u003E\u003Cp\u003EWhere do I pass in the parameter to set this property to?\u003C/p\u003E\u003Cp\u003EJust for reference, here\u0027s my current test code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//KRPC.cs\u003Cbr\u003Einternal byte[] RawRequest(string name, string service, params Argument[] args)\u003Cbr\u003E{\u003Cbr\u003E  Request r = new Request\u003Cbr\u003E  {\u003Cbr\u003E    Procedure = name,\u003Cbr\u003E    Service = service,\u003Cbr\u003E    Arguments = args\u003Cbr\u003E  };\u003Cbr\u003E\u003Cbr\u003E  Serializer.SerializeWithLengthPrefix(_rpcStream, r, PrefixStyle.Base128);\u003Cbr\u003E\u003Cbr\u003E  var response = Serializer.DeserializeWithLengthPrefix\u0026lt;Response\u0026gt;(_rpcStream, PrefixStyle.Base128);\u003Cbr\u003E\u003Cbr\u003E  if (response.Error != null)\u003Cbr\u003E    throw new RpcException(response.Error);\u003Cbr\u003E\u003Cbr\u003E  return response.ReturnValue;\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E//Vessel.cs\u003Cbr\u003Epublic string Name\u003Cbr\u003E{\u003Cbr\u003E  set\u003Cbr\u003E  {\u003Cbr\u003E    Rpc.RawRequest(\u0022Vessel_set_Name\u0022, \u0022SpaceCenter\u0022, Argument.Create(0, this)); // \u0026lt;-- Encoding \u0022this\u0022 as an argument simply passes back exactly whatever byte array was received from the server when this proxy object was created\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022djungelorm\u0022 data-cite=\u0022djungelorm\u0022\u003E\u003Cdiv\u003EVersion 0.1.11 has been released!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt looks like this version hasn\u0027t made it onto CKAN yet \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-08-05T21:15:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022martin\u0022 data-cite=\u0022martin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EWhere do I pass in the parameter to set this property to?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EVessel_set_Name takes two parameters, the first is of type int (and is the id of the remote object) and the second is of type string (the name). So you probably want something like:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic string Name {\u003Cbr\u003E    set {\u003Cbr\u003E        Rpc.RawRequest(\u0022Vessel_set_Name\u0022, \u0022SpaceCenter\u0022, Argument.Create(0, this), Argument.Create(1, value));\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EGetServices should return the following information for Vessel_set_Name (the following is output by a python script I use to generate the documentation). This shows the two parameters, and the attributes that indicates that although the first parameter is an int, it\u0027s actually a reference to an object (rather than just being a number). There is no attribute for the string parameter as it\u0027s simply a string.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u0022Vessel_set_Name\u0022: {\u003Cbr\u003E    \u0022parameters\u0022: [\u003Cbr\u003E        {\u003Cbr\u003E            \u0022default_argument\u0022: null,\u003Cbr\u003E            \u0022name\u0022: \u0022this\u0022,\u003Cbr\u003E            \u0022type\u0022: \u0022uint64\u0022\u003Cbr\u003E        },\u003Cbr\u003E        {\u003Cbr\u003E            \u0022default_argument\u0022: null,\u003Cbr\u003E            \u0022name\u0022: \u0022value\u0022,\u003Cbr\u003E            \u0022type\u0022: \u0022string\u0022\u003Cbr\u003E        }\u003Cbr\u003E    ],\u003Cbr\u003E    \u0022return_type\u0022: \u0022\u0022,\u003Cbr\u003E    \u0022attributes\u0022: [\u003Cbr\u003E        \u0022Class.Property.Set(SpaceCenter.Vessel,Name)\u0022,\u003Cbr\u003E        \u0022ParameterType(0).Class(SpaceCenter.Vessel)\u0022\u003Cbr\u003E    ]\u003Cbr\u003E},\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIt looks like this version hasn\u0027t made it onto CKAN yet \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s up on KerbalStuff so is probably just taking some time to update.\u003C/p\u003E\n"},{"CreatedByName":"martin","CreatedById":1218,"CreatedDateTime":"2015-08-06T01:58:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022djungelorm\u0022 data-cite=\u0022djungelorm\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EGetServices should return the following information for Vessel_set_Name...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAha - I was looking at the attributes, not the parameters. Oops!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022djungelorm\u0022 data-cite=\u0022djungelorm\u0022\u003E\u003Cdiv\u003Eyou probably want something like:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic string Name {\u003Cbr\u003E    set {\u003Cbr\u003E        Rpc.RawRequest(\u0022Vessel_set_Name\u0022, \u0022SpaceCenter\u0022, Argument.Create(0, this), Argument.Create(1, value));\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA reasonable guess, but it doesn\u0027t quite encode things correctly. Could you point me to the place within the server that encodes/decodes these values, I\u0027ll tear out that code and reuse it myself \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-08-06T09:20:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022martin\u0022 data-cite=\u0022martin\u0022\u003E\u003Cdiv\u003EA reasonable guess, but it doesn\u0027t quite encode things correctly. Could you point me to the place within the server that encodes/decodes these values, I\u0027ll tear out that code and reuse it myself \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI use this library to do all the low-level protocol buffer encoding: \u003Ca href=\u0022https://github.com/jskeet/protobuf-csharp-port\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/jskeet/protobuf-csharp-port\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe server code to decode arguments is here: \u003Ca href=\u0022https://github.com/djungelorm/krpc/blob/master/src/kRPC/Service/Services.cs#L111\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/djungelorm/krpc/blob/master/src/kRPC/Service/Services.cs#L111\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnd to encode them is here: \u003Ca href=\u0022https://github.com/djungelorm/krpc/blob/master/src/kRPC/Service/Services.cs#L238\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/djungelorm/krpc/blob/master/src/kRPC/Service/Services.cs#L238\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThis code also uses some utility methods, which can be found here: \u003Ca href=\u0022https://github.com/djungelorm/krpc/blob/master/src/kRPC/Utils/ProtocolBuffers.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/djungelorm/krpc/blob/master/src/kRPC/Utils/ProtocolBuffers.cs\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHope that helps!\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIt\u0027s up on KerbalStuff so is probably just taking some time to update.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELooks like there is an issue with KerbalStuff/CKAN... working to fix it!\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2015-08-08T14:19:23Z","Content":"\n\u003Cp\u003EA tiny bug which hopefully can easily be reproduced: I have two kRPC buttons.\u003C/p\u003E\n"},{"CreatedByName":"Dre4dW0rm","CreatedById":91550,"CreatedDateTime":"2015-09-05T23:40:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022djungelorm\u0022 data-cite=\u0022djungelorm\u0022\u003E\u003Cdiv\u003EValid concerns! I\u0027ve updated the default configuration to make it more secure. It now only accepts connections from the local machine, and uses port 50000 by default.\u003Cp\u003EWith these settings the outside world shouldn\u0027t be able to connect to the server. (I\u0027m not a network security expert, but I\u0027m fairly certain about this!)\u003C/p\u003E\u003Cp\u003EAssuming you have a standard home network setup (a router that does NAT to connect to the internet) the outside world will only be able to connect if both of the following are true:\u003C/p\u003E\u003Cp\u003E1) your router is configured to \u0022port forward\u0022 the port that the server listens on (home routers usually come preconfigured not to do this anyway)\u003C/p\u003E\u003Cp\u003E2) the server is configured to accept connections from any IP address\u003C/p\u003E\u003Cp\u003EAlso, port 50000 is within the range of port numbers used for private/temporary use. If you\u0027re really worried, you can change this to anything in the range of 1024-65535 for a bit of security through obscurity \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EEnforcement of these settings for incoming connections (if they do get through the port forwarding on your router) is done using C#\u0027s System.Net.Sockets.TcpListener class. So I\u0027m relying on the security of Microsoft\u0027s implementation of the C# libraries rather than any of my code \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIf you do decide to use it over the wider internet, I don\u0027t think doing so is particularly dangerous. All the data received over the connection is passed through \u003Ca href=\u0022https://code.google.com/p/protobuf-csharp-port/\u0022 rel=\u0022external nofollow\u0022\u003Ethis protocol buffers library\u003C/a\u003E. If any malformed messages are received, an exception is generated, and the RPC server returns an error message. Although, of course, use it over the internet at your own risk!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, if you\u0027re checking for IP after connection has been made it\u0027s too late. Either you have to bind to 127.0.0.1 to make it local only, and not to \u0027any\u0027 local port, or you have to validate a lot more than just the IP.\u003C/p\u003E\u003Cp\u003EAlso, I think you don\u0027t really have to worry much about the security in this case anyway, as majority of the use cases are in LAN only, and if there\u0027s an intruder/malware/spyware/trojan already in LAN, then it\u0027s also too late, and your software sec is the least concern for the victim.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-05T23:46:20Z\u0022 title=\u002209/05/2015 11:46  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 5, 2015\u003C/time\u003E by Dre4dW0rm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DwarfPlanetTossing","CreatedById":135484,"CreatedDateTime":"2015-09-06T06:42:19Z","Content":"\n\u003Cp\u003ETrying to talk to KRPC with \u003Ca href=\u0022https://github.com/tanmaykm/ProtoBuf.jl\u0022 rel=\u0022external nofollow\u0022\u003EProtoBuf.jl\u003C/a\u003E in \u003Ca href=\u0022http://julialang.org/\u0022 rel=\u0022external nofollow\u0022\u003EJulia\u003C/a\u003E, and was about to decode a GetStatus request, but when I tried to take on a GetServices request (which is much longer the the length that can be described with UInt8), I\u0027m wasn\u0027t sure how to handle the VarInt encoding of the header.\u003C/p\u003E\u003Cp\u003EI also gave \u003Ca href=\u0022https://github.com/stevengj/PyCall.jl\u0022 rel=\u0022external nofollow\u0022\u003EPyCall.jl\u003C/a\u003E to call the krpc interface, and it mostly works, but Streams seem to be a problem because of what seems to be how semantics of generators don\u0027t seem to automatically translate to Julia\u0027s generators (the values don\u0027t update). Would there be interest helping develop Julia RPC client as I am very new to Protocol buffers? There seems to be ProtoBuf.jl functionality that supports this (if you can implement your controller as a subtype of ProtoRpcController), and Julia has good support for metaprogramming that would seem useful for generating an interface, and I hope to use it to make a web interface like that of Telemachus.\u003C/p\u003E\n"},{"CreatedByName":"TeWu","CreatedById":106645,"CreatedDateTime":"2015-09-08T23:39:27Z","Content":"\n\u003Cp\u003EHello,\u003C/p\u003E\u003Cp\u003EI just wanted to inform you that I\u0027ve created Ruby client for kRPC.\u003C/p\u003E\u003Cp\u003EIt\u0027s working pretty smoothly, with the only major feature missing being support for streaming.\u003C/p\u003E\u003Cp\u003EI plan to develop it further, tho I\u0027ll be quite busy with other things for a few weeks.\u003C/p\u003E\u003Cp\u003EFor more see: \u003Ca href=\u0022https://github.com/TeWu/krpc-rb\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/TeWu/krpc-rb\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI haven\u0027t yet a chance, so let me say Thank You djungelorm for creating this amazing mod \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TeWu","CreatedById":106645,"CreatedDateTime":"2015-09-09T12:28:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DwarfPlanetTossing\u0022 data-cite=\u0022DwarfPlanetTossing\u0022\u003E\u003Cdiv\u003ETrying to talk to KRPC with \u003Ca href=\u0022https://github.com/tanmaykm/ProtoBuf.jl\u0022 rel=\u0022external nofollow\u0022\u003EProtoBuf.jl\u003C/a\u003E in \u003Ca href=\u0022http://julialang.org/\u0022 rel=\u0022external nofollow\u0022\u003EJulia\u003C/a\u003E, and was about to decode a GetStatus request, but when I tried to take on a GetServices request (which is much longer the the length that can be described with UInt8), I\u0027m wasn\u0027t sure how to handle the VarInt encoding of the header.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou should read \u003Ca href=\u0022https://developers.google.com/protocol-buffers/docs/encoding#varints\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://developers.google.com/protocol-buffers/docs/encoding#varints\u003C/a\u003E for description of varint encoding.\u003C/p\u003E\u003Cp\u003EHere you have, how it is done in Python: \u003Ca href=\u0022https://github.com/google/protobuf/blob/v3.0.0-beta-1/python/google/protobuf/internal/decoder.py#L136\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/google/protobuf/blob/v3.0.0-beta-1/python/google/protobuf/internal/decoder.py#L136\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnd here, how I\u0027ve done varint receiving in my kRPC client: \u003Ca href=\u0022https://github.com/TeWu/krpc-rb/blob/0.2.0/lib/krpc/connection.rb#L55\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/TeWu/krpc-rb/blob/0.2.0/lib/krpc/connection.rb#L55\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EYou might also like to see this file from my implementation: \u003Ca href=\u0022https://github.com/TeWu/krpc-rb/blob/0.2.0/lib/krpc/protobuf_utils.rb\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/TeWu/krpc-rb/blob/0.2.0/lib/krpc/protobuf_utils.rb\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIt\u0027s all about protobuf\u0027 value types encoding and decoding.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-26T21:31:49Z\u0022 title=\u002209/26/2015 09:31  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 26, 2015\u003C/time\u003E by TeWu\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"djungelorm","CreatedById":76528,"CreatedDateTime":"2015-09-09T20:29:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dre4dW0rm\u0022 data-cite=\u0022Dre4dW0rm\u0022\u003E\u003Cdiv\u003EWell, if you\u0027re checking for IP after connection has been made it\u0027s too late. Either you have to bind to 127.0.0.1 to make it local only, and not to \u0027any\u0027 local port, or you have to validate a lot more than just the IP.\u003Cp\u003EAlso, I think you don\u0027t really have to worry much about the security in this case anyway, as majority of the use cases are in LAN only, and if there\u0027s an intruder/malware/spyware/trojan already in LAN, then it\u0027s also too late, and your software sec is the least concern for the victim.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe current behaviour is that, by default, the server indeed binds to 127.0.0.1. There is currently no way to bind the server to \u0027any\u0027.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TeWu\u0022 data-cite=\u0022TeWu\u0022\u003E\u003Cdiv\u003EHello,\u003Cp\u003EI just wanted to inform you that I\u0027ve created Ruby client for kRPC.\u003C/p\u003E\u003Cp\u003EIt\u0027s working pretty smoothly, with the only major feature missing being support for streaming.\u003C/p\u003E\u003Cp\u003EI plan to develop it further, tho I\u0027ll be quite busy with other things for a few weeks.\u003C/p\u003E\u003Cp\u003EFor more see: \u003Ca href=\u0022https://github.com/TeWu/krpc-rb\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/TeWu/krpc-rb\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI haven\u0027t yet a chance, so let me say Thank You djungelorm for creating this amazing mod \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESweet! If you like I can link to it from the first post and the documentation site. May be good to add a \u0022third party\u0022 client libraries section \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TeWu","CreatedById":106645,"CreatedDateTime":"2015-09-11T00:17:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022djungelorm\u0022 data-cite=\u0022djungelorm\u0022\u003E\u003Cdiv\u003ESweet! If you like I can link to it from the first post and the documentation site. May be good to add a \u0022third party\u0022 client libraries section \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESure - I would like that.\u003C/p\u003E\n"},{"CreatedByName":"AHO","CreatedById":49070,"CreatedDateTime":"2015-10-17T02:03:25Z","Content":"\n\u003Cp\u003EIs there anyway to execute a maneuver node created outside of kRPC? For example, if you created a maneuver node, could you write a kRPC script to execute the node that was created before starting the script without creating the maneuver node within kRPC? It looks like the only way kRPC recognized a node is if it is created within itself using control.addnode().\u003C/p\u003E\n"}]}