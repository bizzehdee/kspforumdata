{"TopicId":50533,"ForumId":34,"TopicTitle":"[1.8.x-1.12.x] Module Manager 4.2.3 (July 03th 2023) - Fireworks season","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-10-25T13:01:36Z","PageNum":4,"Articles":[{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-11-06T17:26:21Z","Content":"\n\u003Cp\u003E@Majiir Yes it\u0027s a quick fix but I\u0027d rather spend more time on my current MJ project.\u003C/p\u003E\u003Cp\u003E@CAPFlyer I\u0027ll spend 100% of the money I get paid for MM to get an ISO 9001 certification. So can we move on more productive thing like having feedback on the current implementation ?\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-11-07T06:22:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAdding \u0022MODULEMANAGER[LOCAL] {}\u0022 to a cfg will make MM ignore all node in the same directory and its subdirectory.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYour code weeds out nodes with blank names. Won\u0027t it weed out the above?\u003C/p\u003E\u003Cp\u003EOr for that matter, won\u0027t it also weed out the following?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E!MODULE[MechJebCore]{}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-11-07T07:47:43Z","Content":"\n\u003Cp\u003EHappens on all :Final directives\u003C/p\u003E\u003Cp\u003E[ModuleManager] Exception while processing node : MyTweaks/radiator_patch/@PART[radiator1]:Final\u003C/p\u003E\u003Cp\u003ESystem.ArgumentOutOfRangeException: Cannot be negative.\u003C/p\u003E\u003Cp\u003EParameter name: length\u003C/p\u003E\u003Cp\u003E at System.String.Substring (Int32 startIndex, Int32 length) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at ModuleManager.ConfigManager.applyPatch (System.Collections.Generic.List\u00601 excludePaths, Boolean final) [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-11-07T10:33:30Z","Content":"\n\u003Cp\u003ENo, the exclusion node is dealt in a different part of the code. It should not impact anything else.\u003C/p\u003E\u003Cp\u003EI did a quick test with a Final and they work fine. The bug I found is they are processed first instead of last, but it\u0027s just a \u0022!\u0022 missing in my code...\u003C/p\u003E\u003Cp\u003ECan you post the full code of one of the crashing :Final node ?\u003C/p\u003E\n"},{"CreatedByName":"a__gun","CreatedById":83859,"CreatedDateTime":"2013-11-07T12:43:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022scottholio\u0022 data-cite=\u0022scottholio\u0022\u003E\u003Cdiv\u003EIf you named each version of module manager to include the version number e.g. ModuleManager_141.dll and kept it in the GameData folder, then the dll would never be overwritten by an older version. Then just run a check when it is run, and delete older versions if the dll.\u003Cp\u003EIn any case, I really enjoy the work you have done and are doing on this. So thanks.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis.\u003C/p\u003E\u003Cp\u003ESpecifically:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E Then just run a check when it is run, and delete older versions if the dll.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt will passively keep itself up to date, there will only ever be one dll on disk and only one dll running, and the newest will always be favoured.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-11-07T13:05:18Z","Content":"\n\u003Cp\u003EI will not delete anything automatically for 3 reasons :\u003C/p\u003E\u003Cp\u003E - a bug could delete something that it should not have\u003C/p\u003E\u003Cp\u003E - some user won\u0027t like that for the same reason some don\u0027t want a DLL to call home for a version check\u003C/p\u003E\u003Cp\u003E - on windows you can\u0027t delete a DLL while it\u0027s loaded, so that would not work\u003C/p\u003E\u003Cp\u003EThe current version works fine with more than 1 version present. The user can clean up if he feels the need to.\u003C/p\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2013-11-07T13:45:00Z","Content":"\n\u003Cp\u003EWhat if MM has a bug or gets an important update? Will we have to browse every mods subdirectory to replace the old version with a patched one/newer version?\u003C/p\u003E\u003Cp\u003EWhy not keep a single copy in gamedata and let MM check if it is the newest version present before it starts its work? As 1.4\u002B will have its version number in the filename, it will not be overwritten by older versions.\u003C/p\u003E\n"},{"CreatedByName":"Garek","CreatedById":73214,"CreatedDateTime":"2013-11-07T13:56:25Z","Content":"\n\u003Cp\u003EYou should probably update the op about the current state (MM in GameData, folders excluded by cfg-node), otherwise you will here the same arguments again and again, because too many people don\u0027t actually read every post in a thread before responding.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-11-07T14:01:23Z","Content":"\n\u003Cp\u003EI\u0027ll do it in the weekend once I squashed the last bugs and had replies by the dev who had problem with the old design.\u003C/p\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2013-11-07T14:32:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Garek\u0022 data-cite=\u0022Garek\u0022\u003E\u003Cdiv\u003Ebecause too many people don\u0027t actually read every post in a thread before responding.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnd I see no reason why. The OP was edited the last time on 03.11.\u003C/p\u003E\u003Cp\u003EReading the thread backwards to ignore old information lead to me enduring OT heat about how and not much about what was done.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-11-07T14:49:40Z","Content":"\n\u003Cp\u003ECan we have 1 page in this thread without drama ? Thanks\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-11-07T18:01:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003ENo, the exclusion node is dealt in a different part of the code. It should not impact anything else.\u003Cp\u003EI did a quick test with a Final and they work fine. The bug I found is they are processed first instead of last, but it\u0027s just a \u0022!\u0022 missing in my code...\u003C/p\u003E\u003Cp\u003ECan you post the full code of one of the crashing :Final node ?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is the file that resulted in the sample error I posted.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[radiator1]:Final\u003Cbr\u003E{\u003Cbr\u003E\t@mass = 0.025 \u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ModuleHeatPump\u003Cbr\u003E\t\theatTransfer = 50\u003Cbr\u003E\t\theatDissipation = 0.05\u003Cbr\u003E\t\tRESOURCE\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tname = ElectricCharge\u003Cbr\u003E\t\t\trate = 0.01666667\u003Cbr\u003E\t\t}      \u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-11-07T18:20:28Z","Content":"\n\u003Cp\u003EOk, fixed. That was one stupid bug on my ends...\u003C/p\u003E\u003Cp\u003EUploaded, same name as before ( \u003Ca href=\u0022http://www.sarbian.com/sarbian/ModuleManager_1_5.dll\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.sarbian.com/sarbian/ModuleManager_1_5.dll\u003C/a\u003E )\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-11-08T21:46:24Z","Content":"\n\u003Cp\u003EHas anyone been able to get reloading to work?\u003C/p\u003E\u003Cp\u003EI tried it and no MM patches were reloaded at all.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-11-09T00:34:07Z","Content":"\n\u003Cp\u003EI looked into it and saw an other copy/paste fail on my end. After I fixed I saw that the second reload made things go strange (it seems it apply the patch before all the part are loaded). \u003C/p\u003E\u003Cp\u003ESo for now I removed the reload part and uploaded it again. I\u0027ll work on it more later since it\u0027s not the more important feature (but I agree it\u0027s really useful for writing new patch file)\u003C/p\u003E\n"},{"CreatedByName":"johnsonwax","CreatedById":79077,"CreatedDateTime":"2013-11-09T23:31:10Z","Content":"\n\u003Cp\u003EI had asked this question of the original MM author I believe after he stopped development, but I\u0027ll ask again in hopes of getting a different answer, but it is possible to \u003Cem\u003Edisable\u003C/em\u003E or unload a part? For example, if I only want a subset of parts from one of the large part mods it would be very convenient to have a cfg file in the mod folder that listed everything I didn\u0027t want loaded and unload or disable them. I really only need so many fairing sets and 1.25m fuel tanks...\u003C/p\u003E\u003Cp\u003EThe previous answer was that parts are loaded first, then cfgs, then the parts were built, so the assets were already loaded by the time MM ran. There was also the (reasonable) observation that if there was a way to unload assets that someone would have come out with a mod that would just unload anything from your persistent.sfs file once you were in flight. That was hardly a definitive statement though, and it was back in .20 or so, so perhaps things have changed.\u003C/p\u003E\n"},{"CreatedByName":"Morgan","CreatedById":77234,"CreatedDateTime":"2013-11-09T23:48:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022johnsonwax\u0022 data-cite=\u0022johnsonwax\u0022\u003E\u003Cdiv\u003E but it is possible to \u003Cem\u003Edisable\u003C/em\u003E or unload a part?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Etry \u0022\u003Cstrong\u003ECatergory = -1\u003C/strong\u003E\u0022, that should work\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-11-10T00:24:33Z","Content":"\n\u003Cp\u003Ejohnsonwax: the issue is not being able to unload parts. The issue is being able to unload _assets_. KSP loads assests independently of all confignode-specified data; a TGA file in GameData will be loaded irrespective of whether it\u0027s ever referenced by the game or not.\u003C/p\u003E\u003Cp\u003ESo even if you could get MM to unload gameobjects (which you can\u0027t, because they\u0027re not loaded at the time MM runs), it still wouldn\u0027t unload the assets involved. And presumably you want the ability to unload parts because you want to save RAM?\u003C/p\u003E\u003Cp\u003EUniverseReplacer does try to unload assets (the old texture, when it\u0027s replaced by a new one); someone should do a check to see if that\u0027s really happening over time, as I don\u0027t trust KSP garbage collection.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-11-10T01:18:47Z","Content":"\n\u003Cp\u003ENathanKell replied perfectly, and I won\u0027t go there anyway.\u003C/p\u003E\u003Cp\u003ENathanKell does the current version looks OK to you ? I think I\u0027ll do the release tomorrow.\u003C/p\u003E\n"},{"CreatedByName":"johnsonwax","CreatedById":79077,"CreatedDateTime":"2013-11-10T03:49:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003Ejohnsonwax: the issue is not being able to unload parts. The issue is being able to unload _assets_. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you. That\u0027s effectively what the previous answer was. So, no solution to reducing RAM usage, but Morgan\u0027s suggestion for Category = -1 sounds promising for just simplifying organization, which is still useful. \u003C/p\u003E\u003Cp\u003EThanks all.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-11-10T04:12:34Z","Content":"\n\u003Cp\u003EIt looks very good indeed--thank you so much for being so flexible with all of us!\u003C/p\u003E\u003Cp\u003Ejohnsonwax: You can always just zip up the parts you don\u0027t want and then delete the originals. KSP won\u0027t load zips, but you can extract inplace when desired.\u003C/p\u003E\n"},{"CreatedByName":"johnsonwax","CreatedById":79077,"CreatedDateTime":"2013-11-10T06:10:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003Ejohnsonwax: You can always just zip up the parts you don\u0027t want and then delete the originals. KSP won\u0027t load zips, but you can extract inplace when desired.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, the problem is when I update a module - the new versions go in next to the zipped ones and then I need to go through and re-zip everything one-by-one. I\u0027m looking for a way to have a config file, either global or per module, and simply list out the parts of the module I don\u0027t want. I may just have to write a script that can read a MM-like file and do the zipping.\u003C/p\u003E\n"},{"CreatedByName":"kaldak","CreatedById":71466,"CreatedDateTime":"2013-11-11T00:10:08Z","Content":"\n\u003Cp\u003EI\u0027ve been reading through the documentation while doing some tinkering. It instructs me to use \u0022:Final\u0022 if I\u0027m just tweaking other mods (which I am), but I couldn\u0027t find any explanation of what this actually does. Is it simply executing \u0022:Final\u0022 commands after all the non-final ones?\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-11-11T00:43:32Z","Content":"\n\u003Cp\u003EYes, nothing fancy \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-11-11T01:10:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kaldak\u0022 data-cite=\u0022kaldak\u0022\u003E\u003Cdiv\u003EI\u0027ve been reading through the documentation while doing some tinkering. It instructs me to use \u0022:Final\u0022 if I\u0027m just tweaking other mods (which I am), but I couldn\u0027t find any explanation of what this actually does. Is it simply executing \u0022:Final\u0022 commands after all the non-final ones?\u003Cp\u003EThanks!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENode processing is done in two passes\u003C/p\u003E\u003Cp\u003EFirst is anything that isnt :Final\u003C/p\u003E\u003Cp\u003ESecond pass is :Final\u003C/p\u003E\u003Cp\u003EMore important however than \u003Cem\u003Ewhat\u003C/em\u003E is \u003Cem\u003Ewhy.\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EThe answer is that you do this as a safeguard against your desired changes being undone by another patch node. If it\u0027s executed in pass #1 then you append :Final on yours and it will overlay your changes on that one.\u003C/p\u003E\n"}]}