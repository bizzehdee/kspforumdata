{"TopicId":129467,"ForumId":15,"TopicTitle":"[SOLVED!] Clickable IVA Props?","CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-01-07T16:08:23Z","PageNum":1,"Articles":[{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-01-07T16:08:23Z","Content":"\n\u003Cp\u003E\nHi all,\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m trying to make a simple monitor that will change the picture when you click on it. I know how to change the picture, but thus far I can\u0027t figure out how to detect the mouse click on the monitor. I know it can be done; Raster Prop Monitor lets you tap on buttons and they do stuff. Here\u0027s my setup for the monitor:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022wv7IFV0.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/wv7IFV0.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAs you can see, I\u0027ve added a box collider. I\u0027ve tried setting it to a trigger and just leaving it as is, but to no effect. I\u0027ve also set it to trigger and put the collider on the Part Triggers layer, but that didn\u0027t help.\n\u003C/p\u003E\n\u003Cp\u003E\nBelow is code I adapted from Raster Prop Monitor\u0027s SmarterButton class. I can find the ScreenTrigger no problem and add the ButtonClickWatcher, but still cannot detect the mouse click.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E    public class ButtonClickWatcher : MonoBehaviour\n    {\n        protected bool mouseDown;\n\n        public void OnMouseDown()\n        {\n            mouseDown = true;\n            Debug.Log(\u0022FRED OnMouseDown\u0022);\n        }\n\n        public void OnMouseUp()\n        {\n            mouseDown = false;\n            Debug.Log(\u0022FRED OnMouseUp\u0022);\n        }\n    }\n\n    public class InternalScreenSwitcher : InternalModule\n    {\n        public void Start()\n        {\n            if (HighLogic.LoadedSceneIsFlight == false)\n                return;\n\n            Transform trans = internalProp.FindModelTransform(\u0022ScreenTrigger\u0022);\n            if (trans != null)\n            {\n                Debug.Log(\u0022FRED found trigger transform\u0022);\n                GameObject goButton = trans.gameObject;\n                if (goButton != null)\n                {\n                    ButtonClickWatcher clickWatcher = goButton.GetComponent\u003C/span\u003E\u003Cspan\u003E\u0026lt;ButtonClickWatcher\u0026gt;\u003C/span\u003E\u003Cspan\u003E();\n                    if (clickWatcher == null)\n                    {\n                        clickWatcher = goButton.AddComponent\u003C/span\u003E\u003Cspan\u003E\u0026lt;ButtonClickWatcher\u0026gt;\u003C/span\u003E\u003Cspan\u003E();\n                        Debug.Log(\u0022FRED created click watcher\u0022);\n                    }\n                }\n            }\n        }\n    }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/MonoBehaviour.OnMouseDown.html\u0022 rel=\u0022external nofollow\u0022\u003EThis is what I found from Unity Script\u003C/a\u003E. It looks like I\u0027m setting up the behavior correctly. Any ideas why I\u0027m not able to detect the mouse click?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-13T20:36:05Z\u0022 title=\u002201/13/2016 08:36  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 13, 2016\u003C/time\u003E by Angel-125\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Hary R","CreatedById":111339,"CreatedDateTime":"2016-01-08T12:22:22Z","Content":"\n\u003Cp\u003E\nA wild guess, shouldn\u0027t your collider in unity set to\u0022 is trigger\u0022?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-08T12:22:36Z\u0022 title=\u002201/08/2016 12:22  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 8, 2016\u003C/time\u003E by Hary R\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-01-08T16:26:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222353186\u0022 data-ipsquote-contentid=\u0022129467\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452255742\u0022 data-ipsquote-userid=\u0022111339\u0022 data-ipsquote-username=\u0022Hary R\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Hary R said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nA wild guess, shouldn\u0027t your collider in unity set to\u0022 is trigger\u0022?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYup, already tried that. I set it to Is Trigger, left the layer on Default, and set it to Is Trigger with the layer set to Part Triggers. Both cases don\u0027t result in detecting the mouse click.\n\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2016-01-09T01:25:09Z","Content":"\n\u003Cp\u003E\nEDIT: I need to read it next time.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-09T01:25:29Z\u0022 title=\u002201/09/2016 01:25  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 9, 2016\u003C/time\u003E by Guest\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Hary R","CreatedById":111339,"CreatedDateTime":"2016-01-09T07:26:09Z","Content":"\n\u003Cp\u003E\nCan you put the ksp log, There shoud be a clue in it\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-09T11:39:57Z\u0022 title=\u002201/09/2016 11:39  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 9, 2016\u003C/time\u003E by Hary R\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-01-13T20:36:33Z","Content":"\n\u003Cp\u003E\nI figured it out! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI needed to put the collider for the screen onto the Kerbals layer. That did the trick. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}