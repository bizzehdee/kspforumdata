{"TopicId":43707,"ForumId":34,"TopicTitle":"kOS Scriptable Autopilot System 0.9","CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-08-24T14:28:17Z","PageNum":73,"Articles":[{"CreatedByName":"MSD","CreatedById":59320,"CreatedDateTime":"2013-11-13T06:16:49Z","Content":"\n\u003Cp\u003EI\u0027ve used other files/programs as functions, is it possible for a program to have a return value ? \u003C/p\u003E\u003Cp\u003EThat way we can save on memory space, and all kind of awesome!\u003C/p\u003E\u003Cp\u003ENone working example:\u003C/p\u003E\u003Cp\u003EPrintf:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//Working in 0.9.2\u003Cbr\u003EDECLARE PARAMETER line.\u003Cbr\u003EPRINT \u0022\tT\u002B\u0022 \u002B round(missiontime) \u002B \u0022 \u0022 \u002B line.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EcreateNode, executeNode, etc.\u003C/p\u003E\u003Cp\u003EProgram\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Etarget = \u0022mun\u0022.\u003Cbr\u003E\u003Cbr\u003ERUN printf(\u0022To the mun!\u0022).\u003Cbr\u003ERUN createNode(target).\u003Cbr\u003ERUN executeNode.\u003Cbr\u003E\u003Cbr\u003EWAIT UNTIL SoiChanged.\u003Cbr\u003E\u003Cbr\u003E//continue program. \u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe only example here is SoiChanged.\u003C/p\u003E\u003Cp\u003EEDIT: mmm... It seems I replied to soon, you can create global variables.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-13T06:40:16Z\u0022 title=\u002211/13/2013 06:40  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 13, 2013\u003C/time\u003E by MSD\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-13T12:12:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MSD\u0022 data-cite=\u0022MSD\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EEDIT: mmm... It seems I replied to soon, you can create global variables.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn fact, a limitation of the language is that ALL variables are global. Which can be a bit of a problem when trying to write routines to share with other people. You have to warn them \u0022these are the variable names I used. I hope they don\u0027t clash with any you used.\u0022\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2013-11-13T12:20:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIn fact, a limitation of the language is that ALL variables are global. Which can be a bit of a problem when trying to write routines to share with other people. You have to warn them \u0022these are the variable names I used. I hope they don\u0027t clash with any you used.\u0022\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s where you have to come up with naming conventions like we did back in the days of Basicode. \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201CAll global variables start with ..., all local variables start with ...\u00C3\u00A2\u00E2\u201A\u00AC\u00C2 You could use the letters G and L for that, but that wouldn\u0027t be truly Kerbal of course.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-13T12:37:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kerbart\u0022 data-cite=\u0022Kerbart\u0022\u003E\u003Cdiv\u003EThat\u0027s where you have to come up with naming conventions like we did back in the days of Basicode. \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201CAll global variables start with ..., all local variables start with ...\u00C3\u00A2\u00E2\u201A\u00AC\u00C2 You could use the letters G and L for that, but that wouldn\u0027t be truly Kerbal of course.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s exactly what I do. My tfXYZtoENU was written that way with all variables starting with \u0022tf\u0022. But that\u0027s insufficient if two different people wrote two different subprograms to be later combined together, and one of them took advantage of the persistence of global variables between calls. One of the things local variables do, besides preventing name clashes, is force people to treat the variables as ephemeral and lasting only as long as one pass through the function, unless *explicitly* stated otherwise. The naming convention doesn\u0027t fix the problem because the \u0022L\u0022 variable you use might be an \u0022L\u0022 variable another subprogram uses, and it gets messed up when you change it.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-13T12:41:28Z","Content":"\n\u003Cp\u003EAnd the existence of globals, while it does provide a way for a program to give information back to the caller, isn\u0027t nearly as nice and clean and intuitive as having actual return values.\u003C/p\u003E\u003Cp\u003EThis:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E lock steering to run myUpdateSteerFunc.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eis way cleaner than:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset resultOfSteerFunc to R(0,0,0). // default starting point.\u003Cbr\u003Elock steering to resultOfSteerfunc.\u003Cbr\u003Euntil (something) {\u003Cbr\u003E  run steerFunc. // updates resultOfSteerFunc.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EGranted, running the subprogram continually in the background (via the lock statement) might be an expensive operation, but it doesn\u0027t have to be if it was implemented differently. The KOS computer should parse the program once and store it\u0027s pre-parsed version to execute, and then not re-parse it unless the timestamp on the file has been updated since it was last parsed.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-13T12:44:54Z\u0022 title=\u002211/13/2013 12:44  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 13, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-13T16:26:06Z","Content":"\n\u003Cp\u003EThanks to the help baloan has provided, I have most of the pieces (almost ready to put them together) to setup my first kerbostationary remotetech network with kOS. I\u0027ve got a program that get my AP rather close to 2,868.75km, and another one that takes the desired orbital period of 4 hours, works it into a formula that determines that PE needed for a 4hour orbital period, sets it as a node and executes it. I also believe I have another program that I can use on the individual sats to raise their PE to 2,868.75km. The only problem I\u0027m running into may be a kOS/KSP limitation. Ideally I\u0027d like the launcher (which is carrying 3 sats) to be able to automatically deploy each sat when it comes around to AP.\u003C/p\u003E\u003Cp\u003ESo far in my testing I have the main program copy the individual sat deployment program (they are setup so each sat has a different action group to detach from the launcher and then another to deploy solar panels, though I may switch that to just use \u003Cem\u003Epanels on.\u003C/em\u003E to the individual sats. Then it switches to the first sat and deploys it. Problem is even though its running through the program the panels don\u0027t deploy. I guess because the program isn\u0027t actually running on that sat after it\u0027s been detached from the main craft. Now, if I select the kOS unit on that sat, and run the sat deployment program for that specific one it detaches, focus stays with the main craft and after the given amount of time the solar panels deploy and if I had the circularization program added I imagine it would do that as well. \u003C/p\u003E\u003Cp\u003EI guess there is no way right now to make it autonomous the way I want it exactly, unless I\u0027m missing something. It would require some how forcing the program to run on the kOS unit intended. Right now I imagine that the program is running on the launcher kOS unit while connected to the other volume, sort of like using a mapped network drive as opposed to using an SSH shell running on a remote computer. I was hoping to have the whole process from launch to deploy, and then launcher deorbit work by just starting the launcher program while on the pad, but I guess I can\u0027t be that lazy yet. lol\u003C/p\u003E\n"},{"CreatedByName":"Chestburster","CreatedById":69476,"CreatedDateTime":"2013-11-13T19:25:36Z","Content":"\n\u003Cp\u003EIs it possible to implement single engine throttle? like main engine is running at 58% while the booster run at 100%? Or is that completely out of the scope of this mod?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-13T21:18:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Chestburster\u0022 data-cite=\u0022Chestburster\u0022\u003E\u003Cdiv\u003EIs it possible to implement single engine throttle? like main engine is running at 58% while the booster run at 100%? Or is that completely out of the scope of this mod?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe mod can only manipulate the controls that exist in the normal game. I don\u0027t think this could be possible unless KSP itself provides a way to do that.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-13T21:33:10Z","Content":"\n\u003Cp\u003EIs anyone else getting the this problem to frequently recur like I am?\u003C/p\u003E\u003Cp\u003EI had a script program running on an SCS module on a craft. It doesn\u0027t seem to matter what the program was - pretty much any program has the following problem. If the terminal window was ever opened once, and a program had ever been run on the craft, even if it no longer is still running, and the craft goes \u0022on rails\u0022 because I went to the tracking center, then ANYTHING that brings the craft back \u0022off rails\u0022, whether it\u0027s because I select it from the tracking center or because I fly another craft within 2.5 km of it, will make the entire game suddenly BOG down to a standstill, going down to about a 1 FPS framerate, and furthermore it usually triggers the parts disappearing bug (where half the ship is gone but the camera still rotates around where the center of mass WOULD be if the full craft was present - so SOME part of KSP still thinks the rest of the parts are there but you can\u0027t manipulate them.) The only way to recover from this is to have had a quicksave you can go back to. The craft is permanently broken in the persistence file at this point.\u003C/p\u003E\u003Cp\u003EThis seems to happen with great frequency and I don\u0027t know why. I suspect it must be something the KOS mod is doing upon loading the vessel into the full physics engine. But it only happens if a program had been run.\u003C/p\u003E\u003Cp\u003ESo what\u0027s different about a SCS part without having run a program and one that had run a program?\u003C/p\u003E\u003Cp\u003EThe only think I can think of is that if a program had been run, then the mod is probably going to try to remember the state of things - the global variables that have been SET or LOCK\u0027ed. Perhaps its the restoration of those things that makes this problem occur.\u003C/p\u003E\u003Cp\u003EI have found that if I turn the SCS module off (via the \u0022toggle power\u0022 button) before going on rails, and then power it back on again after coming off from rails, then it doesn\u0027t happen. It has to have been turned on when it went onto rails.\u003C/p\u003E\u003Cp\u003ECan other people confirm or deny whether they get the same thing happening or is it just me?\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-13T21:46:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIs anyone else getting the this problem to frequently recur like I am?\u003Cp\u003EI had a script program running on an SCS module on a craft. It doesn\u0027t seem to matter what the program was - pretty much any program has the following problem. If the terminal window was ever opened once, and a program had ever been run on the craft, even if it no longer is still running, and the craft goes \u0022on rails\u0022 because I went to the tracking center, then ANYTHING that brings the craft back \u0022off rails\u0022, whether it\u0027s because I select it from the tracking center or because I fly another craft within 2.5 km of it, will make the entire game suddenly BOG down to a standstill, going down to about a 1 FPS framerate, and furthermore it usually triggers the parts disappearing bug (where half the ship is gone but the camera still rotates around where the center of mass WOULD be if the full craft was present - so SOME part of KSP still thinks the rest of the parts are there but you can\u0027t manipulate them.) The only way to recover from this is to have had a quicksave you can go back to. The craft is permanently broken in the persistence file at this point.\u003C/p\u003E\u003Cp\u003EThis seems to happen with great frequency and I don\u0027t know why. I suspect it must be something the KOS mod is doing upon loading the vessel into the full physics engine. But it only happens if a program had been run.\u003C/p\u003E\u003Cp\u003ESo what\u0027s different about a SCS part without having run a program and one that had run a program?\u003C/p\u003E\u003Cp\u003EThe only think I can think of is that if a program had been run, then the mod is probably going to try to remember the state of things - the global variables that have been SET or LOCK\u0027ed. Perhaps its the restoration of those things that makes this problem occur.\u003C/p\u003E\u003Cp\u003EI have found that if I turn the SCS module off (via the \u0022toggle power\u0022 button) before going on rails, and then power it back on again after coming off from rails, then it doesn\u0027t happen. It has to have been turned on when it went onto rails.\u003C/p\u003E\u003Cp\u003ECan other people confirm or deny whether they get the same thing happening or is it just me?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETHat might explain some things...Over the past few days I\u0027ve started noticing this too. I don\u0027t recall experiencing the part disappearing bug before but it\u0027s been doing it lately any time I try to load my Remotetech/kos kommsat test vehicle.\u003C/p\u003E\u003Cp\u003EOriginally it just started as what I thought was part lag and my laptop, although at first it ran semi smooth until I started running a program (had 5 or 6 if not more if statements in a loop), then it seemed to start slowing down more, and stayed slowed down even after the program terminated (either automatically or control c). Then just in the past day or two the part disappearing bug pupped up, which as you said is \u0022fixed\u0022 with a quickload, until loading again from the tracking station. \u003C/p\u003E\u003Cp\u003ECurrently I\u0027m running kOS 9.2 and I believe my remotech version is 1.1.0. Strange though that I haven\u0027t experienced this until recently, unless it was some sort of code combination or exception error that causes some kind of corruption in the persistence file but not the save file (I guess presumably because the save was done before the corruption event happened).\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-13T22:23:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sma\u0022 data-cite=\u0022Sma\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ECurrently I\u0027m running kOS 9.2 and I believe my remotech version is 1.1.0. Strange though that I haven\u0027t experienced this until recently, unless it was some sort of code combination or exception error that causes some kind of corruption in the persistence file but not the save file (I guess presumably because the save was done before the corruption event happened).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can confirm that remotetech has nothing to do with it, as I get the problem with ONLY KOS and no other mods installed.\u003C/p\u003E\u003Cp\u003EAnd yeah it\u0027s just because the quicksave was made before the problem. Quciksaves and persistence files are the same exact thing in the same exact format. The persistence file is just a save that happens automatically at regular intervals and when performing certain actions (like switching to the space center).\u003C/p\u003E\u003Cp\u003EI wonder if the mod is perhaps trying to \u0022catch up\u0022 in some way when it gets reloaded from rails to full-simulation mode. Imagine if it\u0027s trying to go \u0022oh crap I\u0027ve missed like 3,000 command cycles according to the mission clock, I\u0027d better hurry up and execute them.\u0022\u003C/p\u003E\u003Cp\u003E(i.e. maybe it\u0027s trying to update all the active LOCKs for all the missed time?)\u003C/p\u003E\u003Cp\u003EThat\u0027s pure speculation. I haven\u0027t peeked at the C# code in ages. But at any rate the more people who can say they have the problem the more likely it will get attention and be looked at. Up till now I thought it was just me.\u003C/p\u003E\u003Cp\u003EAnd it\u0027s definitely not new with 0.92. I first noticed it back in 0.7 and for all I know it was present before then. (I wouldn\u0027t know because I hadn\u0027t been ever trying to do the things that seem to trigger it until then.)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-13T22:26:23Z\u0022 title=\u002211/13/2013 10:26  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 13, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"TelluriumCrystal","CreatedById":25647,"CreatedDateTime":"2013-11-13T22:35:34Z","Content":"\n\u003Cp\u003EI thought it might be a fun idea to see how far people could get using kOS alone to pilot their vessels. So I went ahead and created a challenge for it.\u003C/p\u003E\u003Cp\u003EI\u0027m going to leave the link here for anyone who wants to give it a shot (I hope I\u0027m not intruding by doing this): \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/58068-kOS-The-Automated-Mission-Challenge\u0022 rel=\u0022external nofollow\u0022\u003EThe Automated Mission Challenge\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EOnce again, thanks for making this awesome mod and I hope it continues to grow! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2013-11-14T00:02:56Z","Content":"\n\u003Cp\u003EI have had it happen a couple of times now that I manually entered a command and it would not execute. It often looks like you just typed the wrong syntax and that is sometimes the case, but when I use the \u003Cem\u003Eup\u003C/em\u003E key to enter exactly the same command again, it will work as intended.\u003C/p\u003E\u003Cp\u003EThere seems to be something off there.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-14T00:12:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EI have had it happen a couple of times now that I manually entered a command and it would not execute. It often looks like you just typed the wrong syntax and that is sometimes the case, but when I use the \u003Cem\u003Eup\u003C/em\u003E key to enter exactly the same command again, it will work as intended.\u003Cp\u003EThere seems to be something off there.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUp-arrow technically doesn\u0027t bring up the previous command. It brings up the previous LINE. There\u0027s a difference between the two when it\u0027s a multi-line command.\u003C/p\u003E\u003Cp\u003EI\u0027ve seen behavior like that when the error was this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eoops this line has no period\u003Cbr\u003Elock throttle to 0.5.\u003Cbr\u003E(press up-arrow here)\u003Cbr\u003Elock throttle to 0.5.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe first one fails because \u0022lock throttle to 0.5\u0022 was really part of the poor syntax command: \u0022oops this line has no period\\nlock throttle to 0.5.\u0022. But when up-arrowing only the last half of the command showed up and was run.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2013-11-14T00:15:10Z","Content":"\n\u003Cp\u003EThat would actually make sense, I will check whether that is what is happening.\u003C/p\u003E\u003Cp\u003EI think I found a little bug: upon quicksaving, launching the vehicle and quickloading, my program was still there. All the edited out comments were gone though - with empy space where they were before - until I reloaded the program from archive. Happened more than once.\u003C/p\u003E\u003Cp\u003EI had another weird thing where any line from a certain program would produce a syntax error, even though it was exactly the same code as before. Whenever I edited something out, the next line would produce the error. Manually entering the same commands would work as intended and other programs with the same commands worked fine too. Making a copy of the broken file in the Archive folder in Windows would not help, this new file produced the same results. I ended up retyping the same code to another program and that fixed it. Not sure where that came from.\u003C/p\u003E\u003Cp\u003EJust getting to grips with this language, as I have not had the chance to tinker with it before, so bear with me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit: I read back a bit and see the second problem with the syntax error is something that is known.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-14T03:02:48Z\u0022 title=\u002211/14/2013 03:02  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 14, 2013\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Draft","CreatedById":72633,"CreatedDateTime":"2013-11-14T05:20:40Z","Content":"\n\u003Cp\u003ESteven, Sma, it might be that bug with how kOS handles variables in the persistence file. It\u0027s an open issue on github, try going through your persistence file manually, searching for \u0027variables\u0027 and getting rid of any strings or scientific notated numbers.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-14T12:54:42Z","Content":"\n\u003Cp\u003EDoes anyone know how the built-in variable \u0022encounter\u0022 is supposed to work? I thought it printed the string name of the next upcoming body encounter but it doesn\u0027t. Here\u0027s a screenshot of what I mean. It\u0027s clear from the screenshot that I\u0027ve got an encounter with the Mun coming up, but \u0022print encounter\u0022 still shows \u0022None\u0022.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/GMBLgKp.jpg\u0022 alt=\u0022GMBLgKp.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E(EDIT: you can\u0027t read the text in the screenshot\u0027s scaled-down image but you can rightclick it and \u0022view image\u0022 to see it at full resolution to read the text.)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-14T12:57:14Z\u0022 title=\u002211/14/2013 12:57  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 14, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003Cbr\u003Eexplain getting better resolution on screenshot.\n\u003C/span\u003E\n"},{"CreatedByName":"baloan","CreatedById":91670,"CreatedDateTime":"2013-11-14T13:21:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EDoes anyone know how the built-in variable \u0022encounter\u0022 is supposed to work? \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Eencounter\u003C/span\u003E works in conjunction with a NODE. IMHO it makes sense to have \u003C/p\u003E\u003Cp\u003ESHIP:ENCOUNTER and NODE:ENCOUNTER, \u003C/p\u003E\u003Cp\u003ESHIP:ENCOUNTER: PERIAPSIS and NODE:ENCOUNTER: PERIAPSIS, \u003C/p\u003E\u003Cp\u003ESHIP:ENCOUNTER: PERIAPSIS:ETA and NODE:ENCOUNTER: PERIAPSIS:ETA\u003C/p\u003E\u003Cp\u003Eto fine tune injection maneuvers while being out of SOI of the target body.\u003C/p\u003E\u003Cp\u003EEasy for Mun equatorial injections, I am wondering what else is need to control a polar orbit injection (or arbitrary inclination injections).\u003C/p\u003E\u003Cp\u003E[is there any way to avoid : P to be converted to a \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E in this editor?]\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-14T13:23:08Z\u0022 title=\u002211/14/2013 01:23  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 14, 2013\u003C/time\u003E by baloan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-11-14T14:12:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022baloan\u0022 data-cite=\u0022baloan\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003Eencounter\u003C/span\u003E works in conjunction with a NODE. IMHO it makes sense to have \u003Cp\u003ESHIP:ENCOUNTER and NODE:ENCOUNTER, \u003C/p\u003E\u003Cp\u003ESHIP:ENCOUNTER: PERIAPSIS and NODE:ENCOUNTER: PERIAPSIS, \u003C/p\u003E\u003Cp\u003ESHIP:ENCOUNTER: PERIAPSIS:ETA and NODE:ENCOUNTER: PERIAPSIS:ETA\u003C/p\u003E\u003Cp\u003Eto fine tune injection maneuvers while being out of SOI of the target body.\u003C/p\u003E\u003Cp\u003EEasy for Mun equatorial injections, I am wondering what else is need to control a polar orbit injection (or arbitrary inclination injections).\u003C/p\u003E\u003Cp\u003E[is there any way to avoid : P to be converted to a \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E in this editor?]\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt does seem strange that you can only get the encounter that you MIGHT end up at if you executed a node correctly, but can\u0027t get the encounter that you\u0027re already on the guaranteed path to if you did nothing from here on out.\u003C/p\u003E\u003Cp\u003EIt seems like an unnecessary extra step to set an encounter node just to get the encounter name when I don\u0027t need the encounter node for the maneuver itself, which I can execute just fine outside of the encounter system.\u003C/p\u003E\u003Cp\u003EWhat I\u0027m trying to do is this:\u003C/p\u003E\u003Cp\u003EStep 1. Wait until correct point to start Hohmann transfer (I do the vector math to work this out myself).\u003C/p\u003E\u003Cp\u003EStep 2. Start thrusting prograde.\u003C/p\u003E\u003Cp\u003EStep 3. Hold the throttle there until I\u0027ve got an encounter with the Mun.\u003C/p\u003E\u003Cp\u003EIt looks like I either have to change it to use an manuever node unnecessarily, or I\u0027ll just have to wait until my apoapsis is the right height for me to assume I\u0027ve gotten an encounter, although if I\u0027ve taken too long to make the burn that assumption may be wrong.\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-11-14T15:24:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EDoes anyone know how the built-in variable \u0022encounter\u0022 is supposed to work? I thought it printed the string name of the next upcoming body encounter but it doesn\u0027t. Here\u0027s a screenshot of what I mean. It\u0027s clear from the screenshot that I\u0027ve got an encounter with the Mun coming up, but \u0022print encounter\u0022 still shows \u0022None\u0022.\u003Cp\u003E\u003Cstrong\u003E**image here**\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E(EDIT: you can\u0027t read the text in the screenshot\u0027s scaled-down image but you can rightclick it and \u0022view image\u0022 to see it at full resolution to read the text.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI didn\u0027t even know encounter was a thing(guess i need to catch up lol). I\u0027m assuming you tried encounter:eta? or something similar.\u003C/p\u003E\n"},{"CreatedByName":"kalizec","CreatedById":92909,"CreatedDateTime":"2013-11-14T16:02:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIs anyone else getting the this problem to frequently recur like I am?\u003Cp\u003EI had a script program running on an SCS module on a craft. It doesn\u0027t seem to matter what the program was - pretty much any program has the following problem. If the terminal window was ever opened once, and a program had ever been run on the craft, even if it no longer is still running, and the craft goes \u0022on rails\u0022 because I went to the tracking center, then ANYTHING that brings the craft back \u0022off rails\u0022, whether it\u0027s because I select it from the tracking center or because I fly another craft within 2.5 km of it, will make the entire game suddenly BOG down to a standstill, going down to about a 1 FPS framerate, and furthermore it usually triggers the parts disappearing bug (where half the ship is gone but the camera still rotates around where the center of mass WOULD be if the full craft was present - so SOME part of KSP still thinks the rest of the parts are there but you can\u0027t manipulate them.) The only way to recover from this is to have had a quicksave you can go back to. The craft is permanently broken in the persistence file at this point.\u003C/p\u003E\u003Cp\u003EThis seems to happen with great frequency and I don\u0027t know why. I suspect it must be something the KOS mod is doing upon loading the vessel into the full physics engine. But it only happens if a program had been run.\u003C/p\u003E\u003Cp\u003ESo what\u0027s different about a SCS part without having run a program and one that had run a program?\u003C/p\u003E\u003Cp\u003EThe only think I can think of is that if a program had been run, then the mod is probably going to try to remember the state of things - the global variables that have been SET or LOCK\u0027ed. Perhaps its the restoration of those things that makes this problem occur.\u003C/p\u003E\u003Cp\u003EI have found that if I turn the SCS module off (via the \u0022toggle power\u0022 button) before going on rails, and then power it back on again after coming off from rails, then it doesn\u0027t happen. It has to have been turned on when it went onto rails.\u003C/p\u003E\u003Cp\u003ECan other people confirm or deny whether they get the same thing happening or is it just me?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESame thing happening here. Checked it out with only KOS installed.\u003C/p\u003E\u003Cp\u003EOrbiting a rocket with the KOS part installed but flying it manually is no problem.\u003C/p\u003E\u003Cp\u003EOrbiting that same rocket with the KOS part installed, and having it run a script during ascent, results in corrupt saves.\u003C/p\u003E\u003Cp\u003EI first bumped into it while decoupling my ascent stage from the orbiter-stage. The orbiter stage has a KOS-part. The ascent stage doesn\u0027t.\u003C/p\u003E\u003Cp\u003ESwitching back and forth between the two stages from map-view causes the bug.\u003C/p\u003E\u003Cp\u003EIf you then manually edit that save to delete the loaded variables and program the save becomes \u0027good\u0027 again.\u003C/p\u003E\u003Cp\u003ENot sure yet whether it is the specific program, the loaded variables or the storing of the program that causes the problem.\u003C/p\u003E\u003Cp\u003EHow to reproduce:\u003C/p\u003E\u003Cp\u003E- Create a rocket with two stages: one ascent stage, one orbiter stage.\u003C/p\u003E\u003Cp\u003E- Add a Remote Guidance Unit to both stages.\u003C/p\u003E\u003Cp\u003E- Add the KOS-part to the orbiter stage.\u003C/p\u003E\u003Cp\u003E- Load a ascend program onto the orbiter.\u003C/p\u003E\u003Cp\u003E- Run the program.\u003C/p\u003E\u003Cp\u003E- Both stages are now in orbit.\u003C/p\u003E\u003Cp\u003E- Decouple the stages.\u003C/p\u003E\u003Cp\u003E- Switch to the ascend stage.\u003C/p\u003E\u003Cp\u003E- Deorbit the ascend stage.\u003C/p\u003E\u003Cp\u003E- Switch back to the orbiter stage.\u003C/p\u003E\u003Cp\u003E- Now most parts of the orbiter stage no longer show.\u003C/p\u003E\u003Cp\u003E- Save the game anyway.\u003C/p\u003E\u003Cp\u003E- Exit KSP.\u003C/p\u003E\u003Cp\u003E- Edit the save.\u003C/p\u003E\u003Cp\u003E- Lock up the KOS-part.\u003C/p\u003E\u003Cp\u003E- Delete the harddisk and variables.\u003C/p\u003E\u003Cp\u003E- Start KSP\u003C/p\u003E\u003Cp\u003E- Load the save.\u003C/p\u003E\u003Cp\u003E- Switch to the orbiter stage.\u003C/p\u003E\u003Cp\u003E- Orbiter stage appears normal again.\u003C/p\u003E\u003Cp\u003EPossible causes that have been ruled out:\u003C/p\u003E\u003Cp\u003E- Other mods (only KOS was installed).\u003C/p\u003E\u003Cp\u003E- Bug in KSP itself (doesn\u0027t happen when ascending manually)\u003C/p\u003E\u003Cp\u003E- Bug in KOS-part (doesn\u0027t happen when ascending manually with KOS-part on the craft)\u003C/p\u003E\u003Cp\u003EPossible causes not ruled:\u003C/p\u003E\u003Cp\u003E- Bug could be specific to the program.\u003C/p\u003E\u003Cp\u003E- Bug could be specific to the decoupling.\u003C/p\u003E\u003Cp\u003E- Bug could be specific to the on-rails/off-rails switch.\u003C/p\u003E\u003Cp\u003E- Bug could be specific to switching between crafts using the Map instead of the Space Center.\u003C/p\u003E\u003Cp\u003E- Bug could be specific to the harddrive.\u003C/p\u003E\u003Cp\u003E- Bug could be specific to the loaded variables.\u003C/p\u003E\u003Cp\u003ECould be I\u0027m seeing:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/Nivekk/KOS/issues/220\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Nivekk/KOS/issues/220\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-14T16:50:56Z\u0022 title=\u002211/14/2013 04:50  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 14, 2013\u003C/time\u003E by kalizec\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kalizec","CreatedById":92909,"CreatedDateTime":"2013-11-14T16:08:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIs anyone else getting the this problem to frequently recur like I am?\u003Cp\u003EI had a script program running on an SCS module on a craft. It doesn\u0027t seem to matter what the program was - pretty much any program has the following problem. If the terminal window was ever opened once, and a program had ever been run on the craft, even if it no longer is still running, and the craft goes \u0022on rails\u0022 because I went to the tracking center, then ANYTHING that brings the craft back \u0022off rails\u0022, whether it\u0027s because I select it from the tracking center or because I fly another craft within 2.5 km of it, will make the entire game suddenly BOG down to a standstill, going down to about a 1 FPS framerate, and furthermore it usually triggers the parts disappearing bug (where half the ship is gone but the camera still rotates around where the center of mass WOULD be if the full craft was present - so SOME part of KSP still thinks the rest of the parts are there but you can\u0027t manipulate them.) The only way to recover from this is to have had a quicksave you can go back to. The craft is permanently broken in the persistence file at this point.\u003C/p\u003E\u003Cp\u003EThis seems to happen with great frequency and I don\u0027t know why. I suspect it must be something the KOS mod is doing upon loading the vessel into the full physics engine. But it only happens if a program had been run.\u003C/p\u003E\u003Cp\u003ESo what\u0027s different about a SCS part without having run a program and one that had run a program?\u003C/p\u003E\u003Cp\u003EThe only think I can think of is that if a program had been run, then the mod is probably going to try to remember the state of things - the global variables that have been SET or LOCK\u0027ed. Perhaps its the restoration of those things that makes this problem occur.\u003C/p\u003E\u003Cp\u003EI have found that if I turn the SCS module off (via the \u0022toggle power\u0022 button) before going on rails, and then power it back on again after coming off from rails, then it doesn\u0027t happen. It has to have been turned on when it went onto rails.\u003C/p\u003E\u003Cp\u003ECan other people confirm or deny whether they get the same thing happening or is it just me?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHaving the same problem. (Not the FPS issues, but definitely the parts disappearing bug.)\u003C/p\u003E\u003Cp\u003EI\u0027ve narrowed it down to having a KOS-program loaded while switching between craft.\u003C/p\u003E\u003Cp\u003EHow to reproduce:\u003C/p\u003E\u003Cp\u003E- KSP \u002B KOS (no other mods)\u003C/p\u003E\u003Cp\u003E- Two stage rocket with KOS module in second stage and both stages having a Remote Guidance Unit.\u003C/p\u003E\u003Cp\u003EIf you orbit that rocket manually, then seperate the stages and switch between them, nothing happens.\u003C/p\u003E\u003Cp\u003EIf you orbit that rocket using a program, then seperate the stages and switch between them, the bug occurs.\u003C/p\u003E\u003Cp\u003EIf you then edit your savegame and remove the variables and stored programs from the KOS part, the bug disappears.\u003C/p\u003E\u003Cp\u003ENot sure yet whether it\u0027s the stored variables, the locked steering, the powered on KOS-part, the stored programs, or the specific program that\u0027s the problem.\u003C/p\u003E\n"},{"CreatedByName":"Sacred Aardvark","CreatedById":85856,"CreatedDateTime":"2013-11-14T16:15:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022baloan\u0022 data-cite=\u0022baloan\u0022\u003E\u003Cdiv\u003E[is there any way to avoid : P to be converted to a \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E in this editor?]\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGo Advanced, scroll down to Additional Options and tick \u0022disable smilies in text\u0022 and it shouldn\u0027t \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TelluriumCrystal","CreatedById":25647,"CreatedDateTime":"2013-11-14T16:29:25Z","Content":"\n\u003Cp\u003EI am having some strange issues, and may have run into a bug. The following happens after I launch my rocket into orbit using a kOS program I wrote:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Erun BOdeorbit.\u003Cbr\u003EError on line 2: Syntax Error.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe code of the program \u0022BOdeorbit\u0022 is as follows:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// This should deorbit the [AUTO] Basic Orbiter\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Beginning deorbit burn\u0022.\u003Cbr\u003Elock STEERING to RETROGRADE.\u003Cbr\u003Ewait 3.\u003Cbr\u003Eset x to 0.\u003Cbr\u003Euntil x \u0026gt; 1 {\u003Cbr\u003Elock THROTTLE to x.\u003Cbr\u003Eset x to x \u002B 0.05.\u003Cbr\u003Ewait 0.01.\u003Cbr\u003E}\u003Cbr\u003Elock THROTTLE to 1.\u003Cbr\u003Ewait until PERIAPSIS \u0026lt; 0.\u003Cbr\u003Elock THROTTLE to 0.\u003Cbr\u003Eunlock STEERING.\u003Cbr\u003E\u003Cbr\u003Ewait until ALTITUDE \u0026lt; 45000.\u003Cbr\u003Etoggle AG1.\u003Cbr\u003Eprint \u0022Retracting solar panels\u0022.\u003Cbr\u003E\u003Cbr\u003Ewait until ALT:RADAR \u0026lt; 5000.\u003Cbr\u003Estage.\u003Cbr\u003Eprint \u0022Parachute deployed\u0022.\u003Cbr\u003E\u003Cbr\u003Ewait until ALT:RADAR \u0026lt; 10.\u003Cbr\u003Eprint \u0022Touchdown imminent\u0022.\u003Cbr\u003E\u003Cbr\u003Ewait 5.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAm I missing something here?\u003C/p\u003E\n"},{"CreatedByName":"Skyfoxyz","CreatedById":91975,"CreatedDateTime":"2013-11-14T16:44:22Z","Content":"\n\u003Cp\u003Emissed \u0022.\u0022 (dot) in line 10\u003C/p\u003E\u003Cp\u003E}\u003Cspan style=\u0022font-size:18px;\u0022\u003E\u003Cstrong\u003E.\u003C/strong\u003E\u003C/span\u003E\u003C/p\u003E\n"}]}