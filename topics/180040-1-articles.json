{"TopicId":180040,"ForumId":70,"TopicTitle":"Incorrect funds after recovering vehicle","CreatedByName":"TackleMcClean","CreatedById":192825,"CreatedDateTime":"2018-11-24T13:09:38Z","PageNum":1,"Articles":[{"CreatedByName":"TackleMcClean","CreatedById":192825,"CreatedDateTime":"2018-11-24T13:09:38Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to figure out a strange scenario where recovered funds become my new amount of funds, meaning\u00A0\u003Cstrong\u003Ewrong\u003C/strong\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nIn general, this is how things work.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E[New amount of funds] = [Old fund amount] \u002B [Recovered fund amount]\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, this is what happens for me:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E[New amount of funds] = [Recovered fund amount]\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nMeaning it disregards any previous amount of funds!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt doesn\u0027t always happen, but it usually happens when I\u0027m recovering large sums of funds (several million).\u003Cbr\u003E\nI\u0027m using \u003Cabbr title=\u0022Umbra Space Industries (a collection of mods)\u0022\u003EUSI\u003C/abbr\u003E MKS, and I\u0027m recovering large amounts of ExoticMinerals. Most often then, it happens.\n\u003C/p\u003E\n\u003Cp\u003E\nIf I make a small vessel and recover that, things look normal and it\u0027s the \u0022old\u0022 correct equation applied.\n\u003C/p\u003E\n\u003Cp\u003E\nAny idea what could be wrong?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMy mod list:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n000_AT_Utils\u003Cbr\u003E\n000_ClickThroughBlocker\u003Cbr\u003E\n000_FilterExtensions\u003Cbr\u003E\n000_FilterExtensions_Configs\u003Cbr\u003E\n000_USITools\u003Cbr\u003E\n001_ToolbarControl\u003Cbr\u003E\nB9AnimationModules\u003Cbr\u003E\nB9PartSwitch\u003Cbr\u003E\nB9_Aerospace\u003Cbr\u003E\nB9_Aerospace_HX\u003Cbr\u003E\nB9_Aerospace_ProceduralWings\u003Cbr\u003E\nBetterTimeWarp\u003Cbr\u003E\nChatterer\u003Cbr\u003E\nCommunityCategoryKit\u003Cbr\u003E\nCommunityResourcePack\u003Cbr\u003E\nCTTP\u003Cbr\u003E\nDeployableEngines\u003Cbr\u003E\nDistantObject\u003Cbr\u003E\nDynamicBatteryStorage\u003Cbr\u003E\nEasyVesselSwitch\u003Cbr\u003E\nEnvironmentalVisualEnhancements\u003Cbr\u003E\nExplainer\u003Cbr\u003E\nFerramAerospaceResearch\u003Cbr\u003E\nFirespitter\u003Cbr\u003E\nFShangarExtender\u003Cbr\u003E\nFuelTanksPlus\u003Cbr\u003E\nGravityTurn\u003Cbr\u003E\nGroundConstruction\u003Cbr\u003E\nHeatControl\u003Cbr\u003E\nJSI\u003Cbr\u003E\u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E\u003Cbr\u003E\nKerbalEngineer\u003Cbr\u003E\u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E\u003Cbr\u003E\nKopernicus\u003Cbr\u003E\nKSPRescuePodFix\u003Cbr\u003E\nLETech\u003Cbr\u003E\nMarkIVSystem\u003Cbr\u003E\nMechJeb2\u003Cbr\u003E\nmods.txt\u003Cbr\u003E\nModularFlightIntegrator\u003Cbr\u003E\nModuleManager.3.1.1.dll\u003Cbr\u003E\nModuleManager.ConfigCache\u003Cbr\u003E\nModuleManager.ConfigSHA\u003Cbr\u003E\nModuleManager.Physics\u003Cbr\u003E\nModuleManager.TechTree\u003Cbr\u003E\nNavyFish\u003Cbr\u003E\nNearFutureAeronautics\u003Cbr\u003E\nNearFutureConstruction\u003Cbr\u003E\nNearFutureElectrical\u003Cbr\u003E\nNearFutureLaunchVehicles\u003Cbr\u003E\nNearFutureProps\u003Cbr\u003E\nNearFuturePropulsion\u003Cbr\u003E\nNearFutureSolar\u003Cbr\u003E\nNearFutureSpacecraft\u003Cbr\u003E\nOPM\u003Cbr\u003E\nOPM_FinalFrontier\u003Cbr\u003E\nPlanetShine\u003Cbr\u003E\nPoodsSkyboxes\u003Cbr\u003E\nPreciseNode\u003Cbr\u003E\nProceduralDynamics\u003Cbr\u003E\nProceduralParts\u003Cbr\u003E\nRCSBuildAid\u003Cbr\u003E\nRealPlume\u003Cbr\u003E\nRealPlume-Stock\u003Cbr\u003E\nSCANsat\u003Cbr\u003E\nscatterer\u003Cbr\u003E\nShipManifest\u003Cbr\u003E\nSigma\u003Cbr\u003E\nSmokeScreen\u003Cbr\u003E\nSpaceY-Expanded\u003Cbr\u003E\nSpaceY-Lifters\u003Cbr\u003E\nSquad\u003Cbr\u003E\nStationPartsExpansionRedux\u003Cbr\u003E\nSurfaceLights\u003Cbr\u003E\nTheWorldBeyond\u003Cbr\u003E\nTrackingStationEvolved\u003Cbr\u003E\nTriggerTech\u003Cbr\u003E\nUmbraSpaceIndustries\u003Cbr\u003E\nVenStockRevamp\u003Cbr\u003E\nWildBlueIndustries\u003Cbr\u003E\nWorkshop\u003Cbr\u003E\nzFinal_FilterExtensions\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Gargamel","CreatedById":64714,"CreatedDateTime":"2018-11-24T18:13:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223492819\u0022 data-ipsquote-contentid=\u0022180040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221543064978\u0022 data-ipsquote-userid=\u0022192825\u0022 data-ipsquote-username=\u0022TackleMcClean\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, TackleMcClean said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m using \u003Cabbr title=\u0022Umbra Space Industries (a collection of mods)\u0022\u003EUSI\u003C/abbr\u003E MKS\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTake a look in the MKS threads, they might have encountered this before.\n\u003C/p\u003E\n\u003Cp\u003E\nBut also, recover one of these vessels, and post up your Ksp.log, it might have some info we could use.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2018-11-24T19:44:35Z","Content":"\n\u003Cp\u003E\nAre you 100% sure?\n\u003C/p\u003E\n\u003Cp\u003E\n1000% sure?\n\u003C/p\u003E\n\u003Cp\u003E\nThe screen where you recover your craft actually tells you both, and I always thought the \u0022total funds\u0022 was a bit too prominent compared to the \u0022recovered funds\u0022\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022T0a2MCo.png\u0022 class=\u0022ipsImage\u0022 height=\u0022499\u0022 src=\u0022https://i.imgur.com/T0a2MCo.png\u0022 width=\u0022404\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThat big blue number is your total funds. Recovered funds is right above it, dimmer and less prominent.\n\u003C/p\u003E\n\u003Cp\u003E\nImage stolen from this post, unstolen by virtue of attribution:\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed5749958005\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/78538-recovered-parts-and-refunds/\u0026amp;do=embed\u0026amp;comment=1275632\u0026amp;embedComment=1275632\u0026amp;embedDo=findComment\u0022 style=\u0022height:280px;max-width:500px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-11-25T01:51:59Z\u0022 title=\u002211/25/2018 01:51  AM\u0022 data-short=\u00225 yr\u0022\u003ENovember 25, 2018\u003C/time\u003E by 5thHorseman\u003C/strong\u003E\n\u003Cbr\u003EGramar and speeling fixs.\n\u003C/span\u003E\n"},{"CreatedByName":"TackleMcClean","CreatedById":192825,"CreatedDateTime":"2018-11-25T23:00:51Z","Content":"\n\u003Cp\u003E\nI\u0027m 100% sure.\n\u003C/p\u003E\n\u003Cp\u003E\nExample of how it looks:\n\u003C/p\u003E\n\u003Cp\u003E\nBefore recovery, 52.6 mil\u003Cbr\u003E\u003Cimg alt=\u0022OS3gt2q.png\u0022 class=\u0022ipsImage\u0022 height=\u002249\u0022 src=\u0022https://i.imgur.com/OS3gt2q.png\u0022 width=\u0022219\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAfter recovering 83 mil, it should be 52 \u002B 83 mil, but instead:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022gW2nNFQ.png\u0022 class=\u0022ipsImage\u0022 height=\u0022768\u0022 src=\u0022https://i.imgur.com/gW2nNFQ.png\u0022 width=\u0022532\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nNow, I\u00A0\u003Cstrong\u003Ethink\u003C/strong\u003E\u00A0I\u0027m onto something here.. I just tried this again (not the same numbers in screenshots there), and checking the persistent.loadmeta I notice the funds is using a float value instead of integer.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, recovering 49.8 million, while previously having 30 million, nets you:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Efunds = 49883974.30078125\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s not adding; it\u0027s appending. Am I refunding too large sums?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-11-25T23:38:28Z\u0022 title=\u002211/25/2018 11:38  PM\u0022 data-short=\u00225 yr\u0022\u003ENovember 25, 2018\u003C/time\u003E by TackleMcClean\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gargamel","CreatedById":64714,"CreatedDateTime":"2018-11-25T23:43:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223493667\u0022 data-ipsquote-contentid=\u0022180040\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221543186851\u0022 data-ipsquote-userid=\u0022192825\u0022 data-ipsquote-username=\u0022TackleMcClean\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n40 minutes ago, TackleMcClean said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAm I refunding too large sums?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat could very well be your issue.\u00A0\u00A0\u00A0 Try recovering something for 50k, right off the pad, and see if it works.\u00A0 Then keep increasing the value till you see a failure.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis might just be the case of the devs not foreseeing how crazy we really are, and using a variable type that can\u0027t handle the size, although, the behavior really doesn\u0027t match that exact hypothesis.\u00A0\n\u003C/p\u003E\n"}]}