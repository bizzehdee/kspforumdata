{"TopicId":205834,"ForumId":20,"TopicTitle":"Kerbalism Greenhouses - Convert to rate based instead of harvest based.","CreatedByName":"RoadWarrior9","CreatedById":217718,"CreatedDateTime":"2021-12-02T22:21:18Z","PageNum":1,"Articles":[{"CreatedByName":"RoadWarrior9","CreatedById":217718,"CreatedDateTime":"2021-12-02T22:21:18Z","Content":"\n\u003Cp\u003E\nI came up with a workaround (config) that should allow the default greenhouse that comes with kerbalism to use a rate based food per second output instead of having to go to the ship and harvest the food when the harvest is ready every 200 days. This sets the harvest time to \u0026gt;1000 years and adds a resource output of food (along with oxygen) that should match the old output. There are also configs that modify and add the greenhouse functionality to the Stockalike Station Parts Redux greenhouse parts. Create a folder like zMyMods and create a *.cfg file and copy the sections you want to it.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E//Kerbalism greenhouse patchs\n\n@PART[kerbalism-greenhouse]:NEEDS[ProfileDefault]:AFTER[KerbalismDefault]  // Default Kerbalism greenhouse\n{\n  @MODULE[Greenhouse]\n  {\n    @crop_rate = 0.00000000005\n\t\n\tOUTPUT_RESOURCE\n\t{\n\t\tname = Food\n\t\trate = 0.000003190104\n\t}\n  }\n}\n\n@PART[sspx-greenhouse-25-1]:NEEDS[StationPartsExpansionRedux,ProfileDefault]:AFTER[KerbalismDefault]  // PPD-F412M Hydroponics Module\n{\n\t@MODULE[Greenhouse]\n\t{\n\t\t@crop_rate = 0.00000000005\n\n\t\tOUTPUT_RESOURCE\n\t\t{\n\t\t\tname = Food\n\t\t\trate = 0.000006380208\n\t\t}\n\t}\n\t\n\tMODULE\n\t{\n\t\tname = Comfort\n\t\tbonus = plants\n\t\tdesc =  There\u0027s something inherently calming about an artificial slice of nature, kept alive only by the miracles of duct-tape and kerbal engineering. Let\u0027s hope the crew doesn\u0027t think too much about it.\n\t}\n}\n\n@PART[sspx-greenhouse-375-1]:NEEDS[StationPartsExpansionRedux,ProfileDefault]:AFTER[KerbalismDefault]  // PXL-R4NCH-3R Hydroponics Module\n{\n\t@MODULE[Greenhouse]\n\t{\n\t\t@crop_rate = 0.00000000005\n\n\t\tOUTPUT_RESOURCE\n\t\t{\n\t\t\tname = Food\n\t\t\trate = 0.000006380208\n\t\t}\n\t}\n\t\n\tMODULE\n\t{\n\t\tname = Comfort\n\t\tbonus = plants\n\t\tdesc =  There\u0027s something inherently calming about an artificial slice of nature, kept alive only by the miracles of duct-tape and kerbal engineering. Let\u0027s hope the crew doesn\u0027t think too much about it.\n\t}\n}\n\n@PART[sspx-greenhouse-5-1]:NEEDS[StationPartsExpansionRedux,ProfileDefault]:AFTER[KerbalismDefault]  // SDV-4 \u0027Demeter\u0027 Cultivation Module\n{\n\t!MODULE[Greenhouse] {}\n\tMODULE\n\t{\n\t\tname = Greenhouse\n\n\t\tcrop_resource = Food\n\t\tcrop_size = 110.0\n\t\tcrop_rate = 0.00000000005\n\t\tec_rate = 10\n\t\tlight_tolerance = 400.0\n\t\tpressure_tolerance = 0.1\n\t\tradiation_tolerance = 0.000008333\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = Ammonia\n\t\t\trate = 0.0003828125\n\t\t}\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = Water\n\t\t\trate = 0.0000127604\n\t\t}\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = WasteAtmosphere\n\t\t\trate = 0.004983199\n\t\t}\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = CarbonDioxide\n\t\t\trate = 0.0016610663\n\t\t}\n\n\t\tOUTPUT_RESOURCE\n\t\t{\n\t\t\tname = Oxygen\n\t\t\trate = 0.006895193\n\t\t}\n\n\t\tOUTPUT_RESOURCE\n\t\t{\n\t\t\tname = Food\n\t\t\trate = 0.000012760416\n\t\t}\n\t}\n\n\tMODULE\n\t{\n\t\tname = Comfort\n\t\tbonus = plants\n\t\tdesc =  There\u0027s something inherently calming about an artificial slice of nature, kept alive only by the miracles of duct-tape and kerbal engineering. Let\u0027s hope the crew doesn\u0027t think too much about it.\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = Ammonia\n\t\tamount = 1000\n\t\tmaxAmount = 1000\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = CarbonDioxide\n\t\tamount = 18000\n\t\tmaxAmount = 18000\n\t}\n\n\t// To support pressure control\n\t@MODULE[Configure]\n\t{\n\t\t@SETUP[Pressure?Control]\n\t\t{\n\t\t!RESOURCE[Nitrogen] {}\n\t\t}\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = Nitrogen\n\t\tamount = 20000\n\t\tmaxAmount = 20000\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = Water\n\t\tamount = 50\t\n\t\tmaxAmount = 50\n\t}\n}\n\n@PART[sspx-dome-greenhouse-5-1]:NEEDS[StationPartsExpansionRedux,ProfileDefault]:AFTER[KerbalismDefault]  // SDV-G2 \u0027Villa\u0027 Cultivation Dome\n{\n\t!MODULE[Greenhouse] {}\n\tMODULE\n\t{\n\t\tname = Greenhouse\n\n\t\tcrop_resource = Food\t\t\t\t\t\t\t\t// name of resource produced by harvests\n\t\t// Twice as effective as kerbalism-greenhouse part. \n\t\t// See https://forum.kerbalspaceprogram.com/index.php?/topic/172400-131145-kerbalism-v180/\u0026amp;page=32\u0026amp;tab=comments#comment-3446891 for details.\n\n\t\t// Both growing \u0022rings\u0022 of this greenhouse are unfortunately in the same section. No independent growing possible. (Different watering and lighting needs for different grow stages). \n\t\tcrop_size = 80.0\t\t\t\t\t\t\t\t\t// 2x kerbalism-greenhouse\n\t\tcrop_rate = 0.00000000005\t\t\t\t\t // regular growth speed\n\t\tec_rate = 7\t\t\t\t\t\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\tlight_tolerance = 400.0\t\t\t\t\t\t // minimum lighting flux required for growth, in W/m^2\n\t\tpressure_tolerance = 0.1\t\t\t\t\t\t// minimum pressure required for growth, in sea level atmospheres\n\t\tradiation_tolerance = 0.000008333\t // maximum radiation allowed for growth in rad/s, considered after shielding is applied\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = Ammonia\n\t\t\trate = 0.0002777777\t\t\t\t\t\t\t// 2x\u0022kerbalism-greenhouse\u0022\n\t\t}\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = Water\n\t\t\trate = 0.000009259247\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\t}\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = WasteAtmosphere\t\t\t\t\t\t// Plants work on WasteAtmosphere and replace a scrubber, if not enough WasteAtmosphere exists then CO2 is used\n\t\t\trate = 0.0036159\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\t}\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = CarbonDioxide\t\t\t\t\t\t\t// Kerbals don\u0027t provide enough WasteAtmosphere for their required food production. If excess WasteAtmosphere is\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// present then it will be used in place of CO2 injection\n\t\t\trate = 0.0012053\t\t\t\t\t\t\t// 2x\u0022kerbalism-greenhouse\u0022\n\t\t}\n\n\t\t// Note. if there is a deficiency in the amount of WasteAtmosphere needed then the missing amount of WasteAtmosphere will be added to the\n\t\t// CarbonDioxide input and Vies Versa if not enough CarbonDioxide is present and there is extra WasteAtmosphere.\n\t\t// If there is not enough resources then the plants will suffer.\n\n\t\tOUTPUT_RESOURCE\n\t\t{\n\t\t\tname = Oxygen\n\t\t\trate = 0.00500331\t\t\t\t\t\t\t // 200% of oxygen required by 1 crew member\n\t\t}\n\n\t\tOUTPUT_RESOURCE\n\t\t{\n\t\t\tname = Food\n\t\t\trate = 0.00000992592587\t\t\t\t\t\t // 200% of oxygen required by 1 crew member\n\t\t}\n\t}\n\n\tMODULE\n\t{\n\t\tname = Comfort\n\t\tbonus = plants\n\t\tdesc =  There\u0027s something inherently calming about an artificial slice of nature, kept alive only by the miracles of duct-tape and kerbal engineering. Let\u0027s hope the crew doesn\u0027t think too much about it.\n\t}\n\n\t//\tConcider those nice IVA tanks and closets for increasing current resource capacity. I won\u0027t touch em for now.\n\tRESOURCE\n\t{\n\t\tname = Ammonia\n\t\tamount = 750\t\t\t\t\t\t\t\t\t\t\t\t// 2x\u0022kerbalism-greenhouse\u0022\n\t\tmaxAmount = 750\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = CarbonDioxide\n\t\tamount = 15000\t\t\t\t\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\tmaxAmount = 15000\n\t}\n\n\t// To support pressure control\n\t@MODULE[Configure]\n\t{\n\t\t@SETUP[Pressure?Control]\n\t\t{\n\t\t!RESOURCE[Nitrogen] {}\n\t\t}\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = Nitrogen\n\t\tamount = 15000\t\t\t\t\t\t\t\t\t\t\t// 1x\u0022kerbalism-greenhouse\u0022 as it does not mess with crops\n\t\tmaxAmount = 15000\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = Water\n\t\tamount = 35\t\t\t\t\t\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\tmaxAmount = 35\n\t}\n}\n\n\n@PART[sspx-aquaculture-375-1]:NEEDS[StationPartsExpansionRedux,ProfileDefault]:AFTER[KerbalismDefault]  // PXL-F15H Aquaculture Module\n{\n\t!MODULE[Greenhouse] {}\n\tMODULE\n\t{\n\t\tname = Greenhouse\n\n\t\tcrop_resource = Food\t\t\t\t\t\t\t\t// name of resource produced by harvests\n\t\t// Twice as effective as kerbalism-greenhouse part. \n\t\t// See https://forum.kerbalspaceprogram.com/index.php?/topic/172400-131145-kerbalism-v180/\u0026amp;page=32\u0026amp;tab=comments#comment-3446891 for details.\n\n\t\t// Both growing \u0022rings\u0022 of this greenhouse are unfortunately in the same section. No independent growing possible. (Different watering and lighting needs for different grow stages). \n\t\tcrop_size = 55\t\t\t\t\t\t\t\t\t// 2x kerbalism-greenhouse\n\t\tcrop_rate = 0.00000000005\t\t\t\t\t // regular growth speed\n\t\tec_rate = 5\t\t\t\t\t\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\tlight_tolerance = 400.0\t\t\t\t\t\t // minimum lighting flux required for growth, in W/m^2\n\t\tpressure_tolerance = 0.1\t\t\t\t\t\t// minimum pressure required for growth, in sea level atmospheres\n\t\tradiation_tolerance = 0.000008333\t // maximum radiation allowed for growth in rad/s, considered after shielding is applied\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = Ammonia\n\t\t\trate = 0.00019140625\t\t\t\t\t\t\t// 2x\u0022kerbalism-greenhouse\u0022\n\t\t}\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = Water\n\t\t\trate = 0.0000063802\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\t}\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = WasteAtmosphere\t\t\t\t\t\t// Plants work on WasteAtmosphere and replace a scrubber, if not enough WasteAtmosphere exists then CO2 is used\n\t\t\trate = 0.0024915995\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\t}\n\n\t\tINPUT_RESOURCE\n\t\t{\n\t\t\tname = CarbonDioxide\t\t\t\t\t\t\t// Kerbals don\u0027t provide enough WasteAtmosphere for their required food production. If excess WasteAtmosphere is\n\t\t\trate = 0.00083053315\t\t\t\t\t\t\t// 2x\u0022kerbalism-greenhouse\u0022\n\t\t}\n\n\t\t// Note. if there is a deficiency in the amount of WasteAtmosphere needed then the missing amount of WasteAtmosphere will be added to the\n\t\t// CarbonDioxide input and Vies Versa if not enough CarbonDioxide is present and there is extra WasteAtmosphere.\n\t\t// If there is not enough resources then the plants will suffer.\n\n\t\tOUTPUT_RESOURCE\n\t\t{\n\t\t\tname = Oxygen\n\t\t\trate = 0.0034475965\t\t\t\t\t\t\t // 200% of oxygen required by 1 crew member\n\t\t}\n\n\t\tOUTPUT_RESOURCE\n\t\t{\n\t\t\tname = Food\n\t\t\trate = 0.000006380208\t\t\t\t\t\t // 200% of oxygen required by 1 crew member\n\t\t}\n\t}\n\n\tMODULE\n\t{\n\t\tname = Comfort\n\t\tbonus = plants\n\t\tdesc =  There\u0027s something inherently calming about an artificial slice of nature, kept alive only by the miracles of duct-tape and kerbal engineering. Let\u0027s hope the crew doesn\u0027t think too much about it.\n\t}\n\n\t//\tConcider those nice IVA tanks and closets for increasing current resource capacity. I won\u0027t touch em for now.\n\tRESOURCE\n\t{\n\t\tname = Ammonia\n\t\tamount = 544\t\t\t\t\t\t\t\t\t\t\t\t// 2x\u0022kerbalism-greenhouse\u0022\n\t\tmaxAmount = 544\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = CarbonDioxide\n\t\tamount = 9000\t\t\t\t\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\tmaxAmount = 9000\n\t}\n\n\t// To support pressure control\n\t@MODULE[Configure]\n\t{\n\t\t@SETUP[Pressure?Control]\n\t\t{\n\t\t!RESOURCE[Nitrogen] {}\n\t\t}\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = Nitrogen\n\t\tamount = 10000\t\t\t\t\t\t\t\t\t\t\t// 1x\u0022kerbalism-greenhouse\u0022 as it does not mess with crops\n\t\tmaxAmount = 10000\n\t}\n\n\tRESOURCE\n\t{\n\t\tname = Water\n\t\tamount = 22\t\t\t\t\t\t\t\t\t\t\t\t // 2x\u0022kerbalism-greenhouse\u0022\n\t\tmaxAmount = 22\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-12-02T22:22:18Z\u0022 title=\u002212/02/2021 10:22  PM\u0022 data-short=\u00222 yr\u0022\u003EDecember 2, 2021\u003C/time\u003E by RoadWarrior9\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"king of nowhere","CreatedById":204876,"CreatedDateTime":"2021-12-04T20:47:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224061377\u0022 data-ipsquote-contentid=\u0022205834\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221638483678\u0022 data-ipsquote-userid=\u0022217718\u0022 data-ipsquote-username=\u0022RoadWarrior9\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 12/2/2021 at 11:21 PM, RoadWarrior9 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI came up with a workaround (config) that should allow the default greenhouse that comes with kerbalism to use a rate based food per second output instead of having to go to the ship and harvest the food when the harvest is ready every 200 days. This sets the harvest time to \u0026gt;1000 years and adds a resource output of food (along with oxygen) that should match the old output. There are also configs that modify and add the greenhouse functionality to the Stockalike Station Parts Redux greenhouse parts. Create a folder like zMyMods and create a *.cfg file and copy the sections you want to it.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nok, let me get this straight:\n\u003C/p\u003E\n\u003Cp\u003E\n1) I only have kerbalism greenhouses, so i only need\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E@PART[kerbalism-greenhouse]:NEEDS[ProfileDefault]:AFTER[KerbalismDefault]  // Default Kerbalism greenhouse\n{\n  @MODULE[Greenhouse]\n  {\n    @crop_rate = 0.00000000005\n\t\n\tOUTPUT_RESOURCE\n\t{\n\t\tname = Food\n\t\trate = 0.000003190104\n\t}\n  }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nthis part, right?\n\u003C/p\u003E\n\u003Cp\u003E\n2) I can do that to my exhisting profile, and it will start working for missions already in progress?\n\u003C/p\u003E\n\u003Cp\u003E\n3) where exactly do I need to copy the stuff? do i make a new config file, or do I copy into an exhisting config file?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nif so, you\u0027ve done me a huge service\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-12-04T20:50:38Z\u0022 title=\u002212/04/2021 08:50  PM\u0022 data-short=\u00222 yr\u0022\u003EDecember 4, 2021\u003C/time\u003E by king of nowhere\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RoadWarrior9","CreatedById":217718,"CreatedDateTime":"2021-12-04T20:52:25Z","Content":"\n\u003Cp\u003E\nThat should work. I put it in an existing game and it changed to the rate based version with no issues. If you have a harvest pending you may need to complete the harvest to get the rate part working. Also you may need to change the section \u0022\u003Cspan\u003E:\u003C/span\u003EAFTER[KerbalismDefault]\u0022 to \u0022:FINAL\u0022 depending on what order your patch runs. This should run after kerbalism. I would suggest putting personal patches in a folder called \u0022zz...\u0022 so it loads after all of the other patches. I think module manager loads by folder name if everything else is the same.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-12-04T20:55:44Z\u0022 title=\u002212/04/2021 08:55  PM\u0022 data-short=\u00222 yr\u0022\u003EDecember 4, 2021\u003C/time\u003E by RoadWarrior9\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"king of nowhere","CreatedById":204876,"CreatedDateTime":"2021-12-04T21:26:52Z","Content":"\n\u003Cp\u003E\nfor the stock greenhouse, you made a calculation mistake. food per second should be\n\u003C/p\u003E\n\u003Cp\u003E\n0.0000063796\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\ni applied the patch to my game, where I had this self-sufficient ship, and it was losing food. i remade the calculations, and I got the new value, which is almost twice the one you posted.\n\u003C/p\u003E\n\u003Cp\u003E\nCan\u0027t say if there are similar mistakes with the other greenhouses, as i don\u0027t have those mods\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: but aside from that, it works perfectly.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:72px;\u0022\u003ETHANK YOU\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nDo you have an idea what it means to run a 300-years mission and having to stop every 200 days to harvest food? i wish i had that earlier.\n\u003C/p\u003E\n\u003Cp\u003E\n(in retrospect, it\u0027s simple enough that i could have done it myself. but i never thought of just ignoring the normal crop cycle)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-12-04T21:38:51Z\u0022 title=\u002212/04/2021 09:38  PM\u0022 data-short=\u00222 yr\u0022\u003EDecember 4, 2021\u003C/time\u003E by king of nowhere\u003C/strong\u003E\n\u003C/span\u003E\n"}]}