{"TopicId":162859,"ForumId":29,"TopicTitle":"How to programmatically add an outline to a text object?","CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2017-07-03T22:42:38Z","PageNum":1,"Articles":[{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2017-07-03T22:42:38Z","Content":"\n\u003Cp\u003E\nI have \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/126111-13-betterburntime-v154-accurate-burn-time-indicator-on-navball-no-more-na/\u0026amp;do=findComment\u0026amp;comment=3110157\u0022 rel=\u0022\u0022\u003Eheard it rumored\u003C/a\u003E (thanks, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57416-dmagic/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257416\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57416-dmagic/\u0022 rel=\u0022\u0022\u003E@DMagic\u003C/a\u003E!) that it\u0027s possible to set a shader on a Unity text object so that it has an outline around it (e.g. for better visibility).\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, the only info I have at the moment is this link:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://digitalnativestudios.com/textmeshpro/docs/shaders/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://digitalnativestudios.com/textmeshpro/docs/shaders/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n...which I have no idea what to do with, since it doesn\u0027t talk about any sort of programmatic API at all.\u00A0 Looks like it\u0027s some sort of UI tool documentation.\n\u003C/p\u003E\n\u003Cp\u003E\nBasically, my issue is, I\u0027ve got a \u003Cstrong\u003ETextMeshProUGUI\u003C/strong\u003E object, and I want to somehow set the outline to something.\u00A0 (The text currently has no outline.)\u00A0 I\u0027m guessing that what I need to do is to somehow navigate the maze of object references to find a shader upon which I can set a property... except that I have no clue how to do that.\u00A0 Too many object references all over the place, no idea if I need to navigate up the inheritance hierarchy or down into owned sub-objects or downcast something (Unity does this a lot, ugh), or whatever.\u00A0 I\u0027m in a maze of twisty passages, all alike.\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone have any suggestions as to how I might do this?\u00A0 Any advice much appreciated!\n\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2017-07-03T23:34:50Z","Content":"\n\u003Cp\u003E\nBasically all that you have to do is set the TextMeshProUGUI.outlineWidth to something greater than zero, and you can change the outlineColor.\n\u003C/p\u003E\n\u003Cp\u003E\nThe problems that might arise could come from instantiating the new TMP object from an existing object in KSP, rather than a new object. And from setting the material. There are materials that seem to be specific for outlined text, but I\u0027m not sure how important that is, you can try just leaving the material alone and see what happens. There is also some very odd behavior that I\u0027ve seen in \u003Ca href=\u0022https://github.com/S-C-A-N/SCANsat/blob/dev/SCANsat/SCAN_Unity/SCAN_UI_Loader.cs#L799-L809\u0022 rel=\u0022external nofollow\u0022\u003ESCANsat\u003C/a\u003E when trying to change the outline width.\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2017-07-04T00:54:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223110217\u0022 data-ipsquote-contentid=\u0022162859\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221499124890\u0022 data-ipsquote-userid=\u002257416\u0022 data-ipsquote-username=\u0022DMagic\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, DMagic said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBasically all that you have to do is set the TextMeshProUGUI.outlineWidth to something greater than zero, and you can change the outlineColor.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you!\u00A0 Yes, that looks like the thing.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, it doesn\u0027t do what I\u0027d hoped.\u00A0 Basically, it appears to be drawing a an outline of some width \u003Cem\u003E\u003Cu\u003Ein front\u003C/u\u003E\u003C/em\u003E of the text.\u00A0 If my text were big and fat and I was just adding a one or two pixel wide border around it, that would be no problem... but my text is only one pixel wide to start with, and the outline is centered on the text\u0027s edge, such that adding even a 1-pixel-wide \u0022outline\u0022 isn\u0027t \u003Cem\u003E\u003Cu\u003Eoutside\u003C/u\u003E\u003C/em\u003E the text and completely obscures the text itself.\u00A0 So, looks like this won\u0027t work.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m sure some sort of fancy solution would be possible by drawing two text objects and putting one on top of the other, or some such... but that\u0027s going outside the bounds of what I\u0027m interested in doing (too much complexity for too little payoff)-- think I\u0027ll just abandon ship at this point, it\u0027s simply not worth it.\n\u003C/p\u003E\n\u003Cp\u003E\nThank you very much for the help!\n\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2017-07-04T02:02:52Z","Content":"\n\u003Cp\u003E\nDid you try making the font size bigger?\n\u003C/p\u003E\n\u003Cp\u003E\nJust to be clear,\u00A0the desired result is to have green text of the same size as used by the stock maneuver node readout, \u00A0but with a thin black outline to aid readability?\n\u003C/p\u003E\n\u003Cp\u003E\nThat should be possible by playing around with the font size and the outline width (which is a float that can be set to less than 1). The TMP object font size can be changed at any time, and you can also set the font size with TMP rich text tags.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-07-04T02:19:37Z\u0022 title=\u002207/04/2017 02:19  AM\u0022 data-short=\u00227 yr\u0022\u003EJuly 4, 2017\u003C/time\u003E by DMagic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2017-07-04T03:30:17Z","Content":"\n\u003Cp\u003E\nI could try playing around a bit more.\u00A0 But even just the small amount that I\u0027ve done so far tells me that it\u0027s going to be... kludgy.\u00A0 It\u0027s clear that these are very simplistically implemented shaders.\u00A0 For example, the outline color I\u0027d want would be essentially black with a large alpha component-- not an opaque line.\u00A0 And I\u0027ve already seen that where the outline from letter 1 overlaps the outline for letter 2, the two partially-transparent overlapping things result in an overlap that\u0027s visibly darker, like two circles of a Venn diagram.\u00A0 It looks horrible.\n\u003C/p\u003E\n\u003Cp\u003E\nCould I eventually trick it into doing something that approximately does what I want? Perhaps, but so far it\u0027s feeling like it would be a lot of work for a feature that I don\u0027t actually \u003Cem\u003E\u003Cu\u003Ehave\u003C/u\u003E\u003C/em\u003E to have-- I was just hoping that it was a low-hanging fruit.\u00A0 If it\u0027s halfway up the tree and I have to construct a stepladder to get there, this particular feature is probably not worth it to me.\n\u003C/p\u003E\n\u003Cp\u003E\n(I know I probably seem pretty feckless here-- it\u0027s just that my admittedly limited experience working with Unity UI elements thus far is that they\u0027re nightmarishly finicky and complex, and very easy to go wrong in arcane ways at run time; as a developer, they just give me the slithering creeps, and I find myself very unmotivated to try to wrestle them into submission.\u00A0 Which is one of the reasons why basically all of my mods avoid UI like the plague.\u00A0 I\u0027ve generally been pretty happy with the \u003Cem\u003E\u003Cu\u003EKSP\u003C/u\u003E\u003C/em\u003E API, but I gotta say that I positively loathe Unity\u0027s.)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll probably spend another hour or so fiddling with it, but I\u0027m not super optimistic.\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2017-07-04T08:28:29Z","Content":"\n\u003Cp\u003E\nThat feels more like you want\u00A0a shadow to make it easier to read ? In GCMonitor I do \u003Ca href=\u0022https://github.com/sarbian/GCMonitor/blob/master/GCMonitor.cs#L730-L731\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E for a shadow. I forgot is there is an easy way to list all available fonts materials.\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2017-07-04T14:43:34Z","Content":"\n\u003Cp\u003E\nYes, a drop-shadow would be another good way to accomplish this.\u00A0 Thanks for the suggestion!\n\u003C/p\u003E\n\u003Cp\u003E\nPart of the issue, though, is that I don\u0027t actually \u0022own\u0022 all of the objects involved.\u00A0 Some of them, but not all of them.\u00A0 The context of all this is that I\u0027m considering adding a feature to BetterBurnTime to aid readability.\u00A0 The text in question is down next to the navball-- it\u0027s the \u0022estimated burn time\u0022 and \u0022time until burn\u0022 text.\u00A0 Depending on what\u0027s going on with the player, the text in question might be an object that \u003Cem\u003E\u003Cu\u003EI\u003C/u\u003E\u003C/em\u003E create, own, and manage (e.g. the \u0022impact tracker\u0022 and \u0022closest approach tracker\u0022 features of BBT), or it might be the actual maneuver node burn vector indicator itself, which is owned and managed by the stock game, and I tinker with it only by fiddling with the \u003Cem\u003E\u003Cu\u003Egame\u0027s\u003C/u\u003E\u003C/em\u003E owned/managed object-- e.g. by adjusting the content of the text.\n\u003C/p\u003E\n\u003Cp\u003E\nSo any solution that involves creating additional objects and managing their lifetime is kind of problematic, because they\u0027d need to be tied to an object that I \u003Cem\u003E\u003Cu\u003Edon\u0027t\u003C/u\u003E\u003C/em\u003E own and manage, which somewhat limits my wiggle room.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd like I said, it\u0027s not something I consider a must-have feature.\u00A0 If it were just a matter of adding a line or two of code in a couple of places so I can make it work with an hour or two of work, that would be great; but this feels more like a \u0022multi-day effort with lots of debugging and testing and trial-and-error\u0022, which puts it on the wrong side of the cost/benefit curve for me.\n\u003C/p\u003E\n"}]}