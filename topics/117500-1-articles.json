{"TopicId":117500,"ForumId":15,"TopicTitle":"Colliders make me think angry thoughts - Concavity","CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-08-03T03:42:48Z","PageNum":1,"Articles":[{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-08-03T03:42:48Z","Content":"\n\u003Cp\u003EI\u0027m aware you cannot have a concave collider in Unity/KSP, so I slapped together 26 convex colliders to make this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/z3xhT23.png\u0022 alt=\u0022z3xhT23.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt is an adapter of sorts. I want those sides to be there so you can attach things to them, and everything is good and well until you try and stick something inside it (like an engine that it was meant to house):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/6RzoNhZ.png\u0022 alt=\u00226RzoNhZ.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/ca9kiva.png\u0022 alt=\u0022ca9kiva.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs you may have guessed, this is not the intended orientation of the engine. I initially had a single collider and assumed that Unity/KSP was assuming it was representing the top of the object (which it sort of is). So, I added a second collider just beneath it. Same thing. I\u0027ve since redone the entire thing from scratch, including all 26 colliders, and got the same result. I checked the normals of the colliders, they are correct. I tried unparenting them from the mesh object, same deal. I even tried changing the origins, no joy. \u003C/p\u003E\u003Cp\u003EFrom fiddling around with it, I can gather that if the face of the collider you\u0027re trying to attach things to is above the center of the object, objects snap on to the \u0022top\u0022. Same for below the center, they snap on to the bottom. Presumably it works the same way on either side, because the outer faces work fine. From this I can safely assume that Unity/KSP uses this method to determine outward facings, and now understand why cargo bays are such a pain in the butt.\u003C/p\u003E\u003Cp\u003ESo, I suppose I basically need to know if anyone has found a workaround for this, or am I just going to have to resort to a flat plate?\u003C/p\u003E\u003Cp\u003EEdit: I did have an inkling of an idea about maybe being able to set orientation via node_collider, but I can\u0027t find any useful documentation on it that tells me something other than \u0022defines the collider\u0022.\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-08-03T03:56:35Z","Content":"\n\u003Cp\u003EIs that engine surface or stack-attached to the underside of the part? You might need to check the surface attachment definitions for the engine itself.\u003C/p\u003E\n"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-08-03T05:33:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sumghai\u0022 data-cite=\u0022sumghai\u0022\u003E\u003Cdiv\u003EIs that engine surface or stack-attached to the underside of the part? You might need to check the surface attachment definitions for the engine itself.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt is surface attachable, and it works correctly if I set the attach node to -1 instead of 1, but I don\u0027t really want to do that because then the engine attaches upside down to everything else.\u003C/p\u003E\u003Cp\u003EEdit: Turning off angle snap seems to allow them to attach in the correct direction, but I don\u0027t care for that as a solution since it requires moving them around afterwards with angle snap on again, and that pulls them up inside the model too far.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-03T05:59:35Z\u0022 title=\u002208/03/2015 05:59  AM\u0022 data-short=\u00228 yr\u0022\u003EAugust 3, 2015\u003C/time\u003E by Randazzo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-08-03T07:36:20Z","Content":"\n\u003Cp\u003EWhere\u0027s the root transform for the adaptor part? I\u0027m wondering if KSP is measuring position against that to figure out the \u0022out\u0022 direction, and if you move it inside the collider you\u0027re attaching to, there might be a small chance that\u0027ll fix it.\u003C/p\u003E\n"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-08-03T09:16:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003EWhere\u0027s the root transform for the adaptor part? I\u0027m wondering if KSP is measuring position against that to figure out the \u0022out\u0022 direction, and if you move it inside the collider you\u0027re attaching to, there might be a small chance that\u0027ll fix it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt started out in the center of the collider, then I moved it to the top face, then the bottom face, then far above the whole deal, and below. Only by moving the collider itself way down the object did the engine attach correctly, but naturally it looked silly having an engine stuck to nothing half a meter out of the adapter. Moving it back up to where it should be results in the above behavior. \u003C/p\u003E\u003Cp\u003EI believe I may have to just start again on this one. At least it\u0027s simple.\u003C/p\u003E\n"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2015-08-03T09:51:58Z","Content":"\n\u003Cp\u003ECould you post a picture of your (completely unfolded) Unity hierarchy?\u003C/p\u003E\n"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-08-03T10:36:34Z","Content":"\n\u003Cp\u003EThis is off a backup copy - I\u0027ve already started on a new model just in case, and renamed the original. It\u0027s confusing unity since the models don\u0027t match, just in case you might wonder why it can\u0027t find that transform at the bottom (or why the model looks different.) But the hierarchy is the correct setup.\u003C/p\u003E\u003Cp\u003EI still have the original blend and unity scene saved. \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/q2X2VT8.png\u0022 alt=\u0022q2X2VT8.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-03T10:39:40Z\u0022 title=\u002208/03/2015 10:39  AM\u0022 data-short=\u00228 yr\u0022\u003EAugust 3, 2015\u003C/time\u003E by Randazzo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-08-03T13:51:59Z","Content":"\n\u003Cp\u003EI think what\u0027s happening is that the underside of the collider is above the center of mass, so the VAB thinks the engine should point up. \u003C/p\u003E\u003Cp\u003EAs an experiment, it might be worth lowering the part in Unity so that the \u0022origin\u0022 is centered in the upper collider, and thus the bottom of the collider is below the CoM.\u003C/p\u003E\u003Cp\u003EEDIT: I see this was already talked about. Doh! Well, you could try putting the origin of the root transform way above the part. Really the location only matters in a noticeable way when the part is \u0022loose\u0022 (you\u0027ve exploded and it\u0027s rolling on the ground), end when you\u0027re first grabbing it from the menu in the VAB (the mouse cursor will be \u0022gripping\u0022 it by the CoM). \u003C/p\u003E\u003Cp\u003E*sigh* I hate ugly work-arounds.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-03T13:54:15Z\u0022 title=\u002208/03/2015 01:54  PM\u0022 data-short=\u00228 yr\u0022\u003EAugust 3, 2015\u003C/time\u003E by NecroBones\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-08-04T02:20:55Z","Content":"\n\u003Cp\u003EWell I finally got the attachment orientation correct. Moving the origin of the object in Blender didn\u0027t have any effect on it\u0027s center for some reason, yet moving the mesh itself in edit mode while leaving the origin in place did. I don\u0027t know what the functional difference is there. It still had issues with angle snap then wanting to put the engines out the outside facing of the sides rather than the plate facing, even when trying to place in the center of the plate. I\u0027ve deemed this thing too temperamental and not worth another days time, so it\u0027s been scrapped in favor of a flat plate. \u003C/p\u003E\u003Cp\u003EThanks all.\u003C/p\u003E\n"}]}