{"TopicId":92107,"ForumId":16,"TopicTitle":"Why do lights cause FPS drop?","CreatedByName":"zekes","CreatedById":23840,"CreatedDateTime":"2014-12-06T18:02:36Z","PageNum":1,"Articles":[{"CreatedByName":"zekes","CreatedById":23840,"CreatedDateTime":"2014-12-06T18:02:36Z","Content":"\n\u003Cp\u003EWhy do lights cause FPS drop? Like, I can no longer activate any lights, out of fear that my game loses 25-50% of its FPS. Why is this, and how can i fight it so I can still use lights?\u003C/p\u003E\n"},{"CreatedByName":"andrew123","CreatedById":46719,"CreatedDateTime":"2014-12-06T18:04:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zekes\u0022 data-cite=\u0022zekes\u0022\u003E\u003Cdiv\u003EWhy do lights cause FPS drop? Like, I can no longer activate any lights, out of fear that my game loses 25-50% of its FPS. Why is this, and how can i fight it so I can still use lights?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMaybe it\u0027s the unoptimized nature of Unity? I imagine that the engine is desperately calculating the physics when you make unexpected commands, but it might also be a bandwidth limit. \u003C/p\u003E\u003Cp\u003EEladDv has a lot more knowledge than me on this topic. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E He\u0027s probably familiar with some aspects of Unity by now.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-06T18:07:15Z\u0022 title=\u002212/06/2014 06:07  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 6, 2014\u003C/time\u003E by andrew123\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RainDreamer","CreatedById":129077,"CreatedDateTime":"2014-12-06T18:15:51Z","Content":"\n\u003Cp\u003ETry cutting down shadow cascades and pixel light counts, see if it helps. I don\u0027t know why it works, but it seems to help me.\u003C/p\u003E\n"},{"CreatedByName":"Zylark","CreatedById":101018,"CreatedDateTime":"2014-12-06T18:23:16Z","Content":"\n\u003Cp\u003ELights hit the GPU pretty hard. Thing is in KSP, since any given vessel is a collection of separate objects, and each light (apart from the sun) is dynamic in a given scene, none of the usual 3D engine \u0027cheats\u0027 are available. There is no pre-cooking of textures, and there is no pre-defined static shadow-map. So rendering lights with how they affect textures on objects and how their shadow falls and so on, becomes an exponentially harder task per light that is added to the scene.\u003C/p\u003E\u003Cp\u003EThe framerate of KSP is determined by primarily two factors. There is the physics, which hit the CPU, and then there is graphics rendering, which obviously hit the GPU. If either of these are overloaded by calculations, your framerate will drop.\u003C/p\u003E\u003Cp\u003EAs far as rendering of lights go, the easy solution is to turn down in settings max number of rendered lights. The expensive solution is to upgrade your graphics card. As for physics, Unity/KSP only runs on one core for the time being - so until it gets proper multithreading and/or ability to offload some physics calculation to newer graphics cards (eg. nVidia with CUDA/PhysX enabled), you\u0027ll only see modest improvement by upgrading the CPU. As it is now, it is terribly inefficient.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-12-06T18:25:09Z","Content":"\n\u003Cp\u003ELlights are expensive to render. every part has to be checked against every light that\u0027s active based on game settings. Depending on the shader on each part, the calculations are per vertex and then per pixel of the texture maps (if you throw spec and normal maps in the mix), in successive passes. This has to be done for each frame. thousands of parts x hundreds of lights x multiple render passes = many many many calculations each frame. It\u0027s a good thing most of the lights in KSP don\u0027t cast shadows. watch your FPS go FPM when shadows get added to the mix.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-06T18:31:40Z\u0022 title=\u002212/06/2014 06:31  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 6, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"worir4","CreatedById":75980,"CreatedDateTime":"2014-12-07T09:44:00Z","Content":"\n\u003Cp\u003ELights look awesome though...\u003C/p\u003E\n"},{"CreatedByName":"Frank_G","CreatedById":100000,"CreatedDateTime":"2014-12-07T10:00:02Z","Content":"\n\u003Cp\u003EIts simple... each light needs its own render pass... we have sunlight (1 render pass) and for each light you add, the game engine needs to perform another render pass for any object it hits. As KSP ships and scenes are made out of many single objects instead of large optimized mesh structures, the use of additional lights can kill performance pretty easy.\u003C/p\u003E\u003Cp\u003E[edit] i just saw that nli2work explained it pretty decent... sorry for the double post.\u003C/p\u003E\n"},{"CreatedByName":"tajampi","CreatedById":74648,"CreatedDateTime":"2014-12-07T10:21:18Z","Content":"\n\u003Cp\u003EAlso remember that most lights on KSP are spotlights, and, as far as i know, are the most laggy...\u003C/p\u003E\u003Cp\u003ECheers!\u003C/p\u003E\n"},{"CreatedByName":"Heagar","CreatedById":67859,"CreatedDateTime":"2014-12-07T13:34:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Zylark\u0022 data-cite=\u0022Zylark\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThe framerate of KSP is determined by primarily two factors. There is the physics, which hit the CPU, and then there is graphics rendering, which obviously hit the GPU.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry, but Unity don\u0027t uses CUDA or the like, witch means:\u003C/p\u003E\u003Cp\u003EThe calculation if the emmited light is hitting an surface witch would reflect it and how mutch that surface will reflect is done by the CPU. Only the result is passed to the GPU.\u003C/p\u003E\u003Cp\u003E@ Zekes:\u003C/p\u003E\u003Cp\u003EWhat you can do - if you have to reduce the framedrop - may be to reduce the values for the \u0022pixel light count\u0022 and the \u0022shadow cascades\u0022 in the settings/graphics tab. Because that would reduce the ammount of calculations needed for a light source.\u003C/p\u003E\n"},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2014-12-07T14:07:22Z","Content":"\n\u003Cp\u003EYou might like to check the Glowstrips mod, which light up themselves but not other parts.\u003C/p\u003E\u003Cp\u003EHuh?\u003C/p\u003E\u003Cp\u003EComputers are simulating things - LIGHT sources, by definition, cast light/shadow as their rays fall on other objects. Working all this out takes a lot of processing, as others have explained.\u003C/p\u003E\u003Cp\u003EGlowstrips (and similar) instead set their own brightness but tell the graphics engine that they aren\u0027t light-sources, so no calculation needed. The effect is like flourescent strips - bright on a dark background.\u003C/p\u003E\n"},{"CreatedByName":"zekes","CreatedById":23840,"CreatedDateTime":"2014-12-07T16:37:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Heagar\u0022 data-cite=\u0022Heagar\u0022\u003E\u003Cdiv\u003ESorry, but Unity don\u0027t uses CUDA or the like, witch means:\u003Cp\u003EThe calculation if the emmited light is hitting an surface witch would reflect it and how mutch that surface will reflect is done by the CPU. Only the result is passed to the GPU.\u003C/p\u003E\u003Cp\u003E@ Zekes:\u003C/p\u003E\u003Cp\u003EWhat you can do - if you have to reduce the framedrop - may be to reduce the values for the \u0022pixel light count\u0022 and the \u0022shadow cascades\u0022 in the settings/graphics tab. Because that would reduce the ammount of calculations needed for a light source.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, I suspected that would help it but wasn\u0027t sure.\u003C/p\u003E\n"},{"CreatedByName":"WuphonsReach","CreatedById":130759,"CreatedDateTime":"2014-12-08T17:23:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Pecan\u0022 data-cite=\u0022Pecan\u0022\u003E\u003Cdiv\u003EYou might like to check the Glowstrips mod, which light up themselves but not other parts.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo you have a link to any \u0022glow-strip\u0022 like mods (where the lit up parts just glow, not emit light) which work in KSP 0.25?\u003C/p\u003E\n"},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2014-12-08T18:40:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022WuphonsReach\u0022 data-cite=\u0022WuphonsReach\u0022\u003E\u003Cdiv\u003EDo you have a link to any \u0022glow-strip\u0022 like mods (where the lit up parts just glow, not emit light) which work in KSP 0.25?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhile it was \u003Ca href=\u0022https://kerbalstuff.com/mod/72/GlowStrips\u0022 rel=\u0022external nofollow\u0022\u003Ereleased for 0.24.2\u003C/a\u003E I\u0027d be surprised if it didn\u0027t still work in 0.25.\u003C/p\u003E\n"},{"CreatedByName":"Esme","CreatedById":107436,"CreatedDateTime":"2014-12-09T12:45:19Z","Content":"\n\u003Cp\u003EI\u0027ve used Glowstrips in 0.25 - works fine. I like placing pairs of strips each side of docking ports, and if on a space-station, each pair set to a different colour. Really helps with orienting your ship when docking - particularly if the ship is nightside of whatever it\u0027s orbiting.\u003C/p\u003E\u003Cp\u003EI have quite an old Dell OPC with a very old graphics card - I just turn down to textures to 1/4 res and I also have to turns atmospheric effects down (so I get the reentry glow, but not the flames). Whilst framerates near surfaces or other vesseles occasionally drops such that times passes a bit slower than RL,I still find I can use lights reasonably, and the game still looks pretty good to me...\u003C/p\u003E\n"}]}