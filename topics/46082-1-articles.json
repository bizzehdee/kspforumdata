{"TopicId":46082,"ForumId":16,"TopicTitle":"Fine-tuning a Mun Bus: RCS, MechJeb, and Full vs. Dry CG","CreatedByName":"Commander Zoom","CreatedById":8333,"CreatedDateTime":"2013-09-15T23:37:00Z","PageNum":1,"Articles":[{"CreatedByName":"Commander Zoom","CreatedById":8333,"CreatedDateTime":"2013-09-15T23:37:00Z","Content":"\n\u003Cp\u003EA while back, I made my own Mun \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Eshuttle\u003C/span\u003E bus to operate as a ferry craft (and/or skycrane) between a small station in Mun orbit and the base under construction on the surface. And it was good - mostly - delivering several modules safely to the latter. But I came to feel that it wasn\u0027t as good as it \u003Cem\u003Ecould\u003C/em\u003E be.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i22.photobucket.com/albums/b348/cmdrzoom/KSP/munbus1-1_zps60e19e51.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i22.photobucket.com/albums/b348/cmdrzoom/KSP/th_munbus1-1_zps60e19e51.jpg\u0022 alt=\u0022th_munbus1-1_zps60e19e51.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI was (and still am) relying on MechJeb to handle most of the repetitive parts of docking, and with this design and the current versions of MechJeb, reaction wheels, etc, it had an annoying tendency to shimmy from side to side during what should have been (IMO) relatively straightforward translations, waggling back and forth rather than just locking on to a heading and sticking to it. I had to do a lot of manual oversight, toggling it on and off and/or speeding up time (which serves the useful functions of killing rotation, saving RCS fuel that MechJeb would spend on constant corrections, etc etc). Also, refilling the \u0022strut\u0022 tanks got to be a bit of a pain. So it was decided to build a new one, and retask the first Bus as a surface-to-surface long-range excursion vehicle (or \u0022hopper\u0022), taking scientific parties out to study the various anomalies.\u003C/p\u003E\u003Cp\u003EBehold, the current version under testing: Mun Bus II.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i22.photobucket.com/albums/b348/cmdrzoom/KSP/munbus2-1_zpsc57236b2.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i22.photobucket.com/albums/b348/cmdrzoom/KSP/th_munbus2-1_zpsc57236b2.jpg\u0022 alt=\u0022th_munbus2-1_zpsc57236b2.jpg\u0022\u003E\u003C/a\u003E \u003Ca href=\u0022http://i22.photobucket.com/albums/b348/cmdrzoom/KSP/munbus2-2_zps04bd7772.jpg\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i22.photobucket.com/albums/b348/cmdrzoom/KSP/th_munbus2-2_zps04bd7772.jpg\u0022 alt=\u0022th_munbus2-2_zps04bd7772.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThis time I mounted the main engines at the cardinal points (and moved them a little further out, to get more clearance around payloads), rather than at 45 degree offsets - thinking that MechJeb\u0027s simple electronic brain might find that easier to handle - and moved the RCS thrusters to the main body - ditto, and also because I didn\u0027t need the extra torque from having them out on the pods; if anything, I wanted to \u003Cem\u003Eminimize\u003C/em\u003E torque as much as possible. (Also why I shifted some of the fuel into a central tank.) I also downloaded the (very handy) RCS balancing tool to help me. But the latter quickly revealed a basic and apparently inescapable problem: the craft\u0027s CG \u003Cem\u003Ewill\u003C/em\u003E shift between dry and full fuel tanks, and there doesn\u0027t seem to be any way of balancing things for both. One way or another, the thrusters \u003Cem\u003Ewill\u003C/em\u003E cause torque, and shimmy, and all those things I don\u0027t want.\u003C/p\u003E\u003Cp\u003EI recently started a new job and I have a lot less time to flight test stuff, so rather than spending hours of trial and error, I\u0027m hoping that the collective wisdom of the forums will be able to help me out. How do I get this thing to be as stable and worry-free/hands-off as possible during (MechJeb assisted) dockings? Is it a matter of being sure to always click \u0022Control from here\u0022 on, say, the lander can, or manually turning Smart A.S.S. to lock the heading and hoping that the docking autopilot doesn\u0027t decide to turn it off? It looks like it should be simple, especially the second revision - why isn\u0027t it?\u003C/p\u003E\u003Cp\u003ECraft files (should be stock except for, of course, MechJeb):\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.efn.org/~kellys/munbus1.craft\u0022 rel=\u0022external nofollow\u0022\u003EMun Bus 1\u003C/a\u003E - \u003Ca href=\u0022http://www.efn.org/~kellys/munbus2.craft\u0022 rel=\u0022external nofollow\u0022\u003EMun Bus 2\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-17T05:04:17Z\u0022 title=\u002209/17/2013 05:04  AM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 17, 2013\u003C/time\u003E by Commander Zoom\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Specialist290","CreatedById":58489,"CreatedDateTime":"2013-09-16T04:58:48Z","Content":"\n\u003Cp\u003EI\u0027m going to preface this post by stating that I don\u0027t have any firsthand experience with MechJeb, so I can\u0027t help you too much with specific info on that angle.\u003C/p\u003E\u003Cp\u003EThat said, I would highly recommend downloading the \u003Ca href=\u0022http://kerbalspaceprogram.com/dock-align-indicator/\u0022 rel=\u0022external nofollow\u0022\u003EDocking Port Alignment Indicator\u003C/a\u003E. Even if you still use MechJeb for the docking itself, it\u0027ll give you a nice visual reference that will let you fine-tune your heading and approach vector much more reliably than simply eyeballing everything.\u003C/p\u003E\u003Cp\u003EAs far as the craft design itself goes: Since you now have the 45-degree offset positions free on the core of the vessel, you may want to consider getting rid of the inline RCS tanks on your outriggers and instead placing a quad of the radial cylinders or spheres near your craft\u0027s center of mass. Since you\u0027ll have more total mass near the center of mass itself, that might help mitigate some of your torque issues.\u003C/p\u003E\n"},{"CreatedByName":"Commander Zoom","CreatedById":8333,"CreatedDateTime":"2013-09-16T05:34:52Z","Content":"\n\u003Cp\u003EAlready downloaded, and loving it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EMoving mass inboard might help, but I suspect most of it is bound up in those four wonderful, long-burning but oh-so-heavy nuclear engines. Not much to be done about those.\u003C/p\u003E\n"},{"CreatedByName":"Dkmdlb","CreatedById":70275,"CreatedDateTime":"2013-09-16T22:18:03Z","Content":"\n\u003Cp\u003ESeems to me that your problem could be solved if you simply stopped using mechjeb for docking. Do it yourself, using Caps Lock for fine control. Or, if you are going to use mechjeb, use Smart A.S.S. it to point your docking point at the target docking port. Then you do the maneuvering and translations, while mechjeb keeps the nose pointed in the right direction - always toward the target docking port.\u003C/p\u003E\u003Cp\u003EAnother strategy might be to point the target prograde, and then use mechjeb to keep you pointed retrograde, facing the target docking port. Then you can manually translate as necessary, keeping RCS turned off except for the times when you need it.\u003C/p\u003E\u003Cp\u003EOr you can do the really simple thing and avoid rcs altogether.\u003C/p\u003E\u003Cp\u003EToggle between ships and make both ships the target each other\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s docking port. Then, use mechjeb to set each ship to point at the target (the other ship\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s docking port). Then, control your bus so it slowly approaches the target ship. Don\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t use RCS \u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u20AC\u0153 use the LV-Ns. The two ships will dance around each other a bit, always pointing their docking ports toward each other, and eventually, they will bump into each other for a successful docking. Just don\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t let them start rotating around each other because they\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2ll start spinning. This kills the Kerbals.\u003C/p\u003E\n"},{"CreatedByName":"DerekL1963","CreatedById":57091,"CreatedDateTime":"2013-09-17T00:25:26Z","Content":"\n\u003Cp\u003EThe MechJeb No RCS docking method: \u003Ca href=\u0022https://youtu.be/gyTTzJvZqjI\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://youtu.be/gyTTzJvZqjI\u003C/a\u003E And download the Patch Testbed version of MechJeb, it\u0027s *much* *much* better than the \u0027official\u0027 version. And give your bus some gyro torque - then Mechjeb will translate with RCS and correct attitude with the torque.\u003C/p\u003E\n"},{"CreatedByName":"Commander Zoom","CreatedById":8333,"CreatedDateTime":"2013-09-17T05:14:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dkmdlb\u0022 data-cite=\u0022Dkmdlb\u0022\u003E\u003Cdiv\u003ESeems to me that your problem could be solved if you simply stopped using mechjeb for docking. Do it yourself, using Caps Lock for fine control. Or, if you are going to use mechjeb, use Smart A.S.S. it to point your docking point at the target docking port. Then you do the maneuvering and translations, while mechjeb keeps the nose pointed in the right direction - always toward the target docking port.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBlergh. That gets so \u003Cem\u003Etedious\u003C/em\u003E, though, when you\u0027re catching a dozen modules and sending them down to the Mun. The idea was to do \u003Cem\u003Eless\u003C/em\u003E baby-sitting during the docking process, automating it as much as possible. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DerekL1963\u0022 data-cite=\u0022DerekL1963\u0022\u003E\u003Cdiv\u003EThe MechJeb No RCS docking method: \u003Ca href=\u0022https://youtu.be/gyTTzJvZqjI\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://youtu.be/gyTTzJvZqjI\u003C/a\u003E And download the Patch Testbed version of MechJeb, it\u0027s *much* *much* better than the \u0027official\u0027 version. And give your bus some gyro torque - then Mechjeb will translate with RCS and correct attitude with the torque.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E1. Interesting.\u003C/p\u003E\u003Cp\u003E2. I\u0027m usually verrrry reluctant to use unofficial/beta forks of mods.\u003C/p\u003E\u003Cp\u003E3. It\u0027s got a lander can now, with reaction wheel; it\u0027s a matter of getting the autopilot to actually use it.\u003C/p\u003E\u003Cp\u003EAll of the above answers (even the ones I don\u0027t like) are enough that I\u0027ll go ahead and change the status on this. Thanks, everyone.\u003C/p\u003E\n"},{"CreatedByName":"DerekL1963","CreatedById":57091,"CreatedDateTime":"2013-09-17T07:00:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Commander Zoom\u0022 data-cite=\u0022Commander Zoom\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E2. I\u0027m usually verrrry reluctant to use unofficial/beta forks of mods.\u003C/p\u003E\u003Cp\u003E3. It\u0027s got a lander can now, with reaction wheel; it\u0027s a matter of getting the autopilot to actually use it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E2. It\u0027s widely used and maintained by a person who has had code committed to the main branch...\u003C/p\u003E\u003Cp\u003E3. A lander can has next to no torque. (7.5 on each axis.) Try one of the stabilizers or SAS modules under the control tab. (20 on each axis.) Seriously - use the Mechjeb fork and *add torque*. I just auto docked an assembly of three Fustek Expansion modules with a tug with RCS at one end, and it was rock steady in alignment as it translated. *Add torque*.\u003C/p\u003E\n"}]}