{"TopicId":165628,"ForumId":34,"TopicTitle":"[KSP 1.12.x] kOS v1.4.0.0: kOS Scriptable Autopilot System","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2017-09-18T16:56:54Z","PageNum":17,"Articles":[{"CreatedByName":"Crimsyn","CreatedById":187147,"CreatedDateTime":"2018-04-27T07:01:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223331496\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221521750354\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/22/2018 at 3:25 PM, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI was also hampered by the fact that I knew it wasn\u0027t done until Putty would work.\u00A0 I was discovering ways that Putty refused to adhere to what the RFC\u0027s said it had to do, and I had to take on roles that should be done by the client side, despite being the server side.\n\u003C/p\u003E\n\u003Cp\u003E\nThere may also be a problem with VT100 specifically.\u00A0 There\u0027s a pending PR where someone noticed the VT100 detection isn\u0027t implemented right.\u00A0 As a test, see if claiming to be an XTERM terminal makes things behave better, @Crimsyn\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSorry for the late reply, but I have an update. After much head-desk, I kind of just gave up. Caught dunbaratu on twitch, and ran it past him, and found out tate KoS uses the terminal ident request as a keep-alive. I thought I could just respond once and be done with it. I trashed my old code, so I haven\u0027t tried it again yet, but I am going to try again and see what happnens \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2018-04-27T15:18:56Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223365036\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524812510\u0022 data-ipsquote-userid=\u0022187147\u0022 data-ipsquote-username=\u0022Crimsyn\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Crimsyn said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSorry for the late reply, but I have an update. After much head-desk, I kind of just gave up. Caught dunbaratu on twitch, and ran it past him, and found out tate KoS uses the terminal ident request as a keep-alive. I thought I could just respond once and be done with it. I trashed my old code, so I haven\u0027t tried it again yet, but I am going to try again and see what happnens \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGood luck.\u00A0 I\u0027m sorry the documentation page neglected to mention the TTY keepalive heartbeat.\u003Cbr\u003E\u003Cbr\u003E\nFor others following this forum thread who weren\u0027t there for the stream - a summary:\u00A0 A telnet client being asked \u0022what is your terminal\u0022 by the server is required to respond with the answer in a timely fashion to be in keeping with the RFCs about the terminal type protocol.\u00A0 Technically this is true throughout the entire life of the connection, but in practice it usually only happens during the initial negotiations between client and server.\u00A0 Then it typically never happens again.\u00A0 However, the spec technically says the server can ask this question at any time whenever it feels like it and the client is meant to respond.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI ended up using this as a homemade keepalive heartbeat signal so I could disconnect the server if the client just outright hung.\u00A0 Why such an indirect way to make a heartbeat signal?\u00A0 Well, because after much searching I just couldn\u0027t figure out how to make the .NET/Mono api let me access the more low-level TCP/IP socket\u0027s settings.\u00A0 It seemed that .NET was providing a bit *too much* abstraction here.\u00A0 There\u0027s a keepalive feature for sockets, which is the more appropriate place to be doing that sort of thing, but I couldn\u0027t find the way to get my hands on it while still staying in the portable OS-agnostic subset of Mono that Unity allows.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I just did the \u0027heartbeat\u0027 at a little bit of a higher level - using the fact that the RFCs state the server can ask for the TTY type any time it feels like and expect a timely response from the client.\n\u003C/p\u003E\n\u003Cp\u003E\nThe effect that \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/187147-crimsyn/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022187147\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/187147-crimsyn/\u0022 rel=\u0022\u0022\u003E@Crimsyn\u003C/a\u003E saw was that the server sent a TTY type request every 10 to 15 seconds or so, which he thought was the server being stuck in a broken state, and when his client didn\u0027t respond, after a little bit the connection was closed.\n\u003C/p\u003E\n"},{"CreatedByName":"www2","CreatedById":31118,"CreatedDateTime":"2018-05-11T00:01:53Z","Content":"\n\u003Cp\u003E\nIs KOS compatible with 1.4.3?\n\u003C/p\u003E\n"},{"CreatedByName":"infinite_monkey","CreatedById":185663,"CreatedDateTime":"2018-05-11T01:23:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223375841\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221525996913\u0022 data-ipsquote-userid=\u002231118\u0022 data-ipsquote-username=\u0022www2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, www2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs KOS compatible with 1.4.3?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes it is.\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-05-12T06:32:19Z","Content":"\n\u003Cp\u003E\nI\u0027m stuck again.\u00A0 I\u0027ve got a vessel in orbit around the mun,\u00A0 I\u0027ve calculated the required \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E and an ejection angle of 140 degrees before mun retrograde.\u00A0 If I manually put in node about there it looks good.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHowever I can\u0027t figure out to plot the ejection angle in KOS.\u00A0 As I\u0027m orbiting the Mun I can\u0027t get the Muns velocity vector relative to Kerbin, and can\u0027t target either the Mun or Minmus to measure my angle against a target vector.\u00A0 So how do I measure the angle between my ships mun orbital velocity and the Muns Kerbin orbital velocity?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-05-12T17:12:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223376898\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526106739\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u003Cspan\u003E\uFEFF\u003C/span\u003E can\u0027t get the Muns velocity vector relative to Kerbin,\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nLOCAL moon_vel IS VELOCITYAT(moon,c_time):ORBIT.\n\u003C/p\u003E\n\u003Cp\u003E\nI then get my ship\u0027s position vector (from the centre of moon to where the ship will be i.e. POSITIONAT(SHIP,c_time)-BODY:POSITION, flattened into the appropriate plane with a vector exclude) and get the angle between it and -moon_vel. Then iteration/calculations (for ages I simply incremented at 15s intervals) follow to find out when we will be at the point with the right angle to retrograde.\n\u003C/p\u003E\n"},{"CreatedByName":"Omann","CreatedById":162777,"CreatedDateTime":"2018-05-12T18:30:08Z","Content":"\n\u003Cp\u003E\nI\u0027ve been looking for a way to implement an error handler in a script.\n\u003C/p\u003E\n\u003Cp\u003E\nSpecifically, I have a script that accepts site names as arguments and displays heading and distance information. These are stored in a list. When a contract requirement is completed, KSP removes the site from the game. Which quickly clobbers my script trying to access a no longer existing object.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I\u0027m wondering, is there a common method for identifying such an object within the script and removing it or skipping over it in my list.\n\u003C/p\u003E\n\u003Cp\u003E\nIn other languages I would probably use a, \u0022try\u0022 block.\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2018-05-12T20:57:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223377210\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526149808\u0022 data-ipsquote-userid=\u0022162777\u0022 data-ipsquote-username=\u0022Omann\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Omann said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIn other languages I would probably use a, \u0022try\u0022 block.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUnfortunately, not possible, or at least not in convinient way. Asked about it some time ago. KOS mod/plugin already use main try-catch block code to handle exceptions, to rather give you error message on KOS terminal screen than to crash whole game due to user mistakes. So, you need to assume KOS as old/limited language from 60\u0027s (sort of) and create your own workarounds for this. Before you pass something as parameter for further calculations, you need to put additional piece of code to check out if those values would crash your script or not.\n\u003C/p\u003E\n\u003Cp\u003E\nTry-catch usage have probably spoiled us all in mothern languages, now you need to re-learn how to do it in old fashion way.\n\u003C/p\u003E\n"},{"CreatedByName":"Omann","CreatedById":162777,"CreatedDateTime":"2018-05-12T23:22:54Z","Content":"\n\u003Cp\u003E\nThat pretty much confirms what I thought.\n\u003C/p\u003E\n\u003Cp\u003E\nI think I\u0027ll try using two KOS processors. One running my navigation. It will crash and need to be restarted. One running my autopilot. It being a separate process should continue running. Or not...\n\u003C/p\u003E\n"},{"CreatedByName":"Proply","CreatedById":65418,"CreatedDateTime":"2018-05-13T04:18:39Z","Content":"\n\u003Cp\u003E\nHi all, I am having a problem where throttle control is not being returned to the user after the program has ended. It stays stuck at 0 no matter what I try (shift, ctrl, z, x, \u0022unlock throttle.\u0022). Any idea what I might be doing wrong or how to force kOS to return throttle control to the user?\n\u003C/p\u003E\n"},{"CreatedByName":"infinite_monkey","CreatedById":185663,"CreatedDateTime":"2018-05-13T05:01:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223377486\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526185119\u0022 data-ipsquote-userid=\u002265418\u0022 data-ipsquote-username=\u0022Proply\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n41 minutes ago, Proply said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi all, I am having a problem where throttle control is not being returned to the user after the program has ended. It stays stuck at 0 no matter what I try (shift, ctrl, z, x, \u0022unlock throttle.\u0022). Any idea what I might be doing wrong or how to force kOS to return throttle control to the user?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI had throttle control problems when MechJeb was running alongside kOS.\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-05-13T06:53:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223377486\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526185119\u0022 data-ipsquote-userid=\u002265418\u0022 data-ipsquote-username=\u0022Proply\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Proply said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi all, I am having a problem where throttle control is not being returned to the user after the program has ended. It stays stuck at 0 no matter what I try (shift, ctrl, z, x, \u0022unlock throttle.\u0022). Any idea what I might be doing wrong or how to force kOS to return throttle control to the user?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHave you used SET THROTTLE TO X anywhere in your script (as opposed to LOCK THROTTLE TO X)? I think I\u0027ve heard other people report that behaviour, though I\u0027ve not done a search yet to check that.\n\u003C/p\u003E\n\u003Cp\u003E\nI assume you\u0027ve not lost connection or anything...\n\u003C/p\u003E\n\u003Cp\u003E\nEdit - I did a search:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedOther\u0022\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedid=\u0022embed667833293\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?app=core\u0026amp;module=system\u0026amp;controller=embed\u0026amp;url=https://www.reddit.com/r/Kos/comments/7q6oia/control_throttle_after_program_ends/\u0022 style=\u0022height:591px;\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nErm, didn\u0027t really want that embedded, as you can\u0027t see the replies without going to the link itself. \u003Ca href=\u0022https://www.reddit.com/r/Kos/comments/7q6oia/control_throttle_after_program_ends/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.reddit.com/r/Kos/comments/7q6oia/control_throttle_after_program_ends/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-05-13T07:09:45Z\u0022 title=\u002205/13/2018 07:09  AM\u0022 data-short=\u00226 yr\u0022\u003EMay 13, 2018\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-05-13T07:33:05Z","Content":"\n\u003Cp\u003E\nI have a \u0022Closedown\u0022 function I run at the end of my scripts that includes\n\u003C/p\u003E\n\u003Cp\u003E\nLOCK THROTTLE TO 0.\n\u003C/p\u003E\n\u003Cp\u003E\nUNLOCK THROTTLE.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis ensures any existing SET or LOCK is cleared and I have manual control. I do the same with STEERING as I\u0027ve found this can get stuck too.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-05-13T07:34:51Z\u0022 title=\u002205/13/2018 07:34  AM\u0022 data-short=\u00226 yr\u0022\u003EMay 13, 2018\u003C/time\u003E by RizzoTheRat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-05-14T20:48:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223377171\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526145159\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/12/2018 at 7:12 PM, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLOCAL moon_vel IS VELOCITYAT(moon,c_time):ORBIT.\n\u003C/p\u003E\n\u003Cp\u003E\nI then get my ship\u0027s position vector (from the centre of moon to where the ship will be i.e. POSITIONAT(SHIP,c_time)-BODY:POSITION, flattened into the appropriate plane with a vector exclude) and get the angle between it and -moon_vel. Then iteration/calculations (for ages I simply incremented at 15s intervals) follow to find out when we will be at the point with the right angle to retrograde.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks, that\u0027s done the trick.\u00A0 I\u0027ve offset the lead angle from the\u00A0 mun velocity and burn when that matches the ship velocity\n\u003C/p\u003E\n\u003Cp\u003E\nset shipheading to velocityat (ship:body,time:seconds):orbit:normalized \u002BR(0,-leadangle,0).\n\u003C/p\u003E\n\u003Cp\u003E\nMy lead angle seem\u0027s be slightly out though so I need to try and work out why, but it only makes about 6m/s difference.\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-05-15T14:14:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223378667\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526330906\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy\u003Cspan\u003E\uFEFF\u003C/span\u003E lead angle seem\u0027s be slightly out though so I need to try and work out why, but it only makes about 6m/s difference. \u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI would expect small discrepancies unless your orbit has very low eccentricity and inclination. Try using the orbit editor to put those values at something tiny (or even zero, though I find 0 ECC can cause problems) and see if it is more accurate.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, I think R(0,angle,0) would only be 100% correct for 0-inclination orbits around bodies whose own inclination is 0.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you have a polar orbit around Minmus, for example, you need to bear in mind that neither ship nor planet velocity is in the plane defined by the universe\u0027s Y-axis.\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-05-15T14:41:27Z","Content":"\n\u003Cp\u003E\nI \u00A0had completely forgotten about eccentricity impacting it, D\u0027Oh.\u00A0\u00A0My test craft was Alt-F12\u0027d in to orbit though\u00A0so should be perfectly circular orbit, but I\u0027ll need to modify it to cope with eccentric orbits.\u00A0\u00A0If I move my \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E and angle calculation in to the loop it should sort that out though as it\u0027ll be doing the calculation based on the current orbital velocity vector.\n\u003C/p\u003E\n\u003Cp\u003E\nThe current setup only works for an equatorial orbit at the moment, but one step at a time.\u00A0 Presumably the hyperbolic excess velocity will still be retrograde to the Mun whatever the inclination,\u00A0so the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E calculation will still work, I\u0027ll just need to work out the angle differently.\u00A0 I\u0027m not entirely sure what\u00A0axes the R(x,y,z) work on but\u00A0I can test that by drawing some vectors on screen.\u00A0 I guess I could just have upper and lower bounds on the angle between the muns orbit and the ships orbit, but it doesn\u0027t feel as neat.\u00A0 I\u0027m also burning prograde at the moment rather than tangential as I still haven\u0027t implemented\u00A0the Solar Prime Vector stuff Panda put me on to a couple of pages back\u00A0to keep things pointing the same way.\u00A0 I\u0027m getting around that on the burn to the Mun by plotting a node with more \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E than it needs, but that\u0027s very untidy \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Kartoffelkuchen","CreatedById":108501,"CreatedDateTime":"2018-05-15T16:28:40Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003EAutomated airplane landing\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/TPK7eWT5K5M?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nSorry for the potato quality... \u003Cspan\u003E\u003Cspan\u003E\u003Cimg alt=\u0022:/\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon1.png\u0022 title=\u0022:/\u0022\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003EWhatever, the script is not done yet, but it\u0027s getting better and better! Just thought I\u0027d share \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-05-16T08:08:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223379204\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526395287\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 hours ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPresumably\u003Cspan\u003E\uFEFF\u003C/span\u003E the hyperbolic excess velocity will still be retrograde to the Mun whatever the inclination,\u00A0so the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E calculation will still work, I\u0027ll just need to work out the angle differently.\u00A0 I\u0027m not entire\u003Cspan\u003E\uFEFF\u003C/span\u003Ely sure what\u00A0axes the R(x,y,z) work on but\u00A0I \u003Cspan\u003E\uFEFF\u003C/span\u003Ecan test that by\u003Cspan\u003E\uFEFF\u003C/span\u003E drawing some vectors on screen.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, to the first part, though with high inclination orbits the plane of your orbit won\u0027t be aligned nicely with the prograde/retrograde motion of the body you\u0027re orbiting most of the time. Whereas an equatorial orbit has an escape burn position every orbit, you could have to wait days to get an efficient return from a polar orbit.\n\u003C/p\u003E\n\u003Cp\u003E\nThere is a good video Steven Mading / Dunbaratu put together about the axes on YouTube somewhere. The short version is that the Y axis always points to the universe\u0027s up direction, but the X and Z axes are constantly rotating around it and so can\u0027t be trusted to be pointing in any particular direction, except that they\u0027ll be orthogonal to the Y axis and to eachother. As such, I\u0027m always very wary of solutions with R() rotations in them and prefer to have things rotated relative to other tangible things rather than the raw axes.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-05-16T11:43:43Z\u0022 title=\u002205/16/2018 11:43  AM\u0022 data-short=\u00226 yr\u0022\u003EMay 16, 2018\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-05-16T10:53:00Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223379752\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526458111\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYes, to the first part, though with high inclination orbits the plane of your orbit won\u0027t be aligned nicely with the prograde/retrograde motion of the body you\u0027re orbiting most of the time. Whereas an equatorial orbit has an escape burn position every orbit, you could have to wait days to get an efficient return from a polar orbit.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI had a quick fiddle with it last night and was surprised to\u00A0find it\u0027s only about an extra 100m/s\u00A0for a polar orbit at about 45 degrees to the Muns orbital direction.\u00A0 Fairly easy to set it up to wait for a better alignment, but I\u0027m using \u003Cabbr title=\u0022Umbra Space Industries (a collection of mods)\u0022\u003EUSI\u003C/abbr\u003E Life support so don\u0027t want to hang around too long.\u00A0 I\u0027ve not figured out how to calculate the \u003Cabbr title=\u0022Delta-V\u0022\u003Edv\u003C/abbr\u003E for a non-retrograde exit from the mun yet, but it mght make sens to do that and compare it the available \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E...\u00A0 It\u0027s amazing how every task seems to generate a load o new ones isn\u0027t it \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI had fun last night realising that my power landing script for Kerbin doesn\u0027t work too well when the terrain is as varied as the Mun\u00A0 \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E It now kills it\u0027s horizontal velocity at around 2km altitude and then drops to a suicide burn, which stops it from crashing in to inconveniently positioned mountains that don\u0027t tend to be an issue when landing in atmosphere.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a way to mark a waypoint on the ground so I target a specific landing\u00A0point?\u00A0 Otherwise I guess I\u0027m going to need to work out the geoposition of my projected landing point and then iterate up and down the slope to find a flat bit.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-05-16T14:34:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223379804\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526467980\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs there\u003Cspan\u003E\uFEFF\u003C/span\u003E a way to mark a waypoint on the ground so I target a specific landing\u00A0p\u003Cspan\u003E\uFEFF\u003C/span\u003Eoin\u003Cspan\u003E\uFEFF\u003C/span\u003Et\u003Cspan\u003E\uFEFF\u003C/span\u003E\u003Cspan\u003E\uFEFF\u003C/span\u003E?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMy (work in progress) precision landing script requires the target latitude and longitude (plus a maximum allowed slope angle, if the slope at the target point is higher, it goes looking for somewhere flatter) to be edited into the boot script before launch.\n\u003C/p\u003E\n\u003Cp\u003E\nYou can get the latitude and longitude of contract waypoints. I believe KerbNet allows you to drop a new waypoint, which you could then use as an aiming point, but I\u0027ve not tried that. Or you could ask for the target coordinates to be typed into the terminal, or even set-up a GUI to get this. Of course most of these methods are somewhat blind unless you have a good map of the area!\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-05-16T15:24:05Z","Content":"\n\u003Cp\u003E\nI use ScanSat so will have a good map at some point (although I need a Mun landing to get the science to get the high res scanner...), but I\u0027m not sure if I can extract info from that other than by eye.\u00A0 Although thinking about it there are loads of maps people have created from ScanSat data so maybe I could extract it and do something in Excel to identify suitable landing sites in each biome...\n\u003C/p\u003E\n\u003Cp\u003E\nETA:\u00A0 Oooo, SCANSat can export to CSV file.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-05-16T16:50:54Z\u0022 title=\u002205/16/2018 04:50  PM\u0022 data-short=\u00226 yr\u0022\u003EMay 16, 2018\u003C/time\u003E by RizzoTheRat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Black-Two-","CreatedById":177626,"CreatedDateTime":"2018-05-16T18:57:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223379904\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526481261\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy (work in progress) precision landing script requires ... allowed slope angle, if the slope at the target point is higher, it goes looking for somewhere flatter) to be edited into the boot script before launch.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHow do I get the slope angle from above? Do you compare the target site with the surrounding area or something?\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-05-16T19:31:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223380083\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526497062\u0022 data-ipsquote-userid=\u0022177626\u0022 data-ipsquote-username=\u0022Black-Two-\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n46 minutes ago, Black-Two- said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow do I get the slope angle from above? Do you compare the target site with the surrounding area or something?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, I use something based on what (Cheers) Kevin Gisi did in Kerbal Space Programming episode 42 or 43:\n\u003C/p\u003E\n\u003Cp\u003E\nCalculate three points on the ground (A, B, C) a couple of metres away from the target site, in different directions (forming an equilateral triangle in my case). I then take vectors A-\u0026gt;B and A-\u0026gt;C and cross them, to get a new vector that will point at 90 degrees to the apparent slope of the ground i.e. if the ground is flat, it\u0027ll point straight up. The vector angle between that resultant vector and the up vector at the target point gives you the slope angle. Excluding the up vector from the resultant vector gives you a horizontal vector that points down the slope, which is probably the best direction to go in to look for somewhere flatter. That said, I have some breakout code that jumps half a kilometre away if it looks like we\u0027ve got stuck in a hole or something!\n\u003C/p\u003E\n\u003Cp\u003E\nThough a work in progress generally, I do seem to have the slope code in a finished (i.e. documented state!)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/documentation/lib_slope_readme.md\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/documentation/lib_slope_readme.md\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/scripts/lib_slope.ks\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/scripts/lib_slope.ks\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-05-16T19:44:33Z\u0022 title=\u002205/16/2018 07:44  PM\u0022 data-short=\u00226 yr\u0022\u003EMay 16, 2018\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Black-Two-","CreatedById":177626,"CreatedDateTime":"2018-05-19T13:29:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223380110\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221526499107\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/16/2018 at 9:31 PM, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYes, I use something based on what (Cheers) Kevin Gisi did in Kerbal Space Programming episode 42 or 43:\n\u003C/p\u003E\n\u003Cp\u003E\nCalculate three points on the ground (A, B, C) a couple of metres away from the target site, in different directions (forming an equilateral triangle in my case). I then take vectors A-\u0026gt;B and A-\u0026gt;C and cross them, to get a new vector that will point at 90 degrees to the apparent slope of the ground i.e. if the ground is flat, it\u0027ll point straight up. The vector angle between that resultant vector and the up vector at the target point gives you the slope angle. Excluding the up vector from the resultant vector gives you a horizontal vector that points down the slope, which is probably the best direction to go in to look for somewhere flatter. That said, I have some breakout code that jumps half a kilometre away if it looks like we\u0027ve got stuck in a hole or something!\n\u003C/p\u003E\n\u003Cp\u003E\nThough a work in progress generally, I do seem to have the slope code in a finished (i.e. documented state!)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/documentation/lib_slope_readme.md\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/documentation/lib_slope_readme.md\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/scripts/lib_slope.ks\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/scripts/lib_slope.ks\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s genius!\n\u003C/p\u003E\n\u003Cp\u003E\nI have a deorbit script that I use for (some) boosters in career but a lot (most) of the time the damn things always seem to hit the slopiest terrain possible, so adding this functionality would be awesome.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2018-05-21T04:45:38Z","Content":"\n\u003Cp\u003E\ndoes the \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/commands/flight/systems.html?highlight=chutes#global:CHUTESSAFE\u0022 rel=\u0022external nofollow\u0022\u003Ecode example for CHUTESAFE\u003C/a\u003E work with RealChute? I started doing some testing tonight but I couldn\u0027t tell if it was not meant to work or I was doing it wrong.\n\u003C/p\u003E\n"}]}