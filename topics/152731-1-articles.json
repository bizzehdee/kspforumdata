{"TopicId":152731,"ForumId":32,"TopicTitle":"Apoapsis and periapsis randomly shifted","CreatedByName":"Proterus","CreatedById":171989,"CreatedDateTime":"2016-11-29T01:19:04Z","PageNum":1,"Articles":[{"CreatedByName":"Proterus","CreatedById":171989,"CreatedDateTime":"2016-11-29T01:19:04Z","Content":"\n\u003Cp\u003E\nSo I was sitting there getting started on some math calculating my semi major axis and stuff and my periapsis shifted a little bit from 76023 to 76018. \u00A0So I looked and saw my throttle wasn\u0027t up or anything and I shutdown my engine just to be sure. \u00A0So I\u0027m going to recalculate my semi major axis and I see my apoapsis shift 7 meters from 365093 to 365100 right before my eyes and I\u0027m\u00A0out of the atmosphere completely. \u00A0What the heck so much for being \u0022on rails\u0022. \u00A0No \u003Cabbr title=\u0022Reaction Control System\u0022\u003Ercs\u003C/abbr\u003E or anything either. \u00A0It\u0027s a very basic ship with just a single engine I\u0027m just using to test out some orbital mechanics equations.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone know what\u0027s up with this? \u00A0Is it just the physics engine recalculating things or something?\n\u003C/p\u003E\n"},{"CreatedByName":"DrunkenKerbalnaut","CreatedById":169550,"CreatedDateTime":"2016-11-29T02:55:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222867912\u0022 data-ipsquote-contentid=\u0022152731\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480382344\u0022 data-ipsquote-userid=\u0022171989\u0022 data-ipsquote-username=\u0022Proterus\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Proterus said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo I was sitting there getting started on some math calculating my semi major axis and stuff and my periapsis shifted a little bit from 76023 to 76018. \u00A0So I looked and saw my throttle wasn\u0027t up or anything and I shutdown my engine just to be sure. \u00A0So I\u0027m going to recalculate my semi major axis and I see my apoapsis shift 7 meters from 365093 to 365100 right before my eyes and I\u0027m\u00A0out of the atmosphere completely. \u00A0What the heck so much for being \u0022on rails\u0022. \u00A0No \u003Cabbr title=\u0022Reaction Control System\u0022\u003Ercs\u003C/abbr\u003E or anything either. \u00A0It\u0027s a very basic ship with just a single engine I\u0027m just using to test out some orbital mechanics equations.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone know what\u0027s up with this? \u00A0Is it just the physics engine recalculating things or something?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m no wizz in this category, but as I understand it: it\u0027s floating points at their finest.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: link removed. Not the one I thought it was, and now I\u0027ve lost the other.... Dammit.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-29T02:58:32Z\u0022 title=\u002211/29/2016 02:58  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 29, 2016\u003C/time\u003E by DrunkenKerbalnaut\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starman4308","CreatedById":122674,"CreatedDateTime":"2016-11-29T03:01:30Z","Content":"\n\u003Cp\u003E\nA, you\u0027re only on-rails if you\u0027re timewarping or not the active vessel. Without being on-rails, there\u0027ll be very small perturbations caused by both micro-stutters in the vessel parts and imperfect calculation of the force of gravity. There has been efforts to try to reduce these effects, but nothing is perfect. It doesn\u0027t help that most of this math is being calculated with single-precision floating point numbers, which are only accurate to about 1 part in 10 million.\n\u003C/p\u003E\n\u003Cp\u003E\nB, even when on-rails, there\u0027s slight stutters caused by machine precision and the patched-conics solver; the double-precision floating point math used for on-rails calculations is still only accurate to about 1 part in 10^14. Granted, this is more accuracy than NASA expects*, so the on-rails calculations are rather good.\n\u003C/p\u003E\n\u003Cp\u003E\n*NASA\u0027s biggest issue isn\u0027t the accuracy of its floating-point math, it\u0027s experimental uncertainty in measuring the positions, velocities, and masses of all the very, very many objects in the Solar System (plus solar wind, etc).\n\u003C/p\u003E\n"},{"CreatedByName":"MaxL_1023","CreatedById":152317,"CreatedDateTime":"2016-11-29T03:05:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222867995\u0022 data-ipsquote-contentid=\u0022152731\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480388490\u0022 data-ipsquote-userid=\u0022122674\u0022 data-ipsquote-username=\u0022Starman4308\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Starman4308 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nB, even when on-rails, there\u0027s slight stutters caused by machine precision and the patched-conics solver; the double-precision floating point math used for on-rails calculations is still only accurate to about 1 part in 10^14. Granted, this is more accuracy than NASA expects*, so the on-rails calculations are rather good.\n\u003C/p\u003E\n\u003Cp\u003E\n*NASA\u0027s biggest issue isn\u0027t the accuracy of its floating-point math, it\u0027s experimental uncertainty in measuring the positions, velocities, and masses of all the very, very many objects in the Solar System (plus solar wind, etc).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBelieve it or not, NASA\u0027s space probes (especially the earlier ones without a lot of maneuvering capability) had to take solar wind and even photon pressure into account to ensure their trajectories were correct. The Mercury probes were especially vulnerable to this, and would have missed the planet completely if they didn\u0027t adjust the angle of their solar cells to perform very slight corrections.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOn the other side, the Voyager II probe was launched so accurately towards Neptune that it was the equivalent of passing through the eye of a needle from 400km away.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nProbes are serious business - Kerbal style doesn\u0027t cut it (although it is much more fun!).\n\u003C/p\u003E\n"},{"CreatedByName":"Starman4308","CreatedById":122674,"CreatedDateTime":"2016-11-29T03:10:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222867999\u0022 data-ipsquote-contentid=\u0022152731\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480388731\u0022 data-ipsquote-userid=\u0022152317\u0022 data-ipsquote-username=\u0022MaxL_1023\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, MaxL_1023 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBelieve it or not, NASA\u0027s space probes (especially the earlier ones without a lot of maneuvering capability) had to take solar wind and even photon pressure into account to ensure their trajectories were correct. The Mercury probes were especially vulnerable to this, and would have missed the planet completely if they didn\u0027t adjust the angle of their solar cells to perform very slight corrections.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOn the other side, the Voyager II probe was launched so accurately towards Neptune that it was the equivalent of passing through the eye of a needle from 400km away.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nProbes are serious business - Kerbal style doesn\u0027t cut it (although it is much more fun!).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think the magnitude of the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Pioneer_anomaly\u0022 rel=\u0022external nofollow\u0022\u003EPioneer anomaly\u003C/a\u003E and NASA\u0027s new micro-thrusters\u00A0adequately sum\u00A0up the amount of insanity NASA, the ESA, Roscosmos, etc. have to deal with. Fortunately for these agencies\u0027 states of mind, usually correction burns aren\u0027t too onerous.\n\u003C/p\u003E\n"},{"CreatedByName":"Proterus","CreatedById":171989,"CreatedDateTime":"2016-11-29T03:20:19Z","Content":"\n\u003Cp\u003E\nThis makes sense, I\u0027ve programmed stuff before and had it spit out calculated numbers into the command prompt\u00A0and when you use doubles and floats you get weird exponentials when you\u0027re supposed to get zero and these numbers will only approximate zero. \u00A0I guess I should have thought about it more I was just thinking okay there isn\u0027t any thrust so it should just stop calculating but I guess it doesn\u0027t work that way. \u00A0I do enjoy the history you guys are talking about, good stuff.\n\u003C/p\u003E\n"},{"CreatedByName":"p1t1o","CreatedById":74091,"CreatedDateTime":"2016-11-29T14:32:41Z","Content":"\n\u003Cp\u003E\nLets pretend that the altitude readout is stupidly accurate and it was just showing that your\u00A0land-track is just passing over slight irregularities in terrain...\n\u003C/p\u003E\n"},{"CreatedByName":"Tex_NL","CreatedById":58254,"CreatedDateTime":"2016-11-29T15:25:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222867912\u0022 data-ipsquote-contentid=\u0022152731\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480382344\u0022 data-ipsquote-userid=\u0022171989\u0022 data-ipsquote-username=\u0022Proterus\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, Proterus said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n...\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone know what\u0027s up with this? \u00A0Is it just the physics engine recalculating things or something?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYour ship rotates round its Centre of Mass (CoG). If you rotate your ship, at some points the root part will move faster and at others it will move slower than the CoG. And since the orbit is calculated from the root part your \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E, \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E and inclination may shift slightly. On craft where the root and CoG are very close together you will barely notice anything. But the further they are apart the bigger the errors.\u003Cbr\u003E\nOver the past few versions Squad has made significant progress in reducing these oscillations. Combined with the already mentioned floating point errors no orbit will always be perfectly stable.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-29T15:25:41Z\u0022 title=\u002211/29/2016 03:25  PM\u0022 data-short=\u00227 yr\u0022\u003ENovember 29, 2016\u003C/time\u003E by Tex_NL\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DrunkenKerbalnaut","CreatedById":169550,"CreatedDateTime":"2016-11-29T15:28:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222868381\u0022 data-ipsquote-contentid=\u0022152731\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480433119\u0022 data-ipsquote-userid=\u002258254\u0022 data-ipsquote-username=\u0022Tex_NL\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Tex_NL said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYour ship rotates round its Centre of Mass (CoG). If you rotate your ship, at some points the root part will move faster and at others it will move slower than the CoG. And since the orbit is calculated from the root part your \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E, \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E and inclination may shift slightly. On craft where the root and CoG are very close together you will barely notice anything. But the further they are apart the bigger the errors.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDoes this effect a ship oriented normal/anti-normal?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Tex_NL","CreatedById":58254,"CreatedDateTime":"2016-11-29T15:31:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222868387\u0022 data-ipsquote-contentid=\u0022152731\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480433314\u0022 data-ipsquote-userid=\u0022169550\u0022 data-ipsquote-username=\u0022DrunkenKerbalnaut\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, DrunkenKerbalnaut said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDoes this effect a ship oriented normal/anti-normal?\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOf course it does. Any movement that puts the root in an ever so slightly different orbit than the CoG can ever so slightly change the \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E, \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E and inclination.\n\u003C/p\u003E\n"},{"CreatedByName":"DrunkenKerbalnaut","CreatedById":169550,"CreatedDateTime":"2016-11-29T15:36:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222868390\u0022 data-ipsquote-contentid=\u0022152731\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480433488\u0022 data-ipsquote-userid=\u002258254\u0022 data-ipsquote-username=\u0022Tex_NL\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, Tex_NL said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOf course it does. Any movement that puts the root in an ever so slightly different orbit than the CoG can ever so slightly change the \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E, \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E and inclination.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nK.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Gianni1122","CreatedById":170752,"CreatedDateTime":"2016-11-29T15:40:01Z","Content":"\n\u003Cp\u003E\nAre you running 1.2.1?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/9619\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/issues/9619\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere is also a setting for orbital drift compensation\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.reddit.com/r/KerbalAcademy/comments/4rzsz9/orbital_drift_compensation/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.reddit.com/r/KerbalAcademy/comments/4rzsz9/orbital_drift_compensation/\u003C/a\u003E\n\u003C/p\u003E\n"}]}