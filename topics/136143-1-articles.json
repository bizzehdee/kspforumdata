{"TopicId":136143,"ForumId":29,"TopicTitle":"Creating and manipulating ScienceData","CreatedByName":"The Great Potato","CreatedById":134427,"CreatedDateTime":"2016-04-05T21:29:58Z","PageNum":1,"Articles":[{"CreatedByName":"The Great Potato","CreatedById":134427,"CreatedDateTime":"2016-04-05T21:29:58Z","Content":"\n\u003Cp\u003E\nHey all,\n\u003C/p\u003E\n\u003Cp\u003E\nComing back to KSP for 1.1, I kinda want to give the plugin API a try.\u00A0I\u0027m interested in fiddling with science experiments and new styles of\u00A0data collection, but I\u0027m not really sure how to instantiate new pieces of ScienceData. I need to figure that out before I can proceed with fiddling.\u00A0Here are a couple of things that are leaving me a bit lost:\n\u003C/p\u003E\n\u003Cp\u003E\n1) IScienceDataContainer seems to contain the function prototype for recovering data. However, the ModuleScienceExperiment class (which implements it) doesn\u0027t actually\u00A0\u003Cem\u003Estore\u003C/em\u003E\u00A0data. Am I correct in assuming there\u0027s some external, possibly global, storage structure for ScienceData? Where is it located and how do I add to it?\n\u003C/p\u003E\n\u003Cp\u003E\n2) By overwriting the location of an existing ScienceData within ModuleScienceExperiment, I can trick the game into recovering my homemade\u00A0ScienceDatas. However, there are fields within ScienceData that I can\u0027t figure out how to populate properly, so it causes problems with the science archives. I can retrieve the base Experiment ID\u00A0from ModuleScienceExperiment, but ScienceData appears to need something of the format \u0027ExperimentID@SituationID\u0027. Where do I get the current situation? From the Vessel? What about the container ID?\n\u003C/p\u003E\n\u003Cp\u003E\n3) Even if I had the right stuff in my new ScienceData, I\u0027m not certain the new data would show correctly in the science archives. Where is the science recovery process\u00A0handled? Do I have to register new pieces of ScienceData with some additional class\u00A0for it to report correctly?\u00A0What values are displayed in the archive GUI?\n\u003C/p\u003E\n\u003Cp\u003E\n4) Where\u0027s\u00A0the science? ScienceData has the number of Mits, but stores no actual science. ScienceExperiments show a base value, but not the current amount collected towards the maximum. How does the game keep track of collected science/data on a per biome, per situation basis?\n\u003C/p\u003E\n\u003Cp\u003E\n...Now that I think about it, 3 and 4 are kinda redundant.\u00A0\u3078\u203F(\u30C4)\u203F\u310F\n\u003C/p\u003E\n\u003Cp\u003E\nAnyways, I\u0027d appreciate any advice for science plugins in specific and the plugin API in general. Thanks!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"The Great Potato","CreatedById":134427,"CreatedDateTime":"2016-04-09T07:53:19Z","Content":"\n\u003Cp\u003E\nPicked this up again today. After an embarrassing amount of hair-pulling, I found the ScienceSubject and ResearchAndDevelopment classes in the KSP API documentation - they were exactly what I needed! Using GetExperimentSubject and SubmitScienceData, I can convert pretty much whatever I want into both Science and a valid R\u0026amp;D Archives entry.\n\u003C/p\u003E\n\u003Cp\u003E\nNow I can start building new and more interesting ways to collect science!\n\u003C/p\u003E\n\u003Cp\u003E\n...There are still a handful of smaller things I\u0027m unsure about, though. I\u0027ve been able to work around them, but I\u0027ll eventually want to find better solutions:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nHow the heck do you get the vessel\u0027s current ExperimentSituations value? This is a complete enigma! I had to reinvent this wheel to get everything else to work. \u003Cimg alt=\u0022:mad:\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif\u0022 title=\u0022:mad:\u0022\u003E\u003C/li\u003E\n\u003Cli\u003E\nGetExperimentSubject takes a biome ID as a parameter. What if the experiment is non-biome-specific, like flying Mystery Goo?\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-06-02T03:03:04Z","Content":"\n\u003Cp\u003E\nSo, it\u0027s been quite a few weeks since your last post, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/134427-the-great-potato/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022134427\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/134427-the-great-potato/\u0022 rel=\u0022\u0022\u003E@The Great Potato\u003C/a\u003E, so maybe you have long since figured all this out, but I\u0027ve been poking at some science lately and have figured out some things, and am scratching my head about others.\u00A0 Perhaps we can exchange notes?\u00A0 \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222504147\u0022 data-ipsquote-contentid=\u0022136143\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221460188399\u0022 data-ipsquote-userid=\u0022134427\u0022 data-ipsquote-username=\u0022The Great Potato\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 4/9/2016 at 0:53 AM, The Great Potato said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cul\u003E\u003Cli\u003E\nHow the heck do you get the vessel\u0027s current ExperimentSituations value? This is a complete enigma! I had to reinvent this wheel to get everything else to work. \u003Cimg alt=\u0022:mad:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif\u0022 title=\u0022:mad:\u0022\u003E\u003C/li\u003E\n\u003Cli\u003E\nGetExperimentSubject takes a biome ID as a parameter. What if the experiment is non-biome-specific, like flying Mystery Goo?\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCheck out the \u003Cstrong\u003EScienceUtil\u003C/strong\u003E class, which has some handy static helper methods on it.\u00A0 In particular:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nIt has \u0022GetExperimentBiome\u0022 which will tell you a biome name if you give it a CelestialBody, latitude, and longitude.\n\u003C/li\u003E\n\u003Cli\u003E\nIt has \u0022GetExperimentSituation\u0022, which gives you an ExperimentSituations if you give it a Vessel.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nNow all I have to do is figure out how to use all the numbers in ScienceSubject.\u00A0 \u003Ca href=\u0022http://docuwiki-kspapi.rhcloud.com/#/classes/ScienceSubject\u0022 rel=\u0022external nofollow\u0022\u003EThis page\u003C/a\u003E has some very useful descriptions, but I\u0027m still fuzzy on the actual math involved.\u00A0 Perhaps I need to do some trial-and-error ...experiments.\u00A0 \u003Cspan style=\u0022font-size:9px;\u0022\u003E(no pun intended)\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2016-06-02T23:30:54Z","Content":"\n\u003Cp\u003E\nIt\u0027s hard to do much to ScienceData that differs much from how standard data is generated. A lot of it is handled internally by R\u0026amp;D so, it can be tricky to try things like manually adjusting the amount of science you get for certain data.\n\u003C/p\u003E\n\u003Cp\u003E\nFor the Science Subject values check this old thread, aside from the broken formatting I think everything is still valid:\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/56973-understanding-science-points/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nThe tricky one is Scientific Value; it handles the science point decay from repeated experiments.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, regarding the ScienceUtil class, be aware that the KSC biomes work differently. You\u0027ll need to check to see if the Vessel.landedAt string is empty, if it isn\u0027t the Vessel.GetLandedAtString() string will give you the proper KSC biome name.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}