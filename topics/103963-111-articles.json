{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":111,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-16T22:36:49Z","Content":"\u003E \n\u003E \n\u003E 31 minutes ago, MrMeeb said:\n\u003E \n\u003E \n\u003E Are there any pros of DX11 versus OpenGL? I know that they\u0027re different shaders, but when it comes to forcing one or the other, what\u0027s the difference?\n\u003E \n\nDx11 gives me better performance, it also has antialiasing."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-17T02:17:47Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Dx11 gives me better performance, it also has antialiasing.\n\u003E \n\nWell OpenGL has antialiasing, just KSP won\u0027t use it. You can overide that behaviour from the gpu driver control panel to get antialiasing."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T02:44:22Z","Content":"\u003E \n\u003E \n\u003E 25 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E Well OpenGL has antialiasing, just KSP won\u0027t use it. You can overide that behaviour from the gpu driver control panel to get antialiasing.\n\u003E \n\nI tried this but it always disappears after I alt-tab out the first time, and I alt-tab out or switch to windowed a lot."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-17T02:47:40Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E I tried this but it always disappears after I alt-tab out the first time, and I alt-tab out or switch to windowed a lot.\n\u003E \n\nI will have to test I have two monitors so I don\u0027t alt-tab a lot\n\nEdit: even in windowed mode?\n\n**Edited \u003Ctime datetime=\u00222015-12-17T02:49:53Z\u0022 title=\u002212/17/2015 02:49  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 17, 2015\u003C/time\u003E by selfish\\_meme**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T02:53:31Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E I will have to test I have two monitors so I don\u0027t alt-tab a lot\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Edit: even in windowed mode?\n\u003E \n\nActually OpenGL won\u0027t run in windowed mode on my machine, it gives me an error saying unable to find suitable video mode. If I attempt to start in OpenGL in windowed mode it crashes, if I start in fullscreen and later switch to windowed it crashes. This, coupled with the loss of AA on alt-tab and the abysmal performance makes me favour dx11."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-17T04:47:07Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E Actually OpenGL won\u0027t run in windowed mode on my machine, it gives me an error saying unable to find suitable video mode. If I attempt to start in OpenGL in windowed mode it crashes, if I start in fullscreen and later switch to windowed it crashes. This, coupled with the loss of AA on alt-tab and the abysmal performance makes me favour dx11.\n\u003E \n\nWell I would probably put that down to your video card/driver rather than just OpenGL itself (though it does not run AS fast as DirectX), I\u0027m guessing you have a laptop? I used to have an Alienware with SLI GPU\u0027s and the thing was horrid 6 months after being new because it required special drivers from Dell who did not keep them as current as the latest nVidia ones. I switched to Linux and I could use the latest Nvidia driver even in SLI and get decent frame rates.\n\nMy current Linux box has a GTX570 and at full KSP detail and 1920x1080 resolution I am getting 30\u002B FPS with 100 part count ships, 32x AA and 16x AF and Scatterer, SVE, Real Plume, planetshine and Windowshine. But that is really determined by my CPU, the i5 2500k was stock 3.3Ghz and that setup would have me at 16FPS, I overclocked it to 4.5Ghz and now have 30\u002B FPS, it was the 100\u002B part count ship making the FPS hit."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T05:11:47Z","Content":"\u003E \n\u003E \n\u003E 29 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E Well I would probably put that down to your video card/driver rather than just OpenGL itself (though it does not run AS fast as DirectX), I\u0027m guessing you have a laptop? I used to have an Alienware with SLI GPU\u0027s and the thing was horrid 6 months after being new because it required special drivers from Dell who did not keep them as current as the latest nVidia ones. I switched to Linux and I could use the latest Nvidia driver even in SLI and get decent frame rates.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E My current Linux box has a GTX570 and at full KSP detail and 1920x1080 resolution I am getting 30\u002B FPS with 100 part count ships, 32x AA and 16x AF and Scatterer, SVE, Real Plume, planetshine and Windowshine. But that is really determined by my CPU, the i5 2500k was stock 3.3Ghz and that setup would have me at 16FPS, I overclocked it to 4.5Ghz and now have 30\u002B FPS, it was the 100\u002B part count ship making the FPS hit.\n\u003E \n\nI wish I had invested the extra money and bought a CPU and mobo that support overclocking. With my [\\[email protected\\]](/cdn-cgi/l/email-protection) I\u0027m quite careful with the part count. The 2500k is pretty much a legendary CPU.\n\nI usually run at around 40-50 fps with scatterer when I\u0027m not CPU limited, switching to OpenGL makes me run at 27-35 fps and frankly it\u0027s quite bad. I have a single 560 Ti with the drivers updated. I believe the bug from OpenGL nor working in windowed mode is common with unity when using a HDMI cable.\n\nBtw here\u0027s something interesting, KSP\u0027s CPU usage with the new CPU waves:\n\n![BJ1RgGV.png](http://i.imgur.com/BJ1RgGV.png)\n\n**Edited \u003Ctime datetime=\u00222015-12-17T05:17:07Z\u0022 title=\u002212/17/2015 05:17  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 17, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T06:38:21Z","Content":"Craft-wave interactions, not sure how to embed .webms here\n\n[http://s1.webmshare.com/GyaEb.webm](http://s1.webmshare.com/GyaEb.webm)\n\n[http://s1.webmshare.com/99M1q.webm](http://s1.webmshare.com/99M1q.webm)\n\nProbably I\u0027ll just remove the stock splashing effect for now, it\u0027s static and a performance hog.\n\n**Edited \u003Ctime datetime=\u00222015-12-17T06:52:18Z\u0022 title=\u002212/17/2015 06:52  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 17, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-17T07:27:07Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E I wish I had invested the extra money and bought a CPU and mobo that support overclocking. With my [\\[email protected\\]](/cdn-cgi/l/email-protection) I\u0027m quite careful with the part count. The 2500k is pretty much a legendary CPU.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I usually run at around 40-50 fps with scatterer when I\u0027m not CPU limited, switching to OpenGL makes me run at 27-35 fps and frankly it\u0027s quite bad. I have a single 560 Ti with the drivers updated. I believe the bug from OpenGL nor working in windowed mode is common with unity when using a HDMI cable.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Btw here\u0027s something interesting, KSP\u0027s CPU usage with the new CPU waves:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E ![BJ1RgGV.png](http://i.imgur.com/BJ1RgGV.png)\n\u003E \n\nI got that CPU on a mates recommendation, did not even think about overclocking until recently, then it was just a simple multiplier change and a better fan. I don\u0027t even run Windows so I can\u0027t see the difference, I know when properly optimised the difference can be small. But thats probably not happening here ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\nThat\u0027s good right, the threads are not very active?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T07:34:55Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E I got that CPU on a mates recommendation, did not even think about overclocking until recently, then it was just a simple multiplier change and a better fan. I don\u0027t even run Windows so I can\u0027t see the difference, I know when properly optimised the difference can be small. But thats probably not happening here ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E That\u0027s good right, the threads are not very active?\n\u003E \n\nThat\u0027s as much CPU usage as I can get it, the threads have to wait for the first thread (not the unity main thread) to do some preprocessing before they can get working and that causes them to wait for a bit. Stock KSP uses 25% of my CPU at most, so this means an increase of 40% in CPU usage over extra threads. With the frourier grid at 64 CPU usage is at 40%, so a 15% increase, pretty sure everyone almost should be able to run this. May still cause some slowdowns as the buoyancy can  only be adjusted in the main thread."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-12-17T07:43:28Z","Content":"those videos look sweet, the stock effect is pretty bad. why is the texture under the waves the runway? the lag time on the waves looks good as long as the wave amplitude is not too high.\n\nOh I see you raised the ocean level so you don\u0027t have to frack around launching craft\n\nThough this is already hard enough, are you taking mass into account? By the way -\u003E carrier, with a plane on it! Not an F-14 ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022)\n\n![KuWhpja.png](http://i.imgur.com/KuWhpja.png)\n\nPicture from my macbook pro which can\u0027t run any graphics mods.\n\n**Edited \u003Ctime datetime=\u00222015-12-17T07:48:35Z\u0022 title=\u002212/17/2015 07:48  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 17, 2015\u003C/time\u003E by selfish\\_meme**"},{"CreatedByName":"cobbman11","CreatedById":76711,"CreatedDateTime":"2015-12-17T08:39:05Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), you\u0027ve made a beautiful thing.\n\n![iNuwi1u.png](http://i.imgur.com/iNuwi1u.png)"},{"CreatedByName":"Val","CreatedById":126227,"CreatedDateTime":"2015-12-17T09:16:14Z","Content":"\u003E \n\u003E \n\u003E 6 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Actually OpenGL won\u0027t run in windowed mode on my machine, it gives me an error saying unable to find suitable video mode. If I attempt to start in OpenGL in windowed mode it crashes, if I start in fullscreen and later switch to windowed it crashes. This, coupled with the loss of AA on alt-tab and the abysmal performance makes me favour dx11.\n\u003E \n\nI got that error, too. But it is possible to run OpenGL in windowed mode. You just need to manually edit the resolution, in the KSP settings file, to be a couple pixels smaller than the screen resolution.\n\nSo if your resolution is 1920x1080, edit KSP settings file to **1918**x1080. Then OpenGL will work fine in -popupwindow mode.\n\n\u003E \n\u003E \n\u003E 2 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Craft-wave interactions, not sure how to embed .webms here\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [http://s1.webmshare.com/GyaEb.webm](http://s1.webmshare.com/GyaEb.webm)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [http://s1.webmshare.com/99M1q.webm](http://s1.webmshare.com/99M1q.webm)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Probably I\u0027ll just remove the stock splashing effect for now, it\u0027s static and a performance hog.\n\u003E \n\nDid you just flood KSC? The horror! ![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif \u0022:0.0:\u0022)\n\nWave interaction looks really great. Gonna make sea landings and takeoffs a bit harder, though ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-12-17T11:52:00Z","Content":"\u003E \n\u003E \n\u003E 5 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Craft-wave interactions, not sure how to embed .webms here\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [http://s1.webmshare.com/GyaEb.webm](http://s1.webmshare.com/GyaEb.webm)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [http://s1.webmshare.com/99M1q.webm](http://s1.webmshare.com/99M1q.webm)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Probably I\u0027ll just remove the stock splashing effect for now, it\u0027s static and a performance hog.\n\u003E \n\nIt\u0027s so cool that hurts, man. You should be hired by Squad, clearly.  \n\nBTW I\u0027m the only person who is thinking in **kerbal surfing** after your videos!? ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T15:20:05Z","Content":"\u003E \n\u003E \n\u003E 7 hours ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E those videos look sweet, the stock effect is pretty bad. why is the texture under the waves the runway? the lag time on the waves looks good as long as the wave amplitude is not too high.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Oh I see you raised the ocean level so you don\u0027t have to frack around launching craft\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Though this is already hard enough, are you taking mass into account? By the way -\u003E carrier, with a plane on it! Not an F-14 ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022)\n\u003E \n\u003E \n\u003E \n\u003E [![KuWhpja.png](http://i.imgur.com/KuWhpja.png)](http://i.imgur.com/KuWhpja.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Picture from my macbook pro which can\u0027t run any graphics mods.\n\u003E \n\nYeah, I did that to speed up testing. Not sure what you mean by lag time on the waves.\n\n\u003E \n\u003E \n\u003E 6 hours ago, Val said:\n\u003E \n\u003E \n\u003E I got that error, too. But it is possible to run OpenGL in windowed mode. You just need to manually edit the resolution, in the KSP settings file, to be a couple pixels smaller than the screen resolution.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E So if your resolution is 1920x1080, edit KSP settings file to **1918**x1080. Then OpenGL will work fine in -popupwindow mode.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Did you just flood KSC? The horror! ![:0.0:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif \u0022:0.0:\u0022)\n\u003E \n\u003E \n\u003E \n\u003E Wave interaction looks really great. Gonna make sea landings and takeoffs a bit harder, though ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nI see, I still prefer to run dx11 for the performance though.\n\nFrom what I saw landing a sea plane in one piece is nearly impossible, all parts seem to have the splashing tolerance of a biscuit."},{"CreatedByName":"Nansuchao","CreatedById":135151,"CreatedDateTime":"2015-12-17T17:49:39Z","Content":"Not to talk about the weird physic effect water has for ships, like jumping away from water at more speed than you splashed and the no drag from water, that\u0027s really weird."},{"CreatedByName":"Motokid600","CreatedById":66349,"CreatedDateTime":"2015-12-17T17:56:40Z","Content":"Are white caps default in the current download? Was playing around last night, but I don\u0027t remember seeing any."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T19:56:07Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Nansuchao said:\n\u003E \n\u003E \n\u003E Not to talk about the weird physic effect water has for ships, like jumping away from water at more speed than you splashed and the no drag from water, that\u0027s really weird.\n\u003E \n\nPretty much, the water doesn\u0027t have any drag, now imagine landing in the middle of high waves with no way to slow down."},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-12-17T20:22:11Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E From what I saw landing a sea plane in one piece is nearly impossible, all parts seem to have the splashing tolerance of a biscuit.\n\u003E \n\nStock won\u0027t make a chance. It will be wonderful for my mod though. Any ETA for a test version? I would need to adjust the hydrodynamics. There\u0027s a real reason now to have buoyancy off the stern or bow adjusted to the type of vessel, a carrier will cut through the waves much more than a frigate which would run the risk of becoming a submarine using the same behavior."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T20:47:17Z","Content":"\u003E \n\u003E \n\u003E 28 minutes ago, Azimech said:\n\u003E \n\u003E \n\u003E Stock won\u0027t make a chance. It will be wonderful for my mod though. Any ETA for a test version? I would need to adjust the hydrodynamics. There\u0027s a real reason now to have buoyancy off the stern or bow adjusted to the type of vessel, a carrier will cut through the waves much more than a frigate which would run the risk of becoming a submarine using the same behavior.\n\u003E \n\nWell right now there are frequent kraken attacks due to a bug in the buoyancy system (NathanKell said he\u0027d fix this for the next version though) and there are also some other problems I need to fix first so I don\u0027t have a real ETA yet even for a test version. Currently it seems rather unstable though, ships are prone to exploding and flying off at any moment, even though I\u0027m using a feature built into the stock buoyancy system to do this.\n\nBtw how do you change the splashdown tolerance of a part? I checked in the part .cfg files and saw only a crash tolerance value.\n\n**Edited \u003Ctime datetime=\u00222015-12-17T20:51:17Z\u0022 title=\u002212/17/2015 08:51  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 17, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Darren9","CreatedById":58062,"CreatedDateTime":"2015-12-17T20:47:54Z","Content":"It looks like a bit of a rough ride ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Do you still get the splashed down state so you can leave the scene and return to it?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T20:50:33Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Darren9 said:\n\u003E \n\u003E \n\u003E It looks like a bit of a rough ride ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Do you still get the splashed down state so you can leave the scene and return to it?\n\u003E \n\nNot really no, working on that.\n\nPlus sometimes you load a ship and it loads higher than where the waves are then falls down 2 meters and breaks into pieces."},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-12-17T21:08:21Z","Content":"\u003E \n\u003E \n\u003E 15 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Well right now there are frequent kraken attacks due to a bug in the buoyancy system (NathanKell said he\u0027d fix this for the next version though) and there are also some other problems I need to fix first so I don\u0027t have a real ETA yet even for a test version. Currently it seems rather unstable though, ships are prone to exploding and flying off at any moment, even though I\u0027m using a feature built into the stock buoyancy system to do this.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Btw how do you change the splashdown tolerance of a part? I checked in the part .cfg files and saw only a crash tolerance value.\n\u003E \n\nHmmm AFAIK there is no splashdown tolerance value, but breaking force and breaking torque do have an influence on the interaction with other parts. Might just be the joints breaking as they do with high dynamic pressure in flight. Buoyancy per part can be adjusted in considerable detail, which will affect behavior. Say for example you have a root part with low buoyancy with a two parts connected to the rear and front with a very high buoyancy, it would produce considerable strain on the joints. If a larger number of parts with less buoyancy would be connected to the root part it would reduce the strain a lot."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-17T21:14:27Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, Azimech said:\n\u003E \n\u003E \n\u003E Hmmm AFAIK there is no splashdown tolerance value, but breaking force and breaking torque do have an influence on the interaction with other parts. Might just be the joints breaking as they do with high dynamic pressure in flight. Buoyancy per part can be adjusted in considerable detail, which will affect behavior. Say for example you have a root part with low buoyancy with a two parts connected to the rear and front with a very high buoyancy, it would produce considerable strain on the joints. If a larger number of parts with less buoyancy would be connected to the root part it would reduce the strain a lot.\n\u003E \n\nI see, but it still seems that individual parts will be destroyed even plopping in the water at 3m/s."},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-12-17T21:21:52Z","Content":"That almost sounds like pre 1.0.5 behavior. I can only imagine hydrodynamics becoming pretty complex in the future with all these issues to take care of."}]}