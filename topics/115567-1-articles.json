{"TopicId":115567,"ForumId":35,"TopicTitle":"Better textures with nvcompress","CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2015-07-10T16:34:12Z","PageNum":1,"Articles":[{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2015-07-10T16:34:12Z","Content":"\n\u003Cp\u003EI used Active Texture Management, then DDSLoader, and I was enthusiastic about the startup speed: I play KSP on an Aspire One netbook, so any performance tweak is important.\u003C/p\u003E\u003Cp\u003EBut I started noticing texture artifacts. When DDS became stock, the artifacts where still there.\u003C/p\u003E\u003Cp\u003EI experimented a lot with DDS, and i found out nvcompress gives much better results: just reprocessing the stock DDS files all the artifacts were gone.\u003C/p\u003E\u003Cp\u003EThis is an example: the tank on the left has the stock texture, the one on the right is reprocessed with nvcompress. The quality difference is huge.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/QjIbf4Q.png\u0022 alt=\u0022QjIbf4Q.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI tried with img2dds, but the artifacts remain.\u003C/p\u003E\u003Cp\u003EDoes anybody else had the same problems? I\u0027m currently working on a perl script to automatize the whole reprocessing, and I\u0027d like to share it when it\u0027s done, if it is useful to anybody.\u003C/p\u003E\n"},{"CreatedByName":"Trolllception","CreatedById":147346,"CreatedDateTime":"2015-07-11T22:23:48Z","Content":"\n\u003Cp\u003EI don\u0027t have artifacts like these. The stock dds textures look fine for me.\u003C/p\u003E\n"},{"CreatedByName":"Weywot8","CreatedById":146603,"CreatedDateTime":"2015-07-12T13:36:35Z","Content":"\n\u003Cp\u003EI do when running on OpenGL mode as one does when looking for performance hacks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E. Does nvcompress result in a smaller RAM footprint though? Knowing absolutely nothing about graphics and compression, can\u0027t help out but would be interested in providing testing feedback if you want any.\u003C/p\u003E\u003Cp\u003EQuick callout on what does and doesn\u0027t get\u0027s compressed - some visual enhancement mods appear to need certain formats for \u0022volumetric clouds\u0022 and stuff. Might want to keep an eye out for that to avoid floods of reporting when everyone starts using your script.\u003C/p\u003E\n"},{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2015-07-13T08:03:25Z","Content":"\n\u003Cp\u003EThanks for the feedback, Weywot8 - at least I know I\u0027m not alone now :-)\u003C/p\u003E\u003Cp\u003EThere\u0027s no performance or memory changes switching to nvcompress, because of how DDS compression works. But many stock textures have an unused transparency channel, and that\u0027s a waste: textures with transparency must be compressed to DXT5 format, but textures without transparency can use the DXT1 format, taking exactly half the space. The tool I\u0027m writing can detect these cases and optimize them away. And it can be used to reduce the size of textures you don\u0027t use much - most spaceplane parts for me.\u003C/p\u003E\u003Cp\u003EBy the way, it\u0027s a Linux tool! It needs the ImageMagick utilities to analyze and convert textures. They work on windows too, but the installation could be a little tricky.\u003C/p\u003E\u003Cp\u003EIt mostly works now, I\u0027m trying to make it a little more user friendly.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-07-13T18:38:35Z","Content":"\n\u003Cp\u003EAlpha is used for specularity in the usual KSP shader. I think the only case where an RGBA texture can be made RGB is if the alpha channel is 100% white.\u003C/p\u003E\n"},{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2015-07-13T21:34:06Z","Content":"\n\u003Cp\u003EYes NathanKell, 100% alpha is what I check for.\u003C/p\u003E\u003Cp\u003EBy the way, here\u0027s a link to the script I\u0027m working on. It\u0027s feature complete, just not very user friendly. It\u0027s written and tested on Linux, but it should work on Windows, with a little effort.\u003C/p\u003E\u003Cp\u003EIt needs the ImageMagick command line tools and the NVIDIA Texture Tools (\u003Ca href=\u0022https://code.google.com/p/nvidia-texture-tools/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://code.google.com/p/nvidia-texture-tools/\u003C/a\u003E).\u003C/p\u003E\u003Cp\u003EIt shows a little help message when launched with no parameters.\u003C/p\u003E\u003Cp\u003EFor instance, this recompresses the stock parts textures:\u003C/p\u003E\u003Cp\u003E$ ksp-dds-tool \u0026lt;path-to-KSP\u0026gt;/GameData/Squad\u003C/p\u003E\u003Cp\u003EThe script ignores images if their height and width are not powers of two, and if they\u0027re smaller than 32x32.\u003C/p\u003E\u003Cp\u003ELicense: GPL\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/i7ke2mh63nyemgu/ksp-dds-tool.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/i7ke2mh63nyemgu/ksp-dds-tool.zip?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThis program is distributed in the hope that it will be useful,\u003C/p\u003E\u003Cp\u003Ebut WITHOUT ANY WARRANTY; without even the implied warranty of\u003C/p\u003E\u003Cp\u003EMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\u003C/p\u003E\n"},{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2015-07-23T13:41:24Z","Content":"\n\u003Cp\u003ENew version, with DXT3 support!\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/jcdmyb597mbm9mh/ksp-dds-tool-1.1.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/jcdmyb597mbm9mh/ksp-dds-tool-1.1.zip?dl=0\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-23T13:53:34Z\u0022 title=\u002207/23/2015 01:53  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 23, 2015\u003C/time\u003E by peteletroll\u003C/strong\u003E\n\u003C/span\u003E\n"}]}