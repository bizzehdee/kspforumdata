{"TopicId":178933,"ForumId":104,"TopicTitle":"Parachute part not behaving correctly - solved","CreatedByName":"purpleivan","CreatedById":120081,"CreatedDateTime":"2018-10-13T15:13:04Z","PageNum":1,"Articles":[{"CreatedByName":"purpleivan","CreatedById":120081,"CreatedDateTime":"2018-10-13T15:13:04Z","Content":"\n\u003Cp\u003E\nThis post contains the original question, now answered, however I came across a new issues that I describe in the 7th post.\n\u003C/p\u003E\n\u003Cp\u003E\n--------------------------------------------------------------------------\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m having my first crack at making parts for KSP as well as using Unity (far from my first games assets though... that\u0027s the day job, but currently using UE4) and I\u0027m having an issue with the installation of PartTools.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m following the guide on making KSP parts \u003Ca href=\u0022https://wiki.kerbalspaceprogram.com/wiki/Tutorial:Making_an_asset_from_start_to_finish\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E and at Step 5 \u0022Setting up Unity\u0022 is where I\u0027ve hit my snag.\n\u003C/p\u003E\n\u003Cp\u003E\nI downloaded the latest version of the PartTools package from \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/160487-parttools-updated/\u0022 rel=\u0022\u0022\u003Ethis thread\u003C/a\u003E and imported it into Unity. I can see installed folders and files under Assets in the Project tab, but according to the guide I\u0027m following, I should also see a PartTools window with \u0022a button called \u0022Set Data Dir\u0022. Unfortunately I\u0027m not seeing that window.\n\u003C/p\u003E\n\u003Cp\u003E\nIs this something that is now out of date in the guide I\u0027m working from? If it is, how should I set GameData as my Unity Data Directory?\n\u003C/p\u003E\n\u003Cp\u003E\nIn case it helps, here\u0027s a screenshot of my install of the Unity editor.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022D7DC9DP.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022822\u0022 src=\u0022https://i.imgur.com/D7DC9DP.jpg\u0022 width=\u00221200\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThere is an error in the log about duplicate DLL\u0027s for one that comes with Visual Studio. I\u0027m guessing that\u0027s not related to this issue,\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-17T06:20:29Z\u0022 title=\u002210/17/2018 06:20  AM\u0022 data-short=\u00225 yr\u0022\u003EOctober 17, 2018\u003C/time\u003E by purpleivan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2018-10-14T00:10:54Z","Content":"\n\u003Cp\u003E\nYou won\u0027t see the \u0022Set\u0022 button until you add PartTools to your root GameObject. Then when you select that GameObject a \u0022PartTools (Script)\u0022 pane will appear in the inspector that will contain a \u0022File URL\u0022 label, a empty textbox and a \u0022Set\u0022 button among other things. Pressing the set button brings up a dialog where you can set your game directory. Welcome to the often frustrating world of KSP modding!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-14T00:11:36Z\u0022 title=\u002210/14/2018 12:11  AM\u0022 data-short=\u00225 yr\u0022\u003EOctober 14, 2018\u003C/time\u003E by wasml\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"purpleivan","CreatedById":120081,"CreatedDateTime":"2018-10-14T10:54:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223467303\u0022 data-ipsquote-contentid=\u0022178933\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539475854\u0022 data-ipsquote-userid=\u0022120438\u0022 data-ipsquote-username=\u0022wasml\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, wasml said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou won\u0027t see the \u0022Set\u0022 button until you add PartTools to your root GameObject. Then when you select that GameObject a \u0022PartTools (Script)\u0022 pane will appear in the inspector that will contain a \u0022File URL\u0022 label, a empty textbox and a \u0022Set\u0022 button among other things. Pressing the set button brings up a dialog where you can set your game directory. Welcome to the often frustrating world of KSP modding!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the info.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen you say \u0022File URL label\u0022 is this the \u0022File Path\u0022 text field... can\u0027t see one for File URL?\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t see a Set button in the PartTools tab.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what I see after adding PartTools to my root GameObject using the Add Component button.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022OhaO9GB.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022624\u0022 src=\u0022https://i.imgur.com/OhaO9GB.jpg\u0022 width=\u00221200\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nBTW... do you know anything about animation import into Unity. I\u0027m trying to get the rigid body animation of my parachute (a few scale animation keys) imported, but so far without success. Unity import picks up on the FBX file as containing an animation , but the animation doesn\u0027t seem to play in Unity (hitting the scene play button or scrubbing the slider in the animation tab for the animated object).\n\u003C/p\u003E\n"},{"CreatedByName":"purpleivan","CreatedById":120081,"CreatedDateTime":"2018-10-14T14:30:17Z","Content":"\n\u003Cp\u003E\nI found out that the version of Unity (the latest) that I was using, is not compatible with PartTools. I installed the required Unity version and the issue I had with the Set button is now solved... i.e. I have one now.\n\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2018-10-14T18:38:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223467453\u0022 data-ipsquote-contentid=\u0022178933\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539514486\u0022 data-ipsquote-userid=\u0022120081\u0022 data-ipsquote-username=\u0022purpleivan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, purpleivan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ndo you know anything about animation import into Unity\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhen I import animations the first thing I do is remove the Animator component and replace it with the Animation component. Then at the top of the inspector just under the tag and layer buttons - to the right of the Model label - I hit the select button and then the Rig button and change the animation type to legacy. Then I click the \u0022Animations\u0022 button that\u0027s beside the \u0022Rig\u0022 button and name the animation. At this point I go back to the Animation component that I added and uncheck \u0022Play Automatically\u0022 and then set the animation to my animation. At this point I open the Animation window and make sure it works as expected. If I open Window | Animation before this is setup Unity doen\u0027t think there\u0027s any animation.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: It looks like the Animation window only sees the animation if you have the object with the Animator component selected.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-14T18:43:38Z\u0022 title=\u002210/14/2018 06:43  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 14, 2018\u003C/time\u003E by wasml\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"purpleivan","CreatedById":120081,"CreatedDateTime":"2018-10-14T21:26:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223467616\u0022 data-ipsquote-contentid=\u0022178933\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539542316\u0022 data-ipsquote-userid=\u0022120438\u0022 data-ipsquote-username=\u0022wasml\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, wasml said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen I import animations the first thing I do is remove the Animator component and replace it with the Animation component. Then at the top of the inspector just under the tag and layer buttons - to the right of the Model label - I hit the select button and then the Rig button and change the animation type to legacy. Then I click the \u0022Animations\u0022 button that\u0027s beside the \u0022Rig\u0022 button and name the animation. At this point I go back to the Animation component that I added and uncheck \u0022Play Automatically\u0022 and then set the animation to my animation. At this point I open the Animation window and make sure it works as expected. If I open Window | Animation before this is setup Unity doen\u0027t think there\u0027s any animation.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: It looks like the Animation window only sees the animation if you have the object with the Animator component selected.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the suggestion... I\u0027ll check what you\u0027ve suggested tomorrow.\n\u003C/p\u003E\n"},{"CreatedByName":"purpleivan","CreatedById":120081,"CreatedDateTime":"2018-10-15T10:21:17Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/120438-wasml/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022120438\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/120438-wasml/\u0022 rel=\u0022\u0022\u003E@wasml\u003C/a\u003E I made the changes you suggested to the animation setup of the parachute in Unity, but I\u0027m experiencing some issues with the animation and parachute behaviour in-game.\n\u003C/p\u003E\n\u003Cp\u003E\nIssue 1. When the parachute part is staged it deploys upward, unaffected by the upward movement of the vehicle, into the semideployed state. At the end of the animation, it pops to being dragged behind the vehicle.\n\u003C/p\u003E\n\u003Cp\u003E\nIssue 2. Once it has fallen to the altitude for the fullydeployed state, the correct animation for this plays, but slowly, probably about 1/3 of original animation speed.\n\u003C/p\u003E\n\u003Cp\u003E\nIssue 3. Even though the CFG file for the new part is a duplicate of a stock one, with only the entries for Name and Title changed (i.e. nothing that affects it\u0027s functionality), the parachute appears to have no drag and the vehicle crashes into the ground.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s a video of what happens when staged.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/KFqBPhFd8AA?feature=oembed\u0022 width=\u0022459\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nHere\u0027s the setup of the animation of the part in Unity. The entry in the field Animation is set to Non (Animation Clip) which seems a little wrong, but changing it via the small circle selector next to it, to one of the alternatives (semiDeployedSmall) gives the same problematic behaviour in-game.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022BzjL6sy.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022624\u0022 src=\u0022https://i.imgur.com/BzjL6sy.jpg\u0022 width=\u00221200\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAny advice you have on this would be well appreciated.\n\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2018-10-16T02:11:04Z","Content":"\n\u003Cp\u003E\nI notice that while the canopy Z axis appears to be in the correct direction - it\u0027s rotated with respect to the global axis - looks like the canopy\u0027s up is in the global Y direction. I\u0027d try removing the canopy X rotation. Blender has everything rotated 90 degrees on the X axis when you import to Unity - one of the first things I do is zero that rotation. This will probably involve changing your model in Blender (assuming you\u0027re using Blender).\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m at a loss for why the animation is running at reduced speed.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve seen the no drag problem before but don\u0027t recall what I did to fix it - when I last made a parachute I gave it custom drag cubes and I have a dim memory of tweaking the ModuleDragModifier parameters - mine are much higher than the stock values (4 and 30).\n\u003C/p\u003E\n\u003Cp\u003E\nI made and shared some \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/169578-parts-demo-%E2%80%93-blender-gimp-and-unity-files-may-12-2018/\u0022 rel=\u0022\u0022\u003Etemplate parts\u003C/a\u003E - includes Blender and Unity projects with notes. If you do solve the animation speed and drag problem I\u0027d be interested in the solution - I\u0027ll add to the notes in this project (and any feedback on any of the parts would be welcome).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"purpleivan","CreatedById":120081,"CreatedDateTime":"2018-10-16T06:39:01Z","Content":"\n\u003Cp\u003E\nThanks for the info \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/120438-wasml/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022120438\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/120438-wasml/\u0022 rel=\u0022\u0022\u003E@wasml\u003C/a\u003E I\u0027ll take a look at my chute later. I did think that the 90 degree rotation shown in Unity looked wrong, even if the part looked right.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll also take a look at your templat parts.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m using Max rather than Blender.\n\u003C/p\u003E\n"},{"CreatedByName":"purpleivan","CreatedById":120081,"CreatedDateTime":"2018-10-16T20:35:04Z","Content":"\n\u003Cp\u003E\nI am now getting somewhere at last \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/120438-wasml/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022120438\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/120438-wasml/\u0022 rel=\u0022\u0022\u003E@wasml\u003C/a\u003E as I now have the parachute deploying and animating correctly, with a couple of minor caveats.\n\u003C/p\u003E\n\u003Cp\u003E\nEverything is fine, except that at the point when switching between the animated states (semi deploying and fully deploying) and the unanimated states (semi and fully deployed) the entire canopy is instantly rotated around its vertical axis by 180 degrees. I wouldn\u0027t have noticed except that I\u0027d put a big black square on one side of its texture, to allow me to compare orientation of the object in Max and Unity.\n\u003C/p\u003E\n\u003Cp\u003E\nAt the same time as the 180 degree rotation occurs, there\u0027s also a small clitch in orientation between the end of animated and beginning of unanimated states. I might try exporting without animation compression to see if that\u0027s the issue, although I doubt it.\n\u003C/p\u003E\n\u003Cp\u003E\nBTW... my solution, after many attempts at changing the rotation within the object of the vertices and of the object itself, seems to be no different than where I started. So I\u0027m guessing that there was something else that I was screwing up. One thing I did notice is that my working version has a different orientation in the animation player in Unity than your example. Whereas your example chute sticks out to the side, mine is orientated verticaly upward. But both work in-game... wierd.\n\u003C/p\u003E\n\u003Cp\u003E\nBut at least it.s progress \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nOne more thing, the slow speed of the fully deploy animation is due to a setting in the CFG (deploymentSpeed) which is set to 0.12 whereas the one for semi deploy is 0.5\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-17T06:20:06Z\u0022 title=\u002210/17/2018 06:20  AM\u0022 data-short=\u00225 yr\u0022\u003EOctober 17, 2018\u003C/time\u003E by purpleivan\u003C/strong\u003E\n\u003C/span\u003E\n"}]}