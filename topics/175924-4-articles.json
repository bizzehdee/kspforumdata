{"TopicId":175924,"ForumId":34,"TopicTitle":"[1.12.x] MemGraph Updated with Stutter Reduction","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2018-06-16T06:48:36Z","PageNum":4,"Articles":[{"CreatedByName":"Tonka Crash","CreatedById":189552,"CreatedDateTime":"2019-06-18T15:44:55Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E\u00A0I\u0027ve tracked down a performance glitch\u00A0I\u0027ve been seeing to MemGraph or one of its dependencies. (ClickThroughBlocker ToolbarControl UnBlur).\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EProblem Synopsis:\u00A0\u003C/strong\u003E\u003Ca href=\u0022https://www.dropbox.com/s/0qc9ekxb2ixqgte/Lag_demo.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003ELogs\u003C/a\u003E\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUsing \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E/\u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E I see\u00A0a lag or stutter placing objects or aborting out of placing objects with \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E. I don\u0027t know when the behavior started as it been there long enough it just seemed to be the norm to me. I mentioned it to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/155445-igorz/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022155445\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/155445-igorz/\u0022 rel=\u0022\u0022\u003E@IgorZ\u003C/a\u003E\u00A0yesterday and he said it\u0027s not normal. I checked a stripped install and sure enough, \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E is much more responsive. So I began the mod interaction hunt.\n\u003C/p\u003E\n\u003Cp\u003E\nI narrowed\u00A0it down to MemGraph or one of it\u0027s dependencies. With Memgraph installed I see a lag or stutter with \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E. No Memgraph, no lag. When I tested without Memgraph I left the dependencies installed, but nothing else should be calling them.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EVideo:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIn the video below I drop an object while moving the camera dragging the mouse across the screen. With MemGraph there is a noticeable lag before the game catches up to the mouse. The second half of the video is\u00A0how it should behave doing the same operation. I can barely move the mouse before the game catches up.\n\u003C/p\u003E\n\u003Cp\u003E\nI forgot to look at the MemGraph stripchart until\u00A0I was in the middle of writing this, well after logs and video\u00A0had been produced and uploaded. This lag is\u00A0not due to garbage collection.\u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 width=\u0022480\u0022 data-embed-src=\u0022https://www.youtube.com/embed/E6Sn2A25rxs?feature=oembed\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nMemgraph is one of my must have mods, so it would be nice to figure out what\u0027s causing this. \u003Cstrong\u003EI\u0027d like to test a stripped down\u00A0MemGraph without a GUI\u00A0or dependencies to see if that improves performance. \u003C/strong\u003EI rarely look at the GUI anyway since I have a padheap.cfg that seems to work\u00A0for me.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTest Configuration: Latest versions\u00A0installed from \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E in my main game, copied to the stripped install path.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nKSP 1.7.2 - No expansion packs\n\u003C/li\u003E\n\u003Cli\u003E\nClickThroughBlocker\n\u003C/li\u003E\n\u003Cli\u003E\nToolbarControl\n\u003C/li\u003E\n\u003Cli\u003E\nEasy Vessel Switch\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E \u0026amp;\u00A0\u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nMemGraph padheap.cfg configured for 8GB with 32GB of RAM.\n\u003C/li\u003E\n\u003Cli\u003E\nModuleManager.4.0.2.dll\n\u003C/li\u003E\n\u003Cli\u003E\nunBlur.0.5.0.dll\n\u003C/li\u003E\n\u003C/ul\u003E\n"},{"CreatedByName":"Tonka Crash","CreatedById":189552,"CreatedDateTime":"2019-06-20T14:30:27Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E\u00A0\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/155445-igorz/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022155445\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/155445-igorz/\u0022 rel=\u0022\u0022\u003E@IgorZ\u003C/a\u003E\u00A0I played with this for hours yesterday. What I found is the lag seems to depend on the total pad size\u00A0you have defined in padheap.cfg. I have been running 8192MB with 32GB of ram which was giving several minutes between GC cycles in my normally modded game. Getting rid of padhead.cfg\u00A0entirely and \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E behaves instantaneously as if MemGraph weren\u0027t installed but then garbage collection happens several times a minute in my modded game.\n\u003C/p\u003E\n\u003Cp\u003E\nlinuxgurugamer, since this is one of your adopted mods I don\u0027t know if you\u0027ve ever spent time trying to understand how it works.\u00A0I downloaded the code and experimented with it trying to understand how it worked and what would cause a hiccup with \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E. The only thing I do understand is that the majority of graph.cs is only needed for the graph and is called more\u00A0frequently than needed while the game is running. The actually padding from padhead.cfg happens once on game load and never again unless the user manually requests a pad size increase.\n\u003C/p\u003E\n\u003Cp\u003E\nI still don\u0027t understand how the padding works at all or the significance of the majority of\u00A0padheap.cfg. It seems that only the final line defines the total pad size, but the other rows are used in the padding algorithm. I just can\u0027t make any sense of what they are supposed to be doing. I don\u0027t understand the logic of\u00A0padarray function at all. Do the actual numbers set in the first column have some special significance? I have zero experience with languages that use garbage collection.\n\u003C/p\u003E\n\u003Cp\u003E\nGeneral comment: None of the MemGraph log messages identify themselves with \u0022[MemGraph]\u0022 to start the message. The log messages functionality is not typical of most mods and doesn\u0027t make use of UnityEngine.Debug.Log method. Comments claim this is to reduce garbage collection, but there are so few message any impact would be negligible.\n\u003C/p\u003E\n\u003Cp\u003E\nBy the way,\u00A0graph.cs\u00A0itself is rather poorly thought out, but changes to it didn\u0027t affect my issue:\u00A0\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nIt appears the data for the graph is updated in AddMemoryIncrement, but this is triggered by both Update and FixedUpdate events where I think it should be one or the other.\n\u003C/li\u003E\n\u003Cli\u003E\nAddMemoryIncrement itself does about half it\u0027s work in an if block limited to once per second to match the graph\u0027s update rate, but what I would think are the more expensive calls are outside that time limited block.\n\u003C/li\u003E\n\u003Cli\u003E\nUpdateGuiStr that updates the graph\u0027s header seems to be called anytime one of it\u0027s values is recalculated, but could\u00A0done only if the graph is visible in OnGui.\n\u003C/li\u003E\n\u003Cli\u003E\nThe settings\u00A0file (but not padheap)\u00A0are re-read on scene changes. It seems like an odd behavior as I (and I\u0027d think most users) would assume .cfg file changes would require a game restart to take effect.\n\u003C/li\u003E\n\u003C/ul\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-06-20T16:32:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223622244\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561041027\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe settings\u00A0file (but not padheap)\u00A0are re-read on scene changes. It seems like an odd behavior as I (and I\u0027d think most users) would assume .cfg file changes would require a game restart to take effect\u003Cspan\u003E\uFEFF\u003Cspan\u003E\uFEFF\u003C/span\u003E\u003Cspan\u003E\uFEFF\u003C/span\u003E\u003C/span\u003E.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI believe it was designed that way on purpose, so that changes could be made and tested without restarting the entire game.\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t have time right now, but will put this on my (ever enlarging ) list of things to do.\u00A0 Some of the oddities you are seeing are due to memory management and padding.\u00A0 I know I looked at it a while ago, some of what you are pointing out could definitely be improved\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-07-06T00:24:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223622244\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561041027\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/20/2019 at 10:30 AM, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt appears the data for the graph is updated in AddMemoryIncrement\u003Cspan\u003E\uFEFF\u003C/span\u003E, but this is triggered by both Update and FixedUpdate events where I think it should be one or the other.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFixed in upcoming release\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223622244\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561041027\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/20/2019 at 10:30 AM, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAddMemoryIncrement itself does about half it\u0027s work in an if block limited to once per second to match the graph\u0027s update rate, but what I would think are the more expensive calls are outside that time limited block.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s necessary to do it this way, those \u0022expensive\u0022 calls are getting the best information, and aren\u0027t that expensive\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223622244\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561041027\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/20/2019 at 10:30 AM, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUpdateGuiStr \u003Cspan\u003E\uFEFF\u003C/span\u003Ethat updates the graph\u0027s header seems to be called anytime one of it\u0027s values is recalculated, but could\u00A0done only if the graph is visible in OnGui.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFixed in upcoming release\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-07-06T02:30:36Z\u0022 title=\u002207/06/2019 02:30  AM\u0022 data-short=\u00225 yr\u0022\u003EJuly 6, 2019\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-07-06T02:42:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223622244\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561041027\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/20/2019 at 10:30 AM, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGeneral comment: None of the MemGraph log messages identify themselves with \u0022[MemGraph]\u0022 to start the message. The log messages functionality is not typical of most mods and doesn\u0027t make use of UnityEngine.Debug.Log method. Comments claim this is to reduce garbage collection, but there are so few message any impact would be negligible.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMemgraph is writing to it\u0027s own log file, no need to identify the messages since no other mod will write to it.\n\u003C/p\u003E\n\u003Cp\u003E\nSince the whole idea of this mod is to report on garbage collection, I\u0027m not going to change something \u0022just because\u0022 it\u0027s not using Debug.Log.\n\u003C/p\u003E\n\u003Cp\u003E\nMemgraph literally has one call to Debug.Log, at the end of the InitToolbar, which I\u0027m removing since it is rather unneeded\n\u003C/p\u003E\u003Cp\u003E\nNew release, 1.1.2\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nDisabled call to AddMemoryIncrement from the Update method\n\u003C/li\u003E\n\u003Cli\u003E\nSplit the UpdateGuiStr into two, new one called WriteLog()\n\u003C/li\u003E\n\u003Cli\u003E\nAdded a call to UpdateGuiStr just before the generated string is written\n\u003C/li\u003E\n\u003Cli\u003E\nRemoved unnecessary Debug.Log line at the end of the InitToolbar method\n\u003C/li\u003E\n\u003Cli\u003E\nUpdated the AssemblyVersion.tt\n\u003C/li\u003E\n\u003C/ul\u003E\n"},{"CreatedByName":"tsaven","CreatedById":138869,"CreatedDateTime":"2019-07-09T21:51:14Z","Content":"\n\u003Cp\u003E\nThank you so much for the continued updates and support \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"vossiewulf","CreatedById":179033,"CreatedDateTime":"2019-07-12T03:48:19Z","Content":"\n\u003Cp\u003E\nDitto, without this the GC delays are horrendous. One question, when I hit alt-End to increase the heap, it goes\u00A0from 512MB min to 1500MB min. One that\u0027s a weird number for mem allocation, and two, hitting alt-End after that doesn\u0027t seem to do anything. The mod description implies you can progressively increase the heap allocation.\n\u003C/p\u003E\n"},{"CreatedByName":"Jognt","CreatedById":176871,"CreatedDateTime":"2019-07-12T06:45:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223633461\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221562903299\u0022 data-ipsquote-userid=\u0022179033\u0022 data-ipsquote-username=\u0022vossiewulf\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, vossiewulf said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDitto, without this the GC delays are horrendous. One question, when I hit alt-End to increase the heap, it goes\u00A0from 512MB min to 1500MB min. One that\u0027s a weird number for mem allocation, and two, hitting alt-End after that doesn\u0027t seem to do anything. The mod description implies you can progressively increase the heap allocation.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m guessing it says to tap it twice to make sure the button press is registered. Just in case it didn\u0027t work the first time.\n\u003C/p\u003E\n\u003Cp\u003E\nBy the way, you can set it to automatically apply the padding and hide the window by default so you don\u0027t have to think about it anymore by opening settings.cfg and setting \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EApplyPadding \u003C/span\u003Eto \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Etrue \u003C/span\u003Eand \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EVisible \u003C/span\u003Eto \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Efalse\u003C/span\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nThe default padding is set to 1GB. You can modify this number in the padheap.cfg by adjusting the final number after \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Etotal:\u003C/span\u003E to a higher or lower value. Be sure not to go for crazy numbers that you don\u0027t have the spare RAM for. (I adjusted it down to 512 due to ram concerns)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-07-12T06:47:25Z\u0022 title=\u002207/12/2019 06:47  AM\u0022 data-short=\u00224 yr\u0022\u003EJuly 12, 2019\u003C/time\u003E by Jognt\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"vossiewulf","CreatedById":179033,"CreatedDateTime":"2019-07-12T08:02:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223633520\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221562913922\u0022 data-ipsquote-userid=\u0022176871\u0022 data-ipsquote-username=\u0022Jognt\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Jognt said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m guessing it says to tap it twice to make sure the button press is registered. Just in case it didn\u0027t work the first time.\n\u003C/p\u003E\n\u003Cp\u003E\nBy the way, you can set it to automatically apply the padding and hide the window by default so you don\u0027t have to think about it anymore by opening settings.cfg and setting \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EApplyPadding \u003C/span\u003Eto \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Etrue \u003C/span\u003Eand \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EVisible \u003C/span\u003Eto \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Efalse\u003C/span\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nThe default padding is set to 1GB. You can modify this number in the padheap.cfg by adjusting the final number after \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Etotal:\u003C/span\u003E to a higher or lower value. Be sure not to go for crazy numbers that you don\u0027t have the spare RAM for. (I adjusted it down to 512 due to ram concerns)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks Jognt for the answer and the additional useful info. Will be nice to have it instanced correctly without having to intervene. Although I do like sometimes watching the endless GCs go away once I pad the heap. I might increase it a bit more, but as you know there\u0027s a limit to\u00A0 the utility of doing so even if you have the mem.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-07-12T08:22:48Z\u0022 title=\u002207/12/2019 08:22  AM\u0022 data-short=\u00224 yr\u0022\u003EJuly 12, 2019\u003C/time\u003E by vossiewulf\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"jpinard","CreatedById":89401,"CreatedDateTime":"2019-07-13T18:09:40Z","Content":"\n\u003Cp\u003E\nI\u0027m a little confused on just how exactly this works.\u00A0 Once I install it, do I need to do anything after it examines how often garbage collection is happening?\u00A0 Or later does it do it automatically or do I need to make changed based on what the graph shows?\n\u003C/p\u003E\n"},{"CreatedByName":"vardicd","CreatedById":75832,"CreatedDateTime":"2019-07-13T18:32:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223621044\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560872695\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/18/2019 at 10:44 AM, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E\u00A0I\u0027ve tracked down a performance glitch\u00A0I\u0027ve been seeing to MemGraph or one of its dependencies. (ClickThroughBlocker ToolbarControl UnBlur).\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EProblem Synopsis:\u00A0\u003C/strong\u003E\u003Ca href=\u0022https://www.dropbox.com/s/0qc9ekxb2ixqgte/Lag_demo.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003ELogs\u003C/a\u003E\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUsing \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E/\u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E I see\u00A0a lag or stutter placing objects or aborting out of placing objects with \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E. I don\u0027t know when the behavior started as it been there long enough it just seemed to be the norm to me. I mentioned it to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/155445-igorz/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022155445\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/155445-igorz/\u0022 rel=\u0022\u0022\u003E@IgorZ\u003C/a\u003E\u00A0yesterday and he said it\u0027s not normal. I checked a stripped install and sure enough, \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E is much more responsive. So I began the mod interaction hunt.\n\u003C/p\u003E\n\u003Cp\u003E\nI narrowed\u00A0it down to MemGraph or one of it\u0027s dependencies. With Memgraph installed I see a lag or stutter with \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E. No Memgraph, no lag. When I tested without Memgraph I left the dependencies installed, but nothing else should be calling them.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EVideo:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIn the video below I drop an object while moving the camera dragging the mouse across the screen. With MemGraph there is a noticeable lag before the game catches up to the mouse. The second half of the video is\u00A0how it should behave doing the same operation. I can barely move the mouse before the game catches up.\n\u003C/p\u003E\n\u003Cp\u003E\nI forgot to look at the MemGraph stripchart until\u00A0I was in the middle of writing this, well after logs and video\u00A0had been produced and uploaded. This lag is\u00A0not due to garbage collection.\u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 width=\u0022480\u0022 data-embed-src=\u0022https://www.youtube.com/embed/E6Sn2A25rxs?feature=oembed\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nMemgraph is one of my must have mods, so it would be nice to figure out what\u0027s causing this. \u003Cstrong\u003EI\u0027d like to test a stripped down\u00A0MemGraph without a GUI\u00A0or dependencies to see if that improves performance. \u003C/strong\u003EI rarely look at the GUI anyway since I have a padheap.cfg that seems to work\u00A0for me.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTest Configuration: Latest versions\u00A0installed from \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E in my main game, copied to the stripped install path.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nKSP 1.7.2 - No expansion packs\n\u003C/li\u003E\n\u003Cli\u003E\nClickThroughBlocker\n\u003C/li\u003E\n\u003Cli\u003E\nToolbarControl\n\u003C/li\u003E\n\u003Cli\u003E\nEasy Vessel Switch\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E \u0026amp;\u00A0\u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nMemGraph padheap.cfg configured for 8GB with 32GB of RAM.\n\u003C/li\u003E\n\u003Cli\u003E\nModuleManager.4.0.2.dll\n\u003C/li\u003E\n\u003Cli\u003E\nunBlur.0.5.0.dll\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nLate to the party, but i also see this camera lag behavior, and i don\u0027t use memgraph myself, though i do use the dependencies, clickthroughblocker, unblur, and toolbar control, as well as the easy vessel switch mod. I\u0027m curious if you still see this issue. I\u0027ve had this issue for a while, but never gave it a thought till today when i found\u00A0this mod and got curious as to what it was about and saw your post.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-07-13T18:34:16Z\u0022 title=\u002207/13/2019 06:34  PM\u0022 data-short=\u00224 yr\u0022\u003EJuly 13, 2019\u003C/time\u003E by vardicd\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tonka Crash","CreatedById":189552,"CreatedDateTime":"2019-07-13T19:19:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634359\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563042778\u0022 data-ipsquote-userid=\u002275832\u0022 data-ipsquote-username=\u0022vardicd\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n38 minutes ago, vardicd said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLate to the party, but i also see this camera lag behavior, and i don\u0027t use memgraph myself, though i do use the dependencies, clickthroughblocker, unblur, and toolbar control, as well as the easy vessel switch mod. I\u0027m curious if you still see this issue. I\u0027ve had this issue for a while, but never gave it a thought till today when i found\u00A0this mod and got curious as to what it was about and saw your post.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNothing significant has changed since I first posted my observation, and I\u0027m still seeing the lag.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Jognt","CreatedById":176871,"CreatedDateTime":"2019-07-13T22:40:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634354\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563041380\u0022 data-ipsquote-userid=\u002289401\u0022 data-ipsquote-username=\u0022jpinard\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, jpinard said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m a little confused on just how exactly this works.\u00A0 Once I install it, do I need to do anything after it examines how often garbage collection is happening?\u00A0 Or later does it do it automatically or do I need to make changed based on what the graph shows?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt depends on what you want to use memgraph for.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf you\u2019re using it to reduce GC intervals and the default padding amount doesn\u2019t get you in ram-usage trouble then you can just open the settings.cfg, set visible to false and applypadding to true, and never look back as it does it\u2019s thing.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI recommend you keep at _least_ 10-15% of your total ram free so windows has room to shuffle stuff around.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-07-13T22:41:41Z\u0022 title=\u002207/13/2019 10:41  PM\u0022 data-short=\u00224 yr\u0022\u003EJuly 13, 2019\u003C/time\u003E by Jognt\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-07-13T23:01:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634386\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563045567\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNothing significant has changed since I first posted my observation, and I\u0027m still seeing the lag.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you turd visible to off as described above, do you still get the stuttering?\n\u003C/p\u003E\n"},{"CreatedByName":"Tonka Crash","CreatedById":189552,"CreatedDateTime":"2019-07-13T23:46:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634484\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563058886\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you turd visible to off as described above, do you still get the stuttering?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe GUi is off by default in my config. I don\u0027t like clutter on my desktop.\u00A0If the GC interval was saved in the KSP.Log I could do without a GUI entirely. I rarely\u00A0have the GUI open unless the game seems to be bogging down. I set the total in padheap.cfg and ignore it.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis is on a slightly overclocked Hades Canyon NUC i7-8809G @\u00A04.2GHz with\u00A032GB Ram \u0026amp;\u00A0NVMe\u00A0Samsung 960 EVO\u00A0SSD.\n\u003C/p\u003E\n\u003Cp\u003E\nCurrently my system reports 26GB in use (4GB) Compressed 5.9GB available. KSP has been open for almost exactly 11 hours.\n\u003C/p\u003E\n\u003Cp\u003E\nsettings.cfg:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Evisible = false\napplyPadding = true\nkeyToggleWindow = KeypadMultiply\nkeyScaleUp = KeypadPlus\nkeyScaleDown = KeypadMinus\nkeyRunTests = KeypadDivide\nkeyPadHeap = End\nenableLogging = false\nkeyMark = Home\nkeyToggleLogging = PageUp\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\npadheap.cfg:\u00A0 I\u0027ve experimented with other totals (1024,2048,4096).\u00A0Lag is related to the amount of padding, but reducing padding gets more frequent GC stutter. I usually have it set at 4096. I must have left it at 8192 after the last time I messed with this. I don\u0027t really understand what the other lines are supposed to be doing. The total is the only one that really seems to matter,\u00A0\u00A0but from my experimentation they do have an affect in the code, I just don\u0027t understand what it\u0027s doing. I\u0027ve tried mostly off, and currently have them all on. I\u0027m just not sure if it matters.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n8\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n16\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n24\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n32\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n40\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n48\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n64\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n80\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n96\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n112\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n144\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n176\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n208\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n240\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n296\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n352\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n432\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n664\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n800\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n1008\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n1344\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\n2032\u00A0\u00A0 \u00A0: 1\u003Cbr\u003E\ntotal\u00A0\u00A0 \u00A0: 8192\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n"},{"CreatedByName":"jpinard","CreatedById":89401,"CreatedDateTime":"2019-07-13T23:59:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634473\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563057647\u0022 data-ipsquote-userid=\u0022176871\u0022 data-ipsquote-username=\u0022Jognt\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Jognt said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you\u2019re using it to reduce GC intervals and the default padding amount doesn\u2019t get you in ram-usage trouble then you can just open the settings.cfg, set visible to false and applypadding to true, and never look back as it does it\u2019s thing.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI recommend you keep at _least_ 10-15% of your total ram free so windows has room to shuffle stuff around.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is exactly what I needed.\u00A0 Thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"vardicd","CreatedById":75832,"CreatedDateTime":"2019-07-14T00:54:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634386\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563045567\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNothing significant has changed since I first posted my observation, and I\u0027m still seeing the lag.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOkay, that makes me wonder, as i said i see a similar lag issue on my games, but i don\u0027t use memgraph, only found it today, and have never installed it. I\u0027m going to start running tests of my own tonight, to see if i can narrow down the source of my lag/stutter, and thought I\u0027d ask if you\u0027d considered or tested the possibility of your issue coming from the dependencies of the mod, rather than the mod itself?\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m curious if we\u0027ve got 2 different issues causing the same symptoms, or if we have the same issue, but it\u0027s coming from one of the dependencies doing something in the background?\n\u003C/p\u003E\n"},{"CreatedByName":"Tonka Crash","CreatedById":189552,"CreatedDateTime":"2019-07-14T01:18:54Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275832\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0022 rel=\u0022\u0022\u003E@vardicd\u003C/a\u003E When I narrowed it down to memgraph I tested with no memgraph but all it\u0027s dependencies and only \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E and the hiccups were gone. You can\u0027t run memgraph without it\u0027s dependencies as it won\u0027t load. The only way to do that is by editing code to remove the dependencies.\n\u003C/p\u003E\n"},{"CreatedByName":"vardicd","CreatedById":75832,"CreatedDateTime":"2019-07-14T04:56:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634528\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563067134\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275832\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0022 rel=\u0022\u0022\u003E@vardicd\u003C/a\u003E When I narrowed it down to memgraph I tested with no memgraph but all it\u0027s dependencies and only \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E and the hiccups were gone. You can\u0027t run memgraph without it\u0027s dependencies as it won\u0027t load. The only way to do that is by editing code to remove the dependencies.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOkay, one final question for you on this subject, {and sorry if i\u0027m being annoying\u00A0\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E} when you did your test without memgraph, did you think to include any other mod that needed the dependencies [that would cause them to do anything?] I ask because my first\u00A0test I ran was to copy my main game folder and just rip out toolbar controller, unblur, and clickthroughblocker, thereby shutting down any mod that needed those dependencies, and I immediately saw a performance increase, but I wasn\u0027t sure if that was just because a number of mods aren\u0027t functioning any more and my system isn\u0027t working as hard, or if the removed dependencies where causing trouble. I\u0027m currently installing a fresh copy of the game, and going to build a minimum install of \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E/\u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E,\u00A0toolbar controller, unblur, and clickthroughblocker and one other mod that needs those and see if i get performance issues.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd again, I\u0027m sorry if i\u0027m coming off as being annoying or beating a dead horse. When i saw your post above, it just triggered a gut feeling of \u0022This is important\u0022 and I\u0027m fully self aware that i\u0027m obsessive when i get like that and i have to run every possibility into the ground to convince myself that i\u0027m wrong, and to let it go.\u00A0\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Tonka Crash","CreatedById":189552,"CreatedDateTime":"2019-07-14T05:41:55Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275832\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0022 rel=\u0022\u0022\u003E@vardicd\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWhen I tested this it was stock squad, no DLC. Only \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E and MemGraph. It was stripped to the minimum to show the problem.\n\u003C/p\u003E\n"},{"CreatedByName":"vardicd","CreatedById":75832,"CreatedDateTime":"2019-07-14T06:40:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634596\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563082915\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n58 minutes ago, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275832\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0022 rel=\u0022\u0022\u003E@vardicd\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWhen I tested this it was stock squad, no DLC. Only \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E and MemGraph. It was stripped to the minimum to show the problem.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOkay, thank you\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Jognt","CreatedById":176871,"CreatedDateTime":"2019-07-14T12:39:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634580\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563080183\u0022 data-ipsquote-userid=\u002275832\u0022 data-ipsquote-username=\u0022vardicd\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, vardicd said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOkay, one final question for you on this subject, {and sorry if i\u0027m being annoying\u00A0\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E} when you did your test without memgraph, did you think to include any other mod that needed the dependencies [that would cause them to do anything?] I ask because my first\u00A0test I ran was to copy my main game folder and just rip out toolbar controller, unblur, and clickthroughblocker, thereby shutting down any mod that needed those dependencies, and I immediately saw a performance increase, but I wasn\u0027t sure if that was just because a number of mods aren\u0027t functioning any more and my system isn\u0027t working as hard, or if the removed dependencies where causing trouble. I\u0027m currently installing a fresh copy of the game, and going to build a minimum install of \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E/\u003Cabbr title=\u0022Kerbal Attachment System (mod)\u0022\u003EKAS\u003C/abbr\u003E,\u00A0toolbar controller, unblur, and clickthroughblocker and one other mod that needs those and see if i get performance issues.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd again, I\u0027m sorry if i\u0027m coming off as being annoying or beating a dead horse. When i saw your post above, it just triggered a gut feeling of \u0022This is important\u0022 and I\u0027m fully self aware that i\u0027m obsessive when i get like that and i have to run every possibility into the ground to convince myself that i\u0027m wrong, and to let it go.\u00A0\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInteresting train of thought. What it boils down to is whether it\u0027s memgraph specific or due to one (or a combination) of its dependencies.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/189552-tonka-crash/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022189552\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/189552-tonka-crash/\u0022 rel=\u0022\u0022\u003E@Tonka Crash\u003C/a\u003E Keep in mind that memgraph was primarily designed to diagnose GC issues. You still have to deal with any Mono peculiarities even when increasing the padheap (and maybe even exactly when increasing the padheap)\n\u003C/p\u003E\n\u003Cp\u003E\nHow often do you get GC with 4GB of padheap? Because you really are pumping up those numbers which makes me wonder whether you\u0027re using it to mask excessive Garbage Creation. Like, how high does \u0022Last\u0022 usually go in the Space Center/Flight Scene?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-07-14T12:40:02Z\u0022 title=\u002207/14/2019 12:40  PM\u0022 data-short=\u00224 yr\u0022\u003EJuly 14, 2019\u003C/time\u003E by Jognt\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tonka Crash","CreatedById":189552,"CreatedDateTime":"2019-07-14T19:56:44Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/176871-jognt/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022176871\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/176871-jognt/\u0022 rel=\u0022\u0022\u003E@Jognt\u003C/a\u003E\u00A0Your questions are completely irrelevant to the problem I posted. Watch the video.\u00A0Or even better, test it yourself. I\u0027d like someone else to confirm the problem. With MemGraph I get a lag spike dropping items in \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E, without it, I don\u0027t. It\u0027s that simple. This is in a stripped install that doesn\u0027t at all represent my normal playing environment.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t care what MemGraph was \u0022designed\u0022 to do. What it\u0027s being \u003Cstrong\u003Eused\u00A0\u003C/strong\u003Efor is to spread out GC intervals, which is variable depending\u00A0 on what you are doing. I also don\u0027t keep track of what MemGraph is doing. As I\u0027ve stated before I\u00A0don\u0027t have MemGraph open by default and rarely look at it at all.\u00A0As long as GC stutter is infrequent enough to not annoy me I don\u0027t care what the settings are at.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s a question I asked in January that went unanswered.\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022129964\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed8374845485\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/175924-15-161-17-memgraph-updated-with-stutter-reduction/\u0026amp;do=embed\u0026amp;comment=3516165\u0026amp;embedComment=3516165\u0026amp;embedDo=findComment\u0022 style=\u0022height:296px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Jognt","CreatedById":176871,"CreatedDateTime":"2019-07-14T22:01:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223634894\u0022 data-ipsquote-contentid=\u0022175924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221563134204\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n[snip]\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDid you miss the part where \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275832\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75832-vardicd/\u0022 rel=\u0022\u0022\u003E@vardicd\u003C/a\u003E\u00A0said he has the same problem even though he doesn\u2019t use memgraph?\n\u003C/p\u003E\n\u003Cp\u003E\ni understand it\u2019s easy to yell \u201Cyour mod is broken\u201D, but if you really want to get this sorted I suggest you either use the info and questions provided to help find the cause or to just stop using any mods.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWith regards to \u201CI don\u2019t care what it was designed to do\u201D -\u0026gt; you\u2019re using a mod for a purpose it was not (mainly) intended. It doesn\u2019t matter that all of us use it for that purpose.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n[snip]\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-07-14T23:42:40Z\u0022 title=\u002207/14/2019 11:42  PM\u0022 data-short=\u00224 yr\u0022\u003EJuly 14, 2019\u003C/time\u003E by Gargamel\u003C/strong\u003E\n\u003Cbr\u003EPortions Redacted by Moderator\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-07-14T23:21:53Z","Content":"\n\u003Cp\u003E\nI don\u0027t have an answer as to why that happen. I\u0027ve updated the mogg recently to remove some inefficiencies, but regarding U the stuttering I have no idea because nothing I saw when I was looking at it seemed to indicate that that would cause it.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is very hard to diagnose because it\u0027s working differently depending on different people\u0027s systems.\n\u003C/p\u003E\n"}]}