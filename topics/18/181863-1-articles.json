{"TopicId":181863,"ForumId":18,"TopicTitle":"anyone know anything about stepper motors?","CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-01-31T17:50:44Z","PageNum":1,"Articles":[{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-01-31T17:50:44Z","Content":"\n\u003Cp\u003E\nive been gathering components for a cnc pcb mill. so far im in the preliminary steps of gathering parts. i started with the electronics part of the build and will build the machine itself later. im gathering the parts slowly, rail systems are kind of expensive but i got some spare 3d printer parts left over from a bed upgrade, and i got some spare linear bearings. i got a rather thick piece of acrylic salvaged from a dead monitor which would serve as a good base plate, since i have a lot of other salvage displays i figure much of the structure would be build out of acrylic and 3d printed parts. will probibly use a dremel flexi shaft as the buisness end with the dremel elsewhere to reduce the mass that needs to move around. anyway its going to be a small machine, so long as i can mill\u00A0a 4x4\u0022 pcb with it.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nanyway\u00A0i got an old arduino (i tried building an stm32 version of grbl but had trouble flashing it to the board, using arm has some advantages, more memory and has an fpu and hardware divide that the atmel chip doesnt have) running grbl with a 4 channel cnc shield. i only have a few steppers salvaged from junk, several laser actuators from dead cd/dvd drives, and a couple mitsumi motors from an old sewing machine. at some point im going to get me some nema 17 motors like the ones on my 3d printer. not sure whether im going to use lead screw drive or belts, but im concerned that belt drive wouldnt have the torque neccisary, but that extra torque costs speed, but its going to be a small machine so thats not a big issue. anyway i cobbled up some wiring harnesses and im using some lithium ion batteries for power. anyway they are unipolar 4-wire motors. i did find a data sheet on the motors, but they didnt cover the electrical connections. the drivers have 2 channels and its not hard to trace out the two coil sets in the motors, each pair of wires to one of the chanels. but im not sure if polarity matters. the channels are powered by an h bridge and will alternate between positive and negative between steps.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nanyway i connect the motors, load up bCNC with an svg file\u00A0and initially i get them to spin. one motor is holding its position just fine, at least up to the limit of its hold torque. the other seems to be freely rotating at a significantly lower torque. this made me question my assumption that polarity didnt matter. maybe they are like encoders and operate with a grey code, maybe having reversed polarity on one of my coils is breaking that grey code. i rechecked my harneses and noticed that i had the coils flipped on one of them so i made them identical, matching the better of the two\u00A0and im still getting one to spin freely, swapped motors/cables, controllers same difference. i tried lubricating the motors since they are all sleve bering type and have been in my junk bin for awhile.\u00A0so long story short is there a right way to wire these things?is there some secret sauce that im missing?\n\u003C/p\u003E\n"},{"CreatedByName":"Shpaget","CreatedById":45577,"CreatedDateTime":"2019-01-31T19:00:37Z","Content":"\n\u003Cp\u003E\nIf I understand correctly,\u00A0the bad motor is bad even when powered by the driver that performed well with the good motor? Smells like the problem with the motor.\n\u003C/p\u003E\n\u003Cp\u003E\nDisconnect the motor from everything and check with multimeter to make sure you have the two pairs of wires that lead to the coils. Short circuit one of the pairs and turn the motor by hand. Does it spin with equal or more effort? Disconnect and try with the other pair. There should be a noticeable difference.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you don\u0027t feel the difference with open circuit and short on both coils,\u00A0you have a problem with the motor.\n\u003C/p\u003E\n\u003Cp\u003E\nConnect one wire of the pair with one of the wires of the\u00A0wrong coil. There should be no difference in torque when you spin it by hand. Repeat with the other wrong wire.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve had very good experience with this type of drivers for some very small motors:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.ebay.com/itm/1PCS-A4988-Stepper-Motor-Driver-Module-3D-Printer-Polulu-StepStick-RAMPS-RepRap/221921771119?epid=883626200\u0026amp;hash=item33ab917e6f:g:BpsAAOSwl9BWKyv1:rk:1:pf:1\u0026amp;frcectupt=true\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.ebay.com/itm/1PCS-A4988-Stepper-Motor-Driver-Module-3D-Printer-Polulu-StepStick-RAMPS-RepRap/221921771119?epid=883626200\u0026amp;amp;hash=item33ab917e6f:g:BpsAAOSwl9BWKyv1:rk:1:pf:1\u0026amp;amp;frcectupt=true\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nand with this type for some larger (NEMA 17 size, but I forget the specs and don\u0027t have them at hand)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.ebay.com/itm/DM542-Stepper-Motor-Driver-For-86-57-Series-2-phase-Digital-Stepper-Motor-Driver/202209366200?hash=item2f149e10b8:g:3qIAAOSwcSxab8y2:rk:8:pf:0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.ebay.com/itm/DM542-Stepper-Motor-Driver-For-86-57-Series-2-phase-Digital-Stepper-Motor-Driver/202209366200?hash=item2f149e10b8:g:3qIAAOSwcSxab8y2:rk:8:pf:0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBoth are very nice and provide current limiting function as well as microstep control, they do all the logic, you just provide 2 signals - direction and pulse for step.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-01-31T21:51:15Z","Content":"\n\u003Cp\u003E\ni do believe the a4988 is what im using. kit came with the shield and 4 controllers each\u00A0sealed in its own esd packaging, they also included some heat sinks as well, but i had to attach them myself.\n\u003C/p\u003E\n\u003Cp\u003E\ni did test all the coils with a multimeter which was necessary to identify the pairs. they passed a continuity test, i also checked the resistance which was in the neighborhood of 7.2 ohms (which was actually on the sticker on the side of the motor). i also tried powering the coils on the motors breifly and the hold torque was actually pretty strong. so im starting to expect my controllers. i did try the test you suggested anyway and got about the same increase in turn resistance\u00A0from all pairs.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nneed to trace pins all the way back to the mcu to make sure the board was assembled properly. i thought it was supposed to be a kit but it came fully\u00A0assembled. could also be something with the atmega, i have several blank 328ps and some of them have been abused.\n\u003C/p\u003E\n\u003Cp\u003E\ni also tested an actuator from an old cd drive. and that worked pretty well. though the control was a little too aggressive i had to use a weaker battery.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-01-31T22:07:14Z\u0022 title=\u002201/31/2019 10:07  PM\u0022 data-short=\u00225 yr\u0022\u003EJanuary 31, 2019\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shpaget","CreatedById":45577,"CreatedDateTime":"2019-01-31T22:06:42Z","Content":"\n\u003Cp\u003E\nSo, does the bad motor work or not on the driver that the good motor worked on? And the opposite, the good motor on the driver where bad one didn\u0027t?\n\u003C/p\u003E\n\u003Cp\u003E\nCheck the connectors. They may have poor contact.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, check for dry joints on drivers and connectors. Those can be a pain the cheeks, cause all kinds of issues and hard to see. Use lots of light, some magnification and wiggle the components.\n\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-01-31T22:10:16Z","Content":"\n\u003Cp\u003E\nah the wiggle it technique. my wiring harnesses tested ok but they are far from perfect. i got some low quality crimp pins and the crimper was just crushing them. but the continuity was ok.\n\u003C/p\u003E\n"},{"CreatedByName":"Shpaget","CreatedById":45577,"CreatedDateTime":"2019-01-31T22:20:28Z","Content":"\n\u003Cp\u003E\nAnd the PCB connectors?\n\u003C/p\u003E\n\u003Cp\u003E\nYou wouldn\u0027t believe how many issues I\u0027ve had to troubleshoot due to dry joints. A thing would work for weeks or years and then start acting up intermittently. Usually a dry joint is not hard to find once you suspect it, but sometimes you are questioning yourself if you\u0027ve just seen something move or was it your imagination. In those cases I just plop a generous amount of flux and retouch every joint\u00A0that even remotely looks dubious.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat about using the bad motor on the good driver?\n\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-01-31T22:33:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223532513\u0022 data-ipsquote-contentid=\u0022181863\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221548973228\u0022 data-ipsquote-userid=\u002245577\u0022 data-ipsquote-username=\u0022Shpaget\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, Shpaget said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd the PCB connectors?\n\u003C/p\u003E\n\u003Cp\u003E\nYou wouldn\u0027t believe how many issues I\u0027ve had to troubleshoot due to dry joints. A thing would work for weeks or years and then start acting up intermittently. Usually a dry joint is not hard to find once you suspect it, but sometimes you are questioning yourself if you\u0027ve just seen something move or was it your imagination. In those cases I just plop a generous amount of flux and retouch every joint\u00A0that even remotely looks dubious.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat about using the bad motor on the good driver?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nthings are about the same. i plugged the cd drive stepper into that channel and it worked fine.\u00A0at this point i dont think its the motors. its either a cold joint or a bad mcu. there also seems to be a trim pot on each controller, maybe they need some calibration, but i didn\u0027t get any instructions for how to do that..\n\u003C/p\u003E\n"},{"CreatedByName":"Shpaget","CreatedById":45577,"CreatedDateTime":"2019-01-31T22:41:05Z","Content":"\n\u003Cp\u003E\nThe trim pot is for adjusting current limit.\n\u003C/p\u003E\n\u003Cp\u003E\nPololu has instructions on how to set it:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.pololu.com/product/1182\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.pololu.com/product/1182\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m off to bed now. Hope you find the solution. See you in the morning.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-01-31T22:42:57Z\u0022 title=\u002201/31/2019 10:42  PM\u0022 data-short=\u00225 yr\u0022\u003EJanuary 31, 2019\u003C/time\u003E by Shpaget\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-01-31T23:49:26Z","Content":"\n\u003Cp\u003E\nsilly me, i think my problem was power related. the 3 18650 lithium ion cells in series\u00A0i was using were getting a little low, so i stuck them in the charger and grabbed 3 more out of the pile. motors were holding torque for a little while and then stopped. i guess i may have over discharged my cells, one got down to 1.8v which is a hair into the danger zone. il probably dig out an old atx psu and break out the 12 v line. i already got one rigged up to my 3d printer, so i guess il just patch into it. everything worked fine with one motor but there just wasn\u0027t enough juice to power two. i guess i forgot that stepper motors draw power all the time as opposed to only when they are moving.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-01-31T23:53:51Z\u0022 title=\u002201/31/2019 11:53  PM\u0022 data-short=\u00225 yr\u0022\u003EJanuary 31, 2019\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shpaget","CreatedById":45577,"CreatedDateTime":"2019-02-01T07:49:10Z","Content":"\n\u003Cp\u003E\nYeah, power supply is somewhat crucial.\n\u003C/p\u003E\n\u003Cp\u003E\nGood thing about steppers being driven by decent drivers is they don\u0027t really mind higher voltages, but you have to properly set the current limiting on the driver before you power the motor, or risk burning it.\n\u003C/p\u003E\n"}]}