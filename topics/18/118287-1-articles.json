{"TopicId":118287,"ForumId":18,"TopicTitle":"Did Directx12 make KSP faster?","CreatedByName":"gutza1","CreatedById":63510,"CreatedDateTime":"2015-08-12T10:37:05Z","PageNum":1,"Articles":[{"CreatedByName":"gutza1","CreatedById":63510,"CreatedDateTime":"2015-08-12T10:37:05Z","Content":"After reading about Directx12\u0027s massive performance improvements, I was wondering it applied to KSP. Has anyone had a performance boost when running KSP after DirectX12 was installed?"},{"CreatedByName":"Uml\u00FCx","CreatedById":69703,"CreatedDateTime":"2015-08-12T10:46:02Z","Content":"no, because Unity cannot run with DX12. you can try to force, but it will fall back to DX10 or 11.\n\nmaybe Unity5 will have a DX12 render path in the future."},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2015-08-12T10:47:33Z","Content":"Has a new version of KSP, built on a new version of Unity, that knows anything about Directx12, been released while I wasn\u0027t looking?\n\n(It was asked and speculated about a while ago, although I can only find a reddit link, off hand: [https://www.reddit.com/r/KerbalSpaceProgram/comments/3f00gz/with_windows_10_and_directx12_around_the_corner/](https://www.reddit.com/r/KerbalSpaceProgram/comments/3f00gz/with_windows_10_and_directx12_around_the_corner/))\n\nninja\u0027d - serves me right for trying to find the link."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-08-12T10:54:17Z","Content":"And to follow on Uml\u00C3\u0192\u00C2\u00BCx : all games needs to be (re)written for DX12 to take advantage of that speed improvement. Some future games may have multiple rendering mode that works in either DX11 or DX12 but right now none does."},{"CreatedByName":"Agost","CreatedById":126710,"CreatedDateTime":"2015-08-12T11:22:17Z","Content":"Well, Unity 5 supports DX12... hope they\u0027re already working on it, KSP would benefit A LOT from it since it\u0027s very CPU bound"},{"CreatedByName":"Uml\u00FCx","CreatedById":69703,"CreatedDateTime":"2015-08-12T11:30:48Z","Content":"true, but the most important thing, the physics engine is still limited to one core iirc?\n\ni wouldn\u0027t get me too excited. unity5 is more important for 64bit functionality and no memory limit."},{"CreatedByName":"Agost","CreatedById":126710,"CreatedDateTime":"2015-08-12T11:46:38Z","Content":"\u003E \n\u003E true, but the most important thing, the physics engine is still limited to one core iirc?\n\u003E i wouldn\u0027t get me too excited. unity5 is more important for 64bit functionality and no memory limit.\n\nYou forgot native DX11 ( which handles CPU cores better than DX9 ) and better graphics with lower requirements. Moreover, DX12 can be really a game changer for KSP"},{"CreatedByName":"Streetwind","CreatedById":98962,"CreatedDateTime":"2015-08-12T11:57:38Z","Content":"\u003E \n\u003E true, but the most important thing, the physics engine is still limited to one core iirc?\n\u003E i wouldn\u0027t get me too excited. unity5 is more important for 64bit functionality and no memory limit.\n\nPhysics will no longer be limited to one core. *However*, one physics object can only run in one thread. Spacecraft are physics objects. So one single rocket will still run on one single core. The difference is that under Unity 5, other physics objects (discarded stages, the space station you are approaching to dock etc) get to be shunted away to other cores instead of all sitting on the same core. Additionally, there are claims that the physics engine itself is faster and more efficient.\n\nAlso, don\u0027t be so sure that DX12 will make a tangible difference. DX12 improves CPU overhead of handling large numbers of graphics objects on the screen at once (\u0022draw calls\u0022). KSP doesn\u0027t draw much on the screen at once. In fact, apart from the spacecraft, KSP doesn\u0027t draw much at all; the game is 99% empty space and flat surfaces with simple textures. The draw call bottleneck only manifests itself at very high numbers (\u003E10,000 calls per second), and thus optimizing that may not benefit KSP in any measurable way.\n\nGraphics bombs like ARK, those are the games that benefit from DX12 in a major way."},{"CreatedByName":"LostOblivion","CreatedById":111504,"CreatedDateTime":"2015-08-12T12:51:33Z","Content":"Eh? Does ARK have nice graphics?"},{"CreatedByName":"Frozen_Heart","CreatedById":118627,"CreatedDateTime":"2015-08-12T14:23:08Z","Content":"Would love to see what unity 5, 64 bit, and DX12 combined could do for KSP. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n\u003E \n\u003E Eh? Does ARK have nice graphics\n\nVery much so. Very unoptimised though. ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)"},{"CreatedByName":"xtoro","CreatedById":79015,"CreatedDateTime":"2015-08-12T14:56:30Z","Content":"Most of the time, complete rewrites are riddled with new bugs and it takes a while to get back to stable. As a programmer myself, I\u0027ve ruined my fair share of apps from rewrites, and the worse was a DirectX app, I think from 7 to 8, don\u0027t remember. But the big issue is usually old legacy code that isn\u0027t commented, and you don\u0027t remember how that method worked or what all the parts did or required. This just leads to confusion and wasted time going over it all to try to add comments. Usually these old working parts are the hardest to rewrite, especially when they\u0027re part of the base core of the project. So for major rewrites, I\u0027ll wait and see what everyone else experiences first and stick with what works."},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-08-12T15:04:25Z","Content":"\u003E \n\u003E Eh? Does ARK have nice graphics?\n\nIf you crank it up, Ark has very nice graphics, but some of the graphics parameters (notably ground scatter and sky quality) have pretty severe performance impacts and should be turned all the way down if you want to boost other things.\n\n/offtopic\n\nWhat DX12 will likely do for KSP once it can support it (meaning after U5 and after any necessary code changes are made) will be memory savings on textures. I expect that will be a big selling point. Currently OpenGL actually nets me more memory savings, but at the cost of destroying my FPS to intolerability. DX11 produces no known graphical artifacts and cuts my ram usage massively (YMMV)."},{"CreatedByName":"Two","CreatedById":144535,"CreatedDateTime":"2015-08-13T10:13:10Z","Content":"KSP has no scenes complex enough to get even lower-end graphic cards busy. If you compare KSP to games like [Crysis 1](http://www.abload.de/img/crysiswallpaperunrealdrfsa.png) that was running on hardware from 2007 and already had way better graphics than KSP ever will have, you soon realize that the issue is not the graphic card. As far as I am aware the issue lies within the physics calculations, which are not done on the graphics core (like i.E. PhysX does it), but on the CPU, and are only calculated single-threaded, further slowing down things.\n\nSo even if KSP would fully support DX12 it is hardly going to change anything."},{"CreatedByName":"Broax","CreatedById":109333,"CreatedDateTime":"2015-08-13T10:26:31Z","Content":"The real question is: Will there be any real performance boost with this next update? \n\nAs they upgrade the engine to Unity 5 what can we expect? I\u0027ve heard a lot of rumors. For one we will have native x64 support but that only really benefits Windows users. Still, now I can use my full 8GB of RAM without having to resort to witchcraft. Also from what I\u0027ve heard Physx will be processed by the GPU instead of the CPU. Also I\u0027ve heard that we\u0027ll get multi threaded support. Also I\u0027ve seen some demos from the new physics engine implemented on U5 and it seems to be much more efficient and the new engine by itself seems to improve performance. \n\nWhat\u0027s keeping me on my toes is... Can I expect a tangible performance boost with this next update? Or will it be so negligible I won\u0027t even feel it?"},{"CreatedByName":"Uml\u00FCx","CreatedById":69703,"CreatedDateTime":"2015-08-13T10:38:15Z","Content":"did they change that? last time i checked, physics was CPU only.\n\nplus: unity (and KSP with it) is already multi threaded. the problem is: physics can only run in one thread. apparently it is impossible to run the calculations on several threads at once."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2015-08-13T10:52:03Z","Content":"I think physics in U5 may be able to run on multiple cores, or even GPU, it makes little difference, individual ships must be single threaded for affinity, you may be able to have 2 400 part ships near each other, if they dock your FPS will crash to slideshow. U5 brings some performance improvements for physics, but the main winners will be memory footprints."},{"CreatedByName":"code99","CreatedById":113538,"CreatedDateTime":"2015-08-13T12:43:13Z","Content":"I apologise for going offtopic myself, but ...\n\n\u003E \n\u003E /offtopic\n\u003E \n\u003E Currently OpenGL actually nets me more memory savings, but at the cost of destroying my FPS to intolerability.\n\nI dont get this ... a lot of people complain that openGL makes the game almost unplayable and yet my game runs great with opengl (with the ocassional stutter? but its rare and almost unnoticeable). In what circumstances does it happen for you? I have yet to build truly large rockets but so far so good.\n\nI run a lot of mods so opengl is a saver for me ...\n\n\u003E DX11 produces no known graphical artifacts and cuts my ram usage massively (YMMV)\n\nAre you telling me that you are on dx11 and the game runs great with less ram usage? Or am i reading this wrong .... ?\n\nThis makes me wonder, on what dx version does ksp run on default anyway?\n\n**Edited \u003Ctime datetime=\u00222015-08-13T12:46:44Z\u0022 title=\u002208/13/2015 12:46  PM\u0022 data-short=\u00228 yr\u0022\u003EAugust 13, 2015\u003C/time\u003E by code99**"},{"CreatedByName":"Broax","CreatedById":109333,"CreatedDateTime":"2015-08-13T12:53:51Z","Content":"\u003E \n\u003E This makes me wonder, on what dx version does ksp run on default anyway?\n\nRight now I think it runs on DX9... An upgrade to DX11 would do wonders I think..."},{"CreatedByName":"code99","CreatedById":113538,"CreatedDateTime":"2015-08-13T12:55:54Z","Content":"\u003E \n\u003E Right now I think it runs on DX9... An upgrade to DX11 would do wonders I think...\n\nCant we force it the same way we force opengl? Or KSP just doesnt support it at all ?"},{"CreatedByName":"FireFaced","CreatedById":141290,"CreatedDateTime":"2015-08-13T13:49:19Z","Content":"\u003E \n\u003E Cant we force it the same way we force opengl? Or KSP just doesnt support it at all ?\n\nYeah, it\u0027s -force-d3d11\n\nOr at least, I think it\u0027s that"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-08-13T13:58:21Z","Content":"All Unity3D engine command line arguments are [**here**](http://docs.unity3d.com/Manual/CommandLineArguments.html) by the way.\n\n\u003E \n\u003E -adapter N (Windows only) Allows the game to run full-screen on another display. The N maps to a Direct3D display adaptor. In most cases there is a one-to-one relationship between adapters and video cards. On cards that support multi-head (they can drive multiple monitors from a single card) each \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201Chead\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u009D may be its own adapter.\n\u003E -batchmode Run the game in \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201Cheadless\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u009D mode. The game will not display anything or accept user input. This is mostly useful for running servers for networked games.\n\u003E \n\u003E -force-d3d9 (Windows only) Make the game use Direct3D 9 for rendering. This is the default, so normally there\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s no reason to pass it.\n\u003E \n\u003E -force-d3d9-ref (Windows only) Make the game run using Direct3D\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201CReference\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u009D software renderer. The DirectX SDK has to be installed for this to work. This is mostly useful for building automated test suites, where you want to ensure rendering is exactly the same no matter what graphics card is being used.\n\u003E \n\u003E -force-d3d11 (Windows only) Make the game use Direct3D 11 for rendering.\n\u003E \n\u003E -force-opengl (Windows only) Make the game use OpenGL for rendering, even if Direct3D is available. Normally Direct3D is used but OpenGL is used if Direct3D 9.0c is not available.\n\u003E \n\u003E -nographics When running in batch mode, do not initialize graphics device at all. This makes it possible to run your automated workflows on machines that don\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t even have a GPU.\n\u003E \n\u003E -nolog (Linux \u0026 Windows only) Do not produce output log. Normally output\\_log.txt is written in the \\*\\_Data folder next to the game executable, where Debug.Log output is printed.\n\u003E \n\u003E -popupwindow The window will be created as a a pop-up window (without a frame).\n\u003E \n\u003E -screen-fullscreen Overrides the default fullscreen state. This must be 0 or 1.\n\u003E \n\u003E -screen-height Overrides the default screen height. This must be an integer from a supported resolution.\n\u003E \n\u003E -screen-width Overrides the default screen width. This must be an integer from a supported resolution.\n\u003E \n\u003E -screen-quality Overrides the default screen quality. Example usage would be: /path/to/myGame -screen-quality Beautiful\n\u003E \n\u003E -show-screen-selector Forces the screen selector dialog to be shown.\n\u003E \n\u003E -single-instance (Linux \u0026 Windows only) Allow only one instance of the game to run at the time. If another instance is already running then launching it again with -single-instance will just focus the existing one.\n\u003E \n\u003E -parentHWND \u003Chwnd\u003E (Windows only) Embeds Windows Standalone application into another application, you have to pass parent application\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2s window handle to Windows Standalone application. See this example EmbeddedWindow.zip for more information.\u003C/hwnd\u003E"},{"CreatedByName":"Skalou","CreatedById":133496,"CreatedDateTime":"2015-08-13T15:04:53Z","Content":"WRONG, i put force-d4d12\n\nnow i have KSP in 3D, my RAM is now under 10megabit, i can dock several ships of \u002B2500parts at \u002B150fps with my oldschool 10 years old laptop! \n\nalso i made an asteroids field to test a bit the limits, but it\u0027s ok, so i installed it on my phone and smartwatch:\n\ni also use finite element analysis in real time to have the whole part deformed instead of just a pivot point and connected the cloud layers to the irl weather-forecast-center!\n\n\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/yVdXy7t9oJs?start=37\u0026feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\n\n**Edited \u003Ctime datetime=\u00222015-08-13T15:08:16Z\u0022 title=\u002208/13/2015 03:08  PM\u0022 data-short=\u00228 yr\u0022\u003EAugust 13, 2015\u003C/time\u003E by Skalou**"},{"CreatedByName":"Tarheel1999","CreatedById":123965,"CreatedDateTime":"2015-08-13T15:45:33Z","Content":"Re Dx11 vs OpenGL\n\nIt depends entirely on your machine. OpenGL causes FPS hits for some and graphical issues for others (some of which can be fixed in the graphics driver software). Dx11 has better graphics with no tweaking but has significant performance issues with crewed vessels for some. Both reduce RAM usage.\n\nMy rig has an i7 and a GTX 660. OpenGL has no performance issues and displays shadows. I have to use the driver to get anti-aliasing. Dx11 is prettier but halves my frame rate when I have several crew members on a vessel."},{"CreatedByName":"Broax","CreatedById":109333,"CreatedDateTime":"2015-08-13T15:53:05Z","Content":"Does forcing DX11 have ANY benefit?"},{"CreatedByName":"xtoro","CreatedById":79015,"CreatedDateTime":"2015-08-13T16:49:10Z","Content":"\u003E \n\u003E WRONG, i put force-d4d12\n\u003E now i have KSP in 3D, my RAM is now under 10megabit, i can dock several ships of \u002B2500parts at \u002B150fps with my oldschool 10 years old laptop! \n\u003E \n\u003E also i made an asteroids field to test a bit the limits, but it\u0027s ok, so i installed it on my phone and smartwatch:\n\u003E \n\u003E i also use finite element analysis in real time to have the whole part deformed instead of just a pivot point and connected the cloud layers to the irl weather-forecast-center!\n\u003E \n\u003E [https://youtu.be/yVdXy7t9oJs?t=37s](https://youtu.be/yVdXy7t9oJs?t=37s)\n\nUhhh, what? You really shouldn\u0027t drink and post, it gets you in hot water, trust me lol"}]}