{"TopicId":170072,"ForumId":18,"TopicTitle":"Need help with trajectory prediction for my 2d space game","CreatedByName":"Motorsheep","CreatedById":10609,"CreatedDateTime":"2018-01-25T11:46:19Z","PageNum":1,"Articles":[{"CreatedByName":"Motorsheep","CreatedById":10609,"CreatedDateTime":"2018-01-25T11:46:19Z","Content":"\n\u003Cp\u003E\nYeah, so I would have liked to post this in the Addons section because I\u0027m looking for help from coders and/or math geeks, but since it isn\u0027t really KSP-related, I decided on this place.\u003Cbr\u003E\nMods, please do move the topic if you feel it would fit in a more specialized section.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway. Here goes:\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\nI\u0027m making a little 2D arcade space game that basically puts \u0022Lunar Lander\u0022-like elements in a tiny solar system with orbiting planets and moons.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFuel efficiency is obviously going to be an important gameplay point, and so I want players to use gravity assists etc. For that, I need to be able to show predicted trajectories. And that\u0027s where it gets complicated.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m using Game Maker, and the tutorials, discussions or even marketplace scripts that I found on the topic rely on Game Maker\u0027s built-in physics. And those don\u0027t help me because obviously I don\u0027t have a constant \u0022down\u0022 direction for gravity to pull in.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve only got relatively basic skills in GML (and I know even less about other languages) and while I\u0027m not exactly sh!t\u00A0at maths, high school was a long time ago.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo I\u0027m looking for help creating (or finding somewhere in the GM marketplace) something that will allow me to graphically display a projected trajectory. Since I\u0027m not using GM\u0027s built-in physics, so far it\u0027s all just simple vector addition (current veloctiy \u002B sun gravity \u002B current grav-well gravity). But I have no idea how to draw a prediction, since my gravity direction changes constantly, and I have multiple sources of gravity AND distance thresholds at which they become active, like \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u0027s in KSP. Somehow I think that a frame-by-frame prediction of next x and next y over thousands of frames would kill most computers running this game.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo. Is there anyone out there who...\u003Cbr\u003E\na) can point me to someone who knows this kind of stuff (the person/people who made MechJeb maybe?)\u003Cbr\u003E\nb) can help me find something on GM Marketplace that would do the trick\u003Cbr\u003E\nc) can help me directly with coding this\u003Cbr\u003E\nd) \u00A0...has done this before and could help me port it into GML?\n\u003C/p\u003E\n\u003Cp\u003E\nThanks very much.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-01-25T11:48:35Z\u0022 title=\u002201/25/2018 11:48  AM\u0022 data-short=\u00226 yr\u0022\u003EJanuary 25, 2018\u003C/time\u003E by Motorsheep\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"0111narwhalz","CreatedById":110660,"CreatedDateTime":"2018-01-25T21:22:55Z","Content":"\n\u003Cp\u003E\n2D means you only have four quantities instead of six. Could be Cartesian position and velocity (useful over small distances) or Keplerian (useful over large distances within a single \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E). If you go for Keplerian, you\u0027ll expect conic sections with a focus in the parent body. You can use patched conics to blend the conic sections across \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E boundraries, which are defined by a(m/M)^\u2156 where a is the semimajor axis and m/M is the ratio between the child and parent bodies. I\u0027m not quite sure about the transformation between Keplerian and Cartesian, but I know there are resources. If you adapt the 3D to the 2D, just zero out inclination and LAN should follow.\n\u003C/p\u003E\n"},{"CreatedByName":"Motorsheep","CreatedById":10609,"CreatedDateTime":"2018-01-26T11:51:26Z","Content":"\n\u003Cp\u003E\nYeah okay those terms did ring a bell but... Jesus Christ where do I even start?\u003Cbr\u003E\u003Cbr\u003E\nAs to the distances... they\u0027re going to be VERY short. Planets are close together and they\u0027re tiny and\u00A0dense,\u00A0and gravity falloff is accordingly fast. You can basically reach escape velocity from Earth in a matter of two seconds of full thrust. Stable orbits around moons are just about doable, but no more than that.\u00A0\u00A0They won\u0027t be a big part of the gameplay.\u003Cbr\u003E\n(Currently, Earth is only about 80 times larger than the player ship is tall, and the whole solar system is 60 times \u0022Earth\u0022\u0027s diameter, but that\u0027s probably bound to change a few more times as gameplay elements progress).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway. The basic approach would be to create a coordinate system relative to the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u0027s position and then plot a function displaying my current orbit with the help of Kepler\u0027s laws?\u003Cbr\u003E\nI\u0027ve skimmed over the Wikipedia article on Kepler orbits.. Gotta say... This looks a whole lot more complicated than I hoped \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n"}]}