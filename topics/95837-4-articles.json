{"TopicId":95837,"ForumId":32,"TopicTitle":"Forcing DirectX11: 40% memory reduction!","CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-01-06T15:16:52Z","PageNum":4,"Articles":[{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-01-25T02:47:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kerbin Dallas Multipass\u0022 data-cite=\u0022Kerbin Dallas Multipass\u0022\u003E\u003Cdiv\u003EThought i\u0027d leave this bit of data here:\u003Cp\u003EMemory used (gb), measured in taskmanager and gpu-z. Loaded the same savegame and measured at the point where all the buildings are displayed.\u003C/p\u003E\u003Cp\u003Eksp.exe:\u003C/p\u003E\u003Cp\u003Eram: 2.59 \u003C/p\u003E\u003Cp\u003Egpu ram: 0.48\u003C/p\u003E\u003Cp\u003Ewith forced d11:\u003C/p\u003E\u003Cp\u003Eram: 1.92\u003C/p\u003E\u003Cp\u003Egpu ram: 1.48\u003C/p\u003E\u003Cp\u003EInteresting to see that the graphics card utilizes a whole gig more of its ram in dx11 mode. \u003C/p\u003E\u003Cp\u003EMy machine has 4gb ram and my gfx card has 2gb ram\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECould you show us results with OpenGL? That\u0027s a quite interesting (and explainable) tradeoff.\u003C/p\u003E\n"},{"CreatedByName":"Kerbin Dallas Multipass","CreatedById":79477,"CreatedDateTime":"2015-01-25T04:16:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022longbyte1\u0022 data-cite=\u0022longbyte1\u0022\u003E\u003Cdiv\u003ECould you show us results with OpenGL? That\u0027s a quite interesting (and explainable) tradeoff.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EToo busy flying to Dres atm XD, perhaps i repeat all 3 tests tomorrow to get comparable numbers (my setting was kinda random)\u003C/p\u003E\u003Cp\u003EI invite everyone to get gpu-z and do the test (sensors tab in gpu-z shows \u0022memory used\u0022) and post their respective video/main ram figures so we get a general idea.\u003C/p\u003E\n"},{"CreatedByName":"metl","CreatedById":82406,"CreatedDateTime":"2015-01-25T23:48:29Z","Content":"\n\u003Cp\u003ESo I just tried this and I have this odd problem...\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/89yA3ms.jpg\u0022 alt=\u002289yA3ms.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ENotice the fonts? They are all squiggly.\u003C/p\u003E\n"},{"CreatedByName":"Motokid600","CreatedById":66349,"CreatedDateTime":"2015-01-26T01:53:31Z","Content":"\n\u003Cp\u003E@ metl \u003C/p\u003E\u003Cp\u003EJust keeps getting weirder and weirder, lol. A resolution issue perhaps? \u003C/p\u003E\u003Cp\u003EQuestion. Is Unity5 going to utilize Dx11? Because with KSP if this can become clear and stable then that\u0027s huge.\u003C/p\u003E\n"},{"CreatedByName":"DBT85","CreatedById":114980,"CreatedDateTime":"2015-01-26T02:04:23Z","Content":"\n\u003Cp\u003EUnity 5 will be updated for dx12 in time for Windows 10 launch.\u003C/p\u003E\n"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-01-26T02:55:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022metl\u0022 data-cite=\u0022metl\u0022\u003E\u003Cdiv\u003ESo I just tried this and I have this odd problem...\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/89yA3ms.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/89yA3ms.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENotice the fonts? They are all squiggly.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBad kerning, probably a buggy implementation of DirectWrite.\u003C/p\u003E\n"},{"CreatedByName":"metl","CreatedById":82406,"CreatedDateTime":"2015-01-26T04:20:07Z","Content":"\n\u003Cp\u003EAside from the squiggly fonts, my craft also turn pink during re-entry (no heat effects showing either) and the parachute chords chop through other textures, sort of. Hard to explain really. Like two radial chutes on the side of a command pod with a mk16 on top, the mk16 cords (the entire V not just the individual chords) block out the other chutes. Over water, the V removes some sort of filter, leaving the water darker and not quite as, well, filtered?\u003C/p\u003E\u003Cp\u003EOn the flip side, memory was indeed reduced by almost half. Performance overall didn\u0027t really seem any better though.\u003C/p\u003E\n"},{"CreatedByName":"DBT85","CreatedById":114980,"CreatedDateTime":"2015-01-26T06:05:20Z","Content":"\n\u003Cp\u003EIts less about better performance and more about not running into a memory ceiling and the game bugging out as often.\u003C/p\u003E\n"},{"CreatedByName":"Craeshen","CreatedById":128395,"CreatedDateTime":"2015-01-26T21:06:26Z","Content":"\n\u003Cp\u003EThere is an issue with the ground shader not liking dx 11 the ground turns a nice black @ the ksc\u003C/p\u003E\n"},{"CreatedByName":"Thestormeffect","CreatedById":116704,"CreatedDateTime":"2015-01-28T20:36:04Z","Content":"\n\u003Cp\u003EIke has the same problem as Minmus, its completely black in Directx11 but working in OpenGL.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-29T08:36:24Z\u0022 title=\u002201/29/2015 08:36  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 29, 2015\u003C/time\u003E by Thestormeffect\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2015-01-29T19:10:22Z","Content":"\n\u003Cp\u003EWould I have to delete the ATM cached files or something?\u003C/p\u003E\n"},{"CreatedByName":"Hannu","CreatedById":60596,"CreatedDateTime":"2015-01-29T19:28:28Z","Content":"\n\u003Cp\u003EDirectX11 was good enough, but Ike and Gilly was totally black if I was near the surface. OpenGL rendered these bodies, but surface of Eve seemed like badly overexposed photo. That -nosinglethread took as much memory as default settings.\u003C/p\u003E\u003Cp\u003EThen I installed Linux and now I wonder why I did not make it months ago. Everything works perfectly (so far, I have not been everywhere yet). I do not have to care about memory even I installed several gigabytes of graphics enhanced mods (I have 16 GB, even memory leaks can not use all that during couple of hours gaming session). Only problem is that I have some self made help programs which are hard (for me) to port to Linux and sometimes I made some other things with Windows at the same time I played KSP.\u003C/p\u003E\n"},{"CreatedByName":"Celas","CreatedById":138914,"CreatedDateTime":"2015-03-02T17:02:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Hannu\u0022 data-cite=\u0022Hannu\u0022\u003E\u003Cdiv\u003EDirectX11 was good enough, but Ike and Gilly was totally black if I was near the surface. OpenGL rendered these bodies, but surface of Eve seemed like badly overexposed photo. That -nosinglethread took as much memory as default settings.\u003Cp\u003EThen I installed Linux and now I wonder why I did not make it months ago. Everything works perfectly (so far, I have not been everywhere yet). I do not have to care about memory even I installed several gigabytes of graphics enhanced mods (I have 16 GB, even memory leaks can not use all that during couple of hours gaming session). Only problem is that I have some self made help programs which are hard (for me) to port to Linux and sometimes I made some other things with Windows at the same time I played KSP.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m also using DX11 to play and I have the same issues with Minmus. I tried to force a few settings in my Nvidia control pannel but it didnt help.\u003C/p\u003E\u003Cp\u003EI even tried to run KSP on Linux (Ubuntu 14.10) today but the performance there was worse than Windows OpenGL \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EHannu, which distribution are you using? If it\u0027s another one, maybe I have more luck on there \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"szwedu","CreatedById":139476,"CreatedDateTime":"2015-03-21T00:31:37Z","Content":"\n\u003Cp\u003Ei have same problems with dx11, but i will not make a second OS or a new one just for my journey with kerbals... I\u0027ll see what comes next .\u003C/p\u003E\n"},{"CreatedByName":"Van Disaster","CreatedById":58876,"CreatedDateTime":"2015-03-21T10:41:19Z","Content":"\n\u003Cp\u003EJust going to hang on for Unity 5 I think - I have enough exposure to unix as it is.\u003C/p\u003E\u003Cp\u003EI removed ATM completely \u0026amp; saved about 400MB - TextureReplacer dumps about 1GB of textures out of main memory on load, presumably once they\u0027re offloaded to VRAM; ATM wasn\u0027t actually doing anything at all ( I wasn\u0027t running any size reduction modes ).\u003C/p\u003E\u003Cp\u003EBeen trying to fix Minmus but it doesn\u0027t appear to be a simple issue - I\u0027ve actually managed to get it visible about 30km from surface but only at a narrow range of camera angles. I\u0027m thinking that maybe just saving the surface info off \u0026amp; creating an entirely new planet might be the answer...\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-03-22T02:40:46Z","Content":"\n\u003Cp\u003EThat Minmus thing is your video card interacting with dx11. Not too much you can do about it, I had the same problems and have switched to opengl\u003C/p\u003E\n"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-03-22T14:22:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022 data-cite=\u0022linuxgurugamer\u0022\u003E\u003Cdiv\u003EThat Minmus thing is your video card interacting with dx11. Not too much you can do about it, I had the same problems and have switched to opengl\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat do you mean by an \u0022interaction\u0022? There is no special interaction that causes these bugs. It\u0027s just Unity and some lighting/tessellation-related bug.\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-03-22T15:10:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022longbyte1\u0022 data-cite=\u0022longbyte1\u0022\u003E\u003Cdiv\u003EWhat do you mean by an \u0022interaction\u0022? There is no special interaction that causes these bugs. It\u0027s just Unity and some lighting/tessellation-related bug.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually, it\u0027s DX11. I\u0027ve seen and heard about the same issues in some other games.\u003C/p\u003E\n"},{"CreatedByName":"_Aramchek_","CreatedById":12588,"CreatedDateTime":"2015-03-22T16:18:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022 data-cite=\u0022linuxgurugamer\u0022\u003E\u003Cdiv\u003EActually, it\u0027s DX11. I\u0027ve seen and heard about the same issues in some other games.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, it\u0027s unity\u0027s terrible dx11 implementation, not dx 11 itself.\u003C/p\u003E\n"},{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-03-22T18:42:45Z","Content":"\n\u003Cp\u003EWell, there are two forced Dx11 commandline arguments: \u003Cstrong\u003E-force-d3d11\u003C/strong\u003E and \u003Cstrong\u003E-force-d3d11-no-singlethreaded\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe first one gives good memory reduction, but very bad Z-fighting and terribad and I mean \u003Cem\u003Ereally terrible fps!\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EThe second one gives no z-fighting and really good fps! Much better than Dx9. But the no-singlethreaded option has no impact on memory reduction.\u003C/p\u003E\u003Cp\u003EFor me it has come to such point I hardly, and I know I\u0027m a new ksp player, play this game atm. All because of the extremely bad optimizations. If I had to write a review at this moment...well better get your Prozacs.\u003C/p\u003E\n"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-03-22T18:51:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gkirmathal\u0022 data-cite=\u0022Gkirmathal\u0022\u003E\u003Cdiv\u003EWell, there are two forced Dx11 commandline arguments: \u003Cstrong\u003E-force-d3d11\u003C/strong\u003E and \u003Cstrong\u003E-force-d3d11-no-singlethreaded\u003C/strong\u003E\u003Cp\u003EThe first one gives good memory reduction, but very bad Z-fighting and terribad and I mean \u003Cem\u003Ereally terrible fps!\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EThe second one gives no z-fighting and really good fps! Much better than Dx9. But the no-singlethreaded option has no impact on memory reduction.\u003C/p\u003E\u003Cp\u003EFor me it has come to such point I hardly, and I know I\u0027m a new ksp player, play this game atm. All because of the extremely bad optimizations. If I had to write a review at this moment...well better get your Prozacs.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESeriously what do you do to the game to make it use so much memory? I use a lot of mods and it sits fine at 3.2gb.\u003C/p\u003E\u003Cp\u003EIf you wrote a review on poor memory usage, it would be pointless. There is a hard limitt o how much memory you need when you play a physics based modded game. If your game isn\u0027t modded, you will not use too much memory.\u003C/p\u003E\n"},{"CreatedByName":"WuphonsReach","CreatedById":130759,"CreatedDateTime":"2015-03-22T19:24:27Z","Content":"\n\u003Cp\u003EStock KSP has severe memory leaks - made worse by frequently scene switches when you are running multiple missions. Plus there are the times when KSP suddenly decides to allocate a few hundred MB of RAM, which can frequently crash the game due to exceeding the 3.5-3.7GB limit on 32bit.\u003C/p\u003E\u003Cp\u003E0.90 should have been followed up by a bug-fix release, instead they\u0027re pressing on to release 1.0.\u003C/p\u003E\u003Cp\u003EI have to resort to OpenGL mode in order to get enough free memory to play for more then an hour due to the memory leaks.\u003C/p\u003E\n"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-03-22T19:41:31Z","Content":"\n\u003Cp\u003EI have never, ever, ever had a memory leak that\u0027s made me crash not caused by mods.\u003C/p\u003E\u003Cp\u003EI\u0027ve had two out of memory crashes, caused by the same mod. My own.\u003C/p\u003E\u003Cp\u003EThere are many people who say they have a lot of memory leaks, and there are many that say they\u0027ve had very very few or none at all. It\u0027s very strange.\u003C/p\u003E\n"},{"CreatedByName":"Van Disaster","CreatedById":58876,"CreatedDateTime":"2015-03-22T20:44:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gkirmathal\u0022 data-cite=\u0022Gkirmathal\u0022\u003E\u003Cdiv\u003EWell, there are two forced Dx11 commandline arguments: \u003Cstrong\u003E-force-d3d11\u003C/strong\u003E and \u003Cstrong\u003E-force-d3d11-no-singlethreaded\u003C/strong\u003E\u003Cp\u003EThe first one gives good memory reduction, but very bad Z-fighting and terribad and I mean \u003Cem\u003Ereally terrible fps!\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EThe second one gives no z-fighting and really good fps! Much better than Dx9. But the no-singlethreaded option has no impact on memory reduction.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s because -force-d3d11-no-singlethreaded doesn\u0027t do anything at all. If I run just that flag the head of my log file looks like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003EOS: Windows 7 Service Pack 1 (6.1.7601) 64bit\u003Cbr\u003ECPU: Intel(R) Core(TM) i7-3930K CPU @ 3.20GHz (12)\u003Cbr\u003ERAM: 12227\u003Cbr\u003EGPU: AMD Radeon R9 200 Series (3051MB)\u003Cbr\u003ESM: 30 (Direct3D 9.0c [aticfx32.dll 8.17.10.1333]) \u0026lt;\u0026lt;-- NOTE THAT.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf it\u0027s actually in DX11 mode that line would be this: SM: 50 (Direct3D 11.0 [level 11.0])\u003C/p\u003E\u003Cp\u003EIn the Unity docs it\u0027s listed as an option for Windows Store apps which don\u0027t have commandline arguments, so I guess it\u0027s specific to those builds.\u003C/p\u003E\u003Cp\u003EThere\u0027s memory leaks near planet surfaces, changing scene and most definitely in the SPH/VAB. I can run for hours in space and crash out in 10 mins trying to build a craft if I\u0027m in and out of the buildings a lot. I have GCMonitor up all the time, I can watch memory use tick up every update while I\u0027m in the VAB...\u003C/p\u003E\n"},{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-03-22T21:25:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Van Disaster\u0022 data-cite=\u0022Van Disaster\u0022\u003E\u003Cdiv\u003EThat\u0027s because -force-d3d11-no-singlethreaded doesn\u0027t do anything at all. If I run just that flag the head of my log file looks like this:\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell shoot me. That explains, I added the latter a month ago and never noticed this when I changed to -no-singlethreaded as I also ran with -nolog after I solved most of my mod related issues.\u003C/p\u003E\u003Cp\u003EToo bad, the normal force d3d11 (also for opengl) gives a too bad performance hit compared to d3d9. It\u0027s a catch 22 between fps and memory reduction..\u003C/p\u003E\n"}]}