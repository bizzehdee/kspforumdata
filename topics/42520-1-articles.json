{"TopicId":42520,"ForumId":29,"TopicTitle":"GUI Window Saving To Config im Lost..","CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2013-08-14T22:24:35Z","PageNum":1,"Articles":[{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2013-08-14T22:24:35Z","Content":"\n\u003Cp\u003EBeen trying to make mission controllers windows be saved..\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/_qruuunMpHA?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E.. This method doesn\u0027t seem to work anymore I get a No Suitable Method To Overide on both OnSave and OnLoad.\u003Cp\u003EThis is the code that doesn\u0027t seem to work anymore. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic override void OnSave(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            PluginConfiguration config = PluginConfiguration.CreateForType\u0026lt;MissionController\u0026gt;();\u003Cbr\u003E            config.SetValue(\u0022MainWindow\u0022, mainWindowPosition);\u003Cbr\u003E            config.save();\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public override void OnLoad(ConfigNode node)\u003Cbr\u003E        {\u003Cbr\u003E            PluginConfiguration config = PluginConfiguration.CreateForType\u0026lt;MissionController\u0026gt;();\u003Cbr\u003E            config.load();\u003Cbr\u003E            mainWindowPosition = config.GetValue\u0026lt;Rect\u0026gt;(\u0022MainWindow\u0022);\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnyone have a better way of saving the windows config files.\u003C/p\u003E\u003Cp\u003EFor instance All I want to do is save the settings to start of for. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eprivate Rect mainWindowPosition = new Rect (300, 70, 300, 690);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOr do I have to rewrite the way mission controllers GUI is handled? To support this?\u003C/p\u003E\u003Cp\u003EIf you wanna take a look at the code.. \u003Ca href=\u0022https://github.com/malkuth1974/KSPMissionController\u0022 rel=\u0022external nofollow\u0022\u003EIts on Github\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThanks I figured after 3 days of trying to get this to work.. Its time to ask for help. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-14T22:29:22Z\u0022 title=\u002208/14/2013 10:29  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 14, 2013\u003C/time\u003E by malkuth\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2013-08-14T22:36:25Z","Content":"\n\u003Cp\u003EI also tried removiing the Override part.. I can build the DLL fine with that way.. But of course no xml file or saved settins. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EIll keep trying different things I guess.\u003C/p\u003E\n"},{"CreatedByName":"Iannic-ann-od","CreatedById":30460,"CreatedDateTime":"2013-08-15T02:26:01Z","Content":"\n\u003Cp\u003EI am using KSPAddon to start my plugin and don\u0027t have OnSave() so I just call this function every ten seconds from Update() to save my settings \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprivate void save_plugin_settings()\u003Cbr\u003E        {\u003Cbr\u003E            plugin_settings_node = new ConfigNode();\u003Cbr\u003E            plugin_settings_node.AddValue(\u0022main_window_pos\u0022, main_window_pos.x \u002B \u0022,\u0022 \u002B main_window_pos.y);\u003Cbr\u003E            plugin_settings_node.AddValue(\u0022ui_icon_pos\u0022, ui_icon_pos.x \u002B \u0022,\u0022 \u002B ui_icon_pos.y);\u003Cbr\u003E            plugin_settings_node.Save(path);\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2013-08-15T05:43:41Z","Content":"\n\u003Cp\u003EA problem with KSPAddons is there is nothing telling you when to load or save, unlike PartModules which have the OnLoad and OnSave methods. Two options are:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003E Implement OnDestroy (\u003Ca href=\u0022http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnDestroy.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnDestroy.html\u003C/a\u003E). It is called whenever the GameObject your MonoBehaviour is attached to is destroyed, like when exiting the scene -- \u003Cem\u003Eunless you used DontDestroyOnLoad\u003C/em\u003E. See an example here: \u003Ca href=\u0022https://github.com/taraniselsu/TacFuelBalancer/blob/master/Source/FuelBalanceController.cs#L78\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacFuelBalancer/blob/master/Source/FuelBalanceController.cs#L78\u003C/a\u003E.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Implement OnLevelWasLoaded (\u003Ca href=\u0022http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnLevelWasLoaded.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnLevelWasLoaded.html\u003C/a\u003E). It is called whenever the game changes scenes, i.e. from Flight to the Space Center.\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENote that when \u0022overriding\u0022 methods from MonoBehaviour, you do not use the override keyword. Unity does not use true overriding, but instead does some trickery with reflection.\u003C/p\u003E\u003Cp\u003EAlso note that neither solution works with Quicksave/Quickload. Do not save data that you expect to be loaded when the user quickloads. The only workaround I have found for that is to add a PartModule to the vessel so that it can notify me when the game is being loaded or saved. See \u003Ca href=\u0022https://github.com/taraniselsu/TacLifeSupport/blob/master/Source/LifeSupportModule.cs#L50\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacLifeSupport/blob/master/Source/LifeSupportModule.cs#L50\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EP.S. I recommend using ConfigNode (as Iannic-ann-od did) instead of PluginConfiguration.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-08-15T10:01:47Z","Content":"\n\u003Cp\u003EWell, when writing to a custom file anyway you should be able to listen to GameEvents.onGameStateSaved. That way you don\u0027t have to do it every few seconds. They sadly do not give you a reference to the current config node via those events, though, so we still have to save stuff via parts. HighLogic.CurrentGame.scenarios looks like another promising way to save some data, though definitively not easier than part modules. It is a shame they not simply pass along those config nodes on that events and let us save whatever we want \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2013-08-15T17:33:58Z","Content":"\n\u003Cp\u003EThanks guys I will work on this. Makes total sense now that this fuction only works in parts. Dang. Learn something new every day.\u003C/p\u003E\n"},{"CreatedByName":"malkuth","CreatedById":57414,"CreatedDateTime":"2013-08-21T15:49:45Z","Content":"\n\u003Cp\u003EDid finally get this to work.. Wohoo. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E What was holding me back at first was that I had the save always overwriting the load.. So it always reset everything to 0. hahaha.. Finally got it to load the way I wanted and well.. That was that.. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ENo I continue my search to find out how the heck I can tell when the Player Pushes the Recruit Applicant Button in the Astronaut complex.. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}