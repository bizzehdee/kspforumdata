{"TopicId":67235,"ForumId":34,"TopicTitle":"[1.2.2](Dec10/16) Action Groups Extended: 250 Action Groups, in-flight editing. Now kOS/RemoteTech","CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-03-30T15:52:01Z","PageNum":7,"Articles":[{"CreatedByName":"vardicd","CreatedById":75832,"CreatedDateTime":"2014-06-18T02:00:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E@vardicd: No it\u0027s not a big deal.\u003Cp\u003EFltShow (and EditShow) control the visibility of AGX in those scenes. 1 is show and 0 is hide so the last time you left the flight scene you had AGX hidden is all that means.\u003C/p\u003E\u003Cp\u003E@Diomedea: Any mods off the top of your head that you would suggest I look at? I think I know what you are getting at, but a picture is worth a thousand words and all that.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eokay thanks.\u003C/p\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2014-06-18T02:05:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EOdd.\u003Cp\u003ECan you open the logging console (Alt-F2) and tell me if there are any \u0022AGX Fail...\u0022 messages please?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: I see you have Procedural Fairings in the screenshot, just booted up KSP and tried that mod and it worked as expected. (Although I have a different version with only 2 panels, not 4, per fairing base.)\u003C/p\u003E\u003Cp\u003Eedit the second: Okay, I\u0027m really puzzled now. \u003Ca href=\u0022https://drive.google.com/file/d/0B6-5UOjSWq7beEI2QUtwRmRXcTQ/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s a version with some logging enabled.\u003C/a\u003E Please go into Flight mode and select multiple parts and try adding an action. This will log a bunch of \u0022AGX...\u0022 messages to the log. Please grab the ksp.log and either send me the entire file or copy-paste the last part of the log so I can see what is happening please.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn the debug window when assigning an action I am getting an error \u0022[Exception]: KeyNotFoundException: The given key was not present in the dictionary.\u0022\u003C/p\u003E\u003Cp\u003EWas writing this as you were editing it seems \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Will put the debug version in now \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EUpdate: I tried it a few times, both with symmetry and manual selection of parts. In all cases only 1 action gets assigned and triggered. I\u0027ll give you both a copy of AGX entries and a link to the full log so you can have anything you need. Fingers crossed I got some data that will help.\u003C/p\u003E\u003Cp\u003E[LOG 19:20:45.313] AGX A solarPanels4\u003C/p\u003E\u003Cp\u003E[LOG 19:20:45.314] AGX B 3||3\u003C/p\u003E\u003Cp\u003E[LOG 19:20:45.315] AGX C Toggle Panels||Toggle Panels\u003C/p\u003E\u003Cp\u003E[LOG 19:20:45.316] AGX E 1\u003C/p\u003E\u003Cp\u003E[EXC 19:20:45.317] KeyNotFoundException: The given key was not present in the dictionary.\u003C/p\u003E\u003Cp\u003EKSP.log: \u003Ca href=\u0022https://www.dropbox.com/s/8pg7fz8wbc1ajyq/KSP.log\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/8pg7fz8wbc1ajyq/KSP.log\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-18T02:29:13Z\u0022 title=\u002206/18/2014 02:29  AM\u0022 data-short=\u002210 yr\u0022\u003EJune 18, 2014\u003C/time\u003E by JeffreyCor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-18T02:40:17Z","Content":"\n\u003Cp\u003EWow, talk about your boneheaded errors.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://drive.google.com/file/d/0B6-5UOjSWq7bVkxVbnphbUJieXM/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003ETry this version please (Logging Enabled).\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIf it works, \u003Ca href=\u0022https://drive.google.com/file/d/0B6-5UOjSWq7bNzJCb1oxR0I0Rms/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehere is the Version 1.6b release .dll with the logging disabled.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EFirst post download link updated to Version 1.6b to fix this bug.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-18T03:15:38Z\u0022 title=\u002206/18/2014 03:15  AM\u0022 data-short=\u002210 yr\u0022\u003EJune 18, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2014-06-18T03:12:56Z","Content":"\n\u003Cp\u003EGood news! It seems to be working perfect now with both symmetry and multiple selection parts assigning as they should now. As suspected this also corrected that weird cargo bay doors issue as well. Whoo hoo! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-18T03:22:49Z","Content":"\n\u003Cp\u003EGreat to hear.\u003C/p\u003E\u003Cp\u003EFor the record, all it was is that I forgot to not set the default action groups when it is assigned to group 11 or higher.\u003C/p\u003E\u003Cp\u003ESo when you tried to assign the actions to group 43, the mod tried to set that action assigned to group 43 in the default groups which does not exist and so this happened. The annoying part is I remembered to limit \u003Cem\u003Eloading\u003C/em\u003E the default groups to only groups 1-10, I just forgot to limit the \u003Cem\u003Esaving\u003C/em\u003E of them.\u003C/p\u003E\u003Cp\u003EAnd because the mod defaults to group 1 when it loads, that is what I was using for testing and so I did not see the error as the error did not happen on groups 1 to 10. It was not until you posted the screenshot and I saw you were using group 43 that I started to figure out what was happening.\u003C/p\u003E\u003Cp\u003EAnyways, issue resolved, download in first link is updated to latest and we can lay this to rest.\u003C/p\u003E\u003Cp\u003EThanks for all the help and patience with this JeffreyCor.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2014-06-18T03:49:40Z","Content":"\n\u003Cp\u003EYou are very welcome! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Small errors are always the most annoying. I\u0027m glad to have been of help in fixing the problem! I love this mod \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"DMFirmy","CreatedById":112717,"CreatedDateTime":"2014-06-23T13:59:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EOkay, in 10 minutes of testing I can not replicate your report. Can you please post a more detailed step-by-step on how you are getting this error please?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry for the delay in my reply... I have done a bit more testing myself and I think it may have been a conflict with another mod or something... I am using the mod now in a game with no other mods and I haven\u0027t experienced this behavior again. If I figure out the source of the issue, I will respond back here with the cause so that the conflict can be resolved or avoided for the future. Again, great mod.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-23T17:19:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMFirmy\u0022 data-cite=\u0022DMFirmy\u0022\u003E\u003Cdiv\u003ESorry for the delay in my reply... I have done a bit more testing myself and I think it may have been a conflict with another mod or something... I am using the mod now in a game with no other mods and I haven\u0027t experienced this behavior again. If I figure out the source of the issue, I will respond back here with the cause so that the conflict can be resolved or avoided for the future. Again, great mod.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHave you updated to 1.6b? If you are using 1.6a or earlier and have actions assigned to an actiongroup with a number of 11 or higher, the save routine was crashing out and not finishing. This might have caused the effect you saw as saving the action assignments would crash and so when it went to save the group names it would see no actions assigned and so save blank.\u003C/p\u003E\u003Cp\u003EIf you were only using groups 1 through 10, then there is still something else going on as the bug I fixed in 1.16b does not affect the first 10 groups.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-29T21:09:54Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EVersion 1.7 Release\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EFlight Window now can anchor at the bottom of the screen: When the bottom of the Flight Window is within 20 pixels of the bottom of your screen, the window will now anchor at the bottom and move the top of the window when a resizing is required.\u003C/p\u003E\u003Cp\u003EMonitor Toggle State: You can now monitor a group\u0027s activated state. Red=Off, Green=On, Yellow=Mixed, some actions in the group are on, some are off. Note that this defaults to off, please see end of post for reasoning. This is enabled/disabled for a group by pressing the \u0022Show Toggle\u0022 button underneath the text box to change a groups description on the main parts selection window.\u003C/p\u003E\u003Cp\u003E5 actiongroup views: Show only the actiongroups you wish to, so display all your lifting body actiongroups during ascent, display all your science/orbital actiongroups in orbit and then your landing actiongroups during descent.\u003C/p\u003E\u003Cp\u003EWhich actiongroups are in a given view is controlled with the \u0022Show 1 2 3 4 5\u0022 buttons just above the keybinds button on the main part selection window. When a number is green, that actiongroup shows in that view and when the number is red it does not show.\u003C/p\u003E\u003Cp\u003EWhich view is current is controlled by the top right button on the Flight Window, it says \u0022Group 1\u0022 by default. Click this button and then select the view you wish to use, view 1 is at the top and view 5 is at the bottom of the little pop-out that appears.\u003C/p\u003E\u003Cp\u003EThe name of each view can be changed in the Keysets window. You can also change the active view in here, or set the default view when you are in the Editor (and so do not have the Flight Window available).\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EOn why monitoring the state of actiongroups defaults to off.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EDuring testing, I stated with having all groups monitor their status by default, but it quickly got very confusing due to how KSP handles actiongroup.\u003C/p\u003E\u003Cp\u003EUsing a stock solar panel as an example, it comes down to the fact that the \u0022Deploy Panel\u0022, \u0022Retract Panel\u0022, and \u0022Toggle Panel\u0022 are 3 separate actions, not 3 commands tied to the same action.\u003C/p\u003E\u003Cp\u003EIf you activate the \u0022Deploy Panel\u0022 action, that action becomes active as expected. However, the \u0022Toggle Panel\u0022 action does not.\u003C/p\u003E\u003Cp\u003EThen, if you activate the \u0022Retract Panel\u0022 action to stow the panels, the display now shows both the \u0022Deploy Panel\u0022 and \u0022Retract Panel\u0022 as active, even though the panels are stowed and you would expect them to display inactive.\u003C/p\u003E\u003Cp\u003EHaving said that, if you only use the \u0022Toggle Panel\u0022 action, the actiongroups state does behave as you would expect so it does make sense when used like that so I left the ability in for you to turn it on if you wish.\u003C/p\u003E\u003Cp\u003ERemember: The state of an actiongroup reported by the toggle monitoring function only displays as you expect when you only use the toggle action. If you use a deploy or retract action, do not enable the state monitoring as it will report the wrong information.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-29T21:28:52Z","Content":"\n\u003Cp\u003EOkay, version 1.7 is out with some of the UI changes that have previously been discussed.\u003C/p\u003E\u003Cp\u003ESome of the other changes discussed were looked at but discarded.\u003C/p\u003E\u003Cp\u003EChange the Skin/Font: A lot of work would be required to do this so it is off the table for now. (A lot of work in this case being having to rewrite about 40-50% of the mod.) Does not mean it will never happen, but very unlikely at this point.\u003C/p\u003E\u003Cp\u003EColors for different actions: I looked at this and it changed during the development. The different colors for different types of actions (engines/science/etc) morphed into the actiongroup views and the different colors for the different actionstates (on/off) became the toggle state monitoring. At this point I think this covers what has been discussed for colors but I am open to other ways of using them if it would help with the mod.\u003C/p\u003E\u003Cp\u003ESize of windows: Due to the way I programmed the windows, their size is hardcoded. This is one of the main reasons changing the skin/font would be such an involved process. While it will not be dynamic, I do intended to add a \u0022wide\u0022 option so you can use longer text strings on the actiongroup descriptions if you wish. Are their any other windows people particularly want to see a different size on? It\u0027s not a huge deal to give a few optional sizes.\u003C/p\u003E\u003Cp\u003EAre there any other UI issues people want to raise? Now is the time to do so as I am going to be adding a new window (or two) for the staging function which is up next so I\u0027m in there messing around anyway.\u003C/p\u003E\u003Cp\u003EOn the topic of planned features, the two biggest things I\u0027m pondering are triggering the actions on a vessel nearby that is not your current vessel and to complement this adding a list of \u0022non-actiongroup\u0022 actions that can be added to actiongroups so you can \u0022control\u0022 a second vessel this way. I\u0027m not sure it is worth it however, anything simple can be done via a quick switch with [, and if you are after true control of a second vessel, there are mods out there for that.\u003C/p\u003E\u003Cp\u003EAnyways, that is where my thoughts currently are with this.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-06-30T09:16:25Z","Content":"\n\u003Cp\u003EFlight window. Nice the attach-to-bottom, nice the actionstate color, nice the groups \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. \u003C/p\u003E\u003Cp\u003EA thought: are really two buttons needed for each actiongroup on that window? (One titled with the description assigned, another with the keybinding, but both performing the same).\u003C/p\u003E\u003Cp\u003EI would leave one button for actiongroup, default showing description. If ever the keybinding is to be shown, it may appear as a tooltip (after a brief moment of hovering the cursor on that button), or a keypress (e.g. Alt, or Cmd) may be detected while the cursor is within the Flight window, and then the keybindings shown instead of the description. \u003C/p\u003E\u003Cp\u003EHaving just one button would give more space for the text to be displayed, so the size issue for that window may be solved.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-30T13:37:40Z","Content":"\n\u003Cp\u003EBack when I started this, I actually made the deliberate choice to put the keybinding on a separate button like that for two reasons:\u003C/p\u003E\u003Cp\u003E1) I wanted to be able to see the keybinding at a glance. Having myself become confused on which action I\u0027ve assigned to what group when I just had the base 10 groups available, I\u0027ve now gone and made it more difficult to keep things straight by adding both more actiongroups and the ability to change keybindings with keysets. So for me personally, I want to have the keybindings always visible like they are.\u003C/p\u003E\u003Cp\u003E2) It is on a separate button because if I did a text string combining the group name with the keybinding, the longer group names would push the keybinding off the right side of the button so you could not see it.\u003C/p\u003E\u003Cp\u003EHaving said that I can see why not everyone would need it showing all the time. Should be straightforward to add a show/hide option.\u003C/p\u003E\u003Cp\u003EAlso, looking at the keybind button it is a little wider then it needs to be for what it displays. (I\u0027m going to size it so \u0027Numpad0\u0027 just fits, the \u0027Alpha0\u0027 and individual letters are both smaller then that.)\u003C/p\u003E\u003Cp\u003EI\u0027m still planning to add the \u0027wide\u0027 option as well so that should take care of the Flight Window from a UI perspective I think.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"kiwiak","CreatedById":82796,"CreatedDateTime":"2014-06-30T14:12:56Z","Content":"\n\u003Cp\u003Ei think i will switch to this from action groups manager\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-06-30T14:38:43Z","Content":"\n\u003Cp\u003EIt may require further testing, but till now it seems the Toggle State is lost across stages and vessels switching. Or, it is not persistent.\u003C/p\u003E\u003Cp\u003EDoing some effort to put the State correctly (reflecting the part actual situation), so to show green when active, red otherwise. After a staging command, or a vessel switch, all states with AGX show red (so, have to re-sync them with the relevant parts).\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-30T15:01:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003EIt may require further testing, but till now it seems the Toggle State is lost across stages and vessels switching. Or, it is not persistent.\u003Cp\u003EDoing some effort to put the State correctly (reflecting the part actual situation), so to show green when active, red otherwise. After a staging command, or a vessel switch, all states with AGX show red (so, have to re-sync them with the relevant parts).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOdd, my first guess would be vessel switching as I don\u0027t interact with the staging at all. \u003C/p\u003E\u003Cp\u003EThat means I never tested the staging stuff so of course that\u0027s where the problem is going to be....\u003C/p\u003E\u003Cp\u003ETaking a look now.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Wow, it is staging. It looks like all groups reset to deactivated when I stage. Odd.....\u003C/p\u003E\u003Cp\u003Eedit2: Oh, it\u0027s when the part count of the ship changes. That is something I do interact with for other reasons, you have to love code that does \u003Cem\u003Eextra\u003C/em\u003E things don\u0027t you?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-30T15:25:55Z\u0022 title=\u002206/30/2014 03:25  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 30, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-30T16:34:23Z","Content":"\n\u003Cp\u003EVersion 1.7a release. (Download in first post.)\u003C/p\u003E\u003Cp\u003EFix Toggle state not saving correctly.\u003C/p\u003E\u003Cp\u003EThis was a bit of a sideways bug. When the part count on a ship changes, the action list gets refreshed so that parts that fell off are removed and parts that are docked to get added to the list.\u003C/p\u003E\u003Cp\u003EHowever, when this happened the Toggle State was loading from when you switched to the vessel. Effectively the state was never updating as it always saved the same state as when you started flying that vessel and any changes made during that flight were lost.\u003C/p\u003E\u003Cp\u003EThere were a couple other conditions that could cause this as well that are now also fixed.\u003C/p\u003E\u003Cp\u003ELet me know of anything else that comes up.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-01T16:10:56Z","Content":"\n\u003Cp\u003EI continue to have issues when switching vessels, even with the latest version. No error logged. \u003C/p\u003E\u003Cp\u003EBut perhaps I am beginning to find a pattern about the toggles actionstate.\u003C/p\u003E\u003Cp\u003EIf I alternate two different vessels, each with similar AGs defined, those AGs that are set as toggles (with parts that allow also set and reset commands beyond the toggle) are scrambled in the switch; also, some AGs that are peculiar of only one vessel, are blanked (lose their action definitions, though keeping the names) when switching over. AGs with parts that only have the toggle command seem to always work fine, however. \u003C/p\u003E\u003Cp\u003ESo, I kept re-syncing all those toggle AGs with the correct state of the relevant part after switching, only to find - again - the AGs reversed with the other vessel when switching back. In the end, left those toggle AGs as they were appearing with one vessel (reversed from the switch); and when switching back to the first vessel, those AGs were in the correct state! \u003C/p\u003E\u003Cp\u003EHope the above is clear enough and could be of help. Like if the state of the AGs is not aware there are different vessels (each one with a different situation). If that is because AGX gets confused with parts that have multiple commands, the solution may require to read the state from the vessel definition ingame (as the state with all parts is actually persistent, and is restored when switching to the vessel).\u003C/p\u003E\u003Cp\u003EOther issue: the Flight window still \u0022flies\u0022 (does not stick to the bottom and keeps its position based on the top of the rect) when switching vessels. In case it helps, I use KSP in a borderless window of 1920 x 1080. I move the Flight window as far down as possible while flying a vessel, but there is no sign it gets stickied.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-01T22:04:47Z","Content":"\n\u003Cp\u003E@diomedea: I\u0027ll look into the switching vessels thing some more. Something to do with the values not holding correctly when you switch vessels probably. I have to handle that differently then loading a fresh flight scene because KSP does not save when you switch between two vessels using [ and ], so I have to \u0022semi-save\u0022 the state of everything manually. \u003C/p\u003E\u003Cp\u003EI assume from your description that when you switch to another vessel outside of physics range via the map, (or space center -\u0026gt; tracking station) everything works as expected?\u003C/p\u003E\u003Cp\u003EOn the flight window, are you going from a larger to a smaller window when switching? I\u0027m actually cheating on this bit, I don\u0027t actually change the anchor position, I just fake it based on the location of the bottom of the window. But when switching it destroys and draws a new window and so bypasses my check. Simple enough fix now that I know about it.\u003C/p\u003E\u003Cp\u003E@Alshain: Glad to have you on board. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E The mod is supposed to load actiongroups assigned to KSP\u0027s default groups automatically to make the transition smooth but please let me know of any issues and I\u0027ll get them fixed up for you.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-02T03:12:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E@diomedea: I\u0027ll look into the switching vessels thing some more. Something to do with the values not holding correctly when you switch vessels probably. I have to handle that differently then loading a fresh flight scene because KSP does not save when you switch between two vessels using [ and ], so I have to \u0022semi-save\u0022 the state of everything manually. \u003Cp\u003EI assume from your description that when you switch to another vessel outside of physics range via the map, (or space center -\u0026gt; tracking station) everything works as expected?\u003C/p\u003E\u003Cp\u003EOn the flight window, are you going from a larger to a smaller window when switching? I\u0027m actually cheating on this bit, I don\u0027t actually change the anchor position, I just fake it based on the location of the bottom of the window. But when switching it destroys and draws a new window and so bypasses my check. Simple enough fix now that I know about it.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy tests till now were done switching two crafts via the map (though, the issue shows also going through the space center); also the issue shows switching by using the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/46956\u0022 rel=\u0022external nofollow\u0022\u003Etargetron\u003C/a\u003E mod (but I guess that gives control of crafts just the same way as right-clicking them on the map). So, have to say switching via the map is \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Enot\u003C/span\u003E working as expected. Never tried yet with two vessels within physics range. In case it may help, please suggest some specific situations to be tested.\u003C/p\u003E\u003Cp\u003EAlso, have to correct myself about the parts presenting the issue. I had solar panels keeping the state consistent across vessel switching (while other parts had the AGX state reversed), but solar panels also have a similar arrangement of commands (set, reset, toggle) than those other parts. So, it may be the state is kept consistent if - by design or luck - both vessels had the same situation for those parts. Can\u0027t say what, if those parts have to be on exactly the same AG with both vessels, have to be in the same state (with both vessels set or both reset), the two conditions together, or else. \u003C/p\u003E\u003Cp\u003EFlight window: yes, the issue happens when switching from a vessel with lots of AGs shown (long window) to a vessel with less AGs (smaller window).\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-02T04:26:39Z","Content":"\n\u003Cp\u003EOkay, that gives me some more avenues to explore on the toggle issue. I\u0027ll have to look into in and get back to you as your second report means what I thought was happening isn\u0027t.\u003C/p\u003E\u003Cp\u003EI\u0027ll probably throw the flight window in there first, it\u0027s a quick fix.\u003C/p\u003E\u003Cp\u003EWill see what I can get done after work tomorrow. (Was a long weekend for Canada day up here, don\u0027t get this much time in to work on this usually.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-03T00:04:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003EMy tests till now were done switching two crafts via the map (though, the issue shows also going through the space center); also the issue shows switching by using the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/46956\u0022 rel=\u0022external nofollow\u0022\u003Etargetron\u003C/a\u003E mod (but I guess that gives control of crafts just the same way as right-clicking them on the map). So, have to say switching via the map is \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Enot\u003C/span\u003E working as expected. Never tried yet with two vessels within physics range. In case it may help, please suggest some specific situations to be tested.\u003Cp\u003EAlso, have to correct myself about the parts presenting the issue. I had solar panels keeping the state consistent across vessel switching (while other parts had the AGX state reversed), but solar panels also have a similar arrangement of commands (set, reset, toggle) than those other parts. So, it may be the state is kept consistent if - by design or luck - both vessels had the same situation for those parts. Can\u0027t say what, if those parts have to be on exactly the same AG with both vessels, have to be in the same state (with both vessels set or both reset), the two conditions together, or else. \u003C/p\u003E\u003Cp\u003EFlight window: yes, the issue happens when switching from a vessel with lots of AGs shown (long window) to a vessel with less AGs (smaller window).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, I am unable to replicate either the issue with the toggle states not saving correctly and with the action groups going wonky on tests with multiple different stock parts. Are the parts you having issues with from mods? It may be they are treating actiongroups differently then squad does on their stock parts.\u003C/p\u003E\u003Cp\u003ECan you check the log (alt-f2) to make sure there are no errors being thrown and can I get a copy of your persistence.sfs file so I can check the data is being saved correctly?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Looks like Targetron is not an issue, it seems okay on my end.\u003C/p\u003E\u003Cp\u003Eedit2: Before switching, you are waiting for any animations to finish? My mod toggles an actiongroup state from inactive to active (or vice-versa) immediately on keypress, but the actual state does not change until the animation finished playing. On the solar panels I test with, if you switch before they fully deploy, they will be stowed and inactive when you switch back to the vessel, but my mod will think they are active.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-03T01:07:47Z\u0022 title=\u002207/03/2014 01:07  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 3, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-03T06:11:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EOkay, I am unable to replicate either the issue with the toggle states not saving correctly and with the action groups going wonky on tests with multiple different stock parts. Are the parts you having issues with from mods? It may be they are treating actiongroups differently then squad does on their stock parts.\u003Cp\u003ECan you check the log (alt-f2) to make sure there are no errors being thrown and can I get a copy of your persistence.sfs file so I can check the data is being saved correctly?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Looks like Targetron is not an issue, it seems okay on my end.\u003C/p\u003E\u003Cp\u003Eedit2: Before switching, you are waiting for any animations to finish? My mod toggles an actiongroup state from inactive to active (or vice-versa) immediately on keypress, but the actual state does not change until the animation finished playing. On the solar panels I test with, if you switch before they fully deploy, they will be stowed and inactive when you switch back to the vessel, but my mod will think they are active.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI may have found something. This time I tested AGX on an almost clean KSP 0.23.5 install to start with. Launched two different vessels with as many different toggle commands tied to stock parts as I could. On a clean install the actionstates are preserved. Looking at the log window, noticed warning messages about AGX not saving things at launch (probably a temporary thing). But something in those messages made me have a look at the config you use with parts so to preserve data. Noticed the instruction \u0022@PART\u003C/p\u003E\u003Cp\u003E[*]:Final\u0022, went looking for other mods that issue similar instructions with my main install. A few do (mainly for their own parts), one struck my attention because more generally applied to any suitable part: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/20451\u0022 rel=\u0022external nofollow\u0022\u003EFAR\u003C/a\u003E. Installed FAR on the same test environment, relaunched the same game, and now \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Eactionstates get lost\u003C/span\u003E! (FAR seems to apply some parameters to parts by default, though the exact cause may be different. But the effect is, FAR and AGX seem not compatible currently).\u003C/p\u003E\u003Cp\u003EOf course the question comes: AGX really needs to place its module as \u0022Final\u0022 ? Anyway, \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/20451\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003Ehere\u003C/strong\u003E\u003C/a\u003E are all files relevant to that test for you to see, I hope you will identify what goes on. The real cause may well be different from what I\u0027m guessing.\u003C/p\u003E\u003Cp\u003EIf those questions above still are of interest: issue is found with both stock and mod parts; I do wait for animations to finish (actually, most parts with this issue have no animation).\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-03T13:49:31Z","Content":"\n\u003Cp\u003EFAR? Odd. I\u0027ll see what FAR is doing in it\u0027s code.\u003C/p\u003E\u003Cp\u003EThat surprises me because while I don\u0027t have FAR on my dev install, it is on my for fun install and I\u0027ve had no issues with it in past versions. I\u0027ve had no time on my for fun install since releasing 1.7 though as real life kept getting in the way. :/\u003C/p\u003E\u003Cp\u003EAs for the partModule having to be Final, AGM does not actually care one way or another.\u003C/p\u003E\u003Cp\u003EHowever, if I do not apply it as Final, I break custom animations on RemoteTech as that animation code refers to the partModule by index number, not name, and I have to add mine at the end of the list for compatibility.\u003C/p\u003E\u003Cp\u003EAlso, your link is broken. The one that is supposed to go to the files you uploaded goes to the forum thread for FAR.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Are you using ModuleManager 2.0 or newer? If so, does changing GameData\\AGext\\part.cfg as follows do anything:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[*]:Final\u003Cbr\u003E{\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E      name = ModuleAGExtData\u003Cbr\u003E\tAGXData = Empty\u003Cbr\u003E\tAGXNames = Empty \u003Cbr\u003E\tAGXKeySet = 0\u003Cbr\u003E\tAGXActivated = 0\u003Cbr\u003E        AGXLoaded = false   \u0026lt;-Add this line\u003Cbr\u003E        AGXGroupStates =    \u0026lt;-Add this line\u003Cbr\u003E        AGXGroupStateNames =   \u0026lt;-Add this line\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt looks like ModuleManger\u0027s invalid module cleanup routing might be wiping that data because I did not have it formatted as ModuleManager expected.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-03T14:44:06Z\u0022 title=\u002207/03/2014 02:44  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 3, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-03T16:34:58Z","Content":"\n\u003Cp\u003ESorry about that link: \u003Ca href=\u0022https://www.dropbox.com/s/2g5s96j9bm5xsih/Testing%20AGX.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E the correct one.\u003C/p\u003E\u003Cp\u003EI am indeed using MM 2.1.5, maybe that is part of the issue as well (noticed you keep packing MM 1.5.6 with AGX, but certainly can\u0027t use that with other mods). I\u0027ll try those instructions soon.\u003C/p\u003E\u003Cp\u003EYes, I had some knowledge RT2 is numbering PartModules. Can\u0027t remember now about what other mod it was discussed, but the issue was really similar.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-03T16:54:49Z","Content":"\n\u003Cp\u003EOkay. On your test adding in FAR which of these things happened?\u003C/p\u003E\u003Cp\u003EIn both cases:\u003C/p\u003E\u003Cp\u003EBase game things work okay -\u0026gt; close game and install FAR -\u0026gt; load game and everything is screwy\u003C/p\u003E\u003Cp\u003ECase A:\u003C/p\u003E\u003Cp\u003EStill in the game with FAR installed, reset toggles and actiongroups and things work correctly when switching vessels\u003C/p\u003E\u003Cp\u003ECase B:\u003C/p\u003E\u003Cp\u003EStill in game with FAR installed, reset toggles and actiongroups and things are still forgotten when switching vessels.\u003C/p\u003E\u003Cp\u003EIf it was Case A, then I would suspect ModuleManager is the culprit and ask that you test the modified part.cfg in my post above.\u003C/p\u003E\u003Cp\u003EIf it is Case B, then the problem is not ModuleManager and there is still something else going on that I have not figured out yet.\u003C/p\u003E\u003Cp\u003ELooking at the data files in your link, the data is saving correctly so something in the loading process is going sideways.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Hmmm.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[WRN 07:33:14.587] PartModule is null.\u003Cbr\u003E[WRN 07:33:14.588] Part mumech.MJ2.AR202 cannot load module #6. It only has 5 modules defined\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis is on Test Station 1, looking at the craft file, module #6 is my AGXData module so the partModule does not load. Looking more and more like this is something to do with ModuleManager.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-03T17:05:28Z\u0022 title=\u002207/03/2014 05:05  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 3, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"}]}