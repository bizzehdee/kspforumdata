{"TopicId":59388,"ForumId":20,"TopicTitle":"CompatibilityChecker Discussion Thread","CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-01-09T04:00:12Z","PageNum":2,"Articles":[{"CreatedByName":"Rich","CreatedById":17874,"CreatedDateTime":"2014-01-09T16:46:46Z","Content":"\n\u003Cp\u003EI was toying with this idea last week but rejected it on the basis that my plugin \u003Cem\u003Eprobably\u003C/em\u003E will not be broken by version updates. However, the discussion in this thread had changed my mind, specifically the mention of accountability. \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lincourtl\u0022 data-cite=\u0022lincourtl\u0022\u003E\u003Cdiv\u003EMy two cents as a user: While I agree in general, the implementation as described -- literally locking out the plugin -- would make me very \u003Cstrong\u003Eangry\u003C/strong\u003E, since I should be able to decide whether I want to continue using something which may or may not break my game.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhile that might be true, it is a mod developer\u0027s decision to decide whether to give the user the decision or not.\u003C/p\u003E\n"},{"CreatedByName":"J.Random","CreatedById":63332,"CreatedDateTime":"2014-01-09T16:51:45Z","Content":"\n\u003Cp\u003EHow about settings option instead of dialog window to disable this feature?\u003C/p\u003E\u003Cp\u003EDISABLE_VERSION_CHECK_I_KNOW_WHAT_I_AM_DOING_AND_TAKE_FULL_RESPONSIBILITY_FOR_DECISION_PLEASE_PROCEED = True?\u003C/p\u003E\n"},{"CreatedByName":"Rich","CreatedById":17874,"CreatedDateTime":"2014-01-09T16:54:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022J.Random\u0022 data-cite=\u0022J.Random\u0022\u003E\u003Cdiv\u003EHow about settings option instead of dialog window to disable this feature?\u003Cp\u003EDISABLE_VERSION_CHECK_I_KNOW_WHAT_I_AM_DOING_AND_TAKE_FULL_RESPONSIBILITY_FOR_DECISION_PLEASE_PROCEED = True?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI like it.\u003C/p\u003E\n"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2014-01-09T17:14:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rich\u0022 data-cite=\u0022Rich\u0022\u003E\u003Cdiv\u003EI like it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t because it circumvents the entire purpose of doing this. I can just imagine the forum conversation:\u003C/p\u003E\u003Cp\u003E\u0022I CANT MECHJEB\u0022\u003C/p\u003E\u003Cp\u003E\u0022TURN OFF THE VERSION CHECK HERE\u0022\u003C/p\u003E\u003Cp\u003E\u0022IT BROKE WITH THE RT2 FIX THE BUGS!!!\u0022\u003C/p\u003E\u003Cp\u003EUnder this scheme we\u0027d probably see:\u003C/p\u003E\u003Cp\u003E\u0022I CANT MECHJEB WHEN IS TEH UPDATE\u0022\u003C/p\u003E\u003Cp\u003E\u0022I CANT MECHJEB WHEN IS TEH UPDATE\u0022\u003C/p\u003E\u003Cp\u003E\u0022I CANT MECHJEB WHEN IS TEH UPDATE\u0022\u003C/p\u003E\u003Cp\u003EWhich is a damn sight better than a ton of false error reporting to the wrong mods, users passing around stories of how one mod broke another, etc... As ferram4 points out in the OP, a smart user who depends on the mod will just recompile it for themselves if it\u0027s taking too long for them.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-01-09T17:16:47Z\u0022 title=\u002201/09/2014 05:16  PM\u0022 data-short=\u002210 yr\u0022\u003EJanuary 9, 2014\u003C/time\u003E by regex\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lincourtl","CreatedById":72218,"CreatedDateTime":"2014-01-09T17:50:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022J.Random\u0022 data-cite=\u0022J.Random\u0022\u003E\u003Cdiv\u003EHow about settings option instead of dialog window to disable this feature?\u003Cp\u003EDISABLE_VERSION_CHECK_I_KNOW_WHAT_I_AM_DOING_AND_TAKE_FULL_RESPONSIBILITY_FOR_DECISION_PLEASE_PROCEED = True?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI could live with that.\u003C/p\u003E\n"},{"CreatedByName":"lincourtl","CreatedById":72218,"CreatedDateTime":"2014-01-09T17:52:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rich\u0022 data-cite=\u0022Rich\u0022\u003E\u003Cdiv\u003EWhile that might be true, it is a mod developer\u0027s decision to decide whether to give the user the decision or not.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAbsolutely. It\u0027s the developer\u0027s choice of how considerate of the user they want to be. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TBryson2","CreatedById":66586,"CreatedDateTime":"2014-01-09T18:04:04Z","Content":"\n\u003Cp\u003E(From an \u0022outsider\u0022 looking \u0022in\u0022) I think that is a great idea! I get (sort of) frustrated having to compare what I have, to what\u0027s out there because the author does not update the release date on the \u0022item\u0022 or web page.\u003C/p\u003E\u003Cp\u003EMy question would be; what about the MOD\u0027s that affect \u003Cem\u003Eother\u003C/em\u003E MOD\u0027s? It isn\u0027t always KSP that gets blamed, or is to \u0022fault\u0022 (for the lack of a better explanation). How do \u0022we\u0022 determine what\u0027s causing the issue? I think the above would go a LONG way to eliminate some of the equation.\u003C/p\u003E\u003Cp\u003EAnd THANKS to all who take the time to make the MOD\u0027s for everyone. We DO appreciate it!\u003C/p\u003E\u003Cp\u003ETB\u003C/p\u003E\n"},{"CreatedByName":"draeath","CreatedById":25709,"CreatedDateTime":"2014-01-09T18:42:27Z","Content":"\n\u003Cp\u003EYou\u0027re never going to get rid of all the idiots, the goal is to reduce the number somewhat.\u003C/p\u003E\u003Cp\u003EI fully support this, \u003Cem\u003Eprovided\u003C/em\u003E there is a way to continue - whether it\u0027s a dialog or an obscure ritual that must be performed on the first full moon of a new year.\u003C/p\u003E\u003Cp\u003EI do have to say though, a big part of releiving the crappy-bug-report pain is having an actual bug tracker that people can see and submit to. Handling bug reports on a forum is like herding cats - never going to end well. It\u0027s so much easier to just mark \u0022INVALID\u0022 and move on.\u003C/p\u003E\u003Cp\u003EBitbucket (and I presume github?) have bugtracking features, and if not it\u0027s not to hard to keep a flyswatter or bugzilla page up somewhere. Assuming you have hosting. If you don\u0027t, that\u0027s not your fault at all. Heck you should go all the way and use a project management tool anyway - no sense keeping your ideas and plans scribbled on a napkin when the tools software development houses use are available, right?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-01-09T18:50:38Z\u0022 title=\u002201/09/2014 06:50  PM\u0022 data-short=\u002210 yr\u0022\u003EJanuary 9, 2014\u003C/time\u003E by draeath\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2014-01-09T19:04:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022draeath\u0022 data-cite=\u0022draeath\u0022\u003E\u003Cdiv\u003EI fully support this, \u003Cem\u003Eprovided\u003C/em\u003E there is a way to continue - whether it\u0027s a dialog or \u003Cstrong\u003Ean obscure ritual that must be performed on the first full moon of a new year\u003C/strong\u003E.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHere\u0027s an obscure ritual: Wait for the update patiently or compile it yourself. As ferram4 notes, this takes care of compiler errors (one way or the other) which comprise the majority of new version errors (if any).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022draeath\u0022 data-cite=\u0022draeath\u0022\u003E\u003Cdiv\u003EI do have to say though, a big part of releiving the crappy-bug-report pain is having an actual bug tracker that people can see and submit to. Handling bug reports on a forum is like herding cats - never going to end well. It\u0027s so much easier to just mark \u0022INVALID\u0022 and move on.\u003Cp\u003EBitbucket (and I presume github?) have bugtracking features, and if not it\u0027s not to hard to keep a flyswatter or bugzilla page up somewhere. Assuming you have hosting. If you don\u0027t, that\u0027s not your fault at all. Heck you should go all the way and use a project management tool anyway - no sense keeping your ideas and plans scribbled on a napkin when the tools software development houses use are available, right?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPersonally I think this is more of a personal choice thing, much like this locking suggestion. From my point of view I would ask what else is a forum thread for a mod for, a big circle-jerk of praise? I mean, I can see bug trackers working well for larger, more popular mods but for something like what I write there\u0027s no reason to link to the GitHub tracker and tell all my users to \u0022POST BUG HERE OR I IGNORE YOU\u0022 because the forum thread works perfectly well and, quite frankly, I don\u0027t want to look at GitHub any more than I have to. I managed a \u003Cem\u003Emuch\u003C/em\u003E larger software project for three years from a forum thread and did quite well, IMO.\u003C/p\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-01-09T21:50:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TBryson2\u0022 data-cite=\u0022TBryson2\u0022\u003E\u003Cdiv\u003EMy question would be; what about the MOD\u0027s that affect \u003Cem\u003Eother\u003C/em\u003E MOD\u0027s? It isn\u0027t always KSP that gets blamed, or is to \u0022fault\u0022 (for the lack of a better explanation). How do \u0022we\u0022 determine what\u0027s causing the issue? I think the above would go a LONG way to eliminate some of the equation.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe most effective way to deal with that is for users to provide more information about their issues, up to and including all the mods they\u0027re using and their version numbers, plus a full copy of the output_log.txt. Unfortunately, trying to get an entire modlist is often a problem, and most users don\u0027t seem to be aware that mods actually have version numbers. Finally, lots of users seem to try to be \u0022helpful\u0022 or \u0022smart\u0022 when they provide the output_log.txt and truncate it, possibly hiding the source of the error.\u003C/p\u003E\u003Cp\u003EHonestly, the only true way to determine that it\u0027s two mods conflicting is that a bug appears only when those two mods are installed, but doesn\u0027t when either is installed alone the bug doesn\u0027t occur, \u003Cem\u003Ewith no other issues occurring whatsoever\u003C/em\u003E. The last part is significant because then you get the \u0022deleting ModuleManager fixes the problem\u0022 issue.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022draeath\u0022 data-cite=\u0022draeath\u0022\u003E\u003Cdiv\u003EI fully support this, \u003Cem\u003Eprovided\u003C/em\u003E there is a way to continue - whether it\u0027s a dialog or an obscure ritual that must be performed on the first full moon of a new year.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs regex pointed out, you can recompile it yourself. Ultimately, this is a relatively low barrier to entry IMO for a competent user, but does prevent the computer-illiterate from trying to mess with things they don\u0027t understand and possibly messing up their install (in the worst-case scenario). I also like the fact that rather than being some type of \u0022official\u0022 GUI-approved circumvention, it involves having to reqork the source code (even the slightest), which should carry some weight for the vast majority of users; they\u0027re not relying on the modder to make sure it works at that point, they\u0027re taking it into their own hands and will be subject to the consequences.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EI do have to say though, a big part of releiving the crappy-bug-report pain is having an actual bug tracker that people can see and submit to. Handling bug reports on a forum is like herding cats - never going to end well. It\u0027s so much easier to just mark \u0022INVALID\u0022 and move on.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s more the \u0022common knowledge\u0022 of a certain mod causing bugs that I\u0027m concerned about; it leads to lots of ill-informed, self-propagated bad \u0022bugfixes\u0022 to float around the community, getting more people ticked off at us when they shouldn\u0027t be. Just look at what the majority of the community calls a gravity turn (45 degree pitchover at 10km) and then look at what a \u003Ca href=\u0022https://en.wikipedia.org/wiki/Gravity_turn\u0022 rel=\u0022external nofollow\u0022\u003Egravity turn actually is\u003C/a\u003E, then realize that this happens with everything the KSP community discusses. Including mod issues. It also might happen that I have a burning hatred of incorrect information being spread, and when it affects me somewhat directly I get quite annoyed. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TMS","CreatedById":57134,"CreatedDateTime":"2014-01-09T22:14:08Z","Content":"\n\u003Cp\u003EWho\u0027ll be the first to write a mod that disables the version check code in other mods? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-01-09T23:04:06Z","Content":"\n\u003Cp\u003ESorry about all those MJ users who whine about their rocket doing loops ferram4 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ll look into adding a proper gravity turn mode one of those days.\u003C/p\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-01-09T23:08:42Z","Content":"\n\u003Cp\u003EIt\u0027s not your fault for that one. The only thing I\u0027d ask is that the ascent autopilot says \u0022Executing pitch program\u0022 rather than \u0022Executing gravity turn\u0022 or whatever it does currently, so it\u0027s not saying it\u0027s doing something it\u0027s not. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs for a gravity turn mode, that\u0027s seems kind of simple if you can get the rocket to point surface prograde. Have it wait until a set altitude, then switch to angle 5 degrees in the direction it has to go, then once the velocity vector is past that point have the rocket point surface prograde. There are certainly complications that I\u0027m not thinking of here, since I don\u0027t know the MJ internals, but it seems doable using the already existing Smart ASS code.\u003C/p\u003E\n"},{"CreatedByName":"JordanL","CreatedById":95655,"CreatedDateTime":"2014-01-09T23:51:31Z","Content":"\n\u003Cp\u003EI wish it was easier to manage versions of a mod as a user. Updating mods is sort of a pain, especially when some maintainers don\u0027t keep super detailed change logs so I\u0027m not sure if my problem has be patched or not.\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2014-01-10T02:49:50Z","Content":"\n\u003Cp\u003EAlong these tangents, I\u0027ve posted a suggestion for \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/64445-Better-Addon-Management\u0022 rel=\u0022external nofollow\u0022\u003Ebetter addon management\u003C/a\u003E recently, which includes the notion of each mod having a \u0022manifest\u0022 of sorts including its name, version, KSP-compatible version, license and some other metadata. This\u0027d solve the version issue -- really, if a user wants to try to run an outdated mod they should be allowed to do so but it should be made clear that they shouldn\u0027t expect it to work.\u003C/p\u003E\n"},{"CreatedByName":"Greys","CreatedById":57109,"CreatedDateTime":"2014-01-10T02:56:22Z","Content":"\n\u003Cp\u003EJust a thought but what if....\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/pfCUFQ8.png\u0022 alt=\u0022pfCUFQ8.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ERemote Compatability Check would query a server maintained by the creator or through a third party and updated by the creator, and would indicate if the version of the DLL they have is compatible with the version of KSP they\u0027re running as a boolean. \u003C/p\u003E\u003Cp\u003ESaid server would return null if it didn\u0027t know, prompting the check to fail and not store a value\u003C/p\u003E\u003Cp\u003E... but how to store it such that users couldn\u0027t fiddle with the value in a cfg file... maybe some kind of checksum unique to the two versions and the user\u0027s machine?\u003C/p\u003E\u003Cp\u003Eeh.\u003C/p\u003E\n"},{"CreatedByName":"draeath","CreatedById":25709,"CreatedDateTime":"2014-01-10T02:57:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ferram4\u0022 data-cite=\u0022ferram4\u0022\u003E\u003Cdiv\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022draeath\u0022 data-cite=\u0022draeath\u0022\u003E\u003Cdiv\u003EI fully support this, \u003Cem\u003Eprovided\u003C/em\u003E there is a way to continue - whether it\u0027s a dialog or an obscure ritual that must be performed on the first full moon of a new year.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs regex pointed out, you can recompile it yourself. Ultimately, this is a relatively low barrier to entry IMO for a competent user, but does prevent the computer-illiterate from trying to mess with things they don\u0027t understand and possibly messing up their install (in the worst-case scenario). I also like the fact that rather than being some type of \u0022official\u0022 GUI-approved circumvention, it involves having to reqork the source code (even the slightest), which should carry some weight for the vast majority of users; they\u0027re not relying on the modder to make sure it works at that point, they\u0027re taking it into their own hands and will be subject to the consequences.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy objection to this (requiring recompilation specifically) is that it requires one to have the compiler tools available and installed, and knowledge on how to use them. I am by no means an idiot, but I do not have these tools handy nor do I really have any wish to do so - I have no plans to touch unity etc for the foreseeable future. Take the compiling step out and it would be a different story (eg, interpreted like Python).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-01-10T03:00:21Z\u0022 title=\u002201/10/2014 03:00  AM\u0022 data-short=\u002210 yr\u0022\u003EJanuary 10, 2014\u003C/time\u003E by draeath\u003C/strong\u003E\n\u003Cbr\u003Eadding to quote for clarity\n\u003C/span\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-01-10T03:33:29Z","Content":"\n\u003Cp\u003EYou do realize that all you need to compile code for a KSP mod is Visual Studio, have the project reference Assembly-CSharp.dll and UnityEngine.dll in KSP_Data/Managed, and compile the dll, right? All you need is a C# compiler, which isn\u0027t hard to find.\u003C/p\u003E\n"},{"CreatedByName":"Majiir","CreatedById":7550,"CreatedDateTime":"2014-01-10T03:41:16Z","Content":"\n\u003Cp\u003EI\u0027ve built a proof-of-concept compatibility checker. Here\u0027s a shot of it in action:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i3.minus.com/iizAip23upGSH.png\u0022 alt=\u0022iizAip23upGSH.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ESome things to note:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EChecker code is present in both Kethane and KAS. Either of them can display the compatibility notice.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe KAS checker executes first, but the Kethane checker is the one that runs. This is because the Kethane checker is a newer version, and the KAS checker lets it run. In other words, checkers perform version negotiation so that only the newest checker code will run. (If multiple copies of the same version of the checker are present, only one will execute.)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EResponsibility for disabling plugin functionality rests with each mod. (Notice the Kethane grid still present in the background.)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EEach mod also defines how compatibility is defined. A mod can define its own range of version compatibility or even do something more complex like check a webserver (as Greys suggested).\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAll communication is done through reflection, so there are no DLL dependencies.\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENow, \u003Cstrong\u003EI do not believe this code is ready for use in production\u003C/strong\u003E. In particular, I haven\u0027t done much testing of the error handling in the reflection code, and the version negotiation \u003Cem\u003Emust\u003C/em\u003E work. I also think that type names should be vetted before deployment.\u003C/p\u003E\u003Cp\u003EThe following is released for review purposes only.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E/**\u003Cbr\u003E * Copyright (c) 2014, Majiir\u003Cbr\u003E * All rights reserved.\u003Cbr\u003E */\u003Cbr\u003E\u003Cbr\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Reflection;\u003Cbr\u003E\u003Cbr\u003E[KSPAddonFixed(KSPAddon.Startup.MainMenu, true, typeof(CompatibilityChecker))]\u003Cbr\u003Einternal class CompatibilityChecker : UnityEngine.MonoBehaviour\u003Cbr\u003E{\u003Cbr\u003E    public static bool IsCompatible()\u003Cbr\u003E    {\u003Cbr\u003E        // TODO: Implement your own compatibility check here.\u003Cbr\u003E        return false;\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    /*-----------------------------------------------*\\\u003Cbr\u003E    | IMPLEMENTERS SHOULD NOT EDIT BEYOND THIS POINT. |\u003Cbr\u003E    \\*-----------------------------------------------*/\u003Cbr\u003E\u003Cbr\u003E    private static int _version = 1;\u003Cbr\u003E    private static bool _ran = false;\u003Cbr\u003E\u003Cbr\u003E    public void Start()\u003Cbr\u003E    {\u003Cbr\u003E        FieldInfo[] fields =\u003Cbr\u003E            getAllTypes()\u003Cbr\u003E            .Where(t =\u0026gt; t.Name == \u0022CompatibilityChecker\u0022)\u003Cbr\u003E            .Select(t =\u0026gt; t.GetField(\u0022_version\u0022, BindingFlags.Static | BindingFlags.NonPublic))\u003Cbr\u003E            .Where(f =\u0026gt; f != null)\u003Cbr\u003E            .Where(f =\u0026gt; f.FieldType == typeof(int))\u003Cbr\u003E            .ToArray();\u003Cbr\u003E\u003Cbr\u003E        // Let the latest version of the checker show the warning.\u003Cbr\u003E        if (_version != fields.Max(f =\u0026gt; (int)f.GetValue(null))) { return; }\u003Cbr\u003E\u003Cbr\u003E        bool done =\u003Cbr\u003E            fields\u003Cbr\u003E            .Select(f =\u0026gt; f.DeclaringType)\u003Cbr\u003E            .Select(t =\u0026gt; t.GetField(\u0022_ran\u0022, BindingFlags.Static | BindingFlags.NonPublic))\u003Cbr\u003E            .Where(f =\u0026gt; f != null)\u003Cbr\u003E            .Where(f =\u0026gt; f.FieldType == typeof(bool))\u003Cbr\u003E            .Any(f =\u0026gt; (bool)f.GetValue(null));\u003Cbr\u003E\u003Cbr\u003E        // Only run the UI checker once.\u003Cbr\u003E        if (done) { return; }\u003Cbr\u003E\u003Cbr\u003E        _ran = true;\u003Cbr\u003E\u003Cbr\u003E        String[] incompatible =\u003Cbr\u003E            fields\u003Cbr\u003E            .Select(f =\u0026gt; f.DeclaringType)\u003Cbr\u003E            .Select(t =\u0026gt; t.GetMethod(\u0022IsCompatible\u0022, Type.EmptyTypes))\u003Cbr\u003E            .Where(m =\u0026gt; m.IsStatic)\u003Cbr\u003E            .Where(m =\u0026gt; m.ReturnType == typeof(bool))\u003Cbr\u003E            .Where(m =\u0026gt; !(bool)m.Invoke(null, new object[0]))\u003Cbr\u003E            .Select(m =\u0026gt; m.DeclaringType)\u003Cbr\u003E            .Select(t =\u0026gt; t.Assembly)\u003Cbr\u003E            .Select(a =\u0026gt; a.GetName().Name)\u003Cbr\u003E            .ToArray();\u003Cbr\u003E\u003Cbr\u003E        Array.Sort(incompatible);\u003Cbr\u003E\u003Cbr\u003E        UnityEngine.Debug.LogWarning(\u0022[CompatibilityChecker] Checker running from \u0022 \u002B Assembly.GetExecutingAssembly().GetName().Name);\u003Cbr\u003E        UnityEngine.Debug.LogWarning(\u0022[CompatibilityChecker] Incompatible mods: \u0022 \u002B String.Join(\u0022, \u0022, incompatible));\u003Cbr\u003E\u003Cbr\u003E        PopupDialog.SpawnPopupDialog(\u0022Incompatible Mods Disabled\u0022, \u0022Some installed mods are incompatible with this version of Kerbal Space Program and have been disabled. Please check for updates to the following mods:\\n\\n\u0022 \u002B String.Join(\u0022\\n\u0022, incompatible), \u0022OK\u0022, false, HighLogic.Skin);\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    private static IEnumerable\u0026lt;Type\u0026gt; getAllTypes()\u003Cbr\u003E    {\u003Cbr\u003E        foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())\u003Cbr\u003E        {\u003Cbr\u003E            Type[] types;\u003Cbr\u003E            try\u003Cbr\u003E            {\u003Cbr\u003E                types = assembly.GetTypes();\u003Cbr\u003E            }\u003Cbr\u003E            catch (Exception)\u003Cbr\u003E            {\u003Cbr\u003E                types = Type.EmptyTypes;\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E            foreach (var type in types)\u003Cbr\u003E            {\u003Cbr\u003E                yield return type;\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"draeath","CreatedById":25709,"CreatedDateTime":"2014-01-10T03:57:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ferram4\u0022 data-cite=\u0022ferram4\u0022\u003E\u003Cdiv\u003EYou do realize that all you need to compile code for a KSP mod is Visual Studio, have the project reference Assembly-CSharp.dll and UnityEngine.dll in KSP_Data/Managed, and compile the dll, right? All you need is a C# compiler, which isn\u0027t hard to find.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes (though the dll specifics I did not, as I\u0027ve not done plugin development myself), though I find requiring someone to install MS Visual Studio to be unacceptable.\u003C/p\u003E\u003Cp\u003EFor one, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Linux\u0022 rel=\u0022external nofollow\u0022\u003Ethey may not even be able to do so!\u003C/a\u003E To say nothing of the bloat required for one little thing. It would be different if they had it around for other uses, but you have to admit that installing such a thing to even \u003Cem\u003Etest\u003C/em\u003E if a mod behaves correctly on a \u0022nonsupported\u0022 version is a bit much... from MS, VS2012 requires 10gb for the base install plus another 600mb per language pack.\u003C/p\u003E\u003Cp\u003ECompare that to just a few config values, such as:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPROTECT_ME_FROM_MYSELF\u003Cbr\u003E{\u003Cbr\u003E    // if you touch these, NO SUPPORT FOR YOU\u003Cbr\u003E    // seriously, if you complain after changing these\u003Cbr\u003E    // we will publically ridicule and ostracize you endlessly.\u003Cbr\u003E    ignore_ksp_version = 0\u003Cbr\u003E    i_know_what_i_am_doing = 0\u003Cbr\u003E    seriously_i_really_do = 0\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENo matter what you do, you\u0027re not going to be able to get rid of any idiots that remain after that. They will find a way to annoy you. Trust me.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-01-10T04:01:27Z\u0022 title=\u002201/10/2014 04:01  AM\u0022 data-short=\u002210 yr\u0022\u003EJanuary 10, 2014\u003C/time\u003E by draeath\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-01-10T03:57:28Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@Majiir: \u003C/strong\u003EThat looks really cool Majiir. Only thing I\u0027d suggest is that the window\u0027s title say, \u0022Incompatible Mods \u003Cem\u003EDetected\u003C/em\u003E\u0022 and mention in the pop up that there may be side-effects of leaving the code available.\u003C/p\u003E\u003Cp\u003EOther than that, I\u0027m not sure exactly how I would implement that code into a mod; would I simply copy the compatibility checker code over into the FAR source, add my disabling code to it, and it would work (in the final release)?\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E@draeath: \u003C/strong\u003EThen they can use MonoDevelop instead; ultimately, trying to force a plugin to run with a possibly incompatible version of the underlying software falls more into \u0022software development\u0022 than simple user stuff. And I\u0027d rather not set the bar so low that it can be circumvented using a change to a config somewhere, since that defeats the purpose of this.\u003C/p\u003E\u003Cp\u003EI can see exactly how your config option will play out:\u003C/p\u003E\u003Cp\u003ESome people will disable the check, and that will be fine. Others will download a \u0022special\u0022 config from someone else that \u0022makes \u0026lt;MODNAME\u0026gt; work in KSP \u0026lt;VERSION\u0026gt;\u0022\u0022 without knowing what it does. Then they get issues, they complain and then get super, super pissed when the modder doesn\u0027t provide support for them, after all, \u003Cem\u003Ethey\u003C/em\u003E didn\u0027t change anything. No one will blame the 3rd party source of the config, they\u0027ll blame me. For giving them the option to disable the check.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-01-10T04:12:49Z\u0022 title=\u002201/10/2014 04:12  AM\u0022 data-short=\u002210 yr\u0022\u003EJanuary 10, 2014\u003C/time\u003E by ferram4\u003C/strong\u003E\n\u003Cbr\u003Eaddressing draeath\u0026#039;s additional points\n\u003C/span\u003E\n"},{"CreatedByName":"Majiir","CreatedById":7550,"CreatedDateTime":"2014-01-10T04:09:19Z","Content":"\n\u003Cp\u003EI am also a big fan of tamper-proofing the system to the point that recompiling is the only option.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ferram4\u0022 data-cite=\u0022ferram4\u0022\u003E\u003Cdiv\u003EThat looks really cool Majiir. Only thing I\u0027d suggest is that the window\u0027s title say, \u0022Incompatible Mods \u003Cem\u003EDetected\u003C/em\u003E\u0022 and mention in the pop up that there may be side-effects of leaving the code available.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat do you mean by that last bit? That some parts of the mod might not be properly disabled, or that the mod should be uninstalled? (Both?)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ferram4\u0022 data-cite=\u0022ferram4\u0022\u003E\u003Cdiv\u003EOther than that, I\u0027m not sure exactly how I would implement that code into a mod; would I simply copy the compatibility checker code over into the FAR source, add my disabling code to it, and it would work (in the final release)?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou copy/paste, fill in your implementation of IsCompatible (which should check the current KSP version against a known working version, or check a webserver, or do \u003Cem\u003Esomething\u003C/em\u003E) and also write your own code to disable features in the event IsCompatible returns false. Note that you can do this at any time. If your mod runs some tasks earlier than the main menu, you could check IsCompatible early on to enable/disable features and then the warning will appear in the main menu.\u003C/p\u003E\n"},{"CreatedByName":"draeath","CreatedById":25709,"CreatedDateTime":"2014-01-10T04:12:38Z","Content":"\n\u003Cp\u003EFair enough, you guys are the bigshot plugin developers, I only get to watch from the sidelines \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E Just offering my opinion on it. As stated, I really like the idea at the core, just disagree with how far you want to take it.\u003C/p\u003E\n"},{"CreatedByName":"Majiir","CreatedById":7550,"CreatedDateTime":"2014-01-10T04:19:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022draeath\u0022 data-cite=\u0022draeath\u0022\u003E\u003Cdiv\u003EFair enough, you guys are the bigshot plugin developers, I only get to watch from the sidelines \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E Just offering my opinion on it. As stated, I really like the idea at the core, just disagree with how far you want to take it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI release updates within \u003Cem\u003Eminutes\u003C/em\u003E of new KSP releases, and yet I still get weeks of support requests because people are running an old version. Some people insist on doing it because they don\u0027t like a new change or they want to maintain compatibility with something else\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u20ACbut, of course, they demand I fix the problems it causes. Nobody is advocating that \u003Cem\u003Eevery\u003C/em\u003E mod implement the greatest possible restrictions, and every mod can implement details like disabling and version checking slightly differently.\u003C/p\u003E\u003Cp\u003EThe reason a single implementation is useful is it allows for a UI like the one I posted. It looks like KSP itself is detecting mod issues and disabling them. I did something similar for Kethane months ago when I had a flood of issues from people installing it into the wrong folder:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i4.minus.com/ibmfHR4W4LzlMg.png\u0022 alt=\u0022ibmfHR4W4LzlMg.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EMost users seem to think that KSP, not Kethane, is displaying this warning. It\u0027s a subtle but powerful way to give some authority to the message.\u003C/p\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-01-10T04:22:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Majiir\u0022 data-cite=\u0022Majiir\u0022\u003E\u003Cdiv\u003EWhat do you mean by that last bit? That some parts of the mod might not be properly disabled, or that the mod should be uninstalled? (Both?)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMostly the first one, with the suggestion of the second. For example, ModuleManager will likely still run even if FAR is disabled; since FAR needs the wing aero parameters applied by ModuleManager, it will break the stock wings completely.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EYou copy/paste, fill in your implementation of IsCompatible (which should check the current KSP version against a known working version, or check a webserver, or do \u003Cem\u003Esomething\u003C/em\u003E) and also write your own code to disable features in the event IsCompatible returns false. Note that you can do this at any time. If your mod runs some tasks earlier than the main menu, you could check IsCompatible early on to enable/disable features and then the warning will appear in the main menu.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay then, just making sure. This seems like the kind of system that can easily break \u003Cem\u003Eeverything\u003C/em\u003E if implemented wrong.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022draeath\u0022 data-cite=\u0022draeath\u0022\u003E\u003Cdiv\u003EFair enough, you guys are the bigshot plugin developers, I only get to watch from the sidelines \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E Just offering my opinion on it. As stated, I really like the idea at the core, just disagree with how far you want to take it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou make good points, but IMO the options you want simply allow the existing problem to continue, or worse, for an unsuspecting user to get a 3rd party config that \u0022fixes\u0022 the compatibility check problem, but leads them into the actual compatibility problems, and then they get angry because they don\u0027t get support due to the changes to their config file. It adds the possibility for modder-mod users relations to go really, really far south just after an update, particularly for something like MJ or RemoteTech, which need quite a few changes to maintain compatibility every update.\u003C/p\u003E\n"}]}