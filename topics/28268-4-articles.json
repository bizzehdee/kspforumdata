{"TopicId":28268,"ForumId":34,"TopicTitle":"[0.20] Subassembly Loader - 0.20 Compatibility Patch","CreatedByName":"TheUndeadFish","CreatedById":67157,"CreatedDateTime":"2013-05-23T01:22:36Z","PageNum":4,"Articles":[{"CreatedByName":"damien667","CreatedById":68973,"CreatedDateTime":"2013-06-02T08:45:41Z","Content":"\n\u003Cp\u003EI made my own patch that uses relative position instead of absolute for the icon (on my screen it gets places immediately to the left of Part editor toggle button), and I also fixed the subdirectory/category loading/saving features since they weren\u0027t working for me in linux (tested only in linux as well).\u003C/p\u003E\u003Cp\u003EHere is the diff:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E--- Source/subassemblyLoader.cs\t2013-06-02 03:30:48.409197029 -0500\u003Cbr\u003E\u002B\u002B\u002B SubassemblyLoader/SubassemblyLoader/SubAssemlyLoader.cs\t2013-06-02 03:31:39.285196251 -0500\u003Cbr\u003E@@ -1,30 \u002B1,32 @@\u003Cbr\u003E-\u00C3\u00AF\u00C2\u00BB\u00C2\u00BF//v0.2\u003Cbr\u003E\u002B\u00C3\u00AF\u00C2\u00BB\u00C2\u00BF\u00C3\u00AF\u00C2\u00BB\u00C2\u00BF//v0.2\u003Cbr\u003E using System;\u003Cbr\u003E using KSP.IO;\u003Cbr\u003E using UnityEngine;\u003Cbr\u003E using System.Collections;\u003Cbr\u003E using System.Collections.Generic;\u003Cbr\u003E\u003Cbr\u003E\u002B[KSPAddon(KSPAddon.Startup.EditorAny, false)]\u003Cbr\u003E public class subassemblyLoader : MonoBehaviour\u003Cbr\u003E {\u003Cbr\u003E \tpublic static GameObject GameObjectInstance;\u003Cbr\u003E-\tprivate static PluginConfiguration config = PluginConfiguration.CreateForType\u0026lt;subassemblyLoader\u0026gt; ();\u003Cbr\u003E \tprivate static string root = KSPUtil.ApplicationRootPath.Replace (\u0022\\\\\u0022, \u0022/\u0022);\u003Cbr\u003E-\tprivate static string subassemblyFolder = \u0022PluginData/subassemblyLoader/subassemblies\u0022;\u003Cbr\u003E\u002B\tprivate static string subassemblyFolder = \u0022GameData/SubassemblyLoader/PluginData/subassemblies\u0022;\u003Cbr\u003E\u002B\tprivate static string iconsFolder = \u0022GameData/SubassemblyLoader/PluginData/icons\u0022;\u003Cbr\u003E \tprivate string subassemblyFilename = \u0022Untitled\u0022;\u003Cbr\u003E \tprivate string subassemblyType = \u0022\u0022;\u003Cbr\u003E \tprivate string subassemblyFolderName = root \u002B subassemblyFolder;\u003Cbr\u003E\u002B\tprivate static string iconsFolderName = root \u002B iconsFolder;\u003Cbr\u003E \tprivate bool showFilenamePrompt;\u003Cbr\u003E \tprivate bool isAttachable = true;\u003Cbr\u003E \tprivate FileBrowser fileBrowser;\u003Cbr\u003E \tprivate GUIStyle buttonStyle = new GUIStyle ();\u003Cbr\u003E\u003Cbr\u003E \t// Load static button images\u003Cbr\u003E-\tprivate WWW img1 = new WWW (\u0022file://\u0022 \u002B root \u002B \u0022PluginData/subassemblyLoader/icons/buttonDisabled.png\u0022);\u003Cbr\u003E-\tprivate WWW img2 = new WWW (\u0022file://\u0022 \u002B root \u002B \u0022PluginData/subassemblyLoader/icons/buttonInactive.png\u0022);\u003Cbr\u003E-\tprivate WWW img3 = new WWW (\u0022file://\u0022 \u002B root \u002B \u0022PluginData/subassemblyLoader/icons/buttonHover.png\u0022);\u003Cbr\u003E-\tprivate WWW img4 = new WWW (\u0022file://\u0022 \u002B root \u002B \u0022PluginData/subassemblyLoader/icons/file.png\u0022);\u003Cbr\u003E-\tprivate WWW img5 = new WWW (\u0022file://\u0022 \u002B root \u002B \u0022PluginData/subassemblyLoader/icons/folder.png\u0022);\u003Cbr\u003E\u002B\tprivate WWW img1 = new WWW (\u0022file://\u0022 \u002B iconsFolderName \u002B \u0022/buttonDisabled.png\u0022);\u003Cbr\u003E\u002B\tprivate WWW img2 = new WWW (\u0022file://\u0022 \u002B iconsFolderName \u002B \u0022/buttonInactive.png\u0022);\u003Cbr\u003E\u002B\tprivate WWW img3 = new WWW (\u0022file://\u0022 \u002B iconsFolderName \u002B \u0022/buttonHover.png\u0022);\u003Cbr\u003E\u002B\tprivate WWW img4 = new WWW (\u0022file://\u0022 \u002B iconsFolderName \u002B \u0022/file.png\u0022);\u003Cbr\u003E\u002B\tprivate WWW img5 = new WWW (\u0022file://\u0022 \u002B iconsFolderName \u002B \u0022/folder.png\u0022);\u003Cbr\u003E \tprivate Texture2D buttonDisabled = new Texture2D (0, 0);\u003Cbr\u003E \tprivate Texture2D buttonInactive = new Texture2D (0, 0);\u003Cbr\u003E \tprivate Texture2D buttonHover = new Texture2D (0, 0);\u003Cbr\u003E@@ -33,7 \u002B35,7 @@\u003Cbr\u003E \tprivate Texture2D button;\u003Cbr\u003E\u003Cbr\u003E \tpublic void Awake ()\u003Cbr\u003E-\t{\u003Cbr\u003E\u002B\t{\t\t\u003Cbr\u003E \t\tDontDestroyOnLoad (this);\u003Cbr\u003E\u003Cbr\u003E \t\t// Save static button images to textures\u003Cbr\u003E@@ -70,15 \u002B72,28 @@\u003Cbr\u003E\u003Cbr\u003E \tpublic void loadSubassembly (string filename)\u003Cbr\u003E \t{\u003Cbr\u003E\u002B\t\tDebug.Log (\u0022loadSubassembly\u0022);\u003Cbr\u003E\u002B\t\t\u003Cbr\u003E \t\tEditorLogic editor = EditorLogic.fetch;\u003Cbr\u003E-\u003Cbr\u003E\u002B\t\t\u003Cbr\u003E\u002B\t\tif (filename == null) {\u003Cbr\u003E\u002B\t\t\t//Close Subassembly Browser\u003Cbr\u003E\u002B\t\t\tfileBrowser = null;\u003Cbr\u003E\u002B\t\t\teditor.Unlock ();\u003Cbr\u003E\u002B\t\t\treturn;\u003Cbr\u003E\u002B\t\t}\u003Cbr\u003E\u002B\t\t\u003Cbr\u003E\u002B\t\tif (!filename.Substring (filename.LastIndexOf (\u0022/\u0022), (filename.Length - filename.LastIndexOf (\u0022/\u0022))).Contains (\u0022.craft\u0022)) {\u003Cbr\u003E\u002B\t\t\tsubassemblyFolderName = filename;\t\t\t\u003Cbr\u003E\u002B\t\t\tsubassemblyType = subassemblyFolderName.Substring (subassemblyFolderName.LastIndexOf (\u0027/\u0027), (subassemblyFolderName.Length - subassemblyFolderName.LastIndexOf (\u0027/\u0027)));\u003Cbr\u003E\u002B\t\t\tfileBrowser.CurrentDirectory = subassemblyFolderName;\u003Cbr\u003E\u002B\t\t\treturn;\u003Cbr\u003E\u002B\t\t}\u003Cbr\u003E\u002B\t\t\u003Cbr\u003E \t\t//Close Subassembly Browser\u003Cbr\u003E \t\tfileBrowser = null;\u003Cbr\u003E-\t\teditor.Unlock (); \u003Cbr\u003E\u002B\t\teditor.Unlock ();\t\t\u003Cbr\u003E\u003Cbr\u003E-\t\tif (filename == null)\u003Cbr\u003E-\t\t\treturn;\u003Cbr\u003E-\u003Cbr\u003E \t\t// Get current root, load subassembly construct, reset root\u003Cbr\u003E \t\tPart shipRoot = EditorLogic.startPod;\u003Cbr\u003E \t\tShipConstruct subassemblyConstruct = ShipConstruction.LoadShip (filename);\u003Cbr\u003E@@ -92,6 \u002B107,15 @@\u003Cbr\u003E \t\t// Check new construct is attachable\u003Cbr\u003E \t\tcheckAttachable (editor.PartSelected);\u003Cbr\u003E \t}\u003Cbr\u003E\u002B\t\u003Cbr\u003E\u002B\tpublic void changeCategory (string category)\u003Cbr\u003E\u002B\t{\u003Cbr\u003E\u002B\t\tif (category != null) {\t\t\t\u003Cbr\u003E\u002B\t\t\tsubassemblyFolderName = category;\t\t\t\u003Cbr\u003E\u002B\t\t\tsubassemblyType = subassemblyFolderName.Substring (subassemblyFolderName.LastIndexOf (\u0027/\u0027), (subassemblyFolderName.Length - subassemblyFolderName.LastIndexOf (\u0027/\u0027)));\u003Cbr\u003E\u002B\t\t}\u003Cbr\u003E\u002B\t\tfileBrowser = null;\u003Cbr\u003E\u002B\t}\u003Cbr\u003E\u003Cbr\u003E \t// Check if part is attachable\u003Cbr\u003E \tprivate bool checkAttachable (Part part)\u003Cbr\u003E@@ -129,7 \u002B153,7 @@\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E \t\t// Draw top menu button\u003Cbr\u003E-\t\tif (GUI.Button (new Rect (Screen.width - 300, 1, 48, 36), new GUIContent (button, \u0022Subassembly\u0022), buttonStyle) \u0026amp;\u0026amp; !EditorLogic.softLock)\u003Cbr\u003E\u002B\t\tif (GUI.Button (new Rect (Screen.width - 800, 1, 48, 36), new GUIContent (button, \u0022Subassembly\u0022), buttonStyle) \u0026amp;\u0026amp; !EditorLogic.softLock)\u003Cbr\u003E \t\tif (EditorLogic.SelectedPart) {\u003Cbr\u003E \t\t\tif (checkAttachable (EditorLogic.SelectedPart))\u003Cbr\u003E \t\t\t\tshowFilenamePrompt = true;\u003Cbr\u003E@@ -163,10 \u002B187,15 @@\u003Cbr\u003E \t\t\tfileBrowser.OnGUI ();\u003Cbr\u003E\u003Cbr\u003E \t\t\t// Draw \u0022Up\u0022 button (if applicable)\u003Cbr\u003E-\t\t\tif (current != root \u002B subassemblyFolder)\u003Cbr\u003E-\t\t\tif (GUI.Button (new Rect (Screen.width / 2 \u002B 190, 562, 40, 30), \u0022/..\u0022))\u003Cbr\u003E-\t\t\t\tfileBrowser.CurrentDirectory = current.Substring (0, current.LastIndexOf (\u0027/\u0027));\u003Cbr\u003E-\u003Cbr\u003E\u002B\t\t\tif (current != root \u002B subassemblyFolder) {\u003Cbr\u003E\u002B\t\t\t\tfileBrowser.BrowserType = FileBrowserType.File;\t\t\t\t\u003Cbr\u003E\u002B\t\t\t\tif (GUI.Button (new Rect (Screen.width / 2 \u002B 190, 562, 40, 30), \u0022/..\u0022)) {\u003Cbr\u003E\u002B\t\t\t\t\tfileBrowser.CurrentDirectory = current.Substring (0, current.LastIndexOf (\u0027/\u0027));\u003Cbr\u003E\u002B\t\t\t\t}\u003Cbr\u003E\u002B\t\t\t}\u003Cbr\u003E\u002B\t\t\telse {\u003Cbr\u003E\u002B\t\t\t\tfileBrowser.BrowserType = FileBrowserType.Directory;\t\t\t\t\u003Cbr\u003E\u002B\t\t\t}\u003Cbr\u003E \t\t\t// Reset Skin\u003Cbr\u003E \t\t\tlist.normal.textColor = new Color (.739f, 0.739f, 0.739f);\u003Cbr\u003E \t\t\tlist.contentOffset = new Vector2 (1, 42.4f);\u003Cbr\u003E@@ -198,10 \u002B227,9 @@\u003Cbr\u003E \t\t// Category button\u003Cbr\u003E \t\tGUILayout.BeginHorizontal (); \u003Cbr\u003E \t\tGUILayout.Label (\u0022Category:\u0022, GUILayout.Width (75));\u003Cbr\u003E-\t\tif (GUILayout.Button (subassemblyType == \u0022\u0022 ? \u0022Miscellaneous\u0022 : subassemblyType))\u003Cbr\u003E-\t\t\tcreateFileBrowser (\u0022Select subassembly category\u0022, true, (string filename) =\u0026gt; {\u003Cbr\u003E-\t\t\t\tsubassemblyFolderName = fileBrowser.CurrentDirectory;\u003Cbr\u003E-\t\t\t\tfileBrowser = null; });\u003Cbr\u003E\u002B\t\tif (GUILayout.Button (subassemblyType == \u0022\u0022 ? \u0022Miscellaneous\u0022 : subassemblyType)) {\u003Cbr\u003E\u002B\t\t\tcreateFileBrowser (\u0022Select subassembly category\u0022, true, changeCategory);\u003Cbr\u003E\u002B\t\t}\u003Cbr\u003E \t\tGUILayout.EndHorizontal ();\u003Cbr\u003E\u003Cbr\u003E \t\t// Ok / Cancel buttons\u003Cbr\u003E@@ -237,21 \u002B265,19 @@\u003Cbr\u003E \tprivate void createFileBrowser (string title, bool isDir, FileBrowser.FinishedCallback callback)\u003Cbr\u003E \t{\u003Cbr\u003E \t\tfileBrowser = new FileBrowser (new Rect (Screen.width / 2, 100, 350, 500), title, callback, true);\u003Cbr\u003E-\t\tfileBrowser.BrowserType = isDir ? FileBrowserType.Directory : FileBrowserType.File;\u003Cbr\u003E\u002B\t\tfileBrowser.BrowserType = FileBrowserType.Directory;//isDir ? FileBrowserType.Directory : FileBrowserType.File;\u003Cbr\u003E \t\tfileBrowser.CurrentDirectory = root \u002B subassemblyFolder;\u003Cbr\u003E \t\tfileBrowser.FileImage = fileIcon;\u003Cbr\u003E \t\tfileBrowser.DirectoryImage = folderIcon;\u003Cbr\u003E \t\tfileBrowser.disallowDirectoryChange = true;\u003Cbr\u003E-\t\tif (!isDir)\u003Cbr\u003E-\t\t\tfileBrowser.SelectionPattern = \u0022*.craft\u0022;\u003Cbr\u003E \t}\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E-public class subassemblyLoaderInit : KSP.Testing.UnitTest\u003Cbr\u003E\u002Bpublic class subassemblyLoaderInit\u003Cbr\u003E {\u003Cbr\u003E \tpublic subassemblyLoaderInit ()\u003Cbr\u003E \t{\u003Cbr\u003E \t\tvar gameobject = new GameObject (\u0022subassemblyLoader\u0022, typeof(subassemblyLoader));\u003Cbr\u003E \t\tUnityEngine.Object.DontDestroyOnLoad (gameobject);\u003Cbr\u003E \t}\u003Cbr\u003E-}\u003Cbr\u003E\u002B}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EMy directory structure for the plugin is now:\u003C/p\u003E\u003Cp\u003EKSP/GameData/SubassemblyLoader\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EPluginData\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003Eicons\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003EbuttonDisabled.png\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003EbuttonHover.png\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003EbuttonInactive.png\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003Efile.png\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003Efolder.png\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Esubassemblies\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003ELanders\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003Cdiv\u003E2 Stage.craft\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003ELifters\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003Cdiv\u003EExample.craft\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003EProbes\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003Cdiv\u003ESmall Probe.craft\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EPlugins\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cdiv\u003ESubassemblyLoader.dll\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf anyone wants the .dll I can upload it on a share site somewhere I\u0027m sure... I used MonoDevelop on Ubuntu 12.04 x86_64, and it works like a charm for me now :-)\u003C/p\u003E\n"},{"CreatedByName":"masterdisaster","CreatedById":69043,"CreatedDateTime":"2013-06-02T20:23:29Z","Content":"\n\u003Cp\u003EI have applied damien667\u0027s patch successfully (although the mangled whitespace forced me to do it manually) and can confirm that it works on Arch Linux 64bit and fixes the annoying can\u0027t-use-subdirectories issue.\u003C/p\u003E\u003Cp\u003EHere\u0027s the zip file hosted on Dropbox: \u003C/p\u003E\u003Cp\u003EThe updated source is inside the zip just like original.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003ERemeber, unpack this directly into GameData folder just like explained above !!!\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-23T21:44:38Z\u0022 title=\u002206/23/2013 09:44  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 23, 2013\u003C/time\u003E by sal_vager\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"masterdisaster","CreatedById":69043,"CreatedDateTime":"2013-06-02T20:31:42Z","Content":"\n\u003Cp\u003EEDIT: Sorry, double post.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-02T21:16:05Z\u0022 title=\u002206/02/2013 09:16  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 2, 2013\u003C/time\u003E by masterdisaster\u003C/strong\u003E\n\u003Cbr\u003EDidn\u0026#039;t notice moderation in effect and double posted as a result.\n\u003C/span\u003E\n"},{"CreatedByName":"damien667","CreatedById":68973,"CreatedDateTime":"2013-06-02T21:50:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022masterdisaster\u0022 data-cite=\u0022masterdisaster\u0022\u003E\u003Cdiv\u003EI have applied damien667\u0027s patch successfully (although the mangled whitespace forced me to do it manually) and can confirm that it works on Arch Linux 64bit and fixes the annoying can\u0027t-use-subdirectories issue.\u003Cp\u003EHere\u0027s the zip file hosted on Dropbox:\u003C/p\u003E\u003Cp\u003EThe updated source is inside the zip just like original.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003ERemeber, unpack this directly into GameData folder just like explained above !!!\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah... MonoDevelop auto-format did its miracle on whitespace... Sorry about the inconsistency with original code. Glad it works for you too :-)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-23T21:44:46Z\u0022 title=\u002206/23/2013 09:44  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 23, 2013\u003C/time\u003E by sal_vager\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NeoMorph","CreatedById":58200,"CreatedDateTime":"2013-06-04T11:40:56Z","Content":"\n\u003Cp\u003EI\u0027ve messing with the code and for some reason it just doesn\u0027t want to save the subassemblies now. It crashes on this line...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E Part[] children = selected.FindChildParts\u0026lt;Part\u0026gt;(true);\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe debug monitor says this... \u003Cimg src=\u0022http://i.imgur.com/gNKfwbB.png\u0022 alt=\u0022gNKfwbB.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe code in the dll is this (I put the debug messages in to see which like caused the problem)...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E public void saveSubassembly(string filename)\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E Debug.Log(\u0022Woooot\u0022);\u003C/p\u003E\u003Cp\u003E //Close Filename Prompt\u003C/p\u003E\u003Cp\u003E showFilenamePrompt = false;\u003C/p\u003E\u003Cp\u003E EditorLogic.fetch.Unlock();\u003C/p\u003E\u003Cp\u003E Debug.Log(\u0022Step 2\u0022);\u003C/p\u003E\u003Cp\u003E // Create new construct\u003C/p\u003E\u003Cp\u003E ShipConstruct subassemblyConstruct = new ShipConstruct(1);\u003C/p\u003E\u003Cp\u003E subassemblyConstruct.shipName = filename;\u003C/p\u003E\u003Cp\u003E Debug.Log(\u0022Step 3\u0022);\u003C/p\u003E\u003Cp\u003E // Add selected part\u003C/p\u003E\u003Cp\u003E Part selected = EditorLogic.fetch.PartSelected;\u003C/p\u003E\u003Cp\u003E subassemblyConstruct.Add(selected);\u003C/p\u003E\u003Cp\u003E Debug.Log(\u0022Step 4\u0022);\u003C/p\u003E\u003Cp\u003E // Add selected part\u0027s children\u003C/p\u003E\u003Cp\u003E Part[] children = selected.FindChildParts\u0026lt;Part\u0026gt;(true);\u003C/p\u003E\u003Cp\u003E Debug.Log(\u0022Step 5\u0022);\u003C/p\u003E\u003Cp\u003E foreach (Part part in children) subassemblyConstruct.Add(part);\u003C/p\u003E\u003Cp\u003E // Save construct\u003C/p\u003E\u003Cp\u003E Debug.Log(\u0022../../../../\u0022 \u002B subassemblyFolder \u002B \u0027/\u0027 \u002B subassemblyType \u002B \u0027/\u0027 \u002B filename);\u003C/p\u003E\u003Cp\u003E ShipConstruction.SaveShip(subassemblyConstruct, \u0022../../../../\u0022 \u002B subassemblyFolder \u002B \u0027/\u0027 \u002B subassemblyType \u002B \u0027/\u0027 \u002B filename);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI just can\u0027t get my head around this at the moment. I can get all the types of subassemblies to show up and I can load them... I just can\u0027t get the darn thing to save lol.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/4rgOoJf.png\u0022 alt=\u00224rgOoJf.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-04T11:44:04Z\u0022 title=\u002206/04/2013 11:44  AM\u0022 data-short=\u002211 yr\u0022\u003EJune 4, 2013\u003C/time\u003E by NeoMorph\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kardea","CreatedById":68737,"CreatedDateTime":"2013-06-04T13:44:54Z","Content":"\n\u003Cp\u003EI could despareately use some help, as well. My problem is that, every time I load a subassembly, the bottom-most connection node is missing. For example:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://imgur.com/NZQWA7i.jpg\u0022 alt=\u0022NZQWA7i.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe small unplaced selection is a probe lander loaded from SubAssembly Loader. The bottom part is a normally-saved Lifter. Note that the only placement nodes that exist are on the lifter and the \u003Cem\u003Etop\u003C/em\u003E of the subassembly... but not the bottom. No matter how many parts I replace, and no matter what part I make the \u0022root\u0022 of the subassembly, the \u0022bottom\u0022 node is \u003Cem\u003Ealways\u003C/em\u003E gone. The top is always fine, the bottom is always gone. I can flip that probe lander upside down and it works fine... but that\u0027s not my intention here. Anyone else having this issue?\u003C/p\u003E\n"},{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2013-06-04T13:53:01Z","Content":"\n\u003Cp\u003E@Kardea Does it help to flip the probe upside down, paste it to the rocket, then pick it up again, flip it in the correct position and then paste it again? I\u0027ve also seen nodes missing but they were restored once the subassembly was attached to the rocket. A bit inconvenient but you can work around it.\u003C/p\u003E\n"},{"CreatedByName":"Kardea","CreatedById":68737,"CreatedDateTime":"2013-06-04T13:55:03Z","Content":"\n\u003Cp\u003EUnfortunately, no. I \u003Cem\u003Ecan\u003C/em\u003E attach the subassembly upside-down, but it doesn\u0027t restore the missing node.\u003C/p\u003E\n"},{"CreatedByName":"NeoMorph","CreatedById":58200,"CreatedDateTime":"2013-06-04T14:12:02Z","Content":"\n\u003Cp\u003EI have to admit that I have zero experience in coding with Unity. Is there a manual available anywhere?\u003C/p\u003E\n"},{"CreatedByName":"Kardea","CreatedById":68737,"CreatedDateTime":"2013-06-04T14:44:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeoMorph\u0022 data-cite=\u0022NeoMorph\u0022\u003E\u003Cdiv\u003EI have to admit that I have zero experience in coding with Unity. Is there a manual available anywhere?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you actually fix Subassembly Loader, you\u0027re crowned king of KSP. You know that, right?\u003C/p\u003E\n"},{"CreatedByName":"NeoMorph","CreatedById":58200,"CreatedDateTime":"2013-06-04T15:48:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kardea\u0022 data-cite=\u0022Kardea\u0022\u003E\u003Cdiv\u003EIf you actually fix Subassembly Loader, you\u0027re crowned king of KSP. You know that, right?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell it\u0027s not going to be me fixing it. I have ZERO knowledge of Unity and with my morphine addled brain I have zero chance of learning it. It\u0027s the one reason I had to pack in work being a programmer. I just cannot retain language skills anymore.\u003C/p\u003E\u003Cp\u003EWhat\u0027s worse is that I cannot figure out what the problem is with the save code. If that could be fixed then the whole thing would be working fine. If you read some of the comments in this mod you would know that the coder hates Unity too. Like this for instance...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E// The rest of this entire file a giant cluster*BLEEEP*of kludges upon hacks in order to get a working file browser despite KSP.IOs total lack of directory methods.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe real annoying thing is that it was working perfectly in 0.19.\u003C/p\u003E\n"},{"CreatedByName":"g_audio","CreatedById":59063,"CreatedDateTime":"2013-06-04T15:52:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kardea\u0022 data-cite=\u0022Kardea\u0022\u003E\u003Cdiv\u003EUnfortunately, no. I \u003Cem\u003Ecan\u003C/em\u003E attach the subassembly upside-down, but it doesn\u0027t restore the missing node.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat if you remove the offending piece and attach a new one after placing it upside down? You probably already tried that though.\u003C/p\u003E\n"},{"CreatedByName":"NeoMorph","CreatedById":58200,"CreatedDateTime":"2013-06-04T16:05:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022g_audio\u0022 data-cite=\u0022g_audio\u0022\u003E\u003Cdiv\u003EWhat if you remove the offending piece and attach a new one after placing it upside down? You probably already tried that though.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI doubt if he can... Remember you cannot split apart that group until it is connected to the root... and he can\u0027t connect it to the root because the node is missing. Catch-22 situation.\u003C/p\u003E\n"},{"CreatedByName":"NeoMorph","CreatedById":58200,"CreatedDateTime":"2013-06-05T07:24:15Z","Content":"\n\u003Cp\u003EWell this is strange... I was using the wrong source code to base my work on. Made some changes with the current source code and it works well now (thanks UndeadFish).\u003C/p\u003E\u003Cp\u003EOne thing I have noticed though is that there used to be a delete button to delete messed up subassemblies but the button isn\u0027t there now. Other than that, the thing works well and now lets me put my subassemblies into categories correctly.\u003C/p\u003E\n"},{"CreatedByName":"Pontiac","CreatedById":62216,"CreatedDateTime":"2013-06-05T07:57:15Z","Content":"\n\u003Cp\u003E@Kardea\u003C/p\u003E\u003Cp\u003EI think you may have to redo your probe. You can put something inside the decoupler, and sometimes this causes the attachment system to break. What I would suggest is get a small capsule, or control pod, drop your probe on whichever way possible, remove the decoupler, and put it back on, and re-save the probe.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-05T08:01:11Z\u0022 title=\u002206/05/2013 08:01  AM\u0022 data-short=\u002211 yr\u0022\u003EJune 5, 2013\u003C/time\u003E by Pontiac\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2013-06-05T18:01:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kardea\u0022 data-cite=\u0022Kardea\u0022\u003E\u003Cdiv\u003EI could despareately use some help, as well. My problem is that, every time I load a subassembly, the bottom-most connection node is missing. For example:\u003Cp\u003E\u003Cimg src=\u0022http://imgur.com/NZQWA7i.jpg\u0022 alt=\u0022NZQWA7i.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe small unplaced selection is a probe lander loaded from SubAssembly Loader. The bottom part is a normally-saved Lifter. Note that the only placement nodes that exist are on the lifter and the \u003Cem\u003Etop\u003C/em\u003E of the subassembly... but not the bottom. No matter how many parts I replace, and no matter what part I make the \u0022root\u0022 of the subassembly, the \u0022bottom\u0022 node is \u003Cem\u003Ealways\u003C/em\u003E gone. The top is always fine, the bottom is always gone. I can flip that probe lander upside down and it works fine... but that\u0027s not my intention here. Anyone else having this issue?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s actually just the way KSP works. If the root of your probe is at the top, then you can only grab it by the root, and you can only reattach it by the root. It works the same way with or without subassembly loader. subassembly loader just lets you save and load subassemblies into different rockets, but you can still only attach them to new rockets in the same way as they were attached to the old one. If the subassembly -is- the old rocket, it can only be attached by the root node, aka, the original command capsule or probe core. To get around this when making probes, consider building them attached to a main probe, and grabbing them from the attachment point to save in subassembly.\u003C/p\u003E\n"},{"CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2013-06-05T18:02:59Z","Content":"\n\u003Cp\u003ESo Subassembly loader isn\u0027t working for me anymore. Any time I load a subassembly, all of the parts appear in my VAB, but none of them are connected to each other, and I can only grab them one at a time. Furthermore after loading one, the VAB load interface breaks until I reload the game.\u003C/p\u003E\n"},{"CreatedByName":"Pontiac","CreatedById":62216,"CreatedDateTime":"2013-06-05T19:42:23Z","Content":"\n\u003Cp\u003EBy my own diagnosis, there is some kind of issue with with KSP in which how the assemblies are loaded. If the \u0022root\u0022 part you\u0027re saving isn\u0027t a command module (CM) (Manned or unmanned) things like your asparagus setup will break. What you do is you put a new CM down, doesn\u0027t matter which one, attach that new CM to the existing payload if there is one, attach your subassembly you want to save to the new command module, then drag the new CM to the subassembly icon and save as normal. When you load up an old assembly, attach your assembly to the new payload as per normal, but if you want to get rid of that new CM, take the assembly off the new CM, remove the extra CM, then reattach the assembly. Few extra steps, but I ain\u0027t wiring up 30 fuel lines.\u003C/p\u003E\u003Cp\u003EI didn\u0027t come up with this method, and I\u0027m not sure where that post is, but it does work as I have a very massive asparagus rocket that was misbehaving until I put a command module on.\u003C/p\u003E\u003Cp\u003EI\u0027ve looked at the code myself and tried reorganizing how the mod saves the data before I knew about the CM fix, but it didn\u0027t help. I\u0027ve specifically tried saving the fuel lines to the bottom of the assembly file, but it didn\u0027t work. I didn\u0027t try putting the pipes at the top of the file because that wouldn\u0027t make sense. The parts the fuel lines attach to possibly wouldn\u0027t exist yet, so, didn\u0027t drive down that line. Then I saw the suggestion with saving with a command module came along, it worked, so I stopped trying to fix it. Personally, I think its something to do with KSP handling either the load or the save, but I can\u0027t determine which is the problem. A diff between the two files (One without a command module, and one with) yields different physical positioning of each item, a new ID for each item, but the general order of each item matches. I attribute the change in physical positions because I\u0027m not that good at moving objects to the exact same place on the screen. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIts also unfortunate that there are several people with their fingers on this code trying to submit fixes. Everyone has their own version that they\u0027re using, and somewhere down the line, something broke. If you\u0027re interested in my version, you can grab it from one of my last posts in the \u0022official\u0022 forum. I\u0027m using it, because I deleted the code that deletes the assembly if you try to put a command module in the save that doesn\u0027t have an additional spot for an attachment. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Countrykris","CreatedById":65671,"CreatedDateTime":"2013-06-05T21:57:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Pontiac\u0022 data-cite=\u0022Pontiac\u0022\u003E\u003Cdiv\u003EIf you\u0027re interested in my version, you can grab it from one of my last posts in the \u0022official\u0022 forum.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat \u0022official\u0022 forum you talking a bought? Can\u0027t find where to get the fix you made.\u003C/p\u003E\n"},{"CreatedByName":"MR4Y","CreatedById":66897,"CreatedDateTime":"2013-06-05T22:46:11Z","Content":"\n\u003Cp\u003EI would ask for this buttong to be placed somehwere else. I play at 1024x600 windowed and the two left side buttons will certainly cover the subassembly loader button.\u003C/p\u003E\n"},{"CreatedByName":"Pontiac","CreatedById":62216,"CreatedDateTime":"2013-06-07T12:42:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Countrykris\u0022 data-cite=\u0022Countrykris\u0022\u003E\u003Cdiv\u003EWhat \u0022official\u0022 forum you talking a bought? Can\u0027t find where to get the fix you made.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/24882-Actions-on-the-Fly-Edit-your-action-groups-in-flight-mode?p=390403\u0026amp;viewfull=1#post390403\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/showthread.php/24882-Actions-on-the-Fly-Edit-your-action-groups-in-flight-mode?p=390403\u0026amp;viewfull=1#post390403\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"MmPMSFmM","CreatedById":56831,"CreatedDateTime":"2013-06-08T06:47:50Z","Content":"\n\u003Cp\u003EI have a little problem using the plugin:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/TM8e5L8.png\u0022 alt=\u0022TM8e5L8.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAll I see is the question mark in the corner.\u003C/p\u003E\n"},{"CreatedByName":"The Destroyer","CreatedById":36109,"CreatedDateTime":"2013-06-08T07:24:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MmPMSFmM\u0022 data-cite=\u0022MmPMSFmM\u0022\u003E\u003Cdiv\u003EI have a little problem using the plugin:\u003Cp\u003E\u003Cimg src=\u0022%C3%83%E2%80%9A%C3%82%C2%B3\u0022 alt=\u0022\u00C3\u201A\u00C2\u00B3\u0022\u003E\u003C/p\u003E\u003Cp\u003EAll I see is the question mark in the corner.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI got the same thing too- well, I had it at very high res, but anyway.\u003C/p\u003E\n"},{"CreatedByName":"rockbloodystar","CreatedById":59828,"CreatedDateTime":"2013-06-08T08:55:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheUndeadFish\u0022 data-cite=\u0022TheUndeadFish\u0022\u003E\u003Cdiv\u003EI didn\u0027t find a thread dedicated to the Subassembly Loader mod, so I had to create this one.\u003Cp\u003EUsing the source code provided along with the mod, I just made a patched version that will work with 0.20. This moves the button to a usable location in the VAB as well as eliminates the lag caused by the plugin not loading properly.\u003C/p\u003E\u003Cp\u003EI only intend this as a quick-and-dirty fix until the mod\u0027s author can release a proper updated version of it.\u003C/p\u003E\u003Cp\u003EDownload:\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003EDisclaimer: Use at your own risk, since I\u0027m rather new to KSP modding.\u003C/span\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo I just need this patch or the original as well - still having functionality issues.\u003C/p\u003E\u003Cp\u003ECheers.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-23T21:45:25Z\u0022 title=\u002206/23/2013 09:45  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 23, 2013\u003C/time\u003E by sal_vager\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"TheUndeadFish","CreatedById":67157,"CreatedDateTime":"2013-06-09T17:12:42Z","Content":"\n\u003Cp\u003EI\u0027ve just made a second version of my patch that moves the button to a better place for people playing the game at low resolutions. The original post has been updated with the details.\u003C/p\u003E\n"}]}