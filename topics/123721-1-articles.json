{"TopicId":123721,"ForumId":55,"TopicTitle":"Lets talk KSP and unity 5, based on other games that had made the conversion","CreatedByName":"fanelli","CreatedById":148148,"CreatedDateTime":"2015-10-25T00:08:53Z","PageNum":1,"Articles":[{"CreatedByName":"fanelli","CreatedById":148148,"CreatedDateTime":"2015-10-25T00:08:53Z","Content":"\n\u003Cp\u003ERight now a lot of unity 4 based games like KSP, are converting over to Unity 5; and the ones that have done this already you can get a good idea of the performance enhancements. I just want to say I\u0027m very hyped for the change. In some games (don\u0027t want to advertise) they have seen increases up to 400%!!! and are most likely just hype training it up.\u003C/p\u003E\u003Cp\u003EBut does anyone have some more concrete evidence or want to talk about their experience with playing games that have updated to unity 5?\u003C/p\u003E\u003Cp\u003Ethat way we can have a better idea of how it\u0027ll affect KSP.\u003C/p\u003E\n"},{"CreatedByName":"WalkingShadow89","CreatedById":108181,"CreatedDateTime":"2015-10-25T04:23:14Z","Content":"\n\u003Cp\u003EI read somewhere one of the devs said to expect around a 10-50% performance boost (sorry I don\u0027t have a source)\u003C/p\u003E\n"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2015-10-25T04:38:44Z","Content":"\n\u003Cp\u003EAll we can say for sure is what the devs are telling us. You can\u0027t really compare to other games, they are too different. KSP has more joint physics than any other game I\u0027ve ever heard of. Most Unity 4 games didn\u0027t push the engine to it\u0027s limits like KSP does.\u003C/p\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2015-10-25T04:55:04Z","Content":"\n\u003Cp\u003EIndeed. I\u0027m excited too, but don\u0027t make any bets. KSP is different from the vast majority of games in that it\u0027s heavily physics-based and its physics objects are collections of parts attached to each other and constantly interacting (which makes it hard to multithread).\u003C/p\u003E\u003Cp\u003EPerformance enhancements are very likely, but 400% would be a miracle.\u003C/p\u003E\n"},{"CreatedByName":"Sobriquet","CreatedById":137022,"CreatedDateTime":"2015-10-25T06:32:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022WalkingShadow89\u0022 data-cite=\u0022WalkingShadow89\u0022\u003E\u003Cdiv\u003EI read somewhere one of the devs said to expect around a \u003Cstrong\u003E10-50% performance boost\u003C/strong\u003E (sorry I don\u0027t have a source)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAny idea what this would mean in game play terms? Would a frame rate of 12 increase 13 to 18? Where before you could fly a 400 part craft, would that mean you could fly one of 440-600 parts? Or, is this not how a performance increase is measured.\u003C/p\u003E\n"},{"CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2015-10-25T07:28:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sobriquet\u0022 data-cite=\u0022Sobriquet\u0022\u003E\u003Cdiv\u003EAny idea what this would mean in game play terms? Would a frame rate of 12 increase 13 to 18? Where before you could fly a 400 part craft, would that mean you could fly one of 440-600 parts? Or, is this not how a performance increase is measured.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy guess is that it would depend on your cpu and your ship. More cores give higher increase. Static load on ships under trust might not improve so much, however multiple ships together would run in different treads and might not have much performance impact unlike today.\u003C/p\u003E\n"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-10-25T07:36:29Z","Content":"\n\u003Cp\u003Etbh we\u0027d probably get a lot more horsepower out of a general optimization pass dealing with the most obvious issues (resource crawling, etc...)\u003C/p\u003E\u003Cp\u003EUnity 5 will be nice, though.\u003C/p\u003E\n"},{"CreatedByName":"StarStreak2109","CreatedById":118557,"CreatedDateTime":"2015-10-25T07:58:12Z","Content":"\n\u003Cp\u003ENow if only KSP could ever look like this....\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://unigine.com/images/news/unigine-2-0-release/iss.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://unigine.com/images/news/unigine-2-0-release/iss.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/sWQVChKTT20?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003ELOL, just kidding, the style of KSP is what it is.... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-10-25T08:52:14Z","Content":"\n\u003Cp\u003EIf there\u0027s a chance to let the joints and thermal system run on different cores, speed increase will be even more profound.\u003C/p\u003E\n"},{"CreatedByName":"KerbalEssences","CreatedById":138885,"CreatedDateTime":"2015-10-25T10:14:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Azimech\u0022 data-cite=\u0022Azimech\u0022\u003E\u003Cdiv\u003EIf there\u0027s a chance to let the joints and thermal system run on different cores, speed increase will be even more profound.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWe also need a change in how heat is calculated in general I think. Heat alone causes extreme frame issues for me even on craft in orbit - I assume it to be related to the heat because of all the gauges which do sometims just not disapear. Since they are working on it (I think Roverdude?) I\u0027m really hoping for performance improvements on that department aswell. Maybe it\u0027s just a bug for me I don#t really know.\u003C/p\u003E\u003Cp\u003EAnother thing I am curious about is can we actually increase the physics calculation distance even more with the multicore support? Reusing boosters and don\u0027t having to care about when to drop them would be great! However, this would also require to add some sort of ingame logics so parachutes could for example open at certain speeds autonomously. I\u0027d love that so much!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-25T11:50:48Z\u0022 title=\u002210/25/2015 11:50  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 25, 2015\u003C/time\u003E by KerbalEssences\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2015-10-25T11:22:45Z","Content":"\n\u003Cp\u003EMy prediction has been 20-50% boost. I\u0027ve read that the new PhysX brings a 20% improvement for joint performance.\u003C/p\u003E\u003Cp\u003EAs for what that translates to, well I\u0027ll take the upper end. If you currently get 20 fps with a 200 part ship, that means you will get 30 fps with a 200 part ship. However it \u003Cem\u003Edoesn\u0027t\u003C/em\u003E mean you\u0027ll get 20 fps with a 300 part ship, because frametimes in KSP scale more than linearly with part count. It might be quadratic, cubic, or some other power, it might even be exponential.\u003C/p\u003E\u003Cp\u003EThe end result is that even a good boost in game performance by normal standards won\u0027t actually increase the tolerable part count that much.\u003C/p\u003E\n"},{"CreatedByName":"manaiaK","CreatedById":129599,"CreatedDateTime":"2015-10-25T20:57:33Z","Content":"\n\u003Cp\u003EI\u0027ll be happy enough if the quarter-second to one second pauses (caused by the garbage collector, I think) go away. But yeah, if your \u0022pain threshold\u0022 is now 200 parts, it might go up all the way to 210 parts if we\u0027re lucky.\u003C/p\u003E\n"},{"CreatedByName":"322997am","CreatedById":146422,"CreatedDateTime":"2015-10-25T21:01:50Z","Content":"\n\u003Cp\u003Eand the rag doll thing has to go. And kerbal so have to not slide when in a closed compartment. And they have to not glitch out of craft when walking back.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cantab\u0022 data-cite=\u0022cantab\u0022\u003E\u003Cdiv\u003EMy prediction has been 20-50% boost. I\u0027ve read that the new PhysX brings a 20% improvement for joint performance.\u003Cp\u003EAs for what that translates to, well I\u0027ll take the upper end. If you currently get 20 fps with a 200 part ship, that means you will get 30 fps with a 200 part ship. However it \u003Cem\u003Edoesn\u0027t\u003C/em\u003E mean you\u0027ll get 20 fps with a 300 part ship, because frametimes in KSP scale more than linearly with part count. It might be quadratic, cubic, or some other power, it might even be exponential.\u003C/p\u003E\u003Cp\u003EThe end result is that even a good boost in game performance by normal standards won\u0027t actually increase the tolerable part count that much.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ewaa I am sad now;.;\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 alt=\u0022;.;\u0022\u003E;.;\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 alt=\u0022;.;\u0022\u003E;.;\u003C/p\u003E\n"},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2015-10-25T21:38:14Z","Content":"\n\u003Cp\u003EI like to bring these tests up when I see a physx performance thread:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://physxinfo.com/news/11327/multithreaded-performance-scaling-in-physx-sdk/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ETest 5 is most like what we would have in KSP. There are huge performance boosts just from having the new version of Physx, which is further enhanced by multithreading. Of course, tests like this are usually designed to show off some very specific instances of performance boosts, so I doubt that we\u0027ll ever see anything quite that big.\u003C/p\u003E\n"},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2015-10-26T22:55:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cantab\u0022 data-cite=\u0022cantab\u0022\u003E\u003Cdiv\u003EMy prediction has been 20-50% boost. I\u0027ve read that the new PhysX brings a 20% improvement for joint performance.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe microbenchmark for non-threaded connected rigidbody physics simulations shows about a 50% improvement in most cases, seldom more, and sometimes less.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cantab\u0022 data-cite=\u0022cantab\u0022\u003E\u003Cdiv\u003EHowever it \u003Cem\u003Edoesn\u0027t\u003C/em\u003E mean you\u0027ll get 20 fps with a 300 part ship, because frametimes in KSP scale more than linearly with part count. It might be quadratic, cubic, or some other power, it might even be exponential.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs I understand the biggest problem with part count scaling (resources), the algorithm used is o(n^2), so a 50% increase in parts would result in 1.5*1.5 (or 2.25) times as much computation required. A doubling in parts would result in four times as much computation required, resulting in a quarter of the display rate if you were computationally bound to begin with, looking at just the resource utilization code.\u003C/p\u003E\u003Cp\u003EOn the more optimistic side, the most KSP-like Unity 5 game I\u0027m aware of, Besiege (think KSP but making medieval siege machines) had some rather significant performance improvements in their Unity 5 update which just came out Friday. Now, Besiege doesn\u0027t have the resource tracking issues that KSP does, but they are seeing 3x simulation framerate improvements even in times when multithreading shouldn\u0027t have been a big win (still a minor improvement from multithreading because Besiege almost never has a single collection of parts loaded, since there has to be a target). Then again, the demo the devs showed with that much improvement could have come from the improved collision detection, which I don\u0027t think is that big a deal in KSP.\u003C/p\u003E\u003Cp\u003EBasically, there\u0027s a lot of things changing under the hood which could improve same-craft performance in switching to Unity 5, but without having code profiling statistics for the current version of KSP, it\u0027s hard to predict how much these improvements will improve the overall end result. Having one part of the code running 4 times faster doesn\u0027t help much if that code is only running 5% of the time and the other 95% of the time it\u0027s running code that hasn\u0027t improved. Having one part of the code running 50% faster doesn\u0027t mean an overall 50% increase in speed unless either some other code has been improved even more or ALL the code is running 50% faster.\u003C/p\u003E\u003Cp\u003EPersonally, I don\u0027t think we\u0027re going to see a huge increase in usable part counts on crafts until the scaling of the resource allocation code is improved, either by caching the results (which the devs have discussed) or by finding a \u0022better\u0022 algorithm. Or better yet, both, because an order(n^2) algorithm is still an order(n^2) algorithm after caching is added, it\u0027s just a much faster order(n^2) algorithm. Then again, arguing worst-case conditions may not be the best approach when discussing KSP since it\u0027s possible for something that behaves \u0022better\u0022 in an absolute worst case scenario to be slower during any conditions where the game would actually be playable.\u003C/p\u003E\u003Cp\u003EWith all that said, my prediction matches cantab\u0027s prediction. I don\u0027t think it\u0027s impossible that the actual results will be outside that range (in either direction), just unlikely. If I had to do an over/under on that prediction, I\u0027d probably hem and haw and never give an actual over/under, since the pessimist in me thinks it\u0027s more likely to be under 20% than over 50%, but the kid in me looks at the Besiege improvement and goes \u0022ZOOMMMM!!\u0022\u003C/p\u003E\n"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2015-10-27T23:57:59Z","Content":"\n\u003Cp\u003EBesiege just released their Unity 5 conversion\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/hYuPNmSnrB4?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EIt even kinda sorta has a similar physics usage profile as KSP with big piles of connected bodies\u003C/p\u003E\n"},{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2015-10-28T11:32:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NoMrBond\u0022 data-cite=\u0022NoMrBond\u0022\u003E\u003Cdiv\u003EBesiege just released their Unity 5 conversion\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/hYuPNmSnrB4?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EIt even kinda sorta has a similar physics usage profile as KSP with big piles of connected bodies\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhoa... That really gives me hope for KSP.\u003C/p\u003E\n"},{"CreatedByName":"Waxing_Kibbous","CreatedById":151611,"CreatedDateTime":"2015-11-01T02:19:50Z","Content":"\n\u003Cp\u003EI\u0027m curious, would it be worth it to upgrade one\u0027s video card to improve performance in KSP 1.1? PhysX is a Nvidia technology, which apparently will offload calculations to the gfx card which I am all about. I\u0027m not sure how the Unity/KSP integration will handle this though, most talk is about multi-core cpu/Win 64 support.\u003C/p\u003E\n"},{"CreatedByName":"The_BlackArrow","CreatedById":152825,"CreatedDateTime":"2015-11-01T02:43:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Waxing_Kibbous\u0022 data-cite=\u0022Waxing_Kibbous\u0022\u003E\u003Cdiv\u003EI\u0027m curious, would it be worth it to upgrade one\u0027s video card to improve performance in KSP 1.1? PhysX is a Nvidia technology, which apparently will offload calculations to the gfx card which I am all about. I\u0027m not sure how the Unity/KSP integration will handle this though, most talk is about multi-core cpu/Win 64 support.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat would depend, What is your CPU speed? If its low you would gain more from a CPU upgrade as KSP uses the CPU more than the GPU.\u003C/p\u003E\u003Cp\u003E - Arrow\u003C/p\u003E\n"},{"CreatedByName":"Waxing_Kibbous","CreatedById":151611,"CreatedDateTime":"2015-11-01T15:47:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The_BlackArrow\u0022 data-cite=\u0022The_BlackArrow\u0022\u003E\u003Cdiv\u003EThat would depend, What is your CPU speed? If its low you would gain more from a CPU upgrade as KSP uses the CPU more than the GPU.\u003Cp\u003E - Arrow\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh that\u0027s too bad, but I imagine it\u0027s easier to support cpu only because AMD/ATI don\u0027t use CUDA. I wonder if there is an experimental flag that can be turned on somewhere...\u003C/p\u003E\n"},{"CreatedByName":"severedsolo","CreatedById":80345,"CreatedDateTime":"2015-11-01T17:08:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Waxing_Kibbous\u0022 data-cite=\u0022Waxing_Kibbous\u0022\u003E\u003Cdiv\u003EI\u0027m curious, would it be worth it to upgrade one\u0027s video card to improve performance in KSP 1.1? PhysX is a Nvidia technology, which apparently will offload calculations to the gfx card which I am all about. I\u0027m not sure how the Unity/KSP integration will handle this though, most talk is about multi-core cpu/Win 64 support.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan\u0027t speak for Unity 5, but KSP on U4 does not use your GPU for Physx calculations. I don\u0027t know if this is a U4 limitation, nor have I seen anything to suggest that this is going to change in U5.\u003C/p\u003E\u003Cp\u003EThere was an AMA about a year ago, where Max said they wouldn\u0027t be doing Physx on GPU because it would alienate AMD users. (Which is a terrible excuse in my opinion, but I\u0027m not a dev. I guess they want everyone to have the same experience).\u003C/p\u003E\n"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2015-11-01T21:06:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022severedsolo\u0022 data-cite=\u0022severedsolo\u0022\u003E\u003Cdiv\u003ECan\u0027t speak for Unity 5, but KSP on U4 does not use your GPU for Physx calculations. I don\u0027t know if this is a U4 limitation, nor have I seen anything to suggest that this is going to change in U5.\u003Cp\u003EThere was an AMA about a year ago, where Max said they wouldn\u0027t be doing Physx on GPU because it would alienate AMD users. (Which is a terrible excuse in my opinion, but I\u0027m not a dev. I guess they want everyone to have the same experience).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo. Unity 5 does not have that support yet. Even if it did that is only for a select few capabilities, cloth and steam/smoke. So launches might look really good, and flags could \u0027wave\u0027 on atmospheric bodies. There is also some debris rendering.\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/luSAnouAFJs?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003Eshows examples of what it did in the batman games, largely just extra visuals. Most of this can be done without PhysX on the GPU too, Rocksteady just decided not to.\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-11-01T21:10:33Z\u0022 title=\u002211/01/2015 09:10  PM\u0022 data-short=\u00228 yr\u0022\u003ENovember 1, 2015\u003C/time\u003E by Alshain\u003C/strong\u003E\n\u003C/span\u003E\n"}]}