{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":141,"Articles":[{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2016-02-28T19:35:15Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E Which altitude you want?\n\u003E \n\nFrom sea level near the KSC if i move the camera around, up down slow or fast I get the glitching. I see it at the coast and I see phantom sea on the land and the suns reflection in it. Thank you for doing this, I really just want confirmation It is something at my end."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-28T19:37:01Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Majorjim said:\n\u003E \n\u003E \n\u003E From sea level near the KSC if i move the camera around, up down slow or fast I get the glitching. I see it at the coast and I see phantom sea on the land and the suns reflection in it. Thank you for doing this, I really just want confirmation It is something at my end.\n\u003E \n\nI get some glitching with the near camera but nothing higher up like in the scott manley video, I\u0027ll make a video."},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2016-02-28T19:38:47Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E I get some glitching with the near camera but nothing higher up like in the scott manley video, I\u0027ll make a video.\n\u003E \n\nSo you do get the glitching on the coast and phantom seas on the land at sea level? Also the colours at sea level at dusk look really UN-natural in this version:\n\n![x0z0a8.jpg](http://i63.tinypic.com/x0z0a8.jpg)\n\n**Edited \u003Ctime datetime=\u00222016-02-28T19:43:23Z\u0022 title=\u002202/28/2016 07:43  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 28, 2016\u003C/time\u003E by Majorjim**"},{"CreatedByName":"vctr","CreatedById":62106,"CreatedDateTime":"2016-02-28T19:46:17Z","Content":"\u003E \n\u003E \n\u003E 15 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Hmm, well I still have no clue why it would happen, I suppose I could put back the old method and make it switchable as a temporary work-around. Is there nothing else at all that affects it?\n\u003E \n\nNo idea what more could cause this. I could play with the ocean parameters later and see if I can isolate the cause. Maybe it\u0027s just my video card or something and maybe it\u0027ll resolve itself in time. I can use the old method if you reintroduce it. Thanks for your help, I just donated $5. I appreciate your dedication ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2016-02-28T19:47:54Z","Content":"![mhq92s.jpg](http://i68.tinypic.com/mhq92s.jpg)\n\nAlso the new sun glare looks amazing but looks really odd with the stock fairings:\n\n**Edited \u003Ctime datetime=\u00222016-02-28T19:48:14Z\u0022 title=\u002202/28/2016 07:48  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 28, 2016\u003C/time\u003E by Majorjim**"},{"CreatedByName":"Paul_Sawyer","CreatedById":152646,"CreatedDateTime":"2016-02-28T19:58:05Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E For the EVE city lights bug I have no idea really, did you mean 0.0232 and not 0.223?\n\u003E \n\n0.0232 for sure, I\u0027ve never seen it in any previous version, and when I installed 0.0223 instead of 0.0232, the lights disappeared.  \n\nI will see if I can reproduce it with EVE and scatterer only right now.\n\n**Edited \u003Ctime datetime=\u00222016-02-28T19:59:21Z\u0022 title=\u002202/28/2016 07:59  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 28, 2016\u003C/time\u003E by Paul\\_Sawyer**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-28T20:05:24Z","Content":"\u003E \n\u003E \n\u003E 5 minutes ago, vctr said:\n\u003E \n\u003E \n\u003E No idea what more could cause this. I could play with the ocean parameters later and see if I can isolate the cause. Maybe it\u0027s just my video card or something and maybe it\u0027ll resolve itself in time. I can use the old method if you reintroduce it. Thanks for your help, I just donated $5. I appreciate your dedication ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\nThank you, if I can\u0027t fix the problem the proper way I\u0027ll just reintroduce the old method. BTw I just thought of something, do you have a framerate cap on in the settings and what kind of framerate do you get ingame?\n\n\u003E \n\u003E \n\u003E 13 minutes ago, Majorjim said:\n\u003E \n\u003E \n\u003E So you do get the glitching on the coast and phantom seas on the land at sea level? Also the colours at sea level at dusk look really UN-natural in this version:\n\u003E \n\nHere\u0027s a webm, excuse the laptop-tier framerate and quality **[http://webm.host/46974/vid.webm](http://webm.host/46974/vid.webm)**\n\nnotice the glitching only affects the near camera, I believe everyone gets this because the near camera\u0027s clipping plane is ridiculously low, something like 0.1 or 0.05 and so z-precision is probably awful. Notice there are no additional problems when panning and no problems at all from high altitude like in manley\u0027s video.\n\nFor the colors, I switched to a new method of computing extinction and inscattering which fixes the old very obvious horizon break: [http://i.imgur.com/y2Jyo7i.png](http://i.imgur.com/y2Jyo7i.png) (although there are still some occasional artifacts near the horizon but not nearly as bad) and makes the colors more natural. It looks unnatural around dusk but if you had godrays on you\u0027d see black mountains instead which is the way it\u0027s supposed to be.\n\n\u003E \n\u003E \n\u003E 4 minutes ago, Majorjim said:\n\u003E \n\u003E \n\u003E Also the new sun glare looks amazing but looks really odd with the stock fairings:\n\u003E \n\nProbably the same issue as with the flag reported above, I\u0027ll see if I can fix it.\n\n\u003E \n\u003E \n\u003E 3 minutes ago, Paul\\_Sawyer said:\n\u003E \n\u003E \n\u003E 0.0232 for sure, I\u0027ve never seen it in any previous version, and when I installed 0.0223 the lights disappeared.  \n\u003E \n\u003E I will see if I can reproduce it with EVE and scatterer only right now.\n\u003E \n\nWell if it\u0027s gone in 0.0232 was probably fixed at the same time another bug was fixed which caused [@Nhawks17](https://forum.kerbalspaceprogram.com/index.php?/profile/32999-nhawks17/) to see city lights in space."},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2016-02-28T20:12:14Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E Here\u0027s a webm, excuse the laptop-tier framerate and quality **[http://webm.host/46974/vid.webm](http://webm.host/46974/vid.webm)**\n\u003E \n\nThanks for that Blackrack. It was hard to say as it was so stuttery and your settings are way lower than mine (all maxed). Perhaps that is why you did not see the glitching."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-28T20:15:12Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Majorjim said:\n\u003E \n\u003E \n\u003E Thanks for that Blackrack. It was hard to say as it was so stuttery and your settings are way lower than mine (all maxed). Perhaps that is why you did not see the glitching.\n\u003E \n\nNo, on my desktop it works fine, and only the near camera has the same glitches as in the webm, but I only have my laptop on hand now. You can ask someone else for a video or watch this: [https://www.youtube.com/watch?v=XVvglDyM-Ok](https://www.youtube.com/watch?v=XVvglDyM-Ok) though it\u0027s a bit outdated, depends on which the version you started seeing the glitches in."},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2016-02-28T20:24:41Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E No, on my desktop it works fine, and only the near camera has the same glitches as in the webm, but I only have my laptop on hand now. You can ask someone else for a video or watch this: [https://www.youtube.com/watch?v=XVvglDyM-Ok](https://www.youtube.com/watch?v=XVvglDyM-Ok) though it\u0027s a bit outdated, depends on which the version you started seeing the glitches in.\n\u003E \n\nIn that video you can actually see one of the glitches I get on the coast. Look at 3:17 you will see it. Also I just loaded into the game again and i have no glitches... It seems to happen at random. I am trying to record it to show you.\n\n**Edited \u003Ctime datetime=\u00222016-02-28T20:26:36Z\u0022 title=\u002202/28/2016 08:26  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 28, 2016\u003C/time\u003E by Majorjim**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-28T20:29:14Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, Majorjim said:\n\u003E \n\u003E \n\u003E In that video you can actually see one of the glitches I get on the coast. Look at 3:17 you will see it. Also I just loaded into the game again and i have no glitches... It seems to happen at random. I am trying to record it to show you.\n\u003E \n\nI may have an idea on why this happens, but it\u0027s also not fixable most likely, another quick question, do you have an fps cap in game and what kind of framerate do you get?"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2016-02-28T20:31:14Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E I may have an idea on why this happens, but it\u0027s also not fixable most likely, another quick question, do you have an fps cap in game and what kind of framerate do you get?\n\u003E \n\nNo FPS cap matey. I get 60 FPS at the KSC, with a 130 part craft on the pad I get 50 and up. What is the idea you have about the cause?\n\nEDIT\n\nI just started a new save and I am getting the glitches now.. How can that be?\n\n**Edited \u003Ctime datetime=\u00222016-02-28T20:33:00Z\u0022 title=\u002202/28/2016 08:33  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 28, 2016\u003C/time\u003E by Majorjim**"},{"CreatedByName":"vctr","CreatedById":62106,"CreatedDateTime":"2016-02-28T20:34:22Z","Content":"\u003E \n\u003E \n\u003E 18 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E BTw I just thought of something, do you have a framerate cap on in the settings and what kind of framerate do you get ingame?\n\u003E \n\nNo framerate capping. The video example I shared earlier was doing about 100fps. Good luck identifying the cause. Interesting that I\u0027m not seeing this issue raised by others. Would hate for you to revert to the old method if I\u0027m the only one ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)"},{"CreatedByName":"Paul_Sawyer","CreatedById":152646,"CreatedDateTime":"2016-02-28T20:35:30Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/),\n\n\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E Well if it\u0027s gone in 0.0232 was probably fixed at the same time another bug was fixed which caused [@Nhawks17](https://forum.kerbalspaceprogram.com/index.php?/profile/32999-nhawks17/) to see city lights in space.\n\u003E \n\nI think we didn\u0027t understand each other ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) It was gone when I replaced newest scatterer with older version. In the newest version it happens when terrain shadows are on - the city lights textures from BoulderCo begin to appear on Minmus and Mun. Here are the logs:  \n[output_log](https://www.dropbox.com/s/yy9r430bo525srj/output_log%20scatterer%2BEVE%20CityLights.txt?dl=0)\n\n[KSP_log](https://www.dropbox.com/s/3ul5estj3laney5/KSP%20scatterer%2BEVE%20CityLights.log?dl=0)  \n\nEDIT: darn, forgot to mention - it\u0027s in OpenGL\n\n**Edited \u003Ctime datetime=\u00222016-02-28T20:49:24Z\u0022 title=\u002202/28/2016 08:49  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 28, 2016\u003C/time\u003E by Paul\\_Sawyer**"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2016-02-28T20:38:56Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, Majorjim said:\n\u003E \n\u003E \n\u003E No FPS cap matey. I get 60 FPS at the KSC, with a 130 part craft on the pad I get 50 and up. What is the idea you have about the cause?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E EDIT\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I just started a new save and I am getting the glitches now.. How can that be?\n\u003E \n\nHere is a short video of the issue, it does not always happen but it ONLY happens if I use the ocean shader.\n\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/hLX9f2OOFtk?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-28T20:51:15Z","Content":"\u003E \n\u003E \n\u003E 14 minutes ago, vctr said:\n\u003E \n\u003E \n\u003E No framerate capping. The video example I shared earlier was doing about 100fps. Good luck identifying the cause. Interesting that I\u0027m not seeing this issue raised by others. Would hate for you to revert to the old method if I\u0027m the only one ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\u003E \n\nCould you try capping the framerate at 60? I\u0027m assuming you don\u0027t have a 100hz monitor.\n\n\u003E \n\u003E \n\u003E 10 minutes ago, Majorjim said:\n\u003E \n\u003E \n\u003E Here is a short video of the issue, it does not always happen but it ONLY happens if I use the ocean shader.\n\u003E \n\u003E \n\u003E \n\u003E \u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/hLX9f2OOFtk?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\u003E \n\nI won\u0027t get into technical details, but I would ve thought it\u0027s framerate related, specifically getting a higher framerate than your refresh rate, but you said it isn\u0027t the case so no idea.\n\n\u003E \n\u003E \n\u003E 13 minutes ago, Paul\\_Sawyer said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/),\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I think we didn\u0027t understand each other ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) It was gone when I replaced newest scatterer with older version. In the newest version it happens when terrain shadows are on - the city lights textures from BoulderCo begin to appear on Minmus and Mun. Here are the logs:  \n\u003E [output_log](https://www.dropbox.com/s/yy9r430bo525srj/output_log%20scatterer%2BEVE%20CityLights.txt?dl=0)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [KSP_log](https://www.dropbox.com/s/3ul5estj3laney5/KSP%20scatterer%2BEVE%20CityLights.log?dl=0)\n\u003E \n\nWell you kept mentioning 0.0223 which doesn\u0027t exist so I assumed you misspelled 0.0232"},{"CreatedByName":"Paul_Sawyer","CreatedById":152646,"CreatedDateTime":"2016-02-28T20:54:47Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E Well you kept mentioning 0.0223 which doesn\u0027t exist so I assumed you misspelled 0.0232\n\u003E \n\nAh, yeah, sorry, I meant 0.022."},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2016-02-28T21:28:48Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E I won\u0027t get into technical details, but I would ve thought it\u0027s framerate related, specifically getting a higher framerate than your refresh rate, but you said it isn\u0027t the case so no idea.\n\u003E \n\nI will try without other mods to check, if not I just wont use it."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-28T21:30:07Z","Content":"\u003E \n\u003E \n\u003E Just now, Majorjim said:\n\u003E \n\u003E \n\u003E I will try without other mods to check, if not I just wont use it.\n\u003E \n\nReally, you could just ignore it for now, it\u0027s certainly still easier on the eyes than the stock ocean."},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2016-02-28T21:32:02Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E Really, you could just ignore it for now, it\u0027s certainly still easier on the eyes than the stock ocean.\n\u003E \n\nThing is, when it glitches it looks awful and happens at all altitudes, not sure about orbit though. I like it from sea level, not so much from orbit though. And I kinda like the stock ocean. ![:blush:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif \u0022:blush:\u0022) It could do with a colour update though."},{"CreatedByName":"Sabor","CreatedById":59932,"CreatedDateTime":"2016-02-28T23:04:46Z","Content":"I get a weird issue with this game OR Scatterer.  Using DX11, no graphical issues, but I get this problem with performance after using the SPH/VAB until restarting the game. As long as I don\u0027t touch either of those, performance is fine,\n\n![RzP0QKf.png](http://i.imgur.com/RzP0QKf.png)\n\nIf I knock DX11 and go to DX10 or DX9, that performance issue goes away, but then I get fat black stripes across the entirety of terrain with exception of my immediate area (About 200 meter circle around me) from scatterer\n\n![yqLbnSB.png](http://i.imgur.com/yqLbnSB.png)\n\nIs there a solution to either of these problems that anyone knows about?\n\n**Edited \u003Ctime datetime=\u00222016-02-29T02:12:25Z\u0022 title=\u002202/29/2016 02:12  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 29, 2016\u003C/time\u003E by Sabor**"},{"CreatedByName":"hazard-ish","CreatedById":115844,"CreatedDateTime":"2016-02-28T23:12:35Z","Content":"Truely fantastic work! This one mod completely changes the way the game looks in the best way possible! Thanks so much for all the time you\u0027ve put into this great mod ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n**Edited \u003Ctime datetime=\u00222016-03-01T17:51:57Z\u0022 title=\u002203/01/2016 05:51  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 1, 2016\u003C/time\u003E by hazard-ish**"},{"CreatedByName":"vctr","CreatedById":62106,"CreatedDateTime":"2016-02-29T00:13:17Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Could you try capping the framerate at 60? I\u0027m assuming you don\u0027t have a 100hz monitor.\n\u003E \n\nNo luck with capped 60fps. I have solved the issue though...Interestingly, I just switched to x64 via using community workaround, and the z-fighting I shared with you is no longer present...doesn\u0027t make any sense to me, but I guess I\u0027ll allow it ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022).\n\nEdit: Seems installing KSP Renaissance Compilation seems to have also been a factor in the z-fighting going away. It could be the actual variable.\n\n**Edited \u003Ctime datetime=\u00222016-02-29T00:49:06Z\u0022 title=\u002202/29/2016 12:49  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 29, 2016\u003C/time\u003E by vctr**"},{"CreatedByName":"CamillyCA","CreatedById":135893,"CreatedDateTime":"2016-02-29T02:44:14Z","Content":"[@Sabor](https://forum.kerbalspaceprogram.com/index.php?/profile/59932-sabor/) i have same problem here but sadly i don\u0027t have any solution but using DX11 for now or disable terrain shadow\n\n**Edited \u003Ctime datetime=\u00222016-02-29T02:45:47Z\u0022 title=\u002202/29/2016 02:45  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 29, 2016\u003C/time\u003E by CamillyCA**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-29T03:02:41Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, Sabor said:\n\u003E \n\u003E \n\u003E I get a weird issue with this game OR Scatterer.  Using DX11, no graphical issues, but I get this problem with performance after using the SPH/VAB until restarting the game. As long as I don\u0027t touch either of those, performance is fine,\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E If I knock DX11 and go to DX10 or DX9, that performance issue goes away, but then I get fat black stripes across the entirety of terrain with exception of my immediate area (About 200 meter circle around me) from scatterer\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Is there a solution to either of these problems that anyone knows about?\n\u003E \n\nCould you test if the performance issue persists with stock only?\n\n\u003E \n\u003E \n\u003E 2 hours ago, vctr said:\n\u003E \n\u003E \n\u003E Edit: Seems installing KSP Renaissance Compilation seems to have also been a factor in the z-fighting going away. It could be the actual variable.\n\u003E \n\nThis also doesn\u0027t make sense but whatever works..."}]}