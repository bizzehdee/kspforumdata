{"TopicId":207783,"ForumId":50,"TopicTitle":"Kerbin CommNet coverage on hard mode","CreatedByName":"Robin Patenall","CreatedById":210278,"CreatedDateTime":"2022-04-16T13:37:21Z","PageNum":1,"Articles":[{"CreatedByName":"Robin Patenall","CreatedById":210278,"CreatedDateTime":"2022-04-16T13:37:21Z","Content":"\n\u003Cp\u003E\nHaving played with KSP on hard mode, I found it quite annoying that you don\u0027t get full CommNet coverage of Kerbin when you are in orbit unless you are very high. I kept losing control of vessels with only probe cores when I was launching or attempting to do a re-entry burns, so I thought that I\u0027d create a map so I could see the altitude you need to have CommNet a signal when in hard mode (or when you\u0027ve set the Occlusion Modifier to 1.0).\n\u003C/p\u003E\n\u003Cp\u003E\nI ended up creating two, one for orbital heights (75km to 250km) and one for surface heights (10m to 60km). Each colour patch indicates where there is no CommNet signal at a given altitude.\n\u003C/p\u003E\n\u003Cp\u003E\nThe most interesting bit is that there is a large CommNet blackspot East of the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003E\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\u003C/abbr\u003E, just about the place that you might be attempting to circularise and it goes very high, this means that launching a vessel with just probe cores onboard really needs a relay satellite to be in place first. Looking at the map, it looks like an initial relay satellite might be best launched into a polar orbit giving you much more time (via North Station One) to circularise before you lose connection.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve done a bit of testing and it does seem to match the reality of the game. Hopefully these will be helpful to people\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EOrbital Heights\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022NVKw4pc.jpg\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002250.00\u0022 height=\u0022512\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/NVKw4pc.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/4vzEGVu\u0022 rel=\u0022external nofollow\u0022\u003ELarge (4096 x 2048)\u003C/a\u003E and \u003Ca href=\u0022https://imgur.com/NVKw4pc\u0022 rel=\u0022external nofollow\u0022\u003ESmall (1024 x 512)\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ESurface Heights\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00225J9Xfj8.jpg\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002250.00\u0022 height=\u0022512\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/5J9Xfj8.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/S57uTfl\u0022 rel=\u0022external nofollow\u0022\u003ELarge (4096 x 2048)\u003C/a\u003E and \u003Ca href=\u0022https://imgur.com/5J9Xfj8\u0022 rel=\u0022external nofollow\u0022\u003ESmall (1024 x 512)\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222022-04-16T14:17:37Z\u0022 title=\u002204/16/2022 02:17  PM\u0022 data-short=\u00222 yr\u0022\u003EApril 16, 2022\u003C/time\u003E by Robin Patenall\u003C/strong\u003E\n\u003Cbr\u003EFixed the size of the large downloads\n\u003C/span\u003E\n"},{"CreatedByName":"Nazalassa","CreatedById":217956,"CreatedDateTime":"2022-05-18T13:14:52Z","Content":"\n\u003Cp\u003E\nDid you use math, or approximated the heights?\n\u003C/p\u003E\n"},{"CreatedByName":"darthgently","CreatedById":204885,"CreatedDateTime":"2022-05-18T14:04:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224133951\u0022 data-ipsquote-contentid=\u0022207783\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221652879692\u0022 data-ipsquote-userid=\u0022217956\u0022 data-ipsquote-username=\u0022Nazalassa\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n41 minutes ago, Nazalassa said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDid you use math, or approximated the heights?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt doesn\u0027t look like either is taking terrain height into account, but I don\u0027t think CommNet does either for occlusion purposes but goes solely by body radius and occlusion modifier.\u00A0 But on the surface level map, I think terrain height would matter if we are talking landed/spashed vessels having\u00A0 comms; that is landing on a peak a few km high might put you in comms LOS of a ground station while being at sea level one may not have comms at same distance from ground station\n\u003C/p\u003E\n"},{"CreatedByName":"Robin Patenall","CreatedById":210278,"CreatedDateTime":"2022-05-18T14:05:23Z","Content":"\n\u003Cp\u003E\nLots, and lots, of math, but I let my PC do it.\n\u003C/p\u003E\n\u003Cp\u003E\nI wrote a python script the would check each Lat / Long / Altitude to see if that point had an unobstructed line of sight to any of the ground stations. There was some optimisation that would stop at the lowest height that had CommNet coverage as I believe (but didn\u0027t prove rigorously =) that if there is a connection at a given height then there is always a connection above that. It wasn\u0027t that efficient, but it never took that long to run and I worked with smaller map images while debugging before using the high resolution maps for release.\n\u003C/p\u003E\n\u003Cp\u003E\nI found a list of the Lat / Log of the ground stations but had to get the altitude with the WayPoint Manager mod. I assume that they broadcast from terrain ground level (mostly as I know there are actual objects there) and this does appear to match up with the tests I made in game but I\u0027m always open to be proved wrong. I had to make a reasonable assumptions about how KSP calculates CommNet occlusion (i.e. the\u00A0occluding object is a sphere with radius = Planet Radius * Occlusion Modifier) but this matches what others have said in this forum and does appear to be correct.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\n\u003C/p\u003E\n\u003Cp\u003E\nDarthGently is right, CommNet appears to ignore terrain, I\u0027ve seen active connections pass through mountains even when the\u00A0Occlusion Modifier is 1.\n\u003C/p\u003E\n\u003Cp\u003E\nThe altitudes on the maps are above sea level and yes if land on high terrain you may get a signal where are you might not in the same position at sea level. In fact one of\u00A0 my reasons for building the maps was my loss of signal just before landing in the waters East of the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003E\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\u003C/abbr\u003E near the Island airstrip. The \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003E\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\u003C/abbr\u003E is about 70m above sea level and you don\u0027t need to go far to lose signal just before impact (important for powered landing)\n\u003C/p\u003E\n\u003Cp\u003E\nThe minimum height ALS for connection at the Island airfield is about 450-500m\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222022-05-18T14:28:27Z\u0022 title=\u002205/18/2022 02:28  PM\u0022 data-short=\u00222 yr\u0022\u003EMay 18, 2022\u003C/time\u003E by Robin Patenall\u003C/strong\u003E\n\u003C/span\u003E\n"}]}