{"TopicId":83521,"ForumId":29,"TopicTitle":"GUI with scroll log","CreatedByName":"Dielos","CreatedById":28547,"CreatedDateTime":"2014-09-01T09:42:34Z","PageNum":1,"Articles":[{"CreatedByName":"Dielos","CreatedById":28547,"CreatedDateTime":"2014-09-01T09:42:34Z","Content":"\n\u003Cp\u003EHello,\u003C/p\u003E\u003Cp\u003EI have GUI set up, but I need to have a scrolling text log for it where I can input messages, similar to the debug log. At the moment I\u0027m doing this through a label, as found in the Unity documentation, but it adds new lines through expanding the string, and I forsee problems here...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E      \t\tscrollPosition = GUILayout.BeginScrollView(scrollPosition, GUILayout.Width(300), GUILayout.Height(300));\u003Cbr\u003E        \tGUILayout.Label(longString);\u003Cbr\u003E        \tif (GUILayout.Button(\u0022Clear\u0022))\u003Cbr\u003E                longString = \u0022\u0022;\u003Cbr\u003E\u003Cbr\u003E        \tGUILayout.EndScrollView();\u003Cbr\u003E        \tif (GUILayout.Button(\u0022Add More Text\u0022)) longString \u002B= \u0022\\nHere is another line\u0022;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIs there a way I could achieve this? Basically I need longstring to input a new line every time with a new string, and not expand it... I guess that label is not the way to go for this. Could a text box be better, although I don\u0027t need the player to write anything in it?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-01T13:34:26Z","Content":"\n\u003Cp\u003EThere are actually a couple tricks I found in doing the GUI for my AGX mod that will help.\u003C/p\u003E\u003Cp\u003EFirst, you can calculate label positions as follows:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EList\u0026lt;string\u0026gt; messageLog = new List\u0026lt;string\u0026gt;();\u003Cbr\u003E//add string messages to log somwhere\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//inside the GUI window/scrollwindow  \u003Cbr\u003E//note this is not a GUILayout, rather it is a GUI.Window that I am pulling this from but I\u0027m pretty sure it still works\u003Cbr\u003E\u003Cbr\u003Efor(int i = 1;i \u0026lt;= messageLog.count;i\u002B\u002B)\u003Cbr\u003E{\u003Cbr\u003EGUI.Label(new Rect(10,10 \u002B ((i-1) * 20),100,20),messageLog.ElementAt(i-1),YourGuiStyleHere)\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis will draw a label for each string entry in the messageLog list, stacking them downwards.\u003C/p\u003E\u003Cp\u003EThe first label will be anchored at coordinate 10,10 and is 100 wide by 20 high.\u003C/p\u003E\u003Cp\u003EThe second label will be anchored at coordiante 10,30, and so on.\u003C/p\u003E\u003Cp\u003EThe magic is in the y-coordinate of the position rectangle:\u003C/p\u003E\u003Cp\u003E10 \u002B ((i-1) * 20)\u003C/p\u003E\u003Cp\u003E10: This is the offset of 10 down to start at.\u003C/p\u003E\u003Cp\u003E\u002B : we then want to add 20 pixels for each label\u003C/p\u003E\u003Cp\u003E(i-1): because the anchor is at the top of the label, we want to move down the amount of labels above us, not counting us. So label #3 needs to move down 2 label widths\u003C/p\u003E\u003Cp\u003E*20: A label is 20 pixels high, so move down 20 pixels for the number of previous labels we have.\u003C/p\u003E\u003Cp\u003EThen for our label string, pull the correct entry via messageLog.ElementAt(i-1)\u003C/p\u003E\u003Cp\u003ENote that .ElementAt is a zero start, so label #1 is element #0, label #2 is element #1 and so on.\u003C/p\u003E\u003Cp\u003EYou can also do the same from a scroll window size, define the y coordinate of the interior scroll box as \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E(messageLog.count *20) \u002B 20\u003C/pre\u003E\u003Cp\u003E to make it the correct height, with 10 pixels top and bottom for a border.\u003C/p\u003E\u003Cp\u003EIt\u0027s an uncommented mess, but you can see where I actually do this in my code at \u003Ca href=\u0022https://github.com/SirDiazo/AGExt/blob/master/AGExt/Flight.cs#L1264\u0022 rel=\u0022external nofollow\u0022\u003Emy github here.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHope that helps,\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Dielos","CreatedById":28547,"CreatedDateTime":"2014-09-01T14:32:25Z","Content":"\n\u003Cp\u003EThanks a lot Diazo,\u003C/p\u003E\u003Cp\u003EThis is just what I need. I will study your code and see how to implement it. Hope you don\u0027t mind if I use some lines of code from your mod though! I\u0027m just starting to mod, and I\u0027m still a bit lost...\u003C/p\u003E\u003Cp\u003EFor the GUI I have been using the KSP example on the wiki and trying to expand on it, so I might have to redo some bits.\u003C/p\u003E\u003Cp\u003EBy the way, your code looks incredibly clean, you should see mine. I only have a couple of lines and I can\u0027t find anything in it already...\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-01T14:46:25Z","Content":"\n\u003Cp\u003EHeh, we learn as we go.\u003C/p\u003E\u003Cp\u003EI just recently ripped AGX apart for a total rewrite and the commentary is lagging behind, my vertical velocity mod is more in line with what I consider acceptable commentary in the code.\u003C/p\u003E\u003Cp\u003EAs for grabbing my code, go ahead. I license my mods under the GPL3 license for that exact reason. (Only 2 limitations are that you can\u0027t use my code in a commercial product and you have to release your mod under a license that allows people to use your code, or at least the part of your code that uses my code, in a project of their own as well.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"}]}