{"TopicId":75247,"ForumId":20,"TopicTitle":"Animation issues driving me up a wall.","CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2014-06-16T21:47:03Z","PageNum":1,"Articles":[{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2014-06-16T21:47:03Z","Content":"\n\u003Cp\u003EHeyo, there. Continuing with my modding misadventures, I have found that Unity hates me more than ever. How does one get an animation from Blender into Unity, and then have Unity export it to the game? And in the CFG file, how do you get the part to run the animation?\u003C/p\u003E\u003Cp\u003EI\u0027ve successfully imported parts into KSP, so that\u0027s not a problem. I\u0027ve also had them run SCIENCE experiments. ATM, animations are my only issue.\u003C/p\u003E\n"},{"CreatedByName":"FiresThatBurn","CreatedById":74154,"CreatedDateTime":"2014-06-18T14:09:01Z","Content":"\n\u003Cp\u003EI see,\u003C/p\u003E\u003Cp\u003EHeres how you \u0022fix\u0022 it (notice the \u0022).\u003C/p\u003E\u003Cp\u003ERead all of it!\u003C/p\u003E\u003Cp\u003EAnimate:\u003C/p\u003E\u003Cp\u003EIn blender do a normal animation after you have created your part. So set max keyframes to 100 then go to keyframe 0. At kf 0 right click the \u0022part\u0022 you are moving or rotating then with it selected hit \u0022i\u0022 on your keyboard. A menu pops up saying add keyfram then find LotRotScale. Then move the green time cursor around the timeline, You\u0027ll see on frame 0 there is a yellow mark. Good! Now go to keyframe 50. At 50 rotate scale and move your part around. This would be the \u0022Activate\u0022 animation. Then once thats done do the same thing(Hit \u0022i\u0022 add keyframe REMEMBER TO BE AT FRAME 50 and hit LocRotScale). Now once thats done go to frame 0 and try to move around to timeline so the animation works. If your part doesn\u0027t move anywhere re-read my instructions, I animate(some) in blender and this is the way to do it. Got it working? Great! Now the deactivate, Go to frame 100(last frame you can set it to the last setting the \u0022End:\u0022 value on the timeline from 250 to 100. At frame 100 make the part go back where it was at frame 0.\u003C/p\u003E\u003Cp\u003EIMPORTANT!!! I BELIEVE YOU HAVE TO MOVE YOUR NODE_COLLIDER TOO! I am not too sure but if you want proper collision then I think you do, For that, its just the same way\u003C/p\u003E\u003Cp\u003EExport:\u003C/p\u003E\u003Cp\u003EIt\u0027s time for moving to Unity,For the next part select all parts of your \u0022part\u0022, The collider and everything. Go to FILE \u0026gt; EXPORT \u0026gt; Autodesk(.fbx) Export it to a new folder in your Desktop. In export settings(bottom left) make sure to have \u0022Selected Objects\u0022 checked. Don\u0027t mess with anything else. Get the folder that you exported your fbx in, Open it. Make a new folder in it named TestAniPart, Leave the folder be. So heres the recap. You should have a folder named anything with a .fbx file in it and a folder in the same directory named TestAniPart. Alright now, The fun stuff!\u003C/p\u003E\u003Cp\u003EImport to Unity:\u003C/p\u003E\u003Cp\u003EOpen a new project in Unity, I have one already for KSP but you can use pretty much any. Make sure nothing except Main Camera is in the Hierarchy. Also go install KSP Part Tools .23. Do that then continue. Now you have part tools, In assets you see Editor, Lib and Shaders. Make 3 folders named, Models, Textures and Processed Models. All in Assets. You should have a PNG file(or what ever you use) as your models UV map. Put that in textures. Now open the Models folder, Make a new folder named AnimatePart. Open that. Now open the folder you had on your desktop, Drop the fbx file in Assets \u0026gt; Models \u0026gt; AnimatePart (so \u0026lt;-- that folder) Now you see it generated a materials folder with materials. I made a test part with a simple animation so I didn\u0027t have materials. Now next step.\u003C/p\u003E\u003Cp\u003ESetting it up in Unity:\u003C/p\u003E\u003Cp\u003EThis is the main step! Click on your model in AnimatePart, You get a list of settings in the inspector. Go to the Model section if it isn\u0027t there. Set scale factory to 1 and Checkmark Generate Colliders. Set normals to calculate. Now go to Rig. Set Animation type to Legacy, then your done there go to Animations. Where it says clips hit the plus button 2 times, so 2 clips are added. The \u0022Default Take\u0022 can have the whole animation, Rename \u0022Default Take0\u0022 to Extend(?) or what ever you are doing. For \u0022Default Take1\u0022 rename that to Retract(?). Go to Extend, Set start to 0 and end to 50, Set retract to Start 51 and end 100(or 99 if Unity won\u0027t allow you to) Apply all settings.\u003C/p\u003E\u003Cp\u003EKSP Import:\u003C/p\u003E\u003Cp\u003EIn Unity create an empty GameObject. With all settings saved move your part from the AnimatePart in Unity into that Game object. Hit all the arrows to open it, If you accidently exported the Lamp and Camera no worries! Just delete them. click on the part and check if the animations are set up. Now you have the material when you have the part selected( I used the cube you start with so my is named cube so select it) When its selected make sure it has material Mesh collider and renderer. At mesh collider check \u0022Convex\u0022. Now at Material(for me I still have the Cube selected, If you have multiply parts you have to do this) Click shader, Then hit KSP then diffuse. Then there is a box that says None (texture), Put your .png UV image file there, Don\u0027t have one? Leave it blank then. Now select the game object, Hit add component \u0026gt; KSP \u0026gt; Part Tools. So you just added a Part Tools componant to the game object NOT THE CUBE OR THE PART, Now set Model name to \u0022model\u0022, File URL? Hit set then go to the TestAniPart folder, Set it there. Texture format? Use mbm or png. Then hit \u0022write\u0022! If it doesn\u0027t work then set the File URL(the output) to that folder processed models in your assets. Make sure that model.mu is in TestAniPart. Now put your .png or .mbm in there too! Next thing, Go to the ksp directory(E:\\Steam\\SteamApps\\common\\Kerbal Space Program\\GameData\\Squad\\Parts\\Utility\\LandingLeg For me) Go to Gamedata \u0026gt; Squad \u0026gt; Parts \u0026gt;Utility \u0026gt; Landingleg. Yes landing leg! Open the CFG file in notepad then close out of the directory. Open TestAniPart. Right click and hit new then new text document. When naming, Delete the whole name then put part.cfg so it changes it from .txt to .cfg. Doesn\u0027t change? Instead open notepad and then hit Save As and go to TestAniPart as set the save setting to All Files, then do part.cfg!\u003C/p\u003E\u003Cp\u003ECFG:\u003C/p\u003E\u003Cp\u003ECopy all the data from the landing leg cfg to your cfg, Edit it to your liking and make sure to change name = (at top) to something different so it works. Now go to the bottom where you see MODULE {name = modulelandingleg} blah blah yeah. Put this instead:\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003Ename = ModuleAnimateGeneric //Dont touch\u003C/p\u003E\u003Cp\u003EanimationName = Extend // The animation name\u003C/p\u003E\u003Cp\u003EstartEventGUIName = Extend //Pretty Self explanatory\u003C/p\u003E\u003Cp\u003EendEventGUIName = Retract\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003Ename = ModuleAnimateGeneric \u003C/p\u003E\u003Cp\u003EanimationName =Retract //Rename this to the retract animation name\u003C/p\u003E\u003Cp\u003EstartEventGUIName = Retract \u003C/p\u003E\u003Cp\u003EendEventGUIName = Extend //Flip these. In theory this should work!\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EKEEP MODULE NAME = TARGETPART\u003C/p\u003E\u003Cp\u003ENow with everything set up, Put TestAniPart in Gamedata \u0026gt; myparts \u0026gt; Parts.\u003C/p\u003E\u003Cp\u003ERun KSP and boom!\u003C/p\u003E\u003Cp\u003EI really hope this help! Spent the last hour typing this so my hands hurt!\u003C/p\u003E\u003Cp\u003ERep would be nice! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003ESincerely, SRG\u003C/p\u003E\u003Cp\u003EP.S. Hop on esper.net channel #kspmodders They give some nice help \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"FiresThatBurn","CreatedById":74154,"CreatedDateTime":"2014-06-18T15:18:00Z","Content":"\n\u003Cp\u003EI am stilled baffled on how I managed to write that in an hour....All my teachers see that, \u0022He should of made all his reports like that!\u0022 lol\u003C/p\u003E\n"},{"CreatedByName":"FiresThatBurn","CreatedById":74154,"CreatedDateTime":"2014-07-03T13:13:35Z","Content":"\n\u003Cp\u003EI made some very big issues. PM me if you need help.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-07-03T13:55:11Z","Content":"\n\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003Ename = ModuleAnimateGeneric \u003C/p\u003E\u003Cp\u003EanimationName =Retract //Rename this to the retract animation name\u003C/p\u003E\u003Cp\u003EstartEventGUIName = Extend\u003C/p\u003E\u003Cp\u003EendEventGUIName = Retract\u003C/p\u003E\u003Cp\u003EanimSwitch = True //will set gui button name to \u0022Retract\u0022 if part is Extended and play Extend animation in reverse when \u0022Retract\u0022 is clicked\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003Eyou can use the \u0022animSwitch = True\u0022 line instead of using a 2nd module to reverse the animation.\u003C/p\u003E\n"}]}