{"TopicId":154120,"ForumId":29,"TopicTitle":"World, screen and scaled spaces","CreatedByName":"TaxiService","CreatedById":74999,"CreatedDateTime":"2016-12-28T14:05:58Z","PageNum":1,"Articles":[{"CreatedByName":"TaxiService","CreatedById":74999,"CreatedDateTime":"2016-12-28T14:05:58Z","Content":"\n\u003Cp\u003E\nHi, we (RemoteTech team) are perplexed by a coordination-space\u00A0issue (\u003Ca href=\u0022https://github.com/RemoteTechnologiesGroup/RemoteTech/issues/711\u0022 rel=\u0022external nofollow\u0022\u003Elink\u003C/a\u003E). Our problem is basically that\u00A0satellite connection lines in Map View (aka planetarium) sometimes invert in axis for no apparent reason. We tracked down to the offending codes in our RT codebase (\u003Ca href=\u0022https://github.com/RemoteTechnologiesGroup/RemoteTech/blob/develop/src/RemoteTech/UI/NetworkLine.cs#L67-L68\u0022 rel=\u0022external nofollow\u0022\u003Elink\u003C/a\u003E).\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nvar start = camera.WorldToScreenPoint(ScaledSpace.LocalToScaledSpace(edge.A.Position));\nvar end = camera.WorldToScreenPoint(ScaledSpace.LocalToScaledSpace(edge.B.Position));\n//the edge (A, B) is a connection between two satellites/ground stations\n//Position is in the world space\u003C/pre\u003E\n\u003Cp\u003E\nWe observed that the start and end vectors sometimes are suddenly shifted when a player\u0027s camera satisfies the conditions for shifting KSP\u0027s scaled space factor/offset, resulting in providing completely different vectors to RemoteTech codes. Given that we, the fresh blood for RT, are relatively new to the KSP mod scene, we\u00A0seek the assistance of expert modders regarding KSP\u0027s world, screen and scaled spaces.\n\u003C/p\u003E\n\u003Cp\u003E\nOur question is: How should we solve the problem, that may be linked to KSP\u0027s inner codes in LocalToScaledSpace()?\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint prettyprinted\u0022\u003E\n\u003Cspan class=\u0022com\u0022\u003E//Decompiled ScaledSpace class of KSP\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Estatic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EVector3d\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003ELocalToScaledSpace\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan\u003EVector3d\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E localSpacePoint\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Ereturn\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E localSpacePoint \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E*\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Edouble\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan\u003EScaledSpace\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EInverseScaleFactor\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E-\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EScaledSpace\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EtotalOffset\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-12-28T14:17:42Z\u0022 title=\u002212/28/2016 02:17  PM\u0022 data-short=\u00227 yr\u0022\u003EDecember 28, 2016\u003C/time\u003E by TaxiService\u003C/strong\u003E\n\u003C/span\u003E\n"}]}