{"TopicId":84774,"ForumId":29,"TopicTitle":"Getting total weight of vehicle in the VAB/SPH","CreatedByName":"johnqevil","CreatedById":119237,"CreatedDateTime":"2014-09-16T22:03:08Z","PageNum":1,"Articles":[{"CreatedByName":"johnqevil","CreatedById":119237,"CreatedDateTime":"2014-09-16T22:03:08Z","Content":"\n\u003Cp\u003EThis is likely a stupid question, but I\u0027m not sure where to start. This is more of a \u0022force myself to learn\u0022 project as opposed to something actually useful. I\u0027d like to, for now, get the total weight of an assembled vehicle while in the editor. I don\u0027t necessarily need a full-blown howto, but a starting point would be more than I have now.\u003C/p\u003E\n"},{"CreatedByName":"m4v","CreatedById":67965,"CreatedDateTime":"2014-09-18T00:48:38Z","Content":"\n\u003Cp\u003EThere\u0027s EditorLogic.startPod that always point to the root part, from there you can recursively walk the part\u0027s children and calculate the mass. There\u0027s also EditorLogic.fetch.getSortedShipList () that directly gives you a list of parts. You might have to deal with part symmetry as well.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-09-18T01:34:59Z","Content":"\n\u003Cp\u003EYou should be able to iterate through SortedShipList and add to up all the part.mass \u002B sum(part.Resources amount * density).\u003C/p\u003E\n"},{"CreatedByName":"The_Duck","CreatedById":1156,"CreatedDateTime":"2014-09-18T03:58:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003Epart.mass \u002B sum(part.Resources amount * density)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOr, more simply, part.mass \u002B part.GetResourceMass().\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-09-18T04:01:49Z","Content":"\n\u003Cp\u003EDoes part.mass take into account the masslessness of physics-disabled parts? You might have to account for that manually.\u003C/p\u003E\n"},{"CreatedByName":"m4v","CreatedById":67965,"CreatedDateTime":"2014-09-18T13:54:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EDoes part.mass take into account the masslessness of physics-disabled parts? You might have to account for that manually.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eno, you have to check for that manually. And make a special case for the small landing gear, since its physicless is implemented in a hacky way and isn\u0027t set until the flight starts.\u003C/p\u003E\n"},{"CreatedByName":"johnqevil","CreatedById":119237,"CreatedDateTime":"2014-09-18T14:06:46Z","Content":"\n\u003Cp\u003EWow, thanks guys! I think I\u0027ve got enough to get started now.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-09-18T23:06:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022johnqevil\u0022 data-cite=\u0022johnqevil\u0022\u003E\u003Cdiv\u003EWow, thanks guys! I think I\u0027ve got enough to get started now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBasically for RealChute, I did it with a Part extension method and a sum.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//Part extension method, must be in a static class\u003Cbr\u003Epublic static float TotalMass(this Part part)\u003Cbr\u003E{\u003Cbr\u003E    return part.physicalSignificance != Part.PhysicalSignificance.NONE ? part.mass \u002B part.GetResourceMass() : 0f;\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E//Method to get vessel mass, anywhere else\u003Cbr\u003Epublic float VesselMass()\u003Cbr\u003E{\u003Cbr\u003E    return EditorLogic.SortedShipList.Sum(p =\u0026gt; p.TotalMass());\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat does the job nicely and keeps it clean and prevent you from having to physiclsless check everytime you want to get mass.\u003C/p\u003E\n"}]}