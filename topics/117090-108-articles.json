{"TopicId":117090,"ForumId":36,"TopicTitle":"[WIP][1.8.x] SSTULabs - Low Part Count Solutions (Orbiters, Landers, Lifters) - Dev Thread [11-18-18]","CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2015-07-28T18:13:57Z","PageNum":108,"Articles":[{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-03-31T19:57:56Z","Content":"To be fair / honest -- investigating a replacement / proper setup for module-switching is literally the first thing on my to-do list after the 1.1 update is completed.  Will be needing it for the station/base parts extensively, and many existing parts could have cool alternate (optional) functionality added (want some Falcon style landing legs on your main tanks?... or solar panels on upper stages?  or optional solar/rtg/legs/rcs on...whatever?).\n\nNone of the existing parts (aside from LC) need it, so my initial plan is to not let those parts hold back the rest of the mod.  I\u0027ll have to find some interim solution for the LC-POD ascent fuel tanks (or allow those as separate parts temporarily).\n\nIf I do make an MFT out of the LC-FUEL tanks, it would come with the full range of fuel/resource switching options... so you could use them for LH2 or monoprop if you wanted."},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-03-31T20:17:26Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) Any idea how you\u0027re going to implement the module switching yet?  There are two options I see:\n\n1. Hold the ConfigNodes in memory (as strings because they serialize) and actually create/destroy modules as needed.  Might cause a bit of overhead when switching.  Not sure if action groups would survive.\n2. Set enabled and isEnabled on each module, which prevents updates, and disable/enable the part action UI elements.  Might lead to unexpected weirdness in some situations.\n\n**Edited \u003Ctime datetime=\u00222016-03-31T20:17:35Z\u0022 title=\u002203/31/2016 08:17  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 31, 2016\u003C/time\u003E by blowfish**"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-03-31T20:31:53Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, blowfish said:\n\u003E \n\u003E \n\u003E [@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) Any idea how you\u0027re going to implement the module-switching yet?  There are two options I see:\n\u003E \n\u003E \n\u003E \n\u003E 1. Hold the ConfigNodes in memory (as strings because they serialize) and actually create/destroy modules as needed.  Might cause a bit of overhead when switching.  Not sure if action groups would survive.\n\u003E 2. Set enabled and isEnabled on each module, which prevents updates, and disable/enable the part action UI elements.  Might lead to unexpected weirdness in some situations.\n\u003E \n\n#1 -- if I can pull it off.  Not too worried about the overhead, as it should be about the same as if stock were adding those modules.\n\n#2 is basically what I was doing; however I had only used modules that I wrote so that I could enforce the disabled status; was not aware that there was a .enabled property for modules/components (that actually worked/did anything).  Hacky, ugly, resulted in tons of unused data in the persistence file, and the \u0027disabled\u0027 modules still recieved tick/frame updates (but just ignored them).  The .enabled flag would probably clean up some of that (e.g. unity would not fire the FixedUpdate events), but I\u0027m unsure if KSP respects those flags while doing its own updates (e.g. OnFixedUpdate).  Also caused hell with modules that needed a specific model setup before they were enabled; it was -very- config order-dependent and code-order dependent.\n\nI intend on specifying the MODULE config nodes as sub-nodes inside of the ModuleSwitch module config:\n\nMODULE  \n\n{  \n\n    name = ModuleSwitch...or whatever  \n\n    MANAGEDMODULE  \n\n    {  \n\n        name = managedModuleName  \n\n        .....xxxx....module config fields....  \n\n    }  \n\n}\n\nAnd from there I would manually managed the save-data for each module (I think).  Although... it might \u0027just work\u0027 as long as I (re)inserted the modules early in the loading sequence.\n\nNone of the modules would be inserted or activated on the prefab; so it would not have any \u0027dangling\u0027 module save-data.  Still have not been able to find a way to prevent the \u0027cannot locate module...blahblah...\u0027 error messages from extraneous modules... but if I can pull it off properly... that shouldn\u0027t be a problem.\n\nFrom there I would have some ... interlinking... code between the MFT / whatever other modules that would tell the ModuleSwitch to enable/disable things as needed.\n\nStill going to be a fairly complex setup, I just want it to be less of a hack than it was.  Also still a lot of stuff to think through / test / work out."},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-03-31T20:41:29Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) Makes sense.  Just for reference, enabled affects whether Unity events fire, and isEnabled affects whether KSP events fire (OnUpdate, OnFixedUpdate, etc.  Note that OnStart happens regardless)."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-04-01T00:11:17Z","Content":"Well, took some reworking.. but the texture name replacement program is working well ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)  It was mangling the bytes in the bytes-\u003Estring-\u003Ebytes conversion for some of the bytes of model data, so I had to resort to even more low-level byte-by-byte handling.\n\nNow to work on updating... ~400 file names ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022)\n\nThink anyone else would be interested in the functionality?  Is a simple .jar file with a .cfg file to determine what model/texture to update (of course ui/startup can always be improved).\n\nHopefully I\u0027ll have a good portion of the parts \u0027working\u0027 tonight, I don\u0027t really see to many problems that could pop up with most of it.. just a matter of time ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-04-01T03:53:12Z","Content":"Well... things mostly work.  Definitely things that will need to be fixed... but nothing is throwing null-refs, crashing, or behaving too (unexpectedly) strange (so far...).  Engine gimbals are definitely out of whack and will need re-export of most engine-enabled parts (most engines gimbal in incorrect directions at the moment due to their gimbal transforms not being oriented the same as the thrust transform).\n\nReally not a fan of the graphics/shading though...\n\n![F9MwpkQ.png](http://i.imgur.com/F9MwpkQ.png)\n\nIts a bit better in flight, but still something seems off;\n\n![3Ar5rjR.png](http://i.imgur.com/3Ar5rjR.png)\n\n-Might- have some initial versions sometime over the weekend, barring finding anything too broken."},{"CreatedByName":"komodo","CreatedById":102065,"CreatedDateTime":"2016-04-01T05:18:45Z","Content":"Depending how systemic the filename changes need to be, that could be a sed problem, as much as I dislike its syntax; it does do good work in the right situations...\n\nBut I feel you for sure on the bytes\u003Estring\u003Ebytes thing... It\u0027s always something silly like the whole \u0022bytes\u0022 part not working, right? (Mine are usually of the style \u0022well you worked perfectly, only you did something entirely different than I intended...)"},{"CreatedByName":"trooperMNG","CreatedById":139886,"CreatedDateTime":"2016-04-01T12:33:21Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, Shadowmage said:\n\u003E \n\u003E \n\u003E Well... things mostly work.  Definitely things that will need to be fixed... but nothing is throwing null-refs, crashing, or behaving too (unexpectedly) strange (so far...).  Engine gimbals are definitely out of whack and will need re-export of most engine-enabled parts (most engines gimbal in incorrect directions at the moment due to their gimbal transforms not being oriented the same as the thrust transform).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Really not a fan of the graphics/shading though...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![F9MwpkQ.png](http://i.imgur.com/F9MwpkQ.png)](http://i.imgur.com/F9MwpkQ.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Its a bit better in flight, but still something seems off;\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![3Ar5rjR.png](http://i.imgur.com/3Ar5rjR.png)](http://i.imgur.com/3Ar5rjR.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E -Might- have some initial versions sometime over the weekend, barring finding anything too broken.\n\u003E \n\nalso stock models and textures are pretty awful. C\u0027mon Squad, let Porkjet do some renovation!"},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2016-04-01T13:55:51Z","Content":"I don\u0027t think it has anything to do with Porkjet, all parts look \u0022off\u0022, I think they have everything under control yet."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-04-01T15:33:53Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Jimbodiah said:\n\u003E \n\u003E \n\u003E I don\u0027t think it has anything to do with Porkjet, all parts look \u0022off\u0022, I think they have everything under control yet.\n\u003E \n\nIndeed, its \u0027just\u0027 the lighting and/or shading.\n\nBut I don\u0027t think they are going to \u0027fix\u0027 it; what you see now is likely what we will be stuck with.  Sad... all my parts look terrible in-game now, even though they still look fine in blender.  I guess I won\u0027t be spending much time on texturing anymore... if its all going to look like @#%^^ anyway, I\u0027ll likely just be slapping some plain diffuse on stuff and calling it good.  Certainly won\u0027t be spending hours making nice looking spec masks if they are just ignored/unused.  ....and I was previously greatly looking forward to the shader updates....  that\u0027ll teach me...\n\nGot most of the \\_engines\\_ re-exported last night to fix their gimbal orientations; seem to work properly now even when used in clusters (aside from part.mass...).  Have not yet updated the more complex / verier equipped engines as I will need to do some experimentation to figure out the unity end of things and will need to update some code for them as well.\n\nSo.. still need to re-export the RS-68, RD-107/8, RD-0110 engines.  Will also need to re-rig and re-export the SC-A/B/C/E engine equipped parts; those are the painful ones....parts are so complex and it is so very easy to miss something during re-rigging.\n\nSC-E / landing gear will need to be rebuilt/re-rigged as well.  Can only hope I can adapt things to the new stock hierarchy; which I\u0027ll need to figure out before I can even start working on them.\n\nLooking promising for a release tomorrow.  Have a few mandatory code-side changes to make regarding the part.mass stuff (and likely a bug report to submit if zero-mass parts still crash even though they have modules setting their mass), and the engine cluster changes (for the differing thrust on the same module.... though I\u0027m tempted to just leave them as-is with multiple modules...)."},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2016-04-01T16:15:33Z","Content":"A quick look at the 1.1 forum shows no threads regarding the look of parts at all. Perhaps a 1.05/1.1 comparison of parts might be a useful post over there."},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2016-04-01T16:20:15Z","Content":"Just made one, although it has been pointed out in other topics in that sub-forum though. But not many people are really bothered it seems. I even have ships that flap around like rubber dildos when you launch them, and I am told that is how it is supposed to work, \u0027cause kerbals and all. As KJR is not working yet, I am stuck strutting everything like a mofo to get it off the ground."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-04-01T16:58:03Z","Content":"\u003E \n\u003E \n\u003E 36 minutes ago, Jimbodiah said:\n\u003E \n\u003E \n\u003E Just made one, although it has been pointed out in other topics in that sub-forum though. But not many people are really bothered it seems. I even have ships that flap around like rubber dildos when you launch them, and I am told that is how it is supposed to work, \u0027cause kerbals and all. As KJR is not working yet, I am stuck strutting everything like a mofo to get it off the ground.\n\u003E \n\nLoL... like a rubber... duck... indeed.  Couldn\u0027t have made a better analogy... probably not the best language for the forums, but quite accurate of a description.\n\nNot often can posts make me smile/laugh... that one did though ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"benjee10","CreatedById":84110,"CreatedDateTime":"2016-04-01T17:01:18Z","Content":"Re things looking terrible at the moment, I\u0027m pretty sure that what he have now is a hacked together fix to keep the old shaders working fine in Unity 5. Inclusion of PBR shaders has been pushed back to 1.2. I believe (though may be wrong) that PBR shaders do currently work in KSP, it\u0027s just that the stock parts haven\u0027t been converted to using them yet, so you may be able to use the fancy new shaders on your parts as-is."},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2016-04-01T17:05:35Z","Content":"The ticket I made got an answer that the behavior is just like in real life, if it is very long and narrow it will bend and wobble. Yeah, sure. Can\u0027t wait for KJR to be updated so they can fix the game at least on that front, as Squad is not intending to do anything about it apparently."},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2016-04-01T17:09:46Z","Content":"Yeah, the struts thing has always been absurd. If every craft you built was untextured, but you had to manually drag the same, white texture onto every part, they\u0027d still be defending that, too, I guess \u0022you have to paint stuff in RL, right?\u0022"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-04-01T17:18:36Z","Content":"\u003E \n\u003E \n\u003E 16 minutes ago, benjee10 said:\n\u003E \n\u003E \n\u003E Re things looking terrible at the moment, I\u0027m pretty sure that what he have now is a hacked together fix to keep the old shaders working fine in Unity 5. Inclusion of PBR shaders has been pushed back to 1.2. I believe (though may be wrong) that PBR shaders do currently work in KSP, it\u0027s just that the stock parts haven\u0027t been converted to using them yet, so you may be able to use the fancy new shaders on your parts as-is.\n\u003E \n\nI\u0027m going to give it a try, but I believe it is not fully supported/implemented.  If I remember reading their dev-notes correctly at least the reflection light-probes will not be setup properly; so you might be able to get -some- bits of the PBR shading, but I don\u0027t think it will work fully as it is supposed to."},{"CreatedByName":"Theysen","CreatedById":144656,"CreatedDateTime":"2016-04-01T17:21:32Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, tater said:\n\u003E \n\u003E \n\u003E A quick look at the 1.1 forum shows no threads regarding the look of parts at all. Perhaps a 1.05/1.1 comparison of parts might be a useful post over there.\n\u003E \n\nI don\u0027t get how people claim that the editor thumbnails don\u0027t look different at all? They\u0027re flat and washed out, not much contrast etc. Or am I blind? I really really hope it\u0027s not like [@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) said they won\u0027t fix anything about it. ![:o](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png \u0022:o\u0022)"},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2016-04-01T17:23:38Z","Content":"I\u0027m a 2d class citizen, so I have to rely on screenshots."},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2016-04-01T17:32:06Z","Content":"Not even mentioning the huge navball and IVA pics that block half the screen, and those new messed up orbit lines that are next to useless now (if you can even see them).\n\nIt\u0027s like no one played the new release before going beta with it: most bugs/issues that are being posted can be encountered within 5-10 minutes of game play. Not to mention none of the suggested items by players has been addressed. So now it will be a wait for 1.2, which will be available Soon\u2122, 2017-ish.\n\nYes, I\u0027m liquiding (omg, they actually censor the p word for urinating here) vinegar right now ![:cool:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif \u0022:cool:\u0022)\n\nI would break out Elite Dangerous again if there was any point in playing that (next update maybe, also Soon\u2122). So I\u0027m back to WoT for now.\n\n**Edited \u003Ctime datetime=\u00222016-04-01T17:34:52Z\u0022 title=\u002204/01/2016 05:34  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 1, 2016\u003C/time\u003E by Jimbodiah**"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-04-01T17:54:37Z","Content":"-If- I can get the PBR working... you guys might expect some engines that look more like:\n\n(Screenshot from unity editor; should generally reflect the in-game look under bright lighting)\n\n![Glgbp8l.png](http://i.imgur.com/Glgbp8l.png)\n\nThat is using the existing textures;  I merely apply the spec mask to itself and use that composite texture as the metal map.  Quick, easy, works well (or looks better than the current stock shading); though still room for improvement with proper differentiated metal and smooth maps.\n\nThough, as stated earlier, I really don\u0027t think they\u0027ve got the reflection support working/fixed in-game.  Going to try it out though, especially as it only takes a few seconds to make the composite metal/smooth texture from the existing spec mask textures (you can thank blender for me having the spec masks laying around as full textures; blender doesn\u0027t support spec(A) setup).\n\n^^ This is why I wanted the updated shaders to begin with...."},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2016-04-01T18:09:58Z","Content":"If it were that simple I think someone would have run all the stock parts before releasing it."},{"CreatedByName":"ComatoseJedi","CreatedById":91567,"CreatedDateTime":"2016-04-01T18:31:56Z","Content":"\u003E \n\u003E \n\u003E 21 minutes ago, Jimbodiah said:\n\u003E \n\u003E \n\u003E If it were that simple I think someone would have run all the stock parts before releasing it.\n\u003E \n\nYou know Ven is going to have a field day with the stock parts, soon-ish."},{"CreatedByName":"Pappystein","CreatedById":85755,"CreatedDateTime":"2016-04-01T19:03:13Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Shadowmage said:\n\u003E \n\u003E \n\u003E -If- I can get the PBR working... you guys might expect some engines that look more like:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E (Screenshot from unity editor; should generally reflect the in-game look under bright lighting)\n\u003E \n\nThat is an awesomely detailed engine.  \n\nRE shaders in 1.1.   Everything I have seen (which is officially scant little admittedly) is that this is normal in the testing process.   During experimental they start with a low overhead build and build up to full release quality for graphics as progress in fixing non graphical bugs starts to wined down.   The less variables impacting things the better for testing purposes."},{"CreatedByName":"JoseEduardo","CreatedById":127759,"CreatedDateTime":"2016-04-01T21:03:44Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, Jimbodiah said:\n\u003E \n\u003E \n\u003E I even have ships that flap around like rubber dildos when you launch them, and I am told that is how it is supposed to work, \u0027cause kerbals and all. As KJR is not working yet, I am stuck strutting everything like a mofo to get it off the ground.\n\u003E \n\nI can\u0027t tell how much I laughed at this... but you know my standing against politically correct, so that shouldn\u0027t come as a surprise ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)  \n\nalso waiting for KJR, tried out Proton and Zenit and they behaved exactly like a rubber dildo, except they were flying way past mach 1, so it\u0027s needless to say they were quite explosive... I could try making some more politically incorrect jokes, but....  \n\n\u003E \n\u003E \n\u003E 3 hours ago, Jimbodiah said:\n\u003E \n\u003E \n\u003E Yes, I\u0027m liquiding **(omg, they actually censor the p word for urinating here)** vinegar right now ![:cool:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif \u0022:cool:\u0022)\n\u003E \n\nyeah... there\u0027s that preventing these jokes...  \n\nthe politically correct censorship is up even on PMs ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)  \n\n\u003E \n\u003E \n\u003E Quote\n\u003E \n\u003E \n\u003E I would break out Elite Dangerous again if there was any point in playing that (next update maybe, also Soon\u2122). So I\u0027m back to WoT for now.\n\u003E \n\nAFAIK the next update is going to be the engineer thing... but anyways, that should have some interesting stuff to do... once they release it, wanna fly in a wing? I still need to do some trading to buy the upgrades though...\n\n**Edited \u003Ctime datetime=\u00222016-04-01T21:05:25Z\u0022 title=\u002204/01/2016 09:05  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 1, 2016\u003C/time\u003E by JoseEduardo**"}]}