{"TopicId":106542,"ForumId":29,"TopicTitle":"this is a biggie, Where are the buildings kept in ksp and how can they be edited/replased","CreatedByName":"amankd","CreatedById":135588,"CreatedDateTime":"2015-05-01T12:04:20Z","PageNum":1,"Articles":[{"CreatedByName":"amankd","CreatedById":135588,"CreatedDateTime":"2015-05-01T12:04:20Z","Content":"speaks for its self \n\np.s. #bringbackthebarn"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-05-01T16:04:40Z","Content":"I experimented with this in 0.90 but had to prioritize my time a bit so nothing ever came of it. It still works in 1.0. I\u0027m just going to barf it up in hopes it\u0027ll be useful\n\n    [KSPAddon(KSPAddon.Startup.MainMenu, true)]public class Test_ChangeSpaceCenterBuildingsExternal : MonoBehaviour{    private void Start()    {        Log.Debug(\u0022Testing building external changes\u0022);        var facility =            FlightGlobals.Bodies.Where(cb =\u003E cb.isHomeWorld)                .SelectMany(cb =\u003E cb.gameObject.GetComponentsInChildren(true))                .FirstOrDefault(f =\u003E f.id == \u0022SpaceCenter/VehicleAssemblyBuilding\u0022);        if (facility.IsNull()) throw new InvalidOperationException(\u0022facility\u0022);        Log.Normal(\u0022UpgradeableFacility:\u0022);        facility.gameObject.PrintComponents();        var model = GameDatabase.Instance.databaseModel.Find(            go =\u003E go.name == \u0022BuildYourOwnSpaceCenter/structures/TestCube/TestCube\u0022);        if (model == null) Log.Error(\u0022failed to find model!\u0022);        model.AddComponent();        model.AddComponent().objectName = \u0022That ugly box\u0022;        model.SetLayerRecursive(15);        model.SetActive(true);        model.transform.parent = facility.GetUpgradeLevels()[0].facilityPrefab.transform;        model.transform.localPosition = Vector3.zero;        DontDestroyOnLoad(model);        var uft = facility.gameObject.AddComponent();        uft.ImpersonateFacility(facility);        uft.SetPrefab(0, model);        Destroy(facility);    }}class UpgradeableFacilityTweakable : UpgradeableFacility{    public void ImpersonateFacility(UpgradeableFacility target)    {        upgradeLevels = target.GetUpgradeLevels();        facilityTransform = target.GetFacilityTransform();        setup = false;        preCompiledId = true;        id = target.id;        facilityLevel = target.FacilityLevel;        SetupLevels();        for (int i = 0; i \u003C upgradeLevels.Length; \u002B\u002Bi)            upgradeLevels[i].levelCost = 1000f * i;    }    public void SetPrefab(int level, GameObject prefab)    {        upgradeLevels[level].facilityPrefab = prefab;        setup = false;        SetupLevels();    }}\n\nThose are the main pieces. The interiors are simpler (you can just swap the model right out). Not a complete solution (the structure can\u0027t be destroyed -- haven\u0027t investigated that yet) but should jumpstart anyone willing to make the effort"}]}