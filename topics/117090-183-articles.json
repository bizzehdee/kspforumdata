{"TopicId":117090,"ForumId":36,"TopicTitle":"[WIP][1.8.x] SSTULabs - Low Part Count Solutions (Orbiters, Landers, Lifters) - Dev Thread [11-18-18]","CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2015-07-28T18:13:57Z","PageNum":183,"Articles":[{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-09-15T01:42:59Z","Content":"For the asset bundles, it might be worth trying the part tools that are included with Porkjet\u0027s parts.  I\u0027m not 100% sure they will fix the problem, but I think it\u0027s worth a shot"},{"CreatedByName":"mechanicH","CreatedById":167929,"CreatedDateTime":"2016-09-15T04:45:38Z","Content":"Hello all,   just got a quick question, Does anyone get the \u0022NullReferenceException: Object reference not set to an instance of an object\u0022  code spam in the debug when you use the orbital re entry command pod-C. For some reason it does that all the time and hits my fps very hard in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E. just wondering if this is normal or if there is a fix for this?."},{"CreatedByName":"Theysen","CreatedById":144656,"CreatedDateTime":"2016-09-15T05:44:39Z","Content":"\u003E \n\u003E \n\u003E 56 minutes ago, mechanicH said:\n\u003E \n\u003E \n\u003E Hello all,   just got a quick question, Does anyone get the \u0022NullReferenceException: Object reference not set to an instance of an object\u0022  code spam in the debug when you use the orbital re entry command pod-C. For some reason it does that all the time and hits my fps very hard in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E. just wondering if this is normal or if there is a fix for this?.\n\u003E \n\n\u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E installed?"},{"CreatedByName":"mechanicH","CreatedById":167929,"CreatedDateTime":"2016-09-15T15:27:21Z","Content":"yes  i do have \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E installed. Should i take it out?"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-09-15T15:33:01Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, mechanicH said:\n\u003E \n\u003E \n\u003E yes  i do have \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E installed. Should i take it out?\n\u003E \n\nYes;  SSTU is currently incompatible with \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E ( [https://github.com/shadowmage45/SSTULabs/issues/346](https://github.com/shadowmage45/SSTULabs/issues/346) ).  Fix has been submitted to \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E and is awaiting an updated release; you likely won\u0027t see it for 1.1.3 though, seems like the next \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E update will be for KSP 1.2.\n\nSadly your options at the moment are basically to remove \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E or SSTU."},{"CreatedByName":"mechanicH","CreatedById":167929,"CreatedDateTime":"2016-09-15T15:36:32Z","Content":"well my option is clear then, i rather keep your mod. bye bye \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E for now. thank you for the quick respond guys, i really appreciate it,  As always keep up the amazing work, and thank you once again."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-09-15T16:43:56Z","Content":"\u003E \n\u003E \n\u003E 23 hours ago, falken said:\n\u003E \n\u003E \n\u003E [...]  \n\u003E \n\u003E On that subject, Shadowmage do you have plans to make an S1-B mount? You have the engine cluster setup already, but can\u0027t see an S1-B mount. Not a huge deal though.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Something I was also wondering, Shadowmage... are you able to make the engine able to throttle down to nearly nothing, beyond what would normally flame out the engine? I have setup a thrust curve for my SRBs that throttles them down to just above the flameout range for a cleaner \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E cutoff with the candles still lit, but when you upscale beyond 1.875, sepatrons are needed around the base of the \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E to stop them overtaking the main launcher.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Again, this isn\u0027t a huge issue, I\u0027m just curious.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [...]\n\u003E \n\nS1-B mount?  Isn\u0027t it just a straight shroud mount with fins attached?  (the straight shroud already exists; I cannot add fins due to KSP\u0027s aero handling code).\n\nSRBs -- Sorry, but no, I don\u0027t have any control over when the engine stops producing thrust or its minimum thrust before flame-out -- that is all part of the stock ModuleEngines code that is not under my control."},{"CreatedByName":"RedParadize","CreatedById":129285,"CreatedDateTime":"2016-09-15T16:51:12Z","Content":"Looks like 1.2 allow AO via vertex colors. Its not new tech but it might allow you to do some of the stuff you want to do. (it won\u0027t allow to remove occlusion for pipe/no pipe thing I believe.)"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-09-15T17:14:29Z","Content":"\u003E \n\u003E \n\u003E 14 minutes ago, RedParadize said:\n\u003E \n\u003E \n\u003E Looks like 1.2 allow AO via vertex colors. Its not new tech but it might allow you to do some of the stuff you want to do. (it won\u0027t allow to remove occlusion for pipe/no pipe thing I believe.)\n\u003E \n\nI\u0027m not sure if it\u0027s a new feature, just that this might be the first time it\u0027s actually used.  Note that not all the AO on Porkjet\u0027s new parts is done with vertex colors - most of what you see on the engines is baked into the texture - what\u0027s done with vertex colors is (1) shadowing the entire engine on the boattail variants and (2) shadowing the tank ends.  Vertex color AO in general has a lot less resolution than baked AO, and the AO from the pipes is really at too small a scale (compared to the mesh) for that to work in this case."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-09-15T17:27:40Z","Content":"Indeed did a bit of research/investigation on this the other day when I first say that info; it turns out the resolution of vertex-based AO depends entirely on the resolution/subdivision of the mesh.  Most of mine are fairly \u0027low-poly\u0027 in style, lacking any subdivision, and would look terrible with vertex-based AO.\n\nI still think the custom shader will be the \u0027proper\u0027 way to go about getting swappable AO on the meshes.  It certainly has higher overhead than vertex-colors, but is also so much more powerful, and can be even further customized if needed.\n\nSpeaking of which... I think I\u0027ll d/l U5.4 and see about recompiling the shader and seeing if it still works in game tonight."},{"CreatedByName":"RedParadize","CreatedById":129285,"CreatedDateTime":"2016-09-15T17:34:57Z","Content":"Yep, the cylinder, unless if you add much more division, will not allow much details. I have worked with vextex color in ~~2007ish~~ 2009 in unity (Lazy Raiders), on our side we were not just using it for AO but for lighting and color itself, it allow to multiply texture with vertex attribute and induce more variation with less texture. Downside is as a workflow its pretty crappy...\n\nExemple: You have a AO texture, you use the vertex color/lighting to multiply divide AO when facing light. At least that what I recall...\n\n**Edited \u003Ctime datetime=\u00222016-09-15T17:49:54Z\u0022 title=\u002209/15/2016 05:49  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 15, 2016\u003C/time\u003E by RedParadize**"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-09-15T18:21:40Z","Content":"Okay... so on the note of custom shaders...\n\nIt is looking like I may need to build custom shaders for each supported platform (Win, Mac, Linux), or at least Win \u0026 Mac/Linux (they should both use OpenGL?).  Then, at load-time, I would load only the shaders tagged for that specific OS/platform/rendering setup (not sure if I need both D3D and OpenGL compiled shaders, or if the compiled shader includes instructions for both where applicable (Windows)).\n\nI build and develop on Windows.  I do not have access to any Mac or Linux pcs to do any testing on those.  **Is there anyone with a Mac and/or Linux install who would be interested in helping to test shader compatibility?**\n\nThe reason the AssetBundle compiler no longer works in Unity 5.4 is due to the Unity BuildPipeline.BuildAssetBundles() method now requiring that a Target Platform be specified as a parameter (previously was optional), which the PartTools currently do not support (even the ones from PorkJet\u0027s parts only work in 5.2.4).\n\nThis was easy enough to solve though.  A custom script to build asset bundles is actually included as an example in the Unity documentation ( [https://docs.unity3d.com/Manual/BuildingAssetBundles.html](https://docs.unity3d.com/Manual/BuildingAssetBundles.html) ) and will work well enough for my purposes after a bit of customization.  It won\u0027t build KSP-compatible AssetBundles (with the KSP metadata file), but as I can\u0027t actually get KSP\u0027s AssetBundle loading code to actually load things, that doesn\u0027t matter anyway (I use my own loading mechanisms, KSP never even sees my bundles as potentials for loading)."},{"CreatedByName":"RedParadize","CreatedById":129285,"CreatedDateTime":"2016-09-15T18:46:42Z","Content":"I have a linux at work. I could test it if you want. Do it need 1.2 or 1.1.3?"},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2016-09-15T19:12:41Z","Content":"I have a Mac. I have both KSP versions installed still (1.1.3 and 1.2), and I can test on Yosemite and El Capitan (on my daughter\u0027s laptop).\n\n**Edited \u003Ctime datetime=\u00222016-09-15T19:13:46Z\u0022 title=\u002209/15/2016 07:13  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 15, 2016\u003C/time\u003E by tater**"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-09-15T20:26:24Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, RedParadize said:\n\u003E \n\u003E \n\u003E I have a linux at work. I could test it if you want. Do it need 1.2 or 1.1.3?\n\u003E \n\n\u003E \n\u003E \n\u003E 1 hour ago, tater said:\n\u003E \n\u003E \n\u003E I have a Mac. I have both KSP versions installed still (1.1.3 and 1.2), and I can test on Yosemite and El Capitan (on my daughter\u0027s laptop).\n\u003E \n\nThanks, both of you ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nTesting will be for 1.2-prerelease.  I likely won\u0027t have anything available until at least tomorrow sometime, and even then it will be for just testing the shader stuff (the rest of the updates are still WIP, stock symmetry bug with resources not yet fixed).  I\u0027ll post up/PM some links to the testing releases when they are ready.\n\nIf anyone else is also interested, feel free to let me know -- won\u0027t hurt to have a few more test cases.\n\nIn general development news:\n\nSpent a bit of time today working on the new MFT \u0027subtype\u0027 system.  The changes needed were mostly minor, and the updated code has fallback paths to still load the old parts/configs (if no TankSets are defined, all tanks get added to a single default set and the \u0027Set selection\u0027 GUI widget is disabled; falling back to the previous functionality).  Will be compiling and testing out this code tonight.\n\nCompiliation scripts for shader AssetBundles have been written for OSX, Linux, Win32 and Win64.  Sucks that I\u0027ll have to ship multiple shaders, but apparently there is no way around it (Unity engine limitation).  Thankfully Unity gives pretty concise methods for determining which ones to load, so it shouldn\u0027t be too difficult to get the right one loaded for the platform.  From there it should all \u0027just work\u0027... but we\u0027ll see how true that is ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nIf I can get the shaders to at least compile and load for Win I\u0027ll also be spending a bit more time finishing up the custom shader support for ModelData based texture-set switching (already working, but needs testing and cleanup).  Also need to adjust the actual shader code a bit to support KSPs \u0027\\_rimFalloff\u0027 stuff which is used for part highlighting.\n\nEdit:  Further discoveries.  Not sure if this is new or not, but apparently there now exists an interface (IContractObjective) where I can specify that a mod-added PartModule meets specific contract requirements.\n\nThis means that I can actually fix the \u0027SSTU Solar Panels won\u0027t complete contracts\u0027 problem posted a few days back.\n\n**Edited \u003Ctime datetime=\u00222016-09-15T21:02:27Z\u0022 title=\u002209/15/2016 09:02  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 15, 2016\u003C/time\u003E by Shadowmage**"},{"CreatedByName":"Pappystein","CreatedById":85755,"CreatedDateTime":"2016-09-15T21:05:12Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, Shadowmage said:\n\u003E \n\u003E \n\u003E S1-B mount?  Isn\u0027t it just a straight shroud mount with fins attached?  (the straight shroud already exists; I cannot add fins due to KSP\u0027s aero handling code).\n\u003E \n\nFrom the side the S1B H-1 engine array looks like a Straight Shroud mount.   However like the Russian N-1, the Engines are actually embedded inside the structure (there is a bottom plate and some structural members below the engine attachment points.\n\nHere is a picture of the bottom from SA-209, which is in the rocket garden at Kennedy IIRC.\n\n![saturn_1b_rocket_by_necrosarium-d4owrzf.](http://img06.deviantart.net/dc56/i/2012/037/d/f/saturn_1b_rocket_by_necrosarium-d4owrzf.jpg)\n\nThe only Saturn Stage that Had and kept a Straight Shroud like you created for your mounts was the S-II (C or D?) stage for the proposed but never built Saturn II (INT-17,-18 or -19)  \n\n   In those cases it was either 7,6,5 or 4 J-2s or HG-3s in an open cavity, the shroud acting like a Cruiser transom on a boat/ship.   The original S-II shape from a stock Saturn V would cause a significant reduction in effective thrust until out of ground effect (~100 meters AGL.)   Due in part to poor aerodynamics around the 5x engine arrangement and partially to excessive drag.\n\nAnd yes, the H-1s only had 1 axis/direction gimballing.\n\nOuter engines only = Roll Control but only to the left.\n\nInner \u002B outer engines = Yaw and Pitch control (one inner and one outer engine for each Direction \u002BYaw, -Yaw, \u002BPitch, -Pitch)\n\nThe whole setup looks complicated but it is actually simpler than a Bi-Directional Gimbal setup for the early computer control.  \n\n**Edited \u003Ctime datetime=\u00222016-09-15T21:07:58Z\u0022 title=\u002209/15/2016 09:07  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 15, 2016\u003C/time\u003E by Pappystein**\n  \ndrag"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-09-15T21:41:39Z","Content":"Sadly mount such as those (with holes cut in them for the engines) are not something I\u0027m really interested in creating, especially when other (visually compatible) options already exist.\n\nThis is mainly due to the fact that they cannot be rescaled; so I would have to create the mount at a single specific size, and it would not be usable for any other engines or diameters.  I have made a few exceptions for a few engines where sufficient mounts did not already exist (RS-68, RD-107/8).  But in this case the straight shroud mount will work sufficiently for the purposes.  Is it an exact match?  No.  Is it close enough (for me at least)?  Yep.\n\nSeparate gimbal setups within a single-part engine cluster -- this is not something that the KSP ModuleGimbal will support.  It expects every \u0027copy\u0027 of a gimbal transform to have the exact same constraints on gimbal mechanics.  The only way to do this would be to create multiple copies of the same engine part config each with different part names and gimbal setups, and hand-build your engine cluster from those uniquely setup engines."},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2016-09-15T22:00:36Z","Content":"![s1b.jpg](http://i121.photobucket.com/albums/o222/tatersw/KSP/s1b.jpg)\n\nClose enough. I didn\u0027t bother to try for the actual 1st stage look, but I could have, though it might add maybe 11 parts (needed a tick more closing up the cluster spacing I see).\n\nI used the vertical control to move the cluster into the tank.\n\n**Edited \u003Ctime datetime=\u00222016-09-15T22:07:06Z\u0022 title=\u002209/15/2016 10:07  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 15, 2016\u003C/time\u003E by tater**"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-09-16T00:28:25Z","Content":"Hmm... what could this thing possibly be?\n\n![OWX0cNq.png](http://i.imgur.com/OWX0cNq.png)\n\nYes it actually works (so far at least).  Each upgrade diameter comes from a specific tech-node, and each has a purchase cost associated with it.  You can unlock the full \u0027max diameter\u0027 through the game-difficulty options when in sandbox.\n\nThe only remaining question is whether I should tie all of the modular parts to the same \u0027upgrade parts\u0027 or give them separate paths.  I\u0027m leaning towards separate paths -- the stock system only allows unlocks from a single tech node for a specific upgrade, and engines (SRBs rather), fairings, and fuel tanks would generally belong in different parts of the tree, and thus so should their upgrades.  As such I would propose that the \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E (and RBDC) upgrades be put into the rocketry path, fairings, petal-adapters and interstage-decoupler placed into the aero path, and fuel tank upgrades follow the fuel tank path.\n\nTank-sets / variants are also in and working.  MFT A\u002BB have been combined into a single part, and the MFT-K tanks will be added to it shortly.  Only adds a single additional editor control and maintains full backward compatibility with old parts/configs.  Good stuff.\n\nOverall this KSP update has been far less painful than 1.0 or 1.1.  Only a few code-related surprises.  So far it is looking likely that I\u0027ll have something available for public testing as soon as there is an official ModuleManager update (or sometime this weekend, whichever comes last).\n\nGoing to do a bit more investigation into the shader stuff next. Working on and hoping to have a \u0027shader-testing\u0027 release available tomorrow evening if all goes well."},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2016-09-16T03:10:15Z","Content":"Felt compelled to fix it a little...\n\n![S1b2.jpg](http://i121.photobucket.com/albums/o222/tatersw/KSP/S1b2.jpg)"},{"CreatedByName":"RedParadize","CreatedById":129285,"CreatedDateTime":"2016-09-16T04:16:10Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) Quick question, is there any equivalent to subtractMass but for cost in SSTUVolumeContainer? Like subtractCost ? \n\nI have bug to report: If you add a \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E container to SSTUVolumeContainer on a pod. It will set seat \u003Cabbr title=\u0022Kerbal Inventory System (mod)\u0022\u003EKIS\u003C/abbr\u003E volume to 0.\n\n**Edited \u003Ctime datetime=\u00222016-09-16T04:41:41Z\u0022 title=\u002209/16/2016 04:41  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 16, 2016\u003C/time\u003E by RedParadize**"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-09-16T04:41:36Z","Content":"\u003E \n\u003E \n\u003E 23 minutes ago, RedParadize said:\n\u003E \n\u003E \n\u003E [@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) Quick question, is there any equivalent to subtractMass but for cost in SSTUVolumeContainer? Like subtractCost ?\n\u003E \n\nYep, exactly that.   subtractCost does the same for cost as subtractMass does for mass.  If set to true the VolumeContainer will zero out the config specified cost (for use in fuel tanks) (defaults to true), if set to false it will -add- the calculated cost onto the config cost (for use in other parts such as pods).\n\n[https://github.com/shadowmage45/SSTULabs/blob/master/Source/Module/SSTUVolumeContainer.cs#L41](https://github.com/shadowmage45/SSTULabs/blob/master/Source/Module/SSTUVolumeContainer.cs#L41)"},{"CreatedByName":"RedParadize","CreatedById":129285,"CreatedDateTime":"2016-09-16T04:49:08Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) I should probably dig a bit more in your github code. I am sure I would learn much.\n\nIn case you didn\u0027t see it, as I edited my post at the same time as you posted."},{"CreatedByName":"Neptunian","CreatedById":164914,"CreatedDateTime":"2016-09-16T04:52:40Z","Content":"Whats the progress on the I.S.S Textures?\n\n**Edited \u003Ctime datetime=\u00222016-09-16T04:57:30Z\u0022 title=\u002209/16/2016 04:57  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 16, 2016\u003C/time\u003E by Neptunian**\n  \noops, forgot the sauce."},{"CreatedByName":"Duski","CreatedById":164162,"CreatedDateTime":"2016-09-16T11:01:11Z","Content":"\u003E \n\u003E \n\u003E 6 hours ago, Neptunian said:\n\u003E \n\u003E \n\u003E Whats the progress on the I.S.S Textures?\n\u003E \n\nDon\u0027t go badgering mod makers on progress of their mods. I believe its\u0027s not allowed on the forums. They\u0027ll tell you when they do. I know you want to know, but that\u0027s just how it is."}]}