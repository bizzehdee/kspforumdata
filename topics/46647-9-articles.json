{"TopicId":46647,"ForumId":34,"TopicTitle":"[1.3](Jun04/17) Automate Vertical Velocity and Altitude Control","CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2013-09-27T01:22:59Z","PageNum":9,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2014-12-21T23:51:39Z","Content":"\n\u003Cp\u003EWhat happens if Mechjeb is installed at the same time as this (and your landing aid mod)? How do I make sure that Mechjeb doesn\u0027t affect anything while these is running?\u003C/p\u003E\u003Cp\u003EThanks\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2014-12-22T00:24:11Z","Content":"\n\u003Cp\u003EAnother question, I see that your RCS Land Aid is supported by CKAN, but this one is not. Could you add the json needed to allow CKAN to support this?\u003C/p\u003E\u003Cp\u003EEdit: Never mind, I just found it\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-22T00:27:00Z\u0022 title=\u002212/22/2014 12:27  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 22, 2014\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-12-22T01:54:06Z","Content":"\n\u003Cp\u003E@linuxgurugamer: It depends on what is engaged. This mod and my landing aid mod only try to control the vessel when they are engaged. So as long as they are not engaged MechJeb will behave the same as it always has.\u003C/p\u003E\u003Cp\u003EI assume MechJeb works the same, as long as it\u0027s \u0022landing assist\u0022 or \u0022ascent controller\u0022 is not enabled, this mod (and the landing aid mod) can control the vessel without issue. Note I am not sure on the module names in MechJeb. For the vertical velocity mod to work, nothing that changes engine thrust can be enabled in MechJeb. For the landing aid mod to work, nothing that changes the pitch/roll/yaw the vessel, or anything that affects SAS, can be enabled in MechJeb.\u003C/p\u003E\u003Cp\u003EIf both are engaged at the same time, I\u0027m not sure what would happen so make sure you have a quicksave made if you try. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-12-26T16:46:13Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EVersion 1.16a\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E-Add Stocktool bar support.\u003C/p\u003E\u003Cp\u003EWhoops, this is a few days late as Version 1.16a has been out for a bit now. No functionality changes, I just added the ability for the mod to display it\u0027s icon on the stock toolbar if Blizzy\u0027s toolbar is not installed.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Vespene","CreatedById":95571,"CreatedDateTime":"2014-12-31T20:33:03Z","Content":"\n\u003Cp\u003EMy only request for this excellent mod would be a lock horizontal velocity function. It would make helipad landings a breeze!\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-12-31T20:35:00Z","Content":"\n\u003Cp\u003EThat is out of scope for this mod, this mod only does vertical velocity.\u003C/p\u003E\u003Cp\u003EHowever, \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/85838\u0022 rel=\u0022external nofollow\u0022\u003Echeck out my Landing Aid mod.\u003C/a\u003E It is designed to control horizontal velocity and will allow you to hover over the helipad.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Vespene","CreatedById":95571,"CreatedDateTime":"2015-01-01T04:25:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThat is out of scope for this mod, this mod only does vertical velocity.\u003Cp\u003EHowever, \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/85838\u0022 rel=\u0022external nofollow\u0022\u003Echeck out my Landing Aid mod.\u003C/a\u003E It is designed to control horizontal velocity and will allow you to hover over the helipad.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFantastic! Thank you so much for this mod!\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-14T04:33:26Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EVersion 1.17\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/SirDiazo/TWR1/releases/tag/1.17\u0022 rel=\u0022external nofollow\u0022\u003EDownload here.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E-Vertical velocity is now controlled on a per vessel basis. Set a vessel to hover (vertical velocity setpoint 0) and that vessel will try to keep hovering when you switch to another vessel/kerbal.\u003C/p\u003E\u003Cp\u003ECaution: There is no stability functions on this mod. Other mods are recommended, although you can trusts the stock SAS system for a short time.\u003C/p\u003E\u003Cp\u003EI am revising my Horizontal Landing Aid for this exact purpose, but I do not have that version ready for release yet.\u003C/p\u003E\u003Cp\u003ECaution: There is no fuel monitoring or warning. If you switch away and forget about your hovering vessel, it will hover until it runs out of fuel and crashes.\u003C/p\u003E\u003Cp\u003E-Revise excess lift/drag module to be automatic. Now lift from any sources and extra mass attached to the vessel via a mod such as KAS, will be detected and compensated for without any player input.\u003C/p\u003E\u003Cp\u003ENote that while this compensation is fast, it is not instant. Leave a safety buffer of at least a few meters to give it time to adjust in when attaching/detaching loads, unless you are feeling very Kerbal that day. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-01-14T13:46:07Z","Content":"\n\u003Cp\u003EDiazo,\u003C/p\u003E\u003Cp\u003EAnother suggestion, although I\u0027m not sure how difficult it would be:\u003C/p\u003E\u003Cp\u003EHave two sets of numbers:\u003C/p\u003E\u003Cp\u003EMaximum Altitude to activate at\u003C/p\u003E\u003Cp\u003EDesired descent rate at max altitude\u003C/p\u003E\u003Cp\u003EAltitude to stop working at (location hover height)\u003C/p\u003E\u003Cp\u003EDesired descent rate at this altitude\u003C/p\u003E\u003Cp\u003EThe idea would be to not start the engine until the maximum altitude is reached. Then to start slowing the ship down. Scale the descent rate from the first rate to the second rate along the flight path.\u003C/p\u003E\u003Cp\u003EFor example, I\u0027m landing on the Mun, from an orbit which is 45,000m high. I do my deorbit burn and start descending.\u003C/p\u003E\u003Cp\u003EI set the max altitude to 5000m, and a descent rate of 100m/s\u003C/p\u003E\u003Cp\u003EI set the min altitude to 10m, and a descent rate of 0m/s\u003C/p\u003E\u003Cp\u003ESo, at 5000m, the control would start the engine and slow the ship to 100m/s. I\u0027ll list some values below, my feeling would be that the descent rate would be continously calculated depending on the height:\u003C/p\u003E\u003Cp\u003EAt 4000m, the control would calculate a descent rate of 80m/s\u003C/p\u003E\u003Cp\u003EAt 3000m, 60m/s\u003C/p\u003E\u003Cp\u003Eat 2000m, 40m/s\u003C/p\u003E\u003Cp\u003Eat 1000m, 20m/s\u003C/p\u003E\u003Cp\u003Eat 10m, 0m/s, and in a hover mode. \u003C/p\u003E\u003Cp\u003EIf altitude was set to 0m, then it would be a landing mode\u003C/p\u003E\u003Cp\u003EThe calculation could be:\u003C/p\u003E\u003Cp\u003EmaxAGL = max altitude above ground level\u003C/p\u003E\u003Cp\u003EmaxAGLv = descent velocity at the maxAGL\u003C/p\u003E\u003Cp\u003EminAGL = min altitude above ground level\u003C/p\u003E\u003Cp\u003EminAGLv = descent velocity at the minAGL\u003C/p\u003E\u003Cp\u003EAssuming that current AGL is \u0026lt;= maxAGL:\u003C/p\u003E\u003Cp\u003EtargetV = ((maxAGLv - minAGLv)*(curAGL / (maxAGL -minAGL))) \u002B minAGLv\u003C/p\u003E\u003Cp\u003EThis calculation would also work (if desired) for altitudes above the maxAGL, it would be proportional.\u003C/p\u003E\u003Cp\u003EAgain, thanks for all your hard work.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-14T14:00:06Z\u0022 title=\u002201/14/2015 02:00  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 14, 2015\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-14T15:14:49Z","Content":"\n\u003Cp\u003EThis is what Orbit Drop mode is intended for, although it works a little differently then you describe.\u003C/p\u003E\u003Cp\u003ENow that you mention it I realize I didn\u0027t actually test this in 0.90, but I assume it is still working.\u003C/p\u003E\u003Cp\u003EFor your 10m stop example above, here is how Orbit Drop mode should work.\u003C/p\u003E\u003Cp\u003EFirst, we are going to do our initial stop at 100m just to give us some ground clearance to cancel our horizontal velocity fully.\u003C/p\u003E\u003Cp\u003ESo, in orbit, enter a target height of 100m in the desired height text box. The control button next to it should say \u0022Height Control (Orbit)\u0022, click on it. Note that if the button says (Now) instead, it will not engage the orbit drop, it will engage normal height control and immediately take control of the engine.\u003C/p\u003E\u003Cp\u003EThe button will change to say \u0022Free Pitch\u0022, at this point while the mod is engaged, it does nothing and you are also free to control the ship as normal, so do your deorbit burn as you normally do. Touching the throttle controls will not disengage the mod as it does normally while the \u0022Free Pitch\u0022 button is displayed.\u003C/p\u003E\u003Cp\u003EAs you descend, at some point the button will change to \u0022Thrust Warning\u0022, at this point you have 20 seconds to return your vessel to close to upright so the mod can take over the engine and bring you to a stop at your target height, in this case 100m.\u003C/p\u003E\u003Cp\u003EFinish canceling your horizontal velocity and delete a 0 in the height target box to bring craft down to 10m. Note that the target height box uses the vessel\u0027s Center of Mass, even a medium sized vessel will probably land before it reaches 10m height as displayed in the height target box.\u003C/p\u003E\u003Cp\u003EFor this Orbit Drop mode, the mod updates in real time at what altitude it needs to engage the engine at 80% thrust in order to bring you to a stop at your desired height, and then 20 seconds before that displays the Thrust Warning so the player has time to react before it grabs control of the engine.\u003C/p\u003E\u003Cp\u003EBy only using 80% thrust, this still allows for the vessel to be tipped up to 30\u00C3\u201A\u00C2\u00B0 off vertical and not overshoot your altitude target so you can still use that to control the horizontal movement of your craft.\u003C/p\u003E\u003Cp\u003ENow, the big question is does that actually work? Both in the technical sense of the mod working correctly, but also in the sense of whether this works for the flight plan you are flying.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-01-14T17:46:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThis is what Orbit Drop mode is intended for, although it works a little differently then you describe.\u003Cp\u003ENow that you mention it I realize I didn\u0027t actually test this in 0.90, but I assume it is still working.\u003C/p\u003E\u003Cp\u003EFor your 10m stop example above, here is how Orbit Drop mode should work.\u003C/p\u003E\u003Cp\u003EFirst, we are going to do our initial stop at 100m just to give us some ground clearance to cancel our horizontal velocity fully.\u003C/p\u003E\u003Cp\u003ESo, in orbit, enter a target height of 100m in the desired height text box. The control button next to it should say \u0022Height Control (Orbit)\u0022, click on it. Note that if the button says (Now) instead, it will not engage the orbit drop, it will engage normal height control and immediately take control of the engine.\u003C/p\u003E\u003Cp\u003EThe button will change to say \u0022Free Pitch\u0022, at this point while the mod is engaged, it does nothing and you are also free to control the ship as normal, so do your deorbit burn as you normally do. Touching the throttle controls will not disengage the mod as it does normally while the \u0022Free Pitch\u0022 button is displayed.\u003C/p\u003E\u003Cp\u003EAs you descend, at some point the button will change to \u0022Thrust Warning\u0022, at this point you have 20 seconds to return your vessel to close to upright so the mod can take over the engine and bring you to a stop at your target height, in this case 100m.\u003C/p\u003E\u003Cp\u003EFinish canceling your horizontal velocity and delete a 0 in the height target box to bring craft down to 10m. Note that the target height box uses the vessel\u0027s Center of Mass, even a medium sized vessel will probably land before it reaches 10m height as displayed in the height target box.\u003C/p\u003E\u003Cp\u003EFor this Orbit Drop mode, the mod updates in real time at what altitude it needs to engage the engine at 80% thrust in order to bring you to a stop at your desired height, and then 20 seconds before that displays the Thrust Warning so the player has time to react before it grabs control of the engine.\u003C/p\u003E\u003Cp\u003EBy only using 80% thrust, this still allows for the vessel to be tipped up to 30\u00C3\u201A\u00C2\u00B0 off vertical and not overshoot your altitude target so you can still use that to control the horizontal movement of your craft.\u003C/p\u003E\u003Cp\u003ENow, the big question is does that actually work? Both in the technical sense of the mod working correctly, but also in the sense of whether this works for the flight plan you are flying.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you for a great explanation. I\u0027ll test this when I get home.\u003C/p\u003E\u003Cp\u003EWhat happens if the 80% thrust isn\u0027t enough to do it?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-14T17:59:11Z","Content":"\n\u003Cp\u003EIf 80% thrust isn\u0027t enough, the \u0022Auto Height (Orbit)\u0022 button should never appear and will only offer the \u0022Auto Height (Now)\u0022 button.\u003C/p\u003E\u003Cp\u003EIf you are still able to engage it for some reason (blow your landing stage and lose some engines), the throttle will max out trying to adjust.\u003C/p\u003E\u003Cp\u003EThe 80% thrust limit is only used for the prediction calculation on how much time is needed, once the mod actually takes control of the throttle it will set the throttle to max if it needs to because you are coming in a bit hot.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-01-14T19:07:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EIf 80% thrust isn\u0027t enough, the \u0022Auto Height (Orbit)\u0022 button should never appear and will only offer the \u0022Auto Height (Now)\u0022 button.\u003Cp\u003EIf you are still able to engage it for some reason (blow your landing stage and lose some engines), the throttle will max out trying to adjust.\u003C/p\u003E\u003Cp\u003EThe 80% thrust limit is only used for the prediction calculation on how much time is needed, once the mod actually takes control of the throttle it will set the throttle to max if it needs to because you are coming in a bit hot.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, that explains a lot.\u003C/p\u003E\u003Cp\u003EMy ship has the Mark1-2 Pod, which from what I can tell has SAS (please tell me if I\u0027m wrong).\u003C/p\u003E\u003Cp\u003EThe engine is an RMA-3 orbital achievement device (from NovaPunch2), which, while efficient, is not super powerful (I think it has a maxthrust of 75), so it is possible that it does need more than 80% to slow down.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-14T19:15:06Z","Content":"\n\u003Cp\u003EIf the engine does not have sufficient thrust, you should be seeing a \u0022TWR LOW\u0022 warning label in place of the height control button.\u003C/p\u003E\u003Cp\u003EThe actual math check the mod uses is if 80% throttle has a TWR of less then 1 it will not engage.\u003C/p\u003E\u003Cp\u003EOr it is supposed to, I just realized that check is using the modified thrust for vessel tilt so if you are pointing horizontal in preparation for your deorbit burn, the check will see you have no vertical thrust and think your TWR is too low.\u003C/p\u003E\u003Cp\u003EThe workaround for now is to point your engines straight down, engage Orbit Drop, then tip the vessel back over for the deorbit burn, that should leave the Orbit Drop engaged.\u003C/p\u003E\u003Cp\u003EI\u0027ll push a fix tonight when I get home after work.\u003C/p\u003E\u003Cp\u003EOn the SAS thing, I do not believe the Mark 1-2 pod has SAS. In 0.90, SAS comes from either a Kerbal on board who has the Pilot ability, or from a high enough level probe core (I\u0027m not sure which cores have it and which don\u0027t).\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-14T19:17:19Z\u0022 title=\u002201/14/2015 07:17  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 14, 2015\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-01-14T19:26:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EIf the engine does not have sufficient thrust, you should be seeing a \u0022TWR LOW\u0022 warning label in place of the height control button.\u003Cp\u003EThe actual math check the mod uses is if 80% throttle has a TWR of less then 1 it will not engage.\u003C/p\u003E\u003Cp\u003EOr it is supposed to, I just realized that check is using the modified thrust for vessel tilt so if you are pointing horizontal in preparation for your deorbit burn, the check will see you have no vertical thrust and think your TWR is too low.\u003C/p\u003E\u003Cp\u003EThe workaround for now is to point your engines straight down, engage Orbit Drop, then tip the vessel back over for the deorbit burn, that should leave the Orbit Drop engaged.\u003C/p\u003E\u003Cp\u003EI\u0027ll push a fix tonight when I get home after work.\u003C/p\u003E\u003Cp\u003EOn the SAS thing, I do not believe the Mark 1-2 pod has SAS. In 0.90, SAS comes from either a Kerbal on board who has the Pilot ability, or from a high enough level probe core (I\u0027m not sure which cores have it and which don\u0027t).\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk. I won\u0027t be doing anything with this until either late tonight or tomorrow night. I usually use CKAN to do all my updates, but will do this by hand if it isn\u0027t there yet.\u003C/p\u003E\u003Cp\u003ESo, I remember that I usually don\u0027t see the \u0022TWR LOW\u0022 label, so assume that the engine does have enough thrust. I do see it when I\u0027ve oriented the wrong direction, so I know thats working.\u003C/p\u003E\u003Cp\u003EThanks\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-01-14T23:06:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThis is what Orbit Drop mode is intended for, although it works a little differently then you describe.\u003Cp\u003ENow that you mention it I realize I didn\u0027t actually test this in 0.90, but I assume it is still working.\u003C/p\u003E\u003Cp\u003EFor your 10m stop example above, here is how Orbit Drop mode should work.\u003C/p\u003E\u003Cp\u003EFirst, we are going to do our initial stop at 100m just to give us some ground clearance to cancel our horizontal velocity fully.\u003C/p\u003E\u003Cp\u003ESo, in orbit, enter a target height of 100m in the desired height text box. The control button next to it should say \u0022Height Control (Orbit)\u0022, click on it. Note that if the button says (Now) instead, it will not engage the orbit drop, it will engage normal height control and immediately take control of the engine.\u003C/p\u003E\u003Cp\u003EThe button will change to say \u0022Free Pitch\u0022, at this point while the mod is engaged, it does nothing and you are also free to control the ship as normal, so do your deorbit burn as you normally do. Touching the throttle controls will not disengage the mod as it does normally while the \u0022Free Pitch\u0022 button is displayed.\u003C/p\u003E\u003Cp\u003EAs you descend, at some point the button will change to \u0022Thrust Warning\u0022, at this point you have 20 seconds to return your vessel to close to upright so the mod can take over the engine and bring you to a stop at your target height, in this case 100m.\u003C/p\u003E\u003Cp\u003EFinish canceling your horizontal velocity and delete a 0 in the height target box to bring craft down to 10m. Note that the target height box uses the vessel\u0027s Center of Mass, even a medium sized vessel will probably land before it reaches 10m height as displayed in the height target box.\u003C/p\u003E\u003Cp\u003EFor this Orbit Drop mode, the mod updates in real time at what altitude it needs to engage the engine at 80% thrust in order to bring you to a stop at your desired height, and then 20 seconds before that displays the Thrust Warning so the player has time to react before it grabs control of the engine.\u003C/p\u003E\u003Cp\u003EBy only using 80% thrust, this still allows for the vessel to be tipped up to 30\u00C3\u201A\u00C2\u00B0 off vertical and not overshoot your altitude target so you can still use that to control the horizontal movement of your craft.\u003C/p\u003E\u003Cp\u003ENow, the big question is does that actually work? Both in the technical sense of the mod working correctly, but also in the sense of whether this works for the flight plan you are flying.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOK, I\u0027m looking at it. My ship is in orbit at about 42000m high. I\u0027ve positioned it so that it is vertical to the surface.. The Vertical Velocity box has an entry field for \u0022Fly to:\u0022 with a button next to it which says \u0022auto height (free)\u0022, and a button below which says \u0022Control Off\u0022. If I click the \u0022auto height\u0022 button, it goes away and text \u0022free pitch\u0022 shows up, and the button at the bottom shows \u0022Height Control\u0022. Both of these are green. If I then click the green \u0022Height Control\u0022, the Auto Height button comes back and the button at the bottom changes to a green \u0022Velocity Control\u0022. This does not sound like what you described above.\u003C/p\u003E\u003Cp\u003EAccording to CKAN, it is version 1.17\u003C/p\u003E\u003Cp\u003EEdit: Is it possible that the text is wrong, and where I see \u0022Auto Height (free)\u0022 is what you said should be \u0022Height Control (orbit)\u0022?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-14T23:08:28Z\u0022 title=\u002201/14/2015 11:08  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 14, 2015\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-14T23:20:56Z","Content":"\n\u003Cp\u003EUgh, yes. Everywhere I said \u0022Auto Height (Orbit)\u0022, replace it with (Free) instead.\u003C/p\u003E\u003Cp\u003EI was correct with the (Now) though, if the button says that it will take the engine control over immediately when you press it.\u003C/p\u003E\u003Cp\u003EThe \u0022Free Pitch\u0022 showing up is correct though. That means you are in orbit drop mode and are free to move your vessel around as you see fit, including controlling the engines, until the \u0022Thrust Warning\u0022 shows up.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-01-15T03:22:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EUgh, yes. Everywhere I said \u0022Auto Height (Orbit)\u0022, replace it with (Free) instead.\u003Cp\u003EI was correct with the (Now) though, if the button says that it will take the engine control over immediately when you press it.\u003C/p\u003E\u003Cp\u003EThe \u0022Free Pitch\u0022 showing up is correct though. That means you are in orbit drop mode and are free to move your vessel around as you see fit, including controlling the engines, until the \u0022Thrust Warning\u0022 shows up.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOK. Being in the software business myself, I was concerned that we were talking about the same thing.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003ESuccess!\u003C/p\u003E\u003Cp\u003EBoth landing assistant and vertical velocity are now working, thank you!\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-15T05:01:58Z","Content":"\n\u003Cp\u003EHeh, glad to hear things are working for you.\u003C/p\u003E\u003Cp\u003EHowever, thanks to this conversation I went back and looked at the orbit drop code and promptly ripped it out to rewrite it from scratch.\u003C/p\u003E\u003Cp\u003EI don\u0027t know what past me was thinking, but I apparently threw random numbers at things and somehow came up with something that sort of worked.\u003C/p\u003E\u003Cp\u003EHowever, it was not very tolerant of players doing things I didn\u0027t expect so I\u0027m currently going back and actually using real math this time, not numbers that are \u0022ehh, close enough\u0022 so no matter what players throw at it, it will behave as expected.\u003C/p\u003E\u003Cp\u003EI\u0027m also going to rename the buttons to make it clearer what is going on and will have screenshots showing things with the next release.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"sebi.zzr","CreatedById":81294,"CreatedDateTime":"2015-01-15T05:34:08Z","Content":"\n\u003Cp\u003EFYI Version 1.17 is not playing nice with MJ,when i updated from 1.16 first thing i noticed was, when i choose any cockpit in VAB my log is spammed with\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at VerticalVelocity.TWR1Data.FixedUpdate () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E(Filename:  Line: -1)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand MJ have no control over vessel when launched.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-15T05:43:15Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EVersion 1.17a\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E-Fix NullRef bug in editor.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/SirDiazo/TWR1/releases/tag/1.17a\u0022 rel=\u0022external nofollow\u0022\u003EDownload here.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ECaution: Contains rewrite of the Height Control code (specifically the orbit drop mode.) Inital tests work but it is not yet fully tested. I will have a fully tested version out tomorrow night.\u003C/p\u003E\u003Cp\u003EI rushed this release to fix a bug that essentially screwed over any mods trying to run code in the VAB, such as mechjeb.\u003C/p\u003E\u003Cp\u003E@sebi.zzr: Ugh, how did that slip bug through? Yes, that was a problem in my code. Version 1.17a fixes it.\u003C/p\u003E\u003Cp\u003ESorry about that,\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-15T05:46:33Z\u0022 title=\u002201/15/2015 05:46  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 15, 2015\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sebi.zzr","CreatedById":81294,"CreatedDateTime":"2015-01-15T05:57:16Z","Content":"\n\u003Cp\u003ENo offense, but I would have to tell you this yesterday \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E Thank you for quick reply.\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-01-15T18:11:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003EVersion 1.17a\u003C/strong\u003E\u003Cp\u003E-Fix NullRef bug in editor.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/SirDiazo/TWR1/releases/tag/1.17a\u0022 rel=\u0022external nofollow\u0022\u003EDownload here.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ECaution: Contains rewrite of the Height Control code (specifically the orbit drop mode.) Inital tests work but it is not yet fully tested. I will have a fully tested version out tomorrow night.\u003C/p\u003E\u003Cp\u003EI rushed this release to fix a bug that essentially screwed over any mods trying to run code in the VAB, such as mechjeb.\u003C/p\u003E\u003Cp\u003E@sebi.zzr: Ugh, how did that slip bug through? Yes, that was a problem in my code. Version 1.17a fixes it.\u003C/p\u003E\u003Cp\u003ESorry about that,\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIs it going to work the same? I must confess, that when I was finally able to do the landing last night, I was somewhat nervous because it essentially did a suicide burn (ie: it just fell until it was able to do a full power burn to stop at just the right altitude). While I know that is probably more fuel efficient, it does cause a problem if you need to stage during the descent as I did. I had a stage with a Skipper engine which had enough to do most but not all of the landing, so about 5 seconds before I hit the target altitude it ran out and I had to stage, next stage had a much smaller engine and while I had the target altitude set to 200m, it actually got to within 5m before it actually stopped.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-15T18:24:56Z","Content":"\n\u003Cp\u003EYes, it will work the same, I am just rewriting the math behind the scenes so that it can handle a wider range of vessels. Note that the text on the buttons has changed, but the mechanics have not.\u003C/p\u003E\u003Cp\u003ENotably in the 1.17 version, really high and really low TWR vessels could give it issues.\u003C/p\u003E\u003Cp\u003EHowever, the scenario you describe in dropping the Skipper could still be problematic. The mod updates it\u0027s \u0022I need to start burning\u0022 math in realtime based on your current vessel mass and currently active engines. If that changes abruptly during descent, such as when you stage, I can\u0027t guarantee it won\u0027t overshoot the target altitude. \u003C/p\u003E\u003Cp\u003ESpecifically if the smaller vessel (after staging) has a lower TWR then the vessel did in orbit (before staging) it will overshoot the target. By how much depends on how big a difference there is between the two TWR\u0027s and how close to the target altitude you stage at. This is something the mod will never be able to compensate for, it always uses your current vessel state for all calculations, including the orbit drop predictions.\u003C/p\u003E\u003Cp\u003ENote that the target height can be changed while in height control (and orbit drop) mode. For the scenario you describe, set a higher altitude for the skipper to stop at, then once the skipper has been detached via staging, enter the actual target altitude you want. You will have to estimate the temporary higher altitude necessary yourself based on the TWR difference between the stages, but this will keep you from crashing.\u003C/p\u003E\u003Cp\u003EIn this scenario, the skipper never reaches it\u0027s temporary target altitude, that number is just there to get the skipper to start it\u0027s burn earlier to compensate for the lower TWR after you stage.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-15T18:28:51Z\u0022 title=\u002201/15/2015 06:28  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 15, 2015\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Thrombo","CreatedById":63034,"CreatedDateTime":"2015-01-16T01:47:23Z","Content":"\n\u003Cp\u003EHey Diazo, pretty nifty mod. Couple things - it would be nice if it were possible to set the desired vertical velocity rate without spooling up the engines when the mod is turned on.\u003C/p\u003E\u003Cp\u003EAlso, I got a contract to test the Kerbodyne KR-2L big engine on the launchpad, so I tossed a pod on with that engine, and upon launch got a kraken black screen. Some mod troubleshooting later (admittedly I use a lot of them) I removed vertical velocity controller and the problem went away. Here\u0027s the last output_log information I see before the output_log is spammed with \u0022Look rotation viewing vector is zero\u0022\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E.\u003Cbr\u003E.\u003Cbr\u003E.\u003Cbr\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at VerticalVelocity.TWR1Data.FixedUpdate () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E(Filename:  Line: -1)\u003Cbr\u003E\u003Cbr\u003E1/15/2015 5:37:04 PM,KerbalAlarmClock,Setting App Button True\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E1/15/2015 5:37:04 PM,KerbalAlarmClock,Vessel Change from \u0027No Vessel\u0027 to \u0027Untitled Space Craft\u0027\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E1/15/2015 5:37:04 PM,KSPAlternateResourcePanel,setting true\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E1/15/2015 5:37:04 PM,KerbalAlarmClock,Contracts System Ready\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at VerticalVelocity.TWR1Data.FixedUpdate () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E(Filename:  Line: -1)\u003Cbr\u003E\u003Cbr\u003ENullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E  at VerticalVelocity.TWR1Data.FixedUpdate () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E(Filename:  Line: -1)\u003Cbr\u003E\u003Cbr\u003ELook rotation viewing vector is zero\u003Cbr\u003E\u003Cbr\u003E.\u003Cbr\u003E.\u003Cbr\u003E.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEdit: This is with the CKAN-installed version (1.17a) on 0.90 32-bit KSP.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-16T01:53:33Z\u0022 title=\u002201/16/2015 01:53  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 16, 2015\u003C/time\u003E by Thrombo\u003C/strong\u003E\n\u003Cbr\u003Eadd ver\n\u003C/span\u003E\n"}]}