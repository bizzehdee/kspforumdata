{"TopicId":50533,"ForumId":34,"TopicTitle":"[1.8.x-1.12.x] Module Manager 4.2.3 (July 03th 2023) - Fireworks season","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-10-25T13:01:36Z","PageNum":258,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-24T10:48:04Z","Content":"\n\u003Cp\u003E\nIs there a way to test if a file exists?\n\u003C/p\u003E\n\u003Cp\u003E\nThe issue is that as Squad is doing their updates and revamps, they are deprecating some parts.\u00A0 This causes problems for mods which depend on those parts for either cloning, textures, etc.\u00A0 This has affected at least two of my mods, I\u0027ve had to write batch scripts which the user needs to run manually and causes problems with a non-technical user trying to incorrectly run these scripts.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve gone through the wiki, and I don\u0027t see this ability.\u00A0 The closest is the NEEDS, but it only looks for the following:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nA plugin .dll with the same assembly name.\n\u003C/li\u003E\n\u003Cli\u003E\nA subdirectory name under GameData. (Names with spaces can be used, just remove the spaces:\u00A0GameData/My Mod/\u00A0=\u0026gt;\u00A0:NEEDS[MyMod]\n\u003C/li\u003E\n\u003Cli\u003E\nA FOR[Blah] defined would allow NEEDS[Blah]\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nIt\u0027s close in that it can already look for a subdirectory name under GameData, IMHO that could easily be expanded into a directory or file.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf this doesn\u0027t exist, can I request that that this be added, and added soon?\u00A0 This problem becomes worse with\u00A0each new release of KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\n\u003C/p\u003E\n\u003Cp\u003E\nThere is an existing feature request asking for exactly this:\u00A0\u003Ca href=\u0022https://github.com/sarbian/ModuleManager/issues/144\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/sarbian/ModuleManager/issues/144\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nEdit 2\n\u003C/p\u003E\n\u003Cp\u003E\nI just tested the NEEDS with a directory (I was hopeful it ight deal with multiple directories):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[BSLmk12SciencePod]:NEEDS[Squad/zDeprecated/Parts/Command/Mk1-2Pod]\n{\n\t@MODEL\n\t{\n\t\t@model = Squad/zDeprecated/Parts/Command/Mk1-2Pod/model\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThis directory does exist in 1.7, but \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E doesn\u0027t see it:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 2019-05-24 07:00:53.314] Deleting root node in file BetterScienceLabsContinued/MM_DeprecatedParts node: @PART[BSLmk12SciencePod]:NEEDS[Squad/zDeprecated/Parts/Command/Mk1-2Pod] as it can\u0027t satisfy its NEEDS\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-24T11:14:32Z\u0022 title=\u002205/24/2019 11:14  AM\u0022 data-short=\u00225 yr\u0022\u003EMay 24, 2019\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tonka Crash","CreatedById":189552,"CreatedDateTime":"2019-05-24T14:11:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604237\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558694884\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe issue is that as Squad is doing their updates and revamps, they are deprecating some parts.\u00A0 This causes problems for mods which depend on those parts for either cloning, textures, etc.\u00A0 This has affected at least two of my mods, I\u0027ve had to write batch scripts which the user needs to run manually and causes problems with a non-technical user trying to incorrectly run these scripts.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHave you considered the case where Squad eventually deletes the deprecated parts? Have you contacted Squad about possibly bundling and distributing the deprecated elements with the mods that need them? It doesn\u0027t hurt to ask.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-24T15:57:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604305\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558707080\u0022 data-ipsquote-userid=\u0022189552\u0022 data-ipsquote-username=\u0022Tonka Crash\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Tonka Crash said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHave you considered the case where Squad eventually deletes the deprecated parts? Have you contacted Squad about possibly bundling and distributing the deprecated elements with the mods that need them? It doesn\u0027t hurt to ask.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, yes, and the answer was no\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2019-05-24T16:42:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604237\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558694884\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf this doesn\u0027t exist, can I request that that this be added, and added soon?\u00A0 This problem becomes worse with\u00A0each new release of KSP.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think that this problem can be mitigated on a better way.\n\u003C/p\u003E\n\u003Cp\u003E\nModule Manager would issue a \u0022meta-name\u0022 with the current KSP version, so you can use \u0022:NEEDS\u0022\u00A0\u003Cem\u003Eet all\u003C/em\u003E\u00A0to check the current KSP version in the same way we do for Add\u0027Ons.\n\u003C/p\u003E\n\u003Cp\u003E\nSomething like:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nKSP_\u0026lt;MAJOR\u0026gt;\n\u003C/li\u003E\n\u003Cli\u003E\nKSP_\u0026lt;MAJOR\u0026gt;.\u0026lt;MINOR\u0026gt;\n\u003C/li\u003E\n\u003Cli\u003E\nKSP_\u0026lt;MAJOR\u0026gt;.\u0026lt;MINOR\u0026gt;.\u0026lt;PATCH\u0026gt;\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nSo the author would peek the less restrictive one that works for him.\n\u003C/p\u003E\n\u003Cp\u003E\nAs an example\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n@PART[airbrake1]:FOR[TweakScale] // A.I.R.B.R.A.K.E.S\n{\n    %MODULE[TweakScale]:NEEDS[KSP_1.4.5]\n    {\n        type = free_square_old_edition\n    }\n    %MODULE[TweakScale]:NEEDS[KSP_1.6]\n    {\n        type = free_square_new_edition\n    }\n    %MODULE[TweakScale]:NEEDS[KSP_1\u0026amp;\u00ACKSP_1.6\u0026amp;\u00ACKSP_1.4.5]\n    {\n        type = free_square_common_edition\n    }\n\n}\u003C/pre\u003E\n\u003Cp\u003E\nWould define a Module with type \u0022free_square_old_edition\u0022 for KSP 1.4.5, but would define it to \u0022free_square_new_edition\u0022 for KSP 1.6.0 and 1.6.1 (or 1.6.2 if it would be issued).\n\u003C/p\u003E\n\u003Cp\u003E\nBut \u0022free_square_common_edition\u0022 would be issued for every KSP version that starts with 1, except 1.6 and 1.4.5 .\n\u003C/p\u003E\n\u003Cp\u003E\n(I\u0027m not sure now about the correct syntax on \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E, so I used the following boolean notation : \u0022\u0026amp;\u0022 = AND ; \u0022\u00AC\u0022 = NOT)\n\u003C/p\u003E\n\u003Cp\u003E\nI think this will solve pretty well a lot of issues.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-24T16:48:33Z","Content":"\n\u003Cp\u003E\nWell, that would help, but unfortunately, I forgot that the zDeprecated directory was also not loaded in the DB, so for my case, it doesn\u0027t matter, I still need to copy the files\n\u003C/p\u003E\n\u003Cp\u003E\nBummer, the copy process is so full of possible errors....\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-24T17:12:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604416\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558716172\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 minutes ago, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nModule Manager would issue a \u0022meta-name\u0022 with the current KSP version\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E In case KSP version check would help at least identify whether there\u0027s zDeprecated directory and what\u0027s in it: it\u0027s issue #116\u003Cspan\u003E \u003C/span\u003E, I wrote up some code to do it a while ago but it\u0027s got some loose ends that needs tied up, see \u003Ca href=\u0022https://github.com/sarbian/ModuleManager/issues/116#issuecomment-481541496\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E if you want to chip in and help get it implemented and integrated.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-24T17:17:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604429\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558717938\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cakepie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, cakepie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E In case KSP version check would help at least identify whether there\u0027s zDeprecated directory and what\u0027s in it: it\u0027s issue #116\u003Cspan\u003E \u003C/span\u003E, I wrote up some\u003Cspan\u003E\uFEFF\u003C/span\u003E code to do it a while ago but it\u0027s got some loose ends that needs tied up, see \u003Ca href=\u0022https://github.com/sarbian/ModuleManager/issues/116#issuecomment-481541496\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E if you want to chip in and help get it implemented and integrated.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m hip deep in 4 other mods right now.\u00A0 Besides, since the directory can\u0027t be accessed, the files still need to be copied out and somewhere else.\u00A0 Which means an external script\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nGaaah, I hate it when an idea for a new mod pops in my head.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIn this case, a simple mod to copy specified files to a common location if they don\u0027t exist.\u00A0 Would be callable by any other mod which needs files copied such as the ones I\u0027m dealing with\n\u003C/p\u003E\n\u003Cp\u003E\nActually would be configured in a text file, if done correctly, could even do it before KSP gets started with processing files\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2019-05-24T17:51:00Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604431\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558718231\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n27 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m hip deep in 4 other mods right now.\u00A0 Besides, since the directory can\u0027t be accessed, the files still need to be copied out and somewhere else.\u00A0 Which means an external script\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nGaaah, I hate it when an idea for a new mod pops in my head.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIn this case, a simple mod to copy specified files to a common location if they don\u0027t exist.\u00A0 Would be callable by any other mod which needs files copied such as the ones I\u0027m dealing with\n\u003C/p\u003E\n\u003Cp\u003E\nActually would be configured in a text file, if done correctly, could even do it before KSP gets started with processing files\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you copy the files immediately on addon startup KSP will actually pick them up.\u00A0 Reason being that the game database is re-initialized after addons are initialized.\u00A0 Alternately you can manipulate the game database tree structure a frame later to include the missing files - if you do it then ModuleManager will pick it up (just don\u0027t wait any longer)\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-24T18:03:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604455\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558720260\u0022 data-ipsquote-userid=\u0022119688\u0022 data-ipsquote-username=\u0022blowfish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 minutes ago, blowfish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf\u003Cspan\u003E\uFEFF\u003C/span\u003E you copy the files immediately on addon startup KSP will actually pick them up.\u00A0 Reason being that the game database is re-initialized after addons are initialized.\u00A0 Alternately you can manipulate the game database tree structure a frame later to include the missing files - if you do it then ModuleManager will pick it up (just don\u0027t wait any longer)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s kind of what I was thinking.\u00A0 It would be really neat if something like that could be added to \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E, since it deals with all that already \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2019-05-24T18:06:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604468\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558721003\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat\u0027s kind of what I was thinking.\u00A0 It would be really neat if something like t\u003Cspan\u003E\uFEFF\u003C/span\u003Ehat could be added to \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E, since it deals with all that already \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhy would we want ModuleManager to do this?\u00A0 We don\u0027t want KSP to load everything in zDeprecated.\u00A0 The idea would be that if you need specific files from there in your mod, your mod would do the setup required for those files to be loaded (either by copying or adding them to the tree at the appropriate time).\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-24T18:08:25Z","Content":"\n\u003Cp\u003E\nMy (admittedly quick) thought was that it could be modified to respond to a specific statement to copy files, which could be included as part of a \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patch.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2019-05-24T18:29:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604418\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558716513\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWell, that would help, but unfortunately, I forgot that the zDeprecated directory was also not loaded in the DB, so for my case, it doesn\u0027t matter, I still need to copy the files\n\u003C/p\u003E\n\u003Cp\u003E\nBummer, the copy process is so full of possible errors....\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe problems,we tackle them one by one. And I think that Module Manager can help on it too. I\u0027m mangling GameDatabase for some time now, and it\u0027s really not a problem to \u0022brute force\u0022 a part into it - so yeah, we can feed GameDatabase with the deprecated parts ourselves.\n\u003C/p\u003E\n\u003Cp\u003E\nIdeally, this should be done on Module Manager, as it always have the \u003Cspan style=\u0022background-color:#e6ffed;color:#6f42c1;font-size:12px;\u0022\u003EMMPatchLoader\u00A0\u003C/span\u003Eavailable to itself, and since MM4 outsiders lost the \u003Ca href=\u0022https://github.com/net-lisias-ksp/ModuleManager/commit/ff9f34ce5cb7da1cd40194dfaebdf999035aaa7f\u0022 rel=\u0022external nofollow\u0022\u003Ecanonical way \u003C/a\u003Eof invoking it.\n\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2019-05-24T18:51:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604483\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558722568\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 minutes ago, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIdeally, this should be done on Module Manager, as it always have the \u003Cspan style=\u0022background-color:#e6ffed;color:#6f42c1;font-size:12px;\u0022\u003EMMPatchLoader\u00A0\u003C/span\u003Eavailable to itself, and since MM4 outsiders lost the \u003Ca href=\u0022https://github.com/net-lisias-ksp/ModuleManager/commit/ff9f34ce5cb7da1cd40194dfaebdf999035aaa7f\u0022 rel=\u0022external nofollow\u0022\u003Ecanonical way \u003C/a\u003Eof i\u003Cspan\u003E\uFEFF\u003C/span\u003Envoking it.\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhy would this require access to MMPatchLoader?\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-24T19:06:23Z","Content":"\n\u003Cp\u003E\nI agree with blowfish, this all seems out of scope for \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you\u0027re going to copy files out of zDeprecated into some other location in GameData, that\u0027s something that only needs to be done once, during mod install, and not everytime the game starts up.\n\u003C/p\u003E\n\u003Cp\u003E\nIf on the other hand you want to force certain files to be read from zDeprecated and made available in the gamedatabase then something like \u003Ca href=\u0022https://github.com/cake-pie/unBlur\u0022 rel=\u0022external nofollow\u0022\u003EunBlur\u0027s code\u003C/a\u003E could possibly work.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604483\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558722568\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n37 minutes ago, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nsince MM4 outsiders lost the \u003Ca href=\u0022https://github.com/net-lisias-ksp/ModuleManager/commit/ff9f34ce5cb7da1cd40194dfaebdf999035aaa7f\u0022 rel=\u0022external nofollow\u0022\u003Ecanonical way \u003C/a\u003Eof invoking it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot sure about your use case, maybe unBlur code and my notes on \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E compat \u003Ca href=\u0022https://gist.github.com/cake-pie/9852876e3955e896dc080efda8fa2620\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E may help.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-24T19:07:47Z\u0022 title=\u002205/24/2019 07:07  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 24, 2019\u003C/time\u003E by cakepie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2019-05-24T19:20:39Z","Content":"\n\u003Cp\u003E\nMy 0.02 cents on this:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n\u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E would be better idea to handle copying files than separate plugin. Possible issue with another plugin is timing, to execute copy command and wait for all files to be copied before \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E start to search for other \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E commands trough Gamedata folder tree\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E would need to search trough all config files to see if any of them contain command to copy files before executing the rest of patches. That would be slow down loading game to some degree, depending how many files need to be processed twice.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E should restrict available folders for source and destination, otherwise someone could exploit it to copy some malicious files from elsewhere to KSP game folder\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nEven better idea might be for less educated people to use \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E and extend \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E with new feature to copy files from deprecated folder to gamedata folder instead using batch file or doingh that with \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E. People who don\u0027t use \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E for whatever reason, already know how to copy files and read instructions what need to copy where, so it is less likely that simple batch file would be marked as virus from some stupid AV software.\n\u003C/p\u003E\n\u003Cp\u003E\nI have to deal with people that don\u0027t know how to create backup on their USB sticks every day and they either, don\u0027t want to learn it or they are to lazy to learn it. It can be strenuous at times to explain it again and again.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-05-24T19:39:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604510\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558724783\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cakepie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n26 minutes ago, cakepie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you\u0027re going to copy files out of zDeprecated into some other location in GameData, that\u0027s something that only needs to be done once, during mod install, and not everytime the game starts up.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, and there isn\u0027t an easy way to do that.\u00A0 I\u0027ve written some scripts, but to make them foolproof, is almost impossible in the time available, also need to write them for 3 OSs.\n\u003C/p\u003E\n\u003Cp\u003E\nSo either it gets incorporated into \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E, or it\u0027s yet another mod for someone to load.\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2019-05-24T19:40:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604498\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558723891\u0022 data-ipsquote-userid=\u0022119688\u0022 data-ipsquote-username=\u0022blowfish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n44 minutes ago, blowfish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhy would this require access to MMPatchLoader?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBecause it is how UbioWelding creates welded parts on GameDatabase.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUsing Mono\u0027s Reflection to locate MMPatchLoader for now can be unreliable due Mono\u0027s unhappy bugs on Reflection, and I think this is the reason MMPatchLoader extends LoadingSystem : to allow to use UnityEngine\u0027s equivalent.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604515\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558725639\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 minutes ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n\u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E would need to search trough all config files to see if any of them contain command to copy files before executing the rest of patches. That would be slow down loading game to some degree, depending how many files need to be processed twice.\n\u003C/li\u003E\n\u003Cli\u003E\n\u00A0\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBetter idea: each Add\u0027On specifies what it needs, and \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E only handles what it was specifically told to do.\n\u003C/p\u003E\n\u003Cp\u003E\nThis would impose a delay only for the first Add\u0027On to ask for something that\u0027s not there yet.\n\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2019-05-24T20:46:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604524\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558726804\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBecause it is how UbioWelding creates welded parts on GameDatabase.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nStill not sure why what requires anything involving ModuleManager.\u00A0 Shouldn\u0027t the final (patched) configs be sufficient for this?\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2019-05-25T02:19:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604567\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558730793\u0022 data-ipsquote-userid=\u0022119688\u0022 data-ipsquote-username=\u0022blowfish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, blowfish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nStill not sure why what requires anything involving ModuleManager.\u00A0 Shouldn\u0027t the final (patched) configs be sufficient for this?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you don\u0027t mind restarting the game, yes.\n\u003C/p\u003E\n\u003Cp\u003E\nBut UbioWeld and that hypothetical solution above on deprecated parts would preferably avoid restarting everything and load the config into memory at runtime and then carry on with their business, using the very same ModuleManager code that would be used on KSP loading time.\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s how it was being used on the Module Manager 3 and previous., by the way.\n\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2019-05-25T02:56:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604701\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558750741\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n40 minutes ago, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you don\u0027t mind restarting the game, yes.\n\u003C/p\u003E\n\u003Cp\u003E\nBut UbioWeld and that hypothetical solution above on deprecated parts would preferably avoid restarting everything and load the config into memory at runtime and then carry on with their business, using the very same ModuleManager code that would be used on KSP loading time.\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s how it was being used on the Module Manager 3 and previous., by the way.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, apparently there were multiple mods hooking into ModuleManager in unintended and unsupported ways...\n\u003C/p\u003E\n\u003Cp\u003E\nCould you explain to me exactly what it was doing with ModuleManager?\u00A0 That still isn\u0027t very clear to me.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-25T02:59:58Z\u0022 title=\u002205/25/2019 02:59  AM\u0022 data-short=\u00225 yr\u0022\u003EMay 25, 2019\u003C/time\u003E by blowfish\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-25T04:21:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604715\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558752999\u0022 data-ipsquote-userid=\u0022119688\u0022 data-ipsquote-username=\u0022blowfish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, blowfish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCould you explain to me exactly what it was doing with ModuleManager?\u00A0 That still isn\u0027t very clear to me.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nLooks like it uses reflection to emulate DatabaseReloadWithMM() , to apply new patches at runtime:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003E\u003Ca href=\u0022https://github.com/UbioWeldingLtd/UbioWeldContinued/blob/12aef85739bc7a6deca52c73930456035971e8bd/UbioWeldingLtd/DatabaseHandler.cs#L111\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/UbioWeldingLtd/UbioWeldContinued/blob/12aef85739bc7a6deca52c73930456035971e8bd/UbioWeldingLtd/DatabaseHandler.cs#L111\u003C/a\u003E\u003C/s\u003E\u003Cbr\u003E\u003Ca href=\u0022https://github.com/net-lisias-ksp/UbioWeldContinuum/blob/7ef3f5fbfd76b00fc9d01cef4c80caf4215beafc/UbioWeldingLtd/DatabaseHandler.cs#L128\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/net-lisias-ksp/UbioWeldContinuum/blob/7ef3f5fbfd76b00fc9d01cef4c80caf4215beafc/UbioWeldingLtd/DatabaseHandler.cs#L128\u003C/a\u003E\u00A0 \u0026lt;- lisias\u0027 fork\n\u003C/p\u003E\n\u003Cp\u003E\nPerhaps that\u0027s something that could be exposed to other mods?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit2: also \u003Ca href=\u0022https://github.com/net-lisias-ksp/UbioWeldContinuum/blob/7ef3f5fbfd76b00fc9d01cef4c80caf4215beafc/UbioWeldingLtd/UbioZurWeldingLtd.cs#L762\u0022 rel=\u0022external nofollow\u0022\u003Epulls the ProgressFraction\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-25T05:00:42Z\u0022 title=\u002205/25/2019 05:00  AM\u0022 data-short=\u00225 yr\u0022\u003EMay 25, 2019\u003C/time\u003E by cakepie\u003C/strong\u003E\n\u003Cbr\u003Ewrong fork\n\u003C/span\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2019-05-25T14:19:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604715\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558752999\u0022 data-ipsquote-userid=\u0022119688\u0022 data-ipsquote-username=\u0022blowfish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, blowfish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYes, apparently there were multiple mods hooking into ModuleManager in unintended and unsupported ways...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell\u2026 I made a research on the matter, and got into this:\u00A0\u003Ca href=\u0022https://github.com/sarbian/ModuleManager/commit/d50fc9e2403b3860c842267b4ff3ef04d32c53e6\u0022 rel=\u0022external nofollow\u0022\u003Echange\u003C/a\u003E, the last \u003Ca href=\u0022https://github.com/sarbian/ModuleManager/commit/1a12a253a3addda038bfcd8fef7fa0b0f1840c0c\u0022 rel=\u0022external nofollow\u0022\u003Echange before\u003C/a\u003E, oldest \u003Ca href=\u0022https://github.com/sarbian/ModuleManager/blob/e29c9cb61eb97df6e68bfea1bb6290d3ca49e97e/MMPatchLoader.cs\u0022 rel=\u0022external nofollow\u0022\u003Emention of the file\u003C/a\u003E\u00A0before a internal refactoring, and the first time \u003Ca href=\u0022https://github.com/sarbian/ModuleManager/commit/7161b5d8a0f7dd19ff5695bfd157d5b9dc68edc4\u0022 rel=\u0022external nofollow\u0022\u003EMMPatchLoader was extended with LoadingSystem\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nThis first LoadingSystem commit was made in 2014, so we have 5 years of a public class being served to the general public!!\n\u003C/p\u003E\n\u003Cp\u003E\nSo I understand the reason Add\u0027Ons choose to hook this way: it\u0027s available (it\u0027s a public class!) and it was stable for \u003Cu\u003E5 years\u003C/u\u003E. It\u0027s my understanding that internal classes should be declared\u2026 internal\u2026 \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0and that public classes are intended to be consumed by the general public.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EOf course, perhaps the MMPatchLoader should never be declared as public at first place - but yet, we have a\u00A0\u003Cem\u003Ede facto\u003C/em\u003E\u00A0standard that in an ideal world, should not be changed without a reason.\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-25T14:38:29Z","Content":"\n\u003Cp\u003E\nThe MMPatchLoader class may be public, but you should notice that\u00A0 DatabaseReloadWithMM\u003Cspan\u003E\uFEFF\u003C/span\u003E()\u00A0 has been private since MM2.4.0 and it had no access modifier before that, i.e. defaulted to internal.\n\u003C/p\u003E\n\u003Cp\u003E\nThe way that UbioWeld had to use reflection and copy part of \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E\u0027s code to emulate it is definitely unsupported.\n\u003C/p\u003E\n\u003Cp\u003E\nIf it was intended for other mods to be able to trigger a database reload there would have been a much nicer, properly exposed way for us to do it.\n\u003C/p\u003E\n\u003Cp\u003E\n---\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/119688-blowfish/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022119688\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/119688-blowfish/\u0022 rel=\u0022\u0022\u003E@blowfish\u003C/a\u003E I think I can fix UbioWeld\u0027s code without too much difficulty, but perhaps a properly supported and documented wrapper class would be better?\u003Cbr\u003E\nSome things it could do, off the top of my head:\n\u003C/p\u003E\n\u003Cp\u003E\n1.\u003Cbr\u003E\nCheck if \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E is installed, and if so, which version, and whether \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E is ready (finished patching in loading screen)\n\u003C/p\u003E\n\u003Cp\u003E\n2.\u003Cbr\u003E\nSince \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E 2.6.7 there has been support for other mods to be notified via\u00A0 \u003Cfont face=\u0022Consolas\u0022\u003E \u003Cspan style=\u0022font-style:italic;color:#888888;\u0022\u003EModuleManagerPostLoad\u003C/span\u003E\u003Cspan style=\u0022font-style:italic;color:#888888;\u0022\u003E(\u003C/span\u003E\u003Cspan style=\u0022font-style:italic;color:#888888;\u0022\u003E)\u003C/span\u003E\u003C/font\u003E once \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E has finished doing it\u0027s work in Loading screen, but relying on that makes \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E a hard dependency.\u003Cbr\u003E\nA mod might want to:\u003Cbr\u003E\n- if \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E is installed, once game database is loaded and \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E has finished patching, do_stuff()\u003Cbr\u003E\n- else once game database is loaded, do_stuff()\u003Cbr\u003E\nso in unBlur I had to jump through a few hoops to handle both possibilities\n\u003C/p\u003E\n\u003Cp\u003E\n3.\u003Cbr\u003E\nProvide a way to trigger a database reload (e.g. what UbioWeld needs)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-25T15:00:13Z\u0022 title=\u002205/25/2019 03:00  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 25, 2019\u003C/time\u003E by cakepie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-05-26T02:36:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604524\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558726804\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/24/2019 at 12:40 PM, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI think this is the reason MMPatchLoader extends LoadingSystem : to\u003Cspan\u003E\uFEFF\u003C/span\u003E allow to use UnityEngine\u0027s equivalent.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is where you\u0027ve misunderstood.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EMMPatchLoader was a subclass of LoadingSystem because that is the way to interface with KSP\u0027s loading scene.\u003C/span\u003E\u003Cbr\u003E\nThat part of the job is now taken over by PostPatchLoader.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EMMPatchLoader did not extend LoadingSystem for the sake of providing a way for others to use reflection to access it.\u003Cbr\u003E\nIt just so happens AlexW / \u003C/span\u003E girka2k were able to leverage this to build a workaround to gain access / emulate DataBaseReloadWithMM() in a way that is unintended and unsupported by \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E devs.\u003Cbr\u003E\nThis was a long time ago and I don\u0027t know why they chose to do it like this, or whether or not there was any discussion at the time with \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E side about better ways they might be able to do it.\u003Cbr\u003E\nBut there was never any guarantee that this should work or continue to work like that.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2019-05-26T05:50:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223605203\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558838193\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cakepie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, cakepie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis is where you\u0027ve misunderstood.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EMMPatchLoader was a subclass of LoadingSystem because that is the way to interface with KSP\u0027s loading scene.\u003C/span\u003E\u003Cbr\u003E\nThat part of the job is now taken over by PostPatchLoader.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat ended up allowing the class to be handled by Unity\u0027s reflection nevertheless. Being intentional or not, it ended up being the mechanism people managed to reuse that class for some years. It\u0027s what we call a\u00A0\u003Cem\u003Ede facto\u003C/em\u003E\u00A0standard.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223605203\u0022 data-ipsquote-contentid=\u002250533\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558838193\u0022 data-ipsquote-userid=\u002269278\u0022 data-ipsquote-username=\u0022cakepie\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, cakepie said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan\u003EMMPatchLoader did not extend LoadingSystem for the sake of providing a way for others to use reflection to access it.\u003Cbr\u003E\nIt just so happens AlexW / \u003C/span\u003E girka2k were able to leverage this to build a workaround to gain access / emulate DataBaseReloadWithMM() in a way that is unintended and unsupported by \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E devs.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe whole\u00A0Add\u0027On scene is unintended and unsupported. We are at our own here.\n\u003C/p\u003E\n\u003Cp\u003E\nAll that can be done is\u00A0trying to work together, or trying to work in separate ways. Both are valid, by the way - but some ways tends to be more useful\u00A0to the end users, and IMHO the ultimate objective of every Software is to be useful - so I tend to be somewhat grumpy on everything that hinders the usefulness of the software to the end users.\n\u003C/p\u003E\n\u003Cp\u003E\nPlease observe that I didn\u0027t complained\u00A0on a change on\u00A0DataBaseReloadWithMM() - had it changed somehow, I would just had coped with the new behaviour and called it a day. The show stopper happened because a change happened that broke down the very mechanism we were using to even safely reach a public class without relying on the buggy Mono\u0027s Reflection, so no matter what, I would had to change something that was working safely to something that historically leaded to some grind.\n\u003C/p\u003E\n\u003Cp\u003E\nFixing UbioWeld to cope with the current\u00A0\u003Cem\u003Estatus quo\u003C/em\u003E\u00A0is easy. Doing it safely without uncontrollable side effects is the problem.\n\u003C/p\u003E\n\u003Cp\u003E\nThe safest approach to the problem is keep using UnityEngine.Object.FindObjectOfType, what would need only \u003Ca href=\u0022https://github.com/net-lisias-ksp/ModuleManager/commit/ff9f34ce5cb7da1cd40194dfaebdf999035aaa7f\u0022 rel=\u0022external nofollow\u0022\u003Ethis patch\u003C/a\u003E. No \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E code stops working by this (I\u0027m testing this for some weeks now), and everything else just keep working as before without any change.\n\u003C/p\u003E\n\u003Cp\u003E\nOf course, alternatively it can be decided that MMPatchLoader should not be used by anyone else - I\u0027m Ok with it. Tell us, put an \u0022internal\u0022 on the class declaration (so preventing further misunderstandings)\u00A0and everybody else are free to decide the best way to cope with that.\n\u003C/p\u003E\n"}]}