{"TopicId":107293,"ForumId":29,"TopicTitle":"Json serialization","CreatedByName":"Slother","CreatedById":142925,"CreatedDateTime":"2015-05-03T22:17:36Z","PageNum":1,"Articles":[{"CreatedByName":"Slother","CreatedById":142925,"CreatedDateTime":"2015-05-03T22:17:36Z","Content":"\n\u003Cp\u003EI have lots of experience with .NET and C# under Windows but I\u0027m totally new to KSP addon development and also to Mono. This got me into a situation I don\u0027t quite understand \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI want to develop an addon which communicates with a REST service on a server. The server is written in nodejs and responds with json formatted data. To test the communication without always waiting on KSP to start up I wrote a separate little console application and everythings works great.\u003C/p\u003E\u003Cp\u003ENow moving to an actual KSP addon I get an exception and the confusion starts:\u003C/p\u003E\u003Cp\u003E[Exception]: FileNotFoundException: Could not load file or assembly \u0027System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\u0027 or one of its dependencies.\u003C/p\u003E\u003Cp\u003EI use the DataContractJsonSerializer type to (de-)serialize json data, which is causing the CLR to look for the System.Runtime.Serialization assembly. Looking at KSP_Data\\Managed I realized that this assembly is in fact missing.\u003C/p\u003E\u003Cp\u003EWhat are my options from here?\u003C/p\u003E\u003Cp\u003EMono has an implementation of this assembly but I don\u0027t know in what version of Mono it was added and I also can\u0027t find out what version of Mono KSP (1.0.2) or Unity (4.6.4f1) is using.\u003C/p\u003E\u003Cp\u003EThanks for any help.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Elol, right after posting this I found a working solution, but I\u0027m not quite sure if it is the \u0022correct\u0022 or best solution:\u003C/p\u003E\u003Cp\u003E- Compile against the .NET Framework 3.5 not 4.0 because the DataContractJsonSerializer was moved from System.ServiceModel.Web to System.Runtime.Serialization in 4.0.\u003C/p\u003E\u003Cp\u003E- Copy System.ServiceModel.Web.dll and System.Runtime.Serialization.dll from Mono to KSP_Data\\Managed. I copied it from my Unity installation from: Unity\\Editor\\Data\\Mono\\lib\\mono\\2.0\u003C/p\u003E\u003Cp\u003EI am still confused by what version of Mono is used and what version of the .NET framework that relates to.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-05-03T22:26:23Z","Content":"\n\u003Cp\u003EMono 2.x heavily patched by unity. Use the 3.5 framework, it will do fine \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit : use a JSon serializer made for Unity like \u003Ca href=\u0022https://github.com/jacobdufault/fullserializer\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/jacobdufault/fullserializer\u003C/a\u003E you will have less trouble.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-03T22:28:27Z\u0022 title=\u002205/03/2015 10:28  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 3, 2015\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Slother","CreatedById":142925,"CreatedDateTime":"2015-05-03T22:40:13Z","Content":"\n\u003Cp\u003EThanks for the answer.\u003C/p\u003E\u003Cp\u003EI thought the least troublesome way would be to use the serializer that is available directly in the framework, but maybe I was wrong \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif\u0022 alt=\u0022:rolleyes:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2015-05-04T22:21:51Z","Content":"\n\u003Cp\u003EThere is also a serializer used by KSP, the ConfigNode class. It\u0027s what\u0027s used in the save files and settings files, and most mods use it.\u003C/p\u003E\u003Cp\u003EEdit: Disregard that, must\u0027ve read over the part where you said you wanted to comunicate with a server.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-04T22:25:40Z\u0022 title=\u002205/04/2015 10:25  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 4, 2015\u003C/time\u003E by MrHappyFace\u003C/strong\u003E\n\u003C/span\u003E\n"}]}