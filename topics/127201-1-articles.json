{"TopicId":127201,"ForumId":29,"TopicTitle":"Experimenting with resource conversion ... passing the info along!","CreatedByName":"BetaguyGZT","CreatedById":152204,"CreatedDateTime":"2015-12-07T01:07:09Z","PageNum":1,"Articles":[{"CreatedByName":"BetaguyGZT","CreatedById":152204,"CreatedDateTime":"2015-12-07T01:07:09Z","Content":"\n\u003Cp\u003E\nMy first contribution to this fine Community -- and I can assure you it won\u0027t be my last. \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0Hopefully this points anyone who needs the information in the right direction.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve been monkeying (Chaka!) around with adding CO2 Scrubbers and whatnot to Pods and Station Modules. Following the brilliant examples in TACLifeSupport\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/37449-102-tac-life-support-v011120-5apr/\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/37449-102-tac-life-support-v011120-5apr/\u003C/a\u003E\u00A0by TaranisElsu, I attempted to add the relevant modules from that pack into Pods and Station Modules that I was directly using, but it didn\u0027t quite work out the way I wanted. I was calling the\u00A0\u003Cstrong\u003Eparts\u00A0\u003C/strong\u003Einstead of the functions; that\u0027s where I was going wrong.\n\u003C/p\u003E\n\u003Cp\u003E\nTurns out we can simply add these things directly into each .cfg file, and\u00A0\u003Cstrong\u003Enot\u00A0\u003C/strong\u003Ehave them be static (because one Pod for two Kerbals should not have the same Scrubber as a Pod meant for six!). We can tweak how \u0022efficient\u0022 these parts are, as well as how \u0022converty\u0022 they are, according to the Pod or Module.\n\u003C/p\u003E\n\u003Cp\u003E\nAll credit for the code you\u0027re about to see below goes to TaranisElsu and TacLifeSupport. I\u0027m just a bit of a hack who tweaked the numbers for simplification, and I\u0027m sure TaranisElsu\u00A0will yell at me for it. \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIn each part file you want a Convertor/Scrubber/Recycler in, you can add this to the config, and you may have\u00A0\u003Cem\u003Emore than one convertor!\u00A0\u003C/em\u003ESimply make a new MODULE {} entry for it.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\n// Watch this ... don\u0027t need separate config files, do it right here in the .cfg file! Needs TacLifeSupport.\n\u00A0\u00A0 \u00A0MODULE\n\u00A0\u00A0 \u00A0{\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0name = TacGenericConverter\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0converterName = CO2 Scrubber\n\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// A scaling factor by which the resource amounts are multiplied -- change the last number for however many Kerbals the part is rated for (this one is for 4 Kerbals)\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0conversionRate = 0.04\n\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// A comma separated list of resources to use as inputs.\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// For each resource, list the resource name and the amount (which\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// is multiplied by the conversionRate)\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0inputResources = CarbonDioxide, 0.1, ElectricCharge, 0.4\n\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// A comma separated list of resources to output. Same as above\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// but also specify whether it should keep converting if the\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// resource is full (generating excess that will be thrown away).\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0outputResources = Oxygen, 0.025, false, Waste, 0.075, true\n\u00A0\u00A0 \u00A0}\u003C/pre\u003E\n\u003Cp\u003E\nAs you can see in the code, the above unit is rated for 4 Kerbals, and has an efficiency rating of ~25%. Every 0.1 units of CO2, plus 0.4 ElectricCharge will output 0.025 units of Oxygen and the remaining 0.075 units (in this setup) is Waste. The inputResources and outputResources can be anything we need; but it\u0027s good to keep things realistic. No reason to have this thing generating MonoPropellant, ElectricCharge and LiquidFuel/Oxidizer, although it\u00A0\u003Cem\u003Ecould\u003C/em\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd remember that anything outputResource generated is stored\u00A0\u003Cem\u003Eautomatically\u003C/em\u003E\u00A0if that resource storage is specified on-board. For example, if we\u0027re storing Waste on board, the excess (\u0022Waste\u0022) will go into the Waste resource pool, because that resource was specified as being on board. \u0022Waste\u0022 literally can mean anything.\u00A0\u003Cem\u003EAnything.\u00A0\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nTreat WasteWater the same way. Outputs are likely CarbonDioxide and Methane (you\u0027ll need tanks to store both separately), then use the CO2 Scrubber to get Oxygen from it.\n\u003C/p\u003E\n\u003Cp\u003E\nIf we\u00A0\u003Cem\u003Ereally\u00A0\u003C/em\u003Ewanted to get creative, we can use a Sabatier Process to turn Carbon and Methane into nearly\u00A0\u003Cstrong\u003Eanything.\u00A0\u003C/strong\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHope this is helpful. Again, all credits go to TaranisElsu and TacLifeSupport for the code.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-07T01:10:26Z\u0022 title=\u002212/07/2015 01:10  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 7, 2015\u003C/time\u003E by BetaguyGZT\u003C/strong\u003E\n\u003Cbr\u003Estupid code entry ... rasm frasm ...\n\u003C/span\u003E\n"},{"CreatedByName":"BetaguyGZT","CreatedById":152204,"CreatedDateTime":"2015-12-07T05:59:14Z","Content":"\n\u003Cp\u003E\nEven\u00A0\u003Cstrong\u003Emore\u00A0\u003C/strong\u003Eexperimentation. Use these as your needs require, tweak them for proper realism and scaling. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0Remember that all code is either TaranisElsu\u0027s or a derivative work, and exists in this thread by his/her good graces. Anything I\u0027ve added to it or come up with on my own that is derivative of TaranisElsu\u0027s work is the same licence as TacLifeSupport (\u003Ca href=\u0022https://raw.githubusercontent.com/taraniselsu/TacLifeSupport/master/LICENSE.txt\u0022 rel=\u0022external nofollow\u0022\u003ECC-BY-NC-SA 3.0\u003C/a\u003E).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EAll Modules\u00A0require TacLifeSupport (and won\u0027t work without it),\u00A0\u003C/strong\u003E\u003Cstrong\u003Efound here:\u003C/strong\u003E\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/37449-102-tac-life-support-v011120-5apr/\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/37449-102-tac-life-support-v011120-5apr/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s a foregone conclusion you\u0027ll need to add whatever RESOURCE you\u0027re consuming/producing to your part, if it isn\u0027t already present.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso note that I\u0027ve had issues getting these modules to work with FSFuelSwitch and InterstellarFuelSwitch, even when\u00A0the resources are added to the resourcesToIgnore = list. It\u0027s flaky sometimes -- so be careful what you\u0027re producing. Took me half an hour to figure out why a part wasn\u0027t loading ... anyway.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EWater Purification Module.\u00A0\u003C/strong\u003ESimply add this to whatever you need it put into. (Remove the RESOURCE{} bits as needed, I\u0027m including them as a courtesy.)\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint\u0022\u003E\nRESOURCE\n{\n\tname = Water\n\tamount = 400\n\tmaxAmount = 400\n}\n\nRESOURCE\n{\n\tname = WasteWater\n\tamount = 0\n\tmaxAmount = 100\n}\n\nRESOURCE\n{\n\tname = Waste\n\tamount = 0\n\tmaxAmount = 100\n}\n\nMODULE\n{\n\tname = TacGenericConverter\n\tconverterName = Water Purifier\n\n\t// A scaling factor by which the resource amounts are multiplied\n\tconversionRate = 0.04\n\n\t// A comma separated list of resources to use as inputs.\n\t// For each resource, list the resource name and the amount (which\n\t// is multiplied by the conversionRate)\n\tinputResources = WasteWater, 0.02, ElectricCharge, 0.04\n\n\t// A comma separated list of resources to output. Same as above\n\t// but also specify whether it should keep converting if the\n\t// resource is full (generating excess that will be thrown away).\n\toutputResources = Water, 0.01, false, Waste, 0.01, true\n}\u003C/pre\u003E\n\u003Cp\u003E\nWhy are we keeping the Waste? You don\u0027t\u00A0\u003Cem\u003Ehave\u00A0\u003C/em\u003Eto. As stated, remove the bits you don\u0027t want; but this one relies on WasteWater and Water, so I suggest keeping those two. And\u00A0\u003Cem\u003Ewhat\u00A0\u003C/em\u003Eproper space-going vessel doesn\u0027t have waste handling? Apollo did. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMore to come. I\u0027ve got a few more of my own design, but they\u0027re a bit ..\u00A0\u003Cem\u003Eunrealistic.\u00A0\u003C/em\u003EI need to do some research first to see if they\u0027re \u0022correct\u0022. \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nEnjoy!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2015-12-10T23:51:37Z","Content":"\n\u003Cp\u003E\nIf you want to make your parts balanced to real life, you can see\u00A0all of my math, and how I derived it,\u00A0here:\u00A0\u003Ca href=\u0022https://docs.google.com/spreadsheets/d/1DkWf210viRSNcV8tvDv30vZ_iACj6GeY1Lf_4JdZYds/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.google.com/spreadsheets/d/1DkWf210viRSNcV8tvDv30vZ_iACj6GeY1Lf_4JdZYds/edit?usp=sharing\u003C/a\u003E\u00A0.\u00A0Information about resource conversion starts around line 313.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, take a look at ModuleResourceConverter, which is in Stock. See the ISRU parts for examples. My code predates that, and they added some neat functionality there.\n\u003C/p\u003E\n\u003Cp\u003E\nHave fun\u00A0\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"BetaguyGZT","CreatedById":152204,"CreatedDateTime":"2015-12-12T03:20:01Z","Content":"\n\u003Cp\u003E\nThank you kindly, I\u0027ll check it out. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve run into a bit of a funny problem -- after the modules convert so much of an amount of a resource, they seem to \u0022saturate\u0022 and begin to NOT convert anymore. 100-200 units is about the best number I can provide before they simply stop functioning. Is this intended, or is there something in the code I\u0027m supposed to be adding, changing or looking for?\n\u003C/p\u003E\n"}]}