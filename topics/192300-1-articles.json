{"TopicId":192300,"ForumId":29,"TopicTitle":"[1.8.1] Stock RewardFunds are broken???","CreatedByName":"nepphhh","CreatedById":198315,"CreatedDateTime":"2020-03-11T03:16:24Z","PageNum":1,"Articles":[{"CreatedByName":"nepphhh","CreatedById":198315,"CreatedDateTime":"2020-03-11T03:16:24Z","Content":"\n\u003Cp\u003E\nI\u0027ve got a very simple contract:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E    // ************************ PARAMETERS ************************\n    PARAMETER {\n        name = VesselGroup\n        type = VesselParameterGroup        \n        title = Build and fly a rocket        \n        PARAMETER {\n            name = NewVessel\n            type = NewVessel\n            title = Launch a New Vessel\n        }        \n        PARAMETER {\n            name = Crewmembers\n            type = HasCrew\n            minCrew = 0\n            maxCrew = 0\n            title = Uncrewed\n        }        \n        PARAMETER {\n            name = ReachStateFlying\n            type = ReachState\n            situation = FLYING\n            minRateOfClimb = 250\n        }\n           PARAMETER {\n            name = ReachStateLaunch\n            type = ReachState\n            minAltitude = 2500\n            title = Reach @minAltitude meters\n            hideChildren = true\n        }\n           PARAMETER {\n            name = ReachStateLaunch2\n            type = ReachState\n            minAltitude = 5000\n            title = Reach @minAltitude meters\n            hideChildren = true\n            optional = true\n            rewardFunds = 2500\n        }\n           PARAMETER {\n            name = ReachStateLaunch3\n            type = ReachState\n            minAltitude = 10000\n            title = Reach @minAltitude meters\n            hideChildren = true\n            optional = true\n            rewardFunds = 5000\n        }\n    }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Aq6vGd4.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002256.25\u0022 height=\u0022576\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/Aq6vGd4.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAs you can see, there\u0027s several optional contract which reward their own funds upon completion.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd yet...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u002262zSn6M.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002256.25\u0022 height=\u0022576\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/62zSn6M.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n...clearly no such thing is happening.\n\u003C/p\u003E\n\u003Cp\u003E\nSo something\u0027s broken. Is is CC?\n\u003C/p\u003E\n\u003Cp\u003E\nPeering through CC\u0027s code...\n\u003C/p\u003E\n\u003Cp\u003E\nFrom somewhere this thing called \u003Ccode\u003EGenerateContract\u003C/code\u003E is run on a list of \u003Ccode\u003EConfiguredContract\u003C/code\u003Es. \u003Ccode\u003EConfiguredContract\u003C/code\u003E has got an \u003Ccode\u003EInitalize(contractType)\u003C/code\u003E method which runs a method called \u003Ccode\u003EGenerateParameters\u003C/code\u003E off of \u003Ccode\u003EcontractType\u003C/code\u003E which just runs \u003Ccode\u003EParameterFactor.GenerateParameters\u003C/code\u003E and makes sure it returns true. \u003Ccode\u003EParameterFactory.GenerateParameters\u003C/code\u003E calls this \u003Ccode\u003EGenerate\u003C/code\u003E method for each parameter that is stuck onto \u003Ccode\u003EContractParameter\u003C/code\u003E and \u003Ccode\u003EGenerate\u003C/code\u003E runs the \u003Ccode\u003ESetFunds/Reputation/Science\u003C/code\u003E methods as provided by stock.\n\u003C/p\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\nAnd then in the \u003Ccode\u003ESetState\u003C/code\u003E method for \u003Ccode\u003EContractConfiguratorParameter\u003C/code\u003E (which extends stock\u0027s \u003Ccode\u003EContractParameter\u003C/code\u003E it runs stock\u0027s \u003Ccode\u003EAwardCompletion\u003C/code\u003E which presumably rewards these funds etc. So all the relevant stuff is in the black box that stock handles.\n\u003C/div\u003E\n\u003Cdiv\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cdiv\u003E\nHelp! What do I do from here?\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n"},{"CreatedByName":"Capt. Hunt","CreatedById":97860,"CreatedDateTime":"2020-03-11T05:29:16Z","Content":"\n\u003Cp\u003E\nlooking at the criteria for this contract, it wants you to launch an unmanned rocket.\u00A0 The rocket in this picture is clearly not unmanned.\n\u003C/p\u003E\n"}]}