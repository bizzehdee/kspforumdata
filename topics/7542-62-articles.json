{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":62,"Articles":[{"CreatedByName":"MoreUmpf","CreatedById":117868,"CreatedDateTime":"2015-01-22T23:02:41Z","Content":"\n\u003Cp\u003EIs there a way to add custom events like the ones provided by the GameEvents-class.\u003C/p\u003E\u003Cp\u003EI created two of my own events like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[B]public[/B] static class CustomEvents\u003Cbr\u003E    {\u003Cbr\u003E        [B]public[/B] static EventData\u0026lt;ProtoVessel\u0026gt; [I]onStationCompleted[/I] = [B]new[/B] EventData\u0026lt;ProtoVessel\u0026gt;(\u0022StationCompleted\u0022);\u003Cbr\u003E        [B]public[/B] static EventData\u0026lt;ProtoVessel\u0026gt; [I]onBaseCompleted[/I] = [B]new[/B] EventData\u0026lt;ProtoVessel\u0026gt;(\u0022BaseCompleted\u0022);\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut I still had no luck actually firing those events.\u003C/p\u003E\u003Cp\u003EThis is how I add, fire and remove the events:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[...]\u003Cbr\u003EDebug.Log(\u0022Firing Station event\u0022); // \u0026lt;-- appears in the log\u003Cbr\u003ECustomEvents.[I]onStationCompleted[/I].[B]Fire[/B](FlightGlobals.ActiveVessel.[I]protoVessel[/I]);\u003Cbr\u003E[...]\u003Cbr\u003E\u003Cbr\u003E        [B]protected[/B] override void [B]OnStart[/B]()\u003Cbr\u003E        {\u003Cbr\u003E            Debug.[B]Log[/B](\u0022 OnStart called!\u0022); // \u0026lt;-- appears in the log\u003Cbr\u003E            CustomEvents.[I]onStationCompleted[/I].[B]Add[/B]([B]new[/B] EventData\u0026lt;ProtoVessel\u0026gt;.OnEvent([B]OnStationCompleted[/B]));\u003Cbr\u003E            CustomEvents.[I]onBaseCompleted[/I].[B]Add[/B]([B]new[/B] EventData\u0026lt;ProtoVessel\u0026gt;.OnEvent([B]OnBaseCompleted[/B]));\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        [B]protected[/B] override void [B]OnDestroy[/B]()\u003Cbr\u003E        {\u003Cbr\u003E            Debug.[B]Log[/B](\u0022OnDestroy called!\u0022); // \u0026lt;-- appears in the log\u003Cbr\u003E            CustomEvents.[I]onStationCompleted[/I].[B]Remove[/B]([B]new[/B] EventData\u0026lt;ProtoVessel\u0026gt;.OnEvent([B]OnStationCompleted[/B]));\u003Cbr\u003E            CustomEvents.[I]onBaseCompleted[/I].[B]Remove[/B]([B]new[/B] EventData\u0026lt;ProtoVessel\u0026gt;.OnEvent([B]OnBaseCompleted[/B]));\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        [B]private[/B] void [B]OnStationCompleted[/B](ProtoVessel pvessel)\u003Cbr\u003E        {\u003Cbr\u003E            Debug.Log(\u0022OnStationCompleted called!\u0022); // \u0026lt;-- does NOT appear in the log\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        [B]private[/B] void [B]OnBaseCompleted[/B](ProtoVessel pvessel)\u003Cbr\u003E        {\u003Cbr\u003E            Debug.Log(\u0022OnBaseCompleted called!\u0022); // \u0026lt;-- does NOT appear in the log\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAs you can see I did everything like with the normal GameEvents but the firing just doesn\u0027t call my functions at all. There\u0027s not even an error message in the log.\u003C/p\u003E\u003Cp\u003EWhat have I done wrong and how can I fix it?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-22T23:08:45Z\u0022 title=\u002201/22/2015 11:08  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 22, 2015\u003C/time\u003E by MoreUmpf\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-25T04:49:43Z","Content":"\n\u003Cp\u003EAlright, very simple question.\u003C/p\u003E\u003Cp\u003EThere is the GameSettings Class that contains the keybinds in the game as KeyBinding objects.\u003C/p\u003E\u003Cp\u003EI need to make a List\u0026lt;KeyBinding\u0026gt; from those keybinds and I don\u0027t want to copy-paste code 100 times to manually do each keybind.\u003C/p\u003E\u003Cp\u003EGoogle says that this should work:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eforeach (KeyBinding kb in typeof(GameSettings).GetFields().OfType\u0026lt;KeyBinding\u0026gt;()) //find all keybinds in the game\u003Cbr\u003E{\u003Cbr\u003Eprint(\u0022keybind \u0022 \u002B kb.name);\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut nothing prints. Note that no error is thrown either so I think I\u0027m on the right track, I\u0027m just looking for the wrong thing so that line of code currently returns zero items.\u003C/p\u003E\u003Cp\u003EThe issue being I have no clue what I need to change to find the keybinds as I want.\u003C/p\u003E\u003Cp\u003EAnyone have any ideas?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"flashcactus","CreatedById":103335,"CreatedDateTime":"2015-01-25T21:09:53Z","Content":"\n\u003Cp\u003ESo, I\u0027m starting out with KSP plugin development, using MonoDevelop. 2 questions: First, what kind of project do I have to create? I\u0027m guessing either \u003Cem\u003ELibrary\u003C/em\u003E or \u003Cem\u003EPortable library\u003C/em\u003E. Second, how do I add the KSP and Unity libs?\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-01-25T21:31:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EGoogle says that this should work:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eforeach (KeyBinding kb in typeof(GameSettings).GetFields().OfType\u0026lt;KeyBinding\u0026gt;()) //find all keybinds in the game\u003Cbr\u003E{\u003Cbr\u003Eprint(\u0022keybind \u0022 \u002B kb.name);\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut nothing prints. Note that no error is thrown either so I think I\u0027m on the right track, I\u0027m just looking for the wrong thing so that line of code currently returns zero items.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027ve got it almost right but there are two bugs in your code. The first is that GetFields() doesn\u0027t return static fields by default. The second is that GetFields() returns an array of FieldInfo[] which means that any fields you did retrieve are immediately thrown out when comparing FieldInfo to KeyBinding in .OfType\u0026lt;KeyBinding\u0026gt;\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eforeach (FieldInfo kbInfo in typeof (GameSettings).GetFields(BindingFlags.Static | BindingFlags.Public)\u003Cbr\u003E    .Where(fi =\u0026gt; fi.FieldType == typeof(KeyBinding)))\u003Cbr\u003E{\u003Cbr\u003E    var kb = kbInfo.GetValue(null) as KeyBinding;\u003Cbr\u003E\u003Cbr\u003E    _log.Normal(\u0022Keybinding: \u0027\u0022 \u002B kbInfo.Name \u002B \u0022\u0027 set to \u0022 \u002B kb.primary \u002B (kb.secondary != KeyCode.None ? (\u0022 and \u0022 \u002B kb.secondary) : \u0022\u0022));\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-01-25T23:44:31Z","Content":"\n\u003Cp\u003EAlright.\u003C/p\u003E\u003Cp\u003EI\u0027m thinking I\u0027m just going to go ahead and build the index manually at this point, faster then figuring it out it seems.\u003C/p\u003E\u003Cp\u003EThanks for the assist.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-01-26T23:16:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022flashcactus\u0022 data-cite=\u0022flashcactus\u0022\u003E\u003Cdiv\u003ESo, I\u0027m starting out with KSP plugin development, using MonoDevelop. 2 questions: First, what kind of project do I have to create? I\u0027m guessing either \u003Cem\u003ELibrary\u003C/em\u003E or \u003Cem\u003EPortable library\u003C/em\u003E. Second, how do I add the KSP and Unity libs?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Setting_up_MonoDevelop\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Setting_up_MonoDevelop\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Robotengineer","CreatedById":104525,"CreatedDateTime":"2015-01-27T18:56:03Z","Content":"\n\u003Cp\u003EIf I want to create an inventory of parts for a save, how do I go about doing this?\u003C/p\u003E\n"},{"CreatedByName":"StratoK","CreatedById":92175,"CreatedDateTime":"2015-01-29T16:51:22Z","Content":"\n\u003Cp\u003EHi!\u003C/p\u003E\u003Cp\u003EI am thinking of making a kind of wormhole mod with actual celestial bodies instead of parts. Now, my problem is how would I go about inverting my orbit calculation wise? What parameters of it have to be changed how?\u003C/p\u003E\u003Cp\u003EExample: Ship is suborbital around body A going right round, and I have the parameters of it\u0027s orbit (FlightGlobals.ActiveVessel.orbit). Now, as with a real wormhole, your orbit on the other side (Body \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E would be reversed. I know how to change it to go left round (add 180 to inclination), but how would I take into account eccentricity, position in orbit, and flip the direction of the \u0027eccentricity-bulge-direction\u0027?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-29T16:57:57Z\u0022 title=\u002201/29/2015 04:57  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 29, 2015\u003C/time\u003E by StratoK\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2015-01-29T19:06:51Z","Content":"\n\u003Cp\u003EThis isn\u0027t exactly a plugin question, but what\u0027s the consensus on porting old mods whose authors have left without leaving a license? Must we assume they cannot be ported, or can we port them, give credit, and agree to take them down if the author complains?\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-01-29T19:14:29Z","Content":"\n\u003Cp\u003ENo license no porting.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-01-29T22:08:00Z","Content":"\n\u003Cp\u003ENo license = All Rights Reserved, yeah.\u003C/p\u003E\n"},{"CreatedByName":"intervenience","CreatedById":110171,"CreatedDateTime":"2015-01-30T06:12:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Robotengineer\u0022 data-cite=\u0022Robotengineer\u0022\u003E\u003Cdiv\u003EIf I want to create an inventory of parts for a save, how do I go about doing this?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo you want to have parts allocated for specific game saves? I think you will have to use config nodes for this, but I\u0027m not entirely sure how you would proceed from there.\u003C/p\u003E\u003Cp\u003EMy question: I\u0027m trying to use ConfigNode to load a string array, but it does not return any results. It just says in the log \u0022System.String[]\u0022 Is there a better way to load this information to compare data from the game? In this case, comparing stored values in my config node to the universal time in the game, such that there may be many results to retrieve. If there is no other way to retrieve the data, could someone help me troubleshoot this.\u003C/p\u003E\u003Cp\u003E(I\u0027m using a custom .cfg file in my mod folder for now)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Estring timeOfRestoration;\u003Cbr\u003Evoid Awake()\u003Cbr\u003E{\u003Cbr\u003E   ConfigNode rtLoadNode = ConfigNode.Load(\u0022GameData/recoveryTimer/Recoveries.cfg\u0022);\u003Cbr\u003E   Debug.Log(rtLoadNode.GetValues(timeOfRestoration));\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd yes, I\u0027ve made sure it\u0027s loading the correct file. I\u0027ve got another line of code in my file to count the nodes in the file and it\u0027s returning the correct number so it\u0027s definitely working. Thanks.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-01-30T06:22:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022intervenience\u0022 data-cite=\u0022intervenience\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Estring timeOfRestoration;\u003Cbr\u003Evoid Awake()\u003Cbr\u003E{\u003Cbr\u003E   ConfigNode rtLoadNode = ConfigNode.Load(\u0022GameData/recoveryTimer/Recoveries.cfg\u0022);\u003Cbr\u003E   [COLOR=#ff0000]foreach (string s in rtLoadNode.GetValues(timeOfRestoration))\u003Cbr\u003E       Debug.Log(s)[/COLOR]\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can\u0027t print a collection and expect to get something sensible, you have to print the elements of the collection\u003C/p\u003E\n"},{"CreatedByName":"intervenience","CreatedById":110171,"CreatedDateTime":"2015-01-30T07:14:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Crzyrndm\u0022 data-cite=\u0022Crzyrndm\u0022\u003E\u003Cdiv\u003EYou can\u0027t print a collection and expect to get something sensible, you have to print the elements of the collection\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, I see. Thank you. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2015-01-30T10:54:55Z","Content":"\n\u003Cp\u003EGot a Q thats bugging me. When Timewarp is changed by altitude limits is there anyway to detect thats the reason? I tried looking at the altitude, but when the initial change happens the vessel is not actually at the altitude, and I cant simply check for keystrokes as a mod may be affecting the warp too.\u003C/p\u003E\u003Cp\u003EAnyone got any good ideas?\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-01-30T12:30:34Z","Content":"\n\u003Cp\u003EYou checked the alt vs TimeWarp.fetch.GetAltitudeLimit(TimeWarp.fetch.current_rate_index, vessel.mainBody) ? I guess you could check with \u002B1 and -1 on the index. \u003C/p\u003E\u003Cp\u003E\u0022when the initial change happens the vessel is not actually at the altitude\u0022. Do you see a small difference ? It may be that the alt used for the check is the alt of the the next frame position ( ie pos \u002B velocity * TimeWarp.deltaTime )\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-01-30T14:59:26Z","Content":"\n\u003Cp\u003EI\u0027m not sure in which order the events for game loading and saving trigger.\u003C/p\u003E\u003Cp\u003ESo far I think it works like that:\u003C/p\u003E\u003Cp\u003ELoading a game save\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E(KSP reads sfs file)\u003Cbr\u003EGameEvent.onGameStateLoaded.Fire() // returns ConfigNode\u003Cbr\u003EGameEvent.onGameStateCreated.Fire() // returns Game object\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESaving a game save\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EGameEvent.onGameStateSave.Fire() // returns Game object\u003Cbr\u003EGameEvent.onGameStateSaved.Fire() // returns ConfigNode\u003Cbr\u003E(KSP writes sfs file)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIs that correct?\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-01-30T16:01:43Z","Content":"\n\u003Cp\u003EFor saving it is : \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EGameEvent.onGameStateSaved.Fire() // returns ConfigNode giving addons the opportunity to add data to the save\u003Cbr\u003E(KSP writes sfs file)\u003Cbr\u003EGameEvent.onGameStateSave.Fire() // returns Game object. Save is done\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENo idea for the Loaded/Created.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-01-30T16:38:47Z","Content":"\n\u003Cp\u003EThank you. That helped a lot! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ENext question: This gives an error.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPAddon(KSPAddon.Startup.Flight,false)]\u003Cbr\u003E    public class Test: MonoBehaviour\u003Cbr\u003E    {\u003Cbr\u003E        void Awake()\u003Cbr\u003E        {\u003Cbr\u003E            Debug.Log(\u0022Awake\u0022);\u003Cbr\u003E            GameEvents.onGameStateCreated.Add((game) =\u0026gt;\u003Cbr\u003E                                              {\u003Cbr\u003E                                                  Debug.Log(\u0022onGameStateCreated\u0022);\u003Cbr\u003E                                              });\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[LOG 17:22:44.052] Awake\u003Cbr\u003E[EXC 17:22:44.057] NullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E\tEventData\u00601\u002B[Game]..ctor (.OnEvent )\u003Cbr\u003E\tEventData\u00601[Game].Add (.OnEvent evt)\u003Cbr\u003E\tTestNamespace.Test.Awake ()\u003Cbr\u003E\tUnityEngine.GameObject:AddComponent(Type)\u003Cbr\u003E\tAddonLoader:StartAddon(LoadedAssembly, Type, KSPAddon, Startup)\u003Cbr\u003E\tAddonLoader:StartAddons(Startup)\u003Cbr\u003E\tAddonLoader:OnLevelWasLoaded(Int32)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhat\u0027s the problem here? Visual Studio accepts the code.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2015-01-30T17:02:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022*Aqua*\u0022 data-cite=\u0022*Aqua*\u0022\u003E\u003Cdiv\u003EThank you. That helped a lot! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003ENext question: This gives an error.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPAddon(KSPAddon.Startup.Flight,false)]\u003Cbr\u003E    public class Test: MonoBehaviour\u003Cbr\u003E    {\u003Cbr\u003E        void Awake()\u003Cbr\u003E        {\u003Cbr\u003E            Debug.Log(\u0022Awake\u0022);\u003Cbr\u003E            GameEvents.onGameStateCreated.Add((game) =\u0026gt;\u003Cbr\u003E                                              {\u003Cbr\u003E                                                  Debug.Log(\u0022onGameStateCreated\u0022);\u003Cbr\u003E                                              });\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[LOG 17:22:44.052] Awake\u003Cbr\u003E[EXC 17:22:44.057] NullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E\tEventData\u00601\u002B[Game]..ctor (.OnEvent )\u003Cbr\u003E\tEventData\u00601[Game].Add (.OnEvent evt)\u003Cbr\u003E\tTestNamespace.Test.Awake ()\u003Cbr\u003E\tUnityEngine.GameObject:AddComponent(Type)\u003Cbr\u003E\tAddonLoader:StartAddon(LoadedAssembly, Type, KSPAddon, Startup)\u003Cbr\u003E\tAddonLoader:StartAddons(Startup)\u003Cbr\u003E\tAddonLoader:OnLevelWasLoaded(Int32)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhat\u0027s the problem here? Visual Studio accepts the code.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnonymous methods don\u0027t deal well with GameEvents. You need something that can be removed, and since anonymous methods have no signature you couldn\u0027t remove the method from the event if you wanted to.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-01-30T17:19:00Z","Content":"\n\u003Cp\u003EThat was it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EMan, there\u0027s some really tricky stuff you have to think about.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2015-01-30T20:24:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EYou checked the alt vs TimeWarp.fetch.GetAltitudeLimit(TimeWarp.fetch.current_rate_index, vessel.mainBody) ? I guess you could check with \u002B1 and -1 on the index. \u003Cp\u003E\u0022when the initial change happens the vessel is not actually at the altitude\u0022. Do you see a small difference ? It may be that the alt used for the check is the alt of the the next frame position ( ie pos \u002B velocity * TimeWarp.deltaTime )\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThats the code I was checking to try and see between this and previously whether it had changed AltitudeLimits. I\u0027ve got a feeling its dropping out based on some lookahead type thing, the Altitude is always greater than the limit when it drops out. I\u0027ll try the next frame position idea, thanks Sarbian\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-01-31T19:56:19Z","Content":"\n\u003Cp\u003EI\u0027ve got another question:\u003C/p\u003E\u003Cp\u003EHow can I query which Kerbal is assigned to which capsule seat in the editor crew screen?\u003C/p\u003E\u003Cp\u003EI just can\u0027t find that information anywhere. part.protoModuleCrew.Count() always reports 0. It seems the only way is to parse the GUI via EditorPanels.Instance.crew (is a UIPanel). I bet there\u0027s a better way.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-01-31T21:32:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022*Aqua*\u0022 data-cite=\u0022*Aqua*\u0022\u003E\u003Cdiv\u003EI\u0027ve got another question:\u003Cp\u003EHow can I query which Kerbal is assigned to which capsule seat in the editor crew screen?\u003C/p\u003E\u003Cp\u003EI just can\u0027t find that information anywhere. part.protoModuleCrew.Count() always reports 0. It seems the only way is to parse the GUI via EditorPanels.Instance.crew (is a UIPanel). I bet there\u0027s a better way.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you can get the information from the panel manager, I\u0027m not sure what the issue is (you\u0027re not parsing the GUI, you\u0027re getting information from the class that controls the GUI). Crew is almost certainly added/associated with the vessel post-launch\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-01-31T22:35:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIf you can get the information from the panel manager, I\u0027m not sure what the issue is\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m sure that\u0027s not how you should do that. There must be somekind of collection somewhere which contains the information which Kerbal goes to which seat. The GUI parses that collection and arranges panels, buttons, etc. according to that... if it works according to the MVC design pattern. And it\u0027s this collection I want to get.\u003C/p\u003E\n"}]}