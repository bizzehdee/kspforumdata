{"TopicId":165628,"ForumId":34,"TopicTitle":"[KSP 1.12.x] kOS v1.4.0.0: kOS Scriptable Autopilot System","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2017-09-18T16:56:54Z","PageNum":5,"Articles":[{"CreatedByName":"windystig","CreatedById":170953,"CreatedDateTime":"2017-11-17T10:44:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223221323\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221510895344\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAfter reading your post I just made this issue:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2173\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2173\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHi Steven\n\u003C/p\u003E\n\u003Cp\u003E\nI found that by playing with a few bits ( e.g. changing \u0027node:eta\u0027 to \u0027nextnode:eta\u0027 )\u00A0\u00A0and removing the line i quoted i managed to get it working.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, i am using the script to do\u00A0a maneuver with\u00A0a shuttle so the line \u0027LOCK STEERING TO NP\u0027 does point the nose at NP, but i need it to nose up about 15 degrees. Is there something i could add to this line that would accomplish that. eg LOCK STEERING TO NP \u002B (followed by an instruction that would make it use NP as a basis then nose up 15)?\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003Cp\u003E\nDaniel\n\u003C/p\u003E\n"},{"CreatedByName":"scimas","CreatedById":178087,"CreatedDateTime":"2017-11-17T14:21:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223221415\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221510915443\u0022 data-ipsquote-userid=\u0022170953\u0022 data-ipsquote-username=\u0022windystig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, windystig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs there something i could add to this line that would accomplish that. eg LOCK STEERING TO NP \u002B (followed by an instruction that would make it use NP as a basis then nose up 15)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou will first need to define what do you mean by \u0027up.\u0027 You either are near Kerbin and want to nose up as in away from surface or in orbit and then nose up might mean towards the normal vector, or many other things. In any case you will need another vector to determine where to point the ship.\n\u003C/p\u003E\n\u003Cp\u003E\nLet\u0027s say that it\u0027s the first case, away from ground. So node deltaV becomes your first vector and the predefined \u0027UP:vector\u0027 second vector. Their cross product (normalize it) will give you a vector that you can use as axis of rotation. Now take the deltaV vector and use\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula\u0022 rel=\u0022external nofollow\u0022\u003ERodrigues\u0027 Rotation Formula\u003C/a\u003E\u00A0to get the vector where you want to point your ship.\n\u003C/p\u003E\n\u003Cp\u003E\nDo remember that KSP uses a left handed coordinate system when calculating cross products.\n\u003C/p\u003E\n"},{"CreatedByName":"windystig","CreatedById":170953,"CreatedDateTime":"2017-11-17T14:32:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223221482\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221510928473\u0022 data-ipsquote-userid=\u0022178087\u0022 data-ipsquote-username=\u0022scimas\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, scimas said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou will first need to define what do you mean by \u0027up.\u0027 You either are near Kerbin and want to nose up as in away from surface or in orbit and then nose up might mean towards the normal vector, or many other things. In any case you will need another vector to determine where to point the ship.\n\u003C/p\u003E\n\u003Cp\u003E\nLet\u0027s say that it\u0027s the first case, away from ground. So node deltaV becomes your first vector and the predefined \u0027UP:vector\u0027 second vector. Their cross product (normalize it) will give you a vector that you can use as axis of rotation. Now take the deltaV vector and use\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula\u0022 rel=\u0022external nofollow\u0022\u003ERodrigues\u0027 Rotation Formula\u003C/a\u003E\u00A0to get the vector where you want to point your ship.\n\u003C/p\u003E\n\u003Cp\u003E\nDo remember that KSP uses a left handed coordinate system when calculating cross products.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHey\n\u003C/p\u003E\n\u003Cp\u003E\nAs it is for the shuttle it doesn\u0027t matter whether the angle change is towards or away from the planet. The burn is using the OMS engines, which are mounted at a 15 degree angle so if i point directly at NP then my actual direction when i burn\u00A0will be 15 degrees off. So i need to \u0027nose up\u0027 in relation to the NP, regardless of what that means in relation to the planet. I did try using the rotation formula but all that did was lock me to 15 degrees above the horizon. Not 15 degrees about where the NP was.\n\u003C/p\u003E\n"},{"CreatedByName":"scimas","CreatedById":178087,"CreatedDateTime":"2017-11-17T14:46:26Z","Content":"\n\u003Cp\u003E\nIt should point you properly. Here\u0027s a code snippet that might help.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ELOCK rot_axis to VCRS(np, UP:VECTOR):NORMALIZED.\nLOCK new_dV to np*cos(15) \u002B VCRS(rot_axis, np)*sin(15).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nrot_axis is the k vector, np is the v vector from the wikipedia article. You can eliminate the last term since we already know that k and v are perpendicular making their scalar product zero.\n\u003C/p\u003E\n\u003Cp\u003E\nSo new_dV is your new np, lock steering to it.\n\u003C/p\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2017-11-17T15:34:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223221491\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221510929177\u0022 data-ipsquote-userid=\u0022170953\u0022 data-ipsquote-username=\u0022windystig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, windystig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe burn is using the OMS engines, which are mounted at a 15 degree angle so if i point directly at NP then my actual direction when i burn\u00A0will be 15 degrees off. So i need to \u0027nose up\u0027 in relation to the NP, regardless of what that means in relation to the planet. I did try using the rotation formula but all that did was lock me to 15 degrees above the horizon. Not 15 degrees about where the NP was.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOk so you want to orient your shuttle such that the burn vector is 15\u00B0 below the nose. So you have a vector NP and and need an orientation (i.e. not just where the nose should point but also what the \u0022roll\u0022 should be).\n\u003C/p\u003E\n\u003Cp\u003E\nFirst choose a plane by choosing a vector that is normal to NP. This choice is arbitrary, I usually use Facing:Up, which means the ship will not need to roll).\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eset vUp to VXCL(Facing:UpVector, NP):Normalized.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nNow calculate a vector 15\u00B0 from NP, pointing towards vUp. This makes sure NP is 15\u00B0 \u003Cstrong\u003Eaway\u003C/strong\u003E from the nose.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eset vNose to Facing:ForeVector*cos(15) - v*sin(15).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe \u0022roll\u0022 part of your orientation makes sure that NP points \u003Cstrong\u003Ebelow\u003C/strong\u003E the nose, kOS makes this easy with the LookdirUp function. Then the the shuttle is oriented by\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Elock Steering to LookdirUp(vNose, vTmp).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-11-17T15:37:45Z\u0022 title=\u002211/17/2017 03:37  PM\u0022 data-short=\u00226 yr\u0022\u003ENovember 17, 2017\u003C/time\u003E by pellinor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2017-11-17T16:21:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223221491\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221510929177\u0022 data-ipsquote-userid=\u0022170953\u0022 data-ipsquote-username=\u0022windystig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, windystig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHey\n\u003C/p\u003E\n\u003Cp\u003E\nAs it is for the shuttle it doesn\u0027t matter whether the angle change is towards or away from the planet. The burn is using the OMS engines, which are mounted at a 15 degree angle so if i point directly at NP then my actual direction when i burn\u00A0will be 15 degrees off. So i need to \u0027nose up\u0027 in relation to the NP, regardless of what that means in relation to the planet. I did try using the rotation formula but all that did was lock me to 15 degrees above the horizon. Not 15 degrees about where the NP was.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSomeone posted about this on the kOS reddit recently:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.reddit.com/r/Kos/comments/77x3n3/script_to_deal_with_crafts_where_the_thrust_is/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.reddit.com/r/Kos/comments/77x3n3/script_to_deal_with_crafts_where_the_thrust_is/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWhoa, the forum initially tried to embed the entire reddit post within this post...\n\u003C/p\u003E\n"},{"CreatedByName":"MinimumSky5","CreatedById":115138,"CreatedDateTime":"2017-11-22T10:02:05Z","Content":"\n\u003Cp\u003E\nI\u0027m having trouble with this quite simple launch program (I\u0027m building it in stages, so it isn\u0027t complete yet)\n\u003C/p\u003E\n\u003Cp\u003E\nset throttle to 1.0.\u003Cbr\u003E\nstage.\u003Cbr\u003E\nwhen velocity \u0026gt; 50 then{\u003Cbr\u003E\nset steering to heading(90, 85).\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\nwhen the program runs, it only seems to run the when command once, rather than wait for the velocity, as it says \u0022program ended\u0022 just after the rocket gets off the launch pad. Any ideas?\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2017-11-22T11:52:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223225343\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221511344925\u0022 data-ipsquote-userid=\u0022115138\u0022 data-ipsquote-username=\u0022MinimumSky5\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, MinimumSky5 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m having trouble with this quite simple launch program (I\u0027m building it in stages, so it isn\u0027t complete yet)\n\u003C/p\u003E\n\u003Cp\u003E\nset throttle to 1.0.\u003Cbr\u003E\nstage.\u003Cbr\u003E\nwhen velocity \u0026gt; 50 then{\u003Cbr\u003E\nset steering to heading(90, 85).\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\nwhen the program runs, it only seems to run the when command once, rather than wait for the velocity, as it says \u0022program ended\u0022 just after the rocket gets off the launch pad. Any ideas?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe WHEN ... THEN ... syntax does not initiate a loop. Instead it sets up an interrupt that will be triggered when the condition is met. But the program must be running for any triggers to fire.\n\u003C/p\u003E\n\u003Cp\u003E\nThe traditional thing to try first is to put \u0022WAIT UNTIL FALSE.\u0022 at the bottom of the script, so it never ends. Or rewrite your code to use WAIT UNTIL ...\n\u003C/p\u003E\n\u003Cp\u003E\nNotes:\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t think you can \u0022set\u0022 steering, you need to \u0022LOCK STEERING TO ...\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nI think you\u0027d need to check \u0022SHIP:VELOCITY:SURFACE:MAG \u0026gt; 50\u0022 (VELOCITY is an object that contains a surface velocity vector and an orbital velocity vector, in turn you need to call MAG to get the magnitude of the vector).\n\u003C/p\u003E\n"},{"CreatedByName":"garwel","CreatedById":141813,"CreatedDateTime":"2017-11-22T15:04:23Z","Content":"\n\u003Cp\u003E\nActually, you can use AIRSPEED for magnitude of surface velocity.\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2017-11-22T15:10:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223225468\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221511363063\u0022 data-ipsquote-userid=\u0022141813\u0022 data-ipsquote-username=\u0022garwel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, garwel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nActually, you can use AIRSPEED for magnitude of surface velocity.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAh, now that I did not know! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"scimas","CreatedById":178087,"CreatedDateTime":"2017-11-30T10:38:52Z","Content":"\n\u003Cp\u003E\nIs there any way to detect the current biome of the ship in KOS? As far as I can tell neither SHIP nor BODY has any reference to biomes.\n\u003C/p\u003E\n"},{"CreatedByName":"danielboro","CreatedById":166078,"CreatedDateTime":"2017-11-30T11:33:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223231566\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512038332\u0022 data-ipsquote-userid=\u0022178087\u0022 data-ipsquote-username=\u0022scimas\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, scimas said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs there any way to detect the current biome of the ship in KOS? As far as I can tell neither SHIP nor BODY has any reference to biomes.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nif you have a GPS part like surfec scanner you can get it (or Dmagic mag sensor)\u003Cbr\u003E\nor install an addon called biome for kos. i seen it but never used it\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nset biomescanners to SHIP:MODULESNAMED(\u0022ModuleGPS\u0022).\u003Cbr\u003E\nif not biomescanners:EMPTY {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0set biomemodule to biomescanners[0]:part:GETMODULE(\u0022ModuleGPS\u0022).\u003Cbr\u003E\n\u00A0\u00A0 \u00A0lock BIOME to biomemodule:GETFIELD(\u0022biome\u0022).\u003Cbr\u003E\n}else set BIOME to false.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-11-30T11:54:29Z\u0022 title=\u002211/30/2017 11:54  AM\u0022 data-short=\u00226 yr\u0022\u003ENovember 30, 2017\u003C/time\u003E by danielboro\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"danielboro","CreatedById":166078,"CreatedDateTime":"2017-11-30T12:02:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223221183\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221510877114\u0022 data-ipsquote-userid=\u0022170953\u0022 data-ipsquote-username=\u0022windystig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/17/2017 at 2:05 AM, windystig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHey\n\u003C/p\u003E\n\u003Cp\u003E\nI am using the example of the executable node script from the kOS guide to run my own nodes but it keeps failing and i can figure out why. The line that causes the failure is:\n\u003C/p\u003E\n\u003Cp\u003E\nwait until abs(NP:pitch - facing:pitch) \u0026lt; 0.15 and abs(NP:yaw - facing:yaw) \u0026lt; 0.15.\n\u003C/p\u003E\n\u003Cp\u003E\nThe error i get is\n\u003C/p\u003E\n\u003Cp\u003E\nGet suffix \u0027PITCH\u0027 not found on object V( then gives the vectors). An attempt was made to get a suffix called \u0027PITCH\u0027 from an object of type \u0027VECTOR\u0027 when that object does not have that suffix usable in that way.\n\u003C/p\u003E\n\u003Cp\u003E\nI copied the script from the guide on the page \u0027Execute Node Script\u0027. i have not tinkered with it so not sure what i\u0027m doing wrong. Any ideas?\n\u003C/p\u003E\n\u003Cp\u003E\nDaniel\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\ni use\u003Cbr\u003E\nwait until VANG(prograde:VECTOR,FACING:VECTOR)\u0026lt;0.5.\n\u003C/p\u003E\n\u003Cp\u003E\nand for you its\u003Cbr\u003E\nwait until VANG(NP:VECTOR,FACING:VECTOR)\u0026lt;0.5.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-11-30T12:03:54Z\u0022 title=\u002211/30/2017 12:03  PM\u0022 data-short=\u00226 yr\u0022\u003ENovember 30, 2017\u003C/time\u003E by danielboro\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"guitarxe","CreatedById":115354,"CreatedDateTime":"2017-12-01T01:00:18Z","Content":"\n\u003Cp\u003E\nJust a quick general question - are the KOS scripts able to run in the background, or does it only work with currently active vessels?\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2017-12-01T04:20:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223232072\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512090018\u0022 data-ipsquote-userid=\u0022115354\u0022 data-ipsquote-username=\u0022guitarxe\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, guitarxe said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nJust a quick general question - are the KOS scripts able to run in the background, or does it only work with currently active vessels?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe answer isn\u0027t a simple yes or no.\n\u003C/p\u003E\n\u003Cp\u003E\nkOS *can* control vessels other than the currently active vessel, but *only if* KSP itself hasn\u0027t crippled those vessels to prevent them from working.\u00A0 And that means the vessel kOS is controlling has to be pretty close to the active vessel.\n\u003C/p\u003E\n\u003Cp\u003E\nFor kOS to run a program at all, the vessel part it\u0027s contained inside of needs to be \u0022loaded\u0022 - that\u0027s the 2.2km-ish distance everyone talks about.\u00A0 At this distance you can open the terminal for the kOS computer and interact with it.\u00A0 BUT, when it does things like try to steer the ship or change the throttle, the ship will stubbornly refuse to do anything in response.\u00A0 That\u0027s not kOS\u0027s fault - that\u0027s the base game KSP keeping this ship \u0022packed\u0022 and preventing its parts from having their full physics effect.\n\u003C/p\u003E\n\u003Cp\u003E\nFor kOS to actually move the ship, the ship needs to be at the much closer \u0022unpacked\u0022 distance, which is sometimes as close as 300 meters.\n\u003C/p\u003E\n\u003Cp\u003E\nkOS does allow you to alter these loading and packing distance settings in the stock game to try to allow you to control ships from a bit farther away, but keep in mind you can\u0027t control something really far away like on another planet, and if you set the numbers too big, you invite the kraken (because Unity has to simulate things using large magnitude imprecise floating point numbers when you do that)\u00A0 A full description of this is a long topic, and how you can increase this distance a bit and what it means, is in the kOS documentation itself here if you want to dive in for a long read:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://ksp-kos.github.io/KOS/structures/misc/loaddistance.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ksp-kos.github.io/KOS/structures/misc/loaddistance.html\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"danielboro","CreatedById":166078,"CreatedDateTime":"2017-12-01T10:11:07Z","Content":"\n\u003Cp\u003E\nset portModsList to ship:PARTSTAGGED(\u0022cfh\u0022).\u003Cbr\u003E\nprint portModsList[0]:name.\u003Cbr\u003E\nportModsList[0]:CONTROLFROM().\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nscreen output\n\u003C/p\u003E\n\u003Cp\u003E\nGrapplingDevice\u003Cbr\u003E\n\u0027CONTROLFROM\u0027 command found a generic part value/\u003Cbr\u003E\nIt only works a docking port or command part\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nthe claw can be a\u00A0CONTROLFROM part but this command cant do that\u003Cbr\u003E\nnext ill try using action or event to set it\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-01T11:08:13Z\u0022 title=\u002212/01/2017 11:08  AM\u0022 data-short=\u00226 yr\u0022\u003EDecember 1, 2017\u003C/time\u003E by danielboro\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2017-12-01T11:04:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223232347\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512123067\u0022 data-ipsquote-userid=\u0022166078\u0022 data-ipsquote-username=\u0022danielboro\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, danielboro said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nset portModsList to ship:PARTSTAGGED(\u0022cfh\u0022).\u003Cbr\u003E\nprint portModsList[0]:name.\u003Cbr\u003E\nportModsList[0]:CONTROLFROM().\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nscreen output\n\u003C/p\u003E\n\u003Cp\u003E\nGrapplingDevice\u003Cbr\u003E\n\u0027CONTROLFROM\u0027 command found a generic part value/\u003Cbr\u003E\nIt only works a docking port or command part\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nthe claw can be a\u00A0CONTROLFROM part but this command can do that\u003Cbr\u003E\nnext ill try using action or event to set it\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHere is a piece of code that worked for me (the gMyPort variable points to a part, which can be a dockingport or a claw):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/pellinor0/kOS-MissionFramework/blob/master/Script/librdv.ks#L240-L251\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/pellinor0/kOS-MissionFramework/blob/master/Script/librdv.ks#L240-L251\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt looks like you can only access the \u0022control from here\u0022 action from the partModule of the claw. kOS seems to do some special thing for docking ports that it does not do for the claw.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: the relevant part is\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eif (dockPart:TypeName=\u0022Part\u0022){\n  // special treatment for claw\n  dockPart:GetModule(\u0022ModuleGrappleNode\u0022):DoEvent(\u0022Control from here\u0022).\n} else {\n  dockPart:ControlFrom.\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-01T11:11:19Z\u0022 title=\u002212/01/2017 11:11  AM\u0022 data-short=\u00226 yr\u0022\u003EDecember 1, 2017\u003C/time\u003E by pellinor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"danielboro","CreatedById":166078,"CreatedDateTime":"2017-12-01T14:25:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223232365\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512126298\u0022 data-ipsquote-userid=\u002285299\u0022 data-ipsquote-username=\u0022pellinor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 12/1/2017 at 1:04 PM, pellinor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\npiece of code that worked for me\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nthanks\u003Cbr\u003E\nsaved me som time experimenting to find the correct way to do it \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003Cbr\u003E\ncopied your work \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\n\u00A0and for the KOS team\u003Cbr\u003E\nI think that\u00A0ControlFrom should work for any part that can \u00A0DoEvent(\u0022Control from here\u0022) or at list all the stock parts that can\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-05T13:07:49Z\u0022 title=\u002212/05/2017 01:07  PM\u0022 data-short=\u00226 yr\u0022\u003EDecember 5, 2017\u003C/time\u003E by danielboro\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"scimas","CreatedById":178087,"CreatedDateTime":"2017-12-06T19:57:18Z","Content":"\n\u003Cp\u003E\nIs there any possibility that the MOD function will be changed to calculate the mathematical modulus instead of remainder of integer division?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, from the KOS wiki\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe result has the same absolute value as mathematical modulo operation but the sign is the same as the sign of dividend\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nis not quite accurate. For example, what it implies is (-3) mod 5 would be (-2) - the mathematical modulo 2 with a negative sign; but it\u0027s actually (-3) - the remainder of integer division.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-07T09:09:33Z\u0022 title=\u002212/07/2017 09:09  AM\u0022 data-short=\u00226 yr\u0022\u003EDecember 7, 2017\u003C/time\u003E by scimas\u003C/strong\u003E\n\u003Cbr\u003EGrammar\n\u003C/span\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2017-12-06T21:51:33Z","Content":"\n\u003Cp\u003E\nI think that something is lost trough translation from english to other languages. MOD function gives expected result as all other programing language like you described - reminder of integer division. Nothing should be changed in that behaviour, but I\u0027m not sure how to describe it better in documentation, english is not my native language to be able to propose anything better.\n\u003C/p\u003E\n"},{"CreatedByName":"scimas","CreatedById":178087,"CreatedDateTime":"2017-12-07T09:07:09Z","Content":"\n\u003Cp\u003E\nSimply removing that sentence should be good enough. The first two statements of the wiki \u003Cem\u003Eare \u003C/em\u003Econsistent with what the function does; it\u0027s only the last sentence that contradicts the first two statements.\n\u003C/p\u003E\n\u003Cp\u003E\nAnother thing I need help with, has anyone figured out a way to obtain the local orientation of the surface, basically a normal vector to the surface of the celestial at current position? I don\u0027t need exact normal vector at every point, approximation over, say, about 2 m^2 area is good enough too. I want to try to improve my landing and rover control scripts using it.\n\u003C/p\u003E\n"},{"CreatedByName":"garwel","CreatedById":141813,"CreatedDateTime":"2017-12-07T16:24:20Z","Content":"\n\u003Cp\u003E\nHas something changed with DEFINED keyword? I use a piece of code like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nIF NOT DEFINED targetAlt { SET targetAlt TO 80000. }\u003C/pre\u003E\n\u003Cp\u003E\nIt is supposed to only define targetAlt variable if it isn\u0027t already defined. But the parser says \u0022Unexpected {\u0022 on this line. If I use DEFINED(targetAlt) instead, it reports \u0022Undefined variable name \u0027defined\u0027\u0022. How do I use this keyword correctly?\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2017-12-07T16:52:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223237728\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512663860\u0022 data-ipsquote-userid=\u0022141813\u0022 data-ipsquote-username=\u0022garwel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n24 minutes ago, garwel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHas something changed with DEFINED keyword? I use a piece of code like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\nIF NOT DEFINED targetAlt { SET targetAlt TO 80000. }\u003C/pre\u003E\n\u003Cp\u003E\nIt is supposed to only define targetAlt variable if it isn\u0027t already defined. But the parser says \u0022Unexpected {\u0022 on this line. If I use DEFINED(targetAlt) instead, it reports \u0022Undefined variable name \u0027defined\u0027\u0022. How do I use this keyword correctly?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTry this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nIF NOT ( DEFINED targetAlt) {\n\n\u003C/pre\u003E\n\u003Cp\u003E\nrather than\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nIF NOT DEFINED targetAlt {\u003C/pre\u003E\n\u003Cp\u003E\nThe parser is giving equal precedence to NOT and DEFINED rather than doing DEFINED first, thus it\u0027s going left to right and giving IF (NOT DEFINED) targetAlt {.\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s a small bug but one that\u0027s known.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2017-12-07T17:23:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223237552\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512637629\u0022 data-ipsquote-userid=\u0022178087\u0022 data-ipsquote-username=\u0022scimas\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, scimas said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnother thing I need help with, has anyone figured out a way to obtain the local orientation of the surface, basically a normal vector to the surface of the celestial at current position? I don\u0027t need exact normal vector at every point, approximation over, say, about 2 m^2 area is good enough too. I want to try to improve my landing and rover control scripts using it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMy slope library is here:\u00A0\u00A0\u003Ca href=\u0022https://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/scripts/lib_slope.ks\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/scripts/lib_slope.ks\u003C/a\u003E /\u00A0\u003Ca href=\u0022https://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/documentation/lib_slope_readme.md\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/ElWanderer/kOS_scripts/blob/v1.1_draft_changes/documentation/lib_slope_readme.md\u003C/a\u003E though all the hard work was taken from episode 42 or 43 of Cheers Kevin\u0027s Kerbal Space Programming series on YouTube.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-07T17:23:58Z\u0022 title=\u002212/07/2017 05:23  PM\u0022 data-short=\u00226 yr\u0022\u003EDecember 7, 2017\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ColKlonk2","CreatedById":167493,"CreatedDateTime":"2017-12-08T20:11:35Z","Content":"\n\u003Cp\u003E\nKOS automatic launch to orbit with burntime calculation - not bad ... within 4Km of Eccentricity = 0.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.youtube.com/watch?v=a1VB07B4hrg\u0026amp;feature=youtu.be\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.youtube.com/watch?v=a1VB07B4hrg\u0026amp;feature=youtu.be\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll try next with pure vectors and calcs.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}