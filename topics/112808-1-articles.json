{"TopicId":112808,"ForumId":29,"TopicTitle":"C# help Me with my new mod please.","CreatedByName":"MrMcMuffin","CreatedById":145231,"CreatedDateTime":"2015-06-13T01:19:05Z","PageNum":1,"Articles":[{"CreatedByName":"MrMcMuffin","CreatedById":145231,"CreatedDateTime":"2015-06-13T01:19:05Z","Content":"using UnityEngine;namespace Constructive_Criticism{    public class ConstructiveCritcism : PartModule    {        public void EventDataonFlagPlant();        {                        public static void main();            {                    string[] msgsflagplace = new string[3];                    msgsflagplace[0] = \u0022Congratulations, you have placed a flag!\u0022;                    msgsflagplace[1] = \u0022Now give yourself a pat on the back. you did good.\u0022;                    msgsflagplace[2] = \u0022A new planet with a flag on it,jolly good job.\u0022;                    msgsflagplace[3] = \u0022A new planet conquered!\u0022;                    Random rnd = new Random();                    ScreenMessages.PostScreenMessage(msgsflagplace[rnd.Next(0,2)], 3f, ScreenMessageStyle.UPPER_CENTER);            }        }    }}\n\nIm am trying to make it so that when a flag is planted or any other event, a witty comment is randomly selected from a list and shown as a screen message. I have little to no knowledge of c# so don\u0027t throw out any c# terms when explaining things. There were 28 errors in vs. I just need someone to edit the code so I can duplicate it for the other game events. credit will be given upon release don\u0027t worry.\n\nThanks\n\nRyan"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-06-13T01:46:48Z","Content":"1) You should be using a KSPAddon type plugin for this. A partModule plugin would have to be attached to either the kerbal or flag which would require another script anyway. See [here](https://github.com/Crzyrndm/SASTuningFix/blob/master/SASTuningFix/SASTuningFix.cs#L9-L10) for a very simple addon type plugin\n\n2) You have a function (main) inside another function, that\u0027s never going to work\n\n3) You don\u0027t put semicolons on [function declaration lines](https://github.com/Crzyrndm/SASTuningFix/blob/master/SASTuningFix/SASTuningFix.cs#L12) for actual functions (there are times when you do, but thats not anywhere near here)\n\n4) You need to register your flagplant function inside either Start() or Awake() and deregister it in OnDestroy() so that it actually gets called\n\n    GameEvents.onFlagPlant.Add(main); // called in Start or AwakeGameEvents.onFlagPlant.Remove(main); // called in OnDestroy\n\nand main will need to take a parameter of type vessel to be eligible for the event registration\n\n    public void main(Vessel v)\n\nThere\u0027s a few more problems but that should cover most of it. I would strongly recommend that you read up a bit on C# syntax, particularly functions, if you\u0027re going to be continuing with this.\n\n**Edited \u003Ctime datetime=\u00222015-06-13T01:50:45Z\u0022 title=\u002206/13/2015 01:50  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 13, 2015\u003C/time\u003E by Crzyrndm**"},{"CreatedByName":"MrMcMuffin","CreatedById":145231,"CreatedDateTime":"2015-06-13T03:28:12Z","Content":"Thanks, but this is no use to me unless I see the changes put into entire code. As I said I\u0027m very new to this.\n\n- - - Updated - - -\n\nBy the way, I will be using most of the game events"},{"CreatedByName":"MrMcMuffin","CreatedById":145231,"CreatedDateTime":"2015-06-18T02:01:15Z","Content":"I thought I\u0027d at least try so here is what I came up with, but what would I do for the other events like \u0022OnCollision\u0022.\n\n    [/FONT]using UnityEngine;namespace Constructive_Criticism{    [KSPAddon(KSPAddon.Startup.Flight, false)]    public class ConstructiveCritcism : MonoBehavior    {        public void Start()        {                        GameEvents.onFlagPlant.Add(main);        }        public void OnDestroy()        {            GameEvents.onFlagPlant.Remove(main);        }           public void main(Vessel v);        {            string[] msgsflagplace = new string[3];            msgsflagplace[0] = \u0022Congratulations, you have placed a flag!\u0022;            msgsflagplace[1] = \u0022Now give yourself a pat on the back. you did good.\u0022;            msgsflagplace[2] = \u0022A new planet with a flag on it,jolly good job.\u0022;            msgsflagplace[3] = \u0022A new planet conquered!\u0022;            Random rnd = new Random();            ScreenMessages.PostScreenMessage(msgsflagplace[rnd.Next(0,2)], 3f, ScreenMessageStyle.UPPER_CENTER);        }    }}\n\nthanks again"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-06-18T02:15:33Z","Content":"On collision is essentially the same, except the argument for the function is of type EventReport instead of type Vessel.\n\n    GameEvents.onCollision.Add(collide);void collide (EventReport r){ }\n\nYou can tell which arguments are required by looking at the type of onCollision and seeing that it\u0027s \u0022EventData\u003Ceventreport\u003E\u0022 (compared to flagPlant which was EventData\u003Cvessel\u003E)\u003C/vessel\u003E\u003C/eventreport\u003E"},{"CreatedByName":"MrMcMuffin","CreatedById":145231,"CreatedDateTime":"2015-06-18T03:49:53Z","Content":"So did I put it together correctly\n\n- - - Updated - - -\n\nWhat I am worried about is the screen message get random string from list code, did I do that correctly, I mean you just never mentioned that part.\n\n- - - Updated - - -\n\n    public void Start()        {                        GameEvents.onFlagPlant.Add(main);            GameEvents.onCollision.Add(collide);        }        public void OnDestroy()        {            GameEvents.onFlagPlant.Remove(main);            GameEvents.onCollision.Remove(collide);        }\n\nhere is was I did to add the new event."},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-06-18T03:56:51Z","Content":"Your answer to that is whether it works as you want it to (which looking closer at it, isn\u0027t going to happen because msgsflagplace[3] doesn\u0027t exist, valid indices are 0-2)"},{"CreatedByName":"MrMcMuffin","CreatedById":145231,"CreatedDateTime":"2015-06-18T04:09:30Z","Content":"How do I add more then, and will my event add code work by adding that line to start()"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-06-18T05:05:40Z","Content":"\u003E \n\u003E How do I add more then\n\nYou have declared an array of length 3 (new string[3]![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) so the fourth entry (with index 3) is going to generate an index out of range exception. If you make the array length 4, index 3 is a valid position\n\n\u003E \n\u003E and will my event add code work by adding that line to start()\n\nYup, just list them all out in Start and OnDestroy\n\nAre you actually testing this yet? It would be faster to check this yourself instead of asking every time ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"MrMcMuffin","CreatedById":145231,"CreatedDateTime":"2015-06-18T13:38:16Z","Content":"There is a reason for the hand holding. I\u0027m on vacation, AFK quit literally"},{"CreatedByName":"MrMcMuffin","CreatedById":145231,"CreatedDateTime":"2015-06-19T22:33:07Z","Content":"Hey crzyrndm, could you test my plugin for me before I get too far into it, I just don\u0027t want to have to change what could possible be 1000 lines of code.\n\n    using UnityEngine;namespace Constructive_Criticism{    [KSPAddon(KSPAddon.Startup.Flight, false)]    public class ConstructiveCritcism : MonoBehavior    {        public void Start()//initialize event happened checker        {                        GameEvents.onFlagPlant.Add(main);            GameEvents.onCollision.Add(collide);            GameEvents.OnLaunch.Add(launch);            GameEvents.OnOverheat.Add(overheat);            GameEvents.OnGUIAstronautComplexSpawn.Add(acomplex);        }        public void OnDestroy()        {            GameEvents.onFlagPlant.Remove(main);            GameEvents.onCollision.Remove(collide);            GameEvents.OnLaunch.Remove(launch);            GameEvents.OnOverheat.Remove(overheat);            GameEvents.OnGUIAstronautComplexSpawn.Remove(acomplex);        }           public void main(Vessel v);        {            string[] msgsflagplace = new string[4];// messages on flag plant event            msgsflagplace[0] = \u0022Congratulations, you have placed a flag!\u0022;            msgsflagplace[1] = \u0022Now give yourself a pat on the back. you did good.\u0022;            msgsflagplace[2] = \u0022A new planet with a flag on it,jolly good job.\u0022;            msgsflagplace[3] = \u0022A new planet conquered!\u0022;            Random rnd = new Random();            ScreenMessages.PostScreenMessage(msgsflagplace[rnd.Next(0,2)], 3f, ScreenMessageStyle.UPPER_CENTER);        }        public void collide (EventReport r)        {            string[] msgscol = new string[5];// messages to display if you crash            msgscol[0] = \u0022Nice, you scratched the paint\u0022;            msgscol[1] = \u0022Be carefull, there is no insurance on this craft.\u0022;            msgscol[2] = \u0022Do you have any idea how expensive rockets are?!?!?!\u0022;            msgscol[3] = \u0022That\u0027ll leave a mark.\u0022;            msgscol[4] = \u0022you have crashed. Jeb will be proud.\u0022;            Random rnd = new Random();            ScreenMessages.PostScreenMessage(msgscol[rnd.Next(0,4)], 3f, ScreenMessageStyle.UPPER_CENTER);        }        public void launch (EventReport l)        {            ScreenMessages.PostScreenMessage(\u0022Liftoff!\u0022, 2f, ScreenMessageStyle.UPPER_CENTER);        }        public void overheat (EventReport oh)        {            string[] msgsoh = new string[5];// messages to display if a part overheats            msgsoh[0] = \u0022you just voided the warranty.\u0022;            msgsoh[1] = \u0022You just lost a few parts.... no biggie.\u0022;            msgsoh[2] = \u0022Feel free to panic.\u0022;            msgsoh[3] = \u0022There is a little red bar next to the fuel bar, use it!\u0022;            msgsoh[4] = \u0022Tip: If your engine nozzels start turning into cherries. throttle down.\u0022;            Random rnd = new Random();            ScreenMessages.PostScreenMessage(msgscol[rnd.Next(0,4)], 3f, ScreenMessageStyle.UPPER_CENTER);        }        public void acomplex (EventVoid ac)        {            ScreenMessages.PostScreenMessage(\u0022Liftoff!\u0022, 2f, ScreenMessageStyle.UPPER_CENTER);        }          }}\n\nI hope this isn\u0027t too much to ask.\n\nthanks so much.\n\n- - - Updated - - -\n\nI\u0027m not gonna be back from vacation til next week\n\n- - - Updated - - -\n\nHey crzyrndm, could you test my plugin for me before I get too far into it, I just don\u0027t want to have to change what could possible be 1000 lines of code.\n\n    using UnityEngine;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif][/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]namespace Constructive_Criticism[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]{[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]    [KSPAddon(KSPAddon.Startup.Flight, false)][/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]    public class ConstructiveCritcism : MonoBehavior[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]    {[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        public void Start()//initialize event happened checker[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        {            [/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.onFlagPlant.Add(main);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.onCollision.Add(collide);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.OnLaunch.Add(launch);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.OnOverheat.Add(overheat);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.OnGUIAstronautComplexSpawn.Add(acomplex);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        }[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        public void OnDestroy()[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        {[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.onFlagPlant.Remove(main);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.onCollision.Remove(collide);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.OnLaunch.Remove(launch);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.OnOverheat.Remove(overheat);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            GameEvents.OnGUIAstronautComplexSpawn.Remove(acomplex);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        }   [/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        public void main(Vessel v);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        {[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            string[] msgsflagplace = new string[4];// messages on flag plant event[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgsflagplace[0] = \u0022Congratulations, you have placed a flag!\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgsflagplace[1] = \u0022Now give yourself a pat on the back. you did good.\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgsflagplace[2] = \u0022A new planet with a flag on it,jolly good job.\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgsflagplace[3] = \u0022A new planet conquered!\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            Random rnd = new Random();[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            ScreenMessages.PostScreenMessage(msgsflagplace[rnd.Next(0,2)], 3f, ScreenMessageStyle.UPPER_CENTER);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        }[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        public void collide (EventReport r)[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        {[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            string[] msgscol = new string[5];// messages to display if you crash[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgscol[0] = \u0022Nice, you scratched the paint\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgscol[1] = \u0022Be carefull, there is no insurance on this craft.\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgscol[2] = \u0022Do you have any idea how expensive rockets are?!?!?!\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgscol[3] = \u0022That\u0027ll leave a mark.\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgscol[4] = \u0022you have crashed. Jeb will be proud.\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            Random rnd = new Random();[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            ScreenMessages.PostScreenMessage(msgscol[rnd.Next(0,4)], 3f, ScreenMessageStyle.UPPER_CENTER);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        }[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        public void launch (EventReport l)[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        {[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            ScreenMessages.PostScreenMessage(\u0022Liftoff!\u0022, 2f, ScreenMessageStyle.UPPER_CENTER);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        }[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        public void overheat (EventReport oh)[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        {[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            string[] msgsoh = new string[5];// messages to display if a part overheats[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgsoh[0] = \u0022you just voided the warranty.\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgsoh[1] = \u0022You just lost a few parts.... no biggie.\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgsoh[2] = \u0022Feel free to panic.\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgsoh[3] = \u0022There is a little red bar next to the fuel bar, use it!\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            msgsoh[4] = \u0022Tip: If your engine nozzels start turning into cherries. throttle down.\u0022;[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            Random rnd = new Random();[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            ScreenMessages.PostScreenMessage(msgscol[rnd.Next(0,4)], 3f, ScreenMessageStyle.UPPER_CENTER);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        }[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        public void acomplex (EventVoid ac)[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        {[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]            ScreenMessages.PostScreenMessage(\u0022Liftoff!\u0022, 2f, ScreenMessageStyle.UPPER_CENTER);[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]        }      [/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]    }[/FONT][FONT=Verdana, Arial, Tahoma, Calibri, Geneva, sans-serif]}\n\nI hope this isn\u0027t too much to ask.\n\nthanks so much.\n\n- - - Updated - - -\n\nI just posted that twice, stupid me, thought it didn\u0027t go through."}]}