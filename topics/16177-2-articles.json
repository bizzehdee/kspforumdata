{"TopicId":16177,"ForumId":34,"TopicTitle":"[0.17] Fuel Transfer Mod V 0.2.2","CreatedByName":"younata","CreatedById":17757,"CreatedDateTime":"2012-08-06T02:57:10Z","PageNum":2,"Articles":[{"CreatedByName":"Zorkinian","CreatedById":3197,"CreatedDateTime":"2012-08-09T03:27:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022younata\u0022 data-cite=\u0022younata\u0022\u003E\u003Cdiv\u003EConsidering as how prior to reading your comment, I was unaware of the existence of that interface, I\u0027m considering it.\u003Cp\u003ELooking through the Assembly browser of Assembly-CSharp.dll, I cannot find that interface. Care to link to where I can find that interface?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, my bad - it doesn\u0027t exist, I was suggesting that you create it (or something like it) that would then be consumed by other modders. My bad =]\u003C/p\u003E\n"},{"CreatedByName":"younata","CreatedById":17757,"CreatedDateTime":"2012-08-09T03:52:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Zorkinian\u0022 data-cite=\u0022Zorkinian\u0022\u003E\u003Cdiv\u003EOh, my bad - it doesn\u0027t exist, I was suggesting that you create it (or something like it) that would then be consumed by other modders. My bad =]\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh. Yeah, that could happen.\u003C/p\u003E\n"},{"CreatedByName":"Mirosta","CreatedById":32203,"CreatedDateTime":"2012-08-10T09:17:41Z","Content":"\n\u003Cp\u003ECould you not just inherit whatever your fuel source is from FuelTank, that would be a simple enough temporary workaround.\u003C/p\u003E\n"},{"CreatedByName":"Mirosta","CreatedById":32203,"CreatedDateTime":"2012-08-10T12:54:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mirosta\u0022 data-cite=\u0022Mirosta\u0022\u003E\u003Cdiv\u003ECould you not just inherit whatever your fuel source is from FuelTank, that would be a simple enough temporary workaround.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh just re-read the initial post, nvm\u003C/p\u003E\n"},{"CreatedByName":"younata","CreatedById":17757,"CreatedDateTime":"2012-08-10T21:57:41Z","Content":"\n\u003Cp\u003EJust pushed a new commit, added a new interface, IFuelSource.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cdiv\u003E\u003Cbr\u003Einterface IFuelSource\u003Cbr\u003E{\u003Cbr\u003E float fuel { get; set; }\u003Cbr\u003E int fuelType { get; set; } // can be either regular (0) or RCS (1)\u003Cbr\u003E // We may add more in the future if we can dynamically figure out what other mods are available.\u003Cbr\u003E // I think it\u0027d be awesome to support more than just these two fuel types.\u003Cbr\u003E bool RequestFuel(float amount, int fuelType);\u003Cbr\u003E // First checks that we can grab the fuel we want, and if so, removes the fuel from the tank.\u003Cbr\u003E // Despite the fact that we do check if your part is not dead, and that it has sufficient fuel,\u003Cbr\u003E // you should also check that we didn\u0027t mess up.\u003Cbr\u003E // The simplest implementation for this would do:\u003Cbr\u003E /*\u003Cbr\u003E if ((this.States == PartStates.DEAD) || (this.fuel - amount) \u0026lt;= 0 || (this.fuelType != fuelType)\u003Cbr\u003E return false;\u003Cbr\u003E this.fuel -= amount;\u003Cbr\u003E return true;\u003Cbr\u003E */\u003Cbr\u003E // If your part does anything special, you may want to implement this differently.\u003Cbr\u003E}\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-08-10T23:43:05Z\u0022 title=\u002208/10/2012 11:43  PM\u0022 data-short=\u002211 yr\u0022\u003EAugust 10, 2012\u003C/time\u003E by younata\u003C/strong\u003E\n\u003Cbr\u003Eupdated interface.\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2012-08-13T02:27:57Z","Content":"\n\u003Cp\u003EI\u0027ve been having some problems with this mod. I sent up a tanker, I sent up another vessel, and they are about 200 meters from each other. The second vessel has the part module, the tanker does not. I cannot transfer fuel... or at least the flow rate and parameters never change. I can provide an SFS if needed... any idea what I\u0027m doing wrong?\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-08-13T02:29:37Z","Content":"\n\u003Cp\u003EAre you selecting source/destination fuel tanks? That one caught me a few times ...\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2012-08-13T03:23:31Z","Content":"\n\u003Cp\u003EYes, I am. Or at least I think I am. I click on a destination vessel, I click on a source vessel, and I click on fuel tanks. I then push Transfer Fuel and nothing happens. Any other ideas? Out of curiosity, what do the numbers next to the fuel tank mean?\u003C/p\u003E\n"},{"CreatedByName":"younata","CreatedById":17757,"CreatedDateTime":"2012-08-14T20:01:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EYes, I am. Or at least I think I am. I click on a destination vessel, I click on a source vessel, and I click on fuel tanks. I then push Transfer Fuel and nothing happens. Any other ideas? Out of curiosity, what do the numbers next to the fuel tank mean?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyou need destination vessel \u002B destination tank.\u003C/p\u003E\u003Cp\u003EYou also need source vessel \u002B source tank.\u003C/p\u003E\u003Cp\u003EIt seems like you may be missing the destination tank?\u003C/p\u003E\n"},{"CreatedByName":"ptaylor25","CreatedById":29543,"CreatedDateTime":"2012-08-15T16:05:18Z","Content":"\n\u003Cp\u003ENice Modification, though I think 10k for a fuel transfer to be a bit extreme, to keep it a little more believable I generally try to close to within 50m. But I am having a problem with the RCS fuel transfer. Regular fuel transfer seems to be working fine, but when I select the source or destination tank (the final selection) the entire screen goes blank.\u003C/p\u003E\n"},{"CreatedByName":"younata","CreatedById":17757,"CreatedDateTime":"2012-08-15T18:18:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ptaylor25\u0022 data-cite=\u0022ptaylor25\u0022\u003E\u003Cdiv\u003ENice Modification, though I think 10k for a fuel transfer to be a bit extreme, to keep it a little more believable I generally try to close to within 50m. But I am having a problem with the RCS fuel transfer. Regular fuel transfer seems to be working fine, but when I select the source or destination tank (the final selection) the entire screen goes blank.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELatest release stuff should work fine. \u003Ca href=\u0022http://rachelbrindle.com/ksp/FuelTransferModule.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://rachelbrindle.com/ksp/FuelTransferModule.zip\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EIf you\u0027re checking out from the repo and compiling from source, or are using dll from the KSP folder of a checkout, then you\u0027re on an unstable version that I\u0027ll fix whenever I next have time to work on it (soonest is sometime next week.)\u003C/p\u003E\n"},{"CreatedByName":"ptaylor25","CreatedById":29543,"CreatedDateTime":"2012-08-16T01:02:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022younata\u0022 data-cite=\u0022younata\u0022\u003E\u003Cdiv\u003ELatest release stuff should work fine. \u003Ca href=\u0022http://rachelbrindle.com/ksp/FuelTransferModule.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://rachelbrindle.com/ksp/FuelTransferModule.zip\u003C/a\u003E.\u003Cp\u003EIf you\u0027re checking out from the repo and compiling from source, or are using dll from the KSP folder of a checkout, then you\u0027re on an unstable version that I\u0027ll fix whenever I next have time to work on it (soonest is sometime next week.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope ... still got the grey screen.\u003C/p\u003E\n"},{"CreatedByName":"Geeny","CreatedById":10680,"CreatedDateTime":"2012-08-16T01:54:57Z","Content":"\n\u003Cp\u003EAm I missing installation instructions? I\u0027m mostly confused with what I\u0027m supposed to do with this .DS_Store file that\u0027s in every folder...\u003C/p\u003E\u003Cp\u003EEdit: Did some googling, deleted them and insalle dlike usual, worked fine. But, you should still add some documentation.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-08-16T02:10:22Z\u0022 title=\u002208/16/2012 02:10  AM\u0022 data-short=\u002211 yr\u0022\u003EAugust 16, 2012\u003C/time\u003E by Geeny\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2012-08-16T09:12:39Z","Content":"\n\u003Cp\u003ECan I request a feature so you can completely empty a tank, just dumping the fuel.\u003C/p\u003E\u003Cp\u003EMy plan was to send up a spacecraft with a huge empty tank (borrowed from nova silisko) and then fill them up by sending smaller crafts after it. Thus creating the first kerbin orbit refueling station. However I did not succeed in emptying the tanks. I had hoped for a bug that I could move all fuel from the big tanks into a ship with a small tank nearby. That bug did not exist, at least not in the way I hoped for it...\u003C/p\u003E\u003Cp\u003EWhat did happen is that fuel got transferred but only up to a pretty random number. Since the tanks of the target vehicle were full, I\u0027d expect either no transfer to happen. Or the overload bug I hoped for..\u003C/p\u003E\u003Cp\u003EMy dream is having 90k rocket fuel orbitting Kerbin, because... What could possibly go wrong? \u003C/p\u003E\u003Cp\u003EIt\u0027ll also be usefull when the interplanetary patch comes out, we can then send up large ships that need loads of fuel and just fill them up in orbit. After all, you would not want to send Jeb to another planet in nothing more than a single person cockpit would you?\u003C/p\u003E\n"},{"CreatedByName":"TheCardinal","CreatedById":22874,"CreatedDateTime":"2012-08-16T09:50:45Z","Content":"\n\u003Cp\u003EWillow, i can remember that someone made a part which jettisoned the fuel. (You\u0027ll have to look for that though, i can\u0027t remember in what thread it was).\u003C/p\u003E\u003Cp\u003EAlternatively, you could create such part by modifying the part.cfg of an existing rocket/rcs engine. Modify the fuel consumption rate to something very high and make the thrust equal to zero. That should empty your tank very fast.\u003C/p\u003E\n"},{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2012-08-16T13:47:58Z","Content":"\n\u003Cp\u003EHey Cardinal thanks for the response, I thought about that option, I think I remember though that an empty fuel tank like an engine without tank is marked as spent and after that is no longer useable. The fuel transfer mod could get around this by leaving 0.001 units of fuel in the tank. I did not check how it works for fuel tanks but engines when marked spent are never used again not even if you add fuel to the relevant tanks.\u003C/p\u003E\u003Cp\u003EMy plan as a workaround was to have some big engines on the tanks combined with those towers you use to hold on to your rocket and dump the engines seconds before the fuel runs out. But the fuel transfer mod would be much cleaner and faster.\u003C/p\u003E\n"},{"CreatedByName":"deviantdigi","CreatedById":37362,"CreatedDateTime":"2012-08-16T15:14:34Z","Content":"\n\u003Cp\u003EI can\u0027t manage to get this to work with 0.16, that\u0027s the version I tried this on. I downloaded and installed the most recent release posted.\u003C/p\u003E\u003Cp\u003E So I got the source ship built with the transfer pod (ship on cart in pic), transfer rcs tank and a 400L fuel tank. I got the destination ship with a rcs tank and a 1600 fuel tank. I waste the destination ships fuel down to about 200L then try to transfer 400L\u0027s of fuel from the source. But when I setup the ships and tanks and click \u0027transfer\u0027 it doesn\u0027t do anything. \u003C/p\u003E\u003Cp\u003EPic:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/vT3ZC.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/vT3ZC.jpg\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2012-08-17T08:26:02Z","Content":"\n\u003Cp\u003EI tested the effect. And it\u0027s confirmed when a fuel tank is fully emptied it becomes marked as spent and the fuel transfer mod can\u0027t see those tanks in the list. I\u0027m not sure if that\u0027s something the FTM can fix, I think it is an effect of the game logic itself. But emptying the tank to 0.001 litres would probably be a successfull workaround as long as no engines are draining the tank further. \u003C/p\u003E\u003Cp\u003EIf younata considers this a desired feature of course \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"younata","CreatedById":17757,"CreatedDateTime":"2012-08-20T04:52:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022deviantdigi\u0022 data-cite=\u0022deviantdigi\u0022\u003E\u003Cdiv\u003EI can\u0027t manage to get this to work with 0.16, that\u0027s the version I tried this on. I downloaded and installed the most recent release posted.\u003Cp\u003E So I got the source ship built with the transfer pod (ship on cart in pic), transfer rcs tank and a 400L fuel tank. I got the destination ship with a rcs tank and a 1600 fuel tank. I waste the destination ships fuel down to about 200L then try to transfer 400L\u0027s of fuel from the source. But when I setup the ships and tanks and click \u0027transfer\u0027 it doesn\u0027t do anything. \u003C/p\u003E\u003Cp\u003EPic:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/vT3ZC.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/vT3ZC.jpg\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/younata/FuelTransferModule/issues/9\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/younata/FuelTransferModule/issues/9\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EYour bug is reported. It\u0027s honestly not that high up in the priority list (In fact, the code is doing precisely what it should do by not letting you transfer 400 liters from a tank that only has ~200 liters - though it should auto-downgrade to just 100% of the remaining fuel if you are trying to grab more than it has), but it\u0027ll eventually get fixed.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022willow\u0022 data-cite=\u0022willow\u0022\u003E\u003Cdiv\u003EI tested the effect. And it\u0027s confirmed when a fuel tank is fully emptied it becomes marked as spent and the fuel transfer mod can\u0027t see those tanks in the list. I\u0027m not sure if that\u0027s something the FTM can fix, I think it is an effect of the game logic itself. But emptying the tank to 0.001 litres would probably be a successfull workaround as long as no engines are draining the tank further.\u003Cp\u003EIf younata considers this a desired feature of course \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou just want to empty fuel? That\u0027s doable, I\u0027ll add it as an enhancement.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/younata/FuelTransferModule/issues/10\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/younata/FuelTransferModule/issues/10\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"TheCardinal","CreatedById":22874,"CreatedDateTime":"2012-08-20T05:57:58Z","Content":"\n\u003Cp\u003EI think you\u0027ve misunderstood Deviantdigi (unless i\u0027m the one who has misunderstood).\u003C/p\u003E\u003Cp\u003EAs i understand: Ship 1 (source) has 400 fuel. Ship 2 (destination) had 1600 and now just has 200. Transferring the 400 from ship 1 to ship 2 doesn\u0027t work.\u003C/p\u003E\n"},{"CreatedByName":"younata","CreatedById":17757,"CreatedDateTime":"2012-08-20T14:41:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheCardinal\u0022 data-cite=\u0022TheCardinal\u0022\u003E\u003Cdiv\u003EI think you\u0027ve misunderstood Deviantdigi (unless i\u0027m the one who has misunderstood).\u003Cp\u003EAs i understand: Ship 1 (source) has 400 fuel. Ship 2 (destination) had 1600 and now just has 200. Transferring the 400 from ship 1 to ship 2 doesn\u0027t work.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, hey. you\u0027re right. And he has the slider at \u0022Transfer no fuel\u0022, which means the code is working exactly as expected...\u003C/p\u003E\u003Cp\u003EMy bad.\u003C/p\u003E\n"},{"CreatedByName":"azawada","CreatedById":17236,"CreatedDateTime":"2012-08-21T04:46:49Z","Content":"\n\u003Cp\u003ENice mod, I was wondering if you could code this to work on any thing that has a fuel meter, I.E. zoxygene, electrical energy, Etc. Then I could resupply my mun base with power and oxygen besides RCS fuel.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-08-21T04:48:59Z\u0022 title=\u002208/21/2012 04:48  AM\u0022 data-short=\u002211 yr\u0022\u003EAugust 21, 2012\u003C/time\u003E by azawada\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"deviantdigi","CreatedById":37362,"CreatedDateTime":"2012-08-21T05:49:40Z","Content":"\n\u003Cp\u003EYou seem to be very defensive about your code and that \u0022bug report\u0022 was very clear.\u003C/p\u003E\u003Cp\u003E I knew there was a step I was missing, why I asked. But sorry for the confusion, I thought the slider was a progress bar XD. I tried again with this new slider theory you guys came up with.. :] worked.\u003C/p\u003E\u003Cp\u003EThanks for the mod and help.\u003C/p\u003E\n"},{"CreatedByName":"TheCardinal","CreatedById":22874,"CreatedDateTime":"2012-08-22T08:53:27Z","Content":"\n\u003Cp\u003EDue to the absence of a proper manual it took me quite a while to understand how the mod works. It would be nice if you could provide (new) users of the mod with an explanation how to use the mod.\u003C/p\u003E\u003Cp\u003EI have found two bugs so far. \u003C/p\u003E\u003Cp\u003E1) When trying to transfer RCS fuel, the program interface turns grey as soon as the detination tank has been selected. The user has no more control of the mod and looses the possibility to end the flight when the interface covers the small control screen (with Resume flight .......End Flight).\u003C/p\u003E\u003Cp\u003E2) The mod only allows for 1 FUEL transfer to a ship. If a second refueling to that same ship is necessary, one has to exit the game and restart it.\u003C/p\u003E\u003Cp\u003EI\u0027m using version 0.1.4 of the fueltransfer mod, KSP 0.16, the only additional mod is Cart133.\u003C/p\u003E\n"},{"CreatedByName":"ptaylor25","CreatedById":29543,"CreatedDateTime":"2012-08-22T10:30:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheCardinal\u0022 data-cite=\u0022TheCardinal\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E...two bugs so far. \u003C/p\u003E\u003Cp\u003E1) When trying to transfer RCS fuel, the program interface turns grey as soon as the detination tank has been selected. The user has no more control of the mod and looses the possibility to end the flight when the interface covers the small control screen (with Resume flight .......End Flight).\u003C/p\u003E\u003Cp\u003E2) The mod only allows for 1 FUEL transfer to a ship. If a second refueling to that same ship is necessary, one has to exit the game and restart it.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can confirm encountering both of these bugs, but have found a workaround of sorts for #1) .... I am able to use the [] keys to change focus to the other ship and use the small control screen there (Resume flight .......End Flight) to return to the Tracking Center. (Note: I cannot actually do the RCS fuel transfer, just recover from the bug)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-08-22T10:35:41Z\u0022 title=\u002208/22/2012 10:35  AM\u0022 data-short=\u002211 yr\u0022\u003EAugust 22, 2012\u003C/time\u003E by ptaylor25\u003C/strong\u003E\n\u003C/span\u003E\n"}]}