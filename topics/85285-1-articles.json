{"TopicId":85285,"ForumId":16,"TopicTitle":"PHase Angle calculation for KOS","CreatedByName":"SanderB","CreatedById":83050,"CreatedDateTime":"2014-09-23T19:17:08Z","PageNum":1,"Articles":[{"CreatedByName":"SanderB","CreatedById":83050,"CreatedDateTime":"2014-09-23T19:17:08Z","Content":"\n\u003Cp\u003EHi all,\u003C/p\u003E\u003Cp\u003EI\u0027m trying to write my own KOS Hohmann Transfer script and I\u0027m having trouble. I\u0027ve managed to gather the True Anomaly, the Argument of Periapsis and the Longitude of Ascending Node of the vessel and the target. I\u0027ve calculated the required phase angle for the insertion burn and I\u0027ll have no (foreseeable) trouble calculating how to perform it correctly. My problem is I can\u0027t get my current phase angle correctly. \u003C/p\u003E\u003Cp\u003EWhat I have right now is this:\u003C/p\u003E\u003Cp\u003Eset Angle1 to obt:lan\u002Bobt:argumentofperiapsis\u002Bobt:trueanomaly. //the ships angle to universal reference direction.\u003C/p\u003E\u003Cp\u003Eset Angle2 to target:obt:lan\u002Btarget:obt:argumentofperiapsis\u002Btarget:obt:trueanomaly. //target angle\u003C/p\u003E\u003Cp\u003Eset Angle1 to Angle1 - 360*floor(Angle1/360). //normalization\u003C/p\u003E\u003Cp\u003Eset Angle2 to Angle2 - 360*floor(Angle2/360).//^\u003C/p\u003E\u003Cp\u003Eset Angle3 to abs(Angle2-Angle1).\u003C/p\u003E\u003Cp\u003EAngle 3 is intended to be the current phase angle. As it is, it simply shows the shortest angle. I\u0027ve been trawling over my math books and a few forums without success. I\u0027m stuck. I don\u0027t know how to get the current prograde phase angle. Can someone help out?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-24T07:02:09Z\u0022 title=\u002209/24/2014 07:02  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 24, 2014\u003C/time\u003E by SanderB\u003C/strong\u003E\n\u003Cbr\u003Equestion answered\n\u003C/span\u003E\n"},{"CreatedByName":"Yasmy","CreatedById":79995,"CreatedDateTime":"2014-09-24T03:44:09Z","Content":"\n\u003Cp\u003ESet your branch cut after subtracting angles, not before:\u003C/p\u003E\u003Cp\u003EAssuming these lines are good:\u003C/p\u003E\u003Cp\u003E set Angle1 to obt:lan\u002Bobt:argumentofperiapsis\u002Bobt:trueanomaly. //the ships angle to universal reference direction.\u003C/p\u003E\u003Cp\u003E set Angle2 to target:obt:lan\u002Btarget:obt:argumentofperiapsis\u002Btarg et:obt:trueanomaly. //target angle\u003C/p\u003E\u003Cp\u003EThen:\u003C/p\u003E\u003Cp\u003E set Angle3 = Angle2 - Angle1.\u003C/p\u003E\u003Cp\u003E set Angle3 = Angle3 - 360 * floor(Angle3/360).\u003C/p\u003E\u003Cp\u003ENow 0 \u0026lt;= Angle3 \u0026lt; 360, and describes the number of degrees your target is ahead of your ship.\u003C/p\u003E\n"},{"CreatedByName":"SanderB","CreatedById":83050,"CreatedDateTime":"2014-09-24T07:01:41Z","Content":"\n\u003Cp\u003EThank you Yasmy, that is the same solution that came to me while falling asleep this morning.\u003C/p\u003E\n"}]}