{"TopicId":101756,"ForumId":16,"TopicTitle":"Equation for air resistance as a function of altitude and velocity.","CreatedByName":"Collider1","CreatedById":114806,"CreatedDateTime":"2015-03-11T20:11:04Z","PageNum":1,"Articles":[{"CreatedByName":"Collider1","CreatedById":114806,"CreatedDateTime":"2015-03-11T20:11:04Z","Content":"\n\u003Cp\u003EI\u0027m writing an autopilot script in KOS and I need to account for air resistance. I believe it should be proportional to the cross sectional area and the square of the velocity and I\u0027m guessing it\u0027s inversely proportional to the altitude (or maybe the square of the altitude). Is this right, have I forgotten anything, and do you know what the constants I should be using are?\u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EOh and I guess there\u0027s drag coefficients on the parts. Where do they come in? Do they represent the area?\u003C/p\u003E\n"},{"CreatedByName":"rcp27","CreatedById":129752,"CreatedDateTime":"2015-03-11T20:31:20Z","Content":"\n\u003Cp\u003EThe current aerodynamics model in stock KSP is not a realistic representation of the way aerodynamics really work, so looking up references to real world aerodynamics will not help you in KSP. It might be worth bearing in mind that the aerodynamics model is being entirely changed for 1.0, so if you are planning on putting a lot of effort into getting your script right, you might be better off waiting until after the change.\u003C/p\u003E\u003Cp\u003EMy understanding of how KSP models drag now has the drag force on a part proportional to the mass rather than cross sectional area and linearly with velocity rather than as the square of velocity. I\u0027m not sure how the atmospheric density profile is represented, though.\u003C/p\u003E\u003Cp\u003EIn the real world, aerodynamics is a deeply complex subject that can\u0027t really be summed up in a simple forum post. The temperature/pressure/density profile obviously varies with weather, but is modelled in a number of ways, for example the International Standard Atmosphere, but I would not be surprised if the KSP atmosphere is not at all representative of the real atmosphere.\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2015-03-11T21:03:48Z","Content":"\n\u003Cp\u003EI have a formula that seems pretty accurate, but it\u0027s buried deep within a spreadsheet I don\u0027t have easy access to on this tablet. As I understand it, KSP drag does go up with velocity squared (it\u0027s lift from wings that is currently proportional to velocity, at least until v1.0) but the atmospheric pressure is somewhat unrealistic. It can be worked out from information in the wiki.\u003C/p\u003E\u003Cp\u003EI can find the details next time I\u0027m on my PC if that would help.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2015-03-11T21:10:55Z","Content":"\n\u003Cp\u003EI\u0027m your guy.\u003C/p\u003E\u003Cp\u003EKSP uses the standard viscous drag equation for it\u0027s drag calculations, the equation is:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/Zp1Fcpb.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/Zp1Fcpb.png\u0022 alt=\u0022Zp1Fcpb.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EWhere \u003Cimg src=\u0022http://i.imgur.com/oB0IGCV.png\u0022 alt=\u0022oB0IGCV.png\u0022\u003E is the atmospheric density, \u003Cimg src=\u0022http://i.imgur.com/7BpUrQa.png\u0022 alt=\u00227BpUrQa.png\u0022\u003E is the cross section area, and \u003Cimg src=\u0022http://i.imgur.com/W79ymTh.png\u0022 alt=\u0022W79ymTh.png\u0022\u003E is the drag coefficient. For KSP, \u003Cimg src=\u0022http://i.imgur.com/7BpUrQa.png\u0022 alt=\u00227BpUrQa.png\u0022\u003E is simplified to \u003Cimg src=\u0022http://i.imgur.com/eY4BOFf.png\u0022 alt=\u0022eY4BOFf.png\u0022\u003E (\u003Cimg src=\u0022http://i.imgur.com/18tCwGn.png\u0022 alt=\u002218tCwGn.png\u0022\u003E being the mass of the part), and \u003Cimg src=\u0022http://i.imgur.com/W79ymTh.png\u0022 alt=\u0022W79ymTh.png\u0022\u003E becomes \u003Cimg src=\u0022http://i.imgur.com/zO3QEBj.png\u0022 alt=\u0022zO3QEBj.png\u0022\u003E, the drag coefficient of the part, and the atmospheric density becomes \u003Cimg src=\u0022http://i.imgur.com/zdgdOhq.png\u0022 alt=\u0022zdgdOhq.png\u0022\u003E (where \u003Cimg src=\u0022http://i.imgur.com/MEDkyCP.png\u0022 alt=\u0022MEDkyCP.png\u0022\u003E is the atmospheric pressure). Overall, it gives you this:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/g26UjOx.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/g26UjOx.png\u0022 alt=\u0022g26UjOx.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESource: I dealt with this way too much for RealChute.\u003C/p\u003E\u003Cp\u003EI\u0027ll LaTeX this in a few mins for clarity.\u003C/p\u003E\u003Cp\u003EEDIT: Done\u003C/p\u003E\u003Cp\u003EJust to be clear, this is only good for stock KSP pre 1.0. No idea what it\u0027ll look like post 1.0, and FAR does not follow this at all.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-11T21:22:19Z\u0022 title=\u002203/11/2015 09:22  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 11, 2015\u003C/time\u003E by stupid_chris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Collider1","CreatedById":114806,"CreatedDateTime":"2015-03-11T21:19:56Z","Content":"\n\u003Cp\u003EThat would be great, thanks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m using the current aerodynamics model for two reasons. This is for a university programming project as well as for myself, and it may be due in before the update, and also I wanted to learn how to make it work with the simple aerodynamics model before I move on to trying to work out the complex one.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EOh cool, thanks. How is atmospheric pressure calculated though? Isn\u0027t it normally Density*g*height?\u003C/p\u003E\u003Cp\u003EAlthough I guess that\u0027s for fluid of a constant density.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-11T21:23:21Z\u0022 title=\u002203/11/2015 09:23  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 11, 2015\u003C/time\u003E by Collider1\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2015-03-11T21:27:06Z","Content":"\n\u003Cp\u003ENope, KSP works it backwards. Atmospheric pressure is this:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/CJWeCvX.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/CJWeCvX.png\u0022 alt=\u0022CJWeCvX.png\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EWhich is basically the pressure ASL times the exponantial of minus the current altitude over the scale height of the body. It\u0027s a very simple (and inaccurate) model, but yeah.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-11T21:29:53Z\u0022 title=\u002203/11/2015 09:29  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 11, 2015\u003C/time\u003E by stupid_chris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Collider1","CreatedById":114806,"CreatedDateTime":"2015-03-11T21:34:37Z","Content":"\n\u003Cp\u003EFantastic. Thank you, I should be able to fix my code now. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-03-11T21:56:57Z","Content":"\n\u003Cp\u003EAlso, be aware that if you have the \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/PresMat_Barometer\u0022 rel=\u0022external nofollow\u0022\u003EPresMat Barometer\u003C/a\u003E attached to your ship, kOS can get the readout from it, with SHIP:SENSORS:PRES. I used that in a launch script to work out stock KSP terminal velocity, like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    // The density of air in kilograms per cubic meter\u003Cbr\u003E    // at a pressure of 1 atmosphere:\u003Cbr\u003E    set atmToDens to 1.2230948554874 .\u003Cbr\u003E\u003Cbr\u003E    // \u0027e\u0027, as in the natural log base:\u003Cbr\u003E    set e to constant():e.\u003Cbr\u003E\u003Cbr\u003E    // The typical drag coefficient in SQUAD\u0027s formula for most parts except parachutes:\u003Cbr\u003E    // If you assume your ship is made of typical parts and you aren\u0027t trying to launch with\u003Cbr\u003E    // parachutes active, this will also be the average across your whole ship then:\u003Cbr\u003E    set drag to 0.2.\u003Cbr\u003E\u003Cbr\u003E    // m/s^2 gravitational acceleration here (i.e. 9.802 for earth at sea level).\u003Cbr\u003E    lock heregrav to BODY:MU / ( (SHIP:BODY:RADIUS\u002BSHIP:ALTITUDE)^2 ).\u003Cbr\u003E\u003Cbr\u003E    // You can lock this to surface vel, or oribital vel.\u003Cbr\u003E    // Depending on how high up you are you might want to switch it:\u003Cbr\u003E    lock useVel to ship:velocity:surface.\u003Cbr\u003E\u003Cbr\u003E    print \u0022Current Pressure is\u0022 \u002B SHIP:SENSORS:PRES.\u003Cbr\u003E\u003Cbr\u003E    // air density here:\u003Cbr\u003E    lock dense to ship:sensors:pres * atmToDens.\u003Cbr\u003E\u003Cbr\u003E    // Force of drag from air pressure here:\u003Cbr\u003E    lock fdrag to 0.5*( dense )*(usevel:mag)^2*drag*0.008*SHIP:MASS.\u003Cbr\u003E\u003Cbr\u003E    // Terminal velocity here:\u003Cbr\u003E    set termv to ( (250*heregrav)/( dense * drag ) ) ^ 0.5 . // divZero?\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EObviously none of this will be right anymore once stock aero gets changed in 1.0.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-11T21:57:40Z\u0022 title=\u002203/11/2015 09:57  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 11, 2015\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003Cbr\u003EPLEASE SQUAD let me set in my profile that I NEVER WANT auto-smilieys turned on. I hates them.\n\u003C/span\u003E\n"},{"CreatedByName":"Collider1","CreatedById":114806,"CreatedDateTime":"2015-03-11T22:18:16Z","Content":"\n\u003Cp\u003EOh that\u0027s neat. I will need to be calculating the drag ahead of my ship as well as the current drag, but this will be very useful as a reference for any bug fixing. Thank you. Also, thanks for reminding me that most parts have a drag of 0.2. I was looking in the KOS wiki for a function that would let me sum the drag of the parts.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2015-03-12T00:13:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Collider1\u0022 data-cite=\u0022Collider1\u0022\u003E\u003Cdiv\u003EOh that\u0027s neat. I will need to be calculating the drag ahead of my ship as well as the current drag, but this will be very useful as a reference for any bug fixing. Thank you. Also, thanks for reminding me that most parts have a drag of 0.2. I was looking in the KOS wiki for a function that would let me sum the drag of the parts.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s basically a weighted average, basically you want to sum the mass of each part times it\u0027s drag coefficient divided by the total mass.\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2015-03-12T11:09:26Z","Content":"\n\u003Cp\u003EWhen I was working out my spreadsheet (which agrees with the formulae posted above, yay) the main surprise was finding that SRBs have a higher drag coefficient of 0.3. I couldn\u0027t work out why an RT-10 plus pod wouldn\u0027t go as high as I predicted until I spotted that. It was especially annoying as the whole point was to work out how to beat the altitude records one by one in a career game.\u003C/p\u003E\u003Cp\u003EAlso, bear in mind that if you have massive (as in not massless) parts with a drag coefficient that isn\u0027t 0.2, the average coefficient of the craft may change as you burn fuel e.g. a mk1 command pod, parachute plus an RT-10 goes from about 0.28 when full to roughly 0.24 when empty. Another reason to be happy the model will change in v1.0!\u003C/p\u003E\n"},{"CreatedByName":"justidutch","CreatedById":99185,"CreatedDateTime":"2015-03-12T18:43:16Z","Content":"\n\u003Cp\u003EThis (equation for air resistance as a function of altitude and velocity) should be easy:\u003C/p\u003E\u003Cp\u003EAsk a swallow.\u003C/p\u003E\n"},{"CreatedByName":"monophonic","CreatedById":76902,"CreatedDateTime":"2015-03-12T19:20:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022justidutch\u0022 data-cite=\u0022justidutch\u0022\u003E\u003Cdiv\u003EThis (equation for air resistance as a function of altitude and velocity) should be easy:\u003Cp\u003EAsk a swallow.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat do you mean? An African or European swallow?\u003C/p\u003E\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003EWhat? You must have seen that one coming! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Snarfster","CreatedById":80347,"CreatedDateTime":"2015-03-12T20:34:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022monophonic\u0022 data-cite=\u0022monophonic\u0022\u003E\u003Cdiv\u003EWhat do you mean? An African or European swallow?\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003EWhat? You must have seen that one coming! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI thought drag was calculated in Antioch, swallows are more weight limited \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: To not go completely off topic. I thought FAR used D = .5 * density * v^2 * Cd * A? That\u0027s the somewhat standard drag formula I had to learn a LONG time ago.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-12T20:40:45Z\u0022 title=\u002203/12/2015 08:40  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 12, 2015\u003C/time\u003E by Snarfster\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Vanamonde","CreatedById":27914,"CreatedDateTime":"2015-03-12T20:57:45Z","Content":"\n\u003Cp\u003EMoved to the how-to section, and please keep it on-topic, guys.\u003C/p\u003E\n"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2015-03-12T23:55:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Collider1\u0022 data-cite=\u0022Collider1\u0022\u003E\u003Cdiv\u003EI need to account for air resistance.\u003Cp\u003EOh and I guess there\u0027s drag coefficients on the parts. Where do they come in? Do they represent the area?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHave a look at chapter 5.1 of my \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/93426-Physics-of-KSP\u0022 rel=\u0022external nofollow\u0022\u003EPhysics of KSP\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EOne thing to keep in mind is that the air resistence is calculated based on the velocity relative to the atmosphere and not the orbital velocity.\u003C/p\u003E\n"}]}