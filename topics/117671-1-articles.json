{"TopicId":117671,"ForumId":36,"TopicTitle":"Handling Views","CreatedByName":"iamchairs","CreatedById":143189,"CreatedDateTime":"2015-08-05T03:49:37Z","PageNum":1,"Articles":[{"CreatedByName":"iamchairs","CreatedById":143189,"CreatedDateTime":"2015-08-05T03:49:37Z","Content":"\n\u003Cp\u003EI made a thread a few days ago about possibly using html for views. That\u0027s not possible so I\u0027m going to give the legacy gui a shot but I\u0027m having trouble structuring.\u003C/p\u003E\u003Cp\u003EI have a View class with a \u0060paint\u0060 method. I\u0027ll create subclasses for the views I need and modify \u0060paint\u0060. To actually call paint I need an OnGUI method to call them. So in one class I\u0027m calling the ViewManager you can register your view and in the OnGUI loop it calls paint on each view that should be painting. Here is my ViewManager class-\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[FONT=Menlo]\u003Cbr\u003E[/FONT]using System;\u003Cbr\u003Eusing System.Collections;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Enamespace StateFunding {\u003Cbr\u003E  [KSPAddon (KSPAddon.Startup.MainMenu, false)]\u003Cbr\u003E  public class ViewManager: MonoBehaviour {\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E    public View[] views = new View[0];\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E    public void addView(View V) {\u003Cbr\u003E      View[] newViews = new View[views.Length\u002B1];\u003Cbr\u003E      for(int i = 0; i \u0026lt; views.Length; i\u002B\u002B) {\u003Cbr\u003E        newViews[i] = views[i];\u003Cbr\u003E      }\u003Cbr\u003E      newViews[newViews.Length-1] = V;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E      views = newViews;\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E    public void OnGUI() {\u003Cbr\u003E      Debug.Log (\u0022guiiii\u0022);\u003Cbr\u003E      for (var i = 0; i \u0026lt; views.Length; i\u002B\u002B) {\u003Cbr\u003E        Debug.Log (\u0022In a looooop\u0022);\u003Cbr\u003E        View V = views [i];\u003Cbr\u003E        if (V.isPainting ()) {\u003Cbr\u003E          V.paint ();\u003Cbr\u003E        }\u003Cbr\u003E      }\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe log shows \u0022guiiii\u0022 and \u0022In a loooop\u0022 being repeated up until I enter a game. I\u0027m guessing the ViewManager object is unregistered during that transition. How do I keep this alive? I just want to have the ViewManager running all the time and I can register/unregister views from it when needed.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EWhats up with the whitespace :\\\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EFixed\u003C/p\u003E\n"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2015-08-05T04:00:30Z","Content":"\n\u003Cp\u003Eadd DontDestroyOnLoad(this) to the Start method, like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprivate void Start()\u003Cbr\u003E{\u003Cbr\u003E    DontDestroyOnLoad(this);\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt will prevent the game from removing your ViewManager every time a new scene loads.\u003C/p\u003E\u003Cp\u003EAlso, next time you have a programming related question like this, post it in the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/forums/30-Plugin-Development-Help-and-Support\u0022 rel=\u0022external nofollow\u0022\u003EPlugin Development subforum\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"iamchairs","CreatedById":143189,"CreatedDateTime":"2015-08-05T04:10:08Z","Content":"\n\u003Cp\u003EWoo! Thanks.\u003C/p\u003E\n"}]}