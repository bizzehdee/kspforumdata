{"TopicId":117671,"ForumId":36,"TopicTitle":"Handling Views","CreatedByName":"iamchairs","CreatedById":143189,"CreatedDateTime":"2015-08-05T03:49:37Z","PageNum":1,"Articles":[{"CreatedByName":"iamchairs","CreatedById":143189,"CreatedDateTime":"2015-08-05T03:49:37Z","Content":"I made a thread a few days ago about possibly using html for views. That\u0027s not possible so I\u0027m going to give the legacy gui a shot but I\u0027m having trouble structuring.\n\nI have a View class with a \u0060paint\u0060 method. I\u0027ll create subclasses for the views I need and modify \u0060paint\u0060. To actually call paint I need an OnGUI method to call them. So in one class I\u0027m calling the ViewManager you can register your view and in the OnGUI loop it calls paint on each view that should be painting. Here is my ViewManager class-\n\n    [FONT=Menlo][/FONT]using System;using System.Collections;using UnityEngine;namespace StateFunding {  [KSPAddon (KSPAddon.Startup.MainMenu, false)]  public class ViewManager: MonoBehaviour {    public View[] views = new View[0];    public void addView(View V) {      View[] newViews = new View[views.Length\u002B1];      for(int i = 0; i \u003C views.Length; i\u002B\u002B) {        newViews[i] = views[i];      }      newViews[newViews.Length-1] = V;      views = newViews;    }    public void OnGUI() {      Debug.Log (\u0022guiiii\u0022);      for (var i = 0; i \u003C views.Length; i\u002B\u002B) {        Debug.Log (\u0022In a looooop\u0022);        View V = views [i];        if (V.isPainting ()) {          V.paint ();        }      }    }  }}\n\nThe log shows \u0022guiiii\u0022 and \u0022In a loooop\u0022 being repeated up until I enter a game. I\u0027m guessing the ViewManager object is unregistered during that transition. How do I keep this alive? I just want to have the ViewManager running all the time and I can register/unregister views from it when needed.\n\n- - - Updated - - -\n\nWhats up with the whitespace :\\\n\n- - - Updated - - -\n\nFixed"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2015-08-05T04:00:30Z","Content":"add DontDestroyOnLoad(this) to the Start method, like so:\n\n    private void Start(){    DontDestroyOnLoad(this);}\n\nIt will prevent the game from removing your ViewManager every time a new scene loads.\n\nAlso, next time you have a programming related question like this, post it in the [Plugin Development subforum](https://forum.kerbalspaceprogram.com/forums/30-Plugin-Development-Help-and-Support)"},{"CreatedByName":"iamchairs","CreatedById":143189,"CreatedDateTime":"2015-08-05T04:10:08Z","Content":"Woo! Thanks."}]}