{"TopicId":51073,"ForumId":36,"TopicTitle":"[PLUGIN\u002BPARTS][0.23] SCANsat terrain mapping","CreatedByName":"damny","CreatedById":78621,"CreatedDateTime":"2013-10-29T16:06:22Z","PageNum":63,"Articles":[{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-14T02:01:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003EI see nobody yet provided info about the above question.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks. MeCripp also mentioned the Modular Kolonization System that I think adds four Kethane Resources, though one of them is Ore, and I\u0027m not sure if that\u0027s the same as the one used by Extraplanetary Launchpads. So that\u0027s a lot of potential resources...\u003C/p\u003E\u003Cp\u003EAm I right that ORS has no persistent method for storing or displaying resources? There is no in-game map, it just shows you resources that you are currently picking up with the scanner (and apparently some kind of indicator texture of some sort)?\u003C/p\u003E\u003Cp\u003EIf so that should greatly simplify adding support for it. I wouldn\u0027t have to worry about pulling any data out of some ORS database or re-syncing said database with the SCANsat record after background scanning. I\u0027m actually thinking that it might not even require any dependency on the ORS plugin (or the KSPI plugin, or whatever it uses). \u003C/p\u003E\u003Cp\u003EOn the other hand, it looks like ORS is designed to allow for the .dll to be distributed with other mods. It should be simple enough to include the ORS .dll, allowing me to add a hard dependency on the assembly; it wouldn\u0027t have any affect if you don\u0027t have any ORS resources, and it wouldn\u0027t require any awkward solutions like RPM, or what codepoet has been discussing with connected living space and ship manager. I\u0027ll have to look at it more to figure out what would work best.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T02:02:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EI checked out the latest release on my regular, full installation of KSP. I put a bunch of vessels in orbit (without cheating!) with different sensors at difference altitudes. I checked scanning for all of the different sensors, everything seems to be working, both for regular scanning and background scanning. All of my attempts to break the big map failed, so that\u0027s a good sign. \u003Cp\u003EI also did some brief testing without Toolbar and that was working fine. \u003C/p\u003E\u003Cp\u003EThere are a handful of very minor issues and one slightly less minor issue that I found. All of which, I think, can wait for another major update to fix. \u003C/p\u003E\u003Cp\u003EThe MapTraq has a non-functional \u0022analyze data\u0022 action group available in the VAB, and the BTDT has both the action group and the right-click event for \u0022analyze data\u0022, all of these should be removed. The commented out lines in SCANcontroller (437-439) that change the fov calculation also make it so the blinking orange/green light never goes away, at least I think that\u0027s what\u0027s happening. It doesn\u0027t affect scanning though. Also, I\u0027m not sure if anyone really cares about this, but the MapTraq and BTDT are kind-of sunken into the part they connect to.\u003C/p\u003E\u003Cp\u003EThe line in their part.cfg file should be: node_attach = 0.0, -0.1, 0.0, 0.0, -1.0, 0.0, 0, currently it\u0027s: node_attach = 0.0, 0.1, 0.0, 0.0, -1.0, 0.0, 0 (flip the sign on the second value).\u003C/p\u003E\u003Cp\u003EThe less-easy to fix problem is that when the big map overwrites low resolution altimetry data with high resolution data it only changes the color. The blockiness of the low resolution data remains until you rebuild the big map cache (just change the size a little bit). This isn\u0027t a big deal, it\u0027s easy enough to rebuild the cache and it\u0027s probably not all that common to scan with a low resolution scanner, then do it with a high resolution scanner in such quick succession. I also discovered that the big map cache is persistent through vessel and scene changes, which is nice.\u003C/p\u003E\u003Cp\u003EAlso, I would hold off on adding caching to SCANsatRPM. It\u0027s resetting the map size every time the map rebuilds, so a cache wouldn\u0027t do anything but take up space in memory. I\u0027m not entirely sure how it decides what size to set the map, so I don\u0027t know if this can be worked around easily. I\u0027ll try to test it out with RPM at some point and see if I can\u0027t get it to tell me what size it\u0027s setting the map at.\u003C/p\u003E\u003Cp\u003EOtherwise I think it\u0027s fine, everything seems to be working correctly.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, the one person I trust the most says the v6 version is free of major bugs!\u003C/p\u003E\u003Cp\u003EAnyone else using the v6 release and can report no major problems?\u003C/p\u003E\n"},{"CreatedByName":"phoenix_ca","CreatedById":50380,"CreatedDateTime":"2014-05-14T02:09:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EThanks. MeCripp also mentioned the Modular Kolonization System that I think adds four Kethane Resources, though one of them is Ore, and I\u0027m not sure if that\u0027s the same as the one used by Extraplanetary Launchpads.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell I listed off all of them. Ore in MKS is exactly the same as in ExPL, so they share that resource.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EAm I right that ORS has no persistent method for storing or displaying resources? There is no in-game map, it just shows you resources that you are currently picking up with the scanner (and apparently some kind of indicator texture of some sort)?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes.\u003C/p\u003E\u003Cp\u003EHonestly at this point, from an end-user perspective, I\u0027d say that if you guys can pull-off mapping for Kethane and ORS resources, it wouldn\u0027t matter if those mods had their own mapping systems. ScanSat would be a good enough replacement for the entire thing. ScanSat\u0027s already well established too (okay, sorta), so anything done with SS is going to be almost guaranteed to be more refined and feature-complete than anything added by Kethane or ORS.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-14T02:11:38Z\u0022 title=\u002205/14/2014 02:11  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 14, 2014\u003C/time\u003E by phoenix_ca\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"futrtrubl","CreatedById":77310,"CreatedDateTime":"2014-05-14T02:28:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        public enum SCANtype\u003Cbr\u003E        {\u003Cbr\u003E            Nothing = 0,         // no data\u003Cbr\u003E            AltimetryLoRes = 1, // low resolution altimetry (limited zoom)\u003Cbr\u003E            AltimetryHiRes = 2, // high resolution altimetry (unlimited zoom)\u003Cbr\u003E            Altimetry = 3,     // both (setting) or either (testing) altimetry\u003Cbr\u003E            //Slope = 4,        // slope data\u003Cbr\u003E            Biome = 8,        // biome data\u003Cbr\u003E            Anomaly = 16,        // anomalies (position of anomaly)\u003Cbr\u003E            AnomalyDetail = 32,    // anomaly detail (name of anomaly, etc.)\u003Cbr\u003E            Everything = 255    // everything\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t even know what the heck the Altimetry = 3 setting is for, but last time I checked 3 isn\u0027t a power of 2.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe 3 is 0b00000011 ie both 1 and 2, the Lo and Hi res Altimetry, like the 255 is 0b11111111 for everything.\u003C/p\u003E\u003Cp\u003ECan you not say have scanner 64 be a Kethane type scanner, and then look in the KethaneDetector MODULE on the part for the defined Resource{}s instead of trying to make one for every resource?\u003C/p\u003E\u003Cp\u003EEdward\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-14T02:43:21Z\u0022 title=\u002205/14/2014 02:43  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 14, 2014\u003C/time\u003E by futrtrubl\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T03:17:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022futrtrubl\u0022 data-cite=\u0022futrtrubl\u0022\u003E\u003Cdiv\u003EThe 3 is 0b00000011 ie both 1 and 2, the Lo and Hi res Altimetry, like the 255 is 0b11111111 for everything.\u003Cp\u003ECan you not say have scanner 64 be a Kethane type scanner, and then look in the KethaneDetector MODULE on the part for the defined Resource{}s instead of trying to make one for every resource?\u003C/p\u003E\u003Cp\u003EEdward\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, I\u0027m aware of that. It\u0027s not that I don\u0027t know how bitmasks work; it\u0027s that it doesn\u0027t need to be defined if we are using this enum as a bitmask AND I didn\u0027t know where in the scansat code we actually use 3.\u003C/p\u003E\u003Cp\u003EAs for your suggestion; I don\u0027t know. Yes. If we continue to use this as a bitmask, then 4, 64, and 128 are available; so we could just take one. As for looking in the detector module -- no, that does not make sense. There is no reason to believe every kethane detector will detect every kind of kethane resource; regardless of that, you want to be able to see a map of each kind of resource regardless of the presence of such an able detector on your vessel.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-14T03:36:48Z\u0022 title=\u002205/14/2014 03:36  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 14, 2014\u003C/time\u003E by technogeeky\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"LameLefty","CreatedById":57336,"CreatedDateTime":"2014-05-14T03:33:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnyone else using the v6 release and can report no major problems?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI haven\u0027t invested a whole lot of time but (for reasons) I just did a 100% scan of Minmus with the SAR radar and the Big Map doesn\u0027t seem to be showing anomalies (or orbit tracks, craft icons or anything other than the map itself, despite button clicks to the contrary).\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T03:39:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022LameLefty\u0022 data-cite=\u0022LameLefty\u0022\u003E\u003Cdiv\u003EI haven\u0027t invested a whole lot of time but (for reasons) I just did a 100% scan of Minmus with the SAR radar and the Big Map doesn\u0027t seem to be showing anomalies (or orbit tracks, craft icons or anything other than the map itself, despite button clicks to the contrary).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf I had bothered to even launch the game after my last build, I would have seen this. I\u0027ll check it out.\u003C/p\u003E\u003Cp\u003EI have had basically only an hour a day for some time to work on this. Happily, I have an extended weekend and all week next week off. So v7 should be pretty special.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-14T03:42:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022futrtrubl\u0022 data-cite=\u0022futrtrubl\u0022\u003E\u003Cdiv\u003ECan you not say have scanner 64 be a Kethane type scanner, and then look in the KethaneDetector MODULE on the part for the defined Resource{}s instead of trying to make one for every resource?\u003Cp\u003EEdward\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETo be clear, these scanType shenanigans are only necessary for background scanning, simply adding an overlay doesn\u0027t require any of this. \u003C/p\u003E\u003Cp\u003EAnd as for doing this for background scanning, it\u0027s basically what technogeeky said. Scanning data is recorded in an array that is stored in the persistent file. So once you have data scanned with any given scanner type it will be persistent and anything that refers to that scanType will see the same record. Even if you could delete the record for just that type of scanner this would still only allow for background scanning of one resource at a time.\u003C/p\u003E\u003Cp\u003ETG\u0027s suggestion of using a different scanType enumeration is probably the best idea. That way nothing about the regular version would need to be changed and the new types could use all 255 available values. \u003C/p\u003E\u003Cp\u003EIn any event it\u0027s the dependency issue that really needs to be worked out, though I\u0027ve just had some ideas on that, but I probably won\u0027t get anywhere soon.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-14T03:43:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022LameLefty\u0022 data-cite=\u0022LameLefty\u0022\u003E\u003Cdiv\u003EI haven\u0027t invested a whole lot of time but (for reasons) I just did a 100% scan of Minmus with the SAR radar and the Big Map doesn\u0027t seem to be showing anomalies (or orbit tracks, craft icons or anything other than the map itself, despite button clicks to the contrary).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe SAR scanner shouldn\u0027t pick up on anomalies anyway. I didn\u0027t have any problems with the orbit track, but I\u0027ll check on this some more.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T03:44:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022LameLefty\u0022 data-cite=\u0022LameLefty\u0022\u003E\u003Cdiv\u003EI haven\u0027t invested a whole lot of time but (for reasons) I just did a 100% scan of Minmus with the SAR radar and the Big Map doesn\u0027t seem to be showing anomalies (or orbit tracks, craft icons or anything other than the map itself, despite button clicks to the contrary).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI suspect this is because we\u0027ve introduced an incorrect check on the status of a boolean, scanning.\u003C/p\u003E\u003Cp\u003ECan you check for me: activate/turn on any sensor on the vessel you had problems with, and see if the overlays work then (orbit icons, flags, markers, asteroids, etc)\u003C/p\u003E\u003Cp\u003Eedit: in addition, the buttons for stop/starting are behaving incorrectly for me. they seem to get stuck after one use. I am testing by using an existing craft on the launchpad.\u003C/p\u003E\u003Cp\u003Eedit edit: This behaviour (stop/start buttons not working \u0022properly\u0022) seems to be related to my ship not having power. Similarly with the first thing comment.\u003C/p\u003E\u003Cp\u003ESo, LameLefty: does your ship have enough electric charge?\u003C/p\u003E\u003Cp\u003EDMagic: however, there is a bug here. Steps to reproduce:\u003C/p\u003E\u003Cp\u003E1. With some charge, start a scanner.\u003C/p\u003E\u003Cp\u003E2. Allow the scanner to drain out the charge. (It goes blank before the static shows up; which is also incorrect)\u003C/p\u003E\u003Cp\u003E3. While having no charge; turn off that scanner. The model will retract.\u003C/p\u003E\u003Cp\u003E4. (Cheat): fill up your electric charge.\u003C/p\u003E\u003Cp\u003E5. The scanner is consuming charge, but shows as off.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-14T03:56:18Z\u0022 title=\u002205/14/2014 03:56  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 14, 2014\u003C/time\u003E by technogeeky\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-14T04:07:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EDMagic: however, there is a bug here. Steps to reproduce:\u003C/p\u003E\u003Cp\u003E1. With some charge, start a scanner.\u003C/p\u003E\u003Cp\u003E2. Allow the scanner to drain out the charge. (It goes blank before the static shows up; which is also incorrect)\u003C/p\u003E\u003Cp\u003E3. While having no charge; turn off that scanner. The model will retract.\u003C/p\u003E\u003Cp\u003E4. (Cheat): fill up your electric charge.\u003C/p\u003E\u003Cp\u003E5. The scanner is consuming charge, but shows as off.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI see it, I think I know why it\u0027s happening, it might be an underlying bug. I\u0027m checking version 5 now. \u003C/p\u003E\u003Cp\u003EI also rechecked the big map in Minmus orbit. The ground track and current vessel icon worked fine on the big map.\u003C/p\u003E\u003Cp\u003EEdit: V5 works fine. I see the problem, it\u0027s because of this loop thing that it goes through with onUpdate checking for power usage. I just need to add one line to the stopScan event.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-14T04:17:51Z\u0022 title=\u002205/14/2014 04:17  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 14, 2014\u003C/time\u003E by DMagic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T04:12:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EI see it, I think I know why it\u0027s happening, it might be an underlying bug. I\u0027m checking version 5 now. \u003Cp\u003EI also rechecked the big map in Minmus orbit. The ground track and current vessel icon worked fine on the big map.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E#5 should be amended to say \u0022the scanner is consuming charge (and is still scanning), but shows as off\u0022\u003C/p\u003E\u003Cp\u003EThe static does correctly come on when the electric charge hits 0.00, on more careful examination.\u003C/p\u003E\u003Cp\u003EI don\u0027t remember if the bigmap overlays were drawn when all scanners were turned off before.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-14T04:26:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003EI don\u0027t remember if the bigmap overlays were drawn when all scanners were turned off before.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t believe the big map was ever affected by power. I\u0027m not sure that it should be, it would really just be annoying. \u003C/p\u003E\u003Cp\u003EI fixed the problem, I just added the powerIsProblem line:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E          [KSPEvent(guiActive = true, guiName = \u0022Stop RADAR Scan\u0022, active = true)]\u003Cbr\u003E\t  public void stopScan () {\u003Cbr\u003E          unregisterScanner ();\u003Cbr\u003E          powerIsProblem = false;\u003Cbr\u003E\t  animate (-1);\u003Cbr\u003E\t  }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EMy copy (or copies to be accurate) of the code are a total jumble right now, so I can\u0027t push it to Github. But I can make the other fixes to remove the analyze data buttons tomorrow and include everything together.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T04:31:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EI don\u0027t believe the big map was ever affected by power. I\u0027m not sure that it should be, it would really just be annoying. \u003Cp\u003EI fixed the problem, I just added the powerIsProblem line:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E          [KSPEvent(guiActive = true, guiName = \u0022Stop RADAR Scan\u0022, active = true)]\u003Cbr\u003E      public void stopScan () {\u003Cbr\u003E          unregisterScanner ();\u003Cbr\u003E          powerIsProblem = false;\u003Cbr\u003E      animate (-1);\u003Cbr\u003E      }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EMy copy (or copies to be accurate) of the code are a total jumble right now, so I can\u0027t push it to Github. But I can make the other fixes to remove the analyze data buttons tomorrow and include everything together.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe big map overlays are currently affected by no active scanners. That is what I was asking about.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-14T04:54:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003EThe big map overlays are currently affected by no active scanners. That is what I was asking about.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI see what you mean now. That\u0027s how it\u0027s always been. \u003C/p\u003E\u003Cp\u003EAdding the powerIsProblem line will fix the problem with the retracted-but-active scanner. The old version simply didn\u0027t allow you to retract the scanner while you didn\u0027t have power. I suppose doing it that way is another option, but personally I think it\u0027s annoying when you can\u0027t turn something like that off when you are out of power. After all, you can extend solar panels without power, so you should probably be able to turn off the scanner without power too.\u003C/p\u003E\n"},{"CreatedByName":"frik","CreatedById":4808,"CreatedDateTime":"2014-05-14T08:47:46Z","Content":"\n\u003Cp\u003EI understand correctly that SCANsat stores results in persistence file, so removing whole SCANsat v5 folder and replacing it with v6 won\u0027t mean I have to scan everything I already scanned once again?\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-05-14T10:02:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAm I right that ORS has no persistent method for storing or displaying resources? There is no in-game map, it just shows you resources that you are currently picking up with the scanner (and apparently some kind of indicator texture of some sort)?\u003C/p\u003E\u003Cp\u003EIf so that should greatly simplify adding support for it. I wouldn\u0027t have to worry about pulling any data out of some ORS database or re-syncing said database with the SCANsat record after background scanning. I\u0027m actually thinking that it might not even require any dependency on the ORS plugin (or the KSPI plugin, or whatever it uses). \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDefinitely InterStellar (KSPI)/ORS have no persistency in displaying resources. But storing is another story.\u003C/p\u003E\u003Cp\u003EThose 4 land geo-localised resources are each depicted on a pgn map (if InterStellar is installed, to be found in /GameData/WarpPlugin/PlanetResourceData), for each planetary body (currently, 37 maps come with KSPI 0.11, as some resources are only valid for some bodies, not all). Map dimensions are variable, most are 640 x 480, some less. All rectangular projections. I am no expert, but those maps appear to just be monochromatic, 255 levels of grey to show relative abundance of a resource at any given geographic coordinates. White dots on those maps are used to mark the spots that are revealed by KSPI scanners.\u003C/p\u003E\u003Cp\u003EScanning in KSPI is not persistent. Each resource is shown (directly over the body surface) only when a scanner is active and close enough. When moving away beyond some distance, the resource disappears. \u003C/p\u003E\u003Cp\u003EHaving a mapping tool like SCANsat would certainly help because of the persistency (though, I will then seek how to reduce the range of KSPI detectors to balance gameplay).\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T10:12:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022frik\u0022 data-cite=\u0022frik\u0022\u003E\u003Cdiv\u003EI understand correctly that SCANsat stores results in persistence file, so removing whole SCANsat v5 folder and replacing it with v6 won\u0027t mean I have to scan everything I already scanned once again?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis. Is. Correct.\u003C/p\u003E\n"},{"CreatedByName":"Tiron","CreatedById":51836,"CreatedDateTime":"2014-05-14T11:28:53Z","Content":"\n\u003Cp\u003EGood News Everyone! Someone reported the problem with the new build number system on the Mechjeb Dev Builds breaking hard dependencies, and it\u0027s been changed as of build #254, so dev builds of mechjebs are now drop-ins on RPM again (Tested successfully with #255). There was a change in the name of the \u0027target orbit\u0027 function in one of the dev builds, so it might not work *quite* right, but it doesn\u0027t completely blow up at least.\u003C/p\u003E\u003Cp\u003ESo one more RPM Rebuild and I should hopefully not have to do another one for a very, very long time. Never if Mihara stays on top of things. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI also want to suggest...that it would probably be a good idea to start a new post for SCANSat v6, since you can\u0027t get it in the first post of this thread. Call it \u0027SCANSat continued\u0027 or something seems to be the usual solution.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T13:20:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tiron\u0022 data-cite=\u0022Tiron\u0022\u003E\u003Cdiv\u003EGood News Everyone! Someone reported the problem with the new build number system on the Mechjeb Dev Builds breaking hard dependencies, and it\u0027s been changed as of build #254, so dev builds of mechjebs are now drop-ins on RPM again (Tested successfully with #255). There was a change in the name of the \u0027target orbit\u0027 function in one of the dev builds, so it might not work *quite* right, but it doesn\u0027t completely blow up at least.\u003Cp\u003ESo one more RPM Rebuild and I should hopefully not have to do another one for a very, very long time. Never if Mihara stays on top of things. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI also want to suggest...that it would probably be a good idea to start a new post for SCANSat v6, since you can\u0027t get it in the first post of this thread. Call it \u0027SCANSat continued\u0027 or something seems to be the usual solution.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs I have mentioned: I am not going to start a first post until I am confident that the release is free of serious bugs. This is for many reasons, but among them are:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EThis will be the first Add-On Showcase release, so lots of new people will see it. I don\u0027t want to besmirch the reputation of SCANsat.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThis will be my first official release of any kind, so I don\u0027t want to start off with a bad reputation.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThere will be a new Showcase thread for the released version, and a new Dev thread for the upcoming version. This doubles the precariousness of #1 and #2.\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI want to make a new thread as soon as possible too; especially because this will free me to start working on my own additions to SCANsat instead of making sure the existing product works as desired.\u003C/p\u003E\n"},{"CreatedByName":"phoenix_ca","CreatedById":50380,"CreatedDateTime":"2014-05-14T13:20:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003EI am no expert, but those maps appear to just be monochromatic, 255 levels of grey to show relative abundance of a resource at any given geographic coordinates. White dots on those maps are used to mark the spots that are revealed by KSPI scanners.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re right, mostly. The one caveat is that the resource maps can be defined using either a logarithmic scale or an linear one. This shouldn\u0027t actually matter for mapping as long as all you plan on doing is using a legend of 0-255. If you wanted to standardize it to some unit, you\u0027ll need to grab the scale values from the PLANETARY_RESOURCE_DEFINITION for that resource and do some math on it. This\u0027d actually be great for users trying to figure-out relative abundance between different resources.\u003C/p\u003E\u003Cp\u003EAlso strictly speaking the hot spots aren\u0027t triggered by values of 255, but rather by absolute abundance times the displayThreshold value which will mark any spots with abundance higher than the result as hot spots.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EHOW\u003C/strong\u003E Fractal visualizes this at all so that he can make passable maps with reasonable scales is beyond me. I imagine a fair amount of math was done. That or a fair bit of tweaking. The benefit of his implementation is that it\u0027s very easy to adjust the entire map up or down with a config edit, and in a way that doesn\u0027t affect persistence files at all.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-14T13:29:50Z\u0022 title=\u002205/14/2014 01:29  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 14, 2014\u003C/time\u003E by phoenix_ca\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2014-05-14T15:13:04Z","Content":"\n\u003Cp\u003EThe maps in RPM look like there drawing or refresh is slower now in v6 and on a descent the orbit lines are behind the craft where in v5 they still showed about were you was landing.\u003C/p\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T15:19:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EI checked out the latest release on my regular, full installation of KSP. I put a bunch of vessels in orbit (without cheating!) with different sensors at difference altitudes. I checked scanning for all of the different sensors, everything seems to be working, both for regular scanning and background scanning. All of my attempts to break the big map failed, so that\u0027s a good sign. \u003Cp\u003EI also did some brief testing without Toolbar and that was working fine. \u003C/p\u003E\u003Cp\u003EThere are a handful of very minor issues and one slightly less minor issue that I found. All of which, I think, can wait for another major update to fix. \u003C/p\u003E\u003Cp\u003EThe MapTraq has a non-functional \u0022analyze data\u0022 action group available in the VAB, and the BTDT has both the action group and the right-click event for \u0022analyze data\u0022, all of these should be removed. The commented out lines in SCANcontroller (437-439) that change the fov calculation also make it so the blinking orange/green light never goes away, at least I think that\u0027s what\u0027s happening. It doesn\u0027t affect scanning though. Also, I\u0027m not sure if anyone really cares about this, but the MapTraq and BTDT are kind-of sunken into the part they connect to.\u003C/p\u003E\u003Cp\u003EThe line in their part.cfg file should be: node_attach = 0.0, -0.1, 0.0, 0.0, -1.0, 0.0, 0, currently it\u0027s: node_attach = 0.0, 0.1, 0.0, 0.0, -1.0, 0.0, 0 (flip the sign on the second value).\u003C/p\u003E\u003Cp\u003EThe less-easy to fix problem is that when the big map overwrites low resolution altimetry data with high resolution data it only changes the color. The blockiness of the low resolution data remains until you rebuild the big map cache (just change the size a little bit). This isn\u0027t a big deal, it\u0027s easy enough to rebuild the cache and it\u0027s probably not all that common to scan with a low resolution scanner, then do it with a high resolution scanner in such quick succession. I also discovered that the big map cache is persistent through vessel and scene changes, which is nice.\u003C/p\u003E\u003Cp\u003EAlso, I would hold off on adding caching to SCANsatRPM. It\u0027s resetting the map size every time the map rebuilds, so a cache wouldn\u0027t do anything but take up space in memory. I\u0027m not entirely sure how it decides what size to set the map, so I don\u0027t know if this can be worked around easily. I\u0027ll try to test it out with RPM at some point and see if I can\u0027t get it to tell me what size it\u0027s setting the map at.\u003C/p\u003E\u003Cp\u003EOtherwise I think it\u0027s fine, everything seems to be working correctly.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe following fixes are in:\u003C/p\u003E\u003Cp\u003E* part.cfg changes for MapTraq and BTDT\u003C/p\u003E\u003Cp\u003E* re-enable lower-than-ideal-altitude penalty (also fixes blinking)\u003C/p\u003E\u003Cp\u003E* MapTraq and BTDT have been stripped of their Analyze events and actions\u003C/p\u003E\u003Cp\u003EI went with values of 0.05 for 2nd component of the part.cfgs.\u003C/p\u003E\u003Cp\u003Eedit: nevermind that\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-14T16:00:59Z\u0022 title=\u002205/14/2014 04:00  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 14, 2014\u003C/time\u003E by technogeeky\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"technogeeky","CreatedById":107155,"CreatedDateTime":"2014-05-14T15:21:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MeCripp\u0022 data-cite=\u0022MeCripp\u0022\u003E\u003Cdiv\u003EThe maps in RPM look like there drawing or refresh is slower now in v6 and on a descent the orbit lines are behind the craft where in v5 they still showed about were you was landing.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EChecking on these two...\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-14T15:50:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022technogeeky\u0022 data-cite=\u0022technogeeky\u0022\u003E\u003Cdiv\u003EThe following fixes are in:\u003Cp\u003E* part.cfg changes for MapTraq and BTDT\u003C/p\u003E\u003Cp\u003E* re-enable lower-than-ideal-altitude penalty (also fixes blinking)\u003C/p\u003E\u003Cp\u003EThe part.cfg changes do not look right: now the scanners float above the surface upon which you are attaching them.\u003C/p\u003E\u003Cp\u003EI don\u0027t know precisely what you mean about the VAB action groups, but I see nothing in the context menus for MapTraq or BTDT.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThose attachment node fixes probably aren\u0027t very important. The models aren\u0027t any good anyway, so it doesn\u0027t really matter if they sink in or float a little (also note that some of the stock parts have bad colliders, which make many parts float above their surface).\u003C/p\u003E\u003Cp\u003EFor the BTDT and MapTraq the analyze data action group is available to be set to a hot key while in the VAB. The fix for that is simple, though not very important. \u003C/p\u003E\u003Cp\u003EI tested the fix for the no power bug a little more. It seems to be working, you can start and stop scanning with no power, the animation plays and the part behaves properly after power is restored. Maybe changing this so that you can only enable or disable scanning on EVA while there is no power would be a better idea. But for now it works.\u003C/p\u003E\u003Cp\u003EI\u0027m not sure why the ground track would be affected by any changes in v6, but I can see how the map update may be a little slower. I think there is some room to improve this in general beyond caching the IVA map. But that too can wait.\u003C/p\u003E\u003Cp\u003EIt seems that the map is always set at 640 * 640 pixels, at least the square map is. Do you need the ALCOR capsule to get that rectangular version of the map? Or am I missing something in the regular 1-man command pod? Either way, the map is pretty small, a cache should only take up a 1 or 2 MB of space. But I would like to figure out how it sets the screen size before I do anything to that, and more changes will be needed to make caching actually work.\u003C/p\u003E\n"}]}