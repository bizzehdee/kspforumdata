{"TopicId":65119,"ForumId":55,"TopicTitle":"Lower LOD (level of detail) for SPC buildings","CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-03-07T19:49:14Z","PageNum":1,"Articles":[{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-03-07T19:49:14Z","Content":"\n\u003Cp\u003EI just figured out that the quite long loading time before a launch or on a \u0022building switch\u0022 (VAB-\u0026gt;exit) can be caused by the gigantic and super (over) detailed Space Center buildings. \u003C/p\u003E\u003Cp\u003EIt\u0027s not very good most of the time because I just want to launch a rocket far far away from SPC and I\u0027ll take a look only at the launchpad, so if all objects around would be far less complex (kind of Kerbin City project buildings), I\u0027m pretty sure loading time will be significantly shorter, the lag at the beginning (just when physics are \u0022stabilized\u0022) might be reduced too.\u003C/p\u003E\u003Cp\u003EI think add a settings INSIDE the game (not in settings main menu), to switch for buildings\u0027 LODs could be great, so when I want to drive/fly near the SPC, I set best LOD, when I want to go very far Kerbin (Jeb might have a fight with his boss, again \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E ) I choose the lowest LOD and I don\u0027t have to wait many seconds just to see the launchpad AND if I have made a crazy gigantic rocket, performance of the game could be better.\u003C/p\u003E\n"},{"CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2014-03-07T20:17:19Z","Content":"\n\u003Cp\u003EI second the use of LOD\u0027s. Also not rendering parts when they are less than 2 pixels on screen would help as well.\u003C/p\u003E\n"},{"CreatedByName":"Supernovy","CreatedById":29617,"CreatedDateTime":"2014-03-07T21:33:38Z","Content":"\n\u003Cp\u003EI thought most of the delay was caused by initialising physics. If that was true, then there would be a correlation between part count and loading time. I may have to investigate this myself.\u003C/p\u003E\u003Cp\u003EOn topic, I\u0027m sure the space centre is pretty well optimised already, but perhaps you could go to lower resolution textures like you can do with parts.\u003C/p\u003E\n"},{"CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2014-03-07T21:37:18Z","Content":"\n\u003Cp\u003ETextures are already mip mapped as far as I know. I\u0027m sure optimizations are on the list for things to do in KSP....\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2014-03-07T22:08:34Z","Content":"\n\u003Cp\u003Ei dont think polycounts are an issue on modern video hardware. gpus eat polygons for breakfast. and mipmapping is a thing.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Supernovy\u0022 data-cite=\u0022Supernovy\u0022\u003E\u003Cdiv\u003EI thought most of the delay was caused by initialising physics. If that was true, then there would be a correlation between part count and loading time. I may have to investigate this myself.\u003Cp\u003EOn topic, I\u0027m sure the space centre is pretty well optimised already, but perhaps you could go to lower resolution textures like you can do with parts.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ephysics is n^2 so more stuff == slow. rendering is not, you are just passing commands to the video card, and once they are sent you dont have to bother with them anymore. graphics\u0027 effect on performance is totally linear, while physics is exponential.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-07T22:15:31Z\u0022 title=\u002203/07/2014 10:15  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 7, 2014\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"iStickyDuck","CreatedById":75908,"CreatedDateTime":"2014-03-07T22:38:20Z","Content":"\n\u003Cp\u003EDon\u0027t remove the high textures, have an option to turn them down a bit. On my PC they look beautiful and it runs without lag but on my laptop I would choose performance over graphics (so long as I can still see what I\u0027m doing)\u003C/p\u003E\n"},{"CreatedByName":"DocMoriarty","CreatedById":57433,"CreatedDateTime":"2014-03-08T05:37:16Z","Content":"\n\u003Cp\u003EThe vanilla KSC doesn\u0027t cause any noticable lag on my machine but i have some test vehicles and a test base assembly standing around there totalling in 600\u002B parts currently and that really lags down on loading and operating stuff there.\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-03-08T08:19:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nuke\u0022 data-cite=\u0022Nuke\u0022\u003E\u003Cdiv\u003Ei dont think polycounts are an issue on modern video hardware. gpus eat polygons for breakfast. and mipmapping is a thing.\u003Cp\u003Ephysics is n^2 so more stuff == slow. rendering is not, you are just passing commands to the video card, and once they are sent you dont have to bother with them anymore. graphics\u0027 effect on performance is totally linear, while physics is exponential.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot fully true, as it\u0027s depend on how Unity do the job first (and it can be horribly under-efficient under-optimized) then polygons \u002B tex have to be send to gfx card memory to feed GPUs, so performances depend on buses speed/bandwidth (a parameter too many people forgot) so if your buses are not fast enough, GPUs spend their time waiting to receive data and waiting data to be taken out. Which in fact is what happen these days with crazy fast cpu/gpu (advertising effect) but motherboard/memory with performance improvement which don\u0027t follow.\u003C/p\u003E\u003Cp\u003EAnd polycount matter too, just look at nvidia benchmarks data for example, you just can\u0022t render in realtime an \u0022infinite\u0022 polygons scene, there is a limit (which come from memory at least).\u003C/p\u003E\u003Cp\u003EKSC itself may not be responsible of lags, but big ship \u002B KSC may be (having KSC removed from count may help, even just a bit).\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2014-03-09T02:27:47Z","Content":"\n\u003Cp\u003Ethats not how a video card works. before the thing actually starts rendering anything all the data it needs is already fed into its memory. most of the bus traffic happens at loadtime. you have index buffer objects and texture objects and frame buffer objects all on the card waiting to go. what the game sends every frame is not graphics nor is it texture data. its commands to render things already in the video cards memory. most of the arguments for those commands are pointers to those objects, transform data, ect. \u003C/p\u003E\u003Cp\u003Ethis happens unity or not (ive written some opengl applications). what unity does is throws in an abstraction layer so that it can support whatever native apis are used on the various platforms that unity supports, so that the same graphics calls that works on osx, works on windows, works on linux, or works on android or whatever. \u003C/p\u003E\u003Cp\u003Ethe video card does have upper limits on what it can do, but i dont think ksp gets anywhere close to those limits. most of its resources sit idle frame after frame. loding may have been a thing in the 90s, but i dont think its neccisary for most games today.\u003C/p\u003E\n"},{"CreatedByName":"MR4Y","CreatedById":66897,"CreatedDateTime":"2014-03-11T09:23:43Z","Content":"\n\u003Cp\u003EI don\u0027t think the game should calculate physics for objects that are entirely static(i.e the entirety of KSC).\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-03-11T13:09:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MR4Y\u0022 data-cite=\u0022MR4Y\u0022\u003E\u003Cdiv\u003EI don\u0027t think the game should calculate physics for objects that are entirely static(i.e the entirety of KSC).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t think it does beyond the buildings being static rigid bodies, like the surface of the planets.\u003C/p\u003E\n"},{"CreatedByName":"MR4Y","CreatedById":66897,"CreatedDateTime":"2014-03-11T17:45:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003EI don\u0027t think it does beyond the buildings being static rigid bodies, like the surface of the planets.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think it does, especially after 0.21, where the game would freeze for a few seconds during SOI transition.\u003C/p\u003E\n"},{"CreatedByName":"Nemrav","CreatedById":91029,"CreatedDateTime":"2014-03-11T20:23:30Z","Content":"\n\u003Cp\u003EI think that there\u0027s probably a lot of unnoticable vertices in the building selection screen (terrain) that could be removed, but the buildings themselves aren\u0027t that intensive.. You can\u0027t notice the difference looking at the buildings or not.\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-03-11T21:13:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nemrav\u0022 data-cite=\u0022Nemrav\u0022\u003E\u003Cdiv\u003EI think that there\u0027s probably a lot of unnoticable vertices in the building selection screen (terrain) that could be removed, but the buildings themselves aren\u0027t that intensive.. You can\u0027t notice the difference looking at the buildings or not.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI know we can think that\u0027s way, maybe someone need to study more carefully how it\u0027s done and what the GPU do in this case.\u003C/p\u003E\u003Cp\u003EAnyway, one concern is more regarding the loading time on the launch scene (runway or launchpad) and the size of assets files in KSP_Data which are likely to hold all meshes and textures which are most of the time loaded mostly for nothing at all.\u003C/p\u003E\u003Cp\u003EIn fact there are only a few cases, on a descent hardware, where slowdown and/or lags can be witnessed, like osmetime when we\u0027re close to the shores or when there is some changes in Kerbin display (another model\u002Btexs ?) after a given altitude.\u003C/p\u003E\n"}]}