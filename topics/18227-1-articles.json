{"TopicId":18227,"ForumId":29,"TopicTitle":"Compiling Mumech","CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-08-30T21:23:54Z","PageNum":1,"Articles":[{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-08-30T21:23:54Z","Content":"\n\u003Cp\u003Eso i got revision 60 loaded into visual studio 2010. and was trying to get it to compile. i want to add freetrack support for hull cameras. but before i can do that i need to get the thing to compile. it does actually compile but i get this when i try to launch ksp:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E..\u003Cbr\u003EBeing asked to load D:/KSPdev/KSP_Data/../Plugins\\MuMechLib.dll\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/300357e52574df36/Runtime/ExportGenerated/StandalonePlayer/UnityEngineDebug.cpp Line: 43)\u003Cbr\u003E\u003Cbr\u003ENon platform assembly: D:\\KSPdev\\Plugins\\MuMechLib.dll (this message is harmless)\u003Cbr\u003ELoading assembly: MuMechLib, Version=1.9.1.0, Culture=neutral, PublicKeyToken=null\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/300357e52574df36/Runtime/ExportGenerated/StandalonePlayer/UnityEngineDebug.cpp Line: 43)\u003Cbr\u003E\u003Cbr\u003EException when loading MuMechLib, Version=1.9.1.0, Culture=neutral, PublicKeyToken=null: System.Reflection.ReflectionTypeLoadException: The classes in the module cannot be loaded.\u003Cbr\u003E\u003Cbr\u003E  at (wrapper managed-to-native) System.Reflection.Assembly:GetTypes (bool)\u003Cbr\u003E\u003Cbr\u003E  at System.Reflection.Assembly.GetTypes () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003E  at ModuleLoader.LoadAssembly (System.Reflection.Assembly asm) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E...\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Edid some search-fu, found the z trick, however that didnt work either. i haven\u0027t actually made any changes to the code yet. any help would be appreciated.\u003C/p\u003E\u003Cp\u003Ei should also point out that my c# is not strong (i prefer c/\u002B\u002B and lua), though i did read the entire syntax article on wikipedia.\u003C/p\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-08-31T01:55:36Z","Content":"\n\u003Cp\u003ETry compiling a release version, maybe revision 60 is borked. I haven\u0027t worked on mechlib in a while, but there used to be a couple files I omitted, those wouldn\u0027t compile though.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-08-31T02:29:30Z","Content":"\n\u003Cp\u003Ei guess i can keep rolling back revisions till it works.\u003C/p\u003E\u003Cp\u003Eim not 100% sure i can load the freetrackclient.dll from the plugin, especially considering it was written in delphi. i was able to access the dll from lua standalone so i may end up being better off implementing it through autom8, assuming autom8 both lets you load modules and change camera angles. so i have a couple angles of attack with which to approach the problem.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-08-31T03:53:28Z","Content":"\n\u003Cp\u003Eseems i cant go back very far as far as revisions go before im at a version no longer compatible with version 0.16. and none of those seemed to work. probibly some kind of configuration issue with the build environment.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-09-03T21:13:06Z","Content":"\n\u003Cp\u003Ek, so it turns out talking to freetrack is easy, getting mumech to work, thats hard.\u003C/p\u003E\u003Cp\u003Ei decided to take a different approach. i followed the basic hello world in the wiki (normally i skip these and dive into the advanced stuff, after all code is code), and it worked for the most part. then i tried the freetrack interface code that i had intended to use for mumechlib. it just printed the data to the log when the part was inited. so its at this point i either re-invent the wheel and spin my own camera plugin. id rather not do that since mumech already has a pretty good camera feature. i had intended to get it working and post a diff against their svn repo for them to implement at their leisure. im not sure what to do at this point. though i have a hunch that sharp lua has something to do with it, that perhaps there is extra configuration neccisary for it not throw an exception.\u003C/p\u003E\u003Cp\u003Eproblem solved \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-04T05:45:43Z\u0022 title=\u002209/04/2012 05:45  AM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 4, 2012\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"N3X15","CreatedById":12073,"CreatedDateTime":"2012-09-05T22:28:11Z","Content":"\n\u003Cp\u003EI\u0027ve gotten MuMech to compile and run just fine using the .NET 3.5 Client Profile instead of .NET 4 (which is what VS2010 defaults to).\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-09-08T01:50:12Z","Content":"\n\u003Cp\u003Eyea that was the problem. i got it to work and posted a diff on the mumech thread.\u003C/p\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-09-08T03:45:25Z","Content":"\n\u003Cp\u003EWell now I can\u0027t get MuMech working. I\u0027m using MonoDevelop it compiles fine with both .NET and MONO 4.0, but all MuMech parts are grayed out in the VAB. When I try to compile in 3.5 I get a bunch of \u0022default parameter specifiers not allowed\u0022 errors as in, public void MyFunction(bool MyBool = false;){}. Is it correct that default parameters are not valid until .NET 4.0?\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-08T05:23:14Z","Content":"\n\u003Cp\u003EYes. C# didn\u0027t get optional arguments until the .Net 4.0 release (VS2010): \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/dd264739.aspx\u0022 rel=\u0022external nofollow\u0022\u003EMSDN: Named and Optional Arguments (C# Programming Guide)\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EWhat you want to do, is to get a 4.0 compatible compiler and target the 3.5 framework.\u003C/p\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-09-08T16:33:07Z","Content":"\n\u003Cp\u003EThat explains the problem. Maybe there\u0027s a hidden option involved, but Monodevelop seems to link the framework to the compiler, when I target the 3.5 framework MonoDevelop switches to a 3.5 compiler and stops allowing optional arguments.\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-08T18:07:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Zool\u0022 data-cite=\u0022Zool\u0022\u003E\u003Cdiv\u003EThat explains the problem. Maybe there\u0027s a hidden option involved, but Monodevelop seems to link the framework to the compiler, when I target the 3.5 framework MonoDevelop switches to a 3.5 compiler and stops allowing optional arguments.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIIRC, the only difference between a 3.5 build and a 4.0 build is which assemblies your assembly references. Try building from the command line. The /nostdlib and /noconfig flags should be of some use.\u003C/p\u003E\u003Cp\u003EThere\u0027s also the old workaround of using a series of method overloads:\u003C/p\u003E\u003Cp\u003Eint Func(bool NonOptArg, int OptArg) {\u003C/p\u003E\u003Cp\u003E// do stuff\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003Eint Func(bool NonOptArg) {\u003C/p\u003E\u003Cp\u003Ereturn Func(NonOptArg, 5);\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-08T18:11:09Z\u0022 title=\u002209/08/2012 06:11  PM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 8, 2012\u003C/time\u003E by Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-09-08T20:45:15Z","Content":"\n\u003Cp\u003EI didn\u0027t really want to throw in a bunch of overloads just to get it to compile.\u003C/p\u003E\u003Cp\u003ELong story short, you can\u0027t configure it monodevelop, you have to build it from the command line.\u003C/p\u003E\u003Cp\u003EWell, I got it figured out. You can\u0027t target the .NET3.5 framework in monodevelop and use the csc.exe included in .NET v4. I tried removing the 4.0 system and system.core references and pointing to the 3.5 dlls, but it automatically adds a reference to the 4.0 System.Core, and fails to compile.\u003C/p\u003E\u003Cp\u003EHandily the error message has the complete command line that it tried to execute, so I copied that into a batch file and removed the extra .dll, strangely this ran into the character limit for a single command, so I had to change from full paths to local ones.\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-09T02:36:21Z","Content":"\n\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E Makes me glad I use Visual Studio (not Express).\n"},{"CreatedByName":"Foran","CreatedById":126,"CreatedDateTime":"2012-09-26T07:49:02Z","Content":"\n\u003Cp\u003EHow in the world do you actually set up the solution in VS? I\u0027ve never used c#, I\u0027ve always been a c\u002B\u002B person. Do I just load the files straight into Visual studio and hit build or is there something outside of the svn I need? Are there any properties I need to set up inside the solution itself?\u003C/p\u003E\n"}]}