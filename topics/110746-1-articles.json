{"TopicId":110746,"ForumId":36,"TopicTitle":"[1.10\u002B] SolverEngines","CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-05-25T04:05:06Z","PageNum":1,"Articles":[{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-05-25T04:05:06Z","Content":"SolverEngines is by NathanKell and blowfish, based on the work of camlost for AJE.\n\nInstallation:\n\nMerge the zip\u0027s GameData folder with your KSP/GameData folder. After installing, inside KSP/GameData should be a SolverEngines folder (and inside that, Icons and Plugins folders).\n\n**Note: Unless a mod you are using requires this, do not install it. It\u0027s for developers, not end users.**\n\n[Download](https://github.com/KSP-RO/SolverEngines/releases/)\n\n[GitHub (source)](https://github.com/KSP-RO/SolverEngines)\n\nLicense: LGPL.\n\nSolverEngines is at its heart a replacement paradigm for how KSP deals with engines, splitting engines into a partmodule and an engine solver. Instead of a single engine module that does everything, or that is specifically geared to a single type of enigne, and instead of needing to keep a stock engine module present but then override its values every tick, SolverEngines decouples the engine module from the code that handles performance (the solver).\n\nSolverEngines consists of five parts: the engine module and the engine solver, a replacement for the intake module that is geared to work with SolverEngines, a GUI for various flight and engine stats, and a replacement for ModuleAnimateHeat. The engine module derives from ModuleEnignesFX (and therefore is visible to MechJeb and \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003E\u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E\u003C/abbr\u003E), and handles all direct KSP interaction. The solver gets input data, and exposes various public methods for the module to get information back. The intake module derives from ModuleResourceIntake.\n\nModuleAnimateEmissive replaces ModuleAnimateHeat with a more flexible, configurable module. It can either be linked to a part\u0027s temperature (the default) or be told what state it should be each frame (so SolverEngines can control emissive animations directly).\n\n**NOTE**: With the exception of ModuleAnimateEmissive, SolverEngines is \\*\\*not a mod for end-users\\*\\*. It is a mod for developers, who should derive classes from ModuleEnginesSolver and EngineSolver (as AJE and RealFuels do). It will do nothing on its own.\n\nTo use SolverEngines, implement two classes: a class that derives from EngineSolver that handles all calculation of thrust, Isp, and fuel flow given the passed-in parameters (and any new ones necessary), and a class that derives from ModuleEnginesSolver and overrides CreateEngine() to create an engine solver of the new type (and passes it any creation stats). Also override the info methods so proper info is displayed. You may also need to override other virtual methods in ModuleEnginesSolver (like UpdateFlightConditions and UpdateThrottle) depending on your engine\u0027s need for more status information or other requirements, and methods like OnStart or OnLoad to deal with more complexity.\n\nNote that SolverEngines uses the [KSPAssembly] tag. Add this line to your AssemblyInfo.cs file to make KSP aware that your assembly depends on SolverEngines:\n\n[assembly: KSPAssemblyDependency(\u0022SolverEngines\u0022, 1, 0)]\n\n[(Example, in AJE.)](https://github.com/camlost2/AJE/blob/solver_redo/Source/Properties/AssemblyInfo.cs#L38)\n\nSolverEngines will also automatically create overheat bars if engineTemp approaches maxEngineTemp, and will set all ModuleAnimateEmissive modules on the part to solver.GetEmissive() each tick.\n\nSolverEngines includes a GUI to display useful information about engines in flight, and additional info about air-breathing engines using SolverEngines when they are present. The GUI will display an icon on blizzy87\u0027s toolbar if available, or on the stock toolbar if it is not. All fields in the display GUI can be disabled in the settings window, and the display units can be changed in the units window.\n\nSee AJE or RealFuels for examples of how to implement SolverEngines in practice.\n\n**Edited \u003Ctime datetime=\u00222021-05-29T07:54:00Z\u0022 title=\u002205/29/2021 07:54  AM\u0022 data-short=\u00223 yr\u0022\u003EMay 29, 2021\u003C/time\u003E by NathanKell**"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2015-05-25T04:17:09Z","Content":"Neat, but how is this better than using the stock engine modules?"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-05-25T09:56:18Z","Content":"\u003E \n\u003E Neat, but how is this better than using the stock engine modules?\n\nSolverEngines doesn\u0027t do anything by itself. Rather, it provides an API for other plugins to use custom calculations for engine thrust and fuel consumption. This is mainly targeted at realism mods (AJE and RealFuels) but really can be used anywhere the stock engine calculations are deemed insufficient. For instance, if you wanted to vary Isp with throttle, you couldn\u0027t do that in stock so you\u0027d need a custom calculation."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-05-25T20:16:50Z","Content":"Yep.\n\nAlso you might like the new emissive module (which can be precisely controlled by the engine solver), and the precise control over engine FX."},{"CreatedByName":"kujuman","CreatedById":28299,"CreatedDateTime":"2015-06-03T16:57:03Z","Content":"Looks interesting, I may have to test AdvSRBs using this--particularly if it\u0027ll make it easier to work with the info mods."},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-06-04T21:16:39Z","Content":"I am still getting engines not re igniting with the latest version on GIT. I can get them to reignite if I shut them down with throttle !=0 and reloading the save and starting the engines. Is the solver engines on the AJE any different or do i NEED engine ignitor? Really hope a fix is found this is quite annoying. I am using RealFuels with all engines running moduleEnginesRF\n\n**Edited \u003Ctime datetime=\u00222015-06-04T21:28:29Z\u0022 title=\u002206/04/2015 09:28  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 4, 2015\u003C/time\u003E by Svm420**"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-06-04T21:42:54Z","Content":"\u003E \n\u003E I am still getting engines not re igniting with the latest version on GIT. I can get them to reignite if I shut them down with throttle !=0 and reloading the save and starting the engines. Is the solver engines on the AJE any different or do i NEED engine ignitor? Really hope a fix is found this is quite annoying. I am using RealFuels with all engines running moduleEnginesRF\n\nAre you talking about AJE engines specifically? If so, make sure you have the latest version of AJE and SolverEngines from Github, and if the issue persists, I need full reproduction steps."},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-06-04T21:52:14Z","Content":"\u003E \n\u003E Are you talking about AJE engines specifically? If so, make sure you have the latest version of AJE and SolverEngines from Github, and if the issue persists, I need full reproduction steps.\n\nNo not AJE I am only using solver engines with RealFuels. Anytime I bring throttle down to 0 and raise it above 0 the engine is no longer running and will not restart without doing the save load process I mentioned above. I had wondered if the solver engines that comes with AJE had solved this issue. I am using the latest solver engine available on the solver engine Github not the last release"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-06-04T21:57:12Z","Content":"\u003E \n\u003E No not AJE I am only using solver engines with RealFuels. Anytime I bring throttle down to 0 and raise it above 0 the engine is no longer running and will not restart without doing the save load process I mentioned above. I had wondered if the solver engines that comes with AJE had solved this issue. I am using the latest solver engine available on the solver engine Github not the last release\n\nI\u0027m pretty sure the issue is fixed. You need to update RealFuels from Github as well. The version of SolverEngines on AJE\u0027s Github page is indeed the latest."},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-06-04T22:03:12Z","Content":"Ok I do see RealFuels was updated, but only the source so far, and I don\u0027t know how to compile myself :/ Hope an update does come soon."},{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-16T16:51:54Z","Content":"Yep,I\u0027m coding a Mod about (Rocket,so far) Engine\u0027s Development using SolverEngines and found it really should be a stock(faceplam for Squad(joking,actually everyone is doing a good job)\n\n[http://forum.kerbalspaceprogram.com/threads/125579-WIP-Help-needed-Engine-Development-Customable-Nozzle-PowerCycle-and-more-%28My-first-KSP-mod](https://forum.kerbalspaceprogram.com/threads/125579-WIP-Help-needed-Engine-Development-Customable-Nozzle-PowerCycle-and-more-%28My-first-KSP-mod)"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2015-06-22T15:12:59Z","Content":"The longer I take implementing my mod, the more of it people will do for me."},{"CreatedByName":"volcanicshrimp","CreatedById":139666,"CreatedDateTime":"2015-07-05T17:41:04Z","Content":"When I try to install AJE from CKAN it comes up with both solver engines and animate emissives as dependencies but when it tries to install them they conflict with each other, preventing me from installing AJE or any other mods that I\u0027m trying to install at the same time."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-07-05T18:06:02Z","Content":"RF has the same issue. We\u0027ll get it sorted."},{"CreatedByName":"Deserdi Verimas","CreatedById":100022,"CreatedDateTime":"2015-07-06T18:03:30Z","Content":"Is there any way of varying the mass of an engine when you change the fuel mix type? Also, could you maybe put an option in to change the ISP values for different config types to the real value in seconds, rather than a fraction of the standard isp? If you\u0027re not too busy that is... thanks! Also, would it be possible to make a cheatsheet with all of the different variables for a config and what they do on it?\n\n**Edited \u003Ctime datetime=\u00222015-07-06T18:06:00Z\u0022 title=\u002207/06/2015 06:06  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 6, 2015\u003C/time\u003E by Deserdi Verimas**"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-07-06T18:57:29Z","Content":"Um...I think you\u0027re thinking of RealFuels, which does all that.\n\nSolverEngines isn\u0027t a thing to be used alone."},{"CreatedByName":"Deserdi Verimas","CreatedById":100022,"CreatedDateTime":"2015-07-06T19:02:49Z","Content":"Oh, okay. I was just going off of the stockalike configs... Guess I was looking in the wrong place! Thanks anyway ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"01010101lzy","CreatedById":118333,"CreatedDateTime":"2015-10-09T14:16:48Z","Content":"Log spam when using SolverEngines 1.9 and RF 10.6.1.\n\n\u003E \n\u003E [EXC 22:10:21.185] NullReferenceException: Object reference not set to an instance of an object DeadlyReentry.ModuleHeatShield.FixedUpdate ()\n\u003E [EXC 22:10:21.186] NullReferenceException: Object reference not set to an instance of an object\n\u003E \n\u003E  DeadlyReentry.ModuleHeatShield.FixedUpdate ()\n\u003E \n\u003E [EXC 22:10:21.191] MissingFieldException: Field \u0027SolverEngines.ModuleEnginesSolver.actualThrottle\u0027 not found.\n\u003E \n\u003E  SolverEngines.ModuleEnginesSolver.FixedUpdate ()\n\u003E \n\u003E  RealFuels.ModuleEnginesRF.FixedUpdate ()\n\u003E \n\u003E [EXC 22:10:21.194] MissingFieldException: Field \u0027SolverEngines.ModuleEnginesSolver.actualThrottle\u0027 not found.\n\u003E \n\u003E  SolverEngines.ModuleEnginesSolver.FixedUpdate ()\n\u003E \n\u003E  RealFuels.ModuleEnginesRF.FixedUpdate ()\n\u003E \n\u003E [EXC 22:10:21.195] NullReferenceException: Object reference not set to an instance of an object\n\u003E \n\u003E  DeadlyReentry.ModuleHeatShield.FixedUpdate ()\n\u003E \n\u003E [EXC 22:10:21.196] NullReferenceException: Object reference not set to an instance of an object\n\u003E \n\u003E  DeadlyReentry.ModuleHeatShield.FixedUpdate ()\n\u003E \n\u003E [EXC 22:10:21.215] MissingFieldException: Field \u0027SolverEngines.ModuleEnginesSolver.actualThrottle\u0027 not found.\n\u003E \n\u003E  SolverEngines.ModuleEnginesSolver.FixedUpdate ()\n\u003E \n\u003E  RealFuels.ModuleEnginesRF.FixedUpdate ()\n\u003E \n\u003E [EXC 22:10:21.218] MissingFieldException: Field \u0027SolverEngines.ModuleEnginesSolver.actualThrottle\u0027 not found.\n\u003E \n\u003E  SolverEngines.ModuleEnginesSolver.FixedUpdate ()\n\u003E \n\u003E  RealFuels.ModuleEnginesRF.FixedUpdate ()\n\u003E \n\u003E [EXC 22:10:21.219] NullReferenceException: Object reference not set to an instance of an object\n\u003E \n\u003E  DeadlyReentry.ModuleHeatShield.FixedUpdate ()\n\u003E \n\u003E [EXC 22:10:21.220] NullReferenceException: Object reference not set to an instance of an object\n\u003E \n\u003E  DeadlyReentry.ModuleHeatShield.FixedUpdate ()\n\u003E \n\u003E [EXC 22:10:21.225] MissingFieldException: Field \u0027SolverEngines.ModuleEnginesSolver.actualThrottle\u0027 not found.\n\u003E \n\u003E  SolverEngines.ModuleEnginesSolver.FixedUpdate ()\n\u003E \n\u003E  RealFuels.ModuleEnginesRF.FixedUpdate ()\n\nfixed by using newer versions\n\n**Edited \u003Ctime datetime=\u00222015-10-09T14:39:04Z\u0022 title=\u002210/09/2015 02:39  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 9, 2015\u003C/time\u003E by 01010101lzy**"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-10-09T15:34:42Z","Content":"If it\u0027s fixed in newer versions, why are you worried about it?"},{"CreatedByName":"StoryMusgrave","CreatedById":131938,"CreatedDateTime":"2015-10-09T16:12:17Z","Content":"I think he posted the \u0027bug\u0027, then realized he wasn\u0027t updated, then realized he goofed up and edited his post that it\u0027s fixed already."},{"CreatedByName":"Cratzz","CreatedById":157974,"CreatedDateTime":"2016-02-02T17:23:16Z","Content":"Something broke here with latest 1.15 update. Engines display no thrust and wont start in-game. Have latest RealFuels update and Procedual Parts aswell."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2016-02-02T17:52:50Z","Content":"Please update RealFuels to 10.8.3. You do \\*not\\* have the latest update. If you think you do, CKAN is not serving it correctly, and you should install it manually."},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-04-27T07:18:40Z","Content":"**[SolverEngines v2.0 for KSP 1.1 is now Available](https://github.com/KSP-RO/SolverEngines/releases/tag/v2.0)**\n\nThis updated provides KSP 1.1 compatibility and supports the different-thrust-per-transform setup that is now implemented in ModuleEngines."},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-07-01T05:11:21Z","Content":"**[SolverEngines v2.2 for KSP 1.1.3 is now Available](https://github.com/KSP-RO/SolverEngines/releases/tag/v2.2)**\n\nJust a recompile\n\n**Edited \u003Ctime datetime=\u00222016-07-01T05:11:33Z\u0022 title=\u002207/01/2016 05:11  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 1, 2016\u003C/time\u003E by blowfish**"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-07-06T02:58:57Z","Content":"**[SolverEngines v2.3 is now Available](https://github.com/KSP-RO/SolverEngines/releases/tag/v2.3)**\n\nFixes compatibility issues with AJE"}]}