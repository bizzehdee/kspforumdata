{"TopicId":195057,"ForumId":16,"TopicTitle":"Ejection angles for direct transfer, help me understand","CreatedByName":"Rainshine","CreatedById":205166,"CreatedDateTime":"2020-06-26T09:10:29Z","PageNum":1,"Articles":[{"CreatedByName":"Rainshine","CreatedById":205166,"CreatedDateTime":"2020-06-26T09:10:29Z","Content":"\n\u003Cp\u003EI\u0027m trying to wrap my head around ejection angles for transfers. The phase angle has to do with where you\u0027re headed, and knowing where it will be when you travel from where you are to there -- essentially that it will be there to catch the \u0027ball\u0027 of your spacecraft. That makes some decent sense to me.\u003Cbr\u003E\nThe angle to exit your system (Kerbin, for my purposes) is a bit trickier to my head. The idea is to make the velocity you already have as a result of the system\u0027s orbit around the sun work for you and harness as much of it as you can. Burning a parallel prograde vector from 90 will send you to a higher orbit with nice efficiency, burning parallel to retrograde will send you in-system. The more d/v you burn in that direction, the further you\u0027ll go. Of course, you can\u0027t burn instantaneously, so you need to start a bit further back maybe. But that\u0027s not actually the way the ejection angles work. For instance, I\u0027ve been plotting to transfer a probe out to Dres in the next window. I\u0027ve got a comm sat in high (75 Mm) Kerbin orbit, I put some nodes on it to get an idea of the intercept for my probe. The \u003Cabbr title=\u0022Delta-V\u0022\u003Edv\u003C/abbr\u003E from such a high orbit is greater than that for a low orbit, presumably because you don\u0027t have quite the orbital velocity from such a high altitude. But it seems the ejection angle is smaller for the higher orbits, despite the larger burn. Why? And why is the angle greater to reach closer orbits (i.e. Duna ejection angle is 150, Dres is 123 from the base orbit, per https://ksp.olex.biz/?) Is it that the closer your ejection angle is to 90, the (roughly) more powerful your burn is, so by burning at a wider angle, you\u0027re not going as far outward (perpendicular to the sun)?\u003Cbr\u003E\u003Cbr\u003E\nI\u0027ve been reading\u003Cbr\u003E\nhttps://ksp.olex.biz/\u003Cbr\u003E\nhttps://alexmoon.github.io/ksp/\u003Cbr\u003E\nbut I want to understand why the numbers come out the way they do\u003C/p\u003E\n"},{"CreatedByName":"Zhetaan","CreatedById":125721,"CreatedDateTime":"2020-06-26T12:34:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223809802\u0022 data-ipsquote-contentid=\u0022195057\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221593162629\u0022 data-ipsquote-userid=\u0022205166\u0022 data-ipsquote-username=\u0022Rainshine\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Rainshine said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe \u003Cabbr title=\u0022Delta-V\u0022\u003Edv\u003C/abbr\u003E from such a high orbit is greater than that for a low orbit, presumably because you don\u0027t have quite the orbital velocity from such a high altitude.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is correct; assuming that you don\u0027t need to start from a high orbit, it\u0027s usually better not to do so because the savings from starting in low orbit, with its higher velocity, outweigh most other factors.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223809802\u0022 data-ipsquote-contentid=\u0022195057\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221593162629\u0022 data-ipsquote-userid=\u0022205166\u0022 data-ipsquote-username=\u0022Rainshine\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Rainshine said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBut it seems the ejection angle is smaller for the higher orbits, despite the larger burn. Why?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe reason is because you are still in Kerbin\u0027s gravity well.\u00A0 As you climb out of the well, Kerbin\u0027s gravity warps your trajectory, so you need to change your starting point so that Kerbin warps your exit beneficially, in order that you leave Kerbin\u0027s sphere of influence parallel to Kerbin\u0027s prograde vector and have an efficient transfer.\u00A0 In other words, rather than starting at\u00A0the \u0027right\u0027 point and having Kerbin warp your trajectory off-course, you deliberately start \u0027off-course\u0027 and let Kerbin correct it for you.\n\u003C/p\u003E\n\u003Cp\u003E\nThe farther you are from Kerbin when you start, the less it warps your trajectory.\u00A0 Eventually, you escape Kerbin entirely and begin from a solar orbit, in which case you would just burn prograde to reach outer planets.\u00A0 You also lose on the advantages of a higher initial velocity, and as I mentioned above, those are normally more valuable.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223809802\u0022 data-ipsquote-contentid=\u0022195057\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221593162629\u0022 data-ipsquote-userid=\u0022205166\u0022 data-ipsquote-username=\u0022Rainshine\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Rainshine said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd why is the angle greater to reach closer orbits (i.e. Duna ejection angle is 150, Dres is 123 from the base orbit, per \u003Ca href=\u0022https://ksp.olex.biz/?)\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ksp.olex.biz/?)\u003C/a\u003E Is it that the closer your ejection angle is to 90, the (roughly) more powerful your burn is, so by burning at a wider angle, you\u0027re not going as far outward (perpendicular to the sun)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s about the velocity, first and most importantly.\u00A0 Duna is closer than Dres, so your hyperbolic excess velocity (for practical purposes, that\u0027s the velocity that you have at Kerbin\u0027s sphere of influence boundary that is over and above escape velocity) is going to be lower for Duna because you\u0027re transferring to a lower solar orbit.\u00A0 It is true that the more powerful your burn is, the less you need to adjust your ejection, but that\u0027s because a more powerful burn results in a higher Kerbin-relative velocity, which results in less time spent in Kerbin\u0027s sphere, which results in less time for Kerbin to warp the trajectory.\u00A0 Your angle will affect how far you eventually fly from the sun, but not because the burn is more or less powerful--burn for the same amount of time at different ejection points, and a burn that sends you to Moho from one point will take you past Jool from\u00A0another.\n\u003C/p\u003E\n\u003Cp\u003E\nLet\u0027s say that you want to go to Duna; you neither need nor want a burn that, at a different angle, will take you to Jool, because you either want that propellant for use at Duna or else not to take the extra mass.\u00A0 There is a trade-off:\u00A0 if we assume that you have enough propellant to reach Duna from half, or nearly half, of possible ejection points from Kerbin (half because the other half will send you in-system rather than out), then for most of those points, you will not only reach Duna but will also fly past it in a classic case of having too much propellant for the task at hand.\u00A0 If we reduce the propellant for the burn, then the angles that will allow you to reach Duna become\u00A0constrained because the most inefficient angles at the extremes of the arc will no longer send you quite far enough to get to Duna\u0027s orbit. \u00A0Eventually, you reach one point at a specific angle that will get you to Duna for minimum propellant cost.\u00A0 Any other angle would require more propellant, and any less propellant will see you fail to reach Duna no matter where you burn.\u00A0 That point is the burn point, and that angle is the ejection angle.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is exactly the same reason why we prefer prograde/retrograde burns to radial ones for transfer manoeuvres.\u00A0 Your ejection angle tells you the right place to burn so that your eventual exit to the interplanetary\u00A0transfer orbit is as parallel to the planet\u0027s prograde/retrograde vector as possible, such that it makes the burn fuel-efficient.\u00A0 Burning off-angle is exactly the same as burning off-prograde in the more local sense.\u00A0 There may be reasons to do it (adjusting arrival times for a flotilla of probes so that you\u0027re not capture-burning all of them at the exact same time, for example), but those reasons don\u0027t often have anything to do with efficiency.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-06-26T12:42:17Z\u0022 title=\u002206/26/2020 12:42  PM\u0022 data-short=\u00224 yr\u0022\u003EJune 26, 2020\u003C/time\u003E by Zhetaan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ManEatingApe","CreatedById":151354,"CreatedDateTime":"2020-06-26T14:13:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223809802\u0022 data-ipsquote-contentid=\u0022195057\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221593162629\u0022 data-ipsquote-userid=\u0022205166\u0022 data-ipsquote-username=\u0022Rainshine\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, Rainshine said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs it that the closer your ejection angle is to 90, the (roughly) more powerful your burn is, so by burning at a wider angle, you\u0027re not going as far outward (perpendicular to the sun)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYour intuition is correct - the faster you burn, the less that Kerbin warps your orbit as you escape, so the closer your angle can be to prograde.\u003Cbr\u003E\u003Cbr\u003E\nThis is why Dres\u0027s transfer angle is closer to prograde than Duna\u0027s transfer angle. The ejection angle is \u003Cem\u003Enot\u003C/em\u003E about giving you time to make the burn; all maneuver node burns are assumed to be instantaneous. Instead it measures how much Kerbin bends your trajectory.\u003Cbr\u003E\u003Cbr\u003E\nIn real life, escape trajectories are mathematically hyperbolae. (NOTE: Technically also parabolas and in KSP there is a big exception...but more on that in a bit).\u003Cbr\u003E\u003Cbr\u003E\nThe eccentricity of a hyperbola is given by: \u003Cstrong\u003Ee = v\u003Csub\u003Ep\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E / (r\u003Csub\u003Ep\u003C/sub\u003E\u00A0\u00D7 \u03BC) - 1\u003C/strong\u003E\u003Cbr\u003E\nWhere v\u003Csub\u003Ep \u003C/sub\u003Eis your velocity at periapsis after your transfer burn, r\u003Csub\u003Ep \u003C/sub\u003Eis the radius at which you made the burn and \u03BC = GM\u003Cbr\u003E\nis the standard gravitational parameter for Kerbin.\n\u003C/p\u003E\n\u003Cp\u003E\nThe angle of the tangent to a hyperbola at infinity is related to \u003Cstrong\u003Esin\u003Csup\u003E-1\u003C/sup\u003E(1 / e)\u003C/strong\u003E and the angle relative to prograde is \u003Cstrong\u003E\u003Cspan lang=\u0022el\u0022 title=\u0022Greek language text\u0022 xml:lang=\u0022el\u0022\u003E\u03C0/2 \u002B \u003C/span\u003E sin\u003Csup\u003E-1\u003C/sup\u003E(1 / e).\u003C/strong\u003E\u003Cbr\u003E\nNow we can see that the faster we go, the greater the eccentricity and the closer the angle from prograde becomes to 90 degrees.\u003Cbr\u003E\u003Cbr\u003E\nFor example a parabola (barely escaping, eccentricity = 1) would have a angle to prograde of \u003Cstrong\u003E\u003Cspan lang=\u0022el\u0022 title=\u0022Greek language text\u0022 xml:lang=\u0022el\u0022\u003E\u03C0/2 \u002B \u003C/span\u003E sin\u003Csup\u003E-1\u003C/sup\u003E(1) = \u003Cspan lang=\u0022el\u0022 title=\u0022Greek language text\u0022 xml:lang=\u0022el\u0022\u003E\u03C0 = 180 degrees\u003C/span\u003E\u003C/strong\u003E\u003Cbr\u003E\u003Cspan lang=\u0022el\u0022 title=\u0022Greek language text\u0022 xml:lang=\u0022el\u0022\u003EIf we could go infinitely fast the angle to prograde would be \u003C/span\u003E\u003Cstrong\u003E\u003Cspan lang=\u0022el\u0022 title=\u0022Greek language text\u0022 xml:lang=\u0022el\u0022\u003E\u03C0/2 \u002B \u003C/span\u003E sin\u003Csup\u003E-1\u003C/sup\u003E(1 / \u003C/strong\u003E\u221E \u003Cstrong\u003E) = \u003Cspan lang=\u0022el\u0022 title=\u0022Greek language text\u0022 xml:lang=\u0022el\u0022\u003E\u03C0/2 \u002B \u003C/span\u003E sin\u003Csup\u003E-1\u003C/sup\u003E(0\u003C/strong\u003E\u003Cstrong\u003E) = \u003Cspan lang=\u0022el\u0022 title=\u0022Greek language text\u0022 xml:lang=\u0022el\u0022\u003E\u03C0/2 = 90 degrees\u003C/span\u003E\u003C/strong\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cspan lang=\u0022el\u0022 title=\u0022Greek language text\u0022 xml:lang=\u0022el\u0022\u003ETo see this visually here are some graphs of hyperbolae of increasing eccentricity showing the tangent line at infinity.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022pk4hCjF.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002244.25\u0022 height=\u0022504\u0022 style=\u0022width:400px;height:auto;\u0022 width=\u00221137\u0022 src=\u0022https://imgur.com/pk4hCjF.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022ki8ptHY.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002253.75\u0022 height=\u0022612\u0022 style=\u0022width:400px;height:auto;\u0022 width=\u00221137\u0022 src=\u0022https://imgur.com/ki8ptHY.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022wtwD7U3.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002248.50\u0022 height=\u0022551\u0022 style=\u0022width:400px;height:auto;\u0022 width=\u00221136\u0022 src=\u0022https://imgur.com/wtwD7U3.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022EVuP3I8.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002243.50\u0022 height=\u0022494\u0022 style=\u0022width:400px;height:auto;\u0022 width=\u00221137\u0022 src=\u0022https://imgur.com/EVuP3I8.png\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\nIn KSP however there is a big difference from reality. KSP uses patched conics, where beyond a certain radius the planet\u0027s gravity does not affect you at all. This is the planet\u0027s sphere of influence (\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E). This makes all orbits instances of the 2-body problem, which is easier to reason about mathematically. It also means that the formula for the tangent that I used earlier is \u003Cstrong\u003Ewrong when applied to KSP.\u003C/strong\u003E\u003Cbr\u003E\u003Cbr\u003E\nInstead of finding the tangent at infinity we need to find the tangent at the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E radius \u003Cstrong\u003Er\u003Csub\u003Es\u003C/sub\u003E\u003C/strong\u003E (for Kerbin 84,159,286 meters). This can be calculated by:\n\u003C/p\u003E\n\u003Cp\u003E\nSemi-major axis is: \u003Cstrong\u003Ea = r\u003Csub\u003Ep\u003C/sub\u003E / (1 - e)\u003C/strong\u003E\u003Cbr\u003E\nCosine of the eccentric anomaly (E) is: \u003Cstrong\u003Ecos(E) = (a - r\u003Csub\u003Es\u003C/sub\u003E) / (e\u00A0\u00D7 a)\u003C/strong\u003E\u003Cbr\u003E\nSlope of the tangent at radius \u003Cstrong\u003Er\u003Csub\u003Es \u003C/sub\u003E\u003C/strong\u003Eis: \u003Cstrong\u003Em = cos(E)\u00A0\u00D7 sqrt[ (1 - e\u003Csup\u003E2\u003C/sup\u003E) / (1 - cos(E)\u003Csup\u003E2\u003C/sup\u003E) ].\u003C/strong\u003E\u003Cbr\u003E\nAngle from prograde = \u003Cstrong\u003E2\u003Cspan lang=\u0022el\u0022 title=\u0022Greek language text\u0022 xml:lang=\u0022el\u0022\u003E\u03C0 - tan\u003Csup\u003E-1\u003C/sup\u003E(m)\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nInterestingly, if you examine \u003Ca href=\u0022https://alexmoon.github.io/ksp/javascripts/orbit.js\u0022 rel=\u0022external nofollow\u0022\u003Ethe source code\u003C/a\u003E for Alex Moon\u0027s solver, it approximates the tangent using the formula for the true anomaly (\u003Cstrong\u003E\u03B8\u003C/strong\u003E) at a given radius:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003Er\u003Csub\u003Es\u003C/sub\u003E\u003C/strong\u003E \u003Cstrong\u003E= a\u00A0\u00D7 (1 - e\u003Csup\u003E2\u003C/sup\u003E) / (1 \u002B e\u00A0\u00D7 cos(\u03B8))\u003C/strong\u003E\u003Cbr\u003E\u003Cstrong\u003E\u03B8\u003C/strong\u003E = \u003Cstrong\u003Ecos\u003Csup\u003E-1\u003C/sup\u003E[ (a \u00D7\u003C/strong\u003E\u00A0\u003Cstrong\u003E(1 - e\u003Csup\u003E2\u003C/sup\u003E) - r\u003Csub\u003Es\u003C/sub\u003E) / (e \u00D7 r\u003Csub\u003Es\u003C/sub\u003E) ]\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis is probably close enough.\u003Cbr\u003E\u003Cbr\u003E\nThis \u003Ca href=\u0022https://ocw.mit.edu/courses/aeronautics-and-astronautics/16-07-dynamics-fall-2009/lecture-notes/MIT16_07F09_Lec17.pdf\u0022 rel=\u0022external nofollow\u0022\u003EMIT lectures notes\u003C/a\u003E has very nice details on interplanetary transfer orbits. The Wikipedia articles on \u003Ca href=\u0022https://en.wikipedia.org/wiki/Eccentricity_(mathematics)\u0022 rel=\u0022external nofollow\u0022\u003Eeccentricity\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Hyperbolic_trajectory\u0022 rel=\u0022external nofollow\u0022\u003Ehyperbolic trajectory\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Kepler%27s_equation\u0022 rel=\u0022external nofollow\u0022\u003EKepler\u0027s equation\u003C/a\u003E, \u003Ca href=\u0022https://en.wikipedia.org/wiki/True_anomaly\u0022 rel=\u0022external nofollow\u0022\u003Etrue anomaly\u003C/a\u003E and \u003Ca href=\u0022https://en.wikipedia.org/wiki/Eccentric_anomaly\u0022 rel=\u0022external nofollow\u0022\u003Eeccentric anomaly\u003C/a\u003E are also great reading.\u003Cbr\u003E\u003Cbr\u003E\nWhat\u0027s also fun is that KSP allows you to escape from a planet with an orbit that is mathematically an ellipse, by \u0022chopping\u0022 off the top of the ellipse once you go out of \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E. In the Jool system, it\u0027s possible to transfer from Tylo to Laythe with such an orbit. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-06-26T19:24:28Z\u0022 title=\u002206/26/2020 07:24  PM\u0022 data-short=\u00224 yr\u0022\u003EJune 26, 2020\u003C/time\u003E by ManEatingApe\u003C/strong\u003E\n\u003C/span\u003E\n"}]}