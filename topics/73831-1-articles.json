{"TopicId":73831,"ForumId":32,"TopicTitle":"What\u0026#039;s KSP\u0026#039;s actual meaning of \u0026quot;closest\u0026quot; approach? It\u0026#039;s not literally the closest.","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-06-01T15:11:26Z","PageNum":1,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-06-01T15:11:26Z","Content":"\n\u003Cp\u003EIn trying to write some mod code for kOS to help with intercepts and rendezvous, I noticed that what I was calculating for the closest approach chevrons was way off from what KSP reports in the map view for the closest approach chevrons, but that when I looked carefully and checked out what I was doing, it seems that this wasn\u0027t a bug in my code like I thought it was - the approach I\u0027d found *was* actually closer than the one KSP picked. By a lot. But it wasn\u0027t necessarily a *practical* approach for intercepting because it\u0027s one that was 300 km in altitude \u0022above\u0022 the target (while the approach KSP picked was about 550 km away, but it was 550 km away down at similar altitude to the target. This sort of makes sense to me because it\u0027s easier to intercept an object from a position 550 km behind it at the same altitude than when you\u0027re closer but but directly above it.\u003C/p\u003E\u003Cp\u003EBut this raises the question of what KSP actually uses for the definition of \u0022closest\u0022 approach. It\u0027s not *really* the closest, as in finding the time T where the length of the line segment between your position at T and the target\u0027s position at T is at its minimum. That\u0027s what I solved for and I found that approach that\u0027s closer than KSP uses, but isn\u0027t practical because it\u0027s well *above* the target rather than behind or ahead of it.\u003C/p\u003E\u003Cp\u003ESo does anyone have any idea what it\u0027s using? Is it weighting the altitude difference as if it was a bigger magnitude than it really is for the sake of measuring distance? That would sort of make sense. Or is it taking the relative velocities into account too and trying to minimize some sort of score composed of both velocity difference and position difference?\u003C/p\u003E\u003Cp\u003EI just don\u0027t know, and I was wondering if anyone with lots of gameplay experience had noticed this before and found a pattern to it?\u003C/p\u003E\n"},{"CreatedByName":"SkyRender","CreatedById":10651,"CreatedDateTime":"2014-06-01T15:42:21Z","Content":"\n\u003Cp\u003EKSP is using patched conics to calculate all forms of intercept. There\u0027s a known shortcoming in KSP\u0027s patched conics in that it will often miss a \u0022first pass\u0022 closest approach in an orbit if there is any sort of potential for an encounter further along in the traced path. This is why you will see an encounter \u0022disappear\u0022 sometimes, and why you can have a much closer encounter when doing a rendezvous than you would otherwise. I unfortunately don\u0027t know the exact math that causes this to happen, but I do know how to reproduce it pretty reliably: as I said, all you need is for a potential solution further along in the orbit, and it will overwrite its memory of the first potential encounter.\u003C/p\u003E\n"}]}