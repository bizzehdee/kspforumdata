{"TopicId":117090,"ForumId":36,"TopicTitle":"[WIP][1.8.x] SSTULabs - Low Part Count Solutions (Orbiters, Landers, Lifters) - Dev Thread [11-18-18]","CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2015-07-28T18:13:57Z","PageNum":287,"Articles":[{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-10-30T19:01:17Z","Content":"\u003E \n\u003E \n\u003E 23 hours ago, Mike\u0060 said:\n\u003E \n\u003E \n\u003E As was found out some time ago, low/zero boiloff tanks are really efficient when only used for hydrogen, while another tank is used for oxygen. Now, this is rather inconvenient to do in practice, and you always have to scale the tanks equally if you need a different amount of fuel.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E So i wonder, would it be possible without too much hacking to have the low/zero boiloff modifiers only affect the hydrogen part of an mft tank, while the oxygen part remains a standard tank?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Alternatively, what about the possibility to configure it per resource in the \u0022configure containers\u0022 dialog (maybe via a dropdown per line or something)? That way, one could make the hydrogen-part low/zero bo, while one could also choose whether the oxygen part should be a standard or lightweight variant. In that case the durability of the tank would need to be determined by the weakest part. It would eliminate the need for an additional tank and would make scaling such a rocket much more convenient.\n\u003E \n\nHaving the \u0027tank modifier\u0027 affect a specific resource would be... massively painful from a coding perspective.  The entire system would need to be redone to support per-resource-tank-types, which is \u0027only\u0027 a few thousand lines of code to go through, effecting nearly every SSTU modular part.  It would require that every resource added to a tank also have a list of applicable tank types for that resource, and the user would have to set these up manually for every resource in the tank.  Really not something I\u0027m prepared to implement anytime soon.  You even brought up one of the major problems that would be encountered -- how to set the stats for a part with a tank with multiple and various tank modifiers (e.g. heat and impact tolerance).\n\nI think that part of this \u0027problem\u0027 might come down to intended use-case.  The ZBO options are mostly intended for use on pure LH2 tanks -- for long-term propellant depots or for nuclear propulsion.  In most of the cases where you would choose a LH2/LOX engine, being ascent/lifters and kerbin/earth ejection burns, the ZBO tanks make far less sense due to the short duration of storage -- minutes or hours, where the loss is negligible.  The ZBO tanks however make perfect sense for long-duration nuclear propulsion setups.\n\n\u003E \n\u003E \n\u003E 21 hours ago, Nightside said:\n\u003E \n\u003E \n\u003E Alternatively you could change it so oxidizer suffers boiloff too, as does liquid oxygen in real life.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I think there was a patch floating around somewhere...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E ...Oh yeah, it was [SRP-0](https://forum.kerbalspaceprogram.com/index.php?/topic/154041-wip122-sufficiently-realistic-progression-zero/)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     \u002BSSTU_RESOURCEBOILOFF[LqdHydrogen]:AFTER[SSTU]\n\u003E     {@name = Oxidizer@value *= 0.0216189// LOX hsp/LH2 hsp * LOX density/Oxidizer density, probably not right but should do it.@cost *= 0.1650114 // Oxygen boiling point/Hydrogen boiling point * LOX density/Oxidizer density, probably not right too but gameplay-wise its serviceable.\n\u003E     }\n\u003E \n\n^^^\n\nI think that is probably a better \u0027solution\u0027 to the ZBO tank-modifier problems.  Let it cool the oxidizer as well ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)  (of course, then you need to be prepared to stop using standard \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E engines for long-duration missions unless you also use the ZBO tanks).\n\n\u003E \n\u003E \n\u003E 20 hours ago, Jimbodiah said:\n\u003E \n\u003E \n\u003E Does boil-off work at high-warps at all; i.e. empty tanks for no reason on zbo tanks?\n\u003E \n\nAs others had hinted, it entirely depends on how much EC reserve you have (due to KSPs timewarp resource handling).  Basically you need to have enough EC reserve for the largest processing tick for all subsystems; at 1000 and 10000x warp rates, this can be quite a bit of EC (thousands).\n\nThe best method is to un-focus the craft.  Make sure you have adequate EC income, and go back to the space-center for timewarping.  I\u0027ve deliberately left the simulation... un-simulated... for unfocused craft.  If you had enough EC income when you were last in control, it assumes the EC income was sufficient for the duration of the uncrontrolled period, and processes boiloff accordingly (so if it were ZBO, you should have zero loss).\n\nIn general development news:\n\nAs the geometry (models) for the new LC fuel tanks is nearly finished, I\u0027ve started working through the textures a bit.  Also continuing work on getting the rest of the PBR testing pack ready (F1/J2/SC-B/MFT-AB), and should hopefully have it available this weekend.\n\nThis is the point at which I need to determine what my \u0027texturing style\u0027 will be for the PBR texture sets.  Working with Substance Painter I have the opportunity to make my textures amazingly consistent between the different models -- consistent texture resolution (texture detail), consistent amounts of grunge and wear, and consistent coloring/materials.  I just need to determine what level of each to use, make some notes, and get to work (well, and more practice with using SP of course... still learning).  Throughout this week I\u0027ll be working on some samples of the tank textures to post up for feedback -- will be determining both what material types to include for standard texture sets (metals/foams/paints/foils), as well as the specific \u0027details\u0027 in the textures (wear/grunge).\n\nAnother opportunity I have with the PBR textures is to increase the overall texture resolution used on the models.  With Substance Painter it extremely simple to output higher-res textures (whereas with GIMP you pretty much have to author it at the intended resolution).  Combined with the availability of 64-bit clients and the constant increase in RAM on gfx cards, and doubling the texture resolution for the PBR textures would seem entirely reasonable.  The PBR shaders also -love- higher res textures... the higher the better; this is where a large majority of the surface detail comes from (high-res normal maps).  I feel that I also have to point out that the PBR textures will be put released as a separate stand-alone expansion to SSTU... so those with less powerful systems (or simply wanting the old aesthetics) can continue to use the standard/legacy textures.  -I- want high-res textures and nice looking parts, and have a computer that can handle it (the graphics/textures at least), so that is most likely what I\u0027m going to do.\n\nI intend on continuing to use and create textures for the existing \u0027recoloring\u0027 shader to be included in the base SSTU distribution.  The number of options will likely decrease for most parts though, with only 1-2 basic texture/mask sets being available that use the legacy shader (e.g. the existing MFT tanks would go from ~12 sets down to ~2 or 3).  This should result in a much smaller release file size and faster load times with fewer textures to load.  Many of the textures that simply don\u0027t look right under the legacy system will be removed entirely (gold, silver; both being moved to PBR only), with the majority of the remainders being the standard colored/painted textures and perhaps an orange-foam option for some parts.\n\nRecoloring PBR -- still working through exactly how I want to put the system together.  I would like to keep it as close to the existing recoloring setup as possible -- for re-use of existing code, and consistent user-interface and experience.  Looking at the textures that I\u0027m getting out of SP so far, it doesn\u0027t look like it would be too much of a problem for very basic texture setups (being mostly a flat diffuse color).  The problem comes with the details -- grunge and wear.  These both add inconsistencies to the diffuse texture as far as highlights/shading, but the real problem is that they can often change the actual diffuse base color -- something that the recoloring system cannot easily cope with (it only handles a single color with minor saturation/value adjustments).\n\nPotential solutions to the \u0027detail\u0027 problem include adding yet another diffuse texture slot to confer the detail coloring (or using the Unity Standard Shader \u0027detail\u0027 texture slots), or simply living with the tinting of the details whenever the base texture is recolored (e.g. brown dirt would have a blue tint on a \u0027blue\u0027 colored tank).   Possibly even just assuming the \u0027diffuse\u0027 texture is the detail texture, and applying that over-top of the masked texture?  (seems like that would still result in tinted details).  None of this is a problem with the current recoloring solution as it truly is a one-color setup;  the color the user specifies is the color used for that material -- the \u0027detail\u0027 is purely highlight/shadow based with zero change in color from the grunge or wear.\n\nAnother potential solution might be to use the mask texture itself to determine the detail input from the diffuse texture.  Currently most masks are either R,G,B, or Black, with little-to-no intermediate values.  This doesn\u0027t necessarily have to be the case.  Take the R channel for example -- if the R channel for a pixel is 1, it means that 100% of the coloring for that pixel comes from the users specified \u0027Main Color\u0027; but what if it only had a value of 0.7?  That would represent that only 70% of the color comes from the users \u0027Main Color\u0027, with the remainder 30% coming from either the main diffuse texture or another user-color-channel.  If I were to do some...interesting... math in the shader, I should in theory be able to use the user-specified color as the \u0027background\u0027 and apply the diffuse-texture as an overlay on top of the user-color by assuming that the diffuse-textures\u0027 base-color is a \u0027transparency\u0027 (or even use an actual alpha channel..?).   Hmm....\n\nYeah, big wall of text; seems about usual for my development posts, eh?"},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2017-10-30T19:17:16Z","Content":"Higher textures are always welcome."},{"CreatedByName":"Theysen","CreatedById":144656,"CreatedDateTime":"2017-10-30T19:30:07Z","Content":"RE: boiloff on the stock oxidizer. \n\nI don\u2019t think it is a good addition bending the little Realism stock resembles with the fuel resources even further. Understanding it as something in the realms of Aerozine / NTO which are used because - well - they don\u2019t boil off in the real world. Then I\u2019d suggest argumenting loss over time with bad valves ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)"},{"CreatedByName":"T-10a","CreatedById":176203,"CreatedDateTime":"2017-10-30T19:53:29Z","Content":"\u003E \n\u003E \n\u003E 25 minutes ago, Theysen said:\n\u003E \n\u003E \n\u003E RE: boiloff on the stock oxidizer. \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I don\u2019t think it is a good addition bending the little Realism stock resembles with the fuel resources even further. Understanding it as something in the realms of Aerozine / NTO which are used because - well - they don\u2019t boil off in the real world. Then I\u2019d suggest argumenting loss over time with bad valves ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)\n\u003E \n\nI get what you\u0027re talking about. It could a modulemanager patch to replace Oxidiser with LqdOxygen and LiquidFuel with Kerosene for SSTU engines (and related verniers/other engines in stock) instead,  to ensure stock behaviours of \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E tank parts are untouched for compatibility reasons, while maintaining the \u0027realism\u0027 aspect of Kerolox in SSTU.\n\nThen again, it is an unofficial patch by fans so it\u0027s not really a thing Shadowmage has to worry about implementing into the mod itself.\n\n**Edited \u003Ctime datetime=\u00222017-10-30T19:55:55Z\u0022 title=\u002210/30/2017 07:55  PM\u0022 data-short=\u00226 yr\u0022\u003EOctober 30, 2017\u003C/time\u003E by T-10a**"},{"CreatedByName":"captinjoehenry","CreatedById":163669,"CreatedDateTime":"2017-10-30T23:18:24Z","Content":"My favorite part from this mod is the reentry orion esk capsule.  It is all in one command module which is easy to use and is all in one.  \n\nMy favorite part though is the parachutes being set to trigger at altitude not pressure.  Honestly I would adore having some parachutes and drogue shoots that are stand alone as having them trigger at an altitude makes them so wonderful to use.  You can arm them during reentry and not spend a year waiting to land."},{"CreatedByName":"Pappystein","CreatedById":85755,"CreatedDateTime":"2017-10-31T00:06:47Z","Content":"\u003E \n\u003E \n\u003E 53 minutes ago, captinjoehenry said:\n\u003E \n\u003E \n\u003E My favorite part from this mod is the reentry orion esk capsule.  It is all in one command module which is easy to use and is all in one.  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E My favorite part though is the parachutes being set to trigger at altitude not pressure.  Honestly I would adore having some parachutes and drogue shoots that are stand alone as having them trigger at an altitude makes them so wonderful to use.  You can arm them during reentry and not spend a year waiting to land.\n\u003E \n\nYou might want to check out REALCHUTE by stupid\\_chris\n\nNot only does it add new chutes almost all parachutes can be adjusted after installation of this mod.   IE material, Altitude vs pressure  deployment, what altitude you deploy at etc.   Designed so parachutes will function close to real life.\n\n**Edited \u003Ctime datetime=\u00222017-10-31T00:11:49Z\u0022 title=\u002210/31/2017 12:11  AM\u0022 data-short=\u00226 yr\u0022\u003EOctober 31, 2017\u003C/time\u003E by Pappystein**"},{"CreatedByName":"Temeter","CreatedById":58056,"CreatedDateTime":"2017-10-31T12:17:56Z","Content":"You can setup deploy altitude and arming for stock parachutes too."},{"CreatedByName":"captinjoehenry","CreatedById":163669,"CreatedDateTime":"2017-10-31T16:13:47Z","Content":"\u003E \n\u003E \n\u003E 16 hours ago, Pappystein said:\n\u003E \n\u003E \n\u003E You might want to check out REALCHUTE by stupid\\_chris\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Not only does it add new chutes almost all parachutes can be adjusted after installation of this mod.   IE material, Altitude vs pressure  deployment, what altitude you deploy at etc.   Designed so parachutes will function close to real life.\n\u003E \n\nTrue but I honestly don\u0027t want or need all the other features of REALCHUTES.  In addition I have a bunch of mod added parachutes that don\u0027t have configs for REALSHUTE\n\n\u003E \n\u003E \n\u003E 3 hours ago, Temeter said:\n\u003E \n\u003E \n\u003E You can setup deploy altitude and arming for stock parachutes too.\n\u003E \n\nYes but the issue is them deploying.  The pressure setting for that is hugely annoying to deal with and if you come down on high alt terrain it\u0027ll kill you.  Just having it all set at an altitude above the ground works a lot better and easier."},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2017-10-31T18:28:44Z","Content":"Been there. Done that. Got the heart attack.  \n  \n![mountain_landing.jpg](http://jimbodiah.com/ksp/mountain_landing.jpg)"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-01T05:57:38Z","Content":"Getting closer.... (A/B fuel tank basic striped PBR textures, experimenting with some wear and weathering)\n\n![q7nfN1U.png](https://i.imgur.com/q7nfN1U.png)![vRoEfhq.png](https://i.imgur.com/vRoEfhq.png)\n\nMounts/fairings/decouplers do not yet have Standard-shader enabled setups, but should be able to come up with something for them, at least for a few test pieces.  Contrast the shading on the white fuel tanks vs. the white fairings... quite the difference.  Also a fairly notable difference even on the black striping, though some of that is probably due to me not matching up the colors very well.\n\nToday\u0027s code-and-config dev work was spent splitting off all of the shader loading code and a large portion of the texture-set code into a separate plugin.  As it was all so deeply integrated into the texture-set handling code, the recoloring system also found its way into the stand-alone shader plugin.  The in-dev name: KSPShaderTools -- but I need to come up with something better before its official stand-alone release.  It will be included in all future SSTU releases, and in fact the SSTU plugin now depends on it in order to load (linked/referenced).\n\nIt will include the following functions, available to any mod who wants to include the KSPShaderTools.dll (no extra code required):\n\n- Loads asset-bundles containing .shader files.\n    - The asset bundles are specified through config file, and should be capable of loading standard KSP asset bundles with custom extensions.\n    - Supports loading of per-platform bundles, or \u0027universal\u0027 bundles -- either can be specified in the config.\n    - Shaders are made available through the GameDatabase.shaders(sp?) list once loaded, and other mods can retrieve them from there without compile-time references/linking.\n- Apply specific shaders/textures/TextureSets to models in the GameDatabase\n    - Config file based - highly configurable - uses TextureSet syntax and config node layout (see below)\n    - Basically does what TextureReplacer does... but only for part models.\n    - No in-editor texture-switching supported for this method; intended for stand-alone texture/shader replacement patches\n- Supports using special \u0027icon\u0027 shaders to fix part-icon rendering for non-KSP shader setups.\n    - The mapping of these is defined through config files and applied automatically to all parts using the specified shaders.\n    - Icon shaders should be supplied by the author of the corresponding part shader.\n    - Icon shaders have/will be included for the legacy and pbr masked/recoloring shaders.\n- Included Shaders:\n    - SSTU/Masked \u0027Recoloring\u0027 shader.  This is the current recoloring shader available in the SSTU releases.\n    - SSTU/Standard shader.  Direct port of the metallic/gloss Unity Standard shader (PBR).\n        - Only a single variant is currently available (with NRM and MET maps enabled, GLOW disabled); additional named variants will likely be made available.\n    - SSTU/StandardMasked shader.  Recolorable version of the Standard shader. (WIP...)\n- Configurable ReflectionManager -- updates ReflectionProbe cubemaps.  Needed by the Standard shader variants in order to effect proper lighting.\n    - Resolution, frequency, and other quality/performance settings can be adjusted through config files (possibly in-game config GUI / KSP-mod-config menu)\n    - Can be provided with pre-rendered environment maps to disable runtime reflection updates (none included, must be provided by user/other mods) (WIP)\n        - In the future this may be enhanced to allow for situation-dependent switching of pre-baked environment maps (performance optimization, but lose real-time reflection updates)\n- TextureSet system - config based texture set definitions\n    - Supports loading of arbitrary texture slot names - any target texture slot name can be specified, not limited to those used by KSP shaders\n    - Supports use of any shader that is currently loaded, including the standard KSP/Diffuse and other common shaders.\n    - Supports shader property assignment - such as Color or float property values in shaders (e.g. \\_Shininess or \\_SpecularColor).\n    - Each texture set can have multiple texture/mesh specifications, fully supporting complex texture sharing setups or use of different shaders for specific meshes in a complex model.\n- KSPTextureSwitch PartModule -- loads config-defined texture sets and applies them to model, with user capability to switch sets in editor/flight.\n    - Supports multiple texture-switch modules on a part; each may be responsible for different meshes/sub-models.\n    - If recoloring is used, each texture-switch module gets its own \u0027section\u0027 in the recoloring GUI (with its own main/second/detail channels).\n    - Nearly an exact port of the SSTUTextureSwitch module (used on the ShipCore pods).\n- KSPRecoloringGUI PartModule -- adds the \u0027open recolor GUI\u0027 button to a part.  Needed in order to use the recoloring features.  Only available in the editor (WIP - make it usable in flight through config)\n- Short list of color presets for use in the recoloring system, which can be easily expanded or adjusted through additional configs or patches.\n\nWhen used as a compile-time dependency (as an API) it additionally includes a few utility interface and allows access to the TextureSet system and through that the recoloring system.  Additional plugin code would be required for external mods to use the system in model-switch setups or to use the more advanced functions of the recoloring system and texture set system.\n\nIt will not include any textures or config files beyond the basic framework for recoloring and reflection setups.  It is intended as a lightweight mod/API that other mods may include in their distributions where they are supplying the \u0027content\u0027 (textures/more shaders/etc)."},{"CreatedByName":"T-10a","CreatedById":176203,"CreatedDateTime":"2017-11-01T20:05:35Z","Content":"\u003E \n\u003E \n\u003E 14 hours ago, Shadowmage said:\n\u003E \n\u003E \n\u003E The in-dev name: KSPShaderTools -- but I need to come up with something better before its official stand-alone release.  It will be included in all future SSTU releases, and in fact the SSTU plugin now depends on it in order to load (linked/referenced).\n\u003E \n\nMaybe call it KSPUmbrella or something along those lines? Because umbrellas (or parasols) can provide shade, and your tool provides shaders to other modders."},{"CreatedByName":"NotTheRealRMS","CreatedById":172906,"CreatedDateTime":"2017-11-02T04:46:49Z","Content":"A coding question regarding SSTUVolumeContainer, more specifically this line in VolumeContainer.cs in SSTUTools/Util and every other value that is derived from it, related to how configs or players can define unit ratios in a given tank:\n\n            /// \n            /// Current user or config specified unit ratio for this resource\n            /// \n            public int unitRatio { get { return ratio; } }\n\nWhy did you use int instead of float for those? Is there a performance or stability reason for not supporting decimal values there?\n\nI know it is not really a big deal. Just curious."},{"CreatedByName":"vossiewulf","CreatedById":179033,"CreatedDateTime":"2017-11-02T11:39:40Z","Content":"\u003E \n\u003E \n\u003E On 10/31/2017 at 10:57 PM, Shadowmage said:\n\u003E \n\u003E \n\u003E Getting closer.... (A/B fuel tank basic striped PBR textures, experimenting with some wear and weathering)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![q7nfN1U.png](https://i.imgur.com/q7nfN1U.png)](https://i.imgur.com/q7nfN1U.png \u0022Enlarge image\u0022)[![vRoEfhq.png](https://i.imgur.com/vRoEfhq.png)](https://i.imgur.com/vRoEfhq.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It will include the following functions, available to any mod who wants to include the KSPShaderTools.dll (no extra code required):\n\u003E \n\u003E \n\u003E \n\u003E - Loads asset-bundles containing .shader files.\n\u003E     - The asset bundles are specified through config file, and should be capable of loading standard KSP asset bundles with custom extensions.\n\u003E     - Supports loading of per-platform bundles, or \u0027universal\u0027 bundles -- either can be specified in the config.\n\u003E     - Shaders are made available through the GameDatabase.shaders(sp?) list once loaded, and other mods can retrieve them from there without compile-time references/linking.\n\u003E - Apply specific shaders/textures/TextureSets to models in the GameDatabase\n\u003E     - Config file based - highly configurable - uses TextureSet syntax and config node layout (see below)\n\u003E     - Basically does what TextureReplacer does... but only for part models.\n\u003E     - No in-editor texture-switching supported for this method; intended for stand-alone texture/shader replacement patches\n\u003E - .............\n\u003E - Short list of color presets for use in the recoloring system, which can be easily expanded or adjusted through additional configs or patches.\n\u003E \n\nOne, looks officially Rave Burger double bacon and cheese awesome. Two, I gotta really be careful with these suggestions. I think I mentioned that you might want to think about making it available to other modders, and you haven\u0027t just made it available but built a slew of features to make it easy for folks to use and made it all config-driven. You\u0027re pretty close to it making sense to make it at least shareware, and considering it will make someone\u0027s mods MUCH better with a minimum of work and potentially transform the appearance of KSP, some consistent contributions would be pretty justified for all the R\u0026D."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-02T14:26:42Z","Content":"\u003E \n\u003E \n\u003E 9 hours ago, NotTheRealRMS said:\n\u003E \n\u003E \n\u003E A coding question regarding SSTUVolumeContainer, more specifically this line in VolumeContainer.cs in SSTUTools/Util and every other value that is derived from it, related to how configs or players can define unit ratios in a given tank:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E             /// \n\u003E             /// Current user or config specified unit ratio for this resource\n\u003E             /// \n\u003E             public int unitRatio { get { return ratio; } }\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Why did you use int instead of float for those? Is there a performance or stability reason for not supporting decimal values there?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I know it is not really a big deal. Just curious.\n\u003E \n\nThere -was- a reason behind it, which is no longer valid.  It could likely be changed to a float and probably wouldn\u0027t have too much impact.  Would have to do some deep code analysis to know for certain though.  (feel free to play around with it; PRs welcome)\n\nHistory:  Originally I had intended it so that the fuel tanks would only ever hold resources in discrete whole Unit chunks.  Using an integer ratio greatly simplified the code-side math needed to find the closest matching resource unit quantity for any given tank volume; but more importantly it let it work with multiple resources in a very clean and simple fashion.  Much more of a simplification than an optimization (though integer math generally is very fast; unsure on the difference between int/float math under modern processors; used to be int was magnitudes faster).\n\n\u003E \n\u003E \n\u003E 2 hours ago, vossiewulf said:\n\u003E \n\u003E \n\u003E One, looks officially Rave Burger double bacon and cheese awesome. Two, I gotta really be careful with these suggestions. I think I mentioned that you might want to think about making it available to other modders, and you haven\u0027t just made it available but built a slew of features to make it easy for folks to use and made it all config-driven. You\u0027re pretty close to it making sense to make it at least shareware, and considering it will make someone\u0027s mods MUCH better with a minimum of work and potentially transform the appearance of KSP, some consistent contributions would be pretty justified for all the R\u0026D.\n\u003E \n\n![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)  I believe in \u0027everything should be configurable\u0027.  This is both for my benefit, and for the end-user (or other modders).  The more config-driven the setup is, the less often you will find yourself needing to recompile for simple changes.  Recompiling (moreso the restarting of KSP) to test changes can eat up a ton of time.  Is also why I do my models and texture setup the way I do (with lots of configs) -- I\u0027m really not a fan of using the Unity editor, and have built in every method I can think of to avoid its use as much as possible (e.g. config-defined emissive animation module).\n\nNow just need to find some other modders who are onboard with using PBR textures/shading, so that my parts aren\u0027t all alone with their shiny new look.  I\u0027ll possibly work on converting KerbalFoundries myself... though that one will be difficult as I don\u0027t have the sources for the existing textures (er.. maybe?  will have to look through what I have, pretty sure its just finished textures)."},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2017-11-02T15:03:03Z","Content":"[@CobaltWolf](https://forum.kerbalspaceprogram.com/index.php?/profile/105588-cobaltwolf/)  [@Nertea](https://forum.kerbalspaceprogram.com/index.php?/profile/83952-nertea/) [@RoverDude](https://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/)  [@Angel-125](https://forum.kerbalspaceprogram.com/index.php?/profile/106975-angel-125/)  [@Beale](https://forum.kerbalspaceprogram.com/index.php?/profile/70533-beale/)    ^ \n\n**Edited \u003Ctime datetime=\u00222017-11-02T15:08:17Z\u0022 title=\u002211/02/2017 03:08  PM\u0022 data-short=\u00226 yr\u0022\u003ENovember 2, 2017\u003C/time\u003E by Jimbodiah**"},{"CreatedByName":"RedParadize","CreatedById":129285,"CreatedDateTime":"2017-11-02T17:05:08Z","Content":"[@Jimbodiah](https://forum.kerbalspaceprogram.com/index.php?/profile/152759-jimbodiah/) I am not sure I would have done that. But that\u0027s pretty much the list I would have come up with!"},{"CreatedByName":"CobaltWolf","CreatedById":105588,"CreatedDateTime":"2017-11-02T18:12:31Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, Jimbodiah said:\n\u003E \n\u003E \n\u003E [@CobaltWolf](https://forum.kerbalspaceprogram.com/index.php?/profile/105588-cobaltwolf/)  [@Nertea](https://forum.kerbalspaceprogram.com/index.php?/profile/83952-nertea/) [@RoverDude](https://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/)  [@Angel-125](https://forum.kerbalspaceprogram.com/index.php?/profile/106975-angel-125/)  [@Beale](https://forum.kerbalspaceprogram.com/index.php?/profile/70533-beale/)    ^\n\u003E \n\nSorry, as much as I love and respect ShadowMage\u0027s work on this I can\u0027t see myself remaking everything for a PBR workflow unless it was generally adopted."},{"CreatedByName":"Beale","CreatedById":70533,"CreatedDateTime":"2017-11-02T18:13:17Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, Jimbodiah said:\n\u003E \n\u003E \n\u003E [@CobaltWolf](https://forum.kerbalspaceprogram.com/index.php?/profile/105588-cobaltwolf/)  [@Nertea](https://forum.kerbalspaceprogram.com/index.php?/profile/83952-nertea/) [@RoverDude](https://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/)  [@Angel-125](https://forum.kerbalspaceprogram.com/index.php?/profile/106975-angel-125/)  [@Beale](https://forum.kerbalspaceprogram.com/index.php?/profile/70533-beale/)    ^\n\u003E \n\nSee above.\n\nPBR is awesome, (seriously @shadowmage nice job), but it\u0027s more work than I can handle right now.\n\n**Edited \u003Ctime datetime=\u00222017-11-02T18:13:55Z\u0022 title=\u002211/02/2017 06:13  PM\u0022 data-short=\u00226 yr\u0022\u003ENovember 2, 2017\u003C/time\u003E by Beale**"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-02T19:42:19Z","Content":"![YxOymYC.png](https://i.imgur.com/YxOymYC.png)\n\nFirst pass of testing a \u0027recolorable\u0027 PBR shader.  This is a flat plane using a \u0027gold metallic\u0027 base texture, with a fairly strong layer of light-brown dirt noise applied to it.\n\nBottom-Left = Unity-Standard shader - standard texture; color baked into albedo/diffuse map (same texture as top-left).  Control sample.  \n\nTop-left = SSTU-Standard shader - standard texture; color baked into albedo/diffuse map  \n\nTop-Right = STU-StandardRecolorable shader -- gray base texture, color added through shader to match the standard texture output  \n\nBottom-Right = STU-StandardRecolorable shader -- gray base texture, color added through shader - recolored with red tint, colored stripes added to base texture (stripes are flat colored; the variations are caused by the differences in MET/SMOOTH maps).  There is a slight undesired tinting to the colored stripes that I\u0027m unsure I\u0027ll be able to completely remove (note the blue stripe looks slightly purple), but I\u0027ve got a few ideas to investigate.\n\nThe most noticeable differences in the samples compared to the Unity Standard shader are mostly from the lighting angle.  As long as the inputs are setup appropriately, the recoloring shader does allow for adding of colored dust/etc effects, while mostly maintaining accuracy towards the original texture colors.\n\n\u003E \n\u003E \n\u003E 1 hour ago, CobaltWolf said:\n\u003E \n\u003E \n\u003E Sorry, as much as I love and respect ShadowMage\u0027s work on this I can\u0027t see myself remaking everything for a PBR workflow unless it was generally adopted.\n\u003E \n\n\u003E \n\u003E \n\u003E 1 hour ago, Beale said:\n\u003E \n\u003E \n\u003E See above.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E PBR is awesome, (seriously @shadowmage nice job), but it\u0027s more work than I can handle right now.\n\u003E \n\nPretty much the responses I was expecting -- I\u0027m under no illusion that PBR will be widely adopted in KSP until/unless it is supported (and used) by the stock models/textures.  Creating textures is a ton of work; PBR textures potentially even more so.  I fully understand the reasons to stay with the current KSP shaders and texturing process, and can\u0027t hold it against anyone.  My intent is not to \u0027push\u0027 this system on anyone, but merely make it available to those who wish to use it."},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2017-11-03T02:03:20Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, RedParadize said:\n\u003E \n\u003E \n\u003E [@Jimbodiah](https://forum.kerbalspaceprogram.com/index.php?/profile/152759-jimbodiah/) I am not sure I would have done that. But that\u0027s pretty much the list I would have come up with!\n\u003E \n\nIt was for a good cause  ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)"},{"CreatedByName":"RedParadize","CreatedById":129285,"CreatedDateTime":"2017-11-03T14:18:53Z","Content":"[@Jimbodiah](https://forum.kerbalspaceprogram.com/index.php?/profile/152759-jimbodiah/) Didn\u0027t cost anything. And who knows, maybe one day they will see the light!   \n\nAs said, it is a considerable amount of work to convert everything. The people tagged have a long long list of part in their inventory. I can\u0027t imagine how much work it is to maintain whats already in place, let alone upgrading everything. Maybe with allot of help... I have a little more hope for brand new mods."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-03T16:04:44Z","Content":"One of the red and one of the silver panels are done using the recoloring shader.  Which one is it?  (the others were exported with specific colors and use the Standard shader)\n\n![FuIfFkK.png](https://i.imgur.com/FuIfFkK.png)\n\nSpoiler\n\nRed = center was recolored, silver = left was recolored\n\nWhile its not 100% accurate... I think this will be acceptable, especially given that most of the textures that SSTU will use are black/white/gray/silver based.  Need to find a way to restore the \u0027saturation\u0027 of the dust layer though; something about how it is blended renders it mostly grayscale looking.  Sadly to do this it required that I export the albedo texture as a detail mask (trasparent background), and apply it through alpha blending in the shader.  Not sure how easy it will be to use that method in SP in the long run, and I know for certain that it will result in far less interesting/detailed textures and result in textures that are unusable with any other shader setup.  Have one or two more ideas to try..\n\nIs seeming like I\u0027m going to end up going very simple/old-school on the recoloring setup for PBR.  Create the base textures in whatever fashion is most appropriate for the texture, and use standard color tinting to effect the recoloring.  This will of course render some textures more suitable to recoloring than others.... (silver/white will recolor better than gray/black; textures with a base color will not tint well at all, details in textures will become tinted), but I didn\u0027t do all the work to get the PBR shaders working just so I could not use a large portion of the capabilities and spend a bunch of extra time in a non-standard workflow to create non-standard textures just for recoloring.  I already have a very functional recoloring shader which will continue to be around -- so if you want to recolor your rocket, use the legacy recoloring shader; if you want nicer looking shading, use the PBR shaders.  If you want to tint the colors on the PBR shader.. that will likely be available as well... but will be entirely secondary to having nice looking and detailed textures when not tinted.\n\nOne final bit that I\u0027m going to investigate... and this would be the real \u0027holy grail\u0027 for my purposes.... is Unity\u0027s use of Substances at the game-engine level.  From what I understand you can import a substance-material into Unity and use it to generate the textures for the PBR shader at runtime.  If specific parameters can be exposed properly from the substance (such as base-color), and it supports an entire layered material stack as setup in substance-painter.... it means I could simply design the materials themselves, expose the color inputs/etc to UI code, and actually generate the properly colored textures from the ground up, right at runtime.  This will likely be my research project for the day, and probably should have been one of the first things I looked at."},{"CreatedByName":"RedParadize","CreatedById":129285,"CreatedDateTime":"2017-11-03T16:32:10Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/)You probably already know that. But color can\u0027t be the same, its not a technical issue, its the nature of the process. One sides have coloring imput that the other do not have. So, say you match the color in \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E, well they will not look the same if you take it to the moon. So don\u0027t fight it."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-03T21:37:32Z","Content":"Did a fair bit of research into the use of Substances in Unity and it looks like they are not very well suited for use on character models/props, being more intended for use for terrain and large tiled spaces.  What I might be able to use them for would be the fairing/decoupler/probe core textures.  As my current focus is on the regular part textures I\u0027m going to look into this more in the future after I\u0027ve become more familiar with the PBR workflow and use of Substance Painter/Designer.  In the interim I am going to make up some PBR textures for them but they will likely be simple/static setups (not much interesting stuff that you can do with a flat plane).\n\nOn the subject of fairings... last weeks\u0027 KSP dev notes stated that there will finally be a fix for the strange UV mapping that the stock fairings use coming with KSP 1.4 -- meaning that I\u0027ll finally be able to use the striped/patterned textures on the stock-fairing based parts as well.  Yay for progress ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nHoping to put together an updated PBR test release over the weekend, as well as the first SSTU release with the shader loader split off as a separate dependency (boo for more folders inside GameData... but unavoidable).  Should contain updated F-1, J-2, SC-B, a few engine mounts, and MFT-A/B textures for a mostly complete Saturn-V stack for testing purposes.  Should also contain the \u0027finished\u0027 models for the reworked MFT-L fuel tanks and a small selection of sample textures.  I should note that the textures in the current/upcoming PBR \u0027test release\u0027 are only a crude representation of what the finished textures will look like; I\u0027m still rapidly learning how to use the new tools and refining my processes and procedures (as well as still working on the shader and recoloring systems).  Should be able to start finalizing the look of the initial parts here in a few weeks; from there it will just be the long grind to re-texture \u0027all the things\u0027."},{"CreatedByName":"vossiewulf","CreatedById":179033,"CreatedDateTime":"2017-11-04T00:22:08Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, Shadowmage said:\n\u003E \n\u003E \n\u003E it means I could simply design the materials themselves, expose the color inputs/etc to UI code, and actually generate the properly colored textures from the ground up, right at runtime.\n\u003E \n\nDingDingDING we HAVE a winner! That\u0027s definitely the workflow you want, I hope you can make it work."}]}