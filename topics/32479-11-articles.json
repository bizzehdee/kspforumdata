{"TopicId":32479,"ForumId":36,"TopicTitle":"The L.O.G. Multiplayer Project","CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2013-06-11T19:57:07Z","PageNum":11,"Articles":[{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-10-11T15:33:43Z","Content":"\n\u003Cp\u003EThat leads back to the question: \u0022What is a server time, if every player can be in a totally different time?\u0022\u003C/p\u003E\u003Cp\u003EI guess its the time the server suggests when you want to launch a new mission. In that case its not really a problem. Well, it is if you want to play together, but you might can ignore it and set your own launch date anyway. It does not make sense to do anything else. Imagine a vessel on a decent course and you have a disconnect. Why should the server do anything and not simply allow you to continue where you dropped out, if every player (or even vessel) can be in its own time anyway?\u003C/p\u003E\n"},{"CreatedByName":"Bobhendly","CreatedById":70841,"CreatedDateTime":"2013-10-11T16:43:45Z","Content":"\n\u003Cp\u003EThe time warp solution seems far too complex..\u003C/p\u003E\n"},{"CreatedByName":"CaptainBullet","CreatedById":84676,"CreatedDateTime":"2013-10-11T16:47:54Z","Content":"\n\u003Cp\u003EOk, now I\u0027m confused. I\u0027m not sure if I actually got the idea:\u003C/p\u003E\u003Cp\u003EThere is a server that runs the game, as if you would play normally, with interactions and everything, and the clock (the one in the tracking station in the upper left corner) keeps running, even if you log out or go to the VAB/SPH -\u0026gt; thats what I meant by server time. All nice and well as long as noone tries to timewarp. Nothing new so far, works as in Minecraft or any other serverbased multiplayer. Now L.O.G. comes along and makes timewarp possible by saying: if you get ahead of servertime by timewarp, your movement is written to a log and replaid on the server, so everyone else can go on playing in servertime. \u003C/p\u003E\u003Cp\u003Eand when noone watches, the server skips some time, so that you don\u0027t have to actually wait half a year for your (pre recorded) probe to reach ... Elo or whatever. \u003C/p\u003E\u003Cp\u003EQuestion is how much does the server skip. Does it jump to the point in time, when the longest prerecording ends and \u003Cem\u003Eall\u003C/em\u003E vessels are in servertime again without a log to be replaid, or to the point where the shortest log ends and the server catched up with the \u003Cem\u003Efirst\u003C/em\u003E vessel that runs out of prerecorded gametime.\u003C/p\u003E\u003Cp\u003EI though its the latter, but now while I\u0027m thinking about it, the first would also work, having completely different consequences though.\u003C/p\u003E\u003Cp\u003EDamn, messing around with time makes things really complicated :/\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-11T16:50:35Z\u0022 title=\u002210/11/2013 04:50  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 11, 2013\u003C/time\u003E by CaptainBullet\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"PringleMan","CreatedById":1396,"CreatedDateTime":"2013-10-11T17:16:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CaptainBullet\u0022 data-cite=\u0022CaptainBullet\u0022\u003E\u003Cdiv\u003EOk, now I\u0027m confused. I\u0027m not sure if I actually got the idea:\u003Cp\u003EThere is a server that runs the game, as if you would play normally, with interactions and everything, and the clock (the one in the tracking station in the upper left corner) keeps running, even if you log out or go to the VAB/SPH -\u0026gt; thats what I meant by server time. All nice and well as long as noone tries to timewarp. Nothing new so far, works as in Minecraft or any other serverbased multiplayer. Now L.O.G. comes along and makes timewarp possible by saying: if you get ahead of servertime by timewarp, your movement is written to a log and replaid on the server, so everyone else can go on playing in servertime. \u003C/p\u003E\u003Cp\u003Eand when noone watches, the server skips some time, so that you don\u0027t have to actually wait half a year for your (pre recorded) probe to reach ... Elo or whatever. \u003C/p\u003E\u003Cp\u003EQuestion is how much does the server skip. Does it jump to the point in time, when the longest prerecording ends and \u003Cem\u003Eall\u003C/em\u003E vessels are in servertime again without a log to be replaid, or to the point where the shortest log ends and the server catched up with the \u003Cem\u003Efirst\u003C/em\u003E vessel that runs out of prerecorded gametime.\u003C/p\u003E\u003Cp\u003EI though its the latter, but now while I\u0027m thinking about it, the first would also work, having completely different consequences though.\u003C/p\u003E\u003Cp\u003EDamn, messing around with time makes things really complicated :/\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBasically it will run the physics on rails for the vessels and simulate all of the vessels to a common sync point. The earliest common sync would probably be the best in order to help prevent probes from crashing into moons during the on-rails simulation though.\u003C/p\u003E\u003Cp\u003ESo for example, player B and player A launch at the same server epoch (common point of time reference) and do whatever they want. Player A goes to minmas, player B goes to Duna. They both stop observing the game world for a bit. During this time vessel A would continue to orbit or follow the trajectory it was last on (even if it will crash) while the server catches up to when player B left in their universe. So basically the server recorded both actions, then plays the one that left at an \u0022earlier\u0022 time until it catches up with the time stamp on the \u0022later\u0022 time. This is done by tracking each person\u0027s clock on their client and comparing it with the server epoch. If the server is behind the player\u0027s clock, it simulates at high speed until it catches up. The opposite case would theoretically not happen because on launch the server would feed the client the current server epoch, and so a new launch would take place at that point in time.\u003C/p\u003E\u003Cp\u003E E.g. Player C joins in and launches, the time in his universe would match the time in Player B\u0027s universe since B was the last to log off and cause the server to enter simulation mod. However at this point player C is now leaving an action log. His ship just goes into orbit around Kerbin, then he leaves. Presumably, player A nor player B have logged on since Player C got on, so when they get on all of their stuff will have been simulated up until the end of whatever player C did.\u003C/p\u003E\u003Cp\u003EI think of it as sort of a system of equations, where the domain of the first equation is bounded by log in A and log off A, then the second equation is bounded by log off A and log off B, then the third is bounded by log off B and log off C, etc. etc.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-10-11T17:29:50Z","Content":"\n\u003Cp\u003EExactly, you can think a little bit more simple about a gameserver. Consider it a relay for the status of game objects. It also verifies updates submitted by clients (to e.g. make sure a client can\u0027t teleport though a level in CS:S; but we skip that for now for simplicity) and has to simulate non-player-objects (that we do not have in KSP).\u003C/p\u003E\u003Cp\u003ESo a gameserver for a concept as adopted by L.O.G is really just a database for vessel states and their entire history. Your client will use those data to calculate the current state of the vessel at your current universe time and \u0022interpolate\u0022 everything missing (usually just drifting along orbits once your reached the end of a vessels timeline). But pretty much all the data your client downloads from the server was uploaded earlier by other clients.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-11T17:32:13Z\u0022 title=\u002210/11/2013 05:32  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 11, 2013\u003C/time\u003E by Faark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainBullet","CreatedById":84676,"CreatedDateTime":"2013-10-11T18:08:30Z","Content":"\n\u003Cp\u003EOk, now I got it. Thanx for the pacience \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo if I loose connection or have a clientcrash while not being in a stable orbit I\u0027m basically doomed, cause the server will just fast forward the the highest timestemp (of that guy who looked for the perfect time to get three gravity asists in a row and timewarped half a century). thats the issue gl0ryh0und was talking about in post #244\u003C/p\u003E\u003Cp\u003EBut right, that would solve all other problems I was talking about.\u003C/p\u003E\n"},{"CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2013-10-12T16:09:23Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003E\u002B\u002B\u002BDevelopment Info\u002B\u002B\u002B\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EHi guys!\u003C/p\u003E\u003Cp\u003EWell, we have been working the whole time on the bug we are still having.\u003C/p\u003E\u003Cp\u003EBut, I think we will be able to make the first connection in the next days.\u003C/p\u003E\u003Cp\u003EI can\u0027t promise anything, but don\u0027t loose your interest in this thread and wait for more to come!\u003C/p\u003E\u003Cp\u003EWhen we have the first version ready, we will make a video to show the mod to you.\u003C/p\u003E\u003Cp\u003EThere will be no download, however, because it isn\u0027t stable enaugh yet.\u003C/p\u003E\u003Cp\u003ECARROTSAREAWESOME can\u0027t help me in the next couple of days, so I will have to continue working on my own.\u003C/p\u003E\u003Cp\u003EEDIT: I have made the first test with the new version and it actually worked. I could see my tester\u0027s craft driving around and he could see mine. But it seems like a small but vital part of my laptop has decided to commit suicide... which means 1 Bluescreen every 10 - 20 mins. I have to fix this first before being able to continue developing.\u003C/p\u003E\u003Cp\u003EBut: Hey, \u003Cstrong\u003EMultiplayer actually works!!!\u003C/strong\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-12T21:42:28Z\u0022 title=\u002210/12/2013 09:42  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 12, 2013\u003C/time\u003E by MarkusA380\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"KvickFlygarn87","CreatedById":76314,"CreatedDateTime":"2013-10-12T21:41:41Z","Content":"\n\u003Cp\u003EThis is awesome!! Keep it up!\u003C/p\u003E\n"},{"CreatedByName":"swiftgates24","CreatedById":22280,"CreatedDateTime":"2013-10-12T23:33:53Z","Content":"\n\u003Cp\u003EWow. I\u0027m surprised that someone managed to pull this off. Keep up the good work!\u003C/p\u003E\n"},{"CreatedByName":"CaptainBullet","CreatedById":84676,"CreatedDateTime":"2013-10-13T08:03:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MarkusA380\u0022 data-cite=\u0022MarkusA380\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EBut: Hey, \u003Cstrong\u003EMultiplayer actually works!!!\u003C/strong\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBrilliant, I can\u0027t wait.\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"popeter45","CreatedById":56678,"CreatedDateTime":"2013-10-13T09:22:31Z","Content":"\n\u003Cp\u003EYes multiplayer time!!!\u003C/p\u003E\n"},{"CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2013-10-13T14:55:14Z","Content":"\n\u003Cp\u003EYeah, well, just wanted to say I have played a stable session KSP -using the L.O.G. plugin- with a friend who helped me testing a few minutes ago. But it isn\u0027t good enaugh to show it in a vid at the moment. Stay tuned!\u003C/p\u003E\n"},{"CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2013-10-13T18:06:14Z","Content":"\n\u003Cp\u003EYay! The first showcase is there!\u003C/p\u003E\u003Cp\u003EI hope you guys enjoy it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-13T18:11:40Z\u0022 title=\u002210/13/2013 06:11  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 13, 2013\u003C/time\u003E by MarkusA380\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Meatsauce","CreatedById":4499,"CreatedDateTime":"2013-10-13T19:18:48Z","Content":"\n\u003Cp\u003EThis is going to be boat-loads of fun.\u003C/p\u003E\n"},{"CreatedByName":"KvickFlygarn87","CreatedById":76314,"CreatedDateTime":"2013-10-13T19:21:38Z","Content":"\n\u003Cp\u003EVery nice!\u003C/p\u003E\n"},{"CreatedByName":"Cboehme","CreatedById":61995,"CreatedDateTime":"2013-10-13T20:55:57Z","Content":"\n\u003Cp\u003EHmm... this is incredible, someone actually took the small amount of effort required to actually start something, this is almost inhuman. to actually do something about a problem. I applaud you good sir.\u003C/p\u003E\n"},{"CreatedByName":"Dooz","CreatedById":74263,"CreatedDateTime":"2013-10-14T11:51:39Z","Content":"\n\u003Cp\u003ESir you have done it\u003C/p\u003E\n"},{"CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2013-10-14T15:22:38Z","Content":"\n\u003Cp\u003EFunny to think of how the project started and where we are now...\u003C/p\u003E\u003Cp\u003EYou guys are just such a great community for this!\u003C/p\u003E\u003Cp\u003ENext Step is now to add rotation, equalize parts list and make more players than only two possible (which would actually stop the lagging).\u003C/p\u003E\u003Cp\u003EThis means: We are heading to the first \u003Cstrong\u003ERELEASE\u003C/strong\u003E !!!\u003C/p\u003E\n"},{"CreatedByName":"Wait- Was That Important?","CreatedById":58359,"CreatedDateTime":"2013-10-14T16:02:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MarkusA380\u0022 data-cite=\u0022MarkusA380\u0022\u003E\u003Cdiv\u003EFunny to think of how the project started and where we are now...\u003Cp\u003EYou guys are just such a great community for this!\u003C/p\u003E\u003Cp\u003ENext Step is now to add rotation, equalize parts list and make more players than only two possible (which would actually stop the lagging).\u003C/p\u003E\u003Cp\u003EThis means: We are heading to the first \u003Cstrong\u003ERELEASE\u003C/strong\u003E !!!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think I\u0027m as excited as I was for the release of GTA V for this mod\u0027s release as well. Good luck!\u003C/p\u003E\u003Cp\u003EI\u0027m sort of curious, though scared that it\u0027ll be a huge and confusing answer, as to why you didn\u0027t implement rotation. Surely it\u0027s just a matter of transmitting an extra value over the server and syncing it up?\u003C/p\u003E\u003Cp\u003EAlso, why wasn\u0027t there a chat GUI in the demonstration video?\u003C/p\u003E\n"},{"CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2013-10-14T16:32:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wait, Was That Important?\u0022 data-cite=\u0022Wait, Was That Important?\u0022\u003E\u003Cdiv\u003EI think I\u0027m as excited as I was for the release of GTA V for this mod\u0027s release as well. Good luck!\u003Cp\u003EI\u0027m sort of curious, though scared that it\u0027ll be a huge and confusing answer, as to why you didn\u0027t implement rotation. Surely it\u0027s just a matter of transmitting an extra value over the server and syncing it up?\u003C/p\u003E\u003Cp\u003EAlso, why wasn\u0027t there a chat GUI in the demonstration video?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERotation is just a bit more complicated than just sending a number. It is made of more than one number, which makes it a bit more difficult to send and receive.\u003C/p\u003E\u003Cp\u003EChat isn\u0027t implemented yet. It would take extra work. But I just didn\u0027t do it, I wanted to make a first multiplayer connection. We communicated via Skype.\u003C/p\u003E\u003Cp\u003EBut, I will add it.\u003C/p\u003E\n"},{"CreatedByName":"Meatsauce","CreatedById":4499,"CreatedDateTime":"2013-10-14T18:45:23Z","Content":"\n\u003Cp\u003EHey Markus, I read thru the thread again fast but didn\u0027t see answers to these questions;\u003C/p\u003E\u003Cp\u003E1. how many player connections are you planning to support?\u003C/p\u003E\u003Cp\u003E2. will users be able to host their own servers\u003C/p\u003E\u003Cp\u003E3. will there be in-game chat\u003C/p\u003E\u003Cp\u003ECheers!\u003C/p\u003E\n"},{"CreatedByName":"CARROTSAREAWSOME","CreatedById":61645,"CreatedDateTime":"2013-10-14T18:51:38Z","Content":"\n\u003Cp\u003EWhat he means is that why we havent done rotation yet is that its quaternion value, what is little bit more complicated.\u003C/p\u003E\n"},{"CreatedByName":"BobCat","CreatedById":22422,"CreatedDateTime":"2013-10-14T19:03:11Z","Content":"\n\u003Cp\u003Eim looking forward this project\u003C/p\u003E\n"},{"CreatedByName":"MarkusA380","CreatedById":45759,"CreatedDateTime":"2013-10-14T19:19:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Meatsauce\u0022 data-cite=\u0022Meatsauce\u0022\u003E\u003Cdiv\u003EHey Markus, I read thru the thread again fast but didn\u0027t see answers to these questions;\u003Cp\u003E1. how many player connections are you planning to support?\u003C/p\u003E\u003Cp\u003E2. will users be able to host their own servers\u003C/p\u003E\u003Cp\u003E3. will there be in-game chat\u003C/p\u003E\u003Cp\u003ECheers!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E1. Unlimited. As long as the server can handle it, there is no limitation.\u003C/p\u003E\u003Cp\u003E2. Yes.\u003C/p\u003E\u003Cp\u003E3. Yes.\u003C/p\u003E\n"},{"CreatedByName":"The Fleet Master","CreatedById":78352,"CreatedDateTime":"2013-10-14T19:22:08Z","Content":"\n\u003Cp\u003EOk so this mod will be mostly used for war? Correct? Lol, it shows use for Collaborative projects too, But war will probably be number one \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}