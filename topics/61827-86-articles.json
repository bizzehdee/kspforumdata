{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":86,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-26T03:18:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trewor007\u0022 data-cite=\u0022Trewor007\u0022\u003E\u003Cdiv\u003EMy A vector is my target:position.\u003Cp\u003EMy B Vector is my SHIP:SRFPROGRADE.\u003C/p\u003E\u003Cp\u003EHow to explain to the KOS that i want to build a vector C witch C\u002BB=A? Because what ever i do the missile don\u0027t compensate for the gravity enough and hits in the ground in front of the target. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EVector addition and subtraction works just like basic algebra:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E       __\\   __\\   __\\\u003Cbr\u003Eif:     C  \u002B  B  =  A\u003Cbr\u003E\u003Cbr\u003E       __\\   __\\   __\\\u003Cbr\u003Ethen:   C  =  A  -  B\u003Cbr\u003E\u003Cbr\u003Ei.e.\u003Cbr\u003ESET vecC TO vecA - vecB.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(Note the same does not apply to multiplication, as that\u0027s quite different in vector math than scalar math, as there\u0027s two different kinds of \u0022multiply\u0022 for vectors - cross and dot products).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnd can someone explain to me what Trim is (in sense of :YAWTRIM) because the translator is useless, and goggle just shows some articles about hard drives.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u0022Trim\u0022 is the aviation version of \u0022cruise control\u0022. Often when flying you have to hold the controls a bit off-center for a very long time with a slight amount of force. For example, you might have a slightly unbalanced plane that wants to tip to the right, so you have to push the control stick slightly to the left just to stay straight. Or you might be a bit nose-heavy and have to pull back slightly on the stick a certain amount to stay level. Over a long time this can become very fatiguing. So aircraft often have trim controls, which is a way of moving a dial or a lever to change where the neutral \u0027center\u0027 of the controls are. (where the controls will go when you let go of them). This is actually accomplished using little tabs on the control surfaces themselves that push the physical surfaces offcenter a bit in the wind.\u003C/p\u003E\u003Cp\u003EAutopilots often operate *via* the trim controls, especially when they are in \u0027maintain\u0027 mode - just trying to level things for you. They leave the main controls alone and just fiddle with the trim instead. That way you can still grab the stick and override what the autopilot is doing. \u003C/p\u003E\u003Cp\u003ETo see the effect in the game, put a plane on the runway, and make sure SAS is off. then notice how the little PITCH slider moves when you press S and W, and how it moves back to the center when you let go. Now hold \u0022ALT\u0022 and \u0022S\u0022 for about 10 seconds, and then try S and W again (without the ALT). Notice that the location the pitch control centers to is no longer in the middle. Now it\u0027s a bit above the center. That\u0027s the effect of trim. In game you can fiddle with trim using ALT\u002BW,A,S,D,Q,E, but often players don\u0027t see it because turning on SAS overrides it, making it hard to both trim and use SAS (which I find annoying a bit, when SAS doesn\u0027t hold the nose up but I want it on for its help with the other levelings).\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2014-11-26T08:04:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kartoffelkuchen\u0022 data-cite=\u0022Kartoffelkuchen\u0022\u003E\u003Cdiv\u003EAlright thank you guys!\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I found out that you can simply print your current velocity with this code:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPRINT (SHIP:VELOCITY:SURFACE:Z \u002B SHIP:VELOCITY:SURFACE:Y \u002BSHIP:VELOCITY:SURFACE:X).\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOnly the value you will get will be completely unrelated to your actual velocity - unless you\u0027re going perfectly straight along one of the XYZ axes, which will never really occur in reality. You can obtain the velocity with SHIP:VELOCITY:SURFACE:MAG, which calculates the magnitude of your velocity vector (this is, square root of X^2\u002BY^2\u002BZ^2).\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2014-11-26T20:33:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Reddy\u0022 data-cite=\u0022Reddy\u0022\u003E\u003Cdiv\u003EOnly the value you will get will be completely unrelated to your actual velocity - unless you\u0027re going perfectly straight along one of the XYZ axes, which will never really occur in reality. You can obtain the velocity with SHIP:VELOCITY:SURFACE:MAG, which calculates the magnitude of your velocity vector (this is, square root of X^2\u002BY^2\u002BZ^2).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESeriously for Actual surface speed all you have to do is VESSEL:SURFACESPEED = number in m/s, as per \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structure/vessel/index.html\u0022 rel=\u0022external nofollow\u0022\u003Edoc\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EOn another note:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve been trying to use pilot input as above, for fine direction correction of vessel while in ascent. Because of FAR I can\u0027t simply make big direction changes....\u003C/p\u003E\u003Cp\u003EPlease check out my new program code below:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EDECLARE PARAMETER stg1.\t\t\t\t// Number of stages\u003Cbr\u003ESET logfile TO ship:shipname \u002B \u0022.log\u0022.\t\t// Log file name\u003Cbr\u003ESET text TO \u0022\u0022.\t\t\t\t\t// General variable to use text\u003Cbr\u003ESET time0 TO time.\t\t\t\t// Initial time\u003Cbr\u003ELOCK time1 TO time - time0.\t\t\t// Elapsed time\u003Cbr\u003ESET t0 TO time1:seconds.\t\t\t// Reference for delta t\u003Cbr\u003ELOCK td TO time1:seconds - t0.\t\t\t// Delta t elapsed since last ref\u003Cbr\u003E\u003Cbr\u003EIF (stg1 \u0026lt;= 0) {\t\t\t\t// Check appropriatte parameter\u003Cbr\u003E\tSET text TO time1:clock \u002B \u0022 Invalid parameter, set number of stages\u0022.\u003Cbr\u003E\tPRINT text.\u003Cbr\u003E\tLOG text TO logfile.\u003Cbr\u003E\t//BREAK.\t\t\t\t// need to add a way to terminate program\u003Cbr\u003E} ELSE {\u003Cbr\u003E\tSET text TO time1:clock \u002B \u0022 Beginning program at \u0022 \u002B time0:calendar \u002B \u0022, \u0022 \u002B time0:clock.\u003Cbr\u003E\tPRINT text.\u003Cbr\u003E\tLOG text TO logfile.\u003Cbr\u003E\tSET text TO time1:clock \u002B \u0022 Number of stages parameter: \u0022 \u002B stg1.\u003Cbr\u003E\tPRINT text.\u003Cbr\u003E\tLOG text TO logfile.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EWAIT 1.0.\u003Cbr\u003ESET stg0 TO 0.\t\t\t// Staging count\u003Cbr\u003ESET throt TO 0.\t\t\t// Throttle track\u003Cbr\u003ESET cntd0 TO 9.\t\t\t// Launch countdown\u003Cbr\u003ESET drect TO ship:facing.\t// Maintain initial direction\u003Cbr\u003ELOCK throttle TO throt.\u003Cbr\u003ELOCK steering TO drect.\u003Cbr\u003E\u003Cbr\u003E//\t\tLaunch Countdown\u003Cbr\u003ESET text TO time1:clock \u002B  \u0022 Beginning Launch on T-:\u0022 \u002B (cntd0\u002B1).\u003Cbr\u003EPRINT text.\u003Cbr\u003ELOG text TO logfile.\u003Cbr\u003EWAIT 1.0.\u003Cbr\u003EUNTIL ( cntd0 = 0 ) {\u003Cbr\u003E\tSET text TO time1:clock \u002B  \u0022 ...\u0022 \u002B cntd0.\u003Cbr\u003E\tPRINT text.\u003Cbr\u003E\tLOG text TO logfile.\u003Cbr\u003E\tSET cntd0 TO cntd0 - 1.\u003Cbr\u003E//\t\tBegin engines burn\u003Cbr\u003E\tIF ( cntd0 = 1 ) {\u003Cbr\u003E\t\tSET throt TO 1.0.\u003Cbr\u003E\t\tSET text TO time1:clock \u002B  \u0022 Engines on\u0022.\u003Cbr\u003E\t\tPRINT text.\u003Cbr\u003E\t\tLOG text TO logfile.\u003Cbr\u003E\t\tSTAGE.\u003Cbr\u003E\t\tSET stg0 TO stg0 \u002B 1.0.\u003Cbr\u003E\t}\u003Cbr\u003E\tWAIT 1.0.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E//\t\tRelease launch stabilizers\u003Cbr\u003ESET text TO time1:clock \u002B  \u0022 Releasing clamps\u0022.\u003Cbr\u003EPRINT text.\u003Cbr\u003ELOG text TO logfile.\u003Cbr\u003ESTAGE.\u003Cbr\u003ESET stg0 TO stg0 \u002B 1.0.\u003Cbr\u003E\u003Cbr\u003E//\t\tSolidFuel stage\u003Cbr\u003EIF stage:solidfuel \u0026gt; 0.1 {\u003Cbr\u003E\tWHEN (ship:altitude \u0026gt;= 20000) AND (stage:solidfuel \u0026lt; 1) THEN {\u003Cbr\u003E\t\tSET text TO time1:clock \u002B  \u0022 Releasing SolidFuel boosters\u0022.\u003Cbr\u003E\t\tPRINT text.\u003Cbr\u003E\t\tLOG text TO logfile.\u003Cbr\u003E\t\tSTAGE.\u003Cbr\u003E\t\tSET stg0 TO stg0 \u002B 1.0.\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E//\t\tRegular stages\u003Cbr\u003EWHEN (true) AND (stage:liquidfuel \u0026lt; 0.1) THEN {\u003Cbr\u003E\tSET text TO time1:clock \u002B  \u0022 Fuel depleted, activating next stage\u0022.\u003Cbr\u003E\tPRINT text.\u003Cbr\u003E\tLOG text TO logfile.\u003Cbr\u003E\tSTAGE.\u003Cbr\u003E\tSET stg0 TO stg0 \u002B 1.0.\u003Cbr\u003E\tIF ( ship:liquidfuel \u0026gt; stage:liquidfuel ) { PRESERVE. }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//\t\tWait until 4000 for control\u003Cbr\u003EUNTIL (ship:altitude \u0026gt;= 4000) {\u003Cbr\u003E\tIF (td \u0026gt;= 10) {\u003Cbr\u003E\t\tSET t0 TO time1:seconds.\u003Cbr\u003E\t\tSET text TO time1:clock\u002B\u0022 alt:\u0022\u002BROUND(ship:altitude)\u002B\u0022 hdg:\u0022\u002BROUND(ship:heading)\u002B\u0022 sfr:\u0022\u002BROUND(ship:surfacespeed)\u002B\u0022 apo:\u0022\u002BROUND(ship:apoapsis).\u003Cbr\u003E\t\tLOG text TO logfile.\u003Cbr\u003E\t}\u003Cbr\u003E\tWAIT 0.5.\u003Cbr\u003E}\u003Cbr\u003ESET text TO time1:clock \u002B  \u0022 Reached 4000 meters altitude\u0022.\u003Cbr\u003EPRINT text.\u003Cbr\u003ELOG text TO logfile.\u003Cbr\u003ESET text TO time1:clock \u002B  \u0022 Allowing pilot correction Control\u0022.\u003Cbr\u003EPRINT text.\u003Cbr\u003ELOG text TO logfile.\u003Cbr\u003EUNLOCK throttle.\u003Cbr\u003ESET ship:control:pilotmainthrottle TO 1.0.\u003Cbr\u003E\u003Cbr\u003E//\t\tPilot correction control\u003Cbr\u003EWHEN (true) AND (ABS(ship:control:pilotpitch) \u0026gt; 0.9) THEN {\u003Cbr\u003E\tSET crtvl TO ROUND(ship:control:pilotpitch).\u003Cbr\u003E\tSET drect TO drect \u002B R(crtvl,0,0).\u003Cbr\u003E\tSET text TO time1:clock\u002B\u0022 Pitch correction of \u0022\u002Bcrtvl\u002B\u0022, direction pitch of \u0022\u002BROUND(drect:pitch).\u003Cbr\u003E\tLOG text TO logfile.\u003Cbr\u003E\tPRESERVE.\u003Cbr\u003E}\u003Cbr\u003EWHEN (true) AND (ABS(ship:control:pilotyaw) \u0026gt; 0.9) THEN {\u003Cbr\u003E\tSET crtvl TO ROUND(ship:control:pilotyaw).\u003Cbr\u003E\tSET drect TO drect \u002B R(0,crtvl,0).\u003Cbr\u003E\tSET text TO time1:clock\u002B\u0022 Yaw correction of \u0022\u002Bcrtvl\u002B\u0022, direction yaw of \u0022\u002BROUND(drect:yaw).\u003Cbr\u003E\tLOG text TO logfile.\u003Cbr\u003E\tPRESERVE.\u003Cbr\u003E}\u003Cbr\u003EWHEN (true) AND (ABS(ship:control:pilotroll) \u0026gt; 0.9) THEN {\u003Cbr\u003E\tSET crtvl TO ROUND(ship:control:pilotroll).\u003Cbr\u003E\tSET drect TO drect \u002B R(0,0,crtvl).\u003Cbr\u003E\tSET text TO time1:clock\u002B\u0022 Roll correction of \u0022\u002Bcrtvl\u002B\u0022, direction roll of \u0022\u002BROUND(drect:roll).\u003Cbr\u003E\tLOG text TO logfile.\u003Cbr\u003E\tPRESERVE.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EUNTIL (ship:altitude \u0026gt;= 24000) {\u003Cbr\u003E\tIF (td \u0026gt;= 10) {\u003Cbr\u003E\t\tSET t0 TO time1:seconds.\u003Cbr\u003E\t\tSET text TO time1:clock\u002B\u0022 alt:\u0022\u002BROUND(ship:altitude)\u002B\u0022 hdg:\u0022\u002BROUND(ship:heading)\u002B\u0022 sfr:\u0022\u002BROUND(ship:surfacespeed)\u002B\u0022 apo:\u0022\u002BROUND(ship:apoapsis).\u003Cbr\u003E\t\tLOG text TO logfile.\u003Cbr\u003E\t}\u003Cbr\u003E\tWAIT 0.5.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ESET text TO time1:clock \u002B \u0022 24 thousands meters altitude reached\u0022.\u003Cbr\u003ELOG text TO logfile.\u003Cbr\u003EPRINT text.\u003Cbr\u003E\u003Cbr\u003EUNTIL (ship:apoapsis \u0026gt;= 69000) {\u003Cbr\u003E\tIF (td \u0026gt;= 10) {\u003Cbr\u003E\t\tSET t0 TO time1:seconds.\u003Cbr\u003E\t\tSET text TO time1:clock\u002B\u0022 alt:\u0022\u002BROUND(ship:altitude)\u002B\u0022 hdg:\u0022\u002BROUND(ship:heading)\u002B\u0022 sfr:\u0022\u002BROUND(ship:surfacespeed)\u002B\u0022 apo:\u0022\u002BROUND(ship:apoapsis).\u003Cbr\u003E\t\tLOG text TO logfile.\u003Cbr\u003E\t}\u003Cbr\u003E\tWAIT 0.5.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ESET text TO time1:clock \u002B \u0022 69k Apoapsis reached\u0022.\u003Cbr\u003ELOG text TO logfile.\u003Cbr\u003EPRINT text.\u003Cbr\u003ESET text TO time1:clock \u002B \u0022 Closing Program\u0022.\u003Cbr\u003ELOG text TO logfile.\u003Cbr\u003EPRINT text.\u003Cbr\u003ESET ship:control:pilotmainthrottle TO 0.0.\u003Cbr\u003EUNLOCK steering.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m trying to achieve a direction correction by reading on pilot input and then adding that input to the steering direction:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//\t\tPilot correction control\u003Cbr\u003EWHEN (true) AND (ABS(ship:control:pilotpitch) \u0026gt; 0.9) THEN {\u003Cbr\u003E\tSET crtvl TO ROUND(ship:control:pilotpitch).\u003Cbr\u003E\tSET drect TO drect \u002B R(crtvl,0,0).\u003Cbr\u003E\tSET text TO time1:clock\u002B\u0022 Pitch correction of \u0022\u002Bcrtvl\u002B\u0022, direction pitch of \u0022\u002BROUND(drect:pitch).\u003Cbr\u003E\tLOG text TO logfile.\u003Cbr\u003E\tPRESERVE.\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFirst issue it seems is that Input from pilot actually responds on the vessel, contradicting that pilot doesn\u0027t have control. Second it seems that input from the automated steering is also read as pilot input.\u003C/p\u003E\u003Cp\u003EAS a result first time I tried this instantly stopped the program for breaking the IPU limit as constantly reading input from the steering. I tried to solve this by limiting the condition to \u0026gt; 0.9 from input, so the ship navigates a bit more but still stops from too much processing inside WHEN loop. The WHEN is triggered several times before responding...\u003C/p\u003E\u003Cp\u003EAlso there might be some oddities which adding of directions that I have yet to figure out. As for the triggers I thought they would only be check each cycle obeying the wait time inside the UNTIL loops, apparently it doesn\u0027t.\u003C/p\u003E\u003Cp\u003EI\u0027ll try to find a more elegant way for the coding, but still, the pilot command readings should only read on from actual commands and not from steering itself.\u003C/p\u003E\u003Cp\u003EOn another note, I saw that some things in the Doc already begun to change. Nice! Be sure to check on \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/summary_topics/CPU_hardware/index.html\u0022 rel=\u0022external nofollow\u0022\u003Ecpu_hardware\u003C/a\u003E page, Its an important topic but doesn\u0027t show up on front page.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-26T23:10:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gfurst\u0022 data-cite=\u0022Gfurst\u0022\u003E\u003Cdiv\u003ESeriously for Actual surface speed all you have to do is VESSEL:SURFACESPEED = number in m/s, as per \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structure/vessel/index.html\u0022 rel=\u0022external nofollow\u0022\u003Edoc\u003C/a\u003E.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere is a significant different between vessel:surfacespeed and ship:velocity:surface:mag. \u003C/p\u003E\u003Cp\u003EThey are only identical when you are actually ON the surface right now. When you are up in orbit, or flying in atmosphere they differ. Ship:velocity:surface is your 3-D velocity relative to the point at sea level of the surface directly under you. Vessel:surfacespeed, on the other hand, is a 2-D speed that ignores your vertical motion. For example, if you are aimed straight up and flying up at 100 m/s, ship:velocity:surface:mag will be 100, while vessel:surfacespeed will be 0.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EOn another note, I saw that some things in the Doc already begun to change. Nice! Be sure to check on \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/summary_topics/CPU_hardware/index.html\u0022 rel=\u0022external nofollow\u0022\u003Ecpu_hardware\u003C/a\u003E page, Its an important topic but doesn\u0027t show up on front page.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s linked to from all the places where something mentions a thing related to it - like WHEN/ON triggers, the WAIT statement, and so on.\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2014-11-27T00:46:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kartoffelkuchen\u0022 data-cite=\u0022Kartoffelkuchen\u0022\u003E\u003Cdiv\u003EHi, does anybody know how I can print the radar altitude? Not the \u0022normal altitude\u0022. And also, does anybody know how to get the actual velocity (Surface/Orbit) without that it shows off the velocity in the three dimensions? Just as the velocity marker in the navball? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThere is a significant different between vessel:surfacespeed and ship:velocity:surface:mag. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah I\u0027ve guess I misunderstand the direct meaning... Anyway, for what Kartofeelkchen looks SHIP:AIRSPEED should be enough: \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EHow fast the ship is moving relative to the air. KSP models atmosphere as simply a solid block of air \u0022glued\u0022 to the planet surface (the weather on Kerbin is boring and there\u0027s no wind). Therefore airspeed is generally the same thing as as the magnitude of the surface velocity.\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIt\u0027s linked to from all the places where something mentions a thing related to it - like WHEN/ON triggers, the WAIT statement, and so on.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EStill don\u0027t you think this is as a important enough topic to be mentioned in the front page? As a summary would do?\u003C/p\u003E\u003Cp\u003EAnyway, about the pilot command input stuff, no comment on that?\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-11-27T06:14:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gfurst\u0022 data-cite=\u0022Gfurst\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnyway, about the pilot command input stuff, no comment on that?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI am usually the keeper of the tribal knowledge on the flight controls and i am currently coming out of complete incognito status after my wife was so kind as to give us a baby boy \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI added a new issue for this on github here :\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/425\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/425\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Ethe pilot controls are a pretty new feature and i have to admit i never tested the them in conjunction with the autopilot so i never saw part of your issue. I consider that a bug that we might have a quick conversation to make sure we come to the correct conclusion. \u003C/p\u003E\u003Cp\u003EAs far as the behavior of letting the pilot control stuff while the autopilot is on that was a feature request from users that didnt like that writing a terminal velocity or similar single axis of control script would lock out everything. I do see your point about creating a full fly by wire system you would want to be the man-in-the-middle and prevent any direct control. I think that leaving the way it is by default is fine and we could add a \u0022lockout\u0022 function that does what you are asking for.\u003C/p\u003E\n"},{"CreatedByName":"Trewor007","CreatedById":101021,"CreatedDateTime":"2014-11-27T17:40:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EVector addition and subtraction works just like basic algebra:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E       __\\   __\\   __\\\u003Cbr\u003Eif:     C  \u002B  B  =  A\u003Cbr\u003E\u003Cbr\u003E       __\\   __\\   __\\\u003Cbr\u003Ethen:   C  =  A  -  B\u003Cbr\u003E\u003Cbr\u003Ei.e.\u003Cbr\u003ESET vecC TO vecA - vecB.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Enormaly that would do just fine but as can be seen on the pic below:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i60.tinypic.com/2n7qbtu.jpg\u0022 alt=\u00222n7qbtu.jpg\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003Ethe blue vector is my ship surface prograde.\u003C/p\u003E\u003Cp\u003Ethe red vector is my target position.\u003C/p\u003E\u003Cp\u003Eand the green vector is target position - ship surface prograde.\u003C/p\u003E\u003Cp\u003Ethe green and red vector are so close they form a yellow line.\u003C/p\u003E\u003Cp\u003EWhen i was talking about adding and retracting vectors i meant constructing a vector that when pointed at will cause the angle between the blue and red vector to go to 0. probably something in style of this TRIM control.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-28T00:15:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trewor007\u0022 data-cite=\u0022Trewor007\u0022\u003E\u003Cdiv\u003Ethe blue vector is my ship surface prograde.\u003Cp\u003Ethe red vector is my target position.\u003C/p\u003E\u003Cp\u003Eand the green vector is target position - ship surface prograde.\u003C/p\u003E\u003Cp\u003Ethe green and red vector are so close they form a yellow line.\u003C/p\u003E\u003Cp\u003EWhen i was talking about adding and retracting vectors i meant constructing a vector that when pointed at will cause the angle between the blue and red vector to go to 0. probably something in style of this TRIM control.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhy subtract a velocity from a position? They\u0027re not the same sort of thing.\u003C/p\u003E\u003Cp\u003EThe basic concept of cancelling units is always a good thing for sanity checking. Just like when you do addition and subtraction on scalar numbers, when you do it on vectors you want to make sure the two vectors are measuring the same units. Position is meters, velocity is meters per second. Subtracting them directly doesn\u0027t give a valid meaningful answer in vectors for the same reason it doesn\u0027t in scalars.\u003C/p\u003E\u003Cp\u003EIf all you need is the aim to be in the same direction as P, then try finding it experimentally during flight. Use NORMALIZED to erase the differences in magnitude and just look at the directions with trig.\u003C/p\u003E\u003Cp\u003ELike so:\u003C/p\u003E\u003Cp\u003E SET PNORM to TARGET:POSITION:NORMALIZED.\u003C/p\u003E\u003Cp\u003E SET VNORM to SHIP:VELOCITY:SURFACE:NORMALIZED.\u003C/p\u003E\u003Cp\u003ENow you can take the diff between them:\u003C/p\u003E\u003Cp\u003E SET NORMDIFF to VNORM-PNORM.\u003C/p\u003E\u003Cp\u003ENow you can get the component of that diff that is in the up direction (to get if it above or below the target).\u003C/p\u003E\u003Cp\u003E SET NORMDIFFUP TO VDOT( NORMDIFF, TARGET:UP:VECTOR ).\u003C/p\u003E\u003Cp\u003ENow NORMDIFFUP will be a number between 0.0 and 1.0. 0.0 means your velocity is in the same direction as the target. 1.0 means its perpendicular to it, upward. -1.0 means it\u0027s perpendicular below it. a value like \u002B0.05 means you\u0027re a bit above it, and -0.05 means you\u0027re a bit below it.\u003C/p\u003E\u003Cp\u003ESo you can keep recalculating that in a loop (or LOCK it to make it recalc it), and move your aim up or down a bit to bring that number to 0.0. If its \u0026gt; 0.0, aim more down. If it\u0027s \u0026lt; 0.0, aim more up. Use PID logic if you want that to be nice and smooth, or try with just plain P alone if that\u0027s good enough.\u003C/p\u003E\n"},{"CreatedByName":"whynot","CreatedById":111363,"CreatedDateTime":"2014-11-29T14:37:30Z","Content":"\n\u003Cp\u003EHey everybody, just posting to see if anyone else is having this problem:\u003C/p\u003E\u003Cp\u003EThe kOS processors detatches from the craft. It appears to be related to RemoteTech. \u003C/p\u003E\u003Cp\u003EI posted this bug: \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/428\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/428\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAll input is appreciated!\u003C/p\u003E\u003Cp\u003ECheers!\u003C/p\u003E\n"},{"CreatedByName":"Dexter9313","CreatedById":84598,"CreatedDateTime":"2014-11-30T12:42:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022whynot\u0022 data-cite=\u0022whynot\u0022\u003E\u003Cdiv\u003EHey everybody, just posting to see if anyone else is having this problem:\u003Cp\u003EThe kOS processors detatches from the craft. It appears to be related to RemoteTech. \u003C/p\u003E\u003Cp\u003EI posted this bug: \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/428\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/428\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAll input is appreciated!\u003C/p\u003E\u003Cp\u003ECheers!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was going to post the exact same thing, although, by the description you are giving, I don\u0027t now if we are talking about the same bug or if we just don\u0027t analyze it the same way. To me, it\u0027s more like the ship\u0027s center of mass totally drifts from ship when it reaches 6000m at launch. The camera drops a few hundred meters below the ship and begins to rise at a constant rate as the ship goes away from it leading to wrong steering calculations and making the ship go nuts. I remember seeing the same bug about a year ago (more or less) at the beginning of RT integration in kOS.\u003C/p\u003E\u003Cp\u003EAs far as I used this integration, I have not been able to tell if it was working or not anyway, commands being able to be sent when I had no link to KSC, kOS is not able to control the ship (throttle\u002Bsteering) when there is no link and there is no signal delay for sent commands (I don\u0027t know what I should expect so I describe what it does not compared to the almost functional RT integration we had months ago). I remember at some point that this integration was disabled because of the trouble it was making, is it still the case or am I facing a bug ? If so, I\u0027ll try to post a detailed report, but I prefer to ask if there\u0027s a point doing so and if RT integration should be functional by now.\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2014-11-30T14:01:57Z","Content":"\n\u003Cp\u003EYOU GUYS.\u003C/p\u003E\u003Cp\u003EYesterday I noticed that my RT integration was disabled so I turned it on and forgot about it. Built a new vehicle, strapped in on my lifter and... the whole rocket exploded at 6km mark. Since the debug console got flooded with different messages (plus some from another mod), I looked at my construction for possible sources instead - checked for collisions, whether FAR shields everything... nada. Launched the craft a couple more times - everytime watching a huge explosion at 6km. I would be sitting there helpless if you didn\u0027t remind me of RT integration. I\u0027ve just disabled it and the same rocket gets to orbit as it always did.\u003C/p\u003E\u003Cp\u003EGuess the issue is serious. Should I post some logs or anything?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-30T17:17:16Z","Content":"\n\u003Cp\u003EI know next to nothing about RT integration but I can report that I had on several occasions in the past seen the bug where the camera ends up pointed well *behind* the ship as it ascends past 6000m. I noticed the problem never happened anymore recently, and I haven\u0027t been using RT at all recently - maybe the two are connected. I know that normally the camera points at the center of mass, and I sometimes saw along with this bug a weird case of one or two VERY LONG lines trailing out behind the ship, as if a piece of the ship was left behind but still being calculated as part of the ship, and I think the long lines were struts connecting to it. I also know that several mods (NOT koS) used to have problems that summoned the kracken at exactly 6000m many versions back. For a brief moment you\u0027d see the red launching clamps reappear at 6000m, reattached to the ship, which would blow it up.\u003C/p\u003E\u003Cp\u003EStock KSP does *something* weird at 6000m altitude. I don\u0027t know what it is but if you look very carefully you can see a few puffballs of white cloud always appear around the ship on the screen at 6000m as you launch a rocket. I have no idea why. I have a few random guesses though. I know that at some point as you raise altitude the game switches from \u0022real ground\u0022 mode to \u0022fake ground\u0022 mode. (where the ground is no longer composed of polygons with a real physical presence you can collide with, and is instead just a hologram to look at.) I also know that at some point as you ascend the frame of reference switches from universe-rotates-planet-is-still to planet-rotates-universe-is-still. Either one of those may cause a bit of a jolt teleportation of position when that happens. It may be that the puffballs you see are actually your own exhaust ahead of you, because you jumped a little bit in position as everything was recalculated to the new reference frame.\u003C/p\u003E\u003Cp\u003EI could see how that might really confuse the heck out of lots of mods, or even break a ship apart, or miscalculate the position of a part of the ship, making enter of mass calculations wrong.\u003C/p\u003E\u003Cp\u003EAs to what to do to fix it, I have no clue. SQUAD would need to be a lot more forthcoming about what secret weird proprietary stuff they\u0027re doing at the 6000m mark. It\u0027s *something* weird, and it seems to confuse more mods than just ours.\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2014-12-01T20:28:31Z","Content":"\n\u003Cp\u003EMore comments on the 6000m bug: I had experienced it briefly. I deleted the kOS folder and installed fresh from the download and it went away instantly (exact same ship, exact same script, literally 5min loading time apart). To make sure I was being kind of scientific, I loaded KSP multiple times before hand and tried multiple ships (a mix of space planes and rockets). Then I deleted the folder and installed from scratch, and haven\u0027t had a single issue with it since (I want to say it was Tuesday of last week, but I can\u0027t be sure).\u003C/p\u003E\u003Cp\u003ETo be clear, I deleted the kOS folder entirely and then modified settings from within the game (I did not replace the settings file with the previous settings file, but the settings matched exactly).\u003C/p\u003E\n"},{"CreatedByName":"Dexter9313","CreatedById":84598,"CreatedDateTime":"2014-12-02T12:51:08Z","Content":"\n\u003Cp\u003EYeah, the way KSP works with mods is very strange sometimes. I had several issues with mods that could only be solved by reinstalling them (the most recent example I had is Atmospheric Trajectories that stops showing me trajectories sometimes and I have to reinstall it from scratch to make it work again even if the config files remain untouched). That\u0027s magic to me. I noticed that this kind of bugs can appear after a KSP crash. I recall encountering a bug where Kerbal Engineer stopped working after every KSP crash I encountered. I had to completely reinstall the mod to make it work again. I don\u0027t know why is KSP messing with dlls but I don\u0027t think it\u0027s a good sign on how it\u0027s been implemented.\u003C/p\u003E\n"},{"CreatedByName":"Astral_Nomad","CreatedById":69478,"CreatedDateTime":"2014-12-02T20:13:55Z","Content":"\n\u003Cp\u003Ealright guys.. now that the script folder has been changed, where am i supposed to put my script files.. Ive tried everything, including the ships/scripts/ folder.. all I ever get is file not found and im getting highly annoyed.\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-12-02T20:22:56Z","Content":"\n\u003Cp\u003Eastral_nomad : we also changed extensions from *.txt to *.ks. have you updated your scripts?\u003C/p\u003E\n"},{"CreatedByName":"Astral_Nomad","CreatedById":69478,"CreatedDateTime":"2014-12-02T20:24:54Z","Content":"\n\u003Cp\u003Eno.. becuase i didnt know about it.. stuff like that needs to be in the readme. I will do it now.\u003C/p\u003E\n"},{"CreatedByName":"Astral_Nomad","CreatedById":69478,"CreatedDateTime":"2014-12-02T20:35:31Z","Content":"\n\u003Cp\u003Ewhat is the exact path from %KSPDIR% to where im supposed to put the file? and do i need to switch to archive first? cause im still not getting anything.\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-12-02T20:41:04Z","Content":"\n\u003Cp\u003E%KSPDIR%\\Ships\\Script should get your scripts into the archive. The file extension change was in the changelog under \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/blob/master/CHANGELOG.md#changes-breaking-old-scripts\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/blob/master/CHANGELOG.md#changes-breaking-old-scripts\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-12-02T23:11:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Astral_Nomad\u0022 data-cite=\u0022Astral_Nomad\u0022\u003E\u003Cdiv\u003Eno.. becuase i didnt know about it.. stuff like that needs to be in the readme. I will do it now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDid you not see a popup window on startup after updating that mentioned the movement and offered to move the files for you? It was supposed to appear and if it didn\u0027t that\u0027s a problem.\u003C/p\u003E\u003Cp\u003EIt was mentioned in the changelog, and in the thread announcement, and the official HTML docs describe it in the new place. The readme is too small of a place to put everything.\u003C/p\u003E\n"},{"CreatedByName":"Astral_Nomad","CreatedById":69478,"CreatedDateTime":"2014-12-04T02:06:03Z","Content":"\n\u003Cp\u003ESteven - No.. I didnt -- or at least not that I noticed.. I might have inadverdantly clicked passed it on first load.. any way to trigger it again to be sure?\u003C/p\u003E\u003Cp\u003EErendrake - I tried that location and I changed the extension to .ks - still file not found..\u003C/p\u003E\n"},{"CreatedByName":"Astral_Nomad","CreatedById":69478,"CreatedDateTime":"2014-12-04T02:15:12Z","Content":"\n\u003Cp\u003EOkay.. Its finally deciding to co-operate... I dont know why it didnt the first time.. thanks for the help.\u003C/p\u003E\n"},{"CreatedByName":"Warringer","CreatedById":328,"CreatedDateTime":"2014-12-05T22:35:04Z","Content":"\n\u003Cp\u003EWell, Gentlemen.\u003C/p\u003E\u003Cp\u003EAfter having found a near perfect launch trajectory for RSS 6.4x with FAR and RealFuels, I\u0027ve decided to try and write a launcher script that makes use of that trajectory and can be used with any rocket.\u003C/p\u003E\u003Cp\u003EIt worked well enough to get the rocket above tehe atmosphere during development. Then I tried to add a maneuver node part to for orbital insertation and it suddenly didn\u0027t work anymore.\u003C/p\u003E\u003Cp\u003ESomething, I don\u0027t know what, keeps the throttle to 0, even though its locked to a variable tVal and should be used to adjust the TWR of the first stage (with solid boosters of the test rocket).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003Elaunchtest.ks\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cbr\u003ESET oldTWR TO 0.\u003Cbr\u003ESET tVal TO 1.\u003Cbr\u003ESET combthrust TO 0.\u003Cbr\u003ESET direction to HEADING(0,90).\u003Cbr\u003E\u003Cbr\u003ELIST ENGINES IN engs.\u003Cbr\u003ELOCK THROTTLE TO tVal.\u003Cbr\u003ELOCK STEERING TO direction.\u003Cbr\u003E\u003Cbr\u003ERUN launchdisplay(\u0022Prelaunch\u0022, 0, 0, tVal, 0, 0, \u0022Launch in 3!\u0022).\u003Cbr\u003EWait 1.\u003Cbr\u003ERUN launchdisplay(\u0022Prelaunch\u0022, 0, 0, tVal, 0, 0, \u0022Launch in 2!\u0022).\u003Cbr\u003EWait 1.\u003Cbr\u003ERUN launchdisplay(\u0022Prelaunch\u0022, 0, 0, tVal, 0, 0, \u0022Launch in 1!\u0022).\u003Cbr\u003Eprint THROTTLE.\u003Cbr\u003Ewait 1.\u003Cbr\u003E\u003Cbr\u003Estage.\u003Cbr\u003E\u003Cbr\u003Ewait 0.5.\u003Cbr\u003E\u003Cbr\u003EFOR eng IN engs {\u003Cbr\u003E SET combthrust TO combthrust \u002B eng:THRUST.\u003Cbr\u003E}.\u003Cbr\u003ESET TWR to combthrust / (MASS*9.81).\u003Cbr\u003E\u003Cbr\u003Eprint THROTTLE \u002B \u0022, \u0022 \u002B tVal \u002B \u0022, \u0022 \u002B TWR.\u003Cbr\u003E\u003Cbr\u003Euntil TWR \u0026lt;= 1.2 {\u003Cbr\u003E SET tVal to (tVal - 0.02).\u003Cbr\u003E SET combthrust TO 0.\u003Cbr\u003E FOR eng IN engs {\u003Cbr\u003E SET combthrust TO combthrust \u002B eng:THRUST.\u003Cbr\u003E }.\u003Cbr\u003E SET TWR to combthrust / (MASS*9.81).\u003Cbr\u003E print THROTTLE \u002B \u0022, \u0022 \u002B tVal \u002B \u0022, \u0022 \u002B TWR.\u003Cbr\u003E wait 0.05.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ESET oldTWR to 0.\u003Cbr\u003ESET TWR to 0.\u003Cbr\u003E\u003Cbr\u003ERUN launchdisplay(\u0022First Stage \u002B Boosters\u0022, combthrust, TWR, tVal, 0, 0, \u0022Launch!\u0022).\u003Cbr\u003Ewait 0.5.\u003Cbr\u003Estage.\u003Cbr\u003Ewait 0.5.\u003Cbr\u003E\u003Cbr\u003ESET message to \u0022Launch!\u0022.\u003Cbr\u003ESET timer to TIME \u002B 10.\u003Cbr\u003EWHEN timer = TIME THEN { SET message TO \u0022\u0022. }.\u003Cbr\u003E\u003Cbr\u003EUNTIL oldTWR \u0026gt; TWR {\u003Cbr\u003E SET oldTWR to TWR.\u003Cbr\u003E LIST ENGINES IN engs.\u003Cbr\u003E SET combthrust TO 0.\u003Cbr\u003E FOR eng IN engs {\u003Cbr\u003E SET combthrust TO combthrust \u002B eng:THRUST.\u003Cbr\u003E }.\u003Cbr\u003E SET TWR to combthrust / (MASS*9.81).\u003Cbr\u003E IF VELOCITY:SURFACE:MAG \u0026gt; 75 { \u003Cbr\u003E SET direction to HEADING(90,ARCCOS(SHIP:ALTITUDE/40000)).\u003Cbr\u003E }.\u003Cbr\u003E RUN launchdisplay(\u0022First Stage \u002B Boosters\u0022, combthrust, TWR, tVal, 0, 0, message).\u003Cbr\u003E wait 0.5.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ESET message to \u0022Booster Separation!\u0022.\u003Cbr\u003ESET timer to TIME \u002B 10.\u003Cbr\u003EWHEN timer = TIME THEN { SET message TO \u0022\u0022. }.\u003Cbr\u003E\u003Cbr\u003ESET oldTWR to 0.\u003Cbr\u003ESET TWR to 0.\u003Cbr\u003EIF TWR \u0026lt; 1.2 {\u003Cbr\u003E SET tVal to 1.\u003Cbr\u003E}.\u003Cbr\u003Ewait 0.25.\u003Cbr\u003Estage.\u003Cbr\u003Ewait 0.25.\u003Cbr\u003E\u003Cbr\u003EWHEN SHIP:ALTITUDE \u0026gt; 30000 THEN {\u003Cbr\u003E SET direction to SHIP:SRFPROGRADE.\u003Cbr\u003E WHEN SHIP:ALTITUDE \u0026gt; 50000 THEN {\u003Cbr\u003E SET direction to SHIP:PROGRADE.\u003Cbr\u003E }.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003EUNTIL oldTWR \u0026gt; TWR {\u003Cbr\u003E SET diffTWR to (TWR - oldTWR).\u003Cbr\u003E SET oldTWR to TWR.\u003Cbr\u003E LIST ENGINES IN engs.\u003Cbr\u003E SET combthrust TO 0.\u003Cbr\u003E FOR eng IN engs {\u003Cbr\u003E SET combthrust TO combthrust \u002B eng:THRUST.\u003Cbr\u003E }.\u003Cbr\u003E SET TWR to combthrust / (MASS*9.81).\u003Cbr\u003E IF SHIP:ALTITUDE \u0026lt; 30000 {\u003Cbr\u003E SET direction to HEADING(90,ARCCOS(SHIP:ALTITUDE/40000)).\u003Cbr\u003E }.\u003Cbr\u003E RUN launchdisplay(\u0022First Stage Main Core\u0022, combthrust, TWR, tVal, 0, 0, message).\u003Cbr\u003E wait 0.5.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ESET message to \u0022Main Engine cutoff!\u0022.\u003Cbr\u003ESET timer to TIME \u002B 10.\u003Cbr\u003EWHEN timer = TIME THEN { SET message TO \u0022\u0022. }.\u003Cbr\u003E\u003Cbr\u003Estage.\u003Cbr\u003Ewait 0.25.\u003Cbr\u003ESET tVal to 0.\u003Cbr\u003Ewait 0.25.\u003Cbr\u003Estage.\u003Cbr\u003Ewait 0.25.\u003Cbr\u003E\u003Cbr\u003ESET Kerbin to BODY(\u0022Kerbin\u0022).\u003Cbr\u003ESET apo to SHIP:APOAPSIS.\u003Cbr\u003ESET apoVel to VELOCITYAT(SHIP, apo).\u003Cbr\u003ESET circularVel to SQRT(Kerbin:MU / (apo \u002B Kerbin:RADIUS)).\u003Cbr\u003E\u003Cbr\u003ESET circulNode to NODE(ETA:APOAPSIS, 0, 0, circularVel).\u003Cbr\u003E\u003Cbr\u003EADD circulNode.\u003Cbr\u003E\u003Cbr\u003ESet DeltaV to circulNode:DETLAV:MAG.\u003Cbr\u003ESET direction to circulNode.\u003Cbr\u003E\u003Cbr\u003ESET acc TO MAXTHRUST/MASS.\u003Cbr\u003ESET burntime TO 0.5 * acc / DeltaV.\u003Cbr\u003ESET save TO 5.\u003Cbr\u003ELOCK Tminus to circulNode:ETA - burntime.\u003Cbr\u003E\u003Cbr\u003EWHEN circulNode:ETA \u0026lt; 120 THEN {\u003Cbr\u003E AG1 ON.\u003Cbr\u003E AG2 ON.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EWHEN (TMinus \u002B save \u0026gt; 300) THEN { \u003Cbr\u003E SET WARP TO 4.\u003Cbr\u003E WHEN (TMinus \u002B save \u0026gt; 150) THEN { \u003Cbr\u003E SET WARP TO 3.\u003Cbr\u003E WHEN (TMinus \u002B save \u0026gt; 30) THEN { \u003Cbr\u003E SET WARP TO 2.\u003Cbr\u003E WHEN (TMinus \u002B save \u0026gt; 15) THEN { \u003Cbr\u003E SET WARP TO 1.\u003Cbr\u003E WHEN (TMinus \u002B save \u0026gt; 5) THEN { SET WARP TO 0. }.\u003Cbr\u003E }.\u003Cbr\u003E }.\u003Cbr\u003E }.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003EUNTIL TMinus \u002B save \u0026lt; 1 {\u003Cbr\u003E RUN launchdisplay(\u0022Second Stage\u0022, 0, 0, 0, circulNode:DETLAV:MAG, circulNode:ETA, message).\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ESET message to \u0022Second Stage Ignition!\u0022.\u003Cbr\u003ESET timer to TIME \u002B 10.\u003Cbr\u003EWHEN timer = TIME THEN { SET message TO \u0022\u0022. }.\u003Cbr\u003E\u003Cbr\u003ESET tVal to 1.\u003Cbr\u003E\u003Cbr\u003EWHEN (DeltaV \u0026lt; 50) THEN {\u003Cbr\u003E SET tVal to 0.1.\u003Cbr\u003E WHEN (DeltaV \u0026lt; 5) THEN { SET tVal to 0.025. }.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003EUNTIL DeltaV \u0026lt; 0.5 {\u003Cbr\u003E SET combthrust TO 0.\u003Cbr\u003E FOR eng IN engs {\u003Cbr\u003E SET combthrust TO combthrust \u002B eng:THRUST.\u003Cbr\u003E }.\u003Cbr\u003E SET TWR to combthrust / (MASS*9.81).\u003Cbr\u003E RUN launchdisplay(\u0022Second Stage\u0022, combthrust, TWR, tVal, circulNode:DETLAV:MAG, circulNode:ETA, message).\u003Cbr\u003E wait 0.5.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003ESET message to \u0022Orbital Insertion Complete!\u0022.\u003Cbr\u003ESET timer to TIME \u002B 10.\u003Cbr\u003EWHEN timer = TIME THEN { SET message TO \u0022\u0022. }.\u003Cbr\u003E\u003Cbr\u003EWAIT 15.\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Elaunchdisplay.ks\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cbr\u003EDECLARE PARAMETER title, thrust, twr, throttle, nodedv, eta, message.\u003Cbr\u003E\u003Cbr\u003Eset seconds TO MOD(eta,60).\u003Cbr\u003Eset minutes to FLOOR(eta/60).\u003Cbr\u003E\u003Cbr\u003ECLEARSCREEN.\u003Cbr\u003E\u003Cbr\u003Eprint title at (14,2).\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Vehicle Data:\u0022 at (5,4).\u003Cbr\u003Eprint \u0022Orbital Velocity : \u0022 \u002B ROUND(VELOCITY:ORBIT:MAG, 3) \u002B \u0022m/s\u0022 at (10,6).\u003Cbr\u003Eprint \u0022Surface Velocity : \u0022 \u002B ROUND(VELOCITY:SURFACE:MAG, 3) \u002B \u0022m/s\u0022 at (10,7).\u003Cbr\u003Eprint \u0022Altitude : \u0022 \u002B ROUND(SHIP:ALTITUDE, 3) \u002B \u0022m\u0022 at (10,8).\u003Cbr\u003Eprint \u0022Periapsis : \u0022 \u002B ROUND(SHIP:APOAPSIS, 3) \u002B \u0022m\u0022 at (10,9).\u003Cbr\u003Eprint \u0022Apoapsis : \u0022 \u002B ROUND(SHIP:PERIAPSIS, 3) \u002B \u0022m\u0022 at (10,10).\u003Cbr\u003Eprint \u0022Thrust : \u0022 \u002B ROUND(thrust, 3) \u002B \u0022kN\u0022 at (10,11).\u003Cbr\u003Eprint \u0022TWR : \u0022 \u002B ROUND(twr, 3) at (10,12).\u003Cbr\u003Eprint \u0022Throttle : \u0022 \u002B ROUND(throttle * 100, 3) \u002B \u0022%\u0022 at (10,13).\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Node Data:\u0022 at (5,15).\u003Cbr\u003Eprint \u0022Delta-V : \u0022 \u002B ROUND(nodedv, 3) \u002B \u0022m/s\u0022 at (10, 17).\u003Cbr\u003Eprint \u0022ETA : \u0022 \u002B minutes \u002B \u0022m \u0022 \u002B seconds \u002B \u0022s\u0022 at (10,18).\u003Cbr\u003E\u003Cbr\u003Eprint message at (5, 20).\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003ECan someone please tell me why it suddenly doesn\u0027t work as it should?\u003C/p\u003E\u003Cp\u003EAnd potential better ways of doing it. ;-)\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-12-07T05:54:55Z","Content":"\n\u003Cp\u003ECould the fact that you used the identifier \u0022throttle\u0022 as the name of one of the parameters for launchdisplay.ks be causing the problem?\u003C/p\u003E\u003Cp\u003ESee what happens if you rename that parameter of the launchdisplay program to some variable name you haven\u0027t used anywhere else, say \u003Cem\u003EtParam\u003C/em\u003E for example. If you try that, will it work?\u003C/p\u003E\n"},{"CreatedByName":"Warringer","CreatedById":328,"CreatedDateTime":"2014-12-07T17:44:01Z","Content":"\n\u003Cp\u003EThat turned out to be exactly the problem... \u0026gt;_\u0026gt;\u003C/p\u003E\n"}]}