{"TopicId":101109,"ForumId":29,"TopicTitle":"[SOLVED] surface Attached Parts","CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-03-02T21:48:06Z","PageNum":1,"Articles":[{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-03-02T21:48:06Z","Content":"\n\u003Cp\u003EQuestion, how can I find surface attached parts?\u003C/p\u003E\u003Cp\u003EI know how to find it to stack attached parts\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eforeach (AttachNode subAttach_node in attach_node.attachedPart.attachNodes.Where(n =\u0026gt; n.attachedPart != null))\u003Cbr\u003E{\u003Cbr\u003E   List\u0026lt;MyModule\u0026gt; myModules = subAttachPart.FindModulesImplementing\u0026lt;MyModule\u0026gt;();\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Epart has a poperty called srfAttachNode, but how can I use this?\u003C/p\u003E\u003Cp\u003ECan anyone help me?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-03T09:45:56Z\u0022 title=\u002203/03/2015 09:45  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 3, 2015\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2015-03-02T23:30:03Z","Content":"\n\u003Cp\u003EThat foreach loop is not going to yield anything. Youre finding all the modules in a given part only and not storing them anywhere.\u003C/p\u003E\u003Cp\u003EWhat you\u0027re looking for is Part.attachMode. But it depends what you want. If you want all the surface attached parts including the parent part, something like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic List\u0026lt;MyModule\u0026gt; GetModules()\u003Cbr\u003E{\u003Cbr\u003E    List\u0026lt;Part\u0026gt; srfParts = new List\u0026lt;Part\u0026gt;(this.part.children.Where(c =\u0026gt; c.attachMode == AttachModes.SRF_ATTACH)); //Adds the surface attached children parts\u003Cbr\u003E    if (this.part.attachMode == AttachModes.SRF_ATTACH) { srfParts.Add(this.part.parent); } //Adds the parent part if this part is surface attached\u003Cbr\u003E    if (srfParts.Count \u0026lt;= 0) { return new List\u0026lt;MyModule\u0026gt;(); } //No need to loop if there\u0027s no elements\u003Cbr\u003E    List\u0026lt;MyModule\u0026gt; modules = new List\u0026lt;MyModule\u0026gt;();\u003Cbr\u003E    foreach(Part part in srfParts)\u003Cbr\u003E    {\u003Cbr\u003E        modules.AddRange(part.FindModulesImplementing\u0026lt;MyModule\u0026gt;()); //Adds each part\u0027s modules\u003Cbr\u003E    }\u003Cbr\u003E    return modules;\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you don\u0027t want to include the parent part, you would do something like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic List\u0026lt;MyModule\u0026gt; GetModules()\u003Cbr\u003E{\u003Cbr\u003E    return new List\u0026lt;MyModule\u0026gt;(this.part.children.Where(c =\u0026gt; c.attachMode == AttachModes.SRF_ATTACH)  //Finds the surface attached parts\u003Cbr\u003E        .SelectMany(p =\u0026gt; p.FindModulesImplementing\u0026lt;MyModule\u0026gt;())); //Returns the modules\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-03-03T09:45:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIf you don\u0027t want to include the parent part, you would do something like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic List\u0026lt;MyModule\u0026gt; GetModules()\u003Cbr\u003E{\u003Cbr\u003E    return new List\u0026lt;MyModule\u0026gt;(this.part.children.Where(c =\u0026gt; c.attachMode == AttachModes.SRF_ATTACH)  //Finds the surface attached parts\u003Cbr\u003E        .SelectMany(p =\u0026gt; p.FindModulesImplementing\u0026lt;MyModule\u0026gt;())); //Returns the modules\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EExcelent. This looks what I need.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-03T10:57:16Z\u0022 title=\u002203/03/2015 10:57  AM\u0022 data-short=\u00229 yr\u0022\u003EMarch 3, 2015\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"}]}