{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":30,"Articles":[{"CreatedByName":"i74iv3","CreatedById":135970,"CreatedDateTime":"2015-05-18T04:00:10Z","Content":"\u003E \n\u003E Where can Scatterer version .014 be downloaded?\n\u003E Addendum: Found it! Great mod!\n\nHave been looking for a while, no joy finding 0.14, where did you download it from?"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2015-05-18T05:05:54Z","Content":"\u003E \n\u003E \n\u003E i74iv3 said:\n\u003E \n\u003E \n\u003E Have been looking for a while, no joy finding 0.14, where did you download it from?\n\u003E \n\nYou can still download it from Kerbalstuff directly [Defunct link removed by a moderator]\n\n**Edited \u003Ctime datetime=\u00222022-08-28T08:31:19Z\u0022 title=\u002208/28/2022 08:31  AM\u0022 data-short=\u00221 yr\u0022\u003EAugust 28, 2022\u003C/time\u003E by James Kerman**\n  \nlink removed"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-05-18T05:23:27Z","Content":"Old build, don\u0027t even know which. 0.90. Just loaded it up for the sunrise eclipse:\n\n[![sd5dUiBl.png](http://i.imgur.com/sd5dUiBl.png)](http://i.imgur.com/sd5dUiB.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-18T19:20:30Z","Content":"I think I\u0027m on to something (for real this time).\n\nSo basically, the current KSP postprocessing shader just takes the terrain color and adds some scattering on top of it. While the proland shaders approximate light reflected off the terrain then add that, as well as the scattering on top of the terrain color. If I can figure out a few things, I should be able to add the reflected light component, do a few adjustments and finally fix the postprocessing (and the foggy view from orbit) for good.\n\nI did a few quick tests, here\u0027s what the proland shader looks like (ignore the water shader):\n\n![z7uK8x4.jpg](http://i.imgur.com/z7uK8x4.jpg)\n\nAnd here\u0027s what it looks like if I modify it to just add scattered light on top of terrain color (what scatterer does in KSP right now)\n\n![RZqZZr7.jpg](http://i.imgur.com/RZqZZr7.jpg)\n\nSame comparison from lower altitude:\n\n![zdfGGZq.jpg](http://i.imgur.com/zdfGGZq.jpg)\n\n![0uDRdp8.jpg](http://i.imgur.com/0uDRdp8.jpg)\n\nYou can tell the lower pics look very similar to scatterer at 100% opacity.\n\n\u003E \n\u003E Old build, don\u0027t even know which. 0.90. Just loaded it up for the sunrise eclipse:\n\u003E http://i.imgur.com/sd5dUiB.png[http://i.imgur.com/sd5dUiBl.png](http://i.imgur.com/sd5dUiBl.png)\n\nHow did you even get the eclipse? They\u0027re not supposed to work in scatterer except for when sometimes it glitches and you see an eclipse where there isn\u0027t one.\n\n**Edited \u003Ctime datetime=\u00222015-05-18T19:40:28Z\u0022 title=\u002205/18/2015 07:40  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 18, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-05-18T21:18:00Z","Content":"That is realy cool blackrack! In that way the continents should be much more visible, or better said, the scattering effect will be much better applied."},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-05-18T21:47:23Z","Content":"That is looking really good. I\u0027ve been waiting at the edge of the pool till Scatterer plays nice with EVE but know that you have that working. I\u0027m going to have to jump in. Thanks **Blackrack** keep up the phenomenal work!"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-05-19T04:01:27Z","Content":"\u003E \n\u003E How did you even get the eclipse? They\u0027re not supposed to work in scatterer except for when sometimes it glitches and you see an eclipse where there isn\u0027t one.\n\nWell, I did say I was on an old build in 0.90 - I\u0027m not sure though of you mean eclipses *never* worked in scatterer or they shouldn\u0027t work under the more recent builds. Anyways, it could be thanks to the sun being so low in the atmosphere. You will notice that the sun rays are visible over the top portion of the sun only. I was pressing F1 a couple of times per second and this was the last image before the \u0022full sun\u0022 came into effect, which shouldn\u0027t have happened so soon with the moon still obscuring about 1/4 of it. So I think it was the horizon somehow."},{"CreatedByName":"rridgway","CreatedById":47495,"CreatedDateTime":"2015-05-19T05:05:33Z","Content":"A slight issue I\u0027m getting while moving in atmo. \n\n![j6ppwtl.png](http://i.imgur.com/j6ppwtl.png)\n\nIf I move the camera around the shell moves around too."},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-05-19T05:36:55Z","Content":"\u003E \n\u003E it could be thanks to the sun being so low in the atmosphere.\n\nHere\u0027s a better example of what I mean, in an image I posted a while ago:\n\n[![5neEQU3l.png](https://i.imgur.com/5neEQU3l.png)](https://i.imgur.com/5neEQU3.png) \n\nClick to embiggen and take a very close look at the sun on the horizon. You can see a line at about the height of the tracking station roof, extending across the entire horizon running just below the rim of the communications dish to the right of the sun. Below that line things look slightly different"},{"CreatedByName":"Cortek56","CreatedById":106367,"CreatedDateTime":"2015-05-19T09:18:58Z","Content":"I try with opengl, when it\u0027s better than DX11... With opengl i have atmo lines and pink pods, but with DX11 i have pink ocean, grey grass ground, and pink pods... but no lines in atmo."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-05-19T12:16:07Z","Content":"\u003E \n\u003E Here\u0027s a better example of what I mean, in an image I posted a while ago:\n\u003E https://i.imgur.com/5neEQU3.png[https://i.imgur.com/5neEQU3l.png](https://i.imgur.com/5neEQU3l.png) \n\u003E \n\u003E Click to embiggen and take a very close look at the sun on the horizon. You can see a line at about the height of the tracking station roof, extending across the entire horizon running just below the rim of the communications dish to the right of the sun. Below that line things look slightly different\n\nHuh. I can see that too.\n\n\u003E \n\u003E I try with opengl, when it\u0027s better than DX11... With opengl i have atmo lines and pink pods, but with DX11 i have pink ocean, grey grass ground, and pink pods... but no lines in atmo.\n\nOpenGl and DX11 are known to be incompatible with this mod. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nEDIT: Wait. There aren\u0027t lines in the atmo in DX11 mode?? Blackrack was making a water shader a bit ago, and there is a fix for the pink pods (idk if it works for DX11). If the grey grass ground is fixable, I wonder if DX11 compatibility is possible... :L Totally theorizing here.\n\n**Edited \u003Ctime datetime=\u00222015-05-19T12:22:03Z\u0022 title=\u002205/19/2015 12:22  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 19, 2015\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-19T14:04:48Z","Content":"Can anybody familiar with shader code tell me what the following line does?\n\n    fn.xy = texTile(_Normals_Tile, IN.uv, _Normals_TileCoords, _Normals_TileSize).xy;\n\n\u003E EDIT: Wait. There aren\u0027t lines in the atmo in DX11 mode?? Blackrack was making a water shader a bit ago, and there is a fix for the pink pods (idk if it works for DX11). If the grey grass ground is fixable, I wonder if DX11 compatibility is possible... :L Totally theorizing here.\n\nPink pods fix should work for all renderes. Full DX11 and OpenGL comaptibility should be possible, I just don\u0027t intend to work on it until I have the more important stuff worked out.\n\nEdited: Anyone ever tried getting the scene normalmap in KSP?\n\n**Edited \u003Ctime datetime=\u00222015-05-19T14:45:32Z\u0022 title=\u002205/19/2015 02:45  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 19, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-05-19T14:56:58Z","Content":"Just sent you a PM. \n\nI haven\u0027t seen the texTile function before... are you sure it isn\u0027t shipped with the proland stuff? It isn\u0027t a standard cg call, and I don\u0027t think it is from the unity cg include.\n\nIf I had to guess, given that it is using the \\_Normals, I would say it is getting the normal values (rg) from the normal map."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-05-19T15:21:30Z","Content":"\u003E Edited: Anyone ever tried getting the scene normalmap in KSP?\n\nMy expression just went from o-O -\u003E O\\_O -\u003E =D\n\nPink pods fix should work for all renderes. Full DX11 and OpenGL comaptibility should be possible, I just don\u0027t intend to work on it until I have the more important stuff worked out."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-19T16:17:41Z","Content":"\u003E \n\u003E Just sent you a PM. \n\u003E I haven\u0027t seen the texTile function before... are you sure it isn\u0027t shipped with the proland stuff? It isn\u0027t a standard cg call, and I don\u0027t think it is from the unity cg include.\n\u003E \n\u003E If I had to guess, given that it is using the \\_Normals, I would say it is getting the normal values (rg) from the normal map.\n\nThanks, you\u0027re right about texTile though, turns out it\u0027s included in proland. I\u0027ll try the method you sent me for getting the normalmap, I hope the precision will be enough.\n\n\u003E \n\u003E Here\u0027s a better example of what I mean, in an image I posted a while ago:\n\u003E https://i.imgur.com/5neEQU3.png[https://i.imgur.com/5neEQU3l.png](https://i.imgur.com/5neEQU3l.png) \n\u003E \n\u003E Click to embiggen and take a very close look at the sun on the horizon. You can see a line at about the height of the tracking station roof, extending across the entire horizon running just below the rim of the communications dish to the right of the sun. Below that line things look slightly different\n\nUnless you have the sky transparency set below 100% or you\u0027re setting a really high alpha cutoff this shouldn\u0027t happen in any of the old builds. In the new version it\u0027s not unlikely though, you can already see a similar picture I posted about 10 pages back\n\n[http://i.imgur.com/sPkqPMy.jpg](http://i.imgur.com/sPkqPMy.jpg)\n\nEdited: I guess since you\u0027re seeing clouds in an old build you already have transparency lowered so that explains it.\n\n**Edited \u003Ctime datetime=\u00222015-05-19T16:38:22Z\u0022 title=\u002205/19/2015 04:38  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 19, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-05-19T16:40:44Z","Content":"\u003E \n\u003E Anyone ever tried getting the scene normalmap in KSP?\n\nMaybe this could help you?: [http://forum.kerbalspaceprogram.com/threads/111101-Plugin-Tool-0-90-x-HeightmapExtractor-HeightmapManager-v1-0-19-02-15](https://forum.kerbalspaceprogram.com/threads/111101-Plugin-Tool-0-90-x-HeightmapExtractor-HeightmapManager-v1-0-19-02-15)\n\nDon\u0027t know if it\u0027s what you are searching for... ![:blush:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-19T16:56:07Z","Content":"\u003E \n\u003E Maybe this could help you?: [http://forum.kerbalspaceprogram.com/threads/111101-Plugin-Tool-0-90-x-HeightmapExtractor-HeightmapManager-v1-0-19-02-15](https://forum.kerbalspaceprogram.com/threads/111101-Plugin-Tool-0-90-x-HeightmapExtractor-HeightmapManager-v1-0-19-02-15)\n\u003E Don\u0027t know if it\u0027s what you are searching for... ![:blush:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif)\n\nI was actually looking for the normalmap for the currently rendered scene. If you\u0027re familiar with the \u0022toggle depth buffer\u0022 button in scatterer it\u0027s similar but it looks like this [https://bitwisegames.files.wordpress.com/2011/04/thesphere-normals.png](https://bitwisegames.files.wordpress.com/2011/04/thesphere-normals.png), it tells you which direction each surface is pointing. I need it to determine the reflected light correctly.\n\nDon\u0027t worry though, rbray already sent me a way to do it."},{"CreatedByName":"Olsson","CreatedById":20218,"CreatedDateTime":"2015-05-19T23:59:33Z","Content":"\u003E \n\u003E A slight issue I\u0027m getting while moving in atmo. \n\u003E [http://i.imgur.com/j6ppwtl.png](http://i.imgur.com/j6ppwtl.png)\n\u003E \n\u003E If I move the camera around the shell moves around too.\n\nI have this issue too.\n\nAny fixes?"},{"CreatedByName":"Vandest","CreatedById":122250,"CreatedDateTime":"2015-05-20T00:54:19Z","Content":"Hello! This mod is great!!\n\nI play with this settings:\n\n(For the pink textures, I was change no-PQS files in the ReplacementShaders folder)\n\n\\_ D3DX11\n\n\\_ KSP settings:\n\nVideo:\n\nRes: 1650x1050\n\nFullscreen = True\n\nAnti-Aliasing = x8\n\nV Sync = Adaptative (Nvidia)\n\nPixel Light Count = 8\n\nShadows Cascades = 4\n\nScenery:\n\nTerrain Detail = High\n\nScatter Density = 100%\n\nRendering:\n\nRender Quality Level = Fantastic\n\nTexture Quality = Full Res\n\nwith this visual mods:\n\n\\_ EVE with RC settings and textures\n\n\\_ Texture Replacer with RC settings and textures\n\n\\_ Planet Shine\n\n\\_ Distant Object\n\n\\_ And sometime, Scatterer!!\n\nand some other mods... (MechJeb, SoundtrackEditor, Chatterer, LanguagePatches)\n\nMy settings for Scatterer:\n\nforceOFFaniso = False\n\nextinctionCoeff = 10\n\natmosphereGlobalScale = 0.999 (for 1, I got a bug with ocean and grass)\n\npostProcessingAlpha = 0.5\n\npostProcessingScale = 1\n\npostProcessDepth = 0.065\n\npostProcessExposure = 0.18\n\nm\\_HDRExposure = 0.2\n\nalphaCutoff = 0.01\n\nalphaGlobal = 0.9\n\nWhy \u0022sometime\u0022 for Scatterer? For some issues when I leave atmosphere:\n\nBetween 20-200km:\n\n![72D3BFF7534C7E0B8063658C9318A7EBC9BE3421](http://images.akamai.steamusercontent.com/ugc/544153074123496375/72D3BFF7534C7E0B8063658C9318A7EBC9BE3421/)\n\nBetween 200-450km:\n\n![1D1FDA094AFA86C871E0B8E99641B3068479A51E](http://images.akamai.steamusercontent.com/ugc/544153074123496050/1D1FDA094AFA86C871E0B8E99641B3068479A51E/)\n\nUp 500km:\n\n![A4508DF1DC350CFEDD155098C2AFC480F8B8DD90](http://images.akamai.steamusercontent.com/ugc/544153074123529296/A4508DF1DC350CFEDD155098C2AFC480F8B8DD90/)\n\n![F22E674AE9A76EF36527C510D4DD9359370E65D6](http://images.akamai.steamusercontent.com/ugc/544153074123559487/F22E674AE9A76EF36527C510D4DD9359370E65D6/)\n\nFor this time, as proposed by [**Avera9eJoe**](https://forum.kerbalspaceprogram.com/members/82464-Avera9eJoe), with a toggle mod option at altitude of 20-30km, \u0022sometime\u0022 could be \u0022everytime\u0022.\n\nBut, it would be nice if there is a better solution."},{"CreatedByName":"35mmShowdown","CreatedById":67594,"CreatedDateTime":"2015-05-20T00:56:45Z","Content":"Hey, experienced a little graphical bug when installing the new .015 update- A small purple glyph appears around the VAB, and several parts in the Editor windows, in several categories, also have their textures replaced by the same color purple- hadn\u0027t run into this with the previous update.\n\nI\u0027ve experienced this in both modded and stock version of the game, on my primary machine.\n\n![HfIAxvt.jpg](http://i.imgur.com/HfIAxvt.jpg)\n\n![4mW365T.jpg](http://i.imgur.com/4mW365T.jpg)"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-05-20T01:02:42Z","Content":"\u003E \n\u003E Hey, experienced a little graphical bug when installing the new .015 update- A small purple glyph appears around the VAB, and several parts in the Editor windows, in several categories, also have their textures replaced by the same color purple- hadn\u0027t run into this with the previous update.\n\u003E I\u0027ve experienced this in both modded and stock version of the game, on my primary machine.\n\u003E \n\u003E [http://i.imgur.com/HfIAxvt.jpg](http://i.imgur.com/HfIAxvt.jpg)\n\u003E \n\u003E [http://i.imgur.com/4mW365T.jpg](http://i.imgur.com/4mW365T.jpg)\n\nMerge the replacementshader folder from a previous release of Scatterer with the current release\u0027s replacementshader folder and that should fix it for now."},{"CreatedByName":"Odyssey","CreatedById":28858,"CreatedDateTime":"2015-05-20T02:05:25Z","Content":"\u003E \n\u003E I have this issue too.\n\u003E Any fixes?\n\nAlso having this trouble. Anyone got a fix?"},{"CreatedByName":"RobotsAndSpaceships","CreatedById":122975,"CreatedDateTime":"2015-05-20T05:09:31Z","Content":"Have people lost the ability to read? The fix to the pink parts bug has been posted once every page.\n\n**Edited \u003Ctime datetime=\u00222015-05-20T05:13:52Z\u0022 title=\u002205/20/2015 05:13  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 20, 2015\u003C/time\u003E by RobotsAndSpaceships**"},{"CreatedByName":"Darkway","CreatedById":142879,"CreatedDateTime":"2015-05-20T07:56:06Z","Content":"TBH It sems to be necessary to post quick fixes to the front page for common bugs, and refresh the known issues list, so people dont post the same error, and wait for the same fixes over over and over again. I know that this should not be necessary, but this is really getting out of hand."},{"CreatedByName":"AlphaAsh","CreatedById":105348,"CreatedDateTime":"2015-05-20T08:10:05Z","Content":"\u003E \n\u003E TBH It sems to be necessary to post quick fixes to the front page for common bugs, and refresh the known issues list, so people dont post the same error, and wait for the same fixes over over and over again. I know that this should not be necessary, but this is really getting out of hand.\n\nIf only it were that simple. Instead of then posting the actual fix on every page, you\u0027re then left having to post \u0022see the OP for the fix\u0022 every bloody page. And if we had stickies you\u0027d still have to post \u0022see stickies\u0022 every bloody page.\n\nThis is the Curse of Support - lazy users who can\u0027t be arsed to just read back a few posts."}]}