{"TopicId":31935,"ForumId":29,"TopicTitle":"scale and units in KSP; physics tweeks","CreatedByName":"FireStormOOO","CreatedById":69144,"CreatedDateTime":"2013-06-07T23:23:19Z","PageNum":1,"Articles":[{"CreatedByName":"FireStormOOO","CreatedById":69144,"CreatedDateTime":"2013-06-07T23:23:19Z","Content":"\n\u003Cp\u003EI\u0027m trying to write a plugin that modifies physics to make rockets less wobbly. I was able to successfully replace the default joint with one of my own creation, but the behavior is... off. I believe the issue is one of scale.\u003C/p\u003E\u003Cp\u003EI\u0027m currently working under the assumption that:\u003C/p\u003E\u003Cp\u003E1 unit of mass == 1 metric tonne\u003C/p\u003E\u003Cp\u003E1 unit distance == 1 meter\u003C/p\u003E\u003Cp\u003EBut that doesn\u0027t appear to be working. Is that incorrect, or do I have an issue elsewhere?\u003C/p\u003E\n"},{"CreatedByName":"FireStormOOO","CreatedById":69144,"CreatedDateTime":"2013-06-08T17:53:08Z","Content":"\n\u003Cp\u003EAlright, I ripped the model of the FL-400 fuel tank out of the MU format and it appears the scale is 1 unit = 1.25 meters. That\u0027s still not enough to account for the problems I\u0027m having. Forces are all in kN? And pressure is then 1 unit force / 1 square unit distance, or .640 kPa?\u003C/p\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-06-10T09:59:40Z","Content":"\n\u003Cp\u003EI believe a some of the wobble is caused by imprecision rather than actual forces, if you run a search for wobbly joints in the unity engine generally then the solution is usually to turn up the calculation precision rather than rescaling for appropriate forces.\u003C/p\u003E\n"},{"CreatedByName":"FireStormOOO","CreatedById":69144,"CreatedDateTime":"2013-06-12T15:42:56Z","Content":"\n\u003Cp\u003EAny idea how one might do that? I don\u0027t think it\u0027s one of the parameters on the joint. What bothers me most is the oscillations when using an autopilot mod like mechjeb with a large rocket; gets nasty real quick, and 2/3 of the rocket ends up as space tape. I did find a dampening parameter that I can modify, and it did seem to help. There\u0027s still the issue where rockets aren\u0027t \u0022stiff\u0022 enough, so what I\u0027m trying to do is make it so that they can handle the same amount of load, but deform much less before breaking; it\u0027s proved to be very finicky.\u003C/p\u003E\n"},{"CreatedByName":"OrbitusII","CreatedById":57305,"CreatedDateTime":"2013-06-12T23:24:06Z","Content":"\n\u003Cp\u003EOne of the most effective ways to reduce rigidbody wobble in Unity is to add more joints between the rigidbodies. It\u0027s like adding more screws to the connection between two pieces of wood minus the orientation and volume requirements caused by the wood and screws (Unity joints can be way off in space but still connecting two objects, and you can have two joints infinitesimally close to each other).\u003C/p\u003E\n"},{"CreatedByName":"FireStormOOO","CreatedById":69144,"CreatedDateTime":"2013-06-13T12:44:49Z","Content":"\n\u003Cp\u003EI haven\u0027t given up on this, but it\u0027s tedious beyond words to reload KSP every time I make a tweak. I need to figure out how to add a debug GUI so I can tweak the joints without a reload. I also need to make it so this works on the whole ship rather than as a part module. Nothing new or complicated there. I\u0027ll update on progress sometime later; I\u0027m modeling some simple parts at the same time, so it\u0027s slow going.\u003C/p\u003E\n"},{"CreatedByName":"atraos","CreatedById":76331,"CreatedDateTime":"2013-07-27T20:59:00Z","Content":"\n\u003Cp\u003EFireStorm are you still working on this? Because I wanted to do something like this myself, and I\u0027d like to help you or at least discuss the progress you made, so that I can take over from there\u003C/p\u003E\n"},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2013-07-28T08:11:29Z","Content":"\n\u003Cp\u003EHat\u0027s off to anyone willing to try fixing the stupid wobbly connections. Just sign this release form, insurance card, blood type, organ donor card, next of kin, living will, preferred institution for commitment, burial instructions, and you\u0027re good to mod.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/9944-Plugin-Part-0-17-KIS-Connect-V7a-2Oct12-MIT\u0022 rel=\u0022external nofollow\u0022\u003EHere\u003C/a\u003E is where I left off, feel free to use/ignore anything there. The issue was temporarily solved in 0.17, but broke immediately when we got the fubar docking code, and I couldn\u0027t fix it without breaking the EULA, or doing insane things with Unity directly.\u003C/p\u003E\u003Cp\u003EBasically, the rockets are wobbly because Harv decided way back that it was just too hard to set up configurable joints properly(which are very poorly documented), and opted instead to use the quick and easy fixed joint, which is basically intended for stuff like making spitballs adhere to walls, not holding a rocket together.\u003C/p\u003E\u003Cp\u003E You don\u0027t necessarily have to use configurable joints to fix it, though that\u0027s what I did, the surface connections are/were hinge joints, which is why they don\u0027t wobble in quite the same manner. Settings like the physics iteration rate were hidden far beyond the layer of code we had access to with plugins back when I left, and I doubt you\u0027ll have much luck now, unless you manage to talk directly to Unity in the game scene, and get them to stick. A very serious problem I had was that fixing the wobble, and thereby making rockets an actual (mostly) rigid body, broke the terrain collision code; apparently, it actually relies on the wobblyness to compensate for it\u0027s inability to actually simulate terrain collision.\u003C/p\u003E\u003Cp\u003ETo directly answer your original question: there is no answer. The physics engine Unity uses has a basic limit of around 10 for mass values. Obviously, 10kg parts means a very small rocket. Harv\u0027s solution way back when was to use mass units of \u0022tons\u0022, or kilo-kilo-grams, and thrust(force) units of kilo-newtons, which together cancel out the extra \u0022kilo\u0022 when calculating acceleration.\u003C/p\u003E\u003Cp\u003EI\u0027m assuming you\u0027re asking about atmospheric pressures. Through testing(back in 0.17), I figured out the atmospheric model was basically using constant-temperature pressures equal to Earth std atmospheres. In absolute units, they convert to pascals the same way Earth atmospheres do, just remember the temperature is always 60F when using the gas laws.\u003C/p\u003E\u003Cp\u003ESo:\u003C/p\u003E\u003Cp\u003E1 KerboGram = 1000 kg\u003C/p\u003E\u003Cp\u003E1 KerboMeter = 1 m\u003C/p\u003E\u003Cp\u003E1 KerboSecond = 1 s\u003C/p\u003E\u003Cp\u003E1 KerboForce = 1000 kN\u003C/p\u003E\u003Cp\u003E1 KerboPressure = 1 atm = 101325 Pa\u003C/p\u003E\u003Cp\u003Eand it\u0027s always a chilly 60F outside.\u003C/p\u003E\u003Cp\u003EThe problem is that through testing gravity, I found out Harv still has/had the planets using masses in kg, which causes a very bogus big G, and throws the whole physics thing out the window. You don\u0027t notice it as much in game, because it\u0027s all specifically normalized to have the surface of Kerbin be the same as the surface of Earth, but if you dig at all, it falls apart fast. However, as long as you\u0027re only using Force \u002B Mass -\u0026gt; Acceleration, the failure to scale length and time appropriately won\u0027t bother you too much.\u003C/p\u003E\n"}]}