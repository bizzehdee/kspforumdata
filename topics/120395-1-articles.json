{"TopicId":120395,"ForumId":29,"TopicTitle":"Unknown Object Parameters","CreatedByName":"Ulico","CreatedById":136006,"CreatedDateTime":"2015-09-08T00:52:59Z","PageNum":1,"Articles":[{"CreatedByName":"Ulico","CreatedById":136006,"CreatedDateTime":"2015-09-08T00:52:59Z","Content":"\n\u003Cp\u003ESo I\u0027m working on one of my first mods and it has to do with asteroids. My question is let\u0027s say that in the tracking station there is an unknown object (which is just an untracked asteroid). Let\u0027s say in my plugin I want to do something with all class b asteroids. How do I find out what class every asteroid in the tracking station is. Sorry if this is a confusing question, I\u0027m a noob at plugins. If you need clarification just ask!\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-09-08T02:43:14Z","Content":"\n\u003Cp\u003EBecause KSP is awesome, there are two values that indicate asteroid size and only one of them is always reliable, but isn\u0027t always available. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhen an asteroid is untracked, or hasn\u0027t been actually visited (as in, you haven\u0027t traveled to within 2.5km of it) you can reliably get the asteroid size based on its Vessel.DiscoveryInfo.Size value. This value is, I think, just an integer from 0-4, 0 is class A, 1 is class B, etc... \u003C/p\u003E\u003Cp\u003EThe problem is, once a vessel docks to that asteroid it becomes Size = 2, regardless of the original asteroid size class (all regular vessels that you launch are Size = 2). To get the asteroid size at this point you have to look at the asteroid\u0027s ModuleAsteroid PartModule, then look at the last character of the prefabBaseURL field; the last character is A, B, C, etc... It\u0027s just a string, and it\u0027s persistent, so you should be able to access it while the asteroid isn\u0027t loaded. The only problem is that the asteroid doesn\u0027t have a ModuleAsteroid instance (or it isn\u0027t actually loaded) until you visit the asteroid.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-08T02:45:19Z\u0022 title=\u002209/08/2015 02:45  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 8, 2015\u003C/time\u003E by DMagic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tomf","CreatedById":57809,"CreatedDateTime":"2015-09-08T17:48:57Z","Content":"\n\u003Cp\u003EBefore you do that you are going to need to get all the asteroids that are currently spawned. I am doing this with\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EIEnumerable\u0026lt;Vessel\u0026gt; asteroids= FlightGlobals.Vessels.Where(v =\u0026gt; v.vesselType == VesselType.SpaceObject);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ethen you can loop through the asteroids and check the prefabbaseurl\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eforeach (Vessel asteroid in asteroids)\u003Cbr\u003E            {\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ulico","CreatedById":136006,"CreatedDateTime":"2015-09-08T21:16:05Z","Content":"\n\u003Cp\u003ETomf, will this find asteroids that are not being tracked?\u003C/p\u003E\n"},{"CreatedByName":"tomf","CreatedById":57809,"CreatedDateTime":"2015-09-08T21:59:11Z","Content":"\n\u003Cp\u003EThat will find you all the asteroids.\u003C/p\u003E\u003Cp\u003ETo get only the ones that are being tracked I think you will have to do something like\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Easteroid.DiscoveryInfo.HaveKnowledgeAbout(DiscoveryLevels.Name)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eexperiment with a few different levels unto you get the one you want though\u003C/p\u003E\n"},{"CreatedByName":"Ulico","CreatedById":136006,"CreatedDateTime":"2015-09-08T23:15:04Z","Content":"\n\u003Cp\u003EOK, so like I said before, I\u0027m really new to coding in general. Microsoft Visual Studio is not understanding IEnumerable\u0026lt;Vessel\u0026gt;. Am I missing a reference (I\u0027ve added Assembly-CSharp.dll and UnityEngine.dll). Please Help!\u003C/p\u003E\u003Cp\u003EEDIT: Ok, I added some using System.Collections.Generic to the top and now it recognizes IEnumerable but still not asteroid (in asteroid.vessel.DiscoveryInfo.size.Value) and some other things as well.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-08T23:25:46Z\u0022 title=\u002209/08/2015 11:25  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 8, 2015\u003C/time\u003E by Ulico\u003C/strong\u003E\n\u003C/span\u003E\n"}]}