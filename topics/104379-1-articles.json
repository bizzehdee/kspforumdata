{"TopicId":104379,"ForumId":15,"TopicTitle":"emissive problems in unity/ ModuleAnimateHeat not working","CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-04-18T16:42:35Z","PageNum":1,"Articles":[{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-04-18T16:42:35Z","Content":"Hi all I am having problems with emissives for some engines I am making, I have never had any problems with emissives before but have never done them for an engine/ ones that are triggered by a module before so I am probably just going wrong somewhere down the line and haven\u0027t realised, although I have revisited CardBoardBoxProcessor\u0027s tutorial, followed it step by step, and still come out with the same result, basically the problem is that the engine emissive is always at the frame that the animation is on when it is written in unity, so if it\u0027s at the start of the animation then nothing appears, if it\u0027s at the end its always at its most intense glow, this is with \u0022always animate\u0022 unticked and the animation on the root GameObject at the top of the hierarchy. this is what my unity screen looks like:\n\n![tumblr_nn0gvw28x81r0o48lo1_1280.png](https://40.media.tumblr.com/216287f0de336463b2bb4e09b935b7e7/tumblr_nn0gvw28x81r0o48lo1_1280.png)\n\nand this is what my config looks like:\n\n\u003E \n\u003E PART{\n\u003E // Kerbal Space Program - Part Config\n\u003E \n\u003E // LiLFA\n\u003E \n\u003E // \n\u003E \n\u003E // --- general parameters ---\n\u003E \n\u003E name = 1.25mLiLFA\n\u003E \n\u003E module = Part\n\u003E \n\u003E author = Squiggsy\n\u003E \n\u003E // --- asset parameters ---\n\u003E \n\u003E mesh = model.mu\n\u003E \n\u003E rescaleFactor = 1\n\u003E \n\u003E // --- node definitions ---\n\u003E \n\u003E node\\_stack\\_top = 0.0, 0.0 , 0.0, 0.0, 1.0, 0.0, 1\n\u003E \n\u003E node\\_stack\\_bottom = 0.0, -1.0, 0.0, 0.0, 1.0, 0.0, 1\n\u003E \n\u003E // --- FX definitions ---\n\u003E \n\u003E fx\\_exhaustFlame\\_blue = 0.0, -0.0, 0.0, 0.0, 1.0, 0.0, running\n\u003E \n\u003E fx\\_exhaustLight\\_blue = 0.0, -0.0, 0.0, 0.0, 0.0, 1.0, running\n\u003E \n\u003E // --- Sound FX definition ---\n\u003E \n\u003E sound\\_vent\\_medium = engage\n\u003E \n\u003E sound\\_rocket\\_hard = running\n\u003E \n\u003E sound\\_vent\\_soft = disengage\n\u003E \n\u003E sound\\_explosion\\_low = flameout\n\u003E \n\u003E // --- editor parameters ---\n\u003E \n\u003E TechRequired = ionPropulsion\n\u003E \n\u003E entryCost = 16000\n\u003E \n\u003E cost = 7500\n\u003E \n\u003E category = Propulsion\n\u003E \n\u003E subcategory = 0\n\u003E \n\u003E title = LiLFA EPS125\n\u003E \n\u003E manufacturer = SquiggsySpace Research\n\u003E \n\u003E description = The LiLFA (Lithium Lorenz Force Accellerator) uses what the boys in the lab describe as \u0022some kind of magic, or plasma, we\u0027re not sure\u0022 to propel ships at high levels of thrust for such an efficient engine, with the trade off of extemely high energy usage. Designed for use in a vacuum\n\u003E \n\u003E // attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\n\u003E \n\u003E attachRules = 1,0,1,0,0\n\u003E \n\u003E // --- standard part parameters ---\n\u003E \n\u003E mass = 0.05\n\u003E \n\u003E dragModelType = default\n\u003E \n\u003E maximum\\_drag = 0.2\n\u003E \n\u003E minimum\\_drag = 0.2\n\u003E \n\u003E angularDrag = 2\n\u003E \n\u003E crashTolerance = 7\n\u003E \n\u003E maxTemp = 3600\n\u003E \n\u003E RESOURCE\n\u003E \n\u003E {\n\u003E \n\u003E  name = LiquidLithium\n\u003E \n\u003E  amount = 500\n\u003E \n\u003E  maxAmount = 500\n\u003E \n\u003E }\n\u003E \n\u003E RESOURCE\n\u003E \n\u003E {\n\u003E \n\u003E  name = ElectricCharge\n\u003E \n\u003E  amount = 350\n\u003E \n\u003E  maxAmount = 350\n\u003E \n\u003E }\n\u003E \n\u003E MODULE\n\u003E \n\u003E {\n\u003E \n\u003E  name = ModuleEngines\n\u003E \n\u003E  thrustVectorTransformName = thrustTransform\n\u003E \n\u003E  exhaustDamage = False\n\u003E \n\u003E  ignitionThreshold = 0.1\n\u003E \n\u003E  minThrust = 0\n\u003E \n\u003E  maxThrust = 24\n\u003E \n\u003E  heatProduction = 600\n\u003E \n\u003E  fxOffset = 0, 0, 0.21\n\u003E \n\u003E  PROPELLANT\n\u003E \n\u003E  {\n\u003E \n\u003E  name = LiquidLithium\n\u003E \n\u003E  ratio = 0.5\n\u003E \n\u003E  }\n\u003E \n\u003E  PROPELLANT\n\u003E \n\u003E  {\n\u003E \n\u003E  name = ElectricCharge\n\u003E \n\u003E  ratio = 3\n\u003E \n\u003E  }\n\u003E \n\u003E  atmosphereCurve\n\u003E \n\u003E  {\n\u003E \n\u003E  key = 0 4077\n\u003E \n\u003E  key = 1 4077\n\u003E \n\u003E  }\n\u003E \n\u003E MODULE\n\u003E \n\u003E {\n\u003E \n\u003E  name = ModuleAnimateHeat\n\u003E \n\u003E  ThermalAnim = lilfaengineemissive\n\u003E \n\u003E }\n\u003E \n\u003E }\n\nif anyone has any ideas I would be so very grateful I have put off posting on here and tried multiple times to find the solution to this myself but after countless combinations of different attempts at fixes I am no closer to finding the solution :\\\n\n**Edited \u003Ctime datetime=\u00222015-04-18T16:48:19Z\u0022 title=\u002204/18/2015 04:48  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 18, 2015\u003C/time\u003E by Squiggsy**"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-04-18T19:21:17Z","Content":"ok so there is definitely something wrong here and I cannot for the life of me figure it out, decided to try with FXModuleAnimateThrottle instead to see if it was something wrong with my code for ModuleAnimateHeat but it still has the same problem, the animation doesnt play, it is just permanently on whatever frame it was on when I write the model and textures in parttools :\\ I have tried every combination I can possibly think off and just always get the same result"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-04-22T16:18:59Z","Content":"![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif) guess no ideas are forthcoming, this is a shame I guess I will omit the emissives then"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-04-22T16:25:52Z","Content":"which version of Unity are you using? if you want to share the unity assets I\u0027ll take a look at it"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-04-29T22:11:33Z","Content":"Ah sorry for the late reply I had given up on this post haha\n\nI am using version 4.2.2 and yes in the morning when I have the time I will definitely share the unity assets if thats ok, thanks for the reply ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nyour tutorials are amazing and have helped me so much thank you for making them by the way!"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-04-29T22:33:34Z","Content":"There is a way to force the latest versions of Unity (4.3\u002B) to use the legacy animation method for animated emissives:\n\n\u003E \n\u003E I\u0027m using the latest version of Unity, and in order to get animated emissives to work, I had to hack up the animation files with a text editor to force it to use the legacy (i.e. not the new mecanim) animation system:\n\u003E [http://answers.unity3d.com/questions/622005/legacy-animation-system-cannot-animate-colors.html](http://answers.unity3d.com/questions/622005/legacy-animation-system-cannot-animate-colors.html)\n\u003E \n\u003E Since I could get this hack to work consistently in my projects, I should probably write a proper tutorial for this - maybe this weekend.\n\n\u003E \n\u003E With a text editor? I tried and all I see are random symbols\n\n\u003E \n\u003E Whoops, missing bit of critical info!\n\u003E In Unity, go to **Edit \u003E Project Settings \u003E Editor** - in the **Inspector** window/dialog/pane that appears, set the **Asset Serialization** mode to **Force Text**. This forces Unity to recompile all the animation files to use plain text rather than the default binary setting.\n\n\u003E \n\u003E Ok, finally managed to fix it\n\u003E \n\u003E \n\u003E 1. Open Unity\n\u003E 2. Click the little menu icon to the right of the **Inspector** tab\n\u003E 3. Select the **Debug** option\n\u003E 4. Select your animation in the **Project** Tab\n\u003E 5. In the Inspector change **Animation type** from **2** to **1**\n\u003E 6. Go to **Edit \u003E Project Settings \u003E Editor**\n\u003E 7. In the **Inspector** tab set **Asset Serialization mode** to **Force Text**\n\u003E 8. Browse your PC for the .anim file and open it with a plain text editor, notepad will do\n\u003E 9. Change all **ClassID** from **23** to **21**\n\u003E 10. Remove all **material.** prefixes from the **attribute:** sections but leave the rest (ie \u0022material.\\_EmissiveColor.r\u0022 becomes \u0022\\_EmissiveColor.r\u0022)\n\u003E 11. **Save** the file\n\u003E 12. **Export** your project\n\u003E 13. Remember to assign the animation in the config file\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Thanks to Sumghai for the help"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-04-30T08:54:23Z","Content":"\u003E \n\u003E There is a way to force the latest versions of Unity (4.3\u002B) to use the legacy animation method for animated emissives:\n\nohh thanks for that bit of info I might try that out today and see if it fixes my problem, got some new stuff im working on for a project and a couple of engines are included into the command pod for it (dragon v2 style):\n\n![ULSpVju.png](http://i.imgur.com/ULSpVju.png)"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-05-08T19:59:53Z","Content":"I FINALLY GOT IT TO WORK\n\nsorry i keep completely forgetting about this post and getting sidetracked, i have NO IDEA what I did right this time which is a shame but I know the steps I took so I guess I just have to repeat them painstakingly from now on.."},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2015-05-08T21:08:39Z","Content":"\u003E \n\u003E I FINALLY GOT IT TO WORK\n\u003E i have NO IDEA what I did right this time\n\nWelcome to KSP/Unity modding, It won\u0027t be the last time. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-05-08T23:26:48Z","Content":"\u003E \n\u003E Welcome to KSP/Unity modding, It won\u0027t be the last time. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nhaha it wasn\u0027t the first time either ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) god unity does my head in sometimes, although in truth it is invariably not unitys fault but my own , I just hope I can repeat these good results in future. I finally got moduleanimatethrottle to work the other day too so i must be doing something right!"}]}