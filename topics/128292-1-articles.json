{"TopicId":128292,"ForumId":20,"TopicTitle":"Memory Leak -- somewhere","CreatedByName":"mjl1966","CreatedById":105019,"CreatedDateTime":"2015-12-20T21:24:27Z","PageNum":1,"Articles":[{"CreatedByName":"mjl1966","CreatedById":105019,"CreatedDateTime":"2015-12-20T21:24:27Z","Content":"\n\u003Cp\u003E\nI don\u0027t have a whole lot of helpful specifics, but thought this is something the community might want to look at.\u00A0 Basically, there is a memory leak between the interior of the VAB and elsewhere.\u00A0 When I start out in the VAB, with the current mods I have installed, KSP is taking about 3G of memory.\u00A0 That\u0027s a lot to begin with.\u00A0 After I work on something for a while, it\u0027s up to just under 3.5G.\u00A0 So, it stands to reason that the additional memory is taken up by parts I\u0027m using to assemble my craft.\u00A0 However, when I leave the VAB, memory is still hanging in at ~3.5.\u00A0 In fact, it goes over 3.5 while loading the main facility screen and then drops back down to where it was in the VAB.\u00A0 Going all the way back to the main screen doesn\u0027t even help.\u00A0 Once the memory use goes up, it doesn\u0027t seem to come back down.\u00A0 Assets are not releasing memory when they go out of scope.\n\u003C/p\u003E\n\u003Cp\u003E\nBottom line: memory is not being cleaned up between the different levels.\u00A0 Is this a Unity thing?\u00A0 A SQUAD thing?\u00A0 A mods thing?\u00A0 I don\u0027t know.\u00A0 But I do know that it just makes an already delicate memory problem even worse.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-20T21:25:23Z\u0022 title=\u002212/20/2015 09:25  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 20, 2015\u003C/time\u003E by mjl1966\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-12-21T15:54:50Z","Content":"\n\u003Cp\u003E\nUnfortunately you\u0027ve reached that upper limit where you\u0027re going to be crashing constantly, garbage collection problem or no. There are a few limited things you can do outside of using Linux for 64bit or the \u0022community hack\u0022. Using the community hack is kind of like drilling holes in your head to cure a headache though. If you use it and mods break, expect no support.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d suggest turning your texture quality to medium in the graphics settings as a first step.\n\u003C/p\u003E\n\u003Cp\u003E\nYou can also try to manually prune some of your mods (get rid of the parts you don\u0027t use, but that consume memory), but the difficulty of doing so varies tremendously with the mod (for example, trying to prune Ven\u0027s Stock Revamp is something akin to actual rocket science).\n\u003C/p\u003E\n\u003Cp\u003E\nThen you can try the following (pulled from: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/90151-105-realism-overhaul-v1072-dec-17/\u0026amp;do=findComment\u0026amp;comment=1524562\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/90151-105-realism-overhaul-v1072-dec-17/\u0026amp;do=findComment\u0026amp;comment=1524562):\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022text-align:center;\u0022\u003E\n\u003Cem\u003E\u003Cstrong\u003E\u003Cu\u003E\u003Cspan style=\u0022color:rgb(255,0,0);\u0022\u003E\u003Cspan style=\u0022font-size:28px;\u0022\u003E!BACK UP YOUR SAVES BEFORE TRYING ANYTHING!\u003C/span\u003E\u003C/span\u003E\u003C/u\u003E\u003C/strong\u003E\u003C/em\u003E\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00221524562\u0022 data-ipsquote-contentid=\u002290151\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221415836929\u0022 data-ipsquote-userid=\u002276828\u0022 data-ipsquote-username=\u0022Felger\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn \u200E11\u200E/\u200E13\u200E/\u200E2014 at 6:02 PM, Felger said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFollow these steps to set launch options for Kerbal Space Program to reduce RAM footprint and allow alt-tabbing while loading:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003E\nEdit settings.cfg in the root KSP install folder, change FULLSCREEN = True to FULLSCREEN = False\n\u003C/li\u003E\n\u003Cli\u003E\nCreate a desktop shortcut for KSP.exe\n\u003C/li\u003E\n\u003Cli\u003E\nRight click on it, and open up the properties of that shortcut\n\u003C/li\u003E\n\u003Cli\u003E\nAdd -force-opengl -popupwindow following the path to your KSP.exe.\n\u003C/li\u003E\n\u003Cli\u003E\nLaunch the game, if you get graphical glitches (My text is glitchy with -force-opengl) try:\n\u003C/li\u003E\n\u003Cli\u003E\nReplace with -force-d3d11 -popupwindow in the path to your KSP.exe.\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cdiv\u003E\nIn the end, your Properties window should look like one of these:\n\u003C/div\u003E\n\u00A0\n\u003Cblockquote\u003E\n\u003Cimg alt=\u0022Oemlrlq.png\u0022 src=\u0022http://i.imgur.com/Oemlrlq.png\u0022\u003E\u003C/blockquote\u003E\n\u003C/li\u003E\n\u003C/ol\u003E\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBe aware the d3d11 fix\u00A0has reportedly\u00A0caused save file corruption, so I reassert:\n\u003C/p\u003E\n\u003Cp style=\u0022text-align:center;\u0022\u003E\n\u003Cu\u003E\u003Cspan style=\u0022color:rgb(255,0,0);\u0022\u003E\u003Cspan style=\u0022font-size:28px;\u0022\u003E\u003Cstrong\u003E\u003Cem\u003E!BACK UP YOUR SAVES BEFORE TRYING ANYTHING!\u003C/em\u003E\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/u\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-21T19:11:25Z\u0022 title=\u002212/21/2015 07:11  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 21, 2015\u003C/time\u003E by Randazzo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2015-12-21T20:11:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222331260\u0022 data-ipsquote-contentid=\u0022128292\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221450713290\u0022 data-ipsquote-userid=\u0022136468\u0022 data-ipsquote-username=\u0022Randazzo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Randazzo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUnfortunately you\u0027ve reached that upper limit where you\u0027re going to be crashing constantly, garbage collection problem or no. There are a few limited things you can do outside of using Linux for 64bit or the \u0022community hack\u0022. Using the community hack is kind of like drilling holes in your head to cure a headache though. If you use it and mods break, expect no support.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d suggest turning your texture quality to medium in the graphics settings as a first step.\n\u003C/p\u003E\n\u003Cp\u003E\nYou can also try to manually prune some of your mods (get rid of the parts you don\u0027t use, but that consume memory), but the difficulty of doing so varies tremendously with the mod (for example, trying to prune Ven\u0027s Stock Revamp is something akin to actual rocket science).\n\u003C/p\u003E\n\u003Cp\u003E\nThen you can try the following (pulled from: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/90151-105-realism-overhaul-v1072-dec-17/\u0026amp;do=findComment\u0026amp;comment=1524562\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/90151-105-realism-overhaul-v1072-dec-17/\u0026amp;do=findComment\u0026amp;comment=1524562):\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022text-align:center;\u0022\u003E\n\u003Cem\u003E\u003Cstrong\u003E\u003Cu\u003E\u003Cspan style=\u0022color:rgb(255,0,0);\u0022\u003E\u003Cspan style=\u0022font-size:28px;\u0022\u003E!BACK UP YOUR SAVES BEFORE TRYING ANYTHING!\u003C/span\u003E\u003C/span\u003E\u003C/u\u003E\u003C/strong\u003E\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nBe aware the d3d11 fix\u00A0has reportedly\u00A0caused save file corruption, so I reassert:\n\u003C/p\u003E\n\u003Cp style=\u0022text-align:center;\u0022\u003E\n\u003Cu\u003E\u003Cspan style=\u0022color:rgb(255,0,0);\u0022\u003E\u003Cspan style=\u0022font-size:28px;\u0022\u003E\u003Cstrong\u003E\u003Cem\u003E!BACK UP YOUR SAVES BEFORE TRYING ANYTHING!\u003C/em\u003E\u003C/strong\u003E\u003C/span\u003E\u003C/span\u003E\u003C/u\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n...Or, if you\u0027re running Mac, you already use OpenGL...\n\u003C/p\u003E\n"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-12-21T20:14:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222331567\u0022 data-ipsquote-contentid=\u0022128292\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221450728670\u0022 data-ipsquote-userid=\u0022140061\u0022 data-ipsquote-username=\u0022CliftonM\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, CliftonM said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n...Or, if you\u0027re running Mac, you already use OpenGL...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSince one may now safely assume you\u0027re running Mac, what helpful suggestions might you have to offer to others running Mac (in terms of memory problems - also assuming Macs have them)?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-21T20:18:18Z\u0022 title=\u002212/21/2015 08:18  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 21, 2015\u003C/time\u003E by Randazzo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2015-12-21T21:29:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222331570\u0022 data-ipsquote-contentid=\u0022128292\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221450728866\u0022 data-ipsquote-userid=\u0022136468\u0022 data-ipsquote-username=\u0022Randazzo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Randazzo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSince one may now safely assume you\u0027re running Mac, what helpful suggestions might you have to offer to others running Mac (in terms of memory problems - also assuming Macs have them)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere is a 64 bit hack for Mac as a downgrade from x86. \u00A0I also recommend using Activity Monitor to kill certain background precesses. \u00A0You can\u0027t kill ones that you need, either. \u00A0They just go right back.\n\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2015-12-21T23:26:00Z","Content":"\n\u003Cp\u003E\nSome time back (0.9.0 days?) I tried to locate the mod(s) that were causing problems. I repeatedly removed half my mods until the problem stopped. It didn\u0027t stop even with a fresh unmod\u0027ed install. I was using the Windows resource monitor to watch memory usage slowly creep up - when it got to around 3.1 or 3.2 GB I knew a crash was immanent. The farther I was from 3.2GB at the start the longer it would take to reach the crash zone. I don\u0027t know if this is a Unity issue or a KSP issue. I ended up using the -forceopenGL and pruning unused parts and tossing some of the heavy memory mods (see Randazzo\u0027s post above) . Sorry - this probably wasn\u0027t what you wanted to hear.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-21T23:27:15Z\u0022 title=\u002212/21/2015 11:27  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 21, 2015\u003C/time\u003E by wasml\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"mcirish3","CreatedById":50775,"CreatedDateTime":"2015-12-21T23:48:13Z","Content":"\n\u003Cp\u003E\nNo they still have not fix this bug. \u00A0 \u00A0Alongside win 64 bit support this bug has caused more frustration, anger and fights here on the forum than any other topic.\u00A0It is very probably one of the oldest bugs if not THE oldest bug in the game.\u00A0 I believe this is because it stems from unity 4,\u00A0at Least I hope it does! \u00A0Since unity 5 is only a month or two away lets hope that will be the last we see of the Ye Old Memory Leakage.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"mjl1966","CreatedById":105019,"CreatedDateTime":"2015-12-22T09:41:14Z","Content":"\n\u003Cp\u003E\nAll good stuff.\u00A0 Thanks fellas.\u00A0 I\u0027ve trimmed back to the mods I only absolutely must have.\u00A0 There\u0027s only 39 of them.\u00A0 The biggest fix was uninstalling texture replacement.\u00A0 That gave back a good 500M.\u00A0 At this point, game starts at 2.7 and creeps up from there, so I just manually restart when it\u0027s around 3.4G and I\u0027m getting ready something important.\u00A0 I still need to talk to Steve to see if he has any special ideas.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMeanwhile, I guess we wait for Unity to get it together with memory management.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-12-22T10:08:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222332407\u0022 data-ipsquote-contentid=\u0022128292\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221450777274\u0022 data-ipsquote-userid=\u0022105019\u0022 data-ipsquote-username=\u0022mjl1966\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n25 minutes ago, mjl1966 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMeanwhile, I guess we wait for Unity to get it together with memory management.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nProvide a proof that it is a Unity problem first. Because \u0022I\u00A0 \u003Cspan style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003Ebelieve\u0022 is not a proof.\u00A0\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"mcirish3","CreatedById":50775,"CreatedDateTime":"2015-12-22T23:01:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222332418\u0022 data-ipsquote-contentid=\u0022128292\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221450778905\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 12/22/2015 at 4:08 AM, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nProvide a proof that it is a Unity problem first. Because \u0022I\u00A0 \u003Cspan style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003Ebelieve\u0022 is not a proof.\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI used the word believe precisely because I do not have proof. \u00A0I could be\u00A0and very probably am, based you your comment, wrong. \u00A0The problem could be squads, it could be Microsoft\u0027s for all I know.\u00A0Though I thought I read the other operating systems are experiencing the same problem which means it probably is not microsoft\u0027s problem. I really thought Squad would have squashed it by now if it was their coding that was the problem. Thus for me all that was left was Unity 4. \u00A0I was trying to be an optimist, since if the problem is in Unit 4 then it very probably would go away in Unity 5.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-24T14:54:27Z\u0022 title=\u002212/24/2015 02:54  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 24, 2015\u003C/time\u003E by mcirish3\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ColKlonk","CreatedById":137078,"CreatedDateTime":"2015-12-23T23:29:37Z","Content":"\n\u003Cp\u003E\nIt\u0027s essentially a problem with Squad having no idea what Unity does.. and Unity clueless about cross platform interoperability (hence ever increasing versions).\n\u003C/p\u003E\n\u003Cp\u003E\nIf Unity ever bothered to consult pass histories about cross platforms... they\u0027d realise it was a dead end... but Squad are still blind to that..\n\u003C/p\u003E\n\u003Cp\u003E\nSo they\u0027re reduced to a basic \u0027C\u0027 platform... Wow!! for performance here... we\u0027ll wait for the next hyperventilating processor.. :-)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-23T23:38:56Z\u0022 title=\u002212/23/2015 11:38  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 23, 2015\u003C/time\u003E by ColKlonk\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-12-24T14:26:17Z","Content":"\n\u003Cp\u003E\nWow, such eloquence, much arguments\n\u003C/p\u003E\n"}]}