{"TopicId":143058,"ForumId":20,"TopicTitle":"Determining building tiers in a mod?","CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-07-04T02:49:17Z","PageNum":1,"Articles":[{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-07-04T02:49:17Z","Content":"\n\u003Cp\u003E\nIt may be better to ask \u0022how do I determine data from the persistent file/game state in my mod?\u0022,but that\u0027s more general than what I need right now.\n\u003C/p\u003E\n\u003Cp\u003E\nIn my mod All Y\u0027All, there is a minor bug in that you can run a surface sample if you have a Kerbal in a command chair but have not upgraded the R\u0026amp;D Building to the 2nd tier. I\u0027d like to plug this hole by checking - whenever a surface sample would be run - the tier level of the building to make sure the Kerbal should be capable of it.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve done a few searches but my Fu doesn\u0027t seem strong tonight. I can\u0027t seem to find ANY information about modding and the building tiers at all.\n\u003C/p\u003E\n\u003Cp\u003E\nAnybody have an idea here, or a link to something that could help?\n\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2016-07-04T03:00:27Z","Content":"\n\u003Cp\u003E\nSome code \u003Ca href=\u0022https://github.com/jrossignol/ContractConfigurator/blob/master/source/ContractConfigurator/Requirement/FacilityRequirement.cs#L53-L56\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E from Contract Configurator:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E            int level = (int)Math.Round(ScenarioUpgradeableFacilities.GetFacilityLevel(facility) *\n                ScenarioUpgradeableFacilities.GetFacilityLevelCount(facility)) \u002B 1;\n            return level == 0 \u0026amp;\u0026amp; contract != null \u0026amp;\u0026amp; contract.ContractState == Contracts.Contract.State.Active ||\n                level \u0026gt;= minLevel \u0026amp;\u0026amp; level \u0026lt;= maxLevel;\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nNote that level is between 1 and 3 inclusive. \u00A0I forget why it checks for level == 0 - it might be in some scenes the ScenarioUpgradeableFacilities isn\u0027t loaded and so it always returns zero, so make sure to test it in all scenes you need it in.\n\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-07-04T04:21:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660359\u0022 data-ipsquote-contentid=\u0022143058\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467601227\u0022 data-ipsquote-userid=\u0022119307\u0022 data-ipsquote-username=\u0022nightingale\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, nightingale said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGetFacilityLevel\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think I tried every name I could think of, EXCEPT \u0022facility\u0022 \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nScenarioUpgradeableFacilities.GetFacilityLevel() is exactly what I needed. You are partially responsible for version 0.4 of my mod \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-04T04:21:26Z\u0022 title=\u002207/04/2016 04:21  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 4, 2016\u003C/time\u003E by 5thHorseman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Streetwind","CreatedById":98962,"CreatedDateTime":"2016-07-04T07:32:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660432\u0022 data-ipsquote-contentid=\u0022143058\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467606066\u0022 data-ipsquote-userid=\u002273725\u0022 data-ipsquote-username=\u00225thHorseman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, 5thHorseman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI think I tried every name I could think of, EXCEPT \u0022facility\u0022 \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nScenarioUpgradeableFacilities.GetFacilityLevel() is exactly what I needed. You are partially responsible for version 0.4 of my mod \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou could say that he... \u003Cspan style=\u0022font-size:10px;\u0022\u003E*sunglasses*\u003C/span\u003E \u003Cem\u003E...facilitated\u003C/em\u003E it? \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m sorry, I\u0027m sorry, I\u0027ll show myself out...!\n\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-07-04T08:47:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660584\u0022 data-ipsquote-contentid=\u0022143058\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467617555\u0022 data-ipsquote-userid=\u002298962\u0022 data-ipsquote-username=\u0022Streetwind\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Streetwind said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou could say that he... \u003Cspan style=\u0022font-size:10px;\u0022\u003E*sunglasses*\u003C/span\u003E \u003Cem\u003E...facilitated\u003C/em\u003E it? \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah.\n\u003C/p\u003E\n\u003Cp\u003E\nOr, more aptly, YEEEEEEEEEEEEAAAAAAAAAAAAAAAAAAAHHHHHHHHHHHHHHHHHH!\n\u003C/p\u003E\n"}]}