{"TopicId":192165,"ForumId":32,"TopicTitle":"Best Suicide Burn/Gravity Turn","CreatedByName":"arthur106","CreatedById":203096,"CreatedDateTime":"2020-03-06T01:15:08Z","PageNum":1,"Articles":[{"CreatedByName":"arthur106","CreatedById":203096,"CreatedDateTime":"2020-03-06T01:15:08Z","Content":"\n\u003Cp\u003E\nI\u0027ll just leave this here...\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 width=\u0022480\u0022 data-embed-src=\u0022https://www.youtube.com/embed/OyhZdHpg9vs?feature=oembed\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0I\u0027d like to write a Matlab script to accurately determine the altitude to start the burn so that you end up with a perfect burn every time.\u00A0 The biggest problem is that the surface elevation changes, and as far as I know, there\u0027s no way of setting a target on the surface and knowing it\u0027s elevation beforehand, right?\n\u003C/p\u003E\n"},{"CreatedByName":"Randox","CreatedById":18034,"CreatedDateTime":"2020-03-06T14:55:17Z","Content":"\n\u003Cp\u003E\nThat\u0027s got to feel pretty awesome!\n\u003C/p\u003E\n\u003Cp\u003E\nI think kerbal engineer is able to pull height data at arbitrary points. If memory serves, it would need to do that for bodies with atmospheres where it does a projected impact location that differs from the raw trajectory. Or I could be wrong and it may just be making a guess using the altitude at the games projected point of impact as a proxy value.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere is also the kerbNet system, which has altitude data. I\u0027m not sure about accessing that data for a script, but that might have potential.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe real trick to me is not just pulling off the suicide burn (which is plenty hard enough), but doing so and landing in a specific place. To that end, perhaps a script that uses a target vessel on the surface for the calculations, at least to start with.\u00A0It would provide precise location and altitude information you need, and I think plenty of us would find even that more limited application super useful (you tend to waste a lot of fuel trying to land ships together - at least I do).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2020-03-06T15:11:50Z","Content":"\n\u003Cp\u003E\nSeems to me that if you have a known target on the surface, and a known orbit that will cross above that target, that you could \u003Cem\u003Ework backwards\u003C/em\u003E from the ground, integrating backwards until you find yourself in orbit at the desired height.\u00A0 Whatever location that is, is where you should start your suicide burn \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E(I know, easy to say, but I\u0027m not so great at calculus to simply whip it up...)\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"CBase","CreatedById":189476,"CreatedDateTime":"2020-03-07T15:02:54Z","Content":"\n\u003Cp\u003E\nActually for every celestial body there is a function to get the surface altitude for any latitude and longitude, so the question is only how do you get it into Matlab ?\n\u003C/p\u003E\n\u003Cp\u003E\nMechJeb Landing function lets you pick a target on the map and then outputs the altitude as well, while \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E has output for a perfect suicide burn.\n\u003C/p\u003E\n"},{"CreatedByName":"arthur106","CreatedById":203096,"CreatedDateTime":"2020-04-07T20:48:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223753161\u0022 data-ipsquote-contentid=\u0022192165\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221583593374\u0022 data-ipsquote-userid=\u0022189476\u0022 data-ipsquote-username=\u0022CBase\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/7/2020 at 9:02 AM, CBase said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nActually for every celestial body there is a function to get the surface altitude for any latitude and longitude, so the question is only how do you get it into Matlab ?\n\u003C/p\u003E\n\u003Cp\u003E\nMechJeb Landing function lets you pick a target on the map and then outputs the altitude as well, while \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E has output for a perfect suicide burn.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOoooh, I like this idea.\u00A0 So you mean there\u0027s an actual equation that the developers used?\u00A0 Or an equation approximation, like using spherical harmonics or something similar?\u00A0 Either way, this seems like the way to go.\n\u003C/p\u003E\n"},{"CreatedByName":"arthur106","CreatedById":203096,"CreatedDateTime":"2020-04-07T21:00:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223752630\u0022 data-ipsquote-contentid=\u0022192165\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221583507510\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/6/2020 at 9:11 AM, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSeems to me that if you have a known target on the surface, and a known orbit that will cross above that target, that you could \u003Cem\u003Ework backwards\u003C/em\u003E from the ground, integrating backwards until you find yourself in orbit at the desired height.\u00A0 Whatever location that is, is where you should start your suicide burn \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E(I know, easy to say, but I\u0027m not so great at calculus to simply whip it up...)\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI like that idea and I was thinking of using some sort of initial condition to work backwards from (i.e. Height above ground, pitch, heading, surface velocity, mass, etc...)\u00A0 This won\u0027t suffice entirely, as the mass at this point will be unknown.\u00A0 I could definitely approximate it, however, and run an iterative process to get everything working quite well.\u003Cbr\u003E\nI\u0027m thinking the most efficient way would be to integrate backwards from this initial condition, varying the initial pitch until a full throttle gravity turn results in a circularized orbit at some altitude, and then Hohmann Transfer up to whatever the original parking orbit is?\n\u003C/p\u003E\n\u003Cp\u003E\nThis method obviously wouldn\u0027t be great for vehicles with a high \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E landing in areas surrounded by mountainous terrain, but this could be overcome by tweaking some parameters specific to the landing location..\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-04-07T21:02:42Z\u0022 title=\u002204/07/2020 09:02  PM\u0022 data-short=\u00224 yr\u0022\u003EApril 7, 2020\u003C/time\u003E by arthur106\u003C/strong\u003E\n\u003Cbr\u003Eadded content, last paragraph\n\u003C/span\u003E\n"},{"CreatedByName":"CBase","CreatedById":189476,"CreatedDateTime":"2020-04-08T06:07:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223767654\u0022 data-ipsquote-contentid=\u0022192165\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221586292513\u0022 data-ipsquote-userid=\u0022203096\u0022 data-ipsquote-username=\u0022arthur106\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, arthur106 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo you mean there\u0027s an actual equation that the developers used?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFor getting the terrain height of course there are documented API functions:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_celestial_body.html#a3a7c07a805f442124a523a149923f8a6\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_celestial_body.html#a3a7c07a805f442124a523a149923f8a6\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe calculation of perfect suicide burn is something different. I only displayed the readout from Kerbal Engineer Redux (\u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E) Addon in KSP, but never thought how it is calculated. For non atmospheric bodies you can rely on KSP Orbit Class calculations, which does a great job on all spherical 2-body gravitation equations:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_orbit.html\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_orbit.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe current orbit can be retrieved from the vessel Object.\n\u003C/p\u003E\n\u003Cp\u003E\nSince \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E has a suicide calculations, you might want to look how they did it (actually it seems they didn\u0027t like calculus and physics that much as well):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/jrbudda/KerbalEngineer/blob/master/KerbalEngineer/Flight/Readouts/Surface/ImpactProcessor.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/jrbudda/KerbalEngineer/blob/master/KerbalEngineer/Flight/Readouts/Surface/ImpactProcessor.cs\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nBasically they follow the orbit until it hits the ground and then do interval search for a breakpoint.\n\u003C/p\u003E\n\u003Cp\u003E\nFun fact: \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E developers never used the TerrainAltitude property, but some more complex based on rotation matrices, although it might not been there at the time when it was coded.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}