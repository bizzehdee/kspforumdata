{"TopicId":167287,"ForumId":29,"TopicTitle":"Setting ship world velocity every physics frame?","CreatedByName":"Pixel of Life","CreatedById":45646,"CreatedDateTime":"2017-11-07T00:45:31Z","PageNum":1,"Articles":[{"CreatedByName":"Pixel of Life","CreatedById":45646,"CreatedDateTime":"2017-11-07T00:45:31Z","Content":"\n\u003Cp\u003E\nHow do I do this? I\u0027m trying to make the ship fly at a constant velocity in the direction it\u0027s pointed, as long as a button in a part\u0027s right click menu is enabled. Basically a warp drive/inertial damper\u00A0of sorts. I\u0027ve tried using the following:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Ebool\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E active \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Efalse\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \n\u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E//Gui stuff for controlling the \u0022active\u0022 variable goes here\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Evoid\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EOnUpdate\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E()\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Eactive \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E==\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Etrue\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    vessel\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ESetWorldVelocity\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Enew\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EVector3d\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E1.0d\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E1.0d\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E1.0d\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E));\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E//Placeholder values for the speed\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nHowever, instead of\u00A0\u003Cem\u003Esetting\u003C/em\u003E\u00A0the ship\u0027s velocity like the API documentation says it will, \u003Cstrong\u003ESetWorldVelocity()\u003C/strong\u003E\u00A0\u003Cem\u003Eadds\u003C/em\u003E\u00A0to the ship\u0027s velocity and it just keeps accelerating forever. I don\u0027t think it\u0027s supposed to do that\u00A0considering\u00A0there\u0027s also a\u00A0\u003Cstrong\u003EChangeWorldVelocity()\u00A0\u003C/strong\u003Efunction. The ship will slowly accelerate even when I set the velocity argument to Vector3d.zero. How do I make the world velocity vector remain constant, while still being able to control pitch, roll and yaw to steer the ship?\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: I also tried putting the\u00A0\u003Cstrong\u003ESetWorldVelocity()\u003C/strong\u003E\u00A0call in the GUI part so it\u0027s triggered whenever I hit the button in the part\u0027s right click menu, and repeatedly hitting the button\u00A0\u003Cem\u003Eadds\u003C/em\u003E\u00A0to the velocity instead of setting it to a certain value like it should.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-11-07T01:23:29Z\u0022 title=\u002211/07/2017 01:23  AM\u0022 data-short=\u00226 yr\u0022\u003ENovember 7, 2017\u003C/time\u003E by CaptainKorhonen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Aelfhe1m","CreatedById":142910,"CreatedDateTime":"2017-11-07T01:43:02Z","Content":"\n\u003Cp\u003E\nMost \u0022warp\u0022 drives don\u0027t work using the velocity methods. Instead they calculate the distance to be travelled since the last update then translate the vessels position along the forward velocity vector by that amount. (\u003Ca href=\u0022https://github.com/BobPalmer/WarpDrive/blob/master/Source/WarpEngine/WarpEngine/USI_ModuleWarpEngine.cs#L342-L345\u0022 rel=\u0022external nofollow\u0022\u003EExample\u003C/a\u003E)\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2017-11-07T10:29:03Z","Content":"\n\u003Cp\u003E\nMessing with the velocity directly will always lead to strange behaviors since you will fight with the orbits and FlightIntegrator.\n\u003C/p\u003E\n\u003Cp\u003E\nSetWorldVelocity is one of those calls in KSP that should not be public, or even exist at all. The way it does things make me think it a a remmenant of the pre krakensbane era.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf you want a constant velocity while maintaining control then write a cheat engine that provides the proper acceleration.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-11-07T10:40:10Z\u0022 title=\u002211/07/2017 10:40  AM\u0022 data-short=\u00226 yr\u0022\u003ENovember 7, 2017\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"}]}