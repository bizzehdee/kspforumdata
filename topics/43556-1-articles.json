{"TopicId":43556,"ForumId":15,"TopicTitle":"Solved: Lights are always on","CreatedByName":"Absolution","CreatedById":4156,"CreatedDateTime":"2013-08-23T00:39:39Z","PageNum":1,"Articles":[{"CreatedByName":"Absolution","CreatedById":4156,"CreatedDateTime":"2013-08-23T00:39:39Z","Content":"\n\u003Cp\u003EI\u0027m making my own spotlights and run across an issue: My light is always on.\u003C/p\u003E\u003Cp\u003EThis should be a simple fix for someone who has done this before because I can turn the light \u0022on\u0022 and \u0022off\u0022 in the menu and it draws electricity when \u0022on\u0022 and does not draw it when \u0022off\u0022. So I am 90% on track. The problem is that regardless of what state its in it is always shining and illuminating the world around it.\u003C/p\u003E\u003Cp\u003EI suspect that my animation is not set properly and I admit that I did not set any of the animation properties under the assumption that the \u0022on/off\u0022 action would do the hard work. I checked to make sure that \u0022play automatically\u0022 is disabled, and it is disabled, so that probably is not related to the problem. I can only assume, then, that there is a property in the animation itself that should be set. I tried playing around with \u0022enabled\u0022 and \u0022intensity\u0022 under the light feature of the animation window but neither had an effect. I also tried the \u0022enabled\u0022 entry under animation without success.\u003C/p\u003E\u003Cp\u003EHow do I get the light beam to animate on and off?\u003C/p\u003E\u003Cp\u003ECan anyone shed some light on my problem?\u003C/p\u003E\u003Cp\u003E*edit*\u003C/p\u003E\u003Cp\u003EHad a brainwave and tried to animate the \u0022range\u0022 of the spotlight to go from 0 to 20 over one second of time. It animates the way I want it to in Unity but did not fix anything inside of KSP. I wonder if I am on to something but missed a step?\u003C/p\u003E\u003Cp\u003ESOLUTION:\u003C/p\u003E\u003Cp\u003EThere can only be one animation on the given part which controls the lights. If there are multiple animations doing multiple functions then the light breaks and wont animate.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-25T03:12:44Z\u0022 title=\u002208/25/2013 03:12  AM\u0022 data-short=\u002210 yr\u0022\u003EAugust 25, 2013\u003C/time\u003E by Absolution\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Nazari1382","CreatedById":62013,"CreatedDateTime":"2013-08-23T01:55:12Z","Content":"\n\u003Cp\u003EIs your light on in unity? You want it off by default.\u003C/p\u003E\n"},{"CreatedByName":"Absolution","CreatedById":4156,"CreatedDateTime":"2013-08-23T23:52:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nazari1382\u0022 data-cite=\u0022Nazari1382\u0022\u003E\u003Cdiv\u003EIs your light on in unity? You want it off by default.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan you expand on that? I tried turning it off three different ways and none of them worked so I must misunderstand.\u003C/p\u003E\u003Cp\u003EFirst unchecked the box next to \u0022headlight\u0022 at the top.\u003C/p\u003E\u003Cp\u003ESecond unchecked the box next to \u0022Light\u0022 in the middle.\u003C/p\u003E\u003Cp\u003ELastly, for giggles, I tried unchecking the box next to \u0022animation\u0022 at the bottom.\u003C/p\u003E\u003Cp\u003EEach time I exported my model and reloaded it into KSP and there were no observed differences.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://s612.photobucket.com/user/Absolution_15th/media/Inspector_zps60cdc6fc.jpg.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i612.photobucket.com/albums/tt208/Absolution_15th/Inspector_zps60cdc6fc.jpg\u0022 alt=\u0022Inspector_zps60cdc6fc.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ECould my Hierarchy be part of the problem? My light object resides in an otherwise empty game object titled \u0022headlight\u0022. The animation is attached to that same game object. Could that be it?\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://s612.photobucket.com/user/Absolution_15th/media/Hierarchy_zpse93ab354.jpg.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i612.photobucket.com/albums/tt208/Absolution_15th/Hierarchy_zpse93ab354.jpg\u0022 alt=\u0022Hierarchy_zpse93ab354.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EDo I need to tag the object or set it to a certain layer?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-23T23:54:34Z\u0022 title=\u002208/23/2013 11:54  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 23, 2013\u003C/time\u003E by Absolution\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JDP","CreatedById":30775,"CreatedDateTime":"2013-08-24T00:05:26Z","Content":"\n\u003Cp\u003EI assume you\u0027re using ModuleLight. Are you remembering to name your light transform in the cfg\u003C/p\u003E\n"},{"CreatedByName":"Nazari1382","CreatedById":62013,"CreatedDateTime":"2013-08-24T00:12:22Z","Content":"\n\u003Cp\u003EHere\u0027s what I mean: If you set your light to 2 intensity on the component options, it\u0027ll be 2 when you start. I have mine at 0 and in the animation I have \u0022enabled\u0022 set to 0 for the first 2 frames.\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2013-08-24T03:30:44Z","Content":"\n\u003Cp\u003ERather than changing the enabled/disabled or range values, my light animations simply change the RGB values from 0 in its \u0022off\u0022 state to a decimal between 0 and 1 in its \u0022on\u0022 state.\u003C/p\u003E\u003Cp\u003EHamfisted, but worked for me.\u003C/p\u003E\n"},{"CreatedByName":"Absolution","CreatedById":4156,"CreatedDateTime":"2013-08-24T16:36:28Z","Content":"\n\u003Cp\u003EMore and more its looking like my animation is the problem. I tried Nazari\u0027s suggestion and set the intensity to 0 in its initial state and 2 to its final state. The result was that the light intensity did in fact start at 0 in game but it would not go to intensity 2 after turning the light \u0022on\u0022 (it was drawing power but not shining). When I preview my animation in Unity it behaves the way I think it should and goes from intensity 0 to 2 over the course of the animation.\u003C/p\u003E\u003Cp\u003EAs an experiment I checked the \u0022always animate\u0022 box in the animation inspector just to see what would happen. Despite having the initial intensity state still set to 0 as above the light was shining in game. Therefor the animation must be partially working because it did animate the light intensity from 0 to 2 automatically. That implies that the trigger that tells the light to animate manually is not working. When I set the light to \u0022on\u0022 it doesn\u0027t fire the animation.\u003C/p\u003E\u003Cp\u003EOkay, so as another experiment I changed the name of my animation to what squad uses for theirs \u0022LightAnimation\u0022 because perhaps the KSP coding specifically looks for that name. No change in results.\u003C/p\u003E\u003Cp\u003EMy light is part of a bigger assembly and the config file incorporates multiple modules so maybe they are not playing nice together. To test that theory I removed all of the other modules that I thought would possibly interfere. No change in result.\u003C/p\u003E\u003Cp\u003EMy config file appears to be identical to that of squad\u0027s with the obvious exceptions to the entries to account for my unique naming. What the heck am I missing?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleLight\u003Cbr\u003E        lightName = headlight\u003Cbr\u003E\tuseAnimationDim = true\u003Cbr\u003E\tlightBrightenSpeed = 2.5\u003Cbr\u003E\tlightDimSpeed = 2.5\u003Cbr\u003E\tresourceAmount = 0.04\u003Cbr\u003E\tanimationName = LightAnimation\u003Cbr\u003E\tuseResources = true\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI am starting to pull my hair out...\u003C/p\u003E\n"},{"CreatedByName":"CardBoardBoxProcessor","CreatedById":10179,"CreatedDateTime":"2013-08-24T23:10:02Z","Content":"\n\u003Cp\u003Eis there moe than one aniamtion module? lights only work well when they are a single child so to say.\u003C/p\u003E\n"},{"CreatedByName":"Absolution","CreatedById":4156,"CreatedDateTime":"2013-08-25T03:11:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CardBoardBoxProcessor\u0022 data-cite=\u0022CardBoardBoxProcessor\u0022\u003E\u003Cdiv\u003Eis there moe than one aniamtion module? lights only work well when they are a single child so to say.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eding, ding, ding! We have a winner!\u003C/p\u003E\u003Cp\u003EOne of my many modules combined into this one single part is a solar panel which contains its own animation. I deleted the solar panel code from the config thinking it may be interfering but I never considered removing the asset out of Unity. Once I did the light started working perfectly.\u003C/p\u003E\u003Cp\u003EI would really prefer to combine these two functions together so I tried combining the solar panel and light under the same animation. The solar panel doesn\u0027t actually animate but needs an animation it its hierarchy to work so I thought I could away with it. Turns out I can\u0027t.\u003C/p\u003E\u003Cp\u003EI just need to bite the bullet and make two separate parts.\u003C/p\u003E\u003Cp\u003EThanks all for the help!\u003C/p\u003E\n"}]}