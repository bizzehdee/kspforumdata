{"TopicId":97154,"ForumId":34,"TopicTitle":"[1.9-1.10] Throttle Controlled Avionics","CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2015-01-19T12:17:01Z","PageNum":82,"Articles":[{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-17T12:10:26Z","Content":"\n\u003Ch2 style=\u0022color:#000000;\u0022\u003E\nVersion 3.5.7\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Csmall style=\u0022color:#777777;font-size:12pt;vertical-align:middle;\u0022\u003Efor Kerbal Space Program 1.7.2\u003C/small\u003E\n\u003C/h2\u003E\n\u003Cp style=\u0022color:#000000;font-size:12px;\u0022\u003E\n\u003Csmall style=\u0022color:#777777;\u0022\u003EReleased on 2019-06-17\u003C/small\u003E\n\u003C/p\u003E\n\u003Cul style=\u0022color:#333333;font-size:15.1181px;\u0022\u003E\u003Cli\u003E\nOnly show \u0022AutoThrottle\u0022 switch if Altitude Control or Vertical Speed Control are available.\n\u003C/li\u003E\n\u003Cli\u003E\nReimplemented the HUD windows using uGUI:\n\u003Cul\u003E\u003Cli\u003E\nVertical Flight Controls\n\u003C/li\u003E\n\u003Cli\u003E\nT-\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E Controls\n\u003C/li\u003E\n\u003Cli\u003E\nManeuver Controls\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nSnap Desired Vertical Speed to 0 when in [-0.1, 0.1]\n\u003C/li\u003E\n\u003Cli\u003E\nFixed out-of-range exception in editor while trying to set empty GID\n\u003Cul\u003E\u003Cli\u003E\nClosed #67\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nFixed NRE in TCAGui.onVesselDestroy\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp style=\u0022color:#000000;font-size:12px;\u0022\u003E\n\u003Ca href=\u0022https://spacedock.info/mod/198/Throttle%20Controlled%20Avionics/download/3.5.7.0.1\u0022 style=\u0022background-color:#ffffff;border:1px solid #07acd2;color:#07acd2;font-size:4mm;padding:6px 12px;text-align:center;vertical-align:middle;\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003EDownload\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-17T13:12:06Z\u0022 title=\u002206/17/2019 01:12  PM\u0022 data-short=\u00225 yr\u0022\u003EJune 17, 2019\u003C/time\u003E by allista\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"toric5","CreatedById":58046,"CreatedDateTime":"2019-06-18T03:05:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223620305\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560764122\u0022 data-ipsquote-userid=\u002299885\u0022 data-ipsquote-username=\u0022allista\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 hours ago, allista said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLooking at the code: there\u0027s literally only two cases when gimbal\u00A0limit is manipulated at all (set to 0 in both cases):\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nwhen the main throttle is 0; in which case gimballing doesn\u0027t do anything\n\u003C/li\u003E\n\u003Cli\u003E\nwhen an orbital maneuver is performed and the remaining \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E is \u0026lt; 0.5m/s. Which is needed to perform the maneuver precisely. Indeed, this assumes that you have some control authority aside from the engines. But otherwise you wouldn\u0027t be able to perform any orbital maneuvering at all. \u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nIn all other cases gimbal limit is set to 100.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, could you elaborate: what behavior are you seeing exactly?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDuring the manuver, the crafts PID seems to have too mutch gain, causing quite a bit of overcorrection with the engine gimbal. (the craft doesn\u0027t normaly need other controls because it can flip in less than a second with engine gimbal).\n\u003C/p\u003E\n\u003Cp\u003E\nPartway through the burn, a couple of things happen very fast... the spacecraft goes into a spin, the thrust cuts out, and the gimbal locks.\n\u003C/p\u003E\n\u003Cp\u003E\nIs it possible that the oscilation causes the crafts heading to stray too far from the desired heading, causing TCA to cut thrust in order to reposition? Is there any way for me to tune the PID?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: After some more testing, It seems like the PID gets less agressive over time... That could cause an issue.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-18T05:32:40Z\u0022 title=\u002206/18/2019 05:32  AM\u0022 data-short=\u00225 yr\u0022\u003EJune 18, 2019\u003C/time\u003E by toric5\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-18T08:41:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223620825\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560827134\u0022 data-ipsquote-userid=\u002258046\u0022 data-ipsquote-username=\u0022toric5\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, toric5 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDuring the manuver, the crafts PID seems to have too mutch gain, causing quite a bit of overcorrection with the engine gimbal. (the craft doesn\u0027t normaly need other controls because it can flip in less than a second with engine gimbal).\n\u003C/p\u003E\n\u003Cp\u003E\nPartway through the burn, a couple of things happen very fast... the spacecraft goes into a spin, the thrust cuts out, and the gimbal locks.\n\u003C/p\u003E\n\u003Cp\u003E\nIs it possible that the oscilation causes the crafts heading to stray too far from the desired heading, causing TCA to cut thrust in order to reposition? Is there any way for me to tune the PID?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: After some more testing, It seems like the PID gets less agressive over time... That could cause an issue.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI see.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen TCA tries to align thrust vector it deliberately ignores the gimbal (i.e. the\u00A0\u003Cem\u003Eactual\u003C/em\u003E\u00A0thrust vector), using default thrust direction for each engine. This has to be done to prevent oscillations, as gimballing always shifts thrust away from the desired direction. However, the potential torque of gimballed engines is taken into account. What is not, is the finite speed with which gimbal changes thrust direction, and that may indeed cause oscillations on overpowered crafts with huge gimballing. It\u0027s a guess, though; I\u0027d like to take a look at \u003Cstrong\u003Ethe actual .craft file\u003C/strong\u003E and test things for myself to get the feel of what\u0027s happening.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat causes the spin I can\u0027t say without trying, but what happens next is simple: as soon as attitude error becomes \u0026gt; 10deg TCA shuts down the engines (so as not to mess up the maneuver) and tries to realign. And, as I said before, when engines are off, gimbal is also off.\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s no user-space way to control the PID, as it\u0027s actually a complex control system with double-PID cascades for each separate axis and parameter scheduling for different torque/MoI/thrust etc. All the parameters are in the .glob file here:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/allista/ThrottleControlledAvionics/blob/bd9f2e9b664936b264adec1e9ec47be380cf1c46/GameData/ThrottleControlledAvionics/Plugins/PluginData/ThrottleControlledAvionics/ThrottleControlledAvionics.glob#L119\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/allista/ThrottleControlledAvionics/blob/bd9f2e9b664936b264adec1e9ec47be380cf1c46/GameData/ThrottleControlledAvionics/Plugins/PluginData/ThrottleControlledAvionics/ThrottleControlledAvionics.glob#L119\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003E...looking at the vessel torque calculations I now see some weirdness in logic that accounts for gimbals. Have to explore this thoroughly.\u003C/em\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"toric5","CreatedById":58046,"CreatedDateTime":"2019-06-18T18:30:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223620910\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560847277\u0022 data-ipsquote-userid=\u002299885\u0022 data-ipsquote-username=\u0022allista\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, allista said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI see.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen TCA tries to align thrust vector it deliberately ignores the gimbal (i.e. the\u00A0\u003Cem\u003Eactual\u003C/em\u003E\u00A0thrust vector), using default thrust direction for each engine. This has to be done to prevent oscillations, as gimballing always shifts thrust away from the desired direction. However, the potential torque of gimballed engines is taken into account. What is not, is the finite speed with which gimbal changes thrust direction, and that may indeed cause oscillations on overpowered crafts with huge gimballing. It\u0027s a guess, though; I\u0027d like to take a look at \u003Cstrong\u003Ethe actual .craft file\u003C/strong\u003E and test things for myself to get the feel of what\u0027s happening.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat causes the spin I can\u0027t say without trying, but what happens next is simple: as soon as attitude error becomes \u0026gt; 10deg TCA shuts down the engines (so as not to mess up the maneuver) and tries to realign. And, as I said before, when engines are off, gimbal is also off.\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s no user-space way to control the PID, as it\u0027s actually a complex control system with double-PID cascades for each separate axis and parameter scheduling for different torque/MoI/thrust etc. All the parameters are in the .glob file here:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/allista/ThrottleControlledAvionics/blob/bd9f2e9b664936b264adec1e9ec47be380cf1c46/GameData/ThrottleControlledAvionics/Plugins/PluginData/ThrottleControlledAvionics/ThrottleControlledAvionics.glob#L119\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/allista/ThrottleControlledAvionics/blob/bd9f2e9b664936b264adec1e9ec47be380cf1c46/GameData/ThrottleControlledAvionics/Plugins/PluginData/ThrottleControlledAvionics/ThrottleControlledAvionics.glob#L119\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003E...looking at the vessel torque calculations I now see some weirdness in logic that accounts for gimbals. Have to explore this thoroughly.\u003C/em\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIll see If I can re-create it with a stock craft...\n\u003C/p\u003E\n\u003Cp\u003E\nThe question is, why does the stock \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E seem to handle my craft so mutch better?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-18T18:51:23Z\u0022 title=\u002206/18/2019 06:51  PM\u0022 data-short=\u00225 yr\u0022\u003EJune 18, 2019\u003C/time\u003E by toric5\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-18T19:57:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223621167\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560882651\u0022 data-ipsquote-userid=\u002258046\u0022 data-ipsquote-username=\u0022toric5\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, toric5 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIll see If I can re-create it with a stock craft...\n\u003C/p\u003E\n\u003Cp\u003E\nThe question is, why does the stock \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E seem to handle my craft so mutch better?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThey\u0027re completely different systems; and while both try to be as universal as possible, the accents in development must have been quite different. For one thing, stock \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E doesn\u0027t deal with torque created by thrust variations\u00A0of individual engines. For that reason\u00A0\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E doesn\u0027t handle well the torque that responds to control input with inertia (like torque from jets). That was\u00A0\u003Cem\u003Ethe\u003C/em\u003E\u00A0reason for creation of the T-\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E; heavens know I didn\u0027t what to do this until I was completely sure that \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E cannot work well with thrust generated torque.\n\u003C/p\u003E\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223621167\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560882651\u0022 data-ipsquote-userid=\u002258046\u0022 data-ipsquote-username=\u0022toric5\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, toric5 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIll see If I can re-create it with a stock craft...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI can always install required mods, if need be.\n\u003C/p\u003E\n"},{"CreatedByName":"toric5","CreatedById":58046,"CreatedDateTime":"2019-06-18T23:44:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223621221\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560887855\u0022 data-ipsquote-userid=\u002299885\u0022 data-ipsquote-username=\u0022allista\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/18/2019 at 2:57 PM, allista said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThey\u0027re completely different systems; and while both try to be as universal as possible, the accents in development must have been quite different. For one thing, stock \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E doesn\u0027t deal with torque created by thrust variations\u00A0of individual engines. For that reason\u00A0\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E doesn\u0027t handle well the torque that responds to control input with inertia (like torque from jets). That was\u00A0\u003Cem\u003Ethe\u003C/em\u003E\u00A0reason for creation of the T-\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E; heavens know I didn\u0027t what to do this until I was completely sure that \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E cannot work well with thrust generated torque.\n\u003C/p\u003E\n\u003Cp\u003E\nI can always install required mods, if need be.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nsoo... try as I might, I cant recreate it in a sane craft... I swear I wasn\u0027t dreaming, but I could not get TCA to mess up during a quick mun mission using the same craft as last time...\n\u003C/p\u003E\n\u003Cp\u003E\nThe only weirdness I found this time is that TCA doesnt always free the gimballs again after turning TCA off.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-20T00:15:46Z\u0022 title=\u002206/20/2019 12:15  AM\u0022 data-short=\u00225 yr\u0022\u003EJune 20, 2019\u003C/time\u003E by toric5\u003C/strong\u003E\n\u003Cbr\u003EI swear I can complete my sentences.\n\u003C/span\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-19T05:04:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223621362\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560901479\u0022 data-ipsquote-userid=\u002258046\u0022 data-ipsquote-username=\u0022toric5\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, toric5 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe only weirdness I found this time is that TCA doesnt always free the gimballs again a\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s a good one, thanks.\u00A0Will fix it.\n\u003C/p\u003E\n"},{"CreatedByName":"guesswho2778","CreatedById":170733,"CreatedDateTime":"2019-06-21T03:52:24Z","Content":"\n\u003Cp\u003E\nim not sure if this is intended or not but early in-flight TCA is doing a\u00A0\u003Cstrong\u003Ereally\u00A0\u003C/strong\u003Eaggressive gravity turn and sometimes burns up by going over 2000 m/s while in (fairly thick) atmosphere... when it doesn\u0027t burn up my craft it does make it to orbit but im pretty sure it isn\u0027t\u00A0supposed to do it like that (it seems to be acting like it cant detect the atmosphere) i dont have any screenshots but i can get some if you want them\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-21T03:53:19Z\u0022 title=\u002206/21/2019 03:53  AM\u0022 data-short=\u00225 yr\u0022\u003EJune 21, 2019\u003C/time\u003E by guesswho2778\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-21T07:34:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223622703\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561089144\u0022 data-ipsquote-userid=\u0022170733\u0022 data-ipsquote-username=\u0022guesswho2778\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, guesswho2778 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nim not sure if this is intended or not but early in-flight TCA is doing a\u00A0\u003Cstrong\u003Ereally\u00A0\u003C/strong\u003Eaggressive gravity turn and sometimes burns up by going over 2000 m/s while in (fairly thick) atmosphere... when it doesn\u0027t burn up my craft it does make it to orbit but im pretty sure it isn\u0027t\u00A0supposed to do it like that (it seems to be acting like it cant detect the atmosphere) i dont have any screenshots but i can get some if you want them\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBetter share the craft file for me to test. Preferably stock, but not necessary.\n\u003C/p\u003E\n\u003Cp\u003E\nNormally, what TCA does is alike to what the GravityTurn does; the algorithm is actually based on their idea.\n\u003C/p\u003E\n\u003Cp\u003E\nIt starts vertically until a set of conditions is met, one of which is atmosphere density threshold. Then it turns the surface velocity vector 45deg to the horizon as fast, as aerodynamics allow. And then it maintains some time-distance to current ApA. This results in a very gentle trajectory that conserves a lot of fuel, even if most of it formally lies in atmosphere, because upper atmosphere is negligibly thin.\n\u003C/p\u003E\n"},{"CreatedByName":"guesswho2778","CreatedById":170733,"CreatedDateTime":"2019-06-21T12:45:15Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0026amp;do=hovercard\u0022 data-mentionid=\u002299885\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0022 rel=\u0022\u0022\u003E@allista\u003C/a\u003E\u00A0this is hapening with all crafts i make i will be home in about half an hour and can give you my mod list, craft file and/or logs if you want them\n\u003C/p\u003E\n"},{"CreatedByName":"Galland1998","CreatedById":191325,"CreatedDateTime":"2019-06-21T12:55:45Z","Content":"\n\u003Cp\u003E\nI was looking for some advice on how to set up TCA for a \u0022To Obit\u0022 use of TCA.\u00A0 When I experiment with TCA with I can set the engine logic so that it get to orbit with no problem.\u00A0 However, when I try with a stock craft that rely on solid booster to get going I can\u0027t figure out how to get a result that doesn\u0027t end up with TCA driving the craft horizontally shortly after lifting off the pad.\u00A0 Since I can get a craft with all liquid fueled\u00A0 rocket to fly right with the \u0022To Orbit\u0022 function I assume its pilot error.\u00A0 Any help with how to set up the engines would be very helpful.\n\u003C/p\u003E\n"},{"CreatedByName":"guesswho2778","CreatedById":170733,"CreatedDateTime":"2019-06-21T17:34:05Z","Content":"\n\u003Cp\u003E\nI have been having this problem Galland Do you have two solid fuel boosters on diagonal? With you fins on up down left and right (from top down perspective) i do and since you said when you dont have solid fuel boosters on i think (for some stupid reason) that if so it might be the problem\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso its 3 am so im going to bed right now thats why i didn\u0027t ping you\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-21T17:38:14Z\u0022 title=\u002206/21/2019 05:38  PM\u0022 data-short=\u00225 yr\u0022\u003EJune 21, 2019\u003C/time\u003E by guesswho2778\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Galland1998","CreatedById":191325,"CreatedDateTime":"2019-06-21T18:43:20Z","Content":"\n\u003Cp\u003E\nI was experimenting with TCA\u0027s functionality by using included the stock vessels.\u00A0 I set up the \u0022KerbalX\u0022 craft the way I thought it should be and the \u0022To Orbit\u0022 function in TCA worked like a champ.\u00A0 The ship with the solid boosters that I was having issues with was \u0022Aeroequus\u0022 stock ship.\u00A0 That ship has a first stage of 4 solid boosters and a \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E stage after the booster burn out.\n\u003C/p\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-21T20:57:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223623005\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561138445\u0022 data-ipsquote-userid=\u0022170733\u0022 data-ipsquote-username=\u0022guesswho2778\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, guesswho2778 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI have been having this problem Galland Do you have two solid fuel boosters on diagonal? With you fins on up down left and right (from top down perspective) i do and since you said when you dont have solid fuel boosters on i think (for some stupid reason) that if so it might be the problem\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso its 3 am so im going to bed right now thats why i didn\u0027t ping you\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223623033\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561142600\u0022 data-ipsquote-userid=\u0022191325\u0022 data-ipsquote-username=\u0022Galland1998\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, Galland1998 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI was experimenting with TCA\u0027s functionality by using included the stock vessels.\u00A0 I set up the \u0022KerbalX\u0022 craft the way I thought it should be and the \u0022To Orbit\u0022 function in TCA worked like a champ.\u00A0 The ship with the solid boosters that I was having issues with was \u0022Aeroequus\u0022 stock ship.\u00A0 That ship has a first stage of 4 solid boosters and a \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E stage after the booster burn out.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt seems simpler to just show (and explain along the way) how ToOrbit autopilot works.\u003Cbr\u003E\nJoin the stream now, or watch the recording later:\u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedOther\u0022\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 height=\u0022450\u0022 src=\u0022https://player.twitch.tv/?video=v442339737\u0026amp;autoplay=false\u0022 width=\u0022300\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-22T09:20:33Z\u0022 title=\u002206/22/2019 09:20  AM\u0022 data-short=\u00225 yr\u0022\u003EJune 22, 2019\u003C/time\u003E by allista\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-21T21:41:54Z","Content":"\n\u003Cp\u003E\nI\u0027m feeling that my explanations in the stream are... well, terrible. So I\u0027ll reiterate in text:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nIndeed, the trajectory lies mostly within the atmosphere, but that\u0027s OK, since mostly it\u0027s upper atmosphere with negligible drag. What\u0027s more important, along such a trajectory the component of thrust that works against gravity is minimal, which allows considerable fuel conservation.\n\u003C/li\u003E\n\u003Cli\u003E\nSolid boosters cannot be controlled. Cannot be (de)throttled, cannot be shut down. Thus, the only thing that\u0027s left to TCA is to try to rotate surface velocity with fins (that don\u0027t give that much torque) while staying within 5deg cone from it. This results in mostly vertical ascent until the boosters are separated.\n\u003C/li\u003E\n\u003Cli\u003E\nWhen TCA at last receives control over thrust and enough control authority it quickly turns surface velocity where it should be by that time and then simply keeps ApA at some 40-70s before the craft. This also conserves fuel, as often just a fraction of the full thrust is required at that phase, and rocket engines\u0027\u00A0Isp is usually better in upper atmosphere and in space.\n\u003C/li\u003E\n\u003Cli\u003E\nFollowing this route TCA brings the ship to an almost circular sub-orbital trajectory, leaving just a few\u00A0m/s of \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E for circularization.\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nAll hail \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123144-andymt/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123144\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123144-andymt/\u0022 rel=\u0022\u0022\u003E@AndyMt\u003C/a\u003E\u00A0and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156136-overengineer1/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022156136\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156136-overengineer1/\u0022 rel=\u0022\u0022\u003E@Overengineer1\u003C/a\u003E\u00A0-- the developers of the GravityTurn --\u00A0for sharing this strategy with me!\u00A0\u00A0\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TBenz","CreatedById":190349,"CreatedDateTime":"2019-06-22T01:45:15Z","Content":"\n\u003Cp\u003E\nI\u0027ll throw my hat into the ring of \u0022people who have been experiencing issues with the to obrit autopilot\u0022. Like \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/191325-galland1998/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022191325\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/191325-galland1998/\u0022 rel=\u0022\u0022\u003E@Galland1998\u003C/a\u003E\u00A0was saying, many of my rockets seem to nose dive right after liftoff. I\u0027m not entirely sure what has been causing the issue, I need to test it more thoroughly (which I unfortunately won\u0027t have time to do until sometime next week). However, I can at least offer a work around I\u0027ve figured out. If you set up and run\u00A0TCA to orbit autopilot, while leaving TCA disabled, then manually launch the rocket and enable TCA right after liftoff, the rest of the gravity turn should work like a charm. Hopefully that can help some people out, and maybe give \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0026amp;do=hovercard\u0022 data-mentionid=\u002299885\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0022 rel=\u0022\u0022\u003E@allista\u003C/a\u003E\u00A0a place to start looking. It seems that whatever is going wrong is occuring when the rocket is either landed, or just switching from landed to flying.\u00A0\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"guesswho2778","CreatedById":170733,"CreatedDateTime":"2019-06-22T02:06:25Z","Content":"\n\u003Cp\u003E\nyou ive had a few rockets nose dive into the ground a few seconds after launch (rarely but it still happens) i do like the new strategy it just wasn\u0027t what i remember TCA doing in the past so i thought i should come here to see if it was a problem or not\n\u003C/p\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-22T08:49:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223623183\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561167915\u0022 data-ipsquote-userid=\u0022190349\u0022 data-ipsquote-username=\u0022TBenz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, TBenz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ll throw my hat into the ring of \u0022people who have been experiencing issues with the to obrit autopilot\u0022. Like \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/191325-galland1998/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022191325\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/191325-galland1998/\u0022 rel=\u0022\u0022\u003E@Galland1998\u003C/a\u003E\u00A0was saying, many of my rockets seem to nose dive right after liftoff. I\u0027m not entirely sure what has been causing the issue, I need to test it more thoroughly (which I unfortunately won\u0027t have time to do until sometime next week). However, I can at least offer a work around I\u0027ve figured out. If you set up and run\u00A0TCA to orbit autopilot, while leaving TCA disabled, then manually launch the rocket and enable TCA right after liftoff, the rest of the gravity turn should work like a charm. Hopefully that can help some people out, and maybe give \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0026amp;do=hovercard\u0022 data-mentionid=\u002299885\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0022 rel=\u0022\u0022\u003E@allista\u003C/a\u003E\u00A0a place to start looking. It seems that whatever is going wrong is occuring when the rocket is either landed, or just switching from landed to flying.\u00A0\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is extremely weird! \u003Cimg alt=\u0022:0.0:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif\u0022 title=\u0022:0.0:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe liftoff is the simplest phase of them all. As always, I would like to have a .craft file of a rocket that does what you describe.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyways, thanks for that observation, I\u0027ll start looking there...\n\u003C/p\u003E\n"},{"CreatedByName":"AlexO","CreatedById":186886,"CreatedDateTime":"2019-06-23T12:52:36Z","Content":"\n\u003Cp\u003E\nHej \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0026amp;do=hovercard\u0022 data-mentionid=\u002299885\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0022 rel=\u0022\u0022\u003E@allista\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nNice work\u00A0\u003Cimg alt=\u0022\u0026amp;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 title=\u0022\u0026amp;)\u0022\u003E!\u00A0I\u0027ve been looking for a slimmer alternative to Mechjeb for a long time and now I found it.\u00A0I especially like the user interface.\n\u003C/p\u003E\n\u003Cp\u003E\nToOrbit seems to work so far here.\n\u003C/p\u003E\n\u003Cp\u003E\nBut rendezvous doesn\u0027t work:\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf I start a rendezvous maneuver from the ground (Lander on Mun -\u0026gt;\u00A0mothership in orbit around Mun), KSP freezes immediately and I can only kill the task hard.\u003Cbr\u003E\nAs a test I flew with the same spaceship via ToOrbit from the Mun first into an orbit close to the target mothership. That worked. After that I started a Renezvous again, which worked in the beginning. But after some manoeuvres, which were apparently not \u0022perfect\u0022 enough for TCA and which repeated it over and over again, KSP froze again and was only killed hard.\n\u003C/p\u003E\n\u003Cp\u003E\nUnfortunately I can\u0027t serve with logs, because after the freeze of KSP nothing is written into the log...last messages are normal status messages from TCA like:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n$ less /.../KSP.log\n.\n.\n.\n[LOG 14:18:51.710] getObtAtUT infinite UT on elliptical orbit UT: Infinity, returning NaN\n   at System.Environment.get_StackTrace()\n   at Orbit.getObtAtUT(Double UT)\n   at Orbit.getRelativePositionAtUT(Double UT)\n   at CelestialBody.getTruePositionAtUT(Double UT)\n   at Orbit.getTruePositionAtUT(Double UT)\n   at ThrottleControlledAvionics.TrajectoryCalculator.SqrDistAtUT(.Orbit a, .Orbit b, Double UT)\n   at ThrottleControlledAvionics.TrajectoryCalculator.NearestApproach(.Orbit a, .Orbit t, Double startUT, Double fromUT, Double toUT, Double minDist, Double ByRef ApproachUT)\n   at ThrottleControlledAvionics.TrajectoryCalculator.ClosestApproach(.Orbit a, .Orbit t, Double fromUT, Double minDist, Double ByRef ApproachUT)\n   at ThrottleControlledAvionics.RendezvousTrajectory.update()\n   at ThrottleControlledAvionics.RendezvousTrajectory.UpdateOrbit(.Orbit current)\n   at ThrottleControlledAvionics.TrajectoryCalculator\u00601.update_trajectory(Boolean reset)\n   at ThrottleControlledAvionics.RendezvousAutopilot.update_trajectory(Boolean reset)\n   at ThrottleControlledAvionics.RendezvousAutopilot.Update()\n   at ThrottleControlledAvionics.TCAModule._Update(System.Action update_action)\n   at ThrottleControlledAvionics.TCAModule.OnFixedUpdate()\n   at ThrottleControlledAvionics.ModuleTCA\u002B\u0026lt;\u0026gt;c.\u0026lt;OnPreAutopilotUpdate\u0026gt;b__91_0(ThrottleControlledAvionics.TCAModule m)\n   at System.Collections.Generic.List\u00601[[ThrottleControlledAvionics.TCAModule, ThrottleControlledAvionics, Version=3.5.7.0, Culture=neutral, PublicKeyToken=null]].ForEach(System.Action\u00601 action)\n   at ThrottleControlledAvionics.ModuleTCA.OnPreAutopilotUpdate(.FlightCtrlState s)\n   at Vessel.FeedInputFeed()\n   at FlightInputHandler.FixedUpdate()\n[LOG 14:18:51.710] getObtAtUT infinite UT on elliptical orbit UT: Infinity, returning NaN\n   at System.Environment.get_StackTrace()\n   at Orbit.getObtAtUT(Double UT)\n   at Orbit.getRelativePositionAtUT(Double UT)\n   at Orbit.getTruePositionAtUT(Double UT)\n   at ThrottleControlledAvionics.TrajectoryCalculator.SqrDistAtUT(.Orbit a, .Orbit b, Double UT)\n   at ThrottleControlledAvionics.TrajectoryCalculator.NearestApproach(.Orbit a, .Orbit t, Double startUT, Double fromUT, Double toUT, Double minDist, Double ByRef ApproachUT)\n   at ThrottleControlledAvionics.TrajectoryCalculator.ClosestApproach(.Orbit a, .Orbit t, Double fromUT, Double minDist, Double ByRef ApproachUT)\n   at ThrottleControlledAvionics.RendezvousTrajectory.update()\n   at ThrottleControlledAvionics.RendezvousTrajectory.UpdateOrbit(.Orbit current)\n   at ThrottleControlledAvionics.TrajectoryCalculator\u00601.update_trajectory(Boolean reset)\n   at ThrottleControlledAvionics.RendezvousAutopilot.update_trajectory(Boolean reset)\n   at ThrottleControlledAvionics.RendezvousAutopilot.Update()\n   at ThrottleControlledAvionics.TCAModule._Update(System.Action update_action)\n   at ThrottleControlledAvionics.TCAModule.OnFixedUpdate()\n   at ThrottleControlledAvionics.ModuleTCA\u002B\u0026lt;\u0026gt;c.\u0026lt;OnPreAutopilotUpdate\u0026gt;b__91_0(ThrottleControlledAvionics.TCAModule m)\n   at System.Collections.Generic.List\u00601[[ThrottleControlledAvionics.TCAModule, ThrottleControlledAvionics, Version=3.5.7.0, Culture=neutral, PublicKeyToken=null]].ForEach(System.Action\u00601 action)\n   at ThrottleControlledAvionics.ModuleTCA.OnPreAutopilotUpdate(.FlightCtrlState s)\n   at Vessel.FeedInputFeed()\n   at FlightInputHandler.FixedUpdate()\n(END)\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe there is a deeper debug function in TCA?\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone know this behavior? Otherwise I will have to search for mod incompatibilities...this is a longer list (but without errors nor warnings).\u00A0\u003Cimg alt=\u0022:huh:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 title=\u0022:huh:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nKSP: 1.7.2\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\n\u003C/p\u003E\n\u003Cp\u003E\nMhh. When I was just testing if the memory was running full I started KSP again.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTCA was still active (probably because of the crash) and ... managed to play the missing rest to the rendezvous orbit with 2 maneuvers!\u00A0\u00A0\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u00A0?!?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlex\n\u003C/p\u003E\n\u003Cp\u003E\n***\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-23T13:04:04Z\u0022 title=\u002206/23/2019 01:04  PM\u0022 data-short=\u00225 yr\u0022\u003EJune 23, 2019\u003C/time\u003E by AlexO\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-23T15:09:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223623809\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561294356\u0022 data-ipsquote-userid=\u0022186886\u0022 data-ipsquote-username=\u0022AlexO\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, AlexO said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nlast\u003Cspan\u003E\uFEFF\u003C/span\u003E messages are normal status messages from TCA \u003Cspan\u003E\uFEFF\u003C/span\u003Elike\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/186886-alexo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022186886\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/186886-alexo/\u0022 rel=\u0022\u0022\u003E@AlexO\u003C/a\u003E\u00A0thanks for the report. There\u0027s nothing normal about THESE messages: infinite UT should not be there.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll investigate; but since it may be the case that I won\u0027t be able to reproduce it, I\u0027d appreciate if you try to reproduce the situation with stock\u002BTCA game and share the save for me to test.\n\u003C/p\u003E\n"},{"CreatedByName":"AlexO","CreatedById":186886,"CreatedDateTime":"2019-06-23T15:58:05Z","Content":"\n\u003Cp\u003E\nThanks for answering.\n\u003C/p\u003E\n\u003Cp\u003E\nUpdate from me:\n\u003C/p\u003E\n\u003Cp\u003E\nI guess there is a memory leak.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter another test with the auto lander KSP stucked again. But NOW I let it running and after 2-3 minutes KSP reacts. My RAM (16 GB) was full down to 0.5 GB (KSP uses mor than 12 GB),\u00A0KSP normally only uses 6-7 GB.\n\u003C/p\u003E\n\u003Cp\u003E\nMy test lander crashed into the Mun\u00A0\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u00A0but I could end KSP in a definite way and it write something to the log. Relevant lines:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n[LOG 17:43:13.374] System.OutOfMemoryException: Out of memory\n  at (wrapper managed-to-native) object:__icall_wrapper_mono_array_new_specific (intptr,int)\n  at System.Array.Resize[Point] (.Point[]\u0026amp; array, Int32 length, Int32 newSize) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at System.Array.Resize[Point] (.Point[]\u0026amp; array, Int32 newSize) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at System.Collections.Generic.List\u00601[ThrottleControlledAvionics.LandingPath\u002BPoint].set_Capacity (Int32 value) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at System.Collections.Generic.List\u00601[ThrottleControlledAvionics.LandingPath\u002BPoint].GrowIfNeeded (Int32 newCount) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at System.Collections.Generic.List\u00601[ThrottleControlledAvionics.LandingPath\u002BPoint].Add (Point item) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at ThrottleControlledAvionics.LandingPath..ctor (ThrottleControlledAvionics.VesselWrapper vsl, .Orbit orb, Double target_altitude, Double startUT, Double dt, Double start_mass, Double fuel, Double brake_vel) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at ThrottleControlledAvionics.LandingTrajectory.update_landing_site_after_brake () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at ThrottleControlledAvionics.LandingTrajectory.update (Boolean with_brake, Boolean brake_at_fly_above) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at ThrottleControlledAvionics.LandingTrajectory..ctor (ThrottleControlledAvionics.VesselWrapper vsl, Vector3d dV, Double startUT, ThrottleControlledAvionics.WayPoint target, Double target_altitude, Boolean with_brake, Boolean brake_at_fly_above) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at ThrottleControlledAvionics.DeorbitAutopilot\u002BDeorbitOptimizerBase.newT (Double startUT, Single I, Vector3d dV) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at ThrottleControlledAvionics.DeorbitAutopilot\u002BDeorbitTrajectoryCorrector\u002B\u0026lt;GetEnumerator\u0026gt;d__3.MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at ThrottleControlledAvionics.TrajectoryCalculator\u00601\u002B\u0026lt;create_trajecory_calculator\u0026gt;d__1[ThrottleControlledAvionics.LandingTrajectory].MoveNext () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at AT_Utils.ComputationBalancer.Update () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe it helps.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll try to reproduce this in stock.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlex\n\u003C/p\u003E\n\u003Cp\u003E\n***\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI have now tried again with a stock installation (incl. Making History and Breaking Ground).\n\u003C/p\u003E\n\u003Cp\u003E\nMods only (per \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E):\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nThrottleControlledAvionics 3.5.7.0.1\n\u003C/li\u003E\n\u003Cli\u003E\nModuleManager 4.0.2 (dependency)\n\u003C/li\u003E\n\u003Cli\u003E\nAT-Utils 1.8.1 (dependency)\n\u003C/li\u003E\n\u003Cli\u003E\nConfigurableContainers Core 2.4.6.0.1 (dependency)\n\u003C/li\u003E\n\u003Cli\u003E\nHyperEdit 1.5.8.0 (to quickly recreate the situation)\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nKSP gets stuck again.\u003Cbr\u003E\nSituation remains the same as before:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nRebuild stock lander\n\u003C/li\u003E\n\u003Cli\u003E\nset all TCA modules active in \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E for lander\n\u003C/li\u003E\n\u003Cli\u003E\nsend lander to\u00A020000 m orbit around the mun by\u00A0hyperedit\n\u003C/li\u003E\n\u003Cli\u003E\nTry to land with TCA autolander\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nThe lander is nothing special and stock: MK2 landing can, tank, aerospike, \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS (not perfect but there)\u003C/abbr\u003E, Ladder, Large landing legs, Antenna, Solar panels, Lamps in action groups.\u00A0In the original still a docking port on top of it, I had forgotten it now in the test.\n\u003C/p\u003E\n\u003Cp\u003E\nMemory is visibly full, Linux is swapping to disk (doesn\u0027t do it on my system otherwise). Player.log says \u0022OutOfMemoryException: Out of memory\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nSave and Player.log:\u00A0\u003Ca href=\u0022https://filehorst.de/d/cbdsFxcr\u0022 rel=\u0022external nofollow\u0022\u003ETCATest.zip\u003C/a\u003E\u00A0or\u00A0\u003Ca href=\u0022http://www.mediafire.com/file/tss8inmsmi5cyjz/TCATest.zip/file\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.mediafire.com/file/tss8inmsmi5cyjz/TCATest.zip/file\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI support you with testing if needed.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-23T20:13:04Z\u0022 title=\u002206/23/2019 08:13  PM\u0022 data-short=\u00225 yr\u0022\u003EJune 23, 2019\u003C/time\u003E by AlexO\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-23T20:24:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223623888\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561305485\u0022 data-ipsquote-userid=\u0022186886\u0022 data-ipsquote-username=\u0022AlexO\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, AlexO said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe lander is nothing special and stock: MK2 landing can, tank, aerospike, \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS (not perfect but there)\u003C/abbr\u003E, Ladder, Large landing legs, Antenna, Solar panels, Lamps in action groups.\u00A0In the original still a docking port on top of it, I had forgotten it now in the test.\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nLooks like you\u0027ve used MH and or BG expansions in the craft, which I don\u0027t have. But if you say it\u0027s that easy to reproduce in stock, I\u0027ll just recreate the situation myself.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for thoroughness!\n\u003C/p\u003E\n"},{"CreatedByName":"AlexO","CreatedById":186886,"CreatedDateTime":"2019-06-23T21:13:34Z","Content":"\n\u003Cp\u003E\nIf you want, I can reproduce the whole thing without MH and BG. But since I paid for these DLCs, it would be rather cool if\u00A0TCA works with them.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m testing ...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-06-23T22:26:36Z\u0022 title=\u002206/23/2019 10:26  PM\u0022 data-short=\u00225 yr\u0022\u003EJune 23, 2019\u003C/time\u003E by AlexO\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2019-06-24T05:39:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223624040\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561324414\u0022 data-ipsquote-userid=\u0022186886\u0022 data-ipsquote-username=\u0022AlexO\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, AlexO said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you want, I can reproduce the whole thing without MH and BG. But since I paid for these DLCs, it would be rather cool if\u00A0TCA works with them.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSure, no question here; If we find that it\u0027s DLC-specific, I\u0027ll still fix it\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223624040\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561324414\u0022 data-ipsquote-userid=\u0022186886\u0022 data-ipsquote-username=\u0022AlexO\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, AlexO said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m testing ...\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSame here\n\u003C/p\u003E\n"},{"CreatedByName":"TBenz","CreatedById":190349,"CreatedDateTime":"2019-06-24T06:50:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223623297\u0022 data-ipsquote-contentid=\u002297154\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221561193398\u0022 data-ipsquote-userid=\u002299885\u0022 data-ipsquote-username=\u0022allista\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/22/2019 at 1:49 AM, allista said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis is extremely weird! \u003Cimg alt=\u0022:0.0:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif\u0022 title=\u0022:0.0:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe liftoff is the simplest phase of them all. As always, I would like to have a .craft file of a rocket that does what you describe.\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnyways, thanks for that observation, I\u0027ll start looking there...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ll try to get a stock craft for you exhibiting the bug soon, but I probably won\u0027t have the time for it until Wednesday. On the plus side, I take my testing seriously, so I should have a relatively thorough report about what seems to trigger it and what doesn\u0027t. Also, the story gets stranger. Reading over that you used GravityTurn\u0027s logic, I remembered that several patches prior I experienced the same issue with GravityTurn, when TCA was also enabled. That is to say, my rockets would flip over and crash almost immediately even when GravityTurn was the mod in primary control of flight, and TCA was just running it\u0027s\u00A0stability features and not any autopilots. Unless that is just some very odd fluke, I\u0027m lead to believe that the issue lies in some other part of TCA going haywire at launch, and not a bug in the To Orbit autopilot.\n\u003C/p\u003E\n\u003Cp\u003E\nI will admit that I don\u0027t fully understand all the other bits and pieces of TCA, the \u003Cabbr title=\u0022Vertical Take-Off and Landing\u0022\u003EVTOL\u003C/abbr\u003E assist and flight stabilization and whatnot, and I usually leave all that as defaulted to on. My guess is that one of those is causing the issue, and not the thrust balancing code either, as the aerodynamic control surfaces are always accomplices to the death flip. I\u0027ll see if I can\u0027t single out one of those as problematic, once I figure out how the replicate the issue. But if there is something that I should really have turned off during launch, and this is just Id-10T\u00A0error on my end, that would be good to know too.\n\u003C/p\u003E\n"}]}