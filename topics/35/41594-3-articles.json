{"TopicId":41594,"ForumId":35,"TopicTitle":"Mass-optimal engine type vs delta-V, payload, and min TWR","CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2013-08-08T09:56:16Z","PageNum":3,"Articles":[{"CreatedByName":"Nemoricus","CreatedById":4141,"CreatedDateTime":"2014-04-11T12:25:40Z","Content":"\n\u003Cp\u003EThere is a link to the code, yes, but I\u0027m afraid that I don\u0027t have Matlab.\u003C/p\u003E\u003Cp\u003EAs for taking into account partially filled tanks, the LFB is the only case where it might make sense to do so. How often would a player fiddle with the fuel tanks to get exactly the amount of fuel they want in the tanks?\u003C/p\u003E\u003Cp\u003EThough, it might make the difference between an engine narrowly failing on a TWR constraint and passing with less fuel...\u003C/p\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2014-04-11T12:59:39Z","Content":"\n\u003Cp\u003ENice charts. I was thinking about this the other day actually.\u003C/p\u003E\u003Cp\u003EThat 48-7S is everywhere, as is the Sepratron for low delta-V. Of course we have new engines, and also much bigger payloads in the form of E-class asteroids. I wonder if it would be worth making some sort of charts that take part count into consideration. Either just put a cap, or something like \u0022\u0026gt;90% of optimal performance, minimum part count\u0022.\u003C/p\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2014-04-11T13:13:31Z","Content":"\n\u003Cp\u003EI agree with your intuition that the LFB is the most likely case for partial fuel loads to really make a significant difference. But I\u0027d prefer to run the numbers and see whether it makes any difference on the margins.\u003C/p\u003E\u003Cp\u003EIn case this wasn\u0027t posted earlier, here is a somewhat refactored faster version of the code that might be slightly easier to understand, though it depends on another mex file for binary search: \u003Ca href=\u0022https://dl.dropboxusercontent.com/u/8244638/margin_of_victory.m\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/8244638/margin_of_victory.m\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnyone is welcome to have a go at porting the code to an open-source language - I would recommend Julia for its speed, but if someone would really rather use Python or JavaScript or whatever, go ahead. I\u0027m happy to answer any questions about the calculations or give recommendations for how I think the approach should be updated to account for partial fuel loads. I\u0027m just a bit busy right now to rewrite it myself, and might not check back here all that frequently.\u003C/p\u003E\u003Cp\u003ERegarding part counts, that requires a more expensive optimization problem to take into account. It\u0027s better displayed in spreadsheet form than in charts. I think there\u0027s a link to the Wolfram CDF version earlier in this thread, or I also put together an OpenOffice version of the same thing: \u003Ca href=\u0022https://dl.dropboxusercontent.com/u/8244638/KSP%20Design%20Optimizer.ods\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/8244638/KSP%20Design%20Optimizer.ods\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-11T13:16:34Z\u0022 title=\u002204/11/2014 01:16  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 11, 2014\u003C/time\u003E by tavert\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2014-04-11T18:48:33Z","Content":"\n\u003Cp\u003EBusy too, but I was thinking of porting to another language - lua - because, well, it means \u0027moon\u0027! (Pretty good scripting language like python too).\u003C/p\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2014-04-19T13:29:43Z","Content":"\n\u003Cp\u003EAlright, I re-implemented the core calculation \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E(just for the conventional liquid engines so far, didn\u0027t put in LFB, SRB, or ions yet)\u003C/span\u003E in Julia: \u003Ca href=\u0022https://dl.dropboxusercontent.com/u/8244638/KSP_engine_charts.jl\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/8244638/KSP_engine_charts.jl\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EI also haven\u0027t done all the boring plot labeling or colormap stuff, but now that it\u0027s in an open-source language, if you want the plots updated you can mess with the code yourself (please share any additions).\u003C/span\u003E Download and install Julia here \u003Ca href=\u0022http://julialang.org/downloads/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://julialang.org/downloads/\u003C/a\u003E - I use the 0.3.0 prerelease, the older version might work too, not sure. Then do the following (the double-backslashes are required if you\u0027re on Windows), with MINTWR and ATMPRESSURE replaced with your desired numbers.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ecd(\u0022C:\\\\wherever\\\\you\\\\put\\\\the\\\\code\u0022)\u003Cbr\u003Einclude(\u0022KSP_engine_charts.jl\u0022)\u003Cbr\u003E(bestengine, bestmass) = KSP_engine_charts(MINTWR, ATMPRESSURE);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBe patient the very first time it runs, it needs to download a couple of Julia packages.\u003C/p\u003E\u003Cp\u003EIf you tweak anything in the code (like max number of engines, dv or payload limits or resolution, etc), you have to re-include the file before re-running the function since Julia is based on a just-in-time compiler instead of an interpreter.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-22T08:06:52Z\u0022 title=\u002204/22/2014 08:06  AM\u0022 data-short=\u002210 yr\u0022\u003EApril 22, 2014\u003C/time\u003E by tavert\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2014-04-22T08:06:36Z","Content":"\n\u003Cp\u003EAlright, since people asked I finished the new version and updated the OP.\u003C/p\u003E\n"},{"CreatedByName":"Meithan","CreatedById":76123,"CreatedDateTime":"2014-04-22T13:47:41Z","Content":"\n\u003Cp\u003EThat\u0027s awesome, tavert, thanks! I\u0027ll check it out when I get a chance. I\u0027ve also never coded in Julia; it sure looks interesting.\u003C/p\u003E\n"},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2014-04-22T14:48:04Z","Content":"\n\u003Cp\u003EGreat job - best reference tool :-)\u003C/p\u003E\n"},{"CreatedByName":"Decent Weasel","CreatedById":74583,"CreatedDateTime":"2014-08-10T03:14:29Z","Content":"\n\u003Cp\u003EAny chance at prepared slides for 0.24.2? Or should I try to get the program running on my own system instead and make my own charts?\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-13T17:03:26Z","Content":"\n\u003Cp\u003EInteresting that the crown for TWR=1, 10T and 7000Dv now goes to the KR-2L instead of the NERVA. Glad to see some variation appearing in the \u0060which engine is best\u0060 issue.\u003C/p\u003E\u003Cp\u003EEDIT : Just installed Julia and ran the chart code. Awesome utility. Should be included in the \u0060extra useful utils\u0060 for 1.0 release IMHO\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-13T17:30:13Z\u0022 title=\u002212/13/2014 05:30  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 13, 2014\u003C/time\u003E by John FX\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-12-13T17:13:34Z","Content":"\n\u003Cp\u003ECareful going by these charts, there were some efficiency adjustments in 0.24 that they haven\u0027t been updated to reflect. I should try to figure out how to generate them and update since tavert seems to have gone inactive.\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-13T17:33:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003ECareful going by these charts, there were some efficiency adjustments in 0.24 that they haven\u0027t been updated to reflect. I should try to figure out how to generate them and update since tavert seems to have gone inactive.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0060ll have a look at the code and hopefully the variables are named sensibly and use recognizable units. I remember things like the Ion and stuff got changed. I\u0060ll take a poke about when I have time. I\u0060ll use the current readouts with caution. Thanks for letting me know.\u003C/p\u003E\u003Cp\u003EEDIT : There does not seem to be a license attached to the Julia code. Correct me if I am wrong (please) but does that mean I could post an updated version here if I end up adjusting it for the current engines?\u003C/p\u003E\u003Cp\u003EEDIT 2 : It seems a well written bit of code with comments! I may have a look and adjust the values for the engines as it looks to be really easy to do.\u003C/p\u003E\u003Cp\u003EEDIT 3 : I\u0060ve updated the numbers for the current engines (as stated by the WIKI anyway) and I\u0060ll wait until someone says nay or yea before I post it up. I also set the max No. of engine to 9 to get some more sensible results (one in the centre an 8 symmetry) and uncommented all the engines and SRB. Now to see how that changes the graphs!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-13T18:16:40Z\u0022 title=\u002212/13/2014 06:16  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 13, 2014\u003C/time\u003E by John FX\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-12-13T17:55:47Z","Content":"\n\u003Cp\u003EI would message tavert before sharing anything, I don\u0027t think there\u0027d be any objections but it seems the courteous thing to do. Thanks for looking at this, I had a cursory look and it seemed a bit beyond me.\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-13T18:22:52Z","Content":"\n\u003Cp\u003EWell it has made some difference. The well commented code made it pretty easy. I\u0060ve not seen julia before so I had to trial and error to get rid of some crashes.\u003C/p\u003E\u003Cp\u003EThe balancing seems to have made some other engines a bit more valid in certain situations.\u003C/p\u003E\u003Cp\u003EI\u0060ll message Tavert and see what they say. If I get no reply within a few days I\u0060ll post the updated code here.\u003C/p\u003E\u003Cp\u003EEDIT : It would be nice if the KR-2L was not in white though (or the background was not white), I may have a play about and see if I can do anything about that.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-14T02:52:17Z\u0022 title=\u002212/14/2014 02:52  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 14, 2014\u003C/time\u003E by John FX\u003C/strong\u003E\n\u003Cbr\u003Eremoved missing images\n\u003C/span\u003E\n"},{"CreatedByName":"Norcalplanner","CreatedById":112223,"CreatedDateTime":"2014-12-13T19:51:49Z","Content":"\n\u003Cp\u003EJohn FX, this looks great. I hope that the stars align correctly so that you can post the final versions.\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-13T20:21:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Norcalplanner\u0022 data-cite=\u0022Norcalplanner\u0022\u003E\u003Cdiv\u003EJohn FX, this looks great. I hope that the stars align correctly so that you can post the final versions.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs do I. I\u0060ve figured out how to have a very bright primary green as the colour for \u0060invalid combo\u0060. It does not seem close to any engine colours so I\u0060ll stick with that. It\u0060s obvious when no engine will provide a particular combination at a particular TWR. Tavert hasn\u0060t been on the site since the middle of last month though. Hopefully they will return at some point. I\u0060ll give it a few days but if there is no response I\u0060ll post the code and some images here.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-12-13T20:26:52Z","Content":"\n\u003Cp\u003EYou might be able to get a senior admin like KasperVld or sal_vager to contact tavert if you have no luck, they can see email addresses and such (I know they offered this when Spaceport was about to close). Would be a real shame if this useful reference fell into obsolescence.\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-13T21:37:19Z","Content":"\n\u003Cp\u003EIt would be a shame although as the code was and still is freely downloadable from this thread, presumably for people to make their own images and do stuff with them, I\u0060ll be posting images of TWR graphs whenever I am asked. As you say, they are very good. Tavert wrote a nice bit of code.\u003C/p\u003E\u003Cp\u003EIf I get no joy in a few days I\u0060ll try Sal or Kasper and see if they can help. It will probably be wednesday or later looking at my upcoming appointments.\u003C/p\u003E\n"},{"CreatedByName":"Pecan","CreatedById":96332,"CreatedDateTime":"2014-12-13T23:52:48Z","Content":"\n\u003Cp\u003E@ John FX, RIC, etc:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tavert\u0022 data-cite=\u0022tavert\u0022\u003E\u003Cdiv\u003E...\u003Cp\u003EAnyone is welcome to have a go at porting the code to an open-source language - I would recommend Julia for its speed, but if someone would really rather use Python or JavaScript or whatever, go ahead. I\u0027m happy to answer any questions about the calculations or give recommendations for how I think the approach should be updated to account for partial fuel loads. I\u0027m just a bit busy right now to rewrite it myself, and might not check back here all that frequently...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhile, yes, it would be nice to contact tavert, he has explicitly given permission for this to be taken-over by someone else :-)\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-14T03:44:59Z","Content":"\n\u003Cp\u003EThat\u0060s good then. I\u0060m off to bed now but here are some charts for a single engine from zero to a TWR of 3 in 0.1 TWR increments.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/C49DC\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EEDIT : I plan on posting a series of galleries for all graphs ranging from TWR=0 to TWR=3 in vacuum and TWR=1 to TWR=3 in atmosphere with a single engine and clusters of 5 and 9. I\u0060ll post the graphs of unlimited amounts of engines as well but only on request. It takes an hour or two to make a set...\u003C/p\u003E\u003Cp\u003EHere is a Gif of the graphs from TWR=0.1 to TWR=3 for vacuum with a single engine.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/5J31XVS.gif\u0022 alt=\u00225J31XVS.gif\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-14T12:37:35Z\u0022 title=\u002212/14/2014 12:37  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 14, 2014\u003C/time\u003E by John FX\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-14T11:22:27Z","Content":"\n\u003Cp\u003EHere are the charts for a single engine with TWR=1 to TWR=3 in atmosphere\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/YcKjR\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Nemoricus","CreatedById":4141,"CreatedDateTime":"2014-12-14T13:44:52Z","Content":"\n\u003Cp\u003EGlad to see that someone is working on updated charts!\u003C/p\u003E\u003Cp\u003EThere\u0027s a point of order, though. The 24-77, Sepratron, and Mark 55 can\u0027t be used singly, since these engines are radial mounts. Does this chart take into account that you need at least two for balanced thrust?\u003C/p\u003E\n"},{"CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2014-12-14T14:33:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nemoricus\u0022 data-cite=\u0022Nemoricus\u0022\u003E\u003Cdiv\u003EGlad to see that someone is working on updated charts!\u003Cp\u003EThere\u0027s a point of order, though. The 24-77, Sepratron, and Mark 55 can\u0027t be used singly, since these engines are radial mounts. Does this chart take into account that you need at least two for balanced thrust?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E This software will allow you to produce comparison charts for multiple engines as well. He just posted the single engine charts as a quick reference while he finishes up.\u003C/p\u003E\u003Cp\u003EBest,\u003C/p\u003E\u003Cp\u003E-Slashy\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-14T14:38:29Z\u0022 title=\u002212/14/2014 02:38  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 14, 2014\u003C/time\u003E by GoSlash27\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2014-12-14T15:15:54Z","Content":"\n\u003Cp\u003EThis is single-engine, or single-engine-type?\u003C/p\u003E\u003Cp\u003ENice to see these charts get an update.\u003C/p\u003E\u003Cp\u003EBTW, I wouldn\u0027t work too hard on atmospheric plots. Those are not generally useful except for an Eve ascent -- the atmosphere thins so quickly that it hardly matters anywhere else.\u003C/p\u003E\u003Cp\u003EPS: you can put a radial engine in the middle of your spacecraft. Takes a bit of tweaking, but we made single-engine 24-77 SSTOs before the 48-7S was added to the game.\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-14T16:15:22Z","Content":"\n\u003Cp\u003EIt was the optimal engine limited to 1. Very good point about the radial engines. I\u0060m working on the charts for up to 5 engines in vacuum at the moment(one central, four symmetry) and I\u0060ll post them soon but I have to tidy up (GF coming round in an hour or two)\u003C/p\u003E\u003Cp\u003EI\u0060ll do 2 and 4 at some point for radials (or should I comment out the radials so the charts make more sense for pure rockets/planes?)\u003C/p\u003E\u003Cp\u003ELet me know and it shall be.\u003C/p\u003E\u003Cp\u003EIf there is a particular chart anyone wants I could do that fairly quickly. like unlimited engines TWR=1 in vacuum say or TWR=2 in atmosphere with an even number of engines.\u003C/p\u003E\u003Cp\u003EI also think Tavert would be OK with me posting up the code if anyone wants, he was happy for others to work on the code as far as recoding it for different languages and all I have done is update the engine stats for 0.25...\u003C/p\u003E\u003Cp\u003EEDIT :\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022numerobis\u0022 data-cite=\u0022numerobis\u0022\u003E\u003Cdiv\u003EThis is single-engine, or single-engine-type?\u003Cp\u003ENice to see these charts get an update.\u003C/p\u003E\u003Cp\u003EBTW, I wouldn\u0027t work too hard on atmospheric plots. Those are not generally useful except for an Eve ascent -- the atmosphere thins so quickly that it hardly matters anywhere else.\u003C/p\u003E\u003Cp\u003EPS: you can put a radial engine in the middle of your spacecraft. Takes a bit of tweaking, but we made single-engine 24-77 SSTOs before the 48-7S was added to the game.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI always found these charts to be very useful too. You can just see a range of payload and Dv options and just zoom in on which engine you should use. \u003C/p\u003E\u003Cp\u003EI could post up the best engine for a particular Dv in Eve atmosphere also as you can set the atmo multiplier when you generate (0-1 vac-kerbin sea level), is Eve sea level 2x Kerbin?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-14T17:17:50Z\u0022 title=\u002212/14/2014 05:17  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 14, 2014\u003C/time\u003E by John FX\u003C/strong\u003E\n\u003C/span\u003E\n"}]}