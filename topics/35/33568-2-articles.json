{"TopicId":33568,"ForumId":35,"TopicTitle":"[WIN/MAC/LINUX] KSP Trajectory Optimization Tool v1.6.9 [New MATLAB Version!]","CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-18T04:59:31Z","PageNum":2,"Articles":[{"CreatedByName":"The Lone Wolfling","CreatedById":13675,"CreatedDateTime":"2013-06-26T15:51:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EThanks! Please let me know what you like and dislike so I can make improvements as necessary. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDislike: 388MB runtime. But there\u0027s no real way around that other than rewriting it in another language. Would it be alright for me to have a go at porting it to Python?\u003C/p\u003E\u003Cp\u003ELike: pretty much everything else.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIt might be possible for me to perform some sort of sensitivity analysis. To be honest, though, I guess I don\u0027t see the purpose. True, it would show you when your \u0022long\u0022 burn might significantly change your answer, but this is KSP... aren\u0027t we all just going to go for it anyway? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, yes, but it would still be nice to have!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027ve added the apses to the orbit transfer map tonight. I\u0027ll have to think about the nodes, because you need to pick the correct plane for them to make sense. There\u0027s a fair bit of thought, design, and math that needs to go into plotting those. Honestly, they will probably come about later, if only because they\u0027re a very small feature that requires a lot of work.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe thing about ascending/descending nodes is that they provide another data point as to if you are on the right orbit, assuming that you aren\u0027t using MechJeb or something similar.\u003C/p\u003E\u003Cp\u003EAnother suggestion if you get those implemented is a mouseover showing time to each of them - that way it again gives you another data point as to if you are on the right track.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIndeed. I apologize, I wasn\u0027t intending to come across as cheeky. It just struck me that what you were asking for is exactly what the porkchop plot is for in the first place. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIn any event, I think you\u0027re right and some sort of indication of an optimized departure/arrival date/time is a good idea. Tonight I wrote the code to actually perform the optimization. It\u0027s just a matter of how to let the user call that. Right now I have it tied to the porkchop plot generator method: it generates the plot, then finds the optimal point within the plot. (Or, really, within 1 synodic period of the best point in the porkchop plot.) Do you have any suggestions on how I might present this \u0022optimized\u0022 information to the user? I\u0027m not sure I can use the data cursor thing I\u0027ve got showing the best point computed for the porkchop plot, but I\u0027ll investigate anyway. Assuming that\u0027s a no-go, any thoughts? I\u0027m thinking I either write it to the text box below the porkchop plot or bring up a pop-up box with the times in it. Would either of those be acceptable?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf it\u0027s possible to use the data cursor, pre-populate the data cursor with the \u0022best\u0022 datum.\u003C/p\u003E\u003Cp\u003EOtherwise, I\u0027d suggest adding it as a box to the departure burn calculator - \u0022Optimize delta-v\u0022 or something similar. Or alternatively, have it pre-populate the departure burn calculator with the lowest global delta-v.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThanks for the suggestion! I\u0027ll consider it, though I have to admit, the plot is getting pretty cluttered with just the orbits and transfer orbit periapse/apoapse. We\u0027ll see. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPerhaps as an option?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI implemented the following requested features tonight:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EFind optimal departure for given arrival;\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAdd transfer orbit periapse \u0026amp; apoapse to the orbit plot; and\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFind optimal arrival/departure on a generated porkchop plot (partial: result of optimization run needs to be displayed to user still).\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYay, yay, and yay.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ETomorrow\u0027s agenda is the following request:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EFind earliest arrival for provided delta-v. Btw, I\u0027m assuming that the delta-v provided is for the full round trip: departing one place and arriving at another. If I just use the departure dv, that could make things a bit optimistic in some cases. Do you guys have any thoughts on this? Which delta-v (the departure \u002B arrival delta-v or just the departure delta-v) would be more intuitive for you?\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYay! I\u0027d prefer both options, actually. Departure delta-v is good for fly-bys and aerobraking, total is good for most other missions.\u003C/p\u003E\u003Cp\u003EEDIT: Also, see below:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tavert\u0022 data-cite=\u0022tavert\u0022\u003E\u003Cdiv\u003EAllow either via a toggle setting. For destinations with atmospheres, departure only makes the most sense, but for destinations without, you care about the total.\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027m also going to rewrite the Lambert solver at some point using the code I gave to R4m0n for MechJeb (yep, that\u0027s my Lambert solver) as a base. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eo.O\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-27T02:23:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EDislike: 388MB runtime. But there\u0027s no real way around that other than rewriting it in another language. Would it be alright for me to have a go at porting it to Python?\u003Cp\u003ELike: pretty much everything else.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m glad you like it! I\u0027d rather you didn\u0027t port it to anything at the moment. The application is still under heavy development and you\u0027d be chasing a moving target. I\u0027d rather not have conflicting versions of my tool out \u0022in the market\u0022 until things firm up. Thanks for the offer, though! I may take you up on it in the future if you\u0027re still willing. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E(Note: the license actually forbids derivative works, of which a port would be, at the moment for this reason.)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EWell, yes, but it would still be nice to have!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETrue. I\u0027ll see what I can do. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EThe thing about ascending/descending nodes is that they provide another data point as to if you are on the right orbit, assuming that you aren\u0027t using MechJeb or something similar.\u003Cp\u003EAnother suggestion if you get those implemented is a mouseover showing time to each of them - that way it again gives you another data point as to if you are on the right track.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EPerhaps as an option?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, I\u0027ll get ascending/descending nodes on the map at some point. I can see how they\u0027re valuable now. It\u0027ll be a bit in the future, but they\u0027ll come. I\u0027ll probably have checkboxes in the departure information GUI that you can use to turn them on and off at will.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EIf it\u0027s possible to use the data cursor, pre-populate the data cursor with the \u0022best\u0022 datum.\u003Cp\u003EOtherwise, I\u0027d suggest adding it as a box to the departure burn calculator - \u0022Optimize delta-v\u0022 or something similar. Or alternatively, have it pre-populate the departure burn calculator with the lowest global delta-v.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhen you say adding it as a box to the departure burn calculator, do you mean as a button or as part of those context menus that come up when you right-click the departure and arrival time fields?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EYay! I\u0027d prefer both options, actually. Departure delta-v is good for fly-bys and aerobraking, total is good for most other missions.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDone! I\u0027ve implemented an option that dictates the behavior of the solvers (that is, which delta-v they attempt to minimize) globally across the application. The one setting impacts all calls to the delta-v minimization code, so be careful and change as needed...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003Eo.O\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EErr, I don\u0027t know what you mean? You are surprised I wrote the MechJeb Lambert solver? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-27T03:18:41Z","Content":"\n\u003Cp\u003ETime for a nice development update! A bunch of new features have been added in the past two days.\u003C/p\u003E\u003Cp\u003EStarting basic, I\u0027ve added a data cursor that pops up after generating a porkchop plot. It displays the best point on the graph in terms of delta-v. (Which delta-v will be discussed below.) This is the same data cursor you could manually add before, I\u0027m just pre-setting it to a particular point on the plot. Note that it now also shows transfer duration.\u003C/p\u003E\u003Cp\u003EThe position of the data tip is also passed in the departure calculation screen as initial inputs for departure/arrival time.\u003C/p\u003E\u003Cp\u003EI\u0027ve also added the synodic period between the two selected bodies below the depart/arrival parameters.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/uqnPq9w.png\u0022 alt=\u0022uqnPq9w.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve also added a global optimization feature that tries to find the best departure/arrival time. This is currently run when the porkchop plot is generated, but I will likely make it accessible elsewhere. The output doesn\u0027t do anything at the moment, I still need to figure out where to go with it. But it does work, it\u0027s just a design problem at this point. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/2unu0QC.png\u0022 alt=\u00222unu0QC.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EPreviously, I mentioned that the optimizer will attempt to minimize a delta-v of a type you select when you run the porkchop plot generator. Which delta-v you minimize is based on what you select in this box:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/FP5rLx2.png\u0022 alt=\u0022FP5rLx2.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe default is departure\u002Barrival delta-v. But if you going to a place where you plan to aerocapture into orbit, you can select departure delta-v only, and it will ignore the delta-v needed to arrive in orbit at the destination. I also put arrival delta-v there for completeness. \u003C/p\u003E\u003Cp\u003EThis option impacts the entire application (except the data cursor, which shows dv based on which porkchop plot you\u0027re looking at), so make sure you change it if you need to.\u003C/p\u003E\u003Cp\u003EMoving to the departure calculation screen:\u003C/p\u003E\u003Cp\u003EPer a request, I added an option to compute the best departure for the input arrival time. This is in addition to the ability to find the best arrival time based on the input departure time.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/9rZEl6N.png\u0022 alt=\u00229rZEl6N.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI also added the ability to find the earliest departure for an input delta-v:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/KuuVSwb.png\u0022 alt=\u0022KuuVSwb.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhen you select that, a box comes up that asks you for a delta-v magnitude. Note that if you enter a delta-v that is too small, the solver will kinda freak out and spit out an error. It will still provide an answer, it just won\u0027t be very good (most likely).\u003C/p\u003E\u003Cp\u003EFinally, the transfer orbit map has gotten a minor addition in the form of markers for apoapse and periapse. Markers for ascending and descending node will come later. A marker for the location of your destination planet at the departure burn was also added.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/71GByNJ.png\u0022 alt=\u002271GByNJ.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EFinally, the last change I made was to go through and fix/update/add to the list of bodies that the program knows about. I\u0027ve now got all the moons of Jool in there, as well as corrected orbital parameters for the main planets. \u003C/p\u003E\u003Cp\u003EMy next major task is to rewrite the Lambert solver (as I said earlier) and then we\u0027ll go from there.\u003C/p\u003E\u003Cp\u003EWhat do you guys think? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-27T03:39:53Z","Content":"\n\u003Cp\u003EI\u0027ve just uploaded version 0.5. It will be online shortly. Feedback is appreciated as always. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-29T04:56:01Z","Content":"\n\u003Cp\u003EI\u0027ll just leave this here... *whistles*\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/rJsS9Ky.png\u0022 alt=\u0022rJsS9Ky.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"The Lone Wolfling","CreatedById":13675,"CreatedDateTime":"2013-06-29T19:54:31Z","Content":"\n\u003Cp\u003EVersion 5 looks awesome!\u003C/p\u003E\u003Cp\u003ESome comments/queries/concerns, though, as usual:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EFor the various calculation windows, would it be possible to add estimates of the remaining time until the calculation is complete?\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOn the \u0022find earliest arrival for delta-v\u0022 window, could you also search to see if delaying the launch might make an earlier arrival feasible?\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIf you hit \u0022Select Departure/arrival date\u0022, and then exit the main window, it crashes instead of exiting cleanly.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe console window still shows v0.1.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EOn the \u0022find earliest arrival for delta-v\u0022 window, instead of using a value in the options, could you use the plot data type? It seems to me to be a little more intuitive that way.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECan you add an option to enter in the orbital parameters of a spacecraft around the transfer central body, and calculate transfer burns from said orbit? (Say, my spacecraft currently in an odd inclined orbit around the sun after a failed aerocapture...)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EWhat are the \u0022swirls\u0022 in this plot: ?\u003Cbr\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\u0022http://imgur.com/uEcF1yN\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/uEcF1yNs.png\u0022 alt=\u0022uEcF1yNs.png\u0022\u003E\u003C/a\u003E\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E[*]On the \u0022find earliest arrival for delta-v\u0022 window, if there aren\u0027t any feasible options, could you still select the best trajectory?\u003C/p\u003E\u003Cp\u003E[*]The scroll wheel currently always zooms towards the center of the porkchop plot, and doesn\u0027t zoom at all in the transfer orbit view.\u003C/p\u003E\u003Cp\u003E[*]Would it be possible to calculate the time to start multipart burns? (Or rather, when your spacecraft doesn\u0027t have enough thrust to do the burn in a single orbit, so you do a burn into an elliptical orbit, then next time around do the final burn.)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-29T21:39:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EVersion 5 looks awesome!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, I\u0027m glad you\u0027re enjoying it! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EFor the various calculation windows, would it be possible to add estimates of the remaining time until the calculation is complete?\u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI believe so, yes. Let me investigate though. It may be a bit of a hack since that information (time elapsed) is not natively available in the function I use to generate those. But I will see what I can do. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Yup, not only is it possible but I\u0027ve just implemented it. In the process I cleaned up some calls to the MATLAB multistart solver and put them in a common function for easy access later. I also standardized the progress bar windows across all computation functions (they all use the same function now, so they all look the same). It\u0027s a small improvement that really adds a bit of polish on things.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EOn the \u0022find earliest arrival for delta-v\u0022 window, could you also search to see if delaying the launch might make an earlier arrival feasible?\u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo basically what you want is a \u0022minimize time of flight\u0022 function that is constrained by delta-v and varies either arrival time or departure/arrival time? \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EIf you hit \u0022Select Departure/arrival date\u0022, and then exit the main window, it crashes instead of exiting cleanly.\u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFixed. I\u0027ve basically told the code to look for errors when doing so and throw up a nice message box with the error message MATLAB gives if something goes wrong.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EThe console window still shows v0.1.\u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFixed. Thanks for noticing.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EOn the \u0022find earliest arrival for delta-v\u0022 window, instead of using a value in the options, could you use the plot data type? It seems to me to be a little more intuitive that way.\u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI thought about this, but decided against it. I don\u0027t want to force people to remember to set the plot type before they go into that window. My thought was this: even if you\u0027re only interested in optimizing the departure dv, you may still be interested the arrival dv as well, because it influences your aerocapture or whatnot. Hence, I made a separate option so people could have flexibility.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003ECan you add an option to enter in the orbital parameters of a spacecraft around the transfer central body, and calculate transfer burns from said orbit? (Say, my spacecraft currently in an odd inclined orbit around the sun after a failed aerocapture...)\u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOne day I will have an option where you can alter and add to the celestial bodies in the application. Part of this is their orbital parameters. When I get this done, you could always enter your spacecraft\u0027s parameters here and then use it like you would any other planet/moon in the game. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EWhat are the \u0022swirls\u0022 in this plot:\u003Cbr\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\u0022http://imgur.com/uEcF1yN\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/uEcF1yNs.png\u0022 alt=\u0022uEcF1yNs.png\u0022\u003E\u003C/a\u003E \u003C/li\u003E\u003C/ul\u003E\u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThose are the boundary between the Type I (short way, transfer angle \u0026lt; 180 deg) and Type II (long way, transfer angle \u0026gt; 180 deg) cases. The physics works out that you typically get this high delta-v boundary between the two sets of cases. As an example, see this \u003Ca href=\u0022https://en.wikipedia.org/wiki/File:Porkchop_plot.gif\u0022 rel=\u0022external nofollow\u0022\u003EJPL-generated porkchop plot\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EOn the \u0022find earliest arrival for delta-v\u0022 window, if there aren\u0027t any feasible options, could you still select the best trajectory?\u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI believe it\u0027s doing this already, actually.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EThe scroll wheel currently always zooms towards the center of the porkchop plot, and doesn\u0027t zoom at all in the transfer orbit view.\u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOn the departure information window, those are 3D plots. MATLAB has a bug in it where zooming in on 3D plots physically makes the axis larger, which means it starts to cover up other elements of my GUI. Hence, zooming has been disabled on those plots until I can figure out a work-around (not likely, I\u0027ve been trying for years).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EWould it be possible to calculate the time to start multipart burns? (Or rather, when your spacecraft doesn\u0027t have enough thrust to do the burn in a single orbit, so you do a burn into an elliptical orbit, then next time around do the final burn.) \u003C/div\u003E\u003C/blockquote\u003E \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENot immediately possible but on the radar. I am going to do a type of \u0022burn planner\u0022 tool within KSP TOT that will compute the burns and whatnot based on information you provide about your vehicle. Part of that could be a \u0022multi-burn\u0022 setup where you put a cap on delta-v per burn or specify the number of burns to break things up into, yes. I\u0027ll make a note.\u003C/p\u003E\u003Cp\u003EThanks for the great suggestions! Btw, all bug fixes I\u0027ve specified above will show up in v0.6... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E----------------------------------------------------\u003C/p\u003E\u003Cp\u003ENow for something completely different!\u003C/p\u003E\u003Cp\u003EI thought I\u0027d share a picture from my trip to Jool yesterday. I used KSP TOT to plan the journey (of course) and after plunking burn times and delta-v info into MechJeb\u0027s maneuver node editor, this is the transfer I got in the game.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/kmopWXo.png\u0022 alt=\u0022kmopWXo.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t know about you guys, but nailing the transfer on the first pass without having to modify \u003Cem\u003Eany\u003C/em\u003E of the numbers KSP TOT gave me is pretty awesome, I think. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-29T22:41:34Z\u0022 title=\u002206/29/2013 10:41  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 29, 2013\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-30T01:11:45Z","Content":"\n\u003Cp\u003EAnother update:\u003C/p\u003E\u003Cp\u003EIn addition to some of the work I described above, I also added the line of nodes to the transfer orbit plot:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/jnlmFsm.png\u0022 alt=\u0022jnlmFsm.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EBy rotating the image, it\u0027s easy enough to see which node is ascending and which is descending. I don\u0027t want to put markers on the map because things are getting pretty cluttered, so I hope this line is sufficient for everyone\u0027s purposes. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs usual, suggestions and comments welcome. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2013-06-30T09:36:07Z","Content":"\n\u003Cp\u003EArrowstar, I see your Lambert solver is a binary mex file. Based on the I/O, it looks like you\u0027re using \u003Ca href=\u0022http://www.mathworks.com/matlabcentral/fileexchange/26348-robust-solver-for-lamberts-orbital-boundary-value-problem\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.mathworks.com/matlabcentral/fileexchange/26348-robust-solver-for-lamberts-orbital-boundary-value-problem\u003C/a\u003E ? I believe you need to reproduce the BSD license of that file somewhere in your documentation to redistribute it in binary form, unless (maybe) you happen to be the original author.\u003C/p\u003E\u003Cp\u003EI was going to play around with this a bit and see if switching to a real solver rather than fmincon could speed things up noticeably, but it seems the license server is down at the moment for my installation of Matlab that has the Global Optimization Toolbox. And I can\u0027t profile or modify anything using the MCR.\u003C/p\u003E\u003Cp\u003EThe singularity at 180 degree transfer angle goes away if you calculate a 2-burn ecliptic projection solution, like alexmun implemented in his JavaScript web-app porkchop plotter.\u003C/p\u003E\n"},{"CreatedByName":"The Lone Wolfling","CreatedById":13675,"CreatedDateTime":"2013-06-30T16:14:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ESo basically what you want is a \u0022minimize time of flight\u0022 function that is constrained by delta-v and varies either arrival time or departure/arrival time? \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo.\u003C/p\u003E\u003Cp\u003EWhat I want is a refinement of the current solver. Given an amount of delta-v and a \u003Cem\u003Eminimum\u003C/em\u003E start time, find the earliest possible arrival time.\u003C/p\u003E\u003Cp\u003EIn some cases delaying the launch can actually make the earliest possible arrival (given an amount of delta-v) earlier. Currently, the solver doesn\u0027t search for this.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI thought about this, but decided against it. I don\u0027t want to force people to remember to set the plot type before they go into that window. My thought was this: even if you\u0027re only interested in optimizing the departure dv, you may still be interested the arrival dv as well, because it influences your aerocapture or whatnot. Hence, I made a separate option so people could have flexibility.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI disagree with this, but it\u0027s your program, after all. It\u0027s just a pain to have to go into the settings to double-check that you\u0027re solving for the right thing.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThose are the boundary between the Type I (short way, transfer angle \u0026lt; 180 deg) and Type II (long way, transfer angle \u0026gt; 180 deg) cases. The physics works out that you typically get this high delta-v boundary between the two sets of cases. As an example, see this \u003Ca href=\u0022https://en.wikipedia.org/wiki/File:Porkchop_plot.gif\u0022 rel=\u0022external nofollow\u0022\u003EJPL-generated porkchop plot\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI wasn\u0027t aware of the periodicity of the delta-v boundary. Interesting...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tavert\u0022 data-cite=\u0022tavert\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThe singularity at 180 degree transfer angle goes away if you calculate a 2-burn ecliptic projection solution, like alexmun implemented in his JavaScript web-app porkchop plotter.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E...And it goes away with a 2-burn solution? Weird.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI believe it\u0027s doing this already, actually.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E...derp. I had the starting parameters set to the global minimum, so of course it wasn\u0027t changing.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EOn the departure information window, those are 3D plots. MATLAB has a bug in it where zooming in on 3D plots physically makes the axis larger, which means it starts to cover up other elements of my GUI. Hence, zooming has been disabled on those plots until I can figure out a work-around (not likely, I\u0027ve been trying for years).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWeird bugs ahoy!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ENow for something completely different!\u003C/p\u003E\u003Cp\u003E[snip]\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENeat! Always nice to see things go according to plan.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-07-01T05:12:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tavert\u0022 data-cite=\u0022tavert\u0022\u003E\u003Cdiv\u003EArrowstar, I see your Lambert solver is a binary mex file. Based on the I/O, it looks like you\u0027re using \u003Ca href=\u0022http://www.mathworks.com/matlabcentral/fileexchange/26348-robust-solver-for-lamberts-orbital-boundary-value-problem\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.mathworks.com/matlabcentral/fileexchange/26348-robust-solver-for-lamberts-orbital-boundary-value-problem\u003C/a\u003E ? I believe you need to reproduce the BSD license of that file somewhere in your documentation to redistribute it in binary form, unless (maybe) you happen to be the original author.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s the one. Thanks for pointing this out. I had this solver on my hard drive from another personal project a while ago and just grabbed the binary. I\u0027ve added the license text file to the KSP TOT ZIP file.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tavert\u0022 data-cite=\u0022tavert\u0022\u003E\u003Cdiv\u003EI was going to play around with this a bit and see if switching to a real solver rather than fmincon could speed things up noticeably, but it seems the license server is down at the moment for my installation of Matlab that has the Global Optimization Toolbox. And I can\u0027t profile or modify anything using the MCR.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s worth noting that I am using a \u0022real solver.\u0022 Indeed, the algorithms behind fmincon are quite sophisticated. What you mean is that you\u0027d like to switch to a global solver... which is fine. I\u0027m not using one of those here because I spent two years of graduate school working on this problem with MATLAB\u0027s genetic algorithm solver (simulated annealing is garbage for this.) It worked... okay, but it\u0027s very CPU intensive. As only as I only have 1 or 2 design variables to adjust (such as depart and arrival time) I\u0027d rather just use the very quick fmincon and MultiStart, which works well for what I\u0027m doing.\u003C/p\u003E\u003Cp\u003EThat said, if you make progress, please do let me know about it. I\u0027d be happy to see!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tavert\u0022 data-cite=\u0022tavert\u0022\u003E\u003Cdiv\u003EThe singularity at 180 degree transfer angle goes away if you calculate a 2-burn ecliptic projection solution, like alexmun implemented in his JavaScript web-app porkchop plotter.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENoted. I\u0027ll see what I can do.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003ENo.\u003Cp\u003EWhat I want is a refinement of the current solver. Given an amount of delta-v and a \u003Cem\u003Eminimum\u003C/em\u003E start time, find the earliest possible arrival time.\u003C/p\u003E\u003Cp\u003EIn some cases delaying the launch can actually make the earliest possible arrival (given an amount of delta-v) earlier. Currently, the solver doesn\u0027t search for this.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, so it sounds like you actually want to minimize time of flight while allowing the code to shift the departure time to help minimize it further. I can do this. Unless, of course, I\u0027m still not understanding, in which case maybe you could illustrate with an example. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI disagree with this, but it\u0027s your program, after all. It\u0027s just a pain to have to go into the settings to double-check that you\u0027re solving for the right thing.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYesterday I added notes in the relevant GUIs to help alleviate this.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/V6wnKLX.png\u0022 alt=\u0022V6wnKLX.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks for the suggestions/tips tavert, Lone Wolfling. Very much appreciated! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2013-07-01T06:26:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIt\u0027s worth noting that I am using a \u0022real solver.\u0022 Indeed, the algorithms behind fmincon are quite sophisticated. What you mean is that you\u0027d like to switch to a global solver... which is fine. I\u0027m not using one of those here because I spent two years of graduate school working on this problem with MATLAB\u0027s genetic algorithm solver (simulated annealing is garbage for this.) It worked... okay, but it\u0027s very CPU intensive. As only as I only have 1 or 2 design variables to adjust (such as depart and arrival time) I\u0027d rather just use the very quick fmincon and MultiStart, which works well for what I\u0027m doing.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou are at least telling it to use the interior-point algorithm, which is leaps and bounds better than the lousy old default active-set fmincon solver. I\u0027m just referring to the local solver here - I regularly work with large-scale sparse problems with tens of thousands of variables, and fmincon just doesn\u0027t cut it. The state of the art is solvers like Ipopt, which is basically the reason Mathworks went and wrote an interior-point algorithm in the first place. For big problems, it can be an order of magnitude difference in performance, if not more. But I guess for these purposes you have very small problems, and you care more about the solver doing finite differences for you to get the gradient and Jacobian. Wonder if there are any redistributable auto-differentiation tools for Matlab that are good enough to be worth using...\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-07-01T13:33:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tavert\u0022 data-cite=\u0022tavert\u0022\u003E\u003Cdiv\u003EYou are at least telling it to use the interior-point algorithm, which is leaps and bounds better than the lousy old default active-set fmincon solver. I\u0027m just referring to the local solver here - I regularly work with large-scale sparse problems with tens of thousands of variables, and fmincon just doesn\u0027t cut it. The state of the art is solvers like Ipopt, which is basically the reason Mathworks went and wrote an interior-point algorithm in the first place. For big problems, it can be an order of magnitude difference in performance, if not more. But I guess for these purposes you have very small problems, and you care more about the solver doing finite differences for you to get the gradient and Jacobian. Wonder if there are any redistributable auto-differentiation tools for Matlab that are good enough to be worth using...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh indeed. Yes, one of the most important features of fmincon (for me) is the auto-differentiation. If I didn\u0027t have that, I\u0027d either have to write my own, which I grant you would not be too terrible, or try to find analytic gradients for my problem, which I suspect don\u0027t exist. It makes my life a lot easier that MATLAB can do this for me, and in a (fairly) sophisticated way.\u003C/p\u003E\u003Cp\u003EOut of curiosity, what do you do that has you working with numerical problems such as the one you described?\u003C/p\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2013-07-01T14:54:27Z","Content":"\n\u003Cp\u003EWell fmincon isn\u0027t doing auto-diff, it\u0027s numerical finite differences which works okay for small problems but just plain sucks for big stuff. Technically this isn\u0027t the solver (many state-of-the-art solvers require the user to provide gradients), it\u0027s the optimization modeling environment. Matlab isn\u0027t quite up to par with what AMPL, OpenOpt, etc. can provide.\u003C/p\u003E\u003Cp\u003EOptimization-based control. Large-scale real-time optimization of HVAC energy efficiency across an entire large commercial building, for example.\u003C/p\u003E\n"},{"CreatedByName":"The Lone Wolfling","CreatedById":13675,"CreatedDateTime":"2013-07-01T16:03:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EOkay, so it sounds like you actually want to minimize time of flight while allowing the code to shift the departure time to help minimize it further. I can do this. Unless, of course, I\u0027m still not understanding, in which case maybe you could illustrate with an example. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAgain, nothing to do with time of \u003Cem\u003Eflight\u003C/em\u003E. Here\u0027s an example:\u003C/p\u003E\u003Cp\u003EI want to find the earliest Moho arrival time after the start of the game, that requires \u0026lt;=7190 m/s delta-v.\u003C/p\u003E\u003Cp\u003EEarliest departure time = 0, departure body = Kerbin, arrival body = Moho. Compute porkchop plot. Compute departure burn. Departure time = 0. Find earliest arrival for delta-v: 7.19km/s.\u003C/p\u003E\u003Cp\u003ECurrent result: arrival time: 2645496.8329s, departure time 0s, delta-v 7.19km/s.\u003C/p\u003E\u003Cp\u003EWanted result: arrival time 2605640.6069s, departure time 252538.0995s, delta-v 7.19 km/s. \u003C/p\u003E\u003Cp\u003E(Wanted result found by alternating delta-v and optimal departure time.)\u003C/p\u003E\u003Cp\u003EAlmost 40,000s (11h) earlier arrival time. Not a great improvement in this case, but it\u0027s a simple case. Yes, it does reduce the time of flight, but that is incidental. (A time of flight minimizer would also be useful, but that isn\u0027t what I\u0027m asking for here.)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EYesterday I added notes in the relevant GUIs to help alleviate this.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECould you add an option in the enter max delta-v GUI to change between solver types? This helps, but it\u0027s the act of having to switch between different windows constantly that makes it tedious for me.\u003C/p\u003E\u003Cp\u003EAlso, minor tweak: could you make it so when the program starts it starts with Kerbin selected as the departure body, and Duna as the arrival body? Currently it starts with Moho as both. Sane defaults are always good \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TheProdigy","CreatedById":15985,"CreatedDateTime":"2013-07-03T07:16:09Z","Content":"\n\u003Cp\u003EThis looks amazing! Not sure if this was already asked.\u003C/p\u003E\u003Cp\u003EBut do you have plans to make it possible to plan gravity assists/slingshots?\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-07-03T13:35:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EAgain, nothing to do with time of \u003Cem\u003Eflight\u003C/em\u003E. Here\u0027s an example:\u003Cp\u003EI want to find the earliest Moho arrival time after the start of the game, that requires \u0026lt;=7190 m/s delta-v.\u003C/p\u003E\u003Cp\u003EEarliest departure time = 0, departure body = Kerbin, arrival body = Moho. Compute porkchop plot. Compute departure burn. Departure time = 0. Find earliest arrival for delta-v: 7.19km/s.\u003C/p\u003E\u003Cp\u003ECurrent result: arrival time: 2645496.8329s, departure time 0s, delta-v 7.19km/s.\u003C/p\u003E\u003Cp\u003EWanted result: arrival time 2605640.6069s, departure time 252538.0995s, delta-v 7.19 km/s. \u003C/p\u003E\u003Cp\u003E(Wanted result found by alternating delta-v and optimal departure time.)\u003C/p\u003E\u003Cp\u003EAlmost 40,000s (11h) earlier arrival time. Not a great improvement in this case, but it\u0027s a simple case. Yes, it does reduce the time of flight, but that is incidental. (A time of flight minimizer would also be useful, but that isn\u0027t what I\u0027m asking for here.) \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, I understand what you want. I\u0027ll see about implementing this tomorrow. Sorry for the delay, I\u0027ve been having too much fun with the Kethane 0.72 release. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ECould you add an option in the enter max delta-v GUI to change between solver types? This helps, but it\u0027s the act of having to switch between different windows constantly that makes it tedious for me.\u003C/p\u003E\u003Cp\u003EAlso, minor tweak: could you make it so when the program starts it starts with Kerbin selected as the departure body, and Duna as the arrival body? Currently it starts with Moho as both. Sane defaults are always good \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E1) I\u0027ll look into it. Not sure how hard it\u0027ll be to keep everything synced up, but will investigate.\u003C/p\u003E\u003Cp\u003E2) Yes, I need sane defaults. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I actually had it doing this originally, but I ran into a bug and the workaround was to eliminate the default setting. I\u0027ve got an idea to fix it though, will try to get to it tomorrow or this weekend.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheProdigy\u0022 data-cite=\u0022TheProdigy\u0022\u003E\u003Cdiv\u003EThis looks amazing! Not sure if this was already asked.\u003Cp\u003EBut do you have plans to make it possible to plan gravity assists/slingshots?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m working on that right now. The math is all figured out and coded up, but the problem is still very tricky to solve. Not sure at this point if it will every make it into the main program. Keep checking this space for more updates. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"tavert","CreatedById":57383,"CreatedDateTime":"2013-07-03T23:26:20Z","Content":"\n\u003Cp\u003ERegarding gravity assists, is there anything worth using or learning from \u003Ca href=\u0022http://www.mathworks.com/matlabcentral/fileexchange/29272-skipping-stone-an-interplanetary-space-mission-design-tool\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.mathworks.com/matlabcentral/fileexchange/29272-skipping-stone-an-interplanetary-space-mission-design-tool\u003C/a\u003E ? Written by the same guy as the Lambert solver.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-07-05T13:30:26Z","Content":"\n\u003Cp\u003EHi everyone,\u003C/p\u003E\u003Cp\u003EJust a quick development update this morning.\u003C/p\u003E\u003Cp\u003EI plan on getting 0.6 out the door tonight if possible. This is a minor update that includes the following:\u003C/p\u003E\u003Cp\u003E-Lone Wolfling\u0027s \u0022minimize arrival time\u0022 with variable departure time optimizer;\u003C/p\u003E\u003Cp\u003E-The ability to input arithmetic statements (2\u002B2 for example) into numeric text boxes and have them evaluate (so if you enter 2\u002B2, the box changes to read 4)\u003C/p\u003E\u003Cp\u003E-I am going to change the \u0022optimizer departure time for given arrival\u0022 to use the current input arrival as a lower bound for the optimizer. This way you don\u0027t end up with solutions in the past if you don\u0027t want them.\u003C/p\u003E\u003Cp\u003E-Other minor bug fixes and enhancements\u003C/p\u003E\u003Cp\u003EMy plan is for 0.7 to be the \u0022flyby optimizer\u0022 release. I\u0027ve been spending a lot of time lately on getting this to work (hence the slowdown in my posting and releasing new versions of this), and I think I\u0027ve got it at the point where it\u0027s at least release-able. To be honest, my research into all of this suggests that fly-bys aren\u0027t as useful as one might think, but I\u0027ll provide the functionality and let people mess around with it anyway.\u003C/p\u003E\u003Cp\u003EWas there anything else quick you guys wanted for 0.6? If I can whip it up in a few hours tonight, I\u0027ll include it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-07-06T01:30:35Z","Content":"\n\u003Cp\u003EHi everyone,\u003C/p\u003E\u003Cp\u003EI\u0027m happy to announce the release of v0.6 (main posting pending update shortly). This is a relatively minor release I\u0027m using to get some basic outstanding features out of the way before I go ahead and implement my experimental \u0022fly-by\u0022 solver code (the math of which currently functional - basically it needs a GUI.)\u003C/p\u003E\u003Cp\u003ENew functionality includes:\u003C/p\u003E\u003Cp\u003E-Lone Wolfling\u0027s \u0022minimize arrival time\u0022 with variable departure time optimizer;\u003C/p\u003E\u003Cp\u003E-The ability to input arithmetic statements (2\u002B2 for example) into numeric text boxes and have them evaluate (so if you enter 2\u002B2, the box changes to read 4)\u003C/p\u003E\u003Cp\u003E-\u0022Optimize Departure for Input Arrival\u0022 now uses the input departure time as a lower bound. Useful for when you\u0027re in the middle of a game and you clearly can\u0027t go back in time to find that \u0022better\u0022 solution.\u003C/p\u003E\u003Cp\u003E-Some bug fixes and tweaks under the hood.\u003C/p\u003E\u003Cp\u003EMost of my work the past week has concentrated on getting the fly-by math worked out and working prototype code implemented, which is why this release is pretty minor. Nevertheless, I think it\u0027s a improvements, while small, are helpful.\u003C/p\u003E\u003Cp\u003EAs always, comments, questions, and questions are welcome. Please also let me know if you find a bug or something works not as expected.\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-07-06T03:10:57Z","Content":"\n\u003Cp\u003EHi guys!\u003C/p\u003E\u003Cp\u003EI wanted to offer a sneak peak of where they fly-by optimizer is at right now. I\u0027ve been looking at a number of trajectories to serve as examples, but the one I like the best is the Kerbin-Eve-Moho flight plan. As we know, flying to Moho is usually pretty expensive. The one KSP delta-v map I looked at (not terribly accurate, but it\u0027ll do here) suggests 2.2 km/s == 2200 m/s.\u003C/p\u003E\u003Cp\u003EThis evening, I asked my solver to find me a cheaper trajectory to get to Moho by using Eve as a fly-by. Here\u0027s what it came up with. (Red trajectory is the to-Eve trajectory, blue is the to-Moho trajectory.)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/DSKAJHN.png\u0022 alt=\u0022DSKAJHN.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd here\u0027s what the trajectory around Eve looks like.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/LjiWgWf.png\u0022 alt=\u0022LjiWgWf.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe delta-v number of there is the amount of delta-v that the s/c needs to apply at periapse of the fly-by in order to hit the outgoing trajectory (and thus the target planet). In this case, the solver found a great ~0 m/s delta-v trajectory. The periapse around even was ~800 km in radius.\u003C/p\u003E\u003Cp\u003EHere\u0027s some other relevant information that the solver spits out.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003EDeparture DV = 0.852133165506862 km/s\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003EArrival DV = 4.71245869089299 km/s\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EOkay, now I realize that the arrival dv is a bit high. The solver is only looking to optimize the departure and fly-by delta-v right now. I found that throwing in the arrival delta-v resulted in a poor departure \u003Cem\u003Eand\u003C/em\u003E a poor arrival. This way, at least leaving is very easy. When I get things put together this weekend, I\u0027ll include the option to add arrival delta-v to the optimizer, but no promises on how that will work out when you actually go to run it.\u003C/p\u003E\u003Cp\u003EI\u0027m still working on GUI design at this point, but that should be straight-forward. Please note that, despite my best efforts and about a week\u0027s worth of work, this is still going to be a challenging tool for the average user to use. The PSO (particle swarm optimizer) I\u0027m using doesn\u0027t get consistently good results (though I\u0027ll be the first to say it does really well most of the time!), and frankly, some trajectories are just going to be stupid. (Flyby around Dres? How about no.) This will require \u003Cem\u003Esome\u003C/em\u003E knowledge of what you\u0027re ultimately going for unless you have days of CPU time for the solver to go through every possible trajectory (an impossibility) to find the good stuff. And as I said, some trajectories will either not be possible or cost much more than their equivalent direct Lambert arc siblings.\u003C/p\u003E\u003Cp\u003EAnyway, it\u0027s all in good fun. I may allow the use of two fly-by bodies if I think it\u0027s possible, but that\u0027ll be the limit. It already takes 5-10 minutes to try and optimize a 1 fly-by trajectory: any more than that and things are going to start getting expensive.\u003C/p\u003E\u003Cp\u003EAnyway, thoughts? Comments and questions are welcome as always. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"The Lone Wolfling","CreatedById":13675,"CreatedDateTime":"2013-07-06T14:45:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EHi guys!\u003Cp\u003EI wanted to offer a sneak peak of where they fly-by optimizer is at right now.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWow that solver looks great!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EHere\u0027s some other relevant information that the solver spits out.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003EDeparture DV = 0.852133165506862 km/s\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003EArrival DV = 4.71245869089299 km/s\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EOkay, now I realize that the arrival dv is a bit high. The solver is only looking to optimize the departure and fly-by delta-v right now. I found that throwing in the arrival delta-v resulted in a poor departure \u003Cem\u003Eand\u003C/em\u003E a poor arrival. This way, at least leaving is very easy. When I get things put together this weekend, I\u0027ll include the option to add arrival delta-v to the optimizer, but no promises on how that will work out when you actually go to run it.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWould restricting it to not burn on the flyby help any? It would certainly reduce the sample space. Also, any possibility of calculating possible aerobraking for the flyby?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnyway, it\u0027s all in good fun. I may allow the use of two fly-by bodies if I think it\u0027s possible, but that\u0027ll be the limit. It already takes 5-10 minutes to try and optimize a 1 fly-by trajectory: any more than that and things are going to start getting expensive.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESounds like it\u0027s time to try (more?) optimization... What\u0027s the most expensive part? Have you tried profiling? (Though, that being said, it\u0027s going to be computationally expensive regardless - the sample space is just so large...)\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-07-07T04:31:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EWow that solver looks great!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks! It\u0027s taken about a week to get things working nicely, but I think I\u0027m on to something here.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003EWould restricting it to not burn on the flyby help any? It would certainly reduce the sample space. Also, any possibility of calculating possible aerobraking for the flyby?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo, interestingly enough, it doesn\u0027t actually reduce the sample space. Here\u0027s why:\u003C/p\u003E\u003Cp\u003ETo compute a fly-by, you first need to know where you\u0027re coming from and where you\u0027re going. So if your mission is from Kerbin to Eve to Moho, you need the Kerbin-Eve and Eve-Moho trajectories already figured out. This then defines the fly-by around Eve. Now, a standard gravity assist with no engine burn will have the same specific orbital energy at SOI entry and exit (w.r.t. the flyby planet, here Eve). However, your Sun-centered trajectory may require a higher exit energy than entry energy. In this case, you must expend fuel to make up the difference in energy.\u003C/p\u003E\u003Cp\u003EThe solver is designed around a Lambert solver, which requires position vectors to the planets and a time of flight. Basically, you get these by selecting a departure date and two times of flight for your transfer arcs. The solver attempts to optimize the departure date and the flight times to the flyby body and destination body. These quantities dictate the Sun-centered orbits, which dictate the Eve flyby orbit, which dictates any delta-v you need to burn while flying by Eve.\u003C/p\u003E\u003Cp\u003ENow, I can constrain my solver such that the fly-by delta-v is 0, but then it really freaks out and has a hard time with the problem. Better to just let it come up with what it\u0027s going to come up with.\u003C/p\u003E\u003Cp\u003Etl;dr: Can\u0027t avoid engine burns in some cases because of orbital math.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022The Lone Wolfling\u0022 data-cite=\u0022The Lone Wolfling\u0022\u003E\u003Cdiv\u003ESounds like it\u0027s time to try (more?) optimization... What\u0027s the most expensive part? Have you tried profiling? (Though, that being said, it\u0027s going to be computationally expensive regardless - the sample space is just so large...)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe problem is not the objective function being minimized (it\u0027s actually quite fast, since the Lambert solver is a compiled MEX file and that\u0027s the bulk of the work). It is, as you said, the size of design space and (more importantly) the number of function evaluations needed to do a good job traversing it. I\u0027m using a particle swarm optimizer (it\u0027s on the MATLAB file exchange and I\u0027ll include the BSD license the first time around this time lol), which takes a population of particles and uses them to find global minima. Now, I also have a speedy Core i5 processor, and I can tell you that even 100 of those particles is a lot, even running the optimization in parallel mode on all four cores at once. If I increase the trade space to another flyby, I\u0027ll need even more particles, the whole thing takes longer, and my electric bill spikes because of the insane CPU usage. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E In short, I\u0027ve explored it and it\u0027s not really feasible for my tool.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003ENow for something completely different!\u003Cp\u003EHere\u0027s what I did today.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/cHnRjoR.png\u0022 alt=\u0022cHnRjoR.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI think it\u0027s fairly self-explanatory, but I\u0027ll point out a few things here.\u003C/p\u003E\u003Cp\u003EFirst, the trajectory was my favorite Kerbin-Eve-Moho. I started in LKO and entered the solid white line on the trajectory plot. I then swung by Eve and entered the dashed white trajectory. A bit later I arrive at Moho! \u003C/p\u003E\u003Cp\u003EYou\u0027ll see that the GUI is set up very much like the Departure Information GUI for showing single transfer arc information. All required information about the Kerbin departure hyperbolic orbit and the Eve fly-by hyperbolic orbits is given. Same goes for the Sun-centered transfer orbit arcs. I also provide the usual information you need to execute the departure from Kerbin and the fly-by around Eve.\u003C/p\u003E\u003Cp\u003ENext up I will get the apse and node markers on the transfer orbit map. After that, I\u0027ll probably release (tomorrow or Monday maybe) and try to get some feedback. I should note here:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EFlyby optimization is computationally intensive. Be prepared to wait a few minutes for the software to do its thing. \u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ESo, thoughts? I really think KSP TOT is shaping up to be the premier mission planning software for Kerbal Space Program. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"adammada","CreatedById":29884,"CreatedDateTime":"2013-07-07T09:59:59Z","Content":"\n\u003Cp\u003EDoes this \u0022fly-by\u0022 assistance takes into account possibility of first waiting few orbits, then getting to destination (like Kerbin-\u0026gt;Eve-\u0026gt;3 orbits around Kerbol-\u0026gt; Moho) ?\u003C/p\u003E\u003Cp\u003EAlso, could you somehow add posibility for searching \u0022all planets flyby\u0022 path, just like here:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/37974-Optimal-gravity-assisted-grand-tour-%28AKA-Voyager-like-mission%29-challenge\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/showthread.php/37974-Optimal-gravity-assisted-grand-tour-%28AKA-Voyager-like-mission%29-challenge\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI understand that this could take really long, but it is one time to find for everybody, so i think that many users could spare their computer CPU to find it. So it should be splittable to many parts, so many users can count different parts.\u003C/p\u003E\n"},{"CreatedByName":"adammada","CreatedById":29884,"CreatedDateTime":"2013-07-07T10:47:08Z","Content":"\n\u003Cp\u003EBug (or just to complicated to users...)?\u003C/p\u003E\u003Cp\u003EI\u0027m looking for Kerbin -\u0026gt; Eve launch window (going to Eve, so aerobreaking)\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://alexmoon.github.io/ksp/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://alexmoon.github.io/ksp/\u003C/a\u003E (100 km orbit start, no orbit end, ballistic) :\u003C/p\u003E\u003Cp\u003EDeparture\u003C/p\u003E\u003Cp\u003E Year 1, day 147 at 6:43:12\u003C/p\u003E\u003Cp\u003EArrival\u003C/p\u003E\u003Cp\u003E Year 1, day 196 at 22:43:12\u003C/p\u003E\u003Cp\u003ETime of flight\u003C/p\u003E\u003Cp\u003E 49 days 16:00:00\u003C/p\u003E\u003Cp\u003EPhase angle\u003C/p\u003E\u003Cp\u003E -36.35\u00C3\u201A\u00C2\u00B0\u003C/p\u003E\u003Cp\u003EEjection angle\u003C/p\u003E\u003Cp\u003E 150\u00C3\u201A\u00C2\u00B0 to retrograde\u003C/p\u003E\u003Cp\u003EEjection inclination\u003C/p\u003E\u003Cp\u003E -1.07\u00C3\u201A\u00C2\u00B0\u003C/p\u003E\u003Cp\u003EEjection delta-v\u003C/p\u003E\u003Cp\u003E 1,074 m/s\u003C/p\u003E\u003Cp\u003ETransfer periapsis\u003C/p\u003E\u003Cp\u003E 8,879 Mm\u003C/p\u003E\u003Cp\u003ETransfer apoapsis\u003C/p\u003E\u003Cp\u003E 13,339 Mm\u003C/p\u003E\u003Cp\u003ETransfer inclination\u003C/p\u003E\u003Cp\u003E 0.12\u00C3\u201A\u00C2\u00B0\u003C/p\u003E\u003Cp\u003ETransfer angle\u003C/p\u003E\u003Cp\u003E 238\u00C3\u201A\u00C2\u00B0\u003C/p\u003E\u003Cp\u003EInsertion inclination\u003C/p\u003E\u003Cp\u003E N/A\u003C/p\u003E\u003Cp\u003EInsertion delta-v\u003C/p\u003E\u003Cp\u003E N/A\u003C/p\u003E\u003Cp\u003ETotal delta-v\u003C/p\u003E\u003Cp\u003E 1,074 m/s \u003C/p\u003E\u003Cp\u003EKSPTOT:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/a/HS2k0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/HS2k0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EQuestions:\u003C/p\u003E\u003Cp\u003E- why there is different optimal time selected on plot and different displayed in status box?\u003C/p\u003E\u003Cp\u003E- why i cant copy text to clipboard from status box?\u003C/p\u003E\u003Cp\u003EResult: when I entered correct arrival time in \u0022Compute Burn Box\u0022 ( 196 at 22:43:12 ), it computed correct departure time, and gave me ~1000 delta-V departure burn. But i could get it on porkchop. (but i set in options 100 points per axis). But by itself it gives very not-optimal results.\u003C/p\u003E\n"}]}