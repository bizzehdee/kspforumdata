{"TopicId":33568,"ForumId":35,"TopicTitle":"[WIN/MAC/LINUX] KSP Trajectory Optimization Tool v1.6.9 [New MATLAB Version!]","CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-18T04:59:31Z","PageNum":176,"Articles":[{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-23T16:07:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223931160\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614095847\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOkay.\u00A0 And can you describe for me what you wanted to do, what actually happened, and how I can reproduce the issue?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFor the first part, just load the mat. You will see that the final state corresponds to event 4, not event 7.\n\u003C/p\u003E\n\u003Cp\u003E\nFor the block, i don\u0027t now what happened but now it is just working.\n\u003C/p\u003E\n\u003Cp\u003E\nI was trying to design a return trip to low kerbol. First step without problem, I find the burn that takes my probe from \u003Cabbr title=\u0022Low Kerbin Orbit\u0022\u003ELKO\u003C/abbr\u003E to 180000km Kerbol \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E. The problem is when I try to go back to Kerbin. It just started and never went ahead of iteration 0, but now it works.\u00A0 By the way, after stading it the whole evening now I realize that what I want to do probably cant be done, at least in a single orbit.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-23T16:12:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223931167\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614096438\u0022 data-ipsquote-userid=\u0022191092\u0022 data-ipsquote-username=\u0022Tacombel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, Tacombel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor the first part, just load the mat. You will see that the final state corresponds to event 4, not event 7.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe final state does correspond to event 7.\u00A0 The issue is that your two coast segments both say to go to a true anomaly of 0, but event 4 is already at 0 and the Event 6 \u003Cabbr title=\u0022Delta-V\u0022\u003EDV\u003C/abbr\u003E is all zeros, so there\u0027s nothing to be done.\u00A0 That\u0027s why they don\u0027t propagate out in time further.\n\u003C/p\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-23T16:14:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223931175\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614096731\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe final state does correspond to event 7.\u00A0 The issue is that your two coast segments both say to go to a true anomaly of 0, but event 4 is already at 0 and the Event 6 \u003Cabbr title=\u0022Delta-V\u0022\u003E\u003Cabbr title=\u0022Delta-V\u0022\u003EDV\u003C/abbr\u003E\u003C/abbr\u003E is all zeros, so there\u0027s nothing to be done.\u00A0 That\u0027s why they don\u0027t propagate out in time further.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nmmmm, now it is clearer.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: If I set the True Anomaly in the second coast to 1 to avoid problems and add one orbit I get an encounter. Great!!!!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-02-23T16:21:42Z\u0022 title=\u002202/23/2021 04:21  PM\u0022 data-short=\u00223 yr\u0022\u003EFebruary 23, 2021\u003C/time\u003E by Tacombel\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-23T19:48:13Z","Content":"\n\u003Cp\u003E\nThis afternoon I\u0027ve build \u003Ca href=\u0022https://drive.google.com/open?id=1DcVwdaYxyP457u9dMzyEKYwQ_lFTt2OA\u0026amp;authuser=hardena%40alumni.msoe.edu\u0026amp;usp=drive_fs\u0022 rel=\u0022external nofollow\u0022\u003EKSPTOT v1.6.8 pre-release 3\u003C/a\u003E.\u00A0 This PR has a bunch of new features that I\u0027m looking forward to sharing.\u00A0 Here\u0027s the change log:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nLVD: T2W throttle model now checks minimum throttle T2W as well as maximum.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Sim Driver now warns if integrator output event index (ie) is empty.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: When editing non-seq events, the event UI now greys out any non-relevant widgets.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cstrong\u003ELVD: New geometry type: Angles.\u003C/strong\u003E\n\u003Cul\u003E\u003Cli\u003E\nAngles measure the angle between other geometric objects.\u00A0 Right now there are angles between vectors and angles between a vector and planes.\n\u003C/li\u003E\n\u003Cli\u003E\nAngles can be viewed in the LVD view area.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\n\u003Cstrong\u003ELVD: New geometry type: Planes.\u003C/strong\u003E\n\u003Cul\u003E\u003Cli\u003E\nPlanes are infinite, flat, 2D surfaces that run through a point and are perpendicular to a vector.\n\u003C/li\u003E\n\u003Cli\u003E\nThere are two plane types: Planes formed from a vector and point, and Planes formed from three points.\n\u003C/li\u003E\n\u003Cli\u003E\nPlanes can be viewed in the LVD view area.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nLVD: New \u0022plane to point\u0022 geometric vector type.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cstrong\u003ELVD: Added new Sum of Sines steering model\u003C/strong\u003E.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nThe Sum of Sines steering is particularly interesting.\u00A0 The model is a set of sine waves, each with their own amplitude, frequency, and phase shift.\u00A0 The number of sine waves is user-defined and each sine can have any of its parameters optimized.\u00A0 There is also a constant offset parameter that can be optimized.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s an example of what I\u0027m talking about:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00225vFus8E.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002268.02\u0022 height=\u0022453\u0022 width=\u0022666\u0022 src=\u0022https://i.imgur.com/5vFus8E.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nWhy is this cool and helpful?\u00A0 Well, first of all, there\u0027s an idea out there that any arbitrary function can be defined as a sum of sines.\u00A0 (I believe this is known as a Fourier series.)\u00A0 Using this functionality, it should be possible to create complex steering models that can be far more flexible than polynominal steering.\u00A0 How complex?\u00A0 Well, here\u0027s a one event low thrust burn from low Kerbin orbit to KEO using the above sum of sines steering model.\u00A0 (Thrust is only 0.25 kN!)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022rmJ9xrV.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002275.26\u0022 height=\u0022727\u0022 width=\u0022966\u0022 src=\u0022https://i.imgur.com/rmJ9xrV.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThis would not have been possible with any of the previously existing steering models.\n\u003C/p\u003E\n\u003Cp\u003E\nI will note that optimizing the various sine values is best done with the NOMAD or patternsearch optimization algorithms.\u00A0 Once you get close with that optimizer, though, then FMINCON is perfectly happy optimizing something like the above.\n\u003C/p\u003E\n\u003Cp\u003E\nPlease let me know if you find any bugs or have any issues in this new PR.\u00A0 Thanks, and happy orbiting. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-24T00:48:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223929247\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221613787793\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2/19/2021 at 8:23 PM, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E just realized I heard back from you on all my recent postings except this one with the odd dynamic pressure plot:\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u00222521\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed4017167856\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/33568-winmaclinux-ksp-trajectory-optimization-tool-v167-lvd-kos-integration/\u0026amp;do=embed\u0026amp;comment=3922093\u0026amp;embedComment=3922093\u0026amp;embedDo=findComment\u0022 style=\u0022height:264px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cs\u003EOkay, there\u0027s a bug in the dynamic pressure calculation in GA.\u00A0 I think I\u0027ve got it isolated and I\u0027ll fix it tonight or tomorrow.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: Nevermind, what I thought was wrong is not wrong.\u00A0 The search continues.\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT2: Okay, here\u0027s what I think is going on, and why I think this isn\u0027t a problem.\u00A0 At 61.366 seconds, the vehicle in your MAT file hits a point where the slope of the atmospheric density curve (which, remember, is a piecewise linear curve as far as KSP models it goes) changes drastically.\u00A0 This point in time is also when the dynamic pressure curve starts ascending again.\u00A0 I\u0027m going to chalk the \u0022double hump\u0022 nature of the dynamic pressure curve to this, then.\u00A0 And since KSP models the atmospheric temperature and pressure using piecewise linear curves, I think it\u0027s \u0022accurate\u0022 as far as KSP goes, even if it\u0027s not in real life.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat do you think, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103177-drew-kerman/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022103177\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103177-drew-kerman/\u0022 rel=\u0022\u0022\u003E@Drew Kerman\u003C/a\u003E?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022bj5CKK2.png?1\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022120.49\u0022 height=\u0022594\u0022 width=\u0022493\u0022 src=\u0022https://i.imgur.com/bj5CKK2.png?1\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-02-24T03:56:09Z\u0022 title=\u002202/24/2021 03:56  AM\u0022 data-short=\u00223 yr\u0022\u003EFebruary 24, 2021\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2021-02-25T11:20:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223931456\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614127695\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2/23/2021 at 7:48 PM, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat do you think, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103177-drew-kerman/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022103177\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103177-drew-kerman/\u0022 rel=\u0022\u0022\u003E@Drew Kerman\u003C/a\u003E?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think I\u0027m going to be throwing more data at you in the future \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E but for now I agree, seems like a good correlation to explain what\u0027s happening.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso delay in response due to not checking the thread directly. FYI I have found that when you edit a post, even sticking in a new user tag doesn\u0027t generate an alert for that user\n\u003C/p\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-25T16:15:20Z","Content":"\n\u003Cp\u003E\nThe way I am using KTOT, I will assume the ship in parking orbit and from there will plan the mission in MA , note the burns and then design the ship in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nThen, after each burn, I reload the initial state and calculate again the next burn or two.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter the initial problems, I find MA\u00A0to be intuitive and easy to\u00A0use. Does it make sense to use LVD for this? The provided tutorial is so exhaustive that I find difficult to emulate what I do in MA with LCD, and I don\u0027t even know if it makes sense or not trying.\n\u003C/p\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-25T17:08:00Z","Content":"\n\u003Cp\u003E\nAnd it seems that I have the ability to break everything. This missions breaks the optimizer even before it starts. The first burn takes the probe to kerbol \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E at 180000km, the next three burns shoud take it back to kerbol one year in the future.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/open?id=1fN_hNNs3pLOmDaYj3PXRaFS2X9NmT741\u0022 rel=\u0022external nofollow\u0022\u003E.mat\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-25T17:44:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932116\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614272880\u0022 data-ipsquote-userid=\u0022191092\u0022 data-ipsquote-username=\u0022Tacombel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n33 minutes ago, Tacombel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd it seems that I have the ability to break everything. This missions breaks the optimizer even before it starts. The first burn takes the probe to kerbol \u003Cabbr title=\u0022Periapsis\u0022\u003E\u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E\u003C/abbr\u003E at 180000km, the next three burns shoud take it back to kerbol one year in the future.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/open?id=1fN_hNNs3pLOmDaYj3PXRaFS2X9NmT741\u0022 rel=\u0022external nofollow\u0022\u003E.mat\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhen I went to go optimize, I saw this first thing in the log:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYour initial point x0 is not between bounds lb and ub; FMINCON\u003Cbr\u003E\nshifted x0 to strictly satisfy the bounds.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is definitely going to be the problem.\u00A0 One of your variables is probably right on a bound.\u00A0 Figure out which one it is and push it to be just inside the bounds.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, I noticed that you had your optimization objective function as minimize distance to body and a constraint for periapsis.\u00A0 This is a bit redundant.\u00A0 I would consider switching your objective function to Maximize Mass.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932093\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614269720\u0022 data-ipsquote-userid=\u0022191092\u0022 data-ipsquote-username=\u0022Tacombel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Tacombel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAfter the initial problems, I find MA\u00A0to be intuitive and easy to\u00A0use. Does it make sense to use LVD for this? The provided tutorial is so exhaustive that I find difficult to emulate what I do in MA with LCD, and I don\u0027t even know if it makes sense or not trying.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn general, I think LVD is the superior tool for just about everything at this point.\u00A0 Yes, it\u0027s more complicated, but it\u0027s worth the learning curve in my opinion.\u00A0 Take a look at the examples I provide and see if you can\u0027t figure out how they work, and then go try to do you own stuff. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-25T22:17:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932133\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614275080\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, I noticed that you had your optimization objective function as minimize distance to body and a constraint for periapsis.\u00A0 This is a bit redundant.\u00A0 I would consider switching your objective function to Maximize Mass.\n\u003C/p\u003E\n\u003Cp\u003E\nIn general, I think LVD is the superior tool for just about everything at this point.\u00A0 Yes, it\u0027s more complicated, but it\u0027s worth the learning curve in my opinion.\u00A0 Take a look at the examples I provide and see if you can\u0027t figure out how they work, and then go try to do you own stuff. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYea, it is working now. The problem is that there is a second problem, probably related\u00A0with Matlab. When the program crash, probably because of the problem with the boundaries, I have to kill the process because KSPTOT becomes unresponsive. After that, it doesn\u0027t work until y reset my computer. Something simple as modifying\u00A0 a value in a \u003Cabbr title=\u0022Delta-V\u0022\u003E\u003Cabbr title=\u0022Delta-V\u0022\u003EDV\u003C/abbr\u003E\u003C/abbr\u003E maneuver gets stuck in this\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Ijp9XJy.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022185.54\u0022 height=\u0022449\u0022 width=\u0022242\u0022 src=\u0022https://imgur.com/Ijp9XJy.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nEdit: I deleted events 5-9 to start again. I\u00A0had no problem with event 5, but it hangs up as soon as I add the coast to \u003Cabbr title=\u0022Apoapsis\u0022\u003E\u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E\u003C/abbr\u003E event 6.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-02-25T22:38:46Z\u0022 title=\u002202/25/2021 10:38  PM\u0022 data-short=\u00223 yr\u0022\u003EFebruary 25, 2021\u003C/time\u003E by Tacombel\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-26T00:18:47Z","Content":"\n\u003Cp\u003E\nI decided to give LVD a try, but it is intimidating \u003Cspan\u003E:-)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EI think I understand how to create coast to burn \u002B burn and then,\u00A0 How do I define a coast to periapsis?\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EThx\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-02-26T00:19:11Z\u0022 title=\u002202/26/2021 12:19  AM\u0022 data-short=\u00223 yr\u0022\u003EFebruary 26, 2021\u003C/time\u003E by Tacombel\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-26T00:52:43Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932340\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614298727\u0022 data-ipsquote-userid=\u0022191092\u0022 data-ipsquote-username=\u0022Tacombel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n33 minutes ago, Tacombel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan\u003EI think I understand how to create coast to burn \u002B burn and then,\u00A0 How do I define a coast to periapsis?\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou can change the event termination condition to true anomaly and set it to 0.0 deg.\n\u003C/p\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-26T09:35:21Z","Content":"\n\u003Cp\u003E\nSlow progress, but progress all the same.\n\u003C/p\u003E\n\u003Cp\u003E\nBut it is not doing what I expect. True anomaly at Final State 114\u00BA instead of 0\u00BA\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: What I am getting as final is the end of event 2, why does it not propagate to event 3? This is before optimizing.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/file/d/1SH8VssxHlsM5zRdZQS5KFFkDXfmLpp-j/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003E.mat\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022i10tmST.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022114.36\u0022 height=\u0022629\u0022 width=\u0022550\u0022 src=\u0022https://imgur.com/i10tmST.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nEdit 2: After modifying the event 1 duration to a more reasonable 1000(0,2000) and optimizing I\u00A0get something closer to what I expect, but not exactly, 358.6976\u00BA instead of 0\u00BA\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022GFKi4Gx.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002277.85\u0022 height=\u0022232\u0022 width=\u0022298\u0022 src=\u0022https://imgur.com/GFKi4Gx.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnd I am having the same problem that with MA. If in event 3 I set True Anomaly to 180 it gets stuck working and never finishes processing the script.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022qcr7GnK.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022117.37\u0022 height=\u0022277\u0022 width=\u0022236\u0022 src=\u0022https://imgur.com/qcr7GnK.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-02-26T10:04:57Z\u0022 title=\u002202/26/2021 10:04  AM\u0022 data-short=\u00223 yr\u0022\u003EFebruary 26, 2021\u003C/time\u003E by Tacombel\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-26T14:58:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932520\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614332121\u0022 data-ipsquote-userid=\u0022191092\u0022 data-ipsquote-username=\u0022Tacombel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Tacombel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSlow progress, but progress all the same.\n\u003C/p\u003E\n\u003Cp\u003E\nBut it is not doing what I expect. True anomaly at Final State 114\u00BA instead of 0\u00BA\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: What I am getting as final is the end of event 2, why does it not propagate to event 3? This is before optimizing.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/file/d/1SH8VssxHlsM5zRdZQS5KFFkDXfmLpp-j/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003E.mat\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/i10tmST.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022i10tmST.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u0022114.36\u0022 height=\u0022629\u0022 width=\u0022550\u0022 src=\u0022https://imgur.com/i10tmST.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nEdit 2: After modifying the event 1 duration to a more reasonable 1000(0,2000) and optimizing I\u00A0get something closer to what I expect, but not exactly, 358.6976\u00BA instead of 0\u00BA\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/GFKi4Gx.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022GFKi4Gx.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002277.85\u0022 height=\u0022232\u0022 width=\u0022298\u0022 src=\u0022https://imgur.com/GFKi4Gx.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnd I am having the same problem that with MA. If in event 3 I set True Anomaly to 180 it gets stuck working and never finishes processing the script.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/qcr7GnK.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022qcr7GnK.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u0022117.37\u0022 height=\u0022277\u0022 width=\u0022236\u0022 src=\u0022https://imgur.com/qcr7GnK.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGoing to a true anomaly of zero is actually pretty tricky because of the 360 -\u0026gt; 0 discontinuity there.\u00A0 I would ask yourself if you \u003Cem\u003Ereally, truly\u003C/em\u003E need to propagate to periapsis.\u00A0 What are you trying to accomplish by doing that?\u00A0 Is it something that you can just let fall out of the optimization naturally?\u00A0 Same thing the \u0022leave Kerbin \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u0022 event: do you \u003Cem\u003Ereally\u003C/em\u003E need to propagate to that or can you just coast for some period of time and let the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E transition happen naturally?\n\u003C/p\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-26T15:06:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932610\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614351513\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGoing to a true anomaly of zero is actually pretty tricky because of the 360 -\u0026gt; 0 discontinuity there.\u00A0 I would ask yourself if you \u003Cem\u003Ereally, truly\u003C/em\u003E need to propagate to periapsis.\u00A0 What are you trying to accomplish by doing that?\u00A0 Is it something that you can just let fall out of the optimization naturally?\u00A0 Same thing the \u0022leave Kerbin \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u003C/abbr\u003E\u0022 event: do you \u003Cem\u003Ereally\u003C/em\u003E need to propagate to that or can you just coast for some period of time and let the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u003C/abbr\u003E transition happen naturally?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFor the first, I want a burn there to raise the apoapsis. I could let it to find it, but I was trying to avoid the script looking for the place I already know is optimum.\n\u003C/p\u003E\n\u003Cp\u003E\nThe second was added for the reason I also ask you about the final state. If I don\u0027t add it, the final state showed corresponds to the burn in event 1, not Kerbol \u003Cabbr title=\u0022Periapsis\u0022\u003E\u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E\u003C/abbr\u003E. Later I realized that the only thing I had archived was to move the final state to the end of event 2 so, yes, it is redundant. But I don\u0027t know why it doesn\u0027t propagate to the coast to Kerbol \u003Cabbr title=\u0022Periapsis\u0022\u003E\u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E\u003C/abbr\u003E event end.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u002201CgZnn.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002284.94\u0022 height=\u0022344\u0022 width=\u0022405\u0022 src=\u0022https://imgur.com/01CgZnn.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-02-26T15:09:23Z\u0022 title=\u002202/26/2021 03:09  PM\u0022 data-short=\u00223 yr\u0022\u003EFebruary 26, 2021\u003C/time\u003E by Tacombel\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-26T16:46:49Z","Content":"\n\u003Cp\u003E\nWhatever was happening that caused a crash when setting True anomaly to 180 seems to be solved deleting and reinstalling KSPTOT.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-26T18:23:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932615\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614352006\u0022 data-ipsquote-userid=\u0022191092\u0022 data-ipsquote-username=\u0022Tacombel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Tacombel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor the first, I want a burn there to raise the apoapsis. I could let it to find it, but I was trying to avoid the script looking for the place I already know is optimum.\n\u003C/p\u003E\n\u003Cp\u003E\nThe second was added for the reason I also ask you about the final state. If I don\u0027t add it, the final state showed corresponds to the burn in event 1, not Kerbol \u003Cabbr title=\u0022Periapsis\u0022\u003E\u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E\u003C/abbr\u003E. Later I realized that the only thing I had archived was to move the final state to the end of event 2 so, yes, it is redundant. But I don\u0027t know why it doesn\u0027t propagate to the coast to Kerbol \u003Cabbr title=\u0022Periapsis\u0022\u003E\u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E\u003C/abbr\u003E event end.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/01CgZnn.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u002201CgZnn.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002284.94\u0022 height=\u0022344\u0022 width=\u0022405\u0022 src=\u0022https://imgur.com/01CgZnn.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere\u0027s definitely nothing wrong with letting the code figure out the best place, so long as you get close.\u00A0 You can also always just set a true anomaly constraint at the end of your event and let that handle it if there\u0027s a definite place you want your maneuver.\u00A0 But the optimizers are pretty good, so as long as you get close, they should figure out the best spot on their own without much effort. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EI\u0027d need to see the MAT file for the second thing you mentioned.\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-26T21:46:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932701\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614363833\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u003Cspan\u003E\u0027d need to see the MAT file for the second thing you mentioned.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPerhaps the problem was with the Max. Simulation Time, too small.\n\u003C/p\u003E\n\u003Cp\u003E\nBesides, I was doing it like in MA, placing the constrains in the coast event, but know I think that it works Ok placing them in the same event that the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E action, does this make sense?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso something weird. Event 2 has a true anomaly termination set to 358.5\u00BA and I get what I expect\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/file/d/1Rbk-BkxytxLun4G8KXQbYeE-Q-xWx0eo/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003E.mat\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022g3okA7B.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002271.00\u0022 height=\u0022328\u0022 width=\u0022462\u0022 src=\u0022https://imgur.com/g3okA7B.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nBut, if a change it to 359 it jumps on orbit\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022A2eOD2m.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002284.81\u0022 height=\u0022374\u0022 width=\u0022441\u0022 src=\u0022https://imgur.com/A2eOD2m.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-27T02:38:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932811\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614375984\u0022 data-ipsquote-userid=\u0022191092\u0022 data-ipsquote-username=\u0022Tacombel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Tacombel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPerhaps the problem was with the Max. Simulation Time, too small.\n\u003C/p\u003E\n\u003Cp\u003E\nBesides, I was doing it like in MA, placing the constrains in the coast event, but know I think that it works Ok placing them in the same event that the \u003Cabbr title=\u0022Delta-V\u0022\u003E\u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E\u003C/abbr\u003E action, does this make sense?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso something weird. Event 2 has a true anomaly termination set to 358.5\u00BA and I get what I expect\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/file/d/1Rbk-BkxytxLun4G8KXQbYeE-Q-xWx0eo/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003E.mat\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/g3okA7B.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022g3okA7B.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002271.00\u0022 height=\u0022328\u0022 width=\u0022462\u0022 src=\u0022https://imgur.com/g3okA7B.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nBut, if a change it to 359 it jumps on orbit\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://imgur.com/A2eOD2m.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022A2eOD2m.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002284.81\u0022 height=\u0022374\u0022 width=\u0022441\u0022 src=\u0022https://imgur.com/A2eOD2m.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou\u0027re running into a case where the true anomaly target you want is too close to the discontinuity at 0 degrees and the integrator is getting confused.\u00A0 There\u0027s not much I can do about this except suggest using a smaller maximum integrator step size or smaller integration tolerances.\u00A0 That said:\n\u003C/p\u003E\n\u003Cp\u003E\nI cannot recommend enough avoiding the true anomaly termination condition in particular and most of the non-duration event termination conditions in general.\u00A0 Things can get numerically very unstable with these just as a matter of physics.\u00A0 Time is the only genuinely stable parameter to target orbit propagation with except in a small number of very limited cases.\u00A0 Trust me (and my professional experience) on this one: you will save yourself headaches down the road by only using the Event Duration termination condition in LVD. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"russm","CreatedById":160816,"CreatedDateTime":"2021-02-27T03:33:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932925\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614393510\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n50 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTrust me (and my professional experience) on this one: you will save yourself headaches down the road by only using the Event Duration termination condition in LVD. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo with LVD, rather than setting events as \u0022go until $target_state and minimise $thing\u0022, it\u0027s better to pull the error in state into the objective function and do something like\u00A0\u0022go until $time and minimise $thing \u002B |$state - $target_state|\u0022 and let it figure out what $time works best for that?\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-27T03:36:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932948\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614396826\u0022 data-ipsquote-userid=\u0022160816\u0022 data-ipsquote-username=\u0022russm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, russm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo with LVD, rather than setting events as \u0022go until $target_state and minimise $thing\u0022, it\u0027s better to pull the error in state into the objective function and do something like\u00A0\u0022go until $time and minimise $thing \u002B |$state - $target_state|\u0022 and let it figure out what $time works best for that?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot quite.\u00A0 Use constraints instead and set the bounds to be whatever you want them to be for that quantity.\n\u003C/p\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-27T08:32:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223932925\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614393510\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI cannot recommend enough avoiding the true anomaly termination condition in particular and most of the non-duration event termination conditions in general.\u00A0 Things can get numerically very unstable with these just as a matter of physics.\u00A0 Time is the only genuinely stable parameter to target orbit propagation with except in a small number of very limited cases.\u00A0 Trust me (and my professional experience) on this one: you will save yourself headaches down the road by only using the Event Duration termination condition in LVD. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUnderstood. So the way to go would be to make an estimation of the time it will take to reach \u003Cabbr title=\u0022Periapsis\u0022\u003E\u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E\u003C/abbr\u003E and let the optimizer work?\n\u003C/p\u003E\n\u003Cp\u003E\nBy the way, another one and sorry for being so annoying \u003Cimg alt=\u0022:kiss:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif\u0022 title=\u0022:kiss:\u0022\u003E\u003Cspan\u003E: there is no DeltaV budget in LVD?\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-02-27T08:40:30Z\u0022 title=\u002202/27/2021 08:40  AM\u0022 data-short=\u00223 yr\u0022\u003EFebruary 27, 2021\u003C/time\u003E by Tacombel\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-27T18:43:00Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223933019\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614414767\u0022 data-ipsquote-userid=\u0022191092\u0022 data-ipsquote-username=\u0022Tacombel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, Tacombel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUnderstood. So the way to go would be to make an estimation of the time it will take to reach \u003Cabbr title=\u0022Periapsis\u0022\u003E\u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E\u003C/abbr\u003E and let the optimizer work?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s one way, yes.\u00A0 But I\u0027m going to do you a solid since you really seem to want to have your event terminate at periapsis.\u00A0 I\u0027ve added a Flight Path Angle event termination condition to LVD.\u00A0 You can use this to terminate the event at periapsis MUCH more cleanly than true anomaly.\u00A0 At periapsis, flight path angle is 0 degrees and is increasing.\u00A0 Use these two things in your event and you\u0027ll be all set.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll try to build this today or tomorrow and push out v1.6.8 PR4 with this in it this weekend.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBy the way, another one and sorry for being so annoying \u003Cimg alt=\u0022:kiss:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif\u0022 title=\u0022:kiss:\u0022\u003E\u003Cspan\u003E: there is no DeltaV budget in LVD?\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt doesn\u0027t.\u00A0 It\u0027s a bit more complicated to this in LVD because of all the different engines that can be running at the same time, each with their own Isp and flow rates (not to mention throttle and all the different tanks).\u00A0 I would work with mass directly if you have a vehicle roughly designed or use one of the other Maneuver Planner tools in KSPTOT (such as the Multi-Flyby Maneuver Sequencer or the like) to get delta-v, if it applies.\n\u003C/p\u003E\n\u003Cp\u003E\nAlternatively, you can always spit out tank masses to a CSV file using Graphical Analysis and do your own delta-v calculations in Excel if you\u0027re savvy enough and the vehicle isn\u0027t too complicated. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Tacombel","CreatedById":191092,"CreatedDateTime":"2021-02-27T21:11:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223933217\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614451380\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat\u0027s one way, yes.\u00A0 But I\u0027m going to do you a solid since you really seem to want to have your event terminate at periapsis.\u00A0 I\u0027ve added a Flight Path Angle event termination condition to LVD.\u00A0 You can use this to terminate the event at periapsis MUCH more cleanly than true anomaly.\u00A0 At periapsis, flight path angle is 0 degrees and is increasing.\u00A0 Use these two things in your event and you\u0027ll be all set.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWonderful. I have advanced a lot today, but still miss the simplicity of MA with the coast to \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E event.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223933217\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614451380\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt doesn\u0027t.\u00A0 It\u0027s a bit more complicated to this in LVD because of all the different engines that can be running at the same time, each with their own Isp and flow rates (not to mention throttle and all the different tanks).\u00A0 I would work with mass directly if you have a vehicle roughly designed or use one of the other Maneuver Planner tools in KSPTOT (such as the Multi-Flyby Maneuver Sequencer or the like) to get delta-v, if it applies.\n\u003C/p\u003E\n\u003Cp\u003E\nAlternatively, you can always spit out tank masses to a CSV file using Graphical Analysis and do your own delta-v calculations in Excel if you\u0027re savvy enough and the vehicle isn\u0027t too complicated. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI am just uploading the nodes to KSP and let the trip function of Precise Node do the math, but I don\u0027t understand, what has the ship to do with \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E? I thought it was just adding vectors.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-02-27T22:14:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223933268\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221614460301\u0022 data-ipsquote-userid=\u0022191092\u0022 data-ipsquote-username=\u0022Tacombel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Tacombel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI am just uploading the nodes to KSP and let the trip function of Precise Node do the math, but I don\u0027t understand, what has the ship to do with \u003Cabbr title=\u0022Delta-V\u0022\u003E\u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E\u003C/abbr\u003E? I thought it was just adding vectors.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s not just vectors in LVD the way it normally is in MA.\u00A0 In LVD, almost everything is done with finite burns.\u00A0 This is why there are actions to turn engines on and off, throttle controls, etc.\u00A0 It can get tricky to compute \u003Cabbr title=\u0022Delta-V\u0022\u003EDV\u003C/abbr\u003E for events in LVD because you can\u0027t be sure if every engine running is actually on (what if the tank is out of fuel?), plus you can potentially have a variety of engines running with different flow rates and Isp.\u00A0 It\u0027s not impossible but it\u0027s a lot harder than MA.\u00A0\n\u003C/p\u003E\n"}]}