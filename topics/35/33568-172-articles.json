{"TopicId":33568,"ForumId":35,"TopicTitle":"[WIN/MAC/LINUX] KSP Trajectory Optimization Tool v1.6.9 [New MATLAB Version!]","CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-18T04:59:31Z","PageNum":172,"Articles":[{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2020-12-29T16:44:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223900501\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609210249\u0022 data-ipsquote-userid=\u0022106370\u0022 data-ipsquote-username=\u0022Snoman314\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 hours ago, Snoman314 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFrom what you\u0027re saying, it comes down to just coming up with a direction to point the vessel,\u00A0burning for a set time, and hoping for the best. I\u0027ll just have to put up with any steering and velocity errors and do a later mid-course correction or something like that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, haha, this is not what I\u0027m saying actually!\u00A0 You have all the information you need in either MA or LVD to execute the maneuver precisely in KSP.\u00A0 There doesn\u0027t have to be guesswork about it or \u0022hoping for the best\u0022. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E What I am saying, though, is the \u0022pick a direction to point\u0022 technique isn\u0027t going to work.\u00A0 You need to dynamically steer the vehicle through the burn in order to hit your target.\u00A0 This is why I recommended you rewrite some kOS code: because you\u0027re going to need to do it more precisely than you can get it by hand, and because a single maneuver node type of burn isn\u0027t going to cut it in general.\n\u003C/p\u003E\n\u003Cp\u003E\nBefore you jump back into KSP, pause for a moment and take a look at the data you have available for each burn and come up with a way to translate that into kOS code.\u00A0 That\u0027s my best advice. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe the next thing I need to do is write a feature in LVD that spits out kOS code for people to execute...\u00A0\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOK, I still don\u0027t have the first clue how to use the X/Y/Z mode. Given that step one for, say, a trans-munar injection burn would be to create a manoeuvre node prograde with approx 840m/s, roughly 90 degrees behind the Mun\u0027s current position, and then let the optimiser figure out where to go from there - where do I start if using X/Y/Z? How do I input a burn that\u0027s in the ballpark, so that the optimiser has a place to start?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think the confusion is in what the inertial (\u0022X/Y/Z\u0022) mode is.\u00A0 Do you know what inertial means?\u00A0 If not, stop for a second and go look that up first.\u00A0 The short answer is that it means not accelerating, which can generally mean \u0022not rotating\u0022 for reference frames.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIn the inertial X/Y/Z frame, the origin of the frame is located at Kerbin\u0027s center (for example).\u00A0 The Z direction points up through the north pole.\u00A0 The X direction is in a fixed direction that does not vary.\u00A0 The Y direction completes the right handed system.\n\u003C/p\u003E\n\u003Cp\u003E\nIn the orbit frame, the prograde direction always changes to point along your velocity vector.\u00A0 The radial direction always points from the center of Kerbin (for example) to your spacecraft.\u00A0 And normal always points along the angular momentum vector.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe orbit frame vectors move in time as a function of your orbit and your position in that orbit.\u00A0 The inertial vectors are fixed in every sense of the word.\u00A0 They do not change with time.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is why I can\u0027t give you an answer about the inertial X/Y/Z frame.\u00A0 It depends on your orbit.\u00A0 To get a good guess, though, what you can do is set up the maneuver in the orbit frame and then switch to inertial.\u00A0 I\u0027m pretty sure my code will do the conversion for you (in MA).\u00A0 Just reoptimize from that point.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223900633\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609242657\u0022 data-ipsquote-userid=\u002259814\u0022 data-ipsquote-username=\u0022vitorboschi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, vitorboschi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOut of curiosity, do you know how precise are real life orbital maneuvers today? In terms of \u003Cabbr title=\u0022Delta-V\u0022\u003E\u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E\u003C/abbr\u003E/timing/thrust direction?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt depends on the vehicle.\u00A0 Back in the day when I flew Cygus, we had accelerometers that would hit delta-v down to sub 1 cm/s.\u00A0 The geostationary vehicles I flew were not as precise because they were just point (inertially) and go for a fixed duration.\u00A0 But we still hit SMA targets within 1 km by the end of the mission.\u00A0 It was close enough to clean up with \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E at a convenient time.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2020-12-30T16:40:39Z","Content":"\n\u003Cp\u003E\nA few updates:\n\u003C/p\u003E\n\u003Cp\u003E\nFirst, I did implement a \u0022advance to event\u0022 action in LVD.\u00A0 It was fairly challenging to get right, though, because of the way steering and throttling works in LVD, so it\u0027s pretty experimental for now.\n\u003C/p\u003E\n\u003Cp\u003E\nSecond, I am going to write a kOS program to execute an LVD mission\u0027s steering and throttling.\u00A0 It\u0027ll basically be a fixed template with the ability to read in from file a set of steering and throttling values over time.\u00A0 It doesn\u0027t look that hard, and I\u0027m looking forward to it.\n\u003C/p\u003E\n\u003Cp\u003E\nBoth of these are the final two features I want to incorporate into v1.6.7 before release.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2020-12-31T23:33:03Z","Content":"\n\u003Cp\u003E\nAlright, so here\u0027s a fun one for everyone.\u00A0 I\u0027m currently testing my kOS code above.\u00A0 I have a vessel in KSP which kOS reports as having a mass of 0.3842 mT.\u00A0 The engine on it has a vacuum thrust of 2 kN.\u00A0 Therefore, if you use\n\u003C/p\u003E\n\u003Cp\u003E\naccel = Force / mass\n\u003C/p\u003E\n\u003Cp\u003E\nYou get:\n\u003C/p\u003E\n\u003Cp\u003E\naccel = 2.0 kN / 0.3842 mT = 5.2 m/s^2 (because the 1000 factors cancel).\n\u003C/p\u003E\n\u003Cp\u003E\nYet KSP reports the max acceleration as 4.7 m/s^2.\u00A0 Can someone tell me what I\u0027m missing?\u00A0 What\u0027s wrong with my logic?\n\u003C/p\u003E\n\u003Cp\u003E\nThe reason I\u0027m bringing this up is because I\u0027m testing my kOS code and trying to get it to circularize an orbit from a KSPTOT LVD mission script using its attitude and throttle information.\u00A0 My initial orbit lines up perfectly, my initial and final masses (before and after the first burn)\u00A0are good, but the final velocity after the first burn is too low, which suggests the acceleration is too low.\n\u003C/p\u003E\n\u003Cp\u003E\nClearly something is wrong, but I\u0027m not sure what... any ideas?\n\u003C/p\u003E\n"},{"CreatedByName":"AVaughan","CreatedById":152784,"CreatedDateTime":"2021-01-01T02:18:37Z","Content":"\n\u003Cp\u003E\n1.11 ?\u00A0 Do you see the same thing in earlier versions?\u00A0 Crewed part?\n\u003C/p\u003E\n\u003Cp\u003E\nSounds like it might be\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022133609\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed3155509499\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/198851-111-part-mass-bug/\u0026amp;do=embed\u0022 style=\u0022height:195px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\u003Ca href=\u0022https://wiki.kerbalspaceprogram.com/wiki/1.11\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://wiki.kerbalspaceprogram.com/wiki/1.11\u003C/a\u003E\u00A0mentions a minimum part mass, but my reading of that means it shouldn\u0027t affect \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E/acceleration.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cul style=\u0022background-color:#ffffff;color:#222222;font-size:14px;padding:0px;\u0022\u003E\u003Cli\u003E\nParts now have a minimum Rigidbody mass minimumRBMass which affects how small the rigidbodies mass can be. Does not affect part.mass - which is whats used to calculate force, etc - but does affect rigidbody collisions.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAnother possible cause might be whatever function is returning vessel mass is ignoring crew mass or maybe the mass of eva attachable things in crewpods/containers.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-01T04:12:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223902055\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609467517\u0022 data-ipsquote-userid=\u0022152784\u0022 data-ipsquote-username=\u0022AVaughan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, AVaughan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n1.11 ?\u00A0 Do you see the same thing in earlier versions?\u00A0 Crewed part?\n\u003C/p\u003E\n\u003Cp\u003E\nSounds like it might be\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022133609\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed4846386298\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/198851-111-part-mass-bug/\u0026amp;do=embed\u0022 style=\u0022height:195px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\u003Ca href=\u0022https://wiki.kerbalspaceprogram.com/wiki/1.11\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://wiki.kerbalspaceprogram.com/wiki/1.11\u003C/a\u003E\u00A0mentions a minimum part mass, but my reading of that means it shouldn\u0027t affect \u003Cabbr title=\u0022Delta-V\u0022\u003E\u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E\u003C/abbr\u003E/acceleration.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnother possible cause might be whatever function is returning vessel mass is ignoring crew mass or maybe the mass of eva attachable things in crewpods/containers.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHoly moly, this was it!\u00A0 Thanks for sharing this.\u00A0 I set the\u00A0 \u00A0\u0022partRBMassMin\u0022 parameter in the physics.cfg file to something small and all of a sudden everything works.\u00A0 I was seriously going crazy here for a while...\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-02T21:09:19Z","Content":"\n\u003Cp\u003E\nHi everyone!\n\u003C/p\u003E\n\u003Cp\u003E\nWell, I said I was going to write some kOS code to execute LVD mission files and I\u0027ve done just that.\u00A0 I want to share a very simple example of what\u0027s going on with this new function through a video.\u00A0 Sorry about the lack of sound or any other oddities.\u00A0 I\u0027ve literally never recorded a video before, so if anyone has any tips, please let me know.\n\u003C/p\u003E\n\u003Cp\u003E\nBefore you watch, let me explain what\u0027s going on.\u00A0 In this video, we see a satellite in a circular, equatorial Kerbin orbit with an SMA of 700 km.\u00A0 The goal is to raise the SMA to 750 km using two burns.\u00A0 The mission plan in KSP to do this has already been created and the necessary data from KSP has been output to CSV file.\u00A0 The kOS script will read in the data (which is really just time, attitude, and throttle) and control the vehicle according to those numbers.\u00A0 Burns are executed prograde with a 1 deg/s roll around the long axis.\u00A0 In between burns, the vehicle sits in a sun pointing attitude and spins at 1 deg/s.\u00A0 The kOS script terminates shortly after the second burn.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022374\u0022 src=\u0022https://player.vimeo.com/video/496469095?app_id=122963\u0022 title=\u0022KSPTOT LVD kOS Control Example\u0022 width=\u0022640\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nYou\u0027ll notice we didn\u0027t exactly hit 750 km, but we got real close.\u00A0 Normally in real life, you\u0027d replan you maneuvers after each burn in order to account for issues like this.\u00A0 But I think it\u0027s close enough for KSP, and any discrepancy is really down to the physics model in KSP and the speed of kOS.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, let me know what you think!\u00A0 I\u0027m super excited for this. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//s3.us-west-2.amazonaws.com/kerbal-forum-uploads/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m building KSPTOT v1.6.7 PR12 right now that has this functionality in it.\u00A0 It\u0027ll be up later today if anyone wants to play with it.\u00A0 Instructions on what to do will be in the kOS .ks script file.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-01-02T22:01:08Z\u0022 title=\u002201/02/2021 10:01  PM\u0022 data-short=\u00223 yr\u0022\u003EJanuary 2, 2021\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-02T21:59:38Z","Content":"\n\u003Cp\u003E\nAnd here\u0027s\u003Ca href=\u0022https://drive.google.com/file/d/12S8WqNstUGReQbe2jOIPAK3wnd_FG2eT/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003E KSPTOT v1.6.7 PR12\u003C/a\u003E. \u00A0Btw, I realize I forgot to update the version number in the software, but don\u0027t worry about it for now.\u00A0 It says PR11, but it really is PR12.\u00A0 It\u0027ll be correct in the future.\u00A0 Here\u0027s the change log:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nLVD: Initial throttle and steering dialog boxes now grey out the continuity checkbox, since it\u0027s not used in those situations.\n\u003C/li\u003E\n\u003Cli\u003E\nUpdated the wait time for RTS data to be the same as TCPIP timeout, and updated that timeout to be 10 seconds. This accomodates larger bodies.ini files.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Added a time offset parameter to any PolynomialModel or LinearTangentModel steering or throttle models.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Added an \u0022advance to event\u0022 option in the script listbox right click menu.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Added kOS script that can execute LVD steering and throttle, and implemented initial ability to dump data to file for kOS.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nLVD:\u00A0 Fixed bug with event set steering action not setting the steering model correctly.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Fixed some bugs with steering rotation math.\u00A0 \u003Cstrong\u003ECompatibility alert!\u00A0 \u003C/strong\u003E\u003Cstrong\u003EYour steering may be different going forward if you inadvertently relied on the bugged code.\u003C/strong\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nTo use the kOS script, you need to place the Ship folder in your root KSP directory and have kOS installed.\u00A0 Doing so will create the Script directory and place the execLvdControl.ks script there.\u00A0 Follow the instructions at the header of the kOS script file to learn how to use it.\n\u003C/p\u003E\n\u003Cp\u003E\nPlease let me know if you find any bugs.\u00A0 I\u0027m considering this the first 1.6.7 release candidate, so we\u0027re getting close!\u00A0 Thanks!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-01-02T22:01:16Z\u0022 title=\u002201/02/2021 10:01  PM\u0022 data-short=\u00223 yr\u0022\u003EJanuary 2, 2021\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-03T03:06:05Z","Content":"\n\u003Cp\u003E\nI\u0027ve got a new video showing an upgrade to the kOS script included with PR12.\u00A0 (These updates will be in the final release but are not in the PR.)\u00A0 There\u0027s more information regarding the current and next event, including event names and a countdown to the next event.\u00A0 I also have a resource display in for now, but that might be removed as it\u0027s a bit redundant with the existing KSP UI.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, this is the same mission as before, except I added a 5 degree inclination target to the final orbit.\u00A0 Please tell me what you think, feedback is welcome!\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022374\u0022 src=\u0022https://player.vimeo.com/video/496519742?app_id=122963\u0022 title=\u0022KSPTOT LVD kOS Control Example #2\u0022 width=\u0022640\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2021-01-03T08:30:46Z","Content":"\n\u003Cp\u003E\nwill try to take a closer look this week but cool stuff and I can def attempt to apply it to my next orbital mission launching in Feb\n\u003C/p\u003E\n"},{"CreatedByName":"vitorboschi","CreatedById":59814,"CreatedDateTime":"2021-01-03T17:36:42Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E hey, thank you for the update! I have tried to reproduce the problem on the Multiflyby porkchop\u00A0 plotter and it\u0027s still consuming a ton of memory here. Unfortunately I couldn\u0027t test it on a Windows machine yet.\n\u003C/p\u003E\n\u003Cp\u003E\nAnother one which I\u0027m not sure is a bug or user problem: I tried to model a direct launch to impact mission to Mun, in order to test the new KOS script, but I couldn\u0027t model the mission. For some reason, event 2 is never completed (reach 0.6km altitude). I tried to enable \u0022Show S/C Body Axes\u0022 on the view settings to help me understand what is wrong, but I\u0027ve got this error on the log:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nError using makehgtform (line 80)\nArguments to translate must be finite\n\nError in LaunchVehicleViewProfileBodyAxesData/plotBodyAxesAtTime (line 108)\n\n\nError in timeSliderStateChanged (line 22)\n\n\nError in LaunchVehicleViewProfile\u0026gt;@(src,evt)timeSliderStateChanged(src,evt,lvdData,handles) (line 427)\n\n\nError in LaunchVehicleViewProfile/configureTimeSlider (line 430)\n\n\nError in Generic3DTrajectoryViewType/plotStateLog (line 335)\n\n\nError in LaunchVehicleViewProfile/plotTrajectory (line 99)\n\n\nError in LaunchVehicleViewSettings/plotTrajectoryWithActiveViewProfile (line 25)\n\n\nError in lvd_processData (line 14)\n\n\nError in ma_LvdMainGUI\u0026gt;editViewSettingsMenu_Callback (line 2002)\n\n\nError in gui_mainfcn (line 95)\n\n\nError in ma_LvdMainGUI (line 42)\n\n\nError in matlab.graphics.internal.figfile.FigFile/read\u0026gt;@(hObject,eventdata)ma_LvdMainGUI(\u0027editViewSettingsMenu_Callback\u0027,hObject,eventdata,guidata(hObject))\n\nError using waitforallfiguresclosed (line 9)\nError while evaluating Menu Callback.\n\n\u003C/pre\u003E\n\u003Cp\u003E\nCare to take a look? Here is the .mat: \u003Ca href=\u0022https://www.dropbox.com/s/5aaniunzgdel6s6/Mun%20impact%20mission.mat?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/5aaniunzgdel6s6/Mun impact mission.mat?dl=0\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-03T21:16:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903105\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609695402\u0022 data-ipsquote-userid=\u002259814\u0022 data-ipsquote-username=\u0022vitorboschi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, vitorboschi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E hey, thank you for the update! I have tried to reproduce the problem on the Multiflyby porkchop\u00A0 plotter and it\u0027s still consuming a ton of memory here. Unfortunately I couldn\u0027t test it on a Windows machine yet.\n\u003C/p\u003E\n\u003Cp\u003E\nAnother one which I\u0027m not sure is a bug or user problem: I tried to model a direct launch to impact mission to Mun, in order to test the new KOS script, but I couldn\u0027t model the mission. For some reason, event 2 is never completed (reach 0.6km altitude). I tried to enable \u0022Show S/C Body Axes\u0022 on the view settings to help me understand what is wrong, but I\u0027ve got this error on the log:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\nError using makehgtform (line 80)\nArguments to translate must be finite\n\nError in LaunchVehicleViewProfileBodyAxesData/plotBodyAxesAtTime (line 108)\n\n\nError in timeSliderStateChanged (line 22)\n\n\nError in LaunchVehicleViewProfile\u0026gt;@(src,evt)timeSliderStateChanged(src,evt,lvdData,handles) (line 427)\n\n\nError in LaunchVehicleViewProfile/configureTimeSlider (line 430)\n\n\nError in Generic3DTrajectoryViewType/plotStateLog (line 335)\n\n\nError in LaunchVehicleViewProfile/plotTrajectory (line 99)\n\n\nError in LaunchVehicleViewSettings/plotTrajectoryWithActiveViewProfile (line 25)\n\n\nError in lvd_processData (line 14)\n\n\nError in ma_LvdMainGUI\u0026gt;editViewSettingsMenu_Callback (line 2002)\n\n\nError in gui_mainfcn (line 95)\n\n\nError in ma_LvdMainGUI (line 42)\n\n\nError in matlab.graphics.internal.figfile.FigFile/read\u0026gt;@(hObject,eventdata)ma_LvdMainGUI(\u0027editViewSettingsMenu_Callback\u0027,hObject,eventdata,guidata(hObject))\n\nError using waitforallfiguresclosed (line 9)\nError while evaluating Menu Callback.\n\n\u003C/pre\u003E\n\u003Cp\u003E\nCare to take a look? Here is the .mat: \u003Ca href=\u0022https://www.dropbox.com/s/5aaniunzgdel6s6/Mun%20impact%20mission.mat?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/5aaniunzgdel6s6/Mun impact mission.mat?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYour issue is that your initial state\u0027s reference frame is set to Body Centered Inertial.\u00A0 You need to be using the Body Fixed frame, which rotates with the surface of the planet.\u00A0 Your NaN and Inf errors are because your initial velocity is 0.0 m/s inertially, which just causes issues all over the place.\n\u003C/p\u003E\n"},{"CreatedByName":"vitorboschi","CreatedById":59814,"CreatedDateTime":"2021-01-03T22:29:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903217\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609708586\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYour issue is that your initial state\u0027s reference frame is set to Body Centered Inertial.\u00A0 You need to be using the Body Fixed frame, which rotates with the surface of the planet.\u00A0 Your NaN and Inf errors are because your initial velocity is 0.0 m/s inertially, which just causes issues all over the place.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you! I feel a bit dumb now \u0026gt;\u0026lt;\n\u003C/p\u003E\n\u003Cp\u003E\nAnother bug: there seems to be another issue with events/variables being optimized when they shouldn\u0027t be. This time it happened with events that still exists, but with optimization toggled off (ctrl\u002BF). As the previous one, it fixes itself when the .mat is reloaded from disk.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-03T22:43:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903249\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609712962\u0022 data-ipsquote-userid=\u002259814\u0022 data-ipsquote-username=\u0022vitorboschi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, vitorboschi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThank you! I feel a bit dumb now \u0026gt;\u0026lt;\n\u003C/p\u003E\n\u003Cp\u003E\nAnother bug: there seems to be another issue with events/variables being optimized when they shouldn\u0027t be. This time it happened with events that still exists, but with optimization toggled off (ctrl\u002BF). As the previous one, it fixes itself when the .mat is reloaded from disk.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCan you give me an example file where this shows up?\n\u003C/p\u003E\n"},{"CreatedByName":"vitorboschi","CreatedById":59814,"CreatedDateTime":"2021-01-03T23:09:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903256\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609713795\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan you give me an example file where this shows up?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI didn\u0027t bothered to keep it because the problem is gone when you load the file again,so I don\u0027t have it anymore, unfortunately.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll keep a sample next time it happen.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-03T23:54:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903268\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609715358\u0022 data-ipsquote-userid=\u002259814\u0022 data-ipsquote-username=\u0022vitorboschi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, vitorboschi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI didn\u0027t bothered to keep it because the problem is gone when you load the file again,so I don\u0027t have it anymore, unfortunately.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll keep a sample next time it happen.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo worries, I\u0027ve added some additional checking/removing to hopefully ensure it doesn\u0027t happen in the future.\u00A0 Thanks for the report!\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-04T04:33:27Z","Content":"\n\u003Cp\u003E\nI\u0027ve been showing some videos of in-space maneuvers using the new LVD/kOS system recently.\u00A0 I have been wondering, though about how it would perform during launch.\u00A0 I put together a test launch from the surface of the Mun and handed the steering and throttle to kOS to run.\u00A0 Here\u0027s the results!\u00A0 It did pretty well.\u00A0 The target 150 km SMA is not quite reached, but I pin this on steering error and a bit of a hiccup at the start with the landing legs.\u00A0 Also notice that the steering is set up to intentionally keep the solar panels in the sun during the ascent.\u00A0 This is to keep the vehicle from running out of electric charge, which may or may not have happened in an earlier test...\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022374\u0022 src=\u0022https://player.vimeo.com/video/496754795?app_id=122963\u0022 title=\u0022KSPTOT LVD kOS Control Example 3 - Lunar Liftoff\u0022 width=\u0022640\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nLet me know what you think! \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//s3.us-west-2.amazonaws.com/kerbal-forum-uploads/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-01-04T04:36:54Z\u0022 title=\u002201/04/2021 04:36  AM\u0022 data-short=\u00223 yr\u0022\u003EJanuary 4, 2021\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"vitorboschi","CreatedById":59814,"CreatedDateTime":"2021-01-04T11:04:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903382\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609734807\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLet me know what you think! \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//s3.us-west-2.amazonaws.com/kerbal-forum-uploads/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAwesome! I\u0027m planning an atmospheric launch and will report back when I have the results.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNow, time for bug reports:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Trying to add a Two-Body Impact Latitude constraint will add a Two-Body Impact Longitude instead.\n\u003C/p\u003E\n\u003Cp\u003E\n2. After adding the above constraint, I get this error when the script is propagated:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nOperands to the || and \u0026amp;\u0026amp; operators must be convertible to logical scalar values.\n\nError in findSoITransitions (line 112)\n\n\nError in ma_executeCoast_goto_tru (line 67)\n\n\nError in lvd_TwoBodyImpactPointTasks (line 34)\n\n\nError in TwoBodyImpactPointLongitude/evalConstraint (line 31)\n\n\nError in ConstraintSet/evalConstraints (line 107)\n\n\nError in LaunchVehicleScript/executeScript (line 329)\n\n\nError in ma_LvdMainGUI\u0026gt;propagateScript (line 260)\n\n\nError in ma_LvdMainGUI\u0026gt;runScript (line 235)\n\n\nError in ma_LvdMainGUI\u0026gt;editConstraintsMenu_Callback (line 661)\n\n\nError in gui_mainfcn (line 95)\n\n\nError in ma_LvdMainGUI (line 42)\n\n\nError in matlab.graphics.internal.figfile.FigFile/read\u0026gt;@(hObject,eventdata)ma_LvdMainGUI(\u0027editConstraintsMenu_Callback\u0027,hObject,eventdata,guidata(hObject))\n\nError using waitforallfiguresclosed (line 9)\nError while evaluating Menu Callback.\n\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n2. My current mission seems to hit the Mun directly, but LVD still thinks the mission ends at Kerbin. Here\u0027s the .mat: \u003Ca href=\u0022https://www.dropbox.com/s/hw3keljbm67yqqr/Mun%20impact%20mission2.mat?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/hw3keljbm67yqqr/Mun impact mission2.mat?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-01-04T11:05:05Z\u0022 title=\u002201/04/2021 11:05  AM\u0022 data-short=\u00223 yr\u0022\u003EJanuary 4, 2021\u003C/time\u003E by vitorboschi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-04T15:21:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903439\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609758275\u0022 data-ipsquote-userid=\u002259814\u0022 data-ipsquote-username=\u0022vitorboschi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, vitorboschi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAwesome! I\u0027m planning an atmospheric launch and will report back when I have the results.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNow, time for bug reports:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Trying to add a Two-Body Impact Latitude constraint will add a Two-Body Impact Longitude instead.\n\u003C/p\u003E\n\u003Cp\u003E\n2. After adding the above constraint, I get this error when the script is propagated:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\n\n\nOperands to the || and \u0026amp;\u0026amp; operators must be convertible to logical scalar values.\n\nError in findSoITransitions (line 112)\n\n\nError in ma_executeCoast_goto_tru (line 67)\n\n\nError in lvd_TwoBodyImpactPointTasks (line 34)\n\n\nError in TwoBodyImpactPointLongitude/evalConstraint (line 31)\n\n\nError in ConstraintSet/evalConstraints (line 107)\n\n\nError in LaunchVehicleScript/executeScript (line 329)\n\n\nError in ma_LvdMainGUI\u0026gt;propagateScript (line 260)\n\n\nError in ma_LvdMainGUI\u0026gt;runScript (line 235)\n\n\nError in ma_LvdMainGUI\u0026gt;editConstraintsMenu_Callback (line 661)\n\n\nError in gui_mainfcn (line 95)\n\n\nError in ma_LvdMainGUI (line 42)\n\n\nError in matlab.graphics.internal.figfile.FigFile/read\u0026gt;@(hObject,eventdata)ma_LvdMainGUI(\u0027editConstraintsMenu_Callback\u0027,hObject,eventdata,guidata(hObject))\n\nError using waitforallfiguresclosed (line 9)\nError while evaluating Menu Callback.\n\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n2. My current mission seems to hit the Mun directly, but LVD still thinks the mission ends at Kerbin. Here\u0027s the .mat: \u003Ca href=\u0022https://www.dropbox.com/s/hw3keljbm67yqqr/Mun%20impact%20mission2.mat?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/hw3keljbm67yqqr/Mun impact mission2.mat?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the report!\u00A0 All issues resolved for next release.\u00A0 I\u0027ll aim to put out a PR today.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-01-04T15:25:30Z\u0022 title=\u002201/04/2021 03:25  PM\u0022 data-short=\u00223 yr\u0022\u003EJanuary 4, 2021\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-04T21:52:59Z","Content":"\n\u003Cp\u003E\nHi everyone,\n\u003C/p\u003E\n\u003Cp\u003E\nThis afternoon I\u0027ve built \u003Ca href=\u0022https://drive.google.com/file/d/12SVSVd4tZMdZEZFk6U1EoeXiXbAywgCz/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003EKSPTOT v1.6.7 pre-release 13\u003C/a\u003E.\u00A0 This is basically a bug fix release.\u00A0 Here\u0027s the change log:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nLVD: kOS script now shows current and next event, as well as time to next event.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cspan\u003ELVD: \u003C/span\u003EFixed bug where attitudes would not display in backwards prop segments.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Added option to FMINCON otimizer to automatically find optimal step size.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD Removing an event now removes the variables associated with that event\u0027s termination condition and actions.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Resolved issue with typo in 2BImpactPointLat name.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Resolved issue with empty globals in 2BodyImpactPt calls to findSoITransitions.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Fixed issue with finding down \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E transitions not working if eccentricity \u0026gt;= 1.\n\u003C/li\u003E\n\u003Cli\u003E\nMA/LVD: Fixed bug with chunked state log generation skipping last state log entry if there\u0027s only one event in \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nPlease let me know if you find any more bugs!\u00A0 Hopefully the full v1.6.7 release can get out by this weekend, if not sooner.\u00A0 Thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2021-01-04T22:58:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903684\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609797179\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLVD: Added option to FMINCON otimizer to automatically find optimal step size.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nis this enabled by default?\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-04T22:59:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903720\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609801087\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nis this enabled by default?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt is not, because it requires some (possibly considerable) CPU usage up front.\u00A0 You can enable it in the FMINCON options, though.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2021-01-04T23:00:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903721\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609801141\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt is not, because it requires some (possibly considerable) CPU usage up front.\u00A0 You can enable it in the FMINCON options, though.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nok that\u0027s fine, just wanted to know if it was something I needed to keep in mind possibly using\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-04T23:01:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903724\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609801223\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nok that\u0027s fine, just wanted to know if it was something I needed to keep in mind possibly using\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt is worth using, I think.\u00A0 I\u0027ve gotten pretty good results with it on my example missions thus far. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//s3.us-west-2.amazonaws.com/kerbal-forum-uploads/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"vitorboschi","CreatedById":59814,"CreatedDateTime":"2021-01-04T23:34:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903684\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609797179\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi everyone,\n\u003C/p\u003E\n\u003Cp\u003E\nThis afternoon I\u0027ve built \u003Ca href=\u0022https://drive.google.com/file/d/12SVSVd4tZMdZEZFk6U1EoeXiXbAywgCz/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003EKSPTOT v1.6.7 pre-release 13\u003C/a\u003E.\u00A0 This is basically a bug fix release.\u00A0 Here\u0027s the change log:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nLVD: kOS script now shows current and next event, as well as time to next event.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cspan\u003ELVD: \u003C/span\u003EFixed bug where attitudes would not display in backwards prop segments.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Added option to FMINCON otimizer to automatically find optimal step size.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD Removing an event now removes the variables associated with that event\u0027s termination condition and actions.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Resolved issue with typo in 2BImpactPointLat name.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Resolved issue with empty globals in 2BodyImpactPt calls to findSoITransitions.\n\u003C/li\u003E\n\u003Cli\u003E\nLVD: Fixed issue with finding down \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E transitions not working if eccentricity \u0026gt;= 1.\n\u003C/li\u003E\n\u003Cli\u003E\nMA/LVD: Fixed bug with chunked state log generation skipping last state log entry if there\u0027s only one event in \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nPlease let me know if you find any more bugs!\u00A0 Hopefully the full v1.6.7 release can get out by this weekend, if not sooner.\u00A0 Thanks!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFound another one while optimizing this mission: \u003Ca href=\u0022https://www.dropbox.com/s/59fp4n0j85tohik/Mun%20impact%20mission3.mat?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/59fp4n0j85tohik/Mun impact mission3.mat?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nError using optimfcnchk/checkfun (line 242)\nSupplied function \u0027@(x)lvdOpt.constraints.evalConstraints(x,true,evtToStartScriptExecAt,true,[])\u0027 returned NaN when evaluated;\n FMINCON cannot continue.\n\nError in fmincon (line 623)\n\n\nError in lvd_executeOptimProblem (line 26)\n\n\nError in FminconOptimizer/optimize (line 78)\n\n\nError in LvdOptimization/optimize (line 53)\n\n\nError in ma_LvdMainGUI\u0026gt;optimizeMissionMenu_Callback (line 601)\n\n\nError in gui_mainfcn (line 95)\n\n\nError in ma_LvdMainGUI (line 42)\n\n\nError in matlab.graphics.internal.figfile.FigFile/read\u0026gt;@(hObject,eventdata)ma_LvdMainGUI(\u0027optimizeMissionMenu_Callback\u0027,hObject,eventdata,guidata(hObject))\n\n\nCaused by:\n    Failure in initial nonlinear constraint function evaluation. FMINCON cannot continue.\n\nError using waitforallfiguresclosed (line 9)\nError while evaluating Menu Callback.\n\u003C/pre\u003E\n\u003Cp\u003E\nI guess it\u0027s related to 2BImpactPoint{Lat,Long} constraints. Btw, am I using then correctly? I\u0027ve put the lat/long where I want the impact to happen in there. Since there\u0027s no thrust/atmosphere on the event it happens, I\u0027ve assumed the Two-body constraints are the correct ones\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2021-01-04T23:57:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223903750\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221609803253\u0022 data-ipsquote-userid=\u002259814\u0022 data-ipsquote-username=\u0022vitorboschi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 minutes ago, vitorboschi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFound another one while optimizing this mission: \u003Ca href=\u0022https://www.dropbox.com/s/59fp4n0j85tohik/Mun%20impact%20mission3.mat?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/59fp4n0j85tohik/Mun impact mission3.mat?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\nError using optimfcnchk/checkfun (line 242)\nSupplied function \u0027@(x)lvdOpt.constraints.evalConstraints(x,true,evtToStartScriptExecAt,true,[])\u0027 returned NaN when evaluated;\n FMINCON cannot continue.\n\nError in fmincon (line 623)\n\n\nError in lvd_executeOptimProblem (line 26)\n\n\nError in FminconOptimizer/optimize (line 78)\n\n\nError in LvdOptimization/optimize (line 53)\n\n\nError in ma_LvdMainGUI\u0026gt;optimizeMissionMenu_Callback (line 601)\n\n\nError in gui_mainfcn (line 95)\n\n\nError in ma_LvdMainGUI (line 42)\n\n\nError in matlab.graphics.internal.figfile.FigFile/read\u0026gt;@(hObject,eventdata)ma_LvdMainGUI(\u0027optimizeMissionMenu_Callback\u0027,hObject,eventdata,guidata(hObject))\n\n\nCaused by:\n    Failure in initial nonlinear constraint function evaluation. FMINCON cannot continue.\n\nError using waitforallfiguresclosed (line 9)\nError while evaluating Menu Callback.\n\u003C/pre\u003E\n\u003Cp\u003E\nI guess it\u0027s related to 2BImpactPoint{Lat,Long} constraints. Btw, am I using then correctly? I\u0027ve put the lat/long where I want the impact to happen in there. Since there\u0027s no thrust/atmosphere on the event it happens, I\u0027ve assumed the Two-body constraints are the correct ones\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, I see the issue now.\u00A0 You\u0027re not hitting the body so the constraint sort of freaks out since there is no impact.\u00A0 I would recommend just propagating to the impact point directly in LVD and setting your latitude, longitude, and altitude constraints for that point as desired.\n\u003C/p\u003E\n"}]}