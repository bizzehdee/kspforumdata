{"TopicId":92457,"ForumId":35,"TopicTitle":"[BASH]Savefiles autosaver","CreatedByName":"Cakeofruit","CreatedById":73238,"CreatedDateTime":"2014-12-10T13:13:53Z","PageNum":1,"Articles":[{"CreatedByName":"Cakeofruit","CreatedById":73238,"CreatedDateTime":"2014-12-10T13:13:53Z","Content":"\n\u003Cp\u003EHello mac kerbaunauts !\u003C/p\u003E\u003Cp\u003EThis is a bash script that i\u0027m working on.\u003Cstrong\u003E(still a WIP don\u0027t use if you don\u0027t know bash)\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThis is made to autosave your save files in kerbal and allow you to grab a old persistent.sfs that isn\u0027t corrupt by a craft randomly explode ( true story \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E)\u003C/p\u003E\u003Cp\u003EMake a new .command of .sh and make it excutable than that the code and paste it. \u003C/p\u003E\u003Cp\u003EThen put this file in the save you want to save\u003C/p\u003E\u003Cp\u003EThis should works on linux but i\u0027m not sure.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E#!/bin/bash\u003C/p\u003E\u003Cp\u003E#INIT\u003C/p\u003E\u003Cp\u003E#*******************************************************************************************************************************************\u003C/p\u003E\u003Cp\u003Eclear\u003C/p\u003E\u003Cp\u003EAdress=$0\u003C/p\u003E\u003Cp\u003Edir=${Adress%/*}\u003C/p\u003E\u003Cp\u003Edirdir=${dir%/*}\u003C/p\u003E\u003Cp\u003Edirdirdir=${dirdir%/*}\u003C/p\u003E\u003Cp\u003EAdresslength=${#Adress}\u003C/p\u003E\u003Cp\u003E#source auto and folder name\u003C/p\u003E\u003Cp\u003ENametosave=\u0022Back_Up\u0022\u003C/p\u003E\u003Cp\u003Ecd ${dirdirdir// /?}\u003C/p\u003E\u003Cp\u003Emkdir $Nametosave\u003C/p\u003E\u003Cp\u003ESource_auto=${dir// /\\?}\u003C/p\u003E\u003Cp\u003EDest_auto=${dirdirdir// /?}/$Nametosave\u003C/p\u003E\u003Cp\u003E#VARIABLES \u0026amp; CONFIGURATION\u003C/p\u003E\u003Cp\u003E#*******************************************************************************************************************************************\u003C/p\u003E\u003Cp\u003Ecible=$Source_auto\u003C/p\u003E\u003Cp\u003Eciblelog=$Dest_auto\u003C/p\u003E\u003Cp\u003EDest=$Dest_auto\u003C/p\u003E\u003Cp\u003Einterval=5\u003C/p\u003E\u003Cp\u003E#nbbackup=20 Not use for now\u003C/p\u003E\u003Cp\u003E#BigBackup=10 Not use for now\u003C/p\u003E\u003Cp\u003E#END OF VARIABLES \u0026amp; CONFIGURATION, DON\u0027T CHANGE AFTER THIS WARNING\u003C/p\u003E\u003Cp\u003E#*******************************************************************************************************************************************\u003C/p\u003E\u003Cp\u003E#Files log\u003C/p\u003E\u003Cp\u003Ecd $ciblelog\u003C/p\u003E\u003Cp\u003Etouch rsync.log\u003C/p\u003E\u003Cp\u003Ebackup_log=$ciblelog/rsync.log\u003C/p\u003E\u003Cp\u003E## need to create a intermadiate folder that contain the small update\u003C/p\u003E\u003Cp\u003Ewhile true ;do rsync -ravb --backup-dir=\u0060date \u002B%H:%M\u0060 $cible $Dest \u0026gt;\u0026gt; $backup_log;sleep $interval;done \u0026amp;\u003C/p\u003E\u003Cp\u003Esleep 3600\u003C/p\u003E\u003Cp\u003Ekill $!; trap \u0027kill $!\u0027 SIGTERM\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m open to any improvement you could thinks of. \u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003E\u003Cstrong\u003ETo do list: \u003C/strong\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Echange the dest that it doesn\u0027t mess up the ksp files ( by creating invalid saves) \u003C/p\u003E\u003Cp\u003EMake a others script to make a profile ( change the souce, Dest, and the interval) maybe in applescript or bash if my script works on ubuntu \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003Esecondary :\u003C/span\u003E built a xcode interface\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-12-10T22:04:43Z","Content":"\n\u003Cp\u003EThis (neat!) tool/application should be in the eponymous subforum. And so it is! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"hab136","CreatedById":75997,"CreatedDateTime":"2014-12-11T11:25:46Z","Content":"\n\u003Cp\u003ENeat. Instead of sleeping for an hour, you might want to launch KSP and wait till it closes, then kill the rsync. \u0022open -W KSP.app\u0022 will launch KSP and wait for it to finish. If you use Steam, the Steam app runs and then exits, so you have you just check if KSP is running via \u0022ps\u0022.\u003C/p\u003E\u003Cp\u003EI\u0027m also pretty sure the \u0022trap\u0022 needs to be set up before you start waiting.\u003C/p\u003E\u003Cp\u003ESo, putting this together (and adding support for Linux KSP):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhile true ;do rsync -ravb --backup-dir=\u0060date \u002B%H:%M\u0060 $cible $Dest \u0026gt;\u0026gt; $backup_log;sleep $interval;done \u0026amp;\u003Cbr\u003E\u003Cbr\u003ERSYNCPID=$!\u003Cbr\u003Etrap \u0027kill $RSYNCPID\u0027 SIGTERM\u003Cbr\u003E\u003Cbr\u003Eif [ -d \u0022/Applications/KSP.app\u0022 ]; then\u003Cbr\u003E        # Run the Steam launcher for KSP\u003Cbr\u003E\topen \u0022/Applications/KSP steam.app\u0022\u003Cbr\u003E        # Wait for the real KSP app to start\u003Cbr\u003E\tsleep 60\u003Cbr\u003E        # Wait for KSP to quit\u003Cbr\u003E\twhile ( ps xa |grep [K]SP.app ); do\u003Cbr\u003E\t\tsleep 60;\u003Cbr\u003E\tdone\u003Cbr\u003Eelif [ -d /Applications/Kerbal Space Program/KSP.app ]; then\u003Cbr\u003E        # Run the non-Steam version of KSP\u003Cbr\u003E\topen -W /Applications/Kerbal Space Program/KSP.app\u003Cbr\u003Eelif which -s KSP.x86_64; then\u003Cbr\u003E\tKSP.x86_64\u003Cbr\u003Eelif which -s KSP.x86; then\u003Cbr\u003E\tKSP.x86\u003Cbr\u003Eelse\u003Cbr\u003E\techo \u0022Can\u0027t find KSP!\u0022\u003Cbr\u003E\texit 1\u003Cbr\u003Efi\u003Cbr\u003E\u003Cbr\u003Ekill $RSYNCPID\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ll also point out that there\u0027s also other ways to accomplish the same thing:\u003C/p\u003E\u003Cp\u003E1. I put my entire \u0022saves\u0022 directory in Google Drive and make a symlink from my KSP directory. It \u003Ca href=\u0022https://support.google.com/drive/answer/2409045?hl=en\u0022 rel=\u0022external nofollow\u0022\u003Eauto-saves revisions\u003C/a\u003E, and backs up at the same time. \u003Ca href=\u0022https://www.dropbox.com/en/help/11\u0022 rel=\u0022external nofollow\u0022\u003EDropbox does the same thing\u003C/a\u003E. Mac and Linux can make a symlink with \u0022ln -s\u0022; on Windows it\u0027s \u0022mklink /d\u0022. Then whenever the game auto-saves, a new revision is made. Same thing when you save a new quicksave (although now we have alt\u002Bf5 and alt\u002Bf9 for named quicksaves).\u003C/p\u003E\u003Cp\u003E2. Windows has \u003Ca href=\u0022http://windows.microsoft.com/en-us/windows/previous-versions-files-faq#1TC=windows-7\u0022 rel=\u0022external nofollow\u0022\u003E\u0022previous versions\u0022\u003C/a\u003E and OS X has \u003Ca href=\u0022https://www.apple.com/support/timemachine/\u0022 rel=\u0022external nofollow\u0022\u003ETime Machine\u003C/a\u003E, though Time Machine doesn\u0027t run that often and might miss things.\u003C/p\u003E\n"},{"CreatedByName":"Cakeofruit","CreatedById":73238,"CreatedDateTime":"2014-12-11T18:36:35Z","Content":"\n\u003Cp\u003EI know that dropbox and a simlink is a good alternative but i wanted a script that i can tweak and that i\u0027 m mastering. \u003C/p\u003E\u003Cp\u003EI want to use this on my work and project so dropbox is out of the league \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ETime machine lost 3 h of careful flights to set up my RT networks.\u003C/p\u003E\u003Cp\u003Enice piece of code to check if a app is launch i will try it ( see if it fit well in the script) .\u003C/p\u003E\u003Cp\u003Ei\u0027m also trying to make a xcode interface but i really struggle ;(\u003C/p\u003E\u003Cp\u003Eps : thx NathanKell to move this thread in the good location and for your awesome mods \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"}]}