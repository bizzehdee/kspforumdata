{"TopicId":33568,"ForumId":35,"TopicTitle":"[WIN/MAC/LINUX] KSP Trajectory Optimization Tool v1.6.9 [New MATLAB Version!]","CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-18T04:59:31Z","PageNum":97,"Articles":[{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2017-05-11T21:31:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223053700\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494537956\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan you check to make sure the mission file you gave me for the first problem is correct?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\ndbl-checked and it\u0027s def there @ 22010220.76124 UT - I closed down KSPTOT, downloaded the file I uploaded, restarted KSPTOT, loaded the file in MA, selected Graphical Analysis with Altitude and when you zoom in to the Periapsis you\u0027ll see the jump\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-11T21:34:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223053706\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494538297\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ndbl-checked and it\u0027s def there @ 22010220.76124 UT - I closed down KSPTOT, downloaded the file I uploaded, restarted KSPTOT, loaded the file in MA, selected Graphical Analysis with Altitude and when you zoom in to the Periapsis you\u0027ll see the jump\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSee the edit to my post for what\u0027s going on. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2017-05-11T21:40:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223053710\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494538457\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSee the edit to my post for what\u0027s going on. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nah, gotcha. I figured it was something like that just didn\u0027t know you could adjust the resolution. Cool! That did fix it. I didn\u0027t see your edit thx to my reply jumping to a new page \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-12T22:01:18Z","Content":"\n\u003Cp\u003E\nYet another \u0022I\u0027ll just leave this here\u0022 post. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022gvdmX91.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/gvdmX91.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-14T03:42:07Z","Content":"\n\u003Cp\u003E\nI have another neat feature that I was able to squeak into KSPTOT Mission Architect today and I would like to discuss tonight.\u00A0 This new feature is called \u0022Coast to Function Value\u0022 and it allows you to do some crazy things.\u00A0 In essence, it allows you to determine when a particular function (we\u0027ll get to this) has a particular value and then coast to that time.\u00A0 The functions that are available is basically anything that is available in Graphical Analysis.\u00A0 In fact, a part of the work I did today was to set up for merging all the data providers in Mission Architect so that I can reference them outside of just Graphical Analysis.\u00A0 More on that in a future post. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIn the example below, I wanted to coast my spacecraft to the relative node between my spacecraft and this other spacecraft.\u00A0 You can do this by coasting to where the relative crosstrack position between the two spacecraft is 0.0 km.\u00A0 To do this, we create a new Coast event.\u00A0 Notice on the left box, in the Coast to Function Value Parameter area, how the function is set to Relative Pos. of Ref. Spacecraft (Crosstrack), and the Function value is set to 0.0 km.\u00A0 The Ref. Spacecraft is Test Spacecraft, which is shown by the black dotted line.\u00A0 Notice how my spacecraft\u0027s red line goes right up to the black dotted line, and then stops.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022KE3cOSa.png?1\u0022 class=\u0022ipsImage\u0022 height=\u0022583\u0022 src=\u0022http://i.imgur.com/KE3cOSa.png?1\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nSo the way this works is that I essentially use a root finder to look for the point where the function value matches the desired value.\u00A0 There\u0027s a maximum propagation time that the solver searches up to.\u00A0 The code uses a series of Coast to Delta Time events internally to do the search.\u00A0 If the solver can\u0027t find the find the desired value, it will propagate to the maximum propagation time and throw a warning.\n\u003C/p\u003E\n\u003Cp\u003E\nIn the past, if you wanted to do this, you would have had to use the optimizer and hope it could find something.\u00A0 Now, no more! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe only Graphical Analysis task/function that can\u0027t be coasted to is the Distance Traveled function, because there is some funniness with the way that\u0027s computed.\u00A0 But everything else works.\n\u003C/p\u003E\n\u003Cp\u003E\nThe next revision I want to do is to update the constraints in the optimizer to use the same data providers that Graphical Analysis uses, too.\u00A0 We\u0027ll see how much work that takes, but should be possible. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nSo what do you guys think of all this?\u00A0 Pretty neat, huh?\u00A0 I\u0027m happy with how it turned out so far. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Stract","CreatedById":165952,"CreatedDateTime":"2017-05-14T09:07:08Z","Content":"\n\u003Cp\u003E\nHi Arrowstar!\n\u003C/p\u003E\n\u003Cp\u003E\nAbout year ago I told you about problems with TOT in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E (here is the\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/33568-winmac-ksp-trajectory-optimization-tool-v156-ksp-v12x-compatibility/\u0026amp;do=findComment\u0026amp;comment=2659324\u0022 rel=\u0022\u0022\u003Elink\u003C/a\u003E\u00A0to that post). I didn\u0027t play KSP much since then but recently I\u0027ve decided to look at this problem more carefully. And I think I\u0027ve found a possible cause of it. As far as I understand, TOT calculates positions of planets by solving Kepler equation with parameters from bodies.ini. But the thing is planets in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E (and probably any Kopernicus-created system) are moving not like in stock KSP. Orbital periods for planets in stock KSP are calculated as T=2pi*sqrt(SMA^3/GM) where M is the mass of central body. In \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E T=2pi*sqrt(SMA^3/G\u003Cspan style=\u0022color:#e74c3c;\u0022\u003E(M\u002Bm)\u003C/span\u003E), m is the mass of orbiting body. This makes orbital periods more realistic, especially for the systems where masses of two bodies are comparable, like Pluto-Charon system.\u00A0That\u0027s why planets in game are moving slightly faster than TOT expect. I\u0027ve checked it in game by putting a probes into\u00A0orbits of different planets and confirmed that\u00A0probes are moving slower than planets with similar orbital parameters.\n\u003C/p\u003E\n\u003Cp\u003E\nSo that\u0027s my assumption. If this is the case then TOT requires a slight modification for\u00A0non-stock Solar\u00A0systems. It must calculate position of planets in time by using not parent body GM, but sum of Gms of parent and planet itself.\n\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2017-05-14T10:46:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056151\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494752828\u0022 data-ipsquote-userid=\u0022165952\u0022 data-ipsquote-username=\u0022Stract\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Stract said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi Arrowstar!\n\u003C/p\u003E\n\u003Cp\u003E\nAbout year ago I told you about problems with TOT in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E (here is the\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/33568-winmac-ksp-trajectory-optimization-tool-v156-ksp-v12x-compatibility/\u0026amp;do=findComment\u0026amp;comment=2659324\u0022 rel=\u0022\u0022\u003Elink\u003C/a\u003E\u00A0to that post). I didn\u0027t play KSP much since then but recently I\u0027ve decided to look at this problem more carefully. And I think I\u0027ve found a possible cause of it. As far as I understand, TOT calculates positions of planets by solving Kepler equation with parameters from bodies.ini. But the thing is planets in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E (and probably any Kopernicus-created system) are moving not like in stock KSP. Orbital periods for planets in stock KSP are calculated as T=2pi*sqrt(SMA^3/GM) where M is the mass of central body. In \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E T=2pi*sqrt(SMA^3/G\u003Cspan style=\u0022color:#e74c3c;\u0022\u003E(M\u002Bm)\u003C/span\u003E), m is the mass of orbiting body. This makes orbital periods more realistic, especially for the systems where masses of two bodies are comparable, like Pluto-Charon system.\u00A0That\u0027s why planets in game are moving slightly faster than TOT expect. I\u0027ve checked it in game by putting a probes into\u00A0orbits of different planets and confirmed that\u00A0probes are moving slower than planets with similar orbital parameters.\n\u003C/p\u003E\n\u003Cp\u003E\nSo that\u0027s my assumption. If this is the case then TOT requires a slight modification for\u00A0non-stock Solar\u00A0systems. It must calculate position of planets in time by using not parent body GM, but sum of Gms of parent and planet itself.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nVery interesting. Just one question, as you know how \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E does orbital period, have you also checked how SMA is computed? Because while in stock KSP both \u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E and \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E are measured from the mainbody center, with n-body gravitation those are to be taken from the center of mass of the system (which in a two-body system is always closer to a minor then the major body center). Of course SMA = (\u003Cabbr title=\u0022Apoapsis\u0022\u003EAp\u003C/abbr\u003E\u002B\u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E)/2 therefore the orbit of the minor is smaller around the common center of mass then around the major body. If both major and minor positions were computed from the common center of mass all would fit; but if the major remains \u0022on rails\u0022 around Sun instead of around the center of mass of the system (which is orbiting Sun) both minor and major positions would be wrong.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-14T14:01:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056151\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494752828\u0022 data-ipsquote-userid=\u0022165952\u0022 data-ipsquote-username=\u0022Stract\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Stract said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi Arrowstar!\n\u003C/p\u003E\n\u003Cp\u003E\nAbout year ago I told you about problems with TOT in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E (here is the\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/33568-winmac-ksp-trajectory-optimization-tool-v156-ksp-v12x-compatibility/\u0026amp;do=findComment\u0026amp;comment=2659324\u0022 rel=\u0022\u0022\u003Elink\u003C/a\u003E\u00A0to that post). I didn\u0027t play KSP much since then but recently I\u0027ve decided to look at this problem more carefully. And I think I\u0027ve found a possible cause of it. As far as I understand, TOT calculates positions of planets by solving Kepler equation with parameters from bodies.ini. But the thing is planets in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E (and probably any Kopernicus-created system) are moving not like in stock KSP. Orbital periods for planets in stock KSP are calculated as T=2pi*sqrt(SMA^3/GM) where M is the mass of central body. In \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E T=2pi*sqrt(SMA^3/G\u003Cspan style=\u0022color:#e74c3c;\u0022\u003E(M\u002Bm)\u003C/span\u003E), m is the mass of orbiting body. This makes orbital periods more realistic, especially for the systems where masses of two bodies are comparable, like Pluto-Charon system.\u00A0That\u0027s why planets in game are moving slightly faster than TOT expect. I\u0027ve checked it in game by putting a probes into\u00A0orbits of different planets and confirmed that\u00A0probes are moving slower than planets with similar orbital parameters.\n\u003C/p\u003E\n\u003Cp\u003E\nSo that\u0027s my assumption. If this is the case then TOT requires a slight modification for\u00A0non-stock Solar\u00A0systems. It must calculate position of planets in time by using not parent body GM, but sum of Gms of parent and planet itself.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInteresting.\u00A0 I was unaware of this.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUnfortunately, if \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E is propagating orbits in a manner different from the way that stock KSP does, then there may not be much I can do about it (simply).\u00A0 Right now the whole two body orbit propagator is effectively designed to work the same way that KSP does.\u00A0 Changing that, or introducing an alternative mode of operation, would be a ton of work.\u00A0 I also have to make sure that I always support stock KSP out of the box.\u00A0 So while I won\u0027t claim its impossible, but I suspect that I simply won\u0027t be able to address this issue.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWould it be possible to compute a new effective SMA and/or GM for each body that provided the same motion?\u00A0 I haven\u0027t sat down to look at it and do the math, but that\u0027s probably the only reasonable course of action in the immediate future.\n\u003C/p\u003E\n"},{"CreatedByName":"Stract","CreatedById":165952,"CreatedDateTime":"2017-05-14T17:21:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056302\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494770491\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWould it be possible to compute a new effective SMA and/or GM for each body that provided the same motion?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI doubt it. It appears orbital speeds in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E depend on the mass of the orbiting planets, which can not be easily avoided. Probably the most simple way is to disable this feature in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E itself, which I suppose should be doable.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2017-05-14T18:49:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056302\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494770491\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI was unaware of this.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot completely, but it\u0027s been a while since this issue last came up. You may recall like in 2015 sometime I think I had that problem getting a Mun intercept and discovered the reason I wasn\u0027t getting the in game intercept KSPTOT said I should have was due to Mun\u0027s orbital period being different as I was using \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E for better atmosphere realism (I think - honestly can\u0027t remember why I had \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E, it def wasn\u0027t for system scaling)\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-15T13:14:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223056534\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494787764\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNot completely, but it\u0027s been a while since this issue last came up. You may recall like in 2015 sometime I think I had that problem getting a Mun intercept and discovered the reason I wasn\u0027t getting the in game intercept KSPTOT said I should have was due to Mun\u0027s orbital period being different as I was using \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E for better atmosphere realism (I think - honestly can\u0027t remember why I had \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E, it def wasn\u0027t for system scaling)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFair enough! \u00A0I\u0027d have to go back and look but I believe you. :-) In any event, the issue really isn\u0027t solvable on my end without rewriting the whole propagation engine. Since that would a huge undertaking and could introduce compatibility issues with stock KSP, I don\u0027t think I can do anything to fix it. Sorry! :-\\\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-16T23:51:46Z","Content":"\n\u003Cp\u003E\nHi everyone,\n\u003C/p\u003E\n\u003Cp\u003E\nTonight I\u0027m pushing out \u003Ca href=\u0022https://drive.google.com/file/d/0B83Py_-98MhodUxBRG5KWGZxOHM/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003EKSP Trajectory Optimization Tool v1.5.7 pre-release 6\u003C/a\u003E.\u00A0 This pre-release has a number of changes over the previous pre-release, all of which are in Mission Architect.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nImplemented the Landing event in Mission Architect.\u00A0 This event holds you fixed within the rotating frame (lat/long/altitude) of the spacecraft\u0027s current central body.\n\u003C/li\u003E\n\u003Cli\u003E\nImplemented a new Coast type, \u0022Coast to Function Value.\u0022\u00A0 This allows you to coast to values that are otherwise computable from Graphical Analysis, such as relative crosstrack postition, longitude, altitude, etc.\n\u003C/li\u003E\n\u003Cli\u003E\nI\u0027ve revamped the way the graphical analysis data providers (aka \u0022Tasks\u0022) are implemented within Mission Architect.\u00A0 Now, these data providers are used not only within Graphical Analysis but also for optimizer constraints and for the \u0022Coast to Function Value\u0022 feature as well.\u00A0 In the future, they could conceivably be used for other things as well.\n\u003C/li\u003E\n\u003Cli\u003E\nA number of smaller bug fixes here and there.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nAs a note, older mission cases from previous versions, including the last pre-release, may have some optimizer constraints removed upon load in this version.\u00A0 This is because the name of some constraints changed and I needed to have the optimizer reload them (via user commands) or the application will crash.\n\u003C/p\u003E\n\u003Cp\u003E\nBecause of the somewhat larger changes in this pre-release, if anyone using it finds a bug, please let me know!\u00A0 I\u0027ve tried to test everything to the extent that I can, but I assuredly cannot find every use case myself in a finite amount of time. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThanks, and happy orbiting! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2017-05-17T02:22:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223058822\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494978706\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTonight I\u0027m pushing out \u003Ca href=\u0022https://drive.google.com/file/d/0B83Py_-98MhodUxBRG5KWGZxOHM/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003EKSP Trajectory Optimization Tool v1.5.7 pre-release 6\u003C/a\u003E.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUhhhhh, I just downloaded a 278MB executable file and I\u0027m honestly afraid to run it. Last release was 68MB \u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E I\u0027m not complaining but I just wanna make sure this is for real\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-17T02:53:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223058960\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494987752\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n29 minutes ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUhhhhh, I just downloaded a 278MB executable file and I\u0027m honestly afraid to run it. Last release was 68MB \u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E I\u0027m not complaining but I just wanna make sure this is for real\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s real, though probably means I messed something up on my end. I had to rebuild the Matlab compiler project for this build and I bet I added in a bunch of files I don\u0027t need to include. I\u0027ll look at it tomorrow. In the mean time it should all work. :-)\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2017-05-17T20:51:24Z","Content":"\n\u003Cp\u003E\nGot another asteroid with a wacky orbit that MA can\u0027t load. I\u0027ve applied its orbit to a stock probe and \u003Ca href=\u0022http://www.blade-edge.com/misc/MAT%20Test.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehere is the stock game file\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt loads the orbit the same both through the game and through the SFS file but in both instances says the SMA is invalid. Tested in both the pre-release posted just above and the one posted before that.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-17T21:10:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223058960\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494987752\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUhhhhh, I just downloaded a 278MB executable file and I\u0027m honestly afraid to run it. Last release was 68MB \u003Cimg alt=\u0022:confused:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 title=\u0022:confused:\u0022\u003E I\u0027m not complaining but I just wanna make sure this is for real\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo I accidentally included the MCR installer in the EXE file I think, which is why the file size went up by a factor of ~4.\u00A0 I\u0027ve reuploaded pre-release 6 and it\u0027s about ~69 MB, which is much more reasonable.\u00A0 Thanks for noticing!\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059676\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495054284\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 minutes ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGot another asteroid with a wacky orbit that MA can\u0027t load. I\u0027ve applied its orbit to a stock probe and \u003Ca href=\u0022http://www.blade-edge.com/misc/MAT%20Test.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehere is the stock game file\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt loads the orbit the same both through the game and through the SFS file but in both instances says the SMA is invalid. Tested in both the pre-release posted just above and the one posted before that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ll take a look! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 EDIT: Is this on the pre-release?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-17T21:12:09Z\u0022 title=\u002205/17/2017 09:12  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 17, 2017\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-17T21:38:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059676\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495054284\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n46 minutes ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGot another asteroid with a wacky orbit that MA can\u0027t load. I\u0027ve applied its orbit to a stock probe and \u003Ca href=\u0022http://www.blade-edge.com/misc/MAT%20Test.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehere is the stock game file\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt loads the orbit the same both through the game and through the SFS file but in both instances says the SMA is invalid. Tested in both the pre-release posted just above and the one posted before that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOkay, I think I\u0027ve resolved the issue and I just replaced the pre-release 6 EXE again (as I had just replaced it).\u00A0 Go ahead and try that out.\u00A0 I was just a bit overzealous with the bounds checking on some numbers. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2017-05-18T01:07:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059743\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495057131\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOkay, I think I\u0027ve resolved the issue and I just replaced the pre-release 6 EXE again (as I had just replaced it).\u00A0 Go ahead and try that out.\u00A0 I was just a bit overzealous with the bounds checking on some numbers. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\ndid a quick check loaded from the SFS file works great, thanks for the quick fix will do some actual playing later \u0026amp; report anything else I find\n\u003C/p\u003E\n"},{"CreatedByName":"gruneisen","CreatedById":119794,"CreatedDateTime":"2017-05-18T04:23:34Z","Content":"\n\u003Cp\u003E\nI wanted to return briefly to the conversation with \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0022 rel=\u0022\u0022\u003E@Stract\u003C/a\u003E\u00A0and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E\u00A0about \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E from a few days ago - as another user who remains frustrated by KSP TOT not working with \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E, I hoped that what was found was at least a path forward to try to get the two mods to work together. Unfortunately, I had a nagging feeling that something didn\u0027t quite make sense and that something was MechJeb. MechJeb has no issues working for both stock and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E with the exact same code - nothing is required to change between \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E and stock. With that in mind, I went in briefly checked the MechJeb code and, lo and behold, orbital velocities are calculated from v=sqrt(GM/r) and GM comes from the parent body of the orbit - not the barycenter.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, (un?)unfortunately, this is not the issue with KSP TOT and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E. Hopefully a continued review / comparison of MechJeb and KSP TOT can highlight where the problem lies. Nothing constructive here, just hopefully some useful information.\n\u003C/p\u003E\n\u003Cp\u003E\nCheers!\n\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2017-05-18T04:29:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223060058\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495081414\u0022 data-ipsquote-userid=\u0022119794\u0022 data-ipsquote-username=\u0022gruneisen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, gruneisen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI wanted to return briefly to the conversation with \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0022 rel=\u0022\u0022\u003E@Stract\u003C/a\u003E\u00A0and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E\u00A0about \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E from a few days ago - as another user who remains frustrated by KSP TOT not working with \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E, I hoped that what was found was at least a path forward to try to get the two mods to work together. Unfortunately, I had a nagging feeling that something didn\u0027t quite make sense and that something was MechJeb. MechJeb has no issues working for both stock and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E with the exact same code - nothing is required to change between \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E and stock. With that in mind, I went in briefly checked the MechJeb code and, lo and behold, orbital velocities are calculated from v=sqrt(GM/r) and GM comes from the parent body of the orbit - not the barycenter.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, (un?)unfortunately, this is not the issue with KSP TOT and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E. Hopefully a continued review / comparison of MechJeb and KSP TOT can highlight where the problem lies. Nothing constructive here, just hopefully some useful information.\n\u003C/p\u003E\n\u003Cp\u003E\nCheers!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think the real reason is that MechJeb doesn\u0027t have to be as precise: The planet/moon \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E will catch the ship so \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E only has to get the ship in the general vicinity. But this mod probably requires more precision than that, especially if it\u0027s having to look several years into the future.\n\u003C/p\u003E\n"},{"CreatedByName":"gruneisen","CreatedById":119794,"CreatedDateTime":"2017-05-18T04:39:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223060062\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495081779\u0022 data-ipsquote-userid=\u002271262\u0022 data-ipsquote-username=\u0022Starwaster\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 minutes ago, Starwaster said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI think the real reason is that MechJeb doesn\u0027t have to be as precise: The planet/moon \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E will catch the ship so \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E only has to get the ship in the general vicinity. But this mod probably requires more precision than that, especially if it\u0027s having to look several years into the future.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI agree that TOT is far more precise, but I use MechJeb do\u00A0to interplanetary transfers that are years out using its porkchop plotter and nail the transfers with no problem whereas for a simple Earth - Moon transfer, in KSP TOT\u00A0I can load a current vessel into Mission Architect, find a transfer from the earth to the moon, upload the maneuver and it have it be off by as much as 180\u00B0. Do a Hohman transfer in MechJeb and bam, spot on. A lot of people have said it before and I\u0027m going to say it again - all signs point to the KSP TOT thinking the bodies in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E are in a different place then where they are - it is completely inaccurate with \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E over any timescale.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-18T04:39:42Z\u0022 title=\u002205/18/2017 04:39  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 18, 2017\u003C/time\u003E by gruneisen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Stract","CreatedById":165952,"CreatedDateTime":"2017-05-18T06:29:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223060058\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495081414\u0022 data-ipsquote-userid=\u0022119794\u0022 data-ipsquote-username=\u0022gruneisen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, gruneisen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI wanted to return briefly to the conversation with \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0022 rel=\u0022\u0022\u003E@Stract\u003C/a\u003E\u00A0and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E\u00A0about \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E from a few days ago - as another user who remains frustrated by KSP TOT not working with \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E, I hoped that what was found was at least a path forward to try to get the two mods to work together. Unfortunately, I had a nagging feeling that something didn\u0027t quite make sense and that something was MechJeb. MechJeb has no issues working for both stock and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E with the exact same code - nothing is required to change between \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E and stock. With that in mind, I went in briefly checked the MechJeb code and, lo and behold, orbital velocities are calculated from v=sqrt(GM/r) and GM comes from the parent body of the orbit - not the barycenter.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, (un?)unfortunately, this is not the issue with KSP TOT and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E. Hopefully a continued review / comparison of MechJeb and KSP TOT can highlight where the problem lies. Nothing constructive here, just hopefully some useful information.\n\u003C/p\u003E\n\u003Cp\u003E\nCheers!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t know how MechJeb deals with \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E, but at least the following seems to be true because it is easy to check: \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E calculates orbital periods using sum of masses unlike TOT. Actually I\u0027ve played with TOT code a bit. I\u0027ve changed the way of calculating the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E upward transition in mission architect by replacing \u0022[rVectBody, vVectBody] = getStateAtTime(bodyInfo, ut, parentBodyInfo.gm);\u0022 line with \u0022[rVectBody, vVectBody] = getStateAtTime(bodyInfo, ut, parentBodyInfo.gm\u002BbodyInfo.gm);\u0022 in \u0022convertRVVectOnUpwardsSoITransition\u0022 function. After this correction mission architect became to predict orbits after upward \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E transition much more accurately. Here are exapmles for stock and modified TOT (TOT predictions for the probe on Earth escape trajectory and actulal\u00A0orbital\u00A0parameters after entering Sun \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\nStock TOT, edited\u00A0TOT and actual parameters\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://postimg.org/image/hpfoflalx/\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022TOT_edit.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022https://s18.postimg.org/cqs6126t5/TOT_edit.jpg\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-18T09:15:57Z\u0022 title=\u002205/18/2017 09:15  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 18, 2017\u003C/time\u003E by Stract\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2017-05-18T06:55:36Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E Judging from the tests that \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0022 rel=\u0022\u0022\u003E@Stract\u003C/a\u003E did, wouldn\u0027t a toggle in the KSPTOT Options window be enough for KSPTOT to be compatible with both velocity calculations?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:10px;\u0022\u003EMight be completely wrong here. If so then excuse me...\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-18T06:56:41Z\u0022 title=\u002205/18/2017 06:56  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 18, 2017\u003C/time\u003E by Phineas Freak\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2017-05-18T11:53:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223060152\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495090536\u0022 data-ipsquote-userid=\u0022146521\u0022 data-ipsquote-username=\u0022Phineas Freak\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Phineas Freak said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E Judging from the tests that \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0022 rel=\u0022\u0022\u003E@Stract\u003C/a\u003E did, wouldn\u0027t a toggle in the KSPTOT Options window be enough for KSPTOT to be compatible with both velocity calculations?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:10px;\u0022\u003EMight be completely wrong here. If so then excuse me...\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for doing the research, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0022 rel=\u0022\u0022\u003E@Stract\u003C/a\u003E! \u00A0That\u0027s very interesting.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs far as a toggle goes... Yes, that\u0027s what it would be on the UI side. I still have to implement it though! \u00A0Let me see what I can come up with after the 1.5.7 release drops next week hopefully.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0022 rel=\u0022\u0022\u003E@Stract\u003C/a\u003E, is the only modification you needed to do to add the GM of the smaller body, as you showed in your code example? \u00A0And that provided good results where used?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Stract","CreatedById":165952,"CreatedDateTime":"2017-05-18T12:33:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223060321\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495108415\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThanks for doing the research, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0022 rel=\u0022\u0022\u003E@Stract\u003C/a\u003E! \u00A0That\u0027s very interesting.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs far as a toggle goes... Yes, that\u0027s what it would be on the UI side. I still have to implement it though! \u00A0Let me see what I can come up with after the 1.5.7 release drops next week hopefully.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165952\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165952-stract/\u0022 rel=\u0022\u0022\u003E@Stract\u003C/a\u003E, is the only modification you needed to do to add the GM of the smaller body, as you showed in your code example? \u00A0And that provided good results where used?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHi Arrowstar!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nYup, all I did is add this smaller body GM. As far as I can see, the only problem in TOT with \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E is that TOT calculates the relative position of planets and moons incorrectly,\u00A0so every \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E transition creates an error. In my example stock TOT determined the wrong location of Earth on Sun orbit (wrong true\\mean\u00A0anomaly to be precise, caused by wrong orbital speed of the Earth)\u00A0at the moment of \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E transition, which ended up in wrong Sun\u00A0orbital parameters of a probe. By adding Earth GM into the function I corrected orbital speed of the Earth and hence the true anomaly of the Earth at that moment. So yes, my assumption is that adding GM of smaller body at every time TOT tries to locate the current position of planet or moon (i.e. at every \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E transition, every fly-by trajectory calculation and so...)\u00A0should do the trick. At least it worked in my example.\n\u003C/p\u003E\n"}]}