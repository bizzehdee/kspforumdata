{"TopicId":33568,"ForumId":35,"TopicTitle":"[WIN/MAC/LINUX] KSP Trajectory Optimization Tool v1.6.9 [New MATLAB Version!]","CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-18T04:59:31Z","PageNum":141,"Articles":[{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-19T23:52:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223674800\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221568934205\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n50 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/file/d/1YiFjbnTnGLbBw159R1acfP_-gIdtbGVT/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003EHere you go.\u003C/a\u003E\u00A0\u00A0 I only fixed the interpolation for Kerbin but I figure that should get you off the ground (literally). \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYep, that\u0027s enough thanks!\n\u003C/p\u003E\n\u003Cp\u003E\nAlso my most recent flight this past week came up only 3km short target altitude on MECO, only 47km short on apokee and ~35km southwest of my target re-entry area. Could have been more on-target if I hadn\u0027t made too much of a conservative steering measure towards the end of the ascent:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00227Kmscir.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.51\u0022 height=\u0022619\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/7Kmscir.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI didn\u0027t want to overshoot the pitch hold at 45\u00B0 so I had it lock to 45\u00B0 at like 46.5\u00B0 because I thought control authority would be lower that high but it snapped down to 45 really fast, dammit \u003Cspan\u003E\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E I also made the mistake of unlocking the steering after MECO while still in atmo which is why the actual pitch path fell off 45 at the end \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EMy post-flight analysis will input these guidance errors into LVD and see if it shows similar results\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-09-19T23:55:11Z\u0022 title=\u002209/19/2019 11:55  PM\u0022 data-short=\u00224 yr\u0022\u003ESeptember 19, 2019\u003C/time\u003E by Drew Kerman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-19T23:55:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223674816\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221568937174\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYep, that\u0027s enough thanks!\n\u003C/p\u003E\n\u003Cp\u003E\nAlso my most recent flight this past week came up only 3km short target altitude on MECO, only 47km short on apokee and ~35km southwest of my target re-entry area. Could have been more on-target if I hadn\u0027t made too much of a conservative steering measure towards the end of the ascent:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/7Kmscir.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u0026lt;snip\u0026gt;\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI didn\u0027t want to overshoot the pitch hold at 45\u00B0 so I had it lock to 45\u00B0 at like 46.5\u00B0 because I thought control authority would be lower that high but it snapped down to 45 really fast, dammit \u003Cspan\u003E\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E I also made the mistake of unlocking the steering after MECO while still in atmo which is why the actual pitch path fell off 45 at the end \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EGetting better...\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHonestly, that looks great!\u00A0 I\u0027m really digging the fact that LVD can model these missions that well!\u00A0 Thanks for sharing. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-20T00:26:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223674818\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221568937353\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n27 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m really digging the fact that LVD can model these missions that well!\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYup, I will continue to work out \u0022acceptable error margins\u0022 that anyone can apply to planning with LVD. If you have any suggestions on that which may not be obvious to this process, please share. I figure you guys also have to work this out for the software you use but I could be wrong or slightly misunderstood about it\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-20T21:07:56Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223674829\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221568939187\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYup, I will continue to work out \u0022acceptable error margins\u0022 that anyone can apply to planning with LVD. If you have any suggestions on that which may not be obvious to this process, please share. I figure you guys also have to work this out for the software you use but I could be wrong or slightly misunderstood about it\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn real life our constraints are pretty tight.\u00A0 We generally expect apogee and perigee altitudes to be within 1 km of their nominal values, and inclination and RAAN should be \u002B/- 0.01 degree or so.\u00A0 But real life also has lots of very smart people with decades of experience working on this stuff, so it\u0027s achievable. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-09-20T21:19:54Z\u0022 title=\u002209/20/2019 09:19  PM\u0022 data-short=\u00224 yr\u0022\u003ESeptember 20, 2019\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-20T23:17:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223675157\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569013676\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWe generally expect apogee and perigee altitudes to be within 1 km of their nominal values, and inclination and RAAN should be \u002B/- 0.01 degree or so.\u00A0 But real life also has lots of very smart people with decades of experience working on this stuff, so it\u0027s achievable\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCHALLENGE ACCEPTED\n\u003C/p\u003E\n"},{"CreatedByName":"AVaughan","CreatedById":152784,"CreatedDateTime":"2019-09-21T00:19:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223675157\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569013676\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIn real life our constraints are pretty tight.\u00A0 We generally expect apogee and perigee altitudes to be within 1 km of their nominal values, and inclination and RAAN should be \u002B/- 0.01 degree or so.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMechjeb\u0027s PVG ascent guidance works pretty well for me most of the time. (\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E/RP-1).\u00A0 eg my last ascent target\u00A0orbit: 150km x 900km @ 68 degrees.\u00A0 Actual 150,000m x 900,004.9m @ 68.00003 degrees.\u00A0 (It did kill the second stage a smidgeon\u00A0early, and burnt a bit of \u003Cabbr title=\u0022Reaction Control System\u0022\u003Ercs\u003C/abbr\u003E to raise apoapsis to 900km.\u00A0 But another gametick from the second stage would have probably resulted in an even larger error in apoapsis, so that was probably as close to optimal as it could get given KSP\u0027s\u00A020-50ms gametick).\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-21T03:05:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223675212\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569025180\u0022 data-ipsquote-userid=\u0022152784\u0022 data-ipsquote-username=\u0022AVaughan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, AVaughan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMechjeb\u0027s PVG ascent guidance works pretty well for me most of the time. (\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E/RP-1).\u00A0 eg my last ascent target\u00A0orbit: 150km x 900km @ 68 degrees.\u00A0 Actual 150,000m x 900,004.9m @ 68.00003 degrees.\u00A0 (It did kill the second stage a smidgeon\u00A0early, and burnt a bit of \u003Cabbr title=\u0022Reaction Control System\u0022\u003Ercs\u003C/abbr\u003E to raise apoapsis to 900km.\u00A0 But another gametick from the second stage would have probably resulted in an even larger error in apoapsis, so that was probably as close to optimal as it could get given KSP\u0027s\u00A020-50ms gametick).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSweet!\u00A0 Now that is some good ascent guidance. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-24T09:14:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223675266\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569035103\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 9/20/2019 at 11:05 PM, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSweet!\u00A0 Now that is some good ascent guidance. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI looked into it - it\u0027s based directly off a \u003Ca href=\u0022https://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/19660006073.pdf\u0022 rel=\u0022external nofollow\u0022\u003EPEG paper by NASA\u003C/a\u003E - so it most certainly would work well... for Earth. I give LVD way more credit for being more generally applicable\n\u003C/p\u003E\n\u003Cp\u003E\nOn that note, I think we need to discuss other options for the linear atmospheric model used by LVD. That\u0027s where the biggest deviation is coming from, IMO. Take these two examples made with data from my latest launch (click to embiggen):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/Sp9NTEH.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u0022148.07\u0022 height=\u0022768\u0022 style=\u0022width:518px;height:767px;\u0022 width=\u0022518\u0022 alt=\u0022YFbMn9O.png\u0022 src=\u0022https://i.imgur.com/YFbMn9O.png\u0022\u003E\u003C/a\u003E \u003Ca href=\u0022https://i.imgur.com/VVvowgy.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u0022148.07\u0022 height=\u0022768\u0022 style=\u0022width:518px;height:767px;\u0022 width=\u0022518\u0022 alt=\u0022iSwcSC2.png\u0022 src=\u0022https://i.imgur.com/iSwcSC2.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nNow lets look at how well my rocket flew in comparison to what I programmed into LVD:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/hvYIEmI.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002260.55\u0022 height=\u0022619\u0022 style=\u0022width:1024px;height:620px;\u0022 width=\u00221024\u0022 alt=\u0022hvYIEmI.png\u0022 src=\u0022https://i.imgur.com/hvYIEmI.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSo my initial design (green) had some minor mistakes at the start with pitching over too fast and toward the end I didn\u0027t have enough pitch points to smooth out the curve. My actual ascent also made a noticeable error in dipping down into pitch lock too soon. I made some adjustments to my LVD ascent profile to match more closely to my actual flight data and there was some improvement (full plot with clicky):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/rIJ7Vm8.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002269.43\u0022 height=\u0022711\u0022 style=\u0022width:1024px;height:711px;\u0022 width=\u00221024\u0022 alt=\u0022zWsriYm.png\u0022 src=\u0022https://i.imgur.com/zWsriYm.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHere the altitude in meters over orbital velocity shows that the adjust LVD profile sticks to the actual data a bit longer before diverging, which I would attribute to the adjustment made at the start of the ascent to not pitch over as fast. You can see improvement as well in the dynamic pressure being lower and closer to the actual values (Q over time):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/ST1pnWf.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002266.70\u0022 height=\u0022682\u0022 style=\u0022width:1024px;height:683px;\u0022 width=\u00221024\u0022 alt=\u0022ST1pnWf.png\u0022 src=\u0022https://i.imgur.com/ST1pnWf.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nDrag modeling was pretty on point as well IMO, seen here as Cd over time:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/OUWKtQv.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002260.06\u0022 height=\u0022615\u0022 style=\u0022width:1024px;height:615px;\u0022 width=\u00221024\u0022 alt=\u0022OUWKtQv.png\u0022 src=\u0022https://i.imgur.com/OUWKtQv.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nwhen you plot the Cd over altitude that blip in the beginning becomes negligible.\n\u003C/p\u003E\n\u003Cp\u003E\nThoughts?\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-26T14:27:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223662152\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221567035303\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/28/2019 at 7:35 PM, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E I have another \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E detection issue. \u003Ca href=\u0022http://www.kerbalspace.agency/misc/Alaba_9-25-19.zip\u0022 rel=\u0022external nofollow\u0022\u003EHere is the MAT file\u003C/a\u003E. The game detected the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E transition but MA did not. I did a distance check of the trajectory after loading it in from the game and sure enough (blue line is Mun\u0027s \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E boundary distance from the Celestial Body Catalog):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022NgtLtPX.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002290.04\u0022 height=\u0022506\u0022 width=\u0022562\u0022 src=\u0022https://i.imgur.com/NgtLtPX.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s output with a default 1000 log entries per coast. It is a very brief encounter lasting 15 minutes. However despite my best attempts I could not get MA to find it. You\u0027ll see in the MAT file I have everything maxed out in the search attempt - Stricter \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E Search is enabled, \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E Search Tolerance is at 1.000000E-14 (02 doesn\u0027t work either on the other end - to be honest not sure which was the proper extreme value I should be using but 14 took longer to process so I\u0027m guessing that\u0027s looking closest) and the Number of \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E Transition Search Attempts is at 100. Increasing the log events to 100,000 also didn\u0027t make a difference, nor did attempting to coast to TA over 2 revs (which was used to make the plot above) or using the Next \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E coast event. This could maybe be an issue with the duration of the encounter rather than the distance?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFound another miss in a trajectory a few encounters after this one. Is there perhaps any way to force the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E encounter that I haven\u0027t thought of, or will this need to wait for a program fix?\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-27T13:43:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223677692\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569508027\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFound another miss in a trajectory a few encounters after this one. Is there perhaps any way to force the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E encounter that I haven\u0027t thought of, or will this need to wait for a program fix?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\ndurr, nevermind no fix needed anytime soon. I just remembered I\u0027ve already advanced the game through several encounters and have the post-encounter orbit data. So I can just use that (shhhhhh! \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E) I don\u0027t have to actually propagate to that point from an earlier encounter like I was trying to do when I found the missed \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-27T18:25:50Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103177-drew-kerman/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022103177\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103177-drew-kerman/\u0022 rel=\u0022\u0022\u003E@Drew Kerman\u003C/a\u003E: I checked and it does look like I have a linear interpolation on the atmospheric data, probably for performance reasons.\u00A0 I can change it back to a smooth spline though for testing if that would help you.\n\u003C/p\u003E\n\u003Cp\u003E\nRegarding the MA \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E transition miss, I will take a look this weekend or next week and see if I can\u0027t figure it out.\u00A0 Thanks for bringing it to my attention. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-27T18:53:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223678240\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569608750\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n27 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nprobably for performance reasons\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis was my assumption. Please do change it to smooth and I will let you know if that is helpful enough to keep it despite any performance hit, or at least build in an option to switch to it for missions where accuracy is needed over faster design\n\u003C/p\u003E\n\u003Cp\u003E\nTo be clear I\u0027d take the smooth atmosphere curve change over the MA \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E miss if you\u0027ve only time to work on one at the moment\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-09-27T18:54:03Z\u0022 title=\u002209/27/2019 06:54  PM\u0022 data-short=\u00224 yr\u0022\u003ESeptember 27, 2019\u003C/time\u003E by Drew Kerman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-28T22:28:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223662152\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221567035303\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/28/2019 at 6:35 PM, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0026amp;do=hovercard\u0022 data-mentionid=\u00222521\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/2521-arrowstar/\u0022 rel=\u0022\u0022\u003E@Arrowstar\u003C/a\u003E I have another \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E detection issue. \u003Ca href=\u0022http://www.kerbalspace.agency/misc/Alaba_9-25-19.zip\u0022 rel=\u0022external nofollow\u0022\u003EHere is the MAT file\u003C/a\u003E. The game detected the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E transition but MA did not. I did a distance check of the trajectory after loading it in from the game and sure enough (blue line is Mun\u0027s \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E boundary distance from the Celestial Body Catalog):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022NgtLtPX.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002290.04\u0022 height=\u0022506\u0022 width=\u0022562\u0022 src=\u0022https://i.imgur.com/NgtLtPX.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s output with a default 1000 log entries per coast. It is a very brief encounter lasting 15 minutes. However despite my best attempts I could not get MA to find it. You\u0027ll see in the MAT file I have everything maxed out in the search attempt - Stricter \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E Search is enabled, \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E Search Tolerance is at 1.000000E-14 (02 doesn\u0027t work either on the other end - to be honest not sure which was the proper extreme value I should be using but 14 took longer to process so I\u0027m guessing that\u0027s looking closest) and the Number of \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E Transition Search Attempts is at 100. Increasing the log events to 100,000 also didn\u0027t make a difference, nor did attempting to coast to TA over 2 revs (which was used to make the plot above) or using the Next \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E coast event. This could maybe be an issue with the duration of the encounter rather than the distance?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI had to add some additional code to jump into a different root-finding algorithm, but I think I\u0027ve got this one figured out.\u00A0 My bisection search code was throwing an NaN and not finding a solution that should have been obvious.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, new build coming tonight with this and the smooth spline fit of the atmospheric data.\u00A0 Keep in mind that you\u0027ll either need to create a new mission case or have me update your MAT file for you to use the new spline fit, because those splines are generated once when you start KSPTOT and used everywhere.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-28T22:56:50Z","Content":"\n\u003Cp\u003E\nAlright, here\u0027s the build of \u003Ca href=\u0022https://drive.google.com/file/d/1Yia0QcsqLAZoIv85SQ6PXCpPSYcZhfdZ/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003EKSPTOT v1.6.4 pre-release 6\u003C/a\u003E.\u00A0 The change log is short:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nResolves an issue in Mission Architect\u0027s \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E transition search where the bisection search would return NaN while still returning a valid distance to target celestial body.\n\u003C/li\u003E\n\u003Cli\u003E\nAll NEW MA and LVD cases will use spline interpolation for their atmospheric table interpolations.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nPlease let me know if you find any bugs.\u00A0 Thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-30T04:03:44Z","Content":"\n\u003Cp\u003E\nnice, both fixes! Someone actually Ko-Fi\u0027d me this weekend so I\u0027ll pass that on to you. I\u0027ll just remake the file just since I can\u0027t remember when it was originally made so want to make sure all the latest changes, not just the atmosphere, go into it. Thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-30T12:04:18Z","Content":"\n\u003Cp\u003E\nresults! I was pretty disappointed at first when I rebuilt the LVD file and did not see a significant change in the end state of the rocket towards what actually happened. Still, a step in the right direction I think after plotting out the new data. Here is atmospheric density (click for full height plot):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/3mweT0n.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002254.59\u0022 height=\u0022558\u0022 style=\u0022width:1024px;height:559px;\u0022 width=\u00221024\u0022 alt=\u0022bddbNaE.png\u0022 src=\u0022https://i.imgur.com/bddbNaE.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nNicely matching the kOS and VOID data, which also applies to dynamic pressure (click to embiggen):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/tQGSbbk.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002260.06\u0022 height=\u0022615\u0022 style=\u0022width:1024px;height:615px;\u0022 width=\u00221024\u0022 alt=\u0022tQGSbbk.png\u0022 src=\u0022https://i.imgur.com/tQGSbbk.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s an awesome match! To clarify if needed - \u0022LVD\u0022 is my original ascent design, \u0022LVD Adjusted\u0022 is the original design modified to match the actual pitch closer and \u0022LVD Smooth\u0022 is the adjusted profile with the smoother atmospheric model. But, and here is where the but comes in - the above plot is dynamic pressure over altitude. When you do it as dynamic pressure over time... (click to see LVD \u0026amp; LVD Adjusted plots)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/5TsmcGT.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002260.06\u0022 height=\u0022615\u0022 style=\u0022width:1024px;height:615px;\u0022 width=\u00221024\u0022 alt=\u0022YD2Ahlc.png\u0022 src=\u0022https://i.imgur.com/YD2Ahlc.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWe see that things aren\u0027t quite right and when we look at atmospheric density:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/zRwVuFr.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002284.40\u0022 height=\u0022768\u0022 style=\u0022width:910px;height:768px;\u0022 width=\u0022910\u0022 alt=\u0022c92m8YZ.png\u0022 src=\u0022https://i.imgur.com/c92m8YZ.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nwe find we have a lingering issue unfortunately. I\u0027ve checked my bodies.ini file and the atmosphere data for Kerbin is not the same as the included .ini from stock data, so KSPTOT did pick up the changes made by the Better Atmospheres mod I mentioned I have installed. It may perhaps not be computing them properly or importing them properly? Can you add Atmospheric Temperature \u0026amp; Molar Mass to the GA tool? I have kOS logging these values now and I can compare them to the LVD output and see what variation exists there as well. Given how well the smoother pressure curve brought the dynamic pressure into line, I think if we can correct this we\u0027ll see a much closer on-target result. \u003Ca href=\u0022http://www.kerbalspace.agency/misc/Ascension%20Mk1%20%239%20Ascent.zip\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s the latest LVD file\u003C/a\u003E from which the \u0022smooth\u0022 data was exported from if you need to look at it.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-30T13:07:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679335\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569816224\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nnice, both fixes! Someone actually Ko-Fi\u0027d me this weekend so I\u0027ll pass that on to you. I\u0027ll just remake the file just since I can\u0027t remember when it was originally made so want to make sure all the latest changes, not just the atmosphere, go into it. Thanks!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the tip! \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679433\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569845058\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n58 minutes ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nresults! I was pretty disappointed at first when I rebuilt the LVD file and did not see a significant change in the end state of the rocket towards what actually happened. Still, a step in the right direction I think after plotting out the new data. Here is atmospheric density (click for full height plot):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/3mweT0n.png\u0022 rel=\u0022external nofollow\u0022\u003E\u0026lt;snip\u0026gt;\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nNicely matching the kOS and VOID data, which also applies to dynamic pressure (click to embiggen):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/tQGSbbk.png\u0022 rel=\u0022external nofollow\u0022\u003E\u0026lt;snip\u0026gt;\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s an awesome match! To clarify if needed - \u0022LVD\u0022 is my original ascent design, \u0022LVD Adjusted\u0022 is the original design modified to match the actual pitch closer and \u0022LVD Smooth\u0022 is the adjusted profile with the smoother atmospheric model. But, and here is where the but comes in - the above plot is dynamic pressure over altitude. When you do it as dynamic pressure over time... (click to see LVD \u0026amp; LVD Adjusted plots)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/5TsmcGT.png\u0022 rel=\u0022external nofollow\u0022\u003E\u0026lt;snip\u0026gt;\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWe see that things aren\u0027t quite right and when we look at atmospheric density:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/zRwVuFr.png\u0022 rel=\u0022external nofollow\u0022\u003E\u0026lt;snip\u0026gt;\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nwe find we have a lingering issue unfortunately. I\u0027ve checked my bodies.ini file and the atmosphere data for Kerbin is not the same as the included .ini from stock data, so KSPTOT did pick up the changes made by the Better Atmospheres mod I mentioned I have installed. It may perhaps not be computing them properly or importing them properly? Can you add Atmospheric Temperature \u0026amp; Molar Mass to the GA tool? I have kOS logging these values now and I can compare them to the LVD output and see what variation exists there as well. Given how well the smoother pressure curve brought the dynamic pressure into line, I think if we can correct this we\u0027ll see a much closer on-target result. \u003Ca href=\u0022http://www.kerbalspace.agency/misc/Ascension%20Mk1%20%239%20Ascent.zip\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s the latest LVD file\u003C/a\u003E from which the \u0022smooth\u0022 data was exported from if you need to look at it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCan I see a comparison plot of altitude vs time?\u00A0 Because the quantities vs altitude plots look reasonable, I\u0027m wondering if there\u0027s a non-trivial difference in your altitudes over time.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd yes, I can see about adding an atmospheric temperature plot.\u00A0 Note that I did eliminate a small temperature adjustment factor in the interest of code performance, but given that atmospheric density looks spot on, I\u0027m guessing that it doesn\u0027t have a huge impact. \u00A0 I think the molar mass is fixed for each atmosphere, so that doesn\u0027t vary with time.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-30T13:59:17Z","Content":"\n\u003Cp\u003E\nYep, def non-trivial \u003Cspan\u003E\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E Same remains for the velocity/altitude plot I included in my last analysis post \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/jUOahm6.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002260.06\u0022 height=\u0022615\u0022 style=\u0022width:1024px;height:615px;\u0022 width=\u00221024\u0022 alt=\u0022jUOahm6.png\u0022 src=\u0022https://i.imgur.com/jUOahm6.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAlso there\u0027s no discernible difference in the LVD Adjusted plot\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679452\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569848879\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n49 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ngiven that atmospheric density looks spot on\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nwait what? I\u0027m seeing significant deviation in the density plot. The atmospheric pressure is spot on\n\u003C/p\u003E\n\u003Cp\u003E\nAlso can the thrust profile chart vertical axis expand to accept numbers greater than 1? I\u0027m using SRBs from a mod that has \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/175316-173-15-bettersrbs-v1010-11-jun-2019/page/2/\u0026amp;tab=comments#comment-3481217\u0022 rel=\u0022\u0022\u003Ethis thrust profile\u003C/a\u003E that ups the thrust to 1.1785\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-30T14:37:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679475\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569851957\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n29 minutes ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYep, def non-trivial \u003Cspan\u003E\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E Same remains for the velocity/altitude plot I included in my last analysis post \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/jUOahm6.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022jUOahm6.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002260.06\u0022 height=\u0022615\u0022 style=\u0022width:1024px;height:615px;\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/jUOahm6.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAlso there\u0027s no discernible difference in the LVD Adjusted plot\n\u003C/p\u003E\n\u003Cp\u003E\nwait what? I\u0027m seeing significant deviation in the density plot. The atmospheric pressure is spot on\n\u003C/p\u003E\n\u003Cp\u003E\nAlso can the thrust profile chart vertical axis expand to accept numbers greater than 1? I\u0027m using SRBs from a mod that has \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/175316-173-15-bettersrbs-v1010-11-jun-2019/page/2/\u0026amp;tab=comments#comment-3481217\u0022 rel=\u0022\u0022\u003Ethis thrust profile\u003C/a\u003E that ups the thrust to 1.1785\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOkay, I see now, I was looking at your density plots from the last post, not the first one on this subject.\u00A0 Sorry, reading these posts too fast. \u003Cspan\u003E\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/span\u003E\u00A0 Still, the density difference does seem small in comparison to the massive difference in altitudes that you\u0027re showing between what\u0027s being modeled and what\u0027s being flown in KSP.\u00A0 Of course, that could be poor intuition on my part, too.\u00A0 What would be interesting is to see what happens if you turn off the Kerbin atmosphere in KSP (is that possible in the debug menu?) and then turn off drag in LVD.\u00A0 If your planned and flown trajectories are much closer then, then we\u0027ll know the difference is in atmosphere modeling.\u00A0 Is that something you\u0027d be able/willing to look into?\n\u003C/p\u003E\n\u003Cp\u003E\nRegarding the chart: There\u0027s no discernible difference in the LVD adjusted plot between what and what?\n\u003C/p\u003E\n\u003Cp\u003E\nI can look into changing the max allowable thrust profile scale factor, but it\u0027s not as straight forward as it sounds as there\u0027s something bounds checking code that depends on having a known, fixed maximum scale factor in there.\u00A0 I guess I could always just set the max to be 2 or 10 or something like that...\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-30T15:25:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679491\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569854232\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs that something you\u0027d be able/willing to look into?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI should be able to make a few tweaks to Kopernicus configs to shut down the atmosphere. I\u0027ll look into it\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679491\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569854232\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThere\u0027s no discernible difference in the LVD adjusted plot between what and what?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI didn\u0027t know if you wanted to also see the LVD Adjusted output but it drew right on top of the LVD Smooth, there was no visible difference\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679491\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569854232\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n44 minutes ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI guess I could always just set the max to be 2 or 10 or something like that...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n1.5 would be fine. if it\u0027s too much trouble, I can actually just edit the curve myself to max out at 1\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-30T17:49:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679516\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569857155\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI should be able to make a few tweaks to Kopernicus configs to shut down the atmosphere. I\u0027ll look into it\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nyea so it\u0027s a simple true/false flag to switch off the atmosphere using Kopernicus but as I launched and saw the vaporous engine plume I realized disabling drag in LVD won\u0027t be enough since the atmosphere in LVD will still be there to affect the thrust of the engine - right?\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-30T17:58:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679587\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569865774\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nyea so it\u0027s a simple true/false flag to switch off the atmosphere using Kopernicus but as I launched and saw the vaporous engine plume I realized disabling drag in LVD won\u0027t be enough since the atmosphere in LVD will still be there to affect the thrust of the engine - right?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, you could just change your engine parameters to be vacuum levels regardless of atmosphere pressure.\u00A0 That would be easier than changing the bodies.ini file and recreating the mission again I would assume.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-30T18:01:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679594\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569866297\u0022 data-ipsquote-userid=\u00222521\u0022 data-ipsquote-username=\u0022Arrowstar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Arrowstar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWell, you could just change your engine parameters to be vacuum levels regardless of atmosphere pressure\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh, right. Okay, I just have to get this stupid engine gimbal to work now. I can\u0027t use my fin control surfaces obviously \u003Cspan\u003E\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E right now the engine can\u0027t gimbal enough to pitch over downrange it seems. Rocket wants to fly the wrong way\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EAha, it just so happens the engine I\u0027m using had an error in its .cfg file for the engine gimbal thrust transform. Figures. Ok, let\u0027s see how this turns out...\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-09-30T19:26:58Z\u0022 title=\u002209/30/2019 07:26  PM\u0022 data-short=\u00224 yr\u0022\u003ESeptember 30, 2019\u003C/time\u003E by Drew Kerman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-09-30T20:48:58Z","Content":"\n\u003Cp\u003E\nAlright assuming I did this all right, here again is altitude over time with atmosphere:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/jUOahm6.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg class=\u0022ipsImage\u0022 data-ratio=\u002260.06\u0022 height=\u0022615\u0022 style=\u0022width:1024px;height:615px;\u0022 width=\u00221024\u0022 alt=\u0022jUOahm6.png\u0022 src=\u0022https://i.imgur.com/jUOahm6.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnd here it is without atmosphere:\u003Cbr\u003E\u003Cimg alt=\u0022Bodf4L1.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.06\u0022 height=\u0022615\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/Bodf4L1.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI see an improvement, but there\u0027s still something off. \u003Ca href=\u0022http://www.kerbalspace.agency/misc/Ascension%20Mk1%20%239%20No%20Atmo.zip\u0022 rel=\u0022external nofollow\u0022\u003EHere is the LVD file\u003C/a\u003E so you can check that I set things up properly. I know in the game the atmosphere was definitely gone - the engine exhaust was fully expanded, all the \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E readouts were 0 and the engine was putting out max thrust for vacuum. The LVD file has all the drag update events removed, all the sequential events have only the Thrust force selected and the engine has its thrust and \u003Cabbr title=\u0022Specific Impulse (rocketry) or Internet Service Provider\u0022\u003EISP\u003C/abbr\u003E the same for vacuum and sea level.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m burnt for the day, which means I\u0027m not thinking of anything new to try or do or plot but if you have any ideas on what I should do I will hop on it.\n\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2019-09-30T22:09:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223679704\u0022 data-ipsquote-contentid=\u002233568\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221569876538\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAlright assuming I did this all right, here again is altitude over time with atmosphere:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/jUOahm6.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022jUOahm6.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002260.06\u0022 height=\u0022615\u0022 style=\u0022width:1024px;height:615px;\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/jUOahm6.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnd here it is without atmosphere:\u003Cbr\u003E\u003Ca href=\u0022https://i.imgur.com/Bodf4L1.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022Bodf4L1.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002260.06\u0022 height=\u0022615\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/Bodf4L1.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI see an improvement, but there\u0027s still something off. \u003Ca href=\u0022http://www.kerbalspace.agency/misc/Ascension%20Mk1%20%239%20No%20Atmo.zip\u0022 rel=\u0022external nofollow\u0022\u003EHere is the LVD file\u003C/a\u003E so you can check that I set things up properly. I know in the game the atmosphere was definitely gone - the engine exhaust was fully expanded, all the \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E readouts were 0 and the engine was putting out max thrust for vacuum. The LVD file has all the drag update events removed, all the sequential events have only the Thrust force selected and the engine has its thrust and \u003Cabbr title=\u0022Specific Impulse (rocketry) or Internet Service Provider\u0022\u003EISP\u003C/abbr\u003E the same for vacuum and sea level.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m burnt for the day, which means I\u0027m not thinking of anything new to try or do or plot but if you have any ideas on what I should do I will hop on it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOkay, thanks for looking into this!\u00A0 Definitely a good effort.\u00A0 The only two forces that should be acting on the vehicle at this point are gravity and thrust.\u00A0 I would first check that the gravitational parameter of Kerbin is the same in LVD and KSP.\u00A0 Next thing I would look at is making sure that the pitch profile is being executed as closely as possible to what\u0027s in LVD.\u00A0 If that doesn\u0027t match, then the thrust vector will be wrong and you\u0027ll see differences.\n\u003C/p\u003E\n"}]}