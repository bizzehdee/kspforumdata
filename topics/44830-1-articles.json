{"TopicId":44830,"ForumId":15,"TopicTitle":"Part not lighting correctly","CreatedByName":"Milkshakefiend","CreatedById":70644,"CreatedDateTime":"2013-09-03T15:17:54Z","PageNum":1,"Articles":[{"CreatedByName":"Milkshakefiend","CreatedById":70644,"CreatedDateTime":"2013-09-03T15:17:54Z","Content":"\n\u003Cp\u003EAfternoon all,\u003C/p\u003E\u003Cp\u003EI\u0027m having a small issue with a part I\u0027ve made - it doesn\u0027t receive lighting correctly. I\u0027ve screenied it below. It includes just the diffuse texture as I was trying to convince myself it was my noob-ish normal maps causing the problem,but evidently not.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/rwRwQV1l.jpg\u0022 alt=\u0022rwRwQV1l.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe tank immediately adjacent to the light receives no light at all, and the tank that does receive light acts as if it is \u0027bulging\u0027 at the middle. The visual and collision mesh are completely flat faces, and initially just 1 face per side. As a bonus problem, it appears that lights can also shine through the tank.\u003C/p\u003E\u003Cp\u003EI have no idea what could cause this so my troubleshooting approach is somewhat \u0027tinker til it works\u0027. Well, tinkering hasn\u0027t worked (unsurprisingly). Here\u0027s what I\u0027ve tried:-\u003C/p\u003E\u003Cp\u003E- Setting shader to diffuse only\u003C/p\u003E\u003Cp\u003E- Checked face and vertex normals in Blender. All fine - and I that I mean they all point outwards, which is what I assume they should do?\u003C/p\u003E\u003Cp\u003E- Subdivided cylinder face of visual and collision mesh from 1 face per side to 2 (I essentially did a loop cut on the x-axis)\u003C/p\u003E\u003Cp\u003E- Re-made the collision and visual meshes\u003C/p\u003E\u003Cp\u003E- Various experimentation with the mesh render object component in Unity\u003C/p\u003E\u003Cp\u003E- I can also see this effect occur after importing the mesh into Unity. If I place a light close to the tank only the top/bottom half of the lit side receives lighting depending on light orientation. This leads me to believe I\u0027ve does something fundamentally wrong in Blender, but I have no idea how I could have messed up a 32-sided cylinder, or more to the point - how to stop it happening with anything else that I make.\u003C/p\u003E\u003Cp\u003EI\u0027m at a loss of what to try next, so any help would be appreciated. Thanks!\u003C/p\u003E\n"},{"CreatedByName":"1001sd","CreatedById":57737,"CreatedDateTime":"2013-09-03T18:52:13Z","Content":"\n\u003Cp\u003EI think I read somewhere that KSP only supports meshes made of triangles. So try making them triangles (select them and press f or alt\u002Bf, I can\u0027t remember). In case they are already triangles, I don\u0027t know what to do.\u003C/p\u003E\n"},{"CreatedByName":"Torminator","CreatedById":78617,"CreatedDateTime":"2013-09-03T19:01:30Z","Content":"\n\u003Cp\u003EI have exported meshes from Blender without converting quads to tris and they\u0027ve shown up/been lighted just fine. \u003C/p\u003E\u003Cp\u003EI honestly have no idea about this issue. The only thing that comes to mind is vertex normals, but you say you checked that. \u003C/p\u003E\u003Cp\u003EHow are you exporting from Blender?\u003C/p\u003E\n"},{"CreatedByName":"Milkshakefiend","CreatedById":70644,"CreatedDateTime":"2013-09-03T19:18:45Z","Content":"\n\u003Cp\u003EThe Quad -\u0026gt; Triangle thing was a good call. Just tested it, but as Torminator says, it doesn\u0027t seem to affect this.\u003C/p\u003E\u003Cp\u003EIn the screenshot below I\u0027ve put a directional light in which better shows the \u0027bulging\u0027 effect. It\u0027s slightly odd seeing a flat object illuminate as you\u0027d expect a curved surface or torus to behave!\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/v1PJrsll.png\u0022 alt=\u0022v1PJrsll.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m not \u0027exporting\u0027 as such - I\u0027m dragging and dropping the .blend file from Explorer into Unity. Should I be using a different filetype?\u003C/p\u003E\u003Cp\u003EEDIT: Apparently I am an idiot and should be exporting. I tried exporting as a .dae then dragging into Unity. The bulging effect is fixed but it still permits light to shine through it.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/jxdipSal.png\u0022 alt=\u0022jxdipSal.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/LptuIm5l.png\u0022 alt=\u0022LptuIm5l.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI thought both problems would be linked but I guess not. 1 problem down, 1 to go!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-03T19:40:43Z\u0022 title=\u002209/03/2013 07:40  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 3, 2013\u003C/time\u003E by Milkshakefiend\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2013-09-03T21:26:58Z","Content":"\n\u003Cp\u003EHave you tried a simple Edge Split modifier, letting the engine automatically figure your surface cuts?\u003C/p\u003E\n"},{"CreatedByName":"Milkshakefiend","CreatedById":70644,"CreatedDateTime":"2013-09-03T23:48:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tiberion\u0022 data-cite=\u0022Tiberion\u0022\u003E\u003Cdiv\u003EHave you tried a simple Edge Split modifier, letting the engine automatically figure your surface cuts?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI hadn\u0027t. I\u0027ve now read about it, and I can see that some of my faces are now split from others, but I don\u0027t really get the purpose of it or why I would use it. You are dealing with an absolutely noob here, so I apologise for my complete lack of understanding!\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2013-09-04T06:16:27Z","Content":"\n\u003Cp\u003EEdge split automatically does what you were trying to do by hand I think, separate each face where their edge angle is greater than a certain amount (which you can adjust before applying) so that lighting is applied to them on an individual basis. In blender, most models need an edge split to appear correctly in Unity/KSPs shading engine.\u003C/p\u003E\u003Cp\u003EWhen you add the modifier, you\u0027ll see the angle setting and 2 check boxes. \u003C/p\u003E\u003Cp\u003EYou can uncheck the angle split mode if you only want it to edge cut on edges you mark as sharp (by using \u0022edge selection mode and Mesh -\u0026gt; Edges -\u0026gt; Mark Sharp in the Edit)mode menu)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/lUDlw2b.png\u0022 alt=\u0022lUDlw2b.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Torminator","CreatedById":78617,"CreatedDateTime":"2013-09-04T07:47:11Z","Content":"\n\u003Cp\u003EI\u0027ll add that it has additional value if you\u0027re using smooth shading (aka, blending vertex normals to reduce the appearance of hard edges), since it allows you to keep certain angles \u0022sharp\u0022 while smoothing others, as Blender will not smooth split edges.\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2013-09-04T10:09:48Z","Content":"\n\u003Cp\u003Eyeah its all related, they\u0027re also referred to as shading groups in Max I think. its basically how you determine which set of faces is treated as one unit to be shaded together. Without an edge split, Blender usually exports things as a single group with smoothing on, which is how you get those silly cylinders appearing to be lit from above improperly.\u003C/p\u003E\n"},{"CreatedByName":"Milkshakefiend","CreatedById":70644,"CreatedDateTime":"2013-09-04T22:06:43Z","Content":"\n\u003Cp\u003EAha! This is very useful! Thanks for the explanation guys. I\u0027ve actually completely re-done the mesh and used an edge-split. I now have quadrants instead of a single unwrapped cylinder face, but lights still shine through the object in Unity. I haven\u0027t exported to KSP for this mesh yet, so I\u0027ll give that a try in a bit and get back.\u003C/p\u003E\n"},{"CreatedByName":"Torminator","CreatedById":78617,"CreatedDateTime":"2013-09-04T23:45:41Z","Content":"\n\u003Cp\u003EI also see a lot of meshes in addons that have blatant over-smoothing. It\u0027s what causes that strange, putty-like look.\u003C/p\u003E\n"},{"CreatedByName":"Milkshakefiend","CreatedById":70644,"CreatedDateTime":"2013-09-05T01:09:40Z","Content":"\n\u003Cp\u003EEt voila. I completely stole the NovaPunch art style, but I figure it\u0027s probably okay if it\u0027s only for my use. All of my rockets obey the Rule of Cool first and foremost, so using an unmatching texture was just unthinkable. That and the orange texture I made earlier looked like someone had filled a sandblaster full of Tang and had at it.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/mR3TPhbl.png\u0022 alt=\u0022mR3TPhbl.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAfter some testing I have found that stock parts also allow lights to shine through them. I\u0027m not really sure how I didn\u0027t notice this before, but I shall quell my lighting pedantry.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Torminator\u0022 data-cite=\u0022Torminator\u0022\u003E\u003Cdiv\u003EI also see a lot of meshes in addons that have blatant over-smoothing. It\u0027s what causes that strange, putty-like look.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAny indications of that in mine? Since being made aware of that edge split and crease tools I\u0027ve found the subsurf modifier is much more controllable and I use it extensively on my high-poly models for normal mapping.\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2013-09-05T02:52:07Z","Content":"\n\u003Cp\u003ELooks good. NP certainly doesn\u0027t own the black and white paint scheme either, so no worries there.\u003C/p\u003E\u003Cp\u003EShading looks spot on, I think you have a handle on it.\u003C/p\u003E\n"}]}