{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":143,"Articles":[{"CreatedByName":"AfailingHORSE","CreatedById":57657,"CreatedDateTime":"2015-10-15T20:11:44Z","Content":"\n\u003Cp\u003Ethanks\u003C/p\u003E\n"},{"CreatedByName":"Parallax","CreatedById":104180,"CreatedDateTime":"2015-10-16T06:11:56Z","Content":"\n\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/ToXUpJ3.jpg\u0022 alt=\u0022ToXUpJ3.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe idea is that its a plane, but instead of landing gear with wheels, it will have cyborg legs and do running takeoffs and landings.\u003C/p\u003E\u003Cp\u003EIm using my own servo sequencer template script to generate the walking part of the script ( [based on an earlier craft i made](\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/126654-Long-Jumping-Bipedal-Robot-%28craft-script-included%29-INFERNAL-ROBOTICS-kOS\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/126654-Long-Jumping-Bipedal-Robot-%28craft-script-included%29-INFERNAL-ROBOTICS-kOS\u003C/a\u003E) ), so that part is done.\u003C/p\u003E\u003Cp\u003Ehowever, i made my template script a while ago and since then forgot how to kOS. here what im stuck on: my walking script relies on controlling from the upward facing control probe and locking heading in the upward direction with SAS; but to fly the plane properly i need to control from the probe core that faces forward and have any SAS commands disabled.\u003C/p\u003E\u003Cp\u003Eright now it can do a running takeoff and flies well enough once i manually switch to the foreward facing probe core, but its impossible to land without the ability to make the switch at exactly the right time...\u003C/p\u003E\u003Cp\u003Ebasically i want to be able to toggle between which of the two probe i \u0022control from\u0022, and apply the appropriate SAS setting for the selected probe. \u003C/p\u003E\u003Cp\u003Eany ideas?\u003C/p\u003E\n"},{"CreatedByName":"Alchemist","CreatedById":8825,"CreatedDateTime":"2015-10-16T07:51:49Z","Content":"\n\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structures/vessels/part.html#attribute:PART:CONTROLFROM\u0022 rel=\u0022external nofollow\u0022\u003EPART:CONTROLFROM\u003C/a\u003E\n"},{"CreatedByName":"baldamundo","CreatedById":138417,"CreatedDateTime":"2015-10-16T08:32:35Z","Content":"\n\u003Cp\u003EHey. Used to use this a bunch way back in 0.90, but am coming back to KSP after a long hiatus and can\u0027t remember anything. Don\u0027t really feel like jumping in right at the deep end with kOS and scripting from scratch so...anyone fancy sharing their scripts for me to reverse engineer? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif\u0022 alt=\u0022:kiss:\u0022\u003E\u003C/p\u003E\u003Cp\u003EEven just launch-to-LKO and node-execution scripts would be really appreciated to get me started! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Qigon","CreatedById":141819,"CreatedDateTime":"2015-10-17T00:52:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022baldamundo\u0022 data-cite=\u0022baldamundo\u0022\u003E\u003Cdiv\u003EHey. Used to use this a bunch way back in 0.90, but am coming back to KSP after a long hiatus and can\u0027t remember anything. Don\u0027t really feel like jumping in right at the deep end with kOS and scripting from scratch so...anyone fancy sharing their scripts for me to reverse engineer? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif\u0022 alt=\u0022:kiss:\u0022\u003E\u003Cp\u003EEven just launch-to-LKO and node-execution scripts would be really appreciated to get me started! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere are a couple of examples here \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/library.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/library.html\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"baldamundo","CreatedById":138417,"CreatedDateTime":"2015-10-17T02:00:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Qigon\u0022 data-cite=\u0022Qigon\u0022\u003E\u003Cdiv\u003EThere are a couple of examples here \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/library.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/library.html\u003C/a\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThese all seem very abstract though, unfortunately. I\u0027d be much better off with something that straightforwardly performs a useful in-game function directly which I can then start using, examining, understanding, retuning, reverse-engineering etc. Trying to put something useful together more from scratch or from these libraries I fear is beyond me right now\u003C/p\u003E\n"},{"CreatedByName":"Parallax","CreatedById":104180,"CreatedDateTime":"2015-10-17T02:37:23Z","Content":"\n\u003Cp\u003Esomething strange is happening. \u003C/p\u003E\u003Cp\u003Eim trying to use an action group to toggle between controlling from the forward facing probe core with SAS off and controlling from the upward facing probe with steering locked upward.\u003C/p\u003E\u003Cp\u003Ei got it to toggle between controlling from the two different probes by doing this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESET UPPROBE TO SHIP:PARTSTAGGED(\u0022UPPROBE\u0022)[0].\u003Cbr\u003ESET FWDPROBE TO SHIP:PARTSTAGGED(\u0022FWDPROBE\u0022)[0].\u003Cbr\u003E\u003Cbr\u003EUNTIL ALTITUDE=20000\u003Cbr\u003E\u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003EIF AG1=1\u003Cbr\u003E\u003Cbr\u003EFWDPROBE:CONTROLFROM.\u003Cbr\u003E\u003Cbr\u003EELSE \u003Cbr\u003E\u003Cbr\u003EUPPROBE:CONTROLFROM.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E}.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ebut when i add the code to set the SAS commands, like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESET UPPROBE TO SHIP:PARTSTAGGED(\u0022UPPROBE\u0022)[0].\u003Cbr\u003ESET FWDPROBE TO SHIP:PARTSTAGGED(\u0022FWDPROBE\u0022)[0].\u003Cbr\u003E\u003Cbr\u003EUNTIL ALTITUDE=20000\u003Cbr\u003E\u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003EIF AG1=1\u003Cbr\u003E\u003Cbr\u003EFWDPROBE:CONTROLFROM.\u003Cbr\u003EUNLOCK STEERING.\u003Cbr\u003E\u003Cbr\u003EELSE \u003Cbr\u003E\u003Cbr\u003EUPPROBE:CONTROLFROM.\u003Cbr\u003ELOCK STEERING TO Up \u002B R(0,0,90).\u003Cbr\u003E\u003Cbr\u003E}.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ei get an error. what gives?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-17T02:40:49Z\u0022 title=\u002210/17/2015 02:40  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 17, 2015\u003C/time\u003E by Parallax\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-10-17T06:48:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Parallax\u0022 data-cite=\u0022Parallax\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Ei get an error. what gives?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E1: Your example code doesn\u0027t use any curly braces around the body of the if and else conditions.\u003C/p\u003E\u003Cp\u003EThis:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif whatever {\u003Cbr\u003E  statement1.\u003Cbr\u003E  statement2.\u003Cbr\u003E}\u003Cbr\u003Eelse {\u003Cbr\u003E  statement3.\u003Cbr\u003E  statement4.\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWorks fine, but when you leave the braces off, it only takes the next single statement as the if body, so it effectively ends up doing this (indentation to show what is and is not the body of the IF:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif whatever\u003Cbr\u003E  statement1.\u003Cbr\u003Estatement2. // The \u0027if\u0027 body was over after statement1.  This statement happens unconditionally.\u003Cbr\u003Eelse // This should give a syntax error because it\u0027s not connected to a preceding \u0022IF\u0022.\u003Cbr\u003E  statement3.\u003Cbr\u003Estatement4.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E2: You mention SAS in your description, but nothing in the code you showed mentioned SAS.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022baldamundo\u0022 data-cite=\u0022baldamundo\u0022\u003E\u003Cdiv\u003EThese all seem very abstract though, unfortunately. I\u0027d be much better off with something that straightforwardly performs a useful in-game function directly which I can then start using, examining, understanding, retuning, reverse-engineering etc. Trying to put something useful together more from scratch or from these libraries I fear is beyond me right now\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou want this: \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/tutorials.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/tutorials.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBeware that the execute node script mentioned there is designed to be easy to understand rather than actually perfectly correct. It does not deal with calculating the fact that your acceleration changes over time as your fuel burns off, and instead it pretends you have constant acceleration when deciding how to time the burn. (It assumes constant acceleration (which is false) and uses that to calculate how long the burn will take, then starts the burn exactly half that much time ahead of the node\u0027s time). A 100% correct maneuver node calculation would use the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Tsiolkovsky_rocket_equation\u0022 rel=\u0022external nofollow\u0022\u003ETsiolkovsky rocket equation\u003C/a\u003E to find out how much time it will take to give the first 1/2 of the delta-V, and start THAT many seconds ahead of time.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-17T06:56:23Z\u0022 title=\u002210/17/2015 06:56  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 17, 2015\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-10-17T18:37:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EBeware that the execute node script mentioned there is designed to be easy to understand rather than actually perfectly correct. It does not deal with calculating the fact that your acceleration changes over time as your fuel burns off, and instead it pretends you have constant acceleration when deciding how to time the burn. (It assumes constant acceleration (which is false) and uses that to calculate how long the burn will take, then starts the burn exactly half that much time ahead of the node\u0027s time). A 100% correct maneuver node calculation would use the \u003Ca href=\u0022https://en.wikipedia.org/wiki/Tsiolkovsky_rocket_equation\u0022 rel=\u0022external nofollow\u0022\u003ETsiolkovsky rocket equation\u003C/a\u003E to find out how much time it will take to give the first 1/2 of the delta-V, and start THAT many seconds ahead of time.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cstrong\u003Ebaldamundo\u003C/strong\u003E You can use \u003Ca href=\u0022https://twitter.com/KSA_MissionCtrl/status/654060317807284224\u0022 rel=\u0022external nofollow\u0022\u003Ethis derivation\u003C/a\u003E I found on the forums a while back. I use it for calculating all my burns since I have a HOTAS joystick that doesn\u0027t trigger KSP\u0027s built-in burn timer. I also use it in my \u003Ca href=\u0022https://github.com/Gaiiden/RCSTC/blob/master/RCSTC.ks#L237\u0022 rel=\u0022external nofollow\u0022\u003ERCS Thrust Controller\u003C/a\u003E script if you want a practical example.\u003C/p\u003E\n"},{"CreatedByName":"Alchemist","CreatedById":8825,"CreatedDateTime":"2015-10-18T21:15:03Z","Content":"\n\u003Cp\u003EIs there an option to see the pitch/yaw/roll of the cooked control (or the actual control applied to the craft after all the sources) from inside the script? For example, to use asymmetrical throttling for more control authority. Or is this the \u0022write your own PID controller\u0022 case?\u003C/p\u003E\n"},{"CreatedByName":"Qigon","CreatedById":141819,"CreatedDateTime":"2015-10-19T17:50:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022baldamundo\u0022 data-cite=\u0022baldamundo\u0022\u003E\u003Cdiv\u003EThese all seem very abstract though, unfortunately. I\u0027d be much better off with something that straightforwardly performs a useful in-game function directly which I can then start using, examining, understanding, retuning, reverse-engineering etc. Trying to put something useful together more from scratch or from these libraries I fear is beyond me right now\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI guess that by function you mean as in in-game behaviour, not as in programming language\u0027s methods?\u003C/p\u003E\u003Cp\u003EThere are these tutorials: \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/tutorials/quickstart.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/tutorials/quickstart.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThere\u0027s also this twitch from dunbaratu \u003Ca href=\u0022http://www.twitch.tv/dunbaratu/v/8888071\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.twitch.tv/dunbaratu/v/8888071\u003C/a\u003E where he writes an airplane autopilot from scratch, it\u0027s very cool AND useful. Do twitches expire? that would be sad. I can\u0027t get into this link right now, I\u0027m not sure whether it\u0027s the twitch or my connection that went rogue.\u003C/p\u003E\u003Cp\u003Eedit:\u003C/p\u003E\u003Cp\u003Eoh, I see Steve beat me to it. By like, 2 days \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-19T17:54:36Z\u0022 title=\u002210/19/2015 05:54  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 19, 2015\u003C/time\u003E by Qigon\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-10-21T01:47:13Z","Content":"\n\u003Cp\u003EAnyone have advice on calculating distance traveled? Mainly from launch to orbit. Persistent Trails does this but not with the granularity I want, and the ability to log it every second. Dealing with acceleration during ascent is the part I\u0027m having trouble with mostly\u003C/p\u003E\n"},{"CreatedByName":"gruneisen","CreatedById":119794,"CreatedDateTime":"2015-10-21T05:12:32Z","Content":"\n\u003Cp\u003EI\u0027m having an issue where when I invoke LOCK STEERING TO HEADING(X,Y), all of the controls oscillate rapidly and the rocket will not respond or change course - I\u0027m using a rocket that has no SAS, RCS, or engine gimbal - only ailerons. Is this the reason why LOCK STEERING will not control the rocket?\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Reddy\u0022 data-cite=\u0022Reddy\u0022\u003E\u003Cdiv\u003EI\u0027m not familiar with github, so I\u0027ll post it here hoping you guys read it.\u003Cp\u003EIn relation to my previously submitted issue (\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/389\u0022 rel=\u0022external nofollow\u0022\u003E#389\u003C/a\u003E, \u003Cem\u003ELOCK STEERING broken for RCS-only (no torque) ships\u003C/em\u003E), and the related fix attempt (\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/pull/1118\u0022 rel=\u0022external nofollow\u0022\u003E#1118\u003C/a\u003E, github user \u003Cstrong\u003Ehvacengi\u003C/strong\u003E is committing there). At the latest KSP/kOS version my RCS-only craft responded to LOCK command properly and aligned itself onto a given heading. But my gimbal-only (no reaction wheels, no RCS) craft ended up \u003Cem\u003Eexactly\u003C/em\u003E the same as \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/68089-1-0-4-kOS-Scriptable-Autopilot-System-v0-17-3-2015-6-27?p=1548099#post1548099\u0022 rel=\u0022external nofollow\u0022\u003Ethe other one\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EReproduction steps include building a craft that only has a non-torque probe core, kOS computer, fuel tank and gimbal-equipped engine and launching it under gravity hack. Inputting a LOCK STEERING command into the terminal makes the gimbal wobble like in the video for the previous issue, which I linked above.\u003C/p\u003E\u003Cp\u003ENot sure if hvacengi\u0027s solution is going to be a major rework of the cooked control system that would solve that case too, in any case I\u0027m letting you know about the issue.\u003C/p\u003E\u003Cp\u003EI recently started a RSS/RO save and attempted to write kind of a real-life autopilot using Powered Explicit Guidance algorithm, but I never had the patience to do PID tuning, so I\u0027d rather be able to use cooked control than try to align the craft on the pilot input mode \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI went back into Reddy\u0027s linked issues and his YouTube video seems to show the same problem I\u0027m having, so I guess this makes two of us. I too am using RSS / RO, which is why I have no RCS and no SAS on my rocket.\u003C/p\u003E\u003Cp\u003EThanks again for any help.\u003C/p\u003E\u003Cp\u003EEdit again: further looking into Reddy\u0027s post and the linked issues on github show that my issue is the same as all the rest. I retract my questions and will await the updated release.\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-21T05:48:24Z\u0022 title=\u002210/21/2015 05:48  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 21, 2015\u003C/time\u003E by gruneisen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"gruneisen","CreatedById":119794,"CreatedDateTime":"2015-10-22T23:16:26Z","Content":"\n\u003Cp\u003EOk - so you guys are probably tired of me bleating about on this forum, but I\u0027m new to kOS and am trying to use it to perform an ascent profile for a Mercury Redstone launch. Seeing as the Mercury Redstone only used four small aelerons for attitude control in the atmosphere, I cannot use the kOS cooked steering controls for this launch.\u003C/p\u003E\u003Cp\u003EI know that the capability is being added in (and has already been done so), but while I wait for the next dev or release build, I\u0027m attempting to create my own autopilot script for this launch.\u003C/p\u003E\u003Cp\u003EI\u0027m having a hard time figuring out where to begin - I\u0027ve been through the tutorials and understand them, but I\u0027m still having trouble figuring out how to control the orientation of the rocket.\u003C/p\u003E\u003Cp\u003EI\u0027m determining my current orientation by using setting three variables to ship:facing:yaw, :pitch, and :roll. I then treat those values as my control value with the assumption that my rocket is going to ascend vertically. In my loop, I re-read the ship:facing:pitch, :yaw, and :roll, compare them to my control values, and assign the resultant error to ship:control:pitch, etc. I\u0027m just using a simple proportional gain right now. \u003C/p\u003E\u003Cp\u003EIs this nominally correct or even a good way of doing this? Is there some other way of determining the rockets orientation and controlling it which may be more appropriate?\u003C/p\u003E\u003Cp\u003EThanks in advance and if there\u0027s an answer already out there to this question, please kindly point me towards it!\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-10-22T23:55:12Z","Content":"\n\u003Cp\u003ETrying to control all three axes at the same time can get really wonky. You usually get better performance if you limit it to just two of them at first, and only allow it to work on the third after the first two are kinda close to right.\u003C/p\u003E\n"},{"CreatedByName":"gruneisen","CreatedById":119794,"CreatedDateTime":"2015-10-23T02:09:01Z","Content":"\n\u003Cp\u003EThanks Steven - \u003C/p\u003E\u003Cp\u003ECan you comment on whether it is better to control based on the absolute pitch, yaw, and roll relative the celestial body, as I am doing, or to use the \u0027navball\u0027 quantities which can be provided by the lib_navball.ks library?\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"AfailingHORSE","CreatedById":57657,"CreatedDateTime":"2015-10-23T04:10:04Z","Content":"\n\u003Cp\u003EI\u0027m trying to stage 4 of my 6 SRBs, im trying to use the tag system and the documentation site for it isnt exactly helpful on this subject.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET solidStage TO SHIP:PARTSDUBBED(\u0022SSAB\u0022). //Outside 4 SRBs\u003Cbr\u003ESET solidStage TO SHIP:PARTSDUBBED(\u0022SSC\u0022). //Inside 2 SRBs\u003Cbr\u003E\u003Cbr\u003E........\u003Cbr\u003E\u003Cbr\u003EFOR solidStage IN SHIP:PARTSDUBBED(\u0022SSAB\u0022) {\u003Cbr\u003E\tWAIT UNTIL SHIP:SOLIDFUEL \u0026lt; 45.\u003Cbr\u003E\t\tPRINT \u0022STAGE TEN SEPERATION IN:\u0022.\u003Cbr\u003E\t\tFROM {local countdown is 3.} UNTIL countdown = 0 STEP {SET countdown to countdown -1.} DO {\u003Cbr\u003E\t\t\tPRINT \u0022...\u0022 \u002B countdown.\u003Cbr\u003E\t\t\tWAIT 1.\u003Cbr\u003E\t\t\tIF countdown = 2 {\u003Cbr\u003E\t\t\t\tAG5 ON.\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tIF countdown = 1 {\u003Cbr\u003E\t\t\t\tSTAGE.\u003Cbr\u003E\t\t\t\tPRINT \u0022Stage ten separated.\u0022.\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EFOR solidStage IN SHIP:PARTSDUBBED(\u0022SSC\u0022) {\u003Cbr\u003E\tWAIT UNTIL STAGE:SOLIDFUEL \u0026lt; 45.\u003Cbr\u003E\t\tPRINT \u0022STAGE NINE SEPERATION IN:\u0022.\u003Cbr\u003E\t\tFROM {local countdown is 3.} UNTIL countdown = 0 STEP {SET countdown to countdown -1.} DO {\u003Cbr\u003E\t\t\tPRINT \u0022...\u0022 \u002B countdown.\u003Cbr\u003E\t\t\tWAIT 1.\u003Cbr\u003E\t\t\tIF countdown = 2 {\u003Cbr\u003E\t\t\t\tAG5 ON.\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tIF countdown = 1 {\u003Cbr\u003E\t\t\t\tSTAGE.\u003Cbr\u003E\t\t\t\tPRINT \u0022Stage nine separated.\u0022.\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-10-23T06:21:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022gruneisen\u0022 data-cite=\u0022gruneisen\u0022\u003E\u003Cdiv\u003EThanks Steven - \u003Cp\u003ECan you comment on whether it is better to control based on the absolute pitch, yaw, and roll relative the celestial body, as I am doing, or to use the \u0027navball\u0027 quantities which can be provided by the lib_navball.ks library?\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDefinitely lib_navball, because otherwise your control value is probably in a different rotation scheme than the native raw one. \u0022pitch\u0022, \u0022yaw\u0022, and \u0022roll\u0022 don\u0027t really mean pitch, yaw, and roll. I HATE those terms but they pre-date me and were in the mod from the beginning, making it rather breaking of backward compatibility to rename them now. They actually mean just Euler rotation angles around the x,y, and z axes respectively, and those axes in the native coord system have nothing to do with how your ship is pointed or how the planet is oriented, therefore the names are misleading.\u003C/p\u003E\u003Cp\u003EIf you haven\u0027t done so already, take the time to watch this, as it gets into the XYZ axes of native KSP and how they look. Not understanding this will really mess up any script you write:\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/7byYiZZBBVc?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AfailingHORSE\u0022 data-cite=\u0022AfailingHORSE\u0022\u003E\u003Cdiv\u003EI\u0027m trying to stage 4 of my 6 SRBs, im trying to use the tag system and the documentation site for it isnt exactly helpful on this subject.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYour first one says to wait until SHIP\u0027s solidfuel is \u0026lt; 45, and the second one says to wait until the single STAGE\u0027s solidfuel is \u0026lt; 45.\u003C/p\u003E\u003Cp\u003EBy the time the entire ship\u0027s solidfuel is \u0026lt; 45, it\u0027s impossible for any single stage to have more than 45 in it, so you\u0027ll get both these things firing back to back. By the time the first condition is true, the second one has to already be true too.\u003C/p\u003E\n"},{"CreatedByName":"AfailingHORSE","CreatedById":57657,"CreatedDateTime":"2015-10-23T14:20:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EYour first one says to wait until SHIP\u0027s solidfuel is \u0026lt; 45, and the second one says to wait until the single STAGE\u0027s solidfuel is \u0026lt; 45.\u003C/p\u003E\u003Cp\u003EBy the time the entire ship\u0027s solidfuel is \u0026lt; 45, it\u0027s impossible for any single stage to have more than 45 in it, so you\u0027ll get both these things firing back to back. By the time the first condition is true, the second one has to already be true too.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe ship\u0027s solid fuel was from a test that I forgot to change back to stage. But that is besides the point.\u003C/p\u003E\u003Cp\u003EAll six SRBs fire on the same stage, the outer 4 will run out of fuel first and I want them to drop first. However, for code modularity reasons, I want the stage when there is a specific amount of fuel left in those engines (in this case, 45 or less).\u003C/p\u003E\u003Cp\u003EWhat is currently happening is that the outer 4 will hit 0 fuel, do nothing, and then when the inner 2 hit 44.999, the outer 4 stage and it loops the first FOR loop until it hits the 7th stage (see picture below).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/B2hqH5N.png\u0022 alt=\u0022B2hqH5N.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe outer 4 engines are tagged SSAB and the inner 2 are tagged SSC.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET solidStage TO SHIP:PARTSDUBBED(\u0022SSAB\u0022). //Outside 4 SRBs\u003Cbr\u003ESET solidStage TO SHIP:PARTSDUBBED(\u0022SSC\u0022). //Inside 2 SRBs\u003Cbr\u003E\u003Cbr\u003E........\u003Cbr\u003E\u003Cbr\u003EFOR solidStage IN SHIP:PARTSDUBBED(\u0022SSAB\u0022) {\u003Cbr\u003E\tWAIT UNTIL STAGE:SOLIDFUEL \u0026lt; 45.\u003Cbr\u003E\t\tPRINT \u0022STAGE TEN SEPERATION IN:\u0022.\u003Cbr\u003E\t\tFROM {local countdown is 3.} UNTIL countdown = 0 STEP {SET countdown to countdown -1.} DO {\u003Cbr\u003E\t\t\tPRINT \u0022...\u0022 \u002B countdown.\u003Cbr\u003E\t\t\tWAIT 1.\u003Cbr\u003E\t\t\tIF countdown = 2 {\u003Cbr\u003E\t\t\t\tAG5 ON.\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tIF countdown = 1 {\u003Cbr\u003E\t\t\t\tSTAGE.\u003Cbr\u003E\t\t\t\tPRINT \u0022Stage ten separated.\u0022.\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EFOR solidStage IN SHIP:PARTSDUBBED(\u0022SSC\u0022) {\u003Cbr\u003E\tWAIT UNTIL STAGE:SOLIDFUEL \u0026lt; 45.\u003Cbr\u003E\t\tPRINT \u0022STAGE NINE SEPERATION IN:\u0022.\u003Cbr\u003E\t\tFROM {local countdown is 3.} UNTIL countdown = 0 STEP {SET countdown to countdown -1.} DO {\u003Cbr\u003E\t\t\tPRINT \u0022...\u0022 \u002B countdown.\u003Cbr\u003E\t\t\tWAIT 1.\u003Cbr\u003E\t\t\tIF countdown = 2 {\u003Cbr\u003E\t\t\t\tAG5 ON.\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tIF countdown = 1 {\u003Cbr\u003E\t\t\t\tSTAGE.\u003Cbr\u003E\t\t\t\tPRINT \u0022Stage nine separated.\u0022.\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Lookerksy","CreatedById":117170,"CreatedDateTime":"2015-10-23T15:04:03Z","Content":"\n\u003Cp\u003EFour question:\u003C/p\u003E\u003Cp\u003E1. How to use the keywords \u0022batch\u0022 and \u0022deploy\u0022?\u003C/p\u003E\u003Cp\u003E2. I can\u0027t understand what\u0027s math function ROUND(a, \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E meaning.\u003C/p\u003E\u003Cp\u003E3. If I SET SASMode TO StabilityAssist (or Stability) in kOS. What will happen?\u003C/p\u003E\u003Cp\u003E4. The online manual(\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/\u003C/a\u003E) says:\u003C/p\u003E\u003Cp\u003EIf a vessel without antenna is more than 100km far from mission control center, the Volume 0 can\u0027t be visited from the vessel.\u003C/p\u003E\u003Cp\u003EBut when my vessel was near 500km orbit I still successed to do anything of Volume 0. What\u0027s matter?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-10-23T15:54:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AfailingHORSE\u0022 data-cite=\u0022AfailingHORSE\u0022\u003E\u003Cdiv\u003EThe ship\u0027s solid fuel was from a test that I forgot to change back to stage. But that is besides the point.\u003Cp\u003EAll six SRBs fire on the same stage, the outer 4 will run out of fuel first and I want them to drop first. However, for code modularity reasons, I want the stage when there is a specific amount of fuel left in those engines (in this case, 45 or less).\u003C/p\u003E\u003Cp\u003EWhat is currently happening is that the outer 4 will hit 0 fuel, do nothing, and then when the inner 2 hit 44.999, the outer 4 stage and it loops the first FOR loop until it hits the 7th stage (see picture below).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf all 6 engines are running, then the fuel for all 6 engines are summed together to form stage:solidfuel. The definition of the current stage values is the sum of all the resources available to all currently active engines.\u003C/p\u003E\u003Cp\u003EYou\u0027re better off just checking the status of the engines to see which ones have the :FLAMEOUT suffix being true, rather than counting fuel. That\u0027s more universal anyway.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lookerksy\u0022 data-cite=\u0022Lookerksy\u0022\u003E\u003Cdiv\u003EFour question:\u003Cp\u003E1. How to use the keywords \u0022batch\u0022 and \u0022deploy\u0022?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo clue. They got added to the code base by someone else, and we\u0027ve removed them because they literally did nothing.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E2. I can\u0027t understand what\u0027s math function ROUND(a, \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E meaning.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EReturn the value a, but rounded such that it has only b digits after the decimal point. Round(123.45678, 0) gives you 123. Round(123.45678, 2) gives you 123.46. Round(123.45678, 3) gives you 123.457.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E3. If I SET SASMode TO StabilityAssist (or Stability) in kOS. What will happen?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot really well defined when the autopilot is running things, as that\u0027s the mode that just dampens what the manual player does.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E4. The online manual(\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/\u003C/a\u003E) says:\u003C/p\u003E\u003Cp\u003EIf a vessel without antenna is more than 100km far from mission control center, the Volume 0 can\u0027t be visited from the vessel.\u003C/p\u003E\u003Cp\u003EBut when my vessel was near 500km orbit I still successed to do anything of Volume 0. What\u0027s matter?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s an obsolete description that\u0027s getting removed in the next release of the docs. It refers to what kOS used to do before it linked up with Remote Tech. Now if you don\u0027t install Remote Tech, you get no restrictions based on range at all. If you do install Remote Tech, then Remote Tech is in charge of deciding what counts as connected, and kOS just asks Remote Tech to tell it what the connectivity is.\u003C/p\u003E\n"},{"CreatedByName":"casper88","CreatedById":144962,"CreatedDateTime":"2015-10-27T11:12:28Z","Content":"\n\u003Cp\u003EDoes anybody know if kos can read waypoints created in waypoint manger (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/104758)?\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/104758)?\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Ei have a simple test script \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset test to ALLWAYPOINTS().\u003Cbr\u003Eset count to 0.\u003Cbr\u003EFOR wp in test {\u003Cbr\u003E    print wp:GEOPOSITION.\u003Cbr\u003E    set count to count \u002B 1.\u003Cbr\u003E}\u003Cbr\u003Eprint count.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ei run this after creating a waypoint; howvever the count at the end prints 0. Have I overlooked something or can\u0027t these waypoints be cycled?\u003C/p\u003E\u003Cp\u003EThanks\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-10-27T13:26:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022casper88\u0022 data-cite=\u0022casper88\u0022\u003E\u003Cdiv\u003EDoes anybody know if kos can read waypoints created in waypoint manger (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/104758)?\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/104758)?\u003C/a\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA the moment it\u0027s only finding waypoints by looking at the contracts system like it works in stock. I have no idea how the mod lists its non-contract waypoints. I could try to find out.\u003C/p\u003E\n"},{"CreatedByName":"Li_Cho","CreatedById":152796,"CreatedDateTime":"2015-10-27T17:02:03Z","Content":"\n\u003Cp\u003Euse manual set...\u003C/p\u003E\u003Cp\u003Eset spot to latlng(0,-285). //\u003C/p\u003E\n"},{"CreatedByName":"Cakeofruit","CreatedById":73238,"CreatedDateTime":"2015-10-28T20:33:02Z","Content":"\n\u003Cp\u003EI\u0027ve write a SSTO ascent script, tell me what you think about it \u003C/p\u003E\u003Cp\u003Elink : \u003Ca href=\u0022https://github.com/Cakeofruit/Kos.PlaneToOrbit\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Cakeofruit/Kos.PlaneToOrbit\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe real deal are in this file : \u003Ca href=\u0022https://github.com/Cakeofruit/Kos.PlaneToOrbit/blob/master/sp_guidance.ks\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Cakeofruit/Kos.PlaneToOrbit/blob/master/sp_guidance.ks\u003C/a\u003E\u003C/p\u003E\n"}]}