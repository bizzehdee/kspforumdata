{"TopicId":191862,"ForumId":16,"TopicTitle":"Eliminating station docking port lag","CreatedByName":"Fraktal","CreatedById":184990,"CreatedDateTime":"2020-02-23T00:47:34Z","PageNum":1,"Articles":[{"CreatedByName":"Fraktal","CreatedById":184990,"CreatedDateTime":"2020-02-23T00:47:34Z","Content":"\n\u003Cp\u003E\nI\u0027ve heard that a major part of why my space station lags is due to every single exposed docking port polling the distance of every other docking port within physics range on every physics tick. Considering that my station currently has around 7 exposed ports (it\u0027s currently in the middle of a refit from junior ports to standard ports), that\u0027s about 42 checks per tick.\n\u003C/p\u003E\n\u003Cp\u003E\nIf I were to plug in the unused ports with a matching-size docking ring and a nosecone, can I expect any noticeable decrease in lag? Or is the average station\u0027s part count too high to notice the difference?\n\u003C/p\u003E\n"},{"CreatedByName":"XLjedi","CreatedById":175658,"CreatedDateTime":"2020-02-23T03:19:15Z","Content":"\n\u003Cp\u003E\nFirst I\u0027ve heard of lag related to exposed docking ports.\u00A0 But sounds interesting...\u00A0 I will watch.\n\u003C/p\u003E\n"},{"CreatedByName":"Geonovast","CreatedById":179753,"CreatedDateTime":"2020-02-23T05:14:08Z","Content":"\n\u003Cp\u003E\nI\u0027ve heard about this, and I believe it\u0027s why the shielded docking port is a thing.\u00A0 If you use shielded ports instead of the normal ones, and just open them when you want to dock something to them, it shouldn\u0027t be constantly asking if there\u0027s something in range on the unused ports.\n\u003C/p\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-02-23T10:02:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223745665\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582418854\u0022 data-ipsquote-userid=\u0022184990\u0022 data-ipsquote-username=\u0022Fraktal\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Fraktal said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf I were to plug in the unused ports with a matching-size docking ring and a nosecone, can I expect any noticeable decrease in lag? Or is the average station\u0027s part count too high to notice the difference?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t know. Why don\u0027t you give it a try and let us know about the results?\u003Cbr\u003E\n(Then I don\u0027t have to do it myself.\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E)\n\u003C/p\u003E\n"},{"CreatedByName":"XLjedi","CreatedById":175658,"CreatedDateTime":"2020-02-23T12:26:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223745748\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582434848\u0022 data-ipsquote-userid=\u0022179753\u0022 data-ipsquote-username=\u0022Geonovast\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Geonovast said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve heard about this, and I believe it\u0027s why the shielded docking port is a thing.\u00A0 If you use shielded ports instead of the normal ones, and just open them when you want to dock something to them, it shouldn\u0027t be constantly asking if there\u0027s something in range on the unused ports.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo shielded ports for the big docking ports though.\u00A0 This will now influence my latest modular station design in an attempt to minimize this issue.\n\u003C/p\u003E\n"},{"CreatedByName":"Fraktal","CreatedById":184990,"CreatedDateTime":"2020-02-23T15:55:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223745710\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582427955\u0022 data-ipsquote-userid=\u0022175658\u0022 data-ipsquote-username=\u0022XLjedi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, XLjedi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFirst I\u0027ve heard of lag related to exposed docking ports.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0026amp;do=hovercard\u0022 data-mentionid=\u002297386\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0022 rel=\u0022\u0022\u003E@Padishar\u003C/a\u003E\u00A0posted this back in 2016:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:#ffffff;color:#353c41;font-size:14px;\u0022\u003ENo \u0022if\u0022 about it, on every physics update every non-acquired docking port searches all the parts within the physics bubble for docking ports until it finds one that is within the activation range. \u00A0So the performance impact is at least proportional to the number of docking ports multiplied by the total number of parts in the loaded vessels. \u00A0For example, the station in my avatar is 1410 parts of which, 120 are docked ports holding it all together, and 24 are vacant senior ports. \u00A0Nearly 9% of the total CPU time is spent in ModuleDockingNode.FixedUpdate (and another 22\u002B% shuffling EC around the Vessel from the 360 solar panels and 42 probe cores). \u00A0Eliminating (or greatly reducing) these two parts could increase the framerate by nearly 50%...\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEach additional port in physics range increases the number of checks per physics update exponentially.\n\u003C/p\u003E\n"},{"CreatedByName":"XLjedi","CreatedById":175658,"CreatedDateTime":"2020-02-23T15:59:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223745971\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582473344\u0022 data-ipsquote-userid=\u0022184990\u0022 data-ipsquote-username=\u0022Fraktal\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Fraktal said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0026amp;do=hovercard\u0022 data-mentionid=\u002297386\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0022 rel=\u0022\u0022\u003E@Padishar\u003C/a\u003E\u00A0posted this back in 2016:\n\u003C/p\u003E\n\u003Cp\u003E\nEach additional port in physics range increases the number of checks per physics update exponentially.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWonder if any of that was negated with time due to station Primary Active Port designation logic being added?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Geonovast","CreatedById":179753,"CreatedDateTime":"2020-02-23T16:47:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223745972\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582473549\u0022 data-ipsquote-userid=\u0022175658\u0022 data-ipsquote-username=\u0022XLjedi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n45 minutes ago, XLjedi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWonder if any of that was negated with time due to station Primary Active Port designation logic being added?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI doubt it, since you can still dock to ports that aren\u0027t primary.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat would help, though, would be a \u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E option to disable ports... essentially doing what the shielded port does, just without a fancy animation.\u00A0 Maybe put some small indicator lights on the model to that green = active, red = inactive so you don\u0027t have to click on the port every time to see if it\u0027s enabled.\n\u003C/p\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-02-23T16:48:02Z","Content":"\n\u003Cp\u003E\nO.K. I just did a quick test with a dummy craft with 288 shielded docking ports (out of 295 parts in total). There is indeed serious lag when all those shields are open, compared to when they are closed.\n\u003C/p\u003E\n\u003Cp\u003E\nAnother test: similar craft but with 288 normal clamp-o-trons covered with a nose cone each (583 parts in total) -\u0026gt; the time display flickers green and yellow, and 10 in-game seconds took 10.32 seconds real time (timed manually on a stopwatch(-app on my phone))\u003Cbr\u003E\nSame craft but without the nose cones (so 295 parts in total) -\u0026gt; the time display is a steady yellow, and 10 in-game seconds took 28.92 seconds real time (Well, a bit less. I got bored. \u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E)\n\u003C/p\u003E\n\u003Cp\u003E\nSo, yes. There definitely is an effect!\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\u003Cbr\u003E\nAnother test with a craft with 8 docking ports (uncovered or covered with a nose cone) and enough fuel tanks to bring the total number of parts up to 885 resp. 877 parts showed\u00A0 no significant difference in the lag between the two craft...\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-02-23T17:16:24Z\u0022 title=\u002202/23/2020 05:16  PM\u0022 data-short=\u00224 yr\u0022\u003EFebruary 23, 2020\u003C/time\u003E by AHHans\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2020-02-23T17:19:29Z","Content":"\n\u003Cp\u003E\nJust wanted to pop in and say:\n\u003C/p\u003E\n\u003Cp\u003E\nYes, this is a real thing.\u00A0 This has been experimented and measured multiple times, by different people and groups.\u00A0 The finding is always:\u00A0 More \u0027open\u0027 docking ports = higher CPU usage during their internal updates.\n\u003C/p\u003E\n\u003Cp\u003E\nPretty much exactly as explained by \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0026amp;do=hovercard\u0022 data-mentionid=\u002297386\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0022 rel=\u0022\u0022\u003E@Padishar\u003C/a\u003E in the quote above.\u00A0 Him, myself, and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129319-riocrokite/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129319\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129319-riocrokite/\u0022 rel=\u0022\u0022\u003E@riocrokite\u003C/a\u003E all spent considerable time trying to find the source of stock \u0027part-count\u0027 induced performance degredation, and the exposed docking ports was one of the worst offenders by a large margin.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2020-02-23T17:23:42Z","Content":"\n\u003Cp\u003E\nIt seems that a way to deactivate a docking port at will might be useful\n\u003C/p\u003E\n"},{"CreatedByName":"Fraktal","CreatedById":184990,"CreatedDateTime":"2020-02-23T17:24:45Z","Content":"\n\u003Cp\u003E\nAlright, let\u0027s do this by the numbers.\n\u003C/p\u003E\n\u003Cp\u003E\nLaptop hardware:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nCPU: Celeron N3450, 1.1 GHz quad-core\n\u003C/li\u003E\n\u003Cli\u003E\nRAM: 12 GB\n\u003C/li\u003E\n\u003Cli\u003E\nVGA: GeForce 920MX\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nNot very good, I know, but not everyone has the cash for a supercomputer.\n\u003C/p\u003E\n\u003Cp\u003E\nKSP is the newest Steam version plus Making History.\n\u003C/p\u003E\n\u003Cp\u003E\nMods installed (omitting some that are not relevant):\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n[x] Science!\n\u003C/li\u003E\n\u003Cli\u003E\n6 Crew Science Lab\n\u003C/li\u003E\n\u003Cli\u003E\n6 Seat Mk3 Cockpit\n\u003C/li\u003E\n\u003Cli\u003E\nAECS Motion Suppressor\n\u003C/li\u003E\n\u003Cli\u003E\nAlternate Resource Panel\n\u003C/li\u003E\n\u003Cli\u003E\nAntenna Helper\n\u003C/li\u003E\n\u003Cli\u003E\nAttitude Adjuster\n\u003C/li\u003E\n\u003Cli\u003E\nAuto Actions\n\u003C/li\u003E\n\u003Cli\u003E\nChatterer\n\u003C/li\u003E\n\u003Cli\u003E\nClick Through Blocker\n\u003C/li\u003E\n\u003Cli\u003E\nCorrect \u003Cabbr title=\u0022Center of Lift\u0022\u003ECoL\u003C/abbr\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nCrew Light\n\u003C/li\u003E\n\u003Cli\u003E\nDistant Object Enhancement\n\u003C/li\u003E\n\u003Cli\u003E\nDock Rotate\n\u003C/li\u003E\n\u003Cli\u003E\nDocking Port Alignment Indicator\n\u003C/li\u003E\n\u003Cli\u003E\nEditor Extensions\n\u003C/li\u003E\n\u003Cli\u003E\nEngine Lighting\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nKISS\n\u003C/li\u003E\n\u003Cli\u003E\nManeuver Node Evolved\n\u003C/li\u003E\n\u003Cli\u003E\nModular Flight Integrator\n\u003C/li\u003E\n\u003Cli\u003E\nQuick Revert\n\u003C/li\u003E\n\u003Cli\u003E\nReCoupler\n\u003C/li\u003E\n\u003Cli\u003E\nScience Relay\n\u003C/li\u003E\n\u003Cli\u003E\nunBlur\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nThe station in question:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022rcBWsm4.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002256.25\u0022 height=\u0022576\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/rcBWsm4.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nTotal part count is 214. Three Junior and four regular-sized docking ports are currently unused. Steam overlay says I\u0027m running at 11 FPS.\n\u003C/p\u003E\n\u003Cp\u003E\nStuff I\u0027m using to plug the open ports:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00222wIRu2P.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002256.25\u0022 height=\u0022576\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/2wIRu2P.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nCheating it up to the station, I\u0027m getting 14 FPS at the start of the approach, drops to 13 FPS within 20 meters.\n\u003C/p\u003E\n\u003Cp\u003E\nOnce all ports are plugged in and the stack separators cleaned up in the Tracking Station, I\u0027m still getting 11 FPS with occasional spikes to 12 FPS. So the conclusion seems to be that unless you have an absurd number of docking ports, the difference in performance is negligible. In fact, I seem to lose more FPS from the station\u0027s self-shadow\u00A0than from the docking ports being open.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-02-23T17:51:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223746020\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582478685\u0022 data-ipsquote-userid=\u0022184990\u0022 data-ipsquote-username=\u0022Fraktal\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 minutes ago, Fraktal said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo the conclusion seems to be that unless you have an absurd number of docking ports, the difference in performance is negligible.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s also the impression that I have from my tests. Yes, there is an effect. But if you only have a reasonable number of docking ports then this effect isn\u0027t so serious.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd from a programmers point of view: I can well imagine that in an older version of the game each docking port tested every part within physics range, but that at some point a dedicated list of docking ports was introduced so that now only that list needs to be searched.\n\u003C/p\u003E\n"},{"CreatedByName":"XLjedi","CreatedById":175658,"CreatedDateTime":"2020-02-23T18:55:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223746032\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582480306\u0022 data-ipsquote-userid=\u0022197939\u0022 data-ipsquote-username=\u0022AHHans\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n55 minutes ago, AHHans said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat\u0027s also the impression that I have from my tests. Yes, there is an effect. But if you only have a reasonable number of docking ports then this effect isn\u0027t so serious.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd from a programmers point of view: I can well imagine that in an older version of the game each docking port tested every part within physics range, but that at some point a dedicated list of docking ports was introduced so that now only that list needs to be searched.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI guess depends on what point the number becomes absurd?\u00A0 In the design of my OASys Station I plan to have at least 19 large open ports.\u00A0 I have fewer of the mid-size ports and guess I can convert all those (except for a couple of the really small ones) to the closeable variety.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-02-23T18:56:03Z\u0022 title=\u002202/23/2020 06:56  PM\u0022 data-short=\u00224 yr\u0022\u003EFebruary 23, 2020\u003C/time\u003E by XLjedi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-02-23T19:32:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223746074\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582484145\u0022 data-ipsquote-userid=\u0022175658\u0022 data-ipsquote-username=\u0022XLjedi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 minutes ago, XLjedi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI guess depends on what point the number becomes absurd?\u00A0 In the design of my OASys Station I plan to have at least 19 large open ports.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, my guess is that with 19 open ports (and a few hundred parts in total) you can measure a difference between having the ports open or not. If you actually notice the difference in normal gameplay is another question. Although now that I re-read your message, 19 senior-sized ports plus a comparable number of normal and junior-sized ports is at least at the edge of what I consider \u0022reasonable\u0022. The biggest station that I built has 8 normal docking ports, 4 junior-sized ports, and 5 senior-sized ports open and 13 more senior-sized ports that are attached to something. (And it is already pretty laggy, but it is also the biggest - in size, weight, and part count - object I built.)\n\u003C/p\u003E\n\u003Cp\u003E\nAs you can see from my test, 288 open docking ports is clearly on the absurd side of the scale. \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"XLjedi","CreatedById":175658,"CreatedDateTime":"2020-02-23T19:41:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223746090\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582486349\u0022 data-ipsquote-userid=\u0022197939\u0022 data-ipsquote-username=\u0022AHHans\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, AHHans said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWell, my guess is that with 19 open ports (and a few hundred parts in total) you can measure a difference between having the ports open or not. If you actually notice the difference in normal gameplay is another question. Although now that I re-read your message, 19 senior-sized ports plus a comparable number of normal and junior-sized ports is at least at the edge of what I consider \u0022reasonable\u0022. The biggest station that I built has 8 normal docking ports, 4 junior-sized ports, and 5 senior-sized ports open and 13 more senior-sized ports that are attached to something. (And it is already pretty laggy, but it is also the biggest - in size, weight, and part count - object I built.)\n\u003C/p\u003E\n\u003Cp\u003E\nAs you can see from my test, 288 open docking ports is clearly on the absurd side of the scale. \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI optimized it a bit, I\u0027m now at:\n\u003C/p\u003E\n\u003Cp\u003E\n17 large open ports\u00A0 (it\u0027s my primary storage and transfer hub)\n\u003C/p\u003E\n\u003Cp\u003E\nAll of the mid-size ports have been capped using the shielded part instead.\n\u003C/p\u003E\n\u003Cp\u003E\n6 of the small ports. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo, I\u0027m at 23 open ports right now before bringing in a large craft or two with additional open ports.\n\u003C/p\u003E\n\u003Cp\u003E\nI guess as supplies are offloaded some of the ports could be capped if the supplies are designed to be terminating instead of stackable.\n\u003C/p\u003E\n\u003Cp\u003E\nOh and it\u0027s like 395 parts with a TON of senior ports that are capped in the process of constructing.\u00A0 I\u0027m planning 20 missions to get it fully operational.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-02-23T19:43:28Z\u0022 title=\u002202/23/2020 07:43  PM\u0022 data-short=\u00224 yr\u0022\u003EFebruary 23, 2020\u003C/time\u003E by XLjedi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AHHans","CreatedById":197939,"CreatedDateTime":"2020-02-23T20:36:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223746074\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582484145\u0022 data-ipsquote-userid=\u0022175658\u0022 data-ipsquote-username=\u0022XLjedi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, XLjedi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI guess depends on what point the number becomes absurd?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nComing back to that: I just did a test with using the BG robotics parts to cover the senior-sized docking ports. My test vehicle looks like that (with the ports closed):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022GExmJlU.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002256.25\u0022 height=\u0022576\u0022 width=\u00221024\u0022 src=\u0022https://imgur.com/GExmJlU.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAs you can see it has groups of five rings of docking ports, each ring has four pairs of docking ports where one is the actual port and the other is the movable \u0022cover\u0022 of the port. The craft in the image has three such groups, so 3*5*4*2 = 120 open ports when all of the pairs are in the \u0022open\u0022 position. And this is the lowest number of groups where I start to see yellow times, although sometimes they flicker green and there is no significant lag. With four groups (i.e. 4*5*4*2 = 160 ports in total) I see measurable lag when they are open (10 s game time in 15 s real time). If I move all of the \u0022covers\u0022 to the closed position the lag (and the yellow times) go away.\n\u003C/p\u003E\n\u003Cp\u003E\nSo for my machine about 100 open docking ports seems to be the boundary for \u0022absurd\u0022 \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 data-ratio=\u0022105.88\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022 width=\u002217\u0022\u003E (Btw.: Ryzen 5 1500X, 16 GB RAM, Ubuntu 18.04)\n\u003C/p\u003E\n\u003Cp\u003E\nP.S. Due to bug \u003Ca href=\u0022https://bugs.kerbalspaceprogram.com/issues/24435\u0022 rel=\u0022external nofollow\u0022\u003E#24435\u003C/a\u003E action groups to open all these doors don\u0027t work. (But I guess you - \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175658-xljedi/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022175658\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175658-xljedi/\u0022 rel=\u0022\u0022\u003E@XLjedi\u003C/a\u003E - know that.\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E)\n\u003C/p\u003E\n"},{"CreatedByName":"Fraktal","CreatedById":184990,"CreatedDateTime":"2020-02-23T20:51:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223746032\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582480306\u0022 data-ipsquote-userid=\u0022197939\u0022 data-ipsquote-username=\u0022AHHans\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, AHHans said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat\u0027s also the impression that I have from my tests. Yes, there is an effect. But if you only have a reasonable number of docking ports then this effect isn\u0027t so serious.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd from a programmers point of view: I can well imagine that in an older version of the game each docking port tested every part within physics range, but that at some point a dedicated list of docking ports was introduced so that now only that list needs to be searched.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI agree that it\u0027s more efficient to just cache all docking ports in physics range and work from that, checking if they\u0027re still in physics range every... say... 20-30 physics updates and removing them from the cache if not. That would result in minor, periodic lag spikes rather than constant lag. I mean, how many hundreds of physics updates go by while you maneuver into docking position anyway? We\u0027ve got plenty of room to work with before edge cases become an issue.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, if I were to write the relevant code, I\u0027d also make it so that the cache also includes which docking port is on which vessel\u00A0\u003Cem\u003Eand\u003C/em\u003E\u00A0have docking ports not distance-check other ports on the same vessel by default, unless explicitly set otherwise via a tweakable.\n\u003C/p\u003E\n"},{"CreatedByName":"XLjedi","CreatedById":175658,"CreatedDateTime":"2020-02-23T20:56:36Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/197939-ahhans/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022197939\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/197939-ahhans/\u0022 rel=\u0022\u0022\u003E@AHHans\u003C/a\u003E\u00A0 Thanks for the thorough testing! \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMakes me feel better now; I think my station is safe.\n\u003C/p\u003E\n\u003Cp\u003E\nI do wish they would fix that action group bug!\u00A0 It would make my custom doors/ramps work so much nicer.\n\u003C/p\u003E\n"},{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2020-02-24T07:29:07Z","Content":"\n\u003Cp\u003E\nFree docking Port induced lag could be reduced by not checking for neighbors on every frame, but just, for instance, five times per second: it should be enough for reasonable docking speed. I\u0027m afraid only Squad can change this...\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2020-02-24T07:53:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223746327\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582529347\u0022 data-ipsquote-userid=\u0022144573\u0022 data-ipsquote-username=\u0022peteletroll\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 minutes ago, peteletroll said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFree docking Port induced lag could be reduced by not checking for neighbors on every frame, but just, for instance, five times per second: it should be enough for reasonable docking speed. I\u0027m afraid only Squad can change this...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPersonally i\u0027d like for there to be a mechanic where you send a signal to \u0022Activate\u0022 the port that\u0027s in LOS to your ship, and only enable it when within 1.5km or less. Since even if you have multiple docking ports on a station; you wouldn\u0027t be docking to them all at once; then once docked we could check for another port attached constantly for a couple minutes. Then if after ~5 minutes that vessel is still attached; just assume both ports are staying as one unit until the player hits a button to sever the connection. Kinda a Pseudo-welding mechanic.\n\u003C/p\u003E\n\u003Cp\u003E\nBecause that\u0027s the worst part of the overhead; even docked ports constantly check to see if there\u0027s another one docked to it. So even after you dock components; they\u0027re running thru a loop endlessly sucking down CPU cycles for no good reasons.\n\u003C/p\u003E\n"},{"CreatedByName":"Fraktal","CreatedById":184990,"CreatedDateTime":"2020-02-24T15:13:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223746327\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582529347\u0022 data-ipsquote-userid=\u0022144573\u0022 data-ipsquote-username=\u0022peteletroll\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, peteletroll said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFree docking Port induced lag could be reduced by not checking for neighbors on every frame, but just, for instance, five times per second: it should be enough for reasonable docking speed. I\u0027m afraid only Squad can change this...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMy point exactly, as I wrote it above. Approaching a docking port is a slow enough process to allow significant timing leeway for the checks before we start hitting edge cases where the ports are close enough to magnetize but neither realized it yet.\n\u003C/p\u003E\n"},{"CreatedByName":"fourfa","CreatedById":151713,"CreatedDateTime":"2020-02-28T04:15:41Z","Content":"\n\u003Cp\u003E\nHow about any port only becomes active and scanning\u00A0when it\u0027s been \u0022set as target\u0022 by another craft?\u00A0 For me, this would make the entire disable/enable process completely invisible and require no behavior change, nor yet another \u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E line\n\u003C/p\u003E\n"},{"CreatedByName":"evileye.x","CreatedById":153755,"CreatedDateTime":"2020-02-28T13:39:10Z","Content":"\n\u003Cp\u003E\nThere\u0027s mod for disabling magnet I beleive\n\u003C/p\u003E\n"},{"CreatedByName":"StrandedonEarth","CreatedById":89439,"CreatedDateTime":"2020-02-28T22:03:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223748566\u0022 data-ipsquote-contentid=\u0022191862\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221582863341\u0022 data-ipsquote-userid=\u0022151713\u0022 data-ipsquote-username=\u0022fourfa\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, fourfa said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow about any port only becomes active and scanning\u00A0when it\u0027s been \u0022set as target\u0022 by another craft?\u00A0 For me, this would make the entire disable/enable process completely invisible and require no behavior change, nor yet another \u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E line\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn conjunction with \u0027control from here\u0027?\n\u003C/p\u003E\n"}]}