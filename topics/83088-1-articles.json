{"TopicId":83088,"ForumId":70,"TopicTitle":"soo..custom tech tree and contracts help","CreatedByName":"dtoxic","CreatedById":103573,"CreatedDateTime":"2014-08-27T19:49:10Z","PageNum":1,"Articles":[{"CreatedByName":"dtoxic","CreatedById":103573,"CreatedDateTime":"2014-08-27T19:49:10Z","Content":"\n\u003Cp\u003Edo they work? i have tree loader 1.1.5 a custom tree but contracts are just being plagued by \u0022cant recover vessel\u0022 and contracts not completing bug whenever i try using custom tech tree\u003C/p\u003E\u003Cp\u003Eany solutions?\u003C/p\u003E\u003Cp\u003Ei get this error every time i;am using a custom tree no matter witch one except stock tree\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003EInvalidOperationException: Operation is not valid due to the current state of the object\u003C/p\u003E\u003Cp\u003E at System.Linq.Enumerable.First[RDTech] (IEnumerable\u00601 source, System.Func\u00602 predicate, Fallback fallback) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at System.Linq.Enumerable.First[RDTech] (IEnumerable\u00601 source, System.Func\u00602 predicate) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at Contracts.Templates.PartTest.Generate () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at Contracts.Contract.Generate (System.Type contractType, ContractPrestige difficulty, Int32 seed, State state) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at Contracts.ContractSystem.GenerateContract (Int32 seed, ContractPrestige difficulty, System.Type contractType) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at Contracts.ContractSystem.GenerateContract (System.Int32\u0026amp; seed, ContractPrestige difficulty) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at Contracts.ContractSystem.GenerateContracts (System.Int32\u0026amp; seed, ContractPrestige difficulty, Int32 count) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at Contracts.ContractSystem.RefreshContracts () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at Contracts.ContractSystem.OnNodeReached (.ProgressNode node) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at EventData\u00601[ProgressNode].Fire (.ProgressNode data) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at ProgressNode.Reach () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at KSPAchievements.RecordsAltitude.iterateVessels (.Vessel v) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at ProgressTree.IterateVessels (.Vessel v) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E at ProgressTracking.Update () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003C/p\u003E\u003Cp\u003E(Filename: Line: -1)\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003Eand here is the full log if anyone can help out id appreciate it... thx\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/v096c4hnaol7o2b/output_log.rar?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/v096c4hnaol7o2b/output_log.rar?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EKSP 0.24.2 x32 Windows 7 Sp1 x64\u003C/p\u003E\u003Cp\u003Emod list\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E000_Toolbar \u003C/p\u003E\u003Cp\u003EActiveTextureManagement \u003C/p\u003E\u003Cp\u003EAdaptiveDockingNode \u003C/p\u003E\u003Cp\u003EAIES_Aerospace \u003C/p\u003E\u003Cp\u003EAnimatedDecouplers \u003C/p\u003E\u003Cp\u003EASET \u003C/p\u003E\u003Cp\u003EB9_Aerospace \u003C/p\u003E\u003Cp\u003EBahaSP \u003C/p\u003E\u003Cp\u003EBetterRoveMates \u003C/p\u003E\u003Cp\u003EBill-Jeb 9000 \u003C/p\u003E\u003Cp\u003EBobCatind \u003C/p\u003E\u003Cp\u003EBoulderCo \u003C/p\u003E\u003Cp\u003EBoxSat alpha \u003C/p\u003E\u003Cp\u003EChatterer \u003C/p\u003E\u003Cp\u003ECommunityResourcePack \u003C/p\u003E\u003Cp\u003ECompact Adapter Kit 1-2 \u003C/p\u003E\u003Cp\u003ECrewXfer \u003C/p\u003E\u003Cp\u003ECrossFeedEnabler \u003C/p\u003E\u003Cp\u003ECustomBiomes \u003C/p\u003E\u003Cp\u003EDailyFrankPeter \u003C/p\u003E\u003Cp\u003EDefaultThrottle \u003C/p\u003E\u003Cp\u003EDMTanks \u003C/p\u003E\u003Cp\u003EEditorExtensions \u003C/p\u003E\u003Cp\u003EEnhancedNavBall \u003C/p\u003E\u003Cp\u003EExsurgentEngineering \u003C/p\u003E\u003Cp\u003EFASA \u003C/p\u003E\u003Cp\u003EFirespitter \u003C/p\u003E\u003Cp\u003EGoodspeed \u003C/p\u003E\u003Cp\u003EHabitatPack \u003C/p\u003E\u003Cp\u003EHGR \u003C/p\u003E\u003Cp\u003EJSI \u003C/p\u003E\u003Cp\u003EKAS \u003C/p\u003E\u003Cp\u003EKerbalJointReinforcement \u003C/p\u003E\u003Cp\u003EKineTechAnimation \u003C/p\u003E\u003Cp\u003EKipEng \u003C/p\u003E\u003Cp\u003EKlockheed_Martian \u003C/p\u003E\u003Cp\u003EKlockheed_Martian_Smart.. \u003C/p\u003E\u003Cp\u003EKlockheed_Martian_Special \u003C/p\u003E\u003Cp\u003EKlockheed_Martian_SSE \u003C/p\u003E\u003Cp\u003EKSO \u003C/p\u003E\u003Cp\u003EKSPX \u003C/p\u003E\u003Cp\u003EKWRocketry \u003C/p\u003E\u003Cp\u003ELionhead_Aerospace_Inc \u003C/p\u003E\u003Cp\u003ELTech \u003C/p\u003E\u003Cp\u003EMagicSmokeIndustries \u003C/p\u003E\u003Cp\u003EMechJeb2 \u003C/p\u003E\u003Cp\u003EMP_Nazari \u003C/p\u003E\u003Cp\u003ENASAmission \u003C/p\u003E\u003Cp\u003ENovaPunch2 \u003C/p\u003E\u003Cp\u003EOpenMod \u003C/p\u003E\u003Cp\u003EOpenResourceSystem \u003C/p\u003E\u003Cp\u003EOrbitusII \u003C/p\u003E\u003Cp\u003EPandaJagerLaboratories \u003C/p\u003E\u003Cp\u003EPreciousMetals \u003C/p\u003E\u003Cp\u003EProtractor \u003C/p\u003E\u003Cp\u003ERcsSounds \u003C/p\u003E\u003Cp\u003EResGen \u003C/p\u003E\u003Cp\u003ERLA_Stockalike \u003C/p\u003E\u003Cp\u003ESCANsat \u003C/p\u003E\u003Cp\u003ESDHI \u003C/p\u003E\u003Cp\u003ESmokeScreen \u003C/p\u003E\u003Cp\u003ESquad \u003C/p\u003E\u003Cp\u003EStripSymmetry \u003C/p\u003E\u003Cp\u003ETacSelfDestruct \u003C/p\u003E\u003Cp\u003ETantares \u003C/p\u003E\u003Cp\u003ETarsierSpaceTech \u003C/p\u003E\u003Cp\u003EThunderAerospace \u003C/p\u003E\u003Cp\u003ETreeLoader \u003C/p\u003E\u003Cp\u003ETurboNisu \u003C/p\u003E\u003Cp\u003ETweakScale \u003C/p\u003E\u003Cp\u003EUmbraSpaceIndustries \u003C/p\u003E\u003Cp\u003EWheelSounds\u003C/p\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-31T21:44:09Z\u0022 title=\u002208/31/2014 09:44  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 31, 2014\u003C/time\u003E by dtoxic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"dtoxic","CreatedById":103573,"CreatedDateTime":"2014-08-30T10:28:48Z","Content":"\n\u003Cp\u003Ehate to bump...but anyone any solution to this? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"bonesbro","CreatedById":104036,"CreatedDateTime":"2014-09-01T01:42:32Z","Content":"\n\u003Cp\u003EI see a similar crash with contracts - when adding rep, science, or funds when a contract is complete, the log often shows this:\u003C/p\u003E\u003Cp\u003E[Log]: Added 1.030509 (30) reputation: \u0027Contract parameter complete\u0027.\u003C/p\u003E\u003Cp\u003E[Exception]: InvalidOperationException: Operation is not valid due to the current state of the object\u003C/p\u003E\u003Cp\u003EThe exception doesn\u0027t have a callstack, either in the debug log (alt\u002Bf12) or in ksp.log on disk.\u003C/p\u003E\u003Cp\u003EI have a pile of mods installed, but no mods that directly impact the contract system. I am using Treeloader 1.15 with a custom tech tree, although reviewing the Treeloader source it doesn\u0027t look like it does anything contract-related at all, and it doesn\u0027t seem like the code would even be running while I\u0027m orbiting the Mun.\u003C/p\u003E\n"},{"CreatedByName":"dtoxic","CreatedById":103573,"CreatedDateTime":"2014-09-01T01:52:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bonesbro\u0022 data-cite=\u0022bonesbro\u0022\u003E\u003Cdiv\u003EI see a similar crash with contracts - when adding rep, science, or funds when a contract is complete, the log often shows this:\u003Cp\u003E[Log]: Added 1.030509 (30) reputation: \u0027Contract parameter complete\u0027.\u003C/p\u003E\u003Cp\u003E[Exception]: InvalidOperationException: Operation is not valid due to the current state of the object\u003C/p\u003E\u003Cp\u003EThe exception doesn\u0027t have a callstack, either in the debug log (alt\u002Bf12) or in ksp.log on disk.\u003C/p\u003E\u003Cp\u003EI have a pile of mods installed, but no mods that directly impact the contract system. I am using Treeloader 1.15 with a custom tech tree, although reviewing the Treeloader source it doesn\u0027t look like it does anything contract-related at all, and it doesn\u0027t seem like the code would even be running while I\u0027m orbiting the Mun.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ewell i think this guy nailed the problem but i dont think we will see a fix soon\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ratzap\u0022 data-cite=\u0022Ratzap\u0022\u003E\u003Cdiv\u003EI\u0027ve been looking into treeloader for the RPL mod and there seem to be some deep seated problems. Specifically, interaction with the contract system - when a contract is completed or every X seconds the system tries to generate a new random contract. If it picks a part test contract, it goes and tries to pick a part then looks up the tech node for the part. For stock this isn\u0027t a problem because every part exists and has an assigned tech tree node. Trees built with tree edit often have gaps, empty nodes, parts which are not assigned to any node, parts assigned to nodes but which are optional and don\u0027t actually exist. All of those make the contract picker dump a stack trace and die.\u003Cp\u003EAssigning parts with no node to a default dumping ground solves one problem but you\u0027d also need to solve the other one where parts aren\u0027t loaded but are in the tree. If Squad had written the contract code to be a bit more robust (for example catch the exception and automatically retry with a different pick) we wouldn\u0027t have the problem but hey, spilt milk etc.\u003C/p\u003E\u003Cp\u003EI got a treeloader working for science sandbox mode but the contract problems are not going to be easy to fix or work around I fear.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"bonesbro","CreatedById":104036,"CreatedDateTime":"2014-09-01T01:58:34Z","Content":"\n\u003Cp\u003EI\u0027ve also been hitting a related bug when I attempt to recover a vessel - frequently it won\u0027t recover and I have to toggle between the space center and inflight a few times until it allows me to recover.\u003C/p\u003E\n"},{"CreatedByName":"dtoxic","CreatedById":103573,"CreatedDateTime":"2014-09-01T02:05:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bonesbro\u0022 data-cite=\u0022bonesbro\u0022\u003E\u003Cdiv\u003EI\u0027ve also been hitting a related bug when I attempt to recover a vessel - frequently it won\u0027t recover and I have to toggle between the space center and inflight a few times until it allows me to recover.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyeap same thing but when using stock tree everything is ok it has to do with the nodes in the custom tree or something guess we will have to wait and see till some one breaks this mystery \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}