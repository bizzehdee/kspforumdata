{"TopicId":90249,"ForumId":16,"TopicTitle":"bi-directional fuel feed and tank equalization","CreatedByName":"barfing_skull","CreatedById":126825,"CreatedDateTime":"2014-11-14T07:51:12Z","PageNum":1,"Articles":[{"CreatedByName":"barfing_skull","CreatedById":126825,"CreatedDateTime":"2014-11-14T07:51:12Z","Content":"\n\u003Cp\u003EI have a rocket first stage that seems to work pretty well....except when I try and turn at altitude. I\u0027m pretty sure I know what the problem is, just not how to fix it.\u003C/p\u003E\u003Cp\u003EThe rocket is a main cluster of tanks and engines (7 in all, the central plus 6 surrounding). Outside of that there\u0027s another ring of 6 tanks and engines, which are asparagus staged. There are some SRB\u0027s too, but they\u0027re not the problem. The rocket works fine until I\u0027ve dropped the SRB\u0027s and asparagus stages, and I\u0027m down to the inner cluster of 7 tanks and engines. The central cluster has bi-directional fuel lines - one each direction - between the outer 6 tanks, and unidirectional lines all pointed to the central tank. This works great, as the asparagus stages expire as planned, and when down to the central 7, all the 6 outside engines have the same amount of fuel available to each. However, that fuel doesn\u0027t seem to be weighted equally among the 6 radial central tanks (some tanks show full while others empty at that stage of flight), and this, I believe, is what\u0027s causing the wild directional behavior when the rocket tries to turn. I don\u0027t see any imbalance of thrust.\u003C/p\u003E\u003Cp\u003ESince it\u0027s asparagus staged, the last asparagus tanks empty into 2 of the 6 central radial tanks. I\u0027m assuming this is what causes the imbalance, and that it\u0027s not redistributing that fuel among the inner tanks evenly. What I\u0027d really like to have happen is for the fuel/oxidizer levels to remain equal among all the inner tanks. Essentially, I want it to function as one big tank, with all tanks being symmetrically filled/drained. Is there some way I can do this?\u003C/p\u003E\u003Cp\u003ECheers,\u003C/p\u003E\u003Cp\u003E-BS\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/J7eZ4wW.jpg\u0022 alt=\u0022J7eZ4wW.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"cicatrix","CreatedById":120831,"CreatedDateTime":"2014-11-14T10:45:12Z","Content":"\n\u003Cp\u003ETAC Fuel balancer might help, but if you don\u0027t want to use mods there\u0027s not much you can do except trying to manually balance the fuel levels.\u003C/p\u003E\n"},{"CreatedByName":"Wanderfound","CreatedById":112611,"CreatedDateTime":"2014-11-14T10:48:55Z","Content":"\n\u003Cp\u003EIf you\u0027re burning evenly, they should be draining evenly. Most likely, you have a misplaced fuel line somewhere.\u003C/p\u003E\n"},{"CreatedByName":"katateochi","CreatedById":35181,"CreatedDateTime":"2014-11-14T11:11:34Z","Content":"\n\u003Cp\u003Eunless something changed in 0.25, you can run fuel lines in both directions and the tanks will drain evenly.\u003C/p\u003E\n"},{"CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2014-11-14T11:17:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wanderfound\u0022 data-cite=\u0022Wanderfound\u0022\u003E\u003Cdiv\u003EIf you\u0027re burning evenly, they should be draining evenly. Most likely, you have a misplaced fuel line somewhere.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes my best advice is to do an static burn on pad and look at the flow.\u003C/p\u003E\u003Cp\u003EMost probably an pipe is missing or the wrong direction, this will work until one engine burn out while the other is burning and you get uneven trust. \u003C/p\u003E\u003Cp\u003EHowever the staging looks a bit weird, it looks more like an onion staging, 3 layers\u002B srb and 4 stages before horizontal.\u003C/p\u003E\n"},{"CreatedByName":"Laie","CreatedById":110461,"CreatedDateTime":"2014-11-14T11:31:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022katateochi\u0022 data-cite=\u0022katateochi\u0022\u003E\u003Cdiv\u003Eunless something changed in 0.25, you can run fuel lines in both directions and the tanks will drain evenly.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes and no.\u003C/p\u003E\u003Cp\u003EWhen the central tank/engine has six lines connected to it. One of them is checked first. Then comes the line that connects that tank to the next, and the next, until the circle is complete. \u003Cstrong\u003EOnly after one set of fuel lines has been followed through will the next line even be considered.\u003C/strong\u003E This leads to a tank we\u0027ve already had, and another we\u0027ve already had, and so on. So these are all discarded. Same for the other four lines connecting the center tank.\u003C/p\u003E\u003Cp\u003ESo in effect, of the six lines connecting to the central tank, only the one that is checked first will count, because the other five only lead to tanks that have already been considered at that point.\u003C/p\u003E\u003Cp\u003EIt might be possible to make it do what you want, if you put down the fuel lines in just the right order. But that\u0027s mind-boggling. It will be much easier to rewire the rocket so you keep staging in pairs.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-14T12:27:08Z\u0022 title=\u002211/14/2014 12:27  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 14, 2014\u003C/time\u003E by Laie\u003C/strong\u003E\n\u003Cbr\u003Eremoved copypasta\n\u003C/span\u003E\n"},{"CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2014-11-14T12:05:38Z","Content":"\n\u003Cp\u003EWhat Laie said.\u003C/p\u003E\u003Cp\u003E Having multiple fuel lines come into a single tank will work fine, but having multiple fuel lines coming out of it will not. The script will only ever follow one of those paths and the others will be ignored.\u003C/p\u003E\u003Cp\u003E Best,\u003C/p\u003E\u003Cp\u003E-Slashy\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-11-14T12:32:02Z","Content":"\n\u003Cp\u003EIn addition to what Laie mentions, it\u0027s important to note that fuel lines never move fuel between tanks. Fuel lines determine which tank an engine should draw fuel from, once the path is set the engine draws directly from that tank.\u003C/p\u003E\u003Cp\u003EAlso, no discussion of fuel flow is complete without mentioning Kasuha\u0027s \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/64362\u0022 rel=\u0022external nofollow\u0022\u003EFuel Flow Rules thread\u003C/a\u003E, it is an excellent resource for understanding fuel flow and diagnosing problems.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2014-11-14T12:38:18Z","Content":"\n\u003Cp\u003EI don\u0027t see why you\u0027re doing all that complicated fuel line doohickery. I\u0027d just run fuel lines from the interior asparagus stage (stage 12 I believe) on each side to the 3 onion-staged tanks closest to it, and then from each of those 3 tanks to the interior tank.\u003C/p\u003E\u003Cp\u003EBetter yet I\u0027d asparagus those 6 tanks as well \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"barfing_skull","CreatedById":126825,"CreatedDateTime":"2014-11-14T23:41:10Z","Content":"\n\u003Cp\u003EThanks all for the replies and ideas!\u003C/p\u003E\u003Cp\u003EMy impetus for keeping the central 7 tanks as one is that if I asparagus the inner tanks and engines, I\u0027ll be left with too little thrust for the large amount of stuff that\u0027s on top of it. One S3 engine will leave the rest of the stack plummeting back to Kerbin. So I think I\u0027d like to keep that inner circle together. Besides, they like each other.\u003C/p\u003E\u003Cp\u003EOnion staging is a possibility, but I\u0027d have to look at how much delta-v I\u0027d lose in that case. My first impulse is to remove the bi-directional links and then try some other unidirectional links from there. I think my main thought crime was that the bi-directional links would act as some sort of equalizer. I\u0027ll keep in mind the depth-first search for the tank algorithm, too.\u003C/p\u003E\u003Cp\u003EAgain, good ideas for places to start.\u003C/p\u003E\u003Cp\u003ECheers,\u003C/p\u003E\u003Cp\u003E-BS\u003C/p\u003E\n"},{"CreatedByName":"Kryxal","CreatedById":102688,"CreatedDateTime":"2014-11-15T03:36:29Z","Content":"\n\u003Cp\u003EHow about this: it looks like the second ring is mounted a bit higher than the first ring, so run fuel lines from the outer ring to the center tank, then out again to the 6 inner ring tanks. Your center rocket will run out of fuel, of course, but you\u0027ll still be thrusting on 6 ... or you could lose the center rocket entirely, whatever works.\u003C/p\u003E\u003Cp\u003EOn second thought, that would run into the multiple fuel lines in AND out issue, maybe just accept that you\u0027ll need to do things differently ... maybe cut the center tank out of things entirely, dial the center engine down to 50% or use a lighter engine, and just make it work that way.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-15T03:39:50Z\u0022 title=\u002211/15/2014 03:39  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 15, 2014\u003C/time\u003E by Kryxal\u003C/strong\u003E\n\u003C/span\u003E\n"}]}