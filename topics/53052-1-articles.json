{"TopicId":53052,"ForumId":55,"TopicTitle":"Instant replay","CreatedByName":"Cols","CreatedById":65371,"CreatedDateTime":"2013-11-14T02:27:08Z","PageNum":1,"Articles":[{"CreatedByName":"Cols","CreatedById":65371,"CreatedDateTime":"2013-11-14T02:27:08Z","Content":"\n\u003Cp\u003ESo the other day I was taking off but I forgot about another plane I left at the end of the runway. Needless to say it didn\u0027t end well. At that point though an idea struck me. What about an instant replay system so you can study what when wrong and review the footage. Also you could save your best clips and leave them in a tape library building. That way your very best moments can be saved to be viewed again and again!\u003C/p\u003E\n"},{"CreatedByName":"Algiark","CreatedById":83907,"CreatedDateTime":"2013-11-14T05:50:56Z","Content":"\n\u003Cp\u003EWho needs replay when you can just replicate.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2013-11-14T08:12:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Algiark\u0022 data-cite=\u0022Algiark\u0022\u003E\u003Cdiv\u003EWho needs replay when you can just replicate.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat makes almost no sense whatsoever.\u003C/p\u003E\u003Cp\u003EI was orbiting Mun really low, in the map mode planning my maneuver. Suddenly there was an explosion and the flight was done.\u003C/p\u003E\u003Cp\u003EHow exactly do I replicate that, in such a way as to see exactly how my ship crashed?\u003C/p\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2013-11-14T09:03:39Z","Content":"\n\u003Cp\u003EAn instant replay kind of thing would be extremely resource-heavy, and likely only even vaguely useful on the most beefed-up computers, in my opinion. It would have to be considerably different and more robust in order to drain as little resources as possible if it\u0027s going to be integrated into KSP, in my opinion. That is, of course, if it were recorded as a movie file, frame by frame. There are other options which are likely considerably more useful, though probably exponentially more problematic to code.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2013-11-14T09:15:54Z","Content":"\n\u003Cp\u003EClosest approximation: have Fraps running in the background. If your PC is fast enough and your disk big enough, you won\u0027t have any problems with it. And you can have your library on Youtube.\u003C/p\u003E\n"},{"CreatedByName":"SilverWarior","CreatedById":80669,"CreatedDateTime":"2013-11-14T13:30:57Z","Content":"\n\u003Cp\u003EThre reasons that make implementing of such system really hard:\u003C/p\u003E\u003Cp\u003E1. As vexx32 aready metioned such system would require lots and lots of resources (memory or disk space). \u003C/p\u003E\u003Cp\u003EGo check out your savegame directoy and see how big is one of your savegames. \u003C/p\u003E\u003Cp\u003EIf we asume that half of the savegame file actually contains needed information about current position of any craft in your save (it probably uses lots more than half of the savegame file) then we could say that for storing crafts position in certain time you woul need half the size of your savegame. Now multiply this by a few hundred thousands (frames of your recording) and you will quickly see how much disk space you would need to store such recordings.\u003C/p\u003E\u003Cp\u003E2. Now you could make this so that you store initial position and any further controll inputs so you actually simulate whole thing again. \u003C/p\u003E\u003Cp\u003EWhile this would indeed require much less resource it needs the game to be able to simulate everything without any deviations in calculations (extreme precision). \u003C/p\u003E\u003Cp\u003EBut this could not be done in current game system that KSP uses. Why? Becouse currently KSP uses special system which is able to overcome temorary FPS slowdowns in case if some program in the background uses a lot of CPU power by temporarily reducing calculations precision. (everytime the mission clock blinks in yelow).\u003C/p\u003E\u003Cp\u003ESo for perfect replication of your mission you will have to replicate this behavior also.\u003C/p\u003E\u003Cp\u003E3. The biggest problem in implementing something like this is the fact that you would no longer be able to use time warp as it would screw up everything due to using simplified calculations dueing time warp.\u003C/p\u003E\u003Cp\u003ESo currently the best option is to record the video of your gameplay using Fraps or similar programs.\u003C/p\u003E\u003Cp\u003EIf your computer is not powerfull enough to run both Fraps and KSP at same time and if you have another computer which might not even be able to use KSP in first place but still enough powerfull to run Fraps you could use this second computer to do video recording. Of course this second computer would need to have some TV card to be able to record video from output sorce and you would need sone VGA/HDMI duplicator to duplicate your screen signal (one goes to your monitor and another goes to your TV card on another computer).\u003C/p\u003E\n"},{"CreatedByName":"allmhuran","CreatedById":66124,"CreatedDateTime":"2013-11-14T13:49:54Z","Content":"\n\u003Cp\u003EThat\u0027s not how replay features are implemented. They don\u0027t store complete information about everything going on every frame. They store deltas.\u003C/p\u003E\u003Cp\u003EThere\u0027s no need to keep a copy of the craft every frame if the craft doesn\u0027t change. You just store the change if and when it happens.\u003C/p\u003E\u003Cp\u003EThere\u0027s no need to store your position every frame. You just make note of when a change occurs, and by how much.\u003C/p\u003E\u003Cp\u003EKSP should actually be able to have extremely tiny replays, since much of in-game time is spent in rails warp, which means everything is deterministic and there\u0027s *no need to store anything* for those frames. The only time you need to be writing to the save file is when the player is providing input, plus a keyframe for position, velocity, etc every so often.\u003C/p\u003E\u003Cp\u003EThe size of a video file is vastly, vastly, VASTLY greater.\u003C/p\u003E\u003Cp\u003EEdit: The timer going yellow when \u0022physics lag\u0022 is high is not a reduction in precision. It\u0027s a slowing down of game time relative to real world time so that the the game can spend more time doing physics per change.\u003C/p\u003E\u003Cp\u003EThere is a game called \u0022DCS\u0022. It is an extremely high fidelity flight simulator, and it\u0027s multiplayer. It has replay files. The file size for an hour long mission is measured in megabytes, not gigabytes. The file size for a video of same is hundreds of gigabytes.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-14T14:04:20Z\u0022 title=\u002211/14/2013 02:04  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 14, 2013\u003C/time\u003E by allmhuran\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2013-11-14T14:20:12Z","Content":"\n\u003Cp\u003EAye. Can be done, and I\u0027d love to see it happen, actually. I just wonder exactly how complex the code for all of it would be. It seems whenever someone things something is simple, it turns out to be infinitely more complex when you pick it apart. Nonetheless... as OP stated, it would be quite useful. Might even be good as a general debugging tool, at a stretch.\u003C/p\u003E\n"},{"CreatedByName":"allmhuran","CreatedById":66124,"CreatedDateTime":"2013-11-14T14:30:57Z","Content":"\n\u003Cp\u003ECoding for a replay is actually quite straightforward.\u003C/p\u003E\u003Cp\u003EAll information sent by the player comes via something called the windows message loop, and the events being forwarded by that loop are handled by input processing routines. So the only thing required to be able to replay player input is for the input processing routines to also write those messages out, along with the time they were processed, to a storage object, which is written to the hard drive either synchronously or, for better performance, with a lazy writer. The timer object uses the computer\u0027s high performance counter for maximum fidelity (returns information in the form of cpu cycle counts, extremely high precision).\u003C/p\u003E\u003Cp\u003EThen you need a keyframe every so often as a master, because even the high performance counters can be slightly off, and when running dynamic physics things may not behave precisely the same way (watch an overly-heavy craft fail on the launchpad several times and note that it\u0027s not always the same kind of failure even with no input being provided). The keyframe needs to store all state data... basically, exactly what is stored in a quicksave now, with some simplifications (primarily, there is no need to store all of the part details of all craft every keyframe, since these can only change by an event like decoupling, collision, etc).\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2013-11-14T14:37:31Z","Content":"\n\u003Cp\u003EYeah it\u0027s easy to armchair it and say it\u0027ll be easy, but comparing rewinding the mostly-on-rails universe on a whim to recording 30FPS full screen video at all times, is exaggerating at best.\u003C/p\u003E\n"},{"CreatedByName":"Monkeh","CreatedById":72122,"CreatedDateTime":"2013-11-14T14:39:58Z","Content":"\n\u003Cp\u003EThis would obviously be amazing. \u003C/p\u003E\u003Cp\u003EI bet it\u0027s a technical nightmare though...\u003C/p\u003E\n"},{"CreatedByName":"allmhuran","CreatedById":66124,"CreatedDateTime":"2013-11-14T14:40:55Z","Content":"\n\u003Cp\u003EI\u0027m not sure what you\u0027re saying there 5thHorseman, but just to make things clear: I do on occsaion record my gameplay (using dxtory, way better than fraps), and I also play DCS, starcraft, and many other games that have replay functionality. I am keenly aware of the difference in file sizes, and I am not exaggerating when I say that hour long replays are in the megabytes, video recording is hundreds of gig for the same duration (you can\u0027t do two pass VBR compression in real time).\u003C/p\u003E\u003Cp\u003EOh, and I\u0027ve also coded games, including replay functionality.\u003C/p\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2013-11-14T16:12:17Z","Content":"\n\u003Cp\u003EOh, aye, but coding a replay system as you describe is likely to be very different depending on the code base you\u0027re working with, I\u0027d imagine. Sometimes it\u0027ll be easy, sometimes it could conceivably be a nightmare. As such, it\u0027s not generally a good idea to assume it\u0027s going to be a simple thing when you\u0027re not familiar with the code of the game we\u0027re discussing. Still, it is a good idea. I\u0027d like for Squad to at least have a look at it and see if it\u0027s worth the time. Might help us pin down some bugs, in the end, actually.\u003C/p\u003E\n"},{"CreatedByName":"Tex_NL","CreatedById":58254,"CreatedDateTime":"2013-11-14T17:26:07Z","Content":"\n\u003Cp\u003EThe early \u002790\u0027s game Tie Fighter had a build in record function. It was able to replay your entire mission and allowed you to view it from pretty much any angle. It was always on and did not impact game-play.\u003C/p\u003E\u003Cp\u003EIf a 486 PC with just 8MB memory was able to do it back then, I am sure a modern PC can do the same.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2013-11-14T17:33:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tex_NL\u0022 data-cite=\u0022Tex_NL\u0022\u003E\u003Cdiv\u003EThe early \u002790\u0027s game Tie Fighter had a build in record function. It was able to replay your entire mission and allowed you to view it from pretty much any angle. It was always on and did not impact game-play.\u003Cp\u003EIf a 486 PC with just 8MB memory was able to do it back then, I am sure a modern PC can do the same.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt recorded all your keypresses and then played the game again using this recording instead of using keyboard input. That of course can be used if the game engine is deterministic. That\u0027s not so true in KSP where your rocket may have 50% chance of breaking up right on launchpad before you even do anything.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2013-11-14T19:56:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022allmhuran\u0022 data-cite=\u0022allmhuran\u0022\u003E\u003Cdiv\u003EI\u0027m not sure what you\u0027re saying there 5thHorseman, but just to make things clear: I do on occsaion record my gameplay (using dxtory, way better than fraps), and I also play DCS, starcraft, and many other games that have replay functionality. I am keenly aware of the difference in file sizes, and I am not exaggerating when I say that hour long replays are in the megabytes, video recording is hundreds of gig for the same duration (you can\u0027t do two pass VBR compression in real time).\u003Cp\u003EOh, and I\u0027ve also coded games, including replay functionality.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt sounds, actually, like we\u0027re in agreement. Megabytes versus Gigabytes is the huge exaggeration I was talking about when I (poorly, now that I read it back) was pointing out that you don\u0027t need to (or want to) record FMV in order to have a replay system.\u003C/p\u003E\u003Cp\u003EAnd while I don\u0027t code games, do record KSP with Fraps in fullscreen 30fps and yeah, I have 200 gig devoted to recording and never record more than an hour at a time \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Bit_reaper","CreatedById":107184,"CreatedDateTime":"2014-04-03T19:48:48Z","Content":"\n\u003Cp\u003EI\u0027m going to necro this thread as IMO replay would be an really good feature to add. I would make making videos so much easier as well as taking screen shots for challenges ect. While making replay functionality for something physics based as KSP is not as strait forward as it would be for some other types of games is should be more then feasible and should have less of an performance impact compared to strait up video recording.\u003C/p\u003E\u003Cp\u003EThe way I would approach it in KSP would be to basically run it as an animation recording. That is to say record location/rotation or \u0022key frames\u0022 for each part at 15 or 30 fps (and then in play back that would be interpolated). While not 100% accurate especially if running very low capture FPS it would probably be pretty decent.\u003C/p\u003E\u003Cp\u003EAs far as performance goes. Just give us a slider for the capture rate and the option to disable it. That way people who want it and have the needed hardware can use it and thous who are running slower system can disable it in order to get the best FPS.\u003C/p\u003E\n"},{"CreatedByName":"AlexisBV","CreatedById":81911,"CreatedDateTime":"2015-11-11T23:37:02Z","Content":"\n\u003Cp\u003EHoly necro, Batkerman!\u003C/p\u003E\u003Cp\u003EI totally \u002B1 this. For those saying it\u0027s too resource-heavy, I disagree. Have a look at Falcon 4:Allied Force, you can record and replay missions with literally thousands of entities. And it\u0027s older tech than KSP, and would run just fine on 10 year old PCs.\u003C/p\u003E\u003Cp\u003EOn a site note, what would be the best way of watching a launch from the launchpad? Or, watching a reentry from a fixed point on the ground? I\u0027d really love to see something like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/2XZgu7FStbw?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"322997am","CreatedById":146422,"CreatedDateTime":"2015-11-12T00:22:29Z","Content":"\n\u003Cp\u003EI have a 500gb disc and I want to see what goes wrong. Ps the f3 menu tells you what happened in pretty good detail and why.\u003C/p\u003E\n"},{"CreatedByName":"jh4m3s","CreatedById":153418,"CreatedDateTime":"2015-11-12T05:41:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u00225thHorseman\u0022 data-cite=\u00225thHorseman\u0022\u003E\u003Cdiv\u003EThat makes almost no sense whatsoever.\u003Cp\u003EI was orbiting Mun really low, in the map mode planning my maneuver. Suddenly there was an explosion and the flight was done.\u003C/p\u003E\u003Cp\u003EHow exactly do I replicate that, in such a way as to see exactly how my ship crashed?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHA-Ha yes I agree:D\u003C/p\u003E\n"}]}