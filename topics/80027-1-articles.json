{"TopicId":80027,"ForumId":15,"TopicTitle":"Problems in unity","CreatedByName":"Layer23","CreatedById":73434,"CreatedDateTime":"2014-07-29T21:17:05Z","PageNum":1,"Articles":[{"CreatedByName":"Layer23","CreatedById":73434,"CreatedDateTime":"2014-07-29T21:17:05Z","Content":"\n\u003Cp\u003EHi there, all of a sudden I can\u0027t import my blender files properly into Unity. Was a while I did a part and I\u0027ve got Unity version 4.5.2f1 now. Anyways, here\u0027s what I do.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003ECreate Blender file of model, a detailed mesh with material, image and UV mapped with an applied texture and a normal map for importing into Unity. A less detailed mesh with just 40 or so faces to be used as the collision mesh. Apply material to the collision mesh then hide it by clicking the \u0022eye\u0022 icon next to it. The meshes are next to each other in the hierarchy. Perhaps the collision mesh should be under the detailed one? Anyways, export to .obj.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ELoad up unity after having placed texture, texture_NRM, .obj and .mtl file in correct asset folder.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECreate new scene, new empty Gameobject and add KSP Parttools.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EPlace default mesh under the Parttools in the hierarchy.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis is where I\u0027m encountering problems. First of all it say\u0027s my mesh doesn\u0027t have any normals, so it tries to recalculate normals without doing it. I manually changed the import option to recalculate normals. Another problem is that I get three materials although I only have two applied in blender, one for the detailed mesh and one for the collision mesh. The third material is called \u0022no name\u0022 and seems to affect the collision mesh but I am not sure. After fiddling about I exported it to .mu, wrote a .cfg and loaded the game. The part loaded, but it wasn\u0027t the detailed and textured mesh that did but the collision mesh with just a plane white texture (placeholder I guess). So, wtf is going on with Unity? Can\u0027t for the life of me figure out what I\u0027m doing wrong. Any help would be greatly appreciated!\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-07-29T21:23:18Z","Content":"\n\u003Cp\u003Eyou don\u0027t need the .mtl file in Unity. \u003C/p\u003E\u003Cp\u003Eonce you import the OBJ, texture and texture_NRM, assign a KSP/Diffuse\u002BBump shader to your mesh, then assign the textures to the respective slots in the shader.\u003C/p\u003E\u003Cp\u003Eapply Mesh collider to the collision mesh, check \u0022Convex\u0022; then remove the Mesh Filter and Mesh Renderer Components. you should see a green outline of your collision mesh around your textured mesh at this point.\u003C/p\u003E\u003Cp\u003Eexport and follow the rest of your steps to load the part in Editor.\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2014-07-29T21:37:13Z","Content":"\n\u003Cp\u003EWhy export to obj? Blender imports unity files just fine.\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-07-29T21:42:41Z","Content":"\n\u003Cp\u003EExcept when Blender crashes when Unity tries to use it. I\u0027ve had that happen with Blender 2.71.\u003C/p\u003E\n"},{"CreatedByName":"Layer23","CreatedById":73434,"CreatedDateTime":"2014-07-29T21:54:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Eyou don\u0027t need the .mtl file in Unity. \u003Cp\u003Eonce you import the OBJ, texture and texture_NRM, assign a KSP/Diffuse\u002BBump shader to your mesh, then assign the textures to the respective slots in the shader.\u003C/p\u003E\u003Cp\u003Eapply Mesh collider to the collision mesh, check \u0022Convex\u0022; then remove the Mesh Filter and Mesh Renderer Components. you should see a green outline of your collision mesh around your textured mesh at this point.\u003C/p\u003E\u003Cp\u003Eexport and follow the rest of your steps to load the part in Editor.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay I\u0027ve reinstalled Blender and am now skipping adding the .mtl file. But now I only get one material imported although I have material and texture (with \u0022none\u0022 selected in Blender on both) on the collision mesh and the detailed mesh. And the collision mesh and detailed mesh are fused together when imported into Unity. The area for Mesh Collider and Mesh Renderer are greyed out. It still also says my mesh doesn\u0027t have any normals, what gives? Of course it has normals, have tried flipping the faces in Blender as well as recalculating them.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EExcept when Blender crashes when Unity tries to use it. I\u0027ve had that happen with Blender 2.71.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah the same thing happens for me. Glad I\u0027m not the only one with that issue at least.\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2014-07-29T22:03:33Z","Content":"\n\u003Cp\u003EUnity seems to automatically assign a material to everything, afaik you dont need a material for the collider as you want that to be invisible, to add a material in unity is no problem, just import one from another project and assign it to the parts you want it applied to, I get nonsense like this all the time and thought it was just me..\u003C/p\u003E\n"},{"CreatedByName":"Layer23","CreatedById":73434,"CreatedDateTime":"2014-07-29T22:19:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpannerMonkey(smce)\u0022 data-cite=\u0022SpannerMonkey(smce)\u0022\u003E\u003Cdiv\u003EUnity seems to automatically assign a material to everything, afaik you dont need a material for the collider as you want that to be invisible, to add a material in unity is no problem, just import one from another project and assign it to the parts you want it applied to, I get nonsense like this all the time and thought it was just me..\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETried it without a material now and had it hidden. It still merges/fuses with the detailed mesh in Unity when importing the .obj. Will try to reinstall Blender 2.6 and see if it works.\u003C/p\u003E\n"},{"CreatedByName":"Layer23","CreatedById":73434,"CreatedDateTime":"2014-07-29T22:47:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Layer23\u0022 data-cite=\u0022Layer23\u0022\u003E\u003Cdiv\u003ETried it without a material now and had it hidden. It still merges/fuses with the detailed mesh in Unity when importing the .obj. Will try to reinstall Blender 2.6 and see if it works.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell Blender 2.6 didn\u0027t work and I don\u0027t want to spend too much time on that version since it lacks some things available in 2.71 I deem absolutely necessary. So the problem is that the collision mesh in blender merges with the detailed \u0022normal\u0022 mesh when importing into Unity instead of remaining split into two meshes. So I cannot untick Mesh Renderer so that the collision mesh is invisible in game.\u003C/p\u003E\n"},{"CreatedByName":"AlphaAsh","CreatedById":105348,"CreatedDateTime":"2014-07-29T23:21:41Z","Content":"\n\u003Cp\u003EMaybe I\u0027m being an idiot here, but can\u0027t you just import the two meshes separately then place them under the same gameobject, apply colliders to your simpler mesh then remove its mesh renderer?\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-07-30T00:02:28Z","Content":"\n\u003Cp\u003Edid you export normals in the OBJ? make sure \u0022Write Normals\u0022 box is checked, it\u0027s off by default. Uncheck \u0022Write Materials\u0022, should stop exporting the .mtl. OBJ was originally a Lightwave format, and mtl is Lightwave\u0027s native material. it\u0027s good practice to collapse your modifier stack, reset transform/pivot and reset scale before exporting. I do it everytime.\u003C/p\u003E\u003Cp\u003EUnity assigns default shader to everything if you uncheck \u0022Import Materials\u0022 in import settings. it\u0027s a simple white diffuse shader and can\u0027t be edited. You have to assign a new shader you created before you can make any edits to the shader settings.\u003C/p\u003E\u003Cp\u003EIf your collision mesh is visible in game, it\u0027s because you didn\u0027t remove the \u0022Mesh Filter\u0022 and \u0022Mesh Renderer\u0022 component from the collision object in Unity.\u003C/p\u003E\n"},{"CreatedByName":"Layer23","CreatedById":73434,"CreatedDateTime":"2014-07-30T00:24:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AlphaAsh\u0022 data-cite=\u0022AlphaAsh\u0022\u003E\u003Cdiv\u003EMaybe I\u0027m being an idiot here, but can\u0027t you just import the two meshes separately then place them under the same gameobject, apply colliders to your simpler mesh then remove its mesh renderer?\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022nli2work\u0022 data-cite=\u0022nli2work\u0022\u003E\u003Cdiv\u003Edid you export normals in the OBJ? make sure \u0022Write Normals\u0022 box is checked, it\u0027s off by default. Uncheck \u0022Write Materials\u0022, should stop exporting the .mtl. OBJ was originally a Lightwave format, and mtl is Lightwave\u0027s native material. it\u0027s good practice to collapse your modifier stack, reset transform/pivot and reset scale before exporting. I do it everytime.\u003Cp\u003EUnity assigns default shader to everything if you uncheck \u0022Import Materials\u0022 in import settings. it\u0027s a simple white diffuse shader and can\u0027t be edited. You have to assign a new shader you created before you can make any edits to the shader settings.\u003C/p\u003E\u003Cp\u003EIf your collision mesh is visible in game, it\u0027s because you didn\u0027t remove the \u0022Mesh Filter\u0022 and \u0022Mesh Renderer\u0022 component from the collision object in Unity. \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI combined both of your suggestions and it works now! Thank you so very much, have spent 4 hours bashing my head in. Anyways, I split up my exports into two as AlphaAsh suggested. Then I used your export settings nli2work. So I exported one .obj for the collision mesh and one for the detailed mesh (both had materials and texture \u0022none\u0022 applied). Then I imported them into Unity\u0027s asset folder and used the detailed mesh as child in the gameobject hierarchy. Under Mesh Collider I pressed the circle to the right of Mesh (at the bottom) and selected the collision mesh .obj. That worked liked a charm, and tried it out in game now and normal maps and everything was applied. \u003C/p\u003E\u003Cp\u003EThen I tried one export with the collision mesh as a child in the hierarchy in Blender with it invisible. Then one time with it at the same level in the hierarchy in Blender and invisible. Neither of the attempts worked, the two meshes were still fused when imported into Unity. Don\u0027t know what\u0027s wrong with that. Would love for that method to work since it\u0027s slightly less work but oh well. Just happy it works now! Thanks once again!\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-07-30T00:57:35Z","Content":"\n\u003Cp\u003Eglad to hear you got it working. exporting bits separately is no problem for unity, everything is a GameObject, just with different functions tacked on. You can even combine different meshes for new parts without any modeling at all. Visibility settings in 3D apps don\u0027t apply in Unity, if you turn something invisible and use \u0022Export Selected\u0022 option instead of \u0022Export\u0022, there\u0027s a chance it doesn\u0027t get exported at all because you can\u0027t select invisible objects in the viewport.\u003C/p\u003E\n"}]}