{"TopicId":33568,"ForumId":35,"TopicTitle":"[WIN/MAC/LINUX] KSP Trajectory Optimization Tool v1.6.9 [New MATLAB Version!]","CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-18T04:59:31Z","PageNum":31,"Articles":[{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-07-15T04:01:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AppleDavidJeans\u0022 data-cite=\u0022AppleDavidJeans\u0022\u003E\u003Cdiv\u003ECan you make a version for Mac please? This tool looks very useful. I\u0027d appreciate it if you did that for all the Mac users out there.\u003Cp\u003EAlso, I had an idea: You could work with the MechJeb devs to integrate this powerful tool into Mechjeb.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry, I\u0027m not able to. I would need a Mac install of MATLAB to work on that, and sadly I don\u0027t have that. \u003C/p\u003E\u003Cp\u003EAs far as mechjeb integration goes, I already have code to generate maneuver nodes in KSP. You can use that to create maneuvers and MechJeb to execute them. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Walsht9","CreatedById":103614,"CreatedDateTime":"2014-07-16T01:04:11Z","Content":"\n\u003Cp\u003ECan anyone tell me how to properly time my burn for a flyby maneuver? I\u0027ve spent a very long time trying to get it to work but I haven\u0027t once gotten close. Are there any tools that let you snap a node to a specific true anomaly? Am I missing something? Any help would be greatly appreciated.\u003C/p\u003E\n"},{"CreatedByName":"AppleDavidJeans","CreatedById":84275,"CreatedDateTime":"2014-07-19T00:32:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003ESorry, I\u0027m not able to. I would need a Mac install of MATLAB to work on that, and sadly I don\u0027t have that. \u003Cp\u003EAs far as mechjeb integration goes, I already have code to generate maneuver nodes in KSP. You can use that to create maneuvers and MechJeb to execute them. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think you could try hacking your comp to run on OS X. I\u0027ve seen my dad do it once, but that\u0027s very risky territory.\u003C/p\u003E\n"},{"CreatedByName":"TeddyDD","CreatedById":28806,"CreatedDateTime":"2014-07-19T11:11:40Z","Content":"\n\u003Cp\u003EMayby someone with mac and mathlab could compile this stuff from source \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-07-20T16:28:01Z","Content":"\n\u003Cp\u003EI don\u0027t think a Mac version is in the cards any time soon guys, sorry. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"dlrk","CreatedById":60033,"CreatedDateTime":"2014-07-20T18:48:06Z","Content":"\n\u003Cp\u003EI have what can only be described as an irritating question:\u003C/p\u003E\u003Cp\u003ECan KSPTOT on Windows connect to KSP with KSPTOTConnect on Linux\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-07-20T19:16:14Z","Content":"\n\u003Cp\u003EIt should be able to. Can you try and let me know?\u003C/p\u003E\n"},{"CreatedByName":"dlrk","CreatedById":60033,"CreatedDateTime":"2014-07-20T21:28:48Z","Content":"\n\u003Cp\u003EIt works! 10char\u003C/p\u003E\n"},{"CreatedByName":"dlrk","CreatedById":60033,"CreatedDateTime":"2014-07-21T20:52:59Z","Content":"\n\u003Cp\u003EAlso got one more quick question, for using Mission Architect, is there a way to estimate the orbital elements for the initial orbit before launch?\u003C/p\u003E\u003Cp\u003EI can\u0027t seem to get orbital information from KSP or upload maneuveur nodes(and was also unable to do so on Windows). Once I connect with MCC, I can get UT time, but it just hangs when I try to get orbital information, except I can get orbital info from the Orb Ops screen.\u003C/p\u003E\u003Cp\u003EWhen I try to upload a maneuveur node, the connection test is OK, but I then get connection refused\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-21T22:13:54Z\u0022 title=\u002207/21/2014 10:13  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 21, 2014\u003C/time\u003E by dlrk\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"mstrfalco","CreatedById":73805,"CreatedDateTime":"2014-07-22T23:14:17Z","Content":"\n\u003Cp\u003ENot sure if I did something wrong but the maneuver nodes are not uploading to KSP anymore, perhaps this is because I am now playing on the 64 bit? Or should this still be working?\u003C/p\u003E\n"},{"CreatedByName":"mstrfalco","CreatedById":73805,"CreatedDateTime":"2014-07-23T18:17:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mstrfalco\u0022 data-cite=\u0022mstrfalco\u0022\u003E\u003Cdiv\u003ENot sure if I did something wrong but the maneuver nodes are not uploading to KSP anymore, perhaps this is because I am now playing on the 64 bit? Or should this still be working?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EScratch that. I forgot to put the KSPTOTConnect folder back in gamedata. derp \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-07-24T08:45:15Z","Content":"\n\u003Cp\u003Efinally spent some more time in Mission Architect. I actually designed and built the craft I intend to fly over there so I was able to input proper weight for the initial_state, not that it really matters any besides telling me I can indeed get there with what I\u0027m using \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E I suppose I can adjust my fuel weight in the VAB to match the remaining shown in the Final State window to see how much delta-v I will have remaining once I\u0027m in orbit.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.blade-edge.com/misc/Kerbin%20to%20Duna.zip\u0022 rel=\u0022external nofollow\u0022\u003EKerbin to Duna mission plan\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAgain, this was built from the Laythe tutorial. I followed that up to the point where I optimized to hit Duna\u0027s SOI and stopped with my Pe a little ways inside Ike\u0027s orbit (that\u0027s just where I happened to stop the optimizer). Then I added a circularize maneuver and a coast to visualize it. Then I went back and added a coast event to a burn halfway along my travel time from Kerbin to Duna. I optimized the coast at Event 6 using the minimize inclination function with bounds of 78 to 79, as my target inclination is 78.8 for my SAR SCAN instrument. I only used the Central Body and Inclination constraints. By happenstance it dropped my SMA down close to the 1068km I need to be at, but when I tried using the minimize distance function, I added an SMA constraint of 1068 to 1069 (to the existing inc and central body constraints) and the optimizer could do nothing but screw up my inclination and increase my SMA. Not a huge deal tho as once I\u0027m in orbit I can tweak it that little bit - nailing the inclination prior to orbital injection was key for saving me lots of fuel!\u003C/p\u003E\u003Cp\u003EI still have a little over an Earth month of in-game time until my TDI Burn date, so just working on getting the rocket built to get up into orbit ahead of time. Wish me luck! Any suggestions on the mission plan are appreciated.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-07-25T01:12:58Z","Content":"\n\u003Cp\u003EHonestly, it looks great. I don\u0027t see anything else I would do differently. Nice work! And do keep me/us updated as to how the mission goes. Feel free to advertise KSPTOT and MA if you post to another place other than this thread. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"raziel420","CreatedById":42384,"CreatedDateTime":"2014-07-25T01:36:29Z","Content":"\n\u003Cp\u003EI would totally love it if someone made this output for MechJeb autopilot, or even kOS \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/68089-0-24-kOS-Scriptable-Autopilot-System-v0-13-1-2014-7-18\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/68089-0-24-kOS-Scriptable-Autopilot-System-v0-13-1-2014-7-18\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-07-25T01:59:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EHonestly, it looks great. I don\u0027t see anything else I would do differently. Nice work! And do keep me/us updated as to how the mission goes. Feel free to advertise KSPTOT and MA if you post to another place other than this thread. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWill do. It will be exposed through my KSP twitter in November when this mission planning and launch will be. Obviously I will have flown it long before then so I can let you know how it goes sooner.\u003C/p\u003E\u003Cp\u003EAlso, been playing around with the Multi-flyby sequencer but haven\u0027t gotten it to give me anything useful yet. I\u0027m going to mess around a bit more before crying for help tho. Would love to get a Voyager-type mission off soon\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-25T03:37:54Z\u0022 title=\u002207/25/2014 03:37  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 25, 2014\u003C/time\u003E by Gaiiden\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2014-07-28T02:09:49Z","Content":"\n\u003Cp\u003EArrowstar,\u003C/p\u003E\u003Cp\u003EYour progress on KSPTOT is truly amazing. I love this tool.\u003C/p\u003E\u003Cp\u003EI\u0027m trying to compile the source for v1.1.5 on an OS X machine (with Matlab R2013a) so that I don\u0027t need a VM just for this tool, but I\u0027m running into some difficulty with a couple of routines that you have compiled up as .mexw32 files. Since I\u0027m running on a Mac, I can\u0027t use the Win32 compiled binaries.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E./src/KSPTOT_matlab/getKeplerFromState_Alg_mex.mexw32\u003Cbr\u003E./src/KSPTOT_matlab/helper_methods/astrodynamics/getKeplerFromState_Alg.mexw32\u003Cbr\u003E./src/KSPTOT_matlab/helper_methods/astrodynamics/getStatefromKepler_Alg.mexw32\u003Cbr\u003E./src/KSPTOT_matlab/helper_methods/astrodynamics/solveKepler.mexw32\u003Cbr\u003E./src/KSPTOT_matlab/helper_methods/math/crossARH.mexw32\u003Cbr\u003E./src/KSPTOT_matlab/helper_methods/math/dotARH.mexw32\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI suspect the math files are merely compiled versions of the .m files of the same name, but the four Kepler files elude me. It looks like these are your custom vectorized algorithms. Are the source files in the ZIP somewhere of out of the way? Are you willing to share them out?\u003C/p\u003E\u003Cp\u003EThanks,\u003C/p\u003E\u003Cp\u003E-Brian\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-07-28T02:30:26Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/29126891/preCompKeplerMFiles.zip\u0022 rel=\u0022external nofollow\u0022\u003EGive these a try.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EWarning: I had to dredge these up from my Recycle Bin of all places. I have no idea why I don\u0027t have the original M Files anywhere, but I\u0027m hoping these just got accidentally deleted. Let me know how those work for you. If they don\u0027t work, I\u0027ll see what I can recover still...\u003C/p\u003E\u003Cp\u003EAnd yes, you are correct about the dot/cross product math functions. I think I included the source for those in any event.\u003C/p\u003E\n"},{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2014-07-28T05:06:40Z","Content":"\n\u003Cp\u003EThose files did the trick. I\u0027ve been able to build for OSX, and it seems to be running well.\u003C/p\u003E\u003Cp\u003EA couple of really bizarre UI quirks (menus always appear at a specific point in the screen, regardless of where I move the KSPTOT window) but the calculations are running without apparent problem.\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"AppleDavidJeans","CreatedById":84275,"CreatedDateTime":"2014-07-28T15:37:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bk2w\u0022 data-cite=\u0022bk2w\u0022\u003E\u003Cdiv\u003EThose files did the trick. I\u0027ve been able to build for OSX, and it seems to be running well.\u003Cp\u003EA couple of really bizarre UI quirks (menus always appear at a specific point in the screen, regardless of where I move the KSPTOT window) but the calculations are running without apparent problem.\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow soon before you can get a good Mac build out there?\u003C/p\u003E\n"},{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2014-07-28T16:26:12Z","Content":"\n\u003Cp\u003EArrow,\u003C/p\u003E\u003Cp\u003EOne of the minor issues is path delimiters for the splash logo. Windows uses \u0027\\\u0027 and OSX uses \u0027/\u0027.\u003C/p\u003E\u003Cp\u003EA simple solution appears to be replacing line 61 in splashScreenGUI.m \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ergb = imread(\u0027images\\logo500px.jpg\u0027);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewith \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif isunix\u003Cbr\u003E    rgb = imread(\u0027images/logo500px.jpg\u0027);\u003Cbr\u003Eelse\u003Cbr\u003E    rgb = imread(\u0027images\\logo500px.jpg\u0027);\u003Cbr\u003Eend\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E-Brian\u003C/p\u003E\n"},{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2014-07-28T16:43:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AppleDavidJeans\u0022 data-cite=\u0022AppleDavidJeans\u0022\u003E\u003Cdiv\u003EHow soon before you can get a good Mac build out there?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll have to leave it up to Arrowstar. The menu bug that I\u0027m seeing makes the app awkward to use. In addition, the Matlab-compiled script currently knows nothing of where the MCR libraries are located, so right now the app has to be started via a script that informs the app of where MCR is installed; I haven\u0027t yet figured out how to bundle this script with the app.\u003C/p\u003E\u003Cp\u003E-Brian\u003C/p\u003E\n"},{"CreatedByName":"TeddyDD","CreatedById":28806,"CreatedDateTime":"2014-08-01T10:40:55Z","Content":"\n\u003Cp\u003EThanks to this program I was able to perform flight Kerbin \u0026gt; Eve \u0026gt; Duna\u003C/p\u003E\u003Cp\u003EAnd it was awesome \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Thanks Arrowstar \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2014-08-01T18:00:39Z","Content":"\n\u003Cp\u003EArrowstar,\u003C/p\u003E\u003Cp\u003EIt appears that Squad changed the definition of a \u0027day\u0027 in 0.24. KSP 0.24.2 treats 6 hours as 1 day, while KSPTOT treats 24 hours as 1 day. Also, KSP now defines a years as 426 days, while KSPTOT defines it as 365 days. This means there\u0027s an ambiguity in a lot of the epoch times and durations that KSPTOT lists. I\u0027m presuming that we still want to follow the UT number, and not the years/days/hours number.\u003C/p\u003E\u003Cp\u003E-Brian\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-01T18:08:16Z\u0022 title=\u002208/01/2014 06:08  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 1, 2014\u003C/time\u003E by bk2w\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-08-03T10:29:21Z","Content":"\n\u003Cp\u003EOkay I\u0027m working through a Mun mission at the moment, first one with kerbals so I need extensive planning. This is planned for about 2.5 weeks ahead of the current game time. I used the rendezvous plotter to get my initial Mun burn time and info, circularized and plane-changed to match the orbit of a vessel I want to rendezvous with. From there I went back to the rendezvous plotter with the Final State information from Mission Architect and imported the current orbital information of the target vessel from KSP. However, the red orbit of my kerbed Mun craft seems to be inclined opposite the target vessel. The only thing I notice different in the parameters between the MA and RP is that one has True Anomaly and the other calls for Mean Anomaly. So how do I go about getting the Mean Anomaly for my final orbit?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/IW5qD5l.png\u0022 alt=\u0022IW5qD5l.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/DafNXe7.png\u0022 alt=\u0022DafNXe7.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAlso, it would be helpful if we could select and copy the values from the Final State box for input elsewhere when needed, it\u0027s faster and will reduce errors from typing by hand.\u003C/p\u003E\u003Cp\u003EAlso also, it would be great if the State Log could include \u0026lt;\u0026lt; and \u0026gt;\u0026gt; buttons as well, or something similar. Basically, a way to jump straight to the next Event in the log so I can see things like time and remaining fuel weight.\u003C/p\u003E\u003Cp\u003EI\u0027m actually starting to feel a little bit competent with this thing....\u003C/p\u003E\n"},{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2014-08-04T05:28:55Z","Content":"\n\u003Cp\u003EArrowstar,\u003C/p\u003E\u003Cp\u003EI was inspired by your improvements of the fly-by planner through vectorization to try my hand at some as well. I aimed to speed up the Porkchop plot through vectorizing the lambert solver. It, uh, works amazingly well. Plotting 2500 points in 0.1622 seconds, versus 44.8668. Plotting 62500 points in 2.0 seconds, versus 437 seconds. 280x faster is kinda nice. And I\u0027m absolutely positive I\u0027m still doing some things inefficiently.\u003C/p\u003E\u003Cp\u003EI ended up heavily reworking Oldenhuis\u0027s lambert.m into lambert_vector.m to vectorize the solutions. I also used the \u003Ca href=\u0022http://www.mathworks.com/matlabcentral/fileexchange/25977-mtimesx-fast-matrix-multiply-with-multi-dimensional-support\u0022 rel=\u0022external nofollow\u0022\u003Emtimesx\u003C/a\u003E routine to enable multi-dimensional matrix multiplies. Ends up being very handy for storing position and velocity vectors in a higher-order matrix, and still being able to calculate each vector\u0027s 2-norm and otherwise manipulate the individual vectors. Finally, computePorkChopData.m had to be modified to marshall all the data in the matrices needed for lambert_vector. It\u0027s been a fun weekend exercise. I\u0027m happy to pass the files on to you, if you\u0027d like.\u003C/p\u003E\u003Cp\u003E-Brian\u003C/p\u003E\n"}]}