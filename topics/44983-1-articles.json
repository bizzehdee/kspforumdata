{"TopicId":44983,"ForumId":29,"TopicTitle":"[HOW-TO] Using custom CG shaders in KSP","CreatedByName":"asmi","CreatedById":59068,"CreatedDateTime":"2013-09-05T01:57:40Z","PageNum":1,"Articles":[{"CreatedByName":"asmi","CreatedById":59068,"CreatedDateTime":"2013-09-05T01:57:40Z","Content":"\n\u003Cp\u003EHello,\u003C/p\u003E\u003Cp\u003EAs you might know, it\u0027s possible to load your own shaders into KSP that uses fixed pipeline, but not custom CG shaders as runtime lacks CG compiler and so it\u0027s unable to compile the shader. Well, as it turned out, it \u003Cstrong\u003Eis\u003C/strong\u003E possible to do that with little trickery. Here\u0027s how:\u003C/p\u003E\u003Cp\u003E1. put your shader into some Unity project\u003C/p\u003E\u003Cp\u003E2. open it in Unity\u003C/p\u003E\u003Cp\u003E3. find the shader in the asset explorer, right click it and select \u0022Reimport\u0022\u003C/p\u003E\u003Cp\u003E4. navigate into your Unity project\u0027s Temp folder. \u003C/p\u003E\u003Cp\u003EThere will be a file named \u0022CgBatchOutput.shader\u0022. Open it up and it will contain your \u003Cstrong\u003Ecompiled\u003C/strong\u003E shader. Now you can load up it\u0027s contents however you want (hardcode it into the code, embed it as a resource in dll, put it as a stand-alone file), and the pass this text into constructor of Material object. Bingo! Now you can leverage however complex and cool shaders you want!\u003C/p\u003E\u003Cp\u003EA word of caution though - if you opt to use some advanced shader features (like Geometry shaders for example), be aware that there might be users with hardware that doesn\u0027t support them. In this case you can either provide a fallback solution, or provide some other sensible reaction to the user.\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-09-08T23:41:43Z","Content":"\n\u003Cp\u003ESo, I could conceivably import my Crysis fur shader....\u003C/p\u003E\n"},{"CreatedByName":"Majiir","CreatedById":7550,"CreatedDateTime":"2013-09-08T23:58:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwaster\u0022 data-cite=\u0022Starwaster\u0022\u003E\u003Cdiv\u003ESo, I could conceivably import my Crysis fur shader....\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, because KSP is built for DX9 and thus doesn\u0027t support geometry shaders.\u003C/p\u003E\n"},{"CreatedByName":"asmi","CreatedById":59068,"CreatedDateTime":"2013-09-09T00:02:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Majiir\u0022 data-cite=\u0022Majiir\u0022\u003E\u003Cdiv\u003ENo, because KSP is built for DX9 and thus doesn\u0027t support geometry shaders.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIsn\u0027t it using OpenGL?\u003C/p\u003E\u003Cp\u003EAnyways I think it\u0027s worth trying.\u003C/p\u003E\n"},{"CreatedByName":"comham","CreatedById":43245,"CreatedDateTime":"2014-08-17T22:48:24Z","Content":"\n\u003Cp\u003EI can\u0027t seem to get this to work. Perhaps it was just an unintended half-feature in an old version of Unity?\u003C/p\u003E\n"},{"CreatedByName":"MartGonzo","CreatedById":65764,"CreatedDateTime":"2014-08-17T22:52:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwaster\u0022 data-cite=\u0022Starwaster\u0022\u003E\u003Cdiv\u003ESo, I could conceivably import my Crysis fur shader....\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Majiir\u0022 data-cite=\u0022Majiir\u0022\u003E\u003Cdiv\u003ENo, because KSP is built for DX9 and thus doesn\u0027t support geometry shaders.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShame, imagine how cool hairy rockets would be!\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-08-18T10:04:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022comham\u0022 data-cite=\u0022comham\u0022\u003E\u003Cdiv\u003EI can\u0027t seem to get this to work. Perhaps it was just an unintended half-feature in an old version of Unity?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt works fine. It\u0027s used in MJ and I do it in SmokeScreen too.\u003C/p\u003E\n"},{"CreatedByName":"comham","CreatedById":43245,"CreatedDateTime":"2014-08-18T14:06:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EIt works fine. It\u0027s used in MJ and I do it in SmokeScreen too.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou are quite right, I tried the same instructions today and they worked. Now to find out how I get the shader working with a kerbtown model.\u003C/p\u003E\n"}]}