{"TopicId":106871,"ForumId":55,"TopicTitle":"New Heat System causes memory leak","CreatedByName":"teraflops","CreatedById":142710,"CreatedDateTime":"2015-05-02T14:18:51Z","PageNum":4,"Articles":[{"CreatedByName":"Engineer of Stuff","CreatedById":106757,"CreatedDateTime":"2015-05-21T16:48:31Z","Content":"\n\u003Cp\u003EHave you notified the containment team? Memorie leaks are dangerous.\u003C/p\u003E\n"},{"CreatedByName":"VaporTrail","CreatedById":83184,"CreatedDateTime":"2015-05-21T17:10:19Z","Content":"\n\u003Cp\u003EJust ran into this myself, (even though I run a modded install) \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[Orbit Targeter]: Target is null\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\u003Cbr\u003E\u003Cbr\u003EActive Vessel is in atmosphere. Cannot save.\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\u003Cbr\u003E\u003Cbr\u003EActive Vessel is in atmosphere. Cannot save.\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\u003Cbr\u003E\u003Cbr\u003Etlsf_create: Pool size must be between 3208 and 1073745020 bytes.\u003Cbr\u003ECrash!!!\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHave yet to try with temp gagues off, but in my case, (and others that I\u0027ve read) it appears it\u0027s not the temp going up that causes the leak, but rather it appears (to me, at least) to be the parts cooling off (or the game code attempting it) while \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Ein atmosphere\u003C/span\u003E that triggers it. The same spaceplane that is suffering the issue made it to orbit with engines heated to the same level or more as the wings on the way down, and the engines completely cooled in orbit. The wings heat up on reentry, and then when I get about 10km altitude (10.5km to be more exact, around which the atmosphere changes in some significant way) I suddenly get CTD\u0027d. \u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EAm about to attempt the F-10 workaround.\u003C/span\u003E F-10 workaround seems good. Successful landing on second attempt (found out I was \u003Cem\u003Ealso\u003C/em\u003E running very close to max RAM consumption... as I had a RAM-crash on my first attempt). Did some part pruning and managed a successful landing on second attempt. Jeb is back at KSP, and all is right with the wor... JEB. Get off of that booster, that\u0027s meant for a thirty ton payload. No, not in a minute... Aw heck, here we go again...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-21T17:55:30Z\u0022 title=\u002205/21/2015 05:55  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 21, 2015\u003C/time\u003E by VaporTrail\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"vetrox","CreatedById":69796,"CreatedDateTime":"2015-05-21T17:30:06Z","Content":"\n\u003Cp\u003EThank u op!\u003C/p\u003E\u003Cp\u003EThis has driven me mad. Twice I have been doing low altitude flights to north pole (cos u know, rockets are too mainstream) and after 40 minutes it would crash! 250ms @10-12km causing 2 landing gear to get warm. At least now I know the cause\u003C/p\u003E\n"},{"CreatedByName":"Tobyz28","CreatedById":72108,"CreatedDateTime":"2015-05-21T18:54:52Z","Content":"\n\u003Cp\u003EHow is this not fixed yet? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E This bug\u0027s terrible / game breaking especially for a 1.0 release...\u003C/p\u003E\n"},{"CreatedByName":"Hamster","CreatedById":104767,"CreatedDateTime":"2015-05-21T20:42:10Z","Content":"\n\u003Cp\u003EYep.. happened me as well, now I see that F10 should solve the issue, I will try next time.\u003C/p\u003E\n"},{"CreatedByName":"SnakyLeVrai","CreatedById":135852,"CreatedDateTime":"2015-05-21T22:15:53Z","Content":"\n\u003Cp\u003Ewrite the following line in Steam\u0027s launch options (all attached, lower case):\u003C/p\u003E\u003Cp\u003E-force-opengl\u003C/p\u003E\u003Cp\u003EIt will run KSP in opengl mode. If you don\u0027t have Steam, I figure you could write that in KSP\u0027s shortcut...\u003C/p\u003E\u003Cp\u003EMethod is not mine, don\u0027t know who found it. But I sure as hell thank this person.\u003C/p\u003E\u003Cp\u003EYou\u0027ll experience minor graphical glitches, slightly lower fps performance but that\u0027s nothing compared to the impressive improvement for memory usage. From 2.8Gb right after loading my saved game (!!!), I dropped to 1.8Gb only and can now play for a long time.\u003C/p\u003E\u003Cp\u003EYou\u0027ll loose antialiasing though. Reactivate it through nvidia control panel by overriding the application\u0027s setting. If you run on ATI, sorry can\u0027t help you :\\ I play on nvidia only.\u003C/p\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2015-05-21T23:16:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SnakyLeVrai\u0022 data-cite=\u0022SnakyLeVrai\u0022\u003E\u003Cdiv\u003Ewrite the following line in Steam\u0027s launch options (all attached, lower case):\u003Cp\u003E-force-opengl\u003C/p\u003E\u003Cp\u003EIt will run KSP in opengl mode. If you don\u0027t have Steam, I figure you could write that in KSP\u0027s shortcut...\u003C/p\u003E\u003Cp\u003EMethod is not mine, don\u0027t know who found it. But I sure as hell thank this person.\u003C/p\u003E\u003Cp\u003EYou\u0027ll experience minor graphical glitches, slightly lower fps performance but that\u0027s nothing compared to the impressive improvement for memory usage. From 2.8Gb right after loading my saved game (!!!), I dropped to 1.8Gb only and can now play for a long time.\u003C/p\u003E\u003Cp\u003EYou\u0027ll loose antialiasing though. Reactivate it through nvidia control panel by overriding the application\u0027s setting. If you run on ATI, sorry can\u0027t help you :\\ I play on nvidia only.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is not a fix, is already well known of, and causes more problems than it fixes. Besides all of that, it won\u0027t help at all anyway because the memory leak is exponential, even if KSP is using less memory to begin with when the leak makes it reach 3.6 it will still crash, using open-gl will break half your game and maybe keep it from crashing for an extra 30 seconds.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-21T23:18:55Z\u0022 title=\u002205/21/2015 11:18  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 21, 2015\u003C/time\u003E by raidernick\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SnakyLeVrai","CreatedById":135852,"CreatedDateTime":"2015-05-22T15:09:57Z","Content":"\n\u003Cp\u003EWow, then I apologize for trying to help and swear I won\u0027t dare contributing again if there is the slightest risk of not bringing miracle solutions O_o\u003C/p\u003E\u003Cp\u003ERegardless.\u003C/p\u003E\u003Cp\u003EOf course it\u0027s not a fix: it\u0027s an acceptable workaround as far as I know. Worked like a charm in my case. I used to CTD every 5 minutes, no joke, now I can play 2 hours straight before crashing. I can handle the few glitches, like the move and rotate gizmos in the VAB \u0026amp; SPH that don\u0027t properly show up. That\u0027s quite minor compared to repeated CTD. It made the game turn from \u0022unplayable and enraging\u0022 to \u0022playable and fun\u0022.\u003C/p\u003E\u003Cp\u003EUntil now I haven\u0027t experienced anything close to breaking half the game as you said: are there any critical issues brought by opengl?\u003C/p\u003E\n"},{"CreatedByName":"WeirdCulture","CreatedById":76591,"CreatedDateTime":"2015-05-22T15:57:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022raidernick\u0022 data-cite=\u0022raidernick\u0022\u003E\u003Cdiv\u003E using open-gl will break half your game and maybe keep it from crashing for an extra 30 seconds.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan you prove this statement? especially the \u0022it will breake half your game\u0022?\u003C/p\u003E\n"},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-05-30T22:56:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022raidernick\u0022 data-cite=\u0022raidernick\u0022\u003E\u003Cdiv\u003EThat is not a fix, is already well known of, and causes more problems than it fixes. Besides all of that, it won\u0027t help at all anyway because the memory leak is exponential, even if KSP is using less memory to begin with when the leak makes it reach 3.6 it will still crash, using open-gl will break half your game and maybe keep it from crashing for an extra 30 seconds.\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022WeirdCulture\u0022 data-cite=\u0022WeirdCulture\u0022\u003E\u003Cdiv\u003ECan you prove this statement? especially the \u0022it will breake half your game\u0022?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, how does it break your game (besides a few minor graphical glitches). In fact, I use a lot of mods and KSP hits the 3.5 level by the time it finishes starting up without -force-opengl, with it, it reins in the memory usage, somehow, and the few minor graphical glitches are worth being able to play with lots of mods.\u003C/p\u003E\u003Cp\u003EAlso, there is something wierd going on with the temperature overlay, it seems to get stuck on parts and makes parts give a colored glow. I bet theres maybe a memory leak there.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-30T22:58:12Z\u0022 title=\u002205/30/2015 10:58  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by smjjames\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-30T22:58:22Z","Content":"\n\u003Cp\u003ESome people have been having difficulty getting KSP to run with -force-opengl now, it doesn\u0027t really break your game, it just isn\u0027t reliable.\u003C/p\u003E\n"},{"CreatedByName":"Jart","CreatedById":101732,"CreatedDateTime":"2015-06-01T23:24:36Z","Content":"\n\u003Cp\u003EOh Thank you thank you thank you for this thread hugs to all! F10 lol saved my game\u003C/p\u003E\n"},{"CreatedByName":"Blitz4","CreatedById":98492,"CreatedDateTime":"2015-06-08T10:25:59Z","Content":"\n\u003Cp\u003Ev1.0.2.842 - memory leak still there.\u003C/p\u003E\n"},{"CreatedByName":"maceemiller","CreatedById":130574,"CreatedDateTime":"2015-06-08T18:16:49Z","Content":"\n\u003Cp\u003EI dont get it? I have the gauges on with no problems at all? I dont use opengl either? I run ksp on 2 machines:\u003C/p\u003E\u003Cp\u003EMy laptop:\u003C/p\u003E\u003Cp\u003Ei3 processor\u003C/p\u003E\u003Cp\u003E8GB RAM\u003C/p\u003E\u003Cp\u003EIntel HD intergrated graphics\u003C/p\u003E\u003Cp\u003EMy PC:\u003C/p\u003E\u003Cp\u003EDUAL CORE 3GHZ processor\u003C/p\u003E\u003Cp\u003E3GB RAM\u003C/p\u003E\u003Cp\u003EATI HD6670 graphics card\u003C/p\u003E\u003Cp\u003EI dont understand how many people are getting these crashes. I use a few mods (off the top of my head):\u003C/p\u003E\u003Cp\u003EMechjeb\u003C/p\u003E\u003Cp\u003EHot rockets\u003C/p\u003E\u003Cp\u003EEVE\u003C/p\u003E\u003Cp\u003EKER\u003C/p\u003E\u003Cp\u003EDocking Alignment\u003C/p\u003E\u003Cp\u003EChatterer\u003C/p\u003E\u003Cp\u003E....and possibly a few more I cant remember right now.\u003C/p\u003E\u003Cp\u003EI run in full graphic settings on both machines (my laptop does get a little warm admittedly, my PC is always fine) however I can play for 10 hours straight if I like without one crash, even with the temperature gauges on.\u003C/p\u003E\u003Cp\u003EAm I just lucky?\u003C/p\u003E\u003Cp\u003EEDIT: Just saw this was an unmodded thread.....if this makes a difference please tell me, however id expect more RAM usage would be more of a problem. It just works fine for me on my weak machines?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-08T18:23:13Z\u0022 title=\u002206/08/2015 06:23  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 8, 2015\u003C/time\u003E by maceemiller\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-06-08T18:19:08Z","Content":"\n\u003Cp\u003EIt\u0027s not the gauges, it never was, it\u0027s the PPFX edge highlighter from the Unity3D asset store.\u003C/p\u003E\u003Cp\u003EThat shader only works when the Unity/KSP built-in anti-aliasing is enabled, if it\u0027s off so will PPFX, and you won\u0027t have the memory leak.\u003C/p\u003E\n"},{"CreatedByName":"Blitz4","CreatedById":98492,"CreatedDateTime":"2015-06-08T21:24:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sal_vager\u0022 data-cite=\u0022sal_vager\u0022\u003E\u003Cdiv\u003EIt\u0027s not the gauges, it never was, it\u0027s the PPFX edge highlighter from the Unity3D asset store.\u003Cp\u003EThat shader only works when the Unity/KSP built-in anti-aliasing is enabled, if it\u0027s off so will PPFX, and you won\u0027t have the memory leak.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks sal_vager! I also read your post here explaining what it is: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/103163-edge-highlighting-ppfx?p=1603268\u0026amp;viewfull=1#post1603268\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/103163-edge-highlighting-ppfx?p=1603268\u0026amp;viewfull=1#post1603268\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EPPFX edge highlighter enables the the highlighting (the red glow) of the parts itself.\u003C/p\u003E\n"},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-06-11T17:54:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sal_vager\u0022 data-cite=\u0022sal_vager\u0022\u003E\u003Cdiv\u003EIt\u0027s not the gauges, it never was, it\u0027s the PPFX edge highlighter from the Unity3D asset store.\u003Cp\u003EThat shader only works when the Unity/KSP built-in anti-aliasing is enabled, if it\u0027s off so will PPFX, and you won\u0027t have the memory leak.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUh, I don\u0027t have PPFX enabled because no hardware support for some reason and yet I still see the red (sometimes orange to yellow) glow.\u003C/p\u003E\u003Cp\u003EI do have -force-opengl though, and anti-aliasing is set to off, and I\u0027m still having some sort of memory leak going on.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-06-11T18:55:25Z","Content":"\n\u003Cp\u003EThere\u0027s two glows, the PPFX edge glow which \u003Ca href=\u0022https://www.assetstore.unity3d.com/en/#!/content/3813\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003Elooks like this \u003C/strong\u003E\u003C/a\u003Eand the Squad part glow that covers the whole part.\u003C/p\u003E\u003Cp\u003EPPFX needs the built-in Unity anti-aliasing enabled to function, even if it\u0027s overridden by your driver AA.\u003C/p\u003E\u003Cp\u003E-force-opengl has been a bit weird since 1.0, and doesn\u0027t work for everyone, it\u0027s a Unity engine command line switch so if it\u0027s broke there\u0027s nothing we can do to fix it.\u003C/p\u003E\u003Cp\u003EKSP still uses a lot of RAM for the pqs terrain stuff, so check your ram is levelling off, and not just continually climbing, if it\u0027s climbing all the time it\u0027s a leak.\u003C/p\u003E\n"},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-06-11T20:30:53Z","Content":"\n\u003Cp\u003EThe temp gauges still seem to cause a memory leak, or something is anyway, I\u0027m still getting huge jumps in memory usage that don\u0027t decrease when around hot places like Moho or when using hot engines.\u003C/p\u003E\u003Cp\u003EI\u0027d like SQUAD to fix the memory leak that is there so that we can see what OTHER memory leaks there are.\u003C/p\u003E\u003Cp\u003EHonestly, I think they should devote one patch/dev cycle to just fixing memory leaks.\u003C/p\u003E\n"},{"CreatedByName":"Timk","CreatedById":146121,"CreatedDateTime":"2015-06-13T05:54:52Z","Content":"\n\u003Cp\u003EI have had 2-3 major crashes after many hours of getting to Duna and back and then at the end of re-entry I get the dreaded \u0022KSP.exe has stopped\u0022 or something like that. I guess the temperature gauge thing is causing this. If it is this well known, why no fix, other than having to remember to disable temperature gauges (F10)?\u003C/p\u003E\n"},{"CreatedByName":"regulator","CreatedById":146193,"CreatedDateTime":"2015-06-13T08:04:33Z","Content":"\n\u003Cp\u003Emeters seems to make bonkers. \u003C/p\u003E\u003Cp\u003EStock install: 4/4 reproduced crashes from same save-game when re-entering atmosphere with 15-20 parts overheating. \u003C/p\u003E\u003Cp\u003ESame save-game, but with disabled meters: 1/1 success.\u003C/p\u003E\u003Cp\u003E27 inch Retina, late 2014. no steam.\u003C/p\u003E\n"},{"CreatedByName":"Javster","CreatedById":74613,"CreatedDateTime":"2015-06-16T16:10:19Z","Content":"\n\u003Cp\u003EMy lightly modded games, several configurations of it, keep crashing. I\u0027ve heard there was a memory leak relating to temperature gauges which Squad are meant to patch in 1.0.3. I also heard there was a way to disable them.\u003C/p\u003E\u003Cp\u003ESo this is my main question:\u003C/p\u003E\u003Cp\u003EHow do I prevent the memory leak?\u003C/p\u003E\u003Cp\u003EAre my 5 or so mods really crashing my game?\u003C/p\u003E\n"},{"CreatedByName":"clivman","CreatedById":139191,"CreatedDateTime":"2015-06-16T16:11:30Z","Content":"\n\u003Cp\u003ESeveral mods disable temp guages, try downloading one of them\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-06-16T16:12:15Z","Content":"\n\u003Cp\u003ETurn off PPFX in the graphical settings and press F10 to turn off the heat gauges and most crashing problems go away.\u003C/p\u003E\u003Cp\u003EFive mods could be causing out of memory issues, depends on what they are. What\u0027s on your list?\u003C/p\u003E\u003Cp\u003EEdit for below: None of those are huge memory hogs, you should be fine.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-16T17:08:39Z\u0022 title=\u002206/16/2015 05:08  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 16, 2015\u003C/time\u003E by Red Iron Crown\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Javster","CreatedById":74613,"CreatedDateTime":"2015-06-16T17:07:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003ETurn off PPFX in the graphical settings and press F10 to turn off the heat gauges and most crashing problems go away.\u003Cp\u003EFive mods could be causing out of memory issues, depends on what they are. What\u0027s on your list?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EChatterer, SmartParts, Stage recovery, Mechjeb2, Kas and KIS. I\u0027ll try your advice. Thanks!\u003C/p\u003E\n"}]}