{"TopicId":35374,"ForumId":36,"TopicTitle":"Rotating solar panels (Unity configuration)","CreatedByName":"Raknark","CreatedById":72450,"CreatedDateTime":"2013-06-30T13:20:48Z","PageNum":1,"Articles":[{"CreatedByName":"Raknark","CreatedById":72450,"CreatedDateTime":"2013-06-30T13:20:48Z","Content":"\n\u003Cp\u003EHi, since there does not seem to be any information as how to make rotating solar panels I decided to give it a shot.\u003C/p\u003E\u003Cp\u003EFirst, the important definitions:\u003C/p\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleDeployableSolarPanel\u003C/p\u003E\u003Cp\u003E sunTracking = true\u003C/p\u003E\u003Cp\u003E raycastTransformName = suncatcher\u003C/p\u003E\u003Cp\u003E pivotName = solarPivot\u003C/p\u003E\u003Cp\u003E isBreakable = false\u003C/p\u003E\u003Cp\u003E resourceName = ElectricCharge\u003C/p\u003E\u003Cp\u003E chargeRate = 0.75\u003C/p\u003E\u003Cp\u003E powerCurve\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E key = 206000000000 0 0 0\u003C/p\u003E\u003Cp\u003E key = 13599840256 1 0 0\u003C/p\u003E\u003Cp\u003E key = 68773560320 0.5 0 0\u003C/p\u003E\u003Cp\u003E key = 0 10 0 0\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EsunTrackting : does the solar panel track the sun? (true/false)\u003C/p\u003E\u003Cp\u003EraycastTransformName : name of the object in Unity that acts as the solar panel face.\u003C/p\u003E\u003Cp\u003Ewhen \u0022suntrakting\u0022 is enabled the \u0022pivotName\u0022 object will rotate to optimize the amount of sunlight that hits this object.\u003C/p\u003E\u003Cp\u003EPivotName : name of the object in Unity that will rotate so that the optimal amount of sunlight hits the \u0022raycastTransformName\u0022 object.\u003C/p\u003E\u003Cp\u003EIsBreakable : can the panels break? breakpoint is the \u0022pivotName\u0022 object (true/false)\u003C/p\u003E\u003Cp\u003EresourceName : name of the resource that the part generate, in the case of solar panels this is of course \u0022Electriccharge\u0022\u003C/p\u003E\u003Cp\u003EchargeRate : maximum chargeRate when the panels directly face the sun.\u003C/p\u003E\u003Cp\u003EpowerCurve : how the angle towards the sun influence the chargeRate. (I have no idea how the values actually influence this.)\u003C/p\u003E\u003Cp\u003EHere is my test solar panel in Unity that I used to figure this out.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/mxXWB9X.png\u0022 alt=\u0022mxXWB9X.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E1. base 2. solarPivot 3. suncatcher 4.global axis\u003C/p\u003E\u003Cp\u003E(4) I used the global x axis as my attachment point (node_attach =0,0,0,1,0,0)\u003C/p\u003E\u003Cp\u003E(1\u0026amp;2)The solarPivot object will rotate around the local y axis. I am not sure if it is the \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201Cbase\u00C3\u00A2\u00E2\u201A\u00AC\u00C2 or \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201CsolarPivots\u00C3\u00A2\u00E2\u201A\u00AC\u00C2 y-axis, so in order to be sure I lined up the local y axis of both objects.\u003C/p\u003E\u003Cp\u003E(3) I used a plane for the \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201Csuncatcher\u00C3\u00A2\u00E2\u201A\u00AC\u00C2 object, since the raycast transformation function will also include the back of the \u00C3\u00A2\u00E2\u201A\u00AC\u00C5\u201Csuncatcher\u00C3\u00A2\u00E2\u201A\u00AC\u00C2 object if it is a mesh object. This means that if you use a mesh object sometimes your solar panel will face away from the sun but still be considered to be in the optimal position.\u003C/p\u003E\u003Cp\u003ETest panel in action.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/08h5ctU.png\u0022 alt=\u002208h5ctU.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"hoojiwana","CreatedById":57079,"CreatedDateTime":"2013-06-30T17:04:57Z","Content":"\n\u003Cp\u003EWow this is great, I\u0027ve been trying to figure out solar panels myself but wasn\u0027t having much luck.\u003C/p\u003E\u003Cp\u003EHave you tied creating all of that with a deploy and retract animation as well? I got stuck trying to figure that out as my test panel wouldn\u0027t trigger as being open after animating.\u003C/p\u003E\n"},{"CreatedByName":"Lillegre","CreatedById":68753,"CreatedDateTime":"2013-06-30T17:39:13Z","Content":"\n\u003Cp\u003EMwahahaa! you are my new favourite person. I had given up working this out and have been working on other projects until now,\u003C/p\u003E\u003Cp\u003EI have a solar anim / deployable, so I will hook up my model with your data tomorrow and report back the results. Thx to Hoojiwana for the heads up on this epic mod info release!\u003C/p\u003E\u003Cp\u003EThe TARDIS may have to wait!\u003C/p\u003E\n"},{"CreatedByName":"hoojiwana","CreatedById":57079,"CreatedDateTime":"2013-06-30T18:14:45Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EpowerCurve\u003Cbr\u003E{\u003Cbr\u003Ekey = 206000000000 0 0 0\u003Cbr\u003Ekey = 13599840256 1 0 0\u003Cbr\u003Ekey = 68773560320 0.5 0 0\u003Cbr\u003Ekey = 0 10 0 0\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe numbers in the key mean altitude from the sun, chargerate multiplier, unknown and unknown.\u003C/p\u003E\u003Cp\u003ESo the first number is the altitude panels produce no power, the second number is Kerbins altitude, the third is Jools, and the first is the surface of the Sun.\u003C/p\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-07-01T14:36:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hoojiwana\u0022 data-cite=\u0022hoojiwana\u0022\u003E\u003Cdiv\u003Eunknown and unknown.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPowercurve is of type FloatCurve, so the third and fourth numbers determine the shape of the curve (IIRC the incoming and outgoing tangents for each point), and are optional.\u003C/p\u003E\n"},{"CreatedByName":"KhaosCorp","CreatedById":61149,"CreatedDateTime":"2013-07-31T19:24:36Z","Content":"\n\u003Cp\u003EThere any info out there on how to set this up for deployable panels? I\u0027m trying to make panels that fold out from a tank and then sun track...\u003C/p\u003E\n"},{"CreatedByName":"Razorcane","CreatedById":66919,"CreatedDateTime":"2013-07-31T21:29:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KhaosCorp\u0022 data-cite=\u0022KhaosCorp\u0022\u003E\u003Cdiv\u003EThere any info out there on how to set this up for deployable panels? I\u0027m trying to make panels that fold out from a tank and then sun track...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s simple. You animate the panels folding out, and then use the animation module for part configurations, and then add the sun tracking.\u003C/p\u003E\n"},{"CreatedByName":"Semni","CreatedById":18709,"CreatedDateTime":"2013-08-01T11:18:36Z","Content":"\n\u003Cp\u003EThis is quite excellent, I will be keeping track of this thread for future use.\u003C/p\u003E\n"},{"CreatedByName":"Absolution","CreatedById":4156,"CreatedDateTime":"2013-08-22T04:18:34Z","Content":"\n\u003Cp\u003EWhat kind of objects can be used as the \u0022suncatcher\u0022? I have a very unusual shape for a solar panel and I would like to create a simple, invisible, panel to act as the \u0022suncatcher\u0022. How can I do that?\u003C/p\u003E\n"},{"CreatedByName":"Azivegu","CreatedById":50726,"CreatedDateTime":"2013-10-31T19:30:06Z","Content":"\n\u003Cp\u003Eis there a way to change the power curve to something more realistic? I would like to send probes to eeloo with more difficulty then it takes now. I\u0027ve also found out that the lowest altitude froms one end of the powercurve (if you go lower it the e/s stays the same and the hihger altitude is the minimum.\u003C/p\u003E\n"},{"CreatedByName":"rasheed","CreatedById":29903,"CreatedDateTime":"2013-10-31T21:26:06Z","Content":"\n\u003Cp\u003ERead the date kid. This was from August. Its now October.\u003C/p\u003E\u003Cp\u003EAnyway, change the 0.5 to something lower.\u003C/p\u003E\n"},{"CreatedByName":"WinkAllKerb\u0026#039;\u0026#039;","CreatedById":78047,"CreatedDateTime":"2013-12-02T13:36:38Z","Content":"\n\u003Cp\u003Ei gave a try making some Solar panel, everything is fine (suncatching, pivot, extend) but one thing: \u003C/p\u003E\u003Cp\u003Ewhen retracting the pivot rotation instanlty jump to the extend anim end value without taking care of the current suncatching orient and then the anim play correctly but this orient \u0022warp\u0022 is kinda annoying.\u003C/p\u003E\u003Cp\u003EAnyone got a clue about this, i tried many things in hierachy both blender and unity and not been able to fix that yet.\u003C/p\u003E\n"},{"CreatedByName":"laggerd","CreatedById":83398,"CreatedDateTime":"2013-12-20T19:20:23Z","Content":"\n\u003Cp\u003Ehow do you make the suncatcher and which axis should you use to point out the capture direction?\u003C/p\u003E\n"},{"CreatedByName":"teohoch","CreatedById":44862,"CreatedDateTime":"2014-04-13T07:13:51Z","Content":"\n\u003Cp\u003Eis there any way to asign 2 pivots in the same module?\u003C/p\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2014-07-07T16:29:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022laggerd\u0022 data-cite=\u0022laggerd\u0022\u003E\u003Cdiv\u003Ehow do you make the suncatcher and which axis should you use to point out the capture direction?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAny part of mesh will work - no need for extra planes or empties. Local Z\u002B of what you signed as a suncatcher is what actually will face the sun.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022teohoch\u0022 data-cite=\u0022teohoch\u0022\u003E\u003Cdiv\u003Eis there any way to asign 2 pivots in the same module?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou may look at Kosmos Pack \u0022Balka\u0022 part. Two modules with different pivots work well. Currently doing the same for my own part pack.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-07T16:33:34Z\u0022 title=\u002207/07/2014 04:33  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 7, 2014\u003C/time\u003E by Dr. Jet\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Haifi","CreatedById":108817,"CreatedDateTime":"2014-08-28T13:06:21Z","Content":"\n\u003Cp\u003ECould you make the raycast use reaction wheels to keep a whole satellite facing the sun? Im intending to mod a solar thermal power plant, basically it will produce thermal power.A huge mirror will reflect sunlight onto a heat exchanger, the exchanger heats up which then will propel a generator. Efficiency of solar thermal is higher by a factor of 5 than with photovoltaic solutions. But I need to figure a way to keep the mirror aligned with the sun.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-16T19:14:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hoojiwana\u0022 data-cite=\u0022hoojiwana\u0022\u003E\u003Cdiv\u003EHave you tied creating all of that with a deploy and retract animation as well? I got stuck trying to figure that out as my test panel wouldn\u0027t trigger as being open after animating.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDid anyone know the answer to this question? I\u0027m having this same trouble as well.\u003C/p\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2014-09-16T19:31:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Apollo13\u0022 data-cite=\u0022Apollo13\u0022\u003E\u003Cdiv\u003EDid anyone know the answer to this question? I\u0027m having this same trouble as well.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat your trouble is exactly? \u003C/p\u003E\u003Cp\u003E1) Model your... er... model in Blender and add deployment animation\u003C/p\u003E\u003Cp\u003E2) Import to Unity (animation \u003Cstrong\u003EMUST\u003C/strong\u003E be imported as \u0022Legacy\u0022) and orient/assign all parts/empties needed\u003C/p\u003E\u003Cp\u003E3) Export to KSP\u003C/p\u003E\u003Cp\u003E4) ???\u003C/p\u003E\u003Cp\u003E5) PROFIT!\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-09-16T20:15:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Haifi\u0022 data-cite=\u0022Haifi\u0022\u003E\u003Cdiv\u003ECould you make the raycast use reaction wheels to keep a whole satellite facing the sun? Im intending to mod a solar thermal power plant, basically it will produce thermal power.A huge mirror will reflect sunlight onto a heat exchanger, the exchanger heats up which then will propel a generator. Efficiency of solar thermal is higher by a factor of 5 than with photovoltaic solutions. But I need to figure a way to keep the mirror aligned with the sun.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESet up ModuleDeployableSolarPanel as a fixed panel with a raycast transform for the direction on the model that needs to be pointed at the sun. Then create a plugin that looks at the same raycast transform and autopilots the ship to point it at the sun.\u003C/p\u003E\n"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-04-21T07:40:09Z","Content":"\n\u003Cp\u003Ethis is exactly what I was looking for, thank you so much! will be bookmarking this for later\u003C/p\u003E\n"},{"CreatedByName":"Squiggsy","CreatedById":139947,"CreatedDateTime":"2015-05-06T22:31:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dr. Jet\u0022 data-cite=\u0022Dr. Jet\u0022\u003E\u003Cdiv\u003ELocal Z\u002B of what you signed as a suncatcher is what actually will face the sun.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis doesnt seem to always be the case, I have no idea what is going on with my current solar panels I\u0027m making but it doesnt seem to matter what the local orientation of the raycasttransform is they just want to face side on to the sun constantly and it looks silly, made some solar panels the other day and didn\u0027t have any problems like this at all and as you say they faced Z\u002B towards the sun without any complaint\u003C/p\u003E\u003Cp\u003EYep confirmed it doesnt matter what my raycasttransform\u0027s local direction is these panels just always face side on to the sun (I have tried with local x,y and z of the panel i used as the suncatcher facing outward, as well as making an empty in unity and parenting it to one of the panels and changing its local orientation, no luck), driving me a wee bit nuts now I cannot see quite why this is happening...\u003C/p\u003E\u003Cp\u003ESolved the problem (well Nertea did), local Z\u002B of the pivot will try to face the sun, so it needs to rotate along the Y axis to face its Z\u002B at the sun\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-07T17:54:59Z\u0022 title=\u002205/07/2015 05:54  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 7, 2015\u003C/time\u003E by Squiggsy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sackboy338","CreatedById":78658,"CreatedDateTime":"2015-11-27T02:26:30Z","Content":"\nNow all I need is a way to limit the angles at which the solar panel can turn, so that if the solar panel unfolds close to the base, it won\u0026#39;t clip through it (This obviously doesn\u0026#39;t apply to most solar panels, but it does apply to the design I was thinking of)\n"},{"CreatedByName":"Francois424","CreatedById":98138,"CreatedDateTime":"2016-03-04T21:55:34Z","Content":"\n\u003Cp\u003E\nNecropost warning.\n\u003C/p\u003E\n\u003Cp\u003E\nThank you for this, I was trying to fix a bug with the double-pivot Balka Solar Panels (which, thanks to you\u00A0\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/72450-raknark/\u0026amp;do=hovercard\u0022 data-mentionid=\u002272450\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/72450-raknark/\u0022\u003E@Raknark\u003C/a\u003E\u00A0, although I doubt you\u0027re still on the forums, Is now FIXED !).\u003Cbr\u003E\n\u002B1\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-05T02:50:46Z\u0022 title=\u002203/05/2016 02:50  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 5, 2016\u003C/time\u003E by Francois424\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MacLuky","CreatedById":138597,"CreatedDateTime":"2017-03-22T15:02:28Z","Content":"\n\u003Cp\u003E\nDoubt that the unity setup has changed in the last year, but I still can\u0027t get it working:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Idc1L7Y.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022710\u0022 src=\u0022http://i.imgur.com/Idc1L7Y.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nmount points to the y-axis, config is as follows:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EMODULE\n\t{\n\t\tname = ModuleDeployableSolarPanel\n\t\tretractable = true\n\t\tanimationName = Deploy\n\t\t//secondaryTransformName = mount\n\t\traycastTransformName = panel 5\n\t\tpivotName = mount //local y points to _base\n\t\tisBreakable = false\n\t\tresourceName = ElectricCharge\n\t\tchargeRate = 2.64\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nYet it keeps rotating around the z axis. (and the animation starts deployed but I can probably fix that, seen that problem before)\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s keeping me puzzled as to what is the proper way to align these, any help greatly appreciated.\n\u003C/p\u003E\n\u003Cp\u003E\nC.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}