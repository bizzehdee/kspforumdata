{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":227,"Articles":[{"CreatedByName":"Jebs_SY","CreatedById":169510,"CreatedDateTime":"2017-01-23T00:30:30Z","Content":"[@Nansuchao](https://forum.kerbalspaceprogram.com/index.php?/profile/135151-nansuchao/)\n\n\u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E updated scatterer (also have SVE installed) and my highly modded install boots up with like 5GB memory usage (usual) and quickstarts into the game to the space center. I was working in windows some minutes and the PC was dying by swapping, looked into the task manager and KSP maxed out at 13GB aviable (of my 16GB system). I don\u0027t think this is a situation that is good to experience for a normal user...\n\nAlso I wonder why scatterer says v275 prerelease instead of like v300. Hmm.\n\n**Edited \u003Ctime datetime=\u00222017-01-23T00:32:47Z\u0022 title=\u002201/23/2017 12:32  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by Jebs\\_SY**"},{"CreatedByName":"doktorstick","CreatedById":173230,"CreatedDateTime":"2017-01-23T01:33:04Z","Content":"Check your KSP.log. With the new scatterer (via \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E), mine in scrolling non-stop--every 40 milliseconds.\n\n[LOG 19:23:31.557] [Scatterer] Added eclipse caster Mun for Kerbin  \n\n[LOG 19:23:31.557] [Scatterer] Added eclipse caster Minmus for Kerbin  \n\n[LOG 19:23:31.561] [Scatterer] Atmosphere config found for: Kerbin  \n\n[EXC 19:23:31.574] NullReferenceException: Object reference not set to an instance of an object  \n\n        scatterer.Manager.getDirectionToSun ()  \n\n        scatterer.SkyNode.InitPostprocessMaterial (UnityEngine.Material mat)  \n\n        scatterer.SkyNode.Start ()  \n\n        scatterer.Manager.Awake ()  \n\n        scatterer.Core.Update ()\n\n**Edited \u003Ctime datetime=\u00222017-01-23T01:35:57Z\u0022 title=\u002201/23/2017 01:35  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by doktorstick**"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T01:46:43Z","Content":"I plan on completely building SVE from the ground up tonight to work with scatterer. Please give me a couple of days to work out the issues."},{"CreatedByName":"doktorstick","CreatedById":173230,"CreatedDateTime":"2017-01-23T01:56:31Z","Content":"Based on a hunch from @Jebs\\_SY post RE: versions, I grabbed scatterer from Spacedock and no more spam. Things look OK at the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E.."},{"CreatedByName":"SmarterThanMe","CreatedById":58706,"CreatedDateTime":"2017-01-23T02:46:01Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Jebs\\_SY said:\n\u003E \n\u003E \n\u003E [@Nansuchao](https://forum.kerbalspaceprogram.com/index.php?/profile/135151-nansuchao/)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E updated scatterer (also have SVE installed) and my highly modded install boots up with like 5GB memory usage (usual) and quickstarts into the game to the space center. I was working in windows some minutes and the PC was dying by swapping, looked into the task manager and KSP maxed out at 13GB aviable (of my 16GB system). I don\u0027t think this is a situation that is good to experience for a normal user...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Also I wonder why scatterer says v275 prerelease instead of like v300. Hmm.\n\u003E \n\nI think this is my problem also (possibly why Firefox is crashing simultaneously?)."},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2017-01-23T03:34:54Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Galileo said:\n\u003E \n\u003E \n\u003E I plan on completely building SVE from the ground up tonight to work with scatterer. Please give me a couple of days to work out the issues.\n\u003E \n\nHm, do old Scatterer configs no longer work? I\u0027ve been messing with terrain textures and haven\u0027t checked new Scatterer compatibility yet.\n\n**Edited \u003Ctime datetime=\u00222017-01-23T03:35:17Z\u0022 title=\u002201/23/2017 03:35  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by Avera9eJoe**"},{"CreatedByName":"lewisd","CreatedById":66947,"CreatedDateTime":"2017-01-23T03:37:03Z","Content":"\u003E \n\u003E \n\u003E 50 minutes ago, SmarterThanMe said:\n\u003E \n\u003E \n\u003E I think this is my problem also (possibly why Firefox is crashing simultaneously?).\n\u003E \n\nJust had exactly this with the current latest version of scatterer (0.300) from \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003Eckan\u003C/abbr\u003E. KSP grows to 13\u002B GB before eventually crashing, and my firefox in the background disappears."},{"CreatedByName":"Arcadian Del Sol","CreatedById":169920,"CreatedDateTime":"2017-01-23T05:01:39Z","Content":"just updated via \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E. Im also seeing v275 prerelease while in game. Clouds are black, there\u0027s no water, and I run out of system memory pretty quickly. Is there any settings I can do for now, or should I just be patient and wait for SVE updates?\n\nOr maybe my system just can\u0027t handle the new features?\n\nIntel i5-4430 quad core (3.0ghz)\n\nGeForce GTX 970\n\n8GB ram\n\nEDIT: just saw Galileo\u0027s update that he\u0027s working to rebuild SVE. I\u0027ll be patient and wait, but if anyone can comment on my specs: Im 99.8% sure I would still be fine to run it, but I guess a bit more ram doesn\u0027t hurt?\n\n**Edited \u003Ctime datetime=\u00222017-01-23T05:03:03Z\u0022 title=\u002201/23/2017 05:03  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by Arcadian Del Sol**"},{"CreatedByName":"DerpyMcFeeder","CreatedById":174141,"CreatedDateTime":"2017-01-23T05:33:56Z","Content":"So, I think it\u0027s SVE that\u0027s causing the issue. I didn\u0027t get a crash, but my framerate became so bad that rockets I had no problem flying started to make the clock turn yellow.\n\nI went into \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E and removed everything visual mod related (including SVE), and started adding things back manually. I added back Scatterer, \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E, Planetshine, and Texture Replacer, but didn\u0027t do anything SVE related. Framerate seems to have returned to where it was prior to the update to Scatterer.\n\nAlso, I am seeing that the config menu in game says that the version is 0.275 instead of 0.300. I\u0027m guessing that\u0027s a string issue though."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T07:34:21Z","Content":"For everyone with nullrefs just add this line to every planet in SVE\n\n    mainSunCelestialBody = Sun\n\nThat\u0027s it, it\u0027s because the sun can now be set separately for every planet which is useful for multi-star packs.\n\nWith that said I don\u0027t recommend using SVE with the new cloud integration until it updates. There are new variables that will be unset with the old configs, namely cloudColorMultiplier, cloudScatteringMultiplier, cloudIrradianceMultiplier and volumetricsColorMultiplier. Unless you want to set these up yourself, you\u0027ll have either black clouds or some overbright colors.\n\nFor the version number, it\u0027s just I didn\u0027t update it in game, that\u0027s all, it is the latest version however.\n\n**Edited \u003Ctime datetime=\u00222017-01-23T07:39:05Z\u0022 title=\u002201/23/2017 07:39  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by blackrack**"},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2017-01-23T07:55:01Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) So, i just tested the new (official) release. I have to say that the new \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E integration makes eveything so much more realistic in terms of...well, everything. I have one small issue though.\n\nThis is what i get for Titan after loading a craft in orbit around Titan:\n\nSpoiler\n\n\u003Cimage removed=\u0022\u0022 by=\u0022\u0022 user=\u0022\u0022\u003E\n\u003C/image\u003E\n\nAnd this is after opening the \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E GUI and simply pressing \u0022Apply\u0022:\n\nSpoiler\n\n\u003Cimage removed=\u0022\u0022 by=\u0022\u0022 user=\u0022\u0022\u003E\n\u003C/image\u003E\n\nI experimented with the various cloud parameters but nothing fixes it, besides reapplying the \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E configs. It is also possible that i have done something that Scatterer does not like, since most of the other bodies required only minor tweaking to get them right.\n\n**Edited \u003Ctime datetime=\u00222017-01-28T08:41:28Z\u0022 title=\u002201/28/2017 08:41  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 28, 2017\u003C/time\u003E by Phineas Freak**\n  \nRemove images (not needed anymore)"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T08:15:21Z","Content":"I have SVE looking pretty good ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) i just have to test everything"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T08:54:49Z","Content":"\u003E \n\u003E \n\u003E 59 minutes ago, Phineas Freak said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) So, i just tested the new (official) release. I have to say that the new \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E integration makes eveything so much more realistic in terms of...well, everything. I have one small issue though.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E This is what i get for Titan after loading a craft in orbit around Titan:\n\u003E \n\u003E \n\u003E \n\u003E Reveal hidden contents\n\u003E \n\u003E \n\u003E [![scatterer_01.png](https://raw.githubusercontent.com/PhineasFreak/PicBin/master/PicBin/Generic_images/scatterer_01.png)](https://raw.githubusercontent.com/PhineasFreak/PicBin/master/PicBin/Generic_images/scatterer_01.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E And this is after opening the \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E GUI and simply pressing \u0022Apply\u0022:\n\u003E \n\u003E \n\u003E \n\u003E Reveal hidden contents\n\u003E \n\u003E \n\u003E [![scatterer_02.png](https://raw.githubusercontent.com/PhineasFreak/PicBin/master/PicBin/Generic_images/scatterer_02.png)](https://raw.githubusercontent.com/PhineasFreak/PicBin/master/PicBin/Generic_images/scatterer_02.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E I experimented with the various cloud parameters but nothing fixes it, besides reapplying the \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E configs. It is also possible that i have done something that Scatterer does not like, since most of the other bodies required only minor tweaking to get them right.\n\u003E \n\nWhat\u0027s the issue here? Looks normal to me. It just looks like it has too dense a cloud cover, which is more or less the same as Eve looks for me with the stock \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E settings (check the last album I posted).\n\n**Edited \u003Ctime datetime=\u00222017-01-23T08:55:08Z\u0022 title=\u002201/23/2017 08:55  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by blackrack**"},{"CreatedByName":"Phineas Freak","CreatedById":146521,"CreatedDateTime":"2017-01-23T09:48:23Z","Content":"I was expecting the look of the sample picture #2. Instead i got the result of the picture #1. As i mentioned, i have to manually reapply the \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E settings every time i launch a new instance of KSP, as it does not persist."},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T10:19:53Z","Content":"This is my Eve with my cloud textures... i dont know why its terminators are so smooth...\n\n![r2sRgam.png](http://i.imgur.com/r2sRgam.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T10:32:36Z","Content":"\u003E \n\u003E \n\u003E 48 minutes ago, Phineas Freak said:\n\u003E \n\u003E \n\u003E I was expecting the look of the sample picture #2. Instead i got the result of the picture #1. As i mentioned, i have to manually reapply the \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E settings every time i launch a new instance of KSP, as it does not persist.\n\u003E \n\nDon\u0027t, reapplying \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E settings breaks the cloud integration in most cases, in which case you might as well disable it from the main menu.\n\n\u003E \n\u003E \n\u003E 16 minutes ago, Galileo said:\n\u003E \n\u003E \n\u003E This is my Eve with my cloud textures... i dont know why its terminators are so smooth...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![r2sRgam.png](http://91.68.209.8/bmi/i.imgur.com/r2sRgam.png)](http://91.68.209.8/bmi/i.imgur.com/r2sRgam.png \u0022Enlarge image\u0022)\n\u003E \n\nThis a good thing or a bad thing? And btw for the cloud tinting thing, the thinner the atmo, the harder the terminator will be. Since your Kerbin config has thin atmo and probably Eve a thick one, that explains it. I think atmospheres shouldn\u0027t be made thinner than the default scatterer Kerbin.\n\n**Edited \u003Ctime datetime=\u00222017-01-23T10:37:25Z\u0022 title=\u002201/23/2017 10:37  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by blackrack**"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T10:42:39Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Don\u0027t, reapplying \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E settings breaks the cloud integration in most cases, in which case you might as well disable it from the main menu.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E This a good thing or a bad thing? And btw for the cloud tinting thing, the thinner the atmo, the harder the terminator will be. Since your Kerbin config has thin atmo and probably Eve a thick one, that explains it. I think atmospheres shouldn\u0027t be made thinner than the default scatterer Kerbin.\n\u003E \n\nyeah its a good thing for sure.. i was just showing that it is possible to get good results.. I did figure out that thicker atmospheres look better and have adjusted accordingly.. this update is so good!"},{"CreatedByName":"alexus","CreatedById":163084,"CreatedDateTime":"2017-01-23T11:02:03Z","Content":"why there is no shadow of the planet on the rings?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T11:21:20Z","Content":"\u003E \n\u003E \n\u003E 18 minutes ago, alexus said:\n\u003E \n\u003E \n\u003E why there is no shadow of the planet on the rings?\n\u003E \n\nBecause it\u0027s a kopernicus feature, go find it somewhere in the kopernicus thread."},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T11:22:50Z","Content":"oh [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), what have you done\n\n![j4rWUrq.png](http://i.imgur.com/j4rWUrq.png)"},{"CreatedByName":"Leandro Basi","CreatedById":160634,"CreatedDateTime":"2017-01-23T11:29:21Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Galileo said:\n\u003E \n\u003E \n\u003E This is my Eve with my cloud textures... i dont know why its terminators are so smooth...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![r2sRgam.png](http://i.imgur.com/r2sRgam.png)](http://i.imgur.com/r2sRgam.png \u0022Enlarge image\u0022)\n\u003E \n\nYou are using terrain shadows? I have these strange patterns mentioned in initial page of the f\u00F3rum. Only unchecking terrain shadows box i can see a image like this in eve!"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T11:52:20Z","Content":"![BxIlcQS.png](http://i.imgur.com/BxIlcQS.png)  \n![prz6ZPS.png](http://i.imgur.com/prz6ZPS.png)![DXyOu9p.png](http://i.imgur.com/DXyOu9p.png)![DXyOu9p.png](http://i.imgur.com/DXyOu9p.png)![cIFNkN2.png](http://i.imgur.com/cIFNkN2.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-01-23T12:03:29Z","Content":"\u003E \n\u003E \n\u003E 40 minutes ago, Galileo said:\n\u003E \n\u003E \n\u003E oh [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), what have you done\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![j4rWUrq.png](http://91.68.209.8/bmi/i.imgur.com/j4rWUrq.png)](http://91.68.209.8/bmi/i.imgur.com/j4rWUrq.png \u0022Enlarge image\u0022)\n\u003E \n\nWhat am I looking at here?"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T12:09:37Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E What am I looking at here?\n\u003E \n\nperfection lol\n\nhere have another\n\n![IWLlDxF.png](http://i.imgur.com/IWLlDxF.png)  \n![yE9wXbF.png](http://i.imgur.com/yE9wXbF.png)\n\nI think SVE needed to be rebuilt anyway... I should have been in bed hours ago... its 6am here...\n\n**Edited \u003Ctime datetime=\u00222017-01-23T12:12:47Z\u0022 title=\u002201/23/2017 12:12  PM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 23, 2017\u003C/time\u003E by Galileo**"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-01-23T12:33:44Z","Content":"only issues i see so far is the white mountains and the black clouds. The clouds still change color at sunset and sunrise but remain black the rest of the time\n\n![J2Nod5A.png](http://i.imgur.com/J2Nod5A.png)\n\n![WI9uVk5.png](http://i.imgur.com/WI9uVk5.png)"}]}