{"TopicId":117090,"ForumId":36,"TopicTitle":"[WIP][1.8.x] SSTULabs - Low Part Count Solutions (Orbiters, Landers, Lifters) - Dev Thread [11-18-18]","CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2015-07-28T18:13:57Z","PageNum":129,"Articles":[{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-18T01:53:11Z","Content":"Updated testing release is available:\n\n[https://github.com/shadowmage45/SSTULabs/releases/tag/0.4.31.112](https://github.com/shadowmage45/SSTULabs/releases/tag/0.4.31.112)\n\nMostly bugfixes for RO, and also fix up the LC-pods losing their model-variant setting.  See the link for full changelog and download links.  Github, Curse, and AVC have all been updated for the new version."},{"CreatedByName":"Sudragon","CreatedById":53192,"CreatedDateTime":"2016-05-18T07:06:42Z","Content":"The TAC-LS MM patch for SSTU, was it in SSTU or over in TAC LS?"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-18T18:25:42Z","Content":"\u003E \n\u003E \n\u003E 11 hours ago, Sudragon said:\n\u003E \n\u003E \n\u003E The TAC-LS MM patch for SSTU, was it in SSTU or over in TAC LS?\n\u003E \n\nIt -was- in SSTU, but I\u0027m not sure that I ever re-enabled/included them after the 1.1 update.  Will see about cleaning those up for the next release\n\n\u003E \n\u003E \n\u003E On Tuesday, May 17, 2016 at 9:29 AM, Brainpop14 said:\n\u003E \n\u003E \n\u003E Can you add more variations of the AJ-10 engine? I want to be able to make more things, like a Delta II second stage, or maybe a transtage. So can you add more variations of the AJ-10 so I can do that?\n\u003E \n\nPossibly in the future.  Certainly not within the next few weeks/months though, already have quite enough on my plate that needs finishing.  Please keep in mind though that enabling recreations of real-world rockets is **not** the purpose of SSTU; if the engines do not serve a distinct purpose/need I likely will not be making them.  Edit:  CobaltWolf\u0027s BDB mod may have more of what you are looking for; he does more real-world recreation rockets: \n\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/122020-112-bluedog-design-bureau-massive-stockalike-parts-pack-v0105-krikkit-may1616/\u0026do=embed\u0022\u003E\u003C/iframe\u003E\n\n**Edited \u003Ctime datetime=\u00222016-05-18T18:26:53Z\u0022 title=\u002205/18/2016 06:26  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 18, 2016\u003C/time\u003E by Shadowmage**"},{"CreatedByName":"CobaltWolf","CreatedById":105588,"CreatedDateTime":"2016-05-18T18:34:00Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, Shadowmage said:\n\u003E \n\u003E \n\u003E Edit:  CobaltWolf\u0027s BDB mod may have more of what you are looking for; he does more real-world recreation rockets:\n\u003E \n\n[@VenomousRequiem](https://forum.kerbalspaceprogram.com/index.php?/profile/137373-venomousrequiem/) can attest to the fact that we have all too many AJ-10s, including Delta II and Transtage.\n\n**Edited \u003Ctime datetime=\u00222016-05-18T18:34:32Z\u0022 title=\u002205/18/2016 06:34  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 18, 2016\u003C/time\u003E by CobaltWolf**"},{"CreatedByName":"VenomousRequiem","CreatedById":137373,"CreatedDateTime":"2016-05-18T18:37:36Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, CobaltWolf said:\n\u003E \n\u003E \n\u003E [@VenomousRequiem](https://forum.kerbalspaceprogram.com/index.php?/profile/137373-venomousrequiem/) can attest to the fact that we have all too many AJ-10s, including Delta II and Transtage.\n\u003E \n\nDon\u0027t even get me started"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-19T01:20:56Z","Content":"Updated testing release is available:\n\n[https://github.com/shadowmage45/SSTULabs/releases/tag/0.4.31.113](https://github.com/shadowmage45/SSTULabs/releases/tag/0.4.31.113)\n\nSeveral more bugfixes, and adds a ton of new texture-swap options for tanks and engine mounts, courtesy of [@JoseEduardo](https://forum.kerbalspaceprogram.com/index.php?/profile/127759-joseeduardo/)"},{"CreatedByName":"ComatoseJedi","CreatedById":91567,"CreatedDateTime":"2016-05-19T02:11:07Z","Content":"[@JoseEduardo](https://forum.kerbalspaceprogram.com/index.php?/profile/127759-joseeduardo/)\n\n![D996IKM.jpg](http://i.imgur.com/D996IKM.jpg)"},{"CreatedByName":"GoldForest","CreatedById":77770,"CreatedDateTime":"2016-05-19T04:32:55Z","Content":"Is anyone else having a problem with the right-click menu not updating the propellants/electrical charge/etc when you change its size?"},{"CreatedByName":"Acvila","CreatedById":155891,"CreatedDateTime":"2016-05-19T04:59:21Z","Content":"you need to have another click to see the changes."},{"CreatedByName":"19chickens","CreatedById":121179,"CreatedDateTime":"2016-05-19T06:36:04Z","Content":"Was just looking for a TACLS patch!"},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2016-05-19T13:15:32Z","Content":"... wrong thread\n\n**Edited \u003Ctime datetime=\u00222016-05-19T13:19:52Z\u0022 title=\u002205/19/2016 01:19  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 19, 2016\u003C/time\u003E by Jimbodiah**"},{"CreatedByName":"Qwarkk","CreatedById":154770,"CreatedDateTime":"2016-05-19T14:13:36Z","Content":"Did the most recent update releases intentionally change the smallest size of certain engine mounts? i.e I used to use a RL-10A-4 engine in five radial configuration and the mount-S-II at 2.5m. Now though it wont size to anything below 3.1250m. Just want to check before updating all my crafts to fit."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-19T14:46:34Z","Content":"\u003E \n\u003E \n\u003E 10 hours ago, GoldForest said:\n\u003E \n\u003E \n\u003E Is anyone else having a problem with the right-click menu not updating the propellants/electrical charge/etc when you change its size?\n\u003E \n\nHmm.. I recently changed some of the resource updating stuff because of some null-reference problems I was running into; there is a chance that this negatively impacted the in-editor updates as well (it was intended to catch cases of newly-launched craft/not crash while initializing the flight scene).\n\n\u003E \n\u003E \n\u003E 20 minutes ago, Qwarkk said:\n\u003E \n\u003E \n\u003E Did the most recent update releases intentionally change the smallest size of certain engine mounts? i.e I used to use a RL-10A-4 engine in five radial configuration and the mount-S-II at 2.5m. Now though it wont size to anything below 3.1250m. Just want to check before updating all my crafts to fit.\n\u003E \n\nIntentionally, no.  Did the default mount size for that engine/layout change, or only the minimum?  I did change how the minimum mount size for any layout/mount combination was calculated; removed some really silly code and replaced it with some pure math functions, but it shouldn\u0027t have had too much of an impact on most engines (it should have only removed sizes that were actually too small).  However if the default size changed, that would likely be an error (and -would- impact the minimum size as well).\n\nThe minimum size available should (basically) be the defaultSize - (defaultSize/4) (rounded to next highest increment) (the actual code is quite a bit more complex due to floating point/integer handling)"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-19T16:49:58Z","Content":"One thing that I\u0027m planning for this weekends\u0027 release is cleaning up the current texture-set mess a bit, moving some of the texture sets into the base distribution and having the rest available as a separate download.  This will keep the release upload/download size to a minimum and will still allow for the installation of the full set of textures as desired.\n\nThe question today is:  what textures should be kept in the base distribution?\n\nI\u0027m leaning towards keeping the \u0027historic\u0027 or \u0027real-world-derived\u0027 sets as part of the base pack and moving most of the various colored options into the separate texture-pack.\n\nThis would leave:  \n\nMFT Tanks:\n\n- SLS (stripe set 1)\n- Saturn (stripe set 2)\n- Shuttle (orange, only yellow intertank stringers)\n- Delta-IV (orange, white intertank/stringers only)\n- Gray (for soyuz)\n- Green? (alternate soyuz?)\n\nMUS Tanks:\n\n- Standard/Original (white/silver)\n- SLS/Stripes1\n- Saturn/Stripes2\n- ??  one or two more, gray or green?\n\nMounts:\n\n- Base/Original (varies; generally black and white or green)\n- Orange (shrouds for soyuz 2nd stage, RD-10X, few others)\n- Gray\n\nFairings/Decoupler:\n\n- Base (white/black and white)\n- Stripes and checkers (all)\n- Gray\n\nAny other suggestions/ideas/preferences?"},{"CreatedByName":"Akira_R","CreatedById":117470,"CreatedDateTime":"2016-05-19T17:10:04Z","Content":"\u003E \n\u003E \n\u003E 9 minutes ago, Shadowmage said:\n\u003E \n\u003E \n\u003E One thing that I\u0027m planning for this weekends\u0027 release is cleaning up the current texture-set mess a bit, moving some of the texture sets into the base distribution and having the rest available as a separate download.  This will keep the release upload/download size to a minimum and will still allow for the installation of the full set of textures as desired.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The question today is:  what textures should be kept in the base distribution?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m leaning towards keeping the \u0027historic\u0027 or \u0027real-world-derived\u0027 sets as part of the base pack and moving most of the various colored options into the separate texture-pack.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E This would leave:  \n\u003E   \n\u003E \n\u003E MFT Tanks:\n\u003E \n\u003E \n\u003E \n\u003E - SLS (stripe set 1)\n\u003E - Saturn (stripe set 2)\n\u003E - Shuttle (orange, only yellow intertank stringers)\n\u003E - Delta-IV (orange, white intertank/stringers only)\n\u003E - Gray (for soyuz)\n\u003E - Green? (alternate soyuz?)\n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E MUS Tanks:\n\u003E \n\u003E \n\u003E - Standard/Original (white/silver)\n\u003E - SLS/Stripes1\n\u003E - Saturn/Stripes2\n\u003E - ??  one or two more, gray or green?\n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Mounts:\n\u003E \n\u003E \n\u003E - Base/Original (varies; generally black and white or green)\n\u003E - Orange (shrouds for soyuz 2nd stage, RD-10X, few others)\n\u003E - Gray\n\u003E \n\u003E \n\u003E \n\u003E   \n\u003E \n\u003E Fairings/Decoupler:\n\u003E \n\u003E \n\u003E - Base (white/black and white)\n\u003E - Stripes and checkers (all)\n\u003E - Gray\n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Any other suggestions/ideas/preferences?\n\u003E \n\nThis sounds good to me!\n\nSorry if this has already been addressed at some point, I\u0027m sure that you have thought of this and there must be a reason why it hasn\u0027t been done yet, but hey might as well make sure, is there any way to have a \u0022scroll bar\u0022 (like what is used to change mount style) for changing textures? If that\u0027s not possible could we at least get a previous texture button?\n\nReally digging the new textures btw. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)"},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2016-05-19T17:51:56Z","Content":"I tend not to use the colored version very often, your list seems reasonable."},{"CreatedByName":"Qwarkk","CreatedById":154770,"CreatedDateTime":"2016-05-19T18:19:21Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, Shadowmage said:\n\u003E \n\u003E \n\u003E Intentionally, no.  Did the default mount size for that engine/layout change, or only the minimum?  I did change how the minimum mount size for any layout/mount combination was calculated; removed some really silly code and replaced it with some pure math functions, but it shouldn\u0027t have had too much of an impact on most engines (it should have only removed sizes that were actually too small).  However if the default size changed, that would likely be an error (and -would- impact the minimum size as well).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The minimum size available should (basically) be the defaultSize - (defaultSize/4) (rounded to next highest increment) (the actual code is quite a bit more complex due to floating point/integer handling)\n\u003E \n\nAs far as i can tell, the default size hasn\u0027t changed. And based on that (simplified) calculation, a minimum size of 3.1250m instead of 2.5m would be accurate."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-19T18:29:02Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, Qwarkk said:\n\u003E \n\u003E \n\u003E As far as i can tell, the default size hasn\u0027t changed. And based on that (simplified) calculation, a minimum size of 3.1250m instead of 2.5m would be accurate.\n\u003E \n\nThanks for the confirmation;  Pretty sure I know what is effecting these -- previously I had code that would subtract one additional increment for the min-size, in addition to the size/4 adjustments.\n\nWill see what I can do to clean up that functionality to restore the previously available sizes.  I don\u0027t have the code there specifically to limit options/choices, its merely there to eliminate those choices that would not look very good (e.g. mount obviously way too small); so perhaps having it allow a slightly wider range of sizes isn\u0027t a bad thing (as long as the default size is calculated appropriately, I\u0027m fine if the user wants to select a non-optimal size)."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-19T18:40:59Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Akira\\_R said:\n\u003E \n\u003E \n\u003E This sounds good to me!\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Sorry if this has already been addressed at some point, I\u0027m sure that you have thought of this and there must be a reason why it hasn\u0027t been done yet, but hey might as well make sure, is there any way to have a \u0022scroll bar\u0022 (like what is used to change mount style) for changing textures? If that\u0027s not possible could we at least get a previous texture button?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Really digging the new textures btw. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022)\n\u003E \n\nThe current GUI setup situation is one caused by evolution:  \n**First**, I have to program the GUI controls for texture swapping on a per-module (and sub-part) basis.  Adding a button for a control is like a simple 3 lines of code; adding a text-slider control is closer to 40.  Multiply that out by the number of modules/sub-models that need texture handling, and it\u0027d probably be another 500 lines of code to deal with.  For instance the SRB has three separate texture-swap controls, and each would need its own\u0027 copy of the code; the MUS has 5 controls, MFT has 3, engines have 1, fairings/decouplers each have 1 (x 4 different modules) (at least 16 instances that would need new code).  Additionally when I first set up the system, the text-sliders did not even exist (KSP 1.0.x), so they were not even an option; it simply was not a choice available to me at the time.  \n**Second**, when the system was devised I did not imagine ever having more than 2-3 textures for each model... where a single button is more than adequate.  \n**Third**, time.  Takes \u003C5 minutes to add a simple texture swap button and code, and closer to an hour (per ui control) to do the setup for the text-slider.  Dealing with the sliders requires tons of extra event handling, field validation, and GUI-updating code.  They are really not setup to have their options manipulated at run-time, and cleaning up those issues is a large portion of the extra time and code overhead; it can be done, but is a giant hack that needs to be carefully handled.\n\nI -may- change this out in the (near) future;  I\u0027ll have to take a look and see what I can do about reducing the time/code overhead for each one.... I might be able to devise a more generic and usable set of methods so that I don\u0027t have to duplicate the code 16 times across the modules and sub-model bits."},{"CreatedByName":"ComatoseJedi","CreatedById":91567,"CreatedDateTime":"2016-05-19T18:50:00Z","Content":"How hard would it be to have a mylar type texture with one the mft tanks that excludes the piping on the sides?"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-19T19:10:39Z","Content":"\u003E \n\u003E \n\u003E 16 minutes ago, ComatoseJedi said:\n\u003E \n\u003E \n\u003E How hard would it be to have a mylar type texture with one the mft tanks that excludes the piping on the sides?\n\u003E \n\nImpossible;  the piping is part of the model geometry and not texture -- it would require a completely new set of geometry, models (.mu files), textures, a new part config to use them, and all of the other model-definition config data for their volumes/geometry setup. \n\nThis is already planned (e.g. the MFT-C, for \u0027cryogenic\u0027; single-fuel, no intertank geometry, various \u0027foil\u0027 textures), however no idea if/when I will be able to get to it; at the current rate of progress I\u0027ll burn out long before I get to it (have been trying to get to station parts for what.... like 6 months now?)."},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-19T19:36:09Z","Content":"Working on adding the LanderCore pods to the life-support patches;  the USI-LS patch wasn\u0027t too hard, I\u0027m familliar with those resources.\n\nBut the TAC-LS patch is presenting some problems;  notably, I have no clue what the volumes are for those resources.  Specifically the requirements for oxygen seem... ridiculous... at 40 units/kerbal/day if the units are given in liters; and the food/water values also seem... off at 0.39l of food and 0.28l of water per kerbal per day.\n\nI\u0027m... guessing?... that food and water are 5l units, and that oxygen is...??? no clue on that one.  No way that these things can hold 40l of oxygen/kerbal/day... you would end up with larger o2 tanks than propellant tanks for any non-lko manned mission.\n\nTL:DR;  anyone know what the resource volumes are intended to be for the TAC-LS resources? (Food, Water, Oxygen, Waste, WasteWater, CarbonDioxide)\n\nEdit: Nevermind... CRP has been updated with volume definitions for all of those resources.  Whatever is listed there is what I have to go with.  They still have oxygen listed as 1-liter unit.... so... no clue how to handle that.  The o2 tanks on these pods would be larger than the entire pod."},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-05-19T20:15:05Z","Content":"[@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) My experience with UI\\_ChooseOption is that it doesn\u0027t really require that much code ... what needs to be done that\u0027s requiring you to do so much?\n\n**Edited \u003Ctime datetime=\u00222016-05-19T20:15:26Z\u0022 title=\u002205/19/2016 08:15  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 19, 2016\u003C/time\u003E by blowfish**"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-05-19T20:47:47Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, blowfish said:\n\u003E \n\u003E \n\u003E [@Shadowmage](https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/) My experience with UI\\_ChooseOption is that it doesn\u0027t really require that much code ... what needs to be done that\u0027s requiring you to do so much?\n\u003E \n\nRun-time updating of the current options and current selection.  If the GUI is already open and you update the backing arrays and current field value, the GUI will not update its displayed value without substantial prodding (more precisely it does not automatically update its internal cached \u0027index\u0027 value, which can cause index-out-of-bounds exceptions, so I have to basically force-re-initialize the entire GUI control) ( [https://github.com/shadowmage45/SSTULabs/blob/master/Source/Util/SSTUExtensions.cs#L401-L428](https://github.com/shadowmage45/SSTULabs/blob/master/Source/Util/SSTUExtensions.cs#L401-L428) ).  More time/code is spent on setting up the callback methods, seating the references to those callbacks, initializing the initial backing arrays and initial field value ( [https://github.com/shadowmage45/SSTULabs/blob/master/Source/Module/SSTUModularFuelTank.cs#L387-L394](https://github.com/shadowmage45/SSTULabs/blob/master/Source/Module/SSTUModularFuelTank.cs#L387-L394) ).\n\nAnd with each potential model having its own set of textures, I need to add methods to recalculate the backing arrays every time the model is changed, as well as updating the current GUI selection for the new current value (pulled from the default for the model) ( [https://github.com/shadowmage45/SSTULabs/blob/master/Source/Module/SSTUModularFuelTank.cs#L189-L209](https://github.com/shadowmage45/SSTULabs/blob/master/Source/Module/SSTUModularFuelTank.cs#L189-L209) ).\n\nAdditionally the callback methods for the GUI controls constantly send fake/invalid events.  So, for *each field*, I have to track the \u0027previous\u0027 state and compare that to the current/\u0027supposedly new\u0027 state to know if there actually was a change.  This can be seen, for instance, any time one right-clicks on a part to open the GUI; every GUI control for every module on the part will have its \u0027on value changed\u0027 method called and/or fire editor-ship-modified events even if the value was not actually changed.  This requires even more code to manage tracking and updating of the \u0027previous\u0027 values for the fields (e.g. \u0027previous\u0027 needs to be initialized to \u0027current\u0027 on part load and any time the value is actually changed).\n\nMostly the time/code is spent in working around those updating problems; if I could just set the value of the field and backing arrays and it all \u0027just worked\u0027, it wouldn\u0027t be too much extra code to implement (just the backing array rebuilding).  The rest of the time is spent in the per-module-per-model setup; it is painful and results in massive amounts of (almost) duplicate code... but each module needs to handle its setup slightly differently because of how the various model bits are pulled together to form the finished part (e.g. the MFT module needs to know what transforms are the \u0027nose\u0027, and which is the \u0027tank\u0027; whereas the MSRB needs to know what is a \u0027top cap\u0027, what is a \u0027body\u0027, and what is a \u0027nozzle\u0027; etc).\n\nVery little of that is needed for a button.  I merely validate the \u0027current\u0027 value during OnStart (in case it was an uninitialized part/module) and on subsequent model changes, and the rest of it \u0027just works\u0027 from there.  When the button is pressed it basically calls \u0027currentTexture = modelData.enableNextTexture(currentTexture)\u0027.  No array rebuilding, no hacking-around-gui-stuff to force update the displayed values.\n\nIf you happen to know easier workarounds to any of those problems, I\u0027m all ears ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)   (or if the problems are no longer problems;  I haven\u0027t changed the code much since the early pre-releases and some of them may have been fixed in the stock code by now)."},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-05-19T20:56:29Z","Content":"Ah yeah, it does get a lot more complicated when you have to change it dynamically, doesn\u0027t it?\n\nThe previous value is definitely passed into the on value changed event as a parameter (just as an object but it should be safe to cast). I know there are also (as of 1.1.2) checks in KSP to make sure the event is fired only if the value actually changes, but maybe there are some circumstances under which those checks aren\u0027t run. Might have to experiment a bit."}]}