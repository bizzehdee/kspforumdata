{"TopicId":120933,"ForumId":20,"TopicTitle":"A mod to bind all mods - the ultimate modder\u0026#039;s challenge","CreatedByName":"Moach","CreatedById":9,"CreatedDateTime":"2015-09-15T06:24:58Z","PageNum":1,"Articles":[{"CreatedByName":"Moach","CreatedById":9,"CreatedDateTime":"2015-09-15T06:24:58Z","Content":"\n\u003Cp\u003EHello all,\u003C/p\u003E\u003Cp\u003Elately I\u0027ve been playing KSP as usual, in the only way I know how: With as many mods as I can cram into the limits of RAM overuse...\u003C/p\u003E\u003Cp\u003E...needless to digress, the game crashes more than not - just as I pile on a mod heap I can begin to take proud in, I\u0027m assailed by relentless memory allocation failures, brought on as the game haplessly shoves every single asset it finds under GameData into an unwitting \u0026lt;4GB swath of RAM\u003C/p\u003E\u003Cp\u003Esub-optimal? tell me about it....\u003C/p\u003E\u003Cp\u003Eproblem here is -- a \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/4-HarvesteR\u0022 rel=\u0022external nofollow\u0022\u003Ecertain twin brother of mine\u003C/a\u003E is seemingly of the belief (or was at the time he decided this years ago) that \u0022\u003Ca href=\u0022https://en.wikipedia.org/wiki/Program_optimization#When_to_optimize\u0022 rel=\u0022external nofollow\u0022\u003Epremature optimization is the root of all evil\u003C/a\u003E\u0022 -- a notion that as a fellow game programmer (not affiliated with Squad), I largely disagree to.\u003C/p\u003E\u003Cp\u003Ewhereas I\u0027m sure by that he implied that optimization would come at a later point, it does seem our thirst for new shiny rocket parts has outraced development on that aspect\u003C/p\u003E\u003Cp\u003Ewhich leads us to our problem/opportunity/challenge at hand:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003Ethe problem:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EKSP loads every single bit of \u0022this may be needed at some point\u0022 data it finds under the folder GameData - this is widely known, for it is also the sole principle of the game\u0027s exemplary moddability\u003C/p\u003E\u003Cp\u003EAlas, it does not account for the fact that a lot of people making a lot of awesome mods just may require more memory than one can write an address to in a mere 32 bits of binary digits -- and this is why the whole thing crashes like a house of cards in an earthquake as we earnestly satisfy our individual afflictions of the \u003Cem\u003Emodder\u0027s addiction, \u003C/em\u003Eand do so by uncompromisingly heaping great many \u003Cem\u003Eun\u003C/em\u003Emetric tonnes of \u0022MoAr AwEzUuhM\u0022 into our less-than-fully-prepared copies of the \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Egame\u003C/span\u003E (sorry, \u003Cem\u003ESimulator\u003C/em\u003E)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EThe (potential) Solution:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003Ewhat if - KSP did NOT load every single part, internal space and cockpit \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Edecor\u003C/span\u003E (ok: \u003Cem\u003Eflight instrumentation\u003C/em\u003E) prop it has stocked in PRIOR to actually needing them?\u003C/p\u003E\u003Cp\u003Ewhat if, bear* with me here - It loaded only simple, easily allocatable THUMBNAILS of each part, along with it\u0027s relevant CFG information to display in the editor? -- then EXPANDED those \u003Cem\u003Estand-in \u003C/em\u003Edefinitions of such assets only as they are placed on your newly built \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Edeathtrap\u003C/span\u003E \u003Cem\u003Eground-breakingly designed vessel \u003C/em\u003Eand/or upon encountering a previously launched vessel that contains them?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E* yes, I\u0027ll have a BEAR with me, a big, mean BEAR - All big and brown and covered with hair! - so you better listen to my point, since I have a BEAR, and it\u0027s WITH ME... - I think that\u0027s what the expression is meant to imply, no?\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Ewell, then -- first noticeable thing: a heavily modded game would load in not much longer than a vanilla version... why - that\u0027s pretty good, no?\u003C/p\u003E\u003Cp\u003Eand well - it quite simply, would NOT crash from running out of memory... not unless you somehow manage to heave such an unreasonably vast array of \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Ejunk\u003C/span\u003E \u003Cem\u003Ecreative inventions \u003C/em\u003Eup there that would collectively feature the sum of ALL the parts in your GameData catalog\u003C/p\u003E\u003Cp\u003Eand that\u0027s not just unlikely -- it\u0027s also inadvisable, and a grandly foolish, fruitless endeavor that indeed, nobody could hope to benefit from (specially not your \u003Cem\u003EKermans\u003C/em\u003E)\u003C/p\u003E\u003Cp\u003Eso, crazy people aside -- the \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Emost\u003C/span\u003E \u003Cem\u003Eremaining half \u003C/em\u003Eof us would greatly gain from any one mod that be geared towards addressing the memory issue directly at it\u0027s core in such a way\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EThe challenge: \u003C/strong\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E(any prizes beyond \u0022thanks and optional worship\u0022 purely imaginary, bragging rights: irrevocable and ever-lasting)\u003C/span\u003E\u003C/p\u003E\u003Cp\u003ETo create a mod that overrides the KSP loading sequence -- allowing it to load \u0022low res\u0022 versions of everything under GameData -- then substitutes it \u0022on the fly\u0022 (quite literally) for the real thing, just as (and only \u003Cem\u003Eif\u003C/em\u003E) it becomes needed\u003C/p\u003E\u003Cp\u003Ehow to accomplish that is up to The Challenger -- one may preprocess all assets into low-res format with an external app, storing the full versions elsewhere (or even compressed) for the plugin to pickup as needed... one could also try and see if it\u0027s viable to bypass the loading scene altogether, mayhaps even with an alternative KSP.exe file\u003C/p\u003E\u003Cp\u003Ehowever one chooses to approach it - that is the mission\u003C/p\u003E\u003Cp\u003Enow -- who dares do this most deftly deed? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\u003Cp\u003ECheers\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-15T21:53:16Z\u0022 title=\u002209/15/2015 09:53  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 15, 2015\u003C/time\u003E by Moach\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Elthy","CreatedById":63317,"CreatedDateTime":"2015-09-15T07:33:30Z","Content":"\n\u003Cp\u003EThis would have been great months ago. But with 1.1 around the corner (and 64 bit for windows) the RAM saving isnt important anymore. Reducing the Startuptime would of course be great, but instead we would propably have a small lag everytime we place a new part, i would rather have long startup times...\u003C/p\u003E\n"},{"CreatedByName":"More Boosters","CreatedById":147303,"CreatedDateTime":"2015-09-15T08:27:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Elthy\u0022 data-cite=\u0022Elthy\u0022\u003E\u003Cdiv\u003EThis would have been great months ago. But with 1.1 around the corner (and 64 bit for windows) the RAM saving isnt important anymore. Reducing the Startuptime would of course be great, but instead we would propably have a small lag everytime we place a new part, i would rather have long startup times...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWe need all the RAM for mods!\u003C/p\u003E\n"},{"CreatedByName":"11of10","CreatedById":90592,"CreatedDateTime":"2015-09-15T09:08:23Z","Content":"\n\u003Cp\u003EThere used to be a mod for exactly that: \u003Ca href=\u0022https://github.com/Faark/KspLoadOnDemand/blob/master/LoadOnDemand/KnownIssues.txt\u0022 rel=\u0022external nofollow\u0022\u003ELoad on Demand\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"zeropositivo","CreatedById":133563,"CreatedDateTime":"2015-09-15T09:18:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Elthy\u0022 data-cite=\u0022Elthy\u0022\u003E\u003Cdiv\u003EThis would have been great months ago. But with 1.1 around the corner (and 64 bit for windows) the RAM saving isnt important anymore. Reducing the Startuptime would of course be great, but instead we would propably have a small lag everytime we place a new part, i would rather have long startup times...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot everyone has the benefit of a 64bit OS, or the RAM avaliable to benefit from 64bit in the first place. Having only 4gb of RAM on a PC is a lot more common than you might believe\u003C/p\u003E\n"},{"CreatedByName":"nothingSpecial","CreatedById":118683,"CreatedDateTime":"2015-09-15T20:12:16Z","Content":"\n\u003Cp\u003EIt was funny to read the post. And yes, Load on Demand was doing exactly this, but is is abandoned unfortunately.\u003C/p\u003E\n"},{"CreatedByName":"Moach","CreatedById":9,"CreatedDateTime":"2015-09-15T21:49:11Z","Content":"\n\u003Cp\u003Ewell, it\u0027s licence terms do read: \u003C/p\u003E\u003Cp\u003E \u003Cspan style=\u0022font-family:\u0027Helvetica Neue\u0027;\u0022\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003ELICENSE Do whatever you want as long as you mention that your stuff is based on this and ofc do whatever is inferred by licenses of 3rd party stuff used by this project.\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewhich is pretty neat, I guess - allowing pretty much anyone to take over it and continue on, as long as one mentions where it started and credits Faark (the original author) for it...\u003C/p\u003E\u003Cp\u003EI\u0027d gladly take up this project myself, in case anyone\u0027s wondering... but I fear the upcoming months of stuff I got to do (work, you know, that annoying \u0022real life\u0022 thing) wouldn\u0027t allow me give it the dedication needed to actually see it through completion\u003C/p\u003E\u003Cp\u003Ewhich is why I thought of tossing the idea out for grabs...\u003C/p\u003E\u003Cp\u003E and anyone who makes this happen will rightfully be hailed \u0022The Great Modbinder\u0022 -- The long sung hero of memory allocation for eons cometh! ...or somesuchwise\u003C/p\u003E\u003Cp\u003Ethere is the upcoming 64bit support to consider though... yet, many a mod has overlapped official new developments and continued on to expand in various ways in graceful cooperation (FAR, DeadlyReentry, to name a few)\u003C/p\u003E\u003Cp\u003ESo for now, the challenge still stands, and here we have already a good starting point to go with!\u003C/p\u003E\u003Cp\u003ECheers\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-15T21:52:25Z\u0022 title=\u002209/15/2015 09:52  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 15, 2015\u003C/time\u003E by Moach\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-09-15T23:52:47Z","Content":"\n\u003Cp\u003EYou might also want to look at the OnDemand code in Kopernicus (since biome maps and MapSOs generally are even worse sinks for memory than textures, since you can\u0027t upload them to the GPU and you need to keep them uncompressed).\u003C/p\u003E\n"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2015-09-16T03:17:01Z","Content":"\n\u003Cp\u003EDoes the OnDemand stuff in Kopernicus apply to the stock planets by default? If so, couldn\u0027t you install Kopernicus to possibly save some memory?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-09-16T16:09:02Z","Content":"\n\u003Cp\u003EIt does not, because the maps used by stock planets aren\u0027t files in GameData, they\u0027re part of the assets that are loaded automatically at KSP startup (before it processes GameData).\u003C/p\u003E\n"},{"CreatedByName":"TheMoonRover","CreatedById":136199,"CreatedDateTime":"2015-09-16T16:17:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022zeropositivo\u0022 data-cite=\u0022zeropositivo\u0022\u003E\u003Cdiv\u003ENot everyone has the benefit of a 64bit OS, or the RAM avaliable to benefit from 64bit in the first place. Having only 4gb of RAM on a PC is a lot more common than you might believe\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn fact I\u0027d go so far as to say having more than 4GB is relatively uncommon, at least for laptops.\u003C/p\u003E\u003Cp\u003ESo such a mod would still be useful after 1.1 hits.\u003C/p\u003E\n"}]}