{"TopicId":85408,"ForumId":29,"TopicTitle":"Object always facing KSPs main camera - HELP regarding script","CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-09-25T22:51:31Z","PageNum":1,"Articles":[{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-09-25T22:51:31Z","Content":"\n\u003Cp\u003EBasically, what I\u0027m trying to do is to get an object (any) to always face the main camera in KSP, respectively *you*.\u003C/p\u003E\u003Cp\u003EIf any is not clear enough, it really can be anything, a sphere, a cube, whatever. Setting pivots is not a problem by the way.\u003C/p\u003E\u003Cp\u003EIs it something simple like this?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Evar camera : Transform;\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Efunction Start() {\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E camera = GameObject.FindWithTag(\u0022FlightCamera\u0022).transform;\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E}\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Efunction Update() {\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E transform.LookAt(camera);\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E}\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOr is find not even required?\u003C/p\u003E\u003Cp\u003EWhat about something along these lines:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Evar cam : FlightCamera;\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003Efunction Update() {\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E transform.LookAt(cam.transform);\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E}\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAs far as I\u0027m aware the object has to be placed so that the top points towards Y\u002B, that would be facing up in relativity to the target, and Z\u002B would define the direction that\u0027s facing towards the reference object. \u003C/p\u003E\u003Cp\u003EQuestions:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EUnder what reference is KSPs camera tagged anyway? Is it \u0022FlightCamera\u0022? \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ECan I even refer to it and how? \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EAnd how am I going to set up target in Unity then? \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EMOST IMPORTANTLY:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EHow do I get this to work? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThanks in advance for any help, if any. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Script language isn\u0027t that important, although I guess Javascript is to be favoured.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-26T17:33:43Z\u0022 title=\u002209/26/2014 05:33  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 26, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-09-25T23:32:29Z","Content":"\n\u003Cp\u003EI don\u0027t understand. Are you trying to write a plugin?\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-09-26T15:30:26Z","Content":"\n\u003Cp\u003ENo, it\u0027s about adding a new behaviour script to a gameobject, which defines how its rotation relativ to another gameobject has to be.\u003C/p\u003E\u003Cp\u003EI can target another gameobject in the same scene in a relatively simple manner, but I don\u0027t know how it\u0027s done if the ressources are external, respectively internal in KSP. The actual question is how I can target the main camera without having it in the loaded Unity Scene (which I can\u0027t, can I? Possibly an empty gameobject that\u0027s linked to it and acts as a placeholder? I don\u0027t know how it\u0027s handled in Unity).\u003C/p\u003E\u003Cp\u003EBehaviour scripts are added as components to gameobjects, that\u0027s why this thread is in the Modelling and Texturing Discussion Forum.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EOn the dynamics of modelling and texturing rocket parts \u003Cstrong\u003Eand other related things\u003C/strong\u003E.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOr am I wrong?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-26T15:40:08Z\u0022 title=\u002209/26/2014 03:40  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 26, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-26T15:57:55Z","Content":"\n\u003Cp\u003Ebetter check in the plugin development forum, especially since you are looking for information on how KSP references game objects in and across scenes.\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-09-26T18:02:20Z","Content":"\n\u003Cp\u003EI see, maybe I can get a mod to move this thread... \u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-26T18:58:08Z","Content":"\n\u003Cp\u003EThe main camera in the flight scene can be accesses via \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightCamera.fetch.mainCamera\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003EI suspect that \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EyourObject.transform.LookAt(FlightCamera.fetch.mainCamera.transform.position)\u003C/pre\u003E\u003Cp\u003E will work (with appropriate syntax checking).\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-09-27T05:21:23Z","Content":"\n\u003Cp\u003EThanks I\u0027ll try this, I\u0027m on the way to work now though. Will take a while. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-09-27T18:28:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThe main camera in the flight scene can be accesses via \u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightCamera.fetch.mainCamera\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003EI suspect that \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EyourObject.transform.LookAt(FlightCamera.fetch.mainCamera.transform.position)\u003C/pre\u003E\u003Cp\u003E will work (with appropriate syntax checking).\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo that just doesn\u0027t work. If I do it that way then the part doesn\u0027t even show up.\u003C/p\u003E\u003Cp\u003EI can\u0027t even tell how many variations I tried... \u003C/p\u003E\u003Cp\u003EMost of the time the part loaded just fine (different code but with FlightCamera.fetch.mainCamera), but never rotated.\u003C/p\u003E\u003Cp\u003EBy the way the game crashed two times because of \u0022mono.dll caused an Access Violation\u0022\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-27T18:43:45Z\u0022 title=\u002209/27/2014 06:43  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 27, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-09-29T10:02:15Z","Content":"\n\u003Cp\u003EErr, you said you are adding a behaviour script to a gameobject, but how are you loading the object ? The part tool does not export script. The only way to do that is a plugin\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-09-29T10:20:30Z","Content":"\n\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif\u0022 alt=\u0022:0.0:\u0022\u003E\u003C/p\u003E\u003Cp\u003ESooo KSP basically just says f that Unity function and doesn\u0027t want any srcripts bound to gameobjects?\u003C/p\u003E\u003Cp\u003EQuite shocking I must say... and embarassing on my end. I bet I should\u0027ve noticed that. \u003C/p\u003E\u003Cp\u003EEven as a bloody newbie\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif\u0022 alt=\u0022:blush:\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ll try that and let you know if it works as a plugin, thanks.\u003C/p\u003E\u003Cp\u003EEDIT: Although that doesn\u0027t really explain why it caused the part not to show up or even crash the game...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-29T10:35:14Z\u0022 title=\u002209/29/2014 10:35  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 29, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"}]}