{"TopicId":174838,"ForumId":15,"TopicTitle":"ModuleProceduralFairing problems [Solved]","CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2018-05-11T22:38:47Z","PageNum":1,"Articles":[{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2018-05-11T22:38:47Z","Content":"\n\u003Cp style=\u0022margin-bottom:0in;\u0022\u003E\nI\u0027m trying to make a new fairing part and have run into two problems:\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\n\u003Cp style=\u0022margin-bottom:0in;\u0022\u003E\n\u003Cs\u003EWhat do I do to make the shell in the thumbnail not show up when the part is placed? - sort opposite of the engine fairing. To elaborate \u2013 the stock fairings have a bright white default shell in addition to the fairing base in the editor thumbnail but when the part is added to a ship the default shell is not displayed \u2013 only the procedural shell\u003C/s\u003E. Found the Icon_Only tag - Part doesn\u0027t compile when I use it but I\u0027m thinking this has to be it.\n\u003C/p\u003E\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cp style=\u0022margin-bottom:0in;\u0022\u003E\nModuleProceduralFairing has a Public attribute \u201CfairingNode\u201D that looks like a good candidate for positioning the procedural fairing. So I made a part with a shellTransform positioned appropriately and sure enough \u2013 everything worked. Then, just to make sure I understood what was going on, I moved the shellTransform 1 meter to the left. When I got it in game there was a node 1 meter to the left as expected \u2013 but the procedural fairing still appeared in the original spot. I did have a top stack node at this point so I removed it \u2013 but the fairing still appears in the original spot??? I must be missing something because there should be nothing to tell KSP where to put the fairing.\n\u003C/p\u003E\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp style=\u0022margin-bottom:0in;\u0022\u003E\nAny help with either of these two issues is appreciated.\n\u003C/p\u003E\n\u003Cp style=\u0022margin-bottom:0in;\u0022\u003E\nEdit: The config file:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EPART\n{\nname = Template.Fairing\n\nmodule = Part\nauthor = YourNameHere\n\nMODEL\n{\n\tmodel = Templates/Parts/Fairing/Fairing\n}\nscale = 1\nrescaleFactor = 1\n\nNODE\n{\n     name = BottomNode\n     transform = StackBottom\n     size = 1\n     method = FIXED_JOINT\n}\n\nNODE\n{\n     name = Shell\n     transform = shellTransform\n     size = 1\n     method = FIXED_JOINT\n}\n\nfx_gasBurst_white = 0.0, 0.3, 0.0, 0.0, 1.0, 0.0, deploy\nsound_vent_large = deploy\n\t\nTechRequired = start\nentryCost = 1000\ncost = 100\ncategory = Payload\nsubcategory = 0\ntitle = Template fairing\nmanufacturer = Kracken Snack Industries NLC\ndescription = Fairing Template\nattachRules = 1,0,1,1,0\nmass = 0.05\nthermalMassModifier = 2.0\nskinMassPerArea = 4.0\nskinInternalConductionMult = 0.25\nemissiveConstant = 0.8\ndragModelType = default\nmaximum_drag = 0.2\nminimum_drag = 0.2\nangularDrag = 2\ncrashTolerance = 10\nmaxTemp = 2600\nfuelCrossFeed = True\nstageOffset = 1\nchildStageOffset = 1\ninverseStageCarryover = false\nbulkheadProfiles = size1\ntags = aero )cap cargo cone contain drag fairing hollow inter nose payload protect rocket shroud stage (stor transport\n\nMODULE\n{\n\tname = ModuleProceduralFairing\n\t\n\tnSides = 32\n\tnArcs = 2\t\t\t\t// Default number of sides in editor\n\tnCollidersPerXSection = 8\n\tTextureURL = KSI/Template/Parts/Template_UV\n\t\n\tpanelGrouping = 3\n\tpivot = 0,0.17,0\n\taxis = 0,1,0\n\t\n\tbaseRadius = 0.625\n\tmaxRadius = 2\n\tcapRadius = 0.2\n\tsnapThreshold = 0.1\n\t\n\txSectionHeightMin = 0.1\n\txSectionHeightMax = 3\n\t\n\tedgeSlide = 0.15\n\tedgeWarp = 0\n\tnoseTip = 0.7\n\t\n\tUnitAreaMass = 0.01\n\tUnitAreaCost = 6\t\t\t// cost/sqr unit of paneling\n\t\n\tstagingToggleEnabledEditor = True\n\tstagingToggleEnabledFlight = False\n\tstagingEnableText = Fairing Not Staged\n\tstagingDisableText = Fairing Staged\n\n\tfairingNode = Shell\n}\n\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-06-03T22:12:16Z\u0022 title=\u002206/03/2018 10:12  PM\u0022 data-short=\u00226 yr\u0022\u003EJune 3, 2018\u003C/time\u003E by wasml\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2018-06-03T18:06:39Z","Content":"\n\u003Cp\u003E\nUpdate: the \u0022pivot\u0022 config parameter adjusts the position where the fairing starts while \u0022fairingNode\u0022 appears to be required but has no obvious effect. Meanwhile I found the Icon_Only tag on the stock fairings as suspected but whenever I include the tag anywhere in my model it fails to show in game - with the following error in the log:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 11:24:52.080] PartLoader: Compiling Part \u0027Templates/Parts/Fairing/Fairing/Template.Fairing\u0027\n[ERR 11:24:52.090] PartLoader: Encountered exception during compilation. UnityEngine.UnityException: Transform child out of bounds\n  at (wrapper managed-to-native) UnityEngine.Transform:GetChild (int)\n  at PartLoader.StripTaggedTransforms (UnityEngine.Transform root, System.String tag) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at PartLoader.StripTaggedTransforms (UnityEngine.Transform root, System.String tag) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at PartLoader.StripTaggedTransforms (UnityEngine.Transform root, System.String tag) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at PartLoader.StripTaggedTransforms (UnityEngine.Transform root, System.String tag) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at PartLoader.ParsePart (.UrlConfig urlConfig, .ConfigNode node) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at PartLoader\u002B\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;CompileParts\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ec__Iterator1.MoveNext () [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n\n[ERR 11:24:52.090] PartCompiler: Cannot compile part\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nSimply removing the tag and rewriting the .mu file corrects the problem - the part shows up in game.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m using Unity 2017.1.3 and removed part tools and reinstalled PartTools_AssetBundles_14x.unitypackage just to make sure I wasn\u0027t using the old part tools.\n\u003C/p\u003E\n\u003Cp\u003E\nImported a stock fairing and my fairing in Blender and toggled between them while watching the tags in the property window to make sure there wasn\u0027t a capitalization or underscore problem - didn\u0027t see any difference.\n\u003C/p\u003E\n\u003Cp\u003E\nDoes anyone know of any gotcha\u0027s or have any other ideas that I might try?\n\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2018-06-03T19:02:55Z","Content":"\n\u003Cp\u003E\nWhat does the hierarchy of your part look like? Based on the stacktrace and name, I\u0027d bet there\u0027s a bug in StrippedTaggedTransforms. Try making sure whatever element is tagged with Icon_Only is the very last child of its parent, wherever the tag appears\n\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2018-06-03T22:11:33Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75857-xevilreeperx/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275857\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75857-xevilreeperx/\u0022 rel=\u0022\u0022\u003E@xEvilReeperx\u003C/a\u003E You got it! I had an Icon transform with the Icon_Only tag holding the meshes I didn\u0027t want to appear outside of the thumbnail followed by the stack nodes - I removed the stack nodes in blender and re-added higher up in Unity and it works as advertised now. Thanks!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-06-03T22:37:40Z\u0022 title=\u002206/03/2018 10:37  PM\u0022 data-short=\u00226 yr\u0022\u003EJune 3, 2018\u003C/time\u003E by wasml\u003C/strong\u003E\n\u003Cbr\u003Eclarification\n\u003C/span\u003E\n"}]}