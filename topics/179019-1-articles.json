{"TopicId":179019,"ForumId":29,"TopicTitle":"[1.5] VesselDeltaV Class (as there is an \u0026quot;Instance\u0026quot; for the VesselConstruct)","CreatedByName":"Thygrrr","CreatedById":170612,"CreatedDateTime":"2018-10-16T19:03:27Z","PageNum":1,"Articles":[{"CreatedByName":"Thygrrr","CreatedById":170612,"CreatedDateTime":"2018-10-16T19:03:27Z","Content":"\n\u003Cp\u003E\nI can\u0027t seem to find the docs for VesselDeltaV, despite it being mentioned, in the API documentation.\u003Cbr\u003E\u003Cbr\u003E\nDid I miss something?\u003Cbr\u003E\u003Cbr\u003E\nPS, sorry this made it into the wrong subforum\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-16T19:06:02Z\u0022 title=\u002210/16/2018 07:06  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 16, 2018\u003C/time\u003E by Thygrrr\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Benjamin Kerman","CreatedById":172792,"CreatedDateTime":"2018-10-16T19:31:11Z","Content":"\n\u003Cp\u003E\nHuh, that\u0027s interesting. Maybe \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022114736\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0022 rel=\u0022\u0022\u003E@JPLRepo\u003C/a\u003E\u00A0or \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022105198\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/105198-roverdude/\u0022 rel=\u0022\u0022\u003E@RoverDude\u003C/a\u003E can provide some help with this?\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2018-10-16T20:13:43Z","Content":"\n\u003Cp\u003E\nMoving to C# Plugin Development Help and Support. \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"severedsolo","CreatedById":80345,"CreatedDateTime":"2018-10-16T20:28:22Z","Content":"\n\u003Cp\u003E\nI assume you mean the ShipConstruct in the Editor?\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s accessible through:\n\u003C/p\u003E\n\u003Cp\u003E\nEditorLogic.fetch.ship.vesselDeltaV\n\u003C/p\u003E\n\u003Cp\u003E\nIf you are working on making the DeltaV visible in the editor - I am also working on this and have a working prototype which is almost ready for release.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-16T20:29:37Z\u0022 title=\u002210/16/2018 08:29  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 16, 2018\u003C/time\u003E by severedsolo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Thygrrr","CreatedById":170612,"CreatedDateTime":"2018-10-16T20:49:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223469192\u0022 data-ipsquote-contentid=\u0022179019\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539721702\u0022 data-ipsquote-userid=\u002280345\u0022 data-ipsquote-username=\u0022severedsolo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 minutes ago, severedsolo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf you are working on making the DeltaV visible in the editor - I am also working on this and have a working prototype which is almost ready for release.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCare to share the code at some point? My idea is to not only show it in the Editor, but also in the ship Resource Panel. Like a consumable resource.\u003Cbr\u003E\u003Cbr\u003E\nMy original question was more about the API of that class, though. I can see it in autocomplete and it\u0027s mentioned in the API docs.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-16T20:49:59Z\u0022 title=\u002210/16/2018 08:49  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 16, 2018\u003C/time\u003E by Thygrrr\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"severedsolo","CreatedById":80345,"CreatedDateTime":"2018-10-16T20:50:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223469202\u0022 data-ipsquote-contentid=\u0022179019\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539722975\u0022 data-ipsquote-userid=\u0022170612\u0022 data-ipsquote-username=\u0022Thygrrr\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Thygrrr said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCare to share the code at some point?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSure here you go: \u003Ca href=\u0022https://github.com/severedsolo/StockishDeltaV\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/severedsolo/StockishDeltaV\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Thygrrr","CreatedById":170612,"CreatedDateTime":"2018-10-16T20:52:21Z","Content":"\n\u003Cp\u003E\nThanks so much, I was kinda stuck finding the Engineering Report. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\u003Cbr\u003E\u003Cbr\u003E\nCheers!\n\u003C/p\u003E\n"},{"CreatedByName":"Benjamin Kerman","CreatedById":172792,"CreatedDateTime":"2018-10-17T05:12:01Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/80345-severedsolo/\u0026amp;do=hovercard\u0022 data-mentionid=\u002280345\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/80345-severedsolo/\u0022 rel=\u0022\u0022\u003E@severedsolo\u003C/a\u003E I think what he was asking (and I\u0027m wondering too) was how you found the members of the VesselDeltaV class. On the official API there\u0027s no link to another page with the info.\n\u003C/p\u003E\n"},{"CreatedByName":"severedsolo","CreatedById":80345,"CreatedDateTime":"2018-10-17T06:45:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223469529\u0022 data-ipsquote-contentid=\u0022179019\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539753121\u0022 data-ipsquote-userid=\u0022172792\u0022 data-ipsquote-username=\u0022Benjamin Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Benjamin Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/80345-severedsolo/\u0026amp;do=hovercard\u0022 data-mentionid=\u002280345\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/80345-severedsolo/\u0022 rel=\u0022\u0022\u003E@severedsolo\u003C/a\u003E I think what he was asking (and I\u0027m wondering too) was how you found the members of the VesselDeltaV class. On the official API there\u0027s no link to another page with the info.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh I just used Object Browser in my IDE (VS 2017 in this case):\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s nothing in there that isn\u0027t really obvious what it does. - agree though does seem odd that it\u0027s not at least got \u003Cem\u003Esomething\u003C/em\u003E in the Docs even if its not documented.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022bMv3wjt.png\u0022 class=\u0022ipsImage\u0022 height=\u0022390\u0022 src=\u0022https://i.imgur.com/bMv3wjt.png\u0022 width=\u0022239\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-17T08:54:03Z\u0022 title=\u002210/17/2018 08:54  AM\u0022 data-short=\u00225 yr\u0022\u003EOctober 17, 2018\u003C/time\u003E by severedsolo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2018-10-17T13:35:47Z","Content":"\n\u003Cp\u003E\nThe Vessel class also has a VesselDeltaV instance attached to it in flight, but it seems to be very fussy during launch.\u00A0 Reading out its totalDeltaV values (actual, ASL, and vac), and comparing results to MechJeb\u0027s total \u003Cabbr title=\u0022Delta-V\u0022\u003EDV\u003C/abbr\u003E count, the launch-pad actual \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E was fairly close to what MechJeb decided (1% difference).\u00A0 However, as the vessel climbed through the atmosphere, the actual \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E reported by VDV did not seem to account for \u003Cabbr title=\u0022Specific Impulse (rocketry) or Internet Service Provider\u0022\u003EISP\u003C/abbr\u003E correctly - the reported actual \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E was still about 40 m/s different than the sea-level \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E, while \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E reported a number very close to the VDV vac \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E.\u00A0 Once the vessel was in orbit, the actual \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E simply reported ASL \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E (not vac \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E) for quite a while before it suddenly switched to reporting vac \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nThere were also quite a few times when it reported \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E of 0 for all cases\u00A0without clearing the isReady flag.\u00A0 It might be that I need to kick the SetCalcsDirty() method in VDV fairly regularly - I never called that method, since I didn\u0027t know if Squad was already doing that somewhere.\u00A0 I\u0027m going to go back and see if kicking it every now and then makes a difference.\n\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2018-10-17T18:55:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223469691\u0022 data-ipsquote-contentid=\u0022179019\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539783347\u0022 data-ipsquote-userid=\u002260950\u0022 data-ipsquote-username=\u0022MOARdV\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, MOARdV said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt might be that I need to kick the SetCalcsDirty() method in VDV fairly regularly - I never called that method, since I didn\u0027t know if Squad was already doing that somewhere.\u00A0 I\u0027m going to go back and see if kicking it every now and then makes a difference.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFrom what I can tell it updates the values for all stages in a coroutine about every 4\u00A0seconds, and I think the active stage every 0.2 seconds (and tossing out a big garbage dump for each stage \u003Cimg alt=\u0022:mad:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif\u0022 title=\u0022:mad:\u0022\u003E).\n\u003C/p\u003E\n\u003Cp\u003E\nThere are multiple \u003Cabbr title=\u0022Delta-V\u0022\u003Edv\u003C/abbr\u003E related items in the settings file (look under DELTAV*), I\u0027m not sure if they are available to change in-game.\n\u003C/p\u003E\n\u003Cp\u003E\nAll of this seems fairly pitiful given that both \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E and \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E can do this without bogging down the main thread or generating garbage (I assume, for \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E), and while keeping the values more up-to-date. I can\u0027t imagine either dev/maintainer switching to the stock method, which means most people will experience the stock \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E calculations as nothing but unneeded overhead. Has anyone figured out if they can be turned off easily (turning off the burn time setting doesn\u0027t change anything about the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E calculations)?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-17T18:57:04Z\u0022 title=\u002210/17/2018 06:57  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 17, 2018\u003C/time\u003E by DMagic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-10-17T19:03:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223469879\u0022 data-ipsquote-contentid=\u0022179019\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539802503\u0022 data-ipsquote-userid=\u002257416\u0022 data-ipsquote-username=\u0022DMagic\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, DMagic said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHas anyone figured out if they can be turned off easily (turning off the burn time setting doesn\u0027t change anything about the \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E calculations)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot really easy but it seems to run on a FixedUpdate so you \u0022just\u0022 have to disable the object.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2018-10-17T19:07:53Z","Content":"\n\u003Cp\u003E\nSo now we just need to\u00A0feed the disabled VesselDeltaV object the correct values from a better calculator. Then the stock burn time indicator (which is very nice)\u00A0could still work as indented.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-17T19:08:31Z\u0022 title=\u002210/17/2018 07:08  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 17, 2018\u003C/time\u003E by DMagic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2018-10-17T22:01:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223469879\u0022 data-ipsquote-contentid=\u0022179019\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539802503\u0022 data-ipsquote-userid=\u002257416\u0022 data-ipsquote-username=\u0022DMagic\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, DMagic said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI can\u0027t imagine either dev/maintainer switching to the stock method\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, that\u0027s what I was hoping for.\u00A0 Well, not switching to the stock method, but having a fallback for when neither \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E nor \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E are installed, since I don\u0027t want to have to duplicate the total-vessel \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E calculations myself when that wheel\u0027s been invented a couple of times over in other mods.\n\u003C/p\u003E\n\u003Cp\u003E\nEven calling SetCalcsDirty() every 16 FixedUpdates didn\u0027t help - although it did cause the 0 total \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E to be reported much more frequently.\u00A0 Apparently the \u0027isReady\u0027 flag isn\u0027t getting updated correctly.\u00A0 Once you\u0027re a few kilometers up, the total \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E doesn\u0027t track actual \u003Cabbr title=\u0022Specific Impulse (rocketry) or Internet Service Provider\u0022\u003EISP\u003C/abbr\u003E changes.\u00A0 Nice idea, and probably good enough for static cases (pre-launch, using atmo \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E, and in orbit, using vacuum \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E), but not up to the task of in-atmosphere live updates.\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2018-10-18T03:10:48Z","Content":"\n\u003Cp\u003E\nJust a couple of points:\u003Cbr\u003E\nThe VesselDeltaV class is not published in the API docs for KSP 1.5.0 on purpose. It is expected these classes will have changes in the future.\u003Cbr\u003E\nThe \u003Cabbr title=\u0022Delta-V\u0022\u003EDV\u003C/abbr\u003E calculations and classes are currently only optimized to support the Burn Indicator feature that is part of KSP 1.5.0.\u003Cbr\u003E\nWhilst they are in other scenes - they are not optimized nor would we recommend you create mods that use them in KSP 1.5.0.\u003Cbr\u003E\nCalling SetCalcsDirty() will create more garbage and degrade performance of the game.\u003Cbr\u003E\nA good point was raised about being able to disable VesselDeltaV processing and allow mods to inject their own values into the class - so it will be taken under consideration.\n\u003C/p\u003E\n"},{"CreatedByName":"Thygrrr","CreatedById":170612,"CreatedDateTime":"2018-10-19T18:20:54Z","Content":"\n\u003Cp\u003E\n\u003Cspan\u003EThank you for the clarifications, JPLRepo!\u003C/span\u003E\n\u003C/p\u003E\n"}]}