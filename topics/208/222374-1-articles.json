{"TopicId":222374,"ForumId":208,"TopicTitle":"The R\u0026D facility scene does not appear to honor v-sync [possibly a Wine/Linux issue]","CreatedByName":"krbvax","CreatedById":231742,"CreatedDateTime":"2023-12-31T00:48:24Z","PageNum":1,"Articles":[{"CreatedByName":"krbvax","CreatedById":231742,"CreatedDateTime":"2023-12-31T00:48:24Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003EReported Version:\u003C/strong\u003E\u00A0v0.2.0 (latest) |\u00A0\u003Cstrong\u003EMods:\u00A0\u003C/strong\u003Enone | \u003Cstrong\u003ECan replicate without mods?\u003C/strong\u003E Yes\u00A0\u003Cbr\u003E\n\u003Cstrong\u003EOS:\u003C/strong\u003E\u00A0Wine 9.0-rc3 on Linux | \u003Cstrong\u003ECPU:\u003C/strong\u003E\u00A0AMD Ryzen 7 | \u003Cstrong\u003EGPU:\u003C/strong\u003E\u00A0NVIDIA 3060 Ti | \u003Cstrong\u003ERAM\u003Cspan\u003E:\u00A0\u003C/span\u003E\u003C/strong\u003E32GB\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe R\u0026amp;D facility scene does not appear to respect the v-sync option, creating much more GPU load than expected given the simplicity of the scene.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ESteps to reproduce:\u003C/strong\u003E (assuming a test system with a sufficiently powerful GPU relative to monitor frame rate)\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nEnsure that the V-Sync option in Settings/Graphics is set to \u0022off\u0022.\n\u003C/li\u003E\n\u003Cli\u003E\nGo to the title screen, and observe (such as by checking GPU power consumption) that GPU usage is high.\n\u003C/li\u003E\n\u003Cli\u003E\nChange the V-Sync setting to \u0022on\u0022.\n\u003C/li\u003E\n\u003Cli\u003E\nGo to the title screen, and observe that GPU usage is lower than in step 2.\n\u003C/li\u003E\n\u003Cli\u003E\nCreate or load an Exploration campaign.\n\u003C/li\u003E\n\u003Cli\u003E\nEnter the R\u0026amp;D facility.\n\u003C/li\u003E\n\u003Cli\u003E\nObserve GPU usage.\n\u003C/li\u003E\n\u003Cli\u003E\nOpen the Settings menu and change the V-Sync setting to \u0022off\u0022.\n\u003C/li\u003E\n\u003Cli\u003E\nObserve GPU usage.\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EExpected behavior:\u003C/strong\u003E GPU usage remains low in step 7 due to the low complexity of the scene, then increases in step 9 when V-Sync is disabled.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EObserved behavior:\u003C/strong\u003E GPU usage increases significantly in step 7 and does not change significantly in step 9.\n\u003C/p\u003E\n\u003Cstyle type=\u0022text/css\u0022\u003E\r\n.ipsImage {\r\nwidth: 900px !important;\r\n}\u003C/style\u003E\n"},{"CreatedByName":"Anth","CreatedById":161238,"CreatedDateTime":"2023-12-31T06:53:41Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/profile/231742-krbvax/?do=hovercard\u0022 data-mentionid=\u0022231742\u0022 href=\u0022https://forum.kerbalspaceprogram.com/profile/231742-krbvax/\u0022 id=\u0022ips_uid_6498_6\u0022 rel=\u0022\u0022\u003E@krbvax\u003C/a\u003E\u003Cbr\u003E\nIts working correctly on my system. (Windows 10)\u003Cbr\u003E\nAdded that it might be Wine/Linux related to the title.\n\u003C/p\u003E\n"},{"CreatedByName":"krbvax","CreatedById":231742,"CreatedDateTime":"2023-12-31T06:58:56Z","Content":"\n\u003Cp\u003E\nThanks for the prompt check.\n\u003C/p\u003E\n\u003Cp\u003E\nI do recall that KSP1 (in that case, the native Linux version) had the same problem with R\u0026amp;D as well as similar 2D menu scenes (mission control, astronaut complex etc). Perhaps there was some Linux-incompatible v-sync method used in the code for those scenes which got carried over into KSP2? V-sync definitely has an effect in regular 3D scenes on my system (as with the title screen in my reproduction steps).\n\u003C/p\u003E\n"},{"CreatedByName":"Anth","CreatedById":161238,"CreatedDateTime":"2023-12-31T07:39:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-gramm=\u0022false\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224354269\u0022 data-ipsquote-contentid=\u0022222374\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221704005936\u0022 data-ipsquote-userid=\u0022231742\u0022 data-ipsquote-username=\u0022krbvax\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n24 minutes ago, krbvax said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022 data-gramm=\u0022false\u0022\u003E\n\u003Cp\u003E\nThanks for the prompt check.\n\u003C/p\u003E\n\u003Cp\u003E\nI do recall that KSP1 (in that case, the native Linux version) had the same problem with R\u0026amp;D as well as similar 2D menu scenes (mission control, astronaut complex etc). Perhaps there was some Linux-incompatible v-sync method used in the code for those scenes which got carried over into KSP2? V-sync definitely has an effect in regular 3D scenes on my system (as with the title screen in my reproduction steps).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI wonder is that issue would also happen to other Unity games being run in Linux vs Windows.\n\u003C/p\u003E\n\u003Cp\u003E\nI am actually on holiday. When I saw this one, it was an easy one to test.\u003Cbr\u003E\nYour other ones are still in the waiting room waiting evaluation.\u003Cbr\u003E\nThe Bug Hunters \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/profile/224498-the-space-peacock/?do=hovercard\u0022 data-mentionid=\u0022224498\u0022 href=\u0022https://forum.kerbalspaceprogram.com/profile/224498-the-space-peacock/\u0022 id=\u0022ips_uid_6498_17\u0022 rel=\u0022\u0022\u003E@The Space Peacock\u003C/a\u003E and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/profile/228085-spicat/?do=hovercard\u0022 data-mentionid=\u0022228085\u0022 href=\u0022https://forum.kerbalspaceprogram.com/profile/228085-spicat/\u0022 id=\u0022ips_uid_6498_16\u0022 rel=\u0022\u0022\u003E@Spicat\u003C/a\u003E when they have time will take a look at them and after being processed/evaluated will send them to the public area.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}