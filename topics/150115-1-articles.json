{"TopicId":150115,"ForumId":20,"TopicTitle":"MechJeb not deterministic depending on FPS","CreatedByName":"Chris_C","CreatedById":58544,"CreatedDateTime":"2016-10-15T21:56:22Z","PageNum":1,"Articles":[{"CreatedByName":"Chris_C","CreatedById":58544,"CreatedDateTime":"2016-10-15T21:56:22Z","Content":"\n\u003Cp\u003E\nWhile my laptop isn\u0027t a slouch it certainly doesn\u0027t have a power house for a gpu... that said it can play KSP fairly well with very modest settings.\n\u003C/p\u003E\n\u003Cp\u003E\nHaving taken a break from KSP (I know can you believe it...real life, sooo inconvenient sometimes!) The new update prompted a look see.\n\u003C/p\u003E\n\u003Cp\u003E\nMechJeb was behaving rather poorly, but obviously before posting some vague useless and time wasting \u0022it doesn\u0027t work\u0022 issue on the tracker I though I should investigate further and gather as many clues as I could - see if I could find anything in logs etc... First port of call was reproducing the various issues on another machine, get it onto my desktop and it behaves like an absolute dream...\n\u003C/p\u003E\n\u003Cp\u003E\nIt then dawned on me that most of the input to MechJeb probably happens at intervals ie once every frame probably, given the nature of the calculations - there will be very large differences in output in different input intervals are used... If you\u0027ve ever played with physics libraries changing the number of iterations in solvers or the frame rate will usually have massive impact for similar reasons.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is no doubt obvious to the developers, however I posted here as its not obvious to less technical but avid KSP / MechJeb users.\n\u003C/p\u003E\n\u003Cp\u003E\nI do wonder how many \u0022issues\u0022 on MechJebs tracker at at least partly if not wholly caused by systems running at low frame rates - I wonder if MechJeb shouldn\u0027t dump FPS to the logs every 5-10 seconds (maybe even have a debug mode you must use before having an issue accepted....yeah like people would use that....)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2016-10-16T06:35:16Z","Content":"\n\u003Cp\u003E\nActually, Unity provides an operation that runs at a fixed physics simulation time (20ms of game time). When the ingame time turns yellow or red, Unity\u00A0is slowing down the progression of game time so it can maintain this simulation interval. The physics simulation is run seperately to the displayed frames (you can have any number (0, 1, 2, 3...)\u00A0of physics frames per rendered frame)\n\u003C/p\u003E\n\u003Cp\u003E\nUnless I\u0027m mistaken, physics warp is the only thing that modifies the simulation step (hence the wierd stuff that happens only during physics warp)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-16T06:41:33Z\u0022 title=\u002210/16/2016 06:41  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 16, 2016\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Chris_C","CreatedById":58544,"CreatedDateTime":"2016-10-16T07:00:03Z","Content":"\n\u003Cp\u003E\nSorry mentioning a physics engine was probably a bad analogy for why calculations are interval dependent. I was discussing how mechJeb does its calculations NOT unity....\n\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2016-10-16T07:01:47Z","Content":"\n\u003Cp\u003E\nI was implying that \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E runs any vessel control updates during the unity physics update, ie. at a fixed timestep, as does any other mod doing anything that relies on using a constant timestep\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-16T07:03:20Z\u0022 title=\u002210/16/2016 07:03  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 16, 2016\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Chris_C","CreatedById":58544,"CreatedDateTime":"2016-10-16T12:22:01Z","Content":"\n\u003Cp\u003E\nWhich doesn\u0027t happen exactly every 20ms if an underpowered system is being used....\n\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2016-10-16T13:09:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222807264\u0022 data-ipsquote-contentid=\u0022150115\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476620521\u0022 data-ipsquote-userid=\u002258544\u0022 data-ipsquote-username=\u0022Chris_C\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, Chris_C said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nWhich doesn\u0027t happen exactly every 20ms if an underpowered system is being used....\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s 20ms of game time, not real time. If the system can\u0027t keep up with real time (i.e. the timer turns yellow), the physics ticks are still 20ms of game time. The only thing that changes that ever is using physics warp. Whatever is causing issues on your underpowered system isn\u0027t variable-length physics ticks.\n\u003C/p\u003E\n"},{"CreatedByName":"Chris_C","CreatedById":58544,"CreatedDateTime":"2016-10-16T17:47:37Z","Content":"\n\u003Cp\u003E\nI agree its probably nothing to do with physics ticks\n\u003C/p\u003E\n"}]}