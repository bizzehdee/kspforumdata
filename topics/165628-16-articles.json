{"TopicId":165628,"ForumId":34,"TopicTitle":"[KSP 1.12.x] kOS v1.4.0.0: kOS Scriptable Autopilot System","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2017-09-18T16:56:54Z","PageNum":16,"Articles":[{"CreatedByName":"scimas","CreatedById":178087,"CreatedDateTime":"2018-04-14T06:33:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223353573\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523642882\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you think that X / Y might fail because Y might be zero, and you\u0027d like a bignumber result when Y is zero, try maybe doing this:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Ex / max(y, 0.0001)\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, that\u0027s what I have been doing so far. I was just wondering if there was a better way.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223353573\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523642882\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat would still error out when calculating the division by zero, before it got to doing the min().\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh, I thought the \u0022error when trying to push infinity to stack\u0022 only occurred if I actually assigned the value to a variable.\n\u003C/p\u003E\n"},{"CreatedByName":"Hyperlynx","CreatedById":90829,"CreatedDateTime":"2018-04-14T06:37:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223354056\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523685833\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n31 minutes ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nJust get the kOS version for KSP 1.4.1.\u00A0 It works on KSP 1.4.2 just fine - it\u0027s just that \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E and Spacedock and Curse don\u0027t know that.\u00A0 If you ask them to allow you to install \u0022incompatible\u0022 versions so it will list it, it works.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou misunderstand - I have the 1.4.1 version, but it\u0027s not working.\u003Cbr\u003E\u003Cbr\u003E\nI can put the kOS part on my craft, and old designs using it still work, but right-clicking on it doesn\u0027t give me the button to open the console. I also don\u0027t have a kOS icon on my toolbar, like I used to.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2018-04-14T06:39:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223354064\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523687851\u0022 data-ipsquote-userid=\u002290829\u0022 data-ipsquote-username=\u0022Hyperlynx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Hyperlynx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou misunderstand - I have the 1.4.1 version, but it\u0027s not working.\u003Cbr\u003E\u003Cbr\u003E\nI can put the kOS part on my craft, and old designs using it still work, but right-clicking on it doesn\u0027t give me the button to open the console. I also don\u0027t have a kOS icon on my toolbar, like I used to.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf that was happening to everyone we\u0027d know about it.\u00A0 Others are able to use it.\u00A0 There must be something wrong with the installation.\u00A0 Can you put the output log in a pastebin somewhere and show it?\n\u003C/p\u003E\n"},{"CreatedByName":"Hyperlynx","CreatedById":90829,"CreatedDateTime":"2018-04-14T06:41:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223354065\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523687970\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf that was happening to everyone we\u0027d know about it.\u00A0 Others are able to use it.\u00A0 There must be something wrong with the installation.\u00A0 Can you put the output log in a pastebin somewhere and show it?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh whoops, I didn\u0027t realise you were the \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E. Of course, it must be something at my end. I\u0027ll track down the logs...\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2018-04-14T06:44:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223354061\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523687624\u0022 data-ipsquote-userid=\u0022178087\u0022 data-ipsquote-username=\u0022scimas\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, scimas said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOh, I thought the \u0022error when trying to push infinity to stack\u0022 only occurred if I actually assigned the value to a variable.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe expressions evaluate using a stack, like an RPN calculator, if you\u0027ve ever used one of those.\n\u003C/p\u003E\n\u003Cp\u003E\nset z to x / y \u002B 1.\n\u003C/p\u003E\n\u003Cp\u003E\nfor example ends up being like this:\n\u003C/p\u003E\n\u003Cp\u003E\npush ident string \u0022z\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\npush x\n\u003C/p\u003E\n\u003Cp\u003E\npush y\n\u003C/p\u003E\n\u003Cp\u003E\ndivide\n\u003C/p\u003E\n\u003Cp\u003E\npush 1\n\u003C/p\u003E\n\u003Cp\u003E\nadd\n\u003C/p\u003E\n\u003Cp\u003E\nstore\u00A0 (top of stack now has Z and the value on it, this pops those two things from the stack, storing the value in the variable)\n\u003C/p\u003E\n\u003Cp\u003E\nEvery intermediate step along the way is temporarily on the stack as it goes through the expression.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Hyperlynx","CreatedById":90829,"CreatedDateTime":"2018-04-14T06:48:54Z","Content":"\n\u003Cp\u003E\nAha! So my problem was just that I didn\u0027t know how to read the info in \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E properly, and I actually didn\u0027t have v1.1.5.2 when I thought I did. It\u0027s all good now \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Hyperlynx","CreatedById":90829,"CreatedDateTime":"2018-04-15T03:01:33Z","Content":"\n\u003Cp\u003E\nHm. Is there any way to set up different script directories for different saved games? I have my scripts under Git source control, and would rather like to do that with my ship designs as well, in the one repo. I usually have a craft and a script to launch and operate that craft, but the crafts are stored per save and the scripts are stored globally, at least by default.\u003Cbr\u003E\u003Cbr\u003E\nI guess as a workaround I can have the repo be in ksp/saves/savename/Ships and softlink a scripts directory to the ksp/Ships/Script directory. I just tried putting a subdirectory in boot, with the idea of having each save use a different subdir, but the contents was not recognised. I guess I\u0027ll need to append a namespace to my scripts\u0027 filenames, if I want to keep them from conflicting across saves. Not the end of the world, though, seeing as I\u0027m probably not going to end up running two saves at the same time.\n\u003C/p\u003E\n"},{"CreatedByName":"infinite_monkey","CreatedById":185663,"CreatedDateTime":"2018-04-16T18:55:08Z","Content":"\n\u003Cp\u003E\nI\u0027m not sure if it\u0027s kOS or something else, but after trying a script a LOT of times, failing and reloading, KSP is getting slower and slower. Could there be scripts running in the background if I don\u0027t terminate them before reloading?\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-17T07:10:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223356092\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523904908\u0022 data-ipsquote-userid=\u0022185663\u0022 data-ipsquote-username=\u0022infinite_monkey\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, infinite_monkey said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m not sure if it\u0027s kOS or something else, but after trying a script a LOT of times, failing and reloading, KSP is getting slower and slower. Could there be scripts running in the background if I don\u0027t terminate them before reloading?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve noticed this too, but haven\u0027t tried doing similar steps without kOS to see if it is a plain KSP issue first and foremost. I have read posts where people say there are KSP memory leaks associated with certain actions that reload scenes.\n\u003C/p\u003E\n\u003Cp\u003E\nThere was a worry about a potential memory leak a year ago, but the Devs couldn\u0027t recreate the problem: \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/1960\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/1960\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"scimas","CreatedById":178087,"CreatedDateTime":"2018-04-17T16:39:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223356554\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523949023\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve noticed this too, but haven\u0027t tried doing similar steps without kOS to see if it is a plain KSP issue first and foremost. I have read posts where people say there are KSP memory leaks associated with certain actions that reload scenes.\n\u003C/p\u003E\n\u003Cp\u003E\nThere was a worry about a potential memory leak a year ago, but the Devs couldn\u0027t recreate the problem: \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/1960\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/1960\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere definitely \u003Cem\u003Eis \u003C/em\u003Esome problem of memory leaks, either with mods or stock KSP, but it\u0027s obscure. Very recently, last week or so, I had my \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E, \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E install crash from out of memory problem. I have 16GB of RAM. The game crashed, caused windows display manager or something to crash and I had to hard reboot it. The thing is, it had never happened before that and hasn\u0027t happened since then. And I know I haven\u0027t changed anything in that install, same mods, nothing more installed, nothing removed.\n\u003C/p\u003E\n"},{"CreatedByName":"infinite_monkey","CreatedById":185663,"CreatedDateTime":"2018-04-18T15:01:10Z","Content":"\n\u003Cp\u003E\nHmm, I didn\u0027t notice any memory leaks (I\u0027m playing on Linux), but I wonder why on earth KSP is using 160% CPU (that is, 1.6 cores), even when paused.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EAnother thing I\u0027m struggling with: Is throttle lock back? I don\u0027t know what\u0027s causing this yet, sometimes the it works, sometimes it doesn\u0027t. Trying to land my boosters SpaceX-style, but it fails to activate the engine for the sudicide burn. Boostback works, reentry burn works, suicide burn doesn\u0027t. Even if I quit the script, I can\u0027t control the throttle manually\u00A0\u003C/s\u003E\u003Cimg alt=\u0022:0.0:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_shocked.gif\u0022 title=\u0022:0.0:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-18T15:13:39Z\u0022 title=\u002204/18/2018 03:13  PM\u0022 data-short=\u00226 yr\u0022\u003EApril 18, 2018\u003C/time\u003E by infinite_monkey\u003C/strong\u003E\n\u003Cbr\u003ENevermind, MechJeb was interfering.\n\u003C/span\u003E\n"},{"CreatedByName":"GuyOfNew","CreatedById":139533,"CreatedDateTime":"2018-04-18T22:41:30Z","Content":"\n\u003Cp\u003E\nAlright I am having a REALLY hard with learning this mod. I am a programmer but I feel like things behind the scenes are changing without my knowledge. I have tested the below script multiple times and every time it has worked until now. I have not added any more mods or changed anything about the game. My problem is that the steering no longer works or even locks. It does not steer the vessel and I can still steer it. It used to be that I could not steer it while the script was running and it did steer itself correctly. Anyone able to see what I am doing wrong?\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eclearscreen.\nsas off.\nrcs on.\nset ship:control:mainthrottle to 0.7.\nprint \u0022COUNT DOWN!\u0022.\nwait 1.\nfrom { local countdown is 3. }\nuntil countdown = 0 step { set countdown to countdown - 1. }\ndo {\n  clearscreen.\n  print \u0022COUNT DOWN!\u0022.\n  print countdown.\n  wait 1.\n}\nclearscreen.\nprint \u0022LAUNCH!\u0022.\nstage.\nwait 5.\nlock steering to ship:up.\nprint \u0022GEAR UP\u0022.\nset gear to not gear.\nwait 2.\nprint \u0022SOLAR PANELS DEPLOYED\u0022.\nag10 on.\nwhen ship:altitude \u0026gt; 100 then {\n  print \u0022CLEARED FOR FULL THROTTLE\u0022.\n  set ship:control:mainthrottle to 1.0.\n  return false.\n}\nwhen apoapsis \u0026gt;= 5000 then {\n  print \u0022APOAPSIS ABOVE 5km\u0022.\n  print \u0022TURNING TO 0 DEGREES\u0022.\n  lock steering to heading(90, 0).\n  return false.\n}\nwhen apoapsis \u0026gt;= 25000 then {\n  print \u0022REACHED APOAPSIS OF 25km\u0022.\n  print \u0022ENGINES OFF\u0022.\n  set ship:control:mainthrottle to 0.0.\n  return false.\n}\nwait until ship:apoapsis \u0026gt;= 25000.\nsas on.\nrcs off.\nprint \u0022SAS TURNED ON\u0022.\nprint \u0022---------\u0022.\nprint \u0022SET MANEUVERING NODE FOR\u0022.\nprint \u0022ORBITAL INSERTION BURN\u0022.\nprint \u0022---------\u0022.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EEDIT: I figured it out. It\u0027s a bug between kOS and Extraplanetary Launch pads. When I build a ship with EL pads and run a kOS script the steering does not work. But if I build the ship with EL pads THEN load up another ship more then 2.5 km away then go back and load up the ship built with EL pads then run a kOS script EVERYTHING works including the steering.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-18T23:30:32Z\u0022 title=\u002204/18/2018 11:30  PM\u0022 data-short=\u00226 yr\u0022\u003EApril 18, 2018\u003C/time\u003E by GuyOfNew\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Hyperlynx","CreatedById":90829,"CreatedDateTime":"2018-04-21T04:05:29Z","Content":"\n\u003Cp\u003E\nI have a launch script that works.\u003Cbr\u003E\u003Cbr\u003E\nI\u0027m trying to convert it to put the launching part in a function, called by a button click. However, when I click the button my ship stages but doesn\u0027t throttle up. What\u0027s going on?\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n@LAZYGLOBAL OFF.\n\n//flight parameters\n//Note: these must be global, or the locks won\u0027t work\nglobal targetApoapsis to 71000.\nglobal targetPeriapsis to 70000.\nglobal targetTWR to 1.5.\nglobal gravTurnSpeed to 90.\nglobal gravTurnAngle to 4.\nglobal timeBeforeApoapsis to 30.\n/////////////////////////////\n\n\nSAS OFF.\n\nLOCAL preflightGUI IS GUI(200).\nLOCAL launchButton TO preflightGUI:ADDBUTTON(\u0022Launch\u0022).\nset launchButton:ONCLICK to launch@.\nLOCAL closeButton TO preflightGUI:ADDBUTTON(\u0022Close\u0022).\n\npreflightGUI:SHOW().\n\nuntil closeButton:TAKEPRESS\n{\n  // button still isn\u0027t pressed yet, let\u0027s keep waiting.\n  wait 0.\n}\n\nfunction launch\n{\n  preflightGUI:HIDE().\n  print targetApoapsis.\n  print targetTWR.\n \n  stage.\n  //lock throttle to the target thrust-to-weight ratio:\n \n  global lock distance to SHIP:ALTITUDE \u002B BODY(\u0022Kerbin\u0022):RADIUS.\n  global lock weight to CONSTANT():G * ((SHIP:MASS* BODY(\u0022Kerbin\u0022):MASS) / ( distance * distance )).\n \n  lock THROTTLE to (targetTWR * weight) / (SHIP:MAXTHRUST \u002B 0.001).\n \n  lock steering to up \u002B R(0, 0, 270).\n \n  print \u0022Ascending\u0022.\n  wait until SHIP:VERTICALSPEED \u0026gt; gravTurnSpeed.\n  lock steering to up \u002B R(0, -gravTurnAngle, 270).\n \n  print \u0022Gravity turn\u0022.\n \n  wait 10.\n \n  // surface prograde\n  lock steering to R(0,0,0) \u002B velocity:surface.\n \n  // when high enough, go hell-for-leather for orbital prograde.\n  when ship:altitude \u0026gt; 27000 then\n  {\n    lock steering to ship:prograde.\n    set targetTWR to 100.\n  }\n \n  when ship:maxthrust \u0026lt; 0.01 then\n  {\n    stage.\n    when ship:maxthrust \u0026lt; 0.01 then\n    {\n      //don\u0027t thrust into the next stage, or it will explode and knock the craft off course\n \n      lock throttle to 0.\n      //wait for engine to stop\n      declare global waitTime is TIME:SECONDS \u002B 0.25.\n      when TIME:SECONDS \u0026gt;= waitTime then\n      {\n        stage.\n        set waitTime to TIME:SECONDS \u002B 1.\n        when TIME:SECONDS \u0026gt;= waitTime then\n        {\n          lock throttle to (targetTWR * weight) / (SHIP:MAXTHRUST \u002B 0.001).\n        }\n      }\n    }\n  }\n \n  print \u0022Waiting until target apoapsis\u0022.\n  wait until SHIP:APOAPSIS \u0026gt;= targetApoapsis.\n  lock throttle to 0.\n  print \u0022Done\u0022.\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-21T07:04:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223359983\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524283529\u0022 data-ipsquote-userid=\u002290829\u0022 data-ipsquote-username=\u0022Hyperlynx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Hyperlynx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m trying to convert it to put the launching part in a function, called by a button click. However, when I click the button my ship stages but doesn\u0027t throttle up. What\u0027s going on?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2191\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2191\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe button callback function is a trigger, so it blocks the triggers that update the steering and throttle whilst it is executing. Unless/until this behaviour gets changed, I would recommend that button callbacks should be short, simple functions.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d implement this as a run mode loop and have button prrsses try to change the run mode.\n\u003C/p\u003E\n"},{"CreatedByName":"Hyperlynx","CreatedById":90829,"CreatedDateTime":"2018-04-21T07:38:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223360027\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524294261\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n34 minutes ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2191\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2191\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe button callback function is a trigger, so it blocks the triggers that update the steering and throttle whilst it is executing. Unless/until this behaviour gets changed, I would recommend that button callbacks should be short, simple functions.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d implement this as a run mode loop and have button prrsses try to change the run mode.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExcellent. Thanks!\n\u003C/p\u003E\n"},{"CreatedByName":"cineboxandrew","CreatedById":63646,"CreatedDateTime":"2018-04-23T23:30:32Z","Content":"\n\u003Cp\u003E\nI\u0027m working on a mod that would add a rack mount system to the game, including support for KOS. Is it currently possible to have a part with JUST a disk without a processor, so you would have to have seperate CPU and drive parts in the avionics bay?\n\u003C/p\u003E\n"},{"CreatedByName":"genericeventhandler","CreatedById":149557,"CreatedDateTime":"2018-04-25T09:36:36Z","Content":"\n\u003Cp\u003E\nHi guys and gals.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve been getting a strange error\u00A0 \u0022Undefined Variable Ship\u0022 in one of my library files, I can\u0027t find anywhere that has Set Ship to or Local Ship, and the script runs fine when called on it\u0027s own.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not looking for support, just someone who might give me some other idea as to what to look for so I can debug it myself.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003Cp\u003E\nGeh\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-25T10:32:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223363365\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524648996\u0022 data-ipsquote-userid=\u0022149557\u0022 data-ipsquote-username=\u0022genericeventhandler\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, genericeventhandler said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi guys and gals.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve been getting a strange error\u00A0 \u0022Undefined Variable Ship\u0022 in one of my library files, I can\u0027t find anywhere that has Set Ship to or Local Ship, and the script runs fine when called on it\u0027s own.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not looking for support, just someone who might give me some other idea as to what to look for so I can debug it myself.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003Cp\u003E\nGeh\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhich version of kOS? There was a problem in the past where if you logged out a vessel\u0027s object (e.g. to store the current target so that a rendezvous script doesn\u0027t break if the target gets unset midway through) it would be recorded as \u0022SHIP(\u0027Kerbal X\u0027)\u0022 instead of \u0022VESSEL(\u0027Kerbal X\u0027)\u0022, which then causes an error on trying to read it back in. I don\u0027t know if that error was \u0027Undefined variable ship\u0027, though, but it\u0027s the first thing that came to my mind.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/1776\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/1776\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-25T10:40:55Z\u0022 title=\u002204/25/2018 10:40  AM\u0022 data-short=\u00226 yr\u0022\u003EApril 25, 2018\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003Cbr\u003Elink to Github\n\u003C/span\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-04-25T15:39:08Z","Content":"\n\u003Cp\u003E\nCan I run a programme on a kos processor that separates from my main ship, and will programmes continue to run if I go out of physics range of the vessel?\n\u003C/p\u003E\n\u003Cp\u003E\nI want to launch a 4 satellite communications network, so plan to lift the initial vessel in to a resonant orbit and have each satellite\u00A0separate and and circularize at successive apoapsis\u0027.\u00A0 So I\u0027m presumably\u00A0going to need the\u00A0satellite\u0027s processor to be triggered by the separation, but it may well go out of physics range of the main vessel before finishing it\u0027s circularisation burn.\n\u003C/p\u003E\n\u003Cp\u003E\nI could simply separate and then remotely type in commands, but it would be nice to try and automate the whole thing.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-25T16:05:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223363549\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524670748\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n27 minutes ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan I run\u003Cspan\u003E\uFEFF\u003C/span\u003E\u003Cspan\u003E\uFEFF\u003C/span\u003E a programme on a kos processor that separates from my main ship, and will programmes continue to run if I go out of physics range of the ves\u003Cspan\u003E\uFEFF\u003C/span\u003E\u003Cspan\u003E\uFEFF\u003C/span\u003Esel?\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes (though with caveats - see below) and no respectively. If the vessel gets unloaded, kOS will stop running on it (and even if it kept running somehow, it would have nothing to control).\n\u003C/p\u003E\n\u003Cp\u003E\nThe caveats are that KSP itself limits certain abilities (e.g. adding a manoeuvre node) to the active vessel under player control.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: one solution would be to make your script switch focus to the satellite, then have the satellite run a circularisation program that switches back to the mothership on completion. The script on the mothership would need to cope with its running being interrupted if it goes out of physics range while you\u0027re controlling the satellite.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-25T16:08:25Z\u0022 title=\u002204/25/2018 04:08  PM\u0022 data-short=\u00226 yr\u0022\u003EApril 25, 2018\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-04-26T07:45:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223363559\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524672322\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\none solution would be to make your script switch focus to the satellite, then have the satellite run a circularisation program that switches back to the mothership on completion. The script on the mothership would need to cope with its running being interrupted if it goes out of physics range while you\u0027re controlling the satellite.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDoes a boot script run whenever you switch to a vessel that\u0027s got an processor on it that\u0027s not running anything, or is it just when loading from beyond physics range?\n\u003C/p\u003E\n\u003Cp\u003E\nIf the former then\u00A0presumably I\u00A0could have code on the satellites to do the circularization, and have the launching vessel finish it\u0027s code segment as it switches to the satellite so it starts again when I switch back.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe only time I\u0027ve left a vessel that was running a script was to do a rescue while the ship had a command to wait for 10 minutes, so I\u0027m not sure what happens when you switch between kos enabled craft.\n\u003C/p\u003E\n"},{"CreatedByName":"ecaheti","CreatedById":173298,"CreatedDateTime":"2018-04-26T09:56:09Z","Content":"\n\u003Cp\u003E\nHi,\n\u003C/p\u003E\n\u003Cp\u003E\nI just want to give a big thanks for this mod. I\u0027m using it to make some spaceX-like 1st stage landing, and it\u0027s running great. I also use it to make a small plane autopilot to make long range flight in fastforward mode.\n\u003C/p\u003E\n\u003Cp\u003E\nHaving this working with my piece of code is a great satisfaction ^^\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-26T10:30:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223364115\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524728749\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDoes\u003Cspan\u003E\uFEFF\u003C/span\u003E a boot script run whenever you switch to a vessel that\u0027s got an processor on it that\u0027s not running anything, or is it just when loading from beyond physics range\u003Cspan\u003E\uFEFF\u003C/span\u003E? \u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBoot scripts run on load, any load (i.e. on loading a save, on putting a vessel on the launchpad, on coming within physics range or switching to a vessel that had been unloaded), if the processor is powered.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve not done much with multiple CPUs per craft to separate out launcher code from payload code. One exception is my equivalent of an Apollo lander. That boots up on the launchpad, stores a bit of state (so the next time it boots, it acts differently), then turns its own CPU off, to be reawoken later (manually, but it could be automated) in Mun orbit.\n\u003C/p\u003E\n\u003Cp\u003E\nAs KSP limits some actions to the active vessel, I try to avoid having more than one vessel actively doing things at once (though this may be excessively cautious). You don\u0027t want the mothership time warping to the next satellite release while the last one is still manoeuvring, either. You could use inter-CPU/vessel messaging to pass control back and forth.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-26T10:31:57Z\u0022 title=\u002204/26/2018 10:31  AM\u0022 data-short=\u00226 yr\u0022\u003EApril 26, 2018\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-04-26T11:22:46Z","Content":"\n\u003Cp\u003E\nCool, so processors on but programmes finished sounds like the way forward.\u00A0 I\u0027ll give it a go, thanks.\n\u003C/p\u003E\n"},{"CreatedByName":"genericeventhandler","CreatedById":149557,"CreatedDateTime":"2018-04-26T11:34:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223363381\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524652335\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 4/25/2018 at 12:32 PM, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhich version of kOS? There was a problem in the past where if you logged out a vessel\u0027s object (e.g. to store the current target so that a rendezvous script doesn\u0027t break if the target gets unset midway through) it would be recorded as \u0022SHIP(\u0027Kerbal X\u0027)\u0022 instead of \u0022VESSEL(\u0027Kerbal X\u0027)\u0022, which then causes an error on trying to read it back in. I don\u0027t know if that error was \u0027Undefined variable ship\u0027, though, but it\u0027s the first thing that came to my mind.\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/1776\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/1776\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks, I\u0027m looking through the scripts and replacing all references to SHIP:\u00A0 to vesselx:\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI hope it works\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nGeh\n\u003C/p\u003E\n"}]}