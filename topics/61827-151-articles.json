{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":151,"Articles":[{"CreatedByName":"Vegemeister","CreatedById":135079,"CreatedDateTime":"2016-01-16T14:53:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222364018\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452908855\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan you specify the exact kOS version?\u00A0 Because this used to be a bug and then got fixed.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n0.18.2, and the current master branch.\u00A0 I tried it in a debug build, and \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Esteeringmanager:moi\u003C/span\u003E was showing something like v(60,2e-7,60). That is consistent with my hunch that the moments of inertia are being calculated assuming each part is a point mass, since the rocket is a single-stack with only physicsless parts attached radially (the 3 solar panels).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAlso, if you leave the scene (i.e. go to space center), and then go back to the vessel (click in it in tracking center), does it do it again, or does it stay stable?\u00A0 I ask because there can be bugs related to the system not realizing which vessel ID is the right one, so it polls information from the wrong craft, confusing the steering, and that sort of bug tends to reset when you force the game to reload the vessel into memory from the file.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe problem persists when switching to the space center and back.\u00A0 I first discovered the problem on my ckan installation with tens of mods and several active ships, but subsequent testing has been in a new save file with only kOS installed and only the single craft.\n\u003C/p\u003E\n"},{"CreatedByName":"Redneck","CreatedById":2030,"CreatedDateTime":"2016-01-16T16:22:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222364427\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452937554\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWe\u0027re pretty much stalled on any user interface work until KSP 1.1 comes out.\u00A0 The news about how the old GUI system is being deprecated in Unity 5 and while it would still work there\u0027s no guarantee how much longer it will continue to work for, made us kOS devs decided to put a development freeze on any UI related issues in kOS until we\u0027re on Unity5.\u00A0 We\u0027re going to want to redesign the whole UI anyway so there\u0027s no point in putting any work into the current system just to then throw that work away.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nyeah i totally understand the stall. Im in the same boat with my landing gear on my deltaglider. And still no word on a new PartTools. But if you would could you keep this in the back of your mind for later? I think this would be a great addition to KOS in IVA\u0027s and a little boost for the immersion factor\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/98801-wip-kospropmonitor-iva-kos-monitor-for-rpm/\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/98801-wip-kospropmonitor-iva-kos-monitor-for-rpm/\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-16T16:27:29Z\u0022 title=\u002201/16/2016 04:27  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 16, 2016\u003C/time\u003E by Redneck\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Rodyle","CreatedById":103194,"CreatedDateTime":"2016-01-16T18:36:58Z","Content":"\n\u003Cp\u003E\nHi mod team!\n\u003C/p\u003E\n\u003Cp\u003E\nI have been using your mod with great pleasure. However, I was wondering if you guys could update one error: when you try to copy a file, but cannot, due to lack of memory, it gives a very unhelpful error message.\n\u003C/p\u003E\n"},{"CreatedByName":"Jenyaza","CreatedById":155707,"CreatedDateTime":"2016-01-17T18:51:02Z","Content":"\n\u003Cp\u003E\nTry to implement \u0022yet another rover autopilot\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nWe can use\u00A0LATLNG(x,y) to specify point on planet surface (GeoPosition). But it not locked to current vessel,\u00A0particularly to it facing\n\u003C/p\u003E\n\u003Cp\u003E\nOtherwise, we can use\u00A0SHIP:GEOPOSITION. This is point where vessel is now. Still be only point\n\u003C/p\u003E\n\u003Cp\u003E\nHow i can get the GeoPos point, that is, for example, 100m away from vessel,\u00A0forward? And 15m\u00A0right?\n\u003C/p\u003E\n\u003Cp\u003E\nSimple scheme\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022G9Z9Nf0.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/G9Z9Nf0.png\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-17T20:02:42Z\u0022 title=\u002201/17/2016 08:02  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 17, 2016\u003C/time\u003E by Jenyaza\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2016-01-18T01:24:33Z","Content":"\n\u003Cp\u003E\nthis sounds at first like you\u0027re trying to figure out, based on where the rover is currently looking, what the geopoint is of a spot in the distance - but are you simply just trying to orient the rover towards a point on the surface?\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-18T04:57:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222366825\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453056662\u0022 data-ipsquote-userid=\u0022155707\u0022 data-ipsquote-username=\u0022Jenyaza\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Jenyaza said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTry to implement \u0022yet another rover autopilot\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nWe can use\u00A0LATLNG(x,y) to specify point on planet surface (GeoPosition). But it not locked to current vessel,\u00A0particularly to it facing\n\u003C/p\u003E\n\u003Cp\u003E\nOtherwise, we can use\u00A0SHIP:GEOPOSITION. This is point where vessel is now. Still be only point\n\u003C/p\u003E\n\u003Cp\u003E\nHow i can get the GeoPos point, that is, for example, 100m away from vessel,\u00A0forward? And 15m\u00A0right?\n\u003C/p\u003E\n\u003Cp\u003E\nSimple scheme\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Ca href=\u0022#\u0022 rel=\u0022external\u0022\u003E\u00A0\u003C/a\u003E \u003Cspan\u003EReveal hidden contents\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022G9Z9Nf0.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/G9Z9Nf0.png\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\u003Cp\u003E\nI assume you want something that is curved around the surface.\u00A0 In other words, if it was 100000m, you want it to curve around the horizon, not be up in mid-air above the ground like a straight line path that long would be.\n\u003C/p\u003E\n\u003Cp\u003E\nSo you\u0027re interested in a curved line of length D, not a straight one.\n\u003C/p\u003E\n\u003Cp\u003E\nHere is a strange unorthodox way to think of doing it:\u00A0 Get the current position of your rover from the body center.\u00A0 It will be a long vector calculated like this:\n\u003C/p\u003E\n\u003Cp\u003E\nSET myPosFromCore TO ship:position - ship;body:position.\n\u003C/p\u003E\n\u003Cp\u003E\nNow to find a spot D distance away around the circumference of a sphere of that radius, find the angle equal to how far you need to rotate to achieve a circumference length of D at that radius:\u003Cbr\u003E\u003Cbr\u003E\nSET myRadius TO myPosFromCore:MAG.\n\u003C/p\u003E\n\u003Cp\u003E\nSET degrees to (D / myRadius) * CONSTANT:RadToDeg.\n\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s how many degrees to rotate the position vector, but the axis to rotate it around, to get a position directly in front of you is your starboard axis:\n\u003C/p\u003E\n\u003Cp\u003E\nSET RotAxis to Ship:facing:starvector.\n\u003C/p\u003E\n\u003Cp\u003E\nNow you can rotate the position vector by that much, around that axis:\n\u003C/p\u003E\n\u003Cp\u003E\nSET newPosFromCore to ANGLEAXIS(degrees, RotAxis) * myPosFromCore.\n\u003C/p\u003E\n\u003Cp\u003E\nNow newPosFromCore is a vector from the body\u0027s core to the new position you want.\u00A0 To turn that into a geo position, just do:\n\u003C/p\u003E\n\u003Cp\u003E\nSET newLatLng to ship:body:geopositionof( ship:body:position \u002B newPosFromCore).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWarning: I have tested NONE of that.\u00A0 I could have a step wrong.\u00A0 Especially the rotation direction of the angleaxis.\u00A0 You might need to add \u0022:INVERSE\u0022 to the end of it if you find it\u0027s picking a position behind you instead of in front.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I described there would give you a position directly in the way you\u0027re facing.\u00A0 To deflect the aim of the rotation to your left or your right, do some trig between ship;facing:starvector and ship:facing:forevector with the tangent of the desired angle. to get a rotating vector axis you want.\n\u003C/p\u003E\n"},{"CreatedByName":"Sealed14X","CreatedById":157194,"CreatedDateTime":"2016-01-18T06:59:48Z","Content":"\n\u003Cp\u003E\nLooking for a bit of\u00A0help in my basic function.\u003Cbr\u003E\nThanks for any help that can be offered.\u003Cbr\u003E\nHere is the function that I am using:\n\u003C/p\u003E\n\u003Cp\u003E\n// Pre launch Sequence. \u00A0Execute before bottom most Stage\u003Cbr\u003E\ndeclare function fn_PreLaunch\u003Cbr\u003E\n\u00A0 {\u003Cbr\u003E\n\u00A0 parameter b_SAS.\u003Cbr\u003E\n\u00A0 parameter b_RCS.\u003Cbr\u003E\n\u00A0 parameter b_Lights.\u003Cbr\u003E\n\u00A0 parameter f_Throttle.\u003Cbr\u003E\n\u00A0 parameter b_Gears.\u003Cbr\u003E\n\u00A0\u00A0\u003Cbr\u003E\n\u00A0 SAS b_SAS. \u00A0// I want to set SAS to the variable b_SAS (Boolean: On / Off; \u00A0[True or False])\u00A0\u00A0\u003Cbr\u003E\n\u00A0 RCS b_RCS.\u003Cbr\u003E\n\u00A0 lights b_Lights.\u003Cbr\u003E\n\u00A0 lock throttle to f_Throttle. //Throttle is a decimal from 0.0 to 1.0\u003Cbr\u003E\n\u00A0 gear b_Gears.\u003Cbr\u003E\n\u00A0 }.\n\u003C/p\u003E\n\u003Cp\u003E\n// Here is the function call (changeable as needed per rocket and mission needs):\u003Cbr\u003E\nfn_PreLaunch (On, On, On, 1, On).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-18T07:30:09Z\u0022 title=\u002201/18/2016 07:30  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 18, 2016\u003C/time\u003E by Sealed14X\u003C/strong\u003E\n\u003Cbr\u003Espelling and grammer / function call\n\u003C/span\u003E\n"},{"CreatedByName":"Jenyaza","CreatedById":155707,"CreatedDateTime":"2016-01-18T08:09:08Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe,\u00A0I\u0027ll understand it. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u00A0\u00A0Thank you.\n\u003C/p\u003E\n\u003Cp\u003E\n*going to hard testing*\n\u003C/p\u003E\n"},{"CreatedByName":"Jenyaza","CreatedById":155707,"CreatedDateTime":"2016-01-18T08:33:16Z","Content":"\n\u003Cp\u003E\nMaybe,\u00A0I\u0027ll understand it. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u00A0\u00A0Thank you.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222367513\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453080273\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Gaiiden\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Gaiiden said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nthis sounds at first like you\u0027re trying to figure out, based on where the rover is currently looking, what the geopoint is of a spot in the distance - but are you simply just trying to orient the rover towards a point on the surface?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot orient the rover towards a point, but\u00A0orient the\u00A0point towards a rover.\n\u003C/p\u003E\n\u003Cp\u003E\nPoint is nearby the rover (10..40m, not far), but always should be in front of vessel. It,s \u0022locked\u0022 to rover, not\u00A0target.\n\u003C/p\u003E\n\u003Cp\u003E\nI want to make the rover \u0022scan\u0022 the surface if front of it.\n\u003C/p\u003E\n\u003Cp\u003E\nI get 5\u00A0points; first\u00A0before the rover, \u00A0next is some left (from first), \u00A0 next some right, \u00A0more left and the last is\u00A0more right. And rover position - as\u00A0starting point.\n\u003C/p\u003E\n\u003Cp\u003E\nNow get the PointX:TERRAINHEIGHT in all points, and compare with Rover:TERRAINHEIGHT.\n\u003C/p\u003E\n\u003Cp\u003E\nIf \u0022more left\u0022 point is about 6 meters down, and all other is near zero (from rover height), it \u0022say\u0022 to rover - turn right, because we have a crater (or\u00A0slope)\u00A0left\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n*going to hard testing*\n\u003C/p\u003E\n\u003Cp\u003E\nP.S. fail... how to remove posts?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-18T08:40:22Z\u0022 title=\u002201/18/2016 08:40  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 18, 2016\u003C/time\u003E by Jenyaza\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2016-01-18T09:01:13Z","Content":"\n\u003Cp\u003E\noh, you\u0027re looking to do terrain avoidance? Cool.\n\u003C/p\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2016-01-18T09:24:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222367892\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453105996\u0022 data-ipsquote-userid=\u0022155707\u0022 data-ipsquote-username=\u0022Jenyaza\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, Jenyaza said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI want to make the rover \u0022scan\u0022 the surface if front of it.\n\u003C/p\u003E\n\u003Cp\u003E\nI get 5\u00A0points; first\u00A0before the rover, \u00A0next is some left (from first), \u00A0 next some right, \u00A0more left and the last is\u00A0more right. And rover position - as\u00A0starting point.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\u003Cp\u003E\nShip:Body:GeoPositionOf( Ship:Position\u002B X * Ship:Facing:ForeVector ):TerrainHeight\n\u003C/p\u003E\n\u003Cp\u003E\nThis should give the terrain altitude of the point X meters in front of the rover.\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-01-18T19:14:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222364638\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452956000\u0022 data-ipsquote-userid=\u0022135079\u0022 data-ipsquote-username=\u0022Vegemeister\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/16/2016 at 9:53 AM, Vegemeister said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n0.18.2, and the current master branch.\u00A0 I tried it in a debug build, and \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Esteeringmanager:moi\u003C/span\u003E was showing something like v(60,2e-7,60). That is consistent with my hunch that the moments of inertia are being calculated assuming each part is a point mass, since the rocket is a single-stack with only physicsless parts attached radially (the 3 solar panels).\n\u003C/p\u003E\n\u003Cp\u003E\nThe problem persists when switching to the space center and back.\u00A0 I first discovered the problem on my ckan installation with tens of mods and several active ships, but subsequent testing has been in a new save file with only kOS installed and only the single craft.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve kind of become the \u0022steering\u0022 guy for the project, since I wrote the new \u0060steeringmanager\u0060 code. \u00A0Those small MoI values really mess up the math. \u00A0I can\u0027t quite figure out how unity manages them, but there is some kind of a scale factor applied to keep the values in \u0022reasonable\u0022 ranges. \u00A0Since I couldn\u0027t figure out how to predict that, I wrote an adaptive section of the code that will try and adjust your \u0022available torque\u0022 based on the observed angular acceleration. \u00A0The problem is, the \u0022epsilon\u0022 value used to try and reduce very small fluctuations can also prevent the steering from trying to stop. \u00A0I hadn\u0027t run into this prior to the last release, but I found it as I was doing some other testing in the last month or so.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m working on an update to the steering so that staging/docking events will be tolerated a little better. \u00A0And in that branch, this appears to be fixed. \u00A0But that fix probably one be in the next update, but rather the one after. \u00A0So, since it looks like you\u0027re comfortable compiling on your own anyways, here\u0027s what you can do to fix it locally: Change the value of EPSILON on line 154 of \u0022SteeringManager.cs\u0022 from \u00220.00001\u0022 to \u00221e-16\u0022. \u00A0We don\u0027t want to ignore the epsilon value entirely, but it can be much smaller and still have good results. \u00A0For the ship I was testing, this change fixed the rotation immediately. \u00A0Let me know if you end up having to tweak it further, it would be good to have a chance to test out that value before I push it to the public.\n\u003C/p\u003E\n\u003Cp\u003E\nSorry for my delay in response. \u00A0I spend a lot more time on github than here, and I ended up having a busy weekend that didn\u0027t leave me a lot of time to work on kOS.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-18T19:18:03Z\u0022 title=\u002201/18/2016 07:18  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 18, 2016\u003C/time\u003E by hvacengi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Vegemeister","CreatedById":135079,"CreatedDateTime":"2016-01-18T22:33:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222368494\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453144492\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve kind of become the \u0022steering\u0022 guy for the project, since I wrote the new \u0060steeringmanager\u0060 code. \u00A0Those small MoI values really mess up the math. \u00A0I can\u0027t quite figure out how unity manages them, but there is some kind of a scale factor applied to keep the values in \u0022reasonable\u0022 ranges.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmm.\u00A0 If I\u0027ve read the code right, you\u0027re getting the MoI from Vessel.findLocalMOI().\u00A0 Seeing as Squad wrote that and KSP isn\u0027t open source, we don\u0027t know how it calculates the MoI.\u00A0 2e-7 seems unreasonably small to me.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/Rigidbody-inertiaTensor.html\u0022 rel=\u0022external nofollow\u0022\u003EUnity\u0027s docs\u003C/a\u003E suggest that, for each part, Unity computes the inertia tensor and stores it as the diagonal of the tensor in the principal axes basis, plus \u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/Rigidbody-inertiaTensorRotation.html\u0022 rel=\u0022external nofollow\u0022\u003Ethe rotation\u003C/a\u003E (from? to?) the part\u0027s native basis.\u00A0 IANAPhysicist, but I think the correct way to calculate the vessel\u0027s inertia tensor would be to make a Matrix4x4 from each Part.Rigidbody.inertiaTensor and then reverse first the inertiaTensorRotation and then the part\u0027s facing, \u003Ca href=\u0022https://en.wikipedia.org/wiki/Moment_of_inertia#The_inertia_matrix_in_different_reference_frames\u0022 rel=\u0022external nofollow\u0022\u003Eas described by wikipedia\u003C/a\u003E, then use the parallel axis theorem to find the inertia tensor relative to the vessel\u0027s center of mass, then sum over all the parts on the ship.\n\u003C/p\u003E\n\u003Cp\u003E\nIf Squad\u0027s findLocalMOI() is treating each part as a point mass and not accounting for the MoI of the part itself, that could explain the very small roll MoI on vessels with no massive radially attached parts.\u00A0 I found someone mentioned this \u003Ca href=\u0022https://www.reddit.com/r/Kos/comments/3gj2s3/anomalous_precession_of_vessel_axes_under_rotation/ctz78bt?context=1\u0022 rel=\u0022external nofollow\u0022\u003Ea few months ago on Reddit\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0Since I couldn\u0027t figure out how to predict that, I wrote an adaptive section of the code that will try and adjust your \u0022available torque\u0022 based on the observed angular acceleration. \u00A0The problem is, the \u0022epsilon\u0022 value used to try and reduce very small fluctuations can also prevent the steering from trying to stop. \u00A0I hadn\u0027t run into this prior to the last release, but I found it as I was doing some other testing in the last month or so.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m working on an update to the steering so that staging/docking events will be tolerated a little better. \u00A0And in that branch, this appears to be fixed. \u00A0But that fix probably one be in the next update, but rather the one after. \u00A0So, since it looks like you\u0027re comfortable compiling on your own anyways, here\u0027s what you can do to fix it locally: Change the value of EPSILON on line 154 of \u0022SteeringManager.cs\u0022 from \u00220.00001\u0022 to \u00221e-16\u0022. \u00A0We don\u0027t want to ignore the epsilon value entirely, but it can be much smaller and still have good results. \u00A0For the ship I was testing, this change fixed the rotation immediately. \u00A0Let me know if you end up having to tweak it further, it would be good to have a chance to test out that value before I push it to the public.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSetting EPSILON to 1e-16 fixed the problem on my 1.25m and 2.5m test rockets, mostly. The spinning and oscillation are gone and the roof is pointed in the correct direction, but the roll steering is less smooth than the pitch and yaw. It turns very quickly, overshoots, then takes a long time to get back to the correct direction.\u00A0 But that isn\u0027t a problem for my use case.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSorry for my delay in response. \u00A0I spend a lot more time on github than here, and I ended up having a busy weekend that didn\u0027t leave me a lot of time to work on kOS.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo problem.\n\u003C/p\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2016-01-19T13:10:10Z","Content":"\n\u003Cp\u003E\nIs there a simple way to get Eta:Apoapsis / Eta:Periapsis for the orbit patch after a maneuver node?\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: next question, how do I get the times of transition between orbital patches? An orbit seems not to know when its patch starts or ends.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-20T18:42:03Z\u0022 title=\u002201/20/2016 06:42  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 20, 2016\u003C/time\u003E by pellinor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blnk2007","CreatedById":143465,"CreatedDateTime":"2016-01-20T21:41:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222367841\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453100388\u0022 data-ipsquote-userid=\u0022157194\u0022 data-ipsquote-username=\u0022Sealed14X\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/18/2016 at 1:59 AM, Sealed14X said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLooking for a bit of\u00A0help in my basic function.\u003Cbr\u003E\nThanks for any help that can be offered.\u003Cbr\u003E\nHere is the function that I am using:\n\u003C/p\u003E\n\u003Cp\u003E\n// Pre launch Sequence. \u00A0Execute before bottom most Stage\u003Cbr\u003E\ndeclare function fn_PreLaunch\u003Cbr\u003E\n\u00A0 {\u003Cbr\u003E\n\u00A0 parameter b_SAS.\u003Cbr\u003E\n\u00A0 parameter b_RCS.\u003Cbr\u003E\n\u00A0 parameter b_Lights.\u003Cbr\u003E\n\u00A0 parameter f_Throttle.\u003Cbr\u003E\n\u00A0 parameter b_Gears.\u003Cbr\u003E\n\u00A0\u00A0\u003Cbr\u003E\n\u00A0 SAS b_SAS. \u00A0// I want to set SAS to the variable b_SAS (Boolean: On / Off; \u00A0[True or False])\u00A0\u00A0\u003Cbr\u003E\n\u00A0 RCS b_RCS.\u003Cbr\u003E\n\u00A0 lights b_Lights.\u003Cbr\u003E\n\u00A0 lock throttle to f_Throttle. //Throttle is a decimal from 0.0 to 1.0\u003Cbr\u003E\n\u00A0 gear b_Gears.\u003Cbr\u003E\n\u00A0 }.\n\u003C/p\u003E\n\u003Cp\u003E\n// Here is the function call (changeable as needed per rocket and mission needs):\u003Cbr\u003E\nfn_PreLaunch (On, On, On, 1, On).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat exactly do you want help with? Is something not working?\n\u003C/p\u003E\n"},{"CreatedByName":"TDW","CreatedById":120346,"CreatedDateTime":"2016-01-25T14:41:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222367841\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453100388\u0022 data-ipsquote-userid=\u0022157194\u0022 data-ipsquote-username=\u0022Sealed14X\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 18/01/2016 at 6:59 AM, Sealed14X said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLooking for a bit of\u00A0help in my basic function.\u003Cbr\u003E\nThanks for any help that can be offered.\u003Cbr\u003E\nHere is the function that I am using:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan\u003E// Pre launch Sequence.  Execute before bottom most Stage\ndeclare function fn_PreLaunch\n  {\n  parameter b_SAS.\n  parameter b_RCS.\n  parameter b_Lights.\n  parameter f_Throttle.\n  parameter b_Gears.\n  \n  SAS b_SAS.  // I want to set SAS to the variable b_SAS (Boolean: On / Off;  [True or False])  \n  RCS b_RCS.\n  lights b_Lights.\n  lock throttle to f_Throttle. //Throttle is a decimal from 0.0 to 1.0\n  gear b_Gears.\n  }.\n\n// Here is the function call (changeable as needed per rocket and mission needs):\nfn_PreLaunch (On, On, On, 1, On).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn kOS on and off are commands and cant be passed as variables. Try using true and false instead:\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E// Pre launch Sequence.  Execute before bottom most Stage\ndeclare function fn_PreLaunch\n  {\n  parameter \n   b_SAS,\n   b_RCS,\n   b_Lights,\n   f_Throttle,\n   b_Gears.\n  \n  set SAS to b_SAS.  // I want to set SAS to the variable b_SAS (Boolean: On / Off;  [True or False])  \n  set RCS to b_RCS.\n  set lights to b_Lights.\n  lock throttle to f_Throttle. //Throttle is a decimal from 0.0 to 1.0\n  set gear to b_Gears.\n  }.\n\n// Here is the function call (changeable as needed per rocket and mission needs):\nfn_PreLaunch (true, true, true, 1, true).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nalso worth noting that if you end the script after calling that function kOS will release the lock on the throttle and it will return to whatever it was before kOS took control. If you want the throttle value to persist try using\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nset ship:control:pilotmainthrottle to f_Throttle.\u003C/pre\u003E\n\u003Cp\u003E\ninstead. However if it is run as a boot script when you first spawn the vessel on the pad that wont work as the throttle starts off at 0 then ksp sets it to 0.5. You need to wait a second or so before setting the throttle value to avoid it being overwritten by ksp.\n\u003C/p\u003E\n"},{"CreatedByName":"ShadowZone","CreatedById":112420,"CreatedDateTime":"2016-02-08T21:21:34Z","Content":"\n\u003Cp\u003E\nBeen scratching my head lately on a problem...\n\u003C/p\u003E\n\u003Cp\u003E\nI found a \u003Ca href=\u0022https://www.youtube.com/redirect?q=https%3A%2F%2Fdrive.google.com%2Fopen%3Fid%3D0Bxkeai7oN35ffjRBRlBWeTVvSGUyWDlWUEw3akZqa1FGcmMzcmE0d3FHcTBfak1JMmFRNHc%26authuser%3D0\u0026amp;redir_token=fMJtXeGji2cU5xwS6dzHO2tTqux8MTQ1NDk2MjA4NEAxNDU0ODc1Njg0\u0022 rel=\u0022external nofollow\u0022\u003Efascinating bit of PID controller code\u003C/a\u003E in a \u003Ca href=\u0022https://www.youtube.com/watch?v=BYE-V6luP0U\u0022 rel=\u0022external nofollow\u0022\u003Evideo for a hover script\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nnow I want to expand on it by adding a position lock to it. The goal is to let a craft hover above a specific set of coordinates.\n\u003C/p\u003E\n\u003Cp\u003E\nSo far I came up with this crude approximation:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nset spot to geoposition.\nlock steering to latlng(spot:LAT,spot:LNG):altitudeposition(alt:radar \u002B 90).\u003C/pre\u003E\n\u003Cp\u003E\nThis kind of works, but apparently it just makes the craft act like a pendulum around that point that oscillates out of control after a short while. I imagine I would need something like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\ncheck if \u0022current geoposition\u0022 is off \u0022target geoposition\u0022.\nuse pitch/yaw delicately to move above \u0022target geoposition\u0022.\nif rcs/vernor available, use translation controls to move above \u0022target geoposition\u0022.\n\u003C/pre\u003E\n\u003Cp\u003E\nthe crucial part of course is \u0022use pitch/yaw delicately\u0022. I would imagine I would have to check constantly how much the craft is off target and then adjust its controls accordingly.\u003Cbr\u003E\n\u00A0Obviously I would like to use the PID controller provided in the link above. It does a marvellous job at keeping altitude. And I am way too much of a novice to even try to come up with something like that myself.\n\u003C/p\u003E\n\u003Cp\u003E\nThing is, I do not really have a clue how KSP or kOS at that measures and calculates positional data and how to translate that into steering commands. For the time being I do really simple and stupid trial and error poking around the code stuff. So yeah... any help or nod in the right direction would be much appreciated \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: weird observation: as soon as I give control to kOS, the roll controls (Q/E) seem to be inverted, even after I give control back to the pilot. Any idea why that may be?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-02-08T21:22:37Z\u0022 title=\u002202/08/2016 09:22  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 8, 2016\u003C/time\u003E by ShadowZone\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-02-08T23:45:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222399749\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221454966494\u0022 data-ipsquote-userid=\u0022112420\u0022 data-ipsquote-username=\u0022ShadowZone\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, ShadowZone said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBeen scratching my head lately on a problem...\n\u003C/p\u003E\n\u003Cp\u003E\nI found a \u003Ca href=\u0022https://www.youtube.com/redirect?q=https%3A%2F%2Fdrive.google.com%2Fopen%3Fid%3D0Bxkeai7oN35ffjRBRlBWeTVvSGUyWDlWUEw3akZqa1FGcmMzcmE0d3FHcTBfak1JMmFRNHc%26authuser%3D0\u0026amp;redir_token=fMJtXeGji2cU5xwS6dzHO2tTqux8MTQ1NDk2MjA4NEAxNDU0ODc1Njg0\u0022 rel=\u0022external nofollow\u0022\u003Efascinating bit of PID controller code\u003C/a\u003E in a \u003Ca href=\u0022https://www.youtube.com/watch?v=BYE-V6luP0U\u0022 rel=\u0022external nofollow\u0022\u003Evideo for a hover script\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nnow I want to expand on it by adding a position lock to it. The goal is to let a craft hover above a specific set of coordinates.\n\u003C/p\u003E\n\u003Cp\u003E\nSo far I came up with this crude approximation:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\nset spot to geoposition.\nlock steering to latlng(spot:LAT,spot:LNG):altitudeposition(alt:radar \u002B 90).\u003C/pre\u003E\n\u003Cp\u003E\nThis kind of works, but apparently it just makes the craft act like a pendulum around that point that oscillates out of control after a short while. I imagine I would need something like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\ncheck if \u0022current geoposition\u0022 is off \u0022target geoposition\u0022.\nuse pitch/yaw delicately to move above \u0022target geoposition\u0022.\nif rcs/vernor available, use translation controls to move above \u0022target geoposition\u0022.\n\u003C/pre\u003E\n\u003Cp\u003E\nthe crucial part of course is \u0022use pitch/yaw delicately\u0022. I would imagine I would have to check constantly how much the craft is off target and then adjust its controls accordingly.\u003Cbr\u003E\n\u00A0Obviously I would like to use the PID controller provided in the link above. It does a marvellous job at keeping altitude. And I am way too much of a novice to even try to come up with something like that myself.\n\u003C/p\u003E\n\u003Cp\u003E\nThing is, I do not really have a clue how KSP or kOS at that measures and calculates positional data and how to translate that into steering commands. For the time being I do really simple and stupid trial and error poking around the code stuff. So yeah... any help or nod in the right direction would be much appreciated \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: weird observation: as soon as I give control to kOS, the roll controls (Q/E) seem to be inverted, even after I give control back to the pilot. Any idea why that may be?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI hate the new forum software.\u00A0 I typed a long reply with code samples and everything, and hit \u0022submit\u0022 and the software refused to take it, and then said mysteriously \u0022this field is required\u0022 at the bottom of the page without any indication which field its talking about, and all my work was wiped and I couldn\u0027t get it back with backarrow.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s the short summary of what I typed:\u00A0 PID on a vector is messy. These PIDs are for scalars.\u00A0 So use several independent PID\u0027s - one for the longitude and one for the latitude, and one for the vertical hover, as they are orthogonal values, then use vector addition with the unit vectors for up, north, and east multiplied by the result of the 3 pids, and use that resulting vector to steer by.\n\u003C/p\u003E\n\u003Cp\u003E\nI have no idea about the Q/E thing - I\u0027ve never seen it.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, try searching on the documentation for \u0022PIDloop\u0022 - there\u0027s now a much faster built-in PIDloop feature you can use in kOS instead of having to spend precious kerboscript cycles on it.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2016-02-09T03:37:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222399954\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221454975117\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI hate the new forum software.\u00A0 I typed a long reply with code samples and everything, and hit \u0022submit\u0022 and the software refused to take it, and then said mysteriously \u0022this field is required\u0022 at the bottom of the page without any indication which field its talking about, and all my work was wiped and I couldn\u0027t get it back with backarrow.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou also remember to check the footer of the quick reply box and see if there was an auto-save link when you paged back? This forum should be auto-saving replies, but it does a poor job of letting you know it does it.\n\u003C/p\u003E\n"},{"CreatedByName":"ShadowZone","CreatedById":112420,"CreatedDateTime":"2016-02-09T18:19:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222399954\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221454975117\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI hate the new forum software.\u00A0 I typed a long reply with code samples and everything, and hit \u0022submit\u0022 and the software refused to take it, and then said mysteriously \u0022this field is required\u0022 at the bottom of the page without any indication which field its talking about, and all my work was wiped and I couldn\u0027t get it back with backarrow.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s the short summary of what I typed:\u00A0 PID on a vector is messy. These PIDs are for scalars.\u00A0 So use several independent PID\u0027s - one for the longitude and one for the latitude, and one for the vertical hover, as they are orthogonal values, then use vector addition with the unit vectors for up, north, and east multiplied by the result of the 3 pids, and use that resulting vector to steer by.\n\u003C/p\u003E\n\u003Cp\u003E\nI have no idea about the Q/E thing - I\u0027ve never seen it.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, try searching on the documentation for \u0022PIDloop\u0022 - there\u0027s now a much faster built-in PIDloop feature you can use in kOS instead of having to spend precious kerboscript cycles on it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs for using PID for the positional data, I wanted to set up multible variables, for instance \u0022hoverLat\u0022 and \u0022hoverLon\u0022 as well as \u0022latOffset\u0022 and \u0022lonOffset\u0022. I am not really sure I understand the second bit about vector addition an multiplying.\n\u003C/p\u003E\n\u003Cp\u003E\nI would have very much liked to see your code examples \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"troyfawkes","CreatedById":109437,"CreatedDateTime":"2016-02-11T01:06:14Z","Content":"\n\u003Cp\u003E\nThought you guys might appreciate this. I was having trouble figuring out how to create a hyper specific Execute Node script using physics instead of constantly checking variables, and I \u003Ca href=\u0022https://www.troyfawkes.com/adventures-in-ksp-kos-math/\u0022 rel=\u0022external nofollow\u0022\u003Ewrote out the solution and my thinking\u003C/a\u003E. Some notes:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nStill not polished, it\u0027s basically a purely mathematical solution right now.\n\u003C/li\u003E\n\u003Cli\u003E\nIt takes into account change in mass through burn.\n\u003C/li\u003E\n\u003Cli\u003E\nIt takes into account multiple engines with different Isp.\n\u003C/li\u003E\n\u003Cli\u003E\nIt uses vectors to determine when steering is ready.\n\u003C/li\u003E\n\u003Cli\u003E\nIt knows on load when your burn starts and ends, no graduated checks along the way.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nI\u0027ll be doing more of this as it\u0027s a really solid way for me to learn how everything works.\n\u003C/p\u003E\n"},{"CreatedByName":"panzerwaffe044","CreatedById":143917,"CreatedDateTime":"2016-02-11T12:49:21Z","Content":"\n\u003Cp\u003E\nNoob\u0027s question.\n\u003C/p\u003E\n\u003Cp\u003E\nI have a problem with LOCK STEERING TO HEADING command on the craft with Stayputnik Probe, no-gimbal engine and 4 control surfaces. I play with FAR and the rocket is aerodynamically stable. The rocket\u0027s refusing to pitch. I would like to use kOS in the early career with no RT connection for my early sounding suborbital rockets. As the search tells me, it\u0027s a known issue... Any advice?\n\u003C/p\u003E\n\u003Cp\u003E\nOf course I could just use a thrust-vectoring engine (it works fine with it), but it\u0027s less efficient ASL and I wanted to make my rocket comletely aerodynamically controlled.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-02-11T16:24:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222402989\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221455152774\u0022 data-ipsquote-userid=\u0022109437\u0022 data-ipsquote-username=\u0022troyfawkes\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, troyfawkes said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThought you guys might appreciate this. I was having trouble figuring out how to create a hyper specific Execute Node script using physics instead of constantly checking variables, and I \u003Ca href=\u0022https://www.troyfawkes.com/adventures-in-ksp-kos-math/\u0022 rel=\u0022external nofollow\u0022\u003Ewrote out the solution and my thinking\u003C/a\u003E. Some notes:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nStill not polished, it\u0027s basically a purely mathematical solution right now.\n\u003C/li\u003E\n\u003Cli\u003E\nIt takes into account change in mass through burn.\n\u003C/li\u003E\n\u003Cli\u003E\nIt takes into account multiple engines with different Isp.\n\u003C/li\u003E\n\u003Cli\u003E\nIt uses vectors to determine when steering is ready.\n\u003C/li\u003E\n\u003Cli\u003E\nIt knows on load when your burn starts and ends, no graduated checks along the way.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nI\u0027ll be doing more of this as it\u0027s a really solid way for me to learn how everything works.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not much of rocket scientist nerd, but I have recalled of Scott Manley video (it was recommanded on KSP front page some time ago) where he explained whole ISP mess. IIRC, for Ve equation you have always use earth gravity as constant to get correct velocity. It was used in that way for a reason, to help scientist used for imerialistic measurment standard to not mess up equation with metric measurment system and vice versa.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you need to calculate gravity acceleration on each celestial body in Kerbal Space Program, kOS provide some nice tools for it.\u003Cbr\u003E\nCheck out this \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structures/celestial_bodies/body.html\u0022 rel=\u0022external nofollow\u0022\u003EkOS documentation page\u003C/a\u003E. More specific, take a closer look on \u003Cstrong\u003EBODY:MU\u003C/strong\u003E. It is \u003Ca href=\u0022https://en.wikipedia.org/wiki/Standard_gravitational_parameter\u0022 rel=\u0022external nofollow\u0022\u003Estandard gravitational parameter\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nNow, knowing this, it is much easier to calculate gravity for any celestial body where your craft is influenced at. Thanks to kOS, you don\u0027t even top know body name for it.\n\u003C/p\u003E\n\u003Cp\u003E\nInstead of just one command for gravity calculation, I will put whole funcion here that I used within my power landing script and hovering script. It might be usefull for other folks around that also still learn how to use kOS like me.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint prettyprinted\u0022\u003E\n\u003Cspan\u003E// function to calculate gravity constant and ship weight\u003C/span\u003E\u003Cspan\u003E\nfunction \u003C/span\u003E\u003Cspan\u003EThrottleLimits\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E{\u003C/span\u003E\u003Cspan\u003E\n\n  \u003C/span\u003E\u003Cspan\u003Eset\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EBody_g\u003C/span\u003E\u003Cspan\u003E to SHIP\u003C/span\u003E\u003Cspan\u003E:\u003C/span\u003E\u003Cspan\u003EBODY\u003C/span\u003E\u003Cspan\u003E:\u003C/span\u003E\u003Cspan\u003EMU \u003C/span\u003E\u003Cspan\u003E/\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E(\u003C/span\u003E\u003Cspan\u003ESHIP\u003C/span\u003E\u003Cspan\u003E:\u003C/span\u003E\u003Cspan\u003EBODY\u003C/span\u003E\u003Cspan\u003E:\u003C/span\u003E\u003Cspan\u003ERADIUS\u003C/span\u003E\u003Cspan\u003E\u002B\u003C/span\u003E\u003Cspan\u003Ealtitude\u003C/span\u003E\u003Cspan\u003E)^\u003C/span\u003E\u003Cspan\u003E2.\u003C/span\u003E\u003Cspan\u003E\n  \u003C/span\u003E\u003Cspan\u003Eset\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ECraftWeight\u003C/span\u003E\u003Cspan\u003E to SHIP\u003C/span\u003E\u003Cspan\u003E:\u003C/span\u003E\u003Cspan\u003EMASS \u003C/span\u003E\u003Cspan\u003E*\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EBody_g\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003E\n  \u003C/span\u003E\u003Cspan\u003E//set CraftMaxThrust to SHIP:MAXTHRUSTAT(SHIP:SENSORS:PRES). // can take in account tail rotor that is set to \u00220\u0022\u003C/span\u003E\u003Cspan\u003E\n  \u003C/span\u003E\u003Cspan\u003Eset\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ECraftMaxThrust\u003C/span\u003E\u003Cspan\u003E to SHIP\u003C/span\u003E\u003Cspan\u003E:\u003C/span\u003E\u003Cspan\u003EAVAILABLETHRUST\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003E\n  \u003C/span\u003E\u003Cspan\u003Eif\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ECraftMaxThrust\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E\u0026gt;\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E0\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// need it to prevent divide by zero\u003C/span\u003E\u003Cspan\u003E\n  \u003C/span\u003E\u003Cspan\u003E{\u003C/span\u003E\u003Cspan\u003E\n\t\u003C/span\u003E\u003Cspan\u003Eset\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EMinThrottle\u003C/span\u003E\u003Cspan\u003E to round\u003C/span\u003E\u003Cspan\u003E(((\u003C/span\u003E\u003Cspan\u003ECraftWeight\u003C/span\u003E\u003Cspan\u003E/\u003C/span\u003E\u003Cspan\u003ECraftMaxThrust\u003C/span\u003E\u003Cspan\u003E)\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E-\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E0.15\u003C/span\u003E\u003Cspan\u003E),\u003C/span\u003E\u003Cspan\u003E2\u003C/span\u003E\u003Cspan\u003E).\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// throttle for ~0.85 of TWR to prevent too high down velocity - crashing issue\u003C/span\u003E\u003Cspan\u003E\n\t\u003C/span\u003E\u003Cspan\u003Eset\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EMaxThrottle\u003C/span\u003E\u003Cspan\u003E to round\u003C/span\u003E\u003Cspan\u003E(((\u003C/span\u003E\u003Cspan\u003ECraftWeight\u003C/span\u003E\u003Cspan\u003E/\u003C/span\u003E\u003Cspan\u003ECraftMaxThrust\u003C/span\u003E\u003Cspan\u003E)\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E\u002B\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E0.2\u003C/span\u003E\u003Cspan\u003E),\u003C/span\u003E\u003Cspan\u003E2\u003C/span\u003E\u003Cspan\u003E).\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// throttle for ~1.2 of TWR to prevent too high up velocity - flipng issue\u003C/span\u003E\u003Cspan\u003E\n\t\n\t\u003C/span\u003E\u003Cspan\u003E// in low gravity bodies like Minimus, minimal throttle can be calculated below zero, that should not be possible\u003C/span\u003E\u003Cspan\u003E\n\t\u003C/span\u003E\u003Cspan\u003Eif\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EMinThrottle\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E\u0026lt;\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E0\u003C/span\u003E\u003Cspan\u003E\n\t\u003C/span\u003E\u003Cspan\u003E{\u003C/span\u003E\u003Cspan\u003E\n\t\t\u003C/span\u003E\u003Cspan\u003Eset\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EMinThrottle\u003C/span\u003E\u003Cspan\u003E to \u003C/span\u003E\u003Cspan\u003E0.\u003C/span\u003E\u003Cspan\u003E\n\t\u003C/span\u003E\u003Cspan\u003E}.\u003C/span\u003E\u003Cspan\u003E\n\t\n\t\u003C/span\u003E\u003Cspan\u003Eif\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EMaxThrottle\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E\u0026gt;\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E1\u003C/span\u003E\u003Cspan\u003E\n\t\u003C/span\u003E\u003Cspan\u003E{\u003C/span\u003E\u003Cspan\u003E\n\t\t\u003C/span\u003E\u003Cspan\u003Eset\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EMaxThrottle\u003C/span\u003E\u003Cspan\u003E to \u003C/span\u003E\u003Cspan\u003E1.\u003C/span\u003E\u003Cspan\u003E\n\t\u003C/span\u003E\u003Cspan\u003E}.\u003C/span\u003E\u003Cspan\u003E\n  \u003C/span\u003E\u003Cspan\u003E}\u003C/span\u003E\u003Cspan\u003E\n  \u003C/span\u003E\u003Cspan\u003Eelse\u003C/span\u003E\u003Cspan\u003E\n  \u003C/span\u003E\u003Cspan\u003E{\u003C/span\u003E\u003Cspan\u003E\n\t\u003C/span\u003E\u003Cspan\u003Eset\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EMinThrottle\u003C/span\u003E\u003Cspan\u003E to \u003C/span\u003E\u003Cspan\u003E0.\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// throttle for ~0.85 of TWR to prevent too high down velocity - crashing issue\u003C/span\u003E\u003Cspan\u003E\n\t\u003C/span\u003E\u003Cspan\u003Eset\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EMaxThrottle\u003C/span\u003E\u003Cspan\u003E to \u003C/span\u003E\u003Cspan\u003E1.\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// throttle for ~1.2 of TWR to prevent too high up velocity - flipng issue\u003C/span\u003E\u003Cspan\u003E\n  \u003C/span\u003E\u003Cspan\u003E}\u003C/span\u003E\u003Cspan\u003E\n\u003C/span\u003E\u003Cspan\u003E}.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThing that you might miss in your blog is altitude of ship. You have to take that in account instead of gravity on sea level of celestial body of influence.\u003Cbr\u003E\nMost interesting part for you would be this:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003Eset\u003C/strong\u003E \u003Cspan style=\u0022color:#0000FF;\u0022\u003EBody_g\u003C/span\u003E \u003Cstrong\u003Eto\u003C/strong\u003E \u003Cspan style=\u0022color:#0000FF;\u0022\u003ESHIP:BODY:MU\u003C/span\u003E / (\u003Cspan style=\u0022color:#0000FF;\u0022\u003ESHIP:BODY:RADIUS\u003C/span\u003E\u002B\u003Cstrong\u003Ealtitude\u003C/strong\u003E)^2.\n\u003C/p\u003E\n"},{"CreatedByName":"MinimumSky5","CreatedById":115138,"CreatedDateTime":"2016-02-11T18:02:44Z","Content":"\n\u003Cp\u003E\nI\u0027m having a strange issue with my program for a simple sounding rocket. The program is:\n\u003C/p\u003E\n\u003Cp\u003E\nCLEARSCREEN.\n\u003C/p\u003E\n\u003Cp\u003E\nPRINT \u0022Counting down:\u0022.\u003Cbr\u003E\nFROM {local countdown is 10.} UNTIL countdown = 0 STEP {SET countdown to countdown - 1.} DO {\u003Cbr\u003E\n\u00A0 \u00A0 PRINT \u0022...\u0022 \u002B countdown.\u003Cbr\u003E\n\u00A0 \u00A0 WAIT 1.\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\nUNTIL SHIP:MAXTHRUST \u0026gt; 0 {\u003Cbr\u003E\n\u00A0 \u00A0 WAIT 0.5.\u003Cbr\u003E\n\u00A0 \u00A0 PRINT \u0022Stage activated.\u0022.\u003Cbr\u003E\n\u00A0 \u00A0 STAGE.\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\nWHEN VERTICALSPEED \u0026lt; 5 {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0WAIT 2.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0STAGE.\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\nThe error message i get is that apparently, the curly brackets after \u0026lt; 5 are actually the Euro sign, which is impossible as that isn\u0027t \u00A0even an option on\u00A0my keyboard.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-02-12T00:09:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222403586\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221455194961\u0022 data-ipsquote-userid=\u0022143917\u0022 data-ipsquote-username=\u0022panzerwaffe044\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, panzerwaffe044 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNoob\u0027s question.\n\u003C/p\u003E\n\u003Cp\u003E\nI have a problem with LOCK STEERING TO HEADING command on the craft with Stayputnik Probe, no-gimbal engine and 4 control surfaces. I play with FAR and the rocket is aerodynamically stable. The rocket\u0027s refusing to pitch. I would like to use kOS in the early career with no RT connection for my early sounding suborbital rockets. As the search tells me, it\u0027s a known issue... Any advice?\n\u003C/p\u003E\n\u003Cp\u003E\nOf course I could just use a thrust-vectoring engine (it works fine with it), but it\u0027s less efficient ASL and I wanted to make my rocket comletely aerodynamically controlled.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/commands/flight/cooked.html#tuning-cooked-steering\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/commands/flight/cooked.html#tuning-cooked-steering\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEssentially the problem is that kOS\u0027s cooked steering knows nothing of areodynamic-only control like from fins and rudders.\u00A0 So when it calculates how much torque it *thinks* the ship is capable of outputting, it gets a very small nearly zero number.\u00A0 Then it gets way too conservative when it is deciding what is the max rotation it should allow itself.\u00A0 It rotates up to a rotational speed, holds that rotational speed, then slows down as it approaches the set point.\u00A0 It has an upper cap on how high it will allow that rotational speed to get, and that\u0027s based on it guessing how long it THINKS it would take for it to stop its rotation if it had to.\u00A0 Given that its calculations of how much torque it thinks it has is wrong when the torque is coming from flappy control surfaces and nothing else, it gets the false notion that it would take it an enormous amount of time to stop a rotation, and thus it gets very conservative with its rotations and refuses to allow itself to get much rotation started in the first place.\n\u003C/p\u003E\n\u003Cp\u003E\nOne fix is to manually add a fudge factor that tells the steering manager that the available torque is a bit higher than it thought it was, to compensate for the fact that it doesn\u0027t try to add torque from areo controls to the calculation.\u00A0 You can do this by setting:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nsteeringmanager:pitchtorqueadjust, steeringmanager:yawtorqueadjust, and steeringmanager:rolltorqueadjust.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222404002\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221455213764\u0022 data-ipsquote-userid=\u0022115138\u0022 data-ipsquote-username=\u0022MinimumSky5\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, MinimumSky5 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m having a strange issue with my program for a simple sounding rocket. The program is:\n\u003C/p\u003E\n\u003Cp\u003E\nCLEARSCREEN.\n\u003C/p\u003E\n\u003Cp\u003E\nPRINT \u0022Counting down:\u0022.\u003Cbr\u003E\nFROM {local countdown is 10.} UNTIL countdown = 0 STEP {SET countdown to countdown - 1.} DO {\u003Cbr\u003E\n\u00A0 \u00A0 PRINT \u0022...\u0022 \u002B countdown.\u003Cbr\u003E\n\u00A0 \u00A0 WAIT 1.\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\nUNTIL SHIP:MAXTHRUST \u0026gt; 0 {\u003Cbr\u003E\n\u00A0 \u00A0 WAIT 0.5.\u003Cbr\u003E\n\u00A0 \u00A0 PRINT \u0022Stage activated.\u0022.\u003Cbr\u003E\n\u00A0 \u00A0 STAGE.\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\nWHEN VERTICALSPEED \u0026lt; 5 {\u003Cbr\u003E\n\u00A0\u00A0 \u00A0WAIT 2.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0STAGE.\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\nThe error message i get is that apparently, the curly brackets after \u0026lt; 5 are actually the Euro sign, which is impossible as that isn\u0027t \u00A0even an option on\u00A0my keyboard.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhen requires a THEN keyword (I really should remove that.\u00A0 It\u0027s kinda dumb, but it was inherited from the language before I got my hands on it.)\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t know why it\u0027s showing a euro sign in the error message, though.\u00A0 It doesn\u0027t do that for me.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}