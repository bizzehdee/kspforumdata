{"TopicId":165628,"ForumId":34,"TopicTitle":"[KSP 1.12.x] kOS v1.4.0.0: kOS Scriptable Autopilot System","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2017-09-18T16:56:54Z","PageNum":14,"Articles":[{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-02T14:40:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223342667\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522678599\u0022 data-ipsquote-userid=\u0022122127\u0022 data-ipsquote-username=\u0022maculator\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n26 minutes ago, maculator said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThhe original script is running right now on a plane flying arround kerbin, the scrip in 0:/boot is altered and I wanted to copy the unaltered version to a backup, just in case.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo go to that craft, kill the boot script when it fires up, then enter this in the terminal?\n\u003C/p\u003E\n\u003Cp\u003E\nCOPYPATH(\u00221:/boot/my_script.ks\u0022,\u00220:/boot/my_script.backup.ks\u0022).\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s possible you accidentally created a folder named \u00221\u0022 on the archive at some point.\n\u003C/p\u003E\n\u003Cp\u003E\nPS. It can be good practice to use some kind of code versioning/change management set-up. I put my scripts on GitHub so I can track changes and keep online backups.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-02T14:47:40Z\u0022 title=\u002204/02/2018 02:47  PM\u0022 data-short=\u00226 yr\u0022\u003EApril 2, 2018\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"maculator","CreatedById":122127,"CreatedDateTime":"2018-04-02T15:04:59Z","Content":"\n\u003Cp\u003E\nOkay thanks. I got my stuff on github but I don\u0027t really update it *that* frequently \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOkay so the folder called 1 was an accident I created... who would\u0027ve thought that.\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-04-03T08:49:29Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to get the velocity vector at a manouvre\u00A0node, which I was expecting to be\n\u003C/p\u003E\n\u003Cp\u003E\nSET NodeVel to VELOCITYAT(SHIP , TIME \u002B MyNode:ETA).\n\u003C/p\u003E\n\u003Cp\u003E\nHowever if I VECDRAW it on screen it looks to be 70 or 80 degrees out and a\u00A0bit shorted than I\u0027d expect (I didn\u0027t think to check the magnitude at the time and on a different machine now).\u00A0 A bit of\u00A0Googling suggested there was an issue with\u00A0the frame of reference, but that was an old Reddit post and I can\u0027t find anything recent about it so I assume I\u0027m using it incorrectly.\u00A0 Any advice?\n\u003C/p\u003E\n"},{"CreatedByName":"Black-Two-","CreatedById":177626,"CreatedDateTime":"2018-04-03T13:20:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223340998\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522530147\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2018-03-31 at 11:02 PM, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cpre\u003E\n\n\u003Ccode\u003E\u003Cspan style=\u0022font-family:Arial, Helvetica, sans-serif;\u0022\u003EI looked up a previous solution I\u0027ve given for your kind of question (\u003C/span\u003E\u003C/code\u003E\u003Ca href=\u0022https://www.reddit.com/r/Kos/comments/66pdll/question_about_steering_and_vectors/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.reddit.com/r/Kos/comments/66pdll/question_about_steering_and_vectors/\u003C/a\u003E\u003Ccode\u003E\u003Cspan style=\u0022font-family:Arial, Helvetica, sans-serif;\u0022\u003E). It does involve even more vector manipulation than my previous example, I\u0027m afraid:\u003C/span\u003E\n\n// VELOCITY:SURFACE should be the same as SRFPROGRADE:VECTOR\nLOCK horizon TO VXCL(UP:VECTOR,VELOCITY:SURFACE). \nLOCK STEERING TO \n    LOOKDIRUP(ANGLEAXIS(pitchAngle(),\n                        VCRS(horizon,BODY:POSITION))*horizon,\n              UP:VECTOR).\u003C/code\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThat pitches up (or possibly down), by whatever number the pitchAngle() function returns. The VCRS (vector cross) of the horizon and a vector pointed at the centre of the planet (straight down, I guess, should be equivalent to -UP:VECTOR) returns a vector that is at 90 degrees to both (pointed at the horizon to starboard), meaning it can be used as an axis to rotate our steering vector around, to pitch up or down.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you don\u0027t mind me asking, is there an easier way to do this? Something like combining lookdirup(srfretrograde:vector, up:vector) with angleaxis(pitch, facing:starvector)?\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-04-03T14:39:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223340893\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522519518\u0022 data-ipsquote-userid=\u0022122127\u0022 data-ipsquote-username=\u0022maculator\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn \u200E31\u200E/\u200E03\u200E/\u200E2018 at 8:05 PM, maculator said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI got a question, if somebody wants to push me in the right direction (literally).\n\u003C/p\u003E\n\u003Cp\u003E\nI got my small script to hold my planes altitude and direction:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Ca href=\u0022#\u0022 rel=\u0022\u0022\u003E\u00A0\u003C/a\u003E \u003Cspan\u003EHide contents\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\n\u003Cspan class=\u0022pln\u0022\u003Eclearscreen.\ncore:part:getmodule(\u0022kOSProcessor\u0022):doevent(\u0022Open Terminal\u0022).\nset terminal:charheight to 18.\nset terminal:width to 30.\nset terminal:height to 14.\nset terminal:brightness to 1.\n\nif alt:radar \u0026lt; 10 {\n\tprint \u0022we\u0027re landed... bye.\u0022.\n\twait 2.\n\tshutdown.\n} else {\n\tsas off.\n\tset alt_t to ship:altitude.\n\tprint \u0022target altitude: \u0022 \u002B round(alt_t).\n\tset WhyDoesItHaveToBeThatComplicated to ship:bearing * -1.\n\tset angle to 0.\n\tlock angle2 to angle.\n\tprint \u0022heading \u0022 \u002B round(WhyDoesItHaveToBeThatComplicated).\n\tlock steering to Heading(WhyDoesItHaveToBeThatComplicated, angle).\n\tuntil false {\n\t\tif ship:altitude \u0026gt; (alt_t \u002B 100) {\n\t\t\tset angle to angle - 1.\n\t\t\tprint \u0022down \u0022 \u002B angle.\n\t\t\tlock steering to heading(WhyDoesItHaveToBeThatComplicated, angle2).\n\t\t}\n\t\tif ship:altitude \u0026lt; (alt_t - 100) {\n\t\t\tset angle to angle \u002B 1.\n\t\t\tprint \u0022up \u0022 \u002B angle.\n\t\t\tlock steering to heading(WhyDoesItHaveToBeThatComplicated, angle2).\n\t\t}\n\t\tif ship:altitude \u0026gt; (alt_t - 100) and ship:altitude \u0026lt; (alt_t \u002B 100) {\n\t\t\tprint \u0022hold \u0022 \u002B angle.\n\t\t\tlock steering to heading(WhyDoesItHaveToBeThatComplicated, angle2).\n\t\t}\n\t\tlock steering to heading(WhyDoesItHaveToBeThatComplicated, angle2).\n\t\tprint angle.\n\t\tprint \u0022wait\u0022.\n\t\twait 10.\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nAnd I really would like it to hold a sort of \u0022global\u0022 direction, unaffected by the compass.\n\u003C/p\u003E\n\u003Cp\u003E\nRight now it goes like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003Elock steering to Heading(WhyDoesItHaveToBeThatComplicated, angle2).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIs there a way to tell it to just hold the direction unaffected by compass?\n\u003C/p\u003E\n\u003Cp\u003E\nI red through the documentation but that stuff is a bit much for me :S\n\u003C/p\u003E\n\u003Cp\u003E\nThank you!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot sure I\u00A0completely understand what you\u0027re trying to do, as direction is what the compass gives you, but a couple of thoughts assuming you\u0027re just trying to fly straight and levelish and your issue is the pitch changes.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nOnce you\u0027ve locked the steering, you don\u0027t need to relock it in each IF statement, you can just re-set Angle2 and it will adjust to that elevation.\n\u003C/li\u003E\n\u003Cli\u003E\nYou might want to take a look at PID loops, with your current setup as soon as you go over/under you limits you make a change and wait to see it\u0027s effect, with a PID loop it looks at how quickly your altitude is changing as well.\u00A0 Not tried it on aircraft but on a hovering \u003Cabbr title=\u0022Vertical Take-Off and Landing\u0022\u003EVTOL\u003C/abbr\u003E a PID loop got me stable at my target altitude in just a couple of oscillations.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nIf you mean you want to keep heading the same direction when overflying the poles then that\u0027s a more complex problem.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-03T14:40:42Z\u0022 title=\u002204/03/2018 02:40  PM\u0022 data-short=\u00226 yr\u0022\u003EApril 3, 2018\u003C/time\u003E by RizzoTheRat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-03T15:19:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223343658\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522761604\u0022 data-ipsquote-userid=\u0022177626\u0022 data-ipsquote-username=\u0022Black-Two-\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Black-Two- said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you don\u0027t mind me asking, is there an easier way to do this? Something like combining lookdirup(srfretrograde:vector, up:vector) with angleaxis(pitch, facing:starvector)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDepends what you\u0027re trying to achieve. Do you want a certain pitch relative to the horizon, or to the pro/retrograde vector?\n\u003C/p\u003E\n\u003Cp\u003E\nUsing the starboard facing vector as an axis of rotation for pitch will only work when your pro/retrograde vector and facing forevector are aligned (i.e. along the same compass bearing). If they\u0027re not aligned, you\u0027d get increasingly weird results.\n\u003C/p\u003E\n"},{"CreatedByName":"Black-Two-","CreatedById":177626,"CreatedDateTime":"2018-04-03T15:47:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223343760\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522768774\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n26 minutes ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDepends what you\u0027re trying to achieve. Do you want a certain pitch relative to the horizon, or to the pro/retrograde vector?\n\u003C/p\u003E\n\u003Cp\u003E\nUsing the starboard facing vector as an axis of rotation for pitch will only work when your pro/retrograde vector and facing forevector are aligned (i.e. along the same compass bearing). If they\u0027re not aligned, you\u0027d get increasingly weird results.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI want to use it for a constant altitude vacuum landing, so it should be alright, right?\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-03T15:56:56Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223343794\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522770471\u0022 data-ipsquote-userid=\u0022177626\u0022 data-ipsquote-username=\u0022Black-Two-\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Black-Two- said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI want to use it for a constant altitude vacuum landing, so it should be alright, right?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmmm. As you decelerate horizontally, your retrograde vector will want to pitch up... if you can control your vertical velocity (i.e. keep it at zero) then it\u0027ll counter that and keep the retrograde horizontal, so the assumptions should hold true. If you lose control, it\u0027ll rapidly become an incorrect solution, I fear. It sounds worryingly circular...\n\u003C/p\u003E\n\u003Cp\u003E\nPersonally, I switched to a controlled altitude descent a while back - I no longer zero out v-speed but let it drop such that my final suicide burn will be very near the ground (I have to scan ahead to work out the minimum safe v-speed). That does require knowing at what angle above the horizon to pitch.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-03T16:00:37Z\u0022 title=\u002204/03/2018 04:00  PM\u0022 data-short=\u00226 yr\u0022\u003EApril 3, 2018\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Black-Two-","CreatedById":177626,"CreatedDateTime":"2018-04-03T18:12:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223343805\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522771016\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHmmm. As you decelerate horizontally, your retrograde vector will want to pitch up... if you can control your vertical velocity (i.e. keep it at zero) then it\u0027ll counter that and keep the retrograde horizontal, so the assumptions should hold true. If you lose control, it\u0027ll rapidly become an incorrect solution, I fear. It sounds worryingly circular...\n\u003C/p\u003E\n\u003Cp\u003E\nPersonally, I switched to a controlled altitude descent a while back - I no longer zero out v-speed but let it drop such that my final suicide burn will be very near the ground (I have to scan ahead to work out the minimum safe v-speed). That does require knowing at what angle above the horizon to pitch.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFair enough, but just to clarify, my original was (supposed to be) whether there\u0027s an easier way to combine lookdirup with angleaxis than the one you posted \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-03T18:32:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223343954\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522779169\u0022 data-ipsquote-userid=\u0022177626\u0022 data-ipsquote-username=\u0022Black-Two-\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 minutes ago, Black-Two- said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFair enough, but just to clarify, my original was (supposed to be) whether there\u0027s an easier way to combine lookdirup with angleaxis than the one you posted \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, angleaxis is to rotate the steering vector, the lookdirup I wrote was to keep a plane the right way up. To keep a rocket from rotating unnecessarily, I\u0027d put a FACING:TOPVECTOR as the second lookdirup argument instead.\n\u003C/p\u003E\n\u003Cp\u003E\nAs to the general idea of doing it more easily - there probably are shorter solutions if you know how to rotate directions. I do not, so tend to use angleaxis - the idea of rotating a vector around the axis formed of a second one is something my brain *can* grasp!\n\u003C/p\u003E\n"},{"CreatedByName":"maculator","CreatedById":122127,"CreatedDateTime":"2018-04-03T21:13:48Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123362\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0022 rel=\u0022\u0022\u003E@RizzoTheRat\u003C/a\u003E\u00A0Thanks. I didn\u0027t know I don\u0027t have to lock the steering each loop. PID loop is where I\u0027m heading, but I wanted to do it step by step on my wn as far as I can. I now added the first \u0022damper\u0022 to the script that lowers the angle back a tick when passing the hold part.\n\u003C/p\u003E\n\u003Cp\u003E\nThe script allready works as I want it to: toggle cpu locks the altitude and heading and holds it for me. Now I\u0027m just for fun trying to make it a pid loop. But step by step.\n\u003C/p\u003E\n"},{"CreatedByName":"Lucky Spacer","CreatedById":135689,"CreatedDateTime":"2018-04-04T01:00:33Z","Content":"\n\u003Cp\u003E\nI am getting an error saying the Trajectories mod is not available.\u00A0 I have checked the logs it is loading.\u00A0 \u00A0Any help would be appreciated. Thanks.\u003Cimg alt=\u0022XMbC1lo.png\u0022 class=\u0022ipsImage\u0022 height=\u0022414\u0022 src=\u0022https://i.imgur.com/XMbC1lo.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2018-04-04T07:19:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223344254\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522803633\u0022 data-ipsquote-userid=\u0022135689\u0022 data-ipsquote-username=\u0022Lucky Spacer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Lucky Spacer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI am getting an error saying the Trajectories mod is not available.\u00A0 I have checked the logs it is loading.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAre the versions compatible, though? Last I heard, v2 Trajectories and kOS aren\u0027t compatible yet:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2254\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2254\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-04-04T07:39:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223344077\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522790028\u0022 data-ipsquote-userid=\u0022122127\u0022 data-ipsquote-username=\u0022maculator\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, maculator said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123362\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0022 rel=\u0022\u0022\u003E@RizzoTheRat\u003C/a\u003E\u00A0Thanks. I didn\u0027t know I don\u0027t have to lock the steering each loop. PID loop is where I\u0027m heading, but I wanted to do it step by step on my wn as far as I can. I now added the first \u0022damper\u0022 to the script that lowers the angle back a tick when passing the hold part.\n\u003C/p\u003E\n\u003Cp\u003E\nThe script allready works as I want it to: toggle cpu locks the altitude and heading and holds it for me. Now I\u0027m just for fun trying to make it a pid loop. But step by step.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, PID loops\u00A0work well but I\u0027m with you, it\u0027s nice to try and work your way up to it rather than plug in a ready made solution.\u00A0\u00A0With my \u003Ca href=\u0022https://www.youtube.com/watch?v=Kl7qquLeSIc\u0022 rel=\u0022external nofollow\u0022\u003Ehovering \u003Cabbr title=\u0022Vertical Take-Off and Landing\u0022\u003EVTOL\u003C/abbr\u003E \u003C/a\u003EI found a PID loop did a great job of controlling the throttle to hold an altitude, but setting the throttle to give an upward acceleration of a little bit more or less than gravity if it moved outside my altitude limits (so similar approach to yours) worked well and was actually coped with changing the thrust angle better.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve not tried with atmospheric craft but for rockets I\u0027ve found most things can be solved by working out the required velocity vector, and then the acceleration required to hit that velocity.\u00A0 Aeroplanes are a bit more complicated though as you don\u0027t know the coefficients of lift or drag without measuring them, but they change with speed, so I\u0027d expect PID loops to be the way forward.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs I understand it anything that\u0027s Locked gets checked every cycle, where a Set only happens the once, so I tend to Lock the throttle and Steering to variables right at the start, and then just\u00A0set those variables within my loops.\n\u003C/p\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2018-04-04T08:29:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223343510\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522745369\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 hours ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m trying to get the velocity vector at a manouvre\u00A0node, which I was expecting to be\n\u003C/p\u003E\n\u003Cp\u003E\nSET NodeVel to VELOCITYAT(SHIP , TIME \u002B MyNode:ETA).\n\u003C/p\u003E\n\u003Cp\u003E\nHowever if I VECDRAW it on screen it looks to be 70 or 80 degrees out and a\u00A0bit shorted than I\u0027d expect (I didn\u0027t think to check the magnitude at the time and on a different machine now).\u00A0 A bit of\u00A0Googling suggested there was an issue with\u00A0the frame of reference, but that was an old Reddit post and I can\u0027t find anything recent about it so I assume I\u0027m using it incorrectly.\u00A0 Any advice?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe reference frame below 100 km at Kerbin is rotating, and inertial above. That means, if you set NodeVel at one moment when ship is below 100 km and plot it some significant time later, the vector would be off because coordinate axes have rotated. The workaround I use is to express vectors in a coordinate frame where X axis is SolarPrimeVector, Z axis is V(0, 1, 0) (guaranteed to be the same direction in game) and Y axis is vcrs(SolarPrimeVector, V(0, 1, 0)).\n\u003C/p\u003E\n\u003Cp\u003E\nRespective functions to convert a vector to and from that reference frame:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Efunction toIRF {\n// changes to inertial right-handed coordinate system where ix = SPV, iy = vcrs(SPV, V(0, 1, 0)), iz = V(0, 1, 0)\n  parameter oldVec, SPV to SolarPrimeVector.\n  return V( oldVec:x * SPV:x \u002B oldVec:z * SPV:z, oldVec:z * SPV:x - oldVec:x * SPV:z, oldVec:y).\n}\n\nfunction fromIRF {\n// changes from inertial right-handed coordinate system where ix = SPV, iy = vcrs(SPV, V(0, 1, 0)), iz = V(0, 1, 0)\n  parameter irfVec, SPV to SolarPrimeVector.\n  return V( irfVec:x * SPV:x - irfVec:y * SPV:z, irfVec:z, irfVec:x * SPV:z \u002B irfVec:y * SPV:x ).\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nWith this, you\u0027ll need to\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ESET NodeVel to toIRF(VELOCITYAT(SHIP , TIME \u002B MyNode:ETA):ORBIT).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nto have the velocity vector in an inertial frame. To plot it, you need to convert that vector back to the standard reference frame:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ESET NodeVelDraw TO VECDRAW().\nSET NodeVelDraw:SHOW TO TRUE.\nSET NodeVelDraw:STARTUPDATER TO {return POSITIONAT(ship, Time \u002B MyNode:ETA).}.\nSET NodeVelDraw:VECUPDATER TO {return fromIRF(NodeVel).}.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-04-04T08:56:33Z","Content":"\n\u003Cp\u003E\nThanks,\u00A0 that\u0027s going to take a bit of time to get my head around.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m now wondering if it\u0027d be simpler just to loft everything over 100km, but that might make my \u003Cabbr title=\u0022Single Stage to Orbit\u0022\u003ESSTO\u003C/abbr\u003E returns a bit trickier :-D\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nETA:\n\u003C/p\u003E\n\u003Cp\u003E\nThe more I think about it the more of a pain in the cheeks it is.\u00A0 My intention is to add the node DeltaV to ships velocity at that node, and then burn on an acceleration vector to get to that velocity.\u00A0 This allows me to reuse a chunk of code from my circularization burn, which aims to hit the velocity vector required for a circular orbit at the ships current altitude, which I would then put in to a function.\u00A0 However in order to use the velocity at the node I\u0027d have to convert everything in to this other co-ordinate system, which is a lot of extra calculations.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/172084-pand5461/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022172084\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/172084-pand5461/\u0022 rel=\u0022\u0022\u003E@Pand5461\u003C/a\u003E, \u003C/span\u003EIs SPV a recognised variable or do you have define it?\u00A0 It gets mentioned in the documentation but I\u0027ve not seen anything on how to reference it.\n\u003C/p\u003E\n\u003Cp\u003E\nPresumably the Z Axis V(0,1,0) is straight up, normal to the plane of the solar system?\u00A0 In which case what happens when your orbiting a body on an inclined plane like Minmus?\u00A0 Will V(0,1,0) on Minmus be different to V(0,1,0) around the sun?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAny particular reason why you go with a Right handed co-ordinate system rather than sticking with Left?\u00A0 I know Right makes more sense but I think I\u0027d probably confuse myself switching between left and right.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-04T11:12:44Z\u0022 title=\u002204/04/2018 11:12  AM\u0022 data-short=\u00226 yr\u0022\u003EApril 4, 2018\u003C/time\u003E by RizzoTheRat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2018-04-04T17:35:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223344474\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522827570\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs I understand it anything that\u0027s Locked gets checked every cycle\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s a common misconception, and it\u0027s easy to see why so many users think this, because it *is* true of the first locks they usually use, which are throttle and steering.\u00A0 But it\u0027s not true of *all* locks in general.\u00A0 Throttle and steering are actually special exceptions to the general case (I will cover this in the next paragraph below).\u00A0 And a lot of this is kOS\u0027s own fault, really.\u00A0 When you are presented with the exception case first before learning the general case, it often muddies your understanding of what\u0027s happening.\u00A0 None of the current devs are happy about this, but \u0022lock throttle\u0022 and \u0022lock steering\u0022 have such a long history (from the first ever release from Kevin Nivekk) that it\u0027s a very scary thing now to contemplate changing how it works and thus breaking *every single script* that currently exists or ever has been written in the past, including every example you are likely to find on a google search.)\n\u003C/p\u003E\n\u003Cp\u003E\nLocks *in general* don\u0027t get recalculated once per cycle.\u00A0 They get recalculated on the fly only just at the moment when their value is being queried by some other part of your program.\u00A0 If you *wanted* to query them once per cycle, you could with something like this trigger:\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nLOCK myLock to (some_expression_here).\n\n// then, later:\nWHEN TRUE THEN { set myVariable to myLock. return true. }\n\n\u003C/pre\u003E\n\u003Cp\u003E\nAnd it would then re-run \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Esome_expression_here\u003C/span\u003E once per cycle as it keeps re-executing the trigger.\n\u003C/p\u003E\n\u003Cp\u003E\nAll that is happening in the case of the locks named \u0022throttle\u0022, \u0022steering\u0022, \u0022wheelsteering\u0022 and \u0022wheelthrottle\u0022, is the secret hidden fact that the kOS compiler is inserting code into your program that in fact does do something almost exactly like that.\u00A0 It would look a little bit like this if it was written in kerboscript:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EWHEN TRUE THEN { set kOSInternalThrottle to throttle. return true.}\nWHEN TRUE THEN { set kOSInternalSteering to steering. return true.}\nWHEN TRUE THEN { set kOSInternalWheelThrottle to wheelthrottle. return true.}\nWHEN TRUE THEN { set kOSInternalWheelSteering to wheelsteering. return true.}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n(That\u0027s not exactly identical to what kOS is doing internally, but I can\u0027t quite express in kerboscript what kOS is inserting into your program, because what kOS is inserting into your program is written in \u0022kOS assembly language\u0022 so to speak, and doesn\u0027t quite have an exact kerboscript equivalent.\u00A0 But this is pretty close.)\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2018-04-04T18:04:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223344464\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522826397\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre the versions compatible, though? Last I heard, v2 Trajectories and kOS aren\u0027t compatible yet:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2254\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2254\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s being worked on.\u00A0 I\u0027m in contact with one of the devs for Trajectories:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/pull/2220#issuecomment-378620584\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/pull/2220#issuecomment-378620584\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Lucky Spacer","CreatedById":135689,"CreatedDateTime":"2018-04-04T18:52:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223344464\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522826397\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre the versions compatible, though? Last I heard, v2 Trajectories and kOS aren\u0027t compatible yet:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2254\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2254\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks I missed that.\u00A0 I guess I\u0027ll just wait til its updated.\n\u003C/p\u003E\n"},{"CreatedByName":"funkheld","CreatedById":174450,"CreatedDateTime":"2018-04-05T07:13:09Z","Content":"\n\u003Cp\u003E\nhow can you please receive data in one until please ?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\tLOCK THROTTLE TO 1.0. \u00A0\u00A0\n\tWHEN MAXTHRUST = 0 THEN {\n\u00A0 \u00A0 STAGE.\n\u00A0 \u00A0 PRESERVE.\n}.\n\tLOCK STEERING TO UP.\n\tUNTIL SHIP:ALTITUDE \u0026gt; 9000\n{\n\u00A0 PRINT \u0022Altitude :\u0022.\n\u00A0 PRINT ROUND(SHIP:ALTITUDE,0).\n\u00A0 PRINT \u0022Apoapsis:\u0022.\n\u00A0 PRINT ROUND(SHIP:APOAPSIS,0).\n\u00A0 PRINT \u0022Periapsis:\u0022.\n\u00A0 PRINT ROUND(SHIP:PERIAPSIS,0).\n\u00A0 PRINT \u0022Velocity:\u0022.\n\u00A0 PRINT ROUND(SHIP:VELOCITY:SURFACE:MAG,1).\n\u00A0 WAIT 0.1.\n......how can you please receive data in one until?\n}.\n\tLOCK THROTTLE TO 0.\n\tSET SHIP:CONTROL:PILOTMAINTHROTTLE TO 0.\n\t\u003C/pre\u003E\n\u003Cp\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\ngreeting.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2018-04-05T08:57:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223345480\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522912389\u0022 data-ipsquote-userid=\u0022174450\u0022 data-ipsquote-username=\u0022funkheld\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, funkheld said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nhow can you please receive data in one until please ?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe lines of code in\u00A0your Until will run every 0.1 seconds until it hits 9000m so it is receiving data as it goes if that\u0027s what you mean.\u00A0 If you mean how do you trip out of the loop if something else happens, you could have multiple criteria to drop you out of the loop.\n\u003C/p\u003E\n\u003Cp\u003E\nIncidentally you can print to a specific point on the screen, which will be overwritten each time rather than it all scrolling off the screen, I find it makes for much easier reading of outputs, but bear in mind if the programme crashes the error report will often overwrite it as it will start from the\u00A0cursor point.\n\u003C/p\u003E\n\u003Cp\u003E\neg.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EUntil ship:Altitude\u0026gt;9000 or OtherParameter=True{\n\tPrint \u0022Altitude : \u0022 \u002B Round(Ship:Altitude,1) \u002B \u0022 Meters  \u0022 at (0,20).\n\tPrint \u0022Apoapsis : \u0022 \u002B Round(Ship:apoapsis,1) \u002B \u0022 Meters  \u0022 at (0,21).\n\tPrint \u0022Speed    : \u0022 \u002B Round(Ship:velocity:mag,1) \u002B \u0022 m/s  \u0022 at (0,22).\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-05T08:57:37Z\u0022 title=\u002204/05/2018 08:57  AM\u0022 data-short=\u00226 yr\u0022\u003EApril 5, 2018\u003C/time\u003E by RizzoTheRat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"maculator","CreatedById":122127,"CreatedDateTime":"2018-04-05T09:03:06Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/174450-funkheld/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022174450\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/174450-funkheld/\u0022 rel=\u0022\u0022\u003E@funkheld\u003C/a\u003E\u00A0you could also put a \u0022clearscreen.\u0022 at the top of your loop if you don\u0027t care about other stuff on the display.\n\u003C/p\u003E\n\u003Cp\u003E\nThis will clear the screen every run before it prints your data.\n\u003C/p\u003E\n"},{"CreatedByName":"funkheld","CreatedById":174450,"CreatedDateTime":"2018-04-05T10:07:23Z","Content":"\n\u003Cp\u003E\nI wanted a command from\u003Cstrong\u003E tcp to kos\u003C/strong\u003E in a loop and work off in the loop\n\u003C/p\u003E\n\u003Cp\u003E\n------------------------------\n\u003C/p\u003E\n\u003Cp\u003E\nuntil false\u00A0{\u003Cbr\u003E\n......I wanted a command from tcp to kos in a loop and work off in the loop\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\ngreeting\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-05T10:09:02Z\u0022 title=\u002204/05/2018 10:09  AM\u0022 data-short=\u00226 yr\u0022\u003EApril 5, 2018\u003C/time\u003E by funkheld\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Black-Two-","CreatedById":177626,"CreatedDateTime":"2018-04-05T11:24:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223344875\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522863305\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLocks *in general* don\u0027t get recalculated once per cycle.\u00A0 They get recalculated on the fly only just at the moment when their value is being queried by some other part of your program.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot to be rude, but does it make any practical difference?\n\u003C/p\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2018-04-05T20:56:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223344515\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522832193\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 04.04.2018 at 11:56 AM, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy intention is to add the node DeltaV to ships velocity at that node, and then burn on an acceleration vector to get to that velocity.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere\u0027s an example script for that that works like a charm in most cases: \u003Ca href=\u0022https://ksp-kos.github.io/KOS/tutorials/exenode.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ksp-kos.github.io/KOS/tutorials/exenode.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nOn other questions:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223344515\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522832193\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 04.04.2018 at 11:56 AM, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs SPV a recognised variable or do you have define it?\u00A0 It gets mentioned in the documentation but I\u0027ve not seen anything on how to reference it.\n\u003C/p\u003E\n\u003Cp\u003E\nPresumably the Z Axis V(0,1,0) is straight up, normal to the plane of the solar system?\u00A0 In which case what happens when your orbiting a body on an inclined plane like Minmus?\u00A0 Will V(0,1,0) on Minmus be different to V(0,1,0) around the sun?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAny particular reason why you go with a Right handed co-ordinate system rather than sticking with Left?\u00A0 I know Right makes more sense but I think I\u0027d probably confuse myself switching between left and right.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSPV is not a pre-defined variable but hey, I can name a parameter of a function whatever I want. It\u0027s an optional parameter, so if none provided it will take SolarPrimeVector which \u003Cstrong\u003Eis\u003C/strong\u003E a pre-defined variable.\n\u003C/p\u003E\n\u003Cp\u003E\nV(0,1,0) always points to the \u0022Celestial north pole\u0022 of Kerbin, and all bodies in stock game or any planet pack (except when Principia is installed) have collinear axes of rotation. That\u0027s how KSP\u0027s engine is designed. Orbital planes differ, however, so all bodies have axial tilt exactly equal to the inclination of their orbits to the in-game XZ plane. The reason why ecliptics in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E has such weird inclination is to mimic real-life Earth\u0027s axial tilt to the ecliptic plane - \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E devs could not tilt Earth axis, so they tilted the orbital plane.\n\u003C/p\u003E\n\u003Cp\u003E\nAs for using right-hand coordinates, I used those functions for reproducing Shuttle PEG guidance algorithm, and all the vector products in the papers I took it from are in right-handed system. Converting vectors from kOS to a right-handed frame required less mental acrobatics than figuring out the correct order of operands every time I had to code an equation with a vector product.\n\u003C/p\u003E\n"}]}