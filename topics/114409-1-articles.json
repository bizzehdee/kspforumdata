{"TopicId":114409,"ForumId":29,"TopicTitle":"Questions About Asteroids (and the Orbit Class)","CreatedByName":"ve2dmn","CreatedById":147103,"CreatedDateTime":"2015-06-28T02:01:06Z","PageNum":1,"Articles":[{"CreatedByName":"ve2dmn","CreatedById":147103,"CreatedDateTime":"2015-06-28T02:01:06Z","Content":"\n\u003Cp\u003EI\u0027m trying to find which Asteroid are on a collision course for Kerbin and I can\u0027t seem to get the info from the orbit Class.\u003C/p\u003E\u003Cp\u003EVessel.orbit.closestEncounterLevel always seems to be None for not active vessel;\u003C/p\u003E\u003Cp\u003ESimilar results for (all return false, none, null, etc...) :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003Eorbit.closestEncounterBody\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Eorbit.closestEncounterPatch\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Eorbit.nextPatch\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe only information I need is the altitude at periapsis around Kerbin, if there is one. (Then set to Asteroid to be auto-tracked, Which I know how to do thanks to \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/75376-Asteroid-Spawn-API\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/75376-Asteroid-Spawn-API\u003C/a\u003E ) \u003C/p\u003E\u003Cp\u003EBut so far, if the vessel is OnRail (AKA not the active one), I cannot get any orbit information besides the current orbit. (and I can\u0027t get Orbit.SolveClosestApproach to work)\u003C/p\u003E\u003Cp\u003EAny idea?\u003C/p\u003E\n"},{"CreatedByName":"ve2dmn","CreatedById":147103,"CreatedDateTime":"2015-07-02T01:45:34Z","Content":"\n\u003Cp\u003ETo reply to my own post, This is code that made Patches possible.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eif (!v.PatchedConicsAttached) {\u003Cbr\u003E\t\t\t\tprint(\u0022No PatchedConicSolver. Creating a New One. \u0022);\u003Cbr\u003E\t\t\t\tv.patchedConicSolver = new PatchedConicSolver ();\u003Cbr\u003E\t\t\t\tv.AttachPatchedConicsSolver ();\u003Cbr\u003E\t\t\t\tv.patchedConicSolver.Update ();\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI still have to figure out why it works Sometimes, and sometimes, it gives my a NullReference Exception for AttachPatchedConicsSolver ()...\u003C/p\u003E\u003Cp\u003EBut at least now I have Encouters and NextPatch in the robit of each vessel (just need to remember to run v.DetachPatchedConicsSolver () once I have the info I need....)\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-07-02T08:47:51Z","Content":"\n\u003Cp\u003ECareer mode ? Fail when the tracking station is not upgraded ?\u003C/p\u003E\n"},{"CreatedByName":"ve2dmn","CreatedById":147103,"CreatedDateTime":"2015-07-03T00:59:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003ECareer mode ? Fail when the tracking station is not upgraded ?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAsteroids do not spawn if the tracking station is not upgraded...\u003C/p\u003E\n"},{"CreatedByName":"tomf","CreatedById":57809,"CreatedDateTime":"2015-07-09T13:35:42Z","Content":"\n\u003Cp\u003EThese are exactly the 2 questions I came to this sub-forum to ask.\u003C/p\u003E\u003Cp\u003EHowever I can\u0027t see on the linked thread anything about making an asteroid tracked. I want to start tracking an asteroid at the moment that the player accepts a contract involving it. At the moment I have the regretable situation that a player can accept a contract only to find that the asteroid involved gets deleted immediatly afterwards.\u003C/p\u003E\u003Cp\u003Eedit:\u003C/p\u003E\u003Cp\u003EFound this discovery line\u003C/p\u003E\u003Cp\u003Evessel.DiscoveryInfo.SetLevel(DiscoveryLevels.StateVectors | DiscoveryLevels.Name | DiscoveryLevels.Presence);\u003C/p\u003E\u003Cp\u003EWill this be enough to prevent it from being deleted?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-09T14:48:58Z\u0022 title=\u002207/09/2015 02:48  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 9, 2015\u003C/time\u003E by tomf\u003C/strong\u003E\n\u003C/span\u003E\n"}]}