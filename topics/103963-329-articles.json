{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":329,"Articles":[{"CreatedByName":"Arco123","CreatedById":201477,"CreatedDateTime":"2020-02-16T20:45:34Z","Content":"\u003E \n\u003E \n\u003E Just now, blackrack said:\n\u003E \n\u003E \n\u003E 20-30 fps? What are you doing?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Look at the video above, it should tell you everything you need to know about fps.\n\u003E \n\nCant see it due to school blocker. Part counts don\u0027t matter. What ever I do doesn\u0027t change the fps and even the stock visuals go below 60 for no reason."},{"CreatedByName":"JKerman","CreatedById":166532,"CreatedDateTime":"2020-02-16T23:58:21Z","Content":"I\u0027m getting these blue artifacts around lights and landing gear. Any idea on how to get rid of them?![9ZjBc3D.png](https://i.imgur.com/9ZjBc3D.png)"},{"CreatedByName":"COL.R.Neville","CreatedById":168067,"CreatedDateTime":"2020-02-17T12:44:02Z","Content":"sunflares are borked in 1.9 as well. shows up fine in the tracking station. but looks like some kind of mask is over the sun in the flight scene. using -force -d3d11\n\n**Edited \u003Ctime datetime=\u00222020-02-17T12:44:27Z\u0022 title=\u002202/17/2020 12:44  PM\u0022 data-short=\u00224 yr\u0022\u003EFebruary 17, 2020\u003C/time\u003E by COL.R.Neville**"},{"CreatedByName":"Delay","CreatedById":173586,"CreatedDateTime":"2020-02-17T14:46:38Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, \u003Cabbr title=\u0022Center of Lift\u0022\u003ECOL\u003C/abbr\u003E.R.Neville said:\n\u003E \n\u003E \n\u003E sunflares are borked in 1.9 as well. shows up fine in the tracking station. but looks like some kind of mask is over the sun in the flight scene. using -force -d3d11\n\u003E \n\nThe mod is currently only available for version 1.8. There is no guarantee it will continue working in future versions without changes, especially when considering how and to what extent Scatterer alters the game."},{"CreatedByName":"Rodger","CreatedById":153575,"CreatedDateTime":"2020-02-17T15:19:04Z","Content":"I\u0027m getting a crash fairly often, on scene changes, and I just noticed scatterer AtmosphereProjector was mentioned in the log. Is it possible it\u0027s the cause? Log: [https://drive.google.com/open?id=1Uc3U9171Pm48YH8v6XFkXGHLuQiTXyMc](https://drive.google.com/open?id=1Uc3U9171Pm48YH8v6XFkXGHLuQiTXyMc)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-02-18T07:38:44Z","Content":"\u003E \n\u003E \n\u003E 16 hours ago, Rodger said:\n\u003E \n\u003E \n\u003E I\u0027m getting a crash fairly often, on scene changes, and I just noticed scatterer AtmosphereProjector was mentioned in the log. Is it possible it\u0027s the cause? Log: [https://drive.google.com/open?id=1Uc3U9171Pm48YH8v6XFkXGHLuQiTXyMc](https://drive.google.com/open?id=1Uc3U9171Pm48YH8v6XFkXGHLuQiTXyMc)\n\u003E \n\nI don\u0027t have access to your drive, but anyway, if it\u0027s the issue with the destructor, it\u0027s fixed and will be released in next update."},{"CreatedByName":"Rodger","CreatedById":153575,"CreatedDateTime":"2020-02-18T08:34:01Z","Content":"\u003E \n\u003E \n\u003E 53 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E I don\u0027t have access to your drive, but anyway, if it\u0027s the issue with the destructor, it\u0027s fixed and will be released in next update.\n\u003E \n\nOh sorry, should be public now, but yeah I think it was the destructor. Is the next version going to be 1.8.1 compatible still?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-02-18T10:38:18Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Rodger said:\n\u003E \n\u003E \n\u003E Oh sorry, should be public now, but yeah I think it was the destructor. Is the next version going to be 1.8.1 compatible still?\n\u003E \n\nYes"},{"CreatedByName":"Aanus","CreatedById":202900,"CreatedDateTime":"2020-02-19T09:25:15Z","Content":"do you have an estimate for 1.9 compatibility?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-02-19T19:05:57Z","Content":"\u003E \n\u003E \n\u003E 9 hours ago, Aanus said:\n\u003E \n\u003E \n\u003E do you have an estimate for 1.9 compatibility?\n\u003E \n\nSpoiler\n\n\u00AF\\\\_(\u30C4)\\_/\u00AF\n\nBut in all seriousness, probably in two weeks as I\u0027m off on vacation next week."},{"CreatedByName":"c39687","CreatedById":195695,"CreatedDateTime":"2020-02-20T03:56:11Z","Content":"\u003E \n\u003E \n\u003E 8 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Reveal hidden contents\n\u003E \n\u003E \n\u003E \u00AF\\\\_(\u30C4)\\_/\u00AF\n\u003E \n\u003E \n\u003E \n\u003E But in all seriousness, probably in two weeks as I\u0027m off on vacation next week.\n\u003E \n\nyeah I don\u0027t know if that is going to work for me... im going to need you to put vacation time on hold... this is the kerbal community we are talking about and you have one of the hottest mods around... when you decided to release one of the greatest kerbal mods around you signed your life away to the community... you don\u0027t have the luxuries normal people have... and yeah im just joking xD\n\nis there anyway to make the current version work again like recompiling with 1.9 dlls? I have no idea im ignorant to all this kerbal modding"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-02-20T04:57:49Z","Content":"\u003E \n\u003E \n\u003E 59 minutes ago, c39687 said:\n\u003E \n\u003E \n\u003E is there anyway to make the current version work again like recompiling with 1.9 dlls? I have no idea im ignorant to all this kerbal modding\n\u003E \n\nRead the last page"},{"CreatedByName":"James Kerman","CreatedById":160462,"CreatedDateTime":"2020-02-20T08:38:55Z","Content":"Some content has been removed. Please do not resort to personal attacks or bickering as it never leads anywhere good and if you come across a post you think may breach the [forum guidelines](https://forum.kerbalspaceprogram.com/index.php?/guidelines/), please report it without responding as it just adds fire to the flames."},{"CreatedByName":"c39687","CreatedById":195695,"CreatedDateTime":"2020-02-20T21:38:30Z","Content":"\u003E \n\u003E \n\u003E 16 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E Read the last page\n\u003E \n\nthis is the last... oh nm not worth my time"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-02-20T21:51:30Z","Content":"Ok guys, so I\u0027m uplading a new version for 1.8.1 for now, it contains the caustics, as well as the ability to have colored suns affect the atmospheres, and some bug fixes. As I said before 1.9 will come after\n\nLinks in the usual channels, it will be up shortly.\n\nFew quick snaps: [https://imgur.com/a/GQ8ucqc](https://imgur.com/a/GQ8ucqc)\n\nVideo of the caustics:  [https://www.youtube.com/watch?v=lV-1tSvEh9s\u0026feature=emb_title](https://www.youtube.com/watch?v=lV-1tSvEh9s\u0026feature=emb_title)"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2020-02-20T22:10:28Z","Content":"\u003E \n\u003E \n\u003E 17 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Ok guys, so I\u0027m uplading a new version for 1.8.1 for now, it contains the caustics, as well as the ability to have colored suns affect the atmospheres, and some bug fixes. As I said before 1.9 will come after\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Links in the usual channels, it will be up shortly.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Few quick snaps: [https://imgur.com/a/GQ8ucqc](https://imgur.com/a/GQ8ucqc)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Video of the caustics:  [https://www.youtube.com/watch?v=lV-1tSvEh9s\u0026feature=emb_title](https://www.youtube.com/watch?v=lV-1tSvEh9s\u0026feature=emb_title)\n\u003E \n\nAre there any syntax changes we need to look out for? Or will mods with current 1.8.1 compatibility still work?"},{"CreatedByName":"Beetlecat","CreatedById":92207,"CreatedDateTime":"2020-02-20T22:10:41Z","Content":"Is just posting \u0022w00t woot!\u0022 appropriate as a response to this?\n\nAsking for a friend."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-02-20T22:27:27Z","Content":"\u003E \n\u003E \n\u003E 16 minutes ago, Galileo said:\n\u003E \n\u003E \n\u003E Are there any syntax changes we need to look out for? Or will mods with current 1.8.1 compatibility still work?\n\u003E \n\nAll compatible, new changes are optional, if no sunColor is provided it defaults to white, and if no caustics are provided they are not used.\n\nYou can refere to these commits for syntax:\n\n[https://github.com/LGhassen/ScattererConfig/commit/807b7b0533f04b5a03c2a439c6c7eb7f83e126a6](https://github.com/LGhassen/ScattererConfig/commit/807b7b0533f04b5a03c2a439c6c7eb7f83e126a6)\n\n[https://github.com/LGhassen/ScattererConfig/commit/42ded8165aa10723d2ce9a881192cd908e5b325d](https://github.com/LGhassen/ScattererConfig/commit/42ded8165aa10723d2ce9a881192cd908e5b325d)\n\n**Edited \u003Ctime datetime=\u00222020-02-20T22:27:57Z\u0022 title=\u002202/20/2020 10:27  PM\u0022 data-short=\u00224 yr\u0022\u003EFebruary 20, 2020\u003C/time\u003E by blackrack**"},{"CreatedByName":"Jesusthebird","CreatedById":176735,"CreatedDateTime":"2020-02-20T23:01:21Z","Content":"Those Ocean caustics look amazing! Ive always been so bored with the ocean, this will lively them up some!"},{"CreatedByName":"Beetlecat","CreatedById":92207,"CreatedDateTime":"2020-02-21T04:42:50Z","Content":"\u003E \n\u003E \n\u003E 6 hours ago, Galileo said:\n\u003E \n\u003E \n\u003E Are there any syntax changes we need to look out for? Or will mods with current 1.8.1 compatibility still work?\n\u003E \n\nGets ready in *JNSQ*."},{"CreatedByName":"Arco123","CreatedById":201477,"CreatedDateTime":"2020-02-21T13:22:26Z","Content":"I have some ideas for your planned features if you don\u0027t mind and some new ideas. \n\n\u003E \n\u003E \n\u003E \n\u003E - A new menu besides the two atmo and ocean. Near the changing tabs. This would be for the other features so you can edit it.  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  -depth of field (Please make a slider for this so we don\u0027t have to change cfg files. This is kinda important to cinematic creators as I find myself editing it over and over again to find the best setting.)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  -If you could add eye adaption that would be great! I know ks3p has it but it\u0027s either too dark or bright. (Two sliders for light and dark limits so people can change it.) [I don\u0027t understand how to change it in ks3p sadly.)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I was thinking those ideas would be great in your mod. I don\u0027t know if you would take those ideas and do it but thank you for considering. (I know nothing about modding soooo, yeah.)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E These are just ideas that I thought up while doing stuff in ksp.  \n\u003E \n\u003E \n\n\u003E \n\u003E"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-02-21T15:53:48Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Arco123 said:\n\u003E \n\u003E \n\u003E I have some ideas for your planned features if you don\u0027t mind\n\u003E \n\nThere is a different menu in the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E screen, which toggles the other features.\n\nDepth of field is not an effect I\u0027m fan of in real-time games tbh, it can be done today though (with gemfx or sweetfx I think), there are some people that used it before with scatterer, a google search should get you what you need.\n\nFor eye adaptation and HDR rendering, I tried it before and found that the game\u0027s shaders aren\u0027t designed for it and don\u0027t like high light intensities, also the game\u0027s rendertarget wasn\u0027t floating point so the point is moot. It may change in the future."},{"CreatedByName":"Arco123","CreatedById":201477,"CreatedDateTime":"2020-02-21T17:45:22Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E There is a different menu in the \u003Cabbr style=\u0022background-color:#ffffff;border-bottom:none;color:#353c41;font-size:14px;\u0022 title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E screen, which toggles the other features.\n\u003E \n\nWould that be in the main menu or the space center view? Same keys that turn on scatterer right?"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2020-02-21T19:45:28Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E For eye adaptation and HDR rendering, I tried it before and found that the game\u0027s shaders aren\u0027t designed for it and don\u0027t like high light intensities, also the game\u0027s rendertarget wasn\u0027t floating point so the point is moot. It may change in the future.\n\u003E \n\nIndeed, I too tried to enable HDR on KSPs terrain/scenery/buildings back in the 1.6.x/1.7.x era, and found that their shaders did....strange things... when HDR was enabled (simply turning it on in the KSP cameras...).  Stuff like the buildings gaining partial transparency whenever they were under direct sunlight (terrain was fine, as were faces on buildings not directly receiving sunlight).\n\nSome of this very well may have changed with the updates to using Unity 2019, but I haven\u0027t had the time to look into it personally yet.  Likely going to look into it before too long, as getting HDR working is almost required to enable bloom post-processing (it works without it, but not nearly as well).\n\n\u003E \n\u003E \n\u003E 6 hours ago, Arco123 said:\n\u003E \n\u003E \n\u003E -depth of field (Please make a slider for this so we don\u0027t have to change cfg files. This is kinda important to cinematic creators as I find myself editing it over and over again to find the best setting.)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  -If you could add eye adaption that would be great! I know ks3p has it but it\u0027s either too dark or bright. (Two sliders for light and dark limits so people can change it.) [I don\u0027t understand how to change it in ks3p sadly.)\n\u003E \n\nI personally don\u0027t see as either of these belong in Scatterer, being general rendering changes rather than anything specifically environmental related (which is Scatterer\u0027s focus from my viewpoint).\n\nMuch better would be to see the issues with KS3P fixed up, and then simply use that mod for what it is and the features it provides.  I realize that the author for that mod hasn\u0027t been around in some time, but there were some discussions in the thread of it possibly being picked up by others."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2020-02-21T20:21:58Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Arco123 said:\n\u003E \n\u003E \n\u003E Would that be in the main menu or the space center view? Same keys that turn on scatterer right?\n\u003E \n\nSpace center, there is a scatterer button on the right side.\n\n\u003E \n\u003E \n\u003E 34 minutes ago, Shadowmage said:\n\u003E \n\u003E \n\u003E Indeed, I too tried to enable HDR on KSPs terrain/scenery/buildings back in the 1.6.x/1.7.x era, and found that their shaders did....strange things... when HDR was enabled (simply turning it on in the KSP cameras...).  Stuff like the buildings gaining partial transparency whenever they were under direct sunlight (terrain was fine, as were faces on buildings not directly receiving sunlight).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Some of this very well may have changed with the updates to using Unity 2019, but I haven\u0027t had the time to look into it personally yet.  Likely going to look into it before too long, as getting HDR working is almost required to enable bloom post-processing (it works without it, but not nearly as well).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I personally don\u0027t see as either of these belong in Scatterer, being general rendering changes rather than anything specifically environmental related (which is Scatterer\u0027s focus from my viewpoint).\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Much better would be to see the issues with KS3P fixed up, and then simply use that mod for what it is and the features it provides.  I realize that the author for that mod hasn\u0027t been around in some time, but there were some discussions in the thread of it possibly being picked up by others.\n\u003E \n\nWould be nice to try again today.\n\nAs for HDR, the scattering in scatterer is rendered in HDR, taken to LDR and then added on top of the scene. To have the whole scene composited in HDR and then tonemapped would give much better results. Currently I use \u0022soft additive\u0022 blend mode on the sky, scattering and lens flare to try and recapture some of these HDR effects, like having the scattering seem more pronounced on dark terrain in the shadow of the mountain for example rather than on the lit side. It works to some degree, but nothing fancy like bloom."}]}