{"TopicId":210311,"ForumId":109,"TopicTitle":"KSP2 Physics... more than 2 bodies?","CreatedByName":"licht77","CreatedById":223492,"CreatedDateTime":"2022-10-27T11:43:53Z","PageNum":1,"Articles":[{"CreatedByName":"licht77","CreatedById":223492,"CreatedDateTime":"2022-10-27T11:43:53Z","Content":"\n\u003Cp\u003E\nHi! Is already known if KSP2\u0027s physics model will have more than 2 bodies interacting? eg. lagrange points are calling...\n\u003C/p\u003E\n"},{"CreatedByName":"The Aziz","CreatedById":150811,"CreatedDateTime":"2022-10-27T13:13:07Z","Content":"\n\u003Cp\u003E\nExcept Rausk twins, no. Still the same patched conics system.\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2022-10-28T04:04:51Z","Content":"\n\u003Cp\u003E\nPatched conics is just so much more simple to calculate while providing a decent amount of accuracy. Meanwhile 3\u002B body dynamics are more computationally intensive which would bog the game down a lot as more ships are travelling simultaneously as well as it just being far more daunting to new players. There will be some 3 body systems though so some of us wanting that experience won\u0027t be left out and as the mechanic is already in the game, I assume mods will quickly be there for those of us that would like such a system to be more prevalent.\n\u003C/p\u003E\n"},{"CreatedByName":"GoldForest","CreatedById":77770,"CreatedDateTime":"2022-10-28T04:27:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224192007\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221666929891\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 minutes ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPatched conics is just so much more simple to calculate while providing a decent amount of accuracy. Meanwhile 3\u002B body dynamics are more computationally intensive which would bog the game down a lot as more ships are travelling simultaneously as well as it just being far more daunting to new players. There will be some 3 body systems though so some of us wanting that experience won\u0027t be left out and as the mechanic is already in the game, I assume mods will quickly be there for those of us that would like such a system to be more prevalent.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo doubt Principia will get a 2.0 version soon after launch.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2022-11-18T02:02:43Z","Content":"\n\u003Cp\u003E\nIt\u2019s Unity\u2026 hell no there won\u2019t be anything like that. It\u2019s a physics engine designed for PPUs, ported to GPUs then ported to CPUs..\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2022-11-18T04:46:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200080\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668736963\u0022 data-ipsquote-userid=\u002261954\u0022 data-ipsquote-username=\u0022Majorjim!\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Majorjim! said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt\u2019s Unity\u2026 hell no there won\u2019t be anything like that. It\u2019s a physics engine designed for PPUs, ported to GPUs then ported to CPUs..\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBut it was already confirmed there will be N-body, just in select areas\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224192014\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221666931273\u0022 data-ipsquote-userid=\u002277770\u0022 data-ipsquote-username=\u0022GoldForest\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 10/28/2022 at 12:27 AM, GoldForest said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNo doubt Principia will get a 2.0 version soon after launch.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI hope so, I wonder how much of it will have to change to get ported over\n\u003C/p\u003E\n"},{"CreatedByName":"GoldForest","CreatedById":77770,"CreatedDateTime":"2022-11-18T06:40:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200111\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668746791\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBut it was already confirmed there will be N-body, just in select areas\n\u003C/p\u003E\n\u003Cp\u003E\nI hope so, I wonder how much of it will have to change to get ported over\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWe\u0027re probably looking at a complete rewrite since KSP 2\u0027s code will be little to nothing like KSP 1\u0027s\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2022-11-18T07:55:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200080\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668736963\u0022 data-ipsquote-userid=\u002261954\u0022 data-ipsquote-username=\u0022Majorjim!\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Majorjim! said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt\u2019s Unity\u2026 hell no there won\u2019t be anything like that. It\u2019s a physics engine designed for PPUs, ported to GPUs then ported to CPUs..\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPhysX isn\u0027t used for orbital calculations. It\u0027s not what it\u0027s for. The trajectory computation is custom.\n\u003C/p\u003E\n\u003Cp\u003E\nThat said, numerical integration of gravitational interactions is notoriously unstable. You either have to make the time step very small even with RK4, or have to rely on very collocation methods. Either one brings its own limitations. Now, technically, since KSP2 will allow us to time warp with engines lit, you have to do this anyways - you can\u0027t just keep the ship on conic section rails if its engines are firing, but if the engineer Intercept hired to do physics really knows his stuff, he might have implemented a perturbation based approach, which allows you to basically run a step as if its on rails, then make corrections for external force. If that external force is a constant within the time step, as engine\u0027s thrust basically is, you can get wonderful precision with RK4 or even a velocity Verlet method. The math for it is a bit fancy, but that engineer has a background in finite element analysis, IIRC, so I\u0027m cautiously optimistic.\n\u003C/p\u003E\n\u003Cp\u003E\nIf this is, indeed, what\u0027s being done to improve the precision of trajectory computation while time-warping with engines on, then it\u0027s a fantastic reason to stick with patched conics. N-body is fun and all, but if that limits the time warp to a value so low the interstellar is basically unplayable, then it\u0027s not worth it.\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2022-11-18T08:01:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200123\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668753628\u0022 data-ipsquote-userid=\u002277770\u0022 data-ipsquote-username=\u0022GoldForest\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, GoldForest said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWe\u0027re probably looking at a complete rewrite since KSP 2\u0027s code will be little to nothing like KSP 1\u0027s\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIm not a programmer but I don\u0027t think the majority of what makes up principia is KSP necessarily. I think it just takes data KSP provides and that could be changed by just making sure the right variables go in the right places when KSP arrives. Though, I imagine continuous thrust under ward could change things.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWe\u0027ll see, but like I said.. Im not a programmer, Ive written code, but Im no where near fluent, I just get the gist.\n\u003C/p\u003E\n"},{"CreatedByName":"GoldForest","CreatedById":77770,"CreatedDateTime":"2022-11-18T08:21:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200134\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668758508\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIm not a programmer but I don\u0027t think the majority of what makes up principia is KSP necessarily. I think it just takes data KSP provides and that could be changed by just making sure the right variables go in the right places when KSP arrives. Though, I imagine continuous thrust under ward could change things.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWe\u0027ll see, but like I said.. Im not a programmer, Ive written code, but Im no where near fluent, I just get the gist.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not a programmer at all either, but from what we\u0027ve been told and my understanding, anything from KSP 1 will not work in KSP 2 without major overhauls. Modders might be able to get away with reusing some code from KSP 1 plugins, but not all of it. A large portion more than likely will have to be rewritten. I suspect some devs will decide to completely rewrite their mod\u0027s code from the ground up, to make it better suited for KSP 2, seeing as KSP 2\u0027s code won\u0027t be paperclips and rubber bands like KSP 1\u0027s is.\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2022-11-18T09:01:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200137\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668759680\u0022 data-ipsquote-userid=\u002277770\u0022 data-ipsquote-username=\u0022GoldForest\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n38 minutes ago, GoldForest said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m not a programmer at all either, but from what we\u0027ve been told and my understanding, anything from KSP 1 will not work in KSP 2 without major overhauls. Modders might be able to get away with reusing some code from KSP 1 plugins, but not all of it. A large portion more than likely will have to be rewritten. I suspect some devs will decide to completely rewrite their mod\u0027s code from the ground up, to make it better suited for KSP 2, seeing as KSP 2\u0027s code won\u0027t be paperclips and rubber bands like KSP 1\u0027s is.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think that largely depends on the type of mod. Im not saying any KSP 1 mods would work on KSP 2, but surely cosmetic mods for instance would translate over much more easily than something like realism overhaul or kerbalism\n\u003C/p\u003E\n"},{"CreatedByName":"GoldForest","CreatedById":77770,"CreatedDateTime":"2022-11-18T09:23:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200142\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668762109\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 minutes ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI think that largely depends on the type of mod. Im not saying any KSP 1 mods would work on KSP 2, but surely cosmetic mods for instance would translate over much more easily than something like realism overhaul or kerbalism\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFrom my understanding, models have to be redone entirely to support PBR, so any cosmetic mod like Restock has to be redone. The textures might be able to be reused, but the models need to be redone.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2022-11-18T10:44:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200144\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668763399\u0022 data-ipsquote-userid=\u002277770\u0022 data-ipsquote-username=\u0022GoldForest\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, GoldForest said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFrom my understanding, models have to be redone entirely to support PBR, so any cosmetic mod like Restock has to be redone. The textures might be able to be reused, but the models need to be redone.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nModels themselves should be fine. People might have to re-export with tangents built, but that\u0027s about it. Textures on the other hand, yeah. There are different ways to set up PBR shaders, but typically you\u0027ll end up with at least one extra map containing things like metalicity and roughness of materials. So that\u0027d have to be made from scratch for every model.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200134\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668758508\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIm not a programmer but I don\u0027t think the majority of what makes up principia is KSP necessarily. I think it just takes data KSP provides and that could be changed by just making sure the right variables go in the right places when KSP arrives.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSupporting thrust during time warp is going to be a big deal. You\u0027ll also care way more about integration stability, so I\u0027m pretty sure \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/77770-goldforest/\u0026amp;do=hovercard\u0022 data-mentionid=\u002277770\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/77770-goldforest/\u0022 rel=\u0022\u0022\u003E@GoldForest\u003C/a\u003E\u00A0 is right here, and it\u0027s pretty much a clean re-write. But I haven\u0027t looked at the Principia code, so maybe they already set it up in a way that\u0027d make it a lot more straight forward.\n\u003C/p\u003E\n"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2022-11-18T16:35:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200132\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668758116\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPhysX isn\u0027t used for orbital calculations. It\u0027s not what it\u0027s for. The trajectory computation is custom.\n\u003C/p\u003E\n\u003Cp\u003E\nThat said, numerical integration of gravitational interactions is notoriously unstable. You either have to make the time step very small even with RK4, or have to rely on very collocation methods. Either one brings its own limitations. Now, technically, since KSP2 will allow us to time warp with engines lit, you have to do this anyways - you can\u0027t just keep the ship on conic section rails if its engines are firing, but if the engineer Intercept hired to do physics really knows his stuff, he might have implemented a perturbation based approach, which allows you to basically run a step as if its on rails, then make corrections for external force. If that external force is a constant within the time step, as engine\u0027s thrust basically is, you can get wonderful precision with RK4 or even a velocity Verlet method. The math for it is a bit fancy, but that engineer has a background in finite element analysis, IIRC, so I\u0027m cautiously optimistic.\n\u003C/p\u003E\n\u003Cp\u003E\nIf this is, indeed, what\u0027s being done to improve the precision of trajectory computation while time-warping with engines on, then it\u0027s a fantastic reason to stick with patched conics. N-body is fun and all, but if that limits the time warp to a value so low the interstellar is basically unplayable, then it\u0027s not worth it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you for the insight!\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Yakez","CreatedById":203390,"CreatedDateTime":"2022-12-12T13:39:35Z","Content":"\n\u003Cp\u003E\nI feel people miss the hype of Rusk twins.\u00A0 On one hand we have 2 body system everywhere just like in KSP1. But this small 3 body interaction addition for only one instance is still huge chunk of code done (maybe even bigger chunk than everything else).\n\u003C/p\u003E\n\u003Cp\u003E\nI bet it would be relatively easy to implement as mod for everything else in the game. But what stopping it to be just an extra difficulty toggle? Default game with 2 body interactions and hard mode with 3 body interactions for people who have \u0022beaten\u0022 Rusk twins in their playthrough?\n\u003C/p\u003E\n"},{"CreatedByName":"tstein","CreatedById":223854,"CreatedDateTime":"2022-12-12T16:24:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224191595\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221666871033\u0022 data-ipsquote-userid=\u0022223492\u0022 data-ipsquote-username=\u0022licht77\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 10/27/2022 at 8:43 AM, licht77 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi! Is already known if KSP2\u0027s physics model will have more than 2 bodies interacting? eg. lagrange points are calling...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt is possible to\u00A0 create lagrange points without the complete simulation of the NBodies. The lagrance points effectively are local minima energy state wise\u00A0 so there are ways to implement them artificially with zones where certain levels of forces are \u0022neutralized\u0022 artificially.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat said it woudl not be terribly\u00A0 hard to implement for specifically\u00A0 kerbin - moon-\u00A0 ship\u00A0 sets.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208112\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670852375\u0022 data-ipsquote-userid=\u0022203390\u0022 data-ipsquote-username=\u0022Yakez\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Yakez said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI feel people miss the hype of Rusk twins.\u00A0 On one hand we have 2 body system everywhere just like in KSP1. But this small 3 body interaction addition for only one instance is still huge chunk of code done (maybe even bigger chunk than everything else).\n\u003C/p\u003E\n\u003Cp\u003E\nI bet it would be relatively easy to implement as mod for everything else in the game. But what stopping it to be just an extra difficulty toggle? Default game with 2 body interactions and hard mode with 3 body interactions for people who have \u0022beaten\u0022 Rusk twins in their playthrough?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot in fact...\u00A0 NBodies simulation is\u00A0\u00A0 very little code, but it is a code that is computationally\u00A0 very expensive.\u00A0 One can implement an N-Body\u00A0 simulation with an Rk4 integrator in an afternoon. The problem is you cannot predict the future without\u00A0\u00A0 stepping into the future and that makes\u00A0 orbit prediction quite expensive (specially considering time acceleration)\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200132\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668758116\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/18/2022 at 4:55 AM, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat said, numerical integration of gravitational interactions is notoriously unstable. You either have to make the time step very small even with RK4, or have to rely on very collocation methods. Either one brings its own limitations. Now, technically, since KSP2 will allow us to time warp with engines lit, you have to do this anyways - you can\u0027t just keep the ship on conic section rails if its engines are firing, but if the engineer Intercept hired to do physics really knows his stuff, he might have implemented a perturbation based approach, which allows you to basically run a step as if its on rails, then make corrections for external force. If that external force is a constant within the time step, as engine\u0027s thrust basically is, you can get wonderful precision with RK4 or even a velocity Verlet method. The math for it is a bit fancy, but that engineer has a background in finite element analysis, IIRC, so I\u0027m cautiously optimistic.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you want\u00A0 the whole N Body system\u00A0 to\u00A0\u00A0 change all the time yes, but if someone just wants the ships to be constantly under effect of gravity of the N-closer bodies\u00A0 and the bodies themselves just have a few cycles or \u0022pre computed\u00A0 pattern and after those they are pushed into the previously\u00A0 exactly known position) it is feasible.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBtw For planetary body levels\u00A0 an Rk4 works\u00A0 quite well even with a huge 1 hour step. IT takes\u00A0\u00A0 tens of years\u00A0 of simulation before you\u00A0 see\u00A0 weird stuff and KSP we are not trying to predict\u00A0 centuries of effect of jupiter in orth cloud.\n\u003C/p\u003E\n"},{"CreatedByName":"Drakenred65","CreatedById":154503,"CreatedDateTime":"2022-12-12T19:23:57Z","Content":"\n\u003Cp\u003E\nThere was a n body simulation of kerbal space.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.youtube.com/watch?v=O0_OQRN1VNA\u0022 rel=\u0022external nofollow\u0022\u003Eit started chucking moons around\u003C/a\u003E\u2026\n\u003C/p\u003E\n"},{"CreatedByName":"RKunze","CreatedById":204847,"CreatedDateTime":"2022-12-12T19:31:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224200132\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221668758116\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/18/2022 at 8:55 AM, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat said, numerical integration of gravitational interactions is notoriously unstable.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nActually, N-Body gravitational interaction per se is chaotic, and it is not easy to design a planetary system that\u0027s actually stable over longer periods.\n\u003C/p\u003E\n\u003Cp\u003E\nThat said, you can at least avoid the additional chaos and instability introduced by the inevitable numerical errors in a simulation by choosing a \u0022symplectic integrator\u0022 that preserves the system invariants even in the face of numerical errors (for a newtonian system, that would be the sum of potential and kinetic energy). You\u0027ll still get inaccurate results, of course, but instead if going completely out of control (as with a non-symplectic integrator such as Runge-Kutta), the orbits just wobble a bit around the \u0022real\u0022 position.\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2022-12-12T19:59:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208202\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670873498\u0022 data-ipsquote-userid=\u0022204847\u0022 data-ipsquote-username=\u0022RKunze\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 minutes ago, RKunze said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat said, you can at least avoid the additional chaos and instability introduced by the inevitable numerical errors in a simulation by choosing a \u0022symplectic integrator\u0022 that preserves the system invariants even in the face of numerical errors (for a newtonian system, that would be the sum of potential and kinetic energy).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat sounds great on paper, and is the correct way to approach many systems. Why don\u0027t you go ahead and write out a simplectic integrator for an n-body gravitational interaction. We can treat the sources of gravity as \u0022on rails,\u0022 as in KSP, but their positions are a function of time. As a hint, the total of potential and kinetic energy of the ship you\u0027re simulating is not a conserved quantity in this system. Let me know once you figure out the invariant to use. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208147\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670862243\u0022 data-ipsquote-userid=\u0022223854\u0022 data-ipsquote-username=\u0022tstein\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, tstein said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBtw For planetary body levels\u00A0 an Rk4 works\u00A0 quite well even with a huge 1 hour step. IT takes\u00A0\u00A0 tens of years\u00A0 of simulation before you\u00A0 see\u00A0 weird stuff and KSP we are not trying to predict\u00A0 centuries of effect of jupiter in orth cloud.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n1 hour steps will skip through some \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u0027s entirely, meaning your predicted and real trajectory will end up different depending on whether you go into time warp or not. Keep in mind that it\u0027s a significant requirement Intercept has been trying to satisfy, one that KSP failed hard at, that the trajectory you get when you plot the course is the one you actually get. How do you propose eliminating jumps between having encounter and not having an encounter in this setup? In a patched conics, I can solve for encounter and make sure that\u0027s included as a time step. How do you solve that with RK4?\n\u003C/p\u003E\n\u003Cp\u003E\nMoreover, RK4 tends to gain energy orbiting a single body. Not even getting into an n-body situation, there are ways to intentionally turn it into a kraken drive. How do you fix that?\n\u003C/p\u003E\n"},{"CreatedByName":"Strawberry","CreatedById":222150,"CreatedDateTime":"2022-12-12T20:17:52Z","Content":"\n\u003Cp\u003E\nWe dont know how rask and rusk work on the backend outside of it being a novel solution. My guess is whatever code rask and rusk uses takes the advantage that there are only three bodies in play, and they\u0027re of equal size and distance. Im guessing that applying whatever rask and rusk has going on in the backend to other systems will be far from trivial work.\n\u003C/p\u003E\n"},{"CreatedByName":"RKunze","CreatedById":204847,"CreatedDateTime":"2022-12-12T23:17:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208211\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670875173\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhy don\u0027t you go ahead and write out a simplectic integrator for an n-body gravitational interaction. We can treat the sources of gravity as \u0022on rails,\u0022 as in KSP, but their positions are a function of time. As a hint, the total of potential and kinetic energy of the ship you\u0027re simulating is not a conserved quantity in this system. Let me know once you figure out the invariant to use. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI could be tempted. But then, I\u0027d probably cheat and simply look at the Principia sources, since they did all the hard work already\u00A0 \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"tstein","CreatedById":223854,"CreatedDateTime":"2022-12-13T10:57:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208211\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670875173\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n1 hour steps will skip through some \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E\u0027s entirely, meaning your predicted and real trajectory will end up different depending on whether you go into time warp or not. Keep in mind that it\u0027s a significant requirement Intercept has been trying to satisfy, one that KSP failed hard at, that the trajectory you get when you plot the course is the one you actually get. How do you propose eliminating jumps between having encounter and not having an encounter in this setup? In a patched conics, I can solve for encounter and make sure that\u0027s included as a time step. How do you solve that with RK4?\n\u003C/p\u003E\n\u003Cp\u003E\nMoreover, RK4 tends to gain energy orbiting a single body. Not even getting into an n-body situation, there are ways to intentionally turn it into a kraken drive. How do you fix that?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat is not the idea .\u00A0 A system like the one in question does not need to\u00A0 run on same dt for all body categories and neither the N-Body\u00A0 must\u00A0 be truly quadratic.\u00A0 Planetary bodies are the only ones massive enough to\u00A0 really affect each other, so\u00A0 you have an integration loop\u00A0 running with dt of 1 hour (in kerbal smaller scale maybe go down to 15 min) where the\u00A0 velocities and accelerations are\u00A0 derived from the gravitational\u00A0 pull\u00A0 ONLY among the massive bodies .\u00A0 A second loop running in\u00A0 a tigher dt runs for all\u00A0 non\u00A0 super massive bodies and they\u00A0 get their derivatives calculated from the effect of the bodies in the first group upon them.\u00A0\u00A0\u00A0 The position of the celestial bodies between each iteration is\u00A0 a simple linear or quadratic interpolator between the previous point and the next one, the\u00A0 ships\u00A0 have much\u00A0\u00A0 more precise dt.\u00A0\u00A0 For each of the celestial bodies there is a final step every M iteractions where the whole energy state fo the system is adjusted to help erase numeric instability errors.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat is enough for a GAME. You have\u00A0 celestial bodies behaving as an N-Body system\u00A0\u00A0 with a precision enough that a casual observer cannot\u00A0\u00A0 say something is not\u00A0 right, and you have ships\u00A0 behaving as if\u00A0 under effect of\u00A0 N-Bodies ( again\u00A0 one can optimize and use only an n clsoer ones where n \u0026lt;N)\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208217\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670876272\u0022 data-ipsquote-userid=\u0022222150\u0022 data-ipsquote-username=\u0022Strawberry\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, Strawberry said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWe dont know how rask and rusk work on the backend outside of it being a novel solution. My guess is whatever code rask and rusk uses takes the advantage that there are only three bodies in play, and they\u0027re of equal size and distance. Im guessing that applying whatever rask and rusk has going on in the backend to other systems will be far from trivial work.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think those conditions are more related to\u00A0\u00A0\u00A0 having a multi body system that is stable.\u00A0\u00A0 When I wrote my first orbit integrator\u00A0 I was amazed\u00A0 how many times I had to try to change masses and velocities until I got a system that was stable (nothing being thrown into the void) in the first 30\u00A0 orbits.\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2022-12-13T14:03:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208352\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670929056\u0022 data-ipsquote-userid=\u0022223854\u0022 data-ipsquote-username=\u0022tstein\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, tstein said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nA second loop running in\u00A0 a tigher dt runs for all\u00A0 non\u00A0 super massive bodies and they\u00A0 get their derivatives calculated from the effect of the bodies in the first group upon them.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCool. So what\u0027s the dt for your space ships? How many iterations per second are you running now to make sure every probe stays in the correct orbit of planets and moons, while the player is running 1M factor time warp for an interstellar ship? 1 minute is probably too coarse for some orbits, and you need to be running hundreds of hours of simulation for every real-time second. How?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208352\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670929056\u0022 data-ipsquote-userid=\u0022223854\u0022 data-ipsquote-username=\u0022tstein\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, tstein said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor each of the celestial bodies there is a final step every M iteractions where the whole energy state fo the system is adjusted to help erase numeric instability errors.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBig oof. Double precision math has about 16 orders of magnitude, and games usually run on single precision, which is closer to 7 orders of magnitude. What do you imagine happens to the kinetic energy of your spacecraft when you try to include them in energy normalization along with the planets? And if you don\u0027t consider the planets, the energy of the space craft is not conserved. Your correction is absolutely useless, when for any given space craft, every planetary body is effectively an infinite pool of energy to within any numerical precision you can reasonably throw at this problem without grinding it to an absolute halt.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208352\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670929056\u0022 data-ipsquote-userid=\u0022223854\u0022 data-ipsquote-username=\u0022tstein\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, tstein said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat is enough for a GAME.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf I put some probes to orbit the Mun, send a rocket to Debdeb under maximum time warp, and when I switch back to the Mun all my probes are gone, it\u0027s not good enough for the game. And you do not have the necessary stability in the above to allow for this use case. If you really think it\u0027s so simple, you can go ahead and implement it. What you described above would take a couple of hours to put into code. Doesn\u0027t need to be complex. Kerbol, Kerbin, Mun all in their KSP orbits. A single satellite orbiting the Mun. Your goal is to simulate 40 Kerbin years (4 light years at 0.1 c trip to Debdeb) in approximately 6 minutes of real time, corresponding to 1M times warp. All we need to find on the other end is Kerbin and Mun where they\u0027re supposed to be and the satellite in\u00A0\u003Cem\u003Eroughly\u003C/em\u003E\u00A0the same orbit. That\u0027d be enough for a game. Good luck.\n\u003C/p\u003E\n"},{"CreatedByName":"tstein","CreatedById":223854,"CreatedDateTime":"2022-12-13T15:42:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208414\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670940229\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCool. So what\u0027s the dt for your space ships? How many iterations per second are you running now to make sure every probe stays in the correct orbit of planets and moons, while the player is running 1M factor time warp for an interstellar ship? 1 minute is probably too coarse for some orbits, and you need to be running hundreds of hours of simulation for every real-time second. How?\n\u003C/p\u003E\n\u003Cp\u003E\nBig oof. Double precision math has about 16 orders of magnitude, and games usually run on single precision, which is closer to 7 orders of magnitude. What do you imagine happens to the kinetic energy of your spacecraft when you try to include them in energy normalization along with the planets? And if you don\u0027t consider the planets, the energy of the space craft is not conserved. Your correction is absolutely useless, when for any given space craft, every planetary body is effectively an infinite pool of energy to within any numerical precision you can reasonably throw at this problem without grinding it to an absolute halt.\n\u003C/p\u003E\n\u003Cp\u003E\nIf I put some probes to orbit the Mun, send a rocket to Debdeb under maximum time warp, and when I switch back to the Mun all my probes are gone, it\u0027s not good enough for the game. And you do not have the necessary stability in the above to allow for this use case. If you really think it\u0027s so simple, you can go ahead and implement it. What you described above would take a couple of hours to put into code. Doesn\u0027t need to be complex. Kerbol, Kerbin, Mun all in their KSP orbits. A single satellite orbiting the Mun. Your goal is to simulate 40 Kerbin years (4 light years at 0.1 c trip to Debdeb) in approximately 6 minutes of real time, corresponding to 1M times warp. All we need to find on the other end is Kerbin and Mun where they\u0027re supposed to be and the satellite in\u00A0\u003Cem\u003Eroughly\u003C/em\u003E\u00A0the same orbit. That\u0027d be enough for a game. Good luck.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSorry to burst your bubble , but I already did implement it (not alone we were a team of 11 back in 2002). We used 10 ticks per second for every\u00A0 ship (we had a max count of\u00A0 64 ships in that game, but it was 2003, so the CPU power available was\u00A0 much more restricted as well, but\u00A0 doing things in 64 was never a problem because\u00A0 back then we did not use cookie cutter game engines, we always had to write the game engine) The planets energy normalization was not applied with the ships mixed, each\u00A0 ship\u00A0 was computed in a LOCAL\u00A0 frame of reference (you always need to have those because the graphic coordinate system already demands it, so to keep it for the physics was not that much more work, that combined with the fact that we limited the number of celestial bodies affecting a single\u00A0 body to a rather low number was enough to keep things pretty stable) . We did not try to\u00A0 get a final perfect energy state, just a dampening function\u00A0 to keep things stable (and it did work for our time frames).\u00A0\u00A0\u00A0 we could not get a transfer from one planet to other that ended with a single meter deviation on the final \u003Cabbr title=\u0022Periapsis\u0022\u003EPe\u003C/abbr\u003E, but we did not try that, we simply assumed\u00A0 (And displayed)t hat the player could not have such level of precision before\u00A0 reaching the terminal\u00A0 local frame of reference.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThere were a few other tricks we had to create, but\u00A0 after 20 years I do not remember everything anymore. Unfortunately the game development flopped\u00A0 because\u00A0 of internal administrative issues, but it did work pretty well for the type of scenario we had\u00A0 .\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUnder that system\u00A0 your mun probes would not be gone because they are simulated in a LOCAL frame of reference, but they do receive attraction of any body whose the gravitational pull was large enough\u00A0 comparing\u00A0 the origin of that local frame of reference to the origin of the other celestial body frame of reference.\u00A0 In our game we did not had time warp because it was a persistent\u00A0 real time game\u00A0 and the idea was that the whole system would\u00A0 have just a few orbit in the whole game lifetime (although the moon systems of the large planets\u00A0 would score up\u00A0 quite a good number of revolutions).\n\u003C/p\u003E\n\u003Cp\u003E\nIn nowhere I said that\u00A0 it would be easy to reach the necessary\u00A0 speed for a huge timewarp, I just said that the simulation itself with the precision needed for a game is not that hard to keep stable by cutting some corners of realism..\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"GigFiz","CreatedById":205457,"CreatedDateTime":"2022-12-13T17:05:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208470\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670946122\u0022 data-ipsquote-userid=\u0022223854\u0022 data-ipsquote-username=\u0022tstein\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n53 minutes ago, tstein said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nnot that hard to keep stable by cutting some corners of realism\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you have to do that already, why not just cut the whole issue out, stick with 2-body and save the dev-hours and computational power? I get that Lagrange points and better gravity assists (apparently. I\u0027ve seen it mentioned that they are easier with principia, at least) are cool, but at that point cost/benefit doesn\u0027t seem to really make sense.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224208414\u0022 data-ipsquote-contentid=\u0022210311\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221670940229\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDouble precision math has about 16 orders of magnitude, and games usually run on single precision, which is closer to 7 orders of magnitude\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn one of the dev diaries, they noted that, at the scales they are working at and the precision they need, you blow way past the limits of 64-bit calculation (and moving to double precision brings its own set of issues at large numbers), so it has to calculate things as a section within a section in order to reach the precision necessary. If, in order to keep framerates and performance high, you are doing only one section at a time like that, you need something to keep things stable and accurate everywhere else in the meantime with the minimum amount of resources, which sure sounds like you\u0027ve circled back around to rails again.\n\u003C/p\u003E\n\u003Cp\u003E\nPlus, as I saw someone here point out some time ago (and assuming their statement is accurate), NASA uses 2-body math to plan their missions, and that\u0027s worked out pretty well for them (we aren\u0027t exactly running planet formation simulations here. Even if our space programs go for hundreds, or even thousands of years, that\u0027s just a drop in the bucket); so hey, good enough for the space goose...\n\u003C/p\u003E\n"}]}