{"TopicId":167450,"ForumId":34,"TopicTitle":"[1.9.x] Textures Unlimited - PBR-Shader, Texture Set, and Model Loading API","CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-11T20:18:14Z","PageNum":40,"Articles":[{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-19T23:54:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471530\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539989326\u0022 data-ipsquote-userid=\u0022163177\u0022 data-ipsquote-username=\u0022Gordon Dry\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n49 minutes ago, Gordon Dry said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhich imho is weird - because DirectX 9 da fuq?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI thought so too... esp. as some of those effects won\u0027t even work on DX9....\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471530\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539989326\u0022 data-ipsquote-userid=\u0022163177\u0022 data-ipsquote-username=\u0022Gordon Dry\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n50 minutes ago, Gordon Dry said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nneither\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNoted; thx for the input \u003Cspan\u003E\u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471533\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539989499\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n51 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027d say Bloom and Lens\u00A0Flare are\u00A0the biggest ones for a PBR shader.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI hadn\u0027t even thought of lens flare, but I would imagine it should be relatively \u0027easy\u0027 as it shouldn\u0027t require any special information (just camera angle to light sources, some textures or procedural gen code for the flares, and controls for intensity).\u00A0 Bloom I\u0027m already about halfway done with a shader/script combo that works in the editor (had it sitting around awhile); nowhere close to trying it in KSP, but I\u0027d imagine there isn\u0027t too much customization needed -- as it works on the finished image, there is no need for worrying about whatever the camera setup was that generated the image.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471533\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539989499\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n56 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe other would be the one that over-exposes shiny edges\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you can find out what it is called, please let me know.\u00A0 Sounds like just another parameter in the bloom filter though, as you can adjust several of the thresholds to make those edges stand out more.\u00A0 Could also be something that interacts at the surface-shader level to over-expose metallics in the original render steps?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471533\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539989499\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSSAO is only ok if you can optimize it well; staticobject-terrain, intra-vessel, and vessel-terrain (EVA is a vessel).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not really set on having SSAO.\u00A0 I love the concept, but the implementations that I\u0027ve seen are far too wonky for my liking -- being very much camera/view dependent, moving around the scene makes the shading do... strange stuff.\u00A0 In deferred rendering with the extra buffer data it might be able to be done better, but that is a moot point for KSP purposes.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471536\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539989860\u0022 data-ipsquote-userid=\u0022163177\u0022 data-ipsquote-username=\u0022Gordon Dry\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n54 minutes ago, Gordon Dry said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI also can relinquish Motion Blur and Depth-of-Field.\u003Cbr\u003E\nSo I am totally okay with bloom, AO and lens flare.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, motion-blur and depth-of-field I find are only nice in small doses, as they are often over-used in games.\u00A0 Wouldn\u0027t mind some in-game toggles for them though (and config/parameter controls), which should be absolutely doable if I include them.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nSounds like at least bloom \u002B lens flare should be on the list \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 Maybe start there, and work on adding others over time; no reason to rush it.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs this is primarily intended as a personal project, I\u0027m mostly seeing if there is enough public interest to warrant either adding it to TU (as an optional, disabled by default feature) or packing it up separately.\u00A0 Even if I don\u0027t end up including or \u0027releasing\u0027 it, I\u0027ll likely still have a repo on github with compiled and usable assets (and it will be licensed such that it will be downloadable and usable; it just wouldn\u0027t have a forum post anywhere).\n\u003C/p\u003E\n\u003Cp\u003E\nThe good thing about all of these is there is a multitude of sources available for implementation details, and even some \u0027ready to use\u0027 packages like the Unity PP stack, so I\u0027m not going to have to invent any new mechanics... just implement the existing stuff such as to work with KSP.\u00A0 The \u0027tricky\u0027 part will likely be hooking in to all of the cameras.\u00A0 KSPs camera setup has always been a bit touchy...\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-20T00:10:30Z","Content":"\n\u003Cp\u003E\nDiscovered that setting\u00A0farClipPlane too high will cause all rendering to go up to 50% darker.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T00:14:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471569\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539992642\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n(I am not seeing any clouds when I set a camera to any of those layers you mentioned above, so not sure what the deal is there).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInteresting, I just put \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E back in my install yesterday and haven\u0027t really tested it out much yet... let me make sure it is all still working (maybe its missing in TU as well?).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471569\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539992642\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nartificial far cut-off that is much, much shorter than I specify.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, I ran into issues of that as well, only could solve it through the multi-pass render setup.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471569\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539992642\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI only see about 10 meters around me in local scenery and the rest is cut off.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nScaled space stuff actually isn\u0027t that far away from the camera/world origin... probably about 10m :).\u00A0 Pretty sure the entire skybox is only a ~20m cube; at least the atmosphere is rendered inside of that (possibly scaled space as well), and then the depth buffer is cleared and the \u0027real world\u0027 is rendered on top of it all (local scenery, vessels, kerbals).\u00A0 Again, was part of why I did the multi-pass rendering setup -- it is what KSP does, and the only way to get it rendered correctly.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471569\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539992642\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nit looks like the Unity camera is either blending\u003Cspan\u003E\uFEFF\u003C/span\u003E layers instead of stacking\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUnity doesn\u0027t \u0027stack\u0027 layers (rendering order dependent on layer) -- if the objects layer is in the layer-mask, they all get thrown into the same bucket and rendered in a single \u0027pass\u0027, using the z-buffer for determining what is in front/behind.\u00A0 Scaled space breaks this (and atmosphere, and skybox) because the objects are actually closer to the camera in the game scene (and just scaled down) than the surrounding scenery.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf it wasn\u0027t for all of those problems, TU wouldn\u0027t even need its reflection manager and rendering code -- I\u0027d just slap the reflection-probe in the scene and update its position periodically.\u00A0 I\u0027m willing to try and help you sort these problems out (would be good for TU as well)... but I\u0027m not sure some of them are fixable.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471580\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539994230\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDiscovered that setting\u00A0farClipPlane too high will cause all rendering to go up to 50% darker.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nProbably causing imprecision in the depth-buffer (z-buffer), resulting in terrible z-culling and/or incorrect rendering orders.\u00A0 The problem will mostly go away if you move the near-clip plane (a lot) further out.\u00A0 Basically you want the orders-of-magnitude between your near and far clip planes to be as small as possible.\u00A0 The more zeros in the differences, the less precise it will be, and the more artifacts that will occur.\n\u003C/p\u003E\n\u003Cp\u003E\nI think ideally you only want 2-3 orders of magnitude between them.\u00A0 If near-clip is 1m, you want far-clip to be 1,000m at most.\u00A0 If near clip is 1,000m, your far clip could be ~1,000,000 without too much loss of precision.\u00A0 (some of this may only apply to logarithmic depth buffers; not sure what the currently used default is...)\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T00:31:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471569\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539992642\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n38 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n(I am not seeing any clouds when I set a camera to any of those layers you mentioned above, so not sure what the deal is there).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nQuick testing shows that the \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E clouds definitely render for TU from orbit.\u00A0 Strangely, the clouds on kerbin from 86k orbit are rendered in the \u0027local scenery\u0027 layer -- must be using a transparent shader so it renders after the opaque geometry, with depth-test disabled, or is being done in post-process.\u00A0 I\u0027m....guessing these are the non-scaled space clouds\u00A0 (when does it cut off to using scaled space for kerbin? 100k?).\n\u003C/p\u003E\n\u003Cp\u003E\nAt ~150k orbit, the clouds are definitely only present in the \u0027scaled space/atmosphere\u0027 pass.\n\u003C/p\u003E\n\u003Cp\u003E\nSo there are definitely two different cloud sets for eve; standard and scaled.\u00A0\u00A0 Scaled space clouds are in either layer 9 or 10, and standard is in one of the four/five layers I posted above (sorry, can\u0027t really narrow it down too much more without compiling a custom debug version of TU, or digging through \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E source code...bleh).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T00:44:44Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/163084-alexus/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022163084\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/163084-alexus/\u0022 rel=\u0022\u0022\u003E@alexus\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve figured out what is going on with the plants and glass in your greenhouse retexture.\u00A0 The problem is that both of them are set to use the transparent shader, which has depth-writes disabled, and as transparent objects render front-to-back for a given render-pass, this causes the plants to be rendered -after- the glass.\u00A0 In order to solve this you would need to change the render-queue of the material for the -plants- to be transparent-1 -- so far this capability does not exist in TU, but I will look into adding it for the 1.5 update, and will let you know when the feature is available and how to use it.\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-20T00:47:41Z","Content":"\n\u003Cp\u003E\nThat at least tells me that I am missing something, as opposed to them actually not being present.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs for the reflection probe:\n\u003C/p\u003E\n\u003Cp\u003E\nMy goal is to find the cleanest/cheapest way possible to get a usable reflection.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not finished yet, but testing so far seems pretty good on this (just stock for now):\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nsingle reflectionProbe set to real-time, individual-faces\n\u003C/li\u003E\n\u003Cli\u003E\ncullMask set on Vessel.SituationChanged event\n\u003Cul\u003E\u003Cli\u003E\nIf on planet,\u00A0in air, or altitude \u0026lt; 10km, set to LocalScenery, Water, EVA\n\u003C/li\u003E\n\u003Cli\u003E\nIf in space, set to ScaledSpace, Atmosphere, EVA\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nclearFlags set to skybox\n\u003C/li\u003E\n\u003Cli\u003E\nskybox set to renderTexture and updated only once per Vessel.SituationChanged event\n\u003Cul\u003E\u003Cli\u003E\nIf on planet, set to SkySphere, ScaledSpace, Atmosphere\n\u003C/li\u003E\n\u003Cli\u003E\nIf in space, set to SkySphere\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-20T01:08:29Z\u0022 title=\u002210/20/2018 01:08  AM\u0022 data-short=\u00225 yr\u0022\u003EOctober 20, 2018\u003C/time\u003E by Electrocutor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T01:25:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471597\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539996461\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n34 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m not finished yet, but testing so far seems pretty good on this (just stock for now):\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAhh, I see what you are doing there \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EMight just appropriate some of it for myself.\u00A0 Never really thought of using the actual Unity skybox as one of my renderTexture targets.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EIf I\u0027m reading between the lines correctly, you are rendering the \u0027doesn\u0027t change very often\u0027 layers into a cubemap(render-texture), and pushing that into RenderSettings.Skybox ?\u00A0 (or camera.skybox?)\u00A0 From there, the probe only captures the local geometry (by culling mask) \u002B pre-rendered skybox behind it all.\u00A0 I like where you are going with it (if I\u0027m correct in at least some of that).\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-20T01:29:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471622\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539998711\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAhh, I see what you are doing there \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EMight just appropriate some of it for myself.\u00A0 Never really thought of using the actual Unity skybox as one of my renderTexture targets.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EIf I\u0027m reading between the lines correctly, you are rendering the \u0027doesn\u0027t change very often\u0027 layers into a cubemap(render-texture), and pushing that into RenderSettings.Skybox ?\u00A0 (or camera.skybox?)\u00A0 From there, the probe only captures the local geometry (by culling mask) \u002B pre-rendered skybox behind it all.\u00A0 I like where you are going with it (if I\u0027m correct in at least some of that).\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou could actually use the existing ReflectionProbe, just during 1 frame you set the cull mask to your static skybox settings, force-render, then set it to what it should be. I haven\u0027t tested this yet to make sure it doesn\u0027t cause a flash though.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T01:47:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471624\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539998988\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou could actually use the existing ReflectionProbe,\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOr a second probe, specifically for updating of the skyboxes?\u00A0 Could leave it set up full-time, and only enable it for the one frame to force-render.\u00A0 Hmm.. I see what you are saying with the flicker though... (wait... I think there is an .Influence property on the probe itself that you might be able to set to zero so that it doesn\u0027t get used in active reflections)\n\u003C/p\u003E\n\u003Cp\u003E\nUsing a probe though would be perhaps less efficient, as it will still do convolution on the image (blurring mip-maps), and we really only care about mip0 for the skybox texture.\u00A0 But, at the same time, I noticed that the reflection probes \u0027renderToCubeMap\u0027 routines are far more efficient than calling the same function from c# script -- might still be a net gain...\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T02:10:28Z","Content":"\n\u003Cp\u003E\nWell, underwater fogging works... yes, that is a pair of MOLE tracks being used for water propulsion...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022nT5nbZ4.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/nT5nbZ4.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHaven\u0027t been able to figure out where the stock shaders/rendering does its \u0027ambient light boost\u0027; looks like it may be a Unity built-in that only works with legacy shaders, as the functions are not present in the stock shader code that I can find.\u00A0 Still investigating...\u00A0 probably won\u0027t spend too much time on it though, as I think the concept is flawed (if you really want the scene to be brighter... turn up the brightness/gamma on your monitor), and the implementation may not even have hooks that I can use.\u00A0 (if someone has info on this, please let me know)\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-20T03:02:31Z","Content":"\n\u003Cp\u003E\nI really wish I knew why my \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E is acting differently from yours. This is with cullingMask set to 9 and 10.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022DP3bdHL.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022654\u0022 src=\u0022https://i.imgur.com/DP3bdHL.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mad Rocket Scientist","CreatedById":139256,"CreatedDateTime":"2018-10-20T03:18:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471506\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539987118\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhile I\u0027ve been working on updating the shaders and adding features, I\u0027ve also been deliberating on adding some post-processing effects to TU (or as another small mod).\u00A0 Essentially some parts of what KS3P does.... but functional with OpenGL and DX11 (as the KS3P author has expressed no desire to make it functional on either platform last I checked), and with a much simpler to set up and use config system (as well as an in-game GUI for real-time tweaking and generation of configs).\n\u003C/p\u003E\n\u003Cp\u003E\nIs there anyone else who would be interested in Bloom, Motion Blur, Depth-of-Field and Screen-Space Ambient Occlusion effects?\u00A0 I\u0027m not personally interested in tone-mapping, eye-adaption, or vignette.... though might consider implementing them as well (esp. if I just do as KS3P did and import the entire PP stack).\n\u003C/p\u003E\n\u003Cp\u003E\nFairly certain that I\u0027m going to be doing this for myself, either way, but if there is enough interest in the features I will consider including it in TU or spinning it off as a new stand-alone mod.\u00A0 Would really rather not\u00A0 make a new stand-alone, as KS3P is already there for filling that need, but it is an option.\u00A0 I\u0027d also be willing to contribute the work back into KS3P if the author was receptive to it... but first he would have to completely redo his config system (which is one of the major reasons I won\u0027t use it as-is).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn game tweaking would fix my largest complaint with KS3P. I tried using the unity testing setup described by the author, but it looked different from KSP to me. I\u0027d be happy to give up on eye-adaption and vignette too (I think they look bad unless\u00A0\u003Cem\u003Ebarely\u003C/em\u003E\u00A0noticeable). Bloom and SSAO give the most bang-for-buck, I think.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T03:35:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471673\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540004551\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n29 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI really wish I knew why my \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E is acting differently from yours. This is with cullingMask set to 9 and 10.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSec... checking the near/far clips I have for those layers, as I use different vals for each pass that I kind of trial-and-errored to get (actually built the GUI to adjust them from in-game).\n\u003C/p\u003E\n\u003Cp\u003E\nStrange - I\u0027m using essentially \u0027float.max\u0027 for far clip when rendering those layers --\n\u003C/p\u003E\n\u003Cp\u003E\nnear = 1.0f\n\u003C/p\u003E\n\u003Cp\u003E\nfar = 3.0e7f\n\u003C/p\u003E\n\u003Cp\u003E\nI think I probably grabbed those values from KSPs cameras...\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-20T05:26:38Z","Content":"\n\u003Cp\u003E\nThe skybox thing has me a bit stuck: there are no cubemap shaders to use as a material for the skybox so far as I know, and you cannot just directly assign a cubemap to the skybox.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T14:18:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471719\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540013198\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe skybox thing has me a bit stuck: there are no cubemap shaders to use as a material for the skybox so far as I know, and you cannot just directly assign a cubemap to the skybox.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmm...There should be the 6-sided (separate image) cubemap shader, as that is used by KSP.. of course that would require splitting your cubemap render-texture into 6 separate textures.\n\u003C/p\u003E\n\u003Cp\u003E\n^^ is why I included the SSTU/Skybox/Cubed shader in TU;\u00A0 KSP did not build with the Unity equivalent, so I had to create and import my own.\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-20T15:51:21Z","Content":"\n\u003Cp\u003E\nThis yields a skybox that is all sorts of messed up, and the camera seems to completely ignore the cullingMask. Any ideas?\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003Eprivate void SetSkybox()\n        {\n            Material oMaterial;\n            RenderTexture oTex;\n            Shader[] aryShaders = Resources.FindObjectsOfTypeAll\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Shader\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n\n            foreach (Shader oShader in aryShaders)\n            {\n                if (oShader.name == \u0022Hidden/CubeCopy\u0022)\n                {\n                    oMaterial = new Material(oShader);\n\n                    oTex = new RenderTexture(1024, 1024, 1024);\n                    oTex.dimension = UnityEngine.Rendering.TextureDimension.Cube;\n\n                    oMaterial.mainTexture = oTex;\n\n                    _Skybox = oMaterial;\n                }\n            }\n        }\n\n        private void UpdateSkybox(Vessel oVessel, Vessel.Situations oSituation)\n        {\n            GameObject oObject = new GameObject(\u0022SkyBoxCam\u0022);\n\n            oObject.transform.position = oVessel.gameObject.transform.position;\n            \n            Camera oCamera = oObject.AddComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Camera\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n            oCamera.enabled = false;\n\n            List\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;KSPLayer\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E oLayers = new List\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;KSPLayer\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n\n            if (oSituation == Vessel.Situations.PRELAUNCH\n                || oSituation == Vessel.Situations.LANDED\n                || oSituation == Vessel.Situations.SPLASHED\n                || oSituation == Vessel.Situations.FLYING\n                || oVessel.altitude \u0026lt; 10000)\n            { oLayers.Add(KSPLayer.Atmosphere); }\n            else\n            { oLayers.Add(KSPLayer.SkySphere); }\n\n            oCamera.useOcclusionCulling = true;\n            oCamera.cullingMask = GetCullingMask(oLayers);\n\n            oCamera.RenderToCubemap((RenderTexture)_Skybox.mainTexture);\n\n            RenderSettings.skybox = _Skybox;\n        }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve also wondered why Squad was so adamant about removing all the built-in Unity features and assets; never made any sense to me.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat does the SSTU skybox shader render?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-20T15:57:23Z\u0022 title=\u002210/20/2018 03:57  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 20, 2018\u003C/time\u003E by Electrocutor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T16:34:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471936\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540050681\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n30 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAny ideas?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat shader (Hidden/CubeCopy) does... strange things; I couldn\u0027t get it working properly either.\u00A0 The culling mask bit doesn\u0027t make sense though, as that should be handled by Unity before the geometry is ever sent to the render pipeline (unless the shader has something regarding ignoring culling masks? idk if thats even a thing).\u00A0\u00A0 Really that shader is for only copying of one cubemap input to another cubemap output, while sampling of a specific mip-map.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EShader \u0022Hidden/CubeCopy\u0022 {\n\tProperties {\n\t\t_MainTex (\u0022Main\u0022, CUBE) = \u0022\u0022 {}\n\t\t_Level (\u0022Level\u0022, Float) = 0.\n\t}\n\tCGINCLUDE\n\t#pragma vertex vert\n\t#pragma fragment frag\n\t\t\t\n\t#include \u0022UnityCG.cginc\u0022\n\n\tfloat _Level;\n\n\tstruct v2f {\n\t\tfloat4 pos : SV_POSITION;\n\t\tfloat4 uvw : TEXCOORD0;\n\t};\n\n\tv2f vert(appdata_base v)\n\t{\n\t\tv2f o;\n\t\to.pos = UnityObjectToClipPos(v.vertex);\n\t\to.uvw = v.texcoord;\n\t\treturn o;\n\t}\n\n\tUNITY_DECLARE_TEXCUBE(_MainTex);\n\n\tfloat4 frag(v2f  i) : SV_Target\n\t{\n\t\treturn UNITY_SAMPLE_TEXCUBE_LOD(_MainTex, i.uvw.xyz, _Level);\n\t}\n\tENDCG\n\tSubShader {\n\t\tTags { \u0022RenderType\u0022=\u0022Opaque\u0022 }\n\t\tLOD 200\n\t\tPass {\n\t\t\tZTest Always\n\t\t\tBlend Off\n\t\t\tAlphaTest off\n\t\t\tCull Off\n\t\t\tZWrite Off\n\t\t\tFog { Mode off }\n\t\t\tCGPROGRAM\n\t\t\t#pragma target 3.0\n\t\t\tENDCG\n\t\t}\n\t}\n\tSubShader {\n\t\tTags { \u0022RenderType\u0022=\u0022Opaque\u0022 }\n\t\tLOD 200\n\t\tPass {\n\t\t\tZTest Always\n\t\t\tBlend Off\n\t\t\tAlphaTest off\n\t\t\tCull Off\n\t\t\tZWrite Off\n\t\t\tFog { Mode off }\n\t\t\tCGPROGRAM\n\t\t\t#pragma target 2.0\n\t\t\tENDCG\n\t\t}\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere is what SSTU\u0027s skybox shader code is (mostly copied from Unity Skybox/Cubemap shader, with some modifications/simplifications)\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EShader \u0022SSTU/Skybox/Cubemap\u0022 {\nProperties {\n\t[NoScaleOffset] _Tex (\u0022Cubemap\u0022, Cube) = \u0022grey\u0022 {}\n}\n\nSubShader {\n\tTags { \u0022Queue\u0022=\u0022Background\u0022 \u0022RenderType\u0022=\u0022Background\u0022 \u0022PreviewType\u0022=\u0022Skybox\u0022 }\n\tCull Front ZWrite Off\n\n\tPass {\n\t\t\n\t\tCGPROGRAM\n\t\t#pragma vertex vert\n\t\t#pragma fragment frag\n\t\t#pragma target 2.0\n\n\t\t#include \u0022UnityCG.cginc\u0022\n\n\t\tsamplerCUBE _Tex;\n\t\t\n\t\tstruct appdata_t {\n\t\t\tfloat4 vertex : POSITION;\n\t\t};\n\n\t\tstruct v2f {\n\t\t\tfloat4 vertex : SV_POSITION;\n\t\t\tfloat3 texcoord : TEXCOORD0;\n\t\t};\n\n\t\tv2f vert (appdata_t v)\n\t\t{\n\t\t\tv2f o;\n\t\t\to.vertex = UnityObjectToClipPos(v.vertex);\n\t\t\to.texcoord = v.vertex.xyz;\n\t\t\treturn o;\n\t\t}\n\n\t\tfixed4 frag (v2f i) : SV_Target\n\t\t{\n\t\t\thalf4 c = texCUBE (_Tex, i.texcoord);\n\t\t\treturn half4(c.rgb, 1);\n\t\t}\n\t\tENDCG \n\t}\n} \t\n\n\nFallback Off\n\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIt literally just reads the cubemap, and renders that pixel with zero additional processing.\u00A0 No lighting, no mip-maps (I think?),\u00A0 about as simple as it can get.\u00A0 Granted, I\u0027m not really an expert on straight HLSL style shaders (vert/frag setup), so I could be off on some of this.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you want, I can pack up an asset bundle for you with just that shader in it, or you are otherwise free to use that shaders\u0027 source from the TU repository (with/without modifications) if you want to compile your own.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T16:45:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471936\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540050681\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n52 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve also wondered why Squad was so adamant about removing all the built-in Unity features and assets; never made any sense to me.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIts the default behavior of Unity to not include unused assets in the builds.\u00A0 Its actually quite a PITA to force it to include something that isn\u0027t used in any of the scenes or assets that are built; it can be done, but has to be done on a per-asset basis -- in the instance of like the Unity Standard shader, they would need to include a material for every keyword combination they wished to make available in-game.\u00A0 Easier for them to \u003Cem\u003Enot\u003C/em\u003E do any of that extra work.\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-20T16:46:08Z","Content":"\n\u003Cp\u003E\nI used the SSTU skybox shader as well as a test: the output texture is identical to using CubeCopy: there has to be something seriously wrong with the camera.\n\u003C/p\u003E\n\u003Cp\u003E\nOne thing I noticed is that if you create a camera of any kind, it seems that the game automatically sets it as the main game camera unless it\u0027s disabled.\n\u003C/p\u003E\n\u003Cp\u003E\nThe trouble I am having right now is that reflection probe culling seems to work fine, but camera culling doesn\u0027t: it will always include layer 0, no matter what you set it to.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471970\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540053931\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIts the default behavior of Unity to not include unused assets in the builds.\u00A0 Its actually quite a PITA to force it to include something that isn\u0027t used in any of the scenes or assets that are built; it can be done, but has to be done on a per-asset basis -- in the instance of like the Unity Standard shader, they would need to include a material for every keyword combination they wished to make available in-game.\u00A0 Easier for them to \u003Cem\u003Enot\u003C/em\u003E do any of that extra work.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, Unity added a checkbox to just include everything a while back.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T17:00:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471971\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540053968\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNo, Unity added a checkbox to just include everything a while back.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, if you want \u003Cem\u003Eeverything\u003C/em\u003E.\u00A0 Including a ton of stuff that would be of zero use in KSP.\u00A0 .... I really shouldn\u0027t be trying to defend them... I think they should have included a lot more of the standard assets as well.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471971\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540053968\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe trouble I am having right now is that reflection probe culling seems to work fine, but camera culling doesn\u0027t: it will always include layer 0, no matter what you set it to.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat doesn\u0027t seem right... they work fine when TU uses a camera to render with layer-masks.\u00A0\u00A0 How specifically are you setting the masks to the camera?\u00A0 Could be a bit-masking issue where the bit for layer zero is still flipped.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/shadowmage45/TexturesUnlimited/blob/master/Plugin/SSTUTools/KSPShaderTools/Addon/ReflectionManager.cs#L415\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/shadowmage45/TexturesUnlimited/blob/master/Plugin/SSTUTools/KSPShaderTools/Addon/ReflectionManager.cs#L415\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n^^ is what TU is using; but again, I\u0027m using manually bit-bashed values for the masks.\n\u003C/p\u003E\n\u003Cp\u003E\nTo ignore layer 0, make sure that bit 0 (the value for 1) is not flipped in your mask -- e.g. if you display the value it should be an even number.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nLoL, here soon you will end up with a functional equivalent of what TU has had to do for the reflection stuff.\u00A0 I tried, and tried... and tried more... to keep it simple... but it was just one ridiculous hurdle after another to get even the basics working.\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-20T17:05:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471982\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540054832\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLoL, here soon you will end up with a functional equivalent of what TU has had to do for the reflection stuff.\u00A0 I tried, and tried... and tried more... to keep it simple... but it was just one ridiculous hurdle after another to get even the basics working.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHonestly, I mostly wanted to figure this out for the galaxy map when your ship is space, but it\u0027s not a big deal.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere is all the code for stock:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003Eusing System;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.SceneManagement;\n\nnamespace UnofficialPatch\n{\n    public class FixReflections\n    {\n        private EventData\u0026lt;GameEvents.HostedFromToAction\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Vessel\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E, \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003EVessel\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003ESituations\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\u0026gt;.OnEvent VesselSituationChangedEvent;\n\n        public void Start()\n        {\n            this.VesselSituationChangedEvent = new EventData\u0026lt;GameEvents.HostedFromToAction\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Vessel\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E, \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003EVessel\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003ESituations\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\u0026gt;.OnEvent(VesselSituationChangedEventHandler);\n            GameEvents.onVesselSituationChange.Add(this.VesselSituationChangedEvent);\n        }\n\n        private void VesselSituationChangedEventHandler(GameEvents.HostedFromToAction\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Vessel\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E, \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003EVessel\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003ESituations\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E oSituation)\n        {\n            if (oSituation.host == null)\n            { return; }\n\n            UpdateProbe(oSituation.host, oSituation.to);\n        }\n\n        private void UpdateProbe(Vessel oVessel, Vessel.Situations oSituation)\n        {\n            ReflectionProbe oProbe = null;\n            List\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;KSPLayer\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E oLayers = new List\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;KSPLayer\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n\n            oProbe = oVessel.gameObject.GetComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ReflectionProbe\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n\n            if (oProbe == null)\n            {\n                oProbe = oVessel.gameObject.AddComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ReflectionProbe\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n\n                oProbe.mode = UnityEngine.Rendering.ReflectionProbeMode.Realtime;\n                oProbe.refreshMode = UnityEngine.Rendering.ReflectionProbeRefreshMode.EveryFrame;\n                oProbe.timeSlicingMode = UnityEngine.Rendering.ReflectionProbeTimeSlicingMode.IndividualFaces;\n                oProbe.nearClipPlane = 0.1f;\n                //oProbe.farClipPlane = 5000f;\n                oProbe.farClipPlane = float.MaxValue / 1.2f;\n\n                Debug.Log(\u0022[UnofficialPatch] Created ReflectionProbe on \u0027\u0022 \u002B oVessel.name \u002B \u0022\u0027.\u0022);\n            }\n\n            if (oSituation == Vessel.Situations.PRELAUNCH\n                || oSituation == Vessel.Situations.LANDED\n                || oSituation == Vessel.Situations.SPLASHED\n                || oSituation == Vessel.Situations.FLYING\n                || oVessel.altitude \u0026lt; 10000)\n            {\n                oLayers.Add(KSPLayer.LocalScenery);\n                oLayers.Add(KSPLayer.Water);\n\n                oProbe.clearFlags = UnityEngine.Rendering.ReflectionProbeClearFlags.Skybox;\n            }\n            else\n            {\n                oLayers.Add(KSPLayer.Atmosphere);\n                oLayers.Add(KSPLayer.ScaledScenery);\n\n                oProbe.clearFlags = UnityEngine.Rendering.ReflectionProbeClearFlags.SolidColor;\n                oProbe.backgroundColor = Color.black;\n            }\n\n            oProbe.cullingMask = GetCullingMask(oLayers);\n        }\n\n        public static int GetCullingMask(List\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;KSPLayer\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E oLayers)\n        {\n            int iCullingMask = 0;\n\n            foreach (KSPLayer oLayer in oLayers)\n            { iCullingMask = (iCullingMask | (1 \u0026lt;\u0026lt; (int)oLayer)); }\n\n            return iCullingMask;\n        }\n\n        public enum KSPLayer\n        {\n            Default = 0,\n            TransparentFX = 1,\n            IgnoreRaycast = 2,\n\n            Water = 4,\n            UI = 5,\n\n\n            PartsList_Icons = 8,\n            Atmosphere = 9,\n            ScaledScenery = 10,\n            UI_Dialog = 11,\n            UI_Vectors = 12,\n            UI_Mask = 13,\n            Screens = 14,\n            LocalScenery = 15,\n            Unknown = 16,\n            EVA = 17,\n            SkySphere = 18,\n            PhysicalObjects = 19,\n            InternalSpace = 20,\n            PartTriggers = 21,\n            KerbalInstructors = 22,\n            AeroFxIgnore = 23,\n            MapFX = 24,\n            UI_Additional = 25,\n            WheelCollidersIgnore = 26,\n            WheelColliders = 27,\n            TerrainColliders = 28,\n            DragRender = 29,\n            SurfaceFx = 30,\n            Vectors = 31\n        }\n    }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nIt works just fine as long as you don\u0027t have scatterer installed. Having a tiny whiff of cloud show up from Eve and the galaxy when in space isn\u0027t a huge thing: would just be nice if I could figure out why my camera is showing things it shouldn\u0027t.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T17:14:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223471985\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540055134\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\uFEFF\u003C/span\u003E could figure out why my camera is showing things it shouldn\u0027t. \u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0 Are you talking about a camera you have added, or one for a reflection probe?\u00A0 (I\u0027m only seeing the probe in the code sample you posted)\u00A0 (really though, it shouldn\u0027t make a difference, they should both respect culling masks)\n\u003C/p\u003E\n\u003Cp\u003E\nEdit, to eliminate possible errors in your layer-masking function, try feeding it a manually specified mask.\u00A0 Something like\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E~1\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nWhich should be all layers \u003Cem\u003Eexcept\u003C/em\u003E layer zero.\u00A0 Or try setting it to zero, which should disable -all- layers.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-20T17:21:05Z\u0022 title=\u002210/20/2018 05:21  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 20, 2018\u003C/time\u003E by Shadowmage\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-20T18:17:52Z","Content":"\n\u003Cp\u003E\nI setup a test to actually take a screenshot of the camera render: it is in fact correct.\n\u003C/p\u003E\n\u003Cp\u003E\nHammered away at some other things, and came to this: the problem is coming from here:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eforeach (Shader oShader in aryShaders)\n            {\n                if (oShader.name == \u0022SSTU/Skybox/Cubemap\u0022)\n                {\n                    oMaterial = new Material(oShader);\n                    RenderSettings.skybox = oMaterial;\n                    break;\n                }\n            }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIt doesn\u0027t matter what I set the oMaterial.SetTexture(\u0022_Tex\u0022 to, the resulting skybox will always be a montage of ReflectionProbe data instead of the Cube that I set it to. It\u0027s like the skybox is being overriden by the reflectionProbe camera textures.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere is the unity skybox shader:\u003Cbr\u003E\u003Ca href=\u0022https://github.com/TwoTailsGames/Unity-Built-in-Shaders/blob/master/DefaultResourcesExtra/Skybox.shader\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/TwoTailsGames/Unity-Built-in-Shaders/blob/master/DefaultResourcesExtra/Skybox.shader\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n[Edit]\u003Cbr\u003E\nI\u0027m calling it quits on this for now: way too much time and not getting anywhere. The root of the problem seems to be that using a skybox in KSP just flat-out doesn\u0027t work. No matter what material you set the skybox to, it always gets reset to some some reflectionprobe.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-20T19:54:40Z\u0022 title=\u002210/20/2018 07:54  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 20, 2018\u003C/time\u003E by Electrocutor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-20T20:25:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223472010\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540059472\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m calling it quits on this for now: way too much time and not getting anywhere. The root of the problem seems to be that using a skybox in KSP just flat-out doesn\u0027t work. No matter what material you set the skybox to, it always gets reset to some some reflectionprobe.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSorry to hear that, but understandable.\u00A0 Often its good to take a break and let your mind crunch on it.\n\u003C/p\u003E\n\u003Cp\u003E\nThere is probably a reason why I\u0027m not currently using the skybox; I did experiment with it in the beginning, and ended up going a different route for some reason.\u00A0 Could very well be I ran into something similar to what you are encountering.\u00A0 To me it almost looked like the render-probe was re-using -my- RenderTexture as one of its blit targets;\u00A0 perhaps there is some Unity method to make a render-texture \u0027uniquely owned\u0027 or persistent or somesuch?\u00A0 I never felt like spending too much time investigating it either, as it was hard to determine if it was a quirk in KSP or something in Unity that was misconfigured.\n\u003C/p\u003E\n\u003Cp\u003E\nThe solution that I used was to \u0027build your own\u0027 skybox -- the skybox-sphere.\u00A0 Use the built-in unity methods to spawn a sphere, make sure to remove the collider with destroyImmediate \u003Cspan\u003E\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/span\u003E, assign it your material with your skybox shader and cubemap, and let the reflection probe capture that as the skybox.\u00A0 Size the sphere such that it is at the extents of the reflection probe cameras far-clip, OR set its material render queue to geometry-1 and adjust your shader to disable z-writes.\u00A0 The sphere gets stuck in a layer not captured by KSP cameras (I think I used wheelColliderIgnore/27), and the render probe is set to capture that layer (as well as anything else you need it to cap).\n\u003C/p\u003E\n"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2018-10-20T23:19:57Z","Content":"\n\u003Cp\u003E\n\u00A0not sure if this is a TU issue:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/CobaltWolf/Bluedog-Design-Bureau/issues/477\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/CobaltWolf/Bluedog-Design-Bureau/issues/477\u003C/a\u003E\n\u003C/p\u003E\n"}]}