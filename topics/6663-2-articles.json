{"TopicId":6663,"ForumId":25,"TopicTitle":"Mini-challenge: max altitude with this supplied spacecraft","CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-14T18:26:41Z","PageNum":2,"Articles":[{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T06:43:47Z","Content":"\n\u003Cp\u003EWell, as long as someone is consistent with how they go about calculating things, the same graph will result.\u003C/p\u003E\n"},{"CreatedByName":"PakledHostage","CreatedById":8059,"CreatedDateTime":"2012-02-16T17:39:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022closette\u0022 data-cite=\u0022closette\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI think PakledHostage is using the conventional/terrestrial definition of c\u003Csub\u003ED\u003C/sub\u003EA which is basically 2*F\u003Csub\u003ED\u003C/sub\u003E/ (density x v\u003Csup\u003E2\u003C/sup\u003E), so includes KSP\\\u0027s mass term. But I could be wrong...anyway your numbers check out with mine. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\\\u0027m using the drag coefficient values that are given in the game\\\u0027s VAB. I assumed that they were drag areas (C\u003Csub\u003Ed\u003C/sub\u003EA), in which case the equation for drag would be:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/5lvVO.png\u0022 alt=\u00225lvVO.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI understood that, in the game\\\u0027s simple physics model, the total drag of the spacecraft is just the sum of the individual drag coefficients. Based on that understanding, I used a value of 1.1 for the spacecraft configuration shown in my post above. \u003C/p\u003E\u003Cp\u003EIn the aircraft world, C\u003Csub\u003Ed\u003C/sub\u003E is dimensionless and drag area (C\u003Csub\u003Ed\u003C/sub\u003EA) has units of area. The units of F\u003Csub\u003Ed\u003C/sub\u003E in the equation above are force. I was not aware that there are other forms of the aerodynamic drag equation. \u003C/p\u003E\u003Cp\u003EI will have a look at the other threads listed above. I\\\u0027ve been away from the KSP forums for a month or so. I may have missed those other discussions.\u003C/p\u003E\u003Cp\u003EIn the mean time, I ran another test with a different configuration and got different results. Something is obviously wrong with my drag model (or with my interpretation of the drag coefficients given in the game).\u003C/p\u003E\u003Cp\u003EPH.\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T18:08:33Z","Content":"\n\u003Cp\u003EMy interpretation of the drag equation for KSP is that mass = area. It makes perfect sense for me, since empty tanks fall at the same rate as full ones in an atmosphere.\u003C/p\u003E\n"},{"CreatedByName":"foamyesque","CreatedById":2982,"CreatedDateTime":"2012-02-16T18:10:28Z","Content":"\n\u003Cp\u003EDrag scales with mass. Yes, it makes no sense that an empty LFT has an eighth of the drag of a full one, but it\\\u0027s still true.\u003C/p\u003E\n"},{"CreatedByName":"yaang","CreatedById":16805,"CreatedDateTime":"2012-02-16T18:36:59Z","Content":"\n\u003Cp\u003EWhat is TWR ?\u003C/p\u003E\n"},{"CreatedByName":"Kryten","CreatedById":348,"CreatedDateTime":"2012-02-16T18:55:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022yaang\u0022 data-cite=\u0022yaang\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EWhat is TWR ?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThrust-to-weight ratio.\u003C/p\u003E\n"},{"CreatedByName":"DonLorenzo","CreatedById":13642,"CreatedDateTime":"2012-02-16T18:58:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022yaang\u0022 data-cite=\u0022yaang\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EWhat is TWR ?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThrust-to-weight ratio\u003C/p\u003E\n"},{"CreatedByName":"yaang","CreatedById":16805,"CreatedDateTime":"2012-02-16T19:11:28Z","Content":"\n\u003Cp\u003Ehmm but then wouldn\\\u0027t you have to give less thrust as the time increases, since the weight of the ship is getting lower, but the graph of kosmo suggests he\\\u0027s increasing thrust. Which makes more sense obviously. What am i missing here ?\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T19:57:05Z","Content":"\n\u003Cp\u003EI made some changes to my spreadsheet, and have a ascent profile very close to optimal. Here are some graphs for you guys. Max altitude in that graph is 34,577. Of course, with history dependent data, it doesn\\\u0027t perfectly match real KSP conditions.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://img96.imageshack.us/img96/4294/goddard2.png\u0022 alt=\u0022goddard2.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://img12.imageshack.us/img12/2240/goddard1.png\u0022 alt=\u0022goddard1.png\u0022\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo... anyone want to fly this profile and report back?\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-16T20:53:38Z","Content":"\n\u003Cp\u003EAn amazing piece of work!\u003C/p\u003E\u003Cp\u003E2 comments for now: \u003C/p\u003E\u003Cp\u003E- Could you please explain the formula for and units for \u0027efficiency\u0027 in the spreadsheet\u003C/p\u003E\u003Cp\u003E- if you calculate a new column = 2\u002B2*accel/g, you\\\u0027ll see that with the exception of launch acceleration, it closely tracks your TWR column, so indeed your are optimizing instantaneous efficiency for most of the flight, as expected.\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T21:07:57Z","Content":"\n\u003Cp\u003EThe efficiency column I was only messing with. I don\\\u0027t know if that formula is a useful measure of efficiency. The only thing I\\\u0027m optimizing on that spreadsheet is matching drag force to gravitational force. As you can see, it still needs a tiny bit more work. After that is done, then it\\\u0027s time to move onto the 2 dimensional ascent trajectory.\u003C/p\u003E\n"},{"CreatedByName":"Ydoow","CreatedById":10165,"CreatedDateTime":"2012-02-16T21:24:51Z","Content":"\n\u003Cp\u003EWhy did it take me so long to understand those graphs \u0026gt;_\u0026lt;\u003C/p\u003E\u003Cp\u003EI\\\u0027ll give it a shot hopefully later today.\u003C/p\u003E\u003Cp\u003EWhat does FD stand for?\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T21:27:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ydoow\u0022 data-cite=\u0022Ydoow\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EWhat does FD stand for?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\\\u0027s F\u003Csub\u003ED\u003C/sub\u003E, the drag force. F\u003Csub\u003ED\u003C/sub\u003E and F\u003Csub\u003Eg\u003C/sub\u003E are on there so you can see how closely I\\\u0027ve gotten them to match.\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-16T21:28:32Z","Content":"\n\u003Cp\u003EI suggest that fuel efficiency be measured in km/unit mass (unit mass = 1 command pod, taken as 1kg if you like).\u003C/p\u003E\u003Cp\u003Eoverall efficiency = {total distance traveled over some defined path} / {total fuel spent}\u003C/p\u003E\u003Cp\u003Einstantaneous efficiency = speed/(mass loss rate) = v/m-dot = v/Thrust x v\u003Csub\u003Ee\u003C/sub\u003E where v\u003Csub\u003Ee\u003C/sub\u003E is the effective exhaust speed of the engine (= specific impulse, 5692 m/s for a liquid fuel engine).\u003C/p\u003E\n"},{"CreatedByName":"Ydoow","CreatedById":10165,"CreatedDateTime":"2012-02-16T21:29:45Z","Content":"\n\u003Cp\u003EAh, okay. And Fg?\u003C/p\u003E\u003Cp\u003EI thought Force of gravity, but that doesn\\\u0027t seem to look right; I don\\\u0027t see why it would change to a linear plotting.\u003C/p\u003E\u003Cp\u003EAlso \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Egrad\u003C/span\u003E drag force doesn\\\u0027t look right either. Why the drop off around 17km? I thought the first atmosphere layer was around 13km\u003C/p\u003E\u003Cp\u003EEdit: Ah, okay. I see that fuel runs out around 17km and so your craft is slowing down. I haven\\\u0027t tried this challenge yet, so I was unaware\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T21:32:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ydoow\u0022 data-cite=\u0022Ydoow\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAh, okay. And Fg?\u003C/p\u003E\u003Cp\u003EI thought Force of gravity, but that doesn\\\u0027t seem to look right.\u003C/p\u003E\u003Cp\u003EAlso \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Egrad\u003C/span\u003E drag force doesn\\\u0027t look right either. Why the drop off around 17km? I thought the first atmosphere layer was around 13km\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EF\u003Csub\u003Eg\u003C/sub\u003E is the weight of the rocket. F\u003Csub\u003ED\u003C/sub\u003E drops off rapidly after 16km because the rocket has run out of fuel.\u003C/p\u003E\u003Cp\u003E@ closette\u003C/p\u003E\u003Cp\u003EI\\\u0027ll fiddle around with defining the efficiencies later today.\u003C/p\u003E\n"},{"CreatedByName":"jebbe","CreatedById":16329,"CreatedDateTime":"2012-02-16T21:37:03Z","Content":"\n\u003Cp\u003EThat excel sheet is a great piece of work! What I don\\\u0027t understand yet is why you would want to set the drag equal to gravity - is there any apparent reason for that? It seems to work, but I can\\\u0027t really see why.\u003C/p\u003E\u003Cp\u003EI\\\u0027ve been trying to write a little program that optimizes the throttle setting by solving the ODE for a given thrust curve and then inverting for it. Unfortunately, I\\\u0027m not that good with inverse methods, and my Monte Carlo approach has failed miserably - never got above 30km, and that\\\u0027s clearly not optimal. I\\\u0027ll keep working on it though.\u003C/p\u003E\n"},{"CreatedByName":"Ydoow","CreatedById":10165,"CreatedDateTime":"2012-02-16T21:39:14Z","Content":"\n\u003Cp\u003EGot it. You posted this moments before I updated my post \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo why doesn\\\u0027t the graph reflect the change in atmosphere at 13km? Is it not that significant? Or does the drag linearly degrade across the whole flight?\u003C/p\u003E\u003Cp\u003EI\\\u0027ve always assumed the drag would degrade exponentially since it\\\u0027s held by gravity. That\\\u0027s just been my assumption, I\\\u0027ve never looked that up or anything\u003C/p\u003E\u003Cp\u003EEdit: Waaaaait it does curve doesn\\\u0027t it. Veeeeerrry slightly\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T21:39:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jebbe\u0022 data-cite=\u0022jebbe\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThat excel sheet is a great piece of work! What I don\\\u0027t understand yet is why you would want to set the drag equal to gravity - is there any apparent reason for that? It seems to work, but I can\\\u0027t really see why.\u003C/p\u003E\u003Cp\u003EI\\\u0027ve been trying to write a little program that optimizes the throttle setting by solving the PDE for a given thrust curve and then inverting for it. Unfortunately, I\\\u0027m not that good with inverse methods, and my Monte Carlo approach has failed miserably - never got above 30km, and that\\\u0027s clearly not optimal. I\\\u0027ll keep working on it though.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWatch this post here in a couple hours, and I will explain how I optimized my throttle settings. I have to go to my heat transfer class right now.\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-02-16T21:41:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ydoow\u0022 data-cite=\u0022Ydoow\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EGot it. You posted this moments before I updated my post \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo why doesn\\\u0027t the graph reflect the change in atmosphere at 13km? Is it not that significant? Or does the drag linearly degrade across the whole flight?\u003C/p\u003E\u003Cp\u003EI\\\u0027ve always assumed the drag would degrade exponentially since it\\\u0027s held by gravity. That\\\u0027s just been my assumption, I\\\u0027ve never looked that up or anything\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt does change exponentially. That\\\u0027s not a straight line you\\\u0027re looking at.\u003C/p\u003E\n"},{"CreatedByName":"Ydoow","CreatedById":10165,"CreatedDateTime":"2012-02-16T21:42:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kosmo-not\u0022 data-cite=\u0022Kosmo-not\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIt does change exponentially. That\\\u0027s not a straight line you\\\u0027re looking at.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyes, please excuse my lack of eyesight lol\u003C/p\u003E\n"},{"CreatedByName":"thosesneakyfrench","CreatedById":8432,"CreatedDateTime":"2012-02-16T22:05:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kosmo-not\u0022 data-cite=\u0022Kosmo-not\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\\\u0027ve heard that the optimal velocity to be climbing at is one which the drag force equals the weight of the rocket.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat being the case, the velocity a rocket should follow for maximum efficiency is given by the attached equation. All that\\\u0027s missing is an equation describing mass as a function of time, which is different for every rocket. \u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-16T22:57:48Z","Content":"\n\u003Cp\u003E@jebbe and others, if I may fill in for Kosmo-not while he is in class:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EThat excel sheet is a great piece of work! What I don\\\u0027t understand yet is why you would want to set the drag equal to gravity - is there any apparent reason for that? It seems to work, but I can\\\u0027t really see why.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESee the attached derivation (in PDF format). I got tired of trying to format the equations within the message board.\u003C/p\u003E\n"},{"CreatedByName":"closette","CreatedById":11773,"CreatedDateTime":"2012-02-16T23:20:09Z","Content":"\n\u003Cp\u003E@thosesneakyfrench,\u003C/p\u003E\u003Cp\u003EIn the Kerbal universe the mass cancels out in the equation for terminal velocity (which is the same as the TWR=2 velocity), since the drag force is proportional to mass, unlike the real world.\u003C/p\u003E\u003Cp\u003Ei.e.. for a single object,\u003Cem\u003E F\u003C/em\u003E\u003Csub\u003E\u003Cem\u003ED\u003C/em\u003E\u003C/sub\u003E = 1/2 x \u003Cem\u003Emaximum_drag x m x density x v\u003C/em\u003E\u003Csup\u003E2\u003C/sup\u003E as was verified in threads referenced above, \u003C/p\u003E\u003Cp\u003Eand of course the weight \u003Cem\u003E F\u003C/em\u003E\u003Csub\u003E\u003Cem\u003Eg\u003C/em\u003E\u003C/sub\u003E\u003Cem\u003E = mg\u003C/em\u003E\u003C/p\u003E\u003Cp\u003ESet these equal and you will find that \u003Cem\u003Ev\u003C/em\u003E\u003Csup\u003E2\u003C/sup\u003E = 2 \u003Cem\u003Emg\u003C/em\u003E / (\u003Cem\u003Em x density x maximum_drag\u003C/em\u003E) = 2 g / (\u003Cem\u003Edensity x maximum_drag\u003C/em\u003E). You can see how the mass \u003Cem\u003Em\u003C/em\u003E cancels out. For an assembled spacecraft replace the\u003Cem\u003E maximum_drag\u003C/em\u003E with a mass-weighted average of all the parts\\\u0027 \u003Cem\u003Emaximum_drag\u003C/em\u003E factors, which usually results in a value of 0.2-0.3.\u003C/p\u003E\u003Cp\u003EThis is also why an empty and a full SRB will fall together, unlike in reality. \u003C/p\u003E\u003Cp\u003EFor a rocket with \u003Cem\u003Emaximum_drag\u003C/em\u003E = 0.2, I find the terminal speed is well described by the equation v\u003Csub\u003ET\u003C/sub\u003E=97.8 m/s exp(\u002Bheight/9891m). The reason why the scale height is not 10000m is due to the small decrease in gravity at higher altitudes.\u003C/p\u003E\n"},{"CreatedByName":"PakledHostage","CreatedById":8059,"CreatedDateTime":"2012-02-16T23:50:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kosmo-not\u0022 data-cite=\u0022Kosmo-not\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EMy interpretation of the drag equation for KSP is that mass = area. It makes perfect sense for me, since empty tanks fall at the same rate as full ones in an atmosphere.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI had another look at the data from my second drop test after reading through the two threads that Closette quoted on page 2 of this thread. It seems that my data actually does agree with your equation and my data also supports your results. The difference can be explained in the relative magnitudes of the our differing C\u003Csub\u003Ed\u003C/sub\u003Es. Your C\u003Csub\u003Ed\u003C/sub\u003E = 0.2027 is about 18% of my C\u003Csub\u003Ed\u003C/sub\u003E = 1.1, while my \u0027density scaling parameter\u0027 of 0.0017 is about 17% of your 0.0098.\u003C/p\u003E\u003Cp\u003EAnd as to why my second test didn\\\u0027t agree with the predicted values, I think I also figured that out. On a hunch, I removed the C\u003Csub\u003Ed\u003C/sub\u003E term from the drag equation, leaving: \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/OOBl1.gif\u0022 alt=\u0022OOBl1.gif\u0022\u003E\u003C/p\u003E\u003Cp\u003EI then moved your C\u003Csub\u003Ed\u003C/sub\u003E value of 0.2027 into to the density equation by multiplying your \u0027density scaling parameter\u0027 of 0.0098 by 0.2027 to get 0.001986. The game\\\u0027s atmospheric density equation is then approximated as:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/xV8bq.gif\u0022 alt=\u0022xV8bq.gif\u0022\u003E\u003C/p\u003E\u003Cp\u003EUsing these two equations in my spreadsheet, I then compared the predicted altitudes and velocities for the two (very different) ship configurations with the measured values. Both tests showed very good correlation (apoapsis, for example, matched within about 20 m).\u003C/p\u003E\u003Cp\u003ESo, my conclusion is that the C\u003Csub\u003Ed\u003C/sub\u003E terms given in the VAB are not used in the game\\\u0027s drag equation. (At least not directly. I know that there is some variation depending on how the craft is oriented relative to the direction of travel, but I only tested cases where the spacecraft was kept oriented straigt up and down by the SAS). Instead, the drag equation seems to be solely a function of density, mass and velocity as given above.\u003C/p\u003E\u003Cp\u003ECan anyone independently verify this? Maybe we could do a drop test using a modified version of foamyesque\\\u0027s FAKOOM lander legs? I had a look to see if I could readily modify them, but it wasn\\\u0027t obvious to me how to do it.\u003C/p\u003E\u003Cp\u003EI\\\u0027ll update this post with my plots and data when I get a chance.\u003C/p\u003E\u003Cp\u003EPH.\u003C/p\u003E\u003Cp\u003EEdit: Added suggestion on how we could do further systematic testing.\u003C/p\u003E\n"}]}