{"TopicId":177565,"ForumId":29,"TopicTitle":"[SOLVED] UI_Toggle boolean flipping","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-08-14T21:22:40Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-08-14T21:22:40Z","Content":"\n\u003Cp\u003E\nCan someone else confirm that I haven\u0027t lost my mind...\n\u003C/p\u003E\n\u003Cp\u003E\nIn the partmodule declarations...\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E        [KSPField(guiName = \u0022myToggleButton\u0022, guiActiveEditor = true, guiActive = true, isPersistant = true),\n        UI_Toggle(controlEnabled = true, disabledText = \u0022Off\u0022, enabledText = \u0022On\u0022, invertButton = false, scene = UI_Scene.All)]\n        public bool myToggle = false;\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIn the FixedUpdate\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E            FASLog.Writelog(\u0022OnUpdate \u0022 \u002B myToggle);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe logged output\u00A0reads all False until I click the toggle and then... I get this\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate True\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate True\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate True\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate True\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate True\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate True\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate False\n8/14/2018 4:13:58 PM: OnUpdate True\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI have searched all of my code and those are the only two places where that variable appears.\u00A0 I have ripped out the declaration, changed the variable name and smashed a few chairs trying to figure out WHY it\u0027s doing this.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-08-15T13:27:23Z\u0022 title=\u002208/15/2018 01:27  PM\u0022 data-short=\u00225 yr\u0022\u003EAugust 15, 2018\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2018-08-14T21:34:51Z","Content":"\n\u003Cp\u003E\nMy first guess would be your craft has three parts, or a part has three of your modules.\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-08-14T21:37:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223433845\u0022 data-ipsquote-contentid=\u0022177565\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221534282491\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy first guess would be your craft has three parts, or a part has three of your modules.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nya know what....\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s time for me to go to the house.... I should have known that.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m getting too old to write code. I\u0027m forgetting more than I\u0022m learning.\u00A0 Thanks.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223433845\u0022 data-ipsquote-contentid=\u0022177565\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221534282491\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy first guess would be your craft has three parts, or a part has three of your modules.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell maybe you can\u00A0 tell me this which is got me off on that stupid wild goose chase.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E                BaseField field = Fields[nameof(myUIToggle)];\n                field.uiControlEditor.onFieldChanged = onGUIChange;\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThat works as intended in the Editor.\u00A0 It calls on GUIChange when the toggle is clicked.\u00A0 But it doesn\u0027t work in flight.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2018-08-14T23:24:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223433846\u0022 data-ipsquote-contentid=\u0022177565\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221534282629\u0022 data-ipsquote-userid=\u002278435\u0022 data-ipsquote-username=\u0022Fengist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n30 minutes ago, Fengist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBut it doesn\u0027t work in flight.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhich function contains\u00A0those lines? Maybe onFieldChanged is only being set in the editor.\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-08-15T00:47:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223433899\u0022 data-ipsquote-contentid=\u0022177565\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221534289045\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhich function contains\u00A0those lines? Maybe onFieldChanged is only being set in the editor.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s in the partmodule Start and it\u0027s before I check to see if it\u0027s editor or flight.\u00A0 I moved those lines around so they\u0027re only called in the editor or called in fight with no difference.\u00A0Supposedly, it\u0027s a callback to a function I named\u00A0onGUIChange.\u00A0 When the UI_Toggle is clicked it\u0027s supposed to call that function.\u00A0\u00A0I\u0027m trying to use the partmodule UI to open a main UI.\u00A0 In the editor, it performs the callback just fine. I click on the UI_Toggle and it calls the function.\u00A0 In flight... it does nothing. I\u0027ve tried debug logging and it never even gets to the function.\u00A0 I was trying to track down why or come up with a workaround when I went stupid with the booleans.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-08-15T00:50:57Z\u0022 title=\u002208/15/2018 12:50  AM\u0022 data-short=\u00225 yr\u0022\u003EAugust 15, 2018\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2018-08-15T02:04:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223433929\u0022 data-ipsquote-contentid=\u0022177565\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221534294050\u0022 data-ipsquote-userid=\u002278435\u0022 data-ipsquote-username=\u0022Fengist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Fengist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat\u0027s in the partmodule Start\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAdmittedly this is a long shot, but try OnStart instead. I\u0027m seeing conflicting explanations of the difference, but on the whole it sounds like OnStart is a bit safer / more consistent.\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-08-15T02:15:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223433946\u0022 data-ipsquote-contentid=\u0022177565\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221534298693\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 minutes ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAdmittedly this is a long shot, but try OnStart instead. I\u0027m seeing conflicting explanations of the difference, but on the whole it sounds like OnStart is a bit safer / more consistent.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks, I\u0027ll give that a try tomorrow and let you know. Had enough facedesking for one day.\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2018-08-15T13:10:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223433946\u0022 data-ipsquote-contentid=\u0022177565\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221534298693\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAdmittedly this is a long shot, but try OnStart instead. I\u0027m seeing conflicting explanations of the difference, but on the whole it sounds like OnStart is a bit safer / more consistent.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nJust checked. It was running in OnStart and not Start.\n\u003C/p\u003E\n\u003Cp\u003E\nStumbled on another way to do this.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 Fields[nameof(openUI)].uiControlEditor.onFieldChanged = delegate (BaseField a, System.Object b)\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 {\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 FASLog.Writelog(\u0022OPEN UI\u0022);\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 };\n\u003C/p\u003E\n\u003Cp\u003E\nAnd again, it works in the editor, but not in flight.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd then... I saw\u00A0the blatantly obvious answer\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 field = Fields[nameof(containsBalloonet)];\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 field.uiControl\u003Cstrong\u003EFlight\u003C/strong\u003E.onFieldChanged = onGUIChange;\n\u003C/p\u003E\n\u003Cp\u003E\nIt was staring me right in the face\u00A0but I, and another old modder InfiniteDice simply did not see it.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-08-15T13:34:34Z\u0022 title=\u002208/15/2018 01:34  PM\u0022 data-short=\u00225 yr\u0022\u003EAugust 15, 2018\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"}]}