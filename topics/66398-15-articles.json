{"TopicId":66398,"ForumId":36,"TopicTitle":"[WIP] Loading textures only as required","CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-03-21T14:47:56Z","PageNum":15,"Articles":[{"CreatedByName":"raxo2222","CreatedById":110750,"CreatedDateTime":"2014-05-27T06:26:38Z","Content":"\n\u003Cp\u003EApparently b9 causes crashes, here is log: \u003Ca href=\u0022https://www73.zippyshare.com/v/24000377/file.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www73.zippyshare.com/v/24000377/file.html\u003C/a\u003E (incorrect parameter or something about b9 part).\u003C/p\u003E\u003Cp\u003EIt happens only in VAB/SPH.\u003C/p\u003E\u003Cp\u003EEdit: Another \u0022incorrect parameter\u0022 crash: \u003Ca href=\u0022https://www1.zippyshare.com/v/86110506/file.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www1.zippyshare.com/v/86110506/file.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThis time Taurus derped.\u003C/p\u003E\u003Cp\u003EI still have like 900 MB free on these crashes.\u003C/p\u003E\u003Cp\u003EI set LoD compression to \u0022False\u0022, as I have ATM, that compresses textures. It crashed instantly in VAB, when I set resize tecture scale to 4.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-27T07:22:13Z\u0022 title=\u002205/27/2014 07:22  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 27, 2014\u003C/time\u003E by raxo2222\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kolago","CreatedById":103729,"CreatedDateTime":"2014-05-30T00:25:39Z","Content":"\n\u003Cp\u003EAfter converting all .tga files to .png in Gamedata and editing all .mu files to the new .png files LoadOnDemand runs without crashs and the game needs about 400MB less memory! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\u003Cp\u003EOnly LLL Greenhouse has a problem with this, the windows are fogged and not clear any more.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T00:30:02Z\u0022 title=\u002205/30/2014 12:30  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by Kolago\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"BananaDealer","CreatedById":60684,"CreatedDateTime":"2014-05-30T00:43:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kolago\u0022 data-cite=\u0022Kolago\u0022\u003E\u003Cdiv\u003EAfter converting all .tga files to .png in Gamedata and editing all .mu files to the new .png files LoadOnDemand runs without crashs and the game needs about 400MB less memory! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003Cp\u003EOnly LLL Greenhouse has a problem with this, the windows are fogged and not clear any more.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EKind sir, would you mayhaps share your ways?\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-30T10:14:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BananaDealer\u0022 data-cite=\u0022BananaDealer\u0022\u003E\u003Cdiv\u003EKind sir, would you mayhaps share your ways?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI might be crazy, but I think Faark said the next release will handle tga files so this will be unnecessary.\u003C/p\u003E\u003Cp\u003EEDIT: \u003Ca href=\u0022http://kerbalspaceprogram.com/mbm-to-png-file-converter/\u0022 rel=\u0022external nofollow\u0022\u003EI did find this\u003C/a\u003E, which looks like it does that whole process in one package. I still think Faark said the next rev will cover files like tga and mbm, but I plan on trying this in the mean time as it may be some time before 2.3 is out.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T10:33:08Z\u0022 title=\u002205/30/2014 10:33  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2014-05-30T10:23:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003EI might be crazy, but I think Faark said the next release will handle tga files so this will be unnecessary.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut Faark also has a RL and so the next version might take days, weeks, months....(I just don\u0027t want to think further \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)\u003C/p\u003E\u003Cp\u003ESo every bit of memory saving is worth it.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-30T10:33:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alewx\u0022 data-cite=\u0022Alewx\u0022\u003E\u003Cdiv\u003EBut Faark also has a RL and so the next version might take days, weeks, months....(I just don\u0027t want to think further \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)\u003Cp\u003ESo every bit of memory saving is worth it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELook above this post, I just edited my last post.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-30T10:52:03Z","Content":"\n\u003Cp\u003EI guess it won\u0027t work to convert tga to png, though there are lots of available options for this. I think the biggest problem though is that the exe has to be in the directory of the files for conversion, which means if you\u0027re like me you\u0027re talking about 1500\u002B files in 1500\u002B folders that all need the exe run on them individually. Maybe someone who\u0027s way better at scripting than I can write a batch file that could handle the job without too much trouble?\u003C/p\u003E\n"},{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2014-05-30T10:56:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003ELook above this post, I just edited my last post.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECool thanks.\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-30T11:19:27Z","Content":"\n\u003Cp\u003ESo I did a little testing, and you don\u0027t need to update the .mu files at all, just converting the files from mbm / tga to png seems to work just fine. Still not sure if it will affect performance at this point... haven\u0027t figured out how to just convert them all in one go.\u003C/p\u003E\n"},{"CreatedByName":"SebFierce","CreatedById":78259,"CreatedDateTime":"2014-05-30T11:51:25Z","Content":"\n\u003Cp\u003EMost likely you can use the BatchConversion of IrfanView to do it.\u003C/p\u003E\u003Cp\u003EDoes it improve the stability? My game crashes fairly often and I\u0027d like to improve on that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-30T12:00:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SebFierce\u0022 data-cite=\u0022SebFierce\u0022\u003E\u003Cdiv\u003EMost likely you can use the BatchConversion of IrfanView to do it.\u003Cp\u003EDoes it improve the stability? My game crashes fairly often and I\u0027d like to improve on that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI did a batch convert with xnview. Game seems to work ok, but with that said, I\u0027m actually getting more memory usage than before. Initial entry into the VAB usually had me sitting at 2.8gb, now I\u0027m around 3gb. Maybe setting the correct associations in the .mu files is the trick there, but it would need a batch file to run the mueditor from that converter I linked a few posts ago in each and every folder with a model in it. I have 1400 .mu files in my gamedata directory and have very little desire to manually run that program that many times.\u003C/p\u003E\u003Cp\u003EEDIT: I\u0027m hoping someone else has the skills to write this as I definitely am far out of practice for a complicated thing like this.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T12:58:45Z\u0022 title=\u002205/30/2014 12:58  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-05-30T13:28:24Z","Content":"\n\u003Cp\u003EOkay, the transparency issue is definitively caused by the TGA loader LOD uses. Its \u003Ca href=\u0022http://www.codeproject.com/Articles/31702/NET-Targa-Image-Reader\u0022 rel=\u0022external nofollow\u0022\u003Ethis 3rd party code\u003C/a\u003E and should be able to handle transparency, though. No idea why it always detects the img format as rgb without alpha. Would love to replace it, but there doesn\u0027t seem much to choose from...\u003C/p\u003E\u003Cp\u003ESo yes, for now you have to convert TGAs with alpha channel to e.g. png or make LOD ignore them via its config. Btw, when converting make sure KSP doesn\u0027t load both the PNG and TGA version! This would explain an increase in used memory (if your lucky LOD thinks it needs both and \u0022only\u0022 prepares 32x32 versions of them). Deleting or renaming them to sth like \u0022*.unusedtga\u0022 should do the job.\u003C/p\u003E\u003Cp\u003EIt shouldn\u0027t be necessary to touch anything else (mu or mbm files) for the transparency issue and shouldn\u0027t really save memory as well.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kolago\u0022 data-cite=\u0022Kolago\u0022\u003E\u003Cdiv\u003EOnly LLL Greenhouse has a problem with this, the windows are fogged and not clear any more.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you talking about the 2x1 greenhouse containing green leafs? Works fine for me once i got rid of its 3 tag\u0027s in favor of png\u0027s.\u003C/p\u003E\u003Cp\u003EAnyways, could you guys please test \u003Ca href=\u0022http://bit.ly/1pDOiXi\u0022 rel=\u0022external nofollow\u0022\u003Ethis version\u003C/a\u003E and report and any changes you notice? Especially stuff like slower loading times for high res textures or other regressions...\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-30T13:42:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EOkay, the transparency issue is definitively caused by the TGA loader LOD uses. Its \u003Ca href=\u0022http://www.codeproject.com/Articles/31702/NET-Targa-Image-Reader\u0022 rel=\u0022external nofollow\u0022\u003Ethis 3rd party code\u003C/a\u003E and should be able to handle transparency, though. No idea why it always detects the img format as rgb without alpha. Would love to replace it, but there doesn\u0027t seem much to choose from...\u003Cp\u003ESo yes, for now you have to convert TGAs with alpha channel to e.g. png or make LOD ignore them via its config. Btw, when converting make sure KSP doesn\u0027t load both the PNG and TGA version! This would explain an increase in used memory (if your lucky LOD thinks it needs both and \u0022only\u0022 prepares 32x32 versions of them). Deleting or renaming them to sth like \u0022*.unusedtga\u0022 should do the job.\u003C/p\u003E\u003Cp\u003EIt shouldn\u0027t be necessary to touch anything else (mu or mbm files) for the transparency issue and shouldn\u0027t really save memory as well.\u003C/p\u003E\u003Cp\u003EAre you talking about the 2x1 greenhouse containing green leafs? Works fine for me once i got rid of its 3 tag\u0027s in favor of png\u0027s.\u003C/p\u003E\u003Cp\u003EAnyways, could you guys please test \u003Ca href=\u0022http://bit.ly/1pDOiXi\u0022 rel=\u0022external nofollow\u0022\u003Ethis version\u003C/a\u003E and report and any changes you notice? Especially stuff like slower loading times for high res textures or other regressions...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually, I had backed up a copy of my GameData folder elsewhere and then set the batch process to delete the original and replace it with the new PNG. Essentially, after the process there were absolutely no tga\u0027s left in my entire GameData folder. The 3gb use seemed to vary quite a bit less (without the conversion, memory would fluctuate all over the place, but usually stay under 3gb), but it also didn\u0027t seem to improve stability or performance. If you\u0027re saying that no changes should need to be made to the .mu file, then I\u0027m going to say that means going all png isn\u0027t the way to go.\u003C/p\u003E\u003Cp\u003EAlso.... Yay for a new relase! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Perhaps it would be better to go the other direction? Convert all the parts that don\u0027t have transparency issues to TGA?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T13:45:29Z\u0022 title=\u002205/30/2014 01:45  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-30T13:57:48Z","Content":"\n\u003Cp\u003EFirst experience with new release:\u003C/p\u003E\u003Cp\u003EVery slow first prep (~5 mins for 2108 textures)\u003C/p\u003E\u003Cp\u003EExtremely fast prep afterward (~10sec for the same 2108 textures)\u003C/p\u003E\u003Cp\u003EImmediate CTD on entering VAB (3x already)\u003C/p\u003E\u003Cp\u003EEDIT: Also loads to main menu with about 200MB more memory use than last version (2.9GB this version, 2.7GB last version).\u003C/p\u003E\u003Cp\u003EEDIT2: What does this do? \u0022DontLoadEditorCatalogParts = False\u0022\u003C/p\u003E\u003Cp\u003EEDIT3: VAB crash is definitely OOM error. Entering VAB while tracking memory use shows immediate increase of 250MB and then climbing to crash.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T14:11:41Z\u0022 title=\u002205/30/2014 02:11  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by SpacedInvader\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2014-05-30T14:02:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EAnyways, could you guys please test \u003Ca href=\u0022http://bit.ly/1pDOiXi\u0022 rel=\u0022external nofollow\u0022\u003Ethis version\u003C/a\u003E and report and any changes you notice? Especially stuff like slower loading times for high res textures or other regressions...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERoger, will do it asap as I get home.\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003E@SpaceInvader, like it says it should avoid the loading of the vab catalog parts if set to true. I except it will Keep the parts in the catalog with 32*32 Images to avoid early crashes and smaller loading times in the VAB.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T14:04:23Z\u0022 title=\u002205/30/2014 02:04  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by Alewx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-30T14:09:21Z","Content":"\n\u003Cp\u003ENew update:\u003C/p\u003E\u003Cp\u003ESetting DontLoadEditorCatalogParts = \u003Cstrong\u003ETrue\u003C/strong\u003E solved CTD issue and has left VAB browsing memory use rock solid at whatever is actually loaded in the hangar. Still seems to want more memory on initial loading, but on entering a save, it dropped down to 2.7GB again, and then actually stayed there on entering the VAB, even while browsing pages, until I loaded a saved craft, at which time it went up to 2.85GB and stayed again. Seems to be the answer many of us have been looking for. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2014-05-30T14:18:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003ENew update:\u003Cp\u003ESetting DontLoadEditorCatalogParts = \u003Cstrong\u003ETrue\u003C/strong\u003E solved CTD issue and has left VAB browsing memory use rock solid at whatever is actually loaded in the hangar. Still seems to want more memory on initial loading, but on entering a save, it dropped down to 2.7GB again, and then actually stayed there on entering the VAB, even while browsing pages, until I loaded a saved craft, at which time it went up to 2.85GB and stayed again. Seems to be the answer many of us have been looking for. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELooks like what I was guessing, the parts in the catalog are smaller scaled versions of the regular parts and use the complete textures.\u003C/p\u003E\u003Cp\u003ESounds like it will be a really nice evening from what you discovered in this short time \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ECould you still provide a little \u0022how to\u0022 for the tga-\u0026gt;png conversion?\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-05-30T14:30:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpacedInvader\u0022 data-cite=\u0022SpacedInvader\u0022\u003E\u003Cdiv\u003EFirst experience with new release:\u003Cp\u003EVery slow first prep (~5 mins for 2108 textures)\u003C/p\u003E\u003Cp\u003EExtremely fast prep afterward (~10sec for the same 2108 textures)\u003C/p\u003E\u003Cp\u003EImmediate CTD on entering VAB (3x already)\u003C/p\u003E\u003Cp\u003EEDIT: Also loads to main menu with about 200MB more memory use than last version (2.9GB this version, 2.7GB last version).\u003C/p\u003E\u003Cp\u003EEDIT3: VAB crash is definitely OOM error. Entering VAB while tracking memory use shows immediate increase of 250MB and then climbing to crash.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks. This new version keeps some memory reserved for disk IO, thus some increase is fine. But it should only be between 32mb and your max texture file size (even though about 2x max size for faster loading, but kinda happy now that i didn\u0027t). I\u0027ll investigate on my test install, but some logs would be nice as well, especially those where DontLoad = false did crash the game. Please also re-download LOD from the link above, since it now also logs disk buffer size changes.\u003C/p\u003E\u003Cp\u003E@TGAs\u003C/p\u003E\u003Cp\u003EThe slow / manual / non-batch way is to open the problematic TGA with e.g. GIMP and export as png (default settings should work).\u003C/p\u003E\u003Cp\u003ETo make LOD ignore a particular file, open GameData\\LoadOnDemand\\LoadOnDemand.cfg, find the tga file and add \u0022SkipImage = True\u0022 to the files configs.\u003C/p\u003E\u003Cp\u003E*edit*\u003C/p\u003E\u003Cp\u003EOkay, i tried my smaller test install: \u003C/p\u003E\u003Cblockquote\u003E\u003Cdiv\u003E\u003Cbr\u003Ev2, 2nd start: 12sec, 0g915 w, 1g165 c\u003Cbr\u003Ev3, 1st start: 43sec, 1g182 w, 1g275 c\u003Cbr\u003Ev3. 2nd start: ~3sec, 1g082 w, 1g197 c\u003Cbr\u003E(w = \u0022Memory (private working set)\u0022, c = \u0022Commit size\u0022)\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ev2, 1st start: 66sec, 1g126 w, 1g212 c\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EIts interesting that the \u0022working set\u0022 size with v3 is mentionable larger while the commit size is kinda the same (\u002Bthe expected 32mb). Commit size is what is important in terms of 32bit oom crashes, so i hope we are fine. The task mgr doesn\u0027t show this column by default, btw.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T15:04:37Z\u0022 title=\u002205/30/2014 03:04  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by Faark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"raxo2222","CreatedById":110750,"CreatedDateTime":"2014-05-30T15:10:01Z","Content":"\n\u003Cp\u003EHmm it uses 1800 MB for me on menu.\u003C/p\u003E\u003Cp\u003EAnd it goes to 1950 MB after loading save.\u003C/p\u003E\u003Cp\u003EIt sits at 2050 MB, while in VAB.\u003C/p\u003E\u003Cp\u003EIt went up to 2400 MB after loading craft into VAB.\u003C/p\u003E\u003Cp\u003EAnd still around 2400, when I loaded different craft. I have 50 or so mods \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E. 600 MB free now.\u003C/p\u003E\u003Cp\u003EExiting to spaceport lowers memory usage to 2150 MB.\u003C/p\u003E\u003Cp\u003EI have don\u0027t load parts in editor on True. I also I have ATM on Agressive, that compresses textures to half of their res. My graphic settings are on maximum.\u003C/p\u003E\u003Cp\u003EAlso I would crash in VAB, when trying to have browser and game running at once - Firefox is using 300 MB, and anti-virus another 150 MB.\u003C/p\u003E\u003Cp\u003ESo for now its working fine - like your mod entered Beta stage \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EImma see what happens, if I enable compression for LOD.\u003C/p\u003E\u003Cp\u003ENothing changed, but uses 30 MB less in VAB - sits around 2020 MB.\u003C/p\u003E\u003Cp\u003EHmm it doesn\u0027t do anything - after loading craft is 2400 MB.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T15:23:23Z\u0022 title=\u002205/30/2014 03:23  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by raxo2222\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2014-05-30T16:08:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022raxo2222\u0022 data-cite=\u0022raxo2222\u0022\u003E\u003Cdiv\u003EImma see what happens, if I enable compression for LOD.\u003Cp\u003ENothing changed, but uses 30 MB less in VAB - sits around 2020 MB.\u003C/p\u003E\u003Cp\u003EHmm it doesn\u0027t do anything - after loading craft is 2400 MB.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnything else would be surprising since texture compression isn\u0027t yet implemented. I just added those compression flag since this feature was already planned when i created the config in the first place.\u003C/p\u003E\n"},{"CreatedByName":"raxo2222","CreatedById":110750,"CreatedDateTime":"2014-05-30T16:53:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EAnything else would be surprising since texture compression isn\u0027t yet implemented. I just added those compression flag since this feature was already planned when i created the config in the first place.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmm weird, that option was crashing me on V2.2 was that bug?\u003C/p\u003E\n"},{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2014-05-30T18:46:03Z","Content":"\n\u003Cp\u003EYeah success, tested the new v3 and got an CtD from the VAB with OoM and not with crashing texture problem! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kolago","CreatedById":103729,"CreatedDateTime":"2014-05-30T20:41:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BananaDealer\u0022 data-cite=\u0022BananaDealer\u0022\u003E\u003Cdiv\u003EKind sir, would you mayhaps share your ways?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESure, I have done this with a batch image converter (Pixillion Image Converter) for about 600 tga files.\u003C/p\u003E\u003Cp\u003EThe size of the png files was in most cases 50% or less of the tga source file.\u003C/p\u003E\u003Cp\u003EI batch converted the .mu files with UltraEdit from .tga to .png directly (search \u0026amp; replace).\u003C/p\u003E\u003Cp\u003EThen I delete all the .tga files after that.\u003C/p\u003E\u003Cp\u003EThe conversion wend down in 5 minutes with these tools and KSP on my RAM-Disk. Before that I made some test runs with a single mod directory.\u003C/p\u003E\u003Cp\u003EMake a backup before starting!\u003C/p\u003E\u003Cp\u003EKSP memory usage was 2800MB before in the VAB and 2400MB after TGA conversion.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T20:46:01Z\u0022 title=\u002205/30/2014 08:46  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by Kolago\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2014-05-30T20:51:50Z","Content":"\n\u003Cp\u003EOK I now noticed a quite strange bug, and have no idea what this might be.\u003C/p\u003E\u003Cp\u003EIf I delete the complete LoD Folder and start the game everything works perfect. then in the VAB the game crashes, and as I restart it, LoD seems to be stuck as I arrive in the main menue.\u003C/p\u003E\u003Cp\u003ENormally it counts up the completed textures, but now it gets stuck at 0 or 3 or 10 and then nothing again ever happens, while the game can be used regulary, just without part textures.\u003C/p\u003E\u003Cp\u003EBecause I know logs are the only thing that matters, I have a little surprise for you \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.file-upload.net/download-8979404/LoadOnDemand.log.html\u0022 rel=\u0022external nofollow\u0022\u003ELoadOnDemand.log\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2014-05-30T21:34:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alewx\u0022 data-cite=\u0022Alewx\u0022\u003E\u003Cdiv\u003ELooks like what I was guessing, the parts in the catalog are smaller scaled versions of the regular parts and use the complete textures.\u003Cp\u003ESounds like it will be a really nice evening from what you discovered in this short time \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ECould you still provide a little \u0022how to\u0022 for the tga-\u0026gt;png conversion?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWith XnView, it was as simple as going to tools \u0026gt; batch processing, then adding the gamedata folder, setting it to use original path, delete the original file, and output type png. Make sure to save a backup of your gamedata folder. Took about 5 mins on my SSD.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EThanks. This new version keeps some memory reserved for disk IO, thus some increase is fine. But it should only be between 32mb and your max texture file size (even though about 2x max size for faster loading, but kinda happy now that i didn\u0027t). I\u0027ll investigate on my test install, but some logs would be nice as well, especially those where DontLoad = false did crash the game. Please also re-download LOD from the link above, since it now also logs disk buffer size changes.\u003Cp\u003E@TGAs\u003C/p\u003E\u003Cp\u003EThe slow / manual / non-batch way is to open the problematic TGA with e.g. GIMP and export as png (default settings should work).\u003C/p\u003E\u003Cp\u003ETo make LOD ignore a particular file, open GameData\\LoadOnDemand\\LoadOnDemand.cfg, find the tga file and add \u0022SkipImage = True\u0022 to the files configs.\u003C/p\u003E\u003Cp\u003E*edit*\u003C/p\u003E\u003Cp\u003EOkay, i tried my smaller test install: \u003C/p\u003E\u003Cblockquote\u003E\u003Cdiv\u003E\u003Cbr\u003Ev2, 2nd start: 12sec, 0g915 w, 1g165 c\u003Cbr\u003Ev3, 1st start: 43sec, 1g182 w, 1g275 c\u003Cbr\u003Ev3. 2nd start: ~3sec, 1g082 w, 1g197 c\u003Cbr\u003E(w = \u0022Memory (private working set)\u0022, c = \u0022Commit size\u0022)\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ev2, 1st start: 66sec, 1g126 w, 1g212 c\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EIts interesting that the \u0022working set\u0022 size with v3 is mentionable larger while the commit size is kinda the same (\u002Bthe expected 32mb). Commit size is what is important in terms of 32bit oom crashes, so i hope we are fine. The task mgr doesn\u0027t show this column by default, btw.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI will recrash my game with the flag set to false for you \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. As for which type of file to go for, would you say its better to use TGA or PNG? With compression, PNG can be much smaller, but I\u0027m not sure if KSP takes compression into account when dealing with its textures, so I\u0027m not sure if it helps or hinders.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alewx\u0022 data-cite=\u0022Alewx\u0022\u003E\u003Cdiv\u003EYeah success, tested the new v3 and got an CtD from the VAB with OoM and not with crashing texture problem! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m guessing you mean you got the same results as I did after setting the flag to true?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kolago\u0022 data-cite=\u0022Kolago\u0022\u003E\u003Cdiv\u003ESure, I have done this with a batch image converter (Pixillion Image Converter) for about 600 tga files.\u003Cp\u003EThe size of the png files was in most cases 50% or less of the tga source file.\u003C/p\u003E\u003Cp\u003EI batch converted the .mu files with UltraEdit from .tga to .png directly (search \u0026amp; replace).\u003C/p\u003E\u003Cp\u003EThen I delete all the .tga files after that.\u003C/p\u003E\u003Cp\u003EThe conversion wend down in 5 minutes with these tools and KSP on my RAM-Disk. Before that I made some test runs with a single mod directory.\u003C/p\u003E\u003Cp\u003EMake a backup before starting!\u003C/p\u003E\u003Cp\u003EKSP memory usage was 2800MB before in the VAB and 2400MB after TGA conversion.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI will have to give this a try. I have a gut feeling that not changing the file reference within the .mu files may be taking extra memory for some reason.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alewx\u0022 data-cite=\u0022Alewx\u0022\u003E\u003Cdiv\u003EOK I now noticed a quite strange bug, and have no idea what this might be.\u003Cp\u003EIf I delete the complete LoD Folder and start the game everything works perfect. then in the VAB the game crashes, and as I restart it, LoD seems to be stuck as I arrive in the main menue.\u003C/p\u003E\u003Cp\u003ENormally it counts up the completed textures, but now it gets stuck at 0 or 3 or 10 and then nothing again ever happens, while the game can be used regulary, just without part textures.\u003C/p\u003E\u003Cp\u003EBecause I know logs are the only thing that matters, I have a little surprise for you \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.file-upload.net/download-8979404/LoadOnDemand.log.html\u0022 rel=\u0022external nofollow\u0022\u003ELoadOnDemand.log\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you sure this isn\u0027t just the DLL rebuilding all of the cache thumbnails? this process took quite a while when I did it and it seems to hang LOD a lot...\u003C/p\u003E\n"}]}