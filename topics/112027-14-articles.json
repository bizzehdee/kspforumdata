{"TopicId":112027,"ForumId":34,"TopicTitle":"[1.12.x] Heat Control - More radiators! (August 22, 2021)","CreatedByName":"Nertea","CreatedById":83952,"CreatedDateTime":"2015-06-05T04:37:37Z","PageNum":14,"Articles":[{"CreatedByName":"mikegarrison","CreatedById":137807,"CreatedDateTime":"2015-06-29T00:00:52Z","Content":"\u003E \n\u003E As a separate issue, I still don\u0027t understand the \u00C3\u00A2\u00E2\u20AC\u00B0\u00C2\u00A51000x time warp heat logic. In the above experiments, at 1000x time warp, the temperature of the spacecraft would jump to around 865K, which was substantially hotter than any part of the spacecraft at time warps \u003C1000x.\n\nHow hot were the radiators? In 1.02, I believe the heat that got smeared all over my ships at high warp came from the radiators. Remember, they drop in temperature to equal the average temp, and if they have a high thermal mass that means a lot of heat gets redistributed.\n\n- - - Updated - - -\n\n\u003E \n\u003E Given that HC is a plugin, I can\u0027t speak for plugin code. But do a similar experiment with your basic stock parts - run a bunch of NERVs, let them cook, then watch what happens when you timewarp to 1000.\n\nWhich is a problem with timewarp. I think this heat mechanism was a big mistake. Squad appears to be having a lot of trouble integrating it into the rest of the game."},{"CreatedByName":"Fraz86","CreatedById":90101,"CreatedDateTime":"2015-06-29T00:04:13Z","Content":"\u003E \n\u003E How hot were the radiators? In 1.02, I believe the heat that got smeared all over my ships at high warp came from the radiators. Remember, they drop in temperature to equal the average temp, and if they have a high thermal mass that means a lot of heat gets redistributed.\n\nRadiator temperature was 660-670K (just slightly below reactor temp) at time warps \u003C1000x. At time warps \u00C3\u00A2\u00E2\u20AC\u00B0\u00C2\u00A51000x, radiator temperature jumped to 865K (as did the rest of the spacecraft)."},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2015-06-29T00:18:15Z","Content":"See note above RE doing this without HC parts, since you\u0027re asking a question about stock mechanics and tossing a plugin into the mix ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-06-29T00:40:33Z","Content":"\u003E \n\u003E As a separate issue, I still don\u0027t understand the \u00C3\u00A2\u00E2\u20AC\u00B0\u00C2\u00A51000x time warp heat logic. In the above experiments, at 1000x time warp, the temperature of the spacecraft would jump to around 865K, which was substantially hotter than any part of the spacecraft at time warps \u003C1000x.\n\nFrom testing, the game is not averaging temperature, its averaging thermal energy density. In other words, it determines the total thermal energy across all parts, sums that, and divides it proportionally to thermal mass across the ship. This makes ships very hot because in our test ships, the majority of thermal mass \u0026 heat is on the same parts (reactor/radiators).\n\nTHere also appears to be some kind of abstraction going on relative to thermal equilibrium, since, as you note, the ship is getting hotter than the hottest part. I cannot speak for whats going on here."},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-06-29T00:50:14Z","Content":"\u003E \n\u003E Given that HC is a plugin, I can\u0027t speak for plugin code. But do a similar experiment with your basic stock parts - run a bunch of NERVs, let them cook, then watch what happens when you timewarp to 1000.\n\nOkay...\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/mTWxc)\n\nStill doesn\u0027t explain why it sets the temperature so hot when HC is used. The ship was also rotating and tumbling all over the place for some reason, which is why the background keeps changing there.\n\n**Edited \u003Ctime datetime=\u00222015-06-29T00:54:26Z\u0022 title=\u002206/29/2015 12:54  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 29, 2015\u003C/time\u003E by smjjames**"},{"CreatedByName":"Fraz86","CreatedById":90101,"CreatedDateTime":"2015-06-29T03:09:08Z","Content":"RoverDude \u0026 Nertea,\n\nThe jump in temperature at \u00C3\u00A2\u00E2\u20AC\u00B0\u00C2\u00A51000x time warp appears to be stock behavior. I hypothesized that simulation of heat *production* at time warps \u00C3\u00A2\u00E2\u20AC\u00B0\u00C2\u00A51000x might be the problem, therefore rendering LV-Ns an unsuitable comparison (LV-Ns must be turned off to engage time warp). I couldn\u0027t think of any continuously heat-producing stock parts, so I used a ModuleManager patch to add a heat-producing ModuleResourceConverter (using only stock variables; not dependent on any plugin code) to the ISRU Converter:\n\n    @PART[ISRU]:Final{    MODULE\t{\t\tname = ModuleResourceConverter\t\tConverterName = Heater\t\tStartActionName = Start Heater\t\tStopActionName = Stop Heater \t\tAutoShutdown = false\t\tGeneratesHeat = true\t\tTemperatureModifier = 100\t\tUseSpecialistBonus = false\t}}\n\nUsing a test craft with an ISRU converter (with aforementioned \u0022heater\u0022 activated) and stock radiators, at time warps \u003C1000x, the resulting thermal equilibrium is seen here:\n\n![YNEr9gI.jpg](http://i.imgur.com/YNEr9gI.jpg)\n\nISRU - 819K\n\nLH2 tank - 809K\n\nAt time warps \u00C3\u00A2\u00E2\u20AC\u00B0\u00C2\u00A51000x, the entire craft jumped to (and remained stable at) 1097K:\n\n![zFcvJQu.jpg](http://i.imgur.com/zFcvJQu.jpg)\n\n* * *\n\nAdditional notes:\n\n- I have confirmed that **this phenomenon can result in thermally stable spacecraft exploding immediately upon engaging \u00C3\u00A2\u00E2\u20AC\u00B0\u00C2\u00A51000x time warp**\n- This phenomenon is new in 1.03/1.04; I recall from NFE testing in 1.02 that \u00C3\u00A2\u00E2\u20AC\u00B0\u00C2\u00A51000x time warp resulted in a sudden *decrease* in temperature\n\n**Edited \u003Ctime datetime=\u00222015-06-29T05:40:39Z\u0022 title=\u002206/29/2015 05:40  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 29, 2015\u003C/time\u003E by Fraz86**"},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2015-06-29T03:18:25Z","Content":"This would go back to why Nertea is going to need to sort out 1.0.4 compatibility which is completely orthagonal to radiators."},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-06-29T03:21:23Z","Content":"There IS one thing that produces heat constantly, the sun, and I have an idea, not sure if it\u0027ll work though.\n\nEdit: Verdict is inconclusive because everything is hot near the sun anyway.\n\n- - - Updated - - -\n\n\u003E \n\u003E This would go back to why Nertea is going to need to sort out 1.0.4 compatibility which is completely orthagonal to radiators.\n\nWhat do you mean by orthagonal to radiators?\n\n**Edited \u003Ctime datetime=\u00222015-06-29T03:58:08Z\u0022 title=\u002206/29/2015 03:58  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 29, 2015\u003C/time\u003E by smjjames**"},{"CreatedByName":"Fraz86","CreatedById":90101,"CreatedDateTime":"2015-06-29T03:32:46Z","Content":"\u003E \n\u003E This would go back to why Nertea is going to need to sort out 1.0.4 compatibility which is completely orthagonal to radiators.\n\nI\u0027m curious what you mean? Doesn\u0027t my experiment demonstrate that the problem is rooted in the stock heat simulation? If Squad ever wants to reintroduce heating to any modules that function under time warp (e.g., ISRU, drills, etc.), it looks like they will encounter the exact same problem. Not to mention any mods that want to add heat-producing parts. It appears that this problem is not at all specific to NFE.\n\nI suppose it\u0027s true that \u0022Nertea is going to need to sort out 1.0.4 compatibility\u0022 to the extent that he must adapt to a bugged stock simulation, but that\u0027s hardly what I would call a matter of compatibility.\n\n**Edited \u003Ctime datetime=\u00222015-06-29T05:32:39Z\u0022 title=\u002206/29/2015 05:32  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 29, 2015\u003C/time\u003E by Fraz86**"},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2015-06-29T08:38:43Z","Content":"\\*\\* the comments below are my personal thoughts as a modder, not as someone who subcontracted for Squad - do not take anything I say in any way as some \u0027official\u0027 statement!!! \\*\\*\n\nRE Orthagonal: My point was that even if 1.0.4 did not add radiators, Nertea already had to do adjustments, as has already been noted. And sorry, this is not a \u0027bugged stock simulation\u0027 issue. Using the stock mechanics and stock parts, with stock configs you\u0027re fine. this is squarely a mod issue. Stock ISRU had heat mechanics pulled in 1.0.1 specifically because I needed to noodle over how to better handle them in analytics mode without explosions or exploitations (I should know - I did it), so poking it with a stick and calling it a bug is a bit disingenuous. \n\nI am saying this not to be pedantic, but to make a pretty clear separation between what is supported in stock vs. what is not. i.e. your demo above, Fraz86, basically says \u0027I can edit a config to include non supported values that are not used in any generators in the entire game, and cause things to explode!\u0027. Of course you can... that\u0027s why those mechanics were tabled. Right now, there are no stock mechanics that I am aware of that generate heat and operate in analytics mode (engines and reentry heat are both limited to physwarp). So naturally whatever Nertea does for his mod will have to account for this. That\u0027s not a bug, that\u0027s pushing the boundaries of what we have right now.\n\nNow, if at some time stock heat in analytics mode makes a comeback, then Nertea can likely piggy back off of that. But there\u0027s absolutely no guarantee what shape that will take. And that\u0027s the rub. You\u0027re extending a major (and newish) subsystem, and asking it to do some interesting things that it simply is not (currently) designed to do. And I expect there will be future occurrences of having the rug pulled out (i.e. if Nertea makes a plugin that does X, then stock ends up doing Y, there will end up being more rounds of reconciliation)."},{"CreatedByName":"Psycho_zs","CreatedById":137644,"CreatedDateTime":"2015-06-29T09:59:20Z","Content":"An idea for a dirty hack: block high warp when parts temperatures change faster than some small rate. When temperature change rate is insignificant, assume that ship reached an equilibrium, save temperature state and allow higher time warp. When dropping out of high time warp, restore saved temperature state, (maybe with some coefficient based on overall temp change during high warp).\n\n@RoverDude, could you please point to a comprehensive list of thermal-related parameters and their descriptions that can be used in cfg\u0027s?"},{"CreatedByName":"mikegarrison","CreatedById":137807,"CreatedDateTime":"2015-06-29T10:08:53Z","Content":"So, like I said about four or five pages ago, it would probably be easiest just to not have reactor heat at all."},{"CreatedByName":"lajoswinkler","CreatedById":79159,"CreatedDateTime":"2015-06-29T11:31:50Z","Content":"\u003E \n\u003E So, like I said about four or five pages ago, it would probably be easiest just to not have reactor heat at all.\n\nAlso, to have zero mass battery with infinite energy capacity. And if nothing would get damaged when it hits the ground."},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-06-29T12:36:03Z","Content":"Nertea \u0026 Roverdude,\n\nWith the new 1.0.4 heat system, would it be possible to have heat as a resource? Or does the ModuleResourceConverter have a possibility to switch on/off depending on temperature?"},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2015-06-29T13:05:49Z","Content":"Modders are free to do whatever they like, but the stock system does not in any way use heat as a resource. And I kinda agree with that sentiment."},{"CreatedByName":"Streetwind","CreatedById":98962,"CreatedDateTime":"2015-06-29T13:23:03Z","Content":"\u003E \n\u003E An idea for a dirty hack: block high warp when parts temperatures change faster than some small rate. When temperature change rate is insignificant, assume that ship reached an equilibrium, save temperature state and allow higher time warp. When dropping out of high time warp, restore saved temperature state, (maybe with some coefficient based on overall temp change during high warp).\n\nSomething even simpler:\n\nRemember how the stock game says \u0022can\u0027t timewarp higher than x50 below 120,000m\u0022 in low Kerbin orbit? Or \u0022Cannot timewarp when the vessel is under acceleration\u0022 while your engines are on?\n\nHow about: \u0022Cannot timewarp higher than x100 while reactor is producing output\u0022. High timewarps would require the reactor to be shut off, or reduced to 0% output. Or the ship being unfocused, thus avoiding the problem entirely. \n\n(@RoverDude: the heat simulation isn\u0027t processed in the background for unfocused vessels, is it?)\n\nOf course, whether or not that\u0027s a valid path depends on whether or not you can actually add such a thing as a modder. That\u0027s not exactly a System I would expect people to want to mod if I was a developer..."},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-06-29T13:29:44Z","Content":"\u003E \n\u003E Something even simpler:\n\u003E Remember how the stock game says \u0022can\u0027t timewarp higher than x50 below 120,000m\u0022 in low Kerbin orbit? Or \u0022Cannot timewarp when the vessel is under acceleration\u0022 while your engines are on?\n\u003E \n\u003E How about: \u0022Cannot timewarp higher than x100 while reactor is producing output\u0022. High timewarps would require the reactor to be shut off, or reduced to 0% output. Or the ship being unfocused, thus avoiding the problem entirely. \n\u003E \n\u003E (@RoverDude: the heat simulation isn\u0027t processed in the background for unfocused vessels, is it?)\n\u003E \n\u003E Of course, whether or not that\u0027s a valid path depends on whether or not you can actually add such a thing as a modder. That\u0027s not exactly a System I would expect people to want to mod if I was a developer...\n\nI would find that rather annoying IMO, what if you\u0027re running things that suck a lot of power while in timewarp? Obviously I can just slap on the advanced RTGs, but that\u0027s besides the point I\u0027m making here."},{"CreatedByName":"Streetwind","CreatedById":98962,"CreatedDateTime":"2015-06-29T13:50:06Z","Content":"Fair point, but note that this isn\u0027t a design goal... it\u0027s a band-aid fix to prevent people detonating their expensive motherships with a push of the timewarp key. It may not be ideal for all situations, but in this case I\u0027d rather sacrifice the rare reactor-driven giga-refinery that needs a Kerbal year to fill up its storage tanks while absolutely requiring to be kept focused if it means I can avoid ruining someone\u0027s hard work on a daily basis.\n\nPersonal opinion and all, of course. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)"},{"CreatedByName":"Psycho_zs","CreatedById":137644,"CreatedDateTime":"2015-06-29T14:55:50Z","Content":"\u003E \n\u003E Something even simpler:\n\u003E Remember how the stock game says \u0022can\u0027t timewarp higher than x50 below 120,000m\u0022 in low Kerbin orbit? Or \u0022Cannot timewarp when the vessel is under acceleration\u0022 while your engines are on?\n\nI thought more in the line of \u0022Can\u0027t timewarp higher than x100 while ship\u0027s temperature is not stable\u0022 precisely because it would be possible not to shutdown reactor every time. But yes, that is more complex."},{"CreatedByName":"mikegarrison","CreatedById":137807,"CreatedDateTime":"2015-06-29T18:28:10Z","Content":"\u003E \n\u003E I thought more in the line of \u0022Can\u0027t timewarp higher than x100 while ship\u0027s temperature is not stable\u0022 precisely because it would be possible not to shutdown reactor every time. But yes, that is more complex.\n\nPoint is, the temperature can be perfectly stable, but 1000x\u002B timewarp will still sometimes bork it."},{"CreatedByName":"Psycho_zs","CreatedById":137644,"CreatedDateTime":"2015-06-29T18:33:07Z","Content":"That is why save/restore is needed, see my original post."},{"CreatedByName":"mikegarrison","CreatedById":137807,"CreatedDateTime":"2015-06-29T18:44:49Z","Content":"\u003E \n\u003E Something even simpler:\n\u003E Remember how the stock game says \u0022can\u0027t timewarp higher than x50 below 120,000m\u0022 in low Kerbin orbit? Or \u0022Cannot timewarp when the vessel is under acceleration\u0022 while your engines are on?\n\u003E \n\u003E How about: \u0022Cannot timewarp higher than x100 while reactor is producing output\u0022. High timewarps would require the reactor to be shut off, or reduced to 0% output. Or the ship being unfocused, thus avoiding the problem entirely. \n\u003E \n\u003E (@RoverDude: the heat simulation isn\u0027t processed in the background for unfocused vessels, is it?)\n\u003E \n\u003E Of course, whether or not that\u0027s a valid path depends on whether or not you can actually add such a thing as a modder. That\u0027s not exactly a System I would expect people to want to mod if I was a developer...\n\nWouldn\u0027t it be simpler to just turn off heat from the reactor at \u003E100 timewarp? If the code can tell you not to timewarp when the reactor is turned on, can\u0027t it also just disable heat generation when timewarp goes too high?\n\nDon\u0027t get me wrong, I was liking the 1.02 Heat Control and reactor heating and what have you, but Nertea made it very clear he wants to work around the stock game, not redesign it. So band-aid fixes are pretty much a direct result of that decision. This seems like the easiest and most robust band-aid fix."},{"CreatedByName":"cipherpunks","CreatedById":114858,"CreatedDateTime":"2015-06-29T18:59:54Z","Content":"Every time I scroll thru Heat Control parts in FilterExtensions, I\u0027m reminded of *that* summer. \n\nWe were living in Ukraine back then, and my father, knowing first hand what radiation is, won\u0027t let us play outside, despite the weather was exceptional, not counting occasional rain from *there*, after which I saw yellowish bubbles and spooky-looking dust flowing on the puddles of rainwater. \n\nInstead we were sitting at home with mom, and all the windows sere not only closed, but every hole was tucked with a wet cloth that was changed twice a day.\n\nOur father was mostly absent outside - he was desperately searching for some means to escape that territory, coming home late and very tired. But after some time he found one possibility, so we moved. I recall this \u0022don\u0027t tell any kids where you came from\u0022 - I broke that promise and told some, and after that their moms prohibited them to be near us...\n\nRBMK-1000 and RBMK-1500 aren\u0027t the best names for parts IME. Moreover, Heat Management\u0027s AHMS are vastly superior."},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-06-29T19:03:11Z","Content":"\u003E \n\u003E Every time I scroll thru Heat Control parts in FilterExtensions, I\u0027m reminded of *that* summer. \n\u003E We were living in Ukraine back then, and my father, knowing first hand what radiation is, won\u0027t let us play outside, despite the weather was exceptional, not counting occasional rain from *there*, after which I saw yellowish bubbles and spooky-looking dust flowing on the puddles of rainwater. \n\u003E \n\u003E Instead we were sitting at home with mom, and all the windows sere not only closed, but every hole was tucked with a wet cloth that was changed twice a day.\n\u003E \n\u003E Our father was mostly absent outside - he was desperately searching for some means to escape that territory, coming home late and very tired. But after some time he found one possibility, so we moved. I recall this \u0022don\u0027t tell any kids where you came from\u0022 - I broke that promise and told some, and after that their moms prohibited them to be near us...\n\u003E \n\u003E RBMK-1000 and RBMK-1500 aren\u0027t the best names for parts IME. Moreover, Heat Management\u0027s AHMS are vastly superior.\n\nChernobyl?\n\nEdit: Actually, I checked and the Chernobyl disaster was in April, but yeah, I get the idea here.\n\n**Edited \u003Ctime datetime=\u00222015-06-29T19:49:24Z\u0022 title=\u002206/29/2015 07:49  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 29, 2015\u003C/time\u003E by smjjames**"},{"CreatedByName":"Nertea","CreatedById":83952,"CreatedDateTime":"2015-06-29T19:42:04Z","Content":"\u003E \n\u003E Every time I scroll thru Heat Control parts in FilterExtensions, I\u0027m reminded of *that* summer. \n\u003E We were living in Ukraine back then, and my father, knowing first hand what radiation is, won\u0027t let us play outside, despite the weather was exceptional, not counting occasional rain from *there*, after which I saw yellowish bubbles and spooky-looking dust flowing on the puddles of rainwater. \n\u003E \n\u003E Instead we were sitting at home with mom, and all the windows sere not only closed, but every hole was tucked with a wet cloth that was changed twice a day.\n\u003E \n\u003E Our father was mostly absent outside - he was desperately searching for some means to escape that territory, coming home late and very tired. But after some time he found one possibility, so we moved. I recall this \u0022don\u0027t tell any kids where you came from\u0022 - I broke that promise and told some, and after that their moms prohibited them to be near us...\n\u003E \n\u003E RBMK-1000 and RBMK-1500 aren\u0027t the best names for parts IME. Moreover, Heat Management\u0027s AHMS are vastly superior.\n\nWhoa, I hadn\u0027t even considered that things like my bad dude. Really sorry. I\u0027ll change them for next update.\n\nAlso Rover, get on IRC later today ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif).\n\n**Edited \u003Ctime datetime=\u00222015-06-29T19:46:04Z\u0022 title=\u002206/29/2015 07:46  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 29, 2015\u003C/time\u003E by Nertea**"}]}