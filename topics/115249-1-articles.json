{"TopicId":115249,"ForumId":36,"TopicTitle":"Locating and Editing Planet Textures?","CreatedByName":"MajorStorm","CreatedById":84216,"CreatedDateTime":"2015-07-07T00:34:21Z","PageNum":1,"Articles":[{"CreatedByName":"MajorStorm","CreatedById":84216,"CreatedDateTime":"2015-07-07T00:34:21Z","Content":"\n\u003Cp\u003ESimple put, how do I find/where do I find the textures (color, bump, height) used for the planets?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-07T00:36:43Z\u0022 title=\u002207/07/2015 12:36  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 7, 2015\u003C/time\u003E by MajorStorm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-07-07T00:38:32Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EMoved to Addon Development, where this is more appropriate. \u003C/strong\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThey\u0027re inside the Unity assets, and therefore not directly editable. You can, however, \u003Cem\u003Ereplace\u003C/em\u003E them by using \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/114649-1-0-x-Kopernicus-Beta-(0-1)-June-26?goto=newpost\u0022 rel=\u0022external nofollow\u0022\u003EKopernicus\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"MajorStorm","CreatedById":84216,"CreatedDateTime":"2015-07-07T00:42:23Z","Content":"\n\u003Cp\u003EIs it possible to access them via code?\u003C/p\u003E\n"},{"CreatedByName":"Robotengineer","CreatedById":104525,"CreatedDateTime":"2015-07-07T00:43:54Z","Content":"\n\u003Cp\u003ETry KerbalMaps if you need maps.\u003C/p\u003E\n"},{"CreatedByName":"MajorStorm","CreatedById":84216,"CreatedDateTime":"2015-07-07T00:45:48Z","Content":"\n\u003Cp\u003EI don\u0027t want maps, I actually want to find a way to modify the textures during run-time.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-07-07T03:11:05Z","Content":"\n\u003Cp\u003EMajorStorm: If you want to modify the heightmap (what\u0027s used in PQS) then yes, you can access it during code. Get the PQSMod_VertexHeightMap PQSMod on the Kerbin PQS and modify the MapSO on it.\u003C/p\u003E\u003Cp\u003ESince the scaled space textures are loaded as read-only you can\u0027t modify them, you can only replace them.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-07-07T04:24:34Z","Content":"\n\u003Cp\u003EI\u0027ve used this snippet for ages to convert unreadable textures back to a readable format:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic static Texture2D CreateReadable(this Texture2D original)\u003Cbr\u003E{\u003Cbr\u003E    if (original == null) throw new ArgumentNullException(\u0022original\u0022);\u003Cbr\u003E\u003Cbr\u003E    if (original.width == 0 || original.height == 0)\u003Cbr\u003E        throw new Exception(\u0022Invalid image dimensions\u0022);\u003Cbr\u003E\u003Cbr\u003E    var finalTexture = new Texture2D(original.width, original.height);\u003Cbr\u003E\u003Cbr\u003E    // isn\u0027t read or writeable ... we\u0027ll have to get tricksy\u003Cbr\u003E    var rt = RenderTexture.GetTemporary(original.width, original.height, 0, RenderTextureFormat.ARGB32, RenderTextureReadWrite.sRGB, 1);\u003Cbr\u003E    Graphics.Blit(original, rt);\u003Cbr\u003E\u003Cbr\u003E    RenderTexture.active = rt;\u003Cbr\u003E\u003Cbr\u003E    finalTexture.ReadPixels(new Rect(0, 0, finalTexture.width, finalTexture.height), 0, 0);\u003Cbr\u003E\u003Cbr\u003E    RenderTexture.active = null;\u003Cbr\u003E    RenderTexture.ReleaseTemporary(rt);\u003Cbr\u003E\u003Cbr\u003E    return finalTexture;\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-07-07T06:49:31Z","Content":"\n\u003Cp\u003EExcellent thinking! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2015-07-07T19:22:30Z","Content":"\n\u003Cp\u003EI\u0027ve actually already extracted all of the planet textures for use in a personal version of EVE. I\u0027d post them here, but I worry it violates the TOS.\u003C/p\u003E\u003Cp\u003EDoes it, or would it help if I just tossed them up in this thread?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-07-07T23:21:14Z","Content":"\n\u003Cp\u003EIt does. The addon rules prohibit sharing/reusing stuff from KSP_Data (vs. GameData).\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-07-09T16:31:40Z","Content":"\n\u003Cp\u003EAnyone know how to get the actual Scale space texture drawn over the surface of the planet?\u003C/p\u003E\u003Cp\u003EIt\u0027s easy to get the individual textures used for scaled space:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ETexture diffuseMap =  body.scaledBody.renderer.material.mainTexture;\u003Cbr\u003E\u003Cbr\u003E//or\u003Cbr\u003E\u003Cbr\u003ETexture diffuseMap =  body.scaledBody.renderer.material.GetTexture(\u0022_MainTex\u0022); //Substitute _BumpMap to get the normal.\u003Cbr\u003E\u003Cbr\u003E//or\u003Cbr\u003E\u003Cbr\u003ETexture diffuseMap =  body.scaledBody.GetComponent\u0026lt;MeshRenderer\u0026gt;().material.mainTexture;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFor the non-ocean planets this works fine and gives you the flat color map. For ocean planets you get a map that\u0027s black on the surface and clear on the ocean.\u003C/p\u003E\u003Cp\u003EUsing xEvilReeperx\u0027s snippet (which I now seem to find everywhere after I know what it is...) I can use the material to get ocean planet textures that look right in some cases. Also note that you need to use Apply() to the final texture before you can actually use it, you could do that with the texture returned by that method, or before the last line in that snippet: finalTexture.Apply();\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evar renderer = body.scaledBody.GetComponent\u0026lt;MeshRenderer\u0026gt;();\u003Cbr\u003E\u003Cbr\u003Evar diffuseMap =  renderer.material.mainTexture;\u003Cbr\u003E\u003Cbr\u003Evar finalTexture = new Texture2D(diffuseMap.width, diffuseMap.height);\u003Cbr\u003E\u003Cbr\u003Evar rt = RenderTexture.GetTemporary(diffuseMap.width, diffuseMap.height, 0, RenderTextureFormat.ARGB32, RenderTextureReadWrite.sRGB, 1);\u003Cbr\u003E\u003Cbr\u003EGraphics.Blit(original, rt, renderer.material); //Note the addition of the material using a different overload here\u003Cbr\u003E\u003Cbr\u003ERenderTexture.active = rt;\u003Cbr\u003E\u003Cbr\u003EfinalTexture.ReadPixels(new Rect(0, 0, finalTexture.width, finalTexture.height), 0, 0);\u003Cbr\u003E\u003Cbr\u003ERenderTexture.active = null;\u003Cbr\u003ERenderTexture.ReleaseTemporary(rt);\u003Cbr\u003E\u003Cbr\u003EfinalTexture.Apply();\u003Cbr\u003E\u003Cbr\u003EGUI.DrawTexture(Rect, finalTexture);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis will give a texture for Eve that has the right color and looks like it has some specular shader applied. Kerbin and Laythe are still screwed up, but in a different way than before. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E The other planet textures look no different from the flat diffuse map.\u003C/p\u003E\u003Cp\u003ESo is there some way to have the normal map applied to the diffuse map? Or does that even work without some 3D mesh to wrap it around and apply a light source to? And any ideas about what makes the Kerbin and Laythe scaled space maps different?\u003C/p\u003E\n"},{"CreatedByName":"MajorStorm","CreatedById":84216,"CreatedDateTime":"2015-07-09T22:30:50Z","Content":"\n\u003Cp\u003EI am assuming that in order to do this, I would need to access libraries/apis being used. For that I can read and go through your scripts used on RealSolarSystem via Github, awesome that you uploaded it there. And just out of curiosity, how did you figure out how to modify these things in the first place?\u003C/p\u003E\n"},{"CreatedByName":"J.Random","CreatedById":63332,"CreatedDateTime":"2015-07-09T22:58:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EIt does. The addon rules prohibit sharing/reusing stuff from KSP_Data (vs. GameData).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPsst! Don\u0027t tell anyone, but this rule seems to not work when people share the asset file with modified sun_flare. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"}]}