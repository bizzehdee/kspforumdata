{"TopicId":54962,"ForumId":18,"TopicTitle":"Trajectories, solving for theta when range is known.","CreatedByName":"Amram","CreatedById":8067,"CreatedDateTime":"2013-12-02T06:00:28Z","PageNum":1,"Articles":[{"CreatedByName":"Amram","CreatedById":8067,"CreatedDateTime":"2013-12-02T06:00:28Z","Content":"\n\u003Cp\u003EA project of mine has run face first into a wall at mach 7, due to my inability to resolve what is likely a fairly straightforward math problem.\u003C/p\u003E\u003Cp\u003EI\u0027ll preface with a video that does a rather good job of explaining most of the problem.\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/M8xCj2VPHas?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EWhat im trying to do, is code up an AI script for another game. I\u0027ve been working on improving the bombing scripts, but i\u0027ve encountered an issue. if I know what angle I plan to release the weapon at, given my speed, altitude, and target altitude, its fairly easy to find the range of \u0027impact\u0027. Repeated testing against various online calculators confirms im doing that much correctly. Problem is, how do you know the release angle ahead of time?\u003C/p\u003E\u003Cp\u003ETo give an example, If I am flying at 10km alt, my target is at 50m, my velocity is 257m/s, and I release on a -32\u00C3\u201A\u00C2\u00B0 descent angle, and ignoring air drag as the game doesn\u0027t consider it, I find a range of 7247.148m. 13,300.637m if \u002B32\u00C3\u201A\u00C2\u00B0\u003C/p\u003E\u003Cp\u003Ein python\u003C/p\u003E\u003Cp\u003Ex = ((v * cos(theta)) / g) * (v * sin(theta) \u002B sqrt(pow(v,2) * pow(sin(theta),2) \u002B 2 * g * y))\u003C/p\u003E\u003Cp\u003Eg = 9.80665\u003C/p\u003E\u003Cp\u003Ev = 257\u003C/p\u003E\u003Cp\u003Ey = 9950 (my alt - tgt = 10000 - 50 = 9950)\u003C/p\u003E\u003Cp\u003Etheta = \u00C3\u201A\u00C2\u00B1 32 in given examples. In all cases its release angle.\u003C/p\u003E\u003Cp\u003EWhat i can\u0027t figure out for the life of me, is how to get back to the original angle with precision. if i know g, v, y, and x, what is theta?\u003C/p\u003E\u003Cp\u003EI found an answer on wikipedia, but it confuses me somewhat, and tends to make both my calculator and python angry(math domain errors), plus when I get it working in special cases, the math doesn\u0027t work out.\u003C/p\u003E\u003Cp\u003ESo I did more digging, and I found a forum post, which i\u0027ve misplaced, so I can\u0027t link it, but I have the math used.\u003C/p\u003E\u003Cp\u003E theta1 = atan((pow(v,2) \u002B sqrt(abs(pow(v,4) - g * (g * pow(x,2) \u002B 2 * y * pow(v,2)))))/(g * x))\u003C/p\u003E\u003Cp\u003E theta2 = atan((pow(v,2) - sqrt(abs(pow(v,4) - g * (g * pow(x,2) \u002B 2 * y * pow(v,2)))))/(g * x))\u003C/p\u003E\u003Cp\u003EThat should provide me the correct two possible values for theta. However. It causes math domain errors if g*y is positive. I\u0027ve been feeding it negative y, as I assume that given y is positive when I work top down, and im now working bottom up, y should be flipped right?\u003C/p\u003E\u003Cp\u003EWhen I got this far, I thought I was home free. but doing an theta == theta1 results in False, even when I invert the sign to make it appear correct. So I suspect its a rounding issue, and the result isn\u0027t lining up quite right.\u003C/p\u003E\u003Cp\u003Eif I use those values to compute a new range, to compare against the old one, I get 4 results because I am currently testing both theta\u0027s as positive and negative to cover my bases as im not sure the correct step from here. So here\u0027s the full output from my script.\u003C/p\u003E\u003Cp\u003Etheta 32\u003C/p\u003E\u003Cp\u003EPopup Range Calc 13300.637m\u003C/p\u003E\u003Cp\u003Etheta1 -32.000000\u003C/p\u003E\u003Cp\u003Etheta2 -21.200409\u003C/p\u003E\u003Cp\u003Etheta -32.000000\u003C/p\u003E\u003Cp\u003Erange = 7044.423\u003C/p\u003E\u003Cp\u003Etheta -21.200409\u003C/p\u003E\u003Cp\u003Erange = -5443.860\u003C/p\u003E\u003Cp\u003Etheta 32.000000\u003C/p\u003E\u003Cp\u003Erange = 13240.912\u003C/p\u003E\u003Cp\u003Etheta 21.200409\u003C/p\u003E\u003Cp\u003Erange = -12178.599\u003C/p\u003E\u003Cp\u003EThe first and second passes differ, 13300.637 vs 13240.912(theta value 3).\u003C/p\u003E\u003Cp\u003Eif I attempt to replicate the video\u0027s results:\u003C/p\u003E\u003Cp\u003Etheta 20\u003C/p\u003E\u003Cp\u003EPopup Range Calc 160.244m\u003C/p\u003E\u003Cp\u003Etheta1 -38.033894\u003C/p\u003E\u003Cp\u003Etheta2 -20.000000\u003C/p\u003E\u003Cp\u003Etheta -38.033894\u003C/p\u003E\u003Cp\u003Erange = 102.637\u003C/p\u003E\u003Cp\u003Etheta -20.000000\u003C/p\u003E\u003Cp\u003Erange = 30.819\u003C/p\u003E\u003Cp\u003Etheta 38.033894\u003C/p\u003E\u003Cp\u003Erange = 159.635\u003C/p\u003E\u003Cp\u003Etheta 20.000000\u003C/p\u003E\u003Cp\u003Erange = 99.248\u003C/p\u003E\u003Cp\u003EI get his answers if I work it by hand, so I think its merely a precision error, the script isn\u0027t rounding where we are.\u003C/p\u003E\u003Cp\u003Eas a final confirmation, I tested against the game\u0027s approximation, it uses:\u003C/p\u003E\u003Cp\u003E t_flight = math.sqrt(0.20394324 * (own_alt_m - tgt_alt))\u003C/p\u003E\u003Cp\u003E release_range_m = t_flight * own_speed_mps\u003C/p\u003E\u003Cp\u003Eif i set theta to zero, I get the exact same results to how ever many digits i care to show, so in level bombing im every bit as accurate. Thing is, the game has no capacity to loft/dive on targets while bombing, which is what im out to improve upon.\u003C/p\u003E\u003Cp\u003ESo, anyone willing to take a crack at it?\u003C/p\u003E\u003Cp\u003EWhat is screwing me, if I understand correctly, is that I have two unknowns, and im not sure how to reformulate to solve for one of them. Theta, and time. I can solve for one or the other, if I know the other one. But i can\u0027t figure out how to get back to theta from range.\u003C/p\u003E\u003Cp\u003EI presume that given that I can solve for range and time if given theta to work with, that its possible to go in the other direction and figure out time, and then theta if given range instead, i just can\u0027t figure out how.\u003C/p\u003E\u003Cp\u003Eif its relevant, i never did graduate so be wary of throwing all sorts of symbols at me without defining them too, as it is im currently in the middle of upgrading(math-10 as a refresher atm, math-20 starts in january), but something tells me this is well beyond what i\u0027ll be taught for a while yet. I learn quick, math always was my strong suit(er, case in point, getting as far as I have is WAY beyond math 10 stuff, I know, I\u0027m just finishing it now), I just never finished it the first time round.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-02T06:19:21Z\u0022 title=\u002212/02/2013 06:19  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 2, 2013\u003C/time\u003E by Amram\u003C/strong\u003E\n\u003Cbr\u003Eslightly more concise link for video\n\u003C/span\u003E\n"}]}