{"TopicId":93866,"ForumId":15,"TopicTitle":"[SOLVED] Landing leg problems","CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-20T16:28:25Z","PageNum":1,"Articles":[{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-20T16:28:25Z","Content":"\n\u003Cp\u003EI\u0027ve been following the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/77991-Tutorial-Animated-Landing-Leg-w-Suspension\u0022 rel=\u0022external nofollow\u0022\u003Etutorial from BahamutoD\u003C/a\u003E to try to make SpaceX-style landing legs. I discovered pretty quickly that just doing rigid legs with ModuleAnimateGeneric is not good on high-mass, and large-scale rockets, so I\u0027m trying to make a suspension system like normal legs.\u003C/p\u003E\u003Cp\u003EThe legs start in a vertical position, then swing down to around 55 degrees below horizontal. I have the piston \u0022working\u0022 in the sense that it instantly (no animation) pops out when the deploy animation finishes, with a distance equal to \u0022suspensionUpperLimit\u0022 from the CFG file. I\u0027m not setting up the foot to orient to the ground. The feet appear to collide with the ground properly, and the piston shaft retracts, but doesn\u0027t appear to apply any strength at all, no matter what numbers I use for Spring and Damper. So the craft continues to sink at full velocity until the leg-fin\u0027s collider hits. The foot/piston never retracts via animation, so retracting the legs will leave them sticking out the end (not intentional). \u003C/p\u003E\u003Cp\u003EI made the animation in Blender, with all of the parts except the hinge object rotating with that anamation to deploy. They all have a transform origin right at 0,0,0, and rotate around that origin. The large collider for the fin/leg is from blender, and set to wheelCollidersIgnore. Other colliders are capsules in Unity, one for the piston shaft, and one for the hinge. The hinge collider is attached the root gameObject, and is on the default layer, since it never intersects the wheelcollider.\u003C/p\u003E\u003Cp\u003EAny ideas what I\u0027m doing wrong?\u003C/p\u003E\u003Cp\u003EI\u0027ve been trying all sorts of numbers for suspensionUpperLimit, impactTolerance, suspensionSpring, and suspensionDamper, so below are just what was in the last test.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ModuleLandingLeg\u003Cbr\u003E\u003Cbr\u003E\tanimationName = extend\u003Cbr\u003E\twheelColliderName = wheelCollider\u003Cbr\u003E\tsuspensionTransformName = SYlandingLeg2piston\u003Cbr\u003E\tsuspensionUpperLimit = 1\u003Cbr\u003E\timpactTolerance = 800\u003Cbr\u003E\tsuspensionSpring = 25\u003Cbr\u003E\tsuspensionDamper = 5\u003Cbr\u003E\u003Cbr\u003E\torientFootToGround = false\u003Cbr\u003E\tlandingFootName = SYlandingLeg2foot\u003Cbr\u003E\t// Axis is aligned forward instead of up\u003Cbr\u003E\talignFootUp = false\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ECurrent wheel-collider setup below. I\u0027ve also tried placing it near the \u0022top\u0022 (foot) end of the leg, as well as somewhere in the middle. Right now I have it toward the hinge, with a piston-shaft that is long enough to reach that point. \u003C/p\u003E\u003Cp\u003EThe odd scaling is an artifact of importing with FBX and having to scale the part up in the export from Blender\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/MOK2vDu.jpg\u0022 alt=\u0022MOK2vDu.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EStowed and deployed views (they\u0027re intended for 5m tanks, so they look odd on 2.5m, but I\u0027m testing with a smaller tank to have a better view of the suspension strength):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.necrobones.net/screenshots/KSP/KSP%202014-12-20%2011-12-41-93.jpg\u0022 alt=\u0022KSP%202014-12-20%2011-12-41-93.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.necrobones.net/screenshots/KSP/KSP%202014-12-20%2011-13-09-95.jpg\u0022 alt=\u0022KSP%202014-12-20%2011-13-09-95.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.necrobones.net/screenshots/KSP/KSP%202014-12-20%2011-13-54-58.jpg\u0022 alt=\u0022KSP%202014-12-20%2011-13-54-58.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-14T02:46:40Z\u0022 title=\u002201/14/2015 02:46  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 14, 2015\u003C/time\u003E by NecroBones\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-20T17:50:50Z","Content":"\n\u003Cp\u003ELooks like you\u0027ve got it how it ought to be hierarchy wise. The only problem is that the wheel collider needs to be near the tip of the wing with the raycast sticking out equal to the expected travel of the piston. As it is, it won\u0027t be doing anything. The position of the circle on the wheel collider represents its upper movement limit, and the length of the \u0027tail\u0027 represents is maximum extension. Get that sorted and you\u0027ll have it all working, I\u0027m sure \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-20T21:34:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003ELooks like you\u0027ve got it how it ought to be hierarchy wise. The only problem is that the wheel collider needs to be near the tip of the wing with the raycast sticking out equal to the expected travel of the piston. As it is, it won\u0027t be doing anything. The position of the circle on the wheel collider represents its upper movement limit, and the length of the \u0027tail\u0027 represents is maximum extension. Get that sorted and you\u0027ll have it all working, I\u0027m sure \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhen I try that, the piston comes all the way out, such that the back end of it is where I put the front end of the wheel collider\u0027s suspension line:\u003C/p\u003E\u003Cp\u003EDarn, I thought we were onto something. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: And it still has no spring strength, and compresses in until the main collider hits the ground.\u003C/p\u003E\u003Cp\u003EEDIT 2: I also double-checked that WheelCollidersIgnore is layer 26, and WheelColliders is 27.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.necrobones.net/screenshots/KSP/KSP%202014-12-20%2016-31-31-82.jpg\u0022 alt=\u0022KSP%202014-12-20%2016-31-31-82.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/gQ2J8n5.jpg\u0022 alt=\u0022gQ2J8n5.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-20T21:43:25Z\u0022 title=\u002212/20/2014 09:43  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 20, 2014\u003C/time\u003E by NecroBones\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-21T09:22:11Z","Content":"\n\u003Cp\u003EOh, just noticed that the wheel collider is set to something other than scale 1. They do weird stuff when scaled, so that might be causing the issue too. Also, I\u0027ve found that putting them in layer 26 sometimes results in non functional wheel colliders, so try it back at default if resetting the scale doesn\u0027t work. \u003C/p\u003E\u003Cp\u003EFeel free to package up and send over if you\u0027re still stuck after trying that, though.\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-21T14:32:20Z","Content":"\n\u003Cp\u003EYeah, that looks like it\u0027s not the problem. I tried that and it behaves the same. No dice. Doh!\u003C/p\u003E\u003Cp\u003EIn the screenshot below, you\u0027ll see that I added a \u0022pistonTransform\u0022 in the middle. I tried to animate that to have the leg piston deploy while the leg is swinging around, without animating the piston object itself (per the tutorial\u0027s warning). This makes the MU not compile, with KSP claiming \u0022out of memory\u0022 errors. Very strange. So I put the animation back the way it was for now, but the transform is still there doing nothing.\u003C/p\u003E\u003Cp\u003ESilly question-- What\u0027s the best way to package up the unity object/assets? I haven\u0027t had need of importing/exporting them til now. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I just tried the \u0022export package\u0022. We\u0027ll see how that looks below. EDIT: also did a \u0022save scene as\u0022 below.\u003C/p\u003E\u003Cp\u003EAs an aside, the piston-shaft is quite long. It doesn\u0027t need to be. Originally I had it a lot shorter, and then lengthened it when I thought I might need to put the wheel collider toward the hinge-end of the leg. It\u0027s closer to working properly in that configuration, but the behavior is always the same-- the piston shoots forward to be at the end of the wheel\u0027s suspension line, instead of inside it, and then there\u0027s no suspension strength. \u003C/p\u003E\u003Cp\u003ESo very, very strange. \u003C/p\u003E\u003Cp\u003EBTW, thanks for helping! Hopefully we\u0027ll get this figured out. It feels close... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EHere are the files. The scale in Unity is a bit annoying when importing FBX, but that seems to be the format that works nicely with the animations for my other parts.\u003C/p\u003E\u003Cp\u003EUnity asset export: \u003Ca href=\u0022http://ksp.necrobones.com/files/testing/landing-leg.unitypackage\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/files/testing/landing-leg.unitypackage\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EUnity scene export: \u003Ca href=\u0022http://ksp.necrobones.com/files/testing/landing-leg.unity\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/files/testing/landing-leg.unity\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBlender: \u003Ca href=\u0022http://ksp.necrobones.com/files/testing/SYlandingLeg2.blend\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/files/testing/SYlandingLeg2.blend\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EFBX: \u003Ca href=\u0022http://ksp.necrobones.com/files/testing/SYlandingLeg2.fbx\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/files/testing/SYlandingLeg2.fbx\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ETexture: \u003Ca href=\u0022http://ksp.necrobones.com/files/testing/SYlandingLeg1-Specular.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/files/testing/SYlandingLeg1-Specular.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT: The KSP part as of the last test: \u003Ca href=\u0022http://ksp.necrobones.com/files/testing/landing-leg-part.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/files/testing/landing-leg-part.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Fixed the uploads. Didn\u0027t transfer properly the first time.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/3LHS2zW.jpg\u0022 alt=\u00223LHS2zW.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-21T14:51:31Z\u0022 title=\u002212/21/2014 02:51  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 21, 2014\u003C/time\u003E by NecroBones\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-22T02:11:08Z","Content":"\n\u003Cp\u003ENo worries \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I\u0027ve not actually tried setting a landing leg up myself, but they\u0027re just wheel collider based and sort of within my areas of expertise (if you can call it that).\u003C/p\u003E\u003Cp\u003EThanks for uploading, I\u0027ll have a nose through the assets tomorrow and see what I can find. I\u0027m sure you\u0027re not far off! I just downloaded the part, so I see what you mean about the lack of spring strength - I\u0027m still pretty sure this might be a scale issue, as those radius and distance values are odd to say the least. That the piston extension works is testament to the WC raycast doing its job, as the module is moving the piston, though the travel is way over the top judging from the latest screen grab, so that\u0027s kind of another clue. I\u0027ve struggled with this myself, it can be a nightmare when exports have funny scales and you need an object childed to something that\u0027s way out of whack.\u003C/p\u003E\u003Cp\u003ERegarding the animation export issue, you can get some weird issues when you\u0027ve got an animation in the export, then add some stuff in Unity. I\u0027ve had part toolts throw a similar paddy myself, though your situation may be different.\u003C/p\u003E\n"},{"CreatedByName":"Tiberion","CreatedById":8356,"CreatedDateTime":"2014-12-22T03:04:46Z","Content":"\n\u003Cp\u003EMaking a landing leg with suspension is a huge pain. Maybe even worse than a wheel.\u003C/p\u003E\u003Cp\u003EHere\u0027s some images of the landing leg from my Odin pod. took me forever to get them working even halfway right.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/4oDUQ\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EMODULE\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleLandingLeg\u003C/p\u003E\u003Cp\u003E animationName = Deploy\u003C/p\u003E\u003Cp\u003E wheelColliderName = wheelCollider\u003C/p\u003E\u003Cp\u003E suspensionTransformName = lowerPiston\u003C/p\u003E\u003Cp\u003E orientFootToGround = true\u003C/p\u003E\u003Cp\u003E landingFootName = Foot\u003C/p\u003E\u003Cp\u003E // Axis is aligned forward instead of up\u003C/p\u003E\u003Cp\u003E alignFootUp = true\u003C/p\u003E\u003Cp\u003E suspensionUpperLimit = 0.3\u003C/p\u003E\u003Cp\u003E impactTolerance = 6500\u003C/p\u003E\u003Cp\u003E suspensionSpring = 10\u003C/p\u003E\u003Cp\u003E suspensionDamper = 7\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EwhellCollider is at the bottom of the piston travel, its origin closely matching where the origin of lowerPiston (the leg\u0027s transform and also the silver inner piston model) will be when \u003Cstrong\u003Eextended.\u003C/strong\u003E and the end of the wheelCollider\u0027s \u0022line\u0022 reaching to the Foot when extended. Note that since lowerPiston is the transform in the config, the module moves it and any children along the suspension length.\u003C/p\u003E\u003Cp\u003EThe pistonCollider is the one that will actually touch the ground and travel with the suspension. The Foot itself should not have a collider. ANY Mesh collider that interacts with the wheel collider will probably cause it to fail and let the leg collapse. That is why I have the simple box collider \u0022objCollider\u0022 to provide collision for the upper part of the whole thing.\u003C/p\u003E\u003Cp\u003EMy animation is imported from Blender as \u0022Deploy\u0022 with frames 0 to 99 using the Legacy rig, its contained on the Odinleg2 parent object as an Animation widget.\u003C/p\u003E\u003Cp\u003EMaybe all of that will let you figure out what to do with yours. Its mostly trial and error and trying not to punch things.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-22T12:38:35Z","Content":"\n\u003Cp\u003EOK, got it sorted \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E I\u0027ll try and be concise explaining to ease future reference: Tiberion hit the nail right on the head for your situation with \u0022\u003Cspan style=\u0022color:#333333;\u0022\u003EwheelCollider is at the bottom of the piston travel, its origin closely matching where the origin of lowerPiston (the leg\u0027s transform and also the silver inner piston model) will be when \u003C/span\u003E\u003Cstrong\u003Eextende\u0022 \u003C/strong\u003EYou had some interesting things going on with placement, so I\u0027ve re-rigged: Set the WC transform to the position it wants to be in, rather than using the centre variable to located it. Added a GO called PistonMover, which sits in exactly the same location as the WC and has the piston as a child. The piston is rigged in its extended position by moving it it relative to PistonMover. This is why the feet were in funny positions.\u003C/p\u003E\u003Cp\u003EMost importantly: The Wheel Collider must \u003Cem\u003Enot \u003C/em\u003Ebe a child of the piston. It needs to be in a fixed position. What was happening was the raycast was doing its job, detecting a collision and compressing against the spring value. ModuleLandingGear was doing its job and moving the piston a tiny bit to mirror the compression. The next physics frame, as the WC is a child of the piston that\u0027s just been moved, the cycle happens again. collision, compression, movement - every frame, the WC got moved further away from the floor until the leg collision mesh stopped things going any further, and this is why there appeared to be no spring acting. It\u0027s the most common mistake making wheels actually, I just didn\u0027t spot it in the screen grab.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/4ictjxoym93d0pw/Leg.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003EThis\u003C/a\u003E should be everything re-rigged \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Sorry, I was lazy and didn\u0027t reapply the texture \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWould you mind if I used the model to do a YouTube landing gear tutorial please?\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-22T14:04:23Z","Content":"\n\u003Cp\u003EHey thanks! I wasn\u0027t expecting anyone to figure it out \u0022overnight\u0022 literally. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Yes, please do use it for a video! You\u0027ve definitely earned it. I\u0027ll download it and play with it a bit. I was about to push out a SpaceY update this morning without it, but maybe I\u0027ll try to sneak this in now.\u003C/p\u003E\u003Cp\u003EI had gotten an email notification about the first reply after my last message, so I was going to come in and just talk about the object scales, so this was a huge surprise!\u003C/p\u003E\u003Cp\u003EBut I\u0027ll explain the scaling anyway. The reason the scales look so weird is twofold: First, exporting as FBX requires scaling by 100x for some stupid reason. Secondly, I had scaled the leg up a little in blender via multi-select in object mode, so it scaled the transforms instead of moving the vertices. \u003C/p\u003E\u003Cp\u003EThanks again!\u003C/p\u003E\u003Cp\u003EEDIT: This is silly, but how do I import it into Unity? When I try to \u0022import custom package\u0022, it shows me that there are some materials to import. I don\u0027t see the game objects showing up in the list. Man, I can be such a Unity noob. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT 2: I may try to recreate what you did anyway. I\u0027m thinking about untangling the funky scaling, shorten the piston, etc. And I need to know how to make it work anyway, for the future.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-22T14:24:29Z\u0022 title=\u002212/22/2014 02:24  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 22, 2014\u003C/time\u003E by NecroBones\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-22T14:25:16Z","Content":"\n\u003Cp\u003ENo drama dude, I\u0027m well used to messing about with all things wheel collider now, so pretty much seen it all before. I did mess about with some of the scale stuff a bit, but it didn\u0027t seem to matter here, so false alarm on that one. Shout if you run into any other problems, and thanks for the use of the model \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EOh, btw, you might want to tweak the friction values a bit. The defaults are like super glue - a bit of slip will prevent tripping and sticking. 300 extrem, 150 asym ought to be good figures. Add a little damping too; 5-10 percent of spring value normally works well.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-22T15:05:48Z","Content":"\n\u003Cp\u003EJust updated the zip, it will have had outdated scene in it. Sorry about that!\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-22T15:36:08Z","Content":"\n\u003Cp\u003ENo worries. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks again for all the help. It looks like I have it working just based on what you described. I was really REALLY close, apparently. I untangled the weird scales, re-imported from Blender with a scale of 1 (via Collada/DAE), and redid the animation entirely in Unity. This allowed me to easily telescope the foot outward during the deployment sequence. So far I think it\u0027s working, I just need to tune the spring and damper.\u003C/p\u003E\u003Cp\u003EI see what you mean about the super-glue effect. It sticks quite a lot even with much lower numbers here. \u003C/p\u003E\u003Cp\u003EWow, I might actually have this working and get a copy released today.\u003C/p\u003E\u003Cp\u003EThanks again!\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-22T15:59:56Z","Content":"\n\u003Cp\u003EAwesome, that\u0027s great news. So many people have, and continue to help me, I\u0027m trying to pay it forward as much as I can now I have some knowledge myself. Good call on the animation, I often do the same thing myself. Though I\u0027m finding more and more that I tend to set up the hierarchy before I export, so all I have to do is add some colliders and whatnot, slap some materials on and write the part out. Having the prefab connection intact is really handy too.\u003C/p\u003E\u003Cp\u003EGood luck with the tweaking, you\u0027re on the home stretch now \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-22T19:05:18Z","Content":"\n\u003Cp\u003EAwesome.\u003C/p\u003E\u003Cp\u003EThey\u0027re mostly working now. I have the pistons deploying during the animation, etc. But here\u0027s the remaining weirdness:\u003C/p\u003E\u003Cp\u003E1. The legs animate deploying, and retract properly if you interrupt the deployment. But once deployed, retracting is instantaneous, without animation. They teleport back.\u003C/p\u003E\u003Cp\u003E2. It\u0027s not really saving the deployed state. If I quite the game with a vehicle landed, and come back in, the legs are retracted and it falls onto the engines. \u003C/p\u003E\u003Cp\u003EA little bit of a head-scratcher. I haven\u0027t been able to find a reason for these. They\u0027re not really game-breaking (except if your vehicle falls over or breaks across sessions because the legs are retracted).\u003C/p\u003E\u003Cp\u003EEDIT: And it\u0027s not telescoping anymore. Man, these things are ridiculously touchy.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-22T19:47:01Z\u0022 title=\u002212/22/2014 07:47  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 22, 2014\u003C/time\u003E by NecroBones\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-22T19:59:53Z","Content":"\n\u003Cp\u003EHmmm, that\u0027s not ideal. No funnies in the logs when the parts are compiled or at start of flight?\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-22T20:08:44Z","Content":"\n\u003Cp\u003EHuh, looking at the log:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[ERR 15:00:05.457] WheelCollider requires an attached Rigidbody to function.\u003Cbr\u003E\u003Cbr\u003E[ERR 15:00:05.458] WheelCollider requires an attached Rigidbody to function.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Looks like the stock ones do that too. Must be something else.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-22T20:18:32Z","Content":"\n\u003Cp\u003EYep, that\u0027s perfectly normal. The wheel collider doesn\u0027t understand how KSP has attached it to a rigidbody, so it thinks it isn\u0027t attached to one and throws a warning. Maybe double check the animation length, etc? No warnings in the Unity console when you write the .mu out?\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-22T20:29:10Z","Content":"\n\u003Cp\u003ENope, no errors or warnings. Man, I could swear it was telescoping on my first try after re-doing it from scratch. I\u0027ve had to recreate the animation a few times, as every once in a while, adding too many curve keys or something seems to make the part go back to that \u0022out of memory\u0022 error in KSP. \u003C/p\u003E\u003Cp\u003EAt the moment I\u0027ve simplified the animation not to deploy the piston, and instead start with it extended. Completely rigid. And still teleporting when retracting the leg. I tried changing the wheel collider\u0027s suspension line to be a bit longer or shorter, and tried the animation\u0027s \u0022play automaticall\u0022 checkbox both on and off. Tried various spring and damper values, and lowered the wheel collider\u0027s friction numbers considerably. \u003C/p\u003E\u003Cp\u003EUnfortunately I still haven\u0027t had a chance to look at what you did with it, since I still don\u0027t see a way to import the GOs, just the model and assets.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-22T20:55:19Z","Content":"\n\u003Cp\u003EThe unity scene, if you import it, and the relevant models are there will have everything all nicely rigged up. Wait a minute, how are you animating the piston telescoping? Do you have a GO that\u0027s named as the suspensionTransformName with the piston as a child, and it\u0027s that that gets animated, not the GO named as suspensionTransformName?\u003C/p\u003E\u003Cp\u003EFeel free to send over again, though.\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-22T21:05:18Z","Content":"\n\u003Cp\u003EOK, I can bundle it up again.\u003C/p\u003E\u003Cp\u003EThe pistonMover transform and the WheelCollider are at the same level in the heirarchy. The swing animation is animating the object that is the parent of both of them. In animating the piston (which I have removed, but that\u0027s not making a difference), it is moving the child object (with the piston mesh) under the pistonMover, which in turn has the piston collider and the foot as children. So I\u0027m not animating the pistonMover which referenced in the CFG.\u003C/p\u003E\u003Cp\u003EThis time the animation is built entirely in Unity instead of coming over from Blender. \u003C/p\u003E\u003Cp\u003EUnity package: \u003Ca href=\u0022http://ksp.necrobones.com/files/testing/Leg2.unitypackage\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/files/testing/Leg2.unitypackage\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-12-22T21:07:30Z","Content":"\n\u003Cp\u003EOK, that all sounds perfect. I\u0027ll finish up what I\u0027m doing (which is driving me nuts, but for very different reasons) and have a look.\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-12-23T00:17:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003EOK, that all sounds perfect. I\u0027ll finish up what I\u0027m doing (which is driving me nuts, but for very different reasons) and have a look.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAwesome, thanks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EBTW, I also now updated the DAE and Blend files in case you want to see those:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://ksp.necrobones.com/files/testing/SYlandingLeg2.blend\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/files/testing/SYlandingLeg2.blend\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://ksp.necrobones.com/files/testing/SYlandingLeg2.dae\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/files/testing/SYlandingLeg2.dae\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-01-12T02:16:47Z","Content":"\n\u003Cp\u003EJust a follow-up here. I finally got the legs working (though I\u0027ll have to play a lot with the spring/damper values, as I\u0027m not 100% clear on how they work).\u003C/p\u003E\u003Cp\u003EWhat it came down to was the prefab status, and setting the piston\u0027s origin in Blender to correspond to the top of it, and then creating the hierarchy there BEFORE exporting to Unity. Everything else, I did pretty much the same. But if I made sure it was all nice and clean in Blender first, and maintain the prefab status, then things started working well enough that I could tweak it and get some actual springiness. \u003C/p\u003E\u003Cp\u003EWhat a pain landing legs are. They\u0027re amazingly picky.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-01-12T02:27:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NecroBones\u0022 data-cite=\u0022NecroBones\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EWhat it came down to was the prefab status, and setting the piston\u0027s origin in Blender to correspond to the top of it, and then creating the hierarchy there BEFORE exporting to Unity.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E^I cannot encourage this enough, it makes life so much easier. My entire workflow is based around having the model export ready to be dropped into Unity, colliders, textures and part tools applied, then just being able to click the \u0027write\u0027 button after double checking the config values match and I haven\u0027t typo\u0027d anything. Your second set of landing legs will be much easier \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EGreat to hear that you got it working, though \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-01-14T02:47:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003E^I cannot encourage this enough, it makes life so much easier. My entire workflow is based around having the model export ready to be dropped into Unity, colliders, textures and part tools applied, then just being able to click the \u0027write\u0027 button after double checking the config values match and I haven\u0027t typo\u0027d anything. Your second set of landing legs will be much easier \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003Cp\u003EGreat to hear that you got it working, though \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYep, thanks again for the help! I actually have several sets of legs working now, in testing. The first is always the hardest. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}