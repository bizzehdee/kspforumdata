{"TopicId":129162,"ForumId":70,"TopicTitle":"Extremely low FPS on large crafts","CreatedByName":"mark-o-solo","CreatedById":156347,"CreatedDateTime":"2016-01-03T12:26:54Z","PageNum":1,"Articles":[{"CreatedByName":"mark-o-solo","CreatedById":156347,"CreatedDateTime":"2016-01-03T12:26:54Z","Content":"\n\u003Cp\u003E\nHello,\n\u003C/p\u003E\n\u003Cp\u003E\nI am having trouble with my KSP 1.05 with large crafts. I have pretty much all the popular mods installed like KW rocketry, B9 aerospace, Kolonization system, KAS, TAC life support, EVE, etc., all up to date. And I therefore play with the 64 bit version of the game from unity (otherwise, the 2 ridiculous GB\u00A0 ram of windows do not suffise). The game works just fine, only from time to time do I get a crash. My problem is just that with large crafts, it gets horribly laggy, I get about 1 FPS with a big station, or launching a big craft even less.\u00A0 It cannot be a hardware problem, I have:\n\u003C/p\u003E\n\u003Cp\u003E\nI7 3970x\n\u003C/p\u003E\n\u003Cp\u003E\n16GB RAM DD3 CL8 2666Mhz\n\u003C/p\u003E\n\u003Cp\u003E\nGTX780 Ti\n\u003C/p\u003E\n\u003Cp\u003E\nFor my station, this leads to a big relative motion of the different docked components which then wiggle dangerously. I thought, this might actually be the cause, so I reinforced all with KAS struts in a tedious 1 FPS EVA game, no help. I dont think, this stuff is much too difficult to calculate for the PC, but I suspect, the problem lies with the memory chunks to be transferred between RAM and CPU, once again the FSB or CPU caches being the bottleneck. I also have the feeling, the lagging only comes about when the kolonization system is used, ie. combining all modules necessary for a self sustainable craft...\n\u003C/p\u003E\n\u003Cp\u003E\nCan anyone help me here ? Do you know some trick to make it playable again ?\n\u003C/p\u003E\n\u003Cp\u003E\nTanks\n\u003C/p\u003E\n\u003Cp\u003E\nPS: here is a pic of my latest base rising on its way to the mun, less than 1FPS: \u003Ca href=\u0022https://polybox.ethz.ch/index.php/s/vh17sRZ11fiupHL\u0022 rel=\u0022external nofollow\u0022\u003Ebase\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-03T12:29:02Z\u0022 title=\u002201/03/2016 12:29  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 3, 2016\u003C/time\u003E by mark-o-solo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ericwi","CreatedById":152716,"CreatedDateTime":"2016-01-04T02:26:03Z","Content":"\n\u003Cp\u003E\nThe\u00A0 \u003Cspan style=\u0022color:rgb(20,24,35);font-family:helvetica, arial, sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:19.32px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003EDynamic Texture Loader\u003C/span\u003E\u00A0that was listed last Monday might help. What is your part count?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"mark-o-solo","CreatedById":156347,"CreatedDateTime":"2016-01-04T10:00:27Z","Content":"\n\u003Cp\u003E\nAlright, Ill check it out, thanks for the help.\n\u003C/p\u003E\n\u003Cp\u003E\nThe part count of the base on the picture is about 800, but Id like to launch some even bigger crafts...\n\u003C/p\u003E\n\u003Cp\u003E\nAlright, I tried it, same goes for the active texture management. I get from 5 GB of RAM usage to about 4GB, but that does not seem to be the problem. Also, the problem persists in space, so no smoke, clouds or other textures. It does not seem to be memory related, but the CPU spikes up to about 100% load.\n\u003C/p\u003E\n\u003Cp\u003E\nAny ideas\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-04T11:37:49Z\u0022 title=\u002201/04/2016 11:37  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 4, 2016\u003C/time\u003E by mark-o-solo\u003C/strong\u003E\n\u003Cbr\u003Etried suggestion\n\u003C/span\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2016-01-04T13:17:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222347888\u0022 data-ipsquote-contentid=\u0022129162\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221451901627\u0022 data-ipsquote-userid=\u0022156347\u0022 data-ipsquote-username=\u0022mark-o-solo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, mark-o-solo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAny ideas\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot really: Wait and see what improvements v1.1 brings, ruthlessly prune part count on your designs, OC your CPU, or try a \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/96670-105-ubiozur-welding-ltd-continued-222-2015-11-11/\u0022\u003Ewelding mod\u003C/a\u003E.\u003Cbr\u003E\u003Cbr\u003E\nThe physics engine KSP uses is old, slow, single-threaded and CPU only. As such, it\u0027ll only ever utilise one core, and lag increases almost exponentially with part count.\u003Cbr\u003E\nIf you haven\u0027t already, reducing the physics delta T slider in the settings to minimum might help a little - it\u0027ll make the physics run slower than realtime, but may help framerate.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve said it before, and I\u0027ll say it once again: This games performance\u00A0is abysmal, even on high-end hardware.\u003Cbr\u003E\nI\u0027ve long since given up on building anything \u0026gt;500 parts, 800\u002B is slideshow territory on my machine (I7 \u003Cspan\u003E@\u003C/span\u003E4.3GHz), entirely due to the shoddy CPU-bound physics engine. \u003Cimg alt=\u0022:mad:\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif\u0022 title=\u0022:mad:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nUnfortunately, Squad seems utterly uninterested in using anything but the physics engine built into Unity, and any performance concerns become \u0022Unity issue, can\u0027t fix\u0022.\u003Cbr\u003E\u003Cbr\u003E\nThe upcoming (1.1) port to Unity 5 may improve this, but I\u0027m pretty sceptical. It\u0027s supposedly faster, but AFAIK rigid-body physics is still single-threaded and CPU only.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-04T13:39:42Z\u0022 title=\u002201/04/2016 01:39  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 4, 2016\u003C/time\u003E by steve_v\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"mark-o-solo","CreatedById":156347,"CreatedDateTime":"2016-01-04T22:26:30Z","Content":"\n\u003Cp\u003E\nAlright, I tried the welding \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/96670-105-ubiozur-welding-ltd-continued-222-2015-11-11/\u0022\u003Emod\u003C/a\u003E but it doesnt work at all for me, its extremely buggy.\n\u003C/p\u003E\n\u003Cp\u003E\nOk, so steve_v, you claim, the issue is mostly due to the physics and the crappy thread distribution, right ? Thats quite a shame, since there really is no fix in sight... In that case, I really hope, they switch away from unity or distribute the load otherwise.\n\u003C/p\u003E\n\u003Cp\u003E\nAlthough I must say, that in the task manager several threads light up, could it possibly be different for the 64bit version ?\n\u003C/p\u003E\n"},{"CreatedByName":"Spilled Vial","CreatedById":153712,"CreatedDateTime":"2016-01-05T14:44:46Z","Content":"\n\u003Cp\u003E\nYeah that\u0027s just a limitation within the game. So many parts to load all at once is not very friendly. As mark-o-solo said, if you can find a working version of the welding mod, you can make multiple parts into one and massively reduce part count. That always helps with lag.\n\u003C/p\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2016-01-06T11:24:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222348613\u0022 data-ipsquote-contentid=\u0022129162\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221451946390\u0022 data-ipsquote-userid=\u0022156347\u0022 data-ipsquote-username=\u0022mark-o-solo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 4/01/2016 at 11:26 AM, mark-o-solo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAlthough I must say, that in the task manager several threads light up, could it possibly be different for the 64bit version ?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nKSP is multithreaded... but the physics engine isn\u0027t, and that\u0027s where the bulk of the computation is. AFAIK x64 is the same.\n\u003C/p\u003E\n"},{"CreatedByName":"Boris-Barboris","CreatedById":133181,"CreatedDateTime":"2016-01-06T12:03:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222350595\u0022 data-ipsquote-contentid=\u0022129162\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452079491\u0022 data-ipsquote-userid=\u002269272\u0022 data-ipsquote-username=\u0022steve_v\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n38 minutes ago, steve_v said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nKSP is multithreaded\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNah, barely.\n\u003C/p\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2016-01-06T12:11:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222350616\u0022 data-ipsquote-contentid=\u0022129162\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452081814\u0022 data-ipsquote-userid=\u0022133181\u0022 data-ipsquote-username=\u0022Boris-Barboris\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, Boris-Barboris said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNah, barely.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTrue, but even \u0022barely\u0022 e.g. running audio decoding in a separate thread, technically counts as \u0022multithreading\u0022 \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E. It\u0027s just not multithreaded where it would help performance in any meaningful way.\n\u003C/p\u003E\n"}]}