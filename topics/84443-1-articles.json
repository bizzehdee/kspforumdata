{"TopicId":84443,"ForumId":29,"TopicTitle":"Change of active command pod","CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-09-12T18:11:43Z","PageNum":1,"Articles":[{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-09-12T18:11:43Z","Content":"\n\u003Cp\u003EHi\u003C/p\u003E\u003Cp\u003EIs there something in the API I can hook into when the control module is changed using the GUI \u0027control from here\u0027 button? I would like to trigger some code when the active module is changed. I\u0027m a little lost with this one, though it\u0027s possible I\u0027m just not seeing to wood for the trees.\u003C/p\u003E\u003Cp\u003EMany thanks, as ever.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-09-12T19:32:57Z","Content":"\n\u003Cp\u003EI\u0027m not aware of any sort of callback event, but I\u0027ve hacked together the following that works:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic NamespaceTest\u003Cbr\u003E{\u003Cbr\u003Euint lastControlPart; //what was our control part last frame? using it\u0027s FlightID\u003Cbr\u003E\u003Cbr\u003Epublic void Update()\u003Cbr\u003E{\u003Cbr\u003E//this needs a type check, but the ReferenceTransform of the vessel is the \u003Cbr\u003E//reference transform of the part that gets \u0022Control From Here\u0022. Just have to find a compare that works\u003Cbr\u003Eif(lastControlPart!=FlightGlobals.ActiveVessel.ReferenceTransformID) \u003Cbr\u003E{\u003Cbr\u003E//put your code here that you want to run on change\u003Cbr\u003ElastControlPart = FlightGlobals.ActiveVessel.ReferenceTransformID;\u003Cbr\u003E}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENote that this will fire once when a vessel loads as lastControlPart will initialize as null and so this code will run once on the first update frame.\u003C/p\u003E\u003Cp\u003EIf you put a \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ElastControlPart = FlightGlobals.ActiveVessel.ReferenceTransformID;\u003C/pre\u003E\u003Cp\u003E in your Start(), it should avoid firing on loading the Flight Scene but I have not actually tested that.\u003C/p\u003E\u003Cp\u003EHope that helps,\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-09-13T03:07:59Z","Content":"\n\u003Cp\u003EThanks, I\u0027ll give it a whirl \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}