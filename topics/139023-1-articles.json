{"TopicId":139023,"ForumId":69,"TopicTitle":"Intersect markers disappearing","CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2016-05-05T09:14:22Z","PageNum":1,"Articles":[{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2016-05-05T09:14:22Z","Content":"\n\u003Cp\u003E\nThis issue has been pretty constant for me since 1.1.1, I think. When I\u0027m creating a close approach between two ships in orbit, one of the \u0022intersection markers\u0022 (I\u0027ve seen them called \u0022brown and orange chevrons\u0022) will vanish as I pass it -- usually the brown one, because that\u0027s the one I need the most. I just did a bugtracker search because I wanted to find out what the comments on it were, and maybe to give it an up vote. And I can\u0027t find a bug report on it! Was it in a dev note or something? Or has nobody actually reported it? Or did I miss it somehow?\n\u003C/p\u003E\n\u003Cp\u003E\nThis is not the \u0022marker flickering all over the place\u0022 bug. Even though my orbit crosses the other, I\u0027m only getting one intersect point most of the time. Sometimes, if I thrust, it comes back. Sometimes not.\n\u003C/p\u003E\n\u003Cp\u003E\n(BTW: *I* think the one marker is hot pink, not \u0022brown\u0022.) \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-05T09:28:36Z\u0022 title=\u002205/05/2016 09:28  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 5, 2016\u003C/time\u003E by bewing\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"StyrofoamBoy","CreatedById":162506,"CreatedDateTime":"2016-05-05T19:20:05Z","Content":"\n\u003Cp\u003E\nI am having the same problem. It seems like it\u0027s almost always the markers for intersect 2 that blink in and out. Once I pass intersect 1, the intersect 2 markers come back, but that\u0027s often too late to discover that your trajectory \u0022guess\u0022 was off.\n\u003C/p\u003E\n"},{"CreatedByName":"drapetomaniac","CreatedById":164897,"CreatedDateTime":"2016-05-28T14:16:41Z","Content":"\n\u003Cp\u003E\nYes I am having the exact same problem.\u00A0 I\u0027m running up to date 64 bit on windows.\u00A0 Just as I\u0027m trying to set up my burn to rendezvous the marker disappears.\u00A0 It only displays the orange marker and not the purple one.\u00A0 Before this problem began when there was only one marker displayed it would be the pink one.\u00A0 I never see this now.\u00A0 The problem has persisted through a few reboots.\u00A0 I am a bit worried that no one has commented on this for nearly a month!\n\u003C/p\u003E\n"},{"CreatedByName":"StyrofoamBoy","CreatedById":162506,"CreatedDateTime":"2016-05-28T19:40:25Z","Content":"\n\u003Cp\u003E\nI \u00A0also still having this problem. The only lyrics solution I\u0027ve come up with, \u00A0at this point, is to try and meeting at the first intersect point (which requires more fuel, because of the extra speed) or \u0022guess\u0022 on the separation for the second intersect and then adjust at the apoapsis. After you setup your initial maneuver, warp to the apoapsis. The second intersect point and separation will then show. Usually, I can turn prograde (orbit relative) at the apoapsis and use my RCS to burn a little faster or slower and get the separation to a reasonable distance.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Squelch","CreatedById":115992,"CreatedDateTime":"2016-05-29T12:18:49Z","Content":"\n\u003Cp\u003E\nDoes anyone have a savegame that shows this problem please? Even a screenshot of the relative orbits would be useful in narrowing down under what circumstances this happens.\n\u003C/p\u003E\n"},{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2016-05-29T15:01:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222606411\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464524329\u0022 data-ipsquote-userid=\u0022115992\u0022 data-ipsquote-username=\u0022Squelch\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Squelch said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDoes anyone have a savegame that shows this problem please? Even a screenshot of the relative orbits would be useful in narrowing down under what circumstances this happens.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nReally? It happens 100% of the time. Sure, I can put two ships in orbit and have one target the other, and make a savegame out of it.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen you pass an intersect marker, it will go stale (it will completely unhelpfully show the positive time in the past when you already passed the marker, which you already know perfectly well).\u00A0When you pass the Pe or the Ap, it will disappear completely. When you thrust, it may come back intermittently. But most of the time you will only have one intersect marker, even when the orbits cross.\n\u003C/p\u003E\n\u003Cp\u003E\nFrom what I can tell as a programmer, there are two code paths that both attempt to show intersect markers. One of them works perfectly and the other has a big fat bug in it -- when the code for both should be indentical.\n\u003C/p\u003E\n\u003Cp\u003E\nOK, I stuck it in the bugtracker with a savegame and screenshots:\u00A0\u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/9802\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/issues/9802\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-29T16:08:39Z\u0022 title=\u002205/29/2016 04:08  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 29, 2016\u003C/time\u003E by bewing\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"StyrofoamBoy","CreatedById":162506,"CreatedDateTime":"2016-05-31T17:32:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222606411\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464524329\u0022 data-ipsquote-userid=\u0022115992\u0022 data-ipsquote-username=\u0022Squelch\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/29/2016 at 7:18 AM, Squelch said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDoes anyone have a savegame that shows this problem please? Even a screenshot of the relative orbits would be useful in narrowing down under what circumstances this happens.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have taken a short video of the bug in action and uploaded it to YouTube:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/Q2qylgULD_o?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nThis happens immediately after launch, on vanilla KSP 1.1.2 x64. \u00A0This machine is a quad-core i7, with an AMD graphics card (latest drivers, non-beta).\n\u003C/p\u003E\n"},{"CreatedByName":"Squelch","CreatedById":115992,"CreatedDateTime":"2016-05-31T17:44:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222606593\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464534081\u0022 data-ipsquote-userid=\u0022154251\u0022 data-ipsquote-username=\u0022bewing\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 29/05/2016 at 4:01 PM, bewing said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nOK, I stuck it in the bugtracker with a savegame and screenshots:\u00A0\u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/9802\u0022 rel=\u0022external nofollow\u0022 target=\u0022_blank\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/issues/9802\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222610003\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464715964\u0022 data-ipsquote-userid=\u0022162506\u0022 data-ipsquote-username=\u0022StyrofoamBoy\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 minutes ago, StyrofoamBoy said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI have taken a short video of the bug in action and uploaded it to YouTube:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the issue and the video. These really do help in identifying the behaviour you describe.\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-06-01T09:51:21Z","Content":"\n\u003Cp\u003E\nI\u0027ve been experiencing this issue myself, too, a lot. The \u0022intercept #2\u0022 marker seems to disappear very often.\n\u003C/p\u003E\n\u003Cp\u003E\nI haven\u0027t been able to pin down exactly what the correlation is-- hard to do without having it side by side with 1.0.5. I kinda-sorta feel like it may involve a lower tolerance for inclination difference between the two orbits, but it\u0027s hard to say for sure.\n\u003C/p\u003E\n\u003Cp\u003E\nDoesn\u0027t happen 100% of the time, but does happen very frequently, enough to be a major impact on gameplay.\n\u003C/p\u003E\n"},{"CreatedByName":"OHara","CreatedById":162784,"CreatedDateTime":"2016-07-04T00:54:54Z","Content":"\n\u003Cp\u003E\nI find that the two intercept markers mark the same intersection, with #1 hiding marker #2, about 50% of the time.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTwo lines in 3D space have only an infinitesimal chance of truly intersecting. \u00A0Of course we still want to mark near intersections, and see the corresponding target-vessel positions, and the new online-help does say\u00A0the markers show the \u0022intersection (closest approach)\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nBut finding a closest approach (minimization) is much harder to do robustly than finding a crossing\u00A0(root-finding). \u00A0 In general there are 1--3\u00A0minima in the distances between Kepler orbits, merging and splitting as we adjust our orbit.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022orbitIntersections.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://k-ohara.oco.net/KSP/orbitIntersections.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nToday KSP was usually putting both marks at the closest-approach at 140\u00B0 (in my figure) and often marking the one at 230\u00B0 (the * in my figure) -- a very shallow minimum in distance between orbits, but with a wide catch-basin for a minimization algorithm to find.\n\u003C/p\u003E\n\u003Cp\u003E\nI wanted KSP to find the places where my orbit\u0027s altitude crossed that of the target (triangles in my figure). \u00A0In the presence of a relative inclination, that is not precisely the same as the minimum distance, but for the case of rendezvous it is the altitude-crossing that I want. \u00A0If I correct my orbital\u00A0inclination with a burn at the \u003Cabbr title=\u0022Ascending Node\u0022\u003E\u003Cabbr title=\u0022Ascending Node\u0022\u003E\u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E/\u003Cabbr title=\u0022Descending Node\u0022\u003E\u003Cabbr title=\u0022Descending Node\u0022\u003E\u003Cabbr title=\u0022Descending Node\u0022\u003EDN\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E on the way to rendezvous, the\u00A0altitude crossings will remain at the same heights and times.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen the relative inclination is 0\u00B0\u00A0these altitude crossings are the true\u00A0intersections. \u00A0In the case where our orbit is always above,\u00A0or always below,\u00A0the target we want the single point on our orbit with altitude closest to the corresponding (same phase-angle from \u003Cabbr title=\u0022Ascending Node\u0022\u003E\u003Cabbr title=\u0022Ascending Node\u0022\u003E\u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E) point on the target orbit, and that also nicely fits the description \u0022intersection (closest approach)\u0022.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-04T01:03:45Z\u0022 title=\u002207/04/2016 01:03  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 4, 2016\u003C/time\u003E by OHara\u003C/strong\u003E\n\u003Cbr\u003Eshorten\n\u003C/span\u003E\n"},{"CreatedByName":"Bomoo","CreatedById":78616,"CreatedDateTime":"2016-07-04T15:43:08Z","Content":"\n\u003Cp\u003E\nSimilar problem here. My intersect markers are so spastic and glitchy as to be unusable. Yeah I can\u0027t rendez-vous like this. I don\u0027t think they\u0027ve ever been this broken in all the years I\u0027ve been playing KSP.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-04T15:46:40Z\u0022 title=\u002207/04/2016 03:46  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 4, 2016\u003C/time\u003E by Bomoo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"OHara","CreatedById":162784,"CreatedDateTime":"2016-07-13T02:35:47Z","Content":"\n\u003Cp\u003E\nCross-quoting from :\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/143666-devnote-tuesday-playstation-debut/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\u0026gt; Even if the game does find a second valley, when there are three or more, the question becomes which two did it find?\n\u003C/p\u003E\n\u003Cp\u003E\n... and which do the players want to have marked?\n\u003C/p\u003E\n\u003Cp\u003E\nI think, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57176-taniwha/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257176\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/57176-taniwha/\u0022 rel=\u0022\u0022\u003E@taniwha\u003C/a\u003E, that we\u00A0want the valleys nearest the\u00A0points where our orbit\u0027s altitude crosses that of the target orbit. \u00A0(If our altitude never crosses that of the target, we want just the single global-minimum closest approach, which KSP 1.1.3 finds quite robustly\u00A0already.) \u00A0In the presence\u00A0of inclination, the crossing points are not precisely the same as those valleys, but I think the crossing points are what we want. \u00A0 My instinct would be to\u00A0replace minimization algorithms\u00A0with\u00A0root-finding to get the crossing points, if you have code-history or enough in the\u00A0regression-test suite to tell you what behavior of the old algorithms\u00A0users might depend on.\n\u003C/p\u003E\n\u003Cp\u003E\nAlternative to radial altitude, the altitude\u00A0projected into the plane of the target orbit is a nice criteria for near-intersections, because crossings of that projected altitude\u00A0behave\u00A0nicely when the relative\u00A0inclination crosses 90\u00B0.\n\u003C/p\u003E\n"},{"CreatedByName":"taniwha","CreatedById":57176,"CreatedDateTime":"2016-07-13T12:15:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222606593\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464534081\u0022 data-ipsquote-userid=\u0022154251\u0022 data-ipsquote-username=\u0022bewing\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 30/05/2016 at 0:01 AM, bewing said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nFrom what I can tell as a programmer, there are two code paths that both attempt to show intersect markers. One of them works perfectly and the other has a big fat bug in it -- when the code for both should be indentical.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere is only the one path, executed twice with different starting conditions.\u00A0 The problem is the second attempt does not always clear the intervening local maximum between the two local minima and thus slides back into the first local minimum.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222611191\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464774681\u0022 data-ipsquote-userid=\u0022125662\u0022 data-ipsquote-username=\u0022Snark\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 01/06/2016 at 6:51 PM, Snark said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI haven\u0027t been able to pin down exactly what the correlation is-- hard to do without having it side by side with 1.0.5. I kinda-sorta feel like it may involve a lower tolerance for inclination difference between the two orbits, but it\u0027s hard to say for sure.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhile things may (or may not) have worsened since 1.0.5, I assure you this is nothing new: I\u0027ve experienced it as early as 0.23.5 (if not earlier, but that sticks out in my mind as I was trying to intercept asteroids).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660256\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467593694\u0022 data-ipsquote-userid=\u0022162784\u0022 data-ipsquote-username=\u0022OHara\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 04/07/2016 at 9:54 AM, OHara said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nBut finding a closest approach (minimization) is much harder to do robustly than finding a crossing\u00A0(root-finding)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is not true if you use the right algorithm. BSP is extremely good at finding local minima (or even roots: the ultimate local minimum) and is what KSP uses. More importantly, many root finding algorithms will be destabilized by local minima.\n\u003C/p\u003E\n\u003Cp\u003E\nEven more importantly, local minima are critical for celestial body encounters, and KSP uses the same code for celestial bodies as it does for vessels, though for the initial guesses for the actual \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E transitions. Not only that, but local maxima may be useful for \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E encounter calculations: if the local maximum is still within \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E range of the celestial body\u0027s orbit, you can merge the zones of the two local minima into one zone for searching for an actual encounter.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, using the radial distances (or worse, the projection of such) is not enough: you want the actual mutual closest points of the orbits. One of the conditions for mutually closest points is the tangents at the two points are both perpendicular to the line connecting the two points (the tangents do not need to be parallel, though, and generally won\u0027t be for inclined orbits).\n\u003C/p\u003E\n\u003Cp\u003E\nBTW, it\u0027s not \u0022hot pink\u0022, it\u0027s magenta \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E Far too saturated to be any form of pink. Also, I seem to remember my Crayola fluorescent crayons having separate hot pink and magenta crayons (too many decades ago).\n\u003C/p\u003E\n"},{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2016-07-13T14:49:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222674112\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468412134\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis is not true if you use the right algorithm. BSP is extremely good at finding local minima (or even roots: the ultimate local minimum) and is what KSP uses. More importantly, many root finding algorithms will be destabilized by local minima.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs a mathematician, I have to tell you that is totally the wrong algorithm for calculating intercept points. All you have to do is project one\u00A0ellipse\u00A0into the\u00A0plane of the other. This gives a 100% exact (closed-form)\u00A0solution in every case (where the ellipses actually intersect), and is millions of times easier than finding local minima. Since the game is only showing markers on one of the two ellipses at any\u00A0time, obviously you project the ellipse of the target into the plane\u00A0of the focused ship.\n\u003C/p\u003E\n\u003Cp\u003E\nOnce the two ellipses are coplanar, as \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/162784-ohara/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022162784\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/162784-ohara/\u0022 rel=\u0022external\u0022\u003E@OHara\u003C/a\u003E\u00A0said, the calculation to find the intersection\u00A0points on the focused (non-projected) ellipse is trivial, because you just calculate the (possibly degenerate) root(s).\n\u003C/p\u003E\n\u003Cp\u003E\nObviously the ellipses are also parameterized in time, but once you have the two precise intercept points on the focused\u00A0ellipse, then you do an inverse calculation to get the times of the intersection points. But you also have to force that the intercept time is in the future, which is another bug that KSP fails to sometimes do.\n\u003C/p\u003E\n\u003Cp\u003E\nIf there is no intersection between the two ellipses, then there is another simple closed-form solution to finding the nearest point, that still does not involve calculating local minima.\n\u003C/p\u003E\n\u003Cp\u003E\nOf course, finding the \u0022closest approach\u0022 time is a completely different calculation than solving for\u00A0intersection\u00A0points.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-13T15:18:50Z\u0022 title=\u002207/13/2016 03:18  PM\u0022 data-short=\u00227 yr\u0022\u003EJuly 13, 2016\u003C/time\u003E by bewing\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"OHara","CreatedById":162784,"CreatedDateTime":"2016-07-13T16:15:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222674112\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468412134\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nEven more importantly, local minima are critical for celestial body encounters, and KSP uses the same code for celestial bodies as it does for vessels, though for the initial guesses for the actual \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E transitions. Not only that, but local maxima may be useful for \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E encounter calculations: if the local maximum is still within \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E range of the celestial body\u0027s orbit, you can merge the zones of the two local minima into one zone for searching for an actual encounter.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat seems to be working\u00A0nicely to create the cyan markers. \u00A0The marked\u00A0encounters seem to be the first of local\u00A0minimum in the 3D distance between \u003Cstrong\u003Ebodies\u003C/strong\u003E as a function of\u00A0\u003Cstrong\u003Etime\u00A0\u003C/strong\u003Eon their orbits. \u00A0Finding the first minimum of a non-periodic\u00A0scalar function of a single variable.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222674112\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468412134\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHowever, using the radial distances (or worse, the projection of such) is not enough: you want the actual mutual closest points of the orbits. One of the conditions for mutually closest points is the tangents at the two points are both perpendicular to the line connecting the two points (the tangents do not need to be parallel, though, and generally won\u0027t be for inclined orbits).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat approach for orbital intersection markers would require finding\u00A0the minimum distances\u00A0between the orbital\u003Cstrong\u003E\u00A0paths\u003C/strong\u003E, as opposed to the distance between the bodies following those paths. \u00A0Finding several minima\u00A0of a scalar function of \u003Cstrong\u003Etwo \u003C/strong\u003Evariables, the two independent orbital phases. \u00A0 From behavior of KSP, the code\u00A0seems to find restricted minimum distances,\u00A0between pairs of points on the two orbits that have the same phase angle, collapsing the independent variables into one. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThen we have to pick the one or two minimum distances that are closest (in some sense) to \u003Cstrong\u003Epotential \u003C/strong\u003Eintersections, after orbits are adjusted, based on some other criteria. \u00A0After trying it myself a bit, I find altitude-crossing a fine criterion among many choices, and can find altitude-crossings directly, skipping\u00A0I the minimization step.\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe\u00A0the encounter-finding code was re-used intersection-finding, but maybe it should not be re-used.\u00A0The goals are different. \u00A0 We want encounter marks at the first closest\u00A0approach between two bodies as a function of time. \u00A0We want\u00A0potential-intersection\u00A0marks at both points on our path that potentially cross a target orbit (and potentially crossing is not the same as closest approach).\n\u003C/p\u003E\n"},{"CreatedByName":"taniwha","CreatedById":57176,"CreatedDateTime":"2016-07-15T09:38:19Z","Content":"\n\u003Cp\u003E\nLast I checked, the analytic solution for the intersection of two conic sections (remember, we\u0027re not limited to circles or even ellipses, but hyperbolas too) involves fourth powers and the solution to those things is a ghastly set of several kilobyte equations (according to my attempts with maxima). If that is not the case, then please post that analytic solution here.\n\u003C/p\u003E\n\u003Cp\u003E\nBSP is actually very good at finding intercepts, and more importantly local minima, especially if you know which direction you should go, and for the case of conic sections, that is a small handful of trivial analytic solutions (nothing worse than the good old quadratic). Admittedly, it can get stuck searching for local minima if you don\u0027t know which direction the next guess should take and wind up with the solution being outside the search range, but...\n\u003C/p\u003E\n\u003Cp\u003E\nAs for what\u0027s wanted: the points on the vessel\u0027s orbit that are closest to the target\u0027s orbit. From those points, the position of the target when the vessel is at those points can be determined. If the target is another vessel, then we are done, just draw the markers. If the target is a celestial body, then we need to determine the region around the close approach point where the vessel is within \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E distance of the target\u0027s orbit (assuming it ever is, but that check is trivial). The target\u0027s position is then checked against that range and if within \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E distance, further refinements need to be made to determine if/when the vessel crosses the target\u0027s \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E. Celestial bodies is one reason why I want to get all the local minima: some may be within \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E distance, even if the crossings are not.\n\u003C/p\u003E\n\u003Cp\u003E\nOne very important thing to remember is the only difference between a vessel target and a celestial body target is the size of its \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E (0 for vessels, non-zero for bodies).\n\u003C/p\u003E\n\u003Cp\u003E\nAnother thing: the point of actual closest approach between the vessel and the target (as opposed to the target\u0027s orbit) is of no interest: it does not tell us how to get closer. Showing this closest approach is one mistake that KSP currently makes for celestial body targets, and it does cause a lot of confusion.\n\u003C/p\u003E\n\u003Cp\u003E\n[edit]The reason BSP is very good is, despite possibly getting stuck to one side of a local minima, \u003Cem\u003Eit is always stable\u003C/em\u003E.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-15T09:40:41Z\u0022 title=\u002207/15/2016 09:40  AM\u0022 data-short=\u00227 yr\u0022\u003EJuly 15, 2016\u003C/time\u003E by taniwha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2016-07-15T15:46:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222676973\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468575499\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLast I checked, the analytic solution for the intersection of two conic sections (remember, we\u0027re not limited to circles or even ellipses, but hyperbolas too) involves fourth powers and the solution to those things is a ghastly set of several kilobyte equations (according to my attempts with maxima). If that is not the case, then please post that analytic solution here.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOK, I will do so. But the point is that even now in KSP, hyperbolic transits\u00A0\u003Cstrong\u003E\u003Cem\u003Edo not have intersect markers at all.\u003C/em\u003E\u003C/strong\u003E\u00A0So that is a non-issue. The only time the game currently shows intersect markers is for ellipses anyway, so that is the only analytic solution that is necessary. It is not necessary to do all combinations of all conic sections. It is also possible to simply fall back on BSP for the cases that are not easy to calculate in closed form.\n\u003C/p\u003E\n\u003Cp\u003E\nI need some info about your internal format for storing orbital info, though. Are you using rectilinear coordinates internally? How are you doing your time paramaterization?\u00A0I will look at the persistence file and any other documentation to try to see how the state vector of a ship or celestial body is encoded.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs for what\u0027s wanted: the points on the vessel\u0027s orbit that are closest to the target\u0027s orbit.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo. Intersection points and close approach points are two completely separate calculations. That is why they have completely separate markers on the display. Orange and magenta for intersect markers, and then bigger light blue markers for the close approach markers. If you are trying to merge it all together, that may be why it\u0027s turning into a mess. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnother thing: the point of actual closest approach between the vessel and the target (as opposed to the target\u0027s orbit) is of no interest: it does not tell us how to get closer. Showing this closest approach is one mistake that KSP currently makes for celestial body targets, and it does cause a lot of confusion.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI disagree. I use it constantly. The only problem is the calculation is unstable (the close approach marker tends to jump around a lot, and its value does not vary smoothly). The close approach marker tells me if my projected orbit is late or early to hit a celestial target, and by how much. This can help me adjust my maneuver node, or it tells me how long I have to wait until my window opens. If I know the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E size, and it tells me that the close approach is a few hundred thousand km larger than the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E, then I know that I\u0027m very close. You are correct, of course, that it does not tell you exactly how to get closer, though.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-15T16:36:13Z\u0022 title=\u002207/15/2016 04:36  PM\u0022 data-short=\u00227 yr\u0022\u003EJuly 15, 2016\u003C/time\u003E by bewing\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"OHara","CreatedById":162784,"CreatedDateTime":"2016-07-15T19:12:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222676973\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468575499\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nthe analytic solution for the intersection of two conic sections (remember, we\u0027re not limited to circles or even ellipses, but hyperbolas too) .\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI used the polar-coordinate form, parametrized by the\u00A0phase angle relative to the \u003Cabbr title=\u0022Ascending Node\u0022\u003E\u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E\u003C/abbr\u003E (that is, the\u00A0\u0027true anamoly\u0027 minus the true anamoly at \u003Cabbr title=\u0022Ascending Node\u0022\u003E\u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E\u003C/abbr\u003E for each orbit.) \u00A0That way\u00A0rotating\u00A0orbits into the same plane is simply a matter of ignoring the relative inclination.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003E%!matlab \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Ep1= 1.1; % the \u0027semi latus rectum\u0027 \u00A0p = a*(1-e*e)\u003Cbr\u003E\ne1 = 0.9; % eccentricity\u003Cbr\u003E\nd1 = -0.9; % \u003Cabbr title=\u0022Ascending Node\u0022\u003E\u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E\u003C/abbr\u003E relative to argument of perihelion\u003Cbr\u003E\np2= 7;\u003Cbr\u003E\ne2 = 0.3;\u003Cbr\u003E\nd2 = -1.7;\u003Cbr\u003E\nincl = -0.2; % relative orbital inclination\u003Cbr\u003E\nph = linspace(0,2*pi(),3600); % common phase angle relative to \u003Cabbr title=\u0022Ascending Node\u0022\u003E\u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E\u003C/abbr\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Er1 = p1 ./ (1 \u002B e1*cos(ph-d1));\u003Cbr\u003E\n% x1 = r1.*cos(ph);\u003Cbr\u003E\n% y1 = cos(incl).* r1.*sin(ph);\u003Cbr\u003E\n% z1 = sin(incl).* r1.*sin(ph);\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Er2 = p2 ./ (1 \u002B e2*cos(ph-d2));\u003Cbr\u003E\n% x2 = r2.*cos(ph);\u003Cbr\u003E\n% y2 = r2.*sin(ph);\u003Cbr\u003E\n% z2 = r2.*0;\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003E% Phase ph at intersections\u003Cbr\u003E\n% 1/r1 - 1/r2 = 1/p1 - 1/p2 \u002B e1/p1 cos(ph-d1) - e2/p2 cos(ph-d2)\u003Cbr\u003E\n% \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 = 1/p1 - 1/p2 \u002B [(e1/p1)*cos(d1) - (e2/p2)*cos(d2)]*cos(ph)\u003Cbr\u003E\n% \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u002B [(e1/p1)*sin(d1) - (e2/p2)*sin(d2)]*sin(ph)\u003Cbr\u003E\n% \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 = 1/P \u002B (E/P) cos(ph-D)\u003Cbr\u003E\n% with\u003Cbr\u003E\nP = p1*p2 / (p2 - p1);\u003Cbr\u003E\nE = P * hypot((e1/p1)*cos(d1) - (e2/p2)*cos(d2),...\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 (e1/p1)*sin(d1) - (e2/p2)*sin(d2));\u003Cbr\u003E\nD = atan2((e1/p1)*sin(d1) - (e2/p2)*sin(d2),...\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 (e1/p1)*cos(d1) - (e2/p2)*cos(d2));\u003Cbr\u003E\nphA = D - acos(-1/E);\u003Cbr\u003E\nphB = D \u002B acos(-1/E);\u003Cbr\u003E\nphC = D; % the closest approach if E\u0026lt;1 and altitudes never cross\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nI\u0027m still pondering the rest of what you wrote. Bewing seems obviously right about what we want KSP to show us, but you\u0027ve seen the code that makes it work through all the case you have to cover. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI remain confident that use of altitude-crossing intersections is good advice, at least for the issue\u00A0of picking which of your minima to mark.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-15T19:20:25Z\u0022 title=\u002207/15/2016 07:20  PM\u0022 data-short=\u00227 yr\u0022\u003EJuly 15, 2016\u003C/time\u003E by OHara\u003C/strong\u003E\n\u003Cbr\u003Eand somebody has to tell me what BSP stands for\n\u003C/span\u003E\n"},{"CreatedByName":"taniwha","CreatedById":57176,"CreatedDateTime":"2016-07-16T04:49:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222677282\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468597575\u0022 data-ipsquote-userid=\u0022154251\u0022 data-ipsquote-username=\u0022bewing\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, bewing said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nBut the point is that even now in KSP, hyperbolic transits\u00A0\u003Cstrong\u003E\u003Cem\u003Edo not have intersect markers at all.\u003C/em\u003E\u003C/strong\u003E\u00A0So that is a non-issue.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFlat out wrong \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E While they don\u0027t seem to work for celestial bodies (they were supposed to, but...), they do work for vessels (there may be circumstances under which they do not): I made them work... for 1.1. Because I like to plan waaaaaaay ahead \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nScreen shot taken just now from 1.1.3 (click for larger image) Note how the vessels are not in the the same \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E, even }:\u0026gt;\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://taniwha.org/~bill/ksp/hyperbolic-intercept-1.1.3.png\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022screenshot1626.jpg\u0022 src=\u0022http://taniwha.org/~bill/ksp/hyperbolic-intercept-1.1.3.jpg\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, even if intercept markers didn\u0027t show (at all) for hyperbolic trajectories, you\u0027ve forgotten to whom you are talking \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222677282\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468597575\u0022 data-ipsquote-userid=\u0022154251\u0022 data-ipsquote-username=\u0022bewing\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, bewing said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI need some info about your internal format for storing orbital info, though.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat which is necessary for the circumstances. So just post your analytic solution.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222677282\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468597575\u0022 data-ipsquote-userid=\u0022154251\u0022 data-ipsquote-username=\u0022bewing\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, bewing said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI disagree. I use it constantly.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nActually, you do not, and that is the problem: you do not use close approach markers constantly, but you think you do because KSP tells you that you do even though they switch between close approach and intercept.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222677629\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468609931\u0022 data-ipsquote-userid=\u0022162784\u0022 data-ipsquote-username=\u0022OHara\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, OHara said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nThat way\u00A0rotating\u00A0orbits into the same plane is simply a matter of ignoring the relative inclination.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis does not work because when you rotate an orbit into another plane, you change the location of its foci. Take the obvious example: rotate a circle: it\u0027s one focus (the center) splits in two and the diverge along the \u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E/\u003Cabbr title=\u0022Descending Node\u0022\u003EDN\u003C/abbr\u003E axis.\n\u003C/p\u003E\n\u003Cp\u003E\nI have, however, saved your matlab code as I am curious, though I have my doubts about its validity for relatively inclined orbits due to the focus shifting.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222677629\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468609931\u0022 data-ipsquote-userid=\u0022162784\u0022 data-ipsquote-username=\u0022OHara\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, OHara said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI remain confident that use of altitude-crossing intersections is good advice, at least for the issue\u00A0of picking which of your minima to mark.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAltitude-crossing would be ok if the orbits were always nearly co-coplanar, and if they actually cross.\n\u003C/p\u003E\n\u003Cp\u003E\nMy problem with your stances is the two of you want me to limit the cases in which the targeting code works, and that will not happen. You think you want altitude-crossing intersections, but I know that what you (and everybody else) really want is for the targeting code to \u0022just work\u0022, every time, and under all circumstances.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222677629\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468609931\u0022 data-ipsquote-userid=\u0022162784\u0022 data-ipsquote-username=\u0022OHara\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, OHara said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003Eand somebody has to tell me what BSP stands for \u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBinary Space Partition. It is excellent for root finding, so-so for minima/maxima finding unless you can get some slope information for relatively free.\n\u003C/p\u003E\n"},{"CreatedByName":"OHara","CreatedById":162784,"CreatedDateTime":"2016-07-16T05:35:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222676973\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468575499\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 hours ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs for what\u0027s wanted: the points on the vessel\u0027s orbit that are closest to the target\u0027s orbit. From those points, the position of the target when the vessel is at those points can be determined. If the target is another vessel, then we are done, just draw the markers. If the target is a celestial body, then we need to determine the region around the close approach point where the vessel is within \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E distance of the target\u0027s orbit (assuming it ever is, but that check is trivial). The target\u0027s position is then checked against that range and if within \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E distance, further refinements need to be made to determine if/when the vessel crosses the target\u0027s \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E. Celestial bodies is one reason why I want to get all the local minima: some may be within \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E\u003C/abbr\u003E distance, even if the crossings are not.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAfter rereading, now I\u00A0understand why you want to find closest-approaches between paths\u00A0for finding \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E encounters. \u00A0I suppose you really need the to find the\u00A0segments of the path that lies within one \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E radius of the target path, thus the talk of local maximum distances\u00A0\u00A0I had imagined that KSP propagated the bodies on rails\u00A0forward in time, watching for the minimum distance between bodies as a function of (future) time.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222678280\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468644567\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n33 minutes ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy problem with your stances is the two of you want me to limit the cases in which the targeting code works, and that will not happen.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTake it as two users who noticed that the intercept-finding is very often failing to show the two crossings that we\u00A0came to depend upon, and who gave some careful thought\u00A0to what it means for the code to\u00A0\u0027work\u0027 in cases where there is inclination.\n\u003C/p\u003E\n\u003Cp\u003E\nMy first suggestion was to mark the points that would \u003Cem\u003Ebecome \u003C/em\u003Eintersections, if I later match inclinations as I cross the\u00A0\u003Cabbr title=\u0022Ascending Node\u0022\u003EAN\u003C/abbr\u003E/\u003Cabbr title=\u0022Descending Node\u0022\u003EDN\u003C/abbr\u003E, and the\u00A0analytic solution for that is posted above. \u00A0I\u0027ve left the complete matlab that makes the figures above in the directory k-ohara.oco.net/KSP (alongside where the figures above are hosted). \u00A0\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2016-07-16T07:19:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222678280\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468644567\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy problem with your stances is the two of you want me to limit the cases in which the targeting code works, and that will not happen.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nActually, I don\u0027t. I think my calculation will give you all the intercepts that you get now, and more. Hyperbolic and everything. I\u0027ve been doing it by hand and verifying all my steps. Maybe I should put it in some math software instead, so it\u0027ll go faster.\n\u003C/p\u003E\n\u003Cp\u003E\nI also think I want to say that an iterative approach would also work very well -- and a hell of a lot better than how it\u0027s working now. Project the target orbit into the plane of the focused vessel. Calculate the roots. Since the conic sections have the same focus, this is only a quadratic function -- not fourth powers of anything. This will give you a very close approximation in almost all cases to the nearest points between the conic sections. Put those values as a first guess into BSP. Then iterate. The best\u00A0solution should narrow down from there extremely fast, since it will almost always be within a few meters or something right from the start.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-16T09:04:57Z\u0022 title=\u002207/16/2016 09:04  AM\u0022 data-short=\u00227 yr\u0022\u003EJuly 16, 2016\u003C/time\u003E by bewing\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"taniwha","CreatedById":57176,"CreatedDateTime":"2016-07-16T23:54:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222678363\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468653542\u0022 data-ipsquote-userid=\u0022154251\u0022 data-ipsquote-username=\u0022bewing\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, bewing said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022close_app.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://www.virtualrealitytoursllc.com/pix/close_app.png\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat is not your closest approach to the body, but rather your closest approach to the body\u0027s orbit. ie, a local minimum of the sort I\u0027ve about which I\u0027ve been writing. Remember, the body is traveling faster than your vessel, otherwise the orbits would be reversed (vessel vs body).\n\u003C/p\u003E\n\u003Cp\u003E\nWhen your apoapsis (or periapsis) is as close as you will get to the target\u0027s orbit, then of course the solution is a simple analytic one because you know exactly when you\u0027ll be there, but that will not always be the case (or even all that often, in practice). For one, your apsis being the closest point to the target\u0027s orbit is true only when either your apsis coincides with one of the target\u0027s apsises, the target\u0027s orbit is circular, or your orbits are suitably inclined and your apsis points directly at the tharget\u0027s orbit. If your orbit crosses the target\u0027s orbit and the target\u0027s orbit is circular, then the solution is still nicely analytic (that\u0027s how \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E exits are handled (a circle is just a sphere seen edge-on. Or was it the other way? Bah, go watch Interstellar)). However, if both orbits are non-circular, then figuring things out is far less trivial, especially when relative inclination is involved.\n\u003C/p\u003E\n\u003Cp\u003E\nNow, while many like to arrange so all of their rendezvous and encounters are done with theirs orbits as coplanar as possible (understandable, it makes the math easier), but that is not always the most efficient, and not everybody operates that way, so inclined orbits must be handled properly. As must non-circular target orbits and other non-Hohmann transfers.\n\u003C/p\u003E\n\u003Cp\u003E\nThe basic problem we have here (in this thread in its current state) is that you have a solution looking for a problem. I have a problem with some pretty harsh requirements (number one being it must work (stable, accurate, and fast) in all circumstances, not just the ideal).\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, rest assured that I do have things under control, as stated in my post in this week\u0027s devnotes thread, and I have progressed significantly since the time of posting.\n\u003C/p\u003E\n"},{"CreatedByName":"bewing","CreatedById":154251,"CreatedDateTime":"2016-07-17T00:56:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222679225\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468713289\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe basic problem we have here (in this thread in its current state) is that you have a solution looking for a problem. I have a problem with some pretty harsh requirements (number one being it must work (stable, accurate, and fast) in all circumstances, not just the ideal).\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, rest assured that I do have things under control, as stated in my post in this week\u0027s devnotes thread, and I have progressed significantly since the time of posting.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, after I started this thread and verified that other people were seeing it, I figured you obviously would see the issue it and get on it, so I was perfectly happy to drop it then. I only filed the bug report after Squelch wanted documentation.\n\u003C/p\u003E\n\u003Cp\u003E\nI was still willing to drop it until you pinged me by quoting me on Wednesday. But hey, whatever. I look forward to being pleasantly surprised by the quality of your solution.\n\u003C/p\u003E\n"},{"CreatedByName":"taniwha","CreatedById":57176,"CreatedDateTime":"2016-07-17T01:19:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222679294\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468716994\u0022 data-ipsquote-userid=\u0022154251\u0022 data-ipsquote-username=\u0022bewing\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 minutes ago, bewing said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nwas still willing to drop it until you pinged me by quoting me on Wednesday. But hey, whatever. I look forward to being pleasantly surprised by the quality of your solution.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, I very much hope that I will not disappoint you.\n\u003C/p\u003E\n"},{"CreatedByName":"OHara","CreatedById":162784,"CreatedDateTime":"2016-07-17T20:16:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222679225\u0022 data-ipsquote-contentid=\u0022139023\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468713289\u0022 data-ipsquote-userid=\u002257176\u0022 data-ipsquote-username=\u0022taniwha\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 hours ago, taniwha said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat is not your closest approach to the body, but rather your closest approach to the body\u0027s orbit. ie, a local minimum of the sort I\u0027ve about which I\u0027ve been writing.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh! That is a very subtle point when looking at one image, but now that I know about it is obvious when I move orbits around in the game.\u00A0KSP jumps between putting cyan markers at the closest approach between orbital paths, and closest approach of the bodies.\u00A0But regardless of the criterion for \u0027closest\u0027, KSP shows in text the distance between the bodies.\u00A0In the case you show, the craft was probably even closer to the M\u00FCn a bit earlier than the time corresponding to the cyan markers;.\u00A0(I have to take back that nice thing I said earlier about the code placing the cyan markers.)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022encounterMun.png\u0022 class=\u0022ipsImage\u0022 height=\u0022703\u0022 src=\u0022http://k-ohara.oco.net/KSP/encounterMun.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022orbitEncounter.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://k-ohara.oco.net/KSP/orbitEncounter.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nSomehow\u00A0jumpy cyan near-encounter markers never bothered me before. Having a pair of markers showing the two bodies\u0027 locations at corresponding times was enough to make me happy.\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t find the closest approach of the orbital paths to be a useful concept, but I\u0027ve beaten that dead horse too much already. \u00A0I tried KSP 1.05 and now recognize the same behavior there, so I see you\u0027ve inherited code that takes that approach. \u00A0Probably good that you embrace the approach in the code you are debugging.\n\u003C/p\u003E\n"}]}