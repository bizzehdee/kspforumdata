{"TopicId":149380,"ForumId":15,"TopicTitle":"Creating instant throttle response electric propeller engines?","CreatedByName":"ZodiusInfuser","CreatedById":76163,"CreatedDateTime":"2016-10-06T12:30:37Z","PageNum":1,"Articles":[{"CreatedByName":"ZodiusInfuser","CreatedById":76163,"CreatedDateTime":"2016-10-06T12:30:37Z","Content":"\n\u003Cp\u003E\nHi,\n\u003C/p\u003E\n\u003Cp\u003E\nA\u00A0long time ago I modelled some electric propeller engines for Infernal Robotics, but due to work commitments never got around to implementing them.\u00A0Now that I have free time again,\u00A0I was\u00A0wondering what options I have in terms of modules / plugins to bring them to life? Here\u0027s a pic of the engines:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022_03f47627516c4de58c4b06d882c4f63d\u0022 class=\u0022ipsImage\u0022 height=\u0022613\u0022 src=\u0022https://www.cubbyusercontent.com/pl/IR%20Propellers%20In-Game.png/_03f47627516c4de58c4b06d882c4f63d\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nWhat I would like is for the engines to consume EC based on their RPM, rather than their current throttle setting. The throttle would then give a percentage thrust from zero to the maximum that RPM could deliver (by having an animation control\u00A0blade pitch), allowing for instant throttle response like rocket engines. Does anybody know of a good way to achieve this with either stock modules or Firespitter?\n\u003C/p\u003E\n\u003Cp\u003E\nFrom my searches, FSengine could do what I want, but from testing it seems EC is still dependent on the throttle, which I don\u0027t want, or at least would prefer there to be a minimum EC the engine consumes. Also, there does not appear to be any fuel consumption indicator on the module, and\u00A0its RPM modifier looks to be broken.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\u003Cbr\u003E\n-Zodius\n\u003C/p\u003E\n"},{"CreatedByName":"steedcrugeon","CreatedById":168050,"CreatedDateTime":"2016-10-09T15:56:37Z","Content":"\n\u003Cp\u003E\ncould you not just add to your part config that\u0027s its a resource consumer, and the resource is EC? that way when it\u0027s active i\u0027ll use EC at a fixed rate, admittedly this isn\u0027t directly what you want but its would have a constant minimum consumption.\n\u003C/p\u003E\n\u003Cp\u003E\nYou\u0027d probably have to cook up a little plugin to achieve what you want (which i believe is to have the EC consumption tie into the torque load on the propeller blades (helicopter style) that way you could have your constant RPM and then adjust the blade pitch and have the plugin calculate it\u0027s consumption based on the pitch angle).\n\u003C/p\u003E\n"},{"CreatedByName":"ZodiusInfuser","CreatedById":76163,"CreatedDateTime":"2016-10-09T16:06:08Z","Content":"\n\u003Cp\u003E\nThanks for the suggestion. Having a resource consumer to set a minimum could work. Do you know of a stock module that would achieve this that can be tied to engine activation state? As you say,\u00A0I could then have the engines normal resource consumption be low to\u00A0emulate the propeller blade torque load.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"steedcrugeon","CreatedById":168050,"CreatedDateTime":"2016-10-09T17:17:07Z","Content":"\n\u003Cp\u003E\nthere are two stock module which might be able to do what you need, one is toggable, one is not. \u00A0The latter is first and will definitely add a steady resource consumer to your part (added bonus it makes you part a probe!).\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EMODULE\n\t{\n\t\tname = ModuleCommand\n\t\tminimumCrew = 0\n\t\tRESOURCE\n\t\t{\n\t\t\tname = ElectricCharge\n\t\t\trate = 0.02777778 \t\t// Make this whatever value you want for baseline consumption\n\t\t}\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nNow the second is purely theoretical as i have not tried this myself but, potentially by assigning this module to you part you could make it toggle in game (although it may have other science based side effects).\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EMODULE\n\t{\n\t\tname = ModuleScienceLab\n\t\tcontainerModuleIndex = 0\n\t\tdataStorage = 0\n\t\tcrewsRequired = 0\n\t\tcanResetConnectedModules = false\n\t\tcanResetNearbyModules = false\n\t\tinteractionRange = 0\n\t\tSurfaceBonus = 0.0\n\t\tContextBonus = 0.0\n\t\thomeworldMultiplier = 0.0\n\t\tRESOURCE_PROCESS\n\t\t{\n\t\t\tname = ElectricCharge\n\t\t\tamount = 10\t\t\t// Set this amount to what you want it to draw whilst active\n\t\t}\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nHope one of these work for you for testing purposes. Keep us posted!\n\u003C/p\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2016-10-10T18:50:11Z","Content":"\n\u003Cp\u003E\nWell, I\u0027ve done an electric engine (kind of)\u00A0with stock modules only. But consumption and visible RPM (animation speed) are proportional to throttle. Afterall, ModuleEnginesFX does not have any \u0022RPM\u0022 to compare. But isn\u0027t RPM a function of throttle IRL?\n\u003C/p\u003E\n\u003Cp\u003E\nLook for Impeller part in /ChopShop/Propulsion/Impeller.\u00A0Though config is not very good or anyhow balanced, it does make small drones fly on all stock atmospheric planets.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nRESOURCE_DEFINITION\n{\n  name = Airflow\n  density = 0.005\n  flowMode = NO_FLOW\n  transfer = NONE\n  isVisible = false\n}\nPART\n{\n// --- general parameters ---\nname = lil_buzzer\nmodule = Part\nauthor = Dr. Jet\n\nmesh = model.mu\nscale = 1\n\nnode_attach = 0.0, 0.0, -0.16, 0.0, 0.0, 1.0, 0\n\n// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision\nattachRules = 0,1,0,0,0\n\n// --- editor parameters ---\nTechRequired = advElectrics\nentryCost = 1200\ncost = 400\ncategory = Propulsion\nsubcategory = 0\ntitle = Li\u0027l Buzzer\nmanufacturer = Dr. Jet\u0027s Chop Shop\ndescription = Tiny electric impeller, salvaged from RC model plane.\n\n// --- standard part parameters ---\nmass = 0.01\ndragModelType = default\nmaximum_drag = 0.2\nminimum_drag = 0.1\nangularDrag = 1\ncrashTolerance = 7\nmaxTemp = 1200 \nbulkheadProfiles = srf\n\nMODULE\n\t{\n\t\tname = ModuleEnginesFX\n\t\tengineID = Cruise\n\t\tthrustVectorTransformName = thrustTransform\n\t\texhaustDamage = False\n\t\tignitionThreshold = 0.1\n\t\tminThrust = 0\n\t\tmaxThrust = 5\n\t\theatProduction = 0.1\n\t\tuseEngineResponseTime = True\n\t\tengineAccelerationSpeed = 0.5\n\t\tengineDecelerationSpeed = 0.8\n\t\tflameoutEffectName = flameout\n\t\tpowerEffectName = running_thrust\n\t\tengageEffectName =\n\t\tdisengageEffectName =\n\t\tspoolEffectName = running_turbine\n\t\tengineSpoolIdle = 0.05\n\t\tengineSpoolTime = 2.0\n\t\tEngineType = Turbine\n\t\tPROPELLANT\n\t\t{\n\t\tname = ElectricCharge\n\t\tratio = 5\n\t\tDrawGauge = True\n\t\t}\n\t\tPROPELLANT\n\t\t{\n\t\tname = Airflow\n\t\tratio = 1\n\t\t}\t\t\n\t\tatmosphereCurve\n\t\t{\n\t\tkey = 0 220 0 0\n\t\tkey = 1 200 -55 -55\n\t\tkey = 5 100 0 0\n\t\t}\n\t\t// Jet params\n\t\tatmChangeFlow = False\n\t\tuseVelCurve = False\n\t\tuseAtmCurve = True\n\t\tmachLimit = 0.75\n\t\tmachHeatMult = 3.5\n\t\tvelCurve\n\t\t{\n\t\tkey = 0 1 0 0\n\t\tkey = 0.5 0.8 -0.9460317 -0.9460317\n\t\tkey = 0.8 0.3523809 -1.626984 -1.626984\n\t\tkey = 1 0 -1.761905 -1.761905\n\t\t}\n\t\tatmCurve\n\t\t{\n\t\tkey = 0 0 0 0\n\t\tkey = 0.3 0.18 0.6 0.6\n\t\tkey = 1 0.5 0.4 0.4\n\t\tkey = 5 1 0 0\n\t\t}\n\t}\n\tEFFECTS\n\t{\t\t\n    running_thrust\n\t{\n\tAUDIO\n    {\n      channel = Ship\n      clip = ChopShop/Sounds/rsths13_hubsan\n      volume = 0.0 0.0\n      volume = 1.5 1.5\n      pitch = 0.0 0.2\n      pitch = 1.3 1.3\n      loop = true\n    }\n\t}\n\trunning_turbine\n\t{\n\t\tAUDIO\n\t\t{\n\t\tchannel = Ship\n\t\tclip = ChopShop/Sounds/rsths13_hubsan\n\t\tvolume = 0.0 0.0\n\t\tvolume = 0.6 0.7\n\t\tvolume = 0.85 0.95\n\t\tpitch = 0.3 0.7\n\t\tpitch = 0.55 0.8\n\t\tpitch = 1.0 1.0\n\t\tloop = true\n\t\t}\n\t}\n\t}\nMODULE\n{\n  name = ModuleResourceIntake\n  resourceName = Airflow\n  checkForOxygen = false\n  area = 0.0005\n  intakeSpeed = 0.05\n  intakeTransformName = Intake  \n}\n\nMODULE\n\t{\n\t\tname = FXModuleAnimateThrottle\n\t\tanimationName = Rotate\n\t\tresponseSpeed = 1.0\n\t\tlayer = 2\n\t\tdependOnEngineState = True\n\t\tdependOnThrottle = True\n\t\tweightOnOperational = True\n\t\taffectTime = false\n\t\tbaseAnimSpeed = 0.1\t\t// base \u002B (throttle setting * multiplier)\n\t\tbaseAnimSpeedMult = 1000\n\t\tplayInEditor = False\n\t\tanimWrapMode = 2  \t//\tDefault = 0\tOnce = 1\t\tClamp = 1\tLoop = 2\t\tPingPong = 4\tClampForever = 8\n\t}\nRESOURCE\n{\n    name = Airflow\n    amount = 0.3\n    maxAmount = 0.5\n}\n}\n\u003C/pre\u003E\n\u003Cp\u003E\nP.S. If you will generate any ideas of improving this config (realistic curves settings\u00A0especially) - please share them with me.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-10T19:00:37Z\u0022 title=\u002210/10/2016 07:00  PM\u0022 data-short=\u00227 yr\u0022\u003EOctober 10, 2016\u003C/time\u003E by Dr. Jet\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"mikerl","CreatedById":146921,"CreatedDateTime":"2016-10-10T19:06:41Z","Content":"\n\u003Cp\u003E\nThe stock alternator module could help zero out the ec consumption, if its set to generate the same as consumed. \u00A0It varies by throttle and only works if the engine is on. \u00A0As far as a minimum goes, take a look at module reourceconverter or module generator, both can be toggled and can be set to consume resources. \u00A0Resource converter, can be \u0022throttled\u0022 separately from main ships throttle. \u00A0Not sure how to tie these in to engine activation though. \u00A0Other modules can be used to consume ec like module radiator.\n\u003C/p\u003E\n"},{"CreatedByName":"IronCretin","CreatedById":158162,"CreatedDateTime":"2016-10-11T02:05:53Z","Content":"\n\u003Cp\u003E\nCan the generator module be set to generate negative EC?\n\u003C/p\u003E\n"},{"CreatedByName":"ZodiusInfuser","CreatedById":76163,"CreatedDateTime":"2016-10-11T05:22:28Z","Content":"\n\u003Cp\u003E\nThanks for the comments guys.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222796029\u0022 data-ipsquote-contentid=\u0022149380\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476126401\u0022 data-ipsquote-userid=\u0022146921\u0022 data-ipsquote-username=\u0022mikerl\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, mikerl said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe stock alternator module could help zero out the ec consumption, if its set to generate the same as consumed. \u00A0It varies by throttle and only works if the engine is on. \u00A0As far as a minimum goes, take a look at module reourceconverter or module generator, both can be toggled and can be set to consume resources. \u00A0Resource converter, can be \u0022throttled\u0022 separately from main ships throttle. \u00A0Not sure how to tie these in to engine activation though. \u00A0Other modules can be used to consume ec like module radiator.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUsing an alternator to zero out ec is an interesting thought.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222796560\u0022 data-ipsquote-contentid=\u0022149380\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476151553\u0022 data-ipsquote-userid=\u0022158162\u0022 data-ipsquote-username=\u0022IronCretin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, IronCretin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan the generator module be set to generate negative EC?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYep. Just tested it. Although I cannot see any way to tie it\u0027s state to that of an engine.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI suspect if I want a minimum I will need to have a custom Module created that hooks in to ModuleEngine like the alternator, but only has a fixed consumption based on activation state. Sounds like a simple enough feature, but I haven\u0027t done any coding for KSP before, and have got plenty of other mod parts to be getting on with at the moment.\n\u003C/p\u003E\n\u003Cp\u003E\nBtw, for those interested, I\u0027ve made good progress on getting the parts functional:\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/59359-wip-msis-infernal-robotics-model-rework-v02-pre-release-beta/\u0026amp;page=86\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/59359-wip-msis-infernal-robotics-model-rework-v02-pre-release-beta/\u0026amp;page=86\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"sebi.zzr","CreatedById":81294,"CreatedDateTime":"2016-10-11T13:24:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222796724\u0022 data-ipsquote-contentid=\u0022149380\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476163348\u0022 data-ipsquote-userid=\u002276163\u0022 data-ipsquote-username=\u0022ZodiusInfuser\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, ZodiusInfuser said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYep. Just tested it. Although I cannot see any way to tie it\u0027s state to that of an engine.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI suspect if I want a minimum I will need to have a custom Module created that hooks in to ModuleEngine like the alternator, but only has a fixed consumption based on activation state. Sounds like a simple enough feature, but I haven\u0027t done any coding for KSP before, and have got plenty of other mod parts to be getting on with at the moment.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou can add this parameter to \u0022ModuleGenerator\u0022\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EisThrottleControlled = true\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nBut i think the better idea is to make engine more efficient with higher RPM:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EMODULE\n{\n name = ModuleEnginesFX\n useThrottleIspCurve = True\n\n throttleIspCurve //Modifies Isp based on throttle \n  {\n  key = 0 1  // 0=throttle,1=multiplier to Isp \n  key = 1 *\n  } \n\n throttleIspCurveAtmStrength //Modifies Isp based on throttle \n  {\n  key = 0 1  // 0=pressure in atm,1=how much throttling affects Isp\n  key = 1 *\n  }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIt would be nice if we had access to actual models for testing.\u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"ZodiusInfuser","CreatedById":76163,"CreatedDateTime":"2016-10-11T13:39:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222797134\u0022 data-ipsquote-contentid=\u0022149380\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476192278\u0022 data-ipsquote-userid=\u002281294\u0022 data-ipsquote-username=\u0022sebi.zzr\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, sebi.zzr said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt would be nice if we had access to actual models for testing.\u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not ready to release the parts, but if anyone is interested I am more than happy to PM the version\u00A0testers are using.\n\u003C/p\u003E\n"},{"CreatedByName":"sebi.zzr","CreatedById":81294,"CreatedDateTime":"2016-10-12T20:54:20Z","Content":"\n\u003Cp\u003E\n\u003Cspan\u003EHello \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/76163-zodiusinfuser/\u0026amp;do=hovercard\u0022 data-mentionid=\u002276163\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/76163-zodiusinfuser/\u0022 rel=\u0022\u0022\u003E@ZodiusInfuser\u003C/a\u003E,\u003C/span\u003Ei made this test *.cfg for the \u0022IR_MediumPropeller\u0022:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E// --- Engine Parameters ---\n MODULE\n {\n name = ModuleEngines\n thrustVectorTransformName = thrustTransform\n exhaustDamage = false\n ignitionThreshold = 0.01\n minThrust = 0.5\n maxThrust = 10\n heatProduction = 8\n atmChangeFlow = true\n useThrottleIspCurve = true\n flameout = true\n engineType = Turbine\n\n  PROPELLANT\n   {\n   name = ElectricCharge\n   ratio = 10\n   DrawGauge = true\n   //ignoreForIsp = true\n   }\n\n atmosphereCurve\n  {\n  key = 0 250\n  }\n\n throttleIspCurve\n  {\n  key = 0 0  \n  key = 0.5 1\n  key = 1 1.5 \n  }\n\n throttleIspCurveAtmStrength  //delete this curve for fixed \u0022Isp\u0022\n  {\n  key = 0 1 \n  key = 0.05 0.75\n  key = 1 0 \n  }\n}\n\n//MODULE\n//{\n//  name = FXModuleAnimateThrottle\n//  animationName = MediumPropPitch\n//  dependOnEngineState = false\n//  responseSpeed = 0.5\n//}\n\nMODULE\n{\n  name = FSplanePropellerSpinner\n  propellerName = PropHub\n  rotationSpeed = -250\n  thrustRPM = -100\n  windmillRPM = -30\n  windmillMinAirspeed = 30\n  spinUpTime = 0.2\n  useRotorDiscSwap = 0\n  //rotorDiscFadeInStart = 0.95\n  //rotorDiscFadeInEnd = .95\n  //rotorDiscSpeed = 80\n  //rotorDiscName = PropHub\n  blade1 = Blade1\n  blade2 = Blade2\n  blade3 = Blade3\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nit needs to be balanced,but it\u0027s just a concept how electric propeller\u00A0could work.\u003Cbr\u003E\nI hope this is somehow helpful to you \u003Ca href=\u0022http://sendvid.com/v6wp7z7b\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://sendvid.com/v6wp7z7b\u003C/a\u003E\n\u003C/p\u003E\n"}]}