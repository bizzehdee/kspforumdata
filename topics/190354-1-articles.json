{"TopicId":190354,"ForumId":29,"TopicTitle":"pqsController.GetSurfaceHeight","CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-13T19:46:19Z","PageNum":1,"Articles":[{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-13T19:46:19Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to make a mod to find the highest peak on every celestial body and log it to a text file in both lat/lon and DMS formats but\u00A0pqsController.GetSurfaceHeight keeps throwing an index out of range exception even tho I\u0027m converting degrees to radians.\n\u003C/p\u003E\n\u003Cp\u003E\nobviously my input of 0 to 360 degrees is wrong, so what\u0027s the correct input?\n\u003C/p\u003E\n"},{"CreatedByName":"Aelfhe1m","CreatedById":142910,"CreatedDateTime":"2019-12-13T20:16:45Z","Content":"\n\u003Cp\u003E\nLooks like it\u0027s:\u00A00 \u0026lt;= lon \u0026lt; 360;\u00A00 \u0026lt;= lat \u0026lt; 180\n\u003C/p\u003E\n\u003Cp\u003E\nCribbed from SCANsat/scanutil.cs\u00A0 \u003Ca href=\u0022https://github.com/S-C-A-N/SCANsat/blob/release/SCANsat/SCANutil.cs#L404\u0022 rel=\u0022external nofollow\u0022\u003Eline#404\u003C/a\u003E\u00A0and \u003Ca href=\u0022https://github.com/S-C-A-N/SCANsat/blob/release/SCANsat/SCANutil.cs#L474-L481\u0022 rel=\u0022external nofollow\u0022\u003Elines#474-481\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-14T01:12:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223717040\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576268205\u0022 data-ipsquote-userid=\u0022142910\u0022 data-ipsquote-username=\u0022Aelfhe1m\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Aelfhe1m said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLooks like it\u0027s:\u00A00 \u0026lt;= lon \u0026lt; 360;\u00A00 \u0026lt;= lat \u0026lt; 180\n\u003C/p\u003E\n\u003Cp\u003E\nCribbed from SCANsat/scanutil.cs\u00A0 \u003Ca href=\u0022https://github.com/S-C-A-N/SCANsat/blob/release/SCANsat/SCANutil.cs#L404\u0022 rel=\u0022external nofollow\u0022\u003Eline#404\u003C/a\u003E\u00A0and \u003Ca href=\u0022https://github.com/S-C-A-N/SCANsat/blob/release/SCANsat/SCANutil.cs#L474-L481\u0022 rel=\u0022external nofollow\u0022\u003Elines#474-481\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nthank you for your reply, using the above snippet of code from ScanSat that you provided, my code looks like this but still throws the index error.\u003Cbr\u003E\nnot sure if it\u0027s because I run the method via multi-threading?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Eprivate\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Evoid\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022typ\u0022\u003EScanBody\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022typ\u0022\u003ECelestialBody\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E body\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// Ran via Threadpool\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Etry\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Edouble\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E        LAT  \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E LON \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E ALT \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// highest\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        var           JOBS \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n\n        \u003C/span\u003E\u003Cspan class=\u0022typ\u0022\u003EDebugLog\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Em\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E $\u003C/span\u003E\u003Cspan class=\u0022str\u0022\u003E\u0022Scanning {body.name}...\u0022\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n        \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Econst\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Edouble\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E step \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0.01d\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Efor\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Evar lon \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0d\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lon \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E360d\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lon \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u002B=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E step\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n          \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Efor\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Evar lat \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0d\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lat \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E180d\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lat \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u002B=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E step\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n          \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            var alt \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E getElevation\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n                body\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E body\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n                lon\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lon\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n                lat\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lat\n              \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n            \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ealt \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026lt;=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E ALT\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Econtinue\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n            LAT \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lat\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            LON \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lon\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            ALT \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E alt\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n          \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57416-dmagic/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257416\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57416-dmagic/\u0022 rel=\u0022\u0022\u003E@DMagic\u003C/a\u003E could provide some instruction?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-14T01:35:13Z\u0022 title=\u002212/14/2019 01:35  AM\u0022 data-short=\u00224 yr\u0022\u003EDecember 14, 2019\u003C/time\u003E by Xyphos\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2019-12-14T01:57:15Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/139010-xyphos/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022139010\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/139010-xyphos/\u0022 rel=\u0022\u0022\u003E@Xyphos\u003C/a\u003E - Here you go \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0public double GetAltitudeAtPos(double latitude, double longitude)\u003Cbr\u003E\n{\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 Vector3d bodyUpVector = new Vector3d(1, 0, 0);\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 bodyUpVector = QuaternionD.AngleAxis(latitude, Vector3d.forward) * bodyUpVector;\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 bodyUpVector = QuaternionD.AngleAxis(longitude, Vector3d.down) * bodyUpVector;\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 return bodyPQS.GetSurfaceHeight(bodyUpVector);\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nput it in your class and then use it like this ... Should give you what you are looki8ng for\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\npublic void SomeMethodInSomeClass()\u003Cbr\u003E\n{\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 \u0026lt;.... some code ..... \u0026gt; ........\u003Cbr\u003E\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 _surfaceAltitude = GetAltitudeAtPos(latitude, longitude);\u003Cbr\u003E\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 \u0026lt;.... more code ..... \u0026gt; ........\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-14T02:15:17Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/150019-doctordavinci/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022150019\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/150019-doctordavinci/\u0022 rel=\u0022\u0022\u003E@DoctorDavinci\u003C/a\u003E\u00A0thanks, but it also crashes with index out of range.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nwould being run from an async thread be the culprit?\n\u003C/p\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2019-12-14T03:39:43Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223717131\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576289717\u0022 data-ipsquote-userid=\u0022139010\u0022 data-ipsquote-username=\u0022Xyphos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n44 minutes ago, Xyphos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/150019-doctordavinci/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022150019\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/150019-doctordavinci/\u0022 rel=\u0022\u0022\u003E@DoctorDavinci\u003C/a\u003E\u00A0thanks, but it also crashes with index out of range.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nwould being run from an async thread be the culprit?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have no idea ... all I do know is that the code I posted works no issue since pre KSP v1.2 so I don\u0027t know what to tell you\n\u003C/p\u003E\n\u003Cp\u003E\nDid you reference the PQS controller? ... as in like this\u00A0 \u0027PQS bodyPQS = FlightGlobals.currentMainBody.pqsController;\u0027\n\u003C/p\u003E\n\u003Cp\u003E\nOr have you changed the coordinates over to geo coords from world coords?\n\u003C/p\u003E\n\u003Cp\u003E\nTry this method like it is below and it should work no issue ... if it doesn\u0027t then, like I said, I don\u0027t know what to tell you without looking at exactly what you are trying to do with your code\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\npublic double GetAltitudeAtPos(double latitude, double longitude)\u003Cbr\u003E\n{\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 Vector3 gpsPos = WorldPositionToGeoCoords(FlightGlobals.currentMainBody.GetWorldSurfacePosition((double)latitude, (double)longitude, 0), FlightGlobals.currentMainBody);\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 PQS bodyPQS = FlightGlobals.currentMainBody.pqsController;\u003Cbr\u003E\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 Vector3d bodyUpVector = new Vector3d(1, 0, 0);\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 bodyUpVector = QuaternionD.AngleAxis(gpsPos.x, Vector3d.forward) * bodyUpVector;\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 bodyUpVector = QuaternionD.AngleAxis(gpsPos.y, Vector3d.down) * bodyUpVector;\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 return bodyPQS.GetSurfaceHeight(bodyUpVector);\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: I didn\u0027t even consider the possibility that you are trying to do this while not in the flight scene so there is that ...\n\u003C/p\u003E\n\u003Cp\u003E\nThe above code works as tested in the flight scene and is based off of the code that is in vessel movers move vessel function that keeps the vessel at the same height from the terrain when moving it around, preventing vessels crashing through the terrain surface\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-14T03:56:56Z\u0022 title=\u002212/14/2019 03:56  AM\u0022 data-short=\u00224 yr\u0022\u003EDecember 14, 2019\u003C/time\u003E by DoctorDavinci\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-14T05:05:55Z","Content":"\n\u003Cp\u003E\nI don\u0027t understand the difference between world position and regular lon/lat?\n\u003C/p\u003E\n\u003Cp\u003E\nthe mod is supposed to run only from the tracking station, not in flight on a vessel.\n\u003C/p\u003E\n\u003Cp\u003E\nthe PQS is referenced in the celestial body that is passed to the method via parameter, it\u0027s not null.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-14T05:06:41Z\u0022 title=\u002212/14/2019 05:06  AM\u0022 data-short=\u00224 yr\u0022\u003EDecember 14, 2019\u003C/time\u003E by Xyphos\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2019-12-14T05:32:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223717150\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576299955\u0022 data-ipsquote-userid=\u0022139010\u0022 data-ipsquote-username=\u0022Xyphos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Xyphos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI don\u0027t understand the difference between world position and regular lon/lat?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe World Pos deal converts a double precision Vector3d to a Vector3 that Unity can use ... Unity can only use Vector3\u0027s unless you write your own coordinate system on top of Unity and convert back to Vector3\u0027s when you need to use a Vector function inside the game engine\n\u003C/p\u003E\n\u003Cp\u003E\nIn order to use the double precision longitude and latitude numbers you will get out of KSP (doubles \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E) they need to be converted to single precision values (floats), however in the case of vector math the vector must be converted, not just the numbers ... TL DR; you need to create a new Vector3 out of the Vector3d that the KSP coordinate system uses\n\u003C/p\u003E\n\u003Cp\u003E\nBasically look at the gpsPos.x and gpsPos.y ... They are floats that were created by converting a vector3d into a vector3\n\u003C/p\u003E\n\u003Cp\u003E\nAnd then we use those floats (gpsPos.x and gpsPos.y) in the creation of a new vector3d called bodyUpVector that utilizes the PQS system to get the altitude and return a double precision number\n\u003C/p\u003E\n\u003Cp\u003E\nYes, Unity can be odd \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe code I posted above does this while in the flight scene, perfectly might I add \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u00A0 ... No idea how to get it to work in the tracking station though\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-14T05:41:34Z\u0022 title=\u002212/14/2019 05:41  AM\u0022 data-short=\u00224 yr\u0022\u003EDecember 14, 2019\u003C/time\u003E by DoctorDavinci\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-14T10:03:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223717153\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576301548\u0022 data-ipsquote-userid=\u0022150019\u0022 data-ipsquote-username=\u0022DoctorDavinci\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, DoctorDavinci said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe code I posted above does this while in the flight scene, perfectly might I add \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u00A0 ... No idea how to get it to work in the tracking station though\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nwell then, I guess my \u0027simple\u0027 logger mod just got more complex; I\u0027ll try to get it to work in the tracking station but if I can\u0027t, I\u0027ll just re-write it for flight and hyperedit some probes in orbit just to scan from there.\n\u003C/p\u003E\n\u003Cp\u003E\nthanks for your input, I\u0027ll keep you posted on what becomes of it.\n\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2019-12-15T02:30:26Z","Content":"\n\u003Cp\u003E\nShould work fine in the tracking station. Not sure about running on a different thread, though, you might have some weird errors pop up because of it.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-16T05:54:11Z","Content":"\n\u003Cp\u003E\nUpdate: the altitude method works fine, but it really doesn\u0027t like to be multithreaded. the index errors cease when it\u0027s run normally, but the scanner freezes the game until the scan is completed. I\u0027m going to have to find another way.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-12-16T05:57:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223717742\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576475651\u0022 data-ipsquote-userid=\u0022139010\u0022 data-ipsquote-username=\u0022Xyphos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Xyphos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUpdate: the altitude method works fine, but it really doesn\u0027t like to be multithreaded. the index errors cease when it\u0027s run normally, but the scanner freezes the game until the scan is completed. I\u0027m going to have to find another way.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUnity is not thread safe.\u00A0 Try using CoRoutines\n\u003C/p\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2019-12-16T06:53:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223717742\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576475651\u0022 data-ipsquote-userid=\u0022139010\u0022 data-ipsquote-username=\u0022Xyphos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Xyphos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUpdate: the altitude method works fine, but it really doesn\u0027t like to be multithreaded. the index errors cease when it\u0027s run normally, but the scanner freezes the game until the scan is completed. I\u0027m going to have to find another way.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo unless you are getting into DOTS and able to rewrite some of the core of KSP to designate which thread is\u00A0the main then you will have pauses as unity switches between threads\n\u003C/p\u003E\n\u003Cp\u003E\nYes, Unity can utilize multithreading... no, it\u0027s not easy to get it to work ... and, like I mentioned above, unless you have access to the KSP code and able to rewrite portions of it you will continue to have the issue of KSP locking up since KSP has not been set up to be multithreaded (even though Squad has made this claim)\n\u003C/p\u003E\n\u003Cp\u003E\nThe Unity project itself must be configured to utilize multithreading as well as having your code designated as usable in a separate thread\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: This might help ...\u00A0\u003Ca href=\u0022https://docs.unity3d.com/Manual/JobSystemMultithreading.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.unity3d.com/Manual/JobSystemMultithreading.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-16T07:05:26Z\u0022 title=\u002212/16/2019 07:05  AM\u0022 data-short=\u00224 yr\u0022\u003EDecember 16, 2019\u003C/time\u003E by DoctorDavinci\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2019-12-16T09:45:18Z","Content":"\n\u003Cp\u003E\nThe only way to do this practically is using coroutines to run the calculation over time. SCANsat basically does this by generating the maps over time.\n\u003C/p\u003E\n\u003Cp\u003E\nDOTS or any of the Unity Job system isn\u0027t a possibility. All of the DOTS systems are still in experimental form in Unity 2019.1, and none of the packages are included with KSP. It wouldn\u0027t matter anyway, since the PQS height calculations all use regular Unity game objects and so wouldn\u0027t be accessible from a different thread.\n\u003C/p\u003E\n\u003Cp\u003E\nDOTS has very strict limitations on how the code must be designed to work with multithreading. KSP (and KSP 2 in all likelihood) was designed long before that was a thing for Unity, so it will never be available in any significant way.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-16T18:40:31Z","Content":"\n\u003Cp\u003E\nWell, thank you all for teaching me about Coroutines.\n\u003C/p\u003E\n\u003Cp\u003E\nhere\u0027s what I have so far, in a dev branch but it\u0027s behaving a bit wonky and I can\u0027t figure out why. The attached screenshot is after the scan completes, but it seems to complete too early around 27% (and aborts?)\u003Cbr\u003E\nunless my progress indicator\u00A0math is wrong?\u003Cbr\u003E\u003Ca href=\u0022https://github.com/Xyphos/KSP_PeakScan/blob/dev/PeakScan.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Xyphos/KSP_PeakScan/blob/dev/PeakScan.cs\u003C/a\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cimg alt=\u0022tSPI1QY.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002256.25\u0022 height=\u0022576\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/tSPI1QY.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2019-12-16T20:12:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223717981\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576521631\u0022 data-ipsquote-userid=\u0022139010\u0022 data-ipsquote-username=\u0022Xyphos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Xyphos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWell, thank you all for teaching me about Coroutines.\n\u003C/p\u003E\n\u003Cp\u003E\nhere\u0027s what I have so far, in a dev branch but it\u0027s behaving a bit wonky and I can\u0027t figure out why. The attached screenshot is after the scan completes, but it seems to complete too early around 27% (and aborts?)\u003Cbr\u003E\nunless my progress indicator\u00A0math is wrong?\u003Cbr\u003E\u003Ca href=\u0022https://github.com/Xyphos/KSP_PeakScan/blob/dev/PeakScan.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Xyphos/KSP_PeakScan/blob/dev/PeakScan.cs\u003C/a\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Ca href=\u0022https://i.imgur.com/tSPI1QY.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022tSPI1QY.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002256.25\u0022 height=\u0022576\u0022 width=\u00221024\u0022 src=\u0022https://i.imgur.com/tSPI1QY.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI suggest changing the yield return new waitforseconds(0.01f) in the DoScan coroutine to yield return new waitforfixedupdate();\n\u003C/p\u003E\n\u003Cp\u003E\nThis will allow for the scan to happen every physics tick instead of multiple times per physics tick ... it will also help with slower computers as the timing between each physics calc will change depending on if your using a potato vs a decent computer ... fixed update is tied to physics updates which are tied to the processing speed of the computer running the pickle (.dll ... dill ... dill pickle\u00A0\u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E)\n\u003C/p\u003E\n\u003Cp\u003E\nHope this helps ......\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-16T20:18:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223718009\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576527148\u0022 data-ipsquote-userid=\u0022150019\u0022 data-ipsquote-username=\u0022DoctorDavinci\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, DoctorDavinci said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nrunning the pickle (.dll ... dill ... dill pickle\u00A0\u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nthanks!\n\u003C/p\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2019-12-16T20:26:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223718013\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576527537\u0022 data-ipsquote-userid=\u0022139010\u0022 data-ipsquote-username=\u0022Xyphos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Xyphos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nthanks!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo problem ... Any other question you have feel free to ask as what you are doing with your mod is along the lines of what I\u0027ve been doing in OrX Kontinuum, albeit your mods purpose, ie getting the highest altitude of a given point to be displayed to the user, is not part of it\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m doing the same sort of deal in W[ind/s] to simulate updrafts for hang gliding as well as ocean currents for Scuba Kerb ... scuba diving is a thing in KSP now\u00A0\u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-16T20:35:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223718018\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576527989\u0022 data-ipsquote-userid=\u0022150019\u0022 data-ipsquote-username=\u0022DoctorDavinci\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 minutes ago, DoctorDavinci said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNo problem ... Any other question you have feel free to ask as what you are doing with your mod is along the lines of what I\u0027ve been doing in OrX Kontinuum, albeit your mods purpose, ie getting the highest altitude of a given point to be displayed to the user, is not part of it\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m doing the same sort of deal in W[ind/s] to simulate updrafts for hang gliding as well as ocean currents for Scuba Kerb ... scuba diving is a thing in KSP now\u00A0\u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe mod\u0027s original purpose was to locate the highest peak on \u003Cu\u003Eevery\u003C/u\u003E celestial body from the tracking station and log it to a text file.\n\u003C/p\u003E\n\u003Cp\u003E\nbut plans change;\u00A0now I\u0027m thinking of making it a part module (currently for command modules during testing, will transition to the Stock M700 Survey Scanner later) that only scans the current orbiting body.\n\u003C/p\u003E\n\u003Cp\u003E\nwhen I get it working properly, I intend on having it set a Stock Waypoint at the highest peak, and maybe even send some science data back.\n\u003C/p\u003E\n\u003Cp\u003E\nlanding vessels at these peaks would save \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E for landing and takeoff \u00A0but would require some precision piloting to achieve.\n\u003C/p\u003E\n\u003Cp\u003E\nI got this idea from a youtube video I saw, someone completed the Jool 5 Challenge in a \u0026lt; 7tonne \u003Cabbr title=\u0022Single Stage to Orbit\u0022\u003ESSTO\u003C/abbr\u003E SpacePlane but he landed on their highest peaks to do it, so I wanna give it a shot too, and maybe even beat the lowest mass record\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-16T20:36:53Z\u0022 title=\u002212/16/2019 08:36  PM\u0022 data-short=\u00224 yr\u0022\u003EDecember 16, 2019\u003C/time\u003E by Xyphos\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2019-12-16T20:54:45Z","Content":"\n\u003Cp\u003E\nThat is actually a pretty good idea\n\u003C/p\u003E\n\u003Cp\u003E\nI assume you\u0027re using 1 offset GPS point per cardinal direction to calculate the highest of the 9 during scan and if this is the case you could easily add in a landing difficulty indicator based on the difference in altitude of each of the GPS points\n\u003C/p\u003E\n\u003Cp\u003E\nIf you were to happen to do this then your mod would be the first mod that can utilize the challenge creator I made in OrX Kontinuum ... there already is short track racing and dakar racing built in with the BD Armory challenge builder going to be released in the next week or so\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAdding in a challenge type based on\u00A0your mod idea would be fairly easy ... let me know if you\u0027re interested in discussing this further\u00A0\u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nEDIT: I don\u0027t mean integrating your mod into OrX K, just a challenge deal that your mod can interface with\n\u003C/p\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-16T21:00:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223718035\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576529685\u0022 data-ipsquote-userid=\u0022150019\u0022 data-ipsquote-username=\u0022DoctorDavinci\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, DoctorDavinci said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI assume you\u0027re using 1 offset GPS point per cardinal direction to calculate the highest of the 9 during scan and if this is the case you could easily add in a landing difficulty indicator based on the difference in altitude of each of the GPS points\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have no clue what any of that means\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nand I\u0027ll seriously consider interfacing, I\u0027ve done interfaces with MechJeb before so it\u0027s possible.\n\u003C/p\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2019-12-16T21:12:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223718038\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576530002\u0022 data-ipsquote-userid=\u0022139010\u0022 data-ipsquote-username=\u0022Xyphos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, Xyphos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI have no clue what any of that means\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nand I\u0027ll seriously consider interfacing, I\u0027ve done interfaces with MechJeb before so it\u0027s possible.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s easier than you may think ... I just include an extension method you can hook into and OrX K will not need to be a dependancy for your mod\n\u003C/p\u003E\n\u003Cp\u003E\nWould probably need to put one into your mod as well so OrX K can talk to your mod but that is trivial, I can write one of those for you in a matter of minutes\n\u003C/p\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-16T21:14:44Z","Content":"\n\u003Cp\u003E\nI meant, that 1 GPS point.... 9 directions, etc. I didn\u0027t understand.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve done non-dependency interfaces with MechJeb\u00A0before through System.Reflection\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-16T21:14:55Z\u0022 title=\u002212/16/2019 09:14  PM\u0022 data-short=\u00224 yr\u0022\u003EDecember 16, 2019\u003C/time\u003E by Xyphos\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2019-12-16T21:25:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223718048\u0022 data-ipsquote-contentid=\u0022190354\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576530884\u0022 data-ipsquote-userid=\u0022139010\u0022 data-ipsquote-username=\u0022Xyphos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 minutes ago, Xyphos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI meant, that 1 GPS point.... 9 directions, etc. I didn\u0027t understand.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo how I am figuring out wind and updraft direction is by taking the current gps point of the active vessel (the glider) and then checking 8 gps points (N, NW, W, SW, S, SE, E, NE) around that gps point to get the terrain altitude at each of them (I plan to increase the amount of scan points to 68 or more)\n\u003C/p\u003E\n\u003Cp\u003E\nI then take those altitudes,\u00A0calculate the highest and lowest points and through some math calculate a vector for the wind direction and any updrafts for the glider to rise on\n\u003C/p\u003E\n\u003Cp\u003E\nYou could use the same idea for calculating how rough of a landing it would be based off of a bunch of terrain altitude calcs in the general area of the scanned gps coordinates your mod just ran in the DoScan coroutine\n\u003C/p\u003E\n\u003Cp\u003E\nTheoretically you could tell a player how rough the terrain is in that area\n\u003C/p\u003E\n\u003Cp\u003E\nMost of the code you would need to do this you already have\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-16T21:30:12Z\u0022 title=\u002212/16/2019 09:30  PM\u0022 data-short=\u00224 yr\u0022\u003EDecember 16, 2019\u003C/time\u003E by DoctorDavinci\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Xyphos","CreatedById":139010,"CreatedDateTime":"2019-12-16T21:55:06Z","Content":"\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 width=\u0022480\u0022 data-embed-src=\u0022https://www.youtube.com/embed/UPAgP0uupwk?feature=oembed\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nCurrent Source code:\u00A0\u003Ca href=\u0022https://github.com/Xyphos/KSP_PeakScan/blob/fc93a7294bb281c53cca30edcacf2768488cbaf9/PeakScan.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Xyphos/KSP_PeakScan/blob/fc93a7294bb281c53cca30edcacf2768488cbaf9/PeakScan.cs\u003C/a\u003E\n\u003C/p\u003E\n"}]}