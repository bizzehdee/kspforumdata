{"TopicId":85238,"ForumId":29,"TopicTitle":"Unity Adding Bad Transform and Rotation to Sun Panel Model","CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-22T22:58:35Z","PageNum":1,"Articles":[{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-22T22:58:35Z","Content":"\n\u003Cp\u003EFor some reason, either Unity or the FBX export is adding a weird transform into my model. I\u0027ve made animations before without a problem. The only difference is that I\u0027m using an Empty \u0022game object\u0022 in Blender upon which to create the model. I\u0027m doing this to make solar panels which is kind of convoluted. You must place the panels on a specific local Z-axis in order to track the sun correctly. This model does track the sun correctly after deployment.\u003C/p\u003E\u003Cp\u003EI\u0027ve provided a link to my Blender file below, with textures and FBX export file.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleDeployableSolarPanel\u003C/p\u003E\u003Cp\u003E animationName = Scene\u003C/p\u003E\u003Cp\u003E resourceName = ElectricCharge\u003C/p\u003E\u003Cp\u003E sunTracking = true\u003C/p\u003E\u003Cp\u003E raycastTransformName = panel\u003C/p\u003E\u003Cp\u003E pivotName = panel\u003C/p\u003E\u003Cp\u003E chargeRate = 1\u003C/p\u003E\u003Cp\u003E powerCurve\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E key = 206000000000 0 0 0\u003C/p\u003E\u003Cp\u003E key = 13599840256 1 0 0\u003C/p\u003E\u003Cp\u003E key = 68773560320 0.5 0 0\u003C/p\u003E\u003Cp\u003E key = 0 10 0 0\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/x5ibo7gbbuqw9at/PanelTest.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003ERevised Blender file\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBlender image. The manipulator is showing LOCAL (not global transforms).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/xSfLczr.png\u0022 alt=\u0022xSfLczr.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/ozOw33u.png\u0022 alt=\u0022ozOw33u.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EFrom Blender. How the sequence is supposed to appear:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/zZiPunS.png\u0022 alt=\u0022zZiPunS.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/Oo146Rf.png\u0022 alt=\u0022Oo146Rf.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/zZiPunS.png\u0022 alt=\u0022zZiPunS.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/WNpsynt.png\u0022 alt=\u0022WNpsynt.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/hpxgw32.png\u0022 alt=\u0022hpxgw32.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EHow it appears in Unity and KSP (in KSP, it has correct textures and material):\u003C/p\u003E\u003Cp\u003EIn the fourth image, the panel is straight down. It then rotates (image 5). It then rotates on its center axis and rotates up to the left before rotating into the final, correct position.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/3XUlCxE.png\u0022 alt=\u00223XUlCxE.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/uXzMbLm.png\u0022 alt=\u0022uXzMbLm.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/fVwL7bw.png\u0022 alt=\u0022fVwL7bw.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/B7X4fu2.png\u0022 alt=\u0022B7X4fu2.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/ECFOjF0.png\u0022 alt=\u0022ECFOjF0.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/d278jLZ.png\u0022 alt=\u0022d278jLZ.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/TEMcipI.png\u0022 alt=\u0022TEMcipI.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/tMDrVLf.png\u0022 alt=\u0022tMDrVLf.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhat am I doing wrong?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-23T04:00:18Z\u0022 title=\u002209/23/2014 04:00  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 23, 2014\u003C/time\u003E by Apollo13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-22T23:06:34Z","Content":"\n\u003Cp\u003Eopen the animation window CTRL-6. find the animation curves, right click in the left panel where you see the color coded curve entries, and set interpolation to Quarternion instead of Euler.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-22T23:11:16Z\u0022 title=\u002209/22/2014 11:11  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 22, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-22T23:41:39Z","Content":"\n\u003Cp\u003Esorry, Unity loves itty bitty buttons. it\u0027s the tiny symbol on the right side of the left panel. It defaults to Euler. Once you set it to Quarternion, the curve will look odd, but the animation should play correctly.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/YVg0qSV.jpg\u0022 alt=\u0022YVg0qSV.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-22T23:43:46Z","Content":"\n\u003Cp\u003EIt\u0027s already set to Quaternion. I guess I\u0027ll try Euler.\u003C/p\u003E\u003Cp\u003EEDIT: I just tried Euler and Quaternion. the Unity video preview window still showed the erroneous animation. Was I supposed to Save something before exiting the Animation window?\u003C/p\u003E\u003Cp\u003EAlso, there was no individual interpolation like your example. There was an interpolation for \u0022panel: rotation\u0022\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/qRbcC0o.png\u0022 alt=\u0022qRbcC0o.png\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-22T23:49:32Z\u0022 title=\u002209/22/2014 11:49  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 22, 2014\u003C/time\u003E by Apollo13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-23T01:00:52Z","Content":"\n\u003Cp\u003Eok I see what\u0027s the issue;\u003C/p\u003E\u003Cp\u003Eyou have scale keys in there. from a different angle, you can see the moving part is not bending down, but becoming super stretched in one direction. it\u0027s because you didn\u0027t reset your scales on the pieces. Scrubb through the animation and you will see the scales changing drastically. You have to reset the scales on the pieces in Blender to 1 or 100%, then key the animation and export.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/lh0lJvO.jpg\u0022 alt=\u0022lh0lJvO.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-23T01:11:13Z\u0022 title=\u002209/23/2014 01:11  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 23, 2014\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-23T02:08:23Z","Content":"\n\u003Cp\u003EWhen I set the X and Y scales to 1.0 in Blender, the plane becomes a 2x2 square. I don\u0027t want a 2x2 square. I tried locking scaling and changing the Dimensions; the Scaling changed anyway.\u003C/p\u003E\u003Cp\u003EI rekeyed using LocRot and LocRotScale; none of those changed the outcome. the scaling doesn\u0027t change in Blender; only in Unity.\u003C/p\u003E\u003Cp\u003Ethis is frustrating....................\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-23T03:01:39Z\u0022 title=\u002209/23/2014 03:01  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 23, 2014\u003C/time\u003E by Apollo13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-23T03:20:15Z","Content":"\n\u003Cp\u003EI don\u0027t mean set it back to a cube, I mean reset the scale so whatever scale changes you made to get to the shape becomes the new 1 scale. I don\u0027t know what Blender calls this operation.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-23T03:39:39Z","Content":"\n\u003Cp\u003EWhen I created the Plane shape, these were my Scale and Dimensions in Blender.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/PFuGzlG.png\u0022 alt=\u0022PFuGzlG.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/Clq5HxX.png\u0022 alt=\u0022Clq5HxX.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ESetting the Scale to 1.0 for X, Y, Z, causes this shape to happen and the Dimensions to change as well.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/93oyHSG.png\u0022 alt=\u002293oyHSG.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/wE9Teak.png\u0022 alt=\u0022wE9Teak.png\u0022\u003EG]\u003C/p\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-09-23T03:42:59Z","Content":"\n\u003Cp\u003ESelect the object, hit control\u002BA and select scale. That will bake the scale 1:1:1 but keep it the same size.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-23T03:47:56Z","Content":"\n\u003Cp\u003EYeah, I just discovered and tried that a few minutes ago. No joy. I cleared all keyframes. I then rekeyed (Location, rotation).\u003C/p\u003E\u003Cp\u003EI\u0027m trying to put into practice what you provided previously.\u003C/p\u003E\u003Cp\u003EHere\u0027s the FBX file that was created and I imported to Unity:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/ixr9nt5hf28rqcn/soltest.fbx?dl=0\u0022 rel=\u0022external nofollow\u0022\u003EFBX file\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/x5ibo7gbbuqw9at/PanelTest.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003ERevised Blender file\u003C/a\u003E with textures\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-23T04:01:10Z\u0022 title=\u002209/23/2014 04:01  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 23, 2014\u003C/time\u003E by Apollo13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-23T04:37:13Z","Content":"\n\u003Cp\u003EI exported from the blender file and the FBX still contains key frames in scale, even though in the blender scene it looks like there are only position and rotation key frames. I don\u0027t know why it is this way, but it\u0027s something that needs to be fixed in Blender before export. I don\u0027t know enough blender to help on that side. there\u0027s a \u0022Dimensions\u0022 in Blenders, that sounds like a local scale or something. You need to get all the pieces such that when imported to Unity, their scales are all 1,1,1 when childed to the world. I would break all the pieces out of the heirarchy and reset their scales and dimensions to 1; edit the polygons to the shapes you need. then reconstruct the heirarchy, key the animation and export.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-23T12:29:45Z","Content":"\n\u003Cp\u003EOK. I\u0027ll give that a try. I just don\u0027t understand why Blender is adding these deformations. I sure as hell didn\u0027t add them.\u003C/p\u003E\u003Cp\u003EUnfortunately, I must be away from my computer until Saturday, so I\u0027ll experiment on Sunday.\u003C/p\u003E\u003Cp\u003EThank you to you and raidernick for your patience and assistance.\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2014-09-23T12:56:05Z","Content":"\n\u003Cp\u003EI just realized that \u0022Dimensions\u0022 section probably means the pieces are still primitives instead of polygons. In Max there\u0027s option to convert a primitive (box, sphere, etc) to editable polygons, it\u0027s good idea to convert all primitives to polygons before exporting.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-23T13:23:05Z","Content":"\n\u003Cp\u003EIn Blender, those are polygons. When you go into Edit mode, you can view and modify the individual polygons that shapes are made from, including faces, edges, and vertices. \u0022Dimensions\u0022 are the size of the part in Blender units.\u003C/p\u003E\u003Cp\u003EIt\u0027s frustrating that Blender is adding those deformations during export to FBX.\u003C/p\u003E\n"}]}