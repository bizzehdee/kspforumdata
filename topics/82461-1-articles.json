{"TopicId":82461,"ForumId":55,"TopicTitle":"Small Change in Jet Engine Behaviour - Big Leap for Kerbalkind!","CreatedByName":"DocMoriarty","CreatedById":57433,"CreatedDateTime":"2014-08-22T13:21:10Z","PageNum":1,"Articles":[{"CreatedByName":"DocMoriarty","CreatedById":57433,"CreatedDateTime":"2014-08-22T13:21:10Z","Content":"\n\u003Cp\u003EWhile working on my documentation about space planes in KSP and testing VTOL\u0027s I came upon something in the simulation of jet engines which is really bad in terms of flying VTOL\u0027s. It would be easy to change, yet not changing the overall behaviour of jet engines.\u003C/p\u003E\u003Cp\u003ESome definitions for the coming formulas:\u003C/p\u003E\u003Cp\u003EST = Set Thrust (current thrust input set by user and shown on gauge)\u003C/p\u003E\u003Cp\u003ECT = Current Thrust (current engines thrust value)\u003C/p\u003E\u003Cp\u003ETL = Thrust Limiter Factor (current thrust limiter setting 0.0-1.0)\u003C/p\u003E\u003Cp\u003ETF = Time Factor (constant depending on how long thrust changes are supposed to take and the simulation cycle duration)\u003C/p\u003E\u003Cp\u003EMTC = Max Thrust Delta per Simulation Cycle\u003C/p\u003E\u003Cp\u003EMy guess is that the formula for CT changes per simulation cycle currently is as follows:\u003C/p\u003E\u003Cp\u003ECT = CT \u002B (ST*TL-CT)/TF\u003C/p\u003E\u003Cp\u003EThis causes \u003Cstrong\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003Ebig changes in thrust setting to take as long as small changes\u003C/span\u003E\u003C/strong\u003E because it takes always the same amount of cycles regardless of the value of change in thrust (actually never gets to finish the change). To reproduce that just launch a jet engine, right click and watch what happens and how long it takes until thrust value is stable after a small or big change of thrust. Keep in mind that especially for small changes the change in thrust at the end is not visible due to 1 digit precision in thrust value when looking at the engines right-click window. This is ok for normal jet operation since tiny changes in speed don\u0027t really matter that much.\u003C/p\u003E\u003Cp\u003EIt\u0027s realistic that jet engines take a long time to get from idle RPM to max RPM and this is what the algorithm is supposed to simulate. But \u003Cstrong\u003E\u003Cspan style=\u0022color:#00FF00;\u0022\u003Esmall changes should be much quicker\u003C/span\u003E\u003C/strong\u003E and more accurate. Also a thrust limited jet engine should react much quicker. So the thrust delta should be calculated depending on an engine specific RPM/s (delta RPM per second) value.\u003C/p\u003E\u003Cp\u003EA better and more realistic algorithm would therefore look like this:\u003C/p\u003E\u003Cp\u003ECT = CT \u002B (Sgn(ST*TL-CT)*Min(Abs(ST*TL-CT),MTC)))/TF\u003C/p\u003E\u003Cp\u003EIt simply makes acceleration linear using a max thrust delta per cycle to limit changes so that small changes are executed quickly and big changes take their time as usual. Also heavily thrust limited engines like the one in the Kopter example would INTENTIONALLY react a lot quicker which would make it a lot easier to fly the VTOL only models while the overall performance of jet engines would stay the same with their slow response to major input.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.docmoriarty.com/ksp/gfx/ex_ssx_kopter_v_1_05_02.jpg\u0022 alt=\u0022ex_ssx_kopter_v_1_05_02.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.docmoriarty.com/ksp/mods/ssx\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.docmoriarty.com/ksp/mods/ssx_kopter_v_1_06.craft\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnd without a fix it\u0027s practically impossible to fly a model like the Dragonfly precise enough to actually pick something up with the claw.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.docmoriarty.com/ksp/gfx/ex_ssx_dragonfly_v_1_01_01.jpg\u0022 alt=\u0022ex_ssx_dragonfly_v_1_01_01.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.docmoriarty.com/ksp/mods/ssx\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.docmoriarty.com/ksp/mods/ssx_dragonfly_v_1_01.craft\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"thereaverofdarkness","CreatedById":75673,"CreatedDateTime":"2014-08-22T16:41:30Z","Content":"\n\u003Cp\u003EIf this would make VTOLs both easier AND more realistic then I\u0027m all for it! I\u0027m okay with them being a little difficult but I feel like they\u0027re too much at current, considering how comparatively easy everything else is.\u003C/p\u003E\n"},{"CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2014-08-22T16:54:49Z","Content":"\n\u003Cp\u003EAgreed. The most difficult thing about VTOLs is how long the jet engines take to respond to changes in thrust\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-08-22T16:54:53Z","Content":"\n\u003Cp\u003EOf course the real formula is likely more complex as it must take framerate into account. But that\u0027s not too important.\u003C/p\u003E\u003Cp\u003EI guess this assumes drastical reduction of the TF constant, otherwise it would slow down large changes and leave small changes as they were. Apart of that, I think it would be useful. Today when I need a VTOL to increase thrust fast by small amount, I need to \u0022overshoot\u0022 the throttle, then return it to desired position. It works somehow but it\u0027s very imprecise.\u003C/p\u003E\n"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2014-08-22T17:55:08Z","Content":"\n\u003Cp\u003EYou could also try clipping little rocket motors into the jets (they don\u0027t have to be clipped). Then map the intake cutoff to an action group. that will instantly cut the jets thrust.\u003C/p\u003E\u003Cp\u003EThen action group the rockets to a separate key and use both. After some practice they complement each other perfectly. \u003C/p\u003E\u003Cp\u003EWatch any \u0027Cupcake landers\u0027 videos. That\u0027s what he uses.\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-08-22T18:03:26Z","Content":"\n\u003Cp\u003ESo much for so few, air breathing/jet engines use:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EengineAccelerationSpeed = 0.30\u003C/p\u003E\u003Cp\u003EengineDecelerationSpeed = 0.50\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E(here is values for my own mk2 engine which is very slow to respond to throttle on purpose)\u003C/p\u003E\u003Cp\u003Estock basic jet engine values are:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EengineAccelerationSpeed = 0.12\u003C/p\u003E\u003Cp\u003EengineDecelerationSpeed = 0.21\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt really makes an engine to be slow or not, easier than your formula.\u003C/p\u003E\u003Cp\u003EFeel free to change the part\u0027s values to whatever suits your needs, and even create a \u0022VTOL trainer\u0022 jet engine, with very small values, just to get a rocket type jet engine.\u003C/p\u003E\n"},{"CreatedByName":"DocMoriarty","CreatedById":57433,"CreatedDateTime":"2014-08-23T05:15:52Z","Content":"\n\u003Cp\u003ESure i can mod just about anything and could even write a mod that moves my VTOL and anything else by pure magic with unimaginable awesome graphical effects!\u003C/p\u003E\u003Cp\u003EThis post though is to show that with a little change in stock KSP it would improve the VTOL experience a lot without changing the overall performance of jet engines.\u003C/p\u003E\n"},{"CreatedByName":"Kegereneku","CreatedById":66154,"CreatedDateTime":"2014-08-24T08:34:08Z","Content":"\n\u003Cp\u003EAlternative : Suggest to make a different type of jet engine specifically meant for VTOL with a very low reaction-time.\u003C/p\u003E\u003Cp\u003EPreferably something that can\u0027t be used at high-speed (or say with an higher fuel consumption)\u003C/p\u003E\n"}]}