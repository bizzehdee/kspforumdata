{"TopicId":92801,"ForumId":16,"TopicTitle":"Stock SAS hates FAR... why?","CreatedByName":"Elmetian","CreatedById":32720,"CreatedDateTime":"2014-12-14T09:49:43Z","PageNum":1,"Articles":[{"CreatedByName":"Elmetian","CreatedById":32720,"CreatedDateTime":"2014-12-14T09:49:43Z","Content":"\n\u003Cp\u003ESince 0.25 arrived I\u0027ve been struggling to get FAR and the SAS to play nicely. It seems that there are a few things going on:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EThe stock SAS overshoots, causing an annoying pitch oscillation\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EWhen stability is achieved with a PID controller, the SAS still \u0027slips\u0027 from a given heading rather than applying the required deflection\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe SAS doesn\u0027t use more than about 50% deflection of the control surfaces most of the time\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe SAS doesn\u0027t seem to make much use of reaction wheels even when outside of the atmosphere\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo far I haven\u0027t received a satisfactory explanation for why this is happening. I\u0027ve experienced this in four separate installs now, and tested with only FAR installed. I\u0027ve tried \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/96654-PID-Tune-%28No-Longer-Available%29\u0022 rel=\u0022external nofollow\u0022\u003Eregex\u0027s PID tune\u003C/a\u003E and the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/100073-0-25-Pilot-Assistant-Atmospheric-piloting-aids-0-9-1-2-%28Dec-7%29\u0022 rel=\u0022external nofollow\u0022\u003EPilot Assistant mod\u003C/a\u003E. Both have helped, but they don\u0027t completely get rid of the problem. I\u0027ve tried making my Procedural Wings control surfaces larger, moving them farther from the CoM, and reducing the deflection tweakable but the SAS still refuses to use all of the deflection available to it. This is especially annoying as during ascent and reentry SSTOs often require large pitch inputs to hold them at the desired angle. I can hold 100% positive pitch manually with my 360 controller, so why can\u0027t the SAS?\u003C/p\u003E\u003Cp\u003EI also have my suspicions that with FAR installed the stock SAS isn\u0027t using reaction wheels properly. When I\u0027m ascending through the upper atmosphere (40-69km) where the control surfaces have little effect, the nose will slip from where I left it even with the SAS engaged. It only takes a small input from the reaction wheel to correct it, so why isn\u0027t the SAS doing this? I\u0027ve noticed that in space the SAS sometimes doesn\u0027t fight against torque induced by slightly unbalanced RCS placement as well. What\u0027s going on?\u003C/p\u003E\u003Cp\u003EI\u0027ve been playing KSP since 0.14 and honestly I\u0027m bored with the stock game. Without FAR, KSP seems almost ridiculously forgiving and I don\u0027t want to uninstall it or even downgrade to NEAR. Having to fiddle endlessly with PID tuners and manually flying things for the entire duration of flights is really frustrating me. It doesn\u0027t feel fun anymore, or even challenging, it\u0027s just another chore. I haven\u0027t sent anything past LKO in a couple of months now. I guess you could say this is me desperately hoping there\u0027s a community fix in the works for this problem.\u003C/p\u003E\n"},{"CreatedByName":"Wanderfound","CreatedById":112611,"CreatedDateTime":"2014-12-14T10:07:27Z","Content":"\n\u003Cp\u003EWhile not a complete solution...what settings are you using on the PID tuner? Cutting kp to 1/3rd of default sorts the wobble, but I also chop clamp to 1/2 default; this seems to improve the \u0022hold\u0022 ability.\u003C/p\u003E\u003Cp\u003EA bit of manual input is still required if you\u0027re trying to hold a large AoA (i.e. \u0026gt; 15\u00C3\u201A\u00C2\u00B0), but it\u0027ll happily hold a vertical climb if the plane has the TWR to maintain it.\u003C/p\u003E\n"},{"CreatedByName":"Elmetian","CreatedById":32720,"CreatedDateTime":"2014-12-14T10:46:27Z","Content":"\n\u003Cp\u003EVery similar settings. I only needed to reduce Kp by 1/5 to get rid of the wobble. Also increasing Kd and Ki helped with the settling time, and I reduced the clamp to 1/3 of the original value.\u003C/p\u003E\u003Cp\u003EThese settings keep my SSTO on course up until about 20km altitude, but after that the SAS slips and I have to keep my hand on the controls to hold the nose at 5\u00C3\u201A\u00C2\u00B0 to 10\u00C3\u201A\u00C2\u00B0 on the navball (AoA is smaller still). It\u0027s not as though it\u0027s particularly nose-heavy, or doesn\u0027t have enough control authority to maintain this attitude. I can hold the nose up without much effort with just the control surfaces. I\u0027ve even slapped on a large reaction wheel for the high altitude flying, but the SAS hardly uses it, which is ridiculous.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-14T10:53:57Z\u0022 title=\u002212/14/2014 10:53  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 14, 2014\u003C/time\u003E by Narcosis\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"panzer1b","CreatedById":95108,"CreatedDateTime":"2014-12-14T16:35:55Z","Content":"\n\u003Cp\u003EWhile the aerodynamic models are neat, the reason i ditched FAR really quick was the overkill amount of work it takes to get a simple craft to fly properly....\u003C/p\u003E\u003Cp\u003EWish they release a version of FAR that has no GUI, no nothing extra, no features but pure aerodynamics (profile based drag, more plausible atmosphere, ect).\u003C/p\u003E\u003Cp\u003EGuess its time to start coding another spin off from FAR (similar to NEAR, but with no features whatsoever but the atmospheric/drag changes)\u003C/p\u003E\n"},{"CreatedByName":"Elmetian","CreatedById":32720,"CreatedDateTime":"2014-12-14T17:34:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022panzer1b\u0022 data-cite=\u0022panzer1b\u0022\u003E\u003Cdiv\u003Ethe reason i ditched FAR really quick was the overkill amount of work it takes to get a simple craft to fly properly....\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDon\u0027t get me wrong, I like FAR. It adds a level of realism that makes building aircraft much more interesting. Making them fly nicely isn\u0027t too difficult as long as you follow the same principles RL aircraft have to, but then more complicated aircraft have a lot of software to keep them flying straight, and without the SAS FAR becomes a real pain the arse to use.\u003C/p\u003E\u003Cp\u003EI\u0027ve noticed that in orbit the SAS often seems to only be doing half a job. If I apply full negative pitch and then take my finger off of the W key, the SAS immediately tries to stop this rotation by inputting full positive pitch (just as it used to). However, once the rotation has been stopped, the SAS sometimes removes this input and forgets where the \u0027target\u0027 direction was. Because it doesn\u0027t bother applying any other inputs, the nose slides straight past the target direction and the craft is left rotating as though there was no SAS at all.\u003C/p\u003E\n"},{"CreatedByName":"bandi94","CreatedById":33424,"CreatedDateTime":"2014-12-14T17:38:25Z","Content":"\n\u003Cp\u003EI started using FAR 2 days ago , i had the same problem : with SAS activated a nasty wobble gets place.\u003C/p\u003E\u003Cp\u003EActually after you get the basics it\u0027s not hard to lift things.\u003C/p\u003E\u003Cp\u003E- use a launch TWR around 1.4-1.6\u003C/p\u003E\u003Cp\u003E- when you reach 50-100m/s perform a 5-10 degree turn\u003C/p\u003E\u003Cp\u003E- wait for your prograde vector to catch up\u003C/p\u003E\u003Cp\u003E- follow the prograde vector up to 25-30km\u003C/p\u003E\u003Cp\u003E- you can do whatever you want.\u003C/p\u003E\u003Cp\u003EI had to send 2 probes to Mun , after a bit of re-design , the rocket launched all alone , after i did the 5 degree turn the rocket by himself ( no SAS or anything ) followed the prograde vector. So it was something like \u0022look no hands\u0022\u003C/p\u003E\u003Cp\u003ESecond thing i lifted was an MKS module for my Mun base , same thing after doing a 5 degree turn the rocket almost followed the prograde vector hoverwer this time i was needed to do some adjustments ( the rocket tended to deviate a bit from the prograde vector but with some adjustments it was easy to hold it manually).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-14T17:40:59Z\u0022 title=\u002212/14/2014 05:40  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 14, 2014\u003C/time\u003E by bandi94\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Hodo","CreatedById":78218,"CreatedDateTime":"2014-12-14T21:09:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022panzer1b\u0022 data-cite=\u0022panzer1b\u0022\u003E\u003Cdiv\u003EWhile the aerodynamic models are neat, the reason i ditched FAR really quick was the overkill amount of work it takes to get a simple craft to fly properly....\u003Cp\u003EWish they release a version of FAR that has no GUI, no nothing extra, no features but pure aerodynamics (profile based drag, more plausible atmosphere, ect).\u003C/p\u003E\u003Cp\u003EGuess its time to start coding another spin off from FAR (similar to NEAR, but with no features whatsoever but the atmospheric/drag changes)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo you want FAR but not FAR?\u003C/p\u003E\u003Cp\u003ESorry FAR isn\u0027t that complex, if it will fly in real life it will fly in FAR. I have built some amazingly stupid designs that work in FAR, some better than others. The trick is knowing how things actually work and taking your time with them. If you slap together something willy-nilly like and don\u0027t pay attention to the CoM and CoL then yes you will have issues. But some of the best aircraft on Earth fly well because someone took time to do the right thing and figure out how it works, why it works and how to improve on it. \u003C/p\u003E\u003Cp\u003EI flew before the PID tuner and the pilot assistant, and I still can fly without it, I just turn off SAS and fly manually using trim, you know like a real plane.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bandi94\u0022 data-cite=\u0022bandi94\u0022\u003E\u003Cdiv\u003EI started using FAR 2 days ago , i had the same problem : with SAS activated a nasty wobble gets place.\u003Cp\u003EActually after you get the basics it\u0027s not hard to lift things.\u003C/p\u003E\u003Cp\u003E- use a launch TWR around 1.4-1.6\u003C/p\u003E\u003Cp\u003E- when you reach 50-100m/s perform a 5-10 degree turn\u003C/p\u003E\u003Cp\u003E- wait for your prograde vector to catch up\u003C/p\u003E\u003Cp\u003E- follow the prograde vector up to 25-30km\u003C/p\u003E\u003Cp\u003E- you can do whatever you want.\u003C/p\u003E\u003Cp\u003EI had to send 2 probes to Mun , after a bit of re-design , the rocket launched all alone , after i did the 5 degree turn the rocket by himself ( no SAS or anything ) followed the prograde vector. So it was something like \u0022look no hands\u0022\u003C/p\u003E\u003Cp\u003ESecond thing i lifted was an MKS module for my Mun base , same thing after doing a 5 degree turn the rocket almost followed the prograde vector hoverwer this time i was needed to do some adjustments ( the rocket tended to deviate a bit from the prograde vector but with some adjustments it was easy to hold it manually).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou don\u0027t want to launch at that high of 1.4-1.6, you may want a little bit lower.\u003C/p\u003E\n"},{"CreatedByName":"Wanderfound","CreatedById":112611,"CreatedDateTime":"2014-12-14T22:17:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Narcosis\u0022 data-cite=\u0022Narcosis\u0022\u003E\u003Cdiv\u003EVery similar settings. I only needed to reduce Kp by 1/5 to get rid of the wobble. Also increasing Kd and Ki helped with the settling time, and I reduced the clamp to 1/3 of the original value.\u003Cp\u003EThese settings keep my SSTO on course up until about 20km altitude, but after that the SAS slips and I have to keep my hand on the controls to hold the nose at 5\u00C3\u201A\u00C2\u00B0 to 10\u00C3\u201A\u00C2\u00B0 on the navball (AoA is smaller still). It\u0027s not as though it\u0027s particularly nose-heavy, or doesn\u0027t have enough control authority to maintain this attitude. I can hold the nose up without much effort with just the control surfaces. I\u0027ve even slapped on a large reaction wheel for the high altitude flying, but the SAS hardly uses it, which is ridiculous.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not entirely sure what\u0027s going on, then; I just don\u0027t get that problem unless I\u0027m trying to climb to extreme altitude with insufficient speed. How fast are you usually moving when you hit 20,000m? I normally flatten off at ~15,000m and start cranking through the supersonic, with the aim of hitting hypersonic (\u0026gt;Mach 5) as I pass 30,000m.\u003C/p\u003E\u003Cp\u003EMaybe try a test flight? A basic \u003Cstrong\u003E\u003Cem\u003EKerbodyne \u003C/em\u003E\u003C/strong\u003Eship (\u003Cem\u003E\u003Cstrong\u003EWedgetail XXV\u003C/strong\u003E\u003C/em\u003E\u003Cstrong\u003E is\u003C/strong\u003E probably the smoothest-handling option) combined with the same PID settings I use:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://s1378.photobucket.com/user/craigmotbey/media/Kerbal/Tutorials/Hangar%20to%20Landing/screenshot317_zps0c4cd40c.jpg.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg src=\u0022http://i1378.photobucket.com/albums/ah120/craigmotbey/Kerbal/Tutorials/Hangar%20to%20Landing/screenshot317_zps0c4cd40c.jpg\u0022 alt=\u0022screenshot317_zps0c4cd40c.jpg\u0022\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThat might let us narrow down whether the problem is piloting, design or something else.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-14T22:20:17Z\u0022 title=\u002212/14/2014 10:20  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 14, 2014\u003C/time\u003E by Wanderfound\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Elmetian","CreatedById":32720,"CreatedDateTime":"2014-12-14T23:18:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wanderfound\u0022 data-cite=\u0022Wanderfound\u0022\u003E\u003Cdiv\u003EHow fast are you usually moving when you hit 20,000m?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENormally about 800 to 900m/s by that point. Even with a 20 ton payload there\u0027s enough lift and control authority to keep my nose up. The SAS just refuses to for some reason.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EMaybe try a test flight? That might let us narrow down whether the problem is piloting, design or something else.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat sounds like a good idea. It\u0027s been so long since I built anything with stock parts, so this may well be a problem specifically with the way the SAS utilises Procedural Wings control surfaces when FAR is installed.\u003C/p\u003E\n"}]}