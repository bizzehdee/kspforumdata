{"TopicId":114991,"ForumId":34,"TopicTitle":"[1.11.x] AmpYear Main \u0026 Reserve Power Manager (v1.5.9.0) 22nd Feb 2021","CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2015-07-03T23:34:24Z","PageNum":8,"Articles":[{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-15T20:20:27Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Deimos Rast said:\n\u003E \n\u003E \n\u003E Small not quite a bug: \u0022Isolate Reserves\u0022 (*maybe*) does not appear to be persistent (as in it persists through saving/load). At least, in my scenario, I had an isolated reserve, played a bit, game crashed, restarted the next day, no isolation. Thinking about it now, if I remember correctly, AmpYear saves settings on a clean quit, so that\u0027s probably when it saves final states/status of isolation (aside from periodically I\u0027m guessing from looking at the log). Am I correct in my thinking? If so, then I guess I crashed before it could save and never mind this report. If no, then something for the issue tracker I guess.![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E Cheers.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E And to the above user who is possibly having issues with the mod, check the subsystems tab and the parts section to make sure things are functioning correctly. Those can be a bit fussy at times. But it sounds like something else is at work.\n\u003E \n\nYes - if the game crashes before a scene switch (from flight to SC, etc) then it won\u0027t save anything. AmpYear only saves vessel settings when you switch scenes.  \n\nDoing it any more frequently would probably cause performance issues."},{"CreatedByName":"Deimos Rast","CreatedById":157420,"CreatedDateTime":"2016-05-15T20:25:42Z","Content":"Then that was the issue, as I try to minimize scene switches. Thanks."},{"CreatedByName":"LemonSkin","CreatedById":142318,"CreatedDateTime":"2016-05-18T22:16:31Z","Content":"\u003E \n\u003E \n\u003E On 11/05/2016 at 7:18 AM, JPLRepo said:\n\u003E \n\u003E \n\u003E [@Lennartos](https://forum.kerbalspaceprogram.com/index.php?/profile/163579-lennartos/) - Had a first run through cleaning up the code. In a preliminary test it appears it\u0027s reduced Garbage by 11% and CPU/GPU by about 85%. There is probably more that can be done and I need to do more testing to confirm these numbers. the biggest cost saving was converting the list of parts from a sorted dictionary to un-sorted. That obviously changes what you see in-game though as the parts list is no longer the same order every time.\n\u003E \n\nAny idea when this update will be pushed out? Just like Lennartos, my performance has absolutely tanked on even small stations. I have a 78-part station that I average 10 fps when piloting. The second I get a Kerbal out on EVA, it shoots right back up to 60\u002B."},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-18T22:20:57Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, LemonSkin said:\n\u003E \n\u003E \n\u003E Any idea when this update will be pushed out? Just like Lennartos, my performance has absolutely tanked on even small stations. I have a 78-part station that I average 10 fps when piloting. The second I get a Kerbal out on EVA, it shoots right back up to 60\u002B.\n\u003E \n\nYou can volunteer to test it for me... or you wait until I have time to test it."},{"CreatedByName":"LemonSkin","CreatedById":142318,"CreatedDateTime":"2016-05-18T22:24:55Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, JPLRepo said:\n\u003E \n\u003E \n\u003E You can volunteer to test it for me... or you wait until I have time to test it.\n\u003E \n\nI\u0027d be more than happy to volunteer!"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-18T22:36:15Z","Content":"\u003E \n\u003E \n\u003E 9 minutes ago, LemonSkin said:\n\u003E \n\u003E \n\u003E I\u0027d be more than happy to volunteer!\n\u003E \n\nTesting means testing Everything... in different scenarios with different mods. Hence why I have not released it. I want to be sure it actually works with at least the supported mods installed with different scenarios (multiple vessels in flight/loaded, saving, restarting, etc, etc). and that takes time."},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-19T04:02:47Z","Content":"\u003E \n\u003E \n\u003E 5 hours ago, JPLRepo said:\n\u003E \n\u003E \n\u003E Testing means testing Everything... in different scenarios with different mods. Hence why I have not released it. I want to be sure it actually works with at least the supported mods installed with different scenarios (multiple vessels in flight/loaded, saving, restarting, etc, etc). and that takes time.\n\u003E \n\n[@Lennartos](https://forum.kerbalspaceprogram.com/index.php?/profile/163579-lennartos/) [@LemonSkin](https://forum.kerbalspaceprogram.com/index.php?/profile/142318-lemonskin/) - Anyone having performance issues with AmpYear. can you please try out this version and report back. It has some efficiencies but there is a lot more I could do, but I want to know how this performs first. And if there are any bugs to be found.\n\nA pre-release DEV version is [available here](https://github.com/JPLRepo/AmpYear/releases/tag/V1.3.1.0). **BEWARE!!! This is not tested and I expect there to be bugs. So DON\u0022T use with your critical game save.OR, Backup your game save FIRST.  You have been warned.**"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-05-19T13:04:38Z","Content":"So, a first result:\n\n    5/19/2016 2:59:32 PM,AmpYear,Failure in AYSubSystem Processing \n    (Filename: C:/buildslave/unity/build/artifacts/generated/common/runtime/UnityEngineDebugBindings.gen.cpp Line: 64)\n    \n    5/19/2016 2:59:32 PM,AmpYear,Exception: System.NullReferenceException: Object reference not set to an instance of an object\n      at AY.AYController.SubsystemEnabled (Subsystem subsystem) [0x00000] in :0 \n      at AY.AYController.SubsystemUpdate () [0x00000] in :0 \n      at AY.AYController.FixedUpdate () [0x00000] in :0  \n    (Filename: C:/buildslave/unity/build/artifacts/generated/common/runtime/UnityEngineDebugBindings.gen.cpp Line: 64)\n\nFull log (~~KSP still running~~ updated after exit):\n\n[https://www.dropbox.com/s/s5f3317nbfaqb8i/2016-05-19-1%20AmpYear%201.3.1.0%20feedback.7z?dl=0](https://www.dropbox.com/s/s5f3317nbfaqb8i/2016-05-19-1%20AmpYear%201.3.1.0%20feedback.7z?dl=0)\n\nEdit:\n\nit feels like the GC is hitting me hard, the log spamming started as the \u0022every 3 seconds one second freeze\u0022 issue appeared.\n\nEdit:\n\nI\u0027m still in VAB, when disabling the AmpYear manager and re-enabling, all settings for parts are defaulted after I set them all up before.\n\n**Edited \u003Ctime datetime=\u00222016-05-19T14:12:59Z\u0022 title=\u002205/19/2016 02:12  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 19, 2016\u003C/time\u003E by Gordon Dry**"},{"CreatedByName":"ctbram","CreatedById":99635,"CreatedDateTime":"2016-05-19T16:03:22Z","Content":"okay now I have lost the gui in the vab.  I click on the amp year icon and no gui appears. It\u0027s like I dragged it off the screen or something and now I cannot get the thing back???  Where is it\u0027s position stored so I can get it back on my screen?\n\nI found and and fixed it.\n\nIn the plugin folder I looked in the config.cfg file and for whatever reason ewindowposx and ewindowposy were set to large negative values like -100343.  I closed the game and chnged them to 300, 50 respectively and restarted the game and now I have the gui again in the vab.  As I said not sure what caused it.  I believe I was going to move the window and dragged ia all the way over to the right side of the screen and when I let go it simply disappeared and I was not able to get it back until I edited the file positions.\n\n    FwindowPosX = 2213  \n\n    FwindowPosY = 676  \n\n    EwindowPosX = 300    \u003C--- this was -103323  \n\n    EwindowPosY = 50      \u003C--- this was -103324  \n\n    SCwindowPosX = 1680  \n\n    SCwindowPosY = 348  \n\n    EPLwindowPosX = 420  \n\n    EPLwindowPosY = 284\n\n**Edited \u003Ctime datetime=\u00222016-05-19T16:37:42Z\u0022 title=\u002205/19/2016 04:37  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 19, 2016\u003C/time\u003E by ctbram**"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-19T18:39:35Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, ctbram said:\n\u003E \n\u003E \n\u003E okay now I have lost the gui in the vab.  I click on the amp year icon and no gui appears. It\u0027s like I dragged it off the screen or something and now I cannot get the thing back???  Where is it\u0027s position stored so I can get it back on my screen?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I found and and fixed it.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E In the plugin folder I looked in the config.cfg file and for whatever reason ewindowposx and ewindowposy were set to large negative values like -100343.  I closed the game and chnged them to 300, 50 respectively and restarted the game and now I have the gui again in the vab.  As I said not sure what caused it.  I believe I was going to move the window and dragged ia all the way over to the right side of the screen and when I let go it simply disappeared and I was not able to get it back until I edited the file positions.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     FwindowPosX = 2213  \n\u003E \n\u003E     FwindowPosY = 676  \n\u003E \n\u003E     EwindowPosX = 300    \u003C--- this was -103323  \n\u003E \n\u003E     EwindowPosY = 50      \u003C--- this was -103324  \n\u003E \n\u003E     SCwindowPosX = 1680  \n\u003E \n\u003E     SCwindowPosY = 348  \n\u003E \n\u003E     EPLwindowPosX = 420  \n\u003E \n\u003E     EPLwindowPosY = 284\n\u003E \n\nHmm that\u0027s interesting as the code should check the position, and if off screen is meant to move it back on-screen.  \n\nCan you provide any details on the situation when this occurred?  In editor I get, was it displaying ok? you moved it? anything else you can provide so I can try to track this down.  \n\nWhat version were you using?  \n\nEDIT: I went back and hardened the code up a bit in regard to checking the screen bounds. Hopefully that will fix this from recurring.  \n\nIn the meantime glad you found the setting. That is the correct way to fix it.\n\n**Edited \u003Ctime datetime=\u00222016-05-19T20:41:41Z\u0022 title=\u002205/19/2016 08:41  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 19, 2016\u003C/time\u003E by JPLRepo**"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-19T20:40:22Z","Content":"\u003E \n\u003E \n\u003E On 15/05/2016 at 6:18 AM, Deimos Rast said:\n\u003E \n\u003E \n\u003E Small not quite a bug: \u0022Isolate Reserves\u0022 (*maybe*) does not appear to be persistent (as in it persists through saving/load). At least, in my scenario, I had an isolated reserve, played a bit, game crashed, restarted the next day, no isolation. Thinking about it now, if I remember correctly, AmpYear saves settings on a clean quit, so that\u0027s probably when it saves final states/status of isolation (aside from periodically I\u0027m guessing from looking at the log). Am I correct in my thinking? If so, then I guess I crashed before it could save and never mind this report. If no, then something for the issue tracker I guess.![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\u003E \n\u003E \n\u003E Cheers.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E And to the above user who is possibly having issues with the mod, check the subsystems tab and the parts section to make sure things are functioning correctly. Those can be a bit fussy at times. But it sounds like something else is at work.\n\u003E \n\nI went back and checked the code. This is actually something I missed. It is not persisting the Isolate Reserves setting. Will fix in next version.  \n[https://github.com/JPLRepo/AmpYear/issues/27](https://github.com/JPLRepo/AmpYear/issues/27)"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-19T23:19:54Z","Content":"[@Gordon Dry](https://forum.kerbalspaceprogram.com/index.php?/profile/163177-gordon-dry/) [@ctbram](https://forum.kerbalspaceprogram.com/index.php?/profile/99635-ctbram/) and anyone else having performance issues.  \n\nUpdated/fixed the DEV version to address the bugs. You can get Pre-Release DEV  [V1.3.1.1 only on GitHub.](https://github.com/JPLRepo/AmpYear/releases/tag/V1.3.1.1)  \n**BEWARE!!! This is not tested and I expect there to be bugs. So DON\u0022T use with your critical game save.OR, Backup your game save FIRST.  You have been warned.If someone can test this with LARGE parts count vessels and report back to me what the performance is like, that would be very helpful.**"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-05-20T00:42:38Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, JPLRepo said:\n\u003E \n\u003E \n\u003E **If someone can test this with LARGE parts count vessels and report back to me what the performance is like, that would be very helpful.**\n\u003E \n\nI will do tomorrow, I reverted back to last release version and fiddled with my large parts count vessel (some parts will be detached and made to subassemblies later) but now it\u0027s time to sleep.\n\nAnd the GC killed me, 3 seconds go, 3 seconds freeze ... it started with 5 seconds go, 1/2 second freeze. So I have something to compare for tomorrow ![:huh:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif \u0022:huh:\u0022)"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-05-20T20:46:44Z","Content":"Cross-link, some issue regarding RO, NFP and - as it seems - AmpYear:\n\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/47786-112-near-future-technologies-may-17-nfspacecraft-minor-fixes/\u0026do=embed\u0026embedComment=2593205\u0026embedDo=findComment\u0026page=249#comment-2593205\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-20T21:26:08Z","Content":"\u003E \n\u003E \n\u003E 35 minutes ago, Gordon Dry said:\n\u003E \n\u003E \n\u003E Cross-link, some issue regarding RO, NFP and - as it seems - AmpYear:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/47786-112-near-future-technologies-may-17-nfspacecraft-minor-fixes/\u0026do=embed\u0026embedComment=2593205\u0026embedDo=findComment\u0026page=249#comment-2593205\u0022\u003E\u003C/iframe\u003E\n\u003E \n\nI don\u0027t see how this is related to AmpYear at all....  \n\nYour error is with a failure in NFT NearFuturePropulsion.VariableISPEngine.OnUpdate ()  \n\nThat is not an AmpYear module.  \n\nAnd I don\u0027t see how AmpYear would be causing this as AmpYear does NOT change the values of ANY variables on any Mods. All it does is READ those values.  \n\nTell me, if you remove AmpYear does the null reference error in your log go away? I would be surprised if it does. If it does I will look into it further because that would be incredible.  \n\nI noticed in your report AmpYear incorrectly reporting the EC usage of that engine. But that does not surprise me at all, given AmpYear does not support it.  \n\nAmpYear currently only supports (IE: READS values) from the NFT Electrical and NFT solar packs and I believe this engine is part of the NFT Propulsion pack? Yes? I am not sure on that because I\u0027ve never actually played or used these packs myself.\n\n\u003E \n\u003E \n\u003E 20 hours ago, Gordon Dry said:\n\u003E \n\u003E \n\u003E I will do tomorrow, I reverted back to last release version and fiddled with my large parts count vessel (some parts will be detached and made to subassemblies later) but now it\u0027s time to sleep.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E And the GC killed me, 3 seconds go, 3 seconds freeze ... it started with 5 seconds go, 1/2 second freeze. So I have something to compare for tomorrow ![:huh:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif \u0022:huh:\u0022)\n\u003E \n\nAny update on whether version 1.3.1.1 improves things?"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-05-20T21:47:17Z","Content":"It does improve things, now my vessel got other last-stage engines (more thrust, less efficient, darn).\n\nBut to stay tight with all the issues I stumble upon over time is not easy - I wanna bring the stuff into orbit and dock more stuff later ...\n\nSpoiler\n\nProcedural Fairings issue:  \n\nActually I\u0027m disturbed by exploding engines under the fairing![hzAMGfZ.png](http://i.imgur.com/hzAMGfZ.png) as soon as I deploy them - no matter how low the ejection forces are set."},{"CreatedByName":"gamerscircle","CreatedById":151261,"CreatedDateTime":"2016-05-21T00:28:10Z","Content":"I did read through the forums and did a search, but I didn\u0027t see the option.  Is there a way to by \u0027default\u0027 to have AMP isolate the reserve power?"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-21T00:32:00Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, gamerscircle said:\n\u003E \n\u003E \n\u003E I did read through the forums and did a search, but I didn\u0027t see the option.  Is there a way to by \u0027default\u0027 to have AMP isolate the reserve power?\n\u003E \n\nNo there isn\u0027t currently. You have to set it for each vessel. - and it does not save this setting currently in the release version (1.3) but it does in the latest dev version (1.3.1.1).  \n\nRaise a request/issue on GitHub and it will get into the queue.\n\n**Edited \u003Ctime datetime=\u00222016-05-21T00:32:10Z\u0022 title=\u002205/21/2016 12:32  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 21, 2016\u003C/time\u003E by JPLRepo**"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-23T07:09:15Z","Content":"Is anyone able to confirm whether the DEV version I posted a few days ago has improved performance on large part vessels?"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-05-23T13:54:02Z","Content":"I can\u0027t say, with my big ass high part experiment I always have bad performance.\n\nBut why I am here - please make the AmpYear window in VAB not-through-clickable - I don\u0027t want to shred my vessel while setting priorities...\n\nEdit:\n\nbtw why are the ION RCS not supported by AmpYear??\n\n**Edited \u003Ctime datetime=\u00222016-05-23T14:01:44Z\u0022 title=\u002205/23/2016 02:01  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 23, 2016\u003C/time\u003E by Gordon Dry**"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-23T18:57:17Z","Content":"\u003E \n\u003E \n\u003E 6 hours ago, Gordon Dry said:\n\u003E \n\u003E \n\u003E I can\u0027t say, with my big ass high part experiment I always have bad performance.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E But why I am here - please make the AmpYear window in VAB not-through-clickable - I don\u0027t want to shred my vessel while setting priorities...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Edit:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E btw why are the ION RCS not supported by AmpYear??\n\u003E \n\n~~Very well, then I guess we release what we have and see what people think on the performance-side.~~  \n\nI could make it non-click-through. I actually need to convert it all over to the Unity 5 GUI system, but that is a lot of work. ~~But I\u0027ll see if I can do a quick fix for this version.~~  \n\nthe ION RCS is, as far as EC read-outs... do you mean not supported by the Emergency Shutdown Processing system? - That\u0027s just because I didn\u0027t get around to doing those parts. ~~I\u0027ll see if I can before the next release.~~\n\nEDIT: Making some more performance improvements before release. Just in case.  \n\nClick-through fixed for next release.  \n\nION RCS ESP processing support added for next release.\n\n**Edited \u003Ctime datetime=\u00222016-05-23T20:37:07Z\u0022 title=\u002205/23/2016 08:37  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 23, 2016\u003C/time\u003E by JPLRepo**"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-05-24T23:33:18Z","Content":"AmpYear doesn\u0027t save the default settings at the Space Center."},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-25T00:06:28Z","Content":"\u003E \n\u003E \n\u003E 12 minutes ago, Gordon Dry said:\n\u003E \n\u003E \n\u003E AmpYear doesn\u0027t save the default settings at the Space Center.\n\u003E \n\nSorry are you saying changes to the AmpYear settings in the Space Center are not saved when you click save and exit?"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-05-25T00:14:44Z","Content":"Yes"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-25T00:17:40Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, Gordon Dry said:\n\u003E \n\u003E \n\u003E Yes\n\u003E \n\nI will investigate when I have time. Right now, Real work time."}]}