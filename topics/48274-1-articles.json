{"TopicId":48274,"ForumId":55,"TopicTitle":"Ram Usage","CreatedByName":"goldfang35","CreatedById":81711,"CreatedDateTime":"2013-10-13T21:14:24Z","PageNum":1,"Articles":[{"CreatedByName":"goldfang35","CreatedById":81711,"CreatedDateTime":"2013-10-13T21:14:24Z","Content":"\n\u003Cp\u003EPeople Have been asking for multi-core support and ram usage and I don\u0027t get why they are being so fussy about it. There is no bad thing about upgrading ram other than using up some time on it. Ram upgrading would help both sides the devs and us. Adding more Ram would add more possibility to the game make it easier to add more stuff and also be more free with what they want to add. On our perspective we could have bigger spacestations bigger mun(its MUN for god sake)bases\u003C/p\u003E\u003Cp\u003Eand less lag to worry about. Yes the dev\u0027s think that theres no need yet and that they would rather work on other stuff than this but. It would be a great help in the future and would stop those lag stutters.\u003C/p\u003E\u003Cp\u003E P.S\u003C/p\u003E\u003Cp\u003EI am a victim of this problem as i cannot continue me beautiful space station cause of too many parts \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 alt=\u0022;.;\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2013-10-13T21:20:52Z","Content":"\n\u003Cp\u003EI recently realized that there\u0027s something amiss in the whole RAM discussion. The Page File. Why doesn\u0027t it come up more often? And more importantly, why doesn\u0027t KSP use the darn thing? Remember all those other games which slow to a crawl instead of crashing when out of memory? That\u0027s because they\u0027re essentially using your HD as memory, by the Page File. Now, why can\u0027t KSP do this, too? With 4GB of RAM, you should have the Page File set to about twice that amount, meaning you\u0027d have 12GB to work with. 8 of them would be very slow to access unless you have an SSD, but still, it\u0027s a difference between a crash and a lag. Now, why is KSP limited to actual RAM?\u003C/p\u003E\n"},{"CreatedByName":"Spacemarine658","CreatedById":38992,"CreatedDateTime":"2013-10-13T21:33:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dragon01\u0022 data-cite=\u0022Dragon01\u0022\u003E\u003Cdiv\u003EI recently realized that there\u0027s something amiss in the whole RAM discussion. The Page File. Why doesn\u0027t it come up more often? And more importantly, why doesn\u0027t KSP use the darn thing? Remember all those other games which slow to a crawl instead of crashing when out of memory? That\u0027s because they\u0027re essentially using your HD as memory, by the Page File. Now, why can\u0027t KSP do this, too? With 4GB of RAM, you should have the Page File set to about twice that amount, meaning you\u0027d have 12GB to work with. 8 of them would be very slow to access unless you have an SSD, but still, it\u0027s a difference between a crash and a lag. Now, why is KSP limited to actual RAM?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethat is a really good question\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-10-13T21:37:28Z","Content":"\n\u003Cp\u003E@op\u003C/p\u003E\u003Cp\u003EI don\u0027t really get what you are trying to say. Yes, KSP does use a lot of Ram and it might even be possible to improve stuff a lot. But that would require a lot of dev time and there are also limitation by others... like unity and modders in general. KSP just has a few devs, so don\u0027t expect them to ship an AAA game.\u003C/p\u003E\u003Cp\u003EKSP cannot use more than ~3.6 GB memory since its currently based on 32 bit architecture and a 32 bit number cannot hold addresses larger than that. Page Files were designed to work around insufficient memory, not addressing issues. Thats why we switched (/are currently in the process to do so) to 64bit systems. But it will take time until all software does so... and Unity for Win doesn\u0027t, yet.\u003C/p\u003E\n"},{"CreatedByName":"DaveofDefeat","CreatedById":58539,"CreatedDateTime":"2013-10-13T21:39:06Z","Content":"\n\u003Cp\u003EDoes virtual memory overcome the 4gb limit though?\u003C/p\u003E\n"},{"CreatedByName":"Motokid600","CreatedById":66349,"CreatedDateTime":"2013-10-13T21:45:21Z","Content":"\n\u003Cp\u003E30% performance increase for .22 on its way REALLY anxious to see how well that helps.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2013-10-13T22:13:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DaveofDefeat\u0022 data-cite=\u0022DaveofDefeat\u0022\u003E\u003Cdiv\u003EDoes virtual memory overcome the 4gb limit though?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ei dont think so. a 32 bit application only has a 32 bit virtual address space. so you can have 4gb of memory, no matter where it is mapped to (real memory, virtual memory, etc). most people have more memory than the game can use, so there is no reason to dip into the slower page file (unless you still use \u0026lt;4gb ram). a 64 bit program on the other hand will have more virtual address space than your machine has memory, and so if you have 8gb and the game wants 9gb, it will map the extra 1gb into the page file. \u003C/p\u003E\u003Cp\u003Eonly things that can be done are:\u003C/p\u003E\u003Cp\u003E1: reduce memory usage\u003C/p\u003E\u003Cp\u003E2: 64 bit builds\u003C/p\u003E\u003Cp\u003E#2 is hard to do and requires the unity people to fix 64 bit in the engine, so that leaves #1 as the only thing that can be done so far. this is actually easy, adopt dxt* compressed texture formats.\u003C/p\u003E\n"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2013-10-13T22:38:46Z","Content":"\n\u003Cp\u003EThe bit where it crashes instead of using the page file properly was a bug wasn\u0027t it, I\u0027m sure it was one of the things touted in the Unity 4.2 update fixes (which 0.22 will be based on)?\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2013-10-13T23:04:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EKSP cannot use more than ~3.6 GB memory since its currently based on 32 bit architecture and a 32 bit number cannot hold addresses larger than that. Page Files were designed to work around insufficient memory, not addressing issues. Thats why we switched (/are currently in the process to do so) to 64bit systems. But it will take time until all software does so... and Unity for Win doesn\u0027t, yet.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope, Page Files are perfectly capable of extending available memory even for a 32bit program. It\u0027s \u003Cem\u003Enot \u003C/em\u003Ethe same thing as virtual memory, and it should make KSP work the way I described (slowdowns instead of crashes).\u003C/p\u003E\u003Cp\u003EI hope it\u0027s indeed an Unity bug and that the next KSP will have it fixed.\u003C/p\u003E\n"},{"CreatedByName":"DaveofDefeat","CreatedById":58539,"CreatedDateTime":"2013-10-13T23:14:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dragon01\u0022 data-cite=\u0022Dragon01\u0022\u003E\u003Cdiv\u003ENope, Page Files are perfectly capable of extending available memory even for a 32bit program. It\u0027s \u003Cem\u003Enot \u003C/em\u003Ethe same thing as virtual memory, and it should make KSP work the way I described (slowdowns instead of crashes).\u003Cp\u003EI hope it\u0027s indeed an Unity bug and that the next KSP will have it fixed.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut ksp can only use 4gb of that memory no matter how much you have, and considering that it loads the entire game at boot up it would still crash.\u003C/p\u003E\n"},{"CreatedByName":"leax256","CreatedById":57364,"CreatedDateTime":"2013-10-14T00:23:06Z","Content":"\n\u003Cp\u003Eso combine pagefile and a ramdisk?\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2013-10-14T00:50:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dragon01\u0022 data-cite=\u0022Dragon01\u0022\u003E\u003Cdiv\u003ENope, Page Files are perfectly capable of extending available memory even for a 32bit program. It\u0027s \u003Cem\u003Enot \u003C/em\u003Ethe same thing as virtual memory, and it should make KSP work the way I described (slowdowns instead of crashes).\u003Cp\u003EI hope it\u0027s indeed an Unity bug and that the next KSP will have it fixed.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can make the page file as big as you want, but that won\u0027t change anything about how much virtual memory a 32bit program can address. I think that what you are describing, in effect, would basically be loading files on the fly instead of all at once. In this case I don\u0027t think it would matter if you loaded textures into the page file or into some temp directory on the disk. This is obviously possible (just pay attention to the texture pop in on any Unreal 3 based game), but I gather that it wouldn\u0027t work well in KSP even if it is possible (I have no idea if it is).\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2013-10-14T08:26:00Z","Content":"\n\u003Cp\u003Enothing prevents you from opening a temp file and writing/reading arbitrary data to it. you would kinda need to wrap it into your references though, so a reference could refer to something in ram or an offset into the temp file. just use a 64-bit integer that you cast to a pointer if its less than equal to 0xFFFFFFFF, otherwise shift it 32 places to the right and use it as an offset into your file. this would of course slow things down a lot, because there would be some extra operations every time you used a pointer.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-10-14T09:09:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nuke\u0022 data-cite=\u0022Nuke\u0022\u003E\u003Cdiv\u003E[..]\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, but a basic 32bit application does use 32bit pointers and thus cannot address more than ~4GB memory. Sure you can implement techniques to use more memory. Even the good old DOS had some \u003Ca href=\u0022https://en.wikipedia.org/wiki/Expanded_Memory_Specification#EMS\u0022 rel=\u0022external nofollow\u0022\u003Etechniques\u003C/a\u003E for stuff like that.\u003C/p\u003E\u003Cp\u003EBut it is sth the application has to implement. KSP does not, Unity does not. So no, PageFiles will definitively not help you to get more memory!\u003C/p\u003E\u003Cp\u003EThat means we are back at Nukes or my initial comment: Either Unity will go 64Bit or Unity/KSP Devs have to spend lots of time on optimization.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2013-10-14T20:44:27Z","Content":"\n\u003Cp\u003Ei think using a temp file is a horrible idea. you could do it, but it would actually make things slower. from the developers perspective this is a big no as it would require sweeping changes to the code base for very little gain. switching to compressed texture formats only really requires a few tweaks to a single subsystem and idk why this wasnt done a long time ago.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-14T20:52:40Z\u0022 title=\u002210/14/2013 08:52  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 14, 2013\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"chuk155","CreatedById":33934,"CreatedDateTime":"2013-10-14T21:03:05Z","Content":"\n\u003Cp\u003EI don\u0027t want to stray to far from the original topic, but the OP\u0027s problem from vessels that have a large part count is due to the high number of physics calculations, not just the RAM limit.\u003C/p\u003E\u003Cp\u003ERight now, the real bottleneck of KSP is the CPU. Multi-threading and 64-bit applications would definitely help, but as others have said, very hard to implement. \u003C/p\u003E\u003Cp\u003E(part of the multi threading problem is the difficulty of coordinating a bunch of physics calculations at the same time on different threads)\u003C/p\u003E\u003Cp\u003EAs for pagefile and virtual ram, I don\u0027t know very much, but I just wanted to make sure that we don\u0027t forget the other bottleneck\u0027s that KSP has.\u003C/p\u003E\n"},{"CreatedByName":"DaveofDefeat","CreatedById":58539,"CreatedDateTime":"2013-10-14T21:48:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022chuk155\u0022 data-cite=\u0022chuk155\u0022\u003E\u003Cdiv\u003EI don\u0027t want to stray to far from the original topic, but the OP\u0027s problem from vessels that have a large part count is due to the high number of physics calculations, not just the RAM limit.\u003Cp\u003ERight now, the real bottleneck of KSP is the CPU. Multi-threading and 64-bit applications would definitely help, but as others have said, very hard to implement. \u003C/p\u003E\u003Cp\u003E(part of the multi threading problem is the difficulty of coordinating a bunch of physics calculations at the same time on different threads)\u003C/p\u003E\u003Cp\u003EAs for pagefile and virtual ram, I don\u0027t know very much, but I just wanted to make sure that we don\u0027t forget the other bottleneck\u0027s that KSP has.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHowever there are mods to deal with the part count issue, there is nothing for memory usage.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2013-10-14T22:03:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DaveofDefeat\u0022 data-cite=\u0022DaveofDefeat\u0022\u003E\u003Cdiv\u003EHowever there are mods to deal with the part count issue, there is nothing for memory usage.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually there are: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/51361-0-21-Squad-Texture-Reduction-Pack-B9-and-KW-Packs-also\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/51361-0-21-Squad-Texture-Reduction-Pack-B9-and-KW-Packs-also\u003C/a\u003E. And with the new part system and a lot of attention on this issue people are getting better about keeping memory usage down in their mods.\u003C/p\u003E\n"},{"CreatedByName":"pxi","CreatedById":78711,"CreatedDateTime":"2013-10-14T22:11:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DaveofDefeat\u0022 data-cite=\u0022DaveofDefeat\u0022\u003E\u003Cdiv\u003EHowever there are mods to deal with the part count issue, there is nothing for memory usage.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf it\u0027s really that important to you, you do have the option of installing Ubuntu in dual-boot, and running the 64-bit version of KSP.\u003C/p\u003E\n"}]}