{"TopicId":212225,"ForumId":112,"TopicTitle":"Places to eliminate rigid body physics rather than optimze","CreatedByName":"poopslayer78","CreatedById":212496,"CreatedDateTime":"2023-02-23T03:02:30Z","PageNum":1,"Articles":[{"CreatedByName":"poopslayer78","CreatedById":212496,"CreatedDateTime":"2023-02-23T03:02:30Z","Content":"\n\u003Cp\u003E\nPerformance seems to be a universal concern among the KSP2 community and there seems to be a consistent request for improvements.\u00A0 Based on the ESA footage and scraps of other evidence, many speculate that the bottleneck is single threaded rigid body calculations.\u00A0 This thread will work under the assumption that rigid body physics is currently a major FPS bottleneck, so my apologies if this is not actually true.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, this thread will not be concerned with optimizations to the physics engine, but instead suggest parts of the game where physics can be eliminated entirely, so the calculations are not necessary in the first place:\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nConnections between vertically stacked fuel tanks\n\u003Col\u003E\n\u003Cli\u003E\nEither make the connections non-wobbly aka \u0022welded\u0022.\n\u003C/li\u003E\n\u003Cli\u003E\nOr \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/207658-procedural-part-wishlist/\u0022 rel=\u0022\u0022\u003Emake fuel tanks procedural\u003C/a\u003E\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nColony buildings - In my mind putting colony buildings under physics adds no fun and opens tons of potential for frustration.\u00A0 For example, colonies spontaneously exploding when switching to them, or a launch pad tilting slightly.\u00A0 Not to mention the performance overhead.\u00A0 Consider thinking of a different mechanic to constrain colony building, such as construction resources or static limits within the base assembly editor for things like mass, height, height/width ratio, etc.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/210678-delivery-routes-and-physics/\u0022 rel=\u0022\u0022\u003EDelivery routes\u003C/a\u003E - If these are not in the immediate vicinity of a player, automated delivery vehicles should be non-physical and on rails so they don\u0027t spontaneously fail off screen.\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nI\u0027d also like to mention that most players don\u0027t actually seem to like wobbly rockets in KSP1 based on 2 observations:\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nCognitive: Players have explicitly stated on various KSP2 social media platforms that they aren\u0027t very nostalgic or heavily invested in wobbly rockets and a lack of pushback saying \u0022keep rockets wobbly\u0022.\n\u003C/li\u003E\n\u003Cli\u003E\nBehavioral: Most players eventually learn to auto strut or spam manual struts until their vehicle becomes rigid.\u00A0 Reid Captain summed this up well by lamenting that \u0022\u003Ca href=\u0022https://www.youtube.com/watch?v=TFC4ul2uCCg\u0026amp;t=773s\u0022 rel=\u0022external nofollow\u0022\u003Ethe game is actively playing against itself here\u003C/a\u003E\u0022 when talking about his gameplay loop of build rocket -\u0026gt; it\u0027s too wobbly -\u0026gt; spam struts -\u0026gt; bad performance.\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-02-23T03:14:37Z\u0022 title=\u002202/23/2023 03:14  AM\u0022 data-short=\u00221 yr\u0022\u003EFebruary 23, 2023\u003C/time\u003E by poopslayer78\u003C/strong\u003E\n\u003Cbr\u003EMinor grammar \u0026amp; clarity fixes\n\u003C/span\u003E\n"},{"CreatedByName":"intelliCom","CreatedById":209738,"CreatedDateTime":"2023-02-23T03:14:21Z","Content":"\n\u003Cp\u003E\nI suspect the problem may actually lie with fuel crossfeed, at least based on one case.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen Everyday Astronaut played it, he set up an onion stage of 8 boosters with aerospike engines, each booster having 4 fuel tanks. Once launching the rocket, the frame rate came to an absolute crawl, with the game running at half speed. The \u003Cem\u003Emoment\u003C/em\u003E those boosters were jettisoned, the performance immediately improved.\n\u003C/p\u003E\n\u003Cp\u003E\nThe thing is, if physics is a source of performance issues, why would performance issues disappear on stage separation, even though the boosters are still there, still having their physics calculated?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EEDIT:\u003C/strong\u003E\u003Cbr\u003E\nSome of you may remember that fuel crossfeed was actually a performance issue for KSP1 as well. \u003Ca href=\u0022https://www.youtube.com/watch?v=iaZ3U6lNvBQ\u0022 rel=\u0022external nofollow\u0022\u003EStratzenblitz encountered it in his video; \u0022Building a 1 Million Ton Rocket\u0022\u003C/a\u003E, where he had to optimise the rocket by giving each rocket engine only one fuel tank, minimising performance losses from crossfeed calculations. I suspect a worse version of this is present in KSP2 at the moment, requiring development time to hopefully resolve it.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-02-23T03:21:39Z\u0022 title=\u002202/23/2023 03:21  AM\u0022 data-short=\u00221 yr\u0022\u003EFebruary 23, 2023\u003C/time\u003E by intelliCom\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"darthgently","CreatedById":204885,"CreatedDateTime":"2023-02-23T03:24:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224238238\u0022 data-ipsquote-contentid=\u0022212225\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221677122061\u0022 data-ipsquote-userid=\u0022209738\u0022 data-ipsquote-username=\u0022intelliCom\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, intelliCom said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI suspect the problem may actually lie with fuel crossfeed, at least based on one case.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen Everyday Astronaut played it, he set up an onion stage of 8 boosters with aerospike engines, each booster having 4 fuel tanks. Once launching the rocket, the frame rate came to an absolute crawl, with the game running at half speed. The \u003Cem\u003Emoment\u003C/em\u003E those boosters were jettisoned, the performance immediately improved.\n\u003C/p\u003E\n\u003Cp\u003E\nThe thing is, if physics is a source of performance issues, why would performance issues disappear on stage separation, even though the boosters are still there, still having their physics calculated?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEveryday Astro\u0027s results made me wonder if the devs may have borrowed some KSP1 code with regards multiple engines sharing multiple fuel sources causing the bulk of frame rate decrease on ascent.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI wish I could remember the vid, but a content creator very rigorously tracked this down.\u00A0 Definitely frame rate in KSP1 is inversely proportional to the square of number of engines and shared tanks or similar.\u00A0 Geometric, exponential, can\u0027t remember for sure.\u00A0 But sloooow\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: sorry, I replied without scrolling to see your entire post on my tiny phone.\u00A0 Stratzenblitz it surely was indeed that spied the tangled web of fuel crossfeed\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-02-23T03:31:57Z\u0022 title=\u002202/23/2023 03:31  AM\u0022 data-short=\u00221 yr\u0022\u003EFebruary 23, 2023\u003C/time\u003E by darthgently\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Profugo Barbatus","CreatedById":220450,"CreatedDateTime":"2023-02-23T03:25:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224238238\u0022 data-ipsquote-contentid=\u0022212225\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221677122061\u0022 data-ipsquote-userid=\u0022209738\u0022 data-ipsquote-username=\u0022intelliCom\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, intelliCom said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe thing is, if physics is a source of performance issues, why would performance issues disappear on stage separation, even though the boosters are still there, still having their physics calculated?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBecause the expensive part of physics calculations is resolving collisions, not existing/moving without collisions. Colliders are hella expensive, and parts wobbling into each other would basically stack a collision every physics frame.\n\u003C/p\u003E\n\u003Cp\u003E\nThat being said, fuel/resource drain is certainly a potential candidate. Collisions shouldn\u0027t be\u00A0\u003Cem\u003Ethat\u003C/em\u003E\u00A0expensive, and the new resource system for drains and faucets is new - wouldn\u0027t be surprising for it to recreate old bugs, if in novel new ways.\n\u003C/p\u003E\n"},{"CreatedByName":"intelliCom","CreatedById":209738,"CreatedDateTime":"2023-02-23T03:33:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224238242\u0022 data-ipsquote-contentid=\u0022212225\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221677122726\u0022 data-ipsquote-userid=\u0022220450\u0022 data-ipsquote-username=\u0022Profugo Barbatus\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, Profugo Barbatus said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nColliders are hella expensive, and parts wobbling into each other would basically stack a collision every physics frame.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis assumes that the parts of a single, contiguous craft in KSP2 are now automatically self-colliding. They didn\u0027t self-collide in KSP1 without turning on \u0022same vessel interaction\u0022 for the parts that needed to collide.\n\u003C/p\u003E\n"},{"CreatedByName":"Profugo Barbatus","CreatedById":220450,"CreatedDateTime":"2023-02-23T03:38:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224238251\u0022 data-ipsquote-contentid=\u0022212225\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221677123216\u0022 data-ipsquote-userid=\u0022209738\u0022 data-ipsquote-username=\u0022intelliCom\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, intelliCom said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis assumes that the parts of a single, contiguous craft in KSP2 are now automatically self-colliding. They didn\u0027t self-collide in KSP1 without turning on \u0022same vessel interaction\u0022 for the parts that needed to collide.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve seen stupider settings left on/off in release copies of games that caused no shortage of trouble. Callisto Protocol basically tanked its launch reputation by forgetting a single engine level setting to precompile shaders. Forgetting about a physics checkbox because \u0022there\u0027s more important things, that\u0027s easy so I\u0027ll fix it later I won\u0027t forget\u0022 happens all the time. I\u0027m even guilty of it in my dayjob.\n\u003C/p\u003E\n"},{"CreatedByName":"TackleMcClean","CreatedById":192825,"CreatedDateTime":"2023-02-23T08:24:49Z","Content":"\n\u003Cp\u003E\nI think if the development team wants good feedback, then the players deserve a good explanation of the current physics system - good and bad.\n\u003C/p\u003E\n\u003Cp\u003E\nHow was it built, what can we expect etc? Is it basically KSP1 physics? Is it written from scratch?\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s not good use of people\u0027s time to second guess everything. It\u0027s better to put all the cards on the table so both developer and community can focus on making the best possible game. I hope the current community worries to the bad performance wont hinder them from being honest and clear about this, IF the goal truly is to get good feedback and improve the game.\n\u003C/p\u003E\n"},{"CreatedByName":"VlonaldKerman","CreatedById":225683,"CreatedDateTime":"2023-02-23T14:08:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224238421\u0022 data-ipsquote-contentid=\u0022212225\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221677140689\u0022 data-ipsquote-userid=\u0022192825\u0022 data-ipsquote-username=\u0022TackleMcClean\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, TackleMcClean said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI think if the development team wants good feedback, then the players deserve a good explanation of the current physics system - good and bad.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think this applies generally to all the systems in KSP 2 that are either implemented impartially/inefficiently, and the ones which are in-development and coming soon. The current relative lack of transparency leads to wild speculation and widespread skepticism within the KSP community, as is evident everywhere you go in this forum. Not to mention, for how truly early the early access build is, I think it\u0027s reasonable to expect a level of transparency that\u0027s VERY VERY elevated relative to other games, even other beta releases. ESPECIALLY given they are charging $50 for a promise.\n\u003C/p\u003E\n"},{"CreatedByName":"Ashandalar","CreatedById":202969,"CreatedDateTime":"2023-02-23T14:55:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224238240\u0022 data-ipsquote-contentid=\u0022212225\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221677122664\u0022 data-ipsquote-userid=\u0022204885\u0022 data-ipsquote-username=\u0022darthgently\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, darthgently said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nEveryday Astro\u0027s results made me wonder if the devs may have borrowed some KSP1 code with regards multiple engines sharing multiple fuel sources causing the bulk of frame rate decrease on ascent.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI wish I could remember the vid, but a content creator very rigorously tracked this down.\u00A0 Definitely frame rate in KSP1 is inversely proportional to the square of number of engines and shared tanks or similar.\u00A0 Geometric, exponential, can\u0027t remember for sure.\u00A0 But sloooow\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: sorry, I replied without scrolling to see your entire post on my tiny phone.\u00A0 Stratzenblitz it surely was indeed that spied the tangled web of fuel crossfeed\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMy guess would be quadratic (square), since this is the scaling of the number of distinct pairs of elements as the number of elements increases: there are n(n-1)/2 distinct pairs for n elements.\n\u003C/p\u003E\n"},{"CreatedByName":"darthgently","CreatedById":204885,"CreatedDateTime":"2023-02-23T17:12:10Z","Content":"\n\u003Cp\u003E\nProgramming challenge:\n\u003C/p\u003E\n\u003Cp\u003E\nDo fuel crossfeed calculations using the GPU or via other unused cores.\n\u003C/p\u003E\n\u003Cp\u003E\nIf the fuel levels can be encoded as hidden bitmap pixel values..\n\u003C/p\u003E\n\u003Cp\u003E\nOr if the entire crossfeed calc could be done on another core...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Cailean_556","CreatedById":12297,"CreatedDateTime":"2023-02-23T20:09:25Z","Content":"\n\u003Cp\u003E\nI\u0027d be okay with non-wobbly rockets - even more so with modular, orbitally constructed vessels. Like, if instead of using docking ports to dock parts together they used a \u0022magnetic joint\u0022 - works the same way (i.e. you dock to it and it crossfeeds fuel, you just can\u0027t transfer Kerbals through them) however anything connected using these joints the game considers anything attached using them is solidly attached to the craft, moving as one part (not wobbling around fighting itself until the Kraken appears). And if the crossfeed is actually causing the FPS drops...I\u0027m hoping that gets resolved sooner in KSP2s EA cycle than later - as EVERYONE is going to build rockets that require crossfeed - especially for lower stages.\n\u003C/p\u003E\n"},{"CreatedByName":"lordbunson","CreatedById":225973,"CreatedDateTime":"2023-02-23T22:26:01Z","Content":"\n\u003Cp\u003E\nOn \u003Ca href=\u0022https://old.reddit.com/r/KerbalSpaceProgram/comments/11a4619/ksp2_performance_update/\u0022 rel=\u0022external nofollow\u0022\u003Ethe reddit dev performance update thread\u00A0 \u003C/a\u003Ethey mention that fuel cross feeding is one of the contributing factors to poor performance.\u00A0 The development team talked so much about rebuilding from the ground up to overcome the limitations of KSP 1, now we find out that KSP 2 is plagued by one of the primary limitations of KSP 1 (but even worse than before)\n\u003C/p\u003E\n\u003Cp\u003E\nAs far as other discussion points go,\u00A0 I would love for both procedural tanks and welded parts.\u00A0 I some how convinced myself that procedural fuel tanks was one of the promised features and am dissapointed that it isn\u0027t in the game\n\u003C/p\u003E\n"}]}