{"TopicId":116529,"ForumId":69,"TopicTitle":"Forced dx11 FPS drops/stuttering with crewed vessels only, when -forced-d3d11 is used","CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-07-21T23:09:45Z","PageNum":1,"Articles":[{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-07-21T23:09:45Z","Content":"\n\u003Cp\u003EHello,\u003C/p\u003E\u003Cp\u003ESorry for the sort of double post, reason: I did a \u003Cstrong\u003Eclean\u003C/strong\u003E install and \u003Cstrong\u003Estock\u003C/strong\u003E KSP 1.0.4 gives the same issues for me.\u003C/p\u003E\u003Cp\u003EMy problem is when using -force-d3d11: \u003C/p\u003E\u003Cp\u003E-\u003Cstrong\u003Eevery crewed\u003C/strong\u003E vessel, on the launchpad/outside the VAB, has major very short frequent fps drops, which result very stuttering game play.\u003C/p\u003E\u003Cp\u003E- any \u003Cstrong\u003Euncrewed \u003C/strong\u003Evessel has no problems. Gameplay is smooth without any fps drops/stuttering.\u003C/p\u003E\u003Cp\u003ETwo screenshots of a stock vessel on the pad with the Debug menu showing the FPS drops in the performance graph, clearly shows the issue.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/Ssq84i6,g3pdheK#0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/Ssq84i6,g3pdheK#0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnyone here who can clarify what I ran into?\u003C/p\u003E\u003Cp\u003EPS OpenGL is out of the question for me due to it poor performance on my rig.\u003C/p\u003E\u003Cp\u003EMy system specs:\u003C/p\u003E\u003Cp\u003EOS: Win7 x64\u003C/p\u003E\u003Cp\u003ECPU: Intel X5460 @3.8\u003C/p\u003E\u003Cp\u003ERAM: 6Gb ddr800\u003C/p\u003E\u003Cp\u003EGPU: (2x) HD5770\u003C/p\u003E\n"},{"CreatedByName":"joe_da_cro","CreatedById":147943,"CreatedDateTime":"2015-07-22T01:29:58Z","Content":"\n\u003Cp\u003Echeck a few things.\u003C/p\u003E\u003Cp\u003ECPU usuage\u003C/p\u003E\u003Cp\u003EGPU usuage\u003C/p\u003E\u003Cp\u003EVRAM usuage (your card has 512 to 1GB video memory)\u003C/p\u003E\u003Cp\u003Eby that screen shot you are running at ~15 fps and get spikes above that occasionally. personally i think its that your VRam usage is hiting your cards limit.but its only a guess at this point\u003C/p\u003E\n"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-07-22T01:57:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022joe_da_cro\u0022 data-cite=\u0022joe_da_cro\u0022\u003E\u003Cdiv\u003Echeck a few things.\u003Cp\u003ECPU usuage\u003C/p\u003E\u003Cp\u003EGPU usuage\u003C/p\u003E\u003Cp\u003EVRAM usuage (your card has 512 to 1GB video memory)\u003C/p\u003E\u003Cp\u003Eby that screen shot you are running at ~15 fps and get spikes above that occasionally. personally i think its that your VRam usage is hiting your cards limit.but its only a guess at this point\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can confirm the issue and I have 2GB of VRAM.\u003C/p\u003E\u003Cp\u003EAnd welcome to the forums, way to be helpful.\u003C/p\u003E\n"},{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-07-22T09:43:11Z","Content":"\n\u003Cp\u003E@joe, please review my second screenshots: uncrewed, has a constant 30\u002Bfps, no dips etc. Fluent gameplay.\u003C/p\u003E\u003Cp\u003EIf vram was the cause, what does one crewmemer add which causes this issue?\u003C/p\u003E\u003Cp\u003EIll check cpu usage tonight. Thougj nothing was out of the ordinary if memory serves me right.\u003C/p\u003E\n"},{"CreatedByName":"joe_da_cro","CreatedById":147943,"CreatedDateTime":"2015-07-22T15:16:05Z","Content":"\n\u003Cp\u003Eit is odd i loaded the d3d11 version of the game and i dont have that problem.\u003C/p\u003E\u003Cp\u003Ei can tell you my ram usages is about 1.5GB also vram is about the same too. (this is straight stock install with 0 mods).\u003C/p\u003E\u003Cp\u003Ei guess the best thing we can do is set a control for what could be going on. So if you could replicate the conditions i had on my game.\u003C/p\u003E\u003Cp\u003E- fresh install of the game\u003C/p\u003E\u003Cp\u003E- start a new game\u003C/p\u003E\u003Cp\u003E- build a command module and the basic solid fuel booster.\u003C/p\u003E\u003Cp\u003E- report launch fps\u003C/p\u003E\u003Cp\u003E- report inflight fps\u003C/p\u003E\u003Cp\u003Emy results are as follows.\u003C/p\u003E\u003Cp\u003Elauncher fps: 60 (vsynced)\u003C/p\u003E\u003Cp\u003Einflight fps: 53\u003C/p\u003E\u003Cp\u003Ei have a 3770k @ 4.2Ghz\u003C/p\u003E\u003Cp\u003Eand a 770GTX 4GB \u003C/p\u003E\u003Cp\u003E32 GB 1600Mhz ram with no swap files.\u003C/p\u003E\u003Cp\u003Enow to give some theory on what could be happening with manned and unmanned. when you are loading a manned mission you are loading the interiors and kerbals inside as well as the rest of the ship. the reason i suggested the control for the experiment is to reduce the parts and to see how your game reacts to a simple ship. \u003C/p\u003E\u003Cp\u003EI posted my specs so you may compare to help find what is slowing your performance in game. \u003C/p\u003E\u003Cp\u003Elastly try this experiment only if you are comfortable in doing so.**********\u003C/p\u003E\u003Cp\u003Ego into control panel \u0026gt; system \u0026gt; advanced system settings\u003C/p\u003E\u003Cp\u003Emake sure you have the advanced tab selected.\u003C/p\u003E\u003Cp\u003Eclick on the settings button in the performance section\u003C/p\u003E\u003Cp\u003Eclick on the advanced tab\u003C/p\u003E\u003Cp\u003Eclick on change on the virtual memory section\u003C/p\u003E\u003Cp\u003Euntick automatically manage paging file size for the system. (or leave unticked if it already is)\u003C/p\u003E\u003Cp\u003Eclick on custom size\u003C/p\u003E\u003Cp\u003Eset initial size to 16mb\u003C/p\u003E\u003Cp\u003Eset maximum size to what ever shows as recommended.\u003C/p\u003E\u003Cp\u003Eonce you apply this, you will receive a message that windows will not be able to do error reporting with less than 800mb of page files. this warning is mostly for blue screens and you can change it back after you finish the experiment.\u003C/p\u003E\u003Cp\u003ENow once you have applied the settings restart your PC\u003C/p\u003E\u003Cp\u003Eonce restarted play kerbal firstly running the control settings i gave earlier to see if there is any diffference (there shouldnt be) then secondly launch a common style ship you like to use. the longer you play the better the test.\u003C/p\u003E\u003Cp\u003Eonce you finish if you go back to the page file page i directed earlier you should see how much pagefile windows has assigned becuase it ran out of RAM and needed more. if the number is a few hundred MB then its not too bad and i have hit another dead end. if it is ~350\u002B it could be a possible cause of your issues.\u003C/p\u003E\u003Cp\u003ENote if you do this experiment make sure you change it back to the settings before unless you dont mind the settings as they are. also when windows re sizes the pagefile file on your hard disk/ssd you will notice lag and slow downs. while this takes place and your pc will return to normal once it has finished the resize.\u003C/p\u003E\u003Cp\u003EI hope there is some help here.\u003C/p\u003E\u003Cp\u003Ep.s one application i use when which i think is a god send. it is called process lasso. it is like an advanced task manager but it has other cool features like setting power profiles for certain applications, setting core parking, application priority, cpu affinity, io priority etc. it has a gaming mode too which will set your PC to high performance and not use its inbuilt CPU balancer on games while balancing other apps. helps for running virus scans while you are playing. i wont post the links here but you can easily google it and install the free version which is not as good as the paid version but still decent. i personally paid for the application after using the free version for a while.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-07-22T17:38:57Z","Content":"\n\u003Cp\u003EDon\u0027t forget guys that the -force-d3d11 and -force-opengl command line arguments are \u003Ca href=\u0022http://docs.unity3d.com/Manual/CommandLineArguments.html\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E\u003Cem\u003EUnity3d Game engine features\u003C/em\u003E\u003C/strong\u003E\u003C/a\u003E, Squad didn\u0027t include them and have absolutely no control over them, and cannot address any issues that arise from using them, KSP is only tested on d3d9.\u003C/p\u003E\u003Cp\u003EWe volunteers and members can try to offer advice though, but all I can really suggest is that you try another graphics driver.\u003C/p\u003E\u003Cp\u003EAlso, if you have jumpy text in-game from using -force-d3d11, that\u0027s why.\u003C/p\u003E\n"}]}