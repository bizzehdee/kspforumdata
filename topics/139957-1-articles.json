{"TopicId":139957,"ForumId":29,"TopicTitle":"[SOLVED] How to get the terrain normal vector or plane at certain coords?","CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2016-05-17T10:45:54Z","PageNum":1,"Articles":[{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2016-05-17T10:45:54Z","Content":"\n\u003Cp\u003E\nIs there a way to know the terrain normal vector or plane at certain coordinates? I need it to properly calculate friction if the wheels are on a slope.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-18T14:58:00Z\u0022 title=\u002205/18/2016 02:58  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 18, 2016\u003C/time\u003E by Ser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-17T13:59:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222586441\u0022 data-ipsquote-contentid=\u0022139957\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463481954\u0022 data-ipsquote-userid=\u0022104207\u0022 data-ipsquote-username=\u0022Ser\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Ser said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs there a way to know the terrain normal vector or plane at certain coordinates? I need it to properly calculate friction if the wheels are on a slope.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/CYBUTEK/KerbalEngineer/blob/master/KerbalEngineer/Flight/Readouts/Surface/Slope.cs\u0022 rel=\u0022external nofollow\u0022\u003EThis is the code\u003C/a\u003E that KER uses to determine surface slope. \u00A0It basically does a raycast down from the vessel\u0027s CoM and looks for a terrain hit. \u00A0The raycast returns the normal at the hit point (along with some other data).\u00A0 This requires the surface to actually exist (i.e. it doesn\u0027t work for far from the vessel). \u00A0If you need it for far from the vessel (or otherwise when no raycast is possible) then you would need to query the PQS directly. \u00A0There are various mods that do that but it sounds like the raycast method should be fine for you...\n\u003C/p\u003E\n"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2016-05-17T14:13:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222586714\u0022 data-ipsquote-contentid=\u0022139957\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463493573\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/CYBUTEK/KerbalEngineer/blob/master/KerbalEngineer/Flight/Readouts/Surface/Slope.cs\u0022 rel=\u0022external nofollow\u0022\u003EThis is the code\u003C/a\u003E that KER uses to determine surface slope. \u00A0It basically does a raycast down from the vessel\u0027s CoM and looks for a terrain hit. \u00A0The raycast returns the normal at the hit point (along with some other data).\u00A0 This requires the surface to actually exist (i.e. it doesn\u0027t work for far from the vessel). \u00A0If you need it for far from the vessel (or otherwise when no raycast is possible) then you would need to query the PQS directly. \u00A0There are various mods that do that but it sounds like the raycast method should be fine for you...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI was hoping that there\u0027s just a function to get that info. Thanks a lot.\n\u003C/p\u003E\n\u003Cp\u003E\nIsn\u0027t raycasting heavy if done every FixedUpdate()?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-05-18T23:14:20Z","Content":"\n\u003Cp\u003E\nIt depends how many you do but the stock game and a lot of mod do a bunch of them each frame. Don\u0027t worry.\n\u003C/p\u003E\n"}]}