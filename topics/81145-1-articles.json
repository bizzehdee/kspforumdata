{"TopicId":81145,"ForumId":29,"TopicTitle":"Kill a crew member \u002B detect number of crew","CreatedByName":"kineticPull","CreatedById":117047,"CreatedDateTime":"2014-08-08T14:07:34Z","PageNum":1,"Articles":[{"CreatedByName":"kineticPull","CreatedById":117047,"CreatedDateTime":"2014-08-08T14:07:34Z","Content":"\n\u003Cp\u003ESo I\u0027m making a very simple life support mod, and I can\u0027t figure out how to detect the number of crew members in the part, or kill one. Please help.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-08-08T14:52:39Z","Content":"\n\u003Cp\u003EHave a look at \u003Ca href=\u0022http://anatid.github.io/XML-Documentation-for-the-KSP-API/class_part.html\u0022 rel=\u0022external nofollow\u0022\u003EAnatid API Doc\u003C/a\u003E for Part and search for protoModuleCrew \u003C/p\u003E\u003Cp\u003EYou\u0027ll see a List and add/remove call.\u003C/p\u003E\u003Cp\u003EHave a look at CrewManfiest source (see my sig) to find more of what you need (mark a crew dead in the roster)\u003C/p\u003E\n"},{"CreatedByName":"kineticPull","CreatedById":117047,"CreatedDateTime":"2014-08-08T15:54:32Z","Content":"\n\u003Cp\u003Eand how would I make it check for and consume a resource (oxygen)\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-08-08T17:43:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kineticPull\u0022 data-cite=\u0022kineticPull\u0022\u003E\u003Cdiv\u003Eand how would I make it check for and consume a resource (oxygen)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELook at the source of the countless amount of life support mods out there?\u003C/p\u003E\n"},{"CreatedByName":"kineticPull","CreatedById":117047,"CreatedDateTime":"2014-08-08T17:58:31Z","Content":"\n\u003Cp\u003EThat would be the easy way out. I\u0027m trying to learn how to code C# in KSP, and i\u0027m asking for help on the things I\u0027m completely stuck on.\u003C/p\u003E\u003Cp\u003Ebut I figured it out.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace BASIK_Life_Support\u003Cbr\u003E{\u003Cbr\u003E    public class LifeSupport : PartModule\u003Cbr\u003E    {\u003Cbr\u003E\u003Cbr\u003E        public PartResource oxygen = null;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        public void Update(ProtoCrewMember member)\u003Cbr\u003E        {\u003Cbr\u003E\u003Cbr\u003E            PartResourceList prl = part.Resources;\u003Cbr\u003E\u003Cbr\u003E           foreach (PartResource wanted_resource in prl)\u003Cbr\u003E           {\u003Cbr\u003E                if (wanted_resource.resourceName == \u0022Oxygen\u0022)\u003Cbr\u003E                {\u003Cbr\u003E                    oxygen = wanted_resource;\u003Cbr\u003E                }\u003Cbr\u003E           }\u003Cbr\u003E\u003Cbr\u003E           if ( oxygen.amount \u0026lt;= 0)\u003Cbr\u003E           {\u003Cbr\u003E               part.RemoveCrewmember(member);\u003Cbr\u003E               member.seat = null;\u003Cbr\u003E               member.rosterStatus = ProtoCrewMember.RosterStatus.Dead;\u003Cbr\u003E           }\u003Cbr\u003E\u003Cbr\u003E           else\u003Cbr\u003E           {\u003Cbr\u003E               oxygen.amount -= (0.2 * part.protoModuleCrew.Count);\u003Cbr\u003E           }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI hope it works\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-08T18:00:32Z\u0022 title=\u002208/08/2014 06:00  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 8, 2014\u003C/time\u003E by kineticPull\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-08-08T18:25:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kineticPull\u0022 data-cite=\u0022kineticPull\u0022\u003E\u003Cdiv\u003EThat would be the easy way out. I\u0027m trying to learn how to code C# in KSP, and i\u0027m asking for help on the things I\u0027m completely stuck on.\u003Cp\u003Ebut I figured it out.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace BASIK_Life_Support\u003Cbr\u003E{\u003Cbr\u003E    public class LifeSupport : PartModule\u003Cbr\u003E    {\u003Cbr\u003E\u003Cbr\u003E        public PartResource oxygen = null;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        public void Update(ProtoCrewMember member)\u003Cbr\u003E        {\u003Cbr\u003E\u003Cbr\u003E            PartResourceList prl = part.Resources;\u003Cbr\u003E\u003Cbr\u003E           foreach (PartResource wanted_resource in prl)\u003Cbr\u003E           {\u003Cbr\u003E                if (wanted_resource.resourceName == \u0022Oxygen\u0022)\u003Cbr\u003E                {\u003Cbr\u003E                    oxygen = wanted_resource;\u003Cbr\u003E                }\u003Cbr\u003E           }\u003Cbr\u003E\u003Cbr\u003E           if ( oxygen.amount \u0026lt;= 0)\u003Cbr\u003E           {\u003Cbr\u003E               part.RemoveCrewmember(member);\u003Cbr\u003E               member.seat = null;\u003Cbr\u003E               member.rosterStatus = ProtoCrewMember.RosterStatus.Dead;\u003Cbr\u003E           }\u003Cbr\u003E\u003Cbr\u003E           else\u003Cbr\u003E           {\u003Cbr\u003E               oxygen.amount -= (0.2 * part.protoModuleCrew.Count);\u003Cbr\u003E           }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI hope it works\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAsking for help is more of the easy way out than figuring it out from someone\u0027s code.\u003C/p\u003E\u003Cp\u003EBut two things about that: first off you are manually removing resources, do /not/ do that. Use part.RequestResource() to remove resources. Second, you are removing 0.2 units every /frame/. Multiply the amount by second with TimeWarp.fixedDeltaTime to have it behave correctly.\u003C/p\u003E\n"},{"CreatedByName":"kineticPull","CreatedById":117047,"CreatedDateTime":"2014-08-08T22:07:23Z","Content":"\n\u003Cp\u003EMy problem now is that I cant kill Kerbals in seats 1 to crewNum. crewNum being equal to vessel.GetCrewCount()\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-09T00:59:01Z\u0022 title=\u002208/09/2014 12:59  AM\u0022 data-short=\u00229 yr\u0022\u003EAugust 9, 2014\u003C/time\u003E by kineticPull\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-08-09T03:36:41Z","Content":"\n\u003Cp\u003EBecause it\u0027s an index. It starts at zero, as any other indexed variable. It will be from 0 to (vessel.GetCrewCount() - 1)\u003C/p\u003E\n"}]}