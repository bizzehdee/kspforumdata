{"TopicId":54772,"ForumId":29,"TopicTitle":"Can my plugin load a c dll with dllimport?","CreatedByName":"Xty","CreatedById":94977,"CreatedDateTime":"2013-11-30T07:44:22Z","PageNum":1,"Articles":[{"CreatedByName":"Xty","CreatedById":94977,"CreatedDateTime":"2013-11-30T07:44:22Z","Content":"\n\u003Cp\u003EI have a C dll that I\u0027m trying to load with my plugin but in the debug console it says DllNotFoundException when it tries to load the dll.\u003C/p\u003E\u003Cp\u003EI got the dll working with a C# console application so I\u0027m fairly certain it works.\u003C/p\u003E\u003Cp\u003EI put the dll in the same directory as the plugin (I\u0027m using the old plugins directory) and I know the plugin is loading.\u003C/p\u003E\u003Cp\u003EIs it possible to load a C dll with a plugin, and if yes, can anyone tell me where it should go or what I\u0027m doing wrong?\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-30T08:47:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Xty\u0022 data-cite=\u0022Xty\u0022\u003E\u003Cdiv\u003EI have a C dll that I\u0027m trying to load with my plugin but in the debug console it says DllNotFoundException when it tries to load the dll.\u003Cp\u003EI got the dll working with a C# console application so I\u0027m fairly certain it works.\u003C/p\u003E\u003Cp\u003EI put the dll in the same directory as the plugin (I\u0027m using the old plugins directory) and I know the plugin is loading.\u003C/p\u003E\u003Cp\u003EIs it possible to load a C dll with a plugin, and if yes, can anyone tell me where it should go or what I\u0027m doing wrong?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not convinced that it is, given that unity runs Mono, not .net (though they are both c#). Try looking into the mechanism Mono uses to load them.\u003C/p\u003E\n"},{"CreatedByName":"asarium","CreatedById":29569,"CreatedDateTime":"2013-11-30T09:41:37Z","Content":"\n\u003Cp\u003EI think someone managed to load a c dll in an earlier version of KSP. You could try moving the dll into the root directory of KSP (where KSP.exe is located). For standard .NET/Mono applications that is the location that is searched when trying to use an external dll.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-11-30T12:51:53Z","Content":"\n\u003Cp\u003EYou should be able to find out where Mono is actually looking for your native dll via \u003Ca href=\u0022http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx\u0022 rel=\u0022external nofollow\u0022\u003EProcess Monitor\u003C/a\u003E, just in case the places already suggested do not work.\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2013-11-30T13:58:25Z","Content":"\n\u003Cp\u003EIt is possible to talk to a C DLL from a C# DLL. The modder who did KerbComAvionics did just that (there\u0027s a C DLL \u0022lpsolve.dll\u0022 included in the package). You can look at the source for that mod to see what you have to do in the C# DLL to load it.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/29387-0-21-x-KerbCom-Avionics-0-3-0-6-Alpha-%2829-August%29-now-with-video%21?highlight=kerbcomavionics\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/29387-0-21-x-KerbCom-Avionics-0-3-0-6-Alpha-%2829-August%29-now-with-video%21?highlight=kerbcomavionics\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EYou would have to cross compile the C DLL to support multiple platforms (mac / Linux / windows).\u003C/p\u003E\n"},{"CreatedByName":"Xty","CreatedById":94977,"CreatedDateTime":"2013-11-30T22:08:41Z","Content":"\n\u003Cp\u003EPutting it in the main directory fixed it. I took a look at KerbComAvionics but the source doesn\u0027t seem to be updated, I\u0027m guessing if I put my mod in the GameData folder then it might be loadable from there, either that or a relative path. \u003C/p\u003E\u003Cp\u003EThanks everyone.\u003C/p\u003E\n"}]}