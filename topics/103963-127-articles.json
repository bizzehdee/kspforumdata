{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":127,"Articles":[{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2016-02-03T02:00:56Z","Content":"\u003E \n\u003E \n\u003E 16 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E with the eclipse shaders you showed the other time, as I remember your approach can also project shadows on terrain. I\u0027m using this [https://en.wikibooks.org/wiki/GLSL_Programming/Unity/Soft_Shadows_of_Spheres](https://en.wikibooks.org/wiki/GLSL_Programming/Unity/Soft_Shadows_of_Spheres) and it\u0027s pretty simple, fast and pretty enough. I\u0027m thinking I could do terrain shadows with a multiplicative shader like the extinction one but it would also apply over everything, lights etc so it\u0027s pretty limited. I was wondering if you got your approach working on terrain.\n\u003E \n\nI haven\u0027t touched it since DTL became a thing, and trying to get custom cubemaps working. I have an algorithm that I was planning on testing that should also be fast...   \n\nWhat you have looks great though so far!"},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-02-03T02:02:34Z","Content":"When light goes through the atmosphere near the edge of a sphere it travels much further than from directly in front, this gives more chance for the light to scatter so the edges should show more scatter."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-03T02:12:53Z","Content":"\u003E \n\u003E \n\u003E 18 minutes ago, Proot said:\n\u003E \n\u003E \n\u003E About the \u0022realism debate\u0022:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Make no mistake, the earth haven\u0027t an \u0022concrete aspect\u0022. What we imagine as the reality is more like an \u0022overall\u0022. As a lot of other things, depends on the \u0022espectator\u0022 and \u0022his eyes\u0022... is not the same a black and white photo from a satellite at high distances and with false color (no matter how good were the colored) than -as example- a regular photo taken by an astronaut, from the ISS.  \n\u003E \n\u003E For the same reason, imagine you are at EVA around earth, is not the same to get a picture of the \u0022edges\u0022 of the planet and his atmosphere than get the photo of the earth just below you: the atmosphere scattering has an \u0022acumulative\u0022 visual effect, so if you are seeing the horizon/edge, no matter at what height, you gonna see much more color and \u0022fog\u0022 effect there. And at the contrary, if you look at a very \u0022general\u0022 plane of the earth, or in the earth plane perpendicular to you in that imaginary EVA, you\u0027ll see a \u0022clear\u0022 earth with a barely visible coloration/fog-effect coming from the atmosphere scattering.  \n\u003E \n\u003E So, IMHO, there is no solution until we can get a barely decent HDR in KSP, which could cover an enhancement of all those small changes of \u0022perception\u0022.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Meanwhile, we must settle a concrete look and, [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/), humbly I vote in favour of that last kerbin look. Anyways, you have done all configurable here, so the look in the main release of scatterer shouldn\u0027t be too debateable, right? lol\n\u003E \n\nYeah I see what you mean, this effect is simulated in Proland and is something I am shooting for\n\n[http://proland.imag.fr/gallery/terrains/image204.png](http://proland.imag.fr/gallery/terrains/image204.png)\n\n[http://proland.imag.fr/gallery/edition/image390.png](http://proland.imag.fr/gallery/edition/image390.png)\n\nHowever I can\u0027t really achieve it unless I can also modify the orginal terrain shaders to alter the lighting and build both the scattering and a HDR effect directly in them. The depth and extinction settings I have now don\u0027t really compare. The effect is still more or less just an overlay in the end.\n\n\u003E \n\u003E \n\u003E 17 minutes ago, rbray89 said:\n\u003E \n\u003E \n\u003E I haven\u0027t touched it since DTL became a thing, and trying to get custom cubemaps working. I have an algorithm that I was planning on testing that should also be fast...   \n\u003E   \n\u003E \n\u003E What you have looks great though so far!\n\u003E \n\nAlright.\n\n\u003E \n\u003E \n\u003E 15 minutes ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E When light goes through the atmosphere near the edge of a sphere it travels much further than from directly in front, this gives more chance for the light to scatter so the edges should show more scatter.\n\u003E \n\nAh, I thought you were talking about the eclipses.\n\n**Edited \u003Ctime datetime=\u00222016-02-03T02:18:26Z\u0022 title=\u002202/03/2016 02:18  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 3, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"Errol","CreatedById":118622,"CreatedDateTime":"2016-02-03T02:24:27Z","Content":"\u003E \n\u003E \n\u003E 3 hours ago, blackrack said:\n\u003E \n\u003E \n\u003E ...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I actually like the look of it a lot, this  reminds me to implement some hue and saturation settings to easily change the overall look and feel of the atmo.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Alright, I will give it a try later on though.\n\u003E \n\nIf you do this can you make it optionally selwct the values rand omly from a range, upon loading an instance of scatterer or something. To give a slightly different feel to the weather each day.\n\n**Edited \u003Ctime datetime=\u00222016-02-03T02:28:10Z\u0022 title=\u002202/03/2016 02:28  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 3, 2016\u003C/time\u003E by Errol**"},{"CreatedByName":"SkyKaptn","CreatedById":153990,"CreatedDateTime":"2016-02-03T03:27:33Z","Content":"[@Proot](https://forum.kerbalspaceprogram.com/index.php?/profile/98932-proot/) [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) I strongly suggest to watch the live stream that is going on from ISS right now. They are performing the HD Earth Viewing Experiment that takes aim to perfect broadcasting from space.\n\nIn this stream we can see what Proot said earlier about viewing angles relative to the sun\u0027s position is true regarding high vs low levels of light scattering. However, as a photographer I can tell that what the eye sees and what the camera picks up are two very different things. That is why we use UV-filters and polarization filters. And not least: HDR or multishots to compensate for the camera\u0027s rather poor ability to pick up dynamic light. (cameras over- and underexpose terribly compared to one\u0027s eyes)\n\nIn KSP I like to think as \u0022being there in person\u0022, not seeing through a camera. This makes me appreciate more the lower level scattering.\n\nHere is the ISS stream btw: [http://www.ustream.tv/channel/iss-hdev-payload](http://www.ustream.tv/channel/iss-hdev-payload)\n\n**Edited \u003Ctime datetime=\u00222016-02-03T03:40:57Z\u0022 title=\u002202/03/2016 03:40  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 3, 2016\u003C/time\u003E by SkyKaptn**"},{"CreatedByName":"StarStryder","CreatedById":152343,"CreatedDateTime":"2016-02-03T11:44:26Z","Content":"I\u0027m having an issue with the ocean effects:\n\n![scatterer-ocean.png](https://dl.dropboxusercontent.com/u/100584326/scatterer-ocean.png)\n\nA couple of the \u0022known issues\u0022 looked like they might relate but I wasn\u0027t sure."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-02-03T11:56:53Z","Content":"\u003E \n\u003E \n\u003E 10 minutes ago, StarStryder said:\n\u003E \n\u003E \n\u003E I\u0027m having an issue with the ocean effects:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E A couple of the \u0022known issues\u0022 looked like they might relate but I wasn\u0027t sure.\n\u003E \n\nWhat OS Windows, OSX, Linux\n\nWhat KSP are you running, 32bit, 64bit Workaround, 64bit Linux\n\nWhat Graphics Environment Directx 9, 11, or OpenGL\n\nMost importantly, did you get the latest 0.22 version that has the fix for that issue?"},{"CreatedByName":"StarStryder","CreatedById":152343,"CreatedDateTime":"2016-02-03T12:08:09Z","Content":"Sorry, basic details.  ![:rolleyes:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif \u0022:rolleyes:\u0022)\n\nLinux, 64 bit, Cinnamon, OpenGL\n\n    server glx version string: 1.4client glx version string: 1.4GLX version: 1.4OpenGL core profile version string: 4.3.0 NVIDIA 352.63OpenGL core profile shading language version string: 4.30 NVIDIA via Cg compilerOpenGL version string: 4.5.0 NVIDIA 352.63OpenGL shading language version string: 4.50 NVIDIA\n\nI installed via CKAN. Version is listed as 1:0.02182."},{"CreatedByName":"selfish_meme","CreatedById":125899,"CreatedDateTime":"2016-02-03T12:33:24Z","Content":"\u003E \n\u003E \n\u003E 23 minutes ago, StarStryder said:\n\u003E \n\u003E \n\u003E Sorry, basic details.  ![:rolleyes:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif \u0022:rolleyes:\u0022)\n\u003E \n\u003E \n\u003E \n\u003E Linux, 64 bit, Cinnamon, OpenGL\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     server glx version string: 1.4\n\u003E     client glx version string: 1.4\n\u003E     GLX version: 1.4\n\u003E     OpenGL core profile version string: 4.3.0 NVIDIA 352.63\n\u003E     OpenGL core profile shading language version string: 4.30 NVIDIA via Cg compiler\n\u003E     OpenGL version string: 4.5.0 NVIDIA 352.63\n\u003E     OpenGL shading language version string: 4.50 NVIDIA\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     \n\u003E      \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I installed via CKAN. Version is listed as 1:0.02182.\n\u003E \n\nThat\u0027s the prior version, I don\u0027t think [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) does the CKAn integration, it may be automatic through Kerbalstuff I am not sure, anyway check the first post their is a newer version that fixes that, it did for me on Ubuntu 15.10 with the same drivers"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-03T12:40:02Z","Content":"\u003E \n\u003E \n\u003E 34 minutes ago, StarStryder said:\n\u003E \n\u003E \n\u003E I installed via CKAN. Version is listed as 1:0.02182.\n\u003E \n\nThat\u0027s the previous version, download the newest one from kerbalstuff or mega (links in the OP).\n\n**Edited \u003Ctime datetime=\u00222016-02-03T12:42:23Z\u0022 title=\u002202/03/2016 12:42  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 3, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"StarStryder","CreatedById":152343,"CreatedDateTime":"2016-02-03T18:13:08Z","Content":"Ah, I see.  Thanks.\n\nI\u0027d thought that CKAN worked automatically with KerbalStuff.  Is there a way to determine who maintains the CKAN packaging?"},{"CreatedByName":"Joco223","CreatedById":92530,"CreatedDateTime":"2016-02-03T18:15:01Z","Content":"Still getting these weird visual artifacts on ocean even with the latest update\n\n![ecBR1lB.png](http://i.imgur.com/ecBR1lB.png)\n\nWindows 10 64-bit\n\nKSP 1.0.5 64-bit workaround (I know that 64-bit version on windows doesn\u0027t get support)\n\nDX9\n\nUsing KSP Stock Visual Enchantments Ultra Resolution"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-03T18:41:25Z","Content":"\u003E \n\u003E \n\u003E 27 minutes ago, Joco223 said:\n\u003E \n\u003E \n\u003E Still getting these weird visual artifacts on ocean even with the latest update\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Windows 10 64-bit\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E KSP 1.0.5 64-bit workaround (I know that 64-bit version on windows doesn\u0027t get support)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E DX9\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Using KSP Stock Visual Enchantments Ultra Resolution\n\u003E \n\nIs this downloaded through CKAN or from kerbalstuff? Try forcing dx11 or opengl and see if it makes a difference.\n\nAlso, try without any other mods to be sure.\n\n**Edited \u003Ctime datetime=\u00222016-02-03T18:42:26Z\u0022 title=\u002202/03/2016 06:42  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 3, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"Joco223","CreatedById":92530,"CreatedDateTime":"2016-02-03T18:43:38Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Downloaded from OP, mega link."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-03T18:45:37Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, Joco223 said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Downloaded from OP, mega link.\n\u003E \n\nOk, try the other things I mentioned. And are these artifacts there all the time or only occasionally? Do they still appear when you disable postprocessing?"},{"CreatedByName":"Joco223","CreatedById":92530,"CreatedDateTime":"2016-02-03T18:51:08Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Ok, Dx11 fixed it but there is now a black border on horizon, In Dx9 you can see the artifact all the way until 130km\n\n-EDIT-\n\nI\u0027m switching back to Dx9 because EVE has no clouds over oceans, only on land in Dx11\n\n**Edited \u003Ctime datetime=\u00222016-02-03T18:56:20Z\u0022 title=\u002202/03/2016 06:56  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 3, 2016\u003C/time\u003E by Joco223**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-03T19:50:20Z","Content":"\u003E \n\u003E \n\u003E 59 minutes ago, Joco223 said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Ok, Dx11 fixed it but there is now a black border on horizon, In Dx9 you can see the artifact all the way until 130km\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E -EDIT-\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m switching back to Dx9 because EVE has no clouds over oceans, only on land in Dx11\n\u003E \n\nSee if disabling postprocessing kills the artifacts. It\u0027s the button on the bottom section of the UI(alt-f10)\n\n**Edited \u003Ctime datetime=\u00222016-02-03T19:51:11Z\u0022 title=\u002202/03/2016 07:51  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 3, 2016\u003C/time\u003E by blackrack**"},{"CreatedByName":"Joco223","CreatedById":92530,"CreatedDateTime":"2016-02-03T21:02:40Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) I turned it off, now ocean looks like a mixture of brown and green \\*gag\\*. And there is no fade-to-blue in distance"},{"CreatedByName":"StarStryder","CreatedById":152343,"CreatedDateTime":"2016-02-03T22:34:37Z","Content":"\u003E \n\u003E \n\u003E 10 hours ago, selfish\\_meme said:\n\u003E \n\u003E \n\u003E That\u0027s the prior version, I don\u0027t think [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) does the CKAn integration, it may be automatic through Kerbalstuff I am not sure, anyway check the first post their is a newer version that fixes that, it did for me on Ubuntu 15.10 with the same drivers\n\u003E \n\n[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/): [https://github.com/KSP-CKAN/NetKAN/issues/3001](https://github.com/KSP-CKAN/NetKAN/issues/3001)\n\nLooks like the CKAN version number parsing might be a little simplistic.  \n\n**Edited \u003Ctime datetime=\u00222016-02-03T22:35:23Z\u0022 title=\u002202/03/2016 10:35  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 3, 2016\u003C/time\u003E by StarStryder**"},{"CreatedByName":"Joco223","CreatedById":92530,"CreatedDateTime":"2016-02-04T13:46:29Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Any news on how to fix my bug?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-04T14:50:30Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Joco223 said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) Any news on how to fix my bug?\n\u003E \n\nNo idea what\u0027s causing it really."},{"CreatedByName":"Joco223","CreatedById":92530,"CreatedDateTime":"2016-02-04T15:07:30Z","Content":"[@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) It\u0027s okay. Awesome mod btw. Would you like for me to send you my KSP.log if it helps you?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-04T15:18:37Z","Content":"\u003E \n\u003E \n\u003E 8 minutes ago, Joco223 said:\n\u003E \n\u003E \n\u003E [@blackrack](https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/) It\u0027s okay. Awesome mod btw. Would you like for me to send you my KSP.log if it helps you?\n\u003E \n\nThe problem is, there isn\u0027t anything in the log files that would help in the case of shader artifacts. It isn\u0027t an \u0022error\u0022 per se.\n\nIf I can figure it out I\u0027ll get it fixed though so stick around."},{"CreatedByName":"Elthy","CreatedById":63317,"CreatedDateTime":"2016-02-04T16:41:59Z","Content":"I remember you wanted to change the configs to be modulemanager compatible. What became of that? I dont see it in the planned features..."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2016-02-04T16:57:55Z","Content":"\u003E \n\u003E \n\u003E 15 minutes ago, Elthy said:\n\u003E \n\u003E \n\u003E I remember you wanted to change the configs to be modulemanager compatible. What became of that? I dont see it in the planned features...\n\u003E \n\nI believe the \u0022other neat stuff\u0022 entry covers it ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)"}]}