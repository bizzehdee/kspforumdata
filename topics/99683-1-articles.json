{"TopicId":99683,"ForumId":29,"TopicTitle":"Responding to TweakScale resizes","CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-02-14T21:28:28Z","PageNum":1,"Articles":[{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-02-14T21:28:28Z","Content":"\n\u003Cp\u003EQuestion, is their any method of responding to resizes of Tweakscale?\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-02-16T17:16:47Z","Content":"\n\u003Cp\u003EI did it by having a public float as a ksp field, and setting it up as a value that tweak scale modifies in my modules. \u003C/p\u003E\u003Cp\u003EIt\u0027s defaulted to 1 and used as a multiplier in the code. It\u0027s necessary for wheels to scale torque, power consumption, suspension movement and a load of other stuff.\u003C/p\u003E\u003Cp\u003EYou\u0027ll find it in the Kerbal Foundries (KFWheel) source and configs if you want to take a proper look.\u003C/p\u003E\u003Cp\u003EOr, at least I think you mean making a part module aware of what size the part is scaled to?\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-02-16T18:09:21Z","Content":"\n\u003Cp\u003ETweakscale stores the scaled value as a KSPField in its module. \u003C/p\u003E\u003Cp\u003EI account for this by checking for a TweakScale module on my part, checking for the \u0022currentScale\u0022 field and modifying values as needed. The only problem is that Tweakscale stores the value differently depending on what type of scale you are using. The typical 1X, 2X, 3X type of scale just stores the value as a multiplier, but the free sliding scale stores it as a percentage, 0-100% or higher. Unless something has changed you might have to find a way to account for users with both types of scaling.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        if (part.Modules.Contains(\u0022TweakScale\u0022))\u003Cbr\u003E        {\u003Cbr\u003E\t\tPartModule pM = part.Modules[\u0022TweakScale\u0022];\u003Cbr\u003E\t\tif (pM.Fields.GetValue(\u0022currentScale\u0022) != null)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tfloat tweakedScale = 1f;\u003Cbr\u003E\t\t\ttry\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\ttweakedScale = pM.Fields.GetValue\u0026lt;float\u0026gt;(\u0022currentScale\u0022);\u003Cbr\u003E\t\t\t\tDMUtils.Logging(\u0022TweakScale Value Detected On XRay Instrument; Drill Length Set To 8.8m * {0}\u0022, tweakedScale);\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tcatch\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tDMUtils.Logging(\u0022Error in TweakScale PartModule Field; Resetting TweakScale Factor to 1\u0022);\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tscale *= tweakedScale;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-02-22T00:28:05Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EcurrentScale/defaultScale\u003C/strong\u003E is what you are looking for. This is the scaling factor compared to the untouched part, and is independent of the scaletype. Both values are members of the TweakScale module. \u003C/p\u003E\u003Cp\u003E@DMagic, do you want to do that yourself, or is this a workaround for a missing config on my side? The usual way would be to have a drillLength variable in your module, and a SCALEEXPONENTS config which tells TweakScale how to change it. \u003C/p\u003E\u003Cp\u003E@FreeThinker: in the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/80234\u0022 rel=\u0022external nofollow\u0022\u003EOP of the old TweakScale Thread\u003C/a\u003E under \u0027advanced features\u0027, there is an interface description for getting notified on rescale. Maybe this is what you are looking for.\u003C/p\u003E\n"}]}