{"TopicId":63612,"ForumId":34,"TopicTitle":"[1.0.5] Reflection Plugin Continued 2.0","CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-02-18T18:21:44Z","PageNum":2,"Articles":[{"CreatedByName":"HoneyFox","CreatedById":19237,"CreatedDateTime":"2014-02-20T10:54:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwaster\u0022 data-cite=\u0022Starwaster\u0022\u003E\u003Cdiv\u003Emissed this because I was replying when you were posting.\u003Cp\u003Eyes it\u0027s possible, that\u0027s one of the things I was talking about earlier. Having the option to base update rate on how much of your orbit you\u0027ve covered in a given period.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow about using a coefficient like: mainBody.radius / (altitude \u002B mainBody.radius) or something similar? That way it will have higher refresh rate when being closer to the ground.\u003C/p\u003E\n"},{"CreatedByName":"LMA","CreatedById":75775,"CreatedDateTime":"2014-02-20T11:46:23Z","Content":"\n\u003Cp\u003EI hope KW Rocketry uses this I\u0027m having ago now at modding a KW Rocketry fuel tank with Hydrogen GAs and this reflection mod. I\u0027m noob at it though. And I won\u0027t be able to share it as the tank model is not mine.\u003C/p\u003E\n"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2014-02-20T13:27:31Z","Content":"\n\u003Cp\u003EWhat combination of settings would be best for a blurry brushed-metal kind of reflection?\u003C/p\u003E\n"},{"CreatedByName":"nothke","CreatedById":51185,"CreatedDateTime":"2014-02-20T15:19:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rhoark\u0022 data-cite=\u0022rhoark\u0022\u003E\u003Cdiv\u003EWhat combination of settings would be best for a blurry brushed-metal kind of reflection?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust lower the reflection resolution to something like CubeMapSize = 16 . Lower the resolution, more blury it will look like, The caveat is only that you can see the sharp seam of the cube map. But only if you look carefully enough =)\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-02-20T16:11:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwaster\u0022 data-cite=\u0022Starwaster\u0022\u003E\u003Cdiv\u003EEdit: Confirmed that the missing shaders are actually not present in KSP 0.23. (They were apparently available up to KSP 0.22) I\u0027m currently working towards incorporating the missing shaders directly into the plugin.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EContact me on IRC if you need info for that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"lextor","CreatedById":75661,"CreatedDateTime":"2014-02-20T16:33:19Z","Content":"\n\u003Cp\u003EAll we need is more crash and you are doing good .\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-02-20T18:28:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022HoneyFox\u0022 data-cite=\u0022HoneyFox\u0022\u003E\u003Cdiv\u003EHow about using a coefficient like: mainBody.radius / (altitude \u002B mainBody.radius) or something similar? That way it will have higher refresh rate when being closer to the ground.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESomething like that could work but it would need to take into account speed.... otherwise you could end up with a high refresh rate when nothing\u0027s really changing?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022LMA\u0022 data-cite=\u0022LMA\u0022\u003E\u003Cdiv\u003EI hope KW Rocketry uses this I\u0027m having ago now at modding a KW Rocketry fuel tank with Hydrogen GAs and this reflection mod. I\u0027m noob at it though. And I won\u0027t be able to share it as the tank model is not mine.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo share the config \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EBetter yet do it as a ModuleManager config so you don\u0027t even have to distribute part files.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rhoark\u0022 data-cite=\u0022rhoark\u0022\u003E\u003Cdiv\u003EWhat combination of settings would be best for a blurry brushed-metal kind of reflection?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn addition to the answers given I would try playing around with the alpha channel and/or normal map. (bump map)\u003C/p\u003E\u003Cp\u003EBut probably more alpha technique as using the normal map approach would probably leave it too lumpy looking. What you do is have a brushed looking texture using higher values of alpha combined with more brushed texture using lower values. Give something like that a try. Combine two such images and copy it into the alpha channel.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EContact me on IRC if you need info for that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI actually have something working right now using EmbeddedResources and StreamReader. But if I get some spare time today I\u0027ll hit you up in IRC and see if that\u0027s where you were going or if you had something else in mind.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lextor\u0022 data-cite=\u0022lextor\u0022\u003E\u003Cdiv\u003EAll we need is more crash and you are doing good .\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll see your crash and raise you MOAR BOOSTERS.\u003C/p\u003E\u003Cp\u003E(remember, when all you have is boosters, everything looks like gravity...)\u003C/p\u003E\n"},{"CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2014-02-20T20:00:01Z","Content":"\n\u003Cp\u003EAs I was putting the settings in the config file, I was thinking if someone had a lower or higher end machine they would have to change each config manually to adjust the settings. \u003C/p\u003E\u003Cp\u003EWould it be possible to get a global config file that would push all the setting up or down? \u003C/p\u003E\u003Cp\u003EThat way I could set up the defaults in the part config and if you had a higher or lower end machine you could tweak the values globally.\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-02-20T20:39:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022frizzank\u0022 data-cite=\u0022frizzank\u0022\u003E\u003Cdiv\u003EAs I was putting the settings in the config file, I was thinking if someone had a lower or higher end machine they would have to change each config manually to adjust the settings. \u003Cp\u003EWould it be possible to get a global config file that would push all the setting up or down? \u003C/p\u003E\u003Cp\u003EThat way I could set up the defaults in the part config and if you had a higher or lower end machine you could tweak the values globally.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s possible, yes. It\u0027s probably also possible just to check and see what their graphics settings are at and change configuration based on that.\u003C/p\u003E\u003Cp\u003EThat\u0027s assuming that the game graphics settings don\u0027t already affect the the reflection shader to begin with. (which it might not if its KSP specific settings vs stock Unity shader...)\u003C/p\u003E\n"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2014-02-20T22:31:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022frizzank\u0022 data-cite=\u0022frizzank\u0022\u003E\u003Cdiv\u003EAs I was putting the settings in the config file, I was thinking if someone had a lower or higher end machine they would have to change each config manually to adjust the settings. \u003Cp\u003EWould it be possible to get a global config file that would push all the setting up or down? \u003C/p\u003E\u003Cp\u003EThat way I could set up the defaults in the part config and if you had a higher or lower end machine you could tweak the values globally.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETry something like this\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[myPlugin_*]:HAS[  @MODULE[ReflectiveShaderModule] :HAS[#LowUpdateRate[half]]  ] \u003Cbr\u003E{\u003Cbr\u003E  @MODULE[ReflectiveShaderModule] {\u003Cbr\u003E     @updateRate = 150\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E@PART[myPlugin_*]:HAS[  @MODULE[ReflectiveShaderModule] :HAS[#LowUpdateRate[quarter] ]  ] \u003Cbr\u003E{\u003Cbr\u003E  @MODULE[ReflectiveShaderModule] {\u003Cbr\u003E     @updateRate = 75\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-20T22:33:38Z\u0022 title=\u002202/20/2014 10:33  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 20, 2014\u003C/time\u003E by rhoark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2014-02-21T23:12:20Z","Content":"\n\u003Cp\u003EMore awesome....\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/qz5H455.jpg\u0022 alt=\u0022qz5H455.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"EuSouONumero345","CreatedById":40840,"CreatedDateTime":"2014-02-22T15:16:50Z","Content":"\n\u003Cp\u003EPretty cool!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-22T15:24:11Z\u0022 title=\u002202/22/2014 03:24  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 22, 2014\u003C/time\u003E by EuSouONumero345\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2014-02-22T17:23:42Z","Content":"\n\u003Cp\u003EHI I\u0027ve always been a lover of shiny things and this is a little dream come true, works beautifully on mbms, well enough to keep me very happy, still experimenting with various settings, but i thought if you don\u0027t mind I\u0027d share this here as it sort of shows the plugin working to insane levels of shininess and thats only 0.5!!!! Cheers for a great addon.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i1007.photobucket.com/albums/af199/V12Tony/Kerbal%20Space%20Program%20pics%20and%20model%20renders/shinyTiebySMSE_zps732d909f.png\u0022 alt=\u0022shinyTiebySMSE_zps732d909f.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-02-22T19:01:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpannerMonkey(smce)\u0022 data-cite=\u0022SpannerMonkey(smce)\u0022\u003E\u003Cdiv\u003EHI I\u0027ve always been a lover of shiny things and this is a little dream come true, works beautifully on mbms, well enough to keep me very happy, still experimenting with various settings, but i thought if you don\u0027t mind I\u0027d share this here as it sort of shows the plugin working to insane levels of shininess and thats only 0.5!!!! Cheers for a great addon.\u003Cp\u003E\u003Ca href=\u0022http://i1007.photobucket.com/albums/af199/V12Tony/Kerbal%20Space%20Program%20pics%20and%20model%20renders/shinyTiebySMSE_zps732d909f.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i1007.photobucket.com/albums/af199/V12Tony/Kerbal%20Space%20Program%20pics%20and%20model%20renders/shinyTiebySMSE_zps732d909f.png\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOMG it\u0027s a blinged out TIE fighter...\u003C/p\u003E\n"},{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-02-23T11:31:18Z","Content":"\n\u003Cp\u003EAmazing ! There are really pretty examples here \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E.\u003C/p\u003E\u003Cp\u003E@Starwaster: do you think you can use your work to add also transparency (with another shader I guess) ?\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-02-23T19:54:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Justin Kerbice\u0022 data-cite=\u0022Justin Kerbice\u0022\u003E\u003Cdiv\u003EAmazing ! There are really pretty examples here \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E.\u003Cp\u003E@Starwaster: do you think you can use your work to add also transparency (with another shader I guess) ?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt should be able to support adding in any shader. Currently the shaders \u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Ehave to be\u003C/span\u003E are added in as embedded resources. I\u0027m not sure if that can be changed or not. Which means they\u0027re actually added when the dll is compiled as part of the dll.\u003C/p\u003E\u003Cp\u003EWhat would be ideal is if I could take any shader source, compile it and turn it into an asset package and have it loaded up when KSP starts up. Unity does support that but I\u0027m not sure if it\u0027s possible for US to do with the tools provided....? (i.e. it\u0027s a Pro feature, meaning that the game has to be using the Pro license which KSP is but is the toolset available to us the same as what Pro users get?)\u003C/p\u003E\u003Cp\u003EBTW, the next update to this will fix a bug that is in the current download which is that realTimeReflections aren\u0027t properly turned off. But when I fix that bug another creeps in which is that the shader is not properly reflective on the launchpad or when first switched to.... It takes about a minute worth of updating before it kicks in. That\u0027s actually something that was plaguing me before and I thought I fixed it but apparently only replaced it with a different bug. Not really sure what\u0027s happening, as near as I can tell the update function is being properly called but just doesn\u0027t produce or apply the cubemap immediately. Either it\u0027s sitting there updating for the entire minute or just doesn\u0027t work the first time or something. And I can\u0027t programmatically determine whether it\u0027s worked or not, I only know by watching it in-game.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-02-24T04:47:55Z","Content":"\n\u003Cp\u003EAre you rendering to texture in the DLL, rather than doing stuff GPU-side? If so, have you considered rendering single cubemaps per *vessel*, not per part?\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-02-24T06:33:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EAre you rendering to texture in the DLL, rather than doing stuff GPU-side? If so, have you considered rendering single cubemaps per *vessel*, not per part?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EEventually, yes. That sort of optimization is later down the road as I need to get back to Copernicus and start pushing parts out the door. I have another update or two here first.\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-02-25T17:41:27Z","Content":"\n\u003Cp\u003EUpdated \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/70089-Reflection-Plugin-Continued?p=977848\u0026amp;viewfull=1#post977848\u0022 rel=\u0022external nofollow\u0022\u003Eexample usage\u003C/a\u003E post.\u003C/p\u003E\u003Cp\u003EAlso note numbers in the MODULE node should not have an \u0027f\u0027 after them. That was something that has proven to be necessary elsewhere but doesn\u0027t work right here. So \u003Cem\u003EupdateRate\u003C/em\u003E should have been 300, not 300f.\u003C/p\u003E\u003Cp\u003E(the f denotes a float but apparently it doesn\u0027t get read properly in a MODULE{} declaration and would cause the update rate to default to a value of 60)\u003C/p\u003E\n"},{"CreatedByName":"frizzank","CreatedById":57210,"CreatedDateTime":"2014-02-26T19:50:13Z","Content":"\n\u003Cp\u003EI have noticed another bug. Meshes with the shader no longer highlight green when selected or on mouse over.\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-02-26T20:52:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022frizzank\u0022 data-cite=\u0022frizzank\u0022\u003E\u003Cdiv\u003EI have noticed another bug. Meshes with the shader no longer highlight green when selected or on mouse over.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s either because the reflection is applied as emmissivity or because highlighting doesn\u0027t work with non-KSP shaders.\u003C/p\u003E\u003Cp\u003Ereflective parts also dont turn translucent when picked up either. same cause probably. not sure if I can do anything about that. Except for the picking up thing... maybe...\u003C/p\u003E\n"},{"CreatedByName":"blackheart612","CreatedById":42741,"CreatedDateTime":"2014-03-01T10:58:46Z","Content":"\n\u003Cp\u003EAny idea how to integrate this with a single StretchySRB texture/Is it possible?\u003C/p\u003E\n"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2014-03-01T12:10:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackheart612\u0022 data-cite=\u0022blackheart612\u0022\u003E\u003Cdiv\u003EAny idea how to integrate this with a single StretchySRB texture/Is it possible?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo you use TGA or PNG? And in any case: Do you use PNG transparency or TGA alpha for effects in StretchySRB?\u003C/p\u003E\n"},{"CreatedByName":"blackheart612","CreatedById":42741,"CreatedDateTime":"2014-03-01T12:27:10Z","Content":"\n\u003Cp\u003EWell, I use PNG for that matter.\u003C/p\u003E\n"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2014-03-01T13:02:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blackheart612\u0022 data-cite=\u0022blackheart612\u0022\u003E\u003Cdiv\u003EWell, I use PNG for that matter.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn that case, if you want to use this, you should change to TGAs and add an alpha channel (which gonna be the reflections, replacing what you get now with transparency using PNG).\u003C/p\u003E\u003Cp\u003EI wish this could be used only in a specific added layer (to use it only in the glass, for example) but I don\u0027t know if that is possible.\u003C/p\u003E\n"}]}