{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":15,"Articles":[{"CreatedByName":"Hans Dorn","CreatedById":105419,"CreatedDateTime":"2014-03-16T15:55:34Z","Content":"\n\u003Cp\u003ESince I did the complete terminal velocity calculation in the above post, guess I\u0027m excused in the future \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m getting at the exact same result.\u003C/p\u003E\u003Cp\u003Echeers\u003C/p\u003E\n"},{"CreatedByName":"S.O.P.H.I.A.","CreatedById":99941,"CreatedDateTime":"2014-03-16T19:37:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022brusura\u0022 data-cite=\u0022brusura\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Ethe problem is fixed with release 0.12P1\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve been having this exact same problem, where I get flagrant errors whenever I try to get engine stats. Can you tell me how to get .12P1? I can\u0027t find it on the github site.\u003C/p\u003E\u003Cp\u003EAlso, I have two questions. I\u0027m pretty new at this, so I don\u0027t know if they\u0027re super trivial or insanely complicated.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EFirst\u003C/strong\u003E: What is the best way to determine if my airplane is upside-down? (I\u0027m making a vtol, and I want the engines to cut out if I flip over so I don\u0027t jet downwards).\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ESecond\u003C/strong\u003E: What is the best way to determine if I\u0027m moving sideways relative to my current facing? So if, for example, my nose is facing North, how do I determine my east/west speed? (similarly, it would be useful, but not as useful to me, to determine my forwards/backwards speed relative to my facing).\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-16T21:12:19Z\u0022 title=\u002203/16/2014 09:12  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 16, 2014\u003C/time\u003E by S.O.P.H.I.A.\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-03-16T23:15:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EReally? That\u0027s a bit too ... Mechjeb. I\u0027d rather have the components that go into the calculation than the final result of it. We\u0027re supposed to be writing the autopilot ourselves here.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI hear you and very much agree. You should be enticed to investigate what terminal velocity actually is to build a nice script for it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Hans Dorn","CreatedById":105419,"CreatedDateTime":"2014-03-17T01:40:50Z","Content":"\n\u003Cp\u003EI\u0027m doing this for staging right now:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// set up fuel levels for staging\u003Cbr\u003Eset f_lev to list().\u003Cbr\u003Eset f_lev:add to 4*360.\u003Cbr\u003Eset f_lev:add to 360.\u003Cbr\u003Eset f_lev:add to 0.01.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E... snip...\u003Cbr\u003E\u003Cbr\u003E// inside control loop:\u003Cbr\u003E// staging\u003Cbr\u003Eif ship:liquidfuel \u0026lt; f_lev#0 { // check first entry of list\u003Cbr\u003E\tstage.\u003Cbr\u003E\tif f_lev:length \u0026gt; 1 {\u003Cbr\u003E\t\tset f_lev:remove to 0. // remove first entry\u003Cbr\u003E\t}.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENot as versatile as iterating through your engines, but pretty fast. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ECheers.\u003C/p\u003E\n"},{"CreatedByName":"Jordansinn","CreatedById":75434,"CreatedDateTime":"2014-03-17T02:48:15Z","Content":"\n\u003Cp\u003EIs there anyway to get this working with Remote Tech 2? Both mods say they have some sort of integration however when out of RT2 communication range kOS is unable to alter steering or throttle.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-03-17T03:30:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jordansinn\u0022 data-cite=\u0022Jordansinn\u0022\u003E\u003Cdiv\u003EIs there anyway to get this working with Remote Tech 2? Both mods say they have some sort of integration however when out of RT2 communication range kOS is unable to alter steering or throttle.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere still seem to be some kinks in the interoperation between the two \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"S.O.P.H.I.A.","CreatedById":99941,"CreatedDateTime":"2014-03-18T06:06:13Z","Content":"\n\u003Cp\u003EOh, I had an idea. It would be awesome if, in addition to .txt\u0027s, kOS could open a unique file type (ex. .kos). if you typed \u0027run xScript\u0027 in the console and there was an xScript.txt and a xScript.kos, it would prioritize the .kos for simplicity.\u003C/p\u003E\u003Cp\u003EThe main benefit would be that you could set a different default program to edit .kos files, such as notepad\u002B\u002B or one of the dedicated kOS editing programs, and notepad\u002B\u002B could then detect the file being used and use the default user-defined language for it (because really, most of us probably have one that we slapped together).\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-03-18T06:43:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022S.O.P.H.I.A.\u0022 data-cite=\u0022S.O.P.H.I.A.\u0022\u003E\u003Cdiv\u003EThe main benefit would be that you could set a different default program to edit .kos files, such as notepad\u002B\u002B or one of the dedicated kOS editing programs, and notepad\u002B\u002B could then detect the file being used and use the default user-defined language for it (because really, most of us probably have one that we slapped together).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI am not sure I understand you. Are you proposing some kind of version management? Because I think the Saturn IDE was going that way too.\u003C/p\u003E\n"},{"CreatedByName":"Jordansinn","CreatedById":75434,"CreatedDateTime":"2014-03-18T07:37:42Z","Content":"\n\u003Cp\u003EWhat is the unit id for?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-18T15:15:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EI am not sure I understand you. Are you proposing some kind of version management? Because I think the Saturn IDE was going that way too.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo. It\u0027s saying give it a unique filename suffix because of how many programs there are out there that use the filename suffix to identify what type of file it is. Programmer\u0027s text editors tend to do that to decide what syntax to expect in the file for color highlighting purposes.\u003C/p\u003E\u003Cp\u003ECalling them .txt tends to make them just generic ascii text, which makes it hard to define special syntax highlights for them without those rules also ending up being applied to all other ascii text files too.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-03-19T00:33:59Z","Content":"\n\u003Cp\u003EAh, right. As long as we can also keep everything working with .txt, I do not see any objections.\u003C/p\u003E\n"},{"CreatedByName":"Kethevin","CreatedById":64466,"CreatedDateTime":"2014-03-19T00:43:49Z","Content":"\n\u003Cp\u003EI\u0027ve been practicing landing programs on Kerbin. \u003C/p\u003E\u003Cp\u003EWhat I typically do is set a maneuver node on the opposite side of the planet from where I plan to land, lowering the periapsis to a point where the atmosphere helps ensure I land close to where I am targeting.\u003C/p\u003E\u003Cp\u003EI\u0027ve gotten good with a script to execute the node itself but I\u0027m wondering what the best way (if any) of setting something up so that K-OS can create the node. It\u0027s often in an area with my first landing, so I have nothing specific there to target.\u003C/p\u003E\n"},{"CreatedByName":"aNewHope","CreatedById":76088,"CreatedDateTime":"2014-03-19T17:18:47Z","Content":"\n\u003Cp\u003EHi there,\u003C/p\u003E\u003Cp\u003Ea few months ago I have written a kOS launching program. It worked very well, but then a new KSP version came out and I forgot about kOS and the program. Now that Erendrake is working on this new version of kOS (thank you very much, your work is awesome), I have used the last two weeks to update for the current version and make it usable with FAR (now it\u0027s almost only usable with FAR). It works almost perfect, uses a correct gravity turn trajectory (follows surface:prograde very closely) and utilizes maneuver nodes to complete its orbit. \u003C/p\u003E\u003Cp\u003ESo here it is, just for you:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003Estaging doesn\u0027t works with kOS 11.1 !\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E \u003Ca href=\u0022https://drive.google.com/folderview?id=0B_OMVz6IPxWUUWxvb2tsSHlNX3c\u0026amp;usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003EkOS programs\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/86TGv\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EPS.: It works by using a lot of sub-programs. L1 is the master-program. Run it with the parameters \u003C/p\u003E\u003Cp\u003E(your orbit altitude in m, launch inclination (0 = east; 90 = north; etc.), number of stages on your rocket).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-22T17:27:45Z\u0022 title=\u002203/22/2014 05:27  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 22, 2014\u003C/time\u003E by aNewHope\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"frencrs","CreatedById":95489,"CreatedDateTime":"2014-03-19T23:23:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marianoapp\u0022 data-cite=\u0022marianoapp\u0022\u003E\u003Cdiv\u003E@SBaL: wrap the two IFs with a loop, something like \u0022until false { .... }\u0022. Oh, and add parenthesis to the expressions, they work like they should most of the time but there may be some weird behavior with operator precedence.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Emarianoapp, do you have a copy of the grammar and syntax you\u0027re using for \u0022the_merge\u0022 branch? I\u0027m trying to get more familiar with your changes.\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-03-19T23:40:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022frencrs\u0022 data-cite=\u0022frencrs\u0022\u003E\u003Cdiv\u003Emarianoapp, do you have a copy of the grammar and syntax you\u0027re using for \u0022the_merge\u0022 branch? I\u0027m trying to get more familiar with your changes.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually the new version is not based on that branch, the code is in the new github organization \u003Ca href=\u0022https://github.com/KSP-KOS/KOS\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EThe grammar and syntax of the language remain the same, the changes were made in how that language is interpreted and executed. Anyway we now use a formal grammar to describe the language, and you can find it \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/blob/master/Compilation/KS/kRISC.tpg\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"frencrs","CreatedById":95489,"CreatedDateTime":"2014-03-20T00:31:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marianoapp\u0022 data-cite=\u0022marianoapp\u0022\u003E\u003Cdiv\u003EActually the new version is not based on that branch, the code is in the new github organization \u003Ca href=\u0022https://github.com/KSP-KOS/KOS\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003Cp\u003EThe grammar and syntax of the language remain the same, the changes were made in how that language is interpreted and executed. Anyway we now use a formal grammar to describe the language, and you can find it \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/blob/master/Compilation/KS/kRISC.tpg\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAwesome, thank you!\u003C/p\u003E\n"},{"CreatedByName":"erkha343","CreatedById":1957,"CreatedDateTime":"2014-03-20T18:24:54Z","Content":"\n\u003Cp\u003Ehmm, does the line \u0022lock steering to node.\u0022 not work in this version? It doesn\u0027t work for me...\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-20T18:36:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022frencrs\u0022 data-cite=\u0022frencrs\u0022\u003E\u003Cdiv\u003EAwesome, thank you!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre there plans of a new development release soon? The fix for the bug with ship:solidfuel is done according to github but I don\u0027t have the development environment set up to compile the source myself. I\u0027m waiting on ship:solidfuel before I continue the work on the mission I\u0027m trying to tweak. (I\u0027m trying to make my generic do-everything ascent script handle asparagus staging even when the ship has a combination of liquid and solid fuel. Because it\u0027s doing asparagus staging, using stage:solidfuel (which does work) isn\u0027t good enough for my needs, as asparagus staging tends to confuse the mod\u0027s calculation of what qualifies as being \u0022part of this stage\u0022. Because there\u0027s decouplers connecting to parts of the ship that are currently active it\u0027s not clear what the \u0022right\u0022 answer is about that, so I just want to use the ship\u0027s total fuel to calculate the fuel loss rate. \u003C/p\u003E\u003Cp\u003E(The key to my asparagus algorithm is that if I haven\u0027t changed the throttle setting and yet I notice a sudden drop in how fast the fuel is disappearing, I assume that must be because one or more engines have run dry, so that\u0027s what means its time to hit the next stage button. When I wanted to add support for solid boosters I realized that essentially, strapping solid boosters on the side of a liquid rocket is so similar to asparagus staging that I should be able to use the same algorithm for both. The key to the staging activator on asparagus staging is the need to support the idea that you shouldn\u0027t wait for all the engines to run dry to hit \u0022stage\u0022, but instead just hit strange when at least some engines have stopped. And that\u0027s basically also what you\u0027re doing when you peel off solid boosters from the side of a liquid engine stage.)\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-20T18:39:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erkha343\u0022 data-cite=\u0022erkha343\u0022\u003E\u003Cdiv\u003Ehmm, does the line \u0022lock steering to node.\u0022 not work in this version? It doesn\u0027t work for me...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u0022nodes\u0022 are now structures containing many \u0027suffix\u0027 components. To steer in the direction of the node you need to \u0022lock steering to node:deltav\u0022. Node:deltav is the vector of the total delta V that comes from summing together the prograde, radial out, and normal components of the node.\u003C/p\u003E\n"},{"CreatedByName":"erkha343","CreatedById":1957,"CreatedDateTime":"2014-03-20T21:54:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u0022nodes\u0022 are now structures containing many \u0027suffix\u0027 components. To steer in the direction of the node you need to \u0022lock steering to node:deltav\u0022. Node:deltav is the vector of the total delta V that comes from summing together the prograde, radial out, and normal components of the node.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks mate, something else...\u003C/p\u003E\u003Cp\u003EI\u0027m making a simple script to LKO. It runs perfectly until it\u0027s time for the circularization burn...\u003C/p\u003E\u003Cp\u003Ewait until apoapsis \u0026gt;80000.\u003C/p\u003E\u003Cp\u003Elock throttle to 0.\u003C/p\u003E\u003Cp\u003Elock steering to prograde.\u003C/p\u003E\u003Cp\u003Eprint \u0022Gravity turn end.\u0022. wait 2.\u003C/p\u003E\u003Cp\u003Eprint \u0022Coasting to Ap.\u0022.\u003C/p\u003E\u003Cp\u003Ewait until eta:apoapsis \u0026lt;30.\u003C/p\u003E\u003Cp\u003Eprint \u0022Begining circularization burn.\u0022.\u003C/p\u003E\u003Cp\u003Elock throttle to 1.\u003C/p\u003E\u003Cp\u003Ewait until periapsis \u0026gt;80000.\u003C/p\u003E\u003Cp\u003Elock throttle to 0.\u003C/p\u003E\u003Cp\u003Eprint \u0022Launch complete, vessel in 80km LKO.\u0022.\u003C/p\u003E\u003Cp\u003EIt works well, the periapsis is 80km, but the apoapsis burns to \u0026gt;300km. How do I do some kind of If statement so that it makes an eccentric 80km orbit?\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-03-20T21:56:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EAre there plans of a new development release soon? \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDone! \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/releases/tag/v12.0P2\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/releases/tag/v12.0P2\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-03-20T22:04:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erkha343\u0022 data-cite=\u0022erkha343\u0022\u003E\u003Cdiv\u003EIt works well, the periapsis is 80km, but the apoapsis burns to \u0026gt;300km. How do I do some kind of If statement so that it makes an eccentric 80km orbit?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe problem is that as soon as your periapsis is higher than your apoapsis the periapsis becomes the apoapsis and that\u0027s why the \u0022wait until periapsis \u0026gt; 80000\u0022 statement doesn\u0027t work as expected.\u003C/p\u003E\u003Cp\u003EThis subject was discussed previously, starting from \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/68089-0-23-kOS-Scriptable-Autopilot-System-v0-11-2-13?p=1015091\u0026amp;viewfull=1#post1015091\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E post.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-21T15:35:49Z","Content":"\n\u003Cp\u003EWhy would I get the ouput\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EAAA\u003Cbr\u003EVariable mysteer* is not defined\u003Cbr\u003EInstruction 588\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFrom this part of my code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprint \u0022AAA\u0022.\u003Cbr\u003Eset mysteer to up.\u003Cbr\u003Eprint \u0022BBB\u0022.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI put the print statements in there to try to narrow down where the error message was being produced. It prints AAA but not BBB, thus making me think it\u0027s coming from the statement \u0022set mysteer to up.\u0022\u003C/p\u003E\u003Cp\u003EBut... of *course* mysteer isn\u0027t set. That\u0027s why I\u0027m trying to set it.\u003C/p\u003E\u003Cp\u003EAlso, weirdly, I don\u0027t know where the asterisk is coming from in the error message. It doesn\u0027t seem to be there in the line of source code in github that builds the exception message, making me think it\u0027s actually trying to look up a variable name that includes an asterisk in the variable name, for some reason, even though that\u0027s not in my script code anywhere.\u003C/p\u003E\u003Cp\u003EI could provide the entire script for you to run if it would help, but it\u0027s a lot of pieces to post and so I\u0027d prefer to put it on pastebin or google drive than paste it in the forum.\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-03-21T15:56:28Z","Content":"\n\u003Cp\u003EVariables with asterisks are function pointers used by locks, so I\u0027m betting you are locking mysteer to an expression somewhere on the script. We\u0027ll have to find a way to deal with this identifiers that are used both as variables and locks in the same script.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-21T17:06:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marianoapp\u0022 data-cite=\u0022marianoapp\u0022\u003E\u003Cdiv\u003EVariables with asterisks are function pointers used by locks, so I\u0027m betting you are locking mysteer to an expression somewhere on the script. We\u0027ll have to find a way to deal with this identifiers that are used both as variables and locks in the same script.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDoes it parse through the entire script first and therefore decide that mysteer is used in a lock somewhere, then go back and actually run the script? I ask because while it\u0027s true that I do also lock mysteer, I don\u0027t do it until later, further down, after the line where the error is coming. FIRST I use \u0027set\u0027 with mysteer and then don\u0027t change to using \u0027lock\u0027 until later.\u003C/p\u003E\u003Cp\u003EHm.. Well, I just ran the following test script and it seems to prove that yeah if there is a lock anywhere in the script, even in the \u0022future\u0022, then it retroactively messes up \u0022sets\u0022 that occur on the same variable earlier. (So I presume there must be some sort of pre-parsing going on or that would be impossible).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprint \u0022Before setting.\u0022.\u003Cbr\u003Eset thingy to \u0022some set val\u0022.\u003Cbr\u003Eprint \u0022After setting.\u0022.\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Before locking.\u0022.\u003Cbr\u003Elock thingy to \u0022some locked val\u0022.\u003Cbr\u003Eprint \u0022After locking.\u0022.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOutput:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EBefore setting.\u003Cbr\u003EVariable thingy* is not defined\u003Cbr\u003EInstruction 10.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAt least now that I know what\u0027s causing it I can go through and fix it by essentially making sure that if a variable ever gets used with \u0027lock\u0027, that it always gets used with \u0022lock\u0022 everywhere even in places where the value is an unchanging constant.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-21T17:25:52Z\u0022 title=\u002203/21/2014 05:25  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 21, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"}]}