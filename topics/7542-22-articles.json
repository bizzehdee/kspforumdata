{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":22,"Articles":[{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-11-28T05:03:49Z","Content":"\n\u003Cp\u003ELook at how Ratzap does it. Fusebox does just that IIRC.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2013-11-28T06:17:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003ELook at how Ratzap does it. Fusebox does just that IIRC.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat certainly looks like it might have some logic in it, but unfortunately there is no source code in the download. I\u0027ll keep an eye on it for when it gets updated.\u003C/p\u003E\n"},{"CreatedByName":"dtobi","CreatedById":90882,"CreatedDateTime":"2013-11-28T17:32:25Z","Content":"\n\u003Cp\u003EHello,\u003C/p\u003E\u003Cp\u003EI have another question. Does anyone have a working config for parts that float on water? I tried fiddling with the following\u003C/p\u003E\u003Cp\u003Ebuoyancy = X (tried values from 1 to 100, no change in behavior)\u003C/p\u003E\u003Cp\u003Eand\u003C/p\u003E\u003Cp\u003EMODULE {\u003C/p\u003E\u003Cp\u003E name = PartBuoyancy\u003C/p\u003E\u003Cp\u003E buoyancy = 100\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E--\u0026gt; This doesn\u0027t even load properly.\u003C/p\u003E\u003Cp\u003EDo you have any clues? I would like to make a part float on the water (like a raft).\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-11-28T17:57:30Z","Content":"\n\u003Cp\u003ENone of those load becase buoyancy isn\u0027t a parameter that the game looks for when it loads the cfg file and because the \u0022PartBuoyancy\u0022 is not a PartModule. You\u0027ll have to write a plugin to do that, and it shouldn\u0027t be that hard. Like it could be just that:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Text;\u003Cbr\u003Eusing System.Threading.Tasks;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace buoyancy\u003Cbr\u003E{\u003Cbr\u003E    public class ModuleBuoyancy : PartModule\u003Cbr\u003E    {\u003Cbr\u003E        [KSPField]\u003Cbr\u003E        public float buoyancy;\u003Cbr\u003E\u003Cbr\u003E        public override void OnStart(PartModule.StartState state)\u003Cbr\u003E        {\u003Cbr\u003E            this.part.partBuoyancy.buoyancyForce = buoyancy;\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThen, you would just need to add this to the cfg file:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = ModuleBuoyancy\u003Cbr\u003E    buoyancy = 100 (or whatever you want)\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENot that hard, you can do it yourself if you really wanted to \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-28T18:04:57Z\u0022 title=\u002211/28/2013 06:04  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 28, 2013\u003C/time\u003E by stupid_chris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"dtobi","CreatedById":90882,"CreatedDateTime":"2013-11-28T19:43:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003ENone of those load becase buoyancy isn\u0027t a parameter that the game looks for when it loads the cfg file and because the \u0022PartBuoyancy\u0022 is not a PartModule. You\u0027ll have to write a plugin to do that, and it shouldn\u0027t be that hard. Like it could be just that:\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003ENot that hard, you can do it yourself if you really wanted to \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for your quick reply! I really appreciate it!\u003C/p\u003E\u003Cp\u003EI tried your approach before but I did not succeed because I got an error (see below code):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\tpublic class KM_SimpleFloater : PartModule \u003Cbr\u003E\t{\u003Cbr\u003E\u003Cbr\u003E\t\t// remember the time wehen the countdown was started\u003Cbr\u003E\t\t[KSPField(isPersistant = true, guiActive = true, guiName = \u0022Buoyancy\u0022)]\u003Cbr\u003E\t\tprivate float buoyancy = 1.0F;\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPField(isPersistant = true, guiActive = true, guiName = \u0022BuoyancyForce\u0022)]\u003Cbr\u003E\t\tprivate float buoyancyForce = 1.0F;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\t\tpublic override void OnStart(PartModule.StartState state)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tthis.part.partBuoyancy.buoyancy = buoyancy;\u003Cbr\u003E\t\t\tthis.part.partBuoyancy.buoyancyForce = buoyancyForce;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPEvent(guiName = \u0022buoyancyForce \u002B\u0022, guiActive = true)]\u003Cbr\u003E\t\tpublic void increaseBuoyancyForce ()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tbuoyancy = buoyancy \u002B 10f;\u003Cbr\u003E\t\t\tthis.part.partBuoyancy.buoyancyForce = buoyancyForce;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPEvent(guiName = \u0022buoyancyForce -\u0022, guiActive = true)]\u003Cbr\u003E\t\tpublic void decreaseBuoyancyForce ()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tbuoyancy = buoyancy - 10f;\u003Cbr\u003E\t\t\tthis.part.partBuoyancy.buoyancyForce = buoyancy;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPEvent(guiName = \u0022buoyancy \u002B\u0022, guiActive = true)]\u003Cbr\u003E\t\tpublic void increaseBuoyancy ()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tbuoyancy = buoyancy \u002B 10f;\u003Cbr\u003E\t\t\tthis.part.partBuoyancy.buoyancy = buoyancy;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPEvent(guiName = \u0022buoyancy -\u0022, guiActive = true)]\u003Cbr\u003E\t\tpublic void decreaseBuoyancy ()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tbuoyancy = buoyancy - 10f;\u003Cbr\u003E\t\t\tthis.part.partBuoyancy.buoyancy = buoyancy;\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EGives me: [Exception]: NullReferenceException: Object reference not set to an instance of an object\u003C/p\u003E\u003Cp\u003EI altered the code this way and I got a PartBuoyanc Object back which I can now alter. However, it doesn\u0027t affect anything. My part does not really float (its supposed to lift the capsule after splashdown). The capsule stays in teh water without any change, regardless of what I change the values to.\u003C/p\u003E\u003Cp\u003EHere is my new code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003Epublic class KM_SimpleFloater : PartModule \u003Cbr\u003E\t{\u003Cbr\u003E\u003Cbr\u003E\t\t// remember the time wehen the countdown was started\u003Cbr\u003E\t\t[KSPField(isPersistant = true, guiActive = true, guiName = \u0022Buoyancy\u0022)]\u003Cbr\u003E\t\tprivate float buoyancy = 1.0F;\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPField(isPersistant = true, guiActive = true, guiName = \u0022BuoyancyForce\u0022)]\u003Cbr\u003E\t\tprivate float buoyancyForce = 1.0F;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\t\tprivate void setBuoyancy() {\u003Cbr\u003E\t\t\tPartBuoyancy partB = part.GetComponent\u0026lt;PartBuoyancy\u0026gt;();\u003Cbr\u003E\t\t\tif (partB)\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tpartB.buoyancy = buoyancy;\u003Cbr\u003E\t\t\t\tpartB.buoyancyForce = buoyancyForce;\u003Cbr\u003E\t\t\t} else {\u003Cbr\u003E\t\t\t\tprint (\u0022PartBuoyancy not fund\u0022);\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\t\tpublic override void OnStart(PartModule.StartState state)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tPartBuoyancy partB = part.GetComponent\u0026lt;PartBuoyancy\u0026gt;();\u003Cbr\u003E\t\t\tif (partB)\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tpartB.buoyancy = buoyancy;\u003Cbr\u003E\t\t\t\tpartB.buoyancyForce = buoyancyForce;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\t\t\t} else {\u003Cbr\u003E\t\t\t\tprint (\u0022PartBuoyancy not fund\u0022);\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPEvent(guiName = \u0022buoyancyForce \u002B\u0022, guiActive = true)]\u003Cbr\u003E\t\tpublic void increaseBuoyancyForce ()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tbuoyancyForce = buoyancyForce \u002B 10f;\u003Cbr\u003E\t\t\tsetBuoyancy();\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPEvent(guiName = \u0022buoyancyForce -\u0022, guiActive = true)]\u003Cbr\u003E\t\tpublic void decreaseBuoyancyForce ()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tbuoyancyForce = buoyancyForce - 10f;\u003Cbr\u003E\t\t\tsetBuoyancy();\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPEvent(guiName = \u0022buoyancy \u002B\u0022, guiActive = true)]\u003Cbr\u003E\t\tpublic void increaseBuoyancy ()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tbuoyancy = buoyancy \u002B 10f;\u003Cbr\u003E\t\t\tsetBuoyancy();\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t[KSPEvent(guiName = \u0022buoyancy -\u0022, guiActive = true)]\u003Cbr\u003E\t\tpublic void decreaseBuoyancy ()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tbuoyancy = buoyancy - 10f;\u003Cbr\u003E\t\t\tsetBuoyancy();\u003Cbr\u003E\t\t}\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIs anything necessary in addition to setting these values? What are good values for it? I tried everything from 1 to 500 for buoyancy and buoyancyForce . Any suggestions for sane values here?\u003C/p\u003E\u003Cp\u003EThanks a lot!!!\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-11-29T22:49:32Z","Content":"\n\u003Cp\u003EHmm. I haven\u0027t dealt with uoyancy much yet. You might want to check InfiniteDice\u0027s source for the boat parts, he did deal with it, you could learn there.\u003C/p\u003E\n"},{"CreatedByName":"Kashaar","CreatedById":95270,"CreatedDateTime":"2013-12-10T19:39:11Z","Content":"\n\u003Cp\u003EHello everyone! I\u0027m new here. And I have a hopefully simple question: how do I make my partmodule class load properties from my part.cfg? Is there anything I have to do besides defining the variables as KSPFields?\u003C/p\u003E\u003Cp\u003ERelevant bits:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic class KAntigrav : PartModule\u003Cbr\u003E{\u003Cbr\u003E    [KSPField(isPersistant = false, guiActive=true)]\u003Cbr\u003E    public double agEfficiency;\u003Cbr\u003E\u003Cbr\u003E    [KSPField(isPersistant = false, guiActive = true)]\u003Cbr\u003E    public double agStrength;\u003Cbr\u003E\u003Cbr\u003E    [KSPField(isPersistant = false, guiActive = true)]\u003Cbr\u003E    public double agAttenuation;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd from the part.cfg:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = KAntigrav\u003Cbr\u003E\tagStrength = 1.2\u003Cbr\u003E\tagAttenuation = 10\u003Cbr\u003E\tagEfficiency = 500\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnyone have any idea what I\u0027m missing? It\u0027s probably something obvious that I don\u0027t yet understand.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-10T19:49:40Z\u0022 title=\u002212/10/2013 07:49  PM\u0022 data-short=\u002210 yr\u0022\u003EDecember 10, 2013\u003C/time\u003E by Kashaar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2013-12-10T20:45:00Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EI do not believe KSPField and the part.cfg are linked.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EFrom \u003C/span\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/7529-Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026amp;viewfull=1#post156430\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Ethe thread announcing KSPFields being added\u003C/span\u003E\u003C/a\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E, KSPFields are a way to make persistent variables saved to persistence.sfs and of exposing them to the in-game UI.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EThere is nothing there about linking them to the part.cfg that I can see.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003ETo do what I think you are asking, you need to initialize your variable as a KSPField, and then assign that variable the value from the part.cfg through the usual part.cfg loading logic.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Eedit: Apparently I was wrong, post left so replies to it below make sense but see TaranisElsu\u0027s post (5 below this one) for correct answer.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-11T03:04:13Z\u0022 title=\u002212/11/2013 03:04  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 11, 2013\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kashaar","CreatedById":95270,"CreatedDateTime":"2013-12-10T21:02:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003ETo do what I think you are asking, you need to initialize your variable as a KSPField, and then assign that variable the value from the part.cfg through the usual part.cfg loading logic.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, I thought those were linked somehow. Google isn\u0027t being very helpful unfortunately... or my google-fu is just too weak, so what is the usual part.cfg loading logic? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIn place of an explanation, a link to an open source plugin with a pointer towards the relevant piece of code would also be helpful.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-12-10T21:53:13Z","Content":"\n\u003Cp\u003EI\u0027m not sure what exactly you are asking for, but that is what basically happens when the game loads your custom part on first game startup:\u003C/p\u003E\u003Cp\u003E- Game loads cfg\u003C/p\u003E\u003Cp\u003E- For each Module element, it looks for a class with the name specified in the cfg that implements PartModule\u003C/p\u003E\u003Cp\u003E- It loops though all of the classes members and looks for KSPFields, KSPEvents and KSPActions (thats what i am aware of, maybe even more) and uses them to create the PartModules pm.Actions, pm.Events \u0026amp; pm.Fields lists\u003C/p\u003E\u003Cp\u003E- Those lists are later used by lsp while initialization, loading or saving the game to \u0022automatically\u0022 read/write your data for you.\u003C/p\u003E\u003Cp\u003ESo yes, KSPField is just a simple .NET attribute that signals KSP to treat however you configured this attribute for your field/method. There isn\u0027t really sth we could point you to, except maybe to some of PartModules members (of type Base...List)\u003C/p\u003E\n"},{"CreatedByName":"Kashaar","CreatedById":95270,"CreatedDateTime":"2013-12-10T22:08:54Z","Content":"\n\u003Cp\u003EHmm, so KSPFields are a red herring in this case, I suppose... My problem is that the game doesn\u0027t seem to be assigning my PartModule\u0027s variables the values defined in the part.cfg.\u003C/p\u003E\u003Cp\u003EI\u0027m writing an antigravity plugin, and I want some factors (agStrength, agAttenuation, etc.) to be set by the part.cfg, so I can create multiple parts with differing characteristics, but using the same algorithms. With the code above, the three variables are all 0 when I use the debug window to look at them in game. I can define them in my code like this to make it work:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic double agEfficiency = 500;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E...but that kind of defeats the purpose of the part.cfg, if I understand it correctly.\u003C/p\u003E\u003Cp\u003EI\u0027m sorry if I haven\u0027t expressed myself clearly. I\u0027m very new to C#, so if this is something obvious I should know I\u0027m sorry. I only have a little previous experience in Python, and took a Java class maybe 10 years ago that never amounted to anything.\u003C/p\u003E\u003Cp\u003EHmm, after this part:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E- For each Module element, it looks for a class with the name specified in the cfg that implements PartModule\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E...what does the game do with the attributes inside the MODULE {} brackets?\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-12-10T23:45:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kashaar\u0022 data-cite=\u0022Kashaar\u0022\u003E\u003Cdiv\u003EHmm, so KSPFields are a red herring in this case, I suppose... My problem is that the game doesn\u0027t seem to be assigning my PartModule\u0027s variables the values defined in the part.cfg.\u003Cp\u003EI\u0027m writing an antigravity plugin, and I want some factors (agStrength, agAttenuation, etc.) to be set by the part.cfg, so I can create multiple parts with differing characteristics, but using the same algorithms. With the code above, the three variables are all 0 when I use the debug window to look at them in game. I can define them in my code like this to make it work:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic double agEfficiency = 500;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E...but that kind of defeats the purpose of the part.cfg, if I understand it correctly.\u003C/p\u003E\u003Cp\u003EI\u0027m sorry if I haven\u0027t expressed myself clearly. I\u0027m very new to C#, so if this is something obvious I should know I\u0027m sorry. I only have a little previous experience in Python, and took a Java class maybe 10 years ago that never amounted to anything.\u003C/p\u003E\u003Cp\u003EHmm, after this part:\u003C/p\u003E\u003Cp\u003E...what does the game do with the attributes inside the MODULE {} brackets?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat you first did is right. If you assign the KAntigrav module to a part and inpuit the values you did above, you should be able to see those values when right clicking the part in the flight scene. KSPField can be used to fetch values from the config file for partmodule or to store a value in the persistance file.\u003C/p\u003E\u003Cp\u003EIf you look \u003Ca href=\u0022https://github.com/StupidChris/RealChute/blob/master/Plugins/RealChuteModule.cs#L21-L88\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E, you can see all the values needed by RealChuteModule. Simply listing them in KSPField will get them in the config for you.\u003C/p\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2013-12-11T02:14:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kashaar\u0022 data-cite=\u0022Kashaar\u0022\u003E\u003Cdiv\u003EHello everyone! I\u0027m new here. And I have a hopefully simple question: how do I make my partmodule class load properties from my part.cfg? Is there anything I have to do besides defining the variables as KSPFields?\u003Cp\u003ERelevant bits:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic class KAntigrav : PartModule\u003Cbr\u003E{\u003Cbr\u003E    [KSPField(isPersistant = false, guiActive=true)]\u003Cbr\u003E    public double agEfficiency;\u003Cbr\u003E\u003Cbr\u003E    [KSPField(isPersistant = false, guiActive = true)]\u003Cbr\u003E    public double agStrength;\u003Cbr\u003E\u003Cbr\u003E    [KSPField(isPersistant = false, guiActive = true)]\u003Cbr\u003E    public double agAttenuation;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd from the part.cfg:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = KAntigrav\u003Cbr\u003E\tagStrength = 1.2\u003Cbr\u003E\tagAttenuation = 10\u003Cbr\u003E\tagEfficiency = 500\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnyone have any idea what I\u0027m missing? It\u0027s probably something obvious that I don\u0027t yet understand.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou definitely can use KSPFields for loading values from the part.cfg file. I started writing an example showing how here: \u003Ca href=\u0022https://github.com/taraniselsu/TacExamples/tree/master/05-KspFields\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacExamples/tree/master/05-KspFields\u003C/a\u003E. It is unfinished though \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E. I could not get my type (that extends IConfigNode) to work even though it should.\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E\u003Cstrong\u003EI did find that KSPField\u0027s do not work if they are double\u0027s. Change your code above to float\u0027s and it should work fine.\u003C/strong\u003E\u003C/em\u003E\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-12-11T02:17:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TaranisElsu\u0022 data-cite=\u0022TaranisElsu\u0022\u003E\u003Cdiv\u003E\u003Cem\u003E\u003Cstrong\u003EI did find that KSPField\u0027s do not work if they are double\u0027s. Change your code above to float\u0027s and it should work fine.\u003C/strong\u003E\u003C/em\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, yes KSPField loads floats, bools and strings. Else that won\u0027t work.\u003C/p\u003E\n"},{"CreatedByName":"Kashaar","CreatedById":95270,"CreatedDateTime":"2013-12-11T02:20:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003EAh, yes KSPField loads floats, bools and strings. Else that won\u0027t work.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ED\u0027oh \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E Thanks a lot everyone, it works now!\u003C/p\u003E\n"},{"CreatedByName":"panzer1b","CreatedById":95108,"CreatedDateTime":"2013-12-12T19:29:27Z","Content":"\n\u003Cp\u003Ei have one problem, im sortof new to C# and the code used in KSP, but i do have some programming experience\u003C/p\u003E\u003Cp\u003Ehow can i make a dynamic color definition?\u003C/p\u003E\u003Cp\u003Eby this im asking how to define a dynamic color (its a color for a tracer if you want me to be specific)\u003C/p\u003E\u003Cp\u003Ecolor i have currently is defined like this:\u003C/p\u003E\u003Cp\u003E public Color tracer = new Color(1.0, 1.0, 1.0);\u003C/p\u003E\u003Cp\u003Ebut i want to be able to use floats in the part\u0027s cfg file like so: \u003C/p\u003E\u003Cp\u003E [KSPField]\u003C/p\u003E\u003Cp\u003E public float color_red = 1.0f;\u003C/p\u003E\u003Cp\u003E [KSPField]\u003C/p\u003E\u003Cp\u003E public float color_green = 1.0f;\u003C/p\u003E\u003Cp\u003E [KSPField]\u003C/p\u003E\u003Cp\u003E public float color_blue = 1.0f;\u003C/p\u003E\u003Cp\u003Ehow do i code this in order to make these 3 variables dictate color of the tracer?\u003C/p\u003E\u003Cp\u003Ei just want the part.cfg to dictate the variables the color is based off of, so each of the multiple gunpods i have dont require a entirely different projectile defenition, as thats just unnecessary code since i would think it is possible to just define tracer color in the part cfg.....\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2013-12-12T20:37:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TaranisElsu\u0022 data-cite=\u0022TaranisElsu\u0022\u003E\u003Cdiv\u003EYou definitely can use KSPFields for loading values from the part.cfg file. I started writing an example showing how here: \u003Ca href=\u0022https://github.com/taraniselsu/TacExamples/tree/master/05-KspFields\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacExamples/tree/master/05-KspFields\u003C/a\u003E. It is unfinished though \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E. I could not get my type (that extends IConfigNode) to work even though it should.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe reason for this is that (unless I\u0027m very much mistaken) Unity ignores the Serializable attribute on any classes not in the original set of assemblies that it loads itself, so it isn\u0027t any fault of yours.\u003C/p\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-12-13T15:35:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022panzer1b\u0022 data-cite=\u0022panzer1b\u0022\u003E\u003Cdiv\u003Ehow do i code this in order to make these 3 variables dictate color of the tracer?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E[KSPField]\u003C/p\u003E\u003Cp\u003Epublic float color_red = 1.0f;\u003C/p\u003E\u003Cp\u003E[KSPField]\u003C/p\u003E\u003Cp\u003Epublic float color_green = 1.0f;\u003C/p\u003E\u003Cp\u003E[KSPField]\u003C/p\u003E\u003Cp\u003Epublic float color_blue = 1.0f;\u003C/p\u003E\u003Cp\u003Epublic Color tracerColor = new Color(color_red, color_green, color_blue);\u003C/p\u003E\n"},{"CreatedByName":"panzer1b","CreatedById":95108,"CreatedDateTime":"2013-12-13T18:16:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022EndlessWaves\u0022 data-cite=\u0022EndlessWaves\u0022\u003E\u003Cdiv\u003E[KSPField]\u003Cp\u003Epublic float color_red = 1.0f;\u003C/p\u003E\u003Cp\u003E[KSPField]\u003C/p\u003E\u003Cp\u003Epublic float color_green = 1.0f;\u003C/p\u003E\u003Cp\u003E[KSPField]\u003C/p\u003E\u003Cp\u003Epublic float color_blue = 1.0f;\u003C/p\u003E\u003Cp\u003Epublic Color tracerColor = new Color(color_red, color_green, color_blue);\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eits giving me errors here\u003C/p\u003E\u003Cp\u003Ethe name color_red does not exist within the current context\u003C/p\u003E\u003Cp\u003Enamely it doesnt want to accept anything but a number followed by f to designate it as a float\u003C/p\u003E\u003Cp\u003Eso is there any way to get this to work? As in what i want to do in the end is define a color to be used for my weapon tracers, but have it defined in the part.cfg instead of in the dll, as it just makes no sense to define multiple projectiles when all im really changing between them is the color of the tracer left behind it.\u003C/p\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-12-15T14:09:38Z","Content":"\n\u003Cp\u003EFrom the error message it may be a scope issue, can you post your code?\u003C/p\u003E\u003Cp\u003Especifically the following code compiles fine for me:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic class SomeClass : PartModule\u003Cbr\u003E{\u003Cbr\u003E\t[KSPField]\u003Cbr\u003E\tpublic float color_red = 1.0f;\u003Cbr\u003E\t[KSPField]\u003Cbr\u003E\tpublic float color_green = 1.0f;\u003Cbr\u003E\t[KSPField]\u003Cbr\u003E\tpublic float color_blue = 1.0f;\u003Cbr\u003E\u003Cbr\u003E\tpublic Color tracerColor;\u003Cbr\u003E\u003Cbr\u003E\tpublic override void OnStart(StartState state)\u003Cbr\u003E\t{\u003Cbr\u003E\t\ttracerColor = new Color(color_red, color_green, color_blue);\u003Cbr\u003E\t}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"LaydeeDem","CreatedById":5984,"CreatedDateTime":"2013-12-17T01:04:20Z","Content":"\n\u003Cp\u003EWouldn\u0027t it be easier to use a confignode and vector3? (Or vector4 for rgba)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eif (node.HasValue(\u0022Color\u0022))\u003Cbr\u003E{\u003Cbr\u003EVector3 col = (node.GetValue(\u0022Color\u0022));\u003Cbr\u003Enode.coloryouwanttoconfig = new Color(col.x, col.y, col.z);\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EObviously you need to set the foreach and the name of your config file, but that\u0027s the confignode stuff.\u003C/p\u003E\u003Cp\u003EEDIT:Typed the wrong thing. I don\u0027t have the best memory.\u003C/p\u003E\u003Cp\u003EAlso a question myself, how can I get a plugin to detect proximity to a CelestialBody?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-17T01:46:17Z\u0022 title=\u002212/17/2013 01:46  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 17, 2013\u003C/time\u003E by Nutt007\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Naten","CreatedById":70923,"CreatedDateTime":"2013-12-17T02:03:01Z","Content":"\n\u003Cp\u003ESo, how do I maek plugin maek ship maek sounds?\u003C/p\u003E\u003Cp\u003EI wanna make an annoying \u0022TERRAIN TERRAIN. PULL UP. PULL. FRIGGIN\u0027. UP!!!11!1!11111\u0022 thingy.\u003C/p\u003E\u003Cp\u003EI\u0027ve got the base down, with the GUI and stuff, but how do I...\u003C/p\u003E\u003Cp\u003E1. detect altitude (preferably radar)\u003C/p\u003E\u003Cp\u003E2. detect vertical velocity\u003C/p\u003E\u003Cp\u003E3. play sounds...?\u003C/p\u003E\u003Cp\u003EThanks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ENaten. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ekku Zakku","CreatedById":34696,"CreatedDateTime":"2013-12-17T02:10:04Z","Content":"\n\u003Cp\u003EAnybody have any idea why using \u0022KSPAddon.Startup.EditorAny\u0022 only works for the VAB and not for the SPH? I know I can just do one for each, but using EditorAny seems like a much nicer approach...\u003C/p\u003E\u003Cp\u003EEDIT: actually this might not be EditorAny giving me problems, but GameScenes. I\u0027m just not getting things to show up in the SPH that are working just fine in the VAB =P\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Naten\u0022 data-cite=\u0022Naten\u0022\u003E\u003Cdiv\u003ESo, how do I maek plugin maek ship maek sounds?\u003Cp\u003EI wanna make an annoying \u0022TERRAIN TERRAIN. PULL UP. PULL. FRIGGIN\u0027. UP!!!11!1!11111\u0022 thingy.\u003C/p\u003E\u003Cp\u003EI\u0027ve got the base down, with the GUI and stuff, but how do I...\u003C/p\u003E\u003Cp\u003E1. detect altitude (preferably radar)\u003C/p\u003E\u003Cp\u003E2. detect vertical velocity\u003C/p\u003E\u003Cp\u003E3. play sounds...?\u003C/p\u003E\u003Cp\u003EThanks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ENaten. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can try:\u003C/p\u003E\u003Cp\u003EFor radar altitude: FlightGlobals.ActiveVessel.GetHeightFromSurface() or FlightGlobals.ActiveVessel.GetHeightFromTerrain()\u003C/p\u003E\u003Cp\u003EFor Vertical Velocity: FlightGlobals.ActiveVessel.verticalSpeed\u003C/p\u003E\u003Cp\u003Eto play sounds, I\u0027m not sure, but there should be a Unity or KSP Plugin tutorial out there that will help you there =3 Google is your friend!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-17T03:03:48Z\u0022 title=\u002212/17/2013 03:03  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 17, 2013\u003C/time\u003E by Ekku Zakku\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"LaydeeDem","CreatedById":5984,"CreatedDateTime":"2013-12-17T02:17:24Z","Content":"\n\u003Cp\u003EThe FlightGlobals probably answers my question too.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EEkku:\u003C/strong\u003E Have you tried using KSPAddonFixed by Majiir? Probably won\u0027t change anything but it\u0027s what all the ~cool~ modders are using. If the editor thing doesn\u0027t work have you considered loading at the Menu? Hyperedit does that.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-17T03:18:53Z\u0022 title=\u002212/17/2013 03:18  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 17, 2013\u003C/time\u003E by Nutt007\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"XanderTek","CreatedById":92553,"CreatedDateTime":"2013-12-17T03:32:03Z","Content":"\n\u003Cp\u003EI\u0027m trying to shutdown an engine under certain circumstances, but I can\u0027t seem to figure out the appropriate command. Basically I just want to do the same thing that happens when you click the \u0022shutdown engine\u0022 button in game. It should be simple, but I\u0027ve tried a bunch of functions and variables within moduleengines and partmodule without any success.\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\u003Cp\u003E@Naten: I asked a very similar question about radar altitude \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/61770-Finding-the-height-of-the-lowest-point-on-my-vessel\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E. One of the responses provides some very nice example code.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-17T03:41:05Z\u0022 title=\u002212/17/2013 03:41  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 17, 2013\u003C/time\u003E by XanderTek\u003C/strong\u003E\n\u003C/span\u003E\n"}]}