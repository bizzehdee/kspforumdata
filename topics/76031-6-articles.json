{"TopicId":76031,"ForumId":50,"TopicTitle":"Less memory usage by using OpenGL","CreatedByName":"Eisfunke","CreatedById":113588,"CreatedDateTime":"2014-06-26T19:00:29Z","PageNum":6,"Articles":[{"CreatedByName":"merendel","CreatedById":97774,"CreatedDateTime":"2014-10-22T17:56:33Z","Content":"\n\u003Cp\u003EopenGL saves me a bit over 1gb ram on my system. got an i5-3570k (3.4GHz overclocked to 4.20GHz) 8gb ram and a radeon HD5770. I also run -popupwindow so I can alt tab without actualy causeing the issues with KSP and alt tabing.\u003C/p\u003E\u003Cp\u003EFor the most part performance is on par or slightly better than without openGL. with all the mods (also runing ATM) I was hovering around 3.1 gb of ram usage without openGL. With its around 1.9. Video quality is about the same and FPS is possibly a touch faster although hard to tell. it does take a second or two longer on scene change on average with openGL and I frequently get some FPS stutter and screen tearing for another couple of seconds afterwards but once everything stabilizes things are golden. \u003C/p\u003E\u003Cp\u003EOverall a much better option than runing 64bit. at 3.1gb it didnt take much for a memory leak or a large craft to crash the 32bit game. 64 bit avoids the memory crash but will just crash on its own randomly. openGL only had mild but acceptable drawbacks and alows for stable gameplay.\u003C/p\u003E\n"},{"CreatedByName":"Corodius","CreatedById":127065,"CreatedDateTime":"2014-10-24T00:33:47Z","Content":"\n\u003Cp\u003EI definitely get less RAM Usage, and higher FPS. However, I have an odd issue when running OpenGL, my Simulation Speed tanks bigtime. \u003C/p\u003E\u003Cp\u003EAs an example, launching the same rocket in DX mode, It is a large rocket with a fair few parts. In DX Mode, it stays green with some very occasional flicks to yellow on sim speed. In OpenGL Mode, it stays yellow and is noticeably slower, sim speed wise.\u003C/p\u003E\u003Cp\u003EDefinitely rather odd.\u003C/p\u003E\n"},{"CreatedByName":"Synthesis","CreatedById":26557,"CreatedDateTime":"2014-10-24T20:55:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Corodius\u0022 data-cite=\u0022Corodius\u0022\u003E\u003Cdiv\u003EI definitely get less RAM Usage, and higher FPS. However, I have an odd issue when running OpenGL, my Simulation Speed tanks bigtime. \u003Cp\u003EAs an example, launching the same rocket in DX mode, It is a large rocket with a fair few parts. In DX Mode, it stays green with some very occasional flicks to yellow on sim speed. In OpenGL Mode, it stays yellow and is noticeably slower, sim speed wise.\u003C/p\u003E\u003Cp\u003EDefinitely rather odd.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI got really bad simulation speed as well--though I didn\u0027t experience any FPS boost, just a graphical glitch, some FPS slowdown, and much reduced RAM consumption (the only benefit in my case).\u003C/p\u003E\u003Cp\u003E10x is the minimum acceleration that isn\u0027t slower than than real time, and it seems worse on larger rockets. If OpenGL is to be a realistic alternative, that\u0027s something you\u0027d have to overcome. Is there anything that can be done with Max Delta-Time Per Frame settings?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-24T20:59:55Z\u0022 title=\u002210/24/2014 08:59  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 24, 2014\u003C/time\u003E by Synthesis\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Wolfox","CreatedById":59958,"CreatedDateTime":"2014-10-26T09:48:37Z","Content":"\n\u003Cp\u003EStill no luck with enabling AA, anyone please help? Nvidia panel doesn\u00C3\u201A\u00C2\u00B4t seem to change anything while the game is forced to use OpenGL... And yes, I am using those settings at KSP executable, not 64 or launcher. Anyone else encountered something similar? Its the same on 2 different PCs, so i guess I am doing something wrong, but i dont know what it is.\u003C/p\u003E\n"},{"CreatedByName":"Uml\u00FCx","CreatedById":69703,"CreatedDateTime":"2014-10-28T12:47:40Z","Content":"\n\u003Cp\u003Eanybody using the DX11 renderpath?\u003C/p\u003E\u003Cp\u003Esadly, the drop shadows are all missing with openGL for me. but DX11 works and saves some ram too \u003C/p\u003E\u003Cp\u003E~2gb as to 2,6gb with the default path at the start screen.\u003C/p\u003E\n"},{"CreatedByName":"Hudsonkm","CreatedById":88585,"CreatedDateTime":"2014-10-30T07:17:59Z","Content":"\n\u003Cp\u003EWhile OpenGL works great for me in terms of sheer performance, I am plagued with OpenGL memory issues that tend to hit after KSP has been running for a bit with OpenGL forced. Have been searching for a resolution for it but haven\u0027t found anything yet. When I check my event log for info on the eventual crashes it just says ---\u003C/p\u003E\u003Cp\u003EThe NVIDIA OpenGL driver has encountered\u003C/p\u003E\u003Cp\u003Ean out of memory error. This application might\u003C/p\u003E\u003Cp\u003Ebehave inconsistently and fail.\u003C/p\u003E\u003Cp\u003EFirst time I\u0027ve ever encountered the error, and strangely enough it\u0027s only happening with KSP in OpenGL mode. Current video card is a GTX970 SSC running under Win7X64, and there had been many reports of stability problems under the last driver. I updated to the most recent 344.48 reference driver hoping it might solve the problem, but sadly it has not. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Hudsonkm","CreatedById":88585,"CreatedDateTime":"2014-10-30T16:25:26Z","Content":"\n\u003Cp\u003EI believe I figured out what is happening to cause my problem. It just keeps going up until it finally crashes. Is anybody else experiencing a memory leak when forcing KSP to run in OpenGL?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://oi62.tinypic.com/28v6pgj.jpg\u0022 alt=\u002228v6pgj.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"FirstSecondThird","CreatedById":110726,"CreatedDateTime":"2014-11-01T13:22:44Z","Content":"\n\u003Cp\u003EIn Fraps benchmarks on my GPU, it has a higher FPS when running with DirectX 9.0c (which is what my GPU only supports), but I rule in favor of DirectX, because it is hardware-accelerated, and OpenGL is basically software-acceleration.\u003C/p\u003E\n"},{"CreatedByName":"Corodius","CreatedById":127065,"CreatedDateTime":"2014-11-01T15:16:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022FirstSecondThird\u0022 data-cite=\u0022FirstSecondThird\u0022\u003E\u003Cdiv\u003EIn Fraps benchmarks on my GPU, it has a higher FPS when running with DirectX 9.0c (which is what my GPU only supports), but I rule in favor of DirectX, because it is hardware-accelerated, and OpenGL is basically software-acceleration.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPlease, really, if you have this little idea about the subject, sometimes it it just better to keep quiet and not make a fool of yourself.\u003C/p\u003E\u003Cp\u003EWhile different cards have different HARDWARE support, (Nvidia usually being the best for OpenGL in my experience, but YMMV) OpenGL is most definitely Hardware Acceleration.\u003C/p\u003E\n"},{"CreatedByName":"Voculus","CreatedById":85437,"CreatedDateTime":"2014-11-01T16:43:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Uml\u00C3\u0192\u00C2\u00BCx\u0022 data-cite=\u0022Uml\u00C3\u0192\u00C2\u00BCx\u0022\u003E\u003Cdiv\u003Eanybody using the DX11 renderpath?\u003Cp\u003Esadly, the drop shadows are all missing with openGL for me. but DX11 works and saves some ram too \u003C/p\u003E\u003Cp\u003E~2gb as to 2,6gb with the default path at the start screen.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow would I go about setting this up?\u003C/p\u003E\n"},{"CreatedByName":"Plusk","CreatedById":103195,"CreatedDateTime":"2014-11-01T17:08:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Voculus\u0022 data-cite=\u0022Voculus\u0022\u003E\u003Cdiv\u003EHow would I go about setting this up?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDitto. With forced openGL game doesnt start at all (HD 7850). Im tired of crashing every hour or so. And them mods keep getting bigger and bigger.\u003C/p\u003E\u003Cp\u003EEdit: Nvm, found it. \u0022 -force-d3d11\u0022. No impact on ram usage, nor fps. It just messes the geme up for me. No water, no lighting effects, no EVE clouds on Kerbin.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-01T17:49:45Z\u0022 title=\u002211/01/2014 05:49  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 1, 2014\u003C/time\u003E by Plusk\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Aloriel","CreatedById":97201,"CreatedDateTime":"2014-11-01T17:16:15Z","Content":"\n\u003Cp\u003EI\u0027ve found that OpenGL mode allows me to play with my zillions of mods, instead of not at all, but I can\u0027t alt-tab while inside the game. If I do, it will crash. This is quite unfortunate when I am trying to geosynchronous orbit a satellite over a world other than Kerbin (I have Kerbin\u0027s geosynch altitude memorized). I need to look up the altitude for it, but can\u0027t alt-tab to get to the wiki....\u003C/p\u003E\n"},{"CreatedByName":"NWDogg","CreatedById":118058,"CreatedDateTime":"2014-11-01T23:30:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Aloriel\u0022 data-cite=\u0022Aloriel\u0022\u003E\u003Cdiv\u003EI\u0027ve found that OpenGL mode allows me to play with my zillions of mods, instead of not at all, but I can\u0027t alt-tab while inside the game. If I do, it will crash. This is quite unfortunate when I am trying to geosynchronous orbit a satellite over a world other than Kerbin (I have Kerbin\u0027s geosynch altitude memorized). I need to look up the altitude for it, but can\u0027t alt-tab to get to the wiki....\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAdd \u0027-popupwindow\u0027 to the same line you add \u0027-force-opengl\u0027, and that should fix your Alt-Tab problems. It did for me, anyway, and it even seems to run a little better as well (maybe just confirmation bias on the performance, but it certainly fixed the alt-tab issue.)\u003C/p\u003E\n"},{"CreatedByName":"Corodius","CreatedById":127065,"CreatedDateTime":"2014-11-02T07:05:45Z","Content":"\n\u003Cp\u003EOk, well I gave the -force-d3d11 option a try aswell, (For reference I am running an Nvidia Gtx 460) and while it did work, the fonts all looked horrible, extreme kerning and spacing issues and some almost completely garbled. Not much of a performance boost either, but there was a slight one. Not enough to be worth unable to read anything though. XD\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-05T11:17:22Z","Content":"\n\u003Cp\u003EYesterday, I was forced to make the switch to OpenGl (on a Geforce GTX670) because the constant crashes were making my life miserable, despite \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/59005-0-23-Release-2-11-Active-Texture-Management-Save-RAM-without-reduction-packs%21\u0022 rel=\u0022external nofollow\u0022\u003EActive Texture Management\u003C/a\u003E and \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/60961-0-25-TextureReplacer-1-8-1-%282-11-2014%29\u0022 rel=\u0022external nofollow\u0022\u003E TextureReplacer.\u003C/a\u003E The effect seems as predicted that I now require a lot (at least 1 Gigabyte) less memory an no noticable performance issues. However one side effect is that whenever I switch between KSP and Desktop, KSP get\u0027s into Window mode (instead of full screen). It made worse because I have duel screen it get\u0027s in between 2 screens. \u003C/p\u003E\u003Cp\u003EQuestion: Is there a way to force KSP to remain in Fullscreen or activate Fullscreen by a simple method?\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jim Meillente\u0022 data-cite=\u0022Jim Meillente\u0022\u003E\u003Cdiv\u003EHello,\u003Cp\u003EFor those that might not know this is what you type for full screen window mode with the openGL option:\u003C/p\u003E\u003Cp\u003E-force-opengl -popupwindow\u003C/p\u003E\u003Cp\u003EEnjoy!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, that\u0027s what I was looking for\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-05T11:44:44Z\u0022 title=\u002211/05/2014 11:44  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 5, 2014\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-05T11:20:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Hudsonkm\u0022 data-cite=\u0022Hudsonkm\u0022\u003E\u003Cdiv\u003EI believe I figured out what is happening to cause my problem. It just keeps going up until it finally crashes. Is anybody else experiencing a memory leak when forcing KSP to run in OpenGL?\u003Cp\u003E\u003Ca href=\u0022http://oi62.tinypic.com/28v6pgj.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://oi62.tinypic.com/28v6pgj.jpg\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe same hapenens in Direct3D. There seems to be some inherent memory leaks or the garbage collection fails to free unused memory (because perhaps it is still referenced somehow).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-05T11:45:30Z\u0022 title=\u002211/05/2014 11:45  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 5, 2014\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-05T11:59:12Z","Content":"\n\u003Cp\u003EI wonder, has anyone tested to see if KSP can allocate more memory with \u003Ca href=\u0022http://www.ntcore.com/4gb_patch.php\u0022 rel=\u0022external nofollow\u0022\u003Ethe 4GB application patcher from NTcore\u003C/a\u003E?\u003C/p\u003E\n"},{"CreatedByName":"Uml\u00FCx","CreatedById":69703,"CreatedDateTime":"2014-11-05T12:25:00Z","Content":"\n\u003Cp\u003Euseless\u003C/p\u003E\u003Cp\u003EKSP is already large address aware. or it would only be able too use 2gb\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-05T18:58:14Z","Content":"\n\u003Cp\u003EBeside the memory advantage, there appears a second big bonus of using Open GL, which is KSP no longer pauses and disaperars if I switch to windows. No I can fly long distances, or accelerate slowly with ion egines, and at the same time browse or watch a movie\u003C/p\u003E\n"},{"CreatedByName":"Synthesis","CreatedById":26557,"CreatedDateTime":"2014-11-06T04:57:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022FreeThinker\u0022 data-cite=\u0022FreeThinker\u0022\u003E\u003Cdiv\u003EBeside the memory advantage, there appears a second big bonus of using Open GL, which is KSP no longer pauses and disaperars if I switch to windows. No I can fly long distances, or accelerate slowly with ion egines, and at the same time browse or watch a movie\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m glad to hear it\u0027s working for you, but I think this is often offset by the fact that simulation time is halved for many people (myself included) when using OpenGL.\u003C/p\u003E\u003Cp\u003EThe game operates at half speed (necessitating more time acceleration use), but you have few options to use lots of mods (and since 0.25 64-bit doesn\u0027t work with 0.24.2 saves).\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-06T11:11:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Synthesis\u0022 data-cite=\u0022Synthesis\u0022\u003E\u003Cdiv\u003EI\u0027m glad to hear it\u0027s working for you, but I think this is often offset by the fact that simulation time is halved for many people (myself included) when using OpenGL.\u003Cp\u003EThe game operates at half speed (necessitating more time acceleration use), but you have few options to use lots of mods (and since 0.25 64-bit doesn\u0027t work with 0.24.2 saves).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat do you mean by half speed? You mean when outside of KSP it plays at half speed or all the time? what kind of hardware do you use? I use a 4.6G overclocked watercooled Ivy Brigde rig with 512 SDD and Gefore 670GTX. Although It\u0027s a few years old, it is still kicking but.\u003C/p\u003E\n"},{"CreatedByName":"Bilfr3d","CreatedById":75448,"CreatedDateTime":"2014-11-06T11:26:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022FreeThinker\u0022 data-cite=\u0022FreeThinker\u0022\u003E\u003Cdiv\u003EWhat do you mean by half speed? You mean when outside of KSP it plays at half speed or all the time? what kind of hardware do you use? I use a 4.6G overclocked watercooled Ivy Brigde rig with 512 SDD and Gefore 670GTX. Although It\u0027s a few years old, it is still kicking but.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYour actual computer specs don\u0027t really matter at that sort of performance. Because of the way KSP calculates physics, I believe that using OpenGL affects the amount of time it takes KSP to do a physics calculation, effectively running the game at half the speed it would whilst using DirectX. As long as you have a core with a clock higher than around 2.4Ghz, at least 4Gb and a fairly decent graphics card, KSP will work decently. Any hardware higher than that then you won\u0027t notice much difference performance wise.\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2014-11-06T11:35:23Z","Content":"\n\u003Cp\u003EI didn\u0027t notice any problems with it, it certainly doesn\u0027t seem to run slower, at least under normal conditions (things like RPM transparent pods can and will bog it down, though).\u003C/p\u003E\n"},{"CreatedByName":"sober667","CreatedById":116695,"CreatedDateTime":"2014-11-06T20:05:36Z","Content":"\n\u003Cp\u003Efor me run much slower within but i have only about 50 mods (and run slow ONLY during reentery/mach effeckt) i can deal without( but by by clouds-life is way of choices) nad full scren problem(even with alt-enter shoot out to normal window)\u003C/p\u003E\n"},{"CreatedByName":"Bilfr3d","CreatedById":75448,"CreatedDateTime":"2014-11-06T20:39:08Z","Content":"\n\u003Cp\u003EThat\u0027s the thing. it doesn\u0027t SEEM to run slower. Physically, it does not affect any sort of lag. BUT, and this is a big but (hehe \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E), it affects the SIMULATION speed which you may not necessarily notice. You will only notice it in some circumstances. It also depends on what OS you are running to how much it actually affects the simulation time because each OS runs their graphical rendering a different way even though they use the same engine (with an exception to OS X, which I am not entirely sure if it has any option to use DX 9/10/11 etc). SO, although you may not notice it, 7/10 it is there but you just don\u0027t realise it. Now you are probably thinking, \u0022well if I don\u0027t realise it, why did you bring it up?\u0022. That\u0027s a good question. I brought it up because - because KSP now spends longer on each physics calculation a potential bottleneck may/will occur when more parts and ships are in the physics calculation range at once. Your 1000 part ship that your computer can reasonably handle using DX 11 (or whatever DX you use), your computer may not be able to handle OR there will be a physical decrease in speed whilst using OpenGL. Again, depends on the DX version you are benchmarking against if you are going to do this. Also depends on the OpenGL version you use to benchmark this AND the OS you are running. On some occasions also depends on your hardware. I hope this clears some stuff up,\u003C/p\u003E\u003Cp\u003EToTheMun\u003C/p\u003E\n"}]}