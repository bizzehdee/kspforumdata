{"TopicId":66352,"ForumId":34,"TopicTitle":"[1.12.5] KerbTrack v1.6 Head tracking using your webcam, TrackIR, opentrack, joystick (2024-07-08)","CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2014-03-20T22:45:39Z","PageNum":4,"Articles":[{"CreatedByName":"Unit327","CreatedById":90967,"CreatedDateTime":"2014-04-18T00:42:57Z","Content":"\n\u003Cp\u003EFrom the solution file, looks like VS2012. Personally I use \u003Ca href=\u0022http://monodevelop.com/\u0022 rel=\u0022external nofollow\u0022\u003Emonodevelop\u003C/a\u003E, it\u0027s free and on every OS, but it probably won\u0027t open that solution file either - you\u0027d have to add the files to a new project/solution. That won\u0027t be too much of a hassle though, there is only one source (.cs) file.\u003C/p\u003E\n"},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2014-04-18T09:39:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022crinkelite\u0022 data-cite=\u0022crinkelite\u0022\u003E\u003Cdiv\u003EI\u0027m having trouble compiling this. visual studio 2010 is unable to open .csproj files. Is there a free and easy way to get this compiled? \u003Cp\u003EThanks\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOpen the .sln file rather than the .csproj file. If that doesn\u0027t work, just add KerbTrack.cs to a new project, then add Assembly-CSharp.dll and UnityEngine.dll as references.\u003C/p\u003E\n"},{"CreatedByName":"DaMichel","CreatedById":93697,"CreatedDateTime":"2014-04-18T10:52:38Z","Content":"\n\u003Cp\u003EHi. I finally tried this mod with my FTNoIR Pointtracker setup. Works fairly well. It was a lot of fun to fly my planes like that.\u003C/p\u003E\u003Cp\u003EI found one problem though: The camera sometimes assumes a wrong orientation for just a frame or so. It happens in irregular intervals i think and i\u0027m not sure what the cause of the problem is. The tracking was not disrupted, judging from what i could see in the FTNoIR window. I\u0027ll check it with other games later on.\u003C/p\u003E\u003Cp\u003ERegarding FTNoIR vs. Freetrack: For me the face tracking hardly ever works. It depends a lot on lighting conditions. But, FTNoIR comes with a point tracker like Freetrack. And this works quite stable and accurately, provided that you can give it the proper dimensions of your point model.\u003C/p\u003E\n"},{"CreatedByName":"crinkelite","CreatedById":108450,"CreatedDateTime":"2014-04-18T11:34:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pizzaoverhead\u0022 data-cite=\u0022pizzaoverhead\u0022\u003E\u003Cdiv\u003EOpen the .sln file rather than the .csproj file. If that doesn\u0027t work, just add KerbTrack.cs to a new project, then add Assembly-CSharp.dll and UnityEngine.dll as references.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the suggestions however\u003C/p\u003E\u003Cp\u003ENeither Assembly-Csharp.dll or UnityEngine.dll appear to be present on my System.\u003C/p\u003E\u003Cp\u003EI had a quick google but none of the download sources I\u0027ve found look legit. \u003C/p\u003E\u003Cp\u003EI have already tried to open the .sln file but I get the \u0022unable to open .csproj files\u0022.\u003C/p\u003E\n"},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2014-04-18T11:42:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022crinkelite\u0022 data-cite=\u0022crinkelite\u0022\u003E\u003Cdiv\u003EThanks for the suggestions however\u003Cp\u003ENeither Assembly-Csharp.dll or UnityEngine.dll appear to be present on my System.\u003C/p\u003E\u003Cp\u003EI had a quick google but none of the download sources I\u0027ve found look legit. \u003C/p\u003E\u003Cp\u003EI have already tried to open the .sln file but I get the \u0022unable to open .csproj files\u0022.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAssembly-CSharp.dll and UnityEngine.dll are the main KSP DLLs. They\u0027re in KSP_Data. I\u0027ve never seen the \u0022Unable to open .csproj files\u0022 error, is that the exact text of it? Make sure you\u0027re opening the .sln from Visual Studio and not the file itself in explorer.\u003C/p\u003E\n"},{"CreatedByName":"DaMichel","CreatedById":93697,"CreatedDateTime":"2014-04-18T20:10:06Z","Content":"\n\u003Cp\u003EHm .. no, the view flickering seems to be a KSP issue. DCS World works just fine. Anyway, it is just a minor issue. Also, thanks for making this mod.\u003C/p\u003E\n"},{"CreatedByName":"icemonkey","CreatedById":101228,"CreatedDateTime":"2014-04-19T16:58:46Z","Content":"\n\u003Cp\u003EHey, i\u0027m having some trouble installing... i got FreetracknoIR to work, but no idea how to connect it to the actual game.... Help? thanks\u003C/p\u003E\n"},{"CreatedByName":"KAO","CreatedById":30795,"CreatedDateTime":"2014-04-19T17:32:31Z","Content":"\n\u003Cp\u003Eicemonkey, the .dll file that\u0027s called FreeTrackClient has to go into the general KSP folder. Not into gamedata, not into plugins, but into the folder that CONTAINS that gamedata folder and all the other ones. The folder with KSP.exe in it\u003C/p\u003E\n"},{"CreatedByName":"icemonkey","CreatedById":101228,"CreatedDateTime":"2014-04-19T18:45:55Z","Content":"\n\u003Cp\u003EThanks KAO, should get it working soon\u003C/p\u003E\n"},{"CreatedByName":"megamurmann","CreatedById":109078,"CreatedDateTime":"2014-04-19T20:12:44Z","Content":"\n\u003Cp\u003Ei just got this working and then spent literally the next hour moving my head in stupid ways around my lap top playing with it, it is honestly the most interesting mod it takes a bit of set up but it is so worth it. the best mod i have ever downloaded.\u003C/p\u003E\u003Cp\u003EBTW just a note the dll file that needs to be copied into the ksp root directory is the facetrackclient.dll (took me like half an hour to find that out)\u003C/p\u003E\n"},{"CreatedByName":"Rureglathon","CreatedById":76495,"CreatedDateTime":"2014-04-25T23:15:22Z","Content":"\n\u003Cp\u003EI just got this set up and it seems like it would work really well, but what feels like every second frame the camera goes back to the default forwards view of the capsule. At first I thought it could be my 120hz monitor, but after trying it on 60hz the issue still appears to be there (and worse at 60hz). I know the setup is fine, I\u0027m using FaceTrackNoIR with the point tracker and a home made LED hat thing which works really well for other games, and apart from the flickering the head tracking here appears to be really smooth too. Really awesome work, and I hope this can get fixed too. I\u0027m gonna try the same setup with freetrack to see if that helps soon.\u003C/p\u003E\n"},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2014-04-26T01:35:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DaMichel\u0022 data-cite=\u0022DaMichel\u0022\u003E\u003Cdiv\u003EHi. I finally tried this mod with my FTNoIR Pointtracker setup. Works fairly well. It was a lot of fun to fly my planes like that.\u003Cp\u003EI found one problem though: The camera sometimes assumes a wrong orientation for just a frame or so. It happens in irregular intervals i think and i\u0027m not sure what the cause of the problem is. The tracking was not disrupted, judging from what i could see in the FTNoIR window. I\u0027ll check it with other games later on.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rureglathon\u0022 data-cite=\u0022Rureglathon\u0022\u003E\u003Cdiv\u003EI just got this set up and it seems like it would work really well, but what feels like every second frame the camera goes back to the default forwards view of the capsule. At first I thought it could be my 120hz monitor, but after trying it on 60hz the issue still appears to be there (and worse at 60hz). I know the setup is fine, I\u0027m using FaceTrackNoIR with the point tracker and a home made LED hat thing which works really well for other games, and apart from the flickering the head tracking here appears to be really smooth too. Really awesome work, and I hope this can get fixed too. I\u0027m gonna try the same setup with freetrack to see if that helps soon.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve confirmed this as an issue with KerbTrack. I\u0027m not sure what\u0027s causing it. It doesn\u0027t happen on all launches. You may be able to work around it by switching scenes or flights.\u003C/p\u003E\u003Cp\u003EI\u0027ll see if I can track down the problem. Thanks for the reports!\u003C/p\u003E\n"},{"CreatedByName":"Rureglathon","CreatedById":76495,"CreatedDateTime":"2014-04-26T08:49:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pizzaoverhead\u0022 data-cite=\u0022pizzaoverhead\u0022\u003E\u003Cdiv\u003EI\u0027ve confirmed this as an issue with KerbTrack. I\u0027m not sure what\u0027s causing it. It doesn\u0027t happen on all launches. You may be able to work around it by switching scenes or flights.\u003Cp\u003EI\u0027ll see if I can track down the problem. Thanks for the reports!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust so you know, it happens on all launches for me (or it would appear so). I\u0027ve tried probably 25\u002B launches to try and make this work, and still nothing. Thanks for the info though, I\u0027ll be waiting impatiently for this to get fixed \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: After playing about with nearly every KSP setting, the V-SYNC option fixed it! I had to set it to \u0022Every Second V-Blank\u0022, and then the next flight I tried worked fine!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-26T08:51:53Z\u0022 title=\u002204/26/2014 08:51  AM\u0022 data-short=\u002210 yr\u0022\u003EApril 26, 2014\u003C/time\u003E by Rureglathon\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Eddie Rod","CreatedById":107414,"CreatedDateTime":"2014-05-03T09:24:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KAO\u0022 data-cite=\u0022KAO\u0022\u003E\u003Cdiv\u003Eicemonkey, the .dll file that\u0027s called FreeTrackClient has to go into the general KSP folder. Not into gamedata, not into plugins, but into the folder that CONTAINS that gamedata folder and all the other ones. The folder with KSP.exe in it\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhere do you find this file? I don\u0027t have it in my Freetrack install location, is it somewhere else? I am using FreeTrack 2.1.2 Because 2.2 wont work for me on Win 8! Please help, :-) Thx\u003C/p\u003E\n"},{"CreatedByName":"Eddie Rod","CreatedById":107414,"CreatedDateTime":"2014-05-04T01:49:36Z","Content":"\n\u003Cp\u003EThis Mod is AMAZING! :-) Thank You so much for making it! I finally have a reason to get the old MK II cap out the closet and mess with FreeTrack again!\u003C/p\u003E\n"},{"CreatedByName":"NonWonderDog","CreatedById":10479,"CreatedDateTime":"2014-05-04T16:59:48Z","Content":"\n\u003Cp\u003EFace tracking is probably good enough for anything you would do in KSP, but if you want to use IR tracking on-the-cheap here are some tips I\u0027ve picked up:\u003C/p\u003E\u003Cp\u003EThe absolute best camera for this is a Playstation Eye. It\u0027s high resolution, high frame rate, and you can get it for $12. The new ones with the big microphone array on top are made for tracking the PS Move and have essentially no IR filtering, so you don\u0027t have to make any modifications. You do have to add a visible-light filter, but that\u0027s REALLY easy. Get a 10 cent pair of cardboard red-cyan anaglyph glasses and fold them in half. It\u0027s probably the best filter you can get without paying for professional photo gels, and it\u0027s leagues better than overexposed film negative or old floppy disk material.\u003C/p\u003E\u003Cp\u003EMake sure you put the camera on its own USB bus (or a USB3 port). Basically just keep plugging into different ports until it works at full speed. That goes for face tracking too.\u003C/p\u003E\u003Cp\u003EFor IR leds you probably want wide-angle variants. The Osram SFH 485 P is the old recommendation from the FreeTrack forums. You can get a bunch of them and whatever resistors you need from Digikey or something similar for a couple bucks. If you\u0027re brave you can power your LEDs from USB, but you\u0027ll probably want to put a resettable fuse in the circuit. You\u0027ll also \u003Cem\u003Esupposed\u003C/em\u003E to declare any USB power draw on the bus and support USB sleep if you do that, but desktop PCs don\u0027t usually care as long as it\u0027s well under 100 mA. Laptops I\u0027m not sure about.\u003C/p\u003E\u003Cp\u003EI sewed three SFH 485 P into a baseball cap with a pair of AA batteries in the back, but I\u0027m not sure I\u0027d do that if I was doing this again. I had to cut the bill of the cap down to about 2\u0022 before I could look down comfortably, and that put the LED plane too close to vertical. (The LED plane shouldn\u0027t be allowed to go perpendicular to the camera, or there\u0027s a good possibility of losing tracking.) \u003C/p\u003E\u003Cp\u003EI also just found a break in my cap wiring somewhere that makes the LEDs turn off whenever I put it on... and come back on whenever I take it off... so I haven\u0027t tested it with this mod yet. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve been using OpenTrack (on Windows) since it\u0027s in active development and works better than FaceTrackNoIR with the PointTracker (make sure to turn \u0022Dynamic Pose Resolution\u0022 on), but I can\u0027t tell you if it works with KerbTrack yet.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2014-05-04T23:13:58Z","Content":"\n\u003Cp\u003Efor best results rough up the lens on the leds with some sand paper. powering your leds from usb is easy. according to usb spec you are supposed to short both of the data pins (this tells the host controller that you are just using it for power), then you are able to source up to 500ma@5v. since most ir leds have a voltage drop of about 1.5v, you can power about 3 in series off of usb, but i usually do the leds in parallel each with its own current limiting resistor. usb is kind of overkill for this application, i personally use a rechargeable lipo cell.\u003C/p\u003E\n"},{"CreatedByName":"NonWonderDog","CreatedById":10479,"CreatedDateTime":"2014-05-05T03:57:10Z","Content":"\n\u003Cp\u003EWell, the rev 2.0 spec page 171:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EDevices must also ensure that the maximum operating current drawn by a device is one unit load, until configured. Any device that draws power from the bus must be able to detect lack of activity on the bus, enter the Suspend state, and reduce its current consumption from VBUS (refer to Section 7.2.3 and Section 9.2.5.1).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOne unit load is 100 mA. Section 7.2.3 furthermore goes on to say that you can only draw 500 uA in suspend mode unless you have specifically enumerated as a high-power device that provides wakeup, in which case you\u0027re allowed 2.5 mA. Section 9.2.5.1 says that hosts are allowed to veto your power requests (an iPad definitely will).\u003C/p\u003E\u003Cp\u003EOf course, the spec is over a thousand pages long. Nobody who makes USB devices actually reads the whole thing, so USB hosts have to deal with a lot. Like devices that draw 550 mA without enumerating, or people who short the data pins together (I think charge-only hosts are the only ones allowed to do that). A lot of desktop PC motherboards just put a resettable fuse across several ports, rate it to a couple amps, and don\u0027t even check if devices are drawing the amount of power that they say they are. \u003C/p\u003E\u003Cp\u003ESo yeah, you can do it, but there\u0027s always a chance (a small chance) that your PC has a specification-compliant port -- in which case it won\u0027t work. I\u0027d still put a PTC in the circuit so you don\u0027t trip the one in your PC when your wiring shorts. Mostly because it will be annoying when your mouse stops working because your hat shorted out, not because you\u0027re likely to damage anything.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2014-05-05T08:50:07Z","Content":"\n\u003Cp\u003Eusb spec is notoriously overcomplicated. its just a piece of information that you see a lot in electronic hackery blogs. the truth is in the specs (that nobody wants to read).\u003C/p\u003E\n"},{"CreatedByName":"DaMichel","CreatedById":93697,"CreatedDateTime":"2014-05-11T07:56:33Z","Content":"\n\u003Cp\u003EPlease take these feature requests:\u003C/p\u003E\u003Cp\u003E1) Add a pitch offset for the external camera which does just this \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightCamera.fetch.camPitch = -pitch * pitchScaleFlight \u002B pitchOffsetFlight;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBecause i like to look at my plane from an angle without having to lower my head.\u003C/p\u003E\u003Cp\u003E2) Make the on/off state persistent. Because when i don\u0027t play with KerbTrack i don\u0027t want to have to turn it off on every launch.\u003C/p\u003E\u003Cp\u003EP.S. The VSync setting fixed it for me too. I wonder if that is because the games fps now coincide with the camera frame rate.\u003C/p\u003E\n"},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2014-05-12T23:14:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DaMichel\u0022 data-cite=\u0022DaMichel\u0022\u003E\u003Cdiv\u003EPlease take these feature requests:\u003Cp\u003E1) Add a pitch offset for the external camera which does just this \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightCamera.fetch.camPitch = -pitch * pitchScaleFlight \u002B pitchOffsetFlight;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBecause i like to look at my plane from an angle without having to lower my head.\u003C/p\u003E\u003Cp\u003E2) Make the on/off state persistent. Because when i don\u0027t play with KerbTrack i don\u0027t want to have to turn it off on every launch.\u003C/p\u003E\u003Cp\u003EP.S. The VSync setting fixed it for me too. I wonder if that is because the games fps now coincide with the camera frame rate.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI put together a test DLL for the camera issue. See if it has any effect on the flicker without VSync. It also persists the on/off state:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www./download/d89z8tohq3jvq52/KerbTrackV0.2pre.zip\u0022 rel=\u0022external nofollow\u0022\u003EDownload\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"DaMichel","CreatedById":93697,"CreatedDateTime":"2014-05-17T09:03:01Z","Content":"\n\u003Cp\u003EUnfortunately it didn\u0027t. No difference that i could recognize. Thanks for the on/off persistence though.\u003C/p\u003E\n"},{"CreatedByName":"White Owl","CreatedById":10849,"CreatedDateTime":"2014-05-19T12:25:15Z","Content":"\n\u003Cp\u003EJust spent a couple hours tracking down old software versions and troubleshooting the install. This mod works for me, using TrackIR 4 equipment, but is very very rough. Lots of flickering, and the Vsync fix posted earlier didn\u0027t fix it. I want to use it... but it just isn\u0027t playable for me right now. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Phearlock","CreatedById":90274,"CreatedDateTime":"2014-05-20T13:43:34Z","Content":"\n\u003Cp\u003EWhy would trackIR 5 not be supported? There are successful trackIR mods for both freespace 2 and IL-1942 (neither of which supported it in the base game) that both work perfectly with my TrackIR5.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-20T13:48:25Z\u0022 title=\u002205/20/2014 01:48  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 20, 2014\u003C/time\u003E by Phearlock\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"White Owl","CreatedById":10849,"CreatedDateTime":"2014-05-20T13:58:48Z","Content":"\n\u003Cp\u003EBecause NaturalPoint made changes after version 4 to prevent the equipment from being used with FreeTrack. Those other mods for the other games you mention are adapting the TrackIR software. (I know, I\u0027ve used them.)\u003C/p\u003E\n"}]}