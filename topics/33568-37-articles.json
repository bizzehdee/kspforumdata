{"TopicId":33568,"ForumId":35,"TopicTitle":"[WIN/MAC/LINUX] KSP Trajectory Optimization Tool v1.6.9 [New MATLAB Version!]","CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2013-06-18T04:59:31Z","PageNum":37,"Articles":[{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-23T05:04:14Z","Content":"\n\u003Cp\u003EAlso, found this \u0022\u003Ca href=\u0022https://github.com/mhoram-kerbin/ksp-physics-documentation/releases\u0022 rel=\u0022external nofollow\u0022\u003EDocumentation of KSP Physics\u003C/a\u003E\u0022 in the tutorials section and wondered if it would be of any help for anything. It does mention Lat/Lon conversions\u003C/p\u003E\n"},{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2014-09-23T05:59:10Z","Content":"\n\u003Cp\u003ESo I\u0027m trying to plan a tricky maneuver using Mission Architect, and I\u0027m not figuring things out quite right. I\u0027d appreciate any help.\u003C/p\u003E\u003Cp\u003EI have a craft in Kerbin orbit (and can get state from the SFS, no problem). I departing Kerbin and transferring to Jool with a low Pe over Jool (~8000km radius). Somewhere near the Jool Pe (maybe before, maybe after), I\u0027ll make another burn to adjust my swing around Jool and intercept Pol. Unfortunately, while I can work up a mission that gets me an 8000km periapsis and very little inclination, I can\u0027t seem to find the Pol intercept. The optimizer ends up halting with a Pol-periapsis of 50Mm, or 100Mm.\u003C/p\u003E\u003Cp\u003EUsing a fake orbit (prior to launching the actual spacecraft), I was able to find a mission that got my into an equatorial Pol orbit for about 3300m/s (1950m/s to transfer to Jool, 350m/s to intercept Pol, and 1000m/s to capture in Pol orbit). But reloading with the actual orbit shifts things enough that I can\u0027t locate any solution anymore.\u003C/p\u003E\u003Cp\u003EA couple of runs with the Graphical Analyzer have suggested that Pol is basically on the wrong side of Jool when I make the fly-by. If I know where Pol is when I swing by Jool, I can advance or delay my Kerbin departure to compensate and place Pol in the right section of its orbit. But I can\u0027t quite determine where Pol IS when I fly-by.\u003C/p\u003E\u003Cp\u003EIs there some way of determining where Pol is in relation to my spacecraft at the fly-by? Some other way of laying up the mission that can allow the optimizer to find a feasible solution?\u003C/p\u003E\u003Cp\u003E-Brian\u003C/p\u003E\n"},{"CreatedByName":"ANWRocketMan","CreatedById":65251,"CreatedDateTime":"2014-09-23T15:25:41Z","Content":"\n\u003Cp\u003E@bk2w: Are you sure you have the correct orbital parameters? Thus the right RAAN, Inclination etc.? And that you\u0027re burning at the correct UT? UT especially could do you in.\u003C/p\u003E\u003Cp\u003E@Arrowstar: One last question. How can I determine the burn parameters for a fly-by mission where I\u0027m using a much shorter transfer time from the porkchop plotter for fly-by\u0027s? The Multi fly-by maneuver sequencer does not seem to acknowledge my bounds on lower travel times. This considering using NTR\u0027s or some other form of propulsion that allows higher delta-V transfers. If I set the bounds to give me a transfer of, for example, 120 days or less to Duna(Mars) it still gives me a standard fly-by.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-23T15:33:29Z\u0022 title=\u002209/23/2014 03:33  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 23, 2014\u003C/time\u003E by ANWRocketMan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-23T23:45:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003EStill a teeny bit of misconception between us I think \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I\u0027m pretty sure I know where it is though. When I said the user would return to MA and prompt it to fetch the new orbit, I didn\u0027t mean to imply that during the time the game is running MA is continually streaming anything via KSPTOTConnect. Here\u0027s a flowchart I hacked together real quick:\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/3pi4ZFN.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/3pi4ZFN.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESo the idea is you have the original orbital state (A) - which is what MA calculated to get your craft Pe just outside the atmosphere, and then you are providing MA a second orbital state (\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E, which is the new orbit of the craft after exiting the atmosphere in the game. The only real legwork MA has to do is to calculate the dV needed to get your craft from state A to state B. I don\u0027t mean for that to sound simple, because it probably isn\u0027t. But that\u0027s all I was meaning for MA to do - possibly with an internal run of the optimizer that uses the new orbital parameters as constraints. Again this would appear to MA as a burn at Pe that doesn\u0027t use any fuel mass.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGot it! Thanks for taking the time to put together a detailed description. Unfortunately I still don\u0027t think it\u0027s feasible to pull off, mainly because of the time required to go from starting the KSP orbit propagation to ending it. The mission optimizer and related functionality has to perform a large number of function calls per second to finish in a reasonable time, and the added time to communicate with KSP and wait for a result to come back would be prohibitive. The other issues are surmountable I think, but that one isn\u0027t as far as I can tell.\u003C/p\u003E\u003Cp\u003EThat said, I\u0027m definitely game to try out a new aerobraking maneuver type (using the approximation I described earlier) for v1.1.8. I\u0027d be happy have you test it out for me if you\u0027re up to it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI just created a Duna mission to 30km Pe and set the COAST event to 10 minutes prior to Pe. However when I tried to load a craft onto this orbit using the Final State data and Hyperedit, it told me the craft was out of Duna\u0027s SOI. I tried manually editing the save file (looked up the parameters in the KSP wiki to make sure proper info was being assigned) and the game just deleted the craft. I wanted to run the craft through the atmosphere, and then import the new orbit into a new SET_STATE and see how MA reacted. I think I just didn\u0027t set the parameters right for a hyperbolic orbit.\u003C/p\u003E\u003Cp\u003ESo instead I Hyperedited a craft high around Kerbin and burned to lower my Pe within the atmosphere. I loaded this orbit into MA, coasted a few mins prior to Pe, then created a new state once the craft had left the atmosphere with the new orbit. MA reacted by saying my ship landed and took off again. In the aerobrake scenario I described, it would properly connect the orbits.\u003C/p\u003E\u003Cp\u003EBoth mission files are \u003Ca href=\u0022http://www.blade-edge.com/misc/aerobrake%20test.zip\u0022 rel=\u0022external nofollow\u0022\u003Euploaded here\u003C/a\u003E.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, I\u0027ll take a look!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003EAlso, found this \u0022\u003Ca href=\u0022https://github.com/mhoram-kerbin/ksp-physics-documentation/releases\u0022 rel=\u0022external nofollow\u0022\u003EDocumentation of KSP Physics\u003C/a\u003E\u0022 in the tutorials section and wondered if it would be of any help for anything. It does mention Lat/Lon conversions\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh! So that document actually doesn\u0027t compute the longitude correctly because it assumes that inertial X is aligned with body X at t = 0. That\u0027s not the case for most KSP planets and moons. If that\u0027s what SCANSat and the others are using, then it would appear there is a flaw in their code.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bk2w\u0022 data-cite=\u0022bk2w\u0022\u003E\u003Cdiv\u003ESo I\u0027m trying to plan a tricky maneuver using Mission Architect, and I\u0027m not figuring things out quite right. I\u0027d appreciate any help.\u003Cp\u003EI have a craft in Kerbin orbit (and can get state from the SFS, no problem). I departing Kerbin and transferring to Jool with a low Pe over Jool (~8000km radius). Somewhere near the Jool Pe (maybe before, maybe after), I\u0027ll make another burn to adjust my swing around Jool and intercept Pol. Unfortunately, while I can work up a mission that gets me an 8000km periapsis and very little inclination, I can\u0027t seem to find the Pol intercept. The optimizer ends up halting with a Pol-periapsis of 50Mm, or 100Mm.\u003C/p\u003E\u003Cp\u003EUsing a fake orbit (prior to launching the actual spacecraft), I was able to find a mission that got my into an equatorial Pol orbit for about 3300m/s (1950m/s to transfer to Jool, 350m/s to intercept Pol, and 1000m/s to capture in Pol orbit). But reloading with the actual orbit shifts things enough that I can\u0027t locate any solution anymore.\u003C/p\u003E\u003Cp\u003EA couple of runs with the Graphical Analyzer have suggested that Pol is basically on the wrong side of Jool when I make the fly-by. If I know where Pol is when I swing by Jool, I can advance or delay my Kerbin departure to compensate and place Pol in the right section of its orbit. But I can\u0027t quite determine where Pol IS when I fly-by.\u003C/p\u003E\u003Cp\u003EIs there some way of determining where Pol is in relation to my spacecraft at the fly-by? Some other way of laying up the mission that can allow the optimizer to find a feasible solution?\u003C/p\u003E\u003Cp\u003E-Brian\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, so try setting up your inbound orbit into Jool such that it has a RAAN of \u002B180 degrees of what it is now. That may help. If not, try playing around with the inbound RAAN more. You should eventually be able to get Pol on the \u0022right side\u0022 as it were. If you have a MAT file you want to upload, I\u0027d be happy to take a look as well.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ANWRocketMan\u0022 data-cite=\u0022ANWRocketMan\u0022\u003E\u003Cdiv\u003E@Arrowstar: One last question. How can I determine the burn parameters for a fly-by mission where I\u0027m using a much shorter transfer time from the porkchop plotter for fly-by\u0027s? The Multi fly-by maneuver sequencer does not seem to acknowledge my bounds on lower travel times. This considering using NTR\u0027s or some other form of propulsion that allows higher delta-V transfers. If I set the bounds to give me a transfer of, for example, 120 days or less to Duna(Mars) it still gives me a standard fly-by.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe Multi-Flyby Maneuver Sequencer finds the delta-voptimal transfer orbit, not the time optimal (shortest) transfer orbit. If you want the MFMS to find a shorter maneuver, try lowering the maximum duration of the leg you want to shorten. Let me know if that helps. If not, take some screenshots and post it here so I can more specifically see what you\u0027re doing.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-23T23:54:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003ESI just created a Duna mission to 30km Pe and set the COAST event to 10 minutes prior to Pe. However when I tried to load a craft onto this orbit using the Final State data and Hyperedit, it told me the craft was out of Duna\u0027s SOI. I tried manually editing the save file (looked up the parameters in the KSP wiki to make sure proper info was being assigned) and the game just deleted the craft. I wanted to run the craft through the atmosphere, and then import the new orbit into a new SET_STATE and see how MA reacted. I think I just didn\u0027t set the parameters right for a hyperbolic orbit.\u003Cp\u003ESo instead I Hyperedited a craft high around Kerbin and burned to lower my Pe within the atmosphere. I loaded this orbit into MA, coasted a few mins prior to Pe, then created a new state once the craft had left the atmosphere with the new orbit. MA reacted by saying my ship landed and took off again. In the aerobrake scenario I described, it would properly connect the orbits.\u003C/p\u003E\u003Cp\u003EBoth mission files are \u003Ca href=\u0022http://www.blade-edge.com/misc/aerobrake%20test.zip\u0022 rel=\u0022external nofollow\u0022\u003Euploaded here\u003C/a\u003E.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, so I took a the files you sent. In the Kerbin case, which I think was the one you\u0027re most interested in, it\u0027s not so much that MA thought you landed and took off as it is that MA just connected the final point of the first coast with the point representing the state you set afterwards. That it happened to go through the planet is a coincidence. Anyway, it looks like both you and MA did what you were supposed to do, and the visual peculiarity that you saw is just that. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ELet me know if that helps!\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-24T01:17:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EGot it! Thanks for taking the time to put together a detailed description. Unfortunately I still don\u0027t think it\u0027s feasible to pull off, mainly because of the time required to go from starting the KSP orbit propagation to ending it. The mission optimizer and related functionality has to perform a large number of function calls per second to finish in a reasonable time, and the added time to communicate with KSP and wait for a result to come back would be prohibitive. The other issues are surmountable I think, but that one isn\u0027t as far as I can tell.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHrm, we\u0027re still not quite on the same page. It still sounds like you\u0027re trying to talk to KSP while the aircraft is performing the aerobrake to determine the effect that it is having on its orbit? Again, there\u0027s no data streaming of any kind happening between MA and KSP. MA (via KSPTOTConnect) tells KSP \u0022place craft on this orbit\u0022 (which could be the one in my Duna example). MA then queries KSP, after the user tells it the aerobrake pass is over, and asks (via KSPTOTConnect) \u0022what\u0027s the new orbit?\u0022 - just as if the user were importing an orbit from KSP. In fact that\u0027s exactly what I was trying to show with this:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EOkay, so I took a the files you sent. In the Kerbin case, which I think was the one you\u0027re most interested in, it\u0027s not so much that MA thought you landed and took off as it is that MA just connected the final point of the first coast with the point representing the state you set afterwards. That it happened to go through the planet is a coincidence. Anyway, it looks like both you and MA did what you were supposed to do, and the visual peculiarity that you saw is just that.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENow that you\u0027ve confirmed it\u0027s just a straight connection between the orbits, what I actually ended up proving with this example (to myself, obviously no doubt you knew this) is that MA is okay with you ending an orbit there, and then picking it up again over here. I honestly did not consider when originally coming up with this idea the option of being able to create a new orbital state yourself! So forget everything I said about the AB_MANEUVER state and having MA calculate a new orbit, fuel-less burns... toss it all out! \u003Cem\u003EAll MA needs to do is be able to export an orbit\u003C/em\u003E. The final state in the Duna mission example? If MA can tell KSP to place a user-selected craft onto that time/trajectory (which I failed to do manually), I can just do what I did in the Kerbin example - let the craft pass through the atmosphere and then create and import a new orbital state.\u003C/p\u003E\u003Cp\u003EThe fact that a line will go through the planet is rather cosmetic, as would be the LOW PE warnings, because I know what I\u0027m doing (famous last words...)\u003C/p\u003E\u003Cp\u003ERegardless - I promise I will be happy with either solution you choose to pursue!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EAh! So that document actually doesn\u0027t compute the longitude correctly because it assumes that inertial X is aligned with body X at t = 0. That\u0027s not the case for most KSP planets and moons. If that\u0027s what SCANSat and the others are using, then it would appear there is a flaw in their code.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI will pass this along to them, then\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-24T02:26:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003EHrm, we\u0027re still not quite on the same page. It still sounds like you\u0027re trying to talk to KSP while the aircraft is performing the aerobrake to determine the effect that it is having on its orbit? Again, there\u0027s no data streaming of any kind happening between MA and KSP. MA (via KSPTOTConnect) tells KSP \u0022place craft on this orbit\u0022 (which could be the one in my Duna example). MA then queries KSP, after the user tells it the aerobrake pass is over, and asks (via KSPTOTConnect) \u0022what\u0027s the new orbit?\u0022 - just as if the user were importing an orbit from KSP. In fact that\u0027s exactly what I was trying to show with this:\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the clarification! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I understand that there isn\u0027t any streaming going on between MA and KSP. In the scheme you\u0027re describing, there are only two points in time at which data is passed along, correct? This would be the point at which MA \u0022exports\u0022 an orbit to KSPTOT via KSPTOTConnect, and the point at which KSPTOTConnect transmits the new orbit back to MA post-aerobrake. Does that sound correct?\u003C/p\u003E\u003Cp\u003EIf so, it would still be infeasible I think. Consider all the time you\u0027d have to wait for KSP to finish propagating from the exported orbit to the end of the aerobrake maneuver. Now image doing that ~10000 times during the course of a normal script optimization run. It would quickly become prohibitive. I can see doing something like this if it was just to propagate an orbit through the atmosphere one time, but unfortunately I have to use the same method to propagate during optimization as I do during the normal \u0022single shot\u0022 propagation.\u003C/p\u003E\u003Cp\u003EThanks for going back and forth with me on this. I admit I may not still have my head fully around your idea, so if it sounds like I\u0027m missing something still, please point it out. And, if so, please do address my concern about mission optimization. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ERegardless - I promise I will be happy with either solution you choose to pursue!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks! Unless I\u0027m wildly off the mark with what I wrote above, I think I\u0027ll be pursuing the approximation method. Either way, it sounds like v1.1.8 is going to be the aerobraking update! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI will pass this along to them, then\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks. Please do let me know if they have any questions (or flat out think I\u0027m wrong \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003EIn other good news, I added the ability to record Mission Animator animations to .avi files this evening. I must say, it works lovely. And as this was last \u0022feature\u0022 I wanted to get into Mission Animator, pending feedback after the v1.1.7 release, Mission Animator is feature complete! Woot! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-24T03:27:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EThanks for the clarification! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I understand that there isn\u0027t any streaming going on between MA and KSP. In the scheme you\u0027re describing, there are only two points in time at which data is passed along, correct? This would be the point at which MA \u0022exports\u0022 an orbit to KSPTOT via KSPTOTConnect, and the point at which KSPTOTConnect transmits the new orbit back to MA post-aerobrake. Does that sound correct?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay, we\u0027re on the same page here...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIf so, it would still be infeasible I think. Consider all the time you\u0027d have to wait for KSP to finish propagating from the exported orbit to the end of the aerobrake maneuver. Now image doing that ~10000 times during the course of a normal script optimization run. It would quickly become prohibitive. I can see doing something like this if it was just to propagate an orbit through the atmosphere one time, but unfortunately I have to use the same method to propagate during optimization as I do during the normal \u0022single shot\u0022 propagation.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnd okay, now I think I see where you\u0027re coming from - but don\u0027t really understand how the optimizer becomes involved in this. There\u0027s nothing to optimize right? Take the Duna mission script I linked you to for example. Let\u0027s say I export the orbit, run through the atmosphere, and then re-import the orbit as a new SET_STATE (like the Kerbin example). Now, moving forward with that new orbit I could, say, try to set up an encounter with Ike via the RMS. Then use the optimizer to get a good Ike encounter. Or, I could re-optimize prior to the SET_STATE event to maybe lift my Pe a little higher in the atmosphere, then re-export, run the game and update the SET_STATE event with a new orbit and try to optimize an Ike encounter from there. You can already disable events from being allowed to be optimized, and SET_STATE events have no optimization options anyways so I\u0027m a bit confused as to how the optimizer plays any role here, or why it even would.\u003C/p\u003E\u003Cp\u003EAgain, the Kerbin mission file is a literal example of what I\u0027m proposing the script would look like post-aerobrake (now that I\u0027ve realized the only new thing MA has to do is export an orbit). Take events 3 \u0026amp; 4 from the Kerbin script and tack them on the end of the Duna script - that\u0027s what I was going for until I failed to get the orbit manually set in the game. If the \u0022break\u0022 in the Kerbin script between events 2 \u0026amp; 3 isn\u0027t A Good Thing that should normally be done, then I didn\u0027t realize.\u003C/p\u003E\u003Cp\u003EAlthough, I realize now maybe what you\u0027re really saying is \u0022I\u0027d like to allow this way to be optimized, but this way can\u0027t feasibly be optimized, however the approximation way can\u0022. Well, if that\u0027s the case then yea might as well go for the approximation because you\u0027re right - spending the time (even under time/phys warp) for an in-game aerobrake to come out on a useless orbit and having to guess at a better dip through the soup would be a pain compared to letting the optimizer guesstimate it for you.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIn other good news, I added the ability to record Mission Animator animations to .avi files this evening. I must say, it works lovely. And as this was last \u0022feature\u0022 I wanted to get into Mission Animator, pending feedback after the v1.1.7 release, Mission Animator is feature complete! Woot! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnd here I was slightly dreading having to dig up a cheap desktop capture tool to get the job done. I can\u0027t find the Donate button. Why is there not a Donate button??\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-24T03:32:42Z\u0022 title=\u002209/24/2014 03:32  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 24, 2014\u003C/time\u003E by Gaiiden\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-24T03:41:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003EAlthough, I realize now maybe what you\u0027re really saying is \u0022I\u0027d like to allow this way to be optimized, but this way can\u0027t feasibly be optimized, however the approximation way can\u0022. Well, if that\u0027s the case then yea might as well go for the approximation because you\u0027re right - spending the time (even under time/phys warp) for an in-game aerobrake to come out on a useless orbit and having to guess at a better dip through the soup would be a pain compared to letting the optimizer guesstimate it for you.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is basically it. More generally, it has to do with the fact that any time you change any event prior to the aerobrake maneuver, you would have to recompute the aerobrake. Want to slide add a deep space maneuver to lower delta-v somewhere? Recompute. Want to adjust your initial orbit based on what your launch vehicle actually accomplished? Recompute. And so on. I foresee something like that just getting tedious and hard to use effectively.\u003C/p\u003E\u003Cp\u003EHere\u0027s what I\u0027m going to do. I\u0027ll work on the approximation for v1.1.8. You can test it out and we can decide if it\u0027s worth having around (that is, does it do a decent job of predicting the effects of atmospheric drag or not). If it doesn\u0027t, we\u0027ll revisit all of this. I am fairly confident that it will work, though. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EBtw, I really do appreciate your taking the time to lay out this idea for me. It\u0027s definitely nice to know that there are folks who are invested enough in my software that they\u0027re willing to go to bat for changes they want to see. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnd here I was slightly dreading having to dig up a cheap desktop capture tool to get the job done. I can\u0027t find the Donate button. Why is there not a Donate button??\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t really like the idea of accepting money for KSP TOT, hence no Donate button. Give to a local charity what you would give to me if you\u0027d like to give anything at all. And you can donate your time with the KSP TOT wiki, whenever I get around to creating that (hopefully soon, just need a Github repo with my code on it...). \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-24T04:20:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EHere\u0027s what I\u0027m going to do. I\u0027ll work on the approximation for v1.1.8. You can test it out and we can decide if it\u0027s worth having around (that is, does it do a decent job of predicting the effects of atmospheric drag or not). If it doesn\u0027t, we\u0027ll revisit all of this. I am fairly confident that it will work, though. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYea, I totally understand now how effective my method would be for a single use case but overall... yea, could get tedious. If that were the best that could be done though, I would call it worthwhile. Having the other method however certainly does provide an advantage even at the loss of accuracy. Peh. Accuracy. That\u0027s not fun \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E That\u0027s not kerbal!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EBtw, I really do appreciate your taking the time to lay out this idea for me. It\u0027s definitely nice to know that there are folks who are invested enough in my software that they\u0027re willing to go to bat for changes they want to see. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m just glad my persistence didn\u0027t come off as hostile or demanding, as I\u0027ve seen happen in some cases from both sides (author, user). Was worried this whole time honestly of just pissing you off in the end \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EI don\u0027t really like the idea of accepting money for KSP TOT, hence no Donate button. Give to a local charity what you would give to me if you\u0027d like to give anything at all. And you can donate your time with the KSP TOT wiki, whenever I get around to creating that (hopefully soon, just need a Github repo with my code on it...). \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFair \u0027nuff. Just want you to know you deserve it IMO\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-24T05:16:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003EYea, I totally understand now how effective my method would be for a single use case but overall... yea, could get tedious. If that were the best that could be done though, I would call it worthwhile. Having the other method however certainly does provide an advantage even at the loss of accuracy. Peh. Accuracy. That\u0027s not fun \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E That\u0027s not kerbal!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m actually hoping it\u0027ll be fairly accurate once you get the correct ballistic coefficient into the equation. We\u0027ll see! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\u0027m just glad my persistence didn\u0027t come off as hostile or demanding, as I\u0027ve seen happen in some cases from both sides (author, user). Was worried this whole time honestly of just pissing you off in the end \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot at all. As I said, I\u0027m just happy that people use KSP TOT enough to care about feature requests. It\u0027s kind of a small user community we have here. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EFair \u0027nuff. Just want you to know you deserve it IMO\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, I definitely appreciate the sentiment! Everyone likes to be appreciated after all. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-25T02:28:56Z","Content":"\n\u003Cp\u003EHi everyone, some good news here. While I wait for RadarManFromTheMoon to get back to me about finishing up some great improvements on KSPTOTConnect (should be done tomorrow I hope?), I\u0027ve been looking at the speed at which Mission Architect runs when there are many events in the event script, say for example fifteen events. \u003C/p\u003E\u003Cp\u003EThe big slow down with cases such as these is the need to search for SoI transitions. If you leave Kerbin\u0027s SoI, there\u0027s a chance you could hit Duna, or Jool, or Eve, or where ever. Even if you stay within Kerbin\u0027s SoI, you might still hit the Mun or Minmus. In each of these cases (and many others!), the spacecraft\u0027s existing orbit needs to be checked for SoI transitions, and if such a transition exists, it needs to be handled.\u003C/p\u003E\u003Cp\u003ENow, a few updates ago I implemented a system by which the SoI transition checker would only check for SoI transitions where the spacecraft was between the periapsis and apoapsis of the celestial body being checked. This was a great improvement and led to some sweet accuracy and speed improvements. However, there\u0027s another factor here that wasn\u0027t accounted for at that time: the celestial body in question may be no where near the spacecraft within that interval! In the current version of Mission Architect, SoI transition searches are run regardless of this factor, resulting in many wasted calls to an optimizer.\u003C/p\u003E\u003Cp\u003EIn the upcoming version of KSP TOT and Mission Architect, I\u0027ve resolved this. What I\u0027m doing is comparing the distance between the spacecraft and the celestial body at the end points of the (small) interval where the spacecraft is between the periapsis an apoapsis. If the minimum of those distances is greater than some fraction of the celestial body\u0027s semi-major axis, the SoI check is aborted without going to the optimizer.\u003C/p\u003E\u003Cp\u003EIn my tests, this results in a speed up of roughly x2. It\u0027s not the order of magnitude increase I was hoping for, but it\u0027s still pretty cool! Neat, huh? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-25T03:11:43Z","Content":"\n\u003Cp\u003Eefficiency FTW! Possible slight increase, since you only say \u0022celestial body\u0022: if the SOI check is being done along a heliocentric orbit, does it automatically exclude all moons?\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-25T03:15:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003Eefficiency FTW! Possible slight increase, since you only say \u0022celestial body\u0022: if the SOI check is being done along a heliocentric orbit, does it automatically exclude all moons?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou are correct. It only checks for the immediate children of the central body the spacecraft is orbiting around (or, we could also say, the immediate peers of the spacecraft).\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-09-25T13:05:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003E...\u003Cp\u003EIn the upcoming version of KSP TOT and Mission Architect, I\u0027ve resolved this. What I\u0027m doing is comparing the distance between the spacecraft and the celestial body at the end points of the (small) interval where the spacecraft is between the periapsis an apoapsis. If the minimum of those distances is greater than some fraction of the celestial body\u0027s semi-major axis, the SoI check is aborted without going to the optimizer.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is certainly interesting. If I had devised something to limit the checks for SoI changes, I would have considered a sequence of checks. Distance from the SoI mainbody seems to be fast to check, and good in most cases to discriminate; but if the distances match I would then consider the phase angle of the two objects to further limit the search; and if possible without much detriment to the algorithm speed, I may have considered a third check about the vertical separation of the objects (with some weird math about inclination and true anomaly by distance to find the vertical displacement to the ecliptic plane). \u003C/p\u003E\u003Cp\u003EI believe the SoI change is actually dictated by the distance of the craft from the new body, unless there is some tricky change in reference system that involves a lot of math, computing the distance may be easier than the vertical separation, so that third check may not be worth the time taken.\u003C/p\u003E\u003Cp\u003EAlso, how often is called the routine that checks for possible SoI changes? Or, how small the interval moved along the trajectories before another check is done? I would consider to do another check only after the craft has moved a distance equal to how distant it was from the closest body, minus the SoI range of that body.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-25T13:33:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022diomedea\u0022 data-cite=\u0022diomedea\u0022\u003E\u003Cdiv\u003EThat is certainly interesting. If I had devised something to limit the checks for SoI changes, I would have considered a sequence of checks. Distance from the SoI mainbody seems to be fast to check, and good in most cases to discriminate; but if the distances match I would then consider the phase angle of the two objects to further limit the search; and if possible without much detriment to the algorithm speed, I may have considered a third check about the vertical separation of the objects (with some weird math about inclination and true anomaly by distance to find the vertical displacement to the ecliptic plane). \u003Cp\u003EI believe the SoI change is actually dictated by the distance of the craft from the new body, unless there is some tricky change in reference system that involves a lot of math, computing the distance may be easier than the vertical separation, so that third check may not be worth the time taken.\u003C/p\u003E\u003Cp\u003EAlso, how often is called the routine that checks for possible SoI changes? Or, how small the interval moved along the trajectories before another check is done? I would consider to do another check only after the craft has moved a distance equal to how distant it was from the closest body, minus the SoI range of that body.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, so, the SoI check it only performed once per coast evaluation, nominally. Of course, if you do transition SoIs on a coast, then after said transition occurs, another check is performed on the new body you\u0027re orbiting around. The SoI check is a few operations in sequence:\u003C/p\u003E\u003Cp\u003E1) Sanity checks: is my periapsis sufficiently above the periapsis of the target body and my apoapsis sufficiently below the apoapsis of the target body that I would never intersect their SoI? (if yes, skip SoI check)\u003C/p\u003E\u003Cp\u003E2) orbital plan check: some calculations are done with respect to the angular separation of the angular momentum vectors: small separation means the bodies are nearly co-planar and more likely to intersect, but large separation means that there are only two probable locations that an SoI transition would occur (the nodes of the orbit). It\u0027s hard to explain without showing the math, but basically, the more co-planar the orbits are, the more likely it is that the SoI check continues;\u003C/p\u003E\u003Cp\u003E3) My new \u0022distance between bodies at arc endpoints\u0022 check, above; and finally\u003C/p\u003E\u003Cp\u003E4) The actual SoI check: minimize the distance between the spacecraft and the celestial body\u0027s SoI boundary. If that distance goes to 0, you\u0027ve transitioned. If it remains above 0, there is no transition. There is where I use the optimizer and where things get CPU expensive. All the rest of those steps occur very, very quickly.\u003C/p\u003E\u003Cp\u003EAnd that\u0027s basically the gist of it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"mhoram","CreatedById":78756,"CreatedDateTime":"2014-09-25T20:50:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EAh! So that document actually doesn\u0027t compute the longitude correctly because it assumes that inertial X is aligned with body X at t = 0. That\u0027s not the case for most KSP planets and moons. If that\u0027s what SCANSat and the others are using, then it would appear there is a flaw in their code.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPlease leave me a note, if you happen to stumple upon other inconsistencies in the document. I would like to get it free from such issues.\u003C/p\u003E\u003Cp\u003EAdded a remark in the PDF about this problem.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-25T21:09:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mhoram\u0022 data-cite=\u0022mhoram\u0022\u003E\u003Cdiv\u003EPlease leave me a note, if you happen to stumple upon other inconsistencies in the document. I would like to get it free from such issues.\u003Cp\u003EAdded a remark in the PDF about this problem.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the note, I will!\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-09-25T22:49:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EAh, so, the SoI check it only performed once per coast evaluation, nominally. Of course, if you do transition SoIs on a coast, then after said transition occurs, another check is performed on the new body you\u0027re orbiting around. \u003Cp\u003E....\u003C/p\u003E\u003Cp\u003EAnd that\u0027s basically the gist of it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDefinitely, very interesting. Yes, the orbital plan check is clear. And that sequence makes clear why most of computing time is spent on the actual SoI check, the optimizer has to make a few runs to solve for the transition. \u003C/p\u003E\u003Cp\u003EThough, I was thinking previous steps had more importance (so much to allow that important gain in time you wrote before), and guessed it was required to have multiple checks if a coast segment was crossing the orbits of a number of different bodies \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-26T00:33:25Z","Content":"\n\u003Cp\u003EHi everyone,\u003C/p\u003E\u003Cp\u003EThis evening I am pleased to announce the release of KSP Trajectory Optimization Tool \u003Cstrong\u003Ev1.1.7!\u003C/strong\u003E This is a nice update with the following features:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cstrong\u003EMajor improvements to the KSPTOTConnect netcode courtesy of RadarManFromTheMoon\u003C/strong\u003E. These improvements significantly increase the robustness and speed of KSP TOT Connect, making it much more enjoyable to use. Thanks, RadarManFromTheMoon! \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003ENew Mission Architect Tool: Mission Animator\u003C/strong\u003E. Mission Animator is a multi-purpose visualizer and animation creation tool for Mission Architect. \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThree new objective functions in Mission Architect: maximize inclination, maximize eccentricity, and \u0022satisfy constraints\u0022. \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E2x speed up of Mission Architect script execution when using Strict SoI Search \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E\u003Cstrong\u003ETime may now be specified in Earth units or Kerbin units.\u003C/strong\u003E NOTE: Kerbin units are HIGHLY experimental. Report any issues with KSP TOT while using Kerbin units immediately. \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EBug fixed with MA Graphical Analysis tool when plotting against MET. \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ENew \u0022Distance Traveled\u0022 option in MA Graphical Analysis. \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EFixed two bugs with Maneuver Exec Assistant \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe download is available in the OP, as always. Please note that this release is for \u003Cstrong\u003EWindows\u003C/strong\u003E only at this time. I rely on bk2w to supply the Mac releases, and he provides me a Mac package at his convenience.\u003C/p\u003E\u003Cp\u003EPlease report any issues with the following new features:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EKSPTOTConnect; \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EMission Animator; and \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EKerbin time units. \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHave at it, everyone, thanks! I\u0027m looking forward to seeing some sweet animations in the future. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003EOh, quick announcement about what\u0027s on the plate for \u003Cstrong\u003Ev1.1.8.\u003C/strong\u003E This update will be the Aerobraking Update and should hopefully include an aerobraking delta-v model that I will begin to incorporate into Mission Architect next week. Stay tuned!\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-26T00:43:35Z\u0022 title=\u002209/26/2014 12:43  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 26, 2014\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RadarManFromTheMoon","CreatedById":98095,"CreatedDateTime":"2014-09-26T02:17:45Z","Content":"\n\u003Cp\u003Eplaying atround with it a bit. Told the Mission Architect to coast to a given UT, burn for the mun and then coast to the pe of the mun to finally circularize there. This is what I got:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/65236705/Clipboard01.jpg\u0022 alt=\u0022Clipboard01.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003Ehe seems to get the soi change. But does not render it correctly\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/65236705/Clipboard02.jpg\u0022 alt=\u0022Clipboard02.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/65236705/to%20mun%20bug.mat\u0022 rel=\u0022external nofollow\u0022\u003Emat-file\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-26T02:30:36Z","Content":"\n\u003Cp\u003EThanks for the report! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ESomething weird is going on with your burn but I haven\u0027t figured out what yet. I\u0027ll look into it...\u003C/p\u003E\u003Cp\u003EEDIT: In the mean time, check out Mission Animator; you\u0027ll see that the spacecraft goes around once before the SoI change, meaning that the picture is rendered correctly. It\u0027s just unusual to go a full rev before actually getting to the Mun...\u003C/p\u003E\u003Cp\u003EEDIT^2: Yup, okay, a bit of investigation later and it appears that there\u0027s nothing formally wrong. Mission Architect is doing what I told it to do, which is to search out more than one period for an SoI transition. (The number of periods it goes out is computed and, in this case, actually looks like it\u0027s 2.0.) You just got very lucky (unlucky?) to have the optimizer find the SoI transition on the second orbit around Kerbin instead of the first.\u003C/p\u003E\u003Cp\u003EThis \u0022search more than one revolution\u0022 feature is more for safety than anything else. I can\u0027t always predict how many revs the user expects the SoI search code to go out, and so I set it to a compromise between not having enough (such as always just going 1 rev) and too many (going, say, 5-10 revs). Given that this is the first time I\u0027ve seen this happen, I\u0027m not sure what to say except \u0022congrats!\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ll solicit input in the thread here as to what people think Mission Architect should do in this case. If you have a thought, please post here. Thanks! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-26T02:48:42Z\u0022 title=\u002209/26/2014 02:48  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 26, 2014\u003C/time\u003E by Arrowstar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RadarManFromTheMoon","CreatedById":98095,"CreatedDateTime":"2014-09-26T02:48:04Z","Content":"\n\u003Cp\u003EI\u0027 see. Havent realized that. So the optimizer just prefers to burn as soon as possible even when poor Jebediah has to do an extra turn around an highly eccentric orbit? Thats not really a bug. How can one prevent that? Would it be possible, and sensible, to add an option like \u0022minimize mission duration\u0022 to the optimizer?\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2014-09-26T02:53:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022RadarManFromTheMoon\u0022 data-cite=\u0022RadarManFromTheMoon\u0022\u003E\u003Cdiv\u003EWould it be possible, and sensible, to add an option like \u0022minimize mission duration\u0022 to the optimizer?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s a good idea. I can certainly look into it! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: As for preventing it, I would encourage you to use the \u0022go to true anomaly\u0022 coast and optimize on that as opposed to optimizing the UT of the burn. See if that does anything for you. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"bk2w","CreatedById":99893,"CreatedDateTime":"2014-09-26T16:20:52Z","Content":"\n\u003Cp\u003EI\u0027m making progress with Mission Architect in my attempt to swing by Jool and intercept Pol. I\u0027m having a lot better luck getting a solution by using the Jool-flyby to lower the apoapsis to somewhere around 400Mm, then burning at api to raise periapsis to near Pol\u0027s orbit. The Optimizer can then take over and tune those two burns to get close to Pol. Mission file is \u003Ca href=\u0022https://www.dropbox.com/s/phbzejfe6uqn1qq/mission%20to%20Pol%20via%20Jool%202.mat?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E; I\u0027m still playing with it as it doesn\u0027t reach Pol quite yet.\u003C/p\u003E\u003Cp\u003EI do have some suggestions to make the process a bit easier:\u003C/p\u003E\u003Cp\u003E- When looking at the whole Joolean system with child bodies visible, the child bodies are so small that they visually merge with the arc of their orbits. I end up having to show SoI radius and popping the orbit display out so I can make it larger, before I can finally locate Pol and Bop. So it would be useful to make child bodies a minimum size and a contrasting color in order to make them visible.\u003C/p\u003E\u003Cp\u003E- With multiple burns in the Joolean system, I see the locations of child bodies at multiple points on their orbits. I\u0027m presuming these are the body locations at each event. However, it\u0027s difficult to tell which location correlates to which event. Could we color the bodies according to the event location corresponds to?\u003C/p\u003E\u003Cp\u003EThe Mission Animator is particularly interesting, and has the potential to be a really useful visualization tool.\u003C/p\u003E\u003Cp\u003E- Can you add the option to display orbit arcs for child bodies? This would make identifying which body is which easier.\u003C/p\u003E\u003Cp\u003E- When using \u0022Custom\u0022 camera position, can you add a \u0022zoom\u0022 capability? It seems that the Custom camera creates a 3D box the size of the entire SoI.\u003C/p\u003E\u003Cp\u003EIn other news, OSX version compiled and handed off to Arrowstar. If anyone else is successfully using the OSX version, please chime in; I\u0027d like to know if anyone else is able to use it.\u003C/p\u003E\u003Cp\u003E-Brian\u003C/p\u003E\n"}]}