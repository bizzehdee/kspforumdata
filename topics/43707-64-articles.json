{"TopicId":43707,"ForumId":34,"TopicTitle":"kOS Scriptable Autopilot System 0.9","CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-08-24T14:28:17Z","PageNum":64,"Articles":[{"CreatedByName":"Sacred Aardvark","CreatedById":85856,"CreatedDateTime":"2013-10-24T09:35:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Payload\u0022 data-cite=\u0022Payload\u0022\u003E\u003Cdiv\u003ENo go on v0.85. Syntax Error on line 2.\u003Cp\u003ELine 2 is a blank line.\u003C/p\u003E\u003Cp\u003EProgram runs fine in 0.71.\u003C/p\u003E\u003Cp\u003EAlso programs that would run just fine on 0.84 now exhibit the same behavior.\u003C/p\u003E\u003Cp\u003Esyntax error on random line number.\u003C/p\u003E\u003Cp\u003EShy of inserting a print statement after every line, there is no way to debug this.\u003C/p\u003E\u003Cp\u003EEDIT: That wont work either. I set line 0 to...\u003Cstrong\u003Eprint \u0022passed\u0022.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI still get the same error and it never prints \u003Cstrong\u003Epassed\u003C/strong\u003E.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESince it runs fine in 0.71 it probably isn\u0027t the same problem, but I had issues with perfectly fine commands throwing syntax error in 0.71, possibly due to excessive variable length. i.e. \u0022set finalOrbitalHeight to 100000.\u0022 didn\u0027t work, but changing it to \u0022set Height to 100000.\u0022 made it work. I also had a print \u002230\u0022 at(30,30). which gave a \u0022unknown variable \u0027 \u002230\u0022 at(30,30) \u0027 error, deleting and retyping said line fixed it. Try deleting said blank line and see if it\u0027ll work. Beyond that, the code might help with troubleshooting, and help verify the problem isn\u0027t localized to your installation. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E[edit] I\u0027m assuming the code in question is your space computer, tried out the ascent script and it gave me a syntax error on line 4, regardless of whether the line was empty or had a command in it.\u003C/p\u003E\u003Cp\u003E[edit 2] Further investigations; I had some issues with 0.71 with lines long enough to cross the border of the screen, scrolling past the screen caused random bits of lines appear in wrong places, which seemed to cause syntax errors, so I tried shortening the lines and removing the comments in your space computer ascent script. That resulted in the syntax error jumping from line 4 to line 0. The display issue with going past the screen edge seems to be fixed in 0.85, and my own script is giving a syntax error on line 0 as well, so it\u0027s probably unrelated to the crossing of the screen edge thing in 0.71. (though I\u0027ve no idea why your ascent script even works in 0.71, since if I typed that long lines it went potty, but yours works fine in my .71 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_ohmy.png\u0022 alt=\u0022:o\u0022\u003E )\u003C/p\u003E\u003Cp\u003E[edit 3] Should probably mention the tests were done in the sandbox not career, in case it has any bearing on anything.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-24T11:02:09Z\u0022 title=\u002210/24/2013 11:02  AM\u0022 data-short=\u002210 yr\u0022\u003EOctober 24, 2013\u003C/time\u003E by Sacred Aardvark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-10-24T16:51:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022razark\u0022 data-cite=\u0022razark\u0022\u003E\u003Cdiv\u003EBoth of these set up a trigger that will be executed when the condition is met.\u003Cp\u003EThen the program ends, and the triggers it set up are wiped out.\u003C/p\u003E\u003Cp\u003EYou can run either of these lines outside of a program, and they should work. Or, you can set up a program such as:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EWAIT UNTIL ALTITUDE \u0026gt; 69999.\u003Cbr\u003ETOGGLE AG10.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis sets up a waiting condition, and execution of the program will wait until that condition is true before stepping to the next line. (Of course, this means that your program will not do anything else until then. There are other ways to set it up, too.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI wonder if there\u0027s a way to have a warning that\u0027s like \u0022Hey, you set up a trigger just before a program ended\u0022.\u003C/p\u003E\n"},{"CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-10-24T17:13:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022theSpeare\u0022 data-cite=\u0022theSpeare\u0022\u003E\u003Cdiv\u003ESome questions please:\u003Cp\u003E1. How do I target bodies?\u003C/p\u003E\u003Cp\u003E2. How do I lock my steering to node? \u0022lock steering to node\u0022 doesn\u0027t work, as it doesn\u0027t seem to recognize \u0022node\u0022.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFor #1, there\u0027s no support for that yet. It\u0027s something I haven\u0027t gotten around to.\u003C/p\u003E\u003Cp\u003EFor #2, locking steering to a node should work, but I believe the node needs to be added first.\u003C/p\u003E\u003Cp\u003E SET x TO NODE(A,B,C).\u003C/p\u003E\u003Cp\u003E ADD x.\u003C/p\u003E\u003Cp\u003E LOCK STEERING TO x. // or.... LOCK STEERING TO NEXTNODE. because you\u0027ve added it and NEXTNODE represents the active node that you see on the GUI\u003C/p\u003E\u003Cp\u003E // Later on when you want it gone...\u003C/p\u003E\u003Cp\u003E REMOVE x. // or... REMOVE NEXTNODE.\u003C/p\u003E\u003Cp\u003EOr create the node though other means and use NEXTNODE. But I\u0027ll fire it up tonight and test it.\u003C/p\u003E\n"},{"CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-10-24T17:15:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KvickFlygarn87\u0022 data-cite=\u0022KvickFlygarn87\u0022\u003E\u003Cdiv\u003EKevin, how\u0027s updating to .22 going?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EVery well! 0.85 is out which is built on 0.22. (I realize you posted this before then)\u003C/p\u003E\u003Cp\u003EI didn\u0027t come up with any 0.22 specific problems in my testing. I\u0027m waiting to see how things go for the community.\u003C/p\u003E\n"},{"CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-10-24T17:17:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EHaving peeked at the github code it looks like there is a calculation that makes electrical drain depend on clock speed. The faster the clock rate the faster the electrical drain. But you don\u0027t notice that this calculation is taking place because currently there\u0027s only one kind of CPU with one hardcoded clock speed. It seems as if the groundwork is there to be able to support multiple different speeds of CPU in the future.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECorrect! And at the current 5x speed, it uses the same power that it did before I made that change. \u003C/p\u003E\u003Cp\u003EIn the future you\u0027ll be able to overclock your CPU at the cost of power.\u003C/p\u003E\n"},{"CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-10-24T17:19:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lyinginbedmon\u0022 data-cite=\u0022Lyinginbedmon\u0022\u003E\u003Cdiv\u003EI\u0027ve perused the wiki but I\u0027m having trouble finding an answer.\u003Cp\u003EWhen a craft unloads, the code its running ceases to function and does not restart with the computer when it is reloaded later on. Is there any way to modify or replace that startup functionality to have codes run when the craft loads? Such as to ensure a space station remains properly oriented to its parent planet or to keep a long-range missile on target.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell my intent is to have everything persist, including which program you have loaded and where you are in the execution of that program. It\u0027s not something I\u0027m looking forward to coding.\u003C/p\u003E\u003Cp\u003EIssuing a command that does an autoexec when a craft loads sounds like a good stop-gap. I may look into that soon.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2013-10-24T20:19:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KevinLaity\u0022 data-cite=\u0022KevinLaity\u0022\u003E\u003Cdiv\u003EVery well! 0.85 is out which is built on 0.22. (I realize you posted this before then)\u003Cp\u003EI didn\u0027t come up with any 0.22 specific problems in my testing. I\u0027m waiting to see how things go for the community.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWelcome back! Thanks for this amazing work and - of course - don\u0027t forget to have fun \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KevinLaity\u0022 data-cite=\u0022KevinLaity\u0022\u003E\u003Cdiv\u003EIn the future you\u0027ll be able to overclock your CPU at the cost of power.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat sounds pretty cool. So at the expense of a lot of power directly controlling your rocket might become feasible? As in, coding full on guidance instead of locking to a heading?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-24T20:23:15Z\u0022 title=\u002210/24/2013 08:23  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 24, 2013\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sacred Aardvark","CreatedById":85856,"CreatedDateTime":"2013-10-24T20:55:18Z","Content":"\n\u003Cp\u003EOkay, I\u0027m giving up for now. I can\u0027t find the problem with my code. Sure, it ain\u0027t the neatest thing, but a line 3 syntax error isn\u0027t one of it\u0027s faults as far as I can tell. Fresh pair of eyes might help, so if anyone can shed light on why this code would work with KSP 0.21.1 and kOS 0.71, but not with KSP 0.22 and kOS 0.85, it\u0027d be appreciated \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ecode nuked, problem apparently figured out bit lower. {} bug out if spanning lines\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m pretty sure my code is inefficient, possibly silly and definitely hastily commented but a moment ago, so I don\u0027t know if it makes any sense. The indentation is a bit random as well due to being coded partially with kOS IDE and then partially rebuilt ingame while figuring out what works in practice and what doesn\u0027t. Still, it works in an older version, so is there some syntax change I\u0027ve might have missed between 0.71 and 0.85? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-25T11:28:26Z\u0022 title=\u002210/25/2013 11:28  AM\u0022 data-short=\u002210 yr\u0022\u003EOctober 25, 2013\u003C/time\u003E by Sacred Aardvark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"razark","CreatedById":32993,"CreatedDateTime":"2013-10-24T22:04:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KevinLaity\u0022 data-cite=\u0022KevinLaity\u0022\u003E\u003Cdiv\u003EI wonder if there\u0027s a way to have a warning that\u0027s like \u0022Hey, you set up a trigger just before a program ended\u0022.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think that would be good to have. Also, a way to list active triggers and a way to clear them would be useful.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-10-25T00:03:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KevinLaity\u0022 data-cite=\u0022KevinLaity\u0022\u003E\u003Cdiv\u003EWell my intent is to have everything persist, including which program you have loaded and where you are in the execution of that program. It\u0027s not something I\u0027m looking forward to coding.\u003Cp\u003EIssuing a command that does an autoexec when a craft loads sounds like a good stop-gap. I may look into that soon.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow about, along similar lines, if it runs when you toggle power off and on on the unit?\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-10-25T00:32:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KevinLaity\u0022 data-cite=\u0022KevinLaity\u0022\u003E\u003Cdiv\u003E- For nodes, :DELTAV:MAG now works correctly. Note that :DELTAV is now effectively the same as :BURNVECTOR\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIs it just me? I can\u0027t help but laugh every time I see this line. Even on the spaceport page. :DeltaV lol I guess we can be excited that :DELTAV:MAG works. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Though I haven\u0027t tried it yet because science.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-10-25T02:48:58Z","Content":"\n\u003Cp\u003E0.85 broke multi-line parenthesized expressions. Now you can\u0027t open a parenthesis on one line and then close it on a later line. The closer has to be on the same line as the opener now. For example:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset x to (\u003Cbr\u003E  ( 100 - 50 )  / ( 30 - 10 ) * 1.01\u003Cbr\u003E  ).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat gives a syntax error now. It didn\u0027t before. If I join it all together onto one line like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset x to (  ( 100 - 50 )  / ( 30 - 10 ) * 1.01  ).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThen it works. But it makes it a lot harder now to make long complex math expressions that look readable. Now they have to be strung together all on one line.\u003C/p\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-10-25T06:05:47Z","Content":"\n\u003Cp\u003EBy systematically testing my program line by line in a new file, I have narrowed down my problem to a certain block.\u003C/p\u003E\u003Cp\u003EWell, at least one of the problems anyway. I have written a test block that I have been trying to get to work. This errors the whole block without executing anything as far as I can tell.\u003C/p\u003E\u003Cp\u003EIt doesn\u0027t even clear the screen much less print \u0022hello\u0022.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eclearscreen.\u003Cbr\u003Eprint \u0022hello\u0022.\u003Cbr\u003Eset go to 0.\u003Cbr\u003Eset tOrbit to 100000.\u003Cbr\u003Eset hAtmo to 69500.\u003Cbr\u003Eset hAlt to tOrbit - 5000.\u003Cbr\u003Ewhen apoapsis \u0026gt; tOrbit then\u003Cbr\u003E {\u003Cbr\u003E set tThr to 0.\u003Cbr\u003E toggle ag5.\u003Cbr\u003E until altitude \u0026gt; hAtmo\u003Cbr\u003E  {\u003Cbr\u003E  if apoapsis \u0026lt; hAlt { set tThr to .1. }.\u003Cbr\u003E  if apoapsis \u0026gt; tOrbit { set tThr to 0. }.\u003Cbr\u003E  }.\u003Cbr\u003E }.\u003Cbr\u003Ewait until go = 1.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-25T06:10:22Z\u0022 title=\u002210/25/2013 06:10  AM\u0022 data-short=\u002210 yr\u0022\u003EOctober 25, 2013\u003C/time\u003E by Payload\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sacred Aardvark","CreatedById":85856,"CreatedDateTime":"2013-10-25T11:11:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E0.85 broke multi-line parenthesized expressions. Now you can\u0027t open a parenthesis on one line and then close it on a later line. The closer has to be on the same line as the opener now. For example:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset x to (\u003Cbr\u003E  ( 100 - 50 )  / ( 30 - 10 ) * 1.01\u003Cbr\u003E  ).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat gives a syntax error now. It didn\u0027t before. If I join it all together onto one line like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset x to (  ( 100 - 50 )  / ( 30 - 10 ) * 1.01  ).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThen it works. But it makes it a lot harder now to make long complex math expressions that look readable. Now they have to be strung together all on one line.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you! The issue seems to be bigger and affecting all multi line expressions.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Payload\u0022 data-cite=\u0022Payload\u0022\u003E\u003Cdiv\u003EBy systematically testing my program line by line in a new file, I have narrowed down my problem to a certain block.\u003Cp\u003EWell, at least one of the problems anyway. I have written a test block that I have been trying to get to work. This errors the whole block without executing anything as far as I can tell.\u003C/p\u003E\u003Cp\u003EIt doesn\u0027t even clear the screen much less print \u0022hello\u0022. \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis version of your code works(in the sense that it doesn\u0027t give an error), just slapped the whole bit between {} into one line:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ethis really really didn\u0027t want to display properly so f-it.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E:|\u003C/p\u003E\u003Cp\u003E[edits 1, 2 and 4.] okay the code doesn\u0027t want to display as it should, but there shouldn\u0027t be line breaks between \u0022when\u0022 and the last }. making a really long line if one was to spend a whole program in a loop.\u003C/p\u003E\u003Cp\u003E[edit 5] Yeah, went and changed my own script to put everything between {} into one line, which was about 4/5 of the whole thing. It works now, but is a bit of a bitch to read through a single 2000 character line \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003E[edit 6] Thank god for edit, I really need to start gathering stuff together before posting \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E Just noticed that while the script works, the game is running really really slow when it\u0027s running, though it ran fine in 0.71, and my print commands are showing 11 to 15 decimal points for altitude, speed and fuel, when before they would show 4 decimals. Was this changed somewhere between 0.71 and 0.85?\u003C/p\u003E\u003Cp\u003EAaand it apparently ends in a flagrant error on line 0 after all, just before completion. Probably messed something up while combining everything into one monster line to get it started. :|\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-25T13:15:07Z\u0022 title=\u002210/25/2013 01:15  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 25, 2013\u003C/time\u003E by Sacred Aardvark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-10-25T13:26:39Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EA warning about the new comm antenna from the KSP 0.22 update.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI just discovered the hard way that the new 0.22 antenna, called the \u003Cem\u003EComms DTS-M1\u003C/em\u003E, is not yet implemented in KOS\u0027s code. If you add them to your vessel expecting to be able to reach the archive with them, it won\u0027t work. I assume this will be addressed eventually, but for now it\u0027s a good idea to avoid them.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-10-26T08:03:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KevinLaity\u0022 data-cite=\u0022KevinLaity\u0022\u003E\u003Cdiv\u003EVery well! 0.85 is out which is built on 0.22. (I realize you posted this before then)\u003Cp\u003EI didn\u0027t come up with any 0.22 specific problems in my testing. I\u0027m waiting to see how things go for the community.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo you have any thoughts on how KOS will be integrated into the tech tree for career mode? (Right now you have to be playing a sandbox game to have access to the SCS module.)\u003C/p\u003E\n"},{"CreatedByName":"aNewHope","CreatedById":76088,"CreatedDateTime":"2013-10-26T16:09:31Z","Content":"\n\u003Cp\u003ECompatibility update for 0.22 ? Niiicee! If my SSTO launch program still works, I\u0027ll upload it soon\u00C3\u00A2\u00E2\u20AC\u017E\u00C2\u00A2.\u003C/p\u003E\u003Cp\u003EWhich features will be added next? \u003C/p\u003E\u003Cp\u003EI really\u0027d love to see actual thrust output of your rocket (would solve all asparagus problems and\u0027d be very helpful at all).\u003C/p\u003E\u003Cp\u003EGetting more info about your post-node trajectory would be very cool as well (Pe, Ap, etc...).\u003C/p\u003E\u003Cp\u003EI really love this mod. Keep up the good work Kevin!\u003C/p\u003E\u003Cp\u003EAnd don\u0027t stress yourself tooo much.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-10-26T20:20:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aNewHope\u0022 data-cite=\u0022aNewHope\u0022\u003E\u003Cdiv\u003ECompatibility update for 0.22 ? Niiicee! If my SSTO launch program still works, I\u0027ll upload it soon\u00C3\u00A2\u00E2\u20AC\u017E\u00C2\u00A2.\u003Cp\u003EWhich features will be added next? \u003C/p\u003E\u003Cp\u003EI really\u0027d love to see actual thrust output of your rocket (would solve all asparagus problems and\u0027d be very helpful at all).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI assume there\u0027s a reason that (maxthrust * current throttle setting) doesn\u0027t give you your current thrust? I\u0027ve been using this pretty reliably but never in a context with asparagus staging. Is there something about asparagus staging that breaks using that as a calculation?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EGetting more info about your post-node trajectory would be very cool as well (Pe, Ap, etc...).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve been working out the math for how to get the location of the Pe, Ap, and intercept with planet surface, and it is doable right now, but only by being *extremely* roundabout with how you arrive at the calculations. It would help to have that information more \u0022natively\u0022.\u003C/p\u003E\u003Cp\u003E1. It is possible to transform any of the script language\u0027s Euler rotation directions (like \u0022up\u0022, for example) into a unit vector in XYZ terms instead. It requires running some matrix math that would make a lot more sense to do natively in C# instead of as lines of KOSscript but it is doable.\u003C/p\u003E\u003Cp\u003E2. It is possible to work out your current normal vector (and therefore your angle of inclination from the body\u0027s equator) from your velocity vector cross product\u0027ed with the unit vector version of your current Up direction.\u003C/p\u003E\u003Cp\u003E3. It is possible to work out your current true anomaly angle (the angle between the periopsis of your elliptical orbit and your current location in the orbit) from comparing your current radius (altitude plus body radius) to the major axis of the ellipse (Ap height plus Pe Heght, plus diameter of body).\u003C/p\u003E\u003Cp\u003E4. Because you know your current Up vector, and your current altitude and can look up the radius of the SOI body, you do essentially have your current position, but expressed in polar coordinates instead of in Cartesian coordinates.\u003C/p\u003E\u003Cp\u003E5. Putting it all together should fix the exact picture of your current orbital ellipse, including where Ap and Pe are, where your impact with the Planet is, and so on.\u003C/p\u003E\u003Cp\u003EI have page after page of scribbled equation notes doing all that, BUT, it really feels like this is unnecessary work because I\u0027m pretty sure the underlying API must have more information about your current predicted orbital ellipse than KOSscript is currently exposing to the user.\u003C/p\u003E\u003Cp\u003EAs part of my attempt to make the landing script better, I\u0027m trying to work out all that math with one goal in mind: Find the LATLONG of my current predicted impact point on the planet. If I have that, then I can use it as the beginnings of making an \u0022aimed\u0022 landing.\u003C/p\u003E\n"},{"CreatedByName":"aNewHope","CreatedById":76088,"CreatedDateTime":"2013-10-26T21:49:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIs there something about asparagus staging that breaks using that as a calculation?\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe problem with asparagus is, that when one stage is out of fuel, all engines are still active --\u0026gt; maxthrust gives the value of ALL engines combined, not thrust of currently working engines. Also there is the problem with turbojets, whose thrust is also dependent on speed and IntakeAir.\u003C/p\u003E\u003Cp\u003EIn theory it should be quite easy to get the real thrust, due to the fact that by right clicking the engine you get the exact current thrust.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI\u0027ve been working out the math for how to get the location of the Pe, Ap, and intercept with planet surface, and it is doable right now, but only by being *extremely* roundabout with how you arrive at the calculations.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, I have worked with some of the equations as well (probably not quite as many). For example, it\u0027s very easy (and accurate) to do the maths on prograde and retrograde burns. I use this to calculate my \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V for Hohmann transfers and orbit circularization:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://faculty.wwu.edu/vawter/PhysicsNet/Topics/Gravity/Gifs/Gravity36.gif\u0022 alt=\u0022Gravity36.gif\u0022\u003E\u003C/p\u003E\u003Cp\u003EHopefully Kevin will add post-node readouts soon. It would save so much work.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-10-26T22:40:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aNewHope\u0022 data-cite=\u0022aNewHope\u0022\u003E\u003Cdiv\u003EThe problem with asparagus is, that when one stage is out of fuel, all engines are still active --\u0026gt; maxthrust gives the value of ALL engines combined, not thrust of currently working engines.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPresumably in an asparagus staging that\u0027s exactly the moment when you want to detach the dead weight, so it\u0027s only going to be incorrect for the few brief moments before you activate the next stage.\u003C/p\u003E\u003Cp\u003EWell, in the meantime until such a feature exists, here\u0027s an idea that might help:\u003C/p\u003E\u003Cp\u003EThe real problem that you need a way to detect when an engine has become starved of fuel so you know when to activate the stage. If you knew that then you wouldn\u0027t need to deal with calculating the max thrust with starved engines because you\u0027d be getting rid of the starved engines as soon as they got starved.\u003C/p\u003E\u003Cp\u003EHere\u0027s an idea that might work - detect and record the rate of mass change as you burn. In a loop, keep track of the difference in mass between consecutive iterations, and the delta of missiontime it took to perform the iterations.. As long as the only reason you\u0027re losing mass is that you\u0027re burning fuel (you haven\u0027t activated any stages to drop off parts), and as long as the same number of engines are burning fuel, then the throttle setting divided by the mass loss rate should remain constant or close to constant (i.e. the mass loss at throttle 1.0 will be twice what it was at throttle 0.5, so the expression (throttle/massloss) should remain constant regardless of the throttle setting as long as the throttle is nonzero.)\u003C/p\u003E\u003Cp\u003ESo it might be possible to use that to detect when an engine has stopped burning fuel. The rate of mass loss should be expected to fluctuates a little bit (due to slight variances in how long it takes to execute KOSscript commands. The time between when you measured missiontime and when you measured mass in the next command will never be exactly the same). But even though it\u0027s normal for it to fluctuate a little bit it wouldn\u0027t be normal for it to suddenly drop a LOT in one instant. That\u0027s the trigger you look for. If the rate of mass loss suddenly changes by more than a fuzzy small tolerance, then assume this is because fewer engines are burning than previously were, so it\u0027s time to decouple a stage.\u003C/p\u003E\u003Cp\u003EThat doesn\u0027t help your other issues with jet engines, but it might help make asparagus staging work for vanilla rocket engines.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-26T22:42:28Z\u0022 title=\u002210/26/2013 10:42  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 26, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"aNewHope","CreatedById":76088,"CreatedDateTime":"2013-10-27T11:12:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EWell, in the meantime until such a feature exists, here\u0027s an idea that might help:\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks! I never thought of using the mass-change to detect stage burn out. I\u0027ll try it out.\u003C/p\u003E\u003Cp\u003EPS: kOS .85 is still quite buggy. For example there is no way of getting this piece of code to work (Always gives an error message):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 30) then {set warp to 1.\u003Cbr\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 15) then {set warp to 0.}}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDV is the \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V needed for a burn. Acc the acceleration my craft has under full throttle.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-27T19:00:58Z\u0022 title=\u002210/27/2013 07:00  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 27, 2013\u003C/time\u003E by aNewHope\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sacred Aardvark","CreatedById":85856,"CreatedDateTime":"2013-10-27T19:22:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aNewHope\u0022 data-cite=\u0022aNewHope\u0022\u003E\u003Cdiv\u003EFor example there is no way of getting this piece of code to work (Always gives an error message):\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 30) then {set warp to 1.\u003Cbr\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 15) then {set warp to 0.}}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDV is the \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V needed for a burn. Acc the acceleration my craft has under full throttle.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGive this a go:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 30) then {set warp to 1.  when eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 15) then {set warp to 0.}}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf the code tags bug out again, I simply deleted the line break and that got it working on my comp (after consequently adding set dv and set acc commands prior to it). 0.85 doesn\u0027t seem to like it when you close a parenthesis (or brace, probably not brackets either) on a different line than it\u0027s been opened on.\u003C/p\u003E\n"},{"CreatedByName":"Mzxs","CreatedById":52969,"CreatedDateTime":"2013-10-27T21:10:58Z","Content":"\n\u003Cp\u003Eare you able to add a new volume?\u003C/p\u003E\n"},{"CreatedByName":"Sacred Aardvark","CreatedById":85856,"CreatedDateTime":"2013-10-27T23:49:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mzxs\u0022 data-cite=\u0022Mzxs\u0022\u003E\u003Cdiv\u003Eare you able to add a new volume?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can make a ship with multiple volumes, but AFAIK you can\u0027t add volumes to ships that are on the pad or air-/spaceborne. (well, maybe with KAS, if it plays nice with this)\u003C/p\u003E\u003Cp\u003EFurther details\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://kos.wikia.com/wiki/Archive_and_Volumes#Multiple_Volumes_on_one_Vessel\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kos.wikia.com/wiki/Archive_and_Volumes#Multiple_Volumes_on_one_Vessel\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-28T00:05:26Z\u0022 title=\u002210/28/2013 12:05  AM\u0022 data-short=\u002210 yr\u0022\u003EOctober 28, 2013\u003C/time\u003E by Sacred Aardvark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-10-28T01:04:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aNewHope\u0022 data-cite=\u0022aNewHope\u0022\u003E\u003Cdiv\u003EThanks! I never thought of using the mass-change to detect stage burn out. I\u0027ll try it out.\u003Cp\u003EPS: kOS .85 is still quite buggy. For example there is no way of getting this piece of code to work (Always gives an error message):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 30) then {set warp to 1.\u003Cbr\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 15) then {set warp to 0.}}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDV is the \u00C3\u00A2\u00CB\u2020\u00E2\u20AC\u00A0V needed for a burn. Acc the acceleration my craft has under full throttle.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI assume this was meant to originally be formatted like so, but you had to join the lines to avoid the other bug?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 30) then {\u003Cbr\u003E  set warp to 1.\u003Cbr\u003E  when eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 15) then {set warp to 0.}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIs there a reason it doesn\u0027t work to have those as two separate conditions at the same level without nesting?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 30) then { set warp to 1. }\u003Cbr\u003Ewhen eta:apoapsis \u0026lt; (DV/(2*acc) \u002B 15) then { set warp to 0. }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt should work provided that you know the first condition will always happen prior to the second condition.\u003C/p\u003E\n"}]}