{"TopicId":167450,"ForumId":34,"TopicTitle":"[1.9.x] Textures Unlimited - PBR-Shader, Texture Set, and Model Loading API","CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-11T20:18:14Z","PageNum":38,"Articles":[{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-11T20:08:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223466140\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539287207\u0022 data-ipsquote-userid=\u0022181223\u0022 data-ipsquote-username=\u0022Philaphlous\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 minutes ago, Philaphlous said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo something I\u0027m not always sure of with mods and version compatability is backwards compatability. I\u0027m using \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003Erss\u003C/abbr\u003E/ro 1.3.1 and I\u0027ve got the version of tu for 1.3.1 but I\u0027m wondering if the later versions will still run in 1.3.1 with the additional enhancements???? If it\u0027s screwed up do I just delete the folder and download the supported version with my game?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNewer versions (compiled for KSP 1.4\u002B) will \u003Cstrong\u003Enot\u003C/strong\u003E work with KSP 1.3x due to changes in the KSP-API.\n\u003C/p\u003E\n\u003Cp\u003E\nYou might be able to use configs/textures/shader packs from the newer versions in your legacy install, but the plugin absolutely will not work.\u00A0 The configs/textures/shaders also may or may not work depending on exactly what they do and if they touch any features that were changed between the versions (notably, there was a syntax change in the 1.4\u002B configs that will render them unusable in older versions).\n\u003C/p\u003E\n\u003Cp\u003E\nSo I would say that the short-answer is -- no, newer versions of the mod will not work properly/reliably on KSP 1.3.x.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"BRAAAP_STUTUTU","CreatedById":171551,"CreatedDateTime":"2018-10-12T21:24:08Z","Content":"\n\u003Cp\u003E\ni\u0027m not sure if it\u0027s even TU that\u0027s causing this but I have no knowledge of wheter it already was like this before I installed TU but:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Z9Ler1i.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/Z9Ler1i.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nit seems to only be like this for the stock 2.5m station parts (MPL-G, Hitchhiker and Cuppola)\n\u003C/p\u003E\n"},{"CreatedByName":"alexus","CreatedById":163084,"CreatedDateTime":"2018-10-13T15:01:17Z","Content":"\n\u003Cp\u003E\nwelcome to my topic with TU config\u0060s work\n\u003C/p\u003E\n"},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2018-10-13T17:03:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223467058\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539442877\u0022 data-ipsquote-userid=\u0022163084\u0022 data-ipsquote-username=\u0022alexus\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, alexus said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nwelcome to my topic with TU config\u0060s work\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHow about a link?\n\u003C/p\u003E\n\u003Cp\u003E\n-\u0026gt;\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed8542974740\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/178932-textures-unlimited-configs-and-retexturing-of-some-models\u0026amp;do=embed\u0022 style=\u0022height:226px;max-width:500px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2018-10-13T20:05:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223466709\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539379448\u0022 data-ipsquote-userid=\u0022171551\u0022 data-ipsquote-username=\u0022BRAAAP_STUTUTU\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 hours ago, BRAAAP_STUTUTU said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ni\u0027m not sure if it\u0027s even TU that\u0027s causing this but I have no knowledge of wheter it already was like this before I installed TU but:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAre you using the recolour pack? If so, I have half addressed this with a patch to remove the texture switch from stockalike station parts that are affected...\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022lit\u0022\u003E@PART\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E[\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EcrewCabin\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ecupola\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan\u003ELarge_Crewed_Lab\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EdockingPort2\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E]:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EFOR\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E[\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EZZZZZZ_NEEDSMOARZEDS_ZZZZZZ\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E]:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003ENEEDS\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E[\u003C/span\u003E\u003Cspan\u003EStationPartsExpansionRedux\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E]\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E!\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EMODULE\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E[\u003C/span\u003E\u003Cspan\u003EKSPTextureSwitch\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E],*\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\t\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E!\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EMODULE\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E[\u003C/span\u003E\u003Cspan\u003ESSTURecolorGUI\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E]\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nAt least, that\u0027s the parts I am aware of anyway.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you are not using the recolour pack, the patch may still work.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: If you don\u0027t know what to do with that....\n\u003C/p\u003E\n\u003Cp\u003E\n1) Make a blank text file somewhere in your GameData folder.\n\u003C/p\u003E\n\u003Cp\u003E\n2) Paste the stuff in the code box above into that text file and save it.\n\u003C/p\u003E\n\u003Cp\u003E\n3) Rename the text file to \u0022anythingyoulike.cfg\u0022. Without the quotes. You\u0027ll get a warning about changing the file format but it\u0027s fine.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-13T20:09:06Z\u0022 title=\u002210/13/2018 08:09  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 13, 2018\u003C/time\u003E by Manwith Noname\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"alexus","CreatedById":163084,"CreatedDateTime":"2018-10-15T04:31:44Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223467109\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539450234\u0022 data-ipsquote-userid=\u0022163177\u0022 data-ipsquote-username=\u0022Gordon Dry\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 10/14/2018 at 3:03 AM, Gordon Dry said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow about a link?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/178932-textures-unlimited-configs-and-retexturing-of-some-models/\u0022 rel=\u0022\u0022\u003Ehttps://forum.kerbalspaceprogram.com/index.php?/topic/178932-textures-unlimited-configs-and-retexturing-of-some-models/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI am sorry\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-15T04:35:05Z\u0022 title=\u002210/15/2018 04:35  AM\u0022 data-short=\u00225 yr\u0022\u003EOctober 15, 2018\u003C/time\u003E by alexus\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-15T18:23:08Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EHeads up -- there will be a TexturesUnlimited update for KSP 1.5 as soon as I get an updated PartTools and can look at the new stock shaders to ensure compatibility.\u00A0 If this does not seem forthcoming, I will put out a quick \u0027recompile\u0027 update while I await the updated part-tools.\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EThere are no \u0027breaking\u0027 changes planned for this update, but there are new features I would like to get developed before any official releases.\u00A0 So you may continue to work on/use the existing features and patches without fear of them breaking.\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-15T18:34:33Z","Content":"\n\u003Cp\u003E\nHmmm... so I\u0027m stuck at work for a few hours yet, so can only do abstract research on the subject.\u00A0 Anyone have any insight on the new stock shader variant, and how precisely it functions?\n\u003C/p\u003E\n\u003Cp\u003E\nThis blurb from the release notes has me intrigued --\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ESome parts now take advantage of the new \u0022Bumped Specular (Mapped)\u0022\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nWhich leads me to believe that it is using an environment map of some sort (meaning a cube-map).\u00A0 Beyond that, I can only speculate -- but I\u0027m hoping that I can leverage some of the assets and functions they are using to try and get a more unified look between TU and stock parts.\u00A0 Really won\u0027t know until I can look at the shader source-code... which will need a PartTools update...\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-15T19:23:23Z","Content":"\n\u003Cp\u003E\nFrom the stay-put-nik, it appears there is a real reflection being used (at least visible in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E). It\u0027s tough to tell what all it renders though as it\u0027s not shiny enough to be a mirror. I\u0027m a little surprised that they didn\u0027t use this new shader on the windows. If it is a true reflection, then you could just tap into that cubemap instead of rendering your own.\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-15T21:03:01Z","Content":"\n\u003Cp\u003E\nIt would appear that \u0027Bumped Specular (Mapped)\u0027 is a PBR shader.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022WKhp9Iv.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022662\u0022 src=\u0022https://i.imgur.com/WKhp9Iv.jpg\u0022 width=\u0022787\u0022\u003E\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[landerCabinSmall] {\n\tMODULE\n\t{\n\t\tname = ModulePartVariants\n\t\tbaseVariant = White\n\t\tVARIANT\n\t\t{\n\t\t\tname = White\n\t\t\tdisplayName = #autoLOC_8007116\n\t\t\tthemeName = White\n\t\t\tprimaryColor = #ffffff\n\t\t\tTEXTURE\n\t\t\t{\n\t\t\t\tshader=KSP/Bumped Specular (Mapped)\n\t\t\t\t_SpecMap= Squad/Parts/Command/mk1LanderCan/ksp_s_landerCan_psd_illum\n\t\t\t\t_Shininess= 0.95\n\t\t\t}\n\t\t}\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe metallicy seems to be set via the _SpecMap, and the smoothness is fixed per material using _Shininess. I\u0027ve not figured out the exacts yet though.\n\u003C/p\u003E\n\u003Cp\u003E\nThis shader seems to not support lights.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt defaults to 100% metal if you do not specify a _SpecMap.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022nJHyXFo.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022755\u0022 src=\u0022https://i.imgur.com/nJHyXFo.jpg\u0022 width=\u0022280\u0022\u003E\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[mk2Cockpit_Standard] {\n\tMODULE\n\t{\n\t\tname = ModulePartVariants\n\t\tbaseVariant = White\n\t\tVARIANT\n\t\t{\n\t\t\tname = White\n\t\t\tdisplayName = #autoLOC_8007116\n\t\t\tthemeName = White\n\t\t\tprimaryColor = #ffffff\n\t\t\tTEXTURE\n\t\t\t{\n\t\t\t\tshader=KSP/Bumped Specular (Mapped)\n\t\t\t\t_Shininess= 0.95\n\t\t\t}\n\t\t}\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-15T21:15:14Z\u0022 title=\u002210/15/2018 09:15  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 15, 2018\u003C/time\u003E by Electrocutor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-15T21:19:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468444\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539637381\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt would appear that \u0027Bumped Specular (Mapped)\u0027 is a PBR shader.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n(you probably already know this)\u00A0 There is a lot more to \u0027PBR\u0027 shaders than supporting environment maps/reflections -- it is the actual lighting calculations and math that make it PBR.\u00A0 What they have would more properly be termed \u0027legacy with environment-mapped reflection\u0027 shader (i.e. it still uses Blinn-Phong algorithm for lighting -- \u003Ca href=\u0022https://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_shading_model\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Blinn\u2013Phong_shading_model\u003C/a\u003E)\u00A0 (all just guesses at this point, but I doubt they implemented the full BDRF required for \u0027PBR\u0027 shaders --\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Bidirectional_reflectance_distribution_function\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Bidirectional_reflectance_distribution_function\u003C/a\u003E ).\n\u003C/p\u003E\n\u003Cp\u003E\nStill really interested in seeing how they\u0027ve accomplished this.\u00A0 It \u003Cem\u003Elooks\u003C/em\u003E like the reflection on the window in your screenshot includes some sort of convolution (blurring), which is the missing technical bit that has prevented me from further optimizing TU\u0027s rendering setup.\u00A0 Although from the images posted by forum users, it looks like they have simply done a baked and pre-convolved cubemap for each of the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E/\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E editors, and then are using a flat color or gradient based reflection-skybox in the flight scene.\u00A0 I\u0027m hoping that this is \u003Cem\u003Enot\u003C/em\u003E the case, and that they have done proper run-time rendered cubemap reflections, but I\u0027m not seeing any proof of it so far.\n\u003C/p\u003E\n\u003Cp\u003E\nI suppose I\u0027ll have to d/l and boot up 1.5 this evening and check it out for myself....\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468444\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539637381\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis shader seems to not support lights.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAre you referring to emissives, or that the reflections do not pick up light sources?\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-15T21:22:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468462\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539638378\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n40 minutes ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n(you probably already know this)\u00A0 There is a lot more to \u0027PBR\u0027 shaders than supporting environment maps/reflections -- it is the actual lighting calculations and math that make it PBR.\u00A0 What they have would more properly be termed \u0027legacy with environment-mapped reflection\u0027 shader (i.e. it still uses Blinn-Phong algorithm for lighting -- \u003Ca href=\u0022https://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_shading_model\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Blinn\u2013Phong_shading_model\u003C/a\u003E)\u00A0 (all just guesses at this point, but I doubt they implemented the full BDRF required for \u0027PBR\u0027 shaders --\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Bidirectional_reflectance_distribution_function\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Bidirectional_reflectance_distribution_function\u003C/a\u003E ).\n\u003C/p\u003E\n\u003Cp\u003E\nStill really interested in seeing how they\u0027ve accomplished this.\u00A0 It \u003Cem\u003Elooks\u003C/em\u003E like the reflection on the window in your screenshot includes some sort of convolution (blurring), which is the missing technical bit that has prevented me from further optimizing TU\u0027s rendering setup.\u00A0 Although from the images posted by forum users, it looks like they have simply done a baked and pre-convolved cubemap for each of the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E/\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E editors, and then are using a flat color or gradient based reflection-skybox in the flight scene.\u00A0 I\u0027m hoping that this is \u003Cem\u003Enot\u003C/em\u003E the case, and that they have done proper run-time rendered cubemap reflections, but I\u0027m not seeing any proof of it so far.\n\u003C/p\u003E\n\u003Cp\u003E\nI suppose I\u0027ll have to d/l and boot up 1.5 this evening and check it out for myself....\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere is a bug: the editor/\u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E has a reflection probe or cubemap, but during runtime, anything that is 100% metal is solid black, anything that uses the new shader is darker (the % that is supposed to be reflection is black blended).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-15T22:00:05Z\u0022 title=\u002210/15/2018 10:00  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 15, 2018\u003C/time\u003E by Electrocutor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2018-10-15T22:38:59Z","Content":"\n\u003Cp\u003E\nWelp, when the 1.5 PartTools come out we\u0027ll be able to figure out exactly what that shader is doing...\u00A0\u003Cimg alt=\u0022:huh:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 title=\u0022:huh:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2018-10-15T23:02:21Z","Content":"\n\u003Cp\u003E\nI\u0027m inclined to say there\u0027s \u0022real time reflection\u0022 going on. I stuck a sputnik and a QBE in orbit and you can see the faces updating and the \u0022reflection\u0022 matches the colour of the planet below.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-15T23:02:33Z","Content":"\n\u003Cp\u003E\nWell, whatever they are doing for the cube-maps, they haven\u0027t solved the DX9 cubemap convolution issues -- check out the seams in this reflection:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022zcw05cR.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/zcw05cR.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nEdit:\u00A0 Added better img showing the seams...\n\u003C/p\u003E\n\u003Cp\u003E\nStill doesn\u0027t tell me if they are pre-baked environment maps, or dynamically rendered and updated with reflection probes.\n\u003C/p\u003E\n\u003Cp\u003E\nDebating a bit about how much digging into the new shader I want to do prior to PartTools being released.\u00A0 Certainly I could poke around a bit and find out more than I know now, but if/when I can see the .shader file, that will tell me \u003Cem\u003Eeverything\u003C/em\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOhh, and can confirm the lack of reflections in flight scene -- not sure how they could have missed something as large as that...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468553\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539644541\u0022 data-ipsquote-userid=\u0022117203\u0022 data-ipsquote-username=\u0022Manwith Noname\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, Manwith Noname said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m inclined to say there\u0027s \u0022real time reflection\u0022 going on. I stuck a sputnik and a QBE in orbit and you can see the faces updating and the \u0022reflection\u0022 matches the colour of the planet below.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWould love to see some screenshots of this, as I\u0027m unable to see any reflections in the flight scene at all on any of the updated parts.\n\u003C/p\u003E\n\u003Cp\u003E\nWonder if they have some bugs in their cubemap generation setup, or how they are \u0027handling\u0027 the creation of the reflections.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-15T23:07:43Z\u0022 title=\u002210/15/2018 11:07  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 15, 2018\u003C/time\u003E by Shadowmage\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2018-10-15T23:24:52Z","Content":"\n\u003Cp\u003E\n\u003Cimg alt=\u0022F9885DEFD09D653E541C76960EB0321A36E01E86\u0022 class=\u0022ipsImage\u0022 height=\u0022563\u0022 src=\u0022https://steamuserimages-a.akamaihd.net/ugc/951841632595070483/F9885DEFD09D653E541C76960EB0321A36E01E86/\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-15T23:48:23Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/117203-manwith-noname/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022117203\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/117203-manwith-noname/\u0022 rel=\u0022\u0022\u003E@Manwith Noname\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nInteresting, must just be broken in my game then \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u00A0 (un-modded steam installation that I use for grabbing game updates).\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EHmm... I bet there is a setting somewhere that controls it \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/109593-electrocutor/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022109593\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/109593-electrocutor/\u0022 rel=\u0022\u0022\u003E@Electrocutor\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EYou were correct in that they are using a standard shader variant.\u00A0 Customized StandardSpecular to be precise.\u00A0 Investigating the source of the reflection maps ATM.\u00A0 Almost certain there will be conflicts if we are both using reflection probes...\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-15T23:56:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468590\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539647303\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/109593-electrocutor/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022109593\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/109593-electrocutor/\u0022 rel=\u0022\u0022\u003E@Electrocutor\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EYou were correct in that they are using a standard shader variant.\u00A0 Customized StandardSpecular to be precise.\u00A0 Investigating the source of the reflection maps ATM.\u00A0 Almost certain there will be conflicts if we are both using reflection probes...\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAre they actually including the Standard shader includes and stuff? If so, and also selected the checkbox to include all variants, it should support other unused Unity features, like light sources from emission maps and what not.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-16T00:24:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468597\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539647778\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre they actually including the Standard shader includes and stuff?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, not really.\u00A0 Just using the Standard shader BRDF to enable the reflections\u00A0 (\u00A0#pragma surface surf StandardSpecular ).\u00A0 The .shader file is available in the updated Part-Tools if you wanted to peruse it.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTU loads just fine in KSP 1.5.\u00A0 There is definitely some conflict/overlap in functionality though, as the TU cubemaps (from the reflection probes) override whatever stock is using, and give some ugly mess (far worse than the stock setup), at least under DX9.\n\u003C/p\u003E\n\u003Cp\u003E\nMy first course of investigation will be to compile a version of TU that simply loads textures/materials, but doesn\u0027t touch the reflection system, and see if I can get TU materials to pick up the stock reflection stuff.\u00A0 Then... I\u0027m going to investigate the source of these reflections (Reflection Probes, pre-rendered skybox textures, ??).\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m in no huge rush on this.\u00A0 Obviously have a bit of stuff to sort out beyond the basic updating that I had imagined...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-16T01:16:02Z","Content":"\n\u003Cp\u003E\nWhatever the reflection source is, it works fine with the TU shaders, at a technical level.\u00A0 If I disable all of TU\u0027s reflection-probe functionality, the shaders/materials seem to pick up the stock environment map.\u00A0 I can also confirm that the seams in the cubemap are only present on DX9 -- so they are either doing dynamic run-time map generation, or the problem with seams is inherent in the dx9 texture sampling and not baked into the prebuilt maps.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, the stock system is not capturing the environment as it should for use as a proper environment map -- notably it lacks lighting effects, so the reflection source seems extremely dark compared to what it should be (see the TU shot below for comparison).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022tJQESmE.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/tJQESmE.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nStill can\u0027t get it working in the flight scene though...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00220tlM0fE.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/0tlM0fE.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m hoping someone is filing bugs about the above, because it doesn\u0027t seem to work regardless of what graphics API I use or what settings I try.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTU reflection setup still works in editor:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022hSXKzEe.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/hSXKzEe.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nand flight scene\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Xu7JK85.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/Xu7JK85.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHowever -- when the stock parts with the new stock shader use TU\u0027s reflection probes, they are not nearly as reflective (note it is still showing blue from the sky outside, but it is very dull)--\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022bngxWW3.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/bngxWW3.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThere are major differences between how Unity\u0027s reflection probe is doing the convolution/blurring, and whatever stock is using.\u00A0 I\u0027m still trying to figure out exactly where the stock reflections are coming from and how they are generated, but I have a feeling that there are some \u0027quick hacks\u0027 at play somewhere to get the stock stuff working for DX9.\n\u003C/p\u003E\n\u003Cp\u003E\nDoesn\u0027t look too bad though, even if it is not as shiny as it should be.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022hBWI1Y3.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/hBWI1Y3.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMight be something that I could patch to fix, even if it is just converting the stock parts to use a TU shader \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nStill investigating.\u00A0 At this point it appears that there will be some \u0027incompatibilities\u0027 between TU and the new stock shader, but there might be some parts of the system that I can use to clean up some of the DX9 nastiness... if I can figure out where they are and how to make use of them.\u00A0 I likely won\u0027t be using the stock environment mapping as-is though, as it is not suitable for standard PBR texturing due to the difference in blurring/convolution\u00A0 (likely they are doing simple blurring/mip-map tricks rather than convolution).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-16T03:06:39Z","Content":"\n\u003Cp\u003E\nMore investigations, more questions..... and a few answers.\n\u003C/p\u003E\n\u003Cp\u003E\nStock is not using reflection probes, but rather they are using the ability to specify a \u0027default reflection\u0027 environment map in the Unity render settings, and it is this environment map that the stock shader is picking up (and is what TU will pick up if reflection probes are not enabled).\n\u003C/p\u003E\n\u003Cp\u003E\nAs near as I can tell this is only used in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E and \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E, and there are no reflections in the flight-scene (no cubemap is assigned to RenderSettings.customReflection, no reflection probes, and no skybox).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/117203-manwith-noname/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022117203\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/117203-manwith-noname/\u0022 rel=\u0022\u0022\u003E@Manwith Noname\u003C/a\u003E Are you sure you didn\u0027t have TU installed in your screenshot above?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAs soon as I can get at these cubemaps and dump them to disk, I\u0027ll take a look at the MIP levels and see how the blurring/convolution is done.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOn an interesting note, I was able to find out where the clouds in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E/\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E are rendered at/from....\u00A0 (just a cube-map used as a background...)\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-16T05:09:56Z","Content":"\n\u003Cp\u003E\nPretty sure the \u0027fix\u0027 for the stock-shader compatibility will be to patch the _Smoothness values to something more reasonable given the improved env. maps used by TU.\u00A0 This is with a value of 0.75\u00A0 (default appears to be ~0.5 on this part) --\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022xtATBuO.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/xtATBuO.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022PKMH2kY.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/PKMH2kY.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nStock shader, just using TU to patch the material properly (and handle reflection probes...).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnother option might be to create a TU/Specular shader that uses the specular workflow.\u00A0 The stock textures \u003Cem\u003Eappear\u003C/em\u003E to be authored with smoothness data in the specular-map alpha channel, so could leverage the existing information there to set the smoothness appropriately.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nNever did manage to get a dump of the environment map data used in the stock reflections.\u00A0 I\u0027m convinced at this point though that they are only active in the editors, and not using any sort of convolution (just the \u0027blurring\u0027 caused by mip-map sampling).\u00A0 Will need to await confirmation from the devs that the lack of flight scene reflections are either a bug, or intentional.\n\u003C/p\u003E\n"},{"CreatedByName":"Manwith Noname","CreatedById":117203,"CreatedDateTime":"2018-10-16T09:33:56Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468718\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539659199\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/117203-manwith-noname/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022117203\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/117203-manwith-noname/\u0022 rel=\u0022\u0022\u003E@Manwith Noname\u003C/a\u003E Are you sure you didn\u0027t have TU installed in your screenshot above?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, I sort of figured this out after posting as I went to bed. \u0022Why am I getting reflections when noone else is?\u0022 kind of thought, then guessed that even though it\u0027s not using TU shaders, it\u0027s picking up the reflection mapping somehow.\u00A0I haven\u0027t put the whole project in to 1.5 yet but I had started planning for new parts...well...one part...\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022C58F48DF3E6A000BD1251C556EDB59824EF08316\u0022 class=\u0022ipsImage\u0022 height=\u0022685\u0022 src=\u0022https://steamuserimages-a.akamaihd.net/ugc/951841632596777992/C58F48DF3E6A000BD1251C556EDB59824EF08316/\u0022 width=\u0022936\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: Oh, be wary of this...\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468769\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539666596\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe stock textures \u003Cem\u003Eappear\u003C/em\u003E to be authored with smoothness data in the specular-map alpha channel, so could leverage the existing information there to set the smoothness appropriately.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n...go look at the \u003Cs\u003EHECS\u003C/s\u003E textures I think it was. They don\u0027t have information in the alpha...well they do but it\u0027s \u00221\u0022 everywhere.\n\u003C/p\u003E\n\u003Cp\u003E\nAnother edit: It\u0027s the rovemate textures I was thinking of. HECS doesn\u0027t currently have separate textures.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-16T13:06:26Z\u0022 title=\u002210/16/2018 01:06  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 16, 2018\u003C/time\u003E by Manwith Noname\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Electrocutor","CreatedById":109593,"CreatedDateTime":"2018-10-16T11:04:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468769\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539666596\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe stock textures \u003Cem\u003Eappear\u003C/em\u003E to be authored with smoothness data in the specular-map alpha channel, so could leverage the existing information there to set the smoothness appropriately.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t want to reinstall unity right now to look at the shader code. What is the math for smoothness? _SpecMap.A * _Glossiness or something?\n\u003C/p\u003E\n\u003Cp\u003E\nSummary so Far:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nStock reflection cubemap missing in Flight mode\n\u003C/li\u003E\n\u003Cli\u003E\nStock PBR shader does not support emission (no pod/cabin lights unless on separate mesh)\n\u003C/li\u003E\n\u003Cli\u003E\nReflection cubemap still renders top surface inverted in dx9\n\u003C/li\u003E\n\u003Cli\u003E\nReflection cubemap seems to use a quick-draw method that is less accurate than TU\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nDid I miss anything?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOne side effect here is that people can now make models using this shader, then TU could just automatically replace that shader and pull from the same channels to add more functionality.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-16T11:42:30Z\u0022 title=\u002210/16/2018 11:42  AM\u0022 data-short=\u00225 yr\u0022\u003EOctober 16, 2018\u003C/time\u003E by Electrocutor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-10-16T13:59:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468864\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539687886\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOne side effect here is that people can now make models using this shader,\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nKind of...\n\u003C/p\u003E\n\u003Cp\u003E\nDue to the terrible stock reflection setup, if they author textures to look good with the stock shader/reflections... they\u0027ll end up with results like the stayputnik -- far less reflection when using proper reflection probes and convolved reflection maps.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468864\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539687886\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat is the math for smoothness? _SpecMap.A * _Glossiness or something?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nJust using the _Shininess property directly for smoothness -- no texture sampling or any other inputs.\u00A0 One of the most powerful features of PBR... and they leave it to a material-wide property....\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468864\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539687886\u0022 data-ipsquote-userid=\u0022109593\u0022 data-ipsquote-username=\u0022Electrocutor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Electrocutor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDid I miss anything?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat about sums it up...\n\u003C/p\u003E\n\u003Cp\u003E\nIts like whoever was writing these shaders didn\u0027t know what he was doing.\u00A0 Or was given an absurd set of \u0027requirements\u0027 from external sources.\u00A0 Either way, someone was out of touch with the functions/features of these shaders...\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223468844\u0022 data-ipsquote-contentid=\u0022167450\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221539682436\u0022 data-ipsquote-userid=\u0022117203\u0022 data-ipsquote-username=\u0022Manwith Noname\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Manwith Noname said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nEdit: Oh, be wary of this...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGood point.. I really only looked at the StayPutnik.\u00A0 In that case there was an alpha channel in the specular texture, with different values than were in the RGB channels.\u00A0 Ohh... and the new shader did not use the value for whatever reason -- they sample the specular.rgb and use that for specular color, but they ignore the specular map alpha channel entirely.\n\u003C/p\u003E\n"}]}