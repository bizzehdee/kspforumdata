{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":22,"Articles":[{"CreatedByName":"Darkway","CreatedById":142879,"CreatedDateTime":"2015-05-06T12:56:36Z","Content":"\u003E \n\u003E I\u0027m glad you guys are enjoying this. Unfortunately, I have to say that development is going to slow down a LOT, mainly because I\u0027m going to be working a job from 9am to 5pm starting next monday, so I won\u0027t have half as much free time as I used to. That kind of sucks.\n\nBe patient guys, be patient. Even if this is one of the most awesome looking graphic mods in KSP history."},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2015-05-06T13:34:55Z","Content":"\u003E \n\u003E Be patient guys, be patient. Even if this is one of the most awesome looking graphic mods in KSP history.\n\nIt\u0027s already pretty awesome. I\u0027d have a (can\u0027t think if anything not too rude for the forum so I\u0027ll say giggle) if we could have this and EVE clouds..."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-06T17:20:27Z","Content":"I know I haven\u0027t updated in a while but I\u0027ve been really busy with a new job and most days I don\u0027t have any time to work on the mod or I\u0027m just too tired.\n\nI will continue to work on the mod whenever I can. Right now I\u0027ll try to make EVE clouds visible in the sky (this is requested a lot and should be pretty easy), compatibility with postprocessing will come later. I\u0027ll also try to put in persistent settings and fix the reported memory leak. After this is done I\u0027ll do multiple planets.\n\n\u003E \n\u003E First, let met say that this mod is fantastic. It have the same impact on KSP than the EVE mod, giving KSP as small change that change it all. In a very great way.\n\u003E [http://images.akamai.steamusercontent.com/ugc/536269871030807996/9EFCBF9BB7441DE55AB43BA8539C9B60B684E3BE/](http://images.akamai.steamusercontent.com/ugc/536269871030807996/9EFCBF9BB7441DE55AB43BA8539C9B60B684E3BE/) \n\u003E \n\u003E Please ignore the ugly message caused by steam versus KSP key mapping conflict\n\u003E \n\u003E As you can see, there is a beautiful fog effect with the default install of this mod.\n\u003E \n\u003E Seeing this raises some questions :\n\u003E \n\u003E - Is it possible to have more than one scatterer on a planet ? One on top or inside the other ?\n\u003E \n\u003E - And if yes, can we : - use it to create a \u0022less brutal\u0022 frontier between atmosphere and space ? (I\u0027m referring to the \u0022blue celling\u0022 effect)\n\u003E \n\u003E  - use it to create some zones with heavier density based on random distribution map (as I don\u0027t know the correct technical words, please forgive me to be unclear). The goal being simulating foggier zones and create clouds like object. Or moving fog. Or both.\n\u003E \n\u003E And, even if it\u0027s still \u0022strangely behaving\u0022, we (daughters and me) beg you to gives us your sea update ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif) It\u0027s to spectacular to be kept away from the (demanding) masses.\n\nThis post made me feel really good about dedicating time to the mod for some reason. If you really want to see the water ingame, I already posted a link in page 40 to a build that has it([http://wikisend.com/download/915958/scatterer.zip](http://wikisend.com/download/915958/scatterer.zip)) just remember it\u0027s a really bad idea.\n\nAs for using multiple scatterers, yes it works but it\u0027s probably a really bad idea performance-wise, also, keep in my mind if you\u0027re going to use in only some areas to create clouds it won\u0027t be visible unless seen from above or when it\u0027s between you and terrain. Altyhough that could be workedaround, it\u0027d be too much work for really bad results.\n\n\u003E \n\u003E I was wondering if anyone experiences memory leak problems. I zeroed it in to scatterer 0.14. With it the RAM footprint just grows, without it stays stable around 2.614 MB. \n\u003E The only other visual mods that I have installed s Distant object enhancement and planetshine. When i remove them the leak is still there so i must be this mod. Anyone got an idea how to plug the leak?\n\nI\u0027m investigating this now, can you confirm you only have the leak in 0.014? Previous versions work fine?\n\n\u003E \n\u003E I got scatterer and eve working together and in OpenGL without the bloody lines. I had to force anisotropic off in the Nvidia panel and set the texture filtering to performance. \n\u003E Here is a screen shot.\n\u003E \n\u003E [http://i.imgur.com/H10SxRf.png](http://i.imgur.com/H10SxRf.png)\n\nHow did you manage to get these working?"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-05-06T18:32:39Z","Content":"\u003E \n\u003E I got scatterer and eve working together and in OpenGL without the bloody lines. I had to force anisotropic off in the Nvidia panel and set the texture filtering to performance. \n\u003E Here is a screen shot.\n\u003E \n\u003E [http://i.imgur.com/H10SxRf.png](http://i.imgur.com/H10SxRf.png)\n\nHoly epic wide screen..."},{"CreatedByName":"TMS","CreatedById":57134,"CreatedDateTime":"2015-05-06T18:48:20Z","Content":"Does everybody else get this hexagonal effect above 200km over Kerbin?\n\n![L2uOX4Z.png](http://i.imgur.com/L2uOX4Z.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-06T19:23:30Z","Content":"So the clouds are now visible in the sky (low-res pics because I\u0027m on a laptop):\n\n![h6AGRR1.jpg](http://i.imgur.com/h6AGRR1.jpg)\n\nA few issues:\n\n![KSOAFGG.jpg](http://i.imgur.com/KSOAFGG.jpg)\n\nWhen the clouds pass in front of the sun, the ugly stock sunglare and sky shines through them. Since I disabled the stock sky, this is either a really weird bug or rbray implemented clouds this way to give the illusion of light shining through them.\n\n![IziZgeT.jpg](http://i.imgur.com/IziZgeT.jpg)\n\nThey also generally look out of place I think because they don\u0027t receive light and generally look off.\n\n![lz0nyN6.jpg](http://i.imgur.com/lz0nyN6.jpg)\n\nKeep in mind that postprocessing still draws over them, this will take more work and I will do it another day.\n\n**Edited \u003Ctime datetime=\u00222015-05-06T19:35:19Z\u0022 title=\u002205/06/2015 07:35  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 6, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Proot","CreatedById":98932,"CreatedDateTime":"2015-05-06T19:34:00Z","Content":"\u003E \n\u003E So the clouds are now visible in the sky (low-res pics because I\u0027m on a laptop):\n\u003E [http://i.imgur.com/h6AGRR1.jpg](http://i.imgur.com/h6AGRR1.jpg)\n\u003E \n\u003E A few issues:\n\u003E \n\u003E [http://i.imgur.com/KSOAFGG.jpg](http://i.imgur.com/KSOAFGG.jpg)\n\u003E \n\u003E When the clouds pass in front of the sun, the ugly stock sunglare and sky shines through them. Since I disabled the stock sky, this is either a really weird bug or rbray implemented clouds this way to make the sun shine through them.\n\u003E \n\u003E [http://i.imgur.com/IziZgeT.jpg](http://i.imgur.com/IziZgeT.jpg)\n\u003E \n\u003E They also generally look out of place I think because they don\u0027t receive light and generally look off.\n\u003E \n\u003E [http://i.imgur.com/lz0nyN6.jpg](http://i.imgur.com/lz0nyN6.jpg)\n\u003E \n\u003E Keep in mind that postprocessing still draws over them, this will take more work and I will do it another day.\n\n\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/Q-GLuydiMe4?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\n\n**EDIT:** I\u0027m absolutely in love with the shining effect through clouds. That is *a feature*, not a bug! ![:sticktongue:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif)\n\n**Edited \u003Ctime datetime=\u00222015-05-06T20:47:33Z\u0022 title=\u002205/06/2015 08:47  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 6, 2015\u003C/time\u003E by Proot**"},{"CreatedByName":"HafCoJoe","CreatedById":80363,"CreatedDateTime":"2015-05-06T19:49:01Z","Content":"\u003E \n\u003E So the clouds are now visible in the sky (low-res pics because I\u0027m on a laptop):\n\u003E [http://i.imgur.com/h6AGRR1.jpg](http://i.imgur.com/h6AGRR1.jpg)\n\u003E \n\u003E A few issues:\n\u003E \n\u003E [http://i.imgur.com/KSOAFGG.jpg](http://i.imgur.com/KSOAFGG.jpg)\n\u003E \n\u003E When the clouds pass in front of the sun, the ugly stock sunglare and sky shines through them. Since I disabled the stock sky, this is either a really weird bug or rbray implemented clouds this way to give the illusion of light shining through them.\n\u003E \n\u003E [http://i.imgur.com/IziZgeT.jpg](http://i.imgur.com/IziZgeT.jpg)\n\u003E \n\u003E They also generally look out of place I think because they don\u0027t receive light and generally look off.\n\u003E \n\u003E [http://i.imgur.com/lz0nyN6.jpg](http://i.imgur.com/lz0nyN6.jpg)\n\u003E \n\u003E Keep in mind that postprocessing still draws over them, this will take more work and I will do it another day.\n\nIt\u0027s beautiful..."},{"CreatedByName":"Thomas988","CreatedById":92699,"CreatedDateTime":"2015-05-06T20:01:01Z","Content":"HALLELUIAH\n\nuncaps"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-06T20:11:08Z","Content":"Does anybody have a good config file parser for KSP/unity? The stock xml reader appears to be limited to one file per mod and it\u0027d save me time to not have to implement my own.\n\n**Edited \u003Ctime datetime=\u00222015-05-06T20:13:32Z\u0022 title=\u002205/06/2015 08:13  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 6, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-05-06T20:13:59Z","Content":"This is really shaping up to be epic!"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-05-06T20:18:46Z","Content":"The KSP implementation is great. You use attribute tags ( [persistent] ) for flagging members in a class. Then you can use the KSP config load to instantiate the class from the config file. Works really well."},{"CreatedByName":"sysgen","CreatedById":138002,"CreatedDateTime":"2015-05-06T21:03:21Z","Content":"May I ask, how do you get the KSP to load the shaders? How do you add parameters?"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2015-05-06T23:46:08Z","Content":"\u003E \n\u003E So the clouds are now visible in the sky (low-res pics because I\u0027m on a laptop):\n\nThat\u0027s glorious\n\nDid you have any luck with fixing the camera in regards to replacing the stock water, or has that remained stubbornly jump up and flood the worldish?\n\nBest of luck with settling into your new job in any case, do you have a paypal or patreon etc for donations and such?"},{"CreatedByName":"Wyseman76","CreatedById":67018,"CreatedDateTime":"2015-05-06T23:54:58Z","Content":"\u003E \n\u003E Does everybody else get this hexagonal effect above 200km over Kerbin?\n\u003E [http://i.imgur.com/L2uOX4Z.png](http://i.imgur.com/L2uOX4Z.png)\n\nYes I get the same effect, I also notice at about 90k \u002B/- there is a layering effect that begins to appear in the atmosphere. once I\u0027m a few 100K out there is a circular moire pattern that emerges ever so slightly. \n\nThis is the layering I was talking about.\n\n![5QVgaZX.png](http://i.imgur.com/5QVgaZX.png)\n\nThis is the moire pattern at a distance.\n\n![EtfZBW8.png](http://i.imgur.com/EtfZBW8.png)\n\nThe way I was getting this to show the clouds was just lowering the global alpha of the post process effect of scatterer in the settings. It isn\u0027t perfect and appears Blackrack is on track to solving it internally.\n\nHere is a shot or two I liked from the moon trip I did while testing.\n\n![QnuqsB9.png](http://i.imgur.com/QnuqsB9.png)\n\n![QexZdKk.png](http://i.imgur.com/QexZdKk.png)"},{"CreatedByName":"Errol","CreatedById":118622,"CreatedDateTime":"2015-05-07T02:41:40Z","Content":"Which version of EVE should we be trying with this in 1.0.2, or is there not a dev version available yet? \n\nNo stress if it isn\u0027t possible, I\u0027m not playing very seriously yet anyway, still waiting for a bunch of things to settle down."},{"CreatedByName":"RyanRising","CreatedById":79932,"CreatedDateTime":"2015-05-07T03:31:06Z","Content":"\u003E \n\u003E So the clouds are now visible in the sky (low-res pics because I\u0027m on a laptop):\n\u003E [http://i.imgur.com/h6AGRR1.jpg](http://i.imgur.com/h6AGRR1.jpg)\n\u003E \n\u003E A few issues:\n\u003E \n\u003E [http://i.imgur.com/KSOAFGG.jpg](http://i.imgur.com/KSOAFGG.jpg)\n\u003E \n\u003E When the clouds pass in front of the sun, the ugly stock sunglare and sky shines through them. Since I disabled the stock sky, this is either a really weird bug or rbray implemented clouds this way to give the illusion of light shining through them.\n\u003E \n\u003E [http://i.imgur.com/IziZgeT.jpg](http://i.imgur.com/IziZgeT.jpg)\n\u003E \n\u003E They also generally look out of place I think because they don\u0027t receive light and generally look off.\n\u003E \n\u003E [http://i.imgur.com/lz0nyN6.jpg](http://i.imgur.com/lz0nyN6.jpg)\n\u003E \n\u003E Keep in mind that postprocessing still draws over them, this will take more work and I will do it another day.\n\nWoohoo! I guess the sunflare is ugly when you keep the default one, but luckily I don\u0027t. I hope to see this Soon.\n\nAlso, have you noticed that the ground seems to be lower resolution? Is that intended, or does it just break easily?"},{"CreatedByName":"LaydeeDem","CreatedById":5984,"CreatedDateTime":"2015-05-07T03:34:16Z","Content":"I wasn\u0027t aware this mod added black holes to the game.\n\n![AL3510v.png](http://i.imgur.com/AL3510v.png)\n\nEDIT:\n\nOh my goooooooooooooooood\n\n![QJHzXPA.png](http://i.imgur.com/QJHzXPA.png)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-05-07T05:48:32Z","Content":"\u003E \n\u003E The KSP implementation is great. You use attribute tags ( [persistent] ) for flagging members in a class. Then you can use the KSP config load to instantiate the class from the config file. Works really well.\n\nIs it possible to read multiple config files from a single class?\n\n\u003E \n\u003E May I ask, how do you get the KSP to load the shaders? How do you add parameters?\n\nI use this [https://github.com/blackrack/Scatterer/blob/master/scatterer/ShaderTool.cs](https://github.com/blackrack/Scatterer/blob/master/scatterer/ShaderTool.cs) lines 52-62\n\n\u003E \n\u003E That\u0027s glorious\n\u003E Did you have any luck with fixing the camera in regards to replacing the stock water, or has that remained stubbornly jump up and flood the worldish?\n\u003E \n\u003E Best of luck with settling into your new job in any case, do you have a paypal or patreon etc for donations and such?\n\nOh I haven\u0027t had time to give the water shaders another try, I figured I\u0027ll take care of easier stuff first.\n\n\u003E \n\u003E Woohoo! I guess the sunflare is ugly when you keep the default one, but luckily I don\u0027t. I hope to see this Soon.\n\u003E Also, have you noticed that the ground seems to be lower resolution? Is that intended, or does it just break easily?\n\nIt\u0027s not intended but I know why it\u0027s happening and it should be really easy to fix once I\u0027m releasing a new version (Although I like the low-res ground more).\n\n\u003E \n\u003E I wasn\u0027t aware this mod added black holes to the game.\n\u003E [http://i.imgur.com/AL3510v.png](http://i.imgur.com/AL3510v.png)\n\u003E \n\u003E EDIT:\n\u003E \n\u003E Oh my goooooooooooooooood\n\u003E \n\u003E [http://i.imgur.com/QJHzXPA.png](http://i.imgur.com/QJHzXPA.png)\n\nYou definitely changed something in the scale parameters or are playing with a mod that changes the scale of things."},{"CreatedByName":"DeepOdyssey","CreatedById":91001,"CreatedDateTime":"2015-05-07T05:51:26Z","Content":"This is awesome, but i guess there\u0027s nothing you can do to fix the black space when you pass 6km mark?"},{"CreatedByName":"Bluejay0013","CreatedById":139714,"CreatedDateTime":"2015-05-07T11:52:11Z","Content":"\u003E \n\u003E It\u0027s not intended but I know why it\u0027s happening and it should be really easy to fix once I\u0027m releasing a new version (Although I like the low-res ground more).\n\nI hope you make it able to have an option for low res textures or normal textures rather than just how it is right now."},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2015-05-07T13:14:12Z","Content":"Total awesomeness.\n\n\u002B1 from me."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-05-07T14:28:59Z","Content":"I just tried this on a basic 1.0.2 install with no other visual mods and using the default settings in dx9, looks fantastic. Well done!\n\nOne thing I have noticed is it seems to break the thermal overlay (the F11 one that shows the vessel in colors from red to white based on their temps). Activating the overlay with this mod installed has no effect, the image of the vessel does not change at all."},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-05-07T15:09:24Z","Content":"\u003E \n\u003E I just tried this on a basic 1.0.2 install with no other visual mods and using the default settings in dx9, looks fantastic. Well done!\n\u003E One thing I have noticed is it seems to break the thermal overlay (the F11 one that shows the vessel in colors from red to white based on their temps). Activating the overlay with this mod installed has no effect, the image of the vessel does not change at all.\n\nMy guess is that the new shaders from KSP haven\u0027t been pulled, so when we run shader replacement, it breaks new shader features Squad added between updates.\n\n- - - Updated - - -\n\n\u003E \n\u003E Is it possible to read multiple config files from a single class?\n\u003E I use this [https://github.com/blackrack/Scatterer/blob/master/scatterer/ShaderTool.cs](https://github.com/blackrack/Scatterer/blob/master/scatterer/ShaderTool.cs) lines 52-62\n\u003E \n\u003E Oh I haven\u0027t had time to give the water shaders another try, I figured I\u0027ll take care of easier stuff first.\n\u003E \n\u003E It\u0027s not intended but I know why it\u0027s happening and it should be really easy to fix once I\u0027m releasing a new version (Although I like the low-res ground more).\n\u003E \n\u003E You definitely changed something in the scale parameters or are playing with a mod that changes the scale of things.\n\nHmmm... I never thought about that one. You could manually populate the entries, or you could split the config items into sub-classes and load them individually. Keep in-mind, the configs are organized not by file, but by config node."},{"CreatedByName":"diegzumillo","CreatedById":4869,"CreatedDateTime":"2015-05-07T17:43:19Z","Content":"I constantly crash while orbitin kerbin. It\u0027s very pretty but I think I\u0027ll wait until the experimental phase is over."}]}