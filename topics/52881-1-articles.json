{"TopicId":52881,"ForumId":55,"TopicTitle":"Realistic angular momentum/torque management","CreatedByName":"Jaxal1","CreatedById":85315,"CreatedDateTime":"2013-11-12T20:41:21Z","PageNum":1,"Articles":[{"CreatedByName":"Jaxal1","CreatedById":85315,"CreatedDateTime":"2013-11-12T20:41:21Z","Content":"\n\u003Cp\u003EThis is probably \u0027more realistic\u0027 than KSP really wants to be, but in reality, the amount of angular momentum you can get out of a reaction wheel is limited: eventually the wheel is spinning so fast that it will break (by seizing a bearing if you\u0027re lucky, by exploding violently if you\u0027re not).\u003C/p\u003E\u003Cp\u003EFor most spatial maneuvers, this is a non issue: any momentum added to the craft by the wheels is also removed by the wheels. Things only get weird when you\u0027re counteracting an outside force with torque from the reaction wheels. Fortunately for us, KSP doesn\u0027t simulate most of the ones real spacecraft have to deal with: magnetic effects, off-center drag (minuscule at orbital altitudes, but adds up over time), solar wind, light pressure.\u003C/p\u003E\u003Cp\u003EThere are a couple examples of this:\u003C/p\u003E\u003Cp\u003E1) Spinning/despinning a craft with RCS, then using reaction wheels to reverse the effect. This leaves the reaction wheels spinning either faster or slower than when the process was initiated.\u003C/p\u003E\u003Cp\u003E2) Stabilizing a craft after an impact/explosion using only reaction wheels will also have a net effect.\u003C/p\u003E\u003Cp\u003E3) Using reaction wheel torque to avoid problems with off-of-center thrust.\u003C/p\u003E\u003Cp\u003E4) Using SAS to keep a lander upright when it landed on a slope.\u003C/p\u003E\u003Cp\u003E1 is someone deliberately trying to break the game: I can\u0027t think of any good reason to do this, other than running out of RCS fuel - But assuming a reasonable rate of rotation at run-out, we can imagine that the gyros absorb the momentum, even if they hum at a worrying pitch for the rest of the mission.\u003C/p\u003E\u003Cp\u003EUnplanned explosions and collisions (2) are rare enough that you probably have bigger problems without the game reminding you of conservation of angular momentum, and like example 1, above, this is bounded, so we can just assume the wheel have enough \u0027peak capacity\u0027 to handle the crisis.\u003C/p\u003E\u003Cp\u003EEven problem 3 is usually indicative of poor design or an emergency - the game doesn\u0027t need to punish you more in that circumstance. (Engine gimbals explicitly address this problem, as well. Their whole point is to be able to point the engine relative to the center of mass.)\u003C/p\u003E\u003Cp\u003EBut I see people comment on on the 4th case all the time. If you used reaction wheels to keep something balanced on a slope, when it would otherwise tip over, you have a time limit. Well-designed and controlled gyros could keep it upright for a time, a computer-controlled spinning top. But the necessary spin speed of the wheels will only increase, with the lander attempting to precess in ever-widening circles, until it falls over or the gyros fail or both.\u003C/p\u003E\n"},{"CreatedByName":"vetrox","CreatedById":69796,"CreatedDateTime":"2013-11-12T20:55:16Z","Content":"\n\u003Cp\u003EIt makes for good/fun/enjoyable gameplay.\u003C/p\u003E\u003Cp\u003EIf my ships toppled over everytime i landed i would get annoyed very quickly.\u003C/p\u003E\n"},{"CreatedByName":"Jaxal1","CreatedById":85315,"CreatedDateTime":"2013-11-12T22:26:15Z","Content":"\n\u003Cp\u003EThere\u0027s a reason I flagged this as Discussion instead of a Suggestion. I really doubt the game would be more fun if you had to pay attention to gyroscope saturation, or debating if Kerbals use control-moment gyroscopes or just straight reaction wheel.\u003C/p\u003E\u003Cp\u003EBut it does bug me a little bit, because I know the real physics and I know reaction wheels are not a (permanent) solution to landing on a 20 degree slope and that they can\u0027t actually hold a spacecraft sideways during reentry.\u003C/p\u003E\u003Cp\u003EAnd it would encourage landers with a broad footing and low center of gravity. (If your center of mass is above the area defined by your landing gear, you don\u0027t need SAS to keep from tipping over.)\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2013-11-12T23:33:29Z","Content":"\n\u003Cp\u003EThe game should implement the angular momentum conservation law in the first place. If everything stops spinning once you start time warp, any fine adjustments to torque modules are pointless.\u003C/p\u003E\n"},{"CreatedByName":"Smidge204","CreatedById":89677,"CreatedDateTime":"2013-11-12T23:43:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EThe game should implement the angular momentum conservation law in the first place. If everything stops spinning once you start time warp, any fine adjustments to torque modules are pointless.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUse physical acceleration if it bothers you that much. Time warp disables physics, which means no rotation. I suppose you could put the rotation \u0022on rails\u0022 like everything else but I\u0027m willing to bet that once you slow down and physics is re-enabled, your craft is liable to spontaneously disassemble itself.\u003C/p\u003E\u003Cp\u003EBut as to the overall topic: I think it\u0027s an appropriate tradeoff of realism for playability. The reaction wheel modules are pretty tiny anyway, and in that form (a relatively thin disk) it\u0027s hard to imagine they could produce as much torque as they do in any axis other than longitudinally.\u003C/p\u003E\u003Cp\u003E=Smidge=\u003C/p\u003E\n"},{"CreatedByName":"UberFuber","CreatedById":90736,"CreatedDateTime":"2013-11-12T23:57:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jaxal1\u0022 data-cite=\u0022Jaxal1\u0022\u003E\u003Cdiv\u003EThere\u0027s a reason I flagged this as Discussion instead of a Suggestion. I really doubt the game would be more fun if you had to pay attention to gyroscope saturation, or debating if Kerbals use control-moment gyroscopes or just straight reaction wheel.\u003Cp\u003EBut it does bug me a little bit, because I know the real physics and I know reaction wheels are not a (permanent) solution to landing on a 20 degree slope and that they can\u0027t actually hold a spacecraft sideways during reentry.\u003C/p\u003E\u003Cp\u003EAnd it would encourage landers with a broad footing and low center of gravity. (If your center of mass is above the area defined by your landing gear, you don\u0027t need SAS to keep from tipping over.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAlso in real-life there\u0027s various methods of desaturating the CMG/bleeding off the stored angular momentum such as magnetic torque using planet\u0027s magnetic field, gravitation gradient torque for very long/large spacecrafts, or some form of solar sail.\u003C/p\u003E\u003Cp\u003ESo I believe a good compromise could be that each CMG/reaction wheel has a maximum absolute Angular Momentum (in Nms, Newton-meter-second) it can store in the yaw, pitch and roll direction (units in Nms). So, for example, a CMG may be able to store up to 200 Nms in each attitude, so it can at most supply 200 Nms for a clockwise roll or -200 Nms in a counter-clockwise roll. If the CMG is storing momentum, it will slowly bleed those momentum off over time (say 1 Nms/second) until it reaches 0 Nms stored for an axis. This bleeding effect abstract away the various real-world strategies to desaturate a CMG.\u003C/p\u003E\u003Cp\u003EAnother variation is that CMG has a toggle switch, something like \u0022Desaturate Angular Momentum\u0022. When toggled On, the CMG will try to zero out its stored angular momentum at a slow rate while consuming a lot of electricity (say 1 Nms/sec while consuming 1 e/s).\u003C/p\u003E\u003Cp\u003ESo, what does this mean?\u003C/p\u003E\u003Cp\u003E1. It provides an additional \u0022differentiation\u0022 between different CMG/reaction wheel system. Some reaction wheel can offer fast response but have low Angular Momentum capacity. Some can offer really high capacity but is very heavy, etc.\u003C/p\u003E\u003Cp\u003E2. Allow player who\u0027re using CMG as intended to not worry too much about the angular momentum limits (still have to worry a bit if, say, they don\u0027t add enough CMG for a very large/long spacecraft).\u003C/p\u003E\u003Cp\u003E3. It prevents the bizzare usage of using CMG to keep a lander upright, since, hopefully, the recharge rate is slow enough the the CMG will saturate and cause the lander to fall over.\u003C/p\u003E\u003Cp\u003EHm... I wonder if its possible to mod that (having CMG drain/fill resources as it is used).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-13T00:07:59Z\u0022 title=\u002211/13/2013 12:07  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 13, 2013\u003C/time\u003E by UberFuber\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Jaxal1","CreatedById":85315,"CreatedDateTime":"2013-11-13T00:12:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022UberFuber\u0022 data-cite=\u0022UberFuber\u0022\u003E\u003Cdiv\u003EAlso in real-life there\u0027s various methods of desaturating the CMG/bleeding off the stored angular momentum such as magnetic torque using planet\u0027s magnetic field or gravitation gradient torque for very long/large spacecrafts.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnd one of the simplest is to use RCS to provide angular momentum, and RCS thrusters are pretty far up the tech tree compared to piling on capsules for their reaction wheels. Magnetic torque rods coming before peroxide rockets in the tech tree strains my disbelief more than just handwaving it in the first place. (Maybe like batteries and solar panels? You can add torque rods to desaturate your reaction wheels the same way solar panels recharge your batteries? Or use RCS to do it in a hurry?)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022UberFuber\u0022 data-cite=\u0022UberFuber\u0022\u003E\u003Cdiv\u003EHm... I wonder if its possible to mod that (having CMG drain/fill resources as it is used).\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E Maybe, though having a different resource for Pitch/Roll/Yaw could get weird when you dock together a large ship and gyros that had been \u0027roll\u0027 are now \u0027pitch\u0027 for the larger craft.\u003C/p\u003E\u003Cp\u003EUltimately, I think the game is more fun if we just ignore that constraint (same as how SAS now is standard with just about any capsule, no matter how primitive on the tech tree, because the game is just more fun when you can count on the computer to diagnose your three-axis tumble and correct it. Just like it\u0027s more fun with small planets and small interplanetary distances that make orbit attainable and trips short.\u003C/p\u003E\n"},{"CreatedByName":"UberFuber","CreatedById":90736,"CreatedDateTime":"2013-11-13T01:12:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jaxal1\u0022 data-cite=\u0022Jaxal1\u0022\u003E\u003Cdiv\u003E Maybe, though having a different resource for Pitch/Roll/Yaw could get weird when you dock together a large ship and gyros that had been \u0027roll\u0027 are now \u0027pitch\u0027 for the larger craft.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh yeah, completely forgot about that.\u003C/p\u003E\u003Cp\u003EActually, its worse. You don\u0027t even need to dock. If you have two command modules in different orientation, roll for one may have to turn to, say, pitch for another.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jaxal1\u0022 data-cite=\u0022Jaxal1\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EUltimately, I think the game is more fun if we just ignore that constraint (same as how SAS now is standard with just about any capsule, no matter how primitive on the tech tree, because the game is just more fun when you can count on the computer to diagnose your three-axis tumble and correct it. Just like it\u0027s more fun with small planets and small interplanetary distances that make orbit attainable and trips short.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI agree with you on that point.\u003C/p\u003E\n"},{"CreatedByName":"RSwordsman","CreatedById":78678,"CreatedDateTime":"2013-11-13T01:56:50Z","Content":"\n\u003Cp\u003EConclusion-- a sacrifice of reality in the name of fun and accessibility? I know now (after getting into KSP) enough about how reaction wheels work, but if you had thrown me into the game with the option to \u0022Desaturate Angular Momentum\u0022 I\u0027d not have the faintest clue what it was. Nor would I probably understand why my reaction wheel module suddenly quit functioning for a certain axis once it hit top speed.\u003C/p\u003E\u003Cp\u003EI do love advancing game mechanics in the name of real engineering, but I agree that this one will have to be a case of K.I.S.S.\u003C/p\u003E\n"},{"CreatedByName":"Jaxal1","CreatedById":85315,"CreatedDateTime":"2013-11-13T02:57:28Z","Content":"\n\u003Cp\u003EIf the game was going to have a limit on reaction wheel torque, the best way to do it would probably be to make control surfaces and RCS lower on the tech tree than reaction wheels (yes, this would mean the 1-kerbal capsule would not have reaction wheels). First launch is uncontrolled, get science to unlock fins with control surfaces, which is enough for a long suborbital flight to other biomes, unlock more science to get RCS, which is enough to steer a craft outside atmosphere to orbit and go to the Mun. That gets plenty more science to unlock in-line wheels and better capsules that have their own torque.\u003C/p\u003E\u003Cp\u003EThey\u0027re bit more intuitive than reaction wheel limits. (Instead, currently reaction wheels \u0027just work\u0027 on any craft and the incentive to unlock RCS and in-line reaction wheels is to effectively maneuver larger craft.)\u003C/p\u003E\u003Cp\u003EDesaturating reaction wheels using tidal forces makes an interesting thought problem, though since tides can\u0027t be used to produce torque around the major axis of mass (usually, this would be \u0027roll\u0027). If you assume you\u0027re using a 4-axis tetrahedral setup (like NASA actually uses), there has to be a way to shift momentum to the three non-parallel wheels (if you couldn\u0027t that wouldn\u0027t be a redundant setup), which can then be desaturated...\u003C/p\u003E\u003Cp\u003EOh! I know how you could do it: tidally lock your craft, then use your reaction wheels to bleed off your \u0027roll\u0027 momentum into a precessional movement (so that the nose and tail of your craft are making tiny circles.) The tide will be attempting to fight that precession. Desaturation achieved.\u003C/p\u003E\n"}]}