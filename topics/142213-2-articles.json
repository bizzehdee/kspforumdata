{"TopicId":142213,"ForumId":34,"TopicTitle":"PEGAS - Powered Explicit Guidance Ascent System - devlog","CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-06-22T01:03:11Z","PageNum":2,"Articles":[{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-03-29T21:20:01Z","Content":"\n\u003Cp\u003E\nAs of \u003Ca href=\u0022https://github.com/Noiredd/PEGAS/commit/25c9e84e39ad61e35b807f60de2c587b24c65659\u0022 rel=\u0022external nofollow\u0022\u003E25c9e84\u003C/a\u003E the kerboscript version of UPFG has been completed and passes numerical consistency tests between MATLAB and kOS. Proof in pic attached:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00220bOTv7a.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/0bOTv7a.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMinor differences may result from truncating of some of the input values: MATLAB operates on high precision data, but unless told otherwise it will output only 4 decimal places. I may have just blindly copied some truncated/rounded value into kOS instead of exporting a precise version. Fortunately, the difference is insignificant from practical point of view.\n\u003C/p\u003E\n\u003Cp\u003E\nThis only tested internal correctness of the port: I ran the script on a vehicle consisting of a single part (probe core with kOS module), put in the same data MATLAB uses and compared the output with what the MATLAB version would compute. Next step is to integrate the algorithm with the KSP coordinate frame and perform some tests on an actual, live vehicle. I updated the first post accordingly.\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2017-03-31T05:08:31Z","Content":"\n\u003Cp\u003E\nI don\u0027t want to jinx it, but you\u0027re coming up on a year working on PEGAS, and that\u0027s not counting the work you did before this thread!\n\u003C/p\u003E\n\u003Cp\u003E\nQuality comes first! (Well, after real life, of course.)\n\u003C/p\u003E\n"},{"CreatedByName":"Ilpez","CreatedById":165871,"CreatedDateTime":"2017-03-31T05:32:16Z","Content":"\n\u003Cp\u003E\nFinally an update #yey!\n\u003C/p\u003E\n\u003Cp\u003E\nJust want you to know, that i already port your UPFG to kRPC(Without multistage feature), and it works !\u003Cbr\u003E\u003Cbr\u003E\nAt least now you know that your code works in KSP \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ilpez","CreatedById":165871,"CreatedDateTime":"2017-03-31T11:34:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223002130\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221490822401\u0022 data-ipsquote-userid=\u0022124298\u0022 data-ipsquote-username=\u0022Reddy\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/30/2017 at 5:20 AM, Reddy said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs of \u003Ca href=\u0022https://github.com/Noiredd/PEGAS/commit/25c9e84e39ad61e35b807f60de2c587b24c65659\u0022 rel=\u0022external nofollow\u0022\u003E25c9e84\u003C/a\u003E the kerboscript version of UPFG has been completed and passes numerical consistency tests between MATLAB and kOS. Proof in pic attached:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00220bOTv7a.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/0bOTv7a.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMinor differences may result from truncating of some of the input values: MATLAB operates on high precision data, but unless told otherwise it will output only 4 decimal places. I may have just blindly copied some truncated/rounded value into kOS instead of exporting a precise version. Fortunately, the difference is insignificant from practical point of view.\n\u003C/p\u003E\n\u003Cp\u003E\nThis only tested internal correctness of the port: I ran the script on a vehicle consisting of a single part (probe core with kOS module), put in the same data MATLAB uses and compared the output with what the MATLAB version would compute. Next step is to integrate the algorithm with the KSP coordinate frame and perform some tests on an actual, live vehicle. I updated the first post accordingly.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs a reminder, pitch in KSP is a function of SIN (value between 90 and -90)\u003Cbr\u003E\ni don\u0027t know about yaw, but i use atan2 in my kRPC version of your UPFG\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-03-31T16:26:13Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123837\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0022 rel=\u0022\u0022\u003E@Dman979\u003C/a\u003E Real life is exactly the reason why this is taking so damn long. I am a researcher in pursuit of PhD (machine vision and deep learning); sometimes after spending a day in my lab coding, even more coding is the last thing I want to do right after coming back from work \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E As poor excuse as that is, I haven\u0027t played KSP at all in well over a year!\n\u003C/p\u003E\n\u003Cp\u003E\nBut I\u0027m going to finish this soon. Since the prototype is working, I am now very confident PEGAS is going to be completed shortly. I don\u0027t wanna jinx it further and definitely say \u0022by the end of April\u0022, but I am hoping for just that. After all, I am now more experienced in kOS and KSP reference frames than I was when writing the first PEGAS - and those are pretty much the only problems left to solve now \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E The plan is to release a basic working version of kOS script package, so that everyone can try it on their own vehicles, and then gradually introduce features.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165871-ilpez/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165871\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165871-ilpez/\u0022 rel=\u0022\u0022\u003E@Ilpez\u003C/a\u003E I sent you a private message.\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-05-25T19:43:39Z","Content":"\n\u003Cp\u003E\nQuick update. I have the UPFG running in KSP, along with some infrastructure code for launch window calculation, staging sequence management (including ullage), coordinate conversions (I decided not to reimplement UPFG for KSP reference frame but instead convert KSP-style coordinates into MATLAB-style) - everything for a most basic launch. For proof of progress, here\u0027s a little video of it performing in vanilla KSP: \u003Ca href=\u0022https://www.youtube.com/watch?v=TI9F0omwPjM\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.youtube.com/watch?v=TI9F0omwPjM\u003C/a\u003E (please note it is private, just for this forum and anyone following the thread - I humbly request you don\u0027t publish it anywhere else).\n\u003C/p\u003E\n\u003Cp\u003E\nTODOs for now involve coding support for constant-acceleration phases and cleaning up the hacky pieces of code (although most of it is release-ready, you might\u0027ve noticed some stagnation in my repository because a few crucial bits still need refactoring/polishing). For an official release I want to prepare a better demo video (in \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E of course) and some tutorials - in order to run PEGAS you \u003Cem\u003Ewill\u003C/em\u003E have to perform some manual configuration (likely involving some rocket maths \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E). We\u0027re almost there guys, hold on with me just a little bit more!\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: Mind the video description. I tried adding adnotations but turns out youtube does not allow that anymore.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-26T23:27:31Z\u0022 title=\u002205/26/2017 11:27  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 26, 2017\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-05-29T19:31:35Z","Content":"\n\u003Cp\u003E\nI just wanted to thank Squad and Steam for a forcibly pushed update which ruined my install and my saves and wasted several hours of my time on recovery of the data and (partial) reconstruction of my universe.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-30T04:50:20Z\u0022 title=\u002205/30/2017 04:50  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 30, 2017\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Slainte Maith","CreatedById":175556,"CreatedDateTime":"2017-06-06T21:07:18Z","Content":"\n\u003Cp\u003E\nWhere does the latest code for this live nowadays? \u00A0I only see pegas_upfg and pegas.cser--which just do \u0022program ended\u0022 when you run them.\u003Cbr\u003E\n(I\u0027m sure I\u0027m missing something)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-06-06T21:09:57Z\u0022 title=\u002206/06/2017 09:09  PM\u0022 data-short=\u00227 yr\u0022\u003EJune 6, 2017\u003C/time\u003E by Slainte Maith\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Slainte Maith","CreatedById":175556,"CreatedDateTime":"2017-06-06T21:36:03Z","Content":"\n\u003Cp\u003E\nNevermind. \u00A0I was missing something. \u00A0My brain. \u00A0I found it. \u00A0=) \u00A0Great work!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Slainte Maith","CreatedById":175556,"CreatedDateTime":"2017-06-08T01:34:14Z","Content":"\n\u003Cp\u003E\nOkay, so how would the boot file look for, say, an Atlas or sputnik rocket which doesn\u0027t stage normally--but only drops boosters while the center engine continues to burn? \u00A0I\u0027ve been playing with the values, but the logic doesn\u0027t seem to be set up for it.\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2017-06-08T01:36:40Z","Content":"\n\u003Cp\u003E\nWell, I\u0027d guess that you need to calculate the pitch/time program yourself.\n\u003C/p\u003E\n\u003Cp\u003E\nBut you can include those staging events, if I understood what \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124298\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0022 rel=\u0022\u0022\u003E@Reddy\u003C/a\u003E is doing correctly.\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-06-08T14:24:20Z","Content":"\n\u003Cp\u003E\nNo worries \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175556-slainte-maith/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022175556\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175556-slainte-maith/\u0022 rel=\u0022\u0022\u003E@Slainte Maith\u003C/a\u003E. The front page hasn\u0027t been updated in a while but I don\u0027t want to waste time on tiny changes to it right now, with the big release just around the corner. Right now you are right, a lot of things are missing - or maybe I should say, only available in my local repository \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175556-slainte-maith/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022175556\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/175556-slainte-maith/\u0022 rel=\u0022\u0022\u003E@Slainte Maith\u003C/a\u003E, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123837\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0022 rel=\u0022\u0022\u003E@Dman979\u003C/a\u003E, you will not need a pitch/time program. I figured out something much simpler than that: you will we able to specify vertical ascent time and initial pitch angle - something akin to what Ferram mentions in his \u003Ca href=\u0022https://github.com/KSP-RO/RealismOverhaul/wiki/Ferram%27s-Launch-Vehicle-Tutorial\u0022 rel=\u0022external nofollow\u0022\u003ELaunch Vehicle tutorial\u003C/a\u003E. PEGAS will hold a zero-\u003Cabbr title=\u0022Angle of Attack\u0022\u003EAoA\u003C/abbr\u003E trajectory until the UPFG kicks in, allowing for a fully automatic launch without the need to perform complex calculations in MATLAB. I realize only a tiny handful of people would be able (and willing to!) do something like that. As to staging events, yes you will be able to bind spacebar to time. This will be enough for \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E or fairing jettison events, but for main stages I have something better in store. Since those will potentially require performing an ullage burn, you will have the option to have ullage motors automatically activate (or deactivate, if you prefer \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E push instead of dedicated \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E motors). Okay enough talking for me, time to get back to code! \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Slainte Maith","CreatedById":175556,"CreatedDateTime":"2017-06-09T02:02:01Z","Content":"\n\u003Cp\u003E\nThank you so much! \u00A0I look forward to trying your hard work!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-07-30T19:06:49Z","Content":"\n\u003Cp\u003E\nThe moment we\u0027ve all been waiting for has finally come - PEGAS is now complete. I think it is capable of running any vehicles at this moment, as I tested both on a high-\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E Atlas V and low-\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E and more complex Saturn V with success. Now the most difficult test before it: whatever you guys can come up with \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nLink to the repository: \u003Ca href=\u0022https://github.com/Noiredd/PEGAS\u0022 rel=\u0022external nofollow\u0022\u003Egithub.com/Noiredd/PEGAS\u003C/a\u003E - you need to get the kOS folder, optionally with the example boot files. Link to the tutorials are on the front page, be sure to check those out. I\u0027m not doing any mechjeb-level magic, so you\u0027ll need to provide plenty of information yourself. Yes, some basics of kOS might be useful, if not necessary. Also, do watch my video, as it makes a pretty good explanation of what PEGAS now is and how it works - as well as a progress report since my last messages:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo ipsEmbeddedVideo_limited\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/NEQD7AQoLXk?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nThank you all for staying with me this whole time. I hope you will get your vehicles flying with PEGAS successfully \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E In case of any problems - you can leave me messages here, or directly at github.\n\u003C/p\u003E\n\u003Cp\u003E\nOne word before I close this post: quite likely this is not the end of the route for PEGAS. And I don\u0027t mean just the fact that I\u0027ll be providing bugfixes and other forms of support. While working on it, I \u003Cem\u003Ethink\u003C/em\u003E I figured out a way to turn it into a general orbital maneuver executor. Most of the facilities needed for that are already there, so I think it\u0027s quite possible. I also have an idea for doing \u003Cem\u003Elanding\u003C/em\u003E using it - though this is a much more remote vision. Anyway, for now I\u0027m taking a little break from it (except support for the existing version) - but I will surely let you know if I move it into a new direction.\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2017-07-30T22:01:59Z","Content":"\n\u003Cp\u003E\nThat\u0027s a great video. It really explains how the PEGAS code works. Beleive it or not, I had no idea until now how it worked.\n\u003C/p\u003E\n\u003Cp\u003E\nIt also reminded me of this one.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo ipsEmbeddedVideo_limited\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/bZe5J8SVCYQ?feature=oembed\u0022 width=\u0022459\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Slainte Maith","CreatedById":175556,"CreatedDateTime":"2017-07-31T01:17:46Z","Content":"\n\u003Cp\u003E\nInterestingly, there\u0027s a PEGAS module also being worked on for MechJeb. \u00A0It\u0027s been released in the latest dev version.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2017-07-31T09:17:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223135812\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221501463866\u0022 data-ipsquote-userid=\u0022175556\u0022 data-ipsquote-username=\u0022Slainte Maith\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Slainte Maith said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nInterestingly, there\u0027s a PEGAS module also being worked on for MechJeb. \u00A0It\u0027s been released in the latest dev version.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExcept that it\u0027s based on Atlas / Centaur instead of the newer guidance used by the shuttle and others.\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-07-31T16:41:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223135812\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221501463866\u0022 data-ipsquote-userid=\u0022175556\u0022 data-ipsquote-username=\u0022Slainte Maith\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, Slainte Maith said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nInterestingly, there\u0027s a PEGAS module also being worked on for MechJeb. \u00A0It\u0027s been released in the latest dev version.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIndeed that is interesting... care to share a link? I couldn\u0027t find it anywhere. I know they use PEG, which is unsurprising, but PEG\u003Cstrong\u003EAS\u003C/strong\u003E?\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: Starwaster cleared it up. By the way, I also coded the basic formulation of Atlas/Centaur PEG in an earlier version of PEGAS (now only to be found in my \u003Ca href=\u0022https://github.com/Noiredd/PEGAS-MATLAB\u0022 rel=\u0022external nofollow\u0022\u003Eprototype repository\u003C/a\u003E).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-07-31T16:49:41Z\u0022 title=\u002207/31/2017 04:49  PM\u0022 data-short=\u00226 yr\u0022\u003EJuly 31, 2017\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Jim DiGriz","CreatedById":92465,"CreatedDateTime":"2017-08-08T17:32:35Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124298\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0022 rel=\u0022\u0022\u003E@Reddy\u003C/a\u003E\u00A0i\u0027m wondering if this line is a bug in the MATLAB code?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/Noiredd/PEGAS-MATLAB/blob/1ff2b11e8b8e860e0c5d041bf1bcfa5056d06d87/MATLAB/unifiedPoweredFlightGuidance.m#L228\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Noiredd/PEGAS-MATLAB/blob/1ff2b11e8b8e860e0c5d041bf1bcfa5056d06d87/MATLAB/unifiedPoweredFlightGuidance.m#L228\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t see that in section 4.8 or 4.8.1 (or, i think the other 4.8.x blocks) of the UPFG No 24 doc. \u00A0Although it\u0027s still early here and my coffee may not be working yet...\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: \u00A0well deleting that line from my code makes my yaw steering problems much worse and it doesn\u0027t fly right at all...\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-08-08T21:20:41Z\u0022 title=\u002208/08/2017 09:20  PM\u0022 data-short=\u00226 yr\u0022\u003EAugust 8, 2017\u003C/time\u003E by Jim DiGriz\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-08-09T02:06:41Z","Content":"\n\u003Cp\u003E\nHa, this is a very peculiar line, and I completely understand your confusion. Indeed, it \u003Cem\u003Edoes not \u003C/em\u003Eappear in the original document - I added it myself as one of several tweaks I came up with during a painstaking, months-long process of debugging UPFG. Without the line, I had similar problems to yours, the algorithm performed much worse - unfortunately, I can\u0027t really explain why.\n\u003C/p\u003E\n\u003Cp\u003E\nAt least I can tell you what it does: in general, it enforces the desired position, r\u003Csub\u003Ed\u003C/sub\u003E, to lie in the target orbit plane given by vector i\u003Csub\u003Ey\u003C/sub\u003E. What happens here is we take our predicted position r\u003Csub\u003Ep\u003C/sub\u003E and subtract the off-plane component from it - what remains, is only the in-plane component. Then we adjust its magnitude (line 229), obtaining a new desired position which not only has the right altitude, but also lies in the right plane. This makes the algorithm converge faster and on a more reasonable solution. Personally, I have a much better understanding of this modification, than how the original algorithm actually worked - and how could it work without it.\n\u003C/p\u003E\n"},{"CreatedByName":"Jim DiGriz","CreatedById":92465,"CreatedDateTime":"2017-08-10T04:22:45Z","Content":"\n\u003Cp\u003E\nso i physically (ew) went to the engineering library on campus today and made a hard photocopy (yuck) of\u00A0\u003Ca href=\u0022https://ntrs.nasa.gov/search.jsp?R=19790048206\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ntrs.nasa.gov/search.jsp?R=19790048206\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\npage 17, equation 36 is\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nrd = rd unit [ rp - ( rp dot\u00A0iy ) iy ]\n\u003C/p\u003E\n\u003Cp\u003E\nthey applied that to rd instead of mutating rp, but rp isn\u0027t state that recycles so i don\u0027t think it matters.\n\u003C/p\u003E\n\u003Cp\u003E\ntheir corrector is also different, after CSE they define:\n\u003C/p\u003E\n\u003Cp\u003E\nvp = v \u002B vthrust \u002B vgrav\n\u003C/p\u003E\n\u003Cp\u003E\nvmiss = vp - vd\n\u003C/p\u003E\n\u003Cp\u003E\nvgo = vgo - 1.0 * vmiss\n\u003C/p\u003E\n\u003Cp\u003E\nwhere 1.0 is a damping factor with a note that it can be set to 1.0 for ascents. \u00A0i don\u0027t see where vbias is used at all.\n\u003C/p\u003E\n\u003Cp\u003E\ntheir vthrust and rthrust is also substantially different, and i think they\u0027re using a more normal form of the linear tangent steering law, still digesting all this though...\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2017-08-10T14:07:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223144679\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221502338965\u0022 data-ipsquote-userid=\u002292465\u0022 data-ipsquote-username=\u0022Jim DiGriz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Jim DiGriz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nso i physically (ew) went to the engineering library on campus today and made a hard photocopy (yuck) of\u00A0\u003Ca href=\u0022https://ntrs.nasa.gov/search.jsp?R=19790048206\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ntrs.nasa.gov/search.jsp?R=19790048206\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGet that blasphemous talk away! Physical copies are amazing! They don\u0027t run out of battery! You can write on them! Fold them!\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, good on you for doing the research. In practical terms, what does it mean?\n\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2017-08-10T15:12:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223144901\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221502374066\u0022 data-ipsquote-userid=\u0022123837\u0022 data-ipsquote-username=\u0022Dman979\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Dman979 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGet that blasphemous talk away! Physical copies are amazing! They don\u0027t run out of battery! You can write on them! Fold them!\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, good on you for doing the research. In practical terms, what does it mean?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes but you can\u0027t copy and paste them onto an adjacent computer / tablet....\n\u003C/p\u003E\n\u003Cp\u003E\n(I should know, I tried once in a moment of stupefaction wherein it seemed logical to me that I should have been able to do so... I sat there for several seconds looking from one to the other wondering why it wasn\u0027t possible yet)\n\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2017-08-10T15:30:06Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/92465-jim-digriz/\u0026amp;do=hovercard\u0022 data-mentionid=\u002292465\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/92465-jim-digriz/\u0022 rel=\u0022\u0022\u003E@Jim DiGriz\u003C/a\u003E Would you be willing to share a scan of that document?\n\u003C/p\u003E\n"},{"CreatedByName":"Jim DiGriz","CreatedById":92465,"CreatedDateTime":"2017-08-10T18:46:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223144901\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221502374066\u0022 data-ipsquote-userid=\u0022123837\u0022 data-ipsquote-username=\u0022Dman979\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Dman979 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnyway, good on you for doing the research. In practical terms, what does it mean?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nReddy came up with the right fix for that problem.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223144957\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221502379006\u0022 data-ipsquote-userid=\u002271262\u0022 data-ipsquote-username=\u0022Starwaster\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Starwaster said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/92465-jim-digriz/\u0026amp;do=hovercard\u0022 data-mentionid=\u002292465\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/92465-jim-digriz/\u0022 rel=\u0022\u0022\u003E@Jim DiGriz\u003C/a\u003E Would you be willing to share a scan of that document?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah, although it\u0027ll have to be a scan of a scan. \u00A0Next time I\u0027ll be smart and bring a USB drive, but that was my first time at the university library in 20 years...\n\u003C/p\u003E\n"}]}