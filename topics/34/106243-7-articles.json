{"TopicId":106243,"ForumId":34,"TopicTitle":"[1.8.1 - 1.12.5] Interstellar Fuel Switch (IFS) 3.29.5","CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-04-30T08:28:26Z","PageNum":7,"Articles":[{"CreatedByName":"reaperrising","CreatedById":138082,"CreatedDateTime":"2015-09-08T01:19:29Z","Content":"I am having an issue with this mod overwriting the fuel tanks from OPT spaceplanes. I need to put LFO in them but instead I get all of these resources and liquidfuel. I have no clue what is wrong and I would hate to have to rework my design. If anyone knows can you help?"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-09-08T12:04:35Z","Content":"You have to figure out which mod uses a Modulle Manager config which overrides your fuel tanks. IFS is merely tool to create switchable tanks. I\u0027m not responsible how modders use IFS to change the contents of fuel tanks. Personally I don\u0027t like Module Script that alter the contents of all fuel tanks, but some modder think otherwise."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-09-08T14:02:53Z","Content":"\u003E \n\u003E While working on a Community Tech Tree comparability script for TAC-LS, I came across an interesting situation that isn\u0027t address by either Interstellar Fuel Switch or Firespitter. I was originally going to place all of the life support parts into suitability node except for the waste containers, which were going to be put in the recycling node to sync it with Universal Storage. However, my declutter script bases everything off the first life support parts that are unlocked, thus allowing the player to switch to the waste container configuration without having to unlock the recycling node. Is it possible to limit certain options to specific tech nodes?\n\u003E Such as...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     MODULE{    name = InterstellarTextureSwitch2    objectNames = MyContainer    nextButtonText = Next Container    prevButtonText = Previous Container    textureRootFolder = ThunderAerospace/TacLifeSupportContainers/    textureNames = Texture;FoodTexture;WaterTexture;OxygenTexture;WasteTexture    textureDisplayNames = Life Support;Food;Water;Oxygen;Waste    useFuelSwitchModule = true    fuelTankSetups = 0;1;2;3;4    showInfo = false    techRequired = survivability;survivability;survivability;survivability;recycling}MODULE{    name = InterstellarFuelSwitch    resourceNames = Food,Water,Oxygen;Food;Water;Oxygen;Waste,WasteWater,CarbonDioxide    resourceAmounts = 113.2,74.8,11466.9;240;240;53072.3;19.5,180.9,18800.1    initialResourceAmounts = 113.2,74.8,11466.9;240;240;53072.3;0,0,0    tankCost = 27.8;57.4;0.2;3;0    displayCurrentTankCost = true    hasGUI = false    showInfo = true    techRequired = survivability;survivability;survivability;survivability;recycling}\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E ...or something similar\n\u003E \n\u003E I can see this being useful for configuring tanks for fuels that aren\u0027t available early at the begining of the tech tree, but are unlocked later.\n\nYes, This is a planned feature. I need it as well for KSPI-E. Now that I know other want it as will I make it more urgent"},{"CreatedByName":"reaperrising","CreatedById":138082,"CreatedDateTime":"2015-09-08T20:08:27Z","Content":"Hmm well if anyone knows how to help me please do as while i can do it i make lots of mistakes. I have absolutely no clue what I need to change to fix my issue. I never had this issue before and now its just making it nearly impossible for me to make a heavy SSTO of a design I like. I have both the latest firespitter dll as is used by OPT and this mod.\n\nEdit I tried making a new config file and removing this mod for a bit. Did nothing other then show me the issue. This mod is overwriting the firespitter fuel switcher. Now anyone know how to fix this?\n\n**Edited \u003Ctime datetime=\u00222015-09-09T02:20:38Z\u0022 title=\u002209/09/2015 02:20  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 9, 2015\u003C/time\u003E by reaperrising**"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-09-12T16:37:58Z","Content":"[h=2]Version 1.16 for Kerbal Space Program 1.0.4[/h] Released on 2015-09-12\n\n- Removed debug messages\n- Added better support for multi switch parts\n- Cleaned empty files and folders\n- Updated CRP to 4.4"},{"CreatedByName":"Gryphon","CreatedById":58513,"CreatedDateTime":"2015-09-12T21:31:42Z","Content":"Just a note that Nertea\u0027s [Mark IV Spaceplane System](https://forum.kerbalspaceprogram.com/threads/101699-1-04-Mark-IV-Spaceplane-System-The-redo-everything-update-bigger-and-better-%2824-07-15%29) uses IFS, but it\u0027s not on the list in the OP."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-09-13T22:56:40Z","Content":"thanks"},{"CreatedByName":"MatterBeam","CreatedById":133334,"CreatedDateTime":"2015-09-15T23:46:21Z","Content":"Hi.\n\nI\u0027m interested in making a configurable engine. I understand that I\u0027d need to use InterstellarMeshSwitch and InterstelarTextureSwitch? \n\nI kinda know how to make models using the 0.23 Part Tools in Blender. Is there something I have to do differently in Blender before I start exploring the .cfg file side of things?"},{"CreatedByName":"StahnAileron","CreatedById":139783,"CreatedDateTime":"2015-09-16T06:13:09Z","Content":"I have an idea after mucking a bit with mm.cfg\u0027s, looking at the FS and IFS codes for OPT and CryoEngines, respectively (I was modding OPT\u0027s fuelled wings to allow LF/OX as well). This may be hard/impossible with the way KSP is, but maybe this could be feasible in 1.1 with the supposed UI changes. After looking at the IFS cfg Nertea did for his CryoFuels and seeing those in effect in-game, I\u0027m a fan of IFS.\n\nAnyway, here\u0027s the thought:\n\nWould it be possible to has a part config that simply lets you define max amount in a tank (probably based on the standard LF/OX numbers; it\u0027s a point I get to later on), the number of fuel types in the tank, and let you (dynamically) assign the ratio of fuel mix in-game? The actual max amount would be a tweakable in-game so you can set a lower max (like current in-game).\n\nAs an example:\n\nI want to built a spaceplane. I need both LF and OX, but a bit more LF than the stock ratio (9 LF:11 OX) to feed the jets I\u0027ll use for initial ascent. This means I need at least 2 tanks: 1 standard LF/OX and another LF-only. Now say I only need this to hit LKO (maybe it\u0027s just a Space Station Shuttle), so it doesn\u0027t need much fuel overall. For argument\u0027s sake, say I make this really compact and light and use just the small MK2 tanks: 180/220 LF/OX \u002B 400 LF. I\u0027m now carrying too much LF and not enough OX (maybe...) But this is the bear minimum I can try (well, stock anyway. How realistic this is, someone can try I guess). I can lower the LF in the LF-only tank, but I still can\u0027t change the OX amount with this set up.\n\nWith the idea I\u0027m thinking of, instead of getting fixed amounts of each fuel per tank, you could set the ratios instead and have the plug-in crunch the numbers for you. So instead of 2 tanks, I use just a single large MK2 tank, which holds 800 units total. You can set a default ratio in the module definition(s), but it\u0027s tweakable in-game. In this case, it would default to a 2-fuel tank with a 9:11 ratio, LF:OX. In-game, I could tweak the max total fuel to less that full (like we can now). For the fuels themselves, I tweak the ratios. So instead of 9:11, maybe I set it to like 3:2, resulting in 480:320 LF/OX mix. Now I have a better spaceplane fuel amounts. (A single fuel-type tank would be made by setting one of the ratio numbers to zero). Another tweakable would be what fuels types (and how many: LF/OX/MP tank for example) are allowed in the tank (probably handled like how IFS/FS currently switch fuels). This allows fully adjustable multi-fuel tanks. Modifiers to part stats (cost, mass) would be handled like they are now. (Maybe can scale costs/mass based on ratio as well? Different fuels require differently handling/storage requirements. That would affect costs/mass based on how much you\u0027re storing, no?)\n\nHOWEVER! Some fuels (basically anything non-stock) don\u0027t share this simple ratio between fuel units. An example would be Nertea\u0027s mods: Hydrogen and Argon used FAR bigger numbers and ratios (now that I think about it, I think Xenon is in the same boat there...) For this, you could add a multiplier to fuel amounts in addition to the ratio system. This should solve that issue for those types of fuels. Example: A Hydrogen/OX MK2 large tank would give a 100x multiplier to Hydrogen after doing the ratio calculations for 800 units based on a LF/OX style ratio. Nertea essentially does this for CryoEngines\u0027 IFS Fuel mm config.\n\nI do realize this my be needlessly complicated. A know a lot of people that work better with raw numbers. Ratios don\u0027t readily click with them. (I\u0027ve helped as a math tutor.) I imagine there might be similar players in the KSP userbase. Maybe this could an option/tweakable toggle: Use Ratio Mode.\n\n...Well, this seems like a useful idea in my head.\n\nWould IFS be able to implement something like this? If not now, then maybe for consideration after the 1.1 overhaul? Would it even be worth it to implement something like this? (Did any of this even make sense?)\n\nAnyway, just a thought/suggestion. Feel free to shoot it down."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-09-17T06:58:40Z","Content":"Hey FreeThinker, I think I\u0027ve found a bug -- it looks like something in KSP is adding the original mass to the mass that IFS calculates. Easy way to check: install IFS on a stock game, put a stack gas tank in the editor, empty the contents (monoprop and argon), and observe that the Engineer\u0027s Report reads 0.5 tons more than the dry mass reported in the right-click menu. The seems to get even more confused as I add parts with alt-left-click.\n\nThis may be a stock bug with the editor, since Kerbal Engineer and the Tracking Station report the correct mass, but the wrong mass is also shown in the list of ships that pops up when I click on the launchpad at KSC, and I suspect that in a career save, this may have ramifications for allowing or preventing me from launching a vessel with fuel-switching parts."},{"CreatedByName":"SyberSmoke","CreatedById":73912,"CreatedDateTime":"2015-09-22T23:17:01Z","Content":"Hello FreeThinker, I have an issue but think it is not with your mod. I have your mod installed, but the stock tanks do not allow fuel switching. From previous posts this could be a bad actor that is preventing the stock tanks from being modded.\n\nI have looked in the MM config cache and looked at the stock tanks and it is indeed true your line of code is missing. But MRS tanks can be swapped. So I was wondering if you would happen to know who is being naughty?\n\n    Right now I have these installed:ChattererCommunity Resource PackContracts WindowDMagicKASKISMechJeb2Modular Rocket SystemNear Future Construction, Electrical, Props, Propulsion, SolarHex TrussStage RecoveryStation Parts ExpansionAlt Resource PanelTweak ScaleUmbra Space mods (Karbonite, OKS/MKS, LS, Karb\u002B. Sounding Rockets)Universal Storage\n\nAny help would be appreciated, thanks. Note list is not exhaustive, dependencies are not listed like Firespitter and the such.\n\nEDIT: This is supposed to work with stock right...I did not miss something because I have pulled out all the mods but MM and this and I still can not swap stock. Even wiped the MM files and nada...hurm.\n\n**Edited \u003Ctime datetime=\u00222015-09-22T23:52:33Z\u0022 title=\u002209/22/2015 11:52  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 22, 2015\u003C/time\u003E by SyberSmoke**"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2015-09-22T23:55:24Z","Content":"AFAIK, unless you create a custom cfg yourself, the IFS module isn\u0027t applied to stock tanks. There is nothing in the download that applies itself to anything, it\u0027s just the plugin that allows you to. MRS tanks can be swapped probably because they have a special config that allows switching if IFS is installed. No-one\u0027s being naughty, you just haven\u0027t told anyone what to do ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"SyberSmoke","CreatedById":73912,"CreatedDateTime":"2015-09-23T00:29:34Z","Content":"\u003E \n\u003E AFAIK, unless you create a custom cfg yourself, the IFS module isn\u0027t applied to stock tanks. There is nothing in the download that applies itself to anything, it\u0027s just the plugin that allows you to. MRS tanks can be swapped probably because they have a special config that allows switching if IFS is installed. No-one\u0027s being naughty, you just haven\u0027t told anyone what to do ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nI see...hurm...well...a custom cfg...you say. Well that explains that...sadly I have the skills of a newborn when it comes to any type of scripting stuff so I will use something else I guess."},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2015-09-23T00:32:35Z","Content":"\u003E \n\u003E sadly I have the skills of a newborn when it comes to any type of scripting stuff so I will use something else I guess.\n\nThis will allow you to change any fuel tank into one containing either LF, O, or LFO:\n\n    // Adds InterstellarFuelSwitch to stock tanks// 5.5*total LFO@PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!RESOURCE[MonoPropellant],!MODULE[InterstellarFuelSwitch]]:Final {%LF = #$RESOURCE[LiquidFuel]/maxAmount$%OX = #$RESOURCE[Oxidizer]/maxAmount$%totalCap = #$RESOURCE[LiquidFuel]/maxAmount$@totalCap \u002B= #$RESOURCE[Oxidizer]/maxAmount$%tempVar = 0%dryCost = 0@dryCost = #$cost$%LFCost = 0%OXCost = 0%mixLFCost = 0// compute cost of stock tank fuel@tempVar = #$RESOURCE[LiquidFuel]/maxAmount$@tempVar *= 0.8@mixLFCost \u002B= #$tempVar$@tempVar = #$RESOURCE[Oxidizer]/maxAmount$@tempVar *= 0.18@mixLFCost \u002B= #$tempVar$@dryCost -= #$mixLFCost$@cost -= #$mixLFCost$// Cost LF only@tempVar = #$totalCap$@tempVar *= 0.8@LFCost \u002B= #$tempVar$// Cost OX only@tempVar = #$totalCap$@tempVar *= 0.18@OXCost \u002B= #$tempVar$@tempVar = 0MODULE {name = InterstellarFuelSwitchresourceNames = LiquidFuel,Oxidizer;LiquidFuel;OxidizerresourceAmounts = #$../LF$,$../OX$;$../totalCap$;$../totalCap$tankCost = #$../mixLFCost$;$../LFCost$;$../OXCost$displayCurrentTankCost = truehasGUI = trueshowInfo = trueavailableInFlight = falseavailableInEditor = truebasePartMass = #$../mass$tankMass = 0;0;0}!RESOURCE[LiquidFuel] {}!RESOURCE[Oxidizer] {}}"},{"CreatedByName":"billkerbinsky","CreatedById":136995,"CreatedDateTime":"2015-09-23T00:37:11Z","Content":"\u003E \n\u003E AFAIK, unless you create a custom cfg yourself, the IFS module isn\u0027t applied to stock tanks.\n\nThere are configs in the [Cryo Engines](https://forum.kerbalspaceprogram.com/threads/117766) part pack which apply IFS fuel switching to most tanks.\n\nThe files are in GameData/CryoEngines/Patches; see in particular CryoEnginesFuelTankSwitcher.cfg"},{"CreatedByName":"SyberSmoke","CreatedById":73912,"CreatedDateTime":"2015-09-23T03:39:42Z","Content":"Wish something like this had been posted to the front page...for us lay person players."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-09-24T05:48:59Z","Content":"\u003E \n\u003E Hey FreeThinker, I think I\u0027ve found a bug -- it looks like something in KSP is adding the original mass to the mass that IFS calculates. Easy way to check: install IFS on a stock game, put a stack gas tank in the editor, empty the contents (monoprop and argon), and observe that the Engineer\u0027s Report reads 0.5 tons more than the dry mass reported in the right-click menu. The seems to get even more confused as I add parts with alt-left-click.\n\u003E This may be a stock bug with the editor, since Kerbal Engineer and the Tracking Station report the correct mass, but the wrong mass is also shown in the list of ships that pops up when I click on the launchpad at KSC, and I suspect that in a career save, this may have ramifications for allowing or preventing me from launching a vessel with fuel-switching parts.\n\nSeem to me Engineer\u0027s Report is bugged. There seems to be an update issue where Engineer report is not properly updated."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-09-28T17:20:20Z","Content":"[h=2]Version 1.17 for Kerbal Space Program 1.0.4[/h] Released on 2015-09-28\n\n- Fixed the harmless error message \u0022invalid float: tankCost [len:0]\u0022 during KSP startup\n- Shows empty mass during Flight"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-10-04T01:13:54Z","Content":"Dear FreeThinker,\n\nYour inbox is full. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nI\u0027d like to include this with my one of my Mods to make use of the mesh switching module. As I understand it I should just include the folder itself, after obtaining permission, anything else I\u0027d need to do?"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-10-05T08:33:58Z","Content":"No need to get permission, the license allows you to use it any you want, it is just helpfull for me to maintain compatibility with exsiting mods and warn the mod developors of anything that might break due to changes. It\u0027s more of a precautionary measure.\n\n**Edited \u003Ctime datetime=\u00222015-10-05T09:04:46Z\u0022 title=\u002210/05/2015 09:04  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 5, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2015-10-08T06:49:18Z","Content":"Bug:\n\nI\u0027m using Color Coded Canisters and FuelTanks\u002B but I **think** this may be your issue. The \u0022locked\u0022 status doesn\u0027t seem to be remembered on your tank setups. So I lock the LFO on a tank and Save and Reload the craft and it is unlocked."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-10-11T08:54:47Z","Content":"locked? I was not aware there is any locked function in IFS. Perhapas you ment something different or another mod is at work here\n\n**Edited \u003Ctime datetime=\u00222015-10-15T09:08:55Z\u0022 title=\u002210/15/2015 09:08  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 15, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"Thorbane","CreatedById":76234,"CreatedDateTime":"2015-10-11T23:42:36Z","Content":"Is it possible to adjust the dry mass scaling on tanks that use this?"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-10-12T19:22:24Z","Content":"Yes there is. There are 2 variables which control scaling: massExponent and volumeExponent. By default they scale with exponent 3 (volume), you can override these vales either tank drymass with massExponent and/or tank wetmass with volumeExponent."},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2015-10-13T05:31:55Z","Content":"\u003E \n\u003E locked? I was not aware there is any locked function in IFS. Perhpas you ment something different or another mod is at work here\n\nNo, that\u0027s the problem. The fuel locking is in stock, but with IFS installed, it\u0027s status does not persist. I\u0027ll do some more testing and see if I can\u0027t confirm it is IFS. It could be the way CCC is configuring it. It\u0027s hard for me to tell.\n\nEDIT:\n\nDefinitely somehow related to IFS. Here is what it looks like without IFS. If I save the craft and re-load it later, this tank stays locked (that tank is meant to be a refill tank for the lander so I want it not used, using IFS it is supposed to be the only one there with Oxidizer because it is a NERV stage).\n\n\u003E ![zIlnRvP.png](http://i.imgur.com/zIlnRvP.png)\n\nHowever, if I install IFS again, saving and loading the craft results in the tanks being unlocked. Again, I don\u0027t know enough about your mod to know that it isn\u0027t CCC mis-configuring it somehow, if you think that is it I can take it over to his thread. No matter what I do as long as IFS is installed, the tanks will be unlocked every time I reload the craft.\n\n\u003E ![NZc2yL5.png](http://i.imgur.com/NZc2yL5.png)\n\n**Edited \u003Ctime datetime=\u00222015-10-13T05:44:10Z\u0022 title=\u002210/13/2015 05:44  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 13, 2015\u003C/time\u003E by Alshain**"}]}