{"TopicId":192048,"ForumId":34,"TopicTitle":"[1.4.3 \u0026lt;= KSP \u0026lt;= 1.12.5] KSP Recall - 0.5.0.2- 2024-0521","CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2020-03-01T08:43:09Z","PageNum":9,"Articles":[{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-07T03:02:14Z","Content":"\n\u003Ch2 style=\u0022background-color:#ffffff;border-bottom-color:#cccccc;border-bottom-style:solid;border-bottom-width:1px;color:#000000;font-size:24px;padding:0px;\u0022\u003E\nANNOUNCE\n\u003C/h2\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#000000;font-size:14px;\u0022\u003E\n\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/releases/tag/RELEASE%2F0.1.0.1\u0022 rel=\u0022external nofollow\u0022\u003EKSP Recall 0.1.0.1\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Eis on the Wild, featuring:\n\u003C/p\u003E\n\u003Cul style=\u0022background-color:#ffffff;color:#000000;font-size:14px;\u0022\u003E\u003Cli\u003E\nMinor revision to make life easier for Package Managers as \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003E\u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E\u003C/abbr\u003E.\n\u003Cul\u003E\u003Cli\u003E\nWill allow installing on any KSP \u0026gt;= 1.4.1, even by not having (yet :P) any fix for them.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nCloses Issues:\n\u003Cul\u003E\u003Cli\u003E\n\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/issues/14\u0022 rel=\u0022external nofollow\u0022 style=\u0022color:#4183c4;\u0022\u003E#14\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003EMake Recall safe to be installed on any KSP version instead of yelling about not being compatible\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nAll Distributions Channels are up to date.\n\u003C/p\u003E\n\u003Cp\u003E\nCheers!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-07T17:25:34Z\u0022 title=\u002204/07/2021 05:25  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 7, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003E\u0026quot;All your base are belong to me\u0026quot; feelings...\n\u003C/span\u003E\n"},{"CreatedByName":"pmborg","CreatedById":198861,"CreatedDateTime":"2021-04-08T11:19:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223950273\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221617764534\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 4/7/2021 at 4:02 AM, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Ch2 style=\u0022background-color:#ffffff;border-bottom-color:#cccccc;border-bottom-style:solid;border-bottom-width:1px;color:#000000;font-size:24px;padding:0px;\u0022\u003E\nANNOUNCE\n\u003C/h2\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#000000;font-size:14px;\u0022\u003E\n\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/releases/tag/RELEASE%2F0.1.0.1\u0022 rel=\u0022external nofollow\u0022\u003EKSP Recall 0.1.0.1\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Eis on the Wild, featuring:\n\u003C/p\u003E\n\u003Cul style=\u0022background-color:#ffffff;color:#000000;font-size:14px;\u0022\u003E\u003Cli\u003E\nMinor revision to make life easier for Package Managers as \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003E\u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E\u003C/abbr\u003E.\n\u003Cul\u003E\u003Cli\u003E\nWill allow installing on any KSP \u0026gt;= 1.4.1, even by not having (yet :P) any fix for them.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nCloses Issues:\n\u003Cul\u003E\u003Cli\u003E\n\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/issues/14\u0022 rel=\u0022external nofollow\u0022 style=\u0022color:#4183c4;\u0022\u003E#14\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003EMake Recall safe to be installed on any KSP version instead of yelling about not being compatible\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nAll Distributions Channels are up to date.\n\u003C/p\u003E\n\u003Cp\u003E\nCheers!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHello \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/187168-lisias/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022187168\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/187168-lisias/\u0022 rel=\u0022\u0022\u003E@Lisias\u003C/a\u003E !\n\u003C/p\u003E\n\u003Cp\u003E\nI confirm that on this new release, several issues \u003Cu\u003Ewere actually solved\u003C/u\u003E, which is awesome \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E, but some others are still over there.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EI hope that my logs can help:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.dropbox.com/s/laeh18h1jxn22n0/log-recall.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/laeh18h1jxn22n0/log-recall.zip?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nPrevious build log: KSP-recall-error.log\n\u003C/p\u003E\n\u003Cp\u003E\nWith this new release: KSP-with-new-release.log\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-08T13:11:14Z","Content":"\n\u003Ch2 style=\u0022background-color:#ffffff;border-bottom-color:#cccccc;border-bottom-style:solid;border-bottom-width:1px;color:#000000;font-size:24px;padding:0px;\u0022\u003E\nANNOUNCE\n\u003C/h2\u003E\n\u003Cp style=\u0022background-color:#ffffff;color:#000000;font-size:14px;\u0022\u003E\n\u003Cs\u003E\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/releases/\u0022 rel=\u0022external nofollow\u0022\u003EKSP Recall 0.1.0.2\u003C/a\u003E\u003C/s\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/releases/tag/RELEASE%2F0.1.0.3\u0022 rel=\u0022external nofollow\u0022\u003EKSP Recall 0.1.0.3\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Eis on the Wild, featuring:\n\u003C/p\u003E\n\u003Cul style=\u0022background-color:#ffffff;color:#000000;font-size:14px;\u0022\u003E\u003Cli\u003E\nPretty stupid mistake on\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ccode style=\u0022background-color:#f8f8f8;border:1px solid #eaeaea;padding:0px 5px;\u0022\u003ERefunding\u003C/code\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Efixed.\n\u003C/li\u003E\n\u003Cli\u003E\nUpdating KSPe Light.\n\u003C/li\u003E\n\u003Cli\u003E\nThe problem fixed on 1.0.2 was masking another problem on\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ccode style=\u0022background-color:#f8f8f8;border:1px solid #eaeaea;padding:0px 5px;\u0022\u003ERefunding\u003C/code\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Ethat, once fixed, regressed the over-billing problem.\n\u003Cul\u003E\u003Cli\u003E\nGameEvents related to vessels don\u0027t work as I expected.\n\u003C/li\u003E\n\u003Cli\u003E\nThe solution was to step back a bit, and risking some over-refunding on FMRS on automatic recovery.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nAll Distribution\u00A0Channels are up to date.\n\u003C/p\u003E\n\u003Cp\u003E\nCheers!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-09T21:55:16Z\u0022 title=\u002204/09/2021 09:55  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 9, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003EKSP Recall 0.1.0.3 is on the wild. All Distribution Channels are up to date.\n\u003C/span\u003E\n"},{"CreatedByName":"Krazy1","CreatedById":203523,"CreatedDateTime":"2021-04-11T16:03:51Z","Content":"\n\u003Cp\u003E\nUmm Huston, we have an over-refunding problem. I sent a rover out at \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003E\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\u003C/abbr\u003E that had a lot of deployable science in cargo.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFirst, it gave errors when I removed a Kerbal\u0027s parachute from his \u003Cabbr title=\u0022Part Action Window\u0022\u003E\u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E\u003C/abbr\u003E inventory slot -\u00A0\u003Ca href=\u0022https://i.imgur.com/wOVnS4D.png\u0022 rel=\u0022external nofollow\u0022\u003Escreenshot\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThen when I recovered, it gave me over\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E160K for a\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E120K ship. Using latest version. Nothing on the ship was modded. I have TweakScale installed but everything was stock size. KSP 1.11.2.\n\u003C/p\u003E\n\u003Cp\u003E\nSecond test: big rocket in \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003E\u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E\u003C/abbr\u003E:\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E425792\u00A0 and recovered\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E468823... which listed 96607 for Refunding. So that just does not add up at all. This rocket did have a few Tweaked parts.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-11T16:35:47Z\u0022 title=\u002204/11/2021 04:35  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 11, 2021\u003C/time\u003E by Krazy1\u003C/strong\u003E\n\u003Cbr\u003Esecond test\n\u003C/span\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-11T18:27:00Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223952753\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618157031\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUmm Huston, we have an over-refunding problem. I sent a rover out at \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003E\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\u003C/abbr\u003E that had a lot of deployable science in cargo.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFirst, it gave errors when I removed a Kerbal\u0027s parachute from his \u003Cabbr title=\u0022Part Action Window\u0022\u003E\u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E\u003C/abbr\u003E inventory slot -\u00A0\u003Ca href=\u0022https://i.imgur.com/wOVnS4D.png\u0022 rel=\u0022external nofollow\u0022\u003Escreenshot\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI confirm the Exception.\n\u003C/p\u003E\n\u003Cp\u003E\nThat is embarrassing... The code blowing up is this one:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\t\tprivate void RemoveResourceIfAvailable()\n\t\t{\n\t\t\tLog.dbg(\u0022Removing {0} from part {1}-{2}:{3:X}\u0022, RESOURCENAME, this.part.vessel.vesselName, this.part.partName, this.part.GetInstanceID());\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nReplacing the \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Ethis.part.vessel.vesselName\u003C/span\u003E thingy with a property guarding against NULLs on \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Ethis.part.vessel\u003C/span\u003E solved the exception problem - as we can see, a part loses it\u0027s vessel when moving from the Kerbal to the Storage.\n\u003C/p\u003E\n\u003Cp\u003E\n(the fix was preemptively replicated on the whole code - better safe than sorry)\n\u003C/p\u003E\n\u003Cp\u003E\nWell... I was caught with my pants down on this, but thinking a bit on the problem, it makes sense. The fix is on this \u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/commit/eecabb101883de1fb79ba9a36c9ec2b61183936e\u0022 rel=\u0022external nofollow\u0022\u003Ecommit\u003C/a\u003E, if you are \u003Cspan\u003Ecurious\u003C/span\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, after fixing this, I still got a Over-Refunding!!!!\n\u003C/p\u003E\n\u003Cp\u003E\nLong story made short, I got\u00A0\u003Cstrong\u003Etwice\u003C/strong\u003E\u00A0the intended refunding for this craft. And I know it because Refunding is traceable, and it listed 70 Funds as Refunding besides KSP giving me 140 Funds!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022114316275-37391280-9ad9-11eb-8c77-61bbd3\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114316275-37391280-9ad9-11eb-8c77-61bbd36d9a0b.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe whole history is on \u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/issues/16\u0022 rel=\u0022external nofollow\u0022\u003EIssue #16\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EI think I know what\u0027s happening - the Recovering process is\u00A0\u003Cstrong\u003Ecorrectly\u003C/strong\u003E\u00A0recovering the funds of Stored parts!\u003C/s\u003E\u003Cem\u003E[Nope! The IPartCostModifier is still being ignored on Stored parts - what we found was\u00A0\u003Cstrong\u003EA BUG INSIDE THE BUG\u003C/strong\u003E, as the Refunding Resource is being counted \u003Cb\u003ETWICE\u003C/b\u003E, damnit!]\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nJesus Christ, how many ways of doing the same freaking thing were implemented on KSP? It\u0027s no surprise the code base is so terribly bugged, they implemented the same feature many times, each one on a different way - and once something changes, God knows how may different code that was doing the same thing need to be fixed - not to mention tested!\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m working on a solution for this. Theoretically, it\u0027s simple - once the part is stored inside an Inventory Part, the Refunding must be withdrawn, and once it is removed from it, reapplied.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBut... Nothing is \u0022simple\u0022 on KSP, we just don\u0027t know how much dirty is under this carpet...\u003Cbr\u003E\u003Cem\u003E[EDIT: I will say it again:\u00A0\u003Cu\u003E\u003Cstrong\u003ENothing is \u0022simple\u0022 on KSP, we just don\u0027t know how much dirty is under this carpet...\u003C/strong\u003E\u003C/u\u003E]\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-11T19:04:50Z\u0022 title=\u002204/11/2021 07:04  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 11, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003EI was wrong, things are still more broken than I thought.\n\u003C/span\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-11T19:14:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223952753\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618157031\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFirst, it gave errors when I removed a Kerbal\u0027s parachute from his \u003Cabbr title=\u0022Part Action Window\u0022\u003E\u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E\u003C/abbr\u003E inventory slot -\u00A0\u003Ca href=\u0022https://i.imgur.com/wOVnS4D.png\u0022 rel=\u0022external nofollow\u0022\u003Escreenshot\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe NREs were fixed on latest Pre Release:\u00A0\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/releases/tag/RELEASE%2F0.1.0.4\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/net-lisias-ksp/KSP-Recall/releases/tag/RELEASE%2F0.1.0.4\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EI wil not promote it a proper release yet, because\u003C/s\u003E I\u0027m testing if the failed solution for #16 would fix by accident a situation I had foresee on FMRS (over refunding on automatic recoveries).\n\u003C/p\u003E\n\u003Cp\u003E\nYour over-refunding, however, is due another misbehaviour on KSP, that it\u0027s counting\u00A0\u003Cstrong\u003ETWICE\u003C/strong\u003E\u00A0any Resource stored on a Inventory Part.\n\u003C/p\u003E\n\u003Cp\u003E\nI will take a break in the next hours (RL is calling), but I will be on it again later. Until there, please report anything different using this pre-release.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for the heads up and sorry by the NRE.\n\u003C/p\u003E\n\u003Cp\u003E\n-- POST EDIT --\n\u003C/p\u003E\n\u003Cp\u003E\nI promoted the thing as Release, as it fixed the NRE\u00A0and a small trick solved the hypothetical problem in which third-parties Add\u0027Ons that would recover Craft themselves would bork the calculations\u00A0due the Refunding Resource stunt.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-12T10:06:29Z\u0022 title=\u002204/12/2021 10:06  AM\u0022 data-short=\u00223 yr\u0022\u003EApril 12, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003Epost edit\n\u003C/span\u003E\n"},{"CreatedByName":"Krazy1","CreatedById":203523,"CreatedDateTime":"2021-04-11T21:49:26Z","Content":"\n\u003Cp\u003E\nYeah I figured it was double-counting somehow. With Recall 0.1.0.3 it also spammed the KSP log when loading a ship in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E and once when sending a ship to the launch pad from \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E once. It usually worked without error though so I don\u0027t have steps to reproduce\u00A0it.\u00A0\u00A0It may have been related to the auto-saved ship. Message (1190 times):\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n[ERR 13:03:33.282] Module Refunding threw during OnLoad: System.NullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E\n\u00A0 at KSP_Recall.Refunds.Refunding.RemoveResourceIfAvailable () [0x00020] in \u0026lt;6a6e0cdce4694e5e9f7bc91fa34bd177\u0026gt;:0\u00A0\u003Cbr\u003E\n\u00A0 at KSP_Recall.Refunds.Refunding.OnLoad (ConfigNode node) [0x00066] in \u0026lt;6a6e0cdce4694e5e9f7bc91fa34bd177\u0026gt;:0\u00A0\u003Cbr\u003E\n\u00A0 at PartModule.Load (ConfigNode node) [0x001ab] in \u0026lt;06f13185617646e5bc801baeab53ab75\u0026gt;:0\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nI suppose we should enter a KSP bug report too if it\u0027s over refunding in stock. I expect\u00A0it will screw up on the fuel stored in an Oscar tank stored in cargo.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll get the new version later - RL also calling. Thanks\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-13T01:59:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223952903\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618177766\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 4/11/2021 at 6:49 PM, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYeah I figured it was double-counting somehow.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI figured out something interesting.\u00A0Using a debug compile of Refunding, I realised that\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EModuleInventoryPart\u003C/span\u003E\u00A0implemented \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EIPartCostModifier\u003C/span\u003E, and it\u0027s returning a cost of 35Funds (look for CalculateModulesCost below):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 22:46:13.775] [KSP-Recall-Refunding] TRACE: Recalculate kerbalEVAfemale (Valentina Kerman):FFF9DD2C\n[LOG 22:46:13.775] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(kerbalEVAfemale,ModuleInventoryPart) =\u0026gt; 35\n[LOG 22:46:13.775] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(kerbalEVAfemale,Refunding) =\u0026gt; 0\n[LOG 22:46:13.775] [KSP-Recall-Refunding] TRACE: Recalculate Results originalCost: 0.0; resourceCosts:0.0; wrongCost:0.0; rightCost:35.0; fix:35.0 ;\n[LOG 22:46:13.775] [KSP-Recall-Refunding] TRACE: UpdateResource kerbalEVAfemale:FFF9DD2C\n[LOG 22:46:13.775] [KSP-Recall-Refunding] TRACE: Test OverRefunding-Part:FFF9DD2C is not stackable\n[LOG 22:46:13.776] [KSP-Recall-Refunding] TRACE: Before PartResource 0 1 1\n[LOG 22:46:13.776] [KSP-Recall-Refunding] TRACE: After PartResource 35 0 1\n[LOG 22:46:13.776] [KSP-Recall-Refunding] TRACE: Recalculate kerbalEVA (Lulan Kerman):FFF9D762\n[LOG 22:46:13.776] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(kerbalEVA,ModuleInventoryPart) =\u0026gt; 35\n[LOG 22:46:13.776] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(kerbalEVA,Refunding) =\u0026gt; 0\n[LOG 22:46:13.776] [KSP-Recall-Refunding] TRACE: Recalculate Results originalCost: 0.0; resourceCosts:0.0; wrongCost:0.0; rightCost:35.0; fix:35.0 ;\n[LOG 22:46:13.776] [KSP-Recall-Refunding] TRACE: UpdateResource kerbalEVA:FFF9D762\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nSince Refunding tacitly assume that the\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EIPartCostModifier\u003C/span\u003E\u00A0is always ignored, it adds that 35Funds into the costFix variable (that will be used to create the \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ERefundingResource\u003C/span\u003E later). Since we have two Kerbals on the vessel, we have two Refundings of 35 Funds, ergo 70 Funds.\n\u003C/p\u003E\n\u003Cp\u003E\nSo we now have the explanation from where came that 70 Refunding.\n\u003C/p\u003E\n\u003Cp\u003E\nNow we need to find from\u00A0where\u00A0the others 70 Funds came. Logic suggests that each part that the Kerbal\u0027s\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EIPartCostModifier\u003C/span\u003E\u00A0is being honored\u003Cs\u003E\u00A0if and only if\u00A0the Kerbal has a Resource on him\u003C/s\u003E\u00A0\u003Cem\u003E[NO! Even Stock Career is broken, the Funds are being incorrectly refunded on vanilla too!]\u003C/em\u003E.\u00A0This would explain the 140 Funds on the recovery of the Vessel used for this test.\n\u003C/p\u003E\n\u003Cp\u003E\n------ POST EDIT ------\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cu\u003E\u003Cstrong\u003EHA!! It\u0027s yet another bug on KSP!!!! \u003C/strong\u003E\u003C/u\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022114486384-27f2bb80-9be4-11eb-9a1e-af3d78\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114486384-27f2bb80-9be4-11eb-9a1e-af3d788c1d93.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nResources on storage are being counted\u00A0\u003Cstrong\u003Etwice\u003C/strong\u003E. That extra \u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E70 is from KSP itself!\n\u003C/p\u003E\n\u003Cp\u003E\nSo Refunding need to detect\u00A0these situations somehow, and DEFUND the value of the Resources to get the correct value back\n\u003C/p\u003E\n\u003Cp\u003E\n--- --- POST POST EDIT -- --\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nGiven the seriousness of the situation, I made a DebugMode release for KSP-Recall 0.1.0.4 . Please, pretty please, use it only for debugging purposes.\n\u003C/p\u003E\n\u003Cp\u003E\nNote that you will need to copy the file KSPe.cfg into \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003E\u0026lt;KSP_ROOT\u0026gt;/PluginData\u003C/span\u003E folder (and\u00A0\u003Cstrong\u003Enot\u003C/strong\u003E\u00A0inside \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EGameData\u003C/span\u003E!)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-13T02:27:47Z\u0022 title=\u002204/13/2021 02:27  AM\u0022 data-short=\u00223 yr\u0022\u003EApril 13, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003EHA! ** 2\n\u003C/span\u003E\n"},{"CreatedByName":"Krazy1","CreatedById":203523,"CreatedDateTime":"2021-04-13T03:12:54Z","Content":"\n\u003Cp\u003E\nI just installed Recall 0.1.0.4 and TweakScale 2.4.5.0 on KSP 1.11.2 with many QoL mods but no other part mods*.\u00A0The new buttons to disable Refunding and Tweakscale were not touched for testing.\n\u003C/p\u003E\n\u003Cp\u003E\nFirst craft test was a simple SEQ-24 filled with cargo - nothing stackable or with anything that has it\u0027s own resources (I believe). Confirmed 100% correct funds. (Although KSP did not show the recovery summary because there was no command pod?\u00A0)\n\u003C/p\u003E\n\u003Cp\u003E\nSecond test was the notorious Refinery, maybe not exactly the version I uploaded before.\u00A0In \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003E\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E\u003C/abbr\u003E\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E19785770. Recovered\u00A0-3731203.\u00A0\u0022Kerbal 1 Jumbo... Pan Pan Pan.\u0022\u00A0\u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nConvert-o-tron\u00A0 value was 8000, same as 1x scale. Drill was 6000 also 1x value.\u00A0FL-R1\u00A0\u003Cabbr title=\u0022Reaction Control System\u0022\u003E\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E\u003C/abbr\u003E\u00A0tank value was -459000. Refunding was -34.\n\u003C/p\u003E\n\u003Cp\u003E\nThird test has 4 variations. All use a S3-14400 tank (root part) and Stayputnik. I noticed in the editor \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003E\u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E\u003C/abbr\u003E did not show \u0022Refunding for KSP111x\u0022 like it did before and does when I load the Refinery.\n\u003C/p\u003E\n\u003Cp\u003E\n3A: 1x scale tank full fuel. \u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E13300 correct.\n\u003C/p\u003E\n\u003Cp\u003E\n3B: 1x scale with no OX: \u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E11874 correct.\n\u003C/p\u003E\n\u003Cp\u003E\n3C: 5m tank\u00A0full fuel:\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E46782 in editor, recovered 13300. Same as 1x so it\u0027s ignoring TweakScale?\n\u003C/p\u003E\n\u003Cp\u003E\n3D: 5m tank no OX:\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E43403 in editor, recovered 9921. Tank value -2667. Refunding value: zero. Less than 1x scale value so I\u0027ve got no obvious theory.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso found an issue on TweakScale I\u0027ll post there. Thanks for your hard work man!\n\u003C/p\u003E\n\u003Cp\u003E\n*Edit:\u00A0I lied a little. I do have Simple Fuel Switch installed but didn\u0027t use it.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-13T04:33:11Z\u0022 title=\u002204/13/2021 04:33  AM\u0022 data-short=\u00223 yr\u0022\u003EApril 13, 2021\u003C/time\u003E by Krazy1\u003C/strong\u003E\n\u003Cbr\u003Efuel switch\n\u003C/span\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-13T04:33:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223953574\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618283574\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI just installed Recall 0.1.0.4 and TweakScale 2.4.5.0 on KSP 1.11.2 with many QoL mods but no other part mods.\u00A0The new buttons to disable Refunding and Tweakscale were not touched for testing.\n\u003C/p\u003E\n\u003Cp\u003E\nFirst craft test was a simple SEQ-24 filled with cargo - nothing stackable or with anything that has it\u0027s own resources (I believe). Confirmed 100% correct funds. (Although KSP did not show the recovery summary because there was no command pod?\u00A0)\n\u003C/p\u003E\n\u003Cp\u003E\nSecond test was the notorious Refinery, maybe not exactly the version I uploaded before.\u00A0In \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003E\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E\u003C/abbr\u003E\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E19785770. Recovered\u00A0-3731203.\u00A0\u0022Kerbal 1 Jumbo... Pan Pan Pan.\u0022\u00A0\u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI confirm the problem. Kerbodyne has a grudge with me and it\u0027s retaliating. \u003Cspan\u003E\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223953574\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618283574\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nConvert-o-tron\u00A0 value was 8000, same as 1x scale. Drill was 6000 also 1x value.\u00A0FL-R1\u00A0\u003Cabbr title=\u0022Reaction Control System\u0022\u003E\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E\u003C/abbr\u003E\u00A0tank value was -459000. Refunding was -34.\n\u003C/p\u003E\n\u003Cp\u003E\nThird test has 4 variations. All use a S3-14400 tank (root part) and Stayputnik. I noticed in the editor \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003E\u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E\u003C/abbr\u003E did not show \u0022Refunding for KSP111x\u0022 like it did before and does when I load the Refinery.\n\u003C/p\u003E\n\u003Cp\u003E\n3A: 1x scale tank full fuel. \u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E13300 correct.\n\u003C/p\u003E\n\u003Cp\u003E\n3B: 1x scale with no OX: \u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E11874 correct.\n\u003C/p\u003E\n\u003Cp\u003E\n3C: 5m tank\u00A0full fuel:\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E46782 in editor, recovered 13300. Same as 1x so it\u0027s ignoring TweakScale?\n\u003C/p\u003E\n\u003Cp\u003E\n3D: 5m tank no OX:\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E43403 in editor, recovered 9921. Tank value -2667. Refunding value: zero. Less than 1x scale value so I\u0027ve got no obvious theory.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, I have. I messed up.\n\u003C/p\u003E\n\u003Cp\u003E\nRefunding can\u0027t be applied immediately on craft launch because otherwise you will be over-billed (as the billing will count the Refunding as the price of the launch). So I had to delay the Refunding creation for some frames.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, TweakScale also has a similar problem (but due different reasons). TweakScale can\u0027t run on OnStart because at this point there\u0027s no guarantee that every other module on the part was already OnStarted, and since TweakScale needs to mangle these modules on scaling, trying to do so on OnStart will be a race condition where you don\u0027t know if the module you are scaling was already OnStarted or not.\n\u003C/p\u003E\n\u003Cp\u003E\nSo TweakScale also delays it\u0027s run a bit, it do its \u0022real\u0022 OnStart on the first Update. But Refunding does its delay on FixedUpdate - I choose it because its timing is\u00A0determinist, while the Update is variable. I think I probably caused a race condition of my own...\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m trying a quick test before bedtime - let\u0027s see if I\u0027m rigtht.\n\u003C/p\u003E\n\u003Cp\u003E\n-- -- POST EDIT -- --\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBad luck, things are not so simple. Refunding is doing its work right on Editor Time. Whatever is happening, is happening on recovering - exactly the place where I didn\u0027t expected more problems.... \u003Cspan\u003E\u003Cimg alt=\u0022:/\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon1.png\u0022 title=\u0022:/\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 01:54:05.953] [KSP-Recall-Refunding] TRACE: OnStart Size3LargeTank:FFFA573C Editor True\n[LOG 01:54:06.081] [KSP-Recall-Refunding] TRACE: OnStart probeCoreSphere.v2:FFFA5702 Editor True\n[LOG 01:54:06.183] [KSP-Recall-Refunding] TRACE: FixedUpdate Size3LargeTank:FFFA573C\n[LOG 01:54:06.184] [KSP-Recall-Refunding] TRACE: CalculateResourcesCost(Size3LargeTank,LiquidFuel) =\u0026gt; 12288.0023803713\n[LOG 01:54:06.219] [KSP-Recall-Refunding] TRACE: CalculateResourcesCost(Size3LargeTank,Oxidizer) =\u0026gt; 3379.20073852546\n[LOG 01:54:06.219] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(Size3LargeTank,ModulePartVariants) =\u0026gt; 0\n[LOG 01:54:06.219] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(Size3LargeTank,Refunding) =\u0026gt; 0\n[LOG 01:54:06.219] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(Size3LargeTank,TweakScale) =\u0026gt; 17814.82\n[LOG 01:54:06.219] [KSP-Recall-Refunding] TRACE: FixedUpdate probeCoreSphere.v2:FFFA5702\n[LOG 01:54:06.220] [KSP-Recall-Refunding] TRACE: CalculateResourcesCost(probeCoreSphere.v2,ElectricCharge) =\u0026gt; 0\n[LOG 01:54:06.220] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(probeCoreSphere.v2,Refunding) =\u0026gt; 0\n[LOG 01:54:06.220] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(probeCoreSphere.v2,TweakScale) =\u0026gt; 0\n[LOG 01:54:11.433] [KSP-Recall-Refunding] TRACE: OnSave Size3LargeTank:FFFA573C\n[LOG 01:54:11.433] [KSP-Recall-Refunding] TRACE: OnSave probeCoreSphere.v2:FFFA5702\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nHowever, I found the problem! Damn! I shoot me in the feet! \u003Cem\u003E[ All the four!! ]\u003C/em\u003E\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 01:56:03.706] [KSP-Recall-Refunding-FlightHelper] TRACE: OnVesselRecoveryRequested Untitled Space Craft\n[LOG 01:56:03.730] [KSP-Recall-Refunding] TRACE: Recalculate Size3LargeTank:FFFA26B0\n[LOG 01:56:03.730] [KSP-Recall-Refunding] TRACE: CalculateResourcesCost(Size3LargeTank,LiquidFuel) =\u0026gt; 12288.0023803713\n[LOG 01:56:03.730] [KSP-Recall-Refunding] TRACE: CalculateResourcesCost(Size3LargeTank,Oxidizer) =\u0026gt; 3379.20073852546\n[LOG 01:56:03.730] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(Size3LargeTank,ModulePartVariants) =\u0026gt; 0\n[LOG 01:56:03.730] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(Size3LargeTank,Refunding) =\u0026gt; -17814.82\t\u0026lt;\u0026lt;-- KRAP!!!!!!\n[LOG 01:56:03.730] [KSP-Recall-Refunding] TRACE: CalculateModulesCost(Size3LargeTank,TweakScale) =\u0026gt; 17814.82\n[LOG 01:56:03.730] [KSP-Recall-Refunding] TRACE: Recalculate Results originalCost: 46482.0; resourceCosts:15667.2; wrongCost:30814.8; rightCost:30814.8; fix:0.0 ;\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nNew release with this fixed in the next 30 minutes.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-13T12:18:07Z\u0022 title=\u002204/13/2021 12:18  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 13, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003Efound the problem, damn...\n\u003C/span\u003E\n"},{"CreatedByName":"Krazy1","CreatedById":203523,"CreatedDateTime":"2021-04-13T05:02:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223953535\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618279167\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGiven the seriousness of the situation, I made a DebugMode release for KSP-Recall 0.1.0.4 . Please, pretty please, use it only for debugging purposes.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI should be able to tomorrow. On Github?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223953606\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618288385\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 minutes ago, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nso on OnStart will be a race condition\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think I\u0027m having a similar problem with a little mod I\u0027m making.\u00A0I think the button I want it to click doesn\u0027t exist yet when the code tries to press it. I might be able to put it in Update. The intro tutorial mentions using a Coroutine (no idea how that works yet).\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-13T05:25:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223953611\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618290164\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI should be able to tomorrow. On Github?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYep. But use the 0.1.0.5 release,\u003Cs\u003E currently on the oven\u003C/s\u003E.\u003Cem\u003E [Released!]\u003C/em\u003E I found the problem.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223953611\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618290164\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI think I\u0027m having a similar problem with a little mod I\u0027m making.\u00A0I think the button I want it to click doesn\u0027t exist yet when the code tries to press it. I might be able to put it in Update. The intro tutorial mentions using a Coroutine (no idea how that works yet).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCoroutines were useful in the past, nowadays I\u0027m not so sure.\n\u003C/p\u003E\n\u003Cp\u003E\nBut it\u0027s simple.\u00A0Imagine a \u0022for\u00A0loop\u0022:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Efor (ever) {\n\ttry {\n\t\tdo_something();\n\t} catch (yield value) {\n\t\tsend_to_caller(value);\n\t\tcontinue;\n\t} catch (yield break) {\n\t\tbreak;\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nYou write the \u0022do_something\u0022 function, and this function returns a value each time it\u0027s called using yield, or terminate using yield break.\n\u003C/p\u003E\n\u003Cp\u003E\nHow the value is sent to the caller is the hard part, but this Unity does for you.\n\u003C/p\u003E\n\u003Cp\u003E\nUnity guarantees that your \u0022do_something\u0022 \u00A0is called only\u00A0once by frame, so this is a cheap multitasking mechanism for non\u00A0multithreaded environments (essentially what Unity was on version 3 or 4, I think). Just don\u0027t do loops inside your coroutine, or you will drag the framerate.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-13T06:00:59Z\u0022 title=\u002204/13/2021 06:00  AM\u0022 data-short=\u00223 yr\u0022\u003EApril 13, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"hendrack","CreatedById":142754,"CreatedDateTime":"2021-04-13T07:57:06Z","Content":"\n\u003Cp\u003E\nSome debugging for you to chew on, 3 crafts with screenshots and KSP log:\n\u003C/p\u003E\n\u003Cp\u003E\nrecall 1.0.4-debug:\u00A0\u003Ca href=\u0022https://disk.yandex.com/d/mOY3aS4t2q4lzQ?w=1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://disk.yandex.com/d/mOY3aS4t2q4lzQ?w=1\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nrecall 1.05-debug:\u00A0\u003Ca href=\u0022https://disk.yandex.com/d/zvWNiJOVAUF4GA?w=1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://disk.yandex.com/d/zvWNiJOVAUF4GA?w=1\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nLots of custom resources\u00A0(CRP, Rational resources, TAC-LS, WildBlueTools stuff).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-13T08:03:01Z\u0022 title=\u002204/13/2021 08:03  AM\u0022 data-short=\u00223 yr\u0022\u003EApril 13, 2021\u003C/time\u003E by hendrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-13T15:39:54Z","Content":"\n\u003Cp style=\u0022text-align:center;\u0022\u003E\n\u003Cspan style=\u0022color:#16a085;\u0022\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:26px;\u0022\u003ENOTAM\u003C/span\u003E\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nA new release, 0.1.0.6, is now available on GitHub only.\n\u003C/p\u003E\n\u003Cp\u003E\nIt (hopefully) fixes the Stock\u0027s OverRefunding problem described below and on \u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/issues/16\u0022 rel=\u0022external nofollow\u0022\u003Egithub issue #16\u003C/a\u003E.\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022187168\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed3145596896\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/192048-18/\u0026amp;do=embed\u0026amp;comment=3953535\u0026amp;embedComment=3953535\u0026amp;embedDo=findComment\u0022 style=\u0022height:261px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nTo prevent another mishap to reach the mainstream (as I foolishly did on 0.1.0.4 - \u003Cem\u003EWhat could possibly go wrong?\u003C/em\u003E), I\u0027ll keep this one only on GitHub for a few days while I give this a proper \u003Cs\u003Ebashing\u003C/s\u003E test time. As usual these days, a DebugMode is available for the brave Kerbonauts that don\u0027t fear I/O on KSP.log. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/releases/tag/RELEASE%2F0.1.0.6\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/net-lisias-ksp/KSP-Recall/releases/tag/RELEASE%2F0.1.0.6\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-13T15:41:54Z\u0022 title=\u002204/13/2021 03:41  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 13, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003EMissing link\n\u003C/span\u003E\n"},{"CreatedByName":"Krazy1","CreatedById":203523,"CreatedDateTime":"2021-04-14T05:54:24Z","Content":"\n\u003Cp\u003E\nWith 0.1.0.6 I tested basically the same 3 tests as yesterday. Any you completely flipped the results...\u00A0case 1 failed and 2 and 3 passed.\u00A0\u003Cimg alt=\u0022:o\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon2.png\u0022 title=\u0022:o\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nCargo parts value is\u00A0being cancelled, meaning the Refunding is negative the value of the stored cargo.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSpecifically, an empty SEQ-24 with a command seat on top and a kerbal (no backpack) is\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E1700 and that works correctly. Adding\u00A0 a weather analyzer should recover\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E3000 but it\u0027s still\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E1700.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-14T06:11:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954139\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618379664\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWith 0.1.0.6 I tested basically the same 3 tests as yesterday. Any you completely flipped the results...\u00A0case 1 failed and 2 and 3 passed.\u00A0\u003Cimg alt=\u0022:o\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon2.png\u0022 title=\u0022:o\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nCargo parts value is\u00A0being cancelled, meaning the Refunding is negative the value of the stored cargo.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSpecifically, an empty SEQ-24 with a command seat on top and a kerbal (no backpack) is\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E1700 and that works correctly. Adding\u00A0 a weather analyzer should recover\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E3000 but it\u0027s still\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E1700.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, I think I finally understood (famous last words).\n\u003C/p\u003E\n\u003Cp\u003E\nThe minimalistic craft used on the issue #16 was using parachutes and EVA JetPacks. These two parts are \u0022free\u0022, so only the fuel of the JetPack was being counted.\n\u003C/p\u003E\n\u003Cp\u003E\nYour new test suggests (strongly suggests. to tell you the true) that whatever is screwing up the refunding on Stock, is screwing up only on Resources - the part\u0027s \u0022dry cost\u0022 is being correctly accounted for.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, yeah... I will need to find my way on that \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EProtoPartSnapshot\u003C/span\u003E and\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EProtoPartResourceSnapshot\u003C/span\u003E stunts and do the job the hard way.\n\u003C/p\u003E\n\u003Cp\u003E\nStay tuned. I will try to publish a new release about 15 hours from now.\n\u003C/p\u003E\n"},{"CreatedByName":"Krazy1","CreatedById":203523,"CreatedDateTime":"2021-04-14T06:25:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954141\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618380661\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 minutes ago, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nStay tuned.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, don\u0027t lose sleep over cargo parts. At least it seems the \u002B/- millions is resolved.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"hendrack","CreatedById":142754,"CreatedDateTime":"2021-04-14T10:00:48Z","Content":"\n\u003Cp\u003E\nWith 0.1.0.6 I lose somewhat between 1k-10k from recovery, just call that maintenance \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-14T13:03:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954149\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618381549\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWell, don\u0027t lose sleep over cargo parts. At least it seems the \u002B/- millions is resolved.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI won\u0027t. Believe it or not, we are having a\u00A0busy week on job, and this escapades to do\u00A0\u003Cstrong\u003Eanything\u003C/strong\u003E\u00A0else ends up helping. Not being able to proper rest because you need to watch something can be terribly frustrating, so I keep a window opened on the secondary monitor to watch it and Keep Kerbaling on the main one. \u003Cspan\u003E\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EToday I need to figure out how in hell some \u0026lt;insert your favorite non-forum conforming adjective here\u0026gt; implemented a very simple thing to do on a sysvinit on a freaking systemd box. Believe me, before the end of the day we will have a new release of Recall - or someone is going be thrown through the window. \u003Cspan\u003E\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954192\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618394448\u0022 data-ipsquote-userid=\u0022142754\u0022 data-ipsquote-username=\u0022hendrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, hendrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWith 0.1.0.6 I lose somewhat between 1k-10k from recovery, just call that maintenance \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHumm.. How about an add\u0027on about financial frauds? Now and then, Funds are stollen from your recoveries, and you need to investigate before the scandal goes public and affects the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003E\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\u003C/abbr\u003E\u0027s reputation?? \u003Cimg alt=\u0022:sticktongue:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 title=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-14T13:05:14Z\u0022 title=\u002204/14/2021 01:05  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 14, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003Ehit \u0026quot;save\u0026quot; too soon.\n\u003C/span\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-14T22:12:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223954139\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618379664\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 hours ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSpecifically, an empty SEQ-24 with a command seat on top and a kerbal (no backpack) is\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E1700 and that works correctly. Adding\u00A0 a weather analyzer should recover\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E3000 but it\u0027s still\u00A0\u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E1700.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOukey, debugging time.\n\u003C/p\u003E\n\u003Cp\u003E\nI made a new test on a vanilla test bed\u00A0using that craft of yours, but with Mk0 Fuel Tank inside the SEQ. It worked fine, ir better, it borked as expected - the same 70 Funds over-refunded from the last time. So, at leats for some parts, the thing is working fine (only the already borking parts borked).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022114785737-7d99a600-9d53-11eb-88b3-51f586\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114785737-7d99a600-9d53-11eb-88b3-51f586818dee.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022114785831-9efa9200-9d53-11eb-8055-3ae4b7\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114785831-9efa9200-9d53-11eb-8055-3ae4b76c9962.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nNow I redid the test using also the Weather Analyser:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022114786609-c7cf5700-9d54-11eb-9896-15d837\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114786609-c7cf5700-9d54-11eb-9896-15d8377047fe.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022114786620-cdc53800-9d54-11eb-9af5-ccafc9\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114786620-cdc53800-9d54-11eb-9af5-ccafc98e1927.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnd no new misbehaviour, only that 70 Funds we already know about.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, yeah, this is a confirmation that your problem is 100% on \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ERefunding\u003C/span\u003E.\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-15T11:58:39Z","Content":"\n\u003Cp\u003E\nThe devil is on the details...\n\u003C/p\u003E\n\u003Cp\u003E\nI realised something interesting - late night is not exactly the better time of the day for debugging...\n\u003C/p\u003E\n\u003Cp\u003E\nI had assumed that the extra 70 Funds were coming from the EVA JetPack from the two Kerbonauts, but the true is that... WE DON\u0027T KNOW from where this Funds is coming from.\n\u003C/p\u003E\n\u003Cp style=\u0022text-align:right;\u0022\u003E\nChecking the test craft on a stock KSP, I got this:\u003Cbr\u003E\u003Cbr\u003E\u003Cimg alt=\u0022114861020-16b3d580-9dc3-11eb-851e-b400e0\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022123.02\u0022 height=\u0022497\u0022 width=\u0022404\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114861020-16b3d580-9dc3-11eb-851e-b400e03818c8.png\u0022\u003E\u003C/p\u003E\n\u003Cp style=\u0022text-align:right;\u0022\u003E\n\u003Cimg alt=\u0022114861030-1adff300-9dc3-11eb-973e-2aa348\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022122.06\u0022 height=\u0022498\u0022 width=\u0022408\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114861030-1adff300-9dc3-11eb-973e-2aa3480338c1.png\u0022\u003E\u003C/p\u003E\n\u003Cp style=\u0022text-align:right;\u0022\u003E\n\u003Cimg alt=\u0022114861159-44008380-9dc3-11eb-8de8-d49208\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002259.57\u0022 height=\u0022196\u0022 width=\u0022329\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114861159-44008380-9dc3-11eb-8de8-d4920816b27e.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nSo, it\u0027s not a surprise I was not being able to get rid of that extra 70 Funds, and ended up chasing ghosts on the\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EProtoPartSnapshot\u003C/span\u003E. This\u00A0other\u00A0bug on KSP is deep on the code on some hack made\u00A0in the past, and not on counting Resources!!\n\u003C/p\u003E\n\u003Cp\u003E\nSo I kept digging. \u00A0I launched the vehicle with only one Kerbal, and got a 35F over-refunding.\n\u003C/p\u003E\n\u003Cp\u003E\nThen I added an extra command-chair, and launched it with 3 Kerbals, and got 105F over-refunding. Appears to be consistent.\n\u003C/p\u003E\n\u003Cp\u003E\nThen I launched it again with only one Kerbal, but getting rid of the chute and of the JetPack.\u00A0No\u00A0over-refunding. Adding more Kerbals, as long they are without chutes or jetpacks gave no over-refunding neither.\n\u003C/p\u003E\n\u003Cp\u003E\nFound a pattern.\n\u003C/p\u003E\n\u003Cp\u003E\nLaunching the craft with a single Kerbal with jetpack but without chute gave me back that nameless Resource with a cost of 25F, and a 25F over-refunding.\n\u003C/p\u003E\n\u003Cp\u003E\nLaunching the craft with a single Kerbal without jetpack but with\u00A0chute gave me back that nameless Resource with a cost of 10F, and a 10F over-refunding.\n\u003C/p\u003E\n\u003Cp\u003E\nFurther testings confirmed the over-refunding being applied on a per Kerbal basis.\n\u003C/p\u003E\n\u003Cp\u003E\n25F and 10F are the prices for the JetPack and Chute, respectively.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EThat nameless Resource is a marker with the price of the equipment on the Kerbal, and it\u0027s multiplied by the number of the Kerbals on the vessel.\u003C/s\u003E\u003Cem\u003E [not quite, but near...]\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSo I launched the craft with 3 Kerbals, one with chute only, other with JetPack, and the third without any equipment.\n\u003C/p\u003E\n\u003Cp\u003E\nI got a refunding of 35F, what I expected. That weird nameless Resource happened only once, with a 10F price.\n\u003C/p\u003E\n\u003Cp\u003E\nBy adding\u00A0\u003Cstrong\u003Eanything else\u003C/strong\u003E\u00A0to a Kerbal, I got the total price of the itens over-refunded. By example, if I shove a Small Work Lamp and a EVA Fuel Cylinder to a Kerbal, I got a over-refund of 75F, the combined price of the two itens.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u00A0\u003Cstrong\u003Efinally\u003C/strong\u003E\u00A0understood. Squad added the\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EModuleInventoryPart\u003C/span\u003E\u00A0stunt\u00A0\u003Cstrong\u003Ebut didn\u0027t got rid of the older code that was handling Kerbal\u0027s inventory\u003C/strong\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nWell, I finally know what to do. I think someone had hinted something above, but I don\u0027t have time to further digging right now. I\u0027ll be back to this on the end of the day (GMT-3).\n\u003C/p\u003E\n\u003Cp\u003E\nFull details on\u00A0\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/issues/16\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/net-lisias-ksp/KSP-Recall/issues/16\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-17T01:39:52Z\u0022 title=\u002204/17/2021 01:39  AM\u0022 data-short=\u00223 yr\u0022\u003EApril 17, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003Edamnit. I need coffee. And a grammars book.\n\u003C/span\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-15T16:09:38Z","Content":"\n\u003Cp\u003E\nOne good new. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EI fixed the Over-Refunding related to Kerbals!\u00A0\u003Cstrong\u003E#hurray\u003C/strong\u003E\u00A0(not bad for a lunch break)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cstrong\u003E\u003Cimg alt=\u0022114901481-38c14e00-9deb-11eb-9087-aa4132\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114901481-38c14e00-9deb-11eb-9087-aa41320358ee.png\u0022\u003E\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cstrong\u003E\u003Cimg alt=\u0022114901497-3c54d500-9deb-11eb-812b-0db70b\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/114901497-3c54d500-9deb-11eb-812b-0db70b8d7483.png\u0022\u003E\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nCraft on \u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/issues/16\u0022 rel=\u0022external nofollow\u0022\u003Ethis comment\u003C/a\u003E on Issue #16.\n\u003C/p\u003E\n\u003Cp\u003E\nBy night I will go through the currently known Use Cases to test against regressions, and then if everything looks fine a new Release will be on the wild! \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-15T20:26:50Z\u0022 title=\u002204/15/2021 08:26  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 15, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003E(hate grammars)\n\u003C/span\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-16T14:42:38Z","Content":"\n\u003Cp\u003E\nMore or less good news... \u003Cspan\u003E\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EAlmost all the test beds passed, but one (B9PS and TweakScale), appears to have a rounding error somewhere:\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cimg alt=\u0022115039947-4d631c00-9ea7-11eb-823b-3c95d9\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/115039947-4d631c00-9ea7-11eb-823b-3c95d9b49890.png\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cimg alt=\u0022115039961-50f6a300-9ea7-11eb-9912-2e4ee0\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002260.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://user-images.githubusercontent.com/64334/115039961-50f6a300-9ea7-11eb-9912-2e4ee02f88f1.png\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003ECraft file on the comment:\u00A0\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/issues/16#issuecomment-821219507\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/net-lisias-ksp/KSP-Recall/issues/16#issuecomment-821219507\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003ESince I had ran out of modding time (by a mile, boy I need to work now!), I will rush a 0.1.0.7\u00A0Pre Release on github for people willing to test the stunt.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EI didn\u0027t tested it on FMRS neither, by the way - so don\u0027t assume the thing is fine yet (I may had borked something on the module life\u0027s cycle, I really didn\u0027t tested this specific test case).\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHappy Refundings!\n\u003C/p\u003E\n\u003Cp\u003E\n-- -- POST EDIT -- --\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPre Release 0.1.0.7 is on the wild:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/net-lisias-ksp/KSP-Recall/releases/tag/RELEASE%2F0.1.0.7\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/net-lisias-ksp/KSP-Recall/releases/tag/RELEASE%2F0.1.0.7\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis will not be promoted to release until further testings, but at least the most common cases are working fine now.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-16T15:00:31Z\u0022 title=\u002204/16/2021 03:00  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 16, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003EPre Release 0.1.0.7 .\n\u003C/span\u003E\n"},{"CreatedByName":"Krazy1","CreatedById":203523,"CreatedDateTime":"2021-04-17T04:24:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223955495\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618584158\u0022 data-ipsquote-userid=\u0022187168\u0022 data-ipsquote-username=\u0022Lisias\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Lisias said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nrounding error somewhere\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo, in the screenshots the before and after craft value was the same but the funds in the bank changed by 1 fund.\u00A0Is that what failed?\u00A0I think your \u0022customers\u0022 will be happy\u00A0with this result.\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Lisias","CreatedById":187168,"CreatedDateTime":"2021-04-17T07:58:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223955986\u0022 data-ipsquote-contentid=\u0022192048\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221618633448\u0022 data-ipsquote-userid=\u0022203523\u0022 data-ipsquote-username=\u0022Krazy1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Krazy1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo, in the screenshots the before and after craft value was the same but the funds in the bank changed by 1 fund.\u00A0Is that what failed?\u00A0I think your \u0022customers\u0022 will be happy\u00A0with this result.\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYep. \u003Cspan\u003E\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003ETo simplify things (I hadn\u0027t enough time for testing things as I want), I was cheating my funds before launch to have barely the money needed to launch the craft. If the thing costs \u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E7015\u003Cspan\u003E\u00A0\u003C/span\u003E, then I zero my account and cheat it into \u003Cimg alt=\u0022:funds:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/Funds.png\u0022 title=\u0022:funds:\u0022\u003E8000 . So, on recovery, I need to have that 8000 back. Easier to track failures without having to bean counting things! \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003ETomorrow I will reserve some time to proper test FMRS and Pay to Play (just to be on the safe side - this is the point where overconfidence usually bites me on my \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003E\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E\u003C/abbr\u003E). Everything going fine, I will release the thing into the Wild Wide Web. \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003E-- -- -- POST EDIT -- -- --\u00A0\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003EFMRS is working fine, automatic recoverings are being carried out without over or under refundings.\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003EPay to Play I\u0027m not sure, I may had screwed up something on it, as I think I\u0027m being under-refunding on recovery....\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n-- -- -- POST POST EDIT -- -- --\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFound a small and practical test case for Pay to Play, and it worked.\n\u003C/p\u003E\n\u003Cp\u003E\nI will consider 0.1.0.7 a proper release, and it will be distributed as usual from now on.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-04-17T17:09:53Z\u0022 title=\u002204/17/2021 05:09  PM\u0022 data-short=\u00223 yr\u0022\u003EApril 17, 2021\u003C/time\u003E by Lisias\u003C/strong\u003E\n\u003Cbr\u003Epost post edit\n\u003C/span\u003E\n"}]}