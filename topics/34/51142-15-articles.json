{"TopicId":51142,"ForumId":34,"TopicTitle":"[1.1.2][1-1-2] May 13-2016 EnvironmentalVisualEnhancements","CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-10-30T04:39:01Z","PageNum":15,"Articles":[{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T05:20:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022IrishBandit\u0022 data-cite=\u0022IrishBandit\u0022\u003E\u003Cdiv\u003EWith the advent of volumetric clouds, maybe this mod deserves a proper name?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMaybe once I release it. I\u0027ll probably be releasing a developer\u0027s preview for those that want to toy around with it.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2013-11-11T05:29:37Z","Content":"\n\u003Cp\u003ELike \u0022Steve\u0022?\u003C/p\u003E\u003Cp\u003EI like \u0022City Lights and Clouds\u0022 though these days it should probably be \u0022Clouds and City Lights\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"BigFatStupidHead","CreatedById":44217,"CreatedDateTime":"2013-11-11T07:20:05Z","Content":"\n\u003Cp\u003EThe clouds are not showing up correctly for me. \u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/23OFW\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is on Linux 64.\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2013-11-11T07:40:01Z","Content":"\n\u003Cp\u003ERemove all bump_texture nodes from cloudLayers.cfg - this seems to be a common issue.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T13:56:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BigFatStupidHead\u0022 data-cite=\u0022BigFatStupidHead\u0022\u003E\u003Cdiv\u003EThe clouds are not showing up correctly for me. \u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/23OFW\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is on Linux 64.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELinux doesn\u0027t like the bumpmap for whatever reason. I\u0027ll probably add a temporary solution to remove it automatically for linux users.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T15:30:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u00225thHorseman\u0022 data-cite=\u00225thHorseman\u0022\u003E\u003Cdiv\u003ELike \u0022Steve\u0022?\u003Cp\u003EI like \u0022City Lights and Clouds\u0022 though these days it should probably be \u0022Clouds and City Lights\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHaha, True. I REALLY want to create an asteroid belt too... I\u0027ll probably end up calling it \u0022Visual Enhancements\u0022 or \u0022Environmental Enhancements\u0022 in the future.\u003C/p\u003E\n"},{"CreatedByName":"Kalista","CreatedById":67544,"CreatedDateTime":"2013-11-11T15:35:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EHaha, True. I REALLY want to create an asteroid belt too... I\u0027ll probably end up calling it \u0022Visual Enhancements\u0022 or \u0022Environmental Enhancements\u0022 in the future.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWould the asteroid belt be just like the rings with just a texture? If so just like my rings request if its possible could that region be made a biome (if it even can be) for science experiments \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E .\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T15:38:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kalista\u0022 data-cite=\u0022Kalista\u0022\u003E\u003Cdiv\u003EWould the asteroid belt be just like the rings with just a texture? If so just like my rings request if its possible could that region be made a biome (if it even can be) for science experiments \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E .\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, I have an idea as to how to make them \u0022real\u0022 ie. collidable, and if the videos I saw regarding the MUN arch are any indication, you could attach a KAS grappling hook to them to \u0022land\u0022 on one of the asteroids. I\u0027d have to look into science though.\u003C/p\u003E\n"},{"CreatedByName":"BigFatStupidHead","CreatedById":44217,"CreatedDateTime":"2013-11-11T15:47:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003ELinux doesn\u0027t like the bumpmap for whatever reason. I\u0027ll probably add a temporary solution to remove it automatically for linux users.\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022a.g.\u0022 data-cite=\u0022a.g.\u0022\u003E\u003Cdiv\u003ERemove all bump_texture nodes from cloudLayers.cfg - this seems to be a common issue.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks to both of you!\u003C/p\u003E\n"},{"CreatedByName":"Kalista","CreatedById":67544,"CreatedDateTime":"2013-11-11T15:50:04Z","Content":"\n\u003Cp\u003EDo you have an idea where abouts you would stick them? Having them where Dres\u0027s orbit is with a cleared path directly on its orbit and SOI would be pretty neat similiar to how Saturn has some moons within its rings and over time have cleared their path in it .\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T15:58:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kalista\u0022 data-cite=\u0022Kalista\u0022\u003E\u003Cdiv\u003EDo you have an idea where abouts you would stick them? Having them where Dres\u0027s orbit is with a cleared path directly on its orbit and SOI would be pretty neat similiar to how Saturn has some moons within its rings and over time have cleared their path in it .\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was thinking somewhere between Duna and Jool would be good. Lots of open space there.\u003C/p\u003E\n"},{"CreatedByName":"ymir9","CreatedById":68199,"CreatedDateTime":"2013-11-11T16:08:22Z","Content":"\n\u003Cp\u003EI always figured Dres was supposed to be an analogue for Ceres, in which case it would make sense for that orbital region to be a big asteroid belt.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T16:12:56Z","Content":"\n\u003Cp\u003EYeah, I guess that might work... Its still in the conceptual stage. Once I get something working then we can figure out where to put it.\u003C/p\u003E\n"},{"CreatedByName":"Cydonia","CreatedById":53237,"CreatedDateTime":"2013-11-11T16:28:06Z","Content":"\n\u003Cp\u003EBefore I install this (awesome work by the way): Does this mod conflict with \u0027Universe Replacer\u0027 at all?\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T16:29:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cydonia\u0022 data-cite=\u0022Cydonia\u0022\u003E\u003Cdiv\u003EBefore I install this (awesome work by the way): Does this mod conflict with \u0027Universe Replacer\u0027 at all?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShouldn\u0027t, unless you are near the 4GB RAM limit.\u003C/p\u003E\n"},{"CreatedByName":"Cydonia","CreatedById":53237,"CreatedDateTime":"2013-11-11T16:35:34Z","Content":"\n\u003Cp\u003EAlright, cool! Thanks for the quick reply! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"AndreyATGB","CreatedById":62674,"CreatedDateTime":"2013-11-11T16:35:46Z","Content":"\n\u003Cp\u003EDo you know why clouds don\u0027t show up on Kerbin with the real solar system mod? They work from the building selection screen thing and from above 70 or so km but not from the surface while in flight. I haven\u0027t changed any settings on either mods.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T16:40:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AndreyATGB\u0022 data-cite=\u0022AndreyATGB\u0022\u003E\u003Cdiv\u003EDo you know why clouds don\u0027t show up on Kerbin with the real solar system mod? They work from the building selection screen thing and from above 70 or so km but not from the surface while in flight. I haven\u0027t changed any settings on either mods.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere is a value in the common config that has to be modified. It has to be scaled to whatever size Kerbin has been scaled by. You should be able to ask the guys in the Real Solar System mod for the exact values, or just try increasing it by some reasonable factor (10x?) yourself.\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2013-11-11T17:17:57Z","Content":"\n\u003Cp\u003EOK, I did some experiments with the weird interaction between steam gauges and the clouds, and it turns out that the issue is somehow caused by the lines setting texture coordinates:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EGL.TexCoord(mat.MultiplyPoint3x4(new Vector3(-xsize, ysize, 0)));\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ECommenting just those lines out, while obviously breaking the rendering of the relevant part of the HUD, also removes the effect on clouds. This suggests to me that perhaps your shader may be using some uninitialized texture (or texture coordinate) data or something; that would be the natural conclusion if all this was just plain OpenGL programming anyway. Also, when looking at this from space, it is now obvious that the actual effect is to remove the fade-out of the clouds near the horizon, so they become visible over the space background:\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/3CH3t\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T18:01:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022a.g.\u0022 data-cite=\u0022a.g.\u0022\u003E\u003Cdiv\u003EOK, I did some experiments with the weird interaction between steam gauges and the clouds, and it turns out that the issue is somehow caused by the lines setting texture coordinates:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EGL.TexCoord(mat.MultiplyPoint3x4(new Vector3(-xsize, ysize, 0)));\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ECommenting just those lines out, while obviously breaking the rendering of the relevant part of the HUD, also removes the effect on clouds. This suggests to me that perhaps your shader may be using some uninitialized texture (or texture coordinate) data or something; that would be the natural conclusion if all this was just plain OpenGL programming anyway. Also, when looking at this from space, it is now obvious that the actual effect is to remove the fade-out of the clouds near the horizon, so they become visible over the space background:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt might not be the above fade out that is the issue. I use Camera Position relative to the origin and vertex to force the alpha down to nothing once outside the sphere to prevent the undersides of the clouds from showing once above them.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E struct Input {\u003Cbr\u003E                        float2 uv_MainTex;\u003Cbr\u003E                        float2 uv_DetailTex;\u003Cbr\u003E                        float2 uv_BumpMap;\u003Cbr\u003E                        float2 viewDist;\u003Cbr\u003E                };\u003Cbr\u003E\u003Cbr\u003E                void vert (inout appdata_full v, out Input o) {\u003Cbr\u003E                        UNITY_INITIALIZE_OUTPUT(Input, o);\u003Cbr\u003E                   float3 normalDir = normalize(mul(_Object2World, v.normal.xyzz).xyz);\u003Cbr\u003E                   float3 modelCam = _WorldSpaceCameraPos;           \u003Cbr\u003E                   float3 vertexPos = mul(_Object2World, v.vertex).xyz;\u003Cbr\u003E                   float3 viewVect = normalize( vertexPos - modelCam);\u003Cbr\u003E                   float3 origin = mul(_Object2World, float4(0,0,0,1)).xyz;\u003Cbr\u003E -\u0026gt;                  float diff = distance(origin, vertexPos) - (distance(origin,_WorldSpaceCameraPos));\u003Cbr\u003E                      o.viewDist.x = saturate(.035*distance(vertexPos,_WorldSpaceCameraPos));\u003Cbr\u003E -\u0026gt;                      o.viewDist.y = saturate(diff) * saturate(saturate(.085*distance(vertexPos,_WorldSpaceCameraPos))\u002B saturate(pow(.8*_FalloffScale*dot(normalDir, -viewVect),_FalloffPow)));;\u003Cbr\u003E                 }\u003Cbr\u003E\u003Cbr\u003E                void surf (Input IN, inout SurfaceOutput o) {\u003Cbr\u003E                        half4 main = tex2D (_MainTex, IN.uv_MainTex);\u003Cbr\u003E                        half4 detail = tex2D (_DetailTex, IN.uv_DetailTex);\u003Cbr\u003E                        half3 albedo = main.rgb * (IN.viewDist.x \u002B ((1-IN.viewDist.x)*detail.rgb));// * 1.5;\u003Cbr\u003E                        o.Albedo = albedo * _Color;\u003Cbr\u003E                        half avg = (IN.viewDist.x \u002B ((1-IN.viewDist.x)*detail.a))*main.a;\u003Cbr\u003E -\u0026gt;                  o.Alpha = avg * IN.viewDist.y;\u003Cbr\u003E                  o.Normal = UnpackNormal (tex2D (_BumpMap, IN.uv_BumpMap));\u003Cbr\u003E                }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T18:04:13Z","Content":"\n\u003Cp\u003EAlso, as for the first image, I think I was a bit confused due to how it looked... I assume you were at one of the poles? I have yet to figure out a good solution for those.\u003C/p\u003E\n"},{"CreatedByName":"Oldryn","CreatedById":76611,"CreatedDateTime":"2013-11-11T18:15:40Z","Content":"\n\u003Cp\u003EThank you for enhancing my game \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EKeep it up!\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2013-11-11T19:26:58Z","Content":"\n\u003Cp\u003ELooking at the \u003Cem\u003Ecompiled\u003C/em\u003E files for your shaders on github, they appear to do lots of stuff with the tangent attribute of a vertex; however your code does not initialize \u003Ca href=\u0022http://docs.unity3d.com/Documentation/ScriptReference/Mesh-tangents.html\u0022 rel=\u0022external nofollow\u0022\u003Ethe mesh tangents\u003C/a\u003E anywhere. This might not be the cause of this particular issue, but it can\u0027t be good.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-11T19:55:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022a.g.\u0022 data-cite=\u0022a.g.\u0022\u003E\u003Cdiv\u003ELooking at the \u003Cem\u003Ecompiled\u003C/em\u003E files for your shaders on github, they appear to do lots of stuff with the tangent attribute of a vertex; however your code does not initialize \u003Ca href=\u0022http://docs.unity3d.com/Documentation/ScriptReference/Mesh-tangents.html\u0022 rel=\u0022external nofollow\u0022\u003Ethe mesh tangents\u003C/a\u003E anywhere. This might not be the cause of this particular issue, but it can\u0027t be good.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh... that could probably cause the shader issue with all the Linux folk. I was under the impression that only normals had to be assigned. I\u0027ll add that in tonight. Thanks for pointing that out. I imagine that it might cause the issue. Only one way to find out though \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kalista","CreatedById":67544,"CreatedDateTime":"2013-11-11T20:49:27Z","Content":"\n\u003Cp\u003EIf your releasing a new version may I make a small request? Since the png to tga change the city lights don\u0027t seem as bright is it possible to get them closer in brightness to how they were? I can barely make out the city lights from the Munar surface and I miss that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 alt=\u0022;.;\u0022\u003E .\u003C/p\u003E\n"}]}