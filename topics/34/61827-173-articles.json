{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":173,"Articles":[{"CreatedByName":"MAFman","CreatedById":101780,"CreatedDateTime":"2016-07-04T17:25:22Z","Content":"\n\u003Cp\u003E\nMade some tweaks, but I\u0027m still getting the same dang error...\n\u003C/p\u003E\n\u003Cp\u003E\nBoot.ks:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ESET SHIP:CONTROL:PILOTMAINTHROTTLE TO 0.\nLIGHTS OFF.\nGEAR OFF.\nBRAKES OFF.\n\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E OFF.\n\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E OFF.\n\nFUNCTION NOTIFY\n{\n\tPARAMETER message, priority.\n\tIF priority = \u0022NOMINAL\u0022\n\t{\n\t\tSET \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E TO GREEN.\n\t}\n\tELSE IF priority = \u0022ALERT\u0022\n\t{\n\t\tSET \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E TO RGB(1,0.31,0). // international orange\n\t}\n\tELSE IF priority = \u0022WARNING\u0022\n\t{\n\t\tSET \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E TO RED.\n\t}\n\tHUDTEXT(\u0022kOS: \u0022 \u002B message, 1.5, 2, 30, \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E, FALSE).\n}\n\nFUNCTION ON_DRIVE\n{\n\tPARAMETER filename, vol.\n\t\n\tSWITCH TO vol. LIST FILES in allFiles.\n\tFOR f IN allFiles\n\t{\n\t\tIF f:NAME = filename\n\t\t{\n\t\t\tSWITCH TO 1. RETURN TRUE.\n\t\t}\n\t}\n\tSWITCH TO 1. RETURN FALSE.\n}\n\n// First-pass at introducing artificial delay. ADDONS:RT:DELAY(SHIP) represents\n// the line-of-site latency to \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E, as per RemoteTech\nFUNCTION DELAY\n{\n\tSET dTime TO ADDONS:RT:DELAY(SHIP) * 3.\t// Total delay time\n\tSET accTime TO 0.\t\t\t\t\t\t// Accumulated time\n\n\tUNTIL accTime \u0026gt;= dTime\n\t{\n\t\tSET start TO TIME:SECONDS.\n\t\tWAIT UNTIL (TIME:SECONDS - start) \u0026gt; (dTime - accTime) OR NOT ADDONS:RT:HASCONNECTION(SHIP).\n\t\tSET accTime TO accTime \u002B TIME:SECONDS - start.\n\t}\n}\n\n// Get a file from \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\nFUNCTION DOWNLOAD\n{\n\tPARAMETER filename.\n\tDELAY().\n\tIF ON_DRIVE(filename, 1)\n\t{\n\t\tDELETE filename.\n\t}\n\tIF ON_DRIVE(filename, 0)\n\t{\n\t\tCOPY filename FROM 0.\n\t}\n}\n\n// Put a file on \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\nFUNCTION UPLOAD\n{\n\tPARAMETER filename.\n\tDELAY().\n\tIF ON_DRIVE(filename, 0)\n\t{\n\t\tSWITCH TO 0. DELETE filename. SWITCH TO 1.\n\t}\n\tIF ON_DRIVE(filename, 1)\n\t{\n\t\tCOPY filename TO 0.\n\t}\n}\n\n// Run a library, downloading it from \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E if necessary\nFUNCTION REQUIRE\n{\n\tPARAMETER filename.\n\tIF NOT ON_DRIVE(filename, 1)\n\t{\n\t\tDOWNLOAD(filename).\n\t}\n\tRENAME filename TO \u0022tmp.exec.ks\u0022.\n\tRUN tmp.exec.ks.\n\tRENAME \u0022tmp.exec.ks\u0022 TO filename.\n}\n\n// THE ACTUAL BOOTUP PROCESS\nSET updateScript TO SHIP:NAME \u002B \u0022.update.ks\u0022.\n\n// If we have a connection, see if there are new instructions. If so, download \n// and run them.\nIF ADDONS:RT:HASCONNECTION(SHIP)\n{\n\tIF ON_DRIVE(updateScript, 0)\n\t{\n\t\tDOWNLOAD(updateScript).\n\t\tSWITCH TO 0. DELETE updateScript. SWITCH TO 1.\n\t\tIF ON_DRIVE(\u0022update.ks\u0022, 1)\n\t\t{\n\t\t\tDELETE update.ks.\n\t\t}\n\t\tRENAME updateScript TO \u0022update.ks\u0022.\n\t\tRUN update.ks.\n\t\tDELETE update.ks.\n\t}\n}\n\n// If a startup.ks file exists on the disk, run that.\nSET bootScript TO SHIP:NAME \u002B \u0022.bootup.ks\u0022.\nIF ON_DRIVE(bootScript, 0)\n{\n\tDOWNLOAD(bootScript).\n\tRENAME bootScript TO \u0022startup.ks\u0022.\n\tRUN startup.ks.\n\tIF ON_DRIVE(\u0022startup.ks\u0022, 1)\n\t{\n\t\tSWITCH TO 1. DELETE startup.ks.\n\t}\n}\nELSE\n{\n\tWAIT UNTIL ADDONS:RT:HASCONNECTION(SHIP).\n\tWAIT 10. // Avoid thrashing the CPU (when no startup.ks, but we have a\n\t\t\t// persistent connection, it will continually reboot)\n\tREBOOT.\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nRelay.bootup.ks:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EDOWNLOAD(autoNavInit.ks).\nDOWNLOAD(autoNavIterate.ks).\nRUN autoNavInit(270).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAutoNavInit.ks:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EPARAMETER goalHeading.\nBRAKES ON.\n\nNOTIFY(\u0022Starting navigation script...Done.\u0022, \u0022NOMINAL\u0022).\nWAIT 2.5.\n\nNOTIFY(\u0022Downloading navigation instructions...Done.\u0022, \u0022NOMINAL\u0022).\nWAIT 2.5.\n\nNOTIFY(\u0022Running iterative navigator...\u0022, \u0022NOMINAL\u0022).\nSWITCH TO 0. RUN autoNav(goalHeading).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAutoNav.ks:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E// Until the goal has been reached, go through this process.\n\nPARAMETER direct.\nDRIVE_FORWARD().\nDRIVE_BACK().\nPARK().\n\n// The loop... Functions are defined below\nFUNCTION DRIVE_FORWARD\n{\n\tUNTIL FALSE\n\t{\n\t\tPOPULATE(direct).\n\t\tDECIDE_NEXT(options).\n\t\tNOTIFY(\u0022Selecting next waypoint.\u0022, \u0022NOMINAL\u0022).\n\t\tWAIT 0.5.\n\t\tDRIVE_TO(nextPoint).\n\t\tSTOP(). WAIT 5.\n\t\n\t\tIF NOT ADDONS:RT:HASCONNECTION(SHIP)\n\t\t{\n\t\t\tBREAK.\n\t\t}\n\t}\n}\n\nFUNCTION DRIVE_BACK\n{\n\tUNTIL FALSE\n\t{\n\t\tPOPULATE(360 - direct).\n\t\tDECIDE_NEXT(options).\n\t\tNOTIFY(\u0022Selecting next waypoint\u0022, \u0022NOMINAL\u0022).\n\t\tWAIT 0.5.\n\t\tDRIVE_TO(nextPoint).\n\t\tSTOP(). WAIT 5.\n\t\t\n\t\tIF ADDONS:RT:HASCONNECTION(SHIP)\n\t\t{\n\t\t\tBREAK.\n\t\t}\n\t}\n}\n\nFUNCTION THERE_YET\n{\n\tPARAMETER point.\n\t\n\tIF point:DISTANCE \u0026lt; 10\n\t{\n\t\tRETURN TRUE.\n\t}\n\tELSE\n\t{\n\t\tRETURN FALSE.\n\t}\n}\n\nFUNCTION POPULATE\n{\n\tPARAMETER hdg.\n\t\n\tSET offset_90 TO SIN(hdg) * ((360 * 100) / (BODY:RADIUS * 2 * CONSTANT:PI)). // duh\n\tSET offset_675 TO offset_90 * SIN(67.5). // 67.5 deg.\n\tSET offset_45 TO offset_90 * SIN(45). // 45 deg.\n\tSET offset_225 TO offset_90 * SIN(22.5). // 22.5 deg.\n\t\n\tSET op_A TO LATLNG(SHIP:GEOPOSITION:LAT \u002B offset_225, SHIP:GEOPOSITION:LNG - offset_675).\n\tSET op_B TO LATLNG(SHIP:GEOPOSITION:LAT \u002B offset_45, SHIP:GEOPOSITION:LNG - offset_45).\n\tSET op_C TO LATLNG(SHIP:GEOPOSITION:LAT \u002B offset_90, SHIP:GEOPOSITION:LNG).\n\tSET op_D TO LATLNG(SHIP:GEOPOSITION:LAT \u002B offset_45, SHIP:GEOPOSITION:LNG \u002B offset_45).\n\tSET op_E TO LATLNG(SHIP:GEOPOSITION:LAT \u002B offset_225, SHIP:GEOPOSITION:LNG \u002B offset_675).\n\t\n\tSET options TO LIST\n\t(\n\t\top_A, op_B, op_C, op_D, op_E\n\t).\n\t\n\tRETURN options.\n}\n\nFUNCTION SLOPE_IS_SAFE\n{\n\tPARAMETER option.\n\tSET here TO SHIP:GEOPOSITION.\n\tSET there TO option.\n\tSET slope TO ABS(ARCTAN2(there:TERRAINHEIGHT - here:TERRAINHEIGHT, lookAhead)).\n\tIF slope \u0026lt; 10\n\t{\n\t\tRETURN TRUE.\n\t}\n\tELSE\n\t{\n\t\tRETURN FALSE.\n\t}\n}\n\nFUNCTION DECIDE_NEXT\n{\n\tPARAMETER options.\n\tSET startPos TO 0.\n\tUNTIL startPos \u0026gt; options:LENGTH - 1\n\t{\n\t\tSET o TO options[startPos].\n\t\tIF SLOPE_IS_SAFE(o)\n\t\t{\n\t\t\tSET nextPoint TO o.\n\t\t\tRETURN nextPoint.\n\t\t\tBREAK.\n\t\t}\n\t\tELSE\n\t\t{\n\t\t\tSET startPos TO startPos \u002B 1.\n\t\t}\n\t}\n}\n\nFUNCTION DRIVE_TO\n{\n\tPARAMETER point.\n\t\n\tBRAKES OFF.\n\tSET spd TO 1. // Really stinkin\u0027 slow, but safe.\n\n\t// Throttle control variables\n\tSET throttlePID TO PIDLOOP(0.15, 0.05, 0.1, -1.0, 1.0).\n\tSET throttlePID:SETPOINT TO spd.\n\n\t// Steering control variables\n\tSET steerPID TO PIDLOOP(0.15, 0.05, 0.1, -1.0, 1.0).\n\tSET steerPID:SETPOINT TO point:HEADING.\n\t\n\tCLEARSCREEN.\n\t\n\tSET thrott TO 0.\n\tSET steerVal TO 0.\n\t\n\tUNTIL THERE_YET(point)\n\t{\n\t\tSET thrott TO throttlePID:UPDATE(TIME:SECONDS, SHIP:GROUNDSPEED).\n\t\tSET steerVal TO steerPID:UPDATE(TIME:SECONDS, SHIP:HEADING).\n\t\t\n\t\tLOCK WHEELTHROTTLE TO thrott.\n\t\tLOCK WHEELSTEER TO steerVal.\n\t\t\n\t\tPRINT \u0022Current Location: \u0022 \u002B ROUND(SHIP:GEOPOSITION:LAT,3) \u002B \u0022, \u0022 \u002B ROUND(SHIP:GEOPOSITION:LNG,3) at (0,3).\n\t\tPRINT \u0022Next waypoint: \u0022 \u002B ROUND(point:LAT,3) \u002B \u0022, \u0022 \u002B ROUND(point:LNG, 3) AT (0,4).\n\t\tPRINT \u0022Throttle: \u0022 \u002B ROUND(thrott, 3) AT (0,9).\n\t\tPRINT \u0022Steering:    \u0022 \u002B ROUND(steerVal,3) AT (0,10).\n\t\t\n\t\tWAIT 0.01.\n\t}\n\tSTOP().\n}\n\nFUNCTION STOP\n{\n\tIF GROUNDSPEED \u0026gt; 0.5\n\t{\n\t\tLOCK WHEELTHROTTLE TO -0.5.\n\t}\n\tELSE\n\t{\n\t\tUNLOCK WHEELTHROTTLE.\n\t\tIF NOT BRAKES\n\t\t{\n\t\t\tBRAKES ON.\n\t\t}\n\t}\n\tUNLOCK ALL. NOTIFY(\u0022Arrived!\u0022, \u0022NOMINAL\u0022).\n}\n\nFUNCTION PARK\n{\n\tSTOP().\n\tLIGHTS ON.\n\tFOR someAntenna IN SHIP:PARTSNAMED(\u0022RTLongAntenna2\u0022)\n\t{\n\t\tsomeAntenna:GETMODULE(\u0022ModuleRTAntenna\u0022):DOEVENT(\u0022activate\u0022).\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nCan someone help me find my mistake(s)?\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-07-04T18:14:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661122\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467653122\u0022 data-ipsquote-userid=\u0022101780\u0022 data-ipsquote-username=\u0022MAFman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n35 minutes ago, MAFman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan someone help me find my mistake(s)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSorry, I don\u0027t have much time on disposal to inspect every line of code, neither to try it in KSP. At first sight, everything looks OK, but oviously it is not, otherwise you would not ask for help.\u003Cbr\u003E\nOnly thing I can is to give you tip for selfhelp.\n\u003C/p\u003E\n\u003Cp\u003E\nPut some additional lines of near suspicious part of code. Just print some info, either on screen or log file that could give you a clue is something work as intended or not. Similar to those \u0022notify\u0022 lines like you already have in code.\n\u003C/p\u003E\n\u003Cp\u003E\nWithout modern debuger and code insight info too see each value in variable it is pretty much only way to find logic errors or exact spot what is problematic line of code. You will need that kind of experience anyhow if you encounter in real life problematic situatons with some piece of software that is pretty much closed black box. Not only for game purposes in kOS, but other programming areas too.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-07-04T18:51:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\n[LOG 19:11:11.259] System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n  at System.Collections.Generic.Dictionary\u00602[System.String,System.Int32].get_Item (System.String key) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at kOS.Safe.Compilation.ProgramBuilder.ReplaceLabels \u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhen you get this error (key was not present in the dictionary) and you get it being done by ProgramBuilder.ReplaceLabels() as shown here, there\u0027s a good chance it\u0027s not your fault and it\u0027s a bug in how things are being loaded into the VM by kOS.\u00A0 We\u0027ve done a lot of overhauling in that area in recent developer work so I can\u0027t tell if this problem would still exist in the next release or not unless I can re-run exactly everything you\u0027re doing in exactly the way you have been running it.\n\u003C/p\u003E\n\u003Cp\u003E\nThat would mean, starting from the same saved game, running the same program, the same way, on the same craft.\u00A0\u00A0 Some of what your program is doing looks like it\u0027s dependent on having a craft that is exactly like it expects it to be, with the same parts on it.\u00A0 (Which is why I\u0027m reluctant to give it a test.\u00A0 It\u0027s a lot of set up work for a problem that for all I know might already be fixed.)\n\u003C/p\u003E\n\u003Cp\u003E\nThe code change under the hood that may or may not have already fixed this in the development version is this one:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/pull/1657\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/pull/1657\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe old way the RUN command was implemented before that had some odd failure cases where it would crash the ProgramBuilder.ReplaceLabels method.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you aren\u0027t in a position to be able to compile the kOS C# code yourself, I could try to give you a temporary ZIP file you can try to use to re-install kOS and it would give you the development version as-is (possible problems and all), and it might let you test if you still have this problem or not.\u00A0 I\u0027m a bit reluctant to do this, though, as I don\u0027t think we\u0027re that far away from having a more official proper release anyway, and spending time on this problem would detract from getting that release out, which might fix it anyway.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-04T19:25:53Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/63481-steven-mading/\u0026amp;do=hovercard\u0022 data-mentionid=\u002263481\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/63481-steven-mading/\u0022 rel=\u0022\u0022\u003E@Steven Mading\u003C/a\u003E\u00A0I\u0027d be happy to do a build to save developer time. \u00A0The mod I\u0027m currently developing can\u0027t release until the next kOS release happens, anyways.\n\u003C/p\u003E\n"},{"CreatedByName":"MAFman","CreatedById":101780,"CreatedDateTime":"2016-07-05T04:15:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661231\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467658309\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen you get this error (key was not present in the dictionary) and you get it being done by ProgramBuilder.ReplaceLabels() as shown here, there\u0027s a good chance it\u0027s not your fault and it\u0027s a bug in how things are being loaded into the VM by kOS.\u00A0 We\u0027ve done a lot of overhauling in that area in recent developer work so I can\u0027t tell if this problem would still exist in the next release or not unless I can re-run exactly everything you\u0027re doing in exactly the way you have been running it.\n\u003C/p\u003E\n\u003Cp\u003E\nThat would mean, starting from the same saved game, running the same program, the same way, on the same craft.\u00A0\u00A0 Some of what your program is doing looks like it\u0027s dependent on having a craft that is exactly like it expects it to be, with the same parts on it.\u00A0 (Which is why I\u0027m reluctant to give it a test.\u00A0 It\u0027s a lot of set up work for a problem that for all I know might already be fixed.)\n\u003C/p\u003E\n\u003Cp\u003E\nThe code change under the hood that may or may not have already fixed this in the development version is this one:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/pull/1657\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/pull/1657\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe old way the RUN command was implemented before that had some odd failure cases where it would crash the ProgramBuilder.ReplaceLabels method.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you aren\u0027t in a position to be able to compile the kOS C# code yourself, I could try to give you a temporary ZIP file you can try to use to re-install kOS and it would give you the development version as-is (possible problems and all), and it might let you test if you still have this problem or not.\u00A0 I\u0027m a bit reluctant to do this, though, as I don\u0027t think we\u0027re that far away from having a more official proper release anyway, and spending time on this problem would detract from getting that release out, which might fix it anyway.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027d be super excited for a new patch version! \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E I think I\u0027ll wait until the official release.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661231\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467658309\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen you get this error (key was not present in the dictionary) and you get it being done by ProgramBuilder.ReplaceLabels() as shown here, there\u0027s a good chance it\u0027s not your fault and it\u0027s a bug in how things are being loaded into the VM by kOS.\u00A0 We\u0027ve done a lot of overhauling in that area in recent developer work so I can\u0027t tell if this problem would still exist in the next release or not unless I can re-run exactly everything you\u0027re doing in exactly the way you have been running it.\n\u003C/p\u003E\n\u003Cp\u003E\nThat would mean, starting from the same saved game, running the same program, the same way, on the same craft.\u00A0\u00A0 Some of what your program is doing looks like it\u0027s dependent on having a craft that is exactly like it expects it to be, with the same parts on it.\u00A0 (Which is why I\u0027m reluctant to give it a test.\u00A0 It\u0027s a lot of set up work for a problem that for all I know might already be fixed.)\n\u003C/p\u003E\n\u003Cp\u003E\nThe code change under the hood that may or may not have already fixed this in the development version is this one:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/pull/1657\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/pull/1657\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe old way the RUN command was implemented before that had some odd failure cases where it would crash the ProgramBuilder.ReplaceLabels method.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you aren\u0027t in a position to be able to compile the kOS C# code yourself, I could try to give you a temporary ZIP file you can try to use to re-install kOS and it would give you the development version as-is (possible problems and all), and it might let you test if you still have this problem or not.\u00A0 I\u0027m a bit reluctant to do this, though, as I don\u0027t think we\u0027re that far away from having a more official proper release anyway, and spending time on this problem would detract from getting that release out, which might fix it anyway.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI can send you my save game and rover.craft if you want to try it. I\u0027m also using RemoteTech and the RT Communotron 32, which is the only non-stock part on the rover.\n\u003C/p\u003E\n"},{"CreatedByName":"MAFman","CreatedById":101780,"CreatedDateTime":"2016-07-06T20:58:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222661231\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467658309\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 7/4/2016 at 1:51 PM, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen you get this error (key was not present in the dictionary) and you get it being done by ProgramBuilder.ReplaceLabels() as shown here, there\u0027s a good chance it\u0027s not your fault and it\u0027s a bug in how things are being loaded into the VM by kOS.\u00A0 We\u0027ve done a lot of overhauling in that area in recent developer work so I can\u0027t tell if this problem would still exist in the next release or not unless I can re-run exactly everything you\u0027re doing in exactly the way you have been running it.\n\u003C/p\u003E\n\u003Cp\u003E\nThat would mean, starting from the same saved game, running the same program, the same way, on the same craft.\u00A0\u00A0 Some of what your program is doing looks like it\u0027s dependent on having a craft that is exactly like it expects it to be, with the same parts on it.\u00A0 (Which is why I\u0027m reluctant to give it a test.\u00A0 It\u0027s a lot of set up work for a problem that for all I know might already be fixed.)\n\u003C/p\u003E\n\u003Cp\u003E\nThe code change under the hood that may or may not have already fixed this in the development version is this one:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/pull/1657\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/pull/1657\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe old way the RUN command was implemented before that had some odd failure cases where it would crash the ProgramBuilder.ReplaceLabels method.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you aren\u0027t in a position to be able to compile the kOS C# code yourself, I could try to give you a temporary ZIP file you can try to use to re-install kOS and it would give you the development version as-is (possible problems and all), and it might let you test if you still have this problem or not.\u00A0 I\u0027m a bit reluctant to do this, though, as I don\u0027t think we\u0027re that far away from having a more official proper release anyway, and spending time on this problem would detract from getting that release out, which might fix it anyway.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat folder in GitHub is the Program-Builder in?\n\u003C/p\u003E\n"},{"CreatedByName":"MAFman","CreatedById":101780,"CreatedDateTime":"2016-07-06T21:21:41Z","Content":"\n\u003Cp\u003E\nFound it! Also found the log line where the error happened...\n\u003C/p\u003E\n\u003Cp\u003E\nApparently, it tried to get a key from System.Collections.Generic.Dictionary\u00602 and it didn\u0027t find it. What is the difference between Dictionary and Dictionary\u00602?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, shouldn\u0027t the code try to access just System.Collections.Generic.Dictionary?\n\u003C/p\u003E\n\u003Cp\u003E\nWhy is it saying AddObjectParts(IEnumerable\u00601 parts)[0x00000] in \u0026lt;filename unknown\u0026gt;:0 ? Especially the \u0026lt;filename unknown\u0026gt;? I\u0027m guessing it should be \u0022in \u0026lt;autonav\u0026gt;:0\u0022 or something.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 13:51:15.203] kOS: FunctionCopy: Volume: 1 Direction: to Filename: autonav.ks\n[LOG 13:51:15.728] kOS: At autonavinit.ks on 1, line 17\nRUN autoNav(direct).\n^\nCalled from startup.ks on 1, line 20\nRUN autoNavInit(270).\n^\nCalled from boot.ks on 1, line 139\n\t\t\tRUN startup.ks.\n   ^\nCalled from boot.ks on 1, line 153\n\t\t\tRUN startup.ks.\n   ^\nCalled from sys:boot, line 1\n(Can\u0027t show source line)\n^\n\n[LOG 13:51:15.730] System.Collections.Generic.KeyNotFoundException: The given key was not present in the dictionary.\n  at System.Collections.Generic.Dictionary\u00602[System.String,System.Int32].get_Item (System.String key) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at kOS.Safe.Compilation.ProgramBuilder.ReplaceLabels (System.Collections.Generic.List\u00601 program) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at kOS.Safe.Compilation.ProgramBuilder.BuildProgram () [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at kOS.Safe.Execution.ProgramContext.AddObjectParts (IEnumerable\u00601 parts) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at kOS.Function.FunctionLoad.Execute (kOS.SharedObjects shared) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at kOS.Function.FunctionManager.CallFunction (System.String functionName) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at kOS.Safe.Execution.CPU.CallBuiltinFunction (System.String functionName) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at kOS.Safe.Compilation.OpcodeCall.StaticExecute (ICpu cpu, Boolean direct, System.Object destination, Boolean calledFromKOSDelegateCall) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at kOS.Safe.Compilation.OpcodeCall.Execute (ICpu cpu) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n  at kOS.Safe.Execution.CPU.ExecuteInstruction (IProgramContext context, Boolean doProfiling) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0 \n[LOG 13:51:15.735] Code Fragment\nFile                 Line:\u003Cabbr title=\u0022Center of Lift\u0022\u003E\u003Cabbr title=\u0022Center of Lift\u0022\u003ECol\u003C/abbr\u003E\u003C/abbr\u003E IP   label   opcode operand\n====                 ====:=== ==== ================================  \n1/startup.ks           20:17  0740 @0736   push 270 \n1/startup.ks           20:17  0741 @0737   call 674 \n1/startup.ks           20:17  0742 @0738   pop \n                        0:0   0743         push 0 \n                        0:0   0744         return 0 deep \n1/autonavinit.ks       17:1   0745 @0739   push $program-autonav* \n1/autonavinit.ks       17:1   0746 @0740   exists \n1/autonavinit.ks       17:1   0747 @0741   br.false \u002B4 \n1/autonavinit.ks       17:1   0748 @0742   br.false \u002B11 \n1/autonavinit.ks       17:1   0749 @0743   push 0 \n1/autonavinit.ks       17:1   0750 @0744   return 0 deep \n1/autonavinit.ks       17:1   0751 @0745   pop \n1/autonavinit.ks       17:1   0752 @0746   push $program-autonav* \n1/autonavinit.ks       17:1   0753 @0747   push _KOSArgMarker_ \n1/autonavinit.ks       17:1   0754 @0748   push autonav \n1/autonavinit.ks       17:1   0755 @0749   push null \n1/autonavinit.ks       17:1   0756 @0750   call load() \u0026lt;\u0026lt;--INSTRUCTION POINTER--\n1/autonavinit.ks       17:1   0757 @0751   pop \n1/autonavinit.ks       17:1   0758 @0752   store \n1/autonavinit.ks       17:1   0759 @0753   call $program-autonav* \n1/autonavinit.ks       17:1   0760 @0754   pop \n1/autonavinit.ks       17:1   0761 @0755   push 0 \n1/autonavinit.ks       17:1   0762 @0756   return 0 deep \n1/autonavinit.ks        1:11  0763 @0757   push direct \n1/autonavinit.ks        1:11  0764 @0758   swap \n1/autonavinit.ks        1:11  0765 @0759   storelocal \n1/autonavinit.ks        1:11  0766 @0760   argbottom \n1/autonavinit.ks        2:1   0767 @0761   push $brakes \n1/autonavinit.ks        2:8   0768 @0762   push True \n1/autonavinit.ks        2:8   0769 @0763   store \n1/autonavinit.ks        3:1   0770 @0764   push _KOSArgMarker_ \n1/autonavinit.ks        3:11  0771 @0765   push 1 \n1/autonavinit.ks        3:11  0772 @0766   call switch() \u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFOUND IT! In the function ReplaceLabels(), there\u0027s a variable\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Evar labels = new Dictionary\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;string\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E, \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eint\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIt\u0027s complaining because the string parameter is missing. Looking further down the code, there\u0027s an if statement that is not being met, and it doesn\u0027t have an \u0022else\u0022:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eprivate void ReplaceLabels(List\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Opcode\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E program)\n        {            \n            var labels = new Dictionary\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;string\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E, \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eint\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n\n            // get the index of every label\n            for (int index = 0; index \u0026lt; program.Count; index\u002B\u002B)\n            {\n                if (program[index].Label != string.Empty)\n                {\n                    if (labels.ContainsKey(program[index].Label))\n                    {\n                        if (program[index].Label.EndsWith(\u0022-default\u0022))\n                            continue;\n                        // This is one of those \u0022should never happen\u0022 errors that if it happens\n                        // it means kOS devs screwed up - so dump the partially relabeled program\n                        // to the log just to help in diagnosing the bug report that may happen:\n                        //\n                        Utilities.SafeHouse.Logger.LogError(\u0022=====Relabeled Program so far is: =========\u0022);\n                        Utilities.SafeHouse.Logger.LogError(Utilities.Debug.GetCodeFragment(program));\n\n                        throw new Exceptions.KOSCompileException(LineCol.Unknown(), string.Format(\n                            \u0022ProgramBuilder.ReplaceLabels: Cannot add label {0}, label already exists.  Opcode: {1}\u0022, program[index].Label, program[index].ToString()));\n                    }\n                    labels.Add(program[index].Label, index);\n                }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nYou should have an \u0022else\u0022 condition to \u0022if (program[index].Label != string.Empty) { //stuff}\u0022 as well as \u0022if(labels.containsKey(program[index].Label)){//More stuff}\n\u003C/p\u003E\n\u003Cp\u003E\nLesson: If you have an IF(), always follow it with ELSE().\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-06T21:32:20Z\u0022 title=\u002207/06/2016 09:32  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 6, 2016\u003C/time\u003E by MAFman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-07T01:01:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222660226\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467591422\u0022 data-ipsquote-userid=\u0022101780\u0022 data-ipsquote-username=\u0022MAFman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 7/3/2016 at 8:17 PM, MAFman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOk, here\u0027s the log file... I finally found it... (at least the part with the kOS error.)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, I found the problem. \u00A0I don\u0027t know why it\u0027s true, but \u0060unlock all\u0060 doesn\u0027t appear to do anything, but it screws up function declaration. \u00A0It literally compiles as a \u0060NOP\u0060 opcode, which is essentially \u0022don\u0027t do anything, just move to the next instruction\u0022. \u00A0I\u0027m pretty sure it was supposed to go away at the same time as \u0060unset all\u0060. \u00A0That being said, it is still documented as working. \u00A0If you simply exit the program, there is no need to make this call anyways, since all flight controls automatically unlock upon returning to the terminal.\n\u003C/p\u003E\n\u003Cp\u003E\nBasically, remove the one reference to \u0060unlock all.\u0060 from inside the \u0060stop\u0060 function, and you should compile. \u00A0Oh, and never use it again!\u00A0\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u00A0We\u0027ll have to update the docs, and kill it once and for all.\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-07T01:45:58Z","Content":"\n\u003Cp\u003E\nOdd, your post some how crossed mine... even though I refreshed before posting. \u00A0Anyways, I\u0027ll respond to your comments, but my above post still applies.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222664088\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467840101\u0022 data-ipsquote-userid=\u0022101780\u0022 data-ipsquote-username=\u0022MAFman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, MAFman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFound it! Also found the log line where the error happened...\n\u003C/p\u003E\n\u003Cp\u003E\nApparently, it tried to get a key from System.Collections.Generic.Dictionary\u00602 and it didn\u0027t find it. What is the difference between Dictionary and Dictionary\u00602?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, shouldn\u0027t the code try to access just System.Collections.Generic.Dictionary?\n\u003C/p\u003E\n\u003Cp\u003E\nWhy is it saying AddObjectParts(IEnumerable\u00601 parts)[0x00000] in \u0026lt;filename unknown\u0026gt;:0 ? Especially the \u0026lt;filename unknown\u0026gt;? I\u0027m guessing it should be \u0022in \u0026lt;autonav\u0026gt;:0\u0022 or something.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is a result of the use of Generics. \u00A0Essentially C# does some fancy things to dynamically create the type definition for the dictionary based on the Type data that was passed to it. \u00A0So our code accesses a \u0060Dictionary\u0026lt;string, int\u0026gt;\u0060 which the compiler then defines as \u0060System.Collections.Generic.Dictionary\u00602\u0060\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, MAFman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFOUND IT! In the function ReplaceLabels(), there\u0027s a variable\n\u003C/p\u003E\n\u003Cp\u003E\n[...]\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s complaining because the string parameter is missing. Looking further down the code, there\u0027s an if statement that is not being met, and it doesn\u0027t have an \u0022else\u0022:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nActually, I added some debugging statements and this is not the section of code that throws the error. \u00A0The applicable code is here:\u00A0\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/blob/develop/src/kOS.Safe/Compilation/ProgramBuilder.cs#L235\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/blob/develop/src/kOS.Safe/Compilation/ProgramBuilder.cs#L235\u003C/a\u003E\u00A0You\u0027ll notice that the code section you cited is actually protected by checking for an empty string before using it as a key, and it checks the dictionary to make sure it contains the key before attempting to use it. \u00A0The line I cited has no such protection, and can only be triggered in very rare circumstances (like using \u0060unlock all.\u0060 with functions). \u00A0I almost added a better error message here about 6 months back, but got busy working on other things including fixing another bug that was causing this same message.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, MAFman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou should have an \u0022else\u0022 condition to \u0022if (program[index].Label != string.Empty) { //stuff}\u0022 as well as \u0022if(labels.containsKey(program[index].Label)){//More stuff}\n\u003C/p\u003E\n\u003Cp\u003E\nLesson: If you have an IF(), always follow it with ELSE().\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSince this if condition isn\u0027t the problem, an else won\u0027t fix it. \u00A0More importantly,\u00A0\u003Cstrong\u003Ean if\u00A0statement\u00A0does not always need an else\u003C/strong\u003E. \u00A0In our particular instance, we have an implicit else: \u0022if this condition is true, continue to the next loop.\u0022 which will skip the section of code that follows \u0022throw an error\u0022. \u00A0Because \u0022continue\u0022 skips the rest of the loop, it\u0027s the same as saying \u0022if this condition is true, continue to the next loop, else throw an error\u0022. \u00A0And there are plenty of practical times where no else condition is required at all. \u00A0\u0022create a new variable x equal to 1, if the current time is after noon, set x equal to 2\u0022 is perfectly valid.\n\u003C/p\u003E\n\u003Cp\u003E\nI wanted to take a moment to point this out specifically because kOS tends to attract, and focus on, new programmers. \u00A0I don\u0027t want to have a bunch of people now think that they absolutely need an else for every if. \u00A0I\u0027m gonna find a whole lot of user scripts that read \u0060if true { doSomething(). } else { doNothing()\u00A0}\u0060. \u00A0I appreciate that you were walking through our code, and thought you found the error, but speaking in general absolutes can often be taken out of context and confuse others.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-07-07T19:29:48Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:20px;\u0022\u003E\u003Ca href=\u0022https://www.reddit.com/r/Kos/comments/4rqdj1/twitch_devs_show_kos_v100_utc_time_20160708_2100/\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022color:#006400;\u0022\u003ETwitch devs show kOS v1.0.0 UTC time 2016-07-08 21:00 (Friday)\u003C/span\u003E\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:18px;\u0022\u003EStream Channel: \u003Ca href=\u0022https://www.twitch.tv/dunbaratu\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.twitch.tv/dunbaratu\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWith \u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003E\u003Cspan style=\u0022color:rgb(75,0,130);\u0022\u003EkOS v1.0.0\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E coming up \u003Cem\u003EReal Soon Now (tm)\u003C/em\u003E, we decided to do a stream on \u003Cstrong\u003E\u003Cspan style=\u0022color:#0000CD;\u0022\u003ETwitch\u003C/span\u003E\u003C/strong\u003E of new things, with an eye toward Q\u0026amp;A about it.\u00A0 Come along and see what important things are changing and have a chance to ask about it.\n\u003C/p\u003E\n\u003Cp\u003E\nWe intend this to be timed very close to the release of kOS v1.0.0.\u00A0 The release might go out just a few hours before, or just a few hours after, the stream itself.\u00A0 In any case the release is expected to be roughly co-incident with the stream. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nUnlike the release, for the stream we figured it was more important to announce a predictable time ahead of time (thus this message) because it\u0027s live interaction.\u00A0 With the actual release, well, it comes out whenever we happen to have gotten all the last pieces in place (changelogs, documentation updates, etc).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003EThis is in no way a binding promise to get the release out at the expected time!!\u003C/em\u003E\u00A0 Who knows what might be found in those last few hours of work before it goes out.\u00A0 It could be something that is a showstopper.\u00A0 We\u0027d \u003Cem\u003ELIKE\u003C/em\u003E to get it out at the same time as the stream.\u00A0 We don\u0027t \u003Cem\u003EPROMISE\u003C/em\u003E to do so however.\n\u003C/p\u003E\n\u003Cp\u003E\nThe stream will be broadcast here: \u003Ca href=\u0022https://www.twitch.tv/dunbaratu\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.twitch.tv/dunbaratu\u003C/a\u003E\u003Cbr\u003E\nAnd include at least 2 of the devs on microphone:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nDunbaratu (Also known as Steven Mading here on the forums, AKA \u0022me\u0022)\n\u003C/li\u003E\n\u003Cli\u003E\nHvacengi\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nThe duration is unknown.\u00A0 It depends on questions and interaction.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-07T21:53:00Z\u0022 title=\u002207/07/2016 09:53  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 7, 2016\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003Cbr\u003EJust removed the math entirely. The title says 21:00 UTC, that should be enough.\n\u003C/span\u003E\n"},{"CreatedByName":"meyerweb","CreatedById":135212,"CreatedDateTime":"2016-07-07T19:43:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222665597\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467919788\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 minutes ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor reference, 21:00 UTC-5 Friday is:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n\u00A0\u00A0\u00A0 - Berlin: 11pm\n\u003C/li\u003E\n\u003Cli\u003E\n\u00A0\u00A0\u00A0 - UK: 10pm\n\u003C/li\u003E\n\u003Cli\u003E\n\u00A0\u00A0\u00A0 - New York: 6pm\n\u003C/li\u003E\n\u003Cli\u003E\n\u00A0\u00A0\u00A0 - Los Angeles: 3pm\n\u003C/li\u003E\n\u003Cli\u003E\n\u00A0\u00A0\u00A0 - Sydney: Saturday 8pm\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSomething\u2019s off with at least the American times listed: 2100 UTC can\u2019t be 1800 NYC, as that\u2019s only a three-hour difference.\u00A0 Currently NYC is UTC-0400 (and it\u2019s UTC-0500 in winter), so if this really is happening 2100 UTC tomorrow, it will be at 5pm New York time.\u00A0 LA is similarly off, more likely 2pm than 3pm.\u00A0 Not sure about the rest.\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-07T19:49:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222665618\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467920628\u0022 data-ipsquote-userid=\u0022135212\u0022 data-ipsquote-username=\u0022meyerweb\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, meyerweb said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSomething\u2019s off with at least the American times listed: 2100 UTC can\u2019t be 1800 NYC, as that\u2019s only a three-hour difference.\u00A0 Currently NYC is UTC-0400 (and it\u2019s UTC-0500 in winter), so if this really is happening 2100 UTC tomorrow, it will be at 5pm New York time.\u00A0 LA is similarly off, more likely 2pm than 3pm.\u00A0 Not sure about the rest.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe indicated time was UTC-5, not UTC.\n\u003C/p\u003E\n\u003Cp\u003E\nThat said, if the actual time zone is Eastern Daylight Time (Eastern Standard Time is UTC-5), the US times are correct as listed and the other timezones are possibly off. \u00A0If EDT isn\u0027t the origin time zone, then we\u0027ll have to wait for \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/63481-steven-mading/\u0026amp;do=hovercard\u0022 data-mentionid=\u002263481\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/63481-steven-mading/\u0022 rel=\u0022\u0022\u003E@Steven Mading\u003C/a\u003Eto correct us\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"meyerweb","CreatedById":135212,"CreatedDateTime":"2016-07-07T19:54:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222665627\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467920991\u0022 data-ipsquote-userid=\u002296372\u0022 data-ipsquote-username=\u0022dewin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, dewin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe indicated time was UTC-5, not UTC.\n\u003C/p\u003E\n\u003Cp\u003E\nThat said, if the actual time zone is Eastern Daylight Time (Eastern Standard Time is UTC-5), the US times are correct as listed and the other timezones are possibly off. \u00A0If EDT isn\u0027t the origin time zone, then we\u0027ll have to wait for \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/63481-steven-mading/\u0026amp;do=hovercard\u0022 data-mentionid=\u002263481\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/63481-steven-mading/\u0022 rel=\u0022external\u0022\u003E@Steven Mading\u003C/a\u003Eto correct us\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, that doesn\u2019t work either.\u00A0 2100 UTC-5 would be 10pm NYC time, because UTC-5 is currently the US Central time zone, one hour behind NYC.\u00A0 Even if they meant the Eastern US time zone under DST, as it presently is, 2100 is still 9pm, not 5pm.\u00A0 Further, the top-of-post time given is 2100 UTC, not 2100 UTC-5.\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-07T20:01:35Z","Content":"\n\u003Cp\u003E\nThat\u0027ll teach me to not read the entire post before replying. \u00A0Yeah. \u00A0It\u0027s just plain wrong \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-07-07T20:18:08Z","Content":"\n\u003Cp\u003E\nI might not be able watch live stream, but I would appretiate if you cover some of stuff in it:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nDmagic science part support\n\u003C/li\u003E\n\u003Cli\u003E\nIR part sequencer support (with respect to latest available changes in IR mod)\n\u003C/li\u003E\n\u003Cli\u003E\ngamebalance changes - power consuption vs IPU, earler/later kOS parts\n\u003C/li\u003E\n\u003Cli\u003E\nreintroduction of LaserDist mod, some folks might be even forget that it exist, it can be combined with IR parts if possible\n\u003C/li\u003E\n\u003Cli\u003E\nfine tune PID for built in STEER command (not to be confused with custom PIDloop and raw pilot input)\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nBesides that, whatever is new/changed from last version of kOS. Also, Steven always have some nice math methods to show how things were done, like how slope is calculated that more falls into general math category, rather than kOS programming itself. Some of things I never learned trough formal education and for some there is never real life purpose for using it until there is need for it in KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nA link for recorded stream will be appreciated too, don\u0027t be discouraged if there was not many watchers on live stream, plenty of kOS users are scatered trough various time zones.\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-07T20:33:24Z","Content":"\n\u003Cp\u003E\nOne of the new kOS features is proper support for external addons, in that other addons can now add structures that you can access from your kOS scripts. \u00A0This means that rather than waiting for kOS to provide support for a mod, it is now\u00A0possible for a mod to provide support for kOS (or a third mod that supports both).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142979-indev-kipc-inter-processor-communication-between-kos-and-krpc/\u0022 rel=\u0022\u0022\u003EI\u0027m actually working on a mod that takes advantage of this\u003C/a\u003E, with the primary goal of talking between kOS and KRPC. \u00A0(Though it will probably include communication between kOS Processors as a freebie, and that portion doesn\u0027t require KRPC).\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-07T20:58:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222665690\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467923604\u0022 data-ipsquote-userid=\u002296372\u0022 data-ipsquote-username=\u0022dewin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, dewin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nwill probably include communication between kOS Processors as a freebie\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInter-processor and inter-vessel communication is included as part of this next release. \u00A0I\u0027m sorry that I haven\u0027t had any opportunity yet to look at your mod and see if I have any useful comments or pointers, but I do mean to do that soon. \u00A0I also have a sample addon prepared that I intend to make available so that other modders can see the recommended workflow. \u00A0I\u00A0just need to add a simple reflection interface so that people won\u0027t have to dig through the really complicated IR or RT addons to understand how to use reflection to access an api.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222665670\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467922688\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 minutes ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI might not be able watch live stream, but I would appretiate if you cover some of stuff in it:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMost of those items are not specific to v1.0.0. \u00A0While we\u0027re happy to discuss them, the new features will be the main focus of the stream. \u00A0If we don\u0027t have few enough questions that we can kind of pick a direction, we\u0027ll definitely keep that list in mind though. \u00A0If we don\u0027t get to it, Stephen\u00A0tries to stream regularly so ping us with a reminder and I\u0027m sure that he can find a way to fit it into one of his other streams.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222665618\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467920628\u0022 data-ipsquote-userid=\u0022135212\u0022 data-ipsquote-username=\u0022meyerweb\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n59 minutes ago, meyerweb said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSomething\u2019s off with at least the American times listed: 2100 UTC can\u2019t be 1800 NYC, as that\u2019s only a three-hour difference.\u00A0 Currently NYC is UTC-0400 (and it\u2019s UTC-0500 in winter), so if this really is happening 2100 UTC tomorrow, it will be at 5pm New York time.\u00A0 LA is similarly off, more likely 2pm than 3pm.\u00A0 Not sure about the rest.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m scheduled for 5PM (17:00)\u00A0EDT (UTC-4, local time for me),\u00A04PM (16:00) CDT (UTC-5, local to Stephen), 9PM (21:00) UTC. \u00A0Feel free to extrapolate the other time zones from that. \u00A0I\u0027ll ping him in chat to update it.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-07-07T21:44:43Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222665618\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467920628\u0022 data-ipsquote-userid=\u0022135212\u0022 data-ipsquote-username=\u0022meyerweb\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, meyerweb said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSomething\u2019s off with at least the American times listed: 2100 UTC can\u2019t be 1800 NYC, as that\u2019s only a three-hour difference.\u00A0 Currently NYC is UTC-0400 (and it\u2019s UTC-0500 in winter), so if this really is happening 2100 UTC tomorrow, it will be at 5pm New York time.\u00A0 LA is similarly off, more likely 2pm than 3pm.\u00A0 Not sure about the rest.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat\u0027s off is that I originally typed in my time in my local time zone as 16:00 UTC-5, then decided it was better to just post the UTC time, so I converted it to 21:00 for UTC, but then neglected to change the label from \u0022UTC-5\u0022 to just \u0022UTC\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nAdd to that the fact when I composed the message yesterday and saved it as draft, I was planning on a different start time and when I changed the start time to the one I went with in the end, I didn\u0027t edit all the cities\u0027 times to match that edit.\u00A0 In the end it was an inconsistent mess.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I meant was this:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EI live in UTC-5, my local time is going to be 16:00 when I stream.\u00A0 That will be 21:00 in UTC\u002B0.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve edited and corrected the post now.\u00A0 Thanks for catching it.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-07T21:59:59Z\u0022 title=\u002207/07/2016 09:59  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 7, 2016\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-07-07T21:55:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222665670\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467922688\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nthere is never real life purpose for using it until there is need for it in KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nA link for recorded stream will be appreciated too, don\u0027t be discouraged if there was not many watchers on live stream, plenty of kOS users are scatered trough various time zones.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFor this reason I plan to not have the background music I usually have when I stream.\u00A0 I want the recorded video to be un-muted for people who have to watch it later.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-07T23:08:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222665736\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467925088\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nInter-processor and inter-vessel communication is included as part of this next release. \u00A0I\u0027m sorry that I haven\u0027t had any opportunity yet to look at your mod and see if I have any useful comments or pointers, but I do mean to do that soon.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHeh, looking through my mod probably won\u0027t find much at this point anyways as it\u0027s not really at a functional level yet\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027ll be interesting to look at your inter-(processor,vessel) communication bits though; it might change how I approach the kRPC bridge -- particularly if I can just treat kRPC clients as a \u0027virtual\u0027 vessel of sorts rather than everything else that I\u0027m doing.\u00A0 Some key differences I\u0027m seeing poking at the github docs:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nI\u0027m using a different mechanism for serialization than kOS\u0027s inbuilt one, so there are different restrictions on what constitutes a valid message. \u00A0(Notable: Mine uses something like \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003E{\u0022type\u0022: \u0022vessel\u0022, \u0022data\u0022: \u0022vesselguid\u0022}\u003C/span\u003E as its mechanism for representing everything except\u00A0primitives, and can properly handle things like a particular list being referenced in multiple places (or referencing itself). \u00A0The output is generally more compact than kOS\u0027s format)\n\u003C/li\u003E\n\u003Cli\u003E\nParts are serializable in my implementation.\n\u003C/li\u003E\n\u003Cli\u003E\nI don\u0027t implement actual message queues to keep things simple and avoid \u0027leaked\u0027 messages in the case of a kRPC client never checking for them. \u00A0Instead, a given processor has at most one inbound and one outbound message and mechanisms for atomically setting either field. \u00A0A given processor can both \u0022send\u0022 (setting its outbound message) and \u0022send to\u0022 (setting another processor\u0027s inbound message), the two are separate queues. \u00A0The kRPC side has no inbound/outbound message -- it communicates by examining the outbound field of other processors or setting their inbound fields.\n\u003C/li\u003E\n\u003Cli\u003E\nRT is ignored completely, but this is true for kRPC in general. \u00A0In-game-wise, this can be explained as kRPC being additional processing power on the same vessel -- though one could totally \u0022cheat\u0022 at remotetech with this (kOS from one ship -\u0026gt; kRPC -\u0026gt; kOS to ship far away/out of communications range with no latency).\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nNow that I think about it more, I might just stash my current code somewhere and start from sort-of-scratch using the kOS API, focusing solely on the kRPC bridge (which was my original intent). \u00A0I knew that inter-vessel/processor communication was on the kOS roadmap but had no idea it was going to be in this release.\n\u003C/p\u003E\n\u003Cp\u003E\nOh, one convenience feature I\u0027m seeing missing from the current kOS implementation: My implementation had a notion of a message ID or count of received/sent messages or whatnot -- mainly so that messages can be processed in the background(ish) by doing something like:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EON something:messagerxcount { // changes every time we receive a new message.\n   handleMessage();\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe only way I see to do that in the current implementation is to do ON messagequeue:length, but there\u0027s a lot of complexities in that particular case. \u00A0(Also, a count of \u0022packets\u0022 tx/rx\u00A0would be neat anyways).\n\u003C/p\u003E\n\u003Cp\u003E\nThough now I almost wonder if a future version of kOS should have a proper event system. \u00A0As I understand ON, it\u0027s examining an output every update and firing when it changes -- as opposed to a more passive \u0022sleep until I\u0027m awoken, event X\u00A0wakes me up\u0022 system.\n\u003C/p\u003E\n"},{"CreatedByName":"seamus2849","CreatedById":162548,"CreatedDateTime":"2016-07-08T01:31:48Z","Content":"\n\u003Cp\u003E\nLooking for some help as I am trying to write some ascent and plane-change scripts. What I want is for the craft to burn until the apoapsis is located directly above the equator. I have been doing some basic research, but I am brand new to KoS and computer language in general and having some tough times. Here is what I have been trying:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E//First I tried the general POSITIONAT(SHIP, APOAPSIS), but then saw a negative return on the Y, \n//so I tried to minus the SHIP:BODY:POSITION to get a good  value, but then realized the Y value it returned was not a readout of the latitude\n//I then tried this, but again, to no avail\n\nSET varname TO POSITIONAT(SHIP, APOAPSIS) - SHIP:BODY:POSITION.\n\nWAIT UNTIL varname:Y \u0026lt; 1000.\nLOCK THROTTLE TO .2. \n\nWAIT UNTIL varname:Y \u0026lt; 100.\nLOCK THROTTLE TO 0.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nDoes anyone know a better way of telling KoS what my future latitude will be at Apoapsis? (while burning)\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-08T01:43:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222666122\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467941508\u0022 data-ipsquote-userid=\u0022162548\u0022 data-ipsquote-username=\u0022seamus2849\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, seamus2849 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDoes anyone know a better way of telling KoS what my future latitude will be at Apoapsis? (while burning)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSince KSP doesn\u0027t have axial tilt, latitude is (IIRC):\n\u003C/p\u003E\n\u003Cp\u003E\nARCSIN(position:y / position:mag)\n\u003C/p\u003E\n\u003Cp\u003E\nwhere position is your relative position to the planet. \u00A0(If the magnitude of your position somehow is 0, latitude is technically\u00A0undefined and you have bigger problems.)\n\u003C/p\u003E\n\u003Cp\u003E\nLatitude for a given true anomaly value is:\n\u003C/p\u003E\n\u003Cp\u003E\nARCSIN(SIN(trueanomaly \u002B argumentofperiapsis) * SIN(inclination))\n\u003C/p\u003E\n\u003Cp\u003E\nTrue anomaly at periapsis is 0, at apoapsis is 180. \u00A0Thus, you can do ARCSIN(SIN(180 \u002B argumentofperiapsis) * SIN(inclination)) to get latitude at apoapsis without even needing to use POSITIONAT.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-08T01:46:08Z\u0022 title=\u002207/08/2016 01:46  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 8, 2016\u003C/time\u003E by dewin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"seamus2849","CreatedById":162548,"CreatedDateTime":"2016-07-08T03:11:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222666143\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221467942209\u0022 data-ipsquote-userid=\u002296372\u0022 data-ipsquote-username=\u0022dewin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n37 minutes ago, dewin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSince KSP doesn\u0027t have axial tilt, latitude is (IIRC):\n\u003C/p\u003E\n\u003Cp\u003E\nARCSIN(position:y / position:mag)\n\u003C/p\u003E\n\u003Cp\u003E\nwhere position is your relative position to the planet. \u00A0(If the magnitude of your position somehow is 0, latitude is technically\u00A0undefined and you have bigger problems.)\n\u003C/p\u003E\n\u003Cp\u003E\nLatitude for a given true anomaly value is:\n\u003C/p\u003E\n\u003Cp\u003E\nARCSIN(SIN(trueanomaly \u002B argumentofperiapsis) * SIN(inclination))\n\u003C/p\u003E\n\u003Cp\u003E\nTrue anomaly at periapsis is 0, at apoapsis is 180. \u00A0Thus, you can do ARCSIN(SIN(180 \u002B argumentofperiapsis) * SIN(inclination)) to get latitude at apoapsis without even needing to use POSITIONAT.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the quick post and great math!\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI plugged that in and the\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nARCSIN(SIN(trueanomaly \u002B argumentofperiapsis) * SIN(inclination))\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\ndoes provide a reading of my vessel current latitude, but I have to add \u0022ship:orbit:\u0022 in front of the argumentofperiapsis and inclination in order to get a readout. Am I doing it wrong still?\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-08T04:06:08Z","Content":"\n\u003Cp\u003E\nNope! \u00A0I was using descriptive variables, not quite\u00A0actual kOS code, and completely meant it as \u0022replace this value with your current (or desired) true anomaly, this value with your argument of periapsis, etc.)\n\u003C/p\u003E\n\u003Cp\u003E\nYou may want to use ship:obt:trueanomaly and ship:obt:inclination for consistency, or just use obt:* in all 3 cases (the \u0027ship:\u0027 is optional).\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, two months ago I didn\u0027t know any of the math either. \u00A0I\u0027m particularly proud of the latitude-at-anomaly function though -- other orbital formulae\u00A0I found or derived from well-known\u00A0published equations/etc somewhere, but I managed to figure out latitude entirely on my own.\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s deprecated and undocumented, but some of my stuff is here -- mostly focused on orbital math. \u00A0(lib_obt has the newest versions after i dropped the \u0022create my own representation of an orbit\u0022 bits)\u00A0\u003Ca href=\u0022https://github.com/dewiniaid/ksp-kos-scripts/commits/master\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/dewiniaid/ksp-kos-scripts/commits/master\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"CoriW","CreatedById":57866,"CreatedDateTime":"2016-07-09T13:33:05Z","Content":"\n\u003Cp\u003E\nHello, does anyone know how I\u0027d go about getting the compass heading of my prograde vector?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EEDIT:\u003C/strong\u003E\u00A0Never mind, I found this Reddit post regarding how to do this.\u00A0\u003Ca href=\u0022https://www.reddit.com/r/Kos/comments/4mkqn9/vector_heading/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.reddit.com/r/Kos/comments/4mkqn9/vector_heading/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-09T14:54:42Z\u0022 title=\u002207/09/2016 02:54  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 9, 2016\u003C/time\u003E by CoriW\u003C/strong\u003E\n\u003C/span\u003E\n"}]}