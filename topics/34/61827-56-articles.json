{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":56,"Articles":[{"CreatedByName":"madlemur","CreatedById":116597,"CreatedDateTime":"2014-08-28T18:54:22Z","Content":"\n\u003Cp\u003EUmmm... \u003C/p\u003E\u003Cp\u003ESET MyEngine TO \u0026lt;however you get your engine\u0026gt;.\u003C/p\u003E\u003Cp\u003ELOCK MyISP to MyEngine:ISP.\u003C/p\u003E\u003Cp\u003ENow, MyISP will recalculate either every update, or once every update that it\u0027s read.\u003C/p\u003E\u003Cp\u003EWhich Wiki were you reading? I suggest you use the \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/\u0022 rel=\u0022external nofollow\u0022\u003Edocumentation site\u003C/a\u003E, which is pretty good (and includes ISP). In fact, the example at the beginning of the \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structure/engine/index.html\u0022 rel=\u0022external nofollow\u0022\u003Eengine section\u003C/a\u003E steps through all the engines, and gives their ISPs.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-28T19:02:21Z\u0022 title=\u002208/28/2014 07:02  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 28, 2014\u003C/time\u003E by madlemur\u003C/strong\u003E\n\u003Cbr\u003EAdding documentation links\n\u003C/span\u003E\n"},{"CreatedByName":"postalbyke","CreatedById":114272,"CreatedDateTime":"2014-08-29T00:29:35Z","Content":"\n\u003Cp\u003EI don\u0027t \u0022\u0026lt;however i get my engine\u0026gt;\u0022, usually I maxthrust, thrust, stage:resource, add universal constants and do the math myself, but this one was a real pickle...\u003C/p\u003E\u003Cp\u003EThanks for the tip, I\u0027ll head over there now! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"postalbyke","CreatedById":114272,"CreatedDateTime":"2014-08-29T00:43:15Z","Content":"\n\u003Cp\u003ESo if I want the Isp of the engine I am currently using, I have to tell the program to go and get every engine, then figure out which one I\u0027m using (by stage or ignition), then get the Isp for that engine? Or just scan the list for a non-zero Isp... hmm...\u003C/p\u003E\u003Cp\u003Eedit: messy but effective. I try not to loop \u0022unnecessarily,\u0022 but I will accept this begrudgingly \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-29T00:47:32Z\u0022 title=\u002208/29/2014 12:47  AM\u0022 data-short=\u00229 yr\u0022\u003EAugust 29, 2014\u003C/time\u003E by postalbyke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-08-29T01:01:29Z","Content":"\n\u003Cp\u003EkOS will eventually be able to access right-click fields. ISP is something shown in the right-click menu. So at some point you\u0027ll be able to use the partname to get the ISP of the specific part\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-08-29T04:13:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022postalbyke\u0022 data-cite=\u0022postalbyke\u0022\u003E\u003Cdiv\u003ESo if I want the Isp of the engine I am currently using, I have to tell the program to go and get every engine, then figure out which one I\u0027m using (by stage or ignition), then get the Isp for that engine? Or just scan the list for a non-zero Isp... hmm...\u003Cp\u003Eedit: messy but effective. I try not to loop \u0022unnecessarily,\u0022 but I will accept this begrudgingly \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWe were trying to come up with better querying methods for the LIST PARTS so you can do stuff like LIST PARTS IN MYVAR WHERE (condition), but sadly it looks like this would be no more efficient than just doing it in your own loop, as it would still work by the same sequential search under the hood.\u003C/p\u003E\n"},{"CreatedByName":"postalbyke","CreatedById":114272,"CreatedDateTime":"2014-08-29T17:49:58Z","Content":"\n\u003Cp\u003EBummer. I had noticed that some other mods have access to the things I want (such as Engineer, etc.), and I had just hoped that I had missed something in the documentation. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E until then, I have a solution!\u003C/p\u003E\u003Cp\u003ELIST ENGINES IN myVariable.\u003C/p\u003E\u003Cp\u003EFOR eng IN myVariable\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E set Isp to eng:ISP.\u003C/p\u003E\u003Cp\u003E if Isp \u0026gt; 0\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E break.\u003C/p\u003E\u003Cp\u003E }.\u003C/p\u003E\u003Cp\u003E}.\u003C/p\u003E\u003Cp\u003E(This only works for single-engine stages, or craft with all the same engine type.)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-29T19:18:34Z\u0022 title=\u002208/29/2014 07:18  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 29, 2014\u003C/time\u003E by postalbyke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-08-29T20:05:17Z","Content":"\n\u003Cp\u003EIf there was an abstraction that gave the ISP for the whole ship, what would you want it to tell you?\u003C/p\u003E\u003Cp\u003E - the total highest ISP of any one engine, calculated among the ones that are active now, or calculated across the whole ship?\u003C/p\u003E\u003Cp\u003E - the total lowest ISP of any one engine, calculated among the ones that are active now, or calculated across the whole ship?\u003C/p\u003E\u003Cp\u003E - the weighted average ISP of all the engines, calculated among the ones that are active now, or calculated across the whole ship?\u003C/p\u003E\u003Cp\u003E - the weighted average ISP of all the engines, calculated among the ones that are active now, and taking into account the fact that all the engines might not shut off together at the same time (asparagus) so it\u0027s weighted also by how long each would burn for?\u003C/p\u003E\u003Cp\u003EAnd of course, if you\u0027re moving through the atmosphere, ISP changes as the air get thinner, so the ISP right now may not be the same as the ISP later on, making predictive calculations on it a bit messier.\u003C/p\u003E\u003Cp\u003EIncidentally, you can calculate the rate of fuel loss that\u0027s occurring at the moment by, in a loop, comparing the current fuel left on the ship to the previous fuel left on the ship on the previous iteration, and compare that to the throttle setting you had during that moment and how long that moment took, to dynamically calculate your own ISP for the previous moment. I don\u0027t know if this suits your needs.\u003C/p\u003E\u003Cp\u003ENow that I think of it, there\u0027s two types of fuel you\u0027re burning, liquid and oxidizer, and I don\u0027t even know which one the game\u0027s ISP numbers are calculating - the total sum of combined mass of both that\u0027s being burned? I guess if you\u0027re using it for DV calculations it would have to be that.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-29T20:08:32Z\u0022 title=\u002208/29/2014 08:08  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 29, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-08-29T23:58:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022postalbyke\u0022 data-cite=\u0022postalbyke\u0022\u003E\u003Cdiv\u003EBummer. I had noticed that some other mods have access to the things I want (such as Engineer, etc.), and I had just hoped that I had missed something in the documentation. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E until then, I have a solution!\u003Cp\u003ELIST ENGINES IN myVariable.\u003C/p\u003E\u003Cp\u003EFOR eng IN myVariable\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E set Isp to eng:ISP.\u003C/p\u003E\u003Cp\u003E if Isp \u0026gt; 0\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E break.\u003C/p\u003E\u003Cp\u003E }.\u003C/p\u003E\u003Cp\u003E}.\u003C/p\u003E\u003Cp\u003E(This only works for single-engine stages, or craft with all the same engine type.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can try this if you want a more precise value (correct me if this is wrong):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eset d_ISP to 0.\u003Cbr\u003Eset d_FTot to 0.\u003Cbr\u003Eset d_FISPTot to 0.\u003Cbr\u003Elist engines in l_eList.\u003Cbr\u003Efor eng in l_eList {\u003Cbr\u003Eif eng:isp \u0026gt; 0 {\u003Cbr\u003Eset d_FTot to (d_FTot \u002B eng:maxthrust).\u003Cbr\u003Eset d_FISPTot to (d_FISPTot \u002B (eng:maxthrust / eng:isp)).\u003Cbr\u003E}.\u003Cbr\u003E }.\u003Cbr\u003Eif d_FISPTot \u0026gt; 0 {\u003Cbr\u003Eset d_ISP to (d_FTot / d_FISPTot).\u003Cbr\u003E}\u003Cbr\u003Eelse {\u003Cbr\u003Eset d_ISP to 0.\u003Cbr\u003E}.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"postalbyke","CreatedById":114272,"CreatedDateTime":"2014-08-30T01:58:16Z","Content":"\n\u003Cp\u003E@Steven Mading:\u003C/p\u003E\u003Cp\u003EI couldn\u0027t focus once I\u0027d quoted you so here goes without:\u003C/p\u003E\u003Cp\u003EI\u0027m looking for\u003C/p\u003E\u003Cp\u003E\u0022What is the (current effective) Isp for the current engine on the current stage?\u0022\u003C/p\u003E\u003Cp\u003EI use Isp, Thrust, and little g to predict fuel rate of the engine I\u0027m using (in kg/s) (which rules out the units used for fuel and oxidizer, and reduces calculations required to check how much of each I\u0027m going to need)\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E\u0022\u003C/em\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003E\u003Cem\u003EIncidentally, you can calculate the rate of fuel loss that\u0027s occurring at the moment by, in a loop, comparing the current fuel left on the ship to the previous fuel left on the ship on the previous iteration, and compare that to the throttle setting you had during that moment and how long that moment took, to dynamically calculate your own ISP for the previous moment. I don\u0027t know if this suits your needs.\u0022\u003C/em\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EUsing loops and comparing fuel levels can be inaccurate in their own way. Also, it takes time and processor away from the burn, which I\u0027m trying to make more accurate.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003E\u003Cem\u003E\u0022Now that I think of it, there\u0027s two types of fuel you\u0027re burning, liquid and oxidizer, and I don\u0027t even know which one the game\u0027s ISP numbers are calculating - the total sum of combined mass of both that\u0027s being burned? I guess if you\u0027re using it for DV calculations it would have to be that.\u0022\u003C/em\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EThe Isp is the ratio of the velocity of the exhaust products to the acceleration due to gravity ASL on Earth. This avoids all the confusion about fuel and oxidizer, all you need to worry about is the mass leaving the ship thru the engine.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EI try really hard to make rockets that are \u0022realistic\u0022 or \u0022practical.\u0022 It hurts my head to see the asparagus and onion rockets fly. Typically I use the Isp while in orbit to ensure crisp burns.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EIn the case I had more than one engine doing a burn, I would probably make a program that calculates the delta vee and delta em contributions of each engine, and runs a burn accordingly.\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-08-30T02:58:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022postalbyke\u0022 data-cite=\u0022postalbyke\u0022\u003E\u003Cdiv\u003E@Steven Mading:\u003Cp\u003EI couldn\u0027t focus once I\u0027d quoted you so here goes without:\u003C/p\u003E\u003Cp\u003EI\u0027m looking for\u003C/p\u003E\u003Cp\u003E\u0022What is the (current effective) Isp for the current engine on the current stage?\u0022\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA general case solution, which is what kOS would have to be written to provide, not just a solution for your case, cannot use the word \u0022the\u0022 here, as that makes it stop being general case and instead makes it only work if you design a rocket with one engine firing at a time. If there\u0027s more than one engine firing, then you either iterate over them yourself or you get one lump sum from kOS for all of them. If it has to be returned as one lump sum, should it be an average of their current ISP\u0027s?\u003C/p\u003E\u003Cp\u003EWhat counts as \u0022in the current stage\u0022 is a very messy algorithm in general, because people can use fuel lines and/or crossfeed to blur the dividing line between stages. At the moment, the definition kOS uses (for things like stage:liquidfuel) for \u0022in the current stage\u0022 is to walk the parts graph starting from each currently active engine, truncating the walk at any point where a connection between parts is not crossfeed capable, and throwing away all the duplications (engine 1 sucking fuel from tank 12345 and engine 2 also sucking fuel from tank 12345 - both find the tank in their walks, but the tank should only count once), and summing up all fuel found during that walk.\u003C/p\u003E\u003Cp\u003EBecause that\u0027s the definition used, and it seems to match the definition KSP itself is using to calculate its little green bar graphs of fuel, the only sort of meaning \u0022this stage\u0022 could have for ISP would be \u0022all the engines that are currently active\u0022. Would this do?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003E\u003Cem\u003E\u0022Now that I think of it, there\u0027s two types of fuel you\u0027re burning, liquid and oxidizer, and I don\u0027t even know which one the game\u0027s ISP numbers are calculating - the total sum of combined mass of both that\u0027s being burned? I guess if you\u0027re using it for DV calculations it would have to be that.\u0022\u003C/em\u003E\u003C/span\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EThe Isp is the ratio of the velocity of the exhaust products to the acceleration due to gravity ASL on Earth. This avoids all the confusion about fuel and oxidizer, all you need to worry about is the mass leaving the ship thru the engine.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EJet engines have an ISP number as well, but take their oxygen from the atmosphere, not from the fuel tanks. So the assumption inherent in that sort of calculation, that all the mass being thrown out the engine at that velocity is mass that came from the ship\u0027s fuel being carried, doesn\u0027t hold for jets.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EThe ISP doesn\u0027t have units because it\u0027s actually measured lots of different ways to come to the same number. Another measurement is that it\u0027s a unit of time - the number of seconds that a given amount of fuel will last if being used to push steady at a particular constant force (how many seconds of thrust do you get from 1 kilogram of ship mass being thrown out the back (fuel being burned) at a throttle setting that pushes at only 1 Newton.) This is the calculation that\u0027s useful for calculating fuel consumption and how much DV can you achieve. But the problem is that I don\u0027t know what the game is using for this calculation in the case of jet engines where not all the output mass is coming from the ship\u0027s own input mass, and some of the output mass was sucked out of the atmosphere.\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"postalbyke","CreatedById":114272,"CreatedDateTime":"2014-08-30T09:14:10Z","Content":"\n\u003Cp\u003E\u0022\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#252525;\u0022\u003EIt represents the \u003C/span\u003E\u003C/span\u003E\u003Ca href=\u0022https://en.wikipedia.org/wiki/Force\u0022 rel=\u0022external nofollow\u0022\u003Eforce\u003C/a\u003E\u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#252525;\u0022\u003E with respect to the amount of \u003C/span\u003E\u003C/span\u003E\u003Ca href=\u0022https://en.wikipedia.org/wiki/Propellant\u0022 rel=\u0022external nofollow\u0022\u003Epropellant\u003C/a\u003E \u003Cspan style=\u0022font-family:sans-serif;\u0022\u003E\u003Cspan style=\u0022color:#252525;\u0022\u003Eused per unit time.\u0022 (Wikipedia, \u003C/span\u003E\u003C/span\u003E\u003Ca href=\u0022https://en.wikipedia.org/wiki/Specific_impulse\u0022 rel=\u0022external nofollow\u0022\u003Especific impulse\u003C/a\u003E). I would hope that makes it easier to calculate. In fact, the loop method could come up with a close approximation for this.\u003C/p\u003E\u003Cp\u003EI know that Engineer has a readout under \u0022Vessel\u0022 that shows current Isp, I wonder if they couldn\u0027t be asked how it was accomplished.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-30T09:18:56Z\u0022 title=\u002208/30/2014 09:18  AM\u0022 data-short=\u00229 yr\u0022\u003EAugust 30, 2014\u003C/time\u003E by postalbyke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-08-30T12:20:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022postalbyke\u0022 data-cite=\u0022postalbyke\u0022\u003E\u003Cdiv\u003EIt represents the force with respect to the amount of propellant used per unit time.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhich is the same figure I described. The reason it has no units is that all the units cancel out in the calculation as it\u0027s essentially a ratio that can be inserted into formulas in a few different ways.\u003C/p\u003E\u003Cp\u003EThe problem is over what KSP means by it, not what the real world means by it. Citing real world definitions won\u0027t alleviate that problem. In this case, I don\u0027t know which \u0022propellant\u0022 they\u0027re counting - the sum of both? The sum of both only if it\u0027s NOT a jet, and just the liquidfuel if it is a jet? If you\u0027re using it to calculate how much dV you can achieve from it then you have to to answer that first. You have to know if it\u0027s exactly including the propellant *that is being carried on board* or if you have to fudge the numbers because it\u0027s also including propellant not carried on board (jets counting the oxygen) or failing to count propellant that is carried on board (rockets not counting the oxygen).\u003C/p\u003E\u003Cp\u003EIt\u0027s not \u0022I don\u0027t know how real rocket programs do it\u0022.\u003C/p\u003E\u003Cp\u003EIt\u0027s \u0022I don\u0027t know how SQUAD did it.\u0022.\u003C/p\u003E\u003Cp\u003EI could just utterly ignore the problem of not knowing what SQUAD includes in their ISP numbers and just hand you the number from the API as-is and let you deal with it - but then I cannot also calculate the dV. To get the dV I do need to know which propellant(s) they used in the ISP number.\u003C/p\u003E\u003Cp\u003EIn general I think the solution is just to provide a way to LIST ENGINES THAT ARE ACTIVE INTO VAR. (not with that exact syntax of course). Then you can decide what you want to do with the ISP numbers that come out ( and if you only have 1 engine active at a time, then you don\u0027t need to work out how to average them together and how to weight that average.)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-30T12:31:53Z\u0022 title=\u002208/30/2014 12:31  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 30, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Joe32320","CreatedById":81055,"CreatedDateTime":"2014-08-30T17:52:14Z","Content":"\n\u003Cp\u003EThe way I calculate ISP of the engine(s) that are currently being used is to list all the engines, then check the engines to see if they have been ignited AND aren\u0027t flamed out, then using stats from the engine I calculate the ISP using equations found here: \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Isp\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Isp\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENote, I think that once an engine has been staged once, it counts as being ignited even if you shut it down again from the right hand menu, so for complex designs/ships that have docked together, it may not be a valid way of doing it but otherwise it seems to work. A way around might be to lower the thrust limit in the right hand menu to 0, then take that into account within the loop for the calculations.\u003C/p\u003E\n"},{"CreatedByName":"postalbyke","CreatedById":114272,"CreatedDateTime":"2014-08-30T19:48:50Z","Content":"\n\u003Cp\u003EIsp in KSP has unit (seconds).\u003C/p\u003E\u003Cp\u003ESquad uses the real-world definition. (which results in unit (seconds).)\u003C/p\u003E\u003Cp\u003EFor rockets (in KSP), the amount of fuel used for thrust/deltaVee/Isp is both oxidizer and liquidfuel.\u003C/p\u003E\u003Cp\u003EI don\u0027t know why one would use dV for a jet, but you could see for yourself by calculating Isp using the thrust and liquidfuel rate to calculate it (don\u0027t forget little g = 9.81, and the conversion rate of 5 kg/unit liquidfuel), and compare that to the Isp printout from Engineer.\u003C/p\u003E\u003Cp\u003Eedit: The wiki says in m/s, but I get very good results when applying the Isp as given in the unit(seconds) way.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-30T19:53:31Z\u0022 title=\u002208/30/2014 07:53  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 30, 2014\u003C/time\u003E by postalbyke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"whaaw","CreatedById":69050,"CreatedDateTime":"2014-08-30T22:28:43Z","Content":"\n\u003Cp\u003Ei have an old script that im trying to get running.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Eset nd to nextnode.\u003Cp\u003Elock np to R(0,0,0) * nd:deltav.\u003C/p\u003E\u003Cp\u003Elock steering to np.\u003C/p\u003E\u003Cp\u003Ewait until abs(np:pitch - facing:pitch) \u0026lt; 0.1 and abs(np:yaw - facing:yaw) \u0026lt; 0.1.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E error is:\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003ESuffix PITCH not found on object\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eand \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E if wp != oldwp {\u003Cp\u003E print \u0022T\u002B\u0022 \u002B round(missiontime) \u002B \u0022 Warp \u0022 \u002B warp \u002B \u0022, remaining wait \u0022 \u002B round(rt) \u002B \u0022s\u0022.\u003C/p\u003E\u003Cp\u003E set oldwp to wp.\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E gives a syntax error here: \u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E!=\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eedit: lock steering to nextnode turns the ship to the node but the ship rotates crazy in the roll axis.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-30T23:44:18Z\u0022 title=\u002208/30/2014 11:44  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 30, 2014\u003C/time\u003E by whaaw\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-08-31T02:08:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022whaaw\u0022 data-cite=\u0022whaaw\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock np to R(0,0,0) * nd:deltav.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere is no need to do R(0,0,0)* anymore, because kOS can steer from raw vectors themselves.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E error is:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESuffix PITCH not found on object \u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is because we fixed rotation*vector so it returns a vector instead of returning a rotation, which was nonsensical (\u0022I want to rotate this vector\u0022 makes sense, but what it did before was \u0022I want to vector this rotation\u0022, which doesn\u0027t.)\u003C/p\u003E\u003Cp\u003ESo when you do:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock np to r(0,0,0) * nd:deltav\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EYou get a vector out of it now, not a rotation. (and since the rotation was zero, you in fact get a copy of nd:deltav).\u003C/p\u003E\u003Cp\u003EThus the complaint about PITCH. PITCH isn\u0027t a suffix because what you now have is a vector, not a rotation.\u003C/p\u003E\u003Cp\u003EIf you really do want a rotation, then you can get it from any vector with the :DIRECTION suffix, like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elock np to nd:deltav:direction.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut then you do have the information loss that a vector doesn\u0027t have an \u0022up\u0022 direction so the roll orientation will be something arbitrary.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E!=\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis is \u0026lt;\u0026gt; instead of != now. Nivekk\u0027s old \u0022!=\u0022 feature was undocumented, so when the system was rebuilt from the ground up, according to the spec, there was no \u0027not equal\u0027 operator implemented because we didn\u0027t know it was there, being undocumented. Then a new not-equal was implemented (again not knowing there was one already), and it was named \u0027\u0026lt;\u0026gt;\u0027.\u003C/p\u003E\n"},{"CreatedByName":"whaaw","CreatedById":69050,"CreatedDateTime":"2014-08-31T11:18:47Z","Content":"\n\u003Cp\u003Ethx for your reply it helps me alot.\u003C/p\u003E\u003Cp\u003Ei still have some wired behavior with lock steering with the small kos machine roll axis go crazy with the big kos maschine lock steering works but i cant unlock the steering im using 32bit\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EEDIT:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003Eok it works now the bug is gone so far. Its scary because i cant reproduce it and i changed nothing.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eclearscreen.\u003Cbr\u003Eset nd to nextnode.\u003Cbr\u003Eset deactivateFlag to 0.\u003Cbr\u003Eon AG1 set deactivateFlag to 1.\u003Cbr\u003Elock np to nd:deltav:direction.\u003Cbr\u003Elock steering to np.\u003Cbr\u003Euntil deactivateFlag=1 {\u003Cbr\u003Eset tpitch to abs(np:pitch - facing:pitch).\u003Cbr\u003Eset tyaw to abs(np:yaw  - facing:yaw).\u003Cbr\u003Eprint tpitch at (0,10).\u003Cbr\u003Eprint tyaw at (0,20).\u003Cbr\u003E}\u003Cbr\u003Eunlock steering.\u003Cbr\u003Eprint \u0022stop\u0022.\u003Cbr\u003E//wait until abs(np:pitch - facing:pitch) \u0026lt; 0.1 and abs(np:yaw - facing:yaw) \u0026lt; 0.1.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-31T14:39:36Z\u0022 title=\u002208/31/2014 02:39  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 31, 2014\u003C/time\u003E by whaaw\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-08-31T14:08:59Z","Content":"\n\u003Cp\u003E(By the way, please quote your code using [ code ] blocks, not [ quote ] blocks, because the forum deletes all but the outermost nest level of [ quote ] blocks when replying (even with multiquote enabled, which is broken), making it a PITA to reply to the code because I have to manually cut and paste to do it.)\u003C/p\u003E\u003Cp\u003EYou do not need to do this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elock steering to np.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eover and over and over each iteration. Why is it inside the loop? Just do it once before the loop starts. That may have something to do with why it has a hard time keeping the steering straight. You\u0027re constantly re-setting it and making it have to start over from scratch.\u003C/p\u003E\n"},{"CreatedByName":"qwesr","CreatedById":36190,"CreatedDateTime":"2014-08-31T16:39:16Z","Content":"\n\u003Cp\u003EDoes KOS have support for variable references/pointers? I.e Set a to \u0026amp;b \u003C/p\u003E\u003Cp\u003EI\u0027m sure this question has been asked before but I cant for the life of me find an answer.\u003C/p\u003E\n"},{"CreatedByName":"beelzebub","CreatedById":49518,"CreatedDateTime":"2014-08-31T18:42:16Z","Content":"\n\u003Cp\u003EHey gang,\u003C/p\u003E\u003Cp\u003Efirst time playing with kOS since 0.6, thanks very much for re-invigorating it! Quick request for some help/advice, since I\u0027m thoroughly stuck. The steering (lock steering to x) is ineffective, as has been discussed, so I\u0027ve been writing my own PID controller to do ship:control:pitch/yaw/roll. However, I\u0027m experiencing difficulties calculating a pitch/yaw error that is independent of the roll (i.e. it doesn\u0027t care which way around the rocket is, just points it in the right direction. Up - ship:facing still wants to correct for roll...). \u003C/p\u003E\u003Cp\u003EDoes anyone have advice, or a sample script, that could help me with this? Alternatively, advice on getting steering working effectively would be grand, but that seems the easy way out \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-31T19:03:46Z\u0022 title=\u002208/31/2014 07:03  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 31, 2014\u003C/time\u003E by beelzebub\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-09-01T01:31:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022beelzebub\u0022 data-cite=\u0022beelzebub\u0022\u003E\u003Cdiv\u003EI\u0027m experiencing difficulties calculating a pitch/yaw error that is independent of the roll (i.e. it doesn\u0027t care which way around the rocket is, just points it in the right direction. Up - ship:facing still wants to correct for roll...). \u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOne of the changes since 0.6 is that kOS now has much better vector support. What it sounds like you want is to get the error between the wanted vector and the current facing in two components - the yaw component relative to the ship, and the pitch component relative to the ship.\u003C/p\u003E\u003Cp\u003ECheck this video and see the bit at the end where I give a brief overview of one way to do it with dot products, starting at position 2:50 in the video.\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/4--uG5RZKjk?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-09-01T02:05:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022qwesr\u0022 data-cite=\u0022qwesr\u0022\u003E\u003Cdiv\u003EDoes KOS have support for variable references/pointers? I.e Set a to \u0026amp;b \u003Cp\u003EI\u0027m sure this question has been asked before but I cant for the life of me find an answer.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, but weirdly it does adhere to the common way things work in OOP where primitives are copied by value and complex structures are copied by reference.\u003C/p\u003E\u003Cp\u003EIf you do this:\u003C/p\u003E\u003Cp\u003Eset x to 1.0.\u003C/p\u003E\u003Cp\u003Eset y to x.\u003C/p\u003E\u003Cp\u003Ethen x and y refer to two different instances of the number 1.0, that you can edit separately.\u003C/p\u003E\u003Cp\u003EBut if you do this:\u003C/p\u003E\u003Cp\u003Eset V1 to V(10,20,30).\u003C/p\u003E\u003Cp\u003Eset V2 to V1.\u003C/p\u003E\u003Cp\u003EThen V1 and V2 refer to the SAME vector, and doing something like SET V1:X TO 20 ends up changing the value of V2:X as well because they are just references to the same vector.\u003C/p\u003E\u003Cp\u003EThis is because of how it\u0027s built on top of C# and it\u0027s inheriting this behavior from C# itself. I\u0027m not very happy with this, as it\u0027s not intuitive, and kOS does not expose the difference between value and reference anywhere else to the script programmer, so it introduces a confusion that you lack the tools to do anything to control.\u003C/p\u003E\n"},{"CreatedByName":"beelzebub","CreatedById":49518,"CreatedDateTime":"2014-09-01T08:27:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EWhat it sounds like you want is to get the error between the wanted vector and the current facing in two components - the yaw component relative to the ship, and the pitch component relative to the ship... Check this video...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, Steve - I\u0027ll have a fiddle and report back \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"whaaw","CreatedById":69050,"CreatedDateTime":"2014-09-01T18:11:18Z","Content":"\n\u003Cp\u003EHi,\u003C/p\u003E\u003Cp\u003Eim still looking for a good solution for Kerbin KSC landing from a stable orbit.\u003C/p\u003E\u003Cp\u003Ei searched alot but its hard to find somthing.\u003C/p\u003E\n"},{"CreatedByName":"qwesr","CreatedById":36190,"CreatedDateTime":"2014-09-01T18:38:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003ENo, but weirdly it does adhere to the common way things work in OOP where primitives are copied by value and complex structures are copied by reference.\u003Cp\u003EIf you do this:\u003C/p\u003E\u003Cp\u003Eset x to 1.0.\u003C/p\u003E\u003Cp\u003Eset y to x.\u003C/p\u003E\u003Cp\u003Ethen x and y refer to two different instances of the number 1.0, that you can edit separately.\u003C/p\u003E\u003Cp\u003EBut if you do this:\u003C/p\u003E\u003Cp\u003Eset V1 to V(10,20,30).\u003C/p\u003E\u003Cp\u003Eset V2 to V1.\u003C/p\u003E\u003Cp\u003EThen V1 and V2 refer to the SAME vector, and doing something like SET V1:X TO 20 ends up changing the value of V2:X as well because they are just references to the same vector.\u003C/p\u003E\u003Cp\u003EThis is because of how it\u0027s built on top of C# and it\u0027s inheriting this behavior from C# itself. I\u0027m not very happy with this, as it\u0027s not intuitive, and kOS does not expose the difference between value and reference anywhere else to the script programmer, so it introduces a confusion that you lack the tools to do anything to control.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHuh, so lets say I pass a List type to another file as a parameter, will the same thing still apply or would a copy of the list be made locally in that file?\u003C/p\u003E\n"}]}