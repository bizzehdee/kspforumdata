{"TopicId":53809,"ForumId":34,"TopicTitle":"[1.0][Release-5-0][April 28, 2015] Active Texture Management - Save RAM!","CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-11-20T19:37:35Z","PageNum":86,"Articles":[{"CreatedByName":"Tiberius","CreatedById":78987,"CreatedDateTime":"2014-10-12T01:22:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EAlrighty, so with Sarbian\u0027s help, I addressed the issue in the loading mechanism. Should work now.\u003Cp\u003E\u003Ca href=\u0022https://github.com/rbray89/ActiveTextureManagement/releases/tag/3-5\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/rbray89/ActiveTextureManagement/releases/tag/3-5\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you, sensei.\u003C/p\u003E\n"},{"CreatedByName":"Neutrinovore","CreatedById":72520,"CreatedDateTime":"2014-10-12T01:47:57Z","Content":"\n\u003Cp\u003EHallelujah! Thankyouthankyouthankyou so much!!! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Virtualgenius","CreatedById":67644,"CreatedDateTime":"2014-10-12T01:50:11Z","Content":"\n\u003Cp\u003ECan confirm the new fix is working perfectly thankyou to Rbray and Sarbian\u003C/p\u003E\n"},{"CreatedByName":"[email\u0026#160;protected]","CreatedById":80529,"CreatedDateTime":"2014-10-12T01:53:45Z","Content":"\n\u003Cp\u003EThe file appears to be a bit bloated now, do I still just use the stuff in the gamedata folder? Install is less than clear.\u003C/p\u003E\n"},{"CreatedByName":"Taki117","CreatedById":89975,"CreatedDateTime":"2014-10-12T01:54:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ravensoul6@hotmail.com\u0022 data-cite=\u0022ravensoul6@hotmail.com\u0022\u003E\u003Cdiv\u003EThe file appears to be a bit bloated now, do I still just use the stuff in the gamedata folder? Install is less than clear.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDrop the GameData folder in your main KSP folder.\u003C/p\u003E\n"},{"CreatedByName":"goldenpsp","CreatedById":113874,"CreatedDateTime":"2014-10-12T02:00:47Z","Content":"\n\u003Cp\u003ESo I have a question. I just downloaded the build from about 40min ago. I was eagerly awaiting this, as .25 seems to be more hungry than .24 was. I am running far fewer mods than I had been, but when playing i was right around 3GB. I could play a bit before it would run out of RAM and crash.\u003C/p\u003E\u003Cp\u003EI did the openGL thing and it dropped to under 2GB which helped in the meantime.\u003C/p\u003E\u003Cp\u003EI just installed ATM (aggressive not basic) and the game crashes with an out of memory error before it finishes loading.\u003C/p\u003E\u003Cp\u003EHere is my output log \u003Ca href=\u0022http://1drv.ms/1uJqBlL\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://1drv.ms/1uJqBlL\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"wiviking","CreatedById":59140,"CreatedDateTime":"2014-10-12T02:20:58Z","Content":"\n\u003Cp\u003EI just tried the new basic build and my memory use went from ~2.3 Gig to ~2.8 Gig. It\u0027s making the cache but it is actually increasing memory usage. I removed to to see what my original memory usage was so I don\u0027t have a log but I can re-install and get the log if needed.\u003C/p\u003E\n"},{"CreatedByName":"tedach","CreatedById":122647,"CreatedDateTime":"2014-10-12T02:36:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022goldenpsp\u0022 data-cite=\u0022goldenpsp\u0022\u003E\u003Cdiv\u003ESo I have a question. I just downloaded the build from about 40min ago. I was eagerly awaiting this, as .25 seems to be more hungry than .24 was. I am running far fewer mods than I had been, but when playing i was right around 3GB. I could play a bit before it would run out of RAM and crash.\u003Cp\u003EI did the openGL thing and it dropped to under 2GB which helped in the meantime.\u003C/p\u003E\u003Cp\u003EI just installed ATM (aggressive not basic) and the game crashes with an out of memory error before it finishes loading.\u003C/p\u003E\u003Cp\u003EHere is my output log \u003Ca href=\u0022http://1drv.ms/1uJqBlL\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://1drv.ms/1uJqBlL\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELog says you\u0027ve loaded two versions of ModuleManager in your GameData. Remove v2.5 (keep 2.5.1) and try running again, see if you get better results.\u003C/p\u003E\n"},{"CreatedByName":"Neutrinovore","CreatedById":72520,"CreatedDateTime":"2014-10-12T03:02:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Neutrinovore\u0022 data-cite=\u0022Neutrinovore\u0022\u003E\u003Cdiv\u003EHallelujah! Thankyouthankyouthankyou so much!!! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI rescind my previous post. Now, the game LOCKS UP during loading, due to running out of memory. Before, it simply CRASHED. Unfortunately, I don\u0027t view this as an improvement. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"scerion","CreatedById":90642,"CreatedDateTime":"2014-10-12T03:04:18Z","Content":"\n\u003Cp\u003EAfter updating to the latest version-agresssive, I too crashed with an out of memory issue \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EI went back to the patch a previous user offered and it started working again.\u003C/p\u003E\n"},{"CreatedByName":"goldenpsp","CreatedById":113874,"CreatedDateTime":"2014-10-12T03:07:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tedach\u0022 data-cite=\u0022tedach\u0022\u003E\u003Cdiv\u003ELog says you\u0027ve loaded two versions of ModuleManager in your GameData. Remove v2.5 (keep 2.5.1) and try running again, see if you get better results.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERemoving 2.5 made no difference.\u003C/p\u003E\u003Cp\u003EMan .25 has been frustrating (not this mod, not complaining about ATM). Just in general. I am running less than half the mods I ran in .24 and fewer mods that I ran without even needing ATM. If squad is gonna bloat this game any more, we are gonna need a stable 64bit version.\u003C/p\u003E\n"},{"CreatedByName":"AetherGoddess","CreatedById":115971,"CreatedDateTime":"2014-10-12T03:11:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tedach\u0022 data-cite=\u0022tedach\u0022\u003E\u003Cdiv\u003ELog says you\u0027ve loaded two versions of ModuleManager in your GameData. Remove v2.5 (keep 2.5.1) and try running again, see if you get better results.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ei doubt this is the issue. modulemanager has a long history of safely disabling older versions of itself. Definitely remove it, but there\u0027s something else going on. Your log clearly shows an out of address space condition:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EnamicHeapAllocator out of memory - Could not get memory for large allocationCould not allocate memory: System out of memory!Trying to allocate: 1398104B with 32 alignment. MemoryLabel: Texture\u003Cbr\u003EAllocation happend at: Line:411 in \u003Cbr\u003EMemory overview\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[ ALLOC_DEFAULT ] used: 298914531B | peak: 0B | reserved: 326705928B \u003Cbr\u003E[ ALLOC_GFX ] used: 728248622B | peak: 0B | reserved: 755820230B \u003Cbr\u003E[ ALLOC_CACHEOBJECTS ] used: 193832B | peak: 0B | reserved: 12582912B \u003Cbr\u003E[ ALLOC_TYPETREE ] used: 0B | peak: 0B | reserved: 0B \u003Cbr\u003E[ ALLOC_PROFILER ] used: 536076B | peak: 0B | reserved: 8388608B \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOddly, the memory summary shows 2032 MBs in use and reserved. are you running on a 32-bit version of windows?\u003C/p\u003E\n"},{"CreatedByName":"goldenpsp","CreatedById":113874,"CreatedDateTime":"2014-10-12T03:13:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AetherGoddess\u0022 data-cite=\u0022AetherGoddess\u0022\u003E\u003Cdiv\u003Ei doubt this is the issue. modulemanager has a long history of safely disabling older versions of itself. Definitely remove it, but there\u0027s something else going on. Your log clearly shows an out of address space condition:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EnamicHeapAllocator out of memory - Could not get memory for large allocationCould not allocate memory: System out of memory!Trying to allocate: 1398104B with 32 alignment. MemoryLabel: Texture\u003Cbr\u003EAllocation happend at: Line:411 in \u003Cbr\u003EMemory overview\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[ ALLOC_DEFAULT ] used: 298914531B | peak: 0B | reserved: 326705928B \u003Cbr\u003E[ ALLOC_GFX ] used: 728248622B | peak: 0B | reserved: 755820230B \u003Cbr\u003E[ ALLOC_CACHEOBJECTS ] used: 193832B | peak: 0B | reserved: 12582912B \u003Cbr\u003E[ ALLOC_TYPETREE ] used: 0B | peak: 0B | reserved: 0B \u003Cbr\u003E[ ALLOC_PROFILER ] used: 536076B | peak: 0B | reserved: 8388608B \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOddly, the memory summary shows 2032 MBs in use and reserved. are you running on a 32-bit version of windows?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope 64bit Windows 8. 12GB RAM 8 GB free before starting. I was watching KSP\u0027s memory usage while loading and it would hit 3.4GB freeze then crash.\u003C/p\u003E\n"},{"CreatedByName":"Neutrinovore","CreatedById":72520,"CreatedDateTime":"2014-10-12T03:19:46Z","Content":"\n\u003Cp\u003EI\u0027m having the same problem as goldenpsp. EXACTLY the same problem. I\u0027m running Windows 7 64 bit, though, and I only have a total of 4 GB of ram total.\u003C/p\u003E\n"},{"CreatedByName":"Brucey","CreatedById":108628,"CreatedDateTime":"2014-10-12T03:38:59Z","Content":"\n\u003Cp\u003EAh bummer, I guess I have to report it\u0027s not working for me either. I just ran a test with the ATM folder in and out of the game data folder. (I left the BoulderCo folder alone)\u003C/p\u003E\u003Cp\u003EMemory use reported by Windows Task Manager:\u003C/p\u003E\u003Cp\u003E==============================\u003C/p\u003E\u003Cp\u003EWithout ATM: 1.97 gb\u003C/p\u003E\u003Cp\u003EWith ATM: 3.07 gb\u003C/p\u003E\u003Cp\u003E==============================\u003C/p\u003E\u003Cp\u003E(Using opengl, non-aggressive ATM)\u003C/p\u003E\u003Cp\u003EIt also crashed on me once, which I suspect was because I had internet explorer hogging some of the 32-bit memory at that time, causing a memory crash. It\u0027s worth mentioning that windows-64 uses 32-bit Internet Explorer by default for some reason. So I think it\u0027s probably a good idea to close IE whenever running KSP.\u003C/p\u003E\u003Cp\u003EI can produce a log if anyone wants it.\u003C/p\u003E\u003Cp\u003EOn a side note, I am not a programmer, but I seems like a simple way for Squad to address memory issues might be to not load the entire parts library upon launching the game, and just use them as-needed. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NWDogg","CreatedById":118058,"CreatedDateTime":"2014-10-12T03:46:26Z","Content":"\n\u003Cp\u003EIt\u0027s working perfectly fine for me. Without ATM, over 3gb. With ATM, and more mods installed, 2.2gb. This is with the x86-basic release, not using openGL, and of course on 32 bit KSP.\u003C/p\u003E\n"},{"CreatedByName":"AetherGoddess","CreatedById":115971,"CreatedDateTime":"2014-10-12T03:52:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Neutrinovore\u0022 data-cite=\u0022Neutrinovore\u0022\u003E\u003Cdiv\u003EI\u0027m having the same problem as goldenpsp. EXACTLY the same problem. I\u0027m running Windows 7 64 bit, though, and I only have a total of 4 GB of ram total.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo a little bit about the way 64-bit versions of windows allocates ram to 32-bit processes. the 32-bit part of that is the largest number the program can understand. with a 32-bit number, you can reach almost exactly 4 gb of ram. in this 4 GB address space (the technical term) windows must fit all of the functions that the program needs, and all of the textures, images, models, code, mapped files etc that the program uses to run itself. this 4 GB address space must cover everything the program needs, because the program simply doesn\u0027t have numbers large enough to look anywhere else.\u003C/p\u003E\u003Cp\u003EThis 4 GB address space is why 32-bit versions of KSP crash with an out-of-memory error around 3.5 GB, even when you have 8 or 12 GB available to the operating system. the program is using 3.5-ish, and relocated windows APIs, hardware interfaces, and other system things that the programs needs to use are using the remained. this is also the reason why the community pushed so hard for a 64-bit version, and why we\u0027re all so disappointed in it\u0027s stability. 64-bit numbers can address something on the order of 16 million terabytes, well in excess of any currently existing system.\u003C/p\u003E\u003Cp\u003ESomething is using that ram, but it doesn\u0027t appear to be KSPs memory allocation.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Brucey\u0022 data-cite=\u0022Brucey\u0022\u003E\u003Cdiv\u003E[...] On a side note, I am not a programmer, but I seems like a simple way for Squad to address memory issues might be to not load the entire parts library upon launching the game, and just use them as-needed. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYa, this would not work. because it\u0027s running out of address space, the program would need to release the files as well, which would force them to be reloaded from disk just like during startup. basically you would see the same loading screen at boot time whenever you change scenes between the VAB and the launchpad.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-12T03:55:30Z\u0022 title=\u002210/12/2014 03:55  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 12, 2014\u003C/time\u003E by AetherGoddess\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-10-12T03:54:14Z","Content":"\n\u003Cp\u003EYIKES!!! OK, looks like something to be goofy with KSP. I\u0027m pulling this update for now.\u003C/p\u003E\n"},{"CreatedByName":"goldenpsp","CreatedById":113874,"CreatedDateTime":"2014-10-12T04:03:59Z","Content":"\n\u003Cp\u003EI will say I also went back to the patch posted a few pages back and things are working now\u003C/p\u003E\u003Cp\u003ENo ATM 3.1GB, could play a short time before crashing\u003C/p\u003E\u003Cp\u003ELatest ATM, crashing at start\u003C/p\u003E\u003Cp\u003EPatch from a few pages back, Running solid so far around 2GB RAM\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-10-12T04:39:33Z","Content":"\n\u003Cp\u003EI would suggest using Sarbian\u0027s patch until I can figure out what KSP is doing internally now. \u003C/p\u003E\u003Cp\u003EBefore, they would read from the file tree in KSP that I could modify... now it looks like they might be grabbing it before I can get to it.\u003C/p\u003E\n"},{"CreatedByName":"Jovzin","CreatedById":105152,"CreatedDateTime":"2014-10-12T04:56:44Z","Content":"\n\u003Cp\u003ESo it looks like the guys who are using openGL and ATM are having problems right ? But guys with directx and ATM are OK ?\u003C/p\u003E\n"},{"CreatedByName":"Neutrinovore","CreatedById":72520,"CreatedDateTime":"2014-10-12T05:03:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EI would suggest using Sarbian\u0027s patch until I can figure out what KSP is doing internally now. \u003Cp\u003EBefore, they would read from the file tree in KSP that I could modify... now it looks like they might be grabbing it before I can get to it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, Sarbian\u0027s patch didn\u0027t work for me. I already tried it. I\u0027ll note that the loading process got farther than it did with the \u0027official\u0027 update, but still locked up out of memory. \u003C/p\u003E\u003Cp\u003E@AetherGoddess - yeah, I\u0027m aware of the whole \u0027running a 32 bit application in Win64bit\u0027 thing, this ain\u0027t my first rodeo here. I was just informing everyone concerned about my system setup. The point is that with ATM installed (and functioning properly), I shouldn\u0027t be having memory problems AT ALL.\u003C/p\u003E\u003Cp\u003EAhem, anyway, it looks like no KSP for me this weekend, regardless. Bummer. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NWDogg","CreatedById":118058,"CreatedDateTime":"2014-10-12T05:11:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jovzin\u0022 data-cite=\u0022Jovzin\u0022\u003E\u003Cdiv\u003ESo it looks like the guys who are using openGL and ATM are having problems right ? But guys with directx and ATM are OK ?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t know, honestly. It seemed to work just fine for me on first load. On subsequent loads, though, my memory usage went back up to over 3gb. So I have no idea what\u0027s going on...it worked, then it didn\u0027t. I\u0027m going to try the patch and see what happens with that, but if all else fails OpenGL drops my 3.3gb load to 1.1 gb. So there\u0027s always that to fall back on.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-10-12T05:18:27Z","Content":"\n\u003Cp\u003ESo... as far as I can tell, I won\u0027t be able to stop KSP from loading (or re-loading) textures. It will always load them. \u003C/p\u003E\u003Cp\u003EWe have two options:\u003C/p\u003E\u003Cp\u003E1) re-load textures after KSP has already done this. This means considerably longer loading times. (standard KSP load time \u002B white screen loading time)\u003C/p\u003E\u003Cp\u003E2) over-write the textures before KSP can load them. This means the file system will be altered. I might be able to put the textures somewhere else, but it will result in having to re-manage textures.\u003C/p\u003E\n"},{"CreatedByName":"Gristle","CreatedById":60589,"CreatedDateTime":"2014-10-12T05:24:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003ESo... as far as I can tell, I won\u0027t be able to stop KSP from loading (or re-loading) textures. It will always load them. \u003Cp\u003EWe have two options:\u003C/p\u003E\u003Cp\u003E1) re-load textures after KSP has already done this. This means considerably longer loading times. (standard KSP load time \u002B white screen loading time)\u003C/p\u003E\u003Cp\u003E2) over-write the textures before KSP can load them. This means the file system will be altered. I might be able to put the textures somewhere else, but it will result in having to re-manage textures.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut if KSP is re-loading textures why does the previous version and the patch posted earlier seem to work as expected?\u003C/p\u003E\n"}]}