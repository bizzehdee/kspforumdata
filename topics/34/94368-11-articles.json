{"TopicId":94368,"ForumId":34,"TopicTitle":"[old thread] Trajectories : atmospheric predictions","CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-12-23T20:25:57Z","PageNum":11,"Articles":[{"CreatedByName":"luckyhendrix","CreatedById":78280,"CreatedDateTime":"2015-05-15T11:46:47Z","Content":"\n\u003Cp\u003EThanks a lot for the update ! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E I will try it and reports if there is any bugs:)\u003C/p\u003E\n"},{"CreatedByName":"atomicfury","CreatedById":120037,"CreatedDateTime":"2015-05-15T12:50:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Youen\u0022 data-cite=\u0022Youen\u0022\u003E\u003Cdiv\u003EVersion 1.2.0 (beta) is published on github \u003Ca href=\u0022https://github.com/neuoy/KSPTrajectories/releases\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/neuoy/KSPTrajectories/releases\u003C/a\u003E\u003Cp\u003EIt should work for vaccum predictions and FAR. It doesn\u0027t work fot stock aerodynamics at this time. Also, I have only tested it on a single flight, so you could expect bugs.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks Youen! I tested it out and it worked for a retrograde reentry just fine.\u003C/p\u003E\u003Cp\u003EI was trying out the FARAPI, but was getting nonsense results. Upon examining your code, I was using stock rho instead of FAR rho and I had messed up the world vector. WARNING! I found during tests that the calculatevesslforces call can induce aerodynamic failures in wings in extreme cases. I opened a github issue on FAR. So if someone here tries to predict a really steep trajectory from a really high velocity, your fins/wings might get ripped off for no apparent reason while still in orbit. The good news is that if the predictions are accurate they were going to get ripped off anyways.\u003C/p\u003E\u003Cp\u003EI am making some progress on stock aero. I\u0027ll report back as I try a few things out.\u003C/p\u003E\n"},{"CreatedByName":"futrtrubl","CreatedById":77310,"CreatedDateTime":"2015-05-15T19:08:52Z","Content":"\n\u003Cp\u003EI believe MechJeb made some progress with stock aero landing predictions. Maybe check their way out?\u003C/p\u003E\n"},{"CreatedByName":"atomicfury","CreatedById":120037,"CreatedDateTime":"2015-05-15T20:30:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022futrtrubl\u0022 data-cite=\u0022futrtrubl\u0022\u003E\u003Cdiv\u003EI believe MechJeb made some progress with stock aero landing predictions. Maybe check their way out?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E@futrtubl, indeed Mechjeb implements predictions for stock aero. Almost everything I\u0027ve learned is based on trying to back out what MechJeb is doing and comparing to Trajectories. I\u0027m learning I have forgotten all my vector math from college.\u003C/p\u003E\u003Cp\u003EI\u0027ve also learned there are several drag curves that are functions of mach and well as direction, each part has a drag cube, such that vessel drag is a linear combination of those part drags (as a function of direction). Air density is important, and is a function of the temperature, which varies by location. All this has to be pieced together in such a way to determine total drag force for a vessel for use in Trajectories.\u003C/p\u003E\u003Cp\u003EI haven\u0027t even discussed lift yet. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E (Lift actually looks simpler).\u003C/p\u003E\u003Cp\u003ECompare to what ferram did, which was to hand all that off a single API call that figures the total drag/lift for any velocity direction you want in FAR. ferram = awesome.\u003C/p\u003E\u003Cp\u003EAnyways, I\u0027ve got a test plugin I\u0027m building to try to pull the stock aero lift/drag out as a prediction. My hope is to build something that can be plugged right into Trajectories.\u003C/p\u003E\u003Cp\u003EAnyone else lurking out there and want to discuss stock aero? I\u0027m thinking of starting a thread in Plugin Development.\u003C/p\u003E\n"},{"CreatedByName":"futrtrubl","CreatedById":77310,"CreatedDateTime":"2015-05-15T22:03:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022atomicfury\u0022 data-cite=\u0022atomicfury\u0022\u003E\u003Cdiv\u003E@futrtubl, indeed Mechjeb implements predictions for stock aero. Almost everything I\u0027ve learned is based on trying to back out what MechJeb is doing and comparing to Trajectories. I\u0027m learning I have forgotten all my vector math from college.\u003Cp\u003EI\u0027ve also learned there are several drag curves that are functions of mach and well as direction, each part has a drag cube, such that vessel drag is a linear combination of those part drags (as a function of direction). Air density is important, and is a function of the temperature, which varies by location. All this has to be pieced together in such a way to determine total drag force for a vessel for use in Trajectories.\u003C/p\u003E\u003Cp\u003EI haven\u0027t even discussed lift yet. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E (Lift actually looks simpler).\u003C/p\u003E\u003Cp\u003ECompare to what ferram did, which was to hand all that off a single API call that figures the total drag/lift for any velocity direction you want in FAR. ferram = awesome.\u003C/p\u003E\u003Cp\u003EAnyways, I\u0027ve got a test plugin I\u0027m building to try to pull the stock aero lift/drag out as a prediction. My hope is to build something that can be plugged right into Trajectories.\u003C/p\u003E\u003Cp\u003EAnyone else lurking out there and want to discuss stock aero? I\u0027m thinking of starting a thread in Plugin Development.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, really surprised stock didn\u0027t expose something similar. Oh well, doesn\u0027t affect me too much ass I am a FAR man to the core.\u003C/p\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2015-05-15T22:24:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022atomicfury\u0022 data-cite=\u0022atomicfury\u0022\u003E\u003Cdiv\u003EWARNING! I found during tests that the calculatevesslforces call can induce aerodynamic failures in wings in extreme cases.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI had the same issue with the previous version, and what I did was setting a very high tolerance on all parts (by C# reflection) just before performing the computations, and restoring the previous value just after. I did the same with the stall state of wings, because the cache system of the prediction works only for stateless aerodynamics (though I haven\u0027t make measurements to see if it really changed something). I think the same hack should still work, I\u0027ll take a look. And when/if ferram fixes the thing I\u0027ll remove the hack.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022atomicfury\u0022 data-cite=\u0022atomicfury\u0022\u003E\u003Cdiv\u003EI am making some progress on stock aero. I\u0027ll report back as I try a few things out.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for that :-)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-15T22:26:35Z\u0022 title=\u002205/15/2015 10:26  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 15, 2015\u003C/time\u003E by Youen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Instresu","CreatedById":119022,"CreatedDateTime":"2015-05-15T23:21:29Z","Content":"\n\u003Cp\u003EIs any compatibility for nuFAR planned/considered?\u003C/p\u003E\n"},{"CreatedByName":"Gryphon","CreatedById":58513,"CreatedDateTime":"2015-05-15T23:43:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Instresu\u0022 data-cite=\u0022Instresu\u0022\u003E\u003Cdiv\u003EIs any compatibility for nuFAR planned/considered?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESee last page. FAR compatibility is further along than stock, AFAIK.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Youen\u0022 data-cite=\u0022Youen\u0022\u003E\u003Cdiv\u003EVersion 1.2.0 (beta) is published on github \u003Ca href=\u0022https://github.com/neuoy/KSPTrajectories/releases\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/neuoy/KSPTrajectories/releases\u003C/a\u003E\u003Cp\u003EIt should work for vaccum predictions and FAR. It doesn\u0027t work fot stock aerodynamics at this time. Also, I have only tested it on a single flight, so you could expect bugs.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Instresu","CreatedById":119022,"CreatedDateTime":"2015-05-16T00:20:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gryphon\u0022 data-cite=\u0022Gryphon\u0022\u003E\u003Cdiv\u003ESee last page. FAR compatibility is further along than stock, AFAIK.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you for the fast response. Awesome.\u003C/p\u003E\n"},{"CreatedByName":"drtedastro","CreatedById":70911,"CreatedDateTime":"2015-05-16T06:44:23Z","Content":"\n\u003Cp\u003EThanks for the update and all of your work...\u003C/p\u003E\u003Cp\u003EMuch appreciated.\u003C/p\u003E\n"},{"CreatedByName":"atomicfury","CreatedById":120037,"CreatedDateTime":"2015-05-16T13:55:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Youen\u0022 data-cite=\u0022Youen\u0022\u003E\u003Cdiv\u003EI had the same issue with the previous version, and what I did was setting a very high tolerance on all parts (by C# reflection) just before performing the computations, and restoring the previous value just after. I did the same with the stall state of wings, because the cache system of the prediction works only for stateless aerodynamics (though I haven\u0027t make measurements to see if it really changed something). I think the same hack should still work, I\u0027ll take a look. And when/if ferram fixes the thing I\u0027ll remove the hack.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eferram just closed the github issue and committed some changes, next version of FAR should not rip wings off anymore. So don\u0027t work too hard on that hack. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2015-05-16T14:45:28Z","Content":"\n\u003Cp\u003EOK, great (I didn\u0027t start yet anyway ^^)\u003C/p\u003E\n"},{"CreatedByName":"Geschosskopf","CreatedById":69507,"CreatedDateTime":"2015-05-16T19:43:28Z","Content":"\n\u003Cp\u003EThanks muchos for the update!\u003C/p\u003E\n"},{"CreatedByName":"Andy81le","CreatedById":95393,"CreatedDateTime":"2015-05-16T20:33:15Z","Content":"\n\u003Cp\u003EAny chance of getting this via Ckan? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"zengei","CreatedById":75233,"CreatedDateTime":"2015-05-16T21:47:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Andy81le\u0022 data-cite=\u0022Andy81le\u0022\u003E\u003Cdiv\u003EAny chance of getting this via Ckan? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s already indexed by CKAN, but it would have to be updated on Kerbal Stuff.\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-05-16T22:54:30Z","Content":"\n\u003Cp\u003EThe version on Kerbalstuff is still 1.1.3\u003C/p\u003E\u003Cp\u003EThank you so much for the update. Installed and testing now.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-16T22:57:41Z\u0022 title=\u002205/16/2015 10:57  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 16, 2015\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"luckyhendrix","CreatedById":78280,"CreatedDateTime":"2015-05-16T23:54:09Z","Content":"\n\u003Cp\u003EDoes anyone else FPS drop to to almost 0, when plotting a trajectory that intercept an atmosphere in another SOI ?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-16T23:58:44Z\u0022 title=\u002205/16/2015 11:58  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 16, 2015\u003C/time\u003E by luckyhendrix\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-05-17T05:03:17Z","Content":"\n\u003Cp\u003EAwesome, this is a very awesome mod, any chances of it eventually working on the stock model? Doesn\u0027t flight integrator helps?\u003C/p\u003E\n"},{"CreatedByName":"futrtrubl","CreatedById":77310,"CreatedDateTime":"2015-05-17T06:12:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gfurst\u0022 data-cite=\u0022Gfurst\u0022\u003E\u003Cdiv\u003EAwesome, this is a very awesome mod, any chances of it eventually working on the stock model? Doesn\u0027t flight integrator helps?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe problem is FAR nicely provides a method to just ask it for the data and it provides it. Stock does not. Even worse we can\u0027t see the stock code and how it actually does it like we can with FAR so the best you can do is guess and see how well that matches what you see in the game.\u003C/p\u003E\n"},{"CreatedByName":"Lubo","CreatedById":136723,"CreatedDateTime":"2015-05-18T14:55:48Z","Content":"\n\u003Cp\u003EHey fellas,\u003C/p\u003E\u003Cp\u003EEveryone here happy with the mod uses FAR ? \u003C/p\u003E\u003Cp\u003EJust to be sure the atmospheric trajectories dont work on stock aerodynamics?!\u003C/p\u003E\u003Cp\u003EWill it be updated for stock aero shorty?\u003C/p\u003E\u003Cp\u003Edont wanna miss out on that mod and dont wanna go back to FAR \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2015-05-18T15:01:13Z","Content":"\n\u003Cp\u003EI don\u0027t use FAR (I did in 0.90). Trajectories does not display for me in the TS. No icon in stock nor blizzy\u0027s toolbar. Perhaps competing with another mod??\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-05-18T17:31:16Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@Apollo13 @tubo\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ESeriously, just read the post above both of yours. I\u0027ve asked a similar thing and \u003Cstrong\u003E@futrtrubl\u003C/strong\u003E answered...\u003C/p\u003E\n"},{"CreatedByName":"PeskyPony","CreatedById":136239,"CreatedDateTime":"2015-05-18T21:02:30Z","Content":"\n\u003Cp\u003EI love this mod so much that I went back to FAR just so I could use it. But when I plot a maneuver to leave Mun\u0027s SOI to go back to Kerbin, the game freezes and/or crashes. It\u0027s happened everytime with the two ships I tested this on. The only workarounds were to either disable Trajectories from the toolbar or uninstall the mod, perform the maneuver, leave the SOI and then reinstall.\u003C/p\u003E\u003Cp\u003EAnybody else getting this?\u003C/p\u003E\n"},{"CreatedByName":"mic_e","CreatedById":60757,"CreatedDateTime":"2015-05-19T11:14:16Z","Content":"\n\u003Cp\u003ESomehow Trajectories doesn\u0027t appear in CKAN right now; please fix that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EUpdate: ah, it\u0027s because KerbalStuff still has the outdated version. Please fix that too \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"DaveMcC","CreatedById":124484,"CreatedDateTime":"2015-05-19T19:45:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022PeskyPony\u0022 data-cite=\u0022PeskyPony\u0022\u003E\u003Cdiv\u003EI love this mod so much that I went back to FAR just so I could use it. But when I plot a maneuver to leave Mun\u0027s SOI to go back to Kerbin, the game freezes and/or crashes. It\u0027s happened everytime with the two ships I tested this on. The only workarounds were to either disable Trajectories from the toolbar or uninstall the mod, perform the maneuver, leave the SOI and then reinstall.\u003Cp\u003EAnybody else getting this?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m getting the same thing, its filling the log with:\u003C/p\u003E\u003Cp\u003E\u0022[LOG 20:40:12.574] Trajectories: WARNING: FAR/NEAR totalForce is NAN (altitude=3000, airVelocity=3000, angleOfAttack=0\u003C/p\u003E\u003Cp\u003E[LOG 20:40:12.576] Trajectories: getting FAR forces\u003C/p\u003E\u003Cp\u003E[LOG 20:40:12.578] Trajectories: got FAR forces\u003C/p\u003E\u003Cp\u003E[LOG 20:40:12.579] Trajectories: WARNING: FAR/NEAR totalForce is NAN (altitude=3000, airVelocity=3000, angleOfAttack=0\u003C/p\u003E\u003Cp\u003EIll try to work out how to give you the full log if I can.\u003C/p\u003E\u003Cp\u003ECheers, Dave.\u003C/p\u003E\n"}]}