{"TopicId":84504,"ForumId":34,"TopicTitle":"[old thread] Trajectories : atmospheric predictions","CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-13T15:42:57Z","PageNum":4,"Articles":[{"CreatedByName":"mic_e","CreatedById":60757,"CreatedDateTime":"2014-09-15T11:00:24Z","Content":"\n\u003Cp\u003ERegarding the suggestion: I\u0027ve already implemented it; pull request is incoming \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EPreview: \u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/Uhmk0\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EEdit: I\u0027ve sent the pull request.\u003C/p\u003E\u003Cp\u003EEdit: I\u0027ve sent another pull request, fixing a minor issue. The pull requests should be independently mergeable.\u003C/p\u003E\u003Cp\u003EEdit: I have entered some bugs into the issue tracker.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-15T14:13:06Z\u0022 title=\u002209/15/2014 02:13  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 15, 2014\u003C/time\u003E by mic_e\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MK3424","CreatedById":19932,"CreatedDateTime":"2014-09-15T12:05:48Z","Content":"\n\u003Cp\u003EHave you considered it implementing it into maneuver nodes trajectory? ( i know, i have requested it before here and on the bugtracker)\u003C/p\u003E\n"},{"CreatedByName":"biohazard15","CreatedById":91655,"CreatedDateTime":"2014-09-15T14:30:28Z","Content":"\n\u003Cp\u003ELooks super useful! Can\u0027t wait for NEAR integration.\u003C/p\u003E\n"},{"CreatedByName":"dreadicon","CreatedById":117295,"CreatedDateTime":"2014-09-15T17:03:20Z","Content":"\n\u003Cp\u003Ewow, this is indeed amazing! Not only have you solved the FAR problem everyone said was impossible, but implemented an insanely useful feature!\u003C/p\u003E\u003Cp\u003EI\u0027ll throw my request hat in with RasterProp support myself, but the node support and stock toolbar integration would be cool too. \u003C/p\u003E\u003Cp\u003EIn any case, I will be following the github. I may find time yet to contribute to a mod xD.\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-15T17:54:37Z","Content":"\n\u003Cp\u003Eholy hell the body-fixed mode screwed with my brain initially before I understood what it was plotting. That\u0027s really cool\u003C/p\u003E\n"},{"CreatedByName":"rottielover","CreatedById":73403,"CreatedDateTime":"2014-09-16T05:20:05Z","Content":"\n\u003Cp\u003EWhat am I missing here. I\u0027ve installed it, but I never see the red lines like others are showing in screenshots. I managed to get a white line to show up if I turned off auto-update, but I never get the red line or an X anywhere... \u003C/p\u003E\u003Cp\u003ENot sure what I\u0027m doing wrong?\u003C/p\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2014-09-16T06:12:32Z","Content":"\n\u003Cp\u003EThis is fantastic! I\u0027ve always said that there are models for atmospheric reentry trajectories, but now it is lain bare for all to see! My question for the OP: Is there any interest in extrapolating this mod to unfocused vessels/debris? It would be sp awesome to see this get used for a true to life, honest to goodness stage recovery mod which uses the actual physics rather than (admittedly very adequate) number checking.\u003C/p\u003E\n"},{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2014-09-16T08:45:04Z","Content":"\n\u003Cp\u003EGreat Idea..\u003C/p\u003E\u003Cp\u003EDoes it show your landing spot only in the flight scene? Or only on the map. Because if you could show the touch down site with some kind of decal in the flight scenethat would be totally awesome.\u003C/p\u003E\u003Cp\u003EThe problem with map view only is that it only works on relative large scales. So when you\u0027re \u0027hopping\u0027 your colony buildings a few meters map view really is no help at all.\u003C/p\u003E\n"},{"CreatedByName":"Highlad","CreatedById":64590,"CreatedDateTime":"2014-09-16T09:08:33Z","Content":"\n\u003Cp\u003ESo whats the story with this and NEAR/FAR? Would love to see some sort of FAR compatibility.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-09-16T09:16:13Z","Content":"\n\u003Cp\u003EThe OP says: \u0022- it works only with FAR and stock drag (actually, stock drag is probably broken in the current release) at this time ; NEAR integration and others coming soon\u0022\u003C/p\u003E\u003Cp\u003EReading opening posts is good policy. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-16T10:46:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rottielover\u0022 data-cite=\u0022rottielover\u0022\u003E\u003Cdiv\u003EWhat am I missing here. I\u0027ve installed it, but I never see the red lines like others are showing in screenshots. I managed to get a white line to show up if I turned off auto-update, but I never get the red line or an X anywhere... \u003Cp\u003ENot sure what I\u0027m doing wrong?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo you use FAR ? If yes, do you know what version is installed ? Do you get a white message on the right of the screen when starting or resuming a flight ?\u003C/p\u003E\u003Cp\u003EAlso, did you download the last version (i.e. Trajectories.zip, version 0.1.1) ?\u003C/p\u003E\u003Cp\u003EIf you don\u0027t use FAR, the mod should use the stock aerodynamic model instead, but apparently this is broken in the current release. That will be fixed in the next release.\u003C/p\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-16T10:51:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022willow\u0022 data-cite=\u0022willow\u0022\u003E\u003Cdiv\u003EGreat Idea..\u003Cp\u003EDoes it show your landing spot only in the flight scene? Or only on the map. Because if you could show the touch down site with some kind of decal in the flight scenethat would be totally awesome.\u003C/p\u003E\u003Cp\u003EThe problem with map view only is that it only works on relative large scales. So when you\u0027re \u0027hopping\u0027 your colony buildings a few meters map view really is no help at all.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOnly on the map. I\u0027m not fan of displaying stuff directly in the flight scene as it doesn\u0027t really fit with the rest of the game (admittedly, an external camera is already a bad thing for immersion, but drawing 3D lines is worst). About precision for setting the target point, I\u0027m planning to add an option to specify an existing object (a flag, another vessel, etc.). And in the flight scene, you have two indicators on the nav ball that tell you if you\u0027re on the correct trajectory or not (look at the screenshots in the first post). They\u0027ll be embellished in a future release :-)\u003C/p\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-16T10:57:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tntristan12\u0022 data-cite=\u0022tntristan12\u0022\u003E\u003Cdiv\u003EThis is fantastic! I\u0027ve always said that there are models for atmospheric reentry trajectories, but now it is lain bare for all to see! My question for the OP: Is there any interest in extrapolating this mod to unfocused vessels/debris? It would be sp awesome to see this get used for a true to life, honest to goodness stage recovery mod which uses the actual physics rather than (admittedly very adequate) number checking.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t know how recovery mods work. In fact I don\u0027t exactly know how KSP handles objects that reenter atmosphere but are far away (they are just destroyed ?) or crash on a body. The Trajectories mod could help pre-compute a trajectory, or offer an unified interface to compute aerodynamic forces whatever mods are installed (FAR, NEAR, etc.), but at this time it is really targeted at giving you a possible entry trajectory, not computing a free fall trajectory. It assumes you\u0027ll keep your wings horizontal and follow the planned descent profile. At no time does it compute torques, which would make debris rotate, which would change drag. Also, I use an aerodynamic force cache that is specific for one vessel. Even if it doesn\u0027t use too much memory, having a cache for each debris, assuming there are a lot of them, could become expensive.\u003C/p\u003E\u003Cp\u003ETo sum up, there are certainly ideas that could be re-used, but it\u0027s not really adequate for a recovery mod in its current state.\u003C/p\u003E\n"},{"CreatedByName":"mic_e","CreatedById":60757,"CreatedDateTime":"2014-09-16T11:46:46Z","Content":"\n\u003Cp\u003EOn-rails vessels get destroyed once they are below a specific altitude (30ish kilometers), defined by a pressure limit (0.01 atmospheres, I think).\u003C/p\u003E\u003Cp\u003ERecovery mods hook into that destruction event, and calculate the vessel\u0027s mass/parachute area to determine whether the vessel will survive.\u003C/p\u003E\u003Cp\u003EBasically what you/a recovery mod author could do (probably in collaboration) is to run one single simulation when a piece of debris is put on-rails, and store the resulting landing spot/peak g-force. The recovery mod would still have to do its own parachute/mass ratio calculation, but in addition, destruction of debris that enters too steeply would work now.\u003C/p\u003E\u003Cp\u003EOne step further, it would be possible to use atmospheric simulations for all on-rails craft, once per orbit, to allow things such as letting the orbit decay slowly. That would work _even_ if the craft is actually above the cutoff altitude. Imagine the awesomeness... Watching a 90-km orbit decay over the course of a few weeks...\u003C/p\u003E\u003Cp\u003ESo while a unified interface to provide aerodynamic forces would be great, a unified interface to provide full simulations of atmospheric patches, yielding things like max-g, resulting orbit/landing spot, and duration, would be much more useful, IMO.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-16T11:57:11Z\u0022 title=\u002209/16/2014 11:57  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 16, 2014\u003C/time\u003E by mic_e\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Hattivat","CreatedById":110255,"CreatedDateTime":"2014-09-16T12:54:28Z","Content":"\n\u003Cp\u003EI like where this is going. I like it very much in fact, potentially super useful stuff.\u003C/p\u003E\n"},{"CreatedByName":"Climberfx","CreatedById":57126,"CreatedDateTime":"2014-09-16T14:45:04Z","Content":"\n\u003Cp\u003EWe\u0027ll, is me don\u0027t having time to play and the good things start to show up.\u003C/p\u003E\u003Cp\u003ESeams amazing this. I\u0027ll need to read all post first, but it is like what i already have on MechJeb, but different. Need to try.\u003C/p\u003E\u003Cp\u003EI see it check the survival for FAR, rsrsrsrs. Cool\u003C/p\u003E\u003Cp\u003EGreat Work\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-16T14:51:38Z\u0022 title=\u002209/16/2014 02:51  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 16, 2014\u003C/time\u003E by Climberfx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2014-09-16T15:55:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Youen\u0022 data-cite=\u0022Youen\u0022\u003E\u003Cdiv\u003EI don\u0027t know how recovery mods work. In fact I don\u0027t exactly know how KSP handles objects that reenter atmosphere but are far away (they are just destroyed ?) or crash on a body. The Trajectories mod could help pre-compute a trajectory, or offer an unified interface to compute aerodynamic forces whatever mods are installed (FAR, NEAR, etc.), but at this time it is really targeted at giving you a possible entry trajectory, not computing a free fall trajectory. It assumes you\u0027ll keep your wings horizontal and follow the planned descent profile. At no time does it compute torques, which would make debris rotate, which would change drag. Also, I use an aerodynamic force cache that is specific for one vessel. Even if it doesn\u0027t use too much memory, having a cache for each debris, assuming there are a lot of them, could become expensive.\u003Cp\u003ETo sum up, there are certainly ideas that could be re-used, but it\u0027s not really adequate for a recovery mod in its current state.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh I\u0027m sure there are obstacles that need to be overcome. The drag profile would be the most difficult one I think. It\u0027s easy in stock because drag depends on mass only, so the orientation does not matter (yuck). As for FAR or other models with a realistic drag profile, one could just store the last known orientation of the vessel and assume it never changes. This isn\u0027t too far-fetched since KSP already does this when you enter time warp.\u003C/p\u003E\u003Cp\u003EAfter this point, I guess a hybrid system where you check the total heat tolerance / number of parachutes / terminal velocity like DebRefund does to return a yes/no on wether the craft survives. Your mod tells it where on the surface of kerbin it ends up and instead of the game automatically recovering the spent stages, it teleports them to that spot on the map where the player can continue playing or recover manually. No external windows required to manage recovered assets, and it could work on other worlds too - probes to Laythe and Eve could practically land themselves!\u003C/p\u003E\u003Cp\u003EOf course for this mod as it is now, I\u0027m very impressed. Just saying how I would do the stage recovery thing. Keep doing what you\u0027re doing though. I\u0027m just a fan boy tossing out random ideas. Lol\u003C/p\u003E\n"},{"CreatedByName":"rottielover","CreatedById":73403,"CreatedDateTime":"2014-09-16T17:37:46Z","Content":"\n\u003Cp\u003EThanks for the assist. It turns out I missed coping the FAR directory over when I was installing all the other mods. Thanks again.\u003C/p\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-16T20:53:52Z","Content":"\n\u003Cp\u003EI\u0027ve released a new version. It should now work correctly with FAR and the stock model (auto-selected, you have nothing to do). Let me know if you still have issues such as the red trajectory not displaying, big performance issues, etc.\u003C/p\u003E\n"},{"CreatedByName":"The Pink Ranger","CreatedById":116650,"CreatedDateTime":"2014-09-16T23:13:19Z","Content":"\n\u003Cp\u003EHey so if I\u0027m using FAR and facing prograde as I approach a planet for aerobraking will the program assume that I\u0027ll be facing prograde the whole way around the predicted trajectory?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-16T23:16:07Z\u0022 title=\u002209/16/2014 11:16  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 16, 2014\u003C/time\u003E by The Pink Ranger\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-17T06:26:22Z","Content":"\n\u003Cp\u003EYes, unless you modify the descent profile (you can set your angle of attack or horizon angle for entry, high altitude, low altitude, and near the ground). These angles are used to predict the trajectory, and indicated on your nav ball along with another indicator telling you the direction to go to correct your trajectory in case you\u0027ve drifted from the target.\u003C/p\u003E\u003Cp\u003EFor the particular case of aerobraking (without reaching the ground), you don\u0027t have indicators on the nav ball, so the simplest is probably to follow the prograde vector (set AoA to 0\u00C3\u201A\u00C2\u00B0 for all altitudes). This is something I should improve (for example, allow to target a precise post-aerobrake apoapsis and use the indicator for that)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-17T06:31:15Z\u0022 title=\u002209/17/2014 06:31  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 17, 2014\u003C/time\u003E by Youen\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2014-09-17T07:00:08Z","Content":"\n\u003Cp\u003EI agree, 3d lines would be ugly... But, an optional \u0022x marks the spot\u0022 where your plot intersects the ground might not be so bad?\u003C/p\u003E\u003Cp\u003EIt would do wonders for peoples ability to do precision burns over small distances.\u003C/p\u003E\u003Cp\u003EHint hint poke poke \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E Hehe, it\u0027s your mod, your vision, I think it\u0027s already tremendously usefull so I\u0027ll be using it either way.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-09-17T07:56:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tntristan12\u0022 data-cite=\u0022tntristan12\u0022\u003E\u003Cdiv\u003EOh I\u0027m sure there are obstacles that need to be overcome. The drag profile would be the most difficult one I think. It\u0027s easy in stock because drag depends on mass only, so the orientation does not matter (yuck). As for FAR or other models with a realistic drag profile, one could just store the last known orientation of the vessel and assume it never changes. This isn\u0027t too far-fetched since KSP already does this when you enter time warp.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EProper FAR prediction always has been a major headache and probably will remain so. Aerodynamics are a rather complex affair and FAR manages to replicate that with a decent amount of accuracy.\u003C/p\u003E\n"},{"CreatedByName":"TMS","CreatedById":57134,"CreatedDateTime":"2014-09-17T10:33:22Z","Content":"\n\u003Cp\u003EPossible bug report: a second (non-focused) craft which is throttling leads to flickering GUIs when it leaves the physics range of the focused craft.\u003C/p\u003E\u003Cp\u003EThis was using FAR, many other mods. Need to replicate.\u003C/p\u003E\n"},{"CreatedByName":"Rockstar04","CreatedById":83286,"CreatedDateTime":"2014-09-17T13:13:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TMS\u0022 data-cite=\u0022TMS\u0022\u003E\u003Cdiv\u003EPossible bug report: a second (non-focused) craft which is throttling leads to flickering GUIs when it leaves the physics range of the focused craft.\u003Cp\u003EThis was using FAR, many other mods. Need to replicate.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat MAY be an issue with FAR itself. I have had the same issue and have never used this mod. Maybe take a look over at the FAR thread?\u003C/p\u003E\n"}]}