{"TopicId":74782,"ForumId":34,"TopicTitle":"[1.3] Smartstage, intelligent VAB reset button 2.9.7","CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-06-11T18:31:45Z","PageNum":2,"Articles":[{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2014-09-19T11:22:32Z","Content":"\n\u003Cp\u003EI\u0027ve tried this and it really works. It also manages to put the chutes in the proper stage. It\u0027s really good, I don\u0027t understand why this hasn\u0027t received a whole lot more attention \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EGood work xytovl\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-02T21:45:05Z","Content":"\n\u003Cp\u003EI am currently working on a full simulation version. I have published on github preliminary work: the plugin will now do a numerical integration of rocket launch and compute stages interactively.\u003C/p\u003E\u003Cp\u003EThe aim is to be able to plot rocket performance: TWR, altitude over time. And also catch some corner cases where we need to limit thrust and it would mess with stage times.\u003C/p\u003E\u003Cp\u003EMy plan is to have the following controls:\u003C/p\u003E\u003Cp\u003E*departure planet selection\u003C/p\u003E\u003Cp\u003E*limit to terminal velocity checkbox\u003C/p\u003E\u003Cp\u003E*limit acceleration field\u003C/p\u003E\u003Cp\u003EAre there other features that you would like to see in an upcoming version ?\u003C/p\u003E\n"},{"CreatedByName":"Deems19","CreatedById":119834,"CreatedDateTime":"2014-12-07T21:21:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xytovl\u0022 data-cite=\u0022xytovl\u0022\u003E\u003Cdiv\u003EI am currently working on a full simulation version. I have published on github preliminary work: the plugin will now do a numerical integration of rocket launch and compute stages interactively.\u003Cp\u003EThe aim is to be able to plot rocket performance: TWR, altitude over time. And also catch some corner cases where we need to limit thrust and it would mess with stage times.\u003C/p\u003E\u003Cp\u003EMy plan is to have the following controls:\u003C/p\u003E\u003Cp\u003E*departure planet selection\u003C/p\u003E\u003Cp\u003E*limit to terminal velocity checkbox\u003C/p\u003E\u003Cp\u003E*limit acceleration field\u003C/p\u003E\u003Cp\u003EAre there other features that you would like to see in an upcoming version ?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe new features sound very promising, I frankly can\u0027t think of anything I would like to see added. I really like the simplicity of Smartstage and I wouldn\u0027t want to see it bloated with unnecessary features. \u003C/p\u003E\u003Cp\u003ESmartstage, as it exists right now, is extremely helpful and solves a major gameplay problem that still exists in stock KSP (ie: the staging process). Staging is probably my least favorite part of the vessel design process (and KSP as a whole) because I can usually figure out my staging in a matter of seconds but Stock KSP\u0027s lack of efficient editing tools and it\u0027s generally bad UI design/visual cues (ie: bad part highlighting which makes tracking down the part associated with a specific staging icon a truly maddening process(The \u0022Part Highlighter\u0022 mod makes this problem much more bearable)) makes the staging process an extremely boring and repetitive task that takes an absurd amount of time to complete and test. Smartstage has made the whole process much less frustrating and allows me to spend more time doing the things I actually enjoy in KSP.\u003C/p\u003E\u003Cp\u003ESmartstage has been an essential mod for me for a while. I consider it as important as mods like Editor Extensions, Part Highlighter, NavHud, FAR, Kerbal Joint Reinforcement, etc. So I hope to see its continued development and support. I remain mystified by the lack of responses on this thread considering the quality of the mod. But maybe it just works so well that almost no one needs to post on this thread to ask questions or seek assistance \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"hakan","CreatedById":92934,"CreatedDateTime":"2014-12-07T21:50:01Z","Content":"\n\u003Cp\u003EI need to check whether this is a good alternative to AutoAsparagus, which is much more constrained in scope.\u003C/p\u003E\u003Cp\u003Exytovl , would you mind adding an entry at kerbalstuff for your addon too? CKAN can pick up releases at github, but full kerbalstuff is better integrated \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-08T23:21:30Z","Content":"\n\u003Cp\u003EI have reached a state where I can publish a \u003Cstrong\u003Efirst beta of version 2.0\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EYou can grab it \u003Ca href=\u0022http://www.meumeu.org/~xytovl/SmartStage-2.0-beta.zip\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003Ehere\u003C/strong\u003E\u003C/a\u003E or compile latest version from \u003Ca href=\u0022https://github.com/xytovl/SmartStage\u0022 rel=\u0022external nofollow\u0022\u003Emy github repository\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe major change is that there is now an advanced mode where you tell the planet, terminal velocity limitation and maximum acceleration, the mod will simulate the launch in order to know the pressure over time and required throttle. If you have mixed solid boosters and liquid fuel it could change the relative staging, problem is now solved. It can also make a difference for engines with very different ISP at sea level.\u003C/p\u003E\u003Cp\u003EIn this first beta, user interface is horrible I know, plot looks disgusting and there will be bugs.\u003C/p\u003E\u003Cp\u003E@hakan:\u003C/p\u003E\u003Cp\u003EAutoasparagus has a different philosophy, it will modify your rocket to make it asparagus staged.\u003C/p\u003E\u003Cp\u003EI believe that putting the parts together is a fun part of KSP, so SmartStage will just help you arranging the stages, and only the staging.\u003C/p\u003E\u003Cp\u003EI will have a look at kerbalstuff when 2.0 final is ready.\u003C/p\u003E\u003Cp\u003E@Deems19\u003C/p\u003E\u003Cp\u003EI am happy to see I am not the only one using the mod \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-09T21:06:33Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022https://github.com/xytovl/SmartStage/releases/download/v2.0/SmartStage-2.0.zip\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EVersion 2.0 released !\u003C/span\u003E\u003C/a\u003E (first post updated)\u003C/p\u003E\u003Cp\u003EPlots and ascent simulation included.\u003C/p\u003E\n"},{"CreatedByName":"MK3424","CreatedById":19932,"CreatedDateTime":"2014-12-09T22:27:10Z","Content":"\n\u003Cp\u003ECool simulation but can you make an option to disable the auto sort stage?\u003C/p\u003E\u003Cp\u003EI find the ascent simulation to be very helpful but the plugin scrambles some of the stages.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-09T22:50:17Z","Content":"\n\u003Cp\u003EI have implemented classes to compute fuel flow, throttle control and numerical integration (still the limit to terminal velocity is not accurate enough). It would be possible to reuse them just to compute and plot data.\u003C/p\u003E\u003Cp\u003EFor the moment I do not plan to implement the \u0022plot only\u0022 feature, maybe when I have some time to waste.\u003C/p\u003E\u003Cp\u003EWhen you say it scrambles some stages, do you have .craft files where the computed staging is incorrect? I may find a way to improve decision making in the algorithm.\u003C/p\u003E\n"},{"CreatedByName":"MK3424","CreatedById":19932,"CreatedDateTime":"2014-12-09T23:18:40Z","Content":"\n\u003Cp\u003EShure, here\u0027s the craft in question:\u003Ca href=\u0022http://kerbalx.com/crafts/226\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kerbalx.com/crafts/226\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIt is my design but available for public.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-10T06:36:26Z","Content":"\n\u003Cp\u003EThe issue with your craft is that fuel flow does not happen correctly. Interstage fairings either do not alow crossfeed at all, and tanks placed over it are unused or they allow crossfeed and fuel from the upper stage is drained.\u003C/p\u003E\u003Cp\u003EIf you are using an additional mod to change fuel rules, this is not supported by SmartStage, and plots would be completeley wrong too \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe second issue is the launch escape system, SmartStage should just ignore it and it should keep the same stage number it had. I\u0027ll see if I can do anything about that.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-10T21:46:44Z","Content":"\n\u003Cp\u003EA quick 2.1 update that improves plot quality. Acceleration should be more accurate now.\u003C/p\u003E\u003Cp\u003EPlot also displays throttle and optionally altitude.\u003C/p\u003E\n"},{"CreatedByName":"Pappystein","CreatedById":85755,"CreatedDateTime":"2014-12-11T00:17:16Z","Content":"\n\u003Cp\u003EQuestion, I use FASA Launchclamps for many of my rockets (FASA is the core parts mod I use.) How does your plugin deal with launch clamps that mount under the engines or mount high on the rocket?\u003C/p\u003E\u003Cp\u003ETHANKS this mod looks amazing and I am curious how it will help with my big Nova rocket builds.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-11T06:35:13Z","Content":"\n\u003Cp\u003EThe plugin checks the part modules and if there is a \u0022LaunchClamp\u0022, the part is activated at the beginning and not used during simulation.\u003C/p\u003E\u003Cp\u003EThe part definitions in FASA launchclamps (.cfg files) contain the MODULE { name = LaunchClamp} section so it should be ok.\u003C/p\u003E\n"},{"CreatedByName":"miceliux","CreatedById":72239,"CreatedDateTime":"2014-12-12T11:15:50Z","Content":"\n\u003Cp\u003EI think there is something odd with the plugin window. It shows up when you click in its button, but to hide it, I have to click in another plugin button.\u003C/p\u003E\u003Cp\u003ESomeone else is experiencing this odd behaviour?\u003C/p\u003E\n"},{"CreatedByName":"Sirrobert","CreatedById":70591,"CreatedDateTime":"2014-12-16T22:08:22Z","Content":"\n\u003Cp\u003EThis looks really cool.\u003C/p\u003E\u003Cp\u003EDoes it work with groups of radially placed boosters (in symmetry), that you individually add fuel lines to? (where you\u0027d have to identify and split the stack of decouplers in the staging menu)\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-16T22:17:31Z","Content":"\n\u003Cp\u003E@miceliux:\u003C/p\u003E\u003Cp\u003Ethe window appears just by hovering the icon, clicking it will compute staging. I could not find any better way to allow staging with one click but have more advanced options.\u003C/p\u003E\u003Cp\u003E@Sirrobert:\u003C/p\u003E\u003Cp\u003EYes it works with any odd combination you could imagine. It works by simulating fuel consumption over time and firing individual decouplers as soon as the parts attached to it contain no fuel. If you have any craft that does an unexpected staging, you can provide the file and I\u0027ll try to fix the algorithm.\u003C/p\u003E\n"},{"CreatedByName":"miceliux","CreatedById":72239,"CreatedDateTime":"2014-12-17T07:39:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xytovl\u0022 data-cite=\u0022xytovl\u0022\u003E\u003Cdiv\u003E@miceliux:\u003Cp\u003Ethe window appears just by hovering the icon, clicking it will compute staging. I could not find any better way to allow staging with one click but have more advanced options.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBut when you hover out, the window persists. In other mods, when you hover out, the window closes.\u003C/p\u003E\u003Cp\u003EYou can pin the window actually clicking in the icon. Just seems like an inconsistent behaviour to me.\u003C/p\u003E\u003Cp\u003EAnyway, thanks for your work.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-12-18T05:25:16Z","Content":"\n\u003Cp\u003EAn enhancement request. When I click SmartStage, the parachutes that are on my first stage boosters are moved to the final stage on top where my command capsule parachute is.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-18T07:22:18Z","Content":"\n\u003Cp\u003E2.4.0 is out\u003C/p\u003E\u003Cp\u003ENow parachutes are activated with the part that is being decoupled.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-12-18T18:18:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xytovl\u0022 data-cite=\u0022xytovl\u0022\u003E\u003Cdiv\u003E2.4.0 is out\u003Cp\u003ENow parachutes are activated with the part that is being decoupled.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003Ethat was quick. thanks\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-18T19:07:24Z","Content":"\n\u003Cp\u003EI sometimes make craft with odd staging in the payload, especially when they are to be put together in orbit or have multiple landers. Is it be possible to exclude some stages from the mod?\u003C/p\u003E\n"},{"CreatedByName":"hab136","CreatedById":75997,"CreatedDateTime":"2014-12-18T19:20:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xytovl\u0022 data-cite=\u0022xytovl\u0022\u003E\u003Cdiv\u003E@hakan:\u003Cp\u003EAutoasparagus has a different philosophy, it will modify your rocket to make it asparagus staged.\u003C/p\u003E\u003Cp\u003EI believe that putting the parts together is a fun part of KSP, so SmartStage will just help you arranging the stages, and only the staging.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAutoAsparagus originally \u003Cem\u003Eonly\u003C/em\u003E did staging. I hated staging sepratrons!! Creating fuel lines was a secondary feature added later. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAutoAsparagus won\u0027t modify existing fuel lines, so if you already have fuel lines on the rocket, AutoAsparagus winds up only doing the staging. I actually originally had separate buttons for \u0022add fuel lines\u0022 and \u0022staging\u0022 so you could do just one or the other, but people complained that it was too complicated. Really! So I went for the one-button-does-it-all approach, which internally just goes through the steps listed in the original window. Compare:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/wbWSwAL.png\u0022 alt=\u0022wbWSwAL.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/IVfW2jl.png\u0022 alt=\u0022IVfW2jl.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI took a peek at your code to see if you\u0027ve discovered any awesome staging tricks (or ship refreshing tricks), but I just see part.inverseStage, Staging.SetStageCount(), and Staging.SortIcons(), which is what I \u003Cem\u003Eeventually\u003C/em\u003E found (KSP\u0027s mod documentation is.. uh.. not exactly complete).\u003C/p\u003E\u003Cp\u003EYour code does look significantly more well-designed and comprehensive.. my code was 99% seat-of-the-pants \u0022let\u0027s try this method!\u0022 and \u0022I can\u0027t believe it works!\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EMy block of code that figures out the start and end points of the fuel lines especially reminded me of Edison\u0027s quote \u0022I have not failed. I\u0027ve just found 10,000 ways that won\u0027t work.\u0022 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//f.direction=(f.transform.position - destTank.transform.position).normalized;\u003Cbr\u003E//f.direction = f.transform.localRotation * f.transform.localPosition;  // only works if destTank is parent\u003Cbr\u003E//f.direction = (f.transform.InverseTransformPoint(destTank.transform.position) - f.transform.localPosition).normalized;  // works but crooked\u003Cbr\u003E//f.direction = (f.transform.InverseTransformPoint(destPosition) - f.transform.localPosition).normalized; // doesn\u0027t connect\u003Cbr\u003E//f.direction = (f.transform.InverseTransformPoint(destPosition) - f.transform.localPosition); // doesn\u0027t connect\u003Cbr\u003Ef.direction = f.transform.InverseTransformPoint (destTank.transform.position).normalized;  // correct!\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI will say your isSepratron() is interesting - what does it do with a lander launched upside-down (engines pointing to the sky) on top of a booster rocket? I suppose looking at the angle is more flexible than just checking the part name for \u0022sepMotor\u0022. I just discovered that there are modded fuel lines yesterday, so.. maybe there are modded sepratrons too?\u003C/p\u003E\n"},{"CreatedByName":"Errol","CreatedById":118622,"CreatedDateTime":"2014-12-18T19:23:55Z","Content":"\n\u003Cp\u003EI imagine the best way to use this mod with complex complete missions with landers like you describe would be to first design your payload, however you need to to accomplish the mission, and look at it\u0027s rough size and gross weight. Then in a new craft file design the lift vehicle, using dead weight place holders....there are part mods for this, so that this algorithm is only concerned with one rocket at a time.\u003C/p\u003E\u003Cp\u003EEDIT: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/72707-KERBAL-NRAP-Adjustable-test-weight-for-lifter-building\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/76231-0-24-x-Kerbal-NRAP-Procedural-test-weights%21-v1-5-0-1-03-08-14\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-18T19:27:49Z\u0022 title=\u002212/18/2014 07:27  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 18, 2014\u003C/time\u003E by Errol\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-18T19:59:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Errol\u0022 data-cite=\u0022Errol\u0022\u003E\u003Cdiv\u003EI imagine the best way to use this mod with complex complete missions with landers like you describe would be to first design your payload, however you need to to accomplish the mission, and look at it\u0027s rough size and gross weight. Then in a new craft file design the lift vehicle, using dead weight place holders....there are part mods for this, so that this algorithm is only concerned with one rocket at a time.\u003Cp\u003EEDIT: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/72707-KERBAL-NRAP-Adjustable-test-weight-for-lifter-building\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/76231-0-24-x-Kerbal-NRAP-Procedural-test-weights%21-v1-5-0-1-03-08-14\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELooks like just what I need.\u003C/p\u003E\n"},{"CreatedByName":"xytovl","CreatedById":112756,"CreatedDateTime":"2014-12-18T22:25:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hab136\u0022 data-cite=\u0022hab136\u0022\u003E\u003Cdiv\u003EAutoAsparagus originally \u003Cem\u003Eonly\u003C/em\u003E did staging. I hated staging sepratrons!! Creating fuel lines was a secondary feature added later. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EI will say your isSepratron() is interesting - what does it do with a lander launched upside-down (engines pointing to the sky) on top of a booster rocket? I suppose looking at the angle is more flexible than just checking the part name for \u0022sepMotor\u0022. I just discovered that there are modded fuel lines yesterday, so.. maybe there are modded sepratrons too?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe main reason I did that is because I hate comparing strings, the compiler won\u0027t notice if Squad decides to change a name and it will be hard to find the problem...\u003C/p\u003E\u003Cp\u003EIf you have a lander upside down, the engines will get activated when they get separated from the root part. As it is likely not to happen, staging will not be changed for that part and you will probably find it in the first stage.\u003C/p\u003E\u003Cp\u003EI can not imagine a generic way of staging an upside down part of the rocket.\u003C/p\u003E\n"}]}