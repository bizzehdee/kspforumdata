{"TopicId":209714,"ForumId":34,"TopicTitle":"[1.12.x] Parallax - PBR Terrain and Surface Objects [2.0.7]","CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2020-09-20T17:22:22Z","PageNum":106,"Articles":[{"CreatedByName":"BIOZ","CreatedById":175933,"CreatedDateTime":"2023-03-10T12:55:24Z","Content":"\n\u003Cp\u003E\nHi, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/209892-r33/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022209892\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/209892-r33/\u0022 rel=\u0022\u0022\u003E@R33\u003C/a\u003E. Here it is \u003Cs\u003E\u003Ca href=\u0022https://drive.google.com/file/d/1UtvgKx3omym0C-XmU5mwSqNe6vb7426p/view\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/file/d/1UtvgKx3omym0C-XmU5mwSqNe6vb7426p/view\u003C/a\u003E\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis config doesn\u0027t contain Earth. As I understand, right now Parallax has some problems with cbNameLater detection, which Earth depends on (or maybe it\u0027s just me stupid). I fixed it in my own dll, so if it\u0027s a real problem I\u0027m sure it will be fixed properly very soon.\n\u003C/p\u003E\n\u003Cp\u003E\nActually I didn\u0027t planned to make my configs public, so I optimized them for my GTX 1660. If you have better/worse hardware, you can tweak the numbers in my cfg. Also afaik BallisticFox was planning to make Parallax configs for both KSRSS and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u003C/abbr\u003E, so I recommend to check KSRSS thread from time to time \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit 230619: Update \u003Ca href=\u0022https://drive.google.com/file/d/1GRbAlGB4DWfu_uNoTgedpBhU6roWpMc_/view\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/file/d/1GRbAlGB4DWfu_uNoTgedpBhU6roWpMc_/view\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nEdit 230709: Earth is back \u003Ca href=\u0022https://drive.google.com/file/d/13CyIsn81f9htq1CrMDO-kqfUm2RZCXJX/view\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/file/d/13CyIsn81f9htq1CrMDO-kqfUm2RZCXJX/view\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-07-09T09:05:46Z\u0022 title=\u002207/09/2023 09:05  AM\u0022 data-short=\u00221 yr\u0022\u003EJuly 9, 2023\u003C/time\u003E by BIOZ\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Carni35","CreatedById":198606,"CreatedDateTime":"2023-03-10T15:13:15Z","Content":"\n\u003Cp\u003E\nAlso, is there a way to define scatter density body by body ?\n\u003C/p\u003E\n\u003Cp\u003E\nI changed the \u0027\u0027spawning chance\u0027\u0027 but it seems to change nothing\n\u003C/p\u003E\n"},{"CreatedByName":"Vphurple Izumi","CreatedById":212158,"CreatedDateTime":"2023-03-10T18:27:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224254879\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678289429\u0022 data-ipsquote-userid=\u0022144828\u0022 data-ipsquote-username=\u0022Gameslinx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/8/2023 at 9:00 PM, Gameslinx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCheck the \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003E\u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E\u003C/abbr\u003E, there\u0027s one linked there\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo thats a no?\n\u003C/p\u003E\n"},{"CreatedByName":"Pluspython68","CreatedById":220071,"CreatedDateTime":"2023-03-10T20:35:25Z","Content":"\n\u003Cp\u003E\nI can\u0027t get parallax\u00A0 to work.\u00A0\u003Ca href=\u0022https://drive.google.com/file/d/1EqBc3Sl7La8lo59exwZtMPONmc3SDa4J/view?usp=share_link\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E is my ksp.log\n\u003C/p\u003E\n"},{"CreatedByName":"Blufor878","CreatedById":222550,"CreatedDateTime":"2023-03-11T01:14:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224236282\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221676980599\u0022 data-ipsquote-userid=\u0022225652\u0022 data-ipsquote-username=\u0022Fezak\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2/21/2023 at 6:56 AM, Fezak said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFound out that it\u0027s not that Kerbin turns into a never ending desert when I return from another body. But the ground changes color to the ground colors of the previous body I\u0027ve been into. Tried going to Minmus and the ground of Kerbin turned into that minty green. Then tried Duna and Eve and that confirmed my theory.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m having the same issue.\u003Cbr\u003E\n\u003Cimg class=\u0022ipsImage\u0022 alt=\u002252738735072_ca7a9d1561_o.png\u0022 src=\u0022https://live.staticflickr.com/65535/52738735072_ca7a9d1561_o.png\u0022\u003E\u003Cbr\u003E\n\u003Cimg class=\u0022ipsImage\u0022 alt=\u002252739668325_8a8468b352_o.png\u0022 src=\u0022https://live.staticflickr.com/65535/52739668325_8a8468b352_o.png\u0022\u003E\u003Cbr\u003E\nKerbin is this odd minty green color now.\n\u003C/p\u003E\n\u003Cp\u003E\nThe terrain looks fantastic though.\u003Cbr\u003E\n\u003Cimg class=\u0022ipsImage\u0022 alt=\u002252738735117_65496f5ef6_o.png\u0022 src=\u0022https://live.staticflickr.com/65535/52738735117_65496f5ef6_o.png\u0022\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2023-03-11T02:08:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224256662\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678497280\u0022 data-ipsquote-userid=\u0022222550\u0022 data-ipsquote-username=\u0022Blufor878\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n52 minutes ago, Blufor878 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m having the same issue.\u003Cbr\u003E\n\u003Ca href=\u0022https://live.staticflickr.com/65535/52738735072_ca7a9d1561_o.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u002252738735072_ca7a9d1561_o.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 src=\u0022https://live.staticflickr.com/65535/52738735072_ca7a9d1561_o.png\u0022\u003E\u003C/a\u003E\u003Cbr\u003E\n\u003Ca href=\u0022https://live.staticflickr.com/65535/52739668325_8a8468b352_o.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u002252739668325_8a8468b352_o.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 src=\u0022https://live.staticflickr.com/65535/52739668325_8a8468b352_o.png\u0022\u003E\u003C/a\u003E\u003Cbr\u003E\nKerbin is this odd minty green color now.\n\u003C/p\u003E\n\u003Cp\u003E\nThe terrain looks fantastic though.\u003Cbr\u003E\n\u003Ca href=\u0022https://live.staticflickr.com/65535/52738735117_65496f5ef6_o.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u002252738735117_65496f5ef6_o.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 src=\u0022https://live.staticflickr.com/65535/52738735117_65496f5ef6_o.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI cannot quite recall what causes the saturated Kerbin bug (it could be AVP?) but I know for a fact that it isn\u0027t Parallax that causes it. Parallax doesn\u0027t change the Scaled Space planet textures or shaders at all \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Blufor878","CreatedById":222550,"CreatedDateTime":"2023-03-11T02:27:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224256704\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678500489\u0022 data-ipsquote-userid=\u0022144828\u0022 data-ipsquote-username=\u0022Gameslinx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, Gameslinx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI cannot quite recall what causes the saturated Kerbin bug (it could be AVP?) but I know for a fact that it isn\u0027t Parallax that causes it. Parallax doesn\u0027t change the Scaled Space planet textures or shaders at all \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u2019ve had AVP installed for awhile now. No issues like this. Odd. Might give that a try then.\u003Cbr\u003E\nAre there any graphics mods that won\u2019t react well to Kopernicus/Parallax in your experience? Just want to cover my bases.\n\u003C/p\u003E\n"},{"CreatedByName":"Vanamonde","CreatedById":27914,"CreatedDateTime":"2023-03-11T04:14:47Z","Content":"\n\u003Cp\u003E\nOopsie. Some posts removed. Keep it on-topic, please.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Bulltoad","CreatedById":224928,"CreatedDateTime":"2023-03-11T06:26:03Z","Content":"\n\u003Cp\u003E\n\u003Cimg alt=\u0022screenshot1578\u0022 data-ratio=\u002290.00\u0022 width=\u00221200\u0022 src=\u0022https://i.ibb.co/G7TSb7y/screenshot1578.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI found a bug which makes the scatter on planets turn black. Only fix I\u0027ve found is a game restart. I really don\u0027t want to restart my game when this happens, because it happens alot. Are there any fixes???\n\u003C/p\u003E\n"},{"CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2023-03-11T13:46:38Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003EDevelopment Update\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHey all, I am going to start working on some pretty big under-the-hood changes to the scatter system over the next few weeks. There are some fairly common occurring issues that have been identified that these changes should hopefully address:\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nScatters \u0027disconnecting\u0027 from the ground and appearing in the air until regenerated\n\u003C/li\u003E\n\u003Cli\u003E\nScatters flickering when vessel is destroyed\n\u003C/li\u003E\n\u003Cli\u003E\nSignificant VRAM usage\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nI am confident issues 1 and 2 will be resolved by this new system but I can\u0027t promise the third will be entirely addressed, but this is probably the best shot at it I have.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022unknown.png?width=1920\u0026amp;height=546\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002245.50\u0022 height=\u0022341\u0022 width=\u00221200\u0022 src=\u0022https://media.discordapp.net/attachments/975078440317374494/976169912076763166/unknown.png?width=1920\u0026amp;height=546\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:12px;\u0022\u003E(Floating scatters!)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003EWhy?\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nParallax uses compute shaders to generate the scatters\u0027 transforms (position, scale, rotation). When I wrote the original system I didn\u0027t take into account every nuance of the floating origin system in KSP. The floating origin is when the origin of the world (0,0,0) is set to the craft. Instead of the craft moving around the world, the entire world moves around the craft. However, this isn\u0027t the case all the time when the craft is close to a planet. I did take these inconsistencies and the floating origin into account when I wrote the scatter system, but not in an ideal way. The compute shaders that actually generate the scatters work in world space rather than local space. Local space doesn\u0027t care about the floating origin offset and instead relies on being transformed into world space by the terrain quad\u0027s localToWorld transform matrix.\n\u003C/p\u003E\n\u003Cp\u003E\nThe new system I am proposing will work like this:\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nScatter transforms are generated in local space (GeneratePositions.compute)\n\u003Cul\u003E\n\u003Cli\u003E\nStep 1 occurs every time a quad is built\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nScatter transforms transformed to world space before culling\u00A0(EvaluatePositions.compute)\n\u003C/li\u003E\n\u003Cli\u003E\nFrustum culling, range culling, process LODs in world space (EvaluatePositions.compute)\n\u003C/li\u003E\n\u003Cli\u003E\nOutput buffer of objects to be instanced\n\u003Cul\u003E\n\u003Cli\u003E\nSteps 2, 3 and 4 occur every frame\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nThis system negates the need to regenerate scatters when the floating origin changes unexpectedly such as when a craft is destroyed, kerbal EVA, etc. This tackles issues 1 and 2. This also means that the collider generation system will run faster.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022JqoKZ1a.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002244.25\u0022 height=\u0022398\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/JqoKZ1a.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:12px;\u0022\u003E(Image from the first beta testing build of Parallax - I was an idiot and overlooked incorrect stride because it only affected 10xx series GPUs)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003ECollider System\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nRight now, the collider system has to undo a lot of the work that the floating origin does for us. Here\u0027s how it works right now. I will use \u0027position\u0027 instead of transform here because it\u0027s easier to visualize.\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nFirst, the quad position needs to be noted at the time of scatter generation\n\u003C/li\u003E\n\u003Cli\u003E\nWhen the scatter transforms are requested from the GPU, they are in world space but these positions are\u00A0\u003Cstrong\u003Eat the time of quad generation\u003C/strong\u003E\u00A0which can be a long time before the colliders are ever generated - the floating origin could have moved during this time\n\u003C/li\u003E\n\u003Cli\u003E\nScatter positions are transformed back into local space using the \u0027old quad\u0027 transform matrix\n\u003C/li\u003E\n\u003Cli\u003E\nScatter positions are then transformed back into world space using the quad\u0027s\u00A0\u003Cstrong\u003Ecurrent\u003C/strong\u003E\u00A0transform matrix - this is the true position the quad is currently in\n\u003C/li\u003E\n\u003Cli\u003E\nColliders are then generated\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nAs you can see, this process is lengthy and can be shortened very easily. This system also takes a significant amount of time to complete and, if you drive around on Dres which has a lot of scatter objects, you will notice the hitching when colliders are generated.\n\u003C/p\u003E\n\u003Cp\u003E\nMy proposed solution will work as follows:\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nRequest the scatter transforms from the GPU (they will be in local space)\n\u003C/li\u003E\n\u003Cli\u003E\nTransform the positions into world space using the quad\u0027s current transform matrix\n\u003C/li\u003E\n\u003Cli\u003E\nGenerate colliders\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nThis would simplify the entire collider generation process. I could also switch from using a quad tree to evaluate which colliders are nearby and instead just run a compute shader to simplify things. The compute shader would use a slower algorithm but because GPUs are so parallel, it would end up taking less time (and memory!)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003ESummary\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThere are a lot of potential optimizations and fixes that I can implement from looking at these two systems. I intend to start in around a week or two once I\u0027m past \u0027deadline day\u0027 at university. Until then, keep reporting bugs and I will address them soon! \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Pluspython68","CreatedById":220071,"CreatedDateTime":"2023-03-11T18:05:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224257019\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678542398\u0022 data-ipsquote-userid=\u0022144828\u0022 data-ipsquote-username=\u0022Gameslinx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Gameslinx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003EDevelopment Update\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHey all, I am going to start working on some pretty big under-the-hood changes to the scatter system over the next few weeks. There are some fairly common occurring issues that have been identified that these changes should hopefully address:\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nScatters \u0027disconnecting\u0027 from the ground and appearing in the air until regenerated\n\u003C/li\u003E\n\u003Cli\u003E\nScatters flickering when vessel is destroyed\n\u003C/li\u003E\n\u003Cli\u003E\nSignificant VRAM usage\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nI am confident issues 1 and 2 will be resolved by this new system but I can\u0027t promise the third will be entirely addressed, but this is probably the best shot at it I have.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://media.discordapp.net/attachments/975078440317374494/976169912076763166/unknown.png?width=1920\u0026amp;height=546\u0022 rel=\u0022external nofollow\u0022 title=\u0022Enlarge image\u0022\u003E\u003Cimg alt=\u0022unknown.png?width=1920\u0026amp;height=546\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002245.50\u0022 height=\u0022341\u0022 width=\u00221200\u0022 src=\u0022https://media.discordapp.net/attachments/975078440317374494/976169912076763166/unknown.png?width=1920\u0026amp;height=546\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:12px;\u0022\u003E(Floating scatters!)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003EWhy?\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nParallax uses compute shaders to generate the scatters\u0027 transforms (position, scale, rotation). When I wrote the original system I didn\u0027t take into account every nuance of the floating origin system in KSP. The floating origin is when the origin of the world (0,0,0) is set to the craft. Instead of the craft moving around the world, the entire world moves around the craft. However, this isn\u0027t the case all the time when the craft is close to a planet. I did take these inconsistencies and the floating origin into account when I wrote the scatter system, but not in an ideal way. The compute shaders that actually generate the scatters work in world space rather than local space. Local space doesn\u0027t care about the floating origin offset and instead relies on being transformed into world space by the terrain quad\u0027s localToWorld transform matrix.\n\u003C/p\u003E\n\u003Cp\u003E\nThe new system I am proposing will work like this:\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nScatter transforms are generated in local space (GeneratePositions.compute)\n\u003Cul\u003E\n\u003Cli\u003E\nStep 1 occurs every time a quad is built\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nScatter transforms transformed to world space before culling\u00A0(EvaluatePositions.compute)\n\u003C/li\u003E\n\u003Cli\u003E\nFrustum culling, range culling, process LODs in world space (EvaluatePositions.compute)\n\u003C/li\u003E\n\u003Cli\u003E\nOutput buffer of objects to be instanced\n\u003Cul\u003E\n\u003Cli\u003E\nSteps 2, 3 and 4 occur every frame\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nThis system negates the need to regenerate scatters when the floating origin changes unexpectedly such as when a craft is destroyed, kerbal EVA, etc. This tackles issues 1 and 2. This also means that the collider generation system will run faster.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/JqoKZ1a.png\u0022 rel=\u0022external nofollow\u0022 title=\u0022Enlarge image\u0022\u003E\u003Cimg alt=\u0022JqoKZ1a.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002244.25\u0022 height=\u0022398\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/JqoKZ1a.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:12px;\u0022\u003E(Image from the first beta testing build of Parallax - I was an idiot and overlooked incorrect stride because it only affected 10xx series GPUs)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003ECollider System\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nRight now, the collider system has to undo a lot of the work that the floating origin does for us. Here\u0027s how it works right now. I will use \u0027position\u0027 instead of transform here because it\u0027s easier to visualize.\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nFirst, the quad position needs to be noted at the time of scatter generation\n\u003C/li\u003E\n\u003Cli\u003E\nWhen the scatter transforms are requested from the GPU, they are in world space but these positions are\u00A0\u003Cstrong\u003Eat the time of quad generation\u003C/strong\u003E\u00A0which can be a long time before the colliders are ever generated - the floating origin could have moved during this time\n\u003C/li\u003E\n\u003Cli\u003E\nScatter positions are transformed back into local space using the \u0027old quad\u0027 transform matrix\n\u003C/li\u003E\n\u003Cli\u003E\nScatter positions are then transformed back into world space using the quad\u0027s\u00A0\u003Cstrong\u003Ecurrent\u003C/strong\u003E\u00A0transform matrix - this is the true position the quad is currently in\n\u003C/li\u003E\n\u003Cli\u003E\nColliders are then generated\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nAs you can see, this process is lengthy and can be shortened very easily. This system also takes a significant amount of time to complete and, if you drive around on Dres which has a lot of scatter objects, you will notice the hitching when colliders are generated.\n\u003C/p\u003E\n\u003Cp\u003E\nMy proposed solution will work as follows:\n\u003C/p\u003E\n\u003Col\u003E\n\u003Cli\u003E\nRequest the scatter transforms from the GPU (they will be in local space)\n\u003C/li\u003E\n\u003Cli\u003E\nTransform the positions into world space using the quad\u0027s current transform matrix\n\u003C/li\u003E\n\u003Cli\u003E\nGenerate colliders\n\u003C/li\u003E\n\u003C/ol\u003E\n\u003Cp\u003E\nThis would simplify the entire collider generation process. I could also switch from using a quad tree to evaluate which colliders are nearby and instead just run a compute shader to simplify things. The compute shader would use a slower algorithm but because GPUs are so parallel, it would end up taking less time (and memory!)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003ESummary\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThere are a lot of potential optimizations and fixes that I can implement from looking at these two systems. I intend to start in around a week or two once I\u0027m past \u0027deadline day\u0027 at university. Until then, keep reporting bugs and I will address them soon! \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI can\u0027t get parallax\u00A0 to work.\u00A0\u003Ca href=\u0022https://drive.google.com/file/d/1EqBc3Sl7La8lo59exwZtMPONmc3SDa4J/view?usp=share_link\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E is my ksp.log. The trees just don\u0027t appear, and engines no longer show any plumes.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-03-11T18:06:45Z\u0022 title=\u002203/11/2023 06:06  PM\u0022 data-short=\u00221 yr\u0022\u003EMarch 11, 2023\u003C/time\u003E by Pluspython68\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Pluspython68","CreatedById":220071,"CreatedDateTime":"2023-03-11T19:52:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224257184\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678557922\u0022 data-ipsquote-userid=\u0022220071\u0022 data-ipsquote-username=\u0022Pluspython68\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Pluspython68 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI can\u0027t get parallax\u00A0 to work.\u00A0\u003Ca href=\u0022https://drive.google.com/file/d/1EqBc3Sl7La8lo59exwZtMPONmc3SDa4J/view?usp=share_link\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E is my ksp.log. The trees just don\u0027t appear, and engines no longer show any plumes.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPlease?\n\u003C/p\u003E\n"},{"CreatedByName":"Lord_Dracon","CreatedById":210068,"CreatedDateTime":"2023-03-11T22:07:25Z","Content":"\n\u003Cp\u003E\nHello.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E\u003Cspan\u003EIt\u0027s my first time using Parallax.\u003C/span\u003E\u003C/span\u003E \u003Cspan\u003E\u003Cspan\u003EAfter installing it, everything worked seemingly fine, except for these \u0022plants shadows\u0022 on the launchpad.\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022wZGVmq4.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002290.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/wZGVmq4.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E\u003Cspan\u003ECurrently I am using the following MODs.\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022J9tvD71.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022157.86\u0022 height=\u0022663\u0022 width=\u0022420\u0022 src=\u0022https://i.imgur.com/J9tvD71.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E\u003Cspan\u003EWhat can it be?\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Pluspython68","CreatedById":220071,"CreatedDateTime":"2023-03-11T22:30:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224257317\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678572445\u0022 data-ipsquote-userid=\u0022210068\u0022 data-ipsquote-username=\u0022Lord_Dracon\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 minutes ago, Lord_Dracon said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHello.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E\u003Cspan\u003EIt\u0027s my first time using Parallax.\u003C/span\u003E\u003C/span\u003E \u003Cspan\u003E\u003Cspan\u003EAfter installing it, everything worked seemingly fine, except for these \u0022plants shadows\u0022 on the launchpad.\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/wZGVmq4.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022wZGVmq4.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u002290.00\u0022 height=\u0022675\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/wZGVmq4.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E\u003Cspan\u003ECurrently I am using the following MODs.\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://i.imgur.com/J9tvD71.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022J9tvD71.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 data-ratio=\u0022157.86\u0022 height=\u0022663\u0022 width=\u0022420\u0022 src=\u0022https://i.imgur.com/J9tvD71.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E\u003Cspan\u003EWhat can it be?\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nShow them your KSP.log\n\u003C/p\u003E\n\u003Cp\u003E\nyou can show it to them by giving them a link to google drive of your ksp.log\n\u003C/p\u003E\n"},{"CreatedByName":"Lord_Dracon","CreatedById":210068,"CreatedDateTime":"2023-03-11T22:41:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224257331\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678573858\u0022 data-ipsquote-userid=\u0022220071\u0022 data-ipsquote-username=\u0022Pluspython68\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 minutes ago, Pluspython68 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nShow them your KSP.log\n\u003C/p\u003E\n\u003Cp\u003E\nyou can show it to them by giving them a link to google drive of your ksp.log\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E\u003Cspan\u003EI just found out what it was.\u003C/span\u003E\u003C/span\u003E The \u003Cspan\u003E\u003Cspan\u003EKSP PostProcessing (KS3P) mod was causing that issue.\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E\u003Cspan\u003EI just replaced it with \u003C/span\u003E\u003C/span\u003E\u003C/span\u003Ethe latest version of TUFX and it solved.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-03-11T22:51:18Z\u0022 title=\u002203/11/2023 10:51  PM\u0022 data-short=\u00221 yr\u0022\u003EMarch 11, 2023\u003C/time\u003E by Lord_Dracon\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2023-03-11T22:58:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224257317\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678572445\u0022 data-ipsquote-userid=\u0022210068\u0022 data-ipsquote-username=\u0022Lord_Dracon\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Lord_Dracon said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan lang=\u0022en\u0022 xml:lang=\u0022en\u0022\u003E\u003Cspan\u003E\u003Cspan\u003EWhat can it be?\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is caused by KS3P and its ambient occlusion.\n\u003C/p\u003E\n\u003Cp\u003E\nYou should switch to TUFX, as it is the successor to KS3P\n\u003C/p\u003E\n\u003Cp\u003E\nedit: got ninja\u0027d lol\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-03-11T23:07:49Z\u0022 title=\u002203/11/2023 11:07  PM\u0022 data-short=\u00221 yr\u0022\u003EMarch 11, 2023\u003C/time\u003E by Gameslinx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ShadowDr","CreatedById":227130,"CreatedDateTime":"2023-03-13T05:31:04Z","Content":"\n\u003Cp\u003E\nQuite enjoying those detailed update logs, professional job.\u003Cbr\u003E\nMakes me wonder, are current KSP2 devs aware of this tech? Terrain seems to be one of the main fek-ups there for now, and this both looks in some ways better and runs oh so much smoother than what they have.\u003Cbr\u003E\n\u003Cbr\u003E\nSome user question meanwhile. I\u0027m slightly dissatisfied with certain scatter properties in various locations, both for visual and gameplay reasons.\u003Cbr\u003E\nFor instance, Kerbin grass is HUGE (or maybe kerbals are midgets, result\u0027s the same) while trees are just right. If you happen to land or roll into grassy terrain, it also obstructs vision quite a lot.\u003Cbr\u003E\nRocks on the Mun by default are way too dense, would be almost universally impassable if colliders are enabled.\u003Cbr\u003E\nDon\u0027t have much control over this in current config, found only global scatter density (helps with the Mun, but also makes forests into scattered trees).\n\u003C/p\u003E\n\u003Cp\u003E\nSo got this idea: could we have some more scatter related values moved out into config, for fine tuning? My own wishlist would have scatter scaling and density per type (if possible, also per planet or even per biome) and perhaps something related to the noise pattern.\u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cbr\u003E\nas a side note, seems like the Kerbin grass interaction with bright long range\u00A0 lights from some (modded?) rocket engines is the thing that may cause performance drops at launches. If someone experiences that a lot, decreasing grass density helps. Or limiting the range of those lights.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-03-13T05:32:06Z\u0022 title=\u002203/13/2023 05:32  AM\u0022 data-short=\u00221 yr\u0022\u003EMarch 13, 2023\u003C/time\u003E by ShadowDr\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ManuxKerb","CreatedById":139441,"CreatedDateTime":"2023-03-13T15:52:15Z","Content":"\n\u003Cp\u003E\nHi\n\u003C/p\u003E\n\u003Cp\u003E\nAwoesome mod!\n\u003C/p\u003E\n\u003Cp\u003E\nI got some problem with the Shaders or something:\n\u003C/p\u003E\n\u003Cp\u003E\nPicture: \u003Ca href=\u0022https://ibb.co/n8ZQQ6J\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ibb.co/n8ZQQ6J\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAs you can see the screen is somehow split in two parts. When im near the vessel im seeing these black lines everywhere....\n\u003C/p\u003E\n\u003Cp\u003E\nI did get rid of this after i removed the whole AVP and TUFX but i belive that Parallax does work with does mods. So it must be some setting.... Or the order in wich they are loaded...\n\u003C/p\u003E\n\u003Cp\u003E\nWhat i tried was the to switch of antializing in settings but it did not change...\n\u003C/p\u003E\n\u003Cp\u003E\nCan anyone give a hid what couses this ?\n\u003C/p\u003E\n\u003Cp\u003E\nMods instlled:\n\u003C/p\u003E\n\u003Cp\u003E\nParallax\n\u003C/p\u003E\n\u003Cp\u003E\nAVP\n\u003C/p\u003E\n\u003Cp\u003E\nScatterer\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003E\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E\u003C/abbr\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nWaterfall\n\u003C/p\u003E\n\u003Cp\u003E\nPlanetshine\n\u003C/p\u003E\n\u003Cp\u003E\nThanks a lot!!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-03-13T15:53:50Z\u0022 title=\u002203/13/2023 03:53  PM\u0022 data-short=\u00221 yr\u0022\u003EMarch 13, 2023\u003C/time\u003E by ManuxKerb\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"R-T-B","CreatedById":200868,"CreatedDateTime":"2023-03-13T16:22:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224256704\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678500489\u0022 data-ipsquote-userid=\u0022144828\u0022 data-ipsquote-username=\u0022Gameslinx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/10/2023 at 6:08 PM, Gameslinx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI cannot quite recall what causes the saturated Kerbin bug (it could be AVP?) but I know for a fact that it isn\u0027t Parallax that causes it. Parallax doesn\u0027t change the Scaled Space planet textures or shaders at all \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u00A0\u003C/span\u003E\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224256662\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678497280\u0022 data-ipsquote-userid=\u0022222550\u0022 data-ipsquote-username=\u0022Blufor878\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/10/2023 at 5:14 PM, Blufor878 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m having the same issue.\u003Cbr\u003E\n\u003Ca href=\u0022https://live.staticflickr.com/65535/52738735072_ca7a9d1561_o.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u002252738735072_ca7a9d1561_o.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 src=\u0022https://live.staticflickr.com/65535/52738735072_ca7a9d1561_o.png\u0022\u003E\u003C/a\u003E\u003Cbr\u003E\n\u003Ca href=\u0022https://live.staticflickr.com/65535/52739668325_8a8468b352_o.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u002252739668325_8a8468b352_o.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 src=\u0022https://live.staticflickr.com/65535/52739668325_8a8468b352_o.png\u0022\u003E\u003C/a\u003E\u003Cbr\u003E\nKerbin is this odd minty green color now.\n\u003C/p\u003E\n\u003Cp\u003E\nThe terrain looks fantastic though.\u003Cbr\u003E\n\u003Ca href=\u0022https://live.staticflickr.com/65535/52738735117_65496f5ef6_o.png\u0022 title=\u0022Enlarge image\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u002252738735117_65496f5ef6_o.png\u0022 class=\u0022ipsImage ipsImage_thumbnailed\u0022 src=\u0022https://live.staticflickr.com/65535/52738735117_65496f5ef6_o.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis bug is caused by an odd interaction between Scatterer and Kopernicus both authors have yet to narrow down.\n\u003C/p\u003E\n\u003Cp\u003E\nThere is a fix, if you have plenty of vram.\u00A0 That is to completely disable Kopernicus\u0027s ondemand-texture loading subsystem.\u00A0 This WILL eat a lot of memory, mind:\n\u003C/p\u003E\n\u003Cp\u003E\nSimply throw this in a .cfg file anywhere:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E@Kopernicus:FINAL\n{   \n\tuseOnDemand = False\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-03-13T16:27:48Z\u0022 title=\u002203/13/2023 04:27  PM\u0022 data-short=\u00221 yr\u0022\u003EMarch 13, 2023\u003C/time\u003E by R-T-B\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AdmiralAxolol__","CreatedById":227770,"CreatedDateTime":"2023-03-13T16:45:13Z","Content":"\n\u003Cp\u003E\nHello!.. fun fact this is my first time ever using a forum.\u00A0 I am having problems with downloading parallax where I get the error message \u0022shader banks not installed\u0022 . I\u0027ve tried reinstalling all the mods that are required for it including all the texture files and the parallax file itself and nothing seems to work. I just end up loading forever and ever. I tried the fix you proposed and replaced\u00A0\u00A0\u003Cspan style=\u0022background-color:#ffffff;color:#24292e;font-size:16px;text-align:left;\u0022\u003EKopernicus and made sure it was 139. idk what to do at this point.\u00A0\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"R-T-B","CreatedById":200868,"CreatedDateTime":"2023-03-13T17:12:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224258340\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678725913\u0022 data-ipsquote-userid=\u0022227770\u0022 data-ipsquote-username=\u0022AdmiralAxolol__\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n38 minutes ago, AdmiralAxolol__ said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHello!.. fun fact this is my first time ever using a forum.\u00A0 I am having problems with downloading parallax where I get the error message \u0022shader banks not installed\u0022 . I\u0027ve tried reinstalling all the mods that are required for it including all the texture files and the parallax file itself and nothing seems to work. I just end up loading forever and ever. I tried the fix you proposed and replaced\u00A0\u00A0\u003Cspan style=\u0022background-color:#ffffff;color:#24292e;font-size:16px;text-align:left;\u0022\u003EKopernicus and made sure it was 139. idk what to do at this point.\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCan you post both a screenshot of your gamedata folder and if you are able, your ksp.log file?\u00A0 That would help us help you.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBy the way, it needs to be GREATER THAN 139, not exactly 139 Kopernicus.\u00A0 Just use the latest.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-03-13T17:24:15Z\u0022 title=\u002203/13/2023 05:24  PM\u0022 data-short=\u00221 yr\u0022\u003EMarch 13, 2023\u003C/time\u003E by R-T-B\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"AdmiralAxolol__","CreatedById":227770,"CreatedDateTime":"2023-03-13T17:24:45Z","Content":"\n\u003Cp\u003E\nI got the newest version of\u00A0\u003Cspan style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003EKopernicus and it worked!\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:#f9f9f9;color:#2d3134;font-size:15px;\u0022\u003EThank you for your help, I\u0027m kinda bad at this\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-03-13T17:36:46Z\u0022 title=\u002203/13/2023 05:36  PM\u0022 data-short=\u00221 yr\u0022\u003EMarch 13, 2023\u003C/time\u003E by AdmiralAxolol__\u003C/strong\u003E\n\u003Cbr\u003EI got some info wrong\n\u003C/span\u003E\n"},{"CreatedByName":"Gameslinx","CreatedById":144828,"CreatedDateTime":"2023-03-13T18:39:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224258120\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678685464\u0022 data-ipsquote-userid=\u0022227130\u0022 data-ipsquote-username=\u0022ShadowDr\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 hours ago, ShadowDr said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nare current KSP2 devs aware of this tech\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI would imagine they are. For one, they haven\u0027t approached me about anything, but there are many people out there far more capable than I am lol\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224258120\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678685464\u0022 data-ipsquote-userid=\u0022227130\u0022 data-ipsquote-username=\u0022ShadowDr\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 hours ago, ShadowDr said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ncould we have some more scatter related values moved out into config, for fine tuning? My own wishlist would have scatter scaling and density per type (if possible, also per planet or even per biome) and perhaps something related to the noise pattern\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI can do this but \u0027per type\u0027 is a fairly abstract concept. Internally there are 4 types of scatters:\n\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\nNearest Quad - High density non persistent scatters (like grass)\n\u003C/li\u003E\n\u003Cli\u003E\nFixed - Persistent collideable scatters, such as trees or rocks\n\u003C/li\u003E\n\u003Cli\u003E\nVolume (VerticalStack) - Persistent, collideable, and can stack on top of each other. Like the kelp, for example\n\u003C/li\u003E\n\u003Cli\u003E\nFixedHeight - Positioned to a certain min / max height constraint - Like the icebergs\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\nI could add per-planet settings but outside of the UI this creates problems with planet packs, but it is something I can look into doing.\n\u003C/p\u003E\n\u003Cp\u003E\nBtw, Kerbals are 0.75 meters tall. Most uncut, ungrazed grass on Earth can get to around that height. So, to be fair, the grass is a \u0027correct\u0027 size if we were being realistic. The real reason the grass isn\u0027t smaller is because of density limitations - The current VRAM usage is slightly too high for me to want to reduce the size of the grass. You might think \u0027why does the grass size correlate with VRAM usage?\u0027. Good question! That\u0027s because if I reduce the size of the grass, they cover less area - meaning I need to increase the amount of grass objects to maintain the same coverage\n\u003C/p\u003E\n"},{"CreatedByName":"ShadowDr","CreatedById":227130,"CreatedDateTime":"2023-03-13T22:45:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224258395\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678732758\u0022 data-ipsquote-userid=\u0022144828\u0022 data-ipsquote-username=\u0022Gameslinx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Gameslinx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cul\u003E\n\u003Cli\u003E\nNearest Quad - High density non persistent scatters (like grass)\n\u003C/li\u003E\n\u003Cli\u003E\nFixed - Persistent collideable scatters, such as trees or rocks\n\u003C/li\u003E\n\u003Cli\u003E\nVolume (VerticalStack) - Persistent, collideable, and can stack on top of each other. Like the kelp, for example\n\u003C/li\u003E\n\u003Cli\u003E\nFixedHeight - Positioned to a certain min / max height constraint - Like the icebergs\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYep found this on github later. So all the persistent rocks are in one group? They look like there\u0027s more to them, well done again.\u003Cbr\u003E\n\u003Cbr\u003E\nFrom some experimentation, seem to be useful to decouple high density stuff from the rest. Though this really affects mostly Kerbin( or whatever else foresty worlds you may have)\u003Cbr\u003E\nHaven\u0027t dealt with last two types close up yet, but kelp and icebergs of Kerbin look fine from above, I guess they scale well with global values now.\u003Cbr\u003E\nPer planet or at least per-whatever-you-call-environment-types settings also would be welcomed. This is to tweak rocks density on rocky worlds without destroying Kerbin forests, for example.\u003Cbr\u003E\nBy the way, when the rocks would have reliable colliders, they may be considered as additional difficulty option, with how they spawn. Denser rocks make safe landing much trickier. Then density setting specifically for rocky worlds will be a must.\u003Cbr\u003E\n\u003Cbr\u003E\nKerbals being just 0.75 meters is new to me, i\u0027ve read they\u0027re one meter (and never bothered to check). Still, even two meter grass isn\u0027t unseen, so there\u0027s nothing \u0022unrealistic\u0022 in it being as high as it is, but realism isn\u0027t the point.\u003Cbr\u003E\nIt is a case of \u0022gamey compromises\u0022, when you may have to make something unrealistic for better playability. When someone does a lot of EVA or small vehicle gameplay on land, in this instance, that grass and some other things just make it too hard to see what you\u0027re doing. And dense rocks may be a problem for rovers.\u003Cbr\u003E\nI\u0027ve got my grass to be quite scarce as side effect of spreading out moon rocks, and i\u0027m almost fine with this compromise between looks and playability, so that\u0027s one option.\u003Cbr\u003E\nAnother would be just to mow it. Have actual grass sprites of same size and density, but lesser height.\n\u003C/p\u003E\n"},{"CreatedByName":"Czejenesku","CreatedById":227280,"CreatedDateTime":"2023-03-14T11:41:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224258533\u0022 data-ipsquote-contentid=\u0022209714\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221678747513\u0022 data-ipsquote-userid=\u0022227130\u0022 data-ipsquote-username=\u0022ShadowDr\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, ShadowDr said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYep found this on github later. So all the persistent rocks are in one group? They look like there\u0027s more to them, well done again.\u003Cbr\u003E\n\u003Cbr\u003E\nFrom some experimentation, seem to be useful to decouple high density stuff from the rest. Though this really affects mostly Kerbin( or whatever else foresty worlds you may have)\u003Cbr\u003E\nHaven\u0027t dealt with last two types close up yet, but kelp and icebergs of Kerbin look fine from above, I guess they scale well with global values now.\u003Cbr\u003E\nPer planet or at least per-whatever-you-call-environment-types settings also would be welcomed. This is to tweak rocks density on rocky worlds without destroying Kerbin forests, for example.\u003Cbr\u003E\nBy the way, when the rocks would have reliable colliders, they may be considered as additional difficulty option, with how they spawn. Denser rocks make safe landing much trickier. Then density setting specifically for rocky worlds will be a must.\u003Cbr\u003E\n\u003Cbr\u003E\nKerbals being just 0.75 meters is new to me, i\u0027ve read they\u0027re one meter (and never bothered to check). Still, even two meter grass isn\u0027t unseen, so there\u0027s nothing \u0022unrealistic\u0022 in it being as high as it is, but realism isn\u0027t the point.\u003Cbr\u003E\nIt is a case of \u0022gamey compromises\u0022, when you may have to make something unrealistic for better playability. When someone does a lot of EVA or small vehicle gameplay on land, in this instance, that grass and some other things just make it too hard to see what you\u0027re doing. And dense rocks may be a problem for rovers.\u003Cbr\u003E\nI\u0027ve got my grass to be quite scarce as side effect of spreading out moon rocks, and i\u0027m almost fine with this compromise between looks and playability, so that\u0027s one option.\u003Cbr\u003E\nAnother would be just to mow it. Have actual grass sprites of same size and density, but lesser height.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat parallax settings do you use?\n\u003C/p\u003E\n"}]}