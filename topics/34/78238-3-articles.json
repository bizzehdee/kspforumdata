{"TopicId":78238,"ForumId":34,"TopicTitle":"[0.24.2] DebRefund v1.0.13","CreatedByName":"Vendan","CreatedById":48676,"CreatedDateTime":"2014-07-18T16:15:22Z","PageNum":3,"Articles":[{"CreatedByName":"Ratzap","CreatedById":75982,"CreatedDateTime":"2014-07-19T00:00:22Z","Content":"\n\u003Cp\u003EIt this supposed to recover the launch clamps? Logically it should but I just landed back at KSC and I could see the clamps sitting there on the pad. The end of mission screen didn\u0027t list them either.\u003C/p\u003E\n"},{"CreatedByName":"Vendan","CreatedById":48676,"CreatedDateTime":"2014-07-19T00:04:43Z","Content":"\n\u003Cp\u003Ehrm, launch clamps are tricky, cause I don\u0027t mess with anything landed\u003C/p\u003E\n"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2014-07-19T00:05:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ratzap\u0022 data-cite=\u0022Ratzap\u0022\u003E\u003Cdiv\u003EIt this supposed to recover the launch clamps?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t think launch clamps have ever been deleted/recovered/anything. Seeing as they never take off, they\u0027re always \u0027landed\u0027 so I\u0027m not sure this mod would interact with them.\u003C/p\u003E\n"},{"CreatedByName":"Ratzap","CreatedById":75982,"CreatedDateTime":"2014-07-19T00:06:04Z","Content":"\n\u003Cp\u003EYes but they are a cost and the wee green vermin can just run out and pick them up \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E I want my clamp money back!\u003C/p\u003E\n"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2014-07-19T00:09:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ratzap\u0022 data-cite=\u0022Ratzap\u0022\u003E\u003Cdiv\u003EI want my clamp money back!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBlame Squad and the fact that debris doesn\u0027t give any recovery refund. Sucks, I know, but there isn\u0027t a lot to be done about it...\u003C/p\u003E\u003Cp\u003EEDIT: apparently \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EDebris, that is parts without an attached control part (command pod or probe core), don\u0027t give a recovery screen when they are recovered. However they do refund the cost for a successful recovery - and the same distance-based calculation is applied. You can check this yourself by bringing up the debug console (accessible via Alt\u002BF2). \u003C/div\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-19T00:13:39Z\u0022 title=\u002207/19/2014 12:13  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 19, 2014\u003C/time\u003E by ObsessedWithKSP\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Vendan","CreatedById":48676,"CreatedDateTime":"2014-07-19T00:13:05Z","Content":"\n\u003Cp\u003EAlright, Alright, I\u0027m working on it. Give me an hour or so\u003C/p\u003E\n"},{"CreatedByName":"UAL002","CreatedById":57127,"CreatedDateTime":"2014-07-19T00:15:35Z","Content":"\n\u003Cp\u003EJust add a module manager patch to your mod to make them super cheap (refurbish cost) or free.\u003C/p\u003E\u003Cp\u003EIf you do, don\u0027t forget FASA launch clamps.\u003C/p\u003E\u003Cp\u003EEDIT: where is the best place for the dll?\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-07-19T00:19:43Z","Content":"\n\u003Cp\u003EJust wanted you to know, Kerbal recovery is very easy to add (though it technically kills them first the way I have implemented it). Science recovery was being tricky for me and I couldn\u0027t get it working. I think everyone\u0027s pretty much agreed that DebRefund is better than StageRecovery, so I\u0027m giving you full permission to use whatever you want from it, if there\u0027s anything remotely useful \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E I\u0027m going to see about having KCT defer funds recover to DebRefund if it\u0027s installed, which should be easy enough to do, but our recovery requirements are slightly different (since you assume some parts aren\u0027t recovered and KCT needs to know which parts those are for the Inventory. Therefore KCT will say all the parts are recovered but DebRefund will only refund partially. Not really an issue, just a slight \u0022incompatibility\u0022). If you don\u0027t mind, I\u0027m going to check out your source for figuring out how to use the message system. That will be of much use to me later on \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"SolarLiner","CreatedById":41047,"CreatedDateTime":"2014-07-19T00:23:56Z","Content":"\n\u003Cp\u003EI was going to say to the forums \u0022Hey, you know SQUAD, it\u0027s only a bunch of if statements to check if there\u0027s enough parachutes to land the debris!\u0022 And then I saw this come out. Perfect.\u003C/p\u003E\n"},{"CreatedByName":"Vendan","CreatedById":48676,"CreatedDateTime":"2014-07-19T00:24:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003EJust wanted you to know, Kerbal recovery is very easy to add (though it technically kills them first the way I have implemented it). Science recovery was being tricky for me and I couldn\u0027t get it working. I think everyone\u0027s pretty much agreed that DebRefund is better than StageRecovery, so I\u0027m giving you full permission to use whatever you want from it, if there\u0027s anything remotely useful \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E I\u0027m going to see about having KCT defer funds recover to DebRefund if it\u0027s installed, which should be easy enough to do, but our recovery requirements are slightly different (since you assume some parts aren\u0027t recovered and KCT needs to know which parts those are for the Inventory. Therefore KCT will say all the parts are recovered but DebRefund will only refund partially. Not really an issue, just a slight \u0022incompatibility\u0022). If you don\u0027t mind, I\u0027m going to check out your source for figuring out how to use the message system. That will be of much use to me later on \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMessage system is fairly easy. If you are interested, I could add in a check for \u0022does KCT exist\u0022, and if so, just pass the vessel, or whatever you want, like a list of parts/whatnot, to it. Just give me an easy to access method and tell me what you are looking for \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-07-19T00:30:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vendan\u0022 data-cite=\u0022Vendan\u0022\u003E\u003Cdiv\u003EMessage system is fairly easy. If you are interested, I could add in a check for \u0022does KCT exist\u0022, and if so, just pass the vessel, or whatever you want, like a list of parts/whatnot, to it. Just give me an easy to access method and tell me what you are looking for \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA list of part names as strings is all I need. Unfortunately my knowledge of reflection and general API-ness is rather limited, so I have no idea how to actually make anything open to you. Then again, Kerbal_Construction_Time.KCT_Utilities.AddPartToInventory(String partName) may suffice if you can call that. It\u0027s a public static void. Let me know if you\u0027re going to do that though, so I can delegate recovery checking to you and we don\u0027t get duplicate items added to the inventory from my recovery code. If you need something else, let me know and I\u0027ll see what I can do.\u003C/p\u003E\n"},{"CreatedByName":"Vendan","CreatedById":48676,"CreatedDateTime":"2014-07-19T00:31:53Z","Content":"\n\u003Cp\u003EThat\u0027s all I need, I\u0027ll take a look at it. Also, everyone, launch clamps autorecover next time you put a ship on the launch pad, so I don\u0027t need to do anything there!\u003C/p\u003E\n"},{"CreatedByName":"Vendan","CreatedById":48676,"CreatedDateTime":"2014-07-19T00:34:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022magico13\u0022 data-cite=\u0022magico13\u0022\u003E\u003Cdiv\u003EA list of part names as strings is all I need. Unfortunately my knowledge of reflection and general API-ness is rather limited, so I have no idea how to actually make anything open to you. Then again, Kerbal_Construction_Time.KCT_Utilities.AddPartToInventory(String partName) may suffice if you can call that. It\u0027s a public static void. Let me know if you\u0027re going to do that though, so I can delegate recovery checking to you and we don\u0027t get duplicate items added to the inventory from my recovery code. If you need something else, let me know and I\u0027ll see what I can do.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOne more thing, would you be interested in adding a \u0022damage value\u0022 so I can pass in how hard they hit down? I know you probably wouldn\u0027t use it at first, but it may play a part later on, and then I we don\u0027t run into issues with different method signature mismatches.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-07-19T00:38:13Z","Content":"\n\u003Cp\u003EThank for stepping in where Squad failed to go.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alshain\u0022 data-cite=\u0022Alshain\u0022\u003E\u003Cdiv\u003EWell that was fast.\u003C/div\u003E\u003C/blockquote\u003EThat\u0027s why I love the KSP community. Squad doesn\u0027t provide a needed function? Our modders to the rescue.\n"},{"CreatedByName":"magico13","CreatedById":73338,"CreatedDateTime":"2014-07-19T00:38:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vendan\u0022 data-cite=\u0022Vendan\u0022\u003E\u003Cdiv\u003EOne more thing, would you be interested in adding a \u0022damage value\u0022 so I can pass in how hard they hit down? I know you probably wouldn\u0027t use it at first, but it may play a part later on, and then I we don\u0027t run into issues with different method signature mismatches.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDoesn\u0027t hurt to add it. Just tell me what I need to add. Once a part enters the inventory I don\u0027t keep track of it individually, so I\u0027m not sure what use I will have for it without a rewrite, but I like having options \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdit: Just thought of a use. I would have a random chance based on the damage value of the part being useless for future builds, but still salvageable as scrap. Then the funds recovery can still occur no problem and I can just not have those parts be added to the inventory. Adds some extra flavor to using DebRefund with KCT.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-19T00:58:12Z\u0022 title=\u002207/19/2014 12:58  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 19, 2014\u003C/time\u003E by magico13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FeliusKerNes","CreatedById":115894,"CreatedDateTime":"2014-07-19T01:05:46Z","Content":"\n\u003Cp\u003EHaving all red landings, which leads me to ask: How exactly is the chute drag calculated here? Furthermore, on weights, do the script take the difference between a full and an empty fuel tank into consideration when calculating if the parts lands safely?\u003C/p\u003E\n"},{"CreatedByName":"Brian--Griffin","CreatedById":103428,"CreatedDateTime":"2014-07-19T01:11:51Z","Content":"\n\u003Cp\u003ESo I did some quick research. The formula for drag/mass ratio seems to be:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Esum of (drag * mass of chute) / (sum of mass of all parts) \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAn empty BACC SRB has a mass of 1.5 t. A Mk-2R Radial Parachutes has 0.15 t mass and 500 drag deployed.\u003C/p\u003E\u003Cp\u003EOne parachute: \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E500 * 0.15 = 75 / (1.5 \u002B 0.15) = 45.45..\u003C/pre\u003E\u003Cp\u003E Would be a failure.\u003C/p\u003E\u003Cp\u003ETwo Parachutes: \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E500 * 0.15 * 2 = 150 / (1.5 \u002B 0.15 * 2) = 83.33..\u003C/pre\u003E\u003Cp\u003E Some damage.\u003C/p\u003E\u003Cp\u003EThree Parachutes: \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E500 * 0.15 * 3 = 225 / (1.5 \u002B 0.15 * 3) = 115.38..\u003C/pre\u003E\u003Cp\u003E Safe recovery.\u003C/p\u003E\u003Cp\u003EAs a rule of thumb I would say 1 parachute per 1 t mass makes a reasonably recovery.\u003C/p\u003E\u003Cp\u003EI am not sure why I have to multiply the drag with the mass of the parachute, maybe someone could shed some light there?\u003C/p\u003E\n"},{"CreatedByName":"Ratzap","CreatedById":75982,"CreatedDateTime":"2014-07-19T01:24:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vendan\u0022 data-cite=\u0022Vendan\u0022\u003E\u003Cdiv\u003EThat\u0027s all I need, I\u0027ll take a look at it. Also, everyone, launch clamps autorecover next time you put a ship on the launch pad, so I don\u0027t need to do anything there!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh nifty, I\u0027ll watch the Funds counter next launch. Your RealChute support seems to be working, my last couple of trips I had it back in.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-07-19T01:45:59Z","Content":"\n\u003Cp\u003EBrian--Griffin: welcome to the forum!\u003C/p\u003E\u003Cp\u003EThat\u0027s because in stock KSP drag is proportional to mass! (Weird, right?) Every part has a drag coefficient, a part\u0027s drag force is equal to its drag coefficient times its mass, and the way stock parachutes work is that when deployed they just increase the drag coefficient to the specified value from the default (usually 0.2).\u003C/p\u003E\n"},{"CreatedByName":"Ruedii","CreatedById":57704,"CreatedDateTime":"2014-07-19T01:55:04Z","Content":"\n\u003Cp\u003EFor temporary compatibility between DebRefund and RealChutes on my system, I will be simply removing the modulemanager files to make the stock chutes realchute-based. That way I can use the stock chutes, compatible with DebRefund on my discard stages and use RealChutes on my main module.\u003C/p\u003E\u003Cp\u003EI thought I\u0027d tell everyone the genius little hack while I was at it so they could use the two mods together. I also mentioned this in the RealChute thread.\u003C/p\u003E\n"},{"CreatedByName":"Ratzap","CreatedById":75982,"CreatedDateTime":"2014-07-19T02:02:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ruedii\u0022 data-cite=\u0022Ruedii\u0022\u003E\u003Cdiv\u003EFor temporary compatibility between DebRefund and RealChutes on my system, I will be simply removing the modulemanager files to make the stock chutes realchute-based. That way I can use the stock chutes, compatible with DebRefund on my discard stages and use RealChutes on my main module.\u003Cp\u003EI thought I\u0027d tell everyone the genius little hack while I was at it so they could use the two mods together. I also mentioned this in the RealChute thread.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWorking RealChute support was put in a few hours ago. What you suggest didn\u0027t work with the previous as DebRefund simply checked for the presence of RealChutes and skipped calculating drag for all parachutes.\u003C/p\u003E\n"},{"CreatedByName":"Vendan","CreatedById":48676,"CreatedDateTime":"2014-07-19T02:36:06Z","Content":"\n\u003Cp\u003EKerbal and Science recovery has been added. Prepare your science cannons!\u003C/p\u003E\n"},{"CreatedByName":"Rohaq","CreatedById":100297,"CreatedDateTime":"2014-07-19T06:02:38Z","Content":"\n\u003Cp\u003EIs anybody else experiencing crashes when they enter the VAB with DebRefund installed?\u003C/p\u003E\u003Cp\u003ERunning the 64-bit Windows version of KSP here, with the latest ModuleManager installed, if that helps.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-19T07:02:49Z\u0022 title=\u002207/19/2014 07:02  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 19, 2014\u003C/time\u003E by Rohaq\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DeepOdyssey","CreatedById":91001,"CreatedDateTime":"2014-07-19T07:02:06Z","Content":"\n\u003Cp\u003EThis mod don\u0027t work at all. I\u0027ve got null reference exceptions, can\u0027t enter anything in vab after recovery. \u003C/p\u003E\u003Cp\u003EThis mod have any prerequisites? I don\u0027t have modulemanager installed.\u003C/p\u003E\n"},{"CreatedByName":"Vendan","CreatedById":48676,"CreatedDateTime":"2014-07-19T07:09:54Z","Content":"\n\u003Cp\u003Eas much as I hate to say it, guys, this mod is working for me in both 32-bit and 64-bit. Any chance I could get some logs?\u003C/p\u003E\n"}]}