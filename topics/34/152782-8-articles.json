{"TopicId":152782,"ForumId":34,"TopicTitle":"[1.8.x] KSPWheel - Physics Based Alternate Wheel Collider [API Only]","CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-11-30T18:26:55Z","PageNum":8,"Articles":[{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2017-01-16T01:15:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222923045\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484525220\u0022 data-ipsquote-userid=\u0022123074\u0022 data-ipsquote-username=\u0022damerell\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, damerell said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOf course this was not quite right.\n\u003C/p\u003E\n\u003Cp\u003E\nIf torque is inversely proportional to RPM, that would produce infinite torque at 0 RPM and produce a curve on the graph not a straight line. Oddly \u003Ca href=\u0022http://lancet.mit.edu/motors/motors3.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://lancet.mit.edu/motors/motors3.html\u003C/a\u003E which you cite above first says \u0022torque is inversely proportional to the speed of the output shaft\u0022 and then shows some straight-line graphs which show nothing of the kind. :-(\n\u003C/p\u003E\n\u003Cp\u003E\nI think Tiktaalik is correct when they write that real EV applications typically show an inversely-proportional relationship with a torque cap.\n\u003C/p\u003E\n\u003Cp\u003E\nI still think what I wrote above is basically OK, but there needs to be a torque cap to prevent silly torque values at very low RPM. Rather than set this explicitly (with the usual issues about getting it right and TweakScale proportions) it could just be a fixed proportion of wheel diameter which would naturally make it higher on bigger parts. I\u0027d determine the proportion by taking some part and seeing how much torque it produces at 5 m/s then guessing that\u0027s a reasonable cap.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere\u0027s always a torque cap of course.\u00A0 You can apply one with software, or with broken shafts/gears/bearings.\u00A0\u00A0 But yes, the cap is generally going to scale up with the size/strength of the components,as that affects the breaking points.\u00A0 Whether you\u0027re controlling it to match your breaking points, or just hoping things don\u0027t break.\n\u003C/p\u003E\n"},{"CreatedByName":"damerell","CreatedById":123074,"CreatedDateTime":"2017-01-16T01:24:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222923101\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484529325\u0022 data-ipsquote-userid=\u0022136290\u0022 data-ipsquote-username=\u0022TiktaalikDreaming\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 minutes ago, TiktaalikDreaming said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThere\u0027s always a torque cap of course.\u00A0 You can apply one with software, or with broken shafts/gears/bearings.\u00A0\u00A0 But yes, the cap is generally going to scale up with the size/strength of the components,as that affects the breaking points.\u00A0 Whether you\u0027re controlling it to match your breaking points, or just hoping things don\u0027t break.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI agree that\u0027s true in reality (but I\u0027m saying I was wrong before and there needs to be an explicit one in-game or of course comedy will ensue at 0 RPM).\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-16T19:00:20Z","Content":"\n\u003Cp\u003E\nYou are free to adjust torque curves if you want (for lower stall torque / flat spots on the graph near the start), but I am and will be using an \u0027idealized brushless DC motor\u0027 as the template for the basic wheel module/functionality.\n\u003C/p\u003E\n\u003Cp\u003E\nTorque output goes from Stall Torque @ 0RPM (this is the -maximum- torque that the motor can ouput), to zero torque at \u0027Max Motor RPM\u0027.\u00A0 The \u0027max torque\u0027 specified in the motor config -is- the torque cap.\u00A0 Want a motor with less torque output?\u00A0 Change the gearing or decrease the max motor torque.... (or setup a custom torque curve).\u003Cbr\u003E\nPower \u003Cstrong\u003Euse\u003C/strong\u003E (EC/s) goes from maximum at 0 RPM, down to near-zero at maximum RPM.\u003Cbr\u003E\nPower \u003Cstrong\u003Eoutput\u003C/strong\u003E follows the standard \u0027power out = rpm * torque\u0027 functions, though this value is never actually used anywhere (the motor torque at a given RPM determines the power applied to the wheels).\u003Cbr\u003E\nTorque \u003Cstrong\u003Eoutput \u003C/strong\u003Efollows power input, from max torque at zero rpm, to zero torque at max rpm.\u003Cbr\u003E\u003Cbr\u003E\n(Note that I think there are still some... errors... in my math on calculating some of this stuff, notably power input vs. efficiency, but the above and below is the overall scheme I\u0027ll be going with)\u003Cbr\u003E\u003Cbr\u003E\nUpdated motor graph, with axis labels for each value (sadly Excel is apparently incapable of labeling all of these axis\u0027 simultaneously with their relevant domains) (purple plotted on smaller vertical axis so that it did not overlap the torque graph) (edit: and I\u0027m not sure why I put RPM on both X and Y axis... it should only exist on X, and Y should show % of RPM I think..... yeah I\u0027m probably terrible at making graphs..):\u003Cbr\u003E\u003Cimg alt=\u00226mugCJl.png\u0022 class=\u0022ipsImage\u0022 height=\u0022750\u0022 src=\u0022http://i.imgur.com/6mugCJl.png\u0022 width=\u0022844\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nWhat happens at zero RPM is that the motor puts out max torque; that is what the \u0027stall torque\u0027 specification is.\u00A0 With proper integration this max torque will only be very momentary before the RPM increases and torque output decreases.\u00A0 There is no \u0027infinite torque\u0027 at zero rpm or anything like that.\u00A0 (Currently some integration issues result in this first tick of output power persisting for longer than it should as integration is done in discrete euler stepping; so the motor will essentially put out max torque for PhysicsDeltaTime seconds.... which is a problem, but is a problem with integration rather than the curves/motor function modeling).\n\u003C/p\u003E\n\u003Cp\u003E\nExternal example (note X-axis is reversed on this graph), note how input current (A) follows output torque linearly (max input current at max torque, close to zero input current at zero torque).\u00A0 At a constant input voltage, this will result in constant decreasing total input watt requirement (v*a=w); hence the purple EC line in my graph above.\u00A0 (This is one of the only external graphs I could find in a quick search that shows input current / input power as well as the rest of the stats).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u002233GN2742-190.gif\u0022 class=\u0022ipsImage\u0022 height=\u0022587\u0022 src=\u0022http://www.igusa.com/images/faq/technical/33GN2742-190.gif\u0022 width=\u0022584\u0022\u003E\u003Cbr\u003E\n1.2a @ 7.2v = 8.64w max input\u003Cbr\u003E\noutput peak = ~1.1w (from graph) @ ~30rpm, \u003Ca href=\u0022/cdn-cgi/l/email-protection\u0022 class=\u0022__cf_email__\u0022 data-cfemail=\u00223c0c120a5d7c0b120e4a\u0022\u003E[email\u0026#160;protected]\u003C/a\u003E input = 4.32w input, eff = ~25%, torque = ~375 mN*m\u003Cbr\u003E\neff peak = 35% @ ~55rpm, ~124 mN*m, 0.4w output, \u003Ca href=\u0022/cdn-cgi/l/email-protection\u0022 class=\u0022__cf_email__\u0022 data-cfemail=\u002290a0bea2f1d0a7bea2e6\u0022\u003E[email\u0026#160;protected]\u003C/a\u003E input = 1.44w input\u00A0 (0.4/1.44 = ~27% calculated efficiency; error likely due to inaccuracies in reading the graph)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\u00A0 Hmm... also this:\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Epublic class KSPWheelDustEffects : KSPWheelSubmodule\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n... Might mean interesting things in the next release....\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-16T20:10:52Z\u0022 title=\u002201/16/2017 08:10  PM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 16, 2017\u003C/time\u003E by Shadowmage\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-17T00:09:44Z","Content":"\n\u003Cp\u003E\nHoly rainbow puke batman!:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Mzg5XJO.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/Mzg5XJO.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nReally that is just me testing out particle emission.\u00A0 I set the colors animation array to some random arbitrary colors (black, white, cyan, magenta, blue)... and well, that is what I got out of it -- random rainbow colored particles \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nBut, at least I have the first-step of the dust-fx stuff working -- getting the things to emit something \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 Now comes the \u0027easy\u0027 part of linking it in to the wheel parameters, and looking up the dust color from the biome map, and setting the rest of the emission parameters from the settings and state.\u00A0 May add some additional handling for some of the standard \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E prefabs so that there is little/no dust thrown up when traversing the paved portions -- but unsure if things are built in such a way that it will be doable.\n\u003C/p\u003E\n\u003Cp\u003E\nThis may not seem very exciting, but you\u0027ll just have to trust me when I say \u0027it really is!\u0027.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nEdit: A bit more serious -- some repulsors kicking up some dust, with various settings for speed/size/emission/energy (playing with settings, learning the particle system a bit)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00223BiECvN.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/3BiECvN.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nMore edit:\u003Cbr\u003E\nBiome color lookups working (using the old/original color maps).\u00A0 Have dust emission factors working based on current forward-speed, side-slip, and wheel load (as compared to max load).\u003Cbr\u003E\u003Cbr\u003E\nSadly KSP\u0027s biomes don\u0027t exactly have clear boundries, so the color can be a bit off.\u00A0 This is in the \u0027shores\u0027 biome, which has a lookup color of a sandy-brown.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022nzXKxRn.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/nzXKxRn.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMay or may not work back in the camera-polling dust-color methods.\u00A0 I\u0027m really unfamiliar with the code so might take a bit of time to work it (though, that is what I thought of the dust-emission stuff too, but that only took a few hours to get working).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nStill a few bits to clean up, but looks like there will be at least some form of working dust system with the next KSPWheels update (KF will need config updates to enable it, so will need a new release there as well).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-17T03:25:34Z\u0022 title=\u002201/17/2017 03:25  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 17, 2017\u003C/time\u003E by Shadowmage\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"damerell","CreatedById":123074,"CreatedDateTime":"2017-01-17T09:16:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222923937\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484593220\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTorque output goes from Stall Torque @ 0RPM (this is the -maximum- torque that the motor can ouput), to zero torque at \u0027Max Motor RPM\u0027.\u00A0 The \u0027max torque\u0027 specified in the motor config -is- the torque cap.\u00A0 Want a motor with less torque output?\u00A0 Change the gearing or decrease the max motor torque.... (or setup a custom torque curve).\n\u003C/p\u003E\n\u003Cp\u003E\nPower \u003Cstrong\u003Euse\u003C/strong\u003E (EC/s) goes from maximum at 0 RPM, down to near-zero at maximum RPM.\u003Cbr\u003E\nPower \u003Cstrong\u003Eoutput\u003C/strong\u003E follows the standard \u0027power out = rpm * torque\u0027 functions, though this value is never actually used anywhere (the motor torque at a given RPM determines the power applied to the wheels).\u003Cbr\u003E\nTorque \u003Cstrong\u003Eoutput \u003C/strong\u003Efollows power input, from max torque at zero rpm, to zero torque at max rpm.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, you\u0027re implementing it, sort of thing, but I am a bit concerned that with no inherent link between power use and the power output that would be calculated from the torque, you may end up with parts with wildly varying (and perhaps \u0026gt;100%) efficiencies. In particular if these values are TweakScaled incorrectly that is almost bound to happen.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve re-edited this to reflect that you\u0027re trying to get a real-world efficiency curve, which is ingenious, and hence is why my idea of a fixed partEfficiency won\u0027t work.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, rather than being determined in the configuration file, the maximum power output could be calculated from torque and RPM at the \u0022sweet spot\u0022 in the middle. The advantage would be that the power usage for parts will be \u0022just right\u0022 - if someone does go in and halves the max torque, hey presto, the power usage will halve as well. Of course this will be very advantageous when TweakScaled.\n\u003C/p\u003E\n\u003Cp\u003E\n(I still think power usage should vary with part mass. In a TweakScale world that could be achieved by multipling up max RPM and torque by factors that multiplied together give the cube of linear dimension...)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-17T09:28:25Z\u0022 title=\u002201/17/2017 09:28  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 17, 2017\u003C/time\u003E by damerell\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-17T15:52:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222924661\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484644589\u0022 data-ipsquote-userid=\u0022123074\u0022 data-ipsquote-username=\u0022damerell\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, damerell said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWell, you\u0027re implementing it, sort of thing, but I am a bit concerned that with no inherent link between power use and the power output that would be calculated from the torque, you may end up with parts with wildly varying (and perhaps \u0026gt;100%) efficiencies. In particular if these values are TweakScaled incorrectly that is almost bound to happen.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve re-edited this to reflect that you\u0027re trying to get a real-world efficiency curve, which is ingenious, and hence is why my idea of a fixed partEfficiency won\u0027t work.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, rather than being determined in the configuration file, the maximum power output could be calculated from torque and RPM at the \u0022sweet spot\u0022 in the middle. The advantage would be that the power usage for parts will be \u0022just right\u0022 - if someone does go in and halves the max torque, hey presto, the power usage will halve as well. Of course this will be very advantageous when TweakScaled.\n\u003C/p\u003E\n\u003Cp\u003E\n(I still think power usage should vary with part mass. In a TweakScale world that could be achieved by multipling up max RPM and torque by factors that multiplied together give the cube of linear dimension...)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nIndeed, you have a valid point regarding efficiency.\u00A0 Which is why the current \u0027motorPower\u0027 specification in the configs is a temporary measure.\u00A0 The plugin already supports loading a \u0027motorEfficiency\u0027 value, which is what I would like to use to calculate motor input at any given scale (output power depends on scale);\u00A0 put into the config the \u0027maxMotorTorque\u0027 and \u0027maxRPM\u0027, and \u0027motorEfficiency\u0027 for the default scale of the motor, and the rest will be calculated dynamically based on the current scale.\n\u003C/p\u003E\n\u003Cp\u003E\nThe problem was that I did not have time / was unable to figure out quickly how to implement calculating backwards from motor max torque and efficiency value to motor input power values.\u00A0 I\u0027m sure it can be done, but I was unable to get it done in time for the initial KF release.\u00A0 Seems like there are also a couple other bits of data that will need to be known on the motor (or set to defaults) that determine the slope and scale of the efficiency curve (namely the no-load current / power use while at max no-torque RPM).\n\u003C/p\u003E\n\u003Cp\u003E\nYes, motor power use / output power will rise with part mass.\u00A0 Well, more precisely it rises to the ^3 which is currently what part-mass also scales with (they are separate scaling power options in the settings menu).\u00A0 Unsure how to handle max motor RPM scaling; it would almost have to be tied to the max-part-speed scaling (or else scale changes would require default gear changes).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nThe current \u0027balance\u0027 on the KF parts went mostly like this:\u003Cbr\u003E\nmaxLoad = 20 * partMass (in tons)\u003Cbr\u003E\nmotorPower = enough to accelerate the part @ max load at 3,5, or 10m/s/s at stall torque (3,5 or 10 depends on the part; is it a slow part like a probe-rover wheel (3) a track (5), or other wheels(10))\u003Cbr\u003E\nmaxSpeed = 23, 43, or 63 m/s (tracks, wheels, med wheel (as it says it is supposed to be fast)\u003Cbr\u003E\nmaxRPM = direct-drive 1:1, max RPM selected to make part hit max speed at default scale.\u003Cbr\u003E\nmotorInputPower = whatever was needed for 85% efficiency for the calculated motor power and max RPMs; I iteratively typed in values until I found one close enough for this initial pass.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-17T17:03:53Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0026amp;do=hovercard\u0022 data-mentionid=\u002250907\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0022 rel=\u0022\u0022\u003E@SpannerMonkey(smce)\u003C/a\u003E\u003Cbr\u003E\u003Cbr\u003E\nIn regards to your custom multi-wheel parts -- I should probably mention something that might help out the organization on them.\u00A0 KSPWheels supports having multiple KSPWheelBase modules.\u00A0 Simply add \u0027baseModuleIndex = 0/1/2/4/5/etc\u0027 to each of the sub-modules to tell it which base-module it should be linked to.\u00A0 (e.g. if you have 4 base modules, regardless of where exactly they are in the config, they will be index 0, 1, etc, depending on their order in the config; it is an index-within-base-modules, not raw-index-within-all-modules)\n\u003C/p\u003E\n\u003Cp\u003E\nThis would allow you to put each wheel (or pair of wheels?) into its own KSPWheelBase, where the controls for that group of wheels will each be grouped for the \u0027show/hide controls\u0027 button.\u00A0 Wheel groups should still work across multiple base modules in the same part as well.\n\u003C/p\u003E\n\u003Cp\u003E\n(Please note that multi-base modules has not been tested, but -should- be working and those setups is/will be supported; if it is not for any reason, please let me know (and if possible provide files so that I can test and fix it; none of my models have multiple wheels setup like those)).\n\u003C/p\u003E\n"},{"CreatedByName":"damerell","CreatedById":123074,"CreatedDateTime":"2017-01-17T17:42:02Z","Content":"\n\u003Cp\u003E\nGosh, the shape of the efficiency curve is another question. I hope I\u0027m not just reiterating what I\u0027ve said before, but with your torque/RPM relationship, maximum power output is always at exactly half the maximum no-torque RPM. My suggested part efficiency is then the ratio between input and output at that half-max RPM. How an efficiency curve affects power usage at other RPM is a separate question to that; all I\u0027m trying to suggest is a value to avoid your hardcoded max power (which bakes in a hidden overall efficiency) and provides an easy way to differentiate wheels and tracks.\n\u003C/p\u003E\n\u003Cp\u003E\nI quite appreciate this is all a bit beside the point when you\u0027re just trying to get something out the door.\n\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2017-01-17T17:52:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222924905\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484672633\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n26 minutes ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0026amp;do=hovercard\u0022 data-mentionid=\u002250907\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50907-spannermonkeysmce/\u0022 rel=\u0022\u0022\u003E@SpannerMonkey(smce)\u003C/a\u003E\u003Cbr\u003E\u003Cbr\u003E\nIn regards to your custom multi-wheel parts -\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExcellent news and I\u0027ll try it out and report back\n\u003C/p\u003E\n\u003Cp\u003E\nAlthough things have improved considerable since last postings, getting hooked on every module being equal was my downfall,\u00A0 In the case of the 8 wheelers, it was definitely the wrong way to go. Instead of asking a dozen questions I set about finding setups within that cfg that would make the vehicle plug and play, rather than needing user input before use. and it turned out a simpler than I\u0027d initially thought.\n\u003C/p\u003E\n\u003Cp\u003E\nThe reversal of rear steering in cfg was a simple matter of a minus in front of the steering rotation axis, and as I\u0027d already discovered that full rear lock is undesirable I halved the steering rotation.\u00A0 Tried on both large and small versions and it\u0027s faultless.\u00A0 Using the latest release brought no upset or horrors to light and everything worked right out of the box, though i miss the ride height adjustment.\u00A0 I\u0027ve tested the new release quite extensively and without issues, very impressed how well the tracks adapt to different vehicles and masses, and if anything I\u0027d say they perform a bit better than my fading memory of KF 1.05 recalls\n\u003C/p\u003E\n\u003Cp\u003E\nGoing to zip up a copy of the multwheel nonsense, it may be useful to you in some way, may also give you other ideas \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-17T19:46:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222924946\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484674922\u0022 data-ipsquote-userid=\u0022123074\u0022 data-ipsquote-username=\u0022damerell\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, damerell said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGosh, the shape of the efficiency curve is another question. I hope I\u0027m not just reiterating what I\u0027ve said before, but with your torque/RPM relationship, maximum power output is always at exactly half the maximum no-torque RPM. My suggested part efficiency is then the ratio between input and output at that half-max RPM. How an efficiency curve affects power usage at other RPM is a separate question to that; all I\u0027m trying to suggest is a value to avoid your hardcoded max power (which bakes in a hidden overall efficiency) and provides an easy way to differentiate wheels and tracks.\n\u003C/p\u003E\n\u003Cp\u003E\nI quite appreciate this is all a bit beside the point when you\u0027re just trying to get something out the door.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n(Not relevant to your post)\u00A0 I\u0027m honestly a bit confused as to why output power is measured as torque * rpm -- shouldn\u0027t output \u0027power\u0027 be simply the torque output?\u00A0 The amount of \u0027work\u0027 done to increase a wheels RPM comes solely from the torque; the existing wheel/motor RPM has zero impact on the velocity increase from torque (that is determined by wheel inertia/mass), so intuitively, to me, I\u0027m at a loss as to why \u0027power output\u0027 is measured as all of the documents / calculators / motor data says.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever you are right as to how to calculate the efficiency under the current modeling (I believe...) -- find the midpoint of the torque/rpm, calculate the \u0027output power\u0027 at that point, feed in the efficiency value to derive the \u0027input power\u0027 at that point, and feed that \u0027input power half-point\u0027 back into the linear functions to derive max (stall torque) input power and min (max rpm) input power.\u00A0 At least, I think that is how it should go.\u00A0 Otherwise you might end up with a motor that has half-rpm input power \u0026lt; than peak output power, which likely violates some laws of thermodynamics / conservation of energy.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for that info though, it let me look at the data in a bit of a different perspective and I think that should give me something to work with for calculating motor input power based on efficiency (rather than config-set input), I\u0027ll work up some functions and see what kind of numbers I get out of it.\u00A0 Likely it means that the power input requirements to all of the wheels will increase substantially as their current input value was derived from the highest efficiency point on the graph, but I could also have some other conversion errors in my spreadsheets that will need to be found and fixed.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222924963\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484675537\u0022 data-ipsquote-userid=\u002250907\u0022 data-ipsquote-username=\u0022SpannerMonkey(smce)\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, SpannerMonkey(smce) said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe reversal of rear steering in cfg was a simple matter of a minus in front of the steering rotation axis,\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat could also be accomplished by adding \u0027invertSteering = true\u0027 to the config; it will set the default to inverted (and the button as well).\u00A0 Though your method is probably more correct for multi-wheel parts as then it leaves the \u0027invert\u0027 button in proper state for the specific part/craft design (meaning it will read \u0027not inverted\u0027).\n\u003C/p\u003E\n\u003Cp\u003E\nGlad to hear it is all working out well for you so far.\u00A0 I know there are still a few problems with the wheel (and part-module) code that need to be cleaned up (UI, sliding on hills), can only hope that things are \u0027usable\u0027 in their current state, and know that things can only improve in the future with continued work/time/effort.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSpent a bit of time this morning working on integrating the dust-camera code from the old KF plugin.\u00A0 Went a lot easier than I expected, so will likely have optional real-time dust color calculation based on colors of terrain being traversed.\u00A0 Will be two toggles for the system in the settings menu -- one to enable/disable it entirely, and another to turn on/off the camera-lookup (if camera is disabled it will fall-back to the biome-lookup map).\n\u003C/p\u003E\n\u003Cp\u003E\nDust cameras are handled on a per-vessel basis, using a VesselModule.\u00A0 Haven\u0027t played with VesselModules before, but this seemed like the ideal use-case for them (non-persistent, only exist in flight-scene).\u00A0 This should be a fair step-up in efficiency compared to the original dust-fx code as it used one-camera-per-whee-part; a craft with multiple wheels on it would be doing multiple extra renders depending on the number of wheels.\n\u003C/p\u003E\n\u003Cp\u003E\nColor selection also lerps between the camera polled colors between updates (it only updates once every ~3s currently, may change) so there should be smooth transitions even when the on-screen colors are changing fairly rapidly.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNext on the development list will be animated texture and light support for repulsors, or perhaps fixing the water-levitation support for repulsors (it will be one and then the other either way, which is first doesn\u0027t matter...).\u00A0 So repulsors should be a bit more \u0027flashy\u0027 with the next release.\n\u003C/p\u003E\n\u003Cp\u003E\nOn the subject of repulsors -- I noted some behaviour during testing that may shed some light on some of the comments regarding their functionality.\u00A0 Notably the point of force application is the raycast hit point (which is the contact spot on the ground) -- on a repulsor equipped craft, this manifests in the vessel seemingly riding on \u0027sticks\u0027 when you try and land at any kind of an angle.\u00A0 Not really sure the best way to solve this; I suppose I could add some \u0027force-application-offset\u0027 code to the wheel-collider so that, for repulsors, the forces are applied at@ the raycast origin.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nFurther on the subject of repulsors -- currently they apply their force along the hit-normal of whatever surface they are contacting.\u00A0 This is very appropriate behaviour for wheels/tracks/stuff using friction, but perhaps not appropriate for a repulsor.\u00A0 This results in no matter the orientation of the repulsor to the surface, the output forces are always directly away from the surface (e.g \u0027up\u0027 as seen from the surface), and at no point does a repulsor add any \u0027motive\u0027 forces to the craft.\n\u003C/p\u003E\n\u003Cp\u003E\nShould I adjust/alter/recode the repulsors to use \u0027naive\u0027 force application, using the suspenion vector as the force-application vector?\u00A0 This would mean that repulsors angled towards a surface would impart velocity to a craft (and would give a, perhaps overpowered, purpose to the \u0027gimballed\u0027 repulsors).\u00A0 If this change were implemented it would further help the \u0027on sticks\u0027 problem posted above, as at higher incident angles they would generate less \u0027up\u0027 force and more \u0027re-aligning\u0027 force.\u00A0\u003Cbr\u003E\u003Cbr\u003E\nThoughts, preferences, feedback, ideas?\n\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2017-01-17T20:23:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222925110\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484682387\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 minutes ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ncan only hope that things are \u0027usable\u0027 in their current state, and know that things can only improve in the future with continued work/time/effort.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs you\u0027re so close to it I can appreciate this sentiment but, unless my craft and tastes a re way off norm I reckon for a first release it\u0027s considerably better than you give yourself credit for. I reckon any set of wheels that can carry a 7 tonne truck \u003Cu\u003E57 km without any operator input\u003C/u\u003E whatsoever (no \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E either)\u00A0 are a bit special\u00A0 (btw was only stopped by a mountain that no EC drive should be able to climb)\n\u003C/p\u003E\n\u003Cp\u003E\nAlthough I\u0027ve nothing to add on the repulsors , as i\u0027ve not converted the ones I have as yet, \u00A0 I\u0027ll be glad to see the water capability return, as it means i can wake up the hovercraft project.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBack to wheels however, gear ratios, brilliant I\u0027ll be going back to that mountain with a new ratio. \u00A0\u00A0 Is there any vague possibility that \u003Cu\u003Esometime in the future\u003C/u\u003E\u00A0 some kind of on the fly selection could be made, even just as far as a two speed high low type arrangement .\u00A0 This would be the icing on the cake for another rover type modlet of mine.\n\u003C/p\u003E\n\u003Cp\u003E\nAll in all I\u0027ve not found anything to gripe about or can\u0027t see the reason for and adapt to. \u00A0 Even the wheel damage which drove me mad for a day, i was tempted to turn it off or down but the all or nothing choice wasn\u0027t suitable, i don\u0027t mind consequences like broken wheels for driving like a goon. \u00A0 \u00A0 Damage is under control for the most part now, apart from the two wheeler which had to spout thrust transforms from the exhausts, as I simply can\u0027t get it to move under wheel power without instant wheel destruction, but romping along at 30ms under thrust is no problem, and as a toy that\u0027ll do fine.\n\u003C/p\u003E\n"},{"CreatedByName":"damerell","CreatedById":123074,"CreatedDateTime":"2017-01-17T21:32:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222925110\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484682387\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n(Not relevant to your post)\u00A0 I\u0027m honestly a bit confused as to why output power is measured as torque * rpm -- shouldn\u0027t output \u0027power\u0027 be simply the torque output?\u00A0 The amount of \u0027work\u0027 done to increase a wheels RPM comes solely from the torque; the existing wheel/motor RPM has zero impact on the velocity increase from torque (that is determined by wheel inertia/mass), so intuitively, to me, I\u0027m at a loss as to why \u0027power output\u0027 is measured as all of the documents / calculators / motor data says.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPower is proportional to torque * rpm in the same way work is proportional to force * distance (and hence power pushing something in a straight line increases with the speed of the object). An ideally efficient motor exerting torque at 0 RPM burns no power because it does no work - of course, a real motor burns power from its own internal losses - just as you do no work shoving an immovable object.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is a bit counterintuitive, but what it comes down to is that it takes more energy to shove something (with a given force) a long way than a short one.\n\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2017-01-17T21:41:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222925110\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484682387\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n(Not relevant to your post)\u00A0 I\u0027m honestly a bit confused as to why output power is measured as torque * rpm -- shouldn\u0027t output \u0027power\u0027 be simply the torque output?\u00A0 The amount of \u0027work\u0027 done to increase a wheels RPM comes solely from the torque; the existing wheel/motor RPM has zero impact on the velocity increase from torque (that is determined by wheel inertia/mass), so intuitively, to me, I\u0027m at a loss as to why \u0027power output\u0027 is measured as all of the documents / calculators / motor data says.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTorque and power are physically different things. \u00A0Torque can be thought of as how much you\u0027re pushing the wheel to rotate, which is independent of how much kinetic energy you\u0027re actually imparting to the wheel. \u00A0Torque is the rotational equivalent of force.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-17T22:54:53Z","Content":"\n\u003Cp\u003E\nHmm... okay, so the increase to kinetic energy depends on current kinetic energy -- the higher the \u003Cs\u003Ecurrent KE\u003C/s\u003E velocity/rpm, the higher the contribution to final KE from any given force/torque?\u00A0 (this would seem to line up with the KE = 0.5*m*v^2 equation, and I believe is the explanation of the oberth effect and why thrusting at periapsis is the most efficient, as that is when your kinetic energy is highest...).\n\u003C/p\u003E\n\u003Cp\u003E\nHowever I\u0027m still having problems seeing how that factors into motor use / output.\u00A0 Certainly a given force/torque only imparts a specific velocity/rpm change that depends only on the mass/MOI of a body (and duration of that force), and not on its current velocity (or its movement during the duration of the force-application)?\u00A0 But the kinetic energy change from the force/torque depend on the starting energy?\u00A0 Why is kinetic energy a term in calculation of motor power (why would a motor care about the KE of the body it is accelerating?)?\u00A0 (These are all more or less rhetorical questions, but if someone does have answers they may help me understand things better)\n\u003C/p\u003E\n\u003Cp\u003E\n(I\u0027m sure both of your explanations and understandings are correct and that it is my understanding that needs... enlightening...\u00A0 Apparently I\u0027m going to have to do more study/learning/investigation ....)\n\u003C/p\u003E\n\u003Cp\u003E\nTorques and forces I think I have a pretty good understanding of, I\u0027m apparently just clueless when it comes to power/energy changes from those torques/forces (velocity/rpm changes from force/torques I know well though...).\u00A0 I\u0027m sure I\u0027ll get it figured out / learned; it has been the \u0027learning\u0027 process that has comprised the majority of the development time for the wheel system\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n(And as (bad?) luck would have it, I\u0027m working late tonight doing some very.... boring stuff... so will look into some vids/learning materials \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E)\n\u003C/p\u003E\n\u003Cp\u003E\nEdit:\u00A0 Okay, so, after a bit of research, I have found where part of my understanding diverges from the textbooks -- time-vs-distance derivatives;\u00A0 being so used to working in a time-dominant environment (stepped physics integration), I take for granted that many of the units used already have time as a factor.\u00A0 Still more reading to be done...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\n2nd edit (quote from wikipedia\u00A0\u003Ca href=\u0022https://en.wikipedia.org/wiki/Power_%28physics%29\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Power_(physics)\u003C/a\u003E ):\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs a physical concept, power requires both a change in the physical universe and a specified time in which the change occurs. This is distinct from the concept of work, which is only measured in terms of a net change in the state of the physical universe. The same amount of work is done when carrying a load up a flight of stairs whether the person carrying it walks or runs, but more power is needed for running because the work is done in a shorter amount of time.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo apparently I\u0027ve been thinking \u0027power\u0027 when really what it should have been is \u0027work\u0027.\u00A0 Where power = work/time.... or something like that....\u00A0 (still more reading...).\u00A0 (although this still doesn\u0027t help me understand why rpm effects power; I would still think that power would be \u0027power = torque / time\u0027 or similar...)\n\u003C/p\u003E\n\u003Cp\u003E\n3rd edit: power calculation derivatives:\u00A0\u003Cbr\u003E\nPower = ((torque/radius) * (radius * angularVelocity * time)) / time.\u003Cbr\u003E\nCancelling out the /radius*radius and *time/time factors leaves:\u003Cbr\u003E\nPower = torque * angularVelocity\u003Cbr\u003E\n(The refactoring makes sense, but still trying to figure out where angular velocity comes into play as a term; shouldn\u0027t it be angular acceleration in the above?)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-18T00:19:16Z\u0022 title=\u002201/18/2017 12:19  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 18, 2017\u003C/time\u003E by Shadowmage\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"damerell","CreatedById":123074,"CreatedDateTime":"2017-01-18T00:37:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222925338\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484693693\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBut the kinetic energy change from the force/torque depend on the starting energy?\u00A0 Why is kinetic energy a term in calculation of motor power (why would a motor care about the KE of the body it is accelerating?)?\u00A0 (These are all more or less rhetorical questions, but if someone does have answers they may help me understand things better)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nA motor doesn\u0027t care about the KE of the body it\u0027s accelerating, but it does care how fast the shaft is turning, because it has to push it around further every second.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not sure how to explain this (and as luck would have this, I am trying to write this comment after a healthy intake of er yeasty beverages) but I should try considering matters without time as a factor. To push with a force of 1N through 2m is clearly twice as much work as pushing with the same force through 1m; to turn the shaft two revolutions exerting a torque of 1Nm is twice as much work as turning it one revolution.\n\u003C/p\u003E\n\u003Cp\u003E\nGiven that, if the shaft revolves twice a second rather than once, and yet we keep pushing it just as hard all the way around, we have done twice as much work that second - twice as much power.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-18T00:47:02Z\u0022 title=\u002201/18/2017 12:47  AM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 18, 2017\u003C/time\u003E by damerell\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-18T16:47:35Z","Content":"\n\u003Cp\u003E\nGot dust-camera stuff all working yesterday/last night.\u00A0 Works very well; smooth color transitions, closely matching the current terrain under the vehicle, close to zero performance impact (it renders a 6 x 6 texture once every 3 seconds... thats about as \u0027low-impact\u0027 as it comes).\n\u003C/p\u003E\n\u003Cp\u003E\nSo.. yeah.. dust is working.\u00A0 Still some tuning that could be done to the actual particle parameters, but it is working well as-is.\u00A0 Speed/slip/compression/scale all effect the amount of dust kicked up by a part, with a minimum speed threshold for when it gets \u0027turned on\u0027 initially (below that speed there is no dust, regardless of any slip/compression factors).\u00A0 Hit a jump especially hard on the way down and it\u0027ll kick up quite a bit of dust at the impact point (from the compression and slip), quickly tapering back down to normal levels as the compression normalizes.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nStill working through the motor power calc stuff.\u00A0 The good thing is that I don\u0027t \u003Cem\u003Ereally\u003C/em\u003E need to understand the concept in order to implement it; I can implement the math/system without knowing the why or the how... I just wouldn\u0027t be able to fix it / alter it much without a thorough understanding of the mechanics.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nHave also started work on the \u0027repulsors float over water\u0027 bit of code.\u00A0 Basically will be running an external secondary spring calculation method that kicks in when going over water.\u00A0 \u003Cstrong\u003EThere will be no water sliders(colliders)\u003C/strong\u003E, so there shouldn\u0027t be any grief caused by this method; it is being handled purely at the physiscs/forces level by -simulating- a suspension hit at the ocean surface.\n\u003C/p\u003E\n\u003Cp\u003E\nStill undecided on the repulsor force-application point and suspension axis vs. hit-normal implementation details.\u00A0 Perhaps I\u0027ll add some settings toggles to switch between the implementations and let the user choose \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"DarkOwl57","CreatedById":161624,"CreatedDateTime":"2017-01-18T17:00:40Z","Content":"\n\u003Cp\u003E\nNot sure if this really fits here, but I would really like a realistic collision/physics thing, like when one wheel runs over another it LEAPS up over the other wheel, similar to an F1 car\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-18T20:12:00Z","Content":"\n\u003Cp\u003E\nRe: repulsors and the questions of force-vectors and force-application points.\n\u003C/p\u003E\n\u003Cp\u003E\nExample 1: current implementation\u003Cbr\u003E\u003Cimg alt=\u0022iMTaEjk.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/iMTaEjk.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nNew implementation (will be testing soon):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022TyCg8JX.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/TyCg8JX.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAs can be seen from my (terrible) force-diagrams, the new implementation method should result in much more stability when using repulsors.\u00A0 Also they will generate \u0027thrust\u0027 when at a diagonal to a surface.\n\u003C/p\u003E\n\u003Cp\u003E\nTechnically I don\u0027t have to combine the two changes (application point, vector), and have put some debugging toggles on the repulsors so that I can play around with each setting individually and in combination to see what \u0027feels\u0027 best.\u00A0 Just the change to force-application point should fix most of the \u0027on-sticks\u0027 feeling of the repulsors.\u00A0 The change to force-application vector is another beast entirely, and removes the need for external engines when using repulsors -- a truly \u0027game changing\u0027 difference.\u00A0 So going to do bit of testing on it myself, and will likely post/link to a dev-dll for others who want to try it out/give feedback prior to release.\u00A0 Might just end up making both values be configurable through either part configs or in-game settings menu...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nAlso have the repulsor water levitation in place with a WIP implementation.\u00A0 Likely some bits to fix on it when next I can do testing (I hate doing programming without ability to test stuff immediately, but such is the nature of my development time).\n\u003C/p\u003E\n"},{"CreatedByName":"0111narwhalz","CreatedById":110660,"CreatedDateTime":"2017-01-18T20:26:47Z","Content":"\n\u003Cp\u003E\nPerhaps the gimbaling ones will act as actual control elements.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-18T20:36:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222926332\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484771207\u0022 data-ipsquote-userid=\u0022110660\u0022 data-ipsquote-username=\u00220111narwhalz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, 0111narwhalz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPerhaps the gimbaling ones will act as actual control elements.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nStrangely enough the gimballing ones don\u0027t actually include any gimbals/gimballing functionality?\u00A0 At least not that I could find in the original configs, KF plugin code, or models.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat -was- the point in that part (the gimballing repulsors)?\u00A0 Did they have actual gimbal functionality at some point?\n\u003C/p\u003E\n"},{"CreatedByName":"0111narwhalz","CreatedById":110660,"CreatedDateTime":"2017-01-18T20:47:47Z","Content":"\n\u003Cp\u003E\nYeah, they (and the original ones too) stabilized themselves. The gimbaling ones did not care about orientation at all, which was quite noticeable. The surface-mount ones cared a\u00A0\u003Cem\u003Elot\u003C/em\u003E, which was also noticeable.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-18T22:01:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222926360\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484772467\u0022 data-ipsquote-userid=\u0022110660\u0022 data-ipsquote-username=\u00220111narwhalz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n40 minutes ago, 0111narwhalz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYeah, they (and the original ones too) stabilized themselves. The gimbaling ones did not care about orientation at all, which was quite noticeable. The surface-mount ones cared a\u00A0\u003Cem\u003Elot\u003C/em\u003E, which was also noticeable.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYour comment made me take a closer look at the configs/plugins for the repulsors, and you are correct -- they do (rather, did) have gimbaling capabilities; however they are handled at the repulsor module level, using a form of \u0027auto-point-at-surface\u0027 gimballing rather than user-initiated gimballing.\u00A0 (I was looking for ModuleGimbal, which they do not have or use).\n\u003C/p\u003E\n\u003Cp\u003E\nWith that said -- I\u0027m not sure that I\u0027ll be restoring that functionality.\u00A0 Keeping the repulsors pointed at the ground\u00A0(e.g. keeping the vehicle right-side up...) should be the responsibility of the vehicle operator.... \u00A0 Will give it some further thought and perhaps add in some basic test code to see how the gimballing effects their operation (it would render the \u0027apply force along suspension axis\u0027 bit of code moot, as the suspension axis would effectively be the \u0027up\u0027 axis at all times).\n\u003C/p\u003E\n\u003Cp\u003E\nI also took another look at the models and apparently they (did/could?) use 5 separate wheel-colliders and raycasts (one straight down, on each at an angle to NSEW).\u00A0 Also not sure if I\u0027ll be restoring that bit of functionality; it shouldn\u0027t be needed with the updated force-application model (and would require a fair bit of code changes to get working), and about all that it would accomplish is decrease performance.\n\u003C/p\u003E\n"},{"CreatedByName":"Beetlecat","CreatedById":92207,"CreatedDateTime":"2017-01-18T22:37:29Z","Content":"\n\u003Cp\u003E\nThe ability to drive around using *only* repulsers is extremely attractive, however knowing how different they are from *actual* engines/thrusters, having a limited ability there is understandable. Gimbaling and self-righting behaviors for craft sounds like something that Throttle Controlled Avionics or KOS scripts could handle.\n\u003C/p\u003E\n\u003Cp\u003E\nI love the \u0022frictionless casters\u0022 aspect of the KF repulsers, and using jet engines,\u00A0speed brakes, and retro-thrusters to control navigation is easy.\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe a new kind of repulser that\u0027s basically a modified rocket could be utilized to get that full hover/\u003Cabbr title=\u0022Vertical Take-Off and Landing\u0022\u003Evtol\u003C/abbr\u003E/rocket thing going\u00A0(a-la those Matrix hovercraft...)?\n\u003C/p\u003E\n"},{"CreatedByName":"Fireheart318","CreatedById":159932,"CreatedDateTime":"2017-01-19T06:10:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222926499\u0022 data-ipsquote-contentid=\u0022152782\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221484779049\u0022 data-ipsquote-userid=\u002292207\u0022 data-ipsquote-username=\u0022Beetlecat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Beetlecat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe ability to drive around using *only* repulsers is extremely attractive, however knowing how different they are from *actual* engines/thrusters, having a limited ability there is understandable. Gimbaling and self-righting behaviors for craft sounds like something that Throttle Controlled Avionics or KOS scripts could handle.\n\u003C/p\u003E\n\u003Cp\u003E\nI love the \u0022frictionless casters\u0022 aspect of the KF repulsers, and using jet engines,\u00A0speed brakes, and retro-thrusters to control navigation is easy.\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe a new kind of repulser that\u0027s basically a modified rocket could be utilized to get that full hover/\u003Cabbr title=\u0022Vertical Take-Off and Landing\u0022\u003Evtol\u003C/abbr\u003E/rocket thing going\u00A0(a-la those Matrix hovercraft...)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat\u0027s a \u0022speed brake\u0022?\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-01-19T16:20:04Z","Content":"\n\u003Cp\u003E\nYesterday / last night saw the return of repulsors floating over water.\u00A0 Still on the \u0027todo\u0027 list regarding repulsors are additional dust-fx when over water, animated textures, and lighting.\n\u003C/p\u003E\n\u003Cp\u003E\nAs far as the changes to suspension --\n\u003C/p\u003E\n\u003Cp\u003E\nApply force at offset position = yes, very helpful.\u00A0 Eliminates most need for the auto-gimballing that was previously present.\u00A0 Will be keeping this one in place for repulsors.\u00A0 Totally removes the \u0027riding on sticks\u0027 feeling.\u00A0 Come in at a high incident angle (fwd or side)?\u00A0 No problem, your repulsors will level you out when you \u0027land\u0027\u00A0 (as long as they are at least somewhat pointed at the ground, angles beyond 60\u0027 may see the repulsor itself collide with the ground at higher speeds due to the nature of stepped integration).\u003Cbr\u003E\u003Cbr\u003E\nApply force from offset suspension = meh, wasn\u0027t impressed.\u00A0 Was usable, did exactly what was intended, but would overly complicate craft design and be even more in violation of physics.\u00A0 Combining it with manual (ModuleGimbal) gimballing, and the effects were quite hilarious; not something that I would recommend.\u00A0 Apparently the wheels don\u0027t like being driven from 5% compression to 50% compression in a single frame by the gimbal snapping back to neutral, causes massive \u0027jumping\u0027 force from the compression when gimbal is released (use of gimbal speed would mostly eliminate the jumping, but that feature has its own problems).\u00A0 Gimbal also didn\u0027t work unless I placed a vertically-oriented control point on the craft... so useless for \u0027standard\u0027 designed craft; the controls were also all reversed on the gimbals, so truly unusable even if it didn\u0027t have problems with jumping.\n\u003C/p\u003E\n\u003Cp\u003E\nI would like to play around with the \u0027repulsors can provide driving forces\u0027 a bit more (as yeah, the whole matrix-style-hovercraft are...awesome, even if unrealistic).\u00A0 Or... more likely... I\u0027ll put that effort into something a bit more realistic that I might actually use in real gameplay -- plugin support for \u003Cabbr title=\u0022Vertical Take-Off and Landing\u0022\u003EVTOL\u003C/abbr\u003E ducted fans and ground-effect flyers, helicopter rotors, and props (all electric).\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n(Testing out repulsors over water; dust-fx works, but is barely noticeable on water at its default land settings... needs some special handling linked into the repulsors/wheels a bit to know when to activate \u0027water\u0027 mode)\u003Cbr\u003E\u003Cimg alt=\u0022TQMZcCr.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/TQMZcCr.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00224I07AvS.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/4I07AvS.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"}]}