{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":150,"Articles":[{"CreatedByName":"Qigon","CreatedById":141819,"CreatedDateTime":"2016-01-08T01:07:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222352683\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452210463\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHave you tried navball orientation library from \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/library.html\u0022 rel=\u0022external nofollow\u0022\u003Ecommunity examples\u003C/a\u003E ? Try provided library with example, it is simple to use and understand.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you realy need -1 you can always use 360 miunus pointing value.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve heard about it but never really knew what it was about, I\u0027m gonna try when playing next time. It really doesn\u0027t matter if -1 or359 since I\u0027ll deal about targeting a desired heading.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnother thing that occurred to me is having a Geo point at North Pole and using point:bearing, Although it\u0027s not as good because I\u0027d like multiple ships loaded at a time.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-08T04:31:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222352769\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452215247\u0022 data-ipsquote-userid=\u0022141819\u0022 data-ipsquote-username=\u0022Qigon\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Qigon said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve heard about it but never really knew what it was about, I\u0027m gonna try when playing next time. It really doesn\u0027t matter if -1 or359 since I\u0027ll deal about targeting a desired heading.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnother thing that occurred to me is having a Geo point at North Pole and using point:bearing, Although it\u0027s not as good because I\u0027d like multiple ships loaded at a time.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSpecifically, in this code: \u003Ca href=\u0022https://github.com/KSP-KOS/KSLib/blob/master/library/lib_navball.ks\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KSLib/blob/master/library/lib_navball.ks\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nYou can use the function compass_for(ship) to get a number from 0 to 359 for what you\u0027re looking for.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Qigon","CreatedById":141819,"CreatedDateTime":"2016-01-08T23:44:56Z","Content":"\n\u003Cp\u003E\nThanks guys, it worked like a charm.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNow I\u0027m looking for predictions, I\u0027d like to know what will my altitude look like within a few seconds. Problem is, I can\u0027t find a way to call predictAt and convert its format (vector) into anything that can compute \u00A0either altitude, alt:radar or terrain height, like geocoordinates do.\n\u003C/p\u003E\n\u003Cp\u003E\nFor this problems sake I don\u0027t feel like cheating since it\u0027s totally reasonable to have GPS maps pre\u00A0stored for any planet.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-09T04:31:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222353872\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452296696\u0022 data-ipsquote-userid=\u0022141819\u0022 data-ipsquote-username=\u0022Qigon\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Qigon said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThanks guys, it worked like a charm.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNow I\u0027m looking for predictions, I\u0027d like to know what will my altitude look like within a few seconds. Problem is, I can\u0027t find a way to call predictAt and convert its format (vector) into anything that can compute \u00A0either altitude, alt:radar or terrain height, like geocoordinates do.\n\u003C/p\u003E\n\u003Cp\u003E\nFor this problems sake I don\u0027t feel like cheating since it\u0027s totally reasonable to have GPS maps pre\u00A0stored for any planet.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou can get the position of the center of the body (with something like ship:body:position, or kerbin:position) in the same XYZ reference frame as the predictAt vector.\n\u003C/p\u003E\n\u003Cp\u003E\nSo you can do vector subtraction between the two to get a vector from the future position to the body center.\u00A0 The magnitude (:MAG) of that is the distance from that position to the body\u0027s center.\u00A0 (The effective radius for gravity calculations.\n\u003C/p\u003E\n\u003Cp\u003E\nOnce you have that, if you want to know the altitude above sea level, subtract the body\u0027s radius.\u00A0 (body:radius is the sea-level radius of the body).\n\u003C/p\u003E\n\u003Cp\u003E\nIf you want to know the altitude above ground level, you can do\u00A0 (body here):geopositionof( (xyz vector here) ):terrainheight \u002B (body here):radius\u00A0\u00A0 to get the actual terrain\u0027s distance from the body center and do the same thing as suggested above for sea level height.\n\u003C/p\u003E\n\u003Cp\u003E\nBe aware that when it comes to predicting terrain height, once you get there the actual terrain can be as much as 3 to 4 meters off from the geoposition:terrainheight prediction (at most).\u00A0 The prediction is based on the ideal smooth curve functions defined in the game\u0027s terrain generator formula, and the actual ground when you get there is a digitized approximation of that created by drawing polygons between sampled vertex points of that function.\u00A0 The amount by which it can be off varies depending on your graphics load settings (how fine-grain your terrain polygons are).\u00A0 (This was behind one of the bugs in KSP\u0027s early access days.\u00A0 You\u0027d change your graphics settings, then go back in and reload your game, go back to a saved landed ship on the mun, and it would clip right through the ground and fall forever into the Mun\u0027s hollow interior.\u00A0 This happened because the terrain approximation polygons were now in a slightly different location than they were when you saved the game and the vessel\u0027s position happened to be slightly under the ground polygons rather than slightly above them.\u00A0 If you notice it takes a second or two to reset your vessel\u0027s position a bit and it seems to jump up a bit to a new spot when you load a vessel from the map view now, that\u0027s due to squad\u0027s fix to this bug.\u00A0 They now, upon loading, move the ship up or down a bit as necessary to match the new location of the terrain polygons.)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-01-09T14:28:11Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to create Pilot assistance program, rather than full autopilot. So, I created script that influence \u003Ctt\u003ESHIP:CONTROL:PITCHTRIM and SHIP:CONTROL:ROLLTRIM using PID controler and info from navball.\u003C/tt\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nset myRoll to PID_seek( RollPID, seekRoll, roll_for(ship) ).\nset myPitch to PID_seek( PitchPID, seekPitch, pitch_for(ship) ).\nset SHIP:CONTROL:ROLLTRIM to myRoll.\nset SHIP:CONTROL:PITCHTRIM to myPitch.\u003C/pre\u003E\n\u003Cp\u003E\n\u003Ctt\u003EWhen I read data to print on terminal, it shows that \u003C/tt\u003E \u003Ctt\u003ESHIP:CONTROL:PITCHTRIM and SHIP:CONTROL:ROLLTRIM have different values, however it seems that have very little influence, or don\u0027t have any influence at all on stabilization.\u003C/tt\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ctt\u003EHUD controlstick position on down left side of screen does not change pitch/roll like it change with ALT \u002B (w,s) and ALT \u002B (a,d)\u003C/tt\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIs that a bug or intended ? My idea is that kOS adjust trims for desired pitch/angle while pilot still offset it when need trough regular controls.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-09T21:55:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222354429\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452349691\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan\u003Eset myRoll to PID_seek( RollPID, seekRoll, roll_for(ship) ).\nset myPitch to PID_seek( PitchPID, seekPitch, pitch_for(ship) ).\nset SHIP:CONTROL:ROLLTRIM to myRoll.\nset SHIP:CONTROL:PITCHTRIM to myPitch.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTo me this looks like you\u0027re trying to set the trim values to values proportional to an error measured in entire degrees.\u00A0 (if pitch is off by merely 1 degree, then set the trim to its max of 1.0).\u00A0 Not sure if this helps the problem or not, but that\u0027s going to make for some very violent overcorrection once it does work.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll pass this on to our steering expert and ask how the controls lockout works.\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-01-09T22:35:58Z","Content":"\n\u003Cp\u003E\nI didin\u0027t posted whole code, desired \u003Cstrong\u003EseekRoll\u003C/strong\u003E and \u003Cstrong\u003EseekPitch\u003C/strong\u003E were set elsewhere. This part goes trough infinite loop and PID controler array is adjusted so there should not be overshoot, if plane start to wooble it is possible to adjust PID controler trough other values.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen reading settings that should go from -1 to \u002B1, roll ant pitch trim gradualy increases, so there is no violent jump in controlos.\u003Cbr\u003E\nBut problem is that I don\u0027t see effect of those in flight.\n\u003C/p\u003E\n\u003Cp\u003E\nSimilar thing I have done with throttle/vertical velocity PID controler, that work just fine. Important part of code is one page back and whole script and craft file is available to download from my link in signature.\n\u003C/p\u003E\n\u003Cp\u003E\nI have even created nice script for powered landing that gives just enough throttle for gentle landing on any celestial body, on same throttle/vertical speed PID principle. That works like a charm, kind of pround on myself, since those are my very first skiripts in kOS.\n\u003C/p\u003E\n\u003Cp\u003E\nI wold like to enhance that hovering script for Heli, so not only that makes stable vertical speed, but also to stabilize pitch/roll, but for some reason pitch/roll trims didn\u0027t worked.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for investigating this.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-09T23:20:51Z\u0022 title=\u002201/09/2016 11:20  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 9, 2016\u003C/time\u003E by kcs123\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Qigon","CreatedById":141819,"CreatedDateTime":"2016-01-09T23:09:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222354157\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452313862\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou can get the position of the center of the body (with something like ship:body:position, or kerbin:position) in the same XYZ reference frame as the predictAt vector.\n\u003C/p\u003E\n\u003Cp\u003E\nSo you can do vector subtraction between the two to get a vector from the future position to the body center.\u00A0 The magnitude (:MAG) of that is the distance from that position to the body\u0027s center.\u00A0 (The effective radius for gravity calculations.\n\u003C/p\u003E\n\u003Cp\u003E\nOnce you have that, if you want to know the altitude above sea level, subtract the body\u0027s radius.\u00A0 (body:radius is the sea-level radius of the body).\n\u003C/p\u003E\n\u003Cp\u003E\nIf you want to know the altitude above ground level, you can do\u00A0 (body here):geopositionof( (xyz vector here) ):terrainheight \u002B (body here):radius\u00A0\u00A0 to get the actual terrain\u0027s distance from the body center and do the same thing as suggested above for sea level height.\n\u003C/p\u003E\n\u003Cp\u003E\nBe aware that when it comes to predicting terrain height, once you get there the actual terrain can be as much as 3 to 4 meters off from the geoposition:terrainheight prediction (at most).\u00A0 The prediction is based on the ideal smooth curve functions defined in the game\u0027s terrain generator formula, and the actual ground when you get there is a digitized approximation of that created by drawing polygons between sampled vertex points of that function.\u00A0 The amount by which it can be off varies depending on your graphics load settings (how fine-grain your terrain polygons are).\u00A0 (This was behind one of the bugs in KSP\u0027s early access days.\u00A0 You\u0027d change your graphics settings, then go back in and reload your game, go back to a saved landed ship on the mun, and it would clip right through the ground and fall forever into the Mun\u0027s hollow interior.\u00A0 This happened because the terrain approximation polygons were now in a slightly different location than they were when you saved the game and the vessel\u0027s position happened to be slightly under the ground polygons rather than slightly above them.\u00A0 If you notice it takes a second or two to reset your vessel\u0027s position a bit and it seems to jump up a bit to a new spot when you load a vessel from the map view now, that\u0027s due to squad\u0027s fix to this bug.\u00A0 They now, upon loading, move the ship up or down a bit as necessary to match the new location of the terrain polygons.)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nVery cool, never though of looking into body properties.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll be honest, although I\u0027ve been over this for quite some time I couldn\u0027t get more than 60 seconds without at least one person nagging me about something, so my mind couldn\u0027t possibly be more foggy. I can do the math for the present time and get altitude ok, but whenever I use the same formula for positionAt I get weird things. Shold I expect big displacements in bodt:position? Becaus e I can\u0027t get reasonable numbers.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nlocal dB to positionAt(ship:body,TIME\u002B10) - ship:body:position.\nprint db:mag.\u003C/pre\u003E\n\u003Cpre style=\u0022background-color:#2b2b2b;color:#a9b7c6;font-family:\u0027Source Code Pro\u0027;font-size:10.5pt;\u0022\u003E\n\n\u00A0\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-10T06:54:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222354929\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452380956\u0022 data-ipsquote-userid=\u0022141819\u0022 data-ipsquote-username=\u0022Qigon\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Qigon said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan\u003Elocal dB to positionAt(ship:body,TIME\u002B10) - ship:body:position.\nprint db:mag.\u003C/span\u003E\u003C/pre\u003E\n\u003Cpre style=\u0022background-color:#2b2b2b;color:#a9b7c6;font-family:\u0027Source Code Pro\u0027;font-size:10.5pt;\u0022\u003E\n\n\n\u00A0\u003C/pre\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDoesn\u0027t it make more sense to do positionAt(ship,time:seconds\u002B10) rather than positionAt(ship:BODY,time:seconds\u002B10) ?\u00A0 You\u0027re comparing the body\u0027s position to the body\u0027s position and making a vector of that.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-10T06:55:11Z\u0022 title=\u002201/10/2016 06:55  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 10, 2016\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-10T07:34:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222354429\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452349691\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\n\nset SHIP:CONTROL:ROLLTRIM to myRoll.\nset SHIP:CONTROL:PITCHTRIM to myPitch.\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI did a little bit of testing on my own and I think the trim feature is bugged.\u00A0 I made an issue about it here:\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/1362\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/1362\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not normally the one who touches the steering code so I\u0027m leaving it for someone else to pick up and notice it, but if nobody looks into it I might go have a look myself in a few days.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-10T07:34:54Z\u0022 title=\u002201/10/2016 07:34  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 10, 2016\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-01-10T08:56:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222355322\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452411278\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI did a little bit of testing on my own and I think the trim feature is bugged.\u00A0 I made an issue about it here:\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/1362\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/1362\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not normally the one who touches the steering code so I\u0027m leaving it for someone else to pick up and notice it, but if nobody looks into it I might go have a look myself in a few days.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo problem, take your time, I just started to use kOS, so I\u0027m not familiar with things in kOS, what is normal and what not.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2016-01-10T17:07:52Z","Content":"\n\u003Cp\u003E\nIs there a way to get the latest builds from your build automation? So far I only found the official releases on Github.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-10T21:33:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222355814\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452445672\u0022 data-ipsquote-userid=\u002285299\u0022 data-ipsquote-username=\u0022pellinor\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, pellinor said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs there a way to get the latest builds from your build automation? So far I only found the official releases on Github.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWe don\u0027t publish automated builds. \u00A0We have them, but for developer use only because they often break working features. \u00A0It\u0027s a good idea but it doesn\u0027t exist right now. \u00A0at the moment the only way is to actually have a development environment yourself and build from source.\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-01-10T22:35:06Z","Content":"\n\u003Cp\u003E\nDon\u0027t know if anyone reported, but I found another small bug. I have turned off power on kOS CPU part, to save electricity until I need it. Bringed craft on journey to Mun and while I need to wait for node execution time, I went back to space center.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter switching back to craft, power on kOS CPU is enabled while I left craft with power off. Checked again with quicksave / quickload game, again disabled power become enabled after loading game. It will be also nice to have indicator of power state of CPU. Currently we only have toggle button without actual knowlage is it turned On or Off. You always need to extra check terminal to see actual power state.\n\u003C/p\u003E\n"},{"CreatedByName":"Vegemeister","CreatedById":135079,"CreatedDateTime":"2016-01-14T11:59:02Z","Content":"\n\u003Cp\u003E\nI\u0027m encountering a problem with the cooked steering, where it fails to control the roll, and even sets my rocket spinning wildly along its long axis.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Ca href=\u0022http://kerbalx.com/Vegemeister/Up-Goer-2\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s\u003C/a\u003E a rocket that has the problem, and my super-basic ascent script that seems to reliably cause it:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nset steeringmanager:showfacingvectors to true.\n\nstage.\nlock throttle to 1.\nlock steering to heading(90,85).\nwait until ship:velocity:surface:mag \u0026gt; 100.\nlock steering to srfprograde.\nwait until apoapsis \u0026gt; 75000.\nlock throttle to 0.\nwait until altitude \u0026gt; 55000.\nlock steering to heading(90,0).\nwait until eta:apoapsis \u0026lt; 13.\nlock throttle to 1.\nwait until periapsis \u0026gt; 70000.\nlock throttle to 0.\nset ship:control:pilotmainthrottle to 0.\n\u003C/pre\u003E\n\u003Cp\u003E\nAt the beginning of the ascent, the rocket yaws over to 5\u00B0 off vertical as it should, but never rolls to point the roof at the sky.\u00A0 Shortly before MECO 1, kOS applies a large roll input and sets the rocket spinning.\u00A0 When it aligns for the circularization burn at 55km, it seems to try to damp away the spinning, but then it starts oscillating. Once it\u0027s in orbit, I can lock steering anywhere I like in the terminal and it \u003Cem\u003Enever stops spinning\u003C/em\u003E.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-14T12:01:39Z\u0022 title=\u002201/14/2016 12:01  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 14, 2016\u003C/time\u003E by Vegemeister\u003C/strong\u003E\n\u003Cbr\u003Egrammar\n\u003C/span\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-01-14T16:18:21Z","Content":"\n\u003Cp\u003E\nHave you tried to lock roll ?\n\u003C/p\u003E\n\u003Cp\u003E\nIt seems to me that your rocket start to spin due to outside atmosphear forces. It never stops spining because it is not dealed at all trough script, only pitch and heading and that works as it should.\n\u003C/p\u003E\n"},{"CreatedByName":"Vegemeister","CreatedById":135079,"CreatedDateTime":"2016-01-14T18:20:13Z","Content":"\n\u003Cp\u003E\nHeading() returns a rotation, which specifies roll.\u00A0 I did consider that possibility, though, and tried using \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Elookdirup(heading(90,85):vector, up:vector)\u003C/span\u003E instead, in order to make absolutely sure that roll was specified.\u00A0 That didn\u0027t fix it.\u00A0 AFAIK, \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Elock steering\u003C/span\u003E should always produce a fixed roll orientation even if it is not specified, such as by giving it a vector instead of a rotation.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIn previous versions, I had to use \u003Cspan style=\u0022font-family:\u0027courier new\u0027, courier, monospace;\u0022\u003Elookdirup(some_vector, ship:facing:topvector)\u003C/span\u003E to explicitly steer with no regard for roll.\u00A0 That prevented the \u0022steering through some large sweeping arc to make a roll correction\u0022 problem.\u00A0 \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/commands/flight/cooked.html#corrects-2-axes-first-then-the-3rd\u0022 rel=\u0022external nofollow\u0022\u003EThe documentation says\u003C/a\u003E the new steering system corrects pitch/yaw first to avoid the same issue.\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-01-14T20:38:25Z","Content":"\n\u003Cp\u003E\nThat might be a bug then. If I understand you properly, heading properly directs rocket, roll is stable at first. But at some point craft start to rotate and it never become stable again.\u003Cbr\u003E\nIt seems to me that kOS stabilize roll only first time after heading in right direction, but it never correct again when some other outside forces kicks in.\n\u003C/p\u003E\n\u003Cp\u003E\nIssue might be in kOS, but also might be that PID controler is not properly set to react fast enough for disturbance when comes to roll. Might be due to craft design too. If you get too much aerodynamic forces in some of stages, you might try to lower throttle when craft is in problematic area (going too fast on too low altitude). Most likely problematic area is below 10km with speeds above 350 m/s.\n\u003C/p\u003E\n\u003Cp\u003E\nYou might try to lock throttle only to 0.7 or less on first stage to avoid roll disturbance, so kOS PID controler not become \u0022confused\u0022 on later stages.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you can\u0027t get it work with that, you might want to try to use raw controls instead of cooked controls. Slightly more complicated, but more rewarding too on problematic craft designs.\n\u003C/p\u003E\n"},{"CreatedByName":"Vegemeister","CreatedById":135079,"CreatedDateTime":"2016-01-15T00:39:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222362066\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452803905\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat might be a bug then. If I understand you properly, heading properly directs rocket, roll is stable at first. But at some point craft start to rotate and it never become stable again.\u003Cbr\u003E\nIt seems to me that kOS stabilize roll only first time after heading in right direction, but it never correct again when some other outside forces kicks in.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo. The nose is pointed in the right direction, but the steering is never correct.\u00A0 Although there is no spinning when the script starts, it never rolls the rocket into a roof-up attitude.\u00A0 It remains in a roof-east attitude until the spinning starts.\u00A0 With my test script, you can see this by the fact that the vector triplets don\u0027t align.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIssue might be in kOS, but also might be that PID controler is not properly set to react fast enough for disturbance when comes to roll.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0As I said, the issue occurs even when typing steering commands into the terminal once the vessel is in orbit. Disturbances are not the problem.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMight be due to craft design too. If you get too much aerodynamic forces in some of stages, you might try to lower throttle when craft is in problematic area (going too fast on too low altitude). Most likely problematic area is below 10km with speeds above 350 m/s.\n\u003C/p\u003E\n\u003Cp\u003E\nYou might try to lock throttle only to 0.7 or less on first stage to avoid roll disturbance, so kOS PID controler not become \u0022confused\u0022 on later stages.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDid you load up the .craft file and try it for yourself?\u00A0 It is a fully symmetrical, single-stage, single-stack rocket.\u00A0 The only thing remotely interesting about it is that it\u0027s roll moment of inertia is considerably less than in pitch or yaw, but that would be true of any rocket that is shaped like rockets are shaped.\u00A0 (Could that be the cause? Is the steering code\u0027s self-tuning assuming each part is a point mass?\u00A0 If so, the only thing radially attached is 3 solar panels.)\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you can\u0027t get it work with that, you might want to try to use raw controls instead of cooked controls. Slightly more complicated, but more rewarding too on problematic craft designs.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI could do that, but it would need tuning for every vessel and would impose a hard real-time requirement on the rest of the script. I\u0027ve done it before, and I found that smooth and robust behavior required running the control cycle in every physics tick.\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2016-01-15T15:49:54Z","Content":"\n\u003Cp\u003E\nSorry, didn\u0027t have time to load your craft and try. I was having similar issues as yours, but my crafts were in atmosphere and I use FAR, so stock kOS controls were not suitable to my crafts.\u003Cbr\u003E\nMost of problems I encontered were due to things I described, disturbances due to atmosphear forces, I didn\u0027t catched the fact that your craft spins in orbit not in atmosphere.\n\u003C/p\u003E\n\u003Cp\u003E\nI hoped that some of those tricks might help you, but it seems that you have to wait for answer from someone that is more experienced with kOS.\n\u003C/p\u003E\n"},{"CreatedByName":"ColKlonk","CreatedById":137078,"CreatedDateTime":"2016-01-15T20:43:33Z","Content":"\n\u003Cp\u003E\nWould it be possible to get a breakdown of kRISC(\u0027assembler\u0027) instructions per \u0027script\u0027 instruction.\n\u003C/p\u003E\n\u003Cp\u003E\nI would like to determine how many instructions I can insert into a \u0027Tick\u0027 on average.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-16T01:47:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222362447\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452818363\u0022 data-ipsquote-userid=\u0022135079\u0022 data-ipsquote-username=\u0022Vegemeister\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/15/2016 at 6:39 PM, Vegemeister said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAlthough there is no spinning when the script starts, it never rolls the rocket into a roof-up attitude.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCan you specify the exact kOS version?\u00A0 Because this used to be a bug and then got fixed.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, if you leave the scene (i.e. go to space center), and then go back to the vessel (click in it in tracking center), does it do it again, or does it stay stable?\u00A0 I ask because there can be bugs related to the system not realizing which vessel ID is the right one, so it polls information from the wrong craft, confusing the steering, and that sort of bug tends to reset when you force the game to reload the vessel into memory from the file.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-16T01:52:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222363612\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452890613\u0022 data-ipsquote-userid=\u0022137078\u0022 data-ipsquote-username=\u0022ColKlonk\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, ColKlonk said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWould it be possible to get a breakdown of kRISC(\u0027assembler\u0027) instructions per \u0027script\u0027 instruction.\n\u003C/p\u003E\n\u003Cp\u003E\nI would like to determine how many instructions I can insert into a \u0027Tick\u0027 on average.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe difficulty with that is that it changes from version to version.\u00A0 Once such information is published, it starts to look like a promise and that ties our hands.\u00A0 The actual means of doing it is in the C# code in a file called src/kOS.Safe/Compilation/KS/Compiler.cs - but it will be really messy to follow.\u00A0 Basically looking at all the places where it says \u0022AddOpcode(.....)\u0022 will show you the opcodes it builds.\n\u003C/p\u003E\n\u003Cp\u003E\nIt might be a lot quicker to try this special trick:\u00A0 Compile the DLL from sources on github, so you can get the developer version.\u00A0 The developer version has a flag enabled that causes it to dump the FULL program to the output log whenever there\u0027s a runtime exception.\u00A0 Add a line near the top of your program that does something like SET X TO 1/0, to force a runtime divide by zero error.\u00A0 When you run it it will dump the whole program (as a list of krisc opcodes) to the log.\n\u003C/p\u003E\n"},{"CreatedByName":"Redneck","CreatedById":2030,"CreatedDateTime":"2016-01-16T04:47:58Z","Content":"\n\u003Cp\u003E\nCan you guys help me with this or run it and tell me if it works or not so I dont think I am crazy? Can you guys help me get this to work? I cant get a response from the creator or in IRC chat.\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/98801-wip-kospropmonitor-iva-kos-monitor-for-rpm/\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/98801-wip-kospropmonitor-iva-kos-monitor-for-rpm/\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-01-16T09:45:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222364220\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452919678\u0022 data-ipsquote-userid=\u00222030\u0022 data-ipsquote-username=\u0022Redneck\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Redneck said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan you guys help me with this or run it and tell me if it works or not so I dont think I am crazy? Can you guys help me get this to work? I cant get a response from the creator or in IRC chat.\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/98801-wip-kospropmonitor-iva-kos-monitor-for-rpm/\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/98801-wip-kospropmonitor-iva-kos-monitor-for-rpm/\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWe\u0027re pretty much stalled on any user interface work until KSP 1.1 comes out.\u00A0 The news about how the old GUI system is being deprecated in Unity 5 and while it would still work there\u0027s no guarantee how much longer it will continue to work for, made us kOS devs decided to put a development freeze on any UI related issues in kOS until we\u0027re on Unity5.\u00A0 We\u0027re going to want to redesign the whole UI anyway so there\u0027s no point in putting any work into the current system just to then throw that work away.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}