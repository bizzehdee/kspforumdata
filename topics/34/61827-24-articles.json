{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":24,"Articles":[{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-04-21T16:48:33Z","Content":"\n\u003Cp\u003EIt\u0027s what I would expect. \u0022wait until \u0026lt;variable\u0026gt;\u0022 makes no logical sense to me. Afterall, whatever the variable is, that\u0027s what the condition is, so I would expect that script above to not wait at all.\u003C/p\u003E\u003Cp\u003EIs that just a shorthand for \u0022wait until (\u0026lt;variable\u0026gt; == true)\u0022? \u003C/p\u003E\u003Cp\u003Eis \u0022(\u0026lt;variable\u0026gt; == true)\u0022 the truth statement whose place it taken by the boolean variable \u0026lt;done\u0026gt;?\u003C/p\u003E\u003Cp\u003Eso if \u0022(\u0026lt;false\u0026gt; == true)\u0022 is false then it waits?\u003C/p\u003E\u003Cp\u003Ebut \u0022(\u0026lt;true\u0026gt; == true)\u0022 is true so it continues?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-21T16:50:41Z\u0022 title=\u002204/21/2014 04:50  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 21, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-21T17:56:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EIs that just a shorthand for \u0022wait until (\u0026lt;variable\u0026gt; == true)\u0022? \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAlmost. Technically it\u0027s shorthand for \u0022\u0026lt;variable\u0026gt; is not false \u0022 which you might think is the same thing as \u0022\u0026lt;variable\u0026gt; is true\u0022 but it\u0027s *slightly* different. I won\u0027t go into why it\u0027s slightly different here.)\u003C/p\u003E\u003Cp\u003EThis may look weird to you but it\u0027s actually *very* common in programming languages to allow you to store a boolean check result in a variable and then use that variable later in place of performing the check again.\u003C/p\u003E\u003Cp\u003EHmm.. How to explain....\u003C/p\u003E\u003Cp\u003EWhen you do this:\u003C/p\u003E\u003Cp\u003Eset x to y \u002B z.\u003C/p\u003E\u003Cp\u003EThe computer runs a math operation, \u0022\u002B\u0022, which is defined to take the following 3 terms:\u003C/p\u003E\u003Cp\u003E itself,\u003C/p\u003E\u003Cp\u003E the value to the left of itself,\u003C/p\u003E\u003Cp\u003E the value to the right of itself,\u003C/p\u003E\u003Cp\u003Eand replace all three with a single value:\u003C/p\u003E\u003Cp\u003E the sum of what had been the left value and what had been the right value.\u003C/p\u003E\u003Cp\u003ESimilarly, when you do this:\u003C/p\u003E\u003Cp\u003Eset x to y \u0026lt; z.\u003C/p\u003E\u003Cp\u003EThe computer is doing basically the same thing, but now the math operation is the \u0027\u0026lt;\u0027, defined to do this:\u003C/p\u003E\u003Cp\u003Etake the following 3 terms:\u003C/p\u003E\u003Cp\u003E itself,\u003C/p\u003E\u003Cp\u003E the value to the left of itself,\u003C/p\u003E\u003Cp\u003E the value to the right of itself,\u003C/p\u003E\u003Cp\u003Eand replace all three with a single value:\u003C/p\u003E\u003Cp\u003E if the left value was smaller than the right, then the value to replace them with is 1 (true).\u003C/p\u003E\u003Cp\u003E otherwise the value to replace them with is 0 (false).\u003C/p\u003E\u003Cp\u003EIn boolean algebra, operators like \u0022\u0026lt;\u0022, \u0022\u0026gt;\u0022, and so on are just another sort of math operator that consumes operand values and spits out a new value based on some rule. They have orders of operations, rules of precedence, and so on just like any other sort of math.\u003C/p\u003E\u003Cp\u003EAs far as the computer \u0022thinks\u0022, this expression:\u003C/p\u003E\u003Cp\u003E3*x \u002B 4*y\u003C/p\u003E\u003Cp\u003Eisn\u0027t really all that different from this expression:\u003C/p\u003E\u003Cp\u003E2*x \u0026lt; 4*y\u003C/p\u003E\u003Cp\u003ESo, yes you can store the result of a test like \u0022is a \u0026lt; b?\u0022 in a variable.\u003C/p\u003E\u003Cp\u003EWhen you say something like this:\u003C/p\u003E\u003Cp\u003Eif _stuff_ { .... }.\u003C/p\u003E\u003Cp\u003EThe _stuff_ part of it is just another expression like any other math expression. If the expression results in a value that means boolean \u0022true\u0022, then it does the stuff in the brackets, regardless of whether that expression is written out right here or whether it was already run earlier and the result put into a variable and just that variable is mentioned here.\u003C/p\u003E\u003Cp\u003EThis:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eset var to 4*x \u0026lt; 3*y.\u003Cbr\u003Eif var { ... }.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EGives the same result as this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eif 4*x \u0026lt; 3*y { ... }.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFor the exact same reason that this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eset var to 4*x \u002B 3*y.\u003Cbr\u003Eprint \u0022value is \u0022 \u002B var.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EGives the same result as this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eprint \u0022value is \u0022 \u002B (4*x \u002B 3*y).\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThey\u0027re both doing the same thing. Storing the result of an expression in a variable. The result of an expression could be a boolean true/false value, because in a sense those are just a special type of number - a number that\u0027s only allowed to have 2 values: 0 or 1.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-21T21:01:34Z\u0022 title=\u002204/21/2014 09:01  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 21, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-04-21T21:32:54Z","Content":"\n\u003Cp\u003EThanks for expanding your answer Steven \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I get it.\u003C/p\u003E\n"},{"CreatedByName":"aelred717","CreatedById":109268,"CreatedDateTime":"2014-04-21T21:54:20Z","Content":"\n\u003Cp\u003ELoving playing with this mod - it\u0027s resulted in me learning more about orbital mechanics than the rest of KSP combined!\u003C/p\u003E\u003Cp\u003EI wonder if anyone can help me figure out how to do something that should be really easy: getting the current orbital velocity vector of a body. thebody:velocity doesn\u0027t give me the right answer (based on the numbers in the KSP wiki). If I subtract the parent body\u0027s velocity I get the correct answer, but I can\u0027t do this for heliocentric orbits because the Sun doesn\u0027t have a velocity vector, which seems like a bug.\u003C/p\u003E\u003Cp\u003EHas anyone got a solution for this?\u003C/p\u003E\n"},{"CreatedByName":"Voidi","CreatedById":86071,"CreatedDateTime":"2014-04-22T00:17:08Z","Content":"\n\u003Cp\u003EIs there a way to react to custom keystrokes?\u003C/p\u003E\u003Cp\u003EFor example: a program that implement some sort of autopilot that should accept commands.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-22T01:01:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Voidi\u0022 data-cite=\u0022Voidi\u0022\u003E\u003Cdiv\u003EIs there a way to react to custom keystrokes?\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo. I\u0027d like there to be. Maybe it can be an upcoming feature. At the moment all you can do is react to action groups 0-9 (basically the user hitting ALT-0 through ALT-9 can be used as triggers to things in your kos script code because your code can react to the triggered action group, but that\u0027s got the big problem that people might be using those action groups for important parts of their rocket design.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-22T01:06:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aelred717\u0022 data-cite=\u0022aelred717\u0022\u003E\u003Cdiv\u003ELoving playing with this mod - it\u0027s resulted in me learning more about orbital mechanics than the rest of KSP combined!\u003Cp\u003EI wonder if anyone can help me figure out how to do something that should be really easy: getting the current orbital velocity vector of a body. thebody:velocity doesn\u0027t give me the right answer (based on the numbers in the KSP wiki). If I subtract the parent body\u0027s velocity I get the correct answer, but I can\u0027t do this for heliocentric orbits because the Sun doesn\u0027t have a velocity vector, which seems like a bug.\u003C/p\u003E\u003Cp\u003EHas anyone got a solution for this?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAll velocities are given relative to the current body you\u0027re orbiting. That\u0027s why body:velocity always returns V(0,0,0). \u003C/p\u003E\u003Cp\u003EBut POSITIONS on the other hand, are given relative to your ship, which is a bit of a confusing contradiction.\u003C/p\u003E\n"},{"CreatedByName":"OxalysResourceConsortium","CreatedById":106988,"CreatedDateTime":"2014-04-22T16:01:38Z","Content":"\n\u003Cp\u003EHaving trouble with this little bit of code meant to control throttle on the stock Kerbal X to keep it from going faster than terminal velocity.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//1000-2800m Terminal vel. of 125 m/s\u003Cbr\u003E\u003Cbr\u003EPRINT \u00222800m ascent/125 m/s MAX.\u0022.\u003Cbr\u003EUNTIL ALTITUDE \u0026gt; 2800\u003Cbr\u003E{\u003Cbr\u003E\tIF VERTICALSPEED \u0026lt; 124\u003Cbr\u003E {\u003Cbr\u003E  SET Tlvl TO Tlvl\u002B0.02.\u003Cbr\u003E  WAIT 0.2.\u003Cbr\u003E }.\u003Cbr\u003E IF VERTICALSPEED \u0026gt; 125\u003Cbr\u003E {\u003Cbr\u003E  SET Tlvl TO Tlvl-0.01.\u003Cbr\u003E  WAIT 0.2.\u003Cbr\u003E }.\u003Cbr\u003E}.\u003Cbr\u003Eprint \u0022next.\u0022.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe vertical speed goes well beyond 130 m/s and the throttle doesn\u0027t respond at all. When I comment out the first part that is meant to keep the craft from going too slow by slowly throttling up the craft the second part that throttles down the craft works just fine. Here is what that code looks like.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//1000-2800m Terminal vel. of 125 m/s\u003Cbr\u003E\u003Cbr\u003EPRINT \u00222800m ascent/125 m/s MAX.\u0022.\u003Cbr\u003EUNTIL ALTITUDE \u0026gt; 2800\u003Cbr\u003E{\u003Cbr\u003E//\tIF VERTICALSPEED \u0026lt; 124\u003Cbr\u003E// {\u003Cbr\u003E//  SET Tlvl TO Tlvl\u002B0.02.\u003Cbr\u003E//  WAIT 0.2.\u003Cbr\u003E// }.\u003Cbr\u003E IF VERTICALSPEED \u0026gt; 125\u003Cbr\u003E {\u003Cbr\u003E  SET Tlvl TO Tlvl-0.01.\u003Cbr\u003E  WAIT 0.2.\u003Cbr\u003E }.\u003Cbr\u003E}.\u003Cbr\u003Eprint \u0022next.\u0022.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo what am I not getting here. \u003Ca href=\u0022http://pastebin.com/Y6jXbinU\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s the entire code\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-04-22T17:21:07Z","Content":"\n\u003Cp\u003EWhen you reach that part of the code the Tlvl variable is set to 1 and the vertical speed is less than 124m/s (because you limited it to 110m/s before) but the script keeps incrementing the variable even if the throttle is already at maximum. So when the speed is finally over 125m/s and the script try to decrease the throttle the variable is going to have a value bigger than 1 making it seem like it\u0027s not doing anything.\u003C/p\u003E\u003Cp\u003EYou should add boundary checks to all the speed validations, something like \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EIF VERTICALSPEED \u0026lt; 124 AND Tlvl \u0026lt; 1\u003Cbr\u003E{\u003Cbr\u003E...\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EIF VERTICALSPEED \u0026gt; 125 AND Tlvl \u0026gt; 0\u003Cbr\u003E{\u003Cbr\u003E...\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAlso you could move the wait out of the IFs, there\u0027s no point in asking if the speed has gone over a threshold 50 times per second.\u003C/p\u003E\n"},{"CreatedByName":"OxalysResourceConsortium","CreatedById":106988,"CreatedDateTime":"2014-04-22T18:39:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022marianoapp\u0022 data-cite=\u0022marianoapp\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAlso you could move the wait out of the IFs, there\u0027s no point in asking if the speed has gone over a threshold 50 times per second.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe reason I put the WAITs inside the IFs is that without them, during testing (before I put the part that would throttle the craft up if it was going to slow) the throttle would be decreased too fast and the craft would slow down way too much. \u003C/p\u003E\u003Cp\u003EThis way the throttle would be taken down a notch and then the script would wait a half second (originally tested it with \u0027WAIT 0.5.\u0027, but it was too slow so I changed it to \u0027WAIT 0.2.\u0027, and it worked pretty well) to let the vertical velocity change before checking it again and throttling down if necessary. Given your suggestions though it would probably be a better idea to nest the UNTIL\u0027s inside the IF\u0027s like so...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EIF VERTICALSPEED \u0026gt; 125 AND Tlvl \u0026gt; 0\u003Cbr\u003E{\u003Cbr\u003E UNTIL VERTICALSPEED \u0026lt;= 125\u003Cbr\u003E {\u003Cbr\u003E  SET Tlvl TO Tlvl-0.02.\u003Cbr\u003E  WAIT 0.2.\u003Cbr\u003E }.\u003Cbr\u003E}.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m not sure if the equals to or less than operator is recognized in KerboScript so if it isn\u0027t then I guess\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EUNTIL VERTICALSPEED \u0026lt;= 125\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewould have to be replaced with\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EUNTIL VERTICALSPEED = 125 OR VERTICALSPEED \u0026lt; 125\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"OxalysResourceConsortium","CreatedById":106988,"CreatedDateTime":"2014-04-23T01:45:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022odricar\u0022 data-cite=\u0022odricar\u0022\u003E\u003Cdiv\u003EDoes anyone have an User-Defined language file for notepad\u002B\u002B?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETHIS!! I\u0027ve been looking everywhere for this or at least instructions on how to make one myself as it would save a lot of time and make things easier. There already exists a kOS IDE but that\u0027s only for Windows.\u003C/p\u003E\u003Cp\u003EAnd by creating this we wouldn\u0027t need to have and entire dev effort to create a text editor just for this one language when there already exists a perfectly well-functioning OPEN-SOURCE platform we can use and easily keep up-to-date with the latest version of kOS. \u003C/p\u003E\u003Cp\u003EI would do it myself but I\u0027m nowhere near familiar enough with KerboScript to take on this project. The user-defined language file could even be included with the download for the mod.\u003C/p\u003E\n"},{"CreatedByName":"Rosco P. Coltrane","CreatedById":61065,"CreatedDateTime":"2014-04-23T01:54:10Z","Content":"\n\u003Cp\u003EFor Linux/Win there is Saturn (no Mac as of now \u0027cos I don\u0027t have a Mac to compile it): \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/62834-Saturn-yet-another-kOS-IDE\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/62834-Saturn-yet-another-kOS-IDE\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI haven\u0027t got the time to properly maintain it (it\u0027s up to date with v0.11.1), but once I can get up to speed again it will include stuff that you won\u0027t find in Notepad\u002B\u002B, if I can say so myself. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"OxalysResourceConsortium","CreatedById":106988,"CreatedDateTime":"2014-04-23T02:10:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rosco P. Coltrane\u0022 data-cite=\u0022Rosco P. Coltrane\u0022\u003E\u003Cdiv\u003EFor Linux/Win there is Saturn ...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks a Kerb-load bro, I was just about to start reading the documentation in notepad\u002B\u002B on how to define a language. Got as far as the comments which are easy enough.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-23T04:59:47Z","Content":"\n\u003Cp\u003EIf you use VIM, this is the syntax def file I use for it:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://drive.google.com/folderview?id=0Bxkeai7oN35fV2xCa0Y1RThSYkU\u0026amp;usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/folderview?id=0Bxkeai7oN35fV2xCa0Y1RThSYkU\u0026amp;usp=sharing\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBut I haven\u0027t updated it since 0.9. I need to go back to add all the new built-in variables and suffixes so they highlight properly.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-04-23T13:31:01Z","Content":"\n\u003Cp\u003EIs kOS based on or similar to anything IRL?\u003C/p\u003E\n"},{"CreatedByName":"S.O.P.H.I.A.","CreatedById":99941,"CreatedDateTime":"2014-04-23T17:00:43Z","Content":"\n\u003Cp\u003EIs there any function or variable that will tell you the current throttle setting? The THROTTLE variable only has an output if you LOCK\u0027d THROTTLE to something (ie, if you set it yourself).\u003C/p\u003E\n"},{"CreatedByName":"aelred717","CreatedById":109268,"CreatedDateTime":"2014-04-23T18:03:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EAll velocities are given relative to the current body you\u0027re orbiting. That\u0027s why body:velocity always returns V(0,0,0). \u003Cp\u003EBut POSITIONS on the other hand, are given relative to your ship, which is a bit of a confusing contradiction.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s what I suspected was the case. Does that mean there\u0027s no way to get the orbital velocity of a body then?\u003C/p\u003E\u003Cp\u003EAs an example: If I have a ship orbiting Kerbin and I want Duna\u0027s current orbital velocity, it would be DUNA:VELOCITY - SUN:VELOCITY. This works because both are relative to Kerbin\u0027s velocity. However, because SUN has no velocity parameter, I need a different method...\u003C/p\u003E\u003Cp\u003EThe only approach I can come up with, would be to abuse the fact that Kerbin\u0027s orbital speed is constant. Using Kerbin\u0027s position and orbital speed I can get an orbital velocity vector relative to the Sun, which (assuming the ship is orbiting Kerbin) can be inversed to give the Sun\u0027s velocity relative to Kerbin, which can then\u003Cem\u003E finally \u003C/em\u003Egive Duna\u0027s real orbital velocity.\u003C/p\u003E\u003Cp\u003EThis is completely mad for what should be such as a simple problem. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2014-04-23T20:34:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EIs kOS based on or similar to anything IRL?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs far as I remember it was originally based off the old/clunky \u0022Basic\u0022, think C64. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-23T21:42:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sma\u0022 data-cite=\u0022Sma\u0022\u003E\u003Cdiv\u003EAs far as I remember it was originally based off the old/clunky \u0022Basic\u0022, think C64. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt looks nothing like Basic.\u003C/p\u003E\u003Cp\u003EThe terminal does, however, look like a bit like a C64, specifically the font. But I\u0027d prefer it if it *really* looked like a C64. That would be great for nostalgia: 40 columns, 24 rows, cyan color on blue background.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-23T21:47:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aelred717\u0022 data-cite=\u0022aelred717\u0022\u003E\u003Cdiv\u003EThat\u0027s what I suspected was the case. Does that mean there\u0027s no way to get the orbital velocity of a body then?\u003Cp\u003EAs an example: If I have a ship orbiting Kerbin and I want Duna\u0027s current orbital velocity, it would be DUNA:VELOCITY - SUN:VELOCITY. This works because both are relative to Kerbin\u0027s velocity. However, because SUN has no velocity parameter, I need a different method...\u003C/p\u003E\u003Cp\u003EThe only approach I can come up with, would be to abuse the fact that Kerbin\u0027s orbital speed is constant. Using Kerbin\u0027s position and orbital speed I can get an orbital velocity vector relative to the Sun, which (assuming the ship is orbiting Kerbin) can be inversed to give the Sun\u0027s velocity relative to Kerbin, which can then\u003Cem\u003E finally \u003C/em\u003Egive Duna\u0027s real orbital velocity.\u003C/p\u003E\u003Cp\u003EThis is completely mad for what should be such as a simple problem. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat does Ship:Body:Body:Velocity return? That would be, I\u0027d assume, the velocity of your SOI body\u0027s parent relative to your SOI body. (i.e. if Ship is in orbit around Kerbin, it\u0027s the velocity of Sun relative to Kerbin.)\u003C/p\u003E\u003Cp\u003ESo Ship:Body:Body:Velocity would be the inverse of the velocity you want - just multiply it by the scalar -1.\u003C/p\u003E\u003Cp\u003EIf that works (I haven\u0027t tried it) then I have no problem with the system as it would at least be using a consistent frame of reference.\u003C/p\u003E\u003Cp\u003EOn the other hand, if BOTH Kerbin\u0027s velocity AND the Sun\u0027s velocity are both reported as V(0,0,0) *at the same time from the same position* then I\u0027d consider that a bug, as it means the frame of reference isn\u0027t remaining consistent for all measures returned.\u003C/p\u003E\n"},{"CreatedByName":"OxalysResourceConsortium","CreatedById":106988,"CreatedDateTime":"2014-04-24T03:13:28Z","Content":"\n\u003Cp\u003EIs there a way to run the following part of a script I\u0027m working on\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EUNTIL ALTITUDE \u0026gt; AltRng{\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//Diagnostic PRINT statements begin\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E SET DelTlv TO \u0022at rest.\u0022.\u003Cbr\u003E PRINT DelTlv AT (16,1). PRINT AltRng AT (0,0).\u003Cbr\u003E PRINT TrmVel AT (14,0).\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//End of diagnostic PRINT statements\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E    IF VERTICALSPEED \u0026gt; TrmVel AND Tlv \u0026gt; 0\u003Cbr\u003E {\u003Cbr\u003E  UNTIL VERTICALSPEED = TrmVel OR VERTICALSPEED \u0026lt; TrmVel\u003Cbr\u003E  {\u003Cbr\u003E   SET Tlv TO Tlv-0.01.\u003Cbr\u003E   WAIT 0.2.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//Diagnostic PRINT statements begin\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E   SET DelTlv TO \u0022decreasing.\u0022. PRINT DelTlv AT (16,1).\u003Cbr\u003E   PRINT Tlv AT (5,2).\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//End of diagnostic PRINT statements\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E  }.\u003Cbr\u003E }.\u003Cbr\u003E IF VERTICALSPEED \u0026lt; TrmVel AND Tlv \u0026lt; 1\u003Cbr\u003E {\u003Cbr\u003E  UNTIL VERTICALSPEED = TrmVel OR VERTICALSPEED \u0026gt; TrmVel-5\u003Cbr\u003E  {\u003Cbr\u003E   SET Tlv TO Tlv\u002B0.01.\u003Cbr\u003E   WAIT 0.2.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//Diagnostic PRINT statements begin\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E   SET DelTlv TO \u0022increasing.\u0022. PRINT DelTlv AT (16,1).\u003Cbr\u003E   PRINT Tlv AT (5,2).\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//End of diagnostic PRINT statements\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E  }.\u003Cbr\u003E }.\u003Cbr\u003E}.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Emultiple times with different values for the AltRng, TrmVel and Tlv variables each time without having to repeat the code multiple times in the same script. I\u0027ve tried running it as a separate program called TrmVel-Tlv-Control-Uns (Uns = unstripped code) and then declare the three variables as parameters like so...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EDECLARE PARAMATER AltRng, TrmVel, Tlv.\u003Cbr\u003E\u003Cbr\u003EUNTIL ALTITUDE \u0026gt; AltRng\u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//Diagnostic PRINT statements begin\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E SET DelTlv TO \u0022at rest.\u0022.\u003Cbr\u003E PRINT DelTlv AT (16,1). PRINT AltRng AT (0,0).\u003Cbr\u003E PRINT TrmVel AT (14,0).\u003Cbr\u003E\u003Cbr\u003E.......(code continues)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ethat way each time I need to run that code instead of copypasting it onto my script which would make it inelegant and really long (take up way too much space) I could just insert this code into the main script.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET AltRng TO [new value].\u003Cbr\u003ESET TrmVel TO [new value].\u003Cbr\u003E\u003Cbr\u003ERUN TrmVel-Tlv-Control-Uns(AltRng, TrmVel, Tlv).\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EUnfortunately this doesn\u0027t seem to work and it just seems to skip to the end of my main script (made visible by the quickly flashing diagnostic PRINT statements.\u003C/p\u003E\u003Cp\u003EThe last part of my code locks the throttle (Tlv) to 100% and has a PRINT statement so that I know it has reached near the end of my main script\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//temporary code placeholder.\u003Cbr\u003E\u003Cbr\u003ECLEARSCREEN.\u003Cbr\u003EPRINT \u0022Throttling up to 100%\u0022.\u003Cbr\u003ELOCK Tlv TO 1.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//end placeholder\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//This is just to keep the program running for\u003Cbr\u003E//testing purposes.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EWAIT UNTIL SHIP:LIQUIDFUEL = 0 AND \u003Cbr\u003ESHIP:OXIDIZER = 0.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAgain I appreciate everyone\u0027s massive amount of patience for a complete noob:P. All the help and support is appreciated. I\u0027ve got a long way to hopefully I\u0027ll get my commsat network up sometime this month.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-24T09:57:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022OxalysResourceConsortium\u0022 data-cite=\u0022OxalysResourceConsortium\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAgain I appreciate everyone\u0027s massive amount of patience for a complete noob:P. All the help and support is appreciated. I\u0027ve got a long way to hopefully I\u0027ll get my commsat network up sometime this month.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s hard to diagnose a program with key parts of it not being shown. You\u0027re showing cut and pasted sections and the problem may be outside those sections.\u003C/p\u003E\u003Cp\u003EBut at any rate, I notice you tried to call you program by this name:\u003C/p\u003E\u003Cp\u003ETrmVel-Tlv-Control-Uns\u003C/p\u003E\u003Cp\u003EAnd I don\u0027t think that\u0027s a legal name. A program name must be a valid identifier and the definition of an identifier is this regular expression:\u003C/p\u003E\u003Cp\u003E[a-z_][a-z0-9_]*\u003C/p\u003E\u003Cp\u003EIt doesn\u0027t look like it allows minus-signs in the identifier. Just underscores.\u003C/p\u003E\u003Cp\u003EI have no idea how the parser is managing to read this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ERUN TrmVel-Tlv-Control-Uns(AltRng, TrmVel, Tlv).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand not end up barfing with syntax errors. I imagine it would interpret that as \u0022run something called TrmVel, without any arguments, then subtract the value of Tlv from that, then subtract the value of Control from that, then run a function called Uns, with arguments AltRng, TrmVel, Tlv, and subtract that result.\u0022\u003C/p\u003E\u003Cp\u003EAnd since there\u0027s no such program called TrmVel, no such function called Uns, and subprograms aren\u0027t implemented with return values (yet?) so there shouldn\u0027t be anything to subtract FROM after doing a run.... I have no idea how it\u0027s not complaining like crazy when it sees that line.\u003C/p\u003E\n"},{"CreatedByName":"OxalysResourceConsortium","CreatedById":106988,"CreatedDateTime":"2014-04-25T17:41:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIt\u0027s hard to diagnose a program with key parts of it not being shown. You\u0027re showing cut and pasted sections and the problem may be outside those sections.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHere\u0027s the \u003Ca href=\u0022https://preview.tinyurl.com/m2b3dd2\u0022 rel=\u0022external nofollow\u0022\u003Efull code\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EHere\u0027s a video demonstrating my problem:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/_pJcHdZuwkA?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-25T23:34:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022OxalysResourceConsortium\u0022 data-cite=\u0022OxalysResourceConsortium\u0022\u003E\u003Cdiv\u003EHere\u0027s the \u003Ca href=\u0022https://preview.tinyurl.com/m2b3dd2\u0022 rel=\u0022external nofollow\u0022\u003Efull code\u003C/a\u003E.\u003Cp\u003EHere\u0027s a video demonstrating my problem:\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/_pJcHdZuwkA?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay I didn\u0027t have time yet to view the entire video but here\u0027s two things I can see so far that might be problems:\u003C/p\u003E\u003Cp\u003E1 - You\u0027re using an older version of kOS than I am. I\u0027m operating on the prerelease from the development thread. That\u0027s evident from the fact that you can use the EDIT command and it works (in newer versions it was dropped in favor of just editing the code outside KSP in a text editor which is what everyone seems to do anyway). This is also probably why you can use the \u0022-\u0022 character in a filename. The parser changed in more recent versions and no longer will accept a filename that isn\u0027t a valid identifier (it has to follow the same naming rules as a variable name now). Just a heads-up warning - I think you\u0027ll have to change your filenames when the next update gets released.\u003C/p\u003E\u003Cp\u003E2 - You appear to be trying to change a parameter passed in to a subprogram in the hope that doing this will change the value in the parent program. That doesn\u0027t work. You can\u0027t do something like this:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EincrementProg\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Edeclare parameter thingy.\u003Cbr\u003Eset thingy to thingy \u002B 1.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EmainProg\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset val to 1.\u003Cbr\u003Eprint \u0022value before: \u0022 \u002B val.\u003Cbr\u003Erun incrementProg( val ).\u003Cbr\u003Eprint \u0022value after: \u0022 \u002B val.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EYou appear to be trying to write code as if that would print this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evalue before: 1\u003Cbr\u003Evalue after: 2\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhen in fact it would print this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evalue before: 1\u003Cbr\u003Evalue after: 1\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAll variables in kOSscript are global *except for* program parameters. Those are local to the subprogram only, and are passed by value, not by reference (if you know what that means).\u003C/p\u003E\u003Cp\u003EIMO, the ability of kosscript to pass information into and out of subprograms could use an overhaul. Currently there\u0027s no such thing as a return value from a subprogram, and no such thing as passing by reference, so the only way the subprogram can do any mathematical work on behalf of the main program is for it to store the results in global variables that the main program already created before the subprogram was called. Otherwise the main program can\u0027t see the results.\u003C/p\u003E\u003Cp\u003EBut that\u0027s for another time. There\u0027s other bugs to squash first.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-26T01:08:56Z\u0022 title=\u002204/26/2014 01:08  AM\u0022 data-short=\u002210 yr\u0022\u003EApril 26, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"OxalysResourceConsortium","CreatedById":106988,"CreatedDateTime":"2014-04-26T03:38:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EOkay I didn\u0027t have time yet to view the entire video but here\u0027s two things I can see so far that might be problems:\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m going to have to read this post at least 20 times before I understand what parts about it are what I don\u0027t understand. Thanks anyways, I\u0027ll get back to you when I know what it is I want to ask.\u003C/p\u003E\n"}]}