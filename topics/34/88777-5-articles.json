{"TopicId":88777,"ForumId":34,"TopicTitle":"[1.1.3] BackgroundProcessing","CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2014-10-28T18:40:42Z","PageNum":5,"Articles":[{"CreatedByName":"team.leit","CreatedById":68347,"CreatedDateTime":"2015-04-30T11:34:47Z","Content":"\n\u003Cp\u003EAnyone know when or if this mod will be updated for ksp 1.0?\u003C/p\u003E\u003Cp\u003Eteam.leit\u003C/p\u003E\n"},{"CreatedByName":"rockowwc","CreatedById":138930,"CreatedDateTime":"2015-05-14T01:25:13Z","Content":"\n\u003Cp\u003EI have been wondering the same.. I like the idea of what this mod did\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-14T02:37:41Z","Content":"\n\u003Cp\u003EIt might be a while before I get it in fully-working state. There\u0027s two major problems I\u0027m aware of right now:\u003C/p\u003E\u003Cp\u003E- The solar panel revamp has meant that my old code for emulating solar panels in the background is very wrong. New solar panels are quite complicated and hard to emulate (part temperature matters now, and atmosphere alters charge rates as well). It\u0027ll be a while before those are at the same standard.\u003C/p\u003E\u003Cp\u003E- Some of the new parts are implemented using ModuleGenerator with inputs (Fuel cells in particular). Previously, BackgroundProcessing ignored ModuleGenerators with inputs, because 1) there were no such parts in stock KSP, and 2) it wasn\u0027t clear to me how they were supposed to function. Now I\u0027ve got a test case and I can fiddle a bit. That one should be much easier to implement than the solar panels.\u003C/p\u003E\u003Cp\u003EI\u0027ve had a bit of a break from KSP modding as well, so I\u0027ve only started looking into this stuff again recently.\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-16T09:14:30Z","Content":"\n\u003Cp\u003EOkay, I\u0027ve been doing some fiddling.\u003C/p\u003E\u003Cp\u003ESolar panels are much better in the source tree now. They are still not accurate, but they\u0027re nearly as good as they\u0027re likely to get. The big problem is part temperature - accurately emulating that would be extremely difficult. At the moment, I assume part temperatures are perfectly static once a vessel goes into the background. The implication is that if your part is warmer - or colder - than normal when you go into the background (Maybe you\u0027ve just gone through re-entry, for example), then it\u0027ll produce different outputs to what it would have in the foreground. In particular, when something is orbiting presence or absence of direct sunlight would be a factor normally, and it isn\u0027t right now. In the future I might do this better - perhaps a very simple emulation of part temperature that handles the orbital case.\u003C/p\u003E\u003Cp\u003EFuel cells aren\u0027t implemented and aren\u0027t likely to be for the near future. ISRUs as well. The reason is because they use resources that have stage priority, and I don\u0027t want to do the work of accurately emulating stage-priority resources right now. Future work is likely to be either emulating stage priority, or emulating those resources only if you tell the config file that it\u0027s okay to have the weirdness associated with treating staged resources like they\u0027re whole-ship.\u003C/p\u003E\u003Cp\u003EAlso there\u0027s a config file now. Current options include:\u003C/p\u003E\u003Cp\u003E- Whether or not solar panel orientation matters to solar power or not. This switch is present because there\u0027s some indication that vessel orientation during background might not be accurate, and I haven\u0027t tried to fix that yet, so you can turn it off.\u003C/p\u003E\u003Cp\u003E- Whether temperature matters to solar power, for the reasons I gave above re: temperature being hard.\u003C/p\u003E\u003Cp\u003E- Debug log level. Ranges from SILENT, to ERROR, to WARNING, to ALL at present. ERROR by default.\u003C/p\u003E\u003Cp\u003EI haven\u0027t made a release yet, and likely won\u0027t for a little bit (I want to chase up a couple of other things, some stuff probably doesn\u0027t respect enable/disable state properly, although I\u0027ve fixed the flowstate resource tank thing in source). When I do make a release, it won\u0027t be on KAN for a bit because I\u0027ve changed a fair amount of stuff and want to shake out the bugs first.\u003C/p\u003E\n"},{"CreatedByName":"Merill","CreatedById":136069,"CreatedDateTime":"2015-05-17T12:21:11Z","Content":"\n\u003Cp\u003Ehello\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EAlso there\u0027s a config file now. Current options include:\u003Cp\u003E - Whether or not solar panel orientation matters to solar power or not.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGreat!\u003C/p\u003E\u003Cp\u003EOn-rails vessel orientation is very weird (at least in 0.90).\u003C/p\u003E\u003Cp\u003EAnd i love config files. Consider adding some switch to choose what (built-in) module can run in background? enableSolar, enableGenerator, enableCommand, enableFuelCell, enableISRU... It can be convenient (at this time, i modify your source to do that).\u003C/p\u003E\u003Cp\u003EThanks! Glad you continue to support this amazing mod.\u003C/p\u003E\u003Cp\u003Eps: your source is still in google code? Be careful, it won\u0027t work anymore in august.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-17T12:26:25Z\u0022 title=\u002205/17/2015 12:26  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 17, 2015\u003C/time\u003E by Merill\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-18T07:47:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Merill\u0022 data-cite=\u0022Merill\u0022\u003E\u003Cdiv\u003Ehello\u003Cp\u003EGreat!\u003C/p\u003E\u003Cp\u003EOn-rails vessel orientation is very weird (at least in 0.90).\u003C/p\u003E\u003Cp\u003EAnd i love config files. Consider adding some switch to choose what (built-in) module can run in background? enableSolar, enableGenerator, enableCommand, enableFuelCell, enableISRU... It can be convenient (at this time, i modify your source to do that).\u003C/p\u003E\u003Cp\u003EThanks! Glad you continue to support this amazing mod.\u003C/p\u003E\u003Cp\u003Eps: your source is still in google code? Be careful, it won\u0027t work anymore in august.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESure, that\u0027s an easy-enough feature to add.\u003C/p\u003E\u003Cp\u003EI\u0027ve moved the source over to BitBucket. I\u0027ll edit the first post at some point.\u003C/p\u003E\n"},{"CreatedByName":"Voidi","CreatedById":86071,"CreatedDateTime":"2015-05-24T18:08:13Z","Content":"\n\u003Cp\u003EAre there any caveats if i use this with ither mods that do things on non active vessels?\u003C/p\u003E\u003Cp\u003ELike TAC LifeSupport consuming electricity in command pods or JDiminishingRTG (don\u0027t know exactly if the mod produces electricity in background)\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-24T18:31:48Z","Content":"\n\u003Cp\u003EThere can be interactions. Those interactions can be weird. Possibilities include things like resources being generated/consumed twice as fast, or only some resources being generated/consumed twice as fast, as the boring case.\u003C/p\u003E\u003Cp\u003EThe specific mods you\u0027ve just mentioned: my quick scan of TAC Life Support suggests that it doesn\u0027t handle resources in unloaded vessels - only vessels you\u0027re not flying that are still close enough to be loaded. Background Processing only handles resources in vessels that are unloaded. There shouldn\u0027t be any direct problems caused by the overlap because of that, although some life support stuff probably won\u0027t consume in the background. I don\u0027t guarantee that, either - this is based on a cursory glance at the TAC source.\u003C/p\u003E\u003Cp\u003EJDiminishingRTG, the post claims stuff updates on unfocused vessels, but I don\u0027t see where that happens with a cursory glance at the source - it\u0027s possible I\u0027m missing it. Regardless, it uses its own ModuleDiminishingRTG class that my code doesn\u0027t know how to drive, so it\u0027s /probably/ okay, but the parts it replaces will be background-updated by its code, not mine.\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-05-25T21:19:39Z","Content":"\n\u003Cp\u003ESo Guys I\u0027ve throwed this idea on the TACLS, basically its a proposition to make an API engine for background resource management with some \u003Cem\u003Elife support\u003C/em\u003E support on it.\u003C/p\u003E\u003Cp\u003EI\u0027ve heard from TaranisElsu that he might be working on that but didn\u0027t quite understand if he liked it or what he wants to do. \u003C/p\u003E\u003Cp\u003EEither way, this is very relevant to the idea of this mod specifically, so I thought to throw it in here too if anyone wants to.\u003C/p\u003E\u003Cp\u003EBy the way, \u003Cstrong\u003Ejamespicone\u003C/strong\u003E,the way you\u0027ve described means TACLS \u003Cem\u003Ewill\u003C/em\u003E conflict with background processing, TAC tracks the resource usage for unloaded vessels and then apply the differences when loading it again.\u003C/p\u003E\u003Cp\u003EI was under the impression that this mod only tracked the energy resource being consumed and produced, but if it tracks any resources then it will conflict with TACLS, but is a lot closer to my suggestion above.\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-25T21:39:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gfurst\u0022 data-cite=\u0022Gfurst\u0022\u003E\u003Cdiv\u003ESo Guys I\u0027ve throwed this idea on the TACLS, basically its a proposition to make an API engine for background resource management with some \u003Cem\u003Elife support\u003C/em\u003E support on it.\u003Cp\u003EI\u0027ve heard from TaranisElsu that he might be working on that but didn\u0027t quite understand if he liked it or what he wants to do. \u003C/p\u003E\u003Cp\u003EEither way, this is very relevant to the idea of this mod specifically, so I thought to throw it in here too if anyone wants to.\u003C/p\u003E\u003Cp\u003EBy the way, \u003Cstrong\u003Ejamespicone\u003C/strong\u003E,the way you\u0027ve described means TACLS \u003Cem\u003Ewill\u003C/em\u003E conflict with background processing, TAC tracks the resource usage for unloaded vessels and then apply the differences when loading it again.\u003C/p\u003E\u003Cp\u003EI was under the impression that this mod only tracked the energy resource being consumed and produced, but if it tracks any resources then it will conflict with TACLS, but is a lot closer to my suggestion above.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAfter a more in-depth look, it looks like TAC LS does consume electricity over time in the background, and it\u0027s possible it does it on modules that Background Processing tracks usage for. So in conclusion, *probably* this interacts with TAC LS in such a way that command modules have doubled electricity consumption in the background, with one set of consumption delivered in one hit when the vessel is loaded.\u003C/p\u003E\u003Cp\u003EThis mod can track any resource, ultimately, but it\u0027s currently only setup to do electricity. Other mods using it can ask it to track other resources though - TaranisElsu could use BP to implement more direct background consumption of water/food/air/electricity as well as background generation of water/food/air/electricity.\u003C/p\u003E\u003Cp\u003EBasic takeaway - what you\u0027re suggesting to TaranisElsu on the TAC LS thread is what this mod already does.\u003C/p\u003E\n"},{"CreatedByName":"Voidi","CreatedById":86071,"CreatedDateTime":"2015-05-25T22:45:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jamespicone\u0022 data-cite=\u0022jamespicone\u0022\u003E\u003Cdiv\u003EAfter a more in-depth look, it looks like TAC LS does consume electricity over time in the background, and it\u0027s possible it does it on modules that Background Processing tracks usage for. So in conclusion, *probably* this interacts with TAC LS in such a way that command modules have doubled electricity consumption in the background, with one set of consumption delivered in one hit when the vessel is loaded.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI tested it yesterday and in my setup, the ressources added by TAC are consumed in background, while electricity is not.\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-05-26T00:58:50Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@jamespicone\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EActually not, that\u0027s very good news that Background Processing is set in a way it can track any other resource. However it doesn\u0027t quite do what I suggested, which is adding the resource and consumption and production to kerbals themselves, as in a life-support system. All the while being being fully modular so others can tweak to their heart\u0027s desires. TACLS does the life-support bit, still not modular yet, but Taranis mentioned he wants to changes this.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E@Voidi\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThat\u0027s because kerbals will consume a lot of power, but the mod doesn\u0027t actually track the resource generation (ie solar panels), there-for tracking power in the background was beyond its scope. Which technically means both could work together, but BP wouldn\u0027t keep track of what kerbals are consuming in power.\u003C/p\u003E\u003Cp\u003EEither way, seems that this mod hasn\u0027t been update in a while, have the OP or someone mentioned about a planned update or future development?\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-27T22:49:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EActually not, that\u0027s very good news that Background Processing is set in a way it can track any other resource. However it doesn\u0027t quite do what I suggested, which is adding the resource and consumption and production to kerbals themselves, as in a life-support system. All the while being being fully modular so others can tweak to their heart\u0027s desires. TACLS does the life-support bit, still not modular yet, but Taranis mentioned he wants to changes this.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBP has hooks any mod can get into, without necessarily requiring BP is present. That is, TAC LS could be written so that if BP is present it\u0027s used, and if it isn\u0027t nothing happens, and TaranisElsu can just distribute the same file either way.\u003C/p\u003E\u003Cp\u003EI don\u0027t currently perform processing for EVA kerbals though, so there\u0027s that.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EEither way, seems that this mod hasn\u0027t been update in a while, have the OP or someone mentioned about a planned update or future development?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI should probably publish what\u0027s currently in the repository - if you\u0027re comfortable building from source what\u0027s currently in the repo improves solar panel behaviour in 1.0.\u003C/p\u003E\n"},{"CreatedByName":"Merill","CreatedById":136069,"CreatedDateTime":"2015-05-28T17:48:52Z","Content":"\n\u003Cp\u003EAt this time, i\u0027m using the btsm version of your library (because it work). I didn\u0027t success to build a stable version two week ago from your repo.\u003C/p\u003E\u003Cp\u003EI\u0027m waiting a proper release cheerfully\u003C/p\u003E\u003Cp\u003EAnd to make background processing working with eva kerbal, you need to add your partmodule(s) to the partPrefab from the partinfo with name \u0022kerbalEVA\u0022.\u003C/p\u003E\u003Cp\u003EAs it\u0027s a part created at runtime, it must be add to it also at runtime.\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-28T21:15:19Z","Content":"\n\u003Cp\u003EI\u0027ve published an update for 1.02. I\u0027d consider this one somewhat beta - I\u0027m not sure if there are horrible problems I\u0027m unaware of. Solar cells should behave much more accurately in this version, also there\u0027s a config file which allows setting which factors affect solar panel output and a fix for locked tanks draining (So BSTM\u0027s changed version is now out of date and unnecessary).\u003C/p\u003E\u003Cp\u003EFuel cells and ISRUs still won\u0027t work in the background, and I\u0027m not certain what to do about them. Neither will resource extraction stuff.\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-05-28T21:27:20Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@jamespicone\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThats pretty good news, though I will not dare to install it into my current career game, as with RemoteTech installed I have some probes in orbit for communication which wouldn\u0027t last minutes with the power consumption of antennas and barely any generation with the radial smallish panels.\u003C/p\u003E\u003Cp\u003EAnyway, would you consider in making a specific Life support mod, modular with what I\u0027ve suggested in the TACLS thread, that works as well with this mod? ( I\u0027m inquiring this because it isn\u0027t quite the scope for TACLS)\u003C/p\u003E\n"},{"CreatedByName":"Tontow","CreatedById":64552,"CreatedDateTime":"2015-05-28T21:50:32Z","Content":"\n\u003Cp\u003EWill this work with aircraft in flight?\u003C/p\u003E\u003Cp\u003EIE: I put an aircraft in the air and use Pilot Assistant or MechJeb to set a heading and maintain an altitude. Will this allow me to switch away from the craft and do other things while it keeps flying?\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-28T21:57:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tontow\u0022 data-cite=\u0022Tontow\u0022\u003E\u003Cdiv\u003EWill this work with aircraft in flight?\u003Cp\u003EIE: I put an aircraft in the air and use Pilot Assistant or MechJeb to set a heading and maintain an altitude. Will this allow me to switch away from the craft and do other things while it keeps flying?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShort answer: no.\u003C/p\u003E\u003Cp\u003ELong answer: This almost exclusively handles resource generation/consumption, not physics. If the game won\u0027t let you leave a vessel (because it\u0027s under power) this won\u0027t help.\u003C/p\u003E\n"},{"CreatedByName":"Minwaabi","CreatedById":91050,"CreatedDateTime":"2015-05-29T01:59:56Z","Content":"\n\u003Cp\u003EHow much of a performance hit should you expect to get from using this mod if you have a decent sized satellite network or similar?\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-29T02:03:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Minwaabi\u0022 data-cite=\u0022Minwaabi\u0022\u003E\u003Cdiv\u003EHow much of a performance hit should you expect to get from using this mod if you have a decent sized satellite network or similar?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI honestly don\u0027t know, and it would depend on how large \u0027decent\u0027 is and how many relevant partmodules are on it. I can say that I\u0027ve never seen anyone complain about performance impacts. Try it yourself maybe?\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-05-29T02:34:35Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@jamespicone\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ELet me better elaborate on the proposition, and with that I also need a better understanding on how BP currently works. \u003C/p\u003E\u003Cp\u003EHow does resource tracking currently works? Does it just calculate average on consumption/production and then applies once the vessel is loaded again (like most life-support mods do) or does it continuously track whats happening on the vessel and applies the resource gains/losses?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMods can instruct BackgroundProcessing that particular PartModule classes should be considered to produce or consume some resource at a given rate. They can also have BackgroundProcessing handle ModuleGenerator/ModuleDeployableSolarPanel/ModuleCommand that produces/consumes resources other than ElectricCharge. Finally, their background handling code can consume or produce any resource they please.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m trying to get better grasp on what it actually do, from the quote above I can understand it tracks several things like distance, position, shadow, for solar panels (which is quite something).\u003C/p\u003E\u003Cp\u003EAnd it also gives to understand it can generally work with any other resource modders choose to. Though whats exactly is the problem with extraction/conversion?\u003C/p\u003E\u003Cp\u003ENow to what I\u0027m proposing, which may or may not be beyond the scope of the mod, or something you to do.\u003C/p\u003E\u003Cp\u003ETo also track requirements of resource production/consumption based off on kerbals, dynamically provided by a configuration file, such as:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EConfig file (database readable)\u003Cbr\u003Ewhat kerbals consume\u003Cbr\u003E- resource1\u003Cbr\u003E- resource2\u003Cbr\u003Ewhat kerbals produce\u003Cbr\u003E....\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003ETechnically is only to track those resources base off kerbals on unloaded vessels, seem like an easy enough task, as they technically wouldn\u0027t change by any other parameter like position, sun and stuff. \u003C/p\u003E\u003Cp\u003EI\u0027m only asking because I can\u0027t do it, I understand basic logic but null of actually programming. And of course I\u0027d understand if that\u0027s not something you want to take on.\u003C/p\u003E\u003Cp\u003ECheers\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-29T03:01:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gfurst\u0022 data-cite=\u0022Gfurst\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003E@jamespicone\u003C/strong\u003E\u003Cp\u003ELet me better elaborate on the proposition, and with that I also need a better understanding on how BP currently works. \u003C/p\u003E\u003Cp\u003EHow does resource tracking currently works? Does it just calculate average on consumption/production and then applies once the vessel is loaded again (like most life-support mods do) or does it continuously track whats happening on the vessel and applies the resource gains/losses?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMods can instruct BackgroundProcessing that particular PartModule classes should be considered to produce or consume some resource at a given rate. They can also have BackgroundProcessing handle ModuleGenerator/ModuleDeployableSolarPanel/ModuleCommand that produces/consumes resources other than ElectricCharge. Finally, their background handling code can consume or produce any resource they please.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m trying to get better grasp on what it actually do, from the quote above I can understand it tracks several things like distance, position, shadow, for solar panels (which is quite something).\u003C/p\u003E\u003Cp\u003EAnd it also gives to understand it can generally work with any other resource modders choose to. Though whats exactly is the problem with extraction/conversion?\u003C/p\u003E\u003Cp\u003ENow to what I\u0027m proposing, which may or may not be beyond the scope of the mod, or something you to do.\u003C/p\u003E\u003Cp\u003ETo also track requirements of resource production/consumption based off on kerbals, dynamically provided by a configuration file, such as:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EConfig file (database readable)\u003Cbr\u003Ewhat kerbals consume\u003Cbr\u003E- resource1\u003Cbr\u003E- resource2\u003Cbr\u003Ewhat kerbals produce\u003Cbr\u003E....\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E \u003C/p\u003E\u003Cp\u003ETechnically is only to track those resources base off kerbals on unloaded vessels, seem like an easy enough task, as they technically wouldn\u0027t change by any other parameter like position, sun and stuff. \u003C/p\u003E\u003Cp\u003EI\u0027m only asking because I can\u0027t do it, I understand basic logic but null of actually programming. And of course I\u0027d understand if that\u0027s not something you want to take on.\u003C/p\u003E\u003Cp\u003ECheers\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow It Works:\u003C/p\u003E\u003Cp\u003EAt intervals (FixedUpdate to be precise - usually fractions of a second) BP scans all vessels. If it runs into a vessel that is a) unloaded and \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E not currently known to it, it inspects the persistence information for that vessel - the ProtoVessel - to determine what Parts are in it, and what PartModules are in those parts. If those PartModules are ModuleDeployableSolarPanel (the module used for solar panels), ModuleGenerator (the module used for RTGs) or ModuleCommand (the module used for probe cores and command pods) that produce a resource BP has been instructed to care about (only ElectricCharge, by default), then it grabs a bunch of information from the module - the rate resource is generated/consumed, thermal efficiency curves, that kind of thing - and stores it. Finally, for every unloaded vessel that is present and known to BP, it adds/subtracts the amount of resources required by all the PartModules in the vessel that I\u0027ve found in the current situation (so taking into account distance from sun, atmosphere, temperature, and shadowing for solar panels, for example).\u003C/p\u003E\u003Cp\u003EOther mods can set themselves up so that BP calls a function for their PartModules if they\u0027re in unloaded vessels, and they can register a resource with BP so that if a ModuleGenerator produces it, BP will track it.\u003C/p\u003E\u003Cp\u003EThe problem with extraction/conversion is partially that I haven\u0027t looked into it yet, but also partially that LiquidFuel and Oxidiser are STAGE_PRIORITY resources that can only flow through certain kinds of connection, and I haven\u0027t written the code to emulate that behaviour yet (and I\u0027m not sure it\u0027s sufficiently doable to do - I don\u0027t know how accessible part connection information is in unloaded vessels). I\u0027m currently considering implementing handling for LiquidFuel and Oxidiser and just treating them the same as ElectricCharge - resources that just travel ship-wide without limitations - and providing a config file switch to turn off that behaviour if people understandably don\u0027t like it. Consider the way an engine can\u0027t consume fuel from a fuel tank it doesn\u0027t have a fuel line / connection to.\u003C/p\u003E\u003Cp\u003EIt would be moderately easy to have kerbals produce or consume resources in unloaded ModuleCommand parts, probably. I\u0027m not sure how easy determining how many Kerbals are in a ModuleCommand is, and EVA handling isn\u0027t quite a thing BP does, but those are probably solvable. The bigger problem is that I don\u0027t want to implement full-blown life-support mechanics - kerbals dying when they run out of oxygen and the like - especially given that there are already perfectly good mods for handling this out there, like TAC LS. Resource flow is also a concern, given that oxygen should probably be treated like fuel - only flows between parts specifically attached for it.\u003C/p\u003E\u003Cp\u003EIf there\u0027s a way forward here, it\u0027s probably either me or TaranisElsu implementing BP support in TAC LS. TaranisElsu is aware of this mod, I\u0027m pretty sure. I think I\u0027ve briefly talked to him about it in IRC. I don\u0027t know what his opinion of my codebase or its utility is - I\u0027ve briefly looked at TAC LS, and I don\u0027t think it\u0027d be too hard to implement BP support, but I might be completely misunderstanding how he\u0027s implementing things. *shrug*. It\u0027s something I\u0027ll think about and I might talk to TaranisElsu about it, but no promises.\u003C/p\u003E\n"},{"CreatedByName":"Merill","CreatedById":136069,"CreatedDateTime":"2015-05-29T12:41:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jamespicone\u0022 data-cite=\u0022jamespicone\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIt would be moderately easy to have kerbals produce or consume resources in unloaded ModuleCommand parts, probably. I\u0027m not sure how easy determining how many Kerbals are in a ModuleCommand is, and EVA handling isn\u0027t quite a thing BP does, but those are probably solvable. The bigger problem is that I don\u0027t want to implement full-blown life-support mechanics - kerbals dying when they run out of oxygen and the like - especially given that there are already perfectly good mods for handling this out there, like TAC LS. Resource flow is also a concern, given that oxygen should probably be treated like fuel - only flows between parts specifically attached for it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy fork of snacks! (wip, but working), working with backgroundProcessing :\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/supermerill/Snacks\u0022 rel=\u0022external nofollow\u0022\u003Egithub\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Ethe useful class is \u0022SnackConsumer\u0022\u003C/p\u003E\u003Cp\u003EIt kills kerbals in background. But before that happen, it display a warning message and stop the timewarp, to let a chance to enable a container, or other things.\u003C/p\u003E\u003Cp\u003EIt works with vessels and eva kerbals.\u003C/p\u003E\n"},{"CreatedByName":"Gfurst","CreatedById":126201,"CreatedDateTime":"2015-05-29T13:23:43Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@jamespicone\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EJust to clarify, it wasn\u0027t explicitly answered but I can infer that the resource variation is being calculated and applied continuously, correct?\u003C/p\u003E\u003Cp\u003EI think you still misunderstand what I\u0027m proposing, my aim was to enable kerbals as resource consumer entities, just like a command pod or solar panel, and then keep track of them.\u003C/p\u003E\u003Cp\u003EAnd further more allowing full modular configuration, which resources are consumed/produced at which rate. But \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Enot\u003C/span\u003E a full blown life-support mod with parts and etc. Just the bare bones of functionality.\u003C/p\u003E\u003Cp\u003EWhy? By providing the functionality, it allows other mods to use a life-support tweaking to their liking, for example, it could be used both for full feature TACLS like, with several resources, or on a simplistic alternative, like the USILS or IFLS, even with BTSM.\u003C/p\u003E\u003Cp\u003EMaybe it is beyond the scope of what Background Processing is, but it could be a complementary mod to serve together.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E@Merill\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EAnd as a nice counter example, unlike snacks which does consumption based on meals instead of constant rate. Which by the way, I\u0027m curious to how the meal based consumption worked with BP.\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-05-29T14:06:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gfurst\u0022 data-cite=\u0022Gfurst\u0022\u003E\u003Cdiv\u003E\u003Cstrong\u003E@jamespicone\u003C/strong\u003E\u003Cp\u003EJust to clarify, it wasn\u0027t explicitly answered but I can infer that the resource variation is being calculated and applied continuously, correct?\u003C/p\u003E\u003Cp\u003EI think you still misunderstand what I\u0027m proposing, my aim was to enable kerbals as resource consumer entities, just like a command pod or solar panel, and then keep track of them.\u003C/p\u003E\u003Cp\u003EAnd further more allowing full modular configuration, which resources are consumed/produced at which rate. But \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Enot\u003C/span\u003E a full blown life-support mod with parts and etc. Just the bare bones of functionality.\u003C/p\u003E\u003Cp\u003EWhy? By providing the functionality, it allows other mods to use a life-support tweaking to their liking, for example, it could be used both for full feature TACLS like, with several resources, or on a simplistic alternative, like the USILS or IFLS, even with BTSM.\u003C/p\u003E\u003Cp\u003EMaybe it is beyond the scope of what Background Processing is, but it could be a complementary mod to serve together.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E@Merill\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EAnd as a nice counter example, unlike snacks which does consumption based on meals instead of constant rate. Which by the way, I\u0027m curious to how the meal based consumption worked with BP.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, variation is calculated and applied continuously - if you leave a vessel in the shadow of a planet, when it\u0027s out of shadow it\u0027ll start receiving power.\u003C/p\u003E\u003Cp\u003E\u0022Just make Kerbals consume/produce resources\u0022 isn\u0027t an atomic action - looking into it briefly it looks like vessels have a list of crew attached to them, so I can just loop over that list and consume resources for each one, maybe. I\u0027m not sure how EVA kerbals are handled. I don\u0027t know under what circumstances KSP will do something stupid with that list that makes it look like there\u0027s more or less crew than there should be - what happens when you go IVA for example? I don\u0027t think it\u0027s hard, as such, or even particularly tricky, just sufficiently annoying and out-of-scope that I don\u0027t want to do it. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E.\u003C/p\u003E\u003Cp\u003ESo far I\u0027ve managed to make BP usable by other mods without them having an explicit reference to my assembly anywhere in their code - they can support it, and if it\u0027s there they get processing in the background, and if it\u0027s not you don\u0027t. Building life support in directly with some plugin-setup might compromise that, but I\u0027ll think about it.\u003C/p\u003E\u003Cp\u003ESnacks doesn\u0027t appear to be using Background Processing the mod, although it does look like they\u0027re trying to do processing in the background for snacks.\u003C/p\u003E\n"}]}