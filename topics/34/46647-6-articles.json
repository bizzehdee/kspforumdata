{"TopicId":46647,"ForumId":34,"TopicTitle":"[1.3](Jun04/17) Automate Vertical Velocity and Altitude Control","CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2013-09-27T01:22:59Z","PageNum":6,"Articles":[{"CreatedByName":"Voculus","CreatedById":85437,"CreatedDateTime":"2014-07-15T10:45:00Z","Content":"\n\u003Cp\u003EDiazo, I know I\u0027m using this mod of yours in the complete opposite way for which it was designed, but it\u0027s working very well. If I give myself a bit more of an altitude buffer, and maneuver the ship in anticipation of terrain changes, it keeps even 65-ton, kethane-filled helicopters from crashing into the deck. I did some testing with a rocket-powered VTOL on the Mun, flying it up and down some very steep craters, with drastic changes in elevation. I was moving at a pretty good clip, only 15 meters high, and it got close a few times, but still managed to keep it flying. This should be in every VTOL enthusiast\u0027s toolbox. Would you mind if I linked to it in my sig? A mod like this should not go unsung! Thanks! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-15T13:46:59Z","Content":"\n\u003Cp\u003E@Voculus: Great to hear it is working for you. You are almost using is as designed. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EReally, expect for the high sideways speed your vessels are doing, this pretty much is what I designed it for. The height control started out as a \u0022can\u0027t land here, let\u0027s slide sideways until we can\u0022 tool to keep you from crashing into the ground as you moved around if the ground was rising beneath you as you moved.\u003C/p\u003E\u003Cp\u003EAnd go ahead and link it if you like, I\u0027m just glad to see people are getting good use out of it.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Voculus","CreatedById":85437,"CreatedDateTime":"2014-07-15T19:16:56Z","Content":"\n\u003Cp\u003EBy the way, I just wanted to show off the ship a little bit. It\u0027s been through about a dozen iterations, and is still being tweaked. Sorry the videos are su huge and take so long for the HD stream to buffer, but that\u0027s the price I pay for having three monitors. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/videoseries?list=UUe9oEx9yjZmdi1GpsgR-zkg\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/videoseries?list=UUe9oEx9yjZmdi1GpsgR-zkg\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"Voculus","CreatedById":85437,"CreatedDateTime":"2014-07-17T23:14:03Z","Content":"\n\u003Cp\u003EThe mod is still good to go with the x64 0.24 build, as well as Davon\u0027s Throttle Mod. Life is good. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E And while I\u0027m here, the landing height mod is still solid, too.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T00:43:00Z","Content":"\n\u003Cp\u003EMy tests agree.\u003C/p\u003E\u003Cp\u003EVersion 1.12 of this mod is KSP 0.24 ready without having to re-download.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-18T00:44:34Z","Content":"\n\u003Cp\u003EWould it be possible to get a recompile anyway? From what i\u0027m hearing its \u0022A good thing to Do\u0022 due to major changes in both Unity and KSP.\u003C/p\u003E\n"},{"CreatedByName":"Advacar","CreatedById":115472,"CreatedDateTime":"2014-07-18T01:14:28Z","Content":"\n\u003Cp\u003EWorked for me too, it\u0027s going to be very helpful for testing some of these parts \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWouldn\u0027t mind a recompile, though. Just in case there\u0027s some corner case somewhere.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T01:14:57Z","Content":"\n\u003Cp\u003ECan do.\u003C/p\u003E\u003Cp\u003ERecompile is up for download for those that want to grab it.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2014-07-19T21:08:31Z","Content":"\n\u003Cp\u003EDiazo, \u003C/p\u003E\u003Cp\u003EI just noticed an interesting quirk with the last couple of versions of this plugin. \u003C/p\u003E\u003Cp\u003EIt used to be that your plugin would show the radar altitude and vertical rate of a Kerbal on EVA. \u003C/p\u003E\u003Cp\u003EThe last 23.5 version and the current .24 version no longer do that. They show the same ASL altitude as the stock display till you touch the ground then the altitude display switches to 0.\u003C/p\u003E\u003Cp\u003EI went back and loaded an older version of the plugin from last Febuary and confirmed that it does show radar alt on EVA.\u003C/p\u003E\u003Cp\u003EAlso, are your version numbers going down? That file is named uploads-2014-02-VertVel161 while the current one seems to be version 1.2. \u003C/p\u003E\u003Cp\u003EIt\u0027s definatly an older plugin since it doesn\u0027t even have a button to go to the settings window.\u003C/p\u003E\u003Cp\u003EI realize that this isn\u0027t a major feature of the plugin and only works on low gravity moons, but it was a nice little bonus. \u003C/p\u003E\u003Cp\u003EAlso, if I\u0027m using the latest version of your Vertical Velocity controller is there any point in using your Landing Height plugin? Isn\u0027t that function also integrated into this plugin?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-19T23:41:02Z","Content":"\n\u003Cp\u003E@kerba fett: On the version numbers, it sounds like I may have gotten something messed up when I was updating my different mods for 0.24. Will check ASAP.\u003C/p\u003E\u003Cp\u003EKerbal on EVA: Odd, it sounds like the ray cast to determine height is not functioning correctly, will investigate.\u003C/p\u003E\u003Cp\u003ELanding Height: Yes and no. The altitude displayed on the vertical velocity window (the one just above Fly to:) uses the same math as the Landing Height mod and displays the distance from bottom of ship to ground. However, the vertical velocity mod does not change the altimeter at the top of the screen, you need to install the landing height mod to change it\u0027s display.\u003C/p\u003E\u003Cp\u003EShould have the next version out soon, I also need to fix the GUI formatting being overridden by other mods and I think the height control change last version broke the orbital drop feature.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Download in first post is correct as version 1.12a. The uploads-2014-02-VertVel161 file is the spaceport download that is version 1.6, but spaceport added an \u0022upload number\u0022 after each file uploaded to guarantee unique file names which is where that 1 on the end came from.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-19T23:48:18Z\u0022 title=\u002207/19/2014 11:48  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 19, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-20T03:05:39Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EVersion 1.13 Release\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EFix my UI settings so the UI settings from other mods can no longer bleed over and mess my windows up.\u003C/p\u003E\u003Cp\u003EFix height calculation so if the raycast fails, it displays the height to terrain for the vessel CoM rather then altitude from sea level.\u003C/p\u003E\u003Cp\u003EFix orbit drop mode so it is functional again. (I broke it in either version 1.9 or 1.10)\u003C/p\u003E\u003Cp\u003E@Kerba fett: The height calculation raycast fix should correct the issue you reported with the Kerbal\u0027s height being reported as ASL.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Kerba Fett","CreatedById":62292,"CreatedDateTime":"2014-07-20T04:46:22Z","Content":"\n\u003Cp\u003EWow, quick response. Thanks for fixing that considering it\u0027s such a minor feature that most people probably don\u0027t use.\u003C/p\u003E\u003Cp\u003EIn my particular circumstance I like having the ASL display as well as the radar alt for use on the Mun. I often use an ion powered lander for point to point travel and it\u0027s got a low TWR. If I come up on a hill with much speed it doesn\u0027t have the thrust to climb over it. If I use the scansat map to find out the highest point on my route and stay above it there\u0027s no worries. For now I guess I\u0027ll hold off on the Landing Height plugin.\u003C/p\u003E\n"},{"CreatedByName":"evilC","CreatedById":60370,"CreatedDateTime":"2014-07-20T18:41:35Z","Content":"\n\u003Cp\u003EWith the advent of First Contract, I have even more need for a VTOL capable plane to collect the science from around kerbin.\u003C/p\u003E\u003Cp\u003ETCA currently seems inoperable, but to be honest after some tests I did today with this mod and Davon\u0027s mod, I think ceding complete control of the VTOL aspect is potentially a simpler way to do it, and your code is already significantly refined in that area.\u003C/p\u003E\u003Cp\u003EI *love* the directional control thing that draws a red line coming from your control pod - truly a step-change in usability.\u003C/p\u003E\u003Cp\u003EHowever, I find the current DTC integration a bit lacking in the usability department, though this is mainly due to the setup involved with DTC.\u003C/p\u003E\u003Cp\u003ECould you not add a setting to choose which Davon throttle to use, instead of defaulting to throttle 0?\u003C/p\u003E\u003Cp\u003EI have some experience in KSP mod coding, and glancing at your code, is \u003Ca href=\u0022https://github.com/SirDiazo/TWR1/blob/master/TWR1/TWR1.cs#L1028\u0022 rel=\u0022external nofollow\u0022\u003Ethis line\u003C/a\u003E where you set the Davon Throttle ID? If I change that to 1, will it use daven throttle 1 instead?\u003C/p\u003E\u003Cp\u003EBTW, is that a typo in the docs? By throttle 0 do you mean the default game throttle? DTC starts at 1.\u003C/p\u003E\u003Cp\u003EAnyway, by defaulting to the first DTC throttle, that means I have to go and set up the jet engine each time in davon - map the controls etc.\u003C/p\u003E\u003Cp\u003EIf you allowed your mod to control davon (and ideally operate the axis via pure function calls - ie no keys needed to be bound in davon), then all I would need to do is set the VTOL engines to davon throttle X each time (a couple of clicks) and I am good to go. As it stands, DTC does not seem to recognize my vjoy stick, so setting it up so that my normal throttle controls the jet engines, and your mod handles VTOL takeoff / landing is problematic.\u003C/p\u003E\u003Cp\u003EAlso, is there maybe some way (via DTC?) we could control the desired vertical velocity with an axis or keys?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-20T18:57:46Z","Content":"\n\u003Cp\u003E@evilC: I\u0027ve given some thought to integration with DTC but to keep the implementation straightforward, there are a few limitations present.\u003C/p\u003E\u003Cp\u003EThe biggest is that my Vertical Velocity mod controls the main throttle (the one next to the navball), in DTC, that is throttle 0. DTC adds 5 more throttles controlled by sliders on the screen, but for DTC, throttle 0 means controlled by the main throttle. (So DTC has 6 controllable throttles total.)\u003C/p\u003E\u003Cp\u003EAs it was, integrating with DTC was kind of a spur of the moment thing as I saw people in the DTC thread comment about my mod and to get it to where it is was about 15 minutes of coding.\u003C/p\u003E\u003Cp\u003EAnything past this point starts to get more and more complex. The simplest addition would be to have my mod controlling a different Davon Throttle, but even that would require me to change from \u0022Control KSP\u0027s main throttle\u0022 to \u0022Control the specified DTC throttle\u0022 and the code for that would have to be written from scratch.\u003C/p\u003E\u003Cp\u003EWhich is why your comment about changing the line you linked in my GitHub won\u0027t work. If you change that from 0 to 1, my mod will calculate the thrust needed correctly, but it will then go ahead and set KSP\u0027s main throttle to that percentage, not set the DTC throttle to that percentage and so not maintain your velocity.\u003C/p\u003E\u003Cp\u003EI am mulling some stuff like this over in my head, but I would have to work with DTC\u0027s developer on it and I\u0027m waiting for the 0.24 furor to die down before I try to start collaborating on anything.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"S1000RRHP4","CreatedById":110137,"CreatedDateTime":"2014-07-21T12:49:29Z","Content":"\n\u003Cp\u003EI don\u0027t understand why but this mod doesn\u0027t work, i don\u0027t even have a toolbar....\u003C/p\u003E\u003Cp\u003Esomeone could help me?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-21T13:35:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022S1000RRHP4\u0022 data-cite=\u0022S1000RRHP4\u0022\u003E\u003Cdiv\u003EI don\u0027t understand why but this mod doesn\u0027t work, i don\u0027t even have a toolbar....\u003Cp\u003Esomeone could help me?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you don\u0027t have the Toolbar, the GUI should show itself when you press \u0027Z\u0027.\u003C/p\u003E\u003Cp\u003EThe other possibility is that the files are not in the right place. In the .zip file that you download, there is a GameData folder. This should be merged with your KSP-Install\\GameData folder so the mod\u0027s files end up at KSP-Install\\GameData\\Diazo\\TWR1\u003C/p\u003E\u003Cp\u003EIf neither of those things fix it, can you please post the output_log.txt file so I can take a look please?\u003C/p\u003E\u003Cp\u003EIt is found at KSP-Install\\KSP_Data\\output_log.txt for 32bit and KSP-Install\\KSP_Datax64\\output_log.txt for 64 bit.\u003C/p\u003E\u003Cp\u003ELet me know if that works for you,\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"S1000RRHP4","CreatedById":110137,"CreatedDateTime":"2014-07-21T15:47:02Z","Content":"\n\u003Cp\u003EOk it works i reinstal ksp with all my mods and it works.....\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\u003Cp\u003EOh and this mod is awesome, i can finaly keep my vtol plane without having to change the trust every second:D\u003C/p\u003E\u003Cp\u003EVery well done sir!\u003C/p\u003E\n"},{"CreatedByName":"Voculus","CreatedById":85437,"CreatedDateTime":"2014-07-25T15:42:40Z","Content":"\n\u003Cp\u003EThe 0.24.1 update seems to have broken the mod for me. Ships that were flying fine yesterday, are now climbing at an uncommanded rate, and not stopping. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-25T16:17:05Z","Content":"\n\u003Cp\u003EReally?\u003C/p\u003E\u003Cp\u003EI have not checked this one yet because I assumed since 0.23.5 to 0.24.0 was okay, 0.24.0 to 0.24.1 would be okay.\u003C/p\u003E\u003Cp\u003EIs it all engines, or is it only engines with the ModuleEngineFX module (instead of just the ModuleEngine)?\u003C/p\u003E\u003Cp\u003ELooking at the patch notes it looks like the FX modules got tweaked and I guess that broke something.\u003C/p\u003E\u003Cp\u003EI\u0027ll push an update first thing tomorrow morning, I won\u0027t have time to do it tonight.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Voculus","CreatedById":85437,"CreatedDateTime":"2014-07-25T16:23:35Z","Content":"\n\u003Cp\u003EThanks, Diazo. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E I\u0027ll see how it does with the stock engines. I rarely use them any more, so it never occured to me. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Yes, the stock engines are doing alright, and even some of the mod engines. If it helps, the part giving me problems is this \u003Ca href=\u0022http://1drv.ms/1xcbiz1\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003EHelicopter Rotor\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-25T16:46:36Z\u0022 title=\u002207/25/2014 04:46  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 25, 2014\u003C/time\u003E by Voculus\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Voculus","CreatedById":85437,"CreatedDateTime":"2014-07-25T17:51:08Z","Content":"\n\u003Cp\u003EActually, Diazo, I\u0027m not sure what the deal is. The 24.1 update broke as many mods as the 24.0 version, and a lot of things are not working right at all. Can\u0027t have any fun when nothing ever works. Not your fault. I think I\u0027m going to give KSP a little break.\u003C/p\u003E\n"},{"CreatedByName":"Voculus","CreatedById":85437,"CreatedDateTime":"2014-07-26T00:26:37Z","Content":"\n\u003Cp\u003EOk, I FINALLY figured out what the issue was. It\u0027s the modular fuel tanks mod, which I have promptly nuked. There was some error with the fuel weights and tank capacities, causing the engines, stock or mod, to rev up very high for what should have been heavy payloads, but were somehow actually only weighing in at a fraction of their real mass. Hope that makes sense. All is well, your mod is still awesome, and you\u0027re still in my last will and testament. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-27T03:32:41Z","Content":"\n\u003Cp\u003EGlad to hear you figured it out.\u003C/p\u003E\u003Cp\u003EEverything worked fine in my tests, although I did not specifically test the Helicopter Rotor you previously linked.\u003C/p\u003E\u003Cp\u003EAre you still having any issues with this mod?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Voculus","CreatedById":85437,"CreatedDateTime":"2014-07-27T05:53:39Z","Content":"\n\u003Cp\u003EEverything is working great, Diazo. I want to really thank you for being so quick to fix stuff and being helpful. A lot of mod authors release something, then it breaks, and then they disappear. Supporting your product the way you do is a refreshing change!\u003C/p\u003E\n"},{"CreatedByName":"GoldenShadowGS","CreatedById":59120,"CreatedDateTime":"2014-07-27T18:48:52Z","Content":"\n\u003Cp\u003EI\u0027m not having a lot of success with this mod. It doesn\u0027t always work reliably, which is not a good thing when landing. The upper buttons always work. I can turn off velocity control, set it to zero and do the \u002B1 and -1 increments just fine. The problem is with height control. Half of the time it never come on when it should. \u003C/p\u003E\u003Cp\u003EI click the button to turn it on and enter my height to 1000(landing on the Mun) I had thrust warning, but the engines kicked on late and I dipped all the way down to 800 meters and had to climb back up to 1,000. This could have been disasterous if I was at a lower altitude. Later, I took off to search for a different biome. I was skimming the surface pretty fast and low, around 500 meters. I saw some large mountains approaching so I typed in 1000 and activated height control and the throttle barely reacted. Ended up crashing into the side of the mountain.\u003C/p\u003E\u003Cp\u003EAnother time I was descending and tried to use height control and it didn\u0027t even work at all. I entered the height and clicked the button. I watched as I neared the entered altitude and flew past it, almost crashing into the ground, if not for that zero velocity button.\u003C/p\u003E\u003Cp\u003EThis is a really cool feature, but its not very reliable enough or something is going wrong. It great fun doing suicide burns from orbit on low gravity moons. I just wish it wasn\u0027t such a gamble because you never know if its really activated or not.\u003C/p\u003E\n"}]}