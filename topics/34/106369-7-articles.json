{"TopicId":106369,"ForumId":34,"TopicTitle":"[1.9\u002B] ModularFlightIntegrator 1.2.7 (19 October 2019)","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-30T20:11:29Z","PageNum":7,"Articles":[{"CreatedByName":"Qwarkk","CreatedById":154770,"CreatedDateTime":"2020-05-11T20:57:25Z","Content":"Having an issue using MFI with \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E for a realism overhaul game in 1.8. I launch a vessel, and after a few seconds or around 150m/s i lose control. The F3 log shows that the root part has been ripped off due to airflow. Weird as the root part remains connected and its right-click menu remains accessible. However, physics just kinda stops. My altiude is locked, my speed is 0, the apoapsis increases rapidly. There is a repeated log spam of:\n\nSpoiler\n\n[ERR 21:32:20.805] TimingFI threw during Update: System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.  \n\nParameter name: index  \n\n  at System.ThrowHelper.ThrowArgumentOutOfRangeException (System.ExceptionArgument argument, System.ExceptionResource resource) [0x00029] in \u003Cad04dee02e7e4a85a1299c7ee81c79f6\u003E:0\u003Cbr\u003E\n  at System.ThrowHelper.ThrowArgumentOutOfRangeException () [0x00000] in \u003Cad04dee02e7e4a85a1299c7ee81c79f6\u003E:0\u003Cbr\u003E\n  at FlightIntegrator.UpdateOcclusionSolar () [0x00220] in \u003C9d71e4043e394d78a6cf9193ad011698\u003E:0\u003Cbr\u003E\n  at FlightIntegrator.UpdateOcclusion (System.Boolean all) [0x00069] in \u003C9d71e4043e394d78a6cf9193ad011698\u003E:0\u003Cbr\u003E\n  at ModularFI.ModularFlightIntegrator.UpdateOcclusion (System.Boolean all) [0x00007] in \u003C1a5eb41924ae4dfca6d5042557592b79\u003E:0\u003Cbr\u003E\n  at FlightIntegrator.Update () [0x0007a] in \u003C9d71e4043e394d78a6cf9193ad011698\u003E:0\u003Cbr\u003E\n  at ModularFI.ModularFlightIntegrator.TimedUpdate () [0x0000e] in \u003C1a5eb41924ae4dfca6d5042557592b79\u003E:0\u003Cbr\u003E\n  at (wrapper delegate-invoke) \u003Cmodule\u003E.invoke_void()\u003Cbr\u003E\n  at TimingFI.Update () [0x00023] in \u003C9d71e4043e394d78a6cf9193ad011698\u003E:0\n\u003C/module\u003E\u003C/ad04dee02e7e4a85a1299c7ee81c79f6\u003E\u003C/ad04dee02e7e4a85a1299c7ee81c79f6\u003E\n\nAny help would be amazing. I will add, this kinda started ever since I edditted a physics config file in RealismOverhaul. It was setting kerbal crew mass to 0.1 and was responsible for lots of parts in my save having negative mass if they were attached to the root part. Somehow feels relevant in this issue.\n\nHere\u0027s my game [log](https://1drv.ms/u/s!Arg1MUnZoknJn2xFhYp8ac0bdg0N?e=nj87Ga)\n\nQ"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2020-05-11T22:24:13Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Qwarkk said:\n\u003E \n\u003E \n\u003E Having an issue using MFI with \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E\n\u003E \n\nMFI by itself does nothing. If something breaks then it is a mod that uses MFI. The code that generate the error in your game is even stock KSP code. \n\nI am really unsure how I could help here"},{"CreatedByName":"Qwarkk","CreatedById":154770,"CreatedDateTime":"2020-05-11T23:40:01Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, sarbian said:\n\u003E \n\u003E \n\u003E MFI by itself does nothing. If something breaks then it is a mod that uses MFI. The code that generate the error in your game is even stock KSP code. \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I am really unsure how I could help here\n\u003E \n\nOk, you have helped by narrowing my issue down. I think either \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E or \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E are potential causes, I\u2019ll post there. Thank you!\n\nQ"},{"CreatedByName":"Joe.L","CreatedById":204657,"CreatedDateTime":"2020-07-26T16:51:59Z","Content":"does this go into the main folder or into main then gamedata?"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2020-07-26T17:02:48Z","Content":"Gamedata"},{"CreatedByName":"Joe.L","CreatedById":204657,"CreatedDateTime":"2020-07-26T17:03:14Z","Content":"\u003E \n\u003E \n\u003E Just now, sarbian said:\n\u003E \n\u003E \n\u003E Gamedata\n\u003E \n\nthanks!"},{"CreatedByName":"sir rocket","CreatedById":208173,"CreatedDateTime":"2020-11-16T22:04:39Z","Content":"i can\u0027t see a link on the 1.9.1 downoad"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2020-11-19T22:46:08Z","Content":"\u003E \n\u003E \n\u003E On 11/17/2020 at 9:04 AM, sir rocket said:\n\u003E \n\u003E \n\u003E i can\u0027t see a link on the 1.9.1 downoad\n\u003E \n\nThe \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E shows that  MFI version 1.2.7 was built for 1.9.x AND 1.8\n\nJust use the 1.8 version. Works fine for me and I\u0027m on 1.10.1"},{"CreatedByName":"sir rocket","CreatedById":208173,"CreatedDateTime":"2020-11-19T23:26:57Z","Content":"\u003E \n\u003E \n\u003E 40 minutes ago, cyberKerb said:\n\u003E \n\u003E \n\u003E The \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003E\u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E\u003C/abbr\u003E shows that  MFI version 1.2.7 was built for 1.9.x AND 1.8\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Just use the 1.8 version. Works fine for me and I\u0027m on 1.10.1\n\u003E \n\ni did that, and it works"},{"CreatedByName":"SupremeEgg","CreatedById":188175,"CreatedDateTime":"2020-12-07T05:10:04Z","Content":"Hello, I\u0027m having a problem where when I load \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u003C/abbr\u003E with MFI, I\u0027m stuck on the main menu when none of the buttons work. \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u003C/abbr\u003E needs MFI in order to function, and \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u003C/abbr\u003E and its dependencies are the only mods installed.\n\n[Logs](https://www.dropbox.com/scl/fi/kmmxnjv8y1jpoflpy78be/Logs.paper?dl=0\u0026rlkey=6zs2bbybu6i5dvkhi7qdorpu8)"},{"CreatedByName":"Trung","CreatedById":196103,"CreatedDateTime":"2020-12-24T05:49:33Z","Content":"anyone help me i get a bug after i install Kopernicus and ModularFlightIntegrator ,it said i can\u0027t get EVA because i didn\u0027t upgrade Astronaut Complex yet but my game is science mode . i thing issuse with because when i uninstall MFI everything normal\n\nsorry for my bad english"},{"CreatedByName":"Boris-Barboris","CreatedById":133181,"CreatedDateTime":"2021-02-06T13:01:10Z","Content":"Dear Sarbian, I\u0027ve got a guy who got AtmosphereAutopilot broken by MFI 1.2.8 (I reproduced myself as well), apparently by [this commit](https://github.com/sarbian/ModularFlightIntegrator/commit/91e35210e7e9d5b0e3c065a886567dabdaea4a57)  \n\nI do not understand the exact reason why the control is borked, but I have a pretty strong gut feeling that the stock update order is broken by it. Control/model artifacts I see suggest that the old schedule of physics update:  \n*Control input taken from input devices and written to vessel\u0027s control state -\u003E onPreAutopilot/onAutopilot/onPost.../onFlyByWire -\u003E control surface module applies the actuation -\u003E aerodynamics forces are applied -\u003E Unity PhysX Update*  \n\nis violated by new MFI.\n\n**Edited \u003Ctime datetime=\u00222021-02-06T16:31:55Z\u0022 title=\u002202/06/2021 04:31  PM\u0022 data-short=\u00223 yr\u0022\u003EFebruary 6, 2021\u003C/time\u003E by Boris-Barboris**\n  \nremoved log"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2021-02-06T14:32:20Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, Boris-Barboris said:\n\u003E \n\u003E \n\u003E Dear Sarbian, I\u0027ve got a guy who got AtmosphereAutopilot broken by MFI 1.2.8, apparently by [this commit](https://github.com/sarbian/ModularFlightIntegrator/commit/91e35210e7e9d5b0e3c065a886567dabdaea4a57)  \n\u003E \n\u003E I do not understand the exact reason why the control is borked, but I have a pretty strong gut feeling that the stock update order is broken by it. Control/model artifacts I see suggest that the old schedule of physics update:  \n\u003E *Control input taken from input devices and written to vessel\u0027s control state -\u003E onPreAutopilot/onAutopilot/onPost.../onFlyByWire -\u003E control surface module applies the actuation -\u003E aerodynamics forces are applied -\u003E Unity PhysX Update*  \n\u003E \n\u003E is violated by new MFI.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Log (I see nothing susspicious):  [KSP.log](http://borisbarborisiskander3.duckdns.org:6080/KSP.log)\n\u003E \n\nStrange. I tested the change and using DefaultExecutionOrder did execute the call at the right timing. I will test again..."},{"CreatedByName":"Boris-Barboris","CreatedById":133181,"CreatedDateTime":"2021-02-06T14:36:28Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, sarbian said:\n\u003E \n\u003E \n\u003E Strange. I tested the change and using DefaultExecutionOrder did execute the call at the right timing. I will test again...\n\u003E \n\nIt may execute in time but change something in the stock module/gameobject ordering. Could the number \u00228\u0022 be occupied by something?"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2021-02-06T14:37:41Z","Content":"And I saw the error 20s later... I copy pasted the DefaultExecutionOrder for VesselPrecalculate without changing the timing. This should fix it [@Boris-Barboris](https://forum.kerbalspaceprogram.com/index.php?/profile/133181-boris-barboris/)\n\n[ModularFlightIntegrator-1.2.9.0.zip](https://ksp.sarbian.com/jenkins/job/ModularFlightIntegrator/37/artifact/ModularFlightIntegrator-1.2.9.0.zip)"},{"CreatedByName":"Boris-Barboris","CreatedById":133181,"CreatedDateTime":"2021-02-06T14:42:51Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, sarbian said:\n\u003E \n\u003E \n\u003E And I saw the error 20s later... I copy pasted the DefaultExecutionOrder for VesselPrecalculate without changing the timing. This should fix it [@Boris-Barboris](https://forum.kerbalspaceprogram.com/index.php?/profile/133181-boris-barboris/)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [ModularFlightIntegrator-1.2.9.0.zip](https://ksp.sarbian.com/jenkins/job/ModularFlightIntegrator/37/artifact/ModularFlightIntegrator-1.2.9.0.zip)\n\u003E \n\nworks on my machine"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2021-02-06T14:44:13Z","Content":"\u003E \n\u003E \n\u003E Just now, Boris-Barboris said:\n\u003E \n\u003E \n\u003E works on my machine\n\u003E \n\nGreat, sorry for the stupid mistake. That freaking COVID killed my brain..."},{"CreatedByName":"OrbitalManeuvers","CreatedById":190887,"CreatedDateTime":"2021-02-06T15:47:08Z","Content":"Good morning. I seem to have a version of this mod all over my installations - looks like due to Kopernicus. Do you recommend updating bundled installations with this latest build? \n\n\u003E \n\u003E \n\u003E 58 minutes ago, sarbian said:\n\u003E \n\u003E \n\u003E That freaking COVID killed my brain...\n\u003E \n\nWe\u0027re all in the same boat, so everyone understands. Thank you for hanging in there and working on this."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2021-02-06T15:50:42Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, OrbitalManeuvers said:\n\u003E \n\u003E \n\u003E Good morning. I seem to have a version of this mod all over my installations - looks like due to Kopernicus. Do you recommend updating bundled installations with this latest build?\n\u003E \n\nYes, I do. Kopernicus bundled a modified version to fix a problem they thought was in MFI, but they reverted that. You can use my version"},{"CreatedByName":"OrbitalManeuvers","CreatedById":190887,"CreatedDateTime":"2021-02-06T16:06:00Z","Content":"\u003E \n\u003E \n\u003E 7 minutes ago, sarbian said:\n\u003E \n\u003E \n\u003E Yes, I do. Kopernicus bundled a modified version to fix a problem they thought was in MFI, but they reverted that. You can use my version\n\u003E \n\nOK, will do. I have 11 installs that have (had) version 1.2.7 or 1.2.7.1.  ![:)](//s3.us-west-2.amazonaws.com/kerbal-forum-uploads/emoticons/default_k_smiley.gif \u0022:)\u0022)"},{"CreatedByName":"R-T-B","CreatedById":200868,"CreatedDateTime":"2021-02-06T23:25:28Z","Content":"Just FYI, Kopernicus is updating the bundles in latest releases, but you can always update manually.  Sarbian\u0027s mainline is all we use now.\n\n**Edited \u003Ctime datetime=\u00222021-02-06T23:25:57Z\u0022 title=\u002202/06/2021 11:25  PM\u0022 data-short=\u00223 yr\u0022\u003EFebruary 6, 2021\u003C/time\u003E by R-T-B**"},{"CreatedByName":"BenyB873","CreatedById":64488,"CreatedDateTime":"2021-02-15T09:27:06Z","Content":"Reposting my comment on BDB to here since this mainly concerns MFI Sarbian.   \n\n\u003E \n\u003E \n\u003E Quote\n\u003E \n\u003E \n\u003E I semi take it back ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022). It\u0027s mostly resolved, at least on BDBs end of the woods.   \n\u003E   \n\u003E \n\u003E Long time lurker and veteran KSP user here that hasn\u0027t bothered posting in a long long time ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif \u0022:P\u0022)  \n\u003E   \n\u003E \n\u003E A fascinating issue really, one that I believe combines the previously recorded mass bug and how \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003E\u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E\u003C/abbr\u003E \u0026 [Modular Flight Integrator](https://forum.kerbalspaceprogram.com/index.php?/topic/106369-19-modularflightintegrator-127-19-october-2019/) handle drag.   \n\u003E   \n\u003E \n\u003E Public service announcement! Latest BDB Github master works fine with 1.11.1 providing you stay BELOW version 1.2.8.0 of MFI (KSP ver 1.10), assuming of course you are running it.   \n\u003E   \n\u003E \n\u003E Using a recent version of MFI reintroduces our funky mass issue BUT only in atmosphere where there is appreciable aerodynamic drag.   \n\u003E   \n\u003E \n\u003E Launching an LV-3 Atlas with MFI 1.2.9.0 and 1.2.8.0 I observed that calculated surface \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003E\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E\u003C/abbr\u003E would proceed as expected, however upon a velocity of greater then 60ms-1 things start getting weird.  Upon a 3.3 \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003E\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E\u003C/abbr\u003E which is usually where the skirt will jettison with the given payload, the vessel is only under 1.6gs of thrust. Testing in vacuum however shows all expected values. Also an interesting issue is a pseudo dynamic pressure spike at around 7,700m, almost as if the expected mach 1.0 speed hump is twice as large as its supposed to be, this is despite calculated Q being at a mere 8000 kPA. I personally run Atlas on a max q of 25k and don\u0027t come anywhere close to that with this bug.   \n\u003E   \n\u003E \n\u003E The exact same craft and scenario using MFI 1.2.7.0 yielded consistent \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003E\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E\u003C/abbr\u003E with respect to g force across the board. All expected q values were met on timeline.   \n\u003E   \n\u003E \n\u003E I should also add I conducted this testing across various versions of Kopernicus and established that the latest build as of this post (v1.11.1-34) works fine with BDB providing MFI is 1.2.7.0.  \n\u003E   \n\u003E \n\u003E I\u0027ll double post this to the MFI thread. I hope this helps lads!\n\u003E"}]}