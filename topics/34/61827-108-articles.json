{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":108,"Articles":[{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2015-02-14T14:50:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EYes. If you scan the video to the very last few seconds of it and freeze frame it there you can see a still screenshot of me doing just that.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eprint \u0022No sleep for me until T\u002B\u0022 \u002B ETA:NEW_KOS_VERSION.\u003C/p\u003E\n"},{"CreatedByName":"Wercho","CreatedById":57663,"CreatedDateTime":"2015-02-15T01:21:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThe KSP API is internally inconsistent with which axis is which sometimes. (Don\u0027t get me started on trying to deal with CelestialBody, which can\u0027t make up it\u0027s damn mind and keeps swapping them depending on what method you\u0027re calling).\u003Cp\u003ESo it\u0027s entirely believable that rotational velocity it\u0027s messed up this way. It could very well be. So my question is this: I could make it be consistent with ship:raw. I could make the change but then it would be a while before it got released. So, are you the only one who has used it? If its just you, then I think I should change it. If there\u0027s a lot of people who used it the broken way then there\u0027s backward compatibility problems.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m in favor of making this change. I\u0027m using angularvel for a PID controller, but I\u0027d much rather have it make sense and fix my code when the change happens, rather than currently where angular vectors don\u0027t make mathematical sense but work because I switched them around.\u003C/p\u003E\u003Cp\u003E-----\u003C/p\u003E\u003Cp\u003ESecondly, I seem to have found a bug with the pilot-translation GETs. Specifically, ship:control:pilotfore and ship:control:pilotstarboard return the negative of what they should. Eg. when you press the translate right key (\u0027L\u0027), ship:control:pilotstarboard returns (-1) when it should return (\u002B1), and the opposite for \u0027J\u0027. It\u0027s easy to work around this, but it should probably be fixed.\u003C/p\u003E\u003Cp\u003ECan be demonstrated with this script :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003EUNTIL false {\u003C/p\u003E\u003Cp\u003EWAIT 0.001.\u003C/p\u003E\u003Cp\u003E PRINT \u0022pilotfore: \u0022 \u002B round(ship:control:pilotfore,1) \u002B \u0022 \u0022 at (0,3).\u003C/p\u003E\u003Cp\u003E PRINT \u0022pilottop: \u0022 \u002B round(ship:control:pilottop,1) \u002B \u0022 \u0022 at (0,4).\u003C/p\u003E\u003Cp\u003E PRINT \u0022pilotstarboard: \u0022 \u002B round(ship:control:pilotstarboard,1) \u002B \u0022 \u0022 at (0,5).\u003C/p\u003E\u003Cp\u003E PRINT \u0022pilotpitch: \u0022 \u002B round(ship:control:pilotpitch,1) \u002B \u0022 \u0022 at (0,6).\u003C/p\u003E\u003Cp\u003E PRINT \u0022pilotyaw: \u0022 \u002B round(ship:control:pilotyaw,1) \u002B \u0022 \u0022 at (0,7).\u003C/p\u003E\u003Cp\u003E PRINT \u0022pilotroll: \u0022 \u002B round(ship:control:pilotroll,1) \u002B \u0022 \u0022 at (0,8).\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EShip:control:pilottop works correctly, as do all the rotate GETs (pitch, yaw, roll).\u003C/p\u003E\n"},{"CreatedByName":"FanaticalFighter","CreatedById":77314,"CreatedDateTime":"2015-02-15T05:35:46Z","Content":"\n\u003Cp\u003EHey guys! I\u0027ve started a new collaborative project called Open Source Space Program, to which anyone can contribute code/craft/plans/ideas. Is anyone interested in joining? See link in my signature, or go to the github page here: \u003Ca href=\u0022https://github.com/FanaticalFighter/KSP-OSSP\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/FanaticalFighter/KSP-OSSP\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Laie","CreatedById":110461,"CreatedDateTime":"2015-02-15T13:37:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KK4TEE\u0022 data-cite=\u0022KK4TEE\u0022\u003E\u003Cdiv\u003EThis video demonstrates how to de-orbit and land a rocket propulsively near the Kerbal Space Center. Enjoy!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhile I\u0027m quite happy that someone is doing this, I wonder why you chose video. Would the kOS code be available somewhere?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EkOS Telnet. The pull request is in and now we\u0027re working on getting it all merged in nicely:\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo I can soon use putty/telnet to control kOS? Will it support 200 columns?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003E\u003Cp\u003EI\u0027m currently having the most curious problem where \u0022when..then\u0022 is triggered twice:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ewhen flout \u0026gt;=1 then {\u003Cbr\u003E     toggle ag1. print \u0022jet 1 off\u0022.\u003Cbr\u003E     set flout to 0.\u003Cbr\u003E     set tmp to missiontime.\u003Cbr\u003Ewhen flout \u0026gt;=1 and missiontime \u0026gt; tmp \u002B1 then {\u003Cbr\u003E     toggle ag2.  print \u0022jet 2 off\u0022.\u003Cbr\u003E     set flout to 0.\u003Cbr\u003Ewhen flout \u0026gt;=1 then {\u003Cbr\u003E     set flout to 0.\u003Cbr\u003E     toggle ag3.   print \u0022jet 3 off\u0022.\u003Cbr\u003Ewhen flout \u0026gt;=1 then {\u003Cbr\u003E     set flout to 0.\u003Cbr\u003E     toggle ag4.   print \u0022jet 4 off\u0022.\u003Cbr\u003E}}}}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u0022flout\u0022 is shorthand for flameout. The code above used to work in older versions of kOS but in v0.15.4 it doesn\u0027t. What I\u0027m getting:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eoutput of main loop\u003Cbr\u003Eoutput of main loop\u003Cbr\u003Eoutput of main loop\u003Cbr\u003Ejet 1 off\u003Cbr\u003Ejet 2 off\u003Cbr\u003Eoutput of main loop\u003Cbr\u003Eoutput of main loop\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI take it that one flameout triggers two of the when-then blocks before returning to the main loop. Not one as it should, and not the whole cascade as would be kinda-sorta understandable, but exactly two. What\u0027s most interesting is that even the \u0022set tmp to missiontime\u0022 thing doesn\u0027t fix it. The next block is triggered anyway.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EEDIT: in v0.15.6 it works again. Sorry to have bothered you.\u003C/span\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-15T21:23:40Z\u0022 title=\u002202/15/2015 09:23  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 15, 2015\u003C/time\u003E by Laie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-02-15T21:23:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Laie\u0022 data-cite=\u0022Laie\u0022\u003E\u003Cdiv\u003E/telnet to control kOS? Will it support 200 columns?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes. There is no upper limit, other than what framerate you can tolerate working with. (There is a \u0027diff\u0027 algorithm at work that gets more expensive the more characters wide the screen is. I haven\u0027t profiled its expense yet, but having about 5 different 80x24 terminals open at once seemed fine, so it\u0027s probably not a problem.)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E Not one as it should, and not the whole cascade as would be kinda-sorta understandable, but exactly two. \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is impossible to diagnose with just looking at the whens only. The code that turns on the flout condition isn\u0027t shown making it impossible to see why the existing behavior is supposedly wrong. If flout was turned on exactly twice it would make sense.\u003C/p\u003E\n"},{"CreatedByName":"Laie","CreatedById":110461,"CreatedDateTime":"2015-02-16T00:49:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThis is impossible to diagnose with just looking at the whens only. The code that turns on the flout condition isn\u0027t shown making it impossible to see why the existing behavior is supposedly wrong. If flout was turned on exactly twice it would make sense.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m keeping it seperate. There\u0027s a block of nested when..then, and then there is the main loop. Or rather, a series of main loops, like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elist engines in el.\u003Cbr\u003E\u003Cbr\u003Ewhen then {\u003Cbr\u003Ewhen then {\u003Cbr\u003Ewhen then {\u003Cbr\u003E}}}\u003Cbr\u003E\u003Cbr\u003Euntil altitude \u0026gt; x {\u003Cbr\u003E (do some stuff)\u003Cbr\u003E print \u0022some flight data\u0022.\u003Cbr\u003E wait 1.\u003Cbr\u003E set flout to 0.\u003Cbr\u003E for e in enginelist {if e:ignition and e:flameout set flout to flout \u002B 1.}\u003Cbr\u003E}\u003Cbr\u003Euntil apoapsis \u0026gt; x {\u003Cbr\u003E (do some stuff)\u003Cbr\u003E print \u0022some flight data\u0022.\u003Cbr\u003E wait 1.\u003Cbr\u003E set flout to 0.\u003Cbr\u003E for e in enginelist {if e:ignition and e:flameout set flout to flout \u002B 1.}\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Euntil out of atmosphere {\u003Cbr\u003E (maintain apoapsis)\u003Cbr\u003E print \u0022some flight data\u0022\u003Cbr\u003E wait 1.\u003Cbr\u003E set flout to 0.\u003Cbr\u003E for e in enginelist {if e:ignition and e:flameout set flout to flout \u002B 1.}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat way, jets may flameout at any stage of the flight, the when-then block preceding everything will catch it. Every instance of when-then resets flout to zero, and it won\u0027t become nonzero until the currently active loop has had time to run at least once. I shouldn\u0027t get two flameouts without at least a one-second delay and status line in-between.\u003C/p\u003E\u003Cp\u003EMost infuriating: a test rig on the launchpad works as intended. But a real vessel during a real flight will double-trigger even in 0.15.6.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-16T00:55:09Z\u0022 title=\u002202/16/2015 12:55  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 16, 2015\u003C/time\u003E by Laie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-02-16T02:08:08Z","Content":"\n\u003Cp\u003EYour whens could interrupt your main code at any time, even in the middle of those for loops where you are incrementing flout. So you could have a case where two iterations of the same loop do a flout = flout \u002B1, and have one trigger kick off in between the two, thus making the second flout = flout \u002B 1 trigger the second trigger.\u003C/p\u003E\u003Cp\u003Eexample:\u003C/p\u003E\u003Cp\u003E there are two flamed out engines. you do the for loop. On one iteration you do SET flout to flout \u002B1, and flout is now 1. Then the first trigger catches this and fires turning flout back to 0. Then on your second iteration of the SAME loop you do the second SET flout to flout \u002B 1, and a second trigger catches that.\u003C/p\u003E\u003Cp\u003EIt would be inconsistent behavior because it would depend on exactly when you\u0027ve exhausted CONFIG:IPU instructions and thus a new Update interrupts your flow. If that happens exactly in the middle of the for loop, the scenario I describe can happen.\u003C/p\u003E\u003Cp\u003EIn general, you should be thinking like \u0022threaded\u0022 programming when using WHEN triggers. Remember they could get called any time. If they read a variable your main program fiddles with, try to keep your main program\u0027s alteration of it instantaneous and all at once.\u003C/p\u003E\u003Cp\u003Efor example, have the for loop work on a temp variable, say, tempFlout. Then after it\u0027s done adding it all up at the bottom of the loop, then in one single statement say SET flout to tempFLout.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-16T02:13:15Z\u0022 title=\u002202/16/2015 02:13  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 16, 2015\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-02-16T03:10:33Z","Content":"\n\u003Cp\u003ESo I made a radar screen, works so far but I have one problem.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/cKJIoxV_krI?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EAs you can see I get an error at the end, I dont know why really, maybe because the script runs while the missile is destroyed?\u003C/p\u003E\u003Cp\u003EHere is the code for the RADAR:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET counter TO 0.\u003Cbr\u003EUNTIL counter = 10000 {\u003Cbr\u003E    CLEARSCREEN.\u003Cbr\u003E    PRINT \u002290\u0022 AT (0,0).\u003Cbr\u003E    PRINT \u0022-\u0022 AT (0,5).\u003Cbr\u003E    PRINT \u002260\u0022 AT (0,10).\u003Cbr\u003E    PRINT \u0022-\u0022 AT (0,15).\u003Cbr\u003E    PRINT \u002230\u0022 AT (0,20).\u003Cbr\u003E    PRINT \u0022-\u0022 AT (0,25).\u003Cbr\u003E    PRINT \u00220\u0022 AT (0,30).\u003Cbr\u003E    PRINT \u0022 |     |     |     |     |     |     |     |     |\u0022 AT (0,31).\u003Cbr\u003E    PRINT \u0022 45        22.5          0         22.5         45\u0022 AT (0,32).\u003Cbr\u003E    LIST TARGETS IN radar.\u003Cbr\u003E    FOR VESSEL IN radar {\u003Cbr\u003E        IF VESSEL:DISTANCE \u0026lt; 90000 AND ABS(VESSEL:BEARING) \u0026lt; 45 {\u003Cbr\u003E            IF VESSEL:BEARING \u0026lt; 0 {\u003Cbr\u003E                SET X TO 1 \u002B (24 - ROUND(ABS(VESSEL:BEARING / 45) * 24)).\u003Cbr\u003E            }.\u003Cbr\u003E            IF VESSEL:BEARING \u0026gt; 0 {\u003Cbr\u003E                SET X TO 1 \u002B (24 \u002B ROUND(ABS(VESSEL:BEARING / 45) * 24)).\u003Cbr\u003E            }.\u003Cbr\u003E            IF VESSEL:BEARING = 0 {\u003Cbr\u003E                SET X TO ROUND(VESSEL:DISTANCE / 1000).\u003Cbr\u003E            }.\u003Cbr\u003E            SET Y TO (30 - ROUND(VESSEL:DISTANCE / 3000)).\u003Cbr\u003E            IF NOT (VESSEL:NAME = \u0022AIM-120 AMRAAM Missile (fired)\u0022 OR VESSEL:NAME = \u0022AIM-9 Sidewinder Missile (fired)\u0022 OR VESSEL:NAME = \u0022AIM-54 Phoenix Missile (fired)\u0022) {\u003Cbr\u003E                PRINT \u0022  \u0022 \u002B CEILING(VESSEL:DISTANCE/1000) AT(X,Y-1).\u003Cbr\u003E                PRINT \u0022U \u0022 \u002B CEILING(VESSEL:ALTITUDE/1000) AT(X,Y).\u003Cbr\u003E                PRINT \u0022  \u0022 \u002B CEILING(VESSEL:AIRSPEED) AT(X,Y\u002B1).\u003Cbr\u003E            } ELSE {\u003Cbr\u003E                PRINT \u0022.\u0022 AT(X,Y).\u003Cbr\u003E            }.\u003Cbr\u003E        }.\u003Cbr\u003E    }.\u003Cbr\u003E    SET counter TO counter \u002B 1.\u003Cbr\u003E    WAIT 0.1.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-02-16T10:56:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022VentZer0\u0022 data-cite=\u0022VentZer0\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAs you can see I get an error at the end, I dont know why really, maybe because the script runs while the missile is destroyed?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmm. It\u0027s probably the fact that the FOR loop takes longer than one update to run. So you query the list of targets, put it in \u003Cstrong\u003Eradar\u003C/strong\u003E, and then start working with those targets one at a time, and in the meantime one of them is gone but you still have a reference to it.\u003C/p\u003E\u003Cp\u003EDoes the Vessel:LOADED check work as a protection check? Hmm. That\u0027s still an awful lot of places to have to check it even if it does. I\u0027d recommend using WAIT 0.01 to force an update sync right before you take your readings, then take all your readings at once into variables (i.e. SET BEARING TO VESSEL:BEARING, and so on, rather than mentioning VESSEL:BEARING over and over).\u003C/p\u003E\u003Cp\u003ESo maybe this would work?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFOR VESSEL in radar {\u003Cbr\u003E    WAIT 0.01.\u003Cbr\u003E    IF VESSEL:LOADED {\u003Cbr\u003E        SET VDIST TO VESSEL:DISTANCE.\u003Cbr\u003E        SET VBEAR TO VESSEL:BEARING.\u003Cbr\u003E        SET VALT TO VESSEL:ALTITUDE.\u003Cbr\u003E        SET VAIR TO VESSEL:AIRSPEED.\u003Cbr\u003E        SET VNAME TO VESSEL:NAME.\u003Cbr\u003E\u003Cbr\u003E        //     /|\\\u003Cbr\u003E        //      |\u003Cbr\u003E        // put the rest of your loop in here, using the values above instead of direct queries.\u003Cbr\u003E        //      |\u003Cbr\u003E        //     \\|/\u003Cbr\u003E\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI can\u0027t guarantee that working, because I don\u0027t know how Vessel:LOADED will behave here, but it might work as a check.\u003C/p\u003E\u003Cp\u003EWe may need to create an additional suffix for vessel if it doesn\u0027t - Vessel:EXISTS. (Because I can see a scenario where the vessel exists but as a far away object (packed into a single point on the map view, not loaded as a full list of parts), so some suffixes still work (like distance), but not others (like :PARTS). It may be necessary to let a script differentiate those two conditions.))\u003C/p\u003E\u003Cp\u003EBehind the scenes, because your script causes us to have a C# reference pointing to the vessel, that means the vessel object doesn\u0027t really get orphaned and go away when it crashes. It\u0027s still in memory, but now many of its methods won\u0027t work right. We might need a way to detect that situation and report it to the script.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EAnother idea I\u0027d been tossing around a while is to just make an \u0022ATOMIC\u0022 keyword, or some sort of equivalent, like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eline 1.\u003Cbr\u003Eline 2.\u003Cbr\u003EATOMIC {\u003Cbr\u003E  line 3.\u003Cbr\u003E  line 4.\u003Cbr\u003E  line 5.\u003Cbr\u003E  line 6.\u003Cbr\u003E}\u003Cbr\u003Eline 7.\u003Cbr\u003Eline 8.\u003Cbr\u003Eline 9.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd what it would mean is \u0022Force the section containing lines 3,4,5, and 6 to occur within the span of one Update, even if that means exceeding CONFIG:IPU by a bit.\u0022 It would cause a wait 0.001 just beforehand, then start a new fresh update at line 3, then stick with it until like 6, even if it goes past config:ipu instructions to do so.\u003C/p\u003E\u003Cp\u003EThe reluctance I have with that is that it may create infinite hang of KSP if a script is designed badly, or we might have to enforce that no looping is allowed inside such a section.\u003C/p\u003E\u003Cp\u003EBut at any rate the name would have to be something besides \u0022ATOMIC\u0022. \u0022Atomic\u0022 means something to experienced programmers that communicates exactly what the section would do, very well, but would be quite confusing to a typical player who\u0027s going to think it\u0027s got something to do with atomic engines. One of the kOS design goals is to make it easy for a person new to programming to get ramped up to speed without having to be an expert. I fear that throwing around terminology like \u0022atomic section\u0022 might be contrary to that goal.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-16T10:59:15Z\u0022 title=\u002202/16/2015 10:59  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 16, 2015\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003Cbr\u003ECome on, SQUAD! Turning OFF an extra unwanted feature shouldn\u0026#039;t be an \u0026quot;advanced\u0026quot; edit. Let us disable smilelys as a user preference that stays on!\n\u003C/span\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-02-16T13:20:11Z","Content":"\n\u003Cp\u003EOk I just tried it and it didnt work, it gave and error about \u0027SET VDIST TO VESSEL:DISTANCE.\u0027 so it basically threw a tantrum about the first line of code in the FOR loop.\u003C/p\u003E\u003Cp\u003EI will try a longer wait time in at the start and try again. \u003C/p\u003E\u003Cp\u003EYeah VESSEL:LOADED doesnt seem to work at all :/\u003C/p\u003E\u003Cp\u003EThe error I get is always the first line in the FOR loop. \u003C/p\u003E\u003Cp\u003E\u0022At test on 1, line 20\u003C/p\u003E\u003Cp\u003E SET VDIST TO VESSEL:DISTANCE.\u0022\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-02-16T17:28:42Z","Content":"\n\u003Cp\u003EActually, looking at the code again I\u0027m surprised it ever worked at all even prior to the vessel blowing up.\u003C/p\u003E\u003Cp\u003EVESSEL is the name of a function call. Function calls in kOS are allowed to skip the parentheses and it means the same thing as having no arguments in the parentheses. (so VESSEL:FOO is the same as VESSEL():FOO).\u003C/p\u003E\u003Cp\u003ESo when you say FOR VESSEL IN RADAR you create an ambiguous override where VESSEL means two things at the same time. It apparently is taking it to mean the variable first, but ...it is weird that it works.\u003C/p\u003E\n"},{"CreatedByName":"TheXRuler","CreatedById":125517,"CreatedDateTime":"2015-02-16T17:53:26Z","Content":"\n\u003Cp\u003EHi everyone \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI am completely new to kOS and also almost completely new to programming as such.\u003C/p\u003E\u003Cp\u003EI\u0027m trying to make my first launch and circularization script and i just can\u0027t make it work.\u003C/p\u003E\u003Cp\u003EI have everything worked out up until the coasting to ap phase, and though it may be crude and ugly it works. However I just can\u0027t seem to make the last part work.\u003C/p\u003E\u003Cp\u003EI\u0027ve tried multiple approaches, but frankly, I have no idea what I\u0027m doing wrong \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EAny help would be much appreciated \u003C/p\u003E\u003Cp\u003EMy code: \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E Print \u0022------------------------------------------------------\u0022.\u003Cbr\u003E Print \u0022Throttle to 100%. Waiting for fuel flow stabilization.\u0022.\u003Cbr\u003E Print \u0022------------------------------------------------------\u0022.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003ELock Throttle to 1.0.\u003Cbr\u003EWait 2. \u003Cbr\u003E Print \u0022-----------------\u0022.\u003Cbr\u003E Print \u0022Assuming Control\u0022.\u003Cbr\u003E Print \u0022-----------------\u0022.\u003Cbr\u003ELock steering to heading(90,90).\u003Cbr\u003EWait 2.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003ESet countdown to -10.\u003Cbr\u003E Print \u0022 \u0022.\u003Cbr\u003E Print \u0022--------------------------\u0022.\u003Cbr\u003E Print \u0022Launch Sequence Initiated\u0022.\u003Cbr\u003E Print \u0022--------------------------\u0022.\u003Cbr\u003E\u003Cbr\u003EWait 2.\u003Cbr\u003E\u003Cbr\u003EUntil countdown = 0 {\u003Cbr\u003E Print \u0022T\u0022 \u002B countdown \u002B \u0022s\u0022.\u003Cbr\u003E Set countdown to countdown \u002B1.\u003Cbr\u003E Wait 1.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EWhen Stage:Liquidfuel \u0026lt; 0.001 Then {\u003Cbr\u003E Print \u0022----------------------------\u0022.\u003Cbr\u003E Print \u0022No LFO. Attempting to stage.\u0022.\u003Cbr\u003E Print \u0022----------------------------\u0022.\u003Cbr\u003E STAGE.\u003Cbr\u003E PRESERVE.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EWhen ship:altitude \u0026gt; 500 then {\u003Cbr\u003E Lock Steering to heading(90,87).\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EWhen ship:altitude \u0026gt; 1500 then {\u003Cbr\u003E Lock Steering to heading(90,85).\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EWhen ship:altitude \u0026gt; 2500 then {\u003Cbr\u003E Lock Steering to heading(90,80).\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EWhen ship:altitude \u0026gt; 5000 then {\u003Cbr\u003E Lock Steering to heading(90,75).\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EWhen ship:altitude \u0026gt; 8000 then {\u003Cbr\u003E Lock Steering to heading(90,65).\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EWhen ship:altitude \u0026gt; 12000 then {\u003Cbr\u003E Lock Steering to heading(90,45).\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Ewhen ship:apoapsis \u0026gt; 100000 then {\u003Cbr\u003Elock throttle to 0.\u003Cbr\u003EPrint \u0022----------------------\u0022.\u003Cbr\u003EPrint \u0022Coasting to apoapsis.\u0022.\u003Cbr\u003EPrint \u0022----------------------\u0022.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E//everything works fine until here\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Eset q to 1.\u003Cbr\u003E\u003Cbr\u003Eset u to 1.\u003Cbr\u003E\u003Cbr\u003Eif ship:altitude \u0026gt; 90000 {\u003Cbr\u003Eset q to q - 1.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EWhen ship:altitude \u0026gt; 90000 then \u003Cbr\u003E{ \u003Cbr\u003Ewhen eta:apoapsis \u0026lt; 25 then {\u003Cbr\u003E set u to u - 1.\u003Cbr\u003E }\u003Cbr\u003Epreserve.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Ewhen q = 0 then {\u003Cbr\u003EPrint \u0022prograde\u0022.\u003Cbr\u003Elock steering to prograde.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Eif u = 0 {\u003Cbr\u003EPrint \u0022burn\u0022.\u003Cbr\u003Elock throttle to 1.0.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Ewhen periapsis \u0026gt; 90000 then {\u003Cbr\u003Elock throttle to 0.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Ewait until ship:altitude \u0026gt; 120000.\u003Cbr\u003E//end program\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//I also tried this\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Eset quak to 0.\u003Cbr\u003E\u003Cbr\u003Ewhen ship:altitude \u0026gt; 90000 then {\u003Cbr\u003E  if eta:apoapsis = 25 \u003Cbr\u003E  set quak to quak \u002B 1.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Eif quak = 1\u003Cbr\u003ELock steering to prograde.\u003Cbr\u003EPrint \u0022--------------------------------------------\u0022.\u003Cbr\u003EPrint \u0022Executing circularization Burn\u0022.\u003Cbr\u003EPrint \u0022--------------------------------------------\u0022.\u003Cbr\u003EWait 10.\u003Cbr\u003ELock throttle to 1.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EWait until ship:periapsis =99000.\u003Cbr\u003E//end program.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//and this, which is direcly from a tutorial\u003Cbr\u003E\u003Cbr\u003Ewait until eta:apoapsis \u0026lt; 15.\u003Cbr\u003Elock throttle to 1.\u003Cbr\u003Eprint \u0022Burn.\u0022.\u003Cbr\u003E\u003Cbr\u003Ewait until periapsis = 99500.\u003Cbr\u003E//end program\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Wercho","CreatedById":57663,"CreatedDateTime":"2015-02-16T19:39:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheXRuler\u0022 data-cite=\u0022TheXRuler\u0022\u003E\u003Cdiv\u003EHi everyone \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EI am completely new to kOS and also almost completely new to programming as such.\u003C/p\u003E\u003Cp\u003EI\u0027m trying to make my first launch and circularization script and i just can\u0027t make it work.\u003C/p\u003E\u003Cp\u003EI have everything worked out up until the coasting to ap phase, and though it may be crude and ugly it works. However I just can\u0027t seem to make the last part work.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, on your first attempt you kept mixing IF statements and WHEN..THEN statements. The WHEN statements appear to be set up correctly, for the most part, but the IF statements are the problem. The WHEN statements are just triggers, so the program continues executing when it finds one, and just stores the trigger condition. That means your IF statements are getting executed immediately upon the program getting to that stage... eg. right after countdown.\u003C/p\u003E\u003Cp\u003ESo, what the program sees is this, sort of:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EUntil countdown = 0 {\u003Cbr\u003E Print \u0022T\u0022 \u002B countdown \u002B \u0022s\u0022.\u003Cbr\u003E Set countdown to countdown \u002B1.\u003Cbr\u003E Wait 1.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Eset q to 1.\u003Cbr\u003Eset u to 1.\u003Cbr\u003Eif ship:altitude \u0026gt; 90000 {\u003Cbr\u003Eset q to q - 1.\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Eetc.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewith a whole bunch of WHEN\u0027s stacked up waiting to happen. That IF evaluates to false, kOS doesn\u0027t ever execute the code inside it, and moves on. You need to change those IF statements to WHENs, or better yet, rewrite them as WAIT UNTIL or do things with UNTIL loops. In one case, you have an IF nested in a WHEN, and that one would have to be made a WHEN, I think.\u003C/p\u003E\u003Cp\u003EYour second attempt suffers from the same problem. IF statements that evaluate to false and the program moves on.\u003C/p\u003E\u003Cp\u003EFor the last one, directly from the tutorial. I assume you are locking steering to prograde. Is the engine firing but never stopping on that one? I think it probably just needs the last check changed to ship:obt:periapsis \u0026gt; 99500. \u0022Periapsis\u0022 has been deprecated and shouldn\u0027t be used anymore, but more importantly, it is unlikely for the periapsis to be exactly 99500 at any physics tick, so waiting until it is greater than the specified value should suffice. Also, it would probably be best to finish with \u0022LOCK throttle TO 0.\u0022 just to make sure you don\u0027t keep going. The program should release control when it starts, and return the throttle to whatever it was set at before it started.\u003C/p\u003E\u003Cp\u003EHope that helps.\u003C/p\u003E\n"},{"CreatedByName":"TheXRuler","CreatedById":125517,"CreatedDateTime":"2015-02-16T20:13:24Z","Content":"\n\u003Cp\u003EThanks wercho. It seems i was unaware of the true functions of the ifs and whens.\u003C/p\u003E\u003Cp\u003EImplementing those changes instantly fixed my problems so thanks a ton and also \u002Brep.\u003C/p\u003E\u003Cp\u003EAlso have I said, this mod is amazing :3\u003C/p\u003E\n"},{"CreatedByName":"thegreatgonz","CreatedById":135977,"CreatedDateTime":"2015-02-16T20:19:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wercho\u0022 data-cite=\u0022Wercho\u0022\u003E\u003Cdiv\u003EI\u0027m in favor of making this change. I\u0027m using angularvel for a PID controller, but I\u0027d much rather have it make sense and fix my code when the change happens, rather than currently where angular vectors don\u0027t make mathematical sense but work because I switched them around.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOK, I\u0027ve submitted a \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/570\u0022 rel=\u0022external nofollow\u0022\u003EGitHub issue\u003C/a\u003E for this. FWIW, I agree: please break my scripts, if it makes the API better. Just make sure there\u0027s an explanation in the changelog so I can make the necessary corrections.\u003C/p\u003E\u003Cp\u003E---\u003C/p\u003E\u003Cp\u003ESeparate question: does anyone know how to get the orbital velocity of the current SOI body, relative to its parent? It appears that body velocities are reported in the SOI-RAW reference frame, which means the SOI body\u0027s velocity is zero by definition. I tried BODY:BODY:VELOCITY:ORBIT, but that seems to be undefined when the SOI body is a planet (i.e. BODY:BODY is the Sun).\u003C/p\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-02-16T20:28:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EActually, looking at the code again I\u0027m surprised it ever worked at all even prior to the vessel blowing up.\u003Cp\u003EVESSEL is the name of a function call. Function calls in kOS are allowed to skip the parentheses and it means the same thing as having no arguments in the parentheses. (so VESSEL:FOO is the same as VESSEL():FOO).\u003C/p\u003E\u003Cp\u003ESo when you say FOR VESSEL IN RADAR you create an ambiguous override where VESSEL means two things at the same time. It apparently is taking it to mean the variable first, but ...it is weird that it works.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk I now changed it to this : \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET counter TO 0.\u003Cbr\u003EUNTIL counter = 10000 {\u003Cbr\u003E    CLEARSCREEN.\u003Cbr\u003E    LIST TARGETS IN contacts.\u003Cbr\u003E    FOR contact IN contacts {\u003Cbr\u003E        IF contact:DISTANCE \u0026lt; 90000 AND ABS(contact:BEARING) \u0026lt; 45 {\u003Cbr\u003E            IF contact:BEARING \u0026lt; 0 {SET X TO 1 \u002B (24 - ROUND(ABS(contact:BEARING / 45) * 24)).}.\u003Cbr\u003E            IF contact:BEARING \u0026gt; 0 {SET X TO 1 \u002B (24 \u002B ROUND(ABS(contact:BEARING / 45) * 24)).}.\u003Cbr\u003E            IF contact:BEARING = 0 {SET X TO ROUND(contact:DISTANCE / 1000).}.\u003Cbr\u003E            SET Y TO (30 - ROUND(contact:DISTANCE / 3000)).\u003Cbr\u003E            PRINT \u0022.\u0022 AT(X,Y).\u003Cbr\u003E        }.\u003Cbr\u003E    }.\u003Cbr\u003E\u003Cbr\u003E    PRINT \u002290\u0022 AT (0,0).\u003Cbr\u003E    PRINT \u0022-\u0022 AT (0,3).\u003Cbr\u003E    PRINT \u0022-\u0022 AT (0,7).\u003Cbr\u003E    PRINT \u002260\u0022 AT (0,10).\u003Cbr\u003E    PRINT \u0022-\u0022 AT (0,13).\u003Cbr\u003E    PRINT \u0022-\u0022 AT (0,17).\u003Cbr\u003E    PRINT \u002230\u0022 AT (0,20).\u003Cbr\u003E    PRINT \u0022-\u0022 AT (0,23).\u003Cbr\u003E    PRINT \u0022-\u0022 AT (0,27).\u003Cbr\u003E    PRINT \u00220\u0022 AT (0,30).\u003Cbr\u003E    PRINT \u0022 |     |     |     |     |     |     |     |     |\u0022 AT (0,31).\u003Cbr\u003E    PRINT \u0022 45        22.5          0         22.5         45\u0022 AT (0,32).\u003Cbr\u003E    SET counter TO counter \u002B 1.\u003Cbr\u003E    WAIT 0.01.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EStill the same error occurs. :/\u003C/p\u003E\u003Cp\u003EI didnt use VESSEL this time. I also noticed that the impact of the missile causes alot of debris to appear which vanishes shortly after, I guess because of explosive/thermal damage of the explosion (I made the script pit out all the targets as a continously scrolling list. Went like this :\u003C/p\u003E\u003Cp\u003ESHIP\u003C/p\u003E\u003Cp\u003EMISSILE\u003C/p\u003E\u003Cp\u003E(update)\u003C/p\u003E\u003Cp\u003ESHIP\u003C/p\u003E\u003Cp\u003EMISSILE\u003C/p\u003E\u003Cp\u003E(update)\u003C/p\u003E\u003Cp\u003ESHIP\u003C/p\u003E\u003Cp\u003EMISSILE(vanishes)\u003C/p\u003E\u003Cp\u003E(update)\u003C/p\u003E\u003Cp\u003ESHIP(hit)\u003C/p\u003E\u003Cp\u003E(update)\u003C/p\u003E\u003Cp\u003ESHIP DEBRIS\u003C/p\u003E\u003Cp\u003ESHIP DEBRIS\u003C/p\u003E\u003Cp\u003ESHIP DEBRIS\u003C/p\u003E\u003Cp\u003E(update)\u003C/p\u003E\u003Cp\u003ESHIP(remains)\u003C/p\u003E\u003Cp\u003E(update)\u003C/p\u003E\u003Cp\u003ESHIP\u003C/p\u003E\u003Cp\u003E(update)\u003C/p\u003E\u003Cp\u003ESHIP\u003C/p\u003E\u003Cp\u003E(update)\u003C/p\u003E\u003Cp\u003Eetc. \u003C/p\u003E\u003Cp\u003EIt is weird If I do not perform any contact:SOMETHING calls then it works, but it will not give me anything that I can work with.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-16T20:36:26Z\u0022 title=\u002202/16/2015 08:36  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 16, 2015\u003C/time\u003E by VentZer0\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-02-16T21:05:53Z","Content":"\n\u003Cp\u003E@VentZero: This may be an intractable problem. As a further debug test, try printing out contact:name at the top of each run of the loop, then you can see which one it was working on when it bugged out (i.e. was it the debris, was it the missile, etc).\u003C/p\u003E\n"},{"CreatedByName":"Wercho","CreatedById":57663,"CreatedDateTime":"2015-02-16T23:35:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022thegreatgonz\u0022 data-cite=\u0022thegreatgonz\u0022\u003E\u003Cdiv\u003ESeparate question: does anyone know how to get the orbital velocity of the current SOI body, relative to its parent? It appears that body velocities are reported in the SOI-RAW reference frame, which means the SOI body\u0027s velocity is zero by definition. I tried BODY:BODY:VELOCITY:ORBIT, but that seems to be undefined when the SOI body is a planet (i.e. BODY:BODY is the Sun).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think using body:obt:velocity will give you what you want.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-16T23:51:01Z\u0022 title=\u002202/16/2015 11:51  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 16, 2015\u003C/time\u003E by Wercho\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"thegreatgonz","CreatedById":135977,"CreatedDateTime":"2015-02-17T00:09:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wercho\u0022 data-cite=\u0022Wercho\u0022\u003E\u003Cdiv\u003EI think using body:obt:velocity will give you what you want.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt does indeed! Thanks!\u003C/p\u003E\n"},{"CreatedByName":"Tabris","CreatedById":122933,"CreatedDateTime":"2015-02-17T07:41:48Z","Content":"\n\u003Cp\u003Ewhen using the ENCOUNTER method instead of the return being BODY:NAME it gives me \u0022ORBIT of \u0026lt;unnamed\u0026gt;\u0022 if there is an encounter or NONE if there isn\u0027t.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/sh/mc2t0v9njveunqp/AADA5YxU3YZd2IvKal6YcSk1a?dl=0\u0022 rel=\u0022external nofollow\u0022\u003EHERE\u003C/a\u003E is the code (munshot.ks) a log of the encounter (minmus.ks) and a video of the script executing.\u003C/p\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-02-17T08:13:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E@VentZero: This may be an intractable problem. As a further debug test, try printing out contact:name at the top of each run of the loop, then you can see which one it was working on when it bugged out (i.e. was it the debris, was it the missile, etc).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt is interessting\u003C/p\u003E\u003Cp\u003EThis generates an error.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    LIST TARGETS IN contacts.\u003Cbr\u003E    FOR contact IN contacts {\u003Cbr\u003E            IF contact:DISTANCE \u0026lt; 90000 AND ABS(contact:BEARING) \u0026lt; 45 {\u003Cbr\u003E                PRINT contact:NAME.\u003Cbr\u003E            }.\u003Cbr\u003E    }.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis does not.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    LIST TARGETS IN contacts.\u003Cbr\u003E    FOR contact IN contacts {\u003Cbr\u003E                PRINT contact:NAME.\u003Cbr\u003E    }.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFirst thing will break up directly after all the debris appears, the other one just goes thru without problem.\u003C/p\u003E\u003Cp\u003EIf I could check if the part actually has a :DISTANCE suffix that would maybe be enough to fix this bug.\u003C/p\u003E\u003Cp\u003EMoar testing ... \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    LIST TARGETS IN contacts.\u003Cbr\u003E    FOR contact IN contacts {\u003Cbr\u003E        WAIT 0.1.\u003Cbr\u003E        IF contact:DISTANCE \u0026gt; 0 {\u003Cbr\u003E            SET VDIST TO contact:DISTANCE.\u003Cbr\u003E            SET VBEAR TO contact:BEARING.\u003Cbr\u003E            SET VNAME TO contact:NAME.\u003Cbr\u003E            IF contact:DISTANCE \u0026lt; 90000 AND ABS(contact:BEARING) \u0026lt; 45 {\u003Cbr\u003E                IF contact:BEARING \u0026lt; 0 {SET X TO 1 \u002B (24 - ROUND(ABS(contact:BEARING / 45) * 24)).}.\u003Cbr\u003E                IF contact:BEARING \u0026gt; 0 {SET X TO 1 \u002B (24 \u002B ROUND(ABS(contact:BEARING / 45) * 24)).}.\u003Cbr\u003E                IF contact:BEARING = 0 {SET X TO ROUND(contact:DISTANCE / 1000).}.\u003Cbr\u003E                SET Y TO (30 - ROUND(contact:DISTANCE / 3000)).\u003Cbr\u003E                IF NOT (VNAME = \u0022AIM-120 AMRAAM Missile (fired)\u0022 OR VNAME = \u0022AIM-9 Sidewinder Missile (fired)\u0022 OR VNAME = \u0022AIM-54 Phoenix Missile (fired)\u0022) {\u003Cbr\u003E                    PRINT \u0022  \u0022 \u002B ROUND(contact:HEADING) AT(X,Y-1).\u003Cbr\u003E                    PRINT \u0022U \u0022 \u002B ROUND(contact:ALTITUDE) AT(X,Y).\u003Cbr\u003E                    PRINT \u0022  \u0022 \u002B ROUND(contact:AIRSPEED) AT(X,Y\u002B1).\u003Cbr\u003E                } ELSE {\u003Cbr\u003E                    PRINT \u0022.\u0022 AT(X,Y).\u003Cbr\u003E                }.\u003Cbr\u003E            }.\u003Cbr\u003E        }.\u003Cbr\u003E    }.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDoesn\u0027t work either, IF contact:DISTANCE \u0026gt; 0 gives an error.\u003C/p\u003E\u003Cp\u003EI wonder why. Is the distance not a number in this instance or is it too quickly gone. I wonder.\u003C/p\u003E\u003Cp\u003EIt is definitely the :DISTANCE\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET counter TO 0.\u003Cbr\u003EUNTIL counter = 10000 {\u003Cbr\u003E\u003Cbr\u003E    LIST TARGETS IN contacts.\u003Cbr\u003E    FOR contact IN contacts {\u003Cbr\u003E        PRINT contact:NAME.\u003Cbr\u003E        PRINT contact:DISTANCE.\u003Cbr\u003E    }.\u003Cbr\u003E    SET counter TO counter \u002B 1.\u003Cbr\u003E    WAIT 0.001.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat gives an error.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-17T09:00:36Z\u0022 title=\u002202/17/2015 09:00  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 17, 2015\u003C/time\u003E by VentZer0\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2015-02-17T11:32:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022VentZer0\u0022 data-cite=\u0022VentZer0\u0022\u003E\u003Cdiv\u003EIt is interessting\u003Cp\u003EThis generates an error.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    LIST TARGETS IN contacts.\u003Cbr\u003E    FOR contact IN contacts {\u003Cbr\u003E            IF contact:DISTANCE \u0026lt; 90000 AND ABS(contact:BEARING) \u0026lt; 45 {\u003Cbr\u003E                PRINT contact:NAME.\u003Cbr\u003E            }.\u003Cbr\u003E    }.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis does not.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    LIST TARGETS IN contacts.\u003Cbr\u003E    FOR contact IN contacts {\u003Cbr\u003E                PRINT contact:NAME.\u003Cbr\u003E    }.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFirst thing will break up directly after all the debris appears, the other one just goes thru without problem.\u003C/p\u003E\u003Cp\u003EIf I could check if the part actually has a :DISTANCE suffix that would maybe be enough to fix this bug.\u003C/p\u003E\u003Cp\u003EMoar testing ... \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    LIST TARGETS IN contacts.\u003Cbr\u003E    FOR contact IN contacts {\u003Cbr\u003E        WAIT 0.1.\u003Cbr\u003E        IF contact:DISTANCE \u0026gt; 0 {\u003Cbr\u003E            SET VDIST TO contact:DISTANCE.\u003Cbr\u003E            SET VBEAR TO contact:BEARING.\u003Cbr\u003E            SET VNAME TO contact:NAME.\u003Cbr\u003E            IF contact:DISTANCE \u0026lt; 90000 AND ABS(contact:BEARING) \u0026lt; 45 {\u003Cbr\u003E                IF contact:BEARING \u0026lt; 0 {SET X TO 1 \u002B (24 - ROUND(ABS(contact:BEARING / 45) * 24)).}.\u003Cbr\u003E                IF contact:BEARING \u0026gt; 0 {SET X TO 1 \u002B (24 \u002B ROUND(ABS(contact:BEARING / 45) * 24)).}.\u003Cbr\u003E                IF contact:BEARING = 0 {SET X TO ROUND(contact:DISTANCE / 1000).}.\u003Cbr\u003E                SET Y TO (30 - ROUND(contact:DISTANCE / 3000)).\u003Cbr\u003E                IF NOT (VNAME = \u0022AIM-120 AMRAAM Missile (fired)\u0022 OR VNAME = \u0022AIM-9 Sidewinder Missile (fired)\u0022 OR VNAME = \u0022AIM-54 Phoenix Missile (fired)\u0022) {\u003Cbr\u003E                    PRINT \u0022  \u0022 \u002B ROUND(contact:HEADING) AT(X,Y-1).\u003Cbr\u003E                    PRINT \u0022U \u0022 \u002B ROUND(contact:ALTITUDE) AT(X,Y).\u003Cbr\u003E                    PRINT \u0022  \u0022 \u002B ROUND(contact:AIRSPEED) AT(X,Y\u002B1).\u003Cbr\u003E                } ELSE {\u003Cbr\u003E                    PRINT \u0022.\u0022 AT(X,Y).\u003Cbr\u003E                }.\u003Cbr\u003E            }.\u003Cbr\u003E        }.\u003Cbr\u003E    }.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDoesn\u0027t work either, IF contact:DISTANCE \u0026gt; 0 gives an error.\u003C/p\u003E\u003Cp\u003EI wonder why. Is the distance not a number in this instance or is it too quickly gone. I wonder.\u003C/p\u003E\u003Cp\u003EIt is definitely the :DISTANCE\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET counter TO 0.\u003Cbr\u003EUNTIL counter = 10000 {\u003Cbr\u003E\u003Cbr\u003E    LIST TARGETS IN contacts.\u003Cbr\u003E    FOR contact IN contacts {\u003Cbr\u003E        PRINT contact:NAME.\u003Cbr\u003E        PRINT contact:DISTANCE.\u003Cbr\u003E    }.\u003Cbr\u003E    SET counter TO counter \u002B 1.\u003Cbr\u003E    WAIT 0.001.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThat gives an error.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ecan you show what the error is, preferably from the output log?\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Eby the way, put the wait 0.01 before the LIST TARGETS IN contacts. You are getting the list in a different update from when you query its members\u003C/p\u003E\n"},{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2015-02-17T17:05:39Z","Content":"\n\u003Cp\u003EI am trying to enumerate resources of per-part basis and so far i had success on my test craft with \u0022MK1 5m Universal Fuselage\u0022 from \u0022B9 Aerospace\u0022 pack. It is tagged as \u0022FUSELAGE\u0022 and modified with Modular Fuel Tanks.\u003C/p\u003E\u003Cp\u003EBelow is both command and output (there is no text copy from KOS terminal that i know of, except logging - i manually typed what is shown in terminal).\u003C/p\u003E\u003Cp\u003EDumping list of all present resources for desired part.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPRINT SHIP:PARTSTAGGED(\u0022FUSELAGE\u0022)[0]:RESOURCES.\u003Cbr\u003ELIST of 4 items:\u003Cbr\u003E[ 0]= RESOURCE(LiquidFuel,100,100\u003Cbr\u003E[ 1]= RESOURCE(Oxidizer,200,200\u003Cbr\u003E[ 2]= RESOURCE(MonoPropellant,300,300\u003Cbr\u003E[ 3]= RESOURCE(XenonGas,400,400\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(NB: missing closing parenthesis at end of line for item in printed list ?)\u003C/p\u003E\u003Cp\u003EDetail about desired resource.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPRINT SHIP:PARTSTAGGED(\u0022FUSELAGE\u0022)[0]:RESOURCE[0]:NAME.\u003Cbr\u003ELiquidFuel\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EShouldn\u0027t be there something like\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPRINT SHIP:PARTSTAGGED(\u0022FUSELAGE\u0022)[0]:RESOURCENAMED(\u0022LiquidFuel\u0022):AMOUNT.\u003Cbr\u003E100\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EOr better yet to avoid errors in script by checking first\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPRINT SHIP:PARTSTAGGED(\u0022FUSELAGE\u0022)[0]:RESOURCENAMED(\u0022LiquidFuel\u0022):EXISTS.\u003Cbr\u003ETrue\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAs far as i can tell, there is no such suffix. Until then, KOS script first has to list all resources and match indexes to names before acting on specific resurce by name.\u003C/p\u003E\u003Cp\u003EAlso where is option to lock specific resource from being used ?\u003C/p\u003E\u003Cp\u003EAll i know this was already mentioned and there were no direct solutions for this, except when using Diazo\u0027s Actions Everywhere which locks all resources at once.\u003C/p\u003E\u003Cp\u003EAnother idea : log to clipboard. That way player can dump all output and paste in browser, text editor etc...\u003C/p\u003E\u003Cp\u003EExample:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ELOG SHIP:PARTSTAGGED(\u0022FUSELAGE\u0022)[0]:RESOURCES TO CLIPBOARD.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-17T17:08:07Z\u0022 title=\u002202/17/2015 05:08  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 17, 2015\u003C/time\u003E by fatcargo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Parastie","CreatedById":136112,"CreatedDateTime":"2015-02-17T19:33:59Z","Content":"\n\u003Cp\u003EAfter much messing around, I finally got my docking script to work...well most of the time anyway.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/s1iQKripS84?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EThe code is an absolute mess and my vectors overshoot, as you can see in the video. Basically, I should calculate the needed thrust better (instead of just running a pulse until the desired speed is met). I have ideas of how to make this work better, but I\u0027m going to have to take a break for the next 3 months while RL gets in the way. Thank you Steven for helping me! Here\u0027s a \u003Ca href=\u0022http://pastebin.com/TLzWRTet\u0022 rel=\u0022external nofollow\u0022\u003Epastbin \u003C/a\u003Eto the code, I added lots of comments to help myself and anyone else who\u0027d look at what\u0027s going on. See you guys mid May! Can\u0027t wait to see how this has progressed by then!\u003C/p\u003E\n"},{"CreatedByName":"VentZer0","CreatedById":130750,"CreatedDateTime":"2015-02-17T22:55:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003Ecan you show what the error is, preferably from the output log?\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Eby the way, put the wait 0.01 before the LIST TARGETS IN contacts. You are getting the list in a different update from when you query its members\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/bl1CWLDLg6Q?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EOk I played around with the WAIT time before the LIST ... command. It seems that this actually has something to do with it, the longer it was the fewer the occurancies of the error. \u003C/p\u003E\u003Cp\u003EYou can see the error at the very end of the video. That is the only error message I get, nothing else just these two lines even when I don\u0027t have anything else printed in the terminal window. It is weird. \u003C/p\u003E\u003Cp\u003EIf you can tell me where to find the error log for it I will look there, or how to log the output somewhere.\u003C/p\u003E\n"}]}