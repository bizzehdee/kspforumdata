{"TopicId":83821,"ForumId":34,"TopicTitle":"[1.4.0] GCMonitor 1.4.8.0 - A graphic Memory monitor (Marsh 9th 2018)","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-09-04T20:27:33Z","PageNum":9,"Articles":[{"CreatedByName":"Blacks","CreatedById":145137,"CreatedDateTime":"2016-04-25T03:04:26Z","Content":"\n\u003Cp\u003E\ndigging in unity site seeking various information, my eye spot this\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://answers.unity3d.com/questions/64331/accurate-frames-per-second-count.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://answers.unity3d.com/questions/64331/accurate-frames-per-second-count.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\no7\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-04-25T07:58:36Z","Content":"\n\u003Cp\u003E\nIs there a problem with the current FPS display ?\u00A0 The one you linked is the one that does not go under 25fps that Squad was using.\n\u003C/p\u003E\n"},{"CreatedByName":"nerf_hurrdurr","CreatedById":132797,"CreatedDateTime":"2016-04-27T00:54:09Z","Content":"\n\u003Cp\u003E\nSarbian, I\u0027m having a weird issue, hoping you might be able to point me in the right direction.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve got two versions of KSP running on my computer at the moment. I can get your mod to work properly in 1.0.5, but not in 1.1. The issue is with the Memory Usage staying stuck at 0 MB.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.dropbox.com/s/qkwzxeazbrjkbel/Player.log?dl=0\u0022 rel=\u0022external nofollow\u0022\u003ELog file\u003C/a\u003E for reference.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n"},{"CreatedByName":"Blacks","CreatedById":145137,"CreatedDateTime":"2016-04-28T22:33:50Z","Content":"\n\u003Cp\u003E\nKSP build id = 01250 x64\u003Cbr\u003E\nGCMonitor v1.4.1.0 it seams to be broke in 1.1.1\u003Cbr\u003E\nIf Game start fresh GCM is fine BUT if is load any save (ALT \u002B F9 or Load from SpaceCenter) it will happen what you see in print screen\n\u003C/p\u003E\n\u003Cp\u003E\nlogs: \u003Ca href=\u0022https://drive.google.com/file/d/0B9RK2PFOUhe3S3RRWXpNbTFOZFU/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/file/d/0B9RK2PFOUhe3S3RRWXpNbTFOZFU/view?usp=sharing\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022tsYgQIN.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/tsYgQIN.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nUpdate: this issue it appear only if UI Scale: 90% \u0026amp; 80% \u0026gt; if i set to 100% GCM value are set correctly on screen \u0026amp; if Scale it goo biger 120 ... then value position is move to right soo UI Scale it influence position\n\u003C/p\u003E\n\u003Cp\u003E\nCheers\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-04-29T00:12:24Z\u0022 title=\u002204/29/2016 12:12  AM\u0022 data-short=\u00228 yr\u0022\u003EApril 29, 2016\u003C/time\u003E by Blacks\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-05-01T12:26:33Z","Content":"\n\u003Cp\u003E\n1.4.2\n\u003C/p\u003E\n\u003Cp\u003E\n- lowered the memory usage to 84B per frame with the counters displayed and about\u00A0900B\u00A0per frame with the window open. I don\u0027t think I can get it much lower.\n\u003C/p\u003E\n\u003Cp\u003E\n1.4.3\n\u003C/p\u003E\n\u003Cp\u003E\n- fix the app scale moving the counters\n\u003C/p\u003E\n\u003Cp\u003E\nDownload : \u003Ca href=\u0022https://ksp.sarbian.com/jenkins/job/GCMonitor/45/artifact/GCMonitor-1.4.3.0.zip\u0022 rel=\u0022external nofollow\u0022\u003EGCMonitor-1.4.3.0.zip\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-01T13:09:55Z\u0022 title=\u002205/01/2016 01:09  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 1, 2016\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MerlinsMaster","CreatedById":112079,"CreatedDateTime":"2016-05-04T02:30:29Z","Content":"\n\u003Cp\u003E\nI don\u0027t know if this has been asked already, but why are there two memory amounts on display? \u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-05-04T11:58:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222559888\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462329029\u0022 data-ipsquote-userid=\u0022112079\u0022 data-ipsquote-username=\u0022MerlinsMaster\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, MerlinsMaster said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI don\u0027t know if this has been asked already, but why are there two memory amounts on display? \u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIndeed it was \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/83821-110-gcmonitor-143-a-graphic-memory-monitor-may-1st/\u0026amp;do=embed\u0026amp;embedComment=2343184\u0026amp;embedDo=findComment\u0026amp;page=6#comment-2343184\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-05T17:46:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00221382676\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221409862453\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn \u200E04\u200E/\u200E09\u200E/\u200E2014 at 9:27 PM, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n1.4.2\n\u003C/p\u003E\n\u003Cp\u003E\n- lowered the memory usage to 84B per frame with the counters displayed and about\u00A0900B\u00A0per frame with the window open. I don\u0027t think I can get it much lower.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAre you sure you didn\u0027t mistype this comment or\u00A0change something drastic\u00A0in 1.4.3? \u00A0I\u0027m sitting in the main menu on a machine that only manages 20fps and with the graph open I see virtually no garbage being generated. \u00A0The difference between the window being open and closed is only 4-8 KB every second (with just this and my own MemGraph mod running there is approx 28KB of memory allocated per second). \u00A0This is much lower than I expected as 20fps * 900B = 18 KB for your window.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, if I show the fps overlay (and only the fps value, the memory ones are fine)\u00A0then this jumps a huge amount to between 700 and 1000 KB per second (and this is clearly visible in your\u00A0graph as well as mine). \u00A0I\u0027ve had a quick look at the code but I can\u0027t see anything obviously wrong. \u00A0I didn\u0027t dig into the ConcatFormat stuff because the graph window uses it too and doesn\u0027t suffer from the problem.\n\u003C/p\u003E\n\u003Cp\u003E\nEdt: Incidentally, I\u0027ve now released the MemGraph mod here:\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139128-112-memgraph-1002/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-09T11:44:40Z\u0022 title=\u002205/09/2016 11:44  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 9, 2016\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003Cbr\u003ELink to MemGraph forum thread instead of github\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-05-06T08:21:11Z","Content":"\n\u003Cp\u003E\nStrange. I may have left some debug code. I\u0027ll have a look on Monday when I am back\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-06T09:24:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222564551\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462522871\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n42 minutes ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nStrange. I may have left some debug code. I\u0027ll have a look on Monday when I am back\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEven stranger, when I was testing it further last night on my decent machine (i7-4770K, GTX560ti, Win64, limited to 60 fps)\u00A0I was seeing a large amount of memory allocated just having GCMonitor installed without ever having opened the window (and the mem/fps thing disabled in the settings). \u00A0E.g. with just my mod at the main menu I was seeing between 130 and 200 KB/s but when I installed GCMonitor as well the usage went up to ~1800 KB/s. \u00A0Again, this is much higher than the 900B and/or 84B per frame would imply and both causes of memory use were closed anyway.\n\u003C/p\u003E\n\u003Cp\u003E\nDo you happen to know if GC.GetTotalMemory(false) ever returns a smaller number than the previous time it was called when no collections have happened in the interval? \u00A0I presume not and I didn\u0027t see any when I had some logging in my mod. \u00A0Obviously, Mono doesn\u0027t return a very accurate number for total memory, it\u0027s always a multiple of 4KB for a start. \u00A0It looks like it is actually returning the total of all the pages that have anything used in them. \u00A0So, if you call it, allocate something small on the heap and then call it again, then it will often return the same value the second time.\n\u003C/p\u003E\n\u003Cp\u003E\nOne really \u0022interesting\u0022 thing I found was that the other vessels in a save do have a really big impact on memory allocation rate. \u00A0I have a save containing 4 reasonably large stations (2 of 300\u002B parts and 2 of 700\u002B) and flying one of these \u0022obviously\u0022 results in a considerable rate of memory allocation (e.g. anywhere from 8 to 18\u00A0MB/s) so I launched a Kerbal X to a ~200 km orbit\u00A0and deorbited the booster but the memory allocation rate was still at 5 MB/s. \u00A0I restarted the game a number of times and went back to the, now very simple, vessel and it was still doing 5 MB/s. \u00A0I then created a copy of the save and terminated the 4 stations and when I then flew the simple vessel the allocation rate was \u0022only\u0022 a couple of hundred KB/s.\n\u003C/p\u003E\n"},{"CreatedByName":"Corovaneer","CreatedById":26202,"CreatedDateTime":"2016-05-08T21:31:07Z","Content":"\n\u003Cp\u003E\nCan it plot frames per second too?\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-08T22:27:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222569685\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462743067\u0022 data-ipsquote-userid=\u002226202\u0022 data-ipsquote-username=\u0022Corovaneer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n53 minutes ago, Corovaneer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan it plot frames per second too?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf this is a question then, no, it doesn\u0027t plot fps on the graph but it does have the ability to show a little HUD with fps and/or 4 memory related numbers on screen. \u00A0Hit Mod-F to toggle the display or click the Config button in the main graph window and play with the options.\n\u003C/p\u003E\n\u003Cp\u003E\nIf it was more of a request then you may get a more favourable response (or any response at all) if you word it a little more politely... \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Corovaneer","CreatedById":26202,"CreatedDateTime":"2016-05-08T22:29:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222569778\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462746424\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf this is a question then, no, it doesn\u0027t plot fps on the graph but it does have the ability to show a little HUD with fps and/or 4 memory related numbers on screen. \u00A0Hit Mod-F to toggle the display or click the Config button in the main graph window and play with the options.\n\u003C/p\u003E\n\u003Cp\u003E\nIf it was more of a request then you may get a more favourable response (or any response at all) if you word it a little more politely... \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt was not a request, just a question about functionality. Thanks for the answer.\n\u003C/p\u003E\n"},{"CreatedByName":"ibanix","CreatedById":147140,"CreatedDateTime":"2016-05-11T22:57:51Z","Content":"\n\u003Cp\u003E\nDid the changes in 1.4.2 or 1.4.3 use things that are only possible in KSP 1.1.1 or KSP 1.1.2? Because GCMonitor 1.4.3 \u002B KSP 1.1.0 (still on it for mod/bug reasons), causes this:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n[EXC 18:54:56.863] MissingFieldException: Field \u0027.GameSettings.UI_SCALE_APPS\u0027 not found.\n\u003C/p\u003E\n\u003Cp\u003E\n[EXC 18:54:56.880] MissingFieldException: Field \u0027.GameSettings.UI_SCALE_APPS\u0027 not found.\n\u003C/p\u003E\n\u003Cp\u003E\n[EXC 18:54:56.897] MissingFieldException: Field \u0027.GameSettings.UI_SCALE_APPS\u0027 not found.\n\u003C/p\u003E\n\u003Cp\u003E\n[EXC 18:54:56.913] MissingFieldException: Field \u0027.GameSettings.UI_SCALE_APPS\u0027 not found.\n\u003C/p\u003E\n\u003Cp\u003E\n[EXC 18:54:56.931] MissingFieldException: Field \u0027.GameSettings.UI_SCALE_APPS\u0027 not found.\n\u003C/p\u003E\n\u003Cp\u003E\n[EXC 18:54:56.947] MissingFieldException: Field \u0027.GameSettings.UI_SCALE_APPS\u0027 not found.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPlus GCMonitor just not working (Alt-F1 doesn\u0027t work, monitor doesn\u0027t show anything, etc)\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-11T22:59:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222576173\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463007471\u0022 data-ipsquote-userid=\u0022147140\u0022 data-ipsquote-username=\u0022ibanix\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, ibanix said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDid the changes in 1.4.2 or 1.4.3 use things that are only possible in KSP 1.1.1 or KSP 1.1.2? Because GCMonitor 1.4.3 \u002B KSP 1.1.0 (still on it for mod/bug reasons), causes this:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, it accesses the stock UI scaling info that Squad added in 1.1.2.\n\u003C/p\u003E\n"},{"CreatedByName":"MalevolentNinja","CreatedById":150038,"CreatedDateTime":"2016-05-24T21:09:50Z","Content":"\n\u003Cp\u003E\nSince a portion of this whole GC issue rests on the shoulders of mod makers, is it possible to somehow identify which mods are creating the most garbage?\n\u003C/p\u003E\n\u003Cp\u003E\nWith 64 bit KSP we have now it\u0027s pretty easy to say \u0022oh I\u0027m gonna install ALL the mods I ever wanted!\u0022 only to run smack into huge GC stutters.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-24T21:54:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222599488\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464124190\u0022 data-ipsquote-userid=\u0022150038\u0022 data-ipsquote-username=\u0022MalevolentNinja\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n31 minutes ago, MalevolentNinja said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSince a portion of this whole GC issue rests on the shoulders of mod makers, is it possible to somehow identify which mods are creating the most garbage?\n\u003C/p\u003E\n\u003Cp\u003E\nWith 64 bit KSP we have now it\u0027s pretty easy to say \u0022oh I\u0027m gonna install ALL the mods I ever wanted!\u0022 only to run smack into huge GC stutters.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs far as I\u0027m aware, there are basically\u00A0two ways to do it. \u00A0Either you use this mod (or an alternative similar mod such as MemGraph, linked in my sig) and simply test with different combinations of mods to see which cause the highest rates of memory allocation, or you can run the game under the Unity profiler which should be able to give, at least, some indication as to which DLLs are responsible (though to get more accurate information would probably require rebuilding the mod DLLs including debug symbols).\n\u003C/p\u003E\n"},{"CreatedByName":"MalevolentNinja","CreatedById":150038,"CreatedDateTime":"2016-05-24T22:35:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222599545\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464126871\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 minutes ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs far as I\u0027m aware, there are basically\u00A0two ways to do it. \u00A0Either you use this mod (or an alternative similar mod such as MemGraph, linked in my sig) and simply test with different combinations of mods to see which cause the highest rates of memory allocation, or you can run the game under the Unity profiler which should be able to give, at least, some indication as to which DLLs are responsible (though to get more accurate information would probably require rebuilding the mod DLLs including debug symbols).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSure, I know I could add mods one by one to see if any were serious offenders. I guess I was attempting to politely ask for a feature request. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 Something like Windows task manager showing all the loaded mods and their memory allocation.\n\u003C/p\u003E\n\u003Cp\u003E\nIs it even possible to list this out in game on a per dll basis? Without recompiling everything to include debug symbols I mean.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-24T22:44:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222599614\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464129318\u0022 data-ipsquote-userid=\u0022150038\u0022 data-ipsquote-username=\u0022MalevolentNinja\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, MalevolentNinja said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs it even possible to list this out in game on a per dll basis? Without recompiling everything to include debug symbols I mean.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, even recompiling everything with debug symbols wouldn\u0027t enable a mod to do that. \u00A0You would need to be running a modified version (or at least a debug version) of mono and would probably need to make some significant changes to it before that would be practical (i.e. less hassle to implement than the trial and error method would be to use).\n\u003C/p\u003E\n"},{"CreatedByName":"MalevolentNinja","CreatedById":150038,"CreatedDateTime":"2016-05-25T02:36:02Z","Content":"\n\u003Cp\u003E\nThat\u0027s not the answer we were hoping for \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 But I do appreciate the expert info!\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-25T09:32:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222599983\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464143762\u0022 data-ipsquote-userid=\u0022150038\u0022 data-ipsquote-username=\u0022MalevolentNinja\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, MalevolentNinja said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat\u0027s not the answer we were hoping for \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 But I do appreciate the expert info!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nActually, on linux and, possibly, OSX (any version that uses a shared library version of libgc), it should be possible to write a mod that talks directly to libgc to get more detailed information. \u00A0This may require making some modifications to libgc (e.g. to add some sort of\u00A0hook that would allow code to be run every time any memory is allocated on the heap) but this would probably be rather easier than delving into the whole of Mono. \u00A0Of course, adding this sort of detailed memory allocation tracking would make the game run an awful lot slower and is basically what the Unity profiler does already so you may as well just use that.\n\u003C/p\u003E\n\u003Cp\u003E\nAnother complication is in deciding whose \u0022fault\u0022 a particular allocation is. \u00A0If a mod calls a KSP function that allocates a lot of memory on every frame then is it the fault of the mod or of the KSP function. \u00A0Some functions in KSP are not intended to be called on every frame so that would be the mod\u0027s fault and some functions are intended to be called often but still create far too much garbage which would be KSP\u0027s fault. \u00A0So, to be a really useful tool, it would probably need to record (a substantial part of) the call stack for every memory allocation rather than just the actual function doing the allocation or the function from the \u0022top-most\u0022 DLL involved. \u00A0This would cause the game to run even slower still...\n\u003C/p\u003E\n"},{"CreatedByName":"MalevolentNinja","CreatedById":150038,"CreatedDateTime":"2016-05-25T10:58:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222600266\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464168729\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nActually, on linux and, possibly, OSX (any version that uses a shared library version of libgc), it should be possible to write a mod that talks directly to libgc to get more detailed information. \u00A0This may require making some modifications to libgc (e.g. to add some sort of\u00A0hook that would allow code to be run every time any memory is allocated on the heap) but this would probably be rather easier than delving into the whole of Mono. \u00A0Of course, adding this sort of detailed memory allocation tracking would make the game run an awful lot slower and is basically what the Unity profiler does already so you may as well just use that.\n\u003C/p\u003E\n\u003Cp\u003E\nAnother complication is in deciding whose \u0022fault\u0022 a particular allocation is. \u00A0If a mod calls a KSP function that allocates a lot of memory on every frame then is it the fault of the mod or of the KSP function. \u00A0Some functions in KSP are not intended to be called on every frame so that would be the mod\u0027s fault and some functions are intended to be called often but still create far too much garbage which would be KSP\u0027s fault. \u00A0So, to be a really useful tool, it would probably need to record (a substantial part of) the call stack for every memory allocation rather than just the actual function doing the allocation or the function from the \u0022top-most\u0022 DLL involved. \u00A0This would cause the game to run even slower still...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGood info. As far as the compounding slow downs, that\u0027s not really an issue if you look at this as a debugging tool. You would only run it when needed.\n\u003C/p\u003E\n\u003Cp\u003E\nBut overall, it sounds like way more effort than just trying mods one by one to see if there are any serious offenders.\n\u003C/p\u003E\n"},{"CreatedByName":"MircoMars","CreatedById":61811,"CreatedDateTime":"2016-06-22T09:12:19Z","Content":"\n\u003Cp\u003E\nlove the tool, thanks for the effort. just one thing:\n\u003C/p\u003E\n\u003Cp\u003E\ncould you please make repositioning more comfortable.\u00A0I think the \u002B/- 1 pixel is handy and shouldn\u0027t be replaced, but either a slider or a box to punch in values would be great for rough placement.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-06-22T13:31:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222641299\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221466586739\u0022 data-ipsquote-userid=\u002261811\u0022 data-ipsquote-username=\u0022MircoMars\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, MircoMars said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nlove the tool, thanks for the effort. just one thing:\n\u003C/p\u003E\n\u003Cp\u003E\ncould you please make repositioning more comfortable.\u00A0I think the \u002B/- 1 pixel is handy and shouldn\u0027t be replaced, but either a slider or a box to punch in values would be great for rough placement.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTry with your other mouse button \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"MircoMars","CreatedById":61811,"CreatedDateTime":"2016-06-22T19:24:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222641557\u0022 data-ipsquote-contentid=\u002283821\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221466602268\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTry with your other mouse button\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nwill do, thanks\n\u003C/p\u003E\n"}]}