{"TopicId":50533,"ForumId":34,"TopicTitle":"[1.8.x-1.12.x] Module Manager 4.2.3 (July 03th 2023) - Fireworks season","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2013-10-25T13:01:36Z","PageNum":31,"Articles":[{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-05-05T06:33:27Z","Content":"\n\u003Cp\u003EI\u0027ve realized there\u0027s going to be an issue with the latest version of module manager.\u003C/p\u003E\u003Cp\u003EThe latest version does *not* change the order of modules when a patch runs against the part, unless adding new modules obviously. This is to ensure that adding a new patch won\u0027t break old saves.\u003C/p\u003E\u003Cp\u003EUnfortunately this means that any parts that have had their modules modded with the old version of MM, added to a ship, and then saved will break. \u003C/p\u003E\u003Cp\u003EThis is due to a problem / bug with KSP which has been reported, but I don\u0027t hold up high hopes for a fix since it\u0027s largely about mods. I\u0027m working on getting something in place to rectify the problem, but in the mean time you will probably want to back up any save files prior to upgrading.\u003C/p\u003E\u003Cp\u003EWill write a more detailed post about how to edit your saves by hand so they don\u0027t break some time later today.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-05T07:04:50Z\u0022 title=\u002205/05/2014 07:04  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 5, 2014\u003C/time\u003E by swamp_ig\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NavyFish","CreatedById":77044,"CreatedDateTime":"2014-05-05T07:52:32Z","Content":"\n\u003Cp\u003EI do believe my save is broken \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003EDespite that, thank god I checked this on my actual installation vice my dev install (where it was working fine). I\u0027m two clicks away from releasing the next version of my plugin, which was going to include 2.0.10. \u003C/p\u003E\u003Cp\u003EAny chance you could provide some quick guidance (doesn\u0027t have to be anything fancy or detailed) on recovering the save? \u003C/p\u003E\u003Cp\u003EAlso... what version of MM is stable for release with other plugins?\u003C/p\u003E\u003Cp\u003E*edit* Phew! I loaded my last quicksave and it hadn\u0027t been corrupted.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-05T07:58:25Z\u0022 title=\u002205/05/2014 07:58  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 5, 2014\u003C/time\u003E by NavyFish\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NavyFish","CreatedById":77044,"CreatedDateTime":"2014-05-05T08:14:24Z","Content":"\n\u003Cp\u003ETo clarify my question/problem a little bit, here is how I\u0027m using MM:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*]:HAS[@MODULE[ModuleDockingNode],!MODULE[ModuleDockingNodeNamed]]:FOR[DockingPortAlignment]\u003Cbr\u003E{\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = ModuleDockingNodeNamed\u003Cbr\u003E\t\tportName = default\u003Cbr\u003E\t\tinitialized = false\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis config file is bundled with my plugin (which uses a dll). Even using MM 2.0.1, things break, badly. I\u0027m getting a ton of null ref errors as well as some GUI warning that I\u0027m pushing more GUIClips than I\u0027m popping.\u003C/p\u003E\u003Cp\u003EInterestingly, on my development install, everything works perfectly fine. I have only 1 other mod (blizzy\u0027s toolbar) installed on that, so that\u0027s almost certainly the reason. But even on that build, when I created vessels without my plugin, saved and quit, added my plugin (which adds the above modules), the re-launched, everything worked fine. The existing vessels received the new module just fine.\u003C/p\u003E\u003Cp\u003EI\u0027m a bit at a loss here. Any suggestions would be wonderful.\u003C/p\u003E\u003Cp\u003E-Navy\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-05T08:24:41Z\u0022 title=\u002205/05/2014 08:24  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 5, 2014\u003C/time\u003E by NavyFish\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-05-05T08:54:53Z","Content":"\n\u003Cp\u003Ejinks : Ah, there was something for those but It got lost it seems.\u003C/p\u003E\u003Cp\u003Eswamp_ig : yeah, that module loading thing is annoying. I was unable to unlock my lander for its base yesterday after the port save was corrupted. \u003C/p\u003E\u003Cp\u003ESquad should fix the damn bug ...\u003C/p\u003E\u003Cp\u003ENavyFish : stick with the one ferram4 uses for now ( 2.0.5 ).\u003C/p\u003E\n"},{"CreatedByName":"NavyFish","CreatedById":77044,"CreatedDateTime":"2014-05-05T08:59:32Z","Content":"\n\u003Cp\u003EI can try that. Did just try it with 1.5.6, and had the same exact issue.\u003C/p\u003E\u003Cp\u003EAnother symptom is that I cannot undock once the save has been corrupted, seemingly the same as what you experienced.\u003C/p\u003E\n"},{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-05-05T09:03:13Z","Content":"\n\u003Cp\u003EAnother note: Once you have broken a save and resaved it it will stay broken. Downgrading won\u0027t help.\u003C/p\u003E\u003Cp\u003EKSP will just dump any modules it can\u0027t load, and they\u0027re then lost to the save forever.\u003C/p\u003E\u003Cp\u003EAnyhow, am working on a fix.\u003C/p\u003E\n"},{"CreatedByName":"NavyFish","CreatedById":77044,"CreatedDateTime":"2014-05-05T09:11:08Z","Content":"\n\u003Cp\u003EHadn\u0027t quicksaved. Just persistance.sfs was corrupt. Was able to quit, downgrade, relaunch, and hold f9, got my save back \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Or so it appears. When corrupted, I couldn\u0027t undock, with the \u0027recovered\u0027 file, I can. I really hope that\u0027s the case, because it\u0027s a career with lots of progress.\u003C/p\u003E\u003Cp\u003ETesting with 2.0.5 now..\u003C/p\u003E\u003Cp\u003E*edit* 2.0.5 doesn\u0027t work. So this probably has something to do with the way I\u0027m using MM, no?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-05T10:10:32Z\u0022 title=\u002205/05/2014 10:10  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 5, 2014\u003C/time\u003E by NavyFish\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NavyFish","CreatedById":77044,"CreatedDateTime":"2014-05-05T09:39:09Z","Content":"\n\u003Cp\u003EMy log file (for the corrupted save) contains the following immediately upon transition to the flight scene:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[WRN 02:29:23.031] PartModule is null.\u003Cbr\u003E[ERR 02:29:23.720] Cannot find fx group of that name for decoupler\u003Cbr\u003E[ERR 02:29:23.762] Cannot load Module ModuleDockingNode because the associated module on the part doesn\u0027t match the saved module\u003Cbr\u003E[WRN 02:29:23.762] PartModule is null.\u003Cbr\u003E[ERR 02:29:23.763] Cannot load Module ModuleTweakableDockingNode because the associated module on the part doesn\u0027t match the saved module\u003Cbr\u003E[WRN 02:29:23.764] PartModule is null.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo it looks like part modules have been removed. I suspect this is what\u0027s causing all the NREs and inability to undock. Hrm.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-05T10:05:57Z\u0022 title=\u002205/05/2014 10:05  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 5, 2014\u003C/time\u003E by NavyFish\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"psyper","CreatedById":90641,"CreatedDateTime":"2014-05-05T11:26:17Z","Content":"\n\u003Cp\u003EI have a modulemanager script which replaced kethane with water to produce oxidizer and it had (somehow) worked in the older version of MM but now doesn\u0027t when I upgraded.\u003C/p\u003E\u003Cp\u003EThe code for the 2m converter was:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[kethane_2m_converter]:HAS[@MODULE[KethaneConverter]:HAS[@InputRates[*]:HAS[#Kethane], @OutputRatios[*]:HAS[#Oxidizer]]]\u003Cbr\u003E{\u003Cbr\u003E   @MODULE[KethaneConverter]\u003Cbr\u003E   {\u003Cbr\u003E   }\u003Cbr\u003E   @MODULE[KethaneConverter]\u003Cbr\u003E   {\u003Cbr\u003E\t@InputRates\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@Kethane = 0\u003Cbr\u003E\t\t\tWater = 8.25\u003Cbr\u003E\t\t}\u003Cbr\u003E   }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAs you can see its totally wrong but it worked - I\u0027m pretty sure it just ignored the HAS operators in the first line but it ignored the first KethaneConverter module which is the liquid fuel one and zero\u0027ed the kethane and added water to the oxidizer. I could probably just turn the first line in to \u0022@PART[kethane_2m_converter]:HAS[@MODULE[KethaneConverter]]\u0022 and it\u0027ll still probably work but \u0027if it aint broke don\u0027t fix it\u0027 came to mind and I left it!!\u003C/p\u003E\u003Cp\u003ENow running MM 2.1.0 it come up with a space error so I correct it to this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[kethane_2m_converter]:HAS[@MODULE[KethaneConverter]:HAS[@InputRates[*]:HAS[#Kethane],@OutputRatios[*]:HAS[#Oxidizer]]]\u003Cbr\u003E{\u003Cbr\u003E   @MODULE[KethaneConverter]\u003Cbr\u003E   {\u003Cbr\u003E   }\u003Cbr\u003E   @MODULE[KethaneConverter]\u003Cbr\u003E   {\u003Cbr\u003E\t@InputRates\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@Kethane = 0\u003Cbr\u003E\t\t\tWater = 8.25\u003Cbr\u003E\t\t}\u003Cbr\u003E   }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhich doesn\u0027t error but now doesn\u0027t touch the part at all. I tried removing the first @MODULE[KethaneConverter] and just had the first one which should \u0027in theory\u0027 work but it doesn\u0027t. Finally doing this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[kethane_2m_converter]:HAS[@MODULE[KethaneConverter]]\u003Cbr\u003E{\u003Cbr\u003E   @MODULE[KethaneConverter]\u003Cbr\u003E   {\u003Cbr\u003E\t@InputRates\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@Kethane = 0\u003Cbr\u003E\t\t\tWater = 8.25\u003Cbr\u003E\t\t}\u003Cbr\u003E   }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EJust changes the liquid fuel but not the oxidizer. No matter what combination of the above scripts I use I can\u0027t get it to recognise the 2nd kethane converter entry!\u003C/p\u003E\u003Cp\u003EThe part page is:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//Kethane Pack Asset\u003Cbr\u003E\u003Cbr\u003EPART\u003Cbr\u003E{\u003Cbr\u003E// --- general parameters ---\u003Cbr\u003Ename = kethane_2m_converter\u003Cbr\u003Emodule = Part\u003Cbr\u003Eauthor = Keptin\u003Cbr\u003E\u003Cbr\u003E// --- asset parameters ---\u003Cbr\u003Emesh = model.mu\u003Cbr\u003ErescaleFactor = 1.15\u003Cbr\u003E\u003Cbr\u003Enode_stack_top = 0.0, .308, 0.0, 0.0, 1.0, 0.0, 2\u003Cbr\u003Enode_stack_bottom = 0.0, -.310, 0.0, 0.0, 1.0, 0.0, 2\u003Cbr\u003E\u003Cbr\u003Ecost = 3500\u003Cbr\u003Ecategory = Utility\u003Cbr\u003Esubcategory = 0\u003Cbr\u003Etitle = KE-C190 Heavy Converter Unit\u003Cbr\u003Emanufacturer = Organization of Kethane Equipment Producers\u003Cbr\u003Edescription = The KE-C190 features deployable heat sinks to aid in keeping the unit cool during operation. When it\u0027s not overheating, this heavy unit can rapidly and efficiently process Kethane into other fuels.\u003Cbr\u003E\u003Cbr\u003ETechRequired = veryHeavyRocketry\u003Cbr\u003EentryCost = 50\u003Cbr\u003E\u003Cbr\u003EattachRules = 1,1,1,1,0\u003Cbr\u003E\u003Cbr\u003Emass = 2\u003Cbr\u003EdragModelType = default\u003Cbr\u003Emaximum_drag = 0.2\u003Cbr\u003Eminimum_drag = 0.3\u003Cbr\u003EangularDrag = 2\u003Cbr\u003EcrashTolerance = 6\u003Cbr\u003EbreakingForce = 200\u003Cbr\u003EbreakingTorque = 200\u003Cbr\u003EmaxTemp = 5200\u003Cbr\u003EfuelCrossFeed = True\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = HeatSinkAnimator\u003Cbr\u003E    HeatAnimation = M2_converter_EmissiveAnimation\u003Cbr\u003E    OpenAnimation = M2_converter_converting\u003Cbr\u003E    OpenTemperature = 300\u003Cbr\u003E    MaxTemperature = 3600\u003Cbr\u003E    InternalDissipation = 0.04\u003Cbr\u003E    HeatSinkDissipation = 0.28\u003Cbr\u003E    PressureDissipation = 0.14\u003Cbr\u003E    AirSpeedDissipation = 0.007\u003Cbr\u003E    RadiatorNormal = 0, 0, 1\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 600\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 6.75\u003Cbr\u003E        ElectricCharge = 12\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        LiquidFuel = 1.03\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 800\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 8.25\u003Cbr\u003E        ElectricCharge = 8\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        Oxidizer = 0.99\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 1200\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 3\u003Cbr\u003E        ElectricCharge = 10\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        MonoPropellant = 0.85\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 300\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 2\u003Cbr\u003E        ElectricCharge = 8\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        XenonGas = 0.25\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewhat am I doing wrong? Many thanks in advance \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-05-05T12:10:29Z","Content":"\n\u003Cp\u003ETry with \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[kethane_2m_converter]\u003Cbr\u003E{\u003Cbr\u003E   @MODULE[KethaneConverter],*\u003Cbr\u003E   {\u003Cbr\u003E\t@InputRates\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@Kethane = 0\u003Cbr\u003E\t\t\tWater = 8.25\u003Cbr\u003E\t\t}\u003Cbr\u003E   }\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe HAS in the first line is not really useful since you name the part.\u003C/p\u003E\n"},{"CreatedByName":"psyper","CreatedById":90641,"CreatedDateTime":"2014-05-05T12:41:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003ETry with \u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[kethane_2m_converter]\u003Cbr\u003E{\u003Cbr\u003E   @MODULE[KethaneConverter],*\u003Cbr\u003E   {\u003Cbr\u003E\t@InputRates\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@Kethane = 0\u003Cbr\u003E\t\t\tWater = 8.25\u003Cbr\u003E\t\t}\u003Cbr\u003E   }\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe HAS in the first line is not really useful since you name the part.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the reply but that removes the kethane on all the kethaneconverter modules and adds water to them \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-05-05T12:52:10Z","Content":"\n\u003Cp\u003Eok, I don\u0027t understand what you want your final part to look like then\u003C/p\u003E\n"},{"CreatedByName":"psyper","CreatedById":90641,"CreatedDateTime":"2014-05-05T12:56:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003Eok, I don\u0027t understand what you want your final part to look like then\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry I didn\u0027t make it clear. I want the part file to ideally turn from this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 600\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 6.75\u003Cbr\u003E        ElectricCharge = 12\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        LiquidFuel = 1.03\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 800\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 8.25\u003Cbr\u003E        ElectricCharge = 8\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        Oxidizer = 0.99\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 1200\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 3\u003Cbr\u003E        ElectricCharge = 10\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        MonoPropellant = 0.85\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 300\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 2\u003Cbr\u003E        ElectricCharge = 8\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        XenonGas = 0.25\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eto this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 600\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 6.75\u003Cbr\u003E        ElectricCharge = 12\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        LiquidFuel = 1.03\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 800\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Water = 8.25\u003Cbr\u003E        ElectricCharge = 8\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        Oxidizer = 0.99\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 1200\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 3\u003Cbr\u003E        ElectricCharge = 10\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        MonoPropellant = 0.85\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E    name = KethaneConverter\u003Cbr\u003E    HeatProduction = 300\u003Cbr\u003E    InputRates\u003Cbr\u003E    {\u003Cbr\u003E        Kethane = 2\u003Cbr\u003E        ElectricCharge = 8\u003Cbr\u003E    }\u003Cbr\u003E    OutputRatios\u003Cbr\u003E    {\u003Cbr\u003E        XenonGas = 0.25\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBasically changing the oxidizer input fuel from kethane to water.\u003C/p\u003E\n"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2014-05-05T12:59:33Z","Content":"\n\u003Cp\u003EHmm.. would something like directing the change at \u0027a module that has an output ratio of oxidiser\u0027 instead of the actual part work? Then you could change the input ratio to use water etc..\u003C/p\u003E\u003Cp\u003ESomething like:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[kethane_2m_converter]\u003Cbr\u003E{\u003Cbr\u003E   @MODULE[KethaneConverter]:HAS[@OutputRatio[Oxidizer]]\u003Cbr\u003E   {\u003Cbr\u003E\t@InputRates\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@Kethane = 0\u003Cbr\u003E\t\t\tWater = 8.25\u003Cbr\u003E\t\t}\u003Cbr\u003E   }\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t know all MM syntax rules so you\u0027ll need some symbol in front of OutputRatio, but I don\u0027t know which. @ seems logical.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-05T13:05:06Z\u0022 title=\u002205/05/2014 01:05  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 5, 2014\u003C/time\u003E by ObsessedWithKSP\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"psyper","CreatedById":90641,"CreatedDateTime":"2014-05-05T13:32:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ObsessedWithKSP\u0022 data-cite=\u0022ObsessedWithKSP\u0022\u003E\u003Cdiv\u003EHmm.. would something like directing the change at \u0027a module that has an output ratio of oxidiser\u0027 instead of the actual part work? Then you could change the input ratio to use water etc..\u003Cp\u003ESomething like:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[kethane_2m_converter]\u003Cbr\u003E{\u003Cbr\u003E   @MODULE[KethaneConverter]:HAS[@OutputRatio[Oxidizer]]\u003Cbr\u003E   {\u003Cbr\u003E\t@InputRates\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@Kethane = 0\u003Cbr\u003E\t\t\tWater = 8.25\u003Cbr\u003E\t\t}\u003Cbr\u003E   }\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t know all MM syntax rules so you\u0027ll need some symbol in front of OutputRatio, but I don\u0027t know which. @ seems logical.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope sorry that didn\u0027t work although I think you\u0027re on to something in addressing the individual module elements somehow - ideally I want this in place so if I create a different MM script I wont need to worry about which order the modules are in!\u003C/p\u003E\u003Cp\u003EFrom your idea I also tried along the lines of:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[kethane_2m_converter]\u003Cbr\u003E{\u003Cbr\u003E   @MODULE[KethaneConverter]:HAS[@OutputRatio[*]:HAS[#Oxidizer]]\u003Cbr\u003E   {\u003Cbr\u003E\t@InputRates\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t@Kethane = 0\u003Cbr\u003E\t\t\tWater = 8.25\u003Cbr\u003E\t\t}\u003Cbr\u003E   }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ebut that didn\u0027t work either \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Mecripp","CreatedById":181994,"CreatedDateTime":"2014-05-05T15:02:16Z","Content":"\n\u003Cp\u003EI\u0027m guessing you did add water to Kethane Resource list and how are you testing it ?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-05T15:08:03Z\u0022 title=\u002205/05/2014 03:08  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 5, 2014\u003C/time\u003E by Mecripp2\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"psyper","CreatedById":90641,"CreatedDateTime":"2014-05-05T15:37:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MeCripp\u0022 data-cite=\u0022MeCripp\u0022\u003E\u003Cdiv\u003EI\u0027m guessing you did add water to Kethane Resource list and how are you testing it ?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyep. It worked in previous version of MM but now its not changing it and the changes I make to the cfg file is either adding water to liquid fuel or to all the modules. I test it by changing the cfg file, reloading ksp, bringing up the debug and checking the relevant parts - I know its having an effect as these do change but not correctly.\u003C/p\u003E\n"},{"CreatedByName":"NavyFish","CreatedById":77044,"CreatedDateTime":"2014-05-05T15:38:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swamp_ig\u0022 data-cite=\u0022swamp_ig\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnyhow, am working on a fix.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESorry to keep harping on this particular issue. Any chance you could provide us with an estimated timeline for this fix? I ask because I\u0027m about to release a new version of my plugin, but seeing as it currently corrupts save files, I may need to remove the culprit feature. If you\u0027re getting close to a solution, however, I\u0027ll wait to release my update with the hope of using your fix.\u003C/p\u003E\u003Cp\u003EIn another vein, can you think of any work-arounds for this issue? As this is my first time using MM in my plugin, I\u0027m not completely certain that it\u0027s not something I\u0027m just doing wrong. Other mods that use MM have been pretty plug-and-play from a user\u0027s standpoint, so what makes mine different? \u003C/p\u003E\u003Cp\u003EAt this time, I\u0027m currently adding a custom module to all parts with a ModuleDockingPort. That\u0027s it. I reference that module several times from my DLL.\u003C/p\u003E\u003Cp\u003EIf I can use MM to force the new module to be added at the end of each parts\u0027 list of modules/nodes, perhaps it would work. Although, if I understand the bug correctly, if someone else were to add modules after my custom module, save, then uninstall my plugin, their save would break. Is that correct?\u003C/p\u003E\u003Cp\u003EThanks for your time, I know how precious it can be.\u003C/p\u003E\u003Cp\u003ENavy\u003C/p\u003E\n"},{"CreatedByName":"jinks","CreatedById":69693,"CreatedDateTime":"2014-05-05T18:01:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swamp_ig\u0022 data-cite=\u0022swamp_ig\u0022\u003E\u003Cdiv\u003EI\u0027ve realized there\u0027s going to be an issue with the latest version of module manager.\u003Cp\u003EThe latest version does *not* change the order of modules when a patch runs against the part, unless adding new modules obviously. This is to ensure that adding a new patch won\u0027t break old saves.\u003C/p\u003E\u003Cp\u003EUnfortunately this means that any parts that have had their modules modded with the old version of MM, added to a ship, and then saved will break. \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan you give a bit more detail on this? \u003C/p\u003E\u003Cp\u003EI don\u0027t really understand what the issue is and if/how this affects me as a user. Why would not reordering modules (I assume you mean MODULE{} sections on parts) break my save? \u003C/p\u003E\u003Cp\u003EI have mostly MM configs which add MODULE sections, maybe a few @MODULE which modify specific lines. What should I expect to break and how will it manifest itself?\u003C/p\u003E\n"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2014-05-05T18:14:10Z","Content":"\n\u003Cp\u003EAs I understand it, the game loads a part from a cfg file, right? In that file, the various MODULEs are in a certain order. In the persistent.sfs, it includes details on ships, including the MODULEs its parts contain. If the order of those differ, the game thinks it\u0027s a different part or something and refuses to load the sfs because it contains invalid parts (I think). The problem comes when you uninstall a mod/delete a MM cfg that added a MODULE or otherwise changed existing MODULEs on a part because now, the parts cfg contains different information to what the sfs file says it should. \u003C/p\u003E\u003Cp\u003EThis is just my personal speculation though, what might actually be happening could be different.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-05T18:18:17Z\u0022 title=\u002205/05/2014 06:18  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 5, 2014\u003C/time\u003E by ObsessedWithKSP\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-05-05T18:56:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ObsessedWithKSP\u0022 data-cite=\u0022ObsessedWithKSP\u0022\u003E\u003Cdiv\u003EAs I understand it, the game loads a part from a cfg file, right? In that file, the various MODULEs are in a certain order. In the persistent.sfs, it includes details on ships, including the MODULEs its parts contain. If the order of those differ, the game thinks it\u0027s a different part or something and refuses to load the sfs because it contains invalid parts (I think). The problem comes when you uninstall a mod/delete a MM cfg that added a MODULE or otherwise changed existing MODULEs on a part because now, the parts cfg contains different information to what the sfs file says it should. \u003Cp\u003EThis is just my personal speculation though, what might actually be happening could be different.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, it\u0027ll load the part but you can have things happen where modules just dont work properly to the ship not coming off rails properly. That last one is really bad. Physics might not load for it. or it will seem to explode, except it doesn\u0027t except that it doesnt matter if it really exploded because you cant interact with it. Or time might totally freeze. And no interaction means you cant recover crew from it or undock ships from it.\u003C/p\u003E\u003Cp\u003Ealso, if a part is truly invalid, affected craft in the sfs file wont load but everything else does. the world and unaffected ships load.\u003C/p\u003E\n"},{"CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2014-05-05T19:06:43Z","Content":"\n\u003Cp\u003EThen I was mostly wrong. But thank you for correcting me, TIL...\u003C/p\u003E\n"},{"CreatedByName":"NavyFish","CreatedById":77044,"CreatedDateTime":"2014-05-05T19:55:28Z","Content":"\n\u003Cp\u003EThere\u0027s more going on, though. When I add my config file to a working install, it immediately breaks the save. I assume this is because MM is not adding my config to the end of the part\u0027s module list.\u003C/p\u003E\u003Cp\u003EI have tweakable everything installed, which adds a module to docking ports as well. By checking the log file, I\u0027ve confirmed that my config is loaded prior to the twekable module, which loads during the :FINAL block. Thus when an sfs compares its modules to the loaded proto configs, it finds an extra module (mine), where the tweakbale module used to be, and viola, the save breaks.\u003C/p\u003E\u003Cp\u003EAt the very least, I\u0027d like to be able to force my module to load last, but that\u0027s a Band-Aid and not a solution.\u003C/p\u003E\u003Cp\u003EI think the important question is whether or not sfs files can be modified at runtime. If so, then a solution would be to scan the persistence/quicksave sfs just prior to it being loaded and reconfigure all modules to match the proto part. I\u0027m not certain, but that might do the trick.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-05-05T20:25:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NavyFish\u0022 data-cite=\u0022NavyFish\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI think the important question is whether or not sfs files can be modified at runtime. If so, then a solution would be to scan the persistence/quicksave sfs just prior to it being loaded and reconfigure all modules to match the proto part. I\u0027m not certain, but that might do the trick.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eswamp_ig is actually looking into that.\u003C/p\u003E\n"},{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-05-05T20:39:14Z","Content":"\n\u003Cp\u003EOk here\u0027s the rundown.\u003C/p\u003E\u003Cp\u003EWhen you define a part you have something like:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPART\u003Cbr\u003E{\u003Cbr\u003E\tname = myPart\u003Cbr\u003E\t// .. some other stuff\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = module1\u003Cbr\u003E\t\t// .. more stuff\u003Cbr\u003E\t}\u003Cbr\u003E\tMODULE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = module2\u003Cbr\u003E\t\t// .. yet more stuff\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENow if you were to go launch a ship that used that part, the part would save for the modules list \u0022module1\u0022, \u0022module2\u0022 IN THAT ORDER\u003C/p\u003E\u003Cp\u003ESo if you were to produce a patch such as:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[myPart]\u003Cbr\u003E{\u003Cbr\u003E\t@MODULE[module1]\u003Cbr\u003E\t{\u003Cbr\u003E\t\taddedValue = added\u003Cbr\u003E\t}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ethen the previous version of MM would grab module1, edit it, and put it \u003Cem\u003Eat the end\u003C/em\u003E so the order you would end up with would be module2, module1. \u003C/p\u003E\u003Cp\u003EIf you\u0027d had any saves from before this patch, they\u0027d now be dead. This means you can never patch a defined part, which kinda defeats the purpose of having MM in the first place.\u003C/p\u003E\u003Cp\u003EMy fix to MM doesn\u0027t mess with the original order, so if it\u0027s defined originally as module1, module2, then it stays in the same order therefore NOT breaking saves from before the patch.\u003C/p\u003E\u003Cp\u003EUnfortunately, if you\u0027d created a save gave with the old MM, and then upgraded, then the modded saves are saves like module2, module1, which will break. Although technically this really is a bug in KSP, and probably really a bug in the previous version of MM, we appreciate that it\u0027s not a desirable thing to break saves\u003C/p\u003E\u003Cp\u003ECurrently I\u0027m working on a fix to this problem which will remove the sensitivity to order permanently. This is a Good Thing because there\u0027s occasions where you want to change the order of things in your parts. As for the time frame... it\u0027s a high priority that\u0027s all I can say \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-05T20:52:17Z\u0022 title=\u002205/05/2014 08:52  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 5, 2014\u003C/time\u003E by swamp_ig\u003C/strong\u003E\n\u003C/span\u003E\n"}]}