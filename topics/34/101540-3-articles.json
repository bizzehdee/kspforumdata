{"TopicId":101540,"ForumId":34,"TopicTitle":"[1.4.x] TweakScale v2.3.12(Apr-16)","CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-03-08T17:31:16Z","PageNum":3,"Articles":[{"CreatedByName":"futrtrubl","CreatedById":77310,"CreatedDateTime":"2015-03-20T23:27:36Z","Content":"\u003E \n\u003E Anyone else seeing there parts revert to their original scale when they scene change?\n\nTo answer that look 3 posts before yours."},{"CreatedByName":"FlyMeToTheMinmus","CreatedById":133119,"CreatedDateTime":"2015-03-22T14:53:36Z","Content":"So is there any way to fix this rescaling bug, because the craft I have kind of depends on a rescaled root part?"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-03-22T15:01:38Z","Content":"\u003E \n\u003E So is there any way to fix this rescaling bug, because the craft I have kind of depends on a rescaled root part?\n\nThere is no known fix. Why does the craft depend on the scaled root part? You know there is some freedom for choosing which part is the root?"},{"CreatedByName":"redbeard","CreatedById":130547,"CreatedDateTime":"2015-03-23T17:55:39Z","Content":"Just chiming in to say I\u0027ve been experiencing the rescaled parts bug too. It\u0027s happening to parts that are NOT the root part, for me specifically with parachutes. For my booster stages, for example, instead of having 30 parachutes, I\u0027d instead set four parachutes scaled to 2x or 2.5x to save on part number count. They show up scaled properly in the VAB, but as soon as I launch, they revert to their original size (visually, at least). I haven\u0027t tested to see if it is just a visual reversion, or if the scaled properties are getting reverted too. When I go back to the VAB, the parts are no longer scaled there either, and right clicking on them shows them set to 1x size. There\u0027s no errors or warnings in KSP.log when I launch that could indicate what\u0027s causing it to happen."},{"CreatedByName":"futrtrubl","CreatedById":77310,"CreatedDateTime":"2015-03-23T18:42:40Z","Content":"\u003E \n\u003E Just chiming in to say I\u0027ve been experiencing the rescaled parts bug too. It\u0027s happening to parts that are NOT the root part, for me specifically with parachutes. For my booster stages, for example, instead of having 30 parachutes, I\u0027d instead set four parachutes scaled to 2x or 2.5x to save on part number count. They show up scaled properly in the VAB, but as soon as I launch, they revert to their original size (visually, at least). I haven\u0027t tested to see if it is just a visual reversion, or if the scaled properties are getting reverted too. When I go back to the VAB, the parts are no longer scaled there either, and right clicking on them shows them set to 1x size. There\u0027s no errors or warnings in KSP.log when I launch that could indicate what\u0027s causing it to happen.\n\nDo you have realchutes installed?"},{"CreatedByName":"redbeard","CreatedById":130547,"CreatedDateTime":"2015-03-25T05:43:32Z","Content":"\u003E \n\u003E Do you have realchutes installed?\n\nNope. I went from it working in 1.50, to upgrading to 1.52.1, and this started happening. I also installed the Stock Bug Fix dll pack at the same time, but I tried disabling the only parachute related dll already and the same thing is still happening."},{"CreatedByName":"Faster","CreatedById":116429,"CreatedDateTime":"2015-03-25T21:31:47Z","Content":"\u003E \n\u003E Just chiming in to say I\u0027ve been experiencing the rescaled parts bug too. It\u0027s happening to parts that are NOT the root part\n\nDitto, just observed with satellites that have a Stayputnik as the root and two small, inline reaction wheels (amongst other parts). The wheels were scaled to 0.625 in the VAB. On launch, they\u0027re back to 100%."},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-03-25T22:39:59Z","Content":"So far, I can\u0027t reproduce any reverting other than the root part. What are you doing differently? And warnings or exceptions in the log?\n\n@slenth: took a look at your log, there are lots of exceptions. If an exception occurs, the following code is skipped until someone catches and handles it. This can lead to reverted parts because the TweakScale module never gets called.\n\n**Edited \u003Ctime datetime=\u00222015-03-25T22:44:11Z\u0022 title=\u002203/25/2015 10:44  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 25, 2015\u003C/time\u003E by pellinor**"},{"CreatedByName":"Faster","CreatedById":116429,"CreatedDateTime":"2015-03-25T23:04:45Z","Content":"\u003E \n\u003E the following code is skipped until someone catches and handles it. This can lead to reverted parts because the TweakScale module never gets called.\n\nWow, Squad must have done something really nuts to change exception propagation that significantly, must make it impossible to stay sane as a mod developer. \n\nAnyway, plenty of exceptions in my log as well--always have been, presume there always will be, so there\u0027s just no cure then--too bad, great mod! Thanks for taking the time to respond."},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-03-25T23:35:04Z","Content":"\u003E \n\u003E Wow, Squad must have done something really nuts to change exception propagation that significantly, must make it impossible to stay sane as a mod developer. \n\u003E Anyway, plenty of exceptions in my log as well--always have been, presume there always will be, so there\u0027s just no cure then--too bad, great mod! Thanks for taking the time to respond.\n\nMy understanding was that exceptions generally work that way. And I\u0027ve seen things (probably in some older KSP version) like some problem during vessel load making it skip half the load. So all parts coming after the first problem were just not loaded at all. \n\nComing from c\u002B\u002B, I actually find exceptions extremely comfortable. If a serious problem occurs that would otherwise make the problem crash, it is written to the log, together with a call stack. And afterwards, the program finds back into a stable working state (skipping stuff that is probably not safe to execute)."},{"CreatedByName":"TK421d","CreatedById":104476,"CreatedDateTime":"2015-03-26T19:37:11Z","Content":"just started playing agian, and came here for this exact issue.\n\nwhile im sad its happening, at least im happy that the last dozen or so posts have been adressing my issue and its being looked at...\n\nanyway, keep up the good work!"},{"CreatedByName":"Rothank","CreatedById":114316,"CreatedDateTime":"2015-03-29T13:14:51Z","Content":"Got a small problem with % scaling. I\u0027m playing heavilly modded Realism Overhaul \u002B RSS \u002B RP-0. Everytime I try to upscale a part it instantly jumps from 100% size to 5000% size with no \u0022nodes\u0022 between. I can, of course, use the slider, but in the range of 100%-5000% it\u0027s terribly innacurate and the smallest upscale i can do is ~450% from the stock part size. HAs anybody else encountered this problem? Has it been solved?"},{"CreatedByName":"Cyst","CreatedById":74149,"CreatedDateTime":"2015-03-30T03:27:06Z","Content":"I think wings do not generate more lift. At least they don\u0027t for me. Tried to build something slightly bigger using upscaled parts; fuel tanks work fine, engines work (though their effects aren\u0027t scaled), air intakes can \u0022store\u0022 more air but take in just as much, and yeah, wings\u0027 lift does not increase with size. I\u0027ve tried testing the swept wings, 400% the size, craft barely flies -just like with the original sized one. Considering how all my crafts using rescaled wings tend to fail, whereas the majority of those using non-rescaled parts are at least capable of taking off, I\u0027m rather convinced it does not work."},{"CreatedByName":"DaniDE","CreatedById":130484,"CreatedDateTime":"2015-04-01T02:48:20Z","Content":"\u003E \n\u003E Got a small problem with % scaling. I\u0027m playing heavilly modded Realism Overhaul \u002B RSS \u002B RP-0. Everytime I try to upscale a part it instantly jumps from 100% size to 5000% size with no \u0022nodes\u0022 between. I can, of course, use the slider, but in the range of 100%-5000% it\u0027s terribly innacurate and the smallest upscale i can do is ~450% from the stock part size. HAs anybody else encountered this problem? Has it been solved?\n\n I dont use these mods myself, but this sounds like these mods come with their own tweakscale config file, where the tweaking behavior is defined, since I cant find configs for these in the tweakscale folder. Since I dont have these mods myself I cannot have a look and give you a specific hint, but I suggest you check what is defined in there."},{"CreatedByName":"Yemo","CreatedById":114412,"CreatedDateTime":"2015-04-03T19:28:39Z","Content":"I m wondering if the procedural parts - tweakscale bug is related to those problems.\n\nBasically you take a procedural structural element (or fuel tank or whatever) and attach a part to it, for example the stackQuadCoupler (from one 1.25m node on top to four 1.25m nodes at the bottom). Then you TweakScale the stackQuadCoupler to 2.5m, save the vessel and reload the vessel.\n\nWhat happens now is, that the stackQuadCoupler clipps in the procedural part, as if the original not tweakscaled size was used for positioning the part and only after that the model is upscaled.\n\nIf the stackQuadCoupler is downscaled to 0.625m, it leaves a large gap, instead of clipping into the procedural part.\n\nNow it gets interesting: When you use the adapterLargeSmallQuad (from one 2.5m node to four 1.25m nodes) instead of the stackQuadCoupler, that issue does not exist. You can rescale the adapterLargeSmallQuad as much as you want.\n\n**The main difference between parts which show that problem and parts which do not show the problem is, that the problematic parts have an offset node\\_stack\\_top, while the unproblematic parts do not have an offset node\\_stack\\_top definition.**\n\nEg\n\nstackQuadCoupler: node\\_stack\\_top = 0.0, 0.5, 0.0, 0.0, 1.0, 0.0, 1\n\nadapterLargeSmallQuad: node\\_stack\\_top = 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 2\n\nNotice the 0.5 from the stackQuadCoupler. If you change that into 0.0, the node is within the part model, but the attachment bug does not appear.\n\nThat is also the case with all other parts. Those with such an offset have the problem (like basicJetEngine) and those without offset do not show the issue.\n\nAlso notice, that the problem only exists for the node with which you attach the tweakscaled part to a procedural part (which is usually the node\\_stack\\_top).\n\nThus attaching procedural parts to tweakscaled parts with offset nodes is no problem."},{"CreatedByName":"allmhuran","CreatedById":66124,"CreatedDateTime":"2015-04-07T12:07:22Z","Content":"Does tweakscale change the SAS force of parts that have SAS? If so, any idea how that\u0027s calculated? For example, will upscaled probes get much more SAS force (since I believe mass is calculated from the vastly increased volume...), or an increase in SAS force that increases linearly with the scaling? Concrete example: What happens if I scale up a probodobodyne okto (0.3 SAS) to 200%?"},{"CreatedByName":"allmhuran","CreatedById":66124,"CreatedDateTime":"2015-04-07T14:35:27Z","Content":"And here\u0027s the scaling reset happening on a non-root part. I\u0027m attaching the intakes to a 2x2 structural panel which has also been resized. For the panel I made use of the finer control. That\u0027s about the only thing I can think of that might be relevant. But all of the others are fine and they were all attached the same way. It\u0027s maddening.\n\n[https://gfycat.com/WigglyLeftArawana](https://gfycat.com/WigglyLeftArawana)"},{"CreatedByName":"japa","CreatedById":9777,"CreatedDateTime":"2015-04-07T17:29:36Z","Content":"I\u0027m trying to use Tweakscale with Lack Luster Labs, and for all the parts, the only sizes available seem to be 0.5x, 1x, and 16x, when a cursory glance at the config files it provides shows a much larger number of sizes in between, all with helpful labels.\n\nAny idea what might be wrong?"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-04-07T21:29:59Z","Content":"Hi everyone, during the last weeks I was busy [turning the IR codebase upside down](https://forum.kerbalspaceprogram.com/threads/114014), and with a vacation. Now I\u0027ll have a bit more time to give TweakScale the attention it deserves. \n\nMany thanks for the reports and reproductions, now those bugs look a lot more tangible. I\u0027ll work through the issues as I find time for it.\n\n- - - Updated - - -\n\n\u003E \n\u003E Does tweakscale change the SAS force of parts that have SAS? If so, any idea how that\u0027s calculated? For example, will upscaled probes get much more SAS force (since I believe mass is calculated from the vastly increased volume...), or an increase in SAS force that increases linearly with the scaling? Concrete example: What happens if I scale up a probodobodyne okto (0.3 SAS) to 200%?\n\nThis is configured in ScaleExponents.cfg: \n\n    TWEAKSCALEEXPONENTS{    name = ModuleReactionWheel    PitchTorque = 2.5    YawTorque = 2.5    RollTorque = 2.5}\n\nSo the torque currently scales with scale^2.5, just like part mass. TweakScale scales kspFields in partModules (if it finds a corresponding TWEAKSCALEEXPONENTS config), without any knowledge what those values mean.\n\n- - - Updated - - -\n\n\u003E \n\u003E I think wings do not generate more lift. At least they don\u0027t for me.\n\nHmm, there is no scale exponent config for moduleLiftingSurface. Is anyone familiar with this module? The entry \u0022deflectionLiftCoeff\u0022 sounds like it is responsible for lift, but \u0027coeff\u0027 sounds like it should be scale-invariant.\n\n**Edited \u003Ctime datetime=\u00222015-04-07T22:12:57Z\u0022 title=\u002204/07/2015 10:12  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 7, 2015\u003C/time\u003E by pellinor**"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-04-07T22:23:35Z","Content":"Fixed the bug where TweakScale tried to repair scaletypes that are not broken: [latest dev version](https://github.com/pellinor0/TweakScale/archive/dev.zip). This should fix the issues with IR and LLL, not sure about RO (haven\u0027t checked it yet, and I\u0027m not familiar with it)."},{"CreatedByName":"allmhuran","CreatedById":66124,"CreatedDateTime":"2015-04-07T23:13:52Z","Content":"I see, thanks!"},{"CreatedByName":"paelleon","CreatedById":97364,"CreatedDateTime":"2015-04-08T10:19:22Z","Content":"HI all, I find this mod quite usefull. Aside from the fact that having a powerful 5m LV-30 engine at no research cost could be considered cheating, I think that the tweakscale is a must to reduce memory usage and parts count. I hope tweakscale will be integrated into some offcicial update.\n\nGOOD WORK!"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-04-10T23:23:12Z","Content":"\u003E \n\u003E I m wondering if the procedural parts - tweakscale bug is related to those problems.\n\u003E Basically you take a procedural structural element (or fuel tank or whatever) and attach a part to it, for example the stackQuadCoupler (from one 1.25m node on top to four 1.25m nodes at the bottom). Then you TweakScale the stackQuadCoupler to 2.5m, save the vessel and reload the vessel.\n\u003E \n\u003E What happens now is, that the stackQuadCoupler clipps in the procedural part, as if the original not tweakscaled size was used for positioning the part and only after that the model is upscaled.\n\u003E \n\u003E If the stackQuadCoupler is downscaled to 0.625m, it leaves a large gap, instead of clipping into the procedural part.\n\u003E \n\u003E Now it gets interesting: When you use the adapterLargeSmallQuad (from one 2.5m node to four 1.25m nodes) instead of the stackQuadCoupler, that issue does not exist. You can rescale the adapterLargeSmallQuad as much as you want.\n\u003E \n\u003E \n\u003E \n\u003E **The main difference between parts which show that problem and parts which do not show the problem is, that the problematic parts have an offset node\\_stack\\_top, while the unproblematic parts do not have an offset node\\_stack\\_top definition.**\n\u003E \n\u003E Eg\n\u003E \n\u003E stackQuadCoupler: node\\_stack\\_top = 0.0, 0.5, 0.0, 0.0, 1.0, 0.0, 1\n\u003E \n\u003E adapterLargeSmallQuad: node\\_stack\\_top = 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 2\n\u003E \n\u003E Notice the 0.5 from the stackQuadCoupler. If you change that into 0.0, the node is within the part model, but the attachment bug does not appear.\n\u003E \n\u003E That is also the case with all other parts. Those with such an offset have the problem (like basicJetEngine) and those without offset do not show the issue.\n\u003E \n\u003E Also notice, that the problem only exists for the node with which you attach the tweakscaled part to a procedural part (which is usually the node\\_stack\\_top).\n\u003E \n\u003E Thus attaching procedural parts to tweakscaled parts with offset nodes is no problem.\n\nI\u0027m quite convinced that TweakScale did no part moving when I reproduced the bug on loading (in the editor). So my guess is either procedural parts does the faulty moving or the position is already wrong in the craft file. \n\nI had a quick look at the procedural parts code and found some keeping of offsets that might conceivably get messed up if another mod unexpectedly moves nodes or parts. But that\u0027s just a vague idea at the moment. \n\nThe strangest thing is that it also affects other nodes, but the error is always the top node offset. So if I put the quad coupler upside down and attach it with a bottom node, I get the same gap between the parts. It looks as if the top (or the first) node is somehow special, which is not apparent from the code.\n\n**Update:** the bug seems only to happen when loading a craft in the editor. When I reattach the part, save and launch, the position in flight stays correct. So my guess is that there is a translation done if (!flight), that should only be done when modifying some part but not on craft loading. TweakScale already works this way. \n\nIn procedural parts, the call writeMeshes-\u003EMoveattachments-\u003EforceUpdate-\u003EdoTranslation-\u003Etarget.Translate on craft loadigng seems to do the faulty translation. If I comment out \u0022target.Translate\u0022, the quadCoupler stays in the right place on craft loading.\n\n**Update:** Created an [issue](https://github.com/Swamp-Ig/ProceduralParts/issues/118) for procedural parts.\n\n**Edited \u003Ctime datetime=\u00222015-04-11T14:16:14Z\u0022 title=\u002204/11/2015 02:16  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 11, 2015\u003C/time\u003E by pellinor**"},{"CreatedByName":"hellion13","CreatedById":66719,"CreatedDateTime":"2015-04-11T13:18:24Z","Content":"First experience with tweakscale was through an abortive RSS build i was failing at. Between it and all the other mods parts didn\u0027t match up anymore, nothing scaled right.\n\n Since then I\u0027ve stopped trying to make Orbiter out of KSP and started playing KSP. Tweakscale has become one of those mods i cant live with out. \n\nInstead of 5 or 6 engines, now i have 5 or 6 classes of engines. It turns a singular part into a class of parts.\n\nRockets look more streamlined, planes dont have weird odd sized wings."},{"CreatedByName":"noobsrtoast","CreatedById":65729,"CreatedDateTime":"2015-04-12T08:56:46Z","Content":"im having a small issue, whenever I rescale a part, the attachment point for the part when it was its original size remains, so whenever I try to attach it to something it doesn\u0027t actually attach properly, its hella annoying is there a way I can fix this?\n\n**Edited \u003Ctime datetime=\u00222015-04-12T09:03:18Z\u0022 title=\u002204/12/2015 09:03  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 12, 2015\u003C/time\u003E by noobsrtoast**"}]}