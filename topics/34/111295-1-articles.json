{"TopicId":111295,"ForumId":34,"TopicTitle":"FSfuelSwitch to every tank","CreatedByName":"micha030201","CreatedById":143226,"CreatedDateTime":"2015-05-29T19:50:37Z","PageNum":1,"Articles":[{"CreatedByName":"micha030201","CreatedById":143226,"CreatedDateTime":"2015-05-29T19:50:37Z","Content":"This small ModuleManager config adds module FSfuelSwitch to every fuel tank in game, including non-stock. I\u0027m sure someone has made something like that, but all I could find was this ([http://forum.kerbalspaceprogram.com/threads/121321](https://forum.kerbalspaceprogram.com/threads/121321-Stock-Fuel-Switch)) config which adds FuelSwitch module to tanks personally, and works with stock tanks only. UPD: Yep, [veryinky](https://forum.kerbalspaceprogram.com/members/73255-veryinky) did, I\u0027ll make update which calculates cost correctly based on his code as soon as I understand how the price should be calculated (I don\u0027t really play career).\n\n![0H9QDd5.gif](http://i.imgur.com/0H9QDd5.gif)\n\nPorkjets picture\n\n**Download:**\n\nMega - [https://mega.co.nz/#!VQJAwagT!yK8bc-hoUmoPm1wQloVqsPtftwbNy1jJuvumvTH6Z-4](https://mega.nz/#!xExhgLrS!sVtRjGILhy2-0uiPDTYYjPeoFY1F5V6x9frC_SWTXKI) (*may* be outdated)\n\nKerbalStuff - [Defunct link removed by a moderator]\n\n**Dependencies:**\n\nModuleManager by Sarbian - [http://forum.kerbalspaceprogram.com/threads/55219](https://forum.kerbalspaceprogram.com/threads/55219)\n\nFireSpitter by Snjo - [http://forum.kerbalspaceprogram.com/threads/24551](https://forum.kerbalspaceprogram.com/threads/24551)\n\nKerbalSpaceProgram by Squad - [http://kerbalspaceprogram.com](http://kerbalspaceprogram.com)\n\nI\u0027m not sure if I need license for this, but let it be CC-BY-SA. Included in download.\n\nThere are currently 2 versions - for people who use ThermalPaint plugin ([http://forum.kerbalspaceprogram.com/threads/123279](https://forum.kerbalspaceprogram.com/threads/123279)) and for ones who don\u0027t. Here they are:\n\nIf you use ThermalPaint:\n\n    //CC-BY-SA\n\n    //This patch adds FSfuelSwitch to all tanks. It also adds thermalpaint until somebody understand how to stop FuelSwitch from deleting it.\n\n    @PART\n    [*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[MonoPropellant],!RESOURCE[Oxidizer]] //bipropellant tanks\n    {\n    lforox = #$/RESOURCE[LiquidFuel]/amount$ //liquid fuel or oxidizer\n    lfifplusox = #$/lforox$ //liquid fuel if plus oxidizer\n    @lfifplusox *= 0.45\n    oxifpluslf = #$/lforox$ //oxidizer if plus liquid fuel\n    @oxifpluslf *= 0.55\n\n    RESOURCE\n    {\n        name = LiquidFuel\n        amount = 0\n        maxAmount = #$/lforox$\n    }\n\n    !RESOURCE[LiquidFuel] {}\n        MODULE\n        {\n            name = FSfuelSwitch\n            resourceNames = LiquidFuel,ThermalPaint;LiquidFuel,Oxidizer,ThermalPaint;Oxidizer,ThermalPaint\n            resourceAmounts = #$/lforox$ , 200; $/lfifplusox$ , $/oxifpluslf$ , 200; $/lforox$ , 200 //200 is default amount for ThermalPaint\n            initialResourceAmounts = #$/lforox$ , 0;$/lfifplusox$ , $/oxifpluslf$ , 0; $/lforox$ , 0 //for ThermalPaint to be 0 initially\n            basePartMass = #$/mass$\n            //tankMass = 0;0;0\n            //tankCost =0;0;0\n            displayCurrentTankCost = false\n            hasGUI = true\n            availableInFlight = false\n            availableInEditor = true\n            showInfo = true\n        }\n    }\n\n    @PART\n    [*]:HAS[@RESOURCE[Oxidizer],@RESOURCE[LiquidFuel],!RESOURCE[MonoPropellant]] //LF only tanks\n    {\n    lfifplusox = #$/RESOURCE[LiquidFuel]/amount$ //liquid fuel if plus oxidizer\n    oxifpluslf = #$/RESOURCE[Oxidizer]/amount$ //oxidizer if plus liquid fuel\n    lforox = #$/lfifplusox$ //liquid fuel or oxidizer\n    @lforox \u002B= #$/oxifpluslf$\n\n    RESOURCE\n    {\n        name = LiquidFuel\n        amount = 0\n        maxAmount = #$/lforox$\n    }\n\n    !RESOURCE[LiquidFuel] {}\n    !RESOURCE[Oxidizer] {}\n        MODULE\n        {\n            name = FSfuelSwitch\n            resourceNames = LiquidFuel,Oxidizer,ThermalPaint;LiquidFuel,ThermalPaint;Oxidizer,ThermalPaint\n            resourceAmounts = #$/lfifplusox$ , $/oxifpluslf$ , 200; $/lforox$ , 200; $/lforox$ , 200 //200 is default amount for ThermalPaint\n            initialResourceAmounts = #$/lfifplusox$ , $/oxifpluslf$ , 0; $/lforox$ , 0; $/lforox$ , 0 //for ThermalPaint to be 0 initially\n            basePartMass = #$/mass$\n            //tankMass = 0;0;0\n            //tankCost =0;0;0\n            displayCurrentTankCost = false\n            hasGUI = true\n            availableInFlight = false\n            availableInEditor = true\n            showInfo = true\n        }\n    }\n\nIf you don\u0027t:\n\n    //CC-BY-SA\n\n    //This patch adds FSfuelSwitch to all tanks.\n\n    @PART\n    [*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[MonoPropellant],!RESOURCE[Oxidizer]] //bipropellant tanks\n    {\n    lforox = #$/RESOURCE[LiquidFuel]/amount$ //liquid fuel or oxidizer\n    lfifplusox = #$/lforox$ //liquid fuel if plus oxidizer\n    @lfifplusox *= 0.45\n    oxifpluslf = #$/lforox$ //oxidizer if plus liquid fuel\n    @oxifpluslf *= 0.55\n\n    RESOURCE\n    {\n        name = LiquidFuel\n        amount = 0\n        maxAmount = #$/lforox$\n    }\n\n    !RESOURCE[LiquidFuel] {}\n        MODULE\n        {\n            name = FSfuelSwitch\n            resourceNames = LiquidFuel;LiquidFuel,Oxidizer;Oxidizer\n            resourceAmounts = #$/lforox$ ; $/lfifplusox$ , $/oxifpluslf$ ; $/lforox$\n            basePartMass = #$/mass$\n            //tankMass = 0;0;0\n            //tankCost =0;0;0\n            displayCurrentTankCost = false\n            hasGUI = true\n            availableInFlight = false\n            availableInEditor = true\n            showInfo = true\n        }\n    }\n\n    @PART\n    [*]:HAS[@RESOURCE[Oxidizer],@RESOURCE[LiquidFuel],!RESOURCE[MonoPropellant]] //LF only tanks\n    {\n    lfifplusox = #$/RESOURCE[LiquidFuel]/amount$ //liquid fuel if plus oxidizer\n    oxifpluslf = #$/RESOURCE[Oxidizer]/amount$ //oxidizer if plus liquid fuel\n    lforox = #$/lfifplusox$ //liquid fuel or oxidizer\n    @lforox \u002B= #$/oxifpluslf$\n\n    RESOURCE\n    {\n        name = LiquidFuel\n        amount = 0\n        maxAmount = #$/lforox$\n    }\n\n    !RESOURCE[LiquidFuel] {}\n    !RESOURCE[Oxidizer] {}\n        MODULE\n        {\n            name = FSfuelSwitch\n            resourceNames = LiquidFuel,Oxidizer;LiquidFuel;Oxidizer\n            resourceAmounts = #$/lfifplusox$ , $/oxifpluslf$; $/lforox$; $/lforox$\n            basePartMass = #$/mass$\n            //tankMass = 0;0;0\n            //tankCost =0;0;0\n            displayCurrentTankCost = false\n            hasGUI = true\n            availableInFlight = false\n            availableInEditor = true\n            showInfo = true\n        }\n    }\n\nThese are the same files which are included in the download.\n\n**Edited \u003Ctime datetime=\u00222022-08-28T08:19:46Z\u0022 title=\u002208/28/2022 08:19  AM\u0022 data-short=\u00221 yr\u0022\u003EAugust 28, 2022\u003C/time\u003E by James Kerman**\n  \nlink removed"},{"CreatedByName":"plague006","CreatedById":142570,"CreatedDateTime":"2015-06-03T23:07:59Z","Content":"I spent a while trying to get this to work, and with MM and FS installed, I don\u0027t get a tweakable on any stock fuel tanks. I later added tweakscale for good measure and saw the tweakable for size but still nothing for fuel type/tank setup.\n\nEdit: line 5 needs a closing ] and it should be good to go. Credit to Daz/Dazpoet.\n\n**Edited \u003Ctime datetime=\u00222015-06-03T23:33:12Z\u0022 title=\u002206/03/2015 11:33  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 3, 2015\u003C/time\u003E by plague006**"},{"CreatedByName":"veryinky","CreatedById":71372,"CreatedDateTime":"2015-06-03T23:31:40Z","Content":"\u003E \n\u003E This small ModuleManager config adds module FSfuelSwitch to every fuel tank in game, including non-stock. I\u0027m sure someone has made something like that, but all I could find was this ([http://forum.kerbalspaceprogram.com/threads/121321](https://forum.kerbalspaceprogram.com/threads/121321-Stock-Fuel-Switch)) config which adds FuelSwitch module to tanks personally, and works with stock tanks only.\n\nI wrote a config that works for all fuel tanks, stock or mod, at the end of that thread, plus it calculates empty tank prices correctly. You\u0027re welcome to use it if you want.\n\nI\u0027ve also written a more advanced version that allows for a 20%monoprop/80%lf\u002Boxy, 20%monoprop/80%oxy, and 10% battery\u002B10% monoprop\u002B80%lf\u002Boxy\n\nFor all in one \u0022service module\u0022 style fuel tanks."},{"CreatedByName":"micha030201","CreatedById":143226,"CreatedDateTime":"2015-06-04T15:12:33Z","Content":"\u003E \n\u003E line 5 needs a closing ]\n\nFixed. Sorry."},{"CreatedByName":"woot","CreatedById":102873,"CreatedDateTime":"2015-06-04T18:42:20Z","Content":"Back in .23 or so I had a tweakable on my procedural tanks that allowed them to be LF/O, LF, monoprop, xenon, etc. that I\u0027d love to have back. It\u0027s annoying to have to switch tanks if I decide monoprop might work better in a design. \n\nI\u0027m now also using Nertea\u0027s cryoengines so I guess such a solution would have to utilize InterstellarFS rather than Firespitter. I wonder if I could use veryinky\u0027s FSFS code for most tanks and then have a different part for hydrolox using IFS. Any thoughts?"},{"CreatedByName":"micha030201","CreatedById":143226,"CreatedDateTime":"2015-06-04T19:32:49Z","Content":"\u003E \n\u003E I guess such a solution would have to utilize InterstellarFS rather than Firespitter.\n\nI don\u0027t understand what exactly is different between InterstellarFuelSwitch and FSfuelSwitch. As far as I understand you just want to switch between more resources instead of LF/OX,LF,OX? Adding more resources to fuel tank isn\u0027t hard on it\u0027s own, the tricky part is to calculate amounts correctly. Currently my config calculates it by taking amounts of LF and OX from tanks and adding them, because their density is the same. I\u0027ll try to make it use more complicated approach, but I don\u0027t have much to offer by now."},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-07-22T15:27:00Z","Content":"BTW, I opened an issue on CKAN concerning this config pack:\n\n[https://github.com/KSP-CKAN/NetKAN/issues/1981](https://github.com/KSP-CKAN/NetKAN/issues/1981)\n\nJust thought you might want to weigh in. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nBasically, in CKAN it\u0027s listed with a \u0022conflicts\u0022 rule against the \u0022Interstellar Fuel Switch Core\u0022, which is breaking things for people who want to use this config in conjunction with other mods that require the Interstellar Core as a dependency. The \u0022core\u0022 only adds the DLL, not any configs to stock tanks, so it\u0027s an unnecessary restriction. The Firespitter Core and Interstellar Core work together just fine."},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-07-23T14:25:39Z","Content":"BTW, I noticed that the config adds the \u0022FSfuelSwitch\u0022 module to all tanks, whether it has that already or not. Also, it\u0027s not also checking for \u0022InterstellarFuelSwitch\u0022 modules either, which add the same functionality. I would suggest adding a \u0022not\u0022 condition for both of these. For instance, this line:\n\n    @PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[MonoPropellant],!RESOURCE[Oxidizer]] //bipropellant tanks\n\ncould be:\n\n    @PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[MonoPropellant],!RESOURCE[Oxidizer],!MODULE[FSfuelSwitch],!MODULE[InterstellarFuelSwitch]] //bipropellant tanks"},{"CreatedByName":"micha030201","CreatedById":143226,"CreatedDateTime":"2015-08-07T15:21:30Z","Content":"Updated, thanks."},{"CreatedByName":"Kibbynought","CreatedById":148871,"CreatedDateTime":"2015-10-15T16:48:33Z","Content":"Possibilty of adding support for the EPL resource line?"},{"CreatedByName":"Jenyaza","CreatedById":155707,"CreatedDateTime":"2016-01-10T16:49:29Z","Content":"I have some \u0022useful\u0022 changer for this mod, maybe you found it useful too. Changes:\n\nSpoiler\n\nFor regular liquidFuel/Oxidiser tank: **LiquidFuel/Oxidzier,  LiquidFuel,  MonoPropellant.**\n\nFor liquidFuel tanks:  **LiquidFuel,  LiquidFuel/Oxidzier,  MonoPropellant.**\n\nFor RCS tanks (why not?) **MonoPropellant, Oxidizer** (if someone need it, someone get it)\n\nPut ElectricCharge in fuel tank - not the best idea, IMHO.\n\nYou still be the mod author ~~i still play with my version~~, so if you prefer, you can update mod. Full code is in second spoiler,\n\nCode\n\nSpoiler\n\n@PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!RESOURCE[MonoPropellant],!MODULE[FSfuelSwitch],!MODULE[InterstellarFuelSwitch]]:FINAL //jet fuel tanks\n    {\n    lforox = #$/RESOURCE[LiquidFuel]/amount$ //liquid fuel or oxidizer\n    lfifplusox = #$/lforox$ //liquid fuel if plus oxidizer\n    @lfifplusox *= 0.45\n    oxifpluslf = #$/lforox$ //oxidizer if plus liquid fuel\n    @oxifpluslf *= 0.55\n    \n    @RESOURCE[LiquidFuel]\n    {\n     @amount = 0\n    }\n    \n     MODULE\n     {\n     name = FSfuelSwitch\n     resourceNames = LiquidFuel; LiquidFuel,Oxidizer; MonoPropellant\n     resourceAmounts = #$/lforox$; $/lfifplusox$,$/oxifpluslf$; $/lforox$\n     basePartMass = #$/mass$\n     displayCurrentTankCost = false\n     hasGUI = true\n     availableInFlight = false\n     availableInEditor = true\n     showInfo = false\n     }\n     !lforox\n     !lfifplusox\n     !oxifpluslf\n    }\n\n    @PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!RESOURCE[MonoPropellant],!MODULE[FSfuelSwitch],!MODULE[InterstellarFuelSwitch]]:FINAL //normal bipropellant tanks\n    {\n    lfifplusox = #$/RESOURCE[LiquidFuel]/amount$\n    oxifpluslf = #$/RESOURCE[Oxidizer]/amount$\n    lforox = #$/lfifplusox$\n    @lforox \u002B= #$/oxifpluslf$\n    \n    @RESOURCE[LiquidFuel]\n    {\n     @amount = 0\n    }\n    @RESOURCE[Oxidizer]\n    {\n     @amount = 0\n    }\n    \n     MODULE\n     {\n     name = FSfuelSwitch\n     resourceNames = LiquidFuel,Oxidizer; LiquidFuel; MonoPropellant\n     resourceAmounts = #$/lfifplusox$,$/oxifpluslf$; $/lforox$; $/lforox$\n     basePartMass = #$/mass$\n     displayCurrentTankCost = false\n     hasGUI = true\n     availableInFlight = false\n     availableInEditor = true\n     showInfo = false\n     }\n     !lforox\n     !lfifplusox\n     !oxifpluslf\n    }\n\n    @PART[*]:HAS[!RESOURCE[LiquidFuel],@RESOURCE[MonoPropellant],!RESOURCE[ElectricCharge],!MODULE[FSfuelSwitch],!MODULE[InterstellarFuelSwitch]]:FINAL // RCS tanks\n    {\n    lforox = #$/RESOURCE[MonoPropellant]/amount$ //liquid fuel or oxidizer\n    \n    @RESOURCE[MonoPropellant]\n    {\n     @amount = 0\n    }\n    \n     MODULE\n     {\n     name = FSfuelSwitch\n     resourceNames = MonoPropellant; Oxidizer \n     resourceAmounts = #$/lforox$; $/lforox$\n     basePartMass = #$/mass$\n     displayCurrentTankCost = false\n     hasGUI = true\n     availableInFlight = false\n     availableInEditor = true\n     showInfo = false\n     }\n     !lforox\n    }\n\n**Edited \u003Ctime datetime=\u00222016-01-10T16:52:36Z\u0022 title=\u002201/10/2016 04:52  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 10, 2016\u003C/time\u003E by Jenyaza**"}]}