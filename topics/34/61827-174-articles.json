{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":174,"Articles":[{"CreatedByName":"MAFman","CreatedById":101780,"CreatedDateTime":"2016-07-09T22:24:34Z","Content":"\n\u003Cp\u003E\nAre there any obvious errors in my code that I missed? The rover is just saying that it\u0027s driving, but it \u0022arrives\u0022 instantly, and never actually does anything.\n\u003C/p\u003E\n\u003Cp\u003E\nBoot file:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E// First, set the ship to a known configuration.\n\nSET SHIP:CONTROL:PILOTMAINTHROTTLE TO 0.\nLIGHTS OFF.\nGEAR OFF.\nIF SHIP:NAME = \u0022Relay\u0022\n{\n\tSET SHIP:TYPE TO \u0022rover\u0022.\n}\nIF SHIP:TYPE = \u0022rover\u0022\n{\n\tBRAKES ON.\n}\nELSE\n{\n\tBRAKES OFF.\n}\n\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E OFF.\n\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E OFF.\n\nFUNCTION NOTIFY\n{\n\tPARAMETER message, priority.\n\tIF priority = \u0022NOMINAL\u0022\n\t{\n\t\tSET \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E TO GREEN.\n\t}\n\tELSE IF priority = \u0022ALERT\u0022\n\t{\n\t\tSET \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E TO RGB((251/255),(66/255),(0/255)). // Bright orange\n\t}\n\tELSE IF priority = \u0022WARNING\u0022\n\t{\n\t\tSET \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E TO RED.\n\t}\n\tHUDTEXT(\u0022kOS: \u0022 \u002B message, 2, 2, 30, \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E, FALSE).\n}\n\nFUNCTION ON_DRIVE\n{\n\tPARAMETER n, vol.\n\t\n\tSWITCH TO vol. LIST FILES IN allFiles.\n\tFOR f IN allFiles\n\t{\n\t\tIF f:NAME = n\n\t\t{\n\t\t\tSWITCH TO 1. RETURN TRUE.\n\t\t}\n\t}\n\tSWITCH TO 1. RETURN FALSE.\n}\n\nFUNCTION DELAY\n{\n\tSET \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E TO LATLNG(-0.131331503391266, -74.594841003418).\n\tSET dTime TO \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E:DISTANCE / 299792458.\t// Total delay time\n\tSET accTime TO 0.\t\t\t\t\t\t// Accumulated time\n\n\tUNTIL accTime \u0026gt;= dTime\n\t{\n\t\tSET start TO TIME:SECONDS.\n\t\tWAIT UNTIL (TIME:SECONDS - start) \u0026gt; (dTime - accTime) OR NOT ADDONS:RT:HASCONNECTION(SHIP).\n\t\tSET accTime TO accTime \u002B TIME:SECONDS - start.\n\t}\n}\n\n\n// Get a file from \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\nFUNCTION DOWNLOAD {\n  PARAMETER f.\n\n  DELAY().\n  IF ON_DRIVE(f, 1) {\n    DELETE f.\n  }\n  IF ON_DRIVE(f, 0) {\n    SWITCH TO 0.\n\tCOPY f TO 1.\n\tSWITCH TO 1.\n  }\n}\n\n// Put a file on \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\nFUNCTION UPLOAD {\n  PARAMETER f.\n\n  DELAY().\n  IF ON_DRIVE(f, 0) {\n    SWITCH TO 0. DELETE f. SWITCH TO 1.\n  }\n  IF ON_DRIVE(f, 1) {\n    COPY f TO 0.\n  }\n}\n\n// Run a library, downloading it from \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E if necessary\nFUNCTION REQUIRE\n{\n\tPARAMETER lib.\n\tIF NOT ON_DRIVE(lib, 1)\n\t{\n\t\tDOWNLOAD(lib).\n\t}\n\tRENAME lib TO \u0022new_library.ks\u0022.\n\tRUN new_library.\n\tRENAME \u0022new_library.ks\u0022 TO lib.\n}\n\n// THE ACTUAL BOOTUP PROCESS\nSET updateScript TO SHIP:NAME \u002B \u0022.update.ks\u0022.\n\n// If we have a connection, see if there are new instructions. If so, download \n// and run them.\nIF ADDONS:RT:HASCONNECTION(SHIP)\n{\n\tIF ON_DRIVE(updateScript, 0) // If the update script exists on the archive, download and run it.\n\t{\n\t\tIF ON_DRIVE(\u0022update.ks\u0022, 1) // If an old file exists on the archive\n\t\t{\n\t\t\tNOTIFY(\u0022An old update file already exists. Deleting old file...\u0022, \u0022ALERT\u0022).\n\t\t\tWAIT 5.\n\t\t\tDELETE update.ks.\n\t\t}\n\t\t\n\t\tDOWNLOAD(updateScript).\n\t\tSWITCH TO 0. DELETE updateScript. SWITCH TO 1.\n\t\t\t\t\n\t\t// Whichever situation is true, we now have an up-to-date file\n\t\tNOTIFY(\u0022Update file found! Executing...\u0022, \u0022NOMINAL\u0022).\n\t\tWAIT 5.\n\t\tRENAME updateScript TO \u0022update.ks\u0022.\n\t\tRUN update.ks.\n\t\tDELETE update.ks.\n\t}\n\tELSE // We don\u0027t have an update script, so do nothing.\n\t{\n\t\tNOTIFY(\u0022No update file found. Either you haven\u0027t created one or one is not necessary.\u0022, \u0022ALERT\u0022).\n\t}\n\t// If a startup.ks file exists on the disk, run that.\n\tSET bootScript TO SHIP:NAME \u002B \u0022.startup.ks\u0022.\n\tIF ON_DRIVE(bootScript, 1)\n\t{\n\t\tSWITCH TO 1. DELETE bootScript. // If we already have an old startup file, delete it.\n\t\tIF ON_DRIVE(startup.ks, 1)\n\t\t{\n\t\t\tSWITCH TO 1.\n\t\t\tDELETE startup.ks.\n\t\t}\n\t\tIF ON_DRIVE(bootScript, 0)\n\t\t{\n\t\t\tDOWNLOAD(bootScript).\n\t\t\tRENAME bootScript TO \u0022startup.ks\u0022.\n\t\t\tRUN startup.ks.\n\t\t}\n\t\tELSE\n\t\t{\n\t\t\tNOTIFY(\u0022Startup failed! Instructions not found.\u0022, \u0022WARNING\u0022). WAIT 5. REBOOT.\n\t\t}\n\t}\n\tELSE IF ON_DRIVE(bootScript, 0)\n\t{\n\t\tIF NOT ON_DRIVE(bootScript, 1)\n\t\t{\n\t\t\tDOWNLOAD(bootScript).\n\t\t\tRENAME bootScript TO \u0022startup.ks\u0022.\n\t\t\tRUN startup.ks.\n\t\t\tDELETE startup.ks.\n\t\t}\n\t\tELSE\n\t\t{\n\t\t\tDELETE bootScript.\n\t\t\tDOWNLOAD(bootScript).\n\t\t\tRENAME bootScript TO \u0022startup.ks\u0022.\n\t\t\tRUN startup.ks.\n\t\t\tDELETE startup.ks.\n\t\t}\n\t}\n}\nELSE\n{\n\tWAIT UNTIL ADDONS:RT:HASCONNECTION(SHIP).\n\tWAIT 5. // Avoid thrashing the CPU (when no startup.ks, but we have a\n\t\t\t// persistent connection, it will continually reboot)\n\tREBOOT.\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nStartup file:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E// Relay rover startup file\n// Lists the number of active \u0022relay\u0022 rovers\n// and bases its navigation software on that.\n\n// Download the appropriate libraries\nDOWNLOAD(autoNav.ks).\n\n// List the active relays\nLIST TARGETS IN allVessels.\nSET relays TO LIST().\nFOR t IN allVessels\n{\n\tIF t:NAME = \u0022Relay\u0022\n\t{\n\t\trelays:ADD(t).\n\t}\n}\nSET iterationNum TO relays:LENGTH \u002B 1. // Because computers count from 0\nIF iterationNum = 1\n{\n\tRUN autoNav(0). // Go north\n}\nELSE IF iterationNum = 2\n{\n\tRUN autoNav(270). // Go west\n}\nELSE IF iterationNum = 3\n{\n\tRUN autoNav(180). // Go south, so we don\u0027t drive into the ocean\n}\nELSE IF iterationNum = 4\n{\n\tRUN autoNav(270).\n}\nELSE IF iterationNum \u0026gt; 4 // Make it only 1, 2, 3, or 4\n{\n\tSET iterationNum TO CEILING(MOD(iterationNum, 4)).\n}\nELSE // If we get something weird, just give up.\n{\n\tNOTIFY(\u0022Huh...something\u0027s gone wrong...\u0022, \u0022WARNING\u0022).\n\tBRAKES ON.\n}\nDELETE startup.ks. // Do some garbage collection\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nNavigation file:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EPARAMETER direct.\nSWITCH TO 1.\nDELETE startup.\n// The loop... Functions are defined below\nIF ADDONS:RT:HASCONNECTION(SHIP)\n{\n\tUNTIL FALSE\n\t{\n\t\tPOPULATE(direct).\n\t\tDECIDE_NEXT(options).\n\t\tNOTIFY(\u0022Selecting next waypoint.\u0022, \u0022NOMINAL\u0022).\n\t\tWAIT 0.5.\n\t\tNOTIFY(\u0022Driving to next waypoint\u0022, \u0022NOMINAL\u0022).\n\t\tDRIVE_TO(nextPoint).\n\t\tSTOP().\n\t\tWAIT 5.\n\t\t\n\t\tIF NOT ADDONS:RT:HASCONNECTION(SHIP)\n\t\t{\n\t\t\tBREAK.\n\t\t}\n\t}\n}\nELSE\n{\n\tUNTIL FALSE\n\t{\n\t\tPOPULATE(360 - direct).\n\t\tDECIDE_NEXT(options).\n\t\tNOTIFY(\u0022Selecting next waypoint\u0022, \u0022NOMINAL\u0022).\n\t\tWAIT 0.5.\n\t\tNOTIFY(\u0022Driving to next waypoint\u0022, \u0022NOMINAL\u0022).\n\t\tIF nextPoint:DISTANCE \u0026gt; 10\n\t\t{\n\t\t\tDRIVE_TO(nextPoint).\n\t\t}\n\t\tSTOP().\n\t\tWAIT 5.\n\t\t\n\t\tIF ADDONS:RT:HASCONNECTION(SHIP)\n\t\t{\n\t\t\tBREAK.\n\t\t}\n\t}\n}\nPARK().\n\nFUNCTION POPULATE\n{\n\tPARAMETER hdg.\n\t\n\tSET offset_90 TO SIN(hdg) * ((360 * 1000) / (BODY:RADIUS * 2 * CONSTANT:PI)). // duh\n\tSET offset_675 TO offset_90 * SIN(67.5). // 67.5 deg.\n\tSET offset_45 TO offset_90 * SIN(45). // 45 deg.\n\tSET offset_225 TO offset_90 * SIN(22.5). // 22.5 deg.\n\t\n\tSET lat_here TO SHIP:GEOPOSITION:LAT.\n\tSET lon_here TO SHIP:GEOPOSITION:LNG.\n\tSET op_A TO LATLNG((lat_here \u002B offset_225), (lon_here - offset_675)).\n\tSET op_B TO LATLNG((lat_here \u002B offset_45), (lon_here - offset_45)).\n\tSET op_C TO LATLNG((lat_here \u002B offset_90), lon_here).\n\tSET op_D TO LATLNG((lat_here \u002B offset_45), (lon_here \u002B offset_45)).\n\tSET op_E TO LATLNG((lat_here \u002B offset_225), (lon_here \u002B offset_675)).\n\t\n\tSET options TO LIST\n\t(\n\t\top_A, op_B, op_C, op_D, op_E\n\t).\n\t\n\tRETURN options.\n}\n\nFUNCTION SLOPE_IS_SAFE\n{\n\tPARAMETER option.\n\tSET here TO SHIP:GEOPOSITION.\n\tSET there TO option.\n\tSET slope TO ABS(ARCTAN2(there:TERRAINHEIGHT - here:TERRAINHEIGHT, 100)).\n\tIF slope \u0026lt; 15\n\t{\n\t\tRETURN TRUE.\n\t}\n\tELSE\n\t{\n\t\tRETURN FALSE.\n\t}\n}\n\nFUNCTION DECIDE_NEXT\n{\n\tPARAMETER options.\n\tSET startPos TO 0.\n\tUNTIL startPos \u0026gt; options:LENGTH - 1\n\t{\n\t\tSET o TO options[startPos].\n\t\tIF SLOPE_IS_SAFE(o)\n\t\t{\n\t\t\tSET nextPoint TO o.\n\t\t\tRETURN nextPoint.\n\t\t\tBREAK.\n\t\t}\n\t\tELSE\n\t\t{\n\t\t\tSET startPos TO startPos \u002B 1.\n\t\t}\n\t}\n}\n\nFUNCTION DRIVE_TO\n{\n\tPARAMETER point.\n\t\n\tBRAKES OFF.\n\tSET spd TO 1. // Really stinkin\u0027 slow, but safe.\n\n\t// Throttle control variables\n\tSET throttlePID TO PIDLOOP(0.15, 0.05, 0.1, -1.0, 1.0).\n\tSET throttlePID:SETPOINT TO spd.\n\n\t// Steering control variables\n\tSET steerPID TO PIDLOOP(0.15, 0.05, 0.1, -1.0, 1.0).\n\tSET steerPID:SETPOINT TO point:HEADING.\n\t\n\tCLEARSCREEN.\n\t\n\tSET thrott TO 0.\n\tSET steerVal TO 0.\n\tUNTIL FALSE\n\t{\n\t\tIF point:DISTANCE \u0026gt; 10\n\t\t{\n\t\t\tSET thrott TO throttlePID:UPDATE(TIME:SECONDS, SHIP:GROUNDSPEED).\n\t\t\tSET steerVal TO steerPID:UPDATE(TIME:SECONDS, SHIP:HEADING).\n\t\t\t\n\t\t\tLOCK WHEELTHROTTLE TO thrott.\n\t\t\tLOCK WHEELSTEER TO steerVal.\n\t\t\t\n\t\t\tPRINT \u0022Current Location: \u0022 \u002B ROUND(SHIP:GEOPOSITION:LAT,3) \u002B \u0022, \u0022 \u002B ROUND(SHIP:GEOPOSITION:LNG,3) at (0,3).\n\t\t\tPRINT \u0022Next waypoint: \u0022 \u002B ROUND(point:LAT,3) \u002B \u0022, \u0022 \u002B ROUND(point:LNG, 3) AT (0,4).\n\t\t\tPRINT \u0022Throttle: \u0022 \u002B ROUND(thrott, 3) AT (0,9).\n\t\t\tPRINT \u0022Steering:    \u0022 \u002B ROUND(steerVal,3) AT (0,10).\n\t\t\t\n\t\t\tWAIT 0.01.\n\t\t}\n\t\tELSE\n\t\t{\n\t\t\tSTOP().\n\t\t\tBREAK.\n\t\t}\n\t}\n}\n\nFUNCTION STOP\n{\n\tSET WHEELSTEER TO 0.\n\tUNLOCK WHEELTHROTTLE.\n\tIF NOT BRAKES\n\t{\n\t\tBRAKES ON.\n\t}\n\tUNLOCK WHEELSTEERING. NOTIFY(\u0022Arrived!\u0022, \u0022NOMINAL\u0022).\n}\n\nFUNCTION PARK\n{\n\tSTOP().\n\tLIST PARTS.\n\tFOR p IN PARTS\n\t{\n\t\tp:GETMODULE(\u0022ModuleAnimateGeneric\u0022):DOEVENT(\u0022Extend\u0022).\n\t\tp:GETMODULE(\u0022ModuleLight\u0022):DOEVENT(\u0022Lights on\u0022).\n\t}\n\tSWITCH TO 1.\n\tDELETE autoNav.\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"MAFman","CreatedById":101780,"CreatedDateTime":"2016-07-10T04:29:15Z","Content":"\n\u003Cp\u003E\nHmmm... *more derps later...*\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E// First, set the ship to a known configuration.\n\nSET SHIP:CONTROL:PILOTMAINTHROTTLE TO 0.\nLIGHTS OFF.\nGEAR OFF.\nIF SHIP:NAME = \u0022Relay\u0022\n{\n\tSET SHIP:TYPE TO \u0022rover\u0022.\n}\nIF SHIP:TYPE = \u0022rover\u0022\n{\n\tBRAKES ON.\n}\nELSE\n{\n\tBRAKES OFF.\n}\n\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E OFF.\n\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E OFF.\n\nFUNCTION NOTIFY\n{\n\tPARAMETER message, priority.\n\tIF priority = \u0022NOMINAL\u0022\n\t{\n\t\tSET \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E TO GREEN.\n\t}\n\tELSE IF priority = \u0022ALERT\u0022\n\t{\n\t\tSET \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E TO RGB(255, 79, 0). // International orange\n\t}\n\tELSE IF priority = \u0022WARNING\u0022\n\t{\n\t\tSET \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E TO RED.\n\t}\n\tHUDTEXT(\u0022kOS: \u0022 \u002B message, 2, 2, 30, \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E, FALSE).\n}\n\nFUNCTION ON_DRIVE\n{\n\tPARAMETER n, vol.\n\t\n\tSWITCH TO vol. LIST FILES IN allFiles.\n\tFOR f IN allFiles\n\t{\n\t\tIF f:NAME = n\n\t\t{\n\t\t\tSWITCH TO 1. RETURN TRUE.\n\t\t}\n\t}\n\tSWITCH TO 1. RETURN FALSE.\n}\n\nFUNCTION DELAY\n{\n\tSET \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E TO LATLNG(-0.131331503391266, -74.594841003418).\n\tSET dTime TO \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E:DISTANCE / 299792458.\t// Total delay time\n\tSET accTime TO 0.\t\t\t\t\t\t// Accumulated time\n\n\tUNTIL accTime \u0026gt;= dTime\n\t{\n\t\tSET start TO TIME:SECONDS.\n\t\tWAIT UNTIL (TIME:SECONDS - start) \u0026gt; (dTime - accTime) OR NOT ADDONS:RT:HASCONNECTION(SHIP).\n\t\tSET accTime TO accTime \u002B TIME:SECONDS - start.\n\t}\n}\n\n\n// Get a file from \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\nFUNCTION DOWNLOAD {\n  PARAMETER f.\n\n  DELAY().\n  IF ON_DRIVE(f, 1) {\n    DELETE f.\n  }\n  IF ON_DRIVE(f, 0) {\n    SWITCH TO 0.\n\tCOPY f TO 1.\n\tSWITCH TO 1.\n  }\n}\n\n// Put a file on \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\nFUNCTION UPLOAD {\n  PARAMETER f.\n\n  DELAY().\n  IF ON_DRIVE(f, 0) {\n    SWITCH TO 0. DELETE f. SWITCH TO 1.\n  }\n  IF ON_DRIVE(f, 1) {\n    COPY f TO 0.\n  }\n}\n\n// Run a library, downloading it from \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E if necessary\nFUNCTION REQUIRE\n{\n\tPARAMETER lib.\n\tIF NOT ON_DRIVE(lib, 1)\n\t{\n\t\tDOWNLOAD(lib).\n\t}\n\tRENAME lib TO \u0022new_library.ks\u0022.\n\tRUN new_library.\n\tRENAME \u0022new_library.ks\u0022 TO lib.\n}\n\n// THE ACTUAL BOOTUP PROCESS\nSET updateScript TO SHIP:NAME \u002B \u0022.update.ks\u0022.\n\n// If we have a connection, see if there are new instructions. If so, download \n// and run them.\nIF ADDONS:RT:HASCONNECTION(SHIP)\n{\n\tIF ON_DRIVE(updateScript, 0) // If the update script exists on the archive, download and run it.\n\t{\n\t\tIF ON_DRIVE(\u0022update.ks\u0022, 1) // If an old file exists on the archive\n\t\t{\n\t\t\tNOTIFY(\u0022An old update file already exists. Deleting old file...\u0022, \u0022ALERT\u0022).\n\t\t\tWAIT 5.\n\t\t\tDELETE update.ks.\n\t\t}\n\t\t\n\t\tDOWNLOAD(updateScript).\n\t\tSWITCH TO 0. DELETE updateScript. SWITCH TO 1.\n\t\t\t\t\n\t\t// Whichever situation is true, we now have an up-to-date file\n\t\tNOTIFY(\u0022Update file found! Executing...\u0022, \u0022NOMINAL\u0022).\n\t\tWAIT 5.\n\t\tRENAME updateScript TO \u0022update.ks\u0022.\n\t\tRUN update.ks.\n\t\tDELETE update.ks.\n\t}\n\tELSE // We don\u0027t have an update script, so do nothing.\n\t{\n\t\tNOTIFY(\u0022No update file found. Either you haven\u0027t created one or one is not necessary.\u0022, \u0022ALERT\u0022).\n\t}\n\t// If a startup.ks file exists on the disk, run that.\n\tSET bootScript TO SHIP:NAME \u002B \u0022.startup.ks\u0022.\n\tIF ON_DRIVE(bootScript, 1)\n\t{\n\t\tSWITCH TO 1. DELETE bootScript. // If we already have an old startup file, delete it.\n\t\tIF ON_DRIVE(startup.ks, 1)\n\t\t{\n\t\t\tSWITCH TO 1.\n\t\t\tDELETE startup.ks.\n\t\t}\n\t\tIF ON_DRIVE(bootScript, 0)\n\t\t{\n\t\t\tDOWNLOAD(bootScript).\n\t\t\tRENAME bootScript TO \u0022startup.ks\u0022.\n\t\t\tRUN startup.ks.\n\t\t}\n\t\tELSE\n\t\t{\n\t\t\tNOTIFY(\u0022Startup failed! Instructions not found.\u0022, \u0022WARNING\u0022). WAIT 5. REBOOT.\n\t\t}\n\t}\n\tELSE IF ON_DRIVE(bootScript, 0)\n\t{\n\t\tIF NOT ON_DRIVE(bootScript, 1)\n\t\t{\n\t\t\tDOWNLOAD(bootScript).\n\t\t\tRENAME bootScript TO \u0022startup.ks\u0022.\n\t\t\tRUN startup.ks.\n\t\t\tDELETE startup.ks.\n\t\t}\n\t\tELSE\n\t\t{\n\t\t\tDELETE bootScript.\n\t\t\tDOWNLOAD(bootScript).\n\t\t\tRENAME bootScript TO \u0022startup.ks\u0022.\n\t\t\tRUN startup.ks.\n\t\t\tDELETE startup.ks.\n\t\t}\n\t}\n}\nELSE\n{\n\tWAIT UNTIL ADDONS:RT:HASCONNECTION(SHIP).\n\tWAIT 5. // Avoid thrashing the CPU (when no startup.ks, but we have a\n\t\t\t// persistent connection, it will continually reboot)\n\tREBOOT.\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E// Relay rover startup file\n// Lists the number of active \u0022relay\u0022 rovers\n// and bases its navigation software on that.\n\n// Download the appropriate libraries\nDOWNLOAD(autoNav.ks).\n\n// List the active relays\nLIST TARGETS IN allVessels.\nSET relays TO LIST().\nFOR t IN allVessels\n{\n\tIF t:NAME = \u0022Relay\u0022\n\t{\n\t\trelays:ADD(t).\n\t}\n}\nSET iterationNum TO relays:LENGTH \u002B 1. // Because computers count from 0\nIF relays:LENGTH = 0\n{\n\tSET iterationNum TO 2.\n}\nIF iterationNum = 1\n{\n\tRUN autoNav(0). // Go north\n}\nELSE IF iterationNum = 2\n{\n\tRUN autoNav(270). // Go west\n}\nELSE IF iterationNum = 3\n{\n\tRUN autoNav(180). // Go south\n}\n\nELSE IF iterationNum \u0026gt; 3 // Make it only 1, 2, or 3\n{\n\tSET iterationNum TO CEILING(MOD(iterationNum, 3)).\n}\nELSE // If we get something weird, just give up.\n{\n\tNOTIFY(\u0022Huh...something\u0027s gone wrong...\u0022, \u0022WARNING\u0022).\n\tBRAKES ON.\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EPARAMETER direct.\nSWITCH TO 1.\nDELETE startup.ks. // Do some garbage collection\n\n// The loop... Functions are defined below\nIF ADDONS:RT:HASCONNECTION(SHIP)\n{\n\tUNTIL FALSE\n\t{\n\t\tPOPULATE(direct).\n\t\tDECIDE_NEXT(options).\n\t\tNOTIFY(\u0022Selecting next waypoint.\u0022, \u0022NOMINAL\u0022).\n\t\tWAIT 0.5.\n\t\tNOTIFY(\u0022Driving to next waypoint\u0022, \u0022NOMINAL\u0022).\n\t\tDRIVE_TO(nextPoint).\n\t\tSTOP().\n\t\tWAIT 5.\n\t\t\n\t\tIF NOT ADDONS:RT:HASCONNECTION(SHIP)\n\t\t{\n\t\t\tBREAK.\n\t\t}\n\t}\n}\nELSE\n{\n\tUNTIL FALSE\n\t{\n\t\tPOPULATE(360 - direct).\n\t\tDECIDE_NEXT(options).\n\t\tNOTIFY(\u0022Selecting next waypoint\u0022, \u0022NOMINAL\u0022).\n\t\tWAIT 0.5.\n\t\tNOTIFY(\u0022Driving to next waypoint\u0022, \u0022NOMINAL\u0022).\n\t\tIF nextPoint:DISTANCE \u0026gt; 10\n\t\t{\n\t\t\tDRIVE_TO(nextPoint).\n\t\t}\n\t\tSTOP().\n\t\tWAIT 5.\n\t\t\n\t\tIF ADDONS:RT:HASCONNECTION(SHIP)\n\t\t{\n\t\t\tBREAK.\n\t\t}\n\t}\n}\nPARK(). SHUTDOWN.\n\nFUNCTION POPULATE\n{\n\tPARAMETER hdg.\n\t\n\tSET offset_90 TO SIN(hdg) * ((360 * 1000) / (BODY:RADIUS * 2 * CONSTANT:PI)). // duh\n\tSET offset_675 TO offset_90 * SIN(67.5). // 67.5 deg.\n\tSET offset_45 TO offset_90 * SIN(45). // 45 deg.\n\tSET offset_225 TO offset_90 * SIN(22.5). // 22.5 deg.\n\t\n\tSET lat_here TO SHIP:GEOPOSITION:LAT.\n\tSET lon_here TO SHIP:GEOPOSITION:LNG.\n\tSET op_A TO LATLNG((lat_here \u002B offset_225), (lon_here - offset_675)). // 67.5 deg. left\n\tSET op_B TO LATLNG((lat_here \u002B offset_45), (lon_here - offset_45)). // 45 deg. left\n\tSET op_C TO LATLNG((lat_here \u002B offset_90), lon_here). // Straight at the heading\n\tSET op_D TO LATLNG((lat_here \u002B offset_45), (lon_here \u002B offset_45)). // 45 deg. right\n\tSET op_E TO LATLNG((lat_here \u002B offset_225), (lon_here \u002B offset_675)). // 67.5 deg. right\n\t\n\tSET options TO LIST\n\t(\n\t\top_A, op_B, op_C, op_D, op_E\n\t).\n\t\n\tRETURN options.\n}\n\nFUNCTION SLOPE_IS_SAFE\n{\n\tPARAMETER option.\n\tSET here TO SHIP:GEOPOSITION.\n\tSET there TO option.\n\tSET slope TO ABS(ARCTAN2(there:TERRAINHEIGHT - here:TERRAINHEIGHT, 100)).\n\tIF slope \u0026lt; 15\n\t{\n\t\tRETURN TRUE.\n\t}\n\tELSE\n\t{\n\t\tRETURN FALSE.\n\t}\n}\n\nFUNCTION DECIDE_NEXT\n{\n\tPARAMETER options.\n\tSET startPos TO 0.\n\tUNTIL startPos \u0026gt; options:LENGTH - 1\n\t{\n\t\tSET o TO options[startPos].\n\t\tIF SLOPE_IS_SAFE(o)\n\t\t{\n\t\t\tSET nextPoint TO o.\n\t\t\tRETURN nextPoint.\n\t\t\tBREAK.\n\t\t}\n\t\tELSE\n\t\t{\n\t\t\tSET startPos TO startPos \u002B 1.\n\t\t}\n\t}\n}\n\nFUNCTION DRIVE_TO\n{\n\tPARAMETER point.\n\t\n\tBRAKES OFF.\n\tSET spd TO 5. // Really stinkin\u0027 slow, but safe.\n\n\t// Throttle control variables\n\tSET throttlePID TO PIDLOOP(0.5, 0.1, 0.1, -1.0, 1.0).\n\tSET throttlePID:SETPOINT TO spd.\n\n\t// Steering control variables\n\tSET steerPID TO PIDLOOP((1/360), 0.0001, 0.2, -1.0, 1.0).\n\tSET steerPID:SETPOINT TO point:HEADING.\n\t\n\tCLEARSCREEN.\n\t\n\tSET thrott TO 0. SET steer TO 0.\n\tUNTIL FALSE\n\t{\n\t\tIF point:DISTANCE \u0026gt; 10\n\t\t{\n\t\t\tSET thrott TO throttlePID:UPDATE(TIME:SECONDS, SHIP:GROUNDSPEED).\n\t\t\tSET steer TO steerPID:UPDATE(TIME:SECONDS, SHIP:BEARING).\n\t\t\t\n\t\t\tLOCK WHEELTHROTTLE TO thrott.\n\t\t\tSET SHIP:CONTROL:WHEELSTEER TO steer.\n\t\t\t\n\t\t\tPRINT \u0022\t\t\t\t\t\t\t\t\u0022 AT (0,3).\n\t\t\tPRINT \u0022Current Location: \u0022 \u002B ROUND(SHIP:GEOPOSITION:LAT,3) \u002B \u0022, \u0022 \u002B ROUND(SHIP:GEOPOSITION:LNG,3) at (0,3).\n\t\t\tPRINT \u0022\t\t\t\t\t\t\t\t\u0022 AT (0,4).\n\t\t\tPRINT \u0022Next waypoint: \u0022 \u002B ROUND(point:LAT,3) \u002B \u0022, \u0022 \u002B ROUND(point:LNG, 3) AT (0,4).\n\t\t\t\n\t\t\tPRINT \u0022\t\t\t\t\t\t\u0022 AT (0,9).\n\t\t\tPRINT \u0022Throttle: \u0022 \u002B ROUND(thrott, 3) AT (0,9).\n\t\t\tPRINT \u0022\t\t\t\t\t\t\u0022 AT (0,10).\n\t\t\tPRINT \u0022Steering:    \u0022 \u002B ROUND(steer,3) AT (0,10).\n\t\t\t\n\t\t\tWAIT 0.01.\n\t\t}\n\t\tELSE\n\t\t{\n\t\t\tSTOP().\n\t\t\tBREAK.\n\t\t}\n\t}\n}\n\nFUNCTION STOP\n{\n\tSET WHEELSTEER TO 0.\n\tUNLOCK WHEELTHROTTLE.\n\tIF NOT BRAKES\n\t{\n\t\tBRAKES ON.\n\t}\n\tUNLOCK WHEELSTEERING. NOTIFY(\u0022Arrived!\u0022, \u0022NOMINAL\u0022).\n}\n\nFUNCTION PARK\n{\n\tSTOP().\n\tLIST PARTS.\n\tFOR p IN PARTS\n\t{\n\t\tp:GETMODULE(\u0022ModuleAnimateGeneric\u0022):DOEVENT(\u0022Extend\u0022).\n\t\tp:GETMODULE(\u0022ModuleLight\u0022):DOEVENT(\u0022Lights on\u0022).\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-11T03:01:21Z","Content":"\n\u003Ch1 style=\u0022font-size:2.25em;margin-right:0px;margin-bottom:16px;margin-left:0px;line-height:1.2;font-weight:bold;padding-bottom:.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238,238,238);color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-style:normal;font-variant:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nRelease Candidate\u00A0v1.0.0-pre-1\n\u003C/h1\u003E\n\u003Cp style=\u0022margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:25.6px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/blob/v1.0.0-pre-1\u0022 style=\u0022color:rgb(64,120,192);text-decoration:none;background-color:transparent;\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022for KSP v1.1.3\u0022 src=\u0022https://camo.githubusercontent.com/ce36bc2590d4be4570d7ebebef52c4232d9b6c80/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f666f722532304b53502d76312e312e332d677265656e2e7376673f7374796c653d666c61742d737175617265\u0022 style=\u0022border-style:none;background-color:rgb(255,255,255);\u0022\u003E\u003C/a\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/releases/download/v1.0.0-pre-1/kOS-v1.0.0-pre-1.zip\u0022 style=\u0022color:rgb(64,120,192);text-decoration:none;background-color:transparent;\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022Downloads this release\u0022 src=\u0022https://camo.githubusercontent.com/bc56c5cb41c7e388ba57f483ae9d2661de25d543/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f646f776e6c6f6164732f4b53502d4b4f532f4b4f532f76312e302e302d7072652d312f746f74616c2e7376673f7374796c653d666c61742d737175617265\u0022 style=\u0022border-style:none;background-color:rgb(255,255,255);\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:25.6px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nDownload may be found here: \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/releases/tag/v1.0.0-pre-1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/releases/tag/v1.0.0-pre-1\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:25.6px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nThis version will not be available on Curse, Spacedock, or \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E. \u00A0\u003Cstrong\u003EPlease be sure to report any issues you find on the github issue tracker.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:25.6px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nDocumentation of pending changes may be found\u003Cspan\u003E\u00A0\u003C/span\u003E\u003Ca href=\u0022https://github.com/Dunbaratu/KOS-1/blob/changelog_v1.0.0/CHANGELOG.md\u0022 style=\u0022color:rgb(64,120,192);text-decoration:none;background-color:transparent;\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\n\u003C/p\u003E\n\u003Ch1 style=\u0022font-size:2.25em;margin:1em 0px 16px;line-height:1.2;font-weight:bold;padding-bottom:.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238,238,238);color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-style:normal;font-variant:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nWARNING:\n\u003C/h1\u003E\n\u003Cp style=\u0022margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:25.6px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\n\u003Cstrong style=\u0022font-weight:bolder;\u0022\u003EThis is a testing released based on the current develop branch. The release definitely contains bugs that have not yet been fixed, and may have bugs we are not yet aware of.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Ch2 style=\u0022margin-top:1em;margin-bottom:16px;line-height:1.225;font-size:1.75em;font-weight:bold;padding-bottom:.3em;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:rgb(238,238,238);color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-style:normal;font-variant:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\nThere is a small risk of loosing data both in game and in the script archive.\n\u003C/h2\u003E\n\u003Cp style=\u0022margin-top:0px;color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:25.6px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003E\n\u003Cstrong style=\u0022font-weight:bolder;\u0022\u003EPlease make sure to backup your save file and script files before installing\u003C/strong\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-11T05:20:11Z","Content":"\n\u003Cp\u003E\nOh hey, I missed the Release Candidate in the middle of putting together my own release notes. \u00A0I guess my dev build doesn\u0027t require someone to compile their own kOS build after all.\n\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2016-07-11T07:10:13Z","Content":"\n\u003Cp\u003E\nAny idea why the prerelease would be trying to load a .dll from RoverDude\u0027s Survivability Pack? Log highlight:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nkOS: Error while loading assembly: FloaterTools, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null, skipping assembly.\nFull path: /Volumes/Elements/KSP1.1.3/GameData/UmbraSpaceIndustries/SrvPack/FloaterTools.dll\n \n(Filename: /Users/builduser/buildslave/unity/build/artifacts/generated/common/runtime/UnityEngineDebugBindings.gen.cpp Line: 64)\n\nkOS: Exception: Could not load type \u0027System.Runtime.CompilerServices.ExtensionAttribute\u0027 from assembly \u0027FloaterTools\u0027.\nStack Trace:\n  at (wrapper managed-to-native) System.MonoCustomAttrs:GetCustomAttributesInternal (System.Reflection.ICustomAttributeProvider,System.Type,bool)\n  at System.MonoCustomAttrs.GetCustomAttributesBase (ICustomAttributeProvider obj, System.Type attributeType) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at System.MonoCustomAttrs.GetCustomAttributes (ICustomAttributeProvider obj, System.Type attributeType, Boolean inherit) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at System.MonoType.GetCustomAttributes (System.Type attributeType, Boolean inherit) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at kOS.Safe.Utilities.AssemblyWalkAttribute.WalkAssembly (System.Reflection.Assembly assembly) [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n  at kOS.Safe.Utilities.AssemblyWalkAttribute.WalkAllAssemblies () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \n \u003C/pre\u003E\n\u003Cp\u003E\nFull log up to where I noticed the nag message on a terminal is at\u00A0\u003Ca href=\u0022https://www.dropbox.com/s/ktm87kv8ksiggn7/Player.log?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/ktm87kv8ksiggn7/Player.log?dl=0\u003C/a\u003E .\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-11T11:36:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222670763\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468221013\u0022 data-ipsquote-userid=\u0022103505\u0022 data-ipsquote-username=\u0022undercoveryankee\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, undercoveryankee said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAny idea why the prerelease would be trying to load a .dll from RoverDude\u0027s Survivability Pack? Log highlight:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs part of the new addon code, kOS scans all mod dlls for addon components. \u00A0The nag messages there mean that kOS was unable to load the dll due to errors. \u00A0When I enabled the feature, I wanted to make sure that addon authors were able to see when their mods mailed to load. \u00A0In my testing, I did not see any \u0022current release\u0022 mods that caused the nag messages to appear. \u00A0What version of \u0022SrvPack\u0022 are you using, and does it officially support KSP 1.1.3? \u00A0If it turns out to be an issue that \u0022working\u0022 mods cause these nag messages, we may need another way to alert users to addon loading errors. \u00A0We may need to modify the alert anyways even if the errors are only with mods that don\u0027t load properly, to avoid issues surrounding a KSP update, or a mod that \u0022mostly\u0022 work with the current version.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-11T12:23:37Z\u0022 title=\u002207/11/2016 12:23  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 11, 2016\u003C/time\u003E by hvacengi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-11T14:26:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222670925\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468236999\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs part of the new addon code, kOS scans all mod dlls for addon components. \u00A0The nag messages there mean that kOS was unable to load the dll due to errors. \u00A0When I enabled the feature, I wanted to make sure that addon authors were able to see when their mods mailed to load. \u00A0In my testing, I did not see any \u0022current release\u0022 mods that caused the nag messages to appear. \u00A0What version of \u0022SrvPack\u0022 are you using, and does it officially support KSP 1.1.3? \u00A0If it turns out to be an issue that \u0022working\u0022 mods cause these nag messages, we may need another way to alert users to addon loading errors. \u00A0We may need to modify the alert anyways even if the errors are only with mods that don\u0027t load properly, to avoid issues surrounding a KSP update, or a mod that \u0022mostly\u0022 work with the current version.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124987-hvacengi/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124987\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/124987-hvacengi/\u0022 rel=\u0022\u0022\u003E@hvacengi\u003C/a\u003E\u00A0It occured to me last night that there\u0027s one particular situation where this approach will fail: the case of a interoperability DLL that is designed to add capabilities to mod A if mod B is present.\n\u003C/p\u003E\n\u003Cp\u003E\nThat said, before I learned 1.0.0 had\u00A0the communication system, mine was one of those: KIPC depended on kOS and\u00A0KIPC-KRPC depended on KIPC and KRPC... and I don\u0027t \u003Cem\u003Erecall\u003C/em\u003E seeing nag messages for the latter (though that might have been because I was using KSPAssemblyDependency rather than just letting it fail to load)\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe having the nags as an\u00A0option and mentioning that in the documentation for addon developers might be a good\u00A0way to go? \u00A0(And then\u00A0\u003Cem\u003Enot\u003C/em\u003E\u00A0disabling the terminal, unless that was removed)\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-11T14:33:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222671100\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468247217\u0022 data-ipsquote-userid=\u002296372\u0022 data-ipsquote-username=\u0022dewin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, dewin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124987-hvacengi/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124987\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/124987-hvacengi/\u0022 rel=\u0022external\u0022\u003E@hvacengi\u003C/a\u003E\u00A0It occured to me last night that there\u0027s one particular situation where this approach will fail: the case of a interoperability DLL that is designed to add capabilities to mod A if mod B is present.\n\u003C/p\u003E\n\u003Cp\u003E\nThat said, before I learned 1.0.0 had\u00A0the communication system, mine was one of those: KIPC depended on kOS and\u00A0KIPC-KRPC depended on KIPC and KRPC... and I don\u0027t \u003Cem\u003Erecall\u003C/em\u003E seeing nag messages for the latter (though that might have been because I was using KSPAssemblyDependency rather than just letting it fail to load)\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe having the nags as an\u00A0option and mentioning that in the documentation for addon developers might be a good\u00A0way to go? \u00A0(And then\u00A0\u003Cem\u003Enot\u003C/em\u003E\u00A0disabling the terminal, unless that was removed)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think I\u0027d be inclined to essentially lock the nag message portion to the DEBUG build, and instruct addon developers that they should only use the DEBUG build to test their addon. \u00A0There is also\u00A0an option to make the nag messages appear once and only once per KSP load, in which case a user may be annoyed by the error the first time but it would still allow them to use kOS by simply cycling the power. \u00A0I\u0027ve also experimented with making a kOS specific debugging window that would allow us to display the messages to the user without necessarily breaking execution. \u00A0But either of the first two options shouldn\u0027t cause any delay in release, so I\u0027d lean that way for the time being.\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-11T14:57:21Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124987-hvacengi/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124987\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/124987-hvacengi/\u0022 rel=\u0022\u0022\u003E@hvacengi\u003C/a\u003E\u00A0I think preventing the terminal lockout but keeping the nag message would probably be enough, though a developer build would work as well (and kOS is really easy to build).\n\u003C/p\u003E\n\u003Cp\u003E\nI was using baregrep/baretail/debug window most of the time anyways, and I\u0027d like to assume that a mod developer is going to be looking at the log regardless. \u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2016-07-11T15:51:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222670925\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468236999\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs part of the new addon code, kOS scans all mod dlls for addon components. \u00A0The nag messages there mean that kOS was unable to load the dll due to errors. \u00A0When I enabled the feature, I wanted to make sure that addon authors were able to see when their mods mailed to load. \u00A0In my testing, I did not see any \u0022current release\u0022 mods that caused the nag messages to appear. \u00A0What version of \u0022SrvPack\u0022 are you using, and does it officially support KSP 1.1.3? \u00A0If it turns out to be an issue that \u0022working\u0022 mods cause these nag messages, we may need another way to alert users to addon loading errors. \u00A0We may need to modify the alert anyways even if the errors are only with mods that don\u0027t load properly, to avoid issues surrounding a KSP update, or a mod that \u0022mostly\u0022 work with the current version.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s SrvPack 0.5.4, which according to RoverDude\u0027s github is the current release.\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-11T16:34:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222671217\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468252296\u0022 data-ipsquote-userid=\u0022103505\u0022 data-ipsquote-username=\u0022undercoveryankee\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n39 minutes ago, undercoveryankee said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt\u0027s SrvPack 0.5.4, which according to RoverDude\u0027s github is the current release.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDid the release include FloaterTools? \u00A0I\u0027m on mobile so can\u0027t inspect it, but I suspect it\u0027s leftover from a previous version and you didn\u0027t delete the old folder first, given this changelog item:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:25.6px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003EConversion to stock buoyancy model for floaties\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2016-07-11T17:00:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222671263\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468254892\u0022 data-ipsquote-userid=\u002296372\u0022 data-ipsquote-username=\u0022dewin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 minutes ago, dewin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDid the release include FloaterTools? \u00A0I\u0027m on mobile so can\u0027t inspect it, but I suspect it\u0027s leftover from a previous version and you didn\u0027t delete the old folder first, given this changelog item:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(51,51,51);font-family:\u0027Helvetica Neue\u0027, Helvetica, \u0027Segoe UI\u0027, Arial, freesans, sans-serif, \u0027Apple Color Emoji\u0027, \u0027Segoe UI Emoji\u0027, \u0027Segoe UI Symbol\u0027;font-size:16px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:25.6px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003EConversion to stock buoyancy model for floaties\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, FloaterTools.dll is in the download for SrvPack 0.5.4. I\u0027ll have to ask RoverDude whether it\u0027s safe to remove it.\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-11T20:50:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222671299\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468256452\u0022 data-ipsquote-userid=\u0022103505\u0022 data-ipsquote-username=\u0022undercoveryankee\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, undercoveryankee said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYes, FloaterTools.dll is in the download for SrvPack 0.5.4. I\u0027ll have to ask RoverDude whether it\u0027s safe to remove it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t know that I\u0027d bother RoverDude with that. \u00A0It looks like KSP is able to load the dll, I\u0027m not really sure why kOS is not. \u00A0The dll appears to handle the part module to let the inflatables float in water, so there\u0027s a chance that simply deleting the dll won\u0027t have a significant effect on your own gameplay, but I should figure out what is causing the error.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-11T21:20:54Z\u0022 title=\u002207/11/2016 09:20  PM\u0022 data-short=\u00227 yr\u0022\u003EJuly 11, 2016\u003C/time\u003E by hvacengi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-11T22:42:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222671622\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468270213\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI don\u0027t know that I\u0027d bother RoverDude with that. \u00A0It looks like KSP is able to load the dll, I\u0027m not really sure why kOS is not. \u00A0The dll appears to handle the part module to let the inflatables float in water, so there\u0027s a chance that simply deleting the dll won\u0027t have a significant effect on your own gameplay, but I should figure out what is causing the error.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI had only mentioned it since poking at RoverDude\u0027s repository suggested that particular part of the project hadn\u0027t been updated in ~4-6 months and the changelogs suggested he changed to stock\u0027s implementation of buoyancy -- so it was possibly an oversight that it was included with the release. \u00A0Easy enough to test though.\n\u003C/p\u003E\n"},{"CreatedByName":"Waz","CreatedById":76393,"CreatedDateTime":"2016-07-12T03:17:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222670925\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468236999\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs part of the new addon code, kOS scans all mod dlls for addon components. \u00A0The nag messages there mean that kOS was unable to load the dll due to errors. \u00A0...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m seeing similar messages for:\n\u003C/p\u003E\n\u003Cp\u003E\nIndicatorLights\u003Cbr\u003E\nBetterBurnTime\u003Cbr\u003E\nThrottleControlledAvionics\n\u003C/p\u003E\n\u003Cp\u003E\nKSPAPIExtensions,\u00A0Full path: C:\\KSP\\KSP_113\\GameData\\SimpleLife\\Plugins\\KSPAPIExtensions.dll\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe relevant mods are all loaded by KSP and work fine.\n\u003C/p\u003E\n\u003Cp\u003E\nNote that after these\u00A0\u0022nag\u0022\u00A0messages\u00A0come up, the CPU seems to force\u00A0itself to poweroff, making it non-functional.\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-12T03:53:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222672062\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468293471\u0022 data-ipsquote-userid=\u002276393\u0022 data-ipsquote-username=\u0022Waz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n32 minutes ago, Waz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m seeing similar messages for:\n\u003C/p\u003E\n\u003Cp\u003E\nIndicatorLights\u003Cbr\u003E\nBetterBurnTime\u003Cbr\u003E\nThrottleControlledAvionics\n\u003C/p\u003E\n\u003Cp\u003E\nKSPAPIExtensions,\u00A0Full path: C:\\KSP\\KSP_113\\GameData\\SimpleLife\\Plugins\\KSPAPIExtensions.dll\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe relevant mods are all loaded by KSP and work fine.\n\u003C/p\u003E\n\u003Cp\u003E\nNote that after these\u00A0\u0022nag\u0022\u00A0messages\u00A0come up, the CPU seems to force\u00A0itself to poweroff, making it non-functional.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo they all cite KSPAPIExtentions being the issue there? \u00A0Cause that dll should no longer be valid for KSP 1.1.x, the functionality was moved into KSP proper. \u00A0That one should be OK to delete the dll.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m aware that the nag messages make the cpu inoperable. \u00A0That was intentional design, with unexpected side effects if there are conflicts with out of date mods (or with working mods that give an error anyways as shown above). \u00A0We will be evaluating how to handle these errors.\n\u003C/p\u003E\n"},{"CreatedByName":"OliverPA","CreatedById":164072,"CreatedDateTime":"2016-07-12T05:11:05Z","Content":"\n\u003Cp\u003E\nTried to find the answer in the documentation but I\u0027m not 100% certain... Is it still necessary to load the programs at launch time?\n\u003C/p\u003E\n\u003Cp\u003E\nI love the mod idea and tried it a while ago but loading it every time at launch got so annoying. Would very much prefer to be able to define which program is run in \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E.\n\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2016-07-12T05:55:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222672155\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468300265\u0022 data-ipsquote-userid=\u0022164072\u0022 data-ipsquote-username=\u0022OliverPA\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n38 minutes ago, OliverPA said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTried to find the answer in the documentation but I\u0027m not 100% certain... Is it still necessary to load the programs at launch time?\n\u003C/p\u003E\n\u003Cp\u003E\nI love the mod idea and tried it a while ago but loading it every time at launch got so annoying. Would very much prefer to be able to define which program is run in \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003E\u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you save your script in a location that identifies it as bootable, you can set it in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E to be loaded and run at processor start. The specifics have changed between kOS versions; for 1.0, you can select any script in the \u0022boot\u0022 folder of the archive (\u0022Ships/Script/boot\u0022).\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-12T12:35:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222672155\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468300265\u0022 data-ipsquote-userid=\u0022164072\u0022 data-ipsquote-username=\u0022OliverPA\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, OliverPA said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTried to find the answer in the documentation but I\u0027m not 100% certain... Is it still necessary to load the programs at launch time?\n\u003C/p\u003E\n\u003Cp\u003E\nI love the mod idea and tried it a while ago but loading it every time at launch got so annoying. Would very much prefer to be able to define which program is run in \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003E\u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222672190\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468302914\u0022 data-ipsquote-userid=\u0022103505\u0022 data-ipsquote-username=\u0022undercoveryankee\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, undercoveryankee said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you save your script in a location that identifies it as bootable, you can set it in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003E\u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E\u003C/abbr\u003E to be loaded and run at processor start. The specifics have changed between kOS versions; for 1.0, you can select any script in the \u0022boot\u0022 folder of the archive (\u0022Ships/Script/boot\u0022).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHere is the documentation for how boot files work in the current release:\u00A0\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/commands/files.html#special-handling-of-files-starting-with-boot-example-boot-ks\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/commands/files.html#special-handling-of-files-starting-with-boot-example-boot-ks\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnd here is the pending documentation for how they\u00A0\u003Cem\u003Ewill\u003C/em\u003E\u00A0work when kOS v1.0.0 is release (or how they do work if you\u0027re using the release candidate):\u00A0\u003Ca href=\u0022http://hvacengi.github.io/KOS/general/volumes.html#special-handling-of-files-in-the-boot-directory\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://hvacengi.github.io/KOS/general/volumes.html#special-handling-of-files-in-the-boot-directory\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-12T14:01:56Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222671768\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468276968\u0022 data-ipsquote-userid=\u002296372\u0022 data-ipsquote-username=\u0022dewin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, dewin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI had only mentioned it since poking at RoverDude\u0027s repository suggested that particular part of the project hadn\u0027t been updated in ~4-6 months and the changelogs suggested he changed to stock\u0027s implementation of buoyancy -- so it was possibly an oversight that it was included with the release. \u00A0Easy enough to test though.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI didn\u0027t try to actually launch a vessel with that part module on it, I just loaded the game with the mod installed. \u00A0It could be that it\u0027s broken even though it loaded. \u00A0Or it could be that only the one attribute is broken, and kOS is the only thing that tries to access the attribute. \u00A0I\u0027ll try to look into it more tonight. \u00A0I\u0027m not sure that the exact cause really matters all that much, the current system is obviously preventing users from using kOS with some other mods and that is more counter productive than ensuring that addon writers see errors in their loads.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve created an issue on github to discuss how to proceed, I welcome further discussion there:\u00A0\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/1718\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/1718\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n(tagging \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/76393-waz/\u0026amp;do=hovercard\u0022 data-mentionid=\u002276393\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/76393-waz/\u0022 rel=\u0022\u0022\u003E@Waz\u003C/a\u003E\u00A0and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103505-undercoveryankee/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022103505\u0022 href=\u0022%7B___base_url___%7D/index.php?/profile/103505-undercoveryankee/\u0022 rel=\u0022\u0022\u003E@undercoveryankee\u003C/a\u003E\u00A0since they were\u00A0involved in the related discussion as well)\n\u003C/p\u003E\n"},{"CreatedByName":"Waz","CreatedById":76393,"CreatedDateTime":"2016-07-14T06:33:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222672096\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468295626\u0022 data-ipsquote-userid=\u0022124987\u0022 data-ipsquote-username=\u0022hvacengi\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 12/07/2016 at 1:53 PM, hvacengi said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDo they all cite KSPAPIExtentions being the issue there? \u00A0Cause that dll should no longer be valid for KSP 1.1.x, the functionality was moved into KSP proper. \u00A0That one should be OK to delete the dll.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m aware that the nag messages make the cpu inoperable. \u00A0That was intentional design, with unexpected side effects if there are conflicts with out of date mods (or with working mods that give an error anyways as shown above). \u00A0We will be evaluating how to handle these errors.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNo, there own DLL . Only SimpleLife mentioned\u00A0KSPAPIExtentions.\n\u003C/p\u003E\n\u003Cp\u003E\nA mod loading the dll of every other mod seems to violate the Golden Rule - it would be O(n\u00B2). You could argue that kOS is \u0022special \u0022, but couldn\u0027t you use config entries to determine what mod DLLs you need to load? That would be faster, more stable, and would allow ModuleManager magic.\n\u003C/p\u003E\n"},{"CreatedByName":"hvacengi","CreatedById":124987,"CreatedDateTime":"2016-07-14T13:04:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222675423\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468477998\u0022 data-ipsquote-userid=\u002276393\u0022 data-ipsquote-username=\u0022Waz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Waz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nA mod loading the dll of every other mod seems to violate the Golden Rule - it would be O(n\u00B2). You could argue that kOS is \u0022special \u0022, but couldn\u0027t you use config entries to determine what mod DLLs you need to load? That would be faster, more stable, and would allow ModuleManager magic.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInstead of using config files, I\u0027ve elected for dependency based on the assembly name starting with \u0022kOS.\u0022\u00A0(only so that it scans kOS.dll and kOS.Safe.dll properly) and KSP\u0027s built in\u00A0 \u003Cspan style=\u0022color:rgb(51,51,51);font-family:Consolas, \u0027Liberation Mono\u0027, Menlo, Courier, monospace;font-size:11.9px;font-style:normal;font-weight:normal;letter-spacing:normal;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;\u0022\u003EKSPAssemblyDependency\u003C/span\u003E\u00A0 attribute (which is used by KSP to determine the order in which mods are loaded). \u00A0That leaves the decision to support kOS exclusively in the hands of the developer. \u00A0I\u0027m not sure that there\u0027s a need to use \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E magic to configure support, since support needs to be hard coded into the dll anyways.\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-14T15:09:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222675423\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468477998\u0022 data-ipsquote-userid=\u002276393\u0022 data-ipsquote-username=\u0022Waz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Waz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nA mod loading the dll of every other mod seems to violate the Golden Rule - it would be O(n\u00B2). You could argue that kOS is \u0022special \u0022, but couldn\u0027t you use config entries to determine what mod DLLs you need to load? That would be faster, more stable, and would allow ModuleManager magic.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTo clarify, having looked over what kOS does, it\u0027s not technically loading anything. \u00A0It\u0027s looking over a list of all DLLs that have been loaded and scanning them for classes that have a given attribute using something called Reflection. \u00A0This is a fairly common practice in the C# world, and KSP itself uses it extensively to do things like load addons/scenarios/part modules. Other addons use it too: kRPC uses it for pretty much the same reason kOS does, and my own mod also does it for its own startup. \u00A0It\u0027s pretty much the best way to track a list of implementations of something without having to hard-code that list.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I don\u0027t understand is why kOS encounters the errors in the first place when none of the other implementations do, again this is with me having looked at the code involved. \u00A0But this is moot anyways, since as @hvacengi said it will be restricted to only scanning DLLs that declare KOS as a dependency or match the naming scheme.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-14T15:30:15Z\u0022 title=\u002207/14/2016 03:30  PM\u0022 data-short=\u00227 yr\u0022\u003EJuly 14, 2016\u003C/time\u003E by dewin\u003C/strong\u003E\n\u003Cbr\u003EI hate my phone sometimes\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-07-14T17:26:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222675880\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468508990\u0022 data-ipsquote-userid=\u002296372\u0022 data-ipsquote-username=\u0022dewin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, dewin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat I don\u0027t understand is why kOS encounters the errors in the first place when none of the other implementations do, again this is with me having looked at the code involved. \u00A0But this is moot anyways, since as @hvacengi said it will be restricted to only scanning DLLs that declare KOS as a dependency or match the naming scheme.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs far as we can tell, it\u0027s because kOS is on .NET 3.5 while the mods it\u0027s having trouble with are on .NET 4.x.\u00A0 The methods you\u0027re supposed to use to do reflection changed their underlying implementation a bit between those .NET versions.\u00A0 If you use the .NET 3.5 version of those methods to read through something made with .NET 4.x, it throws an exception.\u00A0 Supposedly KSP mods aren\u0027t supposed to be using .NET 4.x yet, but something magic we don\u0027t understand is happening in the stock game that allows some mods to be getting away with it.\n\u003C/p\u003E\n\u003Cp\u003E\nThe fix is to not attempt to use reflection on the mods who\u0027s .NET version is \u0026gt; 4.0 and have the rule that if you want to use kOS\u0022s ADDON system your mod must be using a version of .NET older than 4.0.\u00A0 Everything else @hvacengi was talking about was about finding a good way to accomplish this.\n\u003C/p\u003E\n"},{"CreatedByName":"dewin","CreatedById":96372,"CreatedDateTime":"2016-07-14T17:30:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222676033\u0022 data-ipsquote-contentid=\u002261827\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468517193\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs far as we can tell, it\u0027s because kOS is on .NET 3.5 while the mods it\u0027s having trouble with are on .NET 4.x.\u00A0 The methods you\u0027re supposed to use to do reflection changed their underlying implementation a bit between those .NET versions.\u00A0 If you use the .NET 3.5 version of those methods to read through something made with .NET 4.x, it throws an exception.\u00A0 Supposedly KSP mods aren\u0027t supposed to be using .NET 4.x yet, but something magic we don\u0027t understand is happening in the stock game that allows some mods to be getting away with it.\n\u003C/p\u003E\n\u003Cp\u003E\nThe fix is to not attempt to use reflection on the mods who\u0027s .NET version is \u0026gt; 4.0 and have the rule that if you want to use kOS\u0022s ADDON system your mod must be using a version of .NET older than 4.0.\u00A0 Everything else @hvacengi was talking about was about finding a good way to accomplish this.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExcept I could have swore that I had built my own mod a couple times using the .NET 4.5 profile and it registered with kOS just fine. \u00A0I ultimately dropped it down because I kept trying to use functionality that doesn\u0027t exist, but had no problems otherwise.\n\u003C/p\u003E\n\u003Cp\u003E\nIs kOS built using the .NET 3.5 profile or the unity one? \u00A0I wonder if that\u0027s the difference. \u00A0(I also wonder if it\u0027s because you are checking parent classes for attributes).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-07-14T17:34:15Z\u0022 title=\u002207/14/2016 05:34  PM\u0022 data-short=\u00227 yr\u0022\u003EJuly 14, 2016\u003C/time\u003E by dewin\u003C/strong\u003E\n\u003C/span\u003E\n"}]}