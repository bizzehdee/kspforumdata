{"TopicId":12355,"ForumId":34,"TopicTitle":"[PART, 1.0.2] Anatid Robotics / MuMech - MechJeb - Autopilot - Historical thread","CreatedByName":"r4m0n","CreatedById":5404,"CreatedDateTime":"2012-06-08T22:30:41Z","PageNum":20,"Articles":[{"CreatedByName":"CrashnBurn","CreatedById":32280,"CreatedDateTime":"2012-09-03T17:23:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Phantom Hoover\u0022 data-cite=\u0022Phantom Hoover\u0022\u003E\u003Cdiv\u003EI\u0027m finding that getting MechJeb to accurately land on the Mun is near-impossible. It always ends up in the \u0022braking burn\u0022 phase with the engine throttled down, and the projected landing site is always about 100km west of wherever I actually wanted to land, and it never manages to correct the course. It\u0027s annoying because I\u0027ve previously used the landing autopilot on Minmus to try to rescue the crew of a downed lander, and it was so accurate I had to veer off at the last second to avoid landing on the crashed debris.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ll bet this is the problem with the mechjeb landing autopilot not working properly with a low TWR. For some reason mechjeb misses a targeted landing by a wide margin (typically between 70 and 100 kilometers along the path of the orbit) when your craft\u0027s thrust to weight ratio is low. In this situation mechjeb doesn\u0027t start the deorbit burn at the correct time. If you increase the available thrust for the deorbit and landing, and change nothing else, the problem goes away.\u003C/p\u003E\u003Cp\u003EEDIT: The above is in reference to Mun landings. I haven\u0027t noticed a problem for Kerbin or Minmus.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-03T17:28:47Z\u0022 title=\u002209/03/2012 05:28  PM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 3, 2012\u003C/time\u003E by CrashnBurn\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"fnordianslip","CreatedById":19310,"CreatedDateTime":"2012-09-03T17:56:35Z","Content":"\n\u003Cp\u003EI\u0027ve been having fun too (for some perverse definition of fun) with MJ fluffing landings on the mun, with two recent craft of my own design. The first was a large lander with multiple crewtanks. That caused MJ to behave very spasmodically, it seemed as if it was Pulse-Width-Modulating the thrust, as it would burn in brief spurts and went completely titsup when close to the surface. A major redisign of the craft fixed that issue.\u003C/p\u003E\u003Cp\u003EThe 2nd craft (the one I\u0027m trying to land now) has 6 of the little radial thrusters (from some parts pack) on a lander with a pair of symmetric radial attached stacks. This one looks like it will land, but MJ snatches defeat from the jaws of victory and screws the pooch a couple of metres above the terrain by overcompensating for some tiny lateral drift by making the craft swan dive face first into the dirt.\u003C/p\u003E\u003Cp\u003EBTW, this is with MJ 1.9 (not 1.9.1) as I reverted back when I had the original issue with the crewtanktastic craft. Also, be advised that this isn\u0027t a complaint, or a bug report, but just some banter about MJ quirks. In fact, its all good fun. I\u0027m getting quite adept at using the \u0022Panic\u0022 button and a quick transition between the autolander and the autoascender to abort landings. I\u0027ve even managed to recover and go around after a full 360 cartwheel on the surface that has left loads of presumably unneccessary spacecraft bits behind, followed by a succesful landing after another orbit.\u003C/p\u003E\n"},{"CreatedByName":"ptaylor25","CreatedById":29543,"CreatedDateTime":"2012-09-03T18:44:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CrashnBurn\u0022 data-cite=\u0022CrashnBurn\u0022\u003E\u003Cdiv\u003EI\u0027ll bet this is the problem with the mechjeb landing autopilot not working properly with a low TWR. For some reason mechjeb misses a targeted landing by a wide margin (typically between 70 and 100 kilometers along the path of the orbit) when your craft\u0027s thrust to weight ratio is low......\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve found that if you must have a low TWR, starting from a higher orbit helps the accuracy. Typically above 40km\u003C/p\u003E\n"},{"CreatedByName":"Phantom Hoover","CreatedById":23495,"CreatedDateTime":"2012-09-03T19:45:30Z","Content":"\n\u003Cp\u003EThanks, landing from a 100km orbit has completely resolved this. Well, the braking burn\u0027s taking forever, but it\u0027s on course for the target.\u003C/p\u003E\n"},{"CreatedByName":"CrashnBurn","CreatedById":32280,"CreatedDateTime":"2012-09-03T20:10:38Z","Content":"\n\u003Cp\u003EDoesn\u0027t work for me. I always start from 50km or higher, typically 75-100km. I just use a bigger engine, or land manually, I can get much closer than mechjeb with a low TWR.\u003C/p\u003E\n"},{"CreatedByName":"fnordianslip","CreatedById":19310,"CreatedDateTime":"2012-09-03T21:51:04Z","Content":"\n\u003Cp\u003EA pair of bigger engines sorted out my swan-diving craft, which is now happily extracting Kethane.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-09-03T22:31:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022r4m0n\u0022 data-cite=\u0022r4m0n\u0022\u003E\u003Cdiv\u003ETry building the DLL for .NET version 3.5.\u003Cp\u003EJust change the module of your part to MuMechJebPod.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eoh thanks that worked. im able to modify the view with freetrack, but i need to brush up on my quaternion maths to get my rotations to work right. il post a diff on pastebin or whatever when im done.\u003C/p\u003E\u003Cp\u003E*edit*\u003C/p\u003E\u003Cp\u003Ek i think i got the liner algebra worked out. so i can look around and translate. probibly needs a little tweaking. im currently constraining rotations to 180 degrees on any axis, and confining leaning to a 1-unit cube. rotational and translational constrains might be wise to define in the part so that modders can prevent freetrack users from backing into the geometry or seeing something they shouldn\u0027t see.\u003C/p\u003E\u003Cp\u003Ei still have an ugly bug to fix. every once in awhile the freetrack interface doesn\u0027t respond and my code treats it as an error even though its just a hiccup in the api. as a result the view reverts to the default view for the camera. this just produces a frame where the camera is pointing in a different direction, and is only a minor graphical annoyance. i probibly just need to queue up the last good frame\u0027s position local camera info and use that, and if thats no good, then handle the no freetrack scenario. gonna fix that one at least, tweaks and features can come later.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-04T01:28:46Z\u0022 title=\u002209/04/2012 01:28  AM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 4, 2012\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003Cbr\u003Eupdated\n\u003C/span\u003E\n"},{"CreatedByName":"KAO","CreatedById":30795,"CreatedDateTime":"2012-09-04T00:28:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022r4m0n\u0022 data-cite=\u0022r4m0n\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EJust change the module of your part to MuMechJebPod.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI did that now whenever I start my game with this new part the game just quits on me. By that I mean I don\u0027t get a ship, I don\u0027t get a Kerbin, I can\u0027t move my camera.\u003C/p\u003E\n"},{"CreatedByName":"Arrowstar","CreatedById":2521,"CreatedDateTime":"2012-09-04T05:29:53Z","Content":"\n\u003Cp\u003EAs an FYI, the relative inclination calculation in MechJeb is wrong. You can\u0027t just subtract the inclination angles of two bodies and call it \u0022relative inclination.\u0022 You have to factor in RAAN, as well.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-09-04T05:40:13Z","Content":"\n\u003Cp\u003Ek heres a diff against rev 61. this adds freetrack support to mumech hull cameras. this is preliminary, id like to have other features like part specific camera constraints later on. i definately need feedback.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/dV2NQwG6\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/dV2NQwG6\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Ealso since im using the freetrack api, that means you should also be able to use facetracknoir for head tracking. freetrack also supports wiimotes, webams etc. im using a trackir4 with freetrack, but dont tell natural point \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003Eanother issue that im not sure if the ksp devs will like is that i am using freetrackclient.dll to supply the data to the new system (to be fair the rules didnt say anything about dynamically linking external dlls). the free track source (which comes with the dll source) is available on their website, be warned, its written in dephi pascal. you require the dll on your system, which if the freetrack installer did its job right should end up in the correct system path, if not you may need to copy the freetrackclient dll to your ksp folder. another thing, im kind of a c# noob, so tell me if i did anything bad.\u003C/p\u003E\n"},{"CreatedByName":"r4m0n","CreatedById":5404,"CreatedDateTime":"2012-09-04T09:02:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Arrowstar\u0022 data-cite=\u0022Arrowstar\u0022\u003E\u003Cdiv\u003EAs an FYI, the relative inclination calculation in MechJeb is wrong. You can\u0027t just subtract the inclination angles of two bodies and call it \u0022relative inclination.\u0022 You have to factor in RAAN, as well.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENoticed this recently, the code is from Rincomp, I\u0027ll try to fix it soon.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nuke\u0022 data-cite=\u0022Nuke\u0022\u003E\u003Cdiv\u003Ek heres a diff against rev 61. this adds freetrack support to mumech hull cameras. this is preliminary, id like to have other features like part specific camera constraints later on. i definately need feedback.\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/dV2NQwG6\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/dV2NQwG6\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Ealso since im using the freetrack api, that means you should also be able to use facetracknoir for head tracking. freetrack also supports wiimotes, webams etc. im using a trackir4 with freetrack, but dont tell natural point \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003Eanother issue that im not sure if the ksp devs will like is that i am using freetrackclient.dll to supply the data to the new system (to be fair the rules didnt say anything about dynamically linking external dlls). the free track source (which comes with the dll source) is available on their website, be warned, its written in dephi pascal. you require the dll on your system, which if the freetrack installer did its job right should end up in the correct system path, if not you may need to copy the freetrackclient dll to your ksp folder. another thing, im kind of a c# noob, so tell me if i did anything bad.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs-is, this would break compatibility with the Mac build, so I\u0027ll have to sit on it for a bit while I see if there is some way to integrate it nicely under all situations, but thanks for the patch.\u003C/p\u003E\n"},{"CreatedByName":"willow","CreatedById":13072,"CreatedDateTime":"2012-09-04T09:16:24Z","Content":"\n\u003Cp\u003EIn the earliest rendezvous code there was a minor feature where the distance and speed for the x,y and z axes rotated for your current rotation was available. Would it perhaps be possible to reintroduce it? Those numbers were really helpfull.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-09-04T09:33:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022r4m0n\u0022 data-cite=\u0022r4m0n\u0022\u003E\u003Cdiv\u003EAs-is, this would break compatibility with the Mac build, so I\u0027ll have to sit on it for a bit while I see if there is some way to integrate it nicely under all situations, but thanks for the patch.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyea i did a round of testing and the version i compiled will crash ksp if the dll is nor present. also the example code i based the interface off of was lacking some idiot proofing. it neither bothered with exception handling nor did it close the dll out when it was done. but what can i say, im fairly new to dynamic linking, not to mention c#. so i got some work to do on it. it works though and is a fairly good for a proof of concept. just need some virtual cockpits now. i could probibly cut one off of one of my mods for other games. ive done a lot of virtual cockpit mods for freespace2 open, and so i have a large number of assets lying around. otherwise its probibly not a very long wait for the iva features in the next version. \u003C/p\u003E\u003Cp\u003Eive heard about there being some linux head tracking software. and there have been a few people interested in porting freetrack to mac. if there is some way to detect platform and then load up whatever interface library is neccisary to support head tracking on that system. i dont know a whole lot about macs, i haven\u0027t used one since the late 90s, so i dont know whats available as far as head tracking goes. if something does exist i suppose i could make the interface support head tracking protocols on those systems. it would likely be some time before that happens. my next job is to make the code tolerant of the absence of the dll, but first i need sleep.\u003C/p\u003E\n"},{"CreatedByName":"Alphalpha","CreatedById":46104,"CreatedDateTime":"2012-09-04T16:58:07Z","Content":"\n\u003Cp\u003EHey, I\u0027ve been trying to use MechJeb to make an Apollo style moonlander, but I haven\u0027t been having much success. \u003C/p\u003E\u003Cp\u003EI\u0027m using crew-able empty pods 0.3 \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/showthread.php/15016-0-16-Crew-able-empty-pods-0-3\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kerbalspaceprogram.com/forum/showthread.php/15016-0-16-Crew-able-empty-pods-0-3\u003C/a\u003E and using the small cylindrical mechjeb module which fits on the tip of the one man pod. I\u0027m able to disengage my lander with the empty pod and the MechJeb module and select it (although only through the space center), but I cannot see or use any MechJeb functions once the lander is detached, and I can\u0027t change my attitude with RCS thrusters or gimballing engines. I can adjust the thrust, but only if the engine was engaged before or during seperation.\u003C/p\u003E\u003Cp\u003EAlso, once I select the lander (debris) from the space center I can no longer return to the space center or end the flight, and must restart the game to do anything else.\u003C/p\u003E\n"},{"CreatedByName":"vava54","CreatedById":46383,"CreatedDateTime":"2012-09-04T17:27:54Z","Content":"\n\u003Cp\u003EI put the files in the KSP folder (Bought the game yesterday, it\u0027s the latest version) and when I try to add some mechJeb parts to my rockets, it says:\u003C/p\u003E\u003Cp\u003E\u0027This part type isn\u0027t available in this version KSP.\u0027\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i46.tinypic.com/2lwtc2q.png\u0022 alt=\u00222lwtc2q.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2012-09-04T17:31:04Z","Content":"\n\u003Cp\u003Evava54, you must ensure that the MuMechLib.dll is in the plugins folder \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"vava54","CreatedById":46383,"CreatedDateTime":"2012-09-04T17:54:10Z","Content":"\n\u003Cp\u003EIt is there.\u003C/p\u003E\u003Cp\u003EAnd the parts are in the \u0027Parts\u0027 folder under KSP_win.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2012-09-04T17:58:38Z","Content":"\n\u003Cp\u003EThey should work then, if they are the most up to date, you may have to delete all those files you installed and reinstall afresh.\u003C/p\u003E\n"},{"CreatedByName":"vava54","CreatedById":46383,"CreatedDateTime":"2012-09-04T18:06:12Z","Content":"\n\u003Cp\u003EIt was already a fresh install, but I did it again, and it is still the same issue.\u003C/p\u003E\u003Cp\u003EIt\u0027s as if mechjeb isn\u0027t compatible with the newest 0.16.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2012-09-04T18:17:07Z","Content":"\n\u003Cp\u003EDo any other plugins work for you?\u003C/p\u003E\u003Cp\u003EAre you running KSP from the desktop?\u003C/p\u003E\u003Cp\u003EIf you are, KSP and the plugins will not be able to write to the directory where they are installed, causing lots of problems like this one.\u003C/p\u003E\u003Cp\u003EUnzip KSP to a non-windows made folder, such as C:\\Games, and install MechJeb there, do not move your current KSP folder as it may already be damaged.\u003C/p\u003E\n"},{"CreatedByName":"vava54","CreatedById":46383,"CreatedDateTime":"2012-09-04T18:25:22Z","Content":"\n\u003Cp\u003EFound the issue myself, it was my antivirus sandboxing the game. Thanks for the help though.\u003C/p\u003E\n"},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-09-04T19:59:02Z","Content":"\n\u003Cp\u003EIs your game in \u0027Program Files\u0027? Then you have a problem with windows, best thing is to get the game out of there, also go to C:\\Users\\Nutzer\\AppData\\Local\\VirtualStore (path IS different for your user of course!), and copy (with overwriting!) the ksp folder from there too to keep your persistence file.\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2012-09-05T03:24:23Z","Content":"\n\u003Cp\u003Eanyway i updated my patch for freetrack support.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://pastebin.com/XGAR01SW\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://pastebin.com/XGAR01SW\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Eit now handles exceptions properly. so your not dependent on the dll to run the plugin. \u003C/p\u003E\u003Cp\u003Ei fixed a bunch of quirks with the translation. like the vector needed to be transformed into part space. and cleaned up the class abit. still needs a virtual cockpit to really shine though. still needs part specific constraints. the FreeTrackClient class supports changing of constraints, but nothing changes them yet. but thats probibly easier than doing interop stuffs.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-05T03:27:42Z\u0022 title=\u002209/05/2012 03:27  AM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 5, 2012\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-09-05T12:12:25Z","Content":"\n\u003Cp\u003EQuestion: Does my mechjeb enabled craft benefit from having an ASAS onboard? I see that SAS is never turned on (I assume MJ turns it off and steers manually) so I\u0027m not sure if my MJ craft require ASAS or if I can remove ASAS completely.\u003C/p\u003E\n"},{"CreatedByName":"CrashnBurn","CreatedById":32280,"CreatedDateTime":"2012-09-05T14:04:30Z","Content":"\n\u003Cp\u003EMechjeb does use SAS very effectively, just very quickly toggling it on/off most of the time, so you might not notice. \u003C/p\u003E\u003Cp\u003EMechjeb is an ASAS, it had conflicts with regular ASAS in earlier versions, apparently, but it plays nice now, although I don\u0027t see any benefit from using ASAS with Mechjeb.\u003C/p\u003E\n"}]}