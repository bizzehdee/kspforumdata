{"TopicId":109225,"ForumId":34,"TopicTitle":"Stock Fuel Switch","CreatedByName":"Porkjet","CreatedById":92433,"CreatedDateTime":"2015-05-14T15:41:13Z","PageNum":1,"Articles":[{"CreatedByName":"Porkjet","CreatedById":92433,"CreatedDateTime":"2015-05-14T15:41:13Z","Content":"**Adds a tweakable to all fuel tanks that lets you switch between LiquidFuel or Oxidizer**\n\n![0H9QDd5.gif](http://i.imgur.com/0H9QDd5.gif)\n\n*[Download link to defunct hosting site removed by moderator]*\n\nIt works by applying the Firespitter FSfuelSwitch module via ModuleManager to all stock tanks. This is a non-destructive method of modifying stock configs that is completely revertible by simply uninstalling the files provided by this mod.\n\nConfig code is written by veryinky, Badsector and Nertea.\n\nThis package redistributes the following mods and plugins, their license information can be found in the provided links:\n\nModuleManager - made by Sarbian \u0026 Ialdabaoth - [http://forum.kerbalspaceprogram.com/threads/55219-Module-Manager-1-5-6-%28Jan-6%29](https://forum.kerbalspaceprogram.com/threads/55219-Module-Manager-1-5-6-%28Jan-6%29)\n\nFirespitter by Snjo - [http://forum.kerbalspaceprogram.com/threads/24551-Firespitter-propeller-plane-and-helicopter-parts-v7-1-%28May-5th%29-for-KSP-1-0](https://forum.kerbalspaceprogram.com/threads/24551-Firespitter-propeller-plane-and-helicopter-parts-v7-1-%28May-5th%29-for-KSP-1-0)\n\n**Edited \u003Ctime datetime=\u00222020-06-18T20:52:03Z\u0022 title=\u002206/18/2020 08:52  PM\u0022 data-short=\u00224 yr\u0022\u003EJune 18, 2020\u003C/time\u003E by Snark**\n  \nDownload link to defunct hosting site removed by moderator"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-05-14T15:52:54Z","Content":"Okay, now you\u0027re killin me man. Was on my way to get Atomic Age, partly just for this.\n\nEDIT: FIIIIRRRRSSSSTTTTT!!!!!!!!!!!!!!!!!!"},{"CreatedByName":"Eleven","CreatedById":60502,"CreatedDateTime":"2015-05-14T15:55:08Z","Content":"\u003E \n\u003E Okay, now you\u0027re killin me man. Was on my way to get Atomic Age, partly just for this.\n\u003E EDIT: FIIIIRRRRSSSSTTTTT!!!!!!!!!!!!!!!!!!\n\nIt\u0027s like Oprah up in this joint these days...YOU get a fuel switcher, YOU get a fuel switcher, YOU get a fuel switcher!\n\nThanks for the work Porkjet ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n(EDIT) One quick note, I see this is the original Atomic Age cfg file, after looking into fuel switchers for a while, it\u0027s the general consensus that LF and OX are both the same density, so...if you have the jumbo64 tank that holds 6400 units total of LF/OX, if you remove the OX, then you will have 6400 units of LF, and vice-versa. I had been assuming that you just double the original amount like your cfg file does, but it appears this is not the case. \n\nCheck out the discussion on page 4 of [The Cryogenic Engines Thread](https://forum.kerbalspaceprogram.com/threads/117766-1-02-Cryogenic-Engines-high-Isp-chemical-rockets!-%2803-05-15-fuel-switch-fix%29/page4)\n\n**Edited \u003Ctime datetime=\u00222015-05-14T16:04:15Z\u0022 title=\u002205/14/2015 04:04  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 14, 2015\u003C/time\u003E by Eleven**"},{"CreatedByName":"hazens1","CreatedById":129789,"CreatedDateTime":"2015-05-14T15:57:25Z","Content":"You say that the download contains Module Manager, but it is not there.. Slight oversight?"},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-05-14T16:01:54Z","Content":"Wil this apply to all mod tanks as well or rather, how do I have it apply to all mod tanks as well?"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-05-14T16:05:13Z","Content":"\u003E \n\u003E Wil this apply to all mod tanks as well or rather, how do I have it apply to all mod tanks as well?\n\nAfter briefly digging through the mm patch, he\u0027s not blanket applying this to any tank containing both LF and Ox, just the stock tanks. Being fair, thats probably smart because, for example, some Near Future Spacecraft fuel tanks have LF, Ox, and MP in them \u0026 applying this to them would strip the monoprop, which I very much depend on at times."},{"CreatedByName":"ExavierMacbeth","CreatedById":110680,"CreatedDateTime":"2015-05-14T16:12:50Z","Content":"\u003E \n\u003E Being fair, thats probably smart because, for example, some Near Future Spacecraft fuel tanks have LF, Ox, and MP in them \u0026 applying this to them would strip the monoprop, which I very much depend on at times.\n\nYou can target the MM patch to ignore the tanks with monoprop easily enough. Thats how Nertea\u0027s Cryo Engine \u0026 Interstellar Fuel Switch patch works.\n\n@Porkjet : You may want to put an advisory in your post that this will not play well with Nertea\u0027s Cryo Engine Pack. It also applies a global patch to all tanks that contain an LFO mix, though dynamically instead of by part so it catches mod parts, but you both are targetting the same conditions. So whichever one gets applied first causes the other to be ignored."},{"CreatedByName":"Woodstar","CreatedById":99637,"CreatedDateTime":"2015-05-14T16:22:06Z","Content":"Leave it to porkjet!!!! Instant permamod!!"},{"CreatedByName":"Porkjet","CreatedById":92433,"CreatedDateTime":"2015-05-14T16:34:52Z","Content":"\u003E \n\u003E (EDIT) One quick note, I see this is the original Atomic Age cfg file, after looking into fuel switchers for a while, it\u0027s the general consensus that LF and OX are both the same density, so...if you have the jumbo64 tank that holds 6400 units total of LF/OX, if you remove the OX, then you will have 6400 units of LF, and vice-versa. I had been assuming that you just double the original amount like your cfg file does, but it appears this is not the case. \n\u003E \n\u003E Check out the discussion on page 4 of [The Cryogenic Engines Thread](https://forum.kerbalspaceprogram.com/threads/117766-1-02-Cryogenic-Engines-high-Isp-chemical-rockets!-%2803-05-15-fuel-switch-fix%29/page4)\n\nnot sure what you mean, It\u0027s the 0.9/1.1 LFO mixture used by stock engines.\n\n\u003E \n\u003E You say that the download contains Module Manager, but it is not there.. Slight oversight?\n\nYes, oversight, thx for the reminder I\u0027ll add it now"},{"CreatedByName":"cy-one","CreatedById":74874,"CreatedDateTime":"2015-05-14T16:57:50Z","Content":"\\*snrk\\* Bwaha, beat me to it by... well, probably a few days ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nI am currently trying to write an \u0022automatic\u0022 version of this (without hardcoded numbers)\n\n[http://forum.kerbalspaceprogram.com/threads/121296-Problems-with-ModuleManager-and-FSfuelSwitch](https://forum.kerbalspaceprogram.com/threads/121296-Problems-with-ModuleManager-and-FSfuelSwitch)\n\nBut until that one works, I\u0027ll use yours ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"Enceos","CreatedById":110725,"CreatedDateTime":"2015-05-14T17:02:10Z","Content":"Nertea has made a very elegant config for his cryo engines that tweaks all the tanks with LF/OX in them to have LF/OX, LF, OX, and LqdHydrogen/OX, LqdHydrogen:\n\n    @PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[InterstellarFuelSwitch]] {    %LF = #$RESOURCE[LiquidFuel]/maxAmount$    %OX = #$RESOURCE[Oxidizer]/maxAmount$    %totalCap = #$RESOURCE[LiquidFuel]/maxAmount$    @totalCap \u002B= #$RESOURCE[Oxidizer]/maxAmount$    %onlyLH2 = #$totalCap$    @onlyLH2 *= 5.5    %mixLH2 = #$onlyLH2$    @mixLH2 /= 1.1    %mixOX = #$onlyLH2$    @mixOX -= #$mixLH2$    %tempVar = 0    %dryCost = 0    @dryCost = #$cost$    %LFCost = 0    %OXCost = 0    %LH2Cost = 0    %mixLH2Cost = 0    %mixLFCost = 0    // compute cost of stock tank fuel    @tempVar = #$RESOURCE[LiquidFuel]/maxAmount$    @tempVar *= 0.8    @mixLFCost \u002B= #$tempVar$    @tempVar = #$RESOURCE[Oxidizer]/maxAmount$    @tempVar *= 0.18    @mixLFCost \u002B= #$tempVar$    @dryCost -= #$mixLFCost$    @cost -= #$mixLFCost$    // Cost LF only    @tempVar = #$totalCap$    @tempVar *= 0.8    @LFCost \u002B= #$tempVar$    // Cost OX only    @tempVar = #$totalCap$    @tempVar *= 0.18    @OXCost \u002B= #$tempVar$    // Cost LH2 only    @tempVar = #$onlyLH2$    @tempVar *= 0.03675    @LH2Cost \u002B= #$tempVar$    // Cost mix    @tempVar = #$mixLH2$    @tempVar *= 0.03675    @mixLH2Cost \u002B= #$tempVar$    @tempVar = #$mixOX$    @tempVar *= 0.18    @mixLH2Cost \u002B= #$tempVar$    @tempVar = 0    MODULE {        name = InterstellarFuelSwitch        resourceNames = LiquidFuel,Oxidizer;LqdHydrogen,Oxidizer;LiquidFuel;Oxidizer;LqdHydrogen        resourceAmounts = #$../LF$,$../OX$;$../mixLH2$,$../mixOX$;$../totalCap$;$../totalCap$;$../onlyLH2$        tankCost = #$../mixLFCost$;$../mixLH2Cost$;$../LFCost$;$../OXCost$;$../LH2Cost$        displayCurrentTankCost = true        hasGUI = true        showInfo = true        availableInFlight = false        availableInEditor = true        basePartMass = #$../mass$        tankMass = 0;0;0;0;0    }    !RESOURCE[LiquidFuel] {}    !RESOURCE[Oxidizer] {}}\n\nIt uses [InterstellarFuelSwitch](https://forum.kerbalspaceprogram.com/threads/117932), which is an extended version of the FS switch."},{"CreatedByName":"The Yellow Dart","CreatedById":107172,"CreatedDateTime":"2015-05-14T17:11:43Z","Content":"If this were stock, it could be a tier 3 unlockable for the VAB/SPH."},{"CreatedByName":"Porkjet","CreatedById":92433,"CreatedDateTime":"2015-05-14T18:30:10Z","Content":"\u003E \n\u003E Nertea has made a very elegant config for his cryo engines that tweaks all the tanks with LF/OX in them to have LF/OX, LF, OX, and LqdHydrogen/OX, LqdHydrogen:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     @PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[InterstellarFuelSwitch]] {    %LF = #$RESOURCE[LiquidFuel]/maxAmount$    %OX = #$RESOURCE[Oxidizer]/maxAmount$    %totalCap = #$RESOURCE[LiquidFuel]/maxAmount$    @totalCap \u002B= #$RESOURCE[Oxidizer]/maxAmount$    %onlyLH2 = #$totalCap$    @onlyLH2 *= 5.5    %mixLH2 = #$onlyLH2$    @mixLH2 /= 1.1    %mixOX = #$onlyLH2$    @mixOX -= #$mixLH2$    %tempVar = 0    %dryCost = 0    @dryCost = #$cost$    %LFCost = 0    %OXCost = 0    %LH2Cost = 0    %mixLH2Cost = 0    %mixLFCost = 0    // compute cost of stock tank fuel    @tempVar = #$RESOURCE[LiquidFuel]/maxAmount$    @tempVar *= 0.8    @mixLFCost \u002B= #$tempVar$    @tempVar = #$RESOURCE[Oxidizer]/maxAmount$    @tempVar *= 0.18    @mixLFCost \u002B= #$tempVar$    @dryCost -= #$mixLFCost$    @cost -= #$mixLFCost$    // Cost LF only    @tempVar = #$totalCap$    @tempVar *= 0.8    @LFCost \u002B= #$tempVar$    // Cost OX only    @tempVar = #$totalCap$    @tempVar *= 0.18    @OXCost \u002B= #$tempVar$    // Cost LH2 only    @tempVar = #$onlyLH2$    @tempVar *= 0.03675    @LH2Cost \u002B= #$tempVar$    // Cost mix    @tempVar = #$mixLH2$    @tempVar *= 0.03675    @mixLH2Cost \u002B= #$tempVar$    @tempVar = #$mixOX$    @tempVar *= 0.18    @mixLH2Cost \u002B= #$tempVar$    @tempVar = 0    MODULE {        name = InterstellarFuelSwitch        resourceNames = LiquidFuel,Oxidizer;LqdHydrogen,Oxidizer;LiquidFuel;Oxidizer;LqdHydrogen        resourceAmounts = #$../LF$,$../OX$;$../mixLH2$,$../mixOX$;$../totalCap$;$../totalCap$;$../onlyLH2$        tankCost = #$../mixLFCost$;$../mixLH2Cost$;$../LFCost$;$../OXCost$;$../LH2Cost$        displayCurrentTankCost = true        hasGUI = true        showInfo = true        availableInFlight = false        availableInEditor = true        basePartMass = #$../mass$        tankMass = 0;0;0;0;0    }    !RESOURCE[LiquidFuel] {}    !RESOURCE[Oxidizer] {}}\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E It uses [InterstellarFuelSwitch](https://forum.kerbalspaceprogram.com/threads/117932), which is an extended version of the FS switch.\n\nwow that lets my approach look like a caveman indeed. Damn Nertea and his science ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"marzharkon","CreatedById":106678,"CreatedDateTime":"2015-05-14T18:50:00Z","Content":"Which should I be using, this or InterstellarFuelSwitch? Can I use both?"},{"CreatedByName":"ExavierMacbeth","CreatedById":110680,"CreatedDateTime":"2015-05-14T18:52:54Z","Content":"\u003E \n\u003E Which should I be using, this or InterstellarFuelSwitch? Can I use both?\n\nUsing both is a bad idea. Whichever patch gets applied first will be the one that shows up (which might leave Nertea\u0027s engines without a fuel source). Both patches target the LF \u0026 O resources on the ship and then remove them after the patch is applied, so when the next patch runs there is no LF \u0026 O Resources for it to find. So it really depends on if you want the LH2 fuel options (and Nertea\u0027s engines) or not."},{"CreatedByName":"Eleven","CreatedById":60502,"CreatedDateTime":"2015-05-14T19:47:29Z","Content":"\u003E \n\u003E not sure what you mean, It\u0027s the 0.9/1.1 LFO mixture used by stock engines.\n\nFuel mixture ratio is not the same thing as density. A jumbo tank holds 6400 units of fuel. LF and OX are the same density so....if you take out all the oxidizer, then 6400 units of LF will fit in that tank. The same goes for OX, if you remove all the LF, then 6400 units of OX will fit in the tank...\n\n![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Badsector","CreatedById":118465,"CreatedDateTime":"2015-05-14T20:36:36Z","Content":"\u003E \n\u003E Nertea has made a very elegant config for his cryo engines that tweaks all the tanks with LF/OX in them to have LF/OX, LF, OX, and LqdHydrogen/OX, LqdHydrogen:\n\nFinally something like this do the same work with firespitter and FSfuelSwitch for all the LFO tanks\n\n    @PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[FSfuelSwitch]] {    %LF = #$RESOURCE[LiquidFuel]/maxAmount$    %OX = #$RESOURCE[Oxidizer]/maxAmount$    %totalCap = #$RESOURCE[LiquidFuel]/maxAmount$    @totalCap \u002B= #$RESOURCE[Oxidizer]/maxAmount$    MODULE {        name = FSfuelSwitch        resourceNames = LiquidFuel,Oxidizer;LiquidFuel;Oxidizer        resourceAmounts = #$../LF$,$../OX$;$../totalCap$;$../totalCap$        displayCurrentTankCost = False        hasGUI = true        showInfo = true        availableInFlight = false        availableInEditor = true        basePartMass = #$../mass$    }    !RESOURCE[LiquidFuel] {}    !RESOURCE[Oxidizer] {}}"},{"CreatedByName":"Jenteb07","CreatedById":58646,"CreatedDateTime":"2015-05-14T21:27:08Z","Content":"hmm, it is not showing up in the VAB for me?\n\nI put the file called firespitter.dll in the Plugins folder\n\nand the modulemanager2.6.3.dll and FSfuelSwitchPatch.cfg in the GameData folder\n\nAm I doing something wrong?"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-05-15T04:02:29Z","Content":"The man, it\u0027s you. This should be stock."},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-05-15T04:13:25Z","Content":"\u003E \n\u003E The man, it\u0027s you. This should be stock.\n\nSo far almost everything his done ended up that way. Are we rooting for this to follow suit?"},{"CreatedByName":"Commander Zoom","CreatedById":8333,"CreatedDateTime":"2015-05-15T08:03:31Z","Content":"Yes. (Well, I am.)\n\nThanks!"},{"CreatedByName":"Hotaru","CreatedById":135669,"CreatedDateTime":"2015-05-16T11:24:02Z","Content":"Just to let you know, I installed this mod with a career save already in progress and found that, while the mod worked fine, all my existing ships in space had had their stock LF/O tanks magically refilled. (Admittedly, better than having them magically emptied!) Uninstalling did not fix the problem, reverting to a previous save did (fortunately I make hard saves all the time so it looks like I\u0027ll only have to repeat one routine SSTO launch). I can\u0027t think of a way around this short of manually editing the save file, which unfortunately seems like more trouble than it\u0027s worth seeing how many ships I\u0027d have to edit. \n\nGreat mod in any case, I will definitely reinstall it next time I start a new save. May actually end up starting a new save partly so I can use this mod, in fact, perfect solution for the LV-N LF tank problem!"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-05-16T11:35:34Z","Content":"\u003E \n\u003E Just to let you know, I installed this mod with a career save already in progress and found that, while the mod worked fine, all my existing ships in space had had their stock LF/O tanks magically refilled. (Admittedly, better than having them magically emptied!) Uninstalling did not fix the problem, reverting to a previous save did (fortunately I make hard saves all the time so it looks like I\u0027ll only have to repeat one routine SSTO launch). I can\u0027t think of a way around this short of manually editing the save file, which unfortunately seems like more trouble than it\u0027s worth seeing how many ships I\u0027d have to edit. \n\u003E Great mod in any case, I will definitely reinstall it next time I start a new save. May actually end up starting a new save partly so I can use this mod, in fact, perfect solution for the LV-N LF tank problem!\n\nI actually had this problem as well, but I \\*think\\* it also happened with a ship I launched after installing the mod. I was fiddling with modulemanager to get this to play nice with GPOSpeedFuelPumps, so may have triggered it that way."},{"CreatedByName":"Eleven","CreatedById":60502,"CreatedDateTime":"2015-05-16T15:41:40Z","Content":"\u003E \n\u003E I actually had this problem as well, but I \\*think\\* it also happened with a ship I launched after installing the mod. I was fiddling with modulemanager to get this to play nice with GPOSpeedFuelPumps, so may have triggered it that way.\n\nIt\u0027s a thing. I\u0027ve found this out after switching fuel switchers lately looking for one I liked best. The MM patch goes through and does it thing when you start the game, and as a result \\*every\\* time you change fuelswitchers, existing tanks get reset. I\u0027m guessing they get switched to whatever parameters are listed first in the switchers cfg file, which most of the time is the default tank setting."},{"CreatedByName":"Geschosskopf","CreatedById":69507,"CreatedDateTime":"2015-05-18T15:48:38Z","Content":"Great stuff, Porkjet!"}]}