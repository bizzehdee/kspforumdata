{"TopicId":165628,"ForumId":34,"TopicTitle":"[KSP 1.12.x] kOS v1.4.0.0: kOS Scriptable Autopilot System","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2017-09-18T16:56:54Z","PageNum":36,"Articles":[{"CreatedByName":"TranceaddicT","CreatedById":73653,"CreatedDateTime":"2019-05-18T16:12:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223601146\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558181878\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv\u003E\n\u003Cdiv style=\u0022width:1292px;height:22px;border:0px;padding:0px;margin:0px;\u0022\u003E\n\u003Cdiv\u003E\n\u003Cdiv style=\u0022height:1072px;width:2972px;\u0022\u003E\n\u003Cdiv style=\u0022width:18px;height:16px;\u0022\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cdiv style=\u0022width:141px;height:16px;\u0022\u003E\n\u00A0\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cdiv style=\u0022height:1072px;width:2972px;\u0022\u003E\n\u00A0\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cdiv\u003E\n\u003Cdiv style=\u0022width:1292px;height:22px;border:0px;padding:0px;margin:0px;\u0022\u003E\n\u003Cdiv style=\u0022width:auto;height:auto;\u0022\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv\u003E\n\u003Cdiv title=\u0022Found 2 errors in text\u0022\u003E\n2\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI have maybe over engineered library script and wrote comments for easier tracking if I have made mistake somewhere. For that reason, file is bigger than need to be. It is clearly disadvantage.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere is always the kOS compile() func.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2019-05-18T17:45:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223601146\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558181878\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen I started to test, my previously working rocket started to explode on staging. I think it is KJR next culprit, since it is only mod updated since yesterday.\u003Cbr\u003E\nBut, that is different kind of animal that I need to tacle down. kOS script prepared to be used as library is under spoiler:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat issue encountered is confirmed to be due to KJRn beta version- With that one removedm script does job well enough for smooth steering. However, provided setpoints are not optimised, at some phase of ascent craft may steer too much from prograde. That can make kaboooms. But as said, it can be easy customized, either by editing library for more general ascent points that work for most crafts or adjust it trough man script for each craft as you need it.\n\u003C/p\u003E\n"},{"CreatedByName":"FloppyRocket","CreatedById":173990,"CreatedDateTime":"2019-05-18T18:26:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223600554\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558091650\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/17/2019 at 4:14 AM, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI didn\u0027t consider this a factor since the control surfaces were not being overworked at all at these points in the flight. When it came off the pad the gimbal lock dropped its heading from 45\u00B0 to 20\u00B0 and it was able to snap roll over back to 43\u00B0 in under two seconds, but then it was also starting to pitch over and took its time getting to 53\u00B0\n\u003C/p\u003E\n\u003Cp\u003E\nthanks, I will keep that in mind. My first fix attempt tho will be as you also suggest and as I surmised - get a more stable heading off the pad\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve created a rocket similar to the one you posted, and using the steering method from CheersKevin video. It has a parachute on the top of a MK1 pod, rather than a launch escape tower.\n\u003C/p\u003E\n\u003Cp\u003E\nI set the reaction wheels in the command pod to \u0022\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E only\u0022 mode, so that the first-stage steering is only via four \u0022Delta Deluxe Winglets\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nThe kOS script uses locked steering. It steers smoothly through the first stage burnout, without any oscillations. After the 1st stage loss of thrust, the kOS script stages, unlocks the steering, and enables \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E Prograde control.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u00A0didn\u0027t modify any of the built-in PID steering constants.\n\u003C/p\u003E\n\u003Cp\u003E\nI didn\u0027t encounter any problems.\n\u003C/p\u003E\n\u003Cp\u003E\nI wonder if the launch escape tower on your rocket is creating some drag-related oscillations.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-05-18T18:57:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223601288\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558204015\u0022 data-ipsquote-userid=\u0022173990\u0022 data-ipsquote-username=\u0022FloppyRocket\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n24 minutes ago, FloppyRocket said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI set the reaction wheels in the command pod to \u0022\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E only\u0022 mode, so that the first-stage steering is only via four \u0022Delta Deluxe Winglets\u0022.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo your launch again and completely disable the reaction wheels. I don\u0027t use reaction wheel torque - at least no torque that\u0027s any stronger than what is needed to hold a satellites pointing (using MandatoryRCS mod)\n\u003C/p\u003E\n\u003Cp\u003E\nAlso you didn\u0027t mention if you weren\u0027t experiencing the gimbal lock issue I identified as the main suspect. If you\u0027re pitching right off the pad then you probably have a good heading right from the start. I let my rocket clear the tower before enabling guidance and in those 3s the nose can point straight up and cause the heading to jump around. In the example I gave above the heading jumped from 45\u00B0 to 20\u00B0 when guidance kicked in and the nose began to lower. If it had stayed 45\u00B0 and only needed to make a small correction to 53\u00B0 things may have been smoother overall\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2019-05-19T07:06:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223601288\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558204015\u0022 data-ipsquote-userid=\u0022173990\u0022 data-ipsquote-username=\u0022FloppyRocket\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, FloppyRocket said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI set the reaction wheels in the command pod to \u0022\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E only\u0022 mode, so that the first-stage steering is only via four \u0022Delta Deluxe Winglets\u0022\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2455\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2455\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIs it that issue?\u00A0 Maybe the kOS steering doesn\u0027t know that torque wheel isn\u0027t really available for use, so it assumes it contributes to the overall torque ability of the ship (Which is used to set the PID tuning.\u00A0 kOS queries KSP and asks it \u0022hey, KSP, how much torque is this ship capable of at this very instant?\u0022, and calculates PID gains from that.\u00A0 It is possible that KSP is reporting the torque wheel as if it was usable by kOS when it isn\u0027t because it\u0027s \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E only.\u00A0 (For KSP\u0027s own internal purposes it\u0027s fine with thinking it can use that torque.\u00A0 Because it *can* - it\u0027s steering *IS* the \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E.))\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Flibble","CreatedById":196830,"CreatedDateTime":"2019-05-20T09:14:19Z","Content":"\n\u003Cp\u003E\nI\u0027ve just moved my whole game and mod set up to 1.6.1 and I am now getting an odd issue. I\u0027m not sure if this is kOS or something in real fuels. When I list fields for ModuleEngineRF the first field has no name, but does have a type (boolean) and value. I think this is supposed to be the \u0022pressureFed\u0022 field as it was working before. Oddly though, the field shows as expected in the \u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nAny idea what would break kOS field lookup but wouldn\u0027t break the \u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: a bit of testing shows that field.guiName is empty, but field.name is valid. Is this expected? I can easily work around it, but it seems a bit odd that this has changed.\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT2: I\u0027ve added a bug and PR with fix for this over on github.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-20T14:00:20Z\u0022 title=\u002205/20/2019 02:00  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 20, 2019\u003C/time\u003E by Flibble\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-05-21T17:15:39Z","Content":"\n\u003Cp\u003E\nhere\u0027s a video of that guidance issue I mentioned:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/2MWjtNctf5k?feature=oembed\u0022 width=\u0022459\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nSo right at launch the cooked steering is locked to heading(54,89) for the first 500m before the quadratic fit function kicks in, and the whole time the heading remains 54\u00B0. Coming off the pad the rocket rolls and points 50\u00B0, then at around 2.6km it kicks over to 54-55 and seems to really start to pitch over. I added a field to my telemetry log to calculate the current pitch that the quadratic fit function is telling the steering to turn to - here it is \u002B500m compared to the actual pitch:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022bKchIFv.png\u0022 class=\u0022ipsImage\u0022 height=\u0022725\u0022 src=\u0022https://i.imgur.com/bKchIFv.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nNow, I would suspect a PID tuning problem if the rocket were having trouble finding 54\u00B0 but it doesn\u0027t waver about 54\u00B0 it rolls straight to 50\u00B0 and \u003Cem\u003Eholds it\u003C/em\u003E until the snap to 54-55\u00B0\n\u003C/p\u003E\n\u003Cp\u003E\nWhat is that all about?\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2019-05-21T20:48:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602587\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558458939\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat is that all about?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUh, you are going too fast while being at low altitide. 371 m/s at 3180 m and dynamic preassure 53147 kPa. That is quite a lot. \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E apply heavy aerodynamic forces and steering manager have struggle to keep it flying straight. And you have wide crosssection area on top that makes craft even more unstable.\n\u003C/p\u003E\n\u003Cp\u003E\nTry with lower \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E on starting stage, like 1.4 or 1.6 to see if it will improve.\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT:\n\u003C/p\u003E\n\u003Cp\u003E\n371 m/s at 3180 m that is mach 1.1\u003Cbr\u003E\nThat is transonic flight (0.8 mach to 1.2 mach) where drag and lift is very non-linerar curve. You can always expect unstable craft behaviour on those velocities.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-21T21:28:43Z\u0022 title=\u002205/21/2019 09:28  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 21, 2019\u003C/time\u003E by kcs123\u003C/strong\u003E\n\u003Cbr\u003Emore info\n\u003C/span\u003E\n"},{"CreatedByName":"Flibble","CreatedById":196830,"CreatedDateTime":"2019-05-21T20:55:40Z","Content":"\n\u003Cp\u003E\nThat\u0027s a good point, you\u0027re at nearly 5 degrees \u003Cabbr title=\u0022Angle of Attack\u0022\u003EAoA\u003C/abbr\u003E there so it\u0027s not surprising the pitch control isn\u0027t great.\n\u003C/p\u003E\n\u003Cp\u003E\nYou could try pitching over much lower so you\u0027re not trying to make large adjustments once you\u0027re at significant speed. I find 50 m/s a good starting point for pitch over, for a fast rocket like that I\u0027d be tempted to start pitching pretty much as it clears the tower.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso you\u0027re seeing 50 degree heading when your pitch is almost vertical, at that point heading is largely academic as you\u0027re going straight up.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-21T20:58:15Z\u0022 title=\u002205/21/2019 08:58  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 21, 2019\u003C/time\u003E by Flibble\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FloppyRocket","CreatedById":173990,"CreatedDateTime":"2019-05-22T02:34:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223601517\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558249592\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/19/2019 at 12:06 AM, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2455\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2455\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIs it that issue?\u00A0 Maybe the kOS steering doesn\u0027t know that torque wheel isn\u0027t really available for use, so it assumes it contributes to the overall torque ability of the ship (Which is used to set the PID tuning.\u00A0 kOS queries KSP and asks it \u0022hey, KSP, how much torque is this ship capable of at this very instant?\u0022, and calculates PID gains from that.\u00A0 It is possible that KSP is reporting the torque wheel as if it was usable by kOS when it isn\u0027t because it\u0027s \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E only.\u00A0 (For KSP\u0027s own internal purposes it\u0027s fine with thinking it can use that torque.\u00A0 Because it *can* - it\u0027s steering *IS* the \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E.))\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInteresting point. I have no idea if it is the same issue.\u00A0How would I test for that (i.e. whether kOS is actually using the reaction wheels?)\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223601305\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558205827\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/18/2019 at 11:57 AM, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDo your launch again and completely disable the reaction wheels. I don\u0027t use reaction wheel torque - at least no torque that\u0027s any stronger than what is needed to hold a satellites pointing (using MandatoryRCS mod)\n\u003C/p\u003E\n\u003Cp\u003E\nAlso you didn\u0027t mention if you weren\u0027t experiencing the gimbal lock issue I identified as the main suspect. If you\u0027re pitching right off the pad then you probably have a good heading right from the start. I let my rocket clear the tower before enabling guidance and in those 3s the nose can point straight up and cause the heading to jump around. In the example I gave above the heading jumped from 45\u00B0 to 20\u00B0 when guidance kicked in and the nose began to lower. If it had stayed 45\u00B0 and only needed to make a small correction to 53\u00B0 things may have been smoother overall\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not sure how to \u0022completely disable\u0022 the reaction wheels. In the MK1 pod, the only RMB options are Normal, Pilot Only, and \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E Only. I could try putting something on top of the rocket that doesn\u0027t have reaction wheels.\n\u003C/p\u003E\n\u003Cp\u003E\nI should also say that the test rocket I\u0022m using behaves totally fine if it just does a gravity turn without any kOS script running and with \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E off. The fins do their job\u00A0even without a script running.\n\u003C/p\u003E\n\u003Cp\u003E\nSo i don\u0027t really have a lot of evidence that my kOS launcher script is actually doing anything useful. It does roll the rocket to a 90 degree heading, and deflects the pitch control surfaces.\n\u003C/p\u003E\n\u003Cp\u003E\nThe launch script does this to get off the pad:\n\u003C/p\u003E\n\u003Cp\u003E\nlock throttle to 1.\u003Cbr\u003E\n//lock angle to 5.37e-8*alt:radar^2 - 0.00361 * alt:radar \u002B 89.6.\u003Cbr\u003E\nlock angle to 90 - (sqrt(alt:radar) / 3.14).\u003Cbr\u003E\nlock steering to heading(90,angle).\u003Cbr\u003E\nstage.\u003Cbr\u003E\nwait 3.\n\u003C/p\u003E\n\u003Cp\u003E\nThe rest of the script manages staging and throttle control to avoid excessive atmospheric drag and circularization.\n\u003C/p\u003E\n\u003Cp\u003E\nI can use either the quadratic or the sqrt() profile, they behave very similarly.\n\u003C/p\u003E\n\u003Cp\u003E\nSince steering is locked, the wait 3\u0022 doesn\u0027t do anything useful.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"FloppyRocket","CreatedById":173990,"CreatedDateTime":"2019-05-22T02:50:07Z","Content":"\n\u003Cp\u003E\nRe: \u0022disabling the reaction wheels\u0027: Maybe set the Wheel Authority to zero? And then add some \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E thrusters to get pointing control for the circularization burn.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"FloppyRocket","CreatedById":173990,"CreatedDateTime":"2019-05-22T03:11:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602587\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558458939\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nhere\u0027s a video of that guidance issue I mentioned:\n\u003C/p\u003E\n\u003Cp\u003E\n(link removed)\n\u003C/p\u003E\n\u003Cp\u003E\nSo right at launch the cooked steering is locked to heading(54,89) for the first 500m before the quadratic fit function kicks in, and the whole time the heading remains 54\u00B0. Coming off the pad the rocket rolls and points 50\u00B0, then at around 2.6km it kicks over to 54-55 and seems to really start to pitch over. I added a field to my telemetry log to calculate the current pitch that the quadratic fit function is telling the steering to turn to - here it is \u002B500m compared to the actual pitch:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNow, I would suspect a PID tuning problem if the rocket were having trouble finding 54\u00B0 but it doesn\u0027t waver about 54\u00B0 it rolls straight to 50\u00B0 and \u003Cem\u003Eholds it\u003C/em\u003E until the snap to 54-55\u00B0\n\u003C/p\u003E\n\u003Cp\u003E\nWhat is that all about?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m just seeing \u0022An error occurred\u0022 when I try to play the video.\n\u003C/p\u003E\n"},{"CreatedByName":"Flibble","CreatedById":196830,"CreatedDateTime":"2019-05-22T09:54:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602843\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558493407\u0022 data-ipsquote-userid=\u0022173990\u0022 data-ipsquote-username=\u0022FloppyRocket\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, FloppyRocket said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nRe: \u0022disabling the reaction wheels\u0027: Maybe set the Wheel Authority to zero? And then add some \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E thrusters to get pointing control for the circularization burn.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou should have a button labelled \u0022toggle torque\u0022 that can be used to disable the reaction wheels.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-05-22T23:25:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602686\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558471730\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/21/2019 at 4:48 PM, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nsteering \u003Cspan\u003E\uFEFF\u003C/span\u003Emanager have struggle to keep it flying \u003Cspan\u003E\uFEFF\u003C/span\u003Estraight\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI may not be getting your meaning but I\u0027m not seeing any evidence of struggle in the control indicators. After the initial snap-roll at launch to the wrong heading, they are stable and the pitch indicator is smoothly working downwards until the \u0022bump\u0022 and then continues a smooth progression. Even after that relatively large pitch movement the control indicators do not bob up and down at all\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602686\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558471730\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/21/2019 at 4:48 PM, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTry with lower \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E on starting stage, like 1.4 or 1.6 to see if it \u003Cspan\u003E\uFEFF\u003C/span\u003Ewill improve\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI do this with my larger 1.25m rocket using the same steering code and the same sudden pitch over happens prior to the rocket reaching Mach 1 (at around Mach 0.6). There\u0027s an example of this in \u003Ca href=\u0022https://youtu.be/KFYJejPiDPI\u0022 rel=\u0022external nofollow\u0022\u003Ethis video\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602692\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558472140\u0022 data-ipsquote-userid=\u0022196830\u0022 data-ipsquote-username=\u0022Flibble\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/21/2019 at 4:55 PM, Flibble said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat\u0027s a good point, you\u0027re at nearly 5 degrees \u003Cabbr title=\u0022Angle of Attack\u0022\u003EAoA\u003C/abbr\u003E there so it\u0027s not surprising \u003Cspan\u003E\uFEFF\u003C/span\u003Ethe pitch control isn\u0027t great.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt seems less an issue of pitch control to me when you look at the control indicators and see how little they are working. It very much looks to me like the rocket is doing what it thinks it is supposed to be doing instead of trying to do something it\u0027s finding difficult to do. This belies an issue with the guidance code not the rocket\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602850\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558494669\u0022 data-ipsquote-userid=\u0022173990\u0022 data-ipsquote-username=\u0022FloppyRocket\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 hours ago, FloppyRocket said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m just seeing \u0022An error occurred\u0022 when I try to play the video.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEven when you try to view it on YouTube?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223602692\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558472140\u0022 data-ipsquote-userid=\u0022196830\u0022 data-ipsquote-username=\u0022Flibble\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/21/2019 at 4:55 PM, Flibble said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAlso you\u0027re seeing 50 degree heading when your pitch is almost vertical, at that point heading is largely academic as you\u0027re going straight up.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf the steering function is ignoring heading properly until a certain angle then it\u0027s doing so ambiguously, which doesn\u0027t seem right. The rocket in the video I embedded made the heading correction at 86\u00B0 pitch but the rocket in the other video I linked in this post made the correction at 84\u00B0 pitch. Really at 89\u00B0 pitch the heading should no longer be ambiguous - even 1\u00B0 off at launch will put you a measurable distance downrange in one direction or another by the time you hit a few hundred meters\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ECorrelation to altitude of 2.6km\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve been looking into this a bit more since I last posted and there is something strongly related to all the controlled flights that see this behavior - it happens at 2.6km regardless of speed or pitch. You can see it happen at that altitude in both videos I linked to and I\u0027ve seen it watching 3 others. not sure what it would be related to however\n\u003C/p\u003E\n"},{"CreatedByName":"TranceaddicT","CreatedById":73653,"CreatedDateTime":"2019-05-23T02:44:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223603339\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558567540\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ECorrelation to altitude of 2.6km\u003C/strong\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCould this be an atmospheric \u0022boundary\u0022 inherent in the aerodynamic model?\n\u003C/p\u003E\n"},{"CreatedByName":"Flibble","CreatedById":196830,"CreatedDateTime":"2019-05-23T09:42:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223603432\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558579487\u0022 data-ipsquote-userid=\u002273653\u0022 data-ipsquote-username=\u0022TranceaddicT\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, TranceaddicT said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCould this be an atmospheric \u0022boundary\u0022 inherent in the aerodynamic model?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe first boundary should be much higher than 2.6km.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe graph above does look like a PID tuning issue - the correction term doesn\u0027t build fast enough so it\u0027s not catching up, then the integral term builds and it overshoots miles.\n\u003C/p\u003E\n\u003Cp\u003E\nI wonder if this might be related to the tuning being set on the ground and not adjusted in flight as the control surface authority changes. At low speed you need a fairly aggressive response as there is little authority, as speed builds the response should dial back to avoid massive overshoot, then the response needs to dial back up as the flight progresses and you lose air pressure.\u003Cbr\u003E\nIt might be worth doing some tweaking of the PID tuning using dynamic pressure. Also you\u0027ll probably need to just tune pitch to avoid the heading going crazy.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-05-23T14:11:59Z","Content":"\n\u003Cp\u003E\nI\u0027m going to study the PID section of the docs more closely. I\u0027ve had experience with using similar rocket steering methods in older versions of KSP and kOS and this is the first time I\u0027ve had to tune the cooked steering so it\u0027s all new to me in that regard. But then again I do recall kOS cooked steering getting a major overhaul during the period where I was rebuilding the KSA to the point where it uses steerable rockets\n\u003C/p\u003E\n"},{"CreatedByName":"TranceaddicT","CreatedById":73653,"CreatedDateTime":"2019-05-23T14:45:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223603677\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558620719\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n33 minutes ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m going to study the PID section of the docs more closely. I\u0027ve had experience with using similar rocket steering methods in older versions of KSP and kOS and this is the first time I\u0027ve had to tune the cooked steering so it\u0027s all new to me in that regard. But then again I do recall kOS cooked steering getting a major overhaul during the period where I was rebuilding the KSA to the point where it uses steerable rockets\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou might want to try an external PID controller to compare results.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/KSP-KOS/KSLib/blob/master/library/lib_pid.ks\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KSLib/blob/master/library/lib_pid.ks\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe library scripts are 4yo; so, they probably need some refactoring and updating.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-05-23T14:46:48Z\u0022 title=\u002205/23/2019 02:46  PM\u0022 data-short=\u00225 yr\u0022\u003EMay 23, 2019\u003C/time\u003E by TranceaddicT\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2019-05-23T17:27:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223603339\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558567540\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nmay not be getting your meaning but I\u0027m not seeing any evidence of struggle in the control indicators. After the initial snap-roll at launch to the wrong heading, they are stable and the pitch indicator is smoothly working downwards until the \u0022bump\u0022 and then continues a smooth progression. Even after that relatively large pitch movement the control indicators do not bob up and down at all\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSorry, \u0022struggle\u0022 might not be the best term, please note that english is not my native language, so don\u0027t take everything written literaly. When I said first time that steering manager have \u0022struggle\u0022 to steer rocket, I was not mean that it have lack of authority. I was thinking about unproper set of Kp, Ki and Kd of internal steering manager PID controlers. I apollogize that I didn\u0027t elaborate it better first time. Basicaly, what \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/196830-flibble/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022196830\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/196830-flibble/\u0022 rel=\u0022\u0022\u003E@Flibble\u003C/a\u003E said:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223603582\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558604554\u0022 data-ipsquote-userid=\u0022196830\u0022 data-ipsquote-username=\u0022Flibble\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Flibble said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe graph above does look like a PID tuning issue - the correction term doesn\u0027t build fast enough so it\u0027s not catching up, then the integral term builds and it overshoots miles.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nBut, things are slightly more complicated. I\u0027m writting following from top of my head, I have found some info about it in kOS documentation, some info on this formu, some from other web pages, etc. Can\u0027t really recall all exact details. But, IIRC, steering manager use not one, but pair of two PID controlers for each axis: yaw, pitch and roll. Furthermore, it use some self-adjusting algorithm, to set apropriate Kp, Ki and Kd for PID controler. Over time, based on passed results it re-adjust itself. I\u0027m not sure when steering manager re-calculate Kp, Ki and Kd during flight, but I know that it does.\n\u003C/p\u003E\n\u003Cp\u003E\nNow, at the begining of flight, influence of aerodynamic forces are neglectable, compared to gravity and other forces. And when aerodynamic forces started to build up, lift and drag coefficients are almost linear. Steering manager was set Kp, Ki and Kd for PID based on data from first seconds on flight. Suddenly when Cl and Cd become more curvatore, previous set of Kp, Ki, and Kd was no longer apropriate for whole craft steering system. It was not reacting quick enough when Cl and Cd rapidly bumps up and down and become more linear again. Now, I was talking about non linear Cl and Cd as most common issue of unexpected change in steering PID loop craft system. It may also be influenced by to steep momentum when you set different pitch angle or heading or any other outside force that was not exist previously when steering manager calculated Kp, Ki and Kd values.\n\u003C/p\u003E\n\u003Cp\u003E\nIIRC, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124987-hvacengi/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124987\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124987-hvacengi/\u0022 rel=\u0022\u0022\u003E@hvacengi\u003C/a\u003E have worked on steering manager for kOS, he might tell more accurate details how it works.\n\u003C/p\u003E\n\u003Cp\u003E\nTry to put mach velocity on the graph you posted above. Also grab screenshot of \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E velocity sweep graph from 0 to 2 mach and for \u003Cabbr title=\u0022Angle of Attack\u0022\u003EAoA\u003C/abbr\u003E 0 and 5.\u003Cbr\u003E\nFor each craft Cl and Cd is diffrent and become non linear sooner or later. So, aproximation of 0.8 up to 1.2 mach for transonic flight may not fit to all crafts. On your second video, pitching and heading is more stable, but you have heavy roll oscilation on transonic flight. You need to compare flight records (mach and \u003Cabbr title=\u0022Angle of Attack\u0022\u003EAoA\u003C/abbr\u003E) with \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E graphs from \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E/\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E for velocity sweep to see when you can expect unstable transonic flight regime.\n\u003C/p\u003E\n\u003Cp\u003E\nBased on represented data, it is nothing wrong with steering manager in terms of some software bugs involved. It attempts to do it\u0027s job best as it can, but it is not always perfect and you can\u0027t expect perfect ascent path as you desire. Considering how much variables are involved, kOS steering manager does it\u0027s job pretty well.\n\u003C/p\u003E\n\u003Cp\u003E\nAs much as I can recall from kOS documentation, it is possible to set different Kp, Ki, and Kd to steering manager if default settings does not give desired results. Also, other option is to not use build in steering manager, but to create your own with your own PID object and raw controls.\u003Cbr\u003E\nI tried this long time ago and realized that built in steering manager doing it\u0027s job much better than I was able to accomplish with separate PID controlers and raw control inputs.\n\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-05-23T18:47:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223603752\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558632421\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u003Cspan\u003E\uFEFF\u003C/span\u003E\u0027m \u003Cspan\u003E\uFEFF\u003C/span\u003Enot sure when \u003Cspan\u003E\uFEFF\u003C/span\u003Esteering manager re-calculate Kp, Ki and Kd during flight, but I know that \u003Cspan\u003E\uFEFF\u003C/span\u003Eit does\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223603752\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558632421\u0022 data-ipsquote-userid=\u0022127158\u0022 data-ipsquote-username=\u0022kcs123\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, kcs123 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nit is possible to \u003Cspan\u003E\uFEFF\u003C/span\u003Eset different Kp, Ki, and Kd \u003Cspan\u003E\uFEFF\u003C/span\u003Eto steering manager if default \u003Cspan\u003E\uFEFF\u003C/span\u003Esettings does \u003Cspan\u003E\uFEFF\u003C/span\u003Enot give desired results\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat I\u0027m going to try to do is take these two statements and put them together - as in, see if I can extract the PID adjustments from flights and re-apply them over the course of additional flights to better tune the system for the rocket in question\n\u003C/p\u003E\n"},{"CreatedByName":"kcs123","CreatedById":127158,"CreatedDateTime":"2019-05-23T19:45:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223603805\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558637275\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Drew Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n52 minutes ago, Drew Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat I\u0027m going to try to do is take these two statements and put them together - as in, see if I can extract the PID adjustments from flights and re-apply them over the course of additional flights to better tune the system for the rocket in question\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structures/misc/steeringmanager.html\u0022 rel=\u0022external nofollow\u0022\u003Epage in kOS document\u003C/a\u003E might be good starting point. Try to enable SHOWSTEERINGSTATS first, to see what you will get in terminal. I wasn\u0027t investigated much of steering manager suffixes, what is readable only what thing can be set and what not. But, I remembered pieces of those info when steering manager received coding overhaul several versions of kOS and KSP ago. I can\u0027t help you much more on this topic, but I hope it will be good for start.\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-05-25T12:59:31Z","Content":"\n\u003Cp\u003E\nCan anyone give me some pointers on part modules and operating stuff in the right click menus?\n\u003C/p\u003E\n\u003Cp\u003E\nI want to arm an Advanced Grabbing Unit, but can\u0027t work out the relationship between the part and names of the modules/variables that sit below that.\n\u003C/p\u003E\n\u003Cp\u003E\nFrom a rummage through the persistent save file I thought this would do it\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eset PartList to ship:parts.\nfor Parts in PartList {\n\tset part to Parts.\n\tif part:name = \u0022GrapplingDevice\u0022{\n\t\tprint \u0022Klaw fitted\u0022.\n\t\tpart:getmodule(\u0022ModuleGrappleNode\u0022):setfield(\u0022State\u0022,True).\n\t}\t\n}  \u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nBut it tells me there isn\u0027t a field called state, so I\u0027m a bit stuck.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2019-05-25T13:32:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604845\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558789171\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n25 minutes ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003E\t\tpart:getmodule(\u0022ModuleGrappleNode\u0022):setfield(\u0022State\u0022,True).\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nBut it tells me there isn\u0027t a field called state, so I\u0027m a bit stuck.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe error message could be a bit better here.\u00A0 It looks for a **SETTABLE** field called \u0022State\u0022, and can\u0027t find one.\u00A0 There could very well be a read-only field called \u0022State\u0022, in which case this will claim it \u0022doesn\u0027t exist\u0022, because the SETFIELD() command doesn\u0027t \u003Cspan\u003E\u0022see\u0022 the unsettable read-only fields.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe rule of thumb is this:\u00A0 If the GUI doesn\u0027t allow the manual, non-scripted player to directly set the thing with a button or slider or something, then kOS won\u0027t let a script do it either.\u00A0 This is so that kOS doesn\u0027t end up giving other mods surprises that introduce bugs.\u00A0 (Any other modder\u0027s code (or even SQUAD\u0027s own code) with an assumption that \u0022this field can\u0027t change unless my code changes it\u0022 could get very broken if kOS \u0022cheats\u0022 by altering the fields in ways a player normally couldn\u0027t.)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Flibble","CreatedById":196830,"CreatedDateTime":"2019-05-25T16:00:20Z","Content":"\n\u003Cp\u003E\nTry printing allfields on the part, it should give you a list of everything. You\u0027ll probably need to call an event or action called \u0022arm\u0022.\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-05-25T19:03:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604851\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558791165\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe error message could be a bit better here.\u00A0 It looks for a **SETTABLE** field called \u0022State\u0022, and can\u0027t find one.\u00A0 There could very well be a read-only field called \u0022State\u0022, in which case this will claim it \u0022doesn\u0027t exist\u0022, because the SETFIELD() command doesn\u0027t \u003Cspan\u003E\u0022see\u0022 the unsettable read-only fields.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe rule of thumb is this:\u00A0 If the GUI doesn\u0027t allow the manual, non-scripted player to directly set the thing with a button or slider or something, then kOS won\u0027t let a script do it either.\u00A0 This is so that kOS doesn\u0027t end up giving other mods surprises that introduce bugs.\u00A0 (Any other modder\u0027s code (or even SQUAD\u0027s own code) with an assumption that \u0022this field can\u0027t change unless my code changes it\u0022 could get very broken if kOS \u0022cheats\u0022 by altering the fields in ways a player normally couldn\u0027t.)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s the \u0022Arm\u0022 button on the right click menu I\u0027m trying to use, so presumably it should be available.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223604908\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221558800020\u0022 data-ipsquote-userid=\u0022196830\u0022 data-ipsquote-username=\u0022Flibble\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Flibble said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTry printing allfields on the part, it should give you a list of everything. You\u0027ll probably need to call an event or action called \u0022arm\u0022.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried\u00A0printing\u00A0\u003Cspan\u003E:\u003C/span\u003Eallfields, \u003Cspan\u003E:\u003C/span\u003Eallevents and :allactions for the ModuleGrappleNode\n\u003C/p\u003E\n\u003Cp\u003E\nIt returns no fields, 1 event (control from here) and 3 actions (release grapple, decouple node and control from here).\n\u003C/p\u003E\n\u003Cp\u003E\nNothing obvious for arming it.\n\u003C/p\u003E\n"}]}