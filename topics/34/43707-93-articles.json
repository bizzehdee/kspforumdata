{"TopicId":43707,"ForumId":34,"TopicTitle":"kOS Scriptable Autopilot System 0.9","CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-08-24T14:28:17Z","PageNum":93,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-12-10T05:58:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022woodywood245\u0022 data-cite=\u0022woodywood245\u0022\u003E\u003Cdiv\u003EAlso, I\u0027ve noticed that a lot of the code that gets written into the code base by people other than Kevin never see the light of day during release. Someone wrote the original Sensor Reporter code into the code base a while back (it wasn\u0027t me, and no one asked me), but it hasn\u0027t appeared in any releases.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI fear that Kevin\u0027s absence may trigger people to sacrifice good design for practicality in the face of the current situation, and have them put more and more stuff into \u0022side\u0022 mods for KSP that really belong in the main stock thing.\u003C/p\u003E\n"},{"CreatedByName":"woodywood245","CreatedById":72562,"CreatedDateTime":"2013-12-10T06:47:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI fear that Kevin\u0027s absence may trigger people to sacrifice good design for practicality in the face of the current situation, and have them put more and more stuff into \u0022side\u0022 mods for KSP that really belong in the main stock thing.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDuring the 0.8x debacle, I seriously considered writing a competitor to kOS that was compatible with the kOS language, but had features that kOS lacked, had a simpler architecture with well-documented code, and actually worked. I have some experience writing scripting engines, so I figured it probably wouldn\u0027t be too terribly difficult as long as I could learn enough of the KSP API. I had even begun working on it, and got a good way in before 0.9 was released. Since the 0.9 release, I stopped working on it, but I am always ready to pick it up again when the mood strikes me because I documented almost everything I did.\u003C/p\u003E\u003Cp\u003EI love kOS, but there are times (especially when I\u0027m looking at the source code), that the plugin makes me cringe. Examples: zero-based line numbers on error messages, lack of user-space exception handling, and the often-vague error messages that occur. And that\u0027s just a handful of things I would change.\u003C/p\u003E\u003Cp\u003EI momentarily thought about trying to fix the problems in kOS during the 0.8x thing, but the architecture is so complicated and full of anti-patterns that I\u0027m not sure it\u0027s worth the effort.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-12-10T09:35:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022woodywood245\u0022 data-cite=\u0022woodywood245\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI love kOS, but there are times (especially when I\u0027m looking at the source code), that the plugin makes me cringe. Examples: zero-based line numbers on error messages, lack of user-space exception handling, and the often-vague error messages that occur. And that\u0027s just a handful of things I would change.\u003C/p\u003E\u003Cp\u003EI momentarily thought about trying to fix the problems in kOS during the 0.8x thing, but the architecture is so complicated and full of anti-patterns that I\u0027m not sure it\u0027s worth the effort.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs a long-time programmer, zero-based anything doesn\u0027t bother me at all. It\u0027s less intuitive to the new programmer, but in the long run it\u0027s usually mathematically cleaner to count starting at zero, which is why languages tend to do it a lot. They\u0027re mimicking the language of mathematics when they do that.\u003C/p\u003E\u003Cp\u003EThat being said, the problem isn\u0027t that the line numbers start at zero. The problem is that even compensating for that they\u0027re still wrong most of the time. They\u0027re wrong for two reasons:\u003C/p\u003E\u003Cp\u003E1 - They only report based on counting from the start of the current context (sub-body of code, like if conditions, loop bodies, etc).\u003C/p\u003E\u003Cp\u003E2 - They CLAIM to be counting lines when they\u0027re actually counting statements. That\u0027s very different if you have more than one statement on the same line, or blank lines of padding, or comment lines.\u003C/p\u003E\u003Cp\u003E3 - Whenever a C# exception is raised the flagrant error will never report where it happened - always saying zero.\u003C/p\u003E\u003Cp\u003EThose are bigger problems. The fact that it starts at zero is rather minor in comparison to those problems. In fact starting at zero is only a problem due to a fact entirely external to kOS itself - that is the fact that text editors usually start at 1.\u003C/p\u003E\u003Cp\u003EI\u0027d much prefer it if kOS continued to *internally* count from zero but then just added 1 when reporting the error message.\u003C/p\u003E\u003Cp\u003EI looked at the github code but was reluctant to jump in because C# is new to me and I don\u0027t actually like it much compared to other languages. I did just a little one tiny thing - making it so you don\u0027t have to manually say \u0022switch to ...\u0022 when it first starts (you used to have to because the mod would start up with no selected volume yet and many file operations would error out as a result). Now I\u0027m reluctant to jump in purely because of the current highly forked nature of the code. Without someone to make leadership decisions about what pull requests are in and which are out, it\u0027s becoming a forest of *different* mods rather than one mod. So it\u0027s not a good time for a newcomer to start getting involved in it until something is done that unifies it again.\u003C/p\u003E\u003Cp\u003EOne thing I would like to do is to implement a database of queryable body data. I assume the API knows things the Wiki doesn\u0027t - like the SOI radius of bodies.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-10T09:39:56Z\u0022 title=\u002212/10/2013 09:39  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 10, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"woodywood245","CreatedById":72562,"CreatedDateTime":"2013-12-10T09:59:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EAs a long-time programmer, zero-based anything doesn\u0027t bother me at all. It\u0027s less intuitive to the new programmer, but in the long run it\u0027s usually mathematically cleaner to count starting at zero, which is why languages tend to do it a lot. They\u0027re mimicking the language of mathematics when they do that.\u003Cp\u003EThat being said, the problem isn\u0027t that the line numbers start at zero. The problem is that even compensating for that they\u0027re still wrong most of the time. They\u0027re wrong for two reasons:\u003C/p\u003E\u003Cp\u003E1 - They only report based on counting from the start of the current context (sub-body of code, like if conditions, loop bodies, etc).\u003C/p\u003E\u003Cp\u003E2 - They CLAIM to be counting lines when they\u0027re actually counting statements. That\u0027s very different if you have more than one statement on the same line, or blank lines of padding, or comment lines.\u003C/p\u003E\u003Cp\u003E3 - Whenever a C# exception is raised the flagrant error will never report where it happened - always saying zero.\u003C/p\u003E\u003Cp\u003EThose are bigger problems. The fact that it starts at zero is rather minor in comparison to those problems. In fact starting at zero is only a problem due to a fact entirely external to kOS itself - that is the fact that text editors usually start at 1.\u003C/p\u003E\u003Cp\u003EI\u0027d much prefer it if kOS continued to *internally* count from zero but then just added 1 when reporting the error message.\u003C/p\u003E\u003Cp\u003EI looked at the github code but was reluctant to jump in because C# is new to me and I don\u0027t actually like it much compared to other languages. I did just a little one tiny thing - making it so you don\u0027t have to manually say \u0022switch to ...\u0022 when it first starts (you used to have to because the mod would start up with no selected volume yet and many file operations would error out as a result). Now I\u0027m reluctant to jump in purely because of the current highly forked nature of the code. Without someone to make leadership decisions about what pull requests are in and which are out, it\u0027s becoming a forest of *different* mods rather than one mod. So it\u0027s not a good time for a newcomer to start getting involved in it until something is done that unifies it again.\u003C/p\u003E\u003Cp\u003EOne thing I would like to do is to implement a database of queryable body data. I assume the API knows things the Wiki doesn\u0027t - like the SOI radius of bodies.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve noticed the same problems. The zero-based line numbers don\u0027t bother me so much as get on my nerves. I guess it\u0027s a pet peeve. \u0022Array indices start at zero, line numbers start at 1,\u0022 is how my brain thinks of it.\u003C/p\u003E\u003Cp\u003EI\u0027ve been using C# as my primary language for a few years now. I switched from VB after I had to use C/C\u002B\u002B and Java in my classes, and I got to the point where I was accidentally writing C-like code in my VB programs.\u003C/p\u003E\u003Cp\u003EI\u0027d like to communicate with Kevin before I introduce any code into his code base, because I consider him the lead developer. Until then, I\u0027ll just keep adding stuff to my little mod, and taking things out when they appear in kOS.\u003C/p\u003E\u003Cp\u003EAs far as the SOI of a body, the field sphereOfInfluence is in the CelestialBody class. To get the SOI of the body you\u0027re orbiting, you can look at vessel.mainBody.sphereOfInfluence.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-12-10T10:41:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022woodywood245\u0022 data-cite=\u0022woodywood245\u0022\u003E\u003Cdiv\u003EI\u0027ve noticed the same problems. The zero-based line numbers don\u0027t bother me so much as get on my nerves. I guess it\u0027s a pet peeve. \u0022Array indices start at zero, line numbers start at 1,\u0022 is how my brain thinks of it.\u003Cp\u003EI\u0027ve been using C# as my primary language for a few years now. I switched from VB after I had to use C/C\u002B\u002B and Java in my classes, and I got to the point where I was accidentally writing C-like code in my VB programs.\u003C/p\u003E\u003Cp\u003EI\u0027d like to communicate with Kevin before I introduce any code into his code base, because I consider him the lead developer. Until then, I\u0027ll just keep adding stuff to my little mod, and taking things out when they appear in kOS.\u003C/p\u003E\u003Cp\u003EAs far as the SOI of a body, the field sphereOfInfluence is in the CelestialBody class. To get the SOI of the body you\u0027re orbiting, you can look at vessel.mainBody.sphereOfInfluence.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFor me it\u0027s more because I keep thinking in Java or C\u002B\u002B instead of in C#. I come from the world of UNIX programming, where C# isn\u0027t really used very much because of it being a Microsoft thing.\u003C/p\u003E\u003Cp\u003EThe other thing I\u0027d like to do besides have a body database is look at all the \u0022can\u0027t compare number to number\u0022 problems. People have been trying to fix it by making every single number in the mod into a Double, but that seems like its approaching the problem from the wrong end. If the code exists already that translates all numeric types into the word \u0022Number\u0022 when reporting them, that seems to indicate the intention to actually support a mixture of numeric types, otherwise that wouldn\u0027t be needed. It seems the right response is to add the logic to do type promotion to the expression system.\u003C/p\u003E\n"},{"CreatedByName":"adammada","CreatedById":29884,"CreatedDateTime":"2013-12-10T12:22:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022\\\u0022 data-cite=\u0022\\\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EDuring the 0.8x debacle, I seriously considered writing a competitor to kOS that was compatible with the kOS language, but had features that kOS lacked, had a simpler architecture with well-documented code, and actually worked. I have some experience writing scripting engines, so I figured it probably wouldn\u0027t be too terribly difficult as long as I could learn enough of the KSP API. I had even begun working on it, and got a good way in before 0.9 was released. Since the 0.9 release, I stopped working on it, but I am always ready to pick it up again when the mood strikes me because I documented almost everything I did.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo it. Seriously. Publish on github, let others contribute. I was thinking about something like \u0022get kOS terminal, and add LUA to it\u0022, but LUA is not that friendly, and i\u0027m new to C#. So I just added pull requests to kOS, but Kevin is absent.\u003C/p\u003E\u003Cp\u003EKSP API is not that hard, and kOS just uses MechJeb utility functions for few more complex things.\u003C/p\u003E\n"},{"CreatedByName":"sarkun","CreatedById":10559,"CreatedDateTime":"2013-12-10T16:04:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EMaybe \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/51211-Sensor-Reporter-for-kOS\u0022 rel=\u0022external nofollow\u0022\u003ESensor Reporter\u003C/a\u003E could be of use \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOooh, that looks awesome! Will try when I get home.\u003C/p\u003E\n"},{"CreatedByName":"Radiokopf","CreatedById":74552,"CreatedDateTime":"2013-12-10T16:05:32Z","Content":"\n\u003Cp\u003EHi,\u003C/p\u003E\u003Cp\u003Ei try to recreate the rover tutorial but when i try \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Eabs(target:bearing)\u003C/div\u003E\u003C/blockquote\u003E it says \u0022not a number\u0022. \u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Etarget:bearing\u003C/div\u003E\u003C/blockquote\u003E works fine. So what am i doing wrong ? or did somethign change since the making of the ideo ?\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Eprint ABS(apoapsis).\u003C/div\u003E\u003C/blockquote\u003E works for me...\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Eset x to target:bearing.\u003Cp\u003Eprint abs(x).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eworks for now... maybe someone can tell my why \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003Eso...\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Eset x to 1.\u003C/p\u003E\u003Cp\u003Eif x = 1 (print \u0022true\u0022.).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Edoes not work.. i dont get this..\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-10T16:54:34Z\u0022 title=\u002212/10/2013 04:54  PM\u0022 data-short=\u002210 yr\u0022\u003EDecember 10, 2013\u003C/time\u003E by Radiokopf\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2013-12-10T17:05:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI have found that trying to use \u0022revert flight\u0022 too many times with KOS enabled can do this (the black death effect). I\u0027ve had success avoiding it by doing this:\u003Cp\u003EEvery time you\u0027re about to revert flight, FIRST go into the KOS terminal and give the command \u0022SHUTDOWN.\u0022. THEN revert the flight.\u003C/p\u003E\u003Cp\u003EThere is something the KOS DLL is doing that leaves behind something still running when you revert flight. I\u0027m not sure what it is, but a manual shutdown seems to avoid it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have found the cause of my issue. I have narrowed down the point that I lose control as the point when a program is running and I either dock with another craft or select \u0060control from here\u0060 on a docking port.\u003C/p\u003E\u003Cp\u003EI discovered this when I had a craft made from a command module and a lander that were docked and fully controllable and steering locked to prograde very well and as soon as I selected the docking port of the lander and clicked to \u0060control from here\u0060 the craft went into a wild spin and could not be steered with \u0060lock steering to\u0060\u003C/p\u003E\u003Cp\u003ENow I can simply not do that and all will be fine (fingers crossed)\u003C/p\u003E\n"},{"CreatedByName":"AbeS","CreatedById":80644,"CreatedDateTime":"2013-12-10T18:21:37Z","Content":"\n\u003Cp\u003E@Radiokopf, the last one should be:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset x to 1.\u003Cbr\u003Eif x=1 {print \u0022true\u0022.}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E{} instead of ()\u003C/p\u003E\n"},{"CreatedByName":"XanderTek","CreatedById":92553,"CreatedDateTime":"2013-12-10T19:18:40Z","Content":"\n\u003Cp\u003EI\u0027m hoping I can get a little debugging help with my first attempt at a kOS script. I wanted to set up some sepratrons to fire just before landing to slow down a vehicle.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ewait until verticalspeed\u0026lt;-1 AND ALT:RADAR\u0026lt;15.\u003Cbr\u003Estage.\u003Cbr\u003Eprint \u0022Breaking!\u0022.\u003Cbr\u003Ewait until verticalspeed\u0026gt;0.1.\u003Cbr\u003Estage.\u003Cbr\u003Eprint \u0022Done!\u0022.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe craft contains:\u003C/p\u003E\u003Cp\u003Estage 0: decouplers for the sepratrons\u003C/p\u003E\u003Cp\u003Estage 1: sepratrons\u003C/p\u003E\u003Cp\u003Estage 2: liquid fuel engine (just to get me off the launchpad for testing purposes)\u003C/p\u003E\u003Cp\u003EThe sepratrons fire when they\u0027re supposed to, but they never decouple and burn long enough that the craft starts ascending (positive vertical speed). The program prints \u0022Done!\u0022 and finishes, but stage 0 remains untriggered. I can manually trigger stage 0, at which point they do decouple. Any idea why that second \u0022stage\u0022 command wouldn\u0027t work? \u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\n"},{"CreatedByName":"woodywood245","CreatedById":72562,"CreatedDateTime":"2013-12-10T19:35:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThe other thing I\u0027d like to do besides have a body database is look at all the \u0022can\u0027t compare number to number\u0022 problems. People have been trying to fix it by making every single number in the mod into a Double, but that seems like its approaching the problem from the wrong end. If the code exists already that translates all numeric types into the word \u0022Number\u0022 when reporting them, that seems to indicate the intention to actually support a mixture of numeric types, otherwise that wouldn\u0027t be needed. It seems the right response is to add the logic to do type promotion to the expression system.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can\u0027t be sure, but I think a lot of the comparison problems stem from the fact that the \u0022var\u0022 type is used far too often. Ever since var was introduced in C#, people have been going crazy with it. C# is generally a strongly-typed language, which can do some limited implicit casting (about as much as C/C\u002B\u002B can). The var keyword breaks that, and when you use it for things it wasn\u0027t intended for (var was designed for implicit type assignment from LINQ statements, where you may not always know the output type), it can really mess things up.\u003C/p\u003E\n"},{"CreatedByName":"woodywood245","CreatedById":72562,"CreatedDateTime":"2013-12-10T19:40:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022XanderTek\u0022 data-cite=\u0022XanderTek\u0022\u003E\u003Cdiv\u003EI\u0027m hoping I can get a little debugging help with my first attempt at a kOS script. I wanted to set up some sepratrons to fire just before landing to slow down a vehicle.\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ewait until verticalspeed\u0026lt;-1 AND ALT:RADAR\u0026lt;15.\u003Cbr\u003Estage.\u003Cbr\u003Eprint \u0022Breaking!\u0022.\u003Cbr\u003Ewait until verticalspeed\u0026gt;0.1.\u003Cbr\u003Estage.\u003Cbr\u003Eprint \u0022Done!\u0022.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe craft contains:\u003C/p\u003E\u003Cp\u003Estage 0: decouplers for the sepratrons\u003C/p\u003E\u003Cp\u003Estage 1: sepratrons\u003C/p\u003E\u003Cp\u003Estage 2: liquid fuel engine (just to get me off the launchpad for testing purposes)\u003C/p\u003E\u003Cp\u003EThe sepratrons fire when they\u0027re supposed to, but they never decouple and burn long enough that the craft starts ascending (positive vertical speed). The program prints \u0022Done!\u0022 and finishes, but stage 0 remains untriggered. I can manually trigger stage 0, at which point they do decouple. Any idea why that second \u0022stage\u0022 command wouldn\u0027t work? \u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not sure what the cause of this is, but some operations won\u0027t finish before the program ends. The bandaid I use is to tack on a \u0022wait 1.\u0022 at the end of the program.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-12-10T20:52:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022XanderTek\u0022 data-cite=\u0022XanderTek\u0022\u003E\u003Cdiv\u003EI\u0027m hoping I can get a little debugging help with my first attempt at a kOS script. I wanted to set up some sepratrons to fire just before landing to slow down a vehicle.\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ewait until verticalspeed\u0026lt;-1 AND ALT:RADAR\u0026lt;15.\u003Cbr\u003Estage.\u003Cbr\u003Eprint \u0022Breaking!\u0022.\u003Cbr\u003Ewait until verticalspeed\u0026gt;0.1.\u003Cbr\u003Estage.\u003Cbr\u003Eprint \u0022Done!\u0022.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe craft contains:\u003C/p\u003E\u003Cp\u003Estage 0: decouplers for the sepratrons\u003C/p\u003E\u003Cp\u003Estage 1: sepratrons\u003C/p\u003E\u003Cp\u003Estage 2: liquid fuel engine (just to get me off the launchpad for testing purposes)\u003C/p\u003E\u003Cp\u003EThe sepratrons fire when they\u0027re supposed to, but they never decouple and burn long enough that the craft starts ascending (positive vertical speed). The program prints \u0022Done!\u0022 and finishes, but stage 0 remains untriggered. I can manually trigger stage 0, at which point they do decouple. Any idea why that second \u0022stage\u0022 command wouldn\u0027t work? \u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan you hear a second \u0022click\u0022 right after the first stage? If so then it did try to do it but KSP doesn\u0027t allow staging too quickly. I\u0027ve had a hard time trying to hit \u0022stage\u0022 successively less than a second apart sometimes. That\u0027s true both in kOS and just flying KSP manually too. If I hit spacebar two times quickly in succession sometimes the second one just goes \u0022click\u0022 and doesn\u0027t do anything and I have to hit it again. \u003C/p\u003E\u003Cp\u003EHere\u0027s the sort of logic I tend to use when I stage:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// Put this at the top of the code as a global config setting:\u003Cbr\u003E// assumeJustFuel:\u003Cbr\u003E//    A lower bound for the amount of mass you expect is a lot\u003Cbr\u003E//    smaller than the mass in any of your stages.  If the mass\u003Cbr\u003E//    changes by less than this much in the time it takes to run\u003Cbr\u003E//    a few statements it is probably just from burning fuel.\u003Cbr\u003E//    If it changes by more than this much it\u0027s\u003Cbr\u003E//    probably because you lost part of the vessel from staging.\u003Cbr\u003Eset assumeJustFuel to 0.2.\u003Cbr\u003E\u003Cbr\u003E// Then when staging do this:\u003Cbr\u003Eset prevMass to mass.\u003Cbr\u003Euntil mass \u0026lt; (prevMass-assumeJustFuel) { stage. wait 0.25. }.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEssentially it just does what a human does when playing - hit the spacebar until it seems like a piece of the craft comes off. A human uses eyeballs to detect this, the script uses mass to detect it.\u003C/p\u003E\u003Cp\u003EIn your case it might be really fiddly to get theassumeJustFuel threshold just right since you\u0027re only expecting to lose the mass of sepratrons when you stage and that\u0027s a small enough amount that it might be mistaken for fuel loss.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-12-10T21:01:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Radiokopf\u0022 data-cite=\u0022Radiokopf\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Edoes not work.. i dont get this..\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOften \u0022print\u0022 works in places where nothing else does, when it comes to \u0022invalid\u0022 types. So you can print a number out just fine but then can\u0027t do any math with it or comparisons on it. This is because \u0022print\u0022 is a lot more tolerant of any random hodgepodge of object types than the rest of kOS is. One of the ideas that C# copied directly from Java is the idea that any object in the system can implement a \u0022toString\u0022 method that returns a string representation of itself and once it does that then it magically \u0022just works\u0022 in any context where someone is trying to use it like a string (like when printing it).\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-12-10T21:05:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022John FX\u0022 data-cite=\u0022John FX\u0022\u003E\u003Cdiv\u003EI have found the cause of my issue. I have narrowed down the point that I lose control as the point when a program is running and I either dock with another craft or select \u0060control from here\u0060 on a docking port.\u003Cp\u003EI discovered this when I had a craft made from a command module and a lander that were docked and fully controllable and steering locked to prograde very well and as soon as I selected the docking port of the lander and clicked to \u0060control from here\u0060 the craft went into a wild spin and could not be steered with \u0060lock steering to\u0060\u003C/p\u003E\u003Cp\u003ENow I can simply not do that and all will be fine (fingers crossed)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOkay. I wasn\u0027t talking about the difficulties you had with steering when I talked about reverting flight with a kOS unit turned on, by the way - that I don\u0027t know what\u0027s going on with. I was talking about the black screen of death requiring you to kill KSP and re-run it from scratch. THAT is a thing I only got when reverting flight without shutdown more than a few times and it stopped happening after I got in the habit of always doing a shutdown before reverting.\u003C/p\u003E\n"},{"CreatedByName":"XanderTek","CreatedById":92553,"CreatedDateTime":"2013-12-10T21:52:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003ECan you hear a second \u0022click\u0022 right after the first stage? If so then it did try to do it but KSP doesn\u0027t allow staging too quickly. I\u0027ve had a hard time trying to hit \u0022stage\u0022 successively less than a second apart sometimes. That\u0027s true both in kOS and just flying KSP manually too. If I hit spacebar two times quickly in succession sometimes the second one just goes \u0022click\u0022 and doesn\u0027t do anything and I have to hit it again. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, that seems to be it. I was hearing the click. Adding a small \u0022wait\u0022 between the stages seems to do the trick so far. If the problem comes back, I\u0027ll try your approach of repeating stage until something changes.\u003C/p\u003E\n"},{"CreatedByName":"Daisai","CreatedById":78873,"CreatedDateTime":"2013-12-10T23:13:21Z","Content":"\n\u003Cp\u003EI get the error \u0022expression error processing statement\u0022, even though when i simply use the exact same command without editing it it does not give this error.\u003C/p\u003E\u003Cp\u003EFor example when i try to launch a rocket i give the command \u0022TOGGLE AG1\u0022 \u003C/p\u003E\u003Cp\u003EI am wondering though if its possible to enable a script you made for a vehicle then change to something else and to see it run it anyway ?\u003C/p\u003E\u003Cp\u003EBecause if thats not possible i don\u0027t really see the point in spending to much time on this.\u003C/p\u003E\u003Cp\u003EEven when trying the example from your video\u0027s it does not work.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-10T23:24:43Z\u0022 title=\u002212/10/2013 11:24  PM\u0022 data-short=\u002210 yr\u0022\u003EDecember 10, 2013\u003C/time\u003E by Daisai\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Amazingteknique","CreatedById":89361,"CreatedDateTime":"2013-12-11T05:23:11Z","Content":"\n\u003Cp\u003EJust been getting interested in picking up kOS and checking it out, I have one question about how it plays with remote tech currently before I get too involved. Does the signal have any effect on this at the current moment or is it something you more or less have to pretend.\u003C/p\u003E\n"},{"CreatedByName":"woodywood245","CreatedById":72562,"CreatedDateTime":"2013-12-11T07:22:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Amazingteknique\u0022 data-cite=\u0022Amazingteknique\u0022\u003E\u003Cdiv\u003EJust been getting interested in picking up kOS and checking it out, I have one question about how it plays with remote tech currently before I get too involved. Does the signal have any effect on this at the current moment or is it something you more or less have to pretend.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EkOS is not compatible with RemoteTech at the moment, unfortunately.\u003C/p\u003E\n"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2013-12-11T10:00:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EOkay. I wasn\u0027t talking about the difficulties you had with steering when I talked about reverting flight with a kOS unit turned on, by the way - that I don\u0027t know what\u0027s going on with. I was talking about the black screen of death requiring you to kill KSP and re-run it from scratch. THAT is a thing I only got when reverting flight without shutdown more than a few times and it stopped happening after I got in the habit of always doing a shutdown before reverting.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou are completely right, I was suffering two different \u0060features\u0060. I have done some testing and locked it down as it seemed a bit random. KOS freaks out if you have a craft being controlled from (only tested this one pod) the three man pod and then you select a docking port and \u0060control from here\u0060. At this point KOS loses the ability to tell the facing of your craft permanently.\u003C/p\u003E\u003Cp\u003EEDIT: Until you reselect the 3 man pod and \u0060control from here\u0060 at which point the craft becomes completely controllable again!\u003C/p\u003E\u003Cp\u003EOK, at least I know what to do about that happening and why it happens. Now I just need to figure out a way of landing my lander as that pretty much needs to be controlled from a docking port... (might put an octo core somewhere hidden...)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-11T10:05:07Z\u0022 title=\u002212/11/2013 10:05  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 11, 2013\u003C/time\u003E by John FX\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2013-12-11T11:23:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022woodywood245\u0022 data-cite=\u0022woodywood245\u0022\u003E\u003Cdiv\u003EThere are a lot of things I\u0027ve written that I\u0027d love to see integrated directly into kOS (most of it being in the kOSExtensions portion of Sensor Reporter), and a few ideas I can\u0027t implement without changing the kOS source\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI like what I am hearing.\u003C/p\u003E\u003Cp\u003EAlthough I really like Kevin\u0027s approach and way of handling things, I am kind of relieved that someone might be interested in taking over when push comes to shove. Someone that seems capable to, that is \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022woodywood245\u0022 data-cite=\u0022woodywood245\u0022\u003E\u003Cdiv\u003EI love kOS, but there are times (especially when I\u0027m looking at the source code), that the plugin makes me cringe. Examples: zero-based line numbers on error messages, lack of user-space exception handling, and the often-vague error messages that occur. And that\u0027s just a handful of things I would change.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELet us not forget that it is very much a work in progress \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Although I am in a different line of work, my early constructs are often horrible when looking at it from a finished product point of view. I mean, even a lot of KSP is or has been a placeholder for a long time.\u003C/p\u003E\u003Cp\u003EAnd of course people have different styles and opinions on how things should be done and what is important. I think this is very true for programming.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EOne thing I would like to do is to implement a database of queryable body data. I assume the API knows things the Wiki doesn\u0027t - like the SOI radius of bodies.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI do not think this would be a good thing. In general, it seems fair to only include things that could be queried in real life. If you want to have the SOI radius, there is no way a program could know, other than humans telling it that information. That is perfectly feasible right now, as you can make data files to access when needed.\u003C/p\u003E\u003Cp\u003EI also believe that is the direction Kevin is heading, as he has implemented quite some things that do not make life easy, but do make sense from a \u003Cem\u003Ediscrete computer in a world\u003C/em\u003E point of view.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-11T11:28:31Z\u0022 title=\u002212/11/2013 11:28  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 11, 2013\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"adammada","CreatedById":29884,"CreatedDateTime":"2013-12-11T11:47:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIf you want to have the SOI radius, there is no way a program could know, other than humans telling it that information. That is perfectly feasible right now, as you can make data files to access when needed.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere is diffecence between making things too easy and making them just annoying. As you just laid out - player just needs to write script with values from KSP wiki.Its not an achievment to do such script. Its just plain annoying that it has to be done. \u003C/p\u003E\u003Cp\u003EIf we want realism there should not be \u0022lock steering to...\u0022 function, because that makes everything too easy, and writing own good \u0022autopilot\u0022 would be achievment.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2013-12-11T12:27:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022adammada\u0022 data-cite=\u0022adammada\u0022\u003E\u003Cdiv\u003EThere is diffecence between making things too easy and making them just annoying. As you just laid out - player just needs to write script with values from KSP wiki.Its not an achievment to do such script. Its just plain annoying that it has to be done.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think mods should mainly stick to their core values, which in this case means not providing any magic values. If someone wants to add them through a mod or by having a ready made community script, sure, why not? But other than that it really breaks the intention of the mod and the fourth wall of the game. \u003Cspan style=\u0022font-size:8px;\u0022\u003EI also would like to contend that implementing an efficient database is no challenge.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EPart of the game (for me) is launching probes and sounding rockets to find these things out \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIf we want realism there should not be \u0022lock steering to...\u0022 function, because that makes everything too easy, and writing own good \u0022autopilot\u0022 would be achievment.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI do agree on this one. Using the lock command does feel like cheating at times, but in absence of direct input commands using it is inevitable in a lot of cases. Though I am certainly working on a more involved script that takes care of everything itself.\u003C/p\u003E\n"},{"CreatedByName":"adammada","CreatedById":29884,"CreatedDateTime":"2013-12-11T13:18:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI think mods should mainly stick to their core values, which in this case means not providing any magic values. If someone wants to add them through a mod or by having a ready made community script, sure, why not? But other than that it really breaks the intention of the mod and the fourth wall of the game.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t understand why it \u0022breaks the intention of the mod\u0022. This mod already has built-in body database. After typing ship:body you will probably get \u0022Kerbin\u0022. You can get Kerbin mass. You can even get kerbin radious by doing some count (Kerbin:position:mag - altitude).\u003C/p\u003E\u003Cp\u003ESo its just being annoying that you have Kerbin:mass and don\u0027t have Kerbin:radious and few other body parameters.\u003C/p\u003E\n"}]}