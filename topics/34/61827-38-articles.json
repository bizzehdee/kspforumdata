{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":38,"Articles":[{"CreatedByName":"Entropius","CreatedById":104709,"CreatedDateTime":"2014-06-14T01:41:28Z","Content":"\n\u003Cp\u003EI\u0027m not sure if anybody cares for it but just in case somebody finds it useful, here\u0027s a floppy disk icon I made for labeling kOS parts in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/35018-0-23-5-PartCatalog-3-0-RC4-(2014-06-09)\u0022 rel=\u0022external nofollow\u0022\u003EPart Catalog.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/ZlyrJwD.png\u0022 alt=\u0022ZlyrJwD.png\u0022\u003E\u003Cimg src=\u0022http://i.imgur.com/Xz4uacK.png\u0022 alt=\u0022Xz4uacK.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-06-14T02:00:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Entropius\u0022 data-cite=\u0022Entropius\u0022\u003E\u003Cdiv\u003EI\u0027m not sure if anybody cares for it but just in case somebody finds it useful, here\u0027s a floppy disk icon I made for labeling kOS parts in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/35018-0-23-5-PartCatalog-3-0-RC4-(2014-06-09)\u0022 rel=\u0022external nofollow\u0022\u003EPart Catalog.\u003C/a\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/ZlyrJwD.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/ZlyrJwD.png\u003C/a\u003E \u003Ca href=\u0022http://i.imgur.com/Xz4uacK.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/Xz4uacK.png\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E that is great\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-16T13:18:02Z","Content":"\n\u003Cp\u003EI\u0027ve been banging a head against several brick walls for a few hours now, trying to get a reliable automatic staging script to work but I\u0027m not getting anywhere because of what I think is incorrect numbers from KSP itself. Has anyone else noticed this? \u003C/p\u003E\u003Cp\u003EMy basic code is like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset throttleVal to 1.\u003Cbr\u003Elock throttle to throttleVal.\u003Cbr\u003E\u003Cbr\u003Elock currentLiquidFuel to ship:liquidfuel.\u003Cbr\u003Eset lastLiquidFuel to currentLiquidFuel.\u003Cbr\u003Eset currentFuelFlow to 0. \u003Cbr\u003Eset lastFuelFlow to 0.\u003Cbr\u003Eset lastCheck to 0.\u003Cbr\u003E\u003Cbr\u003Euntil 0 {\u003Cbr\u003E    set now to time:seconds.\u003Cbr\u003E    set currentFuelFlow to ((lastLiquidFuel - currentLiquidFuel) / throttleVal) / (now-lastCheck).\u003Cbr\u003E\u003Cbr\u003E    //.... do stuff\u003Cbr\u003E\u003Cbr\u003E    set lastFuelFlow to currentFuelFlow.\u003Cbr\u003E    set lastLiquidFuel to currentLiquidFuel.\u003Cbr\u003E    set lastCheck to now.\u003Cbr\u003E\u003Cbr\u003E    wait 0.1.   \u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ETo my understanding currentFuelFlow should give me a reliable fuel flow, taking into account changes in throttle and fluctuations in loop duration. The number should be quite stable as long as all engines have fuel. It is not. Well it is most of the time but there are short and sudden fluctuations (around double the fuel flow for one or two cycles, then back to the average) every now and then.\u003C/p\u003E\u003Cp\u003EThe idea of the script is to stage when the fuel flow suddenly drops by more than a certain threshold but as long as I experience these glitches that is impossible since it will stage immediately after one of the glitches.\u003C/p\u003E\u003Cp\u003ENote that the throttleVal doesn\u0027t change at the moment so it could be taken out but this is in preparation of ascend scenarios where the throttleVal \u003Cem\u003Ewill\u003C/em\u003E change.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-06-16T14:46:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThe idea of the script is to stage when the fuel flow suddenly drops by more than a certain threshold but as long as I experience these glitches that is impossible since it will stage immediately after one of the glitches.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIs that not your answer? Build a slightly more conservative trigger that needs the new value to be there for a loop or 5 to 10, so that you are sure this is permanent.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-16T14:54:06Z","Content":"\n\u003Cp\u003ESure, that\u0027s the workaround. \u003C/p\u003E\u003Cp\u003EI put this up in order to find out whether anyone else experienced these kind of glitches. kOS having the limited amount of memory that it has, I try to avoid workarounds wherever possible cause they eat up space and are yet-another source for bugs. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-06-16T15:09:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003E put this up in order to find out whether anyone else experienced these kind of glitches. kOS having the limited amount of memory that it has, I try to avoid workarounds wherever possible cause they eat up space and are yet-another source for bugs. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThough it should probably be a feature and not an (accidental) bug, I feel that dealing with noise and the occasional strange reading is pretty much part of making a good control system. If only real life were so decent to provide picture perfect values. \u003C/p\u003E\u003Cp\u003EBut, like I said, this should be done in a controller fashion and not by accident , which seems to be the case here.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-16T16:37:28Z\u0022 title=\u002206/16/2014 04:37  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 16, 2014\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-16T15:17:16Z","Content":"\n\u003Cp\u003EOh I totally agree on the controller part \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. Being fault tolerant is what makes writing kOS scripts fun most of the time.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-16T15:35:37Z","Content":"\n\u003Cp\u003EHeureka! \u003C/p\u003E\u003Cp\u003ETurns out it was a bug on my end, happening because my currentLiquidFuel variable was locked to ship:liquidfuel. That caused the value to change between the currentFuelFlow calculation on top of the loop and the assignment to lastLiquidFuel at the end of the loop, introducing deviations if one cycle took much longer than the previous one.\u003C/p\u003E\u003Cp\u003ENew code still doesn\u0027t work but thats a time-resolution problem which should be easy enough to fix - after watching the match \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EChanges markeed in bold-underline.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset throttleVal to 1.\u003Cbr\u003Elock throttle to throttleVal.\u003Cbr\u003E\u003Cbr\u003E[B][U]set [/U][/B]currentLiquidFuel to ship:liquidfuel.\u003Cbr\u003Eset lastLiquidFuel to currentLiquidFuel.\u003Cbr\u003Eset currentFuelFlow to 0. \u003Cbr\u003Eset lastFuelFlow to 0.\u003Cbr\u003Eset lastCheck to 0.\u003Cbr\u003E\u003Cbr\u003Euntil 0 {\u003Cbr\u003E    set now to time:seconds.\u003Cbr\u003E    [B][U]set currentLiquidFuel to ship:liquidfuel.[/U][/B]\u003Cbr\u003E    set currentFuelFlow to ((lastLiquidFuel - currentLiquidFuel) / throttleVal) / (now-lastCheck).\u003Cbr\u003E\u003Cbr\u003E    //.... do stuff\u003Cbr\u003E\u003Cbr\u003E    set lastFuelFlow to currentFuelFlow.\u003Cbr\u003E    set lastLiquidFuel to currentLiquidFuel.\u003Cbr\u003E    set lastCheck to now.\u003Cbr\u003E\u003Cbr\u003E    wait 0.1.   \u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-06-16T17:50:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003ESure, that\u0027s the workaround. \u003Cp\u003EI put this up in order to find out whether anyone else experienced these kind of glitches. kOS having the limited amount of memory that it has, I try to avoid workarounds wherever possible cause they eat up space and are yet-another source for bugs. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EkoS has plenty of memory. Did you mean disk space?\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-16T18:05:01Z","Content":"\n\u003Cp\u003EErm... yeah... the 5000 byte space on the small probe comp \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. Sorry for the confusion hehehe\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-06-16T18:22:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003E [ stuff ] \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t necessarily think this is related to the problem, but I think it\u0027s a really good idea to add a line as shown:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset throttleVal to 1.\u003Cbr\u003Elock throttle to throttleVal.\u003Cbr\u003E\u003Cbr\u003E[B][U]set [/U][/B]currentLiquidFuel to ship:liquidfuel.\u003Cbr\u003Eset lastLiquidFuel to currentLiquidFuel.\u003Cbr\u003Eset currentFuelFlow to 0. \u003Cbr\u003Eset lastFuelFlow to 0.\u003Cbr\u003Eset lastCheck to 0.\u003Cbr\u003E\u003Cbr\u003Euntil 0 {\u003Cbr\u003E    set now to time:seconds.\u003Cbr\u003E    [B][U]set currentLiquidFuel to ship:liquidfuel.[/U][/B]\u003Cbr\u003E    set currentFuelFlow to ((lastLiquidFuel - currentLiquidFuel) / throttleVal) / (now-lastCheck).\u003Cbr\u003E\u003Cbr\u003E    //.... do stuff\u003Cbr\u003E\u003Cbr\u003E    wait 0.00001. // \u0026lt;------  NEWLY ADDED LINE.\u003Cbr\u003E    set lastFuelFlow to currentFuelFlow.\u003Cbr\u003E    set lastLiquidFuel to currentLiquidFuel.\u003Cbr\u003E    set lastCheck to now.\u003Cbr\u003E\u003Cbr\u003E    wait 0.1.   // \u0026lt;---- Maybe reduce this to something very small like 0.0001\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis is because of some features of how kOS works that I\u0027ve just found over the last few weeks that is awaiting documentation (I wrote the document, but it\u0027s not publishable until some other things about the next release are worked out because of other unrelated changes in the documentation that might not still be true anymore once the release is finalized.).\u003C/p\u003E\u003Cp\u003EAnyway that feature is this: kOS executes a certain number of underlying CPU instructions per physics tick of the KSP universe. (The exact number can be found by using PRINT CONFIG:IPU.) Keep in mind that the number of underlying instructions per line of code is not a 1:1 match. There are generally about 1-5 instructions per expression term - ish. Anyway the important thing is that the entire physical universe, including the clock time, the amount of consumables left (ship:liquidfuel), the position, the velocity, etc, is utterly frozen during the running of those statements. If you SET VAR TO TIME:SECONDS, then SET VAR2 TO SHIP:LIQUIDFUEL, then SET VAR3 TO SHIP:VELOCITY:ORBIT, and all those commands just happen to occur in the same KSP physics tick, then they represent a correct snapshot of that one instant in time, BUT, if the end of a physics tick happens to occur right in the middle of them, then the later statements are taking measurements from a different physics tick than the previous ones, i.e, like so:\u003C/p\u003E\u003Cp\u003EImagine this scenario:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Esome code here.\u003Cbr\u003E\u003Cbr\u003E// \u0026lt;-- A new physcs tick happens to start here.\u003Cbr\u003E\u003Cbr\u003Esome more code here.\u003Cbr\u003E\u003Cbr\u003Esome more code here.\u003Cbr\u003E\u003Cbr\u003Eset var1 to time:seconds.\u003Cbr\u003E// \u0026lt;-- The physics tick happens to end here.\u003Cbr\u003E// \u0026lt;-- A new physics tick starts here.\u003Cbr\u003Eset var2 to ship:liquidfuel.\u003Cbr\u003Eset var3 to ship:velocity:orbit.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf that occurs, then var1 is referring to a clock time that is a whole physics tick earlier than the time the var2 and var3 measurements were taken. For a program like you\u0027re trying to make that could throw off your results by quite a bit. In fact, exactly by doubling and halving factors, as it makes timeslice measurements exactly twice as long, or half as long, as expected.\u003C/p\u003E\u003Cp\u003ESo the fix is that when you want to take samples of several measurements of the universe that were meant to refer to a single snapshot in time rather than being taken from a mix of two different snapshots in time, you have to do something that guarantees the physics tick won\u0027t end in the midst of taking those samples. And the way to do it is to force kOS to pause a moment and wait for the start of the next physics tick immediately before starting into the section of code where you take all the measurements. That way you know it will get through all the measurements in one go before the next border between physics ticks.\u003C/p\u003E\u003Cp\u003EAnd the WAIT statement does that because no matter what the WAIT condition is, no matter how small the WAIT time is, it\u0027s guaranteed to put the program to sleep until the next physics tick at least, where it wakes up and checks the wait condition to see if it\u0027s time to continue executing. (Effectively this means its actually impossible for WAIT to wait for a period of time less than one physics tick. If your physics ticks are occuring once every 1/10th of a second, then a WAIT 0.05 and a WAIT 0.00001 are effectively identical.)\u003C/p\u003E\u003Cp\u003ESaying WAIT 0.00001 is a way of saying \u0022wait for the next physics tick rather than 0.00001 seconds, since there\u0027s no way your KSP is running with physics ticks smaller than 0.00001 seconds.\u0022\u003C/p\u003E\n"},{"CreatedByName":"Joe32320","CreatedById":81055,"CreatedDateTime":"2014-06-16T18:42:53Z","Content":"\n\u003Cp\u003EI can\u0027t comment on the glitches, but a different way to do a staging program is to list all engines, then check each engine to see if it has flamed-out, if an engine has flamed-out, then stage, if not, don\u0027t.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-06-16T19:14:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Joe32320\u0022 data-cite=\u0022Joe32320\u0022\u003E\u003Cdiv\u003EI can\u0027t comment on the glitches, but a different way to do a staging program is to list all engines, then check each engine to see if it has flamed-out, if an engine has flamed-out, then stage, if not, don\u0027t.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is a lot more reliable. Back in kOS 0.9, I wrote an asparagus staging logic for the Duna mission that had to do all the calculations about fuel consumption rate and it had a lot of sensitive problems. That was before you could query for flameout of engines. Now that you can, it\u0027s much more reliable to just do that.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-16T19:26:38Z","Content":"\n\u003Cp\u003EHmmm I might check that, thanks a lot \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. \u003C/p\u003E\u003Cp\u003EIn the meantime I got the fuel-consumption based script to run reliably though. \u0022Reliably\u0022 meaning it runs without error on 4 different staging setups (single-\u0026gt;single, double-\u0026gt;single, four-\u0026gt;double-\u0026gt;single, asparagus) running each setup a couple of times, even with alterating throttle settings.\u003C/p\u003E\u003Cp\u003EIn case anyone is interested:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// fuel flow test bed\u003Cbr\u003Edeclare parameter ffMaxStages, ffThres.\u003Cbr\u003Eset tickSize to 0.1.\u003Cbr\u003E\u003Cbr\u003Eset throttleVal to 1.\u003Cbr\u003Elock throttle to throttleVal.\u003Cbr\u003Estage.\u003Cbr\u003E\u003Cbr\u003Eset currLF to ship:liquidfuel. set lastLF to currLF.\u003Cbr\u003Eset ffStaged to 0. set ffStageT to 0.\u003Cbr\u003Eset currFF to 0. set lastFF to 0.\u003Cbr\u003Eset lastFFChk to 0. set now to time:seconds.\u003Cbr\u003E\u003Cbr\u003Euntil 0 {\u003Cbr\u003E\tset now to time:seconds.\u003Cbr\u003E\tset currLF to ship:liquidfuel.\u003Cbr\u003E\tset currFF to ((lastLF-currLF)/throttleVal)/(now-lastFFChk).\u003Cbr\u003E\u003Cbr\u003E\tif currFF\u0026lt;lastFF*ffThres AND now-1\u0026gt;ffStageT AND ffStaged\u0026lt;ffMaxStages {\u003Cbr\u003E\t\t// current fuel flow below threshold AND\u003Cbr\u003E\t\t// last time we staged is more than a second away AND\u003Cbr\u003E\t\t// we\u0027re still going through configured amount of stages\u003Cbr\u003E\t\tstage.\u003Cbr\u003E\t\tset ffStageT to now.\u003Cbr\u003E\t\tset ffStaged to ffStaged\u002B1.\u003Cbr\u003E\t\tprint \u0022staging!\u0022 at (0, 3).\u003Cbr\u003E\t} else {\u003Cbr\u003E\t\tprint \u0022        \u0022 at (0, 3).\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E\tlog currLF \u002B \u0022 \u0022 \u002B lastLF \u002B \u0022 \u0022 \u002B throttleVal \u002B \u0022 \u0022 \u002B now \u002B \u0022 \u0022 \u002B lastFFChk \u002B \u0022 \u0022 \u002B currFF \u002B \u0022 \u0022 \u002B lastFF \u002B \u0022 \u0022 \u002B ffStaged \u002B \u0022 \u0022 \u002B ffMaxStages \u002B \u0022 \u0022 \u002B ffThres to fflog.\u003Cbr\u003E\u003Cbr\u003E\tprint \u0022liquid fuel: \u0022 \u002B round(currLF, 1) \u002B \u0022 L     \u0022 at (0, 0).\u003Cbr\u003E\tprint \u0022fuel flow:   \u0022 \u002B round(currFF, 1) \u002B \u0022 L/s      \u0022 at (0, 1). print \u0022last flow   : \u0022 \u002B round(lastFF, 1) \u002B \u0022 L/s     \u0022 at(25, 1).\u003Cbr\u003E\u003Cbr\u003E\tset lastFF to currFF.\u003Cbr\u003E\tset lastLF to currLF.\u003Cbr\u003E\tset lastFFChk to now.\u003Cbr\u003E\u003Cbr\u003E\twait tickSize.\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ECall with \u003Cem\u003Erun fuelflow2(2, 0.7).\u003C/em\u003E if you have two stages to separate and you consider 70% fuel consumption as compared to earlier a safe indication for a stage being burned out.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-16T22:34:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Joe32320\u0022 data-cite=\u0022Joe32320\u0022\u003E\u003Cdiv\u003EI can\u0027t comment on the glitches, but a different way to do a staging program is to list all engines, then check each engine to see if it has flamed-out, if an engine has flamed-out, then stage, if not, don\u0027t.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI just tried that approach... wow... that\u0027s much better. Definitely more reliable (although as I said I kinda got my approach to work) and also much shorter. I\u0027m saving over 200 bytes with the flameout-based staging in my ascend script compared to my fuelflow-based staging.\u003C/p\u003E\u003Cp\u003EThanks a ton \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"dlrk","CreatedById":60033,"CreatedDateTime":"2014-06-17T16:41:47Z","Content":"\n\u003Cp\u003ESo, RemoteTech is back., and Starstrider said integration works. Do I need to wait for a new version, or will this version work?\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-06-17T18:43:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dlrk\u0022 data-cite=\u0022dlrk\u0022\u003E\u003Cdiv\u003ESo, RemoteTech is back., and Starstrider said integration works. Do I need to wait for a new version, or will this version work?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethe current pre-release is blocked by the remotetech integration, something changed with the new version of RT that brings KSP to its knees when you request your connection status. I have set aside tonight for hashing it out.\u003C/p\u003E\u003Cp\u003EIt might be an issue with RT but at this point we have changed so much that i cannot indemnify kOS either.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-17T18:47:34Z\u0022 title=\u002206/17/2014 06:47  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 17, 2014\u003C/time\u003E by erendrake\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-18T21:13:49Z","Content":"\n\u003Cp\u003EQuick question about NODE: can it be used to automatically \u003Cem\u003Eexecute\u003C/em\u003E maneuver nodes or \u0022just\u0022 to set them up?\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-06-18T21:48:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003EQuick question about NODE: can it be used to automatically \u003Cem\u003Eexecute\u003C/em\u003E maneuver nodes or \u0022just\u0022 to set them up?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eit is for setup and gives you useful vectors for executing the NODE but it cannot control the throttle.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-18T23:29:15Z","Content":"\n\u003Cp\u003EOk thanks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"baloan","CreatedById":91670,"CreatedDateTime":"2014-06-19T09:34:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003EQuick question about NODE: can it be used to automatically \u003Cem\u003Eexecute\u003C/em\u003E maneuver nodes or \u0022just\u0022 to set them up?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy mission toolkit \u003Ca href=\u0022http://ud.baldev.de/ksp/kos/mtkv3\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E contains the exenode subprogram which does exactly what you are looking for.\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-19T11:16:52Z","Content":"\n\u003Cp\u003EGot it to work by now, all I needed was the node:burnvector to get rid of the inprecissions in my code but thanks a bunch anyway baloan!\u003C/p\u003E\n"},{"CreatedByName":"the_bT","CreatedById":3876,"CreatedDateTime":"2014-06-19T14:29:18Z","Content":"\n\u003Cp\u003EI\u0027ve got another question:\u003C/p\u003E\u003Cp\u003ESuppose I have two kOS modules on my craft somewhere. Lets call them A and B.\u003C/p\u003E\u003Cp\u003EIf run\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eset myvar to 0.\u003Cbr\u003Euntil 0 {\u003Cbr\u003E  print myvar.\u003Cbr\u003E  wait 1.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eon A, it will start printing 0 all over the screen and I can\u0027t do anything else until I kill the program with ctrl-c.\u003C/p\u003E\u003Cp\u003EI can however close the terminal window and open a new one for B and do whatever I want. I can even read and write files (but not variables) to the currently occupied module A. All that is nice. I think it would be possible to have a bunch of modules running systems and have some master program tell them what to do by writing files to them and funky stuff like that.\u003C/p\u003E\u003Cp\u003ENow what I wonder is:\u003C/p\u003E\u003Cp\u003EIs there a way to get into the same situation (A is executing program, B is waiting for input) without closing the terminal window and manually opening a new one?\u003C/p\u003E\u003Cp\u003ECan I run a program on B from A\u0027s prompt? Is it planned to be possible in the future or far future?\u003C/p\u003E\u003Cp\u003EI\u0027m not trying to do anything specific, I\u0027m just curiously messing around \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"MrOnak","CreatedById":104432,"CreatedDateTime":"2014-06-19T14:44:50Z","Content":"\n\u003Cp\u003ENot sure if I understand your question correctly \u003Cstrong\u003Ethe_bT\u003C/strong\u003E but you can absolutely run a program that\u0027s stored on B from the console of A.\u003C/p\u003E\u003Cp\u003EIf you do a \u003Cem\u003Elist volumes.\u003C/em\u003E you get a list of all \u0022harddrives\u0022. Now, \u003Cem\u003Eimportant to keep in mind\u003C/em\u003E is that the harddirve of the console you have open at the moment is \u003Cem\u003Ealways\u003C/em\u003E volume 1. So console A lists itself as volume 1 and console B lists itself as volume 1 as well. That can be confusing at first, so keep that in mind (or use \u003Cem\u003Erename volume\u003C/em\u003E).\u003C/p\u003E\u003Cp\u003EIn your example, say you have a program called \u0022runme\u0022 on the disk of console B. Open console A and type this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eswitch to 2. // this is the disk from console B\u003Cbr\u003Erun runme.\u003Cbr\u003Eswitch to 1. // return back to own disk.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-06-19T15:01:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrOnak\u0022 data-cite=\u0022MrOnak\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eswitch to 2. // this is the disk from console B\u003Cbr\u003Erun runme.\u003Cbr\u003Eswitch to 1. // return back to own disk.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s not what the_bT was asking for. That\u0027s \u0022This computer runs a program that\u0027s stored on the other computer\u0027s drive.\u0022\u003C/p\u003E\u003Cp\u003Ewhat the_bT wanted was more like \u0022This computer tells the other computer to run a program stored on it\u0027s drive.\u0022\u003C/p\u003E\u003Cp\u003E(Also, I think it included a request for redirected output from the other computer to this computer\u0027s terminal.)\u003C/p\u003E\u003Cp\u003EThere\u0027s a beta feature in the works to run a program on another CPU. But the problem of displaying the output is still not addressed. Right now the only way to switch the terminal window is to close it and reopen it on the other CPU. I\u0027d like to see some sort of tabbed buttons on the terminal to quickly swap which CPU the terminal is displaying for you.\u003C/p\u003E\n"}]}