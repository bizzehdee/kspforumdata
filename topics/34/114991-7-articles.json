{"TopicId":114991,"ForumId":34,"TopicTitle":"[1.11.x] AmpYear Main \u0026 Reserve Power Manager (v1.5.9.0) 22nd Feb 2021","CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2015-07-03T23:34:24Z","PageNum":7,"Articles":[{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-01T20:36:10Z","Content":"Sounds like a bug. Screenshots, as much info as you can supply will help. Thanks"},{"CreatedByName":"Deimos Rast","CreatedById":157420,"CreatedDateTime":"2016-05-01T20:49:05Z","Content":"Possible clue - in the parts calculation is says 0 Ec usage (as in no SAS registered), but in the Subsystem calculation it says 0.017/s (as in SAS registered?). Unless that\u0027s a dummy variable.\n\nCraft is just a Mk1 pod, some modded fuel tanks, stock decouplers, embedded MechJebCore in the pod (no SAS here), saturated Reaction Wheel mod, parachute (realchute), the Flare engine from SXT, and some science stuff.\n\n![9BsE8rb.png](https://i.imgur.com/9BsE8rb.png)\n\n[Log](https://www.dropbox.com/s/2xtw7ovvk2juaid/Player_AmpYearSAS.log?dl=0) (excuse the KeepFit spam, it\u0027s apparently a debug build)\n\nSuggestions listed here as per request:\n\n[https://github.com/JPLRepo/AmpYear/issues/23](https://github.com/JPLRepo/AmpYear/issues/23)"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-04T23:32:04Z","Content":"\u003E \n\u003E \n\u003E On 01/05/2016 at 6:49 AM, Deimos Rast said:\n\u003E \n\u003E \n\u003E Possible clue - in the parts calculation is says 0 Ec usage (as in no SAS registered), but in the Subsystem calculation it says 0.017/s (as in SAS registered?). Unless that\u0027s a dummy variable.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Craft is just a Mk1 pod, some modded fuel tanks, stock decouplers, embedded MechJebCore in the pod (no SAS here), saturated Reaction Wheel mod, parachute (realchute), the Flare engine from SXT, and some science stuff.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [![9BsE8rb.png](https://i.imgur.com/9BsE8rb.png)](https://i.imgur.com/9BsE8rb.png \u0022Enlarge image\u0022)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [Log](https://www.dropbox.com/s/2xtw7ovvk2juaid/Player_AmpYearSAS.log?dl=0) (excuse the KeepFit spam, it\u0027s apparently a debug build)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Suggestions listed here as per request:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [https://github.com/JPLRepo/AmpYear/issues/23](https://github.com/JPLRepo/AmpYear/issues/23)\n\u003E \n\nSorry a bit tardy to reply. Totally forgot about this. I haven\u0027t looked at your log... But looking at your picture it looks like my picture (except for one thing, which I\u0027ll get to in a minute).  \n\nSAS module is using Zero EC as per the parts list. The Grey\u0027d .017 next to SAS is an indicator of what EC it WOULD use if turned on. Is that what you are referring to?  \n\nWhat is really bothering me is why you don\u0027t have Turn Booster above SAS in your AmpYear Window.  \n\nI noticed a LOT of other Null Reference errors. Are you sure all your mods are 1.1.2 compatible?"},{"CreatedByName":"Grunf911","CreatedById":102151,"CreatedDateTime":"2016-05-06T21:57:17Z","Content":"will you support kerbalism ?\n\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/137227-11-kerbalism/\u0026do=embed\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-07T00:34:51Z","Content":"\u003E \n\u003E \n\u003E 2 hours ago, Grunf911 said:\n\u003E \n\u003E \n\u003E will you support kerbalism ?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/137227-11-kerbalism/\u0026do=embed\u0022\u003E\u003C/iframe\u003E\n\u003E \n\nWell that all depends.. If you mean support the Kerbalism specific parts that use EC to display EC usage in this mod correctly, then I could. I note that kerbalism has its own type of EC monitoring so don\u0027t know how that would go together. I can put it on the list, don\u0027t know when I will get to it though."},{"CreatedByName":"Lennartos","CreatedById":163579,"CreatedDateTime":"2016-05-09T19:21:18Z","Content":"Hi there.  \n\nIs there a way to reduce the per frame CPU load of this mod?  \n\nAmpYear is king of all mods in regards to used CPU load and garbage created.. which honestly has reached a level that seems a bit excessive.  \n  \n[https://onedrive.live.com/redir?resid=715EC76A10372B02!12143\u0026authkey=!APYWXCtAf0Qcy1U\u0026v=3\u0026ithint=photo%2cpng](https://onedrive.live.com/redir?resid=715EC76A10372B02!12143\u0026authkey=!APYWXCtAf0Qcy1U\u0026v=3\u0026ithint=photo%2Cpng)"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-09T20:06:32Z","Content":"\u003E \n\u003E \n\u003E 41 minutes ago, Lennartos said:\n\u003E \n\u003E \n\u003E Hi there.  \n\u003E \n\u003E Is there a way to reduce the per frame CPU load of this mod?  \n\u003E \n\u003E AmpYear is king of all mods in regards to used CPU load and garbage created.. which honestly has reached a level that seems a bit excessive.  \n\u003E   \n\u003E [https://onedrive.live.com/redir?resid=715EC76A10372B02!12143\u0026authkey=!APYWXCtAf0Qcy1U\u0026v=3\u0026ithint=photo%2cpng](https://onedrive.live.com/redir?resid=715EC76A10372B02!12143\u0026authkey=!APYWXCtAf0Qcy1U\u0026v=3\u0026ithint=photo%2Cpng)\n\u003E \n\nI\u0027ll look into it. There are a number of factors contributing to this.  \n\n1) There is no easy way to get parts and parts lists from active vessels (cached).  \n\n2) The more parts and part modules that are loaded the worse it gets.  \n\n3) You haven\u0027t specified how many loaded vessels there were and how many parts and part modules when you captured that profiler picture.  \n\n4) The new ESP processing I implemented may be contributing to this, I will look for efficiencies throughout."},{"CreatedByName":"Lennartos","CreatedById":163579,"CreatedDateTime":"2016-05-09T21:44:15Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, JPLRepo said:\n\u003E \n\u003E \n\u003E I\u0027ll look into it. There are a number of factors contributing to this.  \n\u003E \n\u003E 1) There is no easy way to get parts and parts lists from active vessels (cached).  \n\u003E \n\u003E 2) The more parts and part modules that are loaded the worse it gets.  \n\u003E \n\u003E 3) You haven\u0027t specified how many loaded vessels there were and how many parts and part modules when you captured that profiler picture.  \n\u003E \n\u003E 4) The new ESP processing I implemented may be contributing to this, I will look for efficiencies throughout.\n\u003E \n\n1) you have done this a lot longer than me, but as fra as i have seen in the log im assuming that one can detect a change of active vessel, and propably undocking / staging.  \n\nso reusing the same list for lets say an entire second or until vessel changed somehow shouldn\u0027t be that bad to do?  \n\n2) i see that, but there has to be code that doesnt nee to be calculated for each frame... most calculations should be just fine once per second instead.  \n\n3) 1 active vessel, 95 parts beeing constructed of 2 docked vessels ( my mun station )  - Image below  \n\nAs you can see in the image i\u0027m not running 1:1 time after installing this mod and even a simple station like this.  \n\nMy biggest interest is actually the nighttime calculation, seeing if i can survive in a specific orbit while in VAB..emergency power is a nice addition, but not at this cost ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n![3C001939004174E48B8535A2DC4369308279C60A](http://images.akamai.steamusercontent.com/ugc/271717169541034733/3C001939004174E48B8535A2DC4369308279C60A/)\n\n**Edited \u003Ctime datetime=\u00222016-05-09T21:45:44Z\u0022 title=\u002205/09/2016 09:45  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 9, 2016\u003C/time\u003E by Lennartos**"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-09T22:12:48Z","Content":"\u003E \n\u003E \n\u003E 26 minutes ago, Lennartos said:\n\u003E \n\u003E \n\u003E 1) you have done this a lot longer than me, but as fra as i have seen in the log im assuming that one can detect a change of active vessel, and propably undocking / staging.  \n\u003E \n\u003E so reusing the same list for lets say an entire second or until vessel changed somehow shouldn\u0027t be that bad to do?  \n\u003E \n\u003E 2) i see that, but there has to be code that doesnt nee to be calculated for each frame... most calculations should be just fine once per second instead.  \n\u003E \n\u003E 3) 1 active vessel, 95 parts beeing constructed of 2 docked vessels ( my mun station )  - Image below  \n\u003E \n\u003E As you can see in the image i\u0027m not running 1:1 time after installing this mod and even a simple station like this.  \n\u003E \n\u003E My biggest interest is actually the nighttime calculation, seeing if i can survive in a specific orbit while in VAB..emergency power is a nice addition, but not at this cost ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\u003E \n\n1) It does that already.... But you still have to calculate the EC usage and production every physics frame or it will lag and be inaccurate.  \n\n2) It does this as well... but again, the longer you leave between updates, the more out of date the EC usage, production, etc is.  \n\n3) Yeah that\u0027s a big vessel. Won\u0027t help.  \n\nAgain, probably because the new EPS processing is chewing up too much. I will look into improvements."},{"CreatedByName":"Lennartos","CreatedById":163579,"CreatedDateTime":"2016-05-09T23:48:23Z","Content":"Looked through the code a bit  \n\nQuite a lot going on, many modules taken into account.  \n\nLooots of string comparissons etc, and even worse is string parsing and splitting....  \n\nyou will propably need to make some more detailed profiling on where it pays off more to improve, maybe EPS indeed is a big chunk...  \n\nBut if its not, then i see no other way than not to rebuild the entire data 30 times a second.  \n\nThere has to be a way to reduce the calculation needed, and only check production and consumption without doing all the hard work of building the part tree\n\n**Edited \u003Ctime datetime=\u00222016-05-09T23:54:35Z\u0022 title=\u002205/09/2016 11:54  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 9, 2016\u003C/time\u003E by Lennartos**"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-09T23:52:36Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, Lennartos said:\n\u003E \n\u003E \n\u003E Looked through the code a bit  \n\u003E \n\u003E Quite a lot going on, many modules taken into account.  \n\u003E \n\u003E Looots of string comparissons etc, and even worse is string parsing and splitting....  \n\u003E \n\u003E you will propably need to make some more detailed profiling on where it pays off more to improve, maybe EPS is a big chunk...  \n\u003E \n\u003E But if its not, then i see no other way than not to rebuild the entire data 30 times a second.\n\u003E \n\nYes - thanks. I will investigate. I will probably change the dictionaries (added for ESP) to be hashtables, and a number of other things can be done to improve things."},{"CreatedByName":"Gordon Dry","CreatedById":163177,"CreatedDateTime":"2016-05-10T00:23:33Z","Content":"The enriched uranium reactor \u0022WIP RO\u0022 works, but its output is not shown in AmpYear."},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-10T05:25:32Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, Gordon Dry said:\n\u003E \n\u003E \n\u003E The enriched uranium reactor \u0022WIP RO\u0022 works, but its output is not shown in AmpYear.\n\u003E \n\nIs that RO as in Realism Overhaul? Is that in the list of supported mods in the OP? Yeah no it isn\u0027t. Sorry but there is no support currently for RO. Probably need to deal with the performance issues [@Lennartos](https://forum.kerbalspaceprogram.com/index.php?/profile/163579-lennartos/) has raised before I get to that. That\u0027s actually a big piece of work as RO adds and changes LOTS. Something for a future release perhaps."},{"CreatedByName":"LeLeon","CreatedById":118287,"CreatedDateTime":"2016-05-10T17:03:04Z","Content":"i installed Amp Year, now i wanna delete it. After doing it through CKAN and continue playing i cannot recover vessels, or destroy them or fly them anymore. these buttons are not clickable now (shaded). I have mods and all the mods i had before Amp Year without issues.\n\nAny ideas? What u need as information?\n\n![20160510185142_1.jpg](http://www2.pic-upload.de/img/30612250/20160510185142_1.jpg)"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-10T18:17:59Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, LeLeon said:\n\u003E \n\u003E \n\u003E i installed Amp Year, now i wanna delete it. After doing it through CKAN and continue playing i cannot recover vessels, or destroy them or fly them anymore. these buttons are not clickable now (shaded). I have mods and all the mods i had before Amp Year without issues.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Any ideas? What u need as information?\n\u003E \n\nThat\u0027s a shame, but we can\u0027t determine if it is AmpYear or what is going on without a log, as per the OP:  \n\nSupport:  \n\nFor support please ensure you are following [these instructions](https://forum.kerbalspaceprogram.com/index.php?/topic/83212-how-to-get-support-read-first/).  \n\nNO LOG = NO SUPPORT."},{"CreatedByName":"LeLeon","CreatedById":118287,"CreatedDateTime":"2016-05-10T19:21:03Z","Content":"first the working version log. i can install and uninstall and reinstall again. Savegame works, i can chooose every vessel with every normal option in Tracking Station.\n\n[Log with Amp Year](https://drive.google.com/open?id=0B6IfqHC0fCsFc0ZldGw4NWZ4UVU)\n\nNow the log, when i uninstalled Amp Year and can\u0027t access a vessel in Tracking Station on my savegame.\n\n[Log without Amp Year (with the bug)](https://drive.google.com/open?id=0B6IfqHC0fCsFaFRLWDMyZU9hOTg)"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-10T19:36:21Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, LeLeon said:\n\u003E \n\u003E \n\u003E first the working version log. i can install and uninstall and reinstall again. Savegame works, i can chooose every vessel with every normal option in Tracking Station.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [Log with Amp Year](https://drive.google.com/open?id=0B6IfqHC0fCsFc0ZldGw4NWZ4UVU)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Now the log, when i uninstalled Amp Year and can\u0027t access a vessel in Tracking Station on my savegame.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E [Log without Amp Year (with the bug)](https://drive.google.com/open?id=0B6IfqHC0fCsFaFRLWDMyZU9hOTg)\n\u003E \n\nOh I am sorry I misunderstood you... You want to uninstall AmpYear and that is breaking your game... Yes it will... Generally uninstalling mods will break save games.  \n\nWent through your log after you uninstalled:\n\nSpoiler\n\nNullReferenceException: Object reference not set to an instance of an object\n\n  at KSP.UI.Screens.KnowledgeBase.\u003Cgetunloadedvesselmass\u003Em__96B (.ProtoPartResourceSnapshot x) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at UniLinq.Enumerable.Sum[ProtoPartResourceSnapshot] (IEnumerable\u00601 source, System.Func\u00602 selector) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at KSP.UI.Screens.KnowledgeBase.GetUnloadedVesselMass (.Vessel v) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at KSP.UI.Screens.KbApp_VesselInfo.CreateVesselInfoList (.Vessel v) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at KSP.UI.Screens.KbApp_VesselInfo.ActivateApp (.MapObject target) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at KSP.UI.Screens.KnowledgeBase.ActivateApps (KbTargetType targetType, .MapObject target) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at KSP.UI.Screens.KnowledgeBase.OnMapFocusChange (.MapObject target) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at EventData\u00601[MapObject].Fire (.MapObject data) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\u003Cbr\u003E\n  at PlanetariumCamera.SetTarget (.MapObject tgt) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\n\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/filename\u003E\u003C/getunloadedvesselmass\u003E\n\n  at KSP.UI.Screens.SpaceTracking.SetVessel (.Vessel v, Boolean keepFocus) [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\n\u003C/filename\u003E\n\n  at KSP.UI.Screens.SpaceTracking\u002B\u003Csetrequestedvessel\u003Ec__IteratorD0.MoveNext () [0x00000] in \u003Cfilename unknown=\u0022\u0022\u003E:0\n\u003C/filename\u003E\u003C/setrequestedvessel\u003E\n\nThis appears to be a bug in the stock code. It\u0027s not happy. I\u0027m not sure why this would happen. It\u0027s not liking something.  \n\nAll I can offer you is if you send my your save game file I can have a look see if there is anything obviously wrong. but can\u0027t guarantee anything.  \n\nThe cost of uninstalling mods, generally, can break your save game file."},{"CreatedByName":"LeLeon","CreatedById":118287,"CreatedDateTime":"2016-05-10T20:08:09Z","Content":"Okay, i thought first, Amp Year just a fine display thing (what i was looking for as main reason and what i only found at Amp Year), After i installed it, i\u0027ve seen that reserve power was coming with it, now this ressource is probably missing.\n\nJust before, i used the savegame without AY and made a MK1 pod as vessel. Launched, so it sit on ramp. Went into Space Center, then Tracking Station and here i could select every vessel as normal. But only one time. After i left the vessel to Space Center and went back to Tracking Station, same situation where i can\u0027t access vessels. ![:rolleyes:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif \u0022:rolleyes:\u0022)\n\nI havn\u0027t thought about game breaking mods. Most i tried and uninstalled were part mods like launchpad and kerbal stats or russian probes, all without issues. But these where not deep mods.\n\nI wanna thank you for your offer. It\u0027s not neccessary. I can also live with Amp Year.\n\nI uninstalled it, because i dislike reserve power (or better i havn\u0027t seen advantage of it), wanted to reduce parts and wanted to reduce the patches amount at start (without Amp Year on my game 700 patches less). Hoped to reduce the load a bit.\n\nBut even with my little issue, i wanna thank you for spending time while creating this mod and your fast response. I\u0027m pretty sure as Realism-player i would see more reasons to use AY, than only use the EC-Production \u0026 Use display."},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-10T21:08:29Z","Content":"\u003E \n\u003E \n\u003E 54 minutes ago, LeLeon said:\n\u003E \n\u003E \n\u003E Okay, i thought first, Amp Year just a fine display thing (what i was looking for as main reason and what i only found at Amp Year), After i installed it, i\u0027ve seen that reserve power was coming with it, now this ressource is probably missing.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Just before, i used the savegame without AY and made a MK1 pod as vessel. Launched, so it sit on ramp. Went into Space Center, then Tracking Station and here i could select every vessel as normal. But only one time. After i left the vessel to Space Center and went back to Tracking Station, same situation where i can\u0027t access vessels. ![:rolleyes:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif \u0022:rolleyes:\u0022)\n\u003E \n\u003E \n\u003E \n\u003E I havn\u0027t thought about game breaking mods. Most i tried and uninstalled were part mods like launchpad and kerbal stats or russian probes, all without issues. But these where not deep mods.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I wanna thank you for your offer. It\u0027s not neccessary. I can also live with Amp Year.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I uninstalled it, because i dislike reserve power (or better i havn\u0027t seen advantage of it), wanted to reduce parts and wanted to reduce the patches amount at start (without Amp Year on my game 700 patches less). Hoped to reduce the load a bit.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E But even with my little issue, i wanna thank you for spending time while creating this mod and your fast response. I\u0027m pretty sure as Realism-player i would see more reasons to use AY, than only use the EC-Production \u0026 Use display.\n\u003E \n\nI\u0027m not sure why your game is breaking...  \n\nAs for ReservePower - You don\u0027t necessarily need to use it.  \n\nYou can remove the reverse power battery parts folder (/GameData/REPOSoftTech/AmpYear/Parts/\\*) without an issue.  \n\nAll command modules get 80 reserve power by default. You can remove this by removing the **RESOURCE statements** in file: GameData/REPOSoftTech/AmpYear/MMConfigAmpYear.cfg  \n**Don\u0027t delete the rest of the file** - you have to have the MODULE\u0027s defined or AmpYear will break if installed. It should then look like this:\n\nSpoiler\n\n@PART[\\*]:HAS[@MODULE[ModuleCommand],!MODULE[MechJebAR202],!MODULE[MechJebPod]]:NEEDS[AmpYear\u0026!RealismOverhaul]  \n\n{     \n\n    MODULE  \n\n    {  \n\n        name = AYCrewPart  \n\n    }  \n\n}\n\n@PART[\\*]:HAS[@MODULE[ModuleCommand],!MODULE[MechJebAR202],!MODULE[MechJebPod]]:NEEDS[AmpYear\u0026RealismOverhaul]  \n\n{     \n\n    MODULE  \n\n    {  \n\n        name = AYCrewPart  \n\n    }      \n\n}\n\n@PART[\\*]:NEEDS[AmpYear]  \n\n{      \n\n    MODULE  \n\n    {  \n\n        name = AYPart  \n\n    }  \n\n}\n\nYou can\u0027t remove the rest of the patches, I\u0027m not sure I understand why you think MM patches cause issues? It only adds a small amount to start up time.  \n\nWithout any reserve power your vessel will simply run out of EC when it drains all it\u0027s EC and AmpYear won\u0027t be able to use reservepower if there is none on-board.  \n\nYou can\u0027t remove the ReservePower resource with AmpYear installed, or it will break."},{"CreatedByName":"LeLeon","CreatedById":118287,"CreatedDateTime":"2016-05-10T21:29:26Z","Content":"After looking at features i\u0027ve seen dark side calculations. Great idea, i hate, when my scanner probes run out of energy in the dark sides.\n\nSo your Amp Years reserve will drain itself, after i\u0027m running out of normal EC. Fine, fine. Will reserve power be filled with [Near Future Electricals capacitors (blue energy bursts)](https://forum.kerbalspaceprogram.com/index.php?/topic/47786-11ish-near-future-technologies-april-22-updates/\u0026page=1) ? I have seen that it\u0027s on compatible list."},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-10T21:36:36Z","Content":"\u003E \n\u003E \n\u003E 1 minute ago, LeLeon said:\n\u003E \n\u003E \n\u003E After looking at features i\u0027ve seen dark side calculations. Great idea, i hate, when my scanner probes run out of energy in the dark sides.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E So your Amp Years reserve will drain itself, after i\u0027m running out of normal EC. Fine, fine. Will reserve power be filled with [Near Future Electricals capacitors (blue energy bursts)](https://forum.kerbalspaceprogram.com/index.php?/topic/47786-11ish-near-future-technologies-april-22-updates/\u0026page=1) ? I have seen that it\u0027s on compatible list.\n\u003E \n\nIf you remove the parts and only have the ReservePower in command pods/probes then yes that is used once all EC runs out. You can Isolate the Reserve Power, there is an option for that in the AmpYear window under the \u0022Reserve\u0022 button called \u0022Isolate Reserve Power\u0022. If this is on AmpYear will not use any ReservePower when you run out of EC.  \n\nIt will recharge any ReserverPower when your main EC gets to a certain percentage, it doesn\u0027t matter What is generating the EC as long as something on the vessel is generating it.  \n\nIf you open the settings menu (Click the AmpYear button in the space center) the first setting is called \u0022Reserve Battery Rechard Percentage\u0022. This is the %age at which your EC must be at before AmpYear starts charging any ReservePower. You can of course change this setting.  \n\nI have not checked what the Near Future capacitors do, if they generate EC into the vessel then the answer is yes.  \n\nIf it is on the compatible list then that means that AmpYear recognisesparts in those mods and any EC they use or generate."},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-11T21:18:19Z","Content":"\u003E \n\u003E \n\u003E On 09/05/2016 at 9:48 AM, Lennartos said:\n\u003E \n\u003E \n\u003E Looked through the code a bit  \n\u003E \n\u003E Quite a lot going on, many modules taken into account.  \n\u003E \n\u003E Looots of string comparissons etc, and even worse is string parsing and splitting....  \n\u003E \n\u003E you will propably need to make some more detailed profiling on where it pays off more to improve, maybe EPS indeed is a big chunk...  \n\u003E \n\u003E But if its not, then i see no other way than not to rebuild the entire data 30 times a second.  \n\u003E   \n\u003E \n\u003E There has to be a way to reduce the calculation needed, and only check production and consumption without doing all the hard work of building the part tree\n\u003E \n\n\u003E \n\u003E \n\u003E On 09/05/2016 at 9:52 AM, JPLRepo said:\n\u003E \n\u003E \n\u003E Yes - thanks. I will investigate. I will probably change the dictionaries (added for ESP) to be hashtables, and a number of other things can be done to improve things.\n\u003E \n\n[@Lennartos](https://forum.kerbalspaceprogram.com/index.php?/profile/163579-lennartos/) - Had a first run through cleaning up the code. In a preliminary test it appears it\u0027s reduced Garbage by 11% and CPU/GPU by about 85%. There is probably more that can be done and I need to do more testing to confirm these numbers. the biggest cost saving was converting the list of parts from a sorted dictionary to un-sorted. That obviously changes what you see in-game though as the parts list is no longer the same order every time.\n\n**Edited \u003Ctime datetime=\u00222016-05-11T21:20:24Z\u0022 title=\u002205/11/2016 09:20  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 11, 2016\u003C/time\u003E by JPLRepo**"},{"CreatedByName":"ctbram","CreatedById":99635,"CreatedDateTime":"2016-05-12T22:32:33Z","Content":"Can someone do a video of how to use this?  I used to use fusebox and it was great.  Using this has me totally baffled.  I  have nearly died on my last three missions.  I get back to kerbin and resource manager says I have 100% EC, ampyear is red, I keep clicking on xfer reserve to main, and main ec turns white and goes to 99.9999 and yet I have no control over my ship and ampyear icon stay red.  I don\u0027t know what the heck it is doing???  I have 100% ec, the ampyear screen says I have 99\u002B % but everything is actiing like I am out of power.\n\nPlease someone record a video and link it.  Otherwise I am yanking  this mod before I get dead because my ship acts like I am out of power while resource display says I have 100% and my solar panels are in full sunlight and I am racing toward the atmosphere with no control of my ship!\n\n**Edited \u003Ctime datetime=\u00222016-05-12T22:34:49Z\u0022 title=\u002205/12/2016 10:34  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 12, 2016\u003C/time\u003E by ctbram**"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-05-13T05:41:26Z","Content":"\u003E \n\u003E \n\u003E 7 hours ago, ctbram said:\n\u003E \n\u003E \n\u003E Can someone do a video of how to use this?  I used to use fusebox and it was great.  Using this has me totally baffled.  I  have nearly died on my last three missions.  I get back to kerbin and resource manager says I have 100% EC, ampyear is red, I keep clicking on xfer reserve to main, and main ec turns white and goes to 99.9999 and yet I have no control over my ship and ampyear icon stay red.  I don\u0027t know what the heck it is doing???  I have 100% ec, the ampyear screen says I have 99\u002B % but everything is actiing like I am out of power.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Please someone record a video and link it.  Otherwise I am yanking  this mod before I get dead because my ship acts like I am out of power while resource display says I have 100% and my solar panels are in full sunlight and I am racing toward the atmosphere with no control of my ship!\n\u003E \n\nI\u0027m sorry to hear you are having issues. I\u0027m not sure what your problems are. As little information is provided, other than \u0022I have no control\u0022. Sounds like you have something else going on with your install, but without a lot I can\u0027t provide any assistance. I have on my list of to-do\u0027s new KSPedia pages. There are no videos that I am aware of. Try reading the OP and the change log as lots of info there. And Of course you are free to use whatever mods you wish."},{"CreatedByName":"Deimos Rast","CreatedById":157420,"CreatedDateTime":"2016-05-15T20:18:20Z","Content":"Small not quite a bug: \u0022Isolate Reserves\u0022 (*maybe*) does not appear to be persistent (as in it persists through saving/load). At least, in my scenario, I had an isolated reserve, played a bit, game crashed, restarted the next day, no isolation. Thinking about it now, if I remember correctly, AmpYear saves settings on a clean quit, so that\u0027s probably when it saves final states/status of isolation (aside from periodically I\u0027m guessing from looking at the log). Am I correct in my thinking? If so, then I guess I crashed before it could save and never mind this report. If no, then something for the issue tracker I guess.![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nCheers.\n\nAnd to the above user who is possibly having issues with the mod, check the subsystems tab and the parts section to make sure things are functioning correctly. Those can be a bit fussy at times. But it sounds like something else is at work."}]}