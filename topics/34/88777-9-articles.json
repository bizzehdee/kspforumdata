{"TopicId":88777,"ForumId":34,"TopicTitle":"[1.1.3] BackgroundProcessing","CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2014-10-28T18:40:42Z","PageNum":9,"Articles":[{"CreatedByName":"ShotgunNinja","CreatedById":159391,"CreatedDateTime":"2016-08-30T07:58:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222735427\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472541959\u0022 data-ipsquote-userid=\u0022114736\u0022 data-ipsquote-username=\u0022JPLRepo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n29 minutes ago, JPLRepo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\npretty sure we fixed that...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIndeed. Maybe it is possible that he\u0027s not using the sun_dir / sun_dist returned from the raytracing functions for the solar panel calculations. Another option may be that the workaround stopped working in 1.1.3, or even that it work \u0027most of the time\u0027. As this GetWorldPos3D() business is fundamentally a SQUAD bug, I\u0027m creating a test case and submitting a bug report to the SQUAD tracker, lets hope they fix it for 1.2...\n\u003C/p\u003E\n"},{"CreatedByName":"garwel","CreatedById":141813,"CreatedDateTime":"2016-08-30T12:35:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222732566\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472330531\u0022 data-ipsquote-userid=\u0022157643\u0022 data-ipsquote-username=\u0022Bombaatu\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/27/2016 at 11:42 PM, Bombaatu said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThere\u0027s an issue that I\u0027ve isolated to this mod; if you have it installed \u0026amp; leave the Kerbin \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E, then when you switch vessels the NaN Kraken strikes. The only way I was able to resolve this was to uninstall BP \u0026amp; reload a save prior to leaving KSOI. Some comments in the linked thread indicates a vessel\u0027s mass is being set to zero which causes divide-by-zero errors, if that helps.\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/146168-nan-kraken-when-leaving-kerbin-soi/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI confirm this.\n\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2016-08-31T12:57:19Z","Content":"\n\u003Cp\u003E\nI am reading this; I\u0027ve done a quick check and the SolarPanel.cs code is definitely using the sun_dist returned by the raytracing reimplementation. I am using FlightGlobals.Bodies[0].GetAltitude(partPos) to get the distance from the sun for power-curve stuff, which might be causing the problem (assuming there\u0027s a power-curve solar panel on the dying vessel).\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s a few points where a NaN could be occurring.\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t actually currently have KSP installed; not sure when I\u0027ll be able to fiddle with this, once again. Sorry. If I can get a couple of hours together to just sit down and code it shouldn\u0027t be too hard to find though.\n\u003C/p\u003E\n\u003Cp\u003E\nOne thing that could be helpful - can someone who can easily duplicate this (say, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/141813-garwel/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022141813\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/141813-garwel/\u0022 rel=\u0022\u0022\u003E@garwel\u003C/a\u003E?) reproduce this with the debug level set high? BackgroundProcessing reads a PluginConfiguration file, and if you have an entry setting DebugLevel to ALL, we\u0027ll get a lot more useful data. Something like this:\n\u003C/p\u003E\n\u003Cp\u003E\n\u0026lt;config\u0026gt;\n\u003C/p\u003E\n\u003Cp\u003E\n\u0026lt;string name=\u0022DebugLevel\u0022\u0026gt;ALL\u0026lt;/string\u0026gt;\n\u003C/p\u003E\n\u003Cp\u003E\n\u0026lt;/config\u0026gt;\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDon\u0027t know off the top of my head what the filename is, but if you\u0027ve got any other mods that do something similar with an XML file, it\u0027ll be the same rule. Probably \u0027BackgroundProcessing.xml\u0027.\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-08-31T18:39:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222736786\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472648239\u0022 data-ipsquote-userid=\u0022125714\u0022 data-ipsquote-username=\u0022jamespicone\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, jamespicone said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI am reading this; I\u0027ve done a quick check and the SolarPanel.cs code is definitely using the sun_dist returned by the raytracing reimplementation. I am using FlightGlobals.Bodies[0].GetAltitude(partPos) to get the distance from the sun for power-curve stuff, which might be causing the problem (assuming there\u0027s a power-curve solar panel on the dying vessel).\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s a few points where a NaN could be occurring.\n\u003C/p\u003E\n\u003Cp\u003E\nI don\u0027t actually currently have KSP installed; not sure when I\u0027ll be able to fiddle with this, once again. Sorry. If I can get a couple of hours together to just sit down and code it shouldn\u0027t be too hard to find though.\n\u003C/p\u003E\n\u003Cp\u003E\nOne thing that could be helpful - can someone who can easily duplicate this (say, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/141813-garwel/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022141813\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/141813-garwel/\u0022 rel=\u0022\u0022\u003E@garwel\u003C/a\u003E?) reproduce this with the debug level set high? BackgroundProcessing reads a PluginConfiguration file, and if you have an entry setting DebugLevel to ALL, we\u0027ll get a lot more useful data. Something like this:\n\u003C/p\u003E\n\u003Cp\u003E\n\u0026lt;config\u0026gt;\n\u003C/p\u003E\n\u003Cp\u003E\n\u0026lt;string name=\u0022DebugLevel\u0022\u0026gt;ALL\u0026lt;/string\u0026gt;\n\u003C/p\u003E\n\u003Cp\u003E\n\u0026lt;/config\u0026gt;\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDon\u0027t know off the top of my head what the filename is, but if you\u0027ve got any other mods that do something similar with an XML file, it\u0027ll be the same rule. Probably \u0027BackgroundProcessing.xml\u0027.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m pretty sure I know exactly where it\u0027s occurring. I\u0027ll do a test today and get back to you.\n\u003C/p\u003E\n"},{"CreatedByName":"Djohaal","CreatedById":136213,"CreatedDateTime":"2016-09-17T02:05:31Z","Content":"\n\u003Cp\u003E\nSo I went in the chase for my NaN error and it seems to be the background processing issue. I tested with both 0.4.4.0 versions (from spacedock and JPLR\u0027s git with no sucess). Any news on a fix? I\u0027m managing to re-create the bug consistently, so I can provide logs.\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-09-17T02:37:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222760912\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221474077931\u0022 data-ipsquote-userid=\u0022136213\u0022 data-ipsquote-username=\u0022Djohaal\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n30 minutes ago, Djohaal said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo I went in the chase for my NaN error and it seems to be the background processing issue. I tested with both 0.4.4.0 versions (from spacedock and JPLR\u0027s git with no sucess). Any news on a fix? I\u0027m managing to re-create the bug consistently, so I can provide logs.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt is a known bug. A fix is known. but we are waiting for \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022125714\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0022 rel=\u0022\u0022\u003E@jamespicone\u003C/a\u003E to return to the scene.\n\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2016-09-19T14:07:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222760953\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221474079845\u0022 data-ipsquote-userid=\u0022114736\u0022 data-ipsquote-username=\u0022JPLRepo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn Saturday, 17 September 2016 at 0:07 PM, JPLRepo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt is a known bug. A fix is known. but we are waiting for \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022125714\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0022 rel=\u0022\u0022\u003E@jamespicone\u003C/a\u003E to return to the scene.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere\u0027s a known fix?\n\u003C/p\u003E\n"},{"CreatedByName":"ElGazo","CreatedById":169253,"CreatedDateTime":"2016-09-23T11:33:09Z","Content":"\n\u003Cp\u003E\nHi. Wery cool plugin! However don\u0027t working with Kethane. :((( \u00A0 How fix it?\n\u003C/p\u003E\n\u003Cp\u003E\nSorry for my bad English.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-23T11:33:29Z\u0022 title=\u002209/23/2016 11:33  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 23, 2016\u003C/time\u003E by ElGazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Jiraiyah","CreatedById":97667,"CreatedDateTime":"2016-10-19T09:58:31Z","Content":"\n\u003Cp\u003E\nsigh i hope james come back to scene soon and this mod gets some love for 1.2 :/\n\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2016-10-19T10:01:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222812291\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476871111\u0022 data-ipsquote-userid=\u002297667\u0022 data-ipsquote-username=\u0022Jiraiyah\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Jiraiyah said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nsigh i hope james come back to scene soon and this mod gets some love for 1.2 :/\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGave it a quick look and it looks like it won\u0027t just rebuild; there\u0027ve been relevant KSP changes.\n\u003C/p\u003E\n"},{"CreatedByName":"Jiraiyah","CreatedById":97667,"CreatedDateTime":"2016-10-19T10:02:59Z","Content":"\n\u003Cp\u003E\nhmm well, considering that your mod is one of those that tweak basic functionality, it was expected, just knowing that you will work on an update is more than enough for my thirst to sit and wait with tongue out of mouth and watery mouth sir \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2016-10-19T10:08:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222812295\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476871379\u0022 data-ipsquote-userid=\u002297667\u0022 data-ipsquote-username=\u0022Jiraiyah\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Jiraiyah said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nhmm well, considering that your mod is one of those that tweak basic functionality, it was expected, just knowing that you will work on an update is more than enough for my thirst to sit and wait with tongue out of mouth and watery mouth sir \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI wouldn\u0027t go so far as to say I was working on an update; I only looked at it just then.\n\u003C/p\u003E\n\u003Cp\u003E\nBut yeah the way modules say what resources they use has changed and the way unloaded vessels store their resources has been slightly tweaked; figuring it out is going to take some reverse engineering on the assumption that documentation for KSP internals is still lacking. For those of you following at home, ModuleCommand and ModuleGenerator no longer have an inputList/outputList/inputResources, ModuleDeployableSolarPanel handles tracking differently, and ProtoPartResourceSnapshot has been changed so the ConfigNode storing the resource data is now protected (hopefully I can get at the data I need in there; otherwise I\u0027m gonna have to reflect on it)\n\u003C/p\u003E\n"},{"CreatedByName":"Jiraiyah","CreatedById":97667,"CreatedDateTime":"2016-10-19T10:12:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222812300\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476871685\u0022 data-ipsquote-userid=\u0022125714\u0022 data-ipsquote-username=\u0022jamespicone\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, jamespicone said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI wouldn\u0027t go so far as to say I was working on an update; I only looked at it just then.\n\u003C/p\u003E\n\u003Cp\u003E\nBut yeah the way modules say what resources they use has changed and the way unloaded vessels store their resources has been slightly tweaked; figuring it out is going to take some reverse engineering on the assumption that documentation for KSP internals is still lacking. For those of you following at home, ModuleCommand and ModuleGenerator no longer have an inputList/outputList/inputResources, ModuleDeployableSolarPanel handles tracking differently, and ProtoPartResourceSnapshot has been changed so the ConfigNode storing the resource data is now protected (hopefully I can get at the data I need in there; otherwise I\u0027m gonna have to reflect on it)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\ndon\u0027t be afraid of reflection, i can say, it\u0027s faster than many people think it is, specially if you make it work properly, like cache the assembly and member info in private variables and just use them in update so that getting to them won\u0027t happen in every update\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-10-19T10:34:20Z","Content":"\n\u003Cp\u003E\nNo reflection is required. The EULA prohibits reflecting non public properties, etc anyway. You do not need to access the config node any more. There\u0027s an easier way. There are also easier ways to get to resources etc as well.\n\u003C/p\u003E\n"},{"CreatedByName":"msnbcorp","CreatedById":171008,"CreatedDateTime":"2016-10-31T21:59:42Z","Content":"\n\u003Cp\u003E\nPlz, i\u0027m here to bargain you to create a 1.2 version of your mod.\n\u003C/p\u003E\n\u003Cp\u003E\nYour mods is clearly one of those that complete several missment to the stock game. Without it and without any other mods that do the same thing it would be a severe missing of a core fonctionnality of majors mods ... :sad:\n\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2016-11-01T13:16:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222832388\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221477951182\u0022 data-ipsquote-userid=\u0022171008\u0022 data-ipsquote-username=\u0022msnbcorp\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, msnbcorp said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPlz, i\u0027m here to bargain you to create a 1.2 version of your mod.\n\u003C/p\u003E\n\u003Cp\u003E\nYour mods is clearly one of those that complete several missment to the stock game. Without it and without any other mods that do the same thing it would be a severe missing of a core fonctionnality of majors mods ... :sad:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWaiting on some API info from some people in Squad\n\u003C/p\u003E\n"},{"CreatedByName":"msnbcorp","CreatedById":171008,"CreatedDateTime":"2016-11-01T17:12:07Z","Content":"\n\u003Cp\u003E\nOk \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Jiraiyah","CreatedById":97667,"CreatedDateTime":"2016-11-28T12:17:27Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022125714\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0022 rel=\u0022\u0022\u003E@jamespicone\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHi sir, no news i guess from squad part? Damn this mod is a must have for heavily modded ksp playing :/\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-28T12:17:37Z\u0022 title=\u002211/28/2016 12:17  PM\u0022 data-short=\u00227 yr\u0022\u003ENovember 28, 2016\u003C/time\u003E by Jiraiyah\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2016-12-02T10:47:44Z","Content":"\n\u003Cp\u003E\nHi all.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter some investigation in the source I have noticed that there is a function defined in \u003Cem\u003EsolarPanel.cs\u003C/em\u003E to get the vessel position but not used.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\t\tpublic static Vector3d VesselPosition(Vessel vessel) \u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThere are two functions in this file using GetWorldPos3D() instead of this function:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Epublic static bool RaytraceBody(Vessel vessel, CelestialBody body, out Vector3d dir, out double dist) \n\npublic override HashSet\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ProtoPartResourceSnapshot\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E HandleResource(Vessel v, VesselData data, HashSet\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ProtoPartResourceSnapshot\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E modified) {\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf you change them to use the defined function then the calculations are done using getPositionAtUT and the problem disappears. At least\u00A0for me. I have it working in 1.2.1 heavy modded career.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-12-02T10:48:59Z\u0022 title=\u002212/02/2016 10:48  AM\u0022 data-short=\u00227 yr\u0022\u003EDecember 2, 2016\u003C/time\u003E by Guest\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ketatrypt","CreatedById":157561,"CreatedDateTime":"2017-04-12T14:38:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222871794\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480675664\u0022 data-ipsquote-userid=\u0022152599\u0022 data-ipsquote-username=\u0022bice\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 12/2/2016 at 5:47 AM, bice said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi all.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter some investigation in the source I have noticed that there is a function defined in \u003Cem\u003EsolarPanel.cs\u003C/em\u003E to get the vessel position but not used.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003E\t\tpublic static Vector3d VesselPosition(Vessel vessel) \u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThere are two functions in this file using GetWorldPos3D() instead of this function:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003Epublic static bool RaytraceBody(Vessel vessel, CelestialBody body, out Vector3d dir, out double dist) \n\npublic override HashSet\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ProtoPartResourceSnapshot\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E HandleResource(Vessel v, VesselData data, HashSet\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ProtoPartResourceSnapshot\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E modified) {\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf you change them to use the defined function then the calculations are done using getPositionAtUT and the problem disappears. At least\u00A0for me. I have it working in 1.2.1 heavy modded career.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIs this the fix for leaving the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E? (specifically for 1.1.3)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWould you be able to upload the compiled fixed version? I really love the mod but the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E bug is killer \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-04-12T20:26:30Z\u0022 title=\u002204/12/2017 08:26  PM\u0022 data-short=\u00227 yr\u0022\u003EApril 12, 2017\u003C/time\u003E by Ketatrypt\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"buttercookie42","CreatedById":177361,"CreatedDateTime":"2017-05-02T22:04:39Z","Content":"\n\u003Cp\u003E\nGood news: I\u0027ve managed to recompile this for 1.2.2 myself and am just in the process of making sure this not only compiles, but actually works as well. So far I\u0027ve found one issue with the OX-STAT panel, where for some reason (a genuine stock data bug?) no transform matching the \u003Ca href=\u0022https://bitbucket.org/buttercookie42/background-processing/src/83db31e178b682f8159112e874be0e66f87cb233/ResourceHandlers/SolarPanel.cs?fileviewer=file-view-default#SolarPanel.cs-134\u0022 rel=\u0022external nofollow\u0022\u003EraycastTransformName\u003C/a\u003E is existing. Falling back to the pivotName in that case seems to work, though.\n\u003C/p\u003E\n\u003Cp\u003E\nOther than that, I just want to verify the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E NaN-issue myself and then hopefully this should be good to go.\n\u003C/p\u003E\n"},{"CreatedByName":"N3N","CreatedById":165167,"CreatedDateTime":"2017-05-03T05:18:52Z","Content":"\n\u003Cp\u003E\nHey,\n\u003C/p\u003E\n\u003Cp\u003E\nNice mod! \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhich 1.2.2 compatible mods do use this or used it in older releases?\n\u003C/p\u003E\n\u003Cp\u003E\nIt would be nice, if the \u0022Planetary Logistics\u0022 in MKS and \u003Cabbr title=\u0022Umbra Space Industries (a collection of mods)\u0022\u003EUSI\u003C/abbr\u003E-LS would use this. \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd will the 1.2.2 compatible version be available on \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E, too?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSorry for my english, but it\u0027s only my third language.\n\u003C/p\u003E\n"},{"CreatedByName":"buttercookie42","CreatedById":177361,"CreatedDateTime":"2017-05-03T19:11:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223042878\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493762679\u0022 data-ipsquote-userid=\u0022177361\u0022 data-ipsquote-username=\u0022buttercookie42\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3.5.2017 at 0:04 AM, buttercookie42 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo far I\u0027ve found one issue with the OX-STAT panel, [...] (a genuine stock data bug?)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOn closer investigation, no. It seems that the raycastTransformName has simply been superseded by the secondaryTransformName. Regarding the NaN issues, I\u0027ve also read through the history of this thread and it looks indeed like the helper function \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/88777-113-backgroundprocessing/\u0026amp;page=7#comment-2608524\u0022 rel=\u0022\u0022\u003Esuggested here\u003C/a\u003E was added to the code, but never properly hooked up. I hope it\u0027s working properly now - I\u0027ve given it a quick test and didn\u0027t see anything out of the ordinary.\n\u003C/p\u003E\n\u003Cp\u003E\nIn any case, for the time being \u003Ca href=\u0022https://bitbucket.org/buttercookie42/background-processing/commits/all\u0022 rel=\u0022external nofollow\u0022\u003Ethe source is here\u003C/a\u003E and \u003Cs\u003Ethe compiled DLL here\u003C/s\u003E (Edit: Now available on\u00A0\u003Ca href=\u0022https://spacedock.info/mod/288/BackgroundProcessing\u0022 rel=\u0022external nofollow\u0022\u003ESpacedock\u003C/a\u003E). As for \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E, I\u0027ll wait a while for \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022125714\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0022 rel=\u0022\u0022\u003E@jamespicone\u003C/a\u003E first...\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-04T17:02:20Z\u0022 title=\u002205/04/2017 05:02  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 4, 2017\u003C/time\u003E by buttercookie42\u003C/strong\u003E\n\u003Cbr\u003Enew version now officially released\n\u003C/span\u003E\n"},{"CreatedByName":"N3N","CreatedById":165167,"CreatedDateTime":"2017-05-04T12:18:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223043887\u0022 data-ipsquote-contentid=\u002288777\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493838708\u0022 data-ipsquote-userid=\u0022177361\u0022 data-ipsquote-username=\u0022buttercookie42\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, buttercookie42 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIn any case, for the time being \u003Ca href=\u0022https://bitbucket.org/buttercookie42/background-processing/commits/all\u0022 rel=\u0022external nofollow\u0022\u003Ethe source is here\u003C/a\u003E and \u003Ca href=\u0022https://bitbucket.org/buttercookie42/background-processing/downloads/BackgroundProcessing-0.4.5.0.zip\u0022 rel=\u0022external nofollow\u0022\u003Ethe compiled DLL here\u003C/a\u003E. As for \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E, I\u0027ll wait a while for \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022125714\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125714-jamespicone/\u0022 rel=\u0022\u0022\u003E@jamespicone\u003C/a\u003E first...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHey buttercookie42,\n\u003C/p\u003E\n\u003Cp\u003E\nGreat work! \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThank you!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIs there somewhere a list with compatible mods?\n\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2017-05-04T12:37:09Z","Content":"\n\u003Cp\u003E\nI\u0027ve accepted \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/177361-buttercookie42/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022177361\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/177361-buttercookie42/\u0022 rel=\u0022\u0022\u003E@buttercookie42\u003C/a\u003E\u0027s pull request against my repository, rebuilt the mod against KSP 1.2.2, did a basic works-on-my-machine test and put it on SpaceDock. I don\u0027t really know about \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E; probably a good idea for somebody else to do that.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks Buttercookie42, as should be obvious I\u0027m not really maintaining this any more. It\u0027d probably be ideal if somebody else took over; don\u0027t really mind who. Happy to hand stuff over in a semi-official way if necessary.\n\u003C/p\u003E\n"}]}