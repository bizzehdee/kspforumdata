{"TopicId":142213,"ForumId":34,"TopicTitle":"PEGAS - Powered Explicit Guidance Ascent System - devlog","CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-06-22T01:03:11Z","PageNum":7,"Articles":[{"CreatedByName":"La Piante","CreatedById":205406,"CreatedDateTime":"2021-05-12T20:54:19Z","Content":"\n\u003Cp\u003E\nOk thank you very much ... i\u0027m not a coder but i\u0027m trying to understand ...\n\u003C/p\u003E\n\u003Cp\u003E\nI am using the space shuttle system from spacedock:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://spacedock.info/mod/1178/Space%20Shuttle%20System\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://spacedock.info/mod/1178/Space Shuttle System\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m already trying to replace my 3 motors pointed towards the center of mass to have less torque, but apparently it\u0027s more complicated.\n\u003C/p\u003E\n\u003Cp\u003E\nI found a program called Matlab, do you know?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-05-12T20:58:13Z\u0022 title=\u002205/12/2021 08:58  PM\u0022 data-short=\u00223 yr\u0022\u003EMay 12, 2021\u003C/time\u003E by La Piante\u003C/strong\u003E\n\u003Cbr\u003Ewrong language\n\u003C/span\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2021-05-13T10:15:50Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/205406-la-piante/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022205406\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/205406-la-piante/\u0022 rel=\u0022\u0022\u003E@La Piante\u003C/a\u003E\u00A0I suggest you consider opening a separate thread, because\u00A0your issue, as \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0026amp;do=hovercard\u0022 data-mentionid=\u002288541\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0022 rel=\u0022\u0022\u003E@Razgriz1\u003C/a\u003E\u00A0points out, is quite complicated and currently its solution lies outside the scope of what PEGAS is capable of. Usually I\u0027m okay with providing help, but we\u0027re at a risk of drifting off-topic here.\n\u003C/p\u003E\n\u003Cp\u003E\nAlternatively, you can open an issue (or even a pull request) on my github, if you feel a feature like this should make it into the program. If this is the case, I would rather we focused the conversation here on coming up with a general approach that would let users fly all kinds of weird spacecraft, not only the Shuttle.\u00A0Perhaps I should add a sort of optional \u0022steering intercept\u0022 function? Something like a delegate that the user could provide that would act like a sort of hook into the system, allowing any kind of transformation of the steering vector. By default it would be something like \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Ef(x)=x\u003C/span\u003E, but it could be overridden (e.g. in \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ECONTROLS\u003C/span\u003E) with whatever (e.g. \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EshuttleSteerDir\u003C/span\u003E). I\u0027m not sure if I understand your approach \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0026amp;do=hovercard\u0022 data-mentionid=\u002288541\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0022 rel=\u0022\u0022\u003E@Razgriz1\u003C/a\u003E, I haven\u0027t had the time to review your code in detail -- would that work?\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/205406-la-piante/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022205406\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/205406-la-piante/\u0022 rel=\u0022\u0022\u003E@La Piante\u003C/a\u003E\u00A0Yes, I do know Matlab. I have programmed the entire prototype of PEGAS in Matlab. Please read this\u00A0thread to gain some perspective \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-05-13T12:19:56Z\u0022 title=\u002205/13/2021 12:19  PM\u0022 data-short=\u00223 yr\u0022\u003EMay 13, 2021\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"La Piante","CreatedById":205406,"CreatedDateTime":"2021-05-13T12:06:59Z","Content":"\n\u003Cdiv\u003E\n\u003Cdiv style=\u0022color:#5f6368;font-size:12px;\u0022\u003E\n\u003Cspan style=\u0022color:#000000;\u0022\u003E\u003Cspan style=\u0022font-size:16px;\u0022\u003Esorry for the inconvenience you did well to warn me.\u003C/span\u003E\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv style=\u0022color:#5f6368;font-size:12px;\u0022\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cdiv style=\u0022color:#5f6368;font-size:12px;\u0022\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003EWhen I read the different codes to try to understand, I realized that it is too much\u00A0complicated for me. But I wanted to say congratulations to you for this script\u00A0because it is very complicated. Well done.\u003C/span\u003E\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv style=\u0022color:#5f6368;font-size:12px;\u0022\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003EBut if you think that it is possible to add a function to calculate the steering vector\u00A0then, I support you for that.\u003C/span\u003E\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv style=\u0022color:#5f6368;font-size:12px;\u0022\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cdiv style=\u0022color:#5f6368;font-size:12px;\u0022\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003EI\u0027ll post my issue on your github.\u003C/span\u003E\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv style=\u0022color:#5f6368;font-size:12px;\u0022\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cdiv style=\u0022color:#5f6368;font-size:12px;\u0022\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cspan style=\u0022color:#000000;\u0022\u003Ethank you\u003C/span\u003E\u003C/span\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n"},{"CreatedByName":"Razgriz1","CreatedById":88541,"CreatedDateTime":"2021-05-13T14:59:42Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124298\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0022 rel=\u0022\u0022\u003E@Reddy\u003C/a\u003E\u00A0yeah, my function should work. I\u0027m more than happy to try and adapt it for your script, though my understanding of delegates is somewhat lacking at the moment and\u003Cs\u003E I don\u0027t really understand the benefit of doing that over just a normal function call. I\u0027d need to do a bit of learning on that subject before I\u0027m able to help you with that.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nBut yes, generally what my function does is takes in an input direction, i.e. the normal direction you would use for steering, and outputs a transformed direction that you can lock your steering to. This transformed direction is the direction you need to point in order for your thrust vector to point through your center of mass in the original direction you input into the function. If your nominal thrust vector is already through your center of mass, then my function\u00A0\u003Cem\u003Eshould\u003C/em\u003E\u00A0just return the same direction (or near enough, due to floating point error) though I\u0027ll admit, I\u0027ve never tested it on anything that didn\u0027t have offset thrust.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: Scratch that, I think I get it now: you would do something like \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ELOCK STEERING TO SteeringTransform(\u0026lt;target_direction\u0026gt;)\u003C/span\u003E and that \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ESteeringTransform\u003C/span\u003E would be a delegate that defaults to just outputting the input with no transformation, but you could set that delegate to something else that does do a transformation instead of like say an if statement with a switch variable. I never really understood the benefit of delegates until just now... Most of my programming experience is just bespoke scripts for things at work or in KSP. I\u0027m not used to generalizing my code.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you come up with how you\u0027d like to implement this on your end, I can see how I might hook my function into this and see how well it works.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-05-13T15:11:50Z\u0022 title=\u002205/13/2021 03:11  PM\u0022 data-short=\u00223 yr\u0022\u003EMay 13, 2021\u003C/time\u003E by Razgriz1\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2021-05-13T22:05:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223971651\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620917982\u0022 data-ipsquote-userid=\u002288541\u0022 data-ipsquote-username=\u0022Razgriz1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Razgriz1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nyou would do something like \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ELOCK STEERING TO SteeringTransform(\u0026lt;target_direction\u0026gt;)\u003C/span\u003E and that \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ESteeringTransform\u003C/span\u003E would be a delegate that defaults to just outputting the input with no transformation, but you could set that delegate to something else that does do a transformation instead of like say an if statement with a switch variable.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou get it right \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0026amp;do=hovercard\u0022 data-mentionid=\u002288541\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0022 rel=\u0022\u0022\u003E@Razgriz1\u003C/a\u003E,\u00A0this is exactly what delegates (aka function pointers - I\u0027m more used to this term due to my extensive C/C\u002B\u002B background) are for!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003ESuch a modification should be very easy to implement. \u003Cs\u003EI\u0027ll\u003C/s\u003E\u00A0I\u0027ve put it on the list of things to think about (link below). The only difficulty I see about this is testing. If you could help with this (since you\u0027ve got a craft and transform function at hand), that would take a lot of hassle off my back \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/205406-la-piante/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022205406\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/205406-la-piante/\u0022 rel=\u0022\u0022\u003E@La Piante\u003C/a\u003E\u00A0you can join the discussion I\u0027ve opened myself:\u00A0\u003Ca href=\u0022https://github.com/Noiredd/PEGAS/issues/38\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Noiredd/PEGAS/issues/38\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-05-13T22:12:16Z\u0022 title=\u002205/13/2021 10:12  PM\u0022 data-short=\u00223 yr\u0022\u003EMay 13, 2021\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003Cbr\u003Eissue opened\n\u003C/span\u003E\n"},{"CreatedByName":"Razgriz1","CreatedById":88541,"CreatedDateTime":"2021-05-13T22:23:08Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124298\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0022 rel=\u0022\u0022\u003E@Reddy\u003C/a\u003EI\u0027m gonna need to do more testing anyway just to make sure it\u0027s doing exactly what I think it should. I\u0027ve only ever really used it on one vehicle, though I have used it in two separate stages of the vehicle, where the offset is different (i.e. Shuttle\u002BET vs shuttle alone with OMS).\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m happy to help you flesh this out some and to add my function as an example of something you can do with it. We can continue this discussion on the issue over on Github.\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2021-05-15T14:12:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223971896\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221620944588\u0022 data-ipsquote-userid=\u002288541\u0022 data-ipsquote-username=\u0022Razgriz1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Razgriz1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI have used it in two separate stages of the vehicle, where the offset is different\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is an extremely important piece of information! Thanks for mentioning it - we\u0027ll have to figure out a way to let this handle such cases as well. Since I saw you both post under the issue, let\u0027s move further discussion on this particular subject there \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"FabioofSpace","CreatedById":196285,"CreatedDateTime":"2021-08-24T18:17:40Z","Content":"\n\u003Cp\u003E\nHey, does this work with principia?\n\u003C/p\u003E\n"},{"CreatedByName":"Razgriz1","CreatedById":88541,"CreatedDateTime":"2021-08-25T21:17:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224023797\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221629829060\u0022 data-ipsquote-userid=\u0022196285\u0022 data-ipsquote-username=\u0022FabioofSpace\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/24/2021 at 1:17 PM, FabioofSpace said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHey, does this work with principia?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes\n\u003C/p\u003E\n"},{"CreatedByName":"ElAlien859","CreatedById":210638,"CreatedDateTime":"2022-01-29T19:29:02Z","Content":"\n\u003Cp\u003E\nHi, what does it mean when it says UPFG status: Converging...?\u003Cbr\u003E\nI\u0027m flying an Atlas B from Cape Canaveral and I followed all the steps of the tutorial and read every document that\u0027s in Github, and I haven\u0027t found anything on \u0022converging\u0022, I only found where you explain what it is.\u003Cbr\u003E\nI must\u0027ve overlooked it, but how can I fix it?\n\u003C/p\u003E\n"},{"CreatedByName":"Razgriz1","CreatedById":88541,"CreatedDateTime":"2022-01-29T23:52:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224084007\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221643484542\u0022 data-ipsquote-userid=\u0022210638\u0022 data-ipsquote-username=\u0022ElAlien859\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, ElAlien859 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi, what does it mean when it says UPFG status: Converging...?\u003Cbr\u003E\nI\u0027m flying an Atlas B from Cape Canaveral and I followed all the steps of the tutorial and read every document that\u0027s in Github, and I haven\u0027t found anything on \u0022converging\u0022, I only found where you explain what it is.\u003Cbr\u003E\nI must\u0027ve overlooked it, but how can I fix it?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt means that the algorithm is searching for a valid guidance scheme to start following. See\u00A0\u003Ca href=\u0022https://github.com/Noiredd/PEGAS-MATLAB/blob/master/docs/upfg.md#convergence\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E. If the launch vehicle is sufficient to reach orbit, and the initial unguided trajectory is decent, then it should converge pretty quickly and begin active guidance. However, PEGAS is not magic and can\u0027t find a valid guidance scheme if one does not exist given current parameters.\n\u003C/p\u003E\n\u003Cp\u003E\nTypically I have found this to happen if my vehicle is incorrectly defined in the PEGAS setup. Especially with a stage-and-a-half rocket like the Atlas B, you\u0027ll need to be very careful about defining the vehicle. Usually, you should set PEGAS to activate only after the booster skirt has jettisoned. (This is pretty historically accurate as well)\n\u003C/p\u003E\n"},{"CreatedByName":"SpaceFlightNut","CreatedById":192920,"CreatedDateTime":"2022-09-06T20:32:26Z","Content":"\n\u003Cp\u003E\nHello!\n\u003C/p\u003E\n\u003Cp\u003E\nI am examining your code, and I was wondering one thing: What is the purpose of the launch vehicle descriptor file, such as\n\u003C/p\u003E\n\u003Cp\u003E\nPEGAS/kOS/boot/AtlasV-532.ks\n\u003C/p\u003E\n\u003Cp\u003E\nIt contains parameters (such as\u00A0massTotal, massFuel, isp, thrust), that can surely be obtained from the vehicle itself, correct?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt seems as if they are redundantly specified in there, unless I am missing somethng.\u003Cbr\u003E\n\u003Cbr\u003E\nThanks!\n\u003C/p\u003E\n"},{"CreatedByName":"Razgriz1","CreatedById":88541,"CreatedDateTime":"2022-09-07T05:56:17Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224172009\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221662496346\u0022 data-ipsquote-userid=\u0022192920\u0022 data-ipsquote-username=\u0022SpaceFlightNut\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, SpaceFlightNut said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHello!\n\u003C/p\u003E\n\u003Cp\u003E\nI am examining your code, and I was wondering one thing: What is the purpose of the launch vehicle descriptor file, such as\n\u003C/p\u003E\n\u003Cp\u003E\nPEGAS/kOS/boot/AtlasV-532.ks\n\u003C/p\u003E\n\u003Cp\u003E\nIt contains parameters (such as\u00A0massTotal, massFuel, isp, thrust), that can surely be obtained from the vehicle itself, correct?\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt seems as if they are redundantly specified in there, unless I am missing somethng.\u003Cbr\u003E\n\u003Cbr\u003E\nThanks!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nProgramatically determining the staging for your rocket via kOS is not a trivial problem, and relies on various assumptions about how a user sets up staging. It also pretty much entirely breaks down in non-traditional staging cases like the booster skirt jettison for the Atlas rocket, which isn\u0027t reflected in the stock \u003Cabbr title=\u0022Delta-V\u0022\u003EdV\u003C/abbr\u003E readout at all. You also can\u0027t assume any other parameters such as engine ullage requirements or hotstaging requirements (useful in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E/\u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E) and so having the user define their vehicle parameters is a much cleaner way to do this.\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2022-09-07T17:29:30Z","Content":"\n\u003Cp\u003E\nThere\u0027s also the reason of my own laziness: I chose to do it this way (i.e. settle with having to manually describe each launch vehicle) rather than go through the effort of coding up a solution that would (attempt to) figure all those things out automatically. Due to reasons \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0026amp;do=hovercard\u0022 data-mentionid=\u002288541\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0022 rel=\u0022\u0022\u003E@Razgriz1\u003C/a\u003E\u00A0mentioned, I thought this effort would be simply immense, and would add a whole lot of extra failure modes (and worst of all, in order to solve those failures, we\u0027d probably need a way to override the automatic discovery by inputting this data manually... so back to square one).\n\u003C/p\u003E\n\u003Cp\u003E\nPS: Anyone still using PEGAS? I\u0027m working on a v1.3 as we speak \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0026amp;do=hovercard\u0022 data-mentionid=\u002288541\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/88541-razgriz1/\u0022 rel=\u0022\u0022\u003E@Razgriz1\u003C/a\u003E, that upcoming-events-ETA display that you asked for ages ago - I\u0027ve got it done \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222022-09-07T17:32:27Z\u0022 title=\u002209/07/2022 05:32  PM\u0022 data-short=\u00221 yr\u0022\u003ESeptember 7, 2022\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2022-09-07T17:41:59Z","Content":"\n\u003Cp\u003E\nPEGAS for days!\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2022-10-02T16:24:44Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:24px;\u0022\u003E\u003Ca href=\u0022https://github.com/Noiredd/PEGAS/releases/tag/v1.3\u0022 rel=\u0022external nofollow\u0022\u003EPEGAS v1.3 \u0022Olympus\u0022\u003C/a\u003E is out now!\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAt this point I think it\u0027s safe to say that this project is complete, and it has\u00A0\u003Cem\u003Eall you might possibly use\u003C/em\u003E\u00A0- hence the release name \u0022Olympus\u0022 feels appropriate. Below is a short list of features v1.3 brings:\n\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\nGUI overhaul: better reporting of the vehicle and guidance status, including an event-by-event flight plan display; made possible because...\n\u003C/li\u003E\n\u003Cli\u003E\n...UPFG\u00A0is now aware of jettison and shutdown events before they happen (via a mechanism called \u003Ca href=\u0022https://github.com/Noiredd/PEGAS/blob/v1.3/docs/magic.md\u0022 rel=\u0022external nofollow\u0022\u003Evirtual stages\u003C/a\u003E)\n\u003C/li\u003E\n\u003Cli\u003E\nnew passive guidance mode, \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EpitchProgram\u003C/span\u003E, allows fine-tuning the ascent with a pitch-altitude schedule - \u003Cstrong\u003Econtribution by \u003Ca href=\u0022https://github.com/Aram1d\u0022 rel=\u0022external nofollow\u0022\u003EAram1d\u003C/a\u003E\u003C/strong\u003E\u00A0(thank you!)\n\u003C/li\u003E\n\u003Cli\u003E\nnew event type: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Eshutdown\u003C/span\u003E, allows shutting down specific engines (by part tags), \u003Cstrong\u003Ealso during active guidance\u003C/strong\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nnew event type: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Eaction\u003C/span\u003E, allows execution of standard action groups\n\u003C/li\u003E\n\u003Cli\u003E\nnew ullage type: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Ehot\u003C/span\u003E, allows hot-staging by reversing the jettison-ignition order\n\u003C/li\u003E\n\u003Cli\u003E\nnew staging option: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EpostStageEvent\u003C/span\u003E, allows jettison after ignition (e.g. an interstage ring, Saturn-style)\n\u003C/li\u003E\n\u003Cli\u003E\naddons: you can now create custom extensions to PEGAS;\u00A0an \u003Ca href=\u0022https://github.com/Noiredd/PEGAS-addons\u0022 rel=\u0022external nofollow\u0022\u003Eaddon sharing repository\u003C/a\u003E has also been started\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\nAside from those, there\u0027s over a dozen of other tweaks, fixes and under-the-hood improvements, making this the largest update to PEGAS yet. Read details on the \u003Ca href=\u0022https://github.com/Noiredd/PEGAS/releases/tag/v1.3\u0022 rel=\u0022external nofollow\u0022\u003Erelease page\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nGiven how complete the program now is and how little free time I\u0027ve got to work on it, I decided to call v1.3 the\u00A0\u003Cstrong\u003Efinal major release\u003C/strong\u003E\u00A0\u003Cstrong\u003Eof PEGAS\u003C/strong\u003E. There might be a minor update, should anyone find some bug needing a hotfix (I\u0027ve deliberately delayed this release to test it properly, and I\u0027m fairly confident it\u0027s good, but I\u0027ve been surprised in the past so...), but it\u0027s \u003Cu\u003Ehighly\u003C/u\u003E\u00A0unlikely that I\u0027ll want to add more features or carry overhauls as large as this one ever again (and, with KSP2 around the corner, I don\u0027t think we\u0027ll even need any).\n\u003C/p\u003E\n\u003Cp\u003E\nThis has been a really long journey, with the project being alive (on and off, admittedly) for well over 6.5 years (initial commit in my repository dates back to 12th February 2016). Thank you all for following my work and your support \u0026lt;3\n\u003C/p\u003E\n\u003Cp\u003E\nPS: Give me a holler when KSP2 is out and we have a stable Realism Overhaul \u0026amp; kOS in the new game \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: As always, I forgot to change the UI version number from \u0022v1.3-alpha\u0022 to \u0022v1.3\u0022 - the release has been updated\u00A0\u003Cimg alt=\u0022:sealed:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_lipssealed.gif\u0022 title=\u0022:sealed:\u0022\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222022-10-02T20:17:53Z\u0022 title=\u002210/02/2022 08:17  PM\u0022 data-short=\u00221 yr\u0022\u003EOctober 2, 2022\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003Cbr\u003Erelease version number fix\n\u003C/span\u003E\n"},{"CreatedByName":"asdasdgf","CreatedById":224867,"CreatedDateTime":"2023-01-14T09:07:42Z","Content":"\n\u003Cp\u003E\nevents inside the sequence Less than four, it can cause\u00A0 program error.I don\u0027t know if it is a bug.\n\u003C/p\u003E\n\u003Cp\u003E\nprint:\n\u003C/p\u003E\n\u003Cp\u003E\nindex was out of range\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nmust be non-negative and less than the size of the collection.\n\u003C/p\u003E\n\u003Cp\u003E\nat 0:/pegas_misc.ks,line 480\n\u003C/p\u003E\n"},{"CreatedByName":"asdasdgf","CreatedById":224867,"CreatedDateTime":"2023-01-16T03:32:04Z","Content":"\n\u003Cp\u003E\nSorry, I didn t notice someone had feedback on the issue.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-01-16T03:32:28Z\u0022 title=\u002201/16/2023 03:32  AM\u0022 data-short=\u00221 yr\u0022\u003EJanuary 16, 2023\u003C/time\u003E by asdasdgf\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2023-01-18T21:51:06Z","Content":"\n\u003Cp\u003E\nWhen I try to run PEGAS I get:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem style=\u0022background-color:#ffffff;color:#5f6368;font-size:14px;text-align:left;\u0022\u003ECONTROLFROM\u003C/em\u003E\u003Cspan style=\u0022background-color:#ffffff;color:#4d5156;font-size:14px;text-align:left;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Ecommand found a\u003Cspan\u003E\u00A0\u003C/span\u003E\u003C/span\u003E\u003Cem style=\u0022background-color:#ffffff;color:#5f6368;font-size:14px;text-align:left;\u0022\u003Egeneric\u003C/em\u003E\u003Cspan style=\u0022background-color:#ffffff;color:#4d5156;font-size:14px;text-align:left;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003Epart value, blah blah\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:#ffffff;color:#4d5156;font-size:14px;text-align:left;\u0022\u003EI have a command pod (RC-001S RemoteGuidanceUnit)\u00A0 on the ship I\u0027m trying to launch.\u00A0 Don\u0027t really know what to do now.\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2023-01-18T23:42:03Z","Content":"\n\u003Cp\u003E\nI resolved this by adding the\u00A0kOSProcessor module to the cfg for the command part.\n\u003C/p\u003E\n\u003Cp\u003E\nNow I\u0027m getting\u00A0 ALMOST the same error \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/224867-asdasdgf/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022224867\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/224867-asdasdgf/\u0022 rel=\u0022\u0022\u003E@asdasdgf\u003C/a\u003E\u00A0was getting, except mine happens at line 406\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHow to resolve that?\u00A0 \u00A0Based on what was said, I tried adding some extra events to the sequence to make it \u0026gt; 4 but it didn\u0027t help.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-01-18T23:53:01Z\u0022 title=\u002201/18/2023 11:53  PM\u0022 data-short=\u00221 yr\u0022\u003EJanuary 18, 2023\u003C/time\u003E by Kurld\u003C/strong\u003E\n\u003Cbr\u003Emore info\n\u003C/span\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2023-01-19T02:25:10Z","Content":"\n\u003Cp\u003E\nOK, so the latest version of the pegas_misc file solves that issues.\u00A0 I have it working now.\u00A0 \u00A0Sorry for all the noise.\n\u003C/p\u003E\n\u003Cp\u003E\nGetting a proper gravity turn working is a lot of trial and error, and I still haven\u0027t figured it out, really.\u00A0 \u00A0I can set the throttle at increments of time, but again this is a LOT of trial and error.\n\u003C/p\u003E\n\u003Cp\u003E\nI noticed in the reference that you can set up some kind of delegate function as a sequenced event.\u00A0 Today is \u0022day one\u0022 for me working around in kOS.\u00A0 I\u0027m wondering if it is possible to call a delegate and have it manipulate the throttle so that time to apoapsis remains e.g. 45 seconds in the future, or else maintain some relatively constant acceleration BEFORE the active guidance takes over?\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis will be really \u003Cem\u003Ereally\u003C/em\u003E cool if I can figure out how to make it work.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Razgriz1","CreatedById":88541,"CreatedDateTime":"2023-01-19T03:05:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224221352\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221674095110\u0022 data-ipsquote-userid=\u002279950\u0022 data-ipsquote-username=\u0022Kurld\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 minutes ago, Kurld said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOK, so the latest version of the pegas_misc file solves that issues.\u00A0 I have it working now.\u00A0 \u00A0Sorry for all the noise.\n\u003C/p\u003E\n\u003Cp\u003E\nGetting a proper gravity turn working is a lot of trial and error, and I still haven\u0027t figured it out, really.\u00A0 \u00A0I can set the throttle at increments of time, but again this is a LOT of trial and error.\n\u003C/p\u003E\n\u003Cp\u003E\nI noticed in the reference that you can set up some kind of delegate function as a sequenced event.\u00A0 Today is \u0022day one\u0022 for me working around in kOS.\u00A0 I\u0027m wondering if it is possible to call a delegate and have it manipulate the throttle so that time to apoapsis remains e.g. 45 seconds in the future, or else maintain some relatively constant acceleration BEFORE the active guidance takes over?\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis will be really \u003Cem\u003Ereally\u003C/em\u003E cool if I can figure out how to make it work.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou probably\u00A0\u003Cem\u003Ecan\u003C/em\u003E\u00A0(you can do a lot of things with delegates in PEGAS) but I\u0027m not sure you\u0027d really want to do that. The open-loop guidance portion, a.k.a. before \u0022active guidance\u0022 is mostly to get you high enough in the atmosphere so that the closed-loop portion can take over. Your open-loop portion should be over fairly quickly before you\u0027d really want to control your time-to-apogee. You\u0027d probably be better off setting up a pitch program instead of a simple pitch angle. You can make a okayish ascent profile without too much effort.\n\u003C/p\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2023-01-19T03:27:52Z","Content":"\n\u003Cp\u003E\nThanks for the quick reply. I will look into pitch program next/instead.\u003Cbr\u003E\n\u003Cbr\u003E\nFor vanilla, what is \u0022high enough in the atmosphere\u0022?\u00A0 How far towards the horizon should I be tilted?\u00A0The docs mention 45km-ish but I suspect that is for the real world atmosphere.\u00A0 I suspect the example boot files are for real-world performance and I have no idea how they would really translate into vanilla KSP values.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2023-01-19T05:57:37Z","Content":"\n\u003Cp\u003E\nJust gonna ping \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124298\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0022 rel=\u0022\u0022\u003E@Reddy\u003C/a\u003E in case they have input \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Kurld","CreatedById":79950,"CreatedDateTime":"2023-01-19T13:05:04Z","Content":"\n\u003Cp\u003E\nWell I messed around with setting up a pitch program this morning.\u00A0 Maybe I don\u0027t really understand \u0022gravity turn\u0022 but in no case have I been able to hand things over to active guidance and not have it pitch up to nearly vertical and reset throttle to 100%.\u00A0 This results in the apo being 600 to 700km on a planned 115 km flight path (remember I am in vanilla KSP.)\u00A0 At the handoff I am somewhere around 60km altitude and nearly horizontal with a predicted APO of about 90km\u00A0 I can\u0027t recall what my velocity was but I\u0027m guessing the algorithm must feel it is much too low to continue on to the planned orbit.\u003Cbr\u003E\n\u003Cbr\u003E\nI also made PEGAS crash.\u00A0 If it gets to the end of the pitch program before handing over, it blows up with another index out of bounds error.\u00A0 I\u0027ll try to make a more full report on github after work.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"}]}