{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":18,"Articles":[{"CreatedByName":"TheClassiestMedic","CreatedById":92545,"CreatedDateTime":"2014-03-31T02:24:00Z","Content":"\n\u003Cp\u003EThis is such a great mod! Or would be... if it would work. I can\u0027t wait to make autopilots and whatnot, but upon trying to open the interface, I get an error about missing textures. I double-checked the GFX folder and all four are there, just like they are in the .zip from SpacePort. Does anyone have any insight into how I could get this to work? I have TextureCompressor, could that be it?\u003C/p\u003E\u003Cp\u003EI doubt it, seeing as there is no custom config for kOS under \u0027GameData\\BoulderCo\\textureCompressorConfigs\u0027, so I don\u0027t think TextureCompressor would find reason to muck with the HUD layout images\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-31T02:33:59Z\u0022 title=\u002203/31/2014 02:33  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 31, 2014\u003C/time\u003E by TheClassiestMedic\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-31T05:11:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheClassiestMedic\u0022 data-cite=\u0022TheClassiestMedic\u0022\u003E\u003Cdiv\u003EThis is such a great mod! Or would be... if it would work. I can\u0027t wait to make autopilots and whatnot, but upon trying to open the interface, I get an error about missing textures. I double-checked the GFX folder and all four are there, just like they are in the .zip from SpacePort. Does anyone have any insight into how I could get this to work? I have TextureCompressor, could that be it?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre your files for kOS arranged in exactly the following way? Your base folder may be different from mine., but everything from \u0022KERBAL SPACE PROGRAM\u0022 on down should be the same:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFolder PATH listing for volume BOOTCAMP\u003Cbr\u003EVolume serial number is EA40-27E1\u003Cbr\u003EC:\\PROGRAM FILES (X86)\\STEAM\\STEAMAPPS\\COMMON\\KERBAL SPACE PROGRAM\\GAMEDATA\\KOS\u003Cbr\u003E|   Readme\u003Cbr\u003E|   \u003Cbr\u003E\u002B---Flags\u003Cbr\u003E|       kOS-Logo.png\u003Cbr\u003E|       \u003Cbr\u003E\u002B---GFX\u003Cbr\u003E|       FontFinder.png\u003Cbr\u003E|       font_sml.png\u003Cbr\u003E|       monitor_launch.png\u003Cbr\u003E|       monitor_minimal.png\u003Cbr\u003E|       \u003Cbr\u003E\u002B---Parts\u003Cbr\u003E|   \\---kOSMachine1m\u003Cbr\u003E|           model.mu\u003Cbr\u003E|           model000.mbm\u003Cbr\u003E|           model001.mbm\u003Cbr\u003E|           part.cfg\u003Cbr\u003E|           \u003Cbr\u003E\\---Plugins\u003Cbr\u003E    |   kOS.dll\u003Cbr\u003E    |   \u003Cbr\u003E    \\---PluginData\u003Cbr\u003E        \\---kOS\u003Cbr\u003E                config.xml\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-31T05:35:44Z","Content":"\n\u003Cp\u003EHas anyone had this problem with \u0027lock steering\u0027?\u003C/p\u003E\u003Cp\u003EAs long as my craft has some mass located radially away from the central axis, helping give it a lot of rotational inertia, the steering algorithm seems to be able to correctly work out how to dampen its inputs to stop oscillations:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/hBBt8qA.jpg\u0022 alt=\u0022hBBt8qA.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EBut once I drop that raidal mass away so the entire ship consists of only parts centered exactly on the axis, like this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/ntaWfiA.jpg\u0022 alt=\u0022ntaWfiA.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThen the steering keeps oscillating the roll back and forth, as if a pilot was pressing \u0022Q\u0022 for a full second, and then \u0022E\u0022 for a full second and then \u0022Q\u0022 again and then \u0022E\u0022 again and so on. The oscillation seems to progressively get bigger and bigger the longer I leave the steering locked. It starts out small, and then after a few minutes it\u0027s oscillating through a range of about \u002B/- 70 degrees. It seems the steering code doesn\u0027t handle the case very well where the rotational control available from the torque wheels is large compared to the rotational inertia resisting it. It doesn\u0027t just overshoot and move a bit too far, the oscillations build on each other and get bigger and bigger.\u003C/p\u003E\n"},{"CreatedByName":"Joe32320","CreatedById":81055,"CreatedDateTime":"2014-03-31T10:15:06Z","Content":"\n\u003Cp\u003EIs there a relatively simple way to determine the heading of the prograde and retrograde markers on the nav ball (both surface and orbit markers)?\u003C/p\u003E\n"},{"CreatedByName":"Weadme","CreatedById":107095,"CreatedDateTime":"2014-03-31T15:54:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThe comptronix part looks very similar to other parts. Go to the \u0022control\u0022 tab and hover over all the parts there to make sure none of them are it.\u003Cp\u003EIf you\u0027re sure that it\u0027s not there, then check your installation as follows:\u003C/p\u003E\u003Cp\u003EIs the part located here?\u003C/p\u003E\u003Cp\u003EKerbal Space Program -\u0026gt; GameData -\u0026gt; kOS -\u0026gt; Parts -\u0026gt; kOSMachine1m -\u0026gt; \u003C/p\u003E\u003Cp\u003EYou should see these files there:\u003C/p\u003E\u003Cp\u003Emodel.mu\u003C/p\u003E\u003Cp\u003Emodel000.mbm\u003C/p\u003E\u003Cp\u003Emodeloo1.mbm\u003C/p\u003E\u003Cp\u003Epart.cfg\u003C/p\u003E\u003Cp\u003EIf you don\u0027t see that in that location, then you probably exploded the ZIP file in the wrong place.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the replies. Turns out I was an idiot \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I downloaded the zip file from github, instead of the spaceport (how on earth did I miss that huge red \u0027Download now!\u0027 button? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E )\u003C/p\u003E\u003Cp\u003ENow I have all the files. Let the scripting begin! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-31T19:03:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Weadme\u0022 data-cite=\u0022Weadme\u0022\u003E\u003Cdiv\u003EThanks for the replies. Turns out I was an idiot \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I downloaded the zip file from github, instead of the spaceport (how on earth did I miss that huge red \u0027Download now!\u0027 button? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E )\u003Cp\u003ENow I have all the files. Let the scripting begin! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh yes. The files on Spaceport have everything, but not up to date with the latest development changes. To get the latest version, from scratch, you get the spaceport zip first, and then on top of it install the github zip, which replaces the .DLL code, but doesn\u0027t ship with all the other files.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-31T19:06:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Joe32320\u0022 data-cite=\u0022Joe32320\u0022\u003E\u003Cdiv\u003EIs there a relatively simple way to determine the heading of the prograde and retrograde markers on the nav ball (both surface and orbit markers)?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShort answer, get into orbit, then try experimenting with these statements to see what they do:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock steering to mysteer.\u003Cbr\u003E\u003Cbr\u003E// followed by these, try them one at a time and watch the effect:\u003Cbr\u003Eset mysteer to velocity:orbit.\u003Cbr\u003Eset mysteer to (-1)*velocity:orbit.\u003Cbr\u003Eset mysteer to velocity:surface.\u003Cbr\u003Eset mysteer to (-1)*velocity:surface.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(The reason for using the intermediate \u0022mysteer\u0022 variable instead of locking directly to the vectors is because of a bug in how the interactive terminal works. The parser breaks when you try to lock the same variable a second time from the interactive terminal, and you\u0027d have to toggle power on the unit to fix it.)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-31T19:11:08Z\u0022 title=\u002203/31/2014 07:11  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 31, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Joe32320","CreatedById":81055,"CreatedDateTime":"2014-03-31T19:53:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EShort answer, get into orbit, then try experimenting with these statements to see what they do:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock steering to mysteer.\u003Cbr\u003E\u003Cbr\u003E// followed by these, try them one at a time and watch the effect:\u003Cbr\u003Eset mysteer to velocity:orbit.\u003Cbr\u003Eset mysteer to (-1)*velocity:orbit.\u003Cbr\u003Eset mysteer to velocity:surface.\u003Cbr\u003Eset mysteer to (-1)*velocity:surface.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(The reason for using the intermediate \u0022mysteer\u0022 variable instead of locking directly to the vectors is because of a bug in how the interactive terminal works. The parser breaks when you try to lock the same variable a second time from the interactive terminal, and you\u0027d have to toggle power on the unit to fix it.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI should have been clearer. Basically I\u0027m creating a landing program, and at low speed the retrograde marker moves about alot and the ship ends up trying to chase it with comedic results. If I could get an idea of what heading the marker was in, then I could tell the steering to lock to that heading at a pitch of 85 to the horizon, so the retrograde marker slowly goes back to the top of the navball, and the ship doesn\u0027t chase the marker too much. \u003C/p\u003E\u003Cp\u003EI hope that makes sense.\u003C/p\u003E\n"},{"CreatedByName":"Ralathon","CreatedById":71537,"CreatedDateTime":"2014-03-31T20:42:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Joe32320\u0022 data-cite=\u0022Joe32320\u0022\u003E\u003Cdiv\u003EI should have been clearer. Basically I\u0027m creating a landing program, and at low speed the retrograde marker moves about alot and the ship ends up trying to chase it with comedic results. If I could get an idea of what heading the marker was in, then I could tell the steering to lock to that heading at a pitch of 85 to the horizon, so the retrograde marker slowly goes back to the top of the navball, and the ship doesn\u0027t chase the marker too much. \u003Cp\u003EI hope that makes sense.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you trying to hover or something? Because during the final stages of a normal landing your retrograde vector should always be pretty close to the zenith.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-31T21:35:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Joe32320\u0022 data-cite=\u0022Joe32320\u0022\u003E\u003Cdiv\u003EI should have been clearer. Basically I\u0027m creating a landing program, and at low speed the retrograde marker moves about alot and the ship ends up trying to chase it with comedic results. If I could get an idea of what heading the marker was in, then I could tell the steering to lock to that heading at a pitch of 85 to the horizon, so the retrograde marker slowly goes back to the top of the navball, and the ship doesn\u0027t chase the marker too much. \u003Cp\u003EI hope that makes sense.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell at first you said you *wanted* to point prograde or retrograde which is why I gave the answer I did. Now you\u0027re talking about the situation where you emphatically do NOT want to do that. Those markers moving around the navball really are the true retro/prograde markers, and it\u0027s correct that they do that when you get near zero vertical velocity.\u003C/p\u003E\u003Cp\u003EWhat you really want is not \u0022how do I steer retrograde\u0022 but rather \u0022how do I NOT steer retrograde in this one instance\u0022?\u003C/p\u003E\u003Cp\u003EAnd here\u0027s how I did it ages ago, although there may be something coming soon that makes it easier:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://kos.wikia.com/wiki/Tutorial_-_KOS_0.61_and_above:_Finding_surface_dynamic_information\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kos.wikia.com/wiki/Tutorial_-_KOS_0.61_and_above:_Finding_surface_dynamic_information\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIt rotates the frame of reference using matrix math so it turns your velocity:surface into north, east, and up components instead of KSP\u0027s native xyz which is a mess.\u003C/p\u003E\u003Cp\u003EIn a nutshell, you use tfXYZToEnu from that page to take any vector (in this case velocity:surface) and transform it into tfE, tfN, and tfU for its east, north, and up components.\u003C/p\u003E\u003Cp\u003EOnce you\u0027ve split it into east, north, and up, then you can work out what you want to do with that information, for example, if you\u0027re going east at 5 m/s, and north at -5 m/s, then that means you\u0027re drifting on a heading of 135 degrees (southeast).\u003C/p\u003E\u003Cp\u003EFor a general solution, the compass heading you are drifting on will be derivable by using the trig function arctan2(tfN,tfE).\u003C/p\u003E\u003Cp\u003EOnce you have the compass heading, you can do something like this:\u003C/p\u003E\u003Cp\u003Elock steering to heading(-compass,85).\u003C/p\u003E\u003Cp\u003Eto aim mostly up, but tilted 5 degrees off opposite of your current surface drift.\u003C/p\u003E\n"},{"CreatedByName":"TheClassiestMedic","CreatedById":92545,"CreatedDateTime":"2014-03-31T21:49:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EAre your files for kOS arranged in exactly the following way? Your base folder may be different from mine., but everything from \u0022KERBAL SPACE PROGRAM\u0022 on down should be the same:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFolder PATH listing for volume BOOTCAMP\u003Cbr\u003EVolume serial number is EA40-27E1\u003Cbr\u003EC:\\PROGRAM FILES (X86)\\STEAM\\STEAMAPPS\\COMMON\\KERBAL SPACE PROGRAM\\GAMEDATA\\KOS\u003Cbr\u003E|   Readme\u003Cbr\u003E|   \u003Cbr\u003E\u002B---Flags\u003Cbr\u003E|       kOS-Logo.png\u003Cbr\u003E|       \u003Cbr\u003E\u002B---GFX\u003Cbr\u003E|       FontFinder.png\u003Cbr\u003E|       font_sml.png\u003Cbr\u003E|       monitor_launch.png\u003Cbr\u003E|       monitor_minimal.png\u003Cbr\u003E|       \u003Cbr\u003E\u002B---Parts\u003Cbr\u003E|   \\---kOSMachine1m\u003Cbr\u003E|           model.mu\u003Cbr\u003E|           model000.mbm\u003Cbr\u003E|           model001.mbm\u003Cbr\u003E|           part.cfg\u003Cbr\u003E|           \u003Cbr\u003E\\---Plugins\u003Cbr\u003E    |   kOS.dll\u003Cbr\u003E    |   \u003Cbr\u003E    \\---PluginData\u003Cbr\u003E        \\---kOS\u003Cbr\u003E                config.xml\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, all the files are there, except for \u0027config.xml\u0027, which I assume is generated because it\u0027s not present in the .zip\u003C/p\u003E\u003Cp\u003EThe error occurs even when I remove all other mods... I\u0027ve no clue how to fix it\u003C/p\u003E\n"},{"CreatedByName":"Joe32320","CreatedById":81055,"CreatedDateTime":"2014-03-31T22:06:44Z","Content":"\n\u003Cp\u003EI did say that I wanted to know how to \u0022determine\u0022 the (compass) heading of the various markers, rather than \u0022point\u0022 the ship towards a marker. That said, thank you for the information, I\u0027ll give it a go. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E (I forgot the kOS wiki existed).\u003C/p\u003E\n"},{"CreatedByName":"P.Funk","CreatedById":3080,"CreatedDateTime":"2014-03-31T23:06:39Z","Content":"\n\u003Cp\u003EI can\u0027t really read 44 pages so I\u0027m just gonna ask, is there anyone who has or knows if you could use this to create a level autopilot for atmospheric flight? Basically something that will vary pitch angle to achieve a stable altitude or a null vertical velocity.\u003C/p\u003E\u003Cp\u003EI browsed the syntax list and didn\u0027t see anything specifically for that. I don\u0027t mind doing work on my own to achieve it, I just want to know if I\u0027m sniffing under the right tree.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-31T23:41:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheClassiestMedic\u0022 data-cite=\u0022TheClassiestMedic\u0022\u003E\u003Cdiv\u003EYes, all the files are there, except for \u0027config.xml\u0027, which I assume is generated because it\u0027s not present in the .zip\u003Cp\u003EThe error occurs even when I remove all other mods... I\u0027ve no clue how to fix it\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, then I have no idea.\u003C/p\u003E\u003Cp\u003EYou are correct that config.xml is autogenerated by the mod when you run it.\u003C/p\u003E\u003Cp\u003EIn fact, the fact that it\u0027s missing helps indicate something : that the mod didn\u0027t actually run.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-31T23:43:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Joe32320\u0022 data-cite=\u0022Joe32320\u0022\u003E\u003Cdiv\u003EI did say that I wanted to know how to \u0022determine\u0022 the (compass) heading of the various markers, rather than \u0022point\u0022 the ship towards a marker. That said, thank you for the information, I\u0027ll give it a go. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E (I forgot the kOS wiki existed).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA lot of what\u0027s in the wiki is out of date and becoming more and more incorrect as time goes on. It was basically created because Kevin Laity didn\u0027t want to make comprehensive documentation so a fan-made documenting project was started but we were mostly guessing by trial and error how things worked. Documentation is in the plans for the newer iteration of kOS so keeping the wiki up to date is no longer a top priority.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-31T23:45:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022P.Funk\u0022 data-cite=\u0022P.Funk\u0022\u003E\u003Cdiv\u003EI can\u0027t really read 44 pages so I\u0027m just gonna ask, is there anyone who has or knows if you could use this to create a level autopilot for atmospheric flight? Basically something that will vary pitch angle to achieve a stable altitude or a null vertical velocity.\u003Cp\u003EI browsed the syntax list and didn\u0027t see anything specifically for that. I don\u0027t mind doing work on my own to achieve it, I just want to know if I\u0027m sniffing under the right tree.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt should be possible. You can read your verticalspeed with the term \u0027verticalspeed\u0027, so you should be able to write something that adjusts the pitch depending on the vertical speed, to try to seek a vertical speed of zero.\u003C/p\u003E\n"},{"CreatedByName":"P.Funk","CreatedById":3080,"CreatedDateTime":"2014-04-01T05:38:15Z","Content":"\n\u003Cp\u003EYea, I saw that. I basically posted earlier as I was about to go out without having reviewed everything. By looking at it more closely it should be relatively simple to tell it to do something like say:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Eset ship:control:pitch to 0.1 when verticalspeed \u0026gt; 0\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOr something? Right now I\u0027m not looking for anything too sexy. Basically my goal would be to recreate a program that would emulate the autopilot on the real life A-10. Basically its a Pitch, Heading, Altitude hold autopilot that is not integrated into the throttle so it literally just has 3 modes that allow either level flight at a fixed altitude, level flight at a fixed vertical pitch of the velocity vector, and fixed altitude with a fixed bank angle. \u003C/p\u003E\u003Cp\u003ESo far looking over what KOS is capable of I\u0027m wondering if its even possible to have it respond to the altitude hold settings by using the altitude at the time it was activated and not one I enter as a fixed interger. Possibly I guess once I get into it. The other thing that I\u0027m curious about is whether it can distinguish the velocity vector from the pitch of the longitudinal axis of the aircraft. This would be more useful than just telling it to maintain a given pitch or pitch a given amount until vertical velocity is zero.\u003C/p\u003E\u003Cp\u003EAnyway, I haven\u0027t even tried yet so I\u0027ll get down to it and be back when I have some results.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-01T06:37:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022P.Funk\u0022 data-cite=\u0022P.Funk\u0022\u003E\u003Cdiv\u003EBasically its a Pitch, Heading, Altitude hold autopilot that is not integrated into the throttle so it literally just has 3 modes that allow either level flight at a fixed altitude, level flight at a fixed vertical pitch of the velocity vector, and fixed altitude with a fixed bank angle. \u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe most useful thing for what you want is probably the \u0027lock\u0027 command. If you can think of a math expression to respond to the changing conditions, it works well.\u003C/p\u003E\u003Cp\u003EFor example, to lock altitude to the altitude you started the code at, something like this might work:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// current altitude at the start of the program.\u003Cbr\u003Eset startAlt to altitude.\u003Cbr\u003E\u003Cbr\u003E// The desired vertical speed - want it to be negative if above startAlt, or positive if below startAlt.\u003Cbr\u003E// In this example, the vertical speed desired is 1 m/s per 10 meters off from the target altitude.\u003Cbr\u003E// You might have to tweak that up or down.\u003Cbr\u003Elock seekVSpd to (altitude - startAlt)/10.\u003Cbr\u003E\u003Cbr\u003Eset curPitch to 0.\u003Cbr\u003Euntil 0 { // loop forever - probably need a good end condition for a real program.\u003Cbr\u003E  set curPitch to curPitch \u002B (seekVSpd-verticalspeed)/5.\u003Cbr\u003E  set ship:control:pitch to curPitch.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI haven\u0027t tried compiling that or anything. It\u0027s just a first guess at how I might do an altitude maintainer for an airplane. It\u0027s supposed to adjust pitch more strongly the further the verticalspeed differs from the desired verticalspeed, where in turn the desired verticalspeed is itself dependant on how far off you are from the desired altitude. Its sort of a lazy attempt at something like a PID controller.\u003C/p\u003E\u003Cp\u003EGive it a try and see what\u0027s wrong with it and go from there. I doubt it will work out of the box.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-01T07:08:37Z","Content":"\n\u003Cp\u003EIn the past I had a very convoluted algorithm for detecting when to do an asparagus stage and it had gotten messy and ugly as I tried adding more support for solid boosters and different sorts of arrangements. It was based on trying to watch the rate of losing consumables (sometimes by measuring fuel, other time by measuring mass), and deciding that if the rate of consumption drops it must be because an engine stopped.\u003C/p\u003E\u003Cp\u003EBut I realized that some of the new features added more recently to kOS solved this problem ages ago and I just didn\u0027t notice.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// Check for flameout of any of the existing engines:\u003Cbr\u003Eset numOut to 0.\u003Cbr\u003Elist engines in englist.\u003Cbr\u003Efor eng in englist { \u003Cbr\u003E  if eng:flameout {\u003Cbr\u003E    set numOut to numOut \u002B 1.\u003Cbr\u003E  }.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf numOut is \u0026gt; 0 after running that code, then at least one engine is trying to be throttled that isn\u0027t working because it\u0027s starved of fuel, so it\u0027s time to asparagus stage. Changing the code to use this instead reduced the bytecount of my script by about 1000 bytes or so.\u003C/p\u003E\u003Cp\u003EI thought \u0027flameout\u0022 was just for jet engines starved of air, but it works on rockets too, and triggers when any starved resource is stopping the engine from working (lquid fuel, solid fuel, oxidizer, whatever).\u003C/p\u003E\u003Cp\u003EBut it turns out you do need to have the throttle \u0026gt; 0 in order for KSP to flag the engine as flamed out. If your throttle is idle, then eng:flameout will always return false no matter what.\u003C/p\u003E\n"},{"CreatedByName":"TranquilTempest","CreatedById":18141,"CreatedDateTime":"2014-04-01T08:47:49Z","Content":"\n\u003Cp\u003ENewbie here writing a custom throttle control script. Is there a way to directly determine how much thrust you\u0027re getting from SRBs, if SRBs and liquid engines are burning simultaneously? I want to calculate throttle position based on maxthrust and desired acceleration, but don\u0027t know how to account for SRBs in this scenario.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-04-01T14:19:41Z","Content":"\n\u003Cp\u003EHow do I get or set values in a specific engine in a list?\u003C/p\u003E\n"},{"CreatedByName":"Sacru","CreatedById":107277,"CreatedDateTime":"2014-04-01T16:39:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EHow do I get or set values in a specific engine in a list?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere are only getters, not setters, for engines at the moment, see here: \u003Ca href=\u0022http://erendrake.github.io/KOS/structure/engine/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://erendrake.github.io/KOS/structure/engine/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAn example to get the current thrust for the first engine in the list.\u003C/p\u003E\u003Cp\u003Elist engines in foo.\u003C/p\u003E\u003Cp\u003Eprint foo#0:thrust.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TranquilTempest\u0022 data-cite=\u0022TranquilTempest\u0022\u003E\u003Cdiv\u003ENewbie here writing a custom throttle control script. Is there a way to directly determine how much thrust you\u0027re getting from SRBs, if SRBs and liquid engines are burning simultaneously? I want to calculate throttle position based on maxthrust and desired acceleration, but don\u0027t know how to account for SRBs in this scenario.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI cannot work out what causes the order the engines are listed in, so I am not sure how to end up with the solid fuel rockets at a specific point in a list. Though you can call on the length of the list and make a loop looking at its values, such as the ISP, to determine certain things. The example below is messy as I just made it up now and the list# will not work with anything but an integer, as in you cannot set x to 1 then call on foo#x.\u003C/p\u003E\u003Cp\u003Elist engines in foo.\u003C/p\u003E\u003Cp\u003Eset x to foo:length.\u003C/p\u003E\u003Cp\u003Eset y to 0.\u003C/p\u003E\u003Cp\u003Euntil y = x\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003Ewhen y = 0 {if foo#0:isp \u0026lt; 275 {set result to result \u002B foo#0:thrust.}. set y to y \u002B 1.}.\u003C/p\u003E\u003Cp\u003Ewhen y = 1 {if foo#1:isp \u0026lt; 275 {set result to result \u002B foo#1:thrust.}. set y to y \u002B 1.}.\u003C/p\u003E\u003Cp\u003Ewhen y = 2 {if foo#2:isp \u0026lt; 275 {set result to result \u002B foo#2:thrust.}. set y to y \u002B 1.}.\u003C/p\u003E\u003Cp\u003E//etc\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\n"},{"CreatedByName":"Hans Dorn","CreatedById":105419,"CreatedDateTime":"2014-04-01T16:58:29Z","Content":"\n\u003Cp\u003EThat\u0027s a bit tricky. The numbering of the engines depends on how the editor has put together your rocket in the VAB.\u003C/p\u003E\u003Cp\u003EIt also changes after each staging!\u003C/p\u003E\u003Cp\u003EYou can do something like:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elist engines in e.print e.\u003C/pre\u003E\u003Cp\u003ETo see how the engines are numbered for the current phase of staging.\u003C/p\u003E\u003Cp\u003EUse e#3 to access engine 4. (Indices start at 0 IIRC)\u003C/p\u003E\u003Cp\u003ECheers\u003C/p\u003E\u003Cp\u003EHans\u003C/p\u003E\u003Cp\u003EP.S: Beware of rapiers, they generate 2 entries in the list!\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-01T18:45:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sacru\u0022 data-cite=\u0022Sacru\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Ewhen y = 0 {if foo#0:isp \u0026lt; 275 {set result to result \u002B foo#0:thrust.}. set y to y \u002B 1.}.\u003C/p\u003E\u003Cp\u003Ewhen y = 1 {if foo#1:isp \u0026lt; 275 {set result to result \u002B foo#1:thrust.}. set y to y \u002B 1.}.\u003C/p\u003E\u003Cp\u003Ewhen y = 2 {if foo#2:isp \u0026lt; 275 {set result to result \u002B foo#2:thrust.}. set y to y \u002B 1.}.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOn a side note, the \u0022#\u0022 operator isn\u0027t particularly useful because of how it only works with hardcoded literals in the code like that. It would be useful if you could do this:\u003C/p\u003E\u003Cp\u003Efoo#y\u003C/p\u003E\u003Cp\u003Eusing a variable for the index. (But since kosscript programmers don\u0027t directly control the datatype of numeric variables, it would have to be implemented to deal with cases where y is implemented in a floating point format - i.e. it should handle when y = 2.0 just as well as when y = 2. ).\u003C/p\u003E\u003Cp\u003ERight now the only way to access an element of a list in a truly generic varying way is with the list\u0027s for loop. Even if you know ahead of time \u0022I want to access the Nth element where N is stored in a variable\u0022, you still have to iterate over them from the beginning to get to it.\u003C/p\u003E\u003Cp\u003EI was considering starting to contribute to the code by trying to implement this after I get a handle on the parser generator tool used by the code.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-04-01T18:51:47Z\u0022 title=\u002204/01/2014 06:51  PM\u0022 data-short=\u002210 yr\u0022\u003EApril 1, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-04-01T18:53:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TranquilTempest\u0022 data-cite=\u0022TranquilTempest\u0022\u003E\u003Cdiv\u003ENewbie here writing a custom throttle control script. Is there a way to directly determine how much thrust you\u0027re getting from SRBs, if SRBs and liquid engines are burning simultaneously? I want to calculate throttle position based on maxthrust and desired acceleration, but don\u0027t know how to account for SRBs in this scenario.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can get the name of the engine, but then you have to know which engines are named what, making it impossible to write a script that will generically work regardless of what mod parts are installed. The script has to know the names of all the SRB parts installed in the game.\u003C/p\u003E\n"}]}