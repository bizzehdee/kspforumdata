{"TopicId":64140,"ForumId":34,"TopicTitle":"[0.90WIP] Procedural Parts - Parts the way you want \u0026#039;em 0.9.21, Dec 19","CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-02-24T06:17:22Z","PageNum":2,"Articles":[{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-03-01T07:51:12Z","Content":"\n\u003Cp\u003ESounds very well thought out. Im not sure I\u0027d be interested in coding it up. Just feels a bit cheaty to me.\u003C/p\u003E\u003Cp\u003EOf course that\u0027s a personal preference, but tanks seem like they require only a bit of engineering to tweak their size, even command pods aren\u0027t that ultimately different if one tweaks the size. However,Having done some fluid dynamics in one of my Past jobs, tweaking engines just aint that simple.\u003C/p\u003E\u003Cp\u003EHaving said all that I\u0027d be more than happy to support someone who is willing to do the coding \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"bazz","CreatedById":61364,"CreatedDateTime":"2014-03-01T08:52:51Z","Content":"\n\u003Cp\u003EHave you thought about adding a service module option to the tank type tweakable. So we can have tanks with LF, Mono and electricity perhaps with a max number of units according to size so i.e. 300 units for 2.5x1 / 1x2.5 with the ability to set mono, electricity and LF levels out of the 300 units ie. 120/147 LF 10 mono 23 electricity.\u003C/p\u003E\n"},{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-03-01T08:55:43Z","Content":"\n\u003Cp\u003EBazz: yep, planned. Easy doable with some config tweaking\u003C/p\u003E\n"},{"CreatedByName":"bazz","CreatedById":61364,"CreatedDateTime":"2014-03-01T11:06:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swamp_ig\u0022 data-cite=\u0022swamp_ig\u0022\u003E\u003Cdiv\u003EBazz: yep, planned. Easy doable with some config tweaking\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWould it be possible to get other shapes rather than just cylinder and cone?\u003C/p\u003E\u003Cp\u003EIf so I think many people would use that feature to build much more fluid craft shapes.\u003C/p\u003E\u003Cp\u003EA few examples off the top of my head...\u003C/p\u003E\u003Cp\u003ECone with the point of cone offset (think raised tail piece but it would be useful for loads of stuff), Mk2/mk3 fuselage cross section shape, firespitter hull shapes, D shape cross section (with curve of D facing down) would also be lush but I guess you would also need an adapter to make it useful. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EOh and maybe b9 fuselage cross section shapes too?\u003C/p\u003E\n"},{"CreatedByName":"Hammer Tech","CreatedById":97099,"CreatedDateTime":"2014-03-02T19:44:26Z","Content":"\n\u003Cp\u003EI have a slight bug with this: I made a plane with a procedural tank on the front and a regular tank on the back, made the Ptank liquid fuel only, and when I launch it the Ptank contains oxidiser too... I\u0027m not sure what\u0027s going on with it.\u003C/p\u003E\n"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2014-03-02T21:39:33Z","Content":"\n\u003Cp\u003EProcedural Engines and Engine Bells.\u003C/p\u003E\n"},{"CreatedByName":"AngelLestat","CreatedById":58968,"CreatedDateTime":"2014-03-06T15:19:42Z","Content":"\n\u003Cp\u003EI support this 100%\u003C/p\u003E\u003Cp\u003EBut you can not do this alone, is a lot of work.\u003C/p\u003E\u003Cp\u003EIf you wanna remplace most of the parts of the game by procedural parts you will need help.\u003C/p\u003E\u003Cp\u003EI would love to see a parameter code that any modder can use to create his/her parts in a procedural way.\u003C/p\u003E\u003Cp\u003EPlus the cost of the part depending size needs to be included.\u003C/p\u003E\u003Cp\u003EA fusion between procedural wings, stretchy, procedural fairings, real fuels, the new real chute version (now is procedural), and extra addoms; all in one.\u003C/p\u003E\u003Cp\u003EIt will possible to reach an agreedment with most of the modder to accomplish this?\u003C/p\u003E\n"},{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-03-08T12:25:10Z","Content":"\n\u003Cp\u003ESee thread main message - new release 0.6.0.\u003C/p\u003E\u003Cp\u003ENow with pill-shaped parts.\u003C/p\u003E\u003Cp\u003EI\u0027m thinking this is pretty much ready for generalized release, rather than be in development status. Having Bezier cones would be ideal prior to general release really, just to be feature complete with StretchySRBs.\u003C/p\u003E\n"},{"CreatedByName":"DasBananenbrot","CreatedById":70900,"CreatedDateTime":"2014-03-08T13:16:31Z","Content":"\n\u003Cp\u003ENice you finally added some pictures.. I actually didn\u0027t test it yet but are they easily compatible with Real Fuels like the tanks from StretchySRB\u003C/p\u003E\n"},{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-03-08T14:28:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DasBananenbrot\u0022 data-cite=\u0022DasBananenbrot\u0022\u003E\u003Cdiv\u003ENice you finally added some pictures.. I actually didn\u0027t test it yet but are they easily compatible with Real Fuels like the tanks from StretchySRB\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EShould be, I don\u0027t use RF however, can you try it out and let me know?\u003C/p\u003E\n"},{"CreatedByName":"DasBananenbrot","CreatedById":70900,"CreatedDateTime":"2014-03-08T14:45:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swamp_ig\u0022 data-cite=\u0022swamp_ig\u0022\u003E\u003Cdiv\u003EShould be, I don\u0027t use RF however, can you try it out and let me know?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESure will will do sometime this weekend ^^\u003C/p\u003E\n"},{"CreatedByName":"jsimmons","CreatedById":85423,"CreatedDateTime":"2014-03-09T12:48:09Z","Content":"\n\u003Cp\u003EGreat work on this Mod. So I tried the RealFuel mod with this to see if it would work. It didn\u0027t so I tracked down the issue. You need to do two things to make it work. First you need to download \u003Ca href=\u0022http://www.infradead.org/~jsimmons/ProceduralParts.cfg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.infradead.org/~jsimmons/ProceduralParts.cfg\u003C/a\u003E into your GameData/RealFuels directory. Next you need to delete TankContentSwitcher sections of TankLiquid.cfg and TankRCS.cfg. Both interfere with RealFuels. I will push the ProceduralParts.cfs to Nathan to be included into RealFuels.\u003C/p\u003E\n"},{"CreatedByName":"Arrowmaster","CreatedById":57556,"CreatedDateTime":"2014-03-09T16:53:55Z","Content":"\n\u003Cp\u003EIf you are branching out beyond just tanks then I would like to see procedural girders, trusses, and other such structural parts before engines. Bonus for structural parts with tanks in them. There are plenty of engine mods but not enough good structual parts (or at least not enough good ones that arent spread out as 1 or 2 parts here and there in giant part packs).\u003C/p\u003E\n"},{"CreatedByName":"jsimmons","CreatedById":85423,"CreatedDateTime":"2014-03-09T18:01:30Z","Content":"\n\u003Cp\u003EAfter getting real fuels working with Prodecural Parts I now have started to work on prodecural decouplers. I posted a basic config for decouplers at \u003Ca href=\u0022http://www.infradead.org/~jsimmons/Decoupler.cfg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.infradead.org/~jsimmons/Decoupler.cfg\u003C/a\u003E. Different size couplers are supported at different tech levels. As you progress in your tech tree you will find the thickness of your stack couplers can be made smaller and smaller. When you can metaMaterials technology I do allow the decouplers to be any size. I don\u0027t want to stand in the way if someone wants a 10 KiloTon decoupler \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Sorry no textures for the decouplers. I like for an artist in this thread to pick that up. Also as we add more parts we should consider organizing the texture maps.\u003C/p\u003E\u003Cp\u003ECurrently the decoupler has a set value for the ejection force and also what direction the force is in. Also it is not a stack separator. For a stack separator you need to set the isOmniDecoupler flag to true. As this mod develops we will need the decoupler settings to be tweakable. It would be nice to control the amount of force and its direction. Also allowing the user to change it from a decoupler to stack separator would be awesome. It would make sense that the range of the separation force be related to the size of the decoupler.\u003C/p\u003E\u003Cp\u003EThis is all for review at this point so feedback is welcomed. Oh I did test it and it works.\u003C/p\u003E\n"},{"CreatedByName":"jsimmons","CreatedById":85423,"CreatedDateTime":"2014-03-09T18:26:19Z","Content":"\n\u003Cp\u003EYes Arrowmaster that is goal. I have started to aim for the low hanging fruit. Things like decouplers, heat shields and such can be handled by the basic shapes we already have. With a grouping of cylinders for example we can create produceral wheels. What is missing that would help us move forward is cubes, hexagons, and octagons. This would help to turn several rover and probe bodies into produceral parts. Also 3D hexagons would be cool. With groupings of cubes and rectangles we could create trusses. You have to create a base cell that you would repeat X by Y times. This would also apply to square solar planes since they are very flat cubes.\u003C/p\u003E\n"},{"CreatedByName":"Green Skull","CreatedById":103510,"CreatedDateTime":"2014-03-09T18:45:38Z","Content":"\n\u003Cp\u003ECant\u0027 believe I missed this until now. Looks great!\u003C/p\u003E\n"},{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-03-10T00:14:08Z","Content":"\n\u003Cp\u003Ejsimmonds: Great work! \u003C/p\u003E\u003Cp\u003EReal fuels: \u003C/p\u003E\u003Cp\u003EI\u0027ve actually discussed this with Nathan at some stage, real fuels needs to listen for the same message that TankContentSwitcher listens for: UpdateTankVolume(float tankVolume)\u003C/p\u003E\u003Cp\u003E(This really needs to be renamed to UpdatePartVolume, it\u0027s a holdover from when it was just a tank)\u003C/p\u003E\u003Cp\u003EI\u0027m not sure if RF updates the dry mass of the tank either, in which case TCS will need to detect RF and not fiddle with the fuels, rather than just remove the module completely.\u003C/p\u003E\u003Cp\u003EI\u0027ll work properly on RF integration once I complete bezier cones. That way there\u0027s full feature parity with StretchySRBs\u003C/p\u003E\u003Cp\u003EDecouplers:\u003C/p\u003E\u003Cp\u003EAwesome, I hadn\u0027t thought of that. The config is really a piece of cake too.\u003C/p\u003E\u003Cp\u003EMight be worth having a special shape for decouplers, since really the only thing you\u0027d want to tweak would be the diameter I\u0027d expect.\u003C/p\u003E\u003Cp\u003EProbably the easiest way would be to subclass pill shape, hide the editors for length and fillet, and make them dependent on diameter (say length = diameter /10, fillet = 2 * diameter / 10)\u003C/p\u003E\u003Cp\u003ETexture maps:\u003C/p\u003E\u003Cp\u003EThis is definitely on my radar. The current texture system won\u0027t work too well when I introduce extruded shapes. I\u0027ve put quite a bit of thought into the best way to handle it, haven\u0027t quite come up with a good general solution just yet but not too far away... \u003C/p\u003E\u003Cp\u003ECubes, hexagons and octagons (as well as Mk2 and Mk3 bodies):\u003C/p\u003E\u003Cp\u003EThey\u0027re really going to be next. I\u0027ve actually figured out a way to reuse much of the code I\u0027ve already coded up for surfaces of revolution.\u003C/p\u003E\u003Cp\u003EGotta finish beziers first tho.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-10T00:18:18Z\u0022 title=\u002203/10/2014 12:18  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 10, 2014\u003C/time\u003E by swamp_ig\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DasBananenbrot","CreatedById":70900,"CreatedDateTime":"2014-03-10T05:18:51Z","Content":"\n\u003Cp\u003EI really like where this is all going. It has a great future ahead. Even NathanKell mentioned it on the StretchyTanks as a \u0022natural Stretchy Successor\u0022 so please stay on it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E I think jsimmons has some great ideas there, you should get \u003C/p\u003E\u003Cp\u003EHim on board as official dev of this mod. Together you can reach much more \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"acc","CreatedById":80018,"CreatedDateTime":"2014-03-10T16:41:37Z","Content":"\n\u003Cp\u003EVery nice pack, but i really miss the additional shapes for the conic tank, to build modules like this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/lHFRGtv.png\u0022 alt=\u0022lHFRGtv.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sirklick","CreatedById":76119,"CreatedDateTime":"2014-03-11T00:01:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022acc\u0022 data-cite=\u0022acc\u0022\u003E\u003Cdiv\u003EVery nice pack, but i really miss the additional shapes for the conic tank, to build modules like this: *snip*\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMultiple thread posts and op confirm that being the next thing to be added. This makes it feature complete with StretchySRB.\u003C/p\u003E\n"},{"CreatedByName":"AngelLestat","CreatedById":58968,"CreatedDateTime":"2014-03-11T01:39:04Z","Content":"\n\u003Cp\u003ECongrats for your upgrade.\u003C/p\u003E\u003Cp\u003EBut you dint answer my question, what is your main idea with this mod?\u003C/p\u003E\u003Cp\u003EWhat about others procedural mods?\u003C/p\u003E\u003Cp\u003EIt will be possible to have one day one mod to remplace almost all parts with procedural parts, or the only chance would be had 20 mods that would cover most of the parts, and then delete all stock parts that we might remplace... Going in this direction is difficult to imagine a widespread use of procedural parts.\u003C/p\u003E\u003Cp\u003EPd: I see the pictures, looks great. How you would manage the cost depending the dimentions that we choose? Maybe a dinamyc formule given by surface to calculate the cost..\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-11T01:43:20Z\u0022 title=\u002203/11/2014 01:43  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 11, 2014\u003C/time\u003E by AngelLestat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-03-11T02:15:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DasBananenbrot\u0022 data-cite=\u0022DasBananenbrot\u0022\u003E\u003Cdiv\u003EEven NathanKell mentioned it on the StretchyTanks as a \u0022natural Stretchy Successor\u0022\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGuess I wasn\u0027t clear. :]\u003C/p\u003E\u003Cp\u003EThis isn\u0027t a, this is *the* stretchy successor, i.e. Stretchy v9\u002B, with a broader name since it\u0027s diversifying, and spearheaded by swamp_ig who\u0027s doing amazing stuff (and way more/better than I was!)\u003C/p\u003E\n"},{"CreatedByName":"ferram4","CreatedById":21328,"CreatedDateTime":"2014-03-11T03:16:40Z","Content":"\n\u003Cp\u003EHey, swamp_ig, you said you thought that the SRB nozzles should vary in relation to thrust? Turns out they should! I have a bit of complicated math for you.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://upload.wikimedia.org/wikipedia/commons/4/4c/Nozzle_de_Laval_diagram.svg\u0022 alt=\u0022Nozzle_de_Laval_diagram.svg\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo what we\u0027re looking at is a converging-diverging nozzle, like above, where the left-hand converging portion is embedded in the tank and the diverging portion is visible. In order to get supersonic flow in the diverging portion of the nozzle, the flow must be choked, and the closed form expression for the mass flow through a choked nozzle is:\u003C/p\u003E\u003Cp\u003Em_dot = p0 \u00C3\u201A\u00C2\u00B7 A* / \u00C3\u00A2\u00CB\u2020\u00C5\u00A1T0 \u00C3\u201A\u00C2\u00B7 \u00C3\u00A2\u00CB\u2020\u00C5\u00A1(\u00C3\u017D\u00C2\u00B3/R \u00C3\u201A\u00C2\u00B7 (2 / (\u00C3\u017D\u00C2\u00B3 \u002B 1))\u003Csup\u003E(\u00C3\u017D\u00C2\u00B3 \u002B 1)/(\u00C3\u017D\u00C2\u00B3-1)\u003C/sup\u003E)\u003C/p\u003E\u003Cp\u003Ewhere:\u003C/p\u003E\u003Cp\u003Em_dot = mass flow rate = T/v\u003Csub\u003Eexit\u003C/sub\u003E = T/(Isp \u00C3\u201A\u00C2\u00B7 g0), kg/s\u003C/p\u003E\u003Cp\u003Ep0 = stagnation pressure = combustion chamber pressure, Pa\u003C/p\u003E\u003Cp\u003EA* = throat area, m\u003Csup\u003E2\u003C/sup\u003E\u003C/p\u003E\u003Cp\u003ET0 = stagnation temperature = combustion chamber temperature, K\u003C/p\u003E\u003Cp\u003E\u00C3\u017D\u00C2\u00B3 = ratio of specific heats of gas, probably ~1.2\u003C/p\u003E\u003Cp\u003ER = specific gas constant = universal gas constant / gas molecular mass, J/(kg)(K)\u003C/p\u003E\u003Cp\u003EYou\u0027ll know m_dot from burn time, p0 and T0 can be estimated from typical solid fuels, \u00C3\u017D\u00C2\u00B3 and R can be found for the combustion products of typical solid fuels. From that you can solve out A* for a given amount of thrust. Based on some searching about how to handle gases with solid particles in it and how aluminum and ammonium perchlorate react, you can use the typical gas equations but use a \u00C3\u017D\u00C2\u00B3 of 1.195 and an R of 172.64 J/(kg)(K). I\u0027m not exactly sure what pressure and temperature to use though, since it looks like that gets pretty complicated in itself, though I\u0027d take educated guesses of ~30 - 50 atm pressure and ~1500 - 3500 K temperature.\u003C/p\u003E\u003Cp\u003ESo that tells you how big the throat area has to be for a given amount of fuel flowing through it. Now, nothing stops the nozzle from becoming smaller, but the diameter of the tank should put some type of upper limit on the throat area. Based on what I\u0027ve read, it looks like the general rule is that the upper limit on throat area is about 0.5 times the area of the initial open space for combustion in the SRM; I\u0027d say that that should set the upper limit at about 1/3 - 1/2 of the cross-section of the SRM, which means that the throat should be able to get slightly larger than it currently is for the sea level nozzles and quite a bit larger for vacuum nozzles.\u003C/p\u003E\u003Cp\u003EEdit: I feel like I should note that the above equation would work for any rocket engine, not just solids. So if someone wants to go about making a procedural engines mod, that is the equation you want for figuring out how large the engine throat needs to be for a given chamber pressure and temperature.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-11T03:22:16Z\u0022 title=\u002203/11/2014 03:22  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 11, 2014\u003C/time\u003E by ferram4\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2014-03-11T04:18:05Z","Content":"\n\u003Cp\u003EI just had a thought: procedural skins. Build a girder structure, attach 3 anchor points, and have a surface generated between the points. 3 sliders for how parabolically to interpolate each axis. Crash tolerance inverse to distance between anchors.\u003C/p\u003E\n"},{"CreatedByName":"User Unrelated","CreatedById":74021,"CreatedDateTime":"2014-03-11T04:46:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rhoark\u0022 data-cite=\u0022rhoark\u0022\u003E\u003Cdiv\u003EI just had a thought: procedural skins. Build a girder structure, attach 3 anchor points, and have a surface generated between the points. 3 sliders for how parabolically to interpolate each axis. Crash tolerance inverse to distance between anchors.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t have any real interest in procedural tanks/whatevers like in the OP (don\u0027t mind me, just fatin\u0027 around the forum because bored)\u003C/p\u003E\u003Cp\u003Ebut THIS THIS THIS\u003C/p\u003E\u003Cp\u003Eis something that I would be VERY interested in.\u003C/p\u003E\u003Cp\u003Ecalculating aerodynamics might get hard.\u003C/p\u003E\n"}]}