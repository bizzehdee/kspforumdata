{"TopicId":84504,"ForumId":34,"TopicTitle":"[old thread] Trajectories : atmospheric predictions","CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-13T15:42:57Z","PageNum":2,"Articles":[{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-13T21:02:47Z","Content":"\n\u003Cp\u003EI should try MechJeb, heard a lot about it, but never installed it yet. I thought it didn\u0027t work with FAR though, but maybe I\u0027m wrong ?\u003C/p\u003E\u003Cp\u003EBy the way, I\u0027ve added some screenshots to the original post. Sorry for the delay.\u003C/p\u003E\n"},{"CreatedByName":"Thomas988","CreatedById":92699,"CreatedDateTime":"2014-09-13T21:18:41Z","Content":"\n\u003Cp\u003EHoly cow! This is incredible! Rep for you!\u003C/p\u003E\n"},{"CreatedByName":"Sandman1217","CreatedById":121785,"CreatedDateTime":"2014-09-13T21:36:17Z","Content":"\n\u003Cp\u003Ebest.. idea... ever\u003C/p\u003E\n"},{"CreatedByName":"AdmiralTigerclaw","CreatedById":92104,"CreatedDateTime":"2014-09-13T21:45:13Z","Content":"\n\u003Cp\u003EWell, it\u0027s about time!\u003C/p\u003E\u003Cp\u003EATM drag and trajectory prediction was long overdue.\u003C/p\u003E\u003Cp\u003EDoes this plot off a trajectory called in by a maneuver node, or just trajectory actual?\u003C/p\u003E\n"},{"CreatedByName":"Binary1011011","CreatedById":121520,"CreatedDateTime":"2014-09-13T21:46:52Z","Content":"\n\u003Cp\u003EWow, I have wanted such a mod for such a long time now and finally there is this mod. Thank you so much!\u003C/p\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-13T21:47:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AdmiralTigerclaw\u0022 data-cite=\u0022AdmiralTigerclaw\u0022\u003E\u003Cdiv\u003EWell, it\u0027s about time!\u003Cp\u003EATM drag and trajectory prediction was long overdue.\u003C/p\u003E\u003Cp\u003EDoes this plot off a trajectory called in by a maneuver node, or just trajectory actual?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust the actual trajectory right now. Maneuver nodes are on my task list for later.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-09-13T22:02:56Z","Content":"\n\u003Cp\u003EI m quite interested by how you made it work with FAR. MJ predict the landing with the stock drag model but I never found out how to do it properly with FAR. \u003C/p\u003E\u003Cp\u003EWell done !\u003C/p\u003E\u003Cp\u003EEdit : one thing. You link the FAR dll, so it won\u0027t load if FAR is not here. You should have 2 versions, or have fun with reflection/delegate. PM if you need any example for KSP.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-13T22:09:09Z\u0022 title=\u002209/13/2014 10:09  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 13, 2014\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-13T22:30:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EI m quite interested by how you made it work with FAR. MJ predict the landing with the stock drag model but I never found out how to do it properly with FAR. \u003Cp\u003EWell done !\u003C/p\u003E\u003Cp\u003EEdit : one thing. You link the FAR dll, so it won\u0027t load if FAR is not here. You should have 2 versions, or have fun with reflection/delegate. PM if you need any example for KSP.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s weird, it works on my computer. If I remove the FAR folder from GameData, trying to access FAR functions just throw an exception, which I catch and assume FAR is not installed in that case. Anyway, for better compatibility with any FAR version, I\u0027ll probably need to dynamically find the assembly and use reflection to call the methods, as you suggest. I have to look at the details as I never did this kind of thing before.\u003C/p\u003E\u003Cp\u003EThe way I make it work with FAR is quite simple : I call the main FAR methods on each part to compute the forces. I just trick FAR to give me the situation I want by sending a velocity rotated to the current vessel orientation. That is, if I want to know the drag/lift forces for the vessel going forward, I send a velocity aligned to the forward vector, even if the resulting velocity is not oriented in the direction I actually want, it just needs to be correct relatively to the vessel. Maybe I\u0027m not clear, it\u0027s harder to explain than it actually is...\u003C/p\u003E\u003Cp\u003EAnd then I cache all forces in a big array to avoid recomputing the same thing over and over for each prediction step. Otherwise we\u0027d run into serious performance issues. The cache is updated whenever a big difference is found in the model (this happens when a part is decoupled, rotated, etc.), or when clicking the corresponding button in the map view.\u003C/p\u003E\n"},{"CreatedByName":"liquidhype","CreatedById":112415,"CreatedDateTime":"2014-09-13T23:13:30Z","Content":"\n\u003Cp\u003EThis looks extremely interesting! I\u0027ll give it a try for sure\u003C/p\u003E\n"},{"CreatedByName":"FenrirWolf","CreatedById":72121,"CreatedDateTime":"2014-09-13T23:33:28Z","Content":"\n\u003Cp\u003EWelp. Think I\u0027m gonna have to install this one.\u003C/p\u003E\n"},{"CreatedByName":"AdmiralTigerclaw","CreatedById":92104,"CreatedDateTime":"2014-09-14T00:37:19Z","Content":"\n\u003Cp\u003EI\u0027m in flight in an aircraft right now with this installed, and I do have some data to feed you.\u003C/p\u003E\u003Cp\u003EIt appears that every once in a while, it will report \u0027too many iterations\u0027 and stop trajectory simulation. About the moment it does this, the simulation freezes up multiple times for five to ten seconds. At first I thought I was getting a permenant lockup similar to something else, but it freed itself up after thirty seconds of scaring me. Viewing the logs in flight, it seems to kick out a FAR based warning for \u0027NAN\u0027 values on multiple parts.\u003C/p\u003E\u003Cp\u003EAnyway, looking at the interface in the map menu, it needs some work. First, it needs to be linked to one of the button popup methods so we can hide, it and second, the panels need to be freed up so I can move them around. Right now they appear to be fixed in the top left corner where you spawn them.\u003C/p\u003E\u003Cp\u003EAlso, the descent profile values need axis labeling.\u003C/p\u003E\u003Cp\u003EMight also be prudent that when you turn off trajectory display, it turns off the sampling and computing as well. There\u0027s no point in wasting CPU cycles for a process you\u0027re not even using.\u003C/p\u003E\n"},{"CreatedByName":"dbmorpher","CreatedById":77927,"CreatedDateTime":"2014-09-14T01:28:46Z","Content":"\n\u003Cp\u003EI have a bug where the trajectory is visible in vessel view and even though it is off I can see it in map view\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://imgur.com/a/HLcg3\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://imgur.com/a/HLcg3\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-09-14T01:44:37Z","Content":"\n\u003Cp\u003EThis looks great! Can\u0027t wait to try it.\u003C/p\u003E\u003Cp\u003EAfraid I have a bit of technical business to transact though--can you add a note to the OP about your license? The repo says MIT, but by the rules that should be in the opening post too.\u003C/p\u003E\n"},{"CreatedByName":"Chezburgar7300","CreatedById":114873,"CreatedDateTime":"2014-09-14T01:50:06Z","Content":"\n\u003Cp\u003EDoes this work with RSS?\u003C/p\u003E\n"},{"CreatedByName":"Arron Rift","CreatedById":113722,"CreatedDateTime":"2014-09-14T03:10:52Z","Content":"\n\u003Cp\u003EI just requested something like this a few weeks ago! You sir are timely!\u003C/p\u003E\n"},{"CreatedByName":"Arron Rift","CreatedById":113722,"CreatedDateTime":"2014-09-14T03:25:51Z","Content":"\n\u003Cp\u003ESo how\u0027s this work with NEAR and FAR?\u003C/p\u003E\n"},{"CreatedByName":"LameLefty","CreatedById":57336,"CreatedDateTime":"2014-09-14T03:27:00Z","Content":"\n\u003Cp\u003EQuery - since this tool works with FAR, does it also work with NEAR? I\u0027ve used FAR in the past (and I\u0027m an aerospace engineer by education) but I never liked fiddling with all of FAR\u0027s GUI elements; NEAR is thus perfect for me - as if ferram read my mind when he created it. So I\u0027m using NEAR in my current build and loving it. I really hope this new mod works with NEAR the same way it does with FAR.\u003C/p\u003E\n"},{"CreatedByName":"Spacepetscompany","CreatedById":119734,"CreatedDateTime":"2014-09-14T03:43:35Z","Content":"\n\u003Cp\u003EIs there any chance of being able to inter grate this with Raster Prop Monitor? Looks very promising!\u003C/p\u003E\n"},{"CreatedByName":"Lunaran","CreatedById":69822,"CreatedDateTime":"2014-09-14T04:06:32Z","Content":"\n\u003Cp\u003ECan we maybe get the panel not visible in the tracking station? It covers the vessel menu and you can\u0027t move it or turn it off.\u003C/p\u003E\u003Cp\u003EAlso, can we move it and turn it off?\u003C/p\u003E\n"},{"CreatedByName":"Czerky","CreatedById":121834,"CreatedDateTime":"2014-09-14T04:39:04Z","Content":"\n\u003Cp\u003EThank you for starting this! This is a great idea, and I look forward to seeing how it develops.\u003C/p\u003E\u003Cp\u003EJust thought I\u0027d let you know about an odd bug I found: When this mod is installed, boosters don\u0027t consume any fuel - they run indefinitely. After deleting the mod file, they work as normal again.\u003C/p\u003E\n"},{"CreatedByName":"deadshot462","CreatedById":13659,"CreatedDateTime":"2014-09-14T05:08:51Z","Content":"\n\u003Cp\u003EAny reason why the red trajectory line doesn\u0027t show up? Only the white one for now.\u003C/p\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-14T05:16:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022deadshot462\u0022 data-cite=\u0022deadshot462\u0022\u003E\u003Cdiv\u003EAny reason why the red trajectory line doesn\u0027t show up? Only the white one for now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re not the first one to report this bug. I can\u0027t reproduce it yet, can you look at the FAQ I just added on the first post ? I\u0027d like details to help reproduce the issue(s) on my computer if you have some time (mods, craft, log)\u003C/p\u003E\n"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-14T05:20:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Czerky\u0022 data-cite=\u0022Czerky\u0022\u003E\u003Cdiv\u003EThank you for starting this! This is a great idea, and I look forward to seeing how it develops.\u003Cp\u003EJust thought I\u0027d let you know about an odd bug I found: When this mod is installed, boosters don\u0027t consume any fuel - they run indefinitely. After deleting the mod file, they work as normal again.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s really weird :-S I\u0027ll check that ASAP, I mostly test with spaceplanes so haven\u0027t checked that yet. Can you double check infinite fuel is not enabled ? (alt\u002BF12)\u003C/p\u003E\n"},{"CreatedByName":"Bigred2989","CreatedById":3056,"CreatedDateTime":"2014-09-14T05:30:49Z","Content":"\n\u003Cp\u003EWill this mod or do you plan to make this mod work with NEAR?\u003C/p\u003E\n"},{"CreatedByName":"deadshot462","CreatedById":13659,"CreatedDateTime":"2014-09-14T05:32:16Z","Content":"\n\u003Cp\u003EI can confirm that after this mod was installed, \u0022Infinite Fuel\u0022 was ON even though I never set it. I turned it off at the debug menu.\u003C/p\u003E\n"}]}