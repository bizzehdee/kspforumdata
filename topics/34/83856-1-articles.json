{"TopicId":83856,"ForumId":34,"TopicTitle":"[kOS 0.18.2 Script] RCS Thrust Controller (v4.0) - automated maneuver node execution","CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-05T06:38:10Z","PageNum":1,"Articles":[{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-05T06:38:10Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cdiv style=\u0022text-align:center;\u0022\u003E\n\u003Cimg alt=\u0022J03fW7K.png\u0022 src=\u0022http://i.imgur.com/J03fW7K.png\u0022\u003E\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Ca href=\u0022https://github.com/Gaiiden/RCSTC/releases/latest\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003EDownload Latest Release\u003C/strong\u003E\u003C/a\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003E(v4.0 - 12/23/15)\u003C/span\u003E\u003C/span\u003E\u003C/strong\u003E\u003Cbr\u003E\u003Ca href=\u0022https://github.com/Gaiiden/RCSTC/blob/master/LICENSE\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cimg alt=\u0022O7ApvZQ.png\u0022 src=\u0022http://i.imgur.com/O7ApvZQ.png\u0022\u003E\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EWhat RCS Thrust Controller Does\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis fills a gap in the Remote Tech flight computer, which does not allow you to execute maneuvers using RCS thrust. On some small craft, this may be all that you have available. While you are out of contact or dealing with signal delay, performing maneuvers can be difficult or downright impossible. This script will use your next planned maneuver node and carry it out at the proper time.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EWhat RCS Thrust Controller Doesn\u0027t\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis does not attempt to replace any functionality that already exists with the RT2 Flight Computer. You still have to use the FC to properly orient your craft for the burn. This also does not automatically read all the properties of the thrusters on your craft.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EUsage\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nFull instructions are provided in the ReadMe included. Obviously you need to download and install \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/68089-0-23-kOS-Scriptable-Autopilot-System-v0-11-2-13\u0022 rel=\u0022external nofollow\u0022\u003EkOS\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EF.A.Q.\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nQ: This isn\u0027t a stand-alone mod? Why?\n\u003C/p\u003E\n\u003Cp\u003E\nA: Mainly because I\u0027m too lazy to setup a C# dev environment when one already exists for me within the game. Also, because it\u0027s way more fun IMO doing it this way as opposed to \u0022normal\u0022 programming I\u0027ve done way too much of already.\n\u003C/p\u003E\n\u003Cp\u003E\nQ: But I don\u0027t know anything about kOS!\n\u003C/p\u003E\n\u003Cp\u003E\nA: Thankfully, you don\u0027t really need to. The numbers you need to tweak are well-exposed and documented, and using kOS within the game is very simple\n\u003C/p\u003E\n\u003Cp\u003E\nQ: Can it be used for any vehicle?\n\u003C/p\u003E\n\u003Cp\u003E\nA: Any vehicle that has a kOS computer module to hold the scripts.\n\u003C/p\u003E\n\u003Cp\u003E\nQ: Can it be used for kerbed vehicles?\n\u003C/p\u003E\n\u003Cp\u003E\nA: Yes! While primarily designed for remote-operated vehicles it will still function just fine under Local Command situations.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EKnown Issues\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nRegardless of whether you are using an actual kOS part or are using Module Manager to insert kOS functionality into another part (like a probe core) it \u003Cstrong\u003Emust not be a root part\u003C/strong\u003E of the craft. This is a known kOS issue\n\u003C/li\u003E\n\u003Cli\u003E\nThe future node created by the script is there to avoid a run-time error that needs to be patched within kOS\n\u003C/li\u003E\n\u003Cli\u003E\nThe future node initially has a radial out value to push it off the current orbit so that it can be selected by the user to place a node before it\n\u003C/li\u003E\n\u003Cli\u003E\nRCS tweakable will only let you set the thrust as low as 5 before going straight to 0 (which RCSTC will reset to 1)\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EFuture Additions\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n\u003Cstrong\u003EThruster kN Detection\u003C/strong\u003E - Will allow the option to not have to set the kN variable manually\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cstrong\u003EMultiple ISP Thrusters\u003C/strong\u003E - Allow for thrusters that don\u0027t all have the same ISP\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cstrong\u003EMultiple kN Thrusters\u003C/strong\u003E - Allow for thrusters that don\u0027t all have the same kN\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EChange Log\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\n(12/23/15) v4.0\n- RCS thrust tweakable is now stock, meaning a single thrust control script is all that is needed, Tweakable Everything is no longer an optional dependency\n- All detected RCS parts are temporarily highlighted to show which are enabled (green) and disabled (red) to help confirm craft configuration\n- Console window text no longer overwrites itself under some situations\n- RCS jet blip on initialization no longer necessary to get ISP number to show in right-click menu\n- Tweakable is back to using decimal numbers instead of percentage\n\n(10/20/15) v3.2\n- Fixed the non-TE version from still trying to use TE to set the thrust initially\n- Added a check for time warp, and drops the game out of warp to initialize the thrusters because otherwise they would not fire to register ISP\n- Improved performance by removing the need to call \u0060getModule()\u0060 multiple times every tick, which caused kOS to navigate the entire part tree each time. Possibly also improved the timing of very short burns that require millisecond precision\n\n(9/2/15) v3.1\n- Full RemoteTech support enabled through kOS \u0060addons\u0060 interface. RT features disabled if it is not installed/activated\n- Abort command now respects signal delay\n- Program now respects local control\n- Functionalized main loop for cleaner exit on abort/errors - no more shutting down the console\n- Warning message displays if user manually enables RCS prior to the maneuver\n- Fix for runtime error if user manually enables RCS prior to maneuver\n- Fix for changes to TweakableEverything slider, which now has percentage values instead of decimal\n\n(3/16/15) v2.1\n- Fixed an issue where Tweakable Everything can allow you to tweak thrust  to 0%, which the program doesn\u0027t like. Tweaking the thrust to 0% (or  setting it to 0% with the non-TE version) will change it to 1%\n\n(3/14/15) v2.0\n- Script extension changed to conform to new kOS architecture\n- Uses new HUD message capability to present thruster info and maneuver warnings\n- Checks for connection to Mission Control before executing (bypassable)\n- No longer requires ISP and throttle to be set in hardcode or at runtime (latter depends on use of Tweakable Everything)\n- Maneuver nodes are now monitored and changes can be made to \u00C3\u017D\u00E2\u20ACv, ETA and throttle anytime prior to node execution\n- No longer needs a maneuver node to be created prior to execution\n- Cancelling maneuver nodes no longer terminates the program\n- The Abort button is used to terminate the program\n- Time warp is monitored and will drop out 10 seconds prior to node execution\n\n(9/10/14) v1.1\n- Thanks to TDW, cleaned up countdown code which means program runs on less lines for users that have limited kOS storage space\n- Added ability to detect how much \u00C3\u017D\u00E2\u20ACv the craft has remaining and warn the user if it is not enough to perform the maneuver\n- Tweaked messages of \u00C3\u017D\u00E2\u20ACv to include \u0022m/s\u0022 for clarity\n\n(9/5/14) v1\n- Initial release \n\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-23T07:13:08Z\u0022 title=\u002212/23/2015 07:13  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 23, 2015\u003C/time\u003E by Gaiiden\u003C/strong\u003E\n\u003Cbr\u003Eversion update\n\u003C/span\u003E\n"},{"CreatedByName":"TDW","CreatedById":120346,"CreatedDateTime":"2014-09-08T18:40:04Z","Content":"\n\u003Cp\u003ELooks good.\u003C/p\u003E\u003Cp\u003EDon\u0027t know if it was deliberate or not but you don\u0027t seam to have anything to align the craft to the maneuver node and hold it steady also you may want to look at \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPRINT timeRemaining:CLOCK AT (29,3).\u003C/pre\u003E\u003Cp\u003E (\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structure/time/index.html\u0022 rel=\u0022external nofollow\u0022\u003EKOS_DOC\u003C/a\u003E) if you are looking to shorten the script. You should also be able to loop that to keep the time to burn up to date.\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-09T01:15:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TDW\u0022 data-cite=\u0022TDW\u0022\u003E\u003Cdiv\u003EDon\u0027t know if it was deliberate or not but you don\u0027t seam to have anything to align the craft to the maneuver node and hold it steady\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s deliberate and covered fully in the ReadMe. It wasn\u0027t stated outright in the description above but \u0022This does not attempt to replace any functionality that already exists with the RT2 Flight Computer\u0022 essentially means that it does not attempt to point your vessel, as that is what the Flight Computer is for.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Ealso you may want to look at \u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPRINT timeRemaining:CLOCK AT (29,3).\u003C/pre\u003E\u003Cp\u003E (\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structure/time/index.html\u0022 rel=\u0022external nofollow\u0022\u003EKOS_DOC\u003C/a\u003E) if you are looking to shorten the script. You should also be able to loop that to keep the time to burn up to date.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope, that won\u0027t work - although it is a good idea! I never really thought about that, unfortunately after checking the docs I see \u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003Enextnode:eta\u003C/span\u003E returns just a plain Number, not a Timespan.\u003C/p\u003E\n"},{"CreatedByName":"TDW","CreatedById":120346,"CreatedDateTime":"2014-09-09T16:51:41Z","Content":"\n\u003Cp\u003EWell that will teach me for not reading the post or the readme properly \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif\u0022 alt=\u0022:blush:\u0022\u003E.\u003C/p\u003E\u003Cp\u003EWork round on the clock issue would be:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ELOCK timeRemaining to (time \u002B nextnode:eta - (thrustLength/2)) - time.\u003Cbr\u003EPrint timeRemaining:Clock AT (29,3).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E its not as tidy but it does force timeReamaining into a time instead of a number.\u003C/p\u003E\u003Cp\u003EAlso if/when you look at reading the RCS ISPs you will (at least in the current version of KSP) need to add a check for an isp of 0. For some reason RCS ISPs read as 0.0 until after you fire them for the first time.\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-09-10T17:38:23Z","Content":"\n\u003Cp\u003EAwesome, thanks for that code, and the heads up on ISP. In addition, I realized I was missing something to tell people they were about to perform a maneuver without enough \u00C3\u017D\u00E2\u20ACv remaining.\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-03-15T01:13:51Z","Content":"\n\u003Cp\u003Eshiny new features! Still not all the way to where I\u0027d like it to be but kOS limitations continue to hold me back. That was the way it was with 1.0 though and look how far it\u0027s come. kOS continues to improve and therefore so will this.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E- Script extension changed to conform to new kOS architecture\u003Cbr\u003E- Uses new HUD message capability to present thruster info and maneuver warnings\u003Cbr\u003E- Checks for connection to Mission Control before executing (bypassable)\u003Cbr\u003E- No longer requires ISP and throttle to be set in hardcode or at runtime (latter depends on use of Tweakable Everything)\u003Cbr\u003E- Maneuver nodes are now monitored and changes can be made to \u00C3\u017D\u00E2\u20ACv, ETA and throttle anytime prior to node execution\u003Cbr\u003E- No longer needs a maneuver node to be created prior to execution\u003Cbr\u003E- Cancelling maneuver nodes no longer terminates the program\u003Cbr\u003E- The Abort button is used to terminate the program\u003Cbr\u003E- Time warp is monitored and will drop out 10 seconds prior to node execution\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-03-17T02:50:02Z","Content":"\n\u003Cp\u003Ewhoops! Forgot to test what happens when you tweak the thrust all the way down... turns out you can\u0027t go to 1%...\u003C/p\u003E\n"},{"CreatedByName":"Errol","CreatedById":118622,"CreatedDateTime":"2015-05-11T01:36:32Z","Content":"\n\u003Cp\u003EIs this working with the latest kOS in 1.0.2?\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-05-11T03:34:35Z","Content":"\n\u003Cp\u003EI\u0027ve not been able to test since my 1.0.2 install is still under construction. But I did not notice any breaking changes in the latest kOS release that should cause any problems, and RCS thrusters didn\u0027t undergo any breaking changes themselves with 1.0.2 that I know of. Should all still be good!\u003C/p\u003E\u003Cp\u003EFurther Update: I won\u0027t be playing KSP seriously again until v1.1 drops, so don\u0027t expect any work on this script until then\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-15T02:01:19Z\u0022 title=\u002206/15/2015 02:01  AM\u0022 data-short=\u00229 yr\u0022\u003EJune 15, 2015\u003C/time\u003E by Gaiiden\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-09-02T08:41:06Z","Content":"\n\u003Cp\u003ENew hotness!! Advanced RT features and better usability\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003Ev3.1\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E- Full RemoteTech support enabled through kOS \u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003Eaddons\u003C/span\u003E interface. RT features disabled if it is not installed/activated\u003C/p\u003E\u003Cp\u003E- Abort command now respects signal delay\u003C/p\u003E\u003Cp\u003E- Program now respects local control\u003C/p\u003E\u003Cp\u003E- Functionalized main loop for cleaner exit on abort/errors - no more shutting down the console\u003C/p\u003E\u003Cp\u003E- Warning message displays if user manually enables RCS prior to the maneuver\u003C/p\u003E\u003Cp\u003E- Fix for runtime error if user manually enables RCS prior to maneuver\u003C/p\u003E\u003Cp\u003E- Fix for changes to TweakableEverything slider, which now has percentage values instead of decimal\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-10-20T19:31:48Z","Content":"\n\u003Cp\u003EAn important performance update that could help improve the accuracy of maneuvers that require millisecond timing\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003Ev3.2\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E- Fixed the non-TE version from still trying to use TE to set the thrust initially\u003C/p\u003E\u003Cp\u003E- Added a check for time warp, and drops the game out of warp to initialize the thrusters because otherwise they would not fire to register ISP\u003C/p\u003E\u003Cp\u003E- Improved performance by removing the need to call \u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003EgetModule()\u003C/span\u003E multiple times every tick, which caused kOS to navigate the entire part tree each time. Possibly also improved the timing of very short burns that require millisecond precision\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-12-23T07:07:41Z","Content":"\n\u003Cp\u003E\nHooray for v1.0.5 stock RCS thrust tweakables!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003Ev4.0\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nRCS thrust tweakable is now stock, meaning a single thrust control script is all that is needed, Tweakable Everything is no longer an optional dependency\n\u003C/li\u003E\n\u003Cli\u003E\nAll detected RCS parts are temporarily highlighted to show which are enabled (green) and disabled (red) to help confirm craft configuration\n\u003C/li\u003E\n\u003Cli\u003E\nConsole window text no longer overwrites itself under some situations\n\u003C/li\u003E\n\u003Cli\u003E\nRCS jet blip on initialization no longer necessary to get ISP number to show in right-click menu\n\u003C/li\u003E\n\u003Cli\u003E\nTweakable is back to using decimal numbers instead of percentage\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/Gaiiden/RCSTC/releases/tag/v4.0\u0022 rel=\u0022external nofollow\u0022\u003EDownload from Github\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"123nick","CreatedById":27488,"CreatedDateTime":"2015-12-23T08:33:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222333796\u0022 data-ipsquote-contentid=\u002283856\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221450854461\u0022 data-ipsquote-userid=\u0022103177\u0022 data-ipsquote-username=\u0022Gaiiden\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Gaiiden said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHooray for v1.0.5 stock RCS thrust tweakables!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003Ev4.0\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nRCS thrust tweakable is now stock, meaning a single thrust control script is all that is needed, Tweakable Everything is no longer an optional dependency\n\u003C/li\u003E\n\u003Cli\u003E\nAll detected RCS parts are temporarily highlighted to show which are enabled (green) and disabled (red) to help confirm craft configuration\n\u003C/li\u003E\n\u003Cli\u003E\nConsole window text no longer overwrites itself under some situations\n\u003C/li\u003E\n\u003Cli\u003E\nRCS jet blip on initialization no longer necessary to get ISP number to show in right-click menu\n\u003C/li\u003E\n\u003Cli\u003E\nTweakable is back to using decimal numbers instead of percentage\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/Gaiiden/RCSTC/releases/tag/v4.0\u0022 rel=\u0022external nofollow\u0022\u003EDownload from Github\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDoesent mechjeb have a sort of something similiar, where u can toggle throttle controlling RCS or something, but im not sure if its compatible with RT. probably cant plot manuever nodes with it, either.\n\u003C/p\u003E\n"}]}