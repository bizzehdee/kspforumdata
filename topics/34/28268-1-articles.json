{"TopicId":28268,"ForumId":34,"TopicTitle":"[0.20] Subassembly Loader - 0.20 Compatibility Patch","CreatedByName":"TheUndeadFish","CreatedById":67157,"CreatedDateTime":"2013-05-23T01:22:36Z","PageNum":1,"Articles":[{"CreatedByName":"TheUndeadFish","CreatedById":67157,"CreatedDateTime":"2013-05-23T01:22:36Z","Content":"\n\u003Cp\u003EI didn\u0027t find a thread dedicated to the Subassembly Loader mod, so I had to create this one.\u003C/p\u003E\u003Cp\u003EUsing the source code provided along with the mod, I just made a patched version that will work with 0.20. This moves the button to a usable location in the VAB as well as eliminates the lag caused by the plugin not loading properly.\u003C/p\u003E\u003Cp\u003EI only intend this as a quick-and-dirty fix until the mod\u0027s author can release a proper updated version of it. You still need the \u003Ca href=\u0022http://kerbalspaceprogram.com/subassembly-saver-loader/\u0022 rel=\u0022external nofollow\u0022\u003Eoriginal files\u003C/a\u003E, then override the dll with the one from my path.\u003C/p\u003E\u003Cp\u003EDownload:\u003C/p\u003E\u003Cp\u003EFor the sake of those playing the game at much lower resolutions, I\u0027ve made a second version of my patch. This one moves the button to the upper right corner, but under the other buttons instead of beside them. It\u0027s not as pretty as being on the top bar, but it should be functional.\u003C/p\u003E\u003Cp\u003EDownload:\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003EDisclaimer: Use at your own risk, since I\u0027m rather new to KSP modding.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EA few other people in this thread have made their own patches. So if one of my patches doesn\u0027t work for some reason, then you could try one of theirs:\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-23T21:20:25Z\u0022 title=\u002206/23/2013 09:20  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 23, 2013\u003C/time\u003E by sal_vager\u003C/strong\u003E\n\u003Cbr\u003EHad to remove the links on copyright grounds.\n\u003C/span\u003E\n"},{"CreatedByName":"IvanTehFennec","CreatedById":26927,"CreatedDateTime":"2013-05-23T01:30:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheUndeadFish\u0022 data-cite=\u0022TheUndeadFish\u0022\u003E\u003Cdiv\u003EI didn\u0027t find a thread dedicated to the Subassembly Loader mod, so I had to create this one.\u003Cp\u003EUsing the source code provided along with the mod, I just made a patched version that will work with 0.20. This moves the button to a usable location in the VAB as well as eliminates the lag caused by the plugin not loading properly.\u003C/p\u003E\u003Cp\u003EI only intend this as a quick-and-dirty fix until the mod\u0027s author can release a proper updated version of it.\u003C/p\u003E\u003Cp\u003EDownload:\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003EDisclaimer: Use at your own risk, since I\u0027m rather new to KSP modding.\u003C/span\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAll I can say is THANK YOU. I wondered where DEADBEEF went after the forum catastrophe, though.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-23T21:41:36Z\u0022 title=\u002206/23/2013 09:41  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 23, 2013\u003C/time\u003E by sal_vager\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Mihara","CreatedById":59752,"CreatedDateTime":"2013-05-23T01:38:01Z","Content":"\n\u003Cp\u003ECould you maybe do the same for EdTools? It also comes with source and is also not working well in 0.20.\u003C/p\u003E\n"},{"CreatedByName":"eurybaric","CreatedById":33541,"CreatedDateTime":"2013-05-23T01:46:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mihara\u0022 data-cite=\u0022Mihara\u0022\u003E\u003Cdiv\u003ECould you maybe do the same for EdTools? It also comes with source and is also not working well in 0.20.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes please I second that.\u003C/p\u003E\n"},{"CreatedByName":"bulletrhli","CreatedById":55960,"CreatedDateTime":"2013-05-23T01:55:33Z","Content":"\n\u003Cp\u003EAgreed with EdTools\u003C/p\u003E\n"},{"CreatedByName":"ahappydude","CreatedById":458,"CreatedDateTime":"2013-05-23T02:10:09Z","Content":"\n\u003Cp\u003EThe devs seems to incorperated an partreloader in the debug menu, dont know if it was the one that the use who made edtools made. Cheers for making it compatible for new version =)\u003C/p\u003E\n"},{"CreatedByName":"SVoyager","CreatedById":57670,"CreatedDateTime":"2013-05-23T03:29:18Z","Content":"\n\u003Cp\u003EWould it be possible to have a version/full repackage of the mod with the new directory structure? I am not quite sure what is involved in switching between from the old .19 to the new .20 directory structure so I don\u0027t know how to do this myself. I am hoping to be able to get a \u0022clean\u0022 setup as I am starting a new ksp save and it would be nice to use the new .20 way, much less of a mess that way!\u003C/p\u003E\n"},{"CreatedByName":"Bluegobln","CreatedById":59640,"CreatedDateTime":"2013-05-23T04:16:23Z","Content":"\n\u003Cp\u003EHe\u0027s not working on the mod, he just made a quick fix for the main DLL file so that it would work instead of completely not work.\u003C/p\u003E\u003Cp\u003EIt works for me. The loading seems to be funky, and the icon is a tiny little question mark \u0022 ? \u0022 instead of the usual icon, but it works so I\u0027m fine with this until its updated officially. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks mate.\u003C/p\u003E\n"},{"CreatedByName":"Katalliaan","CreatedById":12399,"CreatedDateTime":"2013-05-23T04:20:02Z","Content":"\n\u003Cp\u003EWould you mind releasing the source for your changes, so that those who are interested can look through the code?\u003C/p\u003E\n"},{"CreatedByName":"TheUndeadFish","CreatedById":67157,"CreatedDateTime":"2013-05-23T05:19:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Katalliaan\u0022 data-cite=\u0022Katalliaan\u0022\u003E\u003Cdiv\u003EWould you mind releasing the source for your changes, so that those who are interested can look through the code?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI actually only made two little changes to the code:\u003C/p\u003E\u003Cp\u003EThe first was to comment out line 11:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//private static PluginConfiguration config = PluginConfiguration.CreateForType\u0026lt;subassemblyLoader\u0026gt;();\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EA problem happens when the game runs that, as was evident by the errors in the output log. And it was consequently causing the plugin to fail to load, which causes the game to try to reload it over and over, which causes the lag. But since the mod doesn\u0027t seem to make use of that configuration file stuff, commenting out the line way a simple was the deal with the issue.\u003C/p\u003E\u003Cp\u003EThe second was to adjust the first number on line 129, which is the x coordinate of where the button is drawn in the VAB:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eif (GUI.Button(new Rect(350, 1, 48, 36), new GUIContent(button, \u0022Subassembly\u0022), buttonStyle) \u0026amp;\u0026amp; !EditorLogic.softLock)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Fyrem","CreatedById":57131,"CreatedDateTime":"2013-05-23T05:24:57Z","Content":"\n\u003Cp\u003Ethanks again!\u003C/p\u003E\n"},{"CreatedByName":"Hyomoto","CreatedById":64780,"CreatedDateTime":"2013-05-23T05:57:06Z","Content":"\n\u003Cp\u003EI like all my mods, but this is the only one I\u0027d consider mandatory.\u003C/p\u003E\n"},{"CreatedByName":"Simplicity","CreatedById":57473,"CreatedDateTime":"2013-05-23T06:20:32Z","Content":"\n\u003Cp\u003Ethank you for your quick fix, it works great, I don\u0027t have a question mark like the person above, I have the jigsaw picture on mine..\u003C/p\u003E\u003Cp\u003ETo the person asking about new directory structure, do not use it, just use the old folders for this mod, it works in them at the moment.\u003C/p\u003E\n"},{"CreatedByName":"Luxmaster-CZ","CreatedById":21176,"CreatedDateTime":"2013-05-23T10:35:13Z","Content":"\n\u003Cp\u003Edoes I need to have previous version istalled? Seems so, because I dont have, and I cant see button at all\u003C/p\u003E\n"},{"CreatedByName":"Simplicity","CreatedById":57473,"CreatedDateTime":"2013-05-23T11:07:16Z","Content":"\n\u003Cp\u003Eyes, install the proper version, and then overwrite the dll with the one from here, that will get it back for you\u003C/p\u003E\n"},{"CreatedByName":"Luxmaster-CZ","CreatedById":21176,"CreatedDateTime":"2013-05-23T11:28:53Z","Content":"\n\u003Cp\u003ECould you please upload it as whole? I cant find it on spaceport\u003C/p\u003E\n"},{"CreatedByName":"Richy teh space man","CreatedById":12511,"CreatedDateTime":"2013-05-23T11:58:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Luxmaster-CZ\u0022 data-cite=\u0022Luxmaster-CZ\u0022\u003E\u003Cdiv\u003ECould you please upload it as whole? I cant find it on spaceport\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe original\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://kerbalspaceprogram.com/subassembly-saver-loader/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kerbalspaceprogram.com/subassembly-saver-loader/\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Simplicity","CreatedById":57473,"CreatedDateTime":"2013-05-23T12:01:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Luxmaster-CZ\u0022 data-cite=\u0022Luxmaster-CZ\u0022\u003E\u003Cdiv\u003ECould you please upload it as whole? I cant find it on spaceport\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo need, go to the first post in this thread, the link to mediafire is there for the mod \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003Eedit: or click the link above this post \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"MDBenson","CreatedById":65560,"CreatedDateTime":"2013-05-23T13:06:58Z","Content":"\n\u003Cp\u003EThank you. I was pining for this last night after the update!\u003C/p\u003E\n"},{"CreatedByName":"Commander Zoom","CreatedById":8333,"CreatedDateTime":"2013-05-23T13:20:12Z","Content":"\n\u003Cp\u003EWorks like a charm. Thanks for the quick fix!\u003C/p\u003E\n"},{"CreatedByName":"Fel","CreatedById":57121,"CreatedDateTime":"2013-05-23T16:53:53Z","Content":"\n\u003Cp\u003EThanks for the source tip (I prefer using the mod without the whole \u0022Bad Subassembly\u0022 nonsense, so this makes it really simple to update what I have)\u003C/p\u003E\u003Cp\u003EAlso\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TaranisElsu\u0022 data-cite=\u0022TaranisElsu\u0022\u003E\u003Cdiv\u003EThe new way to make Part-less plugins is to use the KSPAddon attribute, like this:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Text;\u003Cbr\u003Eusing System.Threading.Tasks;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003E[KSPAddon(KSPAddon.Startup.EditorAny, false)]\u003Cbr\u003Epublic class Class1 : MonoBehaviour\u003Cbr\u003E{\u003Cbr\u003E    private float lastUpdate = 0;\u003Cbr\u003E\u003Cbr\u003E    void Awake()\u003Cbr\u003E    {\u003Cbr\u003E        Debug.Log(\u0022TAC [\u0022 \u002B this.GetInstanceID().ToString(\u0022X\u0022) \u002B \u0022][\u0022 \u002B Time.time \u002B \u0022] Awake\u0022);\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    void Update()\u003Cbr\u003E    {\u003Cbr\u003E        float delta = Time.time - lastUpdate;\u003Cbr\u003E        if (delta \u0026gt; 15)\u003Cbr\u003E        {\u003Cbr\u003E            Debug.Log(\u0022TAC [\u0022 \u002B this.GetInstanceID().ToString(\u0022X\u0022) \u002B \u0022][\u0022 \u002B Time.time \u002B \u0022] Update\u0022);\u003Cbr\u003E            lastUpdate = Time.time;\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis class will be loaded every time the scene is changed to the Editor, and Awake will be called. And it will be unloaded when the scene is changed to something else, but until then Update() will be called.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E(Haven\u0027t tried yet; but just what has been said)\u003C/p\u003E\n"},{"CreatedByName":"smarky55","CreatedById":17137,"CreatedDateTime":"2013-05-23T19:27:43Z","Content":"\n\u003Cp\u003EHi all, love this mod so decided to delve a tad deeper into updating it for 0.20 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E:\u003C/p\u003E\u003Cp\u003EExtract the GameData folder inside the zip in your KSP folder, directory structure should be good.\u003C/p\u003E\u003Cp\u003EBasically all I did was use TheUndeadFish\u0027s edits along with changing the file references to a folder in GameData, seems to run OK and shouldn\u0027t have any problems with little question mark icons.\u003C/p\u003E\u003Cp\u003E@Fel\u003C/p\u003E\u003Cp\u003EThis hooks in to Unity\u0027s OnGui function and already checks if the editor is open so the [KSPAddon] shouldn\u0027t be needed. Performance gain, if any would be tiny (I think:)).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-23T21:42:47Z\u0022 title=\u002206/23/2013 09:42  PM\u0022 data-short=\u002211 yr\u0022\u003EJune 23, 2013\u003C/time\u003E by sal_vager\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2013-05-23T19:42:57Z","Content":"\n\u003Cp\u003EI changed the number for mine to something else: \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Enew Rect(526-45, 1, 48, 36)\u003C/pre\u003E\u003Cp\u003E Maybe it has to do with screen sizes, but with 350 it put it almost in the middle of the blank space on the top bar. I guess the reason deadbeaf put \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Escreen.width -\u003C/pre\u003E\u003Cp\u003E whatever number it was originally, was to make it so it positioned its self no matter the resolution settings, but thats just a guess. I did originally try leaving screen.width and changing the amount subtracted from it but I wasn\u0027t compiling it correctly then and it wasn\u0027t loading I guess. Got it working now though. I did try doing it my self before I read your post completely and did happen to find line 129, but didn\u0027t comment out line 11 so I bet that was part of my original problem. Thats when I thought I\u0027d do it like you did but with my own numbers. No offence meant by not using the one you uploaded but I sometimes find coding fun and not having done c# before thought it\u0027d be a fun little exercise.\u003C/p\u003E\u003Cp\u003EAnyway, enough of my rambling, just thought I\u0027d mention the number thing. Glad you thought about editing the source code other wise a lot of us wouldn\u0027t be able to use sub assembly until an official update came out. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheUndeadFish\u0022 data-cite=\u0022TheUndeadFish\u0022\u003E\u003Cdiv\u003EI actually only made two little changes to the code:\u003Cp\u003EThe first was to comment out line 11:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E//private static PluginConfiguration config = PluginConfiguration.CreateForType\u0026lt;subassemblyLoader\u0026gt;();\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EA problem happens when the game runs that, as was evident by the errors in the output log. And it was consequently causing the plugin to fail to load, which causes the game to try to reload it over and over, which causes the lag. But since the mod doesn\u0027t seem to make use of that configuration file stuff, commenting out the line way a simple was the deal with the issue.\u003C/p\u003E\u003Cp\u003EThe second was to adjust the first number on line 129, which is the x coordinate of where the button is drawn in the VAB:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eif (GUI.Button(new Rect(350, 1, 48, 36), new GUIContent(button, \u0022Subassembly\u0022), buttonStyle) \u0026amp;\u0026amp; !EditorLogic.softLock)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Bluegobln","CreatedById":59640,"CreatedDateTime":"2013-05-23T19:47:02Z","Content":"\n\u003Cp\u003E............\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-05-23T19:49:55Z\u0022 title=\u002205/23/2013 07:49  PM\u0022 data-short=\u002211 yr\u0022\u003EMay 23, 2013\u003C/time\u003E by Bluegobln\u003C/strong\u003E\n\u003Cbr\u003EGrrrrrr\n\u003C/span\u003E\n"},{"CreatedByName":"Bluegobln","CreatedById":59640,"CreatedDateTime":"2013-05-23T19:48:56Z","Content":"\n\u003Cp\u003EThe .CS file is in the main directory outside the GameData folder (not to mention the subassemblyLoader folder...)\u003C/p\u003E\u003Cp\u003EEnlighten me, please, as the the intended usage?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EHi all, love this mod so decided to delve a tad deeper into updating it for 0.20\u003C/div\u003E\u003C/blockquote\u003E\n"}]}