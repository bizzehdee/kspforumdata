{"TopicId":87222,"ForumId":34,"TopicTitle":"[0.90] DDSLoader 1.9 (Mar 9) - Loads DDS Texture \u0026quot;Boringly fast\u0026quot; edition","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-13T21:08:10Z","PageNum":4,"Articles":[{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-15T15:33:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ph34rb0t\u0022 data-cite=\u0022Ph34rb0t\u0022\u003E\u003Cdiv\u003EIn my previous post, I\u0027ve said that I had to ditch ATM after conversion to make everything work. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI just understood what is going on. The code I gave rbay for the new ATM disable all the images loader, including this one. I\u0027ll have to submit him a patch so that it only disable the stock one. But I can\u0027t do it today (unless he reads me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E ).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-15T15:45:17Z\u0022 title=\u002210/15/2014 03:45  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 15, 2014\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-15T15:46:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ph34rb0t\u0022 data-cite=\u0022Ph34rb0t\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EOkay. I\u0027ve removed it from the post containing my script.\u003C/p\u003E\u003Cp\u003EI\u0027m not really familiar with NVidia\u0027s tools, only with Imagetool that comes with Flight Simulator X\u0027 SDK. To generate a valid FSX bump map in DDS format with it, you use its -RedInAlpha switch and simply I assumed that -n4 was something similar. My first attempt at a conversion actually was with Imagetool, but it\u0027s awfully picky regarding input format and outright refused to read the second .tga it had to process. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERed in Alpha switch? \u003C/p\u003E\u003Cp\u003EThat\u0027s pretty much what DXT5\u003Cstrong\u003Enm\u003C/strong\u003E does. I don\u0027t know if you did read it, but that was exactly what I suggested in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/96729-0-25-DDSLoader-1-1-%28Oct-14%29-Loads-DDS-Texture-Yes-it-is-boring-edition?p=1478347\u0026amp;viewfull=1#post1478347\u0022 rel=\u0022external nofollow\u0022\u003Ethis post (click).\u003C/a\u003E (Actually I suggested a whole lot more than just that.)\u003C/p\u003E\u003Cp\u003EThe difference between normals in DXT5 and DXT5nm is 5.6 bit compared to 6.8 bit, all that for the exact same file size. Actually another factor that speaks for DXT5nm is that the channels are compressed seperately and therefore they don\u0027t influence each other, which usually causes artefacts and colour shifts.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-15T15:51:51Z\u0022 title=\u002210/15/2014 03:51  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 15, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-10-15T15:49:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EI just understood what is going on. The code I gave rbay for the new ATM disable all the images loader, including this one. I\u0027ll have to submit him a patch so that it only disable the stock one. But I can\u0027t do it today (unless he reads me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E ).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust saw this. I can take care of it tonight. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ph34rb0t","CreatedById":4291,"CreatedDateTime":"2014-10-15T17:42:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022slumpie\u0022 data-cite=\u0022slumpie\u0022\u003E\u003Cdiv\u003ERed in Alpha switch? \u003Cp\u003EThat\u0027s pretty much what DXT5\u003Cstrong\u003Enm\u003C/strong\u003E does. I don\u0027t know if you did read it, but that was exactly what I suggested in \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/96729-0-25-DDSLoader-1-1-%28Oct-14%29-Loads-DDS-Texture-Yes-it-is-boring-edition?p=1478347\u0026amp;viewfull=1#post1478347\u0022 rel=\u0022external nofollow\u0022\u003Ethis post (click).\u003C/a\u003E (Actually I suggested a whole lot more than just that.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve just skimmed over it, TBH. I thought DXT5nm was just a switch supported by the newer TextureTools, so I initially disregarded it. I\u0027ve updated the scripts on page 7 for DXT5nm. Thanks.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EThe difference between normals in DXT5 and DXT5nm is 5.6 bit compared to 6.8 bit, all that for the exact same file size. Actually another factor that speaks for DXT5nm is that the channels are compressed seperately and therefore they don\u0027t influence each other, which usually causes artefacts and colour shifts.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat might explain why some normalmaps by some add-on authors for FSX don\u0027t work properly as they\u0027ve merely exported it in DXT5 from Photoshop. I\u0027ve always suggested converting normalmaps from the source file with Imagetool and the appropriate -RedInAlpha parameter. Never knew until now that this actually produces a DXT5nm bitmap (that can be directly exported from GIMP). So thanks again.\u003C/p\u003E\u003Cp\u003EAnd to be perfectly honest, a lot of posts in this thread are rather philosophical and overly technical to me (no offense), instead of providing practical, concise and workable solutions. That\u0027s why my interest in digging through everything isn\u0027t really profound. (If I had more time, though...)\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-15T19:25:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ph34rb0t\u0022 data-cite=\u0022Ph34rb0t\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnd to be perfectly honest, a lot of posts in this thread are rather philosophical and overly technical to me (no offense), instead of providing practical, concise and workable solutions. That\u0027s why my interest in digging through everything isn\u0027t really profound. (If I had more time, though...)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, I tried that at least.\u003C/p\u003E\u003Cp\u003EI can give you a very straightforward suggestion:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EUse -quality_highest instead of normal \u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003EIt doesn\u0027t affect the resulting file size, because the formats have locked bitrates. It will take a little longer to compress, but since you only do that once...\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2014-10-15T21:11:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blowfish\u0022 data-cite=\u0022blowfish\u0022\u003E\u003Cdiv\u003EMicrosoft doesn\u0027t seem to think they\u0027re significant enough to support.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethats because its in their interest to get people to upgrade.\u003C/p\u003E\n"},{"CreatedByName":"Ph34rb0t","CreatedById":4291,"CreatedDateTime":"2014-10-15T23:05:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022slumpie\u0022 data-cite=\u0022slumpie\u0022\u003E\u003Cdiv\u003EWell, I tried that at least.\u003Cp\u003EI can give you a very straightforward suggestion:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EUse -quality_highest instead of normal \u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv style=\u0022margin-left:2px;\u0022\u003EIt doesn\u0027t affect the resulting file size, because the formats have locked bitrates. It will take a little longer to compress, but since you only do that once...\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENoted and implemented. Thanks.\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-17T11:31:32Z","Content":"\n\u003Cp\u003ESooooo... Win64 KSP with DX9 is working again, with more than 4GB of mods loaded, using this plugin (and after converting every single texture in the GameData folder)... Since the release of 0.25, it crashed even without mods (I had no problem running it with OpenGL, though).\u003C/p\u003E\u003Cp\u003EI keep in mind it might just be some luck, since the behaviour of the win64 build is known to be random (to say the least), but, anyone else tried? Does it worked?\u003C/p\u003E\u003Cp\u003EBecause now I\u0027m suspecting the KSP\u0027s default texture loader to be the cause of memory leaks...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-17T11:33:47Z\u0022 title=\u002210/17/2014 11:33  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 17, 2014\u003C/time\u003E by Lilleman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Urgante","CreatedById":120746,"CreatedDateTime":"2014-10-17T21:48:42Z","Content":"\n\u003Cp\u003EFirst of all, sorry for my humble attempt at english, I am working on it.\u003C/p\u003E\u003Cp\u003ENow to the point:\u003C/p\u003E\u003Cp\u003EI found a .mbm converter \u003Ca href=\u0022https://www.dropbox.com/s/txthm7h5jwqgnz5/mbm2png7.zip?dl=1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/txthm7h5jwqgnz5/mbm2png7.zip?dl=1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI used it to convert all my .mbm to png and then used Ph34rb0t code to convert to dds.\u003C/p\u003E\u003Cp\u003EThis Reduced my ksp load time from 4min to 1,5min. (I have a SSD), and my Gamedata folder from almost 2gb to 600mb.\u003C/p\u003E\u003Cp\u003EUnfortunately the memory usage once KSP is running is the same or very similar, (hard to tell).\u003C/p\u003E\u003Cp\u003EAs far as I can tell all the textures work perfectly, including transparent toolbar icons.\u003C/p\u003E\u003Cp\u003EI didn\u0027t noticed a difference in texture quality but I guess that there is one, (pass from 2gb to 600mb without change the quality doesn\u0027t seem probable).\u003C/p\u003E\u003Cp\u003EI copy the code I used here so you can tell me if any of this is actually good or the .mbm didn\u0027t needed a change to begin with .... because, let\u0027s face it ... I have no idea what the heck did I really achieved, I just found it and put some code together to see what happens.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E:: Initialization of environment states and variables.\u003Cbr\u003ESETLOCAL ENABLEDELAYEDEXPANSION\u003Cbr\u003ESET localdir=%CD%\\GameData\u003Cbr\u003ESET DDSTool=[B]\u0022D:\\Kerbal Space Program\\nvdxt.exe\u0022[/B]\u003Cbr\u003ESET mbm=[B]\u0022D:\\Kerbal Space Program\\mbm2png7\\mbm2png.exe\u0022[/B]\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EFOR /R \u0022%localdir%\u0022 %%F IN (\u0022*.mbm\u0022) DO (\u003Cbr\u003E    CALL %mbm% \u0022%%F\u0022\u003Cbr\u003E    IF EXIST \u0022%%~dpnF.png\u0022 ( del \u0022%%F\u0022 )\u003Cbr\u003E)\u003Cbr\u003Epause\u003Cbr\u003EFOR /R \u0022%localdir%\u0022 %%F IN (\u0022*_NRM.png\u0022) DO (\u003Cbr\u003E    CALL %DDSTool% -dxt5nm -outsamedir -quality_highest -nomipmap -flip -file \u0022%%F\u0022\u003Cbr\u003E    IF EXIST \u0022%%~dpnF.dds\u0022 ( del \u0022%%F\u0022 )\u003Cbr\u003E)\u003Cbr\u003Epause\u003Cbr\u003EFOR /R \u0022%localdir%\u0022 %%F IN (\u0022*_NRM.tga\u0022) DO (\u003Cbr\u003E    CALL %DDSTool% -dxt5nm -outsamedir -quality_highest -nomipmap -flip -file \u0022%%F\u0022\u003Cbr\u003E    IF EXIST \u0022%%~dpnF.dds\u0022 ( del \u0022%%F\u0022 )\u003Cbr\u003E)\u003Cbr\u003Epause\u003Cbr\u003EFOR /R \u0022%localdir%\u0022 %%F IN (\u0022*.png\u0022) DO (\u003Cbr\u003E    CALL %DDSTool% -dxt5 -outsamedir -quality_highest -flip -file \u0022%%F\u0022\u003Cbr\u003E    IF EXIST \u0022%%~dpnF.dds\u0022 ( del \u0022%%F\u0022 )\u003Cbr\u003E)\u003Cbr\u003Epause\u003Cbr\u003EFOR /R \u0022%localdir%\u0022 %%F IN (\u0022*.tga\u0022) DO (\u003Cbr\u003E    CALL %DDSTool% -dxt5 -outsamedir -quality_highest -flip -file \u0022%%F\u0022\u003Cbr\u003E    IF EXIST \u0022%%~dpnF.dds\u0022 ( del \u0022%%F\u0022 )\u003Cbr\u003E)\u003Cbr\u003Epause\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis will search gamedata folder for .mbm, convert them to .png and delete original .mbm, after that it just uses Ph34rb0t code to do the usual .DDS conversion.\u003C/p\u003E\u003Cp\u003EAt the end all textures will be in DDS format...except the ones with sizes not multiple of 4. \u00C3\u201A\u00C2\u00BFAny way to convert them without deformations?\u003C/p\u003E\u003Cp\u003EIt takes a lot of time to do the conversion, around 15 minutes depending your mods.\u003C/p\u003E\u003Cp\u003EYou need to put the nvdxt.exe file from \u003Ca href=\u0022http://es.originaldll.com/file/nvdxt.exe/39376.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://es.originaldll.com/file/nvdxt.exe/39376.html\u003C/a\u003E in your KSP folder along with the uncompressed folder of the .mbm converter and/or change the paths.\u003C/p\u003E\u003Cp\u003EThanks for all the work doing the mod and testing it, i can now load my KSP in less than half the time \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EEdited: Thanks for the alternative link \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/members/72288-technicalfool\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022color:#008000;\u0022\u003Etechnicalfool\u003C/span\u003E\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-18T00:57:24Z\u0022 title=\u002210/18/2014 12:57  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 18, 2014\u003C/time\u003E by Urgante\u003C/strong\u003E\n\u003Cbr\u003EBlocked link\n\u003C/span\u003E\n"},{"CreatedByName":"technicalfool","CreatedById":70430,"CreatedDateTime":"2014-10-17T22:54:36Z","Content":"\n\u003Cp\u003EPlease note that the site you linked to has been blocked by the site filters here. It\u0027s likely that it\u0027s an illegal scrape of the old Kerbal Space Port website before it was taken down. Here\u0027s a working link to the mbm-to-png converter:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/txthm7h5jwqgnz5/mbm2png7.zip?dl=1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/txthm7h5jwqgnz5/mbm2png7.zip?dl=1\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-10-17T23:07:09Z","Content":"\n\u003Cp\u003ENote that since all the KSP loader does *is* convert the mbms to DXT (dds) it\u0027s not surprising memory usage will remain the same. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhat you did is just doing that step once and saving the result.\u003C/p\u003E\u003Cp\u003EIt is however good to know that the mbm loader doesn\u0027t leak, if your memory usage didn\u0027t decrease.\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-17T23:53:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Urgante\u0022 data-cite=\u0022Urgante\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EUnfortunately the memory usage once KSP is running is the same or very similar, (hard to tell).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you use that batch file to convert all textures you are actually wasting memory. \u003C/p\u003E\u003Cp\u003EThe ony difference between alpha-less textures in DXT1a/c and DXT5 is their size, to be more precise DXT5 will bloat them to double the size, literally.\u003C/p\u003E\u003Cp\u003EI mentioned some very plausible ways in a previous post, at least for KSP in its current state, as to how to differ between textures with and without alpha just by using nvdxt commands. Thanks to how uniform the textures are that Unity spits out and the few formats KSP accepts.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EAs far as I can tell all the textures work perfectly, including transparent toolbar icons.\u003Cp\u003EI didn\u0027t noticed a difference in texture quality but I gees that there is one, (pass from 2gb to 600mb without change the quality doesn\u0027t seem probable).\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere\u0027s no real difference, because you basically just did the same as the game would normally do.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EAt the end all textures will be in DDS format...except the ones with sizes not multiple of 4. \u00C3\u201A\u00C2\u00BFAny way to convert them without deformations?\u003Cp\u003EIt takes a lot of time to do the conversion, around 15 minutes depending your mods.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENvdxt can rescale textures to resolutions that follow the power of two rule.\u003C/p\u003E\u003Cp\u003E-\u003C/p\u003E\u003Cp\u003ERead this post: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/96729-0-25-DDSLoader-1-1-%28Oct-14%29-Loads-DDS-Texture-Yes-it-is-boring-edition?p=1478347\u0026amp;viewfull=1#post1478347\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/96729-0-25-DDSLoader-1-1-%28Oct-14%29-Loads-DDS-Texture-Yes-it-is-boring-edition?p=1478347\u0026amp;viewfull=1#post1478347\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-18T00:16:48Z\u0022 title=\u002210/18/2014 12:16  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 18, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-10-18T03:10:31Z","Content":"\n\u003Cp\u003Eslumpie: except it was done without the memory leaks and loader bugs that the game\u0027s PNG and TGA loaders suffer.\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-18T03:19:21Z","Content":"\n\u003Cp\u003ESure, but there\u0027s still some potential left.\u003C/p\u003E\u003Cp\u003EIt really doesn\u0027t make much sense to convert 24bit textures into DXT5. It\u0027s a matter of a single additional command.\u003C/p\u003E\u003Cp\u003EOf course is it already an improvement, but why not try and make it even better? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-10-18T03:28:34Z","Content":"\n\u003Cp\u003EOh, indeed! That I don\u0027t take issue with in the slightest. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI was taking issue only with your statement that it was doing nothing that the game itself didn\u0027t, but since I didn\u0027t quote it, how were you to intuit my intentions? :]\u003C/p\u003E\u003Cp\u003EActually, it would be best if it detected if a file was a normal map based first on checking ATM\u0027s list of normal maps, and then (if that fails) perhaps if the file was mostly blue-purple to catch the leakers, or already in DXT5nm-ish format just in png (to catch RSS normal maps).\u003C/p\u003E\u003Cp\u003EThen compress all remaining 24bit images to DXT1, and the 32s to DXT5.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-18T03:32:24Z\u0022 title=\u002210/18/2014 03:32  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 18, 2014\u003C/time\u003E by NathanKell\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-18T04:02:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EActually, it would be best if it detected if a file was a normal map based first on checking ATM\u0027s list of normal maps, and then (if that fails) perhaps if the file was mostly blue-purple to catch the leakers,\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI guess you\u0027re talking about normal maps that were not created via Unity? Because the normal maps Unity creates do always end with _nrm.*, don\u0027t they?\u003C/p\u003E\u003Cp\u003ELet\u0027s assume they\u0027re not marked:\u003C/p\u003E\u003Cp\u003EIf all tangent normal maps were saved with only 2 \u0022active\u0022 channels, namely only red and green, it probably wouldn\u0027t be too difficult. Then it\u0027s only a matter of finding files with blue set to 1 (or was it the other way round...?);(it would hit diffuse textures with full blue in them though...).\u003C/p\u003E\u003Cp\u003E------------- (technical blabla you don\u0027t really have to read)\u003C/p\u003E\u003Cp\u003E \u003Cspan style=\u0022color:#808080;\u0022\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003ESome tangent normal maps do still make use of the blue channel as a form of alignment for re-normalization, although it\u0027s actually not needed.\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#808080;\u0022\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003EBUT, if you could do a quick mathematical check on those normal maps with saved blue channel, then it would very much be possible. The colours are just vectors, as a result you can always calculate/check for instance the blue channel with this formula: z(blue) = sqrt(1 - x*x(red) \u002B y*y(green)) and give it a certain degree of tolerance (because you will never get 100% precision).\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022color:#808080;\u0022\u003EClarification:\u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022color:#808080;\u0022\u003E I don\u0027t think they\u0027re really used in KSP, but I\u0027m not sure. \u003C/span\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003E\u003Cspan style=\u0022color:#808080;\u0022\u003EUnity definitely doesn\u0027t use them.\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E-------------\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E or already in DXT5nm-ish format just in png (to catch RSS normal maps).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EEhm... you normally don\u0027t put the red colour into the alpha channel. Although it\u0027s actually a simple matter of swapping channels, but yeah... \u003C/p\u003E\u003Cp\u003EEDIT: I see, I see... that\u0027s actually the case.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EI think you\u0027d have to use -dxt5 then, because the -dxt5nm command would delete the alpha and replace it with the red instead if it isn\u0027t smart enough to detect already swapped channels, even though that was already done. I must test this first though...\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-19T01:38:00Z\u0022 title=\u002210/19/2014 01:38  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 19, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-10-18T04:59:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022slumpie\u0022 data-cite=\u0022slumpie\u0022\u003E\u003Cdiv\u003EI guess you\u0027re talking about normal maps that were not created via Unity? Because the normal maps Unity creates do always end with _nrm.*, don\u0027t they?\u003Cp\u003EIf all tangent normal maps were saved with only 2 channels, namely only red and green, it probably wouldn\u0027t be too difficult. The problem is that many tangent normal maps do still make use of the blue channel as a form of alignment, although it\u0027s actually not needed. That\u0027s the reason why formats such as DXT5nm, BC3, BC5, etc, come in very handy, because they work with two component colour source data.\u003C/p\u003E\u003Cp\u003EBUT, if you could do a quick mathematical check on those normal maps with saved blue channel, then it would very much be possible. The colours are just vectors, as a result you can always calculate/check for instance the blue channel with this formula: z(blue) = sqrt(1 - x*x(red) \u002B y*y(green)) and give it a certain degree of tolerance (because you will never get 100% precision).\u003C/p\u003E\u003Cp\u003EIf it matches -\u0026gt; you have a normal map\u003C/p\u003E\u003Cp\u003EIf it doesn\u0027t -\u0026gt; something else, probably diffuse made by an insane designer.\u003C/p\u003E\u003Cp\u003EBut don\u0027t ask me how to write a shader... meh! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E\u003C/p\u003E\u003Cp\u003EEhm... you normally don\u0027t put the red colour into the alpha channel. Although it\u0027s actually a simple matter of switching channels, but yeah... \u003C/p\u003E\u003Cp\u003EDXT5nm was never meant to be optimal, it was just a misused DXT5 if you want so...\u003C/p\u003E\u003Cp\u003EAlternatively, V8U8 comes to my mind, a 16bit dds format without compression. Although I\u0027m not sure about the hardware or even software support.\u003C/p\u003E\u003Cp\u003EBy the way nvdxt reads .tga, .bmp, .gif, .ppm, .jpg, .tif, .cel, .dds, .png, .psd, .rgb, *.bw .rgba files.\u003C/p\u003E\u003Cp\u003EPretty much.\u003C/p\u003E\u003Cp\u003ERegarding the 16bit (who uses those anyway? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E) and 8bit (very rare) textures: The 16bit textures are too hard to distinguish and the 8bit ones are not worth any effort, actually both are not really worth the effort. I wouldn\u0027t touch them at all.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn standard Unity shaders, all normal map info is stored in the Green and Alpha. This is combined with tangent information to form a vector.\u003C/p\u003E\u003Cp\u003EYou don\u0027t store anything in the other colors to make sure that you get the best range from A\u0026amp;G with DXT5 compression.\u003C/p\u003E\n"},{"CreatedByName":"Dr. Jet","CreatedById":99880,"CreatedDateTime":"2014-10-18T12:21:29Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003ESarbian, you are a genius!\u003C/strong\u003E \u003Cimg src=\u0022http://mmaa.su/images/smiles/c_ok.gif\u0022 alt=\u0022c_ok.gif\u0022\u003E Most .mbm based folders like Squad and KWRocketry have debloated twice in size and almost twice and half in loading time!\u003C/p\u003E\u003Cp\u003EBTW, to convert mods one-by-one (with compatibility checking afterwards) it\u0027s better to use \u0022SET localdir=%1\u0022 in that converter batch file. Drag folder you want on .bat and it will convert.\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-18T16:26:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EIn standard Unity shaders, all normal map info is stored in the Green and Alpha. This is combined with tangent information to form a vector.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you select standard shaders unity saves red in alpha, but if you use KSP shaders it doesn\u0027t?\u003C/p\u003E\u003Cp\u003EI was talking about the source, the png, tga or mbm textures.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-19T01:11:37Z\u0022 title=\u002210/19/2014 01:11  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 19, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"maracuja","CreatedById":126385,"CreatedDateTime":"2014-10-18T17:02:36Z","Content":"\n\u003Cp\u003Eplease excuse my dumbness (it\u0027s just few days as I\u0027m \u0022playing\u0022 KSP), but is this thing doing same stuff as Active Texture Management?\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2014-10-18T17:22:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022maracuja\u0022 data-cite=\u0022maracuja\u0022\u003E\u003Cdiv\u003Eplease excuse my dumbness (it\u0027s just few days as I\u0027m \u0022playing\u0022 KSP), but is this thing doing same stuff as Active Texture Management?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, but it\u0027s related. ATM compresses all textures to DDS on game load. This allows DDS textures to be loaded directly from files.\u003C/p\u003E\n"},{"CreatedByName":"maracuja","CreatedById":126385,"CreatedDateTime":"2014-10-18T17:36:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blowfish\u0022 data-cite=\u0022blowfish\u0022\u003E\u003Cdiv\u003ENo, but it\u0027s related. ATM compresses all textures to DDS on game load. This allows DDS textures to be loaded directly from files.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethank you for reply! is there any point of using both of them or should i choose just one? if second, then which one is better?\u003C/p\u003E\n"},{"CreatedByName":"Ph34rb0t","CreatedById":4291,"CreatedDateTime":"2014-10-18T18:36:17Z","Content":"\n\u003Cp\u003EI\u0027ve converted all the textures again from scratch, this time including the .mbms. (Thanks for the amended script, \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/96729-0-25-DDSLoader-1-1-%28Oct-14%29-Loads-DDS-Texture-Yes-it-is-boring-edition?p=1485974\u0026amp;viewfull=1#post1485974\u0022 rel=\u0022external nofollow\u0022\u003EUrgante\u003C/a\u003E!)\u003C/p\u003E\u003Cp\u003EMain loading time doesn\u0027t seem to have decreased, but the in-game loading times are even a wee bit faster than before.\u003C/p\u003E\u003Cp\u003ERAM Usage with about 50 mods is 2.2 GB in OpenGL (KSP Win x86) mode.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022maracuja\u0022 data-cite=\u0022maracuja\u0022\u003E\u003Cdiv\u003Ethank you for reply! is there any point of using both of them or should i choose just one? if second, then which one is better?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis involves \u0022manually\u0022 converting all files in the GameData folder and thus altering mods directly while ATM basically does it automatically for you upon game launch without affecting the source textures in the mod directory.\u003C/p\u003E\n"},{"CreatedByName":"maracuja","CreatedById":126385,"CreatedDateTime":"2014-10-18T21:19:08Z","Content":"\n\u003Cp\u003Eso amirite that basically this tool is to control of which textures to be converted and i should be fine with ATM while i\u0027m still not-so-deep in KSP? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-18T21:33:26Z","Content":"\n\u003Cp\u003EIt\u0027s a matter of running a batch file once, but yeah stick with ATM for the beginning.\u003C/p\u003E\n"}]}