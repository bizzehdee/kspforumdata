{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":13,"Articles":[{"CreatedByName":"Izandral","CreatedById":70762,"CreatedDateTime":"2014-03-10T04:32:18Z","Content":"\n\u003Cp\u003Ehow do i do rotations ? or more specifically prevent them. I want to burn surface retrograde , i\u0027m using lock steering to R(0,0,0)*V(0-vs:x,0-vs:y,0-vs:z). But this causes the ship to rotate to have the north up on the nav ball. \u003C/p\u003E\u003Cp\u003EI want to ship to got to retrograde while keeping it\u0027s current rotation.\u003C/p\u003E\n"},{"CreatedByName":"kaesekuchen","CreatedById":90011,"CreatedDateTime":"2014-03-10T06:45:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Izandral\u0022 data-cite=\u0022Izandral\u0022\u003E\u003Cdiv\u003Ehow do i do rotations ? or more specifically prevent them. I want to burn surface retrograde , i\u0027m using lock steering to R(0,0,0)*V(0-vs:x,0-vs:y,0-vs:z). But this causes the ship to rotate to have the north up on the nav ball. \u003Cp\u003EI want to ship to got to retrograde while keeping it\u0027s current rotation.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m afraid that this is a bit trickier. \u003C/p\u003E\u003Cp\u003EWith the current state of kOS i haven\u0027t got this working unless you go the distance and do your own vector calculations from the getgo and use that system instead of the \u0022premade\u0022 vectors kOS supplies for landmark (retrograde, prograde etc.) navigation.\u003C/p\u003E\u003Cp\u003ESteven Mading spent some time on this and wrote quite a few posts on this and i\u0027ll be so blunt to refer you to them for further reading.\u003C/p\u003E\u003Cp\u003EThe main issue at this moment is, that we can\u0027t retrieve the current vessel\u0027s roll.Marianoapp stated, that once the big merge has been done, we will have a way to retrieve it.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-03-10T06:58:38Z","Content":"\n\u003Cp\u003EI\u0027m pretty sure you can use this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elock steering to up\u002B(whatever)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eup is always away from the planet/moon center, so it\u0027ll rotate constantly to compensate.\u003C/p\u003E\u003Cp\u003EI\u0027m not sure why you\u0027d want that though. That\u0027s not how you execute burns.\u003C/p\u003E\u003Cp\u003EIf you want to align yourself to a constant vector at a specific point on your orbit, then you can tell your script to create a node at a specific point, and then do this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elock steering to nextnode.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-10T07:02:35Z\u0022 title=\u002203/10/2014 07:02  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 10, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"kaesekuchen","CreatedById":90011,"CreatedDateTime":"2014-03-10T08:00:09Z","Content":"\n\u003Cp\u003EThe issue at hand is, that (usually) the roll of your ship does not affect your burn. So it wouldn\u0027t matter if we are \u0022upside down\u0022 or 90 degree rolled to the right, as long as we point to our destination.\u003C/p\u003E\u003Cp\u003EWhat izandral is looking for (unless of course i\u0027m mistaken) is a way to change your orientation while maintaining your current roll orientation and therefore avoiding any unnecessary change on your ship\u0027s roll axis.\u003C/p\u003E\n"},{"CreatedByName":"Izandral","CreatedById":70762,"CreatedDateTime":"2014-03-10T11:50:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kaesekuchen\u0022 data-cite=\u0022kaesekuchen\u0022\u003E\u003Cdiv\u003EThe issue at hand is, that (usually) the roll of your ship does not affect your burn. So it wouldn\u0027t matter if we are \u0022upside down\u0022 or 90 degree rolled to the right, as long as we point to our destination.\u003Cp\u003EWhat izandral is looking for (unless of course i\u0027m mistaken) is a way to change your orientation while maintaining your current roll orientation and therefore avoiding any unnecessary change on your ship\u0027s roll axis.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyep pretty much that , when i try to go to retrograde because of the roll the ship does not go to the new nav point (retrograde) by the shortest route. It rolls around way off mark before setteling. On a small ship it\u0027s not much of a problem because it\u0027s manoeuvrable but on something less agile it adds way to much delay\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-10T12:34:35Z\u0022 title=\u002203/10/2014 12:34  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 10, 2014\u003C/time\u003E by Izandral\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-03-10T21:09:38Z","Content":"\n\u003Cp\u003EOK that\u0027s beyond my knowledge then, except maybe you could write a script to change your orientation in e.g. 30 degree increments, you can use the dot product to check vector directions if I\u0027m right, and then do another orientation change until you\u0027re done.\u003C/p\u003E\n"},{"CreatedByName":"Kethevin","CreatedById":64466,"CreatedDateTime":"2014-03-11T05:00:07Z","Content":"\n\u003Cp\u003EI\u0027m sorry if this is a silly question, but I\u0027m not sure what I\u0027m doing wrong. If K-OS loses signal it stops working, which is fine and I like that. But when it finally regains signal, it still doesn\u0027t work. Instead of an error it just doesn\u0027t do anything. If I type something it doesn\u0027t recognize, it says so, but if it\u0027s a valid command it doesn\u0027t do anything.\u003C/p\u003E\u003Cp\u003EIn addition, if I turn the power off, I don\u0027t seem able to power it back up. :-(\u003C/p\u003E\u003Cp\u003EPlease help.\u003C/p\u003E\u003Cp\u003EEDIT: I\u0027m able to power it up and down just fine if I have a current signal. If I deactivate the antenna I can still power it up and down; however, once I enter a command that generates the error \u0022Signal interruption: Transmission Lost,\u0022 it becomes totally dysfunctional, regardless of the condition of the antenna.\u003C/p\u003E\u003Cp\u003EEDIT2: Leaving focus on the ship and returning restores function. Sorry. *blush*\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-11T05:23:21Z\u0022 title=\u002203/11/2014 05:23  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 11, 2014\u003C/time\u003E by Kethevin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kethevin","CreatedById":64466,"CreatedDateTime":"2014-03-11T06:58:01Z","Content":"\n\u003Cp\u003EI\u0027m curious if someone could give me an example of a simple program to circularize your orbit. It is likely poorly done, but I\u0027ve been using:\u003C/p\u003E\u003Cp\u003Eset x to apoapsis - 500.\u003C/p\u003E\u003Cp\u003Eset y to x - 2000.\u003C/p\u003E\u003Cp\u003Elock steering to prograde.\u003C/p\u003E\u003Cp\u003Ewait until eta:apoapsis \u0026lt; 20.\u003C/p\u003E\u003Cp\u003Elock throttle to 1.\u003C/p\u003E\u003Cp\u003Ewait until periapsis \u0026gt;= y.\u003C/p\u003E\u003Cp\u003Elock throttle to .5.\u003C/p\u003E\u003Cp\u003Ewait until periapsis \u0026gt;=x.\u003C/p\u003E\u003Cp\u003Elock throttle to 0.\u003C/p\u003E\u003Cp\u003EI had it throttle back to 50% because I thought it might help keep the apoapsis from changing. The problem I\u0027m having is instead of making the orbit circular it stretches out instead. I start with an apopasis of around 80,000. After this program runs, the perapsis does stop near 80,000 but by the time that happens, my apoapsis shoots out to over 1,000,000.\u003C/p\u003E\u003Cp\u003EI apologize for the crudeness of the program, I\u0027m a beginner. :-)\u003C/p\u003E\u003Cp\u003EEDIT: To explain why I used X and Y, I was afraid the original problem was the changing apoapsis, so I decided to lock it into a set figure by placing it in a variable. My goal is to have a simple program for my future satellites that allow me to run and have it circularize at whatever apoapsis I have it start with.\u003C/p\u003E\n"},{"CreatedByName":"kaesekuchen","CreatedById":90011,"CreatedDateTime":"2014-03-11T09:28:15Z","Content":"\n\u003Cp\u003EThe problem with circularizing your orbit is, that in an ideal circular orbit periapsis and apoapsis would be interchangeable. \u003C/p\u003E\u003Cp\u003ESo if your intention is to write a program, that is very flexible and efficient you have to take a look at quite a few cases.\u003C/p\u003E\u003Cp\u003E1) your periapsis needs to be higher\u003C/p\u003E\u003Cp\u003Ea) will the new periapsis be higher than the current apoapsis ?\u003C/p\u003E\u003Cp\u003E- burn at current apoapsis, until apoapsis is higher than desired altitude for periapsis\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E will the new periapsis be smaller than the current apoapsis?\u003C/p\u003E\u003Cp\u003E- burn at current apoapsis, until periapsis is higher than desired altitude for periapsis\u003C/p\u003E\u003Cp\u003E2) your apoapsis needs to be higher\u003C/p\u003E\u003Cp\u003E- burn at current periapsis, until apoapsis is higher than desired alt. for apoapsis\u003C/p\u003E\u003Cp\u003E3) your periapsis needs to be smaller\u003C/p\u003E\u003Cp\u003E- burn at current apoapsis, until periapsis is smaller than desired alt. for periapsis\u003C/p\u003E\u003Cp\u003E4) your apoapsis needs to be smaller\u003C/p\u003E\u003Cp\u003Ea) will the new apoapsis be higher than the current periapsis?\u003C/p\u003E\u003Cp\u003E- burn at periapsis, until apoapsis is smaller than desired alt. for apoapsis\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E will the new apoapsis be smaller than the current periapsis?\u003C/p\u003E\u003Cp\u003E- burn at periapsis, until periapsis is smaller than desired alt. for apoapsis\u003C/p\u003E\u003Cp\u003EThese are the 4 cases you have to take into consideration. \u003C/p\u003E\u003Cp\u003EIt\u0027s usually easier to implement it with a certain threshold, saying you want to circularize at 100km, you should first execute the burns, until your periapsis is between 99.5km and 100km and your apoapsis is between 100km and 100.5km.\u003C/p\u003E\u003Cp\u003EI hope this pseudocode helps, otherwise i can cleanup the circularizing script i wrote and post that.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-11T13:37:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kethevin\u0022 data-cite=\u0022Kethevin\u0022\u003E\u003Cdiv\u003EI\u0027m curious if someone could give me an example of a simple program to circularize your orbit. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn general I\u0027ve found it massively useful to always remember this in the top of my head in any thinking about maneuvers in KSP:\u003C/p\u003E\u003Cp\u003E\u0022Always, always, always, your predicted orbital ellipse must necessarily include returning to your current position.\u0022\u003C/p\u003E\u003Cp\u003EIn other words, your current location is the \u0022pivot point\u0022 of any maneuver burn - the one position, locked in place, that must always be part of the new orbital path you\u0027re creating.\u003C/p\u003E\u003Cp\u003EKeeping that at the top of your mind helps avoid a lot of pitfalls. In this case it helps remind you that it\u0027s impossible to raise your periapsis higher than your current altitude because (periapsis \u0026lt;= altitude \u0026lt;= apoapsis) must always be true if your current location has to be on the orbital ellipse.\u003C/p\u003E\u003Cp\u003EWhat\u0027s happening in your case is that before you hit the point where periapsis \u0026gt;= (original apopasis - 2500), periapsis has rotated position with apopapsis so that now apoapsis is on the far side and periapsis is near you. At that point your orbit has already passed through circular and you\u0027re now stretching it out again by burning more. And this has happened before periapsis got to within 2500 of what apoapsis used to be so your script didn\u0027t catch it and stop you.\u003C/p\u003E\u003Cp\u003ETry this logic instead:\u003C/p\u003E\u003Cp\u003E\u0022Burn until diff between my current periapsis and my current altitude is a smaller number than the diff between my current altitude and my current apoapsis.\u0022\u003C/p\u003E\u003Cp\u003EYou can do that in one simple \u0022wait until\u0022 expression.\u003C/p\u003E\u003Cp\u003EThat will burn until you pass the point where you\u0027ve pushed the apoapsis around to the other side of the orbit from you. I used this and it works like a charm every time.\u003C/p\u003E\u003Cp\u003EYour logic to slow down the burn as you get close to the cutoff point is good tactic to get more precision, but the way I typically do that is to lock the throttle to a math expression that continuously gets closer to zero as it gets closer to the endpoint, like this for example:\u003C/p\u003E\u003Cp\u003Elock throttle to 0.01 \u002B (apoapsis - periapsis)/5000 .\u003C/p\u003E\u003Cp\u003EIn that example, the throttle stays \u0026gt; 1.0 (which kOS just takes to mean the same as 1.0) as long as apoapsis is more than 5000m higher than periapsis, but then it starts scaling down from 1.0 down to 0.01 as the difference between apoapsis and periapsis scales from 5000m to 0m.\u003C/p\u003E\u003Cp\u003EThe reason for adding 0.01 is that you need to avoid the case where you asymptotically approach the endpoint without ever actually quite reaching it, which is what could happen if you bring the throttle to exactly zero as you bring the oribit to exactly circular.\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-03-11T22:39:04Z","Content":"\n\u003Cp\u003EI approached circularization from a math point of view, so I first calculate the velocity needed to achieve a circular orbit and then the difference between that and the velocity I will have at apoapsis is the node deltav.\u003C/p\u003E\u003Cp\u003ESnippet of my circularization program\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// orbitAltitude = desired altitude of the circularized orbit\u003Cbr\u003E// g_bodyRadius = 600km (kerbin)\u003Cbr\u003E// g_bodyGM = 3531600000000 (kerbin)\u003Cbr\u003E\u003Cbr\u003Eset absoluteOrbitAltitude to g_bodyRadius \u002B orbitAltitude.\u003Cbr\u003Eprint \u0022Target orbit: \u0022 \u002B orbitAltitude \u002B \u0022m\u0022.\u003Cbr\u003E\u003Cbr\u003E// calculate required orbital velocity to achieve a circular orbit\u003Cbr\u003Eset requiredOrbitalVelocity to sqrt(g_bodyGM / absoluteOrbitAltitude).\u003Cbr\u003Eprint \u0022Required orbital velocity: \u0022 \u002B round(requiredOrbitalVelocity, 3) \u002B \u0022m/s\u0022.\u003Cbr\u003E\u003Cbr\u003E// calculate orbital velocity at apoapsis\u003Cbr\u003Eset SMa to (alt:apoapsis \u002B alt:periapsis \u002B 2*g_bodyRadius) / 2.\u003Cbr\u003Eset apoapsisOrbitalVelocity to sqrt(g_bodyGM*((2/absoluteOrbitAltitude)-(1/SMa))).\u003Cbr\u003Eprint \u0022Apoapsis orbital velocity: \u0022 \u002B round(apoapsisOrbitalVelocity, 3) \u002B \u0022m/s\u0022.\u003Cbr\u003E\u003Cbr\u003E// add the node\u003Cbr\u003Eset nodeDeltaV to requiredOrbitalVelocity - apoapsisOrbitalVelocity.\u003Cbr\u003Eset maneuverNode to node(time:seconds \u002B eta:apoapsis, 0, 0, nodeDeltaV).\u003Cbr\u003Eadd maneuverNode.\u003Cbr\u003E\u003Cbr\u003E// execute the node (execnode is a program I wrote for that)\u003Cbr\u003Erun execnode(Isp).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kethevin","CreatedById":64466,"CreatedDateTime":"2014-03-11T23:11:04Z","Content":"\n\u003Cp\u003EThanks everyone, I\u0027m learning! :-)\u003C/p\u003E\u003Cp\u003E@Marianoapp Could you show me your execnode program?\u003C/p\u003E\u003Cp\u003ESo far I\u0027ve had limited success, the closest I come is having the periapsis about 10KM below the apoapsis. I realize getting it exact is unlikely, but I\u0027d like to shoot for a closer margin.\u003C/p\u003E\u003Cp\u003EI think my current issues lie in when to start the burn. Too soon and the apoapsis climbs with the burn, too late and I pass over the apoapsis during the burn. I\u0027m thinking it\u0027s not going to be a one size fits all as I understand it, the mass of the craft and the thrust of the engine will change the most appropriate burn spot? Is that correct?\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-03-11T23:31:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kethevin\u0022 data-cite=\u0022Kethevin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI think my current issues lie in when to start the burn. Too soon and the apoapsis climbs with the burn, too late and I pass over the apoapsis during the burn. I\u0027m thinking it\u0027s not going to be a one size fits all as I understand it, the mass of the craft and the thrust of the engine will change the most appropriate burn spot? Is that correct?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe exact moment to start the burn is when your are at the apoapsis of the suborbital trajectory (the top of the parabole after launch), but since the circularization burn takes time you have to start a little early so you burn evenly before and after the apoapsis. And yes, the ship mass and thrust affect the burn time and therefore how early you have to start the burn.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kethevin\u0022 data-cite=\u0022Kethevin\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E@Marianoapp Could you show me your execnode program?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy execnode script is this, it calculates the burn time taking into account the ship mass, thrust and engine efficiency (isp parameter).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Edeclare parameter Isp.\u003Cbr\u003E\u003Cbr\u003Eset Ispg to Isp*9.82.\u003Cbr\u003Eset maneuverNode to nextnode.\u003Cbr\u003E\u003Cbr\u003E// lock the steering to the node\u003Cbr\u003Esas off.\u003Cbr\u003Elock nodeDirection to (R(0,0,0)*maneuverNode:burnvector) \u002B R(0,0,180).\u003Cbr\u003Elock steering to nodeDirection.\u003Cbr\u003E\u003Cbr\u003E// calculate burn time\u003Cbr\u003Eset finalMass to ship:mass / ((constant():e) ^(maneuverNode:burnvector:mag / Ispg)).\u003Cbr\u003E// adjust thrust so the burn time is at least 1s.\u003Cbr\u003Eset burnThrottle to 1.\u003Cbr\u003Eset burnTime to 0.\u003Cbr\u003Euntil burnTime \u0026gt;= 1\u003Cbr\u003E{\u003Cbr\u003E    set massFlowRate to (ship:maxthrust*burnThrottle) / Ispg.\u003Cbr\u003E    set burnTime to (ship:mass - finalMass) / massFlowRate.    \u003Cbr\u003E    if burnTime \u0026lt; 1 { set burnThrottle to 0.75*burnThrottle. }.\u003Cbr\u003E}.\u003Cbr\u003Eprint \u0022Burn time: \u0022 \u002B round(burnTime, 3) \u002B \u0022s @ \u0022 \u002B round(burnThrottle * 100) \u002B \u0022%\u0022.\u003Cbr\u003E\u003Cbr\u003E// throttle up delay\u003Cbr\u003Eset startDelay to 0.97.\u003Cbr\u003Ewait until maneuverNode:eta \u0026lt;= ((burnTime / 2) \u002B startDelay).\u003Cbr\u003E// start burn\u003Cbr\u003Elock throttle to burnThrottle.\u003Cbr\u003Ewait burnTime - 0.02.\u003Cbr\u003Elock throttle to 0.\u003Cbr\u003E\u003Cbr\u003Eunlock steering.\u003Cbr\u003Esas on.\u003Cbr\u003E\u003Cbr\u003Eremove maneuverNode.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kethevin","CreatedById":64466,"CreatedDateTime":"2014-03-12T00:11:44Z","Content":"\n\u003Cp\u003EI can almost follow some of that! Would you mind if I copied it and tried it out in my game? I tend to learn faster through a more hands-on approach if that makes sense.\u003C/p\u003E\n"},{"CreatedByName":"Kethevin","CreatedById":64466,"CreatedDateTime":"2014-03-12T07:22:42Z","Content":"\n\u003Cp\u003ECould you tell me what I\u0027m doing wrong here? I made a short script to deorbit junk. I wrote this:\u003C/p\u003E\u003Cp\u003Eclearscreen.\u003C/p\u003E\u003Cp\u003Eprint \u0022Executing de-orbit burn.\u0022.\u003C/p\u003E\u003Cp\u003Ewait 1.\u003C/p\u003E\u003Cp\u003Elock steering to retrograde.\u003C/p\u003E\u003Cp\u003Ewait 2.\u003C/p\u003E\u003Cp\u003Elock throttle to 1.\u003C/p\u003E\u003Cp\u003EInstead of locking to retrograde, the ship spins. If I type it manually it works. Also, the throttle never goes up, but also works if I type it manually. I put the waits in thinking it needed something between the commands.\u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\u003Cp\u003EEDIT: Also... after typing it manually, it doesn\u0027t hold after putting the throttle to 1; I have to type \u0022lock steering to retrograde.\u0022 a second time.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-12T07:28:03Z\u0022 title=\u002203/12/2014 07:28  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 12, 2014\u003C/time\u003E by Kethevin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dappa","CreatedById":63274,"CreatedDateTime":"2014-03-12T09:45:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kethevin\u0022 data-cite=\u0022Kethevin\u0022\u003E\u003Cdiv\u003ECould you tell me what I\u0027m doing wrong here? I made a short script to deorbit junk. I wrote this:\u003Cp\u003Eclearscreen.\u003C/p\u003E\u003Cp\u003Eprint \u0022Executing de-orbit burn.\u0022.\u003C/p\u003E\u003Cp\u003Ewait 1.\u003C/p\u003E\u003Cp\u003Elock steering to retrograde.\u003C/p\u003E\u003Cp\u003Ewait 2.\u003C/p\u003E\u003Cp\u003Elock throttle to 1.\u003C/p\u003E\u003Cp\u003EInstead of locking to retrograde, the ship spins. If I type it manually it works. Also, the throttle never goes up, but also works if I type it manually. I put the waits in thinking it needed something between the commands.\u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\u003Cp\u003EEDIT: Also... after typing it manually, it doesn\u0027t hold after putting the throttle to 1; I have to type \u0022lock steering to retrograde.\u0022 a second time.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe problem with your script is that it just ends immediately after locking the throttle. That resets the throttle, and keeps the ship spinning if it wasn\u0027t done turning to retrograde. \u003C/p\u003E\u003Cp\u003ETo prevent your script ending too soon, try adding the following at the end: \u003C/p\u003E\u003Cp\u003Ewait until periapsis \u0026lt; 0. \u003C/p\u003E\u003Cp\u003EThat should keep your script running until you\u0027re de-orbited.\u003C/p\u003E\n"},{"CreatedByName":"Kethevin","CreatedById":64466,"CreatedDateTime":"2014-03-12T18:06:16Z","Content":"\n\u003Cp\u003EThanks! I appreciate the help.\u003C/p\u003E\n"},{"CreatedByName":"Izandral","CreatedById":70762,"CreatedDateTime":"2014-03-13T12:49:33Z","Content":"\n\u003Cp\u003Ei have a problem with orientation. When i print ship:direction i get numbers , but if i try to assign pitch , yaw or roll to a variable they always end up 0. Is there a way to know my current orientation and use it after ?\u003C/p\u003E\u003Cp\u003EAnother problem/question/idea i have, is there a way to do something along the line of --- PITCH: POSITIVE:1--- which would pitch the ship up for 1 sec, like actually holding the S key for 1 sec.\u003C/p\u003E\u003Cp\u003EBecause right now if i use locksteering the controls move all around the place , turns very slowly in the right direction and waste a ton of Mono. It\u0027s fine for small adjustment but for large orientation changes it\u0027s not practical. It seems the ship is moving in small(really small) rotation increment and stabilising each time until it\u0027s at the proper heading.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-13T13:16:30Z\u0022 title=\u002203/13/2014 01:16  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 13, 2014\u003C/time\u003E by Izandral\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"frencrs","CreatedById":95489,"CreatedDateTime":"2014-03-13T21:08:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Izandral\u0022 data-cite=\u0022Izandral\u0022\u003E\u003Cdiv\u003Ei have a problem with orientation. When i print ship:direction i get numbers , but if i try to assign pitch , yaw or roll to a variable they always end up 0. Is there a way to know my current orientation and use it after ?\u003Cp\u003EAnother problem/question/idea i have, is there a way to do something along the line of --- PITCH: POSITIVE:1--- which would pitch the ship up for 1 sec, like actually holding the S key for 1 sec.\u003C/p\u003E\u003Cp\u003EBecause right now if i use locksteering the controls move all around the place , turns very slowly in the right direction and waste a ton of Mono. It\u0027s fine for small adjustment but for large orientation changes it\u0027s not practical. It seems the ship is moving in small(really small) rotation increment and stabilising each time until it\u0027s at the proper heading.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can use \u0022LOCK\u0022 instead of \u0022SET\u0022 to set a variable to return your current orientation.\u003C/p\u003E\u003Cp\u003EAnd for the manual pitch/yaw/roll controls, the latest release info explains their addition: \u003Ca href=\u0022https://github.com/erendrake/KOS/releases\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/erendrake/KOS/releases\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EFor example: \u0022SET SHIP:CONTROL:YAW to 0.2\u0022 would cause the ship to start rotating at 20% of it\u0027s control thrust/torque, \u0022SET SHIP:CONTROL:YAW to -0.2\u0022 would cause the ship to start rotating at 20% in the opposite direction. The same applies for PITCH and ROLL.\u003C/p\u003E\u003Cp\u003EFORE and STARBOARD can be a little confusing, basically if you want the ship to translate aft at 100% you would do \u0022SET SHIP:CONTROL:FORE to -1\u0022 and if you want the ship to translate port at 100% you would do \u0022SET:SHIP:CONTOL:STARBOARD to -1\u0022\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-03-13T22:50:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Izandral\u0022 data-cite=\u0022Izandral\u0022\u003E\u003Cdiv\u003Ei have a problem with orientation. When i print ship:direction i get numbers , but if i try to assign pitch , yaw or roll to a variable they always end up 0. Is there a way to know my current orientation and use it after ?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E[TARGET]: DIRECTION is the direction from your ship to the target ship, but in this case the target (\u0022SHIP\u0022) is your own ship, so the direction is zero \u0022R(0,0,0)\u0022. What you need to use is SHIP:FACING that returns a rotation that represents the direction in which your ship is pointing.\u003C/p\u003E\n"},{"CreatedByName":"aNewHope","CreatedById":76088,"CreatedDateTime":"2014-03-14T08:21:35Z","Content":"\n\u003Cp\u003EHi, Erendrake,\u003C/p\u003E\u003Cp\u003EI have a request for the upcoming update(s): Right now kOS seems to be incapable of putting out a number to a power, that is not an Integer.\u003C/p\u003E\u003Cp\u003EI would really need that functionality in order for this program to work (It gives out a list for an almost perfect gravity turn).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Edeclare parameter twr,v0,psi0.\u003Cbr\u003E\u003Cbr\u003Eprint \u0022Computing Trajectory\u0022 at (Ic,stl).\u003Cbr\u003Eprint \u0022Progress:\u0022 at (Ic,Il\u002B6).\u003Cbr\u003Eprint \u00220 %\u0022 at (Ic2,Il\u002B6).\u003Cbr\u003E\u003Cbr\u003Eset z0 to -tan(0.5*psi0).\u003Cbr\u003Eset c to v0/(z0^(twr-1)\u002Bz0^(twr\u002B1)).\u003Cbr\u003Eset gt to list().\u003Cbr\u003E\u003Cbr\u003Eset n to 0.\u003Cbr\u003Eset zm to 0.5.\u003Cbr\u003E\u003Cbr\u003Elock v to 5*n^2\u002B55*n\u002B10.\u003Cbr\u003Elock vm to c*zm^(twr-1)*(1\u002Bzm^2).\u003Cbr\u003E\u003Cbr\u003Euntil n \u0026gt; 12{\u003Cbr\u003E\tset zmin to 0.\u003Cbr\u003E\tset zm to 0.5.\u003Cbr\u003E\tset zmax to 1.\u003Cbr\u003E\tuntil round(vm,0)=v{\u003Cbr\u003E\t\tif vm\u0026gt;v {set zmax to zm.}\u003Cbr\u003E\t\tif vm\u0026lt;v {set zmin to zm.}\u003Cbr\u003E\t\tset zm to (zmin\u002Bzmax)/2.\u003Cbr\u003E\t}\u003Cbr\u003E\tset n to n\u002B1.\u003Cbr\u003E\tset gt:add to 90\u002B2*arctan(zm).\u003Cbr\u003E\tprint round(100*n/12) \u002B \u0022 %\u0022 at (Ic2,Il\u002B6).\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Eprint \u0022                    \u0022 at (Ic,stl).\u003Cbr\u003Eprint \u0022         \u0022 at (Ic,Il\u002B6).\u003Cbr\u003Eprint \u0022         \u0022 at (Ic2,Il\u002B6).\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEdit: Problem is solved.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-14T16:03:30Z\u0022 title=\u002203/14/2014 04:03  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 14, 2014\u003C/time\u003E by aNewHope\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"a5xq","CreatedById":85801,"CreatedDateTime":"2014-03-14T09:04:12Z","Content":"\n\u003Cp\u003EYou can add IF .. ELSE statement? \u003C/p\u003E\u003Cp\u003EWithout it, my script for automatic control capacitors (Near Future Propulsion) very ugly.\u003C/p\u003E\n"},{"CreatedByName":"frencrs","CreatedById":95489,"CreatedDateTime":"2014-03-14T10:35:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aNewHope\u0022 data-cite=\u0022aNewHope\u0022\u003E\u003Cdiv\u003EHi, Erendrake,\u003Cp\u003EI have a request for the upcoming update(s): Right now kOS seems to be incapable of putting out a number to a power, that is not an Integer.\u003C/p\u003E\u003Cp\u003EI would really need that functionality in order for this program to work (It gives out a list for an almost perfect gravity turn).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI believe kOS returns floating points if the result is a floating point.\u003C/p\u003E\u003Cp\u003EAre you talking about results like this? (Ignore the up-arrow symbol, it is being shown in place of the ^ symbol for some reason.)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/zhrEkgr.png\u0022 alt=\u0022zhrEkgr.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-03-14T12:35:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aNewHope\u0022 data-cite=\u0022aNewHope\u0022\u003E\u003Cdiv\u003EHi, Erendrake,\u003Cp\u003EI have a request for the upcoming update(s): Right now kOS seems to be incapable of putting out a number to a power, that is not an Integer.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn the days before the SQRT operator you had to get a square root by taking something to the power ^0.5 and that worked just fine. Are you sure this doesn\u0027t work?\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-03-14T14:45:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022aNewHope\u0022 data-cite=\u0022aNewHope\u0022\u003E\u003Cdiv\u003EHi, Erendrake,\u003Cp\u003EI have a request for the upcoming update(s): Right now kOS seems to be incapable of putting out a number to a power, that is not an Integer.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you using v11.1 or the 12.0 prerelease? We made a major rewrite of several parts of the mod and in the new version you can raise a number to any power you want.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-14T14:54:56Z\u0022 title=\u002203/14/2014 02:54  PM\u0022 data-short=\u002210 yr\u0022\u003EMarch 14, 2014\u003C/time\u003E by marianoapp\u003C/strong\u003E\n\u003C/span\u003E\n"}]}