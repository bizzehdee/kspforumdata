{"TopicId":10059,"ForumId":34,"TopicTitle":"Numerical Fuel Gauges (unfinished)","CreatedByName":"The_Duck","CreatedById":1156,"CreatedDateTime":"2012-05-01T01:17:50Z","PageNum":1,"Articles":[{"CreatedByName":"The_Duck","CreatedById":1156,"CreatedDateTime":"2012-05-01T01:17:50Z","Content":"I was messing around with this at the request of semininja but I didn\\\u0027t quite get it working completely. If anyone wants to grab this code and run with it, feel free; I\\\u0027m not working on it at the moment.\n\nThis plugin provides an alternate command pod. When you use it in your ship it will add a numerical readout to the info boxes of fuel tanks:\n\n![JMpXO.png](http://i.imgur.com/JMpXO.png)\n\nThe only problem is that it currently disrupts icon grouping: none of the fuel tank icons will group together, even when they aren\\\u0027t in use or are empty. I\\\u0027m not sure why this is; I haven\\\u0027t figured out how exactly the icon grouping is controlled.\n\n[Download here](http://www./download.php?fwziyq3813x41gx) and unzip in your main KSP folder to install. The source is included, but I\\\u0027ll paste it here for easy viewing since it\\\u0027s short.\n\n    using System;using System.Collections.Generic;using System.Linq;using System.Text;public class ImprovedFuelGaugePod : CommandPod{  Dictionary infoBoxes = new Dictionary();  protected override void onFlightStart()  {    foreach (Part p in this.vessel.parts)    {      if (p is FuelTank)      {        //clearing and recreating the info box seems to trick FuelTank into using our info box        //and this way we get a reference to the info box:        p.stackIcon.ClearInfoBoxes();        infoBoxes[(FuelTank)p] = p.stackIcon.DisplayInfo();      }    }    base.onFlightStart();  }  protected override void onPartFixedUpdate()  {    foreach (KeyValuePair pair in infoBoxes)    {      pair.Value.SetMessage(\u0027Fuel: \u0027 \u002B (int)pair.Key.fuel);    }    base.onPartFixedUpdate();  }}"},{"CreatedByName":"semininja","CreatedById":3837,"CreatedDateTime":"2012-05-01T04:24:38Z","Content":"Ideas discussed so far: clearing the infoboxes only when the engine starts to draw fuel from a tank, clearing again when empty (to see if infoboxes will revert, allowing stacking again)."},{"CreatedByName":"OtherDalfite","CreatedById":8317,"CreatedDateTime":"2012-05-01T04:27:43Z","Content":"This looks pretty nice! Could there by chance be a guage to measure how fast your engine is consuming the fuel?"},{"CreatedByName":"semininja","CreatedById":3837,"CreatedDateTime":"2012-05-01T04:29:41Z","Content":"I expect that probably wouldn\\\u0027t be too difficult, although I\\\u0027m not enough of a coder to even start to tell you how.\n\nAlso, here\\\u0027s a part that does this, which you can add to any rocket you\\\u0027ve already built.\n\nSource is included. Model credit to NovaSilisko, code credit to The\\_Duck.\n\n[http://dl.dropbox.com/u/46530390/ImprovedFuelGauges.zip](https://dl.dropbox.com/u/46530390/ImprovedFuelGauges.zip)"},{"CreatedByName":"OtherDalfite","CreatedById":8317,"CreatedDateTime":"2012-05-01T04:30:59Z","Content":"\u003E \n\u003E I expect that probably wouldn\\\u0027t be too difficult, although I\\\u0027m not enough of a coder to even start to tell you how.\n\nSame goes for me. I imagine it may be a little tough to determine it by throttle. Anyways, just a question/suggestion. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"VincentMcConnell","CreatedById":14492,"CreatedDateTime":"2012-05-04T00:17:23Z","Content":"How about fuel percentage? That\\\u0027s kind of more important than a number that is going to be different out of the total for each tank..."},{"CreatedByName":"semininja","CreatedById":3837,"CreatedDateTime":"2012-05-05T01:16:13Z","Content":"The way I see it, the fuel percentage isn\\\u0027t really the important part, and it\\\u0027s pretty easy to estimate using the existing fuel bar in the gauge."},{"CreatedByName":"Cepheus","CreatedById":10683,"CreatedDateTime":"2012-05-05T04:27:00Z","Content":"Looks pretty neat. Does it work with solids, or only with liquid tanks?"},{"CreatedByName":"semininja","CreatedById":3837,"CreatedDateTime":"2012-05-05T21:19:51Z","Content":"Judging by the code, it\\\u0027s currently set up to work with liquid tanks. It could probably be changed so that it also works with solid boosters, though."}]}