{"TopicId":100094,"ForumId":34,"TopicTitle":"[Plugin][0.90] (Semi-)Saturatable Reaction Wheels v1.8 (Apr 9)","CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-19T09:26:38Z","PageNum":1,"Articles":[{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-19T09:26:38Z","Content":"All my minor mods are going into a single thread post-1.0 release. Please check my signature for the new thread\n\nIntroducing a (not particularly realistic) saturation mechanic to reaction wheels. As reaction wheels exert torque, stored momentum increases saturating the wheel and decreasing torque output. Over time the stored momentum decays and torque slowly increases back to it\u0027s original level.\n\nWhy use this mod? From a gameplay perspective it adds another factor to be aware of when maneuvering your vessel. It makes including maneuvering thrusters on your vessels a lot more attractive (especially if you know offset thrust could be an issue eg. spaceplanes, cargo tugs, and asteroid haulers), and means you really do have to find a flat spot to land if you want to be on the ground for more than a few seconds (no more sitting with only two legs on the ground indefinitely). There are also interesting balancing possibilities because of the dynamic nature of the additional parameters.\n\n[**Download**](https://github.com/Crzyrndm/RW-Saturatable/releases) **-** [**Source**](https://github.com/Crzyrndm/RW-Saturatable)\n\nRequires [Module Manager](https://forum.kerbalspaceprogram.com/threads/55219-0-90-Module-Manager-2-5-13-%28Mar-25%29-An-ode-to-code-duplication)\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/gzq1G)\n\nNOTE: Atmospheric flight often requires a constant torque input, causing wheels to rapidly saturate. It is recommended that you disable reaction wheels prior to launch and re-enable them in the upper atmosphere.\n\nLicense is GPLv3\n\n\u003E \n\u003E This is the default module manager patch that switches out all reaction wheel modules for saturatable wheels with extra comments about the effect of each parameter\n\u003E \n\u003E \n\u003E \n\u003E [\\*]:HAS[@MODULE[ModuleReactionWheel],!MODULE[RWSaturatable]]:FOR[RWSaturatable]{  \n\u003E  @MODULE[ModuleReactionWheel]  \n\u003E  {  \n\u003E  @name = RWSaturatable  \n\u003E   \n\u003E [COLOR=#ff0000] // saturationScale controls the maximum momentum that can be stored by a part. If torque remains constant until 100% saturation, this is the time in seconds that reaching 100% saturation will take  \n\u003E  // The maximum storeable momentum equals: saturationScale \\* AverageTorque[/COLOR]  \n\u003E  saturationScale = 10  \n\u003E   \n\u003E  [COLOR=#ff0000]// Bleed rate is the fraction of maximum axis torque that will be exerted to reduce momentum each second, and is based on the current saturation percentage.  \n\u003E  // The default 2.5% and 10s scale will take slightly less than 400 seconds to completely clear an axis (assuming axis torque == average torque).  \n\u003E  // Other values can be calculated by dividing the saturation scale by the bleedRate (assuming a constant bleed rate), ie. 10 / 0.025 = 400[/COLOR]  \n\u003E  bleedRate  \n\u003E  {  \n\u003E  key = 0 0.025 0 0  \n\u003E  key = 1 0.025 0 0  \n\u003E  }  \n\u003E   \n\u003E  [COLOR=#ff0000]// Torque percentage for a given level of saturation. The default config gives a linear decrease from 100% to 0% as stored momentum increases[/COLOR]  \n\u003E  torqueCurve  \n\u003E  {  \n\u003E  key = 0 1 -1 -1  \n\u003E  key = 1 0 -1 -1  \n\u003E  }  \n\u003E  }  \n\u003E }\n\u003E \n\u003E \n\u003E     @PART\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\n**Edited \u003Ctime datetime=\u00222015-04-26T23:08:37Z\u0022 title=\u002204/26/2015 11:08  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 26, 2015\u003C/time\u003E by Crzyrndm**"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2015-02-19T18:11:23Z","Content":"I like it! Any development which brings KSP closer to real life should be applauded. Unfortunately most people seem te be less interested in micromanagement, the reason I abandoned my hydraulics mod. A thing that helps, if you get insufficient response on this forum (which is often), is to share your ideas on the unofficial facebook group(s) and other media."},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-02-19T18:39:40Z","Content":"Looks interesting. I will download to try this tonight. If this works well it will be a great way to balance reaction wheels without losing high torque for large vessels."},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-19T20:11:22Z","Content":"\u003E \n\u003E I like it! Any development which brings KSP closer to real life should be applauded.\n\nMore of a side effect in this case. Primarily, it has the potential to add interesting gameplay considerations. KSP\u0027s issues with voiding angular momentum make a \u0022real\u0022 system (which doesn\u0027t bleed off momentum) a waste of time IMO. You can of course set the bleed rate to zero if you really want to, but I\u0027ll never recommend doing so.\n\nThere\u0027s also nothing here to promote (I\u0027d need to set up some alternate configurations before this is sees any gameplay addition of note) and I\u0027m not comfortable with self promotion anyway. If it interests other people, it will get noticed.\n\n**Edited \u003Ctime datetime=\u00222015-02-19T20:20:44Z\u0022 title=\u002202/19/2015 08:20  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 19, 2015\u003C/time\u003E by Crzyrndm**"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-02-20T00:02:13Z","Content":"It definitely looks like an awesome project... but my brain already hurts from my other worldly rigors... and this isn\u0027t helping that at all. You can take that as high praise, however, considering it takes a lot to mess up my brain.\n\nThat assumes my brain is working right in the first place... they could never fully agree on that topic..."},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-20T00:26:05Z","Content":"Which is somewhat amusing for me because the code doing the \u0022heavy\u0022 lifting is rather simple and straight forward ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"Mekan1k","CreatedById":48750,"CreatedDateTime":"2015-02-20T01:30:32Z","Content":"Does this work with mechjeb?"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-20T01:33:51Z","Content":"Probably is my best guess, but untested. From memory MJ abuses the \u0022timewarp kills rotation\u0022 thing a bit which may not be the greatest idea with this running\n\n**Edited \u003Ctime datetime=\u00222015-02-20T01:37:44Z\u0022 title=\u002202/20/2015 01:37  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 20, 2015\u003C/time\u003E by Crzyrndm**"},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-02-20T07:28:56Z","Content":"Saw some strange behavior during initial use. Launched a rocket to test for a Mun landing. The rocket kept wanting to drift into a spin ccw and sas didn\u0027t seem to want to stabilize it. After getting around 25km I staged and the spinning become uncontrollable. It it just a moderate speed spin that i cant counter sas on or off. I did have some luck after turning the RWs off on the command pod it seemed to not increase in speed. Though it still would not stop spinning. I tried RCS even. \n\nAnother thing was while in game the available torque always read 0 for all axis. It could be a mod interaction as I run 65 mods including DRE and FAR. So maybe some other mods no playing nice. WIll investigate further tomorrow and get logs if anything funny happens. One last thing. I noticed that my log was filled with entries for this mod about available torque and bleed rate. Does that need to be in the log so often? Other than that it seemed to work pretty nicely."},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-02-20T17:04:18Z","Content":"Alright after some more testing today I discovered my previous rotation issue was some parts clipping and causing phantom forces. So that wasn\u0027t this mod. However I think i narrowed down the issue with numbers not being displayed all the time. It seems the stored torque values read 0 until all stages have been staged/activated. I tested as follows. I put a pod with an engine in launch clamps and while locked in I wasn\u0027t able to see stored torque values. Once I staged the clamps I still had not staged the engine, so numbers still read 0. Once I stage the engine and have no more stages left the number read out normally. Other than that it works well hope that can be fixed.\n\n**Edited \u003Ctime datetime=\u00222015-02-20T18:45:40Z\u0022 title=\u002202/20/2015 06:45  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 20, 2015\u003C/time\u003E by Svm420**\n  \ngrammar and spelling before coffee"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-20T18:38:48Z","Content":"\u003E \n\u003E Alright after some more testing today I discovered my previous rotation issue was some parts clipping and causing phantom forces. SO that wasn\u0027t this mod. However I think i narrowed down the issue with numbers not being displayed all the time. It seems the stored torque values read 0 all the time till all stages have been staged. I tested as follows. I made put a pod in launch clamps and while locked in I wasn\u0027t able to see stord torque. Once I staged the clamps I still had not staged the engine. SO numbers still read 0. Once I stage the engine and have no more stages left the number read out normally. Other than that i works well hope that can be fixed.\n\nThanks for the detailed report, makes things much easier to resolve ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-02-20T18:40:31Z","Content":"I actualy wanted to create something like this as I saw that it was relatively easy to modify the strength of a reactor when. Great to see someone does it for me.![:kiss:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif)\n\nNote there are several mods the maintain momentum when accelerating. I suggest you integrate them with this mod.\n\nfor example [Persistent Momentum 1.0 (14 July)](https://forum.kerbalspaceprogram.com/threads/85990-0-23-5-Persistent-Momentum-1-0-%2814-July%29) which still works in 0.90\n\nalso[Timewarp Rotation Fix](https://forum.kerbalspaceprogram.com/threads/67821-Timewarp-Rotation-Fix) should work\n\n**Edited \u003Ctime datetime=\u00222015-02-21T18:43:33Z\u0022 title=\u002202/21/2015 06:43  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 21, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-02-21T06:13:19Z","Content":"\u003E \n\u003E One last thing. I noticed that my log was filled with entries for this mod about available torque and bleed rate. Does that need to be in the log so often?\n\nHad a bunch of crashes today that i never had before. While most likely no 1 mod is to blame as I have a heavy modded game. I think the log spam from this pushed the system over the edge as my logs frequently were 40mb before finally getting a NaN crash. With tons of entries for available torque and bleed rate. Please update at least to tone that down. Had to uninstall for now. Really enjoy the mod though."},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-21T06:18:27Z","Content":"Update is waiting on getting torque decay as a configurable curve rather than the current fixed linear decay. Once I get that sorted I\u0027ll push a release ASAP which will include a fix for wheels not being active until staged and remove the log spam.\n\nE: Scratch that. If I can\u0027t get the torque configuration working in the next half hour or so I\u0027ll just hardcode it back to what it is now.\n\n**Edited \u003Ctime datetime=\u00222015-02-21T06:48:46Z\u0022 title=\u002202/21/2015 06:48  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 21, 2015\u003C/time\u003E by Crzyrndm**"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-21T07:07:23Z","Content":"v1.1\n\n- Fixed Reaction wheels requiring staging to activate\n- Removed logging"},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-02-21T18:35:47Z","Content":"Hmm today is actually a bit worse. Now i cant see available torque at all even after all stages have fired. Also just want to make sure I was clear. It isnt that the RWs dont activate till staging just that all the number read 0. Everything works normally just that all the available torque readout are 0. I also had 1 other issue where the RW seemed to stopped functioning. I had just got my rocket up to about 40-50km with FAR. I was trying to set the rocket at 0 pitch but it was like i had run out of torque and it wasn\u0027t being regenerated. No matter what i did I could not control the rocket it was like having no RWs at all. Once I fall back into the atmosphere I am then able to control the rocket. Did anthoer test with my ssto plane and again once outside the atmosphere RWs are useless even if they were enough in atmosphere.\n\nYep the change today made it so RWs do not function in space"},{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2015-02-21T18:43:27Z","Content":"So if available \u0027push\u0027 decreases as the wheels spin faster, does the decay rate increase the faster the wheels are spinning also?\n\nLooks like a good mod. If SQUAD don\u0027t implement this then I\u0027ll add this to my list of mandatory mods (once the bug reports slow down a little)"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-02-21T19:26:34Z","Content":"The mod does no seem to work with me, all variables remain 0. could there be any mods preventing the correct behavior of this mod?\n\n**Edited \u003Ctime datetime=\u00222015-02-21T21:58:28Z\u0022 title=\u002202/21/2015 09:58  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 21, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"klgraham1013","CreatedById":105132,"CreatedDateTime":"2015-02-21T20:10:07Z","Content":"I support this mod."},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-21T21:36:17Z","Content":"\u003E \n\u003E Yep the change today made it so RWs do not function in space\n\n\\*Scratches head\\*\n\nChecks code\n\n\\*looks puzzled\\*\n\nChecks again\n\n\\*shug\\*\n\ntl;dr\n\nWhy they stopped working out of the atmosphere I do not understand. It doesn\u0027t seem to be happening on my current dev version either so I\u0027ll just write it off as something I forgot yesterday.\n\n\u003E \n\u003E So if available \u0027push\u0027 decreases as the wheels spin faster, does the decay rate increase the faster the wheels are spinning also?\n\nOnce I work out how to load float curves (same system as engine ISP/atmo pressure), I\u0027m going to push a lot of stuff onto that so how torque and bleed rates change with saturation will be completely configurable on a per part (and possibly per axis) basis.\n\n\u003E \n\u003E The mod does seem to work with me, all variables remain 0. could there be any mods preventing the correct behavior of this mod?\n\nProbably not. I\u0027m having more issues getting everything to initialise correctly than making the functionality work ![:mad:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif)."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-02-21T21:59:27Z","Content":"Well I removed all mods and the problems still persist. can we download a older version somewhere?"},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-02-21T22:25:29Z","Content":"\u003E \n\u003E \\*Scratches head\\*\n\u003E Checks code\n\u003E \n\u003E \\*looks puzzled\\*\n\u003E \n\u003E Checks again\n\u003E \n\u003E \\*shug\\*\n\u003E \n\u003E tl;dr\n\u003E \n\u003E Why they stopped working out of the atmosphere I do not understand. It doesn\u0027t seem to be happening on my current dev version either so I\u0027ll just write it off as something I forgot yesterday..\n\nAre you saying they are working fine for you in space? If so I\u0027ll start removing mods on my setup to find the conflict. Or if you upload a version with the most recent changes with logging enabled ill look through my log."},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-21T22:45:03Z","Content":"Yup, just wait for an update please. It shouldn\u0027t be too long now that I finally worked out the floatcurve issue"},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-02-21T23:03:56Z","Content":"Sounds good looking forward it. Really like the mod so far!"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-21T23:40:28Z","Content":"Alright, v1.2\n\n- Available Torque is now using a float curve for configurable torque/momentum relationship\n- Bleed rate is now using a float curve for configurable decay/momentum relationship\n- Part forcibly activated (\\*attempt 2\\*)\n- Logging dump once per second to aid debugging with minimal impact on game performance/stability\n\nnote: don\u0027t use torque curve for reducing the torque a wheel is capable of. Other mods won\u0027t be able to see this in the VAB\n\n**Edited \u003Ctime datetime=\u00222015-02-22T00:00:43Z\u0022 title=\u002202/22/2015 12:00  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 22, 2015\u003C/time\u003E by Crzyrndm**"}]}