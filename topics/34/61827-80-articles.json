{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":80,"Articles":[{"CreatedByName":"Darren9","CreatedById":58062,"CreatedDateTime":"2014-11-09T20:54:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ouch\u0022 data-cite=\u0022ouch\u0022\u003E\u003Cdiv\u003ECan anyone target ships via script? it seems broken and I know some of my scripts used to work.\u003Cp\u003Efor instance:\u003C/p\u003E\u003Cp\u003Elist targets in targetobjects.\u003C/p\u003E\u003Cp\u003Eset target to targetobjects[0].\u003C/p\u003E\u003Cp\u003Efails with a vessel (ship) not found\u003C/p\u003E\u003Cp\u003Eeven a direct:\u003C/p\u003E\u003Cp\u003Eset target to vessel(\u0022Miner Vtol\u0022).\u003C/p\u003E\u003Cp\u003Ewill fail. However:\u003C/p\u003E\u003Cp\u003Eset target to body(\u0022Mun\u0022).\u003C/p\u003E\u003Cp\u003Ewill work just fine. Seems like something broke with ship targeting for me. Does anyone else have this problem?\u003C/p\u003E\u003Cp\u003Ealso, I remember I used to be able to switch ships and have kos run on the one I\u0027m not controlling. It seems to turn off telling me it\u0027s lost it\u0027s target. (I initially set it manually.) But if I go back the ship I targeted it still is...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003ESET TARGET TO \u0022name\u0022, works for me. Setting and changing target on an uncontrolled ship gave me problems, I\u0027m pretty poor at kOS though and assumed it was me doing it wrong.\n"},{"CreatedByName":"Trewor007","CreatedById":101021,"CreatedDateTime":"2014-11-09T21:45:12Z","Content":"\n\u003Cp\u003EMy newest problem is, a very shy planet. For some reason KOS does not see Duna and because of that my probe doesn\u0027t know when to stop accelerating. Encounter command and :patches suffix bought have this issue. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://obrazki.elektroda.pl/3865724400_1415569007.jpg\u0022 alt=\u00223865724400_1415569007.jpg\u0022\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-10T00:54:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trewor007\u0022 data-cite=\u0022Trewor007\u0022\u003E\u003Cdiv\u003EMy newest problem is, a very shy planet. For some reason KOS does not see Duna and because of that my probe doesn\u0027t know when to stop accelerating. Encounter command and :patches suffix bought have this issue. \u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Ca href=\u0022http://obrazki.elektroda.pl/3865724400_1415569007.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://obrazki.elektroda.pl/3865724400_1415569007.jpg\u003C/a\u003E\u003C/blockquote\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt think you\u0027re running into this problem:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/252\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/252\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe fix will be out with 0.15, which should be ready \u0022any day now\u0022.\u003C/p\u003E\n"},{"CreatedByName":"IPster","CreatedById":77193,"CreatedDateTime":"2014-11-10T13:17:59Z","Content":"\n\u003Cp\u003EHey, I just started actually trying to use this to fly most of my rockets, and I am having a great time with it.\u003C/p\u003E\u003Cp\u003EHowever, I noticed that ship:angularvel:roll seems to return a value proportional to yaw rate, and ship:angularvel:yaw seem to return roll rate.\u003C/p\u003E\u003Cp\u003EThat little switch-up threw me off for a couple hours while trying to get my raw steering setup to run.\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-10T21:09:53Z","Content":"\n\u003Cp\u003EAlright, I\u0027m trying to create my first simple useful program in kOS. \u003C/p\u003E\u003Cp\u003EThe Goal of the program is to toggle actiongroup 2 (toggle watersplitter) when the ships power get\u0027s below 10000 and toggle it again when power gets above 10000. The program should run until I turn off the core.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET WaterSplitterActive TO TRUE.\u003Cbr\u003E\u003Cbr\u003EUNTIL FALSE \u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003EWHEN WaterSplitterActive = TRUE AND SHIP:ELECTRICCHARGE \u0026lt; 10000 THEN {\u003Cbr\u003EToggle AG2.\u003Cbr\u003ESET WaterSplitterActive TO FALSE.\u003Cbr\u003EPRESERVE. }.\u003Cbr\u003E\u003Cbr\u003EWHEN WaterSplitterActive = FALSE  AND SHIP:ELECTRICCHARGE \u0026gt; 10000 THEN {\u003Cbr\u003ETOGGLE AG2.\u003Cbr\u003ESET WaterSplitterActive to TRUE. \u003Cbr\u003EPRESERVE. }\u003Cbr\u003E\u003Cbr\u003E  WAIT 0.001.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt doesn\u0027t appear to have any effect when I run the program (no error message and its waiting).\u003C/p\u003E\u003Cp\u003ESo what am I doing wrong?\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003EObviously, I seem to be using WHEN .. THEN in a wrong manner, I replaced them by a simple IF .. ELSE\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESET WaterSplitterActive TO TRUE.\u003Cbr\u003E\u003Cbr\u003EUNTIL FALSE\u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003EIF WaterSplitterActive = TRUE AND SHIP:ELECTRICCHARGE \u0026lt; 10000 {\u003Cbr\u003Eprint \u0022Deactivating Watersplitter\u0022.\u003Cbr\u003EToggle AG2.\u003Cbr\u003ESET WaterSplitterActive TO FALSE.\u003Cbr\u003E }.\u003Cbr\u003E\u003Cbr\u003EIF WaterSplitterActive = FALSE  AND SHIP:ELECTRICCHARGE \u0026gt; 10000 {\u003Cbr\u003Eprint \u0022Activating Watersplitter\u0022.\u003Cbr\u003ETOGGLE AG2.\u003Cbr\u003ESET WaterSplitterActive to TRUE.\u003Cbr\u003E}\u003Cbr\u003E.\u003Cbr\u003E\u003Cbr\u003E  WAIT 0.001.\u003Cbr\u003E}.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ethis one does seem to work at intended. Still I wish to understand how to use WHEN .. THEN correctly\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-11T09:14:13Z\u0022 title=\u002211/11/2014 09:14  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 11, 2014\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"madlemur","CreatedById":116597,"CreatedDateTime":"2014-11-10T21:33:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022FreeThinker\u0022 data-cite=\u0022FreeThinker\u0022\u003E\u003Cdiv\u003EAlright, I\u0027m trying to create my first useful program in kOS. \u003Cp\u003EThe Goal of the program is to toggle actiongroup 2 (toggle watersplitter) when the ships power get\u0027s below 10000 and toggle it again when power gets above 10000. The program should run until I turn off the core.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET WaterSplitterActive TO TRUE.\u003Cbr\u003E\u003Cbr\u003EUNTIL FALSE \u003Cbr\u003E{\u003Cbr\u003E\u003Cbr\u003EWHEN WaterSplitterActive = TRUE AND SHIP:ELECTRICCHARGE \u0026lt; 10000 THEN {\u003Cbr\u003EToggle AG2.\u003Cbr\u003ESET WaterSplitterActive TO FALSE.\u003Cbr\u003EPRESERVE. }.\u003Cbr\u003E\u003Cbr\u003EWHEN WaterSplitterActive = FALSE  AND SHIP:ELECTRICCHARGE \u0026gt; 10000 THEN {\u003Cbr\u003ETOGGLE AG2.\u003Cbr\u003ESET WaterSplitterActive to TRUE. \u003Cbr\u003EPRESERVE. }\u003Cbr\u003E\u003Cbr\u003E  WAIT 0.001.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt doesn\u0027t appear to have any effect when I run the program (no error message and its waiting).\u003C/p\u003E\u003Cp\u003ESo what am I doing wrong?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe WHEN clauses are events, not tests. Move them out (and before) the UNTIL loop.\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-10T22:36:11Z","Content":"\n\u003Cp\u003EQUESTION, why doesnt the \u0022UNLOCK STEERING.\u0022 command work after I run \u0022LOCK STEERING TO North.\u0022\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-11-10T23:20:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022FreeThinker\u0022 data-cite=\u0022FreeThinker\u0022\u003E\u003Cdiv\u003EQUESTION, why doesnt the \u0022UNLOCK STEERING.\u0022 command work after I run \u0022LOCK STEERING TO North.\u0022\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIm guessing it is a bug \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Cairan","CreatedById":85361,"CreatedDateTime":"2014-11-11T06:39:53Z","Content":"\n\u003Cp\u003EI\u0027ve had some issues with the throttle I\u0027d like to discuss here while we are on the subject of LOCK ... When I hit the X key prior to a launch to kill the throttle, then activate an ascent script, even if I do\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ELOCK THROTTLE TO 0.\u003Cbr\u003EUNLOCK THROTTLE.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E...I end up with the engine kicking back to life at 50% power... I\u0027ve made a workaround by doing a kill switch of sorts, by doing\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFOR eng IN lseng { // List of engines\u003Cbr\u003E  SET eng:THRUSTLIMIT TO 0.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewhich kinda works... but you have to remember to rekill the engines with the X key and then push back the thrust limit slider to 100 when you regain manual control... So am I the only one with this issue?\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003EI\u0027ve just tried out with my 0.15 compile, and it seems to be gone ... I\u0027ll have to do further tests but right now I am scratching my head on trying to solve some other bugs...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-11T07:02:05Z\u0022 title=\u002211/11/2014 07:02  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 11, 2014\u003C/time\u003E by Cairan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-11T09:32:58Z","Content":"\n\u003Cp\u003EAlright, I\u0027m quite pleased with the fact that I have a functional script. However I want to improve it. Right now I\u0027m using the following script to get my ship current ships power.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESHIP:ELECTRICCHARGE\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHowever, what I really want to know is my ships electriccharge percentage. \u003C/p\u003E\u003Cp\u003EI guess I need to collect this information from all the parts on my ship.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET totalMaximumElectricCharge to 0.\u003Cbr\u003ELIST PARTS FROM SHIP IN partsList.\u003Cbr\u003EFOR part in partsList {\u003Cbr\u003E    FOR resource in part:RESOURCES\u003Cbr\u003E    {\u003Cbr\u003E        IF resource:NAME = \u0022ELECTRICCHARGE\u0022 \u003Cbr\u003E        { \u003Cbr\u003E            SET totalMaximumElectricCharge TO totalMaximumElectricCharge \u002B resource:CAPACITY.\u003Cbr\u003E        }.\u003Cbr\u003E    }.  \u003Cbr\u003E}.\u003Cbr\u003EPRINT \u0022The Maximum ElectricCharge is \u0022 \u002B totalMaximumElectricCharge.\u003Cbr\u003E\u003Cbr\u003ESET electricChargePercentage TO (SHIP:ELECTRICCHARGE / totalMaximumElectricCharge) * 100.\u003Cbr\u003EPRINT \u0022The current Electriccharge percentage is \u0022 \u002B electricChargePercentage.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eperhaps this could work, but it would be helpfull if that was made easier if there was language support to achieve the same with the following code.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESHIP:RESOURCES:ELECTRICCHARGE:CAPACITY\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003EIt appears there is an existing way:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ELIST RESOURCES IN resourcesList.\u003Cbr\u003EFOR resource IN resourcesList {\u003Cbr\u003E\u003Cbr\u003E    if resource:NAME = \u0022ELECTRICCHARGE\u0022\u003Cbr\u003E    {\u003Cbr\u003E         PRINT \u0022Resource \u0022 \u002B resource:NAME \u002B \u0022: value = \u0022 \u002B AMOUNT \u002B\u003Cbr\u003E               \u0022 which is \u0022 \u002B ROUND(100 * resource:AMOUNT / resource:CAPACITY) \u002B \u0022% full.\u0022.\u003Cbr\u003E         BREAK.\u003Cbr\u003E    }.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-11T10:12:10Z\u0022 title=\u002211/11/2014 10:12  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 11, 2014\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Trewor007","CreatedById":101021,"CreatedDateTime":"2014-11-11T11:09:28Z","Content":"\n\u003Cp\u003EHi. My problem is a little bit to complicated for my English level so I\u0027ll explain it with a simple example:\u003C/p\u003E\u003Cp\u003EMy program runs in a infinite loop.\u003C/p\u003E\u003Cp\u003Eat time1 i want to check my latitude. \u003C/p\u003E\u003Cp\u003EI set my latitude from time1 to \u0022x\u0022.\u003C/p\u003E\u003Cp\u003Esome time passes\u003C/p\u003E\u003Cp\u003Eat time2 i want to check my latitude. (again)\u003C/p\u003E\u003Cp\u003EI set my latitude from time2 to \u0022y\u0022.\u003C/p\u003E\u003Cp\u003Ei check the difference in my latitude(x-y).\u003C/p\u003E\u003Cp\u003Ei get a number from it.(lets call it z)\u003C/p\u003E\u003Cp\u003EI dont know if its because of the infinite loop or something different but my \u0022z\u0022 is always 0. For this simple example i know how to make the code run exactly once. I just use, a additional variable and a IF.\u003C/p\u003E\u003Cp\u003Ebut in my real problem (not the example) i want to store latitude, longitude, angle of slope and (after 0.15 update) Karbonite abundance. and not just check them once or twice but a little bit more, and that is:\u003C/p\u003E\u003Cp\u003E A) to much code for a IF method. B)not flexible C) just insane.\u003C/p\u003E\u003Cp\u003EI hope the thing i said have some sense. So my question is:\u003C/p\u003E\u003Cp\u003EHow i can store large amount of data, using as less code as plausible.\u003C/p\u003E\n"},{"CreatedByName":"Cairan","CreatedById":85361,"CreatedDateTime":"2014-11-11T12:05:43Z","Content":"\n\u003Cp\u003EUse lists...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET KarbMap TO LIST().\u003Cbr\u003ESET idx TO 0.\u003Cbr\u003EUNTIL ... {\u003Cbr\u003E  SET KarbMap:ADD TO LIST().\u003Cbr\u003E  SET KarbMap[idx]:ADD TO SHIP:LATITUDE.\u003Cbr\u003E  SET KarbMap[idx]:ADD TO SHIP:LONGTITUDE.\u003Cbr\u003E  SET KarbMap[idx]:ADD TO Slope. // calculated previously...\u003Cbr\u003E  SET KarbMap[idx]:ADD TO KarbQty. // get the value somewhere before this...\u003Cbr\u003E  SET idx TO idx\u002B1.\u003Cbr\u003E}.\u003Cbr\u003E...\u003Cbr\u003EFOR KarbData IN KarbMap {\u003Cbr\u003E  pRINT \u0022Lat \u0022\u002BKarbData[0]\u002B\u0022 Long \u0022\u002BKarbData[1]\u002B\u0022 Slope \u0022\u002BKarbData[2]\u002B\u0022Karbonite concentration:\u0022\u002BKarbData[3].\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E...havent tried this specific code but it should work...\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-11T12:30:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cairan\u0022 data-cite=\u0022Cairan\u0022\u003E\u003Cdiv\u003E\u003Cp\u003Ewhich kinda works... but you have to remember to rekill the engines with the X key and then push back the thrust limit slider to 100 when you regain manual control... So am I the only one with this issue?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo. See: \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/202\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/202\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-11T12:44:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trewor007\u0022 data-cite=\u0022Trewor007\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI dont know if its because of the infinite loop or something different but my \u0022z\u0022 is always 0.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you allowing any time to pass between your two measurements of latitude?\u003C/p\u003E\u003Cp\u003EIn a real computer, it\u0027s physically impossible to have a program instruction finish in literally zero amount of time. Between when the instruction began and when it ended, time had to pass or else the state of the universe (which contains the bits in memory) cannot have changed.\u003C/p\u003E\u003Cp\u003EBut this is a place where the kOS simulated computer is very different from reality.\u003C/p\u003E\u003Cp\u003EThe Unity software that Kerbal Space Program uses simulates the universe by updating things in quantum time. During the tiny slices of time the simulated universe is split into, nothing changes, not your position, not your velocity, and not even the clock. The kOS program runs many instructions between these simulated jumps in time.\u003C/p\u003E\u003Cp\u003EIn order to do something where time has to pass and you have to take a new reading that MUST be at a different time, try doing this in between your \u0027x\u0027 latitude reading and your \u0027y\u0027 latitude reading:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset thisTime to TIME:SECONDS. // record the universe\u0027s current time-stamp.\u003Cbr\u003Eset x to latitude.\u003Cbr\u003Ewait until time:seconds \u0026gt; thisTime // wait until an update in which the time stamp moved.\u003Cbr\u003Eset y to latitude.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENow you will have an x and a y that were taken at different times in the simulation.\u003C/p\u003E\u003Cp\u003ENote, currently kOS runs once every Update(), not once every FixedUpdate(). In simple terms this means it\u0027s tied to your animation framerate instead of being tied to the world\u0027s physics. People with faster framerates may end up running more than one Update() in a row in which the universe has not moved yet.\u003C/p\u003E\u003Cp\u003EIn the past I used to say that doing WAIT 0.001 is sufficient to guarantee that the universe has moved. I was wrong. To really be sure you have to use the timestamp example shown above, just in case you have a fast enough frame rate to do two Updates() back to back before the world of physics has moved.\u003C/p\u003E\u003Cp\u003EIMO, this needs to be addressed in a future update. perhaps we need a simple WAIT UNTIL PHYSICS for when you need to guarantee that a new physics tic has occurred.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-11T12:46:03Z\u0022 title=\u002211/11/2014 12:46  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 11, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003Cbr\u003EI was in github so long I used \u0060\u0060\u0060 instead of [code] tags.\n\u003C/span\u003E\n"},{"CreatedByName":"Trewor007","CreatedById":101021,"CreatedDateTime":"2014-11-11T13:33:32Z","Content":"\n\u003Cp\u003EThank \u003Cstrong\u003ECairan\u003C/strong\u003E this is something i can start working with.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EAre you allowing any time to pass between your two measurements of latitude\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENow when You mention it... there is a high chance the code needs to wait a bit longer.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EI dont know it is a bug, but everytime i use vecdrawargs() my ram usage constantly goes slowly up to 100% and crashes the game.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-11T19:41:02Z\u0022 title=\u002211/11/2014 07:41  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 11, 2014\u003C/time\u003E by Trewor007\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Cairan","CreatedById":85361,"CreatedDateTime":"2014-11-11T20:27:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIMO, this needs to be addressed in a future update. perhaps we need a simple WAIT UNTIL PHYSICS for when you need to guarantee that a new physics tic has occurred.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI concur... And maybe also a physics update trigger... as in WHEN PHYSICS THEN { ... }. which could be transparently internally be something along the lines of (TIME:SECONDS - lastphysicsupdatetime ) \u0026gt;= 0.04 ... where 0.04 is the default physics delta-t, is there a way to query Unity/KSP for this value which we can set in the game settings?\u003C/p\u003E\u003Cp\u003EThinking about it, one could LOCK PHYSICS TO MIN(1,FLOOR((TIME:SECONDS-LASTPHYS) / 0.04 )). which would yield 0 or 1 depending on if a physics update tick has passed or not since the last time LASTPHYS was set to TIME:SECONDS. Then when you get in your loop, the first thing you do is SET LASTPHYS TO TIME:SECONDS.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ESET LASTPHYS TO TIME:SECONDS.\u003Cbr\u003ELOCK PHYSICS TO MIN(1,FLOOR((TIME:SECONDS-LASTPHYS) / 0.04 )).\u003Cbr\u003E...\u003Cbr\u003EWHEN PHYSICS THEN {\u003Cbr\u003E  SET LASTPHYS TO TIME:SECONDS.\u003Cbr\u003E  //stuff that needs to be done at each update tick...\u003Cbr\u003E  PRESERVE.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E...just tested it. It works. 8-)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-11T20:48:05Z\u0022 title=\u002211/11/2014 08:48  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 11, 2014\u003C/time\u003E by Cairan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Trewor007","CreatedById":101021,"CreatedDateTime":"2014-11-12T07:12:47Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eset line0 to duna:position:vec.set line1 to ship:facing:vector.\u003Cbr\u003Eset katprzod to 90-vang(line0,line1).print katprzod at(0,24).\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWith the code above i can now check the slope angle in front and behind my rover. \u003C/p\u003E\u003Cp\u003Ewhat im looking for is a way to build a vector sticking out from the side of my rover and responding to the rovers roll (Q E).\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-11-12T10:10:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cairan\u0022 data-cite=\u0022Cairan\u0022\u003E\u003Cdiv\u003EI concur... And maybe also a physics update trigger... as in WHEN PHYSICS THEN { ... }. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes this would defenetly be helpfull to be forced to use a trigger instead if a WAIT 0.02 in an infinite loop.\u003C/p\u003E\n"},{"CreatedByName":"ouch","CreatedById":76361,"CreatedDateTime":"2014-11-12T10:56:01Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022http://steamcommunity.com/sharedfiles/filedetails/?id=340629493\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://steamcommunity.com/sharedfiles/filedetails/?id=340629493\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EReally? this all the precision you can get out of kerbal? I wanted to make a sky crane but the the position kos tells it to go is way off on where the crate actually is...\u003C/p\u003E\u003Cp\u003EIs there any way to get better precision? The red line represents the 2 positions subtracted one another so I know for a fact that the spot is where the game (or at least kos) says it is. (also, where it stops is where it goes into the terrain.)\u003C/p\u003E\u003Cp\u003EOr is it at least possible to cheat a bit and set the position of the object where the game thinks it is?\u003C/p\u003E\u003Cp\u003ESo after further experimenting I think the position is pointing to where the object would be if it was on the surface of the water... Any one know of a way to actually get an accurate position of an object sitting on a large mountain?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-12T11:55:05Z\u0022 title=\u002211/12/2014 11:55  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 12, 2014\u003C/time\u003E by ouch\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-12T12:54:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ouch\u0022 data-cite=\u0022ouch\u0022\u003E\u003Cdiv\u003E\u003Ca href=\u0022http://steamcommunity.com/sharedfiles/filedetails/?id=340629493\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://steamcommunity.com/sharedfiles/filedetails/?id=340629493\u003C/a\u003E\u003Cp\u003EReally? this all the precision you can get out of kerbal? I wanted to make a sky crane but the the position kos tells it to go is way off on where the crate actually is...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt is impossible to tell what the complaint is without seeing the script code you\u0027re talking about. What were the vectors that you were drawing?\u003C/p\u003E\n"},{"CreatedByName":"ouch","CreatedById":76361,"CreatedDateTime":"2014-11-13T00:54:32Z","Content":"\n\u003Cp\u003Ehere is the code for the vector lines:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESET anArrow2 TO VECDRAWARGS( v(0,0,0),target:position-ship:position, rgb(1,0,0), \u0022Target Heading\u0022, 5.0, true ).\u003Cbr\u003E\u003Cbr\u003ESET anArrow3 TO VECDRAWARGS( v(0,0,0),(-1*ship:velocity:surface), rgb(0,0,1), \u0022Surface Velocity\u0022, 5.0, true ).\u003Cbr\u003E\u003Cbr\u003ESET anArrow4 TO VECDRAWARGS( v(0,0,0),target:direction:vector, rgb(1,1,0), \u0022Target Direction\u0022, 5.0, true ).\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ethese run forever in an \u0022until abort\u0022 loop. And ignore the label on the red one, it was the heading, I just quickly replaced the target heading with the position subtraction to see where the game was telling my craft to go.\u003C/p\u003E\u003Cp\u003EAnd the green one was an experimental path finding vector that didn\u0027t work out.\u003C/p\u003E\u003Cp\u003Eit\u0027s also worth noting that when I used jeb to push the box the line followed it\u0027s movements precisely, which leads me to believe it\u0027s either pointing at a spot at water level or something else entirely...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-13T00:57:03Z\u0022 title=\u002211/13/2014 12:57  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 13, 2014\u003C/time\u003E by ouch\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-13T01:45:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ouch\u0022 data-cite=\u0022ouch\u0022\u003E\u003Cdiv\u003Ehere is the code for the vector lines:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESET anArrow2 TO VECDRAWARGS( v(0,0,0),target:position-ship:position, rgb(1,0,0), \u0022Target Heading\u0022, 5.0, true ).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere were some problems with this but I\u0027d fixed it in a code commit supposedly merged in on Sept 18. Are you on version 0.14.2?\u003C/p\u003E\n"},{"CreatedByName":"ouch","CreatedById":76361,"CreatedDateTime":"2014-11-13T02:34:57Z","Content":"\n\u003Cp\u003Eyep the version file says it\u0027s 14.2.\u003C/p\u003E\u003Cp\u003Ecome to think of it here, this might help you track down the issue:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eclearscreen.\u003Cbr\u003Elist targets.\u003Cbr\u003Elist targets in tar.\u003Cbr\u003Eset arrows to list().\u003Cbr\u003Eset x to 0.\u003Cbr\u003Efor t in tar\u003Cbr\u003E{\u003Cbr\u003E    SET arrows:add TO VECDRAWARGS(v(0,0,0), t:direction:vector, rgb(1,0,0), t:name, 5.0, true).\u003Cbr\u003E}\u003Cbr\u003Efor t in tar\u003Cbr\u003E{\u003Cbr\u003E    set target to t:name.\u003Cbr\u003E    set arrows[x]:vector to t:direction:vector.\u003Cbr\u003E    set arrows[x]:color to rgb(0,1,0).\u003Cbr\u003E    set arrows[x]:scale to 10.\u003Cbr\u003E\u003Cbr\u003E    //SET pointything TO VECDRAWARGS(v(0,0,0), t:direction:vector, rgb(0,1,0), t:name, 10.0, true).\u003Cbr\u003E    wait 2.\u003Cbr\u003E    set arrows[x]:vector to t:direction:vector.\u003Cbr\u003E    set arrows[x]:color to rgb(1,0,0).\u003Cbr\u003E    set arrows[x]:scale to 5.\u003Cbr\u003E    set x to x \u002B 1.\u003Cbr\u003E}.\u003Cbr\u003Efor arrow in arrows\u003Cbr\u003E{\u003Cbr\u003E    set arrow to \u0022\u0022.\u003Cbr\u003E}.\u003Cbr\u003Eset arrow to arrows:clear.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ecreates red arrows pointing at each target, and the cycles through them making the arrow green and larger 2 seconds at a time. I made it when I was having issues targeting stuff but might come in handy for this.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-13T03:12:16Z\u0022 title=\u002211/13/2014 03:12  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 13, 2014\u003C/time\u003E by ouch\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-13T11:11:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ouch\u0022 data-cite=\u0022ouch\u0022\u003E\u003Cdiv\u003Eyep the version file says it\u0027s 14.2.\u003Cp\u003Ecome to think of it here, this might help you track down the issue:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf what you\u0027re reporting is true, it certainly does look like a bug I need to look into, as the vecdraw stuff was mostly my fault. I don\u0027t see the effects you\u0027re seeing when I try, but I will try to reproduce the effect when I can. It might require that I get an entire copy of your saved game and craft file to try to mimic the situation as precisely as I can.\u003C/p\u003E\u003Cp\u003EBut, we\u0027re in a race against time to try to get out v0.15 RSN because of an upcoming thing that might interfere with @erendrake\u0027s free time. There are a lot of nice changes in 0.15 that are a shame they\u0027re not out there yet to be used by all the script writers. I promise I\u0027ll take a look at this bug in more detail once v0.15 is out, but at the moment getting v0.15 takes first priority.\u003C/p\u003E\n"},{"CreatedByName":"ouch","CreatedById":76361,"CreatedDateTime":"2014-11-14T06:39:55Z","Content":"\n\u003Cp\u003EYeah there is definitely a problem here.\u003C/p\u003E\u003Cp\u003Etake a look at this:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://cloud-4.steampowered.com/ugc/53243610307866655/3A13CFB12778276D3DA2E6BA7CAEAB881E1EBA07/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://cloud-4.steampowered.com/ugc/53243610307866655/3A13CFB12778276D3DA2E6BA7CAEAB881E1EBA07/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIn this picture I have 3 rovers pointing to the exact position where KOS thinks all objects in the world are.\u003C/p\u003E\u003Cp\u003EAs you can see all 3 rovers thinks Enmy Kerman is in a different position. These positions seem to change depending on the rovers orientation in the world.\u003C/p\u003E\u003Cp\u003EHere is the code each rover is running: (note only the color was changed for each rover.)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eclearscreen.\u003Cbr\u003Elist targets.\u003Cbr\u003Elist targets in tar.\u003Cbr\u003Eset arrows to list().\u003Cbr\u003Eset x to 0.\u003Cbr\u003Efor t in tar\u003Cbr\u003E{\u003Cbr\u003E    SET arrows:add TO VECDRAWARGS(v(0,0,0), t:position-ship:position, rgb(1,0,0), t:name, 1.0, true).\u003Cbr\u003E}\u003Cbr\u003Euntil abort\u003Cbr\u003E{\u003Cbr\u003E    for t in tar\u003Cbr\u003E    {\u003Cbr\u003E        set arrows[x]:vector to t:position-ship:position.\u003Cbr\u003E        set x to x \u002B 1.\u003Cbr\u003E    }.\u003Cbr\u003E    set x to 0.\u003Cbr\u003E}.\u003Cbr\u003Efor arrow in arrows\u003Cbr\u003E{\u003Cbr\u003E    set arrow to \u0022\u0022.\u003Cbr\u003E}.\u003Cbr\u003Eset arrow to arrows:clear.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI know you said you guys are working on new stuff right now but, won\u0027t this throw off orbital projections and well... Just about everything else? Knowing where stuff is, is pretty important...\u003C/p\u003E\u003Cp\u003EDo you guys an updated version of KOS that I can test out for you?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-14T06:54:50Z\u0022 title=\u002211/14/2014 06:54  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 14, 2014\u003C/time\u003E by ouch\u003C/strong\u003E\n\u003C/span\u003E\n"}]}