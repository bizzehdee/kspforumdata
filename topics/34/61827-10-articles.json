{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":10,"Articles":[{"CreatedByName":"kaesekuchen","CreatedById":90011,"CreatedDateTime":"2014-02-19T21:03:40Z","Content":"\n\u003Cp\u003EI have opened up a new issue called \u0022Steering Discussion\u0022 on the github \u003Ca href=\u0022https://github.com/erendrake/KOS/issues/43\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EThis discussion is related to some of the observations and \u0022research\u0022 i have done on orientation/steering. \u003C/p\u003E\u003Cp\u003EInitially inspired to do so by the request of retrieving the current \u0022roll\u0022 value of the ship\u0027s facing.\u003C/p\u003E\u003Cp\u003EComments are as always appreciated \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003Eregards,\u003C/p\u003E\u003Cp\u003Ekaesekuchen\u003C/p\u003E\n"},{"CreatedByName":"Logris","CreatedById":99103,"CreatedDateTime":"2014-02-19T21:13:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BahamutoD\u0022 data-cite=\u0022BahamutoD\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI switched to the ship that detached and tried entering some commands manually. It seems \u0022stage.\u0022 and \u0022sas off.\u0022 and simple toggles like those work, but locking steering or throttle has no effect.\u003C/p\u003E\u003Cp\u003EHow do I get this working?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe locks only last as long as the program is running. \u003C/p\u003E\u003Cp\u003EUnless you have a loop to stop your program ending, then it will stop after the last line and the locks will reset.\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2014-02-19T21:15:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BahamutoD\u0022 data-cite=\u0022BahamutoD\u0022\u003E\u003Cdiv\u003EI installed 0.11 to test it out, but it seems that it\u0027s not working properly for mr\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDid your script stop straight after that? Is that all your script does? Ive found that kos returns throttle to 0 when the script naturally ends. Probably a bug.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-02-19T21:48:56Z","Content":"\n\u003Cp\u003Ehow do i get the dv of a node that was created manually? node:deltav:mag doesn\u0027t work for me.\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003ENevermind, it\u0027s nextnode. All the documentation says \u0022node\u0022. Terrible.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-19T21:54:49Z\u0022 title=\u002202/19/2014 09:54  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 19, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"BahamutoD","CreatedById":72433,"CreatedDateTime":"2014-02-19T22:04:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022togfox\u0022 data-cite=\u0022togfox\u0022\u003E\u003Cdiv\u003EDid your script stop straight after that? Is that all your script does? Ive found that kos returns throttle to 0 when the script naturally ends. Probably a bug.\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Logris\u0022 data-cite=\u0022Logris\u0022\u003E\u003Cdiv\u003EThe locks only last as long as the program is running. \u003Cp\u003EUnless you have a loop to stop your program ending, then it will stop after the last line and the locks will reset.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI see, I\u0027ll try setting up a loop. However, when it was still attached to the mothership, just typing \u0027lock throttle to 1.\u0027 worked and it stayed locked until i unlocked it.\u003C/p\u003E\u003Cp\u003EThanks\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2014-02-19T22:31:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003ENevermind, it\u0027s nextnode. All the documentation says \u0022node\u0022. Terrible.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf you find a gap in the documentation then feel free to help us all out by updating the documentation. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"BahamutoD","CreatedById":72433,"CreatedDateTime":"2014-02-19T22:41:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BahamutoD\u0022 data-cite=\u0022BahamutoD\u0022\u003E\u003Cdiv\u003EI see, I\u0027ll try setting up a loop. However, when it was still attached to the mothership, just typing \u0027lock throttle to 1.\u0027 worked and it stayed locked until i unlocked it.\u003Cp\u003EThanks\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI did \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Euntil 0{\u003Cbr\u003E   lock throttle to 1.\u003Cbr\u003E   lock steering to up.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand neither the steering nor the throttle were locked on the decoupled ship.\u003C/p\u003E\u003Cp\u003EIt works (even without a loop) when the ship is still attached to the mothership, but after decoupling, all locks are broken and cannot be locked again. I\u0027m sure this worked in at least v0.7... Has anyone else had trouble controlling ships/stages that have decoupled?\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2014-02-19T22:52:10Z","Content":"\n\u003Cp\u003EHaven\u0027t tried what you\u0027re trying, but have you tried setting throttle and steering BEFORE you decouple? It might make a difference somehow.\u003C/p\u003E\u003Cp\u003EYou\u0027ll probably want to deactivate the engine with an action group, set throttle and steering, then use an AG to activate the engine and decouple at the same time. Might work.\u003C/p\u003E\n"},{"CreatedByName":"BahamutoD","CreatedById":72433,"CreatedDateTime":"2014-02-19T23:08:41Z","Content":"\n\u003Cp\u003EYeah, I tried that and the locks became unlocked after decoupling.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2014-02-19T23:47:29Z","Content":"\n\u003Cp\u003EHas anyone noticed that if you manually create a node with only a prograde increase and print nextnode:deltav:mag and nextnode:prograde, those two show lightly different results?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022togfox\u0022 data-cite=\u0022togfox\u0022\u003E\u003Cdiv\u003EIf you find a gap in the documentation then feel free to help us all out by updating the documentation. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell I could but I\u0027m not really in a position to know what\u0027s right and what\u0027s not without playing with it first. It begins with me reading something and then getting frustrated because it doesn\u0027t work as advertised. The best I can do is report bugs, which might turn out to not be bugs at all but obsolete code.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-19T23:50:48Z\u0022 title=\u002202/19/2014 11:50  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 19, 2014\u003C/time\u003E by Cpt. Kipard\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Logris","CreatedById":99103,"CreatedDateTime":"2014-02-20T02:16:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BahamutoD\u0022 data-cite=\u0022BahamutoD\u0022\u003E\u003Cdiv\u003Eand neither the steering nor the throttle were locked on the decoupled ship.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhere is the kOS part? Is it on the decoupled ship or on the mothership?\u003C/p\u003E\u003Cp\u003EIf it\u0027s on the mothership then this would make sense as there is no link once they are decoupled.\u003C/p\u003E\n"},{"CreatedByName":"BahamutoD","CreatedById":72433,"CreatedDateTime":"2014-02-20T03:10:40Z","Content":"\n\u003Cp\u003EIts on the decoupled ship. I\u0027ve done this before in 0.7. I had a Falcon9R replica where the first stage returned while the second stage continued. I know each part that is running a program needs its own kOS part, but its just not working in 0.11.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-02-20T03:30:42Z","Content":"\n\u003Cp\u003EI have had problems in the past where a decoupled SCS part was still able to activate stages on the detached parent ship. When I typed \u0022stage\u0022 on the bit that was decoupled, the next stage of the ship it was no longer attached to was activated. I\u0027m not sure this is kOS\u0027s fault however, because KSP itself has a lot of buggy broken behavior when it comes to staging lists with docking and undocking, so it may be KSP\u0027s fault that the staging list included parts from the detached craft.\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2014-02-20T03:34:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E... When I typed \u0022stage\u0022 on the bit that was decoupled, the next stage of the ship it was no longer attached to was activated...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI bet that caused a few WTF moments. The worst part about things like this is it can take quite some time to work out what exactly is going on because it can be difficult to logically connect the two events sometimes.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-02-20T03:39:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022togfox\u0022 data-cite=\u0022togfox\u0022\u003E\u003Cdiv\u003EI bet that caused a few WTF moments. The worst part about things like this is it can take quite some time to work out what exactly is going on because it can be difficult to logically connect the two events sometimes.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s one of the main reasons I gave up on my attempt to build a kOS orbital missile platform. (The other was the bug, now finally squashed, where half the ship gets deleted when coming back off of rails. That bug made anything in which I intended to run software on the base platform and also on the missile rather impossible to implement. I\u0027d shoot the missile off, have the camera follow it, and then switch focus back to the missle platform and the platform would be mostly missing.)\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-20T03:44:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThe problem with the word \u0022velocity\u0022 isn\u0027t frame of reference (which direction the XYZ axes point and where the origin is). \u003Cp\u003EIm sorry i might have been unclear, right now.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E PRINT SHIP:VELOCITY.\u003C/p\u003E\u003Cp\u003Ereturns the string representation of the orbitalvelocity vector, what i was considering removing was the string that you cannot use as a vector because it is a string, I was thinking instead for structures to return.\u003C/p\u003E\u003Cp\u003E PRINT SHIP:VELOCITY. \u003C/p\u003E\u003Cp\u003E Type: VesselVelocity. Members: ORBIT, SURFACE.\u003C/p\u003E\u003Cp\u003Eso everyone doesnt have to run to the web every time they cannot remember the manyfold members of VesselTarget.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EThe problem is that there\u0027s two types of Vector in the underlying engine, and Velocity isn\u0027t the right datatype (which is why you can\u0027t use the X,Y,Z, or MAG suffixes on it), combined with the fact that this datatype discrepency is 100% masked and hidden from the kos script writer because both types of Vector get printed out the same way and both look like the same datatype to the kos script writer. They are both printed as \u0022V(...,...,...,)\u0022 but one is not the kOS Vector type, but an internal Unity Vector3D type which is missing a lot of the kOS script langauge support to use it properly.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI just want to say that if/when scripters are confronted with the other vector type, that is a bug. I would love for you guys to let me know when that happens because like you say, it is useless for you.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-02-20T03:52:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022J.Random\u0022 data-cite=\u0022J.Random\u0022\u003E\u003Cdiv\u003EAh, that\u0027s what got me confused. If you type \u0060print velocity.\u0060, you will get only the first vector as output (in form of V(double,double,double), it seems), and you won\u0027t be able to do anything with it. velocity:{orbit,surface}:{x,y,z,mag} works, thanks.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis definitely needs fixing. It\u0027s misleading to the script programmer, as it is essentially \u0022lying\u0022 about what the datatype of \u0022Velocity\u0022 really is. Either have it print both the vectors that are inside it, like so:\u003C/p\u003E\u003Cp\u003EOrbit: V(...,...,...) Surface: V(...,...,...)\u0022\u003C/p\u003E\u003Cp\u003EOr have it just print a crpytic \u0022Velocity Object\u0022.\u003C/p\u003E\u003Cp\u003EBut making it look like it\u0027s a vector when it\u0027s not is going to confuse.\u003C/p\u003E\u003Cp\u003EAnd actually, that brings to mind an interesting question:\u003C/p\u003E\u003Cp\u003EShould there be a generic toString() for all structure objects like Velocity, that always does something like what I suggested above? Just make it so that all structure objects always will, when converted to a string, dump their component parts recursively.\u003C/p\u003E\u003Cp\u003EFor any such structure object, have it do this as it\u0027s toString:\u003C/p\u003E\u003Cp\u003EFor each component inside me, do:\u003C/p\u003E\u003Cp\u003E append the name of the component, then a \u0022 : \u0022, then append that component\u0027s toString.\u003C/p\u003E\u003Cp\u003EThus a Velocity prints as:\u003C/p\u003E\u003Cp\u003E\u0022ORBIT: V(..., ..., ...) SURFACE: V(...,...,...)\u0022\u003C/p\u003E\u003Cp\u003Ewhile a SENSORS prints as:\u003C/p\u003E\u003Cp\u003E\u0022ACC: V(..., ..., ...) PRES 99.9999 TEMP 99.999 GRAV V(..., ..., ...)\u0022\u003C/p\u003E\u003Cp\u003EAnd so on.\u003C/p\u003E\u003Cp\u003EIt\u0027s not pretty and you probably wouldn\u0027t want to use these strings for much of anything to display to the user, but the point it it\u0027s VERY instructive to the script writer what\u0027s really going on, and besides these are cases where you probably shouldn\u0027t be writing script code that prints these things direct to the user anyway. (So there\u0027s no harm in making the toString more instructive for debugging and learning purposes.)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-20T03:56:17Z\u0022 title=\u002202/20/2014 03:56  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 20, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-02-20T04:18:32Z","Content":"\n\u003Cp\u003EI tried looking at how I\u0027d make a docking program using the new release and the first thing I came up with as a potential snag is this:\u003C/p\u003E\u003Cp\u003EIs there support yet for selecting a certain part on the other vessel as your target, rather than targeting just its center of mass? I refer of course to the way you can, when manually playing KSP, rightclick a docking port of the other vessel and pick that docking port as your target rather than the center of the vessel as your target. Without that I can still make a docking script provided I\u0027m docking to a port that is lined up with the vessel\u0027s center of mass, and I stipulate that the docking script must make sure it gets lined up more than N meters away from the target, where N is the distance from the center of the ship to its docking port.\u003C/p\u003E\u003Cp\u003EOtherwise the deflection in angle between the center of the target vessel and its docking port becomes too large once you get close to it. If you try to line up by sliding sideways while too close to it, that difference in angle will mess the script up. But if you get lined up while still far away from it so the center of the vessel and it\u0027s docking port are in line with each other, then that difference won\u0027t be relevant.\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-20T04:29:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIt\u0027s not pretty and you probably wouldn\u0027t want to use these strings for much of anything to display to the user, but the point it it\u0027s VERY instructive to the script writer what\u0027s really going on, and besides these are cases where you probably shouldn\u0027t be writing script code that prints these things direct to the user anyway. (So there\u0027s no harm in making the toString more instructive for debugging and learning purposes.)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI agree, lets make a ticket and figure out exactly what we want.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/erendrake/KOS/issues/44\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/erendrake/KOS/issues/44\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-20T04:33:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI tried looking at how I\u0027d make a docking program using the new release and the first thing I came up with as a potential snag is this:\u003Cp\u003EIs there support yet for selecting a certain part on the other vessel as your target, rather than targeting just its center of mass? I refer of course to the way you can, when manually playing KSP, rightclick a docking port of the other vessel and pick that docking port as your target rather than the center of the vessel as your target. Without that I can still make a docking script provided I\u0027m docking to a port that is lined up with the vessel\u0027s center of mass, and I stipulate that the docking script must make sure it gets lined up more than N meters away from the target, where N is the distance from the center of the ship to its docking port.\u003C/p\u003E\u003Cp\u003EOtherwise the deflection in angle between the center of the target vessel and its docking port becomes too large once you get close to it. If you try to line up by sliding sideways while too close to it, that difference in angle will mess the script up. But if you get lined up while still far away from it so the center of the vessel and it\u0027s docking port are in line with each other, then that difference won\u0027t be relevant.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt isnt in yet, if you look at the Docking milestone there are quite a few things i wanted for this release that i havent finished yet, and this is one of them. I am pretty tempted to release this direct flight part and let everyone find bugs while i work on the rest of the docking features. What do you think?\u003C/p\u003E\n"},{"CreatedByName":"unWinged","CreatedById":50597,"CreatedDateTime":"2014-02-22T11:50:53Z","Content":"\n\u003Cp\u003EI have problem with setting node to apoapsis. I try to do it with code below:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eset Ncirc to node(time \u002B eta:apoapsis, 0, 0, 400).\u003Cbr\u003Eadd Ncirc.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIIRC it worked in 0.10, but now it returns error saying that time \u002B eta:apoapsis is not a number. I narrowed it down to time being not a number, although when I try to print it it shows a number...\u003C/p\u003E\u003Cp\u003ECan someone help me how to do this?\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-02-22T17:10:36Z","Content":"\n\u003Cp\u003ETry time:seconds\u003C/p\u003E\n"},{"CreatedByName":"unWinged","CreatedById":50597,"CreatedDateTime":"2014-02-22T19:54:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Agathorn\u0022 data-cite=\u0022Agathorn\u0022\u003E\u003Cdiv\u003ETry time:seconds\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat works :-) thanks!\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-02-23T01:07:16Z","Content":"\n\u003Cp\u003EDoes anyone know a good resource for solving this messy math problem?\u003C/p\u003E\u003Cp\u003EGivens:\u003C/p\u003E\u003Cp\u003E1. All the shape parameters of your current orbit, which in turn tells you how fast you\u0027d be going at periapsis were it not for the atmosphere.\u003C/p\u003E\u003Cp\u003E2. The mass and radius of the body, and all its atmospheric qualities.\u003C/p\u003E\u003Cp\u003E3. A desired amount of speed I\u0027d like to lose at periapsis.\u003C/p\u003E\u003Cp\u003EFind:\u003C/p\u003E\u003Cp\u003E \u0022What altitude should I dip my periapsis to so that when I dip into the atmosphere I will lose the desired amount of speed, no more, no less.\u0022\u003C/p\u003E\u003Cp\u003EI already know how to calculate the amount of force caused by drag, given the altitude (which determines air density), the craft\u0027s drag numbers (usually 0.2), and the current speed.\u003C/p\u003E\u003Cp\u003EThe really hairy part is that all of those things are constantly changing during the aerobraking maneuver and they depend on each other. The drag force is constantly changing as you change altitude, and as you slow down the drag force lessens. Because of the slowing down even the shape itself of the path through the air is not simply straddling the periapsis symmetrically, as you will spend more time in air after periapsis than before it because the slowing down altered your path during the aerobraking.\u003C/p\u003E\u003Cp\u003EThe math has a messy amount of self-affecting feedback loops in it. Presumably I could work out the integral of the deceleration the air causes throughout the breaking maneuver, to get the total change in velocity, but the velocity itself changes the amount of deceleration the air provides, and it\u0027s that feedback into the equation that I can\u0027t quite figure out how to work out.\u003C/p\u003E\u003Cp\u003EMy math coursework in college went through calculus and just into the very beginnings of differential equations before I stopped (because I decided to pursue compsci instead of physics). I get the strong impression that this messy situation is exactly the sort of thing that differential equations would do.\u003C/p\u003E\u003Cp\u003EI don\u0027t need the math to be calculated on the fly by the vessel\u0027s kOS code. Precalcuating something in a lookup table and having the code interpolate from the lookup table is fine. I just need to be careful to always brake enough to be captured, but not so much as to kill the orbit and fall in, and then I can adjust from there to the specific orbit I want after the first pass through the atmosphere.\u003C/p\u003E\n"},{"CreatedByName":"ElasticRaven","CreatedById":25316,"CreatedDateTime":"2014-02-23T01:19:09Z","Content":"\n\u003Cp\u003EDrag is nonlinear, so I think you\u0027ll have to solve it numerically. There are calculators online for it, like \u003Ca href=\u0022http://alterbaron.github.io/ksp_aerocalc\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://alterbaron.github.io/ksp_aerocalc\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EIf we could get a closed form solution, KSP might be able to handle ships in an atmosphere while keeping them on rails \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}