{"TopicId":84504,"ForumId":34,"TopicTitle":"[old thread] Trajectories : atmospheric predictions","CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2014-09-13T15:42:57Z","PageNum":20,"Articles":[{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2014-12-21T16:44:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cydonian Monk\u0022 data-cite=\u0022Cydonian Monk\u0022\u003E\u003Cdiv\u003ESo, working through this....\u003Cp\u003EFeel free to use the above code snippets however you like.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI love you, guys. I copied your code verbatim. Can we keep up this little collaboration of ours? That would be really awesome.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cydonian Monk\u0022 data-cite=\u0022Cydonian Monk\u0022\u003E\u003Cdiv\u003EThe \u0022problem\u0022 at that point becomes one of feedback to the user, who probably just wants to know why their trajectory isn\u0027t being displayed. A simple message in either the Trajectories window or an on-screen message might be enough to fix that.\u003C/div\u003E\u003C/blockquote\u003E I did just that, in \u003Ca href=\u0022https://github.com/fat-lobyte/KSPTrajectories/commit/8fc32aaf9538c9c3d4fcf65ef229287bb47192b2\u0022 rel=\u0022external nofollow\u0022\u003E8fc32aa\u003C/a\u003E. Thanks for the hint. Also, \u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Youen\u0022 data-cite=\u0022Youen\u0022\u003E\u003Cdiv\u003EI\u0027m not sure to understand what you mean here. Body-fixed mode only changes how the trajectory is displayed (relative to the rotating frame of the body, instead of the inertial frame), but doesn\u0027t change the impact position (indicated by the red cross which is at the same place in both cases).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, I must have mistaken something. Sorry for the confusion\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Youen\u0022 data-cite=\u0022Youen\u0022\u003E\u003Cdiv\u003EMaybe would be worth waiting for it to work with FAR before releasing on AVC and Kerbal Stuff ? (people can still download version 1.1 on github in the meantime).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECertainly! I just hope I can fix that. Complete game freeze is hard to debug :S\u003C/p\u003E\u003Cp\u003EI uploaded the new version. It should work fine for Stock now, I hope. Be sure to report all problems.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/fat-lobyte/KSPTrajectories/releases/download/v1.1.0.0-pre3/Trajectories-1.1.0.0-pre.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/fat-lobyte/KSPTrajectories/releases/download/v1.1.0.0-pre3/Trajectories-1.1.0.0-pre.zip\u003C/a\u003E \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022theersink\u0022 data-cite=\u0022theersink\u0022\u003E\u003Cdiv\u003EHmm that could have been the reason it was freezing with FAR? Worth a shot.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m afraid not \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cblockquote\u003EAll hail the \u003Ca href=\u0022https://www.jetbrains.com/decompiler/\u0022 rel=\u0022external nofollow\u0022\u003Edisassembler\u003C/a\u003E. Don\u0027t tell squ4d!\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-21T16:47:39Z\u0022 title=\u002212/21/2014 04:47  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 21, 2014\u003C/time\u003E by Kobymaru\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"mic_e","CreatedById":60757,"CreatedDateTime":"2014-12-21T17:27:45Z","Content":"\n\u003Cp\u003E@Kobymaru: To increase the speed of debugging, make sure to remove all unnecessary mods from your GameData folder, and even delete some/most SQUAD assets; that will greatly speed up loading times. Then just sputter debug log messages _everywhere_; you\u0027ll find them in player.log. With a moderate amount of debug messages put in after every test, you should be able to determine the exact line that causes the freeze within 10 or so iterations.\u003C/p\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2014-12-21T18:03:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mic_e\u0022 data-cite=\u0022mic_e\u0022\u003E\u003Cdiv\u003E@Kobymaru: To increase the speed of debugging, make sure to remove all unnecessary mods from your GameData folder,\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the hint. In my Dev-install, I only have blitzy\u0027s toolbar, FAR and the plugin.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mic_e\u0022 data-cite=\u0022mic_e\u0022\u003E\u003Cdiv\u003Eand even delete some/most SQUAD assets\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat are \u0022some/most SQUAD assets\u0022? What can I delete so the game still works?\u003C/p\u003E\n"},{"CreatedByName":"mic_e","CreatedById":60757,"CreatedDateTime":"2014-12-21T18:20:57Z","Content":"\n\u003Cp\u003ETry it yourself... you can always wreak havoc on parts safely, but I think deleting all the interiors works, too. It produces errors and breaks IVA, but if you don\u0027t need that it greatly speeds up loading.\u003C/p\u003E\u003Cp\u003EAlso be sure to use a small plugin that lets you skip the menu and directly jump to the last vessel. This is what I\u0027m using: \u003Ca href=\u0022https://bpaste.net/show/f18cc717d902\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bpaste.net/show/f18cc717d902\u003C/a\u003E edit: Heh, nvm, I even stole that code from this very mod \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-21T18:42:47Z\u0022 title=\u002212/21/2014 06:42  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 21, 2014\u003C/time\u003E by mic_e\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RobotsAndSpaceships","CreatedById":122975,"CreatedDateTime":"2014-12-21T21:24:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kobymaru\u0022 data-cite=\u0022Kobymaru\u0022\u003E\u003Cdiv\u003EThat\u0027s not-so-great news. Your mod was a nice alternative to MechJebs landing predictions.\u003Cp\u003EAnyway, I\u0027m a programmer myself, and I have interest in getting involved with KSP mods. I am a complete Unity/C#/Modding noob however. I wanted to start out easy and contribute to existing mods, but your mod might be a good a starting point as any.\u003C/p\u003E\u003Cp\u003EIf you could stick around a while and give me some pointers, I could try getting it to work for .90. Interested?\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EOk, so I \u003C/p\u003E\u003Cp\u003E - forked your Repo\u003C/p\u003E\u003Cp\u003E - disabled AutomatedTesting and TestAutomation\u003C/p\u003E\u003Cp\u003E - Bumped the version number\u003C/p\u003E\u003Cp\u003E - Recompiled and uploaded to here: \u003Ca href=\u0022https://github.com/fat-lobyte/KSPTrajectories/releases/download/v1.1.0.0-pre1/Trajectories-v1.1.0.0.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/fat-lobyte/KSPTrajectories/releases/download/v1.1.0.0-pre1/Trajectories-v1.1.0.0.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E - Tested it.\u003C/p\u003E\u003Cp\u003EAll seems to work. No crashes, no errors in the log file, all GUI is available and since I figured out that you should check \u0022Body-Fixed mode\u0022, it\u0027s even super-accurate (landed at the KSC after making a deorbit burn at phase angle ~330\u00C3\u201A\u00C2\u00B0) \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t know how this AVC / CKAN busyness all works, but since it\u0027s working nicely, I\u0027d recommend that you upload it so people can make use of it.\u003C/p\u003E\u003Cp\u003EEdit 2: Does not work with Ferram Aerospace yet.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUuhhh, your github page cannot be found.\u003C/p\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2014-12-21T21:50:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022RobotsAndSpaceships\u0022 data-cite=\u0022RobotsAndSpaceships\u0022\u003E\u003Cdiv\u003EUuhhh, your github page cannot be found.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/fat-lobyte/KSPTrajectories/releases/download/v1.1.0.0-pre3/Trajectories-1.1.0.0-pre.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/fat-lobyte/KSPTrajectories/releases/download/v1.1.0.0-pre3/Trajectories-1.1.0.0-pre.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EModerator edit:\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003ESource: \u003C/span\u003E\u003Ca href=\u0022https://github.com/fat-lobyte/KSPTrajectories\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/fat-lobyte/KSPTrajectories\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003ELicense: \u003C/span\u003E\u003Ca href=\u0022https://github.com/fat-lobyte/KSPTrajectories/blob/master/License.txt\u0022 rel=\u0022external nofollow\u0022\u003EMIT\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-21T21:53:06Z\u0022 title=\u002212/21/2014 09:53  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 21, 2014\u003C/time\u003E by Master Tao\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2014-12-21T23:33:40Z","Content":"\n\u003Cp\u003EJust a quick update:\u003C/p\u003E\u003Cp\u003EWith clearing out my Dev Install of KSP as suggested and with that nifty little snippet of mic_e, I was able to spam the log with billions of debug statements.\u003C/p\u003E\u003Cp\u003EHaving done this, I at least figured out the general location of the problem:\u003C/p\u003E\u003Cp\u003EIn Trajectories.Trajectory.AddPatch(), file Trajectory.cs:475 there is a while loop that ominously starts with\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ewhile (true)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis little fella is in fact an infinite loop under conditions where the trajectory meets the atmosphere. Because of that, all of the game locks up and you are left with about 0.05 FPS.\u003C/p\u003E\u003Cp\u003EIt took me long enough to get there and it\u0027s 0:30 over here in Europe, so I didn\u0027t dig much further. In case anyone who reads this has an epiphany, please speak up fast. If not, well, I guess I\u0027ll get digging again tomorrow.\u003C/p\u003E\u003Cp\u003Etl;dr for the Users: There\u0027s a bug when FAR is used and we found it, now we have to fix it. Please Stand By.\u003C/p\u003E\u003Cp\u003Eps.: I never thought I\u0027d make testimonials for Microsoft, but the MSVC# 2013 Prof does turn out to be pretty darn useful:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/hOid5HB.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/hOid5HB.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Epps.: Sorry for spamming the Release thread, but I\u0027m too tired to make a proper Development thread and I want to get it right.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-21T23:40:04Z\u0022 title=\u002212/21/2014 11:40  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 21, 2014\u003C/time\u003E by Kobymaru\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"dtoxic","CreatedById":103573,"CreatedDateTime":"2014-12-21T23:57:20Z","Content":"\n\u003Cp\u003Eon the github page it reads\u003C/p\u003E\u003Cp\u003E\u0022If you try to go from Orbital to Suborbital flight with Trajectories enabled, you will freeze up your game.\u0022\u003C/p\u003E\u003Cp\u003Eis this in general or just with FAR?\u003C/p\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2014-12-22T00:05:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dtoxic\u0022 data-cite=\u0022dtoxic\u0022\u003E\u003Cdiv\u003Eon the github page it reads\u003Cp\u003E\u0022If you try to go from Orbital to Suborbital flight with Trajectories enabled, you will freeze up your game.\u0022\u003C/p\u003E\u003Cp\u003Eis this in general or just with FAR?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust with FAR.\u003C/p\u003E\n"},{"CreatedByName":"Eleven","CreatedById":60502,"CreatedDateTime":"2014-12-22T00:23:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kobymaru\u0022 data-cite=\u0022Kobymaru\u0022\u003E\u003Cdiv\u003EJust with FAR.\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dtoxic\u0022 data-cite=\u0022dtoxic\u0022\u003E\u003Cdiv\u003Eon the github page it reads\u003Cp\u003E\u0022If you try to go from Orbital to Suborbital flight with Trajectories enabled, you will freeze up your game.\u0022\u003C/p\u003E\u003Cp\u003Eis this in general or just with FAR?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFYI, the first time I tried this the game almost locked up on me while in ascent. I double checked all the versions and saw that the FAR-MechJeb extenstions were updated. I reinstalled FAR and it\u0027s MJext, then reinstalled the newest version of Trajectories and all was fine again. MJ and Trajectories still don\u0027t jibe with their landing predictions but at least it didn\u0027t lock up the computer!\u003C/p\u003E\n"},{"CreatedByName":"dtoxic","CreatedById":103573,"CreatedDateTime":"2014-12-22T00:30:04Z","Content":"\n\u003Cp\u003Eok guy\u0027s guess ill wait a bit more \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2014-12-22T00:49:58Z","Content":"\n\u003Cp\u003EInteresting.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eleven\u0022 data-cite=\u0022Eleven\u0022\u003E\u003Cdiv\u003EFYI, the first time I tried this\u003C/div\u003E\u003C/blockquote\u003E What is \u0022this\u0022 and what version has \u0022this\u0022?\u003Cp\u003E Interesting.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eleven\u0022 data-cite=\u0022Eleven\u0022\u003E\u003Cdiv\u003Ethe game almost locked up on me while in ascent.\u003C/div\u003E\u003C/blockquote\u003E What\u0027s \u0022almost\u0022 locking up?\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eleven\u0022 data-cite=\u0022Eleven\u0022\u003E\u003Cdiv\u003EI double checked all the versions and saw that the FAR-MechJeb extenstions were updated.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat were the old versions?\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eleven\u0022 data-cite=\u0022Eleven\u0022\u003E\u003Cdiv\u003EI reinstalled FAR and it\u0027s MJext\u003C/div\u003E\u003C/blockquote\u003E Which version would that be?\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eleven\u0022 data-cite=\u0022Eleven\u0022\u003E\u003Cdiv\u003E, then reinstalled the newest version of Trajectories\u003C/div\u003E\u003C/blockquote\u003E Is that 1.0.0 from CKAN/Kerbalstuff or 1.1.0 from my GitHub page?\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eleven\u0022 data-cite=\u0022Eleven\u0022\u003E\u003Cdiv\u003Eand all was fine again. MJ and Trajectories still don\u0027t jibe with their landing predictions but at least it didn\u0027t lock up the computer!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you saying that if the FAR MechJeb extensions are installed, Trajectories work and are displayed correctly?\u003C/p\u003E\u003Cp\u003EAlso, what\u0027s \u0022don\u0027t jibe with\u0022? Sorry, I\u0027m not a native english speaker.\u003C/p\u003E\n"},{"CreatedByName":"Eleven","CreatedById":60502,"CreatedDateTime":"2014-12-22T01:57:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kobymaru\u0022 data-cite=\u0022Kobymaru\u0022\u003E\u003Cdiv\u003EInteresting. What is \u0022this\u0022 and what version has \u0022this\u0022?\u003Cp\u003E Interesting. What\u0027s \u0022almost\u0022 locking up?\u003C/p\u003E\u003Cp\u003EWhat were the old versions?\u003C/p\u003E\u003Cp\u003E Which version would that be?\u003C/p\u003E\u003Cp\u003E Is that 1.0.0 from CKAN/Kerbalstuff or 1.1.0 from my GitHub page?\u003C/p\u003E\u003Cp\u003EAre you saying that if the FAR MechJeb extensions are installed, Trajectories work and are displayed correctly?\u003C/p\u003E\u003Cp\u003EAlso, what\u0027s \u0022don\u0027t jibe with\u0022? Sorry, I\u0027m not a native english speaker.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPhew. I thought I was being fairly succinct. Guess not! OK, The first time I tried the newly re-compiled Trajectories version 1.1.0.0, with FAR 14.5 and MechJeb dev 366, the first time I hit around 9000meters (I\u0027m guessing) my framerate went down to about 1fps. Every once in a while something I\u0027ve changed will kill the game and that\u0027s how it starts, framerate takes a hit and then the entire laptop locks up. On a side note, I\u0027m running 0.90 in Linux Mint, 64bit. \u003C/p\u003E\u003Cp\u003EAt that point, the FAR MechJeb extensions were not updated. I checked here and saw that Trajectories were updated to 1.1.0.0-pre. I got the same results. Then I checked again and FAR was updated to 14.5.1 and the new FAR MechJeb extensions were out, as well as MJdev371. Combining all three of these new versions I did not get the horrible framerate and everything went as normal. \u003C/p\u003E\u003Cp\u003EAs for \u0027not jibing\u0027 I mean that MechJeb and FAR don\u0027t work well together, even with the FAR extensions. Trajectories does indeed predict correctly, even if MechJeb and FAR cannot get that part right. \u003C/p\u003E\u003Cp\u003ESo..in short, I\u0027m using MJ371, FAR14.5.1, FARext for MJ, and Trajectories 1.1.0.0-pre and I don\u0027t see any performance hits like I used to.\u003C/p\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2014-12-22T02:18:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eleven\u0022 data-cite=\u0022Eleven\u0022\u003E\u003Cdiv\u003EPhew. I thought I was being fairly succinct. Guess not! OK, The first time I tried the newly re-compiled Trajectories version 1.1.0.0, with FAR 14.5 and MechJeb dev 366, the first time I hit around 9000meters (I\u0027m guessing) my framerate went down to about 1fps. Every once in a while something I\u0027ve changed will kill the game and that\u0027s how it starts, framerate takes a hit and then the entire laptop locks up. On a side note, I\u0027m running 0.90 in Linux Mint, 64bit. \u003Cp\u003EAt that point, the FAR MechJeb extensions were not updated. I checked here and saw that Trajectories were updated to 1.1.0.0-pre. I got the same results. Then I checked again and FAR was updated to 14.5.1 and the new FAR MechJeb extensions were out, as well as MJdev371. Combining all three of these new versions I did not get the horrible framerate and everything went as normal. \u003C/p\u003E\u003Cp\u003EAs for \u0027not jibing\u0027 I mean that MechJeb and FAR don\u0027t work well together, even with the FAR extensions. Trajectories does indeed predict correctly, even if MechJeb and FAR cannot get that part right. \u003C/p\u003E\u003Cp\u003ESo..in short, I\u0027m using MJ371, FAR14.5.1, FARext for MJ, and Trajectories 1.1.0.0-pre and I don\u0027t see any performance hits like I used to.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks a lot for the detailed description! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI will play a bit with the Mechjeb FAR extensions tomorrow.\u003C/p\u003E\u003Cp\u003EDid you try to compute trajectories after launch and going up, or did you go from orbital to suborbital? If it was the former, could you try the latter case too, please?\u003C/p\u003E\n"},{"CreatedByName":"Eleven","CreatedById":60502,"CreatedDateTime":"2014-12-22T03:38:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kobymaru\u0022 data-cite=\u0022Kobymaru\u0022\u003E\u003Cdiv\u003EThanks a lot for the detailed description! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EI will play a bit with the Mechjeb FAR extensions tomorrow.\u003C/p\u003E\u003Cp\u003EDid you try to compute trajectories after launch and going up, or did you go from orbital to suborbital? If it was the former, could you try the latter case too, please?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI did not try to compute trajectories going up, but I suspected that it was was causing the framerate drop before I switched to 1.1.0.0-pre. As for landing, while using MJ\u0027s landing function and targetting the KSC, Trajectories correctly predicted the true landing spot, while FAR and MJ kept thinking that the ship was still going to land at the Space Center.\u003C/p\u003E\u003Cp\u003ESo trajectories had it right, but using Far with MechJeb alone, MJ can\u0027t correctly predict the effects that FAR has on entering the atmosphere. But using those 2 in conjunction with Trajectories, it\u0027s easy enough to make corrections to land where I want. \u003C/p\u003E\u003Cp\u003E(So yea, now that the framerate issues seem to be gone, it looks like Trajectories is working as intended for me, while MJ and FAR still need to learn to work together)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-22T03:40:26Z\u0022 title=\u002212/22/2014 03:40  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 22, 2014\u003C/time\u003E by Eleven\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"atomicfury","CreatedById":120037,"CreatedDateTime":"2014-12-22T04:31:44Z","Content":"\n\u003Cp\u003ESo I decided to help and pulled your debug release, slapped in a few extra debug statements around that while loop and ran Trajectories on a Dev install I have. This is KSP 0.90.0, with FAR 0.14.5.1, Hyperedit, toolbar and Mechjeb Dev 366 from a few days ago. I do not have any MechJeb FAR extensions on. It worked with no crashes. So I went to your pre-release version and tried an ascent and re-entry with predictions on ... seemed to work fine. Only thing I noticed is that I needed to correct a little more than I remember to land at KSC. This was a capsule landing. So, I didn\u0027t see any framerate issues and the mod is working.\u003C/p\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2014-12-22T09:41:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eleven\u0022 data-cite=\u0022Eleven\u0022\u003E\u003Cdiv\u003E(So yea, now that the framerate issues seem to be gone, it looks like Trajectories is working as intended for me, while MJ and FAR still need to learn to work together)\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022atomicfury\u0022 data-cite=\u0022atomicfury\u0022\u003E\u003Cdiv\u003ESo I decided to help and pulled your debug release, ... So, I didn\u0027t see any framerate issues and the mod is working.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo you are telling me you don\u0027t have the bug? Because I am still seeing the issue. Could you help me out a bit, please?\u003C/p\u003E\u003Cp\u003E- Download this save file: \u003Ca href=\u0022https://www.dropbox.com/s/h37hkayszuc12pi/persistent.sfs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/h37hkayszuc12pi/persistent.sfs\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E- Make a folder in \u0026lt;KSP-install\u0026gt;/saves/ and copy the persistent.sfs there\u003C/p\u003E\u003Cp\u003E- Start KSP and open said save file\u003C/p\u003E\u003Cp\u003E- Go to tracking station, switch to the only vessel (It\u0027s in LKO)\u003C/p\u003E\u003Cp\u003E- Go to Map view\u003C/p\u003E\u003Cp\u003E- Enable Trajectory display (To make sure: right click to get to the settings, then you have the \u0022Display Trajectory\u0022 checkbox)\u003C/p\u003E\u003Cp\u003E- Enable the Navball and push Z for full throttle. This will put your ships trajectory in the atmosphere.\u003C/p\u003E\u003Cp\u003E- [sometimes everything works. In that case, press escape to go back to the KSC, then go back to the vessel and try again]\u003C/p\u003E\u003Cp\u003E- What happens now?\u003C/p\u003E\u003Cp\u003EOn my end, everything now just locks up.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-22T10:00:05Z\u0022 title=\u002212/22/2014 10:00  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 22, 2014\u003C/time\u003E by Kobymaru\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"atomicfury","CreatedById":120037,"CreatedDateTime":"2014-12-22T12:54:05Z","Content":"\n\u003Cp\u003ESo I did just as you asked - and got the lockup as soon as the orbit hit the atmosphere - I can reproduce what you see.\u003C/p\u003E\u003Cp\u003EThen I tried with a new craft I had working before (mark 1-2 pod, 800 tank, poodle, parachute), orbited and re-entered and I saw a trajectory in atmosphere. Hmmm.\u003C/p\u003E\u003Cp\u003EThen I tried again with a new craft built like yours (oops, I added a parachute). Hyperedit\u0027d it to orbit, then burned retrograde. I saw a trajectory in atmosphere!\u003C/p\u003E\u003Cp\u003ELooking at the VESSEL entries in the savegame, I saw that your \u0022k0\u0022 craft is missing the FAR modules... Which get created when you make a new vessel in FAR.\u003C/p\u003E\u003Cp\u003EThe following is my GUESS at what is happening: If you have a craft that was built without FAR installed, FAR ignores it (?) but then Trajectories comes along at requests FAR data for something w/o FAR modules, and it goes haywire? This would match the behavior Eleven and myself saw.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-12-22T13:19:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022atomicfury\u0022 data-cite=\u0022atomicfury\u0022\u003E\u003Cdiv\u003EThe following is my GUESS at what is happening: If you have a craft that was built without FAR installed, FAR ignores it (?) but then Trajectories comes along at requests FAR data for something w/o FAR modules, and it goes haywire? This would match the behavior Eleven and myself saw.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt does not work like that. When a mod change a part it is changed for both old and new craft. The saved ship don\u0027t get the module because they were not loaded since FAR was installed.\u003C/p\u003E\n"},{"CreatedByName":"Cydonian Monk","CreatedById":69224,"CreatedDateTime":"2014-12-22T15:04:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kobymaru\u0022 data-cite=\u0022Kobymaru\u0022\u003E\u003Cdiv\u003EI love you, guys. I copied your code verbatim. Can we keep up this little collaboration of ours? That would be really awesome.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnything I come across I\u0027ll certainly offer up. Glad I can help! I know little to nothing of the internals of FAR, so... not much I can do for you there.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kobymaru\u0022 data-cite=\u0022Kobymaru\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI did just that, in \u003Ca href=\u0022https://github.com/fat-lobyte/KSPTrajectories/commit/8fc32aaf9538c9c3d4fcf65ef229287bb47192b2\u0022 rel=\u0022external nofollow\u0022\u003E8fc32aa\u003C/a\u003E. Thanks for the hint. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECool. I\u0027ll check that out this evening if I get the chance. Thanks!\u003C/p\u003E\n"},{"CreatedByName":"atomicfury","CreatedById":120037,"CreatedDateTime":"2014-12-22T18:11:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EIt does not work like that. When a mod change a part it is changed for both old and new craft. The saved ship don\u0027t get the module because they were not loaded since FAR was installed.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDumb guess! I checked again and have some more curious behavior that might be a clue. I don\u0027t have time to check the code but...\u003C/p\u003E\u003Cp\u003EI reloaded my save, loaded a craft that had been working, turned on trajectories and it froze right when the path hit the atmosphere.\u003C/p\u003E\u003Cp\u003EI reloaded again, turned OFF trajectories, dipped into the atmosphere (once it hit 4X warp) and then turned ON trajectories, and it worked. Any else able to reproduce this?\u003C/p\u003E\n"},{"CreatedByName":"Eleven","CreatedById":60502,"CreatedDateTime":"2014-12-22T23:42:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kobymaru\u0022 data-cite=\u0022Kobymaru\u0022\u003E\u003Cdiv\u003ESo you are telling me you don\u0027t have the bug? Because I am still seeing the issue. Could you help me out a bit, please?\u003Cp\u003E- Download this save file: \u003Ca href=\u0022https://www.dropbox.com/s/h37hkayszuc12pi/persistent.sfs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/h37hkayszuc12pi/persistent.sfs\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E- Make a folder in \u0026lt;KSP-install\u0026gt;/saves/ and copy the persistent.sfs there\u003C/p\u003E\u003Cp\u003E- Start KSP and open said save file\u003C/p\u003E\u003Cp\u003E- Go to tracking station, switch to the only vessel (It\u0027s in LKO)\u003C/p\u003E\u003Cp\u003E- Go to Map view\u003C/p\u003E\u003Cp\u003E- Enable Trajectory display (To make sure: right click to get to the settings, then you have the \u0022Display Trajectory\u0022 checkbox)\u003C/p\u003E\u003Cp\u003E- Enable the Navball and push Z for full throttle. This will put your ships trajectory in the atmosphere.\u003C/p\u003E\u003Cp\u003E- [sometimes everything works. In that case, press escape to go back to the KSC, then go back to the vessel and try again]\u003C/p\u003E\u003Cp\u003E- What happens now?\u003C/p\u003E\u003Cp\u003EOn my end, everything now just locks up.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBOOM 1fps. Game didn\u0027t actually die, but it was totally unplayable. I was able to uncheck the \u0027display trajectories\u0027 box and it went back to normal again \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI tried again, this time with good old KerbalX and everything is nice and smooth. Must me something with that craft file of yours?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-22T23:58:14Z\u0022 title=\u002212/22/2014 11:58  PM\u0022 data-short=\u00229 yr\u0022\u003EDecember 22, 2014\u003C/time\u003E by Eleven\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"mic_e","CreatedById":60757,"CreatedDateTime":"2014-12-23T03:13:49Z","Content":"\n\u003Cp\u003EIndependent of the actual solution to this problem, you should probably add a counter and emergency abort (printing a big fat warning message) to that while loop. I recall that it has caused lag issues in the past, and it probably will again in the future.\u003C/p\u003E\u003Cp\u003ERegarding the issue: I\u0027ve only taken a short glimpse at the code, but I think the relevant questions are:\u003C/p\u003E\u003Cp\u003E - Will any save file that was created with FAR installed from the beginning cause this issue?\u003C/p\u003E\u003Cp\u003E - Can the issue be reproduced with the old version and KSP 0.25?\u003C/p\u003E\u003Cp\u003E - If not, what change caused things to break?\u003C/p\u003E\n"},{"CreatedByName":"Space Ace","CreatedById":77819,"CreatedDateTime":"2014-12-23T11:22:45Z","Content":"\n\u003Cp\u003ESoo... I tested this as well and the mod \u0022works\u0022\u003C/p\u003E\u003Cp\u003EI don\u0027t get any performance drops but the mod doesn\u0027t work very accurately. on a normal reentry trajectory the course gets plotted but as the craft descents through the atmosphere the landing point keeps getting corrected towards the east and ends up somewhere between the initial X spot and the end of your normal orbital vector. The shallower your reentry and the more aerodynamic your craft the bigger the error.\u003C/p\u003E\u003Cp\u003EI\u0027m aware that you caninfluence this by your angle of attack but it should stay the same if you punch in SAS and lock your rotation, or just be retrograde during atmospheric reentry.\u003C/p\u003E\u003Cp\u003EUsing FAR 14.5.1 and Trajectories 1.1.0-pre.\u003C/p\u003E\u003Cp\u003EI tested this with a rather aerodynamic craft (shuttle) a normal rocket and a makeshift station (5 MK I capsules tricoupled together)\u003C/p\u003E\n"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2014-12-23T11:24:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022atomicfury\u0022 data-cite=\u0022atomicfury\u0022\u003E\u003Cdiv\u003ESo I did just as you asked\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Eleven\u0022 data-cite=\u0022Eleven\u0022\u003E\u003Cdiv\u003EBOOM 1fps. Game didn\u0027t actually die, but it was totally unplayable. I was able to uncheck the \u0027display trajectories\u0027 box and it went back to normal again \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the testing guys!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mic_e\u0022 data-cite=\u0022mic_e\u0022\u003E\u003Cdiv\u003EIndependent of the actual solution to this problem, you should probably add a counter and emergency abort (printing a big fat warning message) to that while loop.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI prefer not to do that, because OP already wrote a nice abort/timeout logic - it just doesn\u0027t work for some reason. Better to fix what\u0027s already there.\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mic_e\u0022 data-cite=\u0022mic_e\u0022\u003E\u003Cdiv\u003E- Will any save file that was created with FAR installed from the beginning cause this issue?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EStrangely enough, yes. I saw missing FAR modules on the craft, and also I\u0027m consistently seeing the behaviour that after loading the save it works the first time, and reloading the vessel so my guess is that there is something wrong with initialization.\u003C/p\u003E\u003Cp\u003E \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mic_e\u0022 data-cite=\u0022mic_e\u0022\u003E\u003Cdiv\u003E- Can the issue be reproduced with the old version and KSP 0.25?\u003C/div\u003E\u003C/blockquote\u003E I don\u0027t know, and I\u0027m not to keen on testing it because that would require taking out the .90 specific code again.\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022mic_e\u0022 data-cite=\u0022mic_e\u0022\u003E\u003Cdiv\u003EIf not, what change caused things to break?\u003C/div\u003E\u003C/blockquote\u003E There\u0027s also the new version of FAR.\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-23T11:57:17Z\u0022 title=\u002212/23/2014 11:57  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 23, 2014\u003C/time\u003E by Kobymaru\u003C/strong\u003E\n\u003C/span\u003E\n"}]}