{"TopicId":67235,"ForumId":34,"TopicTitle":"[1.2.2](Dec10/16) Action Groups Extended: 250 Action Groups, in-flight editing. Now kOS/RemoteTech","CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-03-30T15:52:01Z","PageNum":8,"Articles":[{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-03T17:08:15Z","Content":"\n\u003Cp\u003EDid a test with the modified part.cfg as you suggested, still on that install with FAR and those two vessels in game.\u003C/p\u003E\u003Cp\u003EPossibly there is a change, because while switching from one to the other vessel and back through the map window ingame, the state is conserved. It sure was lost in my main game doing the same.\u003C/p\u003E\u003Cp\u003EHowever, if I go to the space center and then back to the vessels, both lose some of the actionstates. I am now using only stock parts, and have observed that all antennae lose their states (using communotron 16, DTS-M1 on both, and communotron 88-88 on one vessel). Other parts are not affected, be those solar panels, scientific parts, ladders, reaction wheels.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-03T17:16:37Z","Content":"\n\u003Cp\u003EAlright, thanks for everything you\u0027ve done.\u003C/p\u003E\u003Cp\u003EAt this point anything more will have to wait until I get off work and can get on my KSP computer at home (5-6 hours from now).\u003C/p\u003E\u003Cp\u003EI \u003Cem\u003Ethink\u003C/em\u003E I know what is going on. \u003C/p\u003E\u003Cp\u003EFirst, the modified ModuleManager part.cfg should fix the majority of the issues you are seeing as it will allow it to load the parts correctly.\u003C/p\u003E\u003Cp\u003ESecond, I will need to tweak my code to account for the Antenna\u0027s having two ModuleAnimateGeneric partModules, so there are two \u0027Toggle\u0027 actions. It also looks like the GUI displays \u0022Toggle Antenna\u0022, but the name of the action in code is just \u0022Toggle\u0022 so I will have to adjust for this.\u003C/p\u003E\u003Cp\u003EIf I\u0027m right, I should have the fix for this out tonight. (If I\u0027m wrong, who knows, but I will post about it at least.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-03T17:20:01Z\u0022 title=\u002207/03/2014 05:20  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 3, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-03T17:23:54Z","Content":"\n\u003Cp\u003EPerfect \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. I\u0027m happy if what I provided was of any help. If you want me to make some other specific tests, please ask.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-03T17:27:51Z","Content":"\n\u003Cp\u003EHeh, you pretty much provided everything that allowed me to solve this. (Hopefully anyway, at this point I know what the problem to fix is, will do the actual code tonight.)\u003C/p\u003E\u003Cp\u003EMy next test will be tonight when I push Version 1.7b out. At this point you have also shown me how to test the issue on my own machine so the next release should fix it for you as well.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-04T01:47:02Z","Content":"\n\u003Cp\u003EVersion 1.7b Release\u003C/p\u003E\u003Cp\u003E-Update to ModuleManger Version 2 (Version 2.1.5 now included in download).\u003C/p\u003E\u003Cp\u003EOlder versions of ModuleManager should still work but I will not guarantee it.\u003C/p\u003E\u003Cp\u003E-Update part.cfg in download to match one from 3 of my posts ago.\u003C/p\u003E\u003Cp\u003E-No changes to .dll file. (Expect version 1.7c in the next few days for that.)\u003C/p\u003E\u003Cp\u003E@diomedea: I am still unable to replicate either of your issues, even using the Test1.craft file you uploaded. I\u0027ve updated my modulemanager and part.cfg so I\u0027m hopeful that means the first issue is resolved. That still leaves the antenna names though. Can you please grab the \u003Ca href=\u0022https://drive.google.com/file/d/0B6-5UOjSWq7bOUticzBleldzRkk/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Eversion 1.7b .dll with logging enabled here\u003C/a\u003E and then please do the following.\u003C/p\u003E\u003Cp\u003EMake sure you have ModuleManger 2 or newer (pretty sure you have 2.1.5 from our previous conversation.)\u003C/p\u003E\u003Cp\u003EThe part.cfg file in my AGext directory has the lines added from post #174 in this thread. (Again, think you have already done this.)\u003C/p\u003E\u003Cp\u003EBefore starting KSP, make a copy of your persistent.sfs and any .craft files you will use during testing.\u003C/p\u003E\u003Cp\u003ELoad the game and try to cause the issues you are reporting. \u003C/p\u003E\u003Cp\u003EClick the \u0027Edit\u0027 button on the flight window to dump the current state to the output_log.txt file.\u003C/p\u003E\u003Cp\u003ESwitch around vessels and toggle group states and action groups, etc. and remember what happens. Make sure to hit the \u0027Edit\u0027 button when you switch vessels, even if you don\u0027t actually edit anything. The state of the actiongroups is only recorded to the log when you click that button.\u003C/p\u003E\u003Cp\u003EClose KSP and make another copy of your persistent.sfs.\u003C/p\u003E\u003Cp\u003EPost the output_log.txt, both persistent.sfs files and any .craft files for me to download and a description of what happened as you switched vessels. (Behaved as expected, or what kind of errors did you encounter? Toggle State, action groups, etc.)\u003C/p\u003E\u003Cp\u003EAnyone else who is having issues is free to do this same process also.\u003C/p\u003E\u003Cp\u003EThat process will give me all the information I could want to actually figure out what is going on which will hopefully let me lay this to rest.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-04T01:57:45Z","Content":"\n\u003Cp\u003EGoing to test as you suggested above. Will take a bit of time, but will report ASAP.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-04T03:02:38Z","Content":"\n\u003Cp\u003EStill found the same issue, though this time it took a second try through the Space Center for it to show, the first time it seemed all right. \u003C/p\u003E\u003Cp\u003EAll data collected and a description of the tests is \u003Ca href=\u0022https://www.dropbox.com/s/piel20478ruwinj/Test%20AGX%20%2817b%29.zip\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003Ehere\u003C/strong\u003E\u003C/a\u003E, hope that is telling something.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-04T03:08:42Z","Content":"\n\u003Cp\u003EThank you very much for that, it was exactly what I was expecting.\u003C/p\u003E\u003Cp\u003EAnd thank you for jumping through these hoops, I realize it is a hassle and really appreciate it.\u003C/p\u003E\u003Cp\u003EParsing the data now, will edit this post with results as I find them.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003Cp\u003Eedit: Okay. This will require further testing (I\u0027m out of time tonight), but as far as I can tell this is a linked issue between how KSP handles loading PartModules, FAR and AGext.\u003C/p\u003E\u003Cp\u003EMy theory is currently tentative and I have not been able to prove it yet, but if I\u0027m right it has to do with partModule placement. The best fix I can offer for tonight is to change the following line in my part.cfg from:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[*]:FINAL\u003C/pre\u003E\u003Cp\u003E to \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[*]:FOR[AGExt]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENo promises that will fix it, but in theory it will still place my partModule after RemoteTech\u0027s so I don\u0027t break the animations, but before FAR\u0027s partModules so I can start avoiding conflicting with FAR\u0027s modules that get placed in the FINAL pass.\u003C/p\u003E\u003Cp\u003EI\u0027ll try to have something more definite, but I may not get any more time to look at this until Saturday so I figure a possible fix is better then no fix.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-04T03:40:56Z\u0022 title=\u002207/04/2014 03:40  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 4, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-04T03:59:26Z","Content":"\n\u003Cp\u003EThanks for all your work. I will try that change in the part.cfg, of course adding RemoteTech2 to the testing environment to see if it doesn\u0027t break. No need to hurry \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-04T04:15:14Z","Content":"\n\u003Cp\u003EI was able to just check RemoteTech and its part.cfg use the FIRST pass so the part.cfg in my previous post will not break RemoteTech (99% certainty).\u003C/p\u003E\u003Cp\u003EHowever, I still need to make sure my module goes in before FAR\u0027s and I don\u0027t see a way to force that to happen, so we have to get a little convoluted.\u003C/p\u003E\u003Cp\u003EI\u0027m still assuming the issue is PartModule placement, this should fix the problem for good. Change the AGExt part.cfg to as follows (code box shows the entirety of the file):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E@PART[*]:FOR[AGExt]:NEEDS[!FerramAerospaceResearch]\u003Cbr\u003E{\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E      name = ModuleAGExtData\u003Cbr\u003E\tAGXData = Empty\u003Cbr\u003E\tAGXNames = Empty \u003Cbr\u003E\tAGXKeySet = 0\u003Cbr\u003E\tAGXActivated = 0\u003Cbr\u003E\tAGXLoaded = false\u003Cbr\u003E\tAGXGroupStates =\u003Cbr\u003E\tAGXGroupStateNames =\u003Cbr\u003E}\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E@PART[*]:BEFORE[FerramAerospaceResearch]:NEEDS[FerramAerospaceResearch]\u003Cbr\u003E{\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E      name = ModuleAGExtData\u003Cbr\u003E\tAGXData = Empty\u003Cbr\u003E\tAGXNames = Empty \u003Cbr\u003E\tAGXKeySet = 0\u003Cbr\u003E\tAGXActivated = 0\u003Cbr\u003E\tAGXLoaded = false\u003Cbr\u003E\tAGXGroupStates =\u003Cbr\u003E\tAGXGroupStateNames =\u003Cbr\u003E}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf I have my ModuleManager syntax correct, if FAR is not installed, my partModule will install on the FOR[AGExt] pass, if FAR is installed, it will install my partModule in the BEFORE:[FAR] pass and so guarantee my partModule is installed before FAR\u0027s.\u003C/p\u003E\u003Cp\u003EAlso, if the problem is something else, this won\u0027t do anything to fix it. I still have not yet been able to prove it is partModule placement, but it is a pretty strong guess.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-04T04:39:07Z","Content":"\n\u003Cp\u003EThis is just sketchy as a report, but I changed the part.cfg as in your post above (and installed RT2 with the testing environment). Launched the game, as soon as I took control of one vessel, all its antennae closed (animation played). The \u0022red\u0022 actionstate in AGX therefore is in sync. However, I can\u0027t reopen them (possibly due to RT2, if out of range due to those antennae now closed). \u003C/p\u003E\u003Cp\u003EOf course (I bet you already know), AGX changes state to \u0022green\u0022 = active even if Rt2 prevents the action from occurring.\u003C/p\u003E\u003Cp\u003EEDIT 1: the above was quite probably due to RT2. Disabled RT2 plugin while keeping your modified part.cfg, now no animation is played when taking control of a vessel (Animations play fine if commanded by the user). However, no improvement with actionstates with the new .cfg; and, DTS-M1 and Communotron-16 antennae now show to be \u0022locked\u0022, no user control right-clicking on them, nor with using an AG with them. Notable, the communotron 88-88 is unaffected, not locked.\u003C/p\u003E\u003Cp\u003EEDIT 2: tried with the fix at post #184 on my \u0022normal\u0022 game (heavily modded). If I don\u0027t switch vessels, I can escape to Space Center and go back to the same vessel, and actionstates remain consistent. Unfortunately they don\u0027t while switching vessels (I hoped for a moment that did the trick \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-04T15:20:04Z\u0022 title=\u002207/04/2014 03:20  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 4, 2014\u003C/time\u003E by diomedea\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-05T01:45:05Z","Content":"\n\u003Cp\u003EOkay, I got a little time in on this tonight.\u003C/p\u003E\u003Cp\u003EFirst, I\u0027m settling on a part.cfg as follows:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E@PART[*]:FOR[AGExt]\u003Cbr\u003E{\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E      name = ModuleAGExtData\u003Cbr\u003E\tAGXData = Empty\u003Cbr\u003E\tAGXNames = Empty \u003Cbr\u003E\tAGXKeySet = 0\u003Cbr\u003E\tAGXActivated = 0\u003Cbr\u003E\tAGXLoaded = false\u003Cbr\u003E\tAGXGroupStates =\u003Cbr\u003E\tAGXGroupStateNames =\u003Cbr\u003E}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESecond, \u003Ca href=\u0022https://drive.google.com/file/d/0B6-5UOjSWq7bRTNFUDFfVWtoXzA/edit?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehere is the AGExt.dll version 1.7b with even more logging enabled.\u003C/a\u003E Please go ahead and run a test with this installed and then post the output_lot.txt for me please when you get a minute.\u003C/p\u003E\u003Cp\u003ENo rush on this, I won\u0027t get any more time to look at this until tomorrow sometime.\u003C/p\u003E\u003Cp\u003ELastly, I\u0027m starting to get confused what is actually broken.\u003C/p\u003E\u003Cp\u003E1) The on/off state of actiongroups. (Action group name going red/green in the Flight window.) Pretty sure this is broken from your last post.\u003C/p\u003E\u003Cp\u003E2) The assignment of an action to an action group. (Assigning a Solar Panel\u0027s Deploy Panels action to action group #1.) I think this has not had any issues.\u003C/p\u003E\u003Cp\u003E3) Whether an actiongroup is a toggle group or not. (The \u0022Toggle Grp: Yes/No\u0022 button on the main selection window.) I\u0027m not sure here, I think this has had no issues?\u003C/p\u003E\u003Cp\u003E4) Actiongroup visibility in Groups 1 to 5. (Top right corner of Flight Window.) I\u0027m not sure you\u0027ve been testing this, but I don\u0027t recall you reporting an issue with it.\u003C/p\u003E\u003Cp\u003E5) Actiongroup names. (Description text box on main selection window.) This sounds like it is okay.\u003C/p\u003E\u003Cp\u003E6) View group names. (Bottom half of the keyset window.) No reported problems, but I\u0027m not sure you are testing this.\u003C/p\u003E\u003Cp\u003EThank you again for all the help you are giving me on this.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-05T04:56:28Z","Content":"\n\u003Cp\u003EYep. The part.cfg is what I used in the last with my main install, now will use the same with the test install, and with the newest AGExt.dll.\u003C/p\u003E\u003Cp\u003EWhat is actually broken is # 1, the on/off state. (sorry, I was less then clear on that lately). I have a number of parts with each vessel and define AGs for the toggle commands with them. With those AGs I also set the \u0022Toggle Grp: Yes\u0022 and \u0022Group #\u0022 in AGX edit window. \u003C/p\u003E\u003Cp\u003EThese parts start inactive in game, and all AGs with \u0022ToggleGrp:Yes\u0022 set show in red, so they are correct at start. \u003C/p\u003E\u003Cp\u003EWhile in flight, I activate the parts using the AGX AG (that is matched to the toggle command): the part becomes active,and AGX shows that AG in green, so that is correct.\u003C/p\u003E\u003Cp\u003EI leave those parts active, then switch to another vessel, go back to Space Center, or both. When I return to the same vessel, those parts are still active, but the AG set for them shows red (that is the mismatch). \u003C/p\u003E\u003Cp\u003EWith the latest tests, done only with stock parts, only communication antennae exhibit this, the AGs for toggle commands with other parts stay correct.\u003C/p\u003E\u003Cp\u003EHowever, parts with other mods are also affected (with my main install, it happens with scientific parts belonging to SCANsat, Kethane, InterStellar, Extraplanetary LaunchPads; and probably much more).\u003C/p\u003E\u003Cp\u003EWill upload new test results soon.\u003C/p\u003E\u003Cp\u003EEDIT: Tested, results \u003Ca href=\u0022https://www.dropbox.com/s/yn1t2s8b4r1cx6q/Test%20AGX%20%2817b-2%29.zip\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003Ehere\u003C/strong\u003E\u003C/a\u003E. Please note what I put in the test description, this time I switched many times before the issue happened, only came when I reversed the order I was selecting vessels when re-entering flight mode. Can\u0027t say for sure, but in previous tests I selected vessels in casual order; this time I stickied to a pattern and while it was kept, the issue wasn\u0027t showing. (always trying to find what may be happening...)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-05T07:48:34Z\u0022 title=\u002207/05/2014 07:48  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 5, 2014\u003C/time\u003E by diomedea\u003C/strong\u003E\n\u003Cbr\u003Etest results now included\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-06T04:39:39Z","Content":"\n\u003Cp\u003EOkay, the latest test did allow me to figure out what is going on, but it would be tricky to fix.\u003C/p\u003E\u003Cp\u003EThese test also revealed a huge usability issue where if you toggled an action via the right-click menu, my mod did not see it to update.\u003C/p\u003E\u003Cp\u003ESo, time to re-write the entire toggle state logic to both fix the errors that currently exist and allow real time monitoring of part states. I\u0027m already mostly done, but allowing for the necessary bug squashing that has to happen it is still a bit of work.\u003C/p\u003E\u003Cp\u003EI\u0027d like to say I\u0027ll have the next version out tomorrow night, but I\u0027ve never made a release data promise before and I doubt I\u0027ll start now.\u003C/p\u003E\u003Cp\u003ENext version should have this problem squashed for sure though.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-06T05:44:28Z","Content":"\n\u003Cp\u003EYes, I feel monitoring the state of parts will definitely solve that issue. Right-clicking to activate/deactivate them was what I did to re-sync the AGX states till now. I also suspect other methods may exist to indirectly change the state of parts, as the state may be toggleable by other plugins; and those state changes would be lost as well without monitoring.\u003C/p\u003E\u003Cp\u003EOn bug squashing, of course I feel committed to at least help with testing (so to find new bugs and hopefully confirm those squashed).\u003C/p\u003E\u003Cp\u003EAlso, don\u0027t start promising release dates \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. Not even Squad does. It may put you under pressure from your own commitment, so bringing away the pleasure of programming.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-06T19:42:05Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EVersion 1.8 Release\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E1)Rewrite toggle state monitoring code from scratch.\u003C/p\u003E\u003Cp\u003E-Action states are now monitored in real time for all associated actions. \u003C/p\u003E\u003Cp\u003EExample: On a Solar Panel, the Extend, Retract, and Toggle actions will all show red when the panel is retracted and green when the panel is extended.\u003C/p\u003E\u003Cp\u003EWarning: I have to use the on/off logic as presented to me by the creator of the module. There are a few modules that result in the green/red being counter-intuitive. For example the Lock Steering on a wheel. In-game this will show green for steering unlocked and red when the steering is locked, even though the on state that would normally be green is steering locked.\u003C/p\u003E\u003Cp\u003E-This also means you can monitor actions that normally don\u0027t have feedback. For example the \u0022Invert Steering\u0022 has no feed back in game, you have to actually drive to test it. Now if you assign a toggle action to that, this mod will show green for normal and red when the steering is inverted.\u003C/p\u003E\u003Cp\u003E-The weakness is that I have to add each partModule in the code. In version 1.8 all the stock modules are added, I will be adding all the mods I can for release 1.8a tonight or Monday.\u003C/p\u003E\u003Cp\u003E-Note that this is partModules I have to add, not parts. Part packs that do not have dependencies will work with version 1.8 as they only use the stock partModules.\u003C/p\u003E\u003Cp\u003E-This still defaults to off until I can get all the popular mods supported (hopefully only a week or so).\u003C/p\u003E\u003Cp\u003E2) Better handling of ModuleAnimateGeneric to work correctly with parts that have more then one animation.\u003C/p\u003E\u003Cp\u003E-The field I was looking at does not change between animations on the same part. This resulted in my mod thinking there was only a single animation on a part regardless of how many there were. Fixed.\u003C/p\u003E\u003Cp\u003E@diomedea: This is why that communications antenna would often be the only part to have its actions screw up.\u003C/p\u003E\u003Cp\u003EThis should fix all the known issues that I am aware of at the moment.\u003C/p\u003E\u003Cp\u003EAre there any mods specifically people want me to look at to make sure they get added to the toggle state monitoring?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-06T20:42:57Z","Content":"\n\u003Cp\u003EExcellent. Now I have some real work to do checking all my mods have their actionstates correct. Will certainly begin to propose some (my full list of mods is certainly too long).\u003C/p\u003E\u003Cp\u003EI understand you actually need to add partModules; then, could be best to actually show which ones are with parts that don\u0027t have their actions correctly recognized? Or just mentioning mods is enough for you?\u003C/p\u003E\u003Cp\u003EEDIT 1: Yup, version 1.8 works great \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E! All toggle states are recognized correctly. Yes, Reaction wheels (also on command modules) are bit less intuitive, show red when \u0022not operational\u0022 for whatever reason (e.g. lack of charge). Perhaps a different color to show they are enabled but not operating...\u003C/p\u003E\u003Cp\u003EEDIT 2: Mods to be added to toggle state monitoring. The following are currently the most evident to me:\u003C/p\u003E\u003Cp\u003E- \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/80661\u0022 rel=\u0022external nofollow\u0022\u003ESCANsat\u003C/a\u003E (in particular the version 7 under development): has some sensors and adds its own module to parts of other mods: the concerned partmodule is \u0022SCANsat\u0022\u003C/p\u003E\u003Cp\u003E- \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/23979\u0022 rel=\u0022external nofollow\u0022\u003EKethane\u003C/a\u003E: detectors: concerned partmodule is \u0022KethaneDetector\u0022; converters: \u0022KethaneConverter\u0022; generators: \u0022KethaneGenerator\u0022; extractors: \u0022KethaneExtractor\u0022\u003C/p\u003E\u003Cp\u003E- \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/59545\u0022 rel=\u0022external nofollow\u0022\u003EExtraplanetary Launchpads\u003C/a\u003E: multiple parts, seem to use the same partmodules as Kethane\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-06T21:55:04Z\u0022 title=\u002207/06/2014 09:55  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 6, 2014\u003C/time\u003E by diomedea\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-07T03:53:53Z","Content":"\n\u003Cp\u003EVersion 1.8a is out.\u003C/p\u003E\u003Cp\u003ESCANSat and Kethane should now show their toggles correctly.\u003C/p\u003E\u003Cp\u003EExtraplanetary launchpads piggybacks off Kethane and had nothing specific to it.\u003C/p\u003E\u003Cp\u003EI got started on Firespitter, but it has a \u003Cem\u003Elot\u003C/em\u003E of partModules for me to check so I\u0027ve released how far I\u0027ve gotten.\u003C/p\u003E\u003Cp\u003EI also checked FAR and RasterProp Monitor, but neither of them had any toggle actions that I saw.\u003C/p\u003E\u003Cp\u003EShould I dig into FAR some more? Are there things like flaps or spoilers that should be toggles? (Specifically, what part names do I need to be looking at?)\u003C/p\u003E\u003Cp\u003EAlso posted the order I\u0027m going to look at mods for adding the toggle support, there any other mods I missed that you guys would like to see support for?\u003C/p\u003E\u003Cp\u003E@ReactionWheel states: This is a limit of the red/green (off/on) system. If the wheel is working it is green, if not working it is red. I don\u0027t have the option in the current version to display a different color for the wheel being not operational but for different reasons. Note that this is unlikely to change, I\u0027d have to change my entire data structure to do this. Currently each action is current on or off via a boolean, to add a 3rd state (or more) would be a massive undertaking.\u003C/p\u003E\u003Cp\u003ENote that an action group can display yellow in the Flight window, but this means that some of the actions in that group are on and some are off. It is not a 3rd state I could use as you are asking about.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-07T04:02:52Z\u0022 title=\u002207/07/2014 04:02  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 7, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2014-07-07T08:51:43Z","Content":"\n\u003Cp\u003ECertainly you are fast. I won\u0027t be able to test everything as fast as you implement it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E.\u003C/p\u003E\u003Cp\u003EAbout FAR, it adds this partmodule to all concerned parts: \u0022FARControllableSurface\u0022. I can see that module being added to stock parts with \u0022FerramAerospaceResearch.cfg\u0022 file (so, concerned parts are listed in there). Possibly other mods (Procedural Wings? B9?) have their own config to add that FAR partmodule to their parts.\u003C/p\u003E\u003Cp\u003EYes, spoilers should be a toggle (I reckon it is tied to the stock \u0022Brakes\u0022 command by default in FAR). Flaps seem to have 4 different states, probably good to show as active whenever the state is not \u00220\u0022.\u003C/p\u003E\u003Cp\u003EOn Reaction Wheels. Sure I don\u0027t want you to change data structure because of them. After all, the operational state is temporary. But if only red/green is possible to show, then the state to be shown could be better not be the \u0022operational\u0022 state, but what is the state of the toggle enabling torque (no idea what it is called in game, sorry). Would be great if possible to also monitor the operational state (if not with the same AG, as another) but there is no command tied to that to link to an AG. So, if only possible to show a red/green state, that should reflect what the command is (\u0022toggle torque\u0022).\u003C/p\u003E\u003Cp\u003EOf course I was not considering the \u0022mixed\u0022 state shown in yellow. There are no different Reaction Wheels or no different actions with a reaction wheel to monitor together. Unless the operational state could be exposed so to be linked to an AG (but that would require making a new partmodule just for Reaction Wheels).\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-07T13:28:48Z","Content":"\n\u003Cp\u003E@FAR: That is the partModule I need to look at? Will do.\u003C/p\u003E\u003Cp\u003E@Reaction wheels: So change the on/off from showing if the wheel is active or not to showing if the wheel is enabled or not. (So red if the wheel is toggled off, green if the wheel is on even if it can\u0027t function due to electricity shortages.)\u003C/p\u003E\u003Cp\u003EThat makes sense, I just grabbed the \u0027isOperational\u0027 variable and it looks like that does not quite do what I expected.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-09T03:23:31Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EVersion 1.8b Release\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E-Reaction wheels toggle state now only shows off when turned off by the player. If the wheel is not functioning due to a lack of ElectricCharge, the wheel will still show active (green) on the flight window.\u003C/p\u003E\u003Cp\u003E-Finished support for Firespitter, adding FAR and Infernal Robotics toggle state support.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2014-07-11T09:41:21Z","Content":"\n\u003Cp\u003ECerberus got me thinking - would it be possible to define global action keys, letting your mod automatically add specific parts to an action group? Lets say all solar panels toggle on x, all engines on y, all SAS parts on z? (x,y,z being groups in your mod to be defined.)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cerberus738\u0022 data-cite=\u0022Cerberus738\u0022\u003E\u003Cdiv\u003Enot sure about point of control. i have a action key set to disable all torque on all my ships except for 1 reaction wheel on the main module of a station. so any time i dock i just push 0 and all ships/modules docked have their torque turned off. i usually set engines to be shutdown on the same action key that way no silly shift mistakes happen. ha ha. then when i undock i just push 2 and everything turns back on again.\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-11T13:30:11Z","Content":"\n\u003Cp\u003EHmm, as I think you are requesting, that all parts of type \u0022solar panel\u0022 or \u0022engine\u0022 be selected at once is probably not going to happen. It comes back to \u0022what is a solar panel?\u0022 I can answer that question for stock parts, but for all the mod parts out there? I have no way of knowing.\u003C/p\u003E\u003Cp\u003EWhat I can do is add a \u0022select all parts that match\u0022 button so that if you select a solar panel, all solar panels that are the same on the station could be selected at once. This would be limited to part type though, if you selected a 1x6 deployable solar panel and clicked this button, it would only select the 1x6 solar panels on the station. The 2x6 solar panels would not be selected.\u003C/p\u003E\u003Cp\u003EThat has actually been on the things to add list but as it is a pretty minor feature it has kept being pushed off by other stuff.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T03:25:10Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EVersion 1.9 Release\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003ECompile for KSP 0.24 64-bit\u003C/p\u003E\u003Cp\u003EUpdate download to include ModuleManager 2.2.0\u003C/p\u003E\u003Cp\u003EThrottle checking of throttle states from 60 to 3 times a second.\u003C/p\u003E\u003Cp\u003EAdded Interstellar and Tac Life Support toggle monitoring.\u003C/p\u003E\u003Cp\u003ENothing major this time around. No changes were required to make the mod 0.24 compatible so everything should still be the same.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"JeffreyCor","CreatedById":93167,"CreatedDateTime":"2014-07-20T22:02:49Z","Content":"\n\u003Cp\u003EHaving a problem with the names for action groups not saving with the craft. ie, set everything up, save, exit the building, go in and load the craft, all names are gone but the actions remain. Note was using groups 11\u002B for names. I use 1-10 for assignments for Smart Parts \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIn case it helps with this \u003Ca href=\u0022https://www.dropbox.com/s/31f92l1u0cuk9tb/output_log.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/31f92l1u0cuk9tb/output_log.txt\u003C/a\u003E\u003C/p\u003E\n"}]}