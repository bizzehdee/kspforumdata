{"TopicId":51142,"ForumId":34,"TopicTitle":"[1.1.2][1-1-2] May 13-2016 EnvironmentalVisualEnhancements","CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-10-30T04:39:01Z","PageNum":33,"Articles":[{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-12-22T16:51:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bac9\u0022 data-cite=\u0022bac9\u0022\u003E\u003Cdiv\u003EI don\u0027t recommend using non-square textures, to be honest. They are pretty badly managed by the GPU and in worst cases can be automatically converted to a square of a nearest size, thus adding dead weight without actually using it for anything useful. It would be especially a problem with enormous 8k textures many like to use with this mod. I\u0027d recommend either to find a way to use your triplanar with a 1:1 textures, or store multiple texture types in one file.\u003Cp\u003EOn other subject, I think the enormous size of planetary bodies and desire of everyone to, for some reason, have completely unique clouds on every latitude and longitude (creating planet-wide texture atlas instead of a noise-based unrecognizably repeating pattern) makes the current implemementation a bit of a dead end in terms of looks. Clouds will never look good from low orbit with the current approach if raw texture will continue to be used. The problem can be solved, though, if there will be a per-pixel shader that generates visual effect (bunch of cloudy noise, for example) using the texture only as the source mask, never showing the size of actual texels. Then, as the next logical step, it\u0027s possible to ditch the source texture altogether (saving enormous amount of memory), generating the mask from few noise filters like PQS system does. Many games use a similar approach.\u003C/p\u003E\u003Cp\u003EP.S.: I can\u0027t recommend using particle systems for volumetric clouds at all, that approach gives insane overdraw, lighting problems, and clipping problems.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is what the detail and bump map use. This is actually quite common. Once you start getting close, the detail kicks in to make the texture have more definition.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-12-22T16:56:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Bothersome\u0022 data-cite=\u0022Bothersome\u0022\u003E\u003Cdiv\u003EI\u0027m getting a very large output log file generated. Just a short while it got up to 434 megabytes long.\u003Cp\u003EIt is being filled with this type messages...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EClouds: Offset :(0.1, 0.0)\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/ea95e74f6e5f192d/Runtime/ExportGenerated/StandalonePlayer/UnityEngineDebug.cpp Line: 54)\u003Cbr\u003E\u003Cbr\u003EClouds: Offset :(0.6, 0.0)\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/ea95e74f6e5f192d/Runtime/ExportGenerated/StandalonePlayer/UnityEngineDebug.cpp Line: 54)\u003Cbr\u003E\u003Cbr\u003EClouds: Offset :(0.5, 0.0)\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/ea95e74f6e5f192d/Runtime/ExportGenerated/StandalonePlayer/UnityEngineDebug.cpp Line: 54)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh crud... missed a debug print... I\u0027ll fix it now.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-12-22T17:04:14Z","Content":"\n\u003Cp\u003EOk, new release. Fixed the debug statements, changed the detail scale so the patterns don\u0027t show quite as badly.\u003C/p\u003E\n"},{"CreatedByName":"TNM","CreatedById":87785,"CreatedDateTime":"2013-12-22T17:14:25Z","Content":"\n\u003Cp\u003Eautsch no, whatever you did made it terribly worse:\u003C/p\u003E\u003Cp\u003Eit takes now 700mb more memory (edit: RAM) compared to 5-3, client nearly crashed during startup (freezed for 5sec, probably loading stuff), pattern is still there too:\u003C/p\u003E\u003Cp\u003E(6-1)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/47230747/KSP%202013-12-22%2018-09-32-67.jpg\u0022 alt=\u0022KSP%202013-12-22%2018-09-32-67.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-12-22T17:50:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TNM\u0022 data-cite=\u0022TNM\u0022\u003E\u003Cdiv\u003Eautsch no, whatever you did made it terribly worse:\u003Cp\u003Eit takes now 700mb more memory (edit: RAM) compared to 5-3, client nearly crashed during startup (freezed for 5sec, probably loading stuff), pattern is still there too:\u003C/p\u003E\u003Cp\u003E(6-1)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, I reduced memory consumption and fixed the bump texture mapping so that it should tile like this (for real I think)\u003C/p\u003E\n"},{"CreatedByName":"acl8610","CreatedById":92631,"CreatedDateTime":"2013-12-22T20:27:12Z","Content":"\n\u003Cp\u003EThe city lights seem to be floating...\u003C/p\u003E\n"},{"CreatedByName":"bac9","CreatedById":57757,"CreatedDateTime":"2013-12-22T20:38:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rbray89\u0022 data-cite=\u0022rbray89\u0022\u003E\u003Cdiv\u003EThat is what the detail and bump map use. This is actually quite common. Once you start getting close, the detail kicks in to make the texture have more definition.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot really, the detail texture is a simple overlay that leaves the original texture resolution completely obvious and visible (not to mention that current implementation of detail texturing is introducing very noticeable tiling). It works well for stuff like closeups of concrete walls in FPS games, but not for masked clouds. Silhouette detail is the issue here, not the frequency of detail in the filled areas.\u003C/p\u003E\n"},{"CreatedByName":"jrandom","CreatedById":74522,"CreatedDateTime":"2013-12-22T22:08:13Z","Content":"\n\u003Cp\u003EThis latest version causes a 1.3GB increase in memory usage and some massive slowdowns, even at the menu screen.\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2013-12-22T22:11:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jrandom\u0022 data-cite=\u0022jrandom\u0022\u003E\u003Cdiv\u003EThis latest version causes a 1.3GB increase in memory usage and some massive slowdowns, even at the menu screen.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m seeing the same thing. I\u0027ve had to yank this mod to keep the game from crashing at startup now.\u003C/p\u003E\n"},{"CreatedByName":"DasBananenbrot","CreatedById":70900,"CreatedDateTime":"2013-12-22T22:31:47Z","Content":"\n\u003Cp\u003EWell those memory inrease reports kind of scare me.Until this is sorted out I will stick with v5.3\u003C/p\u003E\n"},{"CreatedByName":"Aknar","CreatedById":68073,"CreatedDateTime":"2013-12-22T23:11:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TNM\u0022 data-cite=\u0022TNM\u0022\u003E\u003Cdiv\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/47230747/KSP%202013-12-22%2018-09-32-67.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/47230747/KSP%202013-12-22%2018-09-32-67.jpg\u003C/a\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat is the mod you are using for ressource display on the top right corner?\u003C/p\u003E\n"},{"CreatedByName":"scottholio","CreatedById":67477,"CreatedDateTime":"2013-12-23T00:21:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Aknar\u0022 data-cite=\u0022Aknar\u0022\u003E\u003Cdiv\u003EWhat is the mod you are using for ressource display on the top right corner?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/60227-KSP-Alternate-Resource-Panel\u0022 rel=\u0022external nofollow\u0022\u003EHere you go.\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Bothersome","CreatedById":66869,"CreatedDateTime":"2013-12-23T00:31:50Z","Content":"\n\u003Cp\u003EWhat should I change to make the clouds drift from west to east? It makes no sense to have wind patterns consistently going opposite of the planet\u0027s rotation.\u003C/p\u003E\u003Cp\u003EI\u0027m playing on Real Scale Solar System too, so I might need to know how to change the speed values too. Thanks.\u003C/p\u003E\n"},{"CreatedByName":"KyleofKerbin","CreatedById":96229,"CreatedDateTime":"2013-12-23T00:59:15Z","Content":"\n\u003Cp\u003EOHHHH... that explains why the newest download version says something about Volumetric Clouds! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks! That helps A LOT. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"KyleofKerbin","CreatedById":96229,"CreatedDateTime":"2013-12-23T01:00:10Z","Content":"\n\u003Cp\u003ELOL my above post was as a reply to someone who had replied to my original post. Sorry for any confusion caused. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Sigma52","CreatedById":90369,"CreatedDateTime":"2013-12-23T01:31:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DasBananenbrot\u0022 data-cite=\u0022DasBananenbrot\u0022\u003E\u003Cdiv\u003EWell those memory inrease reports kind of scare me.Until this is sorted out I will stick with v5.3\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESame here, glad i didn\u0027t jump the gun and delete v5.3 to go with the newer version.\u003C/p\u003E\n"},{"CreatedByName":"jrandom","CreatedById":74522,"CreatedDateTime":"2013-12-23T01:54:52Z","Content":"\n\u003Cp\u003EThe first rule of Kerbal Club is -- always keep your previous version of mods in a safe place when installing new one!\u003C/p\u003E\u003Cp\u003EThe actual real first rule of Kerbal Club is -- always make a copy of the stock game first before adding any mods!\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2013-12-23T02:15:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Bothersome\u0022 data-cite=\u0022Bothersome\u0022\u003E\u003Cdiv\u003EWhat should I change to make the clouds drift from west to east? It makes no sense to have wind patterns consistently going opposite of the planet\u0027s rotation.\u003Cp\u003EI\u0027m playing on Real Scale Solar System too, so I might need to know how to change the speed values too. Thanks.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELook in GameData/BoulderCo/Clouds. Edit the file cloudLayers.cfg. If you search for \u0022speed\u0022, you will see sections with x and y values. Change the x values to negatives, and they will go west to east. I found that simply changing the signs from positive to negative gave good results. Changing that value to a larger number will make it move faster, if that\u0027s what you\u0027re looking for.\u003C/p\u003E\n"},{"CreatedByName":"Bothersome","CreatedById":66869,"CreatedDateTime":"2013-12-23T02:46:14Z","Content":"\n\u003Cp\u003EIt is, I just didn\u0027t know if a negative value would work. I had already looked at them but decided not to change them because until I got word that it would be ok.\u003C/p\u003E\u003Cp\u003EThanks. \u003C/p\u003E\u003Cp\u003EBTW I suppose those values are in revolutions per second?\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-12-23T02:55:06Z","Content":"\n\u003Cp\u003ESo I\u0027m working on offering a selection between cubic and spherical mapping. This will be in the next update and should solve all the memory issues, but will of course not look quite as nice.\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2013-12-23T03:44:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Bothersome\u0022 data-cite=\u0022Bothersome\u0022\u003E\u003Cdiv\u003EBTW I suppose those values are in revolutions per second?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t know for sure. I assumed it was movement relative to the surface, since a negative value appeared to cause the clouds to rotate faster than the surface.\u003C/p\u003E\n"},{"CreatedByName":"ddavis425","CreatedById":14725,"CreatedDateTime":"2013-12-23T03:48:49Z","Content":"\n\u003Cp\u003EYeah sorry, I\u0027m staying on 5-3 as well. The memory issues, floating cities, and the fact that the 8k cloud pack doesn\u0027t work with it is what is keeping me away from 6-2. Maybe your fix will help.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-12-23T04:14:14Z","Content":"\n\u003Cp\u003Erbray: bac9 is talking about shader-based procedural noise, not making a single prerendered texture and using that. Totally different thing (and it\u0027s both better looking and saves on memory--especially since KSP is CPU, not GPU, bottlenecked, so shader-side stuff is comparatively cheap).\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-12-23T04:21:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003Erbray: bac9 is talking about shader-based procedural noise, not making a single prerendered texture and using that. Totally different thing (and it\u0027s both better looking and saves on memory--especially since KSP is CPU, not GPU, bottlenecked, so shader-side stuff is comparatively cheap).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, I just started looking into it. I\u0027m a tad afraid it might be too expensive on the GPU. I actually moved a lot into it whenever I can, so If I can shove it in there, I will.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2013-12-24T04:09:14Z","Content":"\n\u003Cp\u003EOk, so I updated the new release. The default is the sphere-mapped shader, with the memory intensive cubic as an option in the common-config. \u003C/p\u003E\u003Cp\u003EAs per Bac9\u0027s suggestion, I\u0027m looking into dynamic cloud textures using perlin noise and still looking into volumetric clouds.\u003C/p\u003E\n"}]}