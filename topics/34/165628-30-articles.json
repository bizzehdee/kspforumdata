{"TopicId":165628,"ForumId":34,"TopicTitle":"[KSP 1.12.x] kOS v1.4.0.0: kOS Scriptable Autopilot System","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2017-09-18T16:56:54Z","PageNum":30,"Articles":[{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-02-12T07:15:13Z","Content":"\n\u003Cp\u003E\nI usualy \u003Cstrong\u003ELock steering to ship:velocity:orbit\u003C/strong\u003E\u00A0(or ship:velocity:surface) rather than use \u003Cstrong\u003Eship:prograde\u003C/strong\u003E\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"danielboro","CreatedById":166078,"CreatedDateTime":"2019-02-12T07:43:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539196\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221549948107\u0022 data-ipsquote-userid=\u0022188222\u0022 data-ipsquote-username=\u0022Xd the great\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Xd the great said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow do you lock prograde?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\ni use\n\u003C/p\u003E\n\u003Cp\u003E\nlock steering to prograde.\n\u003C/p\u003E\n"},{"CreatedByName":"Xd the great","CreatedById":188222,"CreatedDateTime":"2019-02-12T08:55:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539259\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221549957416\u0022 data-ipsquote-userid=\u0022166078\u0022 data-ipsquote-username=\u0022danielboro\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, danielboro said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ni use\n\u003C/p\u003E\n\u003Cp\u003E\nlock steering to prograde.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs in what exactly do i have to type.\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2019-02-12T09:03:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539278\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221549961736\u0022 data-ipsquote-userid=\u0022188222\u0022 data-ipsquote-username=\u0022Xd the great\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, Xd the great said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs in what exactly do i have to type.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u0022lock steering to prograde.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nLiterally, what\u0027s inside the quotes is what you would type in the terminal (or into a script) to lock the steering to orbital prograde (surface prograde would need srfprograde instead of prograde).\n\u003C/p\u003E\n\u003Cp\u003E\nIs there more to your question than that?\n\u003C/p\u003E\n"},{"CreatedByName":"Xd the great","CreatedById":188222,"CreatedDateTime":"2019-02-12T09:07:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539280\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221549962213\u0022 data-ipsquote-userid=\u0022114015\u0022 data-ipsquote-username=\u0022ElWanderer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, ElWanderer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u0022lock steering to prograde.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nLiterally, what\u0027s inside the quotes is what you would type in the terminal (or into a script) to lock the steering to orbital prograde (surface prograde would need srfprograde instead of prograde).\n\u003C/p\u003E\n\u003Cp\u003E\nIs there more to your question than that?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAh thanks.\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-02-12T09:53:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539282\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221549962471\u0022 data-ipsquote-userid=\u0022188222\u0022 data-ipsquote-username=\u0022Xd the great\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, Xd the great said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAh thanks.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI would seriously recommend working through the tutorial on Github.\u00A0 It actually gives you a pretty good idea of the basics and helped me get going when I first started playing with KOS.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://ksp-kos.github.io/KOS/tutorials/quickstart.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ksp-kos.github.io/KOS/tutorials/quickstart.html\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-02-12T19:58:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223538959\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221549924131\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe only thing I can think of is that target *must* be getting changed to something else somewhere, and that change is happening maybe from one physics tic to the next which is why it only happens when you have longer code (that allows a physics tic to happen between setting it and using it).\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe this test might help - put this statement between each line between the setting of target and the line that errors:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\nprint \u0022AAA: target type = \u0022 \u002B print target:typename.\u003Cspan\u003E\uFEFF\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nbut change that AAA to BBB, and CCC, and DDD, etc on each subsequent line so you can tell the lines apart and tell which line of code printed which line of output.\n\u003C/p\u003E\n\u003Cp\u003E\nAt some point in there, the target has to be getting changed to another type, and discovering exactly when that happens might help.\n\u003C/p\u003E\n\u003Cp\u003E\nOnce you have that test set up, and you see where the type gets changed, then try this:\u00A0 Leave the code alone, but change your config:IPU\u003Cspan\u003E\uFEFF\u003C/span\u003E \u003Cspan\u003E\uFEFF\u003C/span\u003Eto other values and try again to see if the place where it changes ends up *moving* when you do that.\u00A0 If changing the IPU causes the change to happen at a *different* line, then that would confirm that its something that happens when a new physics tic starts.\n\u003C/p\u003E\n\u003Cp\u003E\nIf it is something that happens when a new physics tic starts, then that might be a kOS bug, or it could still be a script problem if your script has any triggers like WHEN or ON, or LOCK STEERING, that might execute code between tics and cause Target to change to something else.\u00A0 Either way, narrowing it down will help (either me if it\u0027s kOS, or you if it\u0027s the script) find the cause.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTried running this bit of code\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eclearscreen.\n\nfunction drawvecs{\n\tprint \u0022008: target type = \u0022 \u002B target:typename.\n\tSet TgtVec to VECDRAWARGS( V(0,0,0), target:position, blue, \u0022Target\u0022, 1, true).\n\tprint \u0022009: target type = \u0022 \u002B target:typename.\n\tset TgtForevec to VECDRAWARGS( target:position, ApproachDist*target:portfacing:vector, Green, \u0022Port\u0022, 1, true).\n\tprint \u0022010: target type = \u0022 \u002B target:typename.\n\tSet ReqPath to VECDRAWARGS( V(0,0,0), target:position \u002B ApproachDist*target:portfacing:vector, Yellow, \u0022Path\u0022, 1, true).\n\tprint \u0022011: target type = \u0022 \u002B target:typename.\n\t\n\tSet UpVec to VECDRAWARGS( V(0,0,0), 10*UpVel, White, \u0022Up\u0022, 1, true).\n\tprint \u0022012: target type = \u0022 \u002B target:typename.\n\tSet ForVec to VECDRAWARGS( V(0,0,0), 10*ForVel, White, \u0022Fore\u0022, 1, true).\n\tprint \u0022013: target type = \u0022 \u002B target:typename.\n\tSet SideVec to VECDRAWARGS( V(0,0,0), 10*SideVel, White, \u0022Side\u0022, 1, true).\n\tprint \u0022014: target type = \u0022 \u002B target:typename.\n\t}\n\nSet ApproachDist to 20.\n\nSET KUniverse:ACTIVEVESSEL TO VESSEL(\u0022Docker\u0022).\nSet target to \u0022Agena\u0022.\nwait 1.\nset PortList to target:modulesnamed(\u0022ModuleDockingNode\u0022).\nfor Ports in PortList {\n\tset port to Ports:PART.\n\tprint port:name.\n\tif port:tag = \u0022TgtDockPort\u0022 {\n\t\tset target to port.\n\t\tprint \u0022Docking port targetted\u0022.\n\t}\n } \n\nprint \u0022001: target type = \u0022 \u002B target:typename.\n\nSet shipheading to target:position \u002B ApproachDist*target:portfacing:vector.\nset angle to vang(shipheading,target:position).\nSet MissDist to target:position:mag * sin(angle).\nprint \u0022Missdistance : \u0022 \u002B MissDist.\nprint vang(target:position,-target:portfacing:vector).\nprint \u0022002: target type = \u0022 \u002B target:typename.\nLock Vrel to ship:velocity:orbit-target:ship:velocity:orbit.\nprint \u0022003: target type = \u0022 \u002B target:typename.\nlock shipUp to (ship:facing * R (-90, 0, 0)):vector:normalized.\nprint \u0022004: target type = \u0022 \u002B target:typename.\nLock Upvel to ship:facing:topvector*vdot(ship:facing:topvector,Vrel).\nprint \u0022005: target type = \u0022 \u002B target:typename.\nlock ForVel to ship:facing:forevector*vdot(ship:facing:forevector,Vrel).\nprint \u0022006: target type = \u0022 \u002B target:typename.\nLock SideVel to ship:facing:starvector*vdot(ship:facing:starvector,Vrel).\nprint \u0022007: target type = \u0022 \u002B target:typename.\ndrawvecs().\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nand it worked the first time.\u00A0 So I added in another 20-30 lines of code and it fell over Print 10.\u00A0 Removed the extra lines and it still falls over after Print 10.\n\u003C/p\u003E\n\u003Cp\u003E\nAll 10 say target type = Docking Port and it says\u00A0\u003Cstrong\u003EGET Suffix \u0027PORTFACING\u0027\u00A0not found on object VESSEL(\u0022Agena\u0022)\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI set the config:ipu to 300 and ran it again.\n\u003C/p\u003E\n\u003Cp\u003E\nThis time I got 12 as Docking port and 13 as Vessel before\u00A0\u003Cstrong\u003EGET Suffix \u0027SHIP\u0027\u00A0not found on object VESSEL(\u0022Agena\u0022)\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo it does look like it\u0027s randomly changing the target between ticks.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll give it another go with setting the variable in a loop and see if that doesn\u0027t anything different from using Lock.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFor reference I\u0027m using KOS v 1.1.6.1 and KSP 1.6.1.2401.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit to add..\n\u003C/p\u003E\n\u003Cp\u003E\nChanged the Locks to Sets in a loop for 10 seconds\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eclearscreen.\n\nfunction drawvecs{\n\tprint \u0022008: target type = \u0022 \u002B target:typename.\n\tSet TgtVec to VECDRAWARGS( V(0,0,0), target:position, blue, \u0022Target\u0022, 1, true).\n\tprint \u0022009: target type = \u0022 \u002B target:typename.\n\tset TgtForevec to VECDRAWARGS( target:position, ApproachDist*target:portfacing:vector, Green, \u0022Port\u0022, 1, true).\n\tprint \u0022010: target type = \u0022 \u002B target:typename.\n\tSet ReqPath to VECDRAWARGS( V(0,0,0), target:position \u002B ApproachDist*target:portfacing:vector, Yellow, \u0022Path\u0022, 1, true).\n\tprint \u0022011: target type = \u0022 \u002B target:typename.\n\t\n\tSet UpVec to VECDRAWARGS( V(0,0,0), 10*UpVel, White, \u0022Up\u0022, 1, true).\n\tprint \u0022012: target type = \u0022 \u002B target:typename.\n\tSet ForVec to VECDRAWARGS( V(0,0,0), 10*ForVel, White, \u0022Fore\u0022, 1, true).\n\tprint \u0022013: target type = \u0022 \u002B target:typename.\n\tSet SideVec to VECDRAWARGS( V(0,0,0), 10*SideVel, White, \u0022Side\u0022, 1, true).\n\tprint \u0022014: target type = \u0022 \u002B target:typename.\n\t}\n\nSet ApproachDist to 20.\n\nSET KUniverse:ACTIVEVESSEL TO VESSEL(\u0022Docker\u0022).\nSet target to \u0022Agena\u0022.\nwait 1.\nset PortList to target:modulesnamed(\u0022ModuleDockingNode\u0022).\nfor Ports in PortList {\n\tset port to Ports:PART.\n\tprint port:name.\n\tif port:tag = \u0022TgtDockPort\u0022 {\n\t\tset target to port.\n\t\tprint \u0022Docking port targetted\u0022.\n\t}\n } \n\n\n\n\nprint \u0022001: target type = \u0022 \u002B target:typename.\nSet shipheading to target:position \u002B ApproachDist*target:portfacing:vector.\nset angle to vang(shipheading,target:position).\nSet MissDist to target:position:mag * sin(angle).\nprint \u0022Missdistance : \u0022 \u002B MissDist.\nprint vang(target:position,-target:portfacing:vector).\nprint \u0022002: target type = \u0022 \u002B target:typename.\n\t\nset starttime to time:seconds.\nuntil time:seconds\u0026gt;starttime\u002B10{\t\n\t\n\tset Vrel to ship:velocity:orbit-target:ship:velocity:orbit.\n\tprint \u0022003: target type = \u0022 \u002B target:typename.\n\tset shipUp to (ship:facing * R (-90, 0, 0)):vector:normalized.\n\tprint \u0022004: target type = \u0022 \u002B target:typename.\n\tset Upvel to ship:facing:topvector*vdot(ship:facing:topvector,Vrel).\n\tprint \u0022005: target type = \u0022 \u002B target:typename.\n\tset ForVel to ship:facing:forevector*vdot(ship:facing:forevector,Vrel).\n\tprint \u0022006: target type = \u0022 \u002B target:typename.\n\tset SideVel to ship:facing:starvector*vdot(ship:facing:starvector,Vrel).\n\tprint \u0022007: target type = \u0022 \u002B target:typename.\n\tdrawvecs().\n\n}\n\n\nprint Vrel:mag.\nlock steering to shipheading.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n4 is a docking port, 5 is a vessel but it doesn\u0027t hit anything that causes it to fall over until after 9.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWierd\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-02-12T20:07:58Z\u0022 title=\u002202/12/2019 08:07  PM\u0022 data-short=\u00225 yr\u0022\u003EFebruary 12, 2019\u003C/time\u003E by RizzoTheRat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2019-02-12T20:46:12Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123362\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0022 rel=\u0022\u0022\u003E@RizzoTheRat\u003C/a\u003E Are there any of these in your code which aren\u0027t being shown in the forum?\n\u003C/p\u003E\n\u003Cp\u003E\nON ____ {\u00A0\u00A0\u00A0 }\n\u003C/p\u003E\n\u003Cp\u003E\nWHEN _____ THEN {\u00A0\u00A0 }\n\u003C/p\u003E\n\u003Cp\u003E\nLOCK STEERING TO .....\n\u003C/p\u003E\n\u003Cp\u003E\nLOCK THROTTLE TO ......\n\u003C/p\u003E\n\u003Cp\u003E\nThose are all things that can fire off between ticks and execute code between ticks.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOOOH.\u00A0 There\u0027s one other possibility - the KSP game refuses to allow setting target to docking port except when within a close distance.\u00A0 If you drift a bit farther away, it may force the target to be the whole vessel instead of a part.\u00A0 It could be that it forces this to happen between ticks.\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-02-12T21:23:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539595\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550004372\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n29 minutes ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOOOH.\u00A0 There\u0027s one other possibility - the KSP game refuses to allow setting target to docking port except when within a close distance.\u00A0 If you drift a bit farther away, it may force the target to be the whole vessel instead of a part.\u00A0 It could be that it forces this to happen between ticks.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:20px;\u0022\u003EAha!\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI set up a script to calculate some vectors and print the distance.\u00A0 If I\u0027m more than 200m away from the target ship it runs fine while the KOS window is active, but trips out due to the ship being targeted not the port as soon as I click in the KSP window to take focus away form the KOS window.\u00A0\u00A0\u00A0I\u0027ve just run it for a minute slowly drifting apart from 250\u002B meters and it was absolutely fine until I clicked on the ship.\n\u003C/p\u003E\n\u003Cp\u003E\nWithin 200m I can click on the KOS window or the KSP window and it\u0027s all fine.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOdd that it\u0027s ok within the KOS window, which I guess is why it seemed inconsistent, but glad we know what the issue is, thanks for the help.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo supplementary question, is there a way to figure out\u00A0the port facing vector for further away than 200m?\u00A0 What I\u0027m trying to do is manoeuvre the ship to a point a given distance away from the\u00A0 docking port along the port facing vector so I can come straight in to dock.\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2019-02-12T22:04:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539615\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550006608\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n38 minutes ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo supplementary question, is there a way to figure out\u00A0the port facing vector for further away than 200m?\u00A0 What I\u0027m trying to do is manoeuvre the ship to a point a given distance away from the\u00A0 docking port along the port facing vector so I can come straight in to dock.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo you have the same problem if you store the port in your own variable rather than using TARGET? That\u0027s what I do, and I\u0027ve never had this problem, though my rendezvous is usually less than 100m out.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, I imagine that if you are far enough away that the target ship hasn\u0027t been properly unpacked/loaded (I forget which one is which right now), you may not be able to do anything as KSP won\u0027t know where the port is. You could carefully play with the various load distances if that turns out to be a problem.\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-02-12T22:17:47Z","Content":"\n\u003Cp\u003E\nHow do I store it as my own variable?\u00A0 I tried referring to it as PART having identified it in a list of parts but that didn\u0027t work.\n\u003C/p\u003E\n\u003Cp\u003E\nGood point on loading/unpacking distance though. best bet is probably going to just be close to sub 200m and then reassess, it means an extra manoeuvre though as I was hoping to approach a point 20m out along the portfacing vector, so I\u0027ll need to stop at \u0026lt;200 and then manouvre again to that point.\u00A0 Not the end of the world though.\n\u003C/p\u003E\n\u003Cp\u003E\nLooks like increasing the load distance can act as kraken bait, but increasing it within the code and decreasing it again when closer might be an option I guess.\u00A0 My test target only has one docking port on it\u0027s central axis so portfacing-ship:facing which makes it simple for now though.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2019-02-12T22:27:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539615\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550006608\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:20px;\u0022\u003EAha!\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI set up a script to calculate some vectors and print the distance.\u00A0 If I\u0027m more than 200m away from the target ship it runs fine while the KOS window is active, but trips out due to the ship being targeted not the port as soon as I click in the KSP window to take focus away form the KOS window.\u00A0\u00A0\u00A0I\u0027ve just run it for a minute slowly drifting apart from 250\u002B meters and it was absolutely fine until I clicked on the ship.\n\u003C/p\u003E\n\u003Cp\u003E\nWithin 200m I can click on the KOS window or the KSP window and it\u0027s all fine.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOdd that it\u0027s ok within the KOS window, which I guess is why it seemed inconsistent, but glad we know what the issue is, thanks for the help.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo supplementary question, is there a way to figure out\u00A0the port facing vector for further away than 200m?\u00A0 What I\u0027m trying to do is manoeuvre the ship to a point a given distance away from the\u00A0 docking port along the port facing vector so I can come straight in to dock.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAssign the target to a variable of your own so the game doesn\u0027t rip it away from you and change it.\n\u003C/p\u003E\n\u003Cp\u003E\nAs for the weird difference between the terminal being focused or not, I think I may have an idea and it\u0027s annoying because I\u0027m having to work around a stock KSP bug.\n\u003C/p\u003E\n\u003Cp\u003E\nDo you remember the behaviour kOS used to have where if you have the terminal focused and are looking at the map view, the map view would rotate if your ship was rotating?\u00A0 Remember how annoying that was?\u00A0 Well, it turns out after much trial and error that what caused it was the targettting input lock.\u00A0 KSP has 64 different individual boolean flags for allowing/disallowing UI inputs to work.\u00A0 There\u0027s a flag for keyboard input, a flag for steering, a flag for the throttle, a flag for switching vessels, etc.\u00A0 One of these flags is for allowing picking a target.\u00A0 In the past (when the rotation bug existed) kOS was always unlocking target picking at all times, so that a script can always do SET TARGET even if the player cannot through the UI (the UI flag banned even a program from doing it - because KSP melts together UI issues with low level API issues a lot of the time).\u00A0 Now, what made no sense is that KSP caused the map view to rotate for some weird reason when that targetting input lock was unlocked.\u00A0 (which happens as a side effect of switching focus).\u00A0 There is no reason for that to make any sense, but I proved this is exactly what caused it.\u00A0 When I made ONLY that one flag differ and none of the other input flags, that changed the map rotating behaviour.\n\u003C/p\u003E\n\u003Cp\u003E\nSo how to solve the problem of the rotating map?\u00A0 Well I decided that the targeting input lock really only needs to be unlocked when setting the target.\u00A0 So I did this:\u00A0 When you run SET TARGET TO WHATEVER, kOS *temporarily* unlocks that input lock so the game will allow the target to be set, then puts it back the way it was again when the SET TARGET command is over.\u00A0 That fixed the rotating map bug.\u00A0 But now it looks like putting the target input lock back again after the SET means the UI code will re-assert itself and rip away the setting you made when it next runs between pysicks ticks.\n\u003C/p\u003E\n\u003Cp\u003E\nSo it looks like I can either get rid of the targeting bug, or get rid of the map rotating bug, but not both.\u00A0 For some ridiculous reason, these two unrelated things are melted together somewhere inside KSP\u0027s hidden code - both being triggered by the same boolean setting.\n\u003C/p\u003E\n\u003Cp\u003E\nThe rule \u0022cannot pick a docking port target \u0026gt; 200m away\u0022 is meant to be a UI rule, but that UI rule is affecting all calls to the API routine whether coming from autopilot software or from manual player control.\u00A0 And so when the KSP game runs code in between kOS ticks, it sees \u0022oh look the target is set to a part but we are \u0026gt;200m away, I will therefore re-assign the target to the whole vessel\u0022 because it\u0027s assuming that target had been set by a player.\n\u003C/p\u003E\n\u003Cp\u003E\nAt this point I\u0027m going to just document it, rather than fix it - because it\u0027s hard to fight the KSP game\u0027s own behavior on this one.\u00A0 Just use your own variable instead of TARGET, I guess.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-02-12T22:33:11Z\u0022 title=\u002202/12/2019 10:33  PM\u0022 data-short=\u00225 yr\u0022\u003EFebruary 12, 2019\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2019-02-12T23:12:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539649\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550009867\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n41 minutes ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow do\u003Cspan\u003E\uFEFF\u003C/span\u003E\u003Cspan\u003E\uFEFF\u003C/span\u003E I store it as \u003Cspan\u003E\uFEFF\u003C/span\u003Emy own vari\u003Cspan\u003E\uFEFF\u003C/span\u003Eable\u003Cspan\u003E\uFEFF\u003C/span\u003E?\u003Cspan\u003E\uFEFF\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInstead of \u0022SET TARGET TO port.\u0022 do \u0022SET my_variable TO port.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nIn my case I do something like \u0022LOCAL target_port IS pickTargetPort(TARGET).\u0022 where the function loops through the ports on the input vessel and picks the \u0022best\u0022 one. Actually I store the target in a variable too in case the player accidentally deselects or changes it during docking.\n\u003C/p\u003E\n"},{"CreatedByName":"SpinkAkron","CreatedById":134807,"CreatedDateTime":"2019-02-13T02:21:49Z","Content":"\n\u003Cp\u003E\nFor those that may be\u00A0interested, I released my script pack.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/182137-16x-spinks-kos-script-pack-v10/\u0022 rel=\u0022\u0022\u003ESpink\u0027s Script Pack\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2019-02-13T05:05:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539796\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550024509\u0022 data-ipsquote-userid=\u0022134807\u0022 data-ipsquote-username=\u0022SpinkAkron\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, SpinkAkron said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor those that may be\u00A0interested, I released my script pack.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/182137-16x-spinks-kos-script-pack-v10/\u0022 rel=\u0022\u0022\u003ESpink\u0027s Script Pack\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI don\u0027t know if I\u0027ll have the time to check this out, but I fully support the idea of users doing this.\u00A0 The more public examples there are, the easier it is for new people to see how things can be done.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123362\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0022 rel=\u0022\u0022\u003E@RizzoTheRat\u003C/a\u003E I don\u0027t think I\u0027ll be able to fix it, but I can at least document the problem you ran into.\n\u003C/p\u003E\n\u003Cp\u003E\nThe issue is here: \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2435\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2435\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-02-13T06:32:56Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539859\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550034330\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123362\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123362-rizzotherat/\u0022 rel=\u0022\u0022\u003E@RizzoTheRat\u003C/a\u003E I don\u0027t think I\u0027ll be able to fix it, but I can at least document the problem you ran into.\n\u003C/p\u003E\n\u003Cp\u003E\nThe issue is here: \u003Ca href=\u0022https://github.com/KSP-KOS/KOS/issues/2435\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSP-KOS/KOS/issues/2435\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u0022The user is very confused.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nYeah, I think that captures it pretty well\u00A0\u003Cimg alt=\u0022:lol:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_laugh.png\u0022 title=\u0022:lol:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nGood to know what the problem is is though, I should be able to work around it easy enough by assigning the port to a variable within a physics tick.\n\u003C/p\u003E\n"},{"CreatedByName":"funkheld","CreatedById":174450,"CreatedDateTime":"2019-02-13T12:28:40Z","Content":"\n\u003Cp\u003E\nHi good afternoon.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nI built two computers at the Pegasus:\u003Cbr\u003E\n- Pegasus CPU: CompoMax (test)\u003Cbr\u003E\n- Pegasus CPU: CompoMax (test1)\n\u003C/p\u003E\n\u003Cp\u003E\nHow can I load a program in each one now?\u003Cbr\u003E\ntest.ks and test1.ks\n\u003C/p\u003E\n\u003Cp\u003E\nThank you.\u003Cbr\u003E\ngreeting\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2019-02-13T12:51:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539962\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550060920\u0022 data-ipsquote-userid=\u0022174450\u0022 data-ipsquote-username=\u0022funkheld\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n24 minutes ago, funkheld said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi good afternoon.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nI built two computers at the Pegasus:\u003Cbr\u003E\n- Pegasus CPU: CompoMax (test)\u003Cbr\u003E\n- Pegasus CPU: CompoMax (test1)\n\u003C/p\u003E\n\u003Cp\u003E\nHow can I load a program in each one now?\u003Cbr\u003E\ntest.ks and test1.ks\n\u003C/p\u003E\n\u003Cp\u003E\nThank you.\u003Cbr\u003E\ngreeting\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you\u0027ve already put the ship on the launchpad, you can right-click on each CPU part and open a terminal. In each terminal, you\u0027d then copy over and run one program. e.g. you might type COPYPATH(\u00220:/test.ks\u0022,\u00221:/\u0022). RUNPATH(\u00221:/test.ks\u0022). in one terminal.\n\u003C/p\u003E\n\u003Cp\u003E\nIn general, its easier to set these up as boot programs that get loaded and run automatically. You do that in the ship editor (\u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E/\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E) by right-clicking on the part and selecting a boot script. Note that first you need to have a folder named Boot within your Ships/Script directory, and have the programs you want to run in there, as it\u0027s that directory that is scanned when the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E/\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E build editor starts. Note also that this choice of boot file(s) will be saved against the particular ship design so would need to be repeated for new designs. \u003Ca href=\u0022https://ksp-kos.github.io/KOS/general/volumes.html#special-handling-of-files-in-the-boot-directory\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ksp-kos.github.io/KOS/general/volumes.html#special-handling-of-files-in-the-boot-directory\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-02-13T12:53:02Z\u0022 title=\u002202/13/2019 12:53  PM\u0022 data-short=\u00225 yr\u0022\u003EFebruary 13, 2019\u003C/time\u003E by ElWanderer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"funkheld","CreatedById":174450,"CreatedDateTime":"2019-02-13T13:37:22Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHello thanks for info.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\ngreeting\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2019-02-13T17:28:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539875\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550039576\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u0022The user is very confused.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nYeah, I think that captures it pretty well\u00A0\u003Cimg alt=\u0022:lol:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_laugh.png\u0022 title=\u0022:lol:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nGood to know what the problem is is though, I should be able to work around it easy enough by assigning the port to a variable within a physics tick.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAlthough we don\u0027t have \u0022atomic sections\u0022 to force two adjacent lines to be in the same tick, you can still guarantee it happens in the same tick by forcing a WAIT 0 right before the two lines in question, so you know even at a low IPU setting there will still be plenty of IPU to fit both lines in before there\u0027s a break, by starting a new update right before the section in question.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-02-13T17:29:38Z\u0022 title=\u002202/13/2019 05:29  PM\u0022 data-short=\u00225 yr\u0022\u003EFebruary 13, 2019\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2019-02-13T23:50:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223539859\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550034330\u0022 data-ipsquote-userid=\u002263481\u0022 data-ipsquote-username=\u0022Steven Mading\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, Steven Mading said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI don\u0027t know if I\u0027ll have the time to check this out, but I fully support the idea of users doing this.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nif you want to include library links on the \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E here\u0027s mine: \u003Ca href=\u0022https://github.com/KSAMissionCtrl/AFCS\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/KSAMissionCtrl/AFCS\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m not going to make a release thread for it or anything tho, but I am more than happy to share it with anyone that wants additional references for how others are controlling their vessels\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-02-13T23:51:05Z\u0022 title=\u002202/13/2019 11:51  PM\u0022 data-short=\u00225 yr\u0022\u003EFebruary 13, 2019\u003C/time\u003E by Drew Kerman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-02-14T20:54:19Z","Content":"\n\u003Cp\u003E\nThanks fer the help folks, I now have my docking script working, apart from one small problem...How do I stop it?\n\u003C/p\u003E\n\u003Cp\u003E\nI have the final approach on to the docking port running perfectly, but tried having it an\u00A0\u003Cstrong\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EUNTIL tgtPort:STATE = \u0022PreAttached\u0022\u003C/span\u003E\u003C/strong\u003E loop, where \u003Cstrong\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EtgtPort\u003C/span\u003E\u003C/strong\u003E is the port as a variable.\u00A0 I was hoping this would catch it in the wobbly moment before I lose the target but one of my calculations is still calling on the target between that being tripped and finishing the loop.\u00A0 Is there a way to trip out of the loop as soon as trigger occurs?\u00A0 Only think I can think of is stop the loop when the distance is half a meter rather than anything to do with the ports, but there must be a better way.\n\u003C/p\u003E\n"},{"CreatedByName":"infinite_monkey","CreatedById":185663,"CreatedDateTime":"2019-02-14T21:28:13Z","Content":"\n\u003Cp\u003E\n\u003Cs\u003EYou could set the loop condition to a variable (false initially) and then set that variable to true in your trigger\u003C/s\u003E\u00A0 After reading your text again, I guess this is not what you wanted. As far as I know, there\u0027s no way to end a program directly,\u00A0 and in your case, return would just return from the trigger...\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-02-14T21:43:38Z\u0022 title=\u002202/14/2019 09:43  PM\u0022 data-short=\u00225 yr\u0022\u003EFebruary 14, 2019\u003C/time\u003E by infinite_monkey\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RizzoTheRat","CreatedById":123362,"CreatedDateTime":"2019-02-14T22:06:52Z","Content":"\n\u003Cp\u003E\nAs someone who learned programming in BASIC what I really need is a GOTO, but that\u0027s the kind of talk that gets you dragged outside and lynched by programmers \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nYeah trigger variable has the same problem as my previous attempt, it will only stop the loop at the end of the current run through, if the loop still has things that use the Target after it\u0027s been lost it falls over.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve set it to stop the loop when the distance is less than 0.5 for now but the fact I\u0027m having this issue suggests there\u0027s a better way I should be doing the flow control.\n\u003C/p\u003E\n"},{"CreatedByName":"ElWanderer","CreatedById":114015,"CreatedDateTime":"2019-02-14T22:25:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223540840\u0022 data-ipsquote-contentid=\u0022165628\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221550182012\u0022 data-ipsquote-userid=\u0022123362\u0022 data-ipsquote-username=\u0022RizzoTheRat\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, RizzoTheRat said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs someone who learned programming in BASIC what I really need is a GOTO, but that\u0027s the kind of talk that gets you dragged outside and lynched by programmers \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nYeah trigger variable has the same problem as my previous attempt, it will only stop the loop at the end of the current run through, if the loop still has things that use the Target after it\u0027s been lost it falls over.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve set it to stop the loop when the distance is less than 0.5 for now but the fact I\u0027m having this issue suggests there\u0027s a better way I should be doing the flow control.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt could suggest you\u0027re doing too much in one loop or that your final approach velocity is a bit high... For comparison, my loop ends when the docking port changes to any state that isn\u0027t ready, and I\u0027ve never noticed this kind of problem. Then again, my loop is fairly simple, especially compared to the initial route calculation before approach. My final approach velocity is 0.2m/s once within a few metres.\n\u003C/p\u003E\n\u003Cp\u003E\nI guess one goto-like approach would be to stick the loop contents into a function and load it with checks that can return early if the target becomes invalid midway through.\n\u003C/p\u003E\n"}]}