{"TopicId":88639,"ForumId":34,"TopicTitle":"[0.25/0.90] TechManager Version 1.5","CreatedByName":"anonish","CreatedById":126534,"CreatedDateTime":"2014-10-27T07:29:33Z","PageNum":3,"Articles":[{"CreatedByName":"Starstrider42","CreatedById":104043,"CreatedDateTime":"2014-10-28T14:56:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022RoverDude\u0022 data-cite=\u0022RoverDude\u0022\u003E\u003Cdiv\u003ESo if you take \u0027random tree rearrangements\u0027 out of the equation for a bit, and do a little triage, the right (effective, etc.) thing to do would be to use a shared tree so we don\u0027t break eachother. Otherwise you will have stomping again, and everyone loses.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, I misunderstood the scope of the project. If we\u0027re sticking to relatively small extensions of the stock tech tree, then most of my comments don\u0027t apply. Objection withdrawn, and good luck. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Rabada","CreatedById":66044,"CreatedDateTime":"2014-10-28T15:08:18Z","Content":"\n\u003Cp\u003EThankyou! This is very awesome! I\u0027m excited to see where this leads!\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2014-10-28T19:34:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022anonish\u0022 data-cite=\u0022anonish\u0022\u003E\u003Cdiv\u003E Left-ALT-F7 will perform a load while looking at the tech tree in the R\u0026amp;D building if you want to see the effect of making changes to the file in \u0027realtime\u0027. If you expect this to work with Interstellar, be sure to remove / do not install the TreeLoader mod.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI removed TreeLoader and tree.cfg is inside safe folder. When I press Left-ALT-F7, nothing seem to happen.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-30T10:34:42Z\u0022 title=\u002210/30/2014 10:34  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 30, 2014\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-10-28T19:55:24Z","Content":"\n\u003Cp\u003EAlright. One issue that has come up with my setup is what happens to empty nodes because I did not install all the big mods? I\u0027m talking about the \u0027unified\u0027 tree the other thread is talking about, but this comment is more technical so I\u0027m putting it here.\u003C/p\u003E\u003Cp\u003E(I personally have the skills to directly edit the tree.cfg, but a lot of players won\u0027t.)\u003C/p\u003E\u003Cp\u003EIE: I install Near Future and Karbonite but I don\u0027t install Interstellar. \u003C/p\u003E\u003Cp\u003EI have two different mods installed (Near Future and Karbonite), each of which presumably comes with their own tree.cfg specific to themselves, but I want both so I use the unified tech tree the community is coming up with. But in doing that, what happens to the nodes that are empty because I don\u0027t have Interstellar installed? Do they hide themselves?\u003C/p\u003E\u003Cp\u003ELooking at the current implementation, I suppose I\u0027m really asking why use limit the mod to a single tree.cfg found in the save directory? This mod is dealing with adding/removing parts which is done by adding/removing mods. Why do I now have to remember to also edit the tree.cfg in my Save directory when I change the mods I have installed?\u003C/p\u003E\u003Cp\u003EWhile more complicated, would a more modular approach work with a tree.cfg in each mod with the nodes it needs defined? The treeloader mod would itself come with a tree.cfg that covered all the stock node/parts and then any installed mods would have a tree.cfg to extend the tech tree as appropriate for their mod.\u003C/p\u003E\u003Cp\u003EThis approach does have its own issues of course.\u003C/p\u003E\u003Cp\u003EFirst, this means that some nodes would be defined more then once in different mods. I would think a simple difference check would account for this though, if a node is defined twice, but all the information is equal, no problem, load that node as described. If there is a discrepancy, flag it for the player\u0027s attention and (probably) use the first loaded one.\u003C/p\u003E\u003Cp\u003ENow, this does mean that there is no unified tech tree .cfg file so mod authors would have to coordinate to make sure their tech trees did work together following the unified tree layout that the community is working to produce in the other thread. But I don\u0027t see this being a huge problem, a lot of big names all already on board and so as other people produce alternative tech trees, they are likely to follow the unified tree as well to increase the likelyhood of players downloading their mod as if a mod does not play nice with the big mods, players are more likely to get rid of the small mod then the big mod.\u003C/p\u003E\u003Cp\u003ESo, thoughts?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-28T19:57:41Z\u0022 title=\u002210/28/2014 07:57  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 28, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"RoverDude","CreatedById":105198,"CreatedDateTime":"2014-10-28T20:06:49Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E@Diazo\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EAs I recall, the issue (and someone please correct me if I\u0027m wrong) is that right now this mod wipes the tree in favor of your single config... so there\u0027s no real way to have multiple configs coexist. Hence the reason why we\u0027re looking at pooling together on a set of nodes is that this way, if you install NFT you don\u0027t wipe out KSPI, and if you install KSPI you don\u0027t wipe out NFT.\u003C/p\u003E\u003Cp\u003EOf course, that depends on whether KSPI wants to play ball (i.e. even if Nertea leaves plenty of space for KSPI in a shared structure, if Fractal_UK decides to bundle a KSPI-only set of nodes, we\u0027re going to have sadness and someone\u0027s going to lose).\u003C/p\u003E\u003Cp\u003ETo your example, since KSPI isn\u0027t on board yet it\u0027s really a moot point. But taking any other mods, it would be on us to make sure there are no holes... i.e. I can guarantee for anything a USI mod uses, there will be no gaps in the path. I expect the same is true with NFT, and combine the two we\u0027ll fill out more nodes. And if KSPI comes on board, they would need to do the same thing (which is no different than what they do today).\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-10-28T20:15:54Z","Content":"\n\u003Cp\u003E@RoverDude: I\u0027m not talking about gaps in the path, I\u0027m talking about what happens to empty nodes with no parts installed?\u003C/p\u003E\u003Cp\u003EI would certainly prefer a single unified tech tree as that would be so much easier to manage then each mod having its own tree.cfg, but if I don\u0027t install any of the life support/base building mods, what happens to the \u0022colonization\u0022 tech nodes in the science screen? \u003C/p\u003E\u003Cp\u003EI do install Karbonite however and its nodes are all okay, but they are in a different part of the tech tree.\u003C/p\u003E\u003Cp\u003EEven if the node simply hid itself if it had no parts would be fine, but handling of some sort needs to be agreed on for empty nodes causing by only some mods being installed.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Starstrider42","CreatedById":104043,"CreatedDateTime":"2014-10-28T20:16:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022RoverDude\u0022 data-cite=\u0022RoverDude\u0022\u003E\u003Cdiv\u003EAs I recall, the issue (and someone please correct me if I\u0027m wrong) is that right now this mod wipes the tree in favor of your single config... so there\u0027s no real way to have multiple configs coexist. Hence the reason why we\u0027re looking at pooling together on a set of nodes is that this way, if you install NFT you don\u0027t wipe out KSPI, and if you install KSPI you don\u0027t wipe out NFT.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETo quote the builder:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022anonish\u0022 data-cite=\u0022anonish\u0022\u003E\u003Cdiv\u003ETry not to lock yourselves into thinking the end result of this has to 1) be a static tree.cfg file and 2) can only use existing ConfigNode properties\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf they want to include ModuleManager support, as they\u0027ve stated, then the processing flow must change to:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EKSP compiles a list of all tech tree nodes to GameDatabase\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EModuleManager, if installed, compiles and applies a list of node patches\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETechManager deletes the stock tech tree\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETechManager reconstructs the tech tree using the configs compiled in step 1\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhich would completely avoid the \u0022wipe out\u0022 problem you\u0027re describing.\u003C/p\u003E\u003Cp\u003E(Mind you, I still support the idea of a common tech tree, but to provide players with a consistent experience rather than to avoid mass clobbering.)\u003C/p\u003E\u003Cp\u003E@Diazo, there are any number of ways to prevent trees from getting broken by missing mods. One (letting mods disable the \u0022hidden\u0022 flag on any prerequisite nodes they need) will even work with no extra work from anonish besides ModuleManager support. A more complex approach might be to figure out which techs are prerequisites (though with OR prerequisites the correct behavior might be hard to define). In any case, I don\u0027t think it\u0027s a fundamental problem, more of a feature request.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-28T20:21:15Z\u0022 title=\u002210/28/2014 08:21  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 28, 2014\u003C/time\u003E by Starstrider42\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-10-28T20:19:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EAlright. One issue that has come up with my setup is what happens to empty nodes because I did not install all the big mods? I\u0027m talking about the \u0027unified\u0027 tree the other thread is talking about, but this comment is more technical so I\u0027m putting it here.\u003Cp\u003E(I personally have the skills to directly edit the tree.cfg, but a lot of players won\u0027t.)\u003C/p\u003E\u003Cp\u003EIE: I install Near Future and Karbonite but I don\u0027t install Interstellar. \u003C/p\u003E\u003Cp\u003EI have two different mods installed (Near Future and Karbonite), each of which presumably comes with their own tree.cfg specific to themselves, but I want both so I use the unified tech tree the community is coming up with. But in doing that, what happens to the nodes that are empty because I don\u0027t have Interstellar installed? Do they hide themselves?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI would expect any empty subtrees to be hidden by default, similar to how the stock 1000-science nodes don\u0027t show up until you install parts that use them. We might need a little bit of extra code to enforce the right behavior if an empty node is a prerequisite for an occupied node.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ELooking at the current implementation, I suppose I\u0027m really asking why use limit the mod to a single tree.cfg found in the save directory? This mod is dealing with adding/removing parts which is done by adding/removing mods. Why do I now have to remember to also edit the tree.cfg in my Save directory when I change the mods I have installed?\u003C/p\u003E\u003Cp\u003EWhile more complicated, would a more modular approach work with a tree.cfg in each mod with the nodes it needs defined? The treeloader mod would itself come with a tree.cfg that covered all the stock node/parts and then any installed mods would have a tree.cfg to extend the tech tree as appropriate for their mod.\u003C/p\u003E\u003Cp\u003EThis approach does have its own issues of course.\u003C/p\u003E\u003Cp\u003EFirst, this means that some nodes would be defined more then once in different mods. I would think a simple difference check would account for this though, if a node is defined twice, but all the information is equal, no problem, load that node as described. If there is a discrepancy, flag it for the player\u0027s attention and (probably) use the first loaded one.\u003C/p\u003E\u003Cp\u003ENow, this does mean that there is no unified tech tree .cfg file so mod authors would have to coordinate to make sure their tech trees did work together following the unified tree layout that the community is working to produce in the other thread. But I don\u0027t see this being a huge problem, a lot of big names all already on board and so as other people produce alternative tech trees, they are likely to follow the unified tree as well to increase the likelyhood of players downloading their mod as if a mod does not play nice with the big mods, players are more likely to get rid of the small mod then the big mod.\u003C/p\u003E\u003Cp\u003ESo, thoughts?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe problem with combining different authors\u0027 tree bits is that the author of the config has to know where on the screen to put each node. If we can integrate code to automatically lay out nodes based on which ones are visible and how they\u0027re connected, then shipping partial trees with the mods that use them starts to make sense.\u003C/p\u003E\u003Cp\u003EAs long as each coordinating modder has to be aware of the locations of other participants\u0027 nodes, it seems easier to combine all of the added nodes into a single tree.cfg that everyone who\u0027s coordinating can distribute, and let any that end up empty just be hidden.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-10-28T20:34:16Z","Content":"\n\u003Cp\u003EHmm, looking at treeloader\u0027s source, I see a \u0022.hideIfNoParts\u0022 property, it looks like nodes can already be set to hide themselves if they have no parts which would be an okay solution and pretty much takes care of the issue I was worried about.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"anonish","CreatedById":126534,"CreatedDateTime":"2014-10-28T20:35:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EBut in doing that, what happens to the nodes that are empty because I don\u0027t have Interstellar installed? Do they hide themselves?\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EThey do if they have they have the hideIfEmpty flag set\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EThe rest of what you say is more or less what I\u0027ve been thinking and what the community thread is trying to solve. I\u0027ll say that is really the better place to discuss this. TechManger will be a tool in the solution, but not all of it. We need to decide how all the involved mods are going to play along. Multiple tree.cfgs? An API? Where are part assignments done? how do we handle empty subtrees? etc.\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"anonish","CreatedById":126534,"CreatedDateTime":"2014-10-28T20:46:37Z","Content":"\n\u003Cp\u003EDiazo:\u003C/p\u003E\u003Cp\u003EThe hideIfEmpty flag doesn\u0027t solve the problem you think it does. What if *that* node is empty, but its child is not? If you hide the node, its child gets hidden as well. I\u0027ve suggested a hideIfUseless flag to solve the empty *subtree* problem.\u003C/p\u003E\u003Cp\u003EStarStrider42:\u003C/p\u003E\u003Cp\u003EOne point of clarification about TM \u0027wiping out the tree\u0027. I wipe out the unity GameObjects. Things that represent the graphical icons you actually see on the tree. I do not wipe out the techID\u0027s, nor would that even make sense. I just create new \u0027boxes\u0027 that point to the same \u0027techs\u0027. We are getting really lose with our terms: \u0027node\u0027 and \u0027tech\u0027 are used interchangeably but there really are two different things there. In the tree.cfg file, you are specifying the nodes (as in GameObjects) that will be created, and the techID it points to is a parameter. I don\u0027t create those techs (unless they don\u0027t exist). Nor do I ever \u0027erase\u0027 techs, even if your cfg file doesn\u0027t reference them.\u003C/p\u003E\n"},{"CreatedByName":"Fractal_UK","CreatedById":61595,"CreatedDateTime":"2014-10-28T20:53:37Z","Content":"\n\u003Cp\u003EI have a possible solution for the woes of how you can determine which tree you want to use. This is just the beginning of a possible solution but I have made some changes to the TechManager source code that make it load nodes from a .cfg file in game data instead of in the savegame directory.\u003C/p\u003E\u003Cp\u003EYou wrap the nodes inside a TECHNOLOGY_TREE_DEFINITION{} node which has an id = to determine which tree it belongs to.\u003C/p\u003E\u003Cp\u003EOn my current changes, the mod will load only the first tech tree definition but it\u0027s pretty trivial to make it able to select between different options. Example node structure:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ETECHNOLOGY_TREE_DEFINITION\u003Cbr\u003E{\u003Cbr\u003E    id = KSPITree\u003Cbr\u003E    VERSION\u003Cbr\u003E    {\u003Cbr\u003E\tid = 2\u003Cbr\u003E    }\u003Cbr\u003E    NODE\u003Cbr\u003E    {\u003Cbr\u003E\tname = newnode_7144\u003Cbr\u003E\ttechID = interstellarTechFusionPower\u003Cbr\u003E\tpos = -404.5,1175,-18\u003Cbr\u003E\ticon = NUCLEARPROPULSION\u003Cbr\u003E\tcost = 3000\u003Cbr\u003E\ttitle = Basic Nuclear Fusion\u003Cbr\u003E\tdescription = This technology represents the first steps into fusion power using large reactors compressing a plasma with large magnets or initiatiating the reaction with tiny quantities of Antimatter.\u003Cbr\u003E\tanyParent = False\u003Cbr\u003E\thideIfEmpty = False\u003Cbr\u003E\tparents = node6_nuclearPropulsion,node7_metaMaterials\u003Cbr\u003E\tPARTS\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = FNFissionFusionCatReactor\u003Cbr\u003E\t\tname = FusionReactor250\u003Cbr\u003E\t\tname = FusionReactor375\u003Cbr\u003E\t\tname = KSPIMagneticNozzle1\u003Cbr\u003E\t\tname = KSPIMagneticNozzle2\u003Cbr\u003E\t\tname = KSPIMagneticNozzle3\u003Cbr\u003E\t}\u003Cbr\u003E    }\u003Cbr\u003E    NODE\u003Cbr\u003E    {\u003Cbr\u003E\tname = newnode_71440\u003Cbr\u003E\ttechID = interstellarTechFusionPower2\u003Cbr\u003E\tpos = -321,1063.667,-17\u003Cbr\u003E\ticon = NUCLEARPROPULSION\u003Cbr\u003E\tcost = 3000\u003Cbr\u003E\ttitle = Advanced Fusion Power\u003Cbr\u003E\tdescription = The development of Inertial Confinement fusion technology allows the miniaturisation of fusion power as well as the production of massive new engines that really unlock rapid transit throughout the solar system.\u003Cbr\u003E\tanyParent = False\u003Cbr\u003E\thideIfEmpty = False\u003Cbr\u003E\tparents = newnode_7144\u003Cbr\u003E\tPARTS\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = FusionReactor0625\u003Cbr\u003E\t\tname = FusionReactor125\u003Cbr\u003E\t\tname = vista\u003Cbr\u003E\t}\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E.....\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/FractalUK/TechManager\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/FractalUK/TechManager\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E(anonish, your license is included in the source code)\u003C/p\u003E\u003Cp\u003EEdit: Drop down box tech tree selection could be restored pretty easily by showing a selection box for the above nodes instead of FirstOrDefault()-ing\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-28T20:56:16Z\u0022 title=\u002210/28/2014 08:56  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 28, 2014\u003C/time\u003E by Fractal_UK\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"anonish","CreatedById":126534,"CreatedDateTime":"2014-10-28T21:35:39Z","Content":"\n\u003Cp\u003EFractal_UK! I\u0027m trying to push the talk into the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/98409-Planning-Community-Tech-Tree\u0022 rel=\u0022external nofollow\u0022\u003Ecommunity tree forum\u003C/a\u003E, I know everybody there would love to see you (they\u0027ve been asking).\u003C/p\u003E\u003Cp\u003EWhat you suggest looks a lot like how ATC works, although I haven\u0027t spent much time looking at it. The community thread is trying to take a step back and solve the problem in a more global context that includes the mod developers (again, they\u0027d love you). I hope / intend to modify TechManager as a result of their conclusions.\u003C/p\u003E\n"},{"CreatedByName":"Starstrider42","CreatedById":104043,"CreatedDateTime":"2014-10-28T22:34:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022anonish\u0022 data-cite=\u0022anonish\u0022\u003E\u003Cdiv\u003EStarStrider42:\u003Cp\u003EOne point of clarification about TM \u0027wiping out the tree\u0027. I wipe out the unity GameObjects. Things that represent the graphical icons you actually see on the tree. I do not wipe out the techID\u0027s, nor would that even make sense. I just create new \u0027boxes\u0027 that point to the same \u0027techs\u0027. We are getting really lose with our terms: \u0027node\u0027 and \u0027tech\u0027 are used interchangeably but there really are two different things there. In the tree.cfg file, you are specifying the nodes (as in GameObjects) that will be created, and the techID it points to is a parameter. I don\u0027t create those techs (unless they don\u0027t exist). Nor do I ever \u0027erase\u0027 techs, even if your cfg file doesn\u0027t reference them.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t see how these implementation details change anything. Can you please clarify what point you were trying to make? I think I\u0027ve missed it.\u003C/p\u003E\n"},{"CreatedByName":"anonish","CreatedById":126534,"CreatedDateTime":"2014-10-28T23:11:05Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EMostly I\u0027m saying terminology is being confused. We have to talk about both techs and nodes to fully explain the problem, but we keep swapping what they mean. \u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EIf they want to include ModuleManager support, as they\u0027ve stated, then the processing flow must change to:\u003C/span\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EKSP compiles a list of all tech tree nodes to GameDatabase\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EModuleManager, if installed, compiles and applies a list of node patches\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETechManager deletes the stock tech tree\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETechManager reconstructs the tech tree using the configs compiled in step 1\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E(don\u0027t know why it insisted on the double quoting..)\u003C/p\u003E\u003Cp\u003ETo me \u0027tech tree\u0027 means the techs, but its the nodes that are deleted. So in step 1, \u0027nodes\u0027 means techs and in step 3 \u0027techs\u0027 means nodes.\u003C/p\u003E\u003Cp\u003EIn step 1, where in the GameDatabase does KSP store these techs? (Not saying KSP doesn\u0027t, just TM doesn\u0027t use it if KSP does. TM reads techs from ResearchAndDevelopment.Instance.GetTechState() \u0026lt;which very well may access GameDatabase\u0026gt;)\u003C/p\u003E\u003Cp\u003EIn step 2, where are those patches applied against? (this I just need to lookup myself, I haven\u0027t looked at MM internals at all)\u003C/p\u003E\u003Cp\u003EIn step 3, TM deletes the nodes. And really, only inactivates them. The techs are never deleted, just created if need be and possibly modified if they \u0027lost\u0027 parts.\u003C/p\u003E\u003Cp\u003EStep 4 was supposed to reference step 2 right? \u003C/p\u003E\u003Cp\u003EAnyway, I get the general idea: KSP establishes a baseline, MM fixes things up -- possibly adding new techs as well, TM renders the results. Its just the way it was presented seems to suggest a particular implementation that doesn\u0027t make sense to me.\u003C/p\u003E\n"},{"CreatedByName":"Starstrider42","CreatedById":104043,"CreatedDateTime":"2014-10-28T23:31:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starstrider42\u0022 data-cite=\u0022Starstrider42\u0022\u003E\u003Cdiv\u003EIf they want to include ModuleManager support, as they\u0027ve stated, then the processing flow must change to:\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EKSP compiles a list of all tech tree nodes to GameDatabase\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EModuleManager, if installed, compiles and applies a list of node patches\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETechManager deletes the stock tech tree\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ETechManager reconstructs the tech tree using the configs compiled in step 1\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022anonish\u0022 data-cite=\u0022anonish\u0022\u003E\u003Cdiv\u003EIn step 1, where in the GameDatabase does KSP store these techs? (Not saying KSP doesn\u0027t, just TM doesn\u0027t use it if KSP does. TM reads techs from ResearchAndDevelopment.Instance.GetTechState() \u0026lt;which very well may access GameDatabase\u0026gt;)\u003Cp\u003EIn step 2, where are those patches applied against? (this I just need to lookup myself, I haven\u0027t looked at MM internals at all)\u003C/p\u003E\u003Cp\u003EIn step 3, TM deletes the nodes. And really, only inactivates them. The techs are never deleted, just created if need be and possibly modified if they \u0027lost\u0027 parts.\u003C/p\u003E\u003Cp\u003EStep 4 was supposed to reference step 2 right?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, ok, I see how my original post was unclear. I was not trying to imply any implementation for steps 3 and 4, and AFAIK the implementation for steps 1 and 2 is forced by the KSP API, so you don\u0027t get a choice there.\u003C/p\u003E\u003Cp\u003EWhat I meant is that tree.cfg, like every other .cfg file in the game, defines ConfigNodes -- not techs, not tech tree nodes, just generic ConfigNodes whose meaning depends what your code does with them. Whenever KSP finds a .cfg file with valid syntax, it loads those ConfigNodes into GameDatabase (step 1). ModuleManager edits the ConfigNodes in GameDatabase (step 2), so MM compatibility is a matter of making sure you use the copy that\u0027s in GameDatabase instead of loading it directly from the individual file.\u003C/p\u003E\u003Cp\u003EHere\u0027s a code snippet that does that: \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EUrlDir.UrlConfig[] configList = GameDatabase.Instance.GetConfigs(\u0022NODE\u0022);\u003Cbr\u003Eforeach (UrlDir.UrlConfig curSet in configList)\u003Cbr\u003E    foreach (ConfigNode curNode in curSet.config.nodes) {\u003Cbr\u003E        initTechNode(curNode);\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewhere I\u0027m assuming initTechNode() is your existing implementation for step 4.\u003C/p\u003E\u003Cp\u003EEDIT: Ok, so I\u0027m assuming one thing about your implementation, which is that however you process tree.cfg involves reading ConfigNodes from the file in one form or other. Is that a good guess?\u003C/p\u003E\u003Cp\u003EMy original point was that having multiple tech tree configs (say, for different mods) only affects what ends up in GameDatabase, and you most likely want to find and load all available configs anyway. The only way that mods could overwrite each other in this scenario is if you get duplicate techIDs (if I understand the framework you described correctly), and that\u0027s easy to avoid by encouraging mods (including the community tech tree) to give their NODE names and techIDs a unique prefix.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-28T23:37:08Z\u0022 title=\u002210/28/2014 11:37  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 28, 2014\u003C/time\u003E by Starstrider42\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"anonish","CreatedById":126534,"CreatedDateTime":"2014-10-28T23:47:14Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EMM compatibility is a matter of making sure you use the copy that\u0027s in GameDatabase instead of loading it directly from the individual file.\u003C/span\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EI had to read up on GameDatabase. Things make much more sense now. I had no idea KSP iterated over the GamaData dirs and loaded all the configs in a manner that was then presentable to ALL the mods. Sounds like you would agree with Fractal_UK\u0027s approach then? Each mod can install their own mymod.cfg that defines a TECHNOLOGY_TREE_DEFINITION ConfigNode. Then TM picks one based on user input. In that case the mods *don\u0027t* need to have unique nodes or techIDs, as long as only one tree is used per save game (and switching trees could also work, you just might have to repurchase parts), as only one of the tree definitions would be used and the rest ignored. Whatever unified tree the community comes up with would also be an option.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EOk, so I\u0027m assuming one thing about your implementation, which is that however you process tree.cfg involves reading ConfigNodes from the file in one form or other. Is that a good guess?\u003C/span\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EYes that\u0027s correct. tree.cfg is as you suspect, a ConfigNode type file, just referenced by filename instead of via GameDatabase.\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"Fractal_UK","CreatedById":61595,"CreatedDateTime":"2014-10-28T23:51:02Z","Content":"\n\u003Cp\u003EI\u0027ve posted my latest work on \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/98409-Planning-Community-Tech-Tree?p=1508646\u0026amp;viewfull=1#post1508646\u0022 rel=\u0022external nofollow\u0022\u003Ethe other thread\u003C/a\u003E. It still needs to actually save the user selection to a tech tree selection file but it\u0027s otherwise pretty much there.\u003C/p\u003E\n"},{"CreatedByName":"Joshwoo70","CreatedById":111345,"CreatedDateTime":"2014-10-28T23:52:29Z","Content":"\n\u003Cp\u003E*go to tell fractual_uk*\u003C/p\u003E\u003Cp\u003ENice job! Will it work with sci mode?\u003C/p\u003E\n"},{"CreatedByName":"anonish","CreatedById":126534,"CreatedDateTime":"2014-10-29T00:08:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Fractal_UK\u0022 data-cite=\u0022Fractal_UK\u0022\u003E\u003Cdiv\u003EI\u0027ve posted my latest work on \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/98409-Planning-Community-Tech-Tree?p=1508646\u0026amp;viewfull=1#post1508646\u0022 rel=\u0022external nofollow\u0022\u003Ethe other thread\u003C/a\u003E. It still needs to actually save the user selection to a tech tree selection file but it\u0027s otherwise pretty much there.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eis there really no way we can get that into persistent.sfs? why clutter a directory if we don\u0027t have to, especially to save one short string.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-29T02:16:47Z\u0022 title=\u002210/29/2014 02:16  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 29, 2014\u003C/time\u003E by anonish\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Cybersneeze","CreatedById":107931,"CreatedDateTime":"2014-10-29T18:36:38Z","Content":"\n\u003Cp\u003ESorry, this is probably idiocy as I have only skim-read the comments; but would it be possible for this mod to establish a fully functional, muti-mod, tree. I\u0027m currently using a ksp build running KAS, interstellar, B9, KW-Rocketry, and a large number of other mods, like DR and TAC-LS. \u003Cstrong\u003E\u003Cem\u003EWill this mod break this build?\u003C/em\u003E\u003C/strong\u003E I don\u0027t really care about my save, I was stuck using the KSPI hot patch, that adds all the parts to stock TT nodes, so had anti-matter within about 5 missions. \u003C/p\u003E\u003Cp\u003EIf anyone could just get me up to speed on how this mod works in comparison to tree-loader, and its effect on my build, if it will break it entirely, have no serious negative consequence, or just a break a small number of mods. Thxs for any input\u003C/p\u003E\n"},{"CreatedByName":"anonish","CreatedById":126534,"CreatedDateTime":"2014-10-29T19:15:47Z","Content":"\n\u003Cp\u003EAbout the worst it can do (assuming no bugs) is cause you to repurchase some parts that move from one tech to another. Make sure treeloader is not installed, stop using that hotpatch, install techmanager, put the tree.cfg in your save game dir and give it a shot. The tree.cfg file defines the techs and how parts are defined to those techs, but if a part isn\u0027t mentioned in the cfg, it will continue to be assigned to whatever tech it was at originally. So, if you are using KSPI\u0027s tree.cfg (and you likely would be) it would add the KSPI techs and move the KSPI parts, but the other mods\u0027 parts would still show up in your stock tree. There is \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/98409-Planning-Community-Tech-Tree/\u0022 rel=\u0022external nofollow\u0022\u003Eanother thread\u003C/a\u003E that is trying to create a \u0027community tree\u0027 with the intention of merging KSPI, NearFuture and some other mods. When they are done, it should make for a nice option.\u003C/p\u003E\n"},{"CreatedByName":"DaveS","CreatedById":123013,"CreatedDateTime":"2014-10-29T19:42:48Z","Content":"\n\u003Cp\u003EI\u0027ve set up my .25 career game with the new TechManager and the KSP-i tech tree, I hadn\u0027t moved far enough along that I had the parts, so there was no impact. Works like a charm. The interstellar parts show up in the new places just like one would hope.\u003C/p\u003E\u003Cp\u003E Nice work.\u003C/p\u003E\n"},{"CreatedByName":"Nelien","CreatedById":65665,"CreatedDateTime":"2014-10-29T19:50:18Z","Content":"\n\u003Cp\u003EJust throwing this out there quickly since I\u0027m on the run, but would a TreeLoader to TechManager converter be of any use? I wrote a converter between ATC and TreeLoader already so I can quickly throw together a converter for this if needed. However it seems like that\u0027s not needed is it? In other words, TechManager is fully compatible with TreeLoader files?\u003C/p\u003E\n"},{"CreatedByName":"undercoveryankee","CreatedById":103505,"CreatedDateTime":"2014-10-29T20:28:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nelien\u0022 data-cite=\u0022Nelien\u0022\u003E\u003Cdiv\u003EJust throwing this out there quickly since I\u0027m on the run, but would a TreeLoader to TechManager converter be of any use? I wrote a converter between ATC and TreeLoader already so I can quickly throw together a converter for this if needed. However it seems like that\u0027s not needed is it? In other words, TechManager is fully compatible with TreeLoader files?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETechManager will use most TreeLoader files without modification. The only exception is that TreeLoader implicitly preserved stock nodes that aren\u0027t edited or deleted in the file, and TechManager leaves the tree empty except for what\u0027s in the file. A tool to add the stock nodes to a config that relied on TreeLoader\u0027s implicit behavior might be useful.\u003C/p\u003E\n"}]}