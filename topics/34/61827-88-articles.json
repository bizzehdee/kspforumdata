{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":88,"Articles":[{"CreatedByName":"John FX","CreatedById":59415,"CreatedDateTime":"2014-12-14T12:30:19Z","Content":"\n\u003Cp\u003EThat\u0060s good, it seems mostly the same, I\u0060m glad there are lists of what will break stuff from version to version. That will help a lot.\u003C/p\u003E\u003Cp\u003ENow I just need to figure out what the sam my code is doing (I don\u0060t document my code nearly enough) and then update it.\u003C/p\u003E\u003Cp\u003ETYVM\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-12-16T01:38:31Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EWell it looks like 0.90 broke kOS (as expected). \u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eerendrake has started looking into it. For my part I plan to play a bit of stock 0.90 KSP for a day or two first to understand the new features from a player\u0027s viewpoint before I look at how those changes affect the kOS mod.\u003C/p\u003E\n"},{"CreatedByName":"Cairan","CreatedById":85361,"CreatedDateTime":"2014-12-16T03:51:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003EWell it looks like 0.90 broke kOS (as expected). \u003C/span\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eerendrake has started looking into it. For my part I plan to play a bit of stock 0.90 KSP for a day or two first to understand the new features from a player\u0027s viewpoint before I look at how those changes affect the kOS mod.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESame story here... ever since it became obvious 0.90 was around the corner it\u0027s been hard not to wait for the changes to come to light...\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-12-16T08:24:43Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003ENew Pre-Release v0.15.4\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Ethis is a shoot from the hip update that we put together in a few hours. it has almost no testing so please let us know if you have any trouble with it.\u003C/p\u003E\u003Cp\u003E \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/68096-kOS-Autopilot/page41\u0022 rel=\u0022external nofollow\u0022\u003EDev Thread\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-16T08:26:52Z\u0022 title=\u002212/16/2014 08:26  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 16, 2014\u003C/time\u003E by erendrake\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"hexd86","CreatedById":132074,"CreatedDateTime":"2014-12-16T12:49:09Z","Content":"\n\u003Cp\u003EThanks for the update, erendrake!\u003C/p\u003E\u003Cp\u003EMeanwhile, I wanted to ask a question about the \u003Cstrong\u003E\u0022GeoCoordinates:TerrainHeight\u0022\u003C/strong\u003E parameter. I\u0027ve tested it on a rover around KSC and for some reason it gives very erratic output when driving around on mostly flat land. Sometimes it would give adequate values \u003Ca href=\u0022http://imgur.com/LmPZCUK\u0022 rel=\u0022external nofollow\u0022\u003E(Example1)\u003C/a\u003E, and sometimes would be comepletely wrong, telling me I was under the surface of terrain \u003Ca href=\u0022http://i.imgur.com/umeEPTx.jpg\u0022 rel=\u0022external nofollow\u0022\u003E(Example2)\u003C/a\u003E. These two screenshots were made within 500m driving distance around KSC.\u003C/p\u003E\u003Cp\u003EWhat could be causing such a erratic behaviour?\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.reddit.com/r/Kos/comments/2pgc97/terrain_height_script_mystery/\u0022 rel=\u0022external nofollow\u0022\u003ELink to reddit/KOS discussion, with code: \u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\n"},{"CreatedByName":"xZise","CreatedById":59798,"CreatedDateTime":"2014-12-16T13:23:48Z","Content":"\n\u003Cp\u003EI\u0027m using kOS 0.15.3.0 on KSP 0.25 and wondering if there are something like exceptions (or simply exiting the script) and if it\u0027s possible to request an action of the user to ask if the script shall continue.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-12-16T13:52:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xZise\u0022 data-cite=\u0022xZise\u0022\u003E\u003Cdiv\u003EI\u0027m using kOS 0.15.3.0 on KSP 0.25 and wondering if there are something like exceptions (or simply exiting the script) and if it\u0027s possible to request an action of the user to ask if the script shall continue.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBoth user keyboard input and an \u0022exit\u0022 are not there yet. Part of the reason why is that both, while they\u0027d be simple on their own, are tied up with more complex changes we want to do that affect how they get implemented. Key input is tied to making the terminal better and more dynamic, changeable, and remoteable. The \u0027exit\u0027 is tied to making proper functions (because of the need to decide if we want exit codes from RUN commands, or return objects from functions, or both).\u003C/p\u003E\u003Cp\u003ESometimes when I\u0027ve needed an emergency \u0022exit\u0022 in a script, I cheated and deliberately caused a runtime error to force the program to quit. (for example, trying to divide by zero).\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-12-16T16:26:36Z","Content":"\n\u003Cp\u003EIt is using the following algorithm:\u003C/p\u003E\u003Cp\u003E1 - Try calculating the terrain height using the ideal terrain function (PQS) which represents a smooth curve of terrain as seen from high up in space, not the actual polygons that approximate it once you get low down.\u003C/p\u003E\u003Cp\u003E2 - Try doing a raycast to hit the terrain polygons.\u003C/p\u003E\u003Cp\u003EIf the raycast worked, return that, else return the ideal PQS value.\u003C/p\u003E\u003Cp\u003EI suspect the raycast is intermittently failing, because it\u0027s notoriously unreliable unless you call it with precisely the right timing. It\u0027s a problem I\u0027ve encountered in another mod I was writing and trying to diagnose why it randomly misses is a royal mess. The docs in Unity explaining how you\u0027re supposed to use it do NOT cover all the tricky timing issues that break it so trying to figure out what\u0027s wrong is pure random guesswork based on user community suggestions (that contradict each other).\u003C/p\u003E\u003Cp\u003EFixing it is not a high priority because usually you use geocordinates to work with terrain at any arbitrary point that could be far away - so the polygon hits aren\u0027t really usable for that anyway. For local polygon hits right under you, the alt:radar is good.\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-12-17T04:15:29Z","Content":"\n\u003Cp\u003EDo I understand correctly that, as of 0.15, kOS has the ability to intercept player inputs which kOS is free to interpret and alter before passing them on to KSP?\u003C/p\u003E\u003Cp\u003EEdit: confirmed. This. Is. Awesome!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-17T05:11:25Z\u0022 title=\u002212/17/2014 05:11  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 17, 2014\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-12-17T05:38:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EDo I understand correctly that, as of 0.15, kOS has the ability to intercept player inputs which kOS is free to interpret and alter before passing them on to KSP?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is the plan \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E we ran into a problem where the autopilot was appearing as well as user controls \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E we have a fix in the works and should be in pretty soon.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/structure/control/index.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/structure/control/index.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIts the pilot section at the bottom.\u003C/p\u003E\n"},{"CreatedByName":"Masaker","CreatedById":73186,"CreatedDateTime":"2014-12-17T11:08:05Z","Content":"\n\u003Cp\u003EI have problem with HEADING property. If I write \u003Cstrong\u003Eprint HEADING.\u003C/strong\u003E It always return 0 or very small value. What is wrong?\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-12-17T18:05:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erendrake\u0022 data-cite=\u0022erendrake\u0022\u003E\u003Cdiv\u003EIts the pilot section at the bottom.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI already tested it yesterday with some analogue goodness from my controller \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E At first I felt a bit like a cat that finally caught the mouse and doesn\u0027t know what to do with it, but I realized I could use it to finally fix an annoyance with how KSP looks at controllers. The triggers are on the same axis, meaning that one trigger is only half an axis, which in turn means that using it as a manual hovering throttle is not optimal. Now I can just have kOS double up my throttle input, giving me full throttle range on a single axis. Well, I guess you in lose some resolution, as every step is now two units rather than one, but since the resolution of the analogue controls is pretty fine-grained anyway I do not think it will be noticeable*. Not the most sophisticated of scripts, but useful.\u003C/p\u003E\u003Cp\u003EAnother use I could think of right away is a safety system for my favourite little runabout air plane. Ever since Ferram added certain aerodynamic stresses to FAR, I tend to rip the tail off of it when doing steep turns. I hope to figure out some sort of variable or metric or combination of a couple of them that could serve as an indicator for imminent doom. That way I can have kOS dial back the input et voil\u00C3\u0192\u00C2\u00A0, no disassembly.\u003C/p\u003E\u003Cp\u003E*I could not help myself and had to look into this a bit. Apparently, the triggers on the Xbox 360 controller \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.reference.xinput_gamepad%28v=vs.85%29.aspx\u0022 rel=\u0022external nofollow\u0022\u003Ehave 256 levels\u003C/a\u003E (so they are 8 bits), meaning you are left with 128. The sticks seem a bit more sophisticated with 65536 levels (256 * 256 levels, so 16 bits). Pretty cool tech.\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-12-17T18:14:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EAnother use I could think of right away is a safety system for my favourite little runabout air plane. Ever since Ferram added certain aerodynamic stresses to FAR, I tend to rip the tail off of it when doing steep turns. I hope to figure out some sort of variable or metric or combination of a couple of them that could serve as an indicator for imminent doom. That way I can have kOS dial back the input et voil\u00C3\u0192\u00C2\u00A0, no disassembly.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyou can currently kick FAR into a debug mode that will add the stress data to the right click menu for each part. that way you can monitor the parts that you are overstressing and tell kos to not let you exceed it. a real fly by wire system would be pretty cool \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-12-17T18:31:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erendrake\u0022 data-cite=\u0022erendrake\u0022\u003E\u003Cdiv\u003Ethat way you can monitor the parts that you are overstressing and tell kos to not let you exceed it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan I have kOS readout those values directly or are you suggesting a more indirect approach? \u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003Ea real fly by wire system would be pretty cool \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThose would be the very humble beginnings of one, I suppose \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-12-17T20:38:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003ECan I have kOS readout those values directly or are you suggesting a more indirect approach? \u003Cp\u003EThose would be the very humble beginnings of one, I suppose \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ewell, because we now let you query any value that is in the right click menu. As soon as FAR adds that debug information you can get it and do whatever you want with it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/command/shipquery/index.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/command/shipquery/index.html\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-12-17T21:57:58Z","Content":"\n\u003Cp\u003ESteven has very kindly answered my question in the Infernal Robotics thread:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EYes you can control IR from kOS now (although kOS is in a state of flux at the moment because KSP 0.90 broke some stuff about how autopiloting works. KSP\u0027s 0.90 changes are VERY much in the same areas that kOS has its fingers in, so don\u0027t expect kOS to be 0.90 compatible for a while yet. We kOS devs aren\u0027t part of the experimentals group so we only just got our first chance to be aware of the changes yesterday.)\u003Cp\u003EA simple dumb example of manipulating an IR part from a kOS script:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E// Assuming THEPART is a part that is an infernal robotics part, move that \u003Cbr\u003E// part in the \u0022\u002B\u0022 direction for 1 second, then stop moving:\u003Cbr\u003ESET robotModule TO THEPART:GETMODULE(\u0022MUMECHTOGGLE\u0022).\u003Cbr\u003ErobotModule:DOACTION(\u0022MOVE \u002B\u0022, true).\u003Cbr\u003EWAIT 1.\u003Cbr\u003ErobotModule:DOACTION(\u0022MOVE \u002B\u0022, false).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EMore full descriptions can be found here (for now - the docs are about to move to a new location) : \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/summary_topics/ship_parts_and_modules/index.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/summary_topics/ship_parts_and_modules/index.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is wonderful, but being the greedy little bugger I am I want more. It there any way to read or set the positional/angle values of a hinge or other IR part, or the speed? My apologies if I overlooked this information in the link provided, I am still trying to get to terms with these functionalities.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erendrake\u0022 data-cite=\u0022erendrake\u0022\u003E\u003Cdiv\u003Ewell, because we now let you query any value that is in the right click menu. As soon as FAR adds that debug information you can get it and do whatever you want with it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EEnough with the awesomeness already!\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003EI found something else I was looking for in a link behind your link too. Looks like I have some reading up to do.\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-12-18T01:52:58Z","Content":"\n\u003Cp\u003EI have a little trouble locking certain values. When I \u003Cem\u003Eset engine_0:thrustlimit to ship:control:pilotmainthrottle\u003C/em\u003E it is not a problem, but when I try to lock the same value by using \u003Cem\u003Elock engine_0:thrustlimit to ship:control:pilotmainthrottle\u003C/em\u003E kOS throws an error. Any suggestions?\u003C/p\u003E\u003Cp\u003EI also noticed the (really nice) kOS button/menu is not working most of the time.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-18T03:27:04Z\u0022 title=\u002212/18/2014 03:27  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 18, 2014\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-12-18T02:24:44Z","Content":"\n\u003Cp\u003ESorry for the spam \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E You wanted testing, you get testing!\u003C/p\u003E\u003Cp\u003EThere is something weird going on. When I run the following script in combination with my Xbox 360 controller, the ship:control:pilotmainthrottle follows my controller trigger nicely whatever I do with the trigger. However, the variable that is calculated based on the same value only follows when the trigger is moved in a somewhat slow and controlled fashion. If I release the trigger quickly, only ship:control:pilotmainthrottle follows suit, but the value that is based on it stays where it is. At first I thought the controller or KSP was to blame, but since the ship:control:pilotmainthrottle is correct every time I think the problem is with kOS somehow. So:\u003C/p\u003E\u003Cp\u003ETrigger neutral: \u003C/p\u003E\u003Cp\u003Eship:control:pilotmainthrottle = 0,5\u003C/p\u003E\u003Cp\u003E((ship:control:pilotmainthrottle - 0.5) * 2) = 0\u003C/p\u003E\u003Cp\u003ETrigger pressed:\u003C/p\u003E\u003Cp\u003Eship:control:pilotmainthrottle = 1\u003C/p\u003E\u003Cp\u003E((ship:control:pilotmainthrottle - 0.5) * 2) = 1\u003C/p\u003E\u003Cp\u003ETrigger released slowly:\u003C/p\u003E\u003Cp\u003Eship:control:pilotmainthrottle = 0,5\u003C/p\u003E\u003Cp\u003E((ship:control:pilotmainthrottle - 0.5) * 2) = 0.\u003C/p\u003E\u003Cp\u003ETrigger released quickly\u003C/p\u003E\u003Cp\u003Eship:control:pilotmainthrottle = 0,5\u003C/p\u003E\u003Cp\u003E((ship:control:pilotmainthrottle - 0.5) * 2) = between 1 and 0,6 depending on how quickly.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eclearscreen.\u003Cbr\u003Elights off.\u003Cbr\u003E\u003Cbr\u003Euntil lights=true {\u003Cbr\u003E\tprint ship:control:pilotmainthrottle at (0,1).\u003Cbr\u003E\tprint ((ship:control:pilotmainthrottle - 0.5) * 2) at (0,2).\u003Cbr\u003E}.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-18T02:30:32Z\u0022 title=\u002212/18/2014 02:30  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 18, 2014\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-12-18T05:04:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Camacha\u0022 data-cite=\u0022Camacha\u0022\u003E\u003Cdiv\u003EI have a little trouble locking certain values. When I \u003Cem\u003Eset engine_0:thrustlimit to ship:control:pilotmainthrottle\u003C/em\u003E it is not a problem, but when I try to lock the same value by using \u003Cem\u003Elock engine_0:thrustlimit to ship:control:pilotmainthrottle\u003C/em\u003E kOS throws an error. Any suggestions?\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELocking does not work with suffixes of any type.\u003C/p\u003E\u003Cp\u003ELOCK AAAAA:BBBBB TO CCCCCC.\u003C/p\u003E\u003Cp\u003EWill fail for *any* AAAAA, BBBBB, or CCCCC.\u003C/p\u003E\u003Cp\u003EThe LOCK command only works on simple single values. This is a limitation of it that I\u0027d like to fix some day, but working out the right thing to do is a bit messy if the chain of suffixes is itself changeable.\u003C/p\u003E\u003Cp\u003EFor example, it you:\u003C/p\u003E\u003Cp\u003ELOCK SHIP:PARTSTAGGED(\u0022my engine\u0022)[0]:THRUSTLIMIT TO TWR*1.2.\u003C/p\u003E\u003Cp\u003EThe problem is in having to work out which of these was meant:\u003C/p\u003E\u003Cp\u003E\u003Cem\u003Eoption 1:\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EFirst, Up front:\u003C/p\u003E\u003Cp\u003EGet the parts tagged \u0022my engine\u0022. get the zeroth such engine, and get a handle to its thrustlimit.\u003C/p\u003E\u003Cp\u003EThen, continually update each time:\u003C/p\u003E\u003Cp\u003EThat thrustlimit\u0027s value to TWR*1.2, regardless of how PARTSTAGGED(\u0022My engine\u0022) might change.\u003C/p\u003E\u003Cp\u003E\u003Cem\u003Eoption 2:\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EFirst, Up front:\u003C/p\u003E\u003Cp\u003EDo nothing.\u003C/p\u003E\u003Cp\u003EThen, continually update each time:\u003C/p\u003E\u003Cp\u003ERe-run PARTSTAGGED(\u0022my engine\u0022) to recalculate what the zeroth such part is at the MOMENT, just in case that changes, then set it\u0027s thrustlimit to TWR*1.2.\u003C/p\u003E\u003Cp\u003EOption 2 would correctly handle the case where the suffix changes what it means from one moment to the next, but it would be wastefully expensive for the majority of cases where it doesn\u0027t.\u003C/p\u003E\u003Cp\u003EI don\u0027t know the right answer for choosing between option 1 or option 2, which is why I haven\u0027t addressed this hole in the language yet. By deliberately not picking one or the other, I force the script writer to do it explicitly if they want lock-like behavior - they have to do it in their own trigger, where their own code would decide which way to do it.\u003C/p\u003E\u003Cp\u003EOption 1 can be implemented this way:\u003C/p\u003E\u003Cp\u003ESET FOO TO SHIP:PARTSTAGGED(\u0022my engine\u0022)[0]. // calculate this part just once.\u003C/p\u003E\u003Cp\u003EWHEN TRUE THEN { SET FOO:THRUSTLIMIT TO TWR*1.2. PRESERVE. }. // recalculate this part over and over.\u003C/p\u003E\u003Cp\u003EOption 2 can be implemented this way:\u003C/p\u003E\u003Cp\u003EWHEN TRUE THEN { SET SHIP:PARTSTAGGED(\u0022my engine\u0022)[0]:THRUSTLIMIT TO TWR*1.2. PRESERVE. }. // Recalculate the whole chain of suffixes over and over.\u003C/p\u003E\u003Cp\u003EWarning, Option 2 is very expensive because it does a walk of the whole parts tree every update, which is why I\u0027m reluctant to implement LOCK this way even though it would be linguistically more correct with how the language probably is meant to work.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EI also noticed the (really nice) kOS button/menu is not working most of the time.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan you elaborate? It\u0027s intended to work like the other buttons up there where it\u0027s mutually exclusive with the other panels (i.e. you hover the mouse to bring the panel up temporarily, or click to leave it up and click again to make it go away, and it won\u0027t appear if one of the other panels is up instead (i.e. the resource panel).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-18T05:05:51Z\u0022 title=\u002212/18/2014 05:05  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 18, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003Cbr\u003ETagged the box for disabling the F***ing smilieys. Why on earth can\u0026#039;t I set that as my default dammit!!\n\u003C/span\u003E\n"},{"CreatedByName":"Camacha","CreatedById":59088,"CreatedDateTime":"2014-12-18T05:57:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003ECan you elaborate? It\u0027s intended to work like the other buttons up there where it\u0027s mutually exclusive with the other panels (i.e. you hover the mouse to bring the panel up temporarily, or click to leave it up and click again to make it go away, and it won\u0027t appear if one of the other panels is up instead (i.e. the resource panel).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECome to think of it, I think I saw the panel once. Now I can click or hover all I want, I don\u0027t get a panel. All other panels do what they are expected to do. If I have some time I might see whether I can reproduce this in a fresh installation.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-18T08:17:25Z\u0022 title=\u002212/18/2014 08:17  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 18, 2014\u003C/time\u003E by Camacha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-12-18T06:17:37Z","Content":"\n\u003Cp\u003Ehey guys, I need to barge in with something out of left field. I\u0027m trying to track down \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/36476-WIN-MAC-KSP-Trajectory-Optimization-Tool-v1-1-8-Aerobraking%21?p=1593371\u0026amp;viewfull=1#post1593371\u0022 rel=\u0022external nofollow\u0022\u003Ean issue with KSPTOT\u003C/a\u003E and it led me to pull the orbital period values of Minmus, Mun and Ike from kOS. This is what I got from the body:obt:period property for each:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/eSgKNaf.png\u0022 alt=\u0022eSgKNaf.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ENone of these values match what KSPTOT is giving me for the orbital periods of these bodies. And I actually put their orbital properties (LAN, EPH, LPE, SMA, MNA) into Mission Architect to calculate the orbital period. The orbital period calculated by KSPTOT matches what is stated for sidereal orbital period by the KSP wiki for these bodies.\u003C/p\u003E\u003Cp\u003EAny ideas as to the discrepancy here?\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-12-18T09:41:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003Ehey guys, I need to barge in with something out of left field. I\u0027m trying to track down \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/36476-WIN-MAC-KSP-Trajectory-Optimization-Tool-v1-1-8-Aerobraking%21?p=1593371\u0026amp;viewfull=1#post1593371\u0022 rel=\u0022external nofollow\u0022\u003Ean issue with KSPTOT\u003C/a\u003E and it led me to pull the orbital period values of Minmus, Mun and Ike from kOS. This is what I got from the body:obt:period property for each:\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/eSgKNaf.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/eSgKNaf.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENone of these values match what KSPTOT is giving me for the orbital periods of these bodies. And I actually put their orbital properties (LAN, EPH, LPE, SMA, MNA) into Mission Architect to calculate the orbital period. The orbital period calculated by KSPTOT matches what is stated for sidereal orbital period by the KSP wiki for these bodies.\u003C/p\u003E\u003Cp\u003EAny ideas as to the discrepancy here?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s only off by a little bit, and what we are returning is *exactly* what the KSP API says for Orbit.period. Given that we are just returning what the API directly says, I\u0027d be more inclined to believe the wiki is wrong than that our number is wrong.\u003C/p\u003E\u003Cp\u003EAlso note that there\u0027s multiple different kinds of measurements for period, depending on what you take as the \u0022same\u0022 point the body comes back to, in a constantly moving reference frame with a parent body that isn\u0027t in the same place it was when your orbit cycle began. Sadly, the utter lack of documentation for the KSP API means we\u0027re not being told which kind of period it is giving. These slightly different versions of Period give slightly different, but close to each other, values.\u003C/p\u003E\u003Cp\u003EMy guess is that it\u0027s referring to the period according to the local raw SOI space (which kOS hides from you by always making all positions get reported relative to the CoM of the CPU\u0027s vessel) - how long would it take to return to the same XYZ grid coords relative to the parent planet if those grid coords remained fixed and didn\u0027t switch reference (i.e. if you kept the same vessel focused for a whole orbit).\u003C/p\u003E\u003Cp\u003EIn the real world, if you want to take a period measurement in an inertial reference frame where you don\u0027t take into account the rotation of the planet itself or its orbit around its primary body, then you have to do it against the starfield \u0022backdrop\u0022 of the solar system (which itself is still changing too, of course, but it\u0027s changing slowly enough that you can use it like it was fixed in space). In KSP you get that same sort of meaning (the period in properly behaved linear inertial reference frame that\u0027s not rotating as the objects move) NOT by doing it against the starfield but by doing it against the local subspace coordinate grid to which the primary body\u0027s SOI is fixed.\u003C/p\u003E\u003Cp\u003EAnd that\u0027s a meaning of \u0022period\u0022 that you\u0027re just not going to find in any real world astronomy manual because it\u0027s purely an artifact of the KSP simulation that doesn\u0027t actually map to a real world phenomenon.\u003C/p\u003E\u003Cp\u003EBut this is pure guesswork because SQUAD never documents their API. What we\u0027re returning is \u0022whatever SQUAD means when THEY say \u0027period\u0027 in the API.\u0022\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-12-18T10:46:23Z","Content":"\n\u003Cp\u003EThanks Steven, that\u0027s what I was afraid was going on. It would seem that the frame of reference used by KSPTOT to calculate period is different from that of the game. I\u0027m sure Arrowstar can work this out now that he knows about it. Not sure where the wiki got its orbital periods from, but I\u0027m guessing Arrowstar checked his math against them instead of the game\u0027s values. This small difference in orbital period I think would be enough to account for the minor inaccuracies I\u0027ve been seeing when plotting out trajectories from one SOI to another in KSPTOT. Around the bodies themselves things match up fine.\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2014-12-18T20:09:12Z","Content":"\n\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/eSgKNaf.png\u0022 alt=\u0022eSgKNaf.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ECan anyone run the commands you see in the image I posted above and tell me their results? I just had toadicus over in the VOID thread show me that in his game kOS is giving him numbers that align with the orbital periods given by KSPTOT and the wiki:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://toad.homelinux.net/pics/KSP/VOID/kOS25-Mun_Minmus_Ike.png\u0022 alt=\u0022kOS25-Mun_Minmus_Ike.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EI can\u0027t imagine what mod would affect this but it seems I may have something screwing up my install.\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-12-18T20:50:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003E\u003Ca href=\u0022http://i.imgur.com/eSgKNaf.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/eSgKNaf.png\u003C/a\u003E\u003Cp\u003ECan anyone run the commands you see in the image I posted above and tell me their results? I just had toadicus over in the VOID thread show me that in his game kOS is giving him numbers that align with the orbital periods given by KSPTOT and the wiki:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://toad.homelinux.net/pics/KSP/VOID/kOS25-Mun_Minmus_Ike.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://toad.homelinux.net/pics/KSP/VOID/kOS25-Mun_Minmus_Ike.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI can\u0027t imagine what mod would affect this but it seems I may have something screwing up my install.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ewhat other mods do you have installed?\u003C/p\u003E\n"}]}