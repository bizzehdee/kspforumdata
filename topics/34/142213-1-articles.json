{"TopicId":142213,"ForumId":34,"TopicTitle":"PEGAS - Powered Explicit Guidance Ascent System - devlog","CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-06-22T01:03:11Z","PageNum":1,"Articles":[{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-06-22T01:03:11Z","Content":"\n\u003Cp\u003E\nI am proud to present \u003Cstrong\u003EPEGAS:\u00A0Powered Explicit Guidance Ascent System\u003C/strong\u003E - a kOS script for automated launches using a real-world guidance algorithm taken straight from the \u003Cstrong\u003ESpace Shuttle\u003C/strong\u003E \u003Ca href=\u0022http://ntrs.nasa.gov/search.jsp?R=19740004402\u0022 rel=\u0022external nofollow\u0022\u003Edocumentation\u003C/a\u003E: the Unified Powered Flight Guidance!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:18px;\u0022\u003EWhat is PEGAS and what is it capable of?\u003C/span\u003E\u003Cbr\u003E\nPEGAS is a launch autopilot made in kOS. Its aim is, given a vehicle description and a mission target, to execute the entire ascent to a desired\u00A0orbit. It supports defining orbits by \u003Cstrong\u003Eperiapse\u003C/strong\u003E, \u003Cstrong\u003Eapoapse\u003C/strong\u003E, \u003Cstrong\u003Einclination\u003C/strong\u003E and \u003Cstrong\u003Elongitude of ascending node\u003C/strong\u003E - allowing you to ascend to any (reachable) orbit in any given \u003Cstrong\u003Eorbital plane\u003C/strong\u003E. You can even select a target in the map and launch to the exact plane of this object.\n\u003C/p\u003E\n\u003Cp\u003E\nShort list of what PEGAS can do, in the approximate order of when it will be doing it:\n\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\nautomatic launch window and azimuth calculation,\n\u003C/li\u003E\n\u003Cli\u003E\nflexible atmospheric ascent using one of two modes:\n\u003Cul\u003E\n\u003Cli\u003E\nsimple ascent in 3 steps:\u00A0vertical ascent for a given time, pitch-over by a given angle, hold prograde,\n\u003C/li\u003E\n\u003Cli\u003E\nadvanced ascent by pitch-altitude table (thanks to \u003Ca href=\u0022https://github.com/Aram1d\u0022 rel=\u0022external nofollow\u0022\u003EAram1d\u003C/a\u003E)\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nevent system, allowing you to schedule things like fairings jettison, throttle management, roll maneuvers, or anything you want (via KOSDelegates),\n\u003C/li\u003E\n\u003Cli\u003E\nflexible automatic staging, allowing for even complex staging sequences requiring separation of a spent stage, ignition of ullage motors (\u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003E\u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E\u003C/abbr\u003E or \u003Cabbr title=\u0022Reaction Control System\u0022\u003E\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E\u003C/abbr\u003E), ignition of the main engine,\n\u003C/li\u003E\n\u003Cli\u003E\nprecise orbital guidance using UPFG, able to target any elliptic orbit in any plane (provided the vehicle can physically reach it), including launching to a plane of an existing object,\n\u003C/li\u003E\n\u003Cli\u003E\ninter-CPU communication (credit to \u003Ca href=\u0022https://github.com/Patrykz94\u0022 rel=\u0022external nofollow\u0022\u003EPatrykz94\u003C/a\u003E) system made with reusable boosters in mind (also see his \u003Ca href=\u0022https://github.com/Patrykz94/KSP-RO-Booster-Landing\u0022 rel=\u0022external nofollow\u0022\u003EFalcon-style landing script\u003C/a\u003E).\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\nContributors (thank you \u003Cimg alt=\u0022:rep:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/rep.png\u0022 title=\u0022:rep:\u0022\u003E):\n\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://github.com/Patrykz94\u0022 rel=\u0022external nofollow\u0022\u003EPatrykz94\u003C/a\u003E\u00A0- inter-CPU communication system\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/172084-pand5461/\u0022 rel=\u0022\u0022\u003EPand5461\u003C/a\u003E\u00A0-\u00A0upgraded CSE routine\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://github.com/Aram1d\u0022 rel=\u0022external nofollow\u0022\u003EAram1d\u003C/a\u003E - pitch-altitude atmospheric guidance\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\nFor a general showcase, see my most recent video, where PEGAS controls an Atlas V ascent to a parking orbit for a rendezvous with an International Space Station:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo ipsEmbeddedVideo_limited\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 width=\u0022480\u0022 data-embed-src=\u0022https://www.youtube.com/embed/NEQD7AQoLXk?feature=oembed\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nPEGAS is approximately 2000 lines of code long and released under the \u003Ca href=\u0022https://github.com/Noiredd/PEGAS/blob/master/LICENSE\u0022 rel=\u0022external nofollow\u0022\u003EMIT license\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:18px;\u0022\u003EHow do I get it, run it, read more about it?\u003C/span\u003E\u003Cbr\u003E\n\u003Cstrong\u003EYou can get the code from my GitHub (\u003Ca href=\u0022https://github.com/Noiredd/PEGAS/releases/tag/v1.3\u0022 rel=\u0022external nofollow\u0022\u003Ecurrent release: v1.3 \u0022Olympus\u0022\u003C/a\u003E).\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EYou are strongly encouraged to read the \u003Ca href=\u0022https://github.com/Noiredd/PEGAS/blob/master/docs/tutorial.md\u0022 rel=\u0022external nofollow\u0022\u003Etutorial\u003C/a\u003E and \u003Ca href=\u0022https://github.com/Noiredd/PEGAS/blob/master/docs/reference.md\u0022 rel=\u0022external nofollow\u0022\u003Ereference\u003C/a\u003E!\u003C/strong\u003E PEGAS is not a straightforward \u0022click this to fly\u0022 kind of tool and needs to be set up for your vehicle and mission.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you\u0027re interested in the mathematical details of the algorithm itself - check my \u003Ca href=\u0022https://github.com/Noiredd/PEGAS-MATLAB\u0022 rel=\u0022external nofollow\u0022\u003Eprototype repository\u003C/a\u003E,\u00A0especially\u00A0its \u003Ca href=\u0022https://github.com/Noiredd/PEGAS-MATLAB/blob/master/docs/readme.md\u0022 rel=\u0022external nofollow\u0022\u003Edocumentation\u003C/a\u003E.\u003Cbr\u003E\nIf you\u0027ve spotted a bug or have a feature request - feel free to post either in this thread, or better yet on my GitHub issue tracker (\u003Ca href=\u0022https://github.com/Noiredd/PEGAS/blob/master/docs/issues.md\u0022 rel=\u0022external nofollow\u0022\u003Eread this\u003C/a\u003E, please).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:18px;\u0022\u003EWhat is this thread?\u003C/span\u003E\u003Cbr\u003E\nThis thread carries a history of my development, from the first version of PEGAS that used a very basic formulation of Powered Explicit Guidance, through all my effort to implement the Space Shuttle guidance, to the release of a complete guidance script and all subsequent updates.\n\u003C/p\u003E\n\u003Cp\u003E\nHistory of progress:\n\u003C/p\u003E\n\u003Cul\u003E\n\u003Cli\u003E\nSummer 2015 - work on a MATLAB prototype using a basic form of\u00A0Powered Explicit Guidance (read about the algorithm \u003Ca href=\u0022http://www.orbiterwiki.org/wiki/Powered_Explicit_Guidance\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E).\n\u003C/li\u003E\n\u003Cli\u003E\nLate 2015 - MATLAB code ported to kOS.\n\u003C/li\u003E\n\u003Cli\u003E\nFebruary 2016 - release of the first version of PEGAS (watch my video \u003Ca href=\u0022https://www.youtube.com/watch?v=0LGAizO-6K4\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E, but bear in mind that this has very little in common with the current state of the project).\n\u003C/li\u003E\n\u003Cli\u003E\nSummer 2016 - I\u0027m back at work on PEGAS, researching the Space Shuttle documentation.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/\u0026amp;tab=comments#comment-2722594\u0022 rel=\u0022\u0022\u003EAugust 2016\u003C/a\u003E -\u00A0 working MATLAB prototype of the Unified Powered Flight Guidance taken right from the Space Shuttle GN\u0026amp;C documentation - its Ascent Mode allows targeting orbits in a given \u003Cstrong\u003Eorbital plane\u003C/strong\u003E. Read more \u003Ca href=\u0022https://github.com/Noiredd/PEGAS-MATLAB/blob/master/docs/upfg.md\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/\u0026amp;do=findComment\u0026amp;comment=2832549\u0022 rel=\u0022\u0022\u003EOctober 2016\u003C/a\u003E\u00A0- implementation of UPFG for multiple stages.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/#comment-2865169\u0022 rel=\u0022\u0022\u003ENovember 2016\u003C/a\u003E\u00A0- verification of PEGAS\u0027 capabilities with several launch vehicles, sites, and targets, proving its great accuracy (plane error below \u003Cstrong\u003Eone hundredth of a degree\u003C/strong\u003E means correction maneuver of about \u003Cstrong\u003E1m/s\u003C/strong\u003E).\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/#comment-2944030\u0022 rel=\u0022\u0022\u003EFebruary 2017\u003C/a\u003E\u00A0- the MATLAB prototype is complete, work on the kOS port begins.\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/\u0026amp;do=findComment\u0026amp;comment=3002130\u0022 rel=\u0022\u0022\u003EMarch 2017\u003C/a\u003E\u00A0- numerical consistency proven between MATLAB and kOS implementations of the\u00A0key UPFG algorithm.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/\u0026amp;do=findComment\u0026amp;comment=3067519\u0022 rel=\u0022\u0022\u003EMay 2017\u003C/a\u003E - basic version of PEGAS flies a simple rocket in KSP.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/\u0026amp;do=findComment\u0026amp;comment=3135557\u0022 rel=\u0022\u0022\u003EJuly 20\u003Cu\u003E17\u003C/u\u003E\u003C/a\u003E - \u003Cu\u003Efirst release of PEGAS!\u003C/u\u003E\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/\u0026amp;do=findComment\u0026amp;comment=3211741\u0022 rel=\u0022\u0022\u003ENovember 2017\u003C/a\u003E - PEGAS version 1.1 is out!\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/\u0026amp;do=findComment\u0026amp;comment=3910439\u0022 rel=\u0022\u0022\u003EJanuary 2021\u003C/a\u003E - PEGAS version 1.2 is out!\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/142213-pegas-powered-explicit-guidance-ascent-system-devlog/\u0026amp;do=findComment\u0026amp;comment=4181419\u0022 rel=\u0022\u0022\u003EOctober 2022\u003C/a\u003E - PEGAS version 1.3 \u0022Olympus\u0022 is out!\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cp\u003E\nRelease v1.3 \u0022Olympus\u0022 is the \u003Cstrong\u003Efinal major release of PEGAS\u003C/strong\u003E. Therefore, I\u0027m switching this project into end-of-life mode, where it will only receive fixes to any bugs that might come out. Nonetheless, any updates will be posted to this thread, with this post being refreshed to link to the new developments. Thank you for following me on this journey\u00A0\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222022-10-02T16:40:20Z\u0022 title=\u002210/02/2022 04:40  PM\u0022 data-short=\u00221 yr\u0022\u003EOctober 2, 2022\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003Cbr\u003Elink to release 1.3\n\u003C/span\u003E\n"},{"CreatedByName":"AHO","CreatedById":49070,"CreatedDateTime":"2016-06-23T03:07:53Z","Content":"\n\u003Cp\u003E\nAwesome! I\u0027m doing something like this in KRPC. I\u0027ve actually been using some of your code to help me a little bit. I\u0027m trying to create a kind of universal mechjeb for realism overhaul and up-scaled kerbin,\u00A0using this and maybe the variant of iterative guidance mode\u00A0used in the apollo missions\u00A0for landings. Good luck on this in the future! Hope your exam goes well!\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2016-06-23T03:16:21Z","Content":"\n\u003Cp\u003E\nIf you manage to get the code into a usable state for inclination targeting, I\u0027m planning on using it to help with my OSIRIS-REx recreation mission. Good luck, we\u0027re all rooting for you.\n\u003C/p\u003E\n"},{"CreatedByName":"Ilpez","CreatedById":165871,"CreatedDateTime":"2016-06-25T09:26:43Z","Content":"\n\u003Cp\u003E\nJust sign up for this thread, it\u0027s me from reddit \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHappy to see your thread, well i have one request for your TODO LIST, PEG doesn\u0027t work with a very powerfull 1 stage, the stage that do the passive guide thing. If the cut-off orbital speed of the second stage are more than half of the required speed to get to the orbit, as soon as the PEG kick in, the rocket pitches to 90 degrees and the Burnout time going crazy. I hope you can find the workaround for this, i try but i fail.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m still a third grader in senior high school, so most of the equation are beyond me. So i need your help \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nEDIT : \u003Ca href=\u0022http://mirror.orbiter-radio.co.uk/orbiter/ohm/PoweredExplicitGuidance.zip\u0022 rel=\u0022external nofollow\u0022\u003EMaybe this one will help you\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-25T17:56:30Z\u0022 title=\u002206/25/2016 05:56  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 25, 2016\u003C/time\u003E by Ilpez\u003C/strong\u003E\n\u003Cbr\u003EFound some files on x-plane forum\n\u003C/span\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-08-15T17:54:09Z","Content":"\n\u003Cp\u003E\nUPDATE\n\u003C/p\u003E\n\u003Cp\u003E\nI decided to change my approach to this project and went the harder but more promising way. PEG as described in the original paper is inherently limited in its off-plane maneuvering capabilities (no explicit inclination/LAN control, only ensuring the target orbit plane contains some given vector), but the version of it as used in the Space Shuttle is much more agile, allowing for more constrained target orbits. For the past few weeks I was digging in the Shuttle documentation, particularly Guidance, Navigation and Control series. \u003Ca href=\u0022http://ntrs.nasa.gov/search.jsp?R=19740004402\u0022 rel=\u0022external nofollow\u0022\u003EEquation Document 24\u003C/a\u003E by T.J. Brand, D.W. Brown and J.P. Higgins titled \u003Cem\u003EUnified Powered Flight Guidance\u003C/em\u003E contains a full description as well as a block diagram of an almost complete algorithm (only missing bits are very hardware related, like TVC commands, nothing we have to worry about). The authors state it is capable of (among other things like deorbits and on-orbit maneuvers) guiding a multi-stage vehicle onto orbits defined by insertion altitude, velocity, flight path angle and \u003Cstrong\u003Eorbital plane\u003C/strong\u003E - in other words, target orbits could be defined by apoapsis\u002Bperiapsis and inclination \u002B longitude of ascending node.\n\u003C/p\u003E\n\u003Cp\u003E\nPoorly scanned documents from the 70\u0027s are not the most easy to use source of information, but I think I finally cracked it today! For now it\u0027s just a bare bones kind of solution in form of a MATLAB prototype, with all fancy parts removed (like multistage support) and tested in simplest conditions (equatorial launch with no out-of-plane velocity), but in principle it \u003Cem\u003Ealmost\u003C/em\u003E works \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/J8x3SMq.png\u0022 alt=\u0022J8x3SMq.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nBlack curve is Earth surface, red curve is guided trajectory. It looks reasonable and the numbers prove it: cutoff altitude was 251.6km (vs target of 250) but the velocity vector, although of proper magnitude, was not pointed exactly in the right direction (yielding apsis of 421x91km instead of a circular orbit). However, I believe that this is only a matter of minor tweaks, and I\u0027ll soon be able to test the algorithm on more complex targets (my goal is INC\u002BLAN constraints), and then move to developing a solution for multistage vehicles! \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165871-ilpez/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022165871\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/165871-ilpez/\u0022 rel=\u0022\u0022\u003E@Ilpez\u003C/a\u003E Are you referring to PEG, or PEGAS? For now my script does not fully support first stage guidance: that is, functions are there but you have to somehow come up with your own ascent profile (pitch vs time table). You can\u0027t use the numbers I attached with any first stage, especially not those very powerful ones.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll let myself call the rest of you guys, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123837\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0022 rel=\u0022\u0022\u003E@Dman979\u003C/a\u003E and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/49070-aho/\u0026amp;do=hovercard\u0022 data-mentionid=\u002249070\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/49070-aho/\u0022 rel=\u0022\u0022\u003E@AHO\u003C/a\u003E, I\u0027m not sure if the forum notifies users about updates.\n\u003C/p\u003E\n\u003Cp\u003E\nBTW, can anyone enlighten me about the current state of KSP and \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E? I wasn\u0027t playing at all for like 6 months now, only heard some rumors that worried me...\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2016-08-15T18:01:53Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124298\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0022 rel=\u0022\u0022\u003E@Reddy\u003C/a\u003E Even more targeting controls? That\u0027s great!\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nLast I heard, KSP and \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E were working quite well together. In fact, someone said it\u0027s the best it\u0027s been in a while.\n\u003C/p\u003E\n\u003Cp\u003E\nBut I\u0027ll ping \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275006\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0022 rel=\u0022\u0022\u003E@NathanKell\u003C/a\u003E and ask him.\n\u003C/p\u003E\n\u003Cp\u003E\nOh, and I wonder if \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/9417-ionstorm/\u0026amp;do=hovercard\u0022 data-mentionid=\u00229417\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/9417-ionstorm/\u0022 rel=\u0022\u0022\u003E@IonStorm\u003C/a\u003E could help, considering that he works for NASA? Maybe he\u0027d be able to get you some documents that you\u0027d need.\n\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2016-08-15T22:35:24Z","Content":"\n\u003Cp\u003E\nYep, very much the best it\u0027s ever been \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ilpez","CreatedById":165871,"CreatedDateTime":"2016-08-16T03:16:36Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124298\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0022 rel=\u0022\u0022\u003E@Reddy\u003C/a\u003E Well i was referring to PEGAS, but it looks like your new algorithm will be better than ever (yaiks ), just forget about my problem.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI hope this document will help you(there is a lot of flow chart in there)\u003Ca href=\u0022http://ntrs.nasa.gov/archive/nasa/casi.ntrs.nasa.gov/19760024151.pdf\u0022 rel=\u0022external nofollow\u0022\u003EShutte Guidance\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-17T15:05:23Z\u0022 title=\u002208/17/2016 03:05  PM\u0022 data-short=\u00227 yr\u0022\u003EAugust 17, 2016\u003C/time\u003E by Ilpez\u003C/strong\u003E\n\u003Cbr\u003EHelp\n\u003C/span\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-08-19T18:46:21Z","Content":"\n\u003Cp\u003E\nUPDATE\n\u003C/p\u003E\n\u003Cp\u003E\nNothing is ever perfect, but we only need things to be \u003Cstrong\u003Egood enough \u003C/strong\u003E- I\u0027m bringing you Unified Powered Flight Guidance! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThis took longer than it should, eventually all bugs were only caused by my own dumbness and overlooks, but the algorithm is now working. By \u003Cem\u003Ealgorithm\u003C/em\u003E I mean the single-stage version of a \u003Cu\u003EMATLAB prototype\u003C/u\u003E, and by \u003Cem\u003Eworking\u003C/em\u003E I mean it does guide my \u0022missile\u0022 into an orbit constrained by apoapsis, periapsis, inclination \u003Cstrong\u003Eand longitude of ascending node\u003C/strong\u003E - I launched from Kennedy Space Center and targeted a parking orbit in the International Space Station\u0027s plane. Below you can see a trajectory graph (thanks \u003Ca href=\u0022https://www.mathworks.com/matlabcentral/profile/authors/1050816-will-campbell\u0022 rel=\u0022external nofollow\u0022\u003EWill Campbell\u003C/a\u003E for that sweet Earth-looking sphere function) of the ascending rocket: red is powered phase, yellow is groundtrack, magenta is a target orbit groundtrack; cyan lines make a vehicle\u0027s frame of reference (navball-like).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022JcJtRbe.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/JcJtRbe.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nSome numbers:\n\u003C/p\u003E\n\u003Ctable border=\u00221\u0022 cellpadding=\u00221\u0022 cellspacing=\u00221\u0022 style=\u0022width:500px;\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\napoapsis [km ASL]\n\u003C/td\u003E\n\u003Ctd\u003E\nperiapsis [km ASL]\n\u003C/td\u003E\n\u003Ctd\u003E\ninclination [deg]\n\u003C/td\u003E\n\u003Ctd\u003E\nLAN [deg]\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\ntarget\n\u003C/td\u003E\n\u003Ctd\u003E\n200.00\n\u003C/td\u003E\n\u003Ctd\u003E\n200.00\n\u003C/td\u003E\n\u003Ctd\u003E\n51.65\n\u003C/td\u003E\n\u003Ctd\u003E\n256.88\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\nreached\n\u003C/td\u003E\n\u003Ctd\u003E\n239.11\n\u003C/td\u003E\n\u003Ctd\u003E\n167.86\n\u003C/td\u003E\n\u003Ctd\u003E\n51.83\n\u003C/td\u003E\n\u003Ctd\u003E\n257.68\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003Cp\u003E\nWhile this orbit is far from circular (over 0.005 eccentricity), plane targeting turned out pretty good. As usual though, there\u0027s some caveat: results are quite sensitive to the time of launch - that is: considering the rotation of the Earth, just where exactly is the launch site \u003Cem\u003Ewith respect to the target orbit\u003C/em\u003E. One degree makes a huge difference in the plane you end up on. This is understandable, since plane changes are among the most delta-v-expensive maneuvers, and with LAN it\u0027s much more difficult: not only the velocity vector is being aligned, but position as well. Just take a look at those plots, particularly the top-left one (pitch is blue, yellow is yaw):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00229Hx3knR.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/9Hx3knR.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nOver 30 degrees yaw the whole time and it gets to almost 55. The way I see it, the average \u003Cem\u003Eamount\u003C/em\u003E of yaw mostly depends on desired inclination (and launch site latitude) and one can\u0027t change it much, but the \u003Cem\u003Erate of change\u003C/em\u003E of yaw should depend on how well the launch was timed - there\u0027s some ideal liftoff moment when the rocket wouldn\u0027t have to maneuver in yaw at all and it would get to desired INC/LAN by just taking the right heading, but any deviation from that (earlier/later launch) requires some maneuvering to account for position change and align velocity vector for the right inclination. Correct me if I\u0027m wrong. Anyway, total change (from min to max) in this case was over 27 degrees, which means if I timed better, the precision could increase, too.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, what now? There are two big things to do: code the general solution for multistage vehicles is coming first. This involves some more equations and logic, but now that the core of the algorithm is working, it shouldn\u0027t be a big problem. After that, this all has to be ported to kOS and tested in actual, kerbal conditions! I just can\u0027t wait for this part \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E For now, you can check out the code on my \u003Ca href=\u0022https://github.com/Noiredd/PEGAS\u0022 rel=\u0022external nofollow\u0022\u003Egithub\u003C/a\u003E, if you have MATLAB you can test it yourself (\u003Ca href=\u0022https://github.com/Noiredd/PEGAS/commit/e32d2a97c994853b91827903434b137e9be64e28\u0022 rel=\u0022external nofollow\u0022\u003Ee32d2a97\u003C/a\u003E contains some basic how-to). And stay tuned for more updates!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-20T14:12:20Z\u0022 title=\u002208/20/2016 02:12  PM\u0022 data-short=\u00227 yr\u0022\u003EAugust 20, 2016\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2016-08-20T02:44:28Z","Content":"\n\u003Cp\u003E\nNice!\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124298\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0022 rel=\u0022\u0022\u003E@Reddy\u003C/a\u003E, one question: did you pass your final graduation exam? You might want to cross that off your list.\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2016-09-01T22:33:05Z","Content":"\n\u003Cp\u003E\nOh! Congrats on TOTM, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022124298\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/124298-reddy/\u0022 rel=\u0022\u0022\u003E@Reddy\u003C/a\u003E!\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-09-03T17:33:14Z","Content":"\n\u003Cp\u003E\nOh wow, that looks pretty awesome! \u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123837\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0022 rel=\u0022\u0022\u003E@Dman979\u003C/a\u003E do you know how does that happen? Someone picks the TotM, or is it random?\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EAnyway, nice motivation to keep going =)\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2016-09-03T18:07:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222740823\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472923994\u0022 data-ipsquote-userid=\u0022124298\u0022 data-ipsquote-username=\u0022Reddy\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n33 minutes ago, Reddy said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOh wow, that looks pretty awesome! \u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123837\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0022 rel=\u0022\u0022\u003E@Dman979\u003C/a\u003E do you know how does that happen? Someone picks the TotM, or is it random?\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EAnyway, nice motivation to keep going =)\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/16426-sal_vager/\u0026amp;do=hovercard\u0022 data-mentionid=\u002216426\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/16426-sal_vager/\u0022 rel=\u0022\u0022\u003E@sal_vager\u003C/a\u003E picks the ToTMs. But users can nominate threads that they feel deserve some attention. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-11-01T00:34:49Z","Content":"\n\u003Cp\u003E\nI am not dead. In fact, I spent the last few weeks working hard on PEGAS. Good news: it\u0027s getting closer and closer to maturity - it\u0027s just a few steps away from being ready to port to kOS. The most recent update is support for \u003Cstrong\u003Emultistage launch vehicles\u003C/strong\u003E!\n\u003C/p\u003E\n\u003Cp\u003E\nUnified Powered Flight Guidance (UPFG) algorithm is neatly divided into 2 sections: one is vehicle-specific (blocks 3 and 4 in the original document) and another is vehicle-agnostic. The good thing about it is that if it works well for one vehicle but fails for the other - the error is almost certainly in the first part. This section calculates a description of the vehicle, summarising its capabilities through all available stages in a series of numbers. Those numbers called \u003Cem\u003Ethrust integrals\u003C/em\u003E tell us (most basically) the amount of delta-v the vehicle has and how far it can go (in terms of distance) due to its thrust alone. Math behind them is pretty complicated and I don\u0027t have a full understanding of what\u0027s going on in there... perhaps if I did, getting it to work for more than one stage would take 5 days instead of weeks.\n\u003C/p\u003E\n\u003Cp\u003E\nThe Space Shuttle was a 2.5-stage vehicle: 1.5 stage in booster\u002Bsustainer mode (SRBs and SSMEs) plus 1 \u0022stage\u0022 for orbital operations, the OMS. After jettisoning the boosters, there was one more \u0022staging\u0022 point, where the main engines were switched from constant-thrust mode into acceleration-limited mode, where a 3g limit was set to protect the astronauts on board. While it isn\u0027t a physical stage, math behind it changes significantly - so I think it\u0027s a good example to show the new PEGAS capabilities. Below you have a 3D trajectory plot of a \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E launch into ISS plane (red is powered phase trajectory, yellow is its groundtrack, magenta is a target orbit groundtrack; cyan lines make a prograde-normal-radial frame of reference).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022M7nOeDC.png\u0022 class=\u0022ipsImage\u0022 height=\u0022515\u0022 src=\u0022http://i.imgur.com/M7nOeDC.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nTarget orbit was 200km circular with 51.65\u00B0 inclination, vehicle (STS Endeavour with 25 ton payload) was launched when the pad was 2\u00B0 behind the target orbit (8 minutes before the orbit passed directly over the site). Orbit reached: 224x189km, total plane alignment error: 1.02\u00B0 - a correction maneuver with no orbit shape change would cost 136m/s of \u0394v. Quite a lot, but I call this a success nonetheless. Vehicle completed the ascent with about 43 seconds of remaining SSME burn time (fuel left in the External Tank), but this is most likely because I haven\u0027t yet modelled the \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E thrust profile and its simulation performance is better than the real thing. Plots below show the smooth pitch\u0026amp;yaw commands generated by the algorithm (blue - pitch, yellow - yaw):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022OhN3gly.png\u0022 class=\u0022ipsImage\u0022 height=\u0022515\u0022 src=\u0022http://i.imgur.com/OhN3gly.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe algorithm failed to kill about 19m/s of excessive vertical velocity, also the yaw plot bends oddly in the final moments of ascent. This hints that something that shouldn\u0027t happens near completion of the burn (or something that should doesn\u0027t). I will be looking into this, as well as a few other minor things, before translating it to kOS. Main post has been edited to reflect the progress.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-01T01:00:08Z\u0022 title=\u002211/01/2016 01:00  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 1, 2016\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-11-20T03:29:40Z","Content":"\n\u003Cp\u003E\nLooks like the source for plane misalignment and orbital shape inaccuracy is common. I don\u0027t know what it is yet, unfortunately, but for \u0022easy\u0022 launches (ie. target inclination close to launch site latitude, little yaw steering needed) precision is almost astonishing: plane error needs to be measured in \u003Cem\u003Earc seconds\u003C/em\u003E, while apsis are within \u00B110km. Most importantly, errors do not increase significantly when manipulating the time window - within some reasonable bounds only the orbit shape slightly degrades, plane targeting is unaffected (so very important for timing a launch!). Things get very messy when we aim at more inclined orbits, and the larger the angle, the worse the performance. At about 50\u00B0, resulting plane is skewed by 1-2\u00B0; for 60\u00B0 or more the error goes beyond 15\u00B0 which would essentially mean a mission failure.\n\u003C/p\u003E\n\u003Cp\u003E\nPEG is difficult to troubleshoot, because everything in it is a function of everything else: velocity-to-go depends on estimated gravity effects and thrust integrals, which in turn depend on time to MECO, which depends on velocity-to-go again (just giving an oversimplified image here). One advantage this gives is that one doesn\u0027t need carefully calculated initial values to start navigating - you just run it with some half-reasonable first guess and it almost magically converges on good numbers. Additionally, if any errors are introduced (for example due to misaligned thrust vector or residual atmosphere), they are corrected in the next iteration, so in the end everything zeroes out. But if some errors appear in the algorithm itself, getting to their origins is a pain in the ass. Right now I\u0027m digging in PEG entrails, hoping to understand what\u0027s going on (so far I have found a weird behaviour of time to MECO: it\u0027s supposed to decrease steadily with simulation time, but for \u0022bad\u0022 launches it decreases slightly slower than expected and at some point even begins to rise), but it might be a while before I solve the issue completely. Debugging an algorithm which works well for one input but subtly fails for another is frustrating... much easier to understand a singular crash than that. I\u0027m on it though - stay tuned.\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-11-26T17:38:44Z","Content":"\n\u003Cp\u003E\nAgain a minor problem with vector algebra set the project back a week (that\u0027s how long it took me to find the error - the fix was trivial, 12 characters long). I have tested PEGAS on several launch sites now (Kourou, \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E, Vandenberg, Plesetsk) and various orbits (mostly differing in inclination), with various rockets (Shuttle, Atlas V in configurations 531 and 532) and think it is safe to say that I have a working prototype of a complete system. To back my words: here\u0027s a trajectory of a hypothetical Atlas V 532 launch from Vandenberg AFB (34.75\u00B0N) into a somewhat retrograde, highly inclined orbit (200x200km, 115\u00B0) with LAN also constrained. No pre-flight analysis was made, launch was timed \u003Cem\u003Earbitrarily\u003C/em\u003E 8 minutes before the launch site rotated under the target orbit.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022tf008ue.png\u0022 class=\u0022ipsImage\u0022 height=\u0022514\u0022 src=\u0022http://i.imgur.com/tf008ue.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nOrbit shape of 214x181km might not be particularly astonishing, but still it\u0027s only a matter of about 20m/s to polish it into perfectly circular. But what do we care really, after all it\u0027s just a parking orbit - the mission will proceed from here, and maneuver can be easily adjusted for that slight error. It\u0027d be much harder to correct plane alignment, and that\u0027s an important thing to get right immediately at launch. So what was the relative angle between target orbit and the achieved one?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E0.0046\u00B0\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nOr about 0.6m/s if we needed to manually zero it.\n\u003C/p\u003E\n\u003Cp\u003E\nThis error is essentially independent from your choice of a launch site or target - as long as your rocket can do it and UPFG can handle your rocket, the numbers will vary slightly but never increase significantly. Just take a look at the following table:\n\u003C/p\u003E\n\u003Ctable border=\u00221\u0022 cellpadding=\u00221\u0022 cellspacing=\u00221\u0022 style=\u0022width:750px;\u0022\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u003Cstrong\u003EVehicle\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cstrong\u003EPayload\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cstrong\u003ESite\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cstrong\u003ETarget alt. [km]\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cstrong\u003ETarget plane\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cstrong\u003EAngle error\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cstrong\u003EEccentricity\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cstrong\u003EAlt. error [\u003Cu\u003Em\u003C/u\u003E]\u003C/strong\u003E\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\nSTS\n\u003C/td\u003E\n\u003Ctd\u003E\n25 t\n\u003C/td\u003E\n\u003Ctd\u003E\nKourou\n\u003C/td\u003E\n\u003Ctd\u003E\n200\n\u003C/td\u003E\n\u003Ctd\u003E\n5\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00005\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00145\n\u003C/td\u003E\n\u003Ctd\u003E\n0.19\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\nKourou\n\u003C/td\u003E\n\u003Ctd\u003E\n300\n\u003C/td\u003E\n\u003Ctd\u003E\n5\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00002\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00145\n\u003C/td\u003E\n\u003Ctd\u003E\n0.24\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\nKourou\n\u003C/td\u003E\n\u003Ctd\u003E\n200\n\u003C/td\u003E\n\u003Ctd\u003E\nISS\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00060\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00164\n\u003C/td\u003E\n\u003Ctd\u003E\n1.11\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n250\n\u003C/td\u003E\n\u003Ctd\u003E\n28.5\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00005\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00151\n\u003C/td\u003E\n\u003Ctd\u003E\n1.14\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n200\n\u003C/td\u003E\n\u003Ctd\u003E\nISS\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00005\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00160\n\u003C/td\u003E\n\u003Ctd\u003E\n0.99\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\nVandenberg\n\u003C/td\u003E\n\u003Ctd\u003E\n250\n\u003C/td\u003E\n\u003Ctd\u003E\npolar\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00673\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00175\n\u003C/td\u003E\n\u003Ctd\u003E\n1.71\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\nPlesetsk\n\u003C/td\u003E\n\u003Ctd\u003E\n250\n\u003C/td\u003E\n\u003Ctd\u003E\npolar\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00348\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00197\n\u003C/td\u003E\n\u003Ctd\u003E\n1.88\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\nAtlas V 532\n\u003C/td\u003E\n\u003Ctd\u003E\n17.25 t\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n200\n\u003C/td\u003E\n\u003Ctd\u003E\n28.5\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00026\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00275\n\u003C/td\u003E\n\u003Ctd\u003E\n2.97\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\n\u003C/td\u003E\n\u003Ctd\u003E\n200\n\u003C/td\u003E\n\u003Ctd\u003E\nISS\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00556\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00276\n\u003C/td\u003E\n\u003Ctd\u003E\n3.91\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\nVandenberg\n\u003C/td\u003E\n\u003Ctd\u003E\n200\n\u003C/td\u003E\n\u003Ctd\u003E\npolar\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00725\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00245\n\u003C/td\u003E\n\u003Ctd\u003E\n4.06\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\nVandenberg\n\u003C/td\u003E\n\u003Ctd\u003E\n200\n\u003C/td\u003E\n\u003Ctd\u003E\n115\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00046\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00256\n\u003C/td\u003E\n\u003Ctd\u003E\n3.96\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\nPlesetsk\n\u003C/td\u003E\n\u003Ctd\u003E\n200\n\u003C/td\u003E\n\u003Ctd\u003E\npolar\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00228\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00230\n\u003C/td\u003E\n\u003Ctd\u003E\n1.52\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003Ctd\u003E\nPlesetsk\n\u003C/td\u003E\n\u003Ctd\u003E\n250\n\u003C/td\u003E\n\u003Ctd\u003E\npolar\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00334\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00273\n\u003C/td\u003E\n\u003Ctd\u003E\n4.35\n\u003C/td\u003E\n\u003C/tr\u003E\u003Ctr\u003E\u003Ctd\u003E\nAtlas V 531\n\u003C/td\u003E\n\u003Ctd\u003E\n15.575 t\n\u003C/td\u003E\n\u003Ctd\u003E\nPlesetsk\n\u003C/td\u003E\n\u003Ctd\u003E\n250\n\u003C/td\u003E\n\u003Ctd\u003E\npolar\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00071\u00B0\n\u003C/td\u003E\n\u003Ctd\u003E\n0.00262\n\u003C/td\u003E\n\u003Ctd\u003E\n3.31\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\u003Cp\u003E\nAll of those launches were made with no window calculation, that is: T-0 was not even estimated, just chosen arbitrarily at 8 minutes before passing under target orbit. First stage guidance was the same each time and it was the simplest one imaginable: go straight up for 10 seconds, start pitching over slightly until you reach 10\u00B0, hold prograde. PEG took over from where the SRBs were jettisoned, controlling SSME ascent for the Shuttle (formally 2 stages: constant thrust, constant acceleration) and 2 explicit stages of the Atlas (core, then Centaur). Would be of course possible (and probably informative!) to perform tests on a wider variety of vehicles, but I think this proves robustness to various initial conditions and targets. Experiments with more interesting orbit shapes might also be conducted - after all, with such precision why limit the capability at parking orbits if we could try for a direct GTO launch? \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI have to do some cleaning up in the code and repository - everything seems to work but it\u0027s not exactly readable. I\u0027m also thinking about starting a wiki on my github to better explain the project (this readme on the front page is not only very out of date, but doesn\u0027t introduce too well). After that there are a few more things to look into: few minor details, I\u0027m only a little worried about one of them which was a problem before so I worked around it (Conic State Extrapolation routine, it\u0027s a very efficient function to predict vehicle position and velocity in t seconds from now without integrating the whole trajectory - since I couldn\u0027t get it to work, I just... integrate the whole trajectory instead; not sure if this would work for a CPU-limited kOS terminal). This is a plan for now. And once this is done, I will finally be able to start porting PEGAS to kOS code!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-27T03:51:08Z\u0022 title=\u002211/27/2016 03:51  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 27, 2016\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003Cbr\u003Ewords\n\u003C/span\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2016-11-28T00:30:17Z","Content":"\n\u003Cp\u003E\nHmm, for some reason all these wonderful updates weren\u0027t notifying me. \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nBut this is good news! I look forward to seeing the final product! You\u0027ve been working on this for at least a year and a half, right?\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: Oh my god, that\u0027s astonishing. The precision there would make a German cry with happiness.\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2016-11-28T23:03:52Z","Content":"\n\u003Cp\u003E\nA year at least, one and a half probably. First video was over 9 months ago, and that was after a considerable amount of work. Then there was my thesis semester, and after that... well, if I finished before the real OSIRIS-REx launch, your recreation mission could turn into a \u0022pre-creation\u0022, right? Heh heh heh \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI want to spend some time cleaning up and documenting the code now, and see into that CSE routine. Making no promises, but I\u0027m hoping to start work on kOS code this weekend. I expect it might take a while too, because I haven\u0027t written anything in it in months, and UPFG is quite complex. Debugging in kOS also isn\u0027t easy, so I\u0027ll have to make many numeric checks and then painful flight tests before the port is complete. Gonna be fun!\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2016-11-30T08:29:26Z","Content":"\n\u003Cp\u003E\nI have a test for you.\n\u003C/p\u003E\n\u003Cp\u003E\nUse an Atlas 411.\n\u003C/p\u003E\n\u003Cp\u003E\nVertical liftoff. Wait 7 seconds, then pitch and yaw as needed to a launch azimuth of 89 degrees. (89 degrees from true north.)\n\u003C/p\u003E\n\u003Cp\u003E\nThe \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E burns for 94 seconds, and is staged away at T\u002B00:02:09. When the \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E is staged away, hold prograde. Limit maximum acceleration to no more than 5.000G.\n\u003C/p\u003E\n\u003Cp\u003E\nAt T\u002B00:04:03, BECO. Stage booster at T\u002B00:04:09. RL-10 ignition at T\u002B00:04:19. Fairing staging at T\u002B00:04:27.\n\u003C/p\u003E\n\u003Cp\u003E\nHit a 28.5\u003Csup\u003Eo\u003C/sup\u003E, 181x156km orbit.\n\u003C/p\u003E\n\u003Cp\u003E\nIs the simulation able to handle that?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-30T08:29:46Z\u0022 title=\u002211/30/2016 08:29  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 30, 2016\u003C/time\u003E by Dman979\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-02-04T00:05:33Z","Content":"\n\u003Cp\u003E\nMATLAB code is now complete. With the CSE routine fixed, everything works as the original implementation specifies and all simulations are good. I added support for real thrust profiles for solid rockets (they ran at constant full thrust previously, yielding better than actual performance) and some features like easily customizable jettisons, coast periods etc. I took your challenge to test the complete architecture.\n\u003C/p\u003E\n\u003Cp\u003E\nFirst, since you did not specify the payload mass, I assumed we\u0027re doing OSIRIS-REx and put its mass on the Atlas. I adjusted the launch schedule for that mission by setting the \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E jettison at T\u002B2:19 instead of T\u002B2:09 (per \u003Ca href=\u0022http://spaceflightnow.com/2016/09/07/atlas-5osiris-rex-launch-timeline/\u0022 rel=\u0022external nofollow\u0022\u003Ethis report\u003C/a\u003E). Also, I don\u0027t know the Atlas \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E thrust profile, so I took one from the Space Shuttle and scaled it accordingly, figuring that\u0027s better than the entirely unrealistic constant thrust mode. For some reason my booster cut off at T\u002B3:54 instead of T\u002B4:03 - maybe the actual acceleration limit is slightly lower than 5G, maybe I didn\u0027t get the fuel/dry mass ratio right. BECO and staging events, due to the mechanism of staging I assumed in my MATLAB code, are one and the same thing - simply nothing happens after cutoff, vehicle coasts until T\u002B4:19 when it\u0027s updated. I assumed the smallest version of payload fairing, weighing 2127kg.\n\u003C/p\u003E\n\u003Cp\u003E\nResults (copied directly from my MATLAB output): Successful insertion at T\u002B607.8 into 145.3x187.0km, 28.5\u00B0 orbit | Final conditions error: 3.275e-04 (angle)\n\u003C/p\u003E\n\u003Cp\u003E\nInsertion at T\u002B10:08 is oddly fast for a single engine Centaur: OSIRIS-REx reached its parking orbit in T\u002B12:23. I suppose there\u0027s some mass that I haven\u0027t accounted for - perhaps the payload adapter? I have no data on this. Other than that, I found no anomalies. Here are some telemetry plots:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022jxnUlSe.png\u0022 class=\u0022ipsImage\u0022 height=\u0022515\u0022 src=\u0022http://i.imgur.com/jxnUlSe.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAcceleration and angle plots (blue for pitch, yellow for yaw) are probably the most interesting. Staging points are easily visible, at T\u002B100 you see \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E cutoff and UPFG activation. I still didn\u0027t get something right, it probably has to do with the total mass of fuel burned by the \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E which I must have underestimated because there\u0027s a slight jag in the acceleration plot. \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E jettison occurs at T\u002B139, a slight acceleration jump is noticeable. Another similar one at T\u002B267 where 2 tons of fairing are shed (harder to see since Centaur has such a low acceleration). These are all artifacts of the vehicle design, not the algorithm. UPFG still behaves quite oddly between staging points, but I managed to make it a bit smoother. The overall tendency of the pitch plot looks fine, maybe aside from that spike at the end. More on that later though.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00220hjy8Ob.png\u0022 class=\u0022ipsImage\u0022 height=\u0022514\u0022 src=\u0022http://i.imgur.com/0hjy8Ob.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHere are UPFG internals, displaying thrust integrals and their moments. Easiest to interpret are L and Tgo: L is total delta-v that we still need to expend, Tgo is remaining time until cutoff. In the bottom rightmost plot you can see two sharp jumps corresponding to jettison events. Red line that seems quite out of place represents the constant acceleration phase. The discontinuity is most likely caused by coasting events - since UPFG is unaware of coasting, if we indeed shut down the engines, it\u0027s an unexpected situation and the whole solution must be recalculated (although I plan to make it coast-aware later - this is not a crucial feature).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022jjwmpH5.png\u0022 class=\u0022ipsImage\u0022 height=\u0022514\u0022 src=\u0022http://i.imgur.com/jjwmpH5.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nFinally, a trajectory plot. Least informative, but looks cool \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E You couldn\u0027t zoom close enough to see any difference between desired ground track (magenta) and the actual (yellow). As mentioned earlier, plane alignment error was below 0.001 degree. The only thing I haven\u0027t solved for now is the remaining vertical velocity. I \u003Cem\u003Ethink\u003C/em\u003E I know where that comes from: UPFG, when calculating the target position vector, tries to make sure its magnitude is equal to the desired cutoff altitude. Now, in order to reduce the vertical velocity, the vehicle should pitch lower - but then it wouldn\u0027t get to this desired altitude, so there\u0027s a conflict. Since I suspect that position correction is a higher priority operation than velocity correction (particularly when it does not involve plane changing), we\u0027re getting velocity precision traded off for position. I\u0027ll try and look into that later.\n\u003C/p\u003E\n\u003Cp\u003E\nFor now, I\u0027ll want to spend a few more hours on the documentation for MATLAB code (there\u0027s already a lengthy article I wrote about UPFG, look in the \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Edocs\u003C/span\u003E branch). Then... kOS \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnyone has or knows someone who has a decent \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E-level Shuttle replica? I will want to make a video when PEGAS is done, but with a really good looking, realistic rocket this time.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-02-04T13:14:17Z\u0022 title=\u002202/04/2017 01:14  PM\u0022 data-short=\u00227 yr\u0022\u003EFebruary 4, 2017\u003C/time\u003E by Reddy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ilpez","CreatedById":165871,"CreatedDateTime":"2017-02-10T08:31:15Z","Content":"\n\u003Cp\u003E\nAs a reminder\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nKSP Coordinate system : X,Z,Y(Left Hand).\n\u003C/p\u003E\n\u003Cp\u003E\nYour MATLAB Simulation : X,Y,Z(Right Hand).\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2017-02-10T16:08:45Z","Content":"\n\u003Cp\u003E\nDamn, I didn\u0027t get an email alert for this? \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/12858-red-iron-crown/\u0026amp;do=hovercard\u0022 data-mentionid=\u002212858\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/12858-red-iron-crown/\u0022 rel=\u0022\u0022\u003E@Red Iron Crown\u003C/a\u003E, any idea why?\n\u003C/p\u003E\n\u003Cp\u003E\nYou guessed correctly; I was thinking of ORSRIS-REx. Even with missing information, your code still managed to perform much better than a human-controlled launch, by a huge margin. It\u0027s really impressive to see what you\u0027re doing here. As for ground track- did it launch autononmously?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI found various figures for the thrust of the AJ-60A.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedOther\u0022\u003E\n\u003Ciframe data-controller=\u0022core.front.core.autosizeiframe\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?app=core\u0026amp;module=system\u0026amp;controller=embed\u0026amp;url=https://twitter.com/aerojetrdyne/status/774012808744673280\u0022 style=\u0022height:150px;\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nWikipedia says it has a 379,600 lbf\u00A0 thrust.\n\u003C/p\u003E\n\u003Cp\u003E\nI couldn\u0027t find any other info.\n\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2017-02-10T16:13:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222950945\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221486742925\u0022 data-ipsquote-userid=\u0022123837\u0022 data-ipsquote-username=\u0022Dman979\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, Dman979 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nDamn, I didn\u0027t get an email alert for this? \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/12858-red-iron-crown/\u0026amp;do=hovercard\u0022 data-mentionid=\u002212858\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/12858-red-iron-crown/\u0022 rel=\u0022\u0022\u003E@Red Iron Crown\u003C/a\u003E, any idea why?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo idea. Try unfollowing the thread and then following it again with email notifications, see if that fixes it.\n\u003C/p\u003E\n"},{"CreatedByName":"Dman979","CreatedById":123837,"CreatedDateTime":"2017-02-10T16:21:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222950948\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221486743214\u0022 data-ipsquote-userid=\u002212858\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, Red Iron Crown said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNo idea. Try unfollowing the thread and then following it again with email notifications, see if that fixes it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s the same problem I\u0027ve had on other threads- I only get notifications from not the \u003Cabbr title=\u0022Original Post(er). The first post in a thread, or the person who posted it.\u0022\u003EOP\u003C/abbr\u003E.\n\u003C/p\u003E\n"},{"CreatedByName":"Reddy","CreatedById":124298,"CreatedDateTime":"2017-02-11T14:41:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222950712\u0022 data-ipsquote-contentid=\u0022142213\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221486715475\u0022 data-ipsquote-userid=\u0022165871\u0022 data-ipsquote-username=\u0022Ilpez\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 10.02.2017 at 9:31 AM, Ilpez said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nKSP Coordinate system : X,Z,Y(Left Hand).\n\u003C/p\u003E\n\u003Cp\u003E\nYour MATLAB Simulation : X,Y,Z(Right Hand).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you! I would\u0027ve forgotten that KSP had its vectors the other way around.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022123837\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/123837-dman979/\u0022 rel=\u0022\u0022\u003E@Dman979\u003C/a\u003E It\u0027s difficult to talk about \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E thrust. Liquid fuel engines are \u003Cem\u003Eeasy\u003C/em\u003E because they consume the same amount of fuel each second (unless you throttle), giving you the same vacuum thrust all the time (the actual thrust changes depending on altitude because pressure outside the nozzle changes, and specific impulse with it). With solid rocket motors we don\u0027t have that luxury - they have a \u003Cem\u003Ethrust profile\u003C/em\u003E, meaning their mass flow (and therefore thrust) changes with time. This is how it looked for the Space Shuttle (data from the fatal STS-107 mission):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022695px-Srbthrust2.svg.png\u0022 class=\u0022ipsImage\u0022 src=\u0022https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Srbthrust2.svg/695px-Srbthrust2.svg.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHigh thrust at lift-off, slight decline around T\u002B50 (max-q) then more power for the next half a minute, followed by gradual thrust decline. At some point the \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E acceleration ceases to keep up with the SSMEs and they are jettisoned, still with some remaining fuel. There\u0027s a lot of reading on that, you can see examples of different thrust profiles on \u003Ca href=\u0022http://www.aerospacengineering.net/?p=1255\u0022 rel=\u0022external nofollow\u0022\u003Eaerospacengineering.net\u003C/a\u003E (figure 1.14 in the article I linked).\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, data on real solid motors is hard to come by (I couldn\u0027t find anything on Aerojet AJ-60A), so I\u0027m just using the same profile (Space Shuttle \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E) for all solid motors, I just scale it accordingly (i.e. taking the actual burn time instead of STS 127 seconds and adjusting the max thrust magnitude). This might be inaccurate, or even change the total performance of a rocket, but there\u0027s little that can be done about it - better to use this profile than none.\n\u003C/p\u003E\n"}]}