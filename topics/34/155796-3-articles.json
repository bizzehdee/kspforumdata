{"TopicId":155796,"ForumId":34,"TopicTitle":"[KSP 1.10.0] Kerbal Simpit: A KSP serial mod for hardware controllers (1.4.1)","CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-01-30T17:07:07Z","PageNum":3,"Articles":[{"CreatedByName":"Benji","CreatedById":116398,"CreatedDateTime":"2017-04-27T12:17:03Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223036359\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493295276\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCorrect. Port 0 is just the first port you\u0027ve listed in your config file, and channel 4 is the altitude handler. I got a little bit lazy with my debug logging and didn\u0027t bother trying to resolve those to more sensible names.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAhh, in this early stage it\u0027s kinda self explenatory. Just trying to understand what\u0027s happening.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-04-30T11:06:21Z","Content":"\n\u003Cp\u003E\nOK, I\u0027ve made a little headway in to understanding what\u0027s happening here.\n\u003C/p\u003E\n\u003Cp\u003E\nMy plugin attempts to read from the serial port\u0027s underlying Stream object using the BeginRead and EndRead methods. This happens in a separate thread. But when the main thread writes the altitude packet out to the port, this triggers the EndRead. There\u0027s nothing to read and my slightly sloppy code reuses the last contents of the read buffer, which was the packet that subscribes to the altitude channel. Hence the weird logs.\n\u003C/p\u003E\n\u003Cp\u003E\nThis only happens on Windows, though. I only ever see expected behaviour on Linux and OS X.\n\u003C/p\u003E\n\u003Cp\u003E\nI have a fairly hacky workaround in place that seems to be OK on my setup, except for the fact that it frequently causes my entire Windows 10 OS to bluescreen and reboot when KSP exits (I\u0027m pretty proud of that, actually \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0). So looking for other options, and I strongly suspect I\u0027ll resort to a thread doing frequent serial polling.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-01T11:45:11Z","Content":"\n\u003Cp\u003E\nVersion 0.7 is up now.\n\u003C/p\u003E\n\u003Cp\u003E\nThis release is still trying to get bidirectional serial handling right for all platforms. I\u0027ve switched back to the original serial library, and written a new serial polling thread that is used on Windows instead of the old reading code.\n\u003C/p\u003E\n\u003Cp\u003E\nThis setup seems to be working for me everywhere I\u0027ve tried it. And reading data this way also means that it works on a lot more hardware - Arduino boards that didn\u0027t work with the event-driven code in Windows previously are now doing the right thing with the polling code.\n\u003C/p\u003E\n\u003Cp\u003E\nUnless there\u0027s any more problems with the serial handling, I\u0027m looking forward to getting back and fleshing out the list of available telemetry providers in the next release.\n\u003C/p\u003E\n"},{"CreatedByName":"Benji","CreatedById":116398,"CreatedDateTime":"2017-05-02T08:24:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223041029\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493639111\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 hours ago, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nVersion 0.7 is up now.\n\u003C/p\u003E\n\u003Cp\u003E\nThis release is still trying to get bidirectional serial handling right for all platforms. I\u0027ve switched back to the original serial library, and written a new serial polling thread that is used on Windows instead of the old reading code.\n\u003C/p\u003E\n\u003Cp\u003E\nThis setup seems to be working for me everywhere I\u0027ve tried it. And reading data this way also means that it works on a lot more hardware - Arduino boards that didn\u0027t work with the event-driven code in Windows previously are now doing the right thing with the polling code.\n\u003C/p\u003E\n\u003Cp\u003E\nUnless there\u0027s any more problems with the serial handling, I\u0027m looking forward to getting back and fleshing out the list of available telemetry providers in the next release.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI can confirm a working Staging button and surface-altimeter.\n\u003C/p\u003E\n\u003Cp\u003E\nUnder this link: \u003Ca href=\u0022https://bitbucket.org/pjhardy/kerbalsimpit/downloads/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bitbucket.org/pjhardy/kerbalsimpit/downloads/\u003C/a\u003E Sometimes there is the arduino-library downloadable and sometimes, like now the source code is zipped \u0022under\u0022 the download link. Can you provide two seperate links?\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-03T16:56:42Z","Content":"\n\u003Cp\u003E\nYay, finally a little headway on that one. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223042097\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493713469\u0022 data-ipsquote-userid=\u0022116398\u0022 data-ipsquote-username=\u0022Benji\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 02/05/2017 at 6:24 PM, Benji said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUnder this link: \u003Ca href=\u0022https://bitbucket.org/pjhardy/kerbalsimpit/downloads/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bitbucket.org/pjhardy/kerbalsimpit/downloads/\u003C/a\u003E Sometimes there is the arduino-library downloadable and sometimes, like now the source code is zipped \u0022under\u0022 the download link. Can you provide two seperate links?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSorry. I split the Arduino code out of that repository a little while ago, and it shouldn\u0027t be available from that link at all. And I haven\u0027t been uploading zip files of releases at all, so unless you know git it\u0027s probably been a right pain to figure out, sorry. \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMy long term plan for the arduino library is to have it added to the Arduino Library Manager, so you can just install it through the IDE. But until then, the library can be downloaded from\u00A0\u003Ca href=\u0022https://bitbucket.org/pjhardy/kerbalsimpit-arduino/downloads/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bitbucket.org/pjhardy/kerbalsimpit-arduino/downloads/\u003C/a\u003E\u00A0. I\u0027ve just uploaded a new zip file for the current master.\n\u003C/p\u003E\n\u003Cp\u003E\nThis evening I\u0027ve also started adding more telemetry to the plugin. It\u0027s now sending apoapsis and periapsis, and I\u0027ve started work on integrating Alternate Resource Panel to send fuel and power levels. I\u0027d like to add a couple more types after that to make sure that the current method of multiplexing telemetry is scalable, and then I\u0027ll think seriously about promoting a 1.0 release.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-03T17:00:14Z\u0022 title=\u002205/03/2017 05:00  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 3, 2017\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Benji","CreatedById":116398,"CreatedDateTime":"2017-05-04T16:33:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223043737\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493830602\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 hours ago, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis evening I\u0027ve also started adding more telemetry to the plugin. It\u0027s now sending apoapsis and periapsis, and I\u0027ve started work on integrating Alternate Resource Panel to send fuel and power levels. I\u0027d like to add a couple more types after that to make sure that the current method of multiplexing telemetry is scalable, and then I\u0027ll think seriously about promoting a 1.0 release.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe only \u0022special\u0022(meaning, perhaps you don\u0027t plan to add?) information I want to use on my panel is vertical, horizontal velocity (perhaps as part of a velocity package) and battery charge-rate (negative to positive).\n\u003C/p\u003E\n\u003Cp\u003E\nIf they are not already on, would you add these to your list?\n\u003C/p\u003E\n"},{"CreatedByName":"Gizzum","CreatedById":177494,"CreatedDateTime":"2017-05-05T09:20:25Z","Content":"\n\u003Cp\u003E\nHi guys... I have recently bought KSP through steam on OSX and have been looking into making a control panel so I after a few late nights of pulling my hair trying to get KSPserialIO to work I am so glad I have found you are working on a Mac implementation. \u00A0I tried the handshake example last night and it all seems to work ok but I am relatively new to arduino so I am slowly getting the hang of it. \u00A0I am more than willing to be\u00A0you Mac guinea pig as I will be trying everything you are putting up. \u00A0Couldn\u0027t get the staging example working last night but it was late so gave up it but will probably give it another shot over the weekend.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nKeep up the good work!\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-05T23:19:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223045670\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493976025\u0022 data-ipsquote-userid=\u0022177494\u0022 data-ipsquote-username=\u0022Gizzum\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 hours ago, Gizzum said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nafter a few late nights of pulling my hair trying to get KSPserialIO to work\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nErk, sorry, that\u0027s probably my fault. \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u00A0I\u0027ve been maintaining a cross-platform KSPSerialIO fork for a while that runs well on my Linux gaming machine and I occasionally test on MacOS. But between this project and a lot of other things, just haven\u0027t had the time to update that for the latest version. Should hopefully get it done soon.\n\u003C/p\u003E\n\u003Cp\u003E\nBut welcome! I\u0027m glad you like how it\u0027s going so far. \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u00A0Let me know how you go with the stage code. I\u0027ve checked it on my Mac Air, but more eyes are good for figuring out how I can make it easier to use.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223044848\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493915611\u0022 data-ipsquote-userid=\u0022116398\u0022 data-ipsquote-username=\u0022Benji\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 05/05/2017 at 2:33 AM, Benji said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe only \u0022special\u0022(meaning, perhaps you don\u0027t plan to add?) information I want to use on my panel is vertical, horizontal velocity (perhaps as part of a velocity package) and battery charge-rate (negative to positive).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSurface and orbital velocity, as well as vertical velocity, are definitely on the list, almost certainly in the next release. I\u0027m including current and max power levels as well, but didn\u0027t have any plans to include charge rate. If that\u0027s something readily available through the KSP or ARP APIs then I\u0027d gladly include it. A little less certain about having to write the code to calculate it myself, but I\u0027ll see what I can do.\n\u003C/p\u003E\n"},{"CreatedByName":"monstah","CreatedById":95210,"CreatedDateTime":"2017-05-06T17:47:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223043737\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493830602\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 03/05/2017 at 1:56 PM, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYay, finally a little headway on that one. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nSorry. I split the Arduino code out of that repository a little while ago, and it shouldn\u0027t be available from that link at all. And I haven\u0027t been uploading zip files of releases at all, so unless you know git it\u0027s probably been a right pain to figure out, sorry. \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nMy long term plan for the arduino library is to have it added to the Arduino Library Manager, so you can just install it through the IDE. But until then, the library can be downloaded from\u00A0\u003Ca href=\u0022https://bitbucket.org/pjhardy/kerbalsimpit-arduino/downloads/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bitbucket.org/pjhardy/kerbalsimpit-arduino/downloads/\u003C/a\u003E\u00A0. I\u0027ve just uploaded a new zip file for the current master.\n\u003C/p\u003E\n\u003Cp\u003E\nThis evening I\u0027ve also started adding more telemetry to the plugin. It\u0027s now sending apoapsis and periapsis, and I\u0027ve started work on integrating Alternate Resource Panel to send fuel and power levels. I\u0027d like to add a couple more types after that to make sure that the current method of multiplexing telemetry is scalable, and then I\u0027ll think seriously about promoting a 1.0 release.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve noticed this week that you\u0027ve pushed commits at about the same time I was finally giving this a spin \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nGot my \u0027duino some time ago, but halted the project because I didn\u0027t have a good enough communication with the game (I was using Telemachus back then, and got bored writing the python middle-man script), and because not all my parts had shipped (and I\u0027m still waiting for something to help me with the multitude of IO pins needed).\n\u003C/p\u003E\n\u003Cp\u003E\nRecently I was keeping an eye on this, and on this week on vacation I dusted off the electronics and gave this a spin.\n\u003C/p\u003E\n\u003Cp\u003E\nEagerly awaiting for a proper release with complete telemetry! I\u0027ve managed my hello worlds and first prototypes, now I\u0027m just waiting for this to update and for the multiplexer to arrive to start something more serious \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-06T22:57:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223047205\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494092870\u0022 data-ipsquote-userid=\u002295210\u0022 data-ipsquote-username=\u0022monstah\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, monstah said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nEagerly awaiting for a proper release with complete telemetry! I\u0027ve managed my hello worlds and first prototypes, now I\u0027m just waiting for this to update and for the multiplexer to arrive to start something more serious \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWow, it sure is nice to hear other folk are interested in something I started just to scratch a personal itch. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI started thinking about how to send resource counts last night, and it\u0027s a little intimidating because the stock game has quite a few resources now (eight by my count, if you include ablator). For staged resources I\u0027m planning on sending total and stage levels in the one packet. And other stuff like monoprop will go in a smaller packet. Something like\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Estruct\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EStagedResourceStruct\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003Efloat\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E totalMax\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003Efloat\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E totalAvailable\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003Efloat\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E stageMax\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003Efloat\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E stageAvailable\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Estruct\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EResourceStruct\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003Efloat\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E totalMax\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    totalAvailable\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI think I\u0027m going to end up staggering updates for these. Right now the plugin loops through the list of providers that want to send every 40ms. Instead of sending all of the resources each loop I\u0027ll probably spread them out. That would mean you only find out how much liquid fuel is in the tank every third of a second, but it seems like a worthwhile tradeoff. Something I\u0027ll experiment with I guess.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Benji","CreatedById":116398,"CreatedDateTime":"2017-05-07T21:06:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223046427\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494026347\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6.5.2017 at 1:19 AM, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223044848\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221493915611\u0022 data-ipsquote-userid=\u0022116398\u0022 data-ipsquote-username=\u0022Benji\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 4.5.2017 at 6:33 PM, Benji said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe only \u0022special\u0022(meaning, perhaps you don\u0027t plan to add?) information I want to use on my panel is vertical, horizontal velocity (perhaps as part of a velocity package) and battery charge-rate (negative to positive).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSurface and orbital velocity, as well as vertical velocity, are definitely on the list, almost certainly in the next release. I\u0027m including current and max power levels as well, but didn\u0027t have any plans to include charge rate. If that\u0027s something readily available through the KSP or ARP APIs then I\u0027d gladly include it. A little less certain about having to write the code to calculate it myself, but I\u0027ll see what I can do.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nLater on... what about sending control commands to the GUI. Changing between Mapview and Vesselview. Or switching the Navball between Surface and Orbital.\n\u003C/p\u003E\n"},{"CreatedByName":"Gizzum","CreatedById":177494,"CreatedDateTime":"2017-05-08T16:33:23Z","Content":"\n\u003Cp\u003E\nHello again guys... For some unknown reason I cannot get the staging to work with the example I downloaded from bitbucket. \u00A0I can get the handshake example to work, but the only time it will stage is when i reset the arduino. \u00A0In the ksp.log i then get an entry stating handshake received. \u00A0The tx led does flash when i press the button but no staging. \u00A0Any ideas??\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 17:24:25.339] Load(Assembly): KerbalSimPit/KerbalSimPit\n[LOG 17:24:25.340] AssemblyLoader: Loading assembly at /Users/Jez/Library/Application Support/Steam/SteamApps/common/Kerbal Space Program/GameData/KerbalSimPit/KerbalSimPit.dll\n[LOG 17:24:25.360] AssemblyLoader: KSPAssembly \u0027KerbalSimPit\u0027 V0.7\n[LOG 17:24:25.360] Load(Assembly): KerbalSimPit/Mono.Posix\n[LOG 17:24:25.360] AssemblyLoader: Loading assembly at /Users/Jez/Library/Application Support/Steam/SteamApps/common/Kerbal Space Program/GameData/KerbalSimPit/Mono.Posix.dll\n[LOG 17:24:25.361] Load(Assembly): KerbalSimPit/PsimaxSerial\n[LOG 17:24:25.361] AssemblyLoader: Loading assembly at /Users/Jez/Library/Application Support/Steam/SteamApps/common/Kerbal Space Program/GameData/KerbalSimPit/PsimaxSerial.dll\nKerbalSimPit v0.7.0.0\nKerbalSimPit\n[LOG 17:24:25.445] [AddonLoader]: Instantiating addon \u0027KerbalSimPit\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:24:25.703] KerbalSimPit: Settings loaded.\n[LOG 17:24:25.729] KerbalSimPit: Starting async read thread for port /dev/tty.usbmodem1411\n[LOG 17:24:25.729] KerbalSimPit: Started.\n[LOG 17:24:25.729] KerbalSimPit: Starting event dispatch loop\n[LOG 17:24:27.290] KerbalSimPit: ACK received on port /dev/tty.usbmodem1411. Handshake complete.\n[LOG 17:25:32.055] [AddonLoader]: Instantiating addon \u0027KerbalSimPitCAGProvider\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:25:32.055] [AddonLoader]: Instantiating addon \u0027KerbalSimPitActionProvider\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:25:32.055] [AddonLoader]: Instantiating addon \u0027KerbalSimPitEchoProvider\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:25:32.056] [AddonLoader]: Instantiating addon \u0027KerbalSimPitTelemetryProvider\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:27:14.032] KerbalSimPit: Couldn\u0027t remove AltitudeProvider\n\n\n\n[LOG 17:27:29.584] KerbalSimPit: Shutting down.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe above\u00A0is the log when I use the handshake example...\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 17:28:38.757] Load(Assembly): KerbalSimPit/KerbalSimPit\n[LOG 17:28:38.757] AssemblyLoader: Loading assembly at /Users/Jez/Library/Application Support/Steam/SteamApps/common/Kerbal Space Program/GameData/KerbalSimPit/KerbalSimPit.dll\n[LOG 17:28:38.777] AssemblyLoader: KSPAssembly \u0027KerbalSimPit\u0027 V0.7\n[LOG 17:28:38.777] Load(Assembly): KerbalSimPit/Mono.Posix\n[LOG 17:28:38.777] AssemblyLoader: Loading assembly at /Users/Jez/Library/Application Support/Steam/SteamApps/common/Kerbal Space Program/GameData/KerbalSimPit/Mono.Posix.dll\n[LOG 17:28:38.778] Load(Assembly): KerbalSimPit/PsimaxSerial\n[LOG 17:28:38.778] AssemblyLoader: Loading assembly at /Users/Jez/Library/Application Support/Steam/SteamApps/common/Kerbal Space Program/GameData/KerbalSimPit/PsimaxSerial.dll\nKerbalSimPit v0.7.0.0\nKerbalSimPit\n[LOG 17:28:38.863] [AddonLoader]: Instantiating addon \u0027KerbalSimPit\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:28:39.128] KerbalSimPit: Settings loaded.\n[LOG 17:28:39.154] KerbalSimPit: Starting async read thread for port /dev/tty.usbmodem1411\n[LOG 17:28:39.154] KerbalSimPit: Started.\n[LOG 17:28:39.154] KerbalSimPit: Starting event dispatch loop\n[LOG 17:28:40.714] KerbalSimPit: ACK received on port /dev/tty.usbmodem1411. Handshake complete.\n[LOG 17:30:27.373] KerbalSimPit: ACK received on port /dev/tty.usbmodem1411. Handshake complete.\n[LOG 17:30:40.960] [AddonLoader]: Instantiating addon \u0027KerbalSimPitCAGProvider\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:30:40.960] [AddonLoader]: Instantiating addon \u0027KerbalSimPitActionProvider\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:30:40.960] [AddonLoader]: Instantiating addon \u0027KerbalSimPitEchoProvider\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:30:40.961] [AddonLoader]: Instantiating addon \u0027KerbalSimPitTelemetryProvider\u0027 from assembly \u0027KerbalSimPit\u0027\n[LOG 17:31:15.658] KerbalSimPit: ACK received on port /dev/tty.usbmodem1411. Handshake complete. //entry when I hit reset on arduino\n[LOG 17:31:21.147] KerbalSimPit: ACK received on port /dev/tty.usbmodem1411. Handshake complete. //hit reset a second time\n[LOG 17:31:28.467] KerbalSimPit: Couldn\u0027t remove AltitudeProvider\n[LOG 17:31:48.276] KerbalSimPit: Shutting down.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nAbove is when I use the staging example.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAny ideas?\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-08T22:48:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223049274\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494261203\u0022 data-ipsquote-userid=\u0022177494\u0022 data-ipsquote-username=\u0022Gizzum\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Gizzum said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n[LOG 17:31:28.467] KerbalSimPit: Couldn\u0027t remove AltitudeProvider\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s a little bit concerning. I\u0027ll check again when I\u0027m back home (it\u0027s the start of the work day here), but I was sure I had sorted out why that was happening before.\n\u003C/p\u003E\n\u003Cp\u003E\nApart from that, though, there\u0027s nothing I can see that would be causing your issue in those logs. There might be some more detail\u00A0if you set \u0022verbose\u0022 in the config file to true though. Also, which version of KSP are you using (I only test against the 1.2.9 prerelease, although most things should be OK in 1.2.2).\n\u003C/p\u003E\n\u003Cp\u003E\nAnd finally, what does your circuit look like? I just realised the comments in the Arduino sketch say to use a button connected to pin 1. This is wrong, and the button should be connected to pin 2. The pin 13 LED should light up as well whenever the button is pressed.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-09T22:23:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223049825\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494283694\u0022 data-ipsquote-userid=\u002257865\u0022 data-ipsquote-username=\u0022stibbons\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 hours ago, stibbons said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI just realised the comments in the Arduino sketch say to use a button connected to pin 1. This is wrong, and the button should be connected to pin 2. The pin 13 LED should light up as well whenever the button is pressed.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI realised that the stage example sketch should mirror as closely as possible the\u00A0\u003Ca href=\u0022https://www.arduino.cc/en/tutorial/debounce\u0022 rel=\u0022external nofollow\u0022\u003Edebounce example\u003C/a\u003E. Because I want to illustrate that a staging button is a really trivial (and let\u0027s be honest, super fun) application. The next arduino library release\u00A0\u003Ca href=\u0022https://trello.com/c/bN3ypYo1\u0022 rel=\u0022external nofollow\u0022\u003Ewill change that and polish the example sketches\u003C/a\u003E a fair bit.\n\u003C/p\u003E\n"},{"CreatedByName":"Gizzum","CreatedById":177494,"CreatedDateTime":"2017-05-10T07:46:39Z","Content":"\n\u003Cp\u003E\nSee... that shows how much of an Arduino noob I am... i thought the pins were labelled differently to what is declared in the code. \u00A0At least someone has thought about this! \u00A0Tried it again last night and it works so now ready to start playing! YAYYY. \u00A0Time to start buying switches, joysticks,\u00A0buckets of LEDS and displays! \u00A0Really looking forward to this. \u00A0It would be interesting to see if the ESP chips could be integrated into this to remove the need for a usb cable. \u00A0I know it can be used as a wifi to serial bridge so it shouldn\u0027t take much to implement it. \u00A0How hard is it to assign\u00A0buttons to IO pins\u00A0on the arduino or is this what you are doing through this mod? i.e mapping the \u003Cabbr title=\u0022Reaction Control System\u0022\u003Ercs\u003C/abbr\u003E keys to buttons or a joystick? \u00A0I had a quick look last night at modding but most of the tutorials or knowledge bases I managed to find discussed graphic modding and adding extra engine parts rather than extracting and controlling game values. \u00A0I would love to be able to contribute to this but feel that I am still a bit too far behind the curve than you guys. I\u00A0have coding experience but nothing like this... mostly a few bits and pieces in basic, powershell, vbs, javascript, but this has been mainly for business domain environments rather than gaming. \u00A0I will have a try and keep an eye on this regularly as I am really enjoying farting about with breadboards and code again. \u00A0Plus KSP is an immense game that I am clocking up some serious hours on!\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nCheers for your help gents (assuming stereotypically that you are both the male of the species!!)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nJez\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-10T09:27:52Z","Content":"\n\u003Cp\u003E\nGlad it\u0027s working for you.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223051768\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494402399\u0022 data-ipsquote-userid=\u0022177494\u0022 data-ipsquote-username=\u0022Gizzum\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Gizzum said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt would be interesting to see if the ESP chips could be integrated into this to remove the need for a usb cable. \u00A0I know it can be used as a wifi to serial bridge so it shouldn\u0027t take much to implement it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEh, that\u0027s not really in the scope of what I\u0027m doing, I\u0027m deliberately only using serial interfaces. If you\u0027re interested in using a network connection, I believe the preferred method is interfacing with\u00A0\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/130742-122-krpc-control-the-game-using-c-c-java-lua-python-ruby-haskell-v038-29th-march-2017/\u0022 rel=\u0022\u0022\u003EkRPC\u003C/a\u003E, although I\u0027m not sure if anybody\u0027s using an esp8266 to talk directly with it yet.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223051768\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494402399\u0022 data-ipsquote-userid=\u0022177494\u0022 data-ipsquote-username=\u0022Gizzum\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Gizzum said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow hard is it to assign\u00A0buttons to IO pins\u00A0on the arduino or is this what you are doing through this mod? i.e mapping the \u003Cabbr title=\u0022Reaction Control System\u0022\u003Ercs\u003C/abbr\u003E keys to buttons or a joystick?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, this mod implements a serial protocol for sending commands to the game, and the Arduino library you started playing with provides a bunch of functions to simplify working with the protocol. Right now the system only properly supports sending action group commands (the stage demo is an example of this), but will eventually handle throttle, attitude and translation control, and probably more. An Arduino sketch for doing that would basically scale out the current stage demo - check the state of a bunch of input pins, and if the state changes then call the appropriate library function.\n\u003C/p\u003E\n"},{"CreatedByName":"monstah","CreatedById":95210,"CreatedDateTime":"2017-05-10T15:08:16Z","Content":"\n\u003Cp\u003E\nThe arduino function to send basic commands (abort, stage, \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E, etc) to KSP sends a byte, and I noticed on the defs they\u0027re powers of 2. If I OR them together, can I send a bunch of activations in a single message? Say, to enforce the panel is synchronized.\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-10T15:45:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223052042\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494428896\u0022 data-ipsquote-userid=\u002295210\u0022 data-ipsquote-username=\u0022monstah\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 minutes ago, monstah said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf I OR them together, can I send a bunch of activations in a single message? Say, to enforce the panel is synchronized.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI set it up as a bitfield specifically so you could do that, yes. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThat said, all of the standard action groups should behave as expected with multiple activation packets, except for the staging group. Currently I\u0027ve tweaked that so that each activation packet will activate the next stage. That was a conscious choice - the staging demo looks much neater without having to send an explicit deactivation in between each button press.\n\u003C/p\u003E\n\u003Cp\u003E\nEssentially, I\u0027m preferring one-shot packet sending. I\u0027ll try to support sending multiple commands where feasible, but for instances like this where there has to be a choice, I\u0027ll go for one packet == one command.\n\u003C/p\u003E\n\u003Cp\u003E\nCertainly happy to entertain changing that, and I guess I could hide the \u0022activate/deactivate\u0022 dance behind a helper stage function in the library. But that\u0027s how it is right now.\n\u003C/p\u003E\n\u003Cp\u003E\nIn other progress news, this evening I\u0027ve gotten the resource sending happening. You can implement a basic alarm light for the stage \u003Cabbr title=\u0022Liquid Fuel\u0022\u003ELF\u003C/abbr\u003E with something like this\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Evoid\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E messageHandler\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ebyte messageType\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E byte msg\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E[],\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E byte msgSize\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eswitch\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EmessageType\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Ecase\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E LF_STAGE_MESSAGE\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EmsgSize \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E==\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Esizeof\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EresourceMessage\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E))\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      resourceMessage myLF\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      myLF \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E parseResource\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Emsg\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EmyLF\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Etotal \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026amp;\u0026amp;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E myLF\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Eavailable \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E10\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        digitalWrite\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003ELED_BUILTIN\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E HIGH\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eelse\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        digitalWrite\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003ELED_BUILTIN\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E LOW\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Ebreak\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI want to add a little more of the basic orbital parameters (velocity, vertical velocity, inclination, stuff like that), and finally make sure there\u0027s some real API docs for the Arduino library online. Then I\u0027ll package up a new prerelease.\n\u003C/p\u003E\n"},{"CreatedByName":"Gizzum","CreatedById":177494,"CreatedDateTime":"2017-05-10T19:21:31Z","Content":"\n\u003Cp\u003E\nThanks Stibbons.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf I where to try and understand what you are doing so that I may contribute to this where would you suggest is a good place to start researching?\u00A0 I love to find out how things work so would love to follow this and actually understand what you guys are talking about, where the info comes from and how it integrates with the arduino. \u00A0Please fell free to tell me to do one if I am standing on your toes!\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-11T02:50:15Z","Content":"\n\u003Cp\u003E\nErm, well I keep track of everything that I want to do with this project on\u00A0\u003Ca href=\u0022https://trello.com/b/t6YUftuS/kerbalsimpit-progress\u0022 rel=\u0022external nofollow\u0022\u003Ea Trello board\u003C/a\u003E, but honestly it\u0027s at the point where most of those tasks are boring housekeeping around making sure it\u0027s in a clean and tidy state for a real release.\n\u003C/p\u003E\n\u003Cp\u003E\nI suppose the most interesting work right now is implementing more inbound and outbound data providers - the classes that pull info from KSP and send it to serial connections, and receive data from serial connections and feed commands in to KSP. Documenting those properly is... well... in a Trello card. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThe\u00A0\u003Ca href=\u0022https://bitbucket.org/pjhardy/kerbalsimpit/wiki/Protocol\u0022 rel=\u0022external nofollow\u0022\u003Eserial protocol\u003C/a\u003E\u00A0doc is slightly out of date, but should give a good grounding in to how data gets between the plugin and connected devices. After that, download the\u00A0\u003Ca href=\u0022https://bitbucket.org/pjhardy/kerbalsimpit\u0022 rel=\u0022external nofollow\u0022\u003Eplugin source\u003C/a\u003E\u00A0and start with the classes in the KerbalSimPit/Providers directory. All providers inherit from MonoBehaviour, and the majority of them will start in the flight scene.\n\u003C/p\u003E\n\u003Cp\u003E\nThe plugin uses many, many custom Game Events to pass data between providers and serial connections. For data going from serial to providers, there are \u0022onSerialReceived\u0022 game events from \u0022onSerialReceived0\u0022 up to a theoretical max of \u0022onSerialReceived255\u0022. For data going from providers to serial devices, there\u0027s \u0022toSerial0\u0022 up to \u0022toSerial255\u0022. The ints in these game event names corresponds to the channel ID in the serial protocol.\n\u003C/p\u003E\n\u003Cp\u003E\nIf a provider wants to receive data from a serial device, in its Start method it should add a callback handler to the onSerialReceived Game Event with the appropriate channel ID. Have a look at Actions.cs file for an example of doing this for the standard action groups. Note that the serial receiving, and the callback, are executed in a different thread, so you usually want the callback handler to set a flag and then action that flag in the provider class Update method.\n\u003C/p\u003E\n\u003Cp\u003E\nIf a provider wants to send data to a serial device, it can find the appropriate \u0022toSerial\u0022 Game Event with the appropriate channel ID, and just call that Game Event\u0027s Fire method, passing in the channel ID and any object representing the data to send. If the provider wants to, it can register a callback with the KSPit.AddToDeviceHandler() function. This callback will be called on a regular basis by the plugin (currently hardcoded to every 40ms, but will soon be user-configurable), giving the provider a way to send regular packets to interested devices. See the Telemetry.cs file for an example of doing this with altitude and apoapsis/periapsis.\n\u003C/p\u003E\n\u003Cp\u003E\nSNEAKY EDIT: Oh, I forgot to mention the \u003Ca href=\u0022https://bitbucket.org/pjhardy/kerbalsimpit-arduino\u0022 rel=\u0022external nofollow\u0022\u003EArduino library\u003C/a\u003E. It\u0027s there to automate the handshaking, provide low-level send and receive functionality, and a bunch of structs and helper functions to make higher level channel handling easier. If you want to learn your way around that, pull down the repo, familiarise yourself with the class layout in KerbalSimPit.h , and read through the other header files to hopefully get a good idea of where I want to take it.\n\u003C/p\u003E\n\u003Cp\u003E\nHope that gives you enough to go on. Let me know if you have any more questions.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-11T03:20:04Z\u0022 title=\u002205/11/2017 03:20  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 11, 2017\u003C/time\u003E by stibbons\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gizzum","CreatedById":177494,"CreatedDateTime":"2017-05-11T21:09:52Z","Content":"\n\u003Cp\u003E\nOK... been reading and my head hurts... a lot!\n\u003C/p\u003E\n\u003Cp\u003E\nIf I want to implement a switch for the standard action groups for example \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E, I would need check for the current status of the RCS_bit and then activate or deactivate the action accordingly dependent on the position of the switch. \u00A0How do I request from KSP\u00A0the state of the RCS_Bit?\u00A0Is\u00A0there an RCS_MESSAGE?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-11T22:32:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223053684\u0022 data-ipsquote-contentid=\u0022155796\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494536992\u0022 data-ipsquote-userid=\u0022177494\u0022 data-ipsquote-username=\u0022Gizzum\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Gizzum said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf I want to implement a switch for the standard action groups for example \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E, I would need check for the current status of the RCS_bit and then activate or deactivate the action accordingly dependent on the position of the switch.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou don\u0027t actually need to check the current state of \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E in the game (which is good because I haven\u0027t yet added a message for action groups coming out of the game \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0). You would just need to check the state of the switch, and send an activate or deactivate packet. I\u0027m at work so can\u0027t test this, but you should be able to take the staging demo and just modify the loop() like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Evoid\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E loop\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E()\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// Read the state of the switch into a local variable.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan\u003Eint\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E reading \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E digitalRead\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EbuttonPin\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n  \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// check to see if you just pressed the button\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// (i.e. the input went from LOW to HIGH),  and you\u0027ve waited\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// long enough since the last press to ignore any noise:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n  \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// If the switch changed, due to noise or pressing:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ereading \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E!=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lastButtonState\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// reset the debouncing timer\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    lastDebounceTime \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E millis\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E();\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n  \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E((\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Emillis\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E()\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E-\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E lastDebounceTime\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E debounceDelay\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// whatever the reading is at, it\u0027s been there for longer\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// than the debounce delay, so take it as the actual current state:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n    \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// if the button state has changed:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ereading \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E!=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E buttonState\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      buttonState \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E reading\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n      \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EbuttonState \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E==\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E HIGH\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// If the switch has just gone HIGH, activate \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        mySimPit\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EactivateAction\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003ERCS_ACTION\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eelse\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022com\u0022\u003E// If the switch has just gone LOW, deactivate \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        mySimPit\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003EdeactivateAction\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003ERCS_ACTION\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n      \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \n    \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n  \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Gizzum","CreatedById":177494,"CreatedDateTime":"2017-05-12T05:42:53Z","Content":"\n\u003Cp\u003E\nThanks stibbons,\n\u003C/p\u003E\n\u003Cp\u003E\ni had managed to get the switch to work as you discribed but was thinking if there was a point in the game where you go to a ship that has \u003Cabbr title=\u0022Reaction Control System\u0022\u003Ercs\u003C/abbr\u003E on and your switch is in the off position it would instantly turn it off. Or worse something like landing gear. \u00A0If the switch\u00A0was in the gear up position and you swap to a lander you wouldn\u0027t want you ship retracting its gear and falling over. Could that happen or am I talking rubbish.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stibbons","CreatedById":57865,"CreatedDateTime":"2017-05-12T11:45:46Z","Content":"\n\u003Cp\u003E\nThat\u0027s not an impossible scenario, true. Although I think this plugin is safely at the point where I could just ask \u0022What happened when you tried it?\u0022\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s important to note that the code I\u0027ve pasted above only sends a command when the switch state changes. Even though I will be adding channels so a controller can be notified of a scene change, and the current action group state when the flight scene starts, neither of those are required to avoid catastrophe.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTo take your landing gear example, it\u0027s very easy to get to a point where your gear switch is \u0022up\u0022 when you switch to a vessel with gear down. Just flip the switch up at \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E and then switch to a vessel with its gear down. But when that happens, your controller won\u0027t send a gear up command to the vessel because the switch is already up. And when you flip the switch down your controller will send an activate gear command but nothing happens as the gear are already active. It\u0027s a cosmetic controller \u00A0issue that I don\u0027t particularly like much, but won\u0027t cause any problems in-game.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Gizzum","CreatedById":177494,"CreatedDateTime":"2017-05-12T12:47:05Z","Content":"\n\u003Cp\u003E\ndefo gonna try it now!\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E. \u00A0The only problem is that my CDO (I am so OCD I have to put it in alphabetical order!!)\u00A0is gonna be screaming at me to check the state\u00A0of switches now when I change crafts! \u00A0It would be \u0022a nice to have\u0022 that the status led flashes\u00A0if it is the wrong position?? So how do you go about getting the action group status out of the game. \u00A0Is it the same procedure as the telemetry? \u00A0I don\u0027t have much time this weekend as I am a photographer at a wedding all day tomorrow but I would love to figure that part out as well.\n\u003C/p\u003E\n"}]}