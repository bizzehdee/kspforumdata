{"TopicId":128070,"ForumId":29,"TopicTitle":"Can I set isp as a function of velocity?","CreatedByName":"JediMasterSterling1","CreatedById":155361,"CreatedDateTime":"2015-12-17T21:53:11Z","PageNum":1,"Articles":[{"CreatedByName":"JediMasterSterling1","CreatedById":155361,"CreatedDateTime":"2015-12-17T21:53:11Z","Content":"\n\u003Cp\u003E\nI\u0027m altering the config file of an electric propeller engine. It previously would either not get off the ground, or get all the way to orbit. So it needed a reality check.\n\u003C/p\u003E\n\u003Cp\u003E\nThe physics of a propeller are such that without the compressor\u00A0jets\u00A0have efficiency drops off\u00A0almost linearly with pressure, and also as the propeller blades exceed the speed of sound they become drag devices rather than lift devices. A standard base line seems to be a supersonic buzzing starting at around mach 0.85, net trust dropping to 0 by about\u00A0mach 0.90 and thrust going negative past that.\n\u003C/p\u003E\n\u003Cp\u003E\nAltering the forces is pretty easy using atmCurve{} and velCurve{}. Making sure the engine still draws power is a bit more difficult.\n\u003C/p\u003E\n\u003Cp\u003E\nI solved the problem with atmosphere drop off by using atmosphereCurve{} like so.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E\t\tname = ModuleEnginesFX\n\t\t...\n\n\t\tatmosphereCurve\n\t\t{\n\t\t\tkey = 0 800 0 1000000\n\t\t\tkey = 0.000001 0 0 0.3012048\n\t\t\tkey = 0.5 789.496 0.02686068 0.02686068\n\t\t\tkey = 20 960 0 0\n\t\t}\n\n\t\t// Jet params\n\t\t...\n\n\t\tatmCurve\n\t\t{\n\t\t\tkey = 0 0 0 0\n\t\t\tkey = 0.000001 0 0 0.3012048\n\t\t\tkey = 0.5 0.98687 0.02686068 0.02686068\n\t\t\tkey = 20 1.2 0 0\n\t\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nSo that force and efficiency drop at the same time and\u00A0at the same rate.\n\u003C/p\u003E\n\u003Cp\u003E\nI would like to do the same thing with velocity.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what I tried:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E\t\tname = ModuleEnginesFX\n\t\t...\n\n\t\tvelocityCurve\n\t\t{\n\t\t\tkey = 0 600 0 0\n\t\t\tkey = 0.5 800 0 0\n\t\t\tkey = 0.85 400 -2.125082 -29.05206\n\t\t\tkey = 1 800 0 0\n\t\t}\n\n\t\t// Jet params\n\t\t...\n\n\t\tvelCurve\n\t\t{\n\t\t\tkey = 0 0.75 0 0\n\t\t\tkey = 0.5 1 0 0\n\t\t\tkey = 0.85 0.5 -2.125082 -29.05206\n\t\t\tkey = 1 -1 0 0\n\t\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nBut the game doesn\u0027t recognize velocityCurve{} as anything even though I\u0027m fairly sure I\u0027ve seen it used before. (can\u0027t remember where)\n\u003C/p\u003E\n\u003Cp\u003E\nAs is the game follows velCurve{} by changing the flow of electricity rather than engine efficiency. However it makes no sense to have the propeller tips experiencing extreme supersonic drag at mach 0.90 but not requiring any power to keep moving and even less sense to have the propeller creating drag similar to a 1m parachute at mach 1\u00A0and actually be producing electricity.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there something small I\u0027m missing in syntax, am I way off the mark, or is this idea impossible using base game mechanics?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s the whole module:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nMODULE\n{\n\tname = ModuleEnginesFX\n\tthrustVectorTransformName = thrustTransform\n\texhaustDamage = False\n\tignitionThreshold = 0.1\n\tminThrust = 0\n\tmaxThrust = 50\n\theatProduction = 8\n\tuseEngineResponseTime = True\n\tengineAccelerationSpeed = 20\n\tengineDecelerationSpeed = 20\n\t//useVelocityCurve = True\n\tEngineType = Turbine\n\tPROPELLANT\n\t{\n\t\tname = ElectricCharge\n\t\tratio = 0.4\n\t\tDrawGauge = True\n\t}\n\tPROPELLANT\n\t{\n\t\tname = FSCoolant\n\t\tignoreForIsp = True\n\t\tratio = 0.01\n\t}\n    \tatmosphereCurve\n    \t{\n\t\tkey = 0 800 0 1000000\n\t\tkey = 0.000001 0 0 0.3012048\n\t\tkey = 0.5 789.496 0.02686068 0.02686068\n\t\tkey = 20 960 0 0\n    \t}\n\n\t\t// Jet params\n\t\tatmChangeFlow = False\n\t\tuseVelCurve = True\n\t\tuseAtmCurve = True\n\t\tflameoutBar = 0.001\n\t\tflowCapMult = 1.0\n\t\tmachHeatMult = 10\n\n\t\tatmCurve\n\t\t{\n\t\t\tkey = 0 0 0 0\n\t\t\tkey = 0.000001 0 0 0.3012048\n\t\t\tkey = 0.5 0.98687 0.02686068 0.02686068\n\t\t\tkey = 20 1.2 0 0\n\t\t}\n\t\tvelCurve\n\t\t{\n\t\t\tkey = 0 0.75 0 0\n\t\t\tkey = 0.5 1 0 0\n\t\t\tkey = 0.85 0.5 -2.125082 -29.05206\n\t\t\tkey = 1 -1 0 0\n\t\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-12-17T22:52:40Z","Content":"\n\u003Cp\u003E\nThe best source of information on this stuff is \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/108848-howto-airbreathing-engines-in-ksp-10/\u0022\u003Ehere\u003C/a\u003E but I don\u0027t think there\u0027s anything in the stock module that allows ISP to be modified by velocity. velocityCurve is not a valid parameter as of 1.0 (it \u003Cstrong\u003Ewas\u003C/strong\u003E a parameter pre-1.0 so you will see it mentioned every now and again).\n\u003C/p\u003E\n\u003Cp\u003E\nThe best way I can see to do this is a separate module that bases power draw on current throttle and any other parameters you want. You\u0027ll probably need something custom for that, There aren\u0027t many stock modules that vary based on throttle\n\u003C/p\u003E\n"},{"CreatedByName":"JediMasterSterling1","CreatedById":155361,"CreatedDateTime":"2015-12-17T23:10:30Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222326981\u0022 data-ipsquote-contentid=\u0022128070\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221450392760\u0022 data-ipsquote-userid=\u002292871\u0022 data-ipsquote-username=\u0022Crzyrndm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 minutes ago, Crzyrndm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe best source of information on this stuff is \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/108848-howto-airbreathing-engines-in-ksp-10/\u0022\u003Ehere\u003C/a\u003E but I don\u0027t think there\u0027s anything in the stock module that allows ISP to be modified by velocity. velocityCurve is not a valid parameter as of 1.0 (it \u003Cstrong\u003Ewas\u003C/strong\u003E a parameter pre-1.0 so you will see it mentioned every now and again).\n\u003C/p\u003E\n\u003Cp\u003E\nThe best way I can see to do this is a separate module that bases power draw on current throttle and any other parameters you want. You\u0027ll probably need something custom for that, There aren\u0027t many stock modules that vary based on throttle\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFair enough.\n\u003C/p\u003E\n\u003Cp\u003E\nWhere would I find info on how to develop and integrate a new module like the one you suggest?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso I could get a similar effect by changing drag on the propeller disk given velocity if that would be easier\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-12-17T23:18:24Z\u0022 title=\u002212/17/2015 11:18  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 17, 2015\u003C/time\u003E by JediMasterSterling1\u003C/strong\u003E\n\u003Cbr\u003EOne more thing\n\u003C/span\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-12-18T02:45:07Z","Content":"\n\u003Cp\u003E\nThis should do what you need. You\u0027ll need to compile it though (I can\u0027t do that atm) and I\u0027ve probably forgotten something\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint prettyprinted\u0022\u003E\n\u003Cspan\u003Eusing\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ESystem\u003C/span\u003E\u003Cspan\u003E;\u003C/span\u003E\u003Cspan\u003E\n\u003C/span\u003E\u003Cspan\u003Eusing\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ESystem\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003ECollections\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003EGeneric\u003C/span\u003E\u003Cspan\u003E;\u003C/span\u003E\u003Cspan\u003E\n\u003C/span\u003E\u003Cspan\u003Eusing\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ESystem\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003ECollections\u003C/span\u003E\u003Cspan\u003E;\u003C/span\u003E\u003Cspan\u003E\n\u003C/span\u003E\u003Cspan\u003Eusing\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ESystem\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003ELinq\u003C/span\u003E\u003Cspan\u003E;\u003C/span\u003E\u003Cspan\u003E\n\u003C/span\u003E\u003Cspan\u003Eusing\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EUnityEngine\u003C/span\u003E\u003Cspan\u003E;\u003C/span\u003E\u003Cspan\u003E\n\n\u003C/span\u003E\u003Cspan\u003Enamespace\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EThisIsNotTested\u003C/span\u003E\u003Cspan\u003E\n\u003C/span\u003E\u003Cspan\u003E{\u003C/span\u003E\u003Cspan\u003E\n    \u003C/span\u003E\u003Cspan\u003Epublic\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003Eclass\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EThrottledResourceConsumer\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E:\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EPartModule\u003C/span\u003E\u003Cspan\u003E\n    \u003C/span\u003E\u003Cspan\u003E{\u003C/span\u003E\u003Cspan\u003E\n        \u003C/span\u003E\u003Cspan\u003E[\u003C/span\u003E\u003Cspan\u003EKSPField\u003C/span\u003E\u003Cspan\u003E]\u003C/span\u003E\u003Cspan\u003E\n        \u003C/span\u003E\u003Cspan\u003Epublic\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003Efloat\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ERate\u003C/span\u003E\u003Cspan\u003E;\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// consumption per second at max throttle\u003C/span\u003E\u003Cspan\u003E\n      \t\u003C/span\u003E\u003Cspan\u003E[\u003C/span\u003E\u003Cspan\u003EKSPField\u003C/span\u003E\u003Cspan\u003E]\u003C/span\u003E\u003Cspan\u003E\n      \t\u003C/span\u003E\u003Cspan\u003Epublic\u003C/span\u003E\u003Cspan\u003E string \u003C/span\u003E\u003Cspan\u003EResource\u003C/span\u003E\u003Cspan\u003E;\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// the resource to use\u003C/span\u003E\u003Cspan\u003E\n\n        \u003C/span\u003E\u003Cspan\u003Epublic\u003C/span\u003E\u003Cspan\u003E override \u003C/span\u003E\u003Cspan\u003Evoid\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EOnStart\u003C/span\u003E\u003Cspan\u003E(\u003C/span\u003E\u003Cspan\u003EStartState\u003C/span\u003E\u003Cspan\u003E state\u003C/span\u003E\u003Cspan\u003E)\u003C/span\u003E\u003Cspan\u003E\n        \u003C/span\u003E\u003Cspan\u003E{\u003C/span\u003E\u003Cspan\u003E\n            \u003C/span\u003E\u003Cspan\u003Eif\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E(!\u003C/span\u003E\u003Cspan\u003EHighlogic\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003EloadedSceneIsFlight\u003C/span\u003E\u003Cspan\u003E)\u003C/span\u003E\u003Cspan\u003E\n                \u003C/span\u003E\u003Cspan\u003Ereturn\u003C/span\u003E\u003Cspan\u003E;\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// do nothing in the editor\u003C/span\u003E\u003Cspan\u003E\n            \u003C/span\u003E\u003Cspan\u003Eif\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E(\u003C/span\u003E\u003Cspan\u003Epart\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003EModules\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003EGetModules\u003C/span\u003E\u003Cspan\u003E\u0026lt;\u003C/span\u003E\u003Cspan\u003EModuleEngines\u003C/span\u003E\u003Cspan\u003E\u0026gt;.\u003C/span\u003E\u003Cspan\u003EFirstOrDefault\u003C/span\u003E\u003Cspan\u003E()\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E==\u003C/span\u003E\u003Cspan\u003E null\u003C/span\u003E\u003Cspan\u003E)\u003C/span\u003E\u003Cspan\u003E\n              \u003C/span\u003E\u003Cspan\u003EDestroy\u003C/span\u003E\u003Cspan\u003E(\u003C/span\u003E\u003Cspan\u003Ethis\u003C/span\u003E\u003Cspan\u003E);\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// only want this module to work on parts that have an engine as well. Kill it if no engine module is present\u003C/span\u003E\u003Cspan\u003E\n        \u003C/span\u003E\u003Cspan\u003E}\u003C/span\u003E\u003Cspan\u003E\n\n        \u003C/span\u003E\u003Cspan\u003Epublic\u003C/span\u003E\u003Cspan\u003E override \u003C/span\u003E\u003Cspan\u003Evoid\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003EOnFixedUpdate\u003C/span\u003E\u003Cspan\u003E()\u003C/span\u003E\u003Cspan\u003E\n        \u003C/span\u003E\u003Cspan\u003E{\u003C/span\u003E\u003Cspan\u003E\n            \u003C/span\u003E\u003Cspan\u003Eif\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E(!\u003C/span\u003E\u003Cspan\u003EHighlogic\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003EloadedSceneIsFlight\u003C/span\u003E\u003Cspan\u003E)\u003C/span\u003E\u003Cspan\u003E\n                \u003C/span\u003E\u003Cspan\u003Ereturn\u003C/span\u003E\u003Cspan\u003E;\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E// do nothing in the editor\u003C/span\u003E\u003Cspan\u003E\n            \u003C/span\u003E\u003Cspan\u003E// pull EC based on the throttle being used for this vessel\u003C/span\u003E\u003Cspan\u003E\n            part\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003ErequestResource\u003C/span\u003E\u003Cspan\u003E(\u003C/span\u003E\u003Cspan\u003EResource\u003C/span\u003E\u003Cspan\u003E,\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ERate\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003E*\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003ETimeWarp\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003EfixedDeltaTime \u003C/span\u003E\u003Cspan\u003E*\u003C/span\u003E\u003Cspan\u003E vessel\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003EctrlState\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003EmainThrottle\u003C/span\u003E\u003Cspan\u003E);\u003C/span\u003E\u003Cspan\u003E\n        \u003C/span\u003E\u003Cspan\u003E}\u003C/span\u003E\u003Cspan\u003E\n    \u003C/span\u003E\u003Cspan\u003E}\u003C/span\u003E\u003Cspan\u003E\n\u003C/span\u003E\u003Cspan\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nAnd the module manager patch to add it to a part\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n@PART[\u0026lt;insert your part name here\u0026gt;]\n{\n\tMODULE\n    {\n    \tname = ThrottledResourceConsumer\n        Rate = 10 // 10 EC per secon at max throttle\n        Resource = ElectricCharge\n    }\n}\u003C/pre\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\u00A0\u003C/pre\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-12-18T06:48:21Z","Content":"\n\u003Cp\u003E\nI posted on the original thread \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/155361-jedimastersterling1/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022155361\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/155361-jedimastersterling1/\u0022\u003E@JediMasterSterling1\u003C/a\u003E made. As the changelog for 1.0.5 states (read it guys! pls!) this \u003Cem\u003Eis\u003C/em\u003E now supported by ModuleEngines and all which derives from it. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}