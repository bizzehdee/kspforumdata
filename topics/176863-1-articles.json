{"TopicId":176863,"ForumId":104,"TopicTitle":"[SOLVED] Tuning ModuleAblator and ModuleColorChanger parameters for a resilient but quick-charring heatshield","CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2018-07-19T21:10:42Z","PageNum":1,"Articles":[{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2018-07-19T21:10:43Z","Content":"\n\u003Cp\u003E\nI\u0027m currently working on a new aftermarket heat shield for the stock Mk1-3 pod.\n\u003C/p\u003E\n\u003Cp\u003E\nThis heat shield is supposed to be more resilient than the stock 2.5m one in that it consumes Ablator more slowly under similar re-entry conditions, but would char/blacken almost instantly.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat charmin/charmax and ModuleColorChanger curve settings should I used to make this possible?\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nMODULE\n{\n\tname = ModuleAblator\n\tablativeResource = Ablator\n\tlossExp = -7500\n\tlossConst = 0.01\n\tpyrolysisLossFactor = 6000\n\treentryConductivity = 0.01\n\tablationTempThresh = 500\n\n\tuseChar = True\n\tcharModuleName = shieldChar\n\tcharMin = 0.99\n\tcharMax = 1.0\n}\n\nMODULE\n{\n\tname = ModuleColorChanger\n\tmoduleID = shieldChar\n\tshaderProperty = _BurnColor\n\tuseRate = False\n\ttoggleInEditor = False\n\ttoggleInFlight = False\n\n\tredCurve\n\t{\n\t\tkey = 0 0\n\t\tkey = 1 1\n\t}\n\tgreenCurve\n\t{\n\t\tkey = 0 0\n\t\tkey = 1 1\n\t}\n\tblueCurve\n\t{\n\t\tkey = 0 0\n\t\tkey = 1 1\n\t}\n\talphaCurve\n\t{\n\tkey = 0 0.8\n\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-07-24T22:11:39Z\u0022 title=\u002207/24/2018 10:11  PM\u0022 data-short=\u00225 yr\u0022\u003EJuly 24, 2018\u003C/time\u003E by sumghai\u003C/strong\u003E\n\u003Cbr\u003EMark as solved\n\u003C/span\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2018-07-24T22:10:55Z","Content":"\n\u003Cp\u003E\nWith \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022114736\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0022 rel=\u0022\u0022\u003E@JPLRepo\u003C/a\u003E\u0027s help, I\u0027ve resolved my problem.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\ncharMin and charMax define the minimum and maximum alphas\n\u003C/li\u003E\n\u003Cli\u003E\nModuleAblator calculates the amount of Ablator to burn off, and tells ModuleColorChanger the amount to adjust the alpha on the color by calculating a percentage of ablator to burn off and setting that between charMin and charMax\n\u003C/li\u003E\n\u003Cli\u003E\nModuleColorChanger will adjust the rgba values based on the redCurve, greenCurve, blueCurve, alphaCurve defined in those KSPFields\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nIn my case, I managed to adjust the RGBA color curves such that my custom heatshield chars to black when only 99.75% (i.e. 798/800 units) of Ablator remains during/after re-entry:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nMODULE\n{\n\tname = ModuleAblator\n\tablativeResource = Ablator\n\tlossExp = -7500\n\tlossConst = 0.01\n\tpyrolysisLossFactor = 6000\n\treentryConductivity = 0.01\n\tablationTempThresh = 500\n\n\tuseChar = True\n\tcharModuleName = shieldChar\n\tcharMin = 0.0\n\tcharMax = 1.0\n}\n\nMODULE\n{\n\tname = ModuleColorChanger\n\tmoduleID = shieldChar\n\tshaderProperty = _BurnColor\n\tuseRate = False\n\ttoggleInEditor = False\n\ttoggleInFlight = False\n\n\tredCurve\n\t{\n\t\tkey = 0.9975 0\n\t\tkey = 1 1\n\t}\n\tgreenCurve\n\t{\n\t\tkey = 0.9975 0\n\t\tkey = 1 1\n\t}\n\tblueCurve\n\t{\n\t\tkey = 0.9975 0\n\t\tkey = 1 1\n\t}\n\talphaCurve\n\t{\n\tkey = 0 0.8\n\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2023-03-24T02:59:11Z","Content":"\n\u003Cp\u003E\nFound this today! What an improvement this makes.\u003Cbr\u003E\n\u003Cbr\u003E\nI did alter the 2nd value of the 1st keys to 0.4 so the result is very dark, but you don\u0027t loose the details of the texture. Makes it more \u0022Dark Roast\u0022 and less \u0022Burnt to a cinder\u0022\u003Cbr\u003E\n\u003Cbr\u003E\nWhipped up a \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E script to apply it to all ablator equipped parts (including the pods in Making History)\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E// Tweak ablator effects so they always go dark at 99.75% ablator remaining\n// TG626\n@PART[*]:HAS[@MODULE[ModuleAblator]]:FINAL\n{\n   @MODULE[ModuleAblator]\n   {\n      %charMin = 0.0\n      %charMax = 1.0\n   }\n   @MODULE[ModuleColorChanger]:HAS[#moduleID[shieldChar]]\n   {\n      @shaderProperty = _BurnColor\n      @redCurve\n      {\n         @key,0 = 0.9975 .4\n      }\n      @greenCurve\n      {\n         @key,0 = 0.9975 .4\n      }\n      @blueCurve\n      {\n         @key,0 = 0.9975 .4\n      }\n   }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}