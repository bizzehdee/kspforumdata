{"TopicId":10075,"ForumId":34,"TopicTitle":"[0.17] Electrical Energy Plugin | v1.5 (Oct 12)","CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-01T17:37:37Z","PageNum":3,"Articles":[{"CreatedByName":"Justin8Ball","CreatedById":9094,"CreatedDateTime":"2012-05-10T16:40:17Z","Content":"Well you are doing a swell job... keep it up."},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-10T16:48:22Z","Content":"OK, update in progress. Uploaded new plugin version, now packing the parts.\n\nEdit: Update completed."},{"CreatedByName":"Rocketscienist","CreatedById":12576,"CreatedDateTime":"2012-05-10T19:43:10Z","Content":"\u003E \n\u003E I could do it in the next 30 minutes, but I think something is missing, but I don\\\u0027t know what.\n\u003E \n\u003E Anyway, changelog:\n\u003E \n\u003E \u002BAdded airfilters, they consume energy and produce ZO2 if the ZO2 plugin is installed and used on the ship\n\u003E \n\u003E \u002BAdded a new solar panel type derived FromMuMechSolarPanel for part creators\n\u003E \n\u003E \u002BAdded experimental 1m to 2m reactor, 2m battery and 2m plasma engine by Yorik, they are not really balanced and the reactor Krakens away from whatever it is attached to (will be separate download)\n\u003E \n\u003E \\*Fixed battery icon color\n\u003E \n\u003E \\*Did some tweaks with the parts I can\\\u0027t remember\n\u003E \n\u003E \\*Going to divide download into plugin, DSM parts and VB parts\n\u003E \n\u003E \\*Fixed EL\\_API class to also look for MuMechVariableTanks with fueltype = Energy, not only batteries\n\u003E \n\u003E -Removed that crappy 1m-1.5m decoupler, if you really need that use the ones from CardBoardBoxProcessors Space Penetration Co instead\n\u003E \n\u003E -Forgot what else I did\n\nI will test this awesome things tomorrow!"},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-10T20:39:30Z","Content":"Still no word on .15, frustration. I took a look at that problem you we were having with the gauges instead.\n\n\u003E \n\u003E public static float Consume(float Amount, Vessel vessel)  \n\u003E MuMechVariableTank b = (MuMechVariableTank)p;  \n\u003E b.getFuel(\u0027Energy\u0027, Amount);  \n\u003E elsewhere  \n\u003E public class Battery : MuMechVariableTank\n\u003E \n\u003E \n\u003E     \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  You\\\u0027re not getting calls to getFuel() in Battery because \u0027b\u0027 is of type MuMechVariableTank. Even if you cast it\\\u0027s value to (Battery), it still won\\\u0027t work, as \u0027new\u0027 method resolution is done by the compiler based on variable type (from examples I\\\u0027ve read online); virtual override is run time, and does not have this problem.\n\u003E \n\u003E  Since you can\\\u0027t use an override, you will have to test \u0027(p is Battery)\u0027 somewhere after \u0027foreach (Part p in vessel.parts)\u0027, but before you test \u0027(p is MuMechVariableTank)\u0027. The problem with testing for MuMechVariableTank is that Battery is derived from it, and will return true; since \u0027is\u0027 includes ancestor classes in testing.\n\u003E \n\u003E  Something like this may work.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u003E \n\u003E \u003E public static float Consume(float Amount, Vessel vessel)  \n\u003E \u003E  {  \n\u003E \u003E  foreach (Part p in vessel.parts)//Check each part  \n\u003E \u003E  {  \n\u003E \u003E  if (p is Battery \u0026\u0026 (p.State == PartStates.ACTIVE || p.State == PartStates.IDLE))  \n\u003E \u003E  {  \n\u003E \u003E  Battery b = (Battery)p;  \n\u003E \u003E  if (b.type != \u0027Energy\u0027) continue;  \n\u003E \u003E  if (b.fuel \u003E= Amount)//Battery contains more energy than amount, take amount and return 0  \n\u003E \u003E  {  \n\u003E \u003E  b.getFuel(\u0027Energy\u0027, Amount);  \n\u003E \u003E  return 0;  \n\u003E \u003E  }  \n\u003E \u003E  else//Battery contains less than amount, take it and search for next battery  \n\u003E \u003E  {  \n\u003E \u003E  if (b.fuel == 0)  \n\u003E \u003E  continue;  \n\u003E \u003E  Amount -= b.fuel;  \n\u003E \u003E  b.getFuel(\u0027Energy\u0027, Amount);  \n\u003E \u003E  }  \n\u003E \u003E  }  \n\u003E \u003E  else if (p is MuMechVariableTank \u0026\u0026 (p.State == PartStates.ACTIVE || p.State == PartStates.IDLE))  \n\u003E \u003E  {  \n\u003E \u003E  MuMechVariableTank b = (MuMechVariableTank)p;  \n\u003E \u003E  if (b.type != \u0027Energy\u0027) continue;  \n\u003E \u003E  if (b.fuel \u003E= Amount)//Battery contains more energy than amount, take amount and return 0  \n\u003E \u003E  {  \n\u003E \u003E  b.getFuel(\u0027Energy\u0027, Amount);  \n\u003E \u003E  return 0;  \n\u003E \u003E  }  \n\u003E \u003E  else//Battery contains less than amount, take it and search for next battery  \n\u003E \u003E  {  \n\u003E \u003E  if (b.fuel == 0)  \n\u003E \u003E  continue;  \n\u003E \u003E  Amount -= b.fuel;  \n\u003E \u003E  b.getFuel(\u0027Energy\u0027, Amount);  \n\u003E \u003E  }  \n\u003E \u003E  }  \n\u003E \u003E  }  \n\u003E \u003E  return Amount;  \n\u003E \u003E  }\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E     \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \n\n If you stick that in MSVS C#, and hover over b.getFuel in the top block, it will show the Battery.getFuel() signature, hover over b.getFuel on the bottom, it shows MuMechVariableTank.getFuel().\n\n The problem is that if any other code calls getFuel() from a variable of type MuMechVariableTank, whether it\\\u0027s value is cast to (Battery) or not, will call MuMechVariableTank.getFuel(). It should at least fix your call to the member, however."},{"CreatedByName":"Frostiken","CreatedById":1837,"CreatedDateTime":"2012-05-11T01:30:17Z","Content":"Uhf. We really need to standardize certain plugins as \\\u0027must have\\\u0027, because power mods are awesome, but useless when there\\\u0027s others like PowerSat and very little (read: no) support from other mod makers for them.\n\nImagine the possibilities if things like this mod and PowerSat were combined, and all solar panel mods out there supported them properly."},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-05-11T03:18:26Z","Content":"Just wait for .15 \u0026 .16, modularization will end up with a master resource table, and you just tweak a part to say hold 100 units of fuel @ .002 density, or 10MW @ 0 density. There was talk of a standardized fuel/energy system at the start of .14, but modders just don\\\u0027t play well together, so Squad has to do it themselves."},{"CreatedByName":"TheCardinal","CreatedById":22874,"CreatedDateTime":"2012-05-11T06:15:18Z","Content":"One suggestion for use must be powering anything which normally should use oiwer, s.a. a MechJeb (no power, no MechJeb) or wheels or control surfaces."},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-11T10:02:54Z","Content":"The problem is, that this whould discriminate users who don\\\u0027t use my plugin. The ZO2 plugin has a very good solution for that jin their main system, but adding that to my plugin whould not be possible without major changes and possibly bugs. I could of course be an egoist and release an energy-based version of each plugin that exist, but whouln\\\u0027t that be a bit... stupid, egoistic, redundant, etc?\n\nLol just had my mouse over \u0027average\u0027 in my Xenolith stats and ads for \u0027This Video is Awesome\u0027 came out. Average, hmm...\n\nI want to bring things like the PowerTech or MultiJointPart panels in this, I did the beginnning with the MuMech-based panel type for now, but I\\\u0027ll stop development for now, .15 plugin dev crysis ;D"},{"CreatedByName":"CleverWalrus","CreatedById":11812,"CreatedDateTime":"2012-05-13T15:48:31Z","Content":"Hello,\n\nI\\\u0027m having plenty of fun thanks to your mod \u002B zoxygene filter (it\\\u0027s even more realistic to use a filter instead of solar power -\u003E zo2) and ion engines for munar transfers.\n\nMy problem is that the only solar panel that you have included (as far as i can see) it\\\u0027s not deployable and it gives me a lot of troubles ^^ any chance you could make a deployable version? maybe one of those nice 3 parts panel that become very small when packed.\n\nthanks"},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-13T15:55:10Z","Content":"Yes, I want to make a panel like this, but I don\\\u0027t even know if the KRMuMechSolarPanel type allows this, I just added it because people wanted it. I wonder if the Kosmos pack includes unfolding solar panels, I\\\u0027m sure that whould help me a lot...\n\nEdit: Yes, it does. Gonna try them using my plugin. Rest in peace acceptable load time, I\\\u0027ll miss you :\\\u0027("},{"CreatedByName":"CleverWalrus","CreatedById":11812,"CreatedDateTime":"2012-05-13T16:32:11Z","Content":"\u003E \n\u003E Yes, I want to make a panel like this, but I don\\\u0027t even know if the KRMuMechSolarPanel type allows this, I just added it because people wanted it. I wonder if the Kosmos pack includes unfolding solar panels, I\\\u0027m sure that whould help me a lot...\n\u003E \n\u003E Edit: Yes, it does. Gonna try them using my plugin. Rest in peace acceptable load time, I\\\u0027ll miss you :\\\u0027(\n\nIndustrial flames one have an amazing 3 part flex solar panel, it fit about everywhere and has a cool look, usually i use a shuttle and i fit the panels inside the payload bay, the insustrial flames one fit very nice occupying few space and you can fold and unfold them pressing V, when folded i think they don\\\u0027t have drag or at least inside the payload bay they don\\\u0027t blow up ^^"},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-13T16:41:02Z","Content":"I\\\u0027ll have a look at them later. Just tried to use Kosmos panels, but since yesterday my game crashes almost everytime I hit launch. Renamed my saves/default folder to saves/stupid to break persistence, hope it helps.\n\nEdit: What do you think of a space station module type that continuosly drains energy and ZO2? And if you want it, how should it behave exactly?\n\nEdit2: Do you mean the Ultraflex Solar Array? It\\\u0027s module is strut, so how should it be able to unfold?\n\nAnyway, change module = strut to module = SolarPanel, scroll to the end of the config file, add EnergyGain = and a number you want to get every second in energy units (see other parts for balancing)."},{"CreatedByName":"CleverWalrus","CreatedById":11812,"CreatedDateTime":"2012-05-13T18:09:37Z","Content":"\u003E \n\u003E I\\\u0027ll have a look at them later. Just tried to use Kosmos panels, but since yesterday my game crashes almost everytime I hit launch. Renamed my saves/default folder to saves/stupid to break persistence, hope it helps.\n\u003E \n\u003E Edit: What do you think of a space station module type that continuosly drains energy and ZO2? And if you want it, how should it behave exactly?\n\u003E \n\u003E Edit2: Do you mean the Ultraflex Solar Array? It\\\u0027s module is strut, so how should it be able to unfold?\n\u003E \n\u003E Anyway, change module = strut to module = SolarPanel, scroll to the end of the config file, add EnergyGain = and a number you want to get every second in energy units (see other parts for balancing).\n\n- Regarding station part sincerely i\\\u0027m not very much into stations, since you can\\\u0027t add pieces to them or dock/transfer fuel or crew well, i find it a bit pointless and limited, anyway, one thing that is not covered is \u0027cooling\u0027 of the station:\n\nZoxygen Core use up Zo2 or the crew dies\n\nFilters create Zo2 consuming energy and generate heat\n\nRadiator consume energy and lower the temperature of parts (very big structures require multiple radiators)\n\nSolar panel create Energy but the more they produce the more heat they generate\n\nThis would require some balancing, and you need to have a good mix up of sub-systems for keeping the crew alive, if the Zo2 end people dies, if the temeprature rise things blow up.\n\nYou may think about fuel cells too, one is the \u0027cell\u0027 with a higher energey density per mass then batteries, when it works like filters they create energy consuming the fuel\n\nAnother thing is Radioisotope generators, low energy output but very very long lifespan (years) but heavy and maybe they generate heat too.\n\nThis is just a bunch of toughts, nothing specific ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n- Regarding the ultraflex, i don\\\u0027t know how it unfold, but if you press V it does and looks pretty cool, i have tryed to modify the part config as you said (i checked the difference with your solar panel) but the \u0027yellow\u0027 bar with \u0027efficency\u0027 never appairs even if the module is active, folded or unfolded, maybe it\\\u0027s a problem with the plugin i\\\u0027m using i\\\u0027ll try to clean the folder.\n\nScratch that, my bad i confused parts, the one i was talking about is MJPPanel3\\_sml and it\\\u0027s of type PKSMultiJointPart by sarkun, i was confused by the name ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-13T18:22:59Z","Content":"The radiators idea is cool, much packs have them, I\\\u0027m thinking about making the ZO2 filled station parts cook the crew if their temperature is too high, so you could also use radiators for other things like engines (night becomes more and more annoying right?).\n\nHeating the panels up is a good idea too. The PowerTech ZO2 panels become more efficient if nearer to the sun, but they have a limit. I could do that for both heat and energy but only limit energy gain, not heat gain ;P\n\nI\\\u0027m going to add fuel consuming devices, I need them for the reactor, and they whould allow a lot of new things, but they need the .15 individual part control, otherwise I pwn your keyboard.\n\nRadioisotope generators are a good idea too, you can use the reactor for now, it never runs out of fuel ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif) (I don\\\u0027t know what hapens if it krakens away 2.5 km, though)\n\nwhat did the module param say before you changed it?"},{"CreatedByName":"CleverWalrus","CreatedById":11812,"CreatedDateTime":"2012-05-13T18:25:09Z","Content":"\u003E \n\u003E The radiators idea is cool, much packs have them, I\\\u0027m thinking about making the ZO2 filled station parts cook the crew if their temperature is too high, so you could also use radiators for other things like engines (night becomes more and more annoying right?).\n\u003E \n\u003E Heating the panels up is a good idea too. The PowerTech ZO2 panels become more efficient if nearer to the sun, but they have a limit. I could do that for both heat and energy but only limit energy gain, not heat gain ;P\n\u003E \n\u003E I\\\u0027m going to add fuel consuming devices, I need them for the reactor, and they whould allow a lot of new things, but they need the .15 individual part control, otherwise I pwn your keyboard.\n\u003E \n\u003E Radioisotope generators are a good idea too, you can use the reactor for now, it never runs out of fuel ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif) (I don\\\u0027t know what hapens if it krakens away 2.5 km, though)\n\u003E \n\u003E what did the module param say before you changed it?\n\nAs i said in last post edit (too late) i messed up with names, the solar panel i was talking about is MJPPanel3\\_sml and it\\\u0027s of type PKSMultiJointPart by sarkun, i was confused by the name, but i don\\\u0027t think i can change it to SolarPanel or the multi join would not work right?\n\nWith the radiators the energy cycle would be:\n\n- Day\n\nSolar Panel recharge battieries (a good idea could be that batteries gain heat when recharging like real ones) \u002B Create heat\n\nRadiators consume energy \u002B reduce a little heat\n\nFilters produce zo2 \u002B create heat\n\n- Night\n\nRadiators consume batteries \u002B reduce a LOT of heat\n\nFilters produce zo2 \u002B create heat\n\nThis would require a balance between day and night, during day you stockpile energy and you build up heat, during night you consume energy and lower the heat.\n\nIn this way both \u0027night and day\u0027 are useful and the night is not \u0027always\u0027 bad since you need it for cooling."},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-13T18:26:56Z","Content":"No, it won\\\u0027t. Gonna ask sarkun if I can use it, I love these panels too. Forum ads are 90% about solar panels now ;P\n\nEdit: Could also do it the easy way but my plugin whould require MJP to work then, however, that whould not be a problem, as I can include it to my pack."},{"CreatedByName":"CleverWalrus","CreatedById":11812,"CreatedDateTime":"2012-05-13T18:32:35Z","Content":"\u003E \n\u003E No, it won\\\u0027t. Gonna ask sarkun if I can use it, I love these panels too. Forum ads are 90% about solar panels now ;P\n\u003E \n\u003E Edit: Could also do it the easy way but my plugin whould require MJP to work then, however, that whould not be a problem, as I can include it to my pack.\n\nAdded a few ideas on the previous post, as always too late you already answered ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nEdit: yea! include it, Multipart joint is amazing, you can do a lot of things i think like folding radiators that you open during night for heat sinking and close during day for not \u0027catching\u0027 too much heat or similar things.\n\nEdit2: my \u0027test\u0027 craft is ready for the prototype, i always use this shuttle for testing stuff since i fill the cargobay with all the \u0027cool\u0027 modules, on a side note it can bring about 10 tonns to 150km orbit in a single stage ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-13T18:37:05Z","Content":"That sounds interesting and whould make this plugin less simple. Do you mean radiator panels or radiators consuming energy?\n\nI could do them both but I\\\u0027m already at the point where I have to learn blender or ask anyone if I can steal his parts...\n\nSo if you read this, and you made parts that could be useful for this, please give me permission to use them!"},{"CreatedByName":"CleverWalrus","CreatedById":11812,"CreatedDateTime":"2012-05-13T18:41:12Z","Content":"\u003E \n\u003E That sounds interesting and whould make this plugin less simple. Do you mean radiator panels or radiators consuming energy?\n\u003E \n\u003E I could do them both but I\\\u0027m already at the point where I have to learn blender or ask anyone if I can steal his parts...\n\u003E \n\u003E So if you read this, and you made parts that could be useful for this, please give me permission to use them!\n\nYou could make 2 versions of the radiators:\n\n- Passive ones (need folding) that when open during night reduce heat, but during day if you leave them open it increase heat.\n\n- Active ones that works at any time but consume energy (a lot) for reducing heat\n\nSo if you have a big space station you could produce a lot of energy, so you have a lot of heat and during day you keep it \u0027in control\u0027 using active radiators, during night you unfold the passive radiators and drop all the heat left for the next day cycle.\n\nAt the same time everything mix up with Zoxygen so that you must manage it too."},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-13T18:51:21Z","Content":"That sounds good so far. I can\\\u0027t start coding now, so anyone, continue suggesting for at least 24 hours.\n\n\u003E \n\u003E Edit: What do you think of a space station module type that continuosly drains energy and ZO2? And if you want it, how should it behave exactly?\n\nTwo sentences completely repurposed my plugin, lol ;D"},{"CreatedByName":"CleverWalrus","CreatedById":11812,"CreatedDateTime":"2012-05-13T19:06:48Z","Content":"\u003E \n\u003E That sounds good so far. I can\\\u0027t start coding now, so anyone, continue suggesting for at least 24 hours.\n\u003E \n\u003E Two sentences completely repurposed my plugin, lol ;D\n\nNice 2 know ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nA question, there is a way i can modify the \u0027dsm\\_solarpanel\u0027 that was included in the deep space package for not \u0027sticking out\u0027 but \u0027laying\u0027 on the part i place it on? in this way i could place a pair of those on the side of the shuttle without making it stupid with solar panel that sticks out everywhere when launching."},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-13T19:17:21Z","Content":"I can ask for that, but it might break crafts. You could also modify a Kosmos panel, they are very small if unfolded. Just do it in the same way I wrote above, but use KRMuMechSolarPanel as module to not break the unfolding possibility (don\\\u0027t do this with any other unfolding panel than the Kosmos ones, they will break into millions of sharp fragments!)"},{"CreatedByName":"CleverWalrus","CreatedById":11812,"CreatedDateTime":"2012-05-13T20:58:09Z","Content":"\u003E \n\u003E I can ask for that, but it might break crafts. You could also modify a Kosmos panel, they are very small if unfolded. Just do it in the same way I wrote above, but use KRMuMechSolarPanel as module to not break the unfolding possibility (don\\\u0027t do this with any other unfolding panel than the Kosmos ones, they will break into millions of sharp fragments!)\n\nFianlly! it worked with the TKS Solar Panel, i lost a bit of cargo-bay but it\\\u0027s fine, now i can manage my Zox using batteries as i wanted, thanks!\n\nAttached Screen, i modified a C7 RCS block with the stats of the \u0027main\u0027 Zoxigen core module, at least it fits a bit better."},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-05-15T05:36:15Z","Content":"Looks nice. I\\\u0027m going to complete the new concept and post it here, but not now. This can take some hours or days \\\u0027cause po schoolwork."},{"CreatedByName":"bonbon1477","CreatedById":24796,"CreatedDateTime":"2012-05-16T07:22:41Z","Content":"noob question. what does Filter ZO2 with Airfilters do? i activate them but nothings happen."}]}