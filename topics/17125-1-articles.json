{"TopicId":17125,"ForumId":16,"TopicTitle":"What\u0026#039;s the best way to calculate the gravity turn on an atmospheric ascent?","CreatedByName":"DrunkDave89","CreatedById":40572,"CreatedDateTime":"2012-08-17T05:44:07Z","PageNum":1,"Articles":[{"CreatedByName":"DrunkDave89","CreatedById":40572,"CreatedDateTime":"2012-08-17T05:44:07Z","Content":"\n\u003Cp\u003EI\u0027ve been messing about with mechjeb lately, and I\u0027ve found that I can get my (rather heavy) craft into a 150km orbit with a gravity turn starting at 40km and ending at 80. Those are just semi-random values I plugged in and have had some luck with. However, I have a feeling this is because I gave myself a massive safety margin with fuel, and it\u0027s likely not the most efficient method. I\u0027ve been using a slightly modified DualEva craft that I found on the forum, I\u0027ve added more fuel for all stages, and a few long burn SRBs (from the KW pack) to the first stage. Takeoff weight is 495t. \u003C/p\u003E\u003Cp\u003EI am assuming (coming from a background with very little in the way of physics or mathematics) that the optimal start/end height, as well as the shape of the turn, is dependent on a variety of factors (TWR, aerodynamics, acceleration, etc.) What formula/rule of thumb could I use to determine a more efficient gravity turn? If you need, I can try and provide you some more data about the craft in question, or I can try it on the unmodified DualEva craft, the .craft file for which is located on this forum (it also requires less addons, I believe). The entire reason I modified the craft in the first place is that I had insufficient fuel to execute a Trans-Munar Injection once I\u0027d achieved my orbit, which led me to believe that my takeoff was inefficient.\u003C/p\u003E\u003Cp\u003EHere are a couple of preconceptions that I have, please correct me if I am wrong:\u003C/p\u003E\u003Cp\u003E-Higher TWR=greater acceleration.\u003C/p\u003E\u003Cp\u003E-Lower acceleration demands a more vertical flight path (higher start for gravity burn) to minimize the amount of time spent in atmosphere.\u003C/p\u003E\u003Cp\u003E-My current end-height for the gravity turn (80km) is not a terrible idea, as it is out of the atmosphere, and makes the trip to the apoapsis easier and drag-free. \u003C/p\u003E\u003Cp\u003E-A steeper angle of ascent is better than a shallow one, especially for heavier craft/lower TWR.\u003C/p\u003E\u003Cp\u003E-The highest TWR should be at launch, the further you are from the surface, the lower the effect of gravity/atmospheric resistance. \u003C/p\u003E\u003Cp\u003EIdeally, I\u0027d like to have a good number to plug into the ascent autopilot, as well as a usable formula to apply to future craft. This is the most stable design that I use right now (most of my other designs utilize a lot of fairings, and the later stages within them tend to torque a bit, vastly reducing efficiency, but they look way too cool to not build.) My later designs will hopefully be more stable. \u003C/p\u003E\u003Cp\u003EThanks in advance for your answers. I\u0027ve found that this is one of the friendliest and most helpful game communities I\u0027ve come across in many years.\u003C/p\u003E\n"},{"CreatedByName":"semininja","CreatedById":3837,"CreatedDateTime":"2012-08-17T06:24:16Z","Content":"\n\u003Cp\u003EWhat I\u0027ve found is that because of the quick falloff of atmospheric density, you can actually pitch over quite quickly and have a more efficient ascent, depending on your rocket; I typically start my turns at 5k, for example, and end the turn at 70k and 5 degrees above horizontal, which is typically much more efficient if you\u0027re going into an orbit above 150k. You can use the ascent stats to refine your profile; just start with the slider in the middle and run it toward one end a bit each time you launch; see what differences it makes.\u003C/p\u003E\n"},{"CreatedByName":"Vanamonde","CreatedById":27914,"CreatedDateTime":"2012-08-17T06:26:17Z","Content":"\n\u003Cp\u003EIf I could piggyback on this gentleman\u0027s post, what are good ascent speeds and accelerations? Too slow and you\u0027re close to hovering and wasting fuel, but too fast and you\u0027re still wasting fuel but this time fighting air resistence. What\u0027s the happy medium? I\u0027ve always gotten to orbit and moons well enough by lifting off at 1-2G on the ship\u0027s meter, but then I hear people talking about 6Gs and such, and I wonder if I\u0027m doing it wastefully.\u003C/p\u003E\n"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-08-17T06:28:00Z","Content":"\n\u003Cp\u003EThe final answer is heavy in maths and the final solution is dependant on your craft (more correctly, the speed of your craft). It\u0027s an important question but I haven\u0027t dived into the maths yet.\u003C/p\u003E\n"},{"CreatedByName":"Kosmo-not","CreatedById":14082,"CreatedDateTime":"2012-08-17T06:49:24Z","Content":"\n\u003Cp\u003EI think numerical methods and a program to iterate through it is your best bet.\u003C/p\u003E\n"},{"CreatedByName":"Major-Major","CreatedById":38532,"CreatedDateTime":"2012-08-17T15:48:22Z","Content":"\n\u003Cp\u003EThis is a real can of worms. It\u0027s a system of 2 coupled differential equations, which are only numerically solvable. There\u0027s no way to find a reusable algorithm to solve for the ideal angle, each solution is going to be specific to a particular rocket.\u003C/p\u003E\u003Cp\u003EWikipedia has the two basic equations of motions listed on its \u003Ca href=\u0022https://en.wikipedia.org/wiki/Gravity_turn\u0022 rel=\u0022external nofollow\u0022\u003EGravity Turn\u003C/a\u003E page. (I\u0027m new here, what\u0027s the best way to write/post equations?) There\u0027s also a useful paper, \u0022Universal Gravity Turn Trajectories,\u0022 from 1957, that describes in detail how to do this, but...it\u0027s confusing. I think I\u0027d be able to crack through the math, but that would be a project for next week.\u003C/p\u003E\u003Cp\u003EOne other thing: T:W ratio is actually \u003Cem\u003Elowest\u003C/em\u003E at launch. Both the mass of the rocket (due to losing fuel) and the gravitational acceleration drop off as altitude increases, losing to a drastic reduction in weight--thrust remains constant. It would probably be most efficient to pull back on the throttle as altitude increases, but since the fuel flow is currently bugged, this is \u0027cheating.\u0027 Anyway, the non-constant T:W ratio is the primary difficulty in solving the equations above.\u003C/p\u003E\n"},{"CreatedByName":"Vanamonde","CreatedById":27914,"CreatedDateTime":"2012-08-17T17:01:20Z","Content":"\n\u003Cp\u003EThat\u0027s a nicely written article. It seems what we\u0027re doing in the game are not true \u003Cem\u003Egravity \u003C/em\u003Eturns because the operator is changing attitude? I wonder if that could be done in the game? Leave SAS off and let the vehicle\u0027s balance do the steering? It would be quite a trick. It\u0027s also to this simulation\u0027s credit that I understand what the article is talking about from playing KSP.\u003C/p\u003E\n"},{"CreatedByName":"A Fat Pokemon","CreatedById":29245,"CreatedDateTime":"2012-08-18T03:41:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vanamonde\u0022 data-cite=\u0022Vanamonde\u0022\u003E\u003Cdiv\u003EIf I could piggyback on this gentleman\u0027s post, what are good ascent speeds and accelerations? Too slow and you\u0027re close to hovering and wasting fuel, but too fast and you\u0027re still wasting fuel but this time fighting air resistence. What\u0027s the happy medium? I\u0027ve always gotten to orbit and moons well enough by lifting off at 1-2G on the ship\u0027s meter, but then I hear people talking about 6Gs and such, and I wonder if I\u0027m doing it wastefully.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn an earlier post I had read, somebody had said that lifting off at 1.5 - 2.5 G\u0027s is good, higher than 2.5 and you\u0027ll reach the terminal velocity eventually.\u003C/p\u003E\n"},{"CreatedByName":"Major-Major","CreatedById":38532,"CreatedDateTime":"2012-08-18T04:53:25Z","Content":"\n\u003Cp\u003EDoes anyone know how exactly the simulation calculates drag? Calculating the optimal trajectory is a balance between the gravity turn--which should be initiated as early as possible--and the need to minimize atmospheric drag. So to do it mathematically (which I have still made 0 progress on) I need to get some idea of the drag forces in play.\u003C/p\u003E\u003Cp\u003EThe paper I mentioned earlier was a dead end, but I found something a little more promising on \u003Ca href=\u0022http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-512-rocket-propulsion-fall-2005/lecture-notes/lecture_32.pdf\u0022 rel=\u0022external nofollow\u0022\u003EMIT Open Courseware\u003C/a\u003E. He covers the idealized case of a constant T:W ratio, which still turns out to be tremendously complicated. I guess they don\u0027t call it rocket science for nothing...\u003C/p\u003E\n"},{"CreatedByName":"Clouds","CreatedById":32610,"CreatedDateTime":"2012-08-18T05:04:02Z","Content":"\n\u003Cp\u003EPerhaps it is ship-dependent, but it just so happened with my test vessel that MechJeb\u0027s default settings (10km start, 70km end, 35-40% on the curve slider) wound up being most efficient. It\u0027s also wound up being most efficient for me to tell it to get in the biggest orbit possible and then just wait it out for the proper orbital injection point (eg. to go to the Mun, I do a 10km-70km default gravity turn targeting ~10Mm orbit).\u003C/p\u003E\n"},{"CreatedByName":"Ydoow","CreatedById":10165,"CreatedDateTime":"2012-08-18T05:06:26Z","Content":"\n\u003Cp\u003ECalculations are all about. However, the current ones are wrong and will be changed shortly.\u003C/p\u003E\n"},{"CreatedByName":"dronkit","CreatedById":67237,"CreatedDateTime":"2013-06-07T03:11:43Z","Content":"\n\u003Cp\u003Eanyone knows the formula by which KSP calculates drag? I heard it\u0027s the sum of the drag of individual parts, proportional to mass, to drag coefficient, atmosphere density which depends on h... and...? If anyone has the accurate formula I would make a calculator. I just was looking for a project for a fortran course i\u0027m on \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E maybe no the most web-friendly language but indeed the most scientific one.\u003C/p\u003E\u003Cp\u003EOf course kerbins prefer the k\u002B\u002B language or kavascript.\u003C/p\u003E\u003Cp\u003E***I mean an ascent delta-v calculator and possibly optimal trajectory finder.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-06-07T06:55:01Z\u0022 title=\u002206/07/2013 06:55  AM\u0022 data-short=\u002211 yr\u0022\u003EJune 7, 2013\u003C/time\u003E by dronkit\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-06-07T03:29:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022semininja\u0022 data-cite=\u0022semininja\u0022\u003E\u003Cdiv\u003EWhat I\u0027ve found is that because of the quick falloff of atmospheric density, you can actually pitch over quite quickly and have a more efficient ascent, depending on your rocket; I typically start my turns at 5k, for example, and end the turn at 70k and 5 degrees above horizontal, which is typically much more efficient if you\u0027re going into an orbit above 150k. You can use the ascent stats to refine your profile; just start with the slider in the middle and run it toward one end a bit each time you launch; see what differences it makes.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYep, in my experience, this is on the money.\u003C/p\u003E\u003Cp\u003ESmall and light rockets: Up to 100Km. Start 5-8Km-End 60-65Km. Profile 34% [bONUS] If you airhog the crap out of space planes, you can run this profile off the strip after a nose up 60. Start at 3k and all you have to mind is the engine turn over.\u003C/p\u003E\u003Cp\u003EWide fat rockets: Up 100Km. Start 8-10Km-End 70-80Km. Profile 34% is still pretty close to accurate.\u003C/p\u003E\u003Cp\u003EObviously this isn\u0027t exact science on my part. It just what I have found works for typical ascent TWR of around 2.0.\u003C/p\u003E\n"},{"CreatedByName":"triffid_hunter","CreatedById":61814,"CreatedDateTime":"2013-06-07T05:20:53Z","Content":"\n\u003Cp\u003EI start at 5km, end at 70km 0 degrees and use a 38% profile. You want a TWR of 1.8-2.2 on the launchpad for best results.\u003C/p\u003E\u003Cp\u003EUse mechjeb\u0027s options to limit to terminal velocity and limit acceleration. I cap my accel at about 40m/s^2\u003C/p\u003E\u003Cp\u003EAsparagus is your friend\u003C/p\u003E\n"},{"CreatedByName":"dronkit","CreatedById":67237,"CreatedDateTime":"2013-06-07T06:59:12Z","Content":"\n\u003Cp\u003EIDK if this is the case: I ran extensive (?) test with mechjeb in my hybrid SSTO which is strange, takes off vertically with jets, levels, gains speed and lifts out of the atmosphere, then circularizes, etc. The thing I found is that ascending straight up reduced my drag losses BIG TIME, like it saved 1000 m/s or so. The best was like, straight up til 15k, quick curve to 5\u00C3\u201A\u00C2\u00BA to gain horizontal speed until the jets give up, switch to rockets, raise apoapsis out of the atmosphere.\u003C/p\u003E\n"},{"CreatedByName":"Payload","CreatedById":4540,"CreatedDateTime":"2013-06-07T18:14:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dronkit\u0022 data-cite=\u0022dronkit\u0022\u003E\u003Cdiv\u003EIDK if this is the case: I ran extensive (?) test with mechjeb in my hybrid SSTO which is strange, takes off vertically with jets, levels, gains speed and lifts out of the atmosphere, then circularizes, etc. The thing I found is that ascending straight up reduced my drag losses BIG TIME, like it saved 1000 m/s or so. The best was like, straight up til 15k, quick curve to 5\u00C3\u201A\u00C2\u00BA to gain horizontal speed until the jets give up, switch to rockets, raise apoapsis out of the atmosphere.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you limiting to terminal velocity? Sounds like you are trying to punch a hole in dense air.\u003C/p\u003E\n"},{"CreatedByName":"dronkit","CreatedById":67237,"CreatedDateTime":"2013-06-07T19:36:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Payload\u0022 data-cite=\u0022Payload\u0022\u003E\u003Cdiv\u003EAre you limiting to terminal velocity? Sounds like you are trying to punch a hole in dense air.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe vertical ascent was with auto-throttle, so i guess the answer is yes, mechjeb equals drag losses to gravity losses which is optimum in vertical ascent, and in my case throttles down a bit.\u003C/p\u003E\u003Cp\u003EI suppose the results I had (vertical until 15k saves delta V) have to do with getting rid of the thicker atmosphere, yes. Maybe for a thin rocket that\u0027s different since my ship has wings and lots of things... oh wait, KSP\u0027s drag model doesn\u0027t account for overall slim shape. One point for using this approach on rockets. In the other hand, I turn sharply to almost horizontal to gain speed and in that part I rely on lift, which is free. So one point against using that approach on reockets, Rockets would have more gravity losses than a winged ship. It\u0027s a tie I guess (?)\u003C/p\u003E\u003Cp\u003EGuys get me the drag formula and i\u0027ll give you the calculator and the ultimate answer. (obviously 42)\u003C/p\u003E\n"},{"CreatedByName":"The Lone Wolfling","CreatedById":13675,"CreatedDateTime":"2013-06-07T23:41:06Z","Content":"\n\u003Cp\u003ERemember, drag in KSP is unrealistic. It has a mass component, whereas real drag doesn\u0027t.\u003C/p\u003E\n"},{"CreatedByName":"Tank Buddy","CreatedById":69635,"CreatedDateTime":"2013-06-12T01:15:33Z","Content":"\n\u003Cp\u003EI don\u0027t know how to calculate the most efficient way, but I belive there is a specific ratio between ap\u003C/p\u003E\n"},{"CreatedByName":"Tank Buddy","CreatedById":69635,"CreatedDateTime":"2013-06-12T01:19:39Z","Content":"\n\u003Cp\u003EI don\u0027t know how to calculate the most efficient way, but I belive there is a specific ratio between the current apoapsis, current altitude, and/or veloctiy. I\u0027m sure you have noticed craft with a lower T/W ratio accelerate slower, so they need to make their gravity turn later and more gradualy so they still increace the apoapsis. So it varies craft to craft. You or I could probobly do some google/wiki research to figure it out, I\u0027ll get back to you.\u003C/p\u003E\n"},{"CreatedByName":"MR4Y","CreatedById":66897,"CreatedDateTime":"2013-06-12T02:05:06Z","Content":"\n\u003Cp\u003EI do this for every rocket independed of weight:\u003C/p\u003E\u003Cp\u003E-Throttle up and keep your rocket close to escape velocity (150 m/s)\u003C/p\u003E\u003Cp\u003E-At 5 Km turn 22.5 degrees.\u003C/p\u003E\u003Cp\u003E-At 10Km turn the remaining 22.5 degrees then throttle up.\u003C/p\u003E\u003Cp\u003E-Once you leave Kerbin\u0027s atmosphere, turn and face prograde.\u003C/p\u003E\n"},{"CreatedByName":"maackey","CreatedById":39248,"CreatedDateTime":"2013-06-12T02:48:04Z","Content":"\n\u003Cp\u003EThere is no one right gravity turn. Each rocket has unique properties which change optimal ascent, and KSP\u0027s physics vary significantly from reality: drag is applied to all parts individually -- nosecones do nothing but increase drag and add weight, and fat, wide rockets have no drawbacks. I\u0027ve also noticed my prograde marker jumping when reaching successive layers of the atmosphere, there is no continuous integration you can use for the ascent profile. \u003C/p\u003E\u003Cp\u003EThe heuristic I use is to start a gradual, constant curve towards the horizon, which starts a few kilometers up, (mechjeb ascent profile: start at 2-5km, with 70%\u002B curve at least) max throttle until you hit \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Kerbin#Atmosphere\u0022 rel=\u0022external nofollow\u0022\u003Eterminal velocity\u003C/a\u003E, at which point you want to control throttle to match the terminal velocity at your altitude.\u003C/p\u003E\n"},{"CreatedByName":"PlonioFludrasco","CreatedById":98915,"CreatedDateTime":"2014-01-18T11:15:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022maackey\u0022 data-cite=\u0022maackey\u0022\u003E\u003Cdiv\u003E I\u0027ve also noticed my prograde marker jumping when reaching successive layers of the atmosphere, there is no continuous integration you can use for the ascent profile. \u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s because it shifts automatically from the surface reference to the orbital reference, adding a vector facing east and 0 deg elevation that is Kerbin\u0027s rotational velocity at the equator, causing the \u0022jump\u0022\u003C/p\u003E\n"}]}