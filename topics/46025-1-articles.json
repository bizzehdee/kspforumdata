{"TopicId":46025,"ForumId":20,"TopicTitle":"kOS script Megathread!","CreatedByName":"KvickFlygarn87","CreatedById":76314,"CreatedDateTime":"2013-09-15T14:18:21Z","PageNum":1,"Articles":[{"CreatedByName":"KvickFlygarn87","CreatedById":76314,"CreatedDateTime":"2013-09-15T14:18:21Z","Content":"\n\u003Cp\u003EPost all your scripts here!\u003C/p\u003E\n"},{"CreatedByName":"SolarLiner","CreatedById":41047,"CreatedDateTime":"2013-09-15T17:28:03Z","Content":"\n\u003Cp\u003ESory, but this thread already exists: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/48428-Space-Computer-Brought-to-you-by-kOS-and-hopefully-many-nerds\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/showthread.php/48428-Space-Computer-Brought-to-you-by-kOS-and-hopefully-many-nerds\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2013-09-15T23:18:55Z","Content":"\n\u003Cp\u003ETo be fair the space computer thread has a specific goal in mind. There\u0027s no good reason why there shouldn\u0027t be a separate thread for snippets and general tips and discussions and stuff and junk.\u003C/p\u003E\n"},{"CreatedByName":"SolarLiner","CreatedById":41047,"CreatedDateTime":"2013-09-16T16:52:28Z","Content":"\n\u003Cp\u003EOh, didn\u0027t see the thread that way. Then yes, what not \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"KvickFlygarn87","CreatedById":76314,"CreatedDateTime":"2013-09-17T19:48:21Z","Content":"\n\u003Cp\u003EAnyone got any good ones? I\u0027d be impressed by a docking script!\u003C/p\u003E\n"},{"CreatedByName":"check","CreatedById":71875,"CreatedDateTime":"2013-09-17T20:45:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KvickFlygarn87\u0022 data-cite=\u0022KvickFlygarn87\u0022\u003E\u003Cdiv\u003EAnyone got any good ones? I\u0027d be impressed by a docking script!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy Curiosity Rover \u002B Skycrane Entry, Descent, Landing...\u003C/p\u003E\u003Cp\u003EThis was made using 0.5. I haven\u0027t updated it to take advantage of some of the new functions in 0.61 yet.\u003C/p\u003E\u003Cp\u003EVideo of the sequence in action:\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/noT7tllBSnE?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003ECode:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003Eclearscreen.\u003Cbr\u003ESet ln to 0.\u003Cbr\u003ESet lt to 0.\u003Cbr\u003Eset flag1 to 0.\u003Cbr\u003Eset t to 1.\u003Cbr\u003EPrint \u0022EXECUTING PROGRAM...\u0022.\u003Cbr\u003EPrint \u0022Rover Landing by check.\u0022.\u003Cbr\u003EPrint \u0022\u0022.\u003Cbr\u003E\u003Cbr\u003E//Launch program\u003Cbr\u003E\u003Cbr\u003Elock steering to up \u002B R(0,0,180).\u003Cbr\u003Elock throttle to 1.\u003Cbr\u003EPrint missiontime \u002B \u0022 Launching...\u0022.\u003Cbr\u003EStage.\u003Cbr\u003E\u003Cbr\u003E// Rolls rocket 90 degrees... for fun. Useful in some situations\u003Cbr\u003E\u003Cbr\u003EWait until alt:radar \u0026gt; 200.\u003Cbr\u003ELock steering to up \u002B R(0,0,270).\u003Cbr\u003EPrint missiontime \u002B \u0022 ROLL Prog.\u0022.\u003Cbr\u003E\u003Cbr\u003E//While in flight, auto throttles based on current velocity vs ideal velocity. If current vertical speed\u003Cbr\u003E// \u0026gt; ideal velocity, throttle down, else throttle up.\u003Cbr\u003E// When boosters are drained, ditched them.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EUntil altitude \u0026gt; 8000 {\u003Cbr\u003Eif verticalspeed \u0026gt; 102.9 * (1.0001005^altitude) {\u003Cbr\u003Eset t to t - 0.05.}.\u003Cbr\u003Eif verticalspeed \u0026lt; 102.9 * (1.0001005^altitude) {\u003Cbr\u003Eset t to t \u002B 0.05.}.\u003Cbr\u003E\u003Cbr\u003E//So when the rocket has \u0026lt; 450 fuel, it means the boosters are dry, so stage. BUT you only want to stage once,\u003Cbr\u003E// so that\u0027s where the flag comes in. after you staged once, change the flag value so you don\u0027t stage again.\u003Cbr\u003E\u003Cbr\u003EIf stage:liquidfuel \u0026lt; 450 AND flag1 = 0 {\u003Cbr\u003Estage.\u003Cbr\u003Eset t to 1.\u003Cbr\u003Eset flag1 to 1.\u003Cbr\u003EPrint missiontime \u002B \u0022 Booster Separation.\u0022.\u003Cbr\u003E}.\u003Cbr\u003EIf t \u0026lt; 0 {set t to 0.}.\u003Cbr\u003EIf t \u0026gt; 1 {set t to 1.}.\u003Cbr\u003ELock throttle to t.\u003Cbr\u003E}.\u003Cbr\u003ELock throttle to 1.\u003Cbr\u003E\u003Cbr\u003E// Gravity turn\u003Cbr\u003E\u003Cbr\u003ELock steering to up \u002B R(-45,1,180).\u003Cbr\u003EPrint missiontime \u002B \u0022 Gravity turn.\u0022.\u003Cbr\u003EWait until stage:liquidfuel = 0.\u003Cbr\u003EStage.\u003Cbr\u003ELock throttle to 0.\u003Cbr\u003E// Ditch the booster when it\u0027s dry.\u003Cbr\u003E\u003Cbr\u003EPrint missiontime \u002B \u0022 Stage 1 Sep.\u0022.\u003Cbr\u003E\u003Cbr\u003E// Coast past apoapsis and reorient retrograde the craft when it\u0027s below 7500 m.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EWait until verticalspeed \u0026lt; 0 AND altitude \u0026lt; 75000.\u003Cbr\u003ELock steering to retrograde \u002BR(0,0,180).\u003Cbr\u003E\u003Cbr\u003E// deploy the chute at 8000m and unlock the steering\u003Cbr\u003E\u003Cbr\u003EWait until altitude \u0026lt;8000.\u003Cbr\u003EStage.\u003Cbr\u003EPrint missiontime\u002B \u0022 Drogue Deployed\u0022.\u003Cbr\u003EUnlock steering.\u003Cbr\u003E\u003Cbr\u003E// jettison the heatsheild at 2200m\u003Cbr\u003EWait until alt:radar \u0026lt; 2200 and alt:radar \u0026gt; -1.\u003Cbr\u003EStage.\u003Cbr\u003EPrint missiontime \u002B \u0022 HEATSHEILD Sep.\u0022.\u003Cbr\u003EWait until alt:radar \u0026lt; 1000.\u003Cbr\u003Estage.\u003Cbr\u003E// detach from chute/backshell at 1000m\u003Cbr\u003E\u003Cbr\u003EPrint missiontime \u002B \u0022 BACKSHELL Sep.\u0022.\u003Cbr\u003EWait 1.\u003Cbr\u003E// deviate by 10 degrees (yaw / roll?) \u002B 45 degrees pitch and fire engines. Numbers kind of arbitrary. mostly wanted\u003Cbr\u003E// to test the horizontal velocity killing technique.\u003Cbr\u003E// This is to move away from the parachute/backshell and not have it land on us later.\u003Cbr\u003E\u003Cbr\u003ELock steering to up \u002B R(10,45,180).\u003Cbr\u003EWait 1.\u003Cbr\u003ELock throttle to 0.3.\u003Cbr\u003EStage.\u003Cbr\u003EPrint missiontime \u002B \u0022 Deviation mnvr.\u0022.\u003Cbr\u003Ewait 2.\u003Cbr\u003E\u003Cbr\u003E// Measures horizontal \u0027velocity\u0027 direction (not magnitude) and pitches/rolls the craft to compensate.\u003Cbr\u003E// If longitude/latitude is increasing/decreasing, roll to fire engine in the opposite direction.\u003Cbr\u003E// orient UP when surface velocity is \u0026lt; 1m/s. \u003Cbr\u003E\u003Cbr\u003EUntil surfacespeed \u0026lt; 1 OR alt:radar \u0026lt; 510{\u003Cbr\u003E\u003Cbr\u003ESet long1 to longitude.\u003Cbr\u003ESet long2 to longitude.\u003Cbr\u003ESet lat1 to latitude.\u003Cbr\u003ESet lat2 to latitude.\u003Cbr\u003EIf long2 \u0026lt; long1 {set ln to -15.}.\u003Cbr\u003EIf long2 \u0026gt; long1 {set ln to 15.}.\u003Cbr\u003E\u003Cbr\u003EIf lat2 \u0026lt; lat1 {set lt to -15.}.\u003Cbr\u003EIf lat2 \u0026gt; lat1 {set lt to 15.}.\u003Cbr\u003E\u003Cbr\u003Eif abs(lat2-lat1) \u0026lt; 0.000005 {set lt to 0.}.\u003Cbr\u003Eif abs(long2-long1) \u0026lt; 0.000005 {set ln to 0.}.\u003Cbr\u003ELock steering to up \u002B R(lt,ln,180).\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003ESet ln to 0.\u003Cbr\u003ESet lt to 0.\u003Cbr\u003E\u003Cbr\u003ELock throttle to 0.\u003Cbr\u003Elock steering to up \u002B R(0,0,180).\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E// After 500 m, fire the throttle at 1.8 Gs.\u003Cbr\u003EWait until alt:radar \u0026lt; 500.\u003Cbr\u003EPrint missiontime \u002B \u0022 Approach.\u0022. \u003Cbr\u003ELock throttle to (1.8 * 9.81 * mass/maxthrust).\u003Cbr\u003E\u003Cbr\u003E// wait until veritcal speed \u0026gt;-30.... self explainitory.\u003Cbr\u003EWait until verticalspeed \u0026gt;-30.\u003Cbr\u003E\u003Cbr\u003E// Adjust throttle to either 1.7Gs or 1.0 Gs depending on if vertical speed is \u0026lt;-15 m/s or \u0026gt;-10 m/s until 120 m\u003Cbr\u003E\u003Cbr\u003EUntil alt:radar \u0026lt; 120 {\u003Cbr\u003EIf verticalspeed \u0026lt;-15 {Lock throttle to (1.7 * 9.81 * mass/maxthrust).}.\u003Cbr\u003EIf verticalspeed \u0026gt;-10 {Lock throttle to (9.81 * mass/maxthrust).}.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003E// Adjust throttle to either 1.4Gs or 1.1 Gs depending on if vertical speed is \u0026lt;-3 m/s or \u0026gt;-1 m/s until 2.5 m\u003Cbr\u003E// Adjust pitch/roll based on horizontal velocity direction, like in deviation mod but with finer adjustments\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003EPrint missiontime \u002B \u0022 Final approach.\u0022. \u003Cbr\u003EUntil alt:radar \u0026lt; 2.5 {\u003Cbr\u003E\u003Cbr\u003ESet long1 to longitude.\u003Cbr\u003ESet long2 to longitude.\u003Cbr\u003ESet lat1 to latitude.\u003Cbr\u003ESet lat2 to latitude.\u003Cbr\u003EIf long2 \u0026lt; long1 {set ln to -2.}.\u003Cbr\u003EIf long2 \u0026gt; long1 {set ln to 2.}.\u003Cbr\u003E\u003Cbr\u003EIf lat2 \u0026lt; lat1 {set lt to -2.}.\u003Cbr\u003EIf lat2 \u0026gt; lat1 {set lt to 2.}.\u003Cbr\u003E\u003Cbr\u003Eif abs(lat2-lat1) \u0026lt; 0.000005 {set lt to 0.}.\u003Cbr\u003Eif abs(long2-long1) \u0026lt; 0.000005 {set ln to 0.}.\u003Cbr\u003E\u003Cbr\u003ELock steering to up \u002B R(lt,ln,180).\u003Cbr\u003E\u003Cbr\u003EIf verticalspeed \u0026lt;-3 {Lock throttle to (1.4 * 9.81 * mass/maxthrust).}.\u003Cbr\u003EIf verticalspeed \u0026gt;-1 {Lock throttle to (1.1* 9.81 * mass/maxthrust).}.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003E// At 2.5 m, pitch over 5 degrees, lock throttle to 2Gs, put the brakes on the rover wheels, jettison the skycrane.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003ELock steering to up\u002BR(-5,0,180).\u003Cbr\u003E\u003Cbr\u003ELock throttle to (2 * 9.81 * mass/maxthrust).\u003Cbr\u003EBrakes on.\u003Cbr\u003EStage.\u003Cbr\u003ELock throttle to 0.\u003Cbr\u003EUnlock throttle.\u003Cbr\u003EUnlock steering.\u003Cbr\u003EWait 5.\u003Cbr\u003E\u003Cbr\u003E// After 5 seconds, open the com dish and extend the antennae.\u003Cbr\u003E\u003Cbr\u003EToggle AG1.\u003Cbr\u003EPrint missiontime \u002B\u0022 Landed.\u0022.\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-17T20:48:00Z\u0022 title=\u002209/17/2013 08:48  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 17, 2013\u003C/time\u003E by check\u003C/strong\u003E\n\u003C/span\u003E\n"}]}