{"TopicId":102909,"ForumId":29,"TopicTitle":"KSP Plugin debugging and profiling for Visual Studio and Monodevelop on all OS","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-03-29T11:09:00Z","PageNum":8,"Articles":[{"CreatedByName":"CrayzeeMonkey","CreatedById":77712,"CreatedDateTime":"2020-05-21T21:00:06Z","Content":"I\u0027m trying to make a debug installation out of a fresh installation of 1.8.1. I linked KSP\\_x64\\_Data to KSP\\_x64\\_Dbg\\_Data, moved WindowsPlayer.exe from windowsstandalonesupport\\Variations\\win64\\_development\\_mono in my Unity 2019.2.2f1 install. And renamed WindowsPlayer.exe to KSP\\_x64\\_Dbg, and edited player-connection-debug=1 into the boot.config. I\u0027m using Windows 10.\n\nWhen I launch through the debug exe, KSP launches as if it\u0027s through a normal install. The development mode label and console isn\u0027t there, and I can\u0027t attach the Unity instance to Visual Studio. Worst of all, I\u0027m getting no error message telling me what\u0027s wrong, it\u0027s just completely silent. I don\u0027t know what to do anymore.\n\nWhat\u0027s more frustrating is that the same procedure works immaculately for KSP 1.9. Am I using the wrong version of Unity? According to [this](https://forum.kerbalspaceprogram.com/index.php?/topic/102909-ksp-plugin-debugging-and-profiling-for-visual-studio-and-monodevelop-on-all-os/\u0026do=findComment\u0026comment=3720877) and the details tab of the properties of the ksp .exe it should be correct.\n\nI tried the simplified method by @sarbian and it let me attach through Visual Studio at least, but when I use breakpoints I get \u0022The breakpoint will not currently be hit. Unable to find corresponding location.\u0022 Debugging information is set to Portable, if that matters.\n\nI\u0027m going to give up and wallow in my frustration for now\n\nEDIT: Managed to figure it out. I remembered that I also had to copy over UnityPlayer.dll and WinPixEventRuntime.dll, but it didn\u0027t work the first time. After reinstalling KSP to ensure that it was \u0027fresh\u0027, doing the same worked.\n\n**Edited \u003Ctime datetime=\u00222020-05-22T16:15:31Z\u0022 title=\u002205/22/2020 04:15  PM\u0022 data-short=\u00224 yr\u0022\u003EMay 22, 2020\u003C/time\u003E by CrayzeeMonkey**"},{"CreatedByName":"AxleGreaser","CreatedById":204413,"CreatedDateTime":"2020-06-13T09:26:15Z","Content":"Im trying for a 1.9.1 install and following the instructions... My unity engine is reported to be  \n\nIn output\\_log.txt ....  (and its on line one...)\n\nInitialize engine version: 2017.1.3p1 (02d73f71d3bd)\n\nBut engine 2017.1.3p1  doesnt seem to exist anywhere  is eitehr location linked in \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E\n\n[Unity installation](https://unity3d.com/get-unity/download/archive) (or [here](https://unity3d.com/fr/unity/qa/patch-releases)\n\nThere is a P4  ( Patch 2017.1.3p4 ) Sooooo... as p1 is not there.... I am going to hope P4 is just better but equiv version if the P1 that i have?\n\nhelp?   maybe. \n\n(For future reference (other posters) if i dont come back that worked)\n\n=============\n\nwait up.  \n\n\u003Cmisleading derp=\u0022\u0022 ....=\u0022\u0022 elided=\u0022\u0022 here=\u0022\u0022\u003E\n\u003C/misleading\u003E\n\n==============\n\ndouble wait up\n\nNope I derped.\n\n**Edited \u003Ctime datetime=\u00222020-06-13T09:47:38Z\u0022 title=\u002206/13/2020 09:47  AM\u0022 data-short=\u00224 yr\u0022\u003EJune 13, 2020\u003C/time\u003E by AxleGreaser**\n  \nnew info"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2020-06-13T17:05:13Z","Content":"\u003E \n\u003E \n\u003E 7 hours ago, AxleGreaser said:\n\u003E \n\u003E \n\u003E Im trying for a 1.9.1 install and following the instructions... My unity engine is reported to be  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E In output\\_log.txt ....  (and its on line one...)\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Initialize engine version: 2017.1.3p1 (02d73f71d3bd\n\u003E \n\nKSP 1.9.1 runs on Unity 2019.2.2f1. So if you are seeing 2017.1.3p1 in your logs something is definitively wrong with your install.\n\nAnd I can find the 2017.1.3.p1 fine in the link mentioned in that part of the \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E : \u0022(or [here](https://unity3d.com/fr/unity/qa/patch-releases) if the version ends with px)\u0022. Not that it will help with your current version mismatch."},{"CreatedByName":"AxleGreaser","CreatedById":204413,"CreatedDateTime":"2020-06-14T05:59:58Z","Content":"\u003E \n\u003E \n\u003E On 6/14/2020 at 3:05 AM, sarbian said:\n\u003E \n\u003E \n\u003E KSP 1.9.1 runs on Unity 2019.2.2f1. So if you are seeing 2017.1.3p1 in your logs something is definitively wrong with your install.\n\u003E \n\nTa\n\nI now have slightly different problem then.\n\nHow and when do outputlog.txt get created.  I went back to checked i hadn\u0027t typoed || fat fingered or something and my outputlog.txt was different. :\\ It now reflects the no worky state I got into \n\nafter this step *Launch KSP with the KSP\\_x64\\_Dbg.exe and check that you have \u0022Development Build\u0022 in your lower right corner*\n\nwhen Id did that it said   dialogBox[\u0022Failed to load Mono\u0022]  Now the outputlog.txt file says that too and nothing about unity.  Given my instructions hadn\u0027t mentioned installing mono yet, I decided i was a long way up a creek not too long after that. Esp when the official install mono on windows instructions that I found and followed also failed and required rebuilding it from source but.... And google suggested (by the guy who made the breaking code submission) reverting things (not even recent top of the tree ones) in the repository to fix it.  I can read not welcome here signs when they are writ that large.  (So for me, Im at not going to mono develop this month.)\n\nMy Outputlog.txt now says in its entirety...   \u0022Unable to load mono library from F:/games/KSP1.9.1/KSP\\_x64\\_DBG\\_Data/MonoBleedingEdge/EmbedRuntime/mono-2.0-bdwgc.dll\u0022.\n\nIt even still says that after When I run a normal KSP install in different directory, it doesn\u0027t write outputlog.txt at all.  Should I make KSP crash or something?\n\n(if so: then as some people do run multiple versions of KSP maybe the instructions need to point out the version number is from the most recently crashed version, or whatever it is that makes KSP actually write output log. ?)\n\nCurrently I just gave up on proper debugging and will compile and use log debugging. (so far that making headway, even though I compiled against the wrong unity apparently. I\u0027m guessing the bog std calls I required for my DLL didnt change.) (edit: nope checked this out, and when I set the references in the Vi Studio project i linked against whatever was in the game install not the unity I had installed on C drive.)\n\nPls note (as it may be unusual): a reason i dont have monodevelop as mentioned above is I was following those steps while having no DEV environment at all. No vis C, C\u002B\u002B, no, C#, F#, GTK, no mono, dont even currently have GCC. nuthin.\n\nI am just getting back into development on a clean new machine. So far dont even have a linux boot.\n\n\u003E \n\u003E \n\u003E On 6/14/2020 at 3:05 AM, sarbian said:\n\u003E \n\u003E \n\u003E And I can find the 2017.1.3.p1 fine in the link mentioned in that part of the \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E : \u0022(or [here](https://unity3d.com/fr/unity/qa/patch-releases) if the version ends with px)\u0022. Not that it will help with your current version mismatch.\n\u003E \n\nI now can find it too. The trick for people (if any coem after me) that don\u0027t know any French is to change the selector at the top from \u0022tout\u0022 to your specific number as close as you get then all the patch variants p# show up for that version.\n\n( ***Tout** is a very versatile word in **French** \u2014 you\u0027ll generally find it means \u201Call,\u201D but you\u0027ll notice different meanings when you see all its forms. This little word can be used as an adjective, an adverb, a noun, and a pronoun, and all with varying forms*. )\n\nbut in this case tout seems to have meant something like \u0022just show me the latest of each kind of all\u0022 not actually all. I suspect the later patch variants might be considered strictly better than earlier ones (only change is fewer bugs in the inside).  \n\nWell thats what it would mean if they were my creations.\n\nSelf help I will be doing. Poking around more trying to find out how to get currently generated outputlog.txt to get it to tell me what my real installs of KSP recently made from installed exes claim their unity version is. (edit: see below, KSP 1.9.1 juts wont do that (write unity version to output log) anymore apparently)\n\nI am instead moving on to printf style debugging.\n\nAlthough I am having real hard think about using KOS for some of my whitebox development tool debugging. If I hack a local version of it I can expose any damn thing I like to the KOS scripts then changeup my debugging printfs without reloading the entire KSP. That should help with the annoying little bugs like what happens in this corner case (shortunsual condition of temporary duration (recent eg during actual splashdown).\n\n============================\n\nedit more info that Ive found\n\nAnd yes it cant load it (MonoBleedingEdge/EmbedRuntime/mono-2.0-bdwgc.dll) from there as it  is not there:  \n\n  MonoBleeding Edge is beside not under the link KSP\\_x64\\_DBG\\_Data -\u003E KSP\\_x64\\_Data\n\nMy Outputlog.txt now says in its entirety...   \u0022Unable to load mono library from F:/games/KSP1.9.1/KSP\\_x64\\_DBG\\_Data/MonoBleedingEdge/EmbedRuntime/mono-2.0-bdwgc.dll\u0022.\n\nand when I put soft link link in to make that work (put a MonoBleedingEdge where the code/errormsg expects it to be.)\n\nIts (launching *KSP\\_x64\\_Dbg.exe*) output\\_log.txt now says: (in its entirety)\n\nSOF.\n\n*mono: function mono\\_unity\\_seh\\_handler not foundmono: function mono\\_unity\\_set\\_unhandled\\_exception\\_handler not foundmono: function lookup failed*\n\nEOF\n\nWhich gets me back to wanting to get some mod coding wins using debug log style debugging. Also that will get me more up to speed on simple stuff.\n\nme /out on proper debugging capability, for now  (I will go old skool, its fail safe and fixable by me)\n\nyet another: Addendum\n\nApparently .... outputlog.txt is a pre 1.9.1 thing... BUT it still can get updated anyway when I broke it trying to debugging. (but it seems never to contain the current unity 1.9.1 version identifiers anymore.\n\nThe output log text file with the old unity version that i had (A few posts back) may have been from a carry over install I had for short time of 1.5.1/ (eventually i decided the disk data corruption) on the computer I salvaged it from was too much to bear and moved on.) hence it being olllld would have had an old unity install version number.\n\n\u003E \n\u003E \n\u003E On 6/14/2020 at 9:15 AM, RyanRising said:\n\u003E \n\u003E \n\u003E Same folder, but it\u2019s called Player.log instead of output\\_log.txt. On Windows, they changed that in 1.8, so the last version that would give an output\\_log.txt was 1.7.3. [See here](https://forum.kerbalspaceprogram.com/index.php?/topic/163863-how-to-get-support/).\n\u003E \n\nLooking around in my much larger player Log (that1.9.1 creates), I have not yet found the unity build number identified in the same way.\n\n**Edited \u003Ctime datetime=\u00222020-06-15T02:39:33Z\u0022 title=\u002206/15/2020 02:39  AM\u0022 data-short=\u00224 yr\u0022\u003EJune 15, 2020\u003C/time\u003E by AxleGreaser**"},{"CreatedByName":"micha","CreatedById":113840,"CreatedDateTime":"2020-06-22T12:16:48Z","Content":"G\u0027day, just as a heads-up if anybody else is scratching their heads about this, you need a later Unity version (I just tried 2019.2.2f1 and it worked) if you want to profile your mods.\n\nThe profiler in 2017.1.3p1 doesn\u0027t connect/work with the current version of KSP, despite it being the \u0022correct\u0022 version of Unity."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2020-06-22T12:49:57Z","Content":"KSP use 2019.2.2f1 since 1.8."},{"CreatedByName":"maja","CreatedById":168379,"CreatedDateTime":"2020-08-10T21:05:05Z","Content":"\u003E \n\u003E \n\u003E On 3/31/2020 at 7:41 PM, sarbian said:\n\u003E \n\u003E \n\u003E New simplified method! Only 1 file to copy.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E ....\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I ll update the \u003Cabbr title=\u00221. Original Post(er). The first post in a thread, or the person who posted it. 2. Overpowered. A part or mechanic that upsets game balance by being too powerful.\u0022\u003EOP\u003C/abbr\u003E after other have confirmed it work for them\n\u003E \n\nFew months later... I can confirm too, that it\u0027s working (KSP 1.9.1, Visual Studio 2017)"},{"CreatedByName":"metalbass_92","CreatedById":206010,"CreatedDateTime":"2020-09-20T21:59:32Z","Content":"\u003E \n\u003E \n\u003E On 11/12/2019 at 8:48 AM, Papa\\_Joe said:\n\u003E \n\u003E \n\u003E for those that would like, I have created a batch script that automates the update and distribution of a new game to my development environment.  It makes the process very painless.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The batch script is menu driven, so you can perform all actions, or only one at a time.  Also it pauses between steps, so you can see what is going on.  This script is specific to my environment, but it uses txt files for folder locations, so you should be able to adapt it for your needs and your environment.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     @echo off\n\u003E     rem  This file sets up a fresh Development mode install of KSP from a Steam installation\n\u003E     rem  This script assumes that an existing development copy exist somewhere on your system besides steam.\n\u003E     rem  The script uses text files containing locations of various components needed for the script to work.\n\u003E     \n\u003E     rem  Change Log:\n\u003E     rem  v2.0  add support for unity 2019.\n\u003E     cd %~dp0\n\u003E     set LCL_DIR=%~dp0\n\u003E     \n\u003E     set VERSION=\u0022\u0022\n\u003E     set space = \u0022 \u0022\n\u003E     \n\u003E     set /p GIT_DIR=\u003C\u0022%LCL_DIR%\\git_dir.txt\u0022\n\u003E     set /p STEAM_DIR=\u003C\u0022%GIT_DIR%\\_LocalDev\\steam_dir.txt\u0022\n\u003E     set /p KSP_DIR=\u003C\u0022%GIT_DIR%\\_LocalDev\\ksp_dir.txt\u0022\n\u003E     \n\u003E     @echo: \n\u003E     @echo     Path tokens:\n\u003E     @echo     - LCL_DIR: %LCL_DIR%\n\u003E     @echo     - STEAM_DIR: %STEAM_DIR%    \n\u003E     @echo     - GIT_DIR: %GIT_DIR%\n\u003E     @echo     - KSP_DIR: %KSP_DIR%\n\u003E     @echo:\n\u003E     @echo   Let\u0027s get the version of the existing game...\n\u003E     \n\u003E     rem get_versions\n\u003E     set steamVer = \u0022\u0022\n\u003E     for /F \u0022usebackq skip=13 delims=\u0022 %%V in (\u0022%STEAM_DIR%\\readme.txt\u0022) do set \u0022steamVer=%%V\u0022 \u0026 goto Steamvalue\n\u003E     \n\u003E     :Steamvalue\n\u003E     set thisVer = \u0022\u0022\n\u003E     for /F \u0022usebackq skip=13 delims=\u0022 %%V in (\u0022%KSP_DIR%\\readme.txt\u0022) do set \u0022thisVer=%%V\u0022 \u0026 goto Hasvalue\n\u003E     \n\u003E     :Hasvalue\n\u003E     call set VERSION=%%thisVer:Version =%word%%%\n\u003E     \n\u003E     @echo     - Steam Version found is:  %steamVer%\n\u003E     @echo     - Dev Version found is: %thisVer%\n\u003E     set /p quit= \u0022  - Do you wish to continue? (Y/N):  \u0022\n\u003E     if /i \u0022%quit%\u0022 == \u0022N\u0022 ( @echo     - Terminating batch operation without executing Dev Setup...goto end \n\u003E     )\n\u003E     \n\u003E     :menu\n\u003E     @echo:\n\u003E     @echo:\n\u003E     @echo     ====================================================\n\u003E     @echo     Main Menu:\n\u003E     @echo:\n\u003E     @echo     1 - Perform all steps...\n\u003E     @echo     2 - Backup existing game folder...\n\u003E     @echo     3 - Remove existing game folder...\n\u003E     @echo     4 - Create new game folder...\n\u003E     @echo     5 - Copy Steam game folder...\n\u003E     @echo     6 - Copy new KSP assemblies to Dev...\n\u003E     @echo     7 - Copy Dev Debug files to Game folder...\n\u003E     @echo     8 - Copy Game Save and Ships to Game folder...\n\u003E     @echo     9 - Create linked folder...\n\u003E     @echo     X - Quit script  (Do nothing!)\n\u003E     @echo     ====================================================\n\u003E     @echo:\n\u003E     set /p optn= \u0022---\u003E Select option (1 - 9, X):  \u0022\n\u003E     @echo:\n\u003E     @echo     Choice made:  \u0022%optn%\u0022\n\u003E     @echo:\n\u003E     \n\u003E     if \u0022%optn%\u0022 == \u00221\u0022 ( goto backupGame )\n\u003E     if \u0022%optn%\u0022 == \u00222\u0022 ( goto backupGame )\n\u003E     if \u0022%optn%\u0022 == \u00223\u0022 ( goto removeGame )\n\u003E     if \u0022%optn%\u0022 == \u00224\u0022 ( goto createFolder )\n\u003E     if \u0022%optn%\u0022 == \u00225\u0022 ( goto copyGame )\n\u003E     if \u0022%optn%\u0022 == \u00226\u0022 ( goto copyAssemblies )\n\u003E     if \u0022%optn%\u0022 == \u00227\u0022 ( goto copyDebugFiles )\n\u003E     if \u0022%optn%\u0022 == \u00228\u0022 ( goto copyGameSaves )\n\u003E     if \u0022%optn%\u0022 == \u00229\u0022 ( goto createLinkedFolder )\n\u003E     if /I \u0022%optn%\u0022 == \u0022X\u0022 ( goto end )\n\u003E     \n\u003E     goto end\n\u003E     \n\u003E     :backupGame\n\u003E     @echo: \n\u003E     @echo     - Backup existing game folder...\n\u003E     \n\u003E     @echo: \n\u003E     pause\n\u003E     @echo: \n\u003E     \n\u003E     @echo     - Backup in progress, please wait...\n\u003E     xcopy /E /Y /Q \u0022%KSP_DIR%\\*.*\u0022 \u0022%KSP_DIR%_%VERSION%_old\\\u0022\n\u003E     \n\u003E     @echo     - Backup complete...\n\u003E     @echo: \n\u003E     \n\u003E     if not \u0022%optn%\u0022 == \u00221\u0022 ( goto end )\n\u003E     \n\u003E     :removeGame\n\u003E     @echo     - Removing existing game folder...\n\u003E     pause\n\u003E     rmdir /s /q \u0022%KSP_DIR%\u0022\n\u003E     @echo     - Removal complete...\n\u003E     @echo: \n\u003E     if not \u0022%optn%\u0022 == \u00221\u0022 ( goto end )\n\u003E     \n\u003E     :createFolder\n\u003E     @echo     - Creating new game folder...\n\u003E     pause\n\u003E     if not exist \u0022%KSP_DIR%\u0022 ( mkdir \u0022%KSP_DIR%\u0022 @echo     - Game folder created...\n\u003E     ) else (@echo     - Game folder exists.  Skipping...\n\u003E     )\n\u003E     @echo:\n\u003E     if not \u0022%optn%\u0022 == \u00221\u0022 ( goto end )\n\u003E     \n\u003E     :copyGame\n\u003E     @echo     - Ready to Copy Steam Game to local Game folder...\n\u003E     @echo       from: \u0022%STEAM_DIR%\u0022 \n\u003E     @echo         to: \u0022%KSP_DIR%\u0022\n\u003E     pause\n\u003E     xcopy /E /Y \u0022%STEAM_DIR%\\*.*\u0022 \u0022%KSP_DIR%\\\u0022\n\u003E     @echo     - Copy complete...\n\u003E     @echo:\n\u003E     if not \u0022%optn%\u0022 == \u00221\u0022 ( goto end )\n\u003E     \n\u003E     :copyAssemblies\n\u003E     @echo     - Ready to Copy KSP and unity assemblies \n\u003E     @echo       from: \u0022%KSP_DIR%\\KSP_x64_Data\\Managed\u0022 \n\u003E     @echo         to: \u0022%GIT_DIR%\\_LocalDev\\KSPRefs\\\u0022 folder...\n\u003E     pause\n\u003E     xcopy /E /Y \u0022%KSP_DIR%\\KSP_x64_Data\\Managed\\Assembly-CSharp.dll\u0022 \u0022%GIT_DIR%\\_LocalDev\\KSPRefs\\\u0022\n\u003E     xcopy /E /Y \u0022%KSP_DIR%\\KSP_x64_Data\\Managed\\Assembly-CSharp-firstpass.dll\u0022 \u0022%GIT_DIR%\\_LocalDev\\KSPRefs\\\u0022\n\u003E     xcopy /E /Y \u0022%KSP_DIR%\\KSP_x64_Data\\Managed\\KSPAssets.dll\u0022 \u0022%GIT_DIR%\\_LocalDev\\KSPRefs\\\u0022\n\u003E     xcopy /E /Y \u0022%KSP_DIR%\\KSP_x64_Data\\Managed\\UnityEngine.dll\u0022 \u0022%GIT_DIR%\\_LocalDev\\KSPRefs\\\u0022\n\u003E     xcopy /E /Y \u0022%KSP_DIR%\\KSP_x64_Data\\Managed\\UnityEngine.*.dll\u0022 \u0022%GIT_DIR%\\_LocalDev\\KSPRefs\\\u0022\n\u003E     xcopy /Y \u0022%KSP_DIR%\\readme.txt\u0022 \u0022%GIT_DIR%\\_LocalDev\\KSPRefs\\\u0022\n\u003E     @echo     - Copy complete...\n\u003E     @echo:\n\u003E     if not \u0022%optn%\u0022 == \u00221\u0022 ( goto end )\n\u003E     \n\u003E     :copyDebugFiles\n\u003E     @echo     - Ready to Copy unity debug files to game folder and set debug mode...\n\u003E     pause\n\u003E     @echo player-connection-debug=1 \u003E\u003E \u0022%KSP_DIR%\\KSP_x64_Data\\boot.config\n\u003E     copy /Y \u0022%LCL_DIR%\\WindowsPlayer.exe\u0022 \u0022%KSP_DIR%\\ksp_x64_dbg.exe\u0022\n\u003E     copy /Y \u0022%LCL_DIR%\\UnityPlayer.dll\u0022 \u0022%KSP_DIR%\u0022\n\u003E     copy /Y \u0022%LCL_DIR%\\WinPixEventRuntime.dll\u0022 \u0022%KSP_DIR%\u0022\n\u003E     @echo     - Copy complete...\n\u003E     @echo: \n\u003E     if not \u0022%optn%\u0022 == \u00221\u0022 ( goto end )\n\u003E     \n\u003E     :copyGameSaves\n\u003E     @echo     - Ready to Copy ships, Saves and mods to the new game folder.\n\u003E     pause\n\u003E     xcopy /E /Y /D \u0022%KSP_DIR%_%VERSION%_old\\GameData\\*.*\u0022 \u0022%KSP_DIR%\\GameData\\\u0022\n\u003E     xcopy /E /Y /D \u0022%KSP_DIR%_%VERSION%_old\\ships\\*.*\u0022 \u0022%KSP_DIR%\\Ships\\\u0022\n\u003E     xcopy /E /Y /D \u0022%KSP_DIR%_%VERSION%_old\\saves\\*.*\u0022 \u0022%KSP_DIR%\\saves\\\u0022\n\u003E     @echo     - Copy complete...\n\u003E     @echo: \n\u003E     if not \u0022%optn%\u0022 == \u00221\u0022 ( goto end )\n\u003E     \n\u003E     :createLinkedFolder\n\u003E     @echo     - Ready to create the linked folder for debugging...\n\u003E     @echo: \n\u003E     pause\n\u003E     \n\u003E     REM cd /d \u0022%KSP_DIR%\u0022\n\u003E     REM @echo     - Curr Dir:  \u0022%cd%\u0022\n\u003E     REM @echo     - Game Directory:  \u0022%KSP_DIR%\u0022...\n\u003E     REM @echo: \n\u003E     REM pause\n\u003E     \n\u003E     mklink /J \u0022%KSP_DIR%\u0022\\KSP_x64_Dbg_Data \u0022%KSP_DIR%\u0022\\KSP_x64_Data\n\u003E     @echo     - Linked folder created...\n\u003E     @echo:\n\u003E     \n\u003E     :end\n\u003E     cd %~dp0\n\u003E     @echo     - %~dp0\n\u003E     @echo:\n\u003E     @echo     - script complete...\n\u003E     @echo:\n\u003E     pause\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E The script performs the following actions:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 1.  checks to see if a new version of the game exists in Steam, compared to the latest copy of your development version of the game.  It checks the readme.txt to get the version information.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 2.  Backs up the existing dev game folder for archival needs.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 3.  deletes the existing dev game folder\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 4.  Copies all files from the steam installation into a new game folder.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 5.  copies all the KSP and unity assemblies needed for development into a location of your choice.  I do this to ensure I have the latest assemblies, and they are not tied to my steam installation.  Keeps them in sync.  Makes multi developer easier, as the assemblies are in a common location for all KSP mods I supported.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 6.  Copies the debug files ( WIndowsPLayer.exe, UnityPlayer.dll and WinPixEventRuntime.dll into the dev game root folder  It also sets the flag in Boot.config.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 7  Copies any existing saves, ships, and mods from the previous dev game installation over to the new Dev Game installation.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E 8.  Creates the linked Folder, and finally  lets you know it is done.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I hope this is helpful.  The paths in the .txt files are one line only.  This is assumed by the command reading from the file.  It will only retrieve the first line.  You could add all paths to a single file if you wish and simply read each line and assign to your vars using a different file handling technique.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E If you have any questions, let me know.  This script has been tested, and I use it regularly.  It should work both by executing the script as a .bat, or by running it in power shell.\n\u003E \n\nHi, I\u0027ve been trying to debug a simple test mod with this method on KSP latest version.\n\nI\u0027m running the batch without errors with Unity 2019.2.2f1. Running ksp\\_x64\\_dbg.exe shows \u0022development build\u0022 on bottom right. I can Attach Unity Debugger from Visual Studio 2019 and everything looks fine. The issue is that breakpoints cannot be hit.\n\nOpening Debug \u003E Windows \u003E Modules on Visual Studio shows that no symbols are being loaded for any assembly, which seems the main issue.\n\nI\u0027m compiling the mod as a C# library targeting .NET Framework 4 and I\u0027ve tried changing the Debugging information to Portable, as Gotmachine mentions, but no luck.\n\nAlso tried using the 1 file method from Sarbian in this same thread, but no luck either.\n\nAny suggestions?"},{"CreatedByName":"maja","CreatedById":168379,"CreatedDateTime":"2020-09-21T07:26:57Z","Content":"\u003E \n\u003E \n\u003E 9 hours ago, metalbass\\_92 said:\n\u003E \n\u003E \n\u003E Hi, I\u0027ve been trying to debug a simple test mod with this method on KSP latest version.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m running the batch without errors with Unity 2019.2.2f1. Running ksp\\_x64\\_dbg.exe shows \u0022development build\u0022 on bottom right. I can Attach Unity Debugger from Visual Studio 2019 and everything looks fine. The issue is that breakpoints cannot be hit.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Opening Debug \u003E Windows \u003E Modules on Visual Studio shows that no symbols are being loaded for any assembly, which seems the main issue.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I\u0027m compiling the mod as a C# library targeting .NET Framework 4 and I\u0027ve tried changing the Debugging information to Portable, as Gotmachine mentions, but no luck.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Also tried using the 1 file method from Sarbian in this same thread, but no luck either.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Any suggestions?\n\u003E \n\nWhat works for me with VS 2019:\n\n- My project build as Debug and mod\u0027s pdb file copied along with dll into test version of KSP\n- Dll from Sarbian\n- Unity debugger attached to the port 55555\n- Then I start ksp\\_x64.exe and as soon as the main menu (and my mod) is loaded, the breakpoints are registered"},{"CreatedByName":"metalbass_92","CreatedById":206010,"CreatedDateTime":"2020-09-21T11:42:57Z","Content":"\u003E \n\u003E \n\u003E 4 hours ago, maja said:\n\u003E \n\u003E \n\u003E as soon as the main menu (and my mod) is loaded, the breakpoints are registered\n\u003E \n\nThis was it! My tests consisted on waiting until the menu was open, but I was using [KSPAddon(KSPAddon.Startup.SpaceCentre, true)] to load it.\n\nSo it was actually working, but I checked before my dll was loaded.\n\nThank you ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n**Edited \u003Ctime datetime=\u00222020-09-21T11:43:43Z\u0022 title=\u002209/21/2020 11:43  AM\u0022 data-short=\u00223 yr\u0022\u003ESeptember 21, 2020\u003C/time\u003E by metalbass\\_92**\n  \nAdded additional explanation of what was wrong"},{"CreatedByName":"cineboxandrew","CreatedById":63646,"CreatedDateTime":"2020-10-07T07:01:34Z","Content":"\u003E \n\u003E \n\u003E On 4/23/2020 at 6:09 PM, LucidDan said:\n\u003E \n\u003E \n\u003E I used this to great success in 1.9.1 as well, thanks [@whitespacekilla](https://forum.kerbalspaceprogram.com/index.php?/profile/190042-whitespacekilla/)!\n\u003E \n\nI tried following this and successfully got KSP to run as a \u0022development build\u0022, but whenever I try to connect to it from Rider from the running process list, I get \n\n    Failed to connect: Connection refused 127.0.0.1:56402\n    Unable to connect to UnityPlayer\n\nDid you run into this? any idea what I\u0027m doing wrong? Rider is version 2020.1.4 so maybe something changed recently?"},{"CreatedByName":"m4v","CreatedById":67965,"CreatedDateTime":"2020-10-07T07:06:35Z","Content":"did you add \u0022player-connection-debug=1\u0022 in KSP\\_Data/boot.config?\n\n**Edited \u003Ctime datetime=\u00222020-10-07T07:06:56Z\u0022 title=\u002210/07/2020 07:06  AM\u0022 data-short=\u00223 yr\u0022\u003EOctober 7, 2020\u003C/time\u003E by m4v**"},{"CreatedByName":"cineboxandrew","CreatedById":63646,"CreatedDateTime":"2020-10-08T18:40:32Z","Content":"\u003E \n\u003E \n\u003E On 10/7/2020 at 12:06 AM, m4v said:\n\u003E \n\u003E \n\u003E did you add \u0022player-connection-debug=1\u0022 in KSP\\_Data/boot.config?\n\u003E \n\nI thought I did, turns out I put it in \u0022boon.config\u0022 ![:huh:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif \u0022:huh:\u0022)\n\nnow I\u0027m getting the same error but the KSP runtime is printing \u0060debugger-agent: Unable to listen on 8\u0060 to the console, I guess time to figure out what thats about\n\n**Edited \u003Ctime datetime=\u00222020-10-08T18:42:36Z\u0022 title=\u002210/08/2020 06:42  PM\u0022 data-short=\u00223 yr\u0022\u003EOctober 8, 2020\u003C/time\u003E by cineboxandrew**"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2020-12-11T21:52:37Z","Content":"make sure your VPN is disabled when attaching the debugger, or it might not work\n\n**Edited \u003Ctime datetime=\u00222020-12-12T00:32:50Z\u0022 title=\u002212/12/2020 12:32  AM\u0022 data-short=\u00223 yr\u0022\u003EDecember 12, 2020\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2021-01-01T20:55:35Z","Content":"[@sarbian](https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/)\n\nGetting the following error when trying to use the mono-2.0-bdwgc.dll:\n\n    * Assertion at D:\\Sarbian\\Documents\\GitHub\\dnSpy-Unity-mono\\unity-2019.2.2-mbe\\mono\\metadata\\mono-debug.c:137, condition \u0060!mono_debug_initialized\u0027 not met\n\nOnly other changes are:\n\nFollowing three files come from the Unity instal to the main KSP directoryl:\n\n\u0022\u003Cunity\u003E/Hub/Editor/2019.2.2f1/Editor/Data/PlaybackEngines/windowsstandalonesupport/Variations/win64_development_mono\u0022\n\u003C/unity\u003E\n\n- Replace the normal ksp\\_x64.exe with the WindowsPlayer.exe, named to ksp\\_x64\\_dbg.exe\n- Replaced the UnityPlayer.dll with the one in the same directory\n- Copied over WinPixEventRuntime.dll\n\nand\n\n- Replaced the mono-2.0-bdwgc.dll with  yours\n\nIf I don\u0027t do the bdwgc replacement, it doesn\u0027t error.  Strangely enough, using the normal bdwgc, I am able to attach to the unity debugger and breakpoints do seem to be working"},{"CreatedByName":"Grimmas","CreatedById":207818,"CreatedDateTime":"2021-04-27T17:27:45Z","Content":"\u003E \n\u003E \n\u003E On 3/29/2015 at 1:09 PM, sarbian said:\n\u003E \n\u003E \n\u003E Once you have that you will have a \u0022Attach Unity Debugger\u0022 in the Debug menu.\n\u003E \n\nThis part tripped me up for an hour or so. Wouldn\u0027t work in Visual Studio no matter what I did. Even when trying to edit code from within Unity. Then I repaired my VS  (2019 Community) installation, which nuked the VisualAssist and UE4 plugins but in exchange I finally got the Unity debugger option. Looks like one of those doesn\u0027t play nice with the Unity Tools plugin.\n\nI also got the warning from VS mentioned above, about how \u0022this breakpoint won\u0027t be triggered\u0022 yada yada, but they actually triggered just fine (maybe VS gets confused because it\u0027s inside a dynamically loaded mod or w/e). \n\nThanks for the detailed instructions, sarbian et al."},{"CreatedByName":"m4v","CreatedById":67965,"CreatedDateTime":"2021-06-27T06:44:57Z","Content":"Some notes for debugging for KSP 1.12 in Linux:\n\nKSP now uses Unity 2019.4.18f1, you need to download that, see here for instructions\n\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u002257146\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed9944134717\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/102909-ksp-plugin-debugging-and-profiling-for-visual-studio-and-monodevelop-on-all-os/\u0026do=embed\u0026comment=3720877\u0026embedComment=3720877\u0026embedDo=findComment\u0022 style=\u0022height:297px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\nEverything is the same except copying the LinuxPlayer file part, the file you need to copy now is UnityPlayer.so, overwriting the one in your KSP install.\n\n**Edited \u003Ctime datetime=\u00222021-06-27T06:45:40Z\u0022 title=\u002206/27/2021 06:45  AM\u0022 data-short=\u00223 yr\u0022\u003EJune 27, 2021\u003C/time\u003E by m4v**"},{"CreatedByName":"DocNappers","CreatedById":210703,"CreatedDateTime":"2021-06-27T21:27:24Z","Content":"\u003E \n\u003E \n\u003E 14 hours ago, m4v said:\n\u003E \n\u003E \n\u003E Everything is the same except copying the LinuxPlayer file part, the file you need to copy now is UnityPlayer.so, overwriting the one in your KSP install.\n\u003E \n\nThis isn\u0027t working for me (on Ubuntu 20.04.2). I\u0027m getting\n\n    Could not load symbol mono_unity_class_is_open_constructed_type : (null)\n     \n    (Filename: ./Runtime/Modules/LoadDylib.cpp Line: 199)\n    \n    mono: function mono_unity_class_is_open_constructed_type not found\n    Could not load symbol mono_unity_managed_callstack : (null)\n     \n    (Filename: ./Runtime/Modules/LoadDylib.cpp Line: 199)\n    \n    mono: function mono_unity_managed_callstack not found\n    mono: function lookup failed\n    Failed to load mono\n\nin my ~/.config/unity3d/Squad/Kerbal Space Program/Player.log file. It was working prior to 1.12. Any thoughts?"},{"CreatedByName":"m4v","CreatedById":67965,"CreatedDateTime":"2021-06-30T06:32:54Z","Content":"[@DocNappers](https://forum.kerbalspaceprogram.com/index.php?/profile/210703-docnappers/)I have no idea, and I\u0027m in Ubuntu 20.04.2 too. The only difference I have with severedsolo\u0027s procedure that I can think of is that I compile with mono\u0027s msc  thus the debugging symbols are in .mdb files.\n\n**Edited \u003Ctime datetime=\u00222021-06-30T06:33:30Z\u0022 title=\u002206/30/2021 06:33  AM\u0022 data-short=\u00223 yr\u0022\u003EJune 30, 2021\u003C/time\u003E by m4v**"},{"CreatedByName":"DocNappers","CreatedById":210703,"CreatedDateTime":"2021-06-30T13:02:53Z","Content":"Doh! I found the problem (PEBKAC). I had 2019.4.28f1 installed instead of 2019.4.18f1. It\u0027s working now that I have the right version installed."},{"CreatedByName":"Papa_Joe","CreatedById":10788,"CreatedDateTime":"2021-10-28T01:30:20Z","Content":"Hey all, I\u0027m back.  I\u0027m looking over the script I created and seeing what has changed in the development environment setup.  [@linuxgurugamer](https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/), ya, sorry about the lack of file location files.  I was in and out of modding by then due to RL.  Looks like you sorted it tho.  Also I\u0027ll be interested in how [@sarbian](https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/)\u0027s method works.  I may be reaching out to get some help as I get up to speed."},{"CreatedByName":"Papa_Joe","CreatedById":10788,"CreatedDateTime":"2021-10-28T01:52:10Z","Content":"\u003E \n\u003E \n\u003E On 2/21/2020 at 7:51 AM, mattssheep4 said:\n\u003E \n\u003E \n\u003E Does this require the game to be in steam then, or is it just checking if you have the latest released version? I go through the KSP Store.\n\u003E \n\nI realize this is a long overdue answer, but yes you can.  the file you are checking for version info (readme.txt) is in both releases, Steam and KSP Store.\n\n**Edited \u003Ctime datetime=\u00222021-10-28T01:53:51Z\u0022 title=\u002210/28/2021 01:53  AM\u0022 data-short=\u00222 yr\u0022\u003EOctober 28, 2021\u003C/time\u003E by Papa\\_Joe**"},{"CreatedByName":"Papa_Joe","CreatedById":10788,"CreatedDateTime":"2021-11-09T07:24:58Z","Content":"As a follow on to my work with the automation script, I\u0027ve created a Github project for the development setup script:\n\n[PapaJoesSoup/KSPDevEnvironmentBuilder](https://github.com/PapaJoesSoup/KSPDevEnvironmentBuilder)\n\nIt is a work in progress, but feel free to comment on it in GitHub and I will continue to keep it up to date and improve on it as I go along.  Alternative methods and suggestions are welcome, so lets work together to make it convenient for all.  I will also be adding a wiki to capture some of what has been discussed in this thread, as well as how my script works.\n\n**Edited \u003Ctime datetime=\u00222021-11-09T07:28:46Z\u0022 title=\u002211/09/2021 07:28  AM\u0022 data-short=\u00222 yr\u0022\u003ENovember 9, 2021\u003C/time\u003E by Papa\\_Joe**"}]}