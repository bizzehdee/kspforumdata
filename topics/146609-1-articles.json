{"TopicId":146609,"ForumId":20,"TopicTitle":"KOS Help. Please. I beg you.","CreatedByName":"DerGolgo","CreatedById":167906,"CreatedDateTime":"2016-08-26T21:14:40Z","PageNum":1,"Articles":[{"CreatedByName":"DerGolgo","CreatedById":167906,"CreatedDateTime":"2016-08-26T21:14:40Z","Content":"\n\u003Cp\u003E\nHi,\u003Cbr\u003E\u003Cbr\u003E\nI\u0027m fairly new here and I know it\u0027s pretty presumptuous of a noob stepping right in and asking for help.\u003Cbr\u003E\nBut I\u0027m going quite insane. I have tried flying with keyboard commands and, no surprise, I suck at it.\u003Cbr\u003E\nFor three days now, I\u0027ve been desperately trying to write a KOS script that does a few very simple things. Not even involving the ship changing orientation a single time. Really just straight up and straight down.\u003Cbr\u003E\nThe ship CAN do all the things, if I play around with MechJeb to assist keyboard control, it all works (within the limits of my utterly rubbish control abilities).\u003Cbr\u003E\nBut there is one specific little item holding me up. That had me write and rewrite my script and try it out dozens, possibly a full one-hundred times.\u003Cbr\u003E\u003Cbr\u003E\nThe problem: I want it to drop the SRBs when those are empty.\u003Cbr\u003E\nI\u0027ve given all the \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E\u0027s a name tag and have desperately tried all (and I do mean ALL) combinations of my name tag, the enumerator I stuffed with all the tagged parts, SHIP, SOLIDFUEL and AMOUNT.\u003Cbr\u003E\nI\u0027ve also tried out checking for FLAMEOUT.\u003Cbr\u003E\nNuffin.\u003Cbr\u003E\u003Cbr\u003E\nI\u0027ve tried the little\u00A0 \u0022THESE ARE ALL THE RESOURCES ON THE SHIP:\u0022. script snippet from documentation site on Github. That works fine and lists a resource \u0022SolidFuel\u0022.\u00A0\u003Cbr\u003E\nYet when I ask the terminal to PRINT SHIP:SOLIDFUEL:AMOUNT., I get an error that AMOUNT is an unknown variable. When I stop the line at SOLIDFUEL., I get the number 1436. So that works.\u003Cbr\u003E\nYet when I try PRINT SHIP:PARTSTAGGED(\u0022booster\u0022):SOLIDFUEL., I\u0027m told SOLIDFUEL is an unknown variable. The parts in question ARE tagged \u0022booster\u0022, of course.\u003Cbr\u003E\u003Cbr\u003E\nI don\u0027t want anyone to go and write me a whole script, of course.\u003Cbr\u003E\nJust an example how I can get the SolidFuel from a specific set of parts and a little explanation would be absolutely lovely.\u003Cbr\u003E\u003Cbr\u003E\nPlease?\n\u003C/p\u003E\u003Cp\u003E\nI suspect I have a fundamental misunderstanding of the entire syntax and structure. But neither going through the GitHub documentation nor trial and/or error have enlightened me.\n\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-08-27T00:26:55Z","Content":"\n\u003Cp\u003E\n\u0026gt; PRINT SHIP:PARTSTAGGED(\u0022booster\u0022):SOLIDFUEL\n\u003C/p\u003E\n\u003Cp\u003E\nTwo problems with that:\n\u003C/p\u003E\n\u003Cp\u003E\n1. The :SOLIDFUEL suffix is only on the entire vessel level, not on the level of a single part.\u00A0 (It totally could be and maybe we should add that, but right now it\u0027s not).\n\u003C/p\u003E\n\u003Cp\u003E\n2. PARTSTAGGED is plural for a reason - because you\u0027re allowed to give the same tag name to more than one part, the suffix is designed to return a LIST of parts, not a single part.\u00A0 If you want to look at the first part in the list, put a \u0027[0]\u0027 at the end of it.\u00A0 If you want to look at all the parts it returns make a FOR loop like so:\u00A0 FOR P in SHIP:PARTSTAGGED(\u0022booster\u0022) { // do something with P here. }\n\u003C/p\u003E\n\u003Cp\u003E\ntry this:\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Elocal I_SHOULD_STAGE is False.\nFOR P in SHIP:PARTSTAGGED(\u0022booster\u0022) {\n  if P:HASSUFFIX(\u0022FLAMEOUT\u0022) and P:FLAMEOUT { // Note the use of short-circuit boolean protection here.\n    print \u0022I have a flamed out booster, I will stage\u0022.\n    set I_SHOULD_STAGE to False.\n  }\n}\nif I_SHOULD_STAGE { stage. }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"DerGolgo","CreatedById":167906,"CreatedDateTime":"2016-08-27T13:00:23Z","Content":"\n\u003Cp\u003E\nThank you!\u003Cbr\u003E\u003Cbr\u003E\nI tried it verbatim at first and, when that didn\u0027t work, changed the attribute\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eset I_SHOULD_STAGE to False.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nto true and then, hurrah, it works! Thanks for demonstrating the importance of the attributes!\u003Cbr\u003E\nBut I found it only works if I put your snippet right in the chronological order.\u003Cbr\u003E\u003Cbr\u003E\nWhen I try this with I_SHOULD_STAGE as a global variable, and put the rest of it in a little \u0022RUNMODE\u0022 loop, it just gets stuck there, though.\u003Cbr\u003E\nMy plan had been to make a bunch of these RUNMODE loops, at the top of the script, and then have the chronological script just be along the lines of:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ESET RUNMODE TO 2.\nWAIT UNTIL I_SHOULD_STAGE=TRUE.\nSTAGE.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe first thing my little RUNMODE loop does is print the runmode that\u0027s going. That happens. But then, nothing.\u003Cbr\u003E\nI don\u0027t want to impose, obviously. And whatever mistake I\u0027m making is, indubitably, something trivial only an utterly ignorant noob would get wrong. I am NOOB:IGNORANT:MAG = UTTERLY, no question. I haven\u0027t done any programming since object-oriented C before I failed out of engineering school over a decade ago, have since lost most of my eyesight, which possibly may be how I missed an oft repeated, bold, underlined instruction in the documentation on GITHUB. I can write an entire novel, as you see, or a pretty vast script, though, it\u0027s just the reading of unfamiliar texts that\u0027s my problem.\n\u003C/p\u003E\n\u003Cp\u003E\nThese are, of course, not your nor the rest of the community\u0027s problems and I seriously don\u0027t want to impose.\u003Cbr\u003E\nBut ANY hints at what I\u0027m krakensing up would be exceptionally appreciated!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-27T13:05:31Z\u0022 title=\u002208/27/2016 01:05  PM\u0022 data-short=\u00227 yr\u0022\u003EAugust 27, 2016\u003C/time\u003E by DerGolgo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2016-08-27T21:19:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222732131\u0022 data-ipsquote-contentid=\u0022146609\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221472302823\u0022 data-ipsquote-userid=\u0022167906\u0022 data-ipsquote-username=\u0022DerGolgo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, DerGolgo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003ESET RUNMODE TO 2.\nWAIT UNTIL I_SHOULD_STAGE=TRUE.\nSTAGE.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe problem is that the code needs to be run in order for I_SHOULD_STAGE to ever get set.\u00A0 The WAIT UNTIL line is going to sit there and never run the loop that looks for the stage condition.\n\u003C/p\u003E\n\u003Cp\u003E\nYou could make it a function that returns a boolean value, then call that function in the WAIT statement.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EFUNCTION partlist_flameout {\n  parameter part_list. // pass in a LIST() of parts to check.\n\n  FOR P in part_list {\n    if P:HASSUFFIX(\u0022FLAMEOUT\u0022) and P:FLAMEOUT { // Note the use of short-circuit boolean protection here.\n      return true.\n    }\n  }\n  return false.\n}\n\n\n// Then later when you try to use it:\nlocal boosters is SHIP:PARTSTAGGED(\u0022booster\u0022).\nSET RUNMODE TO 2.\nWAIT UNTIL partlist_flameout(boosters).\nSTAGE.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThe reason I suggested making it just operate on a LIST you pass in, is that it is a bit more efficient that way because it doesn\u0027t have to keep re-searching for the part tags - it only builds the list once.\u00A0 Also, this makes it generically re-usable with other part lists you might want to use it on later.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"DerGolgo","CreatedById":167906,"CreatedDateTime":"2016-08-27T21:50:37Z","Content":"\n\u003Cp\u003E\nThank you!\u003Cbr\u003E\u003Cbr\u003E\nI\u0027ll play around with this.\u003Cbr\u003E\nI\u0027d appreciate being corrected, but what I will try is:\u003Cbr\u003E\u003Cbr\u003E\nThat FUNCTION bit at the top.\u003Cbr\u003E\nThen, either in the RUNMODE 2, or chronologically in the script after defining \u0022local boosters\u0022 it should be:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EIF partlist_flameout(boosters) {STAGE.}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nor possible\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EIF partlist_flameout(boosters)=TRUE {STAGE.}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThanks!!\n\u003C/p\u003E\n"},{"CreatedByName":"DerGolgo","CreatedById":167906,"CreatedDateTime":"2016-08-27T22:43:44Z","Content":"\n\u003Cp\u003E\nOkay, I\u0027ve tried this now, I think I\u0027ve got it.\u003Cbr\u003E\u003Cbr\u003E\nI know I\u0027m getting repetitive, but \u003Cem\u003Ethank you\u003C/em\u003E!\u003Cbr\u003E\u003Cbr\u003E\nThere are far too many online \u0022communities\u0022 where any nooby question is met with things along the lines of \u0022anyone who has to ask that shouldn\u0027t be doing this\u0022\u00A0 and \u0022stop bothering the grownups\u0022. Delightfully refreshing to find one that isn\u0027t!\n\u003C/p\u003E\n"}]}