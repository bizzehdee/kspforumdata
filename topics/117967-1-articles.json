{"TopicId":117967,"ForumId":69,"TopicTitle":"Orbit decaying for no reason?","CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2015-08-08T17:15:31Z","PageNum":1,"Articles":[{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2015-08-08T17:15:31Z","Content":"Hi! I have recently taken to the task of following my debris, placed in a graveyard orbit to a spiral to the ground.\n\nOne piece, consisting of solely a TR-18D stack separator, however doesn\u0027t even seem to need any friction to spiral downwards. At an altitude of 76.000m, the apoapsis seems to decay 1 m per 5 s.\n\nI can post screenshots if you want, but they\u0027d be pretty boring.\n\nSo what\u0027s going on here? Are TR-18D Stack Separators the new Quantum Drives?"},{"CreatedByName":"LostOblivion","CreatedById":111504,"CreatedDateTime":"2015-08-08T20:33:32Z","Content":"During physics (that is, not on rails) most spacecraft seem to have some form of changing orbits."},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2015-08-08T20:36:33Z","Content":"\u003E \n\u003E During physics (that is, not on rails) most spacecraft seem to have some form of changing orbits.\n\nNo, not really. Not with patched conics. It would take thrust to lose a meter every 5 seconds.\n\nNow, sometimes due to floating point math the game can\u0027t decide on an Apoapsis, but that would be inconsistent rather than a steady decline."},{"CreatedByName":"asheft","CreatedById":112588,"CreatedDateTime":"2015-08-09T04:27:13Z","Content":"I think I\u0027ve seen this before also. I haven\u0027t played in a while though, and am not at my KSP computer right now to check so I can\u0027t be sure."},{"CreatedByName":"marce","CreatedById":110351,"CreatedDateTime":"2015-08-09T05:09:31Z","Content":"Phantom forces, a common problem. Kind of an unintended kraken drive with various levels of thrust.\n\nThe more complex (part intensive) a craft is the worse it gets. It even happened to me that the craft accelerates so fast it leaves the Sun SOI."},{"CreatedByName":"Crown","CreatedById":18262,"CreatedDateTime":"2015-08-09T05:30:15Z","Content":"\u003E \n\u003E [...]The more complex (part intensive) a craft is the worse it gets.[...]\n\nBut a single TR-18D can\u0027t be considered \u0027complex\u0027. \n\nEither Squad implemented some kind of \u0027high atmosphere\u0027 or it\u0027s a problem with the orbit calculation."},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2015-08-09T05:53:41Z","Content":"\u003E \n\u003E But a single TR-18D can\u0027t be considered \u0027complex\u0027. \n\u003E Either Squad implemented some kind of \u0027high atmosphere\u0027 or it\u0027s a problem with the orbit calculation.\n\nIt\u0027s more common with more parts, that doesn\u0027t mean it can\u0027t happen with 1. I doubt it is a problem with the orbital calculation, and I\u0027m certain they didn\u0027t implement N-body physics."},{"CreatedByName":"wossname","CreatedById":118005,"CreatedDateTime":"2015-08-09T08:25:02Z","Content":"Hmm, you didn\u0027t have Swigert Kerman stir the O\u003Csub\u003E2\u003C/sub\u003E tanks did you?"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2015-08-09T08:54:30Z","Content":"Ok, apparently this is reproducible. I used a completely stock install, except for hyperedit.\n\nHyperedit a TR-18D into Orbit of 75.000x75.000 km, and now I can watch the periapsis/apoapsis move, the periapsis lowering and the apoapsis rising. Sometimes it\u0027s the other way around, sometimes both are lowering.\n\nI have not yet figured out the direction of the acceleration or the magnitude. Can somebody point me to simple-enough experiments to figure that out?"},{"CreatedByName":"Vegetal","CreatedById":147251,"CreatedDateTime":"2015-08-10T13:22:31Z","Content":"That happened to my ship once orbiting jool. The game didn\u0027t let me time warp, saying the craft was under acceleration. Had to physical time warp until the force disappeared, and corrected the orbit.\n\nHad the impression it\u0027s more likely to happen when low in the orbit, this time I was near the periapsis, and it was quite low (not inside the atmo by the way, ships get annihilated anyway)."},{"CreatedByName":"Kamuchi","CreatedById":110857,"CreatedDateTime":"2015-08-10T13:38:16Z","Content":"Phantom torque, something that should have never passed testing.\n\nGo to the Mun with a 2 part craft, undock and watch the 2 crafts start to drift and rotate without any forces applied to it (engine or rcs).\n\nThis happens everywhere, more or less depending the body but the Mun is like kraken central with this feature."},{"CreatedByName":"MalfunctionM1Ke","CreatedById":71626,"CreatedDateTime":"2015-08-10T13:39:25Z","Content":"\u003E \n\u003E I can post screenshots if you want, but they\u0027d be pretty boring.\n\nFootage is never boring. Please post them ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-08-10T13:44:32Z","Content":"Moving to Support.\n\n[**Floating point errors**](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) add up over time, the further you are from the center of the game world the worse they get which the krakensbane sought to resolve by resetting your position and speed, and moving the universe around the player.\n\nSAS was added to KSP to deal with floating point induced rotation as well as to provide flight stability, and improvements have been made to the accuracy of speed and trajectory calculations, see the readme/change notes.\n\nThings are as good as they are going to be until Unity5, sorry :/"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2015-08-10T13:45:05Z","Content":"I get the impression that as long as you\u0027re in an atmospheric physics bubble, atmospheric drag continues to exist. I\u0027ve seen the Kerbin atmosphere create drag while at an 85km altitude (very little drag but still). I suspect that the formula that calculates atmospheric pressure (based on an exponential curve) doesn\u0027t have a cutoff in place. Once you warp and put the craft on rails it disappears."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-08-10T13:53:25Z","Content":"Kerbins atmosphere ends at 69,100m, though the music doesn\u0027t start till 70,000m you\u0027re in vacuum before then."},{"CreatedByName":"LostOblivion","CreatedById":111504,"CreatedDateTime":"2015-08-10T14:57:59Z","Content":"\u003E \n\u003E Now, sometimes due to floating point math the game can\u0027t decide on an Apoapsis, but that would be inconsistent rather than a steady decline.\n\nI guess that is what I am seeing.\n\n- - - Updated - - -\n\n\u003E \n\u003E Phantom torque, something that should have never passed testing.\n\nThis might not actually be a bug. It\u0027s called gravity-gradient torque and is something that is simulated explicitly in Orbiter, but is probably passively simulated in KSP because of its part system.\n\nWhat happens is that in KSP each part has a mass and is individually influenced by gravity. Parts farther away from the major body experience less gravity, causing them to want to float away from parts that are closer to it. Also, parts in a spacecraft are obviously connected with a joint, so these movements all combine to cause an induced torque and eventually rotation of the overall spacecraft.\n\nA test to demonstrate this is to connect two spacecraft together with a long truss and decoupler in between, ideally pointing away from the major body so there is a notable difference in orbital height between the two spacecraft. Set the decoupler to have no ejection force. After a little while, the spacecraft should begin to rotate according to gravity-gradient torque. Now kill the rotation (by time-warp, for example) and decouple the two spacecraft. The two spacecraft should now float completely still right next to each other, but after a little while, because of their slightly diffferent orbits, will eventually start floating away from eachother. This is the same thing that causes the rotation, only that they are no longer connected to each other."},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-08-10T15:04:54Z","Content":"\u003E \n\u003E This might not actually be a bug. It\u0027s called gravity-gradient torque and is something that is simulated explicitly in Orbiter, but is probably passively simulated in KSP because of its part system.\n\u003E What happens is that in KSP each part has a mass and is individually influenced by gravity. Parts farther away from the major body experience less gravity, causing them to want to float away from parts that are closer to it. Also, parts in a spacecraft are obviously connected with a joint, so these movements all combine to cause an induced torque and eventually rotation of the overall spacecraft.\n\u003E \n\u003E A test to demonstrate this is to connect two spacecraft together with a long truss and decoupler in between, ideally pointing away from the major body so there is a notable difference in orbital height between the two spacecraft. Set the decoupler to have no ejection force. After a little while, the spacecraft should begin to rotate according to gravity-gradient torque. Now kill the rotation (by time-warp, for example) and decouple the two spacecraft. The two spacecraft should now float completely still right next to each other, but after a little while, because of their slightly diffferent orbits, will eventually start floating away from eachother. This is the same thing that causes the rotation, only that they are no longer connected to each other.\n\nThere are no gravity gradients in KSP, all parts of a vessel experience the exact same gravity (I believe calculated from the root part\u0027s altitude/position)."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-08-10T15:17:58Z","Content":"KSP still does some neat things though.\n\n[{clicky}](https://forum.kerbalspaceprogram.com/threads/122535-Like-IRL-like-KSP-%28zero-G-unstable-spin-test-by-Teflon_Mike%29)"},{"CreatedByName":"LostOblivion","CreatedById":111504,"CreatedDateTime":"2015-08-10T15:49:10Z","Content":"Cool!"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2015-08-10T16:12:17Z","Content":"\u003E \n\u003E Moving to Support.\n\u003E [**Floating point errors**](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) add up over time, the further you are from the center of the game world the worse they get which the krakensbane sought to resolve by resetting your position and speed, and moving the universe around the player.\n\u003E \n\u003E SAS was added to KSP to deal with floating point induced rotation as well as to provide flight stability, and improvements have been made to the accuracy of speed and trajectory calculations, see the readme/change notes.\n\nOh, that\u0027s kinda sad, because it makes me wonder how many trajectories in my KSP life have been messed up by this \u0022behaviour\u0022.\n\n\u003E \n\u003E Things are as good as they are going to be until Unity5, sorry :/\n\nWell that\u0027s totally fine, if it actually will be fixed by Unity 5. But are there any indications it will be? Does it have better floating point math?\n\nOh btw, does the 64-Bit version actually have bigger floating point numbers? Bigger numbers could potentially increase accuracy."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-08-10T16:14:23Z","Content":"Fixed? Unlikely.\n\nImproved? Possible.\n\n64bit *does* allow for more numbers after the decimal point, but whether or not those numbers are more *precise* depends on a lot of things."},{"CreatedByName":"Claw","CreatedById":100668,"CreatedDateTime":"2015-08-10T16:33:50Z","Content":"I\u0027ve also noticed there is a physics discontinuity at 100km altitude over Kerbin. Above that, the orbit and attitude doesn\u0027t seem to drift. So if you would like more stable orbits, I would aim to be above that altitude.\n\nCheers,\n\n-Claw"}]}