{"TopicId":189303,"ForumId":29,"TopicTitle":"not obvious code in an old mods","CreatedByName":"flart","CreatedById":181486,"CreatedDateTime":"2019-10-26T04:49:40Z","PageNum":1,"Articles":[{"CreatedByName":"flart","CreatedById":181486,"CreatedDateTime":"2019-10-26T04:49:40Z","Content":"\n\u003Cp\u003E\nthis\u00A0code originally was in the KCT, I updated it, and now it is almost work with\u00A0VesselSpawnDialog (LaunchPad/Runway GUI)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/yalov/KVASS/blob/3ee0c5a16f16a52561e8b7ac736629e9ff1bd42d/KVASS/KVASS.cs#L158\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/.../KVASS.cs#L158\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u0022Almost\u0022 because of one thing - the launchsites radiobuttons.\u003Cbr\u003E\nIt works when I launch using little launch button (per launchsite), the code is the same, the launchsitename is gotten from the GUI,\u00A0\u003Cbr\u003E\nit works when I launch with GreenLaunchButton to the default LaunchPad/Runway,\u003Cbr\u003E\nbut if I change a\u00A0launchsite using a radiobutton, and then use the GreenLaunchButton, I can\u0027t get sitename,\u003Cbr\u003E\nbecause KCT use\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ElaunchSite = EditorLogic.fetch.launchSiteName\u00A0\u003C/span\u003Ewhich will not work for the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E scene (VesselSpawnDialog).\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nA small question is how to solve that problem?\u003Cbr\u003E\n(get selected\u00A0radiobutton\u0027s launchsitename or at least completely disable radiobuttons and leave only GreenLaunchButton and smallLaunchButtons\u00A0),\n\u003C/li\u003E\n\u003Cli\u003E\nand a large question is how this code was born in the first place?\u003Cbr\u003E\nI found in the KSP API\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EUILaunchsiteController \u003C/span\u003Ebut it hasn\u0027t any mentions of\u00A0\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ElaunchPadItems \u003C/span\u003Eand other objects used there.\u003Cbr\u003E\nMost likely I can at least disable radiobuttons in the same way as littlelaunchbutton was got there:\u003Cbr\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Esite.GetType().GetPublicValue\u0026lt;UnityEngine.UI.Button\u0026gt;(\u0022buttonLaunch\u0022, site);\u003C/span\u003E\u003Cbr\u003E\nbut where I need to find the\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003E\u00A0PublicValue \u003Cspan style=\u0022font-family:Roboto, \u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;\u0022\u003Efor that, if not in the KSP API?\u003C/span\u003E\u003C/span\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eif (settingsGame.AllowOtherLaunchSites)\n{\n    UILaunchsiteController controller = UnityEngine.Object.FindObjectOfType\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;UILaunchsiteController\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n    if (controller == null) return;\n\n    object items = controller.GetType()?.GetPrivateMemberValue(\u0022launchPadItems\u0022, controller, 4);\n    if (items == null) return;\n\n    IEnumerable list = items as IEnumerable;\n\n    foreach (object site in list)\n    {\n        UnityEngine.UI.Button button = site.GetType().GetPublicValue\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;UnityEngine.UI.Button\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E(\u0022buttonLaunch\u0022, site);\n        if (button != null)\n        {\n            button.onClick.RemoveAllListeners();\n            string siteName = site.GetType().GetPublicValue\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;string\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E(\u0022siteName\u0022, site);\n            button.onClick.AddListener(() =\u0026gt; { LaunchClickListenerBoth(vesselSpawnInfo, siteName); });\n        }\n    }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-10-26T04:55:59Z\u0022 title=\u002210/26/2019 04:55  AM\u0022 data-short=\u00224 yr\u0022\u003EOctober 26, 2019\u003C/time\u003E by flart\u003C/strong\u003E\n\u003C/span\u003E\n"}]}