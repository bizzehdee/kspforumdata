{"TopicId":112795,"ForumId":29,"TopicTitle":"Creating new attach nodes at runtime using AddAttachNode?","CreatedByName":"The Great Potato","CreatedById":134427,"CreatedDateTime":"2015-06-12T21:24:48Z","PageNum":1,"Articles":[{"CreatedByName":"The Great Potato","CreatedById":134427,"CreatedDateTime":"2015-06-12T21:24:48Z","Content":"Has anyone worked with the AddAttachNodes method before?\n\nI\u0027m looking to add new attach nodes to existing parts at runtime (no cfgs involved). It seems adding the node directly to part.attachNodes causes crashes, so I think the AddAttachNode method might be the way to go. \n\nIt takes a ConfigNode parameter, which could be pretty much anything. I tinkered around with it for more information, and here\u0027s what I could discern:\n\n- The name of the overall ConfigNode doesn\u0027t look like it matters.\n\n- The parameter must contain the value \u0027name\u0027, which will be the final attach node name\n\n- The parameter must contain the value \u0027transform\u0027, which is the name of a Unity Transform object (but not just any old transform.name).\n\nThe big hangup here is the third point -- I can\u0027t figure out what \u0027transform\u0027 should be.\n\nIf anyone can explain this method, or the \u0027transform\u0027 bit, it would be a huge help.\n\nThanks!"},{"CreatedByName":"landeTLS","CreatedById":97925,"CreatedDateTime":"2015-06-12T22:00:23Z","Content":"I guess transform could be a dummy transform you created like so\n\n    Transform DummyTransform = new Gameobject () as transform;\n\ndont have access to a computer now so not sure if \n\nthats correct. Otherwise you could do:\n\n    Gameobject dummy = new Gameobject ();Transform dummyTransform = dummy.transform;\n\nIts position (transform.position) is probably used to place the attachnode when invoked this way. So its probably a good idea to set its position first\n\nBut im a noob with c#. Im also doing some wierd stuff with attachnodes and really wish there was some good resources on how to work with them in code\n\n**Edited \u003Ctime datetime=\u00222015-06-12T22:03:37Z\u0022 title=\u002206/12/2015 10:03  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 12, 2015\u003C/time\u003E by landeTLS**"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-06-12T22:25:58Z","Content":"transform is the **name** of a transform of the model. One in the model hierarchy. You could add one manually but you would have to use the part transform as a partent."},{"CreatedByName":"The Great Potato","CreatedById":134427,"CreatedDateTime":"2015-06-13T07:16:00Z","Content":"The method won\u0027t take a dummy transform. I can\u0027t pass it \u0022new GameObject(\u0027blah\u0027).transform.name\u0022: it will say \u0022Cannot add attach node. Transform of name \u0027blah\u0027\u0022.\n\n\u003E \n\u003E transform is the **name** of a transform of the model. One in the model hierarchy. You could add one manually but you would have to use the part transform as a partent.\n\nI\u0027m not too familiar with Unity. Is this the model hierarchy from the Unity framework, or is it something KSP added? I thought creating a new GameObject would automatically add it to the Unity hierarchy.\n\nAnyways, here\u0027s my code for adding the node in OnStart:\n\n            if (state == StartState.Editor)            {                Transform t = new GameObject(\u0022interstageNode\u0022).transform;                ConfigNode cn = new ConfigNode(\u0022interstageConfig\u0022);                cn.AddValue(\u0022name\u0022, \u0022node_stack_interstage\u0022);                cn.AddValue(\u0022transform\u0022, t.name);                part.AddAttachNode(cn);            }\n\nActually, I just had a thought. Could it be that I\u0027m trying to add the node as I\u0027m bringing it up in the editor? I\u0027ll try adding the node outside of the editor when I get back to my computer tonight."}]}