{"TopicId":100469,"ForumId":36,"TopicTitle":"KSPBlender - Blender Addon for importing .craft files (now with complete mod support!)","CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-02-22T22:45:19Z","PageNum":5,"Articles":[{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-02-28T22:25:39Z","Content":"\u003E \n\u003E So how exactly can we 3D print them or put those up on Sketchfab? I save an .obj file and upload it, but it only shows the mesh without textures. Can you please give some insight on this?\n\nGetting them into sketchfab can be a little tricky from what I recall. I\u0027ve only put a few small things up on Sketchfab with a free account. There were a few good tutorials on how to do it that I found on google, but it\u0027s been a while so I don\u0027t have the links handy.\n\nAs for 3d printing....[https://eucl3d.com/ksp/](https://eucl3d.com/ksp/) they will do it for you, though it costs a bit.\n\n**Edited \u003Ctime datetime=\u00222015-02-28T22:30:53Z\u0022 title=\u002202/28/2015 10:30  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 28, 2015\u003C/time\u003E by Sma**"},{"CreatedByName":"briansun1","CreatedById":67451,"CreatedDateTime":"2015-02-28T22:35:28Z","Content":"\u003E \n\u003E Brian, do you mean \u0027work\u0027 as in play the animation, or toggle the position of the parts? Hopefully the second script I put in the Blender file (the K menu) should handle toggling the parts. As for playing it, it gets a bit messy, but you\u0027ll have to play with the NLA stuff and keyframing. The internet will do a better job of explaining that stuff than I can ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nWas looking for both, but mostly the first."},{"CreatedByName":"Spartwo","CreatedById":58131,"CreatedDateTime":"2015-02-28T23:41:48Z","Content":"It\u0027s probably my fault but when I click the upper run script it says the script had failed and to check the console.\n\nEDIT:\n\n**Edited \u003Ctime datetime=\u00222023-05-22T01:47:55Z\u0022 title=\u002205/22/2023 01:47  AM\u0022 data-short=\u00221 yr\u0022\u003EMay 22, 2023\u003C/time\u003E by Spartwo**"},{"CreatedByName":"zekes","CreatedById":23840,"CreatedDateTime":"2015-03-01T00:11:33Z","Content":"Hey i have a question - if I put a ship in, can i run the program again in the same save and load another differnt ship in too? I just realized I can finally do my three-dreks next to each other picture in blender ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-03-01T00:30:35Z","Content":"\u003E \n\u003E Hey i have a question - if I put a ship in, can i run the program again in the same save and load another differnt ship in too? I just realized I can finally do my three-dreks next to each other picture in blender ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nYeah, I did that a few times, not on purpose. Though, you might want to move the first ship out of the way first, as they all import to the same origin I believe."},{"CreatedByName":"zekes","CreatedById":23840,"CreatedDateTime":"2015-03-01T00:32:51Z","Content":"\u003E \n\u003E Yeah, I did that a few times, not on purpose. Though, you might want to move the first ship out of the way first, as they all import to the same origin I believe.\n\nOk that\u0027s great! Will do."},{"CreatedByName":"ckfinite","CreatedById":10410,"CreatedDateTime":"2015-03-01T05:15:22Z","Content":"Very very nice - importing a stock aircraft was smooth and easy, and the results look quite nice. Here\u0027s my current effort: ![tNHZKBe.jpg](http://i.imgur.com/tNHZKBe.jpg)"},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-03-01T10:30:02Z","Content":"\u003E \n\u003E It\u0027s probably my fault but when I click the upper run script it says the script had failed and to check the console.\n\u003E EDIT:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     PTV-Broadsword ready for takeoff98 parts found...----------------------------------------------------Importing probeStackSmall as probeStackSmall_4294715156Traceback (most recent call last):  File \u0022C:\\Users\\kylew_000\\Downloads\\kspblender-master\\demo\\kspblenderdemo.blen\\custommenu.py\u0022, line 1, in   File \u0022C:\\Users\\kylew_000\\Downloads\\kspblender-master\\demo\\kspblenderdemo.blen\\ksparser.py\u0022, line 1477, in   File \u0022C:\\Users\\kylew_000\\Downloads\\kspblender-master\\demo\\kspblenderdemo.blen\\ksparser.py\u0022, line 1468, in main  File \u0022C:\\Users\\kylew_000\\Downloads\\kspblender-master\\demo\\kspblenderdemo.blen\\ksparser.py\u0022, line 661, in import_parts  File \u0022C:\\Program Files\\Blender Foundation\\Blender\\2.72\\scripts\\modules\\bpy\\op.py\u0022, line 188, in __call__    ret = op_call(self.idname_py(), None, kw)AttributeError: Calling operator \u0022bpy.ops.import_object.ksp_mu\u0022 error, could no be foundError: Python script fail, look in the console for now...\n\nIt looks to me like you didn\u0027t get the .mu importer where it needs to be, or maybe you did and didn\u0027t activate it within the User Preferences. I can elaborate more if you need it."},{"CreatedByName":"Avalon304","CreatedById":68304,"CreatedDateTime":"2015-03-01T11:04:12Z","Content":"So can you tell me what this means when trying to import a part:\n\n[http://i.imgur.com/mTKX6ou.jpg](http://i.imgur.com/mTKX6ou.jpg)"},{"CreatedByName":"comham","CreatedById":43245,"CreatedDateTime":"2015-03-01T13:30:19Z","Content":"\u003E \n\u003E Very very nice - importing a stock aircraft was smooth and easy, and the results look quite nice. Here\u0027s my current effort: [http://i.imgur.com/tNHZKBe.jpg](http://i.imgur.com/tNHZKBe.jpg)\n\nGoddamn, imagine KSP terrain looking that good."},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-03-01T15:03:41Z","Content":"I managed to get the kethane heavyDrill imported, but what I did was set the drill to open in the VAB and saved it like that, and imported the craft file like normal, except when it gets imported it\u0027s closed and not opened. Also, I\u0027m not sure how to deploy anything. I checked in the user settings and I don\u0027t have an option listed for the custom menu. Maybe because I\u0027m on linux, that or I missed a step (or maybe i should check to see i have the newest script....hmmm).\n\n![heavyDrill.png](http://bowencustomcreations.com/kspPics/heavyDrill.png)\n\nOh, also tried putting the 1m converter in again but it doesn\u0027t show up still."},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-03-01T15:18:15Z","Content":"\u003E \n\u003E I managed to get the kethane heavyDrill imported, but what I did was set the drill to open in the VAB and saved it like that, and imported the craft file like normal, except when it gets imported it\u0027s closed and not opened. Also, I\u0027m not sure how to deploy anything. I checked in the user settings and I don\u0027t have an option listed for the custom menu. Maybe because I\u0027m on linux, that or I missed a step (or maybe i should check to see i have the newest script....hmmm).\n\u003E [http://bowencustomcreations.com/kspPics/heavyDrill.png](http://bowencustomcreations.com/kspPics/heavyDrill.png)\n\u003E \n\u003E Oh, also tried putting the 1m converter in again but it doesn\u0027t show up still.\n\nI\u0027ll give the kethane stuff a shot sometime soon. It\u0027s about time I start adding mod parts in...\n\nAlso, I\u0027m releasing a big update literally right now, so look for a new post and try it out."},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-03-01T15:23:51Z","Content":"**Update 2:** Being as that I\u0027m on linux, I had to change this \n\n    kspdirfile = open(dir\u002B\u0027\\\\kspdir.txt\u0027)\n\n to this \n\n    kspdirfile = open(dir\u002B\u0027/kspdir.txt\u0027)\n\n which introduced new errors\n\n    Kerbal 2 ready for takeoff17 parts found...Failed to load Mark1-2Pod... Probably an unsupported mod. Let me know what part it was!Traceback (most recent call last):  File \u0022/home/sma/blender-2.73a-linux-glibc211-x86_64/2.73/scripts/addons/io_kspblender-master/__init__.py\u0022, line 59, in execute    return import_craft.import_craft(self,context,**keywords)  File \u0022/home/sma/blender-2.73a-linux-glibc211-x86_64/2.73/scripts/addons/io_kspblender-master/import_craft.py\u0022, line 58, in import_craft    craft = import_parts(filepath)  File \u0022/home/sma/blender-2.73a-linux-glibc211-x86_64/2.73/scripts/addons/io_kspblender-master/import_craft.py\u0022, line 248, in import_parts    scn.objects.active = bpy.data.objects[part.part]KeyError: \u0027bpy_prop_collection[key]: key \u0022Mark1-2Pod_4293084140\u0022 not found\u0027location: :-1location: :-1\n\nSimilar to errors I was getting when I first started with the 2month old version...the other day lol\n\n**Old reply below this**\n\nJust noticed the version of the importer i was using was about 2 months old. lol. downloaded the new one (it said 2 hours ago at the original time of this post) but trying to figure it out since it\u0027s different ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) I was getting use to the manually editing code thing now I gotta figure out how to load my craft file, after i figure out the \u0022connect failed: No such file or directory\u0022 after starting blender.\n\nUpdate: Duh....look in the file menu under import AFTER enabling the new addon. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) Though I am getting this set of errors now (I\u0027m guessing maybe because of the connect failed when starting blender):\n\n    Traceback (most recent call last):  File \u0022/home/sma/blender-2.73a-linux-glibc211-x86_64/2.73/scripts/addons/io_kspblender-master/__init__.py\u0022, line 59, in execute    return import_craft.import_craft(self,context,**keywords)  File \u0022/home/sma/blender-2.73a-linux-glibc211-x86_64/2.73/scripts/addons/io_kspblender-master/import_craft.py\u0022, line 55, in import_craft    rightscale = right_scale.make()  File \u0022/home/sma/blender-2.73a-linux-glibc211-x86_64/2.73/scripts/addons/io_kspblender-master/right_scale.py\u0022, line 51, in make    right_scale[\u0027kethane.tank1mStandard\u0027] = mathutils.Vector((0.0125,0.0125,0.0125))NameError: name \u0027mathutils\u0027 is not definedlocation: :-1location: :-1\n\n**Edited \u003Ctime datetime=\u00222015-03-01T16:33:18Z\u0022 title=\u002203/01/2015 04:33  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 1, 2015\u003C/time\u003E by Sma**\n  \nAdded new traceback info"},{"CreatedByName":"esinohio","CreatedById":57681,"CreatedDateTime":"2015-03-01T15:28:47Z","Content":"This just keeps getting better and better..... I mean seriously! I\u0027m having waaaay to much fun with your Blender addon. Thanks a metric ton for your work on this one! If anything this is spurring me to learn more about Blender. Next comes digging out that animation information I see in the animated objects so I\u0027m not having to manually key frame everything.\n\nAlso a big thanks to you all who are getting those mods added to this addon."},{"CreatedByName":"manni01","CreatedById":109903,"CreatedDateTime":"2015-03-01T17:51:15Z","Content":"I really want to try this out, but I think the problem is something with the directory naming? I\u0027m using Mac OSX so, does this even work for my operating system.\n\nHere\u0027s the message I get when I try to import a craft:\n\n![fNzocRO.png](http://i.imgur.com/fNzocRO.png)\n\nPlease help. I really want to try this out. I installed the mu thing, and your addon. Enabled both, the only place I messed up is in the kspdir.txt naming"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-03-01T17:58:43Z","Content":"\u003E \n\u003E I really want to try this out, but I think the problem is something with the directory naming? I\u0027m using Mac OSX so, does this even work for my operating system.\n\u003E Here\u0027s the message I get when I try to import a craft:\n\u003E \n\u003E [http://i.imgur.com/fNzocRO.png](http://i.imgur.com/fNzocRO.png)\n\u003E \n\u003E Please help. I really want to try this out. I installed the mu thing, and your addon. Enabled both, the only place I messed up is in the kspdir.txt naming\n\nCheck out what I mentioned above. Mac and linux file systems are similar. It\u0027s mainly just changing tHe slashes from \\\\ to / (double not really needed with Linux apparently, as the double slash is used for es ape purposes I believe).\n\n**Edited \u003Ctime datetime=\u00222015-03-01T18:01:47Z\u0022 title=\u002203/01/2015 06:01  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 1, 2015\u003C/time\u003E by Sma**"},{"CreatedByName":"SpaceXray","CreatedById":113396,"CreatedDateTime":"2015-03-01T19:15:47Z","Content":"Firstly, great plugin! Here is my most detailed render yet:\n\n![Fs132bG.png](http://i.imgur.com/Fs132bG.png)\n\nFor some reason the Mk1 cockpit ladders aren\u0027t rendering, or is it just retractable ladder remains that cause issues ?\n\nAlso, how do you export the model together with textures so it shows up properly on Sketchfab?\n\nAll i get is a model without textures, can you provide a detailed tutorial and what Blender settings we need?\n\n\u003Ciframe width=\u0022640\u0022 height=\u0022480\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022\u0022\u003E\u003C/iframe\u003E\n\nAlso, where can we get good hdri\u0027s for backgrounds? Do you know any good repositories?"},{"CreatedByName":"manni01","CreatedById":109903,"CreatedDateTime":"2015-03-01T19:41:40Z","Content":"Ok, I\u0027ve retried this. I renamed some files and changed some text, and ended up with this:\n\n![cV3PTJg.png](http://i.imgur.com/cV3PTJg.png)"},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-03-01T20:14:59Z","Content":"\u003E \n\u003E Also, how do you export the model together with textures so it shows up properly on Sketchfab?\n\u003E \n\u003E All i get is a model without textures, can you provide a detailed tutorial and what Blender settings we need?\n\nI was going to look into this, but I hadn\u0027t noticed that apparently my blender files that I\u0027ve done so far from KSP are over 100mb, one is almost 500mb, and I can\u0027t upload that much with a free account LOL\n\n\u003E \n\u003E Also, where can we get good hdri\u0027s for backgrounds? Do you know any good repositories?\n\nNot entirely sure, but you can check out blender guru (on facebook and online). He might have a few HDRI\u0027s from some of the classes he does online. Usually you have to sign up to get them, but every now and then he releases some for free.\n\nAlso for those of you having trouble using blender, you may want to check out the blender guru youtube channel. There are a lot of good tutorials there with a lot of neat tips and ideas.\n\nOh, also for those that want their flags here is a little graphic I put together real quick that might help:\n\n![flagfix1.png](http://bowencustomcreations.com/kspPics/flagfix1.png)\n\n1. Right click on the flag until it is highlighted.\n2. Make sure you are on the texture tab.\n3. Expand the Surface menu if Necessary.\n4. Click the open file button and navigate to where your flag image is stored. Your flag should now be loaded.\n\n**Edited \u003Ctime datetime=\u00222015-03-01T20:32:32Z\u0022 title=\u002203/01/2015 08:32  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 1, 2015\u003C/time\u003E by Sma**"},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-03-01T21:03:19Z","Content":"\u003E \n\u003E Ok, I\u0027ve retried this. I renamed some files and changed some text, and ended up with this:\n\u003E [http://i.imgur.com/cV3PTJg.png](http://i.imgur.com/cV3PTJg.png)\n\nSorry about the Mar/Linux support! It\u0027s hard to develop for an OS I don\u0027t have ![;.;](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif).\n\nIt looks to me like there\u0027s still something wrong with the \u0027dir\u0027 variable in there. If you\u0027re using forward slashes, it only needs to be single slashes. Perhaps there\u0027s a trailing slash on \u0027dir\u0027 that screws things up because there\u0027s already one in \u0027/kspdir.txt.\u0027 I need to figure out a better way to make this cross-platform..."},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-03-01T21:22:18Z","Content":"Doing a little bit of debugging (assuming I was doing it right), I found the folder path that it\u0027s trying to use in my case, is \n\n    /home/sma/Desktop/Untitled Folder/Link to Kerbal Space Program/GameData/Squad/Parts/Command/Mk1-2Pod/model.mu\n\nIt seems it\u0027s inserting a carriage return (\\n) or space maybe. Although when I pasted it in here, it was right, but pasting it in a text editor, the KSP directory is on one line, and the gamedata is on another, and if i paste it to the address bar in my browser it puts a space between the two.\n\nThis is what i used to get the value of the variable it is using. This is for my error that says it can\u0027t find the Mark1-2Pod\n\n    print(ksp\u002Bpartdir[part.partName][0])\n\n- - - Updated - - -\n\n\u003E \n\u003E Sorry about the Mar/Linux support! It\u0027s hard to develop for an OS I don\u0027t have ![;.;](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif).\n\u003E It looks to me like there\u0027s still something wrong with the \u0027dir\u0027 variable in there. If you\u0027re using forward slashes, it only needs to be single slashes. Perhaps there\u0027s a trailing slash on \u0027dir\u0027 that screws things up because there\u0027s already one in \u0027/kspdir.txt.\u0027 I need to figure out a better way to make this cross-platform...\n\nLol, yeah I think you are right, though so far I haven\u0027t been able to crack it on this version. I was able to make it work on the 2 month old version though. It can be pretty tough I imagine. I\u0027ll have to play around with it a bit more later.\n\nThought I\u0027d share the error in screenshot form...\n\n![Screenshot%20from%202015-03-01%2016:29:52.png](http://bowencustomcreations.com/kspPics/Screenshot%20from%202015-03-01%2016:29:52.png)\n\nAnd a section of code I\u0027m using to get that debug info:\n\n    def import_parts(filepath):    dir = os.path.dirname(__file__)    partdir = part_dir.make()    rightscale = right_scale.make()    kspdirfile = open(dir\u002B\u0027/kspdir.txt\u0027)    ksp = kspdirfile.read()[B]    print (\u0022test\u0022)[/B][B]    print (dir)    print (\u0022Test1.5\u0022)    print (kspdirfile)    print (\u0022test2\u0022)    print (ksp)[/B][B]    print (\u0022test2\u0022)[/B]    for obj in bpy.context.scene.objects:        obj.select = False    craft = kspcraft(filepath)    print(craft.ship \u002B \u0027 ready for takeoff\\n\u0027)    print(str(craft.num_parts()) \u002B \u0027 parts found...\u0027)    partslist = craft.partslist    doneparts = {}                                                                                          # keep track of parts that have already been imported so I can save time    doneobj = set(bpy.data.objects)                                                                         # know which objects have gone through the cleaning process    scn = bpy.context.scene                                                                                 # the active scene    #cursor_loc = get_cursor_location()    #to_ground = partslist[0].pos[2]    for part in partslist:[B]        print(\u0022test3\u0022)[/B]        [B]print(ksp\u002Bpartdir[part.partName][0])[/B]\n\n**Edited \u003Ctime datetime=\u00222015-03-01T21:34:10Z\u0022 title=\u002203/01/2015 09:34  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 1, 2015\u003C/time\u003E by Sma**\n  \nreasons"},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-03-01T23:00:48Z","Content":"\u003E \n\u003E Doing a little bit of debugging (assuming I was doing it right), I found the folder path that it\u0027s trying to use in my case, is\n\u003E \n\u003E \n\u003E     /home/sma/Desktop/Untitled Folder/Link to Kerbal Space Program\n\u003E \n\u003E \n\u003E /GameData/Squad/Parts/Command/Mk1-2Pod/model.mu\n\u003E \n\u003E \n\u003E \n\u003E That\u0027s really where you have KSP installed? /home/Desktop/Untitled Folder/Link to Kerbal Space Program? You probably need to give it the folder of where that link is pointing.\n\u003E \n\u003E Also thanks for the debugging stuff. I\u0027ll look into a different way of getting the directory."},{"CreatedByName":"Sma","CreatedById":67377,"CreatedDateTime":"2015-03-01T23:04:28Z","Content":"\u003E \n\u003E That\u0027s really where you have KSP installed? /home/Desktop/Untitled Folder/Link to Kerbal Space Program? You probably need to give it the folder of where that link is pointing.\n\u003E Also thanks for the debugging stuff. I\u0027ll look into a different way of getting the directory.\n\nLol, yeh....copied it from the steam folder and just threw it there. Meant to move it to a specific folder but never got around to it....oh right I see what you mean, because of the symbolic link thing...yeh I\u0027ll look into that next time I\u0027m messing with it. yeh...i did not actually copy it from the steam folder lol guess ill try that and see if it helps.\n\nUpdate: Same error, but makes it much easier to read now lol /home/sma/ksp090 ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) much easier than the other one I had\n\n**Edited \u003Ctime datetime=\u00222015-03-01T23:20:48Z\u0022 title=\u002203/01/2015 11:20  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 1, 2015\u003C/time\u003E by Sma**"},{"CreatedByName":"Dasoccerguy","CreatedById":138528,"CreatedDateTime":"2015-03-01T23:27:52Z","Content":"\u003E \n\u003E Lol, yeh....copied it from the steam folder and just threw it there. Meant to move it to a specific folder but never got around to it....oh right I see what you mean, because of the symbolic link thing...yeh I\u0027ll look into that next time I\u0027m messing with it. yeh...i did not actually copy it from the steam folder lol guess ill try that and see if it helps.\n\u003E Update: Same error, but makes it much easier to read now lol /home/sma/ksp090 ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) much easier than the other one I had\n\nI made some minor updates to try to help you out. Redownload the addon and see if they make a difference. Sorry this is such a struggle."},{"CreatedByName":"Avalon304","CreatedById":68304,"CreatedDateTime":"2015-03-02T01:19:46Z","Content":"Downloded the new update... how do I run the script now and where do I place the craft file?"}]}