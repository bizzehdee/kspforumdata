{"TopicId":201437,"ForumId":69,"TopicTitle":"SPH-only memory leak?","CreatedByName":"dnbattley","CreatedById":176526,"CreatedDateTime":"2021-04-03T14:10:18Z","PageNum":1,"Articles":[{"CreatedByName":"dnbattley","CreatedById":176526,"CreatedDateTime":"2021-04-03T14:10:18Z","Content":"\n\u003Cp\u003E\nAs a long time player (since 1.0), I am aware of many memory leaks which have been reported over the years: some patched, some not.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, I have noticed a specific issue\u00A0which may (or may not!) help any dev\u0027s reading this, or at the very least may help to make life easier for some other players.\n\u003C/p\u003E\n\u003Cp\u003E\nThat realisation is that: the \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E (in the linux version [unmodded, but with all DLC]\u00A0in particular, but I suspect this is not just a linux issue) has a specific memory hole, and working in it too long will cause odd effects, and eventually failure.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s the bullet point rundown:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nHistorically I\u0027ve worked 99% of my time in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E. Couldn\u0027t ever really get the hang of the \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E controls.\n\u003C/li\u003E\n\u003Cli\u003E\nI\u0027ve spent many happy hours designing vessels. Some small, some large, and\u00A0very rarely encountered any issues.\n\u003C/li\u003E\n\u003Cli\u003E\nIn the last week I\u0027ve been working specifically on planes, in the \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E for extended periods of time.\n\u003C/li\u003E\n\u003Cli\u003E\nIn this time I have noticed a number of\u00A0issues: KAL not saving schemes when launching; in extreme cases being unable to launch or load other vessels. This does not seem to happen until I have been in the \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E for some time.\n\u003C/li\u003E\n\u003Cli\u003E\nThe biggest issue: after a long \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E session, closing down KSP seems to\u00A0take\u00A0a *very* long time (i.e. there is a large\u00A0pause between initiating closedown and the program fully terminating), compared to normal.\n\u003C/li\u003E\n\u003Cli\u003E\nHere\u0027s the oddest one: after working in the \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E, and starting to notice issues, I opened the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E (which took longer than normal), closing it immediately and then quit the game. Quitting after this procedure was very quick.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nThe weird thing is how this appears to be unique to the \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E, and potentially undone by switching to the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E. Is there something in those background\u00A0animations that is slowly but surely killing performance?\n\u003C/p\u003E\n\u003Cp\u003E\nI post this more as a discussion than a specific technical question (though if there were a solution I\u0027d love to hear it). If this is better suited to other forums please feel free to move it.\n\u003C/p\u003E\n"},{"CreatedByName":"Bej Kerman","CreatedById":182413,"CreatedDateTime":"2021-04-03T19:47:29Z","Content":"\n\u003Cp\u003E\nSpaghetti code.\n\u003C/p\u003E\n"},{"CreatedByName":"Rambow_Ninja94","CreatedById":210641,"CreatedDateTime":"2021-04-07T15:44:46Z","Content":"\n\u003Cp\u003E\nHmm,\u00A0\u003Cbr\u003E\nTry this.\u003Cbr\u003E\nDon\u0027t know if it works on Lynx\u003Cbr\u003E\nIt fixes about 95% of KSP memory leaks.\u003Cbr\u003E\nCheck task manager (or the lynx equivalent) and see the usage before and after.\u003Cbr\u003E\nAlternatively, it may just be a PC heat issue for being on the game for long periods of time.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022198624\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed8320791508\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/186052-ksp-172-incl-all-dlcs-ksp-memory-allocation-fix/\u0026amp;do=embed\u0022 style=\u0022height:195px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}