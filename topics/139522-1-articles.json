{"TopicId":139522,"ForumId":29,"TopicTitle":"How to move gizmo when moving a part","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-05-11T13:36:44Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-05-11T13:36:44Z","Content":"\n\u003Cp\u003E\nI\u0027m now successfully moving a part in the editor using keys instead of the gizmo arrows.\n\u003C/p\u003E\n\u003Cp\u003E\nIt seems that the gizmo position isn\u0027t being updated, so when you grab the part with the arrow, it jumps back to where the gizmo thinks it is.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m looking at the visible and hidden members of the GizmoOffset and GizmoOffsetHandle classes, but nothing seems obvious, except that there are a few functions which are totally hidden. \u00A0Maybe I\u0027m looking in the wrong place, anyone have any ideas what to change?\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-11T14:40:42Z","Content":"\n\u003Cp\u003E\nUnfortunately, the EditorLogic, GizmoXXX and GizmoXXXHandle classes are intricately interlinked, lots of the code concerned is private,\u00A0and there is no remotely easy way to do what you want. \u00A0I also want something similar as I would like to make Part Angle Display enable the rotation keys in rotate mode. \u00A0There were some potential changes on the table for 1.1 that would have made this easy so I never fully investigated whether it was actually possible to do it now via reflection or some other underhanded method. \u00A0However, those changes to KSP had to be postponed due to more serious issues that needed to be worked on.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-05-11T16:29:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222575138\u0022 data-ipsquote-contentid=\u0022139522\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462977642\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nUnfortunately, the EditorLogic, GizmoXXX and GizmoXXXHandle classes are intricately interlinked, lots of the code concerned is private,\u00A0and there is no remotely easy way to do what you want. \u00A0I also want something similar as I would like to make Part Angle Display enable the rotation keys in rotate mode. \u00A0There were some potential changes on the table for 1.1 that would have made this easy so I never fully investigated whether it was actually possible to do it now via reflection or some other underhanded method. \u00A0However, those changes to KSP had to be postponed due to more serious issues that needed to be worked on.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s sad.\n\u003C/p\u003E\n\u003Cp\u003E\nI wonder if I could force it by disabling and then reenabling the gizmo. \u00A0I saw that if I had moved the part with my own code while the offset gizmo was active, and then disabled and reenabled the gizmo, the position stayed, it only gets reset if the part is moved and then the gizmo is used.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-11T16:31:10Z","Content":"\n\u003Cp\u003E\nYes, that is one of the possibilities that I didn\u0027t bother to investigate (yet)...\n\u003C/p\u003E\n\u003Cp\u003E\nAnother is, for rotation anyway, that there is an event that can be fired when a part is rotated but I don\u0027t know if the GizmoXXXHandles will respond to it correctly. \u00A0There may be a similar event for translation.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-05-11T16:32:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222575365\u0022 data-ipsquote-contentid=\u0022139522\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462984270\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYes, that is one of the possibilities that I didn\u0027t bother to investigate (yet)...\n\u003C/p\u003E\n\u003Cp\u003E\nAnother is, for rotation anyway, that there is an event that can be fired when a part is rotated but I don\u0027t know if the GizmoXXXHandles will respond to it correctly. \u00A0There may be a similar event for translation.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat is that event, cause I was going to be working on rotation using keys next and would like to see if it works.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, would you know how to disable and enable a gizmo from code?\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-11T17:02:04Z","Content":"\n\u003Cp\u003E\nI don\u0027t have access to much stuff at the moment but I think this is probably the one...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(51,51,51);font-family:Consolas, \u0027Liberation Mono\u0027, Menlo, Courier, monospace;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:16.8px;text-indent:0px;text-transform:none;white-space:pre;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003EGameEvents.onEditorPartEvent.Fire(ConstructionEventType.PartRotated, part);\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-05-13T16:45:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222575414\u0022 data-ipsquote-contentid=\u0022139522\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462986124\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/11/2016 at 1:02 PM, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI don\u0027t have access to much stuff at the moment but I think this is probably the one...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(51,51,51);font-family:Consolas, \u0027Liberation Mono\u0027, Menlo, Courier, monospace;font-size:12px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:16.8px;text-indent:0px;text-transform:none;white-space:pre;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003EGameEvents.onEditorPartEvent.Fire(ConstructionEventType.PartRotated, part);\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0026amp;do=hovercard\u0022 data-mentionid=\u002297386\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0022 rel=\u0022\u0022\u003E@Padishar\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve figured out how to move the gizmos. \u00A0Once I get it finished, you can look at my code to see how it\u0027s done.\n\u003C/p\u003E\n\u003Cp\u003E\nWill be a couple of days, maybe, as I\u0027m busy with RL\n\u003C/p\u003E\n\u003Cp\u003E\nLGG\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-05-13T19:15:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222579521\u0022 data-ipsquote-contentid=\u0022139522\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221463157945\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0026amp;do=hovercard\u0022 data-mentionid=\u002297386\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0022 rel=\u0022\u0022\u003E@Padishar\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve figured out how to move the gizmos. \u00A0Once I get it finished, you can look at my code to see how it\u0027s done.\n\u003C/p\u003E\n\u003Cp\u003E\nWill be a couple of days, maybe, as I\u0027m busy with RL\n\u003C/p\u003E\n\u003Cp\u003E\nLGG\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0026amp;do=hovercard\u0022 data-mentionid=\u002297386\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0022 rel=\u0022\u0022\u003E@Padishar\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EI just released it, you can get the source from github\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EIt uses Reflection, you MUST use the offsets as I did so that you maintain compatibility with Linux and OSX. \u00A0I got scolded because I\u00A0was using names.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EKeep in mind that once you do this, your then has the possibility to not work on different releases. \u00A0I\u0027ve added code to EEX so that it just won\u0027t run on newer versions of KSP, this was done so that I wouldn\u0027t get flooded with bug reports every time a new version of KSP is released.\u003C/span\u003E\n\u003C/p\u003E\n"}]}