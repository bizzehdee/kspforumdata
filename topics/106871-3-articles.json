{"TopicId":106871,"ForumId":55,"TopicTitle":"New Heat System causes memory leak","CreatedByName":"teraflops","CreatedById":142710,"CreatedDateTime":"2015-05-02T14:18:51Z","PageNum":3,"Articles":[{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-08T11:53:04Z","Content":"They only start disabled if you mod your game, they are enabled but not active until you get hot enough, and the F10 toggle is not persistent at all."},{"CreatedByName":"Tripzter","CreatedById":75335,"CreatedDateTime":"2015-05-09T21:29:37Z","Content":"I\u0027m also having this problem.\n\nI7-4790k\n\n16gb ram\n\ngtx980\n\nwin 7\n\nNo mods.\n\nThe fact that the heat never goes down is a big problem because this breaks a lot of other things like the nuclear engine which is heating up my entire space craft.\n\n**Edited \u003Ctime datetime=\u00222015-05-09T22:46:34Z\u0022 title=\u002205/09/2015 10:46  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 9, 2015\u003C/time\u003E by Tripzter**"},{"CreatedByName":"The Pav","CreatedById":138747,"CreatedDateTime":"2015-05-11T02:10:22Z","Content":"So that\u0027s why I keep crashing.. ha. Far Interplanetary missions are now on hold. It was actually an absurdly BAD idea to introduce the heating without introducing the counter measure at the same time."},{"CreatedByName":"The Pav","CreatedById":138747,"CreatedDateTime":"2015-05-11T02:48:10Z","Content":"I don\u0027t get the heat gauges during reentry and everything is fine, however, any time I use an atomic rocket motor, they are on automatically and I\u0027m getting crashes."},{"CreatedByName":"Ebonwulf","CreatedById":117813,"CreatedDateTime":"2015-05-11T10:53:22Z","Content":"\u003E \n\u003E I recently flew a plane about 1/4 of the way around Kerbin. I never got very fast, I don\u0027t think I ever saw mach 1 in fact. Due to the hardcoding of the temp display to F10 (my \u0022record\u0022 key) I had the gauges on for the whole flight.\n\u003E I had the new non-retractable landing gear on the plane, and some time during the flight the temperature gauge popped up on them. 3 gauges, about halfway up. They also had a very light glow.\n\u003E \n\u003E After I landed, my Kerbal got out of the plane, took his surface science, and I recovered him. The game crashed. The log showed an OOM error.\n\u003E \n\u003E So at least in this case, high temperature or \u0022lots of gauges\u0022 was not the cause.\n\nSame issue here. However, I never landed as the fixed rear gear seems to have that issue any time that speeds exceed 260m/s for an extended time and didn\u0027t seem to disturb the performance and I thought the crashes were just KSP being KSP. However, the issue seems to be replicated pretty easily by building a basic jet with the fixed rear gear and the throttle maxed for an extended flight.\n\nRepeating portion of the log just before the game crashed due to OOM:\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\n[Experiments]: FX Modules set: 0\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\n[Experiments]: Setting FX Modules to 1...\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\n[PlanetariumCamera]: Focus: KSP Surveyor II\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\nManeuver Mode enabled\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\nCamera Mode: AUTO\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\nActive Vessel is in atmosphere. Cannot save.\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\nActive Vessel is in atmosphere. Cannot save.\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\nActive Vessel is in atmosphere. Cannot save.\n\n(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)\n\nDynamicHeapAllocator out of memory - Could not get memory for large allocationCould not allocate memory: System out of memory!\n\nTrying to allocate: 59004B with 4 alignment. MemoryLabel: Physics\n\nAllocation happend at: Line:97 in \n\nMemory overview\n\n[ ALLOC\\_DEFAULT ] used: 1240767441B | peak: 0B | reserved: 1414243522B \n\n[ ALLOC\\_GFX ] used: 480413441B | peak: 0B | reserved: 576143136B \n\n[ ALLOC\\_CACHEOBJECTS ] used: 68284B | peak: 0B | reserved: 12582912B \n\n[ ALLOC\\_TYPETREE ] used: 13172B | peak: 0B | reserved: 4194304B \n\n[ ALLOC\\_PROFILER ] used: 833436B | peak: 0B | reserved: 8388608B \n\nCould not allocate memory: System out of memory!\n\nTrying to allocate: 59004B with 4 alignment. MemoryLabel: Physics\n\nAllocation happend at: Line:97 in \n\nMemory overview"},{"CreatedByName":"MadCatCarter","CreatedById":134788,"CreatedDateTime":"2015-05-11T16:25:53Z","Content":"Same problem. Having to press f10 and disable a game function bit of a joke this many days in from last patch? Plz fix!"},{"CreatedByName":"Inglonias","CreatedById":2460,"CreatedDateTime":"2015-05-12T15:24:45Z","Content":"I just thought I\u0027d pop in to say that I\u0027ve tried KSP 1.0.2 on my desktop and I am still not having this issue. There\u0027s a small memory leak, but nothing serious.\n\nComputer stats:\n\nCPU: Intel i5 3570K\n\nGPU: GeForce GTX 670\n\nRAM: 16 GB"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-05-12T16:02:13Z","Content":"\u003E \n\u003E Same problem. Having to press f10 and disable a game function bit of a joke this many days in from last patch? Plz fix!\n\nYes, it\u0027s annoying. In the mean time there are a few simple mod options that turn it off as soon you enter the flight scene.\n\n[http://forum.kerbalspaceprogram.com/threads/120731](https://forum.kerbalspaceprogram.com/threads/120731)\n\n[http://forum.kerbalspaceprogram.com/threads/116034](https://forum.kerbalspaceprogram.com/threads/116034)"},{"CreatedByName":"TheMoonRover","CreatedById":136199,"CreatedDateTime":"2015-05-12T16:43:01Z","Content":"\u003E \n\u003E Here is a save file that should help to reproduce the crash reliably: A space plane on the start of a very shallow reentry that takes long enough to crash the game. Just keep the wings level with occasional roll inputs, and let it glide in on its own.\n\u003E [https://www.dropbox.com/s/xaa03wrt2cpeqtg/quicksave.sfs?dl=0](https://www.dropbox.com/s/xaa03wrt2cpeqtg/quicksave.sfs?dl=0)\n\nYeah, game crash at around 2 GB while flying over KSC (according to KSP debug menu)\n\nThat\u0027s the first time I\u0027ve managed to crash the game since I was playing 0.90 Windows 64.\n\nMods: KER (v1.0.16.6), HyperEdit (v1.4 hotfix 1), Distant Object Enhancement bis (v1.5.5) \u0026 RoverDude\u0027s Alcubierre Warp Drive (v0.2.0)\n\nIntel Core i3-3110M CPU (2.40GHz)\n\nIntel HD Graphics 4000\n\n4 GB RAM\n\nWindows 8.1 x64\n\nRelated Question: I assume the lower RAM usage on crash is due to the fact I only have 4 GB total. Am I correct?\n\nUnrelated Question: Is that above or below the recommended minimum specs? I don\u0027t know how to find them.\n\n**Edited \u003Ctime datetime=\u00222015-05-12T17:00:08Z\u0022 title=\u002205/12/2015 05:00  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 12, 2015\u003C/time\u003E by TheMoonRover**"},{"CreatedByName":"Carraux","CreatedById":60890,"CreatedDateTime":"2015-05-13T15:03:22Z","Content":"My installation even leaks memory with gauges turned off. Every time I launch a rocket, fly it to the edge of space and then restart to launchpad, the mem usage is higher than before.\n\nThe overall memory usage of KSP is and the way how KSP is using/managing memory is... well, I have no words for it...\n\n[sykrim uses \\*a little less\\* memory for \\*a little better\\* graphics...]"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-05-13T16:14:56Z","Content":"\u003E \n\u003E My installation even leaks memory with gauges turned off. Every time I launch a rocket, fly it to the edge of space and then restart to launchpad, the mem usage is higher than before.\n\u003E The overall memory usage of KSP is and the way how KSP is using/managing memory is... well, I have no words for it...\n\u003E \n\u003E [sykrim uses \\*a little less\\* memory for \\*a little better\\* graphics...]\n\nSince you won\u0027t directly say it I will.\n\nKSP\u0027s memory handling is garbage. The game is almost unplayable on a 32 bit system (not that anyone should be using a 32 bit OS) and there is ZERO good reason why it needs to load all its assets into memory on load. I also can\u0027t see the reason the game needs to make a memory grab while switching scenes.\n\nThere\u0027s a mod to force the game to load 1/16 res textures on everything until they are actually needed. Why is that not in stock? Only downside with that is Unity\u0027s texture loading an LoDs are choppy (compared to something like Unreal, which has a fade transition in there that makes it effectively imperceptible past initial texture load).\n\nApologies for derail, I get ranty when someone brings up memory usage (I should not have to force 64 bit on this game to load my graphical mods. 1. mem usage should not be this inefficient and 2. this game should have native 64 bit)"},{"CreatedByName":"Endersmens","CreatedById":80723,"CreatedDateTime":"2015-05-13T16:22:19Z","Content":"\u003E \n\u003E Since you won\u0027t directly say it I will.\n\u003E KSP\u0027s memory handling is garbage. The game is almost unplayable on a 32 bit system (not that anyone should be using a 32 bit OS) and there is ZERO good reason why it needs to load all its assets into memory on load. I also can\u0027t see the reason the game needs to make a memory grab while switching scenes.\n\u003E \n\u003E There\u0027s a mod to force the game to load 1/16 res textures on everything until they are actually needed. Why is that not in stock? Only downside with that is Unity\u0027s texture loading an LoDs are choppy (compared to something like Unreal, which has a fade transition in there that makes it effectively imperceptible past initial texture load).\n\u003E \n\u003E Apologies for derail, I get ranty when someone brings up memory usage (I should not have to force 64 bit on this game to load my graphical mods. 1. mem usage should not be this inefficient and 2. this game should have **native 64 bit**)\n\nbecause Unity 4. \n\nUnity 5 (which devs are looking into using for the game now) should bring native 64 bit. Hopefully this means multithreading, which means cores can be used, and also it should bring no memory cap."},{"CreatedByName":"J.Random","CreatedById":63332,"CreatedDateTime":"2015-05-13T16:43:17Z","Content":"\u003E \n\u003E native 64 bit. Hopefully this means multithreading\n\nIt doesn\u0027t."},{"CreatedByName":"dan2600","CreatedById":138534,"CreatedDateTime":"2015-05-14T01:32:36Z","Content":"I\u0027m going to try kerbal on linux, as i keep getting memory related crashes. I\u0027m curious if it\u0027s the fix-all-solution. Maybe the community should come up with a KerbalLinux Distro"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-14T09:03:22Z","Content":"I don\u0027t crash on Linux from this issue, memory use just peaks for me at 2.8gigs when the gauges are active.\n\nCan anyone on Windows please verify if this crash still occurs when PPFX edge highlighting is disabled and the heat gauges enabled."},{"CreatedByName":"TheMoonRover","CreatedById":136199,"CreatedDateTime":"2015-05-14T11:58:31Z","Content":"\u003E \n\u003E because Unity 4. \n\u003E Unity 5 (which devs are looking into using for the game now) should bring native 64 bit. Hopefully this means multithreading, which means cores can be used, and also it should bring no memory cap.\n\nKSP is already multi-threaded, and always has been. That\u0027s not the same as being 64-bit. KSP can only run on one core, but for most people the limiting factor is that the Physics engine can only run on a single thread of a single core.\n\nUnity 5 should allow the game to use all the available cores, and supports multi-threaded (but single core) physics, which would mean an improvement for pretty much any computer setup, and a huge improvement for anyone with an i3 or equivalent processor (or higher), provided that the dev-team are skilled enough."},{"CreatedByName":"AlmostDifferent","CreatedById":20553,"CreatedDateTime":"2015-05-14T12:14:31Z","Content":"\u003E \n\u003E Can anyone on Windows please verify if this crash still occurs when PPFX edge highlighting is disabled and the heat gauges enabled.\n\nWhile I said in an [earlier post](https://forum.kerbalspaceprogram.com/threads/118658-New-Heat-System-causes-memory-leak?p=1914848\u0026viewfull=1#post1914848) that a smaller leak seems to exist even with PPFX off, that turned out to be wrong. Memory was increasing slowly, but apparently due to something else.\n\nPrompted by your request, I did some more tests with a stationary contraption ([craft file](https://www.dropbox.com/s/ssjn73um6axob5x/Bug%20Tester.craft?dl=0)) that I left running on infinite fuel, and found no leak with PPFX off.\n\nI also found something else: When PPFX are off at the time the flight scene is loaded, and turned on afterward (i.e. during flight), the leak doesn\u0027t seem to happen either, despite the craft being all glowy. It only happens when PPFX are on while switching to the flight scene.\n\nMy specs:\n\nAMD FX-6300 (6x3.5 Ghz)\n\nGeForce GTS 450 (1 GB VRAM)\n\n16 GB RAM\n\nWindows 7 x64\n\n**Edited \u003Ctime datetime=\u00222015-05-14T12:20:20Z\u0022 title=\u002205/14/2015 12:20  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 14, 2015\u003C/time\u003E by AlmostDifferent**\n  \nAdded specs"},{"CreatedByName":"Ethanadams","CreatedById":136913,"CreatedDateTime":"2015-05-14T12:22:41Z","Content":"The gauges don\u0027t cause me a memory leak why I have like the most crappyiest computers"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-14T12:24:51Z","Content":"That\u0027s useful to know AlmostDifferent thank you, also the memory use will go up because the PQS terrain buffer cache is populated as you fly around, Ethanadams is your PC old enough that PPFX isn\u0027t supported?"},{"CreatedByName":"AlmostDifferent","CreatedById":20553,"CreatedDateTime":"2015-05-14T12:41:26Z","Content":"\u003E \n\u003E That\u0027s useful to know AlmostDifferent thank you, also the memory use will go up because the PQS terrain buffer cache is populated as you fly around\n\nYeah, I should have done a stationary test case right away, sorry about that. Was too busy trying all the new things at that time, I guess. And too hyped to think straight ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"dan2600","CreatedById":138534,"CreatedDateTime":"2015-05-14T17:38:50Z","Content":"Just installed Kerbal on SteamOS linux. Added the command to run it in 64 bit mode.\n\ncopied over my save and mods directly from my windows install. \n\nWas able to play 3\u002B hours with lots of scene changes and no crash (quit on my own accord) had many mods on and never turned off temp gaduges. Never could play more than 45-1hour on windows (depending on number of scene changes)\n\noverall higher framerates, I got a few weird full screen artifacting happen a few times (same that has happened to me when trying to play on OSX), but it went away.\n\nI\u0027m going to write a guide how to install dual-boot steamOS and install kerbal wtih mods, it seems like the best solution for crashing for players who play with mods.\n\nthe new solution to crashing kerbal: \u0022PLAY ON LINUX\u0022\n\n**Edited \u003Ctime datetime=\u00222015-05-14T17:41:46Z\u0022 title=\u002205/14/2015 05:41  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 14, 2015\u003C/time\u003E by dan2600**"},{"CreatedByName":"Insane1","CreatedById":139874,"CreatedDateTime":"2015-05-16T19:15:53Z","Content":"One more thing, when switching in \u0022Map View\u0022 mode, leaking stops. = )"},{"CreatedByName":"Aghanim","CreatedById":76587,"CreatedDateTime":"2015-05-18T11:15:28Z","Content":"\u003E \n\u003E Just installed Kerbal on SteamOS linux. Added the command to run it in 64 bit mode.\n\u003E copied over my save and mods directly from my windows install. \n\u003E \n\u003E Was able to play 3\u002B hours with lots of scene changes and no crash (quit on my own accord) had many mods on and never turned off temp gaduges. Never could play more than 45-1hour on windows (depending on number of scene changes)\n\u003E \n\u003E overall higher framerates, I got a few weird full screen artifacting happen a few times (same that has happened to me when trying to play on OSX), but it went away.\n\u003E \n\u003E I\u0027m going to write a guide how to install dual-boot steamOS and install kerbal wtih mods, it seems like the best solution for crashing for players who play with mods.\n\u003E \n\u003E the new solution to crashing kerbal: \u0022PLAY ON LINUX\u0022\n\nI hate to say this but:\n\n![ysgHDzq.png](http://i.imgur.com/ysgHDzq.png)\n\nNope! Until Squad fixes the heat bug Linux and several GB of RAM won\u0027t save you"},{"CreatedByName":"BFalcon","CreatedById":57238,"CreatedDateTime":"2015-05-19T13:42:00Z","Content":"Just ran into this bug myself for the first time - doesn\u0027t take long either - same craft keeps crashing the game on re-entry - the landing struts are overheating, but otherwise OK. Gets to the point where they\u0027re cooling down and boom, crashed game.\n\nOnly seems to happen with the 1-2 command module though - game\u0027s been rock solid for me up until then... just this one ship that seems to be causing it.\n\nA real pain, since I\u0027ve just rescued the crew and science data off a stranded ship and need to get it landed to reclaim that science and my kerbals.\n\nEdit: Sorry, this was the Windows version - Windows 7 x64, not that it matters.\n\n- - - Updated - - -\n\nOK, just tried it again without the heat overlay and I can confirm that it was, if not the only bug, a major contributor to the problem - crew is now safely landed and the science being processed."},{"CreatedByName":"Volix","CreatedById":144192,"CreatedDateTime":"2015-05-20T17:08:28Z","Content":"\u003E \n\u003E Prompted by your request, I did some more tests with a stationary contraption ([craft file](https://www.dropbox.com/s/ssjn73um6axob5x/Bug%20Tester.craft?dl=0)) that I left running on infinite fuel, and found no leak with PPFX off.\n\nThanks for doing that, have some rep! I was crashing after ~1 minute of heat gauges showing. With PPFX off I just ran a test with a simple plane, infinite fuel and ignore max temp. Flew at 1400 m/s below 20k for over 10 minutes. Every part had its gauge maxed red, but no crash.\n\nA side effect, made it across the ocean to the main content and got to explore that river canyon. So many neat things to see on Kerbin if you have the patience to get there."}]}