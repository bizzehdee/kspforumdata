{"TopicId":43707,"ForumId":34,"TopicTitle":"kOS Scriptable Autopilot System 0.9","CreatedByName":"KevinLaity","CreatedById":68050,"CreatedDateTime":"2013-08-24T14:28:17Z","PageNum":20,"Articles":[{"CreatedByName":"Secret Squirrel","CreatedById":69453,"CreatedDateTime":"2013-09-06T03:28:12Z","Content":"\n\u003Cp\u003Ejust picked this up the other day, messed around with it, now I can launch 2 kerbal X into stable orbit AT ONCE!!! This is awesome.\u003C/p\u003E\n"},{"CreatedByName":"kilman54","CreatedById":63786,"CreatedDateTime":"2013-09-06T03:35:29Z","Content":"\n\u003Cp\u003EI froze KSP! I tested it and it will freeze a fresh kOS. This should give a Syntax error.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESet DirectionX to R(100,100,100.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Erazark, I had the same problem when creating programs to use as resusable functions. It isn\u0027t just THROTTLE or STEERING, it is other LOCK variables as well.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ECode example 1: Only THROTTLE lock inherits from parent\u003Cbr\u003E\u003Cbr\u003ESet x to 1.\u003Cbr\u003Elock throttle to x. \t\t// causes throttle to 100%\u003Cbr\u003Elock y to x.\u003Cbr\u003Erun ProgA. \u003Cbr\u003E\tset x to 0.5. \t\t// throttles down to 50%.\u003Cbr\u003E\tprint y. \t\t// prints \u00221\u0022 not \u00220.5\u0022 as expected\u003Cbr\u003E\tprint throttle. \t//prints \u00220.5\u0022 as expected\u003Cbr\u003EProgram Ended.\u003Cbr\u003Eprint y. \t\t\t// prints 0.5 as expected\u003Cbr\u003E\t\t\t\t//throttle remains at 50%\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI am thinking that THROTTLE is passed as a reference (pointer) and easily inherits the LOCK from the parent program (or kOS console). Other LOCK variables are passed as a value instead of a reference. Once out of the program, the LOCK returns to normal in the parent that originally LOCKed the variable.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ECode example 2: No lock inherits from child\u003Cbr\u003Erun ProgB.\u003Cbr\u003E\tSet x to 1.\u003Cbr\u003E\tLOCK THrottle to x. \t//Throttle to 100%\u003Cbr\u003E\tLOCK y to x.\u003Cbr\u003E\trun ProgC.\u003Cbr\u003E\t\tset x to 0.5.\t//Throttle to 50%\u003Cbr\u003E\t\tprint y.\t//Prints 1 - expected 0.5\u003Cbr\u003E\tProgram Ended.\u003Cbr\u003E\tprint y.\t\t//prints 0.5 as expected\u003Cbr\u003EProgram Ended.\u003Cbr\u003E\t\t\t\t//Throttle value remains 1 but returns to 0%\u003Cbr\u003Eset x to 0.75.\t\t\t// Throttle remains at 0%.\u003Cbr\u003Eprint y.\t\t\t//prints 0.5 - expected 0.75.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt appears that LOCKs made in a child program are converted to SET variables when it returns to the parent program (or console).\u003C/p\u003E\n"},{"CreatedByName":"meve12","CreatedById":65193,"CreatedDateTime":"2013-09-06T03:58:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022meve12\u0022 data-cite=\u0022meve12\u0022\u003E\u003Cdiv\u003EMaybe you could start with the terminal\u0027s ID number, then add to it for root parts?\u003Cp\u003EThis would also mean you could run two terminals without interfering with each other\u0027s parts.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis was my suggestion for saveable bus parts, but it got buried without being replied to.\u003C/p\u003E\n"},{"CreatedByName":"jsalexan","CreatedById":78290,"CreatedDateTime":"2013-09-06T04:22:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KevinLaity\u0022 data-cite=\u0022KevinLaity\u0022\u003E\u003Cdiv\u003EWe\u0027re definitely on the right track with this. But I want to have a part-registration model where parts register themselves with kOS. \u003Cp\u003EI think there\u0027s a few benefits to that:\u003C/p\u003E\u003Cp\u003E- LIST PARTS can be made list only the kOS compatible parts\u003C/p\u003E\u003Cp\u003E- I can then easily address individual parts\u003C/p\u003E\u003Cp\u003E- The mod developer can decide exactly what messages to get\u003C/p\u003E\u003Cp\u003E- We can potentially offer bindings that work with SET, PRINT etc\u003C/p\u003E\u003Cp\u003E- We can potentially give mod developers the ability to come up with their own commands.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI like the idea of registering with KOS but it may be a more interesting ride than you might think.\u003C/p\u003E\u003Cp\u003EI\u0027ve taken apart enough of Infernal Robotics (to use my favorite example) to know that it maintains its own internal list of parts that it uses for its servo groupings.\u003C/p\u003E\u003Cp\u003EWhen you click a GUI element the event goes to the DLL which looks up the parts and starts a physics change on each one of them.\u003C/p\u003E\u003Cp\u003EIt\u0027s pretty slick and perhaps some of the coding techniques can be borrowed for this project as well, perhaps store a master list of API functions in a list alongside the actual method calls and part IDs.\u003C/p\u003E\u003Cp\u003EThe gotcha with addressing parts individually is that sometimes you want to address more than one part at once\u003C/p\u003E\u003Cp\u003EThe gotcha with SendMessage is that it\u0027s a broadcast over the entire gameobject, so technically all parts will \u0022listen\u0022 to a sent message but only the ones that implement a given method will actually do anything about it.\u003C/p\u003E\u003Cp\u003EThe reason for all this foofaraw is that IR, for all its ability, stores its own part grouping independent of the game. To my knowledge IR is the only mod that does things this way but it\u0027s an interesting approach that addresses a lot of limitations in the core game and more mod authors may pick up on it if there is sufficient complexity in their mod that they need it.\u003C/p\u003E\u003Cp\u003EIR Servo Groups are different than KSP Action Groups and are only addressable via the IR plugin DLL method calls that every part instantiates.\u003C/p\u003E\u003Cp\u003EIt may be possible to just enumerate the parts and then get the methods off each part and then call the individual parts to get the rest of it and build a tree internal to KOS. I\u0027ll have to do some playing on that one.\u003C/p\u003E\n"},{"CreatedByName":"Mykul","CreatedById":81668,"CreatedDateTime":"2013-09-06T05:31:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022razark\u0022 data-cite=\u0022razark\u0022\u003E\u003Cdiv\u003EYou can, but I was having problems with it.\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022razark\u0022 data-cite=\u0022razark\u0022\u003E\u003Cdiv\u003EIf I run a program from inside another program, the steering and throttle commands don\u0027t seem to respond.\u003Cp\u003EFor example:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E//Program1\u003Cbr\u003E...\u003Cbr\u003EIF [i]condition[/i] { RUN [i]program2[/i]. }.\u003Cbr\u003E...\u003Cbr\u003E//End Program1\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E//Program2\u003Cbr\u003E...\u003Cbr\u003EPRINT \u0022Prograde\u0022.\u003Cbr\u003ELOCK STEERING TO PROGRADE.\u003Cbr\u003ELOCK THROTTLE TO 1.\u003Cbr\u003EPRINT \u0022Burning.\u0022.\u003Cbr\u003E...\u003Cbr\u003E//End Program2\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhen \u003Cem\u003Econdition\u003C/em\u003E is met, \u003Cem\u003Eprogram2\u003C/em\u003E runs. It will print \u0022Prograde\u0022, but the ship never turns. Likewise, the \u0022Burning\u0022 message is printed, but the throttle never activates. SAS is off. I\u0027m trying to set up a menu system, and I\u0027d rather not stick all my code into one program. Any ideas?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EProgram runs fine on it\u0027s own, but steering and throttle commands have no result when run from another program.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI noticed that steering and throttle don\u0027t cooperate with me unless I have them in lowercase. You might try that.\u003C/p\u003E\n"},{"CreatedByName":"Kainne","CreatedById":79879,"CreatedDateTime":"2013-09-06T07:09:38Z","Content":"\n\u003Cp\u003EI\u0027ve been working on a reentry program for my shuttle and come to find out that the longitude coordinates don\u0027t make sense. I can do one orbit, and they kind of correspond to the coordinates displayed by MechJeb or the Kethane grid, but recently discovered that it jumps from -74 degrees to 298 degrees, and then counts up into the 400s where it jumps back down to something else. \u003C/p\u003E\u003Cp\u003ESince I\u0027m trying to coordinate a reentry program based on ground coordinates, it would be nice to have them stay the same throughout a flight. I don\u0027t mean to be overly critical, I just wanted to see if there was anything I had missed, or if this is a feature that has yet to be fully developed. I can\u0027t tell you how much I love this mod. It has enabled me to create programs that get asymmetrical shuttles into orbit and (occasionally) get shuttles back to the runway with extreme accuracy.\u003C/p\u003E\n"},{"CreatedByName":"Arno Nyhm","CreatedById":80113,"CreatedDateTime":"2013-09-06T08:33:10Z","Content":"\n\u003Cp\u003EI would definitely like kOS to be able to interact with MechJeb. Would be really nice to launch a LazTek Falcon and to let the spent stages return to KSC on their own, while taking care of the payload. Unload-distance should be no matter, as this is taken care for by another plugin (\u003Ca href=\u0022http://kerbalspaceprogram.com/tt-neverunload/\u0022 rel=\u0022external nofollow\u0022\u003ETT NeverUnload\u003C/a\u003E).\u003C/p\u003E\u003Cp\u003EGreetz\u003C/p\u003E\u003Cp\u003EAN\u003C/p\u003E\n"},{"CreatedByName":"razark","CreatedById":32993,"CreatedDateTime":"2013-09-06T11:22:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Mykul\u0022 data-cite=\u0022Mykul\u0022\u003E\u003Cdiv\u003EI noticed that steering and throttle don\u0027t cooperate with me unless I have them in lowercase. You might try that.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s not the capitalization. Note the part that said \u0022Program runs fine on it\u0027s own...\u0022. The code is actually lowercase.\u003C/p\u003E\n"},{"CreatedByName":"Mykul","CreatedById":81668,"CreatedDateTime":"2013-09-06T12:06:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022razark\u0022 data-cite=\u0022razark\u0022\u003E\u003Cdiv\u003EIt\u0027s not the capitalization. Note the part that said \u0022Program runs fine on it\u0027s own...\u0022. The code is actually lowercase.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAhh, my mistake. Guess that\u0027s what I get for skimming over the post.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T17:02:05Z","Content":"\n\u003Cp\u003EJust started playing with this. It\u0027s neat. I like the idea. \u003C/p\u003E\u003Cp\u003EBut. There are some things that really can be irritating:\u003C/p\u003E\u003Cp\u003E1 - Why can\u0027t we edit with our own text editor? There are lots of programming editors out there that are really good. Lacking their features can be really annoying once code gets longer. It would be nice if there was just a way to access the programs as raw text files and edit them behind the scenes with whatever tool we want. Me, I\u0027m really old-school and use \u0022vi\u0022, but to each his own. But the point is, let us pick.\u003C/p\u003E\u003Cp\u003E2 - The picky nerd in me really rankles at referring to scalar speed as \u0022velocity\u0022. Velocity is a term that physicists use ONLY when talking about a vector. When the directional information is removed, then it\u0027s called just \u0022speed\u0022. In this game, the *actual* velocity is VELOCITY * PROGRADE. (Scalar speed times the prograde direction to get the velocity vector.) Please consider calling it just \u0022speed\u0022 to avoid confusion. The longer you wait to do this the harder it will be to make the change because people will be mad that their scripts broke.\u003C/p\u003E\u003Cp\u003E3 - Are there comments in the syntax? If not there really should be. I tried \u0022//\u0022 because some of the examples in the readme appear to be using that, but it doesn\u0027t seem to work and registers as a syntax error.\u003C/p\u003E\u003Cp\u003E4 - Consider an alternative to the WHEN statement that actually re-executes the section every single time the condition happens in the checking cycle, effectively turning the body into an infinite loop with an if condition at the top. This would feel a lot like how event handling works in many languages. In fact I thought this is what WHEN did until I found out the hard way it only executes once. It seems to set up a watch for a condition, and then immediately unregister it after it triggers. Perhaps the new statement could be called the WHENEVER statement. \u003C/p\u003E\u003Cp\u003EThe way it works now it\u0027s impossible to set up a check to re-trigger continually as long as a condition is true, since that would mean having to contain the body of the WHEN statement inside the body of the WHEN statement.\u003C/p\u003E\u003Cp\u003E5. Consider WHEN conditions that get to live on past the end of the current program file. Since program files are the only way to effectively name subroutines, and since WHEN conditions do not fire once the program is terminated, it\u0027s not possible right now to make a named routine that sets up a condition to trigger. It would be nice to be able to, say, set up a routine to trigger when the altitude is low, and then turn it on with: \u0022IF blah THEN RUN STARTLOWALTITUDEWATCHER.\u0022. But right now that doesn\u0027t work because when STARTLOWALTITUDEWATCHER finishes executing, all the WHEN conditions it set up go away.\u003C/p\u003E\u003Cp\u003E6. Is it possible to activate the editor somehow inside the VAB? Right now all the code has to be typed out in the launchpad and that can be a problem when you have a battery operated kOS needing solar power and it\u0027s night. It seems really odd to be unable to write code for the computer for a vehicle until it\u0027s on the launchpad.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T17:20:22Z","Content":"\n\u003Cp\u003EWhat\u0027s the point of the \u0022volumes\u0022 when the only one that actually gets saved is \u0022archive\u0022? I don\u0027t get what the volumes are for since you have to reload programs into them each time to do a new launch.\u003C/p\u003E\n"},{"CreatedByName":"jsalexan","CreatedById":78290,"CreatedDateTime":"2013-09-06T17:35:01Z","Content":"\n\u003Cp\u003EI\u0027m brainstorming and trying to discover avenues that can be explored that will meet as many of the possible use cases KOS could run into.\u003C/p\u003E\u003Cp\u003EHere\u0027s what I\u0027ve dreamed up so far, it\u0027s loosely based on a couple of networking protocols like IPX and TCP/IP and how a OBDII car network works (including OnStar or alarm gateway to an outside controller if you\u0027re into that).\u003C/p\u003E\u003Cp\u003EKOS-NET Protocol \u0026lt;-- Right amount of description, probably not kerbal enough but will do for a working name until somebody comes up with something better.\u003C/p\u003E\u003Cp\u003EDefinition/Specifications \u003C/p\u003E\u003Cp\u003EVersion 0.00a\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003ESupports network, part group, part class, individual part and method registration via broadcast to all KOS enabled parts inside the current vehicle.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EEvery KOS part has the capability to be a network client and controller in one, that way if two vehicles are created from one and they both have KOS on board, they both will have a viable network.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESupports basic stock part class integration - possible inheritance based new part class that would act as a drop-in replacement for existing part classes to add KOS support. Template for other authors?\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EMost users aren\u0027t going to be interested in addressing every docking light of their orbital shipyard individually. They\u0027re likely to be interested in addressing things as definable groups or by type.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EGrouping and naming of individual parts in the VAB/SPH that stamps a field containing the group name onto the part instance - is this possible?\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESupports rudimentary routing between different vehicles via doing a sendmessage to another vessel if somebody wants to write the distance/time delayed router code.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EStock and stock derived parts wouldn\u0027t have the full KOS functionality but there\u0027s no reason they couldn\u0027t be made to work.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EBroadcast network simulated via Sendmessage is still the most viable message passing protocol because it just sends to all parts and doesn\u0027t care about things like part IDs.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EEvery part with public methods already supports sendmessage so less work is required to get things talking and more can be done to figure out what they need to talk about.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EWhen KOS boots up or on part dock/detach/stage, it would broadcast a registration command to all parts inside the current vessel ID, they would respond with their payload including vessel ID.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ESupports remote part discovery because the discovery command contains the originating network for the discovery request. Once routing is working, the rest falls into place.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EKOS enabled parts register themselves by class, group name, name they\u0027d respond to, type and method calls available (DHCP/DNS analogues) every time a network init broadcast is detected\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThis network model sidesteps the issues with traversing the entire part tree every time you need to refresh the parts list and the parts list being essentially a list of random IDs.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EInternet-like resiliency to the vehicle network so when bits are docked or fall off (on purpose or accidently) the network can reshape dynamically without a lot of overhead.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T18:30:31Z","Content":"\n\u003Cp\u003EI get an error on line 21 of this code. Why? As far as I can tell everything is correct. \u003C/p\u003E\u003Cp\u003EThe only thing I could think of is if there is some odd reason that nesting an UNTIL inside a WHEN is not allowed. But I can\u0027t see why that would be the case.\u003C/p\u003E\u003Cp\u003EBefore you say it, obviously the text that says \u0022// SYNTAX ERROR IS HERE. THIS IS LINE 21.\u0022 was not originally in the code. Don\u0027t cite that as the reason for the error. I added that to show where the line is in this forum.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPRINT \u0022HOVER ACTIVATED. \u0022.\u003Cbr\u003EPRINT \u0022WILL TRIGGER WHEN GROUND IS NEAR.\u0022.\u003Cbr\u003EPRINT \u0022YOU MUST APPROACH GROUND GENTLY ENOUGH \u0022.\u003Cbr\u003EPRINT \u0022FOR YOUR TWR TO KILL FALlING SPEED.\u0022.\u003Cbr\u003EPRINT \u0022THE APPROACH ABOVE 200 METERS IS NOT \u0022.\u003Cbr\u003EPRINT \u0022HOVER\u0027S RESPONSIBILITY.\u0022.\u003Cbr\u003E\u003Cbr\u003ESET COMMENT TO \u0022ALT:RADAR IS -1 WHEN TOO HIGH \u0022.\u003Cbr\u003ESET COMMENT TO \u0022FOR RADAR TO WORK\u0022.\u003Cbr\u003E\u003Cbr\u003EWHEN ALT:RADAR \u0026gt; 5 AND ALT:RADAR \u0026lt; 200 THEN\u003Cbr\u003E{\u003Cbr\u003E  PRINT \u0022SLOWING DESCENT.\u0022.\u003Cbr\u003E  LOCK STEERING TO RETROGRADE.\u003Cbr\u003E  UNTIL ALT:RADAR \u0026lt;= 5\u003Cbr\u003E  {\u003Cbr\u003E    IF VELOCITY \u0026gt; ALT:RADAR/5.0\u003Cbr\u003E      LOCK THROTTLE TO THROTTLE \u002B 0.05 .\u003Cbr\u003E    IF VELOCITY \u0026lt;= ALT:RADAR/5.0\u003Cbr\u003E      LOCK THROTTLE TO THROTTLE - 0.05 .\u003Cbr\u003E  }.\u003Cbr\u003E}. // SYNTAX ERROR IS HERE.  THIS IS LINE 21.\u003Cbr\u003E\u003Cbr\u003EWHEN ALT:RADAR \u0026gt; 0 AND ALT:RADAR \u0026lt;= 5 THEN\u003Cbr\u003E{\u003Cbr\u003E  PRINT \u0022HOVERING.\u0022.\u003Cbr\u003E  UNTIL ALT:RADAR \u0026gt;= 0 AND ALT:RADAR \u0026lt;= 1\u003Cbr\u003E  {\u003Cbr\u003E    IF VERTICALSPEED \u0026lt; 0\u003Cbr\u003E    {\u003Cbr\u003E      LOCK STEERING TO RETROGRADE.\u003Cbr\u003E      LOCK THROTTLE TO THROTTLE \u002B 0.05 .\u003Cbr\u003E    }.\u003Cbr\u003E    IF VERTICALSPEED \u0026gt; 0\u003Cbr\u003E    {\u003Cbr\u003E      LOCK STEERING TO PROGRADE.\u003Cbr\u003E      LOCK THROTTLE TO THROTTLE - 0.05 .\u003Cbr\u003E    }.\u003Cbr\u003E  }.\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003EUNTIL ALT:RADAR \u0026gt;= 0 AND ALT:RADAR \u0026lt;= 1\u003Cbr\u003E{\u003Cbr\u003E   PRINT \u0022NOT ACTIVE YET.\u0022.\u003Cbr\u003E}.\u003Cbr\u003EPRINT \u0022DONE.\u0022.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-06T18:32:39Z\u0022 title=\u002209/06/2013 06:32  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 6, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"melak47","CreatedById":49055,"CreatedDateTime":"2013-09-06T18:53:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EJust started playing with this. It\u0027s neat. I like the idea. \u003Cp\u003EBut. There are some things that really can be irritating:\u003C/p\u003E\u003Cp\u003E1 - Why can\u0027t we edit with our own text editor? There are lots of programming editors out there that are really good. Lacking their features can be really annoying once code gets longer. It would be nice if there was just a way to access the programs as raw text files and edit them behind the scenes with whatever tool we want. Me, I\u0027m really old-school and use \u0022vi\u0022, but to each his own. But the point is, let us pick.\u003C/p\u003E\u003Cp\u003E2 - The picky nerd in me really rankles at referring to scalar speed as \u0022velocity\u0022. Velocity is a term that physicists use ONLY when talking about a vector. When the directional information is removed, then it\u0027s called just \u0022speed\u0022. In this game, the *actual* velocity is VELOCITY * PROGRADE. (Scalar speed times the prograde direction to get the velocity vector.) Please consider calling it just \u0022speed\u0022 to avoid confusion. The longer you wait to do this the harder it will be to make the change because people will be mad that their scripts broke.\u003C/p\u003E\u003Cp\u003E3 - Are there comments in the syntax? If not there really should be. I tried \u0022//\u0022 because some of the examples in the readme appear to be using that, but it doesn\u0027t seem to work and registers as a syntax error.\u003C/p\u003E\u003Cp\u003E4 - Consider an alternative to the WHEN statement that actually re-executes the section every single time the condition happens in the checking cycle, effectively turning the body into an infinite loop with an if condition at the top. This would feel a lot like how event handling works in many languages. In fact I thought this is what WHEN did until I found out the hard way it only executes once. It seems to set up a watch for a condition, and then immediately unregister it after it triggers. Perhaps the new statement could be called the WHENEVER statement. \u003C/p\u003E\u003Cp\u003EThe way it works now it\u0027s impossible to set up a check to re-trigger continually as long as a condition is true, since that would mean having to contain the body of the WHEN statement inside the body of the WHEN statement.\u003C/p\u003E\u003Cp\u003E5. Consider WHEN conditions that get to live on past the end of the current program file. Since program files are the only way to effectively name subroutines, and since WHEN conditions do not fire once the program is terminated, it\u0027s not possible right now to make a named routine that sets up a condition to trigger. It would be nice to be able to, say, set up a routine to trigger when the altitude is low, and then turn it on with: \u0022IF blah THEN RUN STARTLOWALTITUDEWATCHER.\u0022. But right now that doesn\u0027t work because when STARTLOWALTITUDEWATCHER finishes executing, all the WHEN conditions it set up go away.\u003C/p\u003E\u003Cp\u003E6. Is it possible to activate the editor somehow inside the VAB? Right now all the code has to be typed out in the launchpad and that can be a problem when you have a battery operated kOS needing solar power and it\u0027s night. It seems really odd to be unable to write code for the computer for a vehicle until it\u0027s on the launchpad.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E1: you *can* edit files in the archive with any editor you like.\u003C/p\u003E\u003Cp\u003E2: velocity *is* a vector.\u003C/p\u003E\u003Cp\u003E6: you could add a new program to the archive folder before launch with your text editor of choice\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T19:01:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022melak47\u0022 data-cite=\u0022melak47\u0022\u003E\u003Cdiv\u003E1: you *can* edit files in the archive with any editor you like.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI tried. I got \u0022unrecognized term \u0027\u0027. \u0022 (that\u0027s two single-tick quotes with no string between them. The program is complaining that it doesn\u0027t recognize a zero-length term that\u0027s \u0022in\u0022 my file. how Zen. All files \u0022contain\u0022 zero length strings. An infinite number of them in fact. I have no idea what triggered this but it appeared after trying to use simple TextEdit on the achive file.)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E2: velocity *is* a vector.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThen the readme file should be updated to show this. There\u0027s a section with the vectors listed and Velocity isn\u0027t one of them.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E6: you could add a new program to the archive folder before launch with your text editor of choice\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s not ideal but it works. It just doesn\u0027t allow syntax checking until on the launchpad.\u003C/p\u003E\n"},{"CreatedByName":"melak47","CreatedById":49055,"CreatedDateTime":"2013-09-06T19:19:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI tried. I got \u0022unrecognized term \u0027\u0027. \u0022 (that\u0027s two single-tick quotes with no string between them. The program is complaining that it doesn\u0027t recognize a zero-length term that\u0027s \u0022in\u0022 my file. how Zen. All files \u0022contain\u0022 zero length strings. An infinite number of them in fact. I have no idea what triggered this but it appeared after trying to use simple TextEdit on the achive file.)\u003Cp\u003EThen the readme file should be updated to show this. There\u0027s a section with the vectors listed and Velocity isn\u0027t one of them.\u003C/p\u003E\u003Cp\u003EIt\u0027s not ideal but it works. It just doesn\u0027t allow syntax checking until on the launchpad.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHm, I\u0027ve had no trouble running programs I edited externally myself.\u003C/p\u003E\u003Cp\u003ECould it be a line break problem? I saw some special handling for windows \\r\\n in the source code...\u003C/p\u003E\u003Cp\u003EI don\u0027t see how being able to write scripts in the VAB/SPH would give you any syntax checking, but it would be nice to have.\u003C/p\u003E\n"},{"CreatedByName":"Gaius","CreatedById":66495,"CreatedDateTime":"2013-09-06T19:34:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI get an error on line 21 of this code. Why?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s the end of the UNTIL statement where you used an unrecognized operator. There\u0027s currently no \u0022\u0026lt;=\u0022 or \u0022\u0026gt;=\u0022 operators in kOS, you need to rework the logic using only \u0022\u0026lt;\u0022 or \u0022\u0026gt;\u0022.\u003C/p\u003E\u003Cp\u003EI also have no problems with external editors. I prefer \u0022joe\u0022, but you can use your e\u003Cem\u003Evi\u003C/em\u003El editor if you prefer... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EIncidentially, open a terminal and just type:\u003C/p\u003E\u003Cp\u003Eprint 1\u0026gt;2.\u003C/p\u003E\u003Cp\u003E(notice the output)\u003C/p\u003E\u003Cp\u003Eprint 1\u0026lt;2.\u003C/p\u003E\u003Cp\u003E(notice the output)\u003C/p\u003E\u003Cp\u003Eprint 1\u0026gt;=2.\u003C/p\u003E\u003Cp\u003E(notice the error -- look familiar? I suspect your problem has nothing to do with the external editor, it\u0027s just the lack of support for that operator)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-06T19:40:13Z\u0022 title=\u002209/06/2013 07:40  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 6, 2013\u003C/time\u003E by Gaius\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T19:40:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022melak47\u0022 data-cite=\u0022melak47\u0022\u003E\u003Cdiv\u003EHm, I\u0027ve had no trouble running programs I edited externally myself.\u003Cp\u003ECould it be a line break problem? I saw some special handling for windows \\r\\n in the source code...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI assumed it was an ascii character it didn\u0027t know how to print in the font of the in-game console.\u003C/p\u003E\u003Cp\u003EBut after some more work I discovered that it\u0027s just confusing and misleading error reporting from the interpreter. What actually caused the error was many lines earlier, and it was that the language doesn\u0027t understand the less-than-or-equal-to operator \u0022\u0026lt;=\u0022. It was complaining on the \u0022=\u0022 sign but then reporting it very weirdly. I eventually got it through trial and error deleting different things until it stopped complaining. Whne I changed this:\u003C/p\u003E\u003Cp\u003EUNTIL ALT:RADAR \u0026lt;= 10\u003C/p\u003E\u003Cp\u003Eto this\u003C/p\u003E\u003Cp\u003EUNTIL ALT:RADAR \u0026lt; 10.00001\u003C/p\u003E\u003Cp\u003Ethen it stopped complaining.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI don\u0027t see how being able to write scripts in the VAB/SPH would give you any syntax checking, but it would be nice to have.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPresumably it would be possible to pull out the parsing module from the C code for the plugin and make an external command-line tool. But at that point you\u0027re now dealing with platform compatibility issues. Also, the language seems to be interpreted on the fly rather than precompiled so I doubt it would be that much help. For example if you have an if condition then the body won\u0027t be syntax checked until the if condition is true in-game.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T19:44:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaius\u0022 data-cite=\u0022Gaius\u0022\u003E\u003Cdiv\u003E(notice the error -- look familiar? I suspect your problem has nothing to do with the external editor, it\u0027s just the lack of support for that operator)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESort of. The error was there all along but was being masked by an earlier error that the editor made go away.\u003C/p\u003E\u003Cp\u003EIt was because of the very confusing error message that I looked to the editor as the cause. It was telling me the term it didn\u0027t like was something that it was printing on the console as a nullstring. I assumed it wasn\u0027t really a nullstring, as that would be a silly thing to call a \u0022term\u0022 in the syntax, but that it was trying to print some unprintable character. As it turns out, the error message really is printing a nullstring as the term it complains about, which is really misleading. I\u0027d have expected it to complain about the \u0027=\u0027 if that was the problem.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T20:14:11Z","Content":"\n\u003Cp\u003ESpecial variables like THROTTLE and STEERING do NOT in fact work if capitalized.\u003C/p\u003E\u003Cp\u003EThis fails: LOCK STEERING TO UP.\u003C/p\u003E\u003Cp\u003EThis works: LOCK steering TO up.\u003C/p\u003E\u003Cp\u003EThe description on the spaceport for this mod shows all the variables in uppercase. That is misleading and confusing if they don\u0027t really work when uppercased. Either the instructions should not be showing them uppercased, or the mod should be made to accept them uppercased. One or the other.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T20:39:25Z","Content":"\n\u003Cp\u003EIs there a way to multiply a scalar times a vector to change its magnitude, or reverse it? (for example (-1 * velocity) to the exact opposite vector to the velocity vector.)\u003C/p\u003E\u003Cp\u003EOr conversely, can we explode out the component parts of a vector to do the work ourselves? (i.e. get the value of prograde.x, prograde.y and prograde.z as three different scalars for example. Then we could do our own math on them and rebuild the resulting 3 numbers into a vector again.)\u003C/p\u003E\n"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2013-09-06T21:23:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E4 - Consider an alternative to the WHEN statement that actually re-executes the section every single time the condition happens in the checking cycle, effectively turning the body into an infinite loop with an if condition at the top. This would feel a lot like how event handling works in many languages. In fact I thought this is what WHEN did until I found out the hard way it only executes once. It seems to set up a watch for a condition, and then immediately unregister it after it triggers. Perhaps the new statement could be called the WHENEVER statement. \u003C/p\u003E\u003Cp\u003EThe way it works now it\u0027s impossible to set up a check to re-trigger continually as long as a condition is true, since that would mean having to contain the body of the WHEN statement inside the body of the WHEN statement.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve been thinking on this, and concluded an IF inside an UNTIL will typically be the right approach for responding to a recurring situation. The use case for WHEN seems to be when a set of events might happen once each in arbitrary order, which is fairly niche.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIs there a way to multiply a scalar times a vector to change its magnitude, or reverse it? (for example (-1 * velocity) to the exact opposite vector to the velocity vector.)\u003Cp\u003EOr conversely, can we explode out the component parts of a vector to do the work ourselves? (i.e. get the value of prograde.x, prograde.y and prograde.z as three different scalars for example. Then we could do our own math on them and rebuild the resulting 3 numbers into a vector again.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAccessing the elements of a vector will also be essential for calculating the magnitude.\u003C/p\u003E\u003Cp\u003EEdit: It\u0027s revealed in the 0.4 video (and apparently nowhere else) you can do X:pitch, X:roll, and X:yaw on R() structures. No word on V().\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-06T21:38:31Z\u0022 title=\u002209/06/2013 09:38  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 6, 2013\u003C/time\u003E by rhoark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T21:35:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rhoark\u0022 data-cite=\u0022rhoark\u0022\u003E\u003Cdiv\u003EI\u0027ve been thinking on this, and concluded an IF inside an UNTIL will typically be the right approach for responding to a recurring situation. The use case for WHEN seems to be when a set of events might happen once each in arbitrary order, which is fairly niche.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cstrong\u003EWhile you are correct that you can replace this looping model:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe WHENEVER trigger happens.\u003C/p\u003E\u003Cp\u003E... do a thing.\u003C/p\u003E\u003Cp\u003EThe WHENEVER rigger is still true.\u003C/p\u003E\u003Cp\u003E... do a thing again.\u003C/p\u003E\u003Cp\u003EThe WHENEVER trigger is still true.\u003C/p\u003E\u003Cp\u003E... do a thing again.\u003C/p\u003E\u003Cp\u003EThe WHENEVER trigger is not true anymore.\u003C/p\u003E\u003Cp\u003Edone.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003Ewith this one:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe WHEN trigger is true.\u003C/p\u003E\u003Cp\u003Eloop until WHEN trigger is false.\u003C/p\u003E\u003Cp\u003E.. do a thing.\u003C/p\u003E\u003Cp\u003Edone.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EWhat you CANNOT do is replace THIS looping model the same way:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EThe WHENEVER trigger happens.\u003C/p\u003E\u003Cp\u003E... do a thing.\u003C/p\u003E\u003Cp\u003EThe WHENEVER rigger is still true.\u003C/p\u003E\u003Cp\u003E... do a thing again.\u003C/p\u003E\u003Cp\u003EThe WHENEVER trigger is still true.\u003C/p\u003E\u003Cp\u003E... do a thing again.\u003C/p\u003E\u003Cp\u003EThe WHENEVER trigger is not true anymore.\u003C/p\u003E\u003Cp\u003EA few minutes later the WHENEVER trigger happens again.\u003C/p\u003E\u003Cp\u003E... do a thing.\u003C/p\u003E\u003Cp\u003EThe WHENEVER rigger is still true.\u003C/p\u003E\u003Cp\u003E... do a thing again.\u003C/p\u003E\u003Cp\u003EThe WHENEVER trigger is not true anymore.\u003C/p\u003E\u003Cp\u003Edone.\u003C/p\u003E\u003Cp\u003EYour suggested solution only allows one run through the loop. The WHEN condition still won\u0027t happen a second time after the loop is over. This makes it impossible to set up a program that watches for a condition and then responds to it a particular way MORE THAN ONCE.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-06T21:39:31Z\u0022 title=\u002209/06/2013 09:39  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 6, 2013\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2013-09-06T21:42:15Z","Content":"\n\u003Cp\u003EYou can. The IF condition is the thing you want to respond to, and the UNTIL condition is for when you\u0027re done caring about the IF condition.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Euntil stage:liquidfuel \u0026lt; 50 {\u003Cbr\u003E  if alt:radar \u0026lt; 200 { lock throttle to 1. }.\u003Cbr\u003E  if alt:radar \u0026gt; 1000 { lock throttle to 0.}.\u003Cbr\u003E}.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-09-06T21:45:00Z\u0022 title=\u002209/06/2013 09:45  PM\u0022 data-short=\u002210 yr\u0022\u003ESeptember 6, 2013\u003C/time\u003E by rhoark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2013-09-06T21:45:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022rhoark\u0022 data-cite=\u0022rhoark\u0022\u003E\u003Cdiv\u003EI\u0027ve been thinking on this, and concluded an IF inside an UNTIL will typically be the right approach for responding to a recurring situation. The use case for WHEN seems to be when a set of events might happen once each in arbitrary order, which is fairly niche.\u003Cp\u003EAccessing the elements of a vector will also be essential for calculating the magnitude.\u003C/p\u003E\u003Cp\u003EEdit: It\u0027s revealed in the 0.4 video (and apparently nowhere else) you can do X:pitch, X:roll, and X:yaw on R() structures. No word on V().\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGaaah so much undocumented stuff here. (Call me an old school grognard but I really dislike the modern trend of people wanting to use video clips as the primary means of documenting how software works over using the written word. Looking things up in a video takes longer and it\u0027s harder to skim.)\u003C/p\u003E\n"}]}