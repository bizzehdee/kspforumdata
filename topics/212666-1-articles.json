{"TopicId":212666,"ForumId":120,"TopicTitle":"Propulsion Notes #1 J-404 \u0026quot;Panther\u0026quot; and General Afterburning Engines","CreatedByName":"V\u00E1clav Marek","CreatedById":226260,"CreatedDateTime":"2023-02-25T10:29:20Z","PageNum":1,"Articles":[{"CreatedByName":"V\u00E1clav Marek","CreatedById":226260,"CreatedDateTime":"2023-02-25T10:29:20Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003ETLDR: \u003C/strong\u003E\u003Cstrong\u003EThe behaviour of the J-404 \u0022Panther\u0022 is wrong. This post details why I believe this is the case, and proposes solutions that could be readily implemented based on a few physical principles.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E1) The adjustable nozzle behaviour when afterburner is on is incorrect, it should increase in area, not sit at minimum cross-section\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E2) The flames coming out of the engine when the afterburner is off make little-to-no sense.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nLet me preface this by saying that I have an experience on two different fronts. I have been playing KSP1 for around ten years now, and I have graduated with a degree in Aerospace Engineering, currently working on my MSc. in Aerospace power \u0026amp; propulsion at an unspecified Dutch university. I will not go into the absolute nuance of the problem and will leave a lot of study to the reader, as I don\u0027t want to overcomplicate KSP2 with little details that won\u0027t impact the gameplay or immersion. As I loved the first game, I want to make a \u003Cem\u003Epost each week \u003C/em\u003Eabout a different topic on how we can make the jet engines and rocket engines in KSP2 more realistic. Any and all feedback is welcome, I am not infallible and will inevitably make a lot of mistakes. A lot of the theory is \u003Cem\u003Esimplified\u003C/em\u003E so that it is more accessible.\n\u003C/p\u003E\n\u003Cp\u003E\nToday, I want to talk about the J-404 \u0022panther\u0022, and the theory behind adjustable nozzles on afterburning engines.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:20px;\u0022\u003EA) Introduction\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe engine seems to be modeled after a generic military \u003Cstrong\u003Elow-bypass afterburning turbofan engine\u003C/strong\u003E, such as the F-100 found on the F-16 and F-15 aircraft. This type of engine is equipped with an adjustable nozzle, that is, a nozzle that can expand or contract depending on the exact mode and conditions in which the engine is operating. This changes different cross-sectional areas of the nozzle, including the throat and the nozzle exit. In this specific case, we assume that the nozzle is purely convergent (although in reality the aft-most section diverges slightly, but this has little-to-no impact on the main point I will argue here), and that the nozzle exit and throat area are the same.\u003Cem\u003E\u00A0\u00A0 Note: we will ignore the thrust vectoring for this exercise, and focus on just the concept of contracting and expanding the nozzle exit area. \u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:20px;\u0022\u003EB) Problem (* refers to section D, Theory)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E1) The expected behavior.\u003C/strong\u003E The task of the nozzle on a jet engine is the acceleration of the flow to high velocity with minimum pressure losses, producing thrust. As the nozzle converges, the flow accelerates, the pressure decreases, so does the temperature and density. Assuming that the flow is choked at the throat (which it would be for this kind of engine), M=1 at the throat. This choking condition is crucial to the process, because it defines what happens when we increase or decrease thrust and/or add afterburning. \u003Cstrong\u003EWhen in a choked condition, increasing the pressure before the nozzle will NOT increase the mass flow. \u003C/strong\u003EHowever, increasing thrust increases the mass flow through the engine, both in the injected fuel and in the air intake. \u003Cu\u003E\u003Cstrong\u003EThe increase in thrust and hence mass flow has to be reflected then in the widening of the nozzle.\u003C/strong\u003E\u003C/u\u003E If the nozzle stays at the same area, the pressure in the nozzle will increase, not however leading to a significant increase in thrust, because the mass flow is constant.* When afterburning, this issue becomes even more apparent, where the mass flow, temperature (and hence volume), of the gas increases. If the nozzle is fully contracted when the afterburner is switched on, it\u00A0 should begin rapidly expanding to allow for the increased mass flow, otherwise there will be nearly no increase in thrust.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E1) Current behavior.\u003C/strong\u003E The engine is that for the full range of thrust setting, in \u0022cruise\u0022 mode, the engine nozzle doesn\u0027t change. As mentioned above, it is not ideal, but it would still run, just inefficiently. However, when the afterburner is switched on, the nozzle contracts to the smallest possible cross-section, and stays that way for the entire thrust range. This should be the other way around! Yes, when switching modes, contraction is understandable so that the correct conditions for the ignition of the afterburner are created, however once ignited, the engine nozzle should increase to maximum cross-section as thrust is increased.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E2) The expected behavior. \u003C/strong\u003EThe combustion chamber is where the flame is contained when operating without afterburner, and it must be ensured that (almost) all combustion takes place here as to prevent damage to the turbine and other components. This doesn\u0027t depend on the thrust setting, flame is contained in the cc. (Not even the whole cc, just in the central-part of the chamber, near the front, where circulating flows \u0022hold\u0022 the flame).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E2) Current behavior. \u003C/strong\u003EFlames are seen reaching several meters out of the engine without afterburner running. This makes little-to-no sense, as those flames would have to go from the combustion chamber, all the way through all the turbine stages, all the way through the nozzle, and then outside, and still be burning. Especially with methane, the combustion process taking this long is not realistic, unless you are dumping fuel like the F111.\u003Cbr\u003E\n\u003Cbr\u003E\n\u003Cspan style=\u0022font-size:20px;\u0022\u003EC) Solution\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n1) Without afterburner, the nozzle should expand slowly with increasing thrust. If applicable, you may want to implement the same for an increase in altitude, as the ambient pressure changes, the ideal pressure ratio changes, to achieve optimal thrust. This is a choice based on how advanced the engine is supposed to be. However, for the afterburner, the engine should be open at a maximum cross-section for the full thrust, and slowly decrease for lower thrust levels. Generally, the engine cross-section should be larger when the afterburner is operating.\n\u003C/p\u003E\n\u003Cp\u003E\n2) There should not be any flames leaving the engine with the afterburner switched off.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:20px;\u0022\u003ED) Theory / References\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHere I would like to expand on some of the arguments I have made in the text above, and most importantly link to the sources I have used in this text. The main source for the theory is\u003Cem\u003E \u003C/em\u003E\u003Cem\u003EFundamentals of Aerodynamics - 6th Edition, by John Anderson.\u003C/em\u003E Specifically chapter 10 on compressible flow through nozzles, diffusers, and wind tunnels. Two topics are treated, first why we might want to adjust nozzle area, and second the idea of choked flow.\n\u003C/p\u003E\n\u003Cp\u003E\nThe thrust of a jet engine can be simplified to an equation:\n\u003C/p\u003E\n\u003Cp\u003E\nF\u003Csub\u003Etot\u003C/sub\u003E = F\u003Csub\u003Ev\u003C/sub\u003E \u002B F\u003Csub\u003Ep\u003C/sub\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nwhere\n\u003C/p\u003E\n\u003Cp\u003E\nF\u003Csub\u003Ev\u003C/sub\u003E = \u003Ci\u003E\u003Cspan\u003E\u003Cimg alt=\u0022{\\dot {m}}\u0022 data-ratio=\u0022106.67\u0022 style=\u0022vertical-align:-0.338ex;\u0022 width=\u002215\u0022 src=\u0022https://wikimedia.org/api/rest_v1/media/math/render/svg/ad59b9876301e8fb75b9ddbf08de594b87251d3b\u0022\u003E (V\u003Csub\u003Ej\u003C/sub\u003E - V\u003Csub\u003E0\u003C/sub\u003E) \u003C/span\u003E\u003C/i\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ci\u003E\u003Cspan\u003EF\u003Csub\u003Ep\u003C/sub\u003E = A\u003Csub\u003Ee\u003C/sub\u003E (P\u003Csub\u003Ee\u003C/sub\u003E - P\u003Csub\u003Eamb\u003C/sub\u003E)\u003C/span\u003E\u003C/i\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EThe two above parts of the thrust are the thrust generated by the acceleration of the flow, and the difference in pressure, respectively. By taking the derivative of the total thrust equation, we will find that the maximum thrust, and hence the optimum operating point, is when the exit pressure and ambient pressure are equal, making the pressure thrust zero, but the exit velocity maximum (F\u003Csub\u003Ep\u003C/sub\u003E=0, F\u003Csub\u003Ev\u003C/sub\u003E=max). The exit pressure ratio is a function of many variables, most importantly the exit area of the nozzle. By increasing or decreasing the cross-sectional area we can vary the exit pressure, therefore ensuring that the engine is at most times operating at the desired design point, delivering the optimum performance. For a convergent-divergent nozzle where we can achieve a certain pressure upstream, then decrease the pressure towards the throat, and with further expansion decrease the pressure to ambient, this can be achieved, \u003Cstrong\u003Ehowever\u003C/strong\u003E in this case of the convergent-only nozzle, the exit pressure is equal to the pressure at the throat, and this is where the concept of choked flow has to be introduced. \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EWith relation to the equation of F\u003Csub\u003Ev\u003C/sub\u003E, we can observe that to increase the thrust, we need to increase the mass flow and the jet exhaust velocity. To illustrate how mass flow behaves, we begin with a convergent nozzle where the pressure upstream and ambient are equal. In this case, the exhaust velocity and mass flow are both zero, as nothing is driving the flow to exit the nozzle. As the upstream pressure increases, so does the mass flow, but as we begin to approach M = 1 at the throat, the mass flow increase slows down, eventually staying at a constant value when M=1 is achieved. This is a called a choked flow, and any pressure increase beyond this point will \u003Cstrong\u003Enot\u003C/strong\u003E lead to mass flow increase. This is caused by the limit of convergent only nozzle, where M=1 is the maximum achievable. By comparison, in convergent-divergent nozzles, the expansion can continue further in the divergent section, driving the flow to supersonic speeds. It is left as an exercise to the reader as to why this is the case. As mass flow follows \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ci\u003E\u003Cspan\u003E\u003Cimg alt=\u0022{\\dot {m}}\u0022 data-ratio=\u0022106.67\u0022 style=\u0022vertical-align:-0.338ex;\u0022 width=\u002215\u0022 src=\u0022https://wikimedia.org/api/rest_v1/media/math/render/svg/ad59b9876301e8fb75b9ddbf08de594b87251d3b\u0022\u003E\u00A0 \u003C/span\u003E\u003C/i\u003E= density * velocity * Area\n\u003C/p\u003E\n\u003Cp\u003E\nand M=1, where M = velocity / sqrt( gam * R * T)\n\u003C/p\u003E\n\u003Cp\u003E\nfor a constant velocity locked by the M=1, mass flow can only increase by increasing the Area, or increasing the density. One might argue that the velocity increases because of increasing temperature T in the flow with the afterburner running, which is true, however also the density decreases in that situation.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nObserving that M=1 is the condition with maximum mass flow and velocity, and hence thrust, we can safely assume the nozzle will be choked for the purposes of achieving maximum thrust. Then, when the afterburner is ignited, multiple things happen: a) The fuel flow to the engine is increased significantly (increased mass flow) b) the temperature of the flow increases c) the volume of the flow increases (as density decreases). Then the engine has to deal with a decreased density flow with very high temperatures. The pressure is assumed constant over an afterburner. For the same velocity and area of the nozzle, but significantly decreased density, the mass flow through the engine will decrease, actually decreasing the thrust produced. As the mass flow on the nozzle-side decreases, the flow upstream in the engine will have to react, and the overall mass flow into the engine will also decrease accordingly. To prevent this, the nozzle should be open to the increased volume of gas.\n\u003C/p\u003E\n\u003Cp\u003E\nLastly, illustrations of the problematic behaviors are shown in the images bellow, beginning with the flames leaving the engine when afterburner is not running, and then ending with the nozzle being at maximum contraction for the afterburner. I look forward to your comments and discussion on this topic.\n\u003C/p\u003E\n\u003Cp\u003E\n~VM\n\u003C/p\u003E\n\u003Cp\u003E\nAppendix A: Images\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022hdEBCvL.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022166.67\u0022 height=\u00221200\u0022 width=\u00221200\u0022 src=\u0022https://i.imgur.com/hdEBCvL.png\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nP.S.: To not be just critical, the shock diamonds look incredible and I am really excited about the expansion of the exhaust gasses with increasing altitude, I will return to some of those topics in the future for sure.\n\u003C/p\u003E\n"},{"CreatedByName":"angelatthetomb","CreatedById":88392,"CreatedDateTime":"2023-02-26T00:41:39Z","Content":"\n\u003Cp\u003E\nThis drives me insane too, anyone who has ever been around a military aircraft will see that and just say, \u0022Uhhh something\u0027s not right here.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s very possible it\u0027s placeholder since there\u0027s no nozzle adjustment for throttle (which even stock KSP1 has).\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPractically, as well, the afterburner should be a \u0022boost\u0022 to normal throttle (100-150% per cent or something), instead of a separate mode with a full range of throttle (why would you be at 5% afterburner? That just wastes fuel for less thrust than normal mode).\n\u003C/p\u003E\n"},{"CreatedByName":"V\u00E1clav Marek","CreatedById":226260,"CreatedDateTime":"2023-02-26T16:54:51Z","Content":"\n\u003Cp\u003E\nYes, I think your last sentence is actually possibly the best approach, where an afterburner mode switch could work as a throttle limiter to let\u0027s say 70%. Beyond that throttle setting, the afterburner would be activated. I am not sure how simple that would be to implement in the game. Or perhaps allow the throttle go beyond 100%? Not sure.\n\u003C/p\u003E\n"},{"CreatedByName":"Razor235","CreatedById":16436,"CreatedDateTime":"2023-02-26T17:54:40Z","Content":"\n\u003Cp\u003E\nI never liked the two separate modes of the panther to begin with, but now there\u0027s like a 3 second delay between mode switch that is super annoying.\n\u003C/p\u003E\n"},{"CreatedByName":"V\u00E1clav Marek","CreatedById":226260,"CreatedDateTime":"2023-02-26T21:02:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224244493\u0022 data-ipsquote-contentid=\u0022212666\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221677434080\u0022 data-ipsquote-userid=\u002216436\u0022 data-ipsquote-username=\u0022Razor235\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Razor235 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI never liked the two separate modes of the panther to begin with, but now there\u0027s like a 3 second delay between mode switch that is super annoying.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmm, well if the engine afterburner actually did work in a more realistic manner, I would like it more. I genuinely enjoyed it in the first game, because often it is useful to give the aircraft a bit of a kick for a climb or to accelerate, and then you can just cruise at mid-high altitude with afterburner off. The delay I think is ok. It would be good if they provide us with feedback of how they actually intend it to work, or a specific engine that they wanted to model if after.\n\u003C/p\u003E\n"}]}