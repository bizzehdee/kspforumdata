{"TopicId":117286,"ForumId":34,"TopicTitle":"Useful Atmospheric-Fluid-Spectro-Variometer--calculate gas % on planets","CreatedByName":"seanth","CreatedById":79989,"CreatedDateTime":"2015-07-30T23:28:17Z","PageNum":1,"Articles":[{"CreatedByName":"seanth","CreatedById":79989,"CreatedDateTime":"2015-07-30T23:28:17Z","Content":"When the Atmospheric-Fluid-Spectro-Variometer part appeared, were you disappointed that it didn\u0027t give you numbers for atmospheric gas? I was.\n\nTurns out if you add some resourceharvester modules to it, define what gasses are on what planets (or use the Community Resource Pack), and use a PressMat Barometer, you can calculate the % of gasses on the planet your sensor is on.\n\nThere is a TL;DR [blog post](https://forum.kerbalspaceprogram.com/entries/3675-Using-the-Atmospheric-Fluid-Spectro-Variometer-for-real-science) going into detail, but the simple version is:\n\n**EDITED FOR SIMPLER METHOD**\n\n1.) [Grab](https://github.com/kjoenth/Atmospheric-Fluid-Spectro-Variometer-Patch/releases/download/1.0/AFSV-patch.zip) a small mod that provides a module manager patch for the Atmospheric-Fluid-Spectro-Variometer (AFSV) (and two optional files defining Kerbin and Duna\u0027s atmospheres in the AtmosphereDefinitions.zip)\n\n2.) Make a craft with a AFSV\n\n3.) Launch the craft and activate the filter for the gas you want to detect on the AFSV (the example can detect N2, O2, CO2, kethaneGas, and water vapour)\n\n4.) Quickly write down the rates displayed. There is a [bug(?)](https://forum.kerbalspaceprogram.com/threads/129953-Bug-in-ModuleResourceHarvester-HarvesterType-2?p=2105651\u0026viewfull=1#post2105651) in Squad\u0027s module where the rates will continue to increase over time, making the values increasingly incorrect.\n\n6.) Use the following equation to calculate the % of the gas you are interested in:\n\n (L/s from the AFSV)\\*(conversion factor)=%\n\nConversion Factors:\n\n Eve: 0.3933\n\n Kerbin: 2.2165\n\n Duna: 27.2904\n\n Laythe: 3.3933\n\n Or calcuate the conversion factor (not as accurate) using:\n\n Correction factor=561.42834\\*(kPa^-1.187582)\n\n![Screenshot%2525202015-07-30%25252014.41.19.png](https://lh3.googleusercontent.com/-qAU74wuDfb8/VbqbgeLdfoI/AAAAAAAAKU8/jWUiFg2x1OE/s640-Ic42/Screenshot%2525202015-07-30%25252014.41.19.png)\n\n**Example from the image:**\n\nO2 rate=9.411L/s. Conversion factor=2.2165\n\n(9.411L/s)\\*(2.2165s\\*L-1)=20.86% O2 detected by sensor\n\nDownload: [GitHub](https://github.com/kjoenth/Atmospheric-Fluid-Spectro-Variometer-Patch/releases/download/1.0/AFSV-patch.zip)\n\n**Edited \u003Ctime datetime=\u00222015-07-31T03:47:41Z\u0022 title=\u002207/31/2015 03:47  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 31, 2015\u003C/time\u003E by seanth**"},{"CreatedByName":"seanth","CreatedById":79989,"CreatedDateTime":"2015-08-03T04:07:36Z","Content":"Addendum:\n\nI just realized the conversion value for Kerbin is comfortable close to the number of liters that holds 1 mole of gas at STP: 22.4L \n\nSome quick checks showed that my \u0022conversions\u0022 are actually the the volume of gas on the planet in question, at 0C, that will hold 1mole of gas.\n\nThe formula is V= [(n\\*R\\*T)/P]/10; where n =1(so we can ignore it), R = 8.314621, and T is in K, so (Temp in C)\u002B273.16. Set Temp to 0 for easy calculations of a \u0022STP\u0022 on different planets\n\nExample: Atmospheric pressure on Laythe, according to the wiki, is 60.795 kPa:\n\n V=[(8.314621\\*273.16)/60.795]/10=3.3933\n\nWhich is exactly the conversion factor for Laythe I had gotten previously.\n\nThis new method gives much more accurate results since you can look at a thermometer and a barometer to get the conversion factor you need.\n\nNow...why do you divide the whole thing by 10? One possibility is that the code is using a value for R that doesn\u0027t have the units of L\\*kPa\\*mol-1\\*K-1. R would have to be 0.8314621 in the code for this to be true.\n\n**Edited \u003Ctime datetime=\u00222015-08-03T04:11:30Z\u0022 title=\u002208/03/2015 04:11  AM\u0022 data-short=\u00228 yr\u0022\u003EAugust 3, 2015\u003C/time\u003E by seanth**"}]}