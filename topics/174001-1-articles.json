{"TopicId":174001,"ForumId":69,"TopicTitle":"[1.3.1 \u002B 1.4.2] Lag spike every second","CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2018-04-17T10:41:24Z","PageNum":1,"Articles":[{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2018-04-17T10:41:24Z","Content":"\n\u003Cp\u003E\nI noticed this in a modded install of 1.3.1 and got so annoyed with it that I actually stopped playing. The game sees a lag spike every second whre the entire game freezes for 1/10 of a second or so, making it very jerky and super annoying. As I thought it was one of the mods I tried removing all the mods and running it stock, but even there I notice this effect although much less pronounced (barely visible, but there), it\u00A0seems to get worse when you add more mods. I had some hope a fresh install of\u00A01.4.2 would solve this, but it shows the exact same behavior:\u003Cbr\u003E\u003Cbr\u003E\u003Cimg alt=\u0022lagspike.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022334\u0022 src=\u0022http://jimbodiah.com/ksp/lagspike.jpg\u0022 width=\u0022654\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe performance monitor shows a spike to 278fps but it\u0027s rather a dip to 0fps. I normally run 60Hz vsync as my monitor will only handle 60Hz, but the test above was to see if not using vsync would make any difference (it doesn\u0027t).\u003Cbr\u003E\u003Cbr\u003E\nI\u0027m running a 4790K (4x4GHz), 16GB, Samsung SSDs with a GTX970 factory OC at 3440x1440. I doubt the PC could be the issue. Also running KSP in 64bit mode.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHas anyone seen similar behavior in KSP and know a way to fix it?\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\nNB: I notice Kerbal Alarm Clock and ScanSat greatly increase this behavior, but as it is there in a stock install, I\u0027m not sure it\u0027s entirely related to these mods.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-17T11:10:15Z\u0022 title=\u002204/17/2018 11:10  AM\u0022 data-short=\u00226 yr\u0022\u003EApril 17, 2018\u003C/time\u003E by Jimbodiah\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dafni","CreatedById":149636,"CreatedDateTime":"2018-04-17T11:31:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223356631\u0022 data-ipsquote-contentid=\u0022174001\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523961684\u0022 data-ipsquote-userid=\u0022152759\u0022 data-ipsquote-username=\u0022Jimbodiah\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n39 minutes ago, Jimbodiah said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0I had some hope a fresh install of\u00A01.4.2 would solve this, but it shows the exact same behavior\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI cannot contribute any helpful info, just dropping by to let you know I have the same issue on 1.3.1. Did not dare to check the latest patch, and the above statement does not bode well. Pretty disheartening. Do you have hope for 1.4.3? Probably not much.\n\u003C/p\u003E\n\u003Cp\u003E\nThis issue has been the single most annoying thing in KSP for me, ever. This stutter, even the tiny hiccups you get in almost stock installs, irks me a lot. I wish KSP would run perfectly smooth (I have a 8700K, 1080Ti, 32GB DDR4 etc)\n\u003C/p\u003E\n\u003Cp\u003E\nJust FYI, in 1.3.1 MechJeb seemed to be the worst offender from my mods list (not a very extensive list, usually less than 5 mods). Moving to \u003Cabbr title=\u0022Kerbal Engineer Redux (mod)\u0022\u003EKER\u003C/abbr\u003E improved the whole situation, but like we found, even in stock installs it is there.\n\u003C/p\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2018-04-17T11:33:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223356631\u0022 data-ipsquote-contentid=\u0022174001\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523961684\u0022 data-ipsquote-userid=\u0022152759\u0022 data-ipsquote-username=\u0022Jimbodiah\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n47 minutes ago, Jimbodiah said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHas anyone seen similar behavior in KSP and know a way to fix it?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, and no, not if it\u0027s what I think it is.\u003Cbr\u003E\nInstall \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139128-12x13-memgraph-1103-with-stutter-reduction/\u0022 rel=\u0022\u0022\u003EMemgraph\u003C/a\u003E and see if it\u0027s the well known garbage collection problem.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223356631\u0022 data-ipsquote-contentid=\u0022174001\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221523961684\u0022 data-ipsquote-userid=\u0022152759\u0022 data-ipsquote-username=\u0022Jimbodiah\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n50 minutes ago, Jimbodiah said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ngot so annoyed with it that I actually stopped playing.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIndeed, this is what kills my career games. Fixing it is in the \u0022too hard\u0022 basket though, as it\u0027s a game engine problem.\n\u003C/p\u003E\n"},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2018-04-17T16:29:25Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/69272-steve_v/\u0026amp;do=hovercard\u0022 data-mentionid=\u002269272\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/69272-steve_v/\u0022 rel=\u0022\u0022\u003E@steve_v\u003C/a\u003E\u00A0 Thanks for that tip, running it now. Nothing really strange to see in terms of spikes though. I removed \u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E and ScanSat, which seems to have reduced theproblem enormously.\u00A0 The \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E view has the stutter for the first few seconds but then smooths out, like something is being loaded in fragments at every secondmark. Really weird behavior.\u003Cbr\u003E\u003Cbr\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/149636-dafni/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022149636\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/149636-dafni/\u0022 rel=\u0022\u0022\u003E@Dafni\u003C/a\u003E\u00A0 I\u0027ve tried removing \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E on my install but didn\u0027t see any improvements, nbot sure if it\u0027s a random thing or maybe some mods conflicting with each other to amplify the stutter. I\u0027m grasping at straws as well.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-04-17T16:45:56Z","Content":"\n\u003Cp\u003E\nThis sounds like the common and ever-present GC stutter.\u00A0 This is caused by Unity/Mono garbage collection. Cleaning up various unused bits of memory.\u00A0 Mods aggravate this by generating more garbage.\u00A0 Some mods are worse than others.\u00A0 Anything using the legacy OnGUI is especially bad (\u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E used this recently, and may still be using it).\n\u003C/p\u003E\n\u003Cp\u003E\nTry installing memgraph, and use its heap-padding functionality.\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed5905862890\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139128-12x13-memgraph-1103-with-stutter-reduction/\u0026amp;do=embed\u0022 style=\u0022height:212px;max-width:500px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2018-04-17T17:05:41Z","Content":"\n\u003Cp\u003E\nI stil think Sarbian, you and several other modders should make your own game \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0 \u00A0 Really. The more I play KSP, the more frustrated I get at all the work-arounds and stuff we have to put up with.\u00A0 All I want to do is build up an infrastructure and not have the game lag, freeze, explode ships, kraken, bend,\u00A0bounce\u00A0planetary bases into oblivion, crash or completely corrupt my save-games; is that too much to ask?\u003Cbr\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-17T17:13:05Z\u0022 title=\u002204/17/2018 05:13  PM\u0022 data-short=\u00226 yr\u0022\u003EApril 17, 2018\u003C/time\u003E by Jimbodiah\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2018-04-17T17:17:20Z","Content":"\n\u003Cp\u003E\nNB: Smooth as butter now with MemGraph and heap-padding active. Haven\u0027t tried ScanSat/\u003Cabbr title=\u0022Kerbal Alarm Clock (mod)\u0022\u003EKAC\u003C/abbr\u003E yet, kind of afraid to jinx it for now \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-04-17T17:29:48Z","Content":"\n\u003Cp\u003E\nGood to hear.\u00A0 You\u0027ll still get stutters, even with the heap-padding, but they\u0027ll be much further apart.\u00A0 Adding more mods will increase the frequency of the stutters, but they\u0027ll still be much further apart than with the stock settings.\n\u003C/p\u003E\n"}]}