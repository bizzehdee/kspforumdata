{"TopicId":103979,"ForumId":16,"TopicTitle":"How is velocity translated/preserved during SOI changes? (specific examples inside)","CreatedByName":"mekasha","CreatedById":140594,"CreatedDateTime":"2015-04-12T16:04:37Z","PageNum":1,"Articles":[{"CreatedByName":"mekasha","CreatedById":140594,"CreatedDateTime":"2015-04-12T16:04:37Z","Content":"\n\u003Cp\u003EWhen changing SOI, does your old heading even matter, or is speed the only constant? I\u0027ve finally had some luck capturing asteroids doing something a little counterintuitive; exiting Kerbin\u0027s SOI at roughly the same time and spot as a target asteroid passing through, and grabbing it in Kerbol\u0027s SOI. To manage that, I had to use kind of a crazy trajectory to exit at around the same time in the same place. Once I changed SOI\u0027s I was basically on what appeared to be a stable orbit almost directly next to my target asteroid (though still had to burn a bit to match speeds).\u003C/p\u003E\u003Cp\u003EJust for a clearer example, if I had two objects exiting an SOI at the same place, at the same time, (at the same speed?) but object A was going \u0022straight\u0022 at the point, and object B was approaching that point at a 45* angle, what would happen when they exit? Will they end up in precisely the same orbit? Is the same true if their speeds were different?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-13T12:51:16Z\u0022 title=\u002204/13/2015 12:51  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 13, 2015\u003C/time\u003E by mekasha\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-04-12T18:26:43Z","Content":"\n\u003Cp\u003EYour heading and speed both matter when changing SOIs. You can see this very clearly when you eject from Kerbin going backwards in its orbit compared to going forwards. Backwards, it slows you down. Forwards, it speeds you up (relative to Kerbin around Sun)\u003C/p\u003E\u003Cp\u003EIn your second example, they would exit at the same point, giong different directions. However because Kerbin\u0027s velocity is a lot larger than the difference between Kerbin\u0027s Velocity and your ships\u0027 velocities, it won\u0027t be super noticeable in map mode.\u003C/p\u003E\n"},{"CreatedByName":"Warzouz","CreatedById":140055,"CreatedDateTime":"2015-04-12T18:36:43Z","Content":"\n\u003Cp\u003ESometimes, when quitting SOI, there is a \u0022temporary\u0022 trajectory which seems to be wrong. This artifact appears at any warp speed (even x1). The trajectory seems to return to the body we quit and give a new SOI (usually very far). The \u0022out of SOI\u0022 trajectory is also wrong. \u003C/p\u003E\u003Cp\u003EThen at the predicted time, the correct trajectory come back. The false trajectory lasts only less than 2 minutes.\u003C/p\u003E\u003Cp\u003EI think it\u0027s nearly always when you quit a smaller SOI to its parent time. I don\u0027t recall to have seen this bug (?) when entering smaller SOI.\u003C/p\u003E\u003Cp\u003EI use MJ, KER, AlarmClock mods.\u003C/p\u003E\u003Cp\u003EWhat is it ?\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-04-12T20:05:33Z","Content":"\n\u003Cp\u003EWhen entering the SoI of a body, that body\u0027s orbital velocity is subtracted from the vessel\u0027s velocity. When leaving the body\u0027s SoI, that body\u0027s orbital velocity is added to the vessel\u0027s velocity. Note that this is not straight addition and subtraction, but instead is \u003Ca href=\u0022https://en.wikipedia.org/wiki/Euclidean_vector#Addition_and_subtraction\u0022 rel=\u0022external nofollow\u0022\u003Evector addition\u003C/a\u003E; direction very much matters.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-12T22:29:07Z\u0022 title=\u002204/12/2015 10:29  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 12, 2015\u003C/time\u003E by Red Iron Crown\u003C/strong\u003E\n\u003Cbr\u003EFixed a typo.\n\u003C/span\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-04-12T20:33:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Warzouz\u0022 data-cite=\u0022Warzouz\u0022\u003E\u003Cdiv\u003ESometimes, when quitting SOI, there is a \u0022temporary\u0022 trajectory which seems to be wrong. This artifact appears at any warp speed (even x1). The trajectory seems to return to the body we quit and give a new SOI (usually very far). The \u0022out of SOI\u0022 trajectory is also wrong. \u003Cp\u003EThen at the predicted time, the correct trajectory come back. The false trajectory lasts only less than 2 minutes.\u003C/p\u003E\u003Cp\u003EI think it\u0027s nearly always when you quit a smaller SOI to its parent time. I don\u0027t recall to have seen this bug (?) when entering smaller SOI.\u003C/p\u003E\u003Cp\u003EI use MJ, KER, AlarmClock mods.\u003C/p\u003E\u003Cp\u003EWhat is it ?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t know, but I\u0027ve seen it too even on stock. It happen all the time. I just ignore it.\u003C/p\u003E\u003Cp\u003EIt\u0027s not \u0022real\u0022 in any sense, and not related in any way to how switching SOIs works. It\u0027s just a bug and apparently just a visual one.\u003C/p\u003E\n"},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2015-04-12T20:56:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Warzouz\u0022 data-cite=\u0022Warzouz\u0022\u003E\u003Cdiv\u003EI think it\u0027s nearly always when you quit a smaller SOI to its parent time. I don\u0027t recall to have seen this bug (?) when entering smaller SOI.\u003Cp\u003EI use MJ, KER, AlarmClock mods.\u003C/p\u003E\u003Cp\u003EWhat is it ?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI believe that this bug is related to the bug where warping through an SoI transition can throw off your trajectory. This latter bug was fixed in 1.0 during development, so this bug may be fixed as well.\u003C/p\u003E\u003Cp\u003EAs near as I can tell, this bug is caused by some kind of confusion as to which SoI you are in. You\u0027ll see a point at which you should transfer to the parent body\u0027s SoI, but when you reach that point, you get some nonsense trajectory projection that still lists an escape in the future from the lesser body\u0027s SoI.\u003C/p\u003E\u003Cp\u003EThe bug that was fixed had to do with the fact that spacecraft movement and the patched conics predictions were using different code to determine SoI transitions. The fix was to make everything use the patched conics SoI predictions, so hopefully there won\u0027t be any more room for craft to be confused about what SoI they\u0027re in.\u003C/p\u003E\n"},{"CreatedByName":"Reactordrone","CreatedById":110060,"CreatedDateTime":"2015-04-12T21:47:20Z","Content":"\n\u003Cp\u003EYou have to consider the geometry of the different frames of reference. Ejection angle changes how your speed changes relative to the parent body, e.g adding or subtracting velocity from Kerbin\u0027s orbital velocity. A large plane change in a small diameter orbit around Kerbin will translate to a small plane change when you get into the much larger diameter of a solar orbit. That method of intercepting asteroids is what I use, i.e matching time and location of entry and exit then waiting for both objects to be in the same SOI. Targeting mode on the navball doesn\u0027t really work for objects that are are in different spheres of influence.\u003C/p\u003E\n"},{"CreatedByName":"Chaos_Klaus","CreatedById":140720,"CreatedDateTime":"2015-04-12T22:25:04Z","Content":"\n\u003Cp\u003EYes, it is all about reference frames. When you change the SoI your velocity stays the same. You still move into the same direction. \u003C/p\u003E\u003Cp\u003EYour orbit on the other hand looks totaly different. It seams to have a knee. That is because the referenceframe changed to the new parenting body and that body\u0027s own velocity is substracted from yours.\u003C/p\u003E\n"},{"CreatedByName":"impyre","CreatedById":116031,"CreatedDateTime":"2015-04-13T02:35:03Z","Content":"\n\u003Cp\u003EVelocities are preserved, it just doesn\u0027t seem obvious due to change in reference. The cause for the \u0022glitch\u0022 regarding erroneous paths is due to the fact that the projection is based on forces which have changed. Though your velocity remains unchanged when you change SoI\u0027s, your acceleration doesn\u0027t (this is because KSP uses two-body calculations for the sake of playability and projections). What this means is that at some point, the game must detect the change of SoI, remove the force due to gravity from the old parent and apply the force due to gravity from the new parent. This can take some time (more or less depending on warp, vehicle part count, the numbers involved, cpu use, and physics deltatime settings). This means there can be a gap when you are in a new SoI but the changes haven\u0027t yet been applied... (in extreme cases, the changes may not be applied at all, as you will enter and leave the SoI in the same physics time tick) This leads to things like skipping through atmospheres, missing SoI\u0027s, etc.\u003C/p\u003E\n"}]}