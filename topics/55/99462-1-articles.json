{"TopicId":99462,"ForumId":55,"TopicTitle":"The arcane art of flag-planting","CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2015-02-12T12:25:00Z","PageNum":1,"Articles":[{"CreatedByName":"Vaporo","CreatedById":110800,"CreatedDateTime":"2015-02-12T12:25:00Z","Content":"\n\u003Cp\u003ESomething that\u0027s always bugged me is the fact that flags always end up pointing in a bizarre, seemingly arbitrary direction that seems almost completely unrelated to the direction the Kerbal was facing before planting the flag.\u003C/p\u003E\u003Cp\u003EI remember there was a thread trying to figure out flag placement a while ago, but the only conclusion I remember that they reached was that the logic of flag placement was weird and confusing.\u003C/p\u003E\u003Cp\u003EAnyways, my suggestion is simple: rework the arcane logic of flag placement so that the flag is pointing in the direction the Kerbal is facing when he (or she) plants the flag.\u003C/p\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2015-02-12T12:46:04Z","Content":"\n\u003Cp\u003EYeah, the game computes a multidimensional array whenever you plant a flag to find the best possible orientation to ruin your screenshot. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EThis needs to be worked out. Just put the thing in front of your Kerbal and that\u0027s that.\u003C/p\u003E\n"},{"CreatedByName":"MartGonzo","CreatedById":65764,"CreatedDateTime":"2015-02-12T12:53:04Z","Content":"\n\u003Cp\u003EI think it always points to where the kraken is lurking. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Tex","CreatedById":75164,"CreatedDateTime":"2015-02-12T15:13:25Z","Content":"\n\u003Cp\u003EI always thought it was kind of funny, and almost in the Kerbal fashion- I remember one of my proudest moments was captured with my first manned Munar lander, and everything was positioned perfectly except that the flag was backwards in the screenshot! It was hilarious XD\u003C/p\u003E\n"},{"CreatedByName":"Brotoro","CreatedById":57674,"CreatedDateTime":"2015-02-12T15:13:37Z","Content":"\n\u003Cp\u003EI agree with Vaporo. Either make the flag planting work in a consistent manner (have the flag point away from the kerbal), or explain to us how the flag orientation logic works so that we can figure out how to get the result we want. Or...ad a Rotate Flag function.\u003C/p\u003E\n"},{"CreatedByName":"Tex","CreatedById":75164,"CreatedDateTime":"2015-02-12T15:21:30Z","Content":"\n\u003Cp\u003EI do agree a \u0022Rotate Flag\u0022 would be the best way to go.\u003C/p\u003E\n"},{"CreatedByName":"Renegrade","CreatedById":96629,"CreatedDateTime":"2015-02-12T17:30:50Z","Content":"\n\u003Cp\u003EWell, I\u0027ve done some testing of this and I have to say.. it\u0027s interesting.\u003C/p\u003E\u003Cp\u003EOn the launchpad, Bob would consistently place it roughly north or south facing(off a few degrees though), sorta regardless of what direction he\u0027s facing or the camera is facing. On the sloped corners though, he\u0027d place it facing one of two directions, both of which were at right angles to the slope (ie, across it, not up or down it. Also again off a few degrees). Reloading and replanting seemed to suggest that camera angle or distance played a role.\u003C/p\u003E\u003Cp\u003EI\u0027d definitely like an explanation, or a change to something that makes sense...\u003C/p\u003E\n"},{"CreatedByName":"Joonatan1998","CreatedById":97636,"CreatedDateTime":"2015-02-12T17:39:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Renegrade\u0022 data-cite=\u0022Renegrade\u0022\u003E\u003Cdiv\u003EWell, I\u0027ve done some testing of this and I have to say.. it\u0027s interesting.\u003Cp\u003EOn the launchpad, Bob would consistently place it roughly north or south facing(off a few degrees though), sorta regardless of what direction he\u0027s facing or the camera is facing. On the sloped corners though, he\u0027d place it facing one of two directions, both of which were at right angles to the slope (ie, across it, not up or down it. Also again off a few degrees). Reloading and replanting seemed to suggest that camera angle or distance played a role.\u003C/p\u003E\u003Cp\u003EI\u0027d definitely like an explanation, or a change to something that makes sense...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMaybe behaviour on the launch pad has to do with it being tilted a bit?\u003C/p\u003E\n"},{"CreatedByName":"klgraham1013","CreatedById":105132,"CreatedDateTime":"2015-02-12T18:27:05Z","Content":"\n\u003Cp\u003EI don\u0027t know what code they\u0027re using, but whatever\u0027s going on now seems much more complicated than \u0022plant the flag in front of you.\u0022 Then again, look how they\u0027re determining classes.\u003C/p\u003E\n"},{"CreatedByName":"Renegrade","CreatedById":96629,"CreatedDateTime":"2015-02-12T18:28:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Joonatan1998\u0022 data-cite=\u0022Joonatan1998\u0022\u003E\u003Cdiv\u003EMaybe behaviour on the launch pad has to do with it being tilted a bit?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EActually that\u0027s a good point - it\u0027s not perfectly level, but does tilt towards the west slightly (or more precisely, all of KSC is flat, but Kerbin is a (lumpy) sphere, so the edges are effectively tilted). So the north/south alignment on the pad does make sense. I\u0027m off to do more tests on the runway next to the SPH, which should then be east/west flags since that should be slightly south-tilted effectively..\u003C/p\u003E\u003Cp\u003EIn case anybody is wondering what we\u0027re talking about, I made a diagram to explain this a ways back:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://alpha.renegrade.net/images/BTSM-Launchpad.png\u0022 alt=\u0022BTSM-Launchpad.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Renegrade","CreatedById":96629,"CreatedDateTime":"2015-02-12T18:54:39Z","Content":"\n\u003Cp\u003EDid some testing - around the SPH, the flags did indeed orient themselves east-west. Northwest of the VAB (near the flagpole), where it\u0027s presumably sloped northwest/southeast, the flags were again at right angles to that slope (northeast or southwest).... testing on the Mun also confirms a similar affair.\u003C/p\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-02-12T21:46:42Z","Content":"\n\u003Cp\u003EI definitely agree that some deterministic and intuitive indication of flag-planting would be welcome in a future update.\u003C/p\u003E\n"},{"CreatedByName":"Himynameisjake","CreatedById":101602,"CreatedDateTime":"2015-02-13T03:02:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwhip\u0022 data-cite=\u0022Starwhip\u0022\u003E\u003Cdiv\u003EYeah, the game computes a multidimensional array whenever you plant a flag to find the best possible orientation to ruin your screenshot. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E*dying*\u003C/p\u003E\n"},{"CreatedByName":"JadedStoner","CreatedById":63684,"CreatedDateTime":"2015-02-13T03:06:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Maximus97\u0022 data-cite=\u0022Maximus97\u0022\u003E\u003Cdiv\u003EI do agree a \u0022Rotate Flag\u0022 would be the best way to go.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECould this be a gizmo that was recently added to the VAB/SPH?\u003C/p\u003E\n"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-02-13T03:27:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwhip\u0022 data-cite=\u0022Starwhip\u0022\u003E\u003Cdiv\u003EYeah, the game computes a multidimensional array whenever you plant a flag to find the best possible orientation to ruin your screenshot. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003Cp\u003EThis needs to be worked out. Just put the thing in front of your Kerbal and that\u0027s that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u0022Why\u0027s it placed like that?\u0022 Amelia Kerman asked.\u003C/p\u003E\u003Cp\u003E\u0022Like what?\u0022 The Scientist replied.\u003C/p\u003E\u003Cp\u003EAmelia: \u0022You\u0027ve got a flag placed in a very ugly way.\u0022\u003C/p\u003E\u003Cp\u003EThe Scientist: \u0022Well it\u0027s not \u003Cem\u003Ereally\u003C/em\u003E a flagpole, which, by the way, is a special type of flag that Kerbanauts used to use.\u0022\u003C/p\u003E\u003Cp\u003EAmelia turned around, still in shock. \u0022There\u0027s a beacon on top, do you need to replace the radio??\u0022\u003C/p\u003E\u003Cp\u003EThe Scientist: \u0022Amelia, stop, breath.\u0022\u003C/p\u003E\u003Cp\u003EAmelia took a breath. Photosynthesis turning her thoughts to the sun.\u003C/p\u003E\u003Cp\u003EAmelia: \u0022Why doesn\u0027t the flag get bleached by the sun? It\u0027s made of paper. You\u0027ve got a paper space ship-- do you feel stupid?\u0022\u003C/p\u003E\u003Cp\u003EThe Scientist: \u0022What?\u0022\u003C/p\u003E\u003Cp\u003EAmelia: \u0022Sorry back on the goggles.\u0022\u003C/p\u003E\u003Cp\u003EThe Scientist: \u0022it\u0027s camouflage. It\u0027s disguised as an Extend-o-matic Flagpole from 1963. Every time the Spacey-Wacey-Wibbly-Wobbly-Ship is placed in a new location, within the first \u003Cem\u003ENANOFRAMESECOND\u003C/em\u003E of placing it analyzes its surroundings calculates a 12-dimensional data map of everything within a 2.5km radius and determines which placement orientation would look most aesthetic within the environment.\u0022\u003C/p\u003E\u003Cp\u003EAmelia chuckled a bit.\u003C/p\u003E\u003Cp\u003EThe scientist: \u0022And then it disguises itself as a wonky-placed flagpole from 1963.\u0022\u003C/p\u003E\u003Cp\u003EAmelia: \u0022Oh, why?\u0022\u003C/p\u003E\u003Cp\u003EThe Scientist: \u0022It\u0027s actually a bit of a fault actually, I\u0027ve been meaning to check.\u0022\u003C/p\u003E\u003Cp\u003EAmelia: \u0022What, it\u0027s a bad sun-unlit orientation every time?\u0022\u003C/p\u003E\u003Cp\u003EThe Scientist: \u0022Well, yeah, I suppose now that you mention.\u0022\u003C/p\u003E\u003Cp\u003EAmelia: \u0022Well, how long\u0027s it been doing that?\u0022\u003C/p\u003E\u003Cp\u003EThe Scientist: \u0022Oh not long. Only since 0.20.\u0022\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/C8tuI38ChUI?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-02-13T04:00:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Maximus97\u0022 data-cite=\u0022Maximus97\u0022\u003E\u003Cdiv\u003EI do agree a \u0022Rotate Flag\u0022 would be the best way to go.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA long time ago, I wrote a mod (that never made it to the release forum) that does this. Maltesh asked me to release it so I dusted it off, fixed some old bugs and \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/110438\u0022 rel=\u0022external nofollow\u0022\u003Ehere it is\u003C/a\u003E \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022http://i.imgur.com/8LKvwt7.png\u0022 alt=\u00228LKvwt7.png\u0022\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Tex","CreatedById":75164,"CreatedDateTime":"2015-02-13T04:06:46Z","Content":"\n\u003Cp\u003EOoh! How much does it rotate? 90 degrees? 45? Less?\u003C/p\u003E\n"},{"CreatedByName":"Renegrade","CreatedById":96629,"CreatedDateTime":"2015-02-13T05:06:43Z","Content":"\n\u003Cp\u003ETo illustrate my findings, the stock flag code seems to like to place flags at right angles to the current terrain slope (I guess it\u0027s to prevent the flag from clipping into terrain on really steep slopes? not sure why though, as it would be impossible to stand on such a slope to begin with~)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://alpha.renegrade.net/images/Stock-FlagSlope.png\u0022 alt=\u0022Stock-FlagSlope.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe flag will orient itself along the line defined by the green arrows. The slope goes up/down along the line defined by the red arrow (in case the \u0027piece of cheese\u0027 thing wasn\u0027t clear enough).\u003C/p\u003E\u003Cp\u003EALL BOW BEFORE MY TERRIFYING* MSPAINT SKILLS, AND DESPAIR!\u003C/p\u003E\u003Cp\u003E(* - this is my special way of saying \u0027terrible\u0027 btw)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EA long time ago, I wrote a mod (that never made it to the release forum) that does this. Maltesh asked me to release it so I dusted it off, fixed some old bugs and \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/110438\u0022 rel=\u0022external nofollow\u0022\u003Ehere it is\u003C/a\u003E \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Ca href=\u0022http://i.imgur.com/8LKvwt7.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/8LKvwt7.png\u003C/a\u003E\u003C/blockquote\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESweet, and thanks!\u003C/p\u003E\n"},{"CreatedByName":"cpast","CreatedById":112846,"CreatedDateTime":"2015-02-13T05:23:01Z","Content":"\n\u003Cp\u003EIf it\u0027s revised, it shouldn\u0027t be revised to face away from the Kerbal. It should be set parallel to the camera plane, facing left-to-right.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-02-13T05:30:28Z","Content":"\n\u003Cp\u003EI was a pretty big part of that original thread and I did a lot of testing.\u003C/p\u003E\u003Cp\u003EIf you do the *exact* same thing, the flag will point in the exact same way. However if you do anything different the flag will point a different way. Even just picking up the flag and replanting counts as doing something different.\u003C/p\u003E\u003Cp\u003EEDIT: Sweet mod!\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-02-13T09:51:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Maximus97\u0022 data-cite=\u0022Maximus97\u0022\u003E\u003Cdiv\u003EOoh! How much does it rotate? 90 degrees? 45? Less?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E5 degree increments by default, but you can customize it to whatever you want using the config file\u003C/p\u003E\n"},{"CreatedByName":"Xaiier","CreatedById":22833,"CreatedDateTime":"2015-02-13T11:43:56Z","Content":"\n\u003Cp\u003ESo I delved in and figured out the arcane magic which drives the flag placement system.\u003C/p\u003E\u003Cp\u003EHere\u0027s what happens, in simplified, comical form:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EThe kerbal looks at the ground in front of him, taking note of how steep the ground is in that direction. Kerbal flag placing guidelines mandate that in order to prevent injury, flags may only be placed on ground the same height as that on which they are standing.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe kerbal looks exactly 40 degrees to the left, taking note again of the ground height. Kerbal flag placing guidelines are very specific about this. Failure to do so may result in spontaneous combustion and/or death.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe kerbal repeats the last step another 8 times, in order to properly survey his surroundings (it is not explained how said kerbal is able to do so without actually turning all the way around, though our leading theorists on the topic believe their large helmet secretly disguises a number of rear mounted cameras at 40 degree intervals)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe kerbal then looks over his notes, and chooses which of the 9 directions he surveyed based on how flat the ground is in that direction.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EThe kerbal turns towards that direction, and places the flag, ensuring that the extension of the flag is away from him. Kerbal flag placing guidelines mandate that flags only be allowed to extend when pointing away from helmets, to prevent injury from being knocked in the head.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENote that the 40 degree intervals will sometimes result in the kerbal choosing a point which you may not think is the closest counterclockwise-turn point, as it is possible that it will sample a direction which is slightly high, slightly low, and then continue on and sample a closer to flat direction about 180 degrees from there. This is likely what causes the seemingly random behavior of placement. It is also worth noting that this is also why the flag placement is always off by a few degrees from being perfectly perpendicular to the slope.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-13T11:49:42Z\u0022 title=\u002202/13/2015 11:49  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 13, 2015\u003C/time\u003E by Xaiier\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Renegrade","CreatedById":96629,"CreatedDateTime":"2015-02-13T12:11:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Xaiier\u0022 data-cite=\u0022Xaiier\u0022\u003E\u003Cdiv\u003ESo I delved in and figured out the arcane magic which drives the flag placement system.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHehe cute \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWas that from the actual code itself, btw? I\u0027m surprised it\u0027s so involved (but it does explain my observations). O.o\u003C/p\u003E\n"},{"CreatedByName":"Xaiier","CreatedById":22833,"CreatedDateTime":"2015-02-13T12:24:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Renegrade\u0022 data-cite=\u0022Renegrade\u0022\u003E\u003Cdiv\u003EHehe cute \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EWas that from the actual code itself, btw? I\u0027m surprised it\u0027s so involved (but it does explain my observations). O.o\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes. What surprised me is that it is such a complex system in there to try and avoid clipping into the terrain and probably also to help with the animation. It\u0027s arbitrarily random and rather annoying if you want to place a flag in a particular direction, as even with my explanation you still can\u0027t really control which way it goes.\u003C/p\u003E\n"},{"CreatedByName":"Joonatan1998","CreatedById":97636,"CreatedDateTime":"2015-02-13T18:23:56Z","Content":"\n\u003Cp\u003EThey have that complex system to prevent flags from clipping...\u003C/p\u003E\u003Cp\u003EBut they made parts clipping into a feature?\u003C/p\u003E\n"}]}