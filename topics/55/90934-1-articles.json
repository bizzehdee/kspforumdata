{"TopicId":90934,"ForumId":55,"TopicTitle":"Porting KSP to Unity 5","CreatedByName":"W1ntermute","CreatedById":117426,"CreatedDateTime":"2014-11-22T01:06:00Z","PageNum":1,"Articles":[{"CreatedByName":"W1ntermute","CreatedById":117426,"CreatedDateTime":"2014-11-22T01:06:00Z","Content":"\n\u003Cp\u003EHere\u0027s an article on the dev team that\u0027s working on the game \u0027Rust\u0027. Seems like it went pretty painlessly and with major improvements to sound and Physx implementation\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://blogs.unity3d.com/2014/11/19/porting-to-unity-5-the-untold-rust-journey/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://blogs.unity3d.com/2014/11/19/porting-to-unity-5-the-untold-rust-journey/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESo Squad, when can we expect a shift over to Unity 5 for KSP?\u003C/p\u003E\n"},{"CreatedByName":"BDelacroix","CreatedById":121050,"CreatedDateTime":"2014-11-22T01:26:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022W1ntermute\u0022 data-cite=\u0022W1ntermute\u0022\u003E\u003Cdiv\u003EHere\u0027s an article on the dev team that\u0027s working on the game \u0027Rust\u0027. Seems like it went pretty painlessly and with major improvements to sound and Physx implementation\u003Cp\u003E\u003Ca href=\u0022http://blogs.unity3d.com/2014/11/19/porting-to-unity-5-the-untold-rust-journey/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://blogs.unity3d.com/2014/11/19/porting-to-unity-5-the-untold-rust-journey/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESo Squad, when can we expect a shift over to Unity 5 for KSP?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think this is a verboten question, you might want to duck.\u003C/p\u003E\n"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2014-11-22T01:45:50Z","Content":"\n\u003Cp\u003EThis is probably something of the lowest priority for Squad. First, Unity 5 is still being worked on, and second, this probably won\u0027t fix most of the gameplay problems.\u003C/p\u003E\n"},{"CreatedByName":"Rithsom","CreatedById":114646,"CreatedDateTime":"2014-11-22T01:49:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022longbyte1\u0022 data-cite=\u0022longbyte1\u0022\u003E\u003Cdiv\u003EThis is probably something of the lowest priority for Squad. First, Unity 5 is still being worked on, and second, this probably won\u0027t fix most of the gameplay problems.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI remember hearing Squad say multiple times that once Unity 5 is released, they will make it first priority to upgrade.\u003C/p\u003E\n"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2014-11-22T01:53:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Rthsom\u0022 data-cite=\u0022Rthsom\u0022\u003E\u003Cdiv\u003EI remember hearing Squad say multiple times that once Unity 5 is released, they will make it first priority to upgrade.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmm, maybe that\u0027s why they\u0027ve decided to jump to 0.90.\u003C/p\u003E\n"},{"CreatedByName":"OrbitusII","CreatedById":57305,"CreatedDateTime":"2014-11-22T01:55:20Z","Content":"\n\u003Cp\u003EIndeed. U5 is not yet released (heck, they\u0027re still working on 4.6, U5 isn\u0027t scheduled for release until sometime next year) but once it is they\u0027ll definitely work on the upgrade, especially to take advantage of the new version of PhysX. As of now, U5 is still in beta.\u003C/p\u003E\n"},{"CreatedByName":"Specialist290","CreatedById":58489,"CreatedDateTime":"2014-11-22T02:15:48Z","Content":"\n\u003Cp\u003EDropping this thread into Suggestions and Development Discussion \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"boxman","CreatedById":61559,"CreatedDateTime":"2014-11-22T04:39:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022longbyte1\u0022 data-cite=\u0022longbyte1\u0022\u003E\u003Cdiv\u003EThis is probably something of the lowest priority for Squad. First, Unity 5 is still being worked on, and second, this probably won\u0027t fix most of the gameplay problems.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFrom what I understood it is a pretty high priority. And how will not multicore and possible better 64bit support not affect gameplay??\u003C/p\u003E\u003Cp\u003EIt will significantly help the performance issues and the sooner that has been dealt with the better.\u003C/p\u003E\u003Cp\u003EI believe they even said that once they get their hands on unity5 that they will focus on it right away.\u003C/p\u003E\u003Cp\u003EAnd if it involves changing some code, it would not make sense to first write that for unity4 just to port it over later as that would be more work.\u003C/p\u003E\n"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2014-11-22T05:05:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022OrbitusII\u0022 data-cite=\u0022OrbitusII\u0022\u003E\u003Cdiv\u003EIndeed. U5 is not yet released (heck, they\u0027re still working on 4.6, U5 isn\u0027t scheduled for release until sometime next year) but once it is they\u0027ll definitely work on the upgrade, especially to take advantage of the new version of PhysX. As of now, U5 is still in beta.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhere did you hear sometime next year? Last I heard (which was around July) it was supposed to be 4th Quarter 2014. For those counting, that leaves about 5 weeks.\u003C/p\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2014-11-22T06:51:58Z","Content":"\n\u003Cp\u003EWhat I\u0027m dying to know is: when do we get a Unity built with a non-ancient version of mono? the boeheim GC overhead is awfull (and I can\u0027t get Unity\u0027s mono fork to compile the \u0027experimental\u0027 sgen). Mainstream mono has had multithreaded generational GC for some time now...\u003C/p\u003E\u003Cp\u003EOn an aside, recompiling mono with \u0027--enable-parallel-mark\u0027 (disabled as \u0022causes crashes\u0022 in Unity\u0027s buildscripts) significantly reduces the \u0022stopping the world\u0022 GC hitches for me... no crashes so far \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EOf course the real elephant in the room, as usual, is the single threaded physx...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-22T07:02:37Z\u0022 title=\u002211/22/2014 07:02  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 22, 2014\u003C/time\u003E by steve_v\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"r4pt0r","CreatedById":90471,"CreatedDateTime":"2014-11-22T08:15:26Z","Content":"\n\u003Cp\u003Ewhy can the rust devs have U5 already?\u003C/p\u003E\n"},{"CreatedByName":"TMS","CreatedById":57134,"CreatedDateTime":"2014-11-22T09:27:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022steve_v\u0022 data-cite=\u0022steve_v\u0022\u003E\u003Cdiv\u003EOn an aside, recompiling mono with \u0027--enable-parallel-mark\u0027 (disabled as \u0022causes crashes\u0022 in Unity\u0027s buildscripts) significantly reduces the \u0022stopping the world\u0022 GC hitches for me... no crashes so far \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003EOf course the real elephant in the room, as usual, is the single threaded physx...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhoa, whoa! The hitching issue has been unresolved for as long as I\u0027ve played the game. It\u0027s got better with each version, but is still present.\u003C/p\u003E\u003Cp\u003EIs your solution well-known? Might want to write up an idiots guide if it works.\u003C/p\u003E\n"},{"CreatedByName":"steve_v","CreatedById":69272,"CreatedDateTime":"2014-11-22T10:29:47Z","Content":"\n\u003Cp\u003EIt\u0027s not a solution, it\u0027s an experiment.\u003C/p\u003E\u003Cp\u003EAs far as I can tell, it multithreads part of the garbage collector. At least that\u0027s what it does in stock mono.\u003C/p\u003E\u003Cp\u003EMy experiences are entirely subjective, and only on GNU/Linux. It may well just be placebo \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe idiots guide would be: \u003C/p\u003E\u003Cp\u003ECheck out \u003Ca href=\u0022https://github.com/Unity-Technologies/mono\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Unity-Technologies/mono\u003C/a\u003E. \u003C/p\u003E\u003Cp\u003EModify external/buildscripts/build_runtime_linux.pl to reverse the --disable-parallel-mark configure flag.\u003C/p\u003E\u003Cp\u003E\u0027perl external/buildscripts/build_runtime_linux.pl\u0027. (with -build64=1 if you want 64bit)\u003C/p\u003E\u003Cp\u003ECopy eg. \u0027builds/embedruntimes/linux64/libmono.so\u0027 to \u0026lt;KSP_INSTALL_DIR\u0026gt;/KSP_Data/Mono/x86_64/.\u003C/p\u003E\u003Cp\u003ESee if you can see a difference \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E - probaby not unless you run a lot of mods that create a lot of garbage.\u003C/p\u003E\u003Cp\u003EThere are a few other things that can be messed with here, for example using __thread rather than libpthreads which may also be slightly faster - see the \u003Ca href=\u0022https://github.com/Unity-Technologies/mono/blob/unity-staging/README\u0022 rel=\u0022external nofollow\u0022\u003EREADME\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EUnfortunately the changes Unity made to this mono fork means most of the GC related options no longer compile, eg. using sgen or system boehm.\u003C/p\u003E\u003Cp\u003EMessing with mono may not do anything usefull at all, or it may eat your kitten. \u0027at own risk\u0027 applies here, but I\u0027d be interested to know if it really does make a difference.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-22T10:48:13Z\u0022 title=\u002211/22/2014 10:48  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 22, 2014\u003C/time\u003E by steve_v\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FunnyBunny14","CreatedById":128892,"CreatedDateTime":"2014-11-22T11:23:27Z","Content":"\n\u003Cp\u003EUnity 5! If the 64-bit support actually works, I can totally max out all my mods!\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-11-22T12:02:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022r4pt0r\u0022 data-cite=\u0022r4pt0r\u0022\u003E\u003Cdiv\u003Ewhy can the rust devs have U5 already?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESince the public beta is out, everybody can buy in and start using it. \u003C/p\u003E\u003Cp\u003EIt\u0027s also not forbidden to ship a game with beta unity versions, at least the public ones.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-22T12:05:09Z\u0022 title=\u002211/22/2014 12:05  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 22, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"r4pt0r","CreatedById":90471,"CreatedDateTime":"2014-11-22T12:06:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022slumpie\u0022 data-cite=\u0022slumpie\u0022\u003E\u003Cdiv\u003ESince the public beta is out, everybody can buy in and start using it. \u003Cp\u003EIt\u0027s also not forbidden to ship a game with beta unity versions, at least the public ones.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eso do we assume it wasnt really top priority? or are they waiting for full release?\u003C/p\u003E\n"},{"CreatedByName":"Mutex","CreatedById":106937,"CreatedDateTime":"2014-11-22T12:07:45Z","Content":"\n\u003Cp\u003EProbably waiting for the full release.\u003C/p\u003E\n"},{"CreatedByName":"boxman","CreatedById":61559,"CreatedDateTime":"2014-11-22T16:58:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022r4pt0r\u0022 data-cite=\u0022r4pt0r\u0022\u003E\u003Cdiv\u003Ewhy can the rust devs have U5 already?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThey have access to the beta afaik. From the looks of it squad can get access as well now if they preordered unity5.\u003C/p\u003E\n"},{"CreatedByName":"boxman","CreatedById":61559,"CreatedDateTime":"2014-11-22T16:59:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022r4pt0r\u0022 data-cite=\u0022r4pt0r\u0022\u003E\u003Cdiv\u003Eso do we assume it wasnt really top priority? or are they waiting for full release?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFor all we know they might be working on it right now. Doubt they would announce anything before the port is mostly ready.\u003C/p\u003E\n"},{"CreatedByName":"FunnyBunny14","CreatedById":128892,"CreatedDateTime":"2014-11-22T20:24:13Z","Content":"\n\u003Cp\u003EI\u0027m awaiting the next dev notes \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}