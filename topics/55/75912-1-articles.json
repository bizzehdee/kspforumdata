{"TopicId":75912,"ForumId":55,"TopicTitle":"[DEV/KSP core] make KSP less vulnerable to plug-in exceptions","CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-06-25T09:16:54Z","PageNum":1,"Articles":[{"CreatedByName":"Justin Kerbice","CreatedById":101695,"CreatedDateTime":"2014-06-25T09:16:54Z","Content":"\n\u003Cp\u003EHi,\u003C/p\u003E\u003Cp\u003Eas it is now, KSP is very weak against plug-in mess and particulary when exceptions occurred in a loop (or what is look to be in a loop as there is a bunch of exception in log repeated many time in a consistent pattern) and it makes the entire game almost freeze, slow down terribly (FPS might be close to 1 or even lower).\u003C/p\u003E\u003Cp\u003EKSP itself should not behave like this, is like some apps which crash entirely because of one single tiny plug-in crash (example: 3ds max 2015/PNG plug-in on some export of texture), it should behave mostly like better apps like the Gimp which is able to survive a plug-in crash.\u003C/p\u003E\u003Cp\u003EIt would be a lot more better than some \u0022half done\u0022 features like 0.23 career mode IMHO.\u003C/p\u003E\u003Cp\u003ERegards.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-25T09:25:58Z","Content":"\n\u003Cp\u003EIf a plugin is causing rapid exceptions like this (presumably when the plugin is called for each frame) then the plugin needs fixing, not KSP. Adding any kind of mechanism to better protect against plugin bugs will make the game run slower and it is not really worth it.\u003C/p\u003E\u003Cp\u003EI also think that your criticism of 0.23 career mode is totally unjustified. A lot of people have quite a lot of fun playing it and it is definitely required for scope completion whereas virtually pointless (and probably performance affecting) protection against mod bugs is not...\u003C/p\u003E\n"},{"CreatedByName":"Slouch","CreatedById":97348,"CreatedDateTime":"2014-06-25T14:52:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EIf a plugin is causing rapid exceptions like this (presumably when the plugin is called for each frame) then the plugin needs fixing, not KSP. Adding any kind of mechanism to better protect against plugin bugs will make the game run slower and it is not really worth it.\u003Cp\u003EI also think that your criticism of 0.23 career mode is totally unjustified. A lot of people have quite a lot of fun playing it and it is definitely required for scope completion whereas virtually pointless (and probably performance affecting) protection against mod bugs is not...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHere here.\u003C/p\u003E\n"},{"CreatedByName":"Ruedii","CreatedById":57704,"CreatedDateTime":"2014-06-25T15:37:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EIf a plugin is causing rapid exceptions like this (presumably when the plugin is called for each frame) then the plugin needs fixing, not KSP. Adding any kind of mechanism to better protect against plugin bugs will make the game run slower and it is not really worth it.\u003Cp\u003EI also think that your criticism of 0.23 career mode is totally unjustified. A lot of people have quite a lot of fun playing it and it is definitely required for scope completion whereas virtually pointless (and probably performance affecting) protection against mod bugs is not...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m thinking that if the mechanism can be done in a manner that doesn\u0027t cause issues. Better isolation and abstraction sockets would be nice. They have almost no impact on newer versions of Unity. This would reduce issues with version compatability as well as reducing platform-specific bugs.\u003C/p\u003E\u003Cp\u003EReporting problems with mods to the user with a popup and allowing the user to block future notices would be a nice feature. (Default notice should depend on mode. In strict mode, activated in the debug menu, the notice should trigger on the first non-fatal exception. In normal mode it should only be triggered on a string of 8 or more non-fatal exceptions or one fatal exception from the mod. This number, of course, doubles each time the notice is blocked.)\u003C/p\u003E\u003Cp\u003EAdditionally on the topic of reducing impact of faults, in mods or otherwise, performance impact on logging repeat messages could be reduced by improved by combining repeat entries, options to select what to log (Fatal Errors, All Errors, Warnings, Debug or Trace) on each catigory of notice.\u003C/p\u003E\u003Cp\u003ESetting it to just log fatal errors could really improve performance while still providing the basic information needed to diagnose the problem. If you need more information about a problem, you can always increase it to warning or debug, depending on the issue. It is rare that you would need to set anything to trace, other than possibly VAB bugs. (Yeah we all know those!)\u003C/p\u003E\u003Cp\u003EAdditionally, having an option to place a substantial (64KB-1MB) buffer the log file would allow you to reduce filesystem writes, while risking loss of log entries in the event of a crash. Such a buffer uses almost no memory and could greatly accelerate the game for normal play, and if you are trying to diagnose a crash, and aren\u0027t getting a full log, you should turn this off.\u003C/p\u003E\u003Cp\u003EAlso I agree on the carreer mode. It\u0027s pretty good considering that it is incomplete. However, I look forward to having actual game assigned missions, instead of just trying to gather science.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-06-25T19:45:54Z","Content":"\n\u003Cp\u003EAs a creator of a mod that got stuck causing exactly this issue during development, I can see where you are coming from. Yet at the same time I have to disagree with you.\u003C/p\u003E\u003Cp\u003E(For the record, when you mess up KSP\u0027s save/load routine, you get some very interesting Kraken summonings.)\u003C/p\u003E\u003Cp\u003EThe reason being is I can\u0027t see how Squad could make KSP more resistant to plug-in problems without restricting the access we (the community) currently have to make pretty much any mod we want. \u003C/p\u003E\u003Cp\u003ETo create the sort of resistance you are talking about to a plugin screwing up would require Squad to stick a filter between the game engine and mods and only allow sanitized data back and forth which means Squad would have to specifically allow, and set limits on, what modders could do. \u003C/p\u003E\u003Cp\u003EEven just detecting an error is tricky, what qualifies as an error? One of the krakens I summoned was with a single error that KSP \u0022recovered\u0022 from the next update pass and was able to continue as normal. No further error messages were being logged, everything was functioning normally as far as the KSP engine was concerned. \u003C/p\u003E\u003Cp\u003EThe fact that my rover I had just launched to at the KSP launchpad for testing was on a self-propelling fast-track to solar orbit meant the error was game breaking, but as far as KSP was concerned there was no error present.\u003C/p\u003E\u003Cp\u003EI suppose what I\u0027m trying to say that was you are asking for is technically possible, but in my opinion it is not worth Squad\u0027s time investment to setup, not worth the loss of access to the game for mods that I expect would be required, and with how responsive mod creators are to fixing issues with there mods, I don\u0027t see the sort of hardening you are asking for as being worth it.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"}]}