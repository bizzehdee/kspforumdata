{"TopicId":130618,"ForumId":55,"TopicTitle":"Poor SAS performance","CreatedByName":"michelcolman","CreatedById":157405,"CreatedDateTime":"2016-01-24T10:50:30Z","PageNum":1,"Articles":[{"CreatedByName":"michelcolman","CreatedById":157405,"CreatedDateTime":"2016-01-24T10:50:31Z","Content":"\n\u003Cp\u003E\nWhen I started using SAS, I was a bit surprised how poorly it hunts for the intended target, often overshooting it, especially on craft with poor attitude control. I often have to help it and actually counteract its inputs, slowing it down as it approaches the target while SAS is still trying to accelerate towards it. It looks like the system\u0027s gains are tuned for high performance attitude control (working well using vectored engine thrust, with RCS or on very light craft with sufficiently large reaction wheels) but are woefully wrong when control is more limited. I can see it continue to\u00A0accelerate towards the target while it\u0027s totally obvious it\u0027s going to overshoot and it ought to be slowing down.\n\u003C/p\u003E\n\u003Cp\u003E\nIt would be nice if SAS would take the available torque into account so it stopped\u00A0accelerating towards the target and started\u00A0decelerating a lot earlier to avoid overshooting.\n\u003C/p\u003E\n"},{"CreatedByName":"Evanitis","CreatedById":145424,"CreatedDateTime":"2016-01-24T11:09:20Z","Content":"\n\u003Cp\u003E\nUmm... SAS\u0027s function is to hold a specific heading, and it does that pretty well if the craft has sufficient ways to control. It shouldn\u0027t be able to land at a specific target, not to mention making a rendezvous.\n\u003C/p\u003E\n"},{"CreatedByName":"michelcolman","CreatedById":157405,"CreatedDateTime":"2016-01-24T11:18:07Z","Content":"\n\u003Cp\u003E\nWhen I used the word \u0022target\u0022, I meant whatever target direction the SAS system has been tuned to. Prograde, normal, maneuver, whatever. When it\u0027s not already pointing that way and, for example, you switch it to hold prograde, it starts turning towards prograde but then overshoots it horribly, comes back, overshoots again, etc, until finally stabilizing. Almost invariably, I actually need to counteract its inputs. While it\u0027s rotating to the right and approaching the symbol, I have to push \u0022A\u0022 to slow it down before it gets there (or cheat by activating and deactivating time warp when it passes through the desired direction). Otherwise, on a relatively large rocket using standard pod control wheels, it takes forever to stabilize.\n\u003C/p\u003E\n"},{"CreatedByName":"Evanitis","CreatedById":145424,"CreatedDateTime":"2016-01-24T11:30:44Z","Content":"\n\u003Cp\u003E\nYeah, I see. I tend to use MJ\u0027s SmartA.S.S., that feels a bit better in this respect... but does the same if the craft is huge and has poor controls. Guess it\u0027s not that easy to precisely compute. I kinda\u0027 do what you do - corect the controls manually, or do it in full manual. Though I always blame my craft when I need to do so - I could have included sufficient RCS or reaction wheels.\n\u003C/p\u003E\n"},{"CreatedByName":"Frozen_Heart","CreatedById":118627,"CreatedDateTime":"2016-01-24T12:24:48Z","Content":"\n\u003Cp\u003E\nThe SAS is pretty poor. It can\u0027t hold a heading even if the player can with ease. Just drifts away.\n\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2016-01-24T19:09:56Z","Content":"\n\u003Cp\u003E\nWe\u0027re aware the PID has trouble. When we have time we\u0027ll be working on it.\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-01-25T04:11:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222377410\u0022 data-ipsquote-contentid=\u0022130618\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453662596\u0022 data-ipsquote-userid=\u002275006\u0022 data-ipsquote-username=\u0022NathanKell\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, NathanKell said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWe\u0027re aware the PID has trouble. When we have time we\u0027ll be working on it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks, good to hear!\n\u003C/p\u003E\n\u003Cp\u003E\nOne other issue I have with it, quite aside from the PID tuning:\u00A0 it doesn\u0027t seem to be following great-circle paths.\n\u003C/p\u003E\n\u003Cp\u003E\nThat is, suppose I\u0027m pointing in direction A (and am stationary), and then I tell SAS to point in direction B (prograde, retrograde, maneuver node, whatever).\u00A0 I would expect the ship to rotate in a \u0022straight line\u0022 from A to B.\u00A0 That is, if you imagine the navball crosshairs scribing a trail across the navball\u0027s surface as the ship rotates, I\u0027d expect it to be a great-circle arc on the surface of the navball.\n\u003C/p\u003E\n\u003Cp\u003E\nInstead, what the navball seems to do is to follow some sort of \u0022do X, then Y\u0022 behavior.\u00A0 I\u0027ve never observed it closely enough to work out exactly what it\u0027s doing, but I\u0027d guess it\u0027s something like \u0022rotate to make angle #1 match, then angle #2\u0022, or something like that.\u00A0 As if a plane were navigating from Seattle to Miami by heading due southeast until the latitude matches, then sharply turning to head due east to the target-- something like that.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"FullMetalMachinist","CreatedById":156531,"CreatedDateTime":"2016-01-25T04:31:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222378087\u0022 data-ipsquote-contentid=\u0022130618\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453695090\u0022 data-ipsquote-userid=\u0022125662\u0022 data-ipsquote-username=\u0022Snark\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 minutes ago, Snark said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027d guess it\u0027s something like \u0022rotate to make angle #1 match, then angle #2\u0022, or something like that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt might be doing the equivalent of a \u0027dogleg\u0027 movement. When some older CNC milling machines do a rapid movement, they can\u0027t calculate the correct angle to move straight from coordinate x1, y1 to x2, y2. So instead they move in a 45 degree angle until it hits the first position (x or y, whichever is closer), then goes straight to the second.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-01-25T04:51:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222378104\u0022 data-ipsquote-contentid=\u0022130618\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453696291\u0022 data-ipsquote-userid=\u0022156531\u0022 data-ipsquote-username=\u0022FullMetalMachinist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 minutes ago, FullMetalMachinist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt might be doing the equivalent of a \u0027dogleg\u0027 movement. When some older CNC milling machines do a rapid movement, they can\u0027t calculate the correct angle to move straight from coordinate x1, y1 to x2, y2. So instead they move in a 45 degree angle until it hits the first position (x or y, whichever is closer), then goes straight to the second.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat kind of motion is certainly what it feels like.\n\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2016-01-25T08:14:06Z","Content":"\n\u003Cp\u003E\nI would have actually said it just has a lot of trouble with being close to 90 degrees out from it\u0027s target, as it\u0027s passing through about 100-80 degrees of separation that it suddenly dives off in a seemingly random direction (probably indicates it\u0027s using Euler angles or Vectors instead of Quaternions). Even with Quat\u0027s, if you do the calculations in single precision the roll error gets really jumpy around 90 degrees (found that one out when I was calculating the \u003Ca href=\u0022https://github.com/Crzyrndm/TweakableSAS/blob/master/TweakableSAS/TweakableSAS.cs#L213-L218\u0022 rel=\u0022external nofollow\u0022\u003Eshortest roll\u003C/a\u003E distance for my SAS mod)\n\u003C/p\u003E\n\u003Cp\u003E\nAnother oddity to note with the current SAS PID modules, the module used for the direction following has damping even when it\u0027s only under proportional control. I\u0027d guess this is so the roll controller actually does something without any fixed target, but it does make tuning pitch/yaw for some torque ratio\u0027s nigh on impossible.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-26T20:57:59Z\u0022 title=\u002201/26/2016 08:57  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 26, 2016\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"magnemoe","CreatedById":57801,"CreatedDateTime":"2016-01-26T22:41:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222376927\u0022 data-ipsquote-contentid=\u0022130618\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453635044\u0022 data-ipsquote-userid=\u0022145424\u0022 data-ipsquote-username=\u0022Evanitis\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 24.1.2016 at 0:30 PM, Evanitis said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYeah, I see. I tend to use MJ\u0027s SmartA.S.S., that feels a bit better in this respect... but does the same if the craft is huge and has poor controls. Guess it\u0027s not that easy to precisely compute. I kinda\u0027 do what you do - corect the controls manually, or do it in full manual. Though I always blame my craft when I need to do so - I could have included sufficient RCS or reaction wheels.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, mechjeb has an better controller who don\u0027t overshoot so much. I found that using SAS keep prograde during aerobrake tend to drain batteries hard.\u00A0\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Francois424","CreatedById":98138,"CreatedDateTime":"2016-01-27T23:24:26Z","Content":"\n\u003Cp\u003E\nRemote tech computer is pretty nice as well... as long as you have a connection (or a human at the helm?\u00A0 been a while since I played with that mod).\n\u003C/p\u003E\n\u003Cp\u003E\nGood news Nathan, thanks for the heads-up !\n\u003C/p\u003E\n"}]}