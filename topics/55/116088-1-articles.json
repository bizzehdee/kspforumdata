{"TopicId":116088,"ForumId":55,"TopicTitle":"v1.1 and/or Unity 5 Speculations","CreatedByName":"Gampersnaz","CreatedById":147919,"CreatedDateTime":"2015-07-16T18:48:56Z","PageNum":1,"Articles":[{"CreatedByName":"Gampersnaz","CreatedById":147919,"CreatedDateTime":"2015-07-16T18:48:56Z","Content":"\n\u003Cp\u003EJust wondering everyone\u0027s thoughts about how Unity 5 will improve ksp. Will it maybe be ported for the 1.1 update? Do you think the visuals will be a little better in terms of shaders and lighting, or will it be the same? Will the physics be more efficient since it will use a newer version of PhysX? Any other thoughts or comments?\u003C/p\u003E\n"},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2015-07-16T21:08:45Z","Content":"\n\u003Cp\u003EI can\u0027t answer on the subject of shaders and lighting. There are visual improvements in U5, but I\u0027m pretty sure Squad would have to do some work to implement the improvements.\u003C/p\u003E\u003Cp\u003ESquad is reimplementing the UI with the intent of being identical to the user, but consolidating three UI subsystems into a single subsystem to improve efficiency.\u003C/p\u003E\u003Cp\u003ESince U5 uses a more recent version of PhysX, we should see some improvements there. Most likely, we\u0027ll be able to handle craft with more parts, though how much of an increase isn\u0027t certain. This breaks down into two factors. First, the PhysX code is more optimized. Microbenchmarks indicate that the connected rigid body simulation code can run up to 50% faster. I doubt we\u0027ll see that translate into 50% more parts for the same FPS, but we\u0027ll see.\u003C/p\u003E\u003Cp\u003ESecond, PhysX 3.3 allows multiple concurrent threads to run the physics simulation, so multi-core machines will have some performance gains under certain circumstances. This isn\u0027t as big a win as you might think at first as PhysX 3.3 doesn\u0027t allow for more than one thread to process a given set of connected rigid parts at the same time, which is to say that the physics of a single craft can\u0027t get split up between multiple CPU cores. \u003C/p\u003E\u003Cp\u003EThis isn\u0027t just a limitation of PhysX, despite claims otherwise, there\u0027s not a general purpose physics engine that does this. Most modern physics engines can use multiple CPU cores to simulate unconnected bodies, even if those bodies are bouncing off of each other, but actual connected rigid bodies have only been split across multiple CPU cores in research work more constrained than what currently happens in general purpose physics engines.\u003C/p\u003E\u003Cp\u003ESo there should be some improvements in framerate with the switch, but we probably won\u0027t know how noticeable the improvements will be until someone that has gotten their hands on 1.1 is allowed to report their impression.\u003C/p\u003E\n"},{"CreatedByName":"SessoSaidSo","CreatedById":111600,"CreatedDateTime":"2015-07-21T05:06:44Z","Content":"\n\u003Cp\u003EAh yea! I hope they fix the stutter issue!\u003C/p\u003E\n"},{"CreatedByName":"Kuansenhama","CreatedById":114023,"CreatedDateTime":"2015-07-21T15:38:39Z","Content":"\n\u003Cp\u003EI certainly hope there is some increase in the amount of parts we can get away with before lag becomes a problem. I know on my machine I begin to notice lag at around 250 parts, and at about 500 parts, things become basically unplayable. The problem of course being that a space station, where each module needs radial RCS ports and multiple docking ports, solar panels, probe cores, etc, the part count gets high fast. I know I have a friend who can manage 800-1000 parts in the physics bubble. Granted, he has a powerful computer and I\u0027m stuck playing on a laptop.\u003C/p\u003E\u003Cp\u003EIn other words I want/would like to think that they will better optimize the game. Even if that comes at the expense of graphical quality.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-21T15:45:07Z\u0022 title=\u002207/21/2015 03:45  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 21, 2015\u003C/time\u003E by Kuansenhama\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"KrazyKrl","CreatedById":65849,"CreatedDateTime":"2015-07-21T17:44:16Z","Content":"\n\u003Cp\u003EHere\u0027s hoping that unconnected rigidbody chains are at least multithreadable for physics calculations (And any craft packed for non-physical time warp.) You might even be able to multithread docked craft together if you take docking ports as a special case; control authority then becomes an issue.\u003C/p\u003E\n"},{"CreatedByName":"TheTom","CreatedById":99271,"CreatedDateTime":"2015-07-21T17:51:55Z","Content":"\n\u003Cp\u003EI would give up on PhysX making a difference. Investigations ni another thread showed clearly that the current performance is not a PhysX problem but seems to be located in 2 subsystems: Heat distribution and - extremely - resssource allocation. It seems that the way for example fuel and electricity consumption is handled is extremely suboptimal, exploding in needed processing power the more resorce containers one has.\u003C/p\u003E\u003Cp\u003ETry putting 50 batteries on a rocket and watch the slideshow style of bad.\u003C/p\u003E\u003Cp\u003EIf that is the case, then the PhysX performance benefits may result in some small improovements - but one can hope that the code in question that is the real culprit is optimized at one point.\u003C/p\u003E\u003Cp\u003EThe thread in question is \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/128021-Just-why-is-KSP-Physics-so-slow-%28NOT-a-Rant%29\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/128021-Just-why-is-KSP-Physics-so-slow-%28NOT-a-Rant%29\u003C/a\u003E - I suggest reading the whole list. Anyone remembering flying multi hundred part rockets? PhysX did not change, but it is not really possible these days \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2015-07-21T22:39:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KrazyKrl\u0022 data-cite=\u0022KrazyKrl\u0022\u003E\u003Cdiv\u003EHere\u0027s hoping that unconnected rigidbody chains are at least multithreadable for physics calculations (And any craft packed for non-physical time warp.) You might even be able to multithread docked craft together if you take docking ports as a special case; control authority then becomes an issue.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThey are. It\u0027s not quite linear scaling (it takes three cores to double the work that one core can do), but it can be done without much extra development work, as I understand it.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TheTom\u0022 data-cite=\u0022TheTom\u0022\u003E\u003Cdiv\u003EI would give up on PhysX making a difference. Investigations ni another thread showed clearly that the current performance is not a PhysX problem but seems to be located in 2 subsystems: Heat distribution and - extremely - resssource allocation. It seems that the way for example fuel and electricity consumption is handled is extremely suboptimal, exploding in needed processing power the more resorce containers one has.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is one of the reasons that I almost always spend some time lowering expectations when discussing U5 performance. Yes, the rigid-body microbenchmarks run 50% faster, but I don\u0027t expect us to see that much of a performance boost since that\u0027s only part of what\u0027s happening. I\u0027d love to see this particular issue optimized in 1.1. Between the faster PhysX and this optimization, we\u0027d get to more accurately see what the next bottleneck will be.\u003C/p\u003E\u003Cp\u003EWorse, even a 50% improvement across the board doesn\u0027t mean 50% more parts would have the same performance as now. Since the resource issue mentioned in that thread describes an O(n^2) algorithm, performance dropoff from additional parts isn\u0027t linear. Even with optimization, I don\u0027t think that issue will reach O(n), but really O(n*log(n)) would still be better than O(n^2).\u003C/p\u003E\n"},{"CreatedByName":"waterlubber","CreatedById":119333,"CreatedDateTime":"2015-07-22T00:51:14Z","Content":"\n\u003Cp\u003EIt \u003Cem\u003Ebetter\u003C/em\u003E fix the random Linux crashing whenever you change a scene. I think Kraken drives work more often than KSP doesn\u0027t crash.\u003C/p\u003E\n"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2015-07-22T13:25:47Z","Content":"\n\u003Cp\u003EI am sad that games still use the CPU for physics calculations. They are terrible at it!! Why oh why can\u0027t Unity/KSP use the massively parallel performance of modern GPUs?\u003C/p\u003E\u003Cp\u003EOh and Squad really need to fix the bug fest that is the heat system. It\u0027s slowed the game down so much and for what?? Some pretty colours..\u003C/p\u003E\n"},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2015-07-22T17:59:31Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Majorjim\u0022 data-cite=\u0022Majorjim\u0022\u003E\u003Cdiv\u003EI am sad that games still use the CPU for physics calculations. They are terrible at it!! Why oh why can\u0027t Unity/KSP use the massively parallel performance of modern GPUs?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBecause Unity doesn\u0027t allow for rigid body simulation to run on the GPU yet? Nor did any of the other major physics engines, last I checked. Unity 5.1 allows hair to be done on the GPU, but that\u0027s it so far.\u003C/p\u003E\n"}]}