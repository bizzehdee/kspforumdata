{"TopicId":113968,"ForumId":55,"TopicTitle":"Flags in DDS file format?","CreatedByName":"Northstar1989","CreatedById":91005,"CreatedDateTime":"2015-06-24T09:39:04Z","PageNum":1,"Articles":[{"CreatedByName":"Northstar1989","CreatedById":91005,"CreatedDateTime":"2015-06-24T09:39:04Z","Content":"\n\u003Cp\u003EThis is as simple as it sounds. I was looking through the Squad folder in GameData, and I noticed that while all the parts and internals textures were in .DDS file format, \u003Cem\u003E\u003Cstrong\u003Eall the flags (images that appear on the sides of some parts, on flags you plant, etc.) were in .PNG file format.\u003C/strong\u003E\u003C/em\u003E\u003C/p\u003E\u003Cp\u003EIs/would it be possible for Squad to convert these files to .DDS file format as well? I assume that would marginally improve improve memory management/loading in the same way converting all the parts textures to .DDS file format did?\u003C/p\u003E\u003Cp\u003ERegards,\u003C/p\u003E\u003Cp\u003ENorthstar\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-06-24T17:28:58Z","Content":"\n\u003Cp\u003EDDS has a hard requirement: both x and y must be a power of two.\u003C/p\u003E\u003Cp\u003EFlags are not that size. So no DDS.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-06-24T18:09:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EDDS has a hard requirement: both x and y must be a power of two.\u003Cp\u003EFlags are not that size. So no DDS.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHuh? I thought it was that they be divisible by four, that\u0027s what Photoshop always tells me. \u003C/p\u003E\u003Cp\u003EFlags are 256 * 160, this goes for standard flags and the large size agency flags. All of the large agency flag images are already in .dds format, so I don\u0027t see any reason why the regular flags folder couldn\u0027t also be.\u003C/p\u003E\u003Cp\u003EI keep hearing people having issues when converting agency and/or flag files to .dds, something about it screwing up the agency loading by the contract system. But I\u0027ve been distributing and using agency (large and small files) and flag images in .dds format for some time now without a single problem.\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-24T18:30:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EHuh? I thought it was that they be divisible by four, that\u0027s what Photoshop always tells me. \u003Cp\u003EFlags are 256 * 160, this goes for standard flags and the large size agency flags. All of the large agency flag images are already in .dds format, so I don\u0027t see any reason why the regular flags folder couldn\u0027t also be.\u003C/p\u003E\u003Cp\u003EI keep hearing people having issues when converting agency and/or flag files to .dds, something about it screwing up the agency loading by the contract system. But I\u0027ve been distributing and using agency (large and small files) and flag images in .dds format for some time now without a single problem.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve definitely seen and experienced that issue (it\u0027s usually a post in Contract Configurator saying \u0022OMG I have no contracts\u0022. I don\u0027t have the exact error handy, but it\u0027s the unity error saying that the texture data can\u0027t be directly accessed from code, being thrown from stock code in the agency loader. So I\u0027m amazed why it would work for you....\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2015-06-24T18:39:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Northstar1989\u0022 data-cite=\u0022Northstar1989\u0022\u003E\u003Cdiv\u003EIs/would it be possible for Squad to convert these files to .DDS file format as well? I assume that would marginally improve improve memory management/loading in the same way converting all the parts textures to .DDS file format did?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe average flag png is less than 20 kb, and for the average player there\u0027s like.. 20, 25 of them? Saving would be \u003Cem\u003Emarginally\u003C/em\u003E marginally. Time that could arguably be spent better elsewhere to gain bigger improvements.\u003C/p\u003E\u003Cp\u003ENot to mention the fact that right now practically anyone can make their own flag have fun with that. DDS flags require software that can save as a DDS file, creating a big hurdle for the casual player to add their own flag to the game.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-06-24T18:53:17Z","Content":"\n\u003Cp\u003EWhoops, confusing Unity (which enforces power-of-two) and DDS (which is div-by-4, quite right).\u003C/p\u003E\u003Cp\u003EHowever, the stock DDS loader only supports DXT1/5, it doesn\u0027t support uncompressed, and it doesn\u0027t support keeping the images readable (i.e. for use by GUI).\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-06-24T19:10:52Z","Content":"\n\u003Cp\u003EThe only reason agencies seem to have a problem is when the scaled logo gets screwed up somehow. GetPixels gets called presumably when it tries to make a scaled logo out of the big logo. Why the scaled logo gets screwed up when using .dds files (maybe it\u0027s a problem with the DDS converter) I don\u0027t know. But properly made agency definitions and dds agency logos shouldn\u0027t have a problem.\u003C/p\u003E\u003Cp\u003ESquad seems to have no problem using dds agency logos (I don\u0027t know what the deal with those True Color scaled logos is), so there isn\u0027t really any reason why they shouldn\u0027t have dds flags. \u003C/p\u003E\u003Cp\u003EThen again, the flag logos are the least of KSP\u0027s texture problems. I really wish they would spend some time optimizing some of their more gratuitously over-sized textures... The materials bay, the atmospheric sensor, about a dozen fuel tank textures (which could really just share two or three textures for each set)... the list goes on.\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-24T20:50:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EThe only reason agencies seem to have a problem is when the scaled logo gets screwed up somehow. GetPixels gets called presumably when it tries to make a scaled logo out of the big logo. Why the scaled logo gets screwed up when using .dds files (maybe it\u0027s a problem with the DDS converter) I don\u0027t know. But properly made agency definitions and dds agency logos shouldn\u0027t have a problem.\u003Cp\u003ESquad seems to have no problem using dds agency logos (I don\u0027t know what the deal with those True Color scaled logos is), so there isn\u0027t really any reason why they shouldn\u0027t have dds flags. \u003C/p\u003E\u003Cp\u003EThen again, the flag logos are the least of KSP\u0027s texture problems. I really wish they would spend some time optimizing some of their more gratuitously over-sized textures... The materials bay, the atmospheric sensor, about a dozen fuel tank textures (which could really just share two or three textures for each set)... the list goes on.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027d settle for some smarts around punting currently unused texture out of the local set until they are actually needed... but that AND a texture reduction pass would be absolutely fantastic.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-06-24T21:12:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003E it doesn\u0027t support keeping the images readable (i.e. for use by GUI).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhich is why contracts, part filters, (presumable the scaled flags), etc. can\u0027t use them\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-06-25T14:42:23Z","Content":"\n\u003Cp\u003EI tested out my scaled agency logo theory and it seems that the DDS converter is doing something to muck up scaled logos. Standard size agency flags get converted from png to dds fine, but the small flags don\u0027t get loaded by KSP (and they don\u0027t show previews in Windows Explorer either), forcing it to try creating a new scaled logo by shrinking the big file and choking when it runs GetPixels.\u003C/p\u003E\u003Cp\u003EConverting the scaled logo to dds in Photoshop works fine, so I would just suggest that mod authors convert all of their agency and flag icons to dds, using something other than the DDS converter from the forums. Aside from the benefits of dds over png, this would prevent the kind of problems that arise when users try converting all of the png files in their GameData folder.\u003C/p\u003E\n"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-06-25T15:18:10Z","Content":"\n\u003Cp\u003ENo photoshop, but tried this using both GIMP and the forum converter program:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EUsed \u0027Agency_scaled.dds\u0027 - get the load failure on \u0027Agency_scaled\u0027, then the failure when it tries read the unscaled logo to make the scaled logo.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EUsed \u0027Agency_scaled.truecolor\u0027 - No failure messages, but there\u0027s obviously a load failure as the scaled logo in game just appears as a question mark (presumably a placeholder image).\u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Just double checked, and the stock .truecolor images are indeed PNG, no idea why they use the weird file extension. Maybe I\u0027ll just rename mine too so people trying to mass-DDS convert won\u0027t get caught.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-06-25T15:21:40Z\u0022 title=\u002206/25/2015 03:21  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 25, 2015\u003C/time\u003E by nightingale\u003C/strong\u003E\n\u003C/span\u003E\n"}]}