{"TopicId":224141,"ForumId":55,"TopicTitle":"Bug: AssemblyLoader does not alphabetically sort plugins when loading on filesystems with non-alphabetical directory listings such as BTRFS","CreatedByName":"ThePuzzlemaker","CreatedById":233014,"CreatedDateTime":"2024-03-16T21:56:12Z","PageNum":1,"Articles":[{"CreatedByName":"ThePuzzlemaker","CreatedById":233014,"CreatedDateTime":"2024-03-16T21:56:12Z","Content":"\n\u003Cp\u003E\nI\u0027ve been using WinBTRFS with my modded KSP install and have recently noticed that directory listings with WinBTRFS are non-alphabetical. This has caused some issues with ModularManager due to how AssemblyLoader (the core KSP component) works. I don\u0027t wish to use NTFS on my external drive, as it needs to be accessible via Linux. I have, however, noticed this issue on Linux as well.\n\u003C/p\u003E\n\u003Cp\u003E\nFor example, see the following from a log on startup on my \u0060D:\\\u0060 drive (WinBTRFS)\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E[LOG 15:25:04.488] Load(Assembly): /ModuleManager.4.2.3\n[LOG 15:25:04.488] AssemblyLoader: Loading assembly at D:\\Kerbal Space Program\\GameData\\ModuleManager.4.2.3.dll\n[LOG 15:25:04.510] AssemblyLoader: KSPAssembly \u0027ModuleManager\u0027 V2.5.0\n[LOG 15:25:04.510] Load(Assembly): /999_Scale_Redist\n[LOG 15:25:04.510] AssemblyLoader: Loading assembly at D:\\Kerbal Space Program\\GameData\\999_Scale_Redist.dll\n[LOG 15:25:04.513] Load(Assembly): Squad/Plugins/KSPSteamCtrlr\n[LOG 15:25:04.513] AssemblyLoader: Loading assembly at D:\\Kerbal Space Program\\GameData\\Squad\\Plugins\\KSPSteamCtrlr.dll\n[LOG 15:25:04.515] Load(Assembly): 000_Harmony/0Harmony\n[LOG 15:25:04.515] AssemblyLoader: Loading assembly at D:\\Kerbal Space Program\\GameData\\000_Harmony\\0Harmony.dll\n[LOG 15:25:04.527] Load(Assembly): 000_Harmony/HarmonyInstallChecker\n[LOG 15:25:04.527] AssemblyLoader: Loading assembly at D:\\Kerbal Space Program\\GameData\\000_Harmony\\HarmonyInstallChecker.dll\n[LOG 15:25:04.529] AssemblyLoader: KSPAssembly \u0027HarmonyKSP\u0027 V1.0.0\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI believe that this out-of-order loading, which is not shown in this log from startup of the same install, copied to my \u0060C:\\\u0060 drive (NTFS, which has near-alphabetical sorting of directory listings):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003E[LOG 16:49:00.506] Load(Assembly): /999_Scale_Redist\n[LOG 16:49:00.507] AssemblyLoader: Loading assembly at C:\\Users\\wren\\Desktop\\Kerbal Space Program\\GameData\\999_Scale_Redist.dll\n[LOG 16:49:00.525] Load(Assembly): /ModuleManager.4.2.3\n[LOG 16:49:00.525] AssemblyLoader: Loading assembly at C:\\Users\\wren\\Desktop\\Kerbal Space Program\\GameData\\ModuleManager.4.2.3.dll\n[LOG 16:49:00.527] AssemblyLoader: KSPAssembly \u0027ModuleManager\u0027 V2.5.0\n[LOG 16:49:00.527] Load(Assembly): 000_AT_Utils/Plugins/000_AT_Utils\n[LOG 16:49:00.527] AssemblyLoader: Loading assembly at C:\\Users\\wren\\Desktop\\Kerbal Space Program\\GameData\\000_AT_Utils\\Plugins\\000_AT_Utils.dll\n[LOG 16:49:00.528] AssemblyLoader: KSPAssembly \u0027AT_Utils\u0027 V1.10.0\n[LOG 16:49:00.528] Load(Assembly): 000_AT_Utils/Plugins/001_AnisotropicPartResizer\n[LOG 16:49:00.528] AssemblyLoader: Loading assembly at C:\\Users\\wren\\Desktop\\Kerbal Space Program\\GameData\\000_AT_Utils\\Plugins\\001_AnisotropicPartResizer.dll\n[LOG 16:49:00.529] AssemblyLoader: KSPAssembly \u0027AnisotropicPartResizer\u0027 V1.5.0\n[LOG 16:49:00.529] Load(Assembly): 000_AT_Utils/Plugins/002_MultiAnimators\n[LOG 16:49:00.529] AssemblyLoader: Loading assembly at C:\\Users\\wren\\Desktop\\Kerbal Space Program\\GameData\\000_AT_Utils\\Plugins\\002_MultiAnimators.dll\n[LOG 16:49:00.530] AssemblyLoader: KSPAssembly \u0027MultiAnimators\u0027 V1.2.0\n[LOG 16:49:00.530] Load(Assembly): 000_AT_Utils/Plugins/0_00_AT_Utils_UI\n[LOG 16:49:00.530] AssemblyLoader: Loading assembly at C:\\Users\\wren\\Desktop\\Kerbal Space Program\\GameData\\000_AT_Utils\\Plugins\\0_00_AT_Utils_UI.dll\n[LOG 16:49:00.531] Load(Assembly): 000_AT_Utils/Plugins/CC.UI\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThis difference in load order causes issues with ModuleManager and almost all KSP mods with dependencies, as they rely on this order.\n\u003C/p\u003E\n\u003Cp\u003E\nI apologize if this is the wrong place for this; I would greatly appreciate it if someone would direct me to the right place if so.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222024-03-16T22:04:55Z\u0022 title=\u002203/16/2024 10:04  PM\u0022 data-short=\u0022Mar 16\u0022\u003EMarch 16\u003C/time\u003E by ThePuzzlemaker\u003C/strong\u003E\n\u003C/span\u003E\n"}]}