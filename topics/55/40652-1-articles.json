{"TopicId":40652,"ForumId":55,"TopicTitle":"\u0022KSP doesn\u0027t do n-body physics because it would crush your computers\u0022","CreatedByName":"Maxwell Fern","CreatedById":68536,"CreatedDateTime":"2013-08-02T15:06:00Z","PageNum":1,"Articles":[{"CreatedByName":"Maxwell Fern","CreatedById":68536,"CreatedDateTime":"2013-08-02T15:06:00Z","Content":"\n\u003Cp\u003EHi there,\u003C/p\u003E\u003Cp\u003Ealthough I don\u0027t mind at all how KSP works with bodies and their spheres of influence, it\u0027s bugging me to read the exact same answer everytime someone asks about lagrange points or any n-body related problems.\u003C/p\u003E\u003Cp\u003ELet\u0027s just get it out: n-body physics can be calculated by all modern PCs. Even old ones.\u003C/p\u003E\u003Cp\u003EOrbiter does it, Universe Sandbox does it, heck, even \u003Ca href=\u0022http://contland.net23.net/astra/play/?n=prototype102\u0022 rel=\u0022external nofollow\u0022\u003Ethis flash animation\u003C/a\u003E does it, in smooth 3D. Load the solar system, change Earth\u0027s mass and watch everything go bananas. \u003C/p\u003E\u003Cp\u003EAnd as far as I know, my computer is not on fire.\u003C/p\u003E\u003Cp\u003ESo what\u0027s the deal ? What is the real reason why n-body physics aren\u0027t implemented in KSP ?\u003C/p\u003E\u003Cp\u003EI personnaly think it\u0027s much easier and less frustrating this way: \u003Cstrong\u003Eorbits will never change unless you do something to them\u003C/strong\u003E. \u003C/p\u003E\u003Cp\u003EOtherwise, all your probes, orbiters, network relays, space station would have to be regularly checked and their orbits corrected. People would complain their first Mun space station crashed into the sun because thousands of pass-bys of minmus dislodged it from its orbit while they were warping for that transfer to Eelo. Actually everytime you would wrap at 10000x, you\u0027d come back to your nicely setup orbits and discover everything has gone crazy. You\u0027d have to chose between long travels and local orbits, or go through the pain of correcting everything every now and then during a long transfer.\u003C/p\u003E\u003Cp\u003EMaintenance is boring.\u003C/p\u003E\u003Cp\u003ESo I\u0027m fine with SoIs and single body physics. It\u0027s close enough to reality, it\u0027s easy to comprehend, and it keeps the game fun. But please, stop saying computers can\u0027t handle n-body physics.\u003C/p\u003E\u003Cp\u003Etl;dr: KSP could have n-body physics, but it would ruin gameplay and make everything a pain in the ass.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-02T15:24:34Z\u0022 title=\u002208/02/2013 03:24  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 2, 2013\u003C/time\u003E by Maxwell Fern\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Themohawkninja","CreatedById":9628,"CreatedDateTime":"2013-08-02T15:08:37Z","Content":"\n\u003Cp\u003EUniverse Sandbox doesn\u0027t have drag models, or mass physics calculations.\u003C/p\u003E\u003Cp\u003En-body by itself isn\u0027t too bad (I\u0027ve collided galaxies together in Universe Sandbox), but is so much more physics calculations on top of n-body if KSP had n-body that the lag would get horrible, especially as your 300 part station is now 300 n-body parts (floating point errors will always cause orbits to change).\u003C/p\u003E\n"},{"CreatedByName":"Synapse","CreatedById":72502,"CreatedDateTime":"2013-08-02T15:09:57Z","Content":"\n\u003Cp\u003EDunno why we can\u0027t have both. Have n-body physics, put everything on rails when you time warp.\u003C/p\u003E\n"},{"CreatedByName":"Decho","CreatedById":66774,"CreatedDateTime":"2013-08-02T15:13:02Z","Content":"\n\u003Cp\u003EI\u0027m perfectly happy with the current solution, it approximates reality well enough for most purposes and makes mission planning so much easier. The only realy loss are lagrange points but I can live with that.\u003C/p\u003E\n"},{"CreatedByName":"boxman","CreatedById":61559,"CreatedDateTime":"2013-08-02T15:15:02Z","Content":"\n\u003Cp\u003EBut Orbiter dosent do other things like KSP does like proper collision detection. Orbiter also dosent have to compute up to thousands of parts all interacting with each other at the same time while also maybe computing also a nearby ship/station.\u003C/p\u003E\u003Cp\u003EYou just cannot compare it like that.\u003C/p\u003E\n"},{"CreatedByName":"Maxwell Fern","CreatedById":68536,"CreatedDateTime":"2013-08-02T15:16:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Themohawkninja\u0022 data-cite=\u0022Themohawkninja\u0022\u003E\u003Cdiv\u003Ebut is so much more physics calculations on top of n-body if KSP had n-body that the lag would get horrible, especially as your 300 part station is now 300 n-body parts (floating point errors will always cause orbits to change).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have to disagree with that. N-body calculations could stop as soon as you enter an atmosphere, since it becomes totally irrelevant. And these calculations don\u0027t have to be for every single part of your ship, only for its global position.\u003C/p\u003E\u003Cp\u003EI\u0027m fairly convinced this is not a performance issue. It\u0027s a gameplay choice.\u003C/p\u003E\n"},{"CreatedByName":"Maxwell Fern","CreatedById":68536,"CreatedDateTime":"2013-08-02T15:19:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022boxman\u0022 data-cite=\u0022boxman\u0022\u003E\u003Cdiv\u003EBut Orbiter dosent do other things like KSP does like proper collision detection. Orbiter also dosent have to compute up to thousands of parts all interacting with each other at the same time while also maybe computing also a nearby ship/station.\u003Cp\u003EYou just cannot compare it like that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI knew mentionning Orbiter would make some forks and torches rise, but come on it was just to point out that technically, this is perfectly doable.\u003C/p\u003E\u003Cp\u003EI\u0027m not saying KSP is not as good as Orbiter or whatever, I\u0027m just saying we don\u0027t have n-body physics because \u003Cstrong\u003Eit wouldn\u0027t be fun\u003C/strong\u003E. Not because we can\u0027t handle it.\u003C/p\u003E\n"},{"CreatedByName":"SunJumper","CreatedById":27062,"CreatedDateTime":"2013-08-02T15:19:52Z","Content":"\n\u003Cp\u003EKSP alone brings some computers to a standstill (it once crashed my \u003Cem\u003Ecomputer\u003C/em\u003E. It wasn\u0027t the program, but my computer itself.). I don\u0027t see how n-body calculations can make that any better.\u003C/p\u003E\n"},{"CreatedByName":"Sean Mirrsen","CreatedById":3873,"CreatedDateTime":"2013-08-02T15:20:35Z","Content":"\n\u003Cp\u003EThis has been discussed a lot of times now, and personally I find the notion that KSP would be \u003Cstrong\u003Eincapable\u003C/strong\u003E of having n-body simulation ridiculous (seriously, the only time it will actually put a strain - in time warp - is the only time when all the fancy 500-part mothership physics are shelved entirely as the ships are put on rails), but Squad has already stated that KSP will absolutely \u003Cstrong\u003Enot\u003C/strong\u003E have n-body physics. Alas, but true.\u003C/p\u003E\n"},{"CreatedByName":"Themohawkninja","CreatedById":9628,"CreatedDateTime":"2013-08-02T15:22:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Maxwell Fern\u0022 data-cite=\u0022Maxwell Fern\u0022\u003E\u003Cdiv\u003EI have to disagree with that. N-body calculations could stop as soon as you enter an atmosphere, since it becomes totally irrelevant. And these calculations don\u0027t have to be for every single part of your ship, only for its global position.\u003Cp\u003EI\u0027m fairly convinced this is not a performance issue. It\u0027s a gameplay choice.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo you are talking about a \u003Cem\u003Esimplified\u003C/em\u003E n-body physics, whereby irrelevant changes are never calculated? Also, I do believe that floating point errors would still muck up orbits, since I have heard tales of them decaying orbits to the surface of bodies before, so if you take that problem, and put it in the scope of the whole system could mean that really long saves could have highly altered orbits. Not to mention interactions with Eeloo and Jool, or the moons in the Joolean system could also cause problems in n-body.\u003C/p\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2013-08-02T15:23:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Synapse\u0022 data-cite=\u0022Synapse\u0022\u003E\u003Cdiv\u003EDunno why we can\u0027t have both. Have n-body physics, put everything on rails when you time warp.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBecause you can\u0027t reconcile n-body calculations with on-rails physics. \u0022On rails\u0027 means that you are analytically predicting where the spacecraft will go, which you can\u0027t do while also accounting for the influence of other bodies.\u003C/p\u003E\u003Cp\u003EEDIT: The OP is right though. It\u0027s a gameplay choice.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-02T15:26:36Z\u0022 title=\u002208/02/2013 03:26  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 2, 2013\u003C/time\u003E by tntristan12\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Maxwell Fern","CreatedById":68536,"CreatedDateTime":"2013-08-02T15:26:47Z","Content":"\n\u003Cp\u003EI edited the first post since I don\u0027t think you people read it. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EI\u0027m not complaining that we don\u0027t have n-body physics, I\u0027m saying this is a good thing because it would make the game frustrating, boring and overly difficult.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI DON\u0027T WANT N-BODY PHYSICS.\u003C/p\u003E\n"},{"CreatedByName":"Themohawkninja","CreatedById":9628,"CreatedDateTime":"2013-08-02T15:27:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Maxwell Fern\u0022 data-cite=\u0022Maxwell Fern\u0022\u003E\u003Cdiv\u003EI edited the first post since I don\u0027t think you people read it. \u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EI\u0027m not complaining that we don\u0027t have n-body physics, I\u0027m saying this is a \u003C/strong\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003E\u003Cstrong\u003Egood\u003C/strong\u003E\u003C/span\u003E\u003Cstrong\u003E thing because it would make the game frustrating, boring and overly difficult.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI DON\u0027T WANT N-BODY PHYSICS.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou mean bad? I\u0027m confused.\u003C/p\u003E\n"},{"CreatedByName":"Sof","CreatedById":65663,"CreatedDateTime":"2013-08-02T15:29:41Z","Content":"\n\u003Cp\u003EI\u0027m pretty sure the joolian system would rip itself apart if the moons exerted any force between them.\u003C/p\u003E\n"},{"CreatedByName":"TouhouTorpedo","CreatedById":30603,"CreatedDateTime":"2013-08-02T15:30:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Themohawkninja\u0022 data-cite=\u0022Themohawkninja\u0022\u003E\u003Cdiv\u003ESo you are talking about a \u003Cem\u003Esimplified\u003C/em\u003E n-body physics, whereby irrelevant changes are never calculated?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPersonally I\u0027d like to see that kind of thing, though it would imply changes to the game engine being neccesary to make pertubation playable. When higher levels of automation are available, adding pertubation would actually improve the gameplay quite a bit, if unfocused objects had their orbit control system simulated at a lower level, so they are slowly bleeding off RCS / Fuel / Power while their missions procede.\u003C/p\u003E\u003Cp\u003Eindeed it\u0027d need more processing power at higher warp, than as things are now, but they have said automation is coming eventually. If thats true, and things are going to happen in the background, some degree of pertubation and management for this might as well be added in my opinion.\u003C/p\u003E\n"},{"CreatedByName":"Dravin","CreatedById":77089,"CreatedDateTime":"2013-08-02T15:38:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Themohawkninja\u0022 data-cite=\u0022Themohawkninja\u0022\u003E\u003Cdiv\u003EYou mean bad? I\u0027m confused.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u0022This\u0022 is referencing the lack of n-body physics. So he\u0027s saying it is a good thing that KSP doesn\u0027t have n-body physics as it would negatively impact gameplay.\u003C/p\u003E\n"},{"CreatedByName":"RuBisCO","CreatedById":59540,"CreatedDateTime":"2013-08-02T15:42:14Z","Content":"\n\u003Cp\u003EI remember reading someone say KSP physics engine is 32-bit and single threading, is that true? If so I would say there is room for more physics calculations if it was upgraded to multiple threading and 64 bit. \u003C/p\u003E\u003Cp\u003EAlso can\u0027t certain n-body effects be simulated in the \u0022on rail\u0022 system with a minimal of extract calculations, like Language points and orbital perturbation?\u003C/p\u003E\n"},{"CreatedByName":"lammatt","CreatedById":21777,"CreatedDateTime":"2013-08-02T16:11:24Z","Content":"\n\u003Cp\u003Eactually i dont believe in the \u0022 it will crush your computer argument\u0022\u003C/p\u003E\u003Cp\u003Eif in the 60s NASA\u0027s computer could do it...i dont believe my 2013 computer cant.\u003C/p\u003E\u003Cp\u003Esee... the whole idea of \u0022there\u0027s a long way down below\u0022 started in the 70s...\u003C/p\u003E\u003Cp\u003Eand newer CPUs are of 20nm fabrication\u003C/p\u003E\u003Cp\u003Ethere\u0027s no way 60s NASA computer can beat my 45nm AMD Phenom II or a 42nm Intel i7\u003C/p\u003E\u003Cp\u003Eall you need is good programing with no or few redundant codes\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-02T16:18:32Z\u0022 title=\u002208/02/2013 04:18  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 2, 2013\u003C/time\u003E by lammatt\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2013-08-02T16:51:57Z","Content":"\n\u003Cp\u003EYeah but that 60s NASA computer had all of the variables fed to it by hand. It didn\u0027t have to work well in any number of general arbitrary cases. It only had to work well enough for the moon missions. That said, you\u0027re right that the decision to not implement nbp was not because of calculation intensity. I personally haven\u0027t missed lagrange points since it became important.\u003C/p\u003E\n"},{"CreatedByName":"Richy teh space man","CreatedById":12511,"CreatedDateTime":"2013-08-02T17:31:03Z","Content":"\n\u003Cp\u003EI just tried that flash animation, and the solar system fell apart as soon as I time warped..\u003C/p\u003E\n"},{"CreatedByName":"Mattasmack","CreatedById":62809,"CreatedDateTime":"2013-08-02T17:46:07Z","Content":"\n\u003Cp\u003EAn idea that\u0027s been bouncing around in my head to add n-body physics without too much pain (for the player and his or her computer, at least) is to introduce \u0022no-man\u0027s land\u0022 in the space between bodies in the Kerbol system. Right now, every bit of space in the game is included in one body or another\u0027s SOI. My idea is to shrink each SOI drastically and leave the area outside of the SOIs as no-man\u0027s land. Inside a body\u0027s SOI, each craft follows a Keplerian trajectory (\u0022on rails\u0022 as it is now), and in no-man\u0027s land each craft\u0027s trajectory follows n-body physics or some approximation of it. (The game might want to account for only the influence of the two or three bodies with the strongest gravitation at any given point, rather than account for every body in the system every time.)\u003C/p\u003E\u003Cp\u003EWith this approach, craft in reasonably low orbits around a body still have stable orbits because they\u0027re on Keplerian rails, just as you\u0027d expect. For craft in no-man\u0027s land, errors that creep into their trajectory due to rounding don\u0027t matter so much because their trajectories are expected to be perturbed anyway. It\u0027s relatively easy on the computer to integrate a craft\u0027s trajectory in no-man\u0027s land (for plotting in map view or for traveling at high time-warp) because the integration is only done in areas with relatively low gravitational acceleration. That allows large time-steps to be used while maintaining reasonable accuracy. The SOIs can be set up to ensure that each body\u0027s Lagrange points are in no-man\u0027s land, so L-points will work as expected.\u003C/p\u003E\u003Cp\u003EA couple folks mentioned the number of parts in a typical craft as a problem. But the acceleration can be calculated based just on the craft\u0027s center of mass (COM), just as currently the craft\u0027s COM moves on Keplerian rails. But it wouldn\u0027t be so hard to include tidal effects on a craft, by calculating the gradient of the gravitational field at the craft\u0027s COM. That first-order approximation can be used to calculate the gravitational force on each part based on the part\u0027s COM relative to the craft\u0027s COM. It would be neat to see, although it might not make much difference since each craft\u0027s rotation is cancelled out when going to time-warp anyway.\u003C/p\u003E\n"},{"CreatedByName":"arq","CreatedById":71084,"CreatedDateTime":"2013-08-02T19:29:03Z","Content":"\n\u003Cp\u003EHonestly the no-man\u0027s-land suggestion is one of the better ones I\u0027ve heard for this topic as a compromise between orbital stability and n-body physics.\u003C/p\u003E\u003Cp\u003EBut I agree with the OP, it\u0027s perfectly possible to calculate the nbp in KSP, but I\u0027m not convinced that n-body physics would be a meaningful and positive (\u0027fun\u0027) change to the game. It adds little depth to the actual gameplay, just something that would be fun to mess around with for an hour or so and then would be forgotten (at the expense of a massive and time-consuming restructuring of the code) except for the occasional anger caused by an unanticipated destabilization of an orbit.\u003C/p\u003E\u003Cp\u003EMaybe in the future a mod will make this possible or Squad could do it, but there is so much left to be done since the game is still in ALPHA. I would much rather we get a better aerodynamics model, personally.\u003C/p\u003E\n"},{"CreatedByName":"jfx","CreatedById":37282,"CreatedDateTime":"2013-08-02T19:57:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022boxman\u0022 data-cite=\u0022boxman\u0022\u003E\u003Cdiv\u003EBut Orbiter dosent do other things like KSP does like proper collision detection. Orbiter also dosent have to compute up to thousands of parts all interacting with each other at the same time while also maybe computing also a nearby ship/station.\u003Cp\u003EYou just cannot compare it like that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECalculating thousands of colliding solid bodys is no problem unless you happen to use a completely broken physics engine which was initially developed for a broken piece of dedicated hardware (Ageia PPU) and later duct-tape ported into GPU land where it was primarily used as marketing tool, with the physics engine being treated an afterthough. \u0022Hey we spent a huge chunk of money on this, why sould we fix it\u0022 - and \u0022Software Implementation??! - well a x87 should be good enough\u0022.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SunJumper\u0022 data-cite=\u0022SunJumper\u0022\u003E\u003Cdiv\u003EKSP alone brings some computers to a standstill (it once crashed my \u003Cem\u003Ecomputer\u003C/em\u003E. It wasn\u0027t the program, but my computer itself.). I don\u0027t see how n-body calculations can make that any better.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt won\u0027t make your computer any better. It will still suck, sorry.\u003C/p\u003E\n"},{"CreatedByName":"Jarin","CreatedById":71395,"CreatedDateTime":"2013-08-02T20:07:50Z","Content":"\n\u003Cp\u003EI just want Lagrange points... \u0026gt;.\u0026gt;\u003C/p\u003E\n"},{"CreatedByName":"air805ronin","CreatedById":40948,"CreatedDateTime":"2013-08-02T20:28:38Z","Content":"\n\u003Cp\u003Eedit: I pretty much agree with Arq.\u003C/p\u003E\u003Cp\u003EHow long do you think it would take to recode KSP to change it from relying on Patched Conic mathematics and instead do 2 body mathematics? I would imagine the change and ensuing bugs are an excellent reason to stick with patched conics. Because it works well enough for the game to simulate the illusion.\u003C/p\u003E\u003Cp\u003EWould we prefer that time be spent adding new content to the game or rehashing something that is working fairly well now? I know I would prefer new content.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-08-02T20:31:13Z\u0022 title=\u002208/02/2013 08:31  PM\u0022 data-short=\u002210 yr\u0022\u003EAugust 2, 2013\u003C/time\u003E by air805ronin\u003C/strong\u003E\n\u003C/span\u003E\n"}]}