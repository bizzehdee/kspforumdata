{"TopicId":133444,"ForumId":55,"TopicTitle":"Will part count still be an issue in 1.1?","CreatedByName":"Der Anfang","CreatedById":134627,"CreatedDateTime":"2016-03-03T23:23:10Z","PageNum":1,"Articles":[{"CreatedByName":"Der Anfang","CreatedById":134627,"CreatedDateTime":"2016-03-03T23:23:10Z","Content":"\n\u003Cp\u003E\nI\u0027m not exactly sure what the new unity 5 game engine means for everyone, but \u00A0I keep praying it will allow our PCs to handle more parts, or the parts will be handled differently. I\u0027m actually not really sure I understand what the game engine does exactly. Does squad ever plan on fixing the issue with te part count bogging up our systems, or does that ultimatey lie in the quality and strength of our devices?\n\u003C/p\u003E\n"},{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2016-03-03T23:56:09Z","Content":"\n\u003Cp\u003E\nRight now, the engine is the part count limitation.\n\u003C/p\u003E\n\u003Cp\u003E\nWith 1.1, you may be able to push your system to its limit without engine interference.\n\u003C/p\u003E\n"},{"CreatedByName":"fireblade274","CreatedById":134571,"CreatedDateTime":"2016-03-04T00:13:41Z","Content":"\n\u003Cp\u003E\nEven with strong devices, large part counts still bog down high end systems. Yes, hopefully unity 5 will at the very least take the edge off lag with 200-500 part monstrosity\u0027s\n\u003C/p\u003E\n\u003Cp\u003E\nCant wait for multi core support\n\u003C/p\u003E\n"},{"CreatedByName":"Randox","CreatedById":18034,"CreatedDateTime":"2016-03-04T00:52:01Z","Content":"\n\u003Cp\u003E\nI would expect it to allow more part in seperate ships that are close to each other, but not so much for single high part count ships. The problem is that multi core physics can only help if your physics problem is one that can be solved in parallel to begin with. Because of how rockets tend to be built, there aren\u0027t a lot of branching dependencies that can be easily calculated in that way. You can\u0027t solve a calculation in parallel if you need to wait for the previous answer to perform the calculation (serial problem).\n\u003C/p\u003E\n\u003Cp\u003E\nThink of it like this. Imagine your computer is trying to simulate you, sitting in your wheeled computer chair, as you push it backwards with your feet. It\u0027s a serial problem. Your computer cannot calculate the outcome of your feet acting on the floor at the same time as it calculates your impact on the chair you are sitting in, because your impact on the chair is dependant on the outcome of your feet pushing on the floor. It has to solve the problems in order.\n\u003C/p\u003E\n\u003Cp\u003E\nThe only way around that limitation I can think of is to have the game combine parts together at run time, into larger custom parts, which would probably work best if we told the computer how to do it (once your rocket was ready, you would have to highlight parts for the computer to combine into one super part, and then wait for your computer to calculate the parameters of the new part). Not that it wouldn\u0027t be a complete nightmare to design even that human assisted system in terms of things like resource management. It would be very cool, but realistically, we probably aren\u0027t there yet.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnd maybe someone who knows more about physics engines than I do will be able to point out some flaws in my reasoning. That would be nice, because frankly I think the performance gains are going to be shockingly small compared to what a lot of people here are expecting.\n\u003C/p\u003E\n"},{"CreatedByName":"Fearless Son","CreatedById":133397,"CreatedDateTime":"2016-03-04T01:13:18Z","Content":"\n\u003Cp\u003E\nOkay, please understand that I am trying not to sound condescending when I say this, but working in performance testing for games has taught me that there are a lot of misunderstandings people have about performance optimization. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhat \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/18034-randox/\u0026amp;do=hovercard\u0022 data-mentionid=\u002218034\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/18034-randox/\u0022\u003E@Randox\u003C/a\u003E\u00A0said is true, when it comes to physics calculations there is a problem with serial-versus-parallel processes. \u00A0Threading through multiple cores can certainly help with the parallel processes, but multi-core programming is a whole different beast from serial programming. \u00A0Splitting an executable process into multiple threads is one thing, but load-balancing those threads is something else entirely, and the program will only run as fast as its slowest process. \u00A0Getting something like multiple physics threads to split introduces problems of how do you decide which problems get handled by which threads at which times? \u00A0Even then, what are the situations that might strain it more or less? \u00A0What about different machines with different numbers of cores, will that affect how this is balanced? \u00A0It can be done, sure, but it is not easy and the people who have experience doing it well get paid a lot of money by some very big companies to keep doing it for them. \u00A0Wishing no disrespect to Squad\u0027s development talents, I do not know if they have the money or the man-hours to invest in taking maximum advantage of a multiple-core solution.\n\u003C/p\u003E\n\u003Cp\u003E\nOn this topic, Dslyecxi from Shack Tactical has a good twenty minute video on performance and modding. \u00A0While this is specifically about Arma III rather than Kerbal Space Program, I think a lot of what he says applies as both games depend a lot on user generated content, either by recombining built-in assets or by extending that content by being extremely mod friendly. \u00A0The short version is that in situations like this, the development team can do an extremely good job of performance optimization, and the game will \u003Cem\u003Estill \u003C/em\u003Eget bogged down if users do not budget themselves. \u00A0I recommend people interested in game performance give it a listen: \u00A0\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/Fh3webkCo4Y?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nTLDR: Part count will \u003Cem\u003Ealways\u003C/em\u003E be an issue, and while it might be better, it will never go completely away.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-04T01:19:17Z\u0022 title=\u002203/04/2016 01:19  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 4, 2016\u003C/time\u003E by Fearless Son\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Renegrade","CreatedById":96629,"CreatedDateTime":"2016-03-04T01:47:08Z","Content":"\n\u003Cp\u003E\nA lot of people don\u0027t seem to understand that the physics problems in KSP are likely something like O(n^2) or O(n^3) or something insane like that.\u00A0 Even if the operation cost for a single comparison is low, a 200 part ship is doing either 40,000 of those operations per frame or 8 million operations per frame (respectively).\n\u003C/p\u003E\n\u003Cp\u003E\nLet\u0027s say that you are able to fully leverage an eight core system (fat effing chance, but let\u0027s assume our mythical 800% for the sake of argument), and are able to therefore divide that load by eight.\u00A0\u00A0 For n^2, that\u0027s still 5,000 operations/frame for 200 parts, or a maximum of 320k operations/frame (40,000*8), which is then therefore maximum part count of 565 (assuming 200 was the limit before).\u00A0 In the case of n^3, that\u0027s 64m operations/frame, and therefore only 400 parts max.\n\u003C/p\u003E\n\u003Cp\u003E\n(For a 4-core system with an imaginary 400% bonus, the upgrade numbers are 200-\u0026gt;400 and 200-\u0026gt;317 for n^2 and n^3 respectively).\n\u003C/p\u003E\n\u003Cp\u003E\nREAL optimization takes place at the design stage, when you determine that you WON\u0027T have a mesh of parts acting on all other parts in a vessel at once, and instead go with something like Space Engineer\u0027s mobile grids or PartWeld\u0027s welded parts.\u00A0 That makes n a small number, like 1 or 5 or such.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222440704\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457053998\u0022 data-ipsquote-userid=\u0022133397\u0022 data-ipsquote-username=\u0022Fearless Son\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, Fearless Son said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSplitting an executable process into multiple threads is one thing, but load-balancing those threads is something else entirely, and the program will only run as fast as its slowest process.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI agree with everything you said, but in breezing past the \u0022splitting a process into multiple threads\u0022 (this is very non-trivial), you\u0027re kinda explaining about why we can\u0027t park the car in the garage because of all the junk in there, when there\u0027s junk on the driveway in the way too\u00A0(and first; you gotta drive through the driveway before getting into the garage in this analogy) \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2016-03-04T02:59:44Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/96629-renegrade/\u0026amp;do=hovercard\u0022 data-mentionid=\u002296629\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/96629-renegrade/\u0022\u003E@Renegrade\u003C/a\u003E: have you profiled KSP, or analyzed the code structure? How do we know much about the asymptotics of the physics simulation?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/18034-randox/\u0026amp;do=hovercard\u0022 data-mentionid=\u002218034\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/18034-randox/\u0022\u003E@Randox\u003C/a\u003E: here\u0027s a log^2 depth solver for rigid body systems:\u00A0\u003Ca href=\u0022http://arc.aiaa.org/doi/abs/10.2514/2.4531?journalCode=jgcd\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://arc.aiaa.org/doi/abs/10.2514/2.4531?journalCode=jgcd\u003C/a\u003E. There\u0027s been plenty of improvements since 2000 (in fact, I doubt they were the first). Rigid body simulations can be done in parallel just fine. Whether it\u0027s worth doing is another question. At the level of the physics engine, maybe; at the level of the game (which updates\u00A0the rigid body system --\u00A0forces and masses etc -- every timestep), maybe not.\n\u003C/p\u003E\n"},{"CreatedByName":"Norcalplanner","CreatedById":112223,"CreatedDateTime":"2016-03-04T03:59:58Z","Content":"\n\u003Cp\u003E\nAll I know is that I gained greater faith in Squad optimizing the code after certain well-respected modders were brought into the fold.\n\u003C/p\u003E\n"},{"CreatedByName":"Mad Rocket Scientist","CreatedById":139256,"CreatedDateTime":"2016-03-04T07:08:28Z","Content":"\n\u003Cp\u003E\nOh, don\u0027t worry.\u00A0 There\u0027ll always be someone who can make KSP lag.\n\u003C/p\u003E\n\u003Cp\u003E\nLike \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/23840-zekes/\u0026amp;do=hovercard\u0022 data-mentionid=\u002223840\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/23840-zekes/\u0022\u003E@zekes\u003C/a\u003E\u0027 space shuttle:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022Ax2PPWJ.jpg\u0022 src=\u0022http://i.imgur.com/Ax2PPWJ.jpg\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n1300\u002B parts.\n\u003C/p\u003E\n\u003Cp\u003E\nOr my high-roller:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022IlDNv6H.png\u0022 src=\u0022http://i.imgur.com/IlDNv6H.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n800\u002B parts\n\u003C/p\u003E\n\u003Cp\u003E\nOr \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/71402-whackjob/\u0026amp;do=hovercard\u0022 data-mentionid=\u002271402\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/71402-whackjob/\u0022\u003E@Whackjob\u003C/a\u003E\u0027s birthday cake!\n\u003C/p\u003E\n\u003Cdiv\u003E\n\u003Cimg alt=\u002276F433311F198681069E245F0A405292BBF009D8\u0022 src=\u0022http://images.akamai.steamusercontent.com/ugc/379784372242896315/76F433311F198681069E245F0A405292BBF009D8/\u0022\u003E\u003C/div\u003E\n\u003Cdiv\u003E\nAlmost 1500 parts!\n\u003C/div\u003E\n\u003Cdiv\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cdiv\u003E\nOr any\u00A0\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/50750-azimech/\u0026amp;do=hovercard\u0022 data-mentionid=\u002250750\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/50750-azimech/\u0022\u003E@Azimech\u003C/a\u003E\u00A0craft (up to 1000 parts)\n\u003C/div\u003E\n\u003Cdiv\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cdiv\u003E\nOr \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/141267-saturnianblue/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022141267\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/141267-saturnianblue/\u0022\u003E@SaturnianBlue\u003C/a\u003E\u0027s WWII ships!\u00A0 (1100\u002B parts)\n\u003C/div\u003E\n\u003Cdiv\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cdiv\u003E\nYou\u0027ll never have to feel the pain of 60 fps KSP.\n\u003C/div\u003E\n\u003Cdiv\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cdiv\u003E\n\u00A0\n\u003C/div\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-04T07:08:52Z\u0022 title=\u002203/04/2016 07:08  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 4, 2016\u003C/time\u003E by Mad Rocket Scientist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"federicoaa","CreatedById":94879,"CreatedDateTime":"2016-03-04T07:11:18Z","Content":"\n\u003Cp\u003E\nYea, for people like \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/71402-whackjob/\u0026amp;do=hovercard\u0022 data-mentionid=\u002271402\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/71402-whackjob/\u0022\u003E@Whackjob\u003C/a\u003E\u00A0part count will always be an issue XD\n\u003C/p\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2016-03-04T07:15:20Z","Content":"\n\u003Cp\u003E\nTrue ... I\u0027ll always build for the future. We\u0027ve got a long way to go. A typical car nowadays has 5000 parts, the Apollo capsule had 2 million.\u003Cbr\u003E\u003Cbr\u003E\nBut we\u0027re getting good at optimizing our craft, not a bad thing either. I remember the 1500 part Spruce Goose on KerbalX. When you look inside the fuselage it has an awful web of struts, say 200, while you can make a decent and strong structure with a small fraction of that amount. Personally I strongly dislike the \u0022moar struts\u0022 pun, it\u0027s how you intelligently place them. On most of my builds, strut count is 1 to 5% of the build.\n\u003C/p\u003E\n"},{"CreatedByName":"StarStreak2109","CreatedById":118557,"CreatedDateTime":"2016-03-04T07:17:02Z","Content":"\n\u003Cp\u003E\nPartcount should not be a problem for people playing a sensible game. Of course the \u0022monstrosities\u0022 shown above tend to overload the engine as it is now and probably will also overload the Unity 5 engine. Right now the problem is however that even with a \u0022sensible\u0022 playstile even normal-ish craft such as space stations become untolerable due to significant lag. IMHO without partwelding, which is a pain, larger, ISS-like spacestations with a certain amount of detail are virtually a nogo due to the lag. Here I hope for significant improvement! It will be a treat having a KSS in orbit around Kerbin, docking a space craft\u00A0 to it at 20\u002B FPS. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2016-03-04T11:32:52Z","Content":"\n\u003Cp\u003E\nWhat I personally don\u0027t get, for as long as I have been playing KSP, is why Squad can\u0027t change the part-to-part physics, so that it somewhat work in the following fashion:\n\u003C/p\u003E\n\u003Cp\u003E\n\u0027\u003Cem\u003Einline connected parts\u003C/em\u003E\u0027 to be excluded from \u0027\u003Cem\u003Epart-to-part physics calculations\u003C/em\u003E\u0027 and only until a certain threshold is reached, only then the phycics calculations on these inline connected parts is started. For example extreme centrifugal forces, or aerodynamic forces, etc, would trigger physics calculations on those parts.\n\u003C/p\u003E\n\u003Cp\u003E\nThus large constructions could be much smoother as those extreme scenarios are not common, space stations for example.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-04T11:33:17Z\u0022 title=\u002203/04/2016 11:33  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 4, 2016\u003C/time\u003E by Gkirmathal\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2016-03-04T11:49:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222441175\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457091172\u0022 data-ipsquote-userid=\u0022135480\u0022 data-ipsquote-username=\u0022Gkirmathal\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 minutes ago, Gkirmathal said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat I personally don\u0027t get, for as long as I have been playing KSP, is why Squad can\u0027t change the part-to-part physics, so that it somewhat work in the following fashion:\n\u003C/p\u003E\n\u003Cp\u003E\n\u0027\u003Cem\u003Einline connected parts\u003C/em\u003E\u0027 to be excluded from \u0027\u003Cem\u003Epart-to-part physics calculations\u003C/em\u003E\u0027 and only until a certain threshold is reached, only then the phycics calculations on these inline connected parts is started. For example extreme centrifugal forces, or aerodynamic forces, etc, would trigger physics calculations on those parts.\n\u003C/p\u003E\n\u003Cp\u003E\nThus large constructions could be much smoother as those extreme scenarios are not common, space stations for example.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat a smart idea! I wonder what \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275006\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0022\u003E@NathanKell\u003C/a\u003E thinks of this.\n\u003C/p\u003E\n"},{"CreatedByName":"Geschosskopf","CreatedById":69507,"CreatedDateTime":"2016-03-04T15:11:59Z","Content":"\n\u003Cp\u003E\nThanks \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/18034-randox/\u0026amp;do=hovercard\u0022 data-mentionid=\u002218034\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/18034-randox/\u0022\u003E@Randox\u003C/a\u003E, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/133397-fearless-son/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022133397\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/133397-fearless-son/\u0022\u003E@Fearless Son\u003C/a\u003E, and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/96629-renegrade/\u0026amp;do=hovercard\u0022 data-mentionid=\u002296629\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/96629-renegrade/\u0022\u003E@Renegrade\u003C/a\u003E\u00A0for your explanations. \u00A0My days of being required to know anything about how computers work inside\u00A0date back to the time of punch cards so I\u0027ve never really bothered to learn anything about how multi-threading works. \u00A0Thanks to you all, now think I have a nutshell picture of it.\n\u003C/p\u003E\n\u003Cp\u003E\nOK, so KSP\u0027s basic design doesn\u0027t allow for taking much advantage of multi-threading for physics calculations. \u00A0Still, I suppose having more RAM to play with should slightly raise the part count at which things become intolerable, right? \u00A0Also, what about going from 32-bit to 64-bit?\n\u003C/p\u003E\n\u003Cp\u003E\nNow, about what \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/135480-gkirmathal/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022135480\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/135480-gkirmathal/\u0022\u003E@Gkirmathal\u003C/a\u003E\u00A0said.... \u00A0 \u00A0KSP parts can have a flag called \u0022PhysicsSignificance\u0022. \u00A0Counter-intuitively, if this is set to 1, the that part is excluded from the physics calculations. \u00A0It used to be that PhysicsSignificance = 1 also meant the part was massless but that changed a few upgrades ago. \u00A0The part itself is still massless but its mass is added to whatever it\u0027s attached to. \u00A0I always wondered why, because the parts that had this flag set were mostly tiny things of insignificant mass, not enough to impact a rocket\u0027s dV or TWR. \u00A0Sure, you could exploit their masslessness to build silly little ships to goof around with, but their impact on mainstream gameplay was nil, so that never struck me as the real reason for this change.\n\u003C/p\u003E\n\u003Cp\u003E\nIt now occurs to me, however, that adding mass to physicsless parts could have been an optimization thing. \u00A0What if, somewhere under the hood, KSP now dynamically sets and unsets this flag for major structural parts? \u00A0That would reduce the effective number of parts, and thus\u00A0operations, that the physics engine has to deal with, but the mass is still there for the calculations. \u00A0IOW, dynamic, virtual \u0022welding\u0022 \u00A0Is there any way to do that without hosing everything else up? \u00A0Does KSP do this already?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"paul23","CreatedById":120544,"CreatedDateTime":"2016-03-04T16:10:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222441183\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457092173\u0022 data-ipsquote-userid=\u002250750\u0022 data-ipsquote-username=\u0022Azimech\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Azimech said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat a smart idea! I wonder what \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275006\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0022\u003E@NathanKell\u003C/a\u003E thinks of this.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m resisting the urge to facepalm here. Structural (and aerodynamic)\u00A0forces, in essence, are differential equations, where you solve a large matrix (mesh) with each row being a \u0022part\u0022 and columns the variables (this is overly simplified). You have to do it this way, because the way a part behaves -under standard behaviour- changes how other parts react. So you can\u0027t just ignore a part in the physics calculations you have to take that part into account to calculate how the other part works.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is utterly obvious in practice, you can see it easily: sometimes your craft deteriorates after a seemingly uncontrolled increase in spin (without any work being done), this is exactly due to above reason (combined with rounding errors).\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"KerbonautInTraining","CreatedById":145373,"CreatedDateTime":"2016-03-04T16:30:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222441536\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457107806\u0022 data-ipsquote-userid=\u0022120544\u0022 data-ipsquote-username=\u0022paul23\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, paul23 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n[Lots of very informed computer stuff]\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nEach ship in the physics bubble\u00A0gets 1 thread to play with in 1.1, according to the devs.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat happens when 2 large ships touch each other but don\u0027t dock? Do the threads merge and slow your game\u00A0to a crawl? Do they stay as separate threads and do black magic to figure out what the other is doing?\n\u003C/p\u003E\n"},{"CreatedByName":"Azimech","CreatedById":50750,"CreatedDateTime":"2016-03-04T16:44:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222441536\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457107806\u0022 data-ipsquote-userid=\u0022120544\u0022 data-ipsquote-username=\u0022paul23\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n31 minutes ago, paul23 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m resisting the urge to facepalm here. Structural (and aerodynamic)\u00A0forces, in essence, are differential equations, where you solve a large matrix (mesh) with each row being a \u0022part\u0022 and columns the variables (this is overly simplified). You have to do it this way, because the way a part behaves -under standard behaviour- changes how other parts react. So you can\u0027t just ignore a part in the physics calculations you have to take that part into account to calculate how the other part works.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is utterly obvious in practice, you can see it easily: sometimes your craft deteriorates after a seemingly uncontrolled increase in spin (without any work being done), this is exactly due to above reason (combined with rounding errors).\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot every situation involves aerodynamic forces, in space they can be left out, also on Kerbin while driving at low speeds. I think it depends on which part is placed on which branch of the tree.\n\u003C/p\u003E\n"},{"CreatedByName":"paul23","CreatedById":120544,"CreatedDateTime":"2016-03-04T16:55:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222441572\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457109016\u0022 data-ipsquote-userid=\u0022145373\u0022 data-ipsquote-username=\u0022KerbonautInTraining\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n25 minutes ago, KerbonautInTraining said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nEach ship in the physics bubble\u00A0gets 1 thread to play with in 1.1, according to the devs.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat happens when 2 large ships touch each other but don\u0027t dock? Do the threads merge and slow your game\u00A0to a crawl? Do they stay as separate threads and do black magic to figure out what the other is doing?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell I have no idea how ksp works - but I think when two ships are close they are part of the same physics bubble (since they also don\u0027t disappear). Thus they occur on a single thread. Btw because of the way those calculations work they don\u0027t have to be single threaded (forever). Once you build the matrix solving a matrix can be done using many threads (heck this is a perfect task for a GPU through something like \u003Ca href=\u0022https://en.wikipedia.org/wiki/CUDA%5DCUDA%5B/url%5D\u0022 rel=\u0022external nofollow\u0022\u003ECUDA\u003C/a\u003E\u00A0allowing very fast simultanous calculations.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-04T16:55:22Z\u0022 title=\u002203/04/2016 04:55  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 4, 2016\u003C/time\u003E by paul23\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"p1t1o","CreatedById":74091,"CreatedDateTime":"2016-03-04T17:03:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222441175\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457091172\u0022 data-ipsquote-userid=\u0022135480\u0022 data-ipsquote-username=\u0022Gkirmathal\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Gkirmathal said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat I personally don\u0027t get, for as long as I have been playing KSP, is why Squad can\u0027t change the part-to-part physics, so that it somewhat work in the following fashion:\n\u003C/p\u003E\n\u003Cp\u003E\n\u0027\u003Cem\u003Einline connected parts\u003C/em\u003E\u0027 to be excluded from \u0027\u003Cem\u003Epart-to-part physics calculations\u003C/em\u003E\u0027 and only until a certain threshold is reached, only then the phycics calculations on these inline connected parts is started. For example extreme centrifugal forces, or aerodynamic forces, etc, would trigger physics calculations on those parts.\n\u003C/p\u003E\n\u003Cp\u003E\nThus large constructions could be much smoother as those extreme scenarios are not common, space stations for example.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not too familiar with the ins-and-outs of how software works, but I do know that there is no free lunch. Your own idea contains its own downfall -\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u0022...only until a certain threshold is reached, only then the phycics calculations on these inline connected parts is started. For example extreme centrifugal forces, or aerodynamic forces, etc, would trigger physics calculations on those parts.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nBang, you\u0027ve just introduced a new process that has to continuously run that watches for this \u0022threshold\u0022 being crossed - you\u0027ve replaced a bunch of physics calculations, with...another bunch of physics calculations.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd whilst I am sure there is always room for clever optimisations, and perhaps an incremental benefit could be gotten from your idea, there is a reason why it is difficult.\n\u003C/p\u003E\n"},{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2016-03-04T17:14:28Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/74091-p1t1o/\u0026amp;do=hovercard\u0022 data-mentionid=\u002274091\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/74091-p1t1o/\u0022\u003E@p1t1o\u003C/a\u003E thinking theoretically of course: the calculation would only address the vessel \u003Cstrong\u003E\u003Cem\u003Eas a whole\u003C/em\u003E\u003C/strong\u003E. Not on a \u003Cstrong\u003E\u003Cem\u003Epart-to-part basis\u003C/em\u003E\u003C/strong\u003E like it is the case now, so the number of calculations being done on a 100 parts ship, would be less. Thus performance would theoretically be increased, even for a single threaded process.\n\u003C/p\u003E\n\u003Cp\u003E\nUnless thresholds are reached, as Paul mentions them being differential equations, than of course performance still goes out of the window on high part count ships.\n\u003C/p\u003E\n\u003Cp\u003E\nWhether this can be actually be done within the constraint of Unity, that is a whole different discussion \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-04T17:19:23Z\u0022 title=\u002203/04/2016 05:19  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 4, 2016\u003C/time\u003E by Gkirmathal\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fearless Son","CreatedById":133397,"CreatedDateTime":"2016-03-04T17:26:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222441572\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457109016\u0022 data-ipsquote-userid=\u0022145373\u0022 data-ipsquote-username=\u0022KerbonautInTraining\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n52 minutes ago, KerbonautInTraining said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nEach ship in the physics bubble\u00A0gets 1 thread to play with in 1.1, according to the devs.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat happens when 2 large ships touch each other but don\u0027t dock? Do the threads merge and slow your game\u00A0to a crawl? Do they stay as separate threads and do black magic to figure out what the other is doing?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMy best guess would be that each ship processes independently, registering the \u0022bump\u0022 of the other ship as just one more physics force to calculate. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis does introduce the issue that you could have two high part count vessels that can rendezvous and be running at a smooth framerate, only to find your framerate takes a sharp nosedive as soon as they dock together and become one ship. \u00A0On the other hand, such a situation would be better than in previous versions, where that framerate drop would occur simply by the two ships simply getting near one another. \u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2016-03-04T17:44:53Z","Content":"\n\u003Cp\u003E\nMoved over to Development Discussions.\n\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2016-03-04T18:01:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222441595\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457109852\u0022 data-ipsquote-userid=\u002250750\u0022 data-ipsquote-username=\u0022Azimech\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Azimech said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNot every situation involves aerodynamic forces, in space they can be left out, also on Kerbin while driving at low speeds. I think it depends on which part is placed on which branch of the tree.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFor starters you could apply a simple heuristic along the lines of \u0022if a part has no subnodes and a mass of less than x% of its parent than merge it with the parent for physics calculations\u0022 or something along those lines. With some refinements you could come up with a good reduction of the parts involved in Physics calculations without significantly altering the accuracy.\n\u003C/p\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2016-03-04T18:29:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222441572\u0022 data-ipsquote-contentid=\u0022133444\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221457109016\u0022 data-ipsquote-userid=\u0022145373\u0022 data-ipsquote-username=\u0022KerbonautInTraining\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, KerbonautInTraining said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nEach ship in the physics bubble\u00A0gets 1 thread to play with in 1.1, according to the devs.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot sure if this is confirmed yet. I remember a dev statement from several weeks ago (either devnotes or squadcast) that in principle unity can split physics into several threads but nothing is done (so far) from the KSP side. So it all depends on how the engine decides to handle things, and they did not want to promise that it actually happens with multiple vessels in physics range.\n\u003C/p\u003E\n\u003Cp\u003E\nThe possibility is a unity feature, so this is public knowledge. It actually happening is a definite observation/promise about game behavior/performance, and they have been quite secretive about that kind of information. I have the impression that those two tings are often confounded in the discussions.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-04T18:31:59Z\u0022 title=\u002203/04/2016 06:31  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 4, 2016\u003C/time\u003E by pellinor\u003C/strong\u003E\n\u003C/span\u003E\n"}]}