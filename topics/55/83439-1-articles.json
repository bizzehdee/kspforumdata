{"TopicId":83439,"ForumId":55,"TopicTitle":"semi-active physics for aerodynamic decay on unfocused objects","CreatedByName":"thereaverofdarkness","CreatedById":75673,"CreatedDateTime":"2014-08-31T06:45:30Z","PageNum":1,"Articles":[{"CreatedByName":"thereaverofdarkness","CreatedById":75673,"CreatedDateTime":"2014-08-31T06:45:30Z","Content":"\n\u003Cp\u003EI am both suggesting implementing this and opening the thread to discussion of the impacts of such a thing and how you would feel about its implementation.\u003C/p\u003E\u003Cp\u003EThe basic idea is to have unfocused objects in atmosphere slow down and thus change trajectory using a very simple calculation, treating the craft/object as a single part with a total mass and averaged drag, and no other special defining characteristics. Its trajectory would then be predicted beforehand and it would merely run on rails.\u003C/p\u003E\u003Cp\u003EThis would allow you to perform light aerobraking maneuvers more quickly by unfocusing the craft so you can go to higher time warp, and would also allow you to de-orbit staging debris over time by placing it in an orbit that intersects the atmosphere. You could intentionally set your initial staging orbit at 65km so that the spent parts left behind de-orbit rather quickly.\u003C/p\u003E\u003Cp\u003EFor those of you who believe this would cause a lot of lag: it really wouldn\u0027t be significantly increasing cycles, for two reasons:\u003C/p\u003E\u003Cp\u003E1.) trajectories are predicted beforehand and move on rails, just as they do outside the atmosphere\u003C/p\u003E\u003Cp\u003E2.) things in atmosphere will gradually clear out, so you won\u0027t have to worry about a build-up\u003C/p\u003E\n"},{"CreatedByName":"AlexanderB","CreatedById":17544,"CreatedDateTime":"2014-08-31T12:53:28Z","Content":"\n\u003Cp\u003E...and this would probably also open the door for adding parachutes and having it parachute safely to the ground on rails. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E[edit:] and ion drive while on rails/warp..\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-31T19:49:04Z\u0022 title=\u002208/31/2014 07:49  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 31, 2014\u003C/time\u003E by AlexanderB\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"dryer_lint","CreatedById":162541,"CreatedDateTime":"2014-08-31T13:42:59Z","Content":"\n\u003Cp\u003EI agree, I was just thinking about this a while back... however, aren\u0027t most orbits in KSP completely outside the atmosphere?\u003C/p\u003E\n"},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2014-08-31T18:16:04Z","Content":"\n\u003Cp\u003EShow your math, rather than calling it a simple calculation. While I\u0027d like to see it, I\u0027m skeptical that such a formula exists that fits into KSP\u0027s \u0022on-rails\u0022 trajectory projections. Bonus points if it matches fully simulated trajectories using stock aerodynamics (I don\u0027t think this would work at all with NEAR or FAR or any other semi-realistic aerodynamics simulation, because orientation would matter).\u003C/p\u003E\u003Cp\u003EYes, MJ can do aerobraking calculations, but it does that using an iterative solution which is more computationally intensive than KSP\u0027s \u0022on-rails\u0022 trajecotry projections.\u003C/p\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2014-08-31T18:23:11Z","Content":"\n\u003Cp\u003EYes, you should probably quantify your method. However, I am aware that such models exist. I don\u0027t know the specifics of them though.\u003C/p\u003E\u003Cp\u003EBy the way, Eric: in physics and engineering such things are rarely one line equations, and the word \u0022formula\u0022 is discouraged. I would like to see the OP\u0027s derivation.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-08-31T18:28:42Z","Content":"\n\u003Cp\u003EThe calculation may be iterative and relatively computionally intensive, but for an unguided object on rails it can be done once and then cached until that object\u0027s trajectory changes or the object hits the surface. So I\u0027m not very concerned about performance.\u003C/p\u003E\u003Cp\u003EI\u0027m more concerned about accuracy of such prediction. It can easily be \u0022abused\u0022 for saving and recovering parts which would not survive when followed.\u003C/p\u003E\n"},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2014-08-31T18:52:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tntristan12\u0022 data-cite=\u0022tntristan12\u0022\u003E\u003Cdiv\u003EBy the way, Eric: in physics and engineering such things are rarely one line equations, and the word \u0022formula\u0022 is discouraged. I would like to see the OP\u0027s derivation.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is true, I wasn\u0027t thinking in terms of the formal definition of a formula, more process. Lack of caffeine defense? I also wasn\u0027t thinking in terms of caching, and that would help as Kasuha pointed out, since we\u0027re talking something that isn\u0027t focused, so you wouldn\u0027t be recomputing the entire future trajectory if it\u0027s under thrust. I still think calling it a simple calculation makes it sound more trivial than it would be to implement, but it might be less than a major project, at least.\u003C/p\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2014-09-01T06:29:03Z","Content":"\n\u003Cp\u003EAgreed, it would not be a small feature and it\u0027d be a challenge to avoid making it abusable. I still feel like when we can have proper multithreaded physics, a background simulation can be run on in-atmosphere objects. When you get down to it, there\u0027s almost never more than half a dozen objects in the atmosphere at any given time. It wouldn\u0027t be unreasonable to force the player out of time warp and warn them that if they engage time warp the in-atmosphere objects may be lost\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-09-01T07:44:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tntristan12\u0022 data-cite=\u0022tntristan12\u0022\u003E\u003Cdiv\u003EWhen you get down to it, there\u0027s almost never more than half a dozen objects in the atmosphere at any given time.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EApart of some rare exceptions, parts in the atmosphere are parts that came off the ship you\u0027re piloting just now so running physics simulation on them is not putting more load on the physics engine. The problem occurs if you want to use time warp. Even physics time warp does not go well with using parachutes to land things safely. And non-physics time warp is completely out of question until they are landed.\u003C/p\u003E\u003Cp\u003EAlso, the game not allowing you to increase time warp because you still have some parts falling through the atmosphere might be major inconvenience for players.\u003C/p\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2014-09-01T14:01:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EAlso, the game not allowing you to increase time warp because you still have some parts falling through the atmosphere might be major inconvenience for players.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAgreed, totally. However it does not have to be an all or nothing solution (full time warp or completely restricting it). I had in mind a message kind of like the popup that comes up the first time you engage physics warp (\u0022might make ships unstable\u0022). It tells you that objects are in atmosphere, you can use physics warp (and perhaps increase the range of physical warp values when the controlled vessel is not in atmosphere) but if you go into standard warp the game will revert to classic behavior (\u0022warning: engaging warp will pause the current aerodynamic simulation for $vessel\u0022).\u003C/p\u003E\u003Cp\u003EI don\u0027t think it\u0027d work out to be a huge inconvenience because, like you said, objects in the atmosphere are usually parts dropped from the ship you\u0027re piloting right now, and during ascent you don\u0027t really need time warp. In other cases where you have returning debris from a previous path (for example if I set a free return trajectory and lose some debris) I might not care if the debris disappears in the atmosphere, so when the warning pops up I just ignore it and time-warp on. No harm, no foul.\u003C/p\u003E\u003Cp\u003EThe good thing about approaching it this way is that it\u0027s a *full* physics simulation that can\u0027t really be exploited. It pleases those who want to be able to recover separate vessels away from the control ship, without punishing people who just want to get on with their mission and don\u0027t care if the upper stage booster they dropped 10 minutes ago disappears or crashes. Some config settings could change the robustness of this feature. Perhaps a checkbox would prevent the warning popup from happening if the object entering the atmosphere is debris. Another slider could limit the maximum number of parts that are simulated at a given time.\u003C/p\u003E\u003Cp\u003EMy point with this monster of a post is that there are options that preserve the current gameplay while still giving folks this much requested feature. Also, allowing off-screen recovery would be a fantastic addition to career mode gameplay.\u003C/p\u003E\n"},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2014-09-02T17:29:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EApart of some rare exceptions, parts in the atmosphere are parts that came off the ship you\u0027re piloting just now so running physics simulation on them is not putting more load on the physics engine. The problem occurs if you want to use time warp. Even physics time warp does not go well with using parachutes to land things safely. And non-physics time warp is completely out of question until they are landed.\u003Cp\u003EAlso, the game not allowing you to increase time warp because you still have some parts falling through the atmosphere might be major inconvenience for players.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think OP intended that rather than simulating physics using PhysX engine, the trajectory will be calculated separately using a custom ODE equation the solution of which will be used to modify the trajectory, thereby ignoring what patched conics predicts (is that possible?) \u003C/p\u003E\u003Cp\u003EThis would mean all simulations can be performed whenever and time warp isnt a problem (as long as the simulations are completed before time warp is entered). \u003C/p\u003E\u003Cp\u003EFor stock aerodynamics, since drag is independent of orientation, the calculations would be simple and 4th order Runge-Kutta integration can be used to obtain accurate predictions with very few points (probably between 100-1000) which is trivial on any computer made this decade. This scheme can be implicit (iterative) or explicit (non-iterative). \u003C/p\u003E\u003Cp\u003EFor NEAR or FAR, an assumption will have to be made about the piloting, most notably the Angle of Attack (constant angle of attack can be abused since the craft might not be able to maintain it if it doesnt have enough torque or if the vector is unstable) . Thus, more likely, the player will have to choose prograde or retrograde, or NEAR/FAR will automatically enforce the most stable orientation (retrograde for pods, and prograde for aircraft). \u003C/p\u003E\u003Cp\u003ENevertheless, if the angle of attack is given, the problem is the same as stock KSP, and 4th order integration schemes can be used no problem.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-09-02T18:50:20Z","Content":"\n\u003Cp\u003EI think there are two easy solutions:\u003C/p\u003E\u003Cp\u003EOne easy solution is to let the part/ship disappear and provide the player full recovery bonus including crew as if the part/ship has safely landed.\u003C/p\u003E\u003Cp\u003EThe other easy solution is to run full physics simulation of the part\u0027s fall.\u003C/p\u003E\u003Cp\u003EBesides these two, there is a range of solutions in between which have some strengths and weaknesses of either of the two extremes, neither is in reality any better than them and are actually even harder to implement.\u003C/p\u003E\n"},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2014-09-02T19:54:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EI think there are two easy solutions:\u003Cp\u003EOne easy solution is to let the part/ship disappear and provide the player full recovery bonus including crew as if the part/ship has safely landed.\u003C/p\u003E\u003Cp\u003EThe other easy solution is to run full physics simulation of the part\u0027s fall.\u003C/p\u003E\u003Cp\u003EBesides these two, there is a range of solutions in between which have some strengths and weaknesses of either of the two extremes, neither is in reality any better than them and are actually even harder to implement.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYour solution is fine for players who dont want to simulate aerobreaking or orbital decay. But i agree, if we are just looking for a landing and receiving credit for parts, than simulating physics is a waste, and the player should just get their recovered parts/kerbucks. \u003C/p\u003E\u003Cp\u003EPersonally, i think something like what i proposed above would be great for a plugin to perform an aero-breaking prediction and should be FAR/NEAR compatible (it wouldnt manually change the path from what patched conics predicts, it would just show a prediction). I could easily program it in a fake language like MATLAB, but not so much in C#....\u003C/p\u003E\n"},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2014-09-11T17:32:40Z","Content":"\n\u003Cp\u003EFor anything the game labels as \u0022debris,\u0022 if the \u0022on the rails\u0022 path intersects the atmosphere height, it should simply disappear unless the player is actively focused on it or it is inside physics distance (then physics apply). It would at least encourage deorbiting junk as a way to keep things clean, as well as to minimize the amount of stuff that the game needs to watch.\u003C/p\u003E\n"},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2014-09-12T02:19:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tater\u0022 data-cite=\u0022tater\u0022\u003E\u003Cdiv\u003EFor anything the game labels as \u0022debris,\u0022 if the \u0022on the rails\u0022 path intersects the atmosphere height, it should simply disappear unless the player is actively focused on it or it is inside physics distance (then physics apply). It would at least encourage deorbiting junk as a way to keep things clean, as well as to minimize the amount of stuff that the game needs to watch.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat for? Players can get rid of debris by clearing it in tracking station, so there is a way around this requirement?\u003C/p\u003E\n"},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2014-09-12T05:39:11Z","Content":"\n\u003Cp\u003EYeah, I know, it\u0027s sort of a pain. It gives the feeling of having to explicitly do something, when the fact was that you dumped them such that they followed you down. Anti-immersive, but not critical.\u003C/p\u003E\n"},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2014-09-12T13:28:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tater\u0022 data-cite=\u0022tater\u0022\u003E\u003Cdiv\u003EYeah, I know, it\u0027s sort of a pain. It gives the feeling of having to explicitly do something, when the fact was that you dumped them such that they followed you down. Anti-immersive, but not critical.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, i see. you are saying the opposite. Right now, they wont get destroyed without you manually deleting them, and you are saying, the game should automatically delete them for you, since you went through the trouble of making sure they re-entered atmosphere.\u003C/p\u003E\n"}]}