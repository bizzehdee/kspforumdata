{"TopicId":110300,"ForumId":55,"TopicTitle":"Corrupt save file recovery","CreatedByName":"Pablonaut","CreatedById":144617,"CreatedDateTime":"2015-05-21T22:45:27Z","PageNum":1,"Articles":[{"CreatedByName":"Pablonaut","CreatedById":144617,"CreatedDateTime":"2015-05-21T22:45:27Z","Content":"\n\u003Cp\u003EI recently lost a very neat and hard-earned career (tears streaming down my face \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E) to a corrupt save file, I\u0027ve been looking everywhere for ways to rescue the persistent.sfs file, but can\u0027t figure out a way or can\u0027t identify what is wrong with mine. \u003C/p\u003E\u003Cp\u003EIt would be great to have an external app or editor that could diagnose corrupt save files, since I\u0027m guessing it could be wrong syntax or missing braces or those sorts of identifiable mistakes that lead to the file not being read properly. \u003C/p\u003E\u003Cp\u003EWhat happens exactly is that when I go to \u0022Resume Saved\u0022, and press on my save, the on load, the load button animates the click but can\u0027t seem to load the save. \u003C/p\u003E\u003Cp\u003EIf anyone could help me out it would be awesome, just let me know hot to attach my persistent.sfs file.\u003C/p\u003E\u003Cp\u003EMany thanks,\u003C/p\u003E\n"},{"CreatedByName":"katateochi","CreatedById":35181,"CreatedDateTime":"2015-05-22T00:48:48Z","Content":"\n\u003Cp\u003EIf you are on windows 7 I may have a recovery solution for you. Right click on your persistent.sfs file, go to properties and hopefully you\u0027ll have a past versions tab. From that tab you should be able to select a version of the file from a day or two ago. Might not be exactly where you left off, but will be better that loosing it all.\u003C/p\u003E\u003Cp\u003EFor the future, I have a tool that will protect you against any save or craft file becoming corrupt (as well as those times when you forget to quicksave). It\u0027s a bit out of date, but still works fine in the current KSP. \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/72212-Jebretary-Automatic-Version-Control-%28backups%29-for-craft-and-saves-v0-4-0\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003EJebretary\u003C/strong\u003E\u003C/a\u003E is a version control manager that runs as a stand-alone program so it can manage version control for multiple KSP installs. It tracks every single quicksave and autosave so you can revert to any point in your saves history. It also tracks how each craft is each time you edit and then launch so you can rewind any crafts development too. \u003C/p\u003E\u003Cp\u003EIt uses the git version control system (so you do need to install that too), but it handles all the interaction with git so you don\u0027t have to worry about it. By using git it is much more space efficient than just taking copies of save and craft files. It runs as a web server on your KSP machine and you interface with it using your browser (and you can also access it on any web device that\u0027s connected to your local network).\u003C/p\u003E\n"},{"CreatedByName":"Pablonaut","CreatedById":144617,"CreatedDateTime":"2015-05-22T14:09:53Z","Content":"\n\u003Cp\u003EThanks for that, I\u0027m running KSP on OS X, I have resorted to stitching a previous save with things that look fine from the corrupted persistent.sfs file\u003C/p\u003E\n"},{"CreatedByName":"vexx32","CreatedById":12283,"CreatedDateTime":"2015-05-22T14:30:14Z","Content":"\n\u003Cp\u003ETypically speaking, a corrupt save file is most commonly simply truncated -- that is, the write operation is interrupted, and you\u0027re left with a file is that simply incomplete, missing all the data after a certain point. It\u0027s generally not possible to infer the vast majority of the lost data, and the only way you could attempt to \u0022recover\u0022 it is by attempting to patch in any missing data with the default values. Such an operation is likely to be highly prone to glitches and bugs, but is theoretically somewhat possible.\u003C/p\u003E\n"},{"CreatedByName":"Two","CreatedById":144535,"CreatedDateTime":"2015-05-24T00:53:31Z","Content":"\n\u003Cp\u003EOne simple solution for a quick fix would be to have 3 save files: \u003C/p\u003E\u003Cp\u003Epersistant.sfs - the current save\u003C/p\u003E\u003Cp\u003Epersistant.sfs.2 - the previous save\u003C/p\u003E\u003Cp\u003Epersistant.sfs.3 - the save before the previous one.\u003C/p\u003E\u003Cp\u003EIf the game is saved, the following happens in that order:\u003C/p\u003E\u003Cp\u003E1. persistant.sfs.2 is copied to persistant.sfs.3\u003C/p\u003E\u003Cp\u003E2. If 1 was successful: persistant.sfs is copied to persistant.sfs.2\u003C/p\u003E\u003Cp\u003E3. If 2 was successful: the new (current) persistant.sfs is written to disk.\u003C/p\u003E\u003Cp\u003EThis way a player would not loose more than a few minutes of gameplay if something bad happens.\u003C/p\u003E\n"},{"CreatedByName":"Murph","CreatedById":90837,"CreatedDateTime":"2015-05-24T02:51:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Two\u0022 data-cite=\u0022Two\u0022\u003E\u003Cdiv\u003EOne simple solution for a quick fix would be to have 3 save files: \u003Cp\u003Epersistant.sfs - the current save\u003C/p\u003E\u003Cp\u003Epersistant.sfs.2 - the previous save\u003C/p\u003E\u003Cp\u003Epersistant.sfs.3 - the save before the previous one.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe game already does that to an extent, but it requires the user to take the prudent step of manually saving every once in a while (e.g. after every significant change).\u003C/p\u003E\u003Cp\u003ERight now, you have persistent.sfs automatically managed, quicksave.sfs manually (but extremely easy and conveniently) managed, and unlimited named saves (default \u0022quicksave #number.sfs\u0022) manually managed from the Esc menu at the KSC screen.\u003C/p\u003E\u003Cp\u003EI do not agree with having many levels of automatic backup for persistent.sfs, but do agree that it would be a simple enhancement to preserve the immediately previous version. It doesn\u0027t need to be as complex as your suggestion, as a move/rename is a safe \u0022atomic\u0022 (100% success, or 100% fail, no halfway points leaving inconsistency) operation on all 3 operating systems supported by KSP. Just rename the current persistent.sfs to persistent.sfs.bak, the OS semantics are that any failure there will leave the file untouched as its previous name (unless your filesystem is broken, in which case nothing an application does can guarantee or improve safety).\u003C/p\u003E\u003Cp\u003EI\u0027m strongly against any unnecessary complexity related to persistent.sfs, as it is automatically saved frequently during game play. For example, copying it to a backup is orders of magnitude slower than renaming it; copying would double to triple the most time intensive part of saving. Additionally, if something with game or system state has created a situation which would be likely to corrupt the save, copying would make it very likely that you would also have a corrupted backup, where renaming does not touch the actual data blocks and is very unlikely to corrupt the file unless the filesystem is broken.\u003C/p\u003E\u003Cp\u003EIf you\u0027re not frequently hitting F5 to quick save after significant operations in the game, you should be, and you really need to get into the habit of doing that, even if you don\u0027t believe in undoing player mistakes via quick load. Then, at the end of each session, or other points where you\u0027ve made significant progress that you don\u0027t want to lose, you should be using the named save feature.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-24T02:54:08Z\u0022 title=\u002205/24/2015 02:54  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 24, 2015\u003C/time\u003E by Murph\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Spaceman Fry","CreatedById":185723,"CreatedDateTime":"2018-02-23T10:57:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:#ffffff;color:#353c41;font-size:14px;\u0022\u003Eo answer your question, each savegame is complete in itself. If your persistent.sfs on a PC is corrupted, all you do is pick your most recent savegame, change the name to persistent.sfs, and off you go.\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSee\u00A0\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed6944321784\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/171211-corrupt-save-file-question/\u0026amp;do=embed\u0026amp;comment=3301606\u0026amp;embedComment=3301606\u0026amp;embedDo=findComment#comment-3301606\u0022 style=\u0022height:295px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"DihydrogenMonoxide","CreatedById":207533,"CreatedDateTime":"2020-11-24T16:06:47Z","Content":"\n\u003Cp\u003E\nThere is a method: rename one of your saves (e.g. quicksave.sfs \u0026amp; quicksave.loadmeta) to persistent.sfs \u0026amp; persistent.loadmeta. I tried it, and it works. Just restart the game after doing it.\n\u003C/p\u003E\n"}]}