{"TopicId":109564,"ForumId":55,"TopicTitle":"Memory management in KSP 1.0?","CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2015-05-16T20:48:24Z","PageNum":1,"Articles":[{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2015-05-16T20:48:24Z","Content":"So I\u0027m still on KSP 0.90 waiting for all of my favorite mods to get updated to the new version, but in the meantime, I\u0027ve begun wondering if the new version has alleviated any of the memory issues from the previous versions? Being the type to run a heavily modded game, I\u0027m still looking forward to the day that I don\u0027t have to babysit the memory monitor to play a couple of hours at a time. I\u0027ve read through the changelogs for the new versions (1.0-1.02), but the only reference I\u0027ve seen towards memory is a leak associated with terrain scatters."},{"CreatedByName":"NFUN","CreatedById":78715,"CreatedDateTime":"2015-05-16T20:54:52Z","Content":"\u003E \n\u003E So I\u0027m still on KSP 0.90 waiting for all of my favorite mods to get updated to the new version, but in the meantime, I\u0027ve begun wondering if the new version has alleviated any of the memory issues from the previous versions? Being the type to run a heavily modded game, I\u0027m still looking forward to the day that I don\u0027t have to babysit the memory monitor to play a couple of hours at a time. I\u0027ve read through the changelogs for the new versions (1.0-1.02), but the only reference I\u0027ve seen towards memory is a leak associated with terrain scatters.\n\nKSP stock now incorporates some of the features from Active Texture Management, so the footprint should be lower than in .90"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-05-16T21:19:55Z","Content":"KSP uses ~2.4GB for me (Mechjeb/KER)."},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2015-05-16T21:54:07Z","Content":"There were several (8-12) memory leaks fixed between 0.90 and 1.0. Not sure if that was all the memory leaks, but Maxmaps said that it was all memory leaks known at that time. Then another memory leak snuck in in 1.0.1 or 1.0.2.\n\nAs for other improvements in memory management, the game no longer needs a plugin to use DDS textures and all the stock textures got converted over. Those use about 1/3 the memory of the previous textures. Mods can now use DDS textures as well, meaning that they shouldn\u0027t add as much memory. I don\u0027t know if squad is turning on read-only for those stock textures it would be appropriate for.\n\nOnce the memory leak is closed, I think we\u0027ll be pretty stable memory-wise, and we should have plenty of room for mods."},{"CreatedByName":"vej","CreatedById":143657,"CreatedDateTime":"2015-05-16T22:07:54Z","Content":"The temperature gauges still leak but we have the TemperatureGaugeKiller mod that ensures it\u0027s turned off unless it\u0027s activated manually. I recently installed 5 or so mods that all claimed to be 1.0.2 compatible and I\u0027m now getting crashes and freezes ad nauseam. When I just had KER, MJ and TemperatureGaugeKiller it was mostly fine. I should also mention I play on a Mac. I\u0027d expect most of these issues to be fixed in just a matter of weeks tho."},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2015-05-17T01:48:06Z","Content":"Hmm, sounds promising, but not quite there yet. If past experience is any indicator, I doubt I\u0027ll be on 1.0\u002B before July."},{"CreatedByName":"Fire-Dragon-DoL","CreatedById":113470,"CreatedDateTime":"2015-05-17T09:07:10Z","Content":"The temperature gauge monitor is a real problem... I wonder why there wasn\u0027t an hotfix for that"},{"CreatedByName":"softweir","CreatedById":2795,"CreatedDateTime":"2015-05-17T10:47:01Z","Content":"The steps in eliminating a bug:\n\n1. Realise there is a bug.\n2. Programmer scratches head wondering which of 10,000 lines of code is bugged.\n3. Start collecting test data. This may take weeks.\n4. The test data suggests it is a particular module in the code.\n5. Programmer inserts debug code into the suspect module to help track down the bug.\n    1. \n    2. Nada. It wasn\u0027t this module. Go back to step 2.  \nUntil:\n    3. Got it!\n    4. Programmer scratches head wondering how the heck to fix bug without breaking 10,000 lines of code.  \n  \nThat\u0027s why there hasn\u0027t been a hotfix for the temp gauges bug.  \nOK, it isn\u0027t always like that, but all too often it can be, and the longer it takes a team to fix a bug, the more iterations of steps 2 to 5 they have gone through."},{"CreatedByName":"ModZero","CreatedById":89470,"CreatedDateTime":"2015-05-17T10:51:55Z","Content":"\u003E \n\u003E OK, it isn\u0027t always like that, but all too often it can be, and the longer it takes a team to fix a bug, the more iterations of steps 2 to 5 they have gone through.\n\nTechnically I suppose it\u0027s because they had all this \u0022vacation\u0022 and \u0022party\u0022 stuff n\u0027all. The monsters."},{"CreatedByName":"SnakyLeVrai","CreatedById":135852,"CreatedDateTime":"2015-05-17T11:09:05Z","Content":"geez 2.4Gb? I often start at 2.9Gb, and when I load a previous Science Career saved game, I start at 3.00Gb \u003E\\_\\_\u003E I started exploring the various stuff I had on the ground or in orbit and it CTD\u0027d after 5 minutes only.\n\nAlso, I\u0027ve lost most of all the subassemblies I had in the VAB (also the stock ones, I think, like the launchers which were all stock), and if I click on a vessel in the tracking station, then I can\u0027t click on any other one anymore. I have to get out the tracking station, and get back so I could click on another vessel... I\u0027d better head to the support section and see if someone experienced that already."},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-05-17T11:16:04Z","Content":"\u003E \n\u003E geez 2.4Gb? I often start at 2.9Gb, and when I load a previous Science Career saved game, I start at 3.00Gb \u003E\\_\\_\u003E I started exploring the various stuff I had on the ground or in orbit and it CTD\u0027d after 5 minutes only.\n\u003E Also, I\u0027ve lost most of all the subassemblies I had in the VAB (also the stock ones, I think, like the launchers which were all stock), and if I click on a vessel in the tracking station, then I can\u0027t click on any other one anymore. I have to get out the tracking station, and get back so I could click on another vessel... I\u0027d better head to the support section and see if someone experienced that already.\n\nAre you on Windows? Even with my more modded install it doesn\u0027t go much over 3gb.\n\nE: Here\u0027s a pic, KSP opened ~10 mins. ![90a3ba608d.jpg](http://puu.sh/hQqOi/90a3ba608d.jpg)\n\n**Edited \u003Ctime datetime=\u00222015-05-17T11:19:56Z\u0022 title=\u002205/17/2015 11:19  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 17, 2015\u003C/time\u003E by Linear**"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2015-05-17T11:34:19Z","Content":"How many mods do you have installed to load at 2.4GB-2.9GB??\n\nOn my 0.90 install I\u0027m running with 126 mod folders in my gamedata and I load in at 2.5GB, though, to be fair, I\u0027m running OpenGL and have converted many of my textures to DDS."},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-05-17T11:37:48Z","Content":"\u003E \n\u003E How many mods do you have installed to load at 2.4GB-2.9GB??\n\u003E On my 0.90 install I\u0027m running with 126 mod folders in my gamedata and I load in at 2.5GB, though, to be fair, I\u0027m running OpenGL and have converted many of my textures to DDS.\n\nLike five on that install, but we were not discussing heavily modded games. My modded install hovers around 2.8-3.0GB (No OGL, DDS where possible) :-)"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2015-05-17T11:42:13Z","Content":"\u003E \n\u003E Like five on that install, but we were not discussing heavily modded games. My modded install hovers around 2.8-3.0GB (No OGL, DDS where possible) :-)\n\nYou see my point though? A virtually unmodded install should load in way lower than 2.4GB..."},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-05-17T11:43:07Z","Content":"\u003E \n\u003E You see my point though? A virtually unmodded install should load in way lower than 2.4GB...\n\nIndeed, why I posted my screenshot of it running with around 2GB with a handful of mods. 2.4GB seems pretty high for near stock."},{"CreatedByName":"SnakyLeVrai","CreatedById":135852,"CreatedDateTime":"2015-05-17T12:25:28Z","Content":"Impressive. Yeah I\u0027m on windows...\n\nI\u0027ve got those mods (active textures management is there even if not listed):\n\n\u003E \n\u003E KSP: 1.0.2 (Win32) - Unity: 4.6.4f1 - OS: Windows 7 Service Pack 1 (6.1.7601) 64bit\n\u003E \n\u003E USI Tools - 0.4.1\n\u003E \n\u003E Community Resource Pack - 0.4.2\n\u003E \n\u003E Firespitter - 7.1\n\u003E \n\u003E Kerbal Engineer Redux - 1.0.16.6\n\u003E \n\u003E HyperEdit - 1.4.1\n\u003E \n\u003E KSP-AVC Plugin - 1.1.5\n\u003E \n\u003E Infernal Robots - 0.21.2\n\u003E \n\u003E PlanetShine - 0.2.3.1\n\u003E \n\u003E RCS Build Aid - 0.7\n\u003E \n\u003E SCANsat - 1.1.2\n\u003E \n\u003E Trajectories - 1.2\n\u003E \n\u003E Kerbal Alarm Clock - 3.3.1.1\n\u003E \n\u003E Transfer Window Planner - 1.3.0.1\n\u003E \n\u003E TweakScale - 2.1\n\u003E \n\u003E Karbonite - 0.6.2\n\u003E \n\u003E MKS - 0.30.1\n\u003E \n\u003E \n\nNote I am NOT running OGL. I should probably look into that.\n\nSolved a few problems though. The missing subassemblies in the VAB were because of the new techtree, the new nodes were - of course - not researched. Lucky I was to have 5400\u002B science in spare... That solved it.\n\nAnd the bug clicking in the tracking station was because of missing mods, alt-F12 rulz ([full story here](https://forum.kerbalspaceprogram.com/threads/119255-Cannot-select-fly-terminate-craft-from-Tracking-Station-since-upgrade-to-V1-0?p=1947676#post1947676)).\n\n- - - Updated - - -\n\nJesus Christ on EVA!\n\nthe \u0022-force-opengl\u0022 dropped it to 1.89 Gb!!!!\n\n\\*smooches to whoever found that\\*"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-05-17T14:02:00Z","Content":"\u003E \n\u003E Jesus Christ on EVA!\n\u003E \n\u003E the \u0022-force-opengl\u0022 dropped it to 1.89 Gb!!!!\n\u003E \n\u003E \\*smooches to whoever found that\\*\n\nOGL is used by many, however on certain systems it can cause graphical issues so it\u0027s not \u0027officially\u0027 supported. Glad it could help you and kudos to who remembered it above."},{"CreatedByName":"pincushionman","CreatedById":98495,"CreatedDateTime":"2015-05-17T14:14:31Z","Content":"Hotfix 1.0.3 hasn\u0027t come yet because of their vacation, but the temp gauge memory fix will likely be nothing more than \u0022turn gauges off by default.\u0022 That doesn\u0027t fix the problem, it just hides it. However, the next big effort will be the Unity 5 switch, which may make some of the current bugs go away by default (because they\u0027re Unity bugs, not KSP bugs) or because they need to re-write their custom code to be compatible with the new system.\n\nThey also said they\u0027re re-writing some of their UI stuff specifically because it\u0027s admittedly poor quality."},{"CreatedByName":"SelectHalfling0","CreatedById":105051,"CreatedDateTime":"2015-05-17T14:17:49Z","Content":"Active Texture Management has alleviated all my problems (the game runs smoothly for me, which is better than .90)"},{"CreatedByName":"SpacedInvader","CreatedById":106018,"CreatedDateTime":"2015-05-17T20:34:36Z","Content":"\u003E \n\u003E Active Texture Management has alleviated all my problems (the game runs smoothly for me, which is better than .90)\n\nWhen I make the move, I\u0027ll start out with ATM, though up until now, it just hasn\u0027t been enough on it\u0027s own to support the level of mods I like to run. Back in 0.23.5 I was an avid user / supporter of Load on Demand because it did a lot to fix the main issue of KSP / Unity loading everything on startup and then crashing. Sadly it was broken by 0.25 and never fixed as the developer had moved on to other things. Personally I\u0027d love to run an x64 version of the game, I\u0027m just not willing to set up a dual boot of Linux and deal with all of the potential issues / headaches there just for KSP...\n\nEDIT: The persistent problem with KSP seems to be memory management. Things that aren\u0027t needed are loaded, and then things that aren\u0027t in current use are never unloaded, and then on top of everything else, there is no provision within the code for running out of memory gracefully.\n\n**Edited \u003Ctime datetime=\u00222015-05-17T20:40:05Z\u0022 title=\u002205/17/2015 08:40  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 17, 2015\u003C/time\u003E by SpacedInvader**"},{"CreatedByName":"uglyduckling81","CreatedById":129740,"CreatedDateTime":"2015-05-17T21:23:29Z","Content":"My stock game with aggressive active texture manager only uses about 1.5Gb of Memory.\n\nAdd about 50 mods excluding any that enhance the visuals and it bumps to 2.2-2.4Gb.\n\nAdd clouds adds about 1Gb.\n\nI have fairly regular CTD unmodded or modded. I find it interesting how different everyone\u0027s experiences are with this game."},{"CreatedByName":"helaeon","CreatedById":101767,"CreatedDateTime":"2015-05-17T21:46:38Z","Content":"You\u0027re using Texture Replacer you should look at updating it.\n\nATM may or may not have issues. It seems that if you\u0027re trying to mess with textures outside of what KSP is doing on its own you might be setting yourself up for problems.\n\nI\u0027m not using ATM myself (and didn\u0027t in .90 either), upon updating Texture Replacer last night where it no longer tries to do texture compression and such, my memory use went down 500 MB. Yeah, went from barely able to run (yeah after 30 min to 1 hour, I was at 3.4 GB), now I hover around 2.6 GB for hours. My install is reasonably heavily modded.\n\nThe stable version of EVE is from .25. I know I\u0027m getting quite a few nullrefs from it and the overhaul isn\u0027t quite ready yet, so, that could be an issue as well."},{"CreatedByName":"boxman","CreatedById":61559,"CreatedDateTime":"2015-05-17T22:27:16Z","Content":"\u003E \n\u003E So I\u0027m still on KSP 0.90 waiting for all of my favorite mods to get updated to the new version, but in the meantime, I\u0027ve begun wondering if the new version has alleviated any of the memory issues from the previous versions? Being the type to run a heavily modded game, I\u0027m still looking forward to the day that I don\u0027t have to babysit the memory monitor to play a couple of hours at a time. I\u0027ve read through the changelogs for the new versions (1.0-1.02), but the only reference I\u0027ve seen towards memory is a leak associated with terrain scatters.\n\nEverything I have heard suggests that it has only gotten worse. The memory leaks so fast that even with a stock game it will crash after a few hours of play."},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2015-05-18T08:32:46Z","Content":"\u003E \n\u003E Everything I have heard suggests that it has only gotten worse. The memory leaks so fast that even with a stock game it will crash after a few hours of play.\n\nNot for all it doesn\u0027t. Don\u0027t speak for all of us, thank you."},{"CreatedByName":"eddiew","CreatedById":127483,"CreatedDateTime":"2015-05-18T08:55:00Z","Content":"\u003E \n\u003E Everything I have heard suggests that it has only gotten worse. The memory leaks so fast that even with a stock game it will crash after a few hours of play.\n\nA few hours? That\u0027s more than some of us get at a session ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\nJust occasionally alt-tab and check the memory use, thus heading off any impending crashes with a planned restart ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"}]}