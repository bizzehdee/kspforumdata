{"TopicId":110214,"ForumId":55,"TopicTitle":"Improved fuel flow logic (fixes the rocket flipping issue)","CreatedByName":"Chronosheep","CreatedById":135661,"CreatedDateTime":"2015-05-21T10:10:28Z","PageNum":1,"Articles":[{"CreatedByName":"Chronosheep","CreatedById":135661,"CreatedDateTime":"2015-05-21T10:10:28Z","Content":"Since 1.0.2 many players have complained about their rockets flipping when reaching a certain altitude.\n\nThe main reason for this is that the center of mass moves to the bottom of the rocket as fuel is drained from the top tanks.\n\nA simple fix for this issue would be to change the fuel flow logic to drain fuel from the bottom tanks first, not from the top tanks.\n\nThe center of mass would then move towards the top as the rocket ascends, and the rocket would remain stable.\n\nEDIT: It is obvious that this needs some clarification:\n\nIn a real life rocket, liquid fuel and oxidizer are located in separate tanks at different heights in the stage.\n\nThese tanks are drained proportionally, and the center of mass will therefore not move nearly as much is it does when the tanks are drained from top to bottom.\n\n In KSP, we have multiple fuel tanks per stage, that drain into each other. If such a system was used in real life, no sane person would start by draining the top tanks.\n\nThis is **not** only a problem of poorly designed rockets, as some like to claim (though this certainly plays a role), but is largely a problem with the default fuel flow.\n\n**Edited \u003Ctime datetime=\u00222015-05-21T15:43:19Z\u0022 title=\u002205/21/2015 03:43  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 21, 2015\u003C/time\u003E by Chronosheep**"},{"CreatedByName":"Jouni","CreatedById":97346,"CreatedDateTime":"2015-05-21T10:39:06Z","Content":"There is no such thing as the rocket flipping issue. There are only a) rockets that look strange; ![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png) rockets that point at random directions; and c) rockets that fly too fast in the lower atmosphere. To fix these issues, one can a) build rockets that look like rockets; ![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png) point the rocket at the prograde marker; and/or c) use less powerful engines in the rockets.\n\nAerodynamic stability is a kind of nice thing to have, but it\u0027s hardly necessary for building rockets that are easy to fly. Striving for it also severely limits the rocket designs you can build."},{"CreatedByName":"Commander Jebidiah","CreatedById":78685,"CreatedDateTime":"2015-05-21T11:11:13Z","Content":"\u003E \n\u003E Since 1.0.2 many players have complained about their rockets flipping when reaching a certain altitude.\n\u003E The main reason for this is that the center of mass moves to the bottom of the rocket as fuel is drained from the top tanks.\n\u003E \n\u003E A simple fix for this issue would be to change the fuel flow logic to drain fuel from the bottom tanks first, not from the top tanks.\n\u003E \n\u003E The center of mass would then move towards the top as the rocket ascends, and the rocket would remain stable.\n\nThat would be unrealistic. Try filling a plastic party cup with water, this is your fuel tank, now pierce a whole in the bottom, this is your engine. Notice the water empties from top to bottom. It would be impossible to make it empty from the bottom. It would make sense in orbit if all fuel tanks emptied equally though."},{"CreatedByName":"Corax","CreatedById":11311,"CreatedDateTime":"2015-05-21T11:15:41Z","Content":"\u003E \n\u003E Since 1.0.2 many players have complained about their rockets flipping when reaching a certain altitude.\n\u003E The main reason for this is that the center of mass moves to the bottom of the rocket as fuel is drained from the top tanks.\n\nA simple fix for this \u0022issue\u0022 would be to add more mass to the top of the rocket to make it nose-heavy, as strange as that may seem. You want to shift the center of mass in front of the center of pressure so the airflow helps to stabilize instead of acting to flip the rocket. \u003Cstine, the=\u0022\u0022 handbook=\u0022\u0022 of=\u0022\u0022 model=\u0022\u0022 rocketry=\u0022\u0022 6th=\u0022\u0022 ed.,=\u0022\u0022 wiley,=\u0022\u0022 1994=\u0022\u0022\u003E \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/stine,\u003E"},{"CreatedByName":"Majorjim!","CreatedById":61954,"CreatedDateTime":"2015-05-21T11:16:08Z","Content":"\u003E \n\u003E Since 1.0.2 many players have complained about their rockets flipping when reaching a certain altitude.\n\u003E The main reason for this is that the center of mass moves to the bottom of the rocket as fuel is drained from the top tanks.\n\u003E \n\u003E A simple fix for this issue would be to change the fuel flow logic to drain fuel from the bottom tanks first, not from the top tanks.\n\u003E \n\u003E The center of mass would then move towards the top as the rocket ascends, and the rocket would remain stable.\n\nAll you have to do is have full tanks at the bottom of the first stage and fuel in the top tanks with an empty space inbetween. That way yo can build very tall realistic looking rockets that are stable. It will drain from the bottom tanks first then the top. That\u0027s exactly what I have done on my Ares V for constellation. It works a charm."},{"CreatedByName":"pincushionman","CreatedById":98495,"CreatedDateTime":"2015-05-21T13:44:53Z","Content":"If you do your staging right (having enough stages, that is) your CoM moves forward as you drain from the first-stage tanks. And when you drop your now-empty first stage, you\u0027re out of the bulk of the atmosphere and it doesn\u0027t matter so much."},{"CreatedByName":"Murph","CreatedById":90837,"CreatedDateTime":"2015-05-21T13:57:57Z","Content":"There is no rocket flipping issue, just designs which need to be improved, and pilots who need to improve their skills."},{"CreatedByName":"Kuu Lightwing","CreatedById":142724,"CreatedDateTime":"2015-05-21T13:58:18Z","Content":"\u003E \n\u003E If you do your staging right (having enough stages, that is) your CoM moves forward as you drain from the first-stage tanks. And when you drop your now-empty first stage, you\u0027re out of the bulk of the atmosphere and it doesn\u0027t matter so much.\n\nBut most modern rockets are either two-stage or two-stage with boosters..."},{"CreatedByName":"Murph","CreatedById":90837,"CreatedDateTime":"2015-05-21T14:02:25Z","Content":"\u003E \n\u003E But most modern rockets are either two-stage or two-stage with boosters...\n\nSo? Both of those styles of rocket work just fine in 1.0.2, if the correct ascent profile is flown (and the rocket has both appropriate TWR, and appropriate amount of control authority)."},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2015-05-21T14:11:29Z","Content":"\u003E \n\u003E **There is no such thing as the rocket flipping issue.** There are only a) rockets that look strange; ![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png) rockets that point at random directions; and c) rockets that fly too fast in the lower atmosphere. To fix these issues, one can a) build rockets that look like rockets; ![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png) point the rocket at the prograde marker; and/or c) use less powerful engines in the rockets.\n\u003E Aerodynamic stability is a kind of nice thing to have, but it\u0027s hardly necessary for building rockets that are easy to fly. Striving for it also severely limits the rocket designs you can build.\n\n(my emphasis)\n\nThis.\n\nNot a problem, and doesn\u0027t need fixing."},{"CreatedByName":"Chronosheep","CreatedById":135661,"CreatedDateTime":"2015-05-21T14:23:14Z","Content":"First of all: **Yes, it is possible to work around this**, but this is not an excuse for having an illogical default fuel flow system in the game.\n\nAnd **no**, this is not only an issue with poor rocket designs (though this is certainly often the case); it is also largely due to the way fuel is drained.\n\n\u003E \n\u003E That would be unrealistic. Try filling a plastic party cup with water, this is your fuel tank, now pierce a whole in the bottom, this is your engine. Notice the water empties from top to bottom. It would be impossible to make it empty from the bottom. It would make sense in orbit if all fuel tanks emptied equally though.\n\nNo, this would not at all be unrealistic.\n\nYou are making the assumption that fuel is contained in a single tank with the length of the entire rocket. \n\nIn KSP, the fuel is contained in multiple small tanks, and is pumped between tanks.\n\nIf such a system was used in real life, no sane person would ever start by draining the top tanks.\n\nEven if you make the argument that the many small tanks linked together in KSP should be considered to be a single large tank, liquid fuel and oxidizer are in real life contained in separate tanks at different heights in the rocket, and these two tanks would be drained proportionally.\n\nIn this case, the center of mass stays roughly in place (of course depending on the payload).\n\n**Edited \u003Ctime datetime=\u00222015-05-21T14:28:42Z\u0022 title=\u002205/21/2015 02:28  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 21, 2015\u003C/time\u003E by Chronosheep**"},{"CreatedByName":"Tex","CreatedById":75164,"CreatedDateTime":"2015-05-21T14:47:43Z","Content":"Alrighty then, fair enough points. Let\u0027s work around that then.\n\nThe others have come up with the solution to the problem anyway. The idea is to be moving slowly, gradually as you fly. Even a bottom-heavy rocket will stay stable when going straight up, or when turning extremely, extremely gradually. The idea is to keep things slow now; your designs will indeed still work if the launch profile is modified to treat the rig better. There\u0027s not really any problem other than trying to adjust to the new aerodynamics system, which, believe me, took quite a bit to get used to for me as well.\n\nIf not this as a work around, then the only thing to do is to either have a reaction control system that will keep your rocket on point by force or increasing the drag on the bottom of the rocket. Both will work unless your designs are super bottom-heavy or just heavy overall. Perhaps pictures of the rocket(s) in question so we can better diagnose how to fix it?\n\nThough it\u0027s been said on the thread multiple times, I agree it\u0027s not a game problem."},{"CreatedByName":"Chronosheep","CreatedById":135661,"CreatedDateTime":"2015-05-21T14:56:13Z","Content":"Even if you don\u0027t consider this a gameplay problem, is this a reason to be opposed to a more sensible and realistic fuel flow logic?\n\n I get the impression that my suggestion would be much better received if I never mentioned rockets flipping at all."},{"CreatedByName":"Tex","CreatedById":75164,"CreatedDateTime":"2015-05-21T15:16:48Z","Content":"Ah, but even disregarding the rocket flipping then we can talk about the real other problem.\n\nThe fuel flow logic in the game right now is perfectly good for the majority of uses. I think, though, that having a system of several small tanks, each with their own smaller LF/Ox tanks wouldn\u0027t make much sense in real life, nor really in KSP. Even considering that it would certainly be possible to drain from the bottom first in this regard, such a setup would be enormously complicated to set up the piping and things required to put in a rocket. But that\u0027s beside the point...\n\nWhat I\u0027m truly trying to say is that I don\u0027t think the problem is a big enough issue to require adressing. I don\u0027t see any problem with the fuel flow, and rather think that having planes that drain from all tanks evenly now is much better than the old system. Maybe it\u0027ll take someone with a greater attention to detail than myself, but for the average player I see no real problem at all."},{"CreatedByName":"SpaceChipmunk","CreatedById":142023,"CreatedDateTime":"2015-05-21T15:27:08Z","Content":"\u003E \n\u003E Ah, but even disregarding the rocket flipping then we can talk about the real other problem.\n\u003E The fuel flow logic in the game right now is perfectly good for the majority of uses. I think, though, that having a system of several small tanks, each with their own smaller LF/Ox tanks wouldn\u0027t make much sense in real life, nor really in KSP. Even considering that it would certainly be possible to drain from the bottom first in this regard, such a setup would be enormously complicated to set up the piping and things required to put in a rocket. But that\u0027s beside the point...\n\u003E \n\u003E What I\u0027m truly trying to say is that I don\u0027t think the problem is a big enough issue to require adressing. I don\u0027t see any problem with the fuel flow, and rather think that having planes that drain from all tanks evenly now is much better than the old system. Maybe it\u0027ll take someone with a greater attention to detail than myself, but for the average player I see no real problem at all.\n\nSo what you are saying is that the \u0022Fuel tanks that you place wouldn\u0027t actually be fuel tanks, but more like fairings that can have proportionately sized LF \u002B O tanks within?"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-05-21T15:44:23Z","Content":"Draining tanks from the top clearly is within the game rules, can already be done by manual micromanagement, and increases stability for rockets. So I\u0027d consider it a quality-of-life improvement to offer a simple interface for it. Either in stock or by a mod. Maybe it is already possible with some of the fuel balancing mods around?"},{"CreatedByName":"Tex","CreatedById":75164,"CreatedDateTime":"2015-05-21T15:48:32Z","Content":"\u003E \n\u003E So what you are saying is that the \u0022Fuel tanks that you place wouldn\u0027t actually be fuel tanks, but more like fairings that can have proportionately sized LF \u002B O tanks within?\n\nEh... I suppose. Having procedural tanks would certainly be cool! Ones that would proportionally increase the mass to the amount of fuel and oxidizer involved. That would make for some fantastic ship designs."},{"CreatedByName":"Rhomphaia","CreatedById":2440,"CreatedDateTime":"2015-05-21T16:59:19Z","Content":"The simplest fix for this issue would be to change tho order tanks are made available in the tech tree. A rocket with 2 FL-T800s works fine while one with 16 FL-T100s doesn\u0027t.\n\nFor most early carrer goals the small tanks are useless anyway, but the come into there own later, plus miniaturization is usually more difficult in reality anyway. having the FL-T400 as the initial unlock with the larger and smaller sizes being unlocked later would be better.\n\nAnother idea would be to better tweaking, so that a tank could be completely filled with fuel (90x units) **or** oxidizer (110x units), or both (45x LF, 55x OX). Rockets would be easier to balance, and we would not have to use spaceplane parts to fuel NERVs."},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2015-05-21T20:37:58Z","Content":"Yeah, dump the flipping from the title, because fuel flow is only an issue for some cases right on the edge, most are poor design. Really, a given stage (every tank below a decoupler, above an engine in KSP) will drain fuel from the lower part, and oxidizer from the upper half (or more). The fuel section is typically smaller, and masses more. CM is still going to move towards the engine for a given stage, though less than it will in the current system as there will be some oxidizer in the upper half... As the tank approaches empty, it approaches the KSP situation."}]}