{"TopicId":36461,"ForumId":55,"TopicTitle":"Barycenters and non-spherical Volumes of Influence (an idea for binary planets/stars)","CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2013-07-09T18:38:46Z","PageNum":4,"Articles":[{"CreatedByName":"asmi","CreatedById":59068,"CreatedDateTime":"2013-07-13T17:30:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022tntristan12\u0022 data-cite=\u0022tntristan12\u0022\u003E\u003Cdiv\u003EExcept for cases when sudden time acceleration sends your spacecraft out of the solar system or throws moons out of orbit. Also, orbiter doesn\u0027t simulate physics to individual parts within a ship. Sure, it works on a basic level but it is far from perfect and does not work for casual play like what KSP does.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo, from \u0022it\u0027s hard\u0022 statement you went to \u0022it\u0027s not casual\u0027? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"asmi","CreatedById":59068,"CreatedDateTime":"2013-07-13T17:41:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022chaos_forge\u0022 data-cite=\u0022chaos_forge\u0022\u003E\u003Cdiv\u003EFirst of all, can we \u003Cstrong\u003Eplease\u003C/strong\u003E stop talking about the feasibility of implementing N-body physics? The devs have said time and time again that they are \u003Cspan style=\u0022text-decoration:underline;\u0022\u003E\u003Cstrong\u003Enot\u003C/strong\u003E\u003C/span\u003E implementing N-body physics, it\u0027s on the do-not-suggest list, and I don\u0027t want this thread getting shut down. I shouldn\u0027t have gotten drawn into the argument, and I apologize for that, but can we please drop this or take it somewhere else?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis point it - proper n-body is \u003Cstrong\u003Eeasier\u003C/strong\u003E and \u003Cstrong\u003Ebetter\u003C/strong\u003E than what\u0027s being proposed here.\u003C/p\u003E\n"},{"CreatedByName":"Mr Shifty","CreatedById":68146,"CreatedDateTime":"2013-07-13T18:20:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022asmi\u0022 data-cite=\u0022asmi\u0022\u003E\u003Cdiv\u003EThis point it - proper n-body is \u003Cstrong\u003Eeasier\u003C/strong\u003E and \u003Cstrong\u003Ebetter\u003C/strong\u003E than what\u0027s being proposed here.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETrue only if by easier you mean that it would require a rewrite of the game engine from the ground up. What\u0027s being proposed here would require minor modifications to what already exists.\u003C/p\u003E\n"},{"CreatedByName":"NeilC","CreatedById":57575,"CreatedDateTime":"2013-07-13T18:27:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022chaos_forge\u0022 data-cite=\u0022chaos_forge\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI don\u0027t see much of a problem with implementing that. As long as you had your Ragnar-analogue far away enough from the barycenter that neither its orbit nor its SOI intersected the VOI\u0027s of the two stars (which is more realistic anyways) it should work fine.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe devil\u0027s in the details. Orbits in ksp are defined by a reference to orbiting body and a bunch of orbital parameters. It\u0027s a one parent- to many-child tree structure that\u0027s used the same way by all craft, moons, planets, or potential new stars. Soi changes are either down this tree when you get within a threshold distance of something else also orbiting the same parent (from kerbin to mun) or up this tree when you get further than the parent\u0027s soi (from kerbin to kerbol).\u003C/p\u003E\u003Cp\u003EThis means that while you\u0027re in the kerbin system, you\u0027re only doing SOI checks on other things orbiting kerbin and on leaving kerbin. there\u0027s no need to do soi checks on jool. It\u0027s more than one tree node away and can be safely ignored.\u003C/p\u003E\u003Cp\u003ETo implement your system requires a cross-tree transition (H alpha to H beta, directly) which is potentially problematic. You\u0027d need to consider two \u0022tree hops\u0022, from H alpha to barycenter to H beta. Same as kerbin to kerbol to jool, which we don\u0027t want to consider.\u003C/p\u003E\u003Cp\u003Ethere\u0027s also no difference between Ragnar and the two stars in the tree structure - they both orbit the barycenter. How do you single out the stars for special treatment?\u003C/p\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2013-07-13T18:57:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022asmi\u0022 data-cite=\u0022asmi\u0022\u003E\u003Cdiv\u003ESo, from \u0022it\u0027s hard\u0022 statement you went to \u0022it\u0027s not casual\u0027? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s not hard. It\u0027s impossible. You cannot reconcile n body physics with on rails simulating. There is no analytical solution for n body physics that allows you to predict where the craft will be.\u003C/p\u003E\u003Cp\u003ENumerical simulations are far too unstable to be used reliably at high time accelerations for extended periods of time. You want to see this in action? Load up orbiter and get into LEO, then wratchet up time acceleration to max. Good things do not happen. That\u0027s fine for orbiter which relies on its users to behave sensibly and not push things to the limit, but KSP is a game... Not a simulation. It needs to be solid, accessable, and fast. Orbiter doesn\u0027t. That\u0027s what I meant.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-13T19:31:50Z\u0022 title=\u002207/13/2013 07:31  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 13, 2013\u003C/time\u003E by tntristan12\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2013-07-13T20:10:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022asmi\u0022 data-cite=\u0022asmi\u0022\u003E\u003Cdiv\u003EThis point it - proper n-body is \u003Cstrong\u003Eeasier\u003C/strong\u003E and \u003Cstrong\u003Ebetter\u003C/strong\u003E than what\u0027s being proposed here.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo, the point is, the devs have said that N-body is \u003Cstrong\u003Enever\u003C/strong\u003E \u003Cspan style=\u0022text-decoration:underline;\u0022\u003E\u003Cstrong\u003Eever\u003C/strong\u003E\u003C/span\u003E getting implemented, so whether its better or not is irrelevant. To continue arguing about N-body will at best derail the intelligent, reasonable, and fruitful discussion that we are having, and at worst get this thread shut down for violation of the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/36863-What-not-to-suggest\u0022 rel=\u0022external nofollow\u0022\u003Edo-not-suggest list\u003C/a\u003E. If you think my idea sucks, say so, but don\u0027t bring up N-body.\u003C/p\u003E\u003Cp\u003ETo everyone else, all I ask is that you ignore any posts relating to implementing full N-body. Don\u0027t feed the troll(s).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeilC\u0022 data-cite=\u0022NeilC\u0022\u003E\u003Cdiv\u003EThe devil\u0027s in the details. Orbits in ksp are defined by a reference to orbiting body and a bunch of orbital parameters. It\u0027s a one parent- to many-child tree structure that\u0027s used the same way by all craft, moons, planets, or potential new stars. Soi changes are either down this tree when you get within a threshold distance of something else also orbiting the same parent (from kerbin to mun) or up this tree when you get further than the parent\u0027s soi (from kerbin to kerbol).\u003Cp\u003EThis means that while you\u0027re in the kerbin system, you\u0027re only doing SOI checks on other things orbiting kerbin and on leaving kerbin. there\u0027s no need to do soi checks on jool. It\u0027s more than one tree node away and can be safely ignored.\u003C/p\u003E\u003Cp\u003ETo implement your system requires a cross-tree transition (H alpha to H beta, directly) which is potentially problematic. You\u0027d need to consider two \u0022tree hops\u0022, from H alpha to barycenter to H beta. Same as kerbin to kerbol to jool, which we don\u0027t want to consider.\u003C/p\u003E\u003Cp\u003Ethere\u0027s also no difference between Ragnar and the two stars in the tree structure - they both orbit the barycenter. How do you single out the stars for special treatment? \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, I see what you\u0027re saying there. I actually hadn\u0027t considered that, but I wonder if it would be possible to have some sort of infinitesimal separation between the H alpha and H beta VOI\u0027s, so a ship would still *technically* pass though the barycenter SOI when transitioning. Another possibility would be to implement the barycenter as a special object with two required children that have the special logic applied to them, and then could have zero or more optional normally-behaved children. The problem with that, of course, is that it would require more modifications to the code.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-13T20:22:44Z\u0022 title=\u002207/13/2013 08:22  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 13, 2013\u003C/time\u003E by chaos_forge\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2013-07-13T21:59:50Z","Content":"\n\u003Cp\u003EHey chaos_forge. Have you gotten any data for how your hemiSOI approximation would work for non-identical masses?\u003C/p\u003E\n"},{"CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2013-07-13T23:36:20Z","Content":"\n\u003Cp\u003EYeah, sorry it took me so long xD But finally after the long wait, I come bearing joyous news from the land of mathematica!\u003C/p\u003E\u003Cp\u003EFirstly, I\u0027ve determined that, for cases where the smaller mass is 1/4th or less of the larger mass, the barycenter system in its original, simpler-to-implement incarnation is good enough: (first graph=force field, second graph=error)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter5.jpg\u0022 alt=\u0022mathematica_barycenter5.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter_error5.jpg\u0022 alt=\u0022mathematica_barycenter_error5.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EBasically, my criterion for calling \u0022good enough\u0022 is whether the error you get is comparable to the error you get using KSP\u0027s current system:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter6.jpg\u0022 alt=\u0022mathematica_barycenter6.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter_error6.jpg\u0022 alt=\u0022mathematica_barycenter_error6.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd finally, the HemiSOI\u0027s in this case would look like this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter7.jpg\u0022 alt=\u0022mathematica_barycenter7.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter_error7.jpg\u0022 alt=\u0022mathematica_barycenter_error7.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt was a bit complicated because to find the location of L1 and L2, you have to solve a quintic equation, but mathematica didn\u0027t seem to have any problems with it, so as long as the SOI\u0027s are pre-calculated and put in a config file by the devs, there shouldn\u0027t be a problem. I\u0027ve also finally gotten the mathematica notebook in a easy to use state, so if anybody wants to see the graphs run through with different numbers, or even the code itself, just let me know.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-14T01:09:11Z\u0022 title=\u002207/14/2013 01:09  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 14, 2013\u003C/time\u003E by chaos_forge\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fel","CreatedById":57121,"CreatedDateTime":"2013-07-14T17:27:41Z","Content":"\n\u003Cp\u003E*sighs about the 3d graphs* (Just that you can barely see anything with things like \u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter_error5.jpg\u0022)\u003C/p\u003E\u003Cp\u003EMy own tests show something interesting with regards to the hemisphere errors....\u003C/p\u003E\u003Cp\u003ETry doing vector analysis and seeing how the directional currents change based on the hemisphere model and the original model:\u003C/p\u003E\u003Cp\u003EWhat I found was that there is an extremely small area when two bodies actually matter and most tend to go to the \u0022gravitational center\u0022, in turn... the hemisphere model actually had GREATER error, direction wise.\u003C/p\u003E\u003Cp\u003E@NeilC\u003C/p\u003E\u003Cp\u003EYou\u0027re intentionally over-complicating this in a self-serving argument to deny implementing it. It is annoying.\u003C/p\u003E\u003Cp\u003EThe proposal is for binary systems that can be expanded upon via additional barycenter objects. He is not reshaping the kerbin universe, he\u0027s just adding in new \u0022planetary objects.\u0022\u003C/p\u003E\u003Cp\u003E*And seriously, I just repeated your argument back at you with Frostkein... that you refuse to understand how development works is your issue and does NOT change the subjectivity of your argument.\u003C/p\u003E\u003Cp\u003E(And actually, you\u0027re subjectively applying this so called \u0022Godwin\u0027s law\u0022 to KSP, hence are subjectively invalidating an argument on subjectivity!)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-15T00:04:24Z\u0022 title=\u002207/15/2013 12:04  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 15, 2013\u003C/time\u003E by Fel\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2013-07-15T21:36:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Fel\u0022 data-cite=\u0022Fel\u0022\u003E\u003Cdiv\u003E*sighs about the 3d graphs* (Just that you can barely see anything with things like \u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter_error5.jpg\u0022)\u003Cp\u003EMy own tests show something interesting with regards to the hemisphere errors....\u003C/p\u003E\u003Cp\u003ETry doing vector analysis and seeing how the directional currents change based on the hemisphere model and the original model:\u003C/p\u003E\u003Cp\u003EWhat I found was that there is an extremely small area when two bodies actually matter and most tend to go to the \u0022gravitational center\u0022, in turn... the hemisphere model actually had GREATER error, direction wise.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell the vector field of what I posted would just be the gradient of the function, so that\u0027s relatively easy to visualize . . . but let me get back to you on that once I figure out how to make vector graphs.\u003C/p\u003E\u003Cp\u003EThe problem with this is that we\u0027re trying to optimize two things at the same time: the magnitude and the direction of the force. So far I\u0027ve been considering the error in magnitude as more important than the error in direction. The problem with the original idea was that in many cases the error in the magnitude of the force would be far too large (approaching infinity).\u003C/p\u003E\u003Cp\u003EThe way I see it there are basically three possibilities:\u003C/p\u003E\u003Cp\u003E1) Implement the original SOI model. Problem: only works when m1/m2 \u0026gt; 4 (where m1 is the larger mass)\u003C/p\u003E\u003Cp\u003E2) Implement the HemiSOI model. Problem: has greater directional error.\u003C/p\u003E\u003Cp\u003E3) Set up a system to switch between the two models depending on m1/m2 ratio. Problem: overly complicated to implement.\u003C/p\u003E\u003Cp\u003EIn my opinion, option #2 is the best.\u003C/p\u003E\u003Cp\u003EEDIT: Also, since most tend to go towards the gravitational center, that\u0027s why we have the outer barycenter region. Keep in mind that the VOI\u0027s of the two planets are small in comparison with the size of the overall SOI of the barycenter.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-15T21:45:50Z\u0022 title=\u002207/15/2013 09:45  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 15, 2013\u003C/time\u003E by chaos_forge\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Horn Brain","CreatedById":49626,"CreatedDateTime":"2013-07-16T18:10:56Z","Content":"\n\u003Cp\u003EI have a way to improve the hemispherical model which is quite simple (one if statement) and which actually generalizes the selection of VoI boundaries over the whole range of mass ratios between the two objects.\u003C/p\u003E\u003Cp\u003ESimply use the following rule when in the \u0022inner region\u0022 to determine which VoI you are in:\u003C/p\u003E\u003Cp\u003ELet 1 denote a quantity pertaining to the more massive body, 2 to the lower.\u003C/p\u003E\u003Cp\u003Er is distance from spacecraft to a body (r1 or r2).\u003C/p\u003E\u003Cp\u003Em is mass of a body.\u003C/p\u003E\u003Cp\u003EThe craft is in the VoI of the body with the greater quantity m^2/r^5.\u003C/p\u003E\u003Cp\u003ESo the rule would be: if m1^2/r1^5 \u0026gt; m2^2/r2^5, then the craft is in the VoI of body 1, otherwise it is in the VoI of body 2.\u003C/p\u003E\u003Cp\u003EThe form of the rule comes from the definition of SoI radius used by KSP currently: R_SOI = a (m/M)^(2/5), where R_SOI is the SoI radius, a is the semi-major axis of the secondary around the primary, m is the small mass and M is the large. If you plug in some values, you can see that for the case of m1=m2 (or m=M, equivalently), then the rule I give reduces to choosing the closer of the two bodies, and the boundary between their VoI\u0027s would be the plane equidistant between them. If you use very large mass ratios, then the SoI is a sphere centered around the secondary body with radius R_SOI. This means that in the limit of very different masses (think a planet and a star), the rule behaves the same way it currently does in KSP! The variation is smooth between the two cases (it looks like the plane curves away from the primary and translates towards the secondary until it is a small sphere completely enclosed within the \u0022inner region\u0022). I\u0027m at work, but I can do some figures later.\u003C/p\u003E\u003Cp\u003EThe problem is that since this relies on the distance to the two bodies, it would only work for circular orbits, otherwise the VoI boundaries would move as the distance between the bodies changed. This could be fixed by using the average position (based on the sum of the semi-major axes of the two bodies\u0027 orbits) of each body instead of its current position (at least for low eccentricity orbits, like Ike and Duna).\u003C/p\u003E\u003Cp\u003ETell me what you think. I think this rule makes the hemispherical model the natural extension of the current system. Further, if you choose the \u0022inner region\u0022 radius correctly, you could have craft in orbits that approximate L2 and L3 orbits for some binary planets with very similar masses.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-17T05:33:41Z\u0022 title=\u002207/17/2013 05:33  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 17, 2013\u003C/time\u003E by Horn Brain\u003C/strong\u003E\n\u003Cbr\u003Eclarified point about potential L2 and L3 orbits, corrected error in rule\n\u003C/span\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2013-07-16T20:08:50Z","Content":"\n\u003Cp\u003EThat sounds really good! It\u0027d be nice if you could come up with some plots like the one Chaos Forge came up with so the more visual among us can see it.\u003C/p\u003E\n"},{"CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2013-07-16T21:13:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Horn Brain\u0022 data-cite=\u0022Horn Brain\u0022\u003E\u003Cdiv\u003EI have a way to improve the hemispherical model which is quite simple (one if statement) and which actually generalizes the selection of VoI boundaries over the whole range of mass ratios between the two objects.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI agree with tntristan12 that it\u0027s rather hard to visualize, but I think I can understand what you\u0027re trying to say. I\u0027d be interested to know how much that if statement differs from my arbitrary choosing of the boundary to be at L1.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003ER_SOI = a (m/M)^(2/5), where R_SOI is the SoI radius, a is the semi-major axis of the secondary around the primary, m is the small mass and M is the large\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027d be interested in seeing how they got this formula. So far, I was using the radius of each body\u0027s \u003Ca href=\u0022https://en.wikipedia.org/wiki/Hill_sphere\u0022 rel=\u0022external nofollow\u0022\u003Ehill sphere\u003C/a\u003E, which gives you an SOI formula of R_SOI = a*(m2 / 3m1)^(1/3)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EIf you plug in some values, you can see that for the case of m1=m2 (or m=M, equivalently), then the rule I give reduces to choosing the closer of the two bodies, and the boundary between their VoI\u0027s would be the plane equidistant between them. If you use very large mass ratios, then the SoI is a sphere centered around the secondary body with radius R_SOI. This means that in the limit of very different masses (think a planet and a star), the rule behaves the same way it currently does in KSP! The variation is smooth between the two cases (it looks like the plane curves away from the primary and translates towards the secondary until it is a small sphere completely enclosed within the \u0022inner region\u0022).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf the SOI\u0027s approach KSP\u0027s current method as m1/m2 approaches infinity, how would you decide where the inner region stops and the outer region begins?\u003C/p\u003E\n"},{"CreatedByName":"Horn Brain","CreatedById":49626,"CreatedDateTime":"2013-07-16T23:07:43Z","Content":"\n\u003Cp\u003EThese figures should help. Sorry I didn\u0027t have time before.\u003C/p\u003E\u003Cp\u003EThe Red area is the VoI of the large body (large cyan dot on the right).\u003C/p\u003E\u003Cp\u003EThe Blue area is the VoI of the small body (smaller red dot on the left).\u003C/p\u003E\u003Cp\u003EThe location of inner/outer boundary (outer region is the green) is arbitrarily chosen to be about 40% further from the secondary body than the L2 point. This is just what I picked. It turns out that matching the SoI currently used by KSP in the infinite mass ratio limit will always mean swallowing the L points, unfortunately. Choosing the L2 point to be on the boundary means that the VoI of the secondary does not become an island (it does not avoid the inner/outer boundary) until very high mass ratios (Kerbin/Mun wouldn\u0027t do it, and I think Duna/Ike is the only system where you might want to consider using this new model).\u003C/p\u003E\u003Cp\u003EHopefully this helps you guys visualize what\u0027s going on.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/DoPqQ\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"tntristan12","CreatedById":7005,"CreatedDateTime":"2013-07-16T23:26:20Z","Content":"\n\u003Cp\u003EYeah that\u0027s more or less what I pictured. Looks like there is something there, but I\u0027d really like to see an error diagram like the ones CF makes. I wonder if he could work on that. If it\u0027s good enough I wonder if a mod could be made, or even a separate program demonstrating it\u0027s viability.\u003C/p\u003E\u003Cp\u003EAnother question for you Horn: under your model how would the objects orbit? Would there need to be a separate barycenter object like what was suggested in the OP? Would it\u0027s VoI extend out beyond the VoIs of the individual planets? Or would they just orbit around the center of the whole sphere?\u003C/p\u003E\u003Cp\u003EAlso, how would this work with more than one body (such as Minmus or the Jool system)? Would there be a larger SOI outside that one which could contain other moons or planets, or would you nest this setup you have inside another one just like it, potentially simulating 3 and 4 body systems?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-16T23:35:13Z\u0022 title=\u002207/16/2013 11:35  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 16, 2013\u003C/time\u003E by tntristan12\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2013-07-17T02:50:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Horn Brain\u0022 data-cite=\u0022Horn Brain\u0022\u003E\u003Cdiv\u003EThese figures should help. Sorry I didn\u0027t have time before.\u003Cp\u003EThe Red area is the VoI of the large body (large cyan dot on the right).\u003C/p\u003E\u003Cp\u003EThe Blue area is the VoI of the small body (smaller red dot on the left).\u003C/p\u003E\u003Cp\u003EThe location of inner/outer boundary (outer region is the green) is arbitrarily chosen to be about 40% further from the secondary body than the L2 point. This is just what I picked. It turns out that matching the SoI currently used by KSP in the infinite mass ratio limit will always mean swallowing the L points, unfortunately. Choosing the L2 point to be on the boundary means that the VoI of the secondary does not become an island (it does not avoid the inner/outer boundary) until very high mass ratios (Kerbin/Mun wouldn\u0027t do it, and I think Duna/Ike is the only system where you might want to consider using this new model).\u003C/p\u003E\u003Cp\u003EHopefully this helps you guys visualize what\u0027s going on.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI just tried to do a quick-and-dirty implementation of the VOI system you showed to get some estimates on error, but I can\u0027t seem to get the same shapes you\u0027re getting. Exactly what limiting conditions (if statement) are you using?\u003C/p\u003E\u003Cp\u003EAlso: where did you get the formula for KSP\u0027s system from?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-17T03:10:31Z\u0022 title=\u002207/17/2013 03:10  AM\u0022 data-short=\u002210 yr\u0022\u003EJuly 17, 2013\u003C/time\u003E by chaos_forge\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Horn Brain","CreatedById":49626,"CreatedDateTime":"2013-07-17T05:33:10Z","Content":"\n\u003Cp\u003EI got the formula from here: \u003Ca href=\u0022https://en.wikipedia.org/wiki/Sphere_of_influence_(astrodynamics)\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://en.wikipedia.org/wiki/Sphere_of_influence_(astrodynamics)\u003C/a\u003E If you do the math it matches with the SoI\u0027s of the various bodies in KSP perfectly.\u003C/p\u003E\u003Cp\u003EMy limiting rule is NOT what I gave in the post (I\u0027ve corrected it now, but r and m were switched, my mistake). It\u0027s easiest to use it in this form: the boundary is given by r1/r2 = (m1/m2)^(2/5), where rX is the distance to body X and mX is the mass of body X. My apologies.\u003C/p\u003E\n"},{"CreatedByName":"Horn Brain","CreatedById":49626,"CreatedDateTime":"2013-07-17T05:35:33Z","Content":"\n\u003Cp\u003EI don\u0027t think my rule (or any reasonable rule) is going to work for more than two bodies of similar masses in a system. You could have other (smaller) bodies in the outer region orbiting the barycenter, or you could have smaller bodies orbiting close to one or the other of the two large bodies.\u003C/p\u003E\n"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2013-07-17T10:22:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Horn Brain\u0022 data-cite=\u0022Horn Brain\u0022\u003E\u003Cdiv\u003EI don\u0027t think my rule (or any reasonable rule) is going to work for more than two bodies of similar masses in a system. You could have other (smaller) bodies in the outer region orbiting the barycenter, or you could have smaller bodies orbiting close to one or the other of the two large bodies.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes. That\u0027s the point.\u003C/p\u003E\u003Cp\u003EI like Brain\u0027s idea a lot more infact I was going to suggest something like that. It looks like it should reduce the huge error in the corners of the smaller VOI.\u003C/p\u003E\n"},{"CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2013-07-17T13:46:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Horn Brain\u0022 data-cite=\u0022Horn Brain\u0022\u003E\u003Cdiv\u003EI got the formula from here: \u003Ca href=\u0022https://en.wikipedia.org/wiki/Sphere_...astrodynamics\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://en.wikipedia.org/wiki/Sphere_...astrodynamics\u003C/a\u003E) If you do the math it matches with the SoI\u0027s of the various bodies in KSP perfectly.\u003Cp\u003EMy limiting rule is NOT what I gave in the post (I\u0027ve corrected it now, but r and m were switched, my mistake). It\u0027s easiest to use it in this form: the boundary is given by r1/r2 = (m1/m2)^(2/5), where rX is the distance to body X and mX is the mass of body X. My apologies. \u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECool, I\u0027ll try to get some error graphs working ASAP.\u003C/p\u003E\u003Cp\u003EBut now I\u0027m wondering what the difference between an SOI and a Hill Sphere is xD.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Cpt. Kipard\u0022 data-cite=\u0022Cpt. Kipard\u0022\u003E\u003Cdiv\u003EI like Brain\u0027s idea a lot more infact I was going to suggest something like that. It looks like it should reduce the huge error in the corners of the smaller VOI. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYeah, I agree, this seems like a much better system. Also the fact that it reduces to the hemisphere system when the masses are equal makes a lot of sense.\u003C/p\u003E\u003Cp\u003EEDIT: here is a quick plot and % error plot made using the corrected formula and the same mass ratio (4) as with the other plots I posted before\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter8.jpg\u0022 alt=\u0022mathematica_barycenter8.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.alemor.org/~mario/uploads/mathematica_barycenter_error8.jpg\u0022 alt=\u0022mathematica_barycenter_error8.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-17T14:00:24Z\u0022 title=\u002207/17/2013 02:00  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 17, 2013\u003C/time\u003E by chaos_forge\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Person012345","CreatedById":33728,"CreatedDateTime":"2013-07-17T14:17:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NeilC\u0022 data-cite=\u0022NeilC\u0022\u003E\u003Cdiv\u003EUniverse sandbox is another example of a numeric n-body code that works just fine. The problem isn\u0027t technical feasibility or implementation difficulty, it\u0027s performance as n gets large. Ksp devs have taken n body off the table for performance reasons, not because it\u0027s hard to do.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUbox has some horrific simulation problems at high time warp.\u003C/p\u003E\u003Cp\u003EI like the ideas in this thread. I think the devs should definitely consider this as an alternative to n-body physics (since we know those won\u0027t be in).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-17T14:26:35Z\u0022 title=\u002207/17/2013 02:26  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 17, 2013\u003C/time\u003E by Person012345\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MalfunctionM1Ke","CreatedById":71626,"CreatedDateTime":"2013-07-17T15:29:39Z","Content":"\n\u003Cp\u003ETheory is nice, but i dont know how Squad could implement this into the game plus to keep it simple enough for the \u0022normal users\u0022.\u003C/p\u003E\n"},{"CreatedByName":"chaos_forge","CreatedById":64960,"CreatedDateTime":"2013-07-17T16:29:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MalfunctionM1Ke\u0022 data-cite=\u0022MalfunctionM1Ke\u0022\u003E\u003Cdiv\u003ETheory is nice, but i dont know how Squad could implement this into the game plus to keep it simple enough for the \u0022normal users\u0022.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow so? All of this math is in the background, all the player would see is that his ship changes VOI\u0027s at certain points.\u003C/p\u003E\n"},{"CreatedByName":"Horn Brain","CreatedById":49626,"CreatedDateTime":"2013-07-17T17:31:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022chaos_forge\u0022 data-cite=\u0022chaos_forge\u0022\u003E\u003Cdiv\u003EHow so? All of this math is in the background, all the player would see is that his ship changes VOI\u0027s at certain points.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAdditionally, it should be noted that none of this changes anything for any of the planets in the game (except possibly Duna and Ike, if you wanted). It will all still work exactly the same except when the player enters a binary planet system, which presumably would mean they knew what they were getting into.\u003C/p\u003E\u003Cp\u003ETo be clear: You would use the current system (primary-dominant) for all systems with mass ratios above a certain value, say 15, or 50. You would only turn on this barycenter system for planetary systems like Pluto/Charon (MR= 8.12) or some exotic double moon that the devs wanted to put in orbit around one of the new gas giants.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-17T17:41:02Z\u0022 title=\u002207/17/2013 05:41  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 17, 2013\u003C/time\u003E by Horn Brain\u003C/strong\u003E\n\u003Cbr\u003Eadded clarification\n\u003C/span\u003E\n"},{"CreatedByName":"Horn Brain","CreatedById":49626,"CreatedDateTime":"2013-07-17T17:43:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022chaos_forge\u0022 data-cite=\u0022chaos_forge\u0022\u003E\u003Cdiv\u003ECool, I\u0027ll try to get some error graphs working ASAP.\u003Cp\u003EBut now I\u0027m wondering what the difference between an SOI and a Hill Sphere is xD.\u003C/p\u003E\u003Cp\u003EYeah, I agree, this seems like a much better system. Also the fact that it reduces to the hemisphere system when the masses are equal makes a lot of sense.\u003C/p\u003E\u003Cp\u003EEDIT: here is a quick plot and % error plot made using the corrected formula and the same mass ratio (4) as with the other plots I posted before\u003C/p\u003E\u003Cp\u003E--snip--\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHard to see what the actual peak error is. Could you plot all of these as 2d contour plots with a colorbar so we can see the magnitudes more clearly? If not, maybe just upload profile views of each so we can see the peak values.\u003C/p\u003E\n"}]}