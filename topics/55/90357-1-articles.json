{"TopicId":90357,"ForumId":55,"TopicTitle":"Orbital height and impact on surface rendering","CreatedByName":"lajoswinkler","CreatedById":79159,"CreatedDateTime":"2014-11-15T14:51:21Z","PageNum":1,"Articles":[{"CreatedByName":"lajoswinkler","CreatedById":79159,"CreatedDateTime":"2014-11-15T14:51:21Z","Content":"\n\u003Cp\u003EFor Kerbin, it\u0027s 160 km. If you go below, surface features start to render, dropping the framerate considerably on non-beefy computers. That\u0027s why it\u0027s good to place larger orbital stations above that height.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EWhat about other bodies?\u003C/strong\u003E Also, are there only two modes for surface rendering? On and off, or more? If more, let\u0027s use the minimal height for total lack of surface rendering.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EGather the data and I\u0027ll put it here.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EKerbol\u003C/p\u003E\u003Cp\u003EMoho\u003C/p\u003E\u003Cp\u003EEve 130 km\u003C/p\u003E\u003Cp\u003EGilly\u003C/p\u003E\u003Cp\u003EKerbin 160 km\u003C/p\u003E\u003Cp\u003EMun\u003C/p\u003E\u003Cp\u003EMinmus\u003C/p\u003E\u003Cp\u003EDuna\u003C/p\u003E\u003Cp\u003EIke\u003C/p\u003E\u003Cp\u003EDres\u003C/p\u003E\u003Cp\u003EJool\u003C/p\u003E\u003Cp\u003ELaythe 160 km\u003C/p\u003E\u003Cp\u003EVall\u003C/p\u003E\u003Cp\u003ETylo\u003C/p\u003E\u003Cp\u003EBop\u003C/p\u003E\u003Cp\u003EPol\u003C/p\u003E\u003Cp\u003EEeloo\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-04T03:50:33Z\u0022 title=\u002201/04/2015 03:50  AM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 4, 2015\u003C/time\u003E by lajoswinkler\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lajoswinkler","CreatedById":79159,"CreatedDateTime":"2014-11-15T19:26:25Z","Content":"\n\u003Cp\u003ENobody? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif\u0022 alt=\u0022:rolleyes:\u0022\u003E\u003C/p\u003E\u003Cp\u003EI think it\u0027s 130 km for Eve.\u003C/p\u003E\n"},{"CreatedByName":"Lunaran","CreatedById":69822,"CreatedDateTime":"2014-11-15T19:35:40Z","Content":"\n\u003Cp\u003EI\u0027ve noticed this too.\u003C/p\u003E\u003Cp\u003EWhat makes rendering so slow at certain altitudes is that it doesn\u0027t just cut off, it crossfades by altitude. This is a workable solution if you\u0027re passing through the crossfade zone quickly, but if you\u0027re in a circular orbit right in the middle of it your machine is always drawing both the planetary terrain quads and the scaled-space dummy planet, alpha blended together, which is worse than just drawing one or the other.\u003C/p\u003E\u003Cp\u003EI\u0027ve started launching to only 75km and putting stations at 250km just to stay out of that zone, because it turns my laptop into a hibachi. 100-200km is for RemoteTech satellites I\u0027ll never have to switch back to.\u003C/p\u003E\n"},{"CreatedByName":"lajoswinkler","CreatedById":79159,"CreatedDateTime":"2014-11-15T20:12:42Z","Content":"\n\u003Cp\u003EThere might be steps, yeah, but there\u0027s an abrupt change at 160 km for Kerbin. Below that we might have steps. I\u0027m interested in zero rendering which maximizes the station part count I can use.\u003C/p\u003E\n"},{"CreatedByName":"Highlad","CreatedById":64590,"CreatedDateTime":"2014-11-15T22:04:38Z","Content":"\n\u003Cp\u003EPerhaps its something to do with water rendering? I know there was the whole water lag thing a few versions ago.\u003C/p\u003E\n"},{"CreatedByName":"lajoswinkler","CreatedById":79159,"CreatedDateTime":"2015-01-04T03:51:04Z","Content":"\n\u003Cp\u003ELaythe changes the rendering mode at 160 km so I\u0027ve added that into the list.\u003C/p\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2015-01-05T02:48:58Z","Content":"\n\u003Cp\u003EOh cool. I had always thought it was 300km or something ridiculous for Kerbin. If it\u0027s really only 160 then I guess it\u0027s time to move my station before I start adding a bunch of junk to it.\u003C/p\u003E\u003Cp\u003EThanx~!\u003C/p\u003E\n"},{"CreatedByName":"HarvesteR","CreatedById":4,"CreatedDateTime":"2015-01-05T17:13:42Z","Content":"\n\u003Cp\u003EThe scaled-space version of a planet (aka, the far-away version of it) is always rendered. In fact, the atmosphere is only present in scaled space, so even at the surface, the scaled-space version is active. Being just a static mesh, it\u0027s got minimal overhead to it. \u003C/p\u003E\u003Cp\u003EThe noticeable increase in performance is indeed very likely the PQS (Procedural Quadtree Sphere) surface being turned off after completely fading out of view. The crossfading is quite necessary for the transition to not look terrible, but once fully faded out, the terrain turns itself off and stops updating. This definitely would help increase performance quite a bit, especially if you\u0027re already running on the low end of framerate, so good tip there. If you plan to build big, build it at a high(er) orbit.\u003C/p\u003E\u003Cp\u003ECheers\u003C/p\u003E\n"},{"CreatedByName":"LethalDose","CreatedById":92657,"CreatedDateTime":"2015-01-05T18:45:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022HarvesteR\u0022 data-cite=\u0022HarvesteR\u0022\u003E\u003Cdiv\u003EThe scaled-space version of a planet (aka, the far-away version of it) is always rendered. In fact, the atmosphere is only present in scaled space, so even at the surface, the scaled-space version is active. Being just a static mesh, it\u0027s got minimal overhead to it. \u003Cp\u003EThe noticeable increase in performance is indeed very likely the PQS (Procedural Quadtree Sphere) surface being turned off after completely fading out of view. The crossfading is quite necessary for the transition to not look terrible, but once fully faded out, the terrain turns itself off and stops updating. This definitely would help increase performance quite a bit, especially if you\u0027re already running on the low end of framerate, so good tip there. If you plan to build big, build it at a high(er) orbit.\u003C/p\u003E\u003Cp\u003ECheers\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECool. Any idea at what altitude(s) the \u0022noticeable increase in performance\u0022 starts?\u003C/p\u003E\n"},{"CreatedByName":"SkyRex94","CreatedById":114868,"CreatedDateTime":"2015-01-05T22:07:36Z","Content":"\n\u003Cp\u003Eare these distances hard-coded values? So if i\u0027m playing with 3.2x RSS or 5xRSS is the height where PQS stops still 160km for Kerbin?\u003C/p\u003E\n"},{"CreatedByName":"Magion","CreatedById":97022,"CreatedDateTime":"2015-01-12T14:41:35Z","Content":"\n\u003Cp\u003EPQS fading is probably controlled by class ScaledSpaceFader, whose fields are public, so anyone can change them. But when dumped these values I got strange results - for Kerbin fadeStart=55000 and fadeEnd=60000. You report, that the lag stops at cca. 160km, so that\u0027s weird.\u003C/p\u003E\u003Cp\u003EI also found PQSMod_CelestialBodyTransform, which has similar fields with more sensible values. fadeStart=60000, fadeEnd=120000.\u003C/p\u003E\u003Cp\u003ESo here\u0027re all the values from ScaledSpaceFader class:\u003C/p\u003E\u003Cp\u003E[table=width: 330, class: grid, align: left]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]CelestialBody[/td]\u003C/p\u003E\u003Cp\u003E [td]fadeStart[/td]\u003C/p\u003E\u003Cp\u003E [td]fadeEnd[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Kerbol[/td]\u003C/p\u003E\u003Cp\u003E [td]N/A[/td]\u003C/p\u003E\u003Cp\u003E [td]N/A[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Moho[/td]\u003C/p\u003E\u003Cp\u003E [td]95000[/td]\u003C/p\u003E\u003Cp\u003E [td]100000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Eve[/td]\u003C/p\u003E\u003Cp\u003E [td]105000[/td]\u003C/p\u003E\u003Cp\u003E [td]110000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Gilly[/td]\u003C/p\u003E\u003Cp\u003E [td]135000[/td]\u003C/p\u003E\u003Cp\u003E [td]140000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Kerbin[/td]\u003C/p\u003E\u003Cp\u003E [td]55000[/td]\u003C/p\u003E\u003Cp\u003E [td]60000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Mun[/td]\u003C/p\u003E\u003Cp\u003E [td]55000[/td]\u003C/p\u003E\u003Cp\u003E [td]60000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Minmus[/td]\u003C/p\u003E\u003Cp\u003E [td]135000[/td]\u003C/p\u003E\u003Cp\u003E [td]140000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Duna[/td]\u003C/p\u003E\u003Cp\u003E [td]95000[/td]\u003C/p\u003E\u003Cp\u003E [td]97000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Ike[/td]\u003C/p\u003E\u003Cp\u003E [td]135000[/td]\u003C/p\u003E\u003Cp\u003E [td]140000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Dres[/td]\u003C/p\u003E\u003Cp\u003E [td]95000[/td]\u003C/p\u003E\u003Cp\u003E [td]100000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Jool (why not null??)[/td]\u003C/p\u003E\u003Cp\u003E [td]29000[/td]\u003C/p\u003E\u003Cp\u003E [td]30000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Laythe[/td]\u003C/p\u003E\u003Cp\u003E [td]55000[/td]\u003C/p\u003E\u003Cp\u003E [td]60000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Vall[/td]\u003C/p\u003E\u003Cp\u003E [td]295000[/td]\u003C/p\u003E\u003Cp\u003E [td]300000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Tylo[/td]\u003C/p\u003E\u003Cp\u003E [td]95000[/td]\u003C/p\u003E\u003Cp\u003E [td]100000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Bop[/td]\u003C/p\u003E\u003Cp\u003E [td]135000[/td]\u003C/p\u003E\u003Cp\u003E [td]140000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Pol[/td]\u003C/p\u003E\u003Cp\u003E [td]130000[/td]\u003C/p\u003E\u003Cp\u003E [td]135000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Eeloo[/td]\u003C/p\u003E\u003Cp\u003E [td]95000[/td]\u003C/p\u003E\u003Cp\u003E [td]100000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[/table]\u003C/p\u003E\u003Cp\u003EValues from PQSMod_CelestialBodyTransform:\u003C/p\u003E\u003Cp\u003E[table=width: 330, class: grid, align: left]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]CelestialBody[/td]\u003C/p\u003E\u003Cp\u003E [td]fadeStart[/td]\u003C/p\u003E\u003Cp\u003E [td]fadeEnd[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Kerbol[/td]\u003C/p\u003E\u003Cp\u003E [td]N/A[/td]\u003C/p\u003E\u003Cp\u003E [td]N/A[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Moho[/td]\u003C/p\u003E\u003Cp\u003E [td]100000[/td]\u003C/p\u003E\u003Cp\u003E [td]110000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Eve[/td]\u003C/p\u003E\u003Cp\u003E [td]110000[/td]\u003C/p\u003E\u003Cp\u003E [td]115000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Gilly[/td]\u003C/p\u003E\u003Cp\u003E [td]140000[/td]\u003C/p\u003E\u003Cp\u003E [td]145000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Kerbin[/td]\u003C/p\u003E\u003Cp\u003E [td]60000[/td]\u003C/p\u003E\u003Cp\u003E [td]120000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Mun[/td]\u003C/p\u003E\u003Cp\u003E [td]60000[/td]\u003C/p\u003E\u003Cp\u003E [td]120000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Minmus[/td]\u003C/p\u003E\u003Cp\u003E [td]140000[/td]\u003C/p\u003E\u003Cp\u003E [td]145000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Duna[/td]\u003C/p\u003E\u003Cp\u003E [td]100000[/td]\u003C/p\u003E\u003Cp\u003E [td]110000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Ike[/td]\u003C/p\u003E\u003Cp\u003E [td]140000[/td]\u003C/p\u003E\u003Cp\u003E [td]145000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Dres[/td]\u003C/p\u003E\u003Cp\u003E [td]100000[/td]\u003C/p\u003E\u003Cp\u003E [td]110000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Jool[/td]\u003C/p\u003E\u003Cp\u003E [td]N/A[/td]\u003C/p\u003E\u003Cp\u003E [td]N/A[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Laythe[/td]\u003C/p\u003E\u003Cp\u003E [td]60000[/td]\u003C/p\u003E\u003Cp\u003E [td]120000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Vall[/td]\u003C/p\u003E\u003Cp\u003E [td]300000[/td]\u003C/p\u003E\u003Cp\u003E [td]325000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Tylo[/td]\u003C/p\u003E\u003Cp\u003E [td]100000[/td]\u003C/p\u003E\u003Cp\u003E [td]125000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Bop[/td]\u003C/p\u003E\u003Cp\u003E [td]140000[/td]\u003C/p\u003E\u003Cp\u003E [td]145000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Pol[/td]\u003C/p\u003E\u003Cp\u003E [td]135000[/td]\u003C/p\u003E\u003Cp\u003E [td]140000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[tr]\u003C/p\u003E\u003Cp\u003E [td]Eeloo[/td]\u003C/p\u003E\u003Cp\u003E [td]100000[/td]\u003C/p\u003E\u003Cp\u003E [td]110000[/td]\u003C/p\u003E\u003Cp\u003E[/tr]\u003C/p\u003E\u003Cp\u003E[/table]\u003C/p\u003E\u003Cp\u003EYou can try and figure out which one is the correct one.\u003C/p\u003E\n"}]}