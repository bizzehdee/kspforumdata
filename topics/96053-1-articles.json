{"TopicId":96053,"ForumId":69,"TopicTitle":"Blue Screen on Lenovo ThinkPad R500, Windows Vista","CreatedByName":"jkacer","CreatedById":134901,"CreatedDateTime":"2015-01-08T22:04:27Z","PageNum":1,"Articles":[{"CreatedByName":"jkacer","CreatedById":134901,"CreatedDateTime":"2015-01-08T22:04:27Z","Content":"\n\u003Cp\u003EI installed KSP on a ThinkPad R500 laptop with Windows Vista SP2 32bit and every time I run the game, I get a Blue Screen of Death after a few seconds. The OS is fully updated via Windows Update. KSP version is 0.25.0.642. It is a fresh system, newly installed and updated, with KSP as the only application installed.\u003C/p\u003E\u003Cp\u003EThe Blue Screen reports error 0x00000116 in module igdkmd32.sys, which is Intel\u0027s graphic card driver. The driver is also updated to the latest version available: 8.15.10.2869. The Blue Screen occurs only when playing KSP, it never occurred before and it never occurs when not playing KSP. The system crashes even if the player is not actually doing anything, it\u0027s enough to start the game (a mission or training).\u003C/p\u003E\u003Cp\u003EDo you have an idea what I could do in order to eliminate the crashes?\u003C/p\u003E\u003Cp\u003EHas anybody encountered the same issue too?\u003C/p\u003E\u003Cp\u003EI can provide a screenshot of the Blue Screen (made with a phone) and the KSP log, if it helps.\u003C/p\u003E\u003Cp\u003EThank you for any suggestions!\u003C/p\u003E\u003Cp\u003EJKacer\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-01-08T22:13:57Z","Content":"\n\u003Cp\u003EHi jkacer, your KSP.log and output_log.txt may help, see the stickies for info on these.\u003C/p\u003E\u003Cp\u003EA google search for the stop error 0x00000116 gives me these two pages from Microsoft \u003Ca href=\u0022http://answers.microsoft.com/en-us/windows/forum/windows_7-system/windows-7-constantly-crashing-blue-screenstop/a94570b1-cf0a-4b6e-aa42-44338eb00495\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E(1)\u003C/strong\u003E\u003C/a\u003E \u003Ca href=\u0022http://answers.microsoft.com/en-us/windows/forum/windows_7-system/blue-screen-error-code-0x00000116/5b120e36-8c34-4ad0-ba1f-058d8a445ed7\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E(2)\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThey mention AMD and Nvidia graphics drivers, and your failing module is also a graphics driver but in this case for Intel.\u003C/p\u003E\u003Cp\u003EIt is probably a good idea to fully uninstall your current driver, reboot, install the latest driver and reboot again, that is the best way to ensure the driver installs properly with no traces of old drivers.\u003C/p\u003E\u003Cp\u003EIf the problem persists please let us know \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"jkacer","CreatedById":134901,"CreatedDateTime":"2015-01-12T23:03:39Z","Content":"\n\u003Cp\u003EHello Sal Vager and thank you for your reply.\u003C/p\u003E\u003Cp\u003EI have attached the log files here:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www./view/7hmt612a6me8qiz/buildID.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./view/7hmt612a6me8qiz/buildID.txt\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www./download/34kzc4jbzf3faon/KSP.log\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./download/34kzc4jbzf3faon/KSP.log\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www./view/rutmvka2l5crrlr/output_log.txt\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./view/rutmvka2l5crrlr/output_log.txt\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI could not see anything interesting, except messages about graphics device reset in output_log.txt.\u003C/p\u003E\u003Cp\u003EThanks for the links, I had already found them before I made a post to this forum. Unfortunately I cannot upgrade my graphics - I already have the latest available version.\u003C/p\u003E\u003Cp\u003EAny help would be highly appreciated :-)\u003C/p\u003E\u003Cp\u003EBest Regards,\u003C/p\u003E\u003Cp\u003E JKacer\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EI forgot to post the screenshot of the BSOD. Here it is: \u003Ca href=\u0022http://www./view/lz8erseqy991tnn/BlueScreen-Kerbal.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./view/lz8erseqy991tnn/BlueScreen-Kerbal.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESorry for the poor quality :-)\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-01-12T23:09:20Z","Content":"\n\u003Cp\u003EOkay I\u0027m not sure if this is causing the blue screen, it really shouldn\u0027t, bluescreens are usually indicative of deeper problems, but the output_log.txt does contain this at the end:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EHandleD3DDeviceLost\u003Cbr\u003E  HandleD3DDeviceLost: needs reset, doing it\u003Cbr\u003EFullResetD3DDevice\u003Cbr\u003EResetD3DDevice\u003Cbr\u003Edev-\u0026gt;Reset\u003Cbr\u003ED3Dwindow device not lost anymore\u003Cbr\u003EHandleD3DDeviceLost\u003Cbr\u003E  HandleD3DDeviceLost: needs reset, doing it\u003Cbr\u003EFullResetD3DDevice\u003Cbr\u003EResetD3DDevice\u003Cbr\u003Edev-\u0026gt;Reset\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis suggests that KSP was minimised during load, this causes the game to lose lock on the graphics card and it can\u0027t get it back, if this is what\u0027s happening in this case then running in windowed mode can avoid it or allowing KSP to fully load without minimising it or switching to another application with alt\u002Btab.\u003C/p\u003E\u003Cp\u003EAlt\u002BEnter can be used to safely switch KSP to windowed mode while it loads, the game does not expect to have exclusive lock on the card that way so shouldn\u0027t crash.\u003C/p\u003E\u003Cp\u003EIf this doesn\u0027t work then maybe an older driver will fix the problem.\u003C/p\u003E\n"},{"CreatedByName":"jkacer","CreatedById":134901,"CreatedDateTime":"2015-01-15T22:12:47Z","Content":"\n\u003Cp\u003EHi Sal, thank you for the hint!\u003C/p\u003E\u003Cp\u003EI\u0027ll try again, making sure the KSP window is 100% time the active window.\u003C/p\u003E\u003Cp\u003EI\u0027ll report my findings here.\u003C/p\u003E\u003Cp\u003EHave a nice day,\u003C/p\u003E\u003Cp\u003E JKacer\u003C/p\u003E\n"},{"CreatedByName":"jkacer","CreatedById":134901,"CreatedDateTime":"2015-01-18T15:32:45Z","Content":"\n\u003Cp\u003EHi Sal!\u003C/p\u003E\u003Cp\u003EI tried again, keeping KSP window focused all the time. This time, it really didn\u0027t crash with a BSOD -- good news :-)\u003C/p\u003E\u003Cp\u003EHowever, very often when a new scene needs to be loaded, the window just goes all black and the program becomes irresponsive. I must finally kill it after a few minutes of waiting.\u003C/p\u003E\u003Cp\u003EI think I will wait for a newer version; this problem seems to have no solution on this hardware.\u003C/p\u003E\u003Cp\u003EThank you very much for your support!\u003C/p\u003E\u003Cp\u003EJKacer\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-01-18T15:36:47Z","Content":"\n\u003Cp\u003EWish I knew what could help you jkacer, you really should not be getting stop errors at all, have you tried installing a different driver for the graphics card?\u003C/p\u003E\n"},{"CreatedByName":"jkacer","CreatedById":134901,"CreatedDateTime":"2015-01-18T19:00:31Z","Content":"\n\u003Cp\u003EI have only tried two different version of Intel\u0027s driver: the one supplied with the laptop by Lenovo and the newest one available at Intel\u0027s site. There seems to be no difference. And I don\u0027t think that downgrading to an older version will help. The version originally supplied by Lenovo is from 2008.\u003C/p\u003E\u003Cp\u003EI will check periodically for new versions of KPS, maybe they will solve the issue in the future.\u003C/p\u003E\u003Cp\u003EThank you for your help, Sal! JKacer\u003C/p\u003E\n"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-01-19T05:08:26Z","Content":"\n\u003Cp\u003EBug check 0x116 is a TDR timeout. Usually WDDM can recover/restart the device, but I suspect that your driver does not support WDDM.\u003C/p\u003E\u003Cp\u003EIf you could post a minidump I might be able to analyze it with WinDbg. If not, at least could you tell me the parameters that came with the error?\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-01-19T10:21:44Z","Content":"\n\u003Cp\u003EGiven that this is on a 32bit version of Windows, I suspect the process could be running out of address space and the graphics driver (most Intel graphics share the main memory with the card) isn\u0027t coping with it very well. How much actual RAM does the machine have?\u003C/p\u003E\u003Cp\u003EThe first thing to try is to edit the settings.cfg and look for the line that says \u0022TEXTURE_QUALITY =\u0022 and change the number at the end to a higher value. Try 3 at first (this should give you 1/8th res textures) and if this lets you run the game then you can try adjusting upwards a bit it in the settings screen in game.\u003C/p\u003E\n"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-01-19T15:33:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Padishar\u0022 data-cite=\u0022Padishar\u0022\u003E\u003Cdiv\u003EGiven that this is on a 32bit version of Windows, I suspect the process could be running out of address space and the graphics driver (most Intel graphics share the main memory with the card) isn\u0027t coping with it very well. How much actual RAM does the machine have?\u003Cp\u003EThe first thing to try is to edit the settings.cfg and look for the line that says \u0022TEXTURE_QUALITY =\u0022 and change the number at the end to a higher value. Try 3 at first (this should give you 1/8th res textures) and if this lets you run the game then you can try adjusting upwards a bit it in the settings screen in game.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDo integrated graphics \u0022cards\u0022 even contain dedicated RAM? I don\u0027t think so. Which could just mean that jkacer is running out of RAM but is getting another error for it.\u003C/p\u003E\u003Cp\u003EAnyway, I\u0027ll keep gathering information. Open regedit and browse to \u003Cspan style=\u0022font-family:\u0027courier new\u0027;\u0022\u003EHKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Control\\GraphicsDrivers \u003C/span\u003Eand tell me all of the keys you see in there.\u003C/p\u003E\n"},{"CreatedByName":"jkacer","CreatedById":134901,"CreatedDateTime":"2015-01-19T22:24:02Z","Content":"\n\u003Cp\u003EHello guys and thank you for you support!\u003C/p\u003E\u003Cp\u003E@longbyte1: Here are the parameters I copied from the Blue Screen:\u003C/p\u003E\u003Cp\u003ESTOP 0x00000116\u003C/p\u003E\u003Cp\u003E0x84CA5268\u003C/p\u003E\u003Cp\u003E0x8D81BFB0\u003C/p\u003E\u003Cp\u003E0x00000000\u003C/p\u003E\u003Cp\u003E0x0000000D\u003C/p\u003E\u003Cp\u003Eigdkmd32.sys - That\u0027s Intel graphic card driver\u003C/p\u003E\u003Cp\u003Eaddress 8D81BFB0\u003C/p\u003E\u003Cp\u003Ebase 8D805000\u003C/p\u003E\u003Cp\u003EUnfortunately I don\u0027t have the dump file with me right now as I\u0027m using a different computer. When I get it from the original computer, I\u0027ll post it.\u003C/p\u003E\u003Cp\u003E@Padishar: The machine has 4GB physical RAM, Windows can see 3.5 GB. Kerbal was the only application running there at that moment.\u003C/p\u003E\u003Cp\u003EThank you for the with the configuration files, I\u0027ll try it asap and post the results here.\u003C/p\u003E\u003Cp\u003EBig thanks to both of you!\u003C/p\u003E\u003Cp\u003EJKacer\u003C/p\u003E\n"},{"CreatedByName":"jkacer","CreatedById":134901,"CreatedDateTime":"2015-01-24T17:56:23Z","Content":"\n\u003Cp\u003EHi longbyte1!\u003C/p\u003E\u003Cp\u003EFinally I uploaded the dump files to my MediaFire, here they are:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www./download/jk0859wcp49ybc5/Mini122714-01.dmp\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./download/jk0859wcp49ybc5/Mini122714-01.dmp\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www./download/sjclodaz0t63y75/Mini010415-01.dmp\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./download/sjclodaz0t63y75/Mini010415-01.dmp\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EConcerning the system registry, here is the info:\u003C/p\u003E\u003Cp\u003EFolder GraphicsDrivers:\u003C/p\u003E\u003Cp\u003EDxgKrnlVersion - REG_DWORD - 0x00001053\u003C/p\u003E\u003Cp\u003EUseXPModel - REG_DWORD - 0x00000000\u003C/p\u003E\u003Cp\u003EFolder GraphicsDrivers\\DCI:\u003C/p\u003E\u003Cp\u003ETimeout - REG_DWORD - 0x00000007\u003C/p\u003E\u003Cp\u003EFolder GraphicsDrivers\\Scheduler:\u003C/p\u003E\u003Cp\u003EEnablePreemption - REG_DWORD - 0x00000001\u003C/p\u003E\u003Cp\u003EFolder GraphicsDrivers\\UseNewKey:\u003C/p\u003E\u003Cp\u003E(empty)\u003C/p\u003E\u003Cp\u003EIt would be great if you could have a look at the dumps and the settings. Thank you!\u003C/p\u003E\u003Cp\u003EJKacer\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EHi Padishar!\u003C/p\u003E\u003Cp\u003EIt seems that your hint solved the problem! I made the configuration change you proposed and the game is running just fine! The kids have been playing it for about an hour and so far no crash :-)\u003C/p\u003E\u003Cp\u003EThank you very much for your help!\u003C/p\u003E\u003Cp\u003EAnyway, I would appreciate if longbyte1 could do the analysis of dump files, maybe it will help the developers to avoid some potential errors.\u003C/p\u003E\u003Cp\u003EJKacer\u003C/p\u003E\n"},{"CreatedByName":"longbyte1","CreatedById":17521,"CreatedDateTime":"2015-01-24T18:01:09Z","Content":"\n\u003Cp\u003EI have been looking around and I can probably narrow it down to a few things:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EYour drivers aren\u0027t up-to-date enough (why is the driver still dated 2012?)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ENorton is screwing everything up again (NisDrvWFP.sys Wed Jul 09 19:15:24 2014)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EHardware/mobo/power supply problem (not enough watts being pumped)\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEDIT: welp, it seems that you have already solved the problem. So much for using WinDbg.. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_lipssealed.gif\u0022 alt=\u0022:sealed:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-24T21:28:37Z\u0022 title=\u002201/24/2015 09:28  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 24, 2015\u003C/time\u003E by longbyte1\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"jkacer","CreatedById":134901,"CreatedDateTime":"2015-01-25T20:42:38Z","Content":"\n\u003Cp\u003EHi longbyte1!\u003C/p\u003E\u003Cp\u003EThank you for analysing it.\u003C/p\u003E\u003Cp\u003EThe driver is really from 2012. It is version 8.15.10.2869 from 2012-10-04. This was the newest version I was able to look up at Lenovo site through the links in the start menu. If I look directly at \u003Ca href=\u0022http://support.lenovo.com/us/en/products/laptops-and-netbooks/thinkpad-r-series-laptops/thinkpad-r500/?tabName=Downloads\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://support.lenovo.com/us/en/products/laptops-and-netbooks/thinkpad-r-series-laptops/thinkpad-r500/?tabName=Downloads\u003C/a\u003E they have something even slightly older (March 2012).\u003C/p\u003E\u003Cp\u003ENorton/Symantec Security was really installed there initially -- the system was installed from the rescue partition on the hard disk. But it was uninstalled immediately and replaced by MS Security Essentials. So it seems that the uninstall process is not perfect and leaves something in the system.\u003C/p\u003E\u003Cp\u003EConcerning power supply, the laptop is running on external power 99% of time, so I wouldn\u0027t say this was the problem.\u003C/p\u003E\u003Cp\u003EAnyway, the problem seems to be solved by configuration now, so we needn\u0027t go into the details :-)\u003C/p\u003E\u003Cp\u003EThank you very much once again!\u003C/p\u003E\u003Cp\u003EBest Regards,\u003C/p\u003E\u003Cp\u003E JKacer\u003C/p\u003E\n"}]}