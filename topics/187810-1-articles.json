{"TopicId":187810,"ForumId":29,"TopicTitle":"is there a custom part module crash course?","CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-08-29T06:20:09Z","PageNum":1,"Articles":[{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-08-29T06:20:10Z","Content":"\n\u003Cp\u003E\nwhat i want to do is have\u00A0intakes that produce resources based on the components of a planet\u0027s atmosphere (perhaps even hydrosphere), rather than the binary oxygen/no oxygen option the intakes give us. i think it will be in the form of a resource converter that will take an agnostic intake resource output from a stock intake module, and based on some planet specific look up tables it will output\u00A0resources in the correct proportions. will probably use float curves to indicate the proportion of a resource vs altitude with respect to sea level, one for each resource present in that atmosphere.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\npretty straight forward stuff, i only need a couple pieces of information from the game, the rest loaded from a cfg. but i have no clue where to start. if there was an example of a very simple part module or a tutorial to make one\u00A0that would help a lot.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-08-29T06:21:43Z\u0022 title=\u002208/29/2019 06:21  AM\u0022 data-short=\u00224 yr\u0022\u003EAugust 29, 2019\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2019-08-29T07:29:20Z","Content":"\n\u003Cp\u003E\nWhat\u0027s your starting point? Have you compiled DLLs from source before?\n\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-08-29T09:35:11Z","Content":"\n\u003Cp\u003E\nyea i know how to program more or less, and ive got my hello world\u00A0dll to compile, which i guess means i set up my ide correctly. ive never used c# but i do know c/\u002B\u002B pretty well and i skimmed the wikipedia page on the language. i usually work with low level embedded devices, like i just finished writing linux drivers for an i2c controller i built for my raspi.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nwhat i dont have is a working knowledge of unity (aside from the part tools) or the ksp way of doing things. ive read through the getting started thread. right now im trying to get my head around cfg loading. not quite sure where to put the code for that.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-08-29T09:37:27Z\u0022 title=\u002208/29/2019 09:37  AM\u0022 data-short=\u00224 yr\u0022\u003EAugust 29, 2019\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"zer0Kerbal","CreatedById":190933,"CreatedDateTime":"2019-08-29T11:14:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223662421\u0022 data-ipsquote-contentid=\u0022187810\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221567071311\u0022 data-ipsquote-userid=\u002210883\u0022 data-ipsquote-username=\u0022Nuke\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Nuke said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nyea i know how to program more or less, and ive got my hello world\u00A0dll to compile, which i guess means i set up my ide correctly. ive never used c# but i do know c/\u002B\u002B pretty well and i skimmed the wikipedia page on the language. i usually work with low level embedded devices, like i just finished writing linux drivers for an i2c controller i built for my raspi.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nwhat i dont have is a working knowledge of unity (aside from the part tools) or the ksp way of doing things. ive read through the getting started thread. right now im trying to get my head around cfg loading. not quite sure where to put the code for that.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nyou might get some ideas from the mod being prepped for release this week: ODFC (on demand fuel cells).\n\u003C/p\u003E\n\u003Cp\u003E\nAs long as you don\u0027t have to do windows or things like that (or even toolbar buttons) - just keep everything in the \u003Cabbr title=\u0022Part Action Window\u0022\u003EPAW\u003C/abbr\u003E - you don\u0027t have to really worry (much) about Unity.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022190933\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed4406172206\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/187625-ksp-173-on-demand-fuel-cells-refueled-v0018-24-aug-2019prerelease/\u0026amp;do=embed\u0022 style=\u0022height:214px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-08-29T11:57:43Z","Content":"\n\u003Cp\u003E\nwill check out the\u00A0repo tomorrow. i kind of want to deal with the problem where intakes having essentially 2 intakes built in so that it will work with both the ducted fan and the the jet engine. of course being able to skim jool for fuel is nice too. plan is to use mm to replace all the intake resources with an intermediate that my module will convert, and it will split it into its fractions. but i figure if i make it spew out intake air when im on an oxygen atmosphere it will maintain stock functionality. of course if another mod wanted to go nuts with it, you might have a dozen resources within an atmosphere or hydrosphere, even layers of resources, say an ozone layer, that you can skim for oxidizer. anyway i only came up with the idea a few hours ago. but its late and i need sleep.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-08-29T11:59:33Z\u0022 title=\u002208/29/2019 11:59  AM\u0022 data-short=\u00224 yr\u0022\u003EAugust 29, 2019\u003C/time\u003E by Nuke\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2019-08-29T20:28:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223662421\u0022 data-ipsquote-contentid=\u0022187810\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221567071311\u0022 data-ipsquote-userid=\u002210883\u0022 data-ipsquote-username=\u0022Nuke\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, Nuke said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nyea i know how to program more or less, and ive got my hello world\u00A0dll to compile, which i guess means i set up my ide correctly.\n\u003C/p\u003E\n\u003Cp\u003E\nwhat i dont have is a working knowledge of unity (aside from the part tools) or the ksp way of doing things.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nCool, the first thing is to inherit from PartModule:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_part_module.html\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_part_module.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIniitialize things in \u0060public override void OnAwake\u0060 and \u0060public override void OnStart\u0060.\n\u003C/p\u003E\n\u003Cp\u003E\nThe part you\u0027re attached to can be accessed from the \u0060part\u0060\u00A0property, likewise with \u0060vessel\u0060.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you define a \u0060public void Update()\u0060 function, the game will call it every UI tick.\u003Cbr\u003E\nIf you define a \u0060public void FixedUpdate()\u0060\u00A0function, the game will call it every physics tick.\n\u003C/p\u003E\n\u003Cp\u003E\nUse the KSPField attribute to\u00A0add values to the Part Action Window:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_k_s_p_field.html\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_k_s_p_field.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnd the KSPEvent attribute\u00A0to add action buttons to the Part Action Window:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_k_s_p_event.html\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_k_s_p_event.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nPart info can be gotten via \u0060part.partInfo.partConfig.GetNode(\u0022MODULE\u0022, \u0022name\u0022, moduleName)\u0060.\n\u003C/p\u003E\n\u003Cp\u003E\nPossibly useful example here:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/HebaruSan/SmartTank/blob/master/src/SmartTankPart.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/HebaruSan/SmartTank/blob/master/src/SmartTankPart.cs\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-08-29T20:28:56Z\u0022 title=\u002208/29/2019 08:28  PM\u0022 data-short=\u00224 yr\u0022\u003EAugust 29, 2019\u003C/time\u003E by HebaruSan\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Nuke","CreatedById":10883,"CreatedDateTime":"2019-08-29T21:45:56Z","Content":"\n\u003Cp\u003E\nlast night i was playing around with the cfg loader just trying to get a handle on how it works. im not sure if it would be better just to pull the data out of the node or if it would be better to parse it all in a class hierarchy. here\u0027s a sample node off the cfg i cobbled together for testing purposes.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\tPLANET\n\t{\n\t\tName = Laythe\n\t\tAtmoComponent\n\t\t{\n\t\t\tType = IntakeAir\n\t\t\tRatioCurve\n\t\t\t{\n\t\t\t\tkey = -10000 0\n\t\t\t\tkey = -1 0\n\t\t\t\tkey = 0 1\n\t\t\t\tkey = 50000 1\n\t\t\t}\n\t\t}\n\t\tAtmoComponent\n\t\t{\n\t\t\tType = Water\n\t\t\tRatioCurve\n\t\t\t{\n\t\t\t\tkey = -10000 1\n\t\t\t\tkey = -1 1\n\t\t\t\tkey = 0 0\n\t\t\t\tkey = 50000 0\n\t\t\t}\n\t\t}\n\t\t//ozone layer!\n\t\tAtmoComponent\n\t\t{\n\t\t\tType = Oxidizer\n\t\t\tRatioCurve\n\t\t\t{\n\t\t\t\tkey = -10000 0\n\t\t\t\tkey = 40000 0\n\t\t\t\tkey = 50000 1\n\t\t\t}\n\t\t}\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nso were looking at a root class with a couple default settings for the mod and a list of planets, each planet has a list of atmospheric components, and each of those has a float curve associated with it (i can just use the built in class for that). il just focus on getting it to work first and then figure out where to put it.\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223662962\u0022 data-ipsquote-contentid=\u0022187810\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221567110489\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCool, the first thing is to inherit from PartModule:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_part_module.html\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_part_module.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIniitialize things in \u0060public override void OnAwake\u0060 and \u0060public override void OnStart\u0060.\n\u003C/p\u003E\n\u003Cp\u003E\nThe part you\u0027re attached to can be accessed from the \u0060part\u0060\u00A0property, likewise with \u0060vessel\u0060.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you define a \u0060public void Update()\u0060 function, the game will call it every UI tick.\u003Cbr\u003E\nIf you define a \u0060public void FixedUpdate()\u0060\u00A0function, the game will call it every physics tick.\n\u003C/p\u003E\n\u003Cp\u003E\nUse the KSPField attribute to\u00A0add values to the Part Action Window:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_k_s_p_field.html\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_k_s_p_field.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnd the KSPEvent attribute\u00A0to add action buttons to the Part Action Window:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_k_s_p_event.html\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_k_s_p_event.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nPart info can be gotten via \u0060part.partInfo.partConfig.GetNode(\u0022MODULE\u0022, \u0022name\u0022, moduleName)\u0060.\n\u003C/p\u003E\n\u003Cp\u003E\nPossibly useful example here:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/HebaruSan/SmartTank/blob/master/src/SmartTankPart.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/HebaruSan/SmartTank/blob/master/src/SmartTankPart.cs\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nlots of useful info there, thanks.\n\u003C/p\u003E\n"},{"CreatedByName":"zer0Kerbal","CreatedById":190933,"CreatedDateTime":"2019-08-30T06:44:07Z","Content":"\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/taraniselsu/TacExamples/tree/master/01-SimplePartlessPlugin\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacExamples/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156657-hebarusan/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022156657\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156657-hebarusan/\u0022 rel=\u0022\u0022\u003E@HebaruSan\u003C/a\u003E any idea what \u0022 KSPField.category \u0022 is ?\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2019-08-30T16:20:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223663291\u0022 data-ipsquote-contentid=\u0022187810\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221567147447\u0022 data-ipsquote-userid=\u0022190933\u0022 data-ipsquote-username=\u0022zer0Kerbal\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, zer0Kerbal said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156657-hebarusan/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022156657\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156657-hebarusan/\u0022 rel=\u0022\u0022\u003E@HebaruSan\u003C/a\u003E any idea what \u0022 KSPField.category \u0022 is ?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNope, sorry. Sounds potentially useful, though.\n\u003C/p\u003E\n"},{"CreatedByName":"zer0Kerbal","CreatedById":190933,"CreatedDateTime":"2019-08-31T07:36:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223663583\u0022 data-ipsquote-contentid=\u0022187810\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221567182013\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNope, sorry. Sounds potentially useful, though.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\noops - means KSPFIeld.icon - but probably the same reply. \u003Cspan\u003E\u003Cimg alt=\u0022:o\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/ZNGIcon2.png\u0022 title=\u0022:o\u0022\u003E\u003Cspan\u003E\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003Cspan\u003E\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/span\u003E\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}