{"TopicId":87222,"ForumId":34,"TopicTitle":"[0.90] DDSLoader 1.9 (Mar 9) - Loads DDS Texture \u0026quot;Boringly fast\u0026quot; edition","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-13T21:08:10Z","PageNum":6,"Articles":[{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-19T23:51:44Z","Content":"\n\u003Cp\u003EIf you use as example u1555 or u8888 then the resolution doesn\u0027t have to be divisible by 4. That\u0027s only a limitation for block compression formats.\u003C/p\u003E\u003Cp\u003EThere\u0027s something else messing with the icons, because they even refuse to load without any changes to the resolution.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-20T00:00:53Z\u0022 title=\u002210/20/2014 12:00  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 20, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Urgante","CreatedById":120746,"CreatedDateTime":"2014-10-20T00:07:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022slumpie\u0022 data-cite=\u0022slumpie\u0022\u003E\u003Cdiv\u003EI can see the ring, it\u0027s very dark though. Not sure if it\u0027s supposed to be like this, but actually Jool itself is relatively dark too.\u003Cp\u003EDark doesn\u0027t mean it\u0027s grey or black, I can see details and some green, it\u0027s just dark. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThey look like this in my pc \u003Ca href=\u0022http://i.imgur.com/uExvSRU.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/uExvSRU.jpg\u003C/a\u003E but I have a light mod.\u003C/p\u003E\u003Cp\u003EI have the version 1.1 of ddsloader yes.\u003C/p\u003E\u003Cp\u003EDid you convert the entire KittopiaSpacemod folder to -u8888 or only the jool_ring.png file? (The others textures work for me in DXT5).\u003C/p\u003E\u003Cp\u003EAre the other textures in DXT5? Did you used the nvdxt.exe?\u003C/p\u003E\u003Cp\u003EDetails please.\u003C/p\u003E\u003Cp\u003EThe icons converted with -u1555 produced this \u003Ca href=\u0022http://i.imgur.com/CkzafEI.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/CkzafEI.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EA fast check with -u8888 worked, needs double checking, looks promising.\u003C/p\u003E\u003Cp\u003EThe files are bigger this way but It\u0027s almost irrelevant in my particular case, I had around 300 images non multiple of 4 but they are around 1mb in total.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-20T00:12:14Z\u0022 title=\u002210/20/2014 12:12  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 20, 2014\u003C/time\u003E by Urgante\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-20T00:50:14Z","Content":"\n\u003Cp\u003EThe jool ring texture was the only texture I converted. I used your save and the mod seemed to work.\u003C/p\u003E\u003Cp\u003EI\u0027m currently playing on low settings, because my graphics card is still in RMA...\u003C/p\u003E\u003Cp\u003EI used nvdxt with the -u8888 command. Maybe it\u0027s relevant to set -nomipmap as well. Oh and no rescaling, you don\u0027t have to rescale anything when using -u8888.\u003C/p\u003E\u003Cp\u003EIcons with 1555 don\u0027t work at all for me, but 8888 works like a charm, without any issues. Maybe Sarbian can tell us why 1555 doesn\u0027t work.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-20T00:59:16Z\u0022 title=\u002210/20/2014 12:59  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 20, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Urgante","CreatedById":120746,"CreatedDateTime":"2014-10-20T01:42:57Z","Content":"\n\u003Cp\u003EChanging only the \u003Cspan style=\u0022color:#333333;\u0022\u003Ejool_ring.png file makes the ring darker, changing also the default ring texture \u0022\u003C/span\u003EGameData\\KittopiaSpace\\Textures\\Default\\rings.png\u0022 makes it invisible.\u003C/p\u003E\u003Cp\u003EThe icons in partcatalog mod become invisible after the -u8888 conversion but maybe there is something wrong in my KSP install, I will check tomorrow from a clean install.\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-20T12:19:33Z","Content":"\n\u003Cp\u003EI still didn\u0027t managed to get normalmaps converting properly (using Cunch, or nvdxt)...\u003C/p\u003E\u003Cp\u003EThis is only a problem for mbm normal files, normals converted from tga or png don\u0027t seems to have any problem.\u003C/p\u003E\u003Cp\u003EIn-game, though, everything seems fine, but the log spam \u0022Texture \u0027xxx\u0027 requested as normal map but texture is not a normal map and is not readable\u0022.\u003C/p\u003E\u003Cp\u003EI tried almost every format I could think of, but I\u0027m running out of ideas...\u003C/p\u003E\u003Cp\u003EHow can I get those files (specifically, they are converted from mbm to tga, then to dds using dxt5nm) recognized by KSP? I saw something earlier in this thread regarding Alpha and Green channels, but no luck with that.\u003C/p\u003E\u003Cp\u003ELet\u0027s say I have the raw texture (ARGB format) available, and the possibility to save the resulting file to any of \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/windows/desktop/bb322854%28v=vs.85%29.aspx\u0022 rel=\u0022external nofollow\u0022\u003Ethose formats\u003C/a\u003E, is there anything I can do? I\u0027m starting to think I\u0027ll just ignore those files...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-20T12:21:58Z\u0022 title=\u002210/20/2014 12:21  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 20, 2014\u003C/time\u003E by Lilleman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-20T12:27:39Z","Content":"\n\u003Cp\u003EI\u0027ll have a more in depth look at how the normal maps are processed. I may need to not mark them as read only from the start. Any stock part where the normal are really visible, so I can see it even with my awful vision ?\u003C/p\u003E\n"},{"CreatedByName":"Las-pen","CreatedById":121174,"CreatedDateTime":"2014-10-20T12:29:57Z","Content":"\n\u003Cp\u003ESo basically this makes the game load faster?\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-20T12:42:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EI\u0027ll have a more in depth look at how the normal maps are processed. I may need to not mark them as read only from the start. Any stock part where the normal are really visible, so I can see it even with my awful vision ?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s quite visible on the \u003Ca href=\u0022http://imgur.com/a/qkUKs#0\u0022 rel=\u0022external nofollow\u0022\u003ERockomax x200-16\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EWhen I use a format KSP don\u0027t recognize, the log just throw something like \u0022can\u0027t load texture\u0022. So I guess he is loading dds normalmaps after all, I just don\u0027t really get why those errors shows.\u003C/p\u003E\u003Cp\u003EEdit: Does anyone have any good source for infos on MBM files? I actually made a converter for those, but one of the header\u0027s fields is still a complete mystery: \u003C/p\u003E\u003Cp\u003EIt is called \u0022magicNumber\u0022 (or something like this) in the mbm2png source, and it seems to be only 0 or 1. I noticed it\u0027s always 1 for normals, and 0 for everything else, but I actually need some confirmation for this one.\u003C/p\u003E\u003Cp\u003EIt could be a good way to know when a texture is supposed to be a normal, even when it\u0027s name don\u0027t give any clue.\u003C/p\u003E\u003Cp\u003E@Las-pen: Yes, but at the moment it\u0027s quite tedious to get everything working. I think this might need some days for someone to come with an \u0022all-in-one\u0022 tool for converting all this without errors. For now, it\u0027s mostly command-line tools and patience.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-20T12:56:30Z\u0022 title=\u002210/20/2014 12:56  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 20, 2014\u003C/time\u003E by Lilleman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-20T13:16:00Z","Content":"\n\u003Cp\u003EATM \u003Ca href=\u0022https://github.com/rbray89/ActiveTextureManagement/blob/master/ActiveTextureManagement/TextureConverter.cs#L204-L213\u0022 rel=\u0022external nofollow\u0022\u003Echeck a flag at pos 12\u003C/a\u003E in the file for mbm and mark the file as a normal map if it is equal to 1.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-20T13:27:36Z\u0022 title=\u002210/20/2014 01:27  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 20, 2014\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-20T13:55:18Z","Content":"\n\u003Cp\u003EThanks for the confirmation. I wrote a custom converter in .NET assuming this, glad I don\u0027t have to re-write that part.\u003C/p\u003E\u003Cp\u003EAlso, I just got rid of the warning: I saw in the DDSLoader\u0027s source that files are forced to be loaded as normal when their filename end with \u0022NRM\u0022, so I made a quick test:\u003C/p\u003E\u003Cp\u003E-convert the normal to dds using usual process\u003C/p\u003E\u003Cp\u003E-rename the texture with something ending with \u0022NRM\u0022 (in this case, I changed a \u0022model001.dds\u0022 to \u0022modelNRM.dds\u0022)\u003C/p\u003E\u003Cp\u003E-Hex-edit the corresponding mu file, look for \u0022model001.mbm\u0022 and replace it with \u0022modelNRM.dds\u0022\u003C/p\u003E\u003Cp\u003EAnd this seems to work, the warning is gone. Still, I don\u0027t know how DDSLoader could be able to recognize a normalmap from a dds file, since their header is not supposed to contain that kind of informations...\u003C/p\u003E\n"},{"CreatedByName":"shaw","CreatedById":64788,"CreatedDateTime":"2014-10-20T14:17:14Z","Content":"\n\u003Cp\u003EThat warning is harmless, just make sure you convert normal map to RGBA=YYYX (DXT5nm) format. Some stock models (AV-R8 winglet, 2.5m RCS tank) have normal maps in RGB=XYZ format named model001.mbm or similar (without NRM suffix) and they are kept readable and converted to YYYX only when the model is loaded. If the texture is already a DXT5nm DDS and not readable, everything will work fine.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-10-20T14:22:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lilleman\u0022 data-cite=\u0022Lilleman\u0022\u003E\u003Cdiv\u003EI still didn\u0027t managed to get normalmaps converting properly (using Cunch, or nvdxt)...\u003Cp\u003EThis is only a problem for mbm normal files, normals converted from tga or png don\u0027t seems to have any problem.\u003C/p\u003E\u003Cp\u003EIn-game, though, everything seems fine, but the log spam \u0022Texture \u0027xxx\u0027 requested as normal map but texture is not a normal map and is not readable\u0022.\u003C/p\u003E\u003Cp\u003EI tried almost every format I could think of, but I\u0027m running out of ideas...\u003C/p\u003E\u003Cp\u003EHow can I get those files (specifically, they are converted from mbm to tga, then to dds using dxt5nm) recognized by KSP? I saw something earlier in this thread regarding Alpha and Green channels, but no luck with that.\u003C/p\u003E\u003Cp\u003ELet\u0027s say I have the raw texture (ARGB format) available, and the possibility to save the resulting file to any of \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/windows/desktop/bb322854%28v=vs.85%29.aspx\u0022 rel=\u0022external nofollow\u0022\u003Ethose formats\u003C/a\u003E, is there anything I can do? I\u0027m starting to think I\u0027ll just ignore those files...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethe AG channels have to be moved to the RG channels, and the A\u002BB have to be set to full (or half, can\u0027t remember wich). to be considered a \u0022regular\u0022 normal map.\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-10-20T14:24:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EI\u0027ll have a more in depth look at how the normal maps are processed. I may need to not mark them as read only from the start. Any stock part where the normal are really visible, so I can see it even with my awful vision ?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis was the most annoying thing in ATM. You can check what I do to handle normal maps in the different loaders.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-20T14:47:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lilleman\u0022 data-cite=\u0022Lilleman\u0022\u003E\u003Cdiv\u003EAnd this seems to work, the warning is gone. Still, I don\u0027t know how DDSLoader could be able to recognize a normalmap from a dds file, since their header is not supposed to contain that kind of informations...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethe DDS format has a bunch of unused flag we could hijack for the file who don\u0027t have the \u0022NRM\u0022 in their names. Or I could just check of the presence of an empty file named \u0026lt;texturename\u0026gt;.dds_nrm, or read text/cfg files with a list of the normals (which end up being what ATM does).\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-20T16:12:16Z","Content":"\n\u003Cp\u003E@shaw and rbray89: Thanks, I finally figured it out: swizzling from RGBA to RGRA, then compress to dxt5 seems to do the trick. (It was working just fine using nvdxt, but I\u0027m trying to get rid of external programs)\u003C/p\u003E\u003Cp\u003E@Sarbian: I was thinking of changing the first 4 bytes of the dds header from \u0022DDS \u0022 to something like \u0022DDSn\u0022, since your code already has some functions to check this easily. Don\u0027t know if this could be a problem for Unity, though (does it check file headers before loading?).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-20T16:14:23Z\u0022 title=\u002210/20/2014 04:14  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 20, 2014\u003C/time\u003E by Lilleman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-10-20T18:12:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nori\u0022 data-cite=\u0022Nori\u0022\u003E\u003Cdiv\u003EWell this is definitely a exciting option. Don\u0027t know about anyone else but my heavily modded KSP takes forever to load up...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI hear that! I\u0027ve got about three dozen mods (few parts mods, mostly gameplay, such as MechJeb). Somewhere, I learned about putting KSP in a window (ALT-ENTER). So, now I start KSP, then slide the window to the side for about five minutes while I do other things. When KSP is ready, I slide it back and ALT-ENTER again to go full-screen.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-20T18:43:16Z","Content":"\n\u003Cp\u003ELilleman : if you change those then you might break other program that reads dds. There is 11 unused dual word ( dwReserved1[11] in the spec ). I would use the first of those dual word for our use. So that would be the byte at position 35 if I can still count ?\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-20T20:19:19Z","Content":"\n\u003Cp\u003EOK then, I\u0027ll go with modifying byte #35 for now. Then I\u0027ll have to compile a test fork of your dll to check how this works.\u003C/p\u003E\u003Cp\u003EOf course if you plan to implement another way to determine if a dds is a normalmap, I\u0027ll adapt my code.\u003C/p\u003E\u003Cp\u003EI would actually prefer this solution over an external text file, but both have pros and cons.\u003C/p\u003E\n"},{"CreatedByName":"shaw","CreatedById":64788,"CreatedDateTime":"2014-10-20T20:27:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Lilleman\u0022 data-cite=\u0022Lilleman\u0022\u003E\u003Cdiv\u003E@shaw and rbray89: Thanks, I finally figured it out: swizzling from RGBA to RGRA, then compress to dxt5 seems to do the trick. (It was working just fine using nvdxt, but I\u0027m trying to get rid of external programs)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou mean RGBA -\u0026gt; BGBR or RGBA -\u0026gt; GGGR? The latter lessen quality loss more. RGBA -\u0026gt; RGRA you mentioned shouldn\u0027t work (correctly).\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-20T20:29:58Z","Content":"\n\u003Cp\u003EKSP does RGBA =\u0026gt; GGGR, so it should be done in the same.\u003C/p\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-20T20:45:49Z","Content":"\n\u003Cp\u003EI\u0027ve done some \u0022reverse-engineering\u0022 (okay, maybe it was bruteforce) in order to get my files converted exactly the same way as nvdxt\u0027s dxt5nm. For now I got it working with RGBA-\u0026gt;RGRA, but I\u0027ve only tested a few files.\u003C/p\u003E\u003Cp\u003EIt surprised me too, since I didn\u0027t see this format elsewhere yet... But \u003Ca href=\u0022http://i.imgur.com/diG81Uj.jpg\u0022 rel=\u0022external nofollow\u0022\u003Eit looks like it works.\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-21T00:57:24Z","Content":"\n\u003Cp\u003ELilleman are you still taking about .mbm files? Apparently they already have X in alpha.\u003C/p\u003E\u003Cp\u003EIf you use -dxt5nm on those you will lose the x vector from the alpha.\u003C/p\u003E\u003Cp\u003EThat what you see after converting a xy_ (sometimes xyz) normal map with the -dxt5nm command is yyyx or gggr. It doesn\u0027t matter what\u0027s in the red and blue channel though, because they will be ignored. I think it\u0027s done to reduce co-compression artefacts, but I\u0027m not sure. Not all tools do this, some leave them blank of fill one or the other.\u003C/p\u003E\u003Cp\u003EBut again, .mbm are different, at least that\u0027s what I got told.\u003C/p\u003E\u003Cp\u003E------\u003C/p\u003E\u003Cp\u003EI made another annoying discovery: \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EOut of whatever reason are many regular purple normal maps (xyz or xy_) saved with alpha channel, a full alpha channel to be precise. \u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EMakes no sense, because they absolutely don\u0027t use the alpha and it just bloats the file size, but it makes the -32 nvdxt command chatch them.\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ETherefore my solution a few pages back isn\u0027t universal. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-21T01:45:05Z\u0022 title=\u002210/21/2014 01:45  AM\u0022 data-short=\u00229 yr\u0022\u003EOctober 21, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-21T12:25:08Z","Content":"\n\u003Cp\u003EYep, I was talking about mbm files, but I ended not using the nvdxt5 command. I\u0027ve made a small program to do the conversion automatically, that use the DirectX API. Since it doesn\u0027t have native dxt5nm support, I have to do the swizzling \u0022by hand\u0022 before saving the file to dds.\u003C/p\u003E\u003Cp\u003E RGBA-\u0026gt;RGRA was the result of trial and errors, and even if it does not make any sense (as stated earlier, Unity shouldn\u0027t be able to use those), they are exactly the same as nvdxt\u0027s files... I don\u0027t really get it, but as long as it works, I don\u0027t really bother.\u003C/p\u003E\u003Cp\u003EMBMs seems to be an exception, though, I think I\u0027ll have to use gggr for some other files (the AV-R8 winglet normal, for instance).\u003C/p\u003E\u003Cp\u003EIt\u0027s easy to determine when a mbm is a normal, it has a flag in his header. For TGAs files, however, either I look in the file name for something familiar (\u0022nrm\u0022, \u0022normal\u0022, \u0022nm\u0022...), or I check if all pixels have their blue channel set to 1 (0xff). Probably not the most efficient solution, and it could be a problem for some textures... Though, I didn\u0027t encountered \u0022pure blue\u0022 textures in KSP yet, so this will probably do the trick...\u003C/p\u003E\n"},{"CreatedByName":"slumpie","CreatedById":121922,"CreatedDateTime":"2014-10-21T13:26:17Z","Content":"\n\u003Cp\u003ENo nvdxt doesn\u0027t save them as RGRA. If you open a converted file and compare the channels, then you\u0027ll see that the red data landed in the alpha channel and the red and blue channel is just a copy of green. \u003C/p\u003E\u003Cp\u003EThe red and blue channel will look worse than the green channel and show more artefacts, but that\u0027s just a result of the lower bit number.\u003C/p\u003E\u003Cp\u003EUnity doesn\u0027t care about the red and blue channel:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[LIST]\u003Cbr\u003E[*]inline fixed3 UnpackNormalDXT5nm [COLOR=#000000]([/COLOR]fixed4 packednormal[COLOR=#000000])[/COLOR] \u003Cbr\u003E[*][COLOR=#000000]{[/COLOR] \u003Cbr\u003E[*]   fixed3 [URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL]; \u003Cbr\u003E[*]   [URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL].[COLOR=#2b91af]xy[/COLOR] [COLOR=#008000]=[/COLOR] packednormal.[COLOR=#2b91af]wy[/COLOR] [COLOR=#008000]*[/COLOR] [COLOR=#0000c0]2[/COLOR] [COLOR=#008000]-[/COLOR] [COLOR=#0000c0]1[/COLOR]; \u003Cbr\u003E[*][COLOR=#008000]#if defined(SHADER_API_FLASH)[/COLOR] \u003Cbr\u003E[*]   [COLOR=#008000][I]// Flash does not have efficient saturate(), and dot() seems to require an extra register.[/I][/COLOR] \u003Cbr\u003E[*]   [URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL].[COLOR=#2b91af]z[/COLOR] [COLOR=#008000]=[/COLOR] sqrt[COLOR=#000000]([/COLOR][COLOR=#0000c0]1[/COLOR] [COLOR=#008000]-[/COLOR] [URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL].[COLOR=#2b91af]x[/COLOR][COLOR=#008000]*[/COLOR][URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL].[COLOR=#2b91af]x[/COLOR] [COLOR=#008000]-[/COLOR] [URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL].[COLOR=#2b91af]y[/COLOR] [COLOR=#008000]*[/COLOR] [URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL].[COLOR=#2b91af]y[/COLOR][COLOR=#000000])[/COLOR]; \u003Cbr\u003E[*][COLOR=#008000]#else[/COLOR] \u003Cbr\u003E[*]   [URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL].[COLOR=#2b91af]z[/COLOR] [COLOR=#008000]=[/COLOR] sqrt[COLOR=#000000]([/COLOR][COLOR=#0000c0]1[/COLOR] [COLOR=#008000]-[/COLOR] saturate[COLOR=#000000]([/COLOR]dot[COLOR=#000000]([/COLOR][URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL].[COLOR=#2b91af]xy[/COLOR], [URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL].[COLOR=#2b91af]xy[/COLOR][COLOR=#000000])[/COLOR][COLOR=#000000])[/COLOR][COLOR=#000000])[/COLOR]; \u003Cbr\u003E[*][COLOR=#008000]#endif[/COLOR] \u003Cbr\u003E[*]   [COLOR=#008de4]return[/COLOR] [URL=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=normal\u0022][COLOR=#8b6ba6]normal[/COLOR][/URL]; \u003Cbr\u003E[*][COLOR=#000000]}[/COLOR] \u003Cbr\u003E[/LIST]\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEDIT: Wow, why is the code box so small...\u003C/p\u003E\u003Cp\u003EOh and btw, I found out why nvdxt mirrors the green channel. It is in fact done to reduce compression artefacts.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-21T13:39:43Z\u0022 title=\u002210/21/2014 01:39  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 21, 2014\u003C/time\u003E by slumpie\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Lilleman","CreatedById":112321,"CreatedDateTime":"2014-10-21T16:41:18Z","Content":"\n\u003Cp\u003EWell, I was focusing on mbm files. And they seems to have their own rules regarding swizzling... I just ran some tests with TGAs, and this time Unity expect xGxR format. So you were all right about that, RGRA isn\u0027t a format Unity should use (I really don\u0027t get why this is working.)\u003C/p\u003E\u003Cp\u003EAs a result, my code is a mess (programming in VB don\u0027t help), since it now has two separate functions for swizzling, and it has to perform a bunch of tests to get the right conversion parameters...\u003C/p\u003E\u003Cp\u003EI\u0027m starting to understand why my first batch with Crunch did not convert half of my textures properly...\u003C/p\u003E\n"}]}