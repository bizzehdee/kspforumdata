{"TopicId":139128,"ForumId":34,"TopicTitle":"[1.2.x/1.3] MemGraph 1.1.0.3 - with Stutter Reduction","CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-06T09:52:19Z","PageNum":1,"Articles":[{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-06T09:52:19Z","Content":"\n\u003Cp\u003E\nThis started as a simple plugin that\u00A0displays a\u00A0graph of the Mono heap allocation rate and garbage collection,\u00A0mainly intended as a troubleshooting and development aid rather than for general use (hence why I originally released it in the Add-on Development\u00A0sub-forum rather than this\u00A0one). \u00A0However, I have since devised\u00A0a way to\u00A0force\u00A0Mono to keep significantly more free space in the heap, which can significantly reduce\u00A0the frequency at which the heap fills up and the Mono garbage collection causes a stutter, so I have added it to this mod and released it more publicly.\u00A0 I will be continuing to work on this mechanism to improve it further.\n\u003C/p\u003E\n\u003Cp\u003E\nThe code\u00A0has been highly optimised to create as little garbage as possible (given the constraints of the old OnGUI based API) so that it interferes with what it\u0027s measuring as little as possible. \u00A0I do have plans to add various\u00A0\u0022usability\u0022 type enhancements but only things that can be implemented cleanly and are directly useful for the mods purpose.\n\u003C/p\u003E\n\u003Cp\u003E\nTo install, simply download the zip from the link below and c\u003Cspan style=\u0022line-height:1.6;\u0022\u003Eopy the MemGraph folder\u00A0from the zip file into the GameData folder of your KSP installation.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nMod-KeypadMultiply toggles the display of the window.\u003Cbr\u003E\nMod-KeypadPlus increases the vertical scale of the graph.\u003Cbr\u003E\nMod-KeypadMinus decreases the vertical scale of the graph.\u003Cbr\u003E\nMod-KeypadDivide runs a bit of test code controlled by MemGraph\\PluginData\\test.cfg\u003Cbr\u003E\nMod-End pads the Mono heap with a configurable amount of headroom to reduce frequency of garbage collections.\n\u003C/p\u003E\n\u003Cp\u003E\nEvery second the plugin totals up all the memory allocated on the heap and whether any garbage collections have run. \u00A0It also\u00A0displays the current total heap allocation, the maximum heap allocation just before the last garbage collection, the minimum\u00A0just after the last collection, the number of \u0022render\u0022 and \u0022physics\u0022 updates and the time between the previous two collections.\n\u003C/p\u003E\n\u003Cp\u003E\nThe graph is 600 pixels wide and shows the last 10 minutes of the memory allocation in green. \u00A0If a garbage collection happens\u00A0during the interval, that column of the graph will have a red background.\n\u003C/p\u003E\n\u003Cp\u003E\nThe test code basically allocates a number of blocks of the specified size and displays which allocations actually cause the\u00A0allocated heap to change. \u00A0This allows us to deduce various characteristics of the memory allocator and garbage collection\u00A0mechanisms (and was a crucial part of developing the heap padding mechanism).\n\u003C/p\u003E\n\u003Cp\u003E\nMod-End activates the heap padding. \u00A0The amount of padding is controlled by the MemGraph\\PluginData\\padheap.cfg. \u00A0The format\u00A0of the file is very simple. \u00A0Each line controls the amount of padding allocated for blocks of each size range. \u00A0The first value is the\u00A0size of each block allocated and the second is the number of blocks. \u00A0The first values are only present for illustration,\u00A0they don\u0027t actually control the size of the blocks, these are hardwired to the sizes in the default configuration. \u00A0The total value at the end is the total number of megabytes of padding allocated (note, the memory usage of KSP will increase by more than this due to the free space headroom maintained by Unity).\n\u003C/p\u003E\n\u003Cp\u003E\nI recommend that you run the game normally and load up a situation that has noticeable stutter. \u00A0Display the graph, setting the scale so the regular allocation rate fits nicely and the garbage collection red lines can be seen. \u00A0Let it run for several runs of the garbage collector and then hit Mod-End. \u00A0After a short pause, the game should continue with a considerably larger gap between the collections. \u00A0After another few collections hit Mod-End again and it may improve further. \u00A0I would appreciate feedback about how well this works, e.g. screenshots of the graph taken during this process and after another few collections would be very helpful along with details about your setup (and preferably, an output_log.txt/player.log file). \u00A0Many thanks to \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103242-tig/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022103242\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103242-tig/\u0022 rel=\u0022\u0022\u003E@Tig\u003C/a\u003E\u00A0for the testing and very well presented data\u00A0he posted\u00A0over in the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139484-112-grumpycollector-101-stutter-what-stutter/\u0026amp;do=findComment\u0026amp;comment=2596430\u0022 rel=\u0022\u0022\u003EGrumpy Collector thread\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nOne other thing I should add, though it should be obvious with only a little thought, is that the heap padding mechanism is\u00A0only intended for 64 bit versions of the game. \u00A0Trying to allocate 900 MB of extra heap space on the 32 bit version is unlikely\u00A0to be successful and, if it is, then it will probably cause the game to crash before long due to running out of address space.\u00A0It is also unlikely to work effectively if your machine has only 4GB of RAM as the total usage of KSP is likely to grow close\u00A0to 4GB even without loading a save, resulting in virtual memory paging which will seriously hurt performance.\n\u003C/p\u003E\n\u003Cp\u003E\nObligatory picture of mod in use:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022tUUtX2i.png\u0022 class=\u0022ipsImage\u0022 height=\u0022562\u0022 src=\u0022http://i.imgur.com/tUUtX2i.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:18px;\u0022\u003E\u003Cstrong\u003E\u003Ca href=\u0022https://github.com/Gerry1135/MemGraph/releases/download/Release_1.1.0.3/MemGraph_1.1.0.3.zip\u0022 rel=\u0022external nofollow\u0022\u003EDownload MemGraph for KSP 1.2.x and 1.3\u003C/a\u003E\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003E\u003Ca href=\u0022https://github.com/Gerry1135/MemGraph/releases/download/Release_1.0.0.11/MemGraph_1.0.0.11.zip\u0022 rel=\u0022external nofollow\u0022\u003EDownload MemGraph for KSP 1.1.x\u003C/a\u003E\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/Gerry1135/MemGraph\u0022 rel=\u0022external nofollow\u0022\u003ESource on GitHub\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/Gerry1135/MemGraph/releases\u0022 rel=\u0022external nofollow\u0022\u003EPrevious releases on GitHub\u003C/a\u003E\u00A0(versions 1.0.0.x are for KSP 1.1.x, versions 1.1.0.x are for KSP 1.2).\n\u003C/p\u003E\n\u003Cp\u003E\nThe code is released under the MIT license (see\u00A0https://github.com/Gerry1135/MemGraph/blob/master/Graph.cs).\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s no obligation and it won\u0027t entitle you to any special treatment but, if you feel like it, then you can make a donation using the link below.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003E\u003Ca href=\u0022http://paypal.me/Padishar\u0022 rel=\u0022external nofollow\u0022\u003EDonate Here\u003C/a\u003E\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-06-19T12:13:44Z\u0022 title=\u002206/19/2017 12:13  PM\u0022 data-short=\u00227 yr\u0022\u003EJune 19, 2017\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-06T17:46:21Z","Content":"\n\u003Cp\u003E\nJust released a small update to 1.0.0.1 to slightly optimise the UI code (changed from using GUILayout to GUI).\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-08T09:00:38Z","Content":"\n\u003Cp\u003E\nAnother small update to add the current total of heap allocated (HWM). \u00A0The new screenshot in the OP shows an \u0022interesting\u0022 (not to mention, in need of some serious optimisation) issue. \u00A0The point earlier in the graph where the memory allocation rate was ~5 MB/s was when flying the identical vessel to in the screenshot but in a save that also contains 4 fairly large space stations (2 of ~300 parts and 2 of ~700 parts). \u00A0The point where the shot was taken was in a copy of the original save with the stations terminated and shows a rate of ~500 KB/s. \u00A0That\u0027s a lot of memory usage for 4 vessels outside of physics range that should be needing little CPU and certainly shouldn\u0027t need to be allocating anything like that much memory.\n\u003C/p\u003E\n"},{"CreatedByName":"drtedastro","CreatedById":70911,"CreatedDateTime":"2016-05-08T12:57:06Z","Content":"\n\u003Cp\u003E\nThanks.\n\u003C/p\u003E\n\u003Cp\u003E\nI have been looking for something like this.\n\u003C/p\u003E\n\u003Cp\u003E\nCheers.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-08T22:17:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222568512\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462698038\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe new screenshot in the OP shows an \u0022interesting\u0022 (not to mention, in need of some serious optimisation) issue. \u00A0The point earlier in the graph where the memory allocation rate was ~5 MB/s was when flying the identical vessel to in the screenshot but in a save that also contains 4 fairly large space stations (2 of ~300 parts and 2 of ~700 parts). \u00A0The point where the shot was taken was in a copy of the original save with the stations terminated and shows a rate of ~500 KB/s. \u00A0That\u0027s a lot of memory usage for 4 vessels outside of physics range that should be needing little CPU and certainly shouldn\u0027t need to be allocating anything like that much memory.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve now done a more detailed examination of this behaviour and conclude that, during flight, there is a rate of\u00A0memory allocation that is proportional to the total part count of all the on-rails vessels in the save. \u00A0This results in large and complex saves suffering significantly more with GC related stutter.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.dropbox.com/s/3nwv9nnau9mmydc/OnRailsMemorySaves.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003EThis file\u003C/a\u003E contains the various saves the tests were run on. \u00A0They are all based on the \u0022Platonic Stations\u0022 save which contains the top stage of a KerbalX in a ~200km orbit and four stations with part counts of 308, 308, 642 and 1017. \u00A0The other saves all have one or more of the stations terminated to reduce the overall part count with names that indicate what is present, e.g. TetraOcto is the version with 1 tetrahedron (308 parts) and the octahedron (642 parts).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/TYtj0/embed?background=ffffff\u0026amp;text=1a1a1a\u0026amp;link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis table shows the approx. allocation rate from the screenshots above.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ESave\t\tOn-Rails Parts\tAlloc Rate KB/s\nJustJeb\t\t\t0\t\t600\nTetra\t\t\t308\t\t1400\nTetraTetra\t\t616\t\t2100\nOcto\t\t\t642\t\t1900\nTetraOcto\t\t950\t\t2600\nTetraTetraOcto\t\t1258\t\t3300\nPlatonic\t\t2275\t\t4900\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThis shows a pretty consistent increase with overall part count. \u00A0The only exception being TetraTetra allocating more than Octo despite the slightly lower part count. \u00A0I suspect this is due to there being a per-vessel component as well as a per-part one.\n\u003C/p\u003E\n\u003Cp\u003E\nThis only seems to occur in the flight scene. \u00A0In KSC and the astronaut complex all of the saves allocate around 200-240 KB/s. \u00A0In the tracking station they allocate slightly more but still fairly constant with this small number of vessels though I suspect\u00A0the tracking station will allocate quite a bit more\u00A0with many vessels.\n\u003C/p\u003E\n\u003Cp\u003E\nThe code that determines if an on-rails vessel enters the physics bubble is the only bit\u00A0I can think of right now that relates\u00A0to on-rails vessels and\u00A0only happens in the flight scene so this may be a good place to start looking.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll be posting this to the bug tracker in the near future...\n\u003C/p\u003E\n"},{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2016-05-11T14:56:06Z","Content":"\n\u003Cp\u003E\nHey \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nJust read your post in the other thread and thought WOW gonna try this :).\n\u003C/p\u003E\n\u003Cp\u003E\nSo you seem to be really smart at this stuff sorry to ask here but is the stutter even possible to fix on Squads end or is it really down to Unity? \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks again\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nP.s\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a way to find out exactly what Mod,File,Texture etc etc is being read etc.\n\u003C/p\u003E\n\u003Cp\u003E\nSo kind of like the windows performance tab but based on KSP\u0060s files and mods loaded?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-11T14:57:17Z\u0022 title=\u002205/11/2016 02:57  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 11, 2016\u003C/time\u003E by stk2008\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-11T15:02:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222575162\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462978566\u0022 data-ipsquote-userid=\u0022162264\u0022 data-ipsquote-username=\u0022stk2008\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, stk2008 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nbut is the stutter even possible to fix on Squads end or is it really down to Unity?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMost of the problem is caused by Squad\u0027s code and by mods allocating and discarding too much memory. \u00A0KSP does push Unity considerably beyond what it\u0027s really designed for but there really is no excuse for any game to be constantly allocating and discarding megabytes of memory every second. \u00A0This would cause issues whatever game engine (with whatever underlying memory allocation model) was used. \u00A0As I said in the other post, people hoping that Unity will update Mono to use a better GC algorithm would\u00A0be disappointed by the effect (or lack of) it would have\u00A0on KSP...\n\u003C/p\u003E\n"},{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2016-05-11T15:04:14Z","Content":"\n\u003Cp\u003E\n\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nDamn would it be wise to get t he KSP community together and start a partition to get Squad to fix the stuttering.\n\u003C/p\u003E\n\u003Cp\u003E\nI dont mean be rude,mean etc about it I mean sign a partiotion to show how many of us are effected by it so they can see thats it worth fixing?.\n\u003C/p\u003E\n\u003Cp\u003E\nI for one need it fixed the stutter is terrible and a real deal breaker \u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-11T15:09:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222575179\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462979054\u0022 data-ipsquote-userid=\u0022162264\u0022 data-ipsquote-username=\u0022stk2008\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, stk2008 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDamn would it be wise to get t he KSP community together and start a partition to get Squad to fix the stuttering.\n\u003C/p\u003E\n\u003Cp\u003E\nI dont mean be rude,mean etc about it I mean sign a partiotion to show how many of us are effected by it so they can see thats it worth fixing?.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot really. \u00A0As I have posted in various other related threads, Squad are aware of the problem and of some of the specific problem areas and are intending to fix them. \u00A0The best way to increase the priority of that work would be to add information (and/or votes if that is working)\u00A0to one or more of the existing bugs in the bug tracker, complete with good information that demonstrates why it is such a bad problem.\n\u003C/p\u003E\n"},{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2016-05-11T15:11:39Z","Content":"\n\u003Cp\u003E\nAwesome thank you.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a KSP Github used by the Devs if not I assume just vote here on the forums?.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSorry for all the questions I have recently got KSP and WOW its so much fun ( I am terrble at it) but still its awesome :).\n\u003C/p\u003E\n\u003Cp\u003E\nReally cant thank the people that make mods for KSP enough awesome community\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-11T15:12:29Z\u0022 title=\u002205/11/2016 03:12  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 11, 2016\u003C/time\u003E by stk2008\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-11T15:15:56Z","Content":"\n\u003Cp\u003E\nThere is the official Squad bugtracker at \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nYou should be able to search and read bug reports without an account but you would\u00A0need to create one to be able to post or vote on anything. \u00A0If you do create an account then the best idea is to use the same name as your forum account as this makes it easier for people to work out who you are...\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-05-11T15:16:27Z","Content":"\n\u003Cp\u003E\nFixing memory use is bit more complex than \u0022oh right, let\u0027s change those 2 lines\u0022... They are aware of the stutter but this kind of issue is C O M P L E X. No need to pester them...\n\u003C/p\u003E\n"},{"CreatedByName":"Blacks","CreatedById":145137,"CreatedDateTime":"2016-05-11T15:41:54Z","Content":"\n\u003Cp\u003E\nwell i will add on this is not only about memory, in equation it need to be track more thing like cpu, gpu, graphic engine, what function it use \u0026amp; in what condition or how (see unity \u002B dx9,dx11, opengl), what version it use ... \u0026amp; i agree with sarbian is not a easy task to be done, but i agree with padishar to \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-12T12:22:51Z","Content":"\n\u003Cp\u003E\nI have just released version 1.0.0.3 that eliminates a couple of bits of garbage creation hidden in the UI code and moves various initialisers to Awake (I think it\u0027s only static ones that might cause\u00A0upset but I\u0027ve moved every reference member init to Awake to be sure).\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: Another quick update to 1.0.0.4 to fix the window dragging (and I\u0027ve actually updated the download link this time \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-12T14:10:57Z\u0022 title=\u002205/12/2016 02:10  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 12, 2016\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-15T21:10:08Z","Content":"\n\u003Cp\u003E\nAnother small update to 1.0.0.5, this time to add a simple allocation test function run on Mod-NumPadDivide.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/Gerry1135/MemGraph/blob/master/Graph.cs#L333-L417\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Gerry1135/MemGraph/blob/master/Graph.cs#L333-L417\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis basically allocates a specified number of blocks of a specified size controlled by the MemGraph\\PluginData\\test.cfg file\u00A0and reports which allocations result in what changes to the total of allocated memory. \u00A0This allows various deductions to be made about how the memory allocation works in Unity/Mono. \u00A0I will make a followup post later (well, probably tomorrow some time)\u00A0describing some of what I have deduced so far...\n\u003C/p\u003E\n"},{"CreatedByName":"Tig","CreatedById":103242,"CreatedDateTime":"2016-05-22T07:45:00Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0026amp;do=hovercard\u0022 data-mentionid=\u002297386\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0022 rel=\u0022\u0022\u003E@Padishar\u003C/a\u003E So I don\u0027t double post you...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139484-112-grumpycollector-101-stutter-what-stutter/\u0026amp;do=findComment\u0026amp;comment=2595367\u0022 rel=\u0022\u0022\u003Ehttp://forum.kerbalspaceprogram.com/index.php?/topic/139484-112-grumpycollector-101-stutter-what-stutter/\u0026amp;do=findComment\u0026amp;comment=2595367\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nRelated to a feature request for MemGraph, but I thought the primary gist of the post was better suited to the garbage collection thread.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-22T08:08:51Z\u0022 title=\u002205/22/2016 08:08  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 22, 2016\u003C/time\u003E by Tig\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-22T21:15:38Z","Content":"\n\u003Cp\u003E\nUpdated to 1.0.0.6. \u00A0Now includes a mechanism to increase the Mono heap headroom to reduce the frequency of garbage collections. \u00A0Just hit Mod-End to assign approx 1.5 GB of extra ram to the Mono heap...\n\u003C/p\u003E\n"},{"CreatedByName":"Tig","CreatedById":103242,"CreatedDateTime":"2016-05-27T07:30:52Z","Content":"\n\u003Cp\u003E\nHey \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0026amp;do=hovercard\u0022 data-mentionid=\u002297386\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/97386-padishar/\u0022 rel=\u0022\u0022\u003E@Padishar\u003C/a\u003E,\n\u003C/p\u003E\n\u003Cp\u003E\nThought I\u0027d move further testing of MemGraph to well, uhh, the MemGraph thread. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nBut to anyone interested in garbage collection in Kerbal/Unity/Mono and the steps taken to try and at least stem the bleeding, the Grumpycollector thread is a \u003Cstrong\u003Egoldmine \u003C/strong\u003Eof info, even though the mod itself is not useful for the average user, it helped point everyone in the right direction.\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/139484-112-grumpycollector-101-stutter-what-stutter/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo after actually playing the game for a while I thought I\u0027d report in on my experience.\u00A0 First, the game remains incredibly more playable, but I\u0027ve noticed a few I-wouldn\u0027t-call-problems, but I thought they\u0027d be of interest to you.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter a play session of about 3 hours or so - many launches, many landings, many scene changes - I checked in on MemGraph and GCMonitor.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nHWM is moving between ~3100-3850MB.\u00A0\n\u003Cul\u003E\u003Cli\u003E\nObviously quite a bit more than where I start out (hitting Mod-End 3 times and HWM ~2500-3000).\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nMy stutters still stay in the 55-60 second range, and my fps is locked at 60 - except of course when it dips on a stuttered frame.\n\u003Cul\u003E\u003Cli\u003E\nStuttered frames seem maybe a bit longer - I wouldn\u0027t be surprised if they were that\u0027s traditionally been the case as the heap grows\n\u003C/li\u003E\n\u003Cli\u003E\nThat said, same pattern as before, even if they are longer the relative increase in ms compared to the heap size is small\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nGCMonitor - Perhaps most interesting, my memory usage has climbed to 13.1GB, lol.\u00A0\n\u003Cul\u003E\u003Cli\u003E\nFor reference in my short testing sessions, my usage was about 6.8GB.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nWindows reports a working set of 10.6 and commit of 11.2\n\u003Cul\u003E\u003Cli\u003E\nAs I\u0027m typing this windows now reports 8.5/8.7, GCMonitor hasn\u0027t changed.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nLong scene transitions: Moving from the MC or the Lab back to the main screen sometimes takes longer than usual.\u00A0\n\u003Cul\u003E\u003Cli\u003E\nIn a few instances the typical windows program crash pops up, simply clicking \u0022wait for program to respond\u0022 actually works and Kerbal comes back a few moments later.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nThe problem is my favorite type: Non-repeatable intermittent...\u00A0 it does appear to get worse the longer I play.\u00A0 But, sometimes the transition is immediate even 2-3 hours in.\u00A0 Strange.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nSome exceptional memory usage spikes\n\u003Cul\u003E\u003Cli\u003E\nBrief moments where MemGraph reports 40-50MB/sec demands, see below\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nUnfortunately, I don\u0027t have hard data for you on frametimes.\u00A0\n\u003Cul\u003E\u003Cli\u003E\nI wasn\u0027t running fraps, I\u0027ve heard anecdotally that it can affect Kerbal\u0027s preformance, no idea if its true - but since I was playing for my own enjoyment I thought I\u0027d leave it off.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nIf Kerbal is running and I start up fraps, then Kerbal immediately crashes guaranteed.\u00A0 Don\u0027t know if that\u0027s common or an issue with just me, but in any event no precise data on frametimes for you.\u00A0 sorry.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cstrong\u003EBut I got a picture of MemGraph - looks pretty clockwork on the intervals still: \u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cimg class=\u0022ipsImage\u0022 src=\u0022https://i.imgur.com/MTDmRQA.jpg\u0022 alt=\u0022MTDmRQA.jpg\u0022\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nNote the scale of 64MB, yeah those are 40-50MB spikes.\u00A0 And the trend line is pretty clear; the memory demanded per second is rising with time, but each GC resets the \u0022clock\u0022 if you will.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there some reason for the positive slope in between the GCs?\u00A0 I guess what I\u0027m asking is: why isn\u0027t the trend between GCs flat?\u00A0 Some growing array/list that instead of getting appended to is being reallocated brand new every frame?\n\u003C/p\u003E\n\u003Cp\u003E\nJust seems unfortunate with the KB/s being a function of time, its turning the the total heap between GCs into a quadratic.\u00A0 ick.\n\u003C/p\u003E\n"},{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2016-05-27T08:29:40Z","Content":"\n\u003Cp\u003E\nThis is probably a stupid question but\n\u003C/p\u003E\n\u003Cp\u003E\nWhat is the Mod\u002BEnd key?\n\u003C/p\u003E\n\u003Cp\u003E\nI see End key on my keyboard but whats the Mod key on windows as I assume Mod key is for Linus?.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks again \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-27T08:30:23Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603428\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464334252\u0022 data-ipsquote-userid=\u0022103242\u0022 data-ipsquote-username=\u0022Tig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 minutes ago, Tig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo after actually playing the game for a while I thought I\u0027d report in on my experience.\u00A0 First, the game remains incredibly more playable, but I\u0027ve noticed a few I-wouldn\u0027t-call-problems, but I thought they\u0027d be of interest to you.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for more great feedback, very helpful. \u00A0I\u0027ll try to get a more detailed reply up in the next few hours, including the detailed description of how the memory allocation works\u00A0but, for now, I will say that most of the \u0022not-really-problems\u0022 are understandable consequences of how the Mono heap works.\n\u003C/p\u003E\n\u003Cp\u003E\nAs an example, yes, there is a reason for the positive slope between collections. \u00A0The actual rate of memory allocation is a lot more constant but the memory allocator works on 4 KB pages and it groups allocations of similar sizes together into the same 4KB pages. \u00A0E.g. if some code\u00A0allocates an object that is 120 bytes in size then this will be rounded up to 144\u00A0bytes and\u00A0allocated from a page that already contains other\u00A0allocations of 113-144\u00A0bytes but isn\u0027t totally used (due to the extra padding the allocator adds to each block, 25 such blocks can be allocated in each 4KB page). \u00A0Larger allocations\u00A0(anything over 2032 bytes, where\u00A0no more than\u00A0one block can fit in a 4KB page) are handled a little differently, simply using as many 4KB pages from the free page\u00A0list as are required.\n\u003C/p\u003E\n\u003Cp\u003E\nIf there isn\u0027t an existing page with empty space for the correct size range of block then the allocator will take a page that is currently not used at all and add it to the list of pages used for that block size range. \u00A0It\u0027s only when a page\u00A0is\u00A0added like this that the memory usage can be detected. \u00A0If there are no free pages then the collector runs to free up space,\u00A0either by freeing up a block in a page that holds the correct size range or by freeing up all the blocks in any page so the whole page gets returned to the free list and can then be assigned to a different block size range. \u00A0So, immediately after a collection, there will be lots of 4KB pages that have some free space in them which results in some of the memory demand being taken from already allocated pages and they\u00A0don\u0027t show up in the usage rate. \u00A0E.g. it could be possible for hundreds of 144 byte blocks to be allocated without needing\u00A0any new 4KB pages to be assigned to that size range. \u00A0Once all the free space in the already assigned pages are used up, a new page will be assigned for every 25 such blocks that are allocated and the reported allocation rate will be much closer to the \u0022real\u0022 rate.\n\u003C/p\u003E\n\u003Cp\u003E\nA couple of other observations:\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603428\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464334252\u0022 data-ipsquote-userid=\u0022103242\u0022 data-ipsquote-username=\u0022Tig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n58 minutes ago, Tig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAfter a play session of about 3 hours or so - many launches, many landings, many scene changes\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo much for the people that complain that the game is \u0022unplayable\u0022 (without qualifying it with \u0022for me\u0022)...\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603428\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464334252\u0022 data-ipsquote-userid=\u0022103242\u0022 data-ipsquote-username=\u0022Tig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, Tig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIn a few instances the typical windows program crash pops up, simply clicking \u0022wait for program to respond\u0022 actually works and Kerbal comes back a few moments later.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe \u0022not responding\u0022 dialog isn\u0027t really a \u0022crash\u0022 warning. \u00A0It simply tells the user that the program has not responded to a Windows message that it was sent, usually because it is busy doing something and isn\u0027t bothering to run the main message processing loop in the program. \u00A0Most programs that do\u00A0any kind of long calculation will do the same thing but often only when the user tries to interact with the program while it is busy (e.g. if you click on a busy window you will often trigger this dialog instantly because Windows sends the program a \u0022click\u0022 message but it doesn\u0027t respond to it immediately).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603428\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464334252\u0022 data-ipsquote-userid=\u0022103242\u0022 data-ipsquote-username=\u0022Tig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n49 minutes ago, Tig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nBrief moments where MemGraph reports 40-50MB/sec demands, see below\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI suspect these may be caused by the game auto-saving (though every minute seems a little frequent so it may be some other regular housekeeping task that KSP does).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603428\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464334252\u0022 data-ipsquote-userid=\u0022103242\u0022 data-ipsquote-username=\u0022Tig\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n50 minutes ago, Tig said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf Kerbal is running and I start up fraps, then Kerbal immediately crashes guaranteed.\u00A0 Don\u0027t know if that\u0027s common or an issue with just me, but in any event no precise data on frametimes for you.\u00A0 sorry.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot a problem, you\u0027ve been more than helpful. \u00A0I used to use fraps every time I played the game and I\u0027ve only ever seen this happen once though I\u0027ve hardly used fraps with KSP 1.1.\u00A0 I spent a considerable time trying to repeat it but I couldn\u0027t. \u00A0I switched from using fraps to using a mod to get better accuracy at low frame rates (fraps only displays integer values in its overlay and there\u0027s a lot of difference between 2 and 3 fps).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"UnanimousCoward","CreatedById":109698,"CreatedDateTime":"2016-05-27T09:54:43Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603471\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464337780\u0022 data-ipsquote-userid=\u0022162264\u0022 data-ipsquote-username=\u0022stk2008\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, stk2008 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis is probably a stupid question but\n\u003C/p\u003E\n\u003Cp\u003E\nWhat is the Mod\u002BEnd key?\n\u003C/p\u003E\n\u003Cp\u003E\nI see End key on my keyboard but whats the Mod key on windows as I assume Mod key is for Linus?.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks again \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOn Windows, \u0022Mod\u0022 is the Alt key. (On Linux, it\u0027s the right Shift key, and on Mac it\u0027s the Option key.)\n\u003C/p\u003E\n\u003Cp\u003E\nSo \u0022Mod\u002BEnd\u0022 means (on Windows) \u0022hold Alt and press End\u0022.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-05-27T09:57:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603471\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464337780\u0022 data-ipsquote-userid=\u0022162264\u0022 data-ipsquote-username=\u0022stk2008\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, stk2008 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat is the Mod\u002BEnd key?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMy apologies, I totally missed this earlier. \u00A0UnanimousCoward is totally correct...\n\u003C/p\u003E\n"},{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2016-05-27T10:21:40Z","Content":"\n\u003Cp\u003E\nAwesome thanks for the fast reply \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"p1t1o","CreatedById":74091,"CreatedDateTime":"2016-05-27T10:26:24Z","Content":"\n\u003Cp\u003E\nGarbage collection is probably a necessary evil - but why does the game have to freeze solid whilst garbage collection is done? Surely it is no slower or faster than any of the other processes that are occurring? I\u0027m assuming a lot of games have some kind of garbage collection process, why don\u0027t they stutter?\n\u003C/p\u003E\n"},{"CreatedByName":"Broco","CreatedById":4320,"CreatedDateTime":"2016-05-27T11:14:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222603555\u0022 data-ipsquote-contentid=\u0022139128\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221464344784\u0022 data-ipsquote-userid=\u002274091\u0022 data-ipsquote-username=\u0022p1t1o\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n35 minutes ago, p1t1o said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGarbage collection is probably a necessary evil - but why does the game have to freeze solid whilst garbage collection is done? Surely it is no slower or faster than any of the other processes that are occurring? I\u0027m assuming a lot of games have some kind of garbage collection process, why don\u0027t they stutter?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThey either use more advanced Garbage Collectors (Unity\u0027s is pretty old), they create less garbage, they use call the GC manually in certain events (example Skyrim: When you get in or out of a cave, aka loading screen).\n\u003C/p\u003E\n"}]}