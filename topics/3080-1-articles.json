{"TopicId":3080,"ForumId":15,"TopicTitle":"Kerbal Image Converter","CreatedByName":"anti-sanity","CreatedById":9926,"CreatedDateTime":"2011-10-19T20:21:43Z","PageNum":1,"Articles":[{"CreatedByName":"anti-sanity","CreatedById":9926,"CreatedDateTime":"2011-10-19T20:21:43Z","Content":"\n\u003Cp\u003Ehello\u003C/p\u003E\u003Cp\u003Ei figured i would make it in its own thread instead of flooding the other one with any more bug reports.\u003C/p\u003E\u003Cp\u003Efor those not familiar with the program it will batch convert all the 24 bit PNG files in the parts folder to 32 bit format thus removing the red texture bug from your parts.\u003C/p\u003E\u003Cp\u003Ethis is a link to the newest version of the program.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/downloads/hollow87/Kerbal-Image-Converter/KerbalImageConveter.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/downloads/hollow87/Kerbal-Image-Converter/KerbalImageConveter.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Eas before you have to do is place the EXE in your KSP folder and run it.\u003C/p\u003E\u003Cp\u003Ethe code has now been optimized some more.\u003C/p\u003E\u003Cp\u003Eas for the error well... to be honest we have no idea on what the cause is and i have tried every thing to reproduce it and could not. \u003C/p\u003E\u003Cp\u003Ehow ever we have added some code that will tell us what part it is on when the error occurs in an attempt to track down the problem.\u003C/p\u003E\u003Cp\u003Eso when the error occurs please post it so we can have a look at it.\u003C/p\u003E\n"},{"CreatedByName":"bobsmit","CreatedById":8944,"CreatedDateTime":"2011-10-19T20:23:48Z","Content":"\n\u003Cp\u003EOh you already made a thread, this is really awesome. Saved me a ton of time.\u003C/p\u003E\n"},{"CreatedByName":"Alchemist","CreatedById":8825,"CreatedDateTime":"2011-11-01T06:59:43Z","Content":"\n\u003Cp\u003EAbout the error - check \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=2161.0\u0022 rel=\u0022external nofollow\u0022\u003EDERP\u003C/a\u003E pack. When I tried the converter, it found DERP habitation module (its texture already is 32 bit) and returned out of memory error. Seems that error is caused by some strange files, that really aren\\\u0027t correct images.\u003C/p\u003E\u003Cp\u003EBecause there are 2 png files in the folder\u003C/p\u003E\u003Cp\u003E\u003Cem\u003ENewHabitation_tex.png\u003C/em\u003E - 32 bit texture\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E._NewHabitation_tex.png\u003C/em\u003E - maybe something like some graphics redactor temporary file. Can\\\u0027t be recognized by graphic redactors/viewers and causes the converter\\\u0027s error.\u003C/p\u003E\n"},{"CreatedByName":"Rico88","CreatedById":3712,"CreatedDateTime":"2011-11-06T13:27:30Z","Content":"\n\u003Cp\u003ECould you reupload the file, please? The link doesn\\\u0027t seem to work.\u003C/p\u003E\n"},{"CreatedByName":"Thunderbird","CreatedById":10459,"CreatedDateTime":"2011-11-17T00:07:09Z","Content":"\n\u003Cp\u003Ebump for awesomeness\u003C/p\u003E\n"},{"CreatedByName":"MassiveEffectz","CreatedById":8742,"CreatedDateTime":"2011-12-03T22:01:14Z","Content":"\n\u003Cp\u003EQuick solution-\u003C/p\u003E\u003Cp\u003ECut \u002B past all the parts with the name \u0027Parachute\u0027 some place else\u003C/p\u003E\u003Cp\u003Ere run the thing and it should work.\u003C/p\u003E\u003Cp\u003EIt seems it cant re convert any item with parachutes.\u003C/p\u003E\n"},{"CreatedByName":"Eagleye243","CreatedById":13898,"CreatedDateTime":"2012-01-15T08:20:17Z","Content":"\n\u003Cp\u003EI tried putting it in the folder (where it says parts, ships, KSP, etc.) but that didn\\\u0027t work, then i opened the KSP application in 7zip and copying it in (with the image converter also in 7zip) but that didn\\\u0027t work either.\u003C/p\u003E\u003Cp\u003EIn the folder it seems to run, but it gets an error and stops working and doesn\\\u0027t convert anything.\u003C/p\u003E\u003Cp\u003ESo... er.... Help?\u003C/p\u003E\n"},{"CreatedByName":"Willbl3pic","CreatedById":12468,"CreatedDateTime":"2012-01-16T17:54:40Z","Content":"\n\u003Cp\u003EMac version? M ships are looking weird. :-\\\u003C/p\u003E\n"},{"CreatedByName":"Eagleye243","CreatedById":13898,"CreatedDateTime":"2012-01-16T23:13:14Z","Content":"\n\u003Cp\u003EI think I understand now, we\\\u0027re supposed to open up the .exe KSP files and copy the files in from the image converter. I tried that, says \u0027Operation not supported.\u0027 So now I\\\u0027m really confused on what to do ???\u003C/p\u003E\n"},{"CreatedByName":"Eagleye243","CreatedById":13898,"CreatedDateTime":"2012-01-17T01:52:22Z","Content":"\n\u003Cp\u003EI\\\u0027ve fixed it ;D\u003C/p\u003E\n"},{"CreatedByName":"icyliquid","CreatedById":15010,"CreatedDateTime":"2012-01-21T23:09:28Z","Content":"\n\u003Cp\u003EI\\\u0027m on OS X and couldn\\\u0027t find a fast way to convert all my PNGs to 32 bit.\u003C/p\u003E\u003Cp\u003ESo I wrote this quick PHP script. It should actually work in windows too, but who knows (not tested)?\u003C/p\u003E\u003Cp\u003EHope it works for you guys \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EInstructions\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E\u003Cbr\u003E[li]Save this code to a file called \u003Cem\u003Econvert.php\u003C/em\u003E. I suggest putting it in your home folder: /Users/yourusername/[/li]\u003Cbr\u003E[li]Open a terminal window and navigate to the folder containing \u003Cstrong\u003Econvert.php\u003C/strong\u003E[/li]\u003Cbr\u003E[li]Run convert.php with the path to your KSP/Parts/ folder as the argument[/li]\u003Cbr\u003E[li]Done![/li]\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EExample\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/3TWCT.png\u0022 alt=\u00223TWCT.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ECode\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E#!/usr/bin/php\u003Cbr\u003E\u0026lt;?php\u003Cbr\u003E\u003Cbr\u003E// Folder is first argument\u003Cbr\u003E$Folder = $argv[1];\u003Cbr\u003Eif (!file_exists($Folder) || !is_dir($Folder))\u003Cbr\u003E  exit(1);\u003Cbr\u003E\u003Cbr\u003E$ConvertFiles = array();\u003Cbr\u003EFindPNGs($Folder, $ConvertFiles);\u003Cbr\u003E\u003Cbr\u003Eforeach ($ConvertFiles as $ConvertFile)\u003Cbr\u003E  ConvertPNG($ConvertFile);\u003Cbr\u003E\u003Cbr\u003Efunction FindPNGs($Folder, \u0026amp;$ConvertFiles) {\u003Cbr\u003E  $Files = scandir($Folder);\u003Cbr\u003E  foreach ($Files as $File) {\u003Cbr\u003E   if (in_array($File, array(\\\u0027.\\\u0027,\\\u0027..\\\u0027))) continue;\u003Cbr\u003E   $RealFile = CombinePaths(array($Folder, $File));\u003Cbr\u003E\u003Cbr\u003E   if (is_dir($RealFile)) {\u003Cbr\u003E     FindPNGs($RealFile, $ConvertFiles);\u003Cbr\u003E     continue;\u003Cbr\u003E   }\u003Cbr\u003E\u003Cbr\u003E   if (substr($File, -3) == \\\u0027png\\\u0027) {\u003Cbr\u003E     $ConvertFiles[] = $RealFile;\u003Cbr\u003E   }\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Efunction ConvertPNG($PNGFile) {\u003Cbr\u003E  echo \u0027 \u0026gt; converting {$PNGFile}\\n\u0027;\u003Cbr\u003E  $PngImage = imagecreatefrompng($PNGFile);\u003Cbr\u003E  imagealphablending($PngImage, FALSE);\u003Cbr\u003E  imagesavealpha($PngImage, TRUE);\u003Cbr\u003E  imagepng($PngImage, $PNGFile);\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Efunction CombinePaths($Paths, $Delimiter = \\\u0027/\\\u0027) {\u003Cbr\u003E  if (is_array($Paths)) {\u003Cbr\u003E   $MungedPath = implode($Delimiter, $Paths);\u003Cbr\u003E   $MungedPath = str_replace(array($Delimiter.$Delimiter.$Delimiter, $Delimiter.$Delimiter), array($Delimiter, $Delimiter), $MungedPath);\u003Cbr\u003E   return str_replace(array(\\\u0027http:/\\\u0027, \\\u0027https:/\\\u0027), array(\\\u0027[url]http://\\\u0027[/url], \\\u0027[url]https://\\\u0027[/url]), $MungedPath);\u003Cbr\u003E  } else {\u003Cbr\u003E   return $Paths;\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E?\u0026gt;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Adam Smeeh","CreatedById":12624,"CreatedDateTime":"2012-01-25T00:33:21Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003ESOLUTION:\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003E\u003Cspan style=\u0022color:#0000FF;\u0022\u003ECalling all Kerbalnauts who are having difficulty in running Anti-Sanity\\\u0027s excellent \u0027Kerbal Image Converter\u0027.\u003C/span\u003E\u003C/em\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI believe the \u0027Kerbal Image Converter\u0027 requires that you have \u0027MS.NET Framework 4\u0027 already installed on your PC for it to successfully run.\u003C/p\u003E\u003Cp\u003EHere\\\u0027s the background as I understand it...\u003C/p\u003E\u003Cp\u003EThe red tint on mesh skins is the effect of the older 24bit PNG file format (Win XP) which when saving, would automatically remove the Alpha channel (transparent background) if it was empty. KSP expects 32bit PNG files which \u003Cstrong\u003E\u003Cem\u003Edo\u003C/em\u003E\u003C/strong\u003E include an Alpha channel. So, when KSP encounters a 24bit PNG with no Alpha channel, it ends up displaying a default semi-transparent red over all the channels.\u003C/p\u003E\u003Cp\u003E(i.e. 8bit for Red \u002B 8bit for Green \u002B 8bit for Blue channels = 24bit \u002B 8bit for Alpha = 32bit)\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EUse the \\\u0027Kerbal Image Converter\\\u0027 to batch convert *ALL* the 24bit PNG files in the \\\u0027Parts\\\u0027 folder to 32bit format in one simple step!\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u00E2\u20AC\u00A2 Make sure you have already installed \u0027MS.NET Framework 4\u0027 or else , the \u0027Kerbal Image Converter\u0027 will not run successfully.\u003C/p\u003E\u003Cp\u003E\u00E2\u20AC\u00A2 If you don\\\u0027t have \u0027MS.NET Framework 4\u0027 already installed, download and install it now.\u003C/p\u003E\u003Cp\u003E Here\\\u0027s a link to Microsoft site where you can download it:\u003C/p\u003E\u003Cp\u003E \u003Ca href=\u0022http://www.microsoft.com/download/en/details.aspx?id=17718\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.microsoft.com/download/en/details.aspx?id=17718\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u00E2\u20AC\u00A2 Place the \u0027KerbalImageConverter.exe\u0027 file in your KSP folder.\u003C/p\u003E\u003Cp\u003E (Where your \u0027KSP.exe\u0027 file is located.)\u003C/p\u003E\u003Cp\u003E *NOT* in the \\\u0027Parts\\\u0027 folder.\u003C/p\u003E\u003Cp\u003E\u00E2\u20AC\u00A2 Now run the \u0027KerbalImageConverter.exe\u0027 file and it will automatically scan all the files in your \\\u0027Parts\\\u0027 folder and\u003C/p\u003E\u003Cp\u003E convert those pesky 24bit files (no alpha) to the desired 32bit format (with alpha).\u003C/p\u003E\u003Cp\u003ENow you can sit back and relax, knowing all your \\\u0027parts\\\u0027 are no longer... red... ahem!\u003C/p\u003E\u003Cp\u003EJob done ;D\u003C/p\u003E\n"}]}