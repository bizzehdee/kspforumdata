{"TopicId":75938,"ForumId":36,"TopicTitle":"[1.0.x] [V1.9f] Kerbal Foundries wheels, anti-grav repulsors and tracks","CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-06-25T17:24:04Z","PageNum":31,"Articles":[{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2014-08-30T11:50:22Z","Content":"\n\u003Cp\u003ELooking fwd to the update, don\u0027t forget the tweakscale if the model\u0027s suitable, \u003C/p\u003E\u003Cp\u003EAnd as an infobite to those less curious or much younger than I, way back before RL marine propellers were in existence and paddle wheels were the new big thing the commercial first trial between a paddle wheeler and a prop driven vessel featured a design very similar to the helical drive unit, although it was shorter the function was identical. and by historical record the screw won hands down, spelling the end of large paddle wheelers and of course changing the world.\u003C/p\u003E\u003Cp\u003EAS marine stuff is my thing, would you mind if I attacked your trial version to see if an actual propeller is doable.\u003C/p\u003E\u003Cp\u003Eedit dont know if its relevant or even useful the FS (yes again) prop rotator module has a facility to swap the model for a translucent disc which replaces the prop and simulates motion blur very successfully, could this be adapted perhaps to achieve a similar result ?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-30T11:54:57Z\u0022 title=\u002208/30/2014 11:54  AM\u0022 data-short=\u00229 yr\u0022\u003EAugust 30, 2014\u003C/time\u003E by SpannerMonkey(smce)\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T12:21:26Z","Content":"\n\u003Cp\u003EMate, you\u0027re always welcome. Feel free.\u003C/p\u003E\u003Cp\u003EIf you want to play with dedicated propellers, it might be best if I just make a dedicated module, though. Actually, gives me an idea to make it all more modular. I\u0027ll be in touch, and thanks for the tip on the blurred model.\u003C/p\u003E\n"},{"CreatedByName":"Vrana","CreatedById":79915,"CreatedDateTime":"2014-08-30T13:58:53Z","Content":"\n\u003Cp\u003ESharing a little something i made with your wheels.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/sEPY5\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cp\u003EIve built quite a few similar rover-bases but this one takes the cake due to the wheels. Capable of moving unattended and at x4 physical warp at 20ish m/s or up to 40m/s attended and no physical warp on the moon... Mind you there is plenty of stuff to break on the bottom side and it never touches the ground(unattended drive). This makes it the fastest mobile base i made so far.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T14:19:12Z","Content":"\n\u003Cp\u003ELovely work, thanks for sharing :)Thats a hell of a pace you managed to get up on Mun with wheels. Where are the body parts from?\u003C/p\u003E\u003Cp\u003EAnybody tested in higher gravity? I admit, I\u0027ve totally neglected that thus far.\u003C/p\u003E\n"},{"CreatedByName":"Vrana","CreatedById":79915,"CreatedDateTime":"2014-08-30T16:46:12Z","Content":"\n\u003Cp\u003EHmm... The rover itself is a mish mash of parts from many mods. \u003C/p\u003E\u003Cp\u003EFront to back main axis:\u003C/p\u003E\u003Cp\u003ELLL command pod,\u003C/p\u003E\u003Cp\u003ESTX fuel tank,\u003C/p\u003E\u003Cp\u003EStock Lab,\u003C/p\u003E\u003Cp\u003ESTX crew pod,\u003C/p\u003E\u003Cp\u003Eanother STX crew pod,\u003C/p\u003E\u003Cp\u003EKW fuel tank,\u003C/p\u003E\u003Cp\u003EKarbonite conversion thingy,\u003C/p\u003E\u003Cp\u003EStock large docking.\u003C/p\u003E\u003Cp\u003EWheels are mounted on LLL structural parts, there are also radial Karbonite drills and LLL RTGs.\u003C/p\u003E\u003Cp\u003EUpper deck is B9 plates, solar panels are mounted on Infernal robotics Rework Extendatrons, and the radar on top of it is LLL.\u003C/p\u003E\u003Cp\u003EThere is a bunch of other stuff scattered all over.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-30T18:29:03Z\u0022 title=\u002208/30/2014 06:29  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 30, 2014\u003C/time\u003E by Vrana\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Wosser1","CreatedById":118599,"CreatedDateTime":"2014-08-30T18:18:16Z","Content":"\n\u003Cp\u003ERelated to the disappearing wheels:\u003C/p\u003E\u003Cp\u003EWhen putting 6 large wheels around the center, it seems the code to check steering directions or similar is putting out the following:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[Error]: Invalid parameter because it was infinity or nan.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ECausing the wheels not to be loaded. After some stuttering the code stops running and the suspension gets initialised.\u003C/p\u003E\u003Cp\u003EThe wheels still aren\u0027t visible.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T18:42:48Z","Content":"\n\u003Cp\u003EThanks, some cool stuff in there.\u003C/p\u003E\u003Cp\u003EWosser1, would you mind trying an updated plugin version for me and passing some logs back? Shouldn\u0027t happen with 1.6d, as I put some code in to check for infinity in the steering loop and default to zero, so interested to find what\u0027s going on there. Thanks for the info.\u003C/p\u003E\u003Cp\u003EAlso, could you post a screen grab of your design please?\u003C/p\u003E\n"},{"CreatedByName":"ratchet freak","CreatedById":119895,"CreatedDateTime":"2014-08-30T20:08:40Z","Content":"\n\u003Cp\u003EFor the ackerman correction would it be possible to model the center of turn directly and then just point the axles of the wheels to it? \u003C/p\u003E\u003Cp\u003ESeems to be more straightforward than trying to derive angles.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T21:01:06Z","Content":"\n\u003Cp\u003EAn entirely sensible question! I think possibly yes. Zodius and I have discussed at length but I\u0027ve been so busy with other things I\u0027ve not really put to much time into it. I came to the conclusion that however you look at it, getting a rock solid handle on where the wheels are in relation to each other is vital to be able to run any kind of calculation, and that does seem to have been the challenging bit! It sounds like you\u0027ve got a decent understanding, so I\u0027d welcome some input if you\u0027ve got some.\u003C/p\u003E\u003Cp\u003EI\u0027m currently completely overhauling my code to make it more flexible and completing the bits I need to to finally ditch the stock modules from the wheels. The tracks run nothing stock and the steering is actually harder to do anything with when you\u0027re pulling transforms that have been rotated by stock modules. It\u0027s about time I simplified and took complete control of everything - it should make the more advanced features far easier to handle. I\u0027ve Learned a lot since I started!\u003C/p\u003E\n"},{"CreatedByName":"ratchet freak","CreatedById":119895,"CreatedDateTime":"2014-08-30T21:31:30Z","Content":"\n\u003Cp\u003EThe key with my idea is that you need to have a single point all wheels orient themselves with and you have the attachment of the wheel and that point in the same frame of reference. This will mean each wheel can be looked at separately.\u003C/p\u003E\u003Cp\u003EThen using a LookAt transform you can grab a very good rotation matrix by having the \u0022towards\u0022 vector in the direction of the steering axis (around which the wheel rotates to steer) and the \u0022up\u0022 vector towards (or away from) the steering point, the new up will become the axle of the wheel. \u003C/p\u003E\u003Cp\u003ENo need for a single trig function \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"ZodiusInfuser","CreatedById":76163,"CreatedDateTime":"2014-08-30T21:54:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ratchet freak\u0022 data-cite=\u0022ratchet freak\u0022\u003E\u003Cdiv\u003EThe key with my idea is that you need to have a single point all wheels orient themselves with and you have the attachment of the wheel and that point in the same frame of reference. This will mean each wheel can be looked at separately.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI too came to this conclusion. The rotation centroid can be calculated based on the user inputs, be it forward/backward and turn, or full 2D motion inputs. I wrote a whole document with figures and sent it to lo-fi some time ago \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E. Was actually derived from my more complex Hexapod walking system I did for a personal project.\u003C/p\u003E\u003Cp\u003EHaving all wheels calculate together does allow for some extra abilities though, mainly normalising the vehicles speed based on the furthest wheel, or limiting how close the rotation centroid is allowed to be based on wheel turn limits. Normalisation can be avoided by assuming wheels on the arc that intersects the CoM run at 100% speed, those inside run slower and those outside run faster. It is certainly a needed feature for vehicles such as this to work correctly (which is my goal and the reason I\u0027ve been in contact with lo-fi).\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://www.pecktiongchoon.com/wp/wp-content/uploads/ptc-modular-trailer-05.jpg\u0022 alt=\u0022ptc-modular-trailer-05.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd don\u0027t get me started on how this can be applied to omni/mecanum wheels \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-30T21:59:22Z\u0022 title=\u002208/30/2014 09:59  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 30, 2014\u003C/time\u003E by ZodiusInfuser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Wosser1","CreatedById":118599,"CreatedDateTime":"2014-08-30T22:14:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003EWosser1, would you mind trying an updated plugin version for me and passing some logs back? Shouldn\u0027t happen with 1.6d, as I put some code in to check for infinity in the steering loop and default to zero, so interested to find what\u0027s going on there. Thanks for the info.\u003Cp\u003EAlso, could you post a screen grab of your design please?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENever mind, I thought I already updated but apparently not. It\u0027s solved in 1.6d.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/ebE9v6z.png?1\u0022 alt=\u0022ebE9v6z.png?1\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T22:14:52Z","Content":"\n\u003Cp\u003EAh, got ya. I did consider that, though I\u0027m planning to use the steerangle property of the wheelcollider rather than rotating it in a transform like the stock module does. May have to be some trig used after all.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T22:17:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wosser1\u0022 data-cite=\u0022Wosser1\u0022\u003E\u003Cdiv\u003ENever mind, I thought I already updated but apparently not. It\u0027s solved in 1.6d.\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/ebE9v6z.png?1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/ebE9v6z.png?1\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, I did wonder. Thanks, that\u0027s good to know. Next release will print the version number to the log when a part is placed, it should help identify.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T22:22:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wosser1\u0022 data-cite=\u0022Wosser1\u0022\u003E\u003Cdiv\u003ENever mind, I thought I already updated but apparently not. It\u0027s solved in 1.6d.\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/ebE9v6z.png?1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/ebE9v6z.png?1\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ZodiusInfuser\u0022 data-cite=\u0022ZodiusInfuser\u0022\u003E\u003Cdiv\u003EI too came to this conclusion. The rotation centroid can be calculated based on the user inputs, be it forward/backward and turn, or full 2D motion inputs. I wrote a whole document with figures and sent it to lo-fi some time ago \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E. Was actually derived from my more complex Hexapod walking system I did for a personal project.\u003Cp\u003EHaving all wheels calculate together does allow for some extra abilities though, mainly normalising the vehicles speed based on the furthest wheel, or limiting how close the rotation centroid is allowed to be based on wheel turn limits. Normalisation can be avoided by assuming wheels on the arc that intersects the CoM run at 100% speed, those inside run slower and those outside run faster. It is certainly a needed feature for vehicles such as this to work correctly (which is my goal and the reason I\u0027ve been in contact with lo-fi).\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.pecktiongchoon.com/wp/wp-content/uploads/ptc-modular-trailer-05.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.pecktiongchoon.com/wp/wp-content/uploads/ptc-modular-trailer-05.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnd don\u0027t get me started on how this can be applied to omni/mecanum wheels \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, another good reason to ditch the stock module: Complete control over motor torque. I\u0027ll be in touch again after my re-write, I should have everything in place to get this working correctly after that.\u003C/p\u003E\n"},{"CreatedByName":"ratchet freak","CreatedById":119895,"CreatedDateTime":"2014-08-30T22:25:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ZodiusInfuser\u0022 data-cite=\u0022ZodiusInfuser\u0022\u003E\u003Cdiv\u003EI too came to this conclusion. The rotation centroid can be calculated based on the user inputs, be it forward/backward and turn, or full 2D motion inputs. I wrote a whole document with figures and sent it to lo-fi some time ago \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E. Was actually derived from my more complex Hexapod walking system I did for a personal project.\u003Cp\u003EHaving all wheels calculate together does allow for some extra abilities though, mainly normalising the vehicles speed based on the furthest wheel, or limiting how close the rotation centroid is allowed to be based on wheel turn limits. Normalisation can be avoided by assuming wheels on the arc that intersects the CoM run at 100% speed, those inside run slower and those outside run faster. It is certainly a needed feature for vehicles such as this to work correctly (which is my goal and the reason I\u0027ve been in contact with lo-fi).\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.pecktiongchoon.com/wp/wp-content/uploads/ptc-modular-trailer-05.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.pecktiongchoon.com/wp/wp-content/uploads/ptc-modular-trailer-05.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnd don\u0027t get me started on how this can be applied to omni/mecanum wheels \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can set cones, to limit where the centroid will be allowed to be, \u003C/p\u003E\u003Cp\u003EAnd the speed difference is the same factor of distance to the centroid; if the inside wheel is D1 from the centroid and the outside is D2 then the speed of the inside wheel is D1/D2 times the speed of the outside wheel\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T22:42:59Z","Content":"\n\u003Cp\u003EI think we\u0027ll be able to figure this out between us \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EDid someone tweet/feature/redit or otherwise post something about the mod, btw? Downloads have jumped up sharply over the last few days!\u003C/p\u003E\n"},{"CreatedByName":"ZodiusInfuser","CreatedById":76163,"CreatedDateTime":"2014-08-30T22:48:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003EYes, another good reason to ditch the stock module: Complete control over motor torque. I\u0027ll be in touch again after my re-write, I should have everything in place to get this working correctly after that.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYea, I thought about making my wheels use the stock module, just to get them out there but I can\u0027t do it, knowing a much better system is possible.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ratchet freak\u0022 data-cite=\u0022ratchet freak\u0022\u003E\u003Cdiv\u003EYou can set cones, to limit where the centroid will be allowed to be,\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy understanding of the problem is that the centroid is always along a line out from the center of the craft that is perpendicular to the direction of travel, with it\u0027s distance being related to the amount of turning wanted. With that you\u0027d limit the distance between center and centroid to that determined by the cone intersection. The issue is, one wheel may be at an odd angle or have limited range, so you need to find the maximum distance each of these independent cone calculations return before you can actually place the final centroid. Time to dig out my images (lo-fi\u0027s seen it before \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E )\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://www.cubbyusercontent.com/pl/SteeringLimits.png/_070255e2bc524d77b2debbc72c410c0f\u0022 alt=\u0022_070255e2bc524d77b2debbc72c410c0f\u0022\u003E\u003C/p\u003E\u003Cp\u003EIn the above you can see that the wheels to the right cannot turn to face the centroid, so it needs to be positioned to align with their cones. This means you need to know the worst case cone, by iterating through all the wheels. I\u0027d love it if there was a solution that avoided that, but I can\u0027t think of one at the moment.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EAnd the speed difference is the same factor of distance to the centroid; if the inside wheel is D1 from the centroid and the outside is D2 then the speed of the inside wheel is D1/D2 times the speed of the outside wheel\u003C/div\u003E\u003C/blockquote\u003EDoesn\u0027t that mean the inside wheel needs to know D2, which is a parameter of the outer wheel? Yes it could iterate though and find it, but I fear the performance impact if every wheel did that independent of each other. Also bare in mind that the centroid position would be dynamic, so you can\u0027t cache the value of D2 in case the user inputs change. Also I\u0027m coming at this from the perspective of Infernal Robotics, which would allow for the wheel positions to dynamically change too.\u003Cp\u003EEdit:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022lo-fi\u0022 data-cite=\u0022lo-fi\u0022\u003E\u003Cdiv\u003EI think we\u0027ll be able to figure this out between us \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m sure we will \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. It would be great if there was just one module for wheels that combined all this functionality. Not sure how tracks fit into the mix though, maybe treated like omni wheels.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-30T22:51:49Z\u0022 title=\u002208/30/2014 10:51  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 30, 2014\u003C/time\u003E by ZodiusInfuser\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Wosser1","CreatedById":118599,"CreatedDateTime":"2014-08-30T23:15:23Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EOther wheels you could make could be similar to the \u003Ca href=\u0022http://img195.imageshack.us/img195/5861/me1mako.jpg\u0022 rel=\u0022external nofollow\u0022\u003EMAKO\u003C/a\u003E from Mass Effect (like your large wheels, but with higher suspension - still very similar though).\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/24677-(0-23)-Wayland-Corp-Development-and-released-download-Thread-(new-parts)\u0022 rel=\u0022external nofollow\u0022\u003EWayland Corp\u003C/a\u003E also had some wheels, capable of going into VTOL mode (acting like repulsors) but those were quite experimental.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EAnother idea: surface attachable wheels with another attachment point on the other side to allow them to be in-line with other stuff, like \u003Ca href=\u0022http://www.turbosquid.com/3d-models/futuristic-army-vehicle-lwo/423017\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E:\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/7gxlAUl.jpg?1\u0022 alt=\u00227gxlAUl.jpg?1\u0022\u003E\u003C/p\u003E\u003Cp\u003EAlso the Anti-grav repulsors remind me of the \u003Ca href=\u0022http://masseffect.wikia.com/wiki/M-44_Hammerhead\u0022 rel=\u0022external nofollow\u0022\u003EM-44 Hammerhead\u003C/a\u003E also from Mass Effect, maybe the inspiration?\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://img1.wikia.nocookie.net/__cb20100413010019/masseffect/images/f/f0/M44Hammerhead.jpg\u0022 alt=\u0022M44Hammerhead.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EAs for tracks, I noticed the similarities with \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/35147-Caterpillar-Tracks-NOW-OPEN-SOURCE-ALL-FILES-OPEN-TO-PUBLIC\u0022 rel=\u0022external nofollow\u0022\u003ECaterpillar Tracks\u003C/a\u003E, after looking in to it, it\u0027s not a coincidence (you had to start somewhere).\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EWhen you fine-tune the repulsors to go over water, you could make an undercarriage of repulsors with a surrounding skirt (without a colliding mesh) to resemble a hovercraft.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EAnother track idea: with the attachment point on the axis, so the suspension would turn the whole track with the axis as center (if you know what I mean).\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/dWDH0nw.jpg?1\u0022 alt=\u0022dWDH0nw.jpg?1\u0022\u003E\u003C/p\u003E\u003Cp\u003E(\u003Ca href=\u0022http://fc09.deviantart.net/fs26/i/2008/172/1/7/SOVIET_COMBAT_VEHICLE_by_CUTANGUS.jpg\u0022 rel=\u0022external nofollow\u0022\u003Elarger image\u003C/a\u003E)\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T23:39:17Z","Content":"\n\u003Cp\u003EThe tracks don\u0027t really do anything vastly different to wheels tbh. I coded my plugin to be as broad as possible, which is why it took me only a few hours to get the screw drive working using it. I realised yesterday I could further modularise, which is what I\u0027m in the middle of now. I have a master module that deals with placement and direction calculation, then you can bolt other modules to it as you wish for specific functions. The tracks now use that master module, plus another to deal with user input and communication to the wheelcolliders, then a small module for the wheels rotation and suspension movement and finally a tiny module for the track texture rotation. The screw drive you can ignore the texture rotation as it\u0027s not needed, and treat the helical part as a single track wheel, the mesh of which is simply mounted longitudinally rather than transverse.\u003C/p\u003E\u003Cp\u003EYou really don\u0027t want to have a master calculation, just let each wheel figure out its own rotational data based on user input and its location fed into the algorithm. You\u0027ll drive yourself completely insane if you try to have some kind of controller module that tracks all that kind of stuff and communicates down the the wheels! Simple arithmetic happens so fast on modern computers you might as well not worry about it. I almost have it working with a bit of trig after half an hour in Excel, though I stopped because I couldn\u0027t control the torque or the wheel rotation exactly how I wanted alongside the stock module. This is all about to change \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ETo elaborate on my \u0027here be dragons\u0027 comment earlier: IMO the centroid method starts to look a bit flaky as soon as you start talking KSP and its sandbox nature. It\u0027s fine on a vehicle where you\u0027ve got control of how all the wheels are placed, but what happens when you\u0027ve got a couple of wheels mounted higher or lower than the others? Mixed wheel types? At a funny angle? The bloody root part mounted fifteen degrees off to the right and upside down? It\u0027s an absolute minefield, I have discovered! That\u0027s not to say it won\u0027t work, but there are enough considerations that make me think twice about whether I can make it robust enough.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-08-30T23:45:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Wosser1\u0022 data-cite=\u0022Wosser1\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EOther wheels you could make could be similar to the \u003Ca href=\u0022http://img195.imageshack.us/img195/5861/me1mako.jpg\u0022 rel=\u0022external nofollow\u0022\u003EMAKO\u003C/a\u003E from Mass Effect (like your large wheels, but with higher suspension - still very similar though).\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/24677-(0-23)-Wayland-Corp-Development-and-released-download-Thread-(new-parts)\u0022 rel=\u0022external nofollow\u0022\u003EWayland Corp\u003C/a\u003E also had some wheels, capable of going into VTOL mode (acting like repulsors) but those were quite experimental.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EAnother idea: surface attachable wheels with another attachment point on the other side to allow them to be in-line with other stuff, like \u003Ca href=\u0022http://www.turbosquid.com/3d-models/futuristic-army-vehicle-lwo/423017\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E:\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/7gxlAUl.jpg?1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/7gxlAUl.jpg?1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAlso the Anti-grav repulsors remind me of the \u003Ca href=\u0022http://masseffect.wikia.com/wiki/M-44_Hammerhead\u0022 rel=\u0022external nofollow\u0022\u003EM-44 Hammerhead\u003C/a\u003E also from Mass Effect, maybe the inspiration?\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://img1.wikia.nocookie.net/__cb20100413010019/masseffect/images/f/f0/M44Hammerhead.jpg\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://img1.wikia.nocookie.net/__cb20100413010019/masseffect/images/f/f0/M44Hammerhead.jpg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EAs for tracks, I noticed the similarities with \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/35147-Caterpillar-Tracks-NOW-OPEN-SOURCE-ALL-FILES-OPEN-TO-PUBLIC\u0022 rel=\u0022external nofollow\u0022\u003ECaterpillar Tracks\u003C/a\u003E, after looking in to it, it\u0027s not a coincidence (you had to start somewhere).\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EWhen you fine-tune the repulsors to go over water, you could make an undercarriage of repulsors with a surrounding skirt (without a colliding mesh) to resemble a hovercraft.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EAnother track idea: with the attachment point on the axis, so the suspension would turn the whole track with the axis as center (if you know what I mean).\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/dWDH0nw.jpg?1\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/dWDH0nw.jpg?1\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E(\u003Ca href=\u0022http://fc09.deviantart.net/fs26/i/2008/172/1/7/SOVIET_COMBAT_VEHICLE_by_CUTANGUS.jpg\u0022 rel=\u0022external nofollow\u0022\u003Elarger image\u003C/a\u003E)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGreat minds think alike, and all that! Zodius sent me pictures of a robot he made with almost exactly that track arrangement. I have something in the works \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E Yeah, I\u0027ve kind of unofficially taken on the RBI stuff where they left off. I re-wrote the plugin from the ground up, and it seems to have been largely well received. The thought had occurred about the hovercraft skirt, it will actually be very simple to do. I believe Spanner may beat me to that one, hovercraft are a bit of a passion of his.\u003C/p\u003E\u003Cp\u003EThe repulsors: quite probably, though unconsciously. I loved that series of games!\u003C/p\u003E\u003Cp\u003EStackable wheels with a static centre.... That\u0027s a nice idea. Would be well suited to those track units above too.\u003C/p\u003E\u003Cp\u003EKeep the ideas coming \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E Every time I get hold of something new it helps me improve what I\u0027ve done before.\u003C/p\u003E\u003Cp\u003EEdit: apologies for all the edits, I\u0027m tired, still a little ill and a bit drunk on medicinal whisky!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-30T23:52:36Z\u0022 title=\u002208/30/2014 11:52  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 30, 2014\u003C/time\u003E by lo-fi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ratchet freak","CreatedById":119895,"CreatedDateTime":"2014-08-30T23:58:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ZodiusInfuser\u0022 data-cite=\u0022ZodiusInfuser\u0022\u003E\u003Cdiv\u003EYea, I thought about making my wheels use the stock module, just to get them out there but I can\u0027t do it, knowing a much better system is possible.\u003Cp\u003EMy understanding of the problem is that the centroid is always along a line out from the center of the craft that is perpendicular to the direction of travel, with it\u0027s distance being related to the amount of turning wanted. With that you\u0027d limit the distance between center and centroid to that determined by the cone intersection. The issue is, one wheel may be at an odd angle or have limited range, so you need to find the maximum distance each of these independent cone calculations return before you can actually place the final centroid. Time to dig out my images (lo-fi\u0027s seen it before \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E )\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.cubbyusercontent.com/pl/SteeringLimits.png/_070255e2bc524d77b2debbc72c410c0f\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.cubbyusercontent.com/pl/SteeringLimits.png/_070255e2bc524d77b2debbc72c410c0f\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIn the above you can see that the wheels to the right cannot turn to face the centroid, so it needs to be positioned to align with their cones. This means you need to know the worst case cone, by iterating through all the wheels. I\u0027d love it if there was a solution that avoided that, but I can\u0027t think of one at the moment.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethe centroid can be \u003Cem\u003Eanywhere\u003C/em\u003E, in a RL car it\u0027s in line with the non steering back wheels (behind CoM), and you can put it behind the craft so in high speeds going left is like changing lanes on the freeway. like active 4 wheel steering: \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/4WSselect.svg/800px-4WSselect.svg.png\u0022 alt=\u0022800px-4WSselect.svg.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EOn the car on the right the centroid is behind it.\u003C/p\u003E\u003Cp\u003EFor straight ahead the centroid is off to the side at infinity, for crabbing it\u0027s to the front or back, for turning in place it\u0027s under the craft itself.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EDoesn\u0027t that mean the inside wheel needs to know D2, which is a parameter of the outer wheel? Yes it could iterate though and find it, but I fear the performance impact if every wheel did that independent of each other. Also bare in mind that the centroid position would be dynamic, so you can\u0027t cache the value of D2 in case the user inputs change. Also I\u0027m coming at this from the perspective of Infernal Robotics, which would allow for the wheel positions to dynamically change too.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eno it only means that each wheel needs to know the distance of the centroid to CoM and the speed CoM wants. Using a max speed on the outer does require a iteration over the wheels to find the wheel furthest but it only needs to happen once and once you have the max speed of the CoM you can pass that to each wheel.\u003C/p\u003E\n"},{"CreatedByName":"ZodiusInfuser","CreatedById":76163,"CreatedDateTime":"2014-08-31T00:37:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ratchet freak\u0022 data-cite=\u0022ratchet freak\u0022\u003E\u003Cdiv\u003Ethe centroid can be \u003Cem\u003Eanywhere\u003C/em\u003E, in a RL car it\u0027s in line with the non steering back wheels (behind CoM), and you can put it behind the craft so in high speeds going left is like changing lanes on the freeway. like active 4 wheel steering:\u003Cp\u003E\u003Ca href=\u0022https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/4WSselect.svg/800px-4WSselect.svg.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/4WSselect.svg/800px-4WSselect.svg.png\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EOn the car on the right the centroid is behind it.\u003C/p\u003E\u003Cp\u003EFor straight ahead the centroid is off to the side at infinity, for crabbing it\u0027s to the front or back, for turning in place it\u0027s under the craft itself.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is true about the centroid being anywhere. I was saying its on a line perpendicular to the direction vector because that simplifies the calculations involved in deriving its position based on velocity and turn rate:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://www.cubbyusercontent.com/pl/CentroidCalc.png/_fca07a5932e34776ac6dd5f6bbb3aa22\u0022 alt=\u0022_fca07a5932e34776ac6dd5f6bbb3aa22\u0022\u003E\u003C/p\u003E\u003Cp\u003EOf course, the vector can be in any direction to enable combinations of forward motion and crabbing. If the turn rate is at zero degrees then the calculations naturally go off to infinity as you noted. Inversely, with no velocity the centroid would be at the CoM or a user defined location, with wheel speed being directly related to turn rate. Here\u0027s what I posted to lo-fi at the time.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Zodius\u0022 data-cite=\u0022Zodius\u0022\u003E\u003Cdiv\u003E- Translation Only: The centroid is off to infinity on a line perpendicular to the XZ vector. As such it can effectively be ignored\u003Cp\u003E - Rotation Only: The centroid is at the origin of the craft (so centre of mass or otherwise).\u003C/p\u003E\u003Cp\u003E - Both: The centroid position is on a line perpendicular to the XZ vector. Its distance from the craft origin (e.g CoM) can be calculated using r = s/theta, where s is the magnitude of XZ, and theta is the magnitude of Y. Centroid = R.rotate(theta) \u002B Origin, where R is the vector[r,0].\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ratchet freak\u0022 data-cite=\u0022ratchet freak\u0022\u003E\u003Cdiv\u003Eno it only means that each wheel needs to know the distance of the centroid to CoM and the speed CoM wants. Using a max speed on the outer does require a iteration over the wheels to find the wheel furthest but it only needs to happen once and once you have the max speed of the CoM you can pass that to each wheel.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, I misunderstood your use of D1 and D2 then. I still thing you would need to recalculate the values though, whenever the user input (and therefore the centroid) changes, or if the wheels are moved due to some robotic assembly. Depending on the specific use case the calculations can be done once or every frame. It seems the best way to avoid this is just to allow wheels further away from the centroid than the CoM (or other designated point) to run faster than the normally would. That being said, if you\u0027re having to iterate for the steering limit stuff you might as well do this at the same time.\u003C/p\u003E\u003Cp\u003EAnyway, that\u0027s enough about it from me for tonight. Lo-fi has heard this all from me before in various forms \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Wosser1","CreatedById":118599,"CreatedDateTime":"2014-08-31T01:00:39Z","Content":"\n\u003Cp\u003ESince tracks are receiving the highest requests:\u003C/p\u003E\u003Cp\u003ERelated to RBI, you could bring back these as well:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/POlhMBh.jpg?1\u0022 alt=\u0022POlhMBh.jpg?1\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd maybe add a medium sized flatter version of the large tracks like this:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://pedal-dozer.com/files/2013/02/vw-snow-van.jpg\u0022 alt=\u0022vw-snow-van.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnother one:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://pedal-dozer.com/files/2011/11/omni-track.jpg\u0022 alt=\u0022omni-track.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003ELike this or similar, maybe with an overlapping chain structure.\u003C/p\u003E\u003Cp\u003E(Found on \u003Ca href=\u0022http://pedal-dozer.com/\u0022 rel=\u0022external nofollow\u0022\u003EPedal Dozer\u003C/a\u003E)\u003C/p\u003E\u003Cp\u003ESome others:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://images.gizmag.com/gallery_lrg/4200_26060531731.jpg\u0022 alt=\u00224200_26060531731.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/OsQwVGJl.jpg\u0022 alt=\u0022OsQwVGJl.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EOf course there is also this new wheel design:\u003C/p\u003E\u003Cp\u003Ewhere the tires themselves act as dampers/suspension \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://images.gizmag.com/gallery_lrg/10398_191108103847_3.jpg\u0022 alt=\u002210398_191108103847_3.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2014-08-31T03:00:17Z","Content":"\n\u003Cp\u003EI take a break from this thread for a few days and come back to find you all speaking martian swahili. I have absolutely no idea what you all are talking about... but it sounds cool either way.\u003C/p\u003E\n"}]}