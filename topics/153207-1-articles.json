{"TopicId":153207,"ForumId":36,"TopicTitle":"Is a CommNet \u0026quot;Relay Computer module\u0026quot; possible?","CreatedByName":"Tyko","CreatedById":164179,"CreatedDateTime":"2016-12-08T19:20:27Z","PageNum":1,"Articles":[{"CreatedByName":"Tyko","CreatedById":164179,"CreatedDateTime":"2016-12-08T19:20:27Z","Content":"\n\u003Cp\u003E\nI\u0027ve been trying to figure out if I could make a module that would enable Direct antennas to function as relays - you\u0027d add the direct antennas, then also add this Relay Computer onto the ship. The Relay Computer would allow the Direct antennas to be included in the Relay antenna calculations. Under this model, all antenna\u0027s would be categorized as Direct and the Relay Computer would be unlocked in the tech tree after which any antenna can be used as Relay simply by adding the Relay Computer module.\n\u003C/p\u003E\n\u003Cp\u003E\nI could write a \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E .cfg that would change all Antenna\u0027s to Relay type, but I can\u0027t figure out how trigger that change by the user adding the Relay Computer part. I\u0027m not even sure if you can do it that way because I think all \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E changes occur when the game is loaded, not when parts are attached.\n\u003C/p\u003E\n\u003Cp\u003E\nHas anyone else explored this?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-12-08T19:21:13Z\u0022 title=\u002212/08/2016 07:21  PM\u0022 data-short=\u00227 yr\u0022\u003EDecember 8, 2016\u003C/time\u003E by Tyko\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-12-08T20:04:58Z","Content":"\n\u003Cp\u003E\nIt might be doable at the custom plugin level, but I don\u0027t think it is possible at the ModuleManager patch level.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you have a new part, say \u0027Relay Module\u0027; it gets added to a ship similar to a \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E case, battery, or science instrument.\u00A0 It has a single custom PartModule on it; lets call it \u0027ModuleRelayControl\u0027.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen flight scene is started, or vessel changed, your custom partmodule (ModuleRelayControl) will look for all ModuleDataTransmitter on the vessel, and update their internal \u0027antennaType\u0027 fields to \u0027RELAY\u0027.\u00A0 They keep all of their existing range stats, but merely get turned into relays, if, and only if, your relay module is installed.\u00A0 Might need some additional event handling to disable the relay functionality when vessels are undocked, where you would re-scan and re-enable the relay functionality for the two vessels independently.\n\u003C/p\u003E\n\u003Cp\u003E\nDisclaimer:\u00A0 While this should work in theory (based on the API), I have not tried it in practice.\u00A0 It would depend entirely on the internal code of the antenna and if it caches any values that depend on the antenna-type.\u00A0 May still be doable by manually calling the OnLoad() and/or OnStart() methods to re-initialize the module and recreate the caches.\n\u003C/p\u003E\n"},{"CreatedByName":"Poodmund","CreatedById":128643,"CreatedDateTime":"2016-12-08T20:21:58Z","Content":"\n\u003Cp\u003E\nDoes this help at all? \u003Ca href=\u0022https://kerbalspaceprogram.com/api/interface_comm_net_1_1_i_relay_enabler.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://kerbalspaceprogram.com/api/interface_comm_net_1_1_i_relay_enabler.html\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIf not could the part just\u00A0have a combinability exponent of 0,\u00A0be set as a relay and have\u00A0the power of that\u00A0relay antenna set to a dynamic value based on the highest, combined\u00A0vessel antenna power?\n\u003C/p\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2016-12-08T20:23:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222880082\u0022 data-ipsquote-contentid=\u0022153207\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221481227498\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen flight scene is started, or vessel changed, your custom partmodule (ModuleRelayControl) will look for all ModuleDataTransmitter on the vessel, and update their internal \u0027antennaType\u0027 fields to \u0027RELAY\u0027.\u00A0 They keep all of their existing range stats, but merely get turned into relays, if, and only if, your relay module is installed.\u00A0 Might need some additional event handling to disable the relay functionality when vessels are undocked, where you would re-scan and re-enable the relay functionality for the two vessels independently.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe problem is that the relay functionality is usually used when the relay vessel is not loaded, so the partModules do not come to life.\n\u003C/p\u003E\n\u003Cp\u003E\nIt might be possible with a custom module derived from ModuleDataTransmitter, which overloads the method(s) for unloaded antenna power. Then the relay computer would act as a relay antenna and would report the combined range.\n\u003C/p\u003E\n"}]}