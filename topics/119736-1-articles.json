{"TopicId":119736,"ForumId":70,"TopicTitle":"CKAN keeps crashing on start","CreatedByName":"capran","CreatedById":65692,"CreatedDateTime":"2015-08-30T13:29:30Z","PageNum":1,"Articles":[{"CreatedByName":"capran","CreatedById":65692,"CreatedDateTime":"2015-08-30T13:29:30Z","Content":"\n\u003Cp\u003EI had been using CKAN successfully for a while, but decided I wanted to move my KSP installation to a different drive. I used Steam to delete and reinstall the game at the new location (after manually copying over my saves and mods). However, after I dragged over CKAN.exe, every time I start it I get errors. It seems to indicate a configuration problem, but I don\u0027t know what it is.\u003C/p\u003E\u003Cp\u003EError window:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EError!\u003Cbr\u003EError in autoupdate: \u003Cbr\u003E\tAn exception occurred during a WebClient request.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd in the command prompt window:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Elog4net:ERROR Exception while reading ConfigurationSettings. Check your .config file is well formed XML.\u003Cbr\u003ESystem.Configuration.ConfigurationErrorsException: The configuration section \u0027appSettings\u0027 has an unexpected declaration.\u003Cbr\u003E   at System.Configuration.ConfigurationManager.get_AppSettings()\u003Cbr\u003E   at log4net.Util.SystemInfo.GetAppSetting(String key)\u003Cbr\u003Elog4net:ERROR Exception while reading ConfigurationSettings. Check your .config file is well formed XML.\u003Cbr\u003ESystem.Configuration.ConfigurationErrorsException: The configuration section \u0027appSettings\u0027 has an unexpected declaration.\u003Cbr\u003E   at System.Configuration.ConfigurationManager.get_AppSettings()\u003Cbr\u003E   at log4net.Util.SystemInfo.GetAppSetting(String key)\u003Cbr\u003Elog4net:ERROR Exception while reading ConfigurationSettings. Check your .config file is well formed XML.\u003Cbr\u003ESystem.Configuration.ConfigurationErrorsException: The configuration section \u0027appSettings\u0027 has an unexpected declaration.\u003Cbr\u003E   at System.Configuration.ConfigurationManager.get_AppSettings()\u003Cbr\u003E   at log4net.Util.SystemInfo.GetAppSetting(String key)\u003Cbr\u003Elog4net:ERROR Exception while reading ConfigurationSettings. Check your .config file is well formed XML.\u003Cbr\u003ESystem.Configuration.ConfigurationErrorsException: The configuration section \u0027appSettings\u0027 has an unexpected declaration.\u003Cbr\u003E   at System.Configuration.ConfigurationManager.get_AppSettings()\u003Cbr\u003E   at log4net.Util.SystemInfo.GetAppSetting(String key)\u003Cbr\u003Elog4net:ERROR Exception while reading ConfigurationSettings. Check your .config file is well formed XML.\u003Cbr\u003ESystem.Configuration.ConfigurationErrorsException: The configuration section \u0027appSettings\u0027 has an unexpected declaration.\u003Cbr\u003E   at System.Configuration.ConfigurationManager.get_AppSettings()\u003Cbr\u003E   at log4net.Util.SystemInfo.GetAppSetting(String key)\u003Cbr\u003Elog4net:ERROR Exception while reading ConfigurationSettings. Check your .config file is well formed XML.\u003Cbr\u003ESystem.Configuration.ConfigurationErrorsException: The configuration section \u0027appSettings\u0027 has an unexpected declaration.\u003Cbr\u003E   at System.Configuration.ConfigurationManager.get_AppSettings()\u003Cbr\u003E   at log4net.Util.SystemInfo.GetAppSetting(String key)\u003Cbr\u003Elog4net:ERROR Exception while reading ConfigurationSettings. Check your .config file is well formed XML.\u003Cbr\u003ESystem.Configuration.ConfigurationErrorsException: The configuration section \u0027appSettings\u0027 has an unexpected declaration.\u003Cbr\u003E   at System.Configuration.ConfigurationManager.get_AppSettings()\u003Cbr\u003E   at log4net.Util.SystemInfo.GetAppSetting(String key)\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI tried using the command line options, like \u0022repair registry\u0022, or \u0022ksp add default [path]\u0022.\u003C/p\u003E\u003Cp\u003EAny help?\u003C/p\u003E\n"},{"CreatedByName":"SAI Peregrinus","CreatedById":125558,"CreatedDateTime":"2015-08-30T15:48:42Z","Content":"\n\u003Cp\u003EIn your KSP directory there will be a CKAN folder. Delete everything in there except the \u0022downloads\u0022 directory.\u003C/p\u003E\n"},{"CreatedByName":"capran","CreatedById":65692,"CreatedDateTime":"2015-08-31T22:09:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SAI Peregrinus\u0022 data-cite=\u0022SAI Peregrinus\u0022\u003E\u003Cdiv\u003EIn your KSP directory there will be a CKAN folder. Delete everything in there except the \u0022downloads\u0022 directory.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI should have said I already did that. \u003C/p\u003E\u003Cp\u003EI just deleted my KSP dir again entirely (putting my mods and saves folder aside). Verified that KSP runs. Copied over the CKAN.EXE again (no CKAN folder), and I still get the same errors. One thing I didn\u0027t mention before was I also get this message:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/9107fyidoo016sn/Capture.PNG?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/9107fyidoo016sn/Capture.PNG?dl=0\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe full text is:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESee the end of this message for details on invoking \u003Cbr\u003Ejust-in-time (JIT) debugging instead of this dialog box.\u003Cbr\u003E\u003Cbr\u003E************** Exception Text **************\u003Cbr\u003ESystem.Configuration.ConfigurationErrorsException: Configuration section system.transactions/machineSettings could not be created. Machine.config is missing information\u003Cbr\u003E   at System.Transactions.Configuration.MachineSettingsSection.GetSection()\u003Cbr\u003E   at System.Transactions.TransactionManager.get_MachineSettings()\u003Cbr\u003E   at System.Transactions.TransactionManager.get_MaximumTimeout()\u003Cbr\u003E   at CKAN.CkanTransaction.CreateTransactionScope()\u003Cbr\u003E   at CKAN.KSP.ScanGameData()\u003Cbr\u003E   at CKAN.Main.UpdateRepo()\u003Cbr\u003E   at CKAN.Main.OnLoad(EventArgs e)\u003Cbr\u003E   at System.Windows.Forms.Form.OnCreateControl()\u003Cbr\u003E   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)\u003Cbr\u003E   at System.Windows.Forms.Control.CreateControl()\u003Cbr\u003E   at System.Windows.Forms.Control.WmShowWindow(Message\u0026amp; m)\u003Cbr\u003E   at System.Windows.Forms.Control.WndProc(Message\u0026amp; m)\u003Cbr\u003E   at System.Windows.Forms.Form.WmShowWindow(Message\u0026amp; m)\u003Cbr\u003E   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E************** Loaded Assemblies **************\u003Cbr\u003Emscorlib\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.96.0 built by: NETFXREL2STAGE\u003Cbr\u003E    CodeBase: file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/mscorlib.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003Eckan\u003Cbr\u003E    Assembly Version: 0.0.0.0\u003Cbr\u003E    Win32 Version: 0.0.0.0\u003Cbr\u003E    CodeBase: file:///B:/Games/SteamLibrary/steamapps/common/Kerbal%20Space%20Program/ckan.exe\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Configuration\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Core\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Xml\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Windows.Forms\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Drawing\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003EMicrosoft.GeneratedCode\u003Cbr\u003E    Assembly Version: 1.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003EMicrosoft.CSharp\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/Microsoft.CSharp/v4.0_4.0.0.0__b03f5f7f11d50a3a/Microsoft.CSharp.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Transactions\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_64/System.Transactions/v4.0_4.0.0.0__b77a5c561934e089/System.Transactions.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Numerics\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Numerics/v4.0_4.0.0.0__b77a5c561934e089/System.Numerics.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Runtime.Serialization\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Runtime.Serialization/v4.0_4.0.0.0__b77a5c561934e089/System.Runtime.Serialization.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Xml.Linq\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_MSIL/System.Xml.Linq/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.Linq.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.Data\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_64/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003ESystem.EnterpriseServices\u003Cbr\u003E    Assembly Version: 4.0.0.0\u003Cbr\u003E    Win32 Version: 4.6.79.0 built by: NETFXREL2\u003Cbr\u003E    CodeBase: file:///C:/WINDOWS/Microsoft.Net/assembly/GAC_64/System.EnterpriseServices/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll\u003Cbr\u003E----------------------------------------\u003Cbr\u003E\u003Cbr\u003E************** JIT Debugging **************\u003Cbr\u003ETo enable just-in-time (JIT) debugging, the .config file for this\u003Cbr\u003Eapplication or computer (machine.config) must have the\u003Cbr\u003EjitDebugging value set in the system.windows.forms section.\u003Cbr\u003EThe application must also be compiled with debugging\u003Cbr\u003Eenabled.\u003Cbr\u003E\u003Cbr\u003EFor example:\u003Cbr\u003E\u003Cbr\u003E\u0026lt;configuration\u0026gt;\u003Cbr\u003E    \u0026lt;system.windows.forms jitDebugging=\u0022true\u0022 /\u0026gt;\u003Cbr\u003E\u0026lt;/configuration\u0026gt;\u003Cbr\u003E\u003Cbr\u003EWhen JIT debugging is enabled, any unhandled exception\u003Cbr\u003Ewill be sent to the JIT debugger registered on the computer\u003Cbr\u003Erather than be handled by this dialog box.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"capran","CreatedById":65692,"CreatedDateTime":"2015-09-03T22:17:36Z","Content":"\n\u003Cp\u003ESOLVED! \u003C/p\u003E\u003Cp\u003EA little background. I\u0027m running on Windows 10 on this PC since the preview builds. But I forgot to turn off the optional Get Latest Insider Builds. And one of the post 10240 builds had some kind of issue (forgot what it was now!) that made me want to revert back. However, the built-in reversion tools weren\u0027t working, neither was system restore. So I manually moved everything from Windows.old back to where they\u0027re supposed to be after moving the bad build files. Turns out I didn\u0027t do something right, because .NET framework and Powershell were broken.\u003C/p\u003E\u003Cp\u003ELong story short (I had to go down MANY rabbit holes), by simply going to:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EC:\\WINDOWS\\Microsoft.NET\\Framework64\\v4.0.30319\\Config\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand copying machine.config.default to machine.config, lo and behold CKAN.exe and Powershell now run normally!\u003C/p\u003E\u003Cp\u003EFor good measure, I did the same thing for\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EC:\\WINDOWS\\Microsoft.NET\\Framework64\\v2.0.50727\\CONFIG\u003Cbr\u003EC:\\WINDOWS\\Microsoft.NET\\Framework\\v2.0.50727\\CONFIG\u003Cbr\u003EC:\\WINDOWS\\Microsoft.NET\\Framework\\v4.0.30319\\Config\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-03T22:21:01Z\u0022 title=\u002209/03/2015 10:21  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 3, 2015\u003C/time\u003E by capran\u003C/strong\u003E\n\u003C/span\u003E\n"}]}