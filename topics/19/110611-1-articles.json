{"TopicId":110611,"ForumId":19,"TopicTitle":"Orbite traballanti","CreatedByName":"tea_bag97","CreatedById":115333,"CreatedDateTime":"2015-05-24T08:48:10Z","PageNum":1,"Articles":[{"CreatedByName":"tea_bag97","CreatedById":115333,"CreatedDateTime":"2015-05-24T08:48:10Z","Content":"Negli ultimi giorni mi sono dedicato alla messa in orbita di una nuova rete di ComSat con RemoteTech in orbita intorno a Kerbin, uno dei miei primi tentativi. So che non \u00C3\u0192\u00C2\u00A8 necessario avere valori precisi fino alla seconda cifra dopo la virgola perch\u00C3\u0192\u00C2\u00A9 gli errori rientrano in certi margini, ma mi piace fare le cose con accuratezza. Una cosa che ho sempre notato in KSP \u00C3\u0192\u00C2\u00A8 che a volte il gioco stesso non \u00C3\u0192\u00C2\u00A8 sicuro di quali siano apoapside e periapside, nel senso che i valori indicati nella mappa fluttuano, specialmente quando il veicolo ruota molto velocemente. Attualmente uso il flight computer di RT per effettuare le manovre e mantenere l\u0027attitudine, quindi credo che questo pilota automatico sia forse troppo preciso e tenda a eseguire rotazioni impercettibili ma che a quanto pare confondono il gioco.\n\nCome ho detto prima, questo problema in fin dei conti c\u0027\u00C3\u0192\u00C2\u00A8 sempre stato da quando ho iniziato a giocare, ma negli ultimi 2-3 giorni, nella 1.0.2, mi \u00C3\u0192\u00C2\u00A8 successa almeno cinque volte una cosa stranissima: mentre cercavo di modificare il maneuver node, l\u0027orbita cominciava a destabilizzarsi pesantemente fino a quando nella barra del \u00C3\u017D\u00E2\u20ACV appariva NaN. Quindi tutto l\u0027hud scompariva, e senza punti di riferimento non sono mai riuscito a ritrovare nemmeno Kerbin. L\u0027unica cosa che ero in grado di vedere era la skybox. Ora, premetto che utilizzo anche Precise Node di blizzy, e che un paio di volte questo problema \u00C3\u0192\u00C2\u00A8 successo mentre stavo editando il node utilizzando valori numerici per alterarne il tempo, ma mi sembra che non sovverta in nessun modo il codice del gioco. Potrebbe anche darsi che, avendo installato kOS, ProcParts e ProcWings, che tutte richiedono le KSPAPIExtensions, visto che le KSPAPIExtensions siano ritenute dal mio gioco incompatibili con la 1.0.2, questo possa essere in qualche modo collegato. Per il resto non so che pensare, ho provato a installare KerbalJointReinforcement ma non \u00C3\u0192\u00C2\u00A8 cambiato nulla... che posso fare?"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-05-24T13:56:44Z","Content":"Gran bella questione...\n\nla fluttuazione dei valori orbitali per i veicoli off-rails \u00C3\u0192\u00C2\u00A8 \u0022normale\u0022, nel senso che \u00C3\u0192\u00C2\u00A8 un effetto del ricalcolo dei valori svolto costantemente da KSP, e della limitata precisione dei parametri (ovvero, gli errori di arrotondamento dei parametri, tipo la velocit\u00C3\u0192\u00C2 , comportano il continuo variare dei valori calcolati tipo periapside e apoapside).\n\nMeno normale, ma l\u0027ho osservato anch\u0027io con add-ons installati, \u00C3\u0192\u00C2\u00A8 il decadere dell\u0027orbita pur senza forze visibili che la alterassero. Ovvio che se il veicolo viene accelerato da qualcosa, l\u0027orbita ne sia modificata, ma con alcuni add-ons pare davvero che le modifiche avvengano senza cause esterne. \n\nCome giustamente dici, PreciseNode non modifica l\u0027orbita attuale, consente solo di cambiare i valori per i nodi e di determinare le orbite future di conseguenza. E\u0027 senz\u0027altro possibile alterare i parametri fino a rendere le orbite future degeneri (es. di orbita degenere, quando l\u0027ellisse diventa una linea retta avendo perfettamente azzerato la velocit\u00C3\u0192\u00C2  agli apsidi), fatto che potrebbe anche creare difficolt\u00C3\u0192\u00C2  a KSP se non \u00C3\u0192\u00C2\u00A8 pi\u00C3\u0192\u00C2\u00B9 in grado di calcolarne correttamente i parametri (ma non l\u0027orbita attuale). Possibile che la scomparsa dell\u0027hud e di Kerbin nel tuo esempio sia dovuta a questo? Ci sono diversi casi in cui KSP ha prodotto simili effetti collegati ad orbite degenerate.\n\nCon altri add-ons installati, ho invece notato spesso il decadimento progressivo dell\u0027orbita, ma non ho mai trovato la causa (uso anche troppi add-ons per poterla isolare facilmente). In taluni casi le oscillazioni sono molto pronunciate quando il veicolo cambia orientazione, il che mi fa sospettare un errore nella gestione della physics tra le parti (come se i momenti delle diverse parti in rotazione col veicolo non dessero una risultante nulla, ma si avesse una forza spuria per errori di calcolo). Ma il problema potrebbe benissimo essere diverso.\n\nSe ti riesce di isolare il problema, individuando azioni che portano sicuramente alla destabilizzazione (e quindi possano essere ripetute indipendentemente) con il minimo possibile di add-ons necessari perch\u00C3\u0192\u00C2\u00A8 questo avvenga, questo potrebbe risultare un prezioso contributo per migliorare KSP."},{"CreatedByName":"tea_bag97","CreatedById":115333,"CreatedDateTime":"2015-05-24T14:33:25Z","Content":"Riguardo all\u0027isolare il problema, non saprei da dove cominciare... sembra avvenire senza un motivo, in genere quando passo da mapmode e viceversa. L\u0027unica azione che avevo pensato potesse essere correlata era alterare i valori con Precise Node, ma se \u00C3\u0192\u00C2\u00A8 come tu dici... Comunque, andando per esclusione, direi che RemoteTech \u00C3\u0192\u00C2\u00A8 in qualche modo responsabile della scomparsa dell\u0027HUD. Un\u0027altra cosa da riportare \u00C3\u0192\u00C2\u00A8 che in ogni caso interessato sul veicolo erano presenti soltanto parti di stock, ad eccezione di un solo serbatoio di ProcParts.\n\nTra l\u0027altro \u00C3\u0192\u00C2\u00A8 successo di nuovo qualche minuto fa, per fortuna in orbita bassa di Kerbin, e ho notato un paio di cose in pi\u00C3\u0192\u00C2\u00B9: Kerbin continua a trovarsi l\u00C3\u0192\u00C2\u00AC, non scompare, mentre il veicolo \u00C3\u0192\u00C2\u00A8 completamente svanito. Nessuna traccia. In modalit\u00C3\u0192\u00C2  mappa per\u00C3\u0192\u00C2\u00B2, se faccio doppio click su Kerbin per poi premere backspace, la visuale si focalizza di nuovo dove dovrebbe essere il satellite. Dopo un po\u0027 di tempo per\u00C3\u0192\u00C2\u00B2 non sono pi\u00C3\u0192\u00C2\u00B9 riuscito a passare da mapmode a zoom sul veicolo, infatti premendo M la visuale si restringeva e basta, non c\u0027era un cambio di scena.\n\nPoi se ritorno alla schermata dello Space Center o torno al men\u00C3\u0192\u00C2\u00B9 principale, l\u0027hud non riappare nella scena di gioco, mentre appare nella tracking station. Se invece chiudo il gioco seguendo la procedura standard e lo riavvio, perch\u00C3\u0192\u00C2\u00A9 premendo esc almeno il men\u00C3\u0192\u00C2\u00B9 di pausa risponde, tutto ritorna alla normalit\u00C3\u0192\u00C2 . Il satellite \u00C3\u0192\u00C2\u00A8 dove lo ho lasciato prima che l\u0027HUD scomparisse ed \u00C3\u0192\u00C2\u00A8 come se non fosse successo nulla. Spero che queste poche informazioni che sono riuscito a raccogliere possano aiutare in qualche modo."},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-05-24T15:19:30Z","Content":"Senz\u0027altro aiuta, almeno si inizia a restringere il problema. Dunque, se dici che RemoteTech \u00C3\u0192\u00C2\u00A8 implicato, ma PreciseNode deve essere installato per provocare le alterazioni, sarebbe da vedere se il problema avviene usando solo quei due mods. Da evitare non solo di usare altre parti, ma di avere plug-ins relativi ad altri mods caricati con KSP.\n\nSarebbe utile a quel punto avere una situazione di partenza (tipo un savegame) e una lista di passi da effettuare che sicuramente provocano il problema (per poter ripetere l\u0027esperienza). Per esperienza, consiglio di riprovare tu stesso la sequenza un paio di volte, per verificare se sia effettivamente completa. Per passi intendo qualunque azione svolta, tipo passare in Map mode, aprire un maneuver node, o impostare una DeltaV su una direzione specifica; inoltre la sequenza dei passi dovrebbe riportare le osservazioni pertinenti il problema in concomitanza dei passi svolti (tipo, se si torna allo Space Center da Mapmode, e kerbin \u00C3\u0192\u00C2\u00A8 sparito). So che \u00C3\u0192\u00C2\u00A8 noioso, ma purtroppo necessario.\n\nDato che il veicolo non appare, devo ritenere che KSP abbia dei problemi. Come noto, KSP scrive sul log una quantit\u00C3\u0192\u00C2  di informazioni utili. Leggere il log \u00C3\u0192\u00C2\u00A8 talvolta essenziale per dare un senso a quanto si sperimenta. Personalmente, uso una [utility](http://www.baremetalsoft.com/baretail/) che mi permette di vedere il log costantemente mentre KSP \u00C3\u0192\u00C2\u00A8 aperto, molto utile per collegare subito quanto viene riportato con quello che succede in KSP. Altra cosa relativa al log, per avere pi\u00C3\u0192\u00C2\u00B9 informazioni occorre modificare una linea nel file \u0022settings.cfg\u0022 (VERBOSE\\_DEBUG\\_LOG = True, di regola \u00C3\u0192\u00C2\u00A8 su False perch\u00C3\u0192\u00C2\u00A8 ogni cosa riportata sul log richiede tempo, e serve vederle solo se si fanno test). Se ti riuscisse di notare cosa riporta il log quando torni in Mapmode e non trovi pi\u00C3\u0192\u00C2\u00B9 il veicolo, con ogni probabilit\u00C3\u0192\u00C2  KSP deve riportare una qualche NullReferenceException (NRE) legata alle routines implicate nel problema (anche gli add-ons riportano gli eventi nel log, quindi in genere si riesce a desumere cosa non funziona anche per loro). Non serve che mi interpreti il log, beninteso, ed io cercher\u00C3\u0192\u00C2\u00B2 di ottenere gli stessi eventi ripetendo la tua procedura (quindi, dovrei finire con l\u0027avere un log simile); ma l\u0027uso del log potrebbe darti qualche idea circa cosa sta succedendo."},{"CreatedByName":"tea_bag97","CreatedById":115333,"CreatedDateTime":"2015-05-28T13:28:31Z","Content":"Scusa se non ho risposto prima, tra un impegno e l\u0027altro... comunque sono riuscito ad avere di nuovo il solito bug, ma stavo usando baretail e credo di essere riuscito a individuare il punto nel log che riporta cosa \u00C3\u0192\u00C2\u00A8 successo. Nel log appaiono svariate \u0022NullReferenceException: Object reference not set to an instance of an object PlanetariumCamera.LateUpdate ()\u0022 (la prima \u00C3\u0192\u00C2\u00A8 a riga 179), ma anche verso la fine del paste che ho caricato (dalla riga 706) ci sono stringhe che mi sembrano strane... Soltanto che non ho disinstallato nulla, ci sono comunque le mod che utilizzo di solito, anche se oltre a RT nessuna sembra essere particolarmente coinvolta.\n\n[http://pastebin.com/2miHj3Ua](http://pastebin.com/2miHj3Ua)"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-05-28T16:29:26Z","Content":"Peccato che i messaggi nel log non siano pi\u00C3\u0192\u00C2\u00B9 espliciti. \u0022PlanetariumCamera.LateUpdate()\u0022 sta indicando che l\u0027elenco degli oggetti su cui deve operare (per aggiornare le posizioni in Mapmode) include qualcosa di non valido. Parrebbe che qualche oggetto sia stato inserito nell\u0027elenco senza i parametri corretti, oppure sia stato distrutto ma non rimosso dall\u0027elenco. Forse l\u0027esame del savegame potrebbe rendere esplicito di quale oggetto si tratti, in pratica stiamo cercando un \u0022VESSEL { }\u0022 nel savegame che non compare in Mapmode (inclusi tutti i debris, asteroidi, tutto).\n\nIn quanto alla routine che abbia mal gestito questo oggetto... purtroppo questo potrebbe risalire ad una sessione di gioco precedente con quel savegame, quindi non avremmo messaggi nel log che ci indicano cosa sia successo. (Nota: l\u0027esistenza di un oggetto non corretto pu\u00C3\u0192\u00C2\u00B2 anche non pregiudicare il funzionamento di KSP, ma comunque rappresenta una forma di corruzione del save, tanto che se si riuscisse ad individuare, proverei ad editare il savegame per toglierlo, se il save sia da portare avanti).\n\nL\u0027esistenza di un oggetto errato potrebbe anche essere messa in relazione al blocco della visuale (flight/mapmode), se lo stesso oggetto finisce con l\u0027entrare nella scena (o addirittura, sia l\u0027oggetto su cui si focalizza la camera). Eliminando dal gioco l\u0027oggetto su cui si focalizza la scena, la visuale passa all\u0027oggetto precedente nell\u0027elenco: in un caso (risolto tempo fa) la gestione in KSP non era corretta e se non c\u0027erano pi\u00C3\u0192\u00C2\u00B9 oggetti in elenco, la visuale passava ad un ipotetico oggetto con indice nullo, bloccando il gioco. \n\nQuanto al decadimento delle traiettorie... il log non dice nulla in proposito. Posso notare alcuni add-ons che stai usando, e proverei ad escludere FAR (inclusa la dll ModularFlightIntegrator che questo usa), in quanto sicuramente \u00C3\u0192\u00C2\u00A8 un add-on che avrebbe la potenzialit\u00C3\u0192\u00C2  di alterare le orbite (non dico sia quello, va fatta una prova senza e ripetuta con quell\u0027add-on, usando uno stesso savegame, meglio caricando sempre uno stesso quicksave: solo se viene osservato che le orbite si modificano in presenza dell\u0027add-on, e non in sua assenza, si pu\u00C3\u0192\u00C2\u00B2 dedurre che l\u0027add-on sia implicato, e potrebbe ancora essere l\u0027effetto di qualcos\u0027altro che interferisce con quell\u0027add-on). L\u0027unico altro add-on che rilevo dal log che potrebbe modificare le orbite sarebbe RemoteTech, se si usasse il FlightComputer, ma ritengo che lo avresti gi\u00C3\u0192\u00C2  notato.\n\nCirca le ultime righe \u0022strane\u0022del log... se intendi il ciclo di RemoteTech che fa le verifiche per i link ed i satelliti funzionanti, mi sembrano normali."},{"CreatedByName":"tea_bag97","CreatedById":115333,"CreatedDateTime":"2015-05-29T15:17:59Z","Content":"Per fortuna poco prima che riscontrassi il bug avevo eseguito un quicksave... nel caso posso analizzare quello. Che programma consigli per farlo?\n\nIn ogni caso ho riscontrato il bug anche oggi, ma stavolta mi sono spinto un po\u0027 oltre nell\u0027analisi: ci\u00C3\u0192\u00C2\u00B2 che non appare \u00C3\u0192\u00C2\u00A8 solo ed esclusivamente la possibilit\u00C3\u0192\u00C2  di vedere il veicolo (premendo M praticamente, non so come si chiama tecnicamente) mentre in mapmode scompaiono linee delle orbite e possibilit\u00C3\u0192\u00C2  di selezionare bersagli e tutto il resto. Tuttavia rimangono la toolbar superiore e la navball. Non sono in grado di capire se il veicolo ruota veramente, per\u00C3\u0192\u00C2\u00B2 quando imprimo una rotazione viene consumata carica, e soprattutto se incremento la manetta il carburante viene consumato e la velocit\u00C3\u0192\u00C2  orbitale nella navball aumenta.\n\nPrima di provare ad alterare la velocit\u00C3\u0192\u00C2  orbitale per\u00C3\u0192\u00C2\u00B2 ho salvato, quindi ho provato, dopodich\u00C3\u0192\u00C2\u00A9 ho ricaricato il salvataggio precedente, dove l\u0027hud era scomparso, ed era l\u00C3\u0192\u00C2\u00AC. A quanto pare facendo quicksave e subito quickload risolve il problema, anche se \u00C3\u0192\u00C2\u00A8 strano, perch\u00C3\u0192\u00C2\u00A9 ritornando al men\u00C3\u0192\u00C2\u00B9 principale e ricaricando la stessa partita, senza chiudere il gioco, non risolve nulla."},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2015-05-29T16:04:20Z","Content":"Per esaminare i savegame, i file di config, i .craft ed ogni altro file puramente testuale, va benissimo un qualunque editor di testo. Personalmente uso [Notepad\u002B\u002B](https://notepad-plus-plus.org/).\n\nSe ti \u00C3\u0192\u00C2\u00A8 possibile, suggerirei di cominciare con un nuovo savegame: la quantit\u00C3\u0192\u00C2  di informazioni salvate in un savegame \u0022vissuto\u0022 pu\u00C3\u0192\u00C2\u00B2 rendere difficile orizzontarsi. Sopratutto all\u0027inizio, conviene comprendere la struttura del savegame, le diverse sezioni che lo compongono con le informazioni che ciascuna contiene. Una volta chiaro cosa si trova in un savegame \u0022normale\u0022, pu\u00C3\u0192\u00C2\u00B2 diventare pi\u00C3\u0192\u00C2\u00B9 facile individuare sezioni spurie (tipo i \u0022VESSEL { }\u0022 non corretti). D\u0027altra parte, per riprodurre un problema (a meno di casi particolari) non servono savegame vecchi.\n\nNella situazione ideale per la riproduzione dei problemi, si parte con una installazione nuova di KSP, si installano solo il minimo di add-on che risultano implicati, si inizia una nuova partita e si effettuano tutti i passi che portano al problema. Evitando ogni altra azione e modifica che potrebbero modificare i risultati. Capita di imbattersi in problemi mai scoperti prima anche usando savegame \u0022datati\u0022, ma in genere si cerca di riprodurli come sopra prima di segnalarli. Se non si riesce a riprodurli, il problema \u00C3\u0192\u00C2\u00A8 spesso dovuto ad un savegame avariato invece che un bug in KSP o negli add-ons (magari poi si riesce anche a correggere il savegame, ma la sua sorte \u00C3\u0192\u00C2\u00A8 ininfluente ai fini della ricerca dei bug).\n\nCirca la sintomatologia del tuo problema, presumo possa essere corretta ma non vorrei sbilanciarmi: sarebbe meglio poter riprodurre gli stessi sintomi (ovviamente con il savegame ed i passi che ti portano alla situazione) per poterci ragionare sopra. Anche se mi sembra plausibile la possibile causa che ho indicato in precedenza, non posso escludere ci sia altro.\n\nCirca i quicksave, quando li ricarichi, ritrovi esattamente la stessa situazione in cui eri al momento del salvataggio. Quando ritorni al menu principale, viene invece salvata automaticamente una copia del savegame in corso (il file si chiama \u0022persistent.sfs\u0022), quindi \u00C3\u0192\u00C2\u00A8 ovvio che ricaricando la partita dal savegame (invece che da un quicksave) ritrovi la situazione deteriorata come prima di andare al menu principale."}]}