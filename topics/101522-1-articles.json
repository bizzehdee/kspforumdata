{"TopicId":101522,"ForumId":15,"TopicTitle":"Normal maps giving me grief","CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-08T12:02:52Z","PageNum":1,"Articles":[{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-08T12:02:52Z","Content":"\n\u003Cp\u003EI\u0027m not completely new to normal maps, and I\u0027m going via the grey-scale height map converted to normal in Unity.\u003C/p\u003E\u003Cp\u003EAnd, to a degree it works (although mostly just test cases so far). But every time I apply one, I get faces on my parts extremely white. They\u0027re always contiguous faces in the normal map. And usually end up forming white bands or vertical bars on my parts.\u003C/p\u003E\u003Cp\u003EI\u0027ve looked at a bunch of different issues and I\u0027m going round in circles. The same texture without any bump/normals appears just fine. There\u0027s no difference in the white faces and non-white faces in the map. Tried import/calculate/none for normals on my part with no difference (I don\u0027t really think this is related, but was mentioned in another post).\u003C/p\u003E\u003Cp\u003EYes, it persists in this craziness outside the hanger areas. Yes, it\u0027s using a KSP material. In fact, when it\u0027s in blender and I use a Blender material, it works fine.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://cloud-4.steamusercontent.com/ugc/713031292541816357/452B9BC6A1470F38097DFB5C1AC4D88F54DE7917/\u0022 alt=\u0022452B9BC6A1470F38097DFB5C1AC4D88F54DE7917\u0022\u003E\u003C/p\u003E\u003Cp\u003EExtra Info; Just checked.\u003C/p\u003E\u003Cp\u003ELooks fine in Unity using the material/textures. If I assign a non-KSP material in Unity, in KSP it shows as KSP Diffuse with no bump.\u003C/p\u003E\u003Cp\u003EWill try non-specular.\u003C/p\u003E\u003Cp\u003ENon-specular does exactly the same, but less specularly.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-08T12:09:46Z\u0022 title=\u002203/08/2015 12:09  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 8, 2015\u003C/time\u003E by TiktaalikDreaming\u003C/strong\u003E\n\u003Cbr\u003EMore More Info\n\u003C/span\u003E\n"},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-09T16:06:54Z","Content":"\n\u003Cp\u003ECould you show a Unity screenshot?\u003C/p\u003E\n"},{"CreatedByName":"michaelhester07","CreatedById":96470,"CreatedDateTime":"2015-03-09T16:22:23Z","Content":"\n\u003Cp\u003EWithout a screenshot all i can say is make sure in blender you\u0027ve assigned the same material to all of the faces on the model, and if you didn\u0027t use materials make sure you selected the same texture for all of the faces in the UV editor. Do both actually if you used one of either of them.\u003C/p\u003E\u003Cp\u003EIf the above is done correctly in Unity you\u0027ll see the mesh render component only have 1 material listed. If it has more than 1 listed you need to go back to blender and fix the materials.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-03-09T17:44:27Z","Content":"\n\u003Cp\u003EBetter yet is to tell Unity not to import materials. The UV placement is still imported, buf you won\u0027t get any funnies from Blender carried through.\u003C/p\u003E\u003Cp\u003EAfter that, create a new material in Unity with one of the KSP shaders and add in your maps.\u003C/p\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-09T21:17:24Z","Content":"\n\u003Cp\u003EUnity screen shots;\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/157xZVI.png\u0022 alt=\u0022157xZVI.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/ujM5E9Z.png\u0022 alt=\u0022ujM5E9Z.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhich is basically what I\u0027m after at the moment.\u003C/p\u003E\u003Cp\u003EWhat-ever\u0027s going on, it\u0027s going on after the part leaves Unity.\u003C/p\u003E\u003Cp\u003EI\u0027ll try removing the import material though.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003ESame stupid .... with a material created from scratch in unity.\u003C/p\u003E\u003Cp\u003EIn case there\u0027s something glaringly wrong with the normal map, posting that here;\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/9cN9HDS.png\u0022 alt=\u00229cN9HDS.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAlthough, as a test map it\u0027s not really particularly detailed or prone to be causing the issues.\u003C/p\u003E\u003Cp\u003EAlso, material set-up;\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Su3iIoX.png\u0022 alt=\u0022Su3iIoX.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-10T02:57:56Z","Content":"\n\u003Cp\u003EOkay. Your normal map seems to have a problem.\u003C/p\u003E\u003Cp\u003EFor basic patterns, I usually don\u0027t use normal map generator and prefer the hand made way (using simple shape NormalMap images found on the web).\u003C/p\u003E\u003Cp\u003ENothing really hard once you practiced a bit. It often saved me time \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo first (if you\u0027re not used to how normal maps work) here\u0027s what I know :\u003C/p\u003E\u003Cp\u003E- Normal = face orientation.\u003C/p\u003E\u003Cp\u003E- A normal map uses RGB color channels to simulate pixel \u0022angle\u0022 difference relative to it\u0027s normal. \u003C/p\u003E\u003Cp\u003E- You can easily translate RGB value to a pixel angle (Red channel=X-orientation ; Green channel=Y-orientation). And Blue channel is related to Z and...is a bit harder to explain.\u003C/p\u003E\u003Cp\u003E- RGB ranges are 0 to 255. This define the \u0022incidence\u0022 of the pixel angle (still relative to its normal). So values are something like : 0=-90\u00C3\u201A\u00C2\u00B0 ; 128=0\u00C3\u201A\u00C2\u00B0 ; 255=\u002B90\u00C3\u201A\u00C2\u00B0 \u003C/p\u003E\u003Cp\u003E- Unafected pixel must face the normal and needs to be x=0\u00C3\u201A\u00C2\u00B0; y=0\u00C3\u201A\u00C2\u00B0. RGB translation is : R=128; G=128; B=255 (And this is the blueish color).\u003C/p\u003E\u003Cp\u003EI took 20 min for more visual explanations about Normal and UV (sorry for the \u0022fast written\u0022 and not perfectly clear english :s)\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003E\u003Cspan style=\u0022color:#696969;\u0022\u003E-Updated-\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/JkRsr4E.jpg\u0022 alt=\u0022JkRsr4E.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EOk I thought UV orientation was important for normal map but Porkjet showed me the other way and proved to be correct. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-10T20:47:01Z\u0022 title=\u002203/10/2015 08:47  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 10, 2015\u003C/time\u003E by winn75\u003C/strong\u003E\n\u003Cbr\u003Emistake\n\u003C/span\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-10T03:55:53Z","Content":"\n\u003Cp\u003EAwesome info. So, if my background doesn\u0027t match 128-128-255 then the angle of the piece in the UV makes a difference, which could very well be the cause. I\u0027ll check if this is the issue. The pieces showing very white are separate in the UV map with a 90degree rotation, so I\u0027m hoping this is it.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E128-0-255 background for some reason.\u003C/p\u003E\u003Cp\u003EReloading to check now. I\u0027d just closed out of KSP and added all my mods back in. :-/\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EAWESOME!\u003C/p\u003E\u003Cp\u003EGood news: Fixed it. Thanks a million.\u003C/p\u003E\u003Cp\u003EBad news: No excuses to not texture my parts now.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/xec8q91.jpg\u0022 alt=\u0022xec8q91.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-10T06:32:59Z","Content":"\n\u003Cp\u003EI\u0027ve only ever used the autogenerated Bump maps for various uses and never actually known how they operate. That post, Winn75 is (contrary to your claims of confusing English) incredibly helpful and concise. It was exactly as much info as I needed.\u003C/p\u003E\u003Cp\u003ENow layering green/red multiply layers over backgrounds and getting annoyed at the distortion in my UV maps. So seems like I\u0027m moving forward as well with bump maps as normal texture maps now. Cones don\u0027t UV map nicely. :-/\u003C/p\u003E\n"},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-10T14:38:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TiktaalikDreaming\u0022 data-cite=\u0022TiktaalikDreaming\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ENow layering green/red multiply layers over backgrounds and getting annoyed at the distortion in my UV maps. So seems like I\u0027m moving forward as well with bump maps as normal texture maps now. Cones don\u0027t UV map nicely. :-/\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re welcome \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI never tried to use layer blend mods for normal mapping. I\u0027ll do more researche about that.\u003C/p\u003E\u003Cp\u003EFor cones, spheres or cylinders (using a repeating pattern !) I\u0027m used to seam them and really work on UV to have something clean to texture on:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/MxnWpTa.jpg\u0022 alt=\u0022MxnWpTa.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-10T15:21:41Z","Content":"\n\u003Cp\u003ELast thing, here\u0027s an example of something I did with 128px textures (actual real scale on the right) and using a lot of UV overlay and UV islands symetry \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/wzwE10j.jpg\u0022 alt=\u0022wzwE10j.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-10T20:51:25Z\u0022 title=\u002203/10/2015 08:51  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 10, 2015\u003C/time\u003E by winn75\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Porkjet","CreatedById":92433,"CreatedDateTime":"2015-03-10T16:32:35Z","Content":"\n\u003Cp\u003ESry Winn75, but what you\u0027re saying about normal maps and UV island orientation is wrong.\u003C/p\u003E\u003Cp\u003ETheir orientation in the UV space is completely independend of how normal map shading ends up in 3D. \u003C/p\u003E\u003Cp\u003EThis means you can normal map that basketball just fine.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/ElJszEc.jpg\u0022 alt=\u0022ElJszEc.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EEverything else you said is of course correct, overlaying UV islands is very practical, and they can indeed use normal maps correctly so that makes it even better.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-10T16:39:05Z\u0022 title=\u002203/10/2015 04:39  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 10, 2015\u003C/time\u003E by Porkjet\u003C/strong\u003E\n\u003Cbr\u003Emisread\n\u003C/span\u003E\n"},{"CreatedByName":"Van Disaster","CreatedById":58876,"CreatedDateTime":"2015-03-10T19:02:04Z","Content":"\n\u003Cp\u003EAnd of course, if it\u0027s basic rivets \u0026amp; grooves and other discrete elements you can just skip the normal map \u0026amp; add them as mesh. 30 basic pyramidal rivet heads is only 90 polys \u002B the few more you cut in around them, 30 8-sided rivet-heads is 240, etc.\u003C/p\u003E\u003Cp\u003EI\u0027d kinda like to know where the break-even between extra mesh detail \u0026amp; the extra call for a map is with this engine, actually.\u003C/p\u003E\n"},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-10T20:30:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Porkjet\u0022 data-cite=\u0022Porkjet\u0022\u003E\u003Cdiv\u003ESry Winn75, but what you\u0027re saying about normal maps and UV island orientation is wrong.\u003Cp\u003ETheir orientation in the UV space is completely independend of how normal map shading ends up in 3D. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDon\u0027t be, I just double checked and realized...\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/1SisgiP.jpg\u0022 alt=\u00221SisgiP.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EOk, I was really wrong. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif\u0022 alt=\u0022:blush:\u0022\u003E\u003C/p\u003E\u003Cp\u003EThe orientation autosolve by quitting the edit mode (don\u0027t really know how but this is cool!).\u003C/p\u003E\u003Cp\u003ESorry for my mistake i\u0027ll update the previous post.\u003C/p\u003E\u003Cp\u003ESo...that great, I learned something very useful today (this is gonna save me a lot of time : thanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E )\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-03-10T21:00:03Z\u0022 title=\u002203/10/2015 09:00  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 10, 2015\u003C/time\u003E by winn75\u003C/strong\u003E\n\u003C/span\u003E\n"}]}