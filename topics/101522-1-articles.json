{"TopicId":101522,"ForumId":15,"TopicTitle":"Normal maps giving me grief","CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-08T12:02:52Z","PageNum":1,"Articles":[{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-08T12:02:52Z","Content":"I\u0027m not completely new to normal maps, and I\u0027m going via the grey-scale height map converted to normal in Unity.\n\nAnd, to a degree it works (although mostly just test cases so far). But every time I apply one, I get faces on my parts extremely white. They\u0027re always contiguous faces in the normal map. And usually end up forming white bands or vertical bars on my parts.\n\nI\u0027ve looked at a bunch of different issues and I\u0027m going round in circles. The same texture without any bump/normals appears just fine. There\u0027s no difference in the white faces and non-white faces in the map. Tried import/calculate/none for normals on my part with no difference (I don\u0027t really think this is related, but was mentioned in another post).\n\nYes, it persists in this craziness outside the hanger areas. Yes, it\u0027s using a KSP material. In fact, when it\u0027s in blender and I use a Blender material, it works fine.\n\n![452B9BC6A1470F38097DFB5C1AC4D88F54DE7917](http://cloud-4.steamusercontent.com/ugc/713031292541816357/452B9BC6A1470F38097DFB5C1AC4D88F54DE7917/)\n\nExtra Info; Just checked.\n\nLooks fine in Unity using the material/textures. If I assign a non-KSP material in Unity, in KSP it shows as KSP Diffuse with no bump.\n\nWill try non-specular.\n\nNon-specular does exactly the same, but less specularly.\n\n**Edited \u003Ctime datetime=\u00222015-03-08T12:09:46Z\u0022 title=\u002203/08/2015 12:09  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 8, 2015\u003C/time\u003E by TiktaalikDreaming**\n  \nMore More Info"},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-09T16:06:54Z","Content":"Could you show a Unity screenshot?"},{"CreatedByName":"michaelhester07","CreatedById":96470,"CreatedDateTime":"2015-03-09T16:22:23Z","Content":"Without a screenshot all i can say is make sure in blender you\u0027ve assigned the same material to all of the faces on the model, and if you didn\u0027t use materials make sure you selected the same texture for all of the faces in the UV editor. Do both actually if you used one of either of them.\n\nIf the above is done correctly in Unity you\u0027ll see the mesh render component only have 1 material listed. If it has more than 1 listed you need to go back to blender and fix the materials."},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-03-09T17:44:27Z","Content":"Better yet is to tell Unity not to import materials. The UV placement is still imported, buf you won\u0027t get any funnies from Blender carried through.\n\nAfter that, create a new material in Unity with one of the KSP shaders and add in your maps."},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-09T21:17:24Z","Content":"Unity screen shots;\n\n![157xZVI.png](http://i.imgur.com/157xZVI.png)\n\nAnd\n\n![ujM5E9Z.png](http://i.imgur.com/ujM5E9Z.png)\n\nWhich is basically what I\u0027m after at the moment.\n\nWhat-ever\u0027s going on, it\u0027s going on after the part leaves Unity.\n\nI\u0027ll try removing the import material though.\n\n- - - Updated - - -\n\nSame stupid .... with a material created from scratch in unity.\n\nIn case there\u0027s something glaringly wrong with the normal map, posting that here;\n\n![9cN9HDS.png](http://i.imgur.com/9cN9HDS.png)\n\nAlthough, as a test map it\u0027s not really particularly detailed or prone to be causing the issues.\n\nAlso, material set-up;\n\n![Su3iIoX.png](http://i.imgur.com/Su3iIoX.png)"},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-10T02:57:56Z","Content":"Okay. Your normal map seems to have a problem.\n\nFor basic patterns, I usually don\u0027t use normal map generator and prefer the hand made way (using simple shape NormalMap images found on the web).\n\nNothing really hard once you practiced a bit. It often saved me time ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nSo first (if you\u0027re not used to how normal maps work) here\u0027s what I know :\n\n- Normal = face orientation.\n\n- A normal map uses RGB color channels to simulate pixel \u0022angle\u0022 difference relative to it\u0027s normal. \n\n- You can easily translate RGB value to a pixel angle (Red channel=X-orientation ; Green channel=Y-orientation). And Blue channel is related to Z and...is a bit harder to explain.\n\n- RGB ranges are 0 to 255. This define the \u0022incidence\u0022 of the pixel angle (still relative to its normal). So values are something like : 0=-90\u00C3\u201A\u00C2\u00B0 ; 128=0\u00C3\u201A\u00C2\u00B0 ; 255=\u002B90\u00C3\u201A\u00C2\u00B0 \n\n- Unafected pixel must face the normal and needs to be x=0\u00C3\u201A\u00C2\u00B0; y=0\u00C3\u201A\u00C2\u00B0. RGB translation is : R=128; G=128; B=255 (And this is the blueish color).\n\nI took 20 min for more visual explanations about Normal and UV (sorry for the \u0022fast written\u0022 and not perfectly clear english :s)\n\n-Updated-\n\n![JkRsr4E.jpg](http://i.imgur.com/JkRsr4E.jpg)\n\nOk I thought UV orientation was important for normal map but Porkjet showed me the other way and proved to be correct. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n**Edited \u003Ctime datetime=\u00222015-03-10T20:47:01Z\u0022 title=\u002203/10/2015 08:47  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 10, 2015\u003C/time\u003E by winn75**\n  \nmistake"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-10T03:55:53Z","Content":"Awesome info. So, if my background doesn\u0027t match 128-128-255 then the angle of the piece in the UV makes a difference, which could very well be the cause. I\u0027ll check if this is the issue. The pieces showing very white are separate in the UV map with a 90degree rotation, so I\u0027m hoping this is it.\n\n- - - Updated - - -\n\n128-0-255 background for some reason.\n\nReloading to check now. I\u0027d just closed out of KSP and added all my mods back in. :-/\n\n- - - Updated - - -\n\nAWESOME!\n\nGood news: Fixed it. Thanks a million.\n\nBad news: No excuses to not texture my parts now.\n\n- - - Updated - - -\n\n![xec8q91.jpg](http://i.imgur.com/xec8q91.jpg)"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2015-03-10T06:32:59Z","Content":"I\u0027ve only ever used the autogenerated Bump maps for various uses and never actually known how they operate. That post, Winn75 is (contrary to your claims of confusing English) incredibly helpful and concise. It was exactly as much info as I needed.\n\nNow layering green/red multiply layers over backgrounds and getting annoyed at the distortion in my UV maps. So seems like I\u0027m moving forward as well with bump maps as normal texture maps now. Cones don\u0027t UV map nicely. :-/"},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-10T14:38:06Z","Content":"\u003E Now layering green/red multiply layers over backgrounds and getting annoyed at the distortion in my UV maps. So seems like I\u0027m moving forward as well with bump maps as normal texture maps now. Cones don\u0027t UV map nicely. :-/\n\nYou\u0027re welcome ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nI never tried to use layer blend mods for normal mapping. I\u0027ll do more researche about that.\n\nFor cones, spheres or cylinders (using a repeating pattern !) I\u0027m used to seam them and really work on UV to have something clean to texture on:\n\n![MxnWpTa.jpg](http://i.imgur.com/MxnWpTa.jpg)"},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-10T15:21:41Z","Content":"Last thing, here\u0027s an example of something I did with 128px textures (actual real scale on the right) and using a lot of UV overlay and UV islands symetry ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\n![wzwE10j.jpg](http://i.imgur.com/wzwE10j.jpg)\n\n**Edited \u003Ctime datetime=\u00222015-03-10T20:51:25Z\u0022 title=\u002203/10/2015 08:51  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 10, 2015\u003C/time\u003E by winn75**"},{"CreatedByName":"Porkjet","CreatedById":92433,"CreatedDateTime":"2015-03-10T16:32:35Z","Content":"Sry Winn75, but what you\u0027re saying about normal maps and UV island orientation is wrong.\n\nTheir orientation in the UV space is completely independend of how normal map shading ends up in 3D. \n\nThis means you can normal map that basketball just fine.\n\n![ElJszEc.jpg](http://i.imgur.com/ElJszEc.jpg)\n\nEverything else you said is of course correct, overlaying UV islands is very practical, and they can indeed use normal maps correctly so that makes it even better.\n\n**Edited \u003Ctime datetime=\u00222015-03-10T16:39:05Z\u0022 title=\u002203/10/2015 04:39  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 10, 2015\u003C/time\u003E by Porkjet**\n  \nmisread"},{"CreatedByName":"Van Disaster","CreatedById":58876,"CreatedDateTime":"2015-03-10T19:02:04Z","Content":"And of course, if it\u0027s basic rivets \u0026 grooves and other discrete elements you can just skip the normal map \u0026 add them as mesh. 30 basic pyramidal rivet heads is only 90 polys \u002B the few more you cut in around them, 30 8-sided rivet-heads is 240, etc.\n\nI\u0027d kinda like to know where the break-even between extra mesh detail \u0026 the extra call for a map is with this engine, actually."},{"CreatedByName":"winn75","CreatedById":52183,"CreatedDateTime":"2015-03-10T20:30:49Z","Content":"\u003E \n\u003E Sry Winn75, but what you\u0027re saying about normal maps and UV island orientation is wrong.\n\u003E Their orientation in the UV space is completely independend of how normal map shading ends up in 3D.\n\nDon\u0027t be, I just double checked and realized...\n\n![1SisgiP.jpg](http://i.imgur.com/1SisgiP.jpg)\n\nOk, I was really wrong. ![:blush:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_embarrassed.gif)\n\nThe orientation autosolve by quitting the edit mode (don\u0027t really know how but this is cool!).\n\nSorry for my mistake i\u0027ll update the previous post.\n\nSo...that great, I learned something very useful today (this is gonna save me a lot of time : thanks ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) )\n\n**Edited \u003Ctime datetime=\u00222015-03-10T21:00:03Z\u0022 title=\u002203/10/2015 09:00  PM\u0022 data-short=\u00229 yr\u0022\u003EMarch 10, 2015\u003C/time\u003E by winn75**"}]}