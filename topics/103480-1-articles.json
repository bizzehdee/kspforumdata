{"TopicId":103480,"ForumId":29,"TopicTitle":"Loading a material with a script","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-05T22:55:36Z","PageNum":1,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-05T22:55:36Z","Content":"\n\u003Cp\u003EHello, I\u0027m trying to load a material with a script file using Resources.load. My code is as follows:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EMaterial m_skyMaterial = Resources.Load (\u0022Materials/Atmo/Sky.mat\u0022) as Material;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHowever, my material is always null. What am I doing wrong?\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-06T01:10:32Z","Content":"\n\u003Cp\u003EAlright so I looked around, and apparently it can\u0027t be done directly and I need to go through a shader loader first.\u003C/p\u003E\u003Cp\u003EI put the following code together from rbray\u0027s work and nlight\u0027s work but it still doesn\u0027t work\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\t\tpublic static Shader GetShader()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tAssembly assembly = Assembly.GetExecutingAssembly();\u003Cbr\u003E\t\t\tStreamReader shaderStreamReader = new StreamReader(assembly.GetManifestResourceStream(KSPUtil.ApplicationRootPath\u002B\u0022/Sky.shader\u0022));\u003Cbr\u003E\t\t\tString shaderTxt = shaderStreamReader.ReadToEnd();\u003Cbr\u003E\t\t\treturn new Material(shaderTxt).shader;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI tried every filename and path combination and nothing seems to work. Any help would be appreciated at this point.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EIf anyone is interested in this, I got the shader to load with this code\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t\tpublic static Material GetMatFromShader2()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tstring codeBase = Assembly.GetExecutingAssembly().CodeBase;\u003Cbr\u003E\t\t\tUriBuilder uri = new UriBuilder(codeBase);\u003Cbr\u003E\t\t\tstring path = Uri.UnescapeDataString(uri.Path);\u003Cbr\u003E\u003Cbr\u003E\t\t\tStreamReader shaderStream = new StreamReader(new FileStream(Path.GetDirectoryName(path) \u002B \u0022\\\\\u0022 \u002B \u0022Sky.shader\u0022, FileMode.Open, FileAccess.Read));\u003Cbr\u003E\t\t\tstring shaderContent = shaderStream.ReadToEnd();\u003Cbr\u003E\t\t\treturn new Material (shaderContent);\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"}]}