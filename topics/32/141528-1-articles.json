{"TopicId":141528,"ForumId":32,"TopicTitle":"Does just WANTING a space station make lag?","CreatedByName":"Fireheart318","CreatedById":159932,"CreatedDateTime":"2016-06-10T00:42:40Z","PageNum":1,"Articles":[{"CreatedByName":"Fireheart318","CreatedById":159932,"CreatedDateTime":"2016-06-10T00:42:40Z","Content":"\n\u003Cp\u003E\nSo during the second module launch (primary generator, if you\u0027re curious), my game became incredibly laggy. It doesn\u0027t make any sense. I\u0027ve even deleted some mods and the problem persisted. I am baffled by what\u0027s going on here and none of my mod developing experience is helping!\n\u003C/p\u003E\n"},{"CreatedByName":"Vanamonde","CreatedById":27914,"CreatedDateTime":"2016-06-10T00:56:22Z","Content":"\n\u003Cp\u003E\nI assembled a station and Duna mission by docking multiple launches in recent weeks, and had no trouble until my part count got over 200. After that, lag slowly became worse as I added parts, but still much better than previous versions.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Fireheart318","CreatedById":159932,"CreatedDateTime":"2016-06-10T01:00:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222624567\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465520182\u0022 data-ipsquote-userid=\u002227914\u0022 data-ipsquote-username=\u0022Vanamonde\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, Vanamonde said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI assembled a station and Duna mission by docking multiple launches in recent weeks, and had no trouble until my part count got over 200. After that, lag slowly became worse as I added parts, but still much better than previous versions.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027ve driven rovers with about 200 parts and lagged about as much as this! I have a pretty good starter computer but in total, I probably had around 50 parts in the entire save file once I reached orbit! That\u0027s actually a high estimate!\n\u003C/p\u003E\n"},{"CreatedByName":"Tw1","CreatedById":59717,"CreatedDateTime":"2016-06-10T09:38:26Z","Content":"\n\u003Cp\u003E\nYes. They can sense it.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHow much lag though? A slight stutter or are you reaching seconds per frame territory?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso is there debris in the save you could clear out? If it\u0027s just an un-precedented amount of parts, perhaps you\u0027ve just found your computer\u0027s limits for this KSP version?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Nathair","CreatedById":102894,"CreatedDateTime":"2016-06-10T12:25:21Z","Content":"\n\u003Cp\u003E\nGetting to the point in the game where you\u0027re thinking about stations suggests that you\u0027ve done a bunch of preliminary stuff. How many missions do you have ongoing? How many flags, how many satellites, how much (as Tw1 mentioned) debris in orbit or scattered around various moons and planets?\n\u003C/p\u003E\n"},{"CreatedByName":"marcello639","CreatedById":144435,"CreatedDateTime":"2016-06-10T12:41:46Z","Content":"\n\u003Cp\u003E\nAt what part of launch it started to lag? I have noticed that atmospheric effects create huge lag on high settings.\n\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2016-06-10T12:52:35Z","Content":"\n\u003Cp\u003E\nAlso, I\u0027ve noticed that docking ports tend to lag far more than other parts. I\u0027ve not done a hard analysis, but a 50-part ship with 10 of those parts docking ports makes a bigger hit for me than a 100-part ship.\n\u003C/p\u003E\n"},{"CreatedByName":"pandaman","CreatedById":130621,"CreatedDateTime":"2016-06-10T13:41:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625096\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465563155\u0022 data-ipsquote-userid=\u002273725\u0022 data-ipsquote-username=\u00225thHorseman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n45 minutes ago, 5thHorseman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAlso, I\u0027ve noticed that docking ports tend to lag far more than other parts. I\u0027ve not done a hard analysis, but a 50-part ship with 10 of those parts docking ports makes a bigger hit for me than a 100-part ship.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmm. \u00A0 \u00A0If that turns out to be the case I may have to rethink my modular station concept.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI had noticed on previous versions that some parts seemed to cause\u00A0more lag than others, the ion engine\u00A0seemed to be the main culprit, but also that was on my old machine so I put it down to that at the time.\n\u003C/p\u003E\n"},{"CreatedByName":"Jimbodiah","CreatedById":152759,"CreatedDateTime":"2016-06-10T13:42:56Z","Content":"\n\u003Cp\u003E\nThere is probably a part from one of your mods that is causing a lot of log hits, check to see your debug log (in-game under alt-f12)\u00A0what is happening.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-10T14:01:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625150\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465566079\u0022 data-ipsquote-userid=\u0022130621\u0022 data-ipsquote-username=\u0022pandaman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 minutes ago, pandaman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHmm. \u00A0 \u00A0If that turns out to be the case I may have to rethink my modular station concept.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo \u0022if\u0022 about it, on every physics update every non-acquired docking port searches all the parts within the physics bubble for docking ports until it finds one that is within the activation range. \u00A0So the performance impact is at least proportional to the number of docking ports multiplied by the total number of parts in the loaded vessels. \u00A0For example, the station in my avatar is 1410 parts of which, 120 are docked ports holding it all together, and 24 are vacant senior ports. \u00A0Nearly 9% of the total CPU time is spent in ModuleDockingNode.FixedUpdate (and another 22\u002B% shuffling EC around the Vessel from the 360 solar panels and 42 probe cores). \u00A0Eliminating (or greatly reducing) these two parts could increase the framerate by nearly 50%...\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625150\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465566079\u0022 data-ipsquote-userid=\u0022130621\u0022 data-ipsquote-username=\u0022pandaman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 minutes ago, pandaman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI had noticed on previous versions that some parts seemed to cause\u00A0more lag than others, the ion engine\u00A0seemed to be the main culprit, but also that was on my old machine so I put it down to that at the time.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe ion engine (when firing) uses a fuel flow mode that involves searching through the whole vessel for fuel tanks both when calculating how much fuel is available (for the fuel gauges) and for actually transferring the fuel. \u00A0This uses considerable CPU time and also generates a considerable amount of garbage.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-10T14:03:59Z\u0022 title=\u002206/10/2016 02:03  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 10, 2016\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JoeNapalm","CreatedById":67032,"CreatedDateTime":"2016-06-10T14:10:37Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDocking ports generate lag?\n\u003C/p\u003E\n\u003Cp\u003E\nBut...but...I \u003Cem\u003Elove \u003C/em\u003Emy modular refueling stations with port spam! \u003Cimg alt=\u0022;.;\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 title=\u0022;.;\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI almost never build \u003Cem\u003Eanything \u003C/em\u003Ewithout at least one docking port. I mean, map sats are about it -- everything else can be docked. MUST BE DOCKED!\n\u003C/p\u003E\n\u003Cp\u003E\n-Jn-\n\u003C/p\u003E\n"},{"CreatedByName":"Archgeek","CreatedById":116048,"CreatedDateTime":"2016-06-10T14:39:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625171\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465567275\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n35 minutes ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n[bunch of useful information]\n\u003C/p\u003E\n\u003Cp\u003E\n...\n\u003C/p\u003E\n\u003Cp\u003E\nThe ion engine (when firing) uses a fuel flow mode that involves searching through the whole vessel for fuel tanks both when calculating how much fuel is available (for the fuel gauges) and for actually transferring the fuel. \u00A0This uses considerable CPU time and also generates a considerable amount of garbage.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s also heck to programatically figure out delta-v for in a staged droptank configuration, isn\u0027t it?\u00A0\u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"N_Molson","CreatedById":63688,"CreatedDateTime":"2016-06-10T14:45:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI almost never build \u003Cem\u003Eanything \u003C/em\u003Ewithout at least one docking port. I mean, map sats are about it -- everything else can be docked. MUST BE DOCKED!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAlternatively, there is... the Klaw ! Well, it doesn\u0027t allow resources transfer, that\u0027s a point. That being said, there must be a hundred of mods around allowing it. \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-10T14:45:31Z\u0022 title=\u002206/10/2016 02:45  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 10, 2016\u003C/time\u003E by N_Molson\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tw1","CreatedById":59717,"CreatedDateTime":"2016-06-10T15:42:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625171\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465567275\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNo \u0022if\u0022 about it, on every physics update every non-acquired docking port searches all the parts within the physics bubble for docking ports until it finds one that is within the activation range. \u00A0\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWoah. That\u0027s so inefficient.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIs there no way it could just check within a certain distance for docking ports? Like maybe having a separate list for docking ports? And/or a simple off switch for a port\u0027s \u0022Magnetism\u0022?\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-10T15:58:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625328\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465573352\u0022 data-ipsquote-userid=\u002259717\u0022 data-ipsquote-username=\u0022Tw1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, Tw1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWoah. That\u0027s so inefficient.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, yes.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625328\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465573352\u0022 data-ipsquote-userid=\u002259717\u0022 data-ipsquote-username=\u0022Tw1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, Tw1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs there no way it could just check within a certain distance for docking ports?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat\u0027s exactly what it is doing, but it looks at all the parts to find docking ports and checks those for distance.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625328\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465573352\u0022 data-ipsquote-userid=\u002259717\u0022 data-ipsquote-username=\u0022Tw1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, Tw1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLike maybe having a separate list for docking ports?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis would be the really important bit. \u00A0Having the code maintain a list of all the docking ports within the physics bubble would make the code very much quicker.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625328\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465573352\u0022 data-ipsquote-userid=\u002259717\u0022 data-ipsquote-username=\u0022Tw1\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, Tw1 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd/or a simple off switch for a port\u0027s \u0022Magnetism\u0022?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI assume you mean a way for the player to disable vacant docking ports and then they would only enable the ones they actually want to dock. \u00A0Yes, this could be done, and it would make quite a difference when there are a large number of ports, \u00A0However,\u00A0it would still need the list of ports to optimise the scan for the ports you do enable. \u00A0The code that checks if a particular port is within range and in a good enough alignment to trigger the magnets is pretty decent, the real killer is having to search the partmodule list of every\u00A0part of every vessel in physics range just to find the docking ports which would still need to be done to test the \u0022active\u0022 flag...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-06-10T16:04:26Z\u0022 title=\u002206/10/2016 04:04  PM\u0022 data-short=\u00228 yr\u0022\u003EJune 10, 2016\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003Cbr\u003EInaccurate after re-reading\n\u003C/span\u003E\n"},{"CreatedByName":"Archgeek","CreatedById":116048,"CreatedDateTime":"2016-06-10T16:32:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625342\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465574292\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n26 minutes ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022line-height:1.6;\u0022\u003ENo \u0022if\u0022 about it, on every physics update every non-acquired docking port searches all the parts within the physics bubble for docking ports until it finds one that is within the activation range. \u00A0\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n...stupid question -- does the shielded docking port, or ports like it like the mk1 and 2 inline ports, do this search when closed? \u00A0What about open ports in closed service modules, cargo bays, or fairings?\u00A0 If not, this\u0027ll change my designs a bit. \u00A0I\u0027m thinking shielded ports on construction tugs, \u00A0no more jr.s on tugs meant to work with high-part-count ships, and shielded and inline ports as far as they eye can see.\n\u003C/p\u003E\n"},{"CreatedByName":"suicidejunkie","CreatedById":155878,"CreatedDateTime":"2016-06-10T16:35:43Z","Content":"\n\u003Cp\u003E\nWith KAS, you could also re-cap the regular docking ports until they are needed.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-10T16:50:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625371\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465576329\u0022 data-ipsquote-userid=\u0022116048\u0022 data-ipsquote-username=\u0022Archgeek\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 minutes ago, Archgeek said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n...stupid question -- does the shielded docking port, or ports like it like the mk1 and 2 inline ports, do this search when closed? \u00A0What about open ports in closed service modules, cargo bays, or fairings?\u00A0 If not, this\u0027ll change my designs a bit. \u00A0I\u0027m thinking shielded ports on construction tugs, \u00A0no more jr.s on tugs meant to work with high-part-count ships, and shielded and inline ports as far as they eye can see.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI believe that closed shielded ports are in a different state (Disabled rather than Ready)\u00A0and therefore don\u0027t do the search but I don\u0027t think them being inside bays, fairings or service modules will affect it. \u00A0Basically, any docking port in the Ready state (should be visible in the save file) will do the scan.\n\u003C/p\u003E\n"},{"CreatedByName":"GarrisonChisholm","CreatedById":146403,"CreatedDateTime":"2016-06-10T17:04:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625171\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465567275\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNo \u0022if\u0022 about it, on every physics update every non-acquired docking port searches all the parts within the physics bubble for docking ports until it finds one that is within the activation range. \u00A0So the performance impact is at least proportional to the number of docking ports multiplied by the total number of parts in the loaded vessels. \u00A0For example, the station in my avatar is 1410 parts of which, 120 are docked ports holding it all together, and 24 are vacant senior ports. \u00A0Nearly 9% of the total CPU time is spent in ModuleDockingNode.FixedUpdate (and another 22\u002B% shuffling EC around the Vessel from the 360 solar panels and 42 probe cores). \u00A0Eliminating (or greatly reducing) these two parts could increase the framerate by nearly 50%...\n\u003C/p\u003E\n\u003Cp\u003E\nThe ion engine (when firing) uses a fuel flow mode that involves searching through the whole vessel for fuel tanks both when calculating how much fuel is available (for the fuel gauges) and for actually transferring the fuel. \u00A0This uses considerable CPU time and also generates a considerable amount of garbage.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is *incredibly* useful information, thank you!\u00A0 It also explains the greater lag for the deathcraft (I\u0027m sorry, they kill much more surely than fly, so I can\u0027t call them aircraft).\n\u003C/p\u003E\n"},{"CreatedByName":"Archgeek","CreatedById":116048,"CreatedDateTime":"2016-06-10T17:25:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625401\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465577401\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n34 minutes ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI believe that closed shielded ports are in a different state (Disabled rather than Ready)\u00A0and therefore don\u0027t do the search but I don\u0027t think them being inside bays, fairings or service modules will affect it. \u00A0Basically, any docking port in the Ready state (should be visible in the save file) will do the scan.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmmm, sounds like I should set up and launch a test rig, then grep the .sfs to find out. \u00A0Or would that be in the .craft? \u00A0...I\u0027m likely to be back with results sometime after work.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-06-11T01:52:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625448\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465579550\u0022 data-ipsquote-userid=\u0022116048\u0022 data-ipsquote-username=\u0022Archgeek\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Archgeek said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHmmm, sounds like I should set up and launch a test rig, then grep the .sfs to find out. \u00A0Or would that be in the .craft? \u00A0...I\u0027m likely to be back with results sometime after work.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, a new save with a single test vessel would be best. \u00A0Launch it, quicksave, search the .sfs for ModuleDockingNode and look a couple of lines down for the \u0022state = \u0022 line.\n\u003C/p\u003E\n"},{"CreatedByName":"vger","CreatedById":67603,"CreatedDateTime":"2016-06-11T03:18:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625070\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465561521\u0022 data-ipsquote-userid=\u0022102894\u0022 data-ipsquote-username=\u0022Nathair\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, Nathair said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGetting to the point in the game where you\u0027re thinking about stations suggests that you\u0027ve done a bunch of preliminary stuff. How many missions do you have ongoing? How many flags, how many satellites, how much (as Tw1 mentioned) debris in orbit or scattered around various moons and planets?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe game doesn\u0027t do complex calculations with craft you\u0027re not focused on, does it? Resource usage should be minimal with all except what you\u0027re focused on.\n\u003C/p\u003E\n"},{"CreatedByName":"Archgeek","CreatedById":116048,"CreatedDateTime":"2016-06-11T06:45:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222626021\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465609944\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYes, a new save with a single test vessel would be best. \u00A0Launch it, quicksave, search the .sfs for ModuleDockingNode and look a couple of lines down for the \u0022state = \u0022 line.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI made a test rig that went shielded port =\u0026gt; small service bay with a .jr in it =\u0026gt; mk1 inline port =\u0026gt; adapter =\u0026gt; mk2 cargo bay with a .jr in it =\u0026gt; mk2 inline port =\u0026gt; adapter =\u0026gt; 2.5m service bay with normal docking port in it =\u0026gt; adapter =\u0026gt; mk3 cargo bay with sr. in it =\u0026gt; mk3 mono tank as a bulkhead =\u0026gt; mk3 cargo ramp with sr. in it.\n\u003C/p\u003E\n\u003Cp\u003E\nGetting the data from the .sfs and figuring out which things were which by cross-referencing the .craft file, I wound up with this:\n\u003C/p\u003E\n\u003Cp\u003E\ndockingPortLateral (mk1 inline): Disabled\u003Cbr\u003E\ndockingPort1 (shielded): Disabled\u003Cbr\u003E\ndockingPort3(jr in small service bay): Ready\u003Cbr\u003E\nmk2DockingPort:Disabled\u003Cbr\u003E\ndockingPortLarge(sr in cargo ramp): Ready\u003Cbr\u003E\ndockingPortLarge(sr in mk3 cargo bay): Ready\u003Cbr\u003E\ndockingPort2: (size 1 in 2.5m service bay)Ready\u003Cbr\u003E\ndockingPort3(jr in mk2 cargo bay): Ready\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt seems you were quite right, only the animated ports went into the disabled state -- the others were still active regardless of the state of their containers.\n\u003C/p\u003E\n"},{"CreatedByName":"Tw1","CreatedById":59717,"CreatedDateTime":"2016-06-11T13:55:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222625342\u0022 data-ipsquote-contentid=\u0022141528\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221465574292\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 hours ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWell, yes.\n\u003C/p\u003E\n\u003Cp\u003E\nThat\u0027s exactly what it is doing, but it looks at all the parts to find docking ports and checks those for distance.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWoops, that was poorly worded. I meant within the distance that ports start to attract, but thinking about it, sounds like finding out what those parts are in the first place might make it just as bad or worse than what it\u2019s doing currently.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThough this sounds like an argument for using the shielded docking ports, if they\u0027re not active until open.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"pandaman","CreatedById":130621,"CreatedDateTime":"2016-06-11T14:51:25Z","Content":"\n\u003Cp\u003E\nOK. \u00A0Very interesting stuff.\n\u003C/p\u003E\n\u003Cp\u003E\nSo...\u003Cspan style=\u0022line-height:1.6;\u0022\u003E\u00A0If I understand correctly, shielded docking ports with shields closed and all docking ports that are docked don\u0027t cause this issue, but ANY ports that are available to be docked to (even those inside closed bays etc.) have the search performed and so therefore add to the resulting lag.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022line-height:1.6;\u0022\u003EIs this the case, or have I misunderstood some detail?\u003C/span\u003E\n\u003C/p\u003E\n"}]}