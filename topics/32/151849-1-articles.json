{"TopicId":151849,"ForumId":32,"TopicTitle":"Custom part not inheriting texture from surrogate.","CreatedByName":"DrunkenKerbalnaut","CreatedById":169550,"CreatedDateTime":"2016-11-11T02:32:04Z","PageNum":1,"Articles":[{"CreatedByName":"DrunkenKerbalnaut","CreatedById":169550,"CreatedDateTime":"2016-11-11T02:32:04Z","Content":"\n\u003Cp\u003E\nI copied and modified the Stratus-V Monopropellant tank (leaving the original intact) to make a \u003Cabbr title=\u0022Liquid Fuel\u0022\u003ELF\u003C/abbr\u003E/OX radial tank. Everything works as intended, except the tank doesn\u0027t inherit the texture from the original part. The cfg file references \u0022mesh\u0022 and so I\u0027ve left it alone where it resolves as\u00A0\u0022model\u0022. \u00A0I assumed this just looks to whatever model shares the same folder as said cfg file. Except it isn\u0027t doing that, and the tanks just have a standard grey\u00A0scale texture, in-game.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSomething tells me I\u0027m missing something obvious.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00225SLW3ua.jpg\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/5SLW3ua.jpg\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-11T05:49:12Z\u0022 title=\u002211/11/2016 05:49  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 11, 2016\u003C/time\u003E by DrunkenKerbalnaut\u003C/strong\u003E\n\u003Cbr\u003Eadd screen cap\n\u003C/span\u003E\n"},{"CreatedByName":"Sharpy","CreatedById":145504,"CreatedDateTime":"2016-11-11T05:01:43Z","Content":"\n\u003Cp\u003E\n1) every texture and model is loaded on startup.\n\u003C/p\u003E\n\u003Cp\u003E\n2) cfg files are loaded. If the file has a MODEL{} entry, it will assign itself to that specific model. If it has mesh= entry, it will completely ignore whatever filename mesh= contains and pick the first available model from the .cfg\u0027s directory (even with complete disregard of the MODEL entry if present in the same .cfg, so use either of those, not both.)\n\u003C/p\u003E\n\u003Cp\u003E\n3) Model contains texture file names and types but not paths. It picks the texture files from... I believe the same directory it\u0027s in, but I\u0027m not entirely sure if not from the .cfg directory. If it fails to find the texture, it remains black. If the texture is wrong format, it won\u0027t load at all.\n\u003C/p\u003E\n\u003Cp\u003E\n4) If the MODEL entry contains a texture replacement entry, the texture on the model is replaced with the one pointed to. Assuming the model had some texture. If it failed to load the initial texture for one reason or another, this won\u0027t work.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, your easiest option is to keep the tank model, cfg and texture file in one separate folder. If you want to save memory, reference the model by its path in MODEL cfg entry, keep a 2x2px texture of the same format as the model uses, and use texture replace entry to restore the texture from the stock folder.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-11T05:02:32Z\u0022 title=\u002211/11/2016 05:02  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 11, 2016\u003C/time\u003E by Sharpy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DrunkenKerbalnaut","CreatedById":169550,"CreatedDateTime":"2016-11-11T05:48:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222846564\u0022 data-ipsquote-contentid=\u0022151849\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221478840503\u0022 data-ipsquote-userid=\u0022145504\u0022 data-ipsquote-username=\u0022Sharpy\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n25 minutes ago, Sharpy said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n-snip-\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFirst of all, thanks for trying to help.\n\u003C/p\u003E\n\u003Cp\u003E\n1)I\u0027ve been closing KSP to make any changes, so shouldn\u0027t be an issue.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n2-4) I\u0027ll just answer by showing you what I\u0027ve got. Prob should have done that to begin with \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0.\u00A0Check \u003Cabbr title=\u0022Original Post(er). The first post in a thread, or the person who posted it.\u0022\u003EOP\u003C/abbr\u003E for image of file paths and .cfg in question.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Sharpy","CreatedById":145504,"CreatedDateTime":"2016-11-11T06:20:13Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/169550-drunkenkerbalnaut/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022169550\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/169550-drunkenkerbalnaut/\u0022 rel=\u0022\u0022\u003E@DrunkenKerbalnaut\u003C/a\u003E: I was just listing points what happens, not your problems.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, the answer to your problem is in \u0022Model contains texture file names and types but not paths\u0022.\n\u003C/p\u003E\n\u003Cp\u003E\nmodel.mu looks for ksp_r_rcsCylTank_diff.dds in the current directory (/Squad/Parts/FuelTank/fuelTankStratusX/) and doesn\u0027t find it. There\u0027s nothing that would suggest it should load ksp_r_fuelTankStratusX.dds instead, or look for the texture in a different directory.\n\u003C/p\u003E\n"},{"CreatedByName":"DrunkenKerbalnaut","CreatedById":169550,"CreatedDateTime":"2016-11-11T08:49:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222846610\u0022 data-ipsquote-contentid=\u0022151849\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221478845213\u0022 data-ipsquote-userid=\u0022145504\u0022 data-ipsquote-username=\u0022Sharpy\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Sharpy said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n-snip-\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAh. I think I see what your saying. What program are you using to access the .dds and .mu files?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: Yup. Works great now. For posterity: I\u0027m a doofus \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0. Thanks again, kind stranger.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-11T09:06:02Z\u0022 title=\u002211/11/2016 09:06  AM\u0022 data-short=\u00227 yr\u0022\u003ENovember 11, 2016\u003C/time\u003E by DrunkenKerbalnaut\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sharpy","CreatedById":145504,"CreatedDateTime":"2016-11-11T15:05:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222846696\u0022 data-ipsquote-contentid=\u0022151849\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221478854178\u0022 data-ipsquote-userid=\u0022169550\u0022 data-ipsquote-username=\u0022DrunkenKerbalnaut\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, DrunkenKerbalnaut said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAh. I think I see what your saying. What program are you using to access the .dds and .mu files?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: Yup. Works great now. For posterity: I\u0027m a doofus \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0. Thanks again, kind stranger.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n.mu - no simple way to edit them. Import into Blender using MU import plugin, save as .blend or one of supported programs, import into Unity.\n\u003C/p\u003E\n\u003Cp\u003E\n.dds - GIMP with DDS plugin; alternatively IrfanView to convert to .png, edit and save as .png with Gimp, edit .mu (through Blender-\u0026gt;Unity) to use .png instead of .dds\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"DrunkenKerbalnaut","CreatedById":169550,"CreatedDateTime":"2016-11-11T15:12:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222846900\u0022 data-ipsquote-contentid=\u0022151849\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221478876730\u0022 data-ipsquote-userid=\u0022145504\u0022 data-ipsquote-username=\u0022Sharpy\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n49 minutes ago, Sharpy said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n-snip-\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGotcha. Actually found said plugin for the ol\u0027 GIMP. Having export issues, but that\u0027s another thing entirely.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo .mu is the actual polygon mesh? Is this also where nodes are defined?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-11T15:55:06Z\u0022 title=\u002211/11/2016 03:55  PM\u0022 data-short=\u00227 yr\u0022\u003ENovember 11, 2016\u003C/time\u003E by DrunkenKerbalnaut\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Sharpy","CreatedById":145504,"CreatedDateTime":"2016-11-11T15:36:07Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/169550-drunkenkerbalnaut/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022169550\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/169550-drunkenkerbalnaut/\u0022 rel=\u0022\u0022\u003E@DrunkenKerbalnaut\u003C/a\u003E: .mu is much more than that. It\u0027s all the meshes of the part, their animations, hierarchy and shaders/materials minus the very texture image. It\u0027s special objects and meshes - colliders, raycasts/transforms (wheel/ground contact area; engine thrust point; lamps with specific light cones), particle emitters/exhaust/smoke (again with everything except the particle texture/picture; but all behaviors of the emitter defined), controls for dynamic animation (like wheel suspension).\n\u003C/p\u003E\n\u003Cp\u003E\nThey are contain everything that Unity can contribute to KSP - .cfg contains stuff that is KSP-specific, not providable by Unity. Minus texture images - although .mu still specifies \u0027base\u0027 colors that show through partially transparent textures, colors the parts take due to shadows, emissive colors (engine glow; LED lights), particle color (alpha-blended with whatever the particle image provides; make particle pic white and you can color it arbitrarily in Unity), and so on, and so forth. They also specify filenames for textures, normal maps and emissive maps, and their layout (UV maps) although not content of these files (emissive map defines what locations of part glow, but color information is ignored, taken from .mu instead.)\n\u003C/p\u003E\n\u003Cp\u003E\nEverything about a part that is not defined in .cfg is defined in .mu; .cfg also binds KSP\u0027s modules (thrust, FX emission, special functions like toggleable animations) to their respective objects in .mu (through MODULE entries.) .cfg can also apply a few tweaks - rescale the model; replace the texture (though original must still be present even if as token dummy 2x2px), reposition the model relative to game logic\u0027s \u0027middle\u0027, and several more such tweaks/modifications, so that you can reuse the same model for several parts.\n\u003C/p\u003E\n\u003Cp\u003E\nInterestingly, NODES, are one of few things not defined in .mu - although they could have been (like transforms) - they are fully defined in .cfg through node_stack_..., and node_attach_... controls.\n\u003C/p\u003E\n"},{"CreatedByName":"DrunkenKerbalnaut","CreatedById":169550,"CreatedDateTime":"2016-11-11T15:51:30Z","Content":"\n\u003Cp\u003E\nWow. I just got educated! Thanks for taking the time to explain. You\u0027ve only triggered more questions, but I think I\u0027ll just download blender again and make a mess first. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0 I have a need for a few niche structural parts anyways. Modular roll cage tubes and bends. Man, just when this game starts feeling old hat, it presents\u00A0a new discipline to explore.\u00A0\n\u003C/p\u003E\n"}]}