{"TopicId":148540,"ForumId":32,"TopicTitle":"Tired of refreshing your KSP install?","CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2016-09-24T13:43:21Z","PageNum":1,"Articles":[{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2016-09-24T13:43:21Z","Content":"\n\u003Cp\u003E\nI\u2019m in the camp where I think \u201Cbest practice\u201D is to leave my Steam\u2122 installation alone, and copy the entire KSP folder to a different spot and use\u00A0\u003Cem\u003Ethat\u003C/em\u003E\u00A0to play KSP with. That also has the advantage that you can keep your existing 1.1.3 install while frolicking around with the 1.2 pre-release.\n\u003C/p\u003E\n\u003Cp\u003E\nOf course there is the boring act of copying over the files from Steam when a new pre-release-release has taken place. A simple file copy will do, but there\u2019s always the theoretical risk of leaving files from a previous release that are no longer needed. More thorough is to remove all existing files, but keep your mods and saves, and then copy the new release over.\n\u003C/p\u003E\n\u003Cp\u003E\nTo get a clean update, every single time, I\u2019ve written a simply Python script that does all that for me. I\u2019m sure there is room for improvement\u2014let me know!\n\u003C/p\u003E\n\u003Cp\u003E\nThe advantage of using a script like this is the ability to extend it. This weekend I\u0027ll add a function to change some of the settings (notably using IJKL to steer rovers, and running KSP in window mode) for instance. That will be easy at this point.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, I thought sharing wouldn\u2019t be harmful. Enjoy!\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n# ---------------------------------------------------------------------------\n# update KSP installation by copying over from steam\n# ---------------------------------------------------------------------------\n\nimport os, shutil\nfrom zipfile import * \n\n# source is the location of your steam (squad?) copy\nSOURCE = r\u0027C:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program\u0027\n# dest is the actual install you\u0027re playing with\nDEST = r\u0027C:\\Users\\Kerbart\\Documents\\Kerbal Space Program 1.2\u0027\n# zipfile is where the data is temporarily saved. your system temp folder \n# would be good. or a ramdrive, if you have one.\nZIPFILE = r\u0027R:\\kspsave.zip\u0027\n# the exception list of directories NOT to back up\nEXCEPT = [\u0027saves\\\\scenarios\u0027,\u0027saves\\\\training\u0027,\u0027gamedata\\\\squad\u0027]\n\ndef main():\n    exec(\u0027Backup\u0027, makeZip)\n    exec(\u0027Clear\u0027, clearDest)\n    exec(\u0027Copy\u0027, copyAll)\n    exec(\u0027Restore\u0027, extractZip)\n    print(\u0027Done\u0027)\n    \ndef exec(title, function):\n    print(title)\n    function()\n    \ndef clearDest():\n    shutil.rmtree(DEST)\n    \ndef copyAll():\n    shutil.copytree(SOURCE, DEST)\n\ndef extractZip():\n    myZip = ZipFile(ZIPFILE, mode=\u0027r\u0027)\n    myZip.extractall(DEST)\n\ndef makeZip():\n    myZip = ZipFile(ZIPFILE, mode=\u0027w\u0027)\n    process_sub_path(DEST, \u0027gamedata\u0027, myZip)\n    process_sub_path(DEST, \u0027saves\u0027, myZip)\n    myZip.close()\n\ndef process_sub_path(base_path, sub_path, zipfile):\n    full_path = os.path.join(base_path, sub_path)\n    for name in os.listdir(full_path):\n        short_path = os.path.join(sub_path, name)\n        if short_path.lower() in EXCEPT:\n            pass\n        else:\n            full_name = os.path.join(base_path, sub_path, name)\n            if os.path.isfile(full_name):\n                zipfile.write(full_name, short_path, ZIP_DEFLATED)\n            elif os.path.isdir(full_name):\n                process_sub_path(base_path, short_path, zipfile)\n\nif __name__ == \u0027__main__\u0027:\n    main()\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-24T13:47:00Z\u0022 title=\u002209/24/2016 01:47  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 24, 2016\u003C/time\u003E by Kerbart\u003C/strong\u003E\n\u003Cbr\u003EUgly sentence.\n\u003C/span\u003E\n"},{"CreatedByName":"klgraham1013","CreatedById":105132,"CreatedDateTime":"2016-09-24T15:06:30Z","Content":"\n\u003Cp\u003E\nMy current KSP folder.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022fPl5KTg.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/fPl5KTg.png\u0022\u003E\u003C/p\u003E\n"}]}