{"TopicId":111324,"ForumId":32,"TopicTitle":"Squadcast Summary (2015-05-30) - Mu Joins In!","CreatedByName":"BudgetHedgehog\uFEFF","CreatedById":104112,"CreatedDateTime":"2015-05-30T00:46:54Z","PageNum":4,"Articles":[{"CreatedByName":"brdavis","CreatedById":88788,"CreatedDateTime":"2015-05-30T16:27:59Z","Content":"\u003E \n\u003E TIL: Almost nobody ever docks anything together.\n\n\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6or separates stages, or fairings, of boosters..."},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-05-30T16:38:24Z","Content":"You know, I wonder if they fixed the remaining leaks when flying over terrain because I\u0027m still getting major memory leaks while doing biome hopping."},{"CreatedByName":"One-Way Films","CreatedById":90926,"CreatedDateTime":"2015-05-30T17:29:26Z","Content":"\u003E \n\u003E The U5 physics benchmarks I\u0027ve read about show significant performance improvements even when single-threaded, sometimes as much as 30%. I\u0027m expecting to see a modest performance increase for single craft and a bigger jump for multiple craft in physics range.\n\n Here\u0027s a stress test in Unity 4 and 5. Just in case anyone needed it.\n\n\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/GgpN8CMBfzU?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"basic.syntax","CreatedById":109920,"CreatedDateTime":"2015-05-30T17:34:47Z","Content":"\u003E \n\u003E You know, I wonder if they fixed the remaining leaks when flying over terrain because I\u0027m still getting major memory leaks while doing biome hopping.\n\nIs that with the Nuke engine? I\u0027m noticing temp gauges are re-enabled every time I load into or switch active ship, that\u0027s one place it could be coming from."},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-05-30T17:45:03Z","Content":"\u003E \n\u003E Is that with the Nuke engine? I\u0027m noticing temp gauges are re-enabled every time I load into or switch active ship, that\u0027s one place it could be coming from.\n\nNo, I have a mod plugin that disables the temp gauges. I\u0027m trying with a near-stock (only a few mods, exceptiondetector, hangar extender, MM for the config that adds MJ to all command pods, MJ, KJR, GCmonitor, and tempgaugekiller) to see if it reproduces in that situation or what."},{"CreatedByName":"basic.syntax","CreatedById":109920,"CreatedDateTime":"2015-05-30T18:41:27Z","Content":"\u003E \n\u003E Regarding the editor aerodynamic stability overlay, it\u0027s still pencilled in...\n\nI was just listening to the twitch archive: around 44:15, Maxmaps had a minor facepalm moment, when he used the word \u0022*absolutely*,\u0022 instead of the usual \u0022*maybe*\u0022 that you\u0027re supposed to use, when talk about future plans ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)*\u0022...we just got conned into revealing...\u0022* a feature planned for v1.1. Blame smjjames for the twitch question ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) They went on to say that the constant evolution of how aerodynamics was working during development, from week to week, made it difficult to finalize the stability overlay during the \u00221.0\u0022 cycle."},{"CreatedByName":"eddiew","CreatedById":127483,"CreatedDateTime":"2015-05-30T19:27:30Z","Content":"\u003E \n\u003E Also, brace yourself - multithreaded physics incoming ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\n...well that\u0027s so epic I\u0027m actually considering holding off KSP until it happens, just so\u0027s I\u0027ll be keen and raring to go when it does! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Yellowburn10","CreatedById":107558,"CreatedDateTime":"2015-05-30T19:40:52Z","Content":"Quick question: when the unity 5 stuff is done, are they going to release it with 1.1 stuff, or have in it\u0027s own patch release?"},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-05-30T20:09:06Z","Content":"\u003E \n\u003E I was just listening to the twitch archive: around 44:15, Maxmaps had a minor facepalm moment, when he used the word \u0022*absolutely*,\u0022 instead of the usual \u0022*maybe*\u0022 that you\u0027re supposed to use, when talk about future plans ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)*\u0022...we just got conned into revealing...\u0022* a feature planned for v1.1. Blame smjjames for the twitch question ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) They went on to say that the constant evolution of how aerodynamics was working during development, from week to week, made it difficult to finalize the stability overlay during the \u00221.0\u0022 cycle.\n\nIt was an innocent question wondering about the development of the in-editor aerodynamics overlay, lol ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-05-30T20:16:01Z","Content":"\u003E \n\u003E I was just listening to the twitch archive: around 44:15, Maxmaps had a minor facepalm moment, when he used the word \u0022*absolutely*,\u0022 instead of the usual \u0022*maybe*\u0022 that you\u0027re supposed to use, when talk about future plans ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)*\u0022...we just got conned into revealing...\u0022* a feature planned for v1.1. Blame smjjames for the twitch question ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) They went on to say that the constant evolution of how aerodynamics was working during development, from week to week, made it difficult to finalize the stability overlay during the \u00221.0\u0022 cycle.\n\n\u003E \n\u003E It was an innocent question wondering about the development of the in-editor aerodynamics overlay, lol ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nJust to be clear, you (smjjames) asked if it would be in, and Max replied that it *absolutely* would be in 1.0.3?"},{"CreatedByName":"basic.syntax","CreatedById":109920,"CreatedDateTime":"2015-05-30T20:28:49Z","Content":"\u003E \n\u003E Just to be clear, you (smjjames) asked if it would be in, and Max replied that it *absolutely* would be in 1.0.3?\n\n\u0027absolutely\u0027 **v1.1** (followed by a big smile and quick regret at the slip, and a nod to smjjames for drawing it out.) Note to be clear, Mu went on to reiterate \u0022*penciled in.*\u0022\n @Yellowburn10: v1.1 is a major update, which will be built on the Unity 5 platform. \n\n\u003E \n\u003E *[in regards to multithreaded physics]*  ...well that\u0027s so epic I\u0027m actually considering holding off KSP until it happens, just so\u0027s I\u0027ll be keen and raring to go when it does! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nCan you maintain hype level for 4-6 months? lol. It\u0027s a major update ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) I couldn\u0027t wait that long, w/o doing some rocketry experiments along the way ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\n**Edited \u003Ctime datetime=\u00222015-05-30T20:59:17Z\u0022 title=\u002205/30/2015 08:59  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by basic.syntax**"},{"CreatedByName":"Hobbes Novakoff","CreatedById":129018,"CreatedDateTime":"2015-05-30T20:29:19Z","Content":"Is the 2x performance increase in PhysX including or independent of the gains from multithreading?"},{"CreatedByName":"smjjames","CreatedById":134004,"CreatedDateTime":"2015-05-30T20:45:11Z","Content":"\u003E \n\u003E Just to be clear, you (smjjames) asked if it would be in, and Max replied that it *absolutely* would be in 1.0.3?\n\nNo, I asked if it would be in 1.1.\n\nI\u0027m hard of hearing, so I didn\u0027t get the reply from max, though there was some reactions in the chat to it.\n\n**Edited \u003Ctime datetime=\u00222015-05-30T20:48:55Z\u0022 title=\u002205/30/2015 08:48  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by smjjames**"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2015-05-31T00:08:15Z","Content":"\u003E \n\u003E \u0027absolutely\u0027 **v1.1** (followed by a big smile and quick regret at the slip, and a nod to smjjames for drawing it out.) Note to be clear, Mu went on to reiterate \u0022*penciled in.*\u0022\n\n\u003E \n\u003E No, I asked if it would be in 1.1.\n\nThanks to both of you for the clarifications. So I can be excited for 1.0.3 a little less, and 1.1 a little more ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"godefroi","CreatedById":101728,"CreatedDateTime":"2015-05-31T04:25:56Z","Content":"\u003E \n\u003E One thread does **NOT** equal one core.\n\u003E \n\u003E Each core consists of a number of threads.\n\u003E \n\u003E KSP is and has always been multithreaded (but uses a single core). The physics engine is only single threaded, but it so far dominates the other threads in terms of required processing power that KSP might as well be single threaded.\n\u003E \n\u003E Take the i3 processor for example. It has two cores. Each core has two threads. So the Physics engine can use (about) one quarter of the i3\u0027s processing power. With Unity 5, the Physics engine will be able to use at least an entire core (I\u0027m not sure on the exact details) so it would use at least half, with the rest of the game (and most likely everything else) running on a different core. More advanced processors have either more cores, more threads per core, or both. Less advanced processor would have fewer (currently allowing KSP to use more of their processing power) but are less powerful overall.\n\nI appreciate that you\u0027re trying, but nearly everything you wrote here is factually incorrect.\n\nYou\u0027re confusing multithreading (the programming concept) with \u0022Simultaneous Multi-Threading\u0022, or what Intel calls \u0022HyperThread\u0022 technology. SMT is the practice of creating \u0022virtual cores\u0022 out of a single core, allowing multiple threads to execute at the same time on the same core (sometimes). This works because some CPUs have hardware that sometimes goes unused by a single thread (for example, a CPU might have multiple ALUs per core); and so the CPU can expose multiple virtual cores, and provided two threads don\u0027t both need all the resources, they can both execute simultaneously. If they both need something that there\u0027s only one of (such as the FPU), then they can\u0027t execute simultaneously, and the two \u0022virtual cores\u0022 perform just the same as a single core.\n\nMultithreading (the programming concept) is the practice of breaking the program into separate \u0022threads\u0022 of execution, each of which can be thought of a bit like a separate program. Because your CPU generally spends most of its time waiting for things (reading from disk, writing to disk, reading from the network), it can suspend one thread and execute another, instead of sitting around idle.\n\nGenerally, threads are not assigned \u0022affinity\u0022 (which locks them to a single core), because CPUs and operating systems are pretty good at deciding what to execute, when, and where. Setting affinity usually leads to decreased performance, where CPUs go back to sitting around waiting for non-CPU things to do their thing.\n\nKSP right now is multithreaded, and is multithreaded regardless of whether you have one, ten, or a hundred cores, and whether any of those cores use SMT or not. KSP will use any cores that are available to it. Sitting here looking at the KSC, KSP has 33 threads going. Unless you have more than 33 cores, KSP will use up to all your cores simultaneously, if the OS decides that it needs to (i.e., all those 33 threads need to do work at the same time). Most likely, all but a small number of those threads are sitting around doing nearly nothing.\n\n- - - Updated - - -\n\n\u003E \n\u003E Further to NecroBone\u0027s (excellent) explanation, AMD also has some oddness regarding cores: There are twice as many integer units as floating point units. So an eight core processor will perform like an eight core when doing integer tasks but only a four core when doing floating point tasks. IIRC most of the physics work in KSP is floating point, so AMD users should expect threading gains to be similar to a system with half as many cores.\n\nAs far as I know, that\u0027s true with Intel as well, if you\u0027re counting \u0022hardware threads\u0022 instead of \u0022cores\u0022. In Task Manager, look at \u0022cores\u0022, not \u0022logical processors\u0022. If newer Intel CPUs have multiple FPUs per core, I\u0027m not aware of it. They do have multiple ALUs, but like you said, most of the interesting work being done in KSP is going to need the FPU.\n\n\u003E \n\u003E In the olden days, programs were all single-threads, and there was no multi-tasking\n\nYeah, in the VERY olden days. If you\u0027ve never used anything but Windows, you\u0027re definitely too young to remember life in a single-threaded world. Even the PDP-8 had preemptive multitasking."},{"CreatedByName":"TheMoonRover","CreatedById":136199,"CreatedDateTime":"2015-05-31T17:35:22Z","Content":"\u003E \n\u003E everything you wrote here is factually incorrect\n\nYes, I gathered that. Everything I wrote I had been previously told by someone I know who knows (or rather claims to know, as I now know) about computers. Although I suppose it is like him to explain something he doesn\u0027t really know about. \n\nI was aware that the processor suspends alternate threads (time-wise) if there are too many for nit to run simultaneously. Thanks for explaining anyway.\n\nHow much was right then? From what you and others have said it looks like:\n\n\u003E \n\u003E *One thread does* ***NOT*** *equal one core.*\n\u003E *Each core consists of a number of threads.*\n\u003E \n\u003E *KSP is and has always been multithreaded* *(but uses a single core).* *The physics engine is only single threaded, but it so far dominates the other threads in terms of required processing power* *that KSP might as well be single threaded.*\n\u003E \n\u003E *Take the i3 processor for example. It has two cores.* *Each core has two threads. So the Physics engine can use (about) one quarter of the i3\u0027s processing power. With Unity 5, the Physics engine will be able to use at least an entire core (I\u0027m not sure on the exact details) so it would use at least half, with the rest of the game (and most likely everything else) running on a different core.* *More advanced processors* *could* *have* *either* *more cores,* *more threads per core, or both.* *Less advanced processor* *c**ould have fewer* *(currently allowing KSP to use more of their processing power)* *but are less powerful overall.*"},{"CreatedByName":"Eric S","CreatedById":57117,"CreatedDateTime":"2015-05-31T18:07:40Z","Content":"\u003E \n\u003E Is the 2x performance increase in PhysX including or independent of the gains from multithreading?\n\nI doubt we\u0027ll see 2x performance without multithreading gains. The PhysX devs released some microbenchmarks that indicated that the rigid body physics model that KSP uses got about a 50% speed increase between 2.8.X and 3.3, and that\u0027s generally been considered the most processor-intensive portion of KSP. Even then, microbenchmarks tend to indicate the maximum possible improvement, not the level of improvement that real world applications will see."},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-05-31T18:49:42Z","Content":"\u003E Yeah, in the VERY olden days. If you\u0027ve never used anything but Windows, you\u0027re definitely too young to remember life in a single-threaded world. Even the PDP-8 had preemptive multitasking.\n\nYup, you have to go back pretty far now. Though the experience in DOS on the early PCs was pretty close. I don\u0027t really think of interrupt-driven TSRs as \u0022multitasking\u0022, even though it was a sort of primitive form of it. Heh ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"SciMan","CreatedById":12748,"CreatedDateTime":"2015-05-31T20:30:42Z","Content":"Can someone explain why they can\u0027t use more than one physics simulation thread per vessel? (EDIT - In a Unity5 Version of KSP, aka hopefully v1.1\u002B)\n\nFirst 3 reasons I can come up with for that are:\n\n1. Program instability (program crash in PhysX that can\u0027t be fixed by Squad)\n\n2. Difficulty creating a truly multi-threaded application (more than one thread per task isn\u0027t easy to do for complex tasks)\n\n3. Using multiple threads for single vessel physics results in EVEN MORE physics weirdness than we have now (wobbly rockets, phantom forces, spontaneous disassembly, random acceleration to superluminal velocities, etc.)\n\nOption 1 is worst-case scenario IMO, as it means waiting on an outside 3rd party to update their stuff. (like waiting for a Unity engine update, but worse)\n\nOption 2 might take a LOT of time to work out, but it\u0027s VERY worth it in the end.\n\nOption 3 probably means tweaking a few constants, and going thru the program several times finding and fixing the root causes of NaN bugs as well as calculations that result in \u002B- infinity.\n\nI just hope it\u0027s something that means \u0022needs more time to get working\u0022 instead of \u0022can\u0027t ever be made to work\u0022.\n\n**Edited \u003Ctime datetime=\u00222015-05-31T20:36:36Z\u0022 title=\u002205/31/2015 08:36  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 31, 2015\u003C/time\u003E by SciMan**"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-31T20:32:08Z","Content":"You forgot 4, it\u0027s a Unity4x limitation, which the move to Unity5 will address."},{"CreatedByName":"SciMan","CreatedById":12748,"CreatedDateTime":"2015-05-31T20:35:59Z","Content":"Ah, right. I didn\u0027t state it in my post, but I meant \u0022why can\u0027t they use more than one physics thread per single vessel in a Unity5 version of KSP?\u0022\n\nEdited initial post to clarify, noted as an edit so your post still makes sense."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-31T20:41:57Z","Content":"Thanks, but from what I\u0027ve read so far, all that is taken care of by the Unity5 engine, and completely hidden from the developer, so it\u0027d take rewriting how Unity5 handles physics threads to accomplish what you have in mind.\n\nA Unity developer who has Unity5 might be able to tell us what options if any are available, [**or you could take a look here.**](http://docs.unity3d.com/Manual/UpgradeGuide5-Physics.html)"},{"CreatedByName":"SciMan","CreatedById":12748,"CreatedDateTime":"2015-05-31T21:14:35Z","Content":"I gave that a read and understood a lot more of it than I thought I would.\n\nStuff I understood: (and what I think it might do)\n\nAdaptive force defaults to off, can be reset to on (not sure, might make rockets less wobbly? Probably not)\n\nSmooth sphere collisions removed from terrain and meshes (something something landing leg colliders?)\n\nSprings expose larger amplitudes (Re-tuning of landing leg suspension springs?)\n\nSetting terrain physics material changed, dedicated functions to do it now instead of setting it thru the TerrainData (able to set wheel/leg/part slip factor based on biome?)\n\nShape casting and sweeping changes, Compound collider events (maybe useful for figuring out what parts of a vessel are shielded from aerodynamic physics?)\n\nTriggers and dynamic colliders must be convex (Not sure about what this might do, I remember something about convex colliders already being required by KSP)\n\nRagdoll joint changes (Kerbals on EVA will be a lot less stretchy, even under unusual conditions)\n\nRigidbody constraints applied in local space (probably gets rid of a lot of causes of phantom forces, might make rockets less wobbly)\n\nWheelCollider (lots of changes to rover wheels and landing gear)\n\nCloth (not much change, flags might flap a bit differently)\n\nOther than that, I can\u0027t find anything about multi-threaded performance in that except for a claim that physics might work up to 2x faster, which isn\u0027t backed up by any examples or details. So, interesting stuff, but it doesn\u0027t exactly answer my question."},{"CreatedByName":"basic.syntax","CreatedById":109920,"CreatedDateTime":"2015-05-31T21:49:28Z","Content":"SciMan, [this is (one of) the main threads discussing Unity 5](https://forum.kerbalspaceprogram.com/threads/72925-Unity-5-Is-now-available/page26). You might find some tidbits in it. Although, you are probably ahead of it, if reading on Unity forums ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"SciMan","CreatedById":12748,"CreatedDateTime":"2015-05-31T22:03:51Z","Content":"Good point. Most of my interest comes from the fact that right now I\u0027m severely part count constrained. Any vessel that has much more than 250 parts slows my game to a crawl of less than 5 frames per second. So I\u0027m forced to do as much with as few parts as possible. Which means that making a mothership that can do a grand tour is pretty much impossible without something like KSPI or those Karborundum Fusion Torch engines from RoverDude\u0027s K\u002B mod.\n\nBasically, I can BUILD stuff that can do that, but I can\u0027t FLY it, because I would need the patience of a saint to fly anything with that many parts."}]}