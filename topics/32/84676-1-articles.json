{"TopicId":84676,"ForumId":32,"TopicTitle":"Shielded Docking Port and Advanced Grabbing Unit Performance","CreatedByName":"Gyse","CreatedById":122162,"CreatedDateTime":"2014-09-15T16:06:44Z","PageNum":1,"Articles":[{"CreatedByName":"Gyse","CreatedById":122162,"CreatedDateTime":"2014-09-15T16:06:44Z","Content":"\n\u003Cp\u003EFirstly, I apologize if this is in the wrong forum, I am not specifically asking for support, and there may not be a bug here. I was mostly curious if others had observed something similar.\u003C/p\u003E\u003Cp\u003EI believe the advanced grabbing unit and shielded docking port have significantly worse performance per part than other comparable parts (non-shielded docking ports, such as the clamp-o-tron and clamp-o-tron sr).\u003C/p\u003E\u003Cp\u003EThese tests are not scientific, but I felt it might be worthwhile to share what I observed. Firstly, the results were duplicated across two separate machines (although very similarly spec\u0027d), both running the Windows 32bit .24.2 version of KSP. I used a career save that I started when the .24 patch was released.\u003C/p\u003E\u003Cp\u003E1. Core i7 x980, 12gb Ram, Windows 7 64bit with an nVidia GeForce GTX 660 Ti.\u003C/p\u003E\u003Cp\u003E2. Core i7 2500k 8gb Ram, Windows 7 64bit with an nVidia GeForce GTX 660 Ti.\u003C/p\u003E\u003Cp\u003EBoth KSPs used default settings, other than running windowed mode at 1680x1050.\u003C/p\u003E\u003Cp\u003EI was attempting to build a large station, and my first attempt was a 3fps nightmare. So I decided I would do testing this time to see how big I could get while maintaining an acceptable framerate. I first built the base with fuel pods, other various structural parts, and a few command units. It was around 250 parts, and dropped my framerate to about 35fps. This was on the launch pad, with a stable base so there was no swaying or other interactions. I conducted all further testing from this point.\u003C/p\u003E\u003Cp\u003EI first added a variety of large (6), medium (shielded version, 4), and small (4) docking ports, with 4 advanced grabbing units, and observed the framerate immediately dropped to \u0026lt;10. I then started doing individual tests, only doing one part at a time.\u003C/p\u003E\u003Cp\u003ETo my surprise, I observed adding 1 Advanced Grabbing Unit would drop my framerate from 35 to about 28 or so, a second one knocked it to about 20.\u003C/p\u003E\u003Cp\u003EWhen I tested a shielded docking port, I noticed something similar, although not as pronounced. A single shielded docking port seemed to knock my framerate down by about 3 or 4.\u003C/p\u003E\u003Cp\u003EThe part that confused me was when I then went and added non-shielded versions, Clamp-O-Tron Srs, Jrs, and regular versions, the framerate did not drop a noticeable amount. My current version has 6 Clamp-O-Tron Srs., 14 Clamp-O-Trons, and 2 Clamp-O-Tron Jrs, and my framerate is around 33.\u003C/p\u003E\u003Cp\u003EI understand I have no knowledge as to how the part was actually implemented, but I liked using the Shielded docking ports because a) I liked the look better and \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E I figured when the shield was \u0022closed\u0022 the docking port would be \u0022off\u0022 and the reverse of what I observed would be true, they would be cheaper to have on your ship. I assumed the same would be true of the advanced grabbing unit and used them for the same reason (along with allowing ships with no docking port to dock to the station).\u003C/p\u003E\u003Cp\u003EI did not test if the framerate changed for either item, with them open / armed vs closed. When I found the framerate dropped to an unacceptable level with any of those parts at all used, I simply removed them.\u003C/p\u003E\u003Cp\u003EI also observed command units, the unmanned versions, had a noticeable fps drop and using only ONE on my base helped framerate as well, although this was only 1 or so fps per unit and that drop seemed to make sense. My station was to go up in parts, so I had multiple command units to dock the parts more easily. I adjusted my design so those units were undocked with the launch vehicle after the station was joined.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-09-15T17:32:08Z","Content":"\n\u003Cp\u003EThat\u0027s an interesting find. One thing the claw and shielded docking port have in common is they have animations associated with them, maybe that\u0027s the root cause.\u003C/p\u003E\n"},{"CreatedByName":"Franklin","CreatedById":89718,"CreatedDateTime":"2014-09-15T17:53:14Z","Content":"\n\u003Cp\u003EIf it is an issue with animated parts, that may look bad when .25 is released with SP\u002B\u0027s docking bays and all the kids complain that .25 has miserable FPS when they\u0027re flying their new planes.\u003C/p\u003E\n"},{"CreatedByName":"Stratzenblitz75","CreatedById":108287,"CreatedDateTime":"2014-09-15T17:53:33Z","Content":"\n\u003Cp\u003EYea, I have experienced this before when I placed ~5-10 ARM klaws on one ship. Even though the ship was about 100 parts, the lag made it almost unplayable.\u003C/p\u003E\n"},{"CreatedByName":"Sky_walker","CreatedById":113214,"CreatedDateTime":"2014-09-15T18:26:08Z","Content":"\n\u003Cp\u003EHmmm.... that would explain why my space station with 4 claws and 5 shielded docking ports runs at ~17 FPS instead of usual 60.\u003C/p\u003E\u003Cp\u003ECan you try filling in a bug report for it? Sounds like you just found a new, rather large problem with the game. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Jon Tash","CreatedById":2681,"CreatedDateTime":"2014-09-15T18:37:56Z","Content":"\n\u003Cp\u003EInteresting find there, that explains alot of the lag I have. I always use the shielded docking port because they look cooler instead of the normal docking port. If this is the case I won\u0027t be using the shielded one till there is one that doesn\u0027t generate this much lag, maybe I should look for one of the mods. Time to redesign everything now. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif\u0022 alt=\u0022:huh:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Gyse","CreatedById":122162,"CreatedDateTime":"2014-09-15T18:39:00Z","Content":"\n\u003Cp\u003EI just submitted a bug report. Hopefully this is something they can fix (without requiring Unity 5).\u003C/p\u003E\n"},{"CreatedByName":"Gyse","CreatedById":122162,"CreatedDateTime":"2014-09-15T18:54:21Z","Content":"\n\u003Cp\u003EOne extra bit of information. My final station also has 12 of the largest solar arrays, and runs at 33 fps. Those units have animations as well, so it doesn\u0027t seem to be every part with an animation. However since I did not observe a problem, I did not test those parts (solar arrays, landing gear, etc...) for a per frame loss.\u003C/p\u003E\u003Cp\u003EI only checked (fps loss per part starting with an object that had the base framerate of around 35fps):\u003C/p\u003E\u003Cp\u003EAdvanced Grabbing Unit: 7 - 10fps\u003C/p\u003E\u003Cp\u003EShielded Docking Port: 3 - 4 fps\u003C/p\u003E\u003Cp\u003EClamp-O-Tron Sr.: negligible\u003C/p\u003E\u003Cp\u003EClamp-O-Tron: negligible\u003C/p\u003E\u003Cp\u003EClamp-O-Tron Jr.: negligible\u003C/p\u003E\u003Cp\u003EVarious unmanned command units: 1fps\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-09-15T18:57:49Z","Content":"\n\u003Cp\u003EPerhaps it has to do with animated docking ports (the claw is really a docking port by another name).\u003C/p\u003E\n"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2014-09-15T19:05:51Z","Content":"\n\u003Cp\u003EBind them to toggle on action key, when launched arm then disarm them all, have fun with no extra lag\u003C/p\u003E\n"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2014-09-15T19:09:29Z","Content":"\n\u003Cp\u003E\u003Cimg src=\u0022http://puu.sh/bAlPM/b97c2d5917.jpg\u0022 alt=\u0022b97c2d5917.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EThis is with other things in the background around ksc (11fps without)\u003C/p\u003E\n"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2014-09-15T19:16:00Z","Content":"\n\u003Cp\u003EAlso this is a threading issue, when using the key binding to toggle the grabbers, there\u0027s 20% less CPU usage so should be a relatively easy bug to fix.\u003C/p\u003E\n"},{"CreatedByName":"Gyse","CreatedById":122162,"CreatedDateTime":"2014-09-15T19:17:25Z","Content":"\n\u003Cp\u003ESo I just verified what Linear said. I added 1 advanced grabbing unit to my final station. I was at 23 fps. I then armed it, my fps went up to 31. I then disarmed it. During the animation my fps was at 23, but when it reset, it went back up to 31 again.\u003C/p\u003E\u003Cp\u003EI did not use a macro, I just right clicked on the part. Thanks Linear, while a tiny bit annoying, this at least lets me use those parts.\u003C/p\u003E\u003Cp\u003EI assume every time I load in to the station (when it is in orbit) I would need to repeat this (once per load, not once forever)?\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-09-15T20:38:55Z","Content":"\n\u003Cp\u003EI had a similar experience when 0.23.5 came out. I tried an asteroid-tug with 7 of the claws attached (one in the center, and six on detachable RCS pods), and I got about half the framerate that I would get on a comparable ship without the claws. I redesigned it to have only three of them, and the framerate was considerably better.\u003C/p\u003E\u003Cp\u003EMy suspicion is that they have multiple complex collision meshes, making the physics calculations run slower.\u003C/p\u003E\n"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2014-09-15T21:20:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gyse\u0022 data-cite=\u0022Gyse\u0022\u003E\u003Cdiv\u003ESo I just verified what Linear said. I added 1 advanced grabbing unit to my final station. I was at 23 fps. I then armed it, my fps went up to 31. I then disarmed it. During the animation my fps was at 23, but when it reset, it went back up to 31 again.\u003Cp\u003EI did not use a macro, I just right clicked on the part. Thanks Linear, while a tiny bit annoying, this at least lets me use those parts.\u003C/p\u003E\u003Cp\u003EI assume every time I load in to the station (when it is in orbit) I would need to repeat this (once per load, not once forever)?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOnce per load, as i think the animation mesh is stored when the part is loaded (should be loaded upon button event) - the animating mesh is only disposed once the disarm event is loaded again.\u003C/p\u003E\u003Cp\u003EThat\u0027s the theory, think it\u0027s correct.\u003C/p\u003E\u003Cp\u003EGlad i helped\u003C/p\u003E\n"}]}