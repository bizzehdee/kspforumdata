{"TopicId":89335,"ForumId":32,"TopicTitle":"A funny thing happened to the aero parts","CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2014-11-03T22:05:51Z","PageNum":1,"Articles":[{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2014-11-03T22:05:51Z","Content":"\n\u003Cp\u003EI was trawling through the .cfg files of all the aero parts to update my KSP-scripts, and found a gem in the aero parts.\u003C/p\u003E\u003Cp\u003ELet\u0027s compare the drag coefficients of a normal rocket part (0.2 at any angle of attack, the blue line), a Mk2 long tank (red \u002B), and an Mk2 short tank (green x):\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/R9c0z6i.png\u0022 alt=\u0022R9c0z6i.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThat\u0027s the drag *coefficient*, before you multiply by the mass. So if you want to fly on an Mk2 long tank, you could instead fly on a pair of Mk2 short tanks. You\u0027d get the same lift, the same mass, the same amount of fuel, but less drag -- much less at high angle of attack. At high angle of attack, the long tank is worse than the standard rocket tanks (but we\u0027re talking very high, more than 30 degrees).\u003C/p\u003E\u003Cp\u003EAll the new-to-me (i.e. released in 0.23.5, 0.24, or 0.25) surfaces have this \u0022feature\u0022: the smaller the elevon, the lower the drag coefficient, which means that two elevon4 are the same mass and lift as one elevon3, but at half the drag.\u003C/p\u003E\u003Cp\u003EI assume it\u0027s a misunderstanding by the author of the new parts. The mass and lift have to be reduced by half for a half-sized part. But the drag generally shouldn\u0027t be, because it gets multiplied by the mass later.\u003C/p\u003E\n"},{"CreatedByName":"Werwolf","CreatedById":38001,"CreatedDateTime":"2014-11-03T22:43:26Z","Content":"\n\u003Cp\u003EGood catch. Have you posted this in the bugs forum?\u003C/p\u003E\n"},{"CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2014-11-03T23:07:59Z","Content":"\n\u003Cp\u003EI noticed that about some of the new control surfaces; some of them are ridiculously drag-free... at least on paper. \u003C/p\u003E\u003Cp\u003E I haven\u0027t worked out a test rig yet to verify the behavior in-game.\u003C/p\u003E\u003Cp\u003EBest,\u003C/p\u003E\u003Cp\u003E-Slashy\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-11-03T23:10:06Z","Content":"\n\u003Cp\u003EI wish we had more info on how lift is calculated. The deflection lift \u0022coefficient\u0022 is twice as large in the large tank, depending on how lift is calculated it might be appropriate for the Cd to change in such a way. It\u0027s also not clear how the Module Lifting Surface calculates drag either.\u003C/p\u003E\u003Cp\u003EI\u0027m going to run some tests and see if the smaller tank falls faster than the larger, see what empirical evidence shows.\u003C/p\u003E\u003Cp\u003EEdit: Some initial test results:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003ETest rig hauling tanks up:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/61004449/ksp/misc/screenshot88.png\u0022 alt=\u0022screenshot88.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EUpon separation the smaller tanks accelerate quicker, but I think this is due to the decoupler force being equal for both tanks so it accelerates the smaller tank more:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/61004449/ksp/misc/screenshot89.png\u0022 alt=\u0022screenshot89.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThey quickly settled into a fixed formation, falling at the same terminal velocity:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/61004449/ksp/misc/screenshot92.png\u0022 alt=\u0022screenshot92.png\u0022\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not sure if this is the expected result or not. The tanks are falling edge on so I don\u0027t know what their AoA is, if it\u0027s equivalent to nose on they might be using the min AoA value so there\u0027s no variation between them. I\u0027ll try another rig and see if I can find better results.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-03T23:29:39Z\u0022 title=\u002211/03/2014 11:29  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 3, 2014\u003C/time\u003E by Red Iron Crown\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ival70","CreatedById":75336,"CreatedDateTime":"2014-11-03T23:15:50Z","Content":"\n\u003Cp\u003EI\u0027ve done a few casual \u0022tests\u0022 and the results seem to confirm this. I might go back now and do some more serious experiments to get some data.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-11-03T23:57:35Z","Content":"\n\u003Cp\u003EA better test rig, with the tanks set to have a 45 degree AoA and eliminating decoupler force from the equation, you\u0027re definitely on to something here:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/61004449/KSP/Misc/screenshot102.png\u0022 alt=\u0022screenshot102.png\u0022\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/61004449/KSP/Misc/screenshot104.png\u0022 alt=\u0022screenshot104.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/61004449/KSP/Misc/screenshot106.png\u0022 alt=\u0022screenshot106.png\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://dl.dropboxusercontent.com/u/61004449/KSP/Misc/screenshot108.png\u0022 alt=\u0022screenshot108.png\u0022\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EThe smaller tanks fall much faster, indicating they have much less drag. Not sure how lift was affected, though I did observe that the pairs of big tanks flipped over so that the multinode part faced down before crashing while the smaller tanks did not.\u003C/p\u003E\u003Cp\u003EEdit to add: I tried the same test again but instead doubled up the small tanks so that the masses would be equal. Same result, the smaller tanks fall faster.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-04T01:18:28Z\u0022 title=\u002211/04/2014 01:18  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 4, 2014\u003C/time\u003E by Red Iron Crown\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2014-11-04T00:12:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003EI wish we had more info on how lift is calculated\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/numerobis/KSP-scripts/blob/master/lift.py\u0022 rel=\u0022external nofollow\u0022\u003EThis\u003C/a\u003E is how it\u0027s calculated. For lifting surfaces and \u0022winglet\u0022 parts (which is most of the wings), there\u0027s a function of angle of attack that grows until about 35 degrees and then falls off to zero. For control surfaces, that function is the sin of AoA.\u003C/p\u003E\u003Cp\u003EThe lift force depends on that function, the air pressure, the deflectionLiftCoeff value, and the speed. It doesn\u0027t depend on the mass, so if you want to denote that your lifting surface is twice as big, you have to double the lift coefficient.\u003C/p\u003E\u003Cp\u003EThe drag is computed by taking the sin(AoA), interpolating according to that between dragAtMinAoA and dragAtMaxAoA (or between zero and dragCoeff). That gives you the drag coefficient. That plugs into the drag formula: 0.008 * air density * v^2 * dragCoefficient * mass. That depends on the mass, so if your part is twice as big, you\u0027ll double the mass, and drag will follow suit. If you also double the dragCoefficient, you\u0027ve overcorrected.\u003C/p\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2014-11-04T00:16:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThe smaller tanks fall much faster, indicating they have much less drag. Not sure how lift was affected, though I did observe that the pairs of big tanks flipped over so that the multinode part faced down before crashing while the smaller tanks did not.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh cool. Flipping is consistent with my calculation. The docking node has drag 0.2; the big tanks at 45 degrees AoA have drag 0.24, so they\u0027d want to be on top. The small tanks have drag 0.13, so they remain on the bottom.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-11-04T01:08:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022numerobis\u0022 data-cite=\u0022numerobis\u0022\u003E\u003Cdiv\u003E\u003Ca href=\u0022https://github.com/numerobis/KSP-scripts/blob/master/lift.py\u0022 rel=\u0022external nofollow\u0022\u003EThis\u003C/a\u003E is how it\u0027s calculated. For lifting surfaces and \u0022winglet\u0022 parts (which is most of the wings), there\u0027s a function of angle of attack that grows until about 35 degrees and then falls off to zero. For control surfaces, that function is the sin of AoA.\u003Cp\u003EThe lift force depends on that function, the air pressure, the deflectionLiftCoeff value, and the speed. It doesn\u0027t depend on the mass, so if you want to denote that your lifting surface is twice as big, you have to double the lift coefficient.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow did you arrive at the lift formula? Is it derived empirically or through some other method?\u003C/p\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2014-11-04T01:22:31Z","Content":"\n\u003Cp\u003EThrough code inspection, verified by my planes taking off almost exactly as the speed predicts.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-11-04T01:38:31Z","Content":"\n\u003Cp\u003EFascinating. I was about to suggest you let mhoram know for his Physics of KSP reference, but I see you\u0027ve already posted in that thread.\u003C/p\u003E\u003Cp\u003EBack to this topic: I would consider this a bug, have you reported it as such? I really don\u0027t think the devs intended for the simulation to reward breaking craft up into many smaller parts, which is what this would seem to do.\u003C/p\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2014-11-04T01:51:06Z","Content":"\n\u003Cp\u003ENo, I just noticed it yesterday and worked this out today in detail. How does bug reporting work these days?\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-11-04T01:58:29Z","Content":"\n\u003Cp\u003EThe \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/\u0022 rel=\u0022external nofollow\u0022\u003Ebugtracker\u003C/a\u003E is probably best. If for whatever reason you\u0027d rather stick to the forums, there are provisions for reporting bugs in the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/forums/76-Support-%28unmodded-installs%29\u0022 rel=\u0022external nofollow\u0022\u003ESupport forum\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EThis is something that really should be fixed, I wish I knew how to write ModuleManager cfgs as I\u0027m pretty sure it can be fixed with that.\u003C/p\u003E\n"},{"CreatedByName":"GoSlash27","CreatedById":111526,"CreatedDateTime":"2014-11-04T02:46:59Z","Content":"\n\u003Cp\u003ESomething that\u0027s so self-evident that I\u0027d never really thought much about it:\u003C/p\u003E\u003Cp\u003ELift/drag is equal to the inverse of t/w in cruising flight. This is because in level flight where you\u0027re not accelerating, lift equals weight and drag equals thrust.\u003C/p\u003E\u003Cp\u003E It should be a fairly straightforward task to fly in various regimes and empirically determine the lift- to- drag for various components and see if the math lines up.\u003C/p\u003E\u003Cp\u003EBest,\u003C/p\u003E\u003Cp\u003E-Slashy\u003C/p\u003E\n"},{"CreatedByName":"bsalis","CreatedById":32928,"CreatedDateTime":"2014-11-04T08:23:14Z","Content":"\n\u003Cp\u003ESo are we finding faults with the areo model in the game? It\u0027s going to be a looong thread.\u003C/p\u003E\n"},{"CreatedByName":"Cirocco","CreatedById":100285,"CreatedDateTime":"2014-11-04T08:54:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bsalis\u0022 data-cite=\u0022bsalis\u0022\u003E\u003Cdiv\u003ESo are we finding faults with the areo model in the game? It\u0027s going to be a looong thread.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Enot really. We\u0027re finding inconcistencies and exploitables.\u003C/p\u003E\u003Cp\u003EMight still be a long thread, but a helpful one.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-11-04T10:56:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bsalis\u0022 data-cite=\u0022bsalis\u0022\u003E\u003Cdiv\u003ESo are we finding faults with the areo model in the game? It\u0027s going to be a looong thread.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot exactly. Numerobis has discovered an interesting inconsistency in the .cfg files for some aerodynamic parts, fixing it doesn\u0027t require any changes to the aero model but instead some minor edits to the cfgs.\u003C/p\u003E\n"},{"CreatedByName":"ratchet freak","CreatedById":119895,"CreatedDateTime":"2014-11-04T11:29:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003ENot exactly. Numerobis has discovered an interesting inconsistency in the .cfg files for some aerodynamic parts, fixing it doesn\u0027t require any changes to the aero model but instead some minor edits to the cfgs.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ewhat happens if you put the V upside down (or right side up as it were), do the small tanks flip over so the multinode is pointing up?\u003C/p\u003E\n"},{"CreatedByName":"Ted","CreatedById":26298,"CreatedDateTime":"2014-11-04T11:50:17Z","Content":"\n\u003Cp\u003EInteresting find there, nicely done!\u003C/p\u003E\u003Cp\u003ECould you place this on the bug tracker when you get a moment?\u003C/p\u003E\u003Cp\u003EThanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-11-04T11:51:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ratchet freak\u0022 data-cite=\u0022ratchet freak\u0022\u003E\u003Cdiv\u003Ewhat happens if you put the V upside down (or right side up as it were), do the small tanks flip over so the multinode is pointing up?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI would expect it to, but I\u0027m not at my KSP computer at the moment to try it.\u003C/p\u003E\n"},{"CreatedByName":"numerobis","CreatedById":62016,"CreatedDateTime":"2014-11-04T13:15:37Z","Content":"\n\u003Cp\u003ECome to think of it, the test rig would be better without the multinodes, or at least with doubling the short tanks so that the mass is the same.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-11-04T13:23:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022numerobis\u0022 data-cite=\u0022numerobis\u0022\u003E\u003Cdiv\u003ECome to think of it, the test rig would be better without the multinodes, or at least with doubling the short tanks so that the mass is the same.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe same thing occurred to me about doubling the tanks, I edited the post after to say that I tried with the short tanks doubled and got the same results.\u003C/p\u003E\u003Cp\u003EMy initial test rig had no multinodes, but this was problematic as the tanks would want to rotate to zero AoA and equal drag. The pictured rig was able to keep them at the appropriate AoA, but I\u0027m certain there\u0027s room for a better test rig design.\u003C/p\u003E\n"},{"CreatedByName":"Laie","CreatedById":110461,"CreatedDateTime":"2014-11-04T13:53:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003EI\u0027m certain there\u0027s room for a better test rig design.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA) Put them on top of a booster, or boosters. the higher TWR the better, so as to maximise drag. launch straight up. Note altitude of flameout. \u003C/p\u003E\u003Cp\u003EA1) Autostage boosters through mechjeb. Note peak altitude in F3.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E Attach a few winglets so that the tanks become self-stabilising gliders. Put them in a 10km \u0022orbit\u0022 using hyperedit (or as high as necessary so they won\u0027t come apart). Note time-to-impact.\u003C/p\u003E\u003Cp\u003EEdit, just tried a quick variant of B: attached small reaction wheel, mechjeb for command, a few ox-stats for power. Used the hyperedit lander to lift it to 5000m, then let it drop.\u003C/p\u003E\u003Cp\u003ETime-to-impact was 51 seconds for the large tank, 45 seconds for two short tanks.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-04T14:10:53Z\u0022 title=\u002211/04/2014 02:10  PM\u0022 data-short=\u00229 yr\u0022\u003ENovember 4, 2014\u003C/time\u003E by Laie\u003C/strong\u003E\n\u003C/span\u003E\n"}]}