{"TopicId":111198,"ForumId":32,"TopicTitle":"[HOWTO] avoid moded memory crashes with openGL: 12 steps for victory","CreatedByName":"scavenger","CreatedById":111989,"CreatedDateTime":"2015-05-29T00:33:24Z","PageNum":1,"Articles":[{"CreatedByName":"scavenger","CreatedById":111989,"CreatedDateTime":"2015-05-29T00:33:24Z","Content":"hi kerb all\n\nI ran into several issues since the 1.0.2 went out, and after having passed a lot of time everywhere, and somewhat having found fair enough working solutions, I guess it\u0027s time to post ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nThis post follows the thread from **Samlow** - [Memory leak \u0026 Memory cap Crash to desktop workarounds](http://ttp//forum.kerbalspaceprogram.com/threads/122251-Memory-leak-Memory-cap-Crash-to-desktop-workarounds) - and compile its ideas and the latest tricks I found.\n\n**PURPOSE**: avoid 1.0.2 moded crashes (especially during ascention phase) and frustration\n\n**PRE-REQUISITES**:\n\n- having more than 4GB system RAM. These advices are useless otherwise, as the main problem is KSP is a 32 bits application that cannot address more than 3.8GB RAM somewhat\n\n- wanting loads of mods\n\n- and visual enhancements.\n\n- and unlimited debris\n\n- and visual light and shadow quality maxed out to 64\n\n- and maybe astronomers pack for those who dare (currently almost not even working in LOW resolution with 1.0.2). \n\n**SYMPTOMS**: sudden crashes anytime and illegible log output generation (and impossible to revert flight (and more frustration))\n\n**METHOD**: just plug off your brain and follow the 12 steps method bellow. For loads of mods and NO crashes. AT ALL. Anymore. Ever. ![:sticktongue:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif)\n\nsystem:\n\nstep 0: Windows 32 bits users: enable PAE with elevated command prompt: \u0022BCDEdit /set PAE forceenable\u0022\n\nstep 0b: Windows 64 bits users may patch KSP.exe with [NTCore\u0027s 4GB patch](http://www.ntcore.com/4gb_patch.php)\n\nstep 0c: create your [10mn savegames rotation tool](https://forum.kerbalspaceprogram.com/threads/123198-rotate-saves-every-10-minutes)\n\nstep 1: uninstall ALL your mods (delete all under \\GameData\\ except \u0022Squad\u0022 dir)\n\nstep 2: install [CKAN](https://forum.kerbalspaceprogram.com/threads/100067-The-Comprehensive-Kerbal-Archive-Network-%28CKAN%29-Package-Manager-v1-6-16-13-May-2015) in some other dir\n\nCKAN:\n\nstep 3: run CKAN and set it up, select KSP dir, then refresh, then \u0022Filter Compatible\u0022 button\n\nstep 4a: If you really go for [Astronomer\u0027s Visual Pack](https://forum.kerbalspaceprogram.com/threads/79345-Astronomer-s-Visual-pack-V3-BETA-is-out-and-it-looks-great!), tick it at first, before any other mod, as there is an obscure way to install it that only CKAN knows about. And choose LOW settings.\n\nstep 4b: tick the mods you want.\n\nstep 5: add these 3 mods: [Graphic Memory Monitor](https://forum.kerbalspaceprogram.com/threads/92907) , [Temperature Gauge Killer](https://kerbalstuff.com/mod/775) , [Active Texture Management - aggressive](https://forum.kerbalspaceprogram.com/threads/59005-0-23-5-Release-3-1-Active-Texture-Management-Save-RAM-without-reduction-packs!)\n\nstep 6: switch KSP to **opengl** with Settings --\u003E KSP command-line --\u003E \u0022KSP.exe -force-opengl -popupwindow\u0022\n\nstep 7: if you choosed [Scatterer mod](https://forum.kerbalspaceprogram.com/threads/115408-WIP-Scatterer-atmospheric-scattering-mod-%28v0-014_Experimental-26-04-2015%29), edit the files under \\GameData\\scatterer\\config\\\\*.txt to disable Anisotropic filtering (forceOFFaniso = **True**)\n\nlaunch:\n\nstep 8: launch the [savegame rotate batch](https://forum.kerbalspaceprogram.com/threads/123198-rotate-saves-every-10-minutes)\n\nstep 9: launch KSP via CKAN to be in opengl (or create an msdos batch than can include the savegame rotate)\n\nin game:\n\nstep 10: turn off PPFX in settings / nope, useless as it doesn\u0027t save any memory\n\nstep 11: ENJOY\n\nHave a look from time to time at the memory value on the left edge of the screen. At load with my 35 mods, I run at 1,8GB. Then it goes up, and up, each time I switch from the VAB to the launchpad to the map to the game back, and so fort.\n\nstep 12: When you start reading **3,400\u002BMB** it is time to stop what you were doing, SAVE, and **exit** the game.\n\nI am deadly serious. Passed the 3,400 MB limit, it will increase to 3,600MB quite rapidly, then crash at 3,800MB.\n\n**NOTES:**\n\nIf you really do as above, AND strictly stick to the critical step 12, you will never have a crash anymore ![:cool:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif)\n\nIf you still have a crash, which I doubt if you follow the instructions, the 10mn savegames rotate will save your launch ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nDo not forget to set up **anti aliasing** with your GC 3D control panel, and **Threaded optimization** or anything that can improve performance, there are numerouse threads about that.\n\n**APPENDIX**:\n\n- I am not sure whether step 0b is still necessary as of version 1.0.2 but better use it than be sad / nope, doesn\u0027t change anything, game is still crashing passed the 3,600MB memory usage\n\n- PAE explained by Billou: [Physical Address Extention](https://msdn.microsoft.com/en-us/library/windows/desktop/aa366796%28v=vs.85%29.aspx)\n\n- [CKAN](https://forum.kerbalspaceprogram.com/threads/100067-The-Comprehensive-Kerbal-Archive-Network-%28CKAN%29-Package-Manager-v1-6-16-13-May-2015) is better than [KSPModAdmin](https://forum.kerbalspaceprogram.com/threads/26031-AnyOS-KSP-Mod-Admin-v2-Mod-install-with-a-few-clicks) because KSPModAdmin gets sloooooow with just 10 mods added\n\n- step 5 can be completed with [Critical Temperature Gauge](https://forum.kerbalspaceprogram.com/threads/119686-1-0-2-Critical-temperature-gauge-%28DR-supported%29) mod\n\n- step 7 covers a [known bug between Scatterer and OpenGL](https://forum.kerbalspaceprogram.com/threads/115408-WIP-Scatterer-atmospheric-scattering-mod-%28v0-014_Experimental-26-04-2015%29) where strange lines will appear in the sky\n\n- step 8 and 9 can done with a batch containing these 2 lines, placed in the KSP\\_win directory:\n\n    start \\loop_saves.batstart KSP.exe -force-opengl -popupwindow\n\n- step 0c is critical. If you played for 2 hours then crash a launch that costs you 9/10 of your funds, the savegame you would have done before launching the game would also means loosing all of your 2 hours progression...\n\n**Bugs and ideas covered**:\n\n[Memory leak \u0026 Memory cap Crash to desktop workarounds](https://forum.kerbalspaceprogram.com/threads/122251-Memory-leak-Memory-cap-Crash-to-desktop-workarounds) by **Samlow** \n\n[KSP memory management by Warenschultz](http://warrenschultz.com/kerbal-space-program-memory-management/)\n\n[Less memory usage by using OpenGL](https://forum.kerbalspaceprogram.com/threads/84203-Less-memory-usage-by-using-OpenGL)\n\n[New heat system causes memory leaks](https://forum.kerbalspaceprogram.com/threads/118658-New-Heat-System-causes-memory-leak?p=1938584\u0026viewfull=1#post1938584)\n\n[Critical Temperature gauges memory leak](https://kerbalstuff.com/mod/775)\n\n[OpenGL mode doesn\u0027t work](https://forum.kerbalspaceprogram.com/threads/117307-OpenGL-Mode-Doesn-t-Work)\n\n[Astronomer\u0027s Visual Pack crashes on load](https://forum.kerbalspaceprogram.com/threads/116407-Astronomers-Visual-Pack-crashing-KSP-on-load-%28)\n\n[Unexpected crashes](https://forum.kerbalspaceprogram.com/threads/123187-Unexpected-crashes)\n\n[rotate savegames every 10 mn](https://forum.kerbalspaceprogram.com/threads/123198-rotate-saves-every-10-minutes)\n\n**Edited \u003Ctime datetime=\u00222015-05-30T03:32:58Z\u0022 title=\u002205/30/2015 03:32  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by scavenger**\n  \nupdate"}]}