{"TopicId":111198,"ForumId":32,"TopicTitle":"[HOWTO] avoid moded memory crashes with openGL: 12 steps for victory","CreatedByName":"scavenger","CreatedById":111989,"CreatedDateTime":"2015-05-29T00:33:24Z","PageNum":1,"Articles":[{"CreatedByName":"scavenger","CreatedById":111989,"CreatedDateTime":"2015-05-29T00:33:24Z","Content":"\n\u003Cp\u003Ehi kerb all\u003C/p\u003E\u003Cp\u003EI ran into several issues since the 1.0.2 went out, and after having passed a lot of time everywhere, and somewhat having found fair enough working solutions, I guess it\u0027s time to post \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThis post follows the thread from \u003Cstrong\u003ESamlow \u003C/strong\u003E- \u003Ca href=\u0022http://ttp//forum.kerbalspaceprogram.com/threads/122251-Memory-leak-Memory-cap-Crash-to-desktop-workarounds\u0022 rel=\u0022external nofollow\u0022\u003EMemory leak \u0026amp; Memory cap Crash to desktop workarounds\u003C/a\u003E - and compile its ideas and the latest tricks I found.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EPURPOSE\u003C/strong\u003E: avoid 1.0.2 moded crashes (especially during ascention phase) and frustration\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EPRE-REQUISITES\u003C/strong\u003E:\u003C/p\u003E\u003Cp\u003E- having \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Emore\u003C/span\u003E than 4GB system RAM. These advices are useless otherwise, as the main problem is KSP is a 32 bits application that cannot address more than 3.8GB RAM somewhat\u003C/p\u003E\u003Cp\u003E- wanting loads of mods\u003C/p\u003E\u003Cp\u003E- and visual enhancements.\u003C/p\u003E\u003Cp\u003E- and unlimited debris\u003C/p\u003E\u003Cp\u003E- and visual light and shadow quality maxed out to 64\u003C/p\u003E\u003Cp\u003E- and maybe astronomers pack for those who dare (currently almost not even working in LOW resolution with 1.0.2). \u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ESYMPTOMS\u003C/strong\u003E: sudden crashes anytime and illegible log output generation (and impossible to revert flight (and more frustration))\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EMETHOD\u003C/strong\u003E: just plug off your brain and follow the 12 steps method bellow. For loads of mods and NO crashes. AT ALL. Anymore. Ever. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003Esystem:\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Estep 0: Windows 32 bits users: enable PAE with elevated command prompt: \u0022\u003Cspan style=\u0022color:#0000ff;\u0022\u003EBCDEdit /set PAE forceenable\u003C/span\u003E\u0022\u003C/p\u003E\u003Cp\u003Estep 0b: Windows 64 bits users may patch KSP.exe with \u003Ca href=\u0022http://www.ntcore.com/4gb_patch.php\u0022 rel=\u0022external nofollow\u0022\u003ENTCore\u0027s 4GB patch\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Estep 0c: create your \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/123198-rotate-saves-every-10-minutes\u0022 rel=\u0022external nofollow\u0022\u003E10mn savegames rotation tool\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Estep 1: uninstall ALL your mods (delete all under \\GameData\\ except \u0022Squad\u0022 dir)\u003C/p\u003E\u003Cp\u003Estep 2: install \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/100067-The-Comprehensive-Kerbal-Archive-Network-%28CKAN%29-Package-Manager-v1-6-16-13-May-2015\u0022 rel=\u0022external nofollow\u0022\u003ECKAN\u003C/a\u003E in some other dir\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003ECKAN:\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Estep 3: run CKAN and set it up, select KSP dir, then refresh, then \u0022Filter Compatible\u0022 button\u003C/p\u003E\u003Cp\u003Estep 4a: If you really go for \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/79345-Astronomer-s-Visual-pack-V3-BETA-is-out-and-it-looks-great!\u0022 rel=\u0022external nofollow\u0022\u003EAstronomer\u0027s Visual Pack\u003C/a\u003E, tick it at first, before any other mod, as there is an obscure way to install it that only CKAN knows about. And choose LOW settings.\u003C/p\u003E\u003Cp\u003Estep 4b: tick the mods you want.\u003C/p\u003E\u003Cp\u003Estep 5: add these 3 mods: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/92907\u0022 rel=\u0022external nofollow\u0022\u003EGraphic Memory Monitor\u003C/a\u003E , \u003Ca href=\u0022https://kerbalstuff.com/mod/775\u0022 rel=\u0022external nofollow\u0022\u003ETemperature Gauge Killer\u003C/a\u003E , \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/59005-0-23-5-Release-3-1-Active-Texture-Management-Save-RAM-without-reduction-packs!\u0022 rel=\u0022external nofollow\u0022\u003EActive Texture Management - aggressive\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Estep 6: switch KSP to \u003Cstrong\u003Eopengl\u003C/strong\u003E with Settings --\u0026gt; KSP command-line --\u0026gt; \u0022KSP.exe -force-opengl -popupwindow\u0022\u003C/p\u003E\u003Cp\u003Estep 7: if you choosed \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/115408-WIP-Scatterer-atmospheric-scattering-mod-%28v0-014_Experimental-26-04-2015%29\u0022 rel=\u0022external nofollow\u0022\u003EScatterer mod\u003C/a\u003E, edit the files under \u003Cspan style=\u0022color:#0000ff;\u0022\u003E\\GameData\\scatterer\\config\\*.txt \u003C/span\u003Eto disable Anisotropic filtering (\u003Cspan style=\u0022color:#696969;\u0022\u003EforceOFFaniso = \u003C/span\u003E\u003Cstrong\u003E\u003Cspan style=\u0022color:#696969;\u0022\u003ETrue\u003C/span\u003E\u003C/strong\u003E)\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003Elaunch:\u003C/span\u003E\u003C/p\u003E\u003Cp\u003Estep 8: launch the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/123198-rotate-saves-every-10-minutes\u0022 rel=\u0022external nofollow\u0022\u003Esavegame rotate batch\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Estep 9: launch KSP via CKAN to be in opengl (or create an msdos batch than can include the savegame rotate)\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003Ein game:\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#d3d3d3;\u0022\u003Estep 10: turn off PPFX in settings\u003C/span\u003E / nope, useless as it doesn\u0027t save any memory\u003C/p\u003E\u003Cp\u003Estep 11: ENJOY\u003C/p\u003E\u003Cp\u003EHave a look from time to time at the memory value on the left edge of the screen. At load with my 35 mods, I run at 1,8GB. Then it goes up, and up, each time I switch from the VAB to the launchpad to the map to the game back, and so fort.\u003C/p\u003E\u003Cp\u003Estep 12: When you start reading \u003Cstrong\u003E3,400\u002BMB\u003C/strong\u003E \u003Cspan style=\u0022text-decoration:underline;\u0022\u003Eit is time to stop what you were doing, SAVE, and \u003C/span\u003E\u003Cstrong\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003Eexit \u003C/span\u003E\u003C/strong\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003Ethe game\u003C/span\u003E.\u003C/p\u003E\u003Cp\u003EI am deadly serious. Passed the 3,400 MB limit, it will increase to 3,600MB quite rapidly, then crash at 3,800MB.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003ENOTES:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EIf you really do as above, AND strictly stick to the critical step 12, you will never have a crash anymore \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\u003Cp\u003EIf you still have a crash, which I doubt if you follow the instructions, the 10mn savegames rotate will save your launch \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EDo not forget to set up \u003Cstrong\u003Eanti aliasing\u003C/strong\u003E with your GC 3D control panel, and \u003Cstrong\u003EThreaded optimization\u003C/strong\u003E or anything that can improve performance, there are numerouse threads about that.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EAPPENDIX\u003C/strong\u003E:\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#d3d3d3;\u0022\u003E- I am not sure whether step 0b is still necessary as of version 1.0.2 but better use it than be sad\u003C/span\u003E / nope, doesn\u0027t change anything, game is still crashing passed the 3,600MB memory usage\u003C/p\u003E\u003Cp\u003E- PAE explained by Billou: \u003Ca href=\u0022https://msdn.microsoft.com/en-us/library/windows/desktop/aa366796%28v=vs.85%29.aspx\u0022 rel=\u0022external nofollow\u0022\u003EPhysical Address Extention\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E- \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/100067-The-Comprehensive-Kerbal-Archive-Network-%28CKAN%29-Package-Manager-v1-6-16-13-May-2015\u0022 rel=\u0022external nofollow\u0022\u003ECKAN\u003C/a\u003E is better than \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/26031-AnyOS-KSP-Mod-Admin-v2-Mod-install-with-a-few-clicks\u0022 rel=\u0022external nofollow\u0022\u003EKSPModAdmin\u003C/a\u003E because KSPModAdmin gets sloooooow with just 10 mods added\u003C/p\u003E\u003Cp\u003E- step 5 can be completed with \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/119686-1-0-2-Critical-temperature-gauge-%28DR-supported%29\u0022 rel=\u0022external nofollow\u0022\u003ECritical Temperature Gauge\u003C/a\u003E mod\u003C/p\u003E\u003Cp\u003E- step 7 covers a \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/115408-WIP-Scatterer-atmospheric-scattering-mod-%28v0-014_Experimental-26-04-2015%29\u0022 rel=\u0022external nofollow\u0022\u003Eknown bug between Scatterer and OpenGL\u003C/a\u003E where strange lines will appear in the sky\u003C/p\u003E\u003Cp\u003E- step 8 and 9 can done with a batch containing these 2 lines, placed in the KSP_win directory:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Estart \u0026lt;your path here\u0026gt;\\loop_saves.bat\u003Cbr\u003Estart KSP.exe -force-opengl -popupwindow\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E- step 0c is critical. If you played for 2 hours then crash a launch that costs you 9/10 of your funds, the savegame you would have done before launching the game would also means loosing all of your 2 hours progression...\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EBugs and ideas covered\u003C/strong\u003E:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/122251-Memory-leak-Memory-cap-Crash-to-desktop-workarounds\u0022 rel=\u0022external nofollow\u0022\u003EMemory leak \u0026amp; Memory cap Crash to desktop workarounds\u003C/a\u003E by \u003Cstrong\u003ESamlow \u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://warrenschultz.com/kerbal-space-program-memory-management/\u0022 rel=\u0022external nofollow\u0022\u003EKSP memory management by Warenschultz\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/84203-Less-memory-usage-by-using-OpenGL\u0022 rel=\u0022external nofollow\u0022\u003ELess memory usage by using OpenGL\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/118658-New-Heat-System-causes-memory-leak?p=1938584\u0026amp;viewfull=1#post1938584\u0022 rel=\u0022external nofollow\u0022\u003ENew heat system causes memory leaks\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://kerbalstuff.com/mod/775\u0022 rel=\u0022external nofollow\u0022\u003ECritical Temperature gauges memory leak\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/117307-OpenGL-Mode-Doesn-t-Work\u0022 rel=\u0022external nofollow\u0022\u003EOpenGL mode doesn\u0027t work\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/116407-Astronomers-Visual-Pack-crashing-KSP-on-load-%28\u0022 rel=\u0022external nofollow\u0022\u003EAstronomer\u0027s Visual Pack crashes on load\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/123187-Unexpected-crashes\u0022 rel=\u0022external nofollow\u0022\u003EUnexpected crashes\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/123198-rotate-saves-every-10-minutes\u0022 rel=\u0022external nofollow\u0022\u003Erotate savegames every 10 mn\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-30T03:32:58Z\u0022 title=\u002205/30/2015 03:32  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 30, 2015\u003C/time\u003E by scavenger\u003C/strong\u003E\n\u003Cbr\u003Eupdate\n\u003C/span\u003E\n"}]}