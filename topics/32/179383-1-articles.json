{"TopicId":179383,"ForumId":32,"TopicTitle":"Staging stack fuel level overlays cause slowdown","CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-29T20:30:25Z","PageNum":1,"Articles":[{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-29T20:30:25Z","Content":"\n\u003Cp\u003E\nMy craft is about 350 parts, with ~50 engines in one stage.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhen the engines are staged/enabled, my FPS drops to ~13. With the engines deactivated, it runs in excess of 30. If I decrease my engine count, I don\u0027t see this behavior, but at 2300t I kinda need quite a few engines..\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a way to disable these overlays? I don\u0027t need them with the fuel level readout in the upper right. Thanks.\n\u003C/p\u003E\n"},{"CreatedByName":"Atkara","CreatedById":169458,"CreatedDateTime":"2018-10-29T20:39:46Z","Content":"\n\u003Cp\u003E\nMaybe the problem isn\u0027t the fuel overlays, but the 50 engine exhausts, hitting the ground and generating the smoke effects. Try with surface FX disabled (you can find it in the graphics options)\n\u003C/p\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-29T21:00:49Z","Content":"\n\u003Cp\u003E\nAll my testing is with the ship in orbit - I expect to pay a performance penalty with the smoke/exhausts - but my FPS drops even with the engines throttled to 0% - the only difference is the overlays.\n\u003C/p\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-29T21:50:16Z","Content":"\n\u003Cp\u003E\nI think I may have tracked it down to autostrutting (not surprisingly, I should have tried this more extensively first!)\n\u003C/p\u003E\n"},{"CreatedByName":"KerikBalm","CreatedById":91917,"CreatedDateTime":"2018-10-30T07:45:12Z","Content":"\n\u003Cp\u003E\nhave you tried staging with throttle set to zero? to see if its the engine thrust calculations or the fuel overlays?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Dafni","CreatedById":149636,"CreatedDateTime":"2018-10-30T10:20:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223477712\u0022 data-ipsquote-contentid=\u0022179383\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540849816\u0022 data-ipsquote-userid=\u0022186673\u0022 data-ipsquote-username=\u0022Phreakish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, Phreakish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI think I may have tracked it down to autostrutting (not surprisingly, I should have tried this more extensively first!)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmm, interesting. Let us know how your research turns out.\n\u003C/p\u003E\n\u003Cp\u003E\nIntrigued myself, as hunting down mysterious performance drops seems to be a hobby of every seasoned KSP player.\n\u003C/p\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-30T16:06:45Z","Content":"\n\u003Cp\u003E\nI should mention up-front: 1.5.1, no mods (none, zero, zilch, nada). Launching from steam, or killing steam and launching stand-alone makes no difference.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTL;DR: if multiple clusters of engines are attached using radially mounted tanks to create nodes to make my own clusters, my performance is a disaster. But if I use stock clustering options, performance does not take as big of a hit, but will still start to \u0027stutter\u0027. It\u0027s not garbage collection, and it definitely has to do with engines being active (inactive, or unstaged engines do not have an effect).\n\u003C/p\u003E\n\u003Cp\u003E\nI did some more playing around and am even more confused now.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI installed memgraph last night too, and my \u0027stutters\u0027 don\u0027t line up with garbage collection. So it\u0027s not that.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve played with every graphic setting, Nvidia setting, etc with little to no change (lowest graphics settings were actually the worst performance too). I\u0027ve cold-booted, rebooted, applied updates and rebooted. I\u0027ve also tried my desktop (i7-3770 3.4ghz, 16g ram, P4000 8gb video card on Win10) and my laptop (2.8ghz, 32g ram, M5000 video on Win7). Both exhibit the same behavior - my desktop seems to deal slightly better and will deal with ~24 engines before it acts up.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried different engines (Vector, nukes, wolfhound, swivel) and that doesn\u0027t seem to matter either. Even if it\u0027s a combination. Any more than ~18 engines, and things begin to \u0027stutter\u0027. I have noticed though that if I radially attach tanks to a parent tank (or engine plate) and then cluster engines on THAT - the performance hit is the worst.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAn example is: if I use the kerbodyne engine cluster tank, I can put 5 wolfhounds on it. I then radially attached 4 jumbo-64 tanks and attached 4x cluster tanks to those. This gives me an engine cluster with 25 wolfhounds. I then alt-copied the root cluster tank and attached this same 25 engine cluster using symmetry to either side of my craft. This gives me 75 engines. This setup has moderate performance once in-orbit. It stutters slightly, but only just. It\u0027s playable though.\n\u003C/p\u003E\n\u003Cp\u003E\nI replicated the above example by radially attaching 4x FLT-TX220 tanks to an S4-64 tank. This also allows me 5x wolfhounds. I put them in the same array as the kerbodyne engine cluster tank yielding 75 engines on the craft. Same auto-strut arrangement. On-orbit, my FPS in the performance window is similar, but the screen updates every 3-5 seconds (Real time). The MET clock will show green, then flash yellow, then flash green again before the clock advances by 1 second. Totally unplayable.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEven if my FPS is higher (performance graph showing high of 40, low of 25-30) it will visibly \u0027stutter\u0027 along. I think what\u0027s happening is that active engines run through the physics differently from inactive ones. I reached this conclusion because if I use F2 and hide the interface, the stutter remains but if I bind engine activation to an action group, I can shutdown engines and the performance improves noticeably. When I reactivate, it slows back down. I think the engines within the physics calcs are causing me to tip into the physics time-delta and time is slowing down and then catching back up. The MET clock flashes yellow/green in cadence with the stutter. I\u0027ve changed the max delta, and tried .03, .05, .10 and all have behaved roughly the same. Increasing it to .10 seemed to help \u0027smooth\u0027 things over, but didn\u0027t eliminate it enough to be considered playable.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m thinking there\u0027s got to be a bug somewhere causing a massive slowdown in the physics calcs when engines are attached to radially mounted tanks. The same # of engines on stock clustering attachments doesn\u0027t cause as big of a slowdown. I have to imagine that there\u0027s still something else going on with regard to engines as well, because I can\u0027t think of a reason a deactivated engine should behave differently with regard to physics vs one at 0% throttle.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-30T16:08:52Z\u0022 title=\u002210/30/2018 04:08  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 30, 2018\u003C/time\u003E by Phreakish\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ZL647","CreatedById":192669,"CreatedDateTime":"2018-10-30T16:29:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223478034\u0022 data-ipsquote-contentid=\u0022179383\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540915605\u0022 data-ipsquote-userid=\u0022186673\u0022 data-ipsquote-username=\u0022Phreakish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 minutes ago, Phreakish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI should mention up-front: 1.5.1, no mods (none, zero, zilch, nada). Launching from steam, or killing steam and launching stand-alone makes no difference.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTL;DR: if multiple clusters of engines are attached using radially mounted tanks to create nodes to make my own clusters, my performance is a disaster. But if I use stock clustering options, performance does not take as big of a hit, but will still start to \u0027stutter\u0027. It\u0027s not garbage collection, and it definitely has to do with engines being active (inactive, or unstaged engines do not have an effect).\n\u003C/p\u003E\n\u003Cp\u003E\nI did some more playing around and am even more confused now.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI installed memgraph last night too, and my \u0027stutters\u0027 don\u0027t line up with garbage collection. So it\u0027s not that.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve played with every graphic setting, Nvidia setting, etc with little to no change (lowest graphics settings were actually the worst performance too). I\u0027ve cold-booted, rebooted, applied updates and rebooted. I\u0027ve also tried my desktop (i7-3770 3.4ghz, 16g ram, P4000\u003Cspan\u003E\uFEFF\u003C/span\u003E 8gb video card on Win10) and my laptop (2.8ghz, 32g ram, M5000 video on Win7). Both exhibit the same behavior - my desktop seems to deal slightly better and will deal with ~24 engines before it acts up.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried different engines (Vector, nukes, wolfhound, swivel) and that doesn\u0027t seem to matter either. Even if it\u0027s a combination. Any more than ~18 engines, and things begin to \u0027stutter\u0027. I have noticed though that if I radially attach tanks to a parent tank (or engine plate) and then cluster engines on THAT - the performance hit is the worst.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAn example is: if I use the kerbodyne engine cluster tank, I can put 5 wolfhounds on it. I then radially attached 4 jumbo-64 tanks and attached 4x cluster tanks to those. This gives me an engine cluster with 25 wolfhounds. I then alt-copied the root cluster tank and attached this same 25 engine cluster using symmetry to either side of my craft. This gives me 75 engines. This setup has moderate performance once in-orbit. It stutters slightly, but only just. It\u0027s playable though.\n\u003C/p\u003E\n\u003Cp\u003E\nI replicated the above example by radially attaching 4x FLT-TX220 tanks to an S4-64 tank. This also allows me 5x wolfhounds. I put them in the same array as the kerbodyne engine cluster tank yielding 75 engines on the craft. Same auto-strut arrangement. On-orbit, my FPS in the performance window is similar, but the screen updates every 3-5 seconds (Real time). The MET clock will show green, then flash yellow, then flash green again before the clock advances by 1 second. Totally unplayable.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEven if my FPS is higher (performance graph showing high of 40, low of 25-30) it will visibly \u0027stutter\u0027 along. I think what\u0027s happening is that active engines run through the physics differently from inactive ones. I reached this conclusion because if I use F2 and hide the interface, the stutter remains but if I bind engine activation to an action group, I can shutdown engines and the performance improves noticeably. When I reactivate, it slows back down. I think the engines within the physics calcs are causing me to tip into the physics time-delta and time is slowing down and then catching back up. The MET clock flashes yellow/green in cadence with the stutter. I\u0027ve changed the max delta, and tried .03, .05, .10 and all have behaved roughly the same. Increasing it to .10 seemed to help \u0027smooth\u0027 things over, but didn\u0027t eliminate it enough to be considered playable.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m thinking there\u0027s got to be a bug somewhere causing a massive slowdown in the physics calcs when engines are attached to radially mounted tanks. The same # of engines on stock clustering attachments doesn\u0027t cause as big of a slowdown. I have to imagine that there\u0027s still something else going on with regard to engines as well, because I can\u0027t think of a reason a deactivated engine should behave differently with regard to physics vs one at 0% throttle.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAttach a craft file? I\u0027ll see if the same happens on my machine. That would help at least rule out a few hardware related things.\n\u003C/p\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-30T16:34:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223478043\u0022 data-ipsquote-contentid=\u0022179383\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540916946\u0022 data-ipsquote-userid=\u0022192669\u0022 data-ipsquote-username=\u0022ZL647\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, ZL647 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAttach a craft file? I\u0027ll see if the same happens on my machine. That would help at least rule out a few hardware related things.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/open?id=1KQCF48lkibkvvgYFhHUtd24zYA-wz_BF\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/open?id=1KQCF48lkibkvvgYFhHUtd24zYA-wz_BF\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"ZL647","CreatedById":192669,"CreatedDateTime":"2018-10-30T16:46:53Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/186673-phreakish/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022186673\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/186673-phreakish/\u0022 rel=\u0022\u0022\u003E@Phreakish\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAwesome. I\u0027ll look at it when I get home.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m thinking it\u0027s some kind of CPU bottle neck. Would fit with your physics engine theory.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen you lower graphics settings without enforcing a lower frame rate, your GPU will ask the CPU for more so it can crank out more frames since the GPU isn\u0027t working as hard. That would slow the CPU down even more if it\u0027s already bottlenecked by the physics calcs.\n\u003C/p\u003E\n\u003Cp\u003E\nYour part count is really shooting up when you use your cluster method vs the stock cluster method. Each part has it\u0027s own physics so that does quickly scale up calculation cost.\n\u003C/p\u003E\n\u003Cp\u003E\nJust out of curiosity try your clustering with engines that DONT have gimbal and see if that reduces the issue.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-30T16:52:03Z\u0022 title=\u002210/30/2018 04:52  PM\u0022 data-short=\u00225 yr\u0022\u003EOctober 30, 2018\u003C/time\u003E by ZL647\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-30T17:21:23Z","Content":"\n\u003Cp\u003E\nI\u0027ve tried gimbal and not - no change.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what\u0027s odd. On a test craft, I used FL-C1000 tanks, radially mounted, to get to 5x Wolfhound engines - same part count as with an FL-TX220 but the same performance as using the kerbodyne clustering tank.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPart count doesn\u0027t seem to make a huge difference - I\u0027ve tested with just a MK3 capsule with a ton of engines under it, and performance does improve - but even modest counts (~100 parts) and it\u0027ll happen with 20~30 engines.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHonestly, I could deal with it if it only happened with the engines running. But having to shutdown engines between burns just to keep performance marginal, seems like a pain.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-30T17:39:01Z","Content":"\n\u003Cp\u003E\nRan it again with the craft in the file above. Processor utilization runs about 25% when drifting in orbit. Turn on \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E, it goes up 1-2%. Stage the engines, processor utilization drops to 15-18%. None of the 8 cores shows any spikes or pegging when I enable engines or stage them. There\u0027s a temporary spike on a couple cores, but nothing huge - not even half of the headroom left.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nGPU runs about 10-12%, but when I stage or activate the engines GPU drops to 0-2%.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-30T20:02:44Z","Content":"\n\u003Cp\u003E\nEureka! Ish..\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo I\u0027ve got all my engines on an action group to toggle them on/off to see what happens to the frame rate and performance as they switch.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf I never use the staging, and use the action group to toggle my engines on - I never have this performance issue. But as soon as I hit space, whether to activate my current stage engines, or even if there\u0027s nothing to stage - the stutter shows up!\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI can run the same craft, cheat it to orbit, and toggle the engines on with an action group - 17fps constant, no stutter.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDo the same thing, hit space, and it stutters.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI can cheat to orbit, toggle engines with the action group - 17fps, no stutter. Hit space (there are no other stages on this craft) and it immediately begins to stutter.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo I put a decoupler on it, I attached a single engine to the decoupler. I then engaged that engine with spacebar. It light, no stutter. I then activated the decoupler with space. It decoupled, still no stutter. I activate my bazillion engines with the action group - still no stutter. Full throttle, 17fps, no stutter. Hit space (already on last stage, no stages left) - stutter. Toggle engines with action group - stutter remains whenever engines are active.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I put smaller groups of engines into stages - maybe it\u0027s so many engines activating at once? nope.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThis HAS to be some sort of bug, right?\n\u003C/p\u003E\n"},{"CreatedByName":"Francois424","CreatedById":98138,"CreatedDateTime":"2018-10-30T21:42:17Z","Content":"\n\u003Cp\u003E\nI would say to report it.\n\u003C/p\u003E\n\u003Cp\u003E\nAny improvement will gladly be taken in this game \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"ZL647","CreatedById":192669,"CreatedDateTime":"2018-10-31T00:02:44Z","Content":"\n\u003Cp\u003E\nMessed with the version you posted that\u0027s using the adapters, It seems normal to me. Can you post up the one with the clusters done the other way that make it lag bad?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-10-31T00:02:58Z\u0022 title=\u002210/31/2018 12:02  AM\u0022 data-short=\u00225 yr\u0022\u003EOctober 31, 2018\u003C/time\u003E by ZL647\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-31T00:41:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223478303\u0022 data-ipsquote-contentid=\u0022179383\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221540944164\u0022 data-ipsquote-userid=\u0022192669\u0022 data-ipsquote-username=\u0022ZL647\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n36 minutes ago, ZL647 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMessed with the version you posted that\u0027s using the adapters, It seems normal to me. Can you post up the one with the clusters done the other way that make it lag bad?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nhttps://drive.google.com/open?id=1867O-GF56wRADckV-h0JewCZsjGDMkyE\n\u003C/p\u003E\n\u003Cp\u003E\nTry this file.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nLaunch it, f12 to orbit. Then use action group 1 to ignite the engines. Advance to full throttle. Once you establish that everything is \u0027normal\u0027, hit spacebar. If it\u0027s not just me, it should begin to stutter pretty bad.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI tried this on my desktop at work and just now tried it on my laptop at home. The only thing these machines have in common is that the display adapters are Nvidia, so I have to assume it\u0027s not just me.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-10-31T01:04:59Z","Content":"\n\u003Cp\u003E\nI\u0027ve made a video which shows it pretty clearly.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI hit space at 6 seconds in. There are two other GC steps prior to that - I\u0027m not talking about those (though they\u0027re also annoying).\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/A9nGDijmJoc?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-11-01T03:50:43Z","Content":"\n\u003Cp\u003E\nEven more testing...\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI previously built a large booster setup which has over 90 engines at launch. It does not exhibit the behavior of my ship in the example. This megabooster uses vector engines.\n\u003C/p\u003E\n\u003Cp\u003E\nI ruled out the mk3 parts. I ruled out manned/unmanned. Then, finally, breakthrough.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI built a testbed that resembled my megabooster that does not stutter. It ran smoothly, just like my megabooster. I replaced the vectors with the wolfhound used on the ship in my previous video. Still runs smooth. I then placed a small fuel tank between the engine and the kerbodyne adapter. Bingo! lag city. If I remove that tank and replace it with an octagonal strut - still smooth (and the same part count). I then added 4 more engines per cluster with a radially mounted octagonal strut. Lag strikes again, but it feels different so it may not be the same.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo, if I\u0027m right. The steps to reproduce this are below:\u00A0\n\u003C/p\u003E\n\u003Col\u003E\u003Cli\u003E\nPlace any capsule.\n\u003C/li\u003E\n\u003Cli\u003E\nStack 3-5 S4 tanks under it.\n\u003C/li\u003E\n\u003Cli\u003E\nTerminate the stack with a kerbodyne engine clustering tank.\n\u003C/li\u003E\n\u003Cli\u003E\nAttach small tanks to the engine nodes on the kerbodyne cluster tank.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nAttach engines (Vector and wolfhound are what I\u0027ve tested, nukes also) to those tanks. Assign \u0027toggle engine\u0027 to action group 1.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nPattern the engine block (kerbodyne adapter with patterned small tanks and engines) so that you have 5-9 clusters of engines.\u00A0\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nAlt\u002BF12, hack gravity to .01, launch ship and cheat to orbit.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nTurn on \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E and set retrograde.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nActivate action group 1.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nThrottle up and allow craft to \u0027come around\u0027. Note performance as ship renders and animates.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nToggle action group 1 several times and note performance.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nWith engines deactivated, hit hit spacebar to stage.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nWatch for stutter.\u00A0\n\u003C/li\u003E\n\u003C/ol\u003E\u003Cp\u003E\nI\u0027d be curious if anyone else can confirm this behavior. You can take the same craft and replace the tanks which are between the engines and the kerbodyne adapter with an octagonal strut. This yields the same part count, but the stuttering behavior is gone.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhy this is strange:\u00A0\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nIf the tanks between the engine and the adapter were causing the slowdown due to additional physics for their \u0027squishiness\u0027, then it shouldn\u0027t matter HOW the engines are activated. Staging the engines into action seems to yield a different mathematical model than \u0027activating\u0027 the engines instead.\u00A0\n\u003C/li\u003E\n\u003Cli\u003E\nIf the tank \u0027squishiness\u0027 was the cause, then moving to zero throttle and warping (NOT physics warp) should result in static parts again, and the behavior eliminated. This is not the case. The stuttering will begin to happen even if the engines are never moved off idle once staged.\u00A0\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nThis is a bummer because not all engines are radially attachable, and so making large engine blocks for interplanetary ships becomes a challenge, but I think the octagonal strut will work for me. I\u0027ll have to update the original craft that started this investigation and see if it helps.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-11-01T16:42:57Z","Content":"\n\u003Cp\u003E\nNot sure if this is a bug or not, but if it is (it looks like one), I\u0027ve made an entry in the bug tracker:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://bugs.kerbalspaceprogram.com/issues/20306?next_issue_id=20289\u0026amp;prev_issue_id=20308\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bugs.kerbalspaceprogram.com/issues/20306?next_issue_id=20289\u0026amp;amp;prev_issue_id=20308\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"HvP","CreatedById":146104,"CreatedDateTime":"2018-11-01T17:12:51Z","Content":"\n\u003Cp\u003E\nI wonder if this has anything to do with the new delta-v-per-stage indicator that was added in 1.5 for maneuver nodes. A large number of engines attached to a large number of tanks might complicate the delta-v computation which attempts to show if you have sufficient fuel in your stages for maneuvers.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-11-01T17:14:51Z\u0022 title=\u002211/01/2018 05:14  PM\u0022 data-short=\u00225 yr\u0022\u003ENovember 1, 2018\u003C/time\u003E by HvP\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Phreakish","CreatedById":186673,"CreatedDateTime":"2018-11-01T17:18:30Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223479395\u0022 data-ipsquote-contentid=\u0022179383\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221541092371\u0022 data-ipsquote-userid=\u0022146104\u0022 data-ipsquote-username=\u0022HvP\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, HvP said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI wonder if this has anything to do with the new delta-v-per-stage indicator that was added in 1.5 for maneuver nodes. A large number of engines attached to a large number of tanks might complicate the delta-v computation which attempts to show if you have sufficient fuel in your stages for maneuvers.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGood question.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBut what\u0027s odd is that it\u0027s not just performance-related. I\u0027ve spammed a ton of engines (I just got done toying with one with ~500 parts and 112 nukes) to see if it will \u0027stutter\u0027. It goes slow, and UT slows down, but it does not \u0027stutter\u0027.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIf the engines are attached to a smallish tank, and THEN patterned onto a larger tank, and THEN staged - it will stutter. I think the engines are being dealt with differently in the physics engine depending on whether they\u0027re staged or not. It could be that the Delta-V calculator get\u0027s stuck somewhere and has a hard time resolving... That would explain why it happens when staging, but not when \u0027activating\u0027 using an action group.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBut now that I know how to work around it, I just need them to fix the burn time indicator for nukes... I can\u0027t take this behemoth anywhere without it!\u00A0\n\u003C/p\u003E\n"}]}