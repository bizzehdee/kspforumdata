{"TopicId":120896,"ForumId":32,"TopicTitle":"Match Sticks and Max Physics Delta Time per Frame","CreatedByName":"Moesly_Armlis","CreatedById":112247,"CreatedDateTime":"2015-09-14T21:20:35Z","PageNum":1,"Articles":[{"CreatedByName":"Moesly_Armlis","CreatedById":112247,"CreatedDateTime":"2015-09-14T21:20:35Z","Content":"\n\u003Cp\u003EExplaining the concept of Max Physics Delta Time per Frame using match sticks.\u003C/p\u003E\u003Cp\u003EMake a curved line using a box of match sticks and then replicate the curved line using the longer stove style box of match sticks. If the scale is identical then the curved line could look clunky and have sharper edges because of poor resolution. With complex curves the expected result is a curved line that has fewer match sticks and loss of detail.\u003C/p\u003E\u003Cp\u003EThis experiment is to identify the difference between using the extreme values for Max Physics Delta Time per Frame. The value can be changed from the main menu settings general panel. \u003C/p\u003E\u003Cp\u003EI am trying to notice the difference in using the values of 0.03 and 0.12 for the MPDTF.\u003C/p\u003E\u003Cp\u003EIf the vessel survives testing at a setting for MPDTF of 0.03 then at a setting for MPDTF of 0.12 the vessel should be more prone to break apart.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003EExample: a plane flies maneuvers and flown at high G force to try to break it apart. Then the value for \u003C/span\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003EMax Physics Delta Time per Frame is increased from 0.03 to 0.12\u003C/span\u003E\u003C/span\u003E and the plane is again put through similar testing.\u003C/p\u003E\u003Cp\u003E So far the results are not showing much difference and the two simulations have similar results. Extreme re entries will be tested next to show vessel simulation deviations.\u003C/p\u003E\u003Cp\u003EAnyone else interested in contributing to this scientific experiment?\u003C/p\u003E\u003Cp\u003Eedit:\u003C/p\u003E\u003Cp\u003EFrom the Wiki:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EMax Physics Delta-Time per Frame\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EThis setting determines how many physics calculations the program can run per game second. So, as the number increases, gameplay slows down, as more calculations happen every game second. It slows down, but not in the usual way. There is no lag, but now one second that passes on Kerbin takes more than one second in real time. This setting is good for keeping very large ships from falling apart. Additionally, in \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Settings.cfg\u0022 rel=\u0022external nofollow\u0022\u003Esettings.cfg\u003C/a\u003E, this value can be increased beyond the range of the GUI slider.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EDefault: 0.04 sec\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-14T21:59:38Z\u0022 title=\u002209/14/2015 09:59  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 14, 2015\u003C/time\u003E by MoeslyArmlis\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2015-09-14T21:41:22Z","Content":"\n\u003Cp\u003EWell, question 1 is is that actually what the Physics Delta setting means? It\u0027s a setting I\u0027ve never fully understood.\u003C/p\u003E\u003Cp\u003EEDIT: To expand, this is how I think the Physics Delta setting works. \u003Cem\u003EI have no idea if I\u0027m right!\u003C/em\u003E The actual timestep used in the physics engine is fixed at a given physical timewarp setting, and is usually higher than the interval between frames. The Physics Delta setting then says, if the in-game time since the last frame is more than x, render another frame. In some sense it\u0027s a target framerate, and the default setting is equivalent to 25 fps. In some of my tests I\u0027ve seen different behaviour in terms of frame times above and below that value, and it\u0027s of note that the debug menu framerate graph does not read correctly below that.\u003C/p\u003E\u003Cp\u003EIf I\u0027m right the Physics Delta setting will affect framerate and lag but not vessel behaviour.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-14T21:51:20Z\u0022 title=\u002209/14/2015 09:51  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 14, 2015\u003C/time\u003E by cantab\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starwhip","CreatedById":83990,"CreatedDateTime":"2015-09-14T21:46:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cantab\u0022 data-cite=\u0022cantab\u0022\u003E\u003Cdiv\u003EWell, question 1 is is that actually what the Physics Delta setting means? It\u0027s a setting I\u0027ve never fully understood.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI believe it slows down the in-game simulation speed. So basically, 1 second of real time can be 2, 3, 4, etc. seconds in game. It takes a load off of your processor because the game doesn\u0027t have to compute everything so quickly. Can often increase your framerate, or so I\u0027ve heard.\u003C/p\u003E\n"},{"CreatedByName":"Moesly_Armlis","CreatedById":112247,"CreatedDateTime":"2015-09-14T21:50:45Z","Content":"\n\u003Ca href=\u0022https://en.wikipedia.org/wiki/Differential_calculus\u0022 rel=\u0022external nofollow\u0022\u003EDifferential calculus\u003C/a\u003E is the process I am illustrating with match sticks.\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-09-14T21:51:12Z","Content":"\n\u003Cp\u003EIt says MAX delta time, so this setting might only make a difference when the simulation is struggling to keep up (timer turns yellow). In my understanding, if it takes less than 0.03s to calculate a physics frame, there is no difference between your two settings. If it takes longer, KSP will either take larger time steps (up to the max delta time), or slow down (if max delta is 0.1s and each physics frame takes 0.2s the game runs at half speed). \u003C/p\u003E\u003Cp\u003EYou might find differences in oscillation behavior. When building a plane with (too) much control authority and using SAS, I have often seen it flying stable at 1x, and heavily oscillating at 2x of higher physics warp (it sounds like a high delta time should be somehow similar to physics time warp).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-14T22:13:08Z\u0022 title=\u002209/14/2015 10:13  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 14, 2015\u003C/time\u003E by pellinor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2015-09-14T21:53:08Z","Content":"\n\u003Cp\u003EExpanded my previous post, and a PS: By editing settings.cfg you can set Physics Time Delta considerably outside what the game\u0027s settings menu allows.\u003C/p\u003E\n"},{"CreatedByName":"EladDv","CreatedById":118368,"CreatedDateTime":"2015-09-14T22:00:29Z","Content":"\n\u003Cp\u003Eno no. the physics delta is the time between physics frames- frames which in them physics forces are calculated.\u003C/p\u003E\u003Cp\u003Ethe lower the physics delta is the more accurate the simulation is and the smaller the steps between frames are at the cost of higher CPU cost.\u003C/p\u003E\u003Cp\u003Ephysics delta 4x as long means 1/4 the calculation per a given amount of time (larger or equal to the larger delta).\u003C/p\u003E\u003Cp\u003Ea simple test would be launching an i beam towards different layers of armor. at the right speed and physics delta (and some luck) you could bypass the first layer and hit only the second one (you could do it in any delta but speeds would need to increase)\u003C/p\u003E\n"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-09-14T22:05:56Z","Content":"\n\u003Cp\u003E@cantab: what you describe sounds more like a \u0022MIN physics delta time per frame\u0022 to me.\u003C/p\u003E\u003Cp\u003E@EladDv: I agree about the term \u0022physics delta\u0022, but why does the setting explicitely say \u0022max physics delta\u0022? Or are we talking about different settings?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-14T22:15:53Z\u0022 title=\u002209/14/2015 10:15  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 14, 2015\u003C/time\u003E by pellinor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"DocMoriarty","CreatedById":57433,"CreatedDateTime":"2015-09-14T23:43:08Z","Content":"\n\u003Cp\u003EA game usually has a main loop which basically looks like this:\u003C/p\u003E\u003Cp\u003EProcess Input -\u0026gt; Do Calculations -\u0026gt; Paint Frame -\u0026gt; Repeat\u003C/p\u003E\u003Cp\u003EThe more complex the game world and objects are, the more time it takes for one iteration thru the main loop. A good game bases it\u0027s calculations now on the time elapsed since last frame. And here comes the max physics delta into play: If the time elapsed since last loop is \u0026gt; MPD then time elapsed for physics calculations = MPD. Thats what the MPD is for.\u003C/p\u003E\n"},{"CreatedByName":"Hotaru","CreatedById":135669,"CreatedDateTime":"2015-09-15T00:18:16Z","Content":"\n\u003Cp\u003EMy understanding is that physics-delta per frame causes the game to prefer to run in slow motion, smoothly, rather than in real-time but at poor frame rate. I believe what italters is the ratio between \u003Cem\u003Ephysics\u003C/em\u003E frames (the game calculating what\u0027s actually going on) and \u003Cem\u003Egraphics\u003C/em\u003E frames (the game drawing it to the screen). \u003C/p\u003E\u003Cp\u003EWhen working in Unity physics calculations often have to be multiplied by something called time.deltaTime, which synchronizes them to the frame rate--so your physics-governed bullet is launched at 500 meters per \u003Cem\u003Esecond\u003C/em\u003E instead of 500 meters per \u003Cem\u003Eframe\u003C/em\u003E. \u003C/p\u003E\u003Cp\u003EWhat I see in practice in KSP is that if I increase max physics-delta, the game runs faster and choppier--which doesn\u0027t affect the \u003Cem\u003Eperformance\u003C/em\u003E of craft but does make Kraken attacks much more likely.\u003C/p\u003E\n"},{"CreatedByName":"Tank Buddy","CreatedById":69635,"CreatedDateTime":"2015-09-15T02:20:43Z","Content":"\n\u003Cp\u003EMy understanding of the Physics Delta Time per Frame was that it sacrificed accuracy for performance. But definitely something to look into.\u003C/p\u003E\n"},{"CreatedByName":"Moach","CreatedById":9,"CreatedDateTime":"2015-09-15T22:38:07Z","Content":"\n\u003Cp\u003ETo clarify (this is a bit dense, I reckon)\u003C/p\u003E\u003Cp\u003EThat setting defines the Unity built in lower threshold for just how low FPS can force simulation time to \u0022slow down\u0022\u003C/p\u003E\u003Cp\u003Ethis is the point where your mission time display turns \u003Cspan style=\u0022color:#daa520;\u0022\u003E\u003Cstrong\u003Eyellow \u003C/strong\u003E\u003C/span\u003E- that means time is slowing down so that with a lower FPS rate, each frame doesn\u0027t need to represent such a large amount of \u0022delta time\u0022 that would harm the precision of the simulation (aka: \u003Cem\u003ERelease The Kraken!\u003C/em\u003E)\u003C/p\u003E\u003Cp\u003Eso it makes a compromise and slows down the simulation, so that in a low fps condition, each frame still covers the less than the maximum delta-time specified\u003C/p\u003E\u003Cp\u003Ethat means the value of this setting is defined as the inverse of the minimum FPS you want to allow time to try to slow down and cover before the mission timer turns \u003Cspan style=\u0022color:#ff0000;\u0022\u003E\u003Cstrong\u003ERED\u003C/strong\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Emind then, when you see red - then the engine has crossed the line where it will slow time down for the sake of simulation stability -- and that means physics will start taking larger leaps across the gaps left by one\u0027s meagre FPS and whatever happens.... well, you know \u003C/p\u003E\u003Cp\u003Eso the higher you set that value, the less yellow it will allow before red (I hope I\u0027m right on that, as this is just my own best reckoning of how it works)\u003C/p\u003E\u003Cp\u003E so you trade simulation stability (no \u003Cem\u003EKraken\u003C/em\u003E) for time not to go into slow-motion as much (at your own risk of \u003Cem\u003EKraken\u003C/em\u003E)\u003C/p\u003E\u003Cp\u003Eand that\u0027s \u003Cem\u003Ehow I THINK it works \u003C/em\u003E\u003C/p\u003E\u003Cp\u003E[Citation Needed]\u003C/p\u003E\u003Cp\u003ECheers\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-15T22:42:02Z\u0022 title=\u002209/15/2015 10:42  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 15, 2015\u003C/time\u003E by Moach\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Moesly_Armlis","CreatedById":112247,"CreatedDateTime":"2015-09-16T20:47:40Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003EThe step size illustrates the process\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe simulation is running many calculations. Each calculation is broken down into small iterations or steps. The smaller step size will increase the calculations performed per frame resulting in a finer fidelity and precise simulation. \u003C/p\u003E\u003Cp\u003EA response time with a 1:1 real time to game time ratio being the ideal condition and the MET indicator is green. Response time of 4:1 will indicate red and the computer cannot calculate the frame fast enough and kerbal time runs slower. Response time of 4:1 is four seconds of real time for each second of kerbal time or four minutes of real time to one minute kerbal time.\u003C/p\u003E\u003Cp\u003ESmaller steps demands more CPU time. A frame takes longer to calculate. Keeping up with the high demand for CPU cycles will result in having a slower response time. \u003C/p\u003E\u003Cp\u003EInversely if the step size is increased then the simulation runs rough and less precise. The demand on the CPU is reduced and frames can be completed quickly. This benefits a slow running simulation when precision is less important. \u003C/p\u003E\u003Cp\u003EUsing a computer to solve pi using successive approximation can illustrate that using smaller steps will result in a closer approximation and take longer to complete the solution.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003EExperiments\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe experiment has not revealed much differences between the extreme values of the Max Physics Delta Time per Frame. The next part of the experiment is with greater part counts such as a complex space station. Docking with these stations has the indicator in the red. Under stressful conditions such as a rapid docking maneuver, could demonstrate contrast.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003EDynamic Max Physics Delta Time per Frame\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThis addresses the issue of slow frame rate during situations where physics simulation precision is less important.\u003C/p\u003E\u003Cp\u003EWhen conditions such as walking kerbals around a Minmus refinery complex cause an increase demand on the CPU and frame rate runs slow. You could try to use the physics time warp but the step size becomes too large and a K event can destroy the complex.\u003C/p\u003E\u003Cp\u003EAt these times increasing the Max Physics Delta Time per Frame would allow quicker frame rate when physics simulation precision is required less. Reducing the Max Physics Delta Time per Frame when the kerbal is within the vessel and greater simulation precision is required.\u003C/p\u003E\u003Cp\u003EA simple answer is having a 0.12 MPDTF included in the range for physics time warp. Currently 2x physics time warp step size is too large and can cause K events.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-18T01:13:15Z\u0022 title=\u002209/18/2015 01:13  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 18, 2015\u003C/time\u003E by MoeslyArmlis\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"SpaceTiger","CreatedById":133800,"CreatedDateTime":"2015-09-19T04:03:20Z","Content":"\n\u003Cp\u003EI had some quick tests yesterday with the MaxDeltaTime and \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/116034-1-0-X-KerboKatz-SmallUtilities-V1-2-5-18-09-2015-Now-with-AutoBalancingLandingLeg%21#PhysicalTimeRatioViewer\u0022 rel=\u0022external nofollow\u0022\u003EPhysicalTimeRatioViewer\u003C/a\u003E (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/116034-1-0-X-KerboKatz-SmallUtilities-V1-2-5-18-09-2015-Now-with-AutoBalancingLandingLeg%21#PhysicalTimeRatioViewer\u0022 rel=\u0022external nofollow\u0022\u003EPhysicalTimeRatioViewer\u003C/a\u003E has now a new handy slider that lets you change that value during flight).\u003C/p\u003E\u003Cp\u003EFrom those tests and the \u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/Time-maximumDeltaTime.html\u0022 rel=\u0022external nofollow\u0022\u003Eunity docs about MaxDeltaTime\u003C/a\u003E I concluded that a lower value will slow down the game much more than a higher value.\u003C/p\u003E\u003Cp\u003EOn the other hand if the value is set too high the game will have big fps spikes due to calculations being done.\u003C/p\u003E\u003Cp\u003EThere is no indicator that unity will sacrifice physics precision to keep up with time. So I\u0027m assuming that\u0027s done purely on Kerbal\u0027s side for example during physical time warp.\u003C/p\u003E\n"}]}