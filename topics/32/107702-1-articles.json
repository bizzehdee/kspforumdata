{"TopicId":107702,"ForumId":32,"TopicTitle":"Airbreather fuel flow logic","CreatedByName":"damerell","CreatedById":123074,"CreatedDateTime":"2015-05-05T18:48:19Z","PageNum":1,"Articles":[{"CreatedByName":"damerell","CreatedById":123074,"CreatedDateTime":"2015-05-05T18:48:19Z","Content":"- \n- Generally quite pleased with 1.0, but we\u0027ve just made an interesting discovery. Airbreathing engines now appear to use the monoprop fuel flow logic. This causes them to drain all \u0022nearby\u0022 fuel tanks equally, to better enable aircraft to maintain balance in flight. Hooray!\n- However, this also causes them to feed fuel across parts which do not normally permit fuel flow - for example, decouplers with fuel flow turned off. (I haven\u0027t checked, but it presumably would also permit fuel flow across parts where it would be highly implausible). This is not so good; if I turn off fuel flow on a part, I really don\u0027t want fuel to flow through it.\n- I submit that a third fuel flow logic would make more sense - \u0022like monoprop, but respects crossfeed being disabled\u0022. You could produce the same results if desired by turning on crossfeed, except that you would only be able to do so if the part permitted crossfeed at all.\n- The forum keeps turning the paragraphs in my posts into walls-of-text and I don\u0027t know why! Sorry about the listification.\n\n**Edited \u003Ctime datetime=\u00222015-05-05T18:51:21Z\u0022 title=\u002205/05/2015 06:51  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 5, 2015\u003C/time\u003E by damerell**"},{"CreatedByName":"r_rolo1","CreatedById":26192,"CreatedDateTime":"2015-05-05T18:55:32Z","Content":"Known issue, [bug already filed](https://forum.kerbalspaceprogram.com/threads/117983-Aren-t-decouplers-supposed-to-block-fuel-flow). No ETA for a fix, if there is a fix at all ...\n\nAnd yes, it is stupid behaviour ( IMHO, of course ) and at odds with what was promised for the jet engines rebalance ( they would drain equally **from the tanks in the same level**\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u20AC\u00B9 IIRC and obviously not from forbidden tanks ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) )."},{"CreatedByName":"damerell","CreatedById":123074,"CreatedDateTime":"2015-05-05T18:57:38Z","Content":"I think we might avoid words like \u0022stupid\u0022 but it does seem to be undesirable."},{"CreatedByName":"Stocchinet","CreatedById":141412,"CreatedDateTime":"2015-05-05T18:58:46Z","Content":"Intresting, but what about intakes? how many do i need in an aircraft with four rapier for example? Air hogging is a thing of the past or slamming a lot of intakes on a craft still works?"},{"CreatedByName":"r_rolo1","CreatedById":26192,"CreatedDateTime":"2015-05-05T19:16:38Z","Content":"\u003E \n\u003E Intresting, but what about intakes? how many do i need in an aircraft with four rapier for example? Air hogging is a thing of the past or slamming a lot of intakes on a craft still works?\n\nAFAIK intakes work as they always did, that is , as monoprop or electric charge: from source to consumer, disregarding decoupler and toher stuff that doesn\u0027t allow fuel flow. \n\nOh, and @ damerell ... well, as it is my opinion, I am entitled to use any words I find fancy as long as I don\u0027t break forum rules ( that I didn\u0027t, since I called the behaviour stupid , not who enabled the behaviour ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif) ). And IMHO the behaviour is stupid because a) SQUAD made that some parts could not allow fuel flow long long time ago for various and good reasons ( like avoiding unintentional draining of fuel from upper stages ) and ![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png) this change makes that the UI objectively lies regarding fuel flow rules. For those reasons I believe this behaviour is stupid, but is someone is offended, let us call it counterintuitive and incoherent in game context ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)"},{"CreatedByName":"Brotoro","CreatedById":57674,"CreatedDateTime":"2015-05-05T20:10:59Z","Content":"\u003E \n\u003E Intresting, but what about intakes? how many do i need in an aircraft with four rapier for example? Air hogging is a thing of the past or slamming a lot of intakes on a craft still works?\n\nI learned a most-valuable thing from a NathanKell post:\n\nIf your engines ever flameout asymmetrically, then you don\u0027t have enough air intakes. If you do have enough air intakes, your engines will flameout symmetrically when you get too high."},{"CreatedByName":"arq","CreatedById":71084,"CreatedDateTime":"2015-05-05T20:32:54Z","Content":"\u003E \n\u003E Intresting, but what about intakes? how many do i need in an aircraft with four rapier for example? Air hogging is a thing of the past or slamming a lot of intakes on a craft still works?\n\nI have had zero trouble with 1 intake/jet. At high altitude the thrust drops off faster than the air, so there isn\u0027t a problem."},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-05-05T20:36:15Z","Content":"This is a problem for drop-tank users (well, unless you TACFB or something)."},{"CreatedByName":"Geschosskopf","CreatedById":69507,"CreatedDateTime":"2015-05-05T20:55:27Z","Content":"What if you turn off fuel flow on the tanks you won\u0027t want drained instead of the decoupler between them and the rest of the vehicle? Does that stop it?"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-05-05T21:01:56Z","Content":"\u003E \n\u003E What if you turn off fuel flow on the tanks you won\u0027t want drained instead of the decoupler between them and the rest of the vehicle? Does that stop it?\n\nIt certainly does.\nAnd then drop-tank users have to fiddle around with the clumsy right-click fuel interface trying to enable tanks while flying."},{"CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2015-05-05T21:07:42Z","Content":"Hmmm, I would suggest a fourth option: treat jet fuel like rocket fuel, however, include a fuel balancer part. Quite simply, a part that, when active, automatically transfers fuel between all tanks which are directly connected via crossfeed to the balancer. That way, you can choose the behavior which best suits your design, be it for balanced weight distribution, drop tanks, etc... tank segments separated by non-crossfeed parts or decouplers would need to have their own balancer. Balancers would be able to manage/reverse the flow of fuel lines when active. As a bonus, we could apply the same logic to xenon and regular rocket fuel. One or two balancer parts could have balancing turned off/on for different fuel types, allowing the default behavior for all fuels to be the same.\n\nExcept monopropellant. That should still ignore crossfeed rules for the most part, but maybe still only draw from the active stage?\n\nShouldn\u0027t this really belong on the suggestion forum?\n\n\u003E \n\u003E It certainly does.\n\u003E And then drop-tank users have to fiddle around with the clumsy right-click fuel interface trying to enable tanks while flying.\n\nFuel tanks and other crossfeed parts should be controllable via action groups.\n\n**Edited \u003Ctime datetime=\u00222015-05-05T21:20:53Z\u0022 title=\u002205/05/2015 09:20  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 5, 2015\u003C/time\u003E by Colonel\\_Panic**"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-05-05T21:14:15Z","Content":"\u003E \n\u003E Fuel tanks and other crossfeed parts should be controllable via action groups.\n\nNow that would be something nice for stock. In the meantime, you\u0027ve given me an idea."},{"CreatedByName":"Quiana","CreatedById":107476,"CreatedDateTime":"2015-05-05T21:25:30Z","Content":"\u003E \n\u003E I learned a most-valuable thing from a NathanKell post:\n\u003E If your engines ever flameout asymmetrically, then you don\u0027t have enough air intakes. If you do have enough air intakes, your engines will flameout symmetrically when you get too high.\n\nUnless they\u0027ve changed the behavior for air intakes, this is somewhat correct. I am not sure if the old behavior is still valid, but it would be an artifact of the order of attachment for intakes to engines. The pool of intakes to engines would look like this if you attached two intakes, an engine, another intake, and an engine:\n\nAIR1 \u003E AIR2 \u003E ENG1 \u003E AIR 3 \u003E ENG2\n\nSo in effect, air collected by 1/2 intakes is first pushed to ENG1, then past and pools leftover with AIR 3 which goes into ENG2. What would traditionally happen is that as you went higher up, ENG2 would flameout first as AIR3 would be exhausted and only the scraps of AIR1/2 get pushed into ENG two, whereas ENG1 is consuming two intakes entirely by itself. Excess air from AIR3 that ENG2 isn\u0027t using also does wrap around back to AIR1/2 pool.\n\nA math example of this: (AIR produces, ENG consumes)\n\nAIR1 - 5\n\nAIR2 - 5\n\nENG1 - 3\n\nAIR3 - 5\n\nENG2 - 3\n\n This would result in 10 air going to ENG1 with 7 leftover air going to ENG 2 (total of 8 to ENG 2) leaving a total of 9 air in the pool.\n\nAs you went up in altitude, the intakes produce less, so the next model:\n\nAIR1 - 1.5\n\nAIR2 - 1.5\n\nENG1 - 3\n\nAIR3 - 1.5\n\nENG2 - 3 \n\nHere we can see that while ENG1 still has just enough to continue to operate, ENG2 is receiving no \u0027spare\u0027 from AIR1/2 and thus ENG2 starves and flames out. In order to balance this, it was always a factor of putting an even number of intakes before each engine to ensure that the pool fed correctly into each engine. Please note my math examples aren\u0027t actual figures, they were made up.\n\nThe new model does help in terms of starvation, so it\u0027s rare that you will need more than one intake her jet as mentioned by Arq, but these rules still apply if you are using more than one intake. Never place your engines and intakes in symmetry mode on planes without remembering this as it can cause asymmetric flameout.\n\n**Edited \u003Ctime datetime=\u00222015-05-05T21:33:19Z\u0022 title=\u002205/05/2015 09:33  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 5, 2015\u003C/time\u003E by Quiana**\n  \nFormatting on my table attempt"},{"CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2015-05-05T21:28:43Z","Content":"\u003E \n\u003E Unless they\u0027ve changed the behavior for air intakes, this is somewhat correct. I am not sure if the old behavior is still valid, but it would be an artifact of the order of attachment for intakes to engines. The pool of intakes to engines would look like this if you attached two intakes, an engine, another intake, and an engine:\n\u003E AIR1 \u003E AIR2 \u003E ENG1 \u003E AIR 3 \u003E ENG2\n\u003E \n\u003E So in effect, air collected by 1/2 intakes is first pushed to ENG1, then past and pools leftover with AIR 3 which goes into ENG2. What would traditionally happen is that as you went higher up, ENG2 would flameout first as AIR3 would be exhausted and only the scraps of AIR1/2 get pushed into ENG two, whereas ENG1 is consuming two intakes entirely by itself. Excess air from AIR3 that ENG2 isn\u0027t using also does wrap around back to AIR1/2 pool.\n\u003E \n\u003E A math example of this:\n\u003E \n\u003E Order AIR1 AIR2 ENG1 AIR3 ENG2\n\u003E \n\u003E Produces 5 5 5\n\u003E \n\u003E Consumes 3 3\n\u003E \n\u003E This would result in 10 air going to ENG1 with 7 leftover air going to ENG 2 (total of 8 to ENG 2) leaving a total of 9 air in the pool.\n\u003E \n\u003E As you went up in altitude, the intakes produce less, so the next model:\n\u003E \n\u003E Order AIR1 AIR2 ENG1 AIR3 ENG2\n\u003E \n\u003E Produces 1.5 1.5 1.5\n\u003E \n\u003E Consumes 3 3\n\u003E \n\u003E Here we can see that while ENG1 still has just enough to continue to operate, ENG2 is receiving no \u0027spare\u0027 from AIR1/2 and thus ENG2 starves and flames out. In order to balance this, it was always a factor of putting an even number of intakes before each engine to ensure that the pool fed correctly into each engine.\n\u003E \n\u003E The new model does help in terms of starvation, so it\u0027s rare that you will need more than one intake her jet as mentioned by Arq, but these rules still apply if you are using more than one intake. Never place your engines and intakes in symmetry mode on planes without remembering this as it can cause asymmetric flameout.\n\nIf this is correct, would that mean that you could avoid flameout by always placing all your intakes before placing any of your engines? I\u0027m not sure if I understand what the implication here is."},{"CreatedByName":"Quiana","CreatedById":107476,"CreatedDateTime":"2015-05-05T21:35:17Z","Content":"\u003E \n\u003E If this is correct, would that mean that you could avoid flameout by always placing all your intakes before placing any of your engines? I\u0027m not sure if I understand what the implication here is.\n\nIncorrect. If you did that, it would look like this:\n\nAIR1 - 1\n\nAIR2 - 1\n\nAIR3 - 1\n\nENG1 - 2\n\nENG2 - 2\n\nThe air for 1-3 goes into ENG1, pushing the necessary 2 air. The leftover 1 unit of air is pushed into ENG2, which is not enough to sustain it and it flames out.\n\nAlso check my last post, I edited because the formatting threw it off. order is top down, and it wraps back up to the top at the end of the cycle.\n\n**Edited \u003Ctime datetime=\u00222015-05-05T21:39:28Z\u0022 title=\u002205/05/2015 09:39  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 5, 2015\u003C/time\u003E by Quiana**"},{"CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2015-05-05T21:41:11Z","Content":"\u003E \n\u003E Incorrect. If you did that, it would look like this:\n\u003E AIR1 - 1\n\u003E \n\u003E AIR2 - 1\n\u003E \n\u003E AIR3 - 1\n\u003E \n\u003E ENG1 - 2\n\u003E \n\u003E ENG2 - 2\n\u003E \n\u003E The air for 1-3 goes into ENG1, pushing the necessary 2 air. The leftover 1 unit of air is pushed into ENG2, which is not enough to sustain it and it flames out.\n\u003E \n\u003E Also check my last post, I edited because the formatting threw it off. order is top down, and it wraps back up to the top at the end of the cycle.\n\nSo in that case, how WOULD you prevent asymmetrical flameout?"},{"CreatedByName":"Quiana","CreatedById":107476,"CreatedDateTime":"2015-05-05T21:57:11Z","Content":"Set them up like this, placing in the same order:\n\nAIR1\n\nAIR2\n\nENG1\n\nAIR3\n\nAIR4\n\nENG2\n\nIf at X height each AIR produces 1 unit, and the ENG consumes 2 units, then they\u0027re evenly matched and you have no \u0027waste\u0027. Beyond X height (which is now the maximum height of flight for this example setup) you\u0027d flame out because both engines would starve within the same second and thrust would be cut evenly.\n\nThe concept scales up the same way, so if you wanted to have a four-engine you could setup this way and still have symmetric flame-out:\n\nAIR1\n\nENG1\n\nAIR2\n\nENG2\n\nAIR3\n\nENG3\n\nAIR4\n\nENG4\n\nNow as a complex example of four engines, we have this which LOOKS like it would be okay, but doing an example shows the problem:\n\nAIR1 - 1.5\n\nAIR2 - 1.5\n\nENG1 - 2\n\nENG2 - 2\n\nAIR3 - 1.5\n\nAIR4 - 1.5\n\nENG3 - 2\n\nENG4 - 2\n\nThis would be just a bit above X height (maximum sustainable flight) for all engines. ENG2 would immediately flameout, BUT, the leftover 1 air from AIR1/2 would be passed on to AIR3/4 making a total of 4 air, which would leave ENG3/4 running. This would cause asymmetric flameout and rotation."}]}