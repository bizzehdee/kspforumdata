{"TopicId":65754,"ForumId":32,"TopicTitle":"A 64-bit KSP might be closer than we think(or at least Squad is working on it)","CreatedByName":"Albert VDS","CreatedById":74055,"CreatedDateTime":"2014-03-14T08:13:06Z","PageNum":4,"Articles":[{"CreatedByName":"godefroi","CreatedById":101728,"CreatedDateTime":"2014-03-18T16:04:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cantab\u0022 data-cite=\u0022cantab\u0022\u003E\u003Cdiv\u003EAnd it\u0027s Microsoft who, in their official training materials, have misrepresented the 4GB memory limit for 32-bit OSes as something inherent in the hardware. I know better, others not familiar with *ix might not.\u003Cp\u003EBut that\u0027s a bit off-topic.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOff-topic, yes, but telling. Even the \u0022experts\u0022 get it wrong.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-03-18T16:07:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022godefroi\u0022 data-cite=\u0022godefroi\u0022\u003E\u003Cdiv\u003EIt doesn\u0027t help. It\u0027s simply a note that people who say \u0022you can\u0027t use more than 4GB of memory in a 32-bit process\u0022 are wrong, and you need to realize that not only do they not know what they\u0027re talking about, they don\u0027t even understand the problem.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe distinction between \u0022you can\u0027t use more than 4GB of memory in a 32-bit process\u0022 and \u0022you can\u0027t practically use more than 4GB of memory in a 32-bit process\u0022 is largely a pedantic one. People understand the problem, they\u0027re running out of memory when running modded KSP (accurate) and switching to a 64-bit process would help with that (accurate).\u003C/p\u003E\n"},{"CreatedByName":"radonek","CreatedById":84077,"CreatedDateTime":"2014-03-18T16:19:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022godefroi\u0022 data-cite=\u0022godefroi\u0022\u003E\u003Cdiv\u003EIt doesn\u0027t help. It\u0027s simply a note that people who say \u0022you can\u0027t use more than 4GB of memory in a 32-bit process\u0022 are wrong, and you need to realize that not only do they not know what they\u0027re talking about, they don\u0027t even understand the problem.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI looked up that syscall at MSDN ( \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537.aspx\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://msdn.microsoft.com/en-us/library/windows/desktop/aa366537.aspx\u003C/a\u003E ) and it seems to me to be just variation on posixish mmap(). You get swap-backed file handle and access it via ordinary file IO calls. You cant pass that memory to syscall, you cant allocate from it in library, you cant pass it to GPU as texture buffer. In short, you can\u0027t do anything except boasting you somehow \u0022allocated\u0022 \u0026gt;4G of memory. Unless you reimplement most of core libraries in a very inefficient way, that is.\u003C/p\u003E\u003Cp\u003EThus, \u0022you can\u0027t use more than 4GB of memory in a 32-bit process\u0022 still holds, for any usefull values of \u0022use\u0022.\u003C/p\u003E\u003Cp\u003EBTW you can do the same on *nix, and on linux you can do even better using hugetlbfs, but for exactly same reasons it is only used for very special workloads (mostly big databases).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022godefroi\u0022 data-cite=\u0022godefroi\u0022\u003E\u003Cdiv\u003EWe\u0027re just a bunch of armchair coders \u0022fixing\u0022 all of Squad\u0027s problems from the back seat (how\u0027s that for a mixed metaphor).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETrue enough\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6\u003C/p\u003E\n"},{"CreatedByName":"godefroi","CreatedById":101728,"CreatedDateTime":"2014-03-18T16:52:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022radonek\u0022 data-cite=\u0022radonek\u0022\u003E\u003Cdiv\u003EI looked up that syscall at MSDN ( \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537.aspx\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://msdn.microsoft.com/en-us/library/windows/desktop/aa366537.aspx\u003C/a\u003E ) and it seems to me to be just variation on posixish mmap(). You get swap-backed file handle and access it via ordinary file IO calls. You cant pass that memory to syscall, you cant allocate from it in library, you cant pass it to GPU as texture buffer. In short, you can\u0027t do anything except boasting you somehow \u0022allocated\u0022 \u0026gt;4G of memory. Unless you reimplement most of core libraries in a very inefficient way, that is.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, if you don\u0027t like CreateFileMapping(), there\u0027s always AWE, then. VirtualAllocEx() will allocate you more than 4GB, I believe? You just won\u0027t be able to map it all into your address space at once...\u003C/p\u003E\u003Cp\u003EAlso, if I read the table correctly, if you\u0027re running a 32-bit OS, KSP gets 2GB of address space (3GB if you\u0027re using 4GT), and if you\u0027re running a 64-bit OS, KSP gets 4GB of address space. This is because KSP.EXE has the IMAGE_FILE_LARGE_ADDRESS_AWARE flag set.\u003C/p\u003E\n"},{"CreatedByName":"6.forty","CreatedById":97939,"CreatedDateTime":"2014-03-18T17:55:58Z","Content":"\n\u003Cp\u003EWhy try to work around the 32bit address space when you could just fix the code that already exists? Most of the issues arise from assumptions on data type sizes and careless pointer and unsigned value use. It doesn\u0027t help that those things aren\u0027t entirely consistent between Windows and other OS\u0027s.\u003C/p\u003E\n"},{"CreatedByName":"Athlonic","CreatedById":57996,"CreatedDateTime":"2014-03-18T17:56:10Z","Content":"\n\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/tSfakMeW0lw?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cbr\u003E\u003Cbr\u003EJust tell me KSP will switch to Unity 5\u003Cbr\u003E\u003Cbr\u003E**drool.jpg**\n"},{"CreatedByName":"radonek","CreatedById":84077,"CreatedDateTime":"2014-03-18T18:04:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022godefroi\u0022 data-cite=\u0022godefroi\u0022\u003E\u003Cdiv\u003EWell, if you don\u0027t like CreateFileMapping(), there\u0027s always AWE, then. VirtualAllocEx() will allocate you more than 4GB, I believe? You just won\u0027t be able to map it all into your address space at once...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESame thing. You have memory which you can\u0027t use without going through some hops and can\u0027t pass along to anything else. MSDN says, among other limitations: \u0022AWE address ranges cannot be used to buffer data for graphics or video calls.\u0022 What use can game engine make of it?\u003C/p\u003E\u003Cp\u003EIf you need to squeeze some big database tablespace into memory, you can live with that, databases tend to handle their memory themselves anyway. \u003C/p\u003E\u003Cp\u003EOtherwise, it seems somewhat less clunky API then using memory mapping, but it says you need to lock those pages into physmem, since its not backed by pagefile. This means running under escalated privileges, which is showstopper in my book.\u003C/p\u003E\u003Cp\u003ENothing of this is relevant to KSP anyway \u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u20AC\u0153 even if that memory could actually be usefull, you cant really go to Unity developers asking them to implement more difficult and less usefull then plain amd64 arch support.\u003C/p\u003E\n"},{"CreatedByName":"LadyAthena","CreatedById":88614,"CreatedDateTime":"2014-03-18T22:52:20Z","Content":"\n\u003Cp\u003ENow that Unity is Unity 5 with 64 Bit support, there is no way KSP isn\u0027t going 64 bit for windows soon.\u003C/p\u003E\n"},{"CreatedByName":"Motokid600","CreatedById":66349,"CreatedDateTime":"2014-03-19T00:56:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Athlonic\u0022 data-cite=\u0022Athlonic\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EJust tell me KSP will switch to Unity 5\u003C/p\u003E\u003Cp\u003E**drool.jpg**\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENow THAT is interesting. KSP\u0027s always been kept up to date with Unity, no? so id imagine this would be no different. And just to clarify this version of Unity DOES have a functioning 64bit client for Windows?\u003C/p\u003E\u003Cp\u003EEdit: I saw three very awesome things in that video.\u003C/p\u003E\u003Cp\u003E64-Bit Editor support ( whats that mean for the cause exactly? )\u003C/p\u003E\u003Cp\u003EMulti-Thread support\u003C/p\u003E\u003Cp\u003EHDR.\u003C/p\u003E\u003Cp\u003EKsp with those three things = ... words cant describe.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-03-19T01:02:37Z\u0022 title=\u002203/19/2014 01:02  AM\u0022 data-short=\u002210 yr\u0022\u003EMarch 19, 2014\u003C/time\u003E by Motokid600\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"_Aramchek_","CreatedById":12588,"CreatedDateTime":"2014-03-19T02:00:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Motokid600\u0022 data-cite=\u0022Motokid600\u0022\u003E\u003Cdiv\u003ENow THAT is interesting. KSP\u0027s always been kept up to date with Unity, no? so id imagine this would be no different. And just to clarify this version of Unity DOES have a functioning 64bit client for Windows?\u003Cp\u003EEdit: I saw three very awesome things in that video.\u003C/p\u003E\u003Cp\u003E64-Bit Editor support ( whats that mean for the cause exactly? )\u003C/p\u003E\u003Cp\u003EMulti-Thread support\u003C/p\u003E\u003Cp\u003EHDR.\u003C/p\u003E\u003Cp\u003EKsp with those three things = ... words cant describe.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAdd \u0022PhysX3 upgrade\u0022 to that list too.\u003C/p\u003E\n"},{"CreatedByName":"IrRedemption","CreatedById":98452,"CreatedDateTime":"2014-03-19T03:02:16Z","Content":"\n\u003Cp\u003EWell from what i read this is not going to multithread its gonna allow PHYSx to render the processes to the gpu but only to nivida gpus.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-03-19T10:27:18Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022IrRedemption\u0022 data-cite=\u0022IrRedemption\u0022\u003E\u003Cdiv\u003EWell from what i read this is not going to multithread its gonna allow PHYSx to render the processes to the gpu but only to nivida gpus.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBy the very nature of GPUs this means that the physics has to be multithreaded. GPUs are large arrays of relatively simple processors, if using them improves performance the workload must be multithreaded.\u003C/p\u003E\n"},{"CreatedByName":"MalfunctionM1Ke","CreatedById":71626,"CreatedDateTime":"2014-03-19T10:34:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022LadyAthena\u0022 data-cite=\u0022LadyAthena\u0022\u003E\u003Cdiv\u003ENow that Unity is Unity 5 with 64 Bit support, there is no way KSP isn\u0027t going 64 bit for windows soon.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think Squad confirmed that they are experimenting with a 64-Bit Version but it was too buggy on Windows.\u003C/p\u003E\u003Cp\u003EBut they wont confirm or deny that said Version will be on the Table until they are sure that they get it working.\u003C/p\u003E\n"},{"CreatedByName":"Uml\u00FCx","CreatedById":69703,"CreatedDateTime":"2014-03-19T13:07:00Z","Content":"\n\u003Cp\u003Ei\u0027d kill for unity5 x64 to be in KSP 0.25\u003C/p\u003E\n"},{"CreatedByName":"LadyAthena","CreatedById":88614,"CreatedDateTime":"2014-03-20T02:58:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Uml\u00C3\u0192\u00C2\u00BCx\u0022 data-cite=\u0022Uml\u00C3\u0192\u00C2\u00BCx\u0022\u003E\u003Cdiv\u003Ei\u0027d kill for unity5 x64 to be in KSP 0.25\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo would I\u003C/p\u003E\n"},{"CreatedByName":"softweir","CreatedById":2795,"CreatedDateTime":"2014-03-20T03:09:44Z","Content":"\n\u003Cp\u003EA switch to Unity 5 may take a while. To start with, there is no release date for Unity 5, so it could be months, maybe even more than a year away. Secondly, major new versions of game engines often have changes that break old code and it can take time to rewrite the code to work with the new engine.\u003C/p\u003E\u003Cp\u003Etl/dr: Don\u0027t hold your breath!\u003C/p\u003E\n"},{"CreatedByName":"lammatt","CreatedById":21777,"CreatedDateTime":"2014-03-20T04:04:19Z","Content":"\n\u003Cp\u003Ei want 0.24 more\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-03-20T04:11:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022softweir\u0022 data-cite=\u0022softweir\u0022\u003E\u003Cdiv\u003EA switch to Unity 5 may take a while. To start with, there is no release date for Unity 5, so it could be months, maybe even more than a year away. Secondly, major new versions of game engines often have changes that break old code and it can take time to rewrite the code to work with the new engine.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDepressingly accurate.\u003C/p\u003E\n"},{"CreatedByName":"NoMrBond","CreatedById":69263,"CreatedDateTime":"2014-03-20T04:20:13Z","Content":"\n\u003Cp\u003EUnity 4 had 64 bit support too, except on Windows/MacOS the executables were all but unusable.\u003C/p\u003E\u003Cp\u003EAt the moment it sounds promising, but I won\u0027t get excited until C7 mentions it in his devWeekly byline after Unity-5 is actually available \u003Ca href=\u0022http://venturebeat.com/2014/03/17/unity-technologies-unveils-next-version-of-its-game-development-engine-to-make-thousands-of-3d-games-more-realistic/\u0022 rel=\u0022external nofollow\u0022\u003Ea couple of months\u003C/a\u003E from now.\u003C/p\u003E\u003Cp\u003EFingers crossed the migration is both painless and viable.\u003C/p\u003E\n"},{"CreatedByName":"Uml\u00FCx","CreatedById":69703,"CreatedDateTime":"2014-03-20T07:13:28Z","Content":"\n\u003Cp\u003Ei am very optimistic that a unity5 switch will come in the near future. KSP could profit sooo much from that (if all of this is really true.. stable x64, multithreaded job scheduler also working for physics)\u003C/p\u003E\u003Cp\u003Ebut then again.. \u0027near future\u0027 is an elastic term.. i\u0027d be happy to see it happen in 2014.\u003C/p\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2014-03-20T10:22:27Z","Content":"\n\u003Cp\u003ESo would it be reasonably easy and change things for the better to boot Linux from USB-drive simply to play KSP, are there more advantages than 4GB\u002B RAM usage?\u003C/p\u003E\n"},{"CreatedByName":"Seret","CreatedById":41409,"CreatedDateTime":"2014-03-20T10:29:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KerbMav\u0022 data-cite=\u0022KerbMav\u0022\u003E\u003Cdiv\u003ESo would it be reasonably easy and change things for the better to boot Linux from USB-drive simply to play KSP, are there more advantages than 4GB\u002B RAM usage?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EBooting from a USB won\u0027t generally allow you to install the proprietary video card drivers. If you\u0027ve got a system that can handle KSP graphics without them then you could do it that way I suppose. It\u0027d be a lot better to just set up a dual boot though. It\u0027s not like Linux will eat a big chunk of your hard drive. 20GB would be plenty if all you\u0027re doing is KSP.\u003C/p\u003E\n"},{"CreatedByName":"KerbMav","CreatedById":70338,"CreatedDateTime":"2014-03-20T11:21:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Seret\u0022 data-cite=\u0022Seret\u0022\u003E\u003Cdiv\u003EBooting from a USB won\u0027t generally allow you to install the proprietary video card drivers. If you\u0027ve got a system that can handle KSP graphics without them then you could do it that way I suppose. It\u0027d be a lot better to just set up a dual boot though. It\u0027s not like Linux will eat a big chunk of your hard drive. 20GB would be plenty if all you\u0027re doing is KSP.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs XP is going \u003Cem\u003Eoffline\u003C/em\u003E soon I switched to Linux on my ASUS eeePC I only use for surfing and videos while travelling. A friend who helped me set it up mentioned incompatibilities in the file systems of Win and Linux, warning me to write to the still windows formatted drive carrying unwatched stuff I did not want to copy over again. What could he have been talking about? (We were in a hurry at the end and I didnt get to ask him.)\u003C/p\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2014-03-20T11:25:11Z","Content":"\n\u003Cp\u003EIt used to be that Linux didn\u0027t support NTFS, used by current Windows versions, well. Nowadays it does.\u003C/p\u003E\n"},{"CreatedByName":"Seret","CreatedById":41409,"CreatedDateTime":"2014-03-20T11:32:36Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KerbMav\u0022 data-cite=\u0022KerbMav\u0022\u003E\u003Cdiv\u003EA friend who helped me set it up mentioned incompatibilities in the file systems of Win and Linux, warning me to write to the still windows formatted drive carrying unwatched stuff I did not want to copy over again. What could he have been talking about?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELinux can read and write to a Windows NTFS filesystem, but Windows can\u0027t even recognise Linux filesystems (usually EXT4 these days). If you\u0027ve set up a dual-boot you\u0027ll be able to copy anything still on your Windows partition over to your Linux one (but not vice versa).\u003C/p\u003E\u003Cp\u003EThere is a potential situation you can get with NTFS drives where if you don\u0027t shut down properly you won\u0027t be able to access the drive again until it\u0027s been checked for errors. Windows would do that at boot time. It\u0027s possible to do in Linux, but isn\u0027t a point-and-click job. For this reason you should probably move all your data you want access to over onto the Linux partitions instead of leaving it on the NTFS partition.\u003C/p\u003E\n"}]}