{"TopicId":75735,"ForumId":32,"TopicTitle":"Warping through SOI changes: Nope","CreatedByName":"munseeker","CreatedById":110850,"CreatedDateTime":"2014-06-22T21:19:30Z","PageNum":1,"Articles":[{"CreatedByName":"munseeker","CreatedById":110850,"CreatedDateTime":"2014-06-22T21:19:30Z","Content":"\n\u003Cp\u003ECurrently working on my first interplanetary mission with multiple craft on way to Duna - or so I thought.\u003C/p\u003E\u003Cp\u003EAs it turns out I had warped each craft out of Kerbin\u0027s SOI and when I checked in with each craft dozens of days later, they were all in solar orbits not even close to intersecting with Duna. One of them has a crew of five Kerbals with TAC Life Support, so I have some pretty hard deadlines on when they will need to be resupplied. Doh!\u003C/p\u003E\u003Cp\u003ESo I have now at least four craft that need refueling in deep space and next time I will make sure to go through those SOI changes in real time.\u003C/p\u003E\n"},{"CreatedByName":"Mitchz95","CreatedById":82292,"CreatedDateTime":"2014-06-22T21:20:46Z","Content":"\n\u003Cp\u003EYeah, that\u0027s a problem that\u0027s plagued the game for a long time. I wish they\u0027d just fix it so we could all get on with our lives.\u003C/p\u003E\n"},{"CreatedByName":"velve","CreatedById":112979,"CreatedDateTime":"2014-06-22T22:18:16Z","Content":"\n\u003Cp\u003ESo this means when you warp, the calculations turn out wrong?\u003C/p\u003E\n"},{"CreatedByName":"Motokid600","CreatedById":66349,"CreatedDateTime":"2014-06-22T22:19:36Z","Content":"\n\u003Cp\u003EPeople... Actually play this game without alarm clock? Oi, do yourself a favor. Get it. Use it.\u003C/p\u003E\n"},{"CreatedByName":"dryer_lint","CreatedById":162541,"CreatedDateTime":"2014-06-22T22:25:04Z","Content":"\n\u003Cp\u003EReally? For some reason, my Duna mission \u003Cem\u003Eonly worked\u003C/em\u003E if I time-warped past the SOI change. Whaaaat?\u003C/p\u003E\n"},{"CreatedByName":"FenrirWolf","CreatedById":72121,"CreatedDateTime":"2014-06-22T22:26:57Z","Content":"\n\u003Cp\u003EI\u0027ve found that you can do 10x warp over an SOI without affecting anything, but at 100x and above things can get screwed up.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Motokid600\u0022 data-cite=\u0022Motokid600\u0022\u003E\u003Cdiv\u003EPeople... Actually play this game without alarm clock? Oi, do yourself a favor. Get it. Use it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHaha, I used to have that one but didn\u0027t reinstall it since I\u0027ve learned how to eyeball transfer windows. But I think I will need to reinstall it to handle SOI changes for me.\u003C/p\u003E\n"},{"CreatedByName":"Tortoise","CreatedById":68002,"CreatedDateTime":"2014-06-22T22:35:53Z","Content":"\n\u003Cp\u003EYou should install kerbal alarm clock, itll stop your timewarp.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-22T22:41:18Z\u0022 title=\u002206/22/2014 10:41  PM\u0022 data-short=\u002210 yr\u0022\u003EJune 22, 2014\u003C/time\u003E by Tortoise\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CalculusWarrior","CreatedById":58313,"CreatedDateTime":"2014-06-22T22:39:58Z","Content":"\n\u003Cp\u003EI agree, Kerbal Alarm Clock has a fantastic feature that automatically adds an alarm to any ship that will experience a change of influence. This lets you jump to it and prevent and strange trajectory changes.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2014-06-22T22:48:03Z","Content":"\n\u003Cp\u003EYou can (or at least I can and I assume it would work for everybody) go up to 50x with no ill effects. 100x? No way. 50x is fine though.\u003C/p\u003E\u003Cp\u003EAnd KAC is required for me to enjoy the game, not just because of this but also for stopping my accidental warping past maneuver nodes and periapses.\u003C/p\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2014-06-23T00:42:10Z","Content":"\n\u003Cp\u003EI second the assertion that low warps are harmless. In fact, if I have a wobbly ship with lots of parts, I find that warping through the SOI change at 5x is friendlier than no warp at all, since physics calculations don\u0027t screw up your orbit during timewarp.\u003C/p\u003E\u003Cp\u003EBig warps, on the other hand, are certainly dangerous as far as precise encounters go. I always slow down to 5x or 10x when I get close to the SOI boundary.\u003C/p\u003E\u003Cp\u003EKAC also does help, but more so with other things.\u003C/p\u003E\n"},{"CreatedByName":"munseeker","CreatedById":110850,"CreatedDateTime":"2014-06-23T01:45:28Z","Content":"\n\u003Cp\u003EThanks for all the responses. I\u0027d set up and executed maneuvers inside Kerbin\u0027s SOI for all ships and sent them off and had then been on max warp back on Kerbin\u0027s for about 20-30 days. I had planned to stop at the Duna SOI change, but had not even considered that the Kerbin-solar orbit transition would mess things up.\u003C/p\u003E\u003Cp\u003EAnd yes, Kerbal Alarm Clock is necessary, but this was a user error.\u003C/p\u003E\n"},{"CreatedByName":"SkyRender","CreatedById":10651,"CreatedDateTime":"2014-06-23T02:28:38Z","Content":"\n\u003Cp\u003EActually, 100x time warp generally doesn\u0027t cause that bad of a shift in the end orbit; usually you can correct the error with less than 15m/s dV. 1000x or higher, though... no. Just don\u0027t do it.\u003C/p\u003E\n"},{"CreatedByName":"SpaceXray","CreatedById":113396,"CreatedDateTime":"2014-06-23T09:06:24Z","Content":"\n\u003Cp\u003EWarping though an SOI change at more than 1x speed will change your trajectory. Very old bug.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-06-23T09:57:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022SpaceXray\u0022 data-cite=\u0022SpaceXray\u0022\u003E\u003Cdiv\u003EWarping though an SOI change at more than 1x speed will change your trajectory. Very old bug.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis. Those who report that it works fine at low warp settings are not noticing the changes, which is fine as the changes likely aren\u0027t significant enough to upset their plans. But if you have a very precise encounter set up, like if you set your aerobraking altitude before the SOI change, warping through that change will affect it.\u003C/p\u003E\u003Cp\u003EKSP needs to either fix it or include KAC-like functionality. Or, at the very least, a key that sets time warp to 1x in a single keystroke (similar to \u0022x\u0022 for the throttle). I hate feeling like a panicked space ape mashing the comma key.\u003C/p\u003E\n"},{"CreatedByName":"allmhuran","CreatedById":66124,"CreatedDateTime":"2014-06-23T10:16:14Z","Content":"\n\u003Cp\u003EThe reason why high warp shifts your result whereas low warp (or real time) does not is important to understanding why it is like it is and what would be required to fix it. Particularly, the impotant thing is not \u0022whether or not you are in rails warp\u0022, but what it means to be in high value rails warp.\u003C/p\u003E\u003Cp\u003ELike all games, KSP will do its calculations every frame. So at say 50 frames per second, it is updating your position 50 times a second. Let\u0027s say you\u0027re travelling at 10,000 km/h in solar orbit (close enough to a realistic in-game value and an easy number to work with). That means that every 1/50th of a second you move 167 km/minute, or 2.7km/second, or 0.05km every 50th of a second. So the game will \u0022see\u0022 you cross the SOI boundary within about 50m of the actual SOI boundary position. And all is well. Not much changes at 5x, or 10x, or 50x warp. \u003C/p\u003E\u003Cp\u003EBut if you are warping at 100,000 times you move over 5000km every 50th of a second, which means you might be well past the SOI boundary by the time the game \u0022notices\u0022 and recalculates your trajectory for the new SOI. This in effect means you are entering the SOI from a completely different position, and with a completely different trajectory.\u003C/p\u003E\u003Cp\u003EThe best (and possibly only) way to fix this would be for the game to look ahead to where the SOI change occurs and make sure that it does a new trajectory calculation at the boundary point. Ideally, the game would adjust the warp value perfectly as you got near the boundary, dropping the warp value if the current warp puts your position more than, say, 1km beyond the SOI change in the next frame based on the current predicted ETA (which is pretty easy to do). A similar sort of calculation should probably be applied to atmospheric entry, otherwise you can completely bypass an aerobrake because you\u0027ve whizzed past the planet before the game notices (for the same reason).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-06-23T10:23:55Z\u0022 title=\u002206/23/2014 10:23  AM\u0022 data-short=\u002210 yr\u0022\u003EJune 23, 2014\u003C/time\u003E by allmhuran\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"timsfitz","CreatedById":104387,"CreatedDateTime":"2014-06-23T11:42:15Z","Content":"\n\u003Cp\u003EDid you know that if your ship is on a collision course with a planetary body you can just go to extreme time warp and fly through the planet like it was a hologram. Kinda stupid, but it\u0027s saved more than one of my ships.\u003C/p\u003E\n"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2014-06-23T11:49:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022timsfitz\u0022 data-cite=\u0022timsfitz\u0022\u003E\u003Cdiv\u003EDid you know that if your ship is on a collision course with a planetary body you can just go to extreme time warp and fly through the planet like it was a hologram. Kinda stupid, but it\u0027s saved more than one of my ships.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m pretty sure that bug was fixed in the latest version, hasn\u0027t happened to me again yet.\u003C/p\u003E\n"},{"CreatedByName":"Dodgey","CreatedById":89577,"CreatedDateTime":"2014-06-23T12:09:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Linear\u0022 data-cite=\u0022Linear\u0022\u003E\u003Cdiv\u003EI\u0027m pretty sure that bug was fixed in the latest version, hasn\u0027t happened to me again yet.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENope still in the game. I did it not 30 minutes ago.\u003C/p\u003E\n"},{"CreatedByName":"the_bT","CreatedById":3876,"CreatedDateTime":"2014-06-23T12:18:40Z","Content":"\n\u003Cp\u003EConsidering the fact that it is not so much a bug but rounding errors in the floating point variables used to calculate the orbit I\u0027m not so sure it can be fixed completely. \u003C/p\u003E\u003Cp\u003EAll that can be done is minimize the effect by forcing low timewarp (thus smaller values and smaller error in calculations) through SOI changes.\u003C/p\u003E\u003Cp\u003EIt would basically be a light version of KAC implemented stock.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-06-23T12:24:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022the_bT\u0022 data-cite=\u0022the_bT\u0022\u003E\u003Cdiv\u003EConsidering the fact that it is not so much a bug but rounding errors in the floating point variables used to calculate the orbit I\u0027m not so sure it can be fixed completely. \u003Cp\u003EAll that can be done is minimize the effect by forcing low timewarp (thus smaller values and smaller error in calculations) through SOI changes.\u003C/p\u003E\u003Cp\u003EIt would basically be a light version of KAC implemented stock.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s not rounding errors that cause this, it\u0027s that the ticks in timewarp are much longer. When crossing an SOI boundary in normal time, your trajectory gets recalculated at most 1/60th of an game-time second after the transition; under higher timewarp the time is much longer (at most 1/60 * timewarp factor seconds), so your ship is unaffected by the new gravity situation until it is deeper in the well.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-06-23T12:36:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022the_bT\u0022 data-cite=\u0022the_bT\u0022\u003E\u003Cdiv\u003EConsidering the fact that it is not so much a bug but rounding errors in the floating point variables used to calculate the orbit I\u0027m not so sure it can be fixed completely. \u003Cp\u003EAll that can be done is minimize the effect by forcing low timewarp (thus smaller values and smaller error in calculations) through SOI changes.\u003C/p\u003E\u003Cp\u003EIt would basically be a light version of KAC implemented stock.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt doesn\u0027t have anything to do with floating point rounding errors. The problem is caused by the game engine treating the whole of the time step of the current \u0022frame\u0022 as being in one SOI. If you imagine a situation where you are flying outward from Kerbin to Duna and will enter Duna\u0027s SOI on the sunny side, while outside Duna\u0027s SOI the gravitational force acts towards the sun but inside Duna\u0027s SOI gravity is pulling in the other direction. If one time step ends with you just outside Duna\u0027s SOI then the game will calculate the trajectory as if the whole of the time step has gravity pulling towards the sun but at high warp a considerable amount of the time could be inside Duna\u0027s SOI and should have gravity pulling the other way.\u003C/p\u003E\u003Cp\u003EThis can be fixed as allmhuran said, by the game calculating if an SOI change is going to happen during the current time step and splitting the calculations into two parts, one before the change and one after. It is actually possible at high warp to cross more than 1 SOI boundary, either entering and leaving an SOI (a grazing touch on the edge of the SOI) or even going from one SOI to a second and then to a third, e.g. from solar SOI, into a planetary SOI and then into a moon SOI (and possibly back out of the moon SOI). So, the game would simply look ahead from the start of the time step for the next SOI change and calculate to that point, and then repeat for the remainder of the time step...\u003C/p\u003E\n"},{"CreatedByName":"Linear","CreatedById":26619,"CreatedDateTime":"2014-06-23T15:48:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dodgey\u0022 data-cite=\u0022Dodgey\u0022\u003E\u003Cdiv\u003ENope still in the game. I did it not 30 minutes ago.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWow, i\u0027ll have to make sure i look out for it!\u003C/p\u003E\n"},{"CreatedByName":"Sirrobert","CreatedById":70591,"CreatedDateTime":"2014-06-23T16:03:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022timsfitz\u0022 data-cite=\u0022timsfitz\u0022\u003E\u003Cdiv\u003EDid you know that if your ship is on a collision course with a planetary body you can just go to extreme time warp and fly through the planet like it was a hologram. Kinda stupid, but it\u0027s saved more than one of my ships.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYep, that happends for the exact same reason we have this SOI problem\u003C/p\u003E\u003Cp\u003EAt really high warp speeds, it will take less than a single frame for the ship to pass through the planet and come out on the other side. So at no point does the game ever notice you entering atmosphere, which is what would normally kick you out of warp\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Linear\u0022 data-cite=\u0022Linear\u0022\u003E\u003Cdiv\u003EWow, i\u0027ll have to make sure i look out for it!\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s pritty easy to setup.\u003C/p\u003E\u003Cp\u003EThe next time you return from Mun (or Minmus), set your orbit to crash with Kerbin (you probably already do this. Atmosphere \u002B parachutes already makes you land in this case).\u003C/p\u003E\u003Cp\u003ENow set the game to max warp.\u003C/p\u003E\n"},{"CreatedByName":"Superfluous J","CreatedById":73725,"CreatedDateTime":"2014-06-23T18:26:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Red Iron Crown\u0022 data-cite=\u0022Red Iron Crown\u0022\u003E\u003Cdiv\u003EThis. Those who report that it works fine at low warp settings are not noticing the changes, which is fine as the changes likely aren\u0027t significant enough to upset their plans. But if you have a very precise encounter set up, like if you set your aerobraking altitude before the SOI change, warping through that change will affect it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou are a better player than I, if you can nail a Jool aerobraking altitude from Kerbin\u0027s SOI. I find that, from that far away, rotating my ship has far more affect on periapsis than time warping at any speed but the highest would.\u003C/p\u003E\u003Cp\u003EThat said, I\u0027d have to recheck but I did some testing and at 50x speed, the periapsis at my destination planet did not change a single km when passing through SOIs.\u003C/p\u003E\u003Cp\u003EI think this requires moar science.\u003C/p\u003E\n"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2014-06-23T18:31:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u00225thHorseman\u0022 data-cite=\u00225thHorseman\u0022\u003E\u003Cdiv\u003EYou are a better player than I, if you can nail a Jool aerobraking altitude from Kerbin\u0027s SOI. I find that, from that far away, rotating my ship has far more affect on periapsis than time warping at any speed but the highest would.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHeh, no way I\u0027m that good. I was referring to setting the aerobraking altitude in Kerbol\u0027s SOI, then having it change when you enter the planet\u0027s SOI.\u003C/p\u003E\n"}]}