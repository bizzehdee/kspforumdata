{"TopicId":154483,"ForumId":32,"TopicTitle":"Questions about KSP Drag Model","CreatedByName":"CrashChris","CreatedById":169147,"CreatedDateTime":"2017-01-04T16:44:27Z","PageNum":1,"Articles":[{"CreatedByName":"CrashChris","CreatedById":169147,"CreatedDateTime":"2017-01-04T16:44:27Z","Content":"\n\u003Cdiv data-role=\u0022contentPage\u0022\u003E\n\u003Cp\u003E\nHi Guys\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI am working on a control code in krpc, where i need to precicly predict the drag coefficient in each stage of flight since i want to determine the impact position and velocity to calculate an ideal landing burn. (I know, there are mods that do exactly the same, but i want to learn how to do this by myself)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI did some tests to measure the atmospheric properties used in KSP but i don\u2018t really understand them.\n\u003C/p\u003E\n\u003Cp\u003E\nMy results are the following:\n\u003C/p\u003E\n\u003Cp\u003E\n1) The pressure as a function of altitude is nearly an exponential function\n\u003C/p\u003E\n\u003Cp\u003E\n2) The temprature distribution is similar to the one at earth\n\u003C/p\u003E\n\u003Cp\u003E\n3) The density is calculated fom 1) and 2) using the assumption of an ideal gas\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo far so good, because everything is convertable to formulae\n\u003C/p\u003E\n\u003Cp\u003E\nThen, i measured the dragcoefficient times surface over different mach numbers staying at the same altitude. The results are, as expected from the real world: At transsonic speeds, drag increases dramaticly, falling down again for supersonic/hypersonic speeds:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022const_Alt.png\u0022 class=\u0022ipsImage\u0022 height=\u0022550\u0022 src=\u0022https://s23.postimg.org/x83k073bf/const_Alt.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n(The wobbles and the narrow peak at 0.6 are coming from minimal steering, that changes the angle of attack)\n\u003C/p\u003E\n\u003Cp\u003E\nBut here is my first problem: How can this relation be calculated for the KSP physics / how is it calculated internally? Does anybody know this?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFinally, I meausred the drag coefficient times surface for different altitudes while staying at the same mach number, using a PID controller.\n\u003C/p\u003E\n\u003Cp\u003E\nThe coeefficient increases dramatically for high altitudes and there are also some strange wobbles around 35km as it can be seen here:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022const_Mach.png\u0022 class=\u0022ipsImage\u0022 height=\u0022550\u0022 src=\u0022https://s23.postimg.org/tprk3t2ff/const_Mach.png\u0022 width=\u00221000\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnd this relation is my biggest trouble, because i have no idea, how to calculate this effects. I know, that both effects are coming from the changing Reynolds number but i cannot find any source, that gives a hint how this is approximated in KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nI am basicly looking for a formula, that calculates the drag coefficient at a specific flight phase in relation of a constant \u0022standard\u0022 drag coefficient, mach number, temperature and altitude.\n\u003C/p\u003E\n\u003Cp\u003E\nI checked the corresponding part of the mechjeb landing code and realized, that mechjeb uses the KSP API to get the drag calculations.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there any chance, to get reasonable predictions without using the KSP API (since i don\u2018t want to write my code in C#)?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMany thanks in advance,\n\u003C/p\u003E\n\u003Cp\u003E\nChris\n\u003C/p\u003E\n\u003Chr data-role=\u0022contentPageBreak\u0022\u003E\u003C/div\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-01-04T16:46:12Z\u0022 title=\u002201/04/2017 04:46  PM\u0022 data-short=\u00227 yr\u0022\u003EJanuary 4, 2017\u003C/time\u003E by CrashChris\u003C/strong\u003E\n\u003Cbr\u003EFixed Resolution of Plots\n\u003C/span\u003E\n"},{"CreatedByName":"Boris-Barboris","CreatedById":133181,"CreatedDateTime":"2017-01-04T17:05:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222910380\u0022 data-ipsquote-contentid=\u0022154483\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221483548267\u0022 data-ipsquote-userid=\u0022169147\u0022 data-ipsquote-username=\u0022CrashChris\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 minutes ago, CrashChris said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs there any chance, to get reasonable predictions without using the KSP API (since i don\u2018t want to write my code in C#)?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo.\n\u003C/p\u003E\n\u003Cp\u003E\nYou can get very rough estimations by analyzing the drag on the fly though. Should your algorithm be robust enough, and the vessel have control authority and thrust reserve, that could suffice in some cases (\u003Cabbr title=\u0022Single Stage to Orbit\u0022\u003ESSTO\u003C/abbr\u003E landing), but it doesn\u0027t look like what you\u0027re trying to achieve.\n\u003C/p\u003E\n\u003Cp\u003E\nNo such formula exists. Algorithm does exist, and it involves poking quite ugly, stateful C# API.\n\u003C/p\u003E\n"},{"CreatedByName":"TopHeavy11","CreatedById":154744,"CreatedDateTime":"2017-01-06T13:45:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222910396\u0022 data-ipsquote-contentid=\u0022154483\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221483549532\u0022 data-ipsquote-userid=\u0022133181\u0022 data-ipsquote-username=\u0022Boris-Barboris\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 1/4/2017 at 11:05 AM, Boris-Barboris said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNo.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nUnless you ask \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66485-squad/\u0026amp;do=hovercard\u0022 data-mentionid=\u002266485\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/66485-squad/\u0022 rel=\u0022\u0022\u003E@SQUAD\u003C/a\u003E, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/149302-badie/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022149302\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/149302-badie/\u0022 rel=\u0022\u0022\u003E@Badie\u003C/a\u003E, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167737-uomocapra/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022167737\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167737-uomocapra/\u0022 rel=\u0022\u0022\u003E@UomoCapra\u003C/a\u003E or someone else on the Dev team. They might be able to help you\n\u003C/p\u003E\n"}]}