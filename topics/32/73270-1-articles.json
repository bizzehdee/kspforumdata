{"TopicId":73270,"ForumId":32,"TopicTitle":"Some parts lags more than others?","CreatedByName":"brusura","CreatedById":57899,"CreatedDateTime":"2014-05-24T17:03:26Z","PageNum":1,"Articles":[{"CreatedByName":"brusura","CreatedById":57899,"CreatedDateTime":"2014-05-24T17:03:26Z","Content":"\n\u003Cp\u003EI am asking because I just loaded one of the fantastic Mareczex333 craft and my face turned sad when I saw it was a 160 parts, that would have lagged quite a bit on my pc...but with great surprise I got no lag at all running around 60 fps, meanwhile in orbit my 140 parts vessel is starting to lag quite a bit.\u003C/p\u003E\u003Cp\u003EConsidering that Mareczex333\u0027s crafts are almost all made of wings, I suppose wings lag less? Collision box for wings should be a simple cube, while for a tank is something more complex like cylinder.\u003C/p\u003E\u003Cp\u003EWhat are your experience about?\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-05-24T17:59:20Z","Content":"\n\u003Cp\u003EAs far as I know wings should lag more, particularly in atmosphere because some extra calculations (lift) are made for them.\u003C/p\u003E\u003Cp\u003EAlso a ship cannot collide with itself so collision boxes don\u0027t play a role unless the ship is just about to crash or unless some other ship is nearby.\u003C/p\u003E\u003Cp\u003EWhat might cause more lag is if you bring two ships with large amount of parts together.\u003C/p\u003E\n"},{"CreatedByName":"phoenix_ca","CreatedById":50380,"CreatedDateTime":"2014-05-24T18:14:12Z","Content":"\n\u003Cp\u003EIndeed. Lots of wings means lots of lag. I\u0027d suggest doing-away with them and installing PWings instead.\u003C/p\u003E\n"},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2014-05-24T18:41:11Z","Content":"\n\u003Cp\u003ESome parts are more lag-inducing. From memory docked docking ports have a bigger penalty than regular parts, for example.\u003C/p\u003E\u003Cp\u003EThe Engineer calculations, used to display vessel delta-V in Engineer and VOID, also aggravate lag, so if your ship has that on and running there\u0027s your explanation.\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-05-30T13:45:47Z","Content":"\n\u003Cp\u003EI\u0027ve found that putting lots of the new Claw part on a rocket will decrease the framerate quite a bit. It was very noticeable in the ballpark of about 6 or 7 claws.\u003C/p\u003E\n"},{"CreatedByName":"GusTurbo","CreatedById":57552,"CreatedDateTime":"2014-05-30T14:34:37Z","Content":"\n\u003Cp\u003EThe extendable ladders decrease framerate a lot, though I\u0027m not sure why. Try adding ladders in 8x symmetry in the VAB and see what I mean.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-05-30T15:10:54Z","Content":"\n\u003Cp\u003EOne of the worst offenders is the OX-STAT solar panel. The tiny one that is always active. Every one of them is constantly calculating its position relative to the sun and whether or not it is being blocked by another part. Since people have a tendency to put a lot of these on their crafts it can really slow things down.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-05-30T15:20:25Z","Content":"\n\u003Cp\u003EWhen I was building my zero-G chamber (a chamber that falls through atmosphere exactly as fast as EVA Kerbal) I had two main \u0022counterweight\u0022 parts at my disposal - the Mk2 cockpit and inline docking port. They were equivalent in the sense that they have the same mass and drag coefficient. But they were very different in FPS. When I built the chamber using inline docking ports, the FPS was almost half the value when it was built with cockpits. I\u0027m not sure what to blame for it.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-05-30T15:33:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EAs far as I know wings should lag more, particularly in atmosphere because some extra calculations (lift) are made for them.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI suspect the extra lift calculations aren\u0027t really very significant when compared to all the other stuff that gets calculated as I believe the stock \u0022aerodynamics\u0022 uses a simple lookup table to get the lift from the angle of attack (or probably a FloatCurve actually, which is basically an linearly interpolated lookup table).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cantab\u0022 data-cite=\u0022cantab\u0022\u003E\u003Cdiv\u003ESome parts are more lag-inducing. From memory docked docking ports have a bigger penalty than regular parts, for example.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDocking ports do extra calculations during docking to look for nearby ports and calculate the magnetic forces but I wouldn\u0027t expect them to do much when docked (though I wouldn\u0027t be surprised if they do exactly the same calculations).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022GusTurbo\u0022 data-cite=\u0022GusTurbo\u0022\u003E\u003Cdiv\u003EThe extendable ladders decrease framerate a lot, though I\u0027m not sure why. Try adding ladders in 8x symmetry in the VAB and see what I mean.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt could either be because they are \u0022animated\u0022 or because they are set to have no physical significance. Logic (yeah, right) would seem to suggest that no physics significance should make a part cause less lag but I can easily believe that there is something weird going on with them (e.g. the various kraken incidents they sometimes seem to provoke).\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022cantab\u0022 data-cite=\u0022cantab\u0022\u003E\u003Cdiv\u003EThe Engineer calculations, used to display vessel delta-V in Engineer and VOID, also aggravate lag, so if your ship has that on and running there\u0027s your explanation.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, the KER (and VOID) simulation code does impact the frame rate but the most recent version of KER (0.6.2.4) should be significantly better than earlier versions and also has a tweakable slider on the flight engineer part that allows you to control how often the simulation code is run. Most of the simulation code runs in a background thread so a single CPU machine will be affected considerably more than a multiple CPU machine. The speed of the simulation does depend on the part count but is more dependent on the number of stages, the number of engines and the complexity of the fuel flow in the vessel (e.g. it is slower when an engine draws fuel from a tank that is a large number of parts away).\u003C/p\u003E\u003Cp\u003EThe particular structure of the part tree may also contribute to lag, a very \u0022deep\u0022 tree (e.g. where each part only has 1 or 2 children) seems to lag more than a \u0022shallow\u0022 tree (where each part has lots of children) with the same number of parts. This would make sense as most tree scanning and manipulation code will get slower if it has to deal with more levels of tree.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EOne of the worst offenders is the OX-STAT solar panel. The tiny one that is always active. Every one of them is constantly calculating its position relative to the sun and whether or not it is being blocked by another part. Since people have a tendency to put a lot of these on their crafts it can really slow things down.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe calculation of the position/orientation relative to the sun is not very complex but I presume the occlusion test is done by casting a ray from the part to the sun and seeing if it hits anything which is known to be quite slow.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EWhen I was building my zero-G chamber (a chamber that falls through atmosphere exactly as fast as EVA Kerbal) I had two main \u0022counterweight\u0022 parts at my disposal - the Mk2 cockpit and inline docking port. They were equivalent in the sense that they have the same mass and drag coefficient. But they were very different in FPS. When I built the chamber using inline docking ports, the FPS was almost half the value when it was built with cockpits. I\u0027m not sure what to blame for it.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIf the inline port was \u0022closed\u0022 then it shouldn\u0027t be doing any docking port stuff but it is an \u0022animated\u0022 part again, like the ladders...\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-30T15:39:25Z\u0022 title=\u002205/30/2014 03:39  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 30, 2014\u003C/time\u003E by Padishar\u003C/strong\u003E\n\u003C/span\u003E\n"}]}