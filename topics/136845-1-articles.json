{"TopicId":136845,"ForumId":15,"TopicTitle":"How to assign/set layers to multiple animations in imported FBX","CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2016-04-13T13:06:52Z","PageNum":1,"Articles":[{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2016-04-13T13:06:52Z","Content":"\n\u003Cp\u003E\nAs title says, i\u0027m designing a part and have managed to do all steps in process except that i don\u0027t know how to assign or set layer IDs to multiple animation takes from imported FBX.\n\u003C/p\u003E\n\u003Cp\u003E\nModel is in FBX 2013 format and Unity is 4.2.2. In previous version, i have already succeeded to design and export UV mapped, textured and animated FBX model into KSP with basic part config that used FSanimateGeneric from FireSpitter.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m trying to create a model that will have independent animations that will use \u003Ca href=\u0022https://github.com/Starwaster/LayeredAnimations#layeredanimations\u0022 rel=\u0022external nofollow\u0022\u003ELayeredAnimations\u003C/a\u003E plugin by \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/71262-starwaster/\u0026amp;do=hovercard\u0022 data-mentionid=\u002271262\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/71262-starwaster/\u0022\u003E@Starwaster\u003C/a\u003E .\n\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-04-13T14:37:17Z","Content":"\n\u003Cp\u003E\nI don\u0027t think the animations need to get tagged. Just assign different layers to multiple ModuleAnimateGeneric in the part config.\n\u003C/p\u003E\n"},{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2016-04-13T15:50:31Z","Content":"\n\u003Cp\u003E\n\u003Cs\u003EI\u0027ve read about multiple animation takes on forum threads and for most part people have trouble controlling at which frame animation starts. Both ModuleAnimateGeneric and FSAnimateGeneric seem to have this issue. Will conduct my own tests as time permits.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nMeanwhile, i\u0027ve discovered i\u0027ll need to chain animations to ensure they get executed in proper order and state. And if this requires me to write another plugin, so be it. I\u0027m already on the roll and will finish this.\n\u003C/p\u003E\n\u003Cp\u003E\nThe animation logic i need is (example):\n\u003C/p\u003E\n\u003Cp\u003E\n-there are 3 animations, let\u0027s call them A, B and C\n\u003C/p\u003E\n\u003Cp\u003E\n-animation A is end-type, a kind of preparation / support / finish\n\u003C/p\u003E\n\u003Cp\u003E\n-animations B and C are main sequences\n\u003C/p\u003E\n\u003Cp\u003E\n-before running anim B, anim A is run first, then B\n\u003C/p\u003E\n\u003Cp\u003E\n-before running anim C, anim A is checked and if not played, its run first, then C\n\u003C/p\u003E\n\u003Cp\u003E\n-when running anim A in reverse, B and C are executed first in reverse\n\u003C/p\u003E\n\u003Cp\u003E\nSeems like a lot of work. I\u00A0 hope i get this working.\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT:\u00A0 Silly me... I\u0027ve re-read Starwaster\u0027s info on github.. You are right it will work. Ahh i guess nobody is immune against a \u0022RTFM\u0022 \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-04-13T16:03:32Z\u0022 title=\u002204/13/2016 04:03  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 13, 2016\u003C/time\u003E by fatcargo\u003C/strong\u003E\n\u003Cbr\u003Eblindness or plain stupidity ? judge for yourself :)\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2016-04-13T16:05:02Z","Content":"\n\u003Cp\u003E\nYou\u0027ll most likely have to write a custom animation module for this. I don\u0027t know of any animation modules stock or plugin that runs the kind of logic checks you are looking to do.\u00A0it\u0027s something that would be easier with animator component. another reason for Squad to ditch legacy animation system.\n\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2016-04-15T21:58:58Z","Content":"\n\u003Cp\u003E\nWhy not combine those three animations into one? You could do it with a custom plugin but that sounds needlessly complicated.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2016-04-17T16:57:29Z","Content":"\n\u003Cp\u003E\nThanks for the advice, but my part design requires such level of control as to be usable to a player. If left as single animation, players will have problems using it in crafts with low ground clearance and animations representing part mechanics will be too crude.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, i took upon myself to complete all steps for this part, including the programming segment. This is the first time i make something for KSP, might as well do most that is offered for modding.\n\u003C/p\u003E\n"},{"CreatedByName":"fatcargo","CreatedById":93302,"CreatedDateTime":"2016-04-26T19:38:19Z","Content":"\n\u003Cp\u003E\nSorry for the off-topic, but the below is a result of my investigations into the matter.\n\u003C/p\u003E\n\u003Cp\u003E\nSmall dev news : as i had time, i have poured over source codes of several ksp plugins, some youtube videos and ksp forum. I have managed to proof-test several components i need for my target :\n\u003C/p\u003E\n\u003Cp\u003E\n- loading part.cfg\n\u003C/p\u003E\n\u003Cp\u003E\n-modeling, skinning, rigging, arranging animations and exporting to fbx model (learned also to save ONLY keyframes of animated transform channels in export, reduced size quite a bit)\n\u003C/p\u003E\n\u003Cp\u003E\n-playing multiple animations on single object in unity editor (both as siblings AND in parent-child hierarchy - which was AWESOME discovery for me !)\n\u003C/p\u003E\n\u003Cp\u003E\n-define a config structure that should let part creator describe model animations in txt format\n\u003C/p\u003E\n\u003Cp\u003E\nSo far, i have covered almost all components, now i have to focus on putting it all together. And have also learned to make a small test-scene in unity editor to test out ideas before putting them in plugin (and anxiously waiting for NREs in KSP \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E ).\n\u003C/p\u003E\n\u003Cp\u003E\nAlso i have discovered part of KSP API as starting point for my next target which i requested earlier (EVA / IVA transitions), but that will have to wait.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}