{"TopicId":83689,"ForumId":16,"TopicTitle":"persistent.sfs CONTRACT_FINISHED vs ?","CreatedByName":"Trann","CreatedById":83801,"CreatedDateTime":"2014-09-03T03:55:01Z","PageNum":1,"Articles":[{"CreatedByName":"Trann","CreatedById":83801,"CreatedDateTime":"2014-09-03T03:55:01Z","Content":"\n\u003Cp\u003EI\u0027m wondering if anyone knows how the data that drives the checkbox is stored?\u003C/p\u003E\u003Cp\u003EI\u0027m finding the count doesn\u0027t map directly to the CONTRACT_FINISHED entries.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i2.photobucket.com/albums/y4/PokerTrann/KSP/ScreenShot2014-09-02at221126_zps3d1c9364.png\u0022 alt=\u0022ScreenShot2014-09-02at221126_zps3d1c9364.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\u003Cp\u003EEDIT: updated to \u0027answered\u0027.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-04T23:34:03Z\u0022 title=\u002209/04/2014 11:34  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 4, 2014\u003C/time\u003E by Trann\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2014-09-03T04:09:43Z","Content":"\n\u003Cp\u003EI believe it does a check to see that all PARAM states are marked complete but the contract state is not marked FINISHED.\u003C/p\u003E\n"},{"CreatedByName":"Trann","CreatedById":83801,"CreatedDateTime":"2014-09-04T00:10:55Z","Content":"\n\u003Cp\u003EIn walking through things, all CONTRACT_FINISHED entries have \u0022state = Completed\u0022 and the nested PARAMs have \u0022state = Complete\u0022 while all CONTRACT entries have either \u0022state = Offered\u0022 or \u0022state = Accepted\u0022.\u003C/p\u003E\u003Cp\u003EI\u0027m sure CONTRACT gets changed to CONTRACT_FINISHED when appropriate which makes sense.\u003C/p\u003E\u003Cp\u003EThe issue I see is that there are 22 finished contracts in the persistent.sfs file while there are 29 checks in the GUI. I suspect a mod is clobbering the completed contracts somehow so I\u0027m trying to figure out what I can search for in the file (and in backups of the file) to discover the mismatch.\u003C/p\u003E\u003Cp\u003E...\u003C/p\u003E\u003Cp\u003EBut this is all academic. If no one knows, that\u0027s fine, too.\u003C/p\u003E\n"},{"CreatedByName":"DeMatt","CreatedById":90539,"CreatedDateTime":"2014-09-04T08:28:34Z","Content":"\n\u003Cp\u003ECONTRACT_FINISHED entries are your stored completed contracts. If you go into Mission Control and click on the \u0022Archives\u0022 tab, you\u0027ll see them listed there.\u003C/p\u003E\u003Cp\u003EThe checkmarks you\u0027ve pictured in your screenshot are messages from completing contracts. Most contracts only generate one message when you complete them; the exception is the \u0022Explore Mun\u0022-type contract, which has four separately-completed objectives, each of which generates its own message. Certain mods (e.g. \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/86691\u0022 rel=\u0022external nofollow\u0022\u003EDebRefund\u003C/a\u003E or \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/86677\u0022 rel=\u0022external nofollow\u0022\u003EStageRecovery\u003C/a\u003E) also create messages; I daresay KSP itself will create more messages itself as more functionality gets added.\u003C/p\u003E\u003Cp\u003EIf you look at the bottom of your persistent.sfs, you\u0027ll find a block labeled MESSAGESYSTEM, with MESSAGE sub-blocks inside. That\u0027s where your \u002229 checks\u0022 are stored.\u003C/p\u003E\n"},{"CreatedByName":"Trann","CreatedById":83801,"CreatedDateTime":"2014-09-04T16:16:40Z","Content":"\n\u003Cp\u003EMultiple objectives! :doh:\u003C/p\u003E\u003Cp\u003EI\u0027ll tweak my script and recheck/recount the numbers. I\u0027m betting that\u0027s it.\u003C/p\u003E\n"},{"CreatedByName":"Trann","CreatedById":83801,"CreatedDateTime":"2014-09-04T23:33:30Z","Content":"\n\u003Cp\u003EThe MESSAGESYSTEM block is where it\u0027s at. Inside were messages with \u0022Contract Complete\u0022 vs \u0022Contract Parameter Complete\u0022. A count of the former matches the number of CONTRACT_FINISHED entries; adding the latter accounts for the number of overall checkmarks displayed in the GUI (29).\u003C/p\u003E\u003Cp\u003EThanks muchly.\u003C/p\u003E\u003Cp\u003EAnd for the sake of sharing...\u003C/p\u003E\u003Cp\u003ESearching for the PARAM \u0022state = Complete\u0022 gives a much higher number because its sub-PARAMs are conditions that must be met before the test can be considered a success. For example, a part test might have\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPARAM\u003Cbr\u003E{\u003Cbr\u003E name = PartTest\u003Cbr\u003E PARAM\u003Cbr\u003E {\u003Cbr\u003E  name = ReachDestination\u003Cbr\u003E }\u003Cbr\u003E PARAM\u003Cbr\u003E {\u003Cbr\u003E  name = ReachSituation\u003Cbr\u003E }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo it would be more accurate to exclude those sub-PARAMs in the count of completed contracts.\u003C/p\u003E\u003Cp\u003EIf you\u0027re so inclined. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}