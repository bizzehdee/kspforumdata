{"TopicId":30358,"ForumId":16,"TopicTitle":"Help me troubleshoot this lander! (fuel flow does not respect lines)","CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2013-05-31T00:37:55Z","PageNum":1,"Articles":[{"CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2013-05-31T00:37:55Z","Content":"\n\u003Cp\u003Eso this is a strange issue... I have fuel lines set up (in symmetry) basically like this: \u003C/p\u003E\u003Cp\u003Eradial tanks below the clamp-o-tron -\u0026gt; main tank below the clamp-o-tron -\u0026gt; radial tanks with engines below the clamp-o-tron -\u0026gt; clamp-o-tron -\u0026gt; upper stage main tank -\u0026gt; upper stage radial tanks with engines.\u003C/p\u003E\u003Cp\u003EHowever, when I actually test this, the following happens: \u003C/p\u003E\u003Cp\u003Eradial tanks below the clamp-o-tron and ONE of the two radial tanks with engines below the clamp-o-tron begin draining immediately, the first ones at a faster rate (this should not ever happen. why is this happening?).\u003C/p\u003E\u003Cp\u003Eafter the first tanks empty, both of the radial tanks with engines below the clamp-o-tron, and the main tank below the clamp-o-tron AND the upper stage main tank begin draining all at the same time, but one of the tanks with an engine drains faster.\u003C/p\u003E\u003Cp\u003Eafter the tank with an engine runs out, the other tank with an engine, the main tank below the clamp-o-tron, AND the main tank above the clamp-o-tron drain, but the empty tank engine keeps firing, and the upper stage main tank empties faster than the rest\u003C/p\u003E\u003Cp\u003Ewith the upper stage main tank empty, the upper stage radial tanks with engines begin draining too\u003C/p\u003E\u003Cp\u003EIf I disable fuel crossfeed in the clamp-o-tron, the lower stage weirdness mostly goes away, but the upper stage drains before the lower.\u003C/p\u003E\u003Cp\u003EThe way I need it to behave: \u003C/p\u003E\u003Cp\u003EI need all of the lower stage tanks to drain before the upper stage ones begin draining.\u003C/p\u003E\u003Cp\u003EI need the lower stage engines to fire until the lower stage tanks are all empty, and then stop firing.\u003C/p\u003E\u003Cp\u003EI need the upper stage engines to always fire until everything is empty.\u003C/p\u003E\u003Cp\u003Eother requirement: there can be NO direct fuel linkages between the upper and lower stage (aka, must be able to assemble it in orbit, so nothing that needs to be added after the docking procedure to make it work.\u003C/p\u003E\u003Cp\u003Eother other requirements: why the bloody hell does this thing want to flip over so badly? it seems to try and turn the wrong way whenever I make course corrections while hovering. MJ can\u0027t handle it either. Could be related to the above problem with the upper tanks emptying first, putting the COM below the COL, but still, I don\u0027t think the engines are THAT high up....\u003C/p\u003E\u003Cp\u003E.craft attached (stock). \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://herpnderp.info/Omni-Lander%20I%20s.craft\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://herpnderp.info/Omni-Lander%20I%20s.craft\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Nao","CreatedById":23462,"CreatedDateTime":"2013-05-31T01:22:37Z","Content":"\n\u003Cp\u003EThe problem: even without the fuel lines, there is already a fuel linkage between upper and lower part, through the docking ports that is, creating a fuel loop.\u003C/p\u003E\u003Cp\u003EAfter playing puzzle fuel line connector for about half an hour, i found the \u0022disable crossfeed\u0022 on the docking port senior. Welp that solves the problem in the craft you posted without changing anything \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs for flipping, it wasnt that bad for me ... but i\u0027m not sure about the gimbaling on LV-N\u0027s as they are close to CoM, thus provide almost no gimbal power (if they are above CoM they actually work wrong and can contribute to flipping) i would advise creating a control group to toggle the gimbal on them.\u003C/p\u003E\u003Cp\u003ECheers!\u003C/p\u003E\n"},{"CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2013-05-31T01:34:00Z","Content":"\n\u003Cp\u003Esee my above post: if I disable crossfeed, the upper stage drains before the lower. This should not happen.\u003C/p\u003E\u003Cp\u003EThe LV-Ns are the only engines with gimballing, so without them I have no control.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-05-31T02:14:40Z","Content":"\n\u003Cp\u003EHe\u0027s right. The first problem is the dockingport. If you disable the fuel crossfeed on it, everything drains fine with your current fuel lines. Then its the gimbaling nuclear engines that set it off course because the CoM goes under the CoT. It\u0027s a known bug. There\u0027s really nothing else you can do but disable the gimbal and go with torque or change your design. I tested it with MechJeb and it went off course. Nothing goes off course with MechJeb excepted for CoT above CoM\u003C/p\u003E\n"},{"CreatedByName":"Nao","CreatedById":23462,"CreatedDateTime":"2013-05-31T02:19:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Colonel_Panic\u0022 data-cite=\u0022Colonel_Panic\u0022\u003E\u003Cdiv\u003Esee my above post: if I disable crossfeed, the upper stage drains before the lower. This should not happen.\u003Cp\u003EThe LV-Ns are the only engines with gimballing, so without them I have no control.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh ok i think i know now what are you trying to do. I jumped to fast on the epiphany of the crossfeed change.\u003C/p\u003E\u003Cp\u003EI got some improvement but still not perfect:\u003C/p\u003E\u003Cp\u003E1) put a pair of decouplers between LV-T30 and fuel tanks.\u003C/p\u003E\u003Cp\u003E2) move the fuel lines from the main \u002232\u0022 tank to engines instead of tanks\u003C/p\u003E\u003Cp\u003E3) create new lines from the side tanks (LV-T30 ones) to main \u002232\u0022 tank.\u003C/p\u003E\u003Cp\u003E4) put the decouplers staging somewhere else so it doesn\u0027t get used.\u003C/p\u003E\u003Cp\u003EUnfortunately after the side tanks get empty the fuel starts draining from both gray 2m tanks, (blocking the flow of fuel/oxy on the top one solves the issue)\u003C/p\u003E\u003Cp\u003EWith the current model of fuel flow it will be reaaaly hard to get it right without altering the design even harder.\u003C/p\u003E\u003Cp\u003EEDIT: IT WORKS!!!!, just add:\u003C/p\u003E\u003Cp\u003E5) another decoupler between main \u002232\u0022 tank and docking prt\u003C/p\u003E\u003Cp\u003E6) fuel line between the 32 tank and decoupler\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E7) fuel line between decoupler and docking port.\u003C/span\u003E not needed actually YAY\u003C/p\u003E\u003Cp\u003EI\u0027ll work on it a little more \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs for gimbaling, you aren\u0027t getting any gimbal force from LV-N\u0027s anyway and if your CoM happens to be Below them they will work in reverse (struggling with lander can\u0027s momentum control), after you detached the bottom stage you can always toggle the gimbal on.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-05-31T02:28:39Z\u0022 title=\u002205/31/2013 02:28  AM\u0022 data-short=\u002211 yr\u0022\u003EMay 31, 2013\u003C/time\u003E by Nao\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2013-05-31T07:45:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nao\u0022 data-cite=\u0022Nao\u0022\u003E\u003Cdiv\u003EOh ok i think i know now what are you trying to do. I jumped to fast on the epiphany of the crossfeed change.\u003Cp\u003EI got some improvement but still not perfect:\u003C/p\u003E\u003Cp\u003E1) put a pair of decouplers between LV-T30 and fuel tanks.\u003C/p\u003E\u003Cp\u003E2) move the fuel lines from the main \u002232\u0022 tank to engines instead of tanks\u003C/p\u003E\u003Cp\u003E3) create new lines from the side tanks (LV-T30 ones) to main \u002232\u0022 tank.\u003C/p\u003E\u003Cp\u003E4) put the decouplers staging somewhere else so it doesn\u0027t get used.\u003C/p\u003E\u003Cp\u003EUnfortunately after the side tanks get empty the fuel starts draining from both gray 2m tanks, (blocking the flow of fuel/oxy on the top one solves the issue)\u003C/p\u003E\u003Cp\u003EWith the current model of fuel flow it will be reaaaly hard to get it right without altering the design even harder.\u003C/p\u003E\u003Cp\u003EEDIT: IT WORKS!!!!, just add:\u003C/p\u003E\u003Cp\u003E5) another decoupler between main \u002232\u0022 tank and docking prt\u003C/p\u003E\u003Cp\u003E6) fuel line between the 32 tank and decoupler\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003E7) fuel line between decoupler and docking port.\u003C/span\u003E not needed actually YAY\u003C/p\u003E\u003Cp\u003EI\u0027ll work on it a little more \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAs for gimbaling, you aren\u0027t getting any gimbal force from LV-N\u0027s anyway and if your CoM happens to be Below them they will work in reverse (struggling with lander can\u0027s momentum control), after you detached the bottom stage you can always toggle the gimbal on.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks! I\u0027ll rework these and post my results once I get back to the lander. I was really hoping to avoid the extra weight of decouplers to solve the fuel flow problem, as a heavy lander like this is crunched for weight as it is. I might see if there\u0027s anything else I can do to slim it down.\u003C/p\u003E\u003Cp\u003EWell the thing is the cot -shouldn\u0027t- be above the com in this ship, unless every fuel tank except for the bottom 3 are empty (and it\u0027s well below it when fully fueled). I really don\u0027t understand how this gets flipped around when the lower tanks are (mostly) draining first... so I don\u0027t know why the gimballing would be broken on those engines. I can try disabling it, but I really don\u0027t think that lander can has anywhere near enough torque to keep the lander under control without some form of thrust vectoring.\u003C/p\u003E\n"},{"CreatedByName":"Colonel_Panic","CreatedById":61997,"CreatedDateTime":"2013-05-31T07:46:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003EHe\u0027s right. The first problem is the dockingport. If you disable the fuel crossfeed on it, everything drains fine with your current fuel lines. Then its the gimbaling nuclear engines that set it off course because the CoM goes under the CoT. It\u0027s a known bug. There\u0027s really nothing else you can do but disable the gimbal and go with torque or change your design. I tested it with MechJeb and it went off course. Nothing goes off course with MechJeb excepted for CoT above CoM\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn all my experience MechJeb frequently decides he needs to do a backflip. just because. I never trust him for handling landers. :x\u003C/p\u003E\n"}]}