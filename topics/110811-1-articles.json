{"TopicId":110811,"ForumId":20,"TopicTitle":"Dear Mod creators. (re: mod versioning)","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-05-25T19:30:11Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-05-25T19:30:11Z","Content":"\n\u003Cp\u003EIn an effort to expand Kerbaltopia.com, I have recently taken upon the daunting project of parsing every single .ckan file into a MySQL database which already contains API data from Kerbalstuff.com. While perusing through this data and trying to determine which version of a particular mod is the most current, I ran into a snag. \u003C/p\u003E\u003Cp\u003EYou see, PHP has this wonderful command called \u003Ca href=\u0022http://php.net/manual/en/function.version-compare.php\u0022 rel=\u0022external nofollow\u0022\u003Eversion_compare\u003C/a\u003E. It\u0027s pretty smart actually and when sorting through over 3,000 versions (something I am NOT going to do manually) it\u0027s a real time saver. I even read through CKAN\u0027s mind boggling explanation of how versions are supposedly ordered in their scheme of things and neither manages to completely deal with human versioning logic. For example, the below list of mod versions are just few of the truly bizarre ones I\u0027ve come across.\u003C/p\u003E\u003Cp\u003EDeprecated\u003C/p\u003E\u003Cp\u003Ealpha_7.0\u003C/p\u003E\u003Cp\u003ERev_4\u003C/p\u003E\u003Cp\u003ERev_5\u003C/p\u003E\u003Cp\u003ERev_6\u003C/p\u003E\u003Cp\u003E0.14.1.1.oops\u003C/p\u003E\u003Cp\u003Epre-alpha-04\u003C/p\u003E\u003Cp\u003Epre-alpha-06\u003C/p\u003E\u003Cp\u003E0.000001\u003C/p\u003E\u003Cp\u003Eksp1.0_release1\u003C/p\u003E\u003Cp\u003E1.2.0_-_KSP_1.0_Update\u003C/p\u003E\u003Cp\u003E2015-05-20\u003C/p\u003E\u003Cp\u003Eyadaya\u003C/p\u003E\u003Cp\u003Etest_for_license_validation\u003C/p\u003E\u003Cp\u003Ewhatever\u003C/p\u003E\u003Cp\u003EVersion_3D_changes\u003C/p\u003E\u003Cp\u003EVerision_Preview_3C_available\u003C/p\u003E\u003Cp\u003E0\u003C/p\u003E\u003Cp\u003E0.0\u003C/p\u003E\u003Cp\u003E0.0.0\u003C/p\u003E\u003Cp\u003ENow just assume that machine code had to somehow determine which of those is the most recent version, Then consider that CKAN doesn\u0027t have an \u0027uploaded date\u0027 field and all of the .ckan files have the same date when unzipped. You see my problem?\u003C/p\u003E\u003Cp\u003Ehere\u0027s a real fun one.\u003C/p\u003E\u003Cp\u003Ev1.0\u003C/p\u003E\u003Cp\u003E1.01\u003C/p\u003E\u003Cp\u003EIf I understand CKAN correctly, v1.0 is a newer version than 1.01. Version_compare gives the opposite results. And yes, I\u0027ve seen mods use both schemes in their versions of the same mod.\u003C/p\u003E\u003Cp\u003ENow mind you, the vast majority of you modders have got the art of versions down pat. And your logic is appreciated. Some of you however... wait, I have ammunition around here somewhere.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-05-25T19:45:53Z\u0022 title=\u002205/25/2015 07:45  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 25, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-05-26T14:43:50Z","Content":"\n\u003Cp\u003ESpeaking of version numbers, it would be good to bring up \u003Ca href=\u0022http://semver.org/\u0022 rel=\u0022external nofollow\u0022\u003ESemantic Versioning\u003C/a\u003E. The short version:\u003C/p\u003E\u003Cp\u003E1. Major version number (X.y.z) gets incremented when making compatibility-breaking changes (e.g. changing part names or sizes, removing or renaming interface methods)\u003C/p\u003E\u003Cp\u003E2. Minor version number (x.Y.z) gets incremented when adding functionality in backwards-compatible ways (e.g. new parts, new methods)\u003C/p\u003E\u003Cp\u003E3. Patch number (x.y.Z) gets incremented for bugfixes that don\u0027t add anything new.\u003C/p\u003E\u003Cp\u003EWe mostly follow this pattern intuitively, but it would help to do so consciously.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-05-26T16:14:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kerbas_ad_astra\u0022 data-cite=\u0022Kerbas_ad_astra\u0022\u003E\u003Cdiv\u003ESpeaking of version numbers, it would be good to bring up \u003Ca href=\u0022http://semver.org/\u0022 rel=\u0022external nofollow\u0022\u003ESemantic Versioning\u003C/a\u003E. The short version:\u003Cp\u003E1. Major version number (X.y.z) gets incremented when making compatibility-breaking changes (e.g. changing part names or sizes, removing or renaming interface methods)\u003C/p\u003E\u003Cp\u003E2. Minor version number (x.Y.z) gets incremented when adding functionality in backwards-compatible ways (e.g. new parts, new methods)\u003C/p\u003E\u003Cp\u003E3. Patch number (x.y.Z) gets incremented for bugfixes that don\u0027t add anything new.\u003C/p\u003E\u003Cp\u003EWe mostly follow this pattern intuitively, but it would help to do so consciously.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs someone who writes software, I understand that at times it\u0027s nice to be able to add a \u0027note\u0027 to your version. But somewhere in the details there needs to be some solid logic because code doesn\u0027t understand the difference between \u0027beta\u0027 and \u0027alpha\u0027. At present, there\u0027s 2 major collection points for mods, CKAN and Kerbalstuff (we won\u0027t even discuss Curse). If they don\u0027t enforce logical versioning, it won\u0027t happen.\u003C/p\u003E\n"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2015-05-26T16:26:13Z","Content":"\n\u003Cp\u003EThis sounds like a CKAN issue more than the mod developers issue. All software developers have their own version of numbering, even when using semantic versioning there are distinct flavors and differences in usage. For example, .NET uses Major.Minor.Build.Revision and since KSP mods are in C# which may or may not be done in .NET, there is nothing wrong with that either.\u003C/p\u003E\u003Cp\u003EThere is just no way you are going to get every mod developer to be uniform in this matter I\u0027m afraid. CKAN should be a little smarter, in software it isn\u0027t hard to strip alpha charaters from a version number, so the \u0022v\u0022 could be removed before comparison and if any comparison returns 1.0 as being greater than 1.01 then it has serious issues.\u003C/p\u003E\n"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-05-26T16:30:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Fengist\u0022 data-cite=\u0022Fengist\u0022\u003E\u003Cdiv\u003EAs someone who writes software, I understand that at times it\u0027s nice to be able to add a \u0027note\u0027 to your version. But somewhere in the details there needs to be some solid logic because code doesn\u0027t understand the difference between \u0027beta\u0027 and \u0027alpha\u0027. At present, there\u0027s 2 major collection points for mods, CKAN and Kerbalstuff (we won\u0027t even discuss Curse). If they don\u0027t enforce logical versioning, it won\u0027t happen.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESemantic versioning includes a provision to put prerelease information after a minus sign (e.g. 1.0.2-alpha), and/or \u0022build metadata\u0022 after a plus sign (1.0.2\u002Bbuild:8802). I didn\u0027t include that in the \u0022short version\u0022 because it\u0027s not the meat of the idea, but it\u0027s there. (There\u0027s a very nice drill-down of precedence order under point 11, about halfway down the page.)\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-05-26T20:34:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alshain\u0022 data-cite=\u0022Alshain\u0022\u003E\u003Cdiv\u003EThis sounds like a CKAN issue more than the mod developers issue. All software developers have their own version of numbering, even when using semantic versioning there are distinct flavors and differences in usage. For example, .NET uses Major.Minor.Build.Revision and since KSP mods are in C# which may or may not be done in .NET, there is nothing wrong with that either.\u003Cp\u003EThere is just no way you are going to get every mod developer to be uniform in this matter I\u0027m afraid. CKAN should be a little smarter, in software it isn\u0027t hard to strip alpha charaters from a version number, so the \u0022v\u0022 could be removed before comparison and if any comparison returns 1.0 as being greater than 1.01 then it has serious issues.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s not just CKAN. Half of those came from CKAN, the other half from Kerbalstuff. The best I can do for now is a \u0027humanized\u0027 sorting method (strnatcmp) built into PHP. I already know that some mods are going to have the wrong version listed. For example, I found this in a single mod\u0027s .ckan files.\u003C/p\u003E\u003Cp\u003Ev.13.0\u003C/p\u003E\u003Cp\u003Ev.14.0\u003C/p\u003E\u003Cp\u003Ev.15.0\u003C/p\u003E\u003Cp\u003Ev13.1\u003C/p\u003E\u003Cp\u003EAll of that mods versions are prefaced with a dot except one. I know damn well the mod creator intended for .15 to be the latest release but, in 13.1 he forgot to place the dot. The only thing I can do, without having to manually sort through the 5,609 mod versions I now have in the database... is to hope for the best.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-05-26T23:53:29Z","Content":"\n\u003Cp\u003EDo you really think that those that use \u0022truly bizarre\u0022 (your words) version scheme will care ? \u003C/p\u003E\u003Cp\u003EAnd \u00222015-05-20\u0022 is a perfectly good version scheme. The fields are in the most to least important order and if works fine as long as you don\u0027t do 2 version a day.\u003C/p\u003E\n"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-05-27T00:12:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EAnd \u00222015-05-20\u0022 is a perfectly good version scheme. The fields are in the most to least important order and if works fine as long as you don\u0027t do 2 version a day.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe problem with date-based versioning is that it gives me no information for compatibility -- if I use version 2015-05-20, and then 2015-05-21 is released, will upgrading break anything? Semantic versioning takes out the guesswork -- a system that relies on ModuleFoo v. 1.2.3 will work fine with 1.2.4, or even 1.3.0, but not 2.anything.\u003C/p\u003E\n"},{"CreatedByName":"m4v","CreatedById":67965,"CreatedDateTime":"2015-05-27T00:48:29Z","Content":"\n\u003Cp\u003EI don\u0027t think you can compel everybody to switch to an unified scheme, version numbers are arbitrary and doesn\u0027t need to be logical if the author believes it to be useful.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-05-27T01:35:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022m4v\u0022 data-cite=\u0022m4v\u0022\u003E\u003Cdiv\u003EI don\u0027t think you can compel everybody to switch to an unified scheme, version numbers are arbitrary and doesn\u0027t need to be logical if the author believes it to be useful.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThen there needs to be another logical method of determining the most current version. CKAN doesn\u0027t offer an upload date in their schema making version numbers the only thing left. And with over 900 mods in my database, I\u0027ll be damned if I\u0027m going to write separate function for every mod that doesn\u0027t use a standardized versioning system.\u003C/p\u003E\n"},{"CreatedByName":"regex","CreatedById":70807,"CreatedDateTime":"2015-05-27T01:48:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Fengist\u0022 data-cite=\u0022Fengist\u0022\u003E\u003Cdiv\u003EThen there needs to be another logical method of determining the most current version. CKAN doesn\u0027t offer an upload date in their schema making version numbers the only thing left. And with over 900 mods in my database, I\u0027ll be damned if I\u0027m going to write separate function for every mod that doesn\u0027t use a standardized versioning system.\u003C/div\u003E\u003C/blockquote\u003EGood luck and godspeed. o7\n"}]}