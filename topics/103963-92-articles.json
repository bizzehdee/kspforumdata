{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":92,"Articles":[{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-03T14:52:57Z","Content":"\u003E \n\u003E \n\u003E 4 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E The way I understand it, they do 1 vertex per pixel to maximize the detail onscreen because they displace them later on.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I see, but then we\u0027d also need to have it work for aerial views, so one flat qud won\u0027t do. What do we do then?\n\u003E \n\nHmmm... that actually makes sense... it\u0027s quite brilliant actually. You could place them at whatever depth you need them to be at this way. You still get geometry then. I understand why upside-down views wouldn\u0027t work though. I think a quick-fix may be to invert the camera matrix and pixel mesh, in certain cases.  \n\nWhy would it not work for arial views? I\u0027m thinking about a quad that is between 500m-1km wide/tall."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-03T14:56:44Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, rbray89 said:\n\u003E \n\u003E \n\u003E Hmmm... that actually makes sense... it\u0027s quite brilliant actually. You could place them at whatever depth you need them to be at this way. You still get geometry then. I understand why upside-down views wouldn\u0027t work though. I think a quick-fix may be to invert the camera matrix and pixel mesh, in certain cases.  \n\u003E   \n\u003E \n\u003E Why would it not work for arial views? I\u0027m thinking about a quad that is between 500m-1km wide/tall.\n\u003E \n\nI was thinking, that well, it needs to be round like the planet."},{"CreatedByName":"Eskandare","CreatedById":62742,"CreatedDateTime":"2015-12-03T15:13:09Z","Content":"WOW! Simply beautiful! I have yet to test this out...  ok downloading...\n\nQuestion... How is Eve\u0027s water?"},{"CreatedByName":"Space Cowbuoy","CreatedById":117239,"CreatedDateTime":"2015-12-03T15:26:18Z","Content":"\u003E \n\u003E \n\u003E 33 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E It should work but don\u0027t quote me on this.\n\u003E \n\nHaha I quoted you ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022) ... I\u0027m not asking for official support as I understand we\u0027ve moved on to KSP 1.0.5 now, but would you kindly offer an opinion for a guy still enjoying his heavily modded 1.0.4 install? I promise you I\u0027ve been up and down the thread especially 10 pages back from here but didn\u0027t see any pictures of similar issues or read anything that sounded like this. Are there any fixes for issues like this? BTW this is in 1.0.4 and aside from these glitches I can confirm the game plays fine and up close the water shaders are flippin\u0027 amazing, amazing work!! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022) Peace x\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/V53aC/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-03T15:38:13Z","Content":"How to disable the ocean:  \n\n    public class OceanDisable : PQSMod\n        {\n    \n            public void Apply(CelestialBody cb)\n            {\n    \n                PQS pqs = null;\n                if (cb != null \u0026\u0026 cb.pqsController != null)\n                {\n                    pqs = cb.pqsController;\n                    PQSMaterial = pqs.surfaceMaterial;\n                }\n                else\n                {\n                    KSPLog.print(\u0022No PQS!\u0022);\n                }\n                if (pqs != null)\n                {\n                    this.sphere = pqs;\n                    this.transform.parent = pqs.transform;\n                    this.requirements = PQS.ModiferRequirements.Default;\n                    this.modEnabled = true;\n                    this.order \u002B= 10;\n    \n                    this.transform.localPosition = Vector3.zero;\n                    this.transform.localRotation = Quaternion.identity;\n                    this.transform.localScale = Vector3.one;\n                }\n            }\n    \n            public override void OnSphereActive()\n            {\t\t//This is the ocean\t\tif(sphere.ChildSpheres != null \u0026\u0026 sphere.ChildSpheres.Length \u003E 0)\t\t{\n                \tsphere.ChildSpheres[0].isFakeBuild = true;\t\t}\n            }\n    \n            public void Remove()\n            {\n                this.sphere = null;\n                this.enabled = false;\n                this.transform.parent = null;\n            }\n    }"},{"CreatedByName":"Jeorge","CreatedById":154403,"CreatedDateTime":"2015-12-03T15:41:14Z","Content":"Dark ocean problem still persist, although the 1fps problem have been solved, It seems this problem only affects gnu/linux users. I\u0027m playing without any other mod installed.\n\n**Edited \u003Ctime datetime=\u00222015-12-03T15:49:48Z\u0022 title=\u002212/03/2015 03:49  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 3, 2015\u003C/time\u003E by Jeorge**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-03T15:47:31Z","Content":"\u003E \n\u003E \n\u003E 26 minutes ago, Eskandare said:\n\u003E \n\u003E \n\u003E WOW! Simply beautiful! I have yet to test this out...  ok downloading...\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Question... How is Eve\u0027s water?\n\u003E \n\nI gave it a very quick config but I tried it to make it look weird and unnatural, like some kind of petroleum jelly, this is more or less how I imagine the \u0022explodium oceans\u0022 to be. I made a few webms to show you but the compression codec ruined them so i decided not to upload them. Just go there and take a look\n\n\u003E \n\u003E \n\u003E 13 minutes ago, Space Cowbuoy said:\n\u003E \n\u003E \n\u003E Haha I quoted you ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022) ... I\u0027m not asking for official support as I understand we\u0027ve moved on to KSP 1.0.5 now, but would you kindly offer an opinion for a guy still enjoying his heavily modded 1.0.4 install? I promise you I\u0027ve been up and down the thread especially 10 pages back from here but didn\u0027t see any pictures of similar issues or read anything that sounded like this. Are there any fixes for issues like this? BTW this is in 1.0.4 and aside from these glitches I can confirm the game plays fine and up close the water shaders are flippin\u0027 amazing, amazing work!! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif \u0022:D\u0022) Peace x\n\u003E \n\nI believe this is a simple draw order issue, I will upload a modified dll that allows to change the ocean draw order, play with it and report back.\n\n\u003E \n\u003E \n\u003E 6 minutes ago, rbray89 said:\n\u003E \n\u003E \n\u003E How to disable the ocean:  \n\u003E   \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     public class OceanDisable : PQSMod\n\u003E         {\n\u003E     \n\u003E             public void Apply(CelestialBody cb)\n\u003E             {\n\u003E     \n\u003E                 PQS pqs = null;\n\u003E                 if (cb != null \u0026\u0026 cb.pqsController != null)\n\u003E                 {\n\u003E                     pqs = cb.pqsController;\n\u003E                     PQSMaterial = pqs.surfaceMaterial;\n\u003E                 }\n\u003E                 else\n\u003E                 {\n\u003E                     KSPLog.print(\u0022No PQS!\u0022);\n\u003E                 }\n\u003E                 if (pqs != null)\n\u003E                 {\n\u003E                     this.sphere = pqs;\n\u003E                     this.transform.parent = pqs.transform;\n\u003E                     this.requirements = PQS.ModiferRequirements.Default;\n\u003E                     this.modEnabled = true;\n\u003E                     this.order \u002B= 10;\n\u003E     \n\u003E                     this.transform.localPosition = Vector3.zero;\n\u003E                     this.transform.localRotation = Quaternion.identity;\n\u003E                     this.transform.localScale = Vector3.one;\n\u003E                 }\n\u003E             }\n\u003E     \n\u003E             public override void OnSphereActive()\n\u003E             {\t\t//This is the ocean\t\tif(sphere.ChildSpheres != null \u0026\u0026 sphere.ChildSpheres.Length \u003E 0)\t\t{\n\u003E                 \tsphere.ChildSpheres[0].isFakeBuild = true;\t\t}\n\u003E             }\n\u003E     \n\u003E             public void Remove()\n\u003E             {\n\u003E                 this.sphere = null;\n\u003E                 this.enabled = false;\n\u003E                 this.transform.parent = null;\n\u003E             }\n\u003E     }\n\u003E \n\nI will give this a try, if it works well we all get performance improvements.\n\nDo I just create an instance of this and use Apply(CelestialBody) or do I need to add it as a component?"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-12-03T15:56:21Z","Content":"IS THIS EVEN KSP!?\n\n![screenshot110.png](https://dl.dropboxusercontent.com/u/61004449/KSP/1.0.5/screenshot110.png)\n\nAwesome, awesome work on this. I can never go back."},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-03T15:57:55Z","Content":"\u003E \n\u003E \n\u003E 7 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E I will give this a try, if it works well we all get performance improvements.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Do I just create an instance of this and use Apply(CelestialBody) or do I need to add it as a component?\n\u003E \n\nYou\u0027ll need to create it as a component:  \n\n    GameObject go = new GameObject();\n    materialPQS = go.AddComponent();\n    materialPQS.Apply(celestialBody);\n\nYou won\u0027t have to remove the material either now."},{"CreatedByName":"eddiew","CreatedById":127483,"CreatedDateTime":"2015-12-03T15:59:50Z","Content":"\u003E \n\u003E \n\u003E 2 minutes ago, Red Iron Crown said:\n\u003E \n\u003E \n\u003E IS THIS EVEN KSP!?\n\u003E \n\nSon, you got some splainin to do."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-03T16:11:46Z","Content":"\u003E \n\u003E \n\u003E 15 minutes ago, rbray89 said:\n\u003E \n\u003E \n\u003E You\u0027ll need to create it as a component:  \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     \n\u003E     \n\u003E     GameObject go = new GameObject();\n\u003E     materialPQS = go.AddComponent();\n\u003E     materialPQS.Apply(celestialBody);\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E You won\u0027t have to remove the material either now.\n\u003E \n\nGreat, will test it in a bit.\n\n\u003E \n\u003E \n\u003E 16 minutes ago, Red Iron Crown said:\n\u003E \n\u003E \n\u003E IS THIS EVEN KSP!?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Awesome, awesome work on this. I can never go back.\n\u003E \n\nGood, btw if you need to lower the foam strength, it\u0027s possible to set negative values.\n\nAlso, looking at f-14 makes me think of trying adding ambient occlusion to KSP, though it may be a bad idea.\n\n**Edited \u003Ctime datetime=\u00222015-12-03T16:13:38Z\u0022 title=\u002212/03/2015 04:13  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 3, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"Space Cowbuoy","CreatedById":117239,"CreatedDateTime":"2015-12-03T16:12:14Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E I believe this is a simple draw order issue, I will upload a modified dll that allows to change the ocean draw order, play with it and report back.\n\u003E \n\n**Edited \u003Ctime datetime=\u00222015-12-03T16:12:33Z\u0022 title=\u002212/03/2015 04:12  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 3, 2015\u003C/time\u003E by Space Cowbuoy**\n  \nCan\u0027t actually type anything!!"},{"CreatedByName":"RyanRising","CreatedById":79932,"CreatedDateTime":"2015-12-03T16:12:23Z","Content":"Ocean shaders? YAAAAAAAY!\n\n:muppetarmflail:"},{"CreatedByName":"Space Cowbuoy","CreatedById":117239,"CreatedDateTime":"2015-12-03T16:14:45Z","Content":"\u003E \n\u003E \n\u003E 1 hour ago, blackrack said:\n\u003E \n\u003E \n\u003E Very sorry to double post but after quoting you I couldn\u0027t paragraph down or type anything!! Where can I get the new .dll from Github? Many thanks blackrack, you\u0027re the king baby, the king! x\n\u003E"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-12-03T16:42:15Z","Content":"I\u0027m gushing about this over here, it\u0027s simply amazing.\n\n![screenshot112.png](https://dl.dropboxusercontent.com/u/61004449/KSP/1.0.5/screenshot112.png)\n\nSorry to spam up the thread with pics."},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-03T16:46:00Z","Content":"\u003E \n\u003E \n\u003E 32 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Great, will test it in a bit.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Good, btw if you need to lower the foam strength, it\u0027s possible to set negative values.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Also, looking at f-14 makes me think of trying adding ambient occlusion to KSP, though it may be a bad idea.\n\u003E \n\nI just had a great thought as well, you could halve the vertex/pixel count on the ocean plane and get a small performance boost that way."},{"CreatedByName":"Speadge","CreatedById":145302,"CreatedDateTime":"2015-12-03T16:57:12Z","Content":"why is noone making a vid? ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022)"},{"CreatedByName":"EladDv","CreatedById":118368,"CreatedDateTime":"2015-12-03T17:04:50Z","Content":"would you like a submarine? i have the pompeii class that has 12 0.625 missiles that would look nice coming out of the water and 4 more 1.25 cruise missiles on the underside(also capable of launching from underwater.) for the 0.625 Timaeus missiles is would recommend launching from 25-50 meters below water for maximal dramatic effect with their launch assist system\n\n**\u003Cu\u003E\u003Ca href=\u0022https://www.dropbox.com/s/36jsveyb3764qpz/Pompeii.craft?dl=0\u0022 rel=\u0022external nofollow\u0022\u003EDOWNLOAD\u003C/a\u003E\u003C/u\u003E**  \n\nPics:\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/Lavhw/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E"},{"CreatedByName":"Skalou","CreatedById":133496,"CreatedDateTime":"2015-12-03T17:13:20Z","Content":"Here is my first, specially to congrate you for your awesome work!\n\n\u003Ciframe class=\u0022imgur-album\u0022 frameborder=\u00220\u0022 height=\u0022550\u0022 src=\u0022//imgur.com/a/3ggSs/embed?background=ffffff\u0026text=1a1a1a\u0026link=4e76c9\u0022 width=\u0022100%\u0022\u003E\u003C/iframe\u003E\n\nand just an idea (from a no skill programming guy):\n\nhaving the spash effect when riding in the water by using the reentry effect but tuned to do this?"},{"CreatedByName":"V8jester","CreatedById":136093,"CreatedDateTime":"2015-12-03T17:13:45Z","Content":"\u003E \n\u003E \n\u003E 14 minutes ago, Speadge said:\n\u003E \n\u003E \n\u003E why is noone making a vid? ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022)\n\u003E \n\nBecause good videos take time. a screenshot takes 2 seconds. Videos will come.\n\nAwesome work Blackrack! Why don\u0027t I ever see this stuff when I am actually at home. Now I have to wait all day before I can see it for myself ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022)"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-03T17:17:01Z","Content":"Oh, and to fix the Shadows issue with terrain, just put the render queue higher. I\u0027d put it on Transparent or transparent offset.\n\n\u0022Queue\u0022 = \u0022Transparent-20\u0022"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-12-03T17:22:06Z","Content":"\u003E \n\u003E \n\u003E 42 minutes ago, rbray89 said:\n\u003E \n\u003E \n\u003E I just had a great thought as well, you could halve the vertex/pixel count on the ocean plane and get a small performance boost that way.\n\u003E \n\nIf you mean the plane that is created for the new ocean shaders, there\u0027s already a setting that does this, is this what you meant?\n\n\u003E \n\u003E \n\u003E 46 minutes ago, Red Iron Crown said:\n\u003E \n\u003E \n\u003E I\u0027m gushing about this over here, it\u0027s simply amazing.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E  \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Sorry to spam up the thread with pics.\n\u003E \n\nDon\u0027t worry, keep going. Also, I\u0027m still waiting on my carriers.\n\n\u003E \n\u003E \n\u003E 1 hour ago, Space Cowbuoy said:\n\u003E \n\u003E \n\u003E \u003E \n\u003E \u003E \n\u003E \u003E 2 hours ago, blackrack said:\n\u003E \u003E \n\u003E \u003E \n\u003E \u003E Very sorry to double post but after quoting you I couldn\u0027t paragraph down or type anything!! Where can I get the new .dll from Github? Many thanks blackrack, you\u0027re the king baby, the king! x\n\u003E \u003E\n\u003E \n\nI haven\u0027t made it yet. Will get to it in a bit.\n\nEdited:\n\n\u003E \n\u003E \n\u003E 11 minutes ago, rbray89 said:\n\u003E \n\u003E \n\u003E Oh, and to fix the Shadows issue with terrain, just put the render queue higher. I\u0027d put it on Transparent or transparent offset.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \u0022Queue\u0022 = \u0022Transparent-20\u0022\n\u003E \n\nI think I tried this earlier and ir made it render over the projector, though I may have done something different. Will try it again.\n\n\u003E \n\u003E \n\u003E 15 minutes ago, Skalou said:\n\u003E \n\u003E \n\u003E and just an idea (from a no skill programming guy):\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E having the spash effect when riding in the water by using the reentry effect but tuned to do this?\n\u003E \n\nI don\u0027t see this looking any good honestly but thanks for the suggestion (and the craft album).\n\n\u003E \n\u003E \n\u003E 31 minutes ago, Speadge said:\n\u003E \n\u003E \n\u003E why is noone making a vid? ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif \u0022:(\u0022)\n\u003E \n\nWell, I did this earlier, sort of: [http://webm.host/bf95b/vid.webm](http://webm.host/bf95b/vid.webm)\n\n**Edited \u003Ctime datetime=\u00222015-12-03T17:29:40Z\u0022 title=\u002212/03/2015 05:29  PM\u0022 data-short=\u00228 yr\u0022\u003EDecember 3, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"EladDv","CreatedById":118368,"CreatedDateTime":"2015-12-03T17:25:54Z","Content":"\u003E \n\u003E \n\u003E 3 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E Don\u0027t worry, keep going. Also, I\u0027m still waiting on my carriers.\n\u003E \n\nOnce i finish studying for calculus i\u0027ll work on a big carrier for you. with a few VTOLs on there too"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-03T17:30:34Z","Content":"\u003E \n\u003E \n\u003E 6 minutes ago, blackrack said:\n\u003E \n\u003E \n\u003E If you mean the plane that is created for the new ocean shaders, there\u0027s already a setting that does this, is this what you meant?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I think I tried this earlier and ir made it render over the projector, though I may have done something different. Will try it again.\n\u003E \n\nExactly. Ah, makes sense. Figured I\u0027d check in-case.  \n\nYeah, that is what you want to make sure that the terrain doesn\u0027t \u0022bleed-through\u0022 the ocean when cloud coverage is present. It won\u0027t let cloud shadows show on the ocean, but it will stop some of the glitches."},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-03T17:39:04Z","Content":"Hmmm... looks like my PQS ocean removal doesn\u0027t hold when the PQS is Rebuilt. I think the flag might be cleared then."}]}