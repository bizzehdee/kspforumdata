{"TopicId":81040,"ForumId":16,"TopicTitle":"Asparagus staging, why isn\u0026#039;t this working correctly?","CreatedByName":"johnnyhandsome","CreatedById":59580,"CreatedDateTime":"2014-08-07T13:54:07Z","PageNum":1,"Articles":[{"CreatedByName":"johnnyhandsome","CreatedById":59580,"CreatedDateTime":"2014-08-07T13:54:07Z","Content":"\n\u003Cp\u003EI\u0027ve built this Asparagus staged rocket, but it\u0027s behaving strangely, can you help me figure out what\u0027s going on?\u003C/p\u003E\u003Cp\u003ELook at the album below. The arrows show the flow of fuel, with the blue arrows highlighting the problematic part. That stage burns less, so when it comes to staging, all the other tanks at that stage are empty, while those two are full.\u003C/p\u003E\u003Cp\u003EThis results in picture two, where the other four stages fall away as they should, empty. But these two stages still have fuel in them and continue flying upward, usually crashing together and raining debris down on the rest of the rocket. Which admittedly is cool, but not very helpful for going offworld.\u003C/p\u003E\u003Cp\u003EPicture three is the fuel situation before separation. The blue arrow shows the fuel level that\u0027s in the two problematic rockets vs the red arrow showing what\u0027s in the other four stages, which are emptying much faster.\u003C/p\u003E\u003Cp\u003EEdited to add album, doh!\u003C/p\u003E\u003Cp\u003E\u0026lt;iframe class=\u0022imgur-album\u0022 width=\u0022100%\u0022 height=\u0022550\u0022 frameborder=\u00220\u0022 src=\u0022//imgur.com/a/BMovW/embed\u0022\u0026gt;\u0026lt;/iframe\u0026gt;\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/421073/S3%20Four%20Booster%20IIalt.craft\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s a link to the craft file, which is stock\u003C/a\u003E. Anyone have any ideas what the problem is?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-07T14:04:35Z\u0022 title=\u002208/07/2014 02:04  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 7, 2014\u003C/time\u003E by johnnyhandsome\u003C/strong\u003E\n\u003Cbr\u003Eadding album\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-08-07T14:00:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022johnnyhandsome\u0022 data-cite=\u0022johnnyhandsome\u0022\u003E\u003Cdiv\u003ELook at the album below.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EErrr, what album?\u003C/p\u003E\n"},{"CreatedByName":"johnnyhandsome","CreatedById":59580,"CreatedDateTime":"2014-08-07T14:05:25Z","Content":"\n\u003Cp\u003EOk, how to add an Imgur album embed? I pasted the HTML code in after your message, but it\u0027s just displaying as code.\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-08-07T14:15:13Z","Content":"\n\u003Cp\u003EYou need the \u0022BMovW\u0022 portion from the URL and place it inside \u0022imgur\u0022 tags like this:\u003C/p\u003E\u003Cp\u003E\u0026lt;imgur\u0026gt;BMovW\u0026lt;/imgur\u0026gt;\u003C/p\u003E\u003Cp\u003EExcept with square brackets instead of angle brackets. It will appear like this:\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/BMovW\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-08-07T14:20:14Z","Content":"\n\u003Cp\u003EI can\u0027t tell from the pictures, but I\u0027d double-check the direction of the fuel lines on the two problematic boosters. If the line is facing the wrong way, then it will draw fuel from the two that are working correctly, and then the next one in, before using its own fuel.\u003C/p\u003E\u003Cp\u003EIf it\u0027s not that, then I\u0027m not sure. Sometimes you can get strangeness like this, if your fuel lines go from one, to many, back to one. But this isn\u0027t the case here, as you have several just feeding into the last standard asparagus pair.\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-08-07T14:35:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NecroBones\u0022 data-cite=\u0022NecroBones\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIf it\u0027s not that, then I\u0027m not sure. Sometimes you can get strangeness like this, if your fuel lines go from one, to many, back to one. But this isn\u0027t the case here, as you have several just feeding into the last standard asparagus pair.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOK, so I looked at the .craft, and this is the case. It\u0027s just acting strange due to the \u0022many to one\u0022 arrangement, with tank prioritization.\u003C/p\u003E\u003Cp\u003EHere\u0027s a possible fix: \u003Ca href=\u0022http://ksp.necrobones.com/temp/S3%20Four%20Booster%20IIalt%20Test.craft\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp.necrobones.com/temp/S3%20Four%20Booster%20IIalt%20Test.craft\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EWhat I did was change the fuel-line arrangements in those outer boosters, so that only one of them feeds inward, but amongst them, they use bi-directional fuel lines (which many people consider a no-no, but I use them successfully all the time). What you\u0027ll see is that the center of the three on each side uses its fuel last, but all of the engines remain active until the very end, and cut out together, as you want.\u003C/p\u003E\n"},{"CreatedByName":"johnnyhandsome","CreatedById":59580,"CreatedDateTime":"2014-08-07T14:48:17Z","Content":"\n\u003Cp\u003EHey THANKS!!! At least I know I\u0027m not crazy, things were set up \u0022correctly\u0022.\u003C/p\u003E\u003Cp\u003EBut I still don\u0027t quite get what you did. Is this a work around for a bug or something? Fuel seems to be going all over place!\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-08-07T14:56:20Z","Content":"\n\u003Cp\u003EIt\u0027s not a bug exactly, it\u0027s just a side-effect of how fuel-tank prioritization works. Theoretically, the inner engines should all draw on those outer tanks equally, since they\u0027re equidistant, but when they have multiple choices like that, sometimes it favors one set of tanks over another. \u003C/p\u003E\u003Cp\u003EWhat I did basically makes the outer three pairs of boosters just share all of their fuel with each other in both directions (so that they all stay lit, even if their own tanks are empty), and limits the entry point into the inner asparagus to just one location, ensuring that the outer tanks are truly prioritized first.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-07T14:58:27Z\u0022 title=\u002208/07/2014 02:58  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 7, 2014\u003C/time\u003E by NecroBones\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"johnnyhandsome","CreatedById":59580,"CreatedDateTime":"2014-08-07T15:29:06Z","Content":"\n\u003Cp\u003ECool, thanks for the explanation, it makes sense now.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-08-07T15:47:36Z","Content":"\n\u003Cp\u003EMany to one is not a problem. If multiple fuel lines end in the same part, any engines that have access to that part should draw fuel from all these lines equally. I\u0027ll try to check your craft file when I get home.\u003C/p\u003E\u003Cp\u003EBy the way, \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/64362-Fuel-Flow-Rules-%280-23-5%29\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E you can find a description how the fuel system works. If you manage to understand it, you may me able to troubleshoot all your future fuel drawing problems yourself.\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-08-07T18:02:40Z","Content":"\n\u003Cp\u003EFound the problem. This fuel line is attached to the strut nub rather than to the tank and it is therefore not transferring any fuel.\u003C/p\u003E\u003Cp\u003EYour design is fine, as soon as I fixed the pipe it started working as intended.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/Af3FDav.png\u0022 alt=\u0022Af3FDav.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-08-07T18:36:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022johnnyhandsome\u0022 data-cite=\u0022johnnyhandsome\u0022\u003E\u003Cdiv\u003ECool, thanks for the explanation, it makes sense now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGlad to help. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EFound the problem. This fuel line is attached to the strut nub rather than to the tank and it is therefore not transferring any fuel.\u003Cp\u003EYour design is fine, as soon as I fixed the pipe it started working as intended.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://i.imgur.com/Af3FDav.png\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://i.imgur.com/Af3FDav.png\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHah! I missed that. Good catch.\u003C/p\u003E\u003Cp\u003EThe thing is, I\u0027ve seen a similar behavior before with having many \u0022leaf nodes\u0022 feeding into an inner asparagus stage before, and I didn\u0027t have fuel lines hitting struts. So it makes me wonder what else could have been the issue. That was a few versions ago, however.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-07T18:38:30Z\u0022 title=\u002208/07/2014 06:38  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 7, 2014\u003C/time\u003E by NecroBones\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"johnnyhandsome","CreatedById":59580,"CreatedDateTime":"2014-08-07T18:43:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EFound the problem. This fuel line is attached to the strut nub rather than to the tank and it is therefore not transferring any fuel.\u003Cp\u003EYour design is fine, as soon as I fixed the pipe it started working as intended.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh. My. God.\u003C/p\u003E\u003Cp\u003ETHANK YOU!\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-08-07T21:14:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NecroBones\u0022 data-cite=\u0022NecroBones\u0022\u003E\u003Cdiv\u003EThe thing is, I\u0027ve seen a similar behavior before with having many \u0022leaf nodes\u0022 feeding into an inner asparagus stage before, and I didn\u0027t have fuel lines hitting struts. So it makes me wonder what else could have been the issue. That was a few versions ago, however.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe only thing that comes on mind (and what I was looking for initially in this case) is that a stack of tanks does not work as a single tank. If your lines were attached to different tanks in a stack, the game was drawing the fuel from the first set of pipes it encountered and did not bother following the rest of the stack.\u003C/p\u003E\u003Cp\u003EHowever, I also know that fuel did not always work the way it works today. It did not change since I started playing in 0.21 but there definitely were some changes before that.\u003C/p\u003E\n"},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2014-08-08T01:26:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kasuha\u0022 data-cite=\u0022Kasuha\u0022\u003E\u003Cdiv\u003EThe only thing that comes on mind (and what I was looking for initially in this case) is that a stack of tanks does not work as a single tank. If your lines were attached to different tanks in a stack, the game was drawing the fuel from the first set of pipes it encountered and did not bother following the rest of the stack.\u003Cp\u003EHowever, I also know that fuel did not always work the way it works today. It did not change since I started playing in 0.21 but there definitely were some changes before that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was still initially skeptical of \u0022many to one\u0022 being the issue, except that I was recalling this previous design problem. I\u0027m careful about feeding in to the same tanks rather than separate ones in a stack, so that wouldn\u0027t have been it either. It was just too long ago to remember more detail. But it would have probably been in 0.23, so the rules shouldn\u0027t have changed. I\u0027ll just chalk it up to bad memory at this point. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Kasuha","CreatedById":81781,"CreatedDateTime":"2014-08-08T09:54:57Z","Content":"\n\u003Cp\u003E\u0022many to one\u0022 is fine, \u0022one to many\u0022 is fine as well. Even \u0022many to one to many\u0022 is fine. Only \u0022one to many to one\u0022 fails.\u003C/p\u003E\u003Cp\u003EAnd sometimes you don\u0027t even notice that you\u0027ve made such design because sometimes fuel finds unexpected ways.\u003C/p\u003E\n"}]}