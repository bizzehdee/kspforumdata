{"TopicId":54805,"ForumId":29,"TopicTitle":"How to use KSP Icons?","CreatedByName":"RockyTV","CreatedById":57161,"CreatedDateTime":"2013-11-30T17:45:11Z","PageNum":1,"Articles":[{"CreatedByName":"RockyTV","CreatedById":57161,"CreatedDateTime":"2013-11-30T17:45:11Z","Content":"\n\u003Cp\u003EI\u0027m developing a new plugin/addon, and I want to use the icons that are included in game (probe icon, etc). But how can I do it?\u003C/p\u003E\u003Cp\u003EI know it has something to do about MapView. but I don\u0027t know the function to get the icon.\u003C/p\u003E\u003Cp\u003EAny help will be appreciated.\u003C/p\u003E\n"},{"CreatedByName":"RockyTV","CreatedById":57161,"CreatedDateTime":"2013-11-30T21:00:34Z","Content":"\n\u003Cp\u003ESo, any idea how I can do this?\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2013-11-30T21:17:37Z","Content":"\n\u003Cp\u003ENo need to bump just over three hours later.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2013-12-01T01:08:46Z","Content":"\n\u003Cp\u003EI haven\u0027t seen a way to reference these texture objects directly in code, as I looked at that for something myself a while ago. I reverted to drawing my own for that project.\u003C/p\u003E\u003Cp\u003EAlthough a quick search of the object browser now shows the VesselLabels object has a Texture2D called flightOverlayIconsMap which sounds promising. Maybe try loking at the contents of that object\u003C/p\u003E\n"},{"CreatedByName":"RockyTV","CreatedById":57161,"CreatedDateTime":"2013-12-01T17:32:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trigger Au\u0022 data-cite=\u0022Trigger Au\u0022\u003E\u003Cdiv\u003EI haven\u0027t seen a way to reference these texture objects directly in code, as I looked at that for something myself a while ago. I reverted to drawing my own for that project.\u003Cp\u003EAlthough a quick search of the object browser now shows the VesselLabels object has a Texture2D called flightOverlayIconsMap which sounds promising. Maybe try loking at the contents of that object\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s basically the same, but I now have a new question - how to use ReadPixels() function from flightOverlayIconsMap?\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2013-12-02T02:41:10Z","Content":"\n\u003Cp\u003ESo two ways, depending on what you are trying to do..\u003C/p\u003E\u003Cp\u003E1) use the Texture2D.EncodeToPNG() function to get a byte array and then save the file so you can look at the asset\u003C/p\u003E\u003Cp\u003E2) use the Texture2D.GetPixels(int x, int y, int blockWidth, int blockHeight) to get an array of the pixel colors for the square you want\u003C/p\u003E\u003Cp\u003EThe second way could mean that you read the icons dynamically in game and reuse them, but if Squad change the sprite sheet you need to recode all your position values\u003C/p\u003E\n"},{"CreatedByName":"damny","CreatedById":78621,"CreatedDateTime":"2013-12-02T14:51:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022RockyTV\u0022 data-cite=\u0022RockyTV\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI know it has something to do about MapView. but I don\u0027t know the function to get the icon.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe texture is exposed as MapView.OrbitIconsMap. \u003C/p\u003E\u003Cp\u003EI don\u0027t know if there is a function to draw them individually or get the texture coordinates for an icon, but it\u0027s pretty easy to make yourself. It\u0027s a grid of 5 x 5 icons (not all spots filled) so texture coordinates are some multiple of 0.2 in either direction and width/height are also 0.2.\u003C/p\u003E\n"},{"CreatedByName":"RockyTV","CreatedById":57161,"CreatedDateTime":"2013-12-02T20:08:10Z","Content":"\n\u003Cp\u003EWhat would be blockWidth and Height in GetPixels?\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2013-12-02T20:52:52Z","Content":"\n\u003Cp\u003EIts the width and height of the square you are trying to get from the starting point. You can find teh full details here - \u003Ca href=\u0022http://docs.unity3d.com/Documentation/ScriptReference/Texture2D.GetPixels.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/Documentation/ScriptReference/Texture2D.GetPixels.html\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"RockyTV","CreatedById":57161,"CreatedDateTime":"2013-12-02T22:25:38Z","Content":"\n\u003Cp\u003ENone of these methods work, they return a Color.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2013-12-03T10:48:25Z","Content":"\n\u003Cp\u003EYou should get an array of colors, which you can then write back to a texture using setpixels, or use the EncodeToPNG which gives you a byte array you can save to a file.\u003C/p\u003E\u003Cp\u003EAre you trying to redraw the icons in memory while the game runs or are you trying to get the icons to then create textures you can use?\u003C/p\u003E\u003Cp\u003ESorry I\u0027m slow to respond I have a lot on at the moment.\u003C/p\u003E\n"},{"CreatedByName":"RockyTV","CreatedById":57161,"CreatedDateTime":"2013-12-04T12:28:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Trigger Au\u0022 data-cite=\u0022Trigger Au\u0022\u003E\u003Cdiv\u003EYou should get an array of colors, which you can then write back to a texture using setpixels, or use the EncodeToPNG which gives you a byte array you can save to a file.\u003Cp\u003EAre you trying to redraw the icons in memory while the game runs or are you trying to get the icons to then create textures you can use?\u003C/p\u003E\u003Cp\u003ESorry I\u0027m slow to respond I have a lot on at the moment.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI want to get a texture from the spritesheet which is located at MapView.OrbitIconsMap. What I\u0027ve tried was MapView.OrbitIconsMap.EncodeToPNG() but it returned the full spritesheet.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2013-12-21T04:58:40Z","Content":"\n\u003Cp\u003ESorry for not getting back to this, was swamped by other work and missed this post. I\u0027ve had a bit more of a play around and I don\u0027t think you can get the Squad Textures in game directly. Each time I have gotten to the point of the last step would give you access I get an error like the below.\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EUnityException: Texture \u0027OrbitIcons\u0027 is not readable, the texture memory can not be accessed from scripts. You can make the texture readable in the Texture Import Settings.\u003Cbr\u003E  at (wrapper managed-to-native) UnityEngine.Texture2D:EncodeToPNG ()\u003C/pre\u003E\u003Cp\u003EWhich makes sense from a game perspective it\u0027s protecting its Intellectual Property.\u003C/p\u003E\u003Cp\u003EThats about the limit of my knowledge\u003C/p\u003E\n"},{"CreatedByName":"Mihara","CreatedById":59752,"CreatedDateTime":"2013-12-21T05:10:21Z","Content":"\n\u003Cp\u003EIf you just want to \u003Cem\u003Euse\u003C/em\u003E the icons, it\u0027s easy enough. Saving them as something else would need one more step -- Graphics.Blit of that to a RenderTexture and then saving that RenderTexture. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t\tpublic static Texture2D GetGizmoTexture()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\t// This clever method at getting at the stock texture asset originates in Enhanced Navball.\u003Cbr\u003E\t\t\tManeuverGizmo maneuverGizmo = MapView.ManeuverNodePrefab.GetComponent\u0026lt;ManeuverGizmo\u0026gt;();\u003Cbr\u003E\t\t\tManeuverGizmoHandle maneuverGizmoHandle = maneuverGizmo.handleNormal;\u003Cbr\u003E\t\t\tTransform gizmoTransform = maneuverGizmoHandle.flag;\u003Cbr\u003E\t\t\tRenderer gizmoRenderer = gizmoTransform.renderer;\u003Cbr\u003E\t\t\treturn (Texture2D)gizmoRenderer.sharedMaterial.mainTexture;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"}]}