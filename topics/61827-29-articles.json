{"TopicId":61827,"ForumId":34,"TopicTitle":"[1.3] kOS Scriptable Autopilot System v1.1.3.0","CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-02-01T16:40:58Z","PageNum":29,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-05-09T23:10:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dexter9313\u0022 data-cite=\u0022Dexter9313\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EAnyway, I have another wonder : have steering been heavily modified in .12 ? My probes don\u0027t handle good at all and my old \u0022executenode\u0022 script which relies on a very stable vessel is of no use anymore. The spacecraft keeps trying to steer towards the node but it results in an \u0022artificial wobble\u0022 which doesn\u0027t come from the structure but from the craft moving \u0022around the vector\u0022 for 3\u00C3\u201A\u00C2\u00B0/4\u00C3\u201A\u00C2\u00B0, not being able to hold itself stricly along it. That is surely more \u0022realistic\u0022 but I find it very annoying for maneuvers which require precision (I can\u0027t do better than 2 or 3 m/s precision now, I could do 0.1 before, no rcs required). It behaves almost like if the reaction wheel was not used.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI get a lot of insane see-saw action from steering as of 0.12 but I don\u0027t know the cause of it. I have found that putting some mass radially out away from the center helps a lot. Making a craft that has a larger moment arm for rotations around its main axis, and therefore more rotational inertia seems to make the steering calm down. (i.e. put fuel tanks radially mounted on the side instead of having everything in one narrow stack).\u003C/p\u003E\n"},{"CreatedByName":"Dexter9313","CreatedById":84598,"CreatedDateTime":"2014-05-10T01:29:10Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI get a lot of insane see-saw action from steering as of 0.12 but I don\u0027t know the cause of it. I have found that putting some mass radially out away from the center helps a lot. Making a craft that has a larger moment arm for rotations around its main axis, and therefore more rotational inertia seems to make the steering calm down. (i.e. put fuel tanks radially mounted on the side instead of having everything in one narrow stack).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you for the advice, I\u0027ll try this but you rarely have a \u0022large\u0022 vessel when you have achieved an LKO. Radially mounted tanks are more often used for lift-off, and even with that initial set up the rotational inertia isn\u0027t high enough to make it as stable as before. I\u0027ll investigate on this as well.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-05-10T03:57:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Dexter9313\u0022 data-cite=\u0022Dexter9313\u0022\u003E\u003Cdiv\u003EThank you for the advice, I\u0027ll try this but you rarely have a \u0022large\u0022 vessel when you have achieved an LKO. Radially mounted tanks are more often used for lift-off, and even with that initial set up the rotational inertia isn\u0027t high enough to make it as stable as before. I\u0027ll investigate on this as well.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, I don\u0027t think it\u0027s a good solution. Whatever is wrong needs to be looked at. I was just saying that the fact that this has worked might be a hint about what\u0027s going wrong. Triggering the problem (for me) has always required a ship with all its parts right on the central axis (a stack) and once even just a little bit of mass is off that axis the problem seems to go away.\u003C/p\u003E\n"},{"CreatedByName":"dr.phees","CreatedById":32383,"CreatedDateTime":"2014-05-10T15:05:50Z","Content":"\n\u003Cp\u003EI understand now, that Pitch, Yaw and Roll have to be read as the relation between vertical up (with inverted roll values) and the craft\u0027s root element.\u003C/p\u003E\u003Cp\u003EI am trying to get readings out of that, which reflect my navball readings (pitch, heading, roll). And, especially, I want to lock the steering to Heading, Pitch and Roll values that I can handle (aka Navball readings \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E). As I do want to set heading, pitch AND roll for a horizontally hovering craft, I cannot use Lock steering to Haeading(Pitch,Heading). (Maybe I am wrong here. If so, please enlighten me!)\u003C/p\u003E\u003Cp\u003EDoes anyone have a sample code?\u003C/p\u003E\u003Cp\u003EALSO:\u003C/p\u003E\u003Cp\u003EIs there a way to run an autorun.txt or so when booting a kOS unit? (I would mainly throw in a \u0022switch to 0.\u0022 command \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-05-10T15:59:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dr.phees\u0022 data-cite=\u0022dr.phees\u0022\u003E\u003Cdiv\u003EIs there a way to run an autorun.txt or so when booting a kOS unit? (I would mainly throw in a \u0022switch to 0.\u0022 command \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EA bootstrapper is part of the roadmap and im going to try to get it in to v13.0\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-05-10T16:15:39Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003E\u003Cspan style=\u0022font-size:14px;\u0022\u003ENEW PRE-RELEASE\u003C/span\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EUp on Github\u003C/p\u003E\u003Cp\u003EAfter v12.0 we started finding a lot of bugs with steering and the \u0022revert to launch\u0022 button. This is the first pre-release of v12.1\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/KSP-KOS/KOS/releases/tag/v12.1P1\u0022 rel=\u0022external nofollow\u0022\u003EOn Github\u003C/a\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E* Fixed Terminal linewrap @ the bottom of the terminal\u003C/p\u003E\u003Cp\u003E* Fixed \u0022Revert to Launch\u0022 button, it was blowing up the world and not allowing control before\u003C/p\u003E\u003Cp\u003E* Fixed LOCK s in subprograms\u003C/p\u003E\u003Cp\u003E* Fixed RemoteTech integration blowing up everything\u003C/p\u003E\u003Cp\u003E* Fixed flight controls not releasing when they should\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-10T16:21:06Z\u0022 title=\u002205/10/2014 04:21  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 10, 2014\u003C/time\u003E by erendrake\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-05-10T16:16:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dr.phees\u0022 data-cite=\u0022dr.phees\u0022\u003E\u003Cdiv\u003EI understand now, that Pitch, Yaw and Roll have to be read as the relation between vertical up (with inverted roll values) and the craft\u0027s root element.\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUhhh... SORT of. It\u0027s actually a rotation from the KSP\u0027s native XYZ system (this many degrees rotated from whichever way the X axis is pointed, this many degrees away from whichever way the Y axis is pointed, etc). KSP\u0027s native XYZ system is a bit messy (Okay it\u0027s VERY messy) because of all the weird tricks SQUAD had to do to avoid the floating point precision problems that would come from using large coordinate numbers.\u003C/p\u003E\u003Cp\u003EIt\u0027s usually best to force the rotation into a frame of mind you can make sense of, by using one of the existing known rotations first and then adding more rotation after that. For example this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock steering to up \u002B R(30,0,0).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWill pick a rotation that\u0027s 30 degrees deflected from whichever way \u0022up\u0022 is at the moment in the XYZ coordinate system. That\u0027s because \u0022Up\u0022 is a special keyword that means \u0022whichever rotation gets you from the Z axis (0,0,1) rotated up to pointing away from the planet center right now.\u0022\u003C/p\u003E\u003Cp\u003ETO make a rotation relative to the ship\u0027s current direction, use the special value \u0022FACING\u0022, like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset curFace to SHIP:Facing.\u003Cbr\u003Elock steering to curFace \u002B R(30,0,0).\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ETo rotate 30 degrees off from the current pointing direction. The reason for the extra step of \u0027set curFace ...\u0022 is because if you locked steering to something relative to the current ship facing directly, then it would continually update like that, and keep spinning more and more because it would be constantly saying \u0022always keep trying to point 30 degrees off from whatever you are currently pointing at.\u0022\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI am trying to get readings out of that, which reflect my navball readings (pitch, heading, roll). And, especially, I want to lock the steering to Heading, Pitch and Roll values that I can handle (aka Navball readings \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E). As I do want to set heading, pitch AND roll for a horizontally hovering craft, I cannot use Lock steering to Haeading(Pitch,Heading). (Maybe I am wrong here. If so, please enlighten me!)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUsing HEADING() does point the ship according to the navball, but doesn\u0027t let you pick the roll. You get whatever you happen to get. For rockets this is fine, but for planes it\u0027s not quite enough.\u003C/p\u003E\u003Cp\u003EIf you need to control everything exactly, and do it relative to the ship\u0027s own orientation, I recommend giving the RAW controls a try instead. They let your script directly control the craft, as if your script had its \u0022hands\u0022 on the W,A,S,D,Q, and E keys, instead of letting the mod try to abstract the work for you. More about it here: \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/summary_topics/ship_control/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/summary_topics/ship_control/\u003C/a\u003E (scroll about halfway down the page to the part entitled \u0022Raw Control\u0022.)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EALSO:\u003C/p\u003E\u003Cp\u003EIs there a way to run an autorun.txt or so when booting a kOS unit? (I would mainly throw in a \u0022switch to 0.\u0022 command \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s on the list of features to implement \u0022any day now\u0022. At the moment a lot of those features are on hold as there\u0027s important bug fixes being worked on in regards to user controls getting locked out when they shouldn\u0027t be. Several ideas have been bandied about about how to do the auto-run idea, one of which was to let you put commands inside the craft description field in the VAB and they run any time that craft is loaded onto the launchpad. But the idea isn\u0027t set in stone yet. But it is true that the devs want to implement some type of auto-loading. At the moment it\u0027s not there yet.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-10T16:19:01Z\u0022 title=\u002205/10/2014 04:19  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 10, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ralathon","CreatedById":71537,"CreatedDateTime":"2014-05-10T18:06:01Z","Content":"\n\u003Cp\u003EWith this 12.1 prerelease and RemoteTech I\u0027m getting stack overflows when I repeatedly loop this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eif stageStatus = 0 {\u003Cbr\u003E  // Check for flameout of any of the existing engines:\u003Cbr\u003E  set stg_numF to 0.\u003Cbr\u003E  list engines in stg_eList.\u003Cbr\u003E  for stg_eng in stg_eList { \u003Cbr\u003E    if stg_eng:flameout {\u003Cbr\u003E      set stg_numF to stg_numF \u002B 1.\u003Cbr\u003E    }.\u003Cbr\u003E  }.\u003Cbr\u003E  if stg_numF \u0026gt; 0 {\u003Cbr\u003E    set stageStatus to 2.\u003Cbr\u003E    set stageMsg to stg_numF \u002B \u0022 engine(s) flamed out\u0022.\u003Cbr\u003E  }.\u003Cbr\u003E}.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo I suspect something in this code is leaking memory where it formerly didn\u0027t.\u003C/p\u003E\n"},{"CreatedByName":"dr.phees","CreatedById":32383,"CreatedDateTime":"2014-05-10T20:10:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EWill pick a rotation that\u0027s 30 degrees deflected from whichever way \u0022up\u0022 is at the moment in the XYZ coordinate system. That\u0027s because \u0022Up\u0022 is a special keyword that means \u0022whichever rotation gets you from the Z axis (0,0,1) rotated up to pointing away from the planet center right now.\u0022\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAnd that\u0027s my problem \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWhen launching a vertically built ship, everything works fine. But controlling a spaceplane via R(a,b,c) is more complicated. It basically is a vector-matrix multiplication, but I still have to figure out the matrix. (Both, to translate the Facing into Navball compliance as back.)\u003C/p\u003E\u003Cp\u003EAs for the bootstrapping: Yay!\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-05-10T20:20:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ralathon\u0022 data-cite=\u0022Ralathon\u0022\u003E\u003Cdiv\u003ESo I suspect something in this code is leaking memory where it formerly didn\u0027t.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo far i am unable to reproduce this. If you shoot me a craft and kOSscript file that shows the error it will help a lot.\u003C/p\u003E\n"},{"CreatedByName":"Vulkan","CreatedById":83177,"CreatedDateTime":"2014-05-10T20:24:31Z","Content":"\n\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cpre\u003EAm I right in thinking that lock:steering does not make use of engine gimbals? I\u0027m trying to do a kOS career and so have no torque or aerodynamics as yet. With an LV-T45 under an unmanned probe (edited the tech tree to give me one at the start) I can run\u003C/pre\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset ship:control:yaw to 0.5.\u003Cbr\u003Elock throttle to 1.\u003Cbr\u003Estage.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand go into a nice sidespin but\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock steering to heading(90,45)\u003Cbr\u003Elock throttle to 1.\u003Cbr\u003Estage.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Egoes straight up. If so is ther a workaround beyond of any kind?\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-05-10T20:52:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vulkan\u0022 data-cite=\u0022Vulkan\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cpre\u003EAm I right in thinking that lock:steering does not make use of engine gimbals? I\u0027m trying to do a kOS career and so have no torque or aerodynamics as yet. With an LV-T45 under an unmanned probe (edited the tech tree to give me one at the start) I can run\u003C/pre\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eset ship:control:yaw to 0.5.\u003Cbr\u003Elock throttle to 1.\u003Cbr\u003Estage.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eand go into a nice sidespin but\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Elock steering to heading(90,45)\u003Cbr\u003Elock throttle to 1.\u003Cbr\u003Estage.\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Egoes straight up. If so is ther a workaround beyond of any kind?\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ethe algorithm for LOCK STEERING is pretty rough and yes it does not count engine torque when determining steering. Luckily you can take direct control of all of the flight controls and steer yourself. Info on how to do so is here: \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/summary_topics/ship_control/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/summary_topics/ship_control/\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EEDIT: If you have engine torque it will use it the same as normal steering, but if all you have is engine torque it doesnt think you can steer so it doesnt bother.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-10T20:54:42Z\u0022 title=\u002205/10/2014 08:54  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 10, 2014\u003C/time\u003E by erendrake\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"dr.phees","CreatedById":32383,"CreatedDateTime":"2014-05-10T21:33:49Z","Content":"\n\u003Cp\u003EWhat does \u0022out of sync\u0022 mean?\u003C/p\u003E\u003Cp\u003EI was returning to KSC using my hover program and suddenly, about 200m from the VAB, I got the message \u0022out of sync\u0022 and my craft crashed.\u003C/p\u003E\n"},{"CreatedByName":"Vulkan","CreatedById":83177,"CreatedDateTime":"2014-05-10T22:45:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022erendrake\u0022 data-cite=\u0022erendrake\u0022\u003E\u003Cdiv\u003Ethe algorithm for LOCK STEERING is pretty rough and yes it does not count engine torque when determining steering. Luckily you can take direct control of all of the flight controls and steer yourself. Info on how to do so is here: \u003Ca href=\u0022http://ksp-kos.github.io/KOS_DOC/summary_topics/ship_control/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://ksp-kos.github.io/KOS_DOC/summary_topics/ship_control/\u003C/a\u003E\u003Cp\u003EEDIT: If you have engine torque it will use it the same as normal steering, but if all you have is engine torque it doesnt think you can steer so it doesnt bother.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks very much, that explains things. Looks like it\u0027s time to brush the dust of my pid control notes.\u003C/p\u003E\n"},{"CreatedByName":"erendrake","CreatedById":57164,"CreatedDateTime":"2014-05-10T23:04:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Vulkan\u0022 data-cite=\u0022Vulkan\u0022\u003E\u003Cdiv\u003EThanks very much, that explains things. Looks like it\u0027s time to brush the dust of my pid control notes.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESweet! I cant wait to see what you come up with.\u003C/p\u003E\n"},{"CreatedByName":"marianoapp","CreatedById":104009,"CreatedDateTime":"2014-05-10T23:21:17Z","Content":"\n\u003Cp\u003EAlso SAS needs to be off for LOCK STEERING to work.\u003C/p\u003E\n"},{"CreatedByName":"sfr1000","CreatedById":110729,"CreatedDateTime":"2014-05-11T08:46:27Z","Content":"\n\u003Cp\u003Eok new to ksp forum, mainly to keep up to date with this mod. switch to 0 (each time)/no file saving? is this the current limit of this mod or have i installed incorrectly. sorry if this has been covered already! its a big thread.\u003C/p\u003E\n"},{"CreatedByName":"BadRocketsCo.","CreatedById":101686,"CreatedDateTime":"2014-05-11T12:48:38Z","Content":"\n\u003Cp\u003ENow, I am not sure, if this mod detects the RealFuels resources. Would \u0027wait until stage:kerosene (equals) 0. stage.\u0027 work?\u003C/p\u003E\n"},{"CreatedByName":"Ralathon","CreatedById":71537,"CreatedDateTime":"2014-05-11T13:22:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022BadRocketsCo.\u0022 data-cite=\u0022BadRocketsCo.\u0022\u003E\u003Cdiv\u003ENow, I am not sure, if this mod detects the RealFuels resources. Would \u0027wait until stage:kerosene (equals) 0. stage.\u0027 work?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyes, it works.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-05-11T15:08:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sfr1000\u0022 data-cite=\u0022sfr1000\u0022\u003E\u003Cdiv\u003Eok new to ksp forum, mainly to keep up to date with this mod. switch to 0 (each time)/no file saving? is this the current limit of this mod or have i installed incorrectly. sorry if this has been covered already! its a big thread.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWhat limit? I can\u0027t understand the way you worded your question.\u003C/p\u003E\n"},{"CreatedByName":"airbus a320","CreatedById":108322,"CreatedDateTime":"2014-05-11T15:35:12Z","Content":"\n\u003Cp\u003EDoes anyone have a good formula for calculating the ascent lean angle?\u003C/p\u003E\u003Cp\u003EI\u0027m writing an ascent script. Initially i tried to bind lean angle to altitude linearly, but it was too \u0022slow\u0022, so i tried sqrt(altitude) that is \u0022faster\u0022 around 0, then sqrt(sqrt(altitude)) ... but i think it\u0027s still far to optimal.\u003C/p\u003E\u003Cp\u003EHere is my code. There is a nice PID controller for the throttle that lock ascent speed to the terminal velocity, a staging loop that works with asparagus (i found here on the forum i guess)\u003C/p\u003E\u003Cp\u003EWithout comments and indentations it\u0027s about 1600kb\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]thr [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]1[/COLOR][COLOR=#0080FF].[/COLOR]\u003Cbr\u003E[COLOR=#0080FF]\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]lock [/B][/COLOR][COLOR=#C0C0C0]tv [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#AFAF76][B]ship[/B][/COLOR][COLOR=#0080FF]:[/COLOR][COLOR=#C0C0C0]termvelocity[/COLOR][COLOR=#0080FF]. [/COLOR][COLOR=#9BC89B][I]// disc space economy!\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]lock [/B][/COLOR][COLOR=#C0C0C0]vs [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#AFAF76][B]verticalspeed[/B][/COLOR][COLOR=#0080FF].     [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]trg [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]100000[/COLOR][COLOR=#0080FF].            [/COLOR][COLOR=#9BC89B][I]// Target altitude\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]dt [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]0.1[/COLOR][COLOR=#0080FF].           [/COLOR][COLOR=#9BC89B][I]// [dt] is \u0022delta time\u0022 for integration/differntiation in PID controller.\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]prerr [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF].          [/COLOR][COLOR=#9BC89B][I]// [prerr] and [int] are starting values for PID loop\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]int [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF].            [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]Kp [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]0.0018[/COLOR][COLOR=#0080FF].        [/COLOR][COLOR=#9BC89B][I]// [Kp] is the proportional response. It\u0027s 1/6th of the critical gain (Ziegler\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u20AC\u0153Nichols method)\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]period [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]10[/COLOR][COLOR=#0080FF].        [/COLOR][COLOR=#9BC89B][I]// [Period] is the oscillation frequency at critical gain.\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]Ki [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]2[/COLOR][COLOR=#0080FF]*[/COLOR][COLOR=#C0C0C0]Kp[/COLOR][COLOR=#0080FF]/[/COLOR][COLOR=#C0C0C0]period[/COLOR][COLOR=#0080FF].   [/COLOR][COLOR=#9BC89B][I]// [Ki] and [Kd] are the integral and differential response.\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]Kd [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#C0C0C0]Kp[/COLOR][COLOR=#0080FF]*[/COLOR][COLOR=#FF82FF]10[/COLOR][COLOR=#0080FF]/[/COLOR][COLOR=#C0C0C0]period[/COLOR][COLOR=#0080FF].\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]clearscreen[/B][/COLOR][COLOR=#0080FF].\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]lock [/B][/COLOR][COLOR=#AFAF76][B]throttle [/B][/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#C0C0C0]thr[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]lock [/B][/COLOR][COLOR=#AFAF76][B]steering [/B][/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#AFAF76][B]up [/B][/COLOR][COLOR=#0080FF]\u002B [/COLOR][COLOR=#B48045][B]R[/B][/COLOR][COLOR=#0080FF]([/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF],[/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF],[/COLOR][COLOR=#FF82FF]180[/COLOR][COLOR=#0080FF]).\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]stage[/B][/COLOR][COLOR=#0080FF].                   [/COLOR][COLOR=#9BC89B][I]// Let\u0027s go!\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]print [/B][/COLOR][COLOR=#FF8040]\u0022All aboard!\u0022[/COLOR][COLOR=#0080FF]. \u003Cbr\u003E[/COLOR][COLOR=#249B24][B]Print [/B][/COLOR][COLOR=#FF8040]\u0022 \u0022[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]print [/B][/COLOR][COLOR=#FF8040]\u0022There are some issues with the LOCK STEERING\u0022[/COLOR][COLOR=#0080FF]. \u003Cbr\u003E[/COLOR][COLOR=#249B24][B]print [/B][/COLOR][COLOR=#FF8040]\u0022function. If your vessel starts oscillating\u0022[/COLOR][COLOR=#0080FF]. \u003Cbr\u003E[/COLOR][COLOR=#249B24][B]print [/B][/COLOR][COLOR=#FF8040]\u0022without control try to recover it with SAS\u0022[/COLOR][COLOR=#0080FF]. \u003Cbr\u003E[/COLOR][COLOR=#249B24][B]Print [/B][/COLOR][COLOR=#FF8040]\u0022 \u0022[/COLOR][COLOR=#0080FF].\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#9BC89B][I]//lock gLoc to body:mu/((altitude\u002Bbody:radius)^2).\u003Cbr\u003E//lock twr to maxthrust/(gLoc*mass).\u003Cbr\u003E//lock curtwr to twr*thr.\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]wait until [/B][/COLOR][COLOR=#C0C0C0]tv[/COLOR][COLOR=#0080FF]-[/COLOR][COLOR=#C0C0C0]vs [/COLOR][COLOR=#0080FF]\u0026lt; ([/COLOR][COLOR=#FF82FF]-1[/COLOR][COLOR=#0080FF]).    [/COLOR][COLOR=#9BC89B][I]// Wait until speed is close to terminal velocity for the first time before starting PID controlling.\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]until [/B][/COLOR][COLOR=#AFAF76][B]altitude [/B][/COLOR][COLOR=#0080FF]\u0026gt; [/COLOR][COLOR=#FF82FF]10000\u003Cbr\u003E[/COLOR][COLOR=#0080FF]{\u003Cbr\u003E [/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]err [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#C0C0C0]tv [/COLOR][COLOR=#0080FF]- [/COLOR][COLOR=#C0C0C0]vs[/COLOR][COLOR=#0080FF].                    [/COLOR][COLOR=#9BC89B][I]// PID controller algorithm based on pseudocode found on wikipedia\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]int [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#C0C0C0]int [/COLOR][COLOR=#0080FF]\u002B [/COLOR][COLOR=#C0C0C0]err[/COLOR][COLOR=#0080FF]*[/COLOR][COLOR=#C0C0C0]dt[/COLOR][COLOR=#0080FF].               [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]der [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#0080FF]([/COLOR][COLOR=#C0C0C0]err [/COLOR][COLOR=#0080FF]- [/COLOR][COLOR=#C0C0C0]prerr[/COLOR][COLOR=#0080FF])/[/COLOR][COLOR=#C0C0C0]dt[/COLOR][COLOR=#0080FF].           [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]out [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#C0C0C0]Kp[/COLOR][COLOR=#0080FF]*[/COLOR][COLOR=#C0C0C0]err [/COLOR][COLOR=#0080FF]\u002B [/COLOR][COLOR=#C0C0C0]Ki[/COLOR][COLOR=#0080FF]*[/COLOR][COLOR=#C0C0C0]int [/COLOR][COLOR=#0080FF]\u002B [/COLOR][COLOR=#C0C0C0]Kd[/COLOR][COLOR=#0080FF]*[/COLOR][COLOR=#C0C0C0]der[/COLOR][COLOR=#0080FF].   [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]prerr [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#C0C0C0]err[/COLOR][COLOR=#0080FF].                      [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]thr [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#C0C0C0]thr [/COLOR][COLOR=#0080FF]\u002B [/COLOR][COLOR=#C0C0C0]out[/COLOR][COLOR=#0080FF].                  [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]if [/B][/COLOR][COLOR=#C0C0C0]thr [/COLOR][COLOR=#0080FF]\u0026gt; [/COLOR][COLOR=#FF82FF]1 [/COLOR][COLOR=#0080FF]{[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]thr [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]1[/COLOR][COLOR=#0080FF].}.            [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]numOut [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF].                                                      [/COLOR][COLOR=#9BC89B][I]// When an engine flameouts probably it\u0027s out of fuel, it\u0027s staging time!!!\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]list engines in [/B][/COLOR][COLOR=#C0C0C0]englist[/COLOR][COLOR=#0080FF].                                              [/COLOR][COLOR=#9BC89B][I]// Works with asparagus staging.\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]for [/B][/COLOR][COLOR=#C0C0C0]eng [/COLOR][COLOR=#249B24][B]in [/B][/COLOR][COLOR=#C0C0C0]englist [/COLOR][COLOR=#0080FF]{[/COLOR][COLOR=#249B24][B]if [/B][/COLOR][COLOR=#C0C0C0]eng[/COLOR][COLOR=#0080FF]:[/COLOR][COLOR=#C0C0C0]flameout [/COLOR][COLOR=#0080FF]{[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]numOut [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#C0C0C0]numOut [/COLOR][COLOR=#0080FF]\u002B [/COLOR][COLOR=#FF82FF]1[/COLOR][COLOR=#0080FF].}.}.    [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]if [/B][/COLOR][COLOR=#C0C0C0]numOut [/COLOR][COLOR=#0080FF]\u0026gt; [/COLOR][COLOR=#FF82FF]0 [/COLOR][COLOR=#0080FF]{[/COLOR][COLOR=#249B24][B]stage[/B][/COLOR][COLOR=#0080FF].}.                                               [/COLOR][COLOR=#9BC89B][I]//\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E // print \u0022vs-tv = \u0022 \u002B (vs-tv) at (0,3).   // Debug strings\u003Cbr\u003E // print \u0022out   = \u0022 \u002B out at (0,4).       //\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E [/I][/COLOR][COLOR=#249B24][B]wait [/B][/COLOR][COLOR=#C0C0C0]dt[/COLOR][COLOR=#0080FF].\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]lock [/B][/COLOR][COLOR=#C0C0C0]lean [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]-1 [/COLOR][COLOR=#0080FF]* ([/COLOR][COLOR=#B48045][B]sqrt[/B][/COLOR][COLOR=#0080FF]([/COLOR][COLOR=#B48045][B]sqrt[/B][/COLOR][COLOR=#0080FF]([/COLOR][COLOR=#AFAF76][B]altitude[/B][/COLOR][COLOR=#FF82FF]-10000[/COLOR][COLOR=#0080FF]))*[/COLOR][COLOR=#FF82FF]6[/COLOR][COLOR=#0080FF]).     [/COLOR][COLOR=#9BC89B][I]// Ascent path. I couldn\u0027t find a better formula...\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]when [/B][/COLOR][COLOR=#C0C0C0]lean [/COLOR][COLOR=#0080FF]\u0026lt; [/COLOR][COLOR=#FF82FF]-90 [/COLOR][COLOR=#249B24][B]then [/B][/COLOR][COLOR=#0080FF]{\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]unlock [/B][/COLOR][COLOR=#C0C0C0]lean[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]lean [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]-90[/COLOR][COLOR=#0080FF].}.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]lock [/B][/COLOR][COLOR=#AFAF76][B]steering [/B][/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#AFAF76][B]up [/B][/COLOR][COLOR=#0080FF]\u002B [/COLOR][COLOR=#B48045][B]R[/B][/COLOR][COLOR=#0080FF]([/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF],[/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF],[/COLOR][COLOR=#FF82FF]-90[/COLOR][COLOR=#0080FF]) \u002B [/COLOR][COLOR=#B48045][B]R[/B][/COLOR][COLOR=#0080FF]([/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF],[/COLOR][COLOR=#C0C0C0]lean[/COLOR][COLOR=#0080FF],[/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF]).\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]print [/B][/COLOR][COLOR=#FF8040]\u0022Woah dude! Is it leaning?!\u0022[/COLOR][COLOR=#0080FF]. [/COLOR][COLOR=#249B24][B]Print [/B][/COLOR][COLOR=#FF8040]\u0022 \u0022[/COLOR][COLOR=#0080FF].\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]wait [/B][/COLOR][COLOR=#FF82FF]5[/COLOR][COLOR=#0080FF].\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]thr [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]1[/COLOR][COLOR=#0080FF].                 [/COLOR][COLOR=#9BC89B][I]// Full throttle toward infinity!\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]until [/B][/COLOR][COLOR=#AFAF76][B]apoapsis [/B][/COLOR][COLOR=#0080FF]\u0026gt; ([/COLOR][COLOR=#C0C0C0]trg [/COLOR][COLOR=#0080FF]\u002B [/COLOR][COLOR=#FF82FF]500[/COLOR][COLOR=#0080FF])       [/COLOR][COLOR=#9BC89B][I]// Staging ...\u003Cbr\u003E[/I][/COLOR][COLOR=#0080FF]{\u003Cbr\u003E [/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]numOut [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF].\u003Cbr\u003E [/COLOR][COLOR=#249B24][B]list engines in [/B][/COLOR][COLOR=#C0C0C0]englist[/COLOR][COLOR=#0080FF].\u003Cbr\u003E [/COLOR][COLOR=#249B24][B]for [/B][/COLOR][COLOR=#C0C0C0]eng [/COLOR][COLOR=#249B24][B]in [/B][/COLOR][COLOR=#C0C0C0]englist [/COLOR][COLOR=#0080FF]{[/COLOR][COLOR=#249B24][B]if [/B][/COLOR][COLOR=#C0C0C0]eng[/COLOR][COLOR=#0080FF]:[/COLOR][COLOR=#C0C0C0]flameout [/COLOR][COLOR=#0080FF]{[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]numOut [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#C0C0C0]numOut [/COLOR][COLOR=#0080FF]\u002B [/COLOR][COLOR=#FF82FF]1[/COLOR][COLOR=#0080FF].}.}.\u003Cbr\u003E [/COLOR][COLOR=#249B24][B]if [/B][/COLOR][COLOR=#C0C0C0]numOut [/COLOR][COLOR=#0080FF]\u0026gt; [/COLOR][COLOR=#FF82FF]0 [/COLOR][COLOR=#0080FF]{[/COLOR][COLOR=#249B24][B]stage[/B][/COLOR][COLOR=#0080FF].}.\u003Cbr\u003E [/COLOR][COLOR=#249B24][B]wait [/B][/COLOR][COLOR=#FF82FF]0.1[/COLOR][COLOR=#0080FF].\u003Cbr\u003E}.\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]thr [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]print [/B][/COLOR][COLOR=#FF8040]\u0022Wait for circularizing burn...\u0022[/COLOR][COLOR=#0080FF]. [/COLOR][COLOR=#249B24][B]Print [/B][/COLOR][COLOR=#FF8040]\u0022 \u0022[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]wait [/B][/COLOR][COLOR=#FF82FF]1[/COLOR][COLOR=#0080FF].\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#AFAF76][B]warp [/B][/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]3[/COLOR][COLOR=#0080FF].                    [/COLOR][COLOR=#9BC89B][I]// Warping to apoapsis\u003Cbr\u003E[/I][/COLOR][COLOR=#249B24][B]wait until [/B][/COLOR][COLOR=#AFAF76][B]altitude[/B][/COLOR][COLOR=#0080FF]\u0026gt;[/COLOR][COLOR=#FF82FF]70000[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#AFAF76][B]warp [/B][/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]wait [/B][/COLOR][COLOR=#FF82FF]2[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#AFAF76][B]warp [/B][/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]3[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]wait until [/B][/COLOR][COLOR=#AFAF76][B]eta[/B][/COLOR][COLOR=#0080FF]:[/COLOR][COLOR=#C0C0C0]apoapsis [/COLOR][COLOR=#0080FF]\u0026lt; [/COLOR][COLOR=#FF82FF]60[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#AFAF76][B]warp [/B][/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]0[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]wait until [/B][/COLOR][COLOR=#AFAF76][B]eta[/B][/COLOR][COLOR=#0080FF]:[/COLOR][COLOR=#C0C0C0]apoapsis [/COLOR][COLOR=#0080FF]\u0026lt; [/COLOR][COLOR=#FF82FF]25[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]lock [/B][/COLOR][COLOR=#AFAF76][B]steering [/B][/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#AFAF76][B]prograde[/B][/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]wait until [/B][/COLOR][COLOR=#AFAF76][B]eta[/B][/COLOR][COLOR=#0080FF]:[/COLOR][COLOR=#C0C0C0]apoapsis [/COLOR][COLOR=#0080FF]\u0026lt; [/COLOR][COLOR=#FF82FF]7[/COLOR][COLOR=#0080FF].\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]set [/B][/COLOR][COLOR=#C0C0C0]thr [/COLOR][COLOR=#249B24][B]to [/B][/COLOR][COLOR=#FF82FF]1[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]print [/B][/COLOR][COLOR=#FF8040]\u0022Burn like hell!\u0022[/COLOR][COLOR=#0080FF]. [/COLOR][COLOR=#249B24][B]Print [/B][/COLOR][COLOR=#FF8040]\u0022 \u0022[/COLOR][COLOR=#0080FF].\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]wait until [/B][/COLOR][COLOR=#AFAF76][B]periapsis [/B][/COLOR][COLOR=#0080FF]\u0026gt; ([/COLOR][COLOR=#C0C0C0]trg [/COLOR][COLOR=#0080FF]- [/COLOR][COLOR=#FF82FF]500[/COLOR][COLOR=#0080FF]).\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]unlock all[/B][/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR][COLOR=#249B24][B]wait [/B][/COLOR][COLOR=#FF82FF]4[/COLOR][COLOR=#0080FF].\u003Cbr\u003E[/COLOR]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI tried to fix the LOCK STEERING weirdness with the PID controller but it\u0027s too hard for me!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-11T15:54:59Z\u0022 title=\u002205/11/2014 03:54  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 11, 2014\u003C/time\u003E by airbus a320\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-05-11T17:19:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022airbus a320\u0022 data-cite=\u0022airbus a320\u0022\u003E\u003Cdiv\u003EDoes anyone have a good formula for calculating the ascent lean angle?\u003Cp\u003EI\u0027m writing an ascent script. Initially i tried to bind lean angle to altitude linearly, but it was too \u0022slow\u0022, so i tried sqrt(altitude) that is \u0022faster\u0022 around 0, then sqrt(sqrt(altitude)) ... but i think it\u0027s still far to optimal.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve heard some people had success with just aiming based on how high your apoapsis is compared to your current altitude. If the apoapsis is a lot higher than your current altitude, then you\u0027ve got enough momentum that you need to pitch down. If your apopapsis is not high enough above your current altitude than you\u0027re aiming too far horizontally for your momentum and will probably fall back in. So dynamically adjust your pitch to keep your apoapsis-altitude to a fixed constant amount. I haven\u0027t tried this technique myself (I use the srqt method similar to what you use) but it seems sound. The problem with picking a fixed pre-determined path is that it doesn\u0027t adjust to the different TWR\u0027s of different craft. The optimal shape of the path is not the same for every rocket. The apoapsis-altitude thing sounds like a good idea I\u0027d like to try at some point, but at the moment I\u0027ve shifted focus to joining the devs underneath the hood so I haven\u0027t written a new script in a while.\u003C/p\u003E\u003Cp\u003E(P.S. How did you get the BBCODE [ color ] tags inserted into your posted content like that. I assume you didn\u0027t manually type them all in and you have a program doing it for you that\u0027s aware of the syntax of kOS.)\u003C/p\u003E\n"},{"CreatedByName":"airbus a320","CreatedById":108322,"CreatedDateTime":"2014-05-11T18:11:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EI\u0027ve heard some people had success with just aiming based on how high your apoapsis is compared to your current altitude. If the apoapsis is a lot higher than your current altitude, then you\u0027ve got enough momentum that you need to pitch down. If your apopapsis is not high enough above your current altitude than you\u0027re aiming too far horizontally for your momentum and will probably fall back in. So dynamically adjust your pitch to keep your apoapsis-altitude to a fixed constant amount. I haven\u0027t tried this technique myself (I use the srqt method similar to what you use) but it seems sound. The problem with picking a fixed pre-determined path is that it doesn\u0027t adjust to the different TWR\u0027s of different craft. The optimal shape of the path is not the same for every rocket. The apoapsis-altitude thing sounds like a good idea I\u0027d like to try at some point, but at the moment I\u0027ve shifted focus to joining the devs underneath the hood so I haven\u0027t written a new script in a while.\u003Cp\u003E(P.S. How did you get the BBCODE [ color ] tags inserted into your posted content like that. I assume you didn\u0027t manually type them all in and you have a program doing it for you that\u0027s aware of the syntax of kOS.)\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you, right now i\u0027m rewriting the same equation turning the sqrt into an exponential (something like (altitude-10000)^(1/4)) so the coefficients\u0027 roles are more intuitive... i\u0027ll try to lock the apo-alt difference to the lean angle with a negative feedback (PID algorythm)\u003C/p\u003E\u003Cp\u003EDo you know if someone has already wrote an alternative script for the LOCK STEERING function? When i tried by myself i broke everything! The direction i want to follow is in the navball\u0027s vector basis, the error as well, but the pitch/yaw/roll adjustements are in the vessel vector basis, so i think there should be a rotation/translation. It doesn\u0027t look that hard but what will happen if i try to steer around the 0\u00C3\u201A\u00C2\u00B0/360\u00C3\u201A\u00C2\u00B0 direction? i\u0027ll get a wrong error reading, i\u0027m not sure if i can just do something like IF error\u0026gt;half_range THEN error=(error-half_range) ...\u003C/p\u003E\u003Cp\u003Ei\u0027m using this tool for writing (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/62834-Saturn-yet-another-kOS-IDE\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/62834-Saturn-yet-another-kOS-IDE\u003C/a\u003E)\u003C/p\u003E\n"},{"CreatedByName":"Elliptical Orbit","CreatedById":11829,"CreatedDateTime":"2014-05-11T18:21:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022airbus a320\u0022 data-cite=\u0022airbus a320\u0022\u003E\u003Cdiv\u003EDoes anyone have a good formula for calculating the ascent lean angle?\u003Cp\u003EI\u0027m writing an ascent script. Initially i tried to bind lean angle to altitude linearly, but it was too \u0022slow\u0022, so i tried sqrt(altitude) that is \u0022faster\u0022 around 0, then sqrt(sqrt(altitude)) ... but i think it\u0027s still far to optimal.\u003C/p\u003E\u003Cp\u003EI tried to fix the LOCK STEERING weirdness with the PID controller but it\u0027s too hard for me!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe best results I had was back in 21.1 and using Mechjeb and KOS at the same time. Mechjeb did all the ascent guidance and KOS did all the mechanicals and it worked perfect. I would just setup my plan in to Mechjeb and manually engage the auto pilot, then go start my script in KOS sit back and watch the show.\u003C/p\u003E\u003Cp\u003EThe one thing that I can\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t get to work in this newest version is the ability to lock the throttle to positions I want the engines to have with Mechjeb engaged. It seems not to work in this version and I know that in the older version I have for 21.1 Kevin has had this issue before and fixed it. I want to say that those file versions was either 8.x or 9.x. So at the moment I have to engage Mechjeb after my vehicles leave the ground but I still have no throttle control using KOS. Wonder if this can be possibly looked at?\u003C/p\u003E\n"},{"CreatedByName":"sfr1000","CreatedById":110729,"CreatedDateTime":"2014-05-12T07:02:11Z","Content":"\n\u003Cp\u003EWhat i mean is when I run KOS every time i need to type switch to 0, and place my txt file out side the gamedata folder to be read ( J:\\Program Files\\Steam\\steamapps\\common\\Kerbal Space Program\\Plugins\\PluginData\\Archive ), then its fine. also i have seen vids of scipts being edited in the KOS UI and saved from there I can\u0027t do this! I wondered if it was the 2.35 update and KOS was being modified to correct this? (current limits) or like I suspect i have installed incorrectly.\u003C/p\u003E\u003Cp\u003E this mod is the No1 mod 4 me i would love it to function correctly. (archives the only problem 4 me)\u003C/p\u003E\u003Cp\u003EIt would be perfect if the script could be loaded from my public documents so i can edit it on my laptop, \u003C/p\u003E\u003Cp\u003EMy goal is to be able to control my rover over wifi or even the net. only seeing what its cameras can see (like real missions).\u003C/p\u003E\u003Cp\u003Ea simple config file for the archive directory would solve this.\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\n"}]}