{"TopicId":98727,"ForumId":36,"TopicTitle":"[0.90] SolarPanelFixer","CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-02-04T05:58:30Z","PageNum":1,"Articles":[{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-02-04T05:58:30Z","Content":"\n\u003Cp\u003E\nThis is a quick little hack to make solar panel output vary with distance-from-kerbol-squared, instead of a four-segment piecewise linear approximation of r**2.\n\u003C/p\u003E\n\u003Cp\u003E\nIt works by using ModuleManager to add a special module to every part with a ModuleDeployableSolarPanel. That special module varies chargeRate on the ModuleDeployableSolarPanel dynamically to get the right numbers into the flowrate. It\u0027s not pretty, but it seems to maybe work?\n\u003C/p\u003E\n\u003Cp\u003E\nThis is not very well tested. Consider this a beta release for people who might be interested.\n\u003C/p\u003E\n\u003Cp\u003E\nMod on KerbalStuff: \u003Cstrong\u003ESolarPanelFixer\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSource code: \u003Ca href=\u0022https://code.google.com/p/solar-panel-fixer/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://code.google.com/p/solar-panel-fixer/\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-06-03T20:51:15Z\u0022 title=\u002206/03/2021 08:51  PM\u0022 data-short=\u00223 yr\u0022\u003EJune 3, 2021\u003C/time\u003E by Snark\u003C/strong\u003E\n\u003Cbr\u003ELink to defunct website removed by moderator\n\u003C/span\u003E\n"},{"CreatedByName":"AngelLestat","CreatedById":58968,"CreatedDateTime":"2015-02-04T13:44:47Z","Content":"\n\u003Cp\u003EHow do you do it? \u003C/p\u003E\u003Cp\u003EYou take 1Au at kerbin-kerbol distance and then you apply E = 1366w/m2 \u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A2 (1/Distance)^2 to calculate the radiation incidence, then you take the ~35% of that for PVcells and apply another equation to mimic efficiency losses due heat?\u003C/p\u003E\n"},{"CreatedByName":"Gaalidas","CreatedById":111158,"CreatedDateTime":"2015-02-04T21:36:28Z","Content":"\n\u003Cp\u003Esure.... we\u0027ll go with that answer. \u003Cem\u003ETotal gibberish to me, but it sounds geeky enough to work.\u003C/em\u003E\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-02-05T01:06:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AngelLestat\u0022 data-cite=\u0022AngelLestat\u0022\u003E\u003Cdiv\u003EHow do you do it? \u003Cp\u003EYou take 1Au at kerbin-kerbol distance and then you apply E = 1366w/m2 \u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A2 (1/Distance)^2 to calculate the radiation incidence, then you take the ~35% of that for PVcells and apply another equation to mimic efficiency losses due heat?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMuch simpler.\u003C/p\u003E\u003Cp\u003EAt the moment, stock solar panels have a charge rate, a piecewise linear curve giving falloff with distance, and the sun\u0027s AOA. Output is chargeRate * curve.evaluate(distance) * cos (sunAOA).\u003C/p\u003E\u003Cp\u003EI just replace the piecewise linear curve with 1/r**2, by changing charge rate every tick to r**2 / curve.evaluate\u00AE.\u003C/p\u003E\u003Cp\u003EIt\u0027s setup so that solar panels output the same amount of charge at Kerbin as they would in the stock model.\u003C/p\u003E\n"},{"CreatedByName":"rabidninjawombat","CreatedById":108889,"CreatedDateTime":"2015-02-05T01:25:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaalidas\u0022 data-cite=\u0022Gaalidas\u0022\u003E\u003Cdiv\u003Esure.... we\u0027ll go with that answer. \u003Cem\u003ETotal gibberish to me, but it sounds geeky enough to work.\u003C/em\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELOL im with you on that Gaalidas. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E total gibberish. \u003C/p\u003E\u003Cp\u003EBut on topic : Thanks! If it works like the OP reads, then im assuming it adjusts power output based on distance from Kerbol. Which is awesome for my current realism playthrough.\u003C/p\u003E\n"},{"CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2015-02-05T02:11:27Z","Content":"\n\u003Cp\u003ECool mod. I did notice however that if the solar power becomes low enough it displays as NaN, aka Not a Number. NaNs can cause issues farther down the line, since the rest of the game can no longer interact mathematically with the NaN. So maybe just set it to zero after a certain cut off point. If it\u0027s just a text thing and there\u0027s actually a number behind the NaN text, I still recommend switching it to 0. Some people just don\u0027t know what NaN means, but 0 is always clear.\u003C/p\u003E\n"},{"CreatedByName":"Drew Kerman","CreatedById":103177,"CreatedDateTime":"2015-02-05T02:50:13Z","Content":"\n\u003Cp\u003EHey CaptRobau I expected you to show up here eventually but surprised you didn\u0027t mention \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/65033-Science-Revisited-New-and-improved-ways-to-do-science-1-3-1\u0022 rel=\u0022external nofollow\u0022\u003Eyour own solar panel curve tweak\u003C/a\u003E. So how does this compare? Because I\u0027m using yours now.\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-02-05T02:56:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003EHey CaptRobau I expected you to show up here eventually but surprised you didn\u0027t mention \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/65033-Science-Revisited-New-and-improved-ways-to-do-science-1-3-1\u0022 rel=\u0022external nofollow\u0022\u003Eyour own solar panel curve tweak\u003C/a\u003E. So how does this compare? Because I\u0027m using yours now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI can\u0027t find the source for Science Revisited so I can\u0027t comment on technical differences, but I would strongly recommend *not* using this mod right now if you\u0027re happy with whatever other mod that alters solar panel curves. This thing is still very beta, and I wouldn\u0027t be surprised if there are potentially game-breaking bugs (like the NaN bug mentioned above, that\u0027s potentially very serious) or serious incompatibilities with other mods.\u003C/p\u003E\n"},{"CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2015-02-05T10:17:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaiiden\u0022 data-cite=\u0022Gaiiden\u0022\u003E\u003Cdiv\u003EHey CaptRobau I expected you to show up here eventually but surprised you didn\u0027t mention \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/65033-Science-Revisited-New-and-improved-ways-to-do-science-1-3-1\u0022 rel=\u0022external nofollow\u0022\u003Eyour own solar panel curve tweak\u003C/a\u003E. So how does this compare? Because I\u0027m using yours now.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe basics of this mod work very well from what I\u0027ve been able to spot. Mine is a good placeholder, but once this mod has every issue worked out it\u0027ll be a far better implementation of a realistic power curve.\u003C/p\u003E\n"},{"CreatedByName":"MAKC","CreatedById":57186,"CreatedDateTime":"2015-02-05T10:32:00Z","Content":"\n\u003Cp\u003EIs this needed for RSS?\u003C/p\u003E\n"},{"CreatedByName":"jamespicone","CreatedById":125714,"CreatedDateTime":"2015-02-05T10:41:00Z","Content":"\n\u003Cp\u003EThis has no association with RSS.\u003C/p\u003E\u003Cp\u003EEDIT: Okay and I just realised why you might think that. Consider it a poor name choice. I\u0027ll have a chat with NathanKell at some point about whether he minds before either changing the name or adding a disclaimer.\u003C/p\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-02-05T11:12:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jamespicone\u0022 data-cite=\u0022jamespicone\u0022\u003E\u003Cdiv\u003EI can\u0027t find the source for Science Revisited so I can\u0027t comment on technical differences, but I would strongly recommend *not* using this mod right now if you\u0027re happy with whatever other mod that alters solar panel curves. This thing is still very beta, and I wouldn\u0027t be surprised if there are potentially game-breaking bugs (like the NaN bug mentioned above, that\u0027s potentially very serious) or serious incompatibilities with other mods.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIndeed, I beleive KSPI also does something similar (distance-from-kerbol-squared) and therefore might conflict\u003C/p\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2015-02-05T22:26:21Z","Content":"\n\u003Cp\u003EAwww maaaan - here I thought you\u0027d made a nifty mod that let engineers go out and fix broken solar panels :C\u003C/p\u003E\n"},{"CreatedByName":"AngelLestat","CreatedById":58968,"CreatedDateTime":"2015-02-06T02:19:46Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jamespicone\u0022 data-cite=\u0022jamespicone\u0022\u003E\u003Cdiv\u003EMuch simpler.\u003Cp\u003EAt the moment, stock solar panels have a charge rate, a piecewise linear curve giving falloff with distance, and the sun\u0027s AOA. Output is chargeRate * curve.evaluate(distance) * cos (sunAOA).\u003C/p\u003E\u003Cp\u003EI just replace the piecewise linear curve with 1/r**2, by changing charge rate every tick to r**2 / curve.evaluate\u00AE.\u003C/p\u003E\u003Cp\u003EIt\u0027s setup so that solar panels output the same amount of charge at Kerbin as they would in the stock model.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk I see.\u003C/p\u003E\u003Cp\u003ESo you can change dll with module manager?\u003C/p\u003E\u003Cp\u003EOne question, what unit use squad for this?\u003C/p\u003E\u003Cp\u003EI would love to have kw/h, also is the only way to balance how much energy you get from a X area of PV.\u003C/p\u003E\u003Cp\u003EAbout the decreasing efficiency due heat, I guess this is only noticeable at distances closer than mojo, beyond that the power collected stop increase to the square, and starts to increase more linear until certain point were it will start to decrease again.\u003C/p\u003E\u003Cp\u003EBut I guess is a bit pointless to include this effect. In fact, there are PV cells that are made for higher concentrated flux working at \u002B500c\u003C/p\u003E\n"}]}