{"TopicId":193411,"ForumId":29,"TopicTitle":"How to get number of overheating parts?","CreatedByName":"Niami","CreatedById":202894,"CreatedDateTime":"2020-04-26T16:10:06Z","PageNum":1,"Articles":[{"CreatedByName":"Niami","CreatedById":202894,"CreatedDateTime":"2020-04-26T16:10:06Z","Content":"\n\u003Cp\u003E\nIs it possible to get the number of overheating\u00A0parts? Also the amount each part is overheating? I\u0027ve looked through the possible variables and classes but none seem to be what I\u0027m looking for. PartThermalData seems like the right class but I can\u0027t get the right variable from it.\u00A0\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2020-04-28T04:11:19Z","Content":"\n\u003Cp\u003E\nI would suspect you would need to iterate over the parts in the vessel checking each Part.temperature against Part.maxTemp. I don\u0027t know how the over temp works but had always thought that the over heat bars appeared when you got to some percentage of maxTemp and then the part would explode when temp\u0026gt;maxTemp (Though there\u0027s a tempExplodeChance that\u0027s suggestive). If you haven\u0027t seen it the KSP API site can be useful - Link to the \u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_part.html#a219b09817945dd8ff171ae0cac59c0e4\u0022 rel=\u0022\u0022\u003EKSP API Part\u003C/a\u003E page.\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_part.html#a2e7a4bcc7aed96d56d02b68299d179f9\u0022 rel=\u0022\u0022\u003E\u003Cspan\u003E \u003C/span\u003E\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"CBase","CreatedById":189476,"CreatedDateTime":"2020-04-28T11:33:12Z","Content":"\n\u003Cp\u003E\nPartThermalData is way more messy about internal heat model than you need, Part class has it all.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever do note that overheating has two separate aspects: Core and Skin temperature, so to get for instance the most critical percentage (vessel should be current Vessel object):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\tdouble maxTempRatio = vessel.parts.Max(p =\u0026gt; Math.Max(p.temperature / p.maxTemp, p.skinTemperature / p.skinMaxTemp) );\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nOr to get count above some limit\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\tdouble limit = 0.7;\n\tdouble maxTempRatio = vessel.parts.Count(p =\u0026gt; (p.temperature \u0026gt;  p.maxTemp * limit || p.skinTemperature \u0026gt; p.skinMaxTemp * limit) );\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIf you need both at once, you should actually code the foreach loop on parts.\n\u003C/p\u003E\n\u003Ctable\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd\u003E\n\u00A0\n\u003C/td\u003E\n\u003C/tr\u003E\u003C/tbody\u003E\u003C/table\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-04-28T11:36:32Z\u0022 title=\u002204/28/2020 11:36  AM\u0022 data-short=\u00224 yr\u0022\u003EApril 28, 2020\u003C/time\u003E by CBase\u003C/strong\u003E\n\u003Cbr\u003Ereplaced division in loop with multiplication\n\u003C/span\u003E\n"}]}