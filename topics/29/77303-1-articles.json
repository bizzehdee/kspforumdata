{"TopicId":77303,"ForumId":29,"TopicTitle":"Access existing instance of KSPAddon?","CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-11T18:44:37Z","PageNum":1,"Articles":[{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-11T18:44:37Z","Content":"\n\u003Cp\u003EI have two KSPAddons in the same namespace. I need one to be able to talk to the existing instance of the other. I\u0027m unclear on how KSP creates and manages instances of the Addons. Both are instantiated presumably by KSP at the SpaceCentre:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPAddonFixed(KSPAddon.Startup.SpaceCentre, false, typeof(blah))]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI just don\u0027t know how to get the instance of one, from the other, so that I can make calls to it.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-07-11T20:03:00Z","Content":"\n\u003Cp\u003EIf you use the public static bool like I was suggesting, since it\u0027s static, you can just do Classname.variablename from the other class. Static variables exist globally, not per class instance, so you don\u0027t have to get the instance.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-11T20:10:00Z","Content":"\n\u003Cp\u003EEither C# is very different from C\u002B\u002B in class vs instance concepts, or KSP is doing odd things.\u003C/p\u003E\u003Cp\u003EMy understanding of the process (and please correct me where I might be wrong) is something like this:\u003C/p\u003E\u003Cp\u003E1) A class registers itself with whatever KSP uses to manage Addons, and specifies when it should be instantiated, and whether it should be destroyed after, or left alone.\u003C/p\u003E\u003Cp\u003E2) When the proper scene happens, KSP Addon manager creates an instance of the registered class, and calls its Start() method. Start() is an instance method, not a class method.\u003C/p\u003E\u003Cp\u003EThat instance now exists and will stay (since I tell it to) until KSP exists. It will not get recreated again when the scene loads again. Now since it is an instance, how would another Class B\u0027s act of setting the static variable mean anything to the already existing instance?\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-07-11T23:20:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Agathorn\u0022 data-cite=\u0022Agathorn\u0022\u003E\u003Cdiv\u003E1) A class registers itself with whatever KSP uses to manage Addons, and specifies when it should be instantiated, and whether it should be destroyed after, or left alone.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot quite. The \u0022once\u0022 parameter of KSPAddon tells KSP whether to instantiate it every time that scene starts, or only for the first time. It will always destroy it when the scene ends. But you can use Unity\u0027s \u0022GameObject.DontDestroyOnLoad(this);\u0022 in your constructor to prevent destruction. Then you also set your static class variable to \u0022this\u0022, and use that from that point on.\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-12T01:16:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003ENot quite. The \u0022once\u0022 parameter of KSPAddon tells KSP whether to instantiate it every time that scene starts, or only for the first time. It will always destroy it when the scene ends. But you can use Unity\u0027s \u0022GameObject.DontDestroyOnLoad(this);\u0022 in your constructor to prevent destruction. Then you also set your static class variable to \u0022this\u0022, and use that from that point on.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you for correcting me on that. That is a very important difference.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-07-12T01:29:18Z","Content":"\n\u003Cp\u003EI\u0027d suggest leaving at as start once = false, and then have a public static bool notFixed = true\u003C/p\u003E\u003Cp\u003Ethen in the Start(), do if(notFixed) { notFixed = false; reload; } \u003C/p\u003E\u003Cp\u003EThen in the Switcher code, whenever it switches, do SpaceCenterFixer.notFixed = true;\u003C/p\u003E\u003Cp\u003E(or whatever your class name was; I forget \u0026gt;.\u0026gt; )\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-07-12T01:33:47Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EI\u0027d suggest leaving at as start once = false, and then have a public static bool notFixed = true\u003Cp\u003Ethen in the Start(), do if(notFixed) { notFixed = false; reload; } \u003C/p\u003E\u003Cp\u003EThen in the Switcher code, whenever it switches, do SpaceCenterFixer.notFixed = true;\u003C/p\u003E\u003Cp\u003E(or whatever your class name was; I forget \u0026gt;.\u0026gt; )\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYep this is pretty much exactly what i\u0027m doing now that I understand where my misunderstanding was.\u003C/p\u003E\n"}]}