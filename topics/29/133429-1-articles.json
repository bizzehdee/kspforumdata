{"TopicId":133429,"ForumId":29,"TopicTitle":"Help with understanding how wings work","CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-03-03T19:07:36Z","PageNum":1,"Articles":[{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-03-03T19:07:36Z","Content":"\n\u003Cp\u003E\nHi all,\n\u003C/p\u003E\n\u003Cp\u003E\nI am trying to create a folding wing for a space probe, something that would fold up like a solar panel for compact storage, and then unfold to generate lift.\u00A0I\u0027m hoping an expert on wings like \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275006\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0022\u003E@NathanKell\u003C/a\u003E\u00A0or a modder with experience creating wings can answer a few questions, as I\u0027ve not created a wing in KSP before. Let\u0027s say for the sake of argument that the folded wing has lift characteristics equal to the Wing Connector Type C, and the unfolded wing has lift characteristics equal to the Wing Connector Type B. For reference, the Type B wing has the following PartModule:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E\tMODULE\n\t{\n\t\tname = ModuleLiftingSurface\n\t\tuseInternalDragModel = True\n\t\tdeflectionLiftCoeff = 2.0\n\t\tdragAtMaxAoA = 0.5\n\t\tdragAtMinAoA = 0.0\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nAnd the Type C:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E\tMODULE\n\t{\n\t\tname = ModuleLiftingSurface\n\t\tuseInternalDragModel = True\n\t\tdeflectionLiftCoeff = 1\n\t\tdragAtMaxAoA = 0.25\n\t\tdragAtMinAoA = 0.0\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nNotice that the Type C, which is half the size of the Type B, has half the lifting capability, which should give you an idea of how I want the folding wing to work.\n\u003C/p\u003E\n\u003Cp\u003E\nQuestions\n\u003C/p\u003E\n\u003Cp\u003E\n1. If I change the ModuleLiftingSurface values at runtime so that the folded wing has parameters equal to the Type C, and the deployed with has parameters equal to the Type B, will KSP honor the changes and change the wing\u0027s lift?\n\u003C/p\u003E\n\u003Cp\u003E\n2. Do I understand correctly that KSP calculates a wing\u0027s lift based upon its drag cube and ModuleLiftingSurface?\n\u003C/p\u003E\n\u003Cp\u003E\nNow for the fun part, assuming my answer to question 2 is \u0022yes.\u0022 From what I can see in a parachute part, there are PartModules that appear to change the drag cube for the parachute. These are ModuleDragModifier modules. Here is an example from the Mk2-R radial chute:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E\tMODULE\n\t{\n\t\tname = ModuleDragModifier\n\t\tdragCubeName = SEMIDEPLOYED\n\t\tdragModifier = 1\n\t}\n\tMODULE\n\t{\n\t\tname = ModuleDragModifier\n\t\tdragCubeName = DEPLOYED\n\t\tdragModifier = 58\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nQuestions\n\u003C/p\u003E\n\u003Cp\u003E\n3. How is dragModifier applied to the drag cube?\n\u003C/p\u003E\n\u003Cp\u003E\n4. How would I go about switching the drag cube for the folding wing? The only thing I can think of is to use semiDeployedDragModifier.enabled = false; deployedDragModifier.enabled = true; How does KSP change the drag cube for parachutes?\n\u003C/p\u003E\n\u003Cp\u003E\nSo basically the idea of the folding wing is that, assuming that drag cubes play a part in calculating lift, the folded wing would have a small drag cube and lift capability, while the unfolded wing has the fully deployed drag cube and lift capability.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, can somebody point me to a post on what the values of a drag cube mean?\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for your help! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2016-03-03T19:18:51Z","Content":"\n\u003Cp\u003E\n1. Yes.\n\u003C/p\u003E\n\u003Cp\u003E\n2. Wings don\u0027t use drag cubes for drag. Note how the dragModel is set to none or override in those wing configs.\n\u003C/p\u003E\n\u003Cp\u003E\n3. When PartDatabase.cfg is created, the dragModifier is multiplied into the drag terms of all cube faces.\n\u003C/p\u003E\n\u003Cp\u003E\n4. If you use a ModuleAnimateGeneric to handle the animation, it\u0027s done for you. If you\u0027re writing your own animation module, implement IMultipleDragCubes and set the cube weights yourself. But remember, if you\u0027re making a wing, the \u0027drag\u0027 cube is really only relevant for thermo, not drag.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFor an overview of drag cubes and their terms, see:\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/107254-overhauls-for-10/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-03-03T19:24:54Z","Content":"\n\u003Cp\u003E\nOhhhhh, so all I need to do for a folding wing is to 1) use ModuleAnimateGeneric to let the game calculate the drag profile, and 2) modify the deflectionLiftCoeff and the dragAtMaxAoA/dragAtMinAoA values? That would make things much easier. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnd thanks for the reference on drag cubrs. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-03T19:25:20Z\u0022 title=\u002203/03/2016 07:25  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 3, 2016\u003C/time\u003E by Angel-125\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2016-03-03T19:39:57Z","Content":"\n\u003Cp\u003E\nNo, only deflectionLiftCoeff is used these days. You just need to modify it based on the animation state. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-03-03T19:53:54Z","Content":"\n\u003Cp\u003E\nThank you, that really clarifies things. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-03-03T21:06:30Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275006\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0022\u003E@NathanKell\u003C/a\u003E\u00A0another question: can you change the dragModelType at runtime, and the CoLOffset?\n\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2016-03-03T21:11:49Z","Content":"\n\u003Cp\u003E\nYes and yes.\n\u003C/p\u003E\n"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-03-03T21:13:26Z","Content":"\n\u003Cp\u003E\nExxxcelent *evil grin* \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2016-03-04T02:42:03Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0026amp;do=hovercard\u0022 data-mentionid=\u002275006\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/75006-nathankell/\u0022\u003E@NathanKell\u003C/a\u003EWoot! My prototype deployable wing works!\n\u003C/p\u003E\n\u003Cp\u003E\nHere is my prototype wing stowed:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg src=\u0022http://i.imgur.com/tmqy6Jg.png\u0022 class=\u0022ipsImage\u0022 alt=\u0022tmqy6Jg.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAnd here it is deployed:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg src=\u0022http://i.imgur.com/mqH94Tg.png\u0022 class=\u0022ipsImage\u0022 alt=\u0022mqH94Tg.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nWith this test wing I have the deflectionLiftCoeff controlled independently of the animation; now it\u0027s just a matter of linking the two together, and of course creating a proper wing..\n\u003C/p\u003E\n\u003Cp\u003E\nThanks again! \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}