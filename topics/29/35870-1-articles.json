{"TopicId":35870,"ForumId":29,"TopicTitle":"Orbital Decay","CreatedByName":"CluelessModeler","CreatedById":58172,"CreatedDateTime":"2013-07-04T12:48:56Z","PageNum":1,"Articles":[{"CreatedByName":"CluelessModeler","CreatedById":58172,"CreatedDateTime":"2013-07-04T12:48:56Z","Content":"\n\u003Cp\u003EHey there folks!\u003C/p\u003E\u003Cp\u003EI\u0027m taking a stab at developing a plug-in. I want to simulate orbital decay, using the law of exponential decay, displayed as a function. A(t)=A\u003Csub\u003E0\u003C/sub\u003Ee\u003Csup\u003Ekt\u003C/sup\u003E. Now, knowing that formula... What types of codes should I use? Or is there some sort of hidden option programmed into the game that I don\u0027t know about?\u003C/p\u003E\u003Cp\u003EOr is this just a lost cause?\u003C/p\u003E\u003Cp\u003EThanks in advance for any help anyone can give me!!!\u003C/p\u003E\n"},{"CreatedByName":"AceMgy","CreatedById":50962,"CreatedDateTime":"2013-07-04T17:05:26Z","Content":"\n\u003Cp\u003EI actually wanted to develop something similar. In the game floating point errors accumulate quickly and can change orbits considerably over time. My idea was just to consider this unavoidable shifting around as orbital decay and give the players tools to manage it. I wanted a module that I could dock to my station, which would then be entered with a target orbit through a menu. It would then automatically (or give data so you could do it manually, not decided yet) correct the orbit using the appropriate amount of propellant available.\u003C/p\u003E\u003Cp\u003EThe problem is that orbits do not decay/change in KSP when you\u0027re not within 2.5 km of the craft. This is the nature of the on-rails simulation that is pretty necessary: you\u0027d suffer horrible lag without it. Plus it means orbits are easily predictable for rendezvous and stuff. Your idea would not work unless you were focusing the craft 100% of the time (I believe, correct me if there\u0027s a work around somebody), which would be pretty boring. You\u0027d only suffer atmospheric drag while controlling that specific craft.\u003C/p\u003E\u003Cp\u003EAnyways, I\u0027m not a modder, but I can do basic programming and I\u0027ve been browsing the tutorials to figure out how to make such a mod myself. This was inspired when I tried to do something that KSP just couldn\u0027t do, as documented in my old \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/38185-Is-it-possible-to-keep-relative-distance-between-two-objects-in-the-same-orbit\u0022 rel=\u0022external nofollow\u0022\u003E\u0022How To\u0022 thread\u003C/a\u003E. I\u0027m mostly posting to say that I\u0027d be extremely interested in any mod that incorporates orbital decay. I have some ideas how to get around the on-rails limitations, though it wouldn\u0027t be 100% accurate.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-04T17:11:28Z\u0022 title=\u002207/04/2013 05:11  PM\u0022 data-short=\u002211 yr\u0022\u003EJuly 4, 2013\u003C/time\u003E by AceMgy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-07-04T17:25:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AceMgy\u0022 data-cite=\u0022AceMgy\u0022\u003E\u003Cdiv\u003EYour idea would not work unless you were focusing the craft 100% of the time (I believe, correct me if there\u0027s a work around somebody), which would be pretty boring. \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs far as I know packed craft aren\u0027t set to read only, they simply have the physics system turned off. So while you can\u0027t apply a force to them and expect anything to happen you shouldn\u0027t have any trouble editing their orbital parameters. It\u0027s easy enough to check, just try hyperedit on an uncontrolled craft and see if it\u0027ll move it - you\u0027d be doing exactly the same thing but more gradually.\u003C/p\u003E\n"},{"CreatedByName":"AceMgy","CreatedById":50962,"CreatedDateTime":"2013-07-04T17:52:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022EndlessWaves\u0022 data-cite=\u0022EndlessWaves\u0022\u003E\u003Cdiv\u003EAs far as I know packed craft aren\u0027t set to read only, they simply have the physics system turned off. So while you can\u0027t apply a force to them and expect anything to happen you shouldn\u0027t have any trouble editing their orbital parameters. It\u0027s easy enough to check, just try hyperedit on an uncontrolled craft and see if it\u0027ll move it - you\u0027d be doing exactly the same thing but more gradually.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo your plan would be to periodically check all orbiting craft, calculate the amount of orbital decay based on mission time, then teleport them to their new location? Sounds good but I hope it doesn\u0027t overload the game with those calculations: we don\u0027t want the game to stutter every time this is done. Shouldn\u0027t cause too much problem with rendezvous unless you\u0027re planning one way in advance.\u003C/p\u003E\u003Cp\u003EAnd I\u0027m assuming it\u0027d be easy to modify the craft\u0027s propellant reserves every time this is done? My rough idea for doing my orbital correction module (in horrible, sloppy pseudo-code) was:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPlayer initiates timewarp / changes focus\u003Cbr\u003E-\u0026gt; Calculate difference from target orbit\u003Cbr\u003E-\u0026gt; Calculate theoretical delta-v needed to correct\u003Cbr\u003E\u003Cbr\u003Eif propellant sufficient:\u003Cbr\u003E-\u0026gt; Subtract amount of propellant required for delta-v\u003Cbr\u003E-\u0026gt; Teleport craft to proper orbit\u003Cbr\u003E-\u0026gt; Resume timewarp / change of focus\u003Cbr\u003Eelse:\u003Cbr\u003E-\u0026gt; Cancel orbital correction\u003Cbr\u003E-\u0026gt; Warning message: \u0022Your station is out of propellant!\u0022\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut that\u0027s assuming you can\u0027t teleport a craft when it isn\u0027t focused or the game is in timewarp. So could I just wrap this up into a big timestep, say 5 seconds or more? That\u0027d be real-time, not game-time, as timewarp would lag horribly otherwise.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-07-04T17:54:43Z\u0022 title=\u002207/04/2013 05:54  PM\u0022 data-short=\u002211 yr\u0022\u003EJuly 4, 2013\u003C/time\u003E by AceMgy\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-07-04T18:47:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AceMgy\u0022 data-cite=\u0022AceMgy\u0022\u003E\u003Cdiv\u003ESo your plan would be to periodically check all orbiting craft, calculate the amount of orbital decay based on mission time, then teleport them to their new location?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou always keep the orbit passing through the current point, but you change the direction of travel so it passes closer to the planet in the next frame/second than it would otherwise have done. I\u0027m guessing you\u0027ll have to change the eccentricity (increase AP to PE, decrease PE to AP) and shrink the SMA, although I\u0027m not sure if you\u0027ll need to change the other parameters as well.\u003C/p\u003E\n"},{"CreatedByName":"AceMgy","CreatedById":50962,"CreatedDateTime":"2013-07-04T19:45:42Z","Content":"\n\u003Cp\u003EWell yeah, for atmospheric drag all you have to do is reduce the magnitude of the velocity vector by a certain factor dependent on atmospheric pressure. It\u0027s direction wouldn\u0027t change as there\u0027s no torque involved. The orbital parameters would fix themselves...\u003C/p\u003E\u003Cp\u003EAnd now I realize that the persistence file might save the orbital parameters and not the velocity vectors of each craft. I\u0027m at work so I can\u0027t check it, but it would simply be a matter of calculation if that\u0027s the case. I can look into it deeper when I get home, but it would be the same as burning a little bit retrograde. Your apoapsis / periapsis drop a bit and the arguement of periapsis moves if you\u0027re not at either the apoapsis or periapsis. Gonna have to get my old textbook out.\u003C/p\u003E\n"},{"CreatedByName":"CluelessModeler","CreatedById":58172,"CreatedDateTime":"2013-07-05T04:09:32Z","Content":"\n\u003Cp\u003EThis got way too complicated way too fast...\u003C/p\u003E\u003Cp\u003EI\u0027ll hammer out more details in the morning. I appreciate the feedback though! Looks like this is going to be quite a project.\u003C/p\u003E\n"},{"CreatedByName":"CluelessModeler","CreatedById":58172,"CreatedDateTime":"2013-07-05T15:25:42Z","Content":"\n\u003Cp\u003EI wonder if it would be possible to do this just making it an extension of the existing atmospheric drag that is in game. If I could figure out how to apply that code to a craft when it\u0027s out of the atmosphere, and make it just incredibly minute, if that would work. Otherwise, figuring out how to input that formula into the equation would be interesting.\u003C/p\u003E\u003Cp\u003EOn the other hand, if I were to just make it an option to engage orbital decay at will. So, if you get tired of it, you can just turn it off and forget about it. (Like for timewarp, so it doesn\u0027t take you down immediately.) That way, you\u0027d only have to worry about it as long as you\u0027re operating that craft.\u003C/p\u003E\n"}]}