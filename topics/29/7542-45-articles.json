{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":45,"Articles":[{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-06-29T15:39:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003EIs there anything I need to do to have a persistent scenario module?\u003Cp\u003EI tried making an empty one that just logs when it enters a function, but onload and onsave are never called.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou need something to initialize it the first time. This will set which game scenes it will run in and store that in the persistent file. After that it should run onload and on save whenever you go to the relevant scene.\u003C/p\u003E\u003Cp\u003EMost of the Scenario Modules I\u0027ve seen use basically the same method, so I would just check around.\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-06-29T15:41:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EYou need something to initialize it the first time. This will set which game scenes it will run in and store that in the persistent file. After that it should run onload and on save whenever you go to the relevant scene.\u003Cp\u003EMost of the Scenario Modules I\u0027ve seen use basically the same method, so I would just check around.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, so basically that\u0027s what Taranis is doing with \u003Ca href=\u0022https://github.com/taraniselsu/TacLifeSupport/blob/master/Source/TacLifeSupport.cs#L48\u0022 rel=\u0022external nofollow\u0022\u003Ethis method\u003C/a\u003E, right?\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-06-29T16:20:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003EOk, so basically that\u0027s what Taranis is doing with \u003Ca href=\u0022https://github.com/taraniselsu/TacLifeSupport/blob/master/Source/TacLifeSupport.cs#L48\u0022 rel=\u0022external nofollow\u0022\u003Ethis method\u003C/a\u003E, right?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYep. The if statement is the initial setup, the else statement is presumably used in case any extra game scenes need to be added in later versions.\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-07-02T19:20:47Z","Content":"\n\u003Cp\u003EUh, maybe I\u0027m doing something wrong here.\u003C/p\u003E\u003Cp\u003EI am shamelessly copying Taranis\u0027 code to inject my module into the game (hi!), but at the beginning of each scene, I get this popup:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/S3NZ3Zw.png\u0022 alt=\u0022S3NZ3Zw.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EAlso, in the persistent file, there is this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        SCENARIO\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = TestScenarioModule\u003Cbr\u003E\t\tscene = 5, 7, 6, 9\u003Cbr\u003E\t\taSavedValue = modified and resumed from the persistent save\u003Cbr\u003E\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI should also note that I tried logging when my module executes OnLoad and OnSave, and got no signs of life from it. \u003Ca href=\u0022http://pastebin.com/TsTaRGtH\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s the code in pastebin\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-07-02T19:44:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003EUh, maybe I\u0027m doing something wrong here.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re going to smack your head on the desk in about five seconds when I bold some stuff for you\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003EAlso, in the persistent file, there is this:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        SCENARIO\u003Cbr\u003E\t{\u003Cbr\u003E\t\tname = [SIZE=5][SIZE=3][B]TestScenarioModule[/B][/SIZE][/SIZE]\u003Cbr\u003E\t\tscene = 5, 7, 6, 9\u003Cbr\u003E\t\taSavedValue = modified and resumed from the persistent save\u003Cbr\u003E\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[snip]\u003Cbr\u003EProtoScenarioModule psm = game.scenarios.Find(s =\u0026gt; s.moduleName == typeof([SIZE=5][B]TestScenarioModule[/B][/SIZE]).Name);\u003Cbr\u003E            if (psm == null)\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log(\u0022Adding the scenario module.\u0022);\u003Cbr\u003E                psm = game.AddProtoScenarioModule(typeof([B][SIZE=5]TestScenarioModule[/SIZE][/B]), GameScenes.SPACECENTER,\u003Cbr\u003E                    GameScenes.FLIGHT, GameScenes.EDITOR, GameScenes.SPH);\u003Cbr\u003E[...snip]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic class [SIZE=3][B][SIZE=5]TestSM [/SIZE][/B][/SIZE]: ScenarioModule\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo you\u0027re actually adding a ScenarioModule called TestScenarioModule to the game. Unluckily for you, the game has one and it apparently writes a test value to the persistent file and opens a popup to display it. Your ScenarioModule, TestSM, never runs so of course you never see any output\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-07-02T19:51:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003E...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022http://canitbesaturdaynow.com/images/fpics/3199/1264896890198.jpg\u0022 alt=\u00221264896890198.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u0022I\u0027m too tired to study, let\u0027s code!\u0022 - clueless me 1 hour ago\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-03T01:20:10Z","Content":"\n\u003Cp\u003EBecause it has come up and I am doing exactly the same thing, here is the code that I am using to do this.\u003C/p\u003E\u003Cp\u003EPosting it so Ippo can see how I do it and for other people to comment if they see something wonky.\u003C/p\u003E\u003Cp\u003EThis loads a scenario called OSJFlight\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Text;\u003Cbr\u003Eusing System.Reflection;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace OnScreenJoyStick\u003Cbr\u003E{\u003Cbr\u003E    [KSPAddon(KSPAddon.Startup.SpaceCentre, false)] //install our scenario module. is a partmodule so all calculations can be done in it, no need for a seperate plugin class in the scene\u003Cbr\u003E    class OSJMainMenu : MonoBehaviour\u003Cbr\u003E    {\u003Cbr\u003E        public void Start()\u003Cbr\u003E        {\u003Cbr\u003E            var game = HighLogic.CurrentGame;\u003Cbr\u003E            ProtoScenarioModule psm = game.scenarios.Find(s =\u0026gt; s.moduleName == typeof(OSJFlight).Name);\u003Cbr\u003E            if (psm == null)\u003Cbr\u003E            {\u003Cbr\u003E                psm = game.AddProtoScenarioModule(typeof(OSJFlight), GameScenes.FLIGHT);\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E   public class OSJFlight : ScenarioModule //this runs on flight scene start, no need for the KSPAddon as it is already loaded by the code in the SpaceCenter screen.\u003Cbr\u003E    {\u003Cbr\u003E//All your plug in code here. Start, Update, FixedUpdate, OnSave, OnLoad, etc. all work as they do in a partmodule.\u003Cbr\u003E    }\u003Cbr\u003E   }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe only thing about this is that I could not get the scenario to load if I used KSPAddon.Startup.MainMenu instead of .SpaceCenter.\u003C/p\u003E\u003Cp\u003ENot an issue for my current project as it runs in the flight scene only, but if what you are doing requires code to run on game start (such as a new career game with some sort of mission maybe?), that issue would have to be figured out.\u003C/p\u003E\u003Cp\u003ESo, how close am I to how other people are doing this?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-07-03T01:56:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThe only thing about this is that I could not get the scenario to load if I used KSPAddon.Startup.MainMenu instead of .SpaceCenter.\u003Cp\u003ENot an issue for my current project as it runs in the flight scene only, but if what you are doing requires code to run on game start (such as a new career game with some sort of mission maybe?), that issue would have to be figured out.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s because ScenarioModules are created on a per-persistent file basis. That\u0027s how the actual Scenarios ingame are made; they\u0027re just save games that somebody has manually added a savegame-specific ScenarioModule to. The main menu isn\u0027t associated with any particular game session so it wouldn\u0027t make sense for one to be loaded there.\u003C/p\u003E\u003Cp\u003EIf you did need to run code before game start, I\u0027d probably go with a separate, non-ScenarioModule KSPAddon that persisted between scenes. Once the player has loaded up a game, you could do whatever it is you wanted: store some info you collected during the main menu into your ScenarioModule, call a function or set up some parameters, etc. Then kill it and run your logic as normal\u003C/p\u003E\n"},{"CreatedByName":"Timbo","CreatedById":64420,"CreatedDateTime":"2014-07-03T15:29:32Z","Content":"\n\u003Cp\u003EI\u0027m trying to make a plug-in to automatically post screenshots to imgur. Is there an API I can use to take screenshots at will, or a way to hook into the F1 keypress event so I know a screenshot has been taken?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-03T15:50:40Z","Content":"\n\u003Cp\u003EI don\u0027t know about the API, but this will detect if the screenshot key is pressed. (Variables names not exact as this is from memory.)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic void Update()\u003Cbr\u003E{\u003Cbr\u003Eif(gameSettings.Screenshot.KeyCode != KeyCode.None \u0026amp; input.getkeydown(gameSettings.Screenshot.KeyCode))\u003Cbr\u003E{\u003Cbr\u003Eprint(\u0022ScreenShot!\u0022);\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m pulling the screenshot key from the settings file here, that way if the player binds screenshot to another key, it will still be recognized.\u003C/p\u003E\u003Cp\u003EYou also need to check that the keycode is not None as input.GetKeyDown returnes KeyCode.None if there is no key pressed that update. (I think, it may also return null, testing would be required.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-03T15:55:51Z\u0022 title=\u002207/03/2014 03:55  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 3, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Timbo","CreatedById":64420,"CreatedDateTime":"2014-07-03T16:28:49Z","Content":"\n\u003Cp\u003EThanks for the reply, that\u0027s along the lines of what I am looking for. But, how do I access the gameSettings object? Searching through the object browser, I see GameSettings is a class within Assembly-CSharp, however I don\u0027t see a \u0022Screenshot\u0022 member within it. Furthermore, I can\u0027t seem to access anything Assembly-CSharp from within my code, although there is a reference to it in my project.\u003C/p\u003E\u003Cp\u003EI feel as though I am missing something key here, such as which classes should I be exploring to learn how to interact with the game? Is there a dev wiki that I haven\u0027t been able to find? I am using some sample code I found here \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/56053-Example-plugin-projects-to-help-you-get-started\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/56053-Example-plugin-projects-to-help-you-get-started\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-03T17:30:19Z","Content":"\n\u003Cp\u003EAlright, just to check you have the following set as dependencies correct?\u003C/p\u003E\u003Cp\u003EAssembly-CSharp\u003C/p\u003E\u003Cp\u003EUnityEngine\u003C/p\u003E\u003Cp\u003EAssembly-CSHarp-firstpass \u0026lt;- Optional, this is more for interacting with the GUI then the 3D game space.\u003C/p\u003E\u003Cp\u003Eand then you added \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing UnityEngine;\u003C/pre\u003E\u003Cp\u003E at the top of your project underneath all the other using statements that get added by default?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2014-07-03T21:38:31Z","Content":"\n\u003Cp\u003E-removed, found answer myself-\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-03T22:06:33Z\u0022 title=\u002207/03/2014 10:06  PM\u0022 data-short=\u002210 yr\u0022\u003EJuly 3, 2014\u003C/time\u003E by parameciumkid\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Timbo","CreatedById":64420,"CreatedDateTime":"2014-07-04T04:55:17Z","Content":"\n\u003Cp\u003EYes, but I can\u0027t seem to access anything within the Assembly-CSharp class. In fact, Intellisense does not show it as an option, and typing \u0022Assembly-CSharp.gameSettings\u0022 generates an error in the IDE. Is this something to do with the hyphen in the class name? I am more of a VB guy and am relatively new to C# so perhaps I\u0027m doing something stupid.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-07-04T05:57:41Z","Content":"\n\u003Cp\u003EIt\u0027s not a class. Here\u0027s a minimal example to get you started:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace TestPlugin\u003Cbr\u003E{\u003Cbr\u003E    [KSPAddon(KSPAddon.Startup.Flight, false)]\u003Cbr\u003E    public class ScreenshotTest : MonoBehaviour\u003Cbr\u003E    {\u003Cbr\u003E        void Update()\u003Cbr\u003E        {\u003Cbr\u003E            if (GameSettings.TAKE_SCREENSHOT.GetKeyDown())\u003Cbr\u003E                Debug.Log(\u0022A screenshot was just taken!\u0022);\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you have your references set up correctly, that will compile and you can start to tweak it as you like\u003C/p\u003E\n"},{"CreatedByName":"Alex P","CreatedById":72376,"CreatedDateTime":"2014-07-07T17:49:35Z","Content":"\n\u003Cp\u003EHi,\u003C/p\u003E\u003Cp\u003EI have this in a part module attached to an RCS block. It doesn\u0027t add any resources (I have tried Oxidizer also). I have also tried commenting out the if statement, and it still doesn\u0027t work. I\u0027ve tried putting the code in OnFixedUpdate also. I got the part.RequestResource to work in another part module. What am I doing wrong here? Would OnFixedUpdate work better?\u003C/p\u003E\u003Cp\u003Eprivate void OnDraw(){\u003C/p\u003E\u003Cp\u003E if (CompressAir == true) {\u003C/p\u003E\u003Cp\u003E part.RequestResource(\u0022IntakeAir\u0022, -10);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EOne more thing,\u003C/p\u003E\u003Cp\u003E[KSPEvent(guiActive = true, guiName = \u0022Stop Compressing\u0022, active = true)]\u003C/p\u003E\u003Cp\u003Epublic void StopCompression(){\u003C/p\u003E\u003Cp\u003E CompressAir = false;\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EI want to change \u0022active = true\u0022 to \u0022active = CompressAir\u0022 so the \u0022Stop Compressing\u0022 button is only active when it is compressing. Instead, it gives me an error. How do I fix this?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-07T18:37:11Z","Content":"\n\u003Cp\u003EOn your first question about resources, I\u0027m not sure as I have not dealt with them a lot. My only thought is do you have resource storage anywhere? Even just an placeholder with a storage size of 0?\u003C/p\u003E\u003Cp\u003EI remember reading something about that if there is no storage location present on the vessel, the resource does not generate as there is no place for KSP to put it. To get around this you have to add storage to your part, just with a maxSize of 0 so it does not store any resource.\u003C/p\u003E\u003Cp\u003EOn the KSPEvent active question, I believe it is because the KSPEvent is pre-compiled and so the CompressAir variable does not exist. Instead, in your code where you change the state of CompressAir, add a KSPEvent.active = true (or false) as needed. (Syntax from memory and not correct.)\u003C/p\u003E\u003Cp\u003EHope that helps.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Alex P","CreatedById":72376,"CreatedDateTime":"2014-07-07T20:01:28Z","Content":"\n\u003Cp\u003EIt was attached to a half empty fuel tank, so I don\u0027t think that was the problem. I don\u0027t know much about KSPEvent, so I\u0027ll have to read up on that. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-07-07T20:51:46Z","Content":"\n\u003Cp\u003EActually it\u0027s because KSPEvent is an attribute, so when you declare it like that you can only use compile-time constants. You cannot use your variable directly, you will need to set the value each time:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[COLOR=#333333]private void OnDraw(){[/COLOR]\u003Cbr\u003E[COLOR=#333333]if (CompressAir == true) {[/COLOR]\u003Cbr\u003E[COLOR=#333333]part.RequestResource(\u0022IntakeAir\u0022, -10);\u003Cbr\u003E[/COLOR]this.Events[\u0022StopCompression\u0022].active = true;\u003Cbr\u003E[COLOR=#333333]}[/COLOR]\u003Cbr\u003E[COLOR=#333333]}[/COLOR]\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E[COLOR=#333333][KSPEvent(guiActive = true, guiName = \u0022Stop Compressing\u0022, active = true)][/COLOR]\u003Cbr\u003E[COLOR=#333333]public void StopCompression(){[/COLOR]\u003Cbr\u003E[COLOR=#333333]CompressAir = false;\u003Cbr\u003E[/COLOR]this.Events[\u0022StopCompression\u0022].active = false;\u003Cbr\u003E[COLOR=#333333]}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-07-08T22:47:38Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EHow can I run some code when a part collides?\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003ESpecifically, I would like to run some calculations based on the impact velocity. I see that Part has three OnCollision* methods, but how can I get an event out of them in a PartModule?\u003C/span\u003E\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-07-08T23:00:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003EHow can I run some code when a part collides?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think GameEvents does have some collision hooks.\u003C/p\u003E\n"},{"CreatedByName":"Timbo","CreatedById":64420,"CreatedDateTime":"2014-07-09T01:25:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EIt\u0027s not a class. Here\u0027s a minimal example to get you started:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace TestPlugin\u003Cbr\u003E{\u003Cbr\u003E    [KSPAddon(KSPAddon.Startup.Flight, false)]\u003Cbr\u003E    public class ScreenshotTest : MonoBehaviour\u003Cbr\u003E    {\u003Cbr\u003E        void Update()\u003Cbr\u003E        {\u003Cbr\u003E            if (GameSettings.TAKE_SCREENSHOT.GetKeyDown())\u003Cbr\u003E                Debug.Log(\u0022A screenshot was just taken!\u0022);\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you have your references set up correctly, that will compile and you can start to tweak it as you like\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you, that helped. Can you do me another favor and list the main classes I should explore to learn more about interacting with the game?\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-07-10T03:46:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Timbo\u0022 data-cite=\u0022Timbo\u0022\u003E\u003Cdiv\u003EThank you, that helped. Can you do me another favor and list the main classes I should explore to learn more about interacting with the game?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFriendy reminder that decompiling is prohibited by the EULA and that this could put you into some serious trouble. However, you can use an assembly browser to look at the declarations of public members of the KSP classes without looking at the underlying code, which is permitted. And for what you need, it depends on what you want to do. FlightGlobals and HighLogic are useful classes, though most of what you will use will be Unity classes, and the docs for those are all around the internet.\u003C/p\u003E\n"},{"CreatedByName":"Alex P","CreatedById":72376,"CreatedDateTime":"2014-07-10T18:36:08Z","Content":"\n\u003Cp\u003EHi again,\u003C/p\u003E\u003Cp\u003EFor some reason, this code doesn\u0027t seem to be working.\u003C/p\u003E\u003Cp\u003Epublic override void OnFixedUpdate(){\u003C/p\u003E\u003Cp\u003E print (\u0022This should say something...\u0022);\u003C/p\u003E\u003Cp\u003E if (CompressAir == true) {\u003C/p\u003E\u003Cp\u003E print (\u0022Should be compressing air...\u0022);\u003C/p\u003E\u003Cp\u003E part.RequestResource(\u0022Oxidizer\u0022, -10);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EI think that should spam the log with at least one message every FixedUpdate. But, it doesn\u0027t, even when it\u0027s OnDraw. The KSPEvent buttons are able to print things to the log, but why can\u0027t I do this OnDraw or OnFixedUpdate?\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-07-10T18:43:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alex P\u0022 data-cite=\u0022Alex P\u0022\u003E\u003Cdiv\u003EHi again,\u003Cp\u003EFor some reason, this code doesn\u0027t seem to be working.\u003C/p\u003E\u003Cp\u003Epublic override void OnFixedUpdate(){\u003C/p\u003E\u003Cp\u003E print (\u0022This should say something...\u0022);\u003C/p\u003E\u003Cp\u003E if (CompressAir == true) {\u003C/p\u003E\u003Cp\u003E print (\u0022Should be compressing air...\u0022);\u003C/p\u003E\u003Cp\u003E part.RequestResource(\u0022Oxidizer\u0022, -10);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003EI think that should spam the log with at least one message every FixedUpdate. But, it doesn\u0027t, even when it\u0027s OnDraw. The KSPEvent buttons are able to print things to the log, but why can\u0027t I do this OnDraw or OnFixedUpdate?\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EUse Debug.Log to write stuff to the log.\u003C/p\u003E\u003Cp\u003EAlso, please use the \u003C/p\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E tags when posting code.\u003C/pre\u003E\n"}]}