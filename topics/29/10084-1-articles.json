{"TopicId":10084,"ForumId":29,"TopicTitle":"[Plugin Part] KSP 14.4 - Accountant - Alpha v0.05 [May 7, 2012]","CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-02T01:14:52Z","PageNum":1,"Articles":[{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-02T01:14:52Z","Content":"**Accountant - Alpha v0.05**\n\nAuthor: sarcazmotron3040, based on the [Kerbal Engineer 0.2](http://kerbalspaceprogram.com/forum/index.php?topic=9917.0) plugin by jhultgre\n\nExample of the plugin calculating the cost for [Daedalus](http://kerbalspaceprogram.com/forum/index.php?topic=6912.0) by ccik\n\nv0.01\n\n\u003E \n\u003E ![TfRP0.png](http://i.imgur.com/TfRP0.png)\n\nv0.04 - Now works with custom parts thanks to FlutteryChicken!\n\n\u003E ![7TQn6.png](http://i.imgur.com/7TQn6.png)\n\nv0.05 - Cleaned up Interface - Changed Part to be a Command Module\n\n\u003E ![6bQGJ.jpg](http://i.imgur.com/6bQGJ.jpg)\n\nI was inspired by jhultgre\\\u0027s Kerbal Engineer 0.2 plugin to start what I hope will become an eventual economic system.\n\nThis plugin currently only works with stock parts. I have no idea how to grab the cost of a part from within KSP, so for now, it reads a static CSV file that contains the part name, cost and title located in the Plugins/Economy folder named parts.csv. If anyone can help with determining the cost of parts from within KSP, I would very much appreciate it. For now, if you want the Accountant to work with custom parts, you\\\u0027ll have to add them to that file manually. I can write a utility that will auto-populate that file when run by reading the parts folder, but would rather not if there is a more elegant way of obtaining part costs.\n\nThis plugin works with any part, including custom parts you may have in your game, thanks to help from FlutteryChicken.\n\nThis plugin does not currently have a custom model that goes with it. I\\\u0027m slightly better at coding than I am at modeling, so you will have to either copy an existing part and modify it to work with this plugin, or create your own part. I trust you know how to do this already. I\\\u0027m using the stock decoupler, RCS Fuel Tank Command Module as the model for the time being.\n\nFuture plans\n\n\u003E \n\u003E - [li]Budget that adds to Available Funds on periodic basis[/li]  \n\u003E [li]Public Interest that modifies Budget positively or negatively as a percentage[/li]  \n\u003E [li]Deduction of cost of rocket from Available Funds[/li]  \n\u003E [li]Milestones (can only be obtained once for each) that increase Budget Amount (by $) and Public Interest when reached[/li]  \n\u003E [li]Records and Record-Breaking which modifies Public Interest positively. The higher the difference between the current and previous record has a bigger impact[/li]  \n\u003E [li]Inactivity causes Public Interest to decline[/li]  \n\u003E [li]Loss of crew reduces Available Funds as penalty. Side-effect, if funds are sufficiently negative, will cause loss of Public Interest due to inactivity[/li]  \n\u003E [li]Mission types (deliver passengers or payloads, perform maintenance, etc)- unlocked as Milestones are reached.[/li]  \n\u003E [li]Prototype costs - Parts initially are more expensive. As more of that part are produced, the cost decreases.[/li]  \n\u003E [li]Some parts/functions unlocked after exceeding certain metrics. Just an example: Automated circularizing orbit function only available after completing five manual circularized orbit missions (To obtain research necessary to automate that function) Another example: More efficient engines become available after so many of the first model have been produced. A friend came up with this idea.[/li]  \n\u003E [li]Random Part Failure - very low chance, unless Available Funds happens to be less than the cost of the rocket when launching, then chance for Part Failure increases. The bigger the difference between Available Funds and Ship cost, the higher the chance. This represents taking shortcuts or under funding to produce the part(s). Type of failure depends on the kind of part affected.[/li]  \n\u003E [li]Model for the part[/li]  \n\u003E [li]Option to launch rockets in simulation mode, to test out new designs before actually spending time and money on the real thing. If possible have different scenarios available to simulate.[/li]  \n\u003E [li]Parts take time to produce and assemble[/li]\n\u003E \n\u003E \n\u003E \n\nSuggestions/Comments are always welcome. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nChangelog\n\n\u003E \n\u003E **v0.05**\n\u003E \n\u003E Changed part to Command Module\n\u003E \n\u003E Cleaned up GUI for displaying cost\n\u003E \n\u003E Moved drawGUI to onBackup()\n\u003E \n\u003E **v0.04**\n\u003E \n\u003E Added beginning of finance system\n\u003E \n\u003E Modified code to enable this plugin to work with any part, even custom parts. Thanks goes to FlutteryChicken for this!\n\u003E \n\u003E **v0.03**\n\u003E \n\u003E Changed temp model for another one that seemed to make more sense.\n\u003E \n\u003E **v0.02**\n\u003E \n\u003E Added temp model for part.\n\u003E \n\u003E **v0.01**\n\u003E \n\u003E Initial Release\n\u003E \n\u003E"},{"CreatedByName":"ping111","CreatedById":8679,"CreatedDateTime":"2012-05-02T01:17:26Z","Content":"This is amazing! This could be a big help for RP and the experimental campaign mode! ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-05-02T02:40:42Z","Content":"Awesome!! This is what the forum campaign has needed for weeks!!!\n\nThe ship files have cost in the .craft file so can you read from that instead of your \\\u0027economy\\\u0027 file? I\\\u0027m no coder - just the bright idea\\\u0027s man. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) On the other hand, by having a seperate file I can set my own costs for parts. That\\\u0027s cool too! Maybe for parts missing from the economy file, you can read from the .craft and set that \\\u0027default\\\u0027 value in the economy file but allow someone to change that default value if needed. It will involve a \\\u0027write\\\u0027 to the economy file of course.\n\nI haven\\\u0027t d/l the file yet, is this a part that sits on the ship? How does it work? Guess I\\\u0027ll find out soon enough!!"},{"CreatedByName":"NovaSilisko","CreatedById":3897,"CreatedDateTime":"2012-05-02T02:59:51Z","Content":"Pretty much everything in your planned features list is planned for the game itself, so you may be wasting your time."},{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-02T03:19:14Z","Content":"\u003E \n\u003E Awesome!! This is what the forum campaign has needed for weeks!!!\n\u003E \n\u003E The ship files have cost in the .craft file so can you read from that instead of your \\\u0027economy\\\u0027 file? I\\\u0027m no coder - just the bright idea\\\u0027s man. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) On the other hand, by having a seperate file I can set my own costs for parts. That\\\u0027s cool too! Maybe for parts missing from the economy file, you can read from the .craft and set that \\\u0027default\\\u0027 value in the economy file but allow someone to change that default value if needed. It will involve a \\\u0027write\\\u0027 to the economy file of course.\n\u003E \n\u003E I haven\\\u0027t d/l the file yet, is this a part that sits on the ship? How does it work? Guess I\\\u0027ll find out soon enough!!\n\nI think you meant the part.cfg files for each part has the cost and other info listed. In any case, you are correct that I can grab the values I need from them. I put those values in a CSV as it is quicker to read from. I can write a utility to append to the CSV file for non-standard parts, but as I said before, if those values can be retrieved from the game as it is running (since it has already loaded those part data into memory), that would be the most optimal solution.\n\nThis is a part that sits on the ship. There is no model yet and I may post an update with a stock model, as a temporary placeholder, if that\\\u0027s not against any rules. How does it work? At it\\\u0027s most basic level, it goes to each part of the ship, identifies it, keeps track of how many of that part exist on the ship, then multiplies that number by the cost to get the item total and adds all of those values together to get a grand total. It certainly isn\\\u0027t something that will fly your ship! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-02T03:20:29Z","Content":"\u003E \n\u003E Pretty much everything in your planned features list is planned for the game itself, so you may be wasting your time.\n\nIt\\\u0027s my time to waste. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-05-02T03:30:43Z","Content":"Ah - yes - the part.cfg. I stand corrected. And if we only did mods for features NOT planned in the game then MechJeb would never have been invented.\n\nI\\\u0027m confused when you say this is a part that sits on the ship but there is no model yet. Is it an invisible part? Do you mean no \\*custom\\* model yet? Anyway - I\\\u0027m just stoked this now exists!!! I shall explore it in detail later on. 8)"},{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-02T03:52:39Z","Content":"\u003E \n\u003E Ah - yes - the part.cfg. I stand corrected. And if we only did mods for features NOT planned in the game then MechJeb would never have been invented.\n\u003E \n\u003E I\\\u0027m confused when you say this is a part that sits on the ship but there is no model yet. Is it an invisible part? Do you mean no \\*custom\\* model yet? Anyway - I\\\u0027m just stoked this now exists!!! I shall explore it in detail later on. 8)\n\nYeah, I meant no custom model yet. I have re-uploaded the mod which uses the decoupler as a temp model for this plugin."},{"CreatedByName":"Thobewill10","CreatedById":6148,"CreatedDateTime":"2012-05-02T04:33:46Z","Content":"Dammit. I had just started an external version of the same thing, with a campaign mode planned and everything. I just finished my cost calculator jar."},{"CreatedByName":"sjwt","CreatedById":9268,"CreatedDateTime":"2012-05-02T07:02:19Z","Content":"Sweet, thanks!"},{"CreatedByName":"FlutteryChicken","CreatedById":22399,"CreatedDateTime":"2012-05-03T11:20:39Z","Content":"In your \\\u0027walkParts\\\u0027 method change the line\n\n\\\u0027totalCost \u002B= Convert.ToInt32(namedPartsCost[p.name]);\\\u0027\n\nto\n\n\\\u0027totalCost \u002B= p.partInfo.cost;\\\u0027\n\nthat should get the cost of the part without having to load up the cfg files seperately"},{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-03T15:19:56Z","Content":"\u003E \n\u003E In your \\\u0027walkParts\\\u0027 method change the line\n\u003E \n\u003E \\\u0027totalCost \u002B= Convert.ToInt32(namedPartsCost[p.name]);\\\u0027\n\u003E \n\u003E to\n\u003E \n\u003E \\\u0027totalCost \u002B= p.partInfo.cost;\\\u0027\n\u003E \n\u003E that should get the cost of the part without having to load up the cfg files seperately\n\nThanks for that. Works perfectly!"},{"CreatedByName":"FlutteryChicken","CreatedById":22399,"CreatedDateTime":"2012-05-03T15:56:02Z","Content":"No problem, just started having a play with creating a plugin yesterday, but if you need a hand give a shout out."},{"CreatedByName":"Justin8Ball","CreatedById":9094,"CreatedDateTime":"2012-05-08T15:35:41Z","Content":"For your model, could it be like Jeb autopilot panel device?"},{"CreatedByName":"togfox","CreatedById":17083,"CreatedDateTime":"2012-05-08T21:31:54Z","Content":"This is looking nicer every day. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-08T23:44:44Z","Content":"\u003E \n\u003E For your model, could it be like Jeb autopilot panel device?\n\nIf you mean something that can attach to a surface of the rocket, sure. I\\\u0027ll look into adding another part that works with this plugin which isn\\\u0027t a command module for the next update. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Justin8Ball","CreatedById":9094,"CreatedDateTime":"2012-05-11T01:13:33Z","Content":"Hows the accountant coming along?"},{"CreatedByName":"ping111","CreatedById":8679,"CreatedDateTime":"2012-05-11T02:38:45Z","Content":"Umm, did I install this correctly?\n\nI built a rocket normally, and though the window showed up, nothing appeared on it. Then when I launched, it took a few seconds to take off, and when it did, it left the pod behind, floating in midair! Any help?"},{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-11T03:40:14Z","Content":"\u003E \n\u003E Hows the accountant coming along?\n\nExpect updates to be sporadic, unannounced and generally buggy."},{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-11T03:43:38Z","Content":"\u003E \n\u003E Umm, did I install this correctly?\n\u003E \n\u003E I built a rocket normally, and though the window showed up, nothing appeared on it. Then when I launched, it took a few seconds to take off, and when it did, it left the pod behind, floating in midair! Any help?\n\nYou could try removing the plugin and any parts that are part of the plugin, then reinstall. Let me know how that goes."},{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-11T04:16:04Z","Content":"Here\\\u0027s a sneak peek at a side effect I had not anticipated with the stuff I was experimenting with.\n\n\u003E ![xWG62.jpg](http://i.imgur.com/xWG62.jpg)\n\u003E Where\\\u0027s Jeb and Bill??? 8)"},{"CreatedByName":"Justin8Ball","CreatedById":9094,"CreatedDateTime":"2012-05-11T04:54:22Z","Content":"Maybe Bob just got tired of Jebs flying."},{"CreatedByName":"Amram","CreatedById":8067,"CreatedDateTime":"2012-05-15T08:58:51Z","Content":"love this thing, especially now that i don\\\u0027t need to maintain an external CSV for part costs.\n\nCan I ask a few additions to the future plans?\n\ninflationary value for the base funding. after playing for X amount of time, all things equal, your income should be greater. Essentially just one more small percentage multiplier, which is applied every payday, regardless of other factors. mimics increases in the Kerbal national budget, which leaves you with the same percentage, but a larger and larger value over time.\n\nA two tier public interest system. Achieving milestones nets you a one time payout, yes, but it would also boost public interest alot more. \u0027Yawn, another rocket launch\u0027 vs \u0027they went to the MUN!?!?\u0027. Payouts are essentially government subsidy or private benefactors supporting your successes, but public interest is like voters influencing politicians to devote more of the budget to you. Simply accomplishing something decent, like putting satellites in orbit for the first however many satellites it counts for should net a P.I. increase, but nothing like the first time you do something.\n\nA continuous depletion of P.I. Essentially you lose x amount every payday, and this needs to be offset by accomplishing something the previous pay day. It should be small enough that any successful mission that provides at least the lower P.I. increase can offset this for a couple of paydays, in this manner, doing nothing for long periods will begin to hurt your overall income, and take you a few good missions to recover.\n\nSince you mention planning to include production and prototyping:\n\nan R\u0026D duration, coupled with a development chain. Just a list will do, this leads to that which leads to that and that, which....etc\n\nthe first part of the chain is specified as unlocked or not, trigger an R\u0026D somehow(VAB menu?), wait out the R\u0026D, then you can prototype it(use it an higher cost)\n\nlater items might take longer.\n\nanyways, you\\\u0027re already planning pretty much everything i\\\u0027d be looking for in such a plugin. just thought i\\\u0027d put these out there and see if maybe you\\\u0027d add them into your plans or not.\n\nIm not trying to rush you or anything, just having it total the cost is a bonus to me any my little sideline campaigns i play out."},{"CreatedByName":"sarcazmotron3040","CreatedById":22773,"CreatedDateTime":"2012-05-16T02:07:05Z","Content":"Thank you for the comments and suggestions Amram!\n\nI have not thought of inflation, but it should be something I can implement as a configurable value. I\\\u0027ll add it to my \u0027to do\u0027 list. Thanks!\n\nSome of the things I am doing with public interest is relating the amount to the number of Kerbals involved in the flight (which can range between 0 and 3, though more may be possible, haven\\\u0027t tested 4\u002B yet) and increasing it when records are broken (highest altitude, speed, etc). So unmanned missions initially generate no public interest, however, since the command module is cheaper (no life support, seats, etc. needed), it is easier to add other parts and break certain records than with manned pods. I am thinking of keeping track of manned vs. unmanned records, so that manned records, even though they may be less than unmanned records, should generate a lot more Public Interest.\n\nI have implemented a kind of inactivity penalty to public interest for not launching flights, and all the variables involved (penalty amount, time for inactivity, etc) are configurable.\n\nR\u0026D is on hold until I start Random Part Failure as I am not sure if I can stop someone from placing parts they have not researched yet, but prototype pricing is in (and configurable) for the next update. There are some bugs with how symmetry is affecting the prototype price calculations, but I may decide that those bugs are actually \u0027features.\u0027 Not sure yet. I do like your idea of making R\u0026D time based.\n\nHere are some screenshots of my progress so far:\n\n\u003E \n\u003E ![sMcq2.png](http://i.imgur.com/sMcq2.png)\n\u003E \n\u003E Unmanned pod. Cheap to build.\n\u003E \n\u003E ![S5tp6.png](http://i.imgur.com/S5tp6.png)\n\u003E \n\u003E Single Seater. A little more expensive to produce, but now there\\\u0027s a skilled pilot in control of the craft!\n\u003E \n\u003E ![BiEC6.png](http://i.imgur.com/BiEC6.png)\n\u003E \n\u003E Prototype pricing can be seen here, along with a cleaner GUI. Prototype pricing can be configured to be on or off.\n\u003E \n\u003E ![yY1Wj.png](http://i.imgur.com/yY1Wj.png)\n\u003E \n\u003E Finance Tab. Time to Payday is configurable. The Advance Time button does not actually advance the game\\\u0027s universe time currently. Haven\\\u0027t been able to figure that out yet aside from editing the persistent.sfs file and I only want to do that as a last resort if I can\\\u0027t figure out another way. You can see that Public Interest is currently not very good. Had a few missions where the parachute didn\\\u0027t open fast enough...\n\u003E \n\u003E ![ukd7C.png](http://i.imgur.com/ukd7C.png)\n\u003E \n\u003E Statistics Tab. Eventually will include records. The onTouchdown() event does not seem to work at all, which is why it does not show any touchdowns. I will have to figure out a different way of detecting when that occurs. Kerbonaut heroes are those who paid the ultimate sacrifice for Kerbalkind...\n\u003E \n\u003E ![PsAPn.png](http://i.imgur.com/PsAPn.png)\n\u003E \n\u003E Milestones Tab. Right now, it\\\u0027s very simple, but I plan on expanding on it as I learn more.\n\u003E \n\u003E The other two tabs (missions and configuration) currently do nothing. Once I learn how to retrieve player input from text boxes I will implement the config tab. Right now, I\\\u0027m configuring by hand-editing a csv file.\n\u003E \n\u003E ![ABEPY.png](http://i.imgur.com/ABEPY.png)\n\u003E \n\u003E At the launch pad we see that the lone Kerbonaut awaits liftoff. He\\\u0027s in a single seater pod. There are also two and three seat variants, each more costly than the last.\n\u003E \n\u003E \n\nThanks again for your comments and suggestions!"},{"CreatedByName":"Thobewill10","CreatedById":6148,"CreatedDateTime":"2012-05-16T02:11:08Z","Content":"This looks to be shaping up excellently!"}]}