{"TopicId":102909,"ForumId":29,"TopicTitle":"KSP Plugin debugging and profiling for Visual Studio and Monodevelop on all OS","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-03-29T11:09:00Z","PageNum":3,"Articles":[{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-11-10T01:08:31Z","Content":"Still working great in 1.0.5, just needed a couple small additions and some changes to existing values to get the patcher working again\n\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\u0003\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\u0004\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\u0005\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\u0006\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\a\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\b\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\t\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022FlightIntegrator\u0022, \u0022sunLayerMask\u0022, 24, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022GameSettings\u0022, \u0022INPUT\\_DEVICES\u0022, 2, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u0019\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u001A\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u001B\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u001C\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u001D\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022MapView\u0022, \u0022\\r\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022ModuleAblator\u0022, \u0022\\b\\b\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022PhysicsGlobals\u0022, \u0022\\u001d\\u0002\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_MaterialQuadRelative\u0022, \u0022\\u001e\\u0002\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_MaterialQuadRelative\u0022, \u0022\\u001f\\u0002\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_MaterialQuadRelative\u0022, \u0022 \\u0002\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_OceanFX\u0022, \u0022\\n\\u0003\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_OceanFX\u0022, \u0022\\v\\u0003\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_OceanFX\u0022, \u0022\\f\\u0003\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_OceanFX\u0022, \u0022\\r\\u0003\u0022, 8, \u0022Awake\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022SkySphereControl\u0022, \u0022\\u0002\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022SkySphereControl\u0022, \u0022\\u0003\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022SkySphereControl\u0022, \u0022\\u0004\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022SunShaderController\u0022, \u0022\\b\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022SunShaderController\u0022, \u0022\\t\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022SunShaderController\u0022, \u0022\\n\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022SunShaderController\u0022, \u0022\\v\u0022, 8, \u0022Start\u0022);\n\u003E \n\u003E MoveInitializerIntoAwake(asm, \u0022UnderwaterTint\u0022, \u0022colorID\u0022, 8, \u0022Awake\u0022);"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2015-11-12T09:09:22Z","Content":"\u003E \n\u003E Still working great in 1.0.5, just needed a couple small additions and some changes to existing values to get the patcher working again\n\u003E \n\u003E \n\u003E \n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\u0003\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\u0004\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\u0005\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\u0006\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\a\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\b\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022AtmosphereFromGround\u0022, \u0022\\t\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022FlightIntegrator\u0022, \u0022sunLayerMask\u0022, 24, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022GameSettings\u0022, \u0022INPUT\\_DEVICES\u0022, 2, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u0019\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u001A\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u001B\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u001C\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022HighLogic\u0022, \u0022\\u001D\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022MapView\u0022, \u0022\\r\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022ModuleAblator\u0022, \u0022\\b\\b\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022PhysicsGlobals\u0022, \u0022\\u001d\\u0002\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_MaterialQuadRelative\u0022, \u0022\\u001e\\u0002\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_MaterialQuadRelative\u0022, \u0022\\u001f\\u0002\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_MaterialQuadRelative\u0022, \u0022 \\u0002\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_OceanFX\u0022, \u0022\\n\\u0003\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_OceanFX\u0022, \u0022\\v\\u0003\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_OceanFX\u0022, \u0022\\f\\u0003\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022PQSMod\\_OceanFX\u0022, \u0022\\r\\u0003\u0022, 8, \u0022Awake\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022SkySphereControl\u0022, \u0022\\u0002\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022SkySphereControl\u0022, \u0022\\u0003\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022SkySphereControl\u0022, \u0022\\u0004\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022SunShaderController\u0022, \u0022\\b\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022SunShaderController\u0022, \u0022\\t\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022SunShaderController\u0022, \u0022\\n\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022SunShaderController\u0022, \u0022\\v\u0022, 8, \u0022Start\u0022);\n\u003E \u003E \n\u003E \u003E MoveInitializerIntoAwake(asm, \u0022UnderwaterTint\u0022, \u0022colorID\u0022, 8, \u0022Awake\u0022);\n\nI\u0027m obviously doing something wrong.. I\u0027ve re-compiled the patcher using above. When I try to run it it hangs.... nothing...\n\nYes - using .NET3.5 running it in the managed folder, etc."},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-11-12T13:38:44Z","Content":"It\u0027s only hung on me if Mono.Cecil wasn\u0027t present. [Here\u0027s](https://github.com/xEvilReeperx/KspDevModePatcher/releases/download/v1.0.5/KspDevModePatcher_1.0.5.zip) my copy"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2015-11-12T18:38:04Z","Content":"\u003E \n\u003E It\u0027s only hung on me if Mono.Cecil wasn\u0027t present. [Here\u0027s](https://github.com/xEvilReeperx/KspDevModePatcher/releases/download/v1.0.5/KspDevModePatcher_1.0.5.zip) my copy\n\nThanks, I figured out the problem. It was my virus checker."},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2015-11-23T15:49:02Z","Content":"Hey guys, I have followed the instructions and I managed to get my KSP into Devmode, patched the Mono.cecil, created an MDB file for my mod.  \n\nHowever, when I start up KSP and Visual Studio 2015, I can not attach to the running Unity process. In VS2015 Debug-\u003EAttach Unity Debugger shows no Unity processes running.  \n\nI can check with [CODE]netstat /b /a[/CODE], and indeed it shows that the KSP.exe process has a port in the \u0022correct\u0022 range open (around 55000). But even if I add 127.0.0.1:\u003Cport\u003E manually in the VS2015 dialog, the only thing that happens is that the mouse pointer turns into the waiting circle and then back to normal again.\u003Cbr\u003E\nI don\u0027t really know where to look for errors here...\u003Cbr\u003E\n\u003Cbr\u003E\nDoes anyone have Ideas how to fix that?\u003Cbr\u003E\n\u003Cbr\u003E\nps.:\u003Cbr\u003E\nWhat do the numbers in \u0022PlayerConnectionConfigFile\u0022 mean? I have such a file in \u003Cksp\u003E/Launcher_Data, but the number is 792067676 instead of 803286173, like in the OP.\n\u003C/ksp\u003E\u003C/port\u003E"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-11-23T21:51:11Z","Content":"[quote name=\u0027Kobymaru\u0027]Hey guys, I have followed the instructions and I managed to get my KSP into Devmode, patched the Mono.cecil, created an MDB file for my mod.  \n\n[snip]  \n\n...  \n\nWhat do the numbers in \u0022PlayerConnectionConfigFile\u0022 mean? I have such a file in \u003Cksp\u003E/Launcher_Data, but the number is 792067676 instead of 803286173, like in the OP.[/QUOTE]\u003Cbr\u003E\nDid you create a PlayerConnectionConfigFile inside \u003Cksp\u003E/KSP_Data with the contents from the OP?\n\u003C/ksp\u003E\u003C/ksp\u003E"},{"CreatedByName":"Kobymaru","CreatedById":107372,"CreatedDateTime":"2015-11-24T13:18:47Z","Content":"[quote name=\u0027xEvilReeperx\u0027]Did you create a PlayerConnectionConfigFile inside \u003Cksp\u003E/KSP_Data with the contents from the OP?[/QUOTE]\u003Cbr\u003E\nI did not! I created it in \u003Cksp\u003E itself. Thanks for the hint!\u003Cbr\u003E\n\u003Cbr\u003E\nAw man, this stuff is awesome :D Proper debugging for Plugins has got to be the best thing that happened to the Modding community in a while.\u003Cbr\u003E\n\u003Cbr\u003E\nps.: All the info is in the thread, but I feel that the OP needs some updating.\u003Cbr\u003E\n\u003Cbr\u003E\n[COLOR=\u0022silver\u0022][SIZE=1]- - - Updated - - -[/SIZE][/COLOR]\u003Cbr\u003E\n\u003Cbr\u003E\nMaybe sarbian can use this updated text for debugging. I added the patching step with a download to the patching tool and one note about converting PDB files that come out of Visual Studio 2015\u003Cbr\u003E\n\u003Cbr\u003E\n[spoiler=\u0022New text for OP\u0022]As we all know debugging plugin in KSP is mostly done with endless spam of Debug.Log or a bunch of custom windows we have to build. We also have [URL=\u0022http://forum.kerbalspaceprogram.com/threads/73586\u0022]angavrilov method[/URL] but it require to recompile the whole mono and is a bit scary. So here is the result of a couple of days of experiment on my side to get a simple method working.\u003Cbr\u003E\n\u003Cbr\u003E\nSo how do we get debugging to work for KSP ? Simply by using the tool that unity provides us. Unity as a debugging system for game that runs in development mode, which is not the case of KSP by default. \u003Cbr\u003E\n\u003Cbr\u003E\nSo here is how to get that (Linux and OSX use read that part and I will explain the difference for you further down)\u003Cbr\u003E\n\u003Cbr\u003E\n[SIZE=3][B]KSP[/B][/SIZE]\u003Cbr\u003E\n- First you need a [URL=\u0022http://unity3d.com/get-unity/download/archive\u0022]Unity installation[/URL] using the exact same version as your current KSP ( For 0.90 you need Unity 4.5.5f1). That version is in the first line of the output_log.txt/Player.log.\u003Cbr\u003E\n\u003Cbr\u003E\n- Go to your Unity install for that version ( \u0022C:\\Program Files (x86)\\Unity\\Editor\u0022 most likely) and then go in the \u0022Data\\PlaybackEngines\\windowsstandalonesupport\\Variations\\win32_development\u0022 sub-directory. Copy the \u0022player_win.exe\u0022 file to your KSP dev install (next to KSP.exe)\u003Cbr\u003E\n\u003Cbr\u003E\n- Rename your KSP.exe into something else (or delete it). Rename \u0022player_win.exe\u0022 in \u0022KSP.exe\u0022\u003Cbr\u003E\n\u003Cbr\u003E\n- In KSP_Data create a text file named \u0022PlayerConnectionConfigFile\u0022 (no extension !) and paste that line into it (it makes the mono debugger starts its listening port): [code]listen 803286173 1 1[/code]\u003Cbr\u003E\n\u003Cbr\u003E\n- Launch that KSP and check that you have \u0022Developement Build\u0022 in your lower right corner\u003Cbr\u003E\n\u003Cbr\u003E\n- Your KSP will hang now with some errors, because you need to patch Mono.Cecil.dll. Close it, and download the current Patcher from [URL=\u0022https://github.com/seanmcdougall/KspDevModePatcher/releases\u0022]here[/URL]. Unpack it and place KspDevModePatcher.exe into \u003Cksp\u003E/KSP_Data/Managed. Run the patcher from the command line. If the patching succeeded, your KSP should start up properly.\u003Cbr\u003E\n\u003Cbr\u003E\n- Compile your plugin in \u0022Debug\u0022 configuration to get the \u0022MyPlugin.dll\u0022 [B]AND[/B] the \u0022MyPlugin.pdb\u0022 (for VS) or the \u0022MyPlugin.dll.mdb\u0022 (MonoDevelop or mono cmd line) . Copy them in your usual GameData dir\u003Cbr\u003E\n\u003Cbr\u003E\n- If you compile with VS you have to generate the mono debug information. From a command line (edit the KSP path). [B]That cmd line must be run from the same dir as the dll[/B] : [code]\u0022C:\\Program Files\\Unity\\Editor\\Data\\MonoBleedingEdge\\bin\\cli.bat\u0022 \u0022C:\\Program Files\\Unity\\Editor\\Data\\MonoBleedingEdge\\lib\\mono\\4.0\\pdb2mdb.exe\u0022 MyPlugin.dll[/code]\u003Cbr\u003E\nNote that if you use Visual Studio 2015, you need a newer version of the pdb2mdb executable than is provided in the Unity 4.6.4f1 (KSP 1.0.5) installation. For that, get a recent version of Mono from [URL=\u0022http://www.mono-project.com/download/\u0022]here [/URL]and install it somewhere. The pdb executable will be in \u003Cmonoinstalldirector\u003E\\Mono\\bin .\u003Cbr\u003E\n\u003Cbr\u003E\n- You will get a \u0022MyPlugin.dll.mdb\u0022 file in next to your dll. \u003Cbr\u003E\n\u003Cbr\u003E\nWe are now ready on KSP side. To make your life easier you should add the copy of the dll, pdb and generation of the mdb in your project post build script since they need to be refreshed for each build.\u003Cbr\u003E\n\u003Cbr\u003E\n[SIZE=3][B]Visual Studio [/B][/SIZE]\u003Cbr\u003E\nYou need a version that allows plugin. So either a 201x Pro or [URL=\u0022https://www.visualstudio.com/en-us/products/visual-studio-community-vs.aspx\u0022]Visual Studio Community 2013[/URL] (it is free). You also have to install the [URL=\u0022http://unityvs.com/\u0022]Unity VS[/URL] extension. It is free too. Get the one for your VS version and install it.\u003Cbr\u003E\nOnce you have that you will have a \u0022Attach Unity Debugger\u0022 in the Debug menu. So launch KSP and use that menu to attach VS to it. You should get an orange bar at the bottom of VS and the context should switch to debugging. You now have all the usual debugging tools (breakpoint, step by step, watches)...\u003Cbr\u003E\n\u003Cbr\u003E\n[SIZE=3][B]MonoDevelop[/B][/SIZE]\u003Cbr\u003E\nIn the \u0022Run\u0022 menu you have \u0022Attach to Process\u0022. It opens a windows where you should have \u0022Unity Debugger\u0022 selected on the lower part and you can select your KSP process to attach to. It should switch to the debugging context\u003Cbr\u003E\n\u003Cbr\u003E\n[SIZE=3][B]Profiling[/B][/SIZE]\u003Cbr\u003E\nIf you have a Unity Pro license you can attach the profiler to KSP. Unfortunately you can\u0027t attach the Unity 5 profiler (which is free) to a Unity 4.x process. Unless there is an other magic trick that I did not find.\u003Cbr\u003E\n\u003Cbr\u003E\n[SIZE=3][B]Linux and OSX[/B][/SIZE]\u003Cbr\u003E\nThe steps are the same. The only difference is the directory where you get the executable. If you are on Linux you will just need to copy some files, so use a VM to install Unity or ask a friend.\u003Cbr\u003E\n- OSX : \u003Cunity\u003E/Data/PlaybackEngines/macstandalonesupport/ (here I have no idea if KSP is a universal or macosx32 binary. Try and report so I can edit)\u003Cbr\u003E\n- Linux : \u003Cunity\u003E/Data/PlaybackEngines/linuxstandalonesupport/linux32_withgfx_development or linux64_withgfx_development. Get the LinuxPlayer file, copy it to your KSP install and rename it KSP.x86 or KSP.x86_64 depending on the directory you got it from and make sure you set it \u002Bx\u003Cbr\u003E\n\u003Cbr\u003E\n[SIZE=3][B]Missing Unity debugger for MonoDevelop (Custom install or Linux)[/B][/SIZE]\u003Cbr\u003E\nIf you installed MonoDevelop yourself you most likely do not have the Unity Debugger installed. \u003Cbr\u003E\nGo in Tools-\u003EAddin Manager and install the Unity Soft Debugger addon\u003Cbr\u003E\n(I did not test those steps so I would like some feedback)[/spoiler]\n\u003C/unity\u003E\u003C/unity\u003E\u003C/monoinstalldirector\u003E\u003C/ksp\u003E\u003C/ksp\u003E\u003C/ksp\u003E"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-11-24T18:30:42Z","Content":"Sorry about that, I was quite sure I added a note about the VS 2015 steps in the OP and it turn out I did not. Thanks for the edits, I just used them."},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2015-12-02T14:46:42Z","Content":"Thank you ! This helps considerably!"},{"CreatedByName":"Unit327","CreatedById":90967,"CreatedDateTime":"2015-12-05T02:02:33Z","Content":"Thanks for this. Does anyone know where to grab the monodevelop Unity Soft Debugger addon for linux?\n\nIt doesn\u0027t show up in the list of available addons for me on monodevelop v4.0.12. I\u0027ve added the alpha repo, still no joy. I found [this](http://addins.monodevelop.com/Project/Index/84) but the download doesn\u0027t appear to work. I guess there is always the [source code](https://github.com/Unity-Technologies/MonoDevelop.Debugger.Soft.Unity) but there\u0027s got to be an easier way.\n\nEDIT: I was using an older version of monodevelop. I\u0027ve since installed the latest version from [the mono projects debian repositories](http://www.mono-project.com/docs/getting-started/install/linux/#debian-ubuntu-and-derivatives), and now the \u0022attach to process\u0022 option is available. I am going to assume that the \u0022Utilities for use with Unity\u0022 plugin includes the soft debugger and move on for now.\n\nI run into a problem with the latest mono cecil patcher though:\n\n    [KspDevModePatcher:DEBUG:9B0D4949]  IL_0048: ldc.i4 27566\n    [KspDevModePatcher:DEBUG:9B0D4949]  IL_004d: call System.String A.\\u000d\\u0010::\\u0002(System.Int32)\n    [KspDevModePatcher:ERROR:9B0D4949]  Exception while trying to patch assembly: Sequence contains no matching element\n\nFull log [here](https://www.zerobin.net/?b79c49f830f5b5e2#xkDgY7s\u002BfVMSdxdGt1IwjdfX1sCHwLjkVZlRGcWDq58=). Might clone the patcher repo and see if I can fix it.\n\n**Edited \u003Ctime datetime=\u00222015-12-05T03:35:13Z\u0022 title=\u002212/05/2015 03:35  AM\u0022 data-short=\u00228 yr\u0022\u003EDecember 5, 2015\u003C/time\u003E by Unit327**\n  \nmore info"},{"CreatedByName":"Unit327","CreatedById":90967,"CreatedDateTime":"2015-12-05T06:13:19Z","Content":"Ok so I managed to get this working on linux (mint 16). Here\u0027s how:\n\n1. Install mono and monodevelop from [here](http://www.mono-project.com/docs/getting-started/install/linux/#debian-ubuntu-and-derivatives) instead of the default repositories\n2. grab the source to the [unity soft debugger](https://github.com/Unity-Technologies/MonoDevelop.Debugger.Soft.Unity)\n3. run bash build-mpacks.sh (you may need to edit this script to point it to /usr/lib/monodevelop/bin/mdtool.exe)\n4. open monodevelop, addins, and install MonoDevelop.Debugger.Soft.Unity\\_5.9.1.mpack from the file you created in the last step. If you bug me enough I can upload it for you.\n5. Use wine (I used [playonlinux](https://www.playonlinux.com)) to install the unity3d editor\n6. delete KSP.x86\\_64\n7. copy Unity/Editor/Data/PlaybackEngines/linuxstandalonesupport/Variations/linux64\\_withgfx\\_development/LinuxPlayer to KSP.x86\\_64\n8. run the KspDevModePatcher in KSP\\_Data/Managed. For some reason I had to change the source code for it to use [these field names](https://github.com/seanmcdougall/KspDevModePatcher/pull/2/files).\n9. Run KSP.x86\\_64\n10. Open monodevelop to your mod\u0027s solution.\n11. Run-\u003Eattach to process\n12. Scroll all the way to the bottom. You will only have the gdb debugger available for most processes, but there should be one where it switches to \u0022Unity Debugger\u0022. This is *not* the KSP\\_x86\\_64 process, it will be listed separately!\n13. set a breakpoint, enjoy debugging!"},{"CreatedByName":"Youen","CreatedById":116909,"CreatedDateTime":"2015-12-06T15:38:05Z","Content":"First of all, this is just amazing work, proper debugging tools for KSP modding, at last! This will make my life so much easier, thanks a lot :-)\n\nI have an issue though, when I use the development player\\_win.exe, I can indeed debug my mod, but it turns out FAR (Ferram Aerospace Research) stops working. The mod loads (the icon is visible in game), but everything acts as if there was no aerodynamic model at all (no drag, no lift, as if there was no atmosphere on Kerbin anymore). If I restore the original KSP.exe, it works again (even if I keep the patched DLL).\n\nAnyone saw that issue? Any idea what is going on? Since I\u0027m working on a mod that interacts with FAR, it would help a lot to be able to debug with FAR installed..."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-12-07T08:59:25Z","Content":"You should see some message in the log about \u0022main thread\u0022. The game block when you access some Unity call from a static constructor or a thread. This is why we have to patch the game with the patcher. it moves some static constructor calls to other places (it may degrade perf since those were in static construction so they are only init once)\n\nFAR may do that."},{"CreatedByName":"Valerian","CreatedById":124076,"CreatedDateTime":"2015-12-07T13:07:39Z","Content":"Just to say that I have been using this since a long time, it helped me a lot, especially since I started doing things such as reflection and extracting data from materials/shaders.\n\nI\u0027m thankful that you kept updating it and even created a patch to fix the assembly for it to work with recent KSP versions."},{"CreatedByName":"m4v","CreatedById":67965,"CreatedDateTime":"2016-02-01T21:54:02Z","Content":"\u003E \n\u003E \n\u003E On 5/12/2015 at 3:13 AM, Unit327 said:\n\u003E \n\u003E \n\u003E Install mono and monodevelop from [here](http://www.mono-project.com/docs/getting-started/install/linux/#debian-ubuntu-and-derivatives) instead of the default repositories\n\u003E \n\nFor some reason installing monodevelop from there conflicts with mono-gmcs (Ubuntu). How do you compile for .NET 3.5 without gmcs?\n\n**Edited \u003Ctime datetime=\u00222016-02-01T21:54:23Z\u0022 title=\u002202/01/2016 09:54  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 1, 2016\u003C/time\u003E by m4v**"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-02-01T22:00:56Z","Content":"\u003E \n\u003E \n\u003E 9 minutes ago, m4v said:\n\u003E \n\u003E \n\u003E For some reason installing monodevelop from there conflicts with mono-gmcs (Ubuntu). How do you compile for .NET 3.5 without gmcs?\n\u003E \n\nmcs -sdk:2 \n\nEdit : you can see a full cmd line here : [https://ksp.sarbian.com/jenkins/job/SmokeScreen/52/console](https://ksp.sarbian.com/jenkins/job/SmokeScreen/52/console)\n\nEdit 2 : or you can grab roslyn and use it to compile Cmd line exemple [here](https://ksp.sarbian.com/jenkins/job/MechJeb2-Dev/562/console)(the /home/roslyn/csc.exe line) and binary [here](https://bitbucket.org/alexzzzz/unity-c-5.0-and-6.0-integration/src/db5adced21a607b977ecbe77e3773eb798c00aef/CSharp60Support/Roslyn/?at=default). That would also allow you to use C# 6 \n\n**Edited \u003Ctime datetime=\u00222016-02-01T22:05:32Z\u0022 title=\u002202/01/2016 10:05  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 1, 2016\u003C/time\u003E by sarbian**"},{"CreatedByName":"timmers_uk","CreatedById":97413,"CreatedDateTime":"2016-02-02T20:35:18Z","Content":"FYI I was unable to run the patcher successfully on the current 1.0.5 win32 KSP, as the patcher couldn\u0027t find the ModuleAblator initializer.\n\nI recompiled having commented out the offending line, it patched the rest ok, and KSP seems to have come up successfully\n\n//MoveInitializerIntoAwake(asm, \u0022ModuleAblator\u0022, \u0022\\b\\b\u0022, 8, \u0022Start\u0022);"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-02-03T08:42:41Z","Content":"Are you sure you are on build 1028 of KSP ?"},{"CreatedByName":"RockyTV","CreatedById":57161,"CreatedDateTime":"2016-02-06T18:09:16Z","Content":"\u003E \n\u003E \n\u003E On 02/02/2016 at 6:35 PM, timmers\\_uk said:\n\u003E \n\u003E \n\u003E FYI I was unable to run the patcher successfully on the current 1.0.5 win32 KSP, as the patcher couldn\u0027t find the ModuleAblator initializer.\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E I recompiled having commented out the offending line, it patched the rest ok, and KSP seems to have come up successfully\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E //MoveInitializerIntoAwake(asm, \u0022ModuleAblator\u0022, \u0022\\b\\b\u0022, 8, \u0022Start\u0022);\n\u003E \n\nI\u0027m getting the same error, on win32.\n\n\u003E \n\u003E \n\u003E On 03/02/2016 at 6:42 AM, sarbian said:\n\u003E \n\u003E \n\u003E Are you sure you are on build 1028 of KSP ?\n\u003E \n\nYes, I\u0027m running build 1028.\n\n**Edited \u003Ctime datetime=\u00222016-02-06T18:12:34Z\u0022 title=\u002202/06/2016 06:12  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 6, 2016\u003C/time\u003E by RockyTV**"},{"CreatedByName":"timmers_uk","CreatedById":97413,"CreatedDateTime":"2016-02-08T12:04:22Z","Content":"\u003E \n\u003E \n\u003E On 03/02/2016 at 8:42 AM, sarbian said:\n\u003E \n\u003E \n\u003E Are you sure you are on build 1028 of KSP ?\n\u003E \n\nYep I\u0027m on build 1028, and since commenting out that line and rebuilding (the patcher), my debugging seems to be happy enough.\n\n**Edited \u003Ctime datetime=\u00222016-02-08T12:04:47Z\u0022 title=\u002202/08/2016 12:04  PM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 8, 2016\u003C/time\u003E by timmers\\_uk**"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-02-08T12:29:18Z","Content":"I just checked and the \u0022\\b\\b\u0022 is right. I don\u0027t know why it does not work for you but if you can debug then I guess it is fine."},{"CreatedByName":"timmers_uk","CreatedById":97413,"CreatedDateTime":"2016-02-27T20:10:16Z","Content":"\u003E \n\u003E \n\u003E On 2/8/2016 at 0:29 PM, sarbian said:\n\u003E \n\u003E \n\u003E I just checked and the \u0022\\b\\b\u0022 is right. I don\u0027t know why it does not work for you but if you can debug then I guess it is fine.\n\u003E \n\nYep np, this is all witchcraft anyway, so possibly a little unpredictability is expected ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022;)\u0022)"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-03-31T17:16:17Z","Content":"Any ideas on getting this working for KSP 1.1 given Unity 5 is not Mono driven."},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-03-31T17:33:11Z","Content":"\u003E \n\u003E \n\u003E 16 minutes ago, JPLRepo said:\n\u003E \n\u003E \n\u003E Any ideas on getting this working for KSP 1.1 given Unity 5 is not Mono driven.\n\u003E \n\nHuh?  I think you\u0027ll find it is..."},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-03-31T17:59:47Z","Content":"\u003E \n\u003E \n\u003E 25 minutes ago, Padishar said:\n\u003E \n\u003E \n\u003E Huh?  I think you\u0027ll find it is...\n\u003E \n\nI meant is now linked to the VS environment. Mono is there... I guess has anyone tried to get this fired up for 1.1?\n\nOtherwise I\u0027ll start looking at it."}]}