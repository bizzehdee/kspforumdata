{"TopicId":122701,"ForumId":29,"TopicTitle":"Wanted: Math genius - balance a lever with a moving fulcrum","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-10T02:56:52Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-10T02:56:52Z","Content":"\n\u003Cp\u003EOk, here\u0027s the mathematical description of my problem. I have a basic lever that I\u0027m trying to balance. I\u0027m looking for a formula (for a non math genius) to plug into C#. The lever has mass on both ends and a fulcrum somewhere in the middle. I can add and subtract to the total mass of both (equally) and/or move any amount of mass, repeatedly, from one end to the other. I can get the distance of either mass to the fulcrum. The problem is, as I move the mass, the fulcrum (CoM) moves too. So the standard lever calculation (M1 x D1 = M2 x D2) won\u0027t work.\u003C/p\u003E\u003Cp\u003EHere\u0027s the data I can get:\u003C/p\u003E\u003Cp\u003EM1 - Mass of one side\u003C/p\u003E\u003Cp\u003EM2 - Mass of the other side\u003C/p\u003E\u003Cp\u003ED1 - Distance from M1 to the CoM\u003C/p\u003E\u003Cp\u003ED2 - Distance from M2 to the CoM\u003C/p\u003E\u003Cp\u003EA1 - Altitude of M1\u003C/p\u003E\u003Cp\u003EA2 - Altitude of M2\u003C/p\u003E\u003Cp\u003EAnd I can probably come up with other numbers if it\u0027ll make the calculations easier.\u003C/p\u003E\u003Cp\u003EThere are other parts on the vessel that do add mass but it\u0027s insignificant enough that if I can get it close to balance, SAS can hold it there.\u003C/p\u003E\u003Cp\u003EKSP description of the problem:\u003C/p\u003E\u003Cp\u003EI have a Submarine. I have between 0 and 40 tons of ballast at the bow and the stern. I\u0027m trying to even the keel by moving the ballast between the two.\u003C/p\u003E\u003Cp\u003EHere\u0027s a sample of my output so you can see the CoM moving. In this output, every 2 seconds I\u0027m moving 0.25 tons back and forth between P1 and P2 depending on altitude. If the altitude is higher, I move 0.25 tons to that part from the other.\u003C/p\u003E\u003Cp\u003EPx Distance is the distance of each part to the CoM P1 is the bow, P2 is the stern.\u003C/p\u003E\u003Cp\u003EThe pitch is apparently \u002B1 for up, -1 for down (FlightGlobals.ActiveVessel.ctrlState.pitch). Oddly, you can see it pass through 0 but the altitude of the parts doesn\u0027t seem to agree with that.\u003C/p\u003E\u003Cp\u003EThe numbers after the \u0027Autokeel Running\u0027 are the altitude of the two parts (below sea level) P1 and P2 respectively\u003C/p\u003E\u003Cp\u003EYou\u0027ll notice as mass is moved from P2 to P1, the altitude of P1 decreases and... so does it\u0027s distance to the CoM.\u003C/p\u003E\u003Cp\u003EThanks in advance.\u003C/p\u003E\u003Cp\u003EOh, and I forgot the mention. This \u0027lever\u0027 could be moving forward, backward, turning, diving, etc. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E10/9/2015 9:27:49 PM: P1 Distance: 22.78061\u003Cbr\u003E10/9/2015 9:27:49 PM: P2 Distance: 39.16152\u003Cbr\u003E10/9/2015 9:27:49 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:27:49 PM: [Maritime Pack] Autokeel Running-347.5625 -408.625\u003Cbr\u003E10/9/2015 9:27:51 PM: P1 Distance: 22.50758\u003Cbr\u003E10/9/2015 9:27:51 PM: P2 Distance: 39.43423\u003Cbr\u003E10/9/2015 9:27:51 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:27:51 PM: [Maritime Pack] Autokeel Running-345.125 -406.75\u003Cbr\u003E10/9/2015 9:27:53 PM: P1 Distance: 22.23421\u003Cbr\u003E10/9/2015 9:27:53 PM: P2 Distance: 39.70741\u003Cbr\u003E10/9/2015 9:27:53 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:27:53 PM: [Maritime Pack] Autokeel Running-342.8125 -404.625\u003Cbr\u003E10/9/2015 9:27:55 PM: P1 Distance: 21.96077\u003Cbr\u003E10/9/2015 9:27:55 PM: P2 Distance: 39.98074\u003Cbr\u003E10/9/2015 9:27:55 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:27:55 PM: [Maritime Pack] Autokeel Running-340.5625 -402.375\u003Cbr\u003E10/9/2015 9:27:57 PM: P1 Distance: 21.88637\u003Cbr\u003E10/9/2015 9:27:57 PM: P2 Distance: 40.05509\u003Cbr\u003E10/9/2015 9:27:57 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:27:57 PM: [Maritime Pack] Autokeel Running-338.375 -400.25\u003Cbr\u003E10/9/2015 9:27:59 PM: P1 Distance: 21.61186\u003Cbr\u003E10/9/2015 9:27:59 PM: P2 Distance: 40.32959\u003Cbr\u003E10/9/2015 9:27:59 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:27:59 PM: [Maritime Pack] Autokeel Running-337 -398.625\u003Cbr\u003E10/9/2015 9:28:01 PM: P1 Distance: 21.33866\u003Cbr\u003E10/9/2015 9:28:01 PM: P2 Distance: 40.60279\u003Cbr\u003E10/9/2015 9:28:01 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:28:01 PM: [Maritime Pack] Autokeel Running-336.1875 -397.5625\u003Cbr\u003E10/9/2015 9:28:03 PM: P1 Distance: 21.06656\u003Cbr\u003E10/9/2015 9:28:03 PM: P2 Distance: 40.87495\u003Cbr\u003E10/9/2015 9:28:03 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:28:03 PM: [Maritime Pack] Autokeel Running-336 -396.9375\u003Cbr\u003E10/9/2015 9:28:05 PM: P1 Distance: 20.79544\u003Cbr\u003E10/9/2015 9:28:05 PM: P2 Distance: 41.14615\u003Cbr\u003E10/9/2015 9:28:05 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:28:05 PM: [Maritime Pack] Autokeel Running-336.4375 -396.5625\u003Cbr\u003E10/9/2015 9:28:07 PM: P1 Distance: 20.52509\u003Cbr\u003E10/9/2015 9:28:07 PM: P2 Distance: 41.4166\u003Cbr\u003E10/9/2015 9:28:07 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:28:07 PM: [Maritime Pack] Autokeel Running-337.25 -396.1875\u003Cbr\u003E10/9/2015 9:28:09 PM: P1 Distance: 20.25548\u003Cbr\u003E10/9/2015 9:28:09 PM: P2 Distance: 41.68639\u003Cbr\u003E10/9/2015 9:28:09 PM: pitch: 1\u003Cbr\u003E10/9/2015 9:28:09 PM: [Maritime Pack] Autokeel Running-338.625 -395.75\u003Cbr\u003E10/9/2015 9:28:12 PM: P1 Distance: 19.98667\u003Cbr\u003E10/9/2015 9:28:12 PM: P2 Distance: 41.95547\u003Cbr\u003E10/9/2015 9:28:12 PM: pitch: -0.4172428\u003Cbr\u003E10/9/2015 9:28:12 PM: [Maritime Pack] Autokeel Running-340.5625 -394.9375\u003Cbr\u003E10/9/2015 9:28:14 PM: P1 Distance: 19.71875\u003Cbr\u003E10/9/2015 9:28:14 PM: P2 Distance: 42.22372\u003Cbr\u003E10/9/2015 9:28:14 PM: pitch: -1\u003Cbr\u003E10/9/2015 9:28:14 PM: [Maritime Pack] Autokeel Running-343.0625 -393.5625\u003Cbr\u003E10/9/2015 9:28:16 PM: P1 Distance: 19.45182\u003Cbr\u003E10/9/2015 9:28:16 PM: P2 Distance: 42.49113\u003Cbr\u003E10/9/2015 9:28:16 PM: pitch: -1\u003Cbr\u003E10/9/2015 9:28:16 PM: [Maritime Pack] Autokeel Running-346.3125 -391\u003Cbr\u003E10/9/2015 9:28:18 PM: P1 Distance: 19.18616\u003Cbr\u003E10/9/2015 9:28:18 PM: P2 Distance: 42.75744\u003Cbr\u003E10/9/2015 9:28:18 PM: pitch: -1\u003Cbr\u003E10/9/2015 9:28:18 PM: [Maritime Pack] Autokeel Running-350.5 -386.6875\u003Cbr\u003E10/9/2015 9:28:20 PM: P1 Distance: 18.92196\u003Cbr\u003E10/9/2015 9:28:20 PM: P2 Distance: 43.0225\u003Cbr\u003E10/9/2015 9:28:20 PM: pitch: -0.5546433\u003Cbr\u003E10/9/2015 9:28:20 PM: [Maritime Pack] Autokeel Running-355.75 -380.125\u003Cbr\u003E10/9/2015 9:28:22 PM: P1 Distance: 18.65931\u003Cbr\u003E10/9/2015 9:28:22 PM: P2 Distance: 43.28622\u003Cbr\u003E10/9/2015 9:28:22 PM: pitch: -0.6652656\u003Cbr\u003E10/9/2015 9:28:22 PM: [Maritime Pack] Autokeel Running-362.3125 -370.75\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-10T03:10:29Z\u0022 title=\u002210/10/2015 03:10  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 10, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"steuben","CreatedById":77368,"CreatedDateTime":"2015-10-10T13:43:28Z","Content":"\n\u003Cp\u003Eyou have too many variables. a side effect of thinking in code rather than thinking math or physics\u003C/p\u003E\u003Cp\u003Etry this:\u003C/p\u003E\u003Cp\u003Eassuming your system is closed. no ballast from the outside or changing length of craft.\u003C/p\u003E\u003Cp\u003ED2\u002BD1 = L which is the length of your ship\u003C/p\u003E\u003Cp\u003EM2\u002BM1 = B which is the total amount of ballast\u003C/p\u003E\u003Cp\u003Emeans your equation becomes\u003C/p\u003E\u003Cp\u003E(L-D1)*(B-M1) = D1*M1\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-10-10T13:50:07Z","Content":"\n\u003Cp\u003EI don\u0027t think there\u0027s enough info there to help, I would comment on two things though.\u003C/p\u003E\u003Cp\u003E1) FlightGlobals.ActiveVessel.ctrlState.pitch is the input command being passed to KSP, it has no relation to what is going on in the game world. Pressing \u0027W\u0027 will put this at 1, \u0027S\u0027 at -1. I\u0027m assuming what is printing there is what the SAS is passing to get a partial number like that.\u003C/p\u003E\u003Cp\u003E2) When you talk about distance to CoM moving on a \u0027fixed\u0027 reference point, I would suspect that you are getting bad data somewhere. KSP has a very confusing co-ordinate system and if you could post the code you are using that would let us double check that for you. (Or are you are using CoM and fulcrum interchangebly? Those two things are not the same.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-10T14:27:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022steuben\u0022 data-cite=\u0022steuben\u0022\u003E\u003Cdiv\u003Eyou have too many variables. a side effect of thinking in code rather than thinking math or physics\u003Cp\u003Etry this:\u003C/p\u003E\u003Cp\u003Eassuming your system is closed. no ballast from the outside or changing length of craft.\u003C/p\u003E\u003Cp\u003ED2\u002BD1 = L which is the length of your ship\u003C/p\u003E\u003Cp\u003EM2\u002BM1 = B which is the total amount of ballast\u003C/p\u003E\u003Cp\u003Emeans your equation becomes\u003C/p\u003E\u003Cp\u003E(L-D1)*(B-M1) = D1*M1\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s the theory I\u0027m working on now but I\u0027m having to put in some effort to reduce the accuracy of the calculations. Calculating the length twice I get both \u003C/p\u003E\u003Cp\u003E61.9436302185059 \u003C/p\u003E\u003Cp\u003EAnd...\u003C/p\u003E\u003Cp\u003E61.9439220428467\u003C/p\u003E\u003Cp\u003EAnd with that many decimal points, if I transfer the resource often it creates or evaporates the resource. So, I\u0027m working on that.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EI don\u0027t think there\u0027s enough info there to help, I would comment on two things though.\u003Cp\u003E1) FlightGlobals.ActiveVessel.ctrlState.pitch is the input command being passed to KSP, it has no relation to what is going on in the game world. Pressing \u0027W\u0027 will put this at 1, \u0027S\u0027 at -1. I\u0027m assuming what is printing there is what the SAS is passing to get a partial number like that.\u003C/p\u003E\u003Cp\u003E2) When you talk about distance to CoM moving on a \u0027fixed\u0027 reference point, I would suspect that you are getting bad data somewhere. KSP has a very confusing co-ordinate system and if you could post the code you are using that would let us double check that for you. (Or are you are using CoM and fulcrum interchangebly? Those two things are not the same.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, that explains the odd results I\u0027m seeing with the pitch.\u003C/p\u003E\u003Cp\u003EYes, I\u0027m using CoM and the fulcrum interchangeably. I\u0027m assuming the CoM would be the fulcrum. If not, then where would the fulcrum be? Center of Buoyancy?\u003C/p\u003E\u003Cp\u003EWhen I get the code a bit more solidified I\u0027ll post it. But for now, I\u0027m finding the distance to the CoM via: \u003C/p\u003E\u003Cp\u003EVector3.Distance(Part1.transform.position, FlightGlobals.ActiveVessel.CoM)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-10T14:33:48Z\u0022 title=\u002210/10/2015 02:33  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 10, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-10T15:22:32Z","Content":"\n\u003Cp\u003EOk, here\u0027s what I came up with but it\u0027s way off.\u003C/p\u003E\u003Cp\u003Etotaldistance - vessel length\u003C/p\u003E\u003Cp\u003Etotal mass - mass of both resources (1 unit = 1 ton)\u003C/p\u003E\u003Cp\u003EP1length \u0026amp; P2length - distance to the CoM for that part\u003C/p\u003E\u003Cp\u003Ep1goal2 - the amount of resource the part should have to achieve balance.\u003C/p\u003E\u003Cp\u003Ep1difference - the difference between how much resource Part1 should have and how much it does have (i.e. the amount to transfer from Part2).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Edecimal totaldistance = decimal.Round((decimal)Vector3.Distance(Part1.transform.position, FlightGlobals.ActiveVessel.CoM) \u002B (decimal)Vector3.Distance(Part2.transform.position, FlightGlobals.ActiveVessel.CoM),2);\u003Cbr\u003E\u003Cbr\u003Edecimal totalmass = decimal.Round((decimal)MPFunctions.GetResourceAmount(Part1, \u0022CompressedWater\u0022) \u002B (decimal)MPFunctions.GetResourceAmount(Part2, \u0022CompressedWater\u0022),2);\u003Cbr\u003E\u003Cbr\u003Edecimal P1length = decimal.Round((decimal)Vector3.Distance(Part1.transform.position, FlightGlobals.ActiveVessel.CoM), 2);\u003Cbr\u003E\u003Cbr\u003Edecimal P2length = decimal.Round((decimal)Vector3.Distance(Part2.transform.position, FlightGlobals.ActiveVessel.CoM), 2);\u003Cbr\u003E\u003Cbr\u003Edecimal p1goal = decimal.Round((totaldistance - P1length) * (totalmass - (decimal)MPFunctions.GetResourceAmount(Part1, \u0022CompressedWater\u0022)),2);\u003Cbr\u003E\u003Cbr\u003Edecimal p1goal2 = decimal.Round((decimal)MPFunctions.GetResourceAmount(Part1, \u0022CompressedWater\u0022) / p1goal,2);\u003Cbr\u003E\u003Cbr\u003Edecimal p1difference = decimal.Round(p1goal2 - (decimal)MPFunctions.GetResourceAmount(Part1, \u0022CompressedWater\u0022),2);\u003Cbr\u003E\u003Cbr\u003Eint id = MPFunctions.GetResourceID(Part1, \u0022CompressedWater\u0022);\u003Cbr\u003E\u003Cbr\u003EPart1.TransferResource(id, (float) p1difference);\u003Cbr\u003E\u003Cbr\u003EPart2.TransferResource(id, (float) -p1difference);\u003Cbr\u003E\u003Cbr\u003EMPLog.Writelog(\u0022TD: \u0022 \u002B totaldistance \u002B \u0022 TM: \u0022 \u002B totalmass \u002B \u0022 p1goal: \u0022 \u002B p1goal2 \u002B \u0022 p1difference: \u0022 \u002B p1difference \u002B \u0022 P1amt: \u0022 \u002B MPFunctions.GetResourceAmount(Part1, \u0022CompressedWater\u0022) \u002B \u0022 P2amt: \u0022 \u002B MPFunctions.GetResourceAmount(Part2, \u0022CompressedWater\u0022));\u003Cbr\u003E\u003Cbr\u003EMPLog.Writelog(\u0022P1 CoM distance: \u0022 \u002B Vector3.Distance(Part1.transform.position, FlightGlobals.ActiveVessel.CoM) \u002B MPFunctions.GetResourceAmount(Part1, \u0022CompressedWater\u0022) \u002B \u0022 P2 CoM distance: \u0022 \u002B Vector3.Distance(Part2.transform.position, FlightGlobals.ActiveVessel.CoM) \u002B MPFunctions.GetResourceAmount(Part2, \u0022CompressedWater\u0022));\u003Cbr\u003E\u003Cbr\u003EEvents[\u0022ActivateEvent\u0022].active = true;\u003Cbr\u003E\u003Cbr\u003EEvents[\u0022DeactivateEvent\u0022].active = false;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd here\u0027s the log output.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E10/10/2015 10:32:43 AM: TD: 61.95 TM: 44.45 p1goal: 0.05 p1difference: -30.55 P1amt: 0.0500000230968531 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:43 AM: P1 CoM distance: 19.246330.0500000230968531 P2 CoM distance: 42.7001540\u003Cbr\u003E10/10/2015 10:32:54 AM: TD: 61.95 TM: 40.05 p1goal: 0.00 p1difference: -0.05 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:54 AM: P1 CoM distance: 50.950742.23517950814767E-08 P2 CoM distance: 10.9996340\u003Cbr\u003E10/10/2015 10:32:55 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:55 AM: P1 CoM distance: 51.015912.23517950814767E-08 P2 CoM distance: 10.9334740\u003Cbr\u003E10/10/2015 10:32:55 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:55 AM: P1 CoM distance: 51.022242.23517950814767E-08 P2 CoM distance: 10.926740\u003Cbr\u003E10/10/2015 10:32:56 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:56 AM: P1 CoM distance: 51.026592.23517950814767E-08 P2 CoM distance: 10.9221540\u003Cbr\u003E10/10/2015 10:32:56 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:56 AM: P1 CoM distance: 51.028862.23517950814767E-08 P2 CoM distance: 10.9198240\u003Cbr\u003E10/10/2015 10:32:56 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:56 AM: P1 CoM distance: 51.030392.23517950814767E-08 P2 CoM distance: 10.9182740\u003Cbr\u003E10/10/2015 10:32:56 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:56 AM: P1 CoM distance: 51.033832.23517950814767E-08 P2 CoM distance: 10.9149140\u003Cbr\u003E10/10/2015 10:32:57 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:57 AM: P1 CoM distance: 51.036422.23517950814767E-08 P2 CoM distance: 10.9124440\u003Cbr\u003E10/10/2015 10:32:57 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:57 AM: P1 CoM distance: 51.038842.23517950814767E-08 P2 CoM distance: 10.9101240\u003Cbr\u003E10/10/2015 10:32:57 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:57 AM: P1 CoM distance: 51.041242.23517950814767E-08 P2 CoM distance: 10.9077940\u003Cbr\u003E10/10/2015 10:32:58 AM: TD: 61.95 TM: 40.00 p1goal: 0.00 p1difference: 0.00 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:58 AM: P1 CoM distance: 51.046062.23517950814767E-08 P2 CoM distance: 10.9029440\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-10T15:35:42Z\u0022 title=\u002210/10/2015 03:35  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 10, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"steuben","CreatedById":77368,"CreatedDateTime":"2015-10-10T15:25:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Fengist\u0022 data-cite=\u0022Fengist\u0022\u003E\u003Cdiv\u003EThat\u0027s the theory I\u0027m working on now but I\u0027m having to put in some effort to reduce the accuracy of the calculations. Calculating the length twice I get both \u003Cp\u003E61.9436302185059 \u003C/p\u003E\u003Cp\u003EAnd...\u003C/p\u003E\u003Cp\u003E61.9439220428467\u003C/p\u003E\u003Cp\u003EAnd with that many decimal points, if I transfer the resource often it creates or evaporates the resource. So, I\u0027m working on that.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eah the collision of analog and finite digital spaces. you may have to surrender and do an approximation on the numbers. something like cint((D*1000\u002B.5))/1000 will get rounded 3 decimal places to the right. which at most practical scales and some impractical ones gets you close enough for automatic controls to take care of the rest. after a certain point that many numbers just becomes noise in your signal. \u003C/p\u003E\u003Cp\u003Esupplemental info: \u003Ca href=\u0022https://en.wikipedia.org/wiki/Significant_figures\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Significant_figures\u003C/a\u003E, might be a good review for anybody watching.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-10-10T15:34:45Z","Content":"\n\u003Cp\u003EOkay.\u003C/p\u003E\u003Cp\u003EFirst thing I notice is that you are assuming that the CoM of Part1, Part2, and the Vessel are all in line. I would be very surprised if this is the case.\u003C/p\u003E\u003Cp\u003EMost likely they form a triangle and so P1Length \u002B P2Length is greater then totalDistance, not equal to it like your math assumes.\u003C/p\u003E\u003Cp\u003EIf the 3 CoM\u0027s are in fact in a line, I don\u0027t see anything obviously wrong with a quick glance at the rest of the code.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-10T15:39:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022steuben\u0022 data-cite=\u0022steuben\u0022\u003E\u003Cdiv\u003Eah the collision of analog and finite digital spaces. you may have to surrender and do an approximation on the numbers. something like cint((D*1000\u002B.5))/1000 will get rounded 3 decimal places to the right. which at most practical scales and some impractical ones gets you close enough for automatic controls to take care of the rest. after a certain point that many numbers just becomes noise in your signal. \u003Cp\u003Esupplemental info: \u003Ca href=\u0022https://en.wikipedia.org/wiki/Significant_figures\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Significant_figures\u003C/a\u003E, might be a good review for anybody watching.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYep... noise. So now I\u0027m converting everything to a decimal 2.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EOkay.\u003Cp\u003EFirst thing I notice is that you are assuming that the CoM of Part1, Part2, and the Vessel are all in line. I would be very surprised if this is the case.\u003C/p\u003E\u003Cp\u003EMost likely they form a triangle and so P1Length \u002B P2Length is greater then totalDistance, not equal to it like your math assumes.\u003C/p\u003E\u003Cp\u003EIf the 3 CoM\u0027s are in fact in a line, I don\u0027t see anything obviously wrong with a quick glance at the rest of the code.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/125063-1-0-4-Maritime-Pack-0-1-4-New-Pre-release-Available?p=2236569\u0026amp;viewfull=1#post2236569\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u0027s a quick look at the vessel\u003C/a\u003E, from a distance. It\u0027s pretty much in-line. The Part1 and Part2 are the bow and stern parts. Basically, I\u0027m searching all the parts for the resource and as long as there\u0027s only two (I don\u0027t wanna even think about a lever with multiple masses and fulcrums) it tries to balance the sub.\u003C/p\u003E\u003Cp\u003EBut I see your point. That, I suppose I could adjust for that once I get even close with the math (pct of distance to CoM roughly = pct of distance between the parts). Right now, I\u0027m not.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-10T15:46:27Z\u0022 title=\u002210/10/2015 03:46  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 10, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-10-10T15:52:49Z","Content":"\n\u003Cp\u003EAlright, so close enough to inline.\u003C/p\u003E\u003Cp\u003EAlthough I do see fins, do those have a ModuleAeroSurface or ModuleControlSurface attached? Those modules are weird and may cause lift throwing things off, even when \u0022stationary\u0022.\u003C/p\u003E\u003Cp\u003EAlthough something is screwy in your vectors:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E10/10/2015 10:32:54 AM: TD: 61.95 TM: 40.05 p1goal: 0.00 p1difference: -0.05 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:54 AM: P1 CoM distance: 50.950742.23517950814767E-08 P2 CoM distance: 10.9996340\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ETotaldistance: 61.95 meters, P1 distance is 0.0000005095 meters, P2 is 10.99, that only comes to about 11 meters and no where close to 61.95 meters.\u003C/p\u003E\u003Cp\u003E(I think the E-08 on the end is a negative scientific notation correct?)\u003C/p\u003E\u003Cp\u003ESo you need to get that straightened out first before worrying about balancing them out.\u003C/p\u003E\u003Cp\u003ESomewhere on the forum there is a code snippet for drawing lines, I would draw 3 lines, one from each CoM and see ... is going on. My suspicion is that FlightGlobals.ActiveVessel.CoM is returning something strange but you need to confirm that.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-10T16:29:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EAlright, so close enough to inline.\u003Cp\u003EAlthough I do see fins, do those have a ModuleAeroSurface or ModuleControlSurface attached? Those modules are weird and may cause lift throwing things off, even when \u0022stationary\u0022.\u003C/p\u003E\u003Cp\u003EAlthough something is screwy in your vectors:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E10/10/2015 10:32:54 AM: TD: 61.95 TM: 40.05 p1goal: 0.00 p1difference: -0.05 P1amt: 2.23517950814767E-08 P2amt: 40\u003Cbr\u003E10/10/2015 10:32:54 AM: P1 CoM distance: 50.950742.23517950814767E-08 P2 CoM distance: 10.9996340\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ETotaldistance: 61.95 meters, P1 distance is 0.0000005095 meters, P2 is 10.99, that only comes to about 11 meters and no where close to 61.95 meters.\u003C/p\u003E\u003Cp\u003E(I think the E-08 on the end is a negative scientific notation correct?)\u003C/p\u003E\u003Cp\u003ESo you need to get that straightened out first before worrying about balancing them out.\u003C/p\u003E\u003Cp\u003ESomewhere on the forum there is a code snippet for drawing lines, I would draw 3 lines, one from each CoM and see ... is going on. My suspicion is that FlightGlobals.ActiveVessel.CoM is returning something strange but you need to confirm that.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, all my vars in there make it confusing to even me. The p1difference is the calculated amount of resource to transfer - the amount it already has. If you look at the second line you copied, you\u0027ll see the two distances to CoM do come up to right around 61.95m\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EYea, there\u0027s something strange going on. This simple test tells me that.\u003C/p\u003E\u003Cp\u003EHere\u0027s the math that\u0027s coming up wrong.\u003C/p\u003E\u003Cp\u003EDistance = Part1 distance to CoM \u002B Part2 distance to CoM\u003C/p\u003E\u003Cp\u003ETotal Mass = Part1 resource amount \u002B Part 2 rescource amount\u003C/p\u003E\u003Cp\u003EMass per length = Total Mass / Distance\u003C/p\u003E\u003Cp\u003ENow if that\u0027s correct then\u003C/p\u003E\u003Cp\u003E(Part 1 distance * Mass per length) \u002B (Part2 distance * Mass per length) should = Total Mass\u003C/p\u003E\u003Cp\u003EBut it doesn\u0027t;\u003C/p\u003E\u003Cp\u003EI\u0027m getting 44.45 for the total mass of the resource but 57.28 for the Parts * Mass per length.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Edecimal totaldistance = decimal.Round((decimal)Vector3.Distance(Part1.transform.position, FlightGlobals.ActiveVessel.CoM) \u002B (decimal)Vector3.Distance(Part2.transform.position, FlightGlobals.ActiveVessel.CoM),2);\u003Cbr\u003Edecimal totalmass = decimal.Round((decimal)MPFunctions.GetResourceAmount(Part1, \u0022CompressedWater\u0022) \u002B (decimal)MPFunctions.GetResourceAmount(Part2, \u0022CompressedWater\u0022),2);\u003Cbr\u003Edecimal P1length = decimal.Round((decimal)Vector3.Distance(Part1.transform.position, FlightGlobals.ActiveVessel.CoM), 2);\u003Cbr\u003Edecimal P2length = decimal.Round((decimal)Vector3.Distance(Part2.transform.position, FlightGlobals.ActiveVessel.CoM), 2);\u003Cbr\u003Edecimal MassU = decimal.Round(totalmass / totaldistance,2);\u003Cbr\u003Edecimal p1goal = decimal.Round(MassU * P1length,2);\u003Cbr\u003Edecimal p2goal = decimal.Round(MassU * P2length, 2);\u003Cbr\u003Edecimal goaltotal = decimal.Round(p1goal \u002B p2goal, 2);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-10T16:40:35Z\u0022 title=\u002210/10/2015 04:40  PM\u0022 data-short=\u00228 yr\u0022\u003EOctober 10, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-10T17:28:04Z","Content":"\n\u003Cp\u003EWell, I\u0027ve come to a conclusion. Diazo, you\u0027re correct. The CoM is not the fulcrum when submerged. I suspect it\u0027s a center of buoyancy but unfortunately, there seems to be no vessel.CoB.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-10-10T17:48:05Z","Content":"\n\u003Cp\u003EOuch, that\u0027s going to make things tough.\u003C/p\u003E\u003Cp\u003EI don\u0027t have a clue how buoyancy works in KSP and I don\u0027t remember ever seeing anything on the forums about it either.\u003C/p\u003E\u003Cp\u003EI think you are in totally uncharted territory here so good luck. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-10T18:04:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EOuch, that\u0027s going to make things tough.\u003Cp\u003EI don\u0027t have a clue how buoyancy works in KSP and I don\u0027t remember ever seeing anything on the forums about it either.\u003C/p\u003E\u003Cp\u003EI think you are in totally uncharted territory here so good luck. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYea, thanks for the help. I\u0027ve tried WorldCoM, vessel.transform, currentCoM, basically any Vecor3 attached to the vessel and none of those seem to be the center of buoyancy. And naturally, I googled it till there was nothing left to google... nothing worth mentioning.\u003C/p\u003E\u003Cp\u003EI may have to go back to my original idea and just check part altitudes and \u0027guesstimate\u0027\u003C/p\u003E\n"},{"CreatedByName":"AdmiralTigerclaw","CreatedById":92104,"CreatedDateTime":"2015-10-10T18:36:56Z","Content":"\n\u003Cp\u003EWhat you described in the op looks like your problem is actually that you\u0027re trying to ham-fist with algebra what should be done with calculus... As Calc is literally the \u0022Mathematics of Change\u0022.\u003C/p\u003E\u003Cp\u003ENow, I haven\u0027t touched true Calculus in over a year, but it almost looks like you need to break out differential equations for this mess. You\u0027ve got variables who\u0027s behavior is based on the \u0027fulcrum\u0027, but where-in solving for the solution alters the fulcrum, which means it needs to be resolved, which alters it more, etc... If you try to do this conventionally, the algebra is going to turn into a feedback loop where you end up either eating processor time, or sacrificing resolution and getting unstable results.\u003C/p\u003E\u003Cp\u003EUgh... Get someone who\u0027s strong in practical calculus to go over the problem with you. I hope my comment at least gives you an idea of WHAT math you need to attack with.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-10T22:28:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AdmiralTigerclaw\u0022 data-cite=\u0022AdmiralTigerclaw\u0022\u003E\u003Cdiv\u003EWhat you described in the op looks like your problem is actually that you\u0027re trying to ham-fist with algebra what should be done with calculus... As Calc is literally the \u0022Mathematics of Change\u0022.\u003Cp\u003ENow, I haven\u0027t touched true Calculus in over a year, but it almost looks like you need to break out differential equations for this mess. You\u0027ve got variables who\u0027s behavior is based on the \u0027fulcrum\u0027, but where-in solving for the solution alters the fulcrum, which means it needs to be resolved, which alters it more, etc... If you try to do this conventionally, the algebra is going to turn into a feedback loop where you end up either eating processor time, or sacrificing resolution and getting unstable results.\u003C/p\u003E\u003Cp\u003EUgh... Get someone who\u0027s strong in practical calculus to go over the problem with you. I hope my comment at least gives you an idea of WHAT math you need to attack with.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m beginning to be afraid that you\u0027re correct. Unfortunately, my education in mathematics dates back well over 30 years and never advanced into Calculus or Trig. So, I\u0027m working with what faulty algebra I have in my head and what Google can provide.\u003C/p\u003E\u003Cp\u003EBut, before I go digging into that mess... I\u0027m trying to exhaust every algebraic solution possible. I am getting close, but not close enough.\u003C/p\u003E\u003Cp\u003EI\u0027m discovering that the CoM is in no way the fulcrum. After watching closely as I transferred the resource back and forth that it pivots in one exact spot. Now I know I read somewhere not to do this, but since I\u0027m grasping at straws I thought I\u0027d try... I put in FlightGlobals.ActiveVessel.findLocalCenterOfPressure() as the fulcrum and I got closer than I have with any other Vecor3. Using it, the best I could get was about a 45 degree down angle. Now since there\u0027s other ship mass involved (like rudders, dive planes, the bridge, the engine, liquid fuel and the parts themselves. ) this may actually be the center of buoyancy but....\u003C/p\u003E\u003Cp\u003EOh crap....\u003C/p\u003E\u003Cp\u003ENow that I just spat that out I realize one of my problems. There\u0027s 600 units of LF close to the aft end of the ship in the \u0027generator\u0027 that I completely forgot about... crap... Now I have to start over from scratch looking for the fulcrum....\u003C/p\u003E\u003Cp\u003ECrap!\u003C/p\u003E\u003Cp\u003EYea, so sometimes it does help to just start talking to others about problems when the brain fart hits. Off to coding...\u003C/p\u003E\n"},{"CreatedByName":"AdmiralTigerclaw","CreatedById":92104,"CreatedDateTime":"2015-10-11T12:53:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Fengist\u0022 data-cite=\u0022Fengist\u0022\u003E\u003Cdiv\u003EI\u0027m beginning to be afraid that you\u0027re correct. Unfortunately, my education in mathematics dates back well over 30 years and never advanced into Calculus or Trig. So, I\u0027m working with what faulty algebra I have in my head and what Google can provide.\u003Cp\u003EBut, before I go digging into that mess... I\u0027m trying to exhaust every algebraic solution possible. I am getting close, but not close enough.\u003C/p\u003E\u003Cp\u003EI\u0027m discovering that the CoM is in no way the fulcrum. After watching closely as I transferred the resource back and forth that it pivots in one exact spot. Now I know I read somewhere not to do this, but since I\u0027m grasping at straws I thought I\u0027d try... I put in FlightGlobals.ActiveVessel.findLocalCenterOfPressure() as the fulcrum and I got closer than I have with any other Vecor3. Using it, the best I could get was about a 45 degree down angle. Now since there\u0027s other ship mass involved (like rudders, dive planes, the bridge, the engine, liquid fuel and the parts themselves. ) this may actually be the center of buoyancy but....\u003C/p\u003E\u003Cp\u003EOh crap....\u003C/p\u003E\u003Cp\u003ENow that I just spat that out I realize one of my problems. There\u0027s 600 units of LF close to the aft end of the ship in the \u0027generator\u0027 that I completely forgot about... crap... Now I have to start over from scratch looking for the fulcrum....\u003C/p\u003E\u003Cp\u003ECrap!\u003C/p\u003E\u003Cp\u003EYea, so sometimes it does help to just start talking to others about problems when the brain fart hits. Off to coding...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI actually ended up discussing this thread with my father yesterday (His Credentials: Ex Navy, Ex Nuclear Engineer, Retired). He pretty much agreed, you need to break into some engineering math (Calculus) to solve this. Trust me, I know you want to find the algebraic solution to the problem, but believe it or not the algebra version is HARDER than the calculus. That\u0027s WHY calculus was created in the first place. I know that sounds a bit crazy, but after seeing clear cut examples of WHY you use it in place of algebra, I am telling you from experience that this is going to stymie you and then leave you with a piece of math 10 times more complicated than it needs to be, and fifty times longer.\u003C/p\u003E\u003Cp\u003ESo I really can\u0027t emphasize enough, you need someone who\u0027s got solid engineering experience under their belt, and knowledge of Calculus III or better (I\u0027m pretty certain this problem is going to need an equation that\u0027s around or slightly above a Laplace Transform, well above simple integration, and likely a differential equation). So you might want to poke around some engineering, naval engineering, and math forums. Heck, my father mentioned that what you\u0027re trying to do is something the US navy has been doing since before we were twinkles in our parents\u0027 eyes. (Adjusting the balance of things like destroyers through ballast pumps and the like.) \u003C/p\u003E\u003Cp\u003EI\u0027m sure if you go asking around the right circles, there\u0027ll be a naval engineer who can help you.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-11T14:22:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022AdmiralTigerclaw\u0022 data-cite=\u0022AdmiralTigerclaw\u0022\u003E\u003Cdiv\u003EI (His Credentials: Ex Navy, Ex Nuclear Engineer, Retired). \u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh, a Nukeypoo... or push-button third as we called them. I was initially offered that as a job in the Navy, till they found out I was half deaf and the medical waiver said... no subs, no ionizing radiation... so they made me a journalist.\u003C/p\u003E\u003Cp\u003EI realize you\u0027re probably right but either way I go there are some serious complications. If I go the algebra route, you\u0027re right, there\u0027s a ton of possible variables that go into it, especially since this is designed to be a modular sub and I really have no idea how the parts are going to be put together. If I go the calculus route, there\u0027s still a lot of unknowns, like how quickly the dive angles change when I do move the mass around. I know InfiniteDice solved this problem with his sub by simply moving mass back and forth until a balance was achieved, no real calculus or algebra, just guesswork. But, his sub stays pretty much the same when users assemble it.\u003C/p\u003E\n"},{"CreatedByName":"AdmiralTigerclaw","CreatedById":92104,"CreatedDateTime":"2015-10-11T14:53:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Fengist\u0022 data-cite=\u0022Fengist\u0022\u003E\u003Cdiv\u003EAh, a Nukeypoo... or push-button third as we called them. I was initially offered that as a job in the Navy, till they found out I was half deaf and the medical waiver said... no subs, no ionizing radiation... so they made me a journalist.\u003Cp\u003EI realize you\u0027re probably right but either way I go there are some serious complications. If I go the algebra route, you\u0027re right, there\u0027s a ton of possible variables that go into it, especially since this is designed to be a modular sub and I really have no idea how the parts are going to be put together. If I go the calculus route, there\u0027s still a lot of unknowns, like how quickly the dive angles change when I do move the mass around. I know InfiniteDice solved this problem with his sub by simply moving mass back and forth until a balance was achieved, no real calculus or algebra, just guesswork. But, his sub stays pretty much the same when users assemble it.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy father was a reactor operator on the Stergeon... (Fast Attack Sub)\u003C/p\u003E\u003Cp\u003EBut anywho, that\u0027s part of fixing the unknown. The calculus equation does instantly what InfiniteDice does with his back and forth guessing. To begin with, you need at LEAST a Function. That instantly handles ID\u0027s guess and check since it solves for all points rather than trying to guess and sort. If that was it, you\u0027d just need an F(x) (F of X) equals [bLAH] equation, and you\u0027d be done. But because your \u0027fulcrum\u0027 point moves around, you have to plug that beast in and solve a recursive mess that constantly shifts as new values are plugged in.\u003C/p\u003E\u003Cp\u003EProblem of course, if you use fixed points, you suffer inaccuracy much like how trying to find the area under a curved line suffers inaccuracy when you chop it into rectangular boxes and add the areas together. The workaround is to increase resolution by making the boxes smaller and smaller, but that exponentially increases the number of equations you need to do until calculations per unit time approach infinity. Do that and you\u0027ll melt your PC.\u003C/p\u003E\u003Cp\u003EAn Integral (Calc II) is an equation that literally goes \u0027Resolution = Infinity\u0027, and solves it in one shot, provided you bound the X axis of the curve between two points. (Otherwise, area IS infinity... You know, because lines never end. Well... Most lines. -X^2 \u002B [Whatever] could get away with a limited area easily since area under the curve only counts above zero on the Y axis. At least, in any equation I\u0027ve ever had to screw with.)\u003C/p\u003E\u003Cp\u003EPM me if you\u0027re interested in a Skype conversation. I can edimacate you on the concepts of basic calculus in about an hour without any nasty equations. (Calculus is not as nasty as most would have you think. It\u0027s just intimidating because there are some extremely complex functions that don\u0027t play nice. And you need some pretty beastly equations to solve them. And it\u0027s the Algebra in said equations that kills you. At it\u0027s core, it\u0027s stupid simple to the point that after I finished explaining integration to a friend of mine after he roadblocked with his calc professor, his response was \u0027That\u0027s IT?!\u0027. [Yes, that is it.])*\u003C/p\u003E\u003Cp\u003EBut back on topic, you have a function where you have the options to choose inaccuracy, PC melting recalculation, or finding someone who can teach you the function you need to use here. My father mentioned this particular problem should actually be no sweat for mechanical engineer.\u003C/p\u003E\u003Cp\u003E*I should mention. I made As in my calculus courses and impressed my instructor. I really do mean it when the concept is simple. I got my score through a combination of remembering what I was doing at the core, and brute forcing my way through the algebra the nasty stuff threw at me. In terms of difficulty, Calc ranks: \u0027Tedious\u0027 And I\u0027d know it even better, but I HATE Tedium.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-10-12T00:05:18Z","Content":"\n\u003Cp\u003EMy wife and I were just discussing this little problem. While she doesn\u0027t quite understand it, she very often makes me think these problems out in new ways... and she once again succeeded.\u003C/p\u003E\u003Cp\u003EI realized that figuring this out was simple (well, there is a sin or two in there) geometry...\u003C/p\u003E\u003Cp\u003EI can get the distance between the two parts.\u003C/p\u003E\u003Cp\u003EI can get the altitude of the two parts.\u003C/p\u003E\u003Cp\u003EI can get the angle of the part compared to the planet\u0027s up direction.\u003C/p\u003E\u003Cp\u003ETherefore, I need only to get the altitude of one part and find the angle toward the other part.\u003C/p\u003E\u003Cp\u003ETransfer a small amount of fuel, wait a couple seconds for the sub to change it\u0027s dive angle.\u003C/p\u003E\u003Cp\u003EThen, get the altitude and angle again.\u003C/p\u003E\u003Cp\u003EI then have 2 angles and one side of a triangle. From that, I should be able to get the exact distance to the fulcrum. Once I have the fulcrum, I can get the total mass of the vessel and use the lever calculation to find out roughly how much mass is on each end and then, calculate how much needs to be moved to balance the lever.\u003C/p\u003E\u003Cp\u003EIf I repeat this calculation a few times, I should achieve balance. \u003C/p\u003E\u003Cp\u003EWell, that\u0027s the theory anyway.\u003C/p\u003E\u003Cp\u003Eedit...\u003C/p\u003E\u003Cp\u003EA theory that proved fruitless. Though I was able to get the angles needed and one side of the triangle, as I pitched the sub back and forth I was hoping to see a relatively constant distance to the fulcrum... instead, I got measurements that ran between 3 and 50 meters.\u003C/p\u003E\u003Cp\u003ESo, that didn\u0027t work.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-10-12T02:06:29Z\u0022 title=\u002210/12/2015 02:06  AM\u0022 data-short=\u00228 yr\u0022\u003EOctober 12, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2016-02-24T19:29:36Z","Content":"\n\u003Cp\u003E\nYou are trying to find a static solution in a dynamic system.\n\u003C/p\u003E\n\u003Cp\u003E\nYou don\u0027t really need a accurate value and done it once for all, you just need a PID control and balance it as good as you can.\n\u003C/p\u003E\n"}]}