{"TopicId":183923,"ForumId":29,"TopicTitle":"Modify Engine Stats Through C#","CreatedByName":"zberry7","CreatedById":196447,"CreatedDateTime":"2019-04-22T03:35:37Z","PageNum":1,"Articles":[{"CreatedByName":"zberry7","CreatedById":196447,"CreatedDateTime":"2019-04-22T03:35:37Z","Content":"\n\u003Cp\u003E\nI\u0027m looking to create something that can change the stats of multiple engines (i.e. \u003Cabbr title=\u0022Specific Impulse (rocketry) or Internet Service Provider\u0022\u003EISP\u003C/abbr\u003E, thrust). The way I\u0027m trying to do it right now is to create a PartModule, attach it to all of the parts via a ModuleManager patch, and try to have this PartModule modify the engine stats at load time, but I\u0027m not sure if I am going about it properly. I created an OnLoad override, and I am able to get the Engine module that is attached to the part, and I am iterating through the \u0027Fields\u0027 property of the engine module, but, the atmCurveIsp field has zero points, and useAtmCurveIsp is false.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI understand I can accomplish this through ModuleManager alone, but I wanted to write some more complicated algorithms to calculate the updated engine stats. If anyone can point me in the correct direction, I would greatly appreciate it!\n\u003C/p\u003E\n"},{"CreatedByName":"peteletroll","CreatedById":144573,"CreatedDateTime":"2019-04-23T06:34:37Z","Content":"\n\u003Cp\u003E\nI\u0027d try OnStart() instead of OnLoad().\n\u003C/p\u003E\n"},{"CreatedByName":"cakepie","CreatedById":69278,"CreatedDateTime":"2019-04-28T16:00:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223587720\u0022 data-ipsquote-contentid=\u0022183923\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221555904137\u0022 data-ipsquote-userid=\u0022196447\u0022 data-ipsquote-username=\u0022zberry7\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 4/21/2019 at 8:35 PM, zberry7 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI understand I can accomplish this through ModuleManager alone, but I wanted to write some more complicated algorithms to calculate the updated engine stats\u003Cspan\u003E\uFEFF\u003C/span\u003E.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo you absolutely need to run your \u0022more complicated algorithms\u0022 at runtime within KSP? If the modifications that you want to make to the engine stats can be effected purely by changing the configs (directly or via \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E) and don\u0027t need to override any of the methods in ModuleEngines, then one option is to write your algols in a separate program that will generate the required \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patch!\n\u003C/p\u003E\n"},{"CreatedByName":"JadeOfMaar","CreatedById":167617,"CreatedDateTime":"2019-04-28T17:04:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223587720\u0022 data-ipsquote-contentid=\u0022183923\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221555904137\u0022 data-ipsquote-userid=\u0022196447\u0022 data-ipsquote-username=\u0022zberry7\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 4/21/2019 at 11:35 PM, zberry7 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI am able to get the Engine module that is attached to the part, and I am iterating through the \u0027Fields\u0027 property of the engine module, but, the atmCurveIsp field has zero points, and useAtmCurveIsp is false.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI understand I can accomplish this through ModuleManager alone\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you\u0027re looking for Isp changing with atmosphere pressure then target \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EatmosphereCurve{}\u003C/span\u003E. That\u0027s what everyone uses, and likely nobody uses \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EatmCurveIsp{}\u003C/span\u003E.\n\u003C/p\u003E\n"},{"CreatedByName":"zberry7","CreatedById":196447,"CreatedDateTime":"2019-04-29T20:10:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223590756\u0022 data-ipsquote-contentid=\u0022183923\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221556471062\u0022 data-ipsquote-userid=\u0022167617\u0022 data-ipsquote-username=\u0022JadeOfMaar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn \u200E4\u200E/\u200E28\u200E/\u200E2019 at 1:04 PM, JadeOfMaar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you\u0027re looking for Isp changing with atmosphere pressure then target \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EatmosphereCurve{}\u003C/span\u003E. That\u0027s what everyone uses, and likely nobody uses \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EatmCurveIsp{}\u003C/span\u003E.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI ended up finding a (probably worse) way to do it before everyone responded, I basically just subclassed ModuleEngines (and ModuleEngineFX), and overrode OnLoad, then I just modify the config node that\u0027s passed in as a parameter, and it works quite well. I used \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E to switch all ModuleEngines with the subclassed version. So far its worked with all the mods I have tried it with. I basically just wanted to classify each engine at load time into categories like Upper/Lower/Sustainer/High Efficiency based on the original stats, so I can more accurately buff the stats so I can play \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E without \u003Cabbr title=\u0022Realism Overhaul (mod)\u0022\u003ERO\u003C/abbr\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-04-29T20:14:15Z\u0022 title=\u002204/29/2019 08:14  PM\u0022 data-short=\u00225 yr\u0022\u003EApril 29, 2019\u003C/time\u003E by zberry7\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Flibble","CreatedById":196830,"CreatedDateTime":"2019-04-29T21:57:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223590756\u0022 data-ipsquote-contentid=\u0022183923\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221556471062\u0022 data-ipsquote-userid=\u0022167617\u0022 data-ipsquote-username=\u0022JadeOfMaar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 4/28/2019 at 6:04 PM, JadeOfMaar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you\u0027re looking for Isp changing with atmosphere pressure then target \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EatmosphereCurve{}\u003C/span\u003E. That\u0027s what everyone uses, and likely nobody uses \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EatmCurveIsp{}\u003C/span\u003E.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIsn\u0027t atmCurveIsp for jet engines that vary with height?\n\u003C/p\u003E\n"}]}