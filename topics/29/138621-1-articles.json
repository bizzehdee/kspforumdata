{"TopicId":138621,"ForumId":29,"TopicTitle":"Module Manager syntax \u0026amp; changing textures without editing models","CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2016-05-01T04:40:01Z","PageNum":1,"Articles":[{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2016-05-01T04:40:01Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022line-height:1.6;\u0022\u003EHey, so I have a few personal tweaks I make to some of the mods I use and I recently decided that I should create module manager patches to apply these tweaks so I don\u0027t have to go edit the cfg files in the mods every time they update.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, I\u0027m not totally fluent in module manager syntax and the github wiki pages on it don\u0027t have examples for everything so I just wanted to post the patches I\u0027m working on here to make sure I\u0027m doing stuff properly.For one patch, I wanted to make all the parts which use or store MetalOre use Ore instead, however, the patch didn\u0027t seem to do anything, here it is:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[*]:NEEDS[Launchpad]:Final\n{\u00A0\n@ResourceName.*[MetalOre]{@name = Ore}\n}\n\n@PART[HexCanOreHuge]:NEEDS[Launchpad]:Final\n{\u00A0\n@title = HexCan-Ore-Huge\n@description = A 6m long resource canister containing Ore\n}\n\n@PART[HexCanOreLarge]:NEEDS[Launchpad]:Final\n{\u00A0\n@title = HexCan-Ore-Large\n@description = A 3m long resource canister containing Ore\n}\n\n@PART[HexCanOre]:NEEDS[Launchpad]:Final\n{\u00A0\n@title = HexCan-Ore\n@description = A 1.5m long resource canister containing Ore\n}\n\n@PART[HexCanOreSmall]:NEEDS[Launchpad]:Final\n{\u00A0\n@title = HexCan-Ore-Small\n@description = A 0.75m long resource canister containing Ore\n}\n\n\n@PART[ELTankLargeORE]:NEEDS[Launchpad]:Final\n{\u00A0\n@title = MSV-2000 Ore Container\n}\n\n@PART[ELTankMedORE]:NEEDS[Launchpad]:Final\n{\u00A0\n@title = MSV-1000 Ore Container\n}\n\n@PART[ELTankSmlORE]:NEEDS[Launchpad]:Final\n{\u00A0\n@title = MSV-500 Ore Container\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI\u0027ve checked and double checked my syntax and by all accounts this looks to me as if it should work, however it has no effect ingame.Secondly, I wanted to disable Progressive Builds in EL, since as far as I can tell you can\u0027t disable them anymore, and with crewed vessels this seems to have worked, but unfortunately I can\u0027t seem to figure out how to allow probe operated vessels with no crew build ships. I tried both setting IgnoreCrewCapacity to true and removing IgnoreCrewCapacity altogether and neither seemed to have any effect. Let me know if there\u0027s actually a way to disable Progressive Builds (including allowing probes to build stuff) as I\u0027ll just do that, however, if there isn\u0027t, I imagine this patch will come in handy to a number of people.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[*]:NEEDS[Launchpad]:HAS[@MODULE[ExWorkshop]]:Final\n{\n@MODULE[ExWorkshop] {\n\u00A0\u00A0\u00A0\u00A0@ProductivityFactor = 1000000\n\u00A0\u00A0\u00A0\u00A0//@IgnoreCrewCapacity = true\n\u00A0\u00A0\u00A0\u00A0!IgnoreCrewCapacity.* \u00A0// I wanted to allow building things without Kerbals but I can\u0027t seem to get it working.\n\u00A0\u00A0\u00A0\u00A0}\n}\n@EXPERIENCE_TRAIT[Pilot]:NEEDS[Launchpad] {\n\u00A0\u00A0\u00A0\u00A0EFFECT {\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0name = ExConstructionSkill\n\u00A0\u00A0\u00A0\u00A0}\n}\n\n@EXPERIENCE_TRAIT[Scientist]:NEEDS[Launchpad] {\n\u00A0\u00A0\u00A0\u00A0EFFECT {\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0name = ExConstructionSkill\n\u00A0\u00A0\u00A0\u00A0}\n}\n\n@EXPERIENCE_TRAIT[Tourist]:NEEDS[Launchpad] {\n\u00A0\u00A0\u00A0\u00A0EFFECT {\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0name = ExConstructionSkill\n\u00A0\u00A0\u00A0\u00A0}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nFurthermore, this patch seems to be conflicting with another I made to allow you to build Rocketparts from the Survey Station (and build rockets there too), seemingly making the addition of a building rocketparts void. See below:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[ExSurveyStation]:NEEDS[Launchpad]\n{\n\u00A0\u00A0\u00A0\u00A0MODULE {\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0name = ExWorkshop // Allows you to actually build ships\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0ProductivityFactor = 2.5\n\u00A0\u00A0\u00A0\u00A0}\n\n\u00A0\u00A0\u00A0\u00A0MODULE {\n\u00A0\u00A0\u00A0\u00A0// Only produces parts at half the speed of the full workshop,\n\u00A0\u00A0\u00A0\u00A0// but it allows for building smaller ships and bases.\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0name = ExConverter\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0StartActionName = Start Part Production\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0StopActionName = Stop Part Production\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0INPUT_RESOURCE {\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0ResourceName = Metal\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0Ratio = 0.00975\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0}\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0INPUT_RESOURCE {\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0ResourceName = ElectricCharge\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0Ratio = 5\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0}\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0OUTPUT_RESOURCE {\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0ResourceName = RocketParts\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0Ratio = 0.35\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0}\n\u00A0\u00A0\u00A0\u00A0}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nLastly, back in 0.25, I had made a stockalike retexture of the workshop from Extraplanetary Launchpads by changing the blue to a light grey. I wanted to bring this forward to my current build of the game and again, I was hoping to only do this with a simple modulemanager patch so I don\u0027t have to reapply the edit every time EL updates. Unfortunately, the patch I wrote doesn\u0027t seem to do anything. See below:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[ExWorkshop]:NEEDS[Launchpad]\n{\n\u00A0\u00A0 \u00A0@MODEL {\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0texture = ExLtweaks/Textures/Workshop/Hatch, ExLtweaks/Textures/Workshop/Hull\n\u00A0\u00A0 \u00A0}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI\u0027m hoping to release these patches as I imagine others may enjoy playing with them, but I of course need them to work first! Thanks for any help I can get. I\u0027m getting the hang of modulemanager a lot more now and am really enjoying both modding and playing the 1.1.\u002B branch. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Starstrider42","CreatedById":104043,"CreatedDateTime":"2016-05-01T08:37:42Z","Content":"\n\u003Cp\u003E\nWell, your first config refers to a module called \u0022ResourceName\u0022, which isn\u0027t found in any part. I don\u0027t think the \u0022.*\u0022 is valid syntax, either (though I could be wrong). Try:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n// Fix resource storage\n@PART:HAS[@RESOURCE[MetalOre]]:NEEDS[Launchpad]:Final\n{ \n\t@RESOURCE[MetalOre]\n\t{\n\t\t@name = Ore\n\t}\n}\n\n// Fix resource conversion\n@PART:HAS[@MODULE[ExExtractor]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ExExtractor]:HAS[#ResourceName[MetalOre]]\n\t{\n\t\t@ResourceName = Ore\n\t}\n}\n\n// Fix resource conversion\n@PART:HAS[@MODULE[ExConverter]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ExConverter]\n\t{\n\t\t@INPUT_RESOURCE:HAS[#ResourceName[MetalOre]]\n\t\t{\n\t\t\t@ResourceName = Ore\n\t\t}\n\t\t@OUTPUT_RESOURCE:HAS[#ResourceName[MetalOre]]\n\t\t{\n\t\t\t@ResourceName = Ore\n\t\t}\n\t}\n}\n\n// Fix resource detection\n@PART:HAS[@MODULE[KethaneDetector]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[KethaneDetector]\n\t{\n\t\t@Resource:HAS[#Name[MetalOre]] {\n\t\t\t@Name = Ore\n\t\t}\n\t}\n}\n\n// Fix resource detection\n@PART:HAS[@MODULE[ModuleResourceScanner]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ModuleResourceScanner]:HAS[#ResourceName[MetalOre]]\n\t{\n\t\t@ResourceName = Ore\n\t}\n}\n\n// Fix resource detection\n@PART:HAS[@MODULE[ModuleAnalysisResource]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ModuleAnalysisResource]:HAS[#resourceName[MetalOre]]\n\t{\n\t\t@resourceName = Ore\n\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\n(The :HAS on the top-level parts is not strictly necessary, and prevents you from having one @PART block around everything else, but why should ModuleManager have to carefully scan each and every part that\u0027s unrelated to resources or EPL?)\n\u003C/p\u003E\n\u003Cp\u003E\nBTW, you may need to adjust the ratios on ExConverter for the modified conversions to stay balanced. I\u0027m not sure if that was an oversight or not.\n\u003C/p\u003E\n\u003Cp\u003E\nFor the second patch, the experience and productivity patches appear to be correct. For the unmanned bit, try either \u0022%IgnoreCrewCapacity = true\u0022 (the old version did nothing if the config did not have IgnoreCrewCapacity) or \u0022!IgnoreCrewCapacity = anyvalue\u0022 (the old version should have been marked as invalid, as it had neither = nor {}). I can\u0027t comment on whether these changes will actually enable probe builds, it\u0027s been a long time since I\u0027ve played EPL.\n\u003C/p\u003E\n\u003Cp\u003E\nThe biggest problem with the third patch is that it\u0027s run in the second round of MM patches (since you don\u0027t give a :FIRST, :FINAL, :BEFORE, :FOR, or :AFTER). Since ExSurveyStation is itself created by a MM patch in :AFTER[Launchpad], the part does not exist at the time you\u0027re trying to modify it. Since you need to force execution after :AFTER[Launchpad], I\u0027d suggest using either :FINAL or :FOR[\u0026lt;my-mod-name-that\u0027s-alphabetically-after-L\u0026gt;]. A second problem is that the station already has an ExWorkshop, so after your patch there will be two. My final recommendation is\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n@PART[ExSurveyStation]:NEEDS[Launchpad]:FINAL\n{\n    @MODULE[ExWorkshop] {\n        %ProductivityFactor = 2.5\n    }\n\n    MODULE {\n    // Only produces parts at half the speed of the full workshop,\n    // but it allows for building smaller ships and bases.\n        name = ExConverter\n        StartActionName = Start Part Production\n        StopActionName = Stop Part Production\n        INPUT_RESOURCE {\n            ResourceName = Metal\n            Ratio = 0.00975\n        }\n        INPUT_RESOURCE {\n            ResourceName = ElectricCharge\n            Ratio = 5\n        }\n        OUTPUT_RESOURCE {\n            ResourceName = RocketParts\n            Ratio = 0.35\n        }\n    }\n}\u003C/pre\u003E\n\u003Cp\u003E\n(I *really* wish MM had a way to say \u0022create a module by this name or modify it if it already exists\u0022, but as far as I know doesn\u0027t.)\n\u003C/p\u003E\n\u003Cp\u003E\nI can\u0027t help much with the fourth patch, because I know nothing about part models. Reading GameData/ModuleManager.ConfigCache (which is an excellent MM debugging method, I highly recommend it), the modified ExWorkshop config has:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nMODEL\n{\n\tmodel = ExtraplanetaryLaunchpads/Parts/Workshop/workshop\n\tposition = 0.0, 0.0, 0.0\n\trotation = 0.0, 0.0, 0.0\n\tscale = 1.0, 1.0, 1.0\n\ttexture = ExLtweaks/Textures/Workshop/Hatch, ExLtweaks/Textures/Workshop/Hull\n}\u003C/pre\u003E\n\u003Cp\u003E\nIs that what it\u0027s supposed to look like?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-01T09:18:33Z\u0022 title=\u002205/01/2016 09:18  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 1, 2016\u003C/time\u003E by Starstrider42\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2016-05-01T17:00:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222552485\u0022 data-ipsquote-contentid=\u0022138621\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462091862\u0022 data-ipsquote-userid=\u0022104043\u0022 data-ipsquote-username=\u0022Starstrider42\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Starstrider42 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nsnip\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHey, thanks for the in depth writeup. I\u0027m going over my patches now and I see where I\u0027ve gone wrong in a lot of places. Also, you were right, \u0022period\u002Basterix\u0022 is not proper syntax, I mistook it for \u0022comma\u002Basterix\u0022 which searches all keys of the name you specified and edits them all. It\u0027s in the \u003Ca href=\u0022https://github.com/sarbian/ModuleManager/wiki/Module-Manager-Handbook\u0022 rel=\u0022external nofollow\u0022\u003Emodule manager handbook\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nAs for the ore stuff, I\u0027m gonna take a look into the converters and do the math to make sure the balancing is right for the final patch, thanks for reminding me of that. I\u0027m also gonna try changing the \u0022 @\u00A0\u0022 to \u0022 % \u0022 for the descriptions and titles and see if that works.\n\u003C/p\u003E\n\u003Cp\u003E\nAs for the Survey Station, I forgot that it already had a workshop, so I\u0027m just gonna exclude those lines from my patch, as they seem to conflict with the DisableProgressiveBuilds patch I made. I added \u0022:Final\u0022 to the patch too, so it should hopefully actually apply now.\n\u003C/p\u003E\n\u003Cp\u003E\nFinally, with the texture replacer, that is what I wanted the patch to do, but since changing the texture paths in the part file doesn\u0027t seem to do anything, I might just give up and open the model in unity to manually change the texture. It\u0027s not ideal as it\u0027s more work for me and I have to redistribute a modified model that is essentially the same, but I suppose if there\u0027s no other way to change the texture without replacing the original\u00A0it\u0027s what I\u0027ll have to do.\n\u003C/p\u003E\n"},{"CreatedByName":"Stone Blue","CreatedById":77721,"CreatedDateTime":"2016-05-01T17:38:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222553218\u0022 data-ipsquote-contentid=\u0022138621\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462122008\u0022 data-ipsquote-userid=\u0022140335\u0022 data-ipsquote-username=\u0022Markelius\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n39 minutes ago, Markelius said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFinally, with the texture replacer, that is what I wanted the patch to do, but since changing the texture paths in the part file doesn\u0027t seem to do anything, I might just give up and open the model in unity to manually change the texture. It\u0027s not ideal as it\u0027s more work for me and I have to redistribute a modified model that is essentially the same, but I suppose if there\u0027s no other way to change the texture without replacing the original\u00A0it\u0027s what I\u0027ll have to do.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt may not be exactly what you want it to do, and it would require adding the Firespitter or B9 plugin .dlls as a dependency, but both those mods have texture switchers... I know the Firespitter one works in-game, allowing texture switches in the editor, simply, using the right-click menu...\n\u003C/p\u003E\n\u003Cp\u003E\nThere is an excellent document explaining the .cfg modules for Firespitter somewhere on the Git repo...\u003Cbr\u003E\u003Cbr\u003E\nHere\u0027s an example of using the FSTextureSwitch2 in the DeadSkins textures for AviationLights (sorry for the long folder names...lol):\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[lightbeacon_amber]\n{\n\tMODULE\n\t\t{\n\t\t\tname = FStextureSwitch2\n\t\t\ttextureNames = AviationLights/Parts/lights/model000beacon_amber;DeadSkins/model000beacon_amber-clear;DeadSkins/model000beacon_amber-fisheye;DeadSkins/model000beacon_amber-glass;DeadSkins/model000beacon_amber-pyramid;DeadSkins/model000beacon_amber-square\n\t\t\tobjectNames = light\n\t\t\ttextureDisplayNames = Original;Clear;Fisheye;Glass;Pyramid;Square\n\t\t\tstatusText = Current Texture\n\t\t\tshowPreviousButton = false\n\t\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-01T17:40:41Z\u0022 title=\u002205/01/2016 05:40  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 1, 2016\u003C/time\u003E by Stone Blue\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Warezcrawler","CreatedById":145377,"CreatedDateTime":"2016-05-01T17:43:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222552485\u0022 data-ipsquote-contentid=\u0022138621\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462091862\u0022 data-ipsquote-userid=\u0022104043\u0022 data-ipsquote-username=\u0022Starstrider42\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, Starstrider42 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n(I *really* wish MM had a way to say \u0022create a module by this name or modify it if it already exists\u0022, but as far as I know doesn\u0027t.)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIsn\u0027t that what the % operator is for? According to the documentation @ is for modifying if it exists, and % is for modify if exist else create it.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-01T17:43:56Z\u0022 title=\u002205/01/2016 05:43  PM\u0022 data-short=\u00228 yr\u0022\u003EMay 1, 2016\u003C/time\u003E by Warezcrawler\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starstrider42","CreatedById":104043,"CreatedDateTime":"2016-05-01T17:44:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222553218\u0022 data-ipsquote-contentid=\u0022138621\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462122008\u0022 data-ipsquote-userid=\u0022140335\u0022 data-ipsquote-username=\u0022Markelius\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n40 minutes ago, Markelius said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHey, thanks for the in depth writeup. I\u0027m going over my patches now and I see where I\u0027ve gone wrong in a lot of places. Also, you were right, \u0022period\u002Basterix\u0022 is not proper syntax, I mistook it for \u0022comma\u002Basterix\u0022 which searches all keys of the name you specified and edits them all. It\u0027s in the \u003Ca href=\u0022https://github.com/sarbian/ModuleManager/wiki/Module-Manager-Handbook\u0022 rel=\u0022external nofollow\u0022\u003Emodule manager handbook\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cp\u003E\nAs for the ore stuff, I\u0027m gonna take a look into the converters and do the math to make sure the balancing is right for the final patch, thanks for reminding me of that. I\u0027m also gonna try changing the \u0022 @\u00A0\u0022 to \u0022 % \u0022 for the descriptions and titles and see if that works.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe Wiki is helpful, but I think ,* (btw, asterisk \u2260 Asterix) might not actually be needed any more -- the default behavior is to mod everything that matches. When I tested your patches, the descriptions and titles appeared to be fine -- it was only the actual resources that didn\u0027t get changed.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222553306\u0022 data-ipsquote-contentid=\u0022138621\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221462124624\u0022 data-ipsquote-userid=\u0022145377\u0022 data-ipsquote-username=\u0022Warezcrawler\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Warezcrawler said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIsn\u0027t that what the % operator is for? According to the documentation @ is for modifying if it exists, and % is for modify if exist else create it.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn my experience that only works for values. I posted about it on the MM thread a while back but didn\u0027t get any answers that weren\u0027t workarounds.\n\u003C/p\u003E\n"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2016-05-01T22:08:23Z","Content":"\n\u003Cp\u003E\nOkay, my edits to the patches are going well, I got the names and descriptions on things to change, and my DisableProgressiveBuilds patch seems to be working, I couldn\u0027t get builds without a crew to work, but hey, I\u0027ll take my success for now.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m gonna finish writing the ore patch and then I should be able to release my mod. I have this mod to tweak extraplanetary launchpads and another to disable the core\u00A0heat system on ISRU\u0027s and Drills (which is working perfectly).\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll post in this thread again if I hit another snag, but I think it\u0027s just a matter of finishing touches now, thanks for the help! I appreciate it. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2016-05-02T01:13:35Z","Content":"\n\u003Cp\u003E\nHey, I\u0027m back. \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u00A0I seem to have gotten all my tweaks working except a few things with the metalore to ore patch. The way you\u0027re supposed to handle modifying entries that are nested under other entries is confusing me so I know I\u0027m probably doing something wrong here. The names and descriptions of stuff changed, but the smelters don\u0027t work and the ore containers do store ore now, but they also store metalore as well? Don\u0027t know what\u0027s happening there. I modified the Augers too but I haven\u0027t gotten a chance to test them since I\u0027m pretty sure in all my time playing Extraplanetary Launchpads I\u0027ve always used Roverdude\u0027s drills or stock drills.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyways, here\u0027s my patch:\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[*Auger]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ExExtractor]:HAS[#ResourceName[MetalOre]]\n\t{\n\t\t@ResourceName = Ore //With how tough the EL Augers are to use, I don\u0027t think their ratio needs to be changed.\n\t}\n}\n\n//Below section changes resource storage containers and modifies their titles and descriptions.\n\n@PART:HAS[@RESOURCE[MetalOre]]:NEEDS[Launchpad]:Final\n{ \n\t@RESOURCE[@name[MetalOre]]\n\t{\n\t\t@name = Ore\n\t}\n}\n\n@PART[HexCanOreHuge]:NEEDS[Launchpad]:Final\n{ \n@title = HexCan-Ore-Huge\n@description = A 6m long resource canister containing Ore\n}\n\n@PART[HexCanOreLarge]:NEEDS[Launchpad]:Final\n{ \n@title = HexCan-Ore-Large\n@description = A 3m long resource canister containing Ore\n}\n\n@PART[HexCanOre]:NEEDS[Launchpad]:Final\n{ \n@title = HexCan-Ore\n@description = A 1.5m long resource canister containing Ore\n}\n\n@PART[HexCanOreSmall]:NEEDS[Launchpad]:Final\n{ \n@title = HexCan-Ore-Small\n@description = A 0.75m long resource canister containing Ore\n}\n\n\n@PART[ELTankLargeORE]:NEEDS[Launchpad]:Final\n{ \n@title = MSV-2000 Ore Container\n}\n\n@PART[ELTankMedORE]:NEEDS[Launchpad]:Final\n{ \n@title = MSV-1000 Ore Container\n}\n\n@PART[ELTankSmlORE]:NEEDS[Launchpad]:Final\n{ \n@title = MSV-500 Ore Container\n}\n\n\n//use Simpleconstruction ratio for turning ore into metal (ie. 1 ore \u002B 60 ElectricCharge = 0.5 metal)\n//tiny smelter should produce metal at 0.4x the rate, \u0026amp; small smelter should at 0.7937005259840998x (round to 0.8) the rate.\n\n@PART[Smelter]\n{\n\t@MODULE [ExConverter] {\n\t\t@INPUT_RESOURCE:HAS[@ResourceName[MetalOre]] {\n\t\t@ResourceName = Ore\n\t\t@Ratio = 1.0\n\t\t}\n\t\t\n\t\t@INPUT_RESOURCE:HAS[@ResourceName[ElectricCharge]] {\n\t\t@Ratio = 60\n\t\t}\n\t\t\n\t\t@OUTPUT_RESOURCE:HAS[@ResourceName[Metal]] {\n\t\t@Ratio = 0.5\n\t\t}\n}\n}\n\n@PART[SmallSmelter]\n{\n\t@MODULE [ExConverter] {\n\t\t@INPUT_RESOURCE:HAS[@ResourceName[MetalOre]] {\n\t\t@ResourceName = Ore\n\t\t@Ratio = 0.8\n\t\t}\n\t\t\n\t\t@INPUT_RESOURCE:HAS[@ResourceName[ElectricCharge]] {\n\t\t@Ratio = 48\n\t\t}\n\t\t\n\t\t@OUTPUT_RESOURCE:HAS[@ResourceName[Metal]] {\n\t\t@Ratio = 0.4\n\t\t}\n}\n}\n\n@PART[TinySmelter]\n{\n\t@MODULE [ExConverter] {\n\t\t@INPUT_RESOURCE:HAS[@ResourceName[MetalOre]] {\n\t\t@ResourceName = Ore\n\t\t@Ratio = 0.4\n\t\t}\n\t\t\n\t\t@INPUT_RESOURCE:HAS[@ResourceName[ElectricCharge]] {\n\t\t@Ratio = 24\n\t\t}\n\t\t\n\t\t@OUTPUT_RESOURCE:HAS[@ResourceName[Metal]] {\n\t\t@Ratio = 0.2\n\t\t}\n}\n}\n\n// Fix resource detection\n@PART:HAS[@MODULE[KethaneDetector]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[KethaneDetector]\n\t{\n\t\t@Resource:HAS[#Name[MetalOre]] {\n\t\t\t@Name = Ore\n\t\t}\n\t}\n}\n\n// Fix resource detection\n@PART:HAS[@MODULE[ModuleResourceScanner]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ModuleResourceScanner]:HAS[#ResourceName[MetalOre]]\n\t{\n\t\t@ResourceName = Ore\n\t}\n}\n\n// Fix resource detection\n@PART:HAS[@MODULE[ModuleAnalysisResource]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ModuleAnalysisResource]:HAS[#resourceName[MetalOre]]\n\t{\n\t\t@resourceName = Ore\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: Okay, I messed with the patch but it didn\u0027t seem to do anything, descriptions and titles still work but the resource storage doesn\u0027t, and neither do the smelters. I think the smelters store ore now but they also store metal ore? Honestly I\u0027m gonna call it a night for now. I have something else in mind that might work but I\u0027ll try it tomorrow Here\u0027s the updated code:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[*Auger]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ExExtractor]:HAS[#ResourceName[MetalOre]]\n\t{\n\t\t@ResourceName = Ore //With how tough the EL Augers are to use, I don\u0027t think their ratio needs to be changed.\n\t}\n}\n\n//Below section changes resource storage containers and modifies their titles and descriptions.\n\n@PART:HAS[@RESOURCE[@name[MetalOre]]]:NEEDS[Launchpad]:Final\n{ \n\t@RESOURCE[@name[MetalOre]]\n\t{\n\t\t@name = Ore\n\t}\n}\n\n@PART[HexCanOreHuge]:NEEDS[Launchpad]:Final\n{ \n@title = HexCan-Ore-Huge\n@description = A 6m long resource canister containing Ore\n}\n\n@PART[HexCanOreLarge]:NEEDS[Launchpad]:Final\n{ \n@title = HexCan-Ore-Large\n@description = A 3m long resource canister containing Ore\n}\n\n@PART[HexCanOre]:NEEDS[Launchpad]:Final\n{ \n@title = HexCan-Ore\n@description = A 1.5m long resource canister containing Ore\n}\n\n@PART[HexCanOreSmall]:NEEDS[Launchpad]:Final\n{ \n@title = HexCan-Ore-Small\n@description = A 0.75m long resource canister containing Ore\n}\n\n\n@PART[ELTankLargeORE]:NEEDS[Launchpad]:Final\n{ \n@title = MSV-2000 Ore Container\n}\n\n@PART[ELTankMedORE]:NEEDS[Launchpad]:Final\n{ \n@title = MSV-1000 Ore Container\n}\n\n@PART[ELTankSmlORE]:NEEDS[Launchpad]:Final\n{ \n@title = MSV-500 Ore Container\n}\n\n\n//use Simpleconstruction ratio for turning ore into metal (ie. 1 ore \u002B 60 ElectricCharge = 0.5 metal)\n//tiny smelter should produce metal at 0.4x the rate, \u0026amp; small smelter should at 0.7937005259840998x (round to 0.8) the rate.\n\n@PART[Smelter]\n{\n\t@INPUT_RESOURCE,0 {\n\t\t@ResourceName = Ore\n\t\t@Ratio = 1.0\n\t\t}\n\t\t\n\t@INPUT_RESOURCE,1 {\n\t\t@Ratio = 60\n\t\t}\n\t\t\n\t@OUTPUT_RESOURCE,0 {\n\t\t@Ratio = 0.5\n\t\t}\n}\n}\n\n@PART[SmallSmelter]\n{\n\t@INPUT_RESOURCE,0 {\n\t\t@ResourceName = Ore\n\t\t@Ratio = 0.8\n\t\t}\n\t\t\n\t@INPUT_RESOURCE,1 {\n\t\t@Ratio = 48\n\t\t}\n\t\t\n\t@OUTPUT_RESOURCE,0 {\n\t\t@Ratio = 0.4\n\t\t}\n}\n}\n\n@PART[TinySmelter]\n{\n\t@INPUT_RESOURCE,0 {\n\t\t@ResourceName = Ore\n\t\t@Ratio = 0.4\n\t\t}\n\t\t\n\t@INPUT_RESOURCE,1 {\n\t\t@Ratio = 24\n\t\t}\n\t\t\n\t@OUTPUT_RESOURCE,0 {\n\t\t@Ratio = 0.2\n\t\t}\n}\n}\n\n// Fix resource detection\n@PART:HAS[@MODULE[KethaneDetector]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[KethaneDetector]\n\t{\n\t\t@Resource:HAS[#Name[MetalOre]] {\n\t\t\t@Name = Ore\n\t\t}\n\t}\n}\n\n// Fix resource detection\n@PART:HAS[@MODULE[ModuleResourceScanner]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ModuleResourceScanner]:HAS[#ResourceName[MetalOre]]\n\t{\n\t\t@ResourceName = Ore\n\t}\n}\n\n// Fix resource detection\n@PART:HAS[@MODULE[ModuleAnalysisResource]]:NEEDS[Launchpad]:Final\n{ \n\t@MODULE[ModuleAnalysisResource]:HAS[#resourceName[MetalOre]]\n\t{\n\t\t@resourceName = Ore\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-05-02T04:00:13Z\u0022 title=\u002205/02/2016 04:00  AM\u0022 data-short=\u00228 yr\u0022\u003EMay 2, 2016\u003C/time\u003E by Markelius\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starstrider42","CreatedById":104043,"CreatedDateTime":"2016-05-02T05:23:29Z","Content":"\n\u003Cp\u003E\nThe expression \u0022@RESOURCE[@name[MetalOre]]\u0022 looks for something like:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nRESOURCE {\n\tname = @name[MetalOre]\n}\u003C/pre\u003E\n\u003Cp\u003E\nwhich doesn\u0027t exist. You need to use \u0022@RESOURCE[MetalOre]\u0022, like in the first example I listed, or \u0022@RESOURCE:HAS[#name[MetalOre]]\u0022, note the # and :HAS.\n\u003C/p\u003E\n\u003Cp\u003E\nAll your smelter patches have too many closing braces, which causes KSP to skip reading the rest of the file.\n\u003C/p\u003E\n\u003Cp\u003E\nPossibly related, your smelter patches don\u0027t mention ExConverter, so they look for resource nodes that are directly under the part. Try, e.g.,\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n@PART[Smelter]\n{\n\t@MODULE[ExConverter] {\n\t\t@INPUT_RESOURCE,0 {\n\t\t\t@ResourceName = Ore\n\t\t\t@Ratio = 1.0\n\t\t\t}\n\t\t\t\n\t\t@INPUT_RESOURCE,1 {\n\t\t\t@Ratio = 60\n\t\t\t}\n\t\t\t\n\t\t@OUTPUT_RESOURCE,0 {\n\t\t\t@Ratio = 0.5\n\t\t\t}\n\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\nThat should be it.\n\u003C/p\u003E\n"},{"CreatedByName":"Markelius","CreatedById":140335,"CreatedDateTime":"2016-05-02T14:16:11Z","Content":"\n\u003Cp\u003E\nOkay, thanks a lot for showing me what was wrong, I was tired last night and was sure I was making some kind of dumb mistakes somewhere.\n\u003C/p\u003E\n\u003Cp\u003E\nSo now everything seems to work, only problem is while the containers show up in the Utility section and if you search for them, they won\u0027t show up in the \u0022EL Items\u0022 section anymore. I can\u0027t seem to figure out why this is or how you define parts to be in that category in the first place, and it\u0027s inconvenient, but not a deal breaker. I think I\u0027ll release the mod today and if I can find a fix for making the ore containers show up in that category again, I will.\u00A0If not, it\u0027s not the end of the world, the rest still works great. Thanks for all the help!\n\u003C/p\u003E\n"}]}