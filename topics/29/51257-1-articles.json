{"TopicId":51257,"ForumId":29,"TopicTitle":"Example plugin projects to help you get started","CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2013-10-31T01:03:12Z","PageNum":1,"Articles":[{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2013-10-31T01:03:12Z","Content":"\n\u003Cp\u003EI have been working on a set of examples that I hope people will find useful for learning how to write plugins for KSP and as a starting point for their mods: \u003Ca href=\u0022https://github.com/taraniselsu/TacExamples\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacExamples\u003C/a\u003E. I also hope to have working examples of how to implement certain things in KSP/Unity.\u003C/p\u003E\u003Cp\u003ESo far I have:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E 01: A simple part-less plugin.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E 02: A simple PartModule plugin.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E 03: A part with right-click events.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E 04: A part with action group events.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn the works:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E 05: How to use KSPField\u0027s -- not done yet, and not working as written -- not sure why I cannot get it to work for MyType. I have gone through \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/7529-Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026amp;viewfull=1#post156430\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/7529-Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026amp;viewfull=1#post156430\u003C/a\u003E, among other sources, and still cannot figure it out \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EComing soon:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003E Show how to make a simple GUI (for now see: \u003Ca href=\u0022https://github.com/evilC/TacLib\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/evilC/TacLib\u003C/a\u003E)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E Define a new resource\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003E more?\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EYou can download the source code from this link: \u003Ca href=\u0022https://github.com/taraniselsu/TacExamples/archive/master.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacExamples/archive/master.zip\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EI hope that helps. Feedback will be much appreciated.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-31T02:00:29Z\u0022 title=\u002210/31/2013 02:00  AM\u0022 data-short=\u002210 yr\u0022\u003EOctober 31, 2013\u003C/time\u003E by TaranisElsu\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-31T01:28:17Z","Content":"\n\u003Cp\u003EThis is super cool--good for you, TaranisElsu! (And boy is it good for all of us \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E )\u003C/p\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2013-10-31T01:30:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EThis is super cool--good for you, TaranisElsu! (And boy is it good for all of us \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E )\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not sure that \u003Cem\u003Eyou\u003C/em\u003E would learn anything from this, and I wouldn\u0027t turn down some help \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"SolarLiner","CreatedById":41047,"CreatedDateTime":"2013-10-31T01:39:02Z","Content":"\n\u003Cp\u003EA gui template/well commented example is just what I need! I kinda have the \u0022fear of the GUI\u0022 and I need solid things to get me started \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EOn da phone, cannot check yet but I\u0027m sure this is a good work!\u003C/p\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2013-10-31T08:15:33Z","Content":"\n\u003Cp\u003EGood job, and thanks Taranis, \u003C/p\u003E\u003Cp\u003EIt is needed \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-11-01T03:33:04Z","Content":"\n\u003Cp\u003EHeh, you never know--I looked through TACLS when I was doing G-force damage, very helpful!\u003C/p\u003E\u003Cp\u003EYeah, when I get time \u0026lt;hollow laugh\u0026gt; I\u0027d love to contribute, thanks! May be a while though...\u003C/p\u003E\n"},{"CreatedByName":"Sparkle","CreatedById":91081,"CreatedDateTime":"2013-11-01T10:09:57Z","Content":"\n\u003Cp\u003EThanks for this. As an experienced programmer but total newbie to KSP modding it\u0027s nice to see how people set things up. I particularly like that you included the build events to show how you might actually do it in anger.\u003C/p\u003E\u003Cp\u003EPersonally I\u0027d like to see more examples of how to interact with the Kerbal world via API. That\u0027s kind of vague, but some starters for things like handling collisions, spawning new objects etc would be nice.\u003C/p\u003E\n"},{"CreatedByName":"Raptor831","CreatedById":68286,"CreatedDateTime":"2013-11-01T14:41:01Z","Content":"\n\u003Cp\u003EAnother \u0022Thank you\u0022 from me. Learning both C# and the KSP \u0022API\u0022 (as it were) is challenging, so having some starter code is amazing.\u003C/p\u003E\n"},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2013-11-01T14:45:22Z","Content":"\n\u003Cp\u003EA suggestion for another example project: Adding a sound to something. If you need some sample code, there\u0027s a module \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/55227-Kerbal-Sound-Overhaul-Project?p=728773\u0026amp;viewfull=1#post728773\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2013-11-02T01:05:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pizzaoverhead\u0022 data-cite=\u0022pizzaoverhead\u0022\u003E\u003Cdiv\u003EA suggestion for another example project: Adding a sound to something. If you need some sample code, there\u0027s a module \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/55227-Kerbal-Sound-Overhaul-Project?p=728773\u0026amp;viewfull=1#post728773\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFrom your signature, it looks like you would be a better person to do it than me. I have not done anything with sound yet. If you would, make a simple example and send me a pull request on Github, or send a link to a file by pm, and I will include it in the package. I can even edit it and polish it if you want to just make a rough example.\u003C/p\u003E\u003Cp\u003EOther examples, from anyone, are also welcome.\u003C/p\u003E\n"},{"CreatedByName":"evilC","CreatedById":60370,"CreatedDateTime":"2013-11-14T14:24:57Z","Content":"\n\u003Cp\u003EI started having a fiddle with this today, but it seems that you did not carry over the window class from TACLib.\u003C/p\u003E\u003Cp\u003EDo you have any plans for including UI into the examples? Specifically I would love to see an example of how to do a partless plugin with an icon that brings up a GUI.\u003C/p\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2013-11-15T07:42:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022evilC\u0022 data-cite=\u0022evilC\u0022\u003E\u003Cdiv\u003EI started having a fiddle with this today, but it seems that you did not carry over the window class from TACLib.\u003Cp\u003EDo you have any plans for including UI into the examples? Specifically I would love to see an example of how to do a partless plugin with an icon that brings up a GUI.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was planning on having a few GUI examples. I feel that your project got a little complicated, so I think we should split it into multiple example projects. Each example showing how to do one new thing.\u003C/p\u003E\u003Cp\u003EI am trying to finish an update to my Life Support mod, so I won\u0027t have much time to work on this for the next week but after that I should be able to add to it \u003Cem\u003Eor help others add to it (hint hint)\u003C/em\u003E.\u003C/p\u003E\n"},{"CreatedByName":"KFS","CreatedById":75614,"CreatedDateTime":"2013-11-26T00:23:13Z","Content":"\n\u003Cp\u003Eis it just me or could the instructions be more...documented?\u003C/p\u003E\u003Cp\u003EI downloaded the .cs files and modified them....\u003C/p\u003E\u003Cp\u003EOkay now what..........?\u003C/p\u003E\u003Cp\u003EDo i click on deploy, package, or test.bat??\u003C/p\u003E\u003Cp\u003EDo i open the .csproj file in visual studio and build the .dll from there?\u003C/p\u003E\u003Cp\u003EI like the idea of this it would just be..great to have a tutorial to go along with it..\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-26T00:38:17Z\u0022 title=\u002211/26/2013 12:38  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 26, 2013\u003C/time\u003E by KFS\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"LaydeeDem","CreatedById":5984,"CreatedDateTime":"2013-12-04T02:22:43Z","Content":"\n\u003Cp\u003EThis might just give the the push I needed to tackle plugins! Thank you! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2013-12-11T03:16:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022KFS\u0022 data-cite=\u0022KFS\u0022\u003E\u003Cdiv\u003Eis it just me or could the instructions be more...documented?\u003Cp\u003EI downloaded the .cs files and modified them....\u003C/p\u003E\u003Cp\u003EOkay now what..........?\u003C/p\u003E\u003Cp\u003EDo i click on deploy, package, or test.bat??\u003C/p\u003E\u003Cp\u003EDo i open the .csproj file in visual studio and build the .dll from there?\u003C/p\u003E\u003Cp\u003EI like the idea of this it would just be..great to have a tutorial to go along with it..\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is not finished yet, I just have not had time to work on it much lately. I agree that the documentation needs to be filled in more, and I should probably link to a few tutorials on programming. This project assumes that you have experience working with Visual Studio and writing C# code. \u003C/p\u003E\u003Cp\u003ETo answer your question (sorry for the long delay): open TacExamples.sln in Visual Studio, then right click the project that you want to compile and select \u0022Build\u0022. The batch files (deploy and test) were there to show how I automatically copy the files to my test install of KSP and to my regular play install. You will need to edit them or create the KSP_TEST and KSP_PLAY environment variables. You will also need to fix the paths for the KSP dll\u0027s in each project file.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nutt007\u0022 data-cite=\u0022Nutt007\u0022\u003E\u003Cdiv\u003EThis might just give the the push I needed to tackle plugins! Thank you! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re welcome!\u003C/p\u003E\n"},{"CreatedByName":"Airblader","CreatedById":99516,"CreatedDateTime":"2014-01-02T01:54:02Z","Content":"\n\u003Cp\u003EFirst off a big thanks for TacLib and the tutorials -- I started off wanting to make a partless mod with a GUI window and looking through several resources, these tutorials and the library were the most helpful to me. Also a thanks for the support in IRC. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EJust to have Google hopefully show this sometime when someone is looking for it: I added TacLib to my mod in VisualStudio Express 2013 and everything compiled fine, but I would get the following error messages in the KSP.log:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[LOG 03:11:53.966] Load(Assembly): MyPlugin/Plugins/MyPlugin\u003Cbr\u003E[LOG 03:11:53.968] AssemblyLoader: Loading assembly at C:\\Program Files (x86)\\Steam\\SteamApps\\common\\Kerbal Space Program\\GameData\\MyPlugin\\Plugins\\MyPlugin.dll\u003Cbr\u003E[LOG 03:11:54.033] AssemblyLoader: Loading assemblies\u003Cbr\u003E[ERR 03:11:54.057] AssemblyLoader: Exception loading \u0027MyPlugin\u0027: System.Reflection.ReflectionTypeLoadException: The classes in the module cannot be loaded.\u003Cbr\u003E  at (wrapper managed-to-native) System.Reflection.Assembly:GetTypes (bool)\u003Cbr\u003E  at System.Reflection.Assembly.GetTypes () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E  at AssemblyLoader.LoadAssemblies () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003Cbr\u003EAdditional information about this exception:\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027Tac.Icon\u00601[T]\u0027 from assembly \u0027MyPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027Tac.PartExtensions\u0027 from assembly \u0027MyPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027Tac.PopupWindow\u0027 from assembly \u0027MyPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027Tac.ToolbarButton\u0027 from assembly \u0027MyPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027Tac.ToolbarWrapper\u0027 from assembly \u0027MyPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027\u0026lt;\u0026gt;c__DisplayClass6\u0027 from assembly \u0027MyPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027\u0026lt;\u0026gt;c__DisplayClasse\u0027 from assembly \u0027MyPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003Cbr\u003E System.TypeLoadException: Could not load type \u0027\u0026lt;\u0026gt;c__DisplayClass2\u0027 from assembly \u0027MyPlugin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null\u0027.\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESomeone in the chat hinted me to how to solve this: The project target has to be changed to .NET 3.5, then everything works fine.\u003C/p\u003E\u003Cp\u003E@TaranisElsu\u003C/p\u003E\u003Cp\u003EAnother thing I found is that TacLib (in parts) requires the Toolbar plugin. Maybe you could add that somewhere in the README or whatever. It\u0027s probably obvious to experienced mod developers, but mentioning dependencies is probably not a bad idea either way. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2014-01-02T03:05:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Airblader\u0022 data-cite=\u0022Airblader\u0022\u003E\u003Cdiv\u003ESomeone in the chat hinted me to how to solve this: The project target has to be changed to .NET 3.5, then everything works fine.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is really important. KSP/Unity only uses 3.5 and does not work very well with later versions of .NET.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Airblader\u0022 data-cite=\u0022Airblader\u0022\u003E\u003Cdiv\u003EAnother thing I found is that TacLib (in parts) requires the Toolbar plugin. Maybe you could add that somewhere in the README or whatever. It\u0027s probably obvious to experienced mod developers, but mentioning dependencies is probably not a bad idea either way. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI would not say the code \u0022requires\u0022 the Toolbar plugin because it should compile without it. I tried hard to make it use the toolbar if it is there, but work fine if the toolbar is not there. I definitely need to improve the documentation in TacLib.\u003C/p\u003E\n"},{"CreatedByName":"Ishkur","CreatedById":102933,"CreatedDateTime":"2014-02-08T07:52:50Z","Content":"\n\u003Cp\u003EHello all.\u003C/p\u003E\u003Cp\u003EThis is my first post \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EWanted to say I\u0027ve just started looking at making a plugin and hope you continue working on this helpful documentation. Even if things kinda dropped off, thanks for everything you\u0027ve written so far, Taranis!\u003C/p\u003E\n"},{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-02-10T23:31:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TaranisElsu\u0022 data-cite=\u0022TaranisElsu\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E[*] 05: How to use KSPField\u0027s -- not done yet, and not working as written -- not sure why I cannot get it to work for MyType. I have gone through \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/7529-Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026amp;viewfull=1#post156430\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/7529-Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026amp;viewfull=1#post156430\u003C/a\u003E, among other sources, and still cannot figure it out \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAny more ideas on how to make this work?\u003C/p\u003E\u003Cp\u003EIt\u0027s really doing my head in too. It *should* work according to the unity documentation, but unity seems to stubbornly refuse to copy anything in Instantiate that is Serializable.\u003C/p\u003E\u003Cp\u003EI\u0027m about to give in and serialize the data to an array of strings, which I know does get copied on Instantiate.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EIf you store a byte array in the class and mark it with [serializableField] then this will get cloned correctly. You can use this to copy complex stuff from the config file. I can commit a change to the example that shows how to do this if you like.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-11T03:10:43Z\u0022 title=\u002202/11/2014 03:10  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 11, 2014\u003C/time\u003E by swamp_ig\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2014-02-12T05:42:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swamp_ig\u0022 data-cite=\u0022swamp_ig\u0022\u003E\u003Cdiv\u003EAny more ideas on how to make this work?\u003Cp\u003EIt\u0027s really doing my head in too. It *should* work according to the unity documentation, but unity seems to stubbornly refuse to copy anything in Instantiate that is Serializable.\u003C/p\u003E\u003Cp\u003EI\u0027m about to give in and serialize the data to an array of strings, which I know does get copied on Instantiate.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EIf you store a byte array in the class and mark it with [serializableField] then this will get cloned correctly. You can use this to copy complex stuff from the config file. I can commit a change to the example that shows how to do this if you like.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, please send me a pull request showing how to do that. I appreciate it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"a.g.","CreatedById":59470,"CreatedDateTime":"2014-02-12T07:05:16Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swamp_ig\u0022 data-cite=\u0022swamp_ig\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIt\u0027s really doing my head in too. It *should* work according to the unity documentation, but unity seems to stubbornly refuse to copy anything in Instantiate that is Serializable.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s because it plainly ignores Serializable unless it\u0027s on a class in one of the original dlls, like Assembly-CSharp.\u003C/p\u003E\n"},{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-02-12T12:10:25Z","Content":"\n\u003Cp\u003EIs that what it is? Weird really since the original DLLs have nothing to do with unity really.\u003C/p\u003E\u003Cp\u003EI guess the thing is there\u0027s three different persistence mechanisms going on here:\u003C/p\u003E\u003Cp\u003E1. Unity serialization. This uses Serializable and SerializableField attributes. This is needed to clone objects (ie: Object.Instantiate). There\u0027s a good blog post about it here: \u003Ca href=\u0022http://blogs.unity3d.com/2012/10/25/unity-serialization/\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://blogs.unity3d.com/2012/10/25/unity-serialization/\u003C/a\u003E but suffice to say it doesn\u0027t seem to work for classes compiled into a DLL. Maybe there\u0027s some way of getting unity to produce\u003C/p\u003E\u003Cp\u003Esome kind of asset or something to make it work, I got narked with the whole thing in the end.\u003C/p\u003E\u003Cp\u003E2. ConfigNode stuff. This is actually pretty well developed and seems to cover most cases. This uses the Persistent and PersistentLinkable attributes. I haven\u0027t actually investigated PersistentLinkable much, but it looks like you can persist references with that. \u003C/p\u003E\u003Cp\u003E3. KSPField attributes. These do actually work for classes, but not for arrays or lists of things which is an annoyance. You can write your own deserializer for lists of things in the OnLoad function. I don\u0027t think it works with references either. Not sure why they didn\u0027t just use the config node code as a basis for this, but *shrug*\u003C/p\u003E\u003Cp\u003ESo everything loads and saves to config files fine, but anything you set up there into your own classes won\u0027t persist across Object.Instantiate, which pretty much defeats the whole purpose.\u003C/p\u003E\u003Cp\u003EI imagine if you bashed your head against unity serialization for long enough you might figure it out, but I\u0027ve given up on that approach. Fortunately if you somehow store anything loaded from the part config file at the end of the OnLoad as a member, and then reinitialize it in OnAwake, then you get around the issue of Object.Instantiate not copying stuff properly.\u003C/p\u003E\u003Cp\u003EYou could probably get away with storing the ConfigNode as a member marked with SerializeField actually, but I figured why not just add yet another serialization mechanism and used the standard c# way.\u003C/p\u003E\u003Cp\u003EWill do a git merge request shortly...\u003C/p\u003E\n"},{"CreatedByName":"swamp_ig","CreatedById":97983,"CreatedDateTime":"2014-02-12T13:14:25Z","Content":"\n\u003Cp\u003EOk the merge request is done.\u003C/p\u003E\u003Cp\u003ESome things that might be worth mentioning in the SimplePartModule docs for life cycle:\u003C/p\u003E\u003Cp\u003E1. All the OnXXX messages are sent from the corresponding unity message to the parent Part. The exception to this is OnActive for which I haven\u0027t traced fully where it comes from. These get called in the same order as the modules are defined in the config file.\u003C/p\u003E\u003Cp\u003E2. When you\u0027re attaching a part with symmetry, the part *in its current state* is run through Object.Instantiate. If you modify any data in a custom class field then unless you have reserialized it for reloading in OnAwake any tweaks will be lost. Then OnActivate-\u0026gt;OnStart (don\u0027t know if OnSave is called, probably).\u003C/p\u003E\u003Cp\u003E3. If you want to do anything dynamic in the VAB, you need to implement Update directly, rather than getting it through the part. This is called in no particular order.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-12T13:22:41Z\u0022 title=\u002202/12/2014 01:22  PM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 12, 2014\u003C/time\u003E by swamp_ig\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2014-02-18T20:02:10Z","Content":"\n\u003Cp\u003ESomeone should sticky this!\u003C/p\u003E\n"},{"CreatedByName":"kahlzun","CreatedById":39989,"CreatedDateTime":"2014-03-02T21:21:57Z","Content":"\n\u003Cp\u003EI.. don\u0027t know how to use Github. Am i supposed to run the .bat files or something?\u003C/p\u003E\n"}]}