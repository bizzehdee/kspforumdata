{"TopicId":49800,"ForumId":29,"TopicTitle":"Any way to toggle gear/solar panels from code?","CreatedByName":"EvilKot","CreatedById":72193,"CreatedDateTime":"2013-10-21T01:48:25Z","PageNum":1,"Articles":[{"CreatedByName":"EvilKot","CreatedById":72193,"CreatedDateTime":"2013-10-21T01:48:25Z","Content":"\n\u003Cp\u003EHello.\u003C/p\u003E\u003Cp\u003EI\u0027m looking for solution to control retractable parts from a plugin.\u003C/p\u003E\u003Cp\u003EFor example: If your surface velocity reaches 10m/s, panels retracts to avoid breaking.\u003C/p\u003E\u003Cp\u003EUnfortunately I\u0027m stuck at this point:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EPartModule[] parts = (FindObjectsOfType(typeof(PartModule)) as PartModule[]);\u003Cbr\u003E\u003Cbr\u003Eforeach(PartModule p in parts)\u003Cbr\u003E            {\u003Cbr\u003E                if(p.vessel == FlightGlobals.ActiveVessel)\u003Cbr\u003E                { \u003Cbr\u003E                    if (p.ClassName == \u0022ModuleDeployableSolarPanel\u0022)\u003Cbr\u003E                    {\u003Cbr\u003E\u003Cbr\u003E                        //p.part.SendEvent(\u0022 whichEvent? \u0022)\u003Cbr\u003E                        //\u003Cbr\u003E                    }\u003Cbr\u003E                }\u003Cbr\u003E            }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThank you!\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-10-21T09:16:32Z","Content":"\n\u003Cp\u003EOne way to do it would be sth like that:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eforeach( var part in vessel /* maybe FlightGlobals.ActiveVessel */){\u003Cbr\u003E  foreach( var modDepSolPanel in part.Modules.OfType\u0026lt;ModuleDeployableSolarPanel\u0026gt;() ){\u003Cbr\u003E    modDepSolPanel.Retract();\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIf you want to use events, one way to get the event ID might be to check the save files. The current save system is pretty inefficient and saves a lot of useless data about evens \u0026amp; actions.\u003C/p\u003E\n"},{"CreatedByName":"EvilKot","CreatedById":72193,"CreatedDateTime":"2013-10-21T13:09:59Z","Content":"\n\u003Cp\u003EOh yeah, thank you for your answer! Works fine.\u003C/p\u003E\u003Cp\u003EI forgot about OfType\u0026lt;\u0026gt; method)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2013-10-21T13:42:44Z","Content":"\n\u003Cp\u003ERather than going through every part of the vessel, use this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Evessel.FindPartModulesImplementing\u0026lt;ModuleDeployableSolarPanel\u0026gt;();\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"EvilKot","CreatedById":72193,"CreatedDateTime":"2013-10-21T17:17:21Z","Content":"\n\u003Cp\u003Eblizzy78, thanks, this is way better.\u003C/p\u003E\u003Cp\u003EI can\u0027t find that method, so i used a same one\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Evessel.parts.OfType\u0026lt;ModuleDeployableSolarPanel\u0026gt;();\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ebut it didn\u0027t work. I\u0027ll figure out it later, anyway i understood how to control parts from code, that\u0027s all i wanted, thanks guys!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-21T17:50:28Z\u0022 title=\u002210/21/2013 05:50  PM\u0022 data-short=\u002210 yr\u0022\u003EOctober 21, 2013\u003C/time\u003E by EvilKot\u003C/strong\u003E\n\u003C/span\u003E\n"}]}