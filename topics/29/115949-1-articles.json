{"TopicId":115949,"ForumId":29,"TopicTitle":"How to determine when scene changes are complete","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-15T02:03:09Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-15T02:03:09Z","Content":"I\u0027m trying to do a screenshot on a scene change. What I want to happen is to allow the scene to change, and then when the new scene is displayed, to do a snapshot of that.\n\nI can detect scene changes using the following code:\n\n                private void RegisterEvents ()            {                Log.Info (\u0022registering events\u0022);                GameEvents.onGameSceneLoadRequested.Add (this.CallbackGameSceneLoadRequested);                GameEvents.onLevelWasLoaded.Add (this.CallbackLevelWasLoaded);            }            // Set flags when scene change requested            private void CallbackGameSceneLoadRequested (GameScenes scene)            {                Log.Info (\u0022CallbackGameSceneLoadRequested\u0022);                this.gui.SetVisible (scene == GameScenes.MAINMENU);                if (AS.configuration.screenshotOnSceneChange) {                    this.newScene = true;                    this.sceneReady = false;                }            }            // Set the sceneReady flag so a snapshot can be taken            private void CallbackLevelWasLoaded(GameScenes scene)            {                this.sceneReady = true;            }            public void Update()            {                // All excess code stripped for clarity                if (this.newScene \u0026\u0026 this.sceneReady) {                newScene = false;                do {                        cnt\u002B\u002B;                        pngName = FileOperations.ScreenshotFolder () \u002B configuration.filename \u002B cnt.ToString () \u002B \u0022.png\u0022;                } while (FileOperations.ScreenshotFolder ().Contains (pngName));                Log.Info (\u0022AutomatedScreenshots.Update: Screenshotfolder:\u0022 \u002B pngName);                Application.CaptureScreenshot (pngName);            }\n\nUnfortunately, this isn\u0027t doing what I want. It appears that the scene has changed, but it hasn\u0027t yet been displayed. I suspect it will have something to do with refresh, but would appreciate a pointer here.\n\nThanks\n\nLGG\n\nEdit: I added the update function for clarity\n\nI also tried using the LateUpdate function, but no change\n\n**Edited \u003Ctime datetime=\u00222015-07-15T12:27:35Z\u0022 title=\u002207/15/2015 12:27  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 15, 2015\u003C/time\u003E by linuxgurugamer**\n  \nAdded Update functiion for clarity"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-15T15:29:43Z","Content":"For now, I\u0027ve added code which waits 1 second before doing the snapshot.\n\nI feel this is a kludge, and would like to do it better.\n\nAny ideas?"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-07-15T20:25:58Z","Content":"**[MOD - Moved to Plugin Development Help and Support subforums]**"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-15T20:55:33Z","Content":"\u003E \n\u003E Maybe try this?\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     GameEvents.onLevelWasLoadedGUIReady.Add (this.CallbackLevelWasLoaded);\n\nThank you!\n\nUnfortunately, it doesn\u0027t work, it still does the screenshot too soon.\n\n**Edited \u003Ctime datetime=\u00222015-07-15T21:12:26Z\u0022 title=\u002207/15/2015 09:12  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 15, 2015\u003C/time\u003E by linuxgurugamer**"},{"CreatedByName":"simon56modder","CreatedById":119640,"CreatedDateTime":"2015-07-18T22:43:56Z","Content":"Check this answer (I\u0027ve already asked a similar question) : [http://forum.kerbalspaceprogram.com/threads/123287-Know-if-currently-in-Scene-Changing?p=1976689#post1976689](https://forum.kerbalspaceprogram.com/threads/123287-Know-if-currently-in-Scene-Changing?p=1976689#post1976689)"}]}