{"TopicId":153992,"ForumId":29,"TopicTitle":"Changing maximum Resource in-flight","CreatedByName":"steedcrugeon","CreatedById":168050,"CreatedDateTime":"2016-12-24T23:24:05Z","PageNum":1,"Articles":[{"CreatedByName":"steedcrugeon","CreatedById":168050,"CreatedDateTime":"2016-12-24T23:24:05Z","Content":"\n\u003Cp\u003E\nI\u0027m wondering/hoping someone can point me in the right direction. I\u0027m hoping to find a simple way of changing the maximum amount of Electric Charge a part has after a instantiation. I\u0027ll see if i can explain it, the idea is that the part (a cryogenic escape pod) has 3001 EC when it is spawned but as soon as it is reduced down to, say 50, the maximum it can be re-charged to is 50. The rational behind this is that there is sufficient stored charge to do a single freeze and then after that it needs to be recovered before de-frosting can take place.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a way in stock i could configure part as such? If not could\u00A0new \u0027RESOURCE\u0027 module be written to be single shot?\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-12-25T00:26:33Z","Content":"\n\u003Cp\u003E\nNot sure what you mean by \u0022in stock\u0022, you\u0027d have to write a plug-in, but changing the max amount is simply changing the Part.Resources.Get(\u0022ElectricCharge\u0022).maxAmount value.\n\u003C/p\u003E\n\u003Cp\u003E\nThe only catch is I have done almost nothing with resources and don\u0027t know what the persistence of that value is. (If it saves once set, or you\u0027ll have to set if every time the part loads.)\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n"},{"CreatedByName":"Li0n","CreatedById":142527,"CreatedDateTime":"2016-12-28T10:06:13Z","Content":"\n\u003Cp\u003E\nAbsolutely no idea if this can work but have you tried to change the part.cfg to something like :\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n// stuff\n\u003C/p\u003E\n\u003Cp\u003E\nRESOURCE\u003Cbr\u003E\n\u00A0\u00A0 \u00A0{\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0name = ElectricCharge\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0amount = 3001\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0maxAmount = 50\u003Cbr\u003E\n\u00A0\u00A0 \u00A0}\n\u003C/p\u003E\n\u003Cp\u003E\n// stuff\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"steedcrugeon","CreatedById":168050,"CreatedDateTime":"2016-12-28T14:30:28Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222903017\u0022 data-ipsquote-contentid=\u0022153992\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221482919573\u0022 data-ipsquote-userid=\u0022142527\u0022 data-ipsquote-username=\u0022Li0n\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Li0n said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAbsolutely no idea if this can work but have you tried to change the part.cfg to something like :\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYep, that\u0027s what I\u00A0initially tried to get it to do what I\u00A0wanted. It worked\u00A0once, but hasn\u0027t repeated it since (I\u0027m thinking it;s something to do with\u00A0the stored configurations on the \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E cache). I need something more consistent.\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-12-28T15:16:14Z","Content":"\n\u003Cp\u003E\nI don\u0027t think \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E can do what you want, \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E can only edit \u0027the\u0027 part, not \u0027a\u0027 part. By that I mean if you change the max EC on a part, you change it on all parts in-game. This includes the \u0027unbuilt\u0027 parts in the editor and all parts that exist in flight.\n\u003C/p\u003E\n\u003Cp\u003E\nFirst, you are trying to do the following correct?\n\u003C/p\u003E\n\u003Cp\u003E\n-Part spawns with 3001 max EC which auto-fills on launch.\n\u003C/p\u003E\n\u003Cp\u003E\n-Cryo happens, part max EC drops to 50.\n\u003C/p\u003E\n\u003Cp\u003E\n-Some other trigger (Time delay?), the part max EC goes back to 3001.\n\u003C/p\u003E\n\u003Cp\u003E\nYou can set the original max amount with \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E (or just in the part.cfg as you are making this part I assume),\u00A0 but changing it in game will require a plug-in to detect when the change should happen and then editing the Part.Resources.Get(\u0022ElectricCharge\u0022).maxAmount value as needed.\n\u003C/p\u003E\n\u003Cp\u003E\nAs for what \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/142527-li0n/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022142527\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/142527-li0n/\u0022 rel=\u0022\u0022\u003E@Li0n\u003C/a\u003E suggested, I wouldn\u0027t recommend it. While it might work, it\u0027s not working as intended because a part is not \u0027supposed\u0027 to be able to contain more resources (currentAmount) then it can hold (maxAmount). This sort of thing is what causes mod conflicts as other people (including Squad) will assume a part can\u0027t hold more resources then maxValue when they are working on their own stuff.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-12-28T15:23:58Z\u0022 title=\u002212/28/2016 03:23  PM\u0022 data-short=\u00227 yr\u0022\u003EDecember 28, 2016\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"steedcrugeon","CreatedById":168050,"CreatedDateTime":"2016-12-28T17:15:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222903224\u0022 data-ipsquote-contentid=\u0022153992\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221482938174\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n53 minutes ago, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFirst, you are trying to do the following correct?\n\u003C/p\u003E\n\u003Cp\u003E\n-Part spawns with 3001 max EC which auto-fills on launch.\n\u003C/p\u003E\n\u003Cp\u003E\n-Cryo happens, part max EC drops to 50.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is the plan, there is no need for the part to have the 3001 EC after it has been used (it would\u00A0need to go to a ship yard for a re-fit\u00A0sort of thing).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222903224\u0022 data-ipsquote-contentid=\u0022153992\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221482938174\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n56 minutes ago, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou can set the original max amount with \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E (or just in the part.cfg as you are making this part I assume),\u00A0 but changing it in game will require a plug-in to detect when the change should happen and then editing the Part.Resources.Get(\u0022ElectricCharge\u0022).maxAmount value as needed.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSo would this only affect instantiated parts? not the original part config. Would I\u00A0be right in assuming that what the plugin would do as alter the EC max on the loaded\u00A0part?\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-12-28T20:08:00Z","Content":"\n\u003Cp\u003E\nYes, the plug-in would be a partModule that you attach to the parts that can do this via \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E (or in it\u0027s part.cfg if you\u0027re making the part).\n\u003C/p\u003E\n\u003Cp\u003E\nHow clear are you on how the underlying KSP engine works? I think part of the issue is that \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E does not do quite what you think it does. Notably how were you going to do this cryo thing at all without a plug-in?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E is for changing the default settings of part, it can\u0027t change settings of parts in flight. It can \u003Cem\u003Eappear\u003C/em\u003E to change settings in flight as KSP will always use the most recent version of the \u0022default\u0022 part, but settings in the save file will override it. (So settings that don\u0027t get saved can be modified by \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E on parts spawned in flight.)\n\u003C/p\u003E\n\u003Cp\u003E\nSo once you\u0027ve spawned a part inflight, the currentAmount of the resource gets saved and it doesn\u0027t matter what you do with \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E, the currentAmount in the save file will always override your \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E changes.\n\u003C/p\u003E\n\u003Cp\u003E\nTo make changes such as this that happen in flight requires a plug-in.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-12-28T20:17:48Z\u0022 title=\u002212/28/2016 08:17  PM\u0022 data-short=\u00227 yr\u0022\u003EDecember 28, 2016\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"steedcrugeon","CreatedById":168050,"CreatedDateTime":"2016-12-28T22:47:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222903456\u0022 data-ipsquote-contentid=\u0022153992\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221482955680\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow clear are you on how the underlying KSP engine works? I think part of the issue is that \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E does not do quite what you think it does. Notably how were you going to do this cryo thing at all without a plug-in?\n\u003C/p\u003E\n\u003Cp\u003E\nTo make changes such as this that happen in flight requires a plug-in.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI knew this wouldn\u0027t be something \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E could do on it\u0027s own (I\u00A0meant that where I\u00A0managed to trick Stock KSP by setting the Amount to 3000 and the maximumAmount to 3000 worked only once (firs time), then I\u00A0think \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E caught up an wouldn\u0027t allow it to start with 3000 EC again (due to \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E inbuilt cache function for mods to facilitate quicker loading).\n\u003C/p\u003E\n\u003Cp\u003E\nAs to how the Underlying KSP work i have only the most basic understanding of C#. I can happily drive unity and blender to build models but my plugin expertise are very lacking (i can recompile stuff but that\u0027s pretty much my limit at the minute). Modelling is more my forte.\n\u003C/p\u003E\n"}]}