{"TopicId":165845,"ForumId":29,"TopicTitle":"ModuleDecoupler woes","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-09-26T01:21:02Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-09-26T01:21:02Z","Content":"\n\u003Cp\u003E\nI am trying to add a ModuleDecouple to a part programmatically to a part. \u00A0It\u0027s not working, but I don\u0027t know why.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is a new part module I\u0027m writing, which will add a ModuleDecouple at edit time based on the user\u0027s input.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I\u0027m doing is adding the ModuleDecouple component to the part gameObject, and then adding the new module the the part.Modules.\n\u003C/p\u003E\n\u003Cp\u003E\nIt appears to work, but staging isn\u0027t updated, and when I trigger it in flight, I hear the decoupling sound but nothing happens.\n\u003C/p\u003E\n\u003Cp\u003E\nSuggestions are welcome (obviously).\n\u003C/p\u003E\n\u003Cp\u003E\nThe code I\u0027m using follows. \u00A0It is probably trying to do too much, but I\u0027ve been trying everything I can find:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EdecouplerModule = this.part.gameObject.AddComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ModuleDecouple\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n \nthis.part.Modules.Add(decouplerModule);\ndecouplerModule.enabled = true;\n\ndecouplerModule.ejectionForce = ejectionForce;\ndecouplerModule.explosiveNodeID = explosiveNodeID;\n\ndecouplerModule.overrideStagingIconIfBlank = true;\ndecouplerModule.stagingToggleEnabledEditor = true;\ndecouplerModule.staged = true;\n\ndecouplerModule.SetStaging(true);\n\ndecouplerModule.UpdateStagingToggle();\n  \ndecouplerModule.stagingEnabled = true;\n\nthis.part.UpdateStageability(true, true);\n  \u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-09-26T01:26:13Z\u0022 title=\u002209/26/2017 01:26  AM\u0022 data-short=\u00226 yr\u0022\u003ESeptember 26, 2017\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-26T22:11:59Z","Content":"\n\u003Cp\u003E\nI dunno if this helps but I was just having issues with dynamically creating a different component.\n\u003C/p\u003E\n\u003Cp\u003E\n1. I had to create the component in the partmodule\u0027s OnStart event.\u00A0 If I tried to create it during the OnActivate I could see it created the component\u00A0but I couldn\u0027t interact with it (open a PAW).\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n2. Adding it to the OnStart created another problem when copying the parent part (symmetry turned on).\u00A0 OnStart appears to run whenever you select a part and when it copies one for symmetry. It would copy the parent part and it copied the created component\u00A0perfectly but it would add 2 copies\u00A0of the component to\u00A0the duplicate part. When opening the PAW, only the second one could be interacted with.\u00A0 I attempted to check and see if that component\u00A0already existed before creating it in the OnStart and that prevented the second copy but I couldn\u0027t interact with the one that was created in OnCopy and I got a nullRef trying to open the PAW even though, I could see the component.\u00A0 I had to end up looking for the component by it\u0027s type and destroying it in the OnCopy event.\u00A0\u00A0Then, have the OnStart check to see if the component existed (null)\u00A0and create a new one if it\u00A0 didn\u0027t.\n\u003C/p\u003E\n\u003Cp\u003E\nYa, mindboggling... GL.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-09-26T22:57:20Z","Content":"\n\u003Cp\u003E\nWeird! My issue is that I have the first part module which has a PAW, in the editor, which, when you click, creates the module decoupler. So, I guess that would run in the on GUI event, maybe I need to change that to set a flag and then run during the update. At least it\u0027s something to try. Thank you\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-26T23:31:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223180862\u0022 data-ipsquote-contentid=\u0022165845\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221506466640\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n51 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWeird! My issue is that I have the first part module which has a PAW, in the editor, which, when you click, creates the module decoupler. So, I guess that would run in the on GUI event, maybe I need to change that to set a flag and then run during the update. At least it\u0027s something to try. Thank you\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInitially I had mine like that. Which brings up another thot.\u00A0 Took me a bit to get mine turned and rotated in the right direction.\u00A0 I\u0027ve never worked with a decoupler but I have worked with the Klaw.\u00A0 Getting the rotation right for it was a bit tricky.\u00A0 Does rotation and position affect the decoupler?\u00A0 I notice you\u0027re just sorta dropping it in.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-09-26T23:49:02Z\u0022 title=\u002209/26/2017 11:49  PM\u0022 data-short=\u00226 yr\u0022\u003ESeptember 26, 2017\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-09-27T01:59:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223180890\u0022 data-ipsquote-contentid=\u0022165845\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221506468697\u0022 data-ipsquote-userid=\u002278435\u0022 data-ipsquote-username=\u0022Fengist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Fengist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nInitially I had mine like that. Which brings up another thot.\u00A0 Took me a bit to get mine turned and rotated in the right direction.\u00A0 I\u0027ve never worked with a decoupler but I have worked with the Klaw.\u00A0 Getting the rotation right for it was a bit tricky.\u00A0 Does rotation and position affect the decoupler?\u00A0 I notice you\u0027re just sorta dropping it in.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe decoupler references a node, which is known. \u00A0I\u0027m not creating a part, just adding a part module\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-09-27T02:43:30Z\u0022 title=\u002209/27/2017 02:43  AM\u0022 data-short=\u00226 yr\u0022\u003ESeptember 27, 2017\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-27T02:49:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223180962\u0022 data-ipsquote-contentid=\u0022165845\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221506477585\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n45 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe decoupler references a node, which is known. \u00A0I\u0027m not creating a part, just adding a part module\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGot it.\u00A0 For some reason I was thinking a transform was involved.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-09-27T02:54:49Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223180984\u0022 data-ipsquote-contentid=\u0022165845\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221506480562\u0022 data-ipsquote-userid=\u002278435\u0022 data-ipsquote-username=\u0022Fengist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, Fengist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGot it.\u00A0 For some reason I was thinking a transform was involved.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIn a future version I\u0027d like to be able to add a number of separtrons to the top of the tank, and then I\u0027ll have this problem. \u00A0But for now, I just want to have the module functioning properly\n\u003C/p\u003E\n"}]}