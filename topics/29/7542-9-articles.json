{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":9,"Articles":[{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-01T03:14:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nutt007\u0022 data-cite=\u0022Nutt007\u0022\u003E\u003Cdiv\u003EI know it\u0027s possible, I know parachutes do it. But how to make an engine do it?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWithout testing it (all I did was check if it would compile), this is how I would do it:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eclass RetroRocket : SolidRocket {\u003Cbr\u003E\u003Cbr\u003E\t// Should probably read this from part.cfg, but I can\u0027t be bothered doing\u003Cbr\u003E\t// that here\u003Cbr\u003E\tprivate float ActivationAltitude = 400.0f;\u003Cbr\u003E\u003Cbr\u003E\tprivate bool m_Active = false;\u003Cbr\u003E\u003Cbr\u003E\tprotected override void onPartStart() {\u003Cbr\u003E\u003Cbr\u003E\t\tbase.onPartStart();\u003Cbr\u003E\t\tthis.ActivatesEvenIfDisconnected = true;\u003Cbr\u003E\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E\tprotected override bool onPartActivate() {\u003Cbr\u003E\t\t// Do Nothing\u003Cbr\u003E\t\treturn true;\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E\tprotected override void onPartFixedUpdate() {\u003Cbr\u003E\u003Cbr\u003E\t\tif (this.m_Active) {\u003Cbr\u003E\u003Cbr\u003E\t\t\tbase.onPartFixedUpdate();\u003Cbr\u003E\u003Cbr\u003E\t\t} else if (ActivationAltitude \u0026gt;= this.GetAltitude()) {\u003Cbr\u003E\t\t\tthis.m_Active = true;\u003Cbr\u003E\t\t\tbase.onPartActivate();\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E\tprotected override void onPartUpdate() {\u003Cbr\u003E\u003Cbr\u003E\t\tif (this.m_Active) {\u003Cbr\u003E\u003Cbr\u003E\t\t\tbase.onPartUpdate();\u003Cbr\u003E\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E\tprivate float GetAltitude() {\u003Cbr\u003E\t\t// Don\u0027t know if this the proper way of getting altitude.\u003Cbr\u003E\t\treturn vessel.GetHeightFromTerrain();\u003Cbr\u003E\t}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThen just change SolidRocket to RetroRocket in part.cfg\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u0022 data-cite=\u0022Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u0022\u003E\u003Cdiv\u003EIs it possible to add buttons to a part\u0027s right-click menu at runtime? I\u0027m trying to make a PartModule with part.cfg configurable right-click menu entries.\u003Cp\u003EI could probably get away with hardcoding it (a lot of methods with KSPEvent attribute) and showing/hiding them as necessary, but it\u0027d be nice if I could avoid doing that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, I\u0027ve done some investigation and found out you can apply a partmodule to the same part multiple times, so I can just go with that. So my new question is, how do I get the right-click menu entry to update its text when I click on it? Thus far, when I set this.Events[\u0022EventName\u0022].guiName to something else, the text doesn\u0027t change until I open and close the menu. I guess that might be because it\u0027s a field and not a property so KSP doesn\u0027t know I\u0027ve changed it, but there\u0027s probably a way to force it to update the GUI since AtmosphericEngine does it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-01T03:38:21Z\u0022 title=\u002209/01/2012 03:38  AM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 1, 2012\u003C/time\u003E by Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"LaydeeDem","CreatedById":5984,"CreatedDateTime":"2012-09-01T04:23:58Z","Content":"\n\u003Cp\u003ESorry about this. I feel really dumb, but how do you compile to .dll? I am using MonoDevelop.\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-01T05:05:47Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022http://kspwiki.nexisonline.net/wiki/Setting_up_MonoDevelop\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kspwiki.nexisonline.net/wiki/Setting_up_MonoDevelop\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThen it\u0027s a matter of hitting Build\u003C/p\u003E\n"},{"CreatedByName":"LaydeeDem","CreatedById":5984,"CreatedDateTime":"2012-09-01T05:18:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u0022 data-cite=\u0022Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u0022\u003E\u003Cdiv\u003E\u003Ca href=\u0022http://kspwiki.nexisonline.net/wiki/Setting_up_MonoDevelop\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kspwiki.nexisonline.net/wiki/Setting_up_MonoDevelop\u003C/a\u003E\u003Cp\u003EThen it\u0027s a matter of hitting Build\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI do that, but it doesn\u0027t come out as a .dll.\u003C/p\u003E\u003Cp\u003EIt likes to compile into a Visual Studio File.\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-01T05:21:01Z","Content":"\n\u003Cp\u003EHmm. I\u0027m downloading MonoDevelop now.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003ESorry about the delay. Had to do some work around the home.\u003C/p\u003E\u003Cp\u003EThat\u0027s odd. When I hit build, I get a *.dll (in $(ProjectDir)\\bin\\Debug\\ with a debug build). Can you post your build log (View \u00C3\u00A2\u00E2\u20AC\u00A0\u00E2\u20AC\u2122 Pads \u00C3\u00A2\u00E2\u20AC\u00A0\u00E2\u20AC\u2122 Error List \u00C3\u00A2\u00E2\u20AC\u00A0\u00E2\u20AC\u2122 Build Output)?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-01T09:00:21Z\u0022 title=\u002209/01/2012 09:00  AM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 1, 2012\u003C/time\u003E by Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"LaydeeDem","CreatedById":5984,"CreatedDateTime":"2012-09-01T15:52:07Z","Content":"\n\u003Cp\u003EOh I found it! I wasn\u0027t looking in the right folder. Thank you for you help.\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-02T11:57:19Z","Content":"\n\u003Cp\u003ECan anyone tell me what the heck is wrong with this code?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cbr\u003E\u003Cbr\u003E [KSPField]\u003Cbr\u003E private string ActiveState;\u003Cbr\u003E\u003Cbr\u003E public override void OnActive() {\u003Cbr\u003E base.OnActive();\u003Cbr\u003E Debug.Log(\u0022[Module_EE_Test] OnActive()\u0022);\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E public override void OnInactive() {\u003Cbr\u003E base.OnInactive();\u003Cbr\u003E Debug.Log(\u0022[Module_EE_Test] OnInactive()\u0022);\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E /// \u0026lt;summary\u0026gt;\u003Cbr\u003E /// Constructor style setup.\u003Cbr\u003E /// Called in the Part\\\u0027s Awake method. \u003Cbr\u003E /// The model may not be built by this point.\u003Cbr\u003E /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E public override void OnAwake() {\u003Cbr\u003E base.OnActive();\u003Cbr\u003E Debug.Log(\u0022[Module_EE_Test] OnActive()\u0022);\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E /// \u0026lt;summary\u0026gt;\u003Cbr\u003E /// Called during the Part startup.\u003Cbr\u003E /// StartState gives flag values of initial state\u003Cbr\u003E /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E public override void OnStart(StartState state) {\u003Cbr\u003E base.OnStart(state);\u003Cbr\u003E Debug.Log(string.Format(\u0022[Module_EE_Test] OnStart({0})\u0022,\u003Cbr\u003E Enum.GetName(typeof(StartState), state)));\u003Cbr\u003E Debug.Log(string.Format(\u0022[Module_EE_Test] ActiveState = \\\u0022{0}\\\u0022\u0022,\u003Cbr\u003E ActiveState));\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E /// \u0026lt;summary\u0026gt;\u003Cbr\u003E /// Per-frame update\u003Cbr\u003E /// Called ONLY when Part is ACTIVE!\u003Cbr\u003E /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E public override void OnUpdate() {\u003Cbr\u003E base.OnUpdate();\u003Cbr\u003E Debug.Log(\u0022[Module_EE_Test] OnUpdate()\u0022);\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E /// \u0026lt;summary\u0026gt;\u003Cbr\u003E /// Per-physx-frame update\u003Cbr\u003E /// Called ONLY when Part is ACTIVE!\u003Cbr\u003E /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E public override void OnFixedUpdate() {\u003Cbr\u003E base.OnFixedUpdate();\u003Cbr\u003E Debug.Log(\u0022[Module_EE_Test] OnFixedUpdate()\u0022);\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E /// \u0026lt;summary\u0026gt;\u003Cbr\u003E /// Called when PartModule is asked to save its values.\u003Cbr\u003E /// Can save additional data here.\u003Cbr\u003E /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E /// \u0026lt;param name=\u0027node\u0027\u0026gt;The node to save in to\u0026lt;/param\u0026gt;\u003Cbr\u003E public override void OnSave(ConfigNode node) {\u003Cbr\u003E base.OnSave(node);\u003Cbr\u003E Debug.Log(\u0022[Module_EE_Test] OnSave([ConfigNode node])\u0022);\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E /// \u0026lt;summary\u0026gt;\u003Cbr\u003E /// Called when PartModule is asked to load its values.\u003Cbr\u003E /// Can load additional data here.\u003Cbr\u003E /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E /// \u0026lt;param name=\u0027node\u0027\u0026gt;The node to load from\u0026lt;/param\u0026gt;\u003Cbr\u003E public override void OnLoad(ConfigNode node) {\u003Cbr\u003E base.OnLoad(node);\u003Cbr\u003E Debug.Log(\u0022[Module_EE_Test] OnLoad([ConfigNode node])\u0022);\u003Cbr\u003E Debug.Log(string.Format(\u0022[Module_EE_Test] ActiveState = \\\u0022{0}\\\u0022\u0022,\u003Cbr\u003E ActiveState));\u003Cbr\u003E }\u003Cbr\u003E\u003Cbr\u003E}\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic sealed class Module_EE_StackIcon: PartModule {\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cbr\u003EMODULE {\u003Cbr\u003E name = Module_EE_StackIcon\u003Cbr\u003E ActiveState = Closed\u003Cbr\u003E}\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EIt\u0027s not supposed to do anything but print a bunch of text to the console, but instead, it makes KSP throw a fit then crash:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/jwdVpKqUH64?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn addition to the game crashing when I detached the test part at the end, it seems like value of ActiveState is forgotten sometime between game load and entering the VAB.\u003C/p\u003E\n"},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-09-02T12:09:16Z","Content":"\n\u003Cp\u003EThere\u0027s a part module similar to that in my plugin, ModuleKrTestSpam.\u003C/p\u003E\u003Cp\u003EIf you need the current state in OnLoad, use HighLogic.LoadedScene (or HighLogic.LoadedSceneIsFlight if you only need that one) for that.\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-02T13:21:11Z","Content":"\n\u003Cp\u003EThat\u0027s just a test PartModule I cooked up to try to narrow down what\u0027s going wrong with my PMs proper, so I can work out why my v1 animation PM works (it\u0027s literally a 132-line hackjob, including useless cruft and whitespace, to get my animated cargo bay working), while a much cleaner coded PM that does nothing but change the stackicon when it processes a KSPEvent, crashes half the time and does nothing the rest. The ActiveState field is just a representation of one of the variables from my other PMs.\u003C/p\u003E\u003Cp\u003ETest parts like that is how I discovered that IConfigNode KSPFields don\u0027t work (its Load and Save methods never gets called), that my partmodules sometimes forget the contents of fields (both marked with KSPField and not) between the call to OnLoad and going into the VAB, even when the code is highly similar between two different partmodules I have in development. Heck, at one point my animation partmodule had a similar freakout to that video depending on whether or not \u0022public override void OnXXXX() { base.OnXXXX(); }\u0022 was commented out (can\u0027t remember which one it was).\u003C/p\u003E\u003Cp\u003EAck, I\u0027m rambling. Been having a frustrating day trying to work out when something is going wrong because of something I wrote or it\u0027s because of bugs in KSP\u0027s partmodule infrastructure (like the IConfigNode thing).\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-02T13:31:16Z\u0022 title=\u002209/02/2012 01:31  PM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 2, 2012\u003C/time\u003E by Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-09-02T13:47:50Z","Content":"\n\u003Cp\u003ELol I\u0027m working on an animation part module too:D it works after a lot of strange failures...\u003C/p\u003E\u003Cp\u003EWhat I found out about KSPField is that bool and int don\u0027t really work (especially int, it loads the value from the sfs file as a float and fails converting it to int*facepalm*), and that you should never use isPersistant = false, then it might not even load from the part.cfg.\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-02T13:58:57Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Kreuzung\u0022 data-cite=\u0022Kreuzung\u0022\u003E\u003Cdiv\u003ELol I\u0027m working on an animation part module too:D it works after a lot of strange failures...\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESame. I don\u0027t even want to clean up the code in the fear that a change will cause it to blow up on me again.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EWhat I found out about KSPField is that bool and int don\u0027t really work (especially int, it loads the value from the sfs file as a float and fails converting it to int*facepalm*), and that you should never use isPersistant = false, then it might not even load from the part.cfg.\u003C/div\u003E\u003C/blockquote\u003EDiscovered that early on. I just use strings and the occasional float now. Though recently, I\u0027ve mainly worked on getting data from nested confignodes (it works if I don\u0027t rely on KSP to do it for me), so most of data is loaded via ConfigNode.GetValue() and converting the string into something else.\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-02T14:02:10Z\u0022 title=\u002209/02/2012 02:02  PM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 2, 2012\u003C/time\u003E by Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"silverensign","CreatedById":42020,"CreatedDateTime":"2012-09-03T02:25:51Z","Content":"\n\u003Cp\u003Ehey, ive created a model and the load screen gets stuck when it tries to load the part, on the debug console i get this message \u0022FormatException: Input String was not in the correct format\u0022\u003C/p\u003E\u003Cp\u003Ethis is driving me insane, any help would be a godsend\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-03T04:51:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022silverensign\u0022 data-cite=\u0022silverensign\u0022\u003E\u003Cdiv\u003Ehey, ive created a model and the load screen gets stuck when it tries to load the part, on the debug console i get this message \u0022FormatException: Input String was not in the correct format\u0022\u003Cp\u003Ethis is driving me insane, any help would be a godsend\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk, even though I suspect you\u0027re trying to make a bog-standard engine and not something that requires you making a plugin, I\u0027ll bite.\u003C/p\u003E\u003Cp\u003EI have to point out the obvious: Are all your values in part.cfg in the right format? Like Vector2/3/4 fields have to be 2/3/4 float values separated by a comma and optional whitespace.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003E\u003Cp\u003ERandom Aside: If I delete all the empty overrides in my animation partmodule, the End Flight button that appears when you hit escape no longer works \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-03T04:55:33Z\u0022 title=\u002209/03/2012 04:55  AM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 3, 2012\u003C/time\u003E by Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"silverensign","CreatedById":42020,"CreatedDateTime":"2012-09-03T13:38:35Z","Content":"\n\u003Cp\u003Eregarding my earlier post, im making a test cube that functions as a fuel tank. any help on why my part wont load and im getting \u0022FormatException: Input String was not in the correct format\u0022 in the debug menu. hopefully this will give you enough info to diagnose my problem.\u003C/p\u003E\u003Cp\u003Emy file(your going to need 7-zip):\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www./?8pm2xdy224jf9nt\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www./?8pm2xdy224jf9nt\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-03T16:21:43Z","Content":"\n\u003Cp\u003EAs I guessed, you\u0027re asking in the wrong section. You\u0027re looking for the \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/forumdisplay.php/37-Add-on-Development\u0022 rel=\u0022external nofollow\u0022\u003EAdd-on Development\u003C/a\u003E subforum.\u003C/p\u003E\u003Cp\u003EIf I had to guess, it\u0027s because you put \u0027.3\u0027 instead of \u00270.3\u0027, but I\u0027ll leave that for you to test.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Chr\u003E\u003Cp\u003EDoes PartModule.OnSave() even do anything? I can see it gets called, but it seems like it has no effect on a ship\u0027s .craft file or the main persistence file.\u003C/p\u003E\u003Cp\u003EEDIT: My Bad. I was assuming Node.SetValue creates a value if the key didn\u0027t already exist. Excellent, now I can have nice title-cased part.cfg entries while using \u0027m_\u0027 prefixes for private fields.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-04T03:49:43Z\u0022 title=\u002209/04/2012 03:49  AM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 4, 2012\u003C/time\u003E by Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Hicpotboy","CreatedById":2370,"CreatedDateTime":"2012-09-07T04:21:58Z","Content":"\n\u003Cp\u003EDoes anyone know of a way to load custom code that\u0027s not a part? I\u0027m trying to find a way to hook something to when the game first starts. I thought about extending the Vessel class, but there doesn\u0027t seem to be anything there to make it load a custom class.\u003C/p\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-09-07T13:32:22Z","Content":"\n\u003Cp\u003EI believe this will be possible in .17, scenario logic modules will allow code to be tied to a game save.\u003C/p\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-07T14:37:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Hicpotboy\u0022 data-cite=\u0022Hicpotboy\u0022\u003E\u003Cdiv\u003EDoes anyone know of a way to load custom code that\u0027s not a part? I\u0027m trying to find a way to hook something to when the game first starts. I thought about extending the Vessel class, but there doesn\u0027t seem to be anything there to make it load a custom class.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust what are you doing that you need to extend Vessel? If you just need to run some code at startup, create a dummy part, add a static constructor to the class, and you now have a way to run code during the game\u0027s loading screen.\u003C/p\u003E\n"},{"CreatedByName":"Kreuzung","CreatedById":21035,"CreatedDateTime":"2012-09-07T17:58:39Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022http://svn.mumech.com/KSP/trunk/MuMechLib/KerbalAccessorizer.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://svn.mumech.com/KSP/trunk/MuMechLib/KerbalAccessorizer.cs\u003C/a\u003E creates a unity GameObject that acts independent from the part which just stays unattachable in the VAB/SPH.\u003C/p\u003E\u003Cp\u003EThis is a secret feature of MuMech only available for the testing team, it adds sunglasses to the Kerbals.\u003C/p\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-09-08T21:09:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u0022 data-cite=\u0022Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u0022\u003E\u003Cdiv\u003EJust what are you doing that you need to extend Vessel? If you just need to run some code at startup, create a dummy part, add a static constructor to the class, and you now have a way to run code during the game\u0027s loading screen.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDoes that work? I just assumed it didn\u0027t actually call your class until the VAB.\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/v3rhQc666Sg?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\n"},{"CreatedByName":"Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC","CreatedById":37973,"CreatedDateTime":"2012-09-09T02:51:18Z","Content":"\n\u003Cp\u003EOh it works. In fact, I use a variation of it for my workaround to Unity\u0027s idiosyncratic cloning behaviour: \u003Ca href=\u0022https://eeksppml.codeplex.com/SourceControl/changeset/view/8b31467eb6be#KSP%20PartModule%20Library%2FPartModules%2FPartModuleBase.cs\u0022 rel=\u0022external nofollow\u0022\u003EPartModuleBase.cs\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIt may not actually use the method described earlier exactly, but the effect is more or less the same (static constructor being called during game load).\u003C/p\u003E\u003Cp\u003EKSP actually creates a prototype part for each Part.cfg during game load, and clones copies of it whenever you add that part in the VAB/SPH. It\u0027s that cloning process which had me tearing my hair out trying to work out why my code wasn\u0027t working. Curse you Unity Dev Team and your wierd cloning behaviour! It wouldn\u0027t be so bad if they used MemberwiseClone() or ICloneable. But no, they had to use some odd magic involving reflection, the SerializableAttribute, and a SerializeField attribute which only works on certain types and silently fails on unsupported ones. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_angry.gif\u0022 alt=\u0022:mad:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-09-09T03:01:26Z\u0022 title=\u002209/09/2012 03:01  AM\u0022 data-short=\u002211 yr\u0022\u003ESeptember 9, 2012\u003C/time\u003E by Echo 8 \u00C3\u0192\u00E2\u20AC\u00B0R\u00C3\u0192\u00E2\u201A\u00AC\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tommygun","CreatedById":41293,"CreatedDateTime":"2012-09-11T02:13:00Z","Content":"\n\u003Cp\u003EHi, I\u0027m wondering what is the difference is between crashTolerance and impactTolerance?\u003C/p\u003E\u003Cp\u003E-Thanks.\u003C/p\u003E\n"},{"CreatedByName":"Chev","CreatedById":34254,"CreatedDateTime":"2012-09-18T19:58:12Z","Content":"\n\u003Cp\u003EHow can I manipulate individual landing legs? For example for ladders I can search the parts tree for RetractableLadder partmodules and either call Extend()/Retract() or SendMessage(\u0022Extend\u0022)/SendMessage(\u0022Retract\u0022), and that works fine. However, for ModuleAnimatorLandingGear, SendMessage(\u0022InputGearToggle\u0022) doesn\u0027t seem to do anything. Or should I somehow manipulate a HLandingLeg directly?\u003C/p\u003E\n"},{"CreatedByName":"mrenigma03","CreatedById":28823,"CreatedDateTime":"2012-09-25T19:50:44Z","Content":"\n\u003Cp\u003ETwo questions:\u003C/p\u003E\u003Cp\u003E1) When creating a custom icon for a part using a plugin for the staging display, what size should I make it? \u003Ca href=\u0022http://kspwiki.nexisonline.net/wiki/Module_code_examples#Adding_a_Custom_Icon\u0022 rel=\u0022external nofollow\u0022\u003EThis doesn\u0027t say\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E2) Why does creating a custom icon break backwards compatibility, and can I fix that? In other words, I have a ship with my custom part on it and a blank icon. I edit the code, add the icon, recompile. Now when I load that .craft, the part is gone. I would have to make a new ship in the VAB to use the part.\u003C/p\u003E\n"},{"CreatedByName":"Chev","CreatedById":34254,"CreatedDateTime":"2012-09-26T12:15:47Z","Content":"\n\u003Cp\u003E1) Use 64x64, judging by the example file (size of one of the grid squares).\u003C/p\u003E\u003Cp\u003ENo insight on 2) for now, gotta try that\u003C/p\u003E\n"}]}