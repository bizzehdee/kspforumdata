{"TopicId":113122,"ForumId":29,"TopicTitle":"A question for modders on playing sounds","CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-06-16T16:40:53Z","PageNum":1,"Articles":[{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-06-16T16:40:53Z","Content":"Hello.\n\nI am woking on a mod that plays some sounds and have several troubles with them. Could you help me a little?\n\nThe code is:\n\n    GameObject audioPlayer = new GameObject();AudioClip heartClip;heartClip = GameDatabase.Instance.GetAudioClip(\u0022Sounds/heart-beat\u0022);heartAudio = audioPlayer.AddComponent();heartAudio.volume = GameSettings.VOICE_VOLUME * heartBeatsVolume;heartAudio.panLevel = 0f;heartAudio.dopplerLevel = 0;heartAudio.bypassEffects = true;heartAudio.loop = true;heartAudio.clip = heartClip;\n\nNothing special here, just like in any other mod. My one is initialized in Flight mode too. But then I have to neccessarily do the following or else none of my sounds are played in cockpit:\n\n    audioPlayer.transform.SetParent(FlightCamera.fetch.mainCamera.transform);\n\nWithout it the sound source seems to be bound to KSC (have heard the sound when flew very close to it).\n\nOther mods using sounds don\u0027t have such transform assignment and their sounds are played with no problem. What am I doing wrong?\n\nThere\u0027s another problem: when I load a save game and then switch to the map view and back it seems that KSP plays all the loaded AudioSources at once (you can hear weird stock engine boost sounds sometimes when switching back to flight). And mine are played too and that\u0027s weird escpecially for the looped AudioSources and I\u0027m sure they are not triggered by my code. Other mods don\u0027t have such problem. What\u0027s the reason and how to deal with that?\n\nWould appreciate your help.\n\n**Edited \u003Ctime datetime=\u00222015-06-16T16:52:26Z\u0022 title=\u002206/16/2015 04:52  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 16, 2015\u003C/time\u003E by Ser**"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2015-06-16T21:33:30Z","Content":"**[MOD - Moved to Plugin Development Help and Support subforums]**"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2015-06-24T05:17:49Z","Content":"I have no idea, but I\u0027m struggling with getting sounds to \u0022come from\u0022 where I want them to also...\n\nAnyway, I found this in my travels, maybe it can give you a clue? Hope it helps:\n\n[http://www.blog.silentkraken.com/2010/04/06/audiomanager/](http://www.blog.silentkraken.com/2010/04/06/audiomanager/)"},{"CreatedByName":"Ser","CreatedById":104207,"CreatedDateTime":"2015-06-24T14:41:00Z","Content":"Thanks. So what\u0027s your problem? Set the gameObject\u0027s transform\u0027s parent to transform of the object you want to emit your sound.\n\nInteresting thing is that I need to set this too to have sounds \u0022inside\u0022 the pilot\u0027s head. But when I searched through the Chatterer source code I haven\u0027t found any such bindings and somehow it happens that Chatterer works.\n\nAnd that\u0027s not the main trouble, though it is possibly leads to a more annoying issue: having sounds coming from nowhere when switching back from the Map view. Do you have such issue as well?\n\n**Edited \u003Ctime datetime=\u00222015-06-24T14:44:42Z\u0022 title=\u002206/24/2015 02:44  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 24, 2015\u003C/time\u003E by Ser**"},{"CreatedByName":"tg626","CreatedById":112361,"CreatedDateTime":"2015-06-24T15:44:43Z","Content":"No. As it turns out it was because I was accidentally restricting the code from adding a audio source to ALL the ports. It was only adding one to the first port. Most bugs turn out like this, totally DUH! once I realize what\u0027s up. I suffer from having a \u0022single linear thread\u0022 frame of mind, coming from my earliest experience programming in [BASIC](https://en.wikipedia.org/wiki/BASIC)."}]}