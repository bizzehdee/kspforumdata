{"TopicId":163924,"ForumId":29,"TopicTitle":"ElectricCharge drain fixed vs per second?","CreatedByName":"trias702","CreatedById":179390,"CreatedDateTime":"2017-07-31T17:24:57Z","PageNum":1,"Articles":[{"CreatedByName":"trias702","CreatedById":179390,"CreatedDateTime":"2017-07-31T17:24:57Z","Content":"\n\u003Cp\u003E\nHello,\n\u003C/p\u003E\n\u003Cp\u003E\nI have a question about how the game code handles draining ElectricCharge (or any resource for that matter) on a fixed, one-time versus per second basis. Currently, I have a naive understanding that everything operates around the part.RequestResource(string resourceName, double amntToDrain) method.\n\u003C/p\u003E\n\u003Cp\u003E\nIs this the only method I need to reliably do a one-shot, fire-and-forget drain of any resource? There are no edge cases to consider or anything else which I need to write more complex wrapper code for? I ask because I\u0027ve taken a look at the Github code for some other plugins, namely KSP Interstellar-Extended, which uses some very complex wrapper classes based on Open Resource System to encapsulate this logic, but then other mods, like the NearFuture mods seem to just use part.RequestResource.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, in addition to a one-time, fire-and-forget way of draining a resource, how does one reliably tell the game engine to drain a resource each second of game time? For example, the stock \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E module requires 5 EC/sec (I\u0027m assuming this \u0027per second\u0027 is per second of game time?) in order to function. If I want to make a custom module which also drains 5 EC/sec of game time, how would I reliably do this? From the research I have done, it seems that it\u0027s as simple as doing part.RequestResource(string resourceName, double amountToDrain * TimeWarp.fixedDeltaTime) in the FixedUpdate method? So something like:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Epublic void FixedUpdated()\n{\n\tdouble consumeCharge = 5 * TimeWarp.fixedDeltaTime;\t   // 5 EC/second\n\tdouble requested = part.RequestResource(\u0022ElectricCharge\u0022, consumeCharge);\n\t...\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nIs that really are there is to it for draining a resource per second? There are no other considerations or edge cases one needs to write custom logic for? I would greatly appreciate any help someone may provide about this.\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2017-07-31T22:05:42Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223136266\u0022 data-ipsquote-contentid=\u0022163924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221501521897\u0022 data-ipsquote-userid=\u0022179390\u0022 data-ipsquote-username=\u0022trias702\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, trias702 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs that really are there is to it for draining a resource per second?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes. Just be aware\u00A0that the returned value\u00A0may be less than what you asked for since the ressource may be exhausted.\n\u003C/p\u003E\n"},{"CreatedByName":"trias702","CreatedById":179390,"CreatedDateTime":"2017-08-01T07:35:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223136581\u0022 data-ipsquote-contentid=\u0022163924\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221501538742\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYes. Just be aware\u00A0that the returned value\u00A0may be less than what you asked for since the ressource may be exhausted.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you. And I am correct that any resource drain per second should only ever be done in FixedUpdate?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2017-08-01T12:11:35Z","Content":"\n\u003Cp\u003E\nYou are correct.\n\u003C/p\u003E\n"}]}