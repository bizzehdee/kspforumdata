{"TopicId":165564,"ForumId":29,"TopicTitle":"Getting the animation name... WHUT?","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-16T16:47:23Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-16T16:47:23Z","Content":"\n\u003Cp\u003E\nOk, I\u0027m not stupid. \u00A0I have done this a bunch of times. \u00A0But now, this is giving me results that... I frankly don\u0027t understand.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E            foreach (Animation anim in part.GetComponentsInChildren\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Animation\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E()) \n            {\n                Debug.Log(\u0022Found animation name: \u0022 \u002B anim.name);\n            }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nOk, pretty simple right? \u00A0Find me all the animations on the part and tell me what the name of the animation is. \u00A0Or so you\u0027d think.\n\u003C/p\u003E\n\u003Cp\u003E\nIf the animation is somewhere\u00A0in the hierarchy of the part, it\u0027s coming back with anim.name = the\u00A0transform name (the one at the top of the inspector) and not the actual animation name.\n\u003C/p\u003E\n\u003Cp\u003E\nIf the animation exists on the root GameObject, it\u0027s coming back with anim.name = the MODEL NAME from part tools. \u00A0WHUT???\n\u003C/p\u003E\n\u003Cp\u003E\nSo somehow, thinking I\u0027ve had a case of the stupids and all my other code that grabs animations is now junk, I decided to try this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E            foreach (Animation anim in part.FindModelComponents\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Animation\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E()) \n            {\n                Debug.Log(\u0022Found animation name: \u0022 \u002B anim.name);\n            }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nAnd I\u0027m getting the same result. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPlease explain as this makes verifying that I\u0027m loading the correct animation by name rather difficult.\n\u003C/p\u003E\n\u003Cp\u003E\nNow here\u0027s where it gets really stupid.\n\u003C/p\u003E\n\u003Cp\u003E\nIf I do this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 List\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Animation\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E list = new List\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Animation\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E(base.part.FindModelComponents\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Animation\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E());\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 int i = 0;\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 int count = list.Count;\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 while (i \u0026lt; count)\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 {\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 Animation animation = list[i];\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 if (animation[animationName] != null)\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 {\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 partAnimation = animation;\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 }\n                i\u002B\u002B;\n            }\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nor some variation thereof, and tell it to assign the animation it finds to partAnimation by name (animationName), it\u0027s happy. \u00A0It passes the correct animation over to partAnimation even though the name is wrong. \u00A0I.E. animationName = lightsAnimation \u00A0and animation.name = Model\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-09-16T17:12:45Z\u0022 title=\u002209/16/2017 05:12  PM\u0022 data-short=\u00226 yr\u0022\u003ESeptember 16, 2017\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2017-09-17T08:24:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223173711\u0022 data-ipsquote-contentid=\u0022165564\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221505580443\u0022 data-ipsquote-userid=\u002278435\u0022 data-ipsquote-username=\u0022Fengist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 hours ago, Fengist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPlease explain as this makes verifying that I\u0027m loading the correct animation by name rather difficult.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/Animation.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.unity3d.com/ScriptReference/Animation.html\u003C/a\u003E\u00A0: \u0022name \u00A0The name of the object.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/Object-name.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.unity3d.com/ScriptReference/Object-name.html\u003C/a\u003E\u00A0: \u0022\u003Cspan style=\u0022color:#455463;font-size:14px;\u0022\u003EComponents share the same name with the game object and all attached components.\u0022\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#455463;font-size:14px;\u0022\u003EYou are not checking\u00A0the animation name.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#455463;font-size:14px;\u0022\u003EWhat you want is\u00A0\u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/Animation.Index_operator.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.unity3d.com/ScriptReference/Animation.Index_operator.html\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#455463;font-size:14px;\u0022\u003EOr even more simply Animation FindModelAnimator(string clipName) Animation[] FindModelAnimators(string clipName)\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-17T12:47:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223174179\u0022 data-ipsquote-contentid=\u0022165564\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221505636661\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/Animation.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.unity3d.com/ScriptReference/Animation.html\u003C/a\u003E\u00A0: \u0022name \u00A0The name of the object.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/Object-name.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.unity3d.com/ScriptReference/Object-name.html\u003C/a\u003E\u00A0: \u0022\u003Cspan style=\u0022color:#455463;font-size:14px;\u0022\u003EComponents share the same name with the game object and all attached components.\u0022\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#455463;font-size:14px;\u0022\u003EYou are not checking\u00A0the animation name.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#455463;font-size:14px;\u0022\u003EWhat you want is\u00A0\u003Ca href=\u0022https://docs.unity3d.com/ScriptReference/Animation.Index_operator.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://docs.unity3d.com/ScriptReference/Animation.Index_operator.html\u003C/a\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#455463;font-size:14px;\u0022\u003EOr even more simply Animation FindModelAnimator(string clipName) Animation[] FindModelAnimators(string clipName)\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI guess I\u0027m looking at it wrong. \u00A0I assumed that the name of the animation component that I dropped into Unity would take on the name of the animation assigned to it. \u00A0Yes, I used FindModelAnimator(s) to locate the animations it works fine, it just seems strange that the actual animation component would take on the object name.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\u00A0\n\u003C/p\u003E\n"}]}