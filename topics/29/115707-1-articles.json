{"TopicId":115707,"ForumId":29,"TopicTitle":"Need some help with key binding for new modder","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-12T12:59:00Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-12T12:59:00Z","Content":"Hi,\n\nWhile I would appreciate some help with the actual answer for the following questions, I would also appreciate pointers on where to find the answers myself:\n\nI\u0027m using Xamarin Studio on Windows 7, if that is relevant.\n\nI am trying to write a mod which will take screenshots at specific events during a game. I am trying to find out the following:\n\n1. I have looked in the references for UnityEngine, and while I found a Screen class, I don\u0027t see anything which would be something like screenshot, screencapture, etc.\n\n2. Alternatively, I am also looking if there is a way to inject a keystroke into the stream. \n\nI\u0027d prefer #1, since there are a number of things which I\u0027d like to do and that is a better way.\n\nThanks in advance"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-07-12T14:04:53Z","Content":"While I don\u0027t know how to trigger a screenshot, I can confirm that injecting a keystroke via code is a no-go.\n\nI looked for this myself a while back and my best guess is that Unity only accepts keystrokes from the hardware input layer and has no way of writing to that function itself.\n\nD.\n\nedit: bah, ninja!"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-12T14:09:52Z","Content":"\u003E \n\u003E Application.CaptureScreenshot(string filename);\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E is what you are looking for. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nTHANK YOU!\n\nI didn\u0027t think the injecting was the right way to go, but had to ask."},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-15T02:32:22Z","Content":"\u003E \n\u003E Application.CaptureScreenshot(string filename);\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E is what you are looking for. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nIs this done asynchronously? I\u0027m asking because I first call it, and then the next line I try to convert it to a jpg, and I\u0027m getting an error that the file doesn\u0027t exist.\n\nThanks"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-07-15T03:29:11Z","Content":"Does the file exist by the time you can move to the folder and check?\n\nIf this is on the same \u0022update frame\u0022, the next line of code pretty much runs instantly and while making a screenshot is fast, it\u0027s not that fast. (a.k.a. runs asynchronously)\n\nIf this is the case you\u0027ll have to delay until the file exists some how.\n\nD."},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2015-07-15T08:50:24Z","Content":"Start a coroutine to wait a few frames, then try the conversion? Shout if you need some pointers."},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2015-07-15T10:39:15Z","Content":"\u003E \n\u003E Does the file exist by the time you can move to the folder and check?\n\u003E If this is on the same \u0022update frame\u0022, the next line of code pretty much runs instantly and while making a screenshot is fast, it\u0027s not that fast. (a.k.a. runs asynchronously)\n\u003E \n\u003E If this is the case you\u0027ll have to delay until the file exists some how.\n\u003E \n\u003E D.\n\nThat\u0027s what I thought. Thanks.\n\n- - - Updated - - -\n\n\u003E \n\u003E Start a coroutine to wait a few frames, then try the conversion? Shout if you need some pointers.\n\nIf you could point me to an example, that would be a big help. I\u0027m just getting started in this kind of programming, and, while I know threading very well, i don\u0027t know how to do it in Unity yet.\n\nThanks."},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-07-15T10:59:36Z","Content":"[Documentation](http://docs.unity3d.com/Manual/Coroutines.html)\n\nSimple wait while null function\n\n    public System.Collections.IEnumerator waitWhileNull(){    while(image == null)        yield return null; // null == wait till the next Update cycle, new WaitForFixedUpdate() == wait till next FixedUpdate cycle, break == exit this coroutine instance here, new WaitForSeconds(1) == Wait till one second has passed    // do something}\n\n[KSP usage](https://github.com/Crzyrndm/FilterExtension/blob/master/FilterExtension/Editor.cs#L23) (two stages of waiting for a certain value, and three stages where it\u0027s just waiting a set number of frames)\n\nCoroutines let you execute a single function with all its local variables through multiple timesteps\n\n**Edited \u003Ctime datetime=\u00222015-07-15T11:04:05Z\u0022 title=\u002207/15/2015 11:04  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 15, 2015\u003C/time\u003E by Crzyrndm**"}]}