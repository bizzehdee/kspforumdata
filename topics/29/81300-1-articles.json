{"TopicId":81300,"ForumId":29,"TopicTitle":"[Closed] back to game","CreatedByName":"stephm","CreatedById":112604,"CreatedDateTime":"2014-08-10T08:48:06Z","PageNum":1,"Articles":[{"CreatedByName":"stephm","CreatedById":112604,"CreatedDateTime":"2014-08-10T08:48:06Z","Content":"\n\u003Cp\u003Ehello !\u003C/p\u003E\u003Cp\u003EI test this in a pluggin :\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPField(isPersistant = true, guiActive = true, guiActiveEditor = true, guiName = \u0022Spring-Tweak\u0022), UI_FloatRange(minValue = 0.0f, maxValue = 40.0f, stepIncrement = 0.5f)]\u003Cbr\u003E  public float MassSlider = 0.0f;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI have some questions ?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Col style=\u0022list-style-type:decimal;\u0022\u003E\u003Cli\u003EIt\u0027s possible to have negative value for minValue and maxValue ? \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIt\u0027s possible to drive minValue or maxValue by variable like : minValue = rangeInf ? \u003Cbr\u003E\u003C/li\u003E\u003Cli\u003EIs that code need to be rewrite, on each segment in pluggin (like onStart or onUpdate), to work properly ? \u003Cbr\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003EMy problem : \u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn sph the range work : I have (by right click) my range defined between 0 and 40.\u003C/p\u003E\u003Cp\u003Ebut in game, with plane is on runway, the range is modified to -20 to 20 \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_huh.gif\u0022 alt=\u0022:confused:\u0022\u003E.\u003C/p\u003E\u003Cp\u003EMassSlider is only declared one time by the code above, so I have no idea why Ksp change the range to -20 20 !\u003C/p\u003E\u003Cp\u003EAnd other thing :\u003C/p\u003E\u003Cp\u003EFor monodevelopp export , they particular thing to do or I keep just the default export setup ?\u003C/p\u003E\u003Cp\u003Evoil\u00C3\u0192\u00C2\u00A0 merci thank you\u003C/p\u003E\u003Cp\u003Esteph\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-21T20:56:04Z\u0022 title=\u002208/21/2014 08:56  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 21, 2014\u003C/time\u003E by stephm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-08-10T21:21:32Z","Content":"\n\u003Cp\u003E1. Yes.\u003C/p\u003E\u003Cp\u003E2. Possible, yes, but it would be pretty hard and would involve reflection, and you don\u0027t want to do that. So personally I class this as a \u0022no\u0022, you can\u0027t really modify those values.\u003C/p\u003E\u003Cp\u003E3. No.\u003C/p\u003E\u003Cp\u003EFor your problem, we\u0027re going to need more info (by that I mean more code and logs), because on a first look I don\u0027t see why it would do that.\u003C/p\u003E\n"},{"CreatedByName":"stephm","CreatedById":112604,"CreatedDateTime":"2014-08-10T21:31:40Z","Content":"\n\u003Cp\u003Ehello !\u003C/p\u003E\u003Cp\u003EOups yes it\u0027s true it\u0027s the same thing for bug in KSP need log and info !\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E// Just to see the effect in game by tweaking the wheelcollider\u0027s parameter \u003Cp\u003Eusing UnityEngine;\u003C/p\u003E\u003Cp\u003Eusing System;\u003C/p\u003E\u003Cp\u003Eusing KSP.IO;namespace SmallGearBayAR\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E public class SprinGSetup : PartModule\u003C/p\u003E\u003Cp\u003E { \u003C/p\u003E\u003Cp\u003E // -- Init Plugg on first start --\u003C/p\u003E\u003Cp\u003E private bool SpringInit = false;\u003C/p\u003E\u003Cp\u003E // ------ Mass Parameter ------\u003C/p\u003E\u003Cp\u003E [KSPField(isPersistant = true, guiActive =true, guiActiveEditor = true, guiName =\u0022Vessel\u0027s Mass Test\u0022, guiFormat = \u0022F1\u0022)]\u003C/p\u003E\u003Cp\u003E public float TotalMass; //vessel Mass\u003C/p\u003E\u003Cp\u003E public float SpringMass = 0f; //Spring Force\u003C/p\u003E\u003Cp\u003E // ------ WheelCollider Spring Parameter ------\u003C/p\u003E\u003Cp\u003E private WheelCollider MyWheelCol; \u003C/p\u003E\u003Cp\u003E private WheelCollider WheelColContainer;\u003C/p\u003E\u003Cp\u003E private JointSpring SuspParameter; // spring parameters\u003C/p\u003E\u003Cp\u003E //private float SuspDist; // for further test\u003C/p\u003E\u003Cp\u003E //----\u003C/p\u003E\u003Cp\u003E [KSPField(isPersistant = true, guiActive = true, guiActiveEditor = true, guiName = \u0022Spring-Tweak\u0022), UI_FloatRange(minValue = 0.0f, maxValue = 40.0f, stepIncrement = 0.5f)]\u003C/p\u003E\u003Cp\u003E public float MassSlider = 0.0f; \u003C/p\u003E\u003Cp\u003E public override void OnStart(StartState state)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E base.OnStart(state);\u003C/p\u003E\u003Cp\u003E if (!SpringInit) InitSLiderSpring();\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E public override void OnUpdate ()\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E base.OnUpdate();\u003C/p\u003E\u003Cp\u003E float Test = SpringMass \u002B MassSlider;\u003C/p\u003E\u003Cp\u003E if ((HighLogic.LoadedSceneIsFlight) \u0026amp;\u0026amp; (SuspParameter.spring != Test))\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E // adjust \u002B tweak\u003C/p\u003E\u003Cp\u003E TweakSpring(MassSlider);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E // ---- save load methodes ----\u003C/p\u003E\u003Cp\u003E \u003Cem\u003E/*\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E public override void OnSave(ConfigNode node)\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E {\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E PluginConfiguration config = PluginConfiguration.CreateForType\u0026lt;SprinGSetup\u0026gt;();\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E config.SetValue (\u0022Spring Value\u0022, SpringMass);\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E config.save();\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E }\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E public override void OnLoad(ConfigNode node)\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E {\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E PluginConfiguration config = PluginConfiguration.CreateForType\u0026lt;SprinGSetup\u0026gt;();\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E config.load();\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E SpringMass = config.GetValue\u0026lt;float\u0026gt;(\u0022Spring Value\u0022);\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E }\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E*/\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E // ---- Methodes ----\u003C/p\u003E\u003Cp\u003E private void InitSLiderSpring()\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E print (\u0022init started\u0022);\u003C/p\u003E\u003Cp\u003E SpringInit = true;\u003C/p\u003E\u003Cp\u003E TotalMass = vessel.GetTotalMass();\u003C/p\u003E\u003Cp\u003E SpringMass = TotalMass / 3.0f; // repartition simple \u003C/p\u003E\u003Cp\u003E // For this part i\u0027m not sure at all \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E WheelColContainer = part.gameObject.GetComponentInChildren\u0026lt;WheelCollider\u0026gt;();\u003C/p\u003E\u003Cp\u003E MyWheelCol = WheelColContainer.GetComponent\u0026lt;WheelCollider\u0026gt;();\u003C/p\u003E\u003Cp\u003E SuspParameter = MyWheelCol.suspensionSpring;\u003C/p\u003E\u003Cp\u003E // Ajust to new Mass\u003C/p\u003E\u003Cp\u003E TweakSpring(0.0f);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E private void TweakSpring(float Mass)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E SuspParameter.spring = SpringMass \u002B Mass;\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EJust to learn the way how code is created to take info in part !\u003C/p\u003E\u003Cp\u003EFor log at this moment no error , I\u0027m looking how the debug info work\u003C/p\u003E\u003Cp\u003E(tested Print, to see some variables in debug window)\u003C/p\u003E\u003Cp\u003Esteph\u003C/p\u003E\u003Cp\u003EEdit :\u003C/p\u003E\u003Cp\u003EFor tonight I\u0027m OUt sorry for that Stupi_chris , my neighbor make A ......... noise just \u003C/p\u003E\u003Cp\u003Eto bother me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cry.gif\u0022 alt=\u0022;.;\u0022\u003E, it\u0027s impossible for me to stay concentrate.\u003C/p\u003E\u003Cp\u003EI\u0027m back tomorrow if i find some sleeping...........\u003C/p\u003E\u003Cp\u003Esorry\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-10T21:38:30Z\u0022 title=\u002208/10/2014 09:38  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 10, 2014\u003C/time\u003E by stephm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stephm","CreatedById":112604,"CreatedDateTime":"2014-08-11T12:32:01Z","Content":"\n\u003Cp\u003Ehello !\u003C/p\u003E\u003Cp\u003EI have tested the pluggin with a 20t plane and a big (40t) , the range -20 to 20 is only on the 40 t plane.\u003C/p\u003E\u003Cp\u003Ebut for the 20t plane the range is correct 0 to 40 !\u003C/p\u003E\u003Cp\u003EI need to see how the range is affected by mass, I\u0027m thinking I don\u0027t understand at all, the code writing above \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E.\u003C/p\u003E\u003Cp\u003EThat make a perfect sense for me, because, same problem in Java for my first first code lol !!!!\u003C/p\u003E\u003Cp\u003EAnother thing the way to access data in ksp it\u0027s very similar to 3DS.\u003C/p\u003E\u003Cp\u003EEdit 11/08/14 16h\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E// Just to see the effect in game by tweaking the wheelcollider\u0027s parameter \u003C/p\u003E\u003Cp\u003Eusing UnityEngine;\u003C/p\u003E\u003Cp\u003Eusing System;\u003C/p\u003E\u003Cp\u003Eusing KSP.IO;\u003C/p\u003E\u003Cp\u003Enamespace SmallGearBayAR\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E public class SprinGSetup : PartModule\u003C/p\u003E\u003Cp\u003E { \u003C/p\u003E\u003Cp\u003E // -- Init Plugg on first start --\u003C/p\u003E\u003Cp\u003E private bool SpringInit = false;\u003C/p\u003E\u003Cp\u003E // ------ Mass Parameter ------\u003C/p\u003E\u003Cp\u003E [KSPField(isPersistant = true, guiActive =true, guiActiveEditor = true, guiName =\u0022Vessel\u0027s Mass Test\u0022, guiFormat = \u0022F1\u0022)]\u003C/p\u003E\u003Cp\u003E public float TotalMass; //vessel Mass\u003C/p\u003E\u003Cp\u003E [KSPField(isPersistant = true, guiActive =true, guiActiveEditor = true, guiName =\u0022Spring value\u0022, guiFormat = \u0022F2\u0022)]\u003C/p\u003E\u003Cp\u003E public float SpringResult = 0f; // show the value\u003C/p\u003E\u003Cp\u003E public float SpringMass = 0f; //Spring Force\u003C/p\u003E\u003Cp\u003E // ------ WheelCollider Spring Parameter ------\u003C/p\u003E\u003Cp\u003E private WheelCollider MyWheelCol; \u003C/p\u003E\u003Cp\u003E private WheelCollider WheelColContainer;\u003C/p\u003E\u003Cp\u003E private JointSpring SuspParameter; // spring parameters\u003C/p\u003E\u003Cp\u003E //private float SuspDist; // for further test\u003C/p\u003E\u003Cp\u003E //----\u003C/p\u003E\u003Cp\u003E [KSPField(isPersistant = true, guiActive = true, guiActiveEditor = true, guiName = \u0022Spring-Tweak\u0022), UI_FloatRange(minValue = 0.0f, maxValue = 40.0f, stepIncrement = 0.5f)]\u003C/p\u003E\u003Cp\u003E public float MassSlider = 0.0f; \u003C/p\u003E\u003Cp\u003E public override void OnStart(StartState state)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E base.OnStart(state);\u003C/p\u003E\u003Cp\u003E if (!SpringInit) InitSLiderSpring();\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E public override void OnUpdate ()\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E base.OnUpdate();\u003C/p\u003E\u003Cp\u003E float Test = SpringMass \u002B MassSlider;\u003C/p\u003E\u003Cp\u003E if ((HighLogic.LoadedSceneIsFlight) \u0026amp;\u0026amp; (SuspParameter.spring != Test))\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E // adjust \u002B tweak\u003C/p\u003E\u003Cp\u003E TweakSpring(MassSlider);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E // ---- save load methodes ----\u003C/p\u003E\u003Cp\u003E /*\u003C/p\u003E\u003Cp\u003E public override void OnSave(ConfigNode node)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E PluginConfiguration config = PluginConfiguration.CreateForType\u0026lt;SprinGSetup\u0026gt;();\u003C/p\u003E\u003Cp\u003E config.SetValue (\u0022Spring Value\u0022, SpringMass);\u003C/p\u003E\u003Cp\u003E config.save();\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E public override void OnLoad(ConfigNode node)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E PluginConfiguration config = PluginConfiguration.CreateForType\u0026lt;SprinGSetup\u0026gt;();\u003C/p\u003E\u003Cp\u003E config.load();\u003C/p\u003E\u003Cp\u003E SpringMass = config.GetValue\u0026lt;float\u0026gt;(\u0022Spring Value\u0022);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E*/\u003C/p\u003E\u003Cp\u003E // ---- Methodes ----\u003C/p\u003E\u003Cp\u003E private void InitSLiderSpring()\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E //Debug.Log(\u0022init started\u0022);\u003C/p\u003E\u003Cp\u003E SpringInit = true;\u003C/p\u003E\u003Cp\u003E TotalMass = vessel.GetTotalMass();\u003C/p\u003E\u003Cp\u003E SpringMass = TotalMass / 2.0f; // repartition simple \u003C/p\u003E\u003Cp\u003E // For this part i\u0027m not sure at all \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E WheelColContainer = this.part.gameObject.GetComponentInChildren\u0026lt;WheelCollider\u0026gt;();\u003C/p\u003E\u003Cp\u003E MyWheelCol = WheelColContainer.GetComponent\u0026lt;WheelCollider\u0026gt;();\u003C/p\u003E\u003Cp\u003E SuspParameter = MyWheelCol.suspensionSpring;\u003C/p\u003E\u003Cp\u003E // Ajust to new Mass\u003C/p\u003E\u003Cp\u003E TweakSpring(0.0f);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E private void TweakSpring(float Mass)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E Debug.Log(String.Format(\u0022acces to value : SuspParameter.spring= {0:0.0}\u0022, SuspParameter.spring));\u003C/p\u003E\u003Cp\u003E Debug.Log(String.Format(\u0022acces to value : MyWheelCol...spring= {0:0.0}\u0022, MyWheelCol.suspensionSpring.spring));\u003C/p\u003E\u003Cp\u003E SpringResult = SpringMass \u002B Mass;\u003C/p\u003E\u003Cp\u003E SuspParameter.spring = SpringResult;\u003C/p\u003E\u003Cp\u003E MyWheelCol.suspensionSpring = SuspParameter; // work but only if gear has a full cycle raise and lowwer\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E \u003Cp\u003EI use type of \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/system.string.aspx\u0022 rel=\u0022external nofollow\u0022\u003EINFO\u003C/a\u003E to learn how to (for debug function in this case), is this kind of references are valid for all C# reference in KSP ?\u003C/p\u003E\u003Cp\u003ENow I have a result , but it\u0027s not working real time, the gear need to raised and lowered, after that the new spring value is used.\u003C/p\u003E\u003Cp\u003EI see in debug window the change of value, when slider moving, it\u0027s ok .\u003C/p\u003E\u003Cp\u003Ebut I have still the same behavior about the range of the MassSlider, -20 to 20 for 40t and 0 to 40 for 20t plane..\u003C/p\u003E\u003Cp\u003EI think it\u0027s under my nose but where \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E !\u003C/p\u003E\u003Cp\u003EEdit 21/08/14\u003C/p\u003E\u003Cp\u003EClose Post : test abandonned\u003C/p\u003E\u003Cp\u003Esteph\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-21T20:57:09Z\u0022 title=\u002208/21/2014 08:57  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 21, 2014\u003C/time\u003E by stephm\u003C/strong\u003E\n\u003C/span\u003E\n"}]}