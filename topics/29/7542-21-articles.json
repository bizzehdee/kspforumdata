{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":21,"Articles":[{"CreatedByName":"Albert VDS","CreatedById":74055,"CreatedDateTime":"2013-11-07T13:52:22Z","Content":"\n\u003Cp\u003EHow do you play an animation? I tried animation.Play(\u0022animationname\u0022); but it doesn\u0027t seem to work.\u003C/p\u003E\n"},{"CreatedByName":"hab136","CreatedById":75997,"CreatedDateTime":"2013-11-07T22:32:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003Ehab136: Have you checked out public ShipConstruct EditorLogic.ship ... that and its add method looks promising.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks! I got it working tonight. There\u0027s a little more than just ship.Add()... in particular to have to set the position and the AttachNodes.\u003C/p\u003E\u003Cp\u003EThis code is rough, but it will attach a large probe core to the bottom of another large probe core (or actually the bottom of whatever the root part is, but the numbers are for large probe cores):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t\t\t// Get all the parts of the ship\u003Cbr\u003E\t\t\tEditorLogic editor = EditorLogic.fetch;\u003Cbr\u003E\t\t\tShipConstruct ship = editor.ship;\u003Cbr\u003E\t\t\tList\u0026lt;Part\u0026gt; parts = ship.parts;\u003Cbr\u003E\u003Cbr\u003E\t\t\tPart rootpart = parts [0];\u003Cbr\u003E\u003Cbr\u003E\t\t\t// Make a new Part object\u003Cbr\u003E\t\t\tAvailablePart ap = PartLoader.getPartInfoByName (\u0022probeStackLarge\u0022);\u003Cbr\u003E\t\t\tUnityEngine.Object obj = UnityEngine.Object.Instantiate(ap.partPrefab);\u003Cbr\u003E\t\t\tPart newPart = (Part)obj;\u003Cbr\u003E\u003Cbr\u003E\t\t\tnewPart.gameObject.SetActive(true);\u003Cbr\u003E\t\t\tnewPart.gameObject.name = \u0022probeStackLarge\u0022;\u003Cbr\u003E\t\t\tnewPart.partInfo = ap;\u003Cbr\u003E\t\t\tnewPart.transform.localScale = rootpart.transform.localScale;\u003Cbr\u003E\t\t\tnewPart.transform.parent = rootpart.transform; // must be BEFORE localposition!\u003Cbr\u003E\t\t\tVector3 v = new Vector3 ();\u003Cbr\u003E\t\t\tv.x = 0.0f;\u003Cbr\u003E\t\t\tv.y = -0.4f;\u003Cbr\u003E\t\t\tv.z = 0.0f;\u003Cbr\u003E\u003Cbr\u003E\t\t\tQuaternion q = new Quaternion ();\u003Cbr\u003E\t\t\tq.x = 0.0f;\u003Cbr\u003E\t\t\tq.y = 0.0f;\u003Cbr\u003E\t\t\tq.z = 0.0f;\u003Cbr\u003E\t\t\tq.w = 1.0f;\u003Cbr\u003E\t\t\tnewPart.transform.localPosition = v;\u003Cbr\u003E\t\t\tnewPart.transform.localRotation = q;\u003Cbr\u003E\u003Cbr\u003E\t\t\trootpart.addChild (newPart);\u003Cbr\u003E\t\t\tship.Add (newPart);\u003Cbr\u003E\u003Cbr\u003E\t\t\tAttachNode newAN = newPart.findAttachNodes (\u0022top\u0022) [0];\u003Cbr\u003E\t\t\tnewAN.attachedPart = rootpart;\u003Cbr\u003E\t\t\tAttachNode rootAN = rootpart.findAttachNodes (\u0022bottom\u0022) [0];\u003Cbr\u003E\t\t\trootAN.attachedPart = newPart;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m very happy that I was able to do this much - it demonstrates that I can programmatically add parts!\u003C/p\u003E\u003Cp\u003ENow, to work out surface attachment (vs node attachment demonstrated above) and then math to figure out where in 3-D space to place the surface attachments. But that\u0027s for tomorrow. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"CARROTSAREAWSOME","CreatedById":61645,"CreatedDateTime":"2013-11-09T11:02:26Z","Content":"\n\u003Cp\u003EHello fellow plugin makers!\u003C/p\u003E\u003Cp\u003EI am making MP mod and im now stuck with vessels parts setting. Im beginner with KSP mods and C# so my question is probably easy to solve: How do i get parts of the vessel, and how do i set them. \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic Vessel craft = FlightGlobals.ActiveVessel;\u003Cbr\u003EDebug.Log(craft.parts.ToString());\u003C/pre\u003E\u003Cp\u003E Just gives me \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[Log]: System.Collections.Generic.List\u00601[Part]\u003C/pre\u003E\u003Cp\u003E on the KSP debug console. Thanks in advance for help!\u003C/p\u003E\n"},{"CreatedByName":"hab136","CreatedById":75997,"CreatedDateTime":"2013-11-09T14:13:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CARROTSAREAWSOME\u0022 data-cite=\u0022CARROTSAREAWSOME\u0022\u003E\u003Cdiv\u003EI am making MP mod and im now stuck with vessels parts setting. Im beginner with KSP mods and C# so my question is probably easy to solve: How do i get parts of the vessel, and how do i set them.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENote that there is already a working multiplayer mod:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/55835-Kmp-0-22-wip-alpha\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/55835-Kmp-0-22-wip-alpha\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.reddit.com/r/kmp\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.reddit.com/r/kmp\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThat said, here\u0027s how to print out the parts of the ship (lifted straight from my own mod):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\tprivate void printPart(string header, Part p){\u003Cbr\u003E\t\t\tif (p==null){\u003Cbr\u003E\t\t\t\tprint (header \u002B \u0022: null!\u0022);\u003Cbr\u003E\t\t\t} else {\u003Cbr\u003E\t\t\t\tprint (header \u002B\u0022: \u0022\u002Bp.name.ToString () \u002B \u0022: \u0022 \u002B p.uid.ToString () \u002B \u0022/\u0022 \u002B p.symmetryMode.ToString ()\u002B\u0022/\u0022\u002Bp.children.Count.ToString());\u003Cbr\u003E\t\t\t}\u003Cbr\u003E                        foreach (Part child in p.children) {\u003Cbr\u003E\t\t\t\tprint (\u0022child: \u0022\u002Bchild.name.ToString () \u002B \u0022: \u0022 \u002B child.uid.ToString () \u002B \u0022/\u0022 \u002B child.symmetryMode.ToString ()\u002B\u0022/\u0022\u002Bchild.children.Count.ToString());\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\tprivate void printPartList(string title, string header, List\u0026lt;Part\u0026gt; parts){\u003Cbr\u003E\t\t\tprint (\u0022=== \u0022\u002Btitle\u002B\u0022 ===\u0022);\u003Cbr\u003E\t\t\tforeach (Part p in parts) {\u003Cbr\u003E\t\t\t\tprintPart(header,p);\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E        EditorLogic editor = EditorLogic.fetch;\u003Cbr\u003E\tprintPartList(\u0022All parts of ship\u0022, \u0022Part\u0022, editor.ship.parts);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe editor.ship.parts is a List of \u0022Part\u0022 objects. See \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/6sh2ey19(v=vs.110).aspx\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://msdn.microsoft.com/en-us/library/6sh2ey19(v=vs.110).aspx\u003C/a\u003E if you need help with Lists. You can access the list like an array (parts[0], parts[1]) or step through it with \u0022foreach\u0022.\u003C/p\u003E\u003Cp\u003ETo add a part, see my sample at \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/7544-The-official-unoffical-help-a-fellow-plugin-developer-thread?p=764072\u0026amp;viewfull=1#post764072\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/7544-The-official-unoffical-help-a-fellow-plugin-developer-thread?p=764072\u0026amp;viewfull=1#post764072\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"CARROTSAREAWSOME","CreatedById":61645,"CreatedDateTime":"2013-11-09T14:44:42Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hab136\u0022 data-cite=\u0022hab136\u0022\u003E\u003Cdiv\u003ENote that there is already a working multiplayer mod:\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/55835-Kmp-0-22-wip-alpha\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/55835-Kmp-0-22-wip-alpha\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://www.reddit.com/r/kmp\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://www.reddit.com/r/kmp\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThat said, here\u0027s how to print out the parts of the ship (lifted straight from my own mod):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\tprivate void printPart(string header, Part p){\u003Cbr\u003E\t\t\tif (p==null){\u003Cbr\u003E\t\t\t\tprint (header \u002B \u0022: null!\u0022);\u003Cbr\u003E\t\t\t} else {\u003Cbr\u003E\t\t\t\tprint (header \u002B\u0022: \u0022\u002Bp.name.ToString () \u002B \u0022: \u0022 \u002B p.uid.ToString () \u002B \u0022/\u0022 \u002B p.symmetryMode.ToString ()\u002B\u0022/\u0022\u002Bp.children.Count.ToString());\u003Cbr\u003E\t\t\t}\u003Cbr\u003E                        foreach (Part child in p.children) {\u003Cbr\u003E\t\t\t\tprint (\u0022child: \u0022\u002Bchild.name.ToString () \u002B \u0022: \u0022 \u002B child.uid.ToString () \u002B \u0022/\u0022 \u002B child.symmetryMode.ToString ()\u002B\u0022/\u0022\u002Bchild.children.Count.ToString());\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\tprivate void printPartList(string title, string header, List\u0026lt;Part\u0026gt; parts){\u003Cbr\u003E\t\t\tprint (\u0022=== \u0022\u002Btitle\u002B\u0022 ===\u0022);\u003Cbr\u003E\t\t\tforeach (Part p in parts) {\u003Cbr\u003E\t\t\t\tprintPart(header,p);\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E        EditorLogic editor = EditorLogic.fetch;\u003Cbr\u003E\tprintPartList(\u0022All parts of ship\u0022, \u0022Part\u0022, editor.ship.parts);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe editor.ship.parts is a List of \u0022Part\u0022 objects. See \u003Ca href=\u0022http://msdn.microsoft.com/en-us/library/6sh2ey19(v=vs.110).aspx\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://msdn.microsoft.com/en-us/library/6sh2ey19(v=vs.110).aspx\u003C/a\u003E if you need help with Lists. You can access the list like an array (parts[0], parts[1]) or step through it with \u0022foreach\u0022.\u003C/p\u003E\u003Cp\u003ETo add a part, see my sample at \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/7544-The-official-unoffical-help-a-fellow-plugin-developer-thread?p=764072\u0026amp;viewfull=1#post764072\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/7544-The-official-unoffical-help-a-fellow-plugin-developer-thread?p=764072\u0026amp;viewfull=1#post764072\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI know that there is already a MP mod, but it is very unstable and i want to finish my project.\u003C/p\u003E\u003Cp\u003EYour code doesnt help me, i need parts of the vessel while its flying, not in the editor \u002B your editor.ship.parts gives me an error: The name \u0027editor\u0027 does not exist in the current context\u003C/p\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-11-09T15:31:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CARROTSAREAWSOME\u0022 data-cite=\u0022CARROTSAREAWSOME\u0022\u003E\u003Cdiv\u003EIm beginner with KSP mods and C# so my question is probably easy to solve: How do i get parts of the vessel, and how do i set them.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat code is perfectly correct. craft.parts is the list of parts.\u003C/p\u003E\u003Cp\u003EYou\u0027re getting that output because C#\u0027s default List implementation of toString() gives you details of it\u0027s class not contents, if you\u0027d wanted to print out the names of all parts you\u0027d use something like a foreach look on the list like in hab\u0027s example.\u003C/p\u003E\n"},{"CreatedByName":"FlowerChild","CreatedById":74289,"CreatedDateTime":"2013-11-10T01:48:55Z","Content":"\n\u003Cp\u003EWould any of you guys happen to know if there\u0027s any way to hook into Part events like OnPartExplode() through a part module?\u003C/p\u003E\u003Cp\u003EI\u0027ve been digging through docs and these forums for a couple of hours to try and find something like it, but to no avail.\u003C/p\u003E\u003Cp\u003EI realize I can create my own child class to Part and override the function that way, but that seems rather counter to the spirit of the API so I\u0027d like to avoid it if possible.\u003C/p\u003E\u003Cp\u003EFor context, I\u0027m trying to correct the explosive staging exploit through having such explosions set off chain reactions amongst boosters.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-11-10T13:22:35Z","Content":"\n\u003Cp\u003ENope, you can\u0027t \u0022tap\u0022 into an other objects virtual methods. But there is a GameEvents.onPartExplode, that might be pretty much what you want.\u003C/p\u003E\n"},{"CreatedByName":"FlowerChild","CreatedById":74289,"CreatedDateTime":"2013-11-10T21:28:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003ENope, you can\u0027t \u0022tap\u0022 into an other objects virtual methods. But there is a GameEvents.onPartExplode, that might be pretty much what you want.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh! Excellent man! I\u0027ll dig into that one and see how it works. Thanks!\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2013-11-10T22:43:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022FlowerChild\u0022 data-cite=\u0022FlowerChild\u0022\u003E\u003Cdiv\u003EWould any of you guys happen to know if there\u0027s any way to hook into Part events like OnPartExplode() through a part module?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGameEvents.onPartDie (since onPartExplode doesn\u0027t seem to provide the exploding part or position of the explosion) and GameEvents.onSplashDamage might be of interest as well.\u003C/p\u003E\n"},{"CreatedByName":"FlowerChild","CreatedById":74289,"CreatedDateTime":"2013-11-11T04:39:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003EGameEvents.onPartDie (since onPartExplode doesn\u0027t seem to provide the exploding part or position of the explosion) and GameEvents.onSplashDamage might be of interest as well.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHehe...yup, I figured out that bit earlier. The important part was being clued into the existence of GameEvents, which I wasn\u0027t previously aware of.\u003C/p\u003E\u003Cp\u003EThe current documentation for the API is so scattered about that finding what you need when you don\u0027t know what it\u0027s called in the first place, is the rather rough bit \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"jandcando","CreatedById":66121,"CreatedDateTime":"2013-11-24T02:23:02Z","Content":"\n\u003Cp\u003EHello I\u0027d like to know the basics of making plugins for KSP. I did the tutorial on the wiki using Xamarin Studio, but I don\u0027t know where to go from there. I just want to know the basic built-in functions that I can use and how I can use them to influence things in the game.\u003C/p\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2013-11-24T11:40:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022jandcando\u0022 data-cite=\u0022jandcando\u0022\u003E\u003Cdiv\u003EHello I\u0027d like to know the basics of making plugins for KSP. I did the tutorial on the wiki using Xamarin Studio, but I don\u0027t know where to go from there. I just want to know the basic built-in functions that I can use and how I can use them to influence things in the game.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ETaranis have release some incredible code example to help people start. Have a look there:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/56053-Example-plugin-projects-to-help-you-get-started\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/56053-Example-plugin-projects-to-help-you-get-started\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"dtobi","CreatedById":90882,"CreatedDateTime":"2013-11-24T14:01:33Z","Content":"\n\u003Cp\u003EI started making a plugin that can disable a fuel line with an action group.\u003C/p\u003E\u003Cp\u003ETo achieve that, I\u0027d like to look at all children of my \u0022disabler part\u0022. However, every time I try to activate the disabling funcion I get the following error in the debug log:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003EFileNotFoundException: Could not load file or assembly \u0027System.Collections, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\u0027 or one of its dependencies.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe function body looks like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E       [KSPEvent(guiName = \u0022Deactivate Fuel Flow\u0022, guiActive = true)]\u003Cbr\u003E        public void deactivateFuelFlow()\u003Cbr\u003E          {\u003Cbr\u003E            print(\u0022Fuel Controller: deactivate flow.\u0022);\u003Cbr\u003E            foreach (Part c in this.part.children){\u003Cbr\u003E                if (c is FuelLine) {\u003Cbr\u003E                    print(\u0022FuelLine Child found!\u0022);\u003Cbr\u003E                    ((FuelLine)c).BreakLine();\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E        } \u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt doesn\u0027t even print the \u0022Fuel Controller: deactivate flow.\u0022. However it prints the debug messages that I put into the onStart method of the class.\u003C/p\u003E\u003Cp\u003ECommenting out the line \u0022 ((FuelLine)c).BreakLine();\u0022 changes nothing at all.\u003C/p\u003E\u003Cp\u003EI\u0027m sure that I am missing something easy and essential. Can someone help?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-24T19:18:15Z\u0022 title=\u002211/24/2013 07:18  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 24, 2013\u003C/time\u003E by dtobi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"hab136","CreatedById":75997,"CreatedDateTime":"2013-11-24T19:49:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dtobi\u0022 data-cite=\u0022dtobi\u0022\u003E\u003Cdiv\u003EI started making a plugin that can disable a fuel line with an action group.\u003Cp\u003ETo achieve that, I\u0027d like to look at all children of my \u0022disabler part\u0022. However, every time I try to activate the disabling funcion I get the following error in the debug log:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003EFileNotFoundException: Could not load file or assembly \u0027System.Collections, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\u0027 or one of its dependencies.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWild guess here - do you have your references to Assembly-CSharp.dll and UnityEngine.dll set correctly when you build the DLL?\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Setting_up_MonoDevelop\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Setting_up_MonoDevelop\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Setting_up_Visual_Studio\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Setting_up_Visual_Studio\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EDo you have \u0022using System.Collections;\u0022 in your code?\u003C/p\u003E\n"},{"CreatedByName":"hab136","CreatedById":75997,"CreatedDateTime":"2013-11-24T20:03:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022CARROTSAREAWSOME\u0022 data-cite=\u0022CARROTSAREAWSOME\u0022\u003E\u003Cdiv\u003EI know that there is already a MP mod, but it is very unstable and i want to finish my project.\u003Cp\u003EYour code doesnt help me, i need parts of the vessel while its flying, not in the editor \u002B your editor.ship.parts gives me an error: The name \u0027editor\u0027 does not exist in the current context\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou already had how to get the parts of the ship during flight; in fact you posted it here:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Epublic Vessel craft = FlightGlobals.ActiveVessel;\u003Cbr\u003EDebug.Log(craft.parts.ToString());\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI was just giving your some functions to print out Part objects, and lists of Part objects, in a nice way.\u003C/p\u003E\u003Cp\u003ESo instead of:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EprintPartList(\u0022All parts of ship\u0022, \u0022Part\u0022, editor.ship.parts);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ejust do:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EprintPartList(\u0022All parts of ship\u0022, \u0022Part\u0022, craft.parts);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-11-24T21:09:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dtobi\u0022 data-cite=\u0022dtobi\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027;\u0022\u003EFileNotFoundException: Could not load file or assembly \u0027System.Collections, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\u0027 or one of its dependencies.\u003C/span\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMake sure you target the .net framework 3.5. Unity does not offer 4.0\u002B. You should be able to specify it in your project settings (on Visual Studio: Right click on project =\u0026gt; Properties =\u0026gt; Application =\u0026gt; Target Framework =\u0026gt; \u0022.NET Framework 3.5\u0022)\u003C/p\u003E\n"},{"CreatedByName":"dtobi","CreatedById":90882,"CreatedDateTime":"2013-11-25T19:44:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EMake sure you target the .net framework 3.5. Unity does not offer 4.0\u002B. You should be able to specify it in your project settings (on Visual Studio: Right click on project =\u0026gt; Properties =\u0026gt; Application =\u0026gt; Target Framework =\u0026gt; \u0022.NET Framework 3.5\u0022)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think it was the framework version. I tried to use the .net framework 3.5 with Visual Studio Express 2012 but I cannot set the target version at all. Googling didn\u0027t help. Installing .net 3.5 didn\u0027t work. That was quite frustrating. I\u0027m now doing it with Mono and Xamarian Studio. It works but its code browser is not as good. Does anybody have some pointers how to set .net framework 3.5 in Visual Studio Express?\u003C/p\u003E\u003Cp\u003EThanks!\u003C/p\u003E\u003Cp\u003EAnother thing: I am looking for a tutorial or code example how to do a part that can be activated by a stage (like a parachute or engine, just not a parachute and engine ;-) ).\u003C/p\u003E\u003Cp\u003ECan somebody help me? Searching Google and the forum died not yield any results.\u003C/p\u003E\u003Cp\u003EThanks, too!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-25T19:49:10Z\u0022 title=\u002211/25/2013 07:49  PM\u0022 data-short=\u002210 yr\u0022\u003ENovember 25, 2013\u003C/time\u003E by UbioZur\u003C/strong\u003E\n\u003Cbr\u003Emerge posts\n\u003C/span\u003E\n"},{"CreatedByName":"UbioZur","CreatedById":72946,"CreatedDateTime":"2013-11-25T19:48:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dtobi\u0022 data-cite=\u0022dtobi\u0022\u003E\u003Cdiv\u003EAnother thing: I am looking for a tutorial or code example how to do a part that can be activated by a stage (like a parachute or engine, just not a parachute and engine ;-) ).\u003Cp\u003ECan somebody help me? Searching Google and the forum died not yield any results.\u003C/p\u003E\u003Cp\u003EThanks, too!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECheck the code of the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/43720-21-Radial-Stack-Separator?highlight=radial\u002Bseparator\u0022 rel=\u0022external nofollow\u0022\u003Eradial stack separator\u003C/a\u003E. It should give you a good hint.\u003C/p\u003E\u003Cp\u003EAlso try to edit you post instead of dual posting please (I have merged them).\u003C/p\u003E\n"},{"CreatedByName":"Jyrroe","CreatedById":94692,"CreatedDateTime":"2013-11-27T18:02:25Z","Content":"\n\u003Cp\u003EI\u0027m writing a plugin that runs in the editor (VAB/SPH), has anyone figured out some kind of event/callback for parts being added/removed from the ship?\u003C/p\u003E\u003Cp\u003ERight now, I\u0027m updating my list of parts every frame in Update() but there\u0027s got to be a better way. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-11-27T20:22:53Z","Content":"\n\u003Cp\u003EGameEvents.onPartAttach should be good enough. Make sure to unbind yourself again, once your MonoBehavior is destroyed and/or check whether you are still in the editor, since it can fire in flight as well. Also not sure if it works with the fist part.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2013-11-28T02:19:41Z","Content":"\n\u003Cp\u003EHi, Am trying to iterate through a vessel and work out which parts generate/consume electricity (and other resources eventually), but I\u0027ve gotten stuck with a few things.\u003C/p\u003E\u003Cp\u003E1. On an engine I think the ModuleAlternator is the object that generates the charge, but i cant find the property that tells me what the current rate per second is\u003C/p\u003E\u003Cp\u003E2. On a solarpanel I have been looking at the ModuleDeployableSolarPanel object and can see the max rate, etc, but am a little unsure how to get the current value as well - thought it might be the powerCurve FloatCurve, but I cant seem to get a value that matches the one that is shown in the resourcepanel\u003C/p\u003E\u003Cp\u003EAnyone got any tips/ideas on working with the resources?\u003C/p\u003E\n"},{"CreatedByName":"Jyrroe","CreatedById":94692,"CreatedDateTime":"2013-11-28T02:46:22Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jyrroe\u0022 data-cite=\u0022Jyrroe\u0022\u003E\u003Cdiv\u003EI\u0027m writing a plugin that runs in the editor (VAB/SPH), has anyone figured out some kind of event/callback for parts being added/removed from the ship?\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EGameEvents.onPartAttach should be good enough.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGameEvents.onPartAttach should be good enough\u003C/p\u003E\u003Cp\u003EThat\u0027s amazing! Thanks for letting me know about the \u0022GameEvents\u0022 class. It took me a minute to figure out how to subscribe to the events, but here it is:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EGameEvents.onPartAttach.Add(OnPartAttach);\u003Cbr\u003E\u003Cbr\u003Evoid OnPartAttach(GameEvents.HostTargetAction\u0026lt;Part, Part\u0026gt; data)\u003Cbr\u003E{\u003Cbr\u003E    Debug.Log(\u0022OnPartAttach\u0022);\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd no, it doesn\u0027t fire for the first part, but does for every additional part, and of course GameEvents.onPartRemove for the opposite.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-28T02:52:20Z\u0022 title=\u002211/28/2013 02:52  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 28, 2013\u003C/time\u003E by Jyrroe\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-11-28T03:04:16Z","Content":"\n\u003Cp\u003E@ Trigger Au\u003C/p\u003E\u003Cp\u003EYou can\u0027t. The games resource system works via Part.RequestResource(...), that directly updates the existing resources and do not offer any way to tap into it (though i think this is good from an performance pov). Lets imagine a modded partmodule does sth like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epart.RequestResource( ... , UnityRandom(1, 20) );\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe value actual appears to never be saved anywhere except in the final resource data. So the only way to collect this data would be to sum up all resources after every part module is executed. Not sure if sth like that would be possible, but its performance would be terrific. So yes, its basically impossible to support more than just a few modules you can build a custom detector for. ModuleAlternator should be doable, though, since they store the current rate in the parts resource \u0022amount\u0022 property, so it can be displayed in the games resource UI. DeployableSolarPanel does expose some flowRate properties, that might what you need. If not you might have to re-run some of the modules code. Thankfully it appears some of the vars for that are accessible (have you checked what this class exposes?), especially the RaycastHit. Btw, wasn\u0027t there a very old version of that code for this module available, or do i mix that up with sth else?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-11-28T03:07:12Z\u0022 title=\u002211/28/2013 03:07  AM\u0022 data-short=\u002210 yr\u0022\u003ENovember 28, 2013\u003C/time\u003E by Faark\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2013-11-28T03:51:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003E@ Trigger Au\u003Cp\u003E...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the ideas Faark. There are a few mods that look at fuel usage (eg Mechjeb, Engineer), and yeah they do that by running through all the parts and building a simulator of the vessel. More than I want to attempt \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI did look at a bunch of the PartModule classes and their properties before posting here, was when I realised I was starting to sink not swim I thought I\u0027d ask for help. Thanks again, I\u0027ll see whats possible without grinding KSP to a halt.\u003C/p\u003E\n"}]}