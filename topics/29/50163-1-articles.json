{"TopicId":50163,"ForumId":29,"TopicTitle":"Custom staging icons, how to?","CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-10-23T07:39:12Z","PageNum":1,"Articles":[{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-10-23T07:39:12Z","Content":"\n\u003Cp\u003EAlright, I\u0027m trying to work on a new parachute part module. It will have to show up in staging and the documentation on how to do this is rather low to non existent.\u003C/p\u003E\u003Cp\u003EFor now, the best two sources I had for this is the \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Module_code_examples#Adding_a_Custom_Icon\u0022 rel=\u0022external nofollow\u0022\u003EWiki\u003C/a\u003E and a \u003Ca href=\u0022https://github.com/Majiir/Kethane/blob/aaa003478da5f831a186663e269141877d9e2f4b/Plugin/Tank.cs#L36-L49\u0022 rel=\u0022external nofollow\u0022\u003Epiece of code\u003C/a\u003E Majiir dug up for me.\u003C/p\u003E\u003Cp\u003EFor now, the code I have to load up the part in the staging list is this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Enamespace stupid_chris\u003Cbr\u003E{\u003Cbr\u003E    public class RealChuteModule : PartModule\u003Cbr\u003E    {\u003Cbr\u003E        public override void OnStart(PartModule.StartState state)\u003Cbr\u003E        {\u003Cbr\u003E            Staging.CreateIcon(this.part);\u003Cbr\u003E            this.part.inStageIndex = Staging.CurrentStage;\u003Cbr\u003E            this.part.stackIcon.SetIcon(DefaultIcons.PARACHUTES);\u003Cbr\u003E            this.part.stackIconGrouping = StackIconGrouping.SAME_MODULE;\u003Cbr\u003E\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhat this does for now is only loading up a blank square in the staging list:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/7t08frt.png\u0022 alt=\u00227t08frt.png\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo that\u0027s half the way there. My question is twofold:\u003C/p\u003E\u003Cp\u003E1. Now that\u0027s it loading there, how do I actually assign it an image rather than having a blank square, my current code doesn\u0027t seem to do it. (I also tried \u0022this.part.stackIcon.iconImage = DefaultIcons.PARACHUTES;\u0022)\u003C/p\u003E\u003Cp\u003E2. When I delete the part, the staging icon stays there, couldn\u0027t get it to disappear upon part deletion, anyone has headers on to how to do that? Edit: on that, I noticed a \u0022RemoveIcon()\u0022 method but couldn\u0027t get it to work.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-23T09:41:53Z\u0022 title=\u002210/23/2013 09:41  AM\u0022 data-short=\u002210 yr\u0022\u003EOctober 23, 2013\u003C/time\u003E by stupid_chris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-10-26T02:47:24Z","Content":"\n\u003Cp\u003ECase closed, thanks to UbioZur. The secret was this.part.stagingIcon = \u0022PARACHUTES\u0022;\u003C/p\u003E\n"},{"CreatedByName":"Nertea","CreatedById":83952,"CreatedDateTime":"2013-11-23T01:05:49Z","Content":"\n\u003Cp\u003ETo dredge this up a bit (hope it\u0027s not too much of a necro, only a month), I have a similar question. That works for using one of the stock icons, but is there still a way to do a fully custom icon? The wiki\u0027s method doesn\u0027t seem to work. According to that, this is approximately what I should have in OnStart:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ethis.part.stackIcon.SetIcon(this.part, \u0022icons.png\u0022, 0, 0);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDespite having a correctly laid out icons.png. I even tried placing the file in both the part folder and the PluginData folder, as recommended on the wiki, but neither shows anything. I feel like this may have changed since it was written. Anyone?\u003C/p\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-11-23T11:20:29Z","Content":"\n\u003Cp\u003EThat was the pluginData folder alongside your plugin? The one in the base game directory isn\u0027t likely to work anymore.\u003C/p\u003E\n"},{"CreatedByName":"Nertea","CreatedById":83952,"CreatedDateTime":"2013-11-23T17:21:00Z","Content":"\n\u003Cp\u003EYep, I\u0027ve tried all 3 different locations that have been suggested for completeness, KSP/PluginData/icons.png, KSP/GameData/NearFuture/PluginData/icons.png and KSP/GameData/NearFuture/PluginData/NearFuture/icons.png. No luck with any of them!\u003C/p\u003E\n"},{"CreatedByName":"EndlessWaves","CreatedById":41302,"CreatedDateTime":"2013-11-23T19:10:00Z","Content":"\n\u003Cp\u003EThe plugin is in GameData/NearFuture?\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-11-23T19:45:01Z","Content":"\n\u003Cp\u003EThis isn\u0027t going to work, the SetIcon() method is outdated, this dates from .17 It\u0027s also what I first tried. My guess is that it has to do with this.part.stagingIcon = \u0022icon_file_name\u0022; but my very brief attempts haven\u0027t been successful.\u003C/p\u003E\n"},{"CreatedByName":"Nertea","CreatedById":83952,"CreatedDateTime":"2013-11-24T03:05:16Z","Content":"\n\u003Cp\u003EYeah, looks like it unfortunately. I have tried... many things with no success now, so I\u0027ll just make do with a fuel tank symbol or something. No nuclear trefoil for me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-11-24T20:00:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Nertea\u0022 data-cite=\u0022Nertea\u0022\u003E\u003Cdiv\u003EYeah, looks like it unfortunately. I have tried... many things with no success now, so I\u0027ll just make do with a fuel tank symbol or something. No nuclear trefoil for me \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou can always try messaging C7 or HarvesteR about it. From what Mu told me, hey are the people to speak to concerning staging. They might help you.\u003C/p\u003E\n"},{"CreatedByName":"dtobi","CreatedById":90882,"CreatedDateTime":"2013-12-30T23:58:40Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003EYou can always try messaging C7 or HarvesteR about it. From what Mu told me, hey are the people to speak to concerning staging. They might help you.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHi!\u003C/p\u003E\u003Cp\u003EAny news here. I ran into the same problem as Nerta. The custom icon is just empty if I set it with setIcon.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-12-31T00:30:01Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dtobi\u0022 data-cite=\u0022dtobi\u0022\u003E\u003Cdiv\u003EHi!\u003Cp\u003EAny news here. I ran into the same problem as Nerta. The custom icon is just empty if I set it with setIcon.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EDon\u0027t use setIcon, it\u0027s deprecated.\u003C/p\u003E\n"},{"CreatedByName":"Firov","CreatedById":57445,"CreatedDateTime":"2014-01-18T22:24:34Z","Content":"\n\u003Cp\u003EHopefully this isn\u0027t too much of a necro, but I had a thought.\u003C/p\u003E\u003Cp\u003EIf custom staging icons aren\u0027t possible then what icons are already built into the game? I know about the parachute, SRB, liquid engine, command pod, and radial/stack decoupler icons. Are there others though? I know that KSP used to have dozens of staging icons which were used for just about anything. Are those icons are still in the game resources somewhere, unused and gathering dust?\u003C/p\u003E\u003Cp\u003EIf so I\u0027ll have to figure out some way to find them. None of the existing icons would be suitable for the timer part I\u0027m trying to get working.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-01-18T22:49:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Firov\u0022 data-cite=\u0022Firov\u0022\u003E\u003Cdiv\u003EHopefully this isn\u0027t too much of a necro, but I had a thought.\u003Cp\u003EIf custom staging icons aren\u0027t possible then what icons are already built into the game? I know about the parachute, SRB, liquid engine, command pod, and radial/stack decoupler icons. Are there others though? I know that KSP used to have dozens of staging icons which were used for just about anything. Are those icons are still in the game resources somewhere, unused and gathering dust?\u003C/p\u003E\u003Cp\u003EIf so I\u0027ll have to figure out some way to find them. None of the existing icons would be suitable for the timer part I\u0027m trying to get working.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYes, look at the DefaultIcons enum. Just find the one you want in that list, and do this.part.stagingIcon = \u0022ICON\u0022; Where ICON is the enum member you want, string form.\u003C/p\u003E\n"},{"CreatedByName":"Firov","CreatedById":57445,"CreatedDateTime":"2014-01-18T23:04:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022stupid_chris\u0022 data-cite=\u0022stupid_chris\u0022\u003E\u003Cdiv\u003EYes, look at the DefaultIcons enum. Just find the one you want in that list, and do this.part.stagingIcon = \u0022ICON\u0022; Where ICON is the enum member you want, string form.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFantastic. Thanks. That\u0027s exactly what I was looking for. It\u0027s going to be something of a pain to figure out what each icon actually looks like since I\u0027ll have to keep reloading KSP, but at least now I know the names.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-01-19T03:17:04Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Firov\u0022 data-cite=\u0022Firov\u0022\u003E\u003Cdiv\u003EFantastic. Thanks. That\u0027s exactly what I was looking for. It\u0027s going to be something of a pain to figure out what each icon actually looks like since I\u0027ll have to keep reloading KSP, but at least now I know the names.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI believe you can do it from the part config. Just create a bunch of dumb/empty parts and stick the line stagingIcon = ICON in them. I believe this will set them correctly.\u003C/p\u003E\n"},{"CreatedByName":"sebi.zzr","CreatedById":81294,"CreatedDateTime":"2015-11-19T16:54:08Z","Content":"\n[quote name=\u0027stupid_chris\u0027]Yes, look at the DefaultIcons enum. Just find the one you want in that list, and do this.part.stagingIcon = \u0022ICON\u0022; Where ICON is the enum member you want, string form.[/QUOTE]\u003Cbr\u003E\nCan you tell me where are \u0022default staging icons\u0022 located.Thank you\n"}]}