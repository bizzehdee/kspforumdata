{"TopicId":85375,"ForumId":29,"TopicTitle":"Trying to diagnose gambreaking lag. What does this ouput.log msg mean?","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-09-25T10:18:16Z","PageNum":1,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-09-25T10:18:16Z","Content":"\n\u003Cp\u003EI get game-breaking lag when there\u0027s a vehicle within 2.5km of the space center and I try to launch a second instance of the same craft design on the runway. I\u0027m doing this to try to diagnose a problem in kOS, but I can\u0027t get to the part where I diagnose the problem because of the game-breaking lag (My FPS is about 1/10 - That\u0027s one animation frame every 10 seconds) that happens whenever there\u0027s two instances of the craft both in existence within the loaded sphere (and annoyingly it doesn\u0027t happen with two vessels in orbit near each other - only when I launch to the runway does this happen.)\u003C/p\u003E\u003Cp\u003EThe only clue I have what\u0027s going on is this utterly inexplicable message in the output_log corresponding with loading the craft into the SPH editor:\u003C/p\u003E\u003Cp\u003E(\u0022PartModule indexing mismatch at....\u0022)\u003C/p\u003E\u003Cp\u003EI have no clue what a \u0022PartModule indexing mismatch\u0022 is supposed to mean or what on earth I do about it.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E------------------- initializing editor mode... ------------------\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003Eeditor started\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E[Part]: PartModule indexing mismatch at kOSMachine0m, index 0.\u003Cbr\u003ENode \u0027ModuleLight\u0027 found in loaded data, but \u0027kOSProcessor\u0027 is defined in prefab.\u003Cbr\u003ELooking for ModuleLight in other indices...\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E...ModuleLight module found at index 1.\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E[Part]: PartModule indexing mismatch at kOSMachine0m, index 0.\u003Cbr\u003ENode \u0027ModuleLight\u0027 found in loaded data, but \u0027kOSProcessor\u0027 is defined in prefab.\u003Cbr\u003ELooking for ModuleLight in other indices...\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E...ModuleLight module found at index 1.\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003EModular Rover KOS test loaded!\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ELater on, I get this message when the vessel is actually launched to the runway:\u003C/p\u003E\u003Cp\u003E\u0022PartModule \u0026lt;modulename\u0026gt; at \u0026lt;part name\u0026gt;, index \u0026lt;number\u0026gt;: index exceeds module count as defined in cfg.\u0022\u003C/p\u003E\u003Cp\u003EAnd I get it for several different \u0026lt;modulename\u0026gt;\u0027s and several different \u0026lt;part name\u0026gt;\u0027s and several different \u0026lt;number\u0026gt;\u0027s, spamming the log.\u003C/p\u003E\u003Cp\u003EI\u0027ve looked and I can\u0027t figure out which \u0022cfg\u0022 file it\u0027s referring to, and which config setting is being exceeded.\u003C/p\u003E\u003Cp\u003EHere\u0027s a small sample of the part in the log where it first starts:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E[Part]: PartModule ModuleAeroReentry at dockingPort3, index 1: index exceeds module count as defined in cfg.\u003Cbr\u003ELooking for ModuleAeroReentry in other indices...\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E...no ModuleAeroReentry module found on part definition. Skipping...\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003EPartModule is null.\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E[Part]: PartModule ModuleAeroReentry at landerCabinSmall, index 7: index exceeds module count as defined in cfg.\u003Cbr\u003ELooking for ModuleAeroReentry in other indices...\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E...no ModuleAeroReentry module found on part definition. Skipping...\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003EPartModule is null.\u003Cbr\u003E\u003Cbr\u003E(Filename: C:/BuildAgent/work/d63dfc6385190b60/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 49)\u003Cbr\u003E\u003Cbr\u003E[Part]: PartModule ModuleAeroReentry at batteryBank, index 0: index exceeds module count as defined in cfg.\u003Cbr\u003ELooking for ModuleAeroReentry in other indices...\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EDoes anyone have a clue what on earth this message is trying to tell me?\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-09-25T13:08:53Z","Content":"\n\u003Cp\u003E\u0022PartModule indexing mismatch at....\u0022 appends when there is a difference between the module list in the save and the module list in the part definition. You get it when you add/remove a mod or when you use a mod that insert module in flight (Like FAR does).\u003C/p\u003E\u003Cp\u003EIt\u0027s not an error at all.\u003C/p\u003E\u003Cp\u003ENone of those looks like \u0022real\u0022 errors.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-09-25T14:09:17Z","Content":"\n\u003Cp\u003ECould your problem be that two kOS instances on the two vessels are interfering with each other? In my experience, huge lag like that is only ever caused by a mod doing something way too heavy in (Fixed)Update. Log spam from (Fixed)Update can cause significant slowdown but is unlikely to be 10 seconds per frame...\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-09-30T12:08:58Z","Content":"\n\u003Cp\u003EI\u0027ve narrowed down the \u0022PartModule indexing mismatch\u0022 message to only being caused when I\u0027ve compiled a new DLL for kOS and installed it and then tried running a saved game that already had existing vessels in it with kOS parts on them that are loaded into full physics because they\u0027re parked within 2.5km of the launchpad.\u003C/p\u003E\u003Cp\u003EI think I am seeing two unrelated errors. Because I still get the slowdown even when that message goes away.\u003C/p\u003E\u003Cp\u003EIt seems that launching a new vessel when one already exists within the \u0022physics radius\u0022 of the launchpad or runway has both of these two unrelated issues:\u003C/p\u003E\u003Cp\u003E1 - It prints messages to the log about mismatched Partmodule indexing if there was a kOS.DLL install update between the launching of the old and the new vessels.\u003C/p\u003E\u003Cp\u003E2 - It creates enormous lag and kills frame rate if the old vessel had ever had any kOS commands executed on its terminal, regardless of whether there was a kOS.DLL update or not. Even using the same kOS.DLL as before triggers the problem. Also, if the previous vessel had no kOS commands run on it, there is no lag, even when kOS.DLL was updated between launches.\u003C/p\u003E\u003Cp\u003ESo they seem to be two utterly disconnected things.\u003C/p\u003E\n"},{"CreatedByName":"Fwiffo","CreatedById":148084,"CreatedDateTime":"2016-09-13T22:58:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00221421679\u0022 data-ipsquote-contentid=\u002285375\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221411650533\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 9/25/2014 at 6:08 AM, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u0022PartModule indexing mismatch at....\u0022 appends when there is a difference between the module list in the save and the module list in the part definition. You get it when you add/remove a mod or when you use a mod that insert module in flight (Like \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E does).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHey Sarbian, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125662-snark/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022125662\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/125662-snark/\u0022 rel=\u0022\u0022\u003E@Snark\u003C/a\u003E\u00A0and I are having a \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/137806-113-indicatorlights-v10-small-convenient-informative/\u0026amp;do=findComment\u0026amp;comment=2753902\u0022 rel=\u0022\u0022\u003Econversation here\u003C/a\u003E about about the impact adding/removing modules when there exist multiple MODULE\u0027s of the same name in a part. \u00A0You mentioned \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E dynamically inserts (and removes?) modules in flight. \u00A0I\u0027m wondering, does \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E always append its dynamic stuff to the \u0022end\u0022 of a part\u0027s module list? \u00A0(So that it doesn\u0027t break indices of regular modules and trip up KSP?). \u00A0No specific issue here, I\u0027m just somewhat new to all this and trying to better understand things.\n\u003C/p\u003E\n\u003Cp\u003E\nps. Sorry for resurrecting an old thread.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-13T22:59:19Z\u0022 title=\u002209/13/2016 10:59  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 13, 2016\u003C/time\u003E by Fwiffo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-09-14T07:22:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222754942\u0022 data-ipsquote-contentid=\u002285375\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473807504\u0022 data-ipsquote-userid=\u0022148084\u0022 data-ipsquote-username=\u0022Fwiffo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n8 hours ago, Fwiffo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nps. Sorry for resurrecting an old thread.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis thread is 2 year old. KSP code changed a lot and \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E code changed....\n\u003C/p\u003E\n"},{"CreatedByName":"Fwiffo","CreatedById":148084,"CreatedDateTime":"2016-09-14T07:47:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222755667\u0022 data-ipsquote-contentid=\u002285375\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473837778\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n25 minutes ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nand \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E code changed\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAh - was it refactored to avoid dynamically adding/removing modules? \u00A0These days, do mods generally avoid that?\n\u003C/p\u003E\n\u003Cp\u003E\nI realize a lot of things have changed in the last two years :-). \u00A0The question came up because I recently noticed messages in my KSP.log (while doing a lot of iterative edits to a custom part I\u0027m working on)\u00A0which seemed to indicate the game was taking a stab at remapping part modules after my actions fouled up the indices. \u00A0It seemed to me this works fine when each part module has a unique name, but I wanted to know more about how the game handles situations where you have several of the same name (which IIRC is the case in at least one or two stock parts). \u00A0e.g. Does it just pick the first one, does it go in the same order, does it do more intense analysis of other properties to find\u00A0closest match?\n\u003C/p\u003E\n\u003Cp\u003E\n(I replied here just because your comment from two years ago was the closest lead I could find on the topic! \u00A0Can move my question to a new thread if that\u0027s better etiquette)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-14T07:48:41Z\u0022 title=\u002209/14/2016 07:48  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 14, 2016\u003C/time\u003E by Fwiffo\u003C/strong\u003E\n\u003C/span\u003E\n"}]}