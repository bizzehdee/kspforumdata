{"TopicId":92345,"ForumId":29,"TopicTitle":"How can I play audio from a file without using Effects?","CreatedByName":"Coffeeman","CreatedById":69966,"CreatedDateTime":"2014-12-09T04:21:10Z","PageNum":1,"Articles":[{"CreatedByName":"Coffeeman","CreatedById":69966,"CreatedDateTime":"2014-12-09T04:21:10Z","Content":"\n\u003Cp\u003ESo I\u0027ve been adding some stuff to DangIt! to make it so there is an alarm when something fails, and have been having some problems. Basically, I want to play a sound that I get from GameDatabase, without using an EFFECTS block, because I don\u0027t want to blanket-add an EFFECTS to all of the parts in the game.\u003C/p\u003E\u003Cp\u003ECurrent code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    print(\u0022starting alarm\u0022);\u003Cbr\u003E    if (this.AlarmAudio==null)\u003Cbr\u003E    {\u003Cbr\u003E    \tprint (\u0022create source\u0022);\u003Cbr\u003E    \tthis.AlarmAudio=new AudioSource();\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    if (this.audio.clip==null)\u003Cbr\u003E    {\u003Cbr\u003E    \tprint (\u0022create clip\u0022);\u003Cbr\u003E    \tthis.AlarmAudio.clip=GameDatabase.Instance.GetAudioClip(\u0022DangIt/Sounds/alarm\u0022); //Load alarm sound\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    if (DangIt.Instance.CurrentSettings.SoundNotifications)\u003Cbr\u003E    {\u003Cbr\u003E    \tprint (\u0022play alarm\u0022);\u003Cbr\u003E    \tint i=0;\u003Cbr\u003E    \t{\u003Cbr\u003E    \t\tprint(\u0022loop:\u0022\u002Bi.ToString());\u003Cbr\u003E    \t\tprint(\u0022delay:\u0022\u002B(this.audio.clip.length*i).ToString());\u003Cbr\u003E    \t\tthis.AlarmAudio.PlayDelayed(this.audio.clip.length*i);\u003Cbr\u003E    \t\ti\u002B\u002B;\u003Cbr\u003E    \t}\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFull source on \u003Ca href=\u0022https://github.com/602p/DangIt/blob/Sound/source/DangIt/Failure%20modules/FailureModule.cs#L577-L600\u0022 rel=\u0022external nofollow\u0022\u003EGitHub\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnd here is the error:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[LOG 22:14:32.187] starting alarm\u003Cbr\u003E[LOG 22:14:32.187] create source\u003Cbr\u003E[LOG 22:14:32.188] create clip\u003Cbr\u003E[LOG 22:14:32.190] [DangIt]: DangItReactionWheel[-167804][Ship: Untitled Space Craft]: ERROR: \u003Cbr\u003E  at (wrapper managed-to-native) UnityEngine.AudioSource:set_clip (UnityEngine.AudioClip)\u003Cbr\u003E  at ippo.FailureModule.Fail () [0x00000] in \u0026lt;filename unknown\u0026gt;:0 \u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFull log on \u003Ca href=\u0022http://pastebin.com/WJ0FVWtE\u0022 rel=\u0022external nofollow\u0022\u003EPastebin\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHow do I do this? Its SO FRUSTRATING!\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-12-09T07:04:17Z","Content":"\n\u003Cp\u003EYou basically have it except that AudioSource is a Component that needs to be added to a GameObject, not directly instantiated. Try replacing this\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ethis.AlarmAudio = new AudioSource();\u003C/pre\u003E\u003Cp\u003Ewith\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Ethis.AlarmAudio = gameObject.AddComponent\u0026lt;AudioSource\u0026gt;()\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd then making sure your GameDatabase.Instance.GetAudioClip is not returning null.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/92539-Play-Sound-without-Part?p=1387375\u0026amp;viewfull=1#post1387375\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s an example\u003C/a\u003E I made a while ago that plays a sound with a KSPAddon MonoBehaviour; you can do exactly the same with a PartModule\u003C/p\u003E\n"},{"CreatedByName":"Coffeeman","CreatedById":69966,"CreatedDateTime":"2014-12-09T16:21:14Z","Content":"\n\u003Cp\u003EWorked great, thanks!\u003C/p\u003E\n"}]}