{"TopicId":168024,"ForumId":29,"TopicTitle":"Basic Line, Point and Transform Debug code","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2017-11-28T21:14:31Z","PageNum":1,"Articles":[{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2017-11-28T21:14:31Z","Content":"\n\u003Cp\u003E\nWorking with KSP\u00A0multiple coordinate systems can be a pain and sometime a quick drawing on screen help understanding what is going on. Here is class to draw some debugging lines, point and transforms.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/sarbian/DebugStuff/blob/master/DebugDrawer.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/sarbian/DebugStuff/blob/master/DebugDrawer.cs\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nLicence : public domain.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nCalling it is as simple as a line in an Update()\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nDebugDrawer.DebugLine(FlightGlobals.ActiveVessel.transform.position, Planetarium.fetch.Home.transform.position, Color.yellow);\n\nDebugDrawer.DebugPoint(Vector3.zero, Color.green);\n\nDebugDrawer.DebugTransforms(FlightGlobals.ActiveVessel.transform);\n\n\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-03-15T16:59:24Z\u0022 title=\u002203/15/2018 04:59  PM\u0022 data-short=\u00226 yr\u0022\u003EMarch 15, 2018\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-03-13T21:51:33Z","Content":"\n\u003Cp\u003E\nUpdated version in here\u00A0\u003Ca href=\u0022https://github.com/sarbian/DebugStuff/blob/master/DebugDrawer.cs\u0022 rel=\u0022external nofollow\u0022\u003EDebugDrawer.cs\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Ger_space","CreatedById":167349,"CreatedDateTime":"2018-03-15T08:39:39Z","Content":"\n\u003Cp\u003E\nThank you for this.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI found some small problem:\n\u003C/p\u003E\n\u003Cp\u003E\nI had to\u00A0add this into the code:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\u00A0 \u00A0 \u00A0 \u00A0 \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eprivate\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EIEnumerator\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EEndOfFrameDrawing\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E()\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u003C/span\u003E\u003Cspan\u003EDebug\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ELog\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022str\u0022\u003E\u0022DebugDrawer starting\u0022\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Ewhile\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Etrue\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eif\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E((\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Elines\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ECount\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u002B\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E points\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ECount\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u002B\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E transforms\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ECount\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E==\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 yield \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Ereturn\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Enew\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EWaitForEndOfFrame\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E();\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Econtinue\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI mean the if\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0if ((lines.Count \u002B points.Count \u002B transforms.Count) == 0 )\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0{\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0yield return new WaitForEndOfFrame();\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0continue;\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0}\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI got thousands GL Matrix Error as long I don\u0027t draw lines and KSP got funky after some time\u00A0(Kerbin crashed)\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a reason why you did\u0027t put the drawing into the unity Draw() call?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 I also extended it to use this function.\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0 \u00A0 \u00A0 /// \u0026lt;summary\u0026gt;\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 /// Paints the vector from the start point\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 /// \u0026lt;/summary\u0026gt;\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 /// \u0026lt;param name=\u0022start\u0022\u0026gt;\u0026lt;/param\u0026gt;\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 /// \u0026lt;param name=\u0022vector\u0022\u0026gt;\u0026lt;/param\u0026gt;\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 /// \u0026lt;param name=\u0022\u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E\u0022\u0026gt;\u0026lt;/param\u0026gt;\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 public static void DebugVector(Vector3 start, Vector3 vector, Color \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E)\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 {\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 lines.Add(new Line(start, start \u002B vector, \u003Cabbr title=\u0022Center of Lift\u0022\u003Ecol\u003C/abbr\u003E));\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 }\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-03-15T08:47:11Z\u0022 title=\u002203/15/2018 08:47  AM\u0022 data-short=\u00226 yr\u0022\u003EMarch 15, 2018\u003C/time\u003E by Ger_space\u003C/strong\u003E\n\u003Cbr\u003EAdded DebugVector\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-03-15T09:39:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223322122\u0022 data-ipsquote-contentid=\u0022168024\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221521103179\u0022 data-ipsquote-userid=\u0022167349\u0022 data-ipsquote-username=\u0022Ger_space\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n57 minutes ago, Ger_space said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI got thousands GL Matrix Error as long I don\u0027t draw lines and KSP got funky after some tim\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWith the updated version or the original one ?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223322122\u0022 data-ipsquote-contentid=\u0022168024\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221521103179\u0022 data-ipsquote-userid=\u0022167349\u0022 data-ipsquote-username=\u0022Ger_space\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n59 minutes ago, Ger_space said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nunity Draw() call?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhich Draw call ?\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Ger_space","CreatedById":167349,"CreatedDateTime":"2018-03-15T10:01:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223322152\u0022 data-ipsquote-contentid=\u0022168024\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221521106793\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWith the updated version or the original one ?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhich Draw call ?\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI took the original code... Sorry for that.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nDraw() is some internal form Kerbal Konstructs. The Unity one is OnGUI().\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-03-15T10:10:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223322158\u0022 data-ipsquote-contentid=\u0022168024\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221521108092\u0022 data-ipsquote-userid=\u0022167349\u0022 data-ipsquote-username=\u0022Ger_space\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Ger_space said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe Unity one is OnGUI().\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI dont like to use OnGui for something it is not meant to do. And you have to check for the current event to avoid drawing multiple time since onGui is called a bunch of time per frame.\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-03-15T16:59:55Z","Content":"\n\u003Cp\u003E\nAnd I fixed\u00A0\u003Ca href=\u0022https://github.com/sarbian/DebugStuff/blob/master/DebugDrawer.cs\u0022 rel=\u0022external nofollow\u0022\u003EDebugDrawer.cs\u003C/a\u003E\u00A0again \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Gotmachine","CreatedById":163039,"CreatedDateTime":"2019-06-18T17:53:29Z","Content":"\n\u003Cp\u003E\nIn KSP 1.7.2 I can\u0027t get the DebugDrawer methods to show anything in the map view, although it seems to me the class is meant to have the ability.\u003Cbr\u003E\nIs there any trick for making that work (outside of converting the values to scaledspace scale) ?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2019-06-21T08:09:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223621142\u0022 data-ipsquote-contentid=\u0022168024\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221560880409\u0022 data-ipsquote-userid=\u0022163039\u0022 data-ipsquote-username=\u0022Gotmachine\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 6/18/2019 at 7:53 PM, Gotmachine said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nout\u003Cspan\u003E\uFEFF\u003C/span\u003Es\u003Cspan\u003E\uFEFF\u003C/span\u003Eide of converting t\u003Cspan\u003E\uFEFF\u003C/span\u003Ehe va\u003Cspan\u003E\uFEFF\u003C/span\u003Elues to scaledspac\u003Cspan\u003E\uFEFF\u003C/span\u003Ee sca\u003Cspan\u003E\uFEFF\u003C/span\u003E\u003Cspan\u003E\uFEFF\u003C/span\u003Ele\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf you don\u0027t convert to scaled space then what your are drawing will not be at the correct scale.\n\u003C/p\u003E\n"},{"CreatedByName":"Gotmachine","CreatedById":163039,"CreatedDateTime":"2019-06-21T16:33:30Z","Content":"\n\u003Cp\u003E\nI am converting to scaledspace. I\u0027m pretty sure of what I\u0027m doing in this aspect as I can draw my intended lines using another method.\u003Cbr\u003E\nThey just don\u0027t show up when I\u0027m using the DebugDrawer class.\u003Cbr\u003E\nAlthough that work perfectly fine in flight mode/scene (with non-ScaledSpace coordinates, of course ;))\n\u003C/p\u003E\n"}]}