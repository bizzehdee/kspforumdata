{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":75,"Articles":[{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-08-06T23:45:38Z","Content":"\n\u003Cp\u003EIt depends on if you are declaring a new object or not, but that\u0027s a basic C# question, not a KSP question.\u003C/p\u003E\u003Cp\u003EIf you are asking questions of that level I would look at finding some C# tutorials online that would get you started. Modding KSP is all done in C#, just through the KSP API, so learning C# is learning to mod KSP.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-08-07T00:23:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022royals\u0022 data-cite=\u0022royals\u0022\u003E\u003Cdiv\u003EAlright thanks a lot! MonoDevelop doesn\u0027t seem to complain but just to be sure should I define it as \u0027ModuleEngines x = part.FindMo...;\u0027? I\u0027m very new to this you see \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s correct (if you\u0027re just looking for the first one - otherwise you would want a list). But as Diazo mentioned, C# tutorials might be a good place to start with this stuff.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-08-07T06:27:41Z","Content":"\n\u003Cp\u003EDuring a collision I get the collider which I\u0027m colliding with.\u003C/p\u003E\u003Cp\u003EFor example:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic void OnCollisionStay(Collision c)\u003Cbr\u003E{\u003Cbr\u003E    if (isActive)\u003Cbr\u003E    {\u003Cbr\u003E        collidingObject = c.collider.gameObject;\u003Cbr\u003E        collisionPoint = c.contacts[0];\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENow I want to find the part this collider belongs to.\u003C/p\u003E\u003Cp\u003EI came up with this method but it won\u0027t find the part:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic Part GetPartByGameObject(GameObject gameObject)\u003Cbr\u003E{\u003Cbr\u003E    Part foundPart = null;\u003Cbr\u003E\u003Cbr\u003E    FlightGlobals.Vessels.ForEach(vessel =\u0026gt;\u003Cbr\u003E    {\u003Cbr\u003E        foundPart = vessel.Parts.Find(part =\u0026gt;\u003Cbr\u003E        {\u003Cbr\u003E            if (gameObject.Equals(part.gameObject))\u003Cbr\u003E                return true;\u003Cbr\u003E\u003Cbr\u003E            return false;\u003Cbr\u003E        });\u003Cbr\u003E    });\u003Cbr\u003E\u003Cbr\u003E    return foundPart;\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIMO this should work but it always returns null. What did I do wrong?\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2015-08-07T07:49:27Z","Content":"\n\u003Cp\u003EYou\u0027re making the assumption that the collider is on the same GameObject as a Part, but that\u0027s never the case. Instead, Parts are made up of a hierarchy of GameObjects. The top-level one contains logic (ex: PartModules) and rigidbody, then another as a child called model, then beneath that as children are GameObjects with Renderers, Animations, Colliders--all the other things that make up a Part and come from cloned instances of models from GameDatabase.databaseModel\u003C/p\u003E\u003Cp\u003EJust look upwards in the hierarchy:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E        private Part GetPartFromCollider(Collider c)\u003Cbr\u003E        {\u003Cbr\u003E            return c.gameObject.GetComponentInParent\u0026lt;Part\u0026gt;();\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-07T08:05:42Z\u0022 title=\u002208/07/2015 08:05  AM\u0022 data-short=\u00228 yr\u0022\u003EAugust 7, 2015\u003C/time\u003E by xEvilReeperx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-08-07T08:05:53Z","Content":"\n\u003Cp\u003EThank you very much! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E I didn\u0027t know that the transform hierarchy works like that.\u003C/p\u003E\n"},{"CreatedByName":"Albert VDS","CreatedById":74055,"CreatedDateTime":"2015-08-08T10:56:59Z","Content":"\n\u003Cp\u003EDoes anyone know the event when a packed part is remove from the scene?\u003C/p\u003E\u003Cp\u003EAt the moment I\u0027ve got this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\t\tpublic void OnPartPack()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tLeaveCamera ();\u003Cbr\u003E\t\t}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis works but it kicks in at about 500m(?). \u003C/p\u003E\u003Cp\u003EOnDestroy doesn\u0027t work.\u003C/p\u003E\u003Cp\u003EEdit: Fixed it. Just needed to add this to the OnDestroy();\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eif (sCurrentCamera.vessel != FlightGlobals.ActiveVessel)\u003Cbr\u003E{\u003Cbr\u003ERestoreMainCamera();\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEdit2: Actually that didn\u0027t work, well it did but it didn\u0027t correctly restore the main camera.\u003C/p\u003E\u003Cp\u003ESo to fix it I added this to update:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\t\t\tif (sCurrentCamera != null) { // Is the current camera a hullcam\u003Cbr\u003E\t\t\t\tif (sCurrentCamera.vessel != FlightGlobals.ActiveVessel) { // Is it not on the active vessel\u003Cbr\u003E\t\t\t\t\tVector3d activeVesselPos = FlightGlobals.ActiveVessel.orbit.getRelativePositionAtUT (Planetarium.GetUniversalTime ()) \u002B FlightGlobals.ActiveVessel.orbit.referenceBody.position; // Calculate active vessel position\u003Cbr\u003E\t\t\t\t\tVector3d cameraVesselPos = sCurrentCamera.vessel.orbit.getRelativePositionAtUT (Planetarium.GetUniversalTime ()) \u002B sCurrentCamera.vessel.orbit.referenceBody.position; // Calculate current camera position\u003Cbr\u003E\u003Cbr\u003E\t\t\t\t\tsCameraDistance = (activeVesselPos - cameraVesselPos).magnitude; // Calculate the distance between them\u003Cbr\u003E\u003Cbr\u003E\t\t\t\t\tif (sCameraDistance \u0026gt;= 2480) { // If distance between them is larger than 2480 then leave the current camera.\u003Cbr\u003E\t\t\t\t\t\tLeaveCamera ();\u003Cbr\u003E\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t}\u003Cbr\u003E\t\t\t}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt works perfectly, but maybe someone has an easier way of doing it?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-08T22:35:59Z\u0022 title=\u002208/08/2015 10:35  PM\u0022 data-short=\u00228 yr\u0022\u003EAugust 8, 2015\u003C/time\u003E by Albert VDS\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ObiVanDamme","CreatedById":136329,"CreatedDateTime":"2015-08-14T21:21:12Z","Content":"\n\u003Cp\u003ECan someone please tell me how I can get a List of all parts, that have been researched (science mode) and that are purchased (career mode). \u003C/p\u003E\u003Cp\u003EHere is what I have now:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eforeach (var loadedPart in PartLoader.LoadedPartsList)\u003Cbr\u003E            {\u003Cbr\u003E  try\u003Cbr\u003E  {\u003Cbr\u003E    if (ResearchAndDevelopment.PartModelPurchased(loadedPart))\u003Cbr\u003E    {\u003Cbr\u003E      items.Add(loadedPart);\u003Cbr\u003E    }\u003Cbr\u003E  }\u003Cbr\u003E  catch (Exception)\u003Cbr\u003E  {\u003Cbr\u003E    Debug.Log(\u0022[OSE] - Part \u0022 \u002B loadedPart.name \u002B \u0022 could not be added to available parts list\u0022);\u003Cbr\u003E  }\u003Cbr\u003E            }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI logged the length of the LoadedPartsList and the newly created list called items and they both have the same length no matter how far I am in the tech tree.\u003C/p\u003E\n"},{"CreatedByName":"hab136","CreatedById":75997,"CreatedDateTime":"2015-08-15T13:45:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ObiVanDamme\u0022 data-cite=\u0022ObiVanDamme\u0022\u003E\u003Cdiv\u003ECan someone please tell me how I can get a List of all parts, that have been researched (science mode) and that are purchased (career mode). \u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI was literally testing such a function just now \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprivate static bool partResearched(AvailablePart ap){\u003Cbr\u003E\t\t\tif (ResearchAndDevelopment.Instance == null) {\u003Cbr\u003E\t\t\t\tprint (\u0022no ResearchAndDevelopment.Instance, must be sandbox mode\u0022);\u003Cbr\u003E\t\t\t\treturn true;\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tif (!ResearchAndDevelopment.PartTechAvailable(ap)) {\u003Cbr\u003E\t\t\t\tprint (ap.name\u002B\u0022.PartTechAvailable()==false\u0022);\u003Cbr\u003E\t\t\t\treturn false;\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t\tif (!ResearchAndDevelopment.PartModelPurchased (ap)) {\u003Cbr\u003E\t\t\t\tprint (ap.name \u002B \u0022.PartModelPurchased()==false\u0022);\u003Cbr\u003E\t\t\t\treturn false;\u003Cbr\u003E\t\t\t}\u003Cbr\u003E                        return true;\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis works in sandbox, science, and career. In Sandbox, always returns true. In science, returns true if PartTechAvailable(), since PartModelPurchased() is always true in Science mode. In career, both PartModelPurchased() and PartTechAvailable() have to be true.\u003C/p\u003E\u003Cp\u003EHOWEVER!!! ResearchAndDevelopment.Instance doesn\u0027t exist on .Start() or .Awake(). I had to move all the part detection stuff to my onTrue (when someone clicks the GUI button). It\u0027s inefficient to re-check all the parts every time the GUI is shown, but it works.\u003C/p\u003E\n"},{"CreatedByName":"ObiVanDamme","CreatedById":136329,"CreatedDateTime":"2015-08-17T10:26:28Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022hab136\u0022 data-cite=\u0022hab136\u0022\u003E\u003Cdiv\u003EI was literally testing such a function just now \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eprivate static bool partResearched(AvailablePart ap){\u003Cbr\u003E            if (ResearchAndDevelopment.Instance == null) {\u003Cbr\u003E                print (\u0022no ResearchAndDevelopment.Instance, must be sandbox mode\u0022);\u003Cbr\u003E                return true;\u003Cbr\u003E            }\u003Cbr\u003E            if (!ResearchAndDevelopment.PartTechAvailable(ap)) {\u003Cbr\u003E                print (ap.name\u002B\u0022.PartTechAvailable()==false\u0022);\u003Cbr\u003E                return false;\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E            if (!ResearchAndDevelopment.PartModelPurchased (ap)) {\u003Cbr\u003E                print (ap.name \u002B \u0022.PartModelPurchased()==false\u0022);\u003Cbr\u003E                return false;\u003Cbr\u003E            }\u003Cbr\u003E                        return true;\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis works in sandbox, science, and career. In Sandbox, always returns true. In science, returns true if PartTechAvailable(), since PartModelPurchased() is always true in Science mode. In career, both PartModelPurchased() and PartTechAvailable() have to be true.\u003C/p\u003E\u003Cp\u003EHOWEVER!!! ResearchAndDevelopment.Instance doesn\u0027t exist on .Start() or .Awake(). I had to move all the part detection stuff to my onTrue (when someone clicks the GUI button). It\u0027s inefficient to re-check all the parts every time the GUI is shown, but it works.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you very much, I will try that out. The code currently is in the onStart Method, so it needs to be moved, but I think it can go to the context menu action, that opens the GUI. This might even be better than OnStart, because the list will be loaded only when needed.\u003C/p\u003E\u003Cp\u003EEdit: I tried that out now and the problem really is, that you cannot run that detection in OnStart. I moved the detection to the GUI initialization and now it seems to work. You can reduce the code you posted to a one liner if you do not need the logging\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        private bool PartResearched(AvailablePart p)\u003Cbr\u003E        {\u003Cbr\u003E            return ResearchAndDevelopment.PartTechAvailable(p) \u0026amp;\u0026amp; ResearchAndDevelopment.PartModelPurchased(p);\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI only tested this in Sandbox and Career mode without part unlock, but so far it does what it should do.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-08-17T11:06:47Z\u0022 title=\u002208/17/2015 11:06  AM\u0022 data-short=\u00228 yr\u0022\u003EAugust 17, 2015\u003C/time\u003E by ObiVanDamme\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ydoow","CreatedById":10165,"CreatedDateTime":"2015-08-18T00:24:20Z","Content":"\n\u003Cp\u003EI\u0027m getting this error, and not sure what to do about it.\u003C/p\u003E\u003Cp\u003EAs far as I can tell, it\u0027s making my plugin not work at all.\u003C/p\u003E\u003Cp\u003ECode is here, if it needs looking at: \u003Ca href=\u0022https://github.com/Ydoow/KSP_Konsole\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Ydoow/KSP_Konsole\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENon platform assembly: /home/clark/Code/Mono/KSP_Konsole/KSP_Konsole/bin/Debug/KSP_Konsole.dll (this message is harmless)\u003C/p\u003E\u003Cp\u003EAssemblyLoader: Exception loading \u0027KSP_Konsole\u0027: System.Reflection.ReflectionTypeLoadException: The classes in the module cannot be loaded.\u003C/p\u003E\u003Cp\u003E at (wrapper managed-to-native) System.Reflection.Assembly:GetTypes (bool)\u003C/p\u003E\u003Cp\u003E at System.Reflection.Assembly.GetTypes () [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u003C/p\u003E\u003Cp\u003E at AssemblyLoader.LoadAssemblies () [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u003C/p\u003E\u003Cp\u003EAdditional information about this exception:\u003C/p\u003E\u003Cp\u003E System.TypeLoadException: Could not load type \u0027Kerbalish.Parser\u0027 from assembly \u0027KSP_Konsole, Version=1.0.5707.36052, Culture=neutral, PublicKeyToken=null\u0027.\u003C/p\u003E\u003Cp\u003E System.TypeLoadException: Could not load type \u0027Kerbalish.Lexer\u0027 from assembly \u0027KSP_Konsole, Version=1.0.5707.36052, Culture=neutral, PublicKeyToken=null\u0027\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-08-18T00:42:39Z","Content":"\n\u003Cp\u003EMy first suspicion would be that you are not compiling against Net 3.5 which is what KSP runs on.\u003C/p\u003E\u003Cp\u003EFailing that, I\u0027m not sure, at a quick glance everything looks correct code wise.\u003C/p\u003E\u003Cp\u003EIf you are compiling against Net 3.5 already, I\u0027ll take a closer look but that is the first thing to check.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2015-08-18T01:27:33Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ydoow\u0022 data-cite=\u0022Ydoow\u0022\u003E\u003Cdiv\u003EI\u0027m getting this error, and not sure what to do about it.\u003Cp\u003EAs far as I can tell, it\u0027s making my plugin not work at all.\u003C/p\u003E\u003Cp\u003ECode is here, if it needs looking at: \u003Ca href=\u0022https://github.com/Ydoow/KSP_Konsole\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Ydoow/KSP_Konsole\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENon platform assembly: /home/clark/Code/Mono/KSP_Konsole/KSP_Konsole/bin/Debug/KSP_Konsole.dll (this message is harmless)\u003C/p\u003E\u003Cp\u003EAssemblyLoader: Exception loading \u0027KSP_Konsole\u0027: System.Reflection.ReflectionTypeLoadException: The classes in the module cannot be loaded.\u003C/p\u003E\u003Cp\u003Eat (wrapper managed-to-native) System.Reflection.Assembly:GetTypes (bool)\u003C/p\u003E\u003Cp\u003Eat System.Reflection.Assembly.GetTypes () [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u003C/p\u003E\u003Cp\u003Eat AssemblyLoader.LoadAssemblies () [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u003C/p\u003E\u003Cp\u003EAdditional information about this exception:\u003C/p\u003E\u003Cp\u003ESystem.TypeLoadException: Could not load type \u0027Kerbalish.Parser\u0027 from assembly \u0027KSP_Konsole, Version=1.0.5707.36052, Culture=neutral, PublicKeyToken=null\u0027.\u003C/p\u003E\u003Cp\u003ESystem.TypeLoadException: Could not load type \u0027Kerbalish.Lexer\u0027 from assembly \u0027KSP_Konsole, Version=1.0.5707.36052, Culture=neutral, PublicKeyToken=null\u0027\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EMy first suspicion would be that you are not compiling against Net 3.5 which is what KSP runs on.\u003Cp\u003EFailing that, I\u0027m not sure, at a quick glance everything looks correct code wise.\u003C/p\u003E\u003Cp\u003EIf you are compiling against Net 3.5 already, I\u0027ll take a closer look but that is the first thing to check.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAs Diazo said. Your project file is compiling against .NET 4.5\u003C/p\u003E\n"},{"CreatedByName":"Ydoow","CreatedById":10165,"CreatedDateTime":"2015-08-18T01:57:04Z","Content":"\n\u003Cp\u003EYeah that was the problem. I figured out how to check/switch the compiler and it\u0027s now compiling against 3.5, which solved it. Dunno how it was working before, but oh well.\u003C/p\u003E\u003Cp\u003EThanks\u003C/p\u003E\n"},{"CreatedByName":"Svm420","CreatedById":136047,"CreatedDateTime":"2015-08-19T22:24:23Z","Content":"\n\u003Cp\u003EI am trying to modify some code I found. It is adding an EVA parachute MODULE to kerbals. Within the parachute MODULE, ModuleKrKerbalParachute, there is a float value called deployeddrag. I want to set this to a value when I add this MODULE to the KerbalEVA part I want to set the value to 10. I am not sure how to write the code to set the value when adding the MODULE. Thank you! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Enamespace EVAParachutes {\u003Cbr\u003E[KSPAddon(KSPAddon.Startup.MainMenu, true)]\u003Cbr\u003Epublic class initKerbalEVA : UnityEngine.MonoBehaviour {\u003Cbr\u003E    public void Awake() {\u003Cbr\u003E\u003Cbr\u003E        ConfigNode EVA = new ConfigNode(\u0022MODULE\u0022);\u003Cbr\u003E        EVA.AddValue(\u0022name\u0022, \u0022ModuleKrKerbalParachute\u0022);\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        try {\u003Cbr\u003E            PartLoader.getPartInfoByName(\u0022kerbalEVA\u0022).partPrefab.AddModule(EVA);\u003Cbr\u003E        } catch{}\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003E        EVA = new ConfigNode(\u0022MODULE\u0022);\u003Cbr\u003E        EVA.AddValue(\u0022name\u0022, \u0022ModuleKrKerbalParachute\u0022);\u003Cbr\u003E        try {\u003Cbr\u003E            PartLoader.getPartInfoByName(\u0022kerbalEVAfemale\u0022).partPrefab.AddModule(EVA);\u003Cbr\u003E        } catch{}\u003Cbr\u003E    }\u003Cbr\u003E}}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-08-19T23:23:06Z","Content":"\n\u003Cp\u003EJust add it to the ConfigNode the same way the name value is added:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003Epublic const float evaChuteDeployedDrag = 10f;\u003Cbr\u003E\u003Cbr\u003E...\u003Cbr\u003E\u003Cbr\u003E    EVA.AddValue(\u0022name\u0022, \u0022ModuleKrKerbalParachute\u0022);\u003Cbr\u003E    EVA.AddValue(\u0022deployedDrag\u0022, evaChuteDeployedDrag.ToString());\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"royals","CreatedById":148935,"CreatedDateTime":"2015-08-22T15:55:46Z","Content":"\n\u003Cp\u003EIs it possible to read and write module info of the parent part? Like if I have a custom module on part A which is attached to part B, can I retrieve/edit the info of a module on part B from the module on part A?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-08-22T18:37:05Z","Content":"\n\u003Cp\u003Eroyals: You certainly can, the only trick is getting the reference to the correct part.\u003C/p\u003E\u003Cp\u003EInside a part module: this.vessel.Parts is a list of all parts on the vessel your partModule is attached to.\u003C/p\u003E\u003Cp\u003EThere is also two other potential commands unfortunately I can\u0027t remember them exactly.\u003C/p\u003E\u003Cp\u003ELook for something like this.part.GetParentParts() which will return a list of parts between your current part and the root part, and this.partGetChildren() which will return a list of all parts that use this part to reach the root part.\u003C/p\u003E\u003Cp\u003EIf you always want a part you are connected to, you could also look at the attachement nodes and see if there is some way to pull attached parts that way.\u003C/p\u003E\u003Cp\u003ENot a part of KSP I\u0027ve dealt with much, but hopefully this at least points you in the right direction.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"royals","CreatedById":148935,"CreatedDateTime":"2015-08-22T19:47:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003Eroyals: You certainly can, the only trick is getting the reference to the correct part.\u003Cp\u003EInside a part module: this.vessel.Parts is a list of all parts on the vessel your partModule is attached to.\u003C/p\u003E\u003Cp\u003EThere is also two other potential commands unfortunately I can\u0027t remember them exactly.\u003C/p\u003E\u003Cp\u003ELook for something like this.part.GetParentParts() which will return a list of parts between your current part and the root part, and this.partGetChildren() which will return a list of all parts that use this part to reach the root part.\u003C/p\u003E\u003Cp\u003EIf you always want a part you are connected to, you could also look at the attachement nodes and see if there is some way to pull attached parts that way.\u003C/p\u003E\u003Cp\u003ENot a part of KSP I\u0027ve dealt with much, but hopefully this at least points you in the right direction.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAlright thanks but I figured it out, used x = part.parent and then x.FindModuleImplementing\u0026lt;\u0026gt;();\u003C/p\u003E\u003Cp\u003EWhat I\u0027m now curious about is how about editing custom modules? UnityEngine doesn\u0027t include my class Foobar, so if I want to reference something in another module which I\u0027ve made myself, how does that work? For example with engines I can say \u0027ModuleEngines x = blah blah\u0027 but I can\u0027t say \u0027Foobar x = ...\u0027 since neither System nor UnityEngine has that class. Must I add a \u0022using x;\u0022 or how would I go about that?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-08-22T20:09:35Z","Content":"\n\u003Cp\u003EYou will want to tag the values you want to edit with KSPField, they will then show in the partModule.Fields list and you can access them by name.\u003C/p\u003E\u003Cp\u003Eint val1 = (int)otherPartModule.Fields[\u0022Value1\u0022]; //gets value of an Int from another partModule\u003C/p\u003E\u003Cp\u003EotherPartModule.Fields[\u0022Value2\u0022] = 5f; //set\u0027s Value2 (of type float) in the other partModule to 5\u003C/p\u003E\u003Cp\u003EYou can reference the other partModule as a PartModule type, you don\u0027t need to reference it as your custom type.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"royals","CreatedById":148935,"CreatedDateTime":"2015-08-22T20:29:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EYou will want to tag the values you want to edit with KSPField, they will then show in the partModule.Fields list and you can access them by name.\u003Cp\u003Eint val1 = (int)otherPartModule.Fields[\u0022Value1\u0022]; //gets value of an Int from another partModule\u003C/p\u003E\u003Cp\u003EotherPartModule.Fields[\u0022Value2\u0022] = 5f; //set\u0027s Value2 (of type float) in the other partModule to 5\u003C/p\u003E\u003Cp\u003EYou can reference the other partModule as a PartModule type, you don\u0027t need to reference it as your custom type.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGreat thanks a bunch! Exactly what I need, much appreciated! But how do I see if my part actually has that module? I don\u0027t know how to use PartModuleList (part.Modules) but I assume it\u0027s that or something like it that I should use?\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-08-22T22:18:56Z","Content":"\n\u003Cp\u003Epart.FindModulesImplementing\u0026lt;SomePartModuleClass\u0026gt;() or part.Modules[\u0022SomePartModuleClass\u0022] will just return an empty list or null if the module does not exist. There might also be part.Modules.Contains(\u0022SomePartModuleClass\u0022) but I don\u0027t remember for sure.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-08-22T23:18:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blowfish\u0022 data-cite=\u0022blowfish\u0022\u003E\u003Cdiv\u003Epart.FindModulesImplementing\u0026lt;SomePartModuleClass\u0026gt;() or part.Modules[\u0022SomePartModuleClass\u0022] will just return an empty list or null if the module does not exist. There might also be part.Modules.Contains(\u0022SomePartModuleClass\u0022) but I don\u0027t remember for sure.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EContains exists, but has the limitation of being an exact match (Contains(\u0022ModuleEngines\u0022) won\u0027t find ModuleEnginesFX or other derivatives but FindModulesImplementing\u0026lt;ModuleEngines\u0026gt;() will)\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-08-22T23:24:11Z","Content":"\n\u003Cp\u003ERight. It\u0027s worth asking whether you want an exact match or any modules deriving from a particular class.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-08-22T23:24:39Z","Content":"\n\u003Cp\u003EThe catch being that you can only use FindModulesImplementing on classes you know are loaded, so stock classes and the ones in your mod.\u003C/p\u003E\u003Cp\u003EThat is sufficient most of the time, just be aware you have to use .Contains for referencing another mod.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"mrsolarsail","CreatedById":121532,"CreatedDateTime":"2015-08-25T16:59:25Z","Content":"\n\u003Cp\u003EHas anyone developed mods to with deployable trusses or tethers? I see that Infernal Robotics allows you to link parts of a spacecraft together with rotating parts. I\u0027m looking for something with connecting parts that expand.\u003C/p\u003E\n"}]}