{"TopicId":159743,"ForumId":29,"TopicTitle":"Suicide Burn mod Development - Updated 5/12 - Almost BETA time","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-04-25T18:42:16Z","PageNum":4,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-17T09:50:59Z","Content":"\n\u003Cp\u003E\nOk, thanks.\n\u003C/p\u003E\n\u003Cp\u003E\nI wasn\u0027t really worrying about the change in mass, have been adjusting the throttle on the way down.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve fixed the formula, it\u0027s now providing good data. \u00A0I\u0027ll be using it moving forward.\n\u003C/p\u003E\n\u003Cp\u003E\nIt doesn\u0027t account for throttle time on engines, but that\u0027s easy enough to estimate. \u00A0Since I have an internal setting of 1/4 second to go from 0 to full throttle, I\u0027m just adding 1/4 second of vertical speed to the decel distance\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-17T09:54:42Z\u0022 title=\u002205/17/2017 09:54  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 17, 2017\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-17T11:15:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223057608\u0022 data-ipsquote-contentid=\u0022160538\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221494878471\u0022 data-ipsquote-userid=\u0022172084\u0022 data-ipsquote-username=\u0022Pand5461\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/15/2017 at 4:01 PM, Pand5461 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://en.wikipedia.org/wiki/PID_controller\u0022 rel=\u0022external nofollow\u0022\u003EProportional-Integral-Derivative\u003C/a\u003E control.\n\u003C/p\u003E\n\u003Cp\u003E\nIn this case, Integral part won\u0027t be needed, I think, so it will be just PD-controller\n\u003C/p\u003E\n\u003Cp\u003E\nSo, PD(x) = K\u003Csub\u003EP\u003C/sub\u003E*( x(t) - x\u003Csub\u003E0\u003C/sub\u003E(t) ) \u002B K\u003Csub\u003ED\u003C/sub\u003E* d( x(t) - x\u003Csub\u003E0\u003C/sub\u003E(t) )/dt,\n\u003C/p\u003E\n\u003Cp\u003E\nwhere x is the actual value of signal, x\u003Csub\u003E0\u003C/sub\u003E is what you wanted the signal to be.\n\u003C/p\u003E\n\u003Cp\u003E\nFor those who lives in a discrete time (hint: kerbals do) that changes to\n\u003C/p\u003E\n\u003Cp\u003E\nPD(x) = K\u003Csub\u003EP\u003C/sub\u003E*\u0394(t\u003Csub\u003Enow\u003C/sub\u003E) \u002B K\u003Csub\u003ED\u003C/sub\u003E* (\u0394(t\u003Csub\u003Enow\u003C/sub\u003E) - \u0394(t\u003Csub\u003Eprev\u003C/sub\u003E) ) / ( t\u003Csub\u003Enow\u003C/sub\u003E - t\u003Csub\u003Eprev\u003C/sub\u003E),\n\u003C/p\u003E\n\u003Cp\u003E\nwhere \u0394(t) is short for ( x(t) - x\u003Csub\u003E0\u003C/sub\u003E(t) ), t\u003Csub\u003Enow\u003C/sub\u003E is current time, t\u003Csub\u003Eprev\u003C/sub\u003E is the time of previous calculation of \u0394(t).\n\u003C/p\u003E\n\u003Cp\u003E\nSo, in the above case X is height, X\u003Csub\u003E0\u003C/sub\u003E is calculated h\u003Csub\u003Es\u003C/sub\u003E, and K\u003Csub\u003EP\u003C/sub\u003E and K\u003Csub\u003ED\u003C/sub\u003E must be negative numbers (need to throttle up when ship is too low, and throttle up even harder if it goes increasingly below the right height).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cs\u003ESo, I assume the K\u003Csub\u003Ep\u003C/sub\u003E\u00A0and K\u003Csub\u003Ed\u003C/sub\u003E\u00A0are constants which are used to tune this?\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: \u00A0from the Wikipedia:\n\u003C/p\u003E\n\u003Cp\u003E\nK\u003Csub\u003EP\u003C/sub\u003E =\u00A0accounts for present values of the error. For example, if the error is large and positive, the control output will also be large and positive.\n\u003C/p\u003E\n\u003Cp\u003E\nK\u003Csub\u003ED\u003C/sub\u003E\u00A0=\u00A0accounts for possible future trends of the error, based on its current rate of change\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-17T11:20:50Z\u0022 title=\u002205/17/2017 11:20  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 17, 2017\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-17T13:09:03Z","Content":"\n\u003Cp\u003E\nOk, I now have the PID controller working.\n\u003C/p\u003E\n\u003Cp\u003E\nThe given formula above still sometimes slows down the vessel too much, but the PID controller is now compensating for that.\n\u003C/p\u003E\n\u003Cp\u003E\nStill having an issue with KW Rocketyr engines, their spooltime is 2 seconds, which is (so far) not compensatable for yet.\n\u003C/p\u003E\n"},{"CreatedByName":"Kartoffelkuchen","CreatedById":108501,"CreatedDateTime":"2017-05-17T14:00:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059261\u0022 data-ipsquote-contentid=\u0022160538\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495026543\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n49 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOk, I now have the PID controller working.\n\u003C/p\u003E\n\u003Cp\u003E\nThe given formula above still sometimes slows down the vessel too much, but the PID controller is now compensating for that.\n\u003C/p\u003E\n\u003Cp\u003E\nStill having an issue with KW Rocketyr engines, their spooltime is 2 seconds, which is (so far) not compensatable for yet.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSince this is an actual plugin and not a kOS script I think it should be fairly easy to access the spool up time for each engine used for the landing and include that in the equations.. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-17T14:38:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059301\u0022 data-ipsquote-contentid=\u0022160538\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495029647\u0022 data-ipsquote-userid=\u0022108501\u0022 data-ipsquote-username=\u0022Kartoffelkuchen\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n36 minutes ago, Kartoffelkuchen said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSince this is an actual plugin and not a kOS script I think it should be fairly easy to access the spool up time for each engine used for the landing and include that in the equations.. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe problem is for the KW engines, it\u0027s a 2 second spoolup and 2.3 second spooldown. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFrankly, I\u0027m not going to worry about this, I will add some code to warn about engines which have too long a spool time. \u00A0When doing a Suicide burn, you need fast response anyway.\n\u003C/p\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2017-05-17T16:39:32Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059173\u0022 data-ipsquote-contentid=\u0022160538\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495014659\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOk, thanks.\n\u003C/p\u003E\n\u003Cp\u003E\nI wasn\u0027t really worrying about the change in mass, have been adjusting the throttle on the way down.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve fixed the formula, it\u0027s now providing good data. \u00A0I\u0027ll be using it moving forward.\n\u003C/p\u003E\n\u003Cp\u003E\nIt doesn\u0027t account for throttle time on engines, but that\u0027s easy enough to estimate. \u00A0Since I have an internal setting of 1/4 second to go from 0 to full throttle, I\u0027m just adding 1/4 second of vertical speed to the decel distance\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis formula was derived for conditions quite a bit different from what your test case is. And AAARRGH, I\u0027ve written the wrong explanation for the formula. Now I\u0027ve redone all the steps to derive it, \u003Cstrong\u003E\u003Cem\u003Ea\u003Csub\u003Edry\u003C/sub\u003E\u003C/em\u003E\u003C/strong\u003E is in fact the\n\u003C/p\u003E\n\u003Cp\u003E\nThrust / mass_at_start_of_burn . \u0022Dry\u0022 is because it was initially a part of a big landing script, and suicide burn was using the last liters of propellant.\n\u003C/p\u003E\n\u003Cp\u003E\nIn that case, throttling down was not a good option because every extra second of burning devours delta-V, and the lander had barely enough to casually spend few tens of m/s for no good reason. And, although change of \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E from 1.05 to 1.1 during the suicide burn might not seem that big, the actual deceleration changes twofold (because it\u0027s \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E-1 that defines deceleration) and the real suicide burn is significantly shorter than constant-\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E one. These are two main reasons I bothered to find a more accurate approximation than simply \u00A0t = speed / (total thrust / mass - g).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe given formula above still sometimes slows down the vessel too much, but the PID controller is now compensating for that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe big formula or the short one?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-17T16:40:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059443\u0022 data-ipsquote-contentid=\u0022160538\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495039172\u0022 data-ipsquote-userid=\u0022172084\u0022 data-ipsquote-username=\u0022Pand5461\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, Pand5461 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis formula was derived for conditions quite a bit different from what your test case is. And AAARRGH, I\u0027ve written the wrong explanation for the formula. Now I\u0027ve redone all the steps to derive it, \u003Cstrong\u003E\u003Cem\u003Ea\u003Csub\u003Edry\u003C/sub\u003E\u003C/em\u003E\u003C/strong\u003E is in fact the\n\u003C/p\u003E\n\u003Cp\u003E\nThrust / mass_at_start_of_burn . \u0022Dry\u0022 is because it was initially a part of a big landing script, and suicide burn was using the last liters of propellant.\n\u003C/p\u003E\n\u003Cp\u003E\nIn that case, throttling down was not a good option because every extra second of burning devours delta-V, and the lander had barely enough to casually spend few tens of m/s for no good reason. And, although change of \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E from 1.05 to 1.1 during the suicide burn might not seem that big, the actual deceleration changes twofold (because it\u0027s \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E-1 that defines deceleration) and the real suicide burn is significantly shorter than constant-\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E one. These are two main reasons I bothered to find a more accurate approximation than simply \u00A0t = speed / (total thrust / mass - g).\n\u003C/p\u003E\n\u003Cp\u003E\nThe big formula or the short one?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe big one: \u00A0\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E= (g - a\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Edry\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\u002B sqrt( (g - a\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Edry\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E- 2*V*a\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Edry\u003C/sub\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E/(Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E) ) ) * (Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E)/a\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Edry\u003C/sub\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m targeting a throttle of 95% and a target altitude of 2 m agl, what\u0027s been happening is that if I left it at 95%, some vessels are ready to hover at 150-200m high\n\u003C/p\u003E\n\u003Cp\u003E\nMy PID controller is now controlling it, I see the throttle drop down to about 50-70% at times because it is too high. \u00A0Not a big deal, would be nice to fix if possible\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-17T16:45:05Z\u0022 title=\u002205/17/2017 04:45  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 17, 2017\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2017-05-17T17:07:19Z","Content":"\n\u003Cp\u003E\nWhen it fails, what are initial height, vspeed, \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003Etwr\u003C/abbr\u003E and planet?\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: if it\u0027s Kerbin and starting vspeed is near or above terminal velocity, then formula is expected to fail\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-17T17:15:18Z\u0022 title=\u002205/17/2017 05:15  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 17, 2017\u003C/time\u003E by Pand5461\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-17T17:21:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059473\u0022 data-ipsquote-contentid=\u0022160538\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495040839\u0022 data-ipsquote-userid=\u0022172084\u0022 data-ipsquote-username=\u0022Pand5461\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 minutes ago, Pand5461 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen it fails, what are initial height, vspeed, \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003Etwr\u003C/abbr\u003E and planet?\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: if it\u0027s Kerbin and starting vspeed is near or above terminal velocity, then formula is expected to fail\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThese tests are as follows (I\u0027ll do more intensive testing this evening):\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nTook the stock heavy lander, replaced the engines with the LV45\n\u003C/li\u003E\n\u003Cli\u003E\nBoosted straight up to about 1000-2000m\n\u003C/li\u003E\n\u003Cli\u003E\nShut down engines, enabled Suicide Burn mod\n\u003C/li\u003E\n\u003Cli\u003E\nLander coasted and then started to fall\n\u003C/li\u003E\n\u003Cli\u003E\nEngines started appropriately, lander came to a hover at about 150 m\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nI don\u0027t remember all the details right now, I\u0027ll do more this evening.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBut, it\u0027s definitely not at terminal velocity when I enable it.\n\u003C/p\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2017-05-17T19:37:21Z","Content":"\n\u003Cp\u003E\nOkay, correction for atmospheric planets:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E= (g - (T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/3) / m\u003Cspan\u003E \u003C/span\u003E\u002B sqrt{ [\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003Eg - (T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/3) / m\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E]\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E- 2*V*(T/m)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E/(Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E) } ) * (Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E)/\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E(T/m)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003C/p\u003E\n\u003Cp\u003E\nwhere \u003Cstrong\u003E\u003Cem\u003ET\u003C/em\u003E\u003C/strong\u003E is total thrust (projection onto vertical axis), \u003Cstrong\u003E\u003Cem\u003Em\u003C/em\u003E\u003C/strong\u003E is vessel mass, \u003Cstrong\u003E\u003Cem\u003EF\u003C/em\u003E\u003C/strong\u003E\u003Cem\u003E\u003Csub\u003Ed\u003C/sub\u003E\u003C/em\u003E is drag force (projection onto vertical axis, positive number if going down), \u003Cstrong\u003E\u003Cem\u003EV \u003C/em\u003E\u003C/strong\u003Eis vertical speed (projection onto vertical axis, negative number if going down), Isp*g\u003Csub\u003E0\u003C/sub\u003E = \u003Cstrong\u003E\u003Cem\u003ET\u003C/em\u003E\u003C/strong\u003E/fuel_consumption = effective exhaust speed\n\u003C/p\u003E\n\u003Cp\u003E\nh\u003Csub\u003Es\u003C/sub\u003E = -V*t\u003Csub\u003Es\u003C/sub\u003E - [\u003Cspan style=\u0022color:#272a34;\u0022\u003E(T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/4) / m\u003C/span\u003E - g]*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E/2 - \u003Cspan style=\u0022color:#272a34;\u0022\u003E(T/m)\u003C/span\u003E\u003Csup\u003E2\u003C/sup\u003E/(Isp*g\u003Csub\u003E0\u003C/sub\u003E)*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E3\u003C/sup\u003E / 6\n\u003C/p\u003E\n\u003Cp\u003E\nI hope it is possible to get drag value from the API because it\u0027s available in-game in Aero GUI.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, this expression for the burn distance may give better results:\n\u003C/p\u003E\n\u003Cp\u003E\nh\u003Csub\u003Es\u003C/sub\u003E = (Isp*g\u003Csub\u003E0\u003C/sub\u003E)*(m - f*\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E) / f * ln[ m /\u00A0(m - f*\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E) ] - (V \u002B Isp*g\u003Csub\u003E0\u003C/sub\u003E)*t\u003Csub\u003Es\u003C/sub\u003E \u002B ( g - \u003Cspan style=\u0022color:#272a34;\u0022\u003EF\u003Csub\u003Ed\u003C/sub\u003E/(4*m) )\u003C/span\u003E*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E/2\n\u003C/p\u003E\n\u003Cp\u003E\nwhere \u003Cstrong\u003E\u003Cem\u003Ef \u003C/em\u003E\u003C/strong\u003Eis propellant consumption rate in kg/s or ton/s.\n\u003C/p\u003E\n\u003Cp\u003E\nThe latter is the proper integration of rocket equation at vertical descent with gravity and (quite simplified) drag, the previous one is the Taylor expansion of the same expression up to the cubic term.\n\u003C/p\u003E\n"},{"CreatedByName":"Kartoffelkuchen","CreatedById":108501,"CreatedDateTime":"2017-05-17T20:27:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059603\u0022 data-ipsquote-contentid=\u0022160538\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495049841\u0022 data-ipsquote-userid=\u0022172084\u0022 data-ipsquote-username=\u0022Pand5461\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n50 minutes ago, Pand5461 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOkay, correction for atmospheric planets:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E= (g - (T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/3) / m\u003Cspan\u003E \u003C/span\u003E\u002B sqrt{ [\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003Eg - (T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/3) / m\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E]\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E- 2*V*(T/m)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E/(Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E) } ) * (Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E)/\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E(T/m)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003C/p\u003E\n\u003Cp\u003E\nwhere \u003Cstrong\u003E\u003Cem\u003ET\u003C/em\u003E\u003C/strong\u003E is total thrust (projection onto vertical axis), \u003Cstrong\u003E\u003Cem\u003Em\u003C/em\u003E\u003C/strong\u003E is vessel mass, \u003Cstrong\u003E\u003Cem\u003EF\u003C/em\u003E\u003C/strong\u003E\u003Cem\u003E\u003Csub\u003Ed\u003C/sub\u003E\u003C/em\u003E is drag force (projection onto vertical axis, positive number if going down), \u003Cstrong\u003E\u003Cem\u003EV \u003C/em\u003E\u003C/strong\u003Eis vertical speed (projection onto vertical axis, negative number if going down), Isp*g\u003Csub\u003E0\u003C/sub\u003E = \u003Cstrong\u003E\u003Cem\u003ET\u003C/em\u003E\u003C/strong\u003E/fuel_consumption = effective exhaust speed\n\u003C/p\u003E\n\u003Cp\u003E\nh\u003Csub\u003Es\u003C/sub\u003E = -V*t\u003Csub\u003Es\u003C/sub\u003E - [\u003Cspan style=\u0022color:#272a34;\u0022\u003E(T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/4) / m\u003C/span\u003E - g]*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E/2 - \u003Cspan style=\u0022color:#272a34;\u0022\u003E(T/m)\u003C/span\u003E\u003Csup\u003E2\u003C/sup\u003E/(Isp*g\u003Csub\u003E0\u003C/sub\u003E)*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E3\u003C/sup\u003E / 6\n\u003C/p\u003E\n\u003Cp\u003E\nI hope it is possible to get drag value from the API because it\u0027s available in-game in Aero GUI.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, this expression for the burn distance may give better results:\n\u003C/p\u003E\n\u003Cp\u003E\nh\u003Csub\u003Es\u003C/sub\u003E = (Isp*g\u003Csub\u003E0\u003C/sub\u003E)*(m - f*\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E) / f * ln[ m /\u00A0(m - f*\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E) ] - (V \u002B Isp*g\u003Csub\u003E0\u003C/sub\u003E)*t\u003Csub\u003Es\u003C/sub\u003E \u002B ( g - \u003Cspan style=\u0022color:#272a34;\u0022\u003EF\u003Csub\u003Ed\u003C/sub\u003E/(4*m) )\u003C/span\u003E*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E/2\n\u003C/p\u003E\n\u003Cp\u003E\nwhere \u003Cstrong\u003E\u003Cem\u003Ef \u003C/em\u003E\u003C/strong\u003Eis propellant consumption rate in kg/s or ton/s.\n\u003C/p\u003E\n\u003Cp\u003E\nThe latter is the proper integration of rocket equation at vertical descent with gravity and (quite simplified) drag, the previous one is the Taylor expansion of the same expression up to the cubic term.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDem you seem to know your stuff\n\u003C/p\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2017-05-17T21:00:48Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/108501-kartoffelkuchen/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022108501\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/108501-kartoffelkuchen/\u0022 rel=\u0022\u0022\u003E@Kartoffelkuchen\u003C/a\u003E, \u003Cspan style=\u0022font-size:8px;\u0022\u003Ejust do not tell them that in fact I randomly combined some variables to make a formula that looks smart.\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"captinjoehenry","CreatedById":163669,"CreatedDateTime":"2017-05-17T21:16:23Z","Content":"\n\u003Cp\u003E\nWill this support engines angled off the center line? \u00A0I have a few really big capsules that make use or radial mounted and angled capsules which throws off the suicide burn calculator for mechanic. \u00A0Here is an image to be clear what I mean.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022sN7bJDc.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/sN7bJDc.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-17T21:23:21Z","Content":"\n\u003Cp\u003E\nYes\n\u003C/p\u003E\n"},{"CreatedByName":"Vanamonde","CreatedById":27914,"CreatedDateTime":"2017-05-17T22:06:27Z","Content":"\n\u003Cp\u003E\nOverlapping threads have been merged.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"captinjoehenry","CreatedById":163669,"CreatedDateTime":"2017-05-17T23:16:15Z","Content":"\n\u003Cp\u003E\nIf you can set it up like mechjeb where you need the part but it is a toolbar button that would be ideal!\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-18T02:26:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059603\u0022 data-ipsquote-contentid=\u0022159743\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495049841\u0022 data-ipsquote-userid=\u0022172084\u0022 data-ipsquote-username=\u0022Pand5461\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Pand5461 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOkay, correction for atmospheric planets:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E= (g - (T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/3) / m\u003Cspan\u003E \u003C/span\u003E\u002B sqrt{ [\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003Eg - (T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/3) / m\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E]\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E- 2*V*(T/m)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E/(Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E) } ) * (Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E)/\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E(T/m)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003C/p\u003E\n\u003Cp\u003E\nwhere \u003Cstrong\u003E\u003Cem\u003ET\u003C/em\u003E\u003C/strong\u003E is total thrust (projection onto vertical axis), \u003Cstrong\u003E\u003Cem\u003Em\u003C/em\u003E\u003C/strong\u003E is vessel mass, \u003Cstrong\u003E\u003Cem\u003EF\u003C/em\u003E\u003C/strong\u003E\u003Cem\u003E\u003Csub\u003Ed\u003C/sub\u003E\u003C/em\u003E is drag force (projection onto vertical axis, positive number if going down), \u003Cstrong\u003E\u003Cem\u003EV \u003C/em\u003E\u003C/strong\u003Eis vertical speed (projection onto vertical axis, negative number if going down), Isp*g\u003Csub\u003E0\u003C/sub\u003E = \u003Cstrong\u003E\u003Cem\u003ET\u003C/em\u003E\u003C/strong\u003E/fuel_consumption = effective exhaust speed\n\u003C/p\u003E\n\u003Cp\u003E\nh\u003Csub\u003Es\u003C/sub\u003E = -V*t\u003Csub\u003Es\u003C/sub\u003E - [\u003Cspan style=\u0022color:#272a34;\u0022\u003E(T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/4) / m\u003C/span\u003E - g]*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E/2 - \u003Cspan style=\u0022color:#272a34;\u0022\u003E(T/m)\u003C/span\u003E\u003Csup\u003E2\u003C/sup\u003E/(Isp*g\u003Csub\u003E0\u003C/sub\u003E)*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E3\u003C/sup\u003E / 6\n\u003C/p\u003E\n\u003Cp\u003E\nI hope it is possible to get drag value from the API because it\u0027s available in-game in Aero GUI.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, this expression for the burn distance may give better results:\n\u003C/p\u003E\n\u003Cp\u003E\nh\u003Csub\u003Es\u003C/sub\u003E = (Isp*g\u003Csub\u003E0\u003C/sub\u003E)*(m - f*\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E) / f * ln[ m /\u00A0(m - f*\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E) ] - (V \u002B Isp*g\u003Csub\u003E0\u003C/sub\u003E)*t\u003Csub\u003Es\u003C/sub\u003E \u002B ( g - \u003Cspan style=\u0022color:#272a34;\u0022\u003EF\u003Csub\u003Ed\u003C/sub\u003E/(4*m) )\u003C/span\u003E*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E/2\n\u003C/p\u003E\n\u003Cp\u003E\nwhere \u003Cstrong\u003E\u003Cem\u003Ef \u003C/em\u003E\u003C/strong\u003Eis propellant consumption rate in kg/s or ton/s.\n\u003C/p\u003E\n\u003Cp\u003E\nThe latter is the proper integration of rocket equation at vertical descent with gravity and (quite simplified) drag, the previous one is the Taylor expansion of the same expression up to the cubic term.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nok, so you say to use these on a planet with an atmosphere, and the one posted earlier in non-atmosphere?\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-18T03:47:05Z","Content":"\n\u003Cp\u003E\nI would have expected the new formula to be about the same as the old one if drag was = 0 (as a test), but it isn\u0027t. \u00A0The new formulas causes crashes\n\u003C/p\u003E\n\u003Cp\u003E\nIt could be the distance formula, I\u0027m using that number to both determine when to start firing, and comparing it to the actual with the PID controller.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-18T03:48:19Z\u0022 title=\u002205/18/2017 03:48  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 18, 2017\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2017-05-18T04:20:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223060032\u0022 data-ipsquote-contentid=\u0022159743\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495079225\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI would have expected the new formula to be about the same as the old one if drag was = 0 (as a test), but it isn\u0027t. \u00A0The new formulas causes crashes\n\u003C/p\u003E\n\u003Cp\u003E\nIt could be the distance formula, I\u0027m using that number to both determine when to start firing, and comparing it to the actual with the PID controller.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell that\u0027s strange. The only difference is that \u003Cem\u003E\u003Cstrong\u003Eg\u003C/strong\u003E\u003C/em\u003E in the old formula changed to \u003Cstrong\u003E\u003Cem\u003Eg - F\u003Csub\u003Ed\u003C/sub\u003E/(3*m)\u003C/em\u003E\u003C/strong\u003E in the new one for time, and to \u003Cstrong\u003E\u003Cem\u003Eg - F\u003Csub\u003Ed\u003C/sub\u003E/(4*m)\u003C/em\u003E\u003C/strong\u003E for distance.\n\u003C/p\u003E\n\u003Cp\u003E\nThe only possible reason of crashes may be unit inconsistency, especially with logarithm formula for distance. Other formulae should not cause crashes because the number under sqrt() is always positive as long as vspeed is directed down, and all the denominators are certainly non-zero.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003E\u003Cstrong\u003Eg\u003C/strong\u003E\u003C/em\u003E is in m/s\u003Csup\u003E2\u003C/sup\u003E, so valid combinations are:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cem\u003EF\u003Csub\u003Ed\u003C/sub\u003E\u003C/em\u003E\u003C/strong\u003E in kiloNewtons\u003Cstrong\u003E\u003Cem\u003E, m \u003C/em\u003E\u003C/strong\u003Ein tons, \u003Cem\u003E\u003Cstrong\u003Ef\u003C/strong\u003E\u003C/em\u003E in tons/s\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cem\u003EF\u003Csub\u003Ed\u003C/sub\u003E\u003C/em\u003E\u003C/strong\u003E in Newtons\u003Cstrong\u003E\u003Cem\u003E, m \u003C/em\u003E\u003C/strong\u003Ein kilograms, \u003Cem\u003E\u003Cstrong\u003Ef\u003C/strong\u003E\u003C/em\u003E in kilograms/s.\n\u003C/p\u003E\n\u003Cp\u003E\nSo the only reason for crash is if mass was in tons and consumption in kg/s that caused negative number under logarithm.\n\u003C/p\u003E\n\u003Cp\u003E\nEDIT: And, of course, drag must be in the same units as thrust, so either both in Newtons of both in kiloNewtons.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-18T04:31:28Z\u0022 title=\u002205/18/2017 04:31  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 18, 2017\u003C/time\u003E by Pand5461\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-18T11:34:01Z","Content":"\n\u003Cp\u003E\nOh, you changed things.\n\u003C/p\u003E\n\u003Cp\u003E\nfirst formula used Adry, 2nd used T\n\u003C/p\u003E\n\u003Cp\u003E\nShould the two of\u00A0them be somewhat close? \u00A0They are way different\n\u003C/p\u003E\n\u003Cp\u003E\nI did find one mistake, on the first one I had adjusted the Adry to 95%, forgot to do that to T\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo, right now my issues are with the t\u003Csub\u003Es\u003C/sub\u003E\u00A0calculation. \u00A0Here are the formulas, with the C# code implementing them:\n\u003C/p\u003E\n\u003Cp\u003E\nFirst one (which work, mostly):\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E= (g - a\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Edry\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\u002B sqrt( (g - a\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Edry\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E- 2*V*a\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Edry\u003C/sub\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E/(Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E) ) ) * (Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E)/a\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Edry\u003C/sub\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\nC# code: \u003Cspan style=\u0022font-size:11px;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003E\u00A0Ts = (g - Adry \u002B Math.Sqrt(Math.Pow(g - Adry, 2) - 2 * V * Adry * Adry / (realIsp * g0))) * (realIsp * g0) / (Adry * Adry);\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n2nd one with problems:\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u00A0\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E= (g - (T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/3) / m\u003Cspan\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\u003C/span\u003E\u002B sqrt{ [\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003Eg - (T \u002B F\u003Csub\u003Ed\u003C/sub\u003E/3) / m\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E]\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E- 2*V*(T/m)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E/(Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E) } ) * (Isp*g\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003E0\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E)/\u003C/span\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E(T/m)\u003C/span\u003E\u003Csup style=\u0022color:#272a34;\u0022\u003E2\u003C/sup\u003E\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\nC# code:\u00A0\u003Cspan style=\u0022font-size:11px;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003ETs = (g - (T \u002B Fd / 3) / m \u002B Math.Sqrt(Math.Pow(g - (T \u002B Fd / 3) / m, 2) - 2 * V * Math.Pow(T / m, 2) / (realIsp * g0))) * (realIsp*g0) / Math.Pow(T / m, 2);\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFor a test I did:\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\nT = a\u003Csub\u003Edry\u003C/sub\u003E\u003Cbr\u003E\nF\u003Csub\u003Ed\u003C/sub\u003E\u00A0= 0\n\u003C/p\u003E\n\u003Cp\u003E\nValues from KSP are:\n\u003C/p\u003E\n\u003Cp\u003E\na\u003Csub\u003Edry\u003C/sub\u003E\u00A0= 14.87\u003Cbr\u003E\nIsp = 300\u003Cbr\u003E\ng = 9.8\u003Cbr\u003E\nm = 20.657\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nGiven these values, I would expect the two formula to be close, but nope.\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe it\u0027s F\u003Csub\u003Ed\u003C/sub\u003E\u00A0which is wrong. \u00A0I thought that this was Drag, which, at 29\u00A0velocity, is close to 0, so I set it to 0 for this test. \u00A0But maybe you are referring to something else? \u00A0Because when it is 0, then there is nothing subtracted from g. \u00A0The numbers I\u0027m getting out are:\n\u003C/p\u003E\n\u003Cp\u003E\ngood t\u003Csub\u003Es\u003C/sub\u003E:\u00A0-5.74832571919834\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nBad t\u003Csub\u003Es\u003C/sub\u003E:\u00A0100544.838732141\n\u003C/p\u003E\n\u003Cp\u003E\nThis is the part which I\u0027m puzzled about:\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#272a34;\u0022\u003E(g - (T \u002B F\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Ed\u003C/sub\u003E\u003Cspan style=\u0022color:#272a34;\u0022\u003E/3) / m\u003Cspan\u003E\u00A0\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIf drag is 0, then you are essentially dividing the T by m, which is now throwing everything off\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EAnd that was the problem. \u00A0I multipled T by M, and got the results I expected.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-18T11:49:27Z\u0022 title=\u002205/18/2017 11:49  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 18, 2017\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Pand5461","CreatedById":172084,"CreatedDateTime":"2017-05-18T13:34:37Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E, there is the issue in programming physical problems - programming language isn\u0027t giving a warning when you add m/s\u003Csup\u003E2\u003C/sup\u003E to kilonewtons.\n\u003C/p\u003E\n\u003Cp\u003E\nNow tried to calculate the distance with your settings (mass, thrust, Isp) with and without drag.\n\u003C/p\u003E\n\u003Cp\u003E\nAeroGUI gives Cd*S ~ 9 m\u003Csup\u003E2\u003C/sup\u003E for the heavy lander, and I used Cd*S*atm_dens*V\u003Csup\u003E2\u003C/sup\u003E/2 for drag, air_dens being the air density which is 0.001 ton/m3 at Kerbin SL, I believe.\n\u003C/p\u003E\n\u003Cp\u003E\nThe drag correction to the distance grow up fairly quickly:\n\u003C/p\u003E\n\u003Cp\u003E\n~0.7 m at -30 m/s\n\u003C/p\u003E\n\u003Cp\u003E\n~10 m at -60 m/s\n\u003C/p\u003E\n\u003Cp\u003E\n~70 m at -100 m/s\n\u003C/p\u003E\n\u003Cp\u003E\n~100 m at -110 m/s\n\u003C/p\u003E\n\u003Cp\u003E\nNo wonder the initial formula made the ship stop so high above the ground.\n\u003C/p\u003E\n\u003Cp\u003E\nThe cubic and log formulas give increasingly different predictions as well, but their difference is within 10m up to the terminal velocity.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-18T13:38:18Z","Content":"\n\u003Cp\u003E\nI realized that a few minutes ago, and am now working to use the AeroGUI calculations so I don\u0027t have to redo it.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks, will update this evening when I get back home.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223060399\u0022 data-ipsquote-contentid=\u0022159743\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495114477\u0022 data-ipsquote-userid=\u0022172084\u0022 data-ipsquote-username=\u0022Pand5461\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, Pand5461 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe cubic and log formulas give increasingly different predictions as well, but their difference is within 10m up to the terminal v\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhich is fine for this mod.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-18T13:53:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059962\u0022 data-ipsquote-contentid=\u0022159743\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495074365\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI hope it is possible to get drag value from the API because it\u0027s available in-game in Aero GUI\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWasn\u0027t easy to do, it doesn\u0027t do those calculations unless it is displayed, I had to play a game with it to get it to calculate\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059962\u0022 data-ipsquote-contentid=\u0022159743\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495074365\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n11 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAlso, this expression for the burn distance may give better results:\n\u003C/p\u003E\n\u003Cp\u003E\nh\u003Csub\u003Es\u003C/sub\u003E = (Isp*g\u003Csub\u003E0\u003C/sub\u003E)*(m - f*\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E) / f * ln[ m /\u00A0(m - f*\u003Cspan style=\u0022color:#272a34;\u0022\u003Et\u003C/span\u003E\u003Csub style=\u0022color:#272a34;\u0022\u003Es\u003C/sub\u003E) ] - (V \u002B Isp*g\u003Csub\u003E0\u003C/sub\u003E)*t\u003Csub\u003Es\u003C/sub\u003E \u002B ( g - \u003Cspan style=\u0022color:#272a34;\u0022\u003EF\u003Csub\u003Ed\u003C/sub\u003E/(4*m) )\u003C/span\u003E*t\u003Csub\u003Es\u003C/sub\u003E\u003Csup\u003E2\u003C/sup\u003E/2\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTrying this calculation is next. \u00A0On a single test with the corrections, it landed, but just a little long (ie: \u00A0target altitude was 2m agl, it impacted at about 4m/s on the ground, so it was a bit off.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-18T16:03:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223060399\u0022 data-ipsquote-contentid=\u0022159743\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495114477\u0022 data-ipsquote-userid=\u0022172084\u0022 data-ipsquote-username=\u0022Pand5461\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, Pand5461 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022129964\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/129964-linuxgurugamer/\u0022 rel=\u0022\u0022\u003E@linuxgurugamer\u003C/a\u003E, there is the issue in programming physical problems - programming language isn\u0027t giving a warning when you add m/s\u003Csup\u003E2\u003C/sup\u003E to kilonewtons.\n\u003C/p\u003E\n\u003Cp\u003E\nNow tried to calculate the distance with your settings (mass, thrust, Isp) with and without drag.\n\u003C/p\u003E\n\u003Cp\u003E\nAeroGUI gives Cd*S ~ 9 m\u003Csup\u003E2\u003C/sup\u003E for the heavy lander, and I used Cd*S*atm_dens*V\u003Csup\u003E2\u003C/sup\u003E/2 for drag, air_dens being the air density which is 0.001 ton/m3 at Kerbin SL, I believe.\n\u003C/p\u003E\n\u003Cp\u003E\nThe drag correction to the distance grow up fairly quickly:\n\u003C/p\u003E\n\u003Cp\u003E\n~0.7 m at -30 m/s\n\u003C/p\u003E\n\u003Cp\u003E\n~10 m at -60 m/s\n\u003C/p\u003E\n\u003Cp\u003E\n~70 m at -100 m/s\n\u003C/p\u003E\n\u003Cp\u003E\n~100 m at -110 m/s\n\u003C/p\u003E\n\u003Cp\u003E\nNo wonder the initial formula made the ship stop so high above the ground.\n\u003C/p\u003E\n\u003Cp\u003E\nThe cubic and log formulas give increasingly different predictions as well, but their difference is within 10m up to the terminal velocity.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPart of my issue is a lack of time, and very incomplete documentation on what the internals from KSP are, so it makes sense that I was mixing the units.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-05-19T12:52:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223059810\u0022 data-ipsquote-contentid=\u0022159743\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495062975\u0022 data-ipsquote-userid=\u0022163669\u0022 data-ipsquote-username=\u0022captinjoehenry\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, captinjoehenry said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you can set it up like mechjeb where you need the part but it is a toolbar button that would be ideal!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt can be done either way, right now I just have minimum requirements (ie: \u00A0pilot level or autopilot level)\n\u003C/p\u003E\n"}]}