{"TopicId":113706,"ForumId":29,"TopicTitle":"SolverEngine:Why I get no FX or Emissive running in my mod based on SolverEngine","CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-22T14:08:01Z","PageNum":1,"Articles":[{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-22T14:08:01Z","Content":"I\u0027m working on my mod based on SolverEngine now.I\u0027m reading AJE and RF\u0027s source codes and found that both SolverEngine and them are amazing and work perfectly.However,I don\u0027t know how to get emissive and FX running.\n\nBased on my understanding of the sources,I coded in my mod as below\n\n            public override double GetEngineTemp() { return chamberTemp; }        public override double GetEmissive() { return fxPower; }        public override float GetFXPower() { return fxPower; }        public override float GetFXRunning() { return fxPower; }        public override float GetFXThrottle() { return fxPower; }        public override float GetFXSpool() { return fxPower; }        public override bool GetRunning() { return fuelFlow \u003E 0; }\n\nwhere the fxPower is a float( 0f~1f ),and debug shows it has correct value when running.\n\nBut there is no exhaust flame or other FX.\n\nMod\u0027s Git: [https://github.com/Librazy/EngineDevelopment/tree/ParamAlpha](https://github.com/Librazy/EngineDevelopment/tree/ParamAlpha)\n\nThanks for reading and helping\n\n**Edited \u003Ctime datetime=\u00222015-06-24T17:07:09Z\u0022 title=\u002206/24/2015 05:07  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 24, 2015\u003C/time\u003E by Librazy**"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-06-22T14:48:20Z","Content":"Your Test.cfg config does not have any EFFECT node. So the engine has no effect to display. \n\nYou need to copy an EFFECT config from an other engine."},{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-22T15:05:03Z","Content":"\u003E \n\u003E Your Test.cfg config does not have any EFFECT node. So the engine has no effect to display. \n\u003E You need to copy an EFFECT config from an other engine.\n\nSorry for my stupid\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6Gonna to try it tomorrow\u00C3\u00AF\u00C2\u00BC\u00CB\u2020UTC\u002B8here\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-06-22T21:10:54Z","Content":"Great to see this get use--and let us know if you need anything else added to SolverEngines! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-24T17:41:54Z","Content":"\u003E \n\u003E Your Test.cfg config does not have any EFFECT node. So the engine has no effect to display. \n\u003E You need to copy an EFFECT config from an other engine.\n\nThanks,I writes an cfg on a KW ModuleEngineFX that has an EFFECT,and It works well^But it seems some more work needs to be done to fit an ModuleEngine part=w=![:huh:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_undecided.gif)\n\n\u003E \n\u003E Great to see this get use--and let us know if you need anything else added to SolverEngines! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nI dunna to write a mod like AJE on rocket engine,but I don\u0027t know how\u0026what to do until I found SolverEngines.No issue for now^(These days I was buried in my messy liquid-engine-simulation codes to ensure it won\u0027t get out-ranged results)\n\nActually I need some data from RF like fuelFraction of CalculateGamma and the exhaust gases\u0027 molar mass.\n\nAnd an issue for RF:\n\nFor an ModuleEnginesSolver part when showing RF GUI in action group, It just run once CreateEngine but Multi-GetInfo on the propellants changed to.Mine reads Isp and other data depended on propellants-in-use when CreateEngine,so it wouldn\u0027t show correct data for currect propellants.And It seems that RF runs the engine sim on every OnGUI,which I think only need to run once from the beginning when loading and changing configs(like the stock part list do.\n\nThanks for bring us a lot of wonderful mods\u00C3\u00AF\u00C2\u00BC\u00C2\n\n- - - Updated - - -\n\n\u003E \n\u003E Great to see this get use--and let us know if you need anything else added to SolverEngines! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nPS:Due to the absent of EI on 1.0.x version,I add the ullage and ignition code from EI which I\u0027d like to include in my mod...Not until today did I found the Ullage branch of MFS\u0026RF..\n\nI\u0027m reading ModuleEnginesRF to find out how to write a better ModuleEnginesDev for my EngineDevelopment\n\n- - - Updated - - -\n\n......Then I find out we won\u0027t meet on the same part for ModuleEnginesRF and ModuleEnginesDev...So I will write a :Final in the cfg to drive away any other ModuleEngines\\* (Badness:sticktongue:4 joking"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-06-24T18:31:49Z","Content":"SolverEngines derives from ModuleEnginesFX; it would be rather hard to make it work with non-ModuleEnginesFX effects. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\nSounds like you\u0027re doing some awesome stuff! In fact, I suggest you just fork RealFuels and go from there, since that\u0027s what RF\u0027s solver aspires to do (actually calculate real liquid and solid engine performance, rather than use curves); we just haven\u0027t written that yet. And interesting you mention ullage; I just added that to RF. Check the repo. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) (Sorry we duplicated effort, since it sounds like we did the same thing).\n\nExcellent point about GetInfo, I\u0027ll fix that."},{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-06-24T20:10:06Z","Content":"\u003E \n\u003E Sounds like you\u0027re doing some awesome stuff! In fact, I suggest you just fork RealFuels and go from there, since that\u0027s what RF\u0027s solver aspires to do\n\nSo..when i get my simulation and calculation right I\u0027ll redo it in RF and pull to your repo.\n\nIn my mod,I\u0027d like to add some cfg node other like ModuleNozzleConfig ModuleChamberConfig to get datas needed.So the player can get some different performance using different nozzles,chamber sand powercycles--the way to change settings is just the same to change fuels.So the basic thing is a realistic calculation engine performance,which I\u0027m trying to work on now.\n\nBut I\u0027m a new-hand on both KSP plugin and engine calculation,so I had made little progress so far.I think I will do better with your and others help.\n\nMy honor to take part in the wonderful work\n\n- - - Updated - - -\n\nPS: 04:00 a.m. here (..I should learn the lesson not to drink too much coffee before sleep.."},{"CreatedByName":"Librazy","CreatedById":146372,"CreatedDateTime":"2015-07-06T15:35:07Z","Content":"\u003E \n\u003E SolverEngines derives from ModuleEnginesFX; it would be rather hard to make it work with non-ModuleEnginesFX effects. ![;)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif)\n\u003E Sounds like you\u0027re doing some awesome stuff! In fact, I suggest you just fork RealFuels and go from there, since that\u0027s what RF\u0027s solver aspires to do (actually calculate real liquid and solid engine performance, rather than use curves); we just haven\u0027t written that yet. And interesting you mention ullage; I just added that to RF. Check the repo. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif) (Sorry we duplicated effort, since it sounds like we did the same thing).\n\u003E \n\u003E Excellent point about GetInfo, I\u0027ll fix that.\n\nBasically understood how RF works,I\u00C3\u00A2\u00E2\u201A\u00AC\u00CB\u0153m trying to rewrite SolverRF for real performance calculation.Just have liquid de laval engine done yet.//Hope I\u0027d written something useful\n\nTime to consider how the cfg should be\u00C3\u00A2\u00E2\u201A\u00AC\u00C2\u00A6Would be a big project to find out the params for lots of engines.\n\n[https://github.com/Librazy/ModularFuelSystem](https://github.com/Librazy/ModularFuelSystem)"}]}