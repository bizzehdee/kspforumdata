{"TopicId":94952,"ForumId":29,"TopicTitle":"forces on kerbin","CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2014-12-30T02:05:59Z","PageNum":1,"Articles":[{"CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2014-12-30T02:05:59Z","Content":"\n\u003Cp\u003EHi all.\u003C/p\u003E\u003Cp\u003Ei try to run this code on an eva kerbal\u003C/p\u003E\u003Cp\u003Ev.transform.rigidbody.AddForceAtPosition(-FlightGlobals.getGeeForceAtPosition(v.transform.position) * v.GetTotalMass(), v.findWorldCenterOfMass());\u003C/p\u003E\u003Cp\u003Ev is flightglobal vessel\u003C/p\u003E\u003Cp\u003Ethe trouble is that the kerbal slowly flying upwards. what other forces are affecting a still vessel on a planetsurface?\u003C/p\u003E\u003Cp\u003Ethanks\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-12-30T04:19:55Z","Content":"\n\u003Cp\u003EErr, can you hyperedit to the otherside of the planet?\u003C/p\u003E\u003Cp\u003EMy first guess is that you are nullifying the force of gravity on the kerbal, but the planet is still moving in World Space while the Kerbal is staying stationary in World Space.\u003C/p\u003E\u003Cp\u003EIf so, by hyperediting to the otherside of the planet, the kerbal will stay on the ground as the planet is moving towards him.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2014-12-30T04:44:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EMy first guess is that you are nullifying the force of gravity on the kerbal, but the planet is still moving in World Space while the Kerbal is staying stationary in World Space.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere\u0027s that, or any slight impulse from contact with a surface\u003C/p\u003E\n"},{"CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2014-12-30T14:14:35Z","Content":"\n\u003Cp\u003Ethat was my first thought too but its such a strong force, he is not just slowly levitating away, he is flying like rocket and exactly upward. well, i will test it on the other side. thx anyway\u003C/p\u003E\n"},{"CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2014-12-30T20:44:32Z","Content":"\n\u003Cp\u003Eno, sadly on the other side he is still flying upward :/ either ksp has the buggiest physix or i dont know something i should...\u003C/p\u003E\n"},{"CreatedByName":"rbray89","CreatedById":48847,"CreatedDateTime":"2014-12-30T22:31:48Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tuareg\u0022 data-cite=\u0022Tuareg\u0022\u003E\u003Cdiv\u003EHi all.\u003Cp\u003Ei try to run this code on an eva kerbal\u003C/p\u003E\u003Cp\u003Ev.transform.rigidbody.AddForceAtPosition(-FlightGlobals.getGeeForceAtPosition(v.transform.position) * v.GetTotalMass(), v.findWorldCenterOfMass());\u003C/p\u003E\u003Cp\u003Ev is flightglobal vessel\u003C/p\u003E\u003Cp\u003Ethe trouble is that the kerbal slowly flying upwards. what other forces are affecting a still vessel on a planetsurface?\u003C/p\u003E\u003Cp\u003Ethanks\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Etransform.position is world space. Are you sure that the getGeeForceAtPosition method uses world or local space? Does this code work for just a vessel? or does it only break on EVA\u0027d kerbals?\u003C/p\u003E\n"},{"CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2014-12-31T01:11:01Z","Content":"\n\u003Cp\u003Eit gives world coords and it does the same for other vessels too, though one fault was that i was testing it with running it in onupdate and forgot about it, that made the force so strong. now its running in onfixedupdate its a lot better still its flying straight up, doesnt matter which side of kerbin it is \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003Eedit: its rigidbody has velocity so the first theory surely not true. its not the planet moves away from the still vessel\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-31T01:15:14Z\u0022 title=\u002212/31/2014 01:15  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 31, 2014\u003C/time\u003E by Tuareg\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ringotuna","CreatedById":79252,"CreatedDateTime":"2014-12-31T01:25:32Z","Content":"\n\u003Cp\u003Ehas it something to do with the rotation of the planet?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-12-31T03:08:16Z","Content":"\n\u003Cp\u003EAt this point, I would do a Vector3.Distance(WorldPosThisFrame,WorldPosLastFrame); in FixedUpdate and compare the distances between them. If the distances are the same (constant velocity) you are correctly canceling everything and the kerbal has no forces acting upon it.\u003C/p\u003E\u003Cp\u003EIf the distances are different, either you are not canceling the force of gravity correctly, or there is another force acting on the kerbal.\u003C/p\u003E\u003Cp\u003EAlso, you are running this in FixedUpdate, not Update correct? Update is for GUI stuff and on most computers runs more often then FixedUpdate where KSP exerts forces so you could be canceling gravity too often.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Daid","CreatedById":32171,"CreatedDateTime":"2014-12-31T08:47:39Z","Content":"\n\u003Cp\u003EIf you want to stop gravity from effecting the kerbal, wouldn\u0027t the Unity \u0022useGravity\u0022 flag be a better solution?\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/Rigidbody-useGravity.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/ScriptReference/Rigidbody-useGravity.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAlso, to get the current gravity that is applied to the objects, \u0022Physics.gravity\u0022 might be a more accurate reference. And I would use the \u0022AddForce\u0022 instead of \u0022AddForceAtPosition\u0022 function. With the ForceMode to acceleration, so you do not need to multiply with the mass, which could also be your problem, as the mass presented to GetTotalMass might not be the same as the physics mass.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/ForceMode.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/ScriptReference/ForceMode.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ev.transform.rigidbody.AddForce(Physics.gravity, ForceMode.Acceleration);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2014-12-31T09:59:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ringotuna\u0022 data-cite=\u0022Ringotuna\u0022\u003E\u003Cdiv\u003Ehas it something to do with the rotation of the planet?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eno, in that case the vessel should move sideaways but it flies straight up.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EAt this point, I would do a Vector3.Distance(WorldPosThisFrame,WorldPosLastFrame); in FixedUpdate and compare the distances between them. If the distances are the same (constant velocity) you are correctly canceling everything and the kerbal has no forces acting upon it.\u003Cp\u003EIf the distances are different, either you are not canceling the force of gravity correctly, or there is another force acting on the kerbal.\u003C/p\u003E\u003Cp\u003EAlso, you are running this in FixedUpdate, not Update correct? Update is for GUI stuff and on most computers runs more often then FixedUpdate where KSP exerts forces so you could be canceling gravity too often.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyes, im now running it in fixedupdate and the velocity is increasing so it has acceleration\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Daid\u0022 data-cite=\u0022Daid\u0022\u003E\u003Cdiv\u003EIf you want to stop gravity from effecting the kerbal, wouldn\u0027t the Unity \u0022useGravity\u0022 flag be a better solution?\u003Cp\u003E\u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/Rigidbody-useGravity.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/ScriptReference/Rigidbody-useGravity.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAlso, to get the current gravity that is applied to the objects, \u0022Physics.gravity\u0022 might be a more accurate reference. And I would use the \u0022AddForce\u0022 instead of \u0022AddForceAtPosition\u0022 function. With the ForceMode to acceleration, so you do not need to multiply with the mass, which could also be your problem, as the mass presented to GetTotalMass might not be the same as the physics mass.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://docs.unity3d.com/ScriptReference/ForceMode.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/ScriptReference/ForceMode.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Ev.transform.rigidbody.AddForce(Physics.gravity, ForceMode.Acceleration);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eas far as i know ksp doesnt use gravity, they use forces applied at CoM and this is also why i cant use addforce instead of addforceatposition. the CoM of the vessel is not the same as the center of the rigidbody. i can be wrong though\u003C/p\u003E\n"},{"CreatedByName":"Daid","CreatedById":32171,"CreatedDateTime":"2014-12-31T13:35:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tuareg\u0022 data-cite=\u0022Tuareg\u0022\u003E\u003Cdiv\u003Eas far as i know ksp doesnt use gravity, they use forces applied at CoM and this is also why i cant use addforce instead of addforceatposition. the CoM of the vessel is not the same as the center of the rigidbody. i can be wrong though\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAddForce on a kerbal seems to work fine for me. Setting vessel.transform.ridigbody.useGravity to false does not seem to do much.\u003C/p\u003E\u003Cp\u003EBut I do see a small upwards drift that you\u0027re also seeing. So the actual downwards force that the object gets is less then the added upwards force.\u003C/p\u003E\u003Cp\u003EFew random ideas:\u003C/p\u003E\u003Cp\u003E* FlightGlobals.getCentrifugalAcc and/or FlightGlobals.getCoriolisAcc might also get applied?\u003C/p\u003E\u003Cp\u003E* Drag could be causing strange effects? (We know the drag model isn\u0027t that awesome)\u003C/p\u003E\u003Cp\u003EAs cheat, you could set the velocity to zero when it\u0027s nearly zero?\u003C/p\u003E\n"},{"CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2014-12-31T21:10:56Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Daid\u0022 data-cite=\u0022Daid\u0022\u003E\u003Cdiv\u003EAddForce on a kerbal seems to work fine for me. Setting vessel.transform.ridigbody.useGravity to false does not seem to do much.\u003Cp\u003EBut I do see a small upwards drift that you\u0027re also seeing. So the actual downwards force that the object gets is less then the added upwards force.\u003C/p\u003E\u003Cp\u003EFew random ideas:\u003C/p\u003E\u003Cp\u003E* FlightGlobals.getCentrifugalAcc and/or FlightGlobals.getCoriolisAcc might also get applied?\u003C/p\u003E\u003Cp\u003E* Drag could be causing strange effects? (We know the drag model isn\u0027t that awesome)\u003C/p\u003E\u003Cp\u003EAs cheat, you could set the velocity to zero when it\u0027s nearly zero?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Egenius! thanks a lot \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E i didnt think squad took the time to actually model centrifugal force but they did. my little kerbal can now levitate on kerbin \\o/\u003C/p\u003E\n"},{"CreatedByName":"Daid","CreatedById":32171,"CreatedDateTime":"2015-01-01T10:47:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Tuareg\u0022 data-cite=\u0022Tuareg\u0022\u003E\u003Cdiv\u003Egenius! thanks a lot \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E i didnt think squad took the time to actually model centrifugal force but they did. my little kerbal can now levitate on kerbin \\o/\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou\u0027re welcome. I like investigating interesting cases like this :-) for the record, which combination worked?\u003C/p\u003E\n"},{"CreatedByName":"Tuareg","CreatedById":84241,"CreatedDateTime":"2015-01-01T13:24:21Z","Content":"\n\u003Cp\u003EFlightGlobals.getGeeForceAtPosition\u002BFlightGlobals.getCentrifugalAcc\u003C/p\u003E\u003Cp\u003EI\u0027ve negated both and the vessel rests wherever I leave it.\u003C/p\u003E\u003Cp\u003Ethanks again\u003C/p\u003E\n"}]}