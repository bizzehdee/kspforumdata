{"TopicId":57572,"ForumId":29,"TopicTitle":"The Tweakables Thread","CreatedByName":"dtobi","CreatedById":90882,"CreatedDateTime":"2013-12-24T08:54:00Z","PageNum":1,"Articles":[{"CreatedByName":"dtobi","CreatedById":90882,"CreatedDateTime":"2013-12-24T08:54:00Z","Content":"\n\u003Cp\u003EI have not found any good spot where people documented how the new tweakables work so I decided to put the things I know here. Please post what you know, too.\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E\u003Cstrong\u003EAdding a button that changes a bool\u003C/strong\u003E\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t[KSPField(isPersistant = false, guiActive = true, guiActiveEditor = true, guiName = \u0022My Bool\u0022),\u003Cbr\u003E\t\t\tUI_Toggle(disabledText=\u0022Disabled\u0022, enabledText=\u0022Enabled\u0022)]\u003Cbr\u003E\t\tpublic bool myBool = true;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe parts explained:\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EguiActive = true\u003C/strong\u003E show in flight\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EguiActiveEditor = true\u003C/strong\u003E tells KSP to show it in the editor (or not)\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EUI_Toggle(...)\u003C/strong\u003E defines what text should be shown\u003C/p\u003E\u003Cp\u003E\u003Cem\u003E\u003Cstrong\u003EAdding a slider\u003C/strong\u003E\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\t\u003Cbr\u003E        [KSPField(isPersistant = true, guiActive = true, guiActiveEditor = true, guiName = \u0022My Slider\u0022) , UI_FloatRange(minValue = -14f, maxValue = 14f, stepIncrement = 1f)]\u003Cbr\u003E                        public float mySlider= 0;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe type of the slider MUST be float. Doubles will throw an conversion error.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EminValue= -14f\u003C/strong\u003E sets the minimum value. It can be negative\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EmaxValue = 14f\u003C/strong\u003E ... you can guess that\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EmySlider= 0;\u003C/strong\u003E Assign a default value\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EstepIncrement = 1f\u003C/strong\u003E steps in which the slider will move\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EguiActive = true\u003C/strong\u003E see above\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EguiActiveEditor = true\u003C/strong\u003E see above\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003ECalling a function\u003C/em\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t\t[KSPEvent(guiName = \u0022Call func\u0022, guiActive = true, guiActiveEditor = true)]\u003Cbr\u003E                    public void toggleInflate () {\u003Cbr\u003E                        ...\u003Cbr\u003E                    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EguiActive = true\u003C/strong\u003E see above\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EguiActiveEditor = true\u003C/strong\u003E see above\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EShowing a variable\u003C/em\u003E\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t\t[KSPField(isPersistant = true, guiActive = true, guiActiveEditor = false, guiName = \u0022My Var\u0022)]\u003Cbr\u003E\t\t    public float myVar = 12f;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAll the parts here have beenexplained above.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#0000FF;\u0022\u003E\u003Cem\u003E\u003Cstrong\u003EKnown or unknown issues\u003C/strong\u003E\u003C/em\u003E\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EThe sliders seem to show up in the editor always, even if you set \u003Cstrong\u003EguiActiveEditor = false\u003C/strong\u003E. Does anybody know how to prevent this?\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022color:#FF0000;\u0022\u003E\u003Cstrong\u003EPlease post whatever you know here. I will add the info to thie top post. THANKS!\u003C/strong\u003E\u003C/span\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-12-24T09:14:38Z\u0022 title=\u002212/24/2013 09:14  AM\u0022 data-short=\u002210 yr\u0022\u003EDecember 24, 2013\u003C/time\u003E by dtobi\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2013-12-24T10:02:46Z","Content":"\n\u003Cp\u003EAh, I meant to do a post like this. Good to see someone went forth already.\u003C/p\u003E\n"},{"CreatedByName":"FlowerChild","CreatedById":74289,"CreatedDateTime":"2013-12-30T00:46:12Z","Content":"\n\u003Cp\u003EYeah, excellent thread idea. I was just browsing looking for something on this subject \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI don\u0027t have any info to add to this yet, but I was wondering if anyone had discovered a way to disable existing tweakables on parts.\u003C/p\u003E\u003Cp\u003EFor example, I have some custom engines that I\u0027d like to disable the thrust limiter tweakble on either through code or config. Any ideas?\u003C/p\u003E\n"},{"CreatedByName":"FlowerChild","CreatedById":74289,"CreatedDateTime":"2014-02-12T20:01:26Z","Content":"\n\u003Cp\u003ESorry for the necro here, but just wanted to answer my own question above, as I finally figured out the solution and thought it might help others down the road that may comes across this thread.\u003C/p\u003E\u003Cp\u003EGiven the tweakables are just KSPFields, something like the following will serve to disable stock tweakables:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E                    tempEngineModule.Fields[\u0022thrustPercentage\u0022].guiActiveEditor = false;\u003Cbr\u003E                    tempEngineModule.Fields[\u0022thrustPercentage\u0022].guiActive = false;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo, basically all you need is a reference to the module in question, and off you go. In my case, I\u0027ve decided to add a separate part module to engines where I want to have the thrust limiter disabled that scans through the other modules present in the part in OnStart(), and sets the thrustPercentage attributes for any ModuleEngines like above.\u003C/p\u003E\u003Cp\u003EFrom what I\u0027ve seen, all KSPFields that Squad uses are public, so it\u0027s just a matter of looking at the module in question and figuring out which variable is the internal representation of the field you wish to modify.\u003C/p\u003E\u003Cp\u003EAnyways, hope that helps someone else out.\u003C/p\u003E\n"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2014-02-14T18:44:07Z","Content":"\n\u003Cp\u003EThanks, that will be helpful.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-05-01T11:28:45Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dtobi\u0022 data-cite=\u0022dtobi\u0022\u003E\u003Cdiv\u003EThe sliders seem to show up in the editor always, even if you set \u003Cstrong\u003EguiActiveEditor = false\u003C/strong\u003E. Does anybody know how to prevent this?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAdding a scene value to the UI_FloatRange does the trick, e.g.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPField(isPersistant = true, guiActive = true, guiActiveEditor = true, guiName = \u0022My Slider\u0022) , UI_FloatRange(minValue = -14f, maxValue = 14f, stepIncrement = 1f, [B]scene = UI_Scene.Flight[/B])]\u003Cbr\u003Epublic float mySlider= 0;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe defined values are:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Epublic enum UI_Scene\u003Cbr\u003E{\u003Cbr\u003E    Editor = 1,\u003Cbr\u003E    Flight = 2,\u003Cbr\u003E    All = 255,\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"NavyFish","CreatedById":77044,"CreatedDateTime":"2014-05-04T01:37:57Z","Content":"\n\u003Cp\u003EI\u0027m having trouble displaying a KSP field for a nearby vessel:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[KSPField(guiActive = true, guiActiveEditor = true, guiName = \u0022Port Name:\u0022, isPersistant = true)]\u003Cbr\u003E        public string portName;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt does display properly for the active vessel. Any suggestions?\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2014-05-04T02:26:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NavyFish\u0022 data-cite=\u0022NavyFish\u0022\u003E\u003Cdiv\u003EI\u0027m having trouble displaying a KSP field for a nearby vessel:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[KSPField(guiActive = true, guiActiveEditor = true, guiName = \u0022Port Name:\u0022, isPersistant = true)]\u003Cbr\u003E        public string portName;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt does display properly for the active vessel. Any suggestions?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not sure that can be done. KSPEvent has a GUiActiveUnfocused clause, but KSPField doesn\u0027t. So you\u0027ll only get that for the active vessel unfortunately.\u003C/p\u003E\n"},{"CreatedByName":"NavyFish","CreatedById":77044,"CreatedDateTime":"2014-05-04T02:28:08Z","Content":"\n\u003Cp\u003EThat\u0027s too bad :/ Ah well. Thanks for the reply!\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2014-05-07T15:09:42Z","Content":"\n\u003Cp\u003EIs there any way to assign UI_FloatRange\u0027s minValue/maxValue through the use of variables?\u003C/p\u003E\n"},{"CreatedByName":"Biotronic","CreatedById":72381,"CreatedDateTime":"2014-05-07T18:17:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sirkut\u0022 data-cite=\u0022sirkut\u0022\u003E\u003Cdiv\u003EIs there any way to assign UI_FloatRange\u0027s minValue/maxValue through the use of variables?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EMy (and Gaius\u0027) \u003Ca href=\u0022https://github.com/Biotronic/GoodspeedTweakScale\u0022 rel=\u0022external nofollow\u0022\u003ETweakScale plugin\u003C/a\u003E does that. Code from \u003Ca href=\u0022https://github.com/Biotronic/GoodspeedTweakScale/blob/master/Scale.cs#L136\u0022 rel=\u0022external nofollow\u0022\u003EScale.cs around line 140\u003C/a\u003E:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E            var range = (UI_FloatRange)this.Fields[\u0022tweakScale\u0022].uiControlEditor;\u003Cbr\u003E            range.minValue = configValue(\u0022minScale\u0022, defaultValue: isFreeScale ? 0.5f : (float)scaleFactors.First());\u003Cbr\u003E            range.maxValue = configValue(\u0022maxScale\u0022, defaultValue: isFreeScale ? 2.0f : (float)scaleFactors.Last());\u003Cbr\u003E            range.stepIncrement = configValue(\u0022stepIncrement\u0022, defaultValue: 0.01f);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThere\u0027s also a uiControlFlight, which I assume is the same thing except while flying, but I haven\u0027t tested that.\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2014-05-07T18:45:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Biotronic\u0022 data-cite=\u0022Biotronic\u0022\u003E\u003Cdiv\u003EMy (and Gaius\u0027) \u003Ca href=\u0022https://github.com/Biotronic/GoodspeedTweakScale\u0022 rel=\u0022external nofollow\u0022\u003ETweakScale plugin\u003C/a\u003E does that. Code from \u003Ca href=\u0022https://github.com/Biotronic/GoodspeedTweakScale/blob/master/Scale.cs#L136\u0022 rel=\u0022external nofollow\u0022\u003EScale.cs around line 140\u003C/a\u003E:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E            var range = (UI_FloatRange)this.Fields[\u0022tweakScale\u0022].uiControlEditor;\u003Cbr\u003E            range.minValue = configValue(\u0022minScale\u0022, defaultValue: isFreeScale ? 0.5f : (float)scaleFactors.First());\u003Cbr\u003E            range.maxValue = configValue(\u0022maxScale\u0022, defaultValue: isFreeScale ? 2.0f : (float)scaleFactors.Last());\u003Cbr\u003E            range.stepIncrement = configValue(\u0022stepIncrement\u0022, defaultValue: 0.01f);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThere\u0027s also a uiControlFlight, which I assume is the same thing except while flying, but I haven\u0027t tested that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAwesome. Thanks!\u003C/p\u003E\n"},{"CreatedByName":"Xty","CreatedById":94977,"CreatedDateTime":"2014-05-07T22:19:14Z","Content":"\n\u003Cp\u003EWhen I try to put \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPField(isPersistant = false, guiActive = true, guiActiveEditor = true, guiName = \u0022My Bool\u0022),\u003Cbr\u003E\t\t\tUI_Toggle(disabledText=\u0022Disabled\u0022, enabledText=\u0022Enabled\u0022)]\u003C/pre\u003E\u003Cp\u003E into my addon code I get errors, \u0022\u0027KSPField\u0027 does not contain a definition for guiActiveEditor\u0022 and \u0022The type or namespace UI_Toggle could not be found\u0022, could anyone tell me why? Have these been removed or...?\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2014-05-07T22:36:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Xty\u0022 data-cite=\u0022Xty\u0022\u003E\u003Cdiv\u003EWhen I try to put \u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPField(isPersistant = false, guiActive = true, guiActiveEditor = true, guiName = \u0022My Bool\u0022),\u003Cbr\u003E\t\t\tUI_Toggle(disabledText=\u0022Disabled\u0022, enabledText=\u0022Enabled\u0022)]\u003C/pre\u003E\u003Cp\u003E into my addon code I get errors, \u0022\u0027KSPField\u0027 does not contain a definition for guiActiveEditor\u0022 and \u0022The type or namespace UI_Toggle could not be found\u0022, could anyone tell me why? Have these been removed or...?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThey are still there. Did you define a variable to go along with the KSPField declaration?\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2014-05-07T22:37:49Z","Content":"\n\u003Cp\u003EHow does one disable symmetry mode across multiple parts if one is to use a bool tweakable KSPField? I\u0027m finding that during the VAB they all share the same value but during flight I can change them individually.\u003C/p\u003E\n"},{"CreatedByName":"Xty","CreatedById":94977,"CreatedDateTime":"2014-05-07T22:44:58Z","Content":"\n\u003Cp\u003EAh, I re-added the required DLL references and now its working, I must have had outdated ones from before those things were added.\u003C/p\u003E\n"},{"CreatedByName":"Biotronic","CreatedById":72381,"CreatedDateTime":"2014-05-08T12:04:40Z","Content":"\n\u003Cp\u003EIs it possible to get a slider as with UI_FloatRange, but with a set of text values? Say for scale, you could have \u0027small\u0027, \u0027medium\u0027, \u0027large\u0027 instead of 0, 1, 2.\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2014-05-08T12:17:13Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Biotronic\u0022 data-cite=\u0022Biotronic\u0022\u003E\u003Cdiv\u003EIs it possible to get a slider as with UI_FloatRange, but with a set of text values? Say for scale, you could have \u0027small\u0027, \u0027medium\u0027, \u0027large\u0027 instead of 0, 1, 2.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh man that would be nice to have.\u003C/p\u003E\n"},{"CreatedByName":"Deadweasel","CreatedById":23123,"CreatedDateTime":"2014-05-08T15:50:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sirkut\u0022 data-cite=\u0022sirkut\u0022\u003E\u003Cdiv\u003EOh man that would be nice to have.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow would one go about adding tweakable colors to lights like the stock .23.5 lights?\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2014-05-08T16:38:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Deadweasel\u0022 data-cite=\u0022Deadweasel\u0022\u003E\u003Cdiv\u003EHow would one go about adding tweakable colors to lights like the stock .23.5 lights?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think you would just copy the module definition from one of the stock lights cfg. Maybe?\u003C/p\u003E\n"},{"CreatedByName":"Deadweasel","CreatedById":23123,"CreatedDateTime":"2014-05-08T17:13:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sirkut\u0022 data-cite=\u0022sirkut\u0022\u003E\u003Cdiv\u003EI think you would just copy the module definition from one of the stock lights cfg. Maybe?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI thought about that, but that would mean switching over to .23.5, and though I have it, I don\u0027t actively play it yet, as a few mods I love dearly aren\u0027t quite up with it yet.\u003C/p\u003E\u003Cp\u003EIn the meantime, since .23 has tweaks available, I thought maybe there\u0027d be a way to tap into that for the AviationLights mod. Specifically, I\u0027m considering a set of buttons to configure the lights from a set of color presets, so I could right-click and change a light into a red strobe or a green navlight in the VAB/SPH. The idea is that the mod would only need one skin to accommodate all possible variants, and would potentially help make it look a little more realistic.\u003C/p\u003E\n"},{"CreatedByName":"Biotronic","CreatedById":72381,"CreatedDateTime":"2014-05-08T21:29:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Biotronic\u0022 data-cite=\u0022Biotronic\u0022\u003E\u003Cdiv\u003EIs it possible to get a slider as with UI_FloatRange, but with a set of text values? Say for scale, you could have \u0027small\u0027, \u0027medium\u0027, \u0027large\u0027 instead of 0, 1, 2.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo I wrote some code. Any wizards here who can tell me why this doesn\u0027t work?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eusing System;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003E\u003Cbr\u003Enamespace TweakScale\u003Cbr\u003E{\u003Cbr\u003E    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Property | AttributeTargets.Field)]\u003Cbr\u003E    public class UI_TextRange : UI_Control\u003Cbr\u003E    {\u003Cbr\u003E        public string[] valueSet;\u003Cbr\u003E\u003Cbr\u003E        public UI_TextRange()\u003Cbr\u003E        {\u003Cbr\u003E            valueSet = new string[] { };\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public override void Load(ConfigNode node, object host)\u003Cbr\u003E        {\u003Cbr\u003E            base.Load(node, host);\u003Cbr\u003E            string tmp;\u003Cbr\u003E            if (UI_Control.ParseString(out tmp, node, \u0022valueSet\u0022, \u0022TextRange\u0022, \u0022No value provided\u0022))\u003Cbr\u003E            {\u003Cbr\u003E                valueSet = tmp.Split(\u0027,\u0027).Select(a =\u0026gt; a.Trim()).ToArray();\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E        public override void Save(ConfigNode node, object host)\u003Cbr\u003E        {\u003Cbr\u003E            node.AddValue(\u0022valueSet\u0022, string.Join(\u0022, \u0022, valueSet));\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E    [UI_TextRange]\u003Cbr\u003E    public class UIPartActionTextRange : UIPartActionFieldItem\u003Cbr\u003E    {\u003Cbr\u003E\u003Cbr\u003E        private float realValue;\u003Cbr\u003E        private float offset;\u003Cbr\u003E        private float tmpValue;\u003Cbr\u003E        public SpriteText fieldAmount;\u003Cbr\u003E        public SpriteText fieldName;\u003Cbr\u003E        public UIProgressSlider slider;\u003Cbr\u003E\u003Cbr\u003E        protected UI_TextRange progBarControl\u003Cbr\u003E        {\u003Cbr\u003E            get\u003Cbr\u003E            {\u003Cbr\u003E                return (UI_TextRange)control;\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public UIPartActionTextRange()\u003Cbr\u003E        {\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        private void Awake()\u003Cbr\u003E        {\u003Cbr\u003E            slider.SetValueChangedDelegate(new EZValueChangedDelegate(OnValueChanged));\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        private float GetFieldValue()\u003Cbr\u003E        {\u003Cbr\u003E            if (!this.isModule)\u003Cbr\u003E            {\u003Cbr\u003E                return this.field.GetValue\u0026lt;float\u0026gt;((object)this.part);\u003Cbr\u003E            }\u003Cbr\u003E            else\u003Cbr\u003E            {\u003Cbr\u003E                return this.field.GetValue\u0026lt;float\u0026gt;((object)this.partModule);\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        private void OnValueChanged(IUIObject obj)\u003Cbr\u003E        {\u003Cbr\u003E            this.tmpValue = Mathf.Lerp(0, this.progBarControl.valueSet.Length, this.slider.Value);\u003Cbr\u003E            this.offset = this.tmpValue % 1;\u003Cbr\u003E            if (this.offset != 0.0)\u003Cbr\u003E            {\u003Cbr\u003E                if (this.offset \u0026lt; 0.5)\u003Cbr\u003E                {\u003Cbr\u003E                    this.realValue = this.tmpValue - this.offset;\u003Cbr\u003E                }\u003Cbr\u003E                else\u003Cbr\u003E                {\u003Cbr\u003E                    this.realValue = this.tmpValue \u002B 1 - this.offset;\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E            else\u003Cbr\u003E            {\u003Cbr\u003E                this.realValue = this.tmpValue;\u003Cbr\u003E            }\u003Cbr\u003E            this.slider.Value = Mathf.InverseLerp(0, this.progBarControl.valueSet.Length, this.realValue);\u003Cbr\u003E            this.realValue = (float)Math.Round(this.realValue, 5);\u003Cbr\u003E            this.field.SetValue(this.realValue, this.field.host);\u003Cbr\u003E            if (this.scene == UI_Scene.Editor)\u003Cbr\u003E            {\u003Cbr\u003E                this.SetSymCounterpartValue((object)this.realValue);\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        private void SetSliderValue(float rawValue)\u003Cbr\u003E        {\u003Cbr\u003E            this.slider.Value = Mathf.Clamp01(rawValue / this.progBarControl.valueSet.Length);\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public override void Setup(UIPartActionWindow window, Part part, PartModule partModule, UI_Scene scene, UI_Control control, BaseField field)\u003Cbr\u003E        {\u003Cbr\u003E            base.Setup(window, part, partModule, scene, control, field);\u003Cbr\u003E            this.SetSliderValue(this.GetFieldValue());\u003Cbr\u003E            this.slider.AddValueChangedDelegate(new EZValueChangedDelegate(this.OnValueChanged));\u003Cbr\u003E            this.slider.ignoreDefault = true;\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public override void UpdateItem()\u003Cbr\u003E        {\u003Cbr\u003E            this.realValue = this.GetFieldValue();\u003Cbr\u003E            this.fieldName.Text = this.field.guiName;\u003Cbr\u003E            this.fieldAmount.Text = this.progBarControl.valueSet[(int)realValue];\u003Cbr\u003E            this.SetSliderValue(this.realValue);\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-08T21:41:11Z\u0022 title=\u002205/08/2014 09:41  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 8, 2014\u003C/time\u003E by Biotronic\u003C/strong\u003E\n\u003Cbr\u003EMore info, also a line had disappeared.\n\u003C/span\u003E\n"},{"CreatedByName":"Biotronic","CreatedById":72381,"CreatedDateTime":"2014-05-11T19:27:04Z","Content":"\n\u003Cp\u003EAfter giving up on my previous idea, I had a new one: How\u0027s about I just find that slider and change the text on it? So I do:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        public void UpdateWindowText()\u003Cbr\u003E        {\u003Cbr\u003E            var win = FindObjectsOfType\u0026lt;UIPartActionWindow\u0026gt;()\u003Cbr\u003E                .Where(a =\u0026gt; a.part == part).FirstOrDefault();\u003Cbr\u003E            if (win == null)\u003Cbr\u003E                return;\u003Cbr\u003E            var widget = win.GetComponentsInChildren\u0026lt;UIPartActionFloatRange\u0026gt;()\u003Cbr\u003E                .Where(a =\u0026gt; a.Control == UiControl)\u003Cbr\u003E                .FirstOrDefault();\u003Cbr\u003E\u003Cbr\u003E            if (widget == null)\u003Cbr\u003E                return;\u003Cbr\u003E\u003Cbr\u003E            widget.fieldAmount.text = \u0022Hello world!\u0022;\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd it works! ...sorta. I do get the text there, but it\u0027s immediately overwritten on the next frame. I guess UIPartActionItem.UpdateItem() is called every frame and recalculates it all?\u003C/p\u003E\n"},{"CreatedByName":"Biotronic","CreatedById":72381,"CreatedDateTime":"2014-05-11T19:32:51Z","Content":"\n\u003Cp\u003EFor a moment I thought I\u0027d gotten widget.fieldName.text to do what I wanted, but no.\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2014-05-12T20:18:57Z","Content":"\n\u003Cp\u003EAnyone have any luck disabling symmetry mode for tweakables? Currently if you place a part in symmetry mode and make a slider value change it goes across all parts.\u003C/p\u003E\n"}]}