{"TopicId":86021,"ForumId":29,"TopicTitle":"Version issues with interface dll","CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-10-03T23:06:32Z","PageNum":1,"Articles":[{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-10-03T23:06:32Z","Content":"\n\u003Cp\u003EHello everyone,\u003C/p\u003E\u003Cp\u003EI am making a plugin that is supposed to work as an API for other modders. The plugin is separated in two different assemblies:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003Ethe core assembly contains the actual code that needs to run (it is a ScenarioModule)\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Ean interface assembly that contains the relevant interfaces and a manager class to interact with the core\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe idea is that a mod that wishes to use this can put a dependency on the interface assembly and it can redistribute it safely: this way the dependency can always be satisfied even when the core is not installed, and we don\u0027t have the problem of multiple copies of the core.\u003C/p\u003E\u003Cp\u003EHowever, I noticed a problem. The core assembly also depends on the interface (since it must implement those interfaces); if I use the same version of the interface both in the core installation and in the client mod, everything works fine; but if the client mod uses an older version of the interface than the core was built against, then everything falls apart and every attempt to retrieve instances of the types instantiated by the core results in an InvalidCastException.\u003C/p\u003E\u003Cp\u003EDoes anybody know what I\u0027m doing wrong (also, I hope that was understandable)?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-10-04T02:03:56Z","Content":"\n\u003Cp\u003EYou might want to look into how taniwha handled things for KSPAPIExtensions.\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-10-04T06:31:51Z","Content":"\n\u003Cp\u003EAfter sleeping it off, I realized it was a lot simpler than I thought (conversely, I am much dumber than I thought).\u003C/p\u003E\u003Cp\u003EFor some reason I cannot really understand, old me decided it was a good idea to have VS use the automatic version number for both the core and the interface, even though the interface didn\u0027t change at all between builds.\u003C/p\u003E\u003Cp\u003EGuess what? Just switching to manual version numbers has solved the issue. Well, kind of, since it would still happen should the interface change, but that\u0027s going to happen a lot more rarely and that gives me a lot of time to understand how KAE solves it \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}