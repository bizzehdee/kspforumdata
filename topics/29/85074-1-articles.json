{"TopicId":85074,"ForumId":29,"TopicTitle":"ModuleDeployableSolarPanel - How to Constrain Pivot?","CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-20T19:58:32Z","PageNum":1,"Articles":[{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-20T19:58:32Z","Content":"\n\u003Cp\u003EHow do I constrain the pivot axis to prevent this situation?\u003C/p\u003E\u003Cp\u003EBoth the plane of the solar panels and the suncatcher mesh face in the direction of the green line before attempting to track the sun. \u003C/p\u003E\u003Cp\u003EThe suncatcher mesh is non-rendered. As an experiment, I applied a collision mesh to the suncatcher mesh to determine if that would prevent this. The red-circle is the pivot. There is also a collision mesh that surrounds the vertical truss section; I ensured all face normals faced out.\u003C/p\u003E\u003Cp\u003EIn this image, the sun is to the left of this position.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/q2M8bak.jpg\u0022 alt=\u0022q2M8bak.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EMy part.cfg file:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003EMODULE\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E name = ModuleDeployableSolarPanel\u003C/p\u003E\u003Cp\u003E animationName = Scene\u003C/p\u003E\u003Cp\u003E resourceName = ElectricCharge\u003C/p\u003E\u003Cp\u003E sunTracking = true\u003C/p\u003E\u003Cp\u003E raycastTransformName = suncatcher\u003C/p\u003E\u003Cp\u003E pivotName = pivot\u003C/p\u003E\u003Cp\u003E chargeRate = 12\u003C/p\u003E\u003Cp\u003E powerCurve\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E key = 206000000000 0 0 0\u003C/p\u003E\u003Cp\u003E key = 13599840256 1 0 0\u003C/p\u003E\u003Cp\u003E key = 68773560320 0.5 0 0\u003C/p\u003E\u003Cp\u003E key = 0 10 0 0\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003EEDIT: With a special thanks to \u003Cstrong\u003Eraidernick \u003C/strong\u003Efor his help. Read the thread to see how he resolved the problem.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-22T13:06:41Z\u0022 title=\u002209/22/2014 01:06  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 22, 2014\u003C/time\u003E by Apollo13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-09-20T20:42:16Z","Content":"\n\u003Cp\u003EIt\u0027s not a matter of constraining it. The panel only rotates on one axis, you have the gameobject in unity facing in the wrong direction.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-20T21:08:11Z","Content":"\n\u003Cp\u003EI just went into Unity editor. Selected the GameObject, and entered 180 for the Y rotation. i still have the problem. How do I correct this in Unity?\u003C/p\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-09-20T21:22:25Z","Content":"\n\u003Cp\u003EThe panel rotates along the \u0022green\u0022 axis in unity. You can\u0027t rotate it in unity, when you import the mesh from blender/3dsmax the pivot point has to already be facing in the correct direction. Rotate it in your 3d editor and bake that rotation before importing to unity.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-20T21:27:37Z","Content":"\n\u003Cp\u003Ethank you. will do. when you say green axis, I assume that is Unity\u0027s Y-axis, not the green axis in my image.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-20T21:29:43Z\u0022 title=\u002209/20/2014 09:29  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 20, 2014\u003C/time\u003E by Apollo13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-09-20T21:40:47Z","Content":"\n\u003Cp\u003EYes, the fact that unity reverses the axis on import pisses me off so I usually refer to them by color. No idea why it does this.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-20T22:00:29Z","Content":"\n\u003Cp\u003EI just went into Blender and rotated the entire part 90 degrees about the Z-axis (Unity\u0027s Y-axis). I still have the problem. I\u0027m obviously missing something very basic.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/kfhbsv3w4q99927/solarB.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003EMy Blender file\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-20T22:04:38Z\u0022 title=\u002209/20/2014 10:04  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 20, 2014\u003C/time\u003E by Apollo13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-09-20T22:28:54Z","Content":"\n\u003Cp\u003EI fixed it for you. Use \u0022rotate\u0022 as the pivot name instead of \u0022pivot\u0022 and try this out: \u003Ca href=\u0022https://www./?rbwiq0sr5qbbonl\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www./?rbwiq0sr5qbbonl\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIn blender you can change the transformation orientation to \u0022local\u0022 instead of \u0022global\u0022 to see the direction the transforms are facing.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-20T22:37:27Z\u0022 title=\u002209/20/2014 10:37  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 20, 2014\u003C/time\u003E by raidernick\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-20T23:37:55Z","Content":"\n\u003Cp\u003EThank you very much. that worked perfectly. Now, I\u0027ve got to understand what you did so I can replicate that success.\u003C/p\u003E\u003Cp\u003EAlso, I\u0027ve got to work on the collision meshes. When the panel is extended, it doesn\u0027t collide, like the stock solar panels do.\u003C/p\u003E\u003Cp\u003EQuestions: \u003C/p\u003E\u003Cp\u003E1) you added an \u0022empty\u0022 (rotate). Why?\u003C/p\u003E\u003Cp\u003E2) Both the local and global transformation orientations are the same when I select \u0022rotate\u0022. How did you do that?\u003C/p\u003E\u003Cp\u003EWhen I switch between local and global on my own models, the arrows change.\u003C/p\u003E\u003Cp\u003EHow did local versus global allow you to fix this?\u003C/p\u003E\u003Cp\u003E3) The \u0022rotate\u0022 empty is a child of the panel It is the parent another empty (pivot main) which is the parent of of the pivot. Why these relationships? Why isn\u0027t the empty the parent of all?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-21T00:09:02Z\u0022 title=\u002209/21/2014 12:09  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 21, 2014\u003C/time\u003E by Apollo13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-09-21T00:05:15Z","Content":"\n\u003Cp\u003E1) I added a rotate because you already baked the rotation on pivot to the wrong direction and flipping it would require adjusting the rotation of each child object(the panels) and redoing the entire animation. You don\u0027t need to do this if you have it facing the right way from the start.\u003C/p\u003E\u003Cp\u003E2) They shouldn\u0027t be the same, the rotate transform is rotated 90 degrees relative to the pivot transform.\u003C/p\u003E\u003Cp\u003E3) The middle empty pivot object I added was because when I parented rotate to your pivot it screwed up the rotation of the panel, you won\u0027t need this if you do it right from the start. All you need is an empty game object as the pivot(facing the correct way) and the child objects being the rest of the panel.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-21T00:13:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003EAll you need is an empty game object as the pivot(facing the correct way) and the child objects being the rest of the panel.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHow do I know if an objects pointed the correct direction? How do I ensure I start out right?\u003C/p\u003E\u003Cp\u003EBy \u0022empty game object\u0022 (in terms of Blender), I don\u0027t understand.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-21T00:18:23Z\u0022 title=\u002209/21/2014 12:18  AM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 21, 2014\u003C/time\u003E by Apollo13\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"raidernick","CreatedById":97711,"CreatedDateTime":"2014-09-21T01:22:36Z","Content":"\n\u003Cp\u003ECreate an \u0022empty\u0022 plain axis, set the transformation orientation to local for that object, this will be the pivot. The panel will rotate along the Y axis in blender.\u003C/p\u003E\n"},{"CreatedByName":"Apollo13","CreatedById":74572,"CreatedDateTime":"2014-09-21T03:03:54Z","Content":"\n\u003Cp\u003EOK. I\u0027ll give that a try with a test part. Thank you for the information you\u0027ve provide. I especially appreciate your patience.\u003C/p\u003E\u003Cp\u003ETomorrow, I plan to publish this mod on the Hex Truss thread. The ReadMe.txt file includes a paragraph acknowledging and thanking you for your help.\u003C/p\u003E\n"},{"CreatedByName":"Randazzo","CreatedById":136468,"CreatedDateTime":"2015-05-19T05:20:58Z","Content":"\n\u003Cp\u003EBit of a necro, but after spending 6 humiliating hours in defeat, the information in this thread paved the way to glorious victory. \u003C/p\u003E\u003Cp\u003EOk, that\u0027s dramatic, but it was very helpful.\u003C/p\u003E\n"}]}