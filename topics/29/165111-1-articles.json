{"TopicId":165111,"ForumId":29,"TopicTitle":"Importing/starting animations in KSP","CreatedByName":"Katten","CreatedById":180392,"CreatedDateTime":"2017-09-03T07:48:06Z","PageNum":1,"Articles":[{"CreatedByName":"Katten","CreatedById":180392,"CreatedDateTime":"2017-09-03T07:48:06Z","Content":"\n\u003Cp\u003E\nHello!\u003Cbr\u003E\u003Cbr\u003E\nI\u0027m having trouble starting (my first) animation in KSP.\u003Cbr\u003E\u003Cbr\u003E\nThe animation (\u0022deploy\u0022) works fine in Blender, exported as FBX, looks okey in Unity asset preview.\u00A0I don\u0027t know how to test the animation in Unity after adding the asset to the scene tho.\u00A0\u003Cbr\u003E\u003Cbr\u003E\nI have created a cfg-file that contains the following code:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\nMODULE\u003Cbr\u003E\n{\u003Cbr\u003E\nname = ModuleAnimateGeneric\u003Cbr\u003E\nanimationName = deploy\u003Cbr\u003E\nstartEventGUIName = Deploy\u003Cbr\u003E\nendEventGUIName = Retract\u003Cbr\u003E\nanimSwitch = false\u003Cbr\u003E\nisOneShot = false\u003Cbr\u003E\nactionGUIName = MyToggle\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nIn the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E, I get a button named \u0022Toggle\u0022, but not the names I specified above.\u003Cbr\u003E\u003Cbr\u003E\nI get the following output in ksp.log when clicking Toggle:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n[EXC 09:18:09.965] NullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E\n\u00A0\u00A0 \u00A0ModuleAnimateGeneric.UpdateAnimSwitch ()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0ModuleAnimateGeneric.Toggle ()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0BaseEvent.Invoke ()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UIPartActionButton.OnClick ()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.Events.InvokableCall.Invoke (System.Object[] args)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.Events.InvokableCallList.Invoke (System.Object[] parameters)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.Events.UnityEventBase.Invoke (System.Object[] parameters)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.Events.UnityEvent.Invoke ()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.UI.Button.Press ()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.UI.Button.OnPointerClick (UnityEngine.EventSystems.PointerEventData eventData)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.EventSystems.ExecuteEvents.Execute (IPointerClickHandler handler, UnityEngine.EventSystems.BaseEventData eventData)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.EventSystems.ExecuteEvents.Execute[IPointerClickHandler] (UnityEngine.GameObject target, UnityEngine.EventSystems.BaseEventData eventData, UnityEngine.EventSystems.EventFunction\u00601 functor)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.EventSystems.EventSystem:Update()\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nI see\u00A0the following as part of the loading, which doesn\u0027t occur if I don\u0027t have the ModuleAnimateGeneric in there:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n[LOG 09:40:33.636] PartLoader: Part \u0027SpaceCat/Goblins United/Parts/Engine/gu_mt1-0_beetle/gu_mt1_0_beetle\u0027 has no database record. Creating.\u003Cbr\u003E\n[LOG 09:40:33.671] DragCubeSystem: Creating drag cubes for part \u0027gu.mt1.0.beetle\u0027\u003Cbr\u003E\n[EXC 09:40:33.723] IndexOutOfRangeException: Array index is out of range.\u003Cbr\u003E\n\u00A0\u00A0 \u00A0ModuleAnimateGeneric.AssumeDragCubePosition (System.String name)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0DragCubeSystem\u002B.MoveNext ()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.SetupCoroutine.InvokeMoveNext (IEnumerator enumerator, IntPtr returnValueAddress)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.MonoBehaviour:StartCoroutine(IEnumerator)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0:MoveNext()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.MonoBehaviour:StartCoroutine(IEnumerator)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0:MoveNext()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.MonoBehaviour:StartCoroutine(IEnumerator)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0:MoveNext()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.MonoBehaviour:StartCoroutine(IEnumerator)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0:MoveNext()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.MonoBehaviour:StartCoroutine(IEnumerator)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0PartLoader:StartLoad()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0:MoveNext()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.SetupCoroutine:InvokeMoveNext(IEnumerator, IntPtr)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nAny ideas? =S\u003Cbr\u003E\u003Cbr\u003E\nEDIT:\u003Cbr\u003E\u003Cbr\u003E\nIn now changed Unity -\u0026gt; Import Preview -\u0026gt; Rig -\u0026gt; Animation Type\u00A0from Generic to Legacy according to a tutorial. Is that still needed? The .mu file grew by some 20kb. Reloaded the game, but I seem to have the same issues showing up.\u003Cbr\u003E\u003Cbr\u003E\nAdding the log snip when the ship is loading in \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n[ERR 10:00:34.221] Module ModuleAnimateGeneric threw during OnStart: System.IndexOutOfRangeException: Array index is out of range.\u003Cbr\u003E\n\u00A0 at ModuleAnimateGeneric.OnStart (StartState state) [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u00A0\u003Cbr\u003E\n\u00A0 at Part.ModulesOnStart () [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n[LOG 10:00:34.415] DragCubeSystem: Rendering procedural drag for fairingSize1\u003Cbr\u003E\n[EXC 10:00:34.624] NullReferenceException: Object reference not set to an instance of an object\u003Cbr\u003E\n\u00A0\u00A0 \u00A0ModuleAnimateGeneric.FixedUpdate ()\u003Cbr\u003E\n[LOG 10:00:34.640] Autogen thumbnail for C:/Program Files (x86)/Steam/steamapps/common/Kerbal Space Program/KSP_Data/../thumbs/Testing!_VAB_Auto-Saved Ship.png from C:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program\\saves\\Testing!\\Ships\\\u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E\\Auto-Saved Ship.craft\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-09-03T08:07:06Z\u0022 title=\u002209/03/2017 08:07  AM\u0022 data-short=\u00226 yr\u0022\u003ESeptember 3, 2017\u003C/time\u003E by Katten\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Katten","CreatedById":180392,"CreatedDateTime":"2017-09-11T04:07:53Z","Content":"\n\u003Cp\u003E\nSolved! I think the crucial step was to rename the animation in Unity editor from \u0022Armature:open\u0022 to just \u0022open\u0022.\n\u003C/p\u003E\n"}]}