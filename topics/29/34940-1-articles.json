{"TopicId":34940,"ForumId":29,"TopicTitle":"right click GUI? and GUI in General","CreatedByName":"pilotdes","CreatedById":71558,"CreatedDateTime":"2013-06-27T01:59:59Z","PageNum":1,"Articles":[{"CreatedByName":"pilotdes","CreatedById":71558,"CreatedDateTime":"2013-06-27T01:59:59Z","Content":"\n\u003Cp\u003Eanyone one know what the code is to A. create a small gui, and B. know how to make that small GUI appear when the button in the right-click window is pressed, and C. know how to make the Right-Click GUI appear?\u003C/p\u003E\n"},{"CreatedByName":"sirkut","CreatedById":57229,"CreatedDateTime":"2013-06-27T03:07:31Z","Content":"\n\u003Cp\u003EGUI I haven\u0027t done yet but here\u0027s the \u0027right-click\u0027 window on a part.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E //motion lock start\u003C/p\u003E\u003Cp\u003E [KSPEvent(guiActive = true, guiName = \u0022Engage Lock\u0022)]\u003C/p\u003E\u003Cp\u003E public void Activate()\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EisRotationLock = true;\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E Events[\u0022Activate\u0022].active = false;\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E Events[\u0022Deactivate\u0022].active = true;\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E [KSPEvent(guiActive = true, guiName = \u0022Disengage Lock\u0022, active = false)]\u003C/p\u003E\u003Cp\u003E public void Deactivate()\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003EisRotationLock = false;\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E Events[\u0022Activate\u0022].active = true;\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E Events[\u0022Deactivate\u0022].active = false;\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E //motion lock stop\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2013-06-27T04:14:19Z","Content":"\n\u003Cp\u003EA) See \u003Ca href=\u0022https://github.com/taraniselsu/TacLib/blob/master/Source/Window.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacLib/blob/master/Source/Window.cs\u003C/a\u003E and what evilC has done with it: \u003Ca href=\u0022https://github.com/evilC/TacLib/blob/master/Source/TacWindowTest.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/evilC/TacLib/blob/master/Source/TacWindowTest.cs\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBasically you use GUILayout.Window to tell Unity to display the window (\u003Ca href=\u0022http://docs.unity3d.com/Documentation/ScriptReference/GUILayout.Window.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://docs.unity3d.com/Documentation/ScriptReference/GUILayout.Window.html\u003C/a\u003E).\u003C/p\u003E\u003Cp\u003EBut you need to do that within Unity\u0027s OnGUI() method or in a method called by KSP\u0027s RenderingManager (\u003Ca href=\u0022https://github.com/taraniselsu/TacLib/blob/master/Source/Window.cs#L76\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/taraniselsu/TacLib/blob/master/Source/Window.cs#L76\u003C/a\u003E). The second way is recommended more, because you can properly hide your window when the user hides the UI (presses F2) and when the PauseMenu is displayed.\u003C/p\u003E\u003Cp\u003EB \u0026amp; C) See \u003Ca href=\u0022https://github.com/evilC/TacLib/blob/master/Source/TacWindowTest.cs#L71\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/evilC/TacLib/blob/master/Source/TacWindowTest.cs#L71\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EBasically you mark a method with the KSPEvent attribute. That makes it show up when you right click a part. Inside that method, do something to show or hide your window. evilC\u0027s code is calling SetVisible(true) on the Window class which makes sure the window is added to KSP\u0027s post-draw queue.\u003C/p\u003E\n"}]}