{"TopicId":62594,"ForumId":29,"TopicTitle":"Getting Crew Variable and Adding Resources: Please help!","CreatedByName":"Naten","CreatedById":70923,"CreatedDateTime":"2014-02-09T00:22:29Z","PageNum":1,"Articles":[{"CreatedByName":"Naten","CreatedById":70923,"CreatedDateTime":"2014-02-09T00:22:29Z","Content":"\n\u003Cp\u003EI\u0027m developing a plugin now... \u003C/p\u003E\u003Cp\u003EIt\u0027s going well, actually, except crew detection... ugh.\u003C/p\u003E\u003Cp\u003EI want to make the part generate \u0022Methane\u0022 as a Resource (\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif\u0022 alt=\u0022:sticktongue:\u0022\u003E) and put it in a small, internal container type thingy in the part before it goes to a bigger one, which I\u0027m pretty sure the default resource system allows for.\u003C/p\u003E\u003Cp\u003EI just can\u0027t figure out how to detect crew, looking at source codes with crew detection didn\u0027t work. Oh, well...\u003C/p\u003E\u003Cp\u003EAny help, anyone? Anyone? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EAnd what about resource generation? I know, I know: ModuleGenerator in the stock game... but how do I make it generate ONLY when there\u0027s a Kerbal in the seat?\u003C/p\u003E\u003Cp\u003ECould I do a Required Resource type thing in the crew seat\u0027s crew module, and then make a negative value? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks in advance! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EFYI: Yes, this\u003Cem\u003E will \u003C/em\u003Ebe a toilet seat. For the lolz, guys. And for those Sandboxers who love experimenting with mods as their endgame (kinda like me, you\u0027re not alone! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)\u003C/p\u003E\u003Cp\u003EThanks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E-Naten\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-02-09T00:27:21Z\u0022 title=\u002202/09/2014 12:27  AM\u0022 data-short=\u002210 yr\u0022\u003EFebruary 9, 2014\u003C/time\u003E by Naten\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Chronothan","CreatedById":58133,"CreatedDateTime":"2014-02-09T04:46:50Z","Content":"\n\u003Cp\u003EI am working on something where I have to identify which Kerbals IVA is active and I\u0027m having a hard time figuring that out. I can\u0027t find a reference to which Kerbal the camera is attached to.\u003C/p\u003E\u003Cp\u003E\u003Cem\u003EPartReference\u003C/em\u003E.ProtoModuleCrew gives you a list of ProtoCrewMembers in that particular part reference. That might help you.\u003C/p\u003E\n"},{"CreatedByName":"Naten","CreatedById":70923,"CreatedDateTime":"2014-02-09T16:06:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Chronothan\u0022 data-cite=\u0022Chronothan\u0022\u003E\u003Cdiv\u003EI am working on something where I have to identify which Kerbals IVA is active and I\u0027m having a hard time figuring that out. I can\u0027t find a reference to which Kerbal the camera is attached to.\u003Cp\u003E\u003Cem\u003EPartReference\u003C/em\u003E.ProtoModuleCrew gives you a list of ProtoCrewMembers in that particular part reference. That might help you.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan I convert this into a Boolean? And is this a list\u0026lt;\u0026gt; thingy? I dunno hau. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EHere\u0027s something, could this work? Thanks! \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Enamespace NatenMethaneFuels:Extensions\u003Cbr\u003E{\u003Cbr\u003E...public class NatenKerbalFart : PartModule\u003Cbr\u003E...{\u003Cbr\u003E......private void OnUpdate()\u003Cbr\u003E......{\u003Cbr\u003E.........if (list\u0026lt;PartReference.ProtoModuleCrew\u0026gt; !=0)\u003Cbr\u003E.........{\u003Cbr\u003E............this.part.RequestResource(\u0022MethaneWaste\u0022, -1);\u003Cbr\u003E.........}\u003Cbr\u003E......}\u003Cbr\u003E...}\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Chronothan","CreatedById":58133,"CreatedDateTime":"2014-02-09T21:02:23Z","Content":"\n\u003Cp\u003EI don\u0027t know if it returns null when there is no crew or not but I assume this might work:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPart yourPartReference = yourPart;\u003Cbr\u003E\u003Cbr\u003Eif ([I]yourPartReference[/I].ProtoModuleCrew.count \u0026gt; 0)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd this would cover you if in case it returns null with no crew\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif ([I]yourPartReference[/I].ProtoModuleCrew != null \u0026amp;\u0026amp; [I]yourPartReference[/I].ProtoModuleCrew.count \u0026gt; 0 )\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EYou don\u0027t need the List\u0026lt;\u0026gt; stuff in there unless your creating new list. You\u0027re just getting a reference to one.\u003C/p\u003E\u003Cp\u003EObviously, \u0027\u003Cem\u003EyourPartReference\u003C/em\u003E\u0027 will need to be a reference to your part attached to the ActiveVessel. Something similar to this can get you that\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EPart yourPartReference;\u003Cbr\u003Eforeach (Part part in FlightGlobals.ActiveVessel.parts)\u003Cbr\u003E {\u003Cbr\u003E     if (part.name.Contains(\u0022yourPartName\u0022))\u003Cbr\u003E     {\u003Cbr\u003E         yourPartReference = part\u003Cbr\u003E     }\u003Cbr\u003E }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENone of the above is tested, so it may need some tweaking to work.\u003C/p\u003E\n"},{"CreatedByName":"Naten","CreatedById":70923,"CreatedDateTime":"2014-02-10T22:29:27Z","Content":"\n\u003Cp\u003EI\u0027m really sorry I had to ask this, but what is a part reference?\u003C/p\u003E\u003Cp\u003EIs it the part config file\u0027s \u0022part = THIS\u0022 value, or do I need to add it with the below thing... oh. I\u0027m starting t oget it.\u003C/p\u003E\u003Cp\u003EIs \u0022yourPartName\u0022 defined by the part.cfg? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EThanks. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003E-Naten\u003C/p\u003E\n"},{"CreatedByName":"Chronothan","CreatedById":58133,"CreatedDateTime":"2014-02-10T23:00:40Z","Content":"\n\u003Cp\u003EA part reference is a variable of type Part that contains an instance of the part object in game. Read up on some object-oriented programming to really understand what an object and instance is. But you\u0027ll need to find the instance of your part attached to your vessel object to do anything useful. The Part object is created using values from the cfg, like the part name, the modules it has, what model it uses. So, yes, \u0027yourPartName\u0027 is set by the name you set in the cfg.\u003C/p\u003E\n"}]}