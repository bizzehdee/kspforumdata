{"TopicId":106836,"ForumId":29,"TopicTitle":"Why not work IsPrimary","CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:03:41Z","PageNum":1,"Articles":[{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:03:41Z","Content":"Hello i have this source:\n\n**TutorialPlugin.cs:**\n\n    using System;using System.Collections.Generic;using System.Linq;using System.Text;using UnityEngine;using TutorialPlugin.Extensions;namespace TutorialPlugin{    public class TutorialPlugin : PartModule    {        private Rect _windowPosition = new Rect();        private GUIStyle _windowsStyle, _labelStyle;        private bool _hasInitStyles = false;        public override void OnStart(StartState state)        {            if (state != StartState.Editor)                if (!_hasInitStyles) InitStyles();            RenderingManager.AddToPostDrawQueue(0, OnDraw);        }        private void OnDraw()        {            if (this.vessel == FlightGlobals.ActiveVessel)                _windowPosition = GUILayout.Window(10, _windowPosition, OnWindow, \u0022Hello v 0.0.1a Dev\u0022, _windowsStyle);        }        private void OnWindow(int windowId)        {            GUILayout.BeginHorizontal();            GUILayout.Label(\u0022hmmmmm\u0022, _labelStyle);            GUILayout.EndHorizontal();            GUI.DragWindow();        }        private void InitStyles()        {            _windowsStyle = new GUIStyle(HighLogic.Skin.window);            _windowsStyle.fixedWidth = 250f;            _labelStyle = new GUIStyle(HighLogic.Skin.label);            _labelStyle.stretchWidth = true;            _hasInitStyles = true;        }    }}\n\n**PartExtensions.cs:**\n\n    using System.Collections.Generic;using UnityEngine;namespace TutorialPlugin.Extensions{    public static class PartExtensions    {        public static bool IsPrimary(this Part thisPart, List partsList, int moduleClassID)        {            foreach (Part part in partsList)            {                if (part == thisPart)                    return true;                else                    break;            }            return false;        }    }}\n\nWhere is error, all code is on youtube tutorial ! why is not working ?"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-05-02T11:08:06Z","Content":"Have you added the module \u0022TutorialPlugin\u0022 to any parts?\n\nEDIT\n\nThis looks like the sort of thing you probably want to run using the KSPAddon framework rather than a PartModule (part modules are good if you need multiple instances, KSPAddon is easier for single instances). [See this simple plugin as an example](https://github.com/Crzyrndm/SAS-Reset/blob/master/SAS%20Reset/SAS%20Reset/SASReset.cs#L7)\n\n**Edited \u003Ctime datetime=\u00222015-05-02T11:12:50Z\u0022 title=\u002205/02/2015 11:12  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 2, 2015\u003C/time\u003E by Crzyrndm**"},{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:15:46Z","Content":"yes, if i ihave only TutorialPlugin.cs with out line \u0022using TutorialPlugin.Extensions\u0022 and remove file PartExtensions.cs then work. on part.cfg i add MODULE { name = TutorialPlugin }"},{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:16:29Z","Content":"Yes: \n\nMODULE\n\n {\n\n name = TutorialPlugin\n\n }"},{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T11:33:36Z","Content":"if i delete PartExtensions.cs work, if i add 2 same component erroor windows. PartExtensions.cs is bug fix on place few same component.\n\n- - - Updated - - -\n\nwhere i found normal documentation with examples as for php (php.net), but on KSP."},{"CreatedByName":"ce4aser","CreatedById":78083,"CreatedDateTime":"2015-05-02T14:08:02Z","Content":"why not work ?"},{"CreatedByName":"udk_lethal_d0se","CreatedById":62149,"CreatedDateTime":"2015-05-02T19:04:07Z","Content":"Your main class has an argument missing in one of your if statements, I think you may have missed part of the video tutorials.\n\nThis original code:\n\n     private void OnDraw()        {            if (this.vessel == FlightGlobals.ActiveVessel)                _windowPosition = GUILayout.Window(10, _windowPosition, OnWindow, \u0022Hello v 0.0.1a Dev\u0022, _windowsStyle);        }\n\nShould be this:\n\n    private void OnDraw()        {            if (this.vessel == FlightGlobals.ActiveVessel \u0026\u0026 this.part.IsPrimary(this.vessel.parts, this.ClassID))                _windowPosition = GUILayout.Window(10, _windowPosition, OnWindow, \u0022Hello v 0.0.1a Dev\u0022, _windowsStyle);        }\n\nThe section you are missing is an addition to the IF statement:\n\n    this.part.IsPrimary(this.vessel.parts, this.ClassID)\n\nHope this helps, sorry if there are any typo\u0027s; go back to the video series and have a look, I\u0027ve recently watched through them and know your code is incomplete."}]}