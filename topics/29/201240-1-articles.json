{"TopicId":201240,"ForumId":29,"TopicTitle":"Wings and how to directly control them","CreatedByName":"MaverickWoe","CreatedById":152650,"CreatedDateTime":"2021-03-25T21:57:18Z","PageNum":1,"Articles":[{"CreatedByName":"MaverickWoe","CreatedById":152650,"CreatedDateTime":"2021-03-25T21:57:18Z","Content":"\n\u003Cp\u003E\nHey people.\n\u003C/p\u003E\n\u003Cp\u003E\nFirst, sorry for the wing vocabulary, I\u0027m not entirely sure I\u0027m using it right.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027d like to understand if it is possible to take control, through the API, of the angle of a controllable air surface without using the Flight control Pitch / Yaw / Roll inputs.\u003Cbr\u003E\nIs there a way to directly set an angle on any controllable flap/wing ?\n\u003C/p\u003E\n\u003Cp\u003E\nI see that I can fetch the result of the drag and lift vectors (liftForce \u0026amp; dragForce of ModuleLiftingSurface) which is great, but can\u0027t see any input. (It is not the deploy feature I think)\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m also slightly confused between the class ModuleLiftingSurface, ModuleControlSurface and ModuleAeroSurface and not sure if one of those three allows to do what I\u0027m looking for.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyone is familiar with what I\u0027m looking for ?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"MaverickWoe","CreatedById":152650,"CreatedDateTime":"2021-03-27T19:33:01Z","Content":"\n\u003Cp\u003E\nStill very confused on this.\n\u003C/p\u003E\n\u003Cp\u003E\nI tried changing the winglet\u0027s \u0022.part.orgRot.z\u0022 or \u0022.angleOfAttack\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nNone of them seem to have an effect on the part.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m wondering if it\u0027s possible at all...\n\u003C/p\u003E\n"},{"CreatedByName":"MaverickWoe","CreatedById":152650,"CreatedDateTime":"2021-04-02T09:51:52Z","Content":"\n\u003Cp\u003E\nHi guys. Just bumping up the question.\n\u003C/p\u003E\n\u003Cp\u003E\nDo you know how to control the angles of a wing, similarly to how you can control the thrust of each engine individually ? Thanks\n\u003C/p\u003E\n"},{"CreatedByName":"wasml","CreatedById":120438,"CreatedDateTime":"2021-04-10T22:31:16Z","Content":"\n\u003Cp\u003E\nI would think the \u003Cabbr title=\u0022Angle of Attack\u0022\u003EAOA\u003C/abbr\u003E of the wing would be what KSP computes each frame based on the vessel orientation - if your trying to move the flaps I think you want to target the control surface.\n\u003C/p\u003E\n"},{"CreatedByName":"MaverickWoe","CreatedById":152650,"CreatedDateTime":"2021-04-20T14:51:59Z","Content":"\n\u003Cp\u003E\nThanks wasml. Sorry, I didn\u0027t see your notification. I couldn\u0027t get access to the control surface when using the part. It was not accessible from outside.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, I think I found out and it\u0027s much more indirect than I thought.\n\u003C/p\u003E\n\u003Cp\u003E\nI have to implement a new class inheriting from ModuleControlSurface.\n\u003C/p\u003E\n\u003Cp\u003E\nBy doing so, you can overwrite the method CtrlSurfaceUpdate(Vector3 velocity) inside which you have access to the vector ctrlSurface.localRotation\n\u003C/p\u003E\n\u003Cp\u003E\nAt the game loading, you have to replace all Parts that implement ModuleControlSurface so that they implement this new class instead and now I can now change the angle of the wings at will with my own laws.\n\u003C/p\u003E\n\u003Cp\u003E\nSo indirect, but finally found out.\n\u003C/p\u003E\n"},{"CreatedByName":"MaverickWoe","CreatedById":152650,"CreatedDateTime":"2021-04-21T14:40:40Z","Content":"\n\u003Cp\u003E\nAh, damnit. Despite the wing being at the right angle. It seems that the aero forces are not following / not taking in account the modified angle. I wonder what I forgot. Do you know if I need to reimplement something so that the angle is taken into consideration ? I thought the rotation would suffice\u003Cbr\u003E\u003Cimg alt=\u0022aero.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002243.24\u0022 height=\u0022195\u0022 width=\u0022451\u0022 src=\u0022http://awalrave.free.fr/shared/aero.png\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"MaverickWoe","CreatedById":152650,"CreatedDateTime":"2021-04-21T15:10:49Z","Content":"\n\u003Cp\u003E\nOk, finally found how to udpate the aero forces:\n\u003C/p\u003E\n\u003Cp\u003E\nthe property \u0022deflection\u0022 needs to be updated too as well as forcing aero to recompute by setting alwaysRecomputeLift = true;\n\u003C/p\u003E\n\u003Cp\u003E\nctrlSurface.localRotation only affects the visuals of the part\n\u003C/p\u003E\n"}]}