{"TopicId":81588,"ForumId":29,"TopicTitle":"[Solved][Dev Question] Accessing the Time Warp Panel MET Area","CreatedByName":"nuclearping","CreatedById":92457,"CreatedDateTime":"2014-08-13T08:31:09Z","PageNum":1,"Articles":[{"CreatedByName":"nuclearping","CreatedById":92457,"CreatedDateTime":"2014-08-13T08:31:09Z","Content":"\n\u003Cp\u003EHello,\u003C/p\u003E\u003Cp\u003Ebefore releasing a 0.24.2 compatible update of my KSP Calendar mod I wish to \u0022integrate\u0022 (or overlay) the output of my mod with the Time Warp Panel in the top left corner.\u003C/p\u003E\u003Cp\u003EThe best solution I can imagine is that the button next to the area has a 3rd option, \u0022MET\u0022, \u0022UT\u0022 and \u0022KT\u0022 (for Kerbin Time). Clicking on \u0022MET\u0022 and \u0022UT\u0022 display the default texts and clicking on \u0022KT\u0022 displays the Kerbin time from my mod.\u003C/p\u003E\u003Cp\u003EBut I guess thats not possible directly, instead I probably have to \u0022fake\u0022 such a button with 3 options.\u003C/p\u003E\u003Cp\u003EI took a look at the sources of RemoteTech2, especially the \u0022UI/TimeWarDecorator.cs\u0022 and got an idea of how to at least \u0022attach\u0022 something to this area. Thinking further on from this point I can now create a new overlay GUI window and just position it over the \u0022MET timer\u0022 area.\u003C/p\u003E\u003Cp\u003EBut somehow I don\u0027t like this idea in the first place. I\u0027d rather access the \u0022MET timer\u0022 box itself and override the text in it, if possible. But there is so little documentation about that ... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003ESo anyone got some hints for an old man? \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif\u0022 alt=\u0022:kiss:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-13T11:56:14Z\u0022 title=\u002208/13/2014 11:56  AM\u0022 data-short=\u00229 yr\u0022\u003EAugust 13, 2014\u003C/time\u003E by nuclearping\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nuclearping","CreatedById":92457,"CreatedDateTime":"2014-08-13T10:20:50Z","Content":"\n\u003Cp\u003EOk. That was easier than I thought.\u003C/p\u003E\u003Cp\u003EYou can change the text of the MET timer simply by ...\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Evar metTimerGUI = mTimewarpObject.timeQuadrantTab.transform.FindChild (\u0022MET timer\u0022).GetComponent\u0026lt;ScreenSafeGUIText\u0026gt;();\u003Cbr\u003EmetTimerGUI.text = \u0022Hello World!\u0022;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENow to figure out how to hook the button ... \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\u003Cp\u003EEDIT:\u003C/p\u003E\u003Cp\u003EAnother way to access the MET timer panel is by using the \u003Cstrong\u003EFlightUIController\u003C/strong\u003E.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightUIController flightUICtrl = FlightUIController.fetch;\u003Cbr\u003Eif (flightUICtrl == null)\u003Cbr\u003E  return;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo you can simply change the text by:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EflightUICtrl.met.text = \u0022...\u0022;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnd hooking the button-click:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EflightUICtrl.timeModeBtn.OnStatePress \u002B= new ScreenSafeUIStateButton.StateButtonPressCallback (this.metTimerBtnGUIClicked);\u003Cbr\u003E\u003Cbr\u003Eprivate void metTimerBtnGUIClicked(int st) {\u003Cbr\u003E  print (\u0022MET State: \u0022 \u002B st.ToString());\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-13T11:55:40Z\u0022 title=\u002208/13/2014 11:55  AM\u0022 data-short=\u00229 yr\u0022\u003EAugust 13, 2014\u003C/time\u003E by nuclearping\u003C/strong\u003E\n\u003C/span\u003E\n"}]}