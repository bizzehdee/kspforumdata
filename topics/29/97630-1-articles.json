{"TopicId":97630,"ForumId":29,"TopicTitle":"Not seeing sub-nodes in ConfigNode","CreatedByName":"Orum","CreatedById":97814,"CreatedDateTime":"2015-01-24T05:44:00Z","PageNum":1,"Articles":[{"CreatedByName":"Orum","CreatedById":97814,"CreatedDateTime":"2015-01-24T05:44:00Z","Content":"\n\u003Cp\u003EI have a part config that looks like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E// ...\u003Cbr\u003EMODULE\u003Cbr\u003E{\u003Cbr\u003E\tname = ODFC\u003Cbr\u003E\tMODE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tLiquidFuel = 0.01\u003Cbr\u003E\t\tIntakeAir = 0.15\u003Cbr\u003E\t\tMaxEU = 100\u003Cbr\u003E\t}\u003Cbr\u003E\tMODE\u003Cbr\u003E\t{\u003Cbr\u003E\t\tLiquidFuel = 0.09\u003Cbr\u003E\t\tOxidizer = 0.11\u003Cbr\u003E\t\tMaxEU = 100\u003Cbr\u003E\t}\u003Cbr\u003E//...\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027m trying to read the various MODE sub-nodes I have in my PartModule. However, when I look at it in my code like so:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\t\tConfigNode pcn = null;\u003Cbr\u003E\u003Cbr\u003E\t\tpublic void dumpnode() {\u003Cbr\u003E\t\t\tif(pcn.HasNode(\u0022MODE\u0022)) {\u003Cbr\u003E\t\t\t\t// code here never reached\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\telse\u003Cbr\u003E\t\t\t\tprint(\u0022No MODEs found.\u0022);\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\tpublic override void OnLoad(ConfigNode cn) {\u003Cbr\u003E\t\t\tif(pcn == null)\u003Cbr\u003E\t\t\t\tpcn = cn;\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\tpublic override void OnStart(PartModule.StartState state) {\u003Cbr\u003E\t\t\tdumpnode();\u003Cbr\u003E\u003Cbr\u003E\t\t\tif(state == StartState.Editor)\u003Cbr\u003E\t\t\t\treturn;\u003Cbr\u003E\u003Cbr\u003E\t\t\tthis.part.force_activate();\u003Cbr\u003E\t\t}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI never see anything printed except \u0022No MODEs found.\u0022 Puzzled, I even tried recursively dumping every single name/value pair from the ConfigNode handed to me in OnLoad(), and while I could see the \u0022name = ODFC\u0022 pair, along with what appeared to be a few tweakable values, I never saw anything contained within the MODE sub-nodes. So, any idea about what I\u0027m doing wrong? I feel like I\u0027ve missed something fundamental, but in various examples I\u0027ve looked at, they don\u0027t do anything different that I can see.\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2015-01-24T05:55:31Z","Content":"\n\u003Cp\u003EBeause you\u0027re running this code in OnStart, which only runs once you get to the editor, and OnLoad will run in the loading scene. You\u0027Re switching scenes, and PartModule, which is a MonoBehaviour, unloads private objects. Like your config. Making it public should probably fix that.\u003C/p\u003E\n"},{"CreatedByName":"Orum","CreatedById":97814,"CreatedDateTime":"2015-01-24T06:02:02Z","Content":"\n\u003Cp\u003EAh, that\u0027s incredibly subtle, and was the issue. Thanks!\u003C/p\u003E\n"}]}