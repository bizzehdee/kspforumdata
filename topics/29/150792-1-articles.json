{"TopicId":150792,"ForumId":29,"TopicTitle":"Guide to different reference frames?","CreatedByName":"martincmartin","CreatedById":157729,"CreatedDateTime":"2016-10-25T10:50:09Z","PageNum":1,"Articles":[{"CreatedByName":"martincmartin","CreatedById":157729,"CreatedDateTime":"2016-10-25T10:50:09Z","Content":"\n\u003Cp\u003E\nIs there a guide anywhere to what reference frames are used to compute various positions, velocities and transforms? \u00A0For example:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EFlightGlobals.ActiveVessel.orbit\u003C/span\u003E: \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Epos\u003C/span\u003E and \u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003Evel\u003C/span\u003E are relative to the center of the reference body, but seem to rotate along with it, although they\u0027re an inertial frame. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-family:\u0027Courier New\u0027, Courier, monospace;\u0022\u003EFlightGlobals.ActiveVessel.GetTransform()\u003C/span\u003E: The position is (0, 0, 0) on the launch pad, then increases as you lift off, which makes me think the origin is on the launch pad ... until you clear the tower, when it goes to zero. \u00A0And it seems to rotate along with Kerbin. \u00A0Is there a description of the transform hierarchy somewhere? \u00A0What\u0027s the parent of the active vessel?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-10-25T14:16:23Z","Content":"\n\u003Cp\u003E\nThis is actually quite a mess due to several workarounds Squad has implemented so that KSP can even run. The reference frames I am aware of are:\n\u003C/p\u003E\n\u003Cp\u003E\n1) \u0022Real-space\u0022, or the current physics bubble. If you are reading Unity documentation this is referred to as World space. Even this has two modes:\n\u003C/p\u003E\n\u003Cp\u003E\n1a) Real-space, low speed. At low speeds the physics bubble is centered on the vessel being switched to and extends out in a bubble with a radius of roughly 2.5km and the zero-point stays at this point even as the vessel moves away. Note this is relative, anytime you switch to a low speed vessel the bubble\u0027s zero-point is set to the vessel being switched to. This is why when you launch a vessel, the launch pad has the zero point as it is where the vessel spawned. If you have a rover at the north pole, when you switch to it from the Space Center, you will find the origin point is now where the rover was parked.\n\u003C/p\u003E\n\u003Cp\u003E\n1b) Real-space, high speed. At high speeds, the real-space physics bubble is simply tied to the current vessel and so the current vessel will always be the zero-point.\n\u003C/p\u003E\n\u003Cp\u003E\nThe two huge implications this has are: Real-space co-ordinates are fluid and not reliable, you can\u0027t use them for anything as they do not save. Second is that any ships not in real-space don\u0027t exist, only ships that have been unpacked (there is a message in the log) exist and can be interacted with, all others only exist as ProtoVessels that are much more limited.\n\u003C/p\u003E\n\u003Cp\u003E\n2) Part-space. (Called Part-space in the Unity documentation.) Each part has it\u0027s own reference frame that can be referred to. This is consistent across saves and can be safely referenced. Note that for most purposes, the Vessel reference frame is the Part-space reference of the root part of the vessel.\n\u003C/p\u003E\n\u003Cp\u003E\n3) Scaled-space. This is what you see when you look at the tracking station and what the Orbit class works on (I think?). At this level objects don\u0027t exist except as their prototypes (ProtoVessel, etc.) and physics is not enabled. I have not worked here at all so I don\u0027t know any more details. Notably I am not sure how to get from this space to real-space coordinates and back.\n\u003C/p\u003E\n\u003Cp\u003E\nHope that gives you a starting point, if anyone else has more details it would be helpful, I\u0027ve only really worked in Real-space so I\u0027m not clear on the fine details of a lot of this.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-25T14:18:42Z\u0022 title=\u002210/25/2016 02:18  PM\u0022 data-short=\u00227 yr\u0022\u003EOctober 25, 2016\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"martincmartin","CreatedById":157729,"CreatedDateTime":"2016-10-25T14:37:15Z","Content":"\n\u003Cp\u003E\nThanks, that\u0027s a helpful starting point. \u00A0Maybe your response should be made into a wiki page? \u00A0Would be great if people could find it easily after this thread is buried.\n\u003C/p\u003E\n\u003Cp\u003E\nAnd it helps to remember that at low speed KSP is only simulating a small bubble, that explains a lot about the reference frames. \u00A0The vessel really is at the center of the Universe. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-10-25T15:40:59Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222822672\u0022 data-ipsquote-contentid=\u0022150792\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221477404983\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n3) Scaled-space. This is what you see when you look at the tracking station and what the Orbit class works on (I think?). At this level objects don\u0027t exist except as their prototypes (ProtoVessel, etc.) and physics is not enabled. I have not worked here at all so I don\u0027t know any more details. Notably I am not sure how to get from this space to real-space coordinates and back.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNo, scaled space is a miniature representation of the whole system. It is the view of the tracking station, map and the flight view of the planets when you are far from them.\n\u003C/p\u003E\n\u003Cp\u003E\nThe orbit call work in full scale and relative to their mainBody (and you have call that give you position in the whole system, relative to the Sun).\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-10-25T16:54:59Z","Content":"\n\u003Cp\u003E\nSo that\u0027s 4 difference reference frames? Ugh.\n\u003C/p\u003E\n\u003Cp\u003E\nWorld-Space (the physics bubble), Part-space (relative to individual parts), Full Scale system (orbit class), Scaled-Space (tracking station and such).\n\u003C/p\u003E\n\u003Cp\u003E\nRather glad I\u0027ve never worked with anything but the World-Space and UI now.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n"}]}