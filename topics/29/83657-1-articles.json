{"TopicId":83657,"ForumId":29,"TopicTitle":"Tapemeter questions","CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2014-09-02T22:03:53Z","PageNum":1,"Articles":[{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2014-09-02T22:03:53Z","Content":"\n\u003Cp\u003EHallo everybody, a couple of questions from an old user that never managed to make a mod but still gets the hitch time and again.\u003C/p\u003E\u003Cp\u003EDoes anyone have experience with modding the reputation tapemeter? Can you instantiate one in the flight scene, with a different texture, and control it?\u003C/p\u003E\u003Cp\u003EAlso, what would be the cost of compositing two 512x64 textures at every video update to create a third one (to display in the tapemeter), would that be negligible or not?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-02T22:33:14Z\u0022 title=\u002209/02/2014 10:33  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 2, 2014\u003C/time\u003E by thorfinn\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-09-02T23:16:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022thorfinn\u0022 data-cite=\u0022thorfinn\u0022\u003E\u003Cdiv\u003ECan you instantiate one in the flight scene, with a different texture, and control it?\u003Cp\u003EAlso, what would be the cost of compositing two 512x64 textures at every video update to create a third one (to display in the tapemeter), would that be negligible or not?\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYep, you can. The second part needs clarification: if you\u0027re creating a brand new third texture every frame, you\u0027ll end up uploading that texture data to the GPU on every frame which is wasteful although not necessarily a huge bottleneck.\u003C/p\u003E\u003Cp\u003EHere\u0027s somewhere to start:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPAddon(KSPAddon.Startup.Flight, false)]\u003Cbr\u003Eclass DuplicateRepWidget : MonoBehaviour\u003Cbr\u003E{\u003Cbr\u003E    Gauge gauge;\u003Cbr\u003E\u003Cbr\u003E    IEnumerator Start()\u003Cbr\u003E    {\u003Cbr\u003E        var widget = FindObjectOfType\u0026lt;CurrencyWidgetsApp\u0026gt;();\u003Cbr\u003E        while (!widget.widgetSpawner.Spawned) yield return 0;\u003Cbr\u003E\u003Cbr\u003E        var stockRep = widget.widgetSpawner.transform.Find(\u0022RepWidget\u0022);\u003Cbr\u003E\u003Cbr\u003E        var newRep = (GameObject)Instantiate(stockRep.gameObject, stockRep.transform.position, stockRep.transform.rotation);\u003Cbr\u003E        newRep.SetActive(true);\u003Cbr\u003E        newRep.transform.Translate(new Vector3(-Screen.width * 0.5f, 0f, 0f));\u003Cbr\u003E\u003Cbr\u003E        Component.Destroy(newRep.GetComponent\u0026lt;ReputationWidget\u0026gt;());\u003Cbr\u003E\u003Cbr\u003E        gauge = newRep.GetComponentInChildren\u0026lt;Gauge\u0026gt;();\u003Cbr\u003E\u003Cbr\u003E        StartCoroutine(TickTock());\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    IEnumerator TickTock()\u003Cbr\u003E    {\u003Cbr\u003E        gauge.minValue = 0f;\u003Cbr\u003E        gauge.maxValue = 100f;\u003Cbr\u003E        float delta = 33f;\u003Cbr\u003E\u003Cbr\u003E        while (true)\u003Cbr\u003E        {\u003Cbr\u003E            float newValue = gauge.Value \u002B delta * Time.deltaTime;\u003Cbr\u003E            if (newValue \u0026gt; 100f || newValue \u0026lt; 0f)\u003Cbr\u003E                delta = -delta;\u003Cbr\u003E\u003Cbr\u003E            gauge.setValue(Mathf.Clamp(newValue, gauge.minValue, gauge.maxValue));\u003Cbr\u003E\u003Cbr\u003E            yield return 0;\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"thorfinn","CreatedById":8349,"CreatedDateTime":"2014-09-02T23:28:39Z","Content":"\n\u003Cp\u003EThank you! (I\u0027ll have a lot of studying to do, though)\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022\u003E\u003Cdiv\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EThe second part needs clarification: if you\u0027re creating a brand new third texture every frame (...)\u003C/span\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027d like to have a scale that not only moves (and the tapemeter widget handles that), but can be covered and uncovered by a second slider. I suppose that to do that I should superimpose the cover texture shifted by X pixels over the scale texture, clip the result and get a third one to pass to the widget. Or is there a better way?\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E It\u0027s for a lift reserve indicator. The idea is grabbing cL, cLmax and Q from FAR/NEAR and driving the tapemeter to display how many Gz you are pulling (scale position) together with how many you COULD pull at the moment (edge of the uncovered scale). Gz being corrected for local gravity and centrifugal force, so that \u00221.0\u0022 is always what you need for level flight, either on Kerbin or on Duna at whatever speed you are flying. \u003C/p\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-09-02T23:40:02Z\u0022 title=\u002209/02/2014 11:40  PM\u0022 data-short=\u00229 yr\u0022\u003ESeptember 2, 2014\u003C/time\u003E by thorfinn\u003C/strong\u003E\n\u003C/span\u003E\n"}]}