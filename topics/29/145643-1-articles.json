{"TopicId":145643,"ForumId":29,"TopicTitle":"StoreExperiments Override [SOLVED]","CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2016-08-09T06:24:47Z","PageNum":1,"Articles":[{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2016-08-09T06:24:47Z","Content":"\n\u003Cp\u003E\nIs there any reference code available (internet archive or otherwise) for the following processes?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003EScienceDataContainer or\u00A0IScienceDataContainer\u003Cbr\u003E\u003Cspan\u003E\u00A0\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\nHow it currently works:\u003Cbr\u003E\nWhen a Kerbal is on EVA and over the crew capsule hatch - the player is offered the option to press \u0027B\u0027 to board the crew capsule. This (i think) runs the same process as when you manually hit the KSPEvent button to \u0027Store Experiements\u0027 ie uses the method under the KSPEVENT:\u00A0\u003Cspan style=\u0022color:rgb(39,42,52);font-family:\u0027Helvetica Neue\u0027, Helvetica, Arial, sans-serif;font-size:14px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:22.4px;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;float:none;background-color:rgb(255,255,255);\u0022\u003EStoreDataExternalEvent\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nI\u0027m wanting to override the existing code with some extra conditions, but want to keep about 80% existing functionality, so I don\u0027t want to reinvent the whole process when it already exists.\u003Cbr\u003E\nI also don\u0027t want to break what\u00A0everyone else calls from other plugins.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyone know of a way to new/override that method so I can get this to work?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-10T08:40:01Z\u0022 title=\u002208/10/2016 08:40  AM\u0022 data-short=\u00227 yr\u0022\u003EAugust 10, 2016\u003C/time\u003E by wile1411\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2016-08-09T06:44:09Z","Content":"\n\u003Cp\u003E\nFound this \u003Ca href=\u0022https://github.com/Anatid/XML-Documentation-for-the-KSP-API/blob/338e0fe797ccced9814c3c1d2712dc2362d3afe5/src/KerbalEVA.cs\u0022 rel=\u0022external nofollow\u0022\u003Eold API info on GITHUB\u003C/a\u003E and it made me think - Is there a way to get something on the screen (and then process the response) just after the Boarding action is pressed, but before the stock board-and-store-experiments-functions are\u00A0processed?\n\u003C/p\u003E\n"},{"CreatedByName":"cyberKerb","CreatedById":28891,"CreatedDateTime":"2016-08-10T08:56:44Z","Content":"\n\u003Cp\u003E\nFound a way to disable/enable\u00A0boarding after a test - Oh I\u0027m soooo happy to work this out.\u00A0\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThanks to\u00A0\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/96644-malah/\u0026amp;do=hovercard\u0022 data-mentionid=\u002296644\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/96644-malah/\u0022 rel=\u0022\u0022\u003E@Malah\u003C/a\u003E\u00A0work with their QuickIVA mod and disabling keyboard shortcuts. I was browsing various mods to find something relevant and in that GITHUB documentation, I found the use of GameSettings and switchState to prevent the mapview for appearing. I\u0027ve used the idea for something completely different, but I figure someone might find this useful.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you have a better idea, I\u0027m all ears and will listen to any advise offered!\u00A0\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003Cbr\u003E\u003Cspan style=\u0022font-size:10px;\u0022\u003E\u003Cem\u003EMy lack of experience in OOP will always lead me to thing there is a better way out there at this point in time\u003C/em\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[KSPField(isPersistant = true)]\npublic bool BoardingAvailable = true;\n\n//Function to get current key for boarding for gamesettings\nprivate KeyCode BoardKey\n{\n    get { return GameSettings.EVA_Board.primary; }\n}\n\n//Switch function to enable/disable function for 1 Update cycle\nprivate void DisableBoarding(bool enable = true)\n{\n    if (enable)\n    {\n        GameSettings.EVA_Board.switchState = InputBindingModes.None;\n        GameSettings.EVA_Board.switchStateSecondary = InputBindingModes.None;\n    }\n    else\n    {\n        GameSettings.EVA_Board.switchState = InputBindingModes.Any;\n        GameSettings.EVA_Board.switchStateSecondary = InputBindingModes.Any;\n    }\n}\n\npublic void Update()\n{\n\t//Below IF statement only runs after the boarding was disabled on the previous update.\n\t//This basically reenables boarding - for the next attempt - will be successful if all the checks are passed\n\tif (!BoardingAvailable) \n\t{ \n\t\tDisableBoarding(false);\n\t\tBoardingAvailable = true;\n\t}\n\t\n\t//This check for keypressup happens to fire BEFORE the stock function that runs the process to board a kerbal to a crewcapacity part.\n\tif (Input.GetKeyUp(this.BoardKey))\n\t{\n\t\t//Add additional checks here that would disable boarding - psuedo example below\n\t\tif(havescience)\n\t\t{\t\n\t\t\tDisableBoarding();\n\t\t\tBoardingAvailable = false;\n\t\t}\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nReally rough example of the concept provided above.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-10T23:01:16Z\u0022 title=\u002208/10/2016 11:01  PM\u0022 data-short=\u00227 yr\u0022\u003EAugust 10, 2016\u003C/time\u003E by wile1411\u003C/strong\u003E\n\u003C/span\u003E\n"}]}