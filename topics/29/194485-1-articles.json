{"TopicId":194485,"ForumId":29,"TopicTitle":"ScenarioModule, proper use and an odd issue","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2020-06-05T19:27:11Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2020-06-05T19:27:11Z","Content":"\n\u003Cp\u003E\nLast month I discovered a very odd interaction between two mods FillItUp and ProgressiveColonization.\u00A0 The problem occured when leaving the Editor and going to launch.\n\u003C/p\u003E\n\u003Cp\u003E\nEverything works fine in the editor:\u00A0\u003Cimg alt=\u0022VGfZeqr.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002216.92\u0022 height=\u002267\u0022 width=\u0022396\u0022 src=\u0022https://i.imgur.com/VGfZeqr.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nbut after launch:\u00A0\u003Cimg alt=\u0022tqorgFm.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u0022832.08\u0022 height=\u0022441\u0022 width=\u002253\u0022 src=\u0022https://i.imgur.com/tqorgFm.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nYou can see how buttons have been doubled.\n\u003C/p\u003E\n\u003Cp\u003E\nFillItUp uses the ToolbarController, ProgressiveColonization uses the stock AddModApplication()\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve spent several hours on this, and the only thing I found was that the method calling AddModApplication() is inside a ScenarioModule, which happens to be an abstract class inherited by two other classes, one for the Editor and one for the Flight scene.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen I merely change the class from a ScenarioModule to a MonoBehaviour, the toolbar work correctly.\n\u003C/p\u003E\n\u003Cp\u003E\nOddly enough, even when I disable the AddModApplication() call in ProgressiveColonization, the problem still happens.\n\u003C/p\u003E\n\u003Cp\u003E\nProgressiveColonization uses this method:\u00A0\u00A0PopupDialog.SpawnPopupDialog\n\u003C/p\u003E\n\u003Cp\u003E\nSo is it ok/normal to use ScenarioModule this way (as a replacement for MonoBehaviour)?\u00A0 And even though it does inherit from MonoBehaviour, certain methods, such as Awake(), Start(), etc aren\u0027t available to be used (ie:\u00A0 they don\u0027t get called)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222020-06-06T02:46:50Z\u0022 title=\u002206/06/2020 02:46  AM\u0022 data-short=\u00224 yr\u0022\u003EJune 6, 2020\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2020-06-06T02:49:02Z","Content":"\n\u003Cp\u003E\nI\u0027ve found the cause of the problem, and it has nothing to do with the ScenarioModule, that was a red herring.\n\u003C/p\u003E\n\u003Cp\u003E\nIt turns out that both mods are intercepting the Launch button, and then something odd is going on, I haven\u0027t yet figured out what is wrong.\u00A0 This only happens with these two mods (that I know of) because of this particular behaviour.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll update this once I have it fixed\n\u003C/p\u003E\n"},{"CreatedByName":"Jacke","CreatedById":103694,"CreatedDateTime":"2020-06-06T03:03:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223798115\u0022 data-ipsquote-contentid=\u0022194485\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221591411742\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 minutes ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027ve found the cause of the problem, and it has nothing to do with the ScenarioModule, that was a red herring.\n\u003C/p\u003E\n\u003Cp\u003E\nIt turns out that both mods are intercepting the Launch button, and then something odd is going on, I haven\u0027t yet figured out what is wrong.\u00A0 This only happens with these two mods (that I know of) because of this particular behaviour.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll update this once I have it fixed\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI saw the doubling up of stock toolbar icons in 2019, I think.\u00A0 What troubleshooting I did didn\u0027t succeed in narrowing down the mods that still had the bug.\u00A0 I think the mods included Janitor\u0027s Closet.\u00A0 I\u0027ll go through my old \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E setups this weekend and see if one of them still has the bug.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2020-06-06T03:35:44Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223798121\u0022 data-ipsquote-contentid=\u0022194485\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221591412611\u0022 data-ipsquote-userid=\u0022103694\u0022 data-ipsquote-username=\u0022Jacke\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n30 minutes ago, Jacke said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI saw the doubling up of stock toolbar icons in 2019, I think.\u00A0 What troubleshooting I did didn\u0027t succeed in narrowing down the mods that still had the bug.\u00A0 I think the mods included Janitor\u0027s Closet.\u00A0 I\u0027ll go through my old \u003Cabbr title=\u0022Comprehensive Kerbal Archive Network (a KSP mod manager)\u0022\u003ECKAN\u003C/abbr\u003E setups this weekend and see if one of them still has the bug.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI know what the problem is.\u00A0 It has to do with both mods intercepting the Launch button, and then both mods, simultaneously initiating the launch sequence.\n\u003C/p\u003E\n\u003Cp\u003E\nIt has to do with this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EEditorLogic.fetch.launchBtn.onClick.RemoveListener(defaultLaunchDelegate);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2020-06-06T05:14:41Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103694-jacke/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022103694\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/103694-jacke/\u0022 rel=\u0022\u0022\u003E@Jacke\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nand anyone else interested in knowing what is going on, a full description along with a solution I\u0027m working on is here:\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u0022129964\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed1765204687\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/194497-issue-with-multiple-mods-replacing-delegates-of-buttons/\u0026amp;do=embed\u0022 style=\u0022height:209px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}