{"TopicId":157028,"ForumId":29,"TopicTitle":"[Workaround found] Help needed submitting science data to RnD archives","CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2017-02-26T22:00:58Z","PageNum":1,"Articles":[{"CreatedByName":"Guest","CreatedById":-1,"CreatedDateTime":"2017-02-26T22:00:58Z","Content":"\n\u003Cp\u003E\nOk, so I\u2019m updating a mod called Syncrio, it is a multiplayer extension that syncs scenario data from client to client. I\u2019m almost done with the update, but I need help figuring out how to add a science subject to the RnD archives.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve been using the game event \u0022OnScienceRecieved\u0022 to get the data on client A and \u0022ResearchAndDevelopment.Instance.SubmitScienceData(float dataAmount, scienceSubject subject)\u0022 to add it on client B\u2019s side.\n\u003C/p\u003E\n\u003Cp\u003E\nBut, all I get on client B\u2019s side is \u0022[Research \u0026amp; Development]: \u002B5 data on Crew Report from LaunchPad. Subject value is 0.00\u0022 in KSP\u0027s debug log and it does not register the data in the RnD archives. Meaning the same data can be gathered on client A and then gathered again on client B.\n\u003C/p\u003E\n\u003Cp\u003E\nOddly enough, client A data gets this message \u0022[Research \u0026amp; Development]: \u002B5 data on Crew Report from LaunchPad. 2 Science added. Subject value is 0.00\u0022 when they gather the data, the difference between the two messages being the \u00222 Science added.\u0022 part.\n\u003C/p\u003E\n\u003Cp\u003E\nI have also tried creating a custom part/part module to gather and transmit the science data, but all I got was a message saying that I had completed the progress node for science recovery on kerbin.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is the last thing I need done for Syncrio\u0027s science game mode to be released and I have been at this for over a week now and have made no progress. So any help anyone can give will be greatly appreciated.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n========Edit========\n\u003C/p\u003E\n\u003Cp\u003E\nA workaround has been found. Using the config nodes from the science subjects, it is possible to input the config nodes into the RnD config node. Here is a code example:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003EConfigNode RnDCFG = new ConfigNode();\n\nResearchAndDevelopment.Instance.Save(RnDCFG);\n\n//Then input the science subjects into the \u0022RnDCFG\u0022\n\nList\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;ProtoScenarioModule\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E psmLocked = HighLogic.CurrentGame.scenarios;\n\nint idx = psmLocked.FindIndex(i =\u0026gt; i.moduleName == \u0022ResearchAndDevelopment\u0022);\n\nif (ScenarioRunner.GetLoadedModules().Contains(psmLocked[idx].moduleRef))\n{\n  \tScenarioRunner.RemoveModule(psmLocked[idx].moduleRef);\n}\n\npsmLocked[idx].moduleRef = ScenarioRunner.Instance.AddModule(RnDCFG);\npsmLocked[idx].moduleRef.targetScenes = HighLogic.CurrentGame.scenarios[idx].targetScenes;\n\nHighLogic.CurrentGame.scenarios = psmLocked;\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nI hope this helps anyone trying to do this, or something like this. \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-08T18:59:28Z\u0022 title=\u002203/08/2017 06:59  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 8, 2017\u003C/time\u003E by Caylis1397\u003C/strong\u003E\n\u003Cbr\u003EWorkaround found\n\u003C/span\u003E\n"}]}