{"TopicId":79175,"ForumId":29,"TopicTitle":"part.missionID and vessel.rootPart do not always exist?","CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-23T15:50:06Z","PageNum":1,"Articles":[{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-23T15:50:06Z","Content":"\n\u003Cp\u003EAlright, I\u0027m stumped by an error I am getting.\u003C/p\u003E\u003Cp\u003EI am generating a nullref error that makes no sense to me.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E  public static string SaveGroupNames(Part p, string str)\u003Cbr\u003E        {\u003Cbr\u003E                if (p.missionID == FlightGlobals.ActiveVessel.rootPart.missionID)\u003Cbr\u003E                {\u003Cbr\u003E\u0026lt;snip rest of code\u0026gt;                 \u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/SirDiazo/AGExt/blob/master/AGExt/Flight.cs#L2405\u0022 rel=\u0022external nofollow\u0022\u003EGitHub with full code.\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESometimes, this if statement generates a nullref error \u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ESystem.NullReferenceException: Object reference not set to an instance of an object\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThrough logging I have narrowed it down to this line exactly.\u003C/p\u003E\u003Cp\u003ENow, because the method starts executing, I know Part p is a valid part. So either p.missionID is null, or FlightGlobals.ActiveVessel.rootPart.missionID is null. The example generating this still has an active vessel so I know there is a vessel with parts present.\u003C/p\u003E\u003Cp\u003EBased on my testing, all parts in a vessel are assigned the same .missionID when a vessel is created at the launchpad. (I\u0027m not sure what happens when a vessel that spawns as one splits in two, but the missionID\u0027s staying the same would not cause this error.)\u003C/p\u003E\u003Cp\u003EI also saw that as long as a vessel still has a single part left, the vessel will have a .rootPart for me to reference.\u003C/p\u003E\u003Cp\u003EHowever, somewhere my train of logic is getting messed up to allow this nullref error in, can anyone offer any suggestions on what I\u0027ve done wrong?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"lo-fi","CreatedById":111099,"CreatedDateTime":"2014-07-30T13:42:09Z","Content":"\n\u003Cp\u003EAt what point are you getting null-refs? I\u0027ve had some odd issues with parts when swapping between flight and editor, as, if I recall correctly, a lot of the vessel stuff is null in the editor.\u003C/p\u003E\u003Cp\u003ELong shot, I know!\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-30T13:46:08Z","Content":"\n\u003Cp\u003EThis was in flight.\u003C/p\u003E\u003Cp\u003EFlightGlobals does not exist in the editor, rather to find the root part there is EditorLogic.fetch.startPod.\u003C/p\u003E\u003Cp\u003EThis was one of the earlier errors in my fight with partModules over the past bit, I suspect this is a cascade error from that somehow.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"}]}