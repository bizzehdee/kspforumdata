{"TopicId":60161,"ForumId":29,"TopicTitle":"SendMessage to active vessel?","CreatedByName":"owensm0132","CreatedById":100958,"CreatedDateTime":"2014-01-16T18:45:00Z","PageNum":1,"Articles":[{"CreatedByName":"owensm0132","CreatedById":100958,"CreatedDateTime":"2014-01-16T18:45:00Z","Content":"\n\u003Cp\u003EAgain I am stumbling around in the dark not sure why this is not working. I am trying to activate a function in a partmodule in the active vessel from a near by vessel but it is not being activated - see code below;\u003C/p\u003E\u003Cp\u003Eclass mypart: PartModule\u003C/p\u003E\u003Cp\u003E{\u003C/p\u003E\u003Cp\u003E // Send Message\u003C/p\u003E\u003Cp\u003E [KSPEvent(guiActiveUnfocused = true, externalToEVAOnly = false, unfocusedRange = 20f, guiName = \u0022Pair With This Port\u0022, active = false)]\u003C/p\u003E\u003Cp\u003E public void TestEvent()\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E BroadcastMessage(\u0022T1\u0022, this);\u003C/p\u003E\u003Cp\u003E SendMessage(\u0022T2\u0022, this);\u003C/p\u003E\u003Cp\u003E FlightGlobals.ActiveVessel.BroadcastMessage(\u0022T3\u0022, this);\u003C/p\u003E\u003Cp\u003E FlightGlobals.ActiveVessel.SendMessage(\u0022T4\u0022, this);\u003C/p\u003E\u003Cp\u003E FlightGlobals.ActiveVessel.rootPart.BroadcastMessage(\u0022T5\u0022, this);\u003C/p\u003E\u003Cp\u003E FlightGlobals.ActiveVessel.rootPart.SendMessage(\u0022T6\u0022, this);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E // Send Messages\u003C/p\u003E\u003Cp\u003E [KSPEvent(guiActive = false, active = true)]\u003C/p\u003E\u003Cp\u003E public void T1(object Part)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E ScreenMessages.PostScreenMessage(\u0022T1\u0022, 5.0f, ScreenMessageStyle.UPPER_CENTER);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E [KSPEvent(guiActive = false, active = true)]\u003C/p\u003E\u003Cp\u003E public void T2(object Part)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E ScreenMessages.PostScreenMessage(\u0022T2\u0022, 5.0f, ScreenMessageStyle.UPPER_CENTER);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E [KSPEvent(guiActive = false, active = true)]\u003C/p\u003E\u003Cp\u003E public void T3(object Part)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E ScreenMessages.PostScreenMessage(\u0022T3\u0022, 5.0f, ScreenMessageStyle.UPPER_CENTER);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E [KSPEvent(guiActive = false, active = true)]\u003C/p\u003E\u003Cp\u003E public void T4(object Part)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E ScreenMessages.PostScreenMessage(\u0022T4\u0022, 5.0f, ScreenMessageStyle.UPPER_CENTER);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E [KSPEvent(guiActive = false, active = true)]\u003C/p\u003E\u003Cp\u003E public void T5(object Part)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E ScreenMessages.PostScreenMessage(\u0022T5\u0022, 5.0f, ScreenMessageStyle.UPPER_CENTER);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E [KSPEvent(guiActive = false, active = true)]\u003C/p\u003E\u003Cp\u003E public void T6(object Part)\u003C/p\u003E\u003Cp\u003E {\u003C/p\u003E\u003Cp\u003E ScreenMessages.PostScreenMessage(\u0022T6\u0022, 5.0f, ScreenMessageStyle.UPPER_CENTER);\u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003E}\u003C/p\u003E\u003Cp\u003ENotice that TestEvent is only being triggered from a nearby vessel.\u003C/p\u003E\u003Cp\u003EThe only thing I get on the screen is T1 and T2. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E What am I doing wrong? \u003C/p\u003E\u003Cp\u003EAlso, I was wondering if there is a way for a vessel to save some sort of custom meta data?\u003C/p\u003E\n"},{"CreatedByName":"owensm0132","CreatedById":100958,"CreatedDateTime":"2014-01-18T17:54:20Z","Content":"\n\u003Cp\u003Eok, I figured it out. For other devs who feel like they are in the dark, looking at KAS plugin source code has really helped me. I am not sure if it is cool to add the link so I will not but it is on github.\u003C/p\u003E\u003Cp\u003EFor my solution I used a static class to maintain state information. For the SendMessage it seems I had to send to the partmodule and not to the part - I am still not sure the difference between the two things (noob).\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    public static class MO_Shared\u003Cbr\u003E    {\u003Cbr\u003E        public static ModuleDockingNode activeMOPort1 = null;\u003Cbr\u003E        public static ModuleDockingNode activeMOPort2 = null;\u003Cbr\u003E\u003Cbr\u003E        public static List\u0026lt;Dockingv2\u0026gt; GetAllDockingv2sWithState(Vessel fromVessel = null,  bool ActiveState = false)\u003Cbr\u003E        {\u003Cbr\u003E             ...\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    ...\u003Cbr\u003E\u003Cbr\u003E    public class Dockingv2 : ModuleDockingNode\u003Cbr\u003E    {    \u003Cbr\u003E        ...\u003Cbr\u003E        [KSPEvent(guiActiveUnfocused = true, externalToEVAOnly = false, unfocusedRange = 20f, guiName = \u0022Pair With This Port\u0022, active = false)]\u003Cbr\u003E        public void PairWithPort()\u003Cbr\u003E        {\u003Cbr\u003E            ...\u003Cbr\u003E            MO_Shared.activeMOPort1.SendMessage(\u0022LinkUp\u0022);\u003Cbr\u003E            ...\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"}]}