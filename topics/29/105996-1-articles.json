{"TopicId":105996,"ForumId":29,"TopicTitle":"KSP 1.0 ISP Engine Values","CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-04-29T14:54:56Z","PageNum":1,"Articles":[{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-04-29T14:54:56Z","Content":"Alright. With KSP 1.0 having hit, does anyone have any details on how to get engine parameters now?\n\nThe specific parameter that prompted this question is ModuleEngines.maxThrust\n\nIn KSP .90 this was a KSPField that had the Max Thrust of an engine at 100% throttle. (Mainsail always reported 1500 thrust for this value.)\n\nIn KSP 1.0 I have no clue what this field means. It is no longer a KSPField and it always reports a value of 1376 for the mainsail, both on the pad at KSC and in orbit.\n\nI did find the .finalThrust value which appears to be current thrust of the engine as displayed on the part right-click menu but that\u0027s it, anything else continues to escape me.\n\nNow, I think that in theory I can take the .finalThrust and divide it by the .actualThrottle to get what my thrust should be at 100% throttle, but that seems a very clunky way to be doing this. (.actualThrottle is the current throttle, .requestedThrottle being the current throttle setpoint, these two values can differ due to spooling lag time.)\n\nAnyone have any thoughts?\n\nD."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-29T15:55:54Z","Content":"You get ISP from the atmosphereCurve. Thrust from the maxFuelFlow using other values. KER has all the math for you [done cleanly](https://github.com/CYBUTEK/KerbalEngineer/blob/master/KerbalEngineer/VesselSimulator/EngineSim.cs#L69-L90)"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-04-30T01:31:16Z","Content":"Okay.\n\nWhile the KER stuff is exactly the math I am looking for, the actual method I want to use is ModuleEngines.GetEngineThrust().\n\nHowever, that is a protected method so I can\u0027t access it. :/\n\nTherefore I\u0027m going to go with ModuleEngines.finalThrust / ModuleEngines.currentThrottle to get max thrust. \n\nNot the exact way to do it, but close enough and it\u0027s only one line of code as opposed to several to re-do the math myself.\n\nD.\n\nedit: Blah, that doesn\u0027t work. Throttle off (so zero) throws a NaN which screws everything up, guess I\u0027m doing the math.\n\n**Edited \u003Ctime datetime=\u00222015-04-30T01:42:07Z\u0022 title=\u002204/30/2015 01:42  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 30, 2015\u003C/time\u003E by Diazo**"},{"CreatedByName":"Flip665","CreatedById":104032,"CreatedDateTime":"2015-04-30T03:20:30Z","Content":"been experimenting with this... seems \u0027max thrust\u0027 is your in atmosphere value and your vacuum value is determined in relation to your isp value and the \u0027third key\u0027 (previously there were key 0=vacuum isp and key 1=atmosphere isp)\n\nexample i tried to alter the ion engine to better isp and slightly higher thrust of 12000 and 10 respectively(i edit almost all of it because my laptop cant handle 300 part ships, 200 for that matter)\n\nanyway i went into game and my ion had 1200 vac thrust...\n\nthis is when i noticed the third key... it had a value of... key 1.2 .0001 or something to that effect... i changed it to key 1.2 .0002 and the vac thrust changed to 120 ... so i dont got the correlation nailed down yet but thats my two cents..."},{"CreatedByName":"NecroBones","CreatedById":105424,"CreatedDateTime":"2015-04-30T03:32:09Z","Content":"Within the CFGs, the \u0022Max Thrust\u0022 is now the *ASL thrust*, rather than *VAC thrust*. For instance the Mainsail still has 1500 VAC thrust, just as before, but the CFG value is now **1379.032258**, which is simply **1500 \\* 285 / 310**, or *(VacThrust \\* ISP[1atm] / ISP[0atm])*."},{"CreatedByName":"Flip665","CreatedById":104032,"CreatedDateTime":"2015-04-30T03:44:20Z","Content":"so whats the third isp key? key 1 key 0 key X 0.001 (x because they all seem to be different)"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-04-30T04:02:36Z","Content":"Okay, this is actually kind of ugly.\n\nThe actual max thrust of an engine is as follows:\n\n    ModuleEngines.maxFuelFlow * ModuleEngines.g * ModuleEngines.atmosphereCurve.Evaluate((float)(ModuleEngines.vessel.staticPressurekPa * PhysicsGlobals.KpaToAtmospheres)\n\nNote that this code returns 100% throttle, you have to modify the .maxFuelFlow value for other throttle settings.\n\nI\u0027m not sure what ModuleEngines.g does, but the math needs it. (Thank you KER for that tidbit, I am aware I don\u0027t fully understand the math around ISP.)\n\nThe .atmosphereCurve.Evaluate requires the current pressure in Atmospheres so the math there converts from kPa to Atm.\n\nSo ya, the correct way to do it. A lot messier then it used to be, but not horrendous either.\n\nD.\n\nedit: The third key in the part.cfg files is how fast ISP drop off in higher pressures. \n\nKey 0 is the vaccumm ISP\n\nKey 1 is the 1 Atm ISP (KSP launch pad.)\n\nKey 9 is the ISP at 9 Atm of pressure, it\u0027s mostly linear between Key 1 and this I believe. (Mainsail has a Key 9 0.001 value in there.)\n\n**Edited \u003Ctime datetime=\u00222015-04-30T04:05:48Z\u0022 title=\u002204/30/2015 04:05  AM\u0022 data-short=\u00229 yr\u0022\u003EApril 30, 2015\u003C/time\u003E by Diazo**"},{"CreatedByName":"Flip665","CreatedById":104032,"CreatedDateTime":"2015-04-30T04:32:54Z","Content":"thanks makes some sense is your quoted code line from ker... (im assuming kerbal engineer)\n\ni dont use it im just trying to change values in cfg files and i dont recognize it.... the vac thrust \\* key1 isp / key0 isp =max thrust is working for me... now to figure out how to make my ion not need 152 electric a minute lol..."},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-04-30T16:35:34Z","Content":"Has anyone figured heatProduction yet? In .90 I could scale it to give scaled engines the same overheating behavior as the original size. Now KSP ignores the scaling, just like maxThrust. For maxThrust the solution was to scale maxFuelFlow instead. Is there a similar change for heat? \n\nDo the values make sense to anyone? Without scaling, large engines heat up faster and further, to the point that a 5m basic jet will explode on the pad when running long enough at full thrust. So it seems like a relative quantity. Still the value seems to go up for larger engines, though there is no obvious pattern (Ant=8, skipper=306, mainsail=180, KR-2L=70)."},{"CreatedByName":"WissNX01","CreatedById":118195,"CreatedDateTime":"2015-04-30T19:51:06Z","Content":"So, is there anyway to increase the ISP without it affecting the thrust?"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2015-04-30T19:53:17Z","Content":"\u003E \n\u003E So, is there anyway to increase the ISP without it affecting the thrust?\n\nReduce the fuel consumption."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-05-01T02:14:52Z","Content":"heatProduction is now scaled by the part\u0027s thermal mass (as well as the internal generation factor). So assuming the latter is 1 (it\u0027s not, it\u0027s something like 0.03) then heatProduction=1 literally means \u0022this engine produces enough heat per second to raise its temperature 1 K per second\u0022.\n\nYet increasing 0.02t of mass 1K means waaaaay less energy than increasing 6t of Mainsail. And that heat (the energy, not the temperature) conducts outward."},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-05-01T09:13:32Z","Content":"\u003E \n\u003E I\u0027m not sure what ModuleEngines.g does, but the math needs it.\n\nThis is most likely the GravityConstant which is 9.80665"},{"CreatedByName":"pellinor","CreatedById":85299,"CreatedDateTime":"2015-05-01T09:41:54Z","Content":"\u003E \n\u003E heatProduction is now scaled by the part\u0027s thermal mass (as well as the internal generation factor). So assuming the latter is 1 (it\u0027s not, it\u0027s something like 0.03) then heatProduction=1 literally means \u0022this engine produces enough heat per second to raise its temperature 1 K per second\u0022.\n\u003E Yet increasing 0.02t of mass 1K means waaaaay less energy than increasing 6t of Mainsail. And that heat (the energy, not the temperature) conducts outward.\n\nAh so this is why large engines (which tend to have high TWR) usually have large heatProduction. Now this starts to make sense. \n\nSo scaled engines (with preserved TWR) should all start heating up at the same speed. When some heat is built up, small parts should emit their heat more easily (more surface/mass), so large ones get hotter. This might explain what I see for TweakScaled engines."},{"CreatedByName":"Flip665","CreatedById":104032,"CreatedDateTime":"2015-06-27T23:41:44Z","Content":"use formula vacuum thrust x atmosphere isp(1) / vacuum isp (0) = max thrust... just reverse engineer the problem so that vac and max thrust remain the same...\n\nexample vac thrust(100) x atm isp(100) / vac isp(100) = max thrust 100\n\nor vac thrust(100) x atm isp(1000) / vac isp(1000) = max thrust 100\n\ngets tricky when vac thrust or isp is greater than atm thrust or isp"}]}