{"TopicId":165805,"ForumId":29,"TopicTitle":"[NOT resolved] Loading font error","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-24T18:53:19Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-24T18:53:19Z","Content":"\n\u003Cp\u003E\nOk, I\u0027ve jumped through all the appropriate hoops I can find. \u00A0Got my font file created and in the GameData directory. \u00A0 And, I get this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 13:46:35.165] FontLoader: Loaded bundle \u0027E:\\Kerbal Space Program 1.3\\GameData\\Kerbal Electric\\Plugin\\kelectricfonts.fnt\u0027\n[WRN 13:46:35.168] The referenced script on this Behaviour is missing!\n[WRN 13:46:35.169] The referenced script on this Behaviour (Game Object \u0027\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;null\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\u0027) is missing!\n[ERR 13:46:35.189] FontLoader: Error loading font Could not load file or assembly \u0027TextMeshPro-1.0.55.2017.1.0b12\u0027 or one of its dependencies. The system cannot find the file specified.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI have the fonts in a folder called fonts, the TextMeshProResolver in a folder under that called Editor (nobody said it had to be in a special folder). \u00A0The font bundles with no errors.\n\u003C/p\u003E\n\u003Cp\u003E\nObviously, the TMPro I\u0027m using in VS is not the one that\u0027s in KSP and I see no DLL in any KSP folder that looks like a correct one to reference.\n\u003C/p\u003E\n\u003Cp\u003E\nIdeas?\n\u003C/p\u003E\n\u003Cp\u003E\n*Edit\n\u003C/p\u003E\n\u003Cp\u003E\nNot sure why but I deleted everything and started with the basic font, created the asset with TMPro then bundled it with PartTools and it loaded fine.\n\u003C/p\u003E\n\u003Cp\u003E\nI have noticed that sometimes when I build the package with PartTools the .fnt size would be tiny, like 966 bytes. \u00A0Other times, it would seem normal, 19K\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-09-26T16:48:09Z\u0022 title=\u002209/26/2017 04:48  PM\u0022 data-short=\u00226 yr\u0022\u003ESeptember 26, 2017\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-26T16:52:06Z","Content":"\n\u003Cp\u003E\nOk, it\u0027s back at it again and I have no idea why.\n\u003C/p\u003E\n\u003Cp\u003E\nNothing in the font creation inside unity is giving any errors.\n\u003C/p\u003E\n\u003Cp\u003E\nBut, when I put the font in the GameData directory\u00A0 I still get this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E[LOG 11:46:15.166] FontLoader: Loaded bundle \u0027E:\\Kerbal Space Program 1.3\\GameData\\Kerbal Electric\\Plugin\\ehsmb.fnt\u0027\n[WRN 11:46:15.169] The referenced script on this Behaviour is missing!\n[WRN 11:46:15.170] The referenced script on this Behaviour (Game Object \u0027\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;null\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\u0027) is missing!\n[ERR 11:46:15.189] FontLoader: Error loading font Could not load file or assembly \u0027TextMeshPro-1.0.55.2017.1.0b12\u0027 or one of its dependencies. The system cannot find the file specified.\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI have deleted the KSP font asset and rebuilt them from the TMPro asset.\u003Cbr\u003E\nI\u0027ve repeatedly updated the assets in the KSP asset builder, repeatedly built the font, repeatedly restarted KSP.\u003Cbr\u003E\nI\u0027ve moved things around inside Unity so that the TMProResolver is in an Editor folder by itself off of the Assets folder.\u003Cbr\u003E\nI\u0027ve moved it underneath the \u0027Fonts\u0027 folder in an Editor by itself.\u003Cbr\u003E\nI\u0027ve moved all the fonts and the Resolver into the editor folder...\u003Cbr\u003E\nI have even stooped to whipping out the hex editor and attempting to change the name of the KSP font asset (font.bytes), which is apparently where this TMPro version is stored.\n\u003C/p\u003E\n\u003Cp\u003E\nNothing seems to work here.\n\u003C/p\u003E\n\u003Cp\u003E\nExactly how do I need to hold my mouth to get a font to load without this error????\n\u003C/p\u003E\n\u003Cp\u003E\nSomehow... I have no clue how... I got a font to install itself and it appears to have been placed in resources.assets.\u00A0 How the hell I got it in there, I have no idea.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-09-26T18:54:23Z\u0022 title=\u002209/26/2017 06:54  PM\u0022 data-short=\u00226 yr\u0022\u003ESeptember 26, 2017\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-09-26T21:15:25Z","Content":"\n\u003Cp\u003E\nI see a lot of views but not a lot of guesses as to a fix.\u00A0 So here\u0027s more details of the problem.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0I understand what\u0027s happening.\u00A0 Squad purchased a copy of TextMeshPro.\u00A0 With it, they got the source code.\u00A0 They chose to imbed the source for TMPro inside the Assets-CSharp.\u00A0 Sometime after that, TMPro was incorporated into Unity and made free.\u00A0 Rather than release\u00A0the paid version and the source code, Unity decided just to create an entirely new version with just the TMPro dll\u0027s.\u00A0 This, according to the TMPro dev, required an entirely new version:\u00A0\u003Ca href=\u0022http://digitalnativestudios.com/forum/index.php?topic=1471.0\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://digitalnativestudios.com/forum/index.php?topic=1471.0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnd that new version just happens to be incompatible with the paid version.\u00A0 To make matters worse, the paid version is apparently going to be kept completely separate from the free version.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, as modders, we\u0027re stuck with a version where we can create these fonts for localization but it\u0027s incompatible with the version imbedded in KSP.\u00A0 When I convert a TMP font asset to a KSP font asset, the TMP version number gets inserted into the KSP font asset file.\u00A0 I copy it over to the GameData, fire up KSP and it promptly informs me the fonts were built with a different version of TMPro (the free one I have installed in Unity).\n\u003C/p\u003E\n\u003Cp\u003E\nSquad is aware of this problem and supposedly there\u0027s a fix found on this post:\u00A0\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed8773784423\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/161314-no-kspasset-in-unity-menu/\u0026amp;do=embed\u0026amp;comment=3074505\u0026amp;embedComment=3074505\u0026amp;embedDo=findComment\u0022 style=\u0022height:295px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nWithout the script in that post you can\u0027t even convert a TMP asset to a KSP asset.\n\u003C/p\u003E\n\u003Cp\u003E\nWhether that script comes into play when the font asset is created, I have no idea.\u00A0 I don\u0027t code inside Unity well so I\u0027m not positive of everything that script is doing.\n\u003C/p\u003E\n\u003Cp\u003E\nBut, somehow, somewhere, I managed to create a KSP font asset from a TMP font asset and KSP loaded it.\u00A0 I can see it and use it.\n\u003C/p\u003E\n\u003Cp\u003E\nI know a number of things have to be just so in order to even create the font asset.\u00A0 For example, if the script is not in a folder called \u0022Editor\u0022, Unity\u00A0won\u0027t find it.\u00A0 I know if you move that script between folders, Unity seems to lose track of it and you have to restart Unity.\u00A0 I know sometimes, I\u0027ve had the asset bundler add the .ttf font file to the bundle even though I can click on it and is says it\u0027s not assigned to a bundle.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve even gone so far as to create an entirely new project with just parttools, TMPro,\u00A0the fonts and the Resolver script in it and I\u0027m still getting the error.\n\u003C/p\u003E\n\u003Cp\u003E\nSo... somehow, somewhere, I\u0027ve got to either lie to the script that compiles the TMPro assets into KSP assets and make it think it\u0027s using the version installed in KSP. Lie to KSP and make it think the font was created with a different TMPro\u00A0or, I\u0027ve got to somehow compile these assets with the assembly-csharp instead of the TMPro dll\u0027s.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve apparently managed that once but no idea now how I did.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-09-26T23:45:23Z\u0022 title=\u002209/26/2017 11:45  PM\u0022 data-short=\u00226 yr\u0022\u003ESeptember 26, 2017\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-10-02T05:12:57Z","Content":"\n\u003Cp\u003E\nOk, so it seems the community is as clueless on this as I am.\u00A0 100 views and no guesses.\u00A0 I therefore\u00A0beg to invoke \u003Cspan\u003E\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022114736\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/114736-jplrepo/\u0022 rel=\u0022\u0022\u003E@JPLRepo\u003C/a\u003E\u00A0who seems to be the curator of font importing due to this post:\u003C/span\u003E\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed858865289\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/157804-modders-notes-for-13/\u0026amp;do=embed\u0022 style=\u0022height:211px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u003Cspan\u003EJPL, what am I doing wrong?\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2017-10-02T08:16:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223184790\u0022 data-ipsquote-contentid=\u0022165805\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221506921177\u0022 data-ipsquote-userid=\u002278435\u0022 data-ipsquote-username=\u0022Fengist\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Fengist said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nJPL, what am I doing wrong?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou said yourself what you are doing wrong. The free version is not compatible with the paid one. Nothing can be done about it.\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2017-10-02T09:36:38Z","Content":"\n\u003Ciframe allowfullscreen=\u0022\u0022 class=\u0022ipsEmbed_finishedLoading\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed2311678035\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/161314-no-kspasset-in-unity-menu/\u0026amp;tab=comments\u0026amp;do=embed\u0026amp;comment=3074505\u0026amp;embedComment=3074505\u0026amp;embedDo=findComment#comment-3074505\u0022 style=\u0022overflow: hidden; height: 292px; max-width: 502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\nAs Sarbs said. The free version of TMPro is not the same as the paid one. It\u0027s on the list of things to work out with Unity... As they have bought TMPro - Hopefully they will sort out the differences over time.\u003Cbr\u003E\nIn the meantime try as per the link above.\n\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2017-10-02T10:21:09Z","Content":"\n\u003Cp\u003E\nYes, I have the script in Unity and it does allow an export, just apparently not an import.\u00A0 That or I\u0027ve got something out of place because I did get one font installed.\n\u003C/p\u003E\n\u003Cp\u003E\nOk, thanks.\u00A0 I\u0027ll try to wait patiently.\n\u003C/p\u003E\n"},{"CreatedByName":"Vivero","CreatedById":140195,"CreatedDateTime":"2018-03-23T06:54:46Z","Content":"\n\u003Cp\u003E\nI get the same exact error as in the original post, with KSP 1.4.1 / Unity 2017.1.3p1 / PartTools for KSP 1.4.1.\n\u003C/p\u003E\n\u003Cp\u003E\nI cannot import a custom font that I\u0027ve created with the TextMesh Pro from the Unity Asset Store. I understand there\u0027s a difference between the TMPro from the Asset Store and the TMPro embedded in KSP\u0027s Assembly-CSharp. But is there really no workaround for this yet?\n\u003C/p\u003E\n"}]}