{"TopicId":149422,"ForumId":29,"TopicTitle":"Is there way to create/manage multiple parts with one class?","CreatedByName":"Reusables","CreatedById":179182,"CreatedDateTime":"2016-10-07T05:22:11Z","PageNum":1,"Articles":[{"CreatedByName":"Reusables","CreatedById":179182,"CreatedDateTime":"2016-10-07T05:22:11Z","Content":"\n\u003Cp\u003E\nI need multiple similar parts which would have simple dependency on precence of mods/resources/etc.\n\u003C/p\u003E\n\u003Cp\u003E\nI expect that there would be too much code duplication to have class for each part, which makes me want to create and manage multiplie parts in one class.\n\u003C/p\u003E\n\u003Cp\u003E\nBut it seems that part should be created through PartModule, which seems to be loaded separately and adds single part with the property described in the class.\n\u003C/p\u003E\n\u003Cp\u003E\nIs this mean that what I want is basically impossible? Or is PartModule just for easy part addition, and is there a way to do this?\n\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2016-10-07T05:28:09Z","Content":"\n\u003Cul\u003E\u003Cli\u003E\nBase class (inheriting part module)\u00A0with specialty subclasses (you dont have to directly inherit from Part Module) sharing common logic\n\u003C/li\u003E\n\u003Cli\u003E\nConfigurable parameters (mod name, resource, etc.)?\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-07T05:28:26Z\u0022 title=\u002210/07/2016 05:28  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 7, 2016\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Reusables","CreatedById":179182,"CreatedDateTime":"2016-10-07T05:51:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222791474\u0022 data-ipsquote-contentid=\u0022149422\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475818089\u0022 data-ipsquote-userid=\u002292871\u0022 data-ipsquote-username=\u0022Crzyrndm\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 minutes ago, Crzyrndm said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cul\u003E\u003Cli\u003E\nBase class (inheriting part module)\u00A0with specialty subclasses (you dont have to directly inherit from Part Module) sharing common logic\n\u003C/li\u003E\n\u003Cli\u003E\nConfigurable parameters (mod name, resource, etc.)?\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks, but I want to determine whether or not load certain parts depend on mods/resources/etc.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso I think subclassing still causes too much code duplication, where just instances with certain properties will work.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-10-07T21:33:24Z","Content":"\n\u003Cp\u003E\nParts are not created through classes/code/plugins.\u00A0 They are created through text based config files.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you need mod/resource dependent parts (only present when the mod/resource is in the game) use ModuleManager with various NEEDS / HAS block setups.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPartModules are created through code, and added to parts through their config files.\n\u003C/p\u003E\n"},{"CreatedByName":"Reusables","CreatedById":179182,"CreatedDateTime":"2016-10-08T03:49:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222792487\u0022 data-ipsquote-contentid=\u0022149422\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475876004\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nParts are not created through classes/code/plugins.\u00A0 They are created through text based config files.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you need mod/resource dependent parts (only present when the mod/resource is in the game) use ModuleManager with various NEEDS / HAS block setups.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPartModules are created through code, and added to parts through their config files.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks, I didn\u0027t know that.\n\u003C/p\u003E\n"},{"CreatedByName":"Reusables","CreatedById":179182,"CreatedDateTime":"2016-10-08T04:00:34Z","Content":"\n\u003Cp\u003E\nThen, is there a way to have code-defined variations of models? I think that\u0027s what I need actually.\n\u003C/p\u003E\n\u003Cp\u003E\nIs this related with Unity? I\u0027d like to know!\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-10-08T18:31:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222792873\u0022 data-ipsquote-contentid=\u0022149422\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475899234\u0022 data-ipsquote-userid=\u0022167961\u0022 data-ipsquote-username=\u0022Abastro\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, Abastro said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThen, is there a way to have code-defined variations of models? I think that\u0027s what I need actually.\n\u003C/p\u003E\n\u003Cp\u003E\nIs this related with Unity? I\u0027d like to know!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nKind of, but its complicated.\u00A0 I have lots of parts in my mods that switch models while in game, but there is a ton of custom plugin code making it all work.\n\u003C/p\u003E\n\u003Cp\u003E\nThe repo/code examples/downloads can be found at: \u003Ca href=\u0022https://github.com/shadowmage45/SSTULabs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/shadowmage45/SSTULabs\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPerhaps if you gave more concise examples of what you are trying to accomplish I could give more useful details on how to make it work.\u00A0 What kind of parts are you trying to make, why/when do they switch models, and what kind of models are they switching between?\n\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2016-10-08T18:39:05Z","Content":"\n\u003Cp\u003E\nInheritance? That\u0027s what subclasses are for, after all.\n\u003C/p\u003E\n"},{"CreatedByName":"Reusables","CreatedById":179182,"CreatedDateTime":"2016-10-09T02:12:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222793518\u0022 data-ipsquote-contentid=\u0022149422\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475951475\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nKind of, but its complicated.\u00A0 I have lots of parts in my mods that switch models while in game, but there is a ton of custom plugin code making it all work.\n\u003C/p\u003E\n\u003Cp\u003E\nThe repo/code examples/downloads can be found at: \u003Ca href=\u0022https://github.com/shadowmage45/SSTULabs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/shadowmage45/SSTULabs\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nPerhaps if you gave more concise examples of what you are trying to accomplish I could give more useful details on how to make it work.\u00A0 What kind of parts are you trying to make, why/when do they switch models, and what kind of models are they switching between?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks! Basically I\u0027d like to change models depend on the conditions specified in ?\n\u003C/p\u003E\n\u003Cp\u003E\nYour code is really helpful, but more explanation on the manipulation part would be great!\n\u003C/p\u003E\n\u003Cp\u003E\nAlso can I manipulate model via connection with neighboring modules?\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-10-09T20:09:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222794060\u0022 data-ipsquote-contentid=\u0022149422\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221475979135\u0022 data-ipsquote-userid=\u0022167961\u0022 data-ipsquote-username=\u0022Abastro\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 hours ago, Abastro said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThanks! Basically I\u0027d like to change models depend on the conditions specified in ?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhat is the ? condition that you are trying to use to determine when to modify the models?\n\u003C/p\u003E\n\u003Cp\u003E\nAre you wanting to modify the models in the editor based on user interaction, based on craft composition, during flight based on specific values, or some other information?\u00A0 Are you wanting to change part functionality, or merely the models of the part?\n\u003C/p\u003E\n\u003Cp\u003E\nNeed to know when/what you are trying to do before I could give any further pointers.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Reusables","CreatedById":179182,"CreatedDateTime":"2016-10-10T03:54:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222794845\u0022 data-ipsquote-contentid=\u0022149422\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476043755\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat is the ? condition that you are trying to use to determine when to modify the models?\n\u003C/p\u003E\n\u003Cp\u003E\nAre you wanting to modify the models in the editor based on user interaction, based on craft composition, during flight based on specific values, or some other information?\u00A0 Are you wanting to change part functionality, or merely the models of the part?\n\u003C/p\u003E\n\u003Cp\u003E\nNeed to know when/what you are trying to do before I could give any further pointers.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh, I apparently forgot some words there. I want to modify model depend on\n\u003C/p\u003E\n\u003Cp\u003E\n1. Part Settings (or Tweakables?)\n\u003C/p\u003E\n\u003Cp\u003E\n2. Connected Parts\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe function would change too, but I think I can implement the functions on my own.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2016-10-10T14:46:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222795305\u0022 data-ipsquote-contentid=\u0022149422\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476071697\u0022 data-ipsquote-userid=\u0022167961\u0022 data-ipsquote-username=\u0022Abastro\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, Abastro said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOh, I apparently forgot some words there. I want to modify model depend on\n\u003C/p\u003E\n\u003Cp\u003E\n1. Part Settings (or Tweakables?)\n\u003C/p\u003E\n\u003Cp\u003E\n2. Connected Parts\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe function would change too, but I think I can implement the functions on my own.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFor #1 the code I posted has many examples of that.\u00A0 Create a public void method and add a [KSPEvent] attribute to it, filling in the stuff as you want it (gui name, enabled in editor, enabled in flight); this creates a single GUI button for that action.\u00A0 Put your code in that method to do the manipulation.\u00A0 You can swap models, alter variables, etc.\u00A0\u00A0 More advanced GUI widgets are available for floating point, string-lists, and boolean toggles; lots of examples on those are available (both online and in the code I linked).\n\u003C/p\u003E\n\u003Cp\u003E\nFor #2... it gets a LOT more complicated trying to interact with multiple parts.\u00A0 Almost to the point of impossible for some uses.\u00A0 Mostly it comes down to order-of-initialization of the parts and when to link things back up / re-check for your parts.\u00A0 Make a \u0027public void Start(){}\u0027 method and check for neighboring/connected parts in that step to initialize to the desired state.\u00A0 From there you would need to subscribe to some of the editor-part-changed and editor-vessel-changed events to re-check the connected state and update your parts internal state.\u00A0 Flight scene is generally a bit easier because you should be able to use the cached state that was determined in the editor, but may still need to check for vessel alteration (docking, decoupling).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nChanging the -function- of the part is much more difficult.\u00A0 Stock does not support run-time addition/removal of PartModules, which is where all functions come from.\u00A0 So a part is mostly stuck with whatever function it is created with in its config file.\u00A0 There is a little bit that can be done with the modules (examples of that exist in my linked code as well), but I would recommend waiting/holding off on attempting any of that until you are much more familiar with KSP modding and the workings of the stock KSP code (it has some quirks!).\n\u003C/p\u003E\n"},{"CreatedByName":"Reusables","CreatedById":179182,"CreatedDateTime":"2016-10-10T15:33:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222795681\u0022 data-ipsquote-contentid=\u0022149422\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221476110768\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor #1 the code I posted has many examples of that.\u00A0 Create a public void method and add a [KSPEvent] attribute to it, filling in the stuff as you want it (gui name, enabled in editor, enabled in flight); this creates a single GUI button for that action.\u00A0 Put your code in that method to do the manipulation.\u00A0 You can swap models, alter variables, etc.\u00A0\u00A0 More advanced GUI widgets are available for floating point, string-lists, and boolean toggles; lots of examples on those are available (both online and in the code I linked).\n\u003C/p\u003E\n\u003Cp\u003E\nFor #2... it gets a LOT more complicated trying to interact with multiple parts.\u00A0 Almost to the point of impossible for some uses.\u00A0 Mostly it comes down to order-of-initialization of the parts and when to link things back up / re-check for your parts.\u00A0 Make a \u0027public void Start(){}\u0027 method and check for neighboring/connected parts in that step to initialize to the desired state.\u00A0 From there you would need to subscribe to some of the editor-part-changed and editor-vessel-changed events to re-check the connected state and update your parts internal state.\u00A0 Flight scene is generally a bit easier because you should be able to use the cached state that was determined in the editor, but may still need to check for vessel alteration (docking, decoupling).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nChanging the -function- of the part is much more difficult.\u00A0 Stock does not support run-time addition/removal of PartModules, which is where all functions come from.\u00A0 So a part is mostly stuck with whatever function it is created with in its config file.\u00A0 There is a little bit that can be done with the modules (examples of that exist in my linked code as well), but I would recommend waiting/holding off on attempting any of that until you are much more familiar with KSP modding and the workings of the stock KSP code (it has some quirks!).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for so helpful information!\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, isn\u0027t PartModules allowed to access vessel\u0027s current state? Or is the instance more or less singleton? Then I\u0027d like to know if there would be storage for vessel-specific data.\n\u003C/p\u003E\n"}]}