{"TopicId":156704,"ForumId":29,"TopicTitle":"NRAP undo and loading from file has wrong offset","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-02-19T17:51:12Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-02-19T17:51:12Z","Content":"\n\u003Cp\u003E\nNRAP has the bottom node offset from the center, and recalculates it when the height of the part is changed. \u00A0This works fine in the editor, and when launching from the editor.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EHowever, the following problem exists, when doing an undo, when loading from a saved craft, and when going to an existing vessel in flight:\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EIf the height is changed, the part is misplaced. \u00A0If the height is less than the default, the part will be recessed into the part it is attached to. \u00A0If the height is greater than the default, the part will be in the air above the part it is attached to.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EThe height is checked in the OnStart(), but I\u0027m guessing that it\u0027s too late at that point. \u00A0I tried doing something in the OnLoad(), but the part doesn\u0027t exist at that time, so it\u0027s height can\u0027t be adjusted.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EAny ideas?\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EThanks in advance\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EEdit: \u00A0More investigation, appears that in the save file, the \u0022pos\u0022 is being saved with a wrong value. \u00A0 When I set the value to the original value, it loads correctly in the editor, yet when I load the same vessel\u00A0on the launchpad, it\u0027s now floating in the air. \u00A0If I build a ship, go to the launchpad and then save the game and reload, it\u0027s still positioned correctly.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003Eso the problem is only in the editor for some reason when it loads from a save file\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nProblem fixed, I had accidently disabled a check for initialization from the original mod\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-02-19T19:28:09Z\u0022 title=\u002202/19/2017 07:28  PM\u0022 data-short=\u00227 yr\u0022\u003EFebruary 19, 2017\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"}]}