{"TopicId":138168,"ForumId":29,"TopicTitle":"Need some help with VesselRenameDialog","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-04-26T13:57:02Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-04-26T13:57:02Z","Content":"\n\u003Cp\u003E\nI\u0027d like to be able to use the VesselRenameDialog class to get name and vesseltype for things which are not (yet) vessels. \u00A0But I\u0027m having a problem, am hoping that someone can give me a clue.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m calling the following from a part module which has a right-click action, all that is done during the right click is below:\n\u003C/p\u003E\n\u003Cp\u003E\nThis code will bring up the dialog for the current vessel:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EKSP.UI.Screens.VesselRenameDialog.Spawn(FlightGlobals.ActiveVessel, null, null, true, VesselType.Probe);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nSo I figured that I\u0027d just create a new vessel. add a Part with a\u00A0ModuleCommand to it and use this new vessel, but the following code,gets a null reference error:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EVessel v = new Vessel ();\nv.vesselType = FlightGlobals.ActiveVessel.vesselType;\n// this line causes a null reference error   v.name = FlightGlobals.ActiveVessel.name;\nv.vesselName = FlightGlobals.ActiveVessel.vesselName;\nPart p = new Part ();\n// This line causes a null reference error    p.name = \u0022test1\u0022;\np.CrewCapacity = 0;\np.mass = 0;\np.vesselType = VesselType.Probe;\np.AddModule(\u0022ModuleCommand\u0022);\n\nv.Parts.Add (p);\nKSP.UI.Screens.VesselRenameDialog.Spawn(v, onAccept, onDismiss, true, VesselType.Probe);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nHere is the error:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ENullReferenceException\n  at (wrapper managed-to-native) UnityEngine.Component:get_gameObject ()\n  at Part.AddModule (System.String moduleName) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at Lib.Stager.ActivateEvent () [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at BaseEvent.Invoke () [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at UIPartActionButton.OnClick () [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at UnityEngine.Events.InvokableCall.Invoke (System.Object[] args) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at UnityEngine.Events.InvokableCallList.Invoke (System.Object[] parameters) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at UnityEngine.Events.UnityEventBase.Invoke (System.Object[] parameters) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at UnityEngine.Events.UnityEvent.Invoke () [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at UnityEngine.UI.Button.Press () [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at UnityEngine.UI.Button.OnPointerClick (UnityEngine.EventSystems.PointerEventData eventData) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at UnityEngine.EventSystems.ExecuteEvents.Execute (IPointerClickHandler handler, UnityEngine.EventSystems.BaseEventData eventData) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\n  at UnityEngine.EventSystems.ExecuteEvents.Execute[IPointerClickHandler] (UnityEngine.GameObject target, UnityEngine.EventSystems.BaseEventData eventData, UnityEngine.EventSystems.EventFunction\u00601 functor) [0x00000] in \u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Eunknown\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E:0\nUnityEngine.Debug:Internal_LogException(Exception, Object)\nUnityEngine.Debug:LogException(Exception)\nUnityEngine.EventSystems.ExecuteEvents:Execute(GameObject, BaseEventData, EventFunction\u00601)\nUnityEngine.EventSystems.StandaloneInputModule:ProcessMousePress(MouseButtonEventData)\nUnityEngine.EventSystems.StandaloneInputModule:ProcessMouseEvent(Int32)\nUnityEngine.EventSystems.StandaloneInputModule:ProcessMouseEvent()\nUnityEngine.EventSystems.StandaloneInputModule:Process()\nUnityEngine.EventSystems.EventSystem:Update()\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThanks in advance\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-04-26T14:33:23Z\u0022 title=\u002204/26/2016 02:33  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 26, 2016\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2016-04-26T19:02:06Z","Content":"\n\u003Cp\u003E\nThis likely isn\u0027t working because Part and Vessel are MonoBehaviours, and that using the constructor definitely is not the correct way to spawn a new MonoBehaviour, and if the stuff in the unity functions are critical, they will fail. You\u0027re also assuring yourself that the Update and FixedUpdate methods for both objects you spawned won\u0027t ever be called.\n\u003C/p\u003E\n\u003Cp\u003E\ntl;dr: don\u0027t use the constructor if you want to spawn a MonoBehaviour object and want it to behave like a MonoBehaviour object.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-04-26T19:02:57Z\u0022 title=\u002204/26/2016 07:02  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 26, 2016\u003C/time\u003E by stupid_chris\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-04-26T20:42:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222541635\u0022 data-ipsquote-contentid=\u0022138168\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221461697326\u0022 data-ipsquote-userid=\u002262017\u0022 data-ipsquote-username=\u0022stupid_chris\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, stupid_chris said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis likely isn\u0027t working because Part and Vessel are MonoBehaviours, and that using the constructor definitely is not the correct way to spawn a new MonoBehaviour, and if the stuff in the unity functions are critical, they will fail. You\u0027re also assuring yourself that the Update and FixedUpdate methods for both objects you spawned won\u0027t ever be called.\n\u003C/p\u003E\n\u003Cp\u003E\ntl;dr: don\u0027t use the constructor if you want to spawn a MonoBehaviour object and want it to behave like a MonoBehaviour object.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTurned out that I was doing it wrong. \u00A0I\u0027ve totally rewritten it, but now I need to use the icons which are in the VesselRenameDialog dialog. \u00A0 \u00A0Any ideas?\n\u003C/p\u003E\n"},{"CreatedByName":"stupid_chris","CreatedById":62017,"CreatedDateTime":"2016-04-27T09:40:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222541856\u0022 data-ipsquote-contentid=\u0022138168\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221461703322\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTurned out that I was doing it wrong. \u00A0I\u0027ve totally rewritten it, but now I need to use the icons which are in the VesselRenameDialog dialog. \u00A0 \u00A0Any ideas?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo you solely need the icons are you need the entire dialog?\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-04-27T17:41:45Z","Content":"\n\u003Cp\u003E\nJust the icons\n\u003C/p\u003E\n"}]}