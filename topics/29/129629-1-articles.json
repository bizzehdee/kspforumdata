{"TopicId":129629,"ForumId":29,"TopicTitle":"SAS Mode Keybinds [HELP]","CreatedByName":"Enma.Darei","CreatedById":144336,"CreatedDateTime":"2016-01-10T12:42:44Z","PageNum":1,"Articles":[{"CreatedByName":"Enma.Darei","CreatedById":144336,"CreatedDateTime":"2016-01-10T12:42:44Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to write a plugin that will switch between the different SAS modes using the num keys. I already have that bit working, when I press a numkey the craft does indeed steer towards the desired vector and stays there. However the little GUI indicators next to the navball don\u0027t chage to reflect whatever mode SAS is currently on. It stays on the Stability Assist icon.\n\u003C/p\u003E\n\u003Cp\u003E\nMy code looks like this(it\u0027s probably not very good, this is the first time I try to code a KSP mod)\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint\u0022\u003E\nnamespace AutoPilotKeys\n{\n\n    [KSPAddon(KSPAddon.Startup.Flight, false)]\n    public class AutoPilotKeys : MonoBehaviour\n    {\n        void Update()\n        {\n            \n            if (Input.GetKeyDown(KeyCode.Keypad7)) \n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.Prograde); \n            }\n\n            if (Input.GetKeyDown(KeyCode.Keypad9)) \n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.StabilityAssist); \n            }\n\n            if (Input.GetKeyDown(KeyCode.Keypad8)) \n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.Retrograde); \n            }\n\n            if (Input.GetKeyDown(KeyCode.Keypad4))\n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.Normal);\n            }\n\n            if (Input.GetKeyDown(KeyCode.Keypad5))\n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.Antinormal);\n            }\n\n            if (Input.GetKeyDown(KeyCode.Keypad1))\n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.RadialIn);\n            }\n\n            if (Input.GetKeyDown(KeyCode.Keypad2))\n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.RadialOut);\n            }\n\n            if (Input.GetKeyDown(KeyCode.Keypad6))\n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.Target);\n            }\n\n            if (Input.GetKeyDown(KeyCode.Keypad3))\n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.AntiTarget);\n            }\n\n            if (Input.GetKeyDown(KeyCode.Keypad0))\n            {\n                FlightGlobals.ActiveVessel.Autopilot.SetMode(VesselAutopilot.AutopilotMode.Maneuver);\n            }\n\n        }\n    }\n}\u003C/pre\u003E\n\u003Cp\u003E\nI thought setting the autopilot mode would automatically make the indicator change to reflect the current mode, but apprently it doesn\u0027t. What am I missing?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-01-10T13:56:31Z","Content":"\n\u003Cp\u003E\nYou need to find the\u00A0VesselAutopilotUI and see what you can do with it, but not much seems to be public...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nEdit : I guess something like\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nVesselAutopilotUI \u00A0ui =\u00A0FindObjectsOfType(typeof(VesselAutopilotUI )) as VesselAutopilotUI;\nfor (int i; i\u0026lt;ui.modeButtons.Length; i\u002B\u002B)\n{\n\tif (\u00A0i == (int)FlightGlobals.ActiveVessel.Autopilot.mode)\n\t\tui.modeButtons[i].Enable(false);\n\telse\n\t\tui.modeButtons[i].Disable(false);\n}\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-10T14:04:52Z\u0022 title=\u002201/10/2016 02:04  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 10, 2016\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-01-10T19:07:42Z","Content":"\n\u003Cp\u003E\nIt\u0027s set by index number using\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html\u0022\u003E\nMonoBehaviorMethods.setSASUI(0);\u003C/pre\u003E\n\u003Cp\u003E\n0 being the basic stability assist.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Ca href=\u0022https://github.com/SirDiazo/ModActions/blob/master/ModActions/Execute.cs#L219\u0022 rel=\u0022external nofollow\u0022\u003EI\u0027ve worked out which number is what here.\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n"},{"CreatedByName":"Enma.Darei","CreatedById":144336,"CreatedDateTime":"2016-01-11T00:08:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222355975\u0022 data-ipsquote-contentid=\u0022129629\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221452452862\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt\u0027s set by index number using\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan\u003EMonoBehaviorMethods.setSASUI(0);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n0 being the basic stability assist.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\u003Ca href=\u0022https://github.com/SirDiazo/ModActions/blob/master/ModActions/Execute.cs#L219\u0022 rel=\u0022external nofollow\u0022\u003EI\u0027ve worked out which number is what here.\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis and a quick look at the RasterPropMonitor code helped me get it working exactly as I wanted.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks a lot!!\n\u003C/p\u003E\n"}]}