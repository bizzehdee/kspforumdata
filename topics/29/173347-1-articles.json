{"TopicId":173347,"ForumId":29,"TopicTitle":"Teleport to location","CreatedByName":"Hotel26","CreatedById":139095,"CreatedDateTime":"2018-04-01T12:23:11Z","PageNum":1,"Articles":[{"CreatedByName":"Hotel26","CreatedById":139095,"CreatedDateTime":"2018-04-01T12:23:11Z","Content":"\n\u003Cp\u003E\nI am making a tool that edits a quicksave and teleports a vessel from the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E runway to the Baikerbanur grass strip and I\u0027m turning it into a proper KSP plug-in.\u00A0 I\u0027m almost there [first mod in \u0026lt;24 hours!?] but am bashing my head on one thing long enough to call in help.\n\u003C/p\u003E\n\u003Cp\u003E\nThe vessel is going to go from \u0022landed on the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E runway\u0022 to \u0022landed at Baikerbanur\u0022, which really simplifies the deal.\u00A0 I have a target lon, lat, alt and a workable attitude quaternion (\u0022rot\u0022).\n\u003C/p\u003E\n\u003Cp\u003E\nvessel.SetRotation(...) works.\u00A0 I\u0027m guessing I need an instance method such as SetPosition to change the surface location.\u00A0 I\u0027m not working in (x,y,z) but in (lon,lat,alt).\u00A0 A pointer to some open source code that does this the simple and recommended way would be enough to break me loose, I think.\u00A0 (I\u0027ve been able to get the vessel to go from 69m to 422m (the target altitude at BKB) and to rotate attitude, but lon/lat won\u0027t budge when I set them directly via the Vessel fields.)\n\u003C/p\u003E\n\u003Cp\u003E\nI can convert lon/lat to Cartesian if I have to.\u00A0 And in the absence of advice, I guess I can check what the (x,y,z) for \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E looks like...\n\u003C/p\u003E\n\u003Cp\u003E\n---\n\u003C/p\u003E\n\u003Cp\u003E\nOne unrelated question is that I am posting status messages to the screen to the user.\u00A0 I\u0027d like the error messages in a different color from the standard off-green.\u00A0 I\u0027ve seen there is a kind of standard orange in use: e.g. solar panels broken by aero forces.\u00A0 Cannot see anything in the classes for this.\u00A0\u00A0 (I\u0027ve been using this site, \u003Ca href=\u0022http://kspapi.forwoods.org/#/classes/ScreenMessage\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kspapi.forwoods.org/#/classes/ScreenMessages\u003C/a\u003E,\u00A0 for documentation because I cannot find any official documentation for 1.3.1.\u00A0 Some sites I\u0027ve found just come up with mostly blank pages...??)\n\u003C/p\u003E\n\u003Cp\u003E\nAny help would be really appreciated.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-04-27T11:01:18Z\u0022 title=\u002204/27/2018 11:01  AM\u0022 data-short=\u00226 yr\u0022\u003EApril 27, 2018\u003C/time\u003E by Hotel26\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Hotel26","CreatedById":139095,"CreatedDateTime":"2018-04-01T12:39:15Z","Content":"\n\u003Cp\u003E\nThis looks promising:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0\u00A0 CelestialBody body = vessel.mainBody;\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0\u00A0 vessel.SetPosition(body.GetWorldSurfacePosition(lat2, lng2, alt2 \u002B hgt));\n\u003C/p\u003E\n\u003Cp\u003E\nand indeed, it momentarily makes me appear over some ocean...\u00A0 I wonder if I have to call something to notify KSP that the ActiveVessel has effectively \u0022changed scene\u0022...?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2018-04-01T13:18:52Z","Content":"\n\u003Cp\u003E\nWould it not be easier to simply spawn the craft to the airstrip directly from the \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E?\u00A0 As done by Kerbal Konstructs\u00A0 for years and now Squad , it\u00A0 would seem to be a less troublesome method as it only requires the craft to be packed and reloaded once\n\u003C/p\u003E\n"},{"CreatedByName":"Hotel26","CreatedById":139095,"CreatedDateTime":"2018-04-01T13:23:27Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223341481\u0022 data-ipsquote-contentid=\u0022173347\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522588732\u0022 data-ipsquote-userid=\u002250907\u0022 data-ipsquote-username=\u0022SpannerMonkey(smce)\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, SpannerMonkey(smce) said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs done by Kerbal Konstructs\u00A0 for years and now Squad\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGer_space recommended that I use Kerbal Konstructs, too.\u00A0 I took a look at it and it looks like a pretty big and capable mod.\u00A0 Are you associated with that mod, by chance; i.e. as an author or maintainer?\n\u003C/p\u003E\n\u003Cp\u003E\nWhen you say, \u0022now Squad\u0022, I\u0027m guessing you mean 1.4?\n\u003C/p\u003E\n"},{"CreatedByName":"SpannerMonkey(smce)","CreatedById":50907,"CreatedDateTime":"2018-04-01T15:14:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223341486\u0022 data-ipsquote-contentid=\u0022173347\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522589007\u0022 data-ipsquote-userid=\u0022139095\u0022 data-ipsquote-username=\u0022Hotel26\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Hotel26 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhen you say, \u0022now Squad\u0022, I\u0027m guessing you mean 1.4?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes.\u003Cbr\u003E\nHI, no , no direct association other than occasional contributor, fan and user since it was kerbtown.\u003Cbr\u003E\nNot even suggesting that you not do your thing, just that in some way at least the problem has been solved a couple of times already.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnother one sprung to mind, and one that is free to modify and use with\u00A0 credit, Firespitter has a launch to water or wherever facility, a bit broken right now it seems but it definitely still move craft around . That can be found here \u003Ca href=\u0022https://github.com/snjo/Firespitter/search?utf8=%E2%9C%93\u0026amp;q=water\u002Blaunch\u0026amp;type=\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/snjo/Firespitter/search?utf8=\u2713\u0026amp;q=water\u002Blaunch\u0026amp;type=\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Hotel26","CreatedById":139095,"CreatedDateTime":"2018-04-02T08:30:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223341608\u0022 data-ipsquote-contentid=\u0022173347\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522595651\u0022 data-ipsquote-userid=\u002250907\u0022 data-ipsquote-username=\u0022SpannerMonkey(smce)\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 hours ago, SpannerMonkey(smce) said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNot even suggesting that you not do your thing, just that in some way at least the problem has been solved a couple of times already.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you for that as it does ease my mind!\u00A0 And I am glad you and Ger_space brought Kerbal Konstructs to my attention.\u00A0 I do have strong reasons for making this mod I am working on.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll be announcing the next release of my \u0022add-on\u0022 as a \u003Cem\u003Ebona fide\u003C/em\u003E KSP plug-in shortly and \u003Cstrong\u003EI will be very happy to put in a plug for Kerbal Konstructs, \u003C/strong\u003Ein that announcement, and recommend that potential down-loaders familiarize themselves with its capabilities at the same time.\u00A0 I think KK is a pretty fine contribution to the KSP community and I commend you guys for bearing a large commitment in maintaining/testing it.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Hotel26","CreatedById":139095,"CreatedDateTime":"2018-04-27T07:58:36Z","Content":"\n\u003Cp\u003E\nI am very, very close but still requesting assistance.\n\u003C/p\u003E\n\u003Cp\u003E\nI can teleport once with no problem.\u00A0 Subsequent teleports encounter a shaking that occurs on all craft in the neighborhood but ceases once I have changed focus away and back as shown in the following video:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022\u003E\n\u003Cdiv\u003E\n\u003Ciframe allowfullscreen=\u0022true\u0022 frameborder=\u00220\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/Cnj7kY-ymTo?feature=oembed\u0022 width=\u0022480\u0022\u003E\u003C/iframe\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nThe log shows an error reported by \u003Cstrong\u003ERasterPropMonitorComputer\u003C/strong\u003E presumably provoked by some error on my part.\u00A0 The vessel contains a crew member, but I have done nothing in particular with regard to it.\n\u003C/p\u003E\n\u003Cp\u003E\n[LOG 15:14:37.255] Unpacking Aeris 3A\u003Cbr\u003E\n[LOG 15:14:40.509] Packing Aeris 3A for orbit\u003Cbr\u003E\n[LOG 15:14:40.511] Telemagic:\u00A0 teleported to Baikerbanur 20.6 -146.6 423\u003Cbr\u003E\n[LOG 15:14:40.561] [Aeris 3A]: landed - waiting for ground contact to resume physics...\u003Cbr\u003E\u003Cstrong\u003E[ERR 15:14:40.564] [RasterPropMonitorComputer]: UpdateLocalCrew() - no internal model!\u003C/strong\u003E\u003Cbr\u003E\n[LOG 15:14:41.596] [FlightIntegrator]: Reloaded drag cube for zeroed cube root part Mark1Cockpit (Aeris 3A) on vessel Aeris 3A\u003Cbr\u003E\n[LOG 15:14:41.596] [FlightIntegrator]: Vessel Aeris 3A has been unloaded 9.75999999999112, applying analytic temperature 301.749351045848\u003Cbr\u003E\n[LOG 15:14:44.651] Unpacking Aeris 3A\u003Cbr\u003E\n[LOG 15:14:44.681] [Aeris 3A]: ground contact! - error. Moving Vessel\u00A0 down -0.230m\u003Cbr\u003E\n[LOG 15:14:44.681] Unpacking Aeris 3A\u003Cbr\u003E\n[LOG 15:14:49.191] [UIMasterController]: ShowUI\n\u003C/p\u003E\n\u003Cp\u003E\nThe code sequence I use is:\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0\u00A0 CelestialBody body = vessel.mainBody;\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0var telePos = body.GetWorldSurfacePosition(lat2, lng2, alt2 \u002B hgt) - body.position;\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0var teleVel = Vector3d.Cross(body.angularVelocity, telePos);\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// convert from world space to orbit space\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0telePos = telePos.xzy;\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0teleVel = teleVel.xzy;\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0// counter for the momentary fall when on rails (about one second)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0teleVel \u002B= telePos.normalized * (body.gravParameter / telePos.sqrMagnitude);\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0var orbit = Clone(vessel.orbitDriver.orbit);\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0orbit.UpdateFromStateVectors(telePos, teleVel, body, Planetarium.GetUniversalTime());\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0vessel.Landed = false;\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0var oldUp = vessel.orbit.pos.xzy.normalized;\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0var newUp = telePos.xzy.normalized;\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0qrot = Quaternion.FromToRotation(oldUp, newUp) * vessel.vesselTransform.rotation;\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0SetOrbit(vessel, orbit);\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0vessel.SetRotation(qrot);\u00A0\u00A0 // mult2(qrot, rot) [TM]\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nCan anyone throw any light on this, please?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2018-04-27T12:02:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223365056\u0022 data-ipsquote-contentid=\u0022173347\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524815916\u0022 data-ipsquote-userid=\u0022139095\u0022 data-ipsquote-username=\u0022Hotel26\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Hotel26 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nCan anyone throw any light on this, please?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe error occurs when RPM tries to update crew information on a pod that does not have an IVA.\u00A0 According to the comments I left myself in that code, this is something that can happen sometimes on spawn.\u00A0 If the error does not keep repeating in the log, it\u0027s safe to ignore.\n\u003C/p\u003E\n"},{"CreatedByName":"Hotel26","CreatedById":139095,"CreatedDateTime":"2018-04-27T12:07:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223365166\u0022 data-ipsquote-contentid=\u0022173347\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221524830578\u0022 data-ipsquote-userid=\u002260950\u0022 data-ipsquote-username=\u0022MOARdV\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, MOARdV said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nit\u0027s safe to ignore.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGood information, thank you.\u00A0 I will keep hunting...\n\u003C/p\u003E\n"},{"CreatedByName":"Hotel26","CreatedById":139095,"CreatedDateTime":"2018-05-06T06:42:41Z","Content":"\n\u003Cp\u003E\nFor anyone interested in this topic, there is a class called \u003Cstrong\u003EVesselTeleporter \u003C/strong\u003Ein the latest KSP API.\u00A0 I\u0027m working in 1.3.1, so I am assuming it may be a new class.\n\u003C/p\u003E\n\u003Cp\u003E\n(Although, be advised, it inherits from EditorWindow and may be predicated upon deployment from an Assembly Building.)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-05-06T10:25:05Z\u0022 title=\u002205/06/2018 10:25  AM\u0022 data-short=\u00226 yr\u0022\u003EMay 6, 2018\u003C/time\u003E by Hotel26\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sumghai","CreatedById":66272,"CreatedDateTime":"2018-07-19T21:59:21Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022color:#27ae60;\u0022\u003E\u003Cstrong\u003E[MOD - Moved to C# Plugin Development Help and Support]\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"DoctorDavinci","CreatedById":150019,"CreatedDateTime":"2018-07-19T23:16:22Z","Content":"\n\u003Cp\u003E\nThere is a mod for that\u00A0\u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022:wink:\u0022\u003E\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed3994507185\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/176348-ksp-v14x-move-launch-development-thread-select-alternative-launch-locations-from-inside-the-editor-7218/\u0026amp;do=embed\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Dagger","CreatedById":147766,"CreatedDateTime":"2018-07-22T09:25:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223372106\u0022 data-ipsquote-contentid=\u0022173347\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221525588961\u0022 data-ipsquote-userid=\u0022139095\u0022 data-ipsquote-username=\u0022Hotel26\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/6/2018 at 8:42 AM, Hotel26 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor anyone interested in this topic, there is a class called \u003Cstrong\u003EVesselTeleporter \u003C/strong\u003Ein the latest KSP API.\u00A0 I\u0027m working in 1.3.1, so I am assuming it may be a new class.\n\u003C/p\u003E\n\u003Cp\u003E\n(Although, be advised, it inherits from EditorWindow and may be predicated upon deployment from an Assembly Building.)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI see that class in the api (\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_vessel_teleporter.html#adf79a0a401fd2d6512111f68a448e93d\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_vessel_teleporter.html#adf79a0a401fd2d6512111f68a448e93d\u003C/a\u003E) but I can\u0027t use it even in 1.4.4\u003Cbr\u003E\nI\u0027m also interested in this as with LMP I\u0027m having issues when moving a vessel that is on physics range (unpacked)\n\u003C/p\u003E\n"}]}