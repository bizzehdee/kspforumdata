{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":3,"Articles":[{"CreatedByName":"ForumHelper","CreatedById":8635,"CreatedDateTime":"2012-03-06T22:13:28Z","Content":"\n\u003Cp\u003EIt worked like that when I used it last time \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-03-07T01:33:25Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022swebonny\u0022 data-cite=\u0022swebonny\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ETry looking at r4am0n\\\u0027s and CardBoardBoxProcessor\\\u0027s MechJeb Autopilot. They have a GUI which you can see in their source code, you learn a lot by reading the code. \u003C/p\u003E\u003Cp\u003EThen we have Unity\\\u0027s own documentation: \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://unity3d.com/support/documentation/ScriptReference/30_search.html?q=gui\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://unity3d.com/support/documentation/ScriptReference/30_search.html?q=gui\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAnd some basic tutorial: \u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://unity3d.com/support/documentation/Components/GUI%20Scripting%20Guide.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://unity3d.com/support/documentation/Components/GUI%20Scripting%20Guide.html\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EHow you apply it to KSP you\\\u0027ll have to figure out yourself, or by help from other people\\\u0027s source codes.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, I didn\\\u0027t see the Autopilot mod. I was going off of a unity tutorial, but wasn\\\u0027t sure how to apply to KSP.\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-03-07T02:13:20Z","Content":"\n\u003Cp\u003EStill cannot figure out \u003Cem\u003Ewhen\u003C/em\u003E the part creates its Rigidbodies :\\\u0027(. I\\\u0027ve seen \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=8104.msg118982#msg118982\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003Etoastar\\\u0027s\u003C/strong\u003E post\u003C/a\u003E, tried most of the methods listed there and still have not succeeded.\u003C/p\u003E\u003Cp\u003EThe problem is that I need to create \u003Cem\u003Emy\u003C/em\u003E physics objects \u003Cem\u003Eafter \u003C/em\u003Ethe game has created \u003Cem\u003Eits\u003C/em\u003E ones, otherwise it spams error messages, parts explode at launch etc. Could someone give me a hint please?\u003C/p\u003E\u003Cp\u003EUPD. Which methods post messages \u003Cem\u003E\\\u0027[craft-name]: ground contact! - error: XXXm\\\u0027 \u003C/em\u003Eand \u003Cem\u003E\\\u0027Unpacking craft-name\\\u0027 \u003C/em\u003Eto the console? Obviously \u003Cstrong\u003Enot \u003C/strong\u003Ethe \u003Cem\u003EonUnpack() \u003C/em\u003Emethod and not \u003Cem\u003EonPartTouchdown()\u003C/em\u003E, I\\\u0027ve already tried to override them...\u003C/p\u003E\n"},{"CreatedByName":"Iskierka","CreatedById":2116,"CreatedDateTime":"2012-03-07T08:34:22Z","Content":"\n\u003Cp\u003E@Tosh: onUnpack() and onPartTouchdown() are most likely part-specific, where the methods handling those messages are most likely attached to the vessel overall. I don\\\u0027t know precisely what you\\\u0027re doing, but some of my code requires to be certain that all parts are spawned in before it activates, else \u003Ca href=\u0022https://dl.dropbox.com/u/12899858/Screencap/ScreenShot715.png\u0022 rel=\u0022external nofollow\u0022\u003Ebad things happen\u003C/a\u003E, and to do that I use if (Rigidbody.isKinematic == true) {}, which checks whether the game has just unfrozen the craft. If you don\\\u0027t care so much about all parts being present, and just that the rigidbody exists, if (Rigidbody != null) {} may help. And if you need to check this for all parts, foreach (Part partcheck in vessel.parts) {} will let you cycle through them all.\u003C/p\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-03-07T08:38:04Z","Content":"\n\u003Cp\u003EI\\\u0027ve been struggling to get a GUI working properly. I can display the GUI, but it doesn\\\u0027t seem to be registering button presses.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://snipt.org/ufPj3\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://snipt.org/ufPj3\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIf someone can tell me why this doesn\\\u0027t add \u0027abort\u0027 to the flight logger when you click the \u0027ABORT\u0027 button it would be most appreciated.\u003C/p\u003E\n"},{"CreatedByName":"r4m0n","CreatedById":5404,"CreatedDateTime":"2012-03-07T14:14:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Zool\u0022 data-cite=\u0022Zool\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EI\\\u0027ve been struggling to get a GUI working properly. I can display the GUI, but it doesn\\\u0027t seem to be registering button presses.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://snipt.org/ufPj3\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://snipt.org/ufPj3\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIf someone can tell me why this doesn\\\u0027t add \u0027abort\u0027 to the flight logger when you click the \u0027ABORT\u0027 button it would be most appreciated.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe code looks right... I\\\u0027ve had a few problems with focus, you can try GUI.FocusWindow() to see if it helps.\u003C/p\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-03-07T15:10:36Z","Content":"\n\u003Cp\u003EGUI.FocusWindow() didn\\\u0027t fix it, it did break every other menu though, even after running UnfocusWindow \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EWeirdly, the code I posted works if you left and right click at the same time.\u003C/p\u003E\u003Cp\u003EGot it! \u003Ca href=\u0022http://snipt.org/ufTb9\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://snipt.org/ufTb9\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI had to use GUILayout.BeginVertical() \u0026amp; GUILayout.EndVertical()\u003C/p\u003E\u003Cp\u003EThis shouldn\\\u0027t be necessary according to the Unity documentation. \u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-03-07T15:39:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Iskierka\u0022 data-cite=\u0022Iskierka\u0022\u003E\u003Cdiv\u003E@Tosh: onUnpack() and onPartTouchdown() are most likely part-specific, where the methods handling those messages are most likely attached to the vessel overall. -snip- \u003C/div\u003E\u003C/blockquote\u003EIskierka, thanks for your reply. It seems we\\\u0027re solving the same problem: spinning wheels \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003Cp\u003EI wonder is there a way to attach a delegate to that vessel-handling code. The problem is that in some launches the game tries to remove all the vessel\\\u0027s rigidbodies in an arbitrary moment (not notifying the part at all!) -- and fails if the part has already created some physics above them. And in \u003Cem\u003Eother \u003C/em\u003Elaunches the game starts to analyze ground collisions in some weird way (probably not taking into account newly created physics?), which obviously leads to an explosion...\u003C/p\u003E\u003Cp\u003EWell, I\\\u0027ll fiddle with the code a couple of days before releasing it... with all the bugs it contains 8) \u003C/p\u003E\n"},{"CreatedByName":"C7Studios","CreatedById":3895,"CreatedDateTime":"2012-03-07T17:16:55Z","Content":"\n\u003Cp\u003ETosh, what is it that you\\\u0027re trying to accomplish exactly? I may be able to assist if I have a clearer picture of the situation. I understand you\\\u0027re wanting to register a rigidbody colliding the with ground? Sometimes that why can be more important then the what \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-03-07T19:16:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022C7Studios\u0022 data-cite=\u0022C7Studios\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ETosh, what is it that you\\\u0027re trying to accomplish exactly? I may be able to assist if I have a clearer picture of the situation. I understand you\\\u0027re wanting to register a rigidbody colliding the with ground? Sometimes that why can be more important then the what \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003EYes, I\\\u0027m trying to create a \\\u0027classic\\\u0027 four-wheel cart from Unity tutorial -- parent rigidbody and 4 bodies with WheelColliders attached. For now (thanks to \u003Cstrong\u003EIskierka\u003C/strong\u003E) the only problem that\\\u0027s left is the cart collides with ground on launch in spite that (according to console log) the wheels are already created. Though it can be fixed by placing the cart on the top of several StackDecouplers \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. \u003Cp\u003EI\\\u0027ll release the code in a day or two (after fixing some animation issues), then we\\\u0027ll look into it together.\u003C/p\u003E\n"},{"CreatedByName":"C7Studios","CreatedById":3895,"CreatedDateTime":"2012-03-07T20:16:46Z","Content":"\n\u003Cp\u003EWell there are several ways to handle the problem.\u003C/p\u003E\u003Cp\u003E In my case, I\\\u0027m using KSP\\\u0027s built in part features, to create the 3d model and get a node collider (rigidbody) for the part. This handles all the logic, attachment and instantiation in the VAB. Now it appears that whenever the the part is instantiated, it has a (OnPartStart) method that is called once. This is where you can do any functions that require access to a game object. Since I\\\u0027ve now got a fully loaded part, I create and configure my wheel collider, then attach it to transform.FindChild(\u0027model\u0027). It will initially spawn resting against the node collider of the part. Then as the simulation starts and the physics come online, it will \u0027pop\u0027 you up to rest on the wheel collider instead. But the actual part itself must have a master node_collider. As this handles the logic for part destruction. If at any time the transform origin for the \u0027part\u0027 is below ground it will be destroyed. I also make sure that my wheel collider is below the rigidbody for the part. I know its a little complicated. If you want, just PM me and I\\\u0027ll share my source code with you so you can see how I did it. I\\\u0027m not ready to release it yet, because I\\\u0027m recoding the entire thing to support advanced suspensions and drive trains. But I figure the creation of the wheel collider is the part you are interested in.\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-03-08T06:48:41Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EWell, wheels problems are solved. But here\\\u0027s another one: how do I to determine which body am I currently orbiting? I guess it must be somewhere in \u003C/span\u003E\u003Cem\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EFlightGlobals \u003C/span\u003E\u003C/em\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003Eclass, but I\\\u0027ve no documentation on it...\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EUPD. Huh, nevermind, I\\\u0027ve VS installed. It\\\u0027s \u003Cem\u003EFlightGlobals.currentMainBody\u003C/em\u003E.\u003C/p\u003E\n"},{"CreatedByName":"Alchemist","CreatedById":8825,"CreatedDateTime":"2012-03-08T18:30:22Z","Content":"\n\u003Cp\u003EIs it possible to process data during reading them from part.cfg. Like get one or several values from there, rewrite them to some array, get the same fields again, rewrite them to other position in the array and so on... \u003C/p\u003E\u003Cp\u003EIf that\\\u0027s not wery good idea, what\\\u0027s the best way to read a text file in the part folder (and how to get the proper path\u0026amp;) immidiately after cfg processing?\u003C/p\u003E\u003Cp\u003EI just have some ideas that are not very static... \u003C/p\u003E\n"},{"CreatedByName":"RPGprayer","CreatedById":8534,"CreatedDateTime":"2012-03-08T22:40:22Z","Content":"\n\u003Cp\u003EDoes anyone know how I would add a lens flare to a light, alternatively create a particle emitter, please?\u003C/p\u003E\n"},{"CreatedByName":"Zool","CreatedById":3152,"CreatedDateTime":"2012-03-09T00:33:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alchemist\u0022 data-cite=\u0022Alchemist\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIs it possible to process data during reading them from part.cfg. Like get one or several values from there, rewrite them to some array, get the same fields again, rewrite them to other position in the array and so on... \u003C/p\u003E\u003Cp\u003EIf that\\\u0027s not wery good idea, what\\\u0027s the best way to read a text file in the part folder (and how to get the proper path\u0026amp;) immidiately after cfg processing?\u003C/p\u003E\u003Cp\u003EI just have some ideas that are not very static...\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAre you planning on the .cfg having changed when you re-read the fields?\u003C/p\u003E\u003Cp\u003EIf you need to read a file you should be able to use the standard System functions to accomplish that. Just look up a c# file i/o example.\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-03-09T00:47:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alchemist\u0022 data-cite=\u0022Alchemist\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EIs it possible to process data during reading them from part.cfg. Like get one or several values from there, rewrite them to some array, get the same fields again, rewrite them to other position in the array and so on... \u003C/p\u003E\u003Cp\u003EIf that\\\u0027s not wery good idea, what\\\u0027s the best way to read a text file in the part folder (and how to get the proper path\u0026amp;) immidiately after cfg processing?\u003C/p\u003E\u003Cp\u003EI just have some ideas that are not very static...\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003EI\\\u0027ve seen such a code in MechJeb project. See \u003Ca href=\u0022http://svn.mumech.com/KSP/trunk/MuMechLib/MechJeb.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://svn.mumech.com/KSP/trunk/MuMechLib/MechJeb.cs\u003C/a\u003E\n"},{"CreatedByName":"dodrian","CreatedById":12564,"CreatedDateTime":"2012-03-09T08:43:35Z","Content":"\n\u003Cp\u003ECould someone explain the maths in the \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=8021.0\u0022 rel=\u0022external nofollow\u0022\u003EMechJeb\u003C/a\u003E plugin?\u003C/p\u003E\u003Cp\u003EI want to write similar code that will let me point the ship in a direction of my choosing.\u003C/p\u003E\u003Cp\u003EI think this is the relevant bit:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        Quaternion tgt = Quaternion.LookRotation(tgt_fwd, tgt_up);\u003Cbr\u003E        Quaternion delta = Quaternion.Inverse(Quaternion.Euler(90, 0, 0) * Quaternion.Inverse(vessel.transform.rotation) * tgt);\u003Cbr\u003E\u003Cbr\u003E        err = new Vector3((delta.eulerAngles.x \u0026gt; 180) ? (delta.eulerAngles.x - 360.0F) : delta.eulerAngles.x, (delta.eulerAngles.y \u0026gt; 180) ? (delta.eulerAngles.y - 360.0F) : delta.eulerAngles.y, (delta.eulerAngles.z \u0026gt; 180) ? (delta.eulerAngles.z - 360.0F) : delta.eulerAngles.z) / 180.0F;\u003Cbr\u003E        integral \u002B= err * TimeWarp.fixedDeltaTime;\u003Cbr\u003E        deriv = (err - prev_err) / TimeWarp.fixedDeltaTime;\u003Cbr\u003E        act = Kp * err \u002B Ki * integral \u002B Kd * deriv;\u003Cbr\u003E        prev_err = err;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI see how the [tt]act[/tt] variable is later applied to the [tt]FlightCtrlState[/tt], that bit makes sense to me, what\\\u0027s confusing me is how the [tt]act[/tt] is being derived. I think it\\\u0027s partly confusing because there\\\u0027s a feedback loop to help make the movement smoother, could someone maybe write code / psuedocode showing how the process would work without the loop, so I could understand it better? \u003C/p\u003E\u003Cp\u003EI guess the main question is: \u003Cem\u003EHow do I go from having a desired heading in a vector, to applying forces in the correct direction to orientate the ship towards that vector?\u003C/em\u003E\u003C/p\u003E\n"},{"CreatedByName":"r4m0n","CreatedById":5404,"CreatedDateTime":"2012-03-09T08:56:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dodrian\u0022 data-cite=\u0022dodrian\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ECould someone explain the maths in the \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=8021.0\u0022 rel=\u0022external nofollow\u0022\u003EMechJeb\u003C/a\u003E plugin?\u003C/p\u003E\u003Cp\u003EI want to write similar code that will let me point the ship in a direction of my choosing.\u003C/p\u003E\u003Cp\u003EI think this is the relevant bit:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        Quaternion tgt = Quaternion.LookRotation(tgt_fwd, tgt_up);\u003Cbr\u003E        Quaternion delta = Quaternion.Inverse(Quaternion.Euler(90, 0, 0) * Quaternion.Inverse(vessel.transform.rotation) * tgt);\u003Cbr\u003E\u003Cbr\u003E        err = new Vector3((delta.eulerAngles.x \u0026gt; 180) ? (delta.eulerAngles.x - 360.0F) : delta.eulerAngles.x, (delta.eulerAngles.y \u0026gt; 180) ? (delta.eulerAngles.y - 360.0F) : delta.eulerAngles.y, (delta.eulerAngles.z \u0026gt; 180) ? (delta.eulerAngles.z - 360.0F) : delta.eulerAngles.z) / 180.0F;\u003Cbr\u003E        integral \u002B= err * TimeWarp.fixedDeltaTime;\u003Cbr\u003E        deriv = (err - prev_err) / TimeWarp.fixedDeltaTime;\u003Cbr\u003E        act = Kp * err \u002B Ki * integral \u002B Kd * deriv;\u003Cbr\u003E        prev_err = err;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI see how the [tt]act[/tt] variable is later applied to the [tt]FlightCtrlState[/tt], that bit makes sense to me, what\\\u0027s confusing me is how the [tt]act[/tt] is being derived. I think it\\\u0027s partly confusing because there\\\u0027s a feedback loop to help make the movement smoother, could someone maybe write code / psuedocode showing how the process would work without the loop, so I could understand it better? \u003C/p\u003E\u003Cp\u003EI guess the main question is: \u003Cem\u003EHow do I go from having a desired heading in a vector, to applying forces in the correct direction to orientate the ship towards that vector?\u003C/em\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat is a \u003Ca href=\u0022https://en.wikipedia.org/wiki/PID_controller\u0022 rel=\u0022external nofollow\u0022\u003EPID controller\u003C/a\u003E. It isn\\\u0027t very simple to explain, and took quite a while to get into that state in which it works reasonably...\u003C/p\u003E\u003Cp\u003EAs for what you want, your best approach would be to use this code fragment as is, and set those variables before it:\u003C/p\u003E\u003Cp\u003Etgt_fwd = the direction you want to go, in world coordinates\u003C/p\u003E\u003Cp\u003Etgt_up = the direction you want \u0027up\u0027 to be, will only affect roll. If you want to keep the current one, use vessel.transform.up\u003C/p\u003E\u003Cp\u003EThe integral and prev_err variables must be kept from frame to frame, and should be zeroed if you change your target. Else than that, you will probably need to calibrate your K parameters, but the values in MechJeb should work if you keep the code like that.\u003C/p\u003E\n"},{"CreatedByName":"The_Duck","CreatedById":1156,"CreatedDateTime":"2012-03-09T09:50:30Z","Content":"\n\u003Cp\u003EI was having the same problem with buttons mentioned earlier in this thread, where they would only only work if I simultaneously left and right clicked. I tried enclosing them in all sorts of BeginVertical/EndVertical\\\u0027s and BeginHorizontal/EndHorizontal\\\u0027s, but that wasn\\\u0027t helping me. In fact I\\\u0027m pretty sure the culprit is the GUI.DragWindow command, which lets the GUI window get dragged around. The DragWindow function takes a Rect that specifies what portion of the window you can click on to drag the window. But if that Rect covers a button then you won\\\u0027t be able to click on that button. To fix this, the DragWindow command should go *after* all the other GUI stuff, so that it doesn\\\u0027t eat the mouse events before they get to the actual controls.\u003C/p\u003E\u003Cp\u003EI\\\u0027ll put a note about this in the example code on the wiki.\u003C/p\u003E\n"},{"CreatedByName":"dodrian","CreatedById":12564,"CreatedDateTime":"2012-03-09T10:47:23Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022r4m0n\u0022 data-cite=\u0022r4m0n\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThat is a \u003Ca href=\u0022https://en.wikipedia.org/wiki/PID_controller\u0022 rel=\u0022external nofollow\u0022\u003EPID controller\u003C/a\u003E. It isn\\\u0027t very simple to explain, and took quite a while to get into that state in which it works reasonably...\u003C/p\u003E\u003Cp\u003EAs for what you want, your best approach would be to use this code fragment as is, and set those variables before it:\u003C/p\u003E\u003Cp\u003Etgt_fwd = the direction you want to go, in world coordinates\u003C/p\u003E\u003Cp\u003Etgt_up = the direction you want \u0027up\u0027 to be, will only affect roll. If you want to keep the current one, use vessel.transform.up\u003C/p\u003E\u003Cp\u003EThe integral and prev_err variables must be kept from frame to frame, and should be zeroed if you change your target. Else than that, you will probably need to calibrate your K parameters, but the values in MechJeb should work if you keep the code like that.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThank you, that\\\u0027s helped me understand a bit of what\\\u0027s going on. If I wanted to remove the PID controller, could I replace the variable [tt]act[/tt] with [tt]err[/tt] in the following code and have the module still work? (obviously it wouldn\\\u0027t work as well, but would it work a bit?)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Es.pitch = Mathf.Clamp(s.pitch \u002B act.x, -1.0F, 1.0F);\u003Cbr\u003Es.yaw = Mathf.Clamp(s.yaw - act.y, -1.0F, 1.0F);\u003Cbr\u003Es.roll = Mathf.Clamp(s.roll \u002B act.z, -1.0F, 1.0F);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(I don\\\u0027t want to remove the feedback controller, I\\\u0027m just checking if I\\\u0027m understanding it right.)\u003C/p\u003E\n"},{"CreatedByName":"r4m0n","CreatedById":5404,"CreatedDateTime":"2012-03-09T13:21:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022dodrian\u0022 data-cite=\u0022dodrian\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThank you, that\\\u0027s helped me understand a bit of what\\\u0027s going on. If I wanted to remove the PID controller, could I replace the variable [tt]act[/tt] with [tt]err[/tt] in the following code and have the module still work? (obviously it wouldn\\\u0027t work as well, but would it work a bit?)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Es.pitch = Mathf.Clamp(s.pitch \u002B act.x, -1.0F, 1.0F);\u003Cbr\u003Es.yaw = Mathf.Clamp(s.yaw - act.y, -1.0F, 1.0F);\u003Cbr\u003Es.roll = Mathf.Clamp(s.roll \u002B act.z, -1.0F, 1.0F);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E(I don\\\u0027t want to remove the feedback controller, I\\\u0027m just checking if I\\\u0027m understanding it right.)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe [tt]err[/tt] variable is the difference from where you are pointed to where you want to point, so yes, just acting directly on the error would give you a P controller (same effect as setting Ki and Kd to 0 and Kp to 1). The practical effect is that the ship will try to correct the course, but will ignore angular momentum, so it will overshot and try again, then reverse the controls and keep doing that.\u003C/p\u003E\n"},{"CreatedByName":"dodrian","CreatedById":12564,"CreatedDateTime":"2012-03-09T14:02:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022r4m0n\u0022 data-cite=\u0022r4m0n\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EThe [tt]err[/tt] variable is the difference from where you are pointed to where you want to point, so yes, just acting directly on the error would give you a P controller (same effect as setting Ki and Kd to 0 and Kp to 1). The practical effect is that the ship will try to correct the course, but will ignore angular momentum, so it will overshot and try again, then reverse the controls and keep doing that.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks r4m0n, that\\\u0027s really helpful and has shown me how to do this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022459\u0022 height=\u0022344\u0022 src=\u0022https://www.youtube.com/embed/smWE4AP3ykI?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\\\u0027ve got a lot more exploring and testing to do, but now that I know what\\\u0027s going on I can better code a version to my purpose \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E. Thanks for explaining!\u003C/p\u003E\n"},{"CreatedByName":"Alchemist","CreatedById":8825,"CreatedDateTime":"2012-03-09T19:39:14Z","Content":"\n\u003Cp\u003ECan anybody answer this:\u003C/p\u003E\u003Cp\u003EI\\\u0027m inititiating an array in onPartLoad() (tested at that point, works OK). When I try to refer to this value in flight scene (from OnFlightStart()), I get only \u0027Object reference not set to instance of object\u0027. \u003C/p\u003E\u003Cp\u003EWhat to do in order to not lose the values? ???\u003C/p\u003E\n"},{"CreatedByName":"Tosh","CreatedById":11055,"CreatedDateTime":"2012-03-09T21:38:19Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Alchemist\u0022 data-cite=\u0022Alchemist\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ECan anybody answer this:\u003C/p\u003E\u003Cp\u003EI\\\u0027m inititiating an array in onPartLoad() (tested at that point, works OK). When I try to refer to this value in flight scene (from OnFlightStart()), I get only \u0027Object reference not set to instance of object\u0027. \u003C/p\u003E\u003Cp\u003EWhat to do in order to not lose the values? ???\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003EHard to answer. What type of values are you storing? Have you instantiated each specific value in the array? \u003Cp\u003EShow a complete code please. Or PM it if you don\\\u0027t want to expose it to public.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Quinton\u0022 data-cite=\u0022Quinton\u0022\u003E\u003Cdiv\u003ESo that\\\u0027s halfway there -- just need to figure out where to find the actual API class/function/etc descriptions...\u003C/div\u003E\u003C/blockquote\u003EThere\\\u0027s no class documentation at this moment. You may either refer to already written plugins or install \u003Cem\u003EVisualStudio \u003C/em\u003Eand use the Object Browser to look at what\\\u0027s available.\u003Cp\u003E[mod]My bad, reverted. Sorry.[/mod]\u003C/p\u003E\n"},{"CreatedByName":"alphafalcon","CreatedById":1180,"CreatedDateTime":"2012-03-10T12:21:02Z","Content":"\n\u003Cp\u003EI offer the following question to the coding oracle:\u003C/p\u003E\u003Cp\u003EWhere can I initialize and destroy a TCPListener reliably, so its only active while I\\\u0027m flying a rocket.\u003C/p\u003E\u003Cp\u003EAt the moment I\\\u0027m doing \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/index.php?topic=8159.msg122002#msg122002\u0022 rel=\u0022external nofollow\u0022\u003Ethis (link to other post)\u003C/a\u003E. In short I\\\u0027m overriding OnPartUpdate and check every tick whether my Listener is null. I hav no idea where to close down the socket yet.\u003C/p\u003E\u003Cp\u003EThanks for your help.\u003C/p\u003E\n"}]}