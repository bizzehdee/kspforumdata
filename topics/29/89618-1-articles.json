{"TopicId":89618,"ForumId":29,"TopicTitle":"PartModules added in VAB get removed when going to launchpad - huh?","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-07T01:32:25Z","PageNum":1,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-07T01:32:25Z","Content":"\n\u003Cp\u003E\u003Cstrong\u003EBackground:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EAs part of kOS, I\u0027ve made a very tiny PartModule called KOSNameTag, the only purpose of which is to let the user assign any arbitrary string name they feel like to a part. All it does is add this nametag as a KSPField you can see in the RMB context menu for the part, and also add a KSPEvent button you can click on to open a little textfield widget to alter the name. (And kOS has a new function that will let you get all parts with nametag \u0022your tag name here\u0022, so you can write a script to retrieve data about that specific one part in flight).\u003C/p\u003E\u003Cp\u003EI didn\u0027t want to have to add this PartModule to EVERY single part in the game, ModuleManager style, but rather I wanted to give people the ability to click a button in the kOS window (that will come from the ApplicationLauncher toolbar), that says \u0022add nametag to part\u0022 and then they can click a part and it causes that one part to get an instance of the KOSNameTag PartModule attached to it.\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EThe Problem:\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI got everything I just described above working perfectly. \u003Cstrong\u003EAs long as I do it all within the same Scene\u003C/strong\u003E. But if I add the new KOSNameTag module to the part inside the VAB, and then launch the ship, the act of going to the launchpad \u003Cem\u003Ecauses the Partmodule to get removed from the ship\u003C/em\u003E.\u003C/p\u003E\u003Cp\u003E(On the other hand if I do add a KOSNameTag permanently to every part of that type, by editing the Part.cfg file, then it does work. So it\u0027s not that the *field* is missing or failing to persist, it\u0027s that the entire PartModule is being scraped off by the act of launching.)\u003C/p\u003E\u003Cp\u003EFrustratingly, when I look at the .craft file being created by the VAB editor, it actually *DOES* contain the KOSNameTag PartModule. So it *is* being saved from the editor, but then getting removed when launching. \u003C/p\u003E\u003Cp\u003EI\u0027m suspecting that when launching the ship, KSP must be going back to the default definition of that part and instancing a new one from there, and then only populating those fields from the .craft file that refer to PartModules that exist in the default definition of the part, rather than instancing the PartModules that are actually mentioned in the .craft file.\u003C/p\u003E\u003Cp\u003EIs there a solution to this that doesn\u0027t involve having to add KOSNameTag to each and every part in the game, ModuleManager style?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-11-07T02:37:27Z","Content":"\n\u003Cp\u003EWhenever a vessel is loaded, the parts are cloned from the part prefabs. If the prefab doesn\u0027t contain your module, then it won\u0027t persist between scenes, and you\u0027ll have to re-add it every scene.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-11-07T06:09:12Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Steven Mading\u0022 data-cite=\u0022Steven Mading\u0022\u003E\u003Cdiv\u003EIs there a solution to this that doesn\u0027t involve having to add KOSNameTag to each and every part in the game, ModuleManager style?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou could store your name in Part.customPartData and have a KSPAddon behaviour add PartModules on the fly in-scene. Otherwise, adding your PartModule to every prefab and having it destroy itself immediately in flight if it doesn\u0027t have a name is probably the way to go\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-11-07T06:22:57Z\u0022 title=\u002211/07/2014 06:22  AM\u0022 data-short=\u00229 yr\u0022\u003ENovember 7, 2014\u003C/time\u003E by xEvilReeperx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-11-07T07:26:10Z","Content":"\n\u003Cp\u003EWe just bit the bullet and decided to bundle with ModuleManager. There just didn\u0027t seem to be any other good way.\u003C/p\u003E\n"}]}