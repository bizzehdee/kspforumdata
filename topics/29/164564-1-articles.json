{"TopicId":164564,"ForumId":29,"TopicTitle":"How to get dimensions of a prefab","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-08-18T21:05:02Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-08-18T21:05:02Z","Content":"\n\u003Cp\u003E\nIn the Editor, given the PartLoader.LoadedPartsList, I can find a specific part.\n\u003C/p\u003E\n\u003Cp\u003E\nHow can I get the x,y,z dimensions of it, everything I\u0027ve tried so far still returns 0,0,0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried the following:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E  Part p = PartLoader.LoadedPartsList[desiredPart];\n\n  var v = p.partPrefab.GetModuleSize(d);\n  Log.Info(\u0022part: \u0022 \u002B p.name \u002B \u0022, height x,y,z: \u0022 \u002B v.x.ToString() \u002B \u0022, \u0022 \u002B v.y.ToString() \u002B \u0022, \u0022 \u002B v.z.ToString());\n\nand\n\n  var v = p.partPrefab.prefabSize;\n\nand\n\n  var v = p.partPrefab.moduleSize;\n\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks in advance\n\u003C/p\u003E\n"},{"CreatedByName":"Benjamin Kerman","CreatedById":172792,"CreatedDateTime":"2017-08-18T21:14:37Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0026amp;do=hovercard\u0022 data-mentionid=\u002299885\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0022 rel=\u0022\u0022\u003E@allista\u003C/a\u003E shoudl know about this, with Bounds.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2017-08-19T05:50:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223151833\u0022 data-ipsquote-contentid=\u0022164564\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221503090877\u0022 data-ipsquote-userid=\u0022172792\u0022 data-ipsquote-username=\u0022Benjamin Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/18/2017 at 2:14 PM, Benjamin Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0026amp;do=hovercard\u0022 data-mentionid=\u002299885\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0022 rel=\u0022\u0022\u003E@allista\u003C/a\u003E shoudl know about this, with Bounds.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGetModuleSize is like GetModuleMass/Cost -- it retrieves modified size from IPartSizeModifier modules, if they\u0027re present.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I do is I actually measure them mesh-by-mesh, encapsulating\u00A0either meshFilter.bounds or meshFilter.vertices (for wheels, not needed in Editor), all transformed from meshFilter.transform to part.transform:\n\u003C/p\u003E\n\u003Cpre style=\u0022color:#24292e;\u0022\u003E\n\u003Cspan\u003E\u003Ca href=\u0022https://github.com/allista/AT_Utils/blob/4d68ac1e5e4fa0a6dfcaf8f790d9384541039476/Metric.cs#L91\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/allista/AT_Utils/blob/4d68ac1e5e4fa0a6dfcaf8f790d9384541039476/Metric.cs#L91\u003C/a\u003E\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nI\u0027ve wrote this in KSP-0.24 times, when there was no notion of size in editor.\n\u003C/p\u003E\n\u003Cp\u003E\nNow the ShipConstruction calculates ship size\u00A0almost the same way, using MeshRenderer.bounds (which are in worldspace) and\u00A0remembering, unlike me, that there are also SkinnedMeshRenderers\u00A0\u003Cimg alt=\u0022:rolleyes:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif\u0022 title=\u0022:rolleyes:\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s a bug in current ShipConstruction.CalculateCraftSize method, though, preventing it from accounting for\u00A0part.boundsMultiplier and part.GetModuleSize (I wonder, does anyone noticed it yet?).\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what KSP does:\n\u003C/p\u003E\n\u003Cp\u003E\n[snip]\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-08-27T19:56:24Z\u0022 title=\u002208/27/2017 07:56  PM\u0022 data-short=\u00226 yr\u0022\u003EAugust 27, 2017\u003C/time\u003E by Vanamonde\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"allista","CreatedById":99885,"CreatedDateTime":"2017-08-19T06:01:48Z","Content":"\n\u003Cp\u003E\nAll this designed\u00A0for\u00A0parts already instantiated in editor (or parts in-flight, in my case).\n\u003C/p\u003E\n\u003Cp\u003E\nIt \u003Cem\u003Eshould\u003C/em\u003E\u00A0work with prefabs as well, but be carefull with GetModuleSize, as modules in a prefab are not started so may not be completely initialized.\n\u003C/p\u003E\n\u003Cp\u003E\nI hope that\u0027s enough to get going with\u00A0\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Benjamin Kerman","CreatedById":172792,"CreatedDateTime":"2017-08-19T13:45:28Z","Content":"\n\u003Cp\u003E\nAnd why would parts be mulitplied? Is that for things like tweakscale?\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2017-08-19T13:50:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223152297\u0022 data-ipsquote-contentid=\u0022164564\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221503150328\u0022 data-ipsquote-userid=\u0022172792\u0022 data-ipsquote-username=\u0022Benjamin Kerman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 minutes ago, Benjamin Kerman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAnd why would parts be mulitplied? Is that for things like tweakscale?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nScale values from the config files.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0026amp;do=hovercard\u0022 data-mentionid=\u002299885\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/99885-allista/\u0022 rel=\u0022\u0022\u003E@allista\u003C/a\u003E\u00A0thanks. \u00A0Thats pretty much what i ended up doing.\n\u003C/p\u003E\n"},{"CreatedByName":"Bottle Rocketeer 500","CreatedById":178766,"CreatedDateTime":"2017-08-20T11:59:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223152122\u0022 data-ipsquote-contentid=\u0022164564\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221503121811\u0022 data-ipsquote-userid=\u002299885\u0022 data-ipsquote-username=\u0022allista\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/19/2017 at 1:50 AM, allista said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n(I wonder, does anyone noticed it yet?).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, I noticed it when I saw that the MK1-2 pod in Blender is 1/2 scale in the .mu and in the editor you see the half scale model\u0027s height, not the full-scale model\u0027s height.\n\u003C/p\u003E\n"},{"CreatedByName":"Vanamonde","CreatedById":27914,"CreatedDateTime":"2017-08-27T19:57:32Z","Content":"\n\u003Cp\u003E\nHi guys. Modding the game is one thing, but decompiling and sharing KSP\u0027s code is a problem, for various reasons. That has been removed from the thread.\u00A0\n\u003C/p\u003E\n"}]}