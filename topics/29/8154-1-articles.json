{"TopicId":8154,"ForumId":29,"TopicTitle":"Crew information","CreatedByName":"Link Hogthrob","CreatedById":3697,"CreatedDateTime":"2012-03-15T05:54:36Z","PageNum":1,"Articles":[{"CreatedByName":"Link Hogthrob","CreatedById":3697,"CreatedDateTime":"2012-03-15T05:54:36Z","Content":"\n\u003Cp\u003EI am trying to get some info on the crew when my custom commandpod explodes and write it to a file.\u003C/p\u003E\u003Cp\u003EHere is my code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E  protected override void onPartExplode()\u003Cbr\u003E  {\u003Cbr\u003E    print(\u0027KIA!\u0027);\u003Cbr\u003E\u003Cbr\u003E    try\u003Cbr\u003E    {\u003Cbr\u003E      // file is comma delimited\u003Cbr\u003E      // name,data\\n\u003Cbr\u003E      if (!File.Exists(hofFile)) File.Create(hofFile);\u003Cbr\u003E\u003Cbr\u003E      string fileContents = File.ReadAllText(hofFile);\u003Cbr\u003E\u003Cbr\u003E      // get list of crew KIA\u003Cbr\u003E      foreach (ProtoCrewMember pcm in KerbalCrewRoster.CrewRoster)\u003Cbr\u003E      {        \u003Cbr\u003E        string crewman = pcm.KerbalRef.crewMemberName;\u003Cbr\u003E\u003Cbr\u003E        print(crewman);\u003Cbr\u003E        print(pcm.name);\u003Cbr\u003E        print(pcm.courage.ToString());\u003Cbr\u003E        fileContents \u002B= string.Format(\u0027{0},KIA,{1},{2},{3}\\n\u0027, crewman, FlightGlobals.ActiveVessel.vesselName, DateTime.Now.ToString(\u0027MM-dd-yyyy\u0027), FlightGlobals.ActiveVessel.missionTime);\u003Cbr\u003E      }\u003Cbr\u003E\u003Cbr\u003E      File.WriteAllText(hofFile, fileContents);\u003Cbr\u003E\u003Cbr\u003E      print(\u0027Crew HoF saved\u0027);\u003Cbr\u003E    }\u003Cbr\u003E    catch (Exception)\u003Cbr\u003E    {\u003Cbr\u003E      // ignore\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    base.onPartExplode();\u003Cbr\u003E  }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt doesn\\\u0027t appear to be going through the crew list at all. I also tried FlightGlobals.ActiveVessel.GetVesselCrew to no avail.\u003C/p\u003E\u003Cp\u003ECan anyone help?\u003C/p\u003E\u003Cp\u003EI must say that this plugin development has left me clueless on numerous occasions. Stuff you think should work just doesn\\\u0027t (like playing an mp3 I added to the sounds folder).\u003C/p\u003E\n"},{"CreatedByName":"Link Hogthrob","CreatedById":3697,"CreatedDateTime":"2012-03-16T05:18:40Z","Content":"\n\u003Cp\u003EIt seems the crew is already completely deleted by the time onPartExplode() is called.\u003C/p\u003E\u003Cp\u003ESo I create a copy of the crew in onFlightStarted instead. Now I can use them even after they\\\u0027re gone.\u003C/p\u003E\u003Cp\u003EBTW, I might throw a random name generator in there for the little kerbs, or even make a crew customization plugin.\u003C/p\u003E\n"}]}