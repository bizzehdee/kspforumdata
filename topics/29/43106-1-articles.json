{"TopicId":43106,"ForumId":29,"TopicTitle":"Replace one part with another","CreatedByName":"apfelbeck","CreatedById":64706,"CreatedDateTime":"2013-08-19T14:08:37Z","PageNum":1,"Articles":[{"CreatedByName":"apfelbeck","CreatedById":64706,"CreatedDateTime":"2013-08-19T14:08:37Z","Content":"\n\u003Cp\u003EI want to make a mod that lets players replace 2 connected docking ports with a single structurally stronger part.\u003C/p\u003E\u003Cp\u003EIf this is possible? Any tips on how to get started on this kind of mod helps. I already know C# but nothing about modding KSP.\u003C/p\u003E\u003Cp\u003EThanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"PrivateFlip","CreatedById":68273,"CreatedDateTime":"2013-08-22T19:36:05Z","Content":"\n\u003Cp\u003EIs it possible? I wouldn\u0027t say no, but this isn\u0027t going to be simple as far as I can see.\u003C/p\u003E\u003Cp\u003EI\u0027m assuming the purpose of this mod would be to increase the structural strength of the connection. On the one side I would like to help you get starting on modding but I\u0027m kinda wondering if this particular mod will be worth the effort it would take to get it to work. \u003C/p\u003E\u003Cp\u003EIf you really want to make this for a specific reason I\u0027m willing to give you some tips where you could get started, without any guarantee of success from my side. If you want this just because you thought it was an easy thing to start out with, maybe look for another mod idea.\u003C/p\u003E\u003Cp\u003EBut I\u0027m a cynic and maybe you should ignore me. Why don\u0027t you first pitch the idea in the Add-on Requests and Support section (also explain what what you think the the practical use of this mod will be) and gauge the responses.\u003C/p\u003E\n"},{"CreatedByName":"apfelbeck","CreatedById":64706,"CreatedDateTime":"2013-08-22T20:57:32Z","Content":"\n\u003Cp\u003EThanks for your input PrivateFlip. This is the first time I\u0027ve tried to write a KSP mod, but no I didn\u0027t think it would be easy. I\u0027ve got plenty of C# and game development experience but none for Unity/KSP.\u003C/p\u003E\u003Cp\u003EYou\u0027re exactly right about what I was thinking. My original idea was building docking port derivatives that a kerbal on EVA could bolt together, creating a stronger connection between the pieces. I don\u0027t think that\u0027ll be worth the effort at least for now.\u003C/p\u003E\u003Cp\u003EI\u0027ve got a fall back idea that I think may work. It goes like this: create a more rigid structure by making a few connections using whatever the Unity version of a rigid joint is between the part one of the docking ports is attached to and the part that the other docking port is attached to.\u003C/p\u003E\u003Cp\u003EThat may be confusing, here\u0027s an example:\u003C/p\u003E\u003Cp\u003Eyou have a 3 kerbal pod with a docking port connected to a 1 kerbal lander can with a docking port, the stack looks like:\u003C/p\u003E\u003Cp\u003Epod | port | port | can\u003C/p\u003E\u003Cp\u003EYou EVA with a kerbal and berth the connection. Internally the code attaches 3 invisible rigid joints between the 3 kerbal pod and the lander can; the joints are spread out 180 degrees from each other along the outer radius of the docking port.\u003C/p\u003E\u003Cp\u003EI think this second version is more tenable. Unfortunately my ignorance coupled with a frustrating lack of documentation, lack of a debugger and minutes long load KSP, do the action and check the log test cycle makes for very slow going.\u003C/p\u003E\u003Cp\u003EThanks for reading my ramblings. If you have any suggestions I\u0027d love to hear them.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-08-22T22:02:12Z","Content":"\n\u003Cp\u003EWell, it always depend on how perfect your solution is meant to be. For your example... replacing 2 docking ports isn\u0027t very hard. Just unload the vessel, modify its protoVessel.protoPartSnapshots (its basically the same as your save file) and load it again. Ofc there would still be a lot of room for \u0022optimizations\u0022...\u003C/p\u003E\u003Cp\u003EI\u0027m not sure to have understand your second part. But you can improve your loading times a lot for your dev environment by removing unnecessary stuff from gamedata. Mine contains only my mod, 4 stock parts, mechjeb, a single flag and some props/sounds/etc. Btw, that reminds me to add a \u0022automatically load savegame X\u0022 helper...\u003C/p\u003E\n"},{"CreatedByName":"apfelbeck","CreatedById":64706,"CreatedDateTime":"2013-08-22T23:36:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Faark\u0022 data-cite=\u0022Faark\u0022\u003E\u003Cdiv\u003EJust unload the vessel, modify its protoVessel.protoPartSnapshots (its basically the same as your save file) and load it again.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks, Is there example code or a mod that I can look at that shows how to do this?\u003C/p\u003E\n"},{"CreatedByName":"PrivateFlip","CreatedById":68273,"CreatedDateTime":"2013-08-23T08:09:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022apfelbeck\u0022 data-cite=\u0022apfelbeck\u0022\u003E\u003Cdiv\u003EThanks for your input PrivateFlip. This is the first time I\u0027ve tried to write a KSP mod, but no I didn\u0027t think it would be easy. I\u0027ve got plenty of C# and game development experience but none for Unity/KSP.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EAh. I\u0027d mistaken you for a beginning programmer, please read my previous response in that light.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022apfelbeck\u0022 data-cite=\u0022apfelbeck\u0022\u003E\u003Cdiv\u003EYou\u0027re exactly right about what I was thinking. My original idea was building docking port derivatives that a kerbal on EVA could bolt together, creating a stronger connection between the pieces. I don\u0027t think that\u0027ll be worth the effort at least for now.\u003Cp\u003EI\u0027ve got a fall back idea that I think may work. It goes like this: create a more rigid structure by making a few connections using whatever the Unity version of a rigid joint is between the part one of the docking ports is attached to and the part that the other docking port is attached to.\u003C/p\u003E\u003Cp\u003EThat may be confusing, here\u0027s an example:\u003C/p\u003E\u003Cp\u003Eyou have a 3 kerbal pod with a docking port connected to a 1 kerbal lander can with a docking port, the stack looks like:\u003C/p\u003E\u003Cp\u003Epod | port | port | can\u003C/p\u003E\u003Cp\u003EYou EVA with a kerbal and berth the connection. Internally the code attaches 3 invisible rigid joints between the 3 kerbal pod and the lander can; the joints are spread out 180 degrees from each other along the outer radius of the docking port.\u003C/p\u003E\u003Cp\u003EI think this second version is more tenable. Unfortunately my ignorance coupled with a frustrating lack of documentation, lack of a debugger and minutes long load KSP, do the action and check the log test cycle makes for very slow going.\u003C/p\u003E\u003Cp\u003EThanks for reading my ramblings. If you have any suggestions I\u0027d love to hear them.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ELike Faark said Install a dedicated modding instance of ksp and unload the majority of standard parts. \u003C/p\u003E\u003Cp\u003EAs for documentation \u003Ca href=\u0022https://github.com/Anatid/Documentation-for-the-KSP-API\u0022 rel=\u0022external nofollow\u0022\u003EDocumentation for the KSP API\u003C/a\u003E and \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/showthread.php/Plugin-Posting-Rules-And-Official-Documentation?p=156430\u0026amp;viewfull=1#post156430\u0022 rel=\u0022external nofollow\u0022\u003EPlugin Posting Rules And Official Documentation\u003C/a\u003E. \u003C/p\u003E\u003Cp\u003EAlthough my suggestion where to start would have been in the same direction as Faark mentioned, his quick tips are already far more detailed and knowledgeable then the cues I can and could have supplied you.\u003C/p\u003E\n"},{"CreatedByName":"pizzaoverhead","CreatedById":26349,"CreatedDateTime":"2013-08-23T11:08:26Z","Content":"\n\u003Cp\u003EA system for allowing a part to consist of more than one model was added a version or two ago. It makes the parts act as if they were one, and can be done solely by cfg editing. Just add multiple MODEL {} sections to the cfg. There\u0027s likely to be a way to do it in code too.\u003C/p\u003E\u003Cp\u003EYou could programatically replace the individual docking ports with a combined model, removing the docking module as you go. Right-click \u0026gt; Lock / Unlock on a docking port perhaps? R4M0N has a nice example of adding a button to the right-click menu of a part \u003Ca href=\u0022http://pastebin.com/twbrdq5M\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E if you need it.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-08-23T11:38:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022apfelbeck\u0022 data-cite=\u0022apfelbeck\u0022\u003E\u003Cdiv\u003EThanks, Is there example code or a mod that I can look at that shows how to do this?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI don\u0027t know, but learning it yourself should be doable, step by step.\u003C/p\u003E\u003Cp\u003E- Create the part that replaces your 2 docking ports\u003C/p\u003E\u003Cp\u003E- Build two rockets with either original and your replacement parts\u003C/p\u003E\u003Cp\u003E- Compare both save files and find how you have to change a save file to replace those parts (edit the text file, load quicksave, repeat until your successful)\u003C/p\u003E\u003Cp\u003E- Try to do the same changes via a ProtoVessel\u003C/p\u003E\u003Cp\u003E- Add finally you can polish your UI stuff. Personally i would prefer not to change to original parts cfgs but instead add a part module to them after the initial load, but the easier cfg-edit to add a module is a good start as well.\u003C/p\u003E\n"},{"CreatedByName":"AncientGammoner","CreatedById":77111,"CreatedDateTime":"2013-08-25T17:08:34Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022pizzaoverhead\u0022 data-cite=\u0022pizzaoverhead\u0022\u003E\u003Cdiv\u003EA system for allowing a part to consist of more than one model was added a version or two ago. It makes the parts act as if they were one, and can be done solely by cfg editing. Just add multiple MODEL {} sections to the cfg. There\u0027s likely to be a way to do it in code too.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve actually been spending quite a bit of time searching for that capability, but I don\u0027t believe it\u0027s a Part or PartModule level item, I think it might use a Unity command to merge the two meshes. Regardless, it doesn\u0027t look nearly as simple to do in a plugin as it looks in the cfg file.\u003C/p\u003E\n"}]}