{"TopicId":173038,"ForumId":29,"TopicTitle":"PartModule, GetInfo() how to access ConfigNodes","CreatedByName":"Warezcrawler","CreatedById":145377,"CreatedDateTime":"2018-03-26T12:38:00Z","PageNum":1,"Articles":[{"CreatedByName":"Warezcrawler","CreatedById":145377,"CreatedDateTime":"2018-03-26T12:38:00Z","Content":"\n\u003Cp\u003E\nFor my mod I would like to access information in the CFG file, that is not loaded by KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nSpecifically I can have two (or more)\u00A0atmosphereCurve nodes, which I found no way to get KSP to load automatically into my class like [KSPField] does. What I do with the nodes is to switch the curve when enginemode is switched.\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n@PART[engineLargeSkipper]:FOR[GTI]\u003Cbr\u003E\n{\u003Cbr\u003E\n\u00A0\u00A0 \u00A0@description = The smaller sibling of the Mainsail, the Skipper\u0027s power rivals that of... large cities. Combining high thrust with reasonable efficiency, this engine excels when used as a mid-stage booster. This upgraded version also feature a liftoff version, which uses intakeair instead of oxidizer. This is much more efficient, but also only works inside the atmosphere.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0MODULE\u003Cbr\u003E\n\u00A0\u00A0 \u00A0{\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0name = GTI_MultiModeEngine\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0messagePosition = UPPER_RIGHT\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0availableInFlight = false\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0availableInEditor = true\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0GUIengineModeNames = \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E;High Velocity \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0//EngineTypes =\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0propellantNames = LiquidFuel,Oxidizer;LiquidFuel,Oxidizer\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0propellantRatios = 0.9,1.1;0.9,1.1\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0propIgnoreForISP = False,False;False,False\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0propDrawGauge = True,True;True,True\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0\u00A0\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0//atmChangeFlows =\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0useVelCurves = False;False\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0useAtmCurves = False;False\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0maxThrust = 650;350\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0heatProduction = 350;900\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0infoatmosphereCurve_Vac = 320;370\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0infoatmosphereCurve_Atm = 280;80\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u003Cbr\u003E\u003Cstrong\u003E\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0atmosphereCurve\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0{\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0key = 0 320\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0key = 1 280\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0key = 6 0.001\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0}\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0atmosphereCurve\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0{\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0key = 0 370\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0key = 0.15 280\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0key = 1 80\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0key = 6 0.001\u003Cbr\u003E\n\u00A0\u00A0 \u00A0\u00A0\u00A0 \u00A0}\u003C/strong\u003E\u003Cbr\u003E\n\u00A0\u00A0 \u00A0}\u003Cbr\u003E\n}\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nHowever, I can/do load them using \u0022part.partConfig.GetNode(..)\u0022. This is not possible in the \u0022GetInfo()\u0022 method of the PartModule, and does therefore limit me in which information I can give in game... I implemented a workaround, defining two\u00A0fields for vac/atm values. However, this is ugly and not that flexible.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a way to get access to the cfg file info in the\u00A0\u0022GetInfo()\u0022 method?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nReference code:\u00A0\u003Ca href=\u0022https://github.com/WarezCrawler/Guybrush101/blob/master/GTI_MultiModeEngine/MultiModeEngine.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/WarezCrawler/Guybrush101/blob/master/GTI_MultiModeEngine/MultiModeEngine.cs\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-03-26T19:02:01Z","Content":"\n\u003Cp\u003E\nGive them different names\u00A0 and they\u00A0 load fine with\u00A0\u003Cspan style=\u0022background-color:#ffffff;color:#353c41;font-size:14px;\u0022\u003E[KSPField]. And I must say that I don\u0027t understand the need for an other\u00A0engine switcher...\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Warezcrawler","CreatedById":145377,"CreatedDateTime":"2018-03-27T12:04:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223335516\u0022 data-ipsquote-contentid=\u0022173038\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522090921\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 hours ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nGive them different names\u00A0 and they\u00A0 load fine with\u00A0\u003Cspan style=\u0022background-color:#ffffff;color:#353c41;font-size:14px;\u0022\u003E[KSPField]. And I must say that I don\u0027t understand the need for an other\u00A0engine switcher...\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI do not think new names would work, since I do not know how many there are.... The amount is free so could be 2 or 4 or 5 or 10....\n\u003C/p\u003E\n\u003Cp\u003E\nThe need is probably a matter of how we as individuals want to play the game. Some want mode than 2 possible engine modes. Some want tank switching. Some want more or different planet.... I like the possibilities.\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-03-27T12:15:09Z","Content":"\n\u003Cp\u003E\nIf you want more than 2 engine switching then write a module that does the same thing as the stock one but support n engines. engine. Activate on 1 and engine.Shutdown() on the others. No need for un-needed complexity and to edit the engine stats live and break half the mods out there.\n\u003C/p\u003E\n"},{"CreatedByName":"Warezcrawler","CreatedById":145377,"CreatedDateTime":"2018-03-27T12:20:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223336155\u0022 data-ipsquote-contentid=\u0022173038\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522152909\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIf you want more than 2 engine switching then write a module that does the same thing as the stock one but support n engines. engine. Activate on 1 and engine.Shutdown() on the others. No need for un-needed complexity and to edit the engine stats live and break half the mods out there.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have done that. And this one is for normal ModuleEngine not ModuleEngineFX. They behave a bit differently for FX and I just want I few functions added. It is working as is, but I just want a simple way to get the information into\u00A0\u003Cspan style=\u0022background-color:#ffffff;color:#353c41;font-size:14px;\u0022\u003EGetInfo(), that\u0027s all. The rest is working... I just don\u0027t find it fair to the player having to open the CFG file to get efficiency information.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:#ffffff;color:#353c41;font-size:14px;\u0022\u003EMy \u0022GTI_MultiModeEngineFX\u0022 work as the stock multimode, just more flexible.... Actually, to be fair, it is based on the same advise from you a couple of years ago\u00A0\u003C/span\u003E\u003Cimg alt=\u0022:cool:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 title=\u0022:cool:\u0022\u003E And it was good advise.\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-03-27T12:26:05Z","Content":"\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:rgb(255,255,255);\u0022\u003EModuleEngineFX is a derived class of\u00A0ModuleEngine. They work exactly the same. I doubt I advised you to do write unwarrantedly\u00A0complex code\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Warezcrawler","CreatedById":145377,"CreatedDateTime":"2018-03-27T12:28:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223336166\u0022 data-ipsquote-contentid=\u0022173038\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221522153565\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:rgb(255,255,255);\u0022\u003EModuleEngineFX is a derived class of\u00A0ModuleEngine. They work exactly the same. I doubt I advised you to do write unwarrantedly\u00A0complex code\u003C/span\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou did not, and \u003Cspan style=\u0022background-color:#ffffff;color:#353c41;font-size:14px;\u0022\u003EGTI_MultiModeEngineFX is quite simple - I cannot say the same for\u00A0GTI_MultiModeEngine\u003C/span\u003E... But using multimode with module engine messed up effects. Does not do that with effects nodes used by the moduleengineFX. Took me forever to realize that.\n\u003C/p\u003E\n"}]}