{"TopicId":86166,"ForumId":29,"TopicTitle":"Planetarium Camera help","CreatedByName":"bfravel","CreatedById":81470,"CreatedDateTime":"2014-10-05T21:54:57Z","PageNum":1,"Articles":[{"CreatedByName":"bfravel","CreatedById":81470,"CreatedDateTime":"2014-10-05T21:54:57Z","Content":"\n\u003Cp\u003ESo I\u0027ve been messing around with writing a kerbcam-like plugin that works in the mapview. Since the PlanetariumCamera seems to be locked in place, I haven\u0027t had any luck manually moving it. \u003C/p\u003E\u003Cp\u003EI\u0027ve been able to add a camera and set it\u0027s parent to be the planetarium camera and move that around successfully, however, the SunFlare doesn\u0027t show up.\u003C/p\u003E\u003Cp\u003EHere is the code I\u0027m using for creating the camera:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E        GameObject go = new GameObject();\u003Cbr\u003E                   newCam = go.AddComponent\u0026lt;Camera\u0026gt;();\u003Cbr\u003E                   newCam.CopyFrom(ScaledCamera.Instance.camera);\u003Cbr\u003E                   newCam.transform.parent = ScaledCamera.Instance.camera.transform;\u003Cbr\u003E                   newCam.depth = ScaledCamera.Instance.camera.depth\u002B1; \u003Cbr\u003E                   newCam.clearFlags = CameraClearFlags.Depth;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EHere is what I mean by the flare not showing up: \u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://imgur.com/woDKOWW.jpg\u0022 alt=\u0022woDKOWW.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve tried modifying the culling mask, but haven\u0027t had any luck. Everything else works great; the planets, skybox, ect all show up. I just can\u0027t figure out how to get the SunFlare to show up. Does anyone have any suggestions?\u003C/p\u003E\n"},{"CreatedByName":"landeTLS","CreatedById":97925,"CreatedDateTime":"2014-10-05T23:04:53Z","Content":"\n\u003Cp\u003E\u003Ca href=\u0022https://github.com/Anatid/XML-Documentation-for-the-KSP-API/blob/master/src/PlanetariumCamera.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/Anatid/XML-Documentation-for-the-KSP-API/blob/master/src/PlanetariumCamera.cs\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EReferencing PlanetariumCamera should allow you to set the stock cam position manually. That way you wont need to deal with hacking back the flares etc.\u003C/p\u003E\u003Cp\u003EI havent tested it but i was able to set the vabcam position by scripting this way\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-10-05T23:07:01Z\u0022 title=\u002210/05/2014 11:07  PM\u0022 data-short=\u00229 yr\u0022\u003EOctober 5, 2014\u003C/time\u003E by landeTLS\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"bfravel","CreatedById":81470,"CreatedDateTime":"2014-10-05T23:44:27Z","Content":"\n\u003Cp\u003EBut I can\u0027t move the transforms directly because the game is pulling it back to it\u0027s original place. Sure, I can reference PlanetariumCamera to move it around whichever MapObject it is focused on, but I want to be able to move it in any direction and rotation I please. I\u0027m able to do this to the camera I\u0027ve created, I just can\u0027t figure out how to get the Flare to show up.\u003C/p\u003E\n"},{"CreatedByName":"landeTLS","CreatedById":97925,"CreatedDateTime":"2014-10-06T01:02:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022bfravel\u0022 data-cite=\u0022bfravel\u0022\u003E\u003Cdiv\u003EBut I can\u0027t move the transforms directly because the game is pulling it back to it\u0027s original place. Sure, I can reference PlanetariumCamera to move it around whichever MapObject it is focused on, but I want to be able to move it in any direction and rotation I please. I\u0027m able to do this to the camera I\u0027ve created, I just can\u0027t figure out how to get the Flare to show up.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOk then thats another cup of tea. Id suggest reading up on the unity doc for the camera and flare component. Since the stock camera classes impliment those with some extra code ontop. Layer mask perhaps? Im only thinking out loud. Im sure someone else here can come up with a better answer.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2014-10-06T09:56:48Z","Content":"\n\u003Cp\u003EFrom \u003Ca href=\u0022http://docs.unity3d.com/Manual/class-LensFlare.html\u0022 rel=\u0022external nofollow\u0022\u003Eunity doc\u003C/a\u003E : A Camera has to have a Flare Layer Component attached to make Flares visible (this is true by default, so you don\u00C3\u00A2\u00E2\u201A\u00AC\u00E2\u201E\u00A2t have to do any set-up).\u003C/p\u003E\u003Cp\u003EReding the doc I doubt CopyFrom copy the attached components of the camera and the \u0022true by default\u0022 most likely only applies to the editor only. Check the child component of the stock cam and yours, see if you can add the missing one from code.\u003C/p\u003E\n"},{"CreatedByName":"bfravel","CreatedById":81470,"CreatedDateTime":"2014-10-06T14:46:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003ECheck the child component of the stock cam and yours, see if you can add the missing one from code.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the suggestion, I\u0027ll try it tonight once I get off work\u003C/p\u003E\n"}]}