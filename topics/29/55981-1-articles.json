{"TopicId":55981,"ForumId":29,"TopicTitle":"Writing Plugins in UnityScript","CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-12-13T03:19:37Z","PageNum":1,"Articles":[{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-12-13T03:19:37Z","Content":"\n\u003Cp\u003EHey guys,\u003C/p\u003E\u003Cp\u003Esomeone on the KerbalKon livestream was asking how to write a Plugin in UnityScript. And while not really relevant for most of us, this question is all but crazy. After all, KSP just needs a valid .net assembly that provides for example a class that implements PartModule. And all Unity does with UnityScript source is to compile it into a good old .NET dll called Assembly-UnityScript.dll, just like \u0026amp; next to Assembly-CSharp.dll. \u003C/p\u003E\u003Cp\u003ESo why should it be possible to write a plugin in VB.NET and C#, but not UnityScript? All we have to do is to find a way that transforms our UnityScript source files into a .net assembly without having an a real unity project associated. I haven\u0027t found a proper \u0022unityscript dll\u0022 project type, but there is a \u0022console project\u0022 that compiles without starting up unity. Yes, we don\u0027t want an executable assembly file, but they are basically identical to a library assembly file except also having an entry point. All we have to do is to rename the file!\u003C/p\u003E\u003Cp\u003ECreate plugin for KSP written in UnityScript in a nutshell:\u003C/p\u003E\u003Cp\u003E- Install Unity\u003C/p\u003E\u003Cp\u003E- Open MonoDevelop\u003C/p\u003E\u003Cp\u003E- Create a new UnityScript Console Application\u003C/p\u003E\u003Cp\u003E- Add dependencies just like you do when writing KSP plugins in other languages (UnityEngine.dll, Assembly-CSharp.dll)\u003C/p\u003E\u003Cp\u003E- Ignore Main and start writing your code, for example:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eclass awesomeKspModule extends PartModule {\u003Cbr\u003E   public function Update(){\u003Cbr\u003E    for (var entry : ModuleEngines in this.part.FindModulesImplementing.\u0026lt;ModuleEngines\u0026gt;()) {\u003Cbr\u003E        entry.throttleLocked = true;\u003Cbr\u003E        entry.currentThrottle = 1;\u003Cbr\u003E        entry.requestedThrottle = 1;\u003Cbr\u003E\t}\u003Cbr\u003E   }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E- compile it\u003C/p\u003E\u003Cp\u003E- rename the .exe file into a .dll file and place it in your mods directory\u003C/p\u003E\u003Cp\u003E- start up KSP and enjoy your mod!\u003C/p\u003E\u003Cp\u003EThere are a few drawbacks, though. Its not just that i am a C# guy and thus do not really benefit from UnityScript. But the language also seems kind of limited... for example i was not able to add an Attribute to a class. As a result, it might not be possible to create a part-less plugin using KSPAddon. Also MonoDevelop did not give me any autocompletion/intelisense for KSP/Unity stuff, just like the assemblies would not have been referenced. But someone more familiar with MonoDevelop might figure it out.\u003C/p\u003E\n"},{"CreatedByName":"LaydeeDem","CreatedById":5984,"CreatedDateTime":"2013-12-17T02:52:03Z","Content":"\n\u003Cp\u003EWhy would you use Unity Script? Visual Studio and Monodevelop are both free and much better.\u003C/p\u003E\n"},{"CreatedByName":"Faark","CreatedById":69775,"CreatedDateTime":"2013-12-19T14:42:40Z","Content":"\n\u003Cp\u003EI would not! I am fine with C#. But others might prefer UnityScript or any other language that is capable of compiling into a .net assembly, maybe in case they worked with it in various previous projects. Maybe a personal preference, and those guys don\u0027t have to be told it is impossible. I did use Monodevelop to write that UnityScript, btw.\u003C/p\u003E\u003Cp\u003EActually, UnityScript appears to offer some kind of dynamics that i think are not available to us in C#, since we have to target .net 3.5. So that\u0027s at least one other example, and i rly don\u0027t know lot about UnityScript.\u003C/p\u003E\n"}]}