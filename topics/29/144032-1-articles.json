{"TopicId":144032,"ForumId":29,"TopicTitle":"Rotating EVA\u0026#039;d Kerbals","CreatedByName":"WillDaBeast509","CreatedById":165504,"CreatedDateTime":"2016-07-17T23:58:52Z","PageNum":1,"Articles":[{"CreatedByName":"WillDaBeast509","CreatedById":165504,"CreatedDateTime":"2016-07-17T23:58:52Z","Content":"\n\u003Cp\u003E\nHello,\n\u003C/p\u003E\n\u003Cp\u003E\nSimply put, I have a plugin that needs to rotate the active kerbal on EVA, in the way that QE and holding LMB and dragging do.\u00A0I\u0027ve tried two methods so far:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Using the FlightCtrlState and OnFlyByWire - I have it working for vessels, but it seems that EVA kerbals don\u0027t refer to the FlightCtrlState object to get input. Is there something similar to this that can manipulate EVA input? Handing the game proper input would be preferred over the next method.\n\u003C/p\u003E\n\u003Cp\u003E\n2. Manually rotating the kerbal\u0027s Unity transform object (with vessel.transform.rotation *= Quaternion.AngleAxis(...)). This works, but if the kerbal\u0027s jetpack is on, it tries to resist the rotation. Setting the jetpack off (vessel.EVAController.jetpackDeployed = false), then doing the rotation, then setting the jetpack back on, applies the rotation correctly, but when the jetpack comes back on, the kerbal snaps back to its original rotation. Turning the jetpack off with the R key, rotating, then turning it back on, works properly. It seems I need a way to override the kerbals \u0022\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E,\u0022 or to properly turn off the jetpack in the way that the R key does.\n\u003C/p\u003E\n\u003Cp\u003E\nI have referred to the 1.0.5 mod \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/118087-104-eva-enhancements-pitchrollnavball-and-more/\u0022 rel=\u0022\u0022\u003EEVA Enhancements\u003C/a\u003E\u00A0which no longer works in 1.1.x in hopes of gleaning something from its code, but I cannot make sense of it at all. If anybody has solutions to either of my two methods, or another way to rotate kerbals, I would much appreciate it. Thanks for reading.\n\u003C/p\u003E\n"},{"CreatedByName":"Ger_space","CreatedById":167349,"CreatedDateTime":"2016-08-24T21:22:31Z","Content":"\n\u003Cp\u003E\nThe Rotation is a bit more tricky:\n\u003C/p\u003E\n\u003Cp\u003E\n1. You have to get the private variables from the kerbalEVA structure\n\u003C/p\u003E\n\u003Cp\u003E\n2. Set the desired vectors to them.\n\u003C/p\u003E\n\u003Cp\u003E\n3. Be happy :-)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003EKerbalEVA eva = shared.Vessel.GetComponent\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;KerbalEVA\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E();\n\nFieldInfo eva_tgtFwd = null;\nFieldInfo eva_tgtUp = null;\n\nVector3d lookdirection = (somevector)\n\nvar eva_tgtFwd = typeof(KerbalEVA).GetField(\u0022tgtFwd\u0022, System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);\nvar eva_tgtUp = typeof(KerbalEVA).GetField(\u0022tgtUp\u0022, System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);\n\nthis.eva_tgtFwd.SetValue(eva, (Vector3)lookdirection);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-10-13T03:31:41Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222680454\u0022 data-ipsquote-contentid=\u0022144032\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221468799932\u0022 data-ipsquote-userid=\u0022165504\u0022 data-ipsquote-username=\u0022WillDaBeast509\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 7/17/2016 at 7:58 PM, WillDaBeast509 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHello,\n\u003C/p\u003E\n\u003Cp\u003E\nSimply put, I have a plugin that needs to rotate the active kerbal on EVA, in the way that QE and holding LMB and dragging do.\u00A0I\u0027ve tried two methods so far:\n\u003C/p\u003E\n\u003Cp\u003E\n1. Using the FlightCtrlState and OnFlyByWire - I have it working for vessels, but it seems that EVA kerbals don\u0027t refer to the FlightCtrlState object to get input. Is there something similar to this that can manipulate EVA input? Handing the game proper input would be preferred over the next method.\n\u003C/p\u003E\n\u003Cp\u003E\n2. Manually rotating the kerbal\u0027s Unity transform object (with vessel.transform.rotation *= Quaternion.AngleAxis(...)). This works, but if the kerbal\u0027s jetpack is on, it tries to resist the rotation. Setting the jetpack off (vessel.EVAController.jetpackDeployed = false), then doing the rotation, then setting the jetpack back on, applies the rotation correctly, but when the jetpack comes back on, the kerbal snaps back to its original rotation. Turning the jetpack off with the R key, rotating, then turning it back on, works properly. It seems I need a way to override the kerbals \u0022\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E,\u0022 or to properly turn off the jetpack in the way that the R key does.\n\u003C/p\u003E\n\u003Cp\u003E\nI have referred to the 1.0.5 mod \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/118087-104-eva-enhancements-pitchrollnavball-and-more/\u0022 rel=\u0022\u0022\u003EEVA Enhancements\u003C/a\u003E\u00A0which no longer works in 1.1.x in hopes of gleaning something from its code, but I cannot make sense of it at all. If anybody has solutions to either of my two methods, or another way to rotate kerbals, I would much appreciate it. Thanks for reading.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nJust an FYI, I have EVA Enhancements updated for 1.2, and will be releasing it in the next few days. \u00A0You can see the code on Github when I do release\n\u003C/p\u003E\n"}]}