{"TopicId":72715,"ForumId":29,"TopicTitle":"Converting position to \u0026quot;orbit position\u0026quot;","CreatedByName":"PrivateFlip","CreatedById":68273,"CreatedDateTime":"2014-05-18T15:28:00Z","PageNum":1,"Articles":[{"CreatedByName":"PrivateFlip","CreatedById":68273,"CreatedDateTime":"2014-05-18T15:28:00Z","Content":"\n\u003Cp\u003EFor a new mod I\u0027m making I\u0027m getting stuck on a technical hurdle.\u003C/p\u003E\u003Cp\u003EI want to move a vessel to a location and orbit of the active vessel. The method FlightVessel.orbit.UpdateFromStateVectors() does almost exactly what i want.\u003C/p\u003E\u003Cp\u003EBelow the code for having the other vessel appear at some distance from the current vessel:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E                FlightVessel.GoOnRails();\u003Cbr\u003E                FlightVessel.orbit.UpdateFromStateVectors(FlightGlobals.ActiveVessel.orbit.pos \u002B offset, FlightGlobals.ActiveVessel.orbit.vel, FlightGlobals.ActiveVessel.orbit.referenceBody, Planetarium.GetUniversalTime());\u003Cbr\u003E                FlightVessel.GoOffRails();\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EFlightGlobals.ActiveVessel.orbit.pos gives me the position in relation to what I suspect from the size of the vector to be the celestial body.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightGlobals.ActiveVessel.orbit.pos\u003Cbr\u003E[-70687.4555733527, 696635.048411489, 31237.3830353896]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhat I want to do is to have the other vessel arrive at a specific location in relation to the current vessel. For my mod a few meters in front of a docking port. To do so i have to convert the position of a part to an \u0022orbit\u0022 position. How do I do this?\u003C/p\u003E\u003Cp\u003EThe world reference transform obviously does not work:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFlightGlobals.ActiveVessel.ReferenceTransform.position\u003Cbr\u003E(-1472.8, -6.3, -117.8)\u003Cbr\u003Etransform.TransformPoint(position)\u003Cbr\u003E(-1472.8, -6.3, -117.8)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ve tried using transform of the celestial body, but no budge.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFlightGlobals.ActiveVessel.orbit.referenceBody.bodyTransform.InverseTransformPoint(position)\u003Cbr\u003E(-395082.6, 31237.0, -578106.6)\u003Cbr\u003EFlightGlobals.ActiveVessel.orbit.referenceBody.bodyTransform.TransformPoint(position)\u003Cbr\u003E(70264.6, -31249.6, -695713.4)\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt should be doable I think. The vector FlightGlobals.ActiveVessel.orbit.pos is literally spot on (if i set the offset to zero, there are some awesome explosions). Just can\u0027t seem to convert another vector to wherever this orbit.pos is measured from.\u003C/p\u003E\u003Cp\u003EAny suggestion on how to approach this?\u003C/p\u003E\n"},{"CreatedByName":"The_Duck","CreatedById":1156,"CreatedDateTime":"2014-05-18T22:31:26Z","Content":"\n\u003Cp\u003ETry \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EFlightGlobals.ActiveVessel.ReferenceTransform.position - FlightGlobals.ActiveVessel.mainBody.transform.position\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eor perhaps\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E(FlightGlobals.ActiveVessel.ReferenceTransform.position - FlightGlobals.ActiveVessel.mainBody.transform.position).xzy\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-18T22:33:40Z\u0022 title=\u002205/18/2014 10:33  PM\u0022 data-short=\u002210 yr\u0022\u003EMay 18, 2014\u003C/time\u003E by The_Duck\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"PrivateFlip","CreatedById":68273,"CreatedDateTime":"2014-05-24T08:23:40Z","Content":"\n\u003Cp\u003EThanks! I\u0027ll try that.\u003C/p\u003E\u003Cp\u003EEDIT: Tried it, this matches up perfectly. \u003C/p\u003E\u003Cp\u003E Thanks The_Duck.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-05-24T08:50:31Z\u0022 title=\u002205/24/2014 08:50  AM\u0022 data-short=\u002210 yr\u0022\u003EMay 24, 2014\u003C/time\u003E by PrivateFlip\u003C/strong\u003E\n\u003C/span\u003E\n"}]}