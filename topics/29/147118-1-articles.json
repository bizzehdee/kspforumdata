{"TopicId":147118,"ForumId":29,"TopicTitle":"Loading question - how to stop all resources for a part from loading?","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-09-05T13:21:21Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-09-05T13:21:21Z","Content":"\n\u003Cp\u003E\nIs it sufficient to simply rename or delete the .cfg file for a part, or do I need to also rename the .mu file for that part?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, how can I easily get the name of the mu file from the AvailablePart class, and, if possible, how can I get a list of the texture files used by that mu file?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-05T13:22:28Z\u0022 title=\u002209/05/2016 01:22  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 5, 2016\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-09-05T15:25:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222742798\u0022 data-ipsquote-contentid=\u0022147118\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473081681\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs it sufficient to simply rename or delete the .cfg file for a part, or do I need to also rename the .mu file for that part?\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, how can I easily get the name of the mu file from the AvailablePart class, and, if possible, how can I get a list of the texture files used by that mu file?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMade some progress, I figured out that the model name is either the model name (specified as a model in the cfg), or, taking the full configFileFullName, deleting the last item in that (the actual file name) and appending the\u00A0mesh name\n\u003C/p\u003E\n\u003Cp\u003E\nI could also use the partURL, and delete the last two parts to get a relative patch name\n\u003C/p\u003E\n\u003Cp\u003E\nSo all I need now is to get a list of the textures, and their paths (to the texture file).\n\u003C/p\u003E\n\u003Cp\u003E\nAnd, if you have a better way to get the path to the model (.mu) file, I\u0027d love to hear it\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI also can now get the model from the game database by accessing the GameDatabase.Instance.databaseModel\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-05T15:28:10Z\u0022 title=\u002209/05/2016 03:28  PM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 5, 2016\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-09-11T08:39:44Z","Content":"\n\u003Cp\u003E\nKSP loads all assets before it loads configs, so there\u0027s not really a way to prevent them from loading without knowing beforehand and deleting/renaming them.\n\u003C/p\u003E\n\u003Cp\u003E\nA part may actually come from multiple .mu files using MODEL nodes.\n\u003C/p\u003E\n\u003Cp\u003E\nFor textures, you can access them through the renderers, something like this:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nHashSet\u0026lt;string\u0026gt; textureNames = new HashSet\u0026lt;string\u0026gt;();\n\nforeach (MeshRenderer renderer in part.FindModelComponents\u0026lt;MeshRenderer\u0026gt;())\n{\n\ttextureNames.Add(renderer.sharedMaterial.GetTexture(\u0022_MainTex\u0022).name);\n}\u003C/pre\u003E\n\u003Cp\u003E\nUsing a HashSet to avoid duplicates (HashSet represents a set of unordered unique elements).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-09-20T05:33:56Z\u0022 title=\u002209/20/2016 05:33  AM\u0022 data-short=\u00227 yr\u0022\u003ESeptember 20, 2016\u003C/time\u003E by blowfish\u003C/strong\u003E\n\u003Cbr\u003EGetComponentsInChildren -\u0026gt; FIndModelComponents avoids picking up part\u0026#039;s children\n\u003C/span\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-09-20T03:52:37Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222750661\u0022 data-ipsquote-contentid=\u0022147118\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221473583184\u0022 data-ipsquote-userid=\u0022119688\u0022 data-ipsquote-username=\u0022blowfish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 9/11/2016 at 1:39 AM, blowfish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor textures, you can access them through the renderers, something like this:\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI have a very similar problem I\u0027m trying to solve, and your code example is pretty similar to what I\u0027m trying to do, i.e. using part.GetComponentsInChildren\u0026lt;MeshRenderer\u0026gt;().\n\u003C/p\u003E\n\u003Cp\u003E\nExcept when I do that, I get all the meshes on this part \u003Cem\u003E\u003Cu\u003Eand all its child parts\u003C/u\u003E\u003C/em\u003E, not just on this part itself.\n\u003C/p\u003E\n\u003Cp\u003E\nHow can I get just the meshes on the specified part?\u00A0 (I tried calling GetComponents instead of GetComponentsInChildren, but that finds nothing at all.)\n\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2016-09-20T05:09:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222765504\u0022 data-ipsquote-contentid=\u0022147118\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221474343557\u0022 data-ipsquote-userid=\u0022125662\u0022 data-ipsquote-username=\u0022Snark\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n53 minutes ago, Snark said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI have a very similar problem I\u0027m trying to solve, and your code example is pretty similar to what I\u0027m trying to do, i.e. using part.GetComponentsInChildren\u0026lt;MeshRenderer\u0026gt;().\n\u003C/p\u003E\n\u003Cp\u003E\nExcept when I do that, I get all the meshes on this part \u003Cem\u003E\u003Cu\u003Eand all its child parts\u003C/u\u003E\u003C/em\u003E, not just on this part itself.\n\u003C/p\u003E\n\u003Cp\u003E\nHow can I get just the meshes on the specified part?\u00A0 (I tried calling GetComponents instead of GetComponentsInChildren, but that finds nothing at all.)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nRight, you probably want part.FindModelComponents\u0026lt;MeshRenderer\u0026gt;\n\u003C/p\u003E\n"},{"CreatedByName":"Snark","CreatedById":125662,"CreatedDateTime":"2016-09-20T14:23:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222765563\u0022 data-ipsquote-contentid=\u0022147118\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221474348192\u0022 data-ipsquote-userid=\u0022119688\u0022 data-ipsquote-username=\u0022blowfish\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, blowfish said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nRight, you probably want part.FindModelComponents\u0026lt;MeshRenderer\u0026gt;\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExcellent!\u00A0 Thank you, that did the trick.\u00A0 \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}