{"TopicId":110050,"ForumId":29,"TopicTitle":"2 Questions: Editor.SortedSHipList is null? and KSPAddon Flight Start running late?","CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-05-20T02:51:53Z","PageNum":1,"Articles":[{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-05-20T02:51:53Z","Content":"Alright, 2 questions on weird behavior I\u0027m seeing that is confusing me and I\u0027m hoping that someone has some ideas on what is happening.\n\n1) EditorLogic.SortedShipList is null during vessel load in the editor.\n\nDuring a vessel load, so going into the editor and hitting the Open icon to load an existing vessel, I am tying into the VesselChanged event to refresh some of my data.\n\nOn my copy of KSP (windows), the VesselChanged event fires once after the vessel is finished loading. On this players version of KSP (linux), the VesselChanged event is firing multiple times during the vessel loading process, but not in any pattern I can figure out. It seems to load half the vessel, fire VesselChanged, load a couple parts and fire VesselChanged again, then load a bunch of parts and fire VesselChanged, etc.\n\nWhen it does so, the following line of code:\n\n    foreach (Part p in EditorLogic.SortedShipList)\n\n throws a NullRef error. I can not replicate the error on my installation but the log is clear it is this exact line of code.\n\nHow can EditorLogic.SortedShipList be null while a vessel is loading if .SortedShipList is a list of parts in the editor when I know for sure several parts have been processed already?\n\n2) KSPAddon Flight Start running late?\n\nThis one really puzzles me.\n\nI have a class AGXFlight which runs in the Flight Scene via the KSPAddon.Flight method. I have a static List in that class so that code on a vessel partModule can easily find it. On my dev installation (and presumably other players installations as no one else has reported wierdness), the KSPAddon.Flight Start() method runs and finished before KSP loads the vessel that will be flown and everything is fine.\n\nFrom the log file this one player has sent me, the KSPAddon.Flight Start() method is running *after* the vessel has loaded. This is causing me problems that I don\u0027t understand as I reference AGXFlight.StaticList from the OnSave method of the partModule. (When you load the flight scene, KSP loads and them immediately saves.) \n\nNow, if my StaticList wasn\u0027t static, this would be straight forward, with the Flight Start() method running late, the StaticList does not exist for the code in the partModule OnSave to reference. However, AGXFlight.StaticList is static, shouldn\u0027t the list still exist in memory for me to reference? Or does the fact that the AGXFlight class is not static, so without an initialized AGXFlight class in existence, the static StaticList does not exist even though it is static?\n\nI\u0027m really out of my depth on this one and hope someone has some ideas.\n\nD."}]}