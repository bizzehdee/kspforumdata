{"TopicId":189440,"ForumId":29,"TopicTitle":"Hovercraft Problem","CreatedByName":"uscespc","CreatedById":182634,"CreatedDateTime":"2019-10-31T00:16:44Z","PageNum":1,"Articles":[{"CreatedByName":"uscespc","CreatedById":182634,"CreatedDateTime":"2019-10-31T00:16:44Z","Content":"\n\u003Cp\u003E\nI created a hovercraft that works well on land but I\u0027m having a problem with water.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWhen you transition from land to water the craft maintains the attitude it had on land, this is because it\u0027s transitioning from raycast feedback to just plain addforce over water.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat I would like to do is level the craft over water but I can\u0027t seem to find a way to do it.\n\u003C/p\u003E\n\u003Cp\u003E\nThe video shows the land water transition.\n\u003C/p\u003E\n\u003Cp\u003E\nJust looking for some suggestions or places to look.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://youtu.be/4-yyXHwVojQ\u0022 rel=\u0022external nofollow\u0022\u003EVideo\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Gargamel","CreatedById":64714,"CreatedDateTime":"2019-10-31T00:48:26Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/182634-uscespc/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022182634\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/182634-uscespc/\u0022 rel=\u0022\u0022\u003E@uscespc\u003C/a\u003E, I\u0027m a little unclear about what you are talking about?\u00A0\u00A0 Are you having issues flying a craft, or are you trying to write code to make a hovercraft mod?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"uscespc","CreatedById":182634,"CreatedDateTime":"2019-10-31T01:10:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223697624\u0022 data-ipsquote-contentid=\u0022189440\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221572482906\u0022 data-ipsquote-userid=\u002264714\u0022 data-ipsquote-username=\u0022Gargamel\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 minutes ago, Gargamel said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/182634-uscespc/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022182634\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/182634-uscespc/\u0022 rel=\u0022\u0022\u003E@uscespc\u003C/a\u003E, I\u0027m a little unclear about what you are talking about?\u00A0\u00A0 Are you having issues flying a craft, or are you trying to write code to make a hovercraft mod?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt\u0027s all code, I\u0027ve solved the thrust, turning, hover issues it\u0027s when you are hovering over land and cross over to water, water doesn\u0027t return raycasts which I use in a PID,\u00A0 AddForceAtPosition\u00A0 construct to hover.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://youtu.be/LxFZjWCpVOk\u0022 rel=\u0022external nofollow\u0022\u003EVideo2\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2019-10-31T21:47:22Z","Content":"\n\u003Cp\u003E\nHave you tried to use a different \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/84273-unity-layers-and-tags-updated-12-june-2018/\u0022 rel=\u0022\u0022\u003Elayer \u003C/a\u003Efor your raycast ? I am quite sure one layer actually works on water so you could combine it with the one you use for the ground. S\n\u003C/p\u003E\n"},{"CreatedByName":"uscespc","CreatedById":182634,"CreatedDateTime":"2019-11-01T16:37:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223698112\u0022 data-ipsquote-contentid=\u0022189440\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221572558442\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHave you tried to use a different \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/84273-unity-layers-and-tags-updated-12-june-2018/\u0022 rel=\u0022\u0022\u003Elayer \u003C/a\u003Efor your raycast ? I am quite sure one layer actually works on water so you could combine it with the one you use for the ground. S\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI tried them all 0-32 the only ones that returned hits were 10 Scaled Scenery and 15 Local Scenery. I use 15, 10\u0027s hit info was inconsistent.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for the suggestion.\n\u003C/p\u003E\n"},{"CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2019-11-14T21:13:19Z","Content":"\n\u003Cp\u003E\nI would suggest multiple ray cast to hover the vessel. When you are on water, use altitude replace ray cast, all other calculation stays the same.\n\u003C/p\u003E\n\u003Cp\u003E\nCheck the hover craft MOD I made previously.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/flywlyx/Hover-Craft\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/flywlyx/Hover-Craft\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"uscespc","CreatedById":182634,"CreatedDateTime":"2019-11-16T00:54:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223705243\u0022 data-ipsquote-contentid=\u0022189440\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221573765999\u0022 data-ipsquote-userid=\u002264436\u0022 data-ipsquote-username=\u0022flywlyx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/14/2019 at 3:13 PM, flywlyx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI would suggest multiple ray cast to hover the vessel. When you are on water, use altitude replace ray cast, all other calculation stays the same.\n\u003C/p\u003E\n\u003Cp\u003E\nCheck the hover craft MOD I made previously.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/flywlyx/Hover-Craft\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/flywlyx/Hover-Craft\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank You\n\u003C/p\u003E\n\u003Cp\u003E\nLooking at your code gave me a clue on how to solve the land to water transition. On land I use raycasts with a PID controller to adjust power to the hover nodes and this didn\u0027t work over water.\n\u003C/p\u003E\n\u003Cp\u003E\nIn your code I saw you use\u00A0\u00A0height = FlightGlobals.getAltitudeAtPos(rcTransform.position); so once I detect the transition from land to water I use this value in the PID controller Error field.\n\u003C/p\u003E\n\u003Cp\u003E\nLand:\u00A0HForce = PIDController(TargetHeight, hit.distance)\n\u003C/p\u003E\n\u003Cp\u003E\nWater:\u00A0 HForce = PIDController(TargetHeight, height)\n\u003C/p\u003E\n\u003Cp\u003E\nWorks great, never thought it would be this simple.\n\u003C/p\u003E\n\u003Cp\u003E\nHere is a video showing land to water and back.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://youtu.be/7fv5MTkzalg\u0022 rel=\u0022external nofollow\u0022\u003EDemo3\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2020-01-07T19:40:12Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223705826\u0022 data-ipsquote-contentid=\u0022189440\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221573865676\u0022 data-ipsquote-userid=\u0022182634\u0022 data-ipsquote-username=\u0022uscespc\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/15/2019 at 7:54 PM, uscespc said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThank You\n\u003C/p\u003E\n\u003Cp\u003E\nLooking at your code gave me a clue on how to solve the land to water transition. On land I use raycasts with a PID controller to adjust power to the hover nodes and this didn\u0027t work over water.\n\u003C/p\u003E\n\u003Cp\u003E\nIn your code I saw you use\u00A0\u00A0height = FlightGlobals.getAltitudeAtPos(rcTransform.position); so once I detect the transition from land to water I use this value in the PID controller Error field.\n\u003C/p\u003E\n\u003Cp\u003E\nLand:\u00A0HForce = PIDController(TargetHeight, hit.distance)\n\u003C/p\u003E\n\u003Cp\u003E\nWater:\u00A0 HForce = PIDController(TargetHeight, height)\n\u003C/p\u003E\n\u003Cp\u003E\nWorks great, never thought it would be this simple.\n\u003C/p\u003E\n\u003Cp\u003E\nHere is a video showing land to water and back.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://youtu.be/7fv5MTkzalg\u0022 rel=\u0022external nofollow\u0022\u003EDemo3\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIs this going to be (or is it already) a released mod?\n\u003C/p\u003E\n"}]}