{"TopicId":135179,"ForumId":29,"TopicTitle":"Info on how to convert your Plugin to KSP 1.1","CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-03-29T08:26:06Z","PageNum":5,"Articles":[{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2016-03-31T01:15:07Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222483099\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459364810\u0022 data-ipsquote-userid=\u0022135292\u0022 data-ipsquote-username=\u0022Ziw\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Ziw said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAmazing how people don\u0027t read the OP.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257146\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0022\u003E@sarbian\u003C/a\u003E\u00A0take a look \u003Ca href=\u0022https://github.com/ZiwKerman/UnityUIHelper/blob/master/UIWindowHelper.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E on my humble attempts at creating an window abstration. And \u003Ca href=\u0022https://github.com/ZiwKerman/UnityUIHelper/blob/master/UIWindowManager.cs\u0022 rel=\u0022external nofollow\u0022\u003Ethis \u003C/a\u003Eis an example of use. It worked fine in my separate U5 project, but I did not have much time to tinker\u00A0with it. Feel free to use any part of the code if you want to start a proper library.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis little source already shows we why the assetbundles are now integrated.\u003Cbr\u003E\nThe old system was so bad but never looked like soooo much work to just create a few basic windows.\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-03-31T02:33:26Z","Content":"\n\u003Cp\u003E\n\u003Cs\u003EOkay, this is a Windows question more then a KSP question, but I\u0027m hoping someone can help.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003ERunning KSP from within Steam the game has no issues. I copied the KSP folder out to make a stand alone dev version. When I right-click the KSP.exe icon and run as adminstrator, everything is fine.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EHowever, if I just double click the icon I get the following error on several files, including ones that come with KSP.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003E[LOG 20:29:31.774] Load(Assembly): Squad/Plugins/KSPSteamCtrlr\n[LOG 20:29:31.775] AssemblyLoader: Loading assembly at H:\\1.1 Dev\\GameData\\Squad\\Plugins\\KSPSteamCtrlr.dll\n[ERR 20:29:31.777] Failed to load assembly H:\\1.1 Dev\\GameData\\Squad\\Plugins\\KSPSteamCtrlr.dll:\nSystem.UnauthorizedAccessException: Access to the path \u0022H:\\1.1 Dev\\GameData\\Squad\\Plugins\\KSPSteamCtrlr.dll\u0022 is denied.\n  at System.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean anonymous, FileOptions options) [0x00000] in \u003C/span\u003E\u003Cspan\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003Eunknown\u003C/span\u003E\u003Cspan\u003E\u0026gt;\u003C/span\u003E\u003Cspan\u003E:0 \n  at System.IO.FileStream..ctor (System.String path, FileMode mode) [0x00000] in \u003C/span\u003E\u003Cspan\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003Eunknown\u003C/span\u003E\u003Cspan\u003E\u0026gt;\u003C/span\u003E\u003Cspan\u003E:0 \n  at AssemblyLoader.LoadExternalAssembly (System.String file) [0x00000] in \u003C/span\u003E\u003Cspan\u003E\u0026lt;filename\u003C/span\u003E\u003Cspan\u003E \u003C/span\u003E\u003Cspan\u003Eunknown\u003C/span\u003E\u003Cspan\u003E\u0026gt;\u003C/span\u003E\u003Cspan\u003E:0 \u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u003Cs\u003EI didn\u0027t have this issue on previous versions and I\u0027m pretty sure I\u0027ve set the security settings so that Users (as well as Administrators) have full control of the KSP folder.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EThis is on Windows 7 64-bit and both KSP 32 and 64 bit display the same behavior.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EAnyone have any ideas? Having to run KSP.exe as administrator every time I want to run it will quickly become a pain.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003ED.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIssue\u0027s fixed.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-31T03:27:51Z\u0022 title=\u002203/31/2016 03:27  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 31, 2016\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2016-03-31T02:44:45Z","Content":"\n\u003Cp\u003E\nYou could just nuke that plugin. It\u0027s useless if you don\u0027t have a steam controller. Not sure why it\u0027s causing issues though.\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-03-31T03:15:04Z","Content":"\n\u003Cp\u003E\n\u003Cs\u003EIt\u0027s not just that .dll, there\u0027s 4 or 5 .dlls that come with KSP doing this, then any .dll files I make for my mods also do it so they never load.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EThat just happened to be the one I copied pasted as an example.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EIt has to be something to do with Windows security, but I\u0027m totally stumped on what else I can try.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003ED.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIssue\u0027s fixed.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-31T03:27:35Z\u0022 title=\u002203/31/2016 03:27  AM\u0022 data-short=\u00228 yr\u0022\u003EMarch 31, 2016\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-03-31T03:18:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222484333\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459394104\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 minute ago, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt\u0027s not just that .dll, there\u0027s 4 or 5 .dlls that come with KSP doing this, then any .dll files I make for my mods also do it so they never load.\n\u003C/p\u003E\n\u003Cp\u003E\nThat just happened to be the one I copied pasted as an example.\n\u003C/p\u003E\n\u003Cp\u003E\nIt has to be something to do with Windows security, but I\u0027m totally stumped on what else I can try.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nStrange... I did exactly that.. took sveral copies of the steam folder for testing each of my mods. Nuked all the Steam files, folders, plugin....\u00A0\u003Cbr\u003E\nHaven\u0027t had an issue. and on Win 7 64bit as well.\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-03-31T03:27:21Z","Content":"\n\u003Cp\u003E\n\u003Cs\u003EUgh, nothing to do with Windows, turns out it was my security software. Fixed now.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EHowever, to actually contribute it appears that the old UI classes have been left in but are unused.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EIn flight mode, the FlightUIController class is still present but doesn\u0027t do anything and should no longer be referenced. Note that the class initializes and so a null check fails as it is present with it\u0027s defaults, they just never update. I assume the same is true for the Editor UI classes but I didn\u0027t actually check them tonight. \u00A0\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EWorth adding to the opening post?\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003ETo actually hook into the new UI I was unable to find an entry point to reference the on-screen objects but the templates can all be found in the KSP.UI namespace and they inherit from monobehavior so the FindObjectsOfType methods work on them.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003E\u003Ca href=\u0022https://github.com/SirDiazo/LandingHeight/blob/master/LandingHeight/LHFlight.cs#L27\u0022 rel=\u0022external nofollow\u0022\u003EYou can see how I do this here to access the altitude tumbler at the top of the screen.\u003C/a\u003E\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EHowever, I need some help, how do I error trap this? When leaving the flight scene there is a race condition where the altitude tumbler can be destroyed but my mod still runs for a few update frames, is there a better way of handling this then the try/catch block I\u0027m currently using?\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EI\u0027ll dig into some of my bigger mods tomorrow, LandingHeight was a nice and small one to get my feet wet.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003ED.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EApparently I just can\u0027t think straight tonight.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EThe FlightUIController.SpeedDisplayMode property is no longer used, having been replaced by FlightGlobals.SpeedDisplayMode which was the reason I though the entire class had been abandonded. However, it appears the FlightUIController class is in fact still valid, the FlightUIController.alt object is of the new KSP.UI type and appears to be the object I want to reference so the FindObjectsOfType method is not needed.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EI\u0027ll do some more digging tomorrow and see if I can actually wrap my brain around this.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-04-01T00:18:31Z\u0022 title=\u002204/01/2016 12:18  AM\u0022 data-short=\u00228 yr\u0022\u003EApril 1, 2016\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2016-03-31T06:16:10Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222484119\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459386907\u0022 data-ipsquote-userid=\u0022102791\u0022 data-ipsquote-username=\u0022Alewx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Alewx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThis little source already shows we why the assetbundles are now integrated.\u003Cbr\u003E\nThe old system was so bad but never looked like soooo much work to just create a few basic windows.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPrefabs are fine if you have fixed UI so you can create it in advance in Unity Editor. If your UI is dynamic - you need some way of creating UI dynamically via code.\n\u003C/p\u003E\n"},{"CreatedByName":"kujuman","CreatedById":28299,"CreatedDateTime":"2016-03-31T07:08:34Z","Content":"\n\u003Cp\u003E\nOne small thing I finally figured out in working to get my RenderTextures to show. I had been using KSP/Alpha/Unlit Transparent for materials I\u0027d been writing to the RT. Shader.Find(\u0022KSP/Alpha/Unlit Transparent\u0022) doesn\u0027t throw an exception, but nothing will show up on the\u00A0RT.\u00A0I substituted Sprites/Default and that solved the problem.\n\u003C/p\u003E\n"},{"CreatedByName":"TiktaalikDreaming","CreatedById":136290,"CreatedDateTime":"2016-03-31T09:09:17Z","Content":"\n\u003Cp\u003E\nIs everyone going to use this single topic to discus module debugging moving forward or will we be creating new topics in this forum (until actual 1.1 release that is)?\n\u003C/p\u003E\n\u003Cp\u003E\nAssuming option 1, I don\u0027t know what I\u0027m doing, but I can\u0027t get my stuff to accept that there\u0027s a ConfigNode method to override, and all the new DLLs are linked in.\u00A0 If I knew enough to look further I\u0027d be annoyed or something, but I don\u0027t, which is probably the issue.\u00A0 But I\u0027m going to post a couple of questions here to clarify things for others.\n\u003C/p\u003E\n\u003Cp\u003E\n32 vs 64 bit?\u00A0 I notice the KSP_Data/Managed cache of DLLs comes in 32 and 64 bit flavours.\u00A0 Do mods need to be compiled twice, once for 64bit and once for people with ancient kit?\n\u003C/p\u003E\n\u003Cp\u003E\nWhat on Kerbin are these new fangled IDE things?\u00A0 Related question: Can I rewrite my module in bash?\n\u003C/p\u003E\n\u003Cp\u003E\nIs anyone interested in helping a C# n00b out with some code updating?\u00A0 I can swap you some 3D modelling.\n\u003C/p\u003E\n\u003Cp\u003E\nNot all questions are of equal seriousness.\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-03-31T09:21:00Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222484573\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459408114\u0022 data-ipsquote-userid=\u002228299\u0022 data-ipsquote-username=\u0022kujuman\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, kujuman said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOne small thing I finally figured out in working to get my RenderTextures to show. I had been using KSP/Alpha/Unlit Transparent for materials I\u0027d been writing to the RT. Shader.Find(\u0022KSP/Alpha/Unlit Transparent\u0022) doesn\u0027t throw an exception, but nothing will show up on the\u00A0RT.\u00A0I substituted Sprites/Default and that solved the problem.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI dropped all the in-game Shader names to a\u003Ca href=\u0022https://drive.google.com/file/d/0Byg_V2NhUC_ZbGFKVWZsYTFxUTA/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003E text file here\u003C/a\u003E.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Alewx","CreatedById":102791,"CreatedDateTime":"2016-03-31T09:53:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222484537\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459404970\u0022 data-ipsquote-userid=\u0022135292\u0022 data-ipsquote-username=\u0022Ziw\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n3 hours ago, Ziw said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nPrefabs are fine if you have fixed UI so you can create it in advance in Unity Editor. If your UI is dynamic - you need some way of creating UI dynamically via code.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat is something I need in welding. Do you know something about the DefaultController.CreatePanel/Dropdown and so on?\n\u003C/p\u003E\n"},{"CreatedByName":"Ziw","CreatedById":135292,"CreatedDateTime":"2016-03-31T10:04:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222484748\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459418034\u0022 data-ipsquote-userid=\u0022102791\u0022 data-ipsquote-username=\u0022Alewx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 minutes ago, Alewx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThat is something I need in welding. Do you know something about the DefaultController.CreatePanel/Dropdown and so on?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nTake a look \u003Ca href=\u0022https://bitbucket.org/ddreaper/unity-ui-extensions\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E\u00A0There is a dynamic combo-box code somewhere there\n\u003C/p\u003E\n"},{"CreatedByName":"taniwha","CreatedById":57176,"CreatedDateTime":"2016-03-31T10:22:43Z","Content":"\n\u003Cp\u003E\nScaledSpace.Instance.scaledSpaceTransforms is effectively gone (and probably good riddance).\n\u003C/p\u003E\n\u003Cp\u003E\nIf what you are after is the transform for a celestial body, it is very easy to get now: cb.MapObject.transform\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-03-31T11:59:38Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222484690\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459415357\u0022 data-ipsquote-userid=\u0022136290\u0022 data-ipsquote-username=\u0022TiktaalikDreaming\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, TiktaalikDreaming said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIs everyone going to use this single topic to discus module debugging moving forward or will we be creating new topics in this forum (until actual 1.1 release that is)?\n\u003C/p\u003E\n\u003Cp\u003E\nAssuming option 1, I don\u0027t know what I\u0027m doing, but I can\u0027t get my stuff to accept that there\u0027s a ConfigNode method to override, and all the new DLLs are linked in.\u00A0 If I knew enough to look further I\u0027d be annoyed or something, but I don\u0027t, which is probably the issue.\u00A0 But I\u0027m going to post a couple of questions here to clarify things for others.\n\u003C/p\u003E\n\u003Cp\u003E\n32 vs 64 bit?\u00A0 I notice the KSP_Data/Managed cache of DLLs comes in 32 and 64 bit flavours.\u00A0 Do mods need to be compiled twice, once for 64bit and once for people with ancient kit?\n\u003C/p\u003E\n\u003Cp\u003E\nWhat on Kerbin are these new fangled IDE things?\u00A0 Related question: Can I rewrite my module in bash?\n\u003C/p\u003E\n\u003Cp\u003E\nIs anyone interested in helping a C# n00b out with some code updating?\u00A0 I can swap you some 3D modelling.\n\u003C/p\u003E\n\u003Cp\u003E\nNot all questions are of equal seriousness.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThere is a specific \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/forum/29-plugin-development-help-and-support/\u0022\u003Esub forum\u003C/a\u003E from mod dev and anything that is not specific to updating a mod to 1.1 should go there. You can use the 32 or 64 bit dlls to compile your mod and they will work on both arch.\n\u003C/p\u003E\n\u003Cp\u003E\nThe rest is giberish and I would rather see the post stay on topic.\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-03-31T12:35:27Z","Content":"\n\u003Cp\u003E\nSome of my mods respond to a right-click on the toolbar button (stock toolbar)\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s not working anymore. \u00A0However, left-button clicks still work.\n\u003C/p\u003E\n\u003Cp\u003E\nHere is the basic code. \u00A0First, this line adds the button to the toolbar:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\nTT_Button = ApplicationLauncher.Instance.AddModApplication (GUIToggleToolbar, GUIToggleToolbar,\n\t\t\t\t\tnull, null,\n\t\t\t\t\tnull, null,\n\t\t\t\t\tApplicationLauncher.AppScenes.SPACECENTER,\n\t\t\t\t\tTT_button_img);\u003C/pre\u003E\n\u003Cp\u003E\nand here is the function (simplified):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\t\tpublic void GUIToggleToolbar ()\n\t\t{\n\t\t\t//GUIToggle (true);\n\t\t\tLog.Info(\u0022GUIToggleToolbar\u0022);\n\t\t\t//stockToolBarcreated = true;\n\t\t\tif (Input.GetMouseButtonUp (1)) {\n\t\t\t\t//onRightButtonStockClick ();\n\t\t\t\tconfigDisplayActive = !configDisplayActive;\n\t\t\t\tif (configDisplayActive) {\n\t\t\t\t\tSetConfigVisible (true);\n\t\t\t\t\tcfgWinData = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\u003C/pre\u003E\n\u003Cp\u003E\nWhat I saw by adding the Log.Info line, is that the toolbar is not passing right-clicks to the function.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: \u00A0clarification: \u00A0The function is not called at all when I right-click on the tool-bar button\n\u003C/p\u003E\n\u003Cp\u003E\nIs this a bug, or a change in the functionality?\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-03-31T14:58:38Z\u0022 title=\u002203/31/2016 02:58  PM\u0022 data-short=\u00228 yr\u0022\u003EMarch 31, 2016\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-03-31T14:00:25Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222484926\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459427727\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhat I saw by adding the Log.Info line, is that the toolbar is not passing right-clicks to the function.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDo you mean that right-clicks don\u0027t cause the function to be called at all or just that Input.GetMouseButtonUp(1) returns false?\n\u003C/p\u003E\n"},{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2016-03-31T14:55:05Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222485068\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459432825\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n54 minutes ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDo you mean that right-clicks don\u0027t cause the function to be called at all or just that Input.GetMouseButtonUp(1) returns false?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe function isn\u0027t called\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-03-31T19:55:12Z","Content":"\n\u003Cp\u003E\nFYI to all. and especially \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257146\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0022\u003E@sarbian\u003C/a\u003E I seem to have got the VS debugger to work pain free.\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/102909-ksp-plugin-debugging-for-visual-studio-and-monodevelop-on-all-os/\u0026amp;do=embed\u0026amp;embedComment=2485835\u0026amp;embedDo=findComment\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2016-03-31T20:47:07Z","Content":"\n\u003Cp\u003E\nI\u0027m trying to get ahold of the NavBall object.\u00A0 I see it\u0027s been relocated to KSP.UI.Screens.Flight.NavBall, but the method I used to use to fetch it isn\u0027t working.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan\u003EFlightUIController.fetch.GetComponentInChildren\u003C/span\u003E\u003Cspan\u003E\u0026lt;NavBall\u0026gt;\u003C/span\u003E\u003Cspan\u003E();\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThis is called from a VesselModule descendant\u0027s\u00A0Start() method.\u00A0 FlightUIController.fetch is null.\u00A0 Should I be looking somewhere else to get a reference to the object?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-03-31T20:57:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222485973\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459457227\u0022 data-ipsquote-userid=\u002260950\u0022 data-ipsquote-username=\u0022MOARdV\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 minutes ago, MOARdV said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m trying to get ahold of the NavBall object.\u00A0 I see it\u0027s been relocated to KSP.UI.Screens.Flight.NavBall, but the method I used to use to fetch it isn\u0027t working.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan\u003EFlightUIController\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003Efetch\u003C/span\u003E\u003Cspan\u003E.\u003C/span\u003E\u003Cspan\u003EGetComponentInChildren\u003C/span\u003E\u003Cspan\u003E\u0026lt;\u003C/span\u003E\u003Cspan\u003ENavBall\u003C/span\u003E\u003Cspan\u003E\u0026gt;();\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nThis is called from a VesselModule descendant\u0027s\u00A0Start() method.\u00A0 FlightUIController.fetch is null.\u00A0 Should I be looking somewhere else to get a reference to the object?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou might want to try looking in KSP.UI.Screens.Flight\u003Cbr\u003E\nNavBallBurnVector has a public NavBall object.\n\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2016-03-31T21:07:39Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222485992\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459457822\u0022 data-ipsquote-userid=\u0022114736\u0022 data-ipsquote-username=\u0022JPLRepo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, JPLRepo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou might want to try looking in KSP.UI.Screens.Flight\u003Cbr\u003E\nNavBallBurnVector has a public NavBall object.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u00A0see that, but how do I get an instance of it?\u00A0 What do I use instead of FlightUIController.fetch to get to the UI instance is what I think I\u0027m trying to ask.\n\u003C/p\u003E\n"},{"CreatedByName":"JPLRepo","CreatedById":114736,"CreatedDateTime":"2016-03-31T21:15:53Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222486014\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459458459\u0022 data-ipsquote-userid=\u002260950\u0022 data-ipsquote-username=\u0022MOARdV\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, MOARdV said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u00A0see that, but how do I get an instance of it?\u00A0 What do I use instead of FlightUIController.fetch to get to the UI instance is what I think I\u0027m trying to ask.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFlightGlobals.SpeedDisplayMode\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/81549-diazo/\u0026amp;do=hovercard\u0022 data-mentionid=\u002281549\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/81549-diazo/\u0022\u003E@Diazo\u003C/a\u003E found it above.\n\u003C/p\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/135179-info-on-how-to-convert-your-plugin-to-ksp-11/\u0026amp;do=embed\u0026amp;embedComment=2484354\u0026amp;embedDo=findComment\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2016-03-31T21:22:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222486025\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459458953\u0022 data-ipsquote-userid=\u0022114736\u0022 data-ipsquote-username=\u0022JPLRepo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 minutes ago, JPLRepo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFlightGlobals.SpeedDisplayMode\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/81549-diazo/\u0026amp;do=hovercard\u0022 data-mentionid=\u002281549\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/81549-diazo/\u0022\u003E@Diazo\u003C/a\u003E found it above.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/135179-info-on-how-to-convert-your-plugin-to-ksp-11/\u0026amp;do=embed\u0026amp;embedComment=2484354\u0026amp;embedDo=findComment\u0022\u003E\u003C/iframe\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAh, okay.\u00A0 I knew I had seen something like that around here, but it didn\u0027t show up when I searched for it.\u00A0 Thank you.\n\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2016-04-01T00:25:03Z","Content":"\n\u003Cp\u003E\nOkay. Now that I\u0027m actually looking at this when I\u0027m not tired from staying up late, I can confirm that in flight mode, the FlightUIController class is still present but doesn\u0027t do anything and should no longer be referenced. Note that the class initializes and so a null check fails as it is present with it\u0027s defaults, they just never update. I assume the same is true for the Editor UI classes but I didn\u0027t actually check them. (Not sure of the class name.)\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTo actually hook into the new UI I was unable to find an entry point to reference the on-screen objects but the templates can all be found in the KSP.UI namespace and they inherit from monobehavior so the FindObjectsOfType methods work on them and as each UI element has its own class it\u0027s reasonably straightforward as each element is named so you can figure out what it does.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/SirDiazo/LandingHeight/blob/master/LandingHeight/LHFlight.cs#L27\u0022 rel=\u0022external nofollow\u0022\u003EYou can see how I do this here to access the altitude tumbler at the top of the screen.\u003C/a\u003E Note that I\u0027m caching the reference, FindObejctsOfType takes a long time to run and it shouldn\u0027t be running more then it has to.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, I need some help, how do I error trap this? When leaving the flight scene there is a race condition where the altitude tumbler can be destroyed but my mod still runs for a few update frames, is there a better way of handling this then the try/catch block I\u0027m currently using?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/60950-moardv/\u0026amp;do=hovercard\u0022 data-mentionid=\u002260950\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/60950-moardv/\u0022\u003E@MOARdV\u003C/a\u003EThe FlightGlobals.SpeedDisplayMode is just to see what the speed indicator above the navball displays (Surface, Orbit, or Target), it doesn\u0027t actually get you any UI element references.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2016-04-01T00:27:19Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222486399\u0022 data-ipsquote-contentid=\u0022135179\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221459470303\u0022 data-ipsquote-userid=\u002281549\u0022 data-ipsquote-username=\u0022Diazo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Diazo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022http://forum.kerbalspaceprogram.com/index.php?/profile/60950-moardv/\u0026amp;do=hovercard\u0022 data-mentionid=\u002260950\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/60950-moardv/\u0022\u003E@MOARdV\u003C/a\u003EThe FlightGlobals.SpeedDisplayMode is just to see what the speed indicator above the navball displays (Surface, Orbit, or Target), it doesn\u0027t actually get you any UI element references.\n\u003C/p\u003E\n\u003Cp\u003E\nD.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI saw that, but I also saw how you were getting the UI element in that code snippet on GitHub.\u00A0 That same approach works for the NavBall object, so the your post indirectly helped me solve my problem (and it also pointed out that I needed to use FlightGlobals for speedDisplayMode).\n\u003C/p\u003E\n"}]}