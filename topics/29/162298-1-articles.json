{"TopicId":162298,"ForumId":29,"TopicTitle":"How can one get the coordinates of fixed spot on the KSC grounds? [solved]","CreatedByName":"Antipodes","CreatedById":157104,"CreatedDateTime":"2017-06-19T14:14:30Z","PageNum":1,"Articles":[{"CreatedByName":"Antipodes","CreatedById":157104,"CreatedDateTime":"2017-06-19T14:14:30Z","Content":"\n\u003Cp\u003E\nHello all. I am hoping someone out there can help me with an issue I am having.\n\u003C/p\u003E\n\u003Cp\u003E\nI am trying to expand my\u00A0\u003Ca href=\u0022https://spacedock.info/mod/228/WalkAbout\u0022 rel=\u0022external nofollow\u0022\u003EWalkabout\u003C/a\u003E\u00A0mod to work with relocated KSCs (\u003Cspan\u003E\u003Cspan\u003E\u00E0 la Kopernicus or Galileo). To do so, I need to reliably locate a fixed spot on the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E grounds. It doesn\u0027t matter which spot it is, but I need to be able to get the coordinates of, let\u0027s say, the flagpole whether or not Galileo is installed.\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cspan\u003EI tried using code similar to the following:\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Evar Kerbin = Planetarium.fetch.Home;\nPQSCity \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E = null;\nforeach (var city in Kerbin.pqsController.GetComponentsInChildren\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;PQSCity\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E(true))\n{\n\u00A0 \u00A0 if (city.name == \u0022\u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\u0022)\n\u00A0 \u00A0 {\n\u00A0 \u00A0 \u00A0 \u00A0 \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E = city;\n\u00A0 \u00A0 \u00A0 \u00A0 break;\n\u00A0 \u00A0 }\n}\nvar kscVectorPosition = \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003Eksc\u003C/abbr\u003E.transform.position;\n\nvar latitude = Kerbin.GetLatitude(kscVectorPosition);\nvar longitude = Kerbin.GetLongitude(kscVectorPosition);\nvar altitude = Kerbin.GetAltitude(kscVectorPosition);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nWhen I do this with a plain vanilla install of \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E (v1.2.2), it gives me a point that is in the centre of the crawlway about 1/4 of the way between the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E and the launchpad.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, when Galileo is installed (also with v1.2.2), it gives me a point that is near the edge of the R\u0026amp;D buildings.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there a way that I can reliably get the coordinates of a point in the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-06-19T21:07:19Z\u0022 title=\u002206/19/2017 09:07  PM\u0022 data-short=\u00227 yr\u0022\u003EJune 19, 2017\u003C/time\u003E by Antipodes\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Antipodes","CreatedById":157104,"CreatedDateTime":"2017-06-25T16:44:16Z","Content":"\n\u003Cp\u003E\nI looked through the API documentation and found the SpaceCenter object. I thought that might help:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Evar kscVectorPosition =\n    ((FlagPoleFacility)SpaceCenter.FindObjectOfType(typeof(FlagPoleFacility)))\n    .transform\n    .position;\nvar latitude = Kerbin.GetLatitude(kscVectorPosition);\nvar longitude = Kerbin.GetLongitude(kscVectorPosition);\nvar altitude = Kerbin.GetAltitude(kscVectorPosition);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nbut it was to no avail. In vanilla \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E I get the proper position for the flagpole, but with Galileo I get a position west of the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E.\n\u003C/p\u003E\n"},{"CreatedByName":"legacy.nl","CreatedById":179305,"CreatedDateTime":"2017-06-29T11:30:56Z","Content":"\n\u003Cp\u003E\nMaybe you can store the offset of the flagpole\u0027s location relative to the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E position.\n\u003C/p\u003E\n\u003Cp\u003E\nThat way flagpole offset \u002B spacenter.position will always point to the flagpole. Unless there are mods out there that move the location of \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E buildings, but I don\u0027t think that\u0027s even possible.\n\u003C/p\u003E\n"},{"CreatedByName":"Antipodes","CreatedById":157104,"CreatedDateTime":"2017-06-30T17:00:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223102560\u0022 data-ipsquote-contentid=\u0022162298\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221498409056\u0022 data-ipsquote-userid=\u0022157104\u0022 data-ipsquote-username=\u0022Antipodes\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2017-6-25 at 9:44 AM, Antipodes said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI looked through the API documentation and found the SpaceCenter object. I thought that might help:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003Evar kscVectorPosition =\n    ((FlagPoleFacility)SpaceCenter.FindObjectOfType(typeof(FlagPoleFacility)))\n    .transform\n    .position;\nvar latitude = Kerbin.GetLatitude(kscVectorPosition);\nvar longitude = Kerbin.GetLongitude(kscVectorPosition);\nvar altitude = Kerbin.GetAltitude(kscVectorPosition);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nbut it was to no avail. In vanilla \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E I get the proper position for the flagpole, but with Galileo I get a position west of the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAh Ha! I got it! The method I posted above does work. The success was hidden by a bug I introduced while trying to display the results.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI still don\u0027t know why GPP gives me different results for the location of the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E, but it doesn\u0027t matter if I can reliably get the location of the flagpole.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNow I just have do some validation (I. E ensure the flagpole does not change position as the buildings are upgraded) and I will be ready to work on updating WalkAbout.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Antipodes","CreatedById":157104,"CreatedDateTime":"2017-06-30T17:17:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223106243\u0022 data-ipsquote-contentid=\u0022162298\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221498735856\u0022 data-ipsquote-userid=\u0022179305\u0022 data-ipsquote-username=\u0022legacy.nl\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2017-6-29 at 4:30 AM, legacy.nl said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMaybe you can store the offset of the flagpole\u0027s location relative to the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E position.\n\u003C/p\u003E\n\u003Cp\u003E\nThat way flagpole offset \u002B spacenter.position will always point to the flagpole. Unless there are mods out there that move the location of \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E buildings, but I don\u0027t think that\u0027s even possible.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThat is exactly the problem I was running into. Vanilla KSP says the centre of the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E is somewhere in the crawlway, so the flagpole would be x metres due west. But GPP says the centre of the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E is in the R\u0026amp;D facility and the flagpole is y meters NWN. So any offsets I stored would give me inconsistent positions relative to the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E depending on which mods were installed.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nFortunately, as my previous post shows, I can get the lat/long of the flagpole independently from the position of the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E so I can base all my calculations on the position of the flagpole and don\u0027t have to worry about the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E having been moved.\n\u003C/p\u003E\n\u003Cp\u003E\nI am going to have to check if the \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E has been rotated, lifted, lowered or rescaled, but I already know how to handle those issues.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}