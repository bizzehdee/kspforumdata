{"TopicId":17234,"ForumId":29,"TopicTitle":"ok what is wrong with my code?","CreatedByName":"seannybgoode","CreatedById":41332,"CreatedDateTime":"2012-08-18T19:46:01Z","PageNum":1,"Articles":[{"CreatedByName":"seannybgoode","CreatedById":41332,"CreatedDateTime":"2012-08-18T19:46:01Z","Content":"\n\u003Cp\u003EOK so I\u0027m a noob. I started developing plugins for KSP about 2 hours ago. I\u0027m using VS 2010. I\u0027m not sure what I\u0027m doing wrong, but I\u0027m getting a \u0022an Object Reference is required for the non-static field method or property Vessel.\u0026lt;anything I try to use in the vessel class\u0026gt;\u003C/p\u003E\u003Cp\u003EHere\u0027s my code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Text;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003Eusing UnityThreading;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Enamespace KSPEngines\u003Cbr\u003E{\u003Cbr\u003E    public class EngineControls\u003Cbr\u003E    {\u003Cbr\u003E        protected override void onFlightStart()\u003Cbr\u003E        {\u003Cbr\u003E            startGUI();\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public void startGUI()\u003Cbr\u003E        {\u003Cbr\u003E            if (Vessel.active)\u003Cbr\u003E            {\u003Cbr\u003E                Guid vesselID = Vessel.id;\u003Cbr\u003E            }\u003Cbr\u003E            GUI.Box(new Rect(25,25,100,100), \u0022Engine Controls\u0022);\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Neomatt","CreatedById":30294,"CreatedDateTime":"2012-08-18T22:48:23Z","Content":"\n\u003Cp\u003ESimple: you\u0027re using Vessel, not \u0022vessel\u0022 (no caps).\u003C/p\u003E\u003Cp\u003EVessel is the class, vessel (or this.vessel) is the instance of the class.\u003C/p\u003E\n"},{"CreatedByName":"seannybgoode","CreatedById":41332,"CreatedDateTime":"2012-08-19T18:49:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Neomatt\u0022 data-cite=\u0022Neomatt\u0022\u003E\u003Cdiv\u003ESimple: you\u0027re using Vessel, not \u0022vessel\u0022 (no caps).\u003Cp\u003EVessel is the class, vessel (or this.vessel) is the instance of the class.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks for the reply.\u003C/p\u003E\u003Cp\u003ECan you give an example of how it would be used? I\u0027m coming from java, so maybe there\u0027s some subtle difference I\u0027m not getting.\u003C/p\u003E\u003Cp\u003EIn java if I wanted to use something from the math class, I would say\u003C/p\u003E\u003Cp\u003Edouble randomNum = Math.random(); //random being a component of the math libraries\u003C/p\u003E\u003Cp\u003ESo in this if I understand what you\u0027re saying, If i want to get the ID of the vessel, I say this:\u003C/p\u003E\u003Cp\u003Eint vesselID = id.vessel(); \u003C/p\u003E\u003Cp\u003EI know that I\u0027m not understanding the class structure completely, so if someone could shed some light, that would be appreciated.\u003C/p\u003E\n"},{"CreatedByName":"Neomatt","CreatedById":30294,"CreatedDateTime":"2012-08-20T05:37:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022seannybgoode\u0022 data-cite=\u0022seannybgoode\u0022\u003E\u003Cdiv\u003EThanks for the reply.\u003Cp\u003ECan you give an example of how it would be used? I\u0027m coming from java, so maybe there\u0027s some subtle difference I\u0027m not getting.\u003C/p\u003E\u003Cp\u003EIn java if I wanted to use something from the math class, I would say\u003C/p\u003E\u003Cp\u003Edouble randomNum = Math.random(); //random being a component of the math libraries\u003C/p\u003E\u003Cp\u003ESo in this if I understand what you\u0027re saying, If i want to get the ID of the vessel, I say this:\u003C/p\u003E\u003Cp\u003Eint vesselID = id.vessel(); \u003C/p\u003E\u003Cp\u003EI know that I\u0027m not understanding the class structure completely, so if someone could shed some light, that would be appreciated.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo no, it\u0027s just like Java; classes attributes are accessed the \u0022object.attribute\u0022, like vessel.id.\u003C/p\u003E\u003Cp\u003EThere are a few things I noticed though:\u003C/p\u003E\u003Cp\u003E- your EngineControls class does not inherit from Part or PartModule; that\u0027s necessary for a part (and it\u0027s important to get the part\u0027s vessel).\u003C/p\u003E\u003Cp\u003E- the Part class has a few attributes you inherit: \u0022parent\u0022 (another Part), \u0022vessel\u0022 (a Vessel instance, containing a list of parts), and other stuff. When I said to use \u0022vessel.active\u0022 instead of \u0022Vessel.active\u0022, it means using the instance attribute \u0022this.vessel.active\u0022 (is the vessel in which my part is right now active?) instead of the static attribute Vessel.active (which doesn\u0027t know which instance is calling).\u003C/p\u003E\u003Cp\u003EClass vs. instance is the same in Java; one is the definition (Class, Caps \u0022title\u0022), the other is the instantiated object from this class (instance, no caps, linked to your object).\u003C/p\u003E\n"},{"CreatedByName":"seannybgoode","CreatedById":41332,"CreatedDateTime":"2012-08-20T18:08:56Z","Content":"\n\u003Cp\u003EThanks again for the reply. \u003C/p\u003E\u003Cp\u003EVS still does not like me using the this.vessel on anything.\u003C/p\u003E\u003Cp\u003EFor example:\u003C/p\u003E\u003Cp\u003E foreach (Part p in this.vessel.parts)\u003C/p\u003E\u003Cp\u003E { \u003C/p\u003E\u003Cp\u003E }\u003C/p\u003E\u003Cp\u003Edoes not work\u003C/p\u003E\u003Cp\u003EI understand what you\u0027re saying, and I\u0027m aware that I need to reference the currently selected vessel. But I really really need to see a code example to understand what\u0027s going on. I don\u0027t have a strong background in object oriented programming, so this is very new to me.\u003C/p\u003E\u003Cp\u003EI understand WHAT I need to do, so don\u0027t bother trying to explain that, what I\u0027m lost on is the HOW to do it.\u003C/p\u003E\u003Cp\u003E\u0022this.\u0022 was a pretty helpful tip, but how does that relate to \u0022vessel\u0022 which is a member of Parts, and how does that relate to Vessel who has parts as a relative??\u003C/p\u003E\n"},{"CreatedByName":"seannybgoode","CreatedById":41332,"CreatedDateTime":"2012-08-20T18:11:06Z","Content":"\n\u003Cp\u003EAlso, I\u0027m not trying to create a part here. I\u0027m trying to do something else, so of course my engine contols class wouldn\u0027t inherit from part.\u003C/p\u003E\u003Cp\u003EBut like I said initially, code examples please. Would be much more helpful.\u003C/p\u003E\n"},{"CreatedByName":"Neomatt","CreatedById":30294,"CreatedDateTime":"2012-08-20T21:57:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022seannybgoode\u0022 data-cite=\u0022seannybgoode\u0022\u003E\u003Cdiv\u003EAlso, I\u0027m not trying to create a part here. I\u0027m trying to do something else, so of course my engine contols class wouldn\u0027t inherit from part.\u003Cp\u003EBut like I said initially, code examples please. Would be much more helpful.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere are a few there: \u003Ca href=\u0022http://kspwiki.nexisonline.net/wiki/Module_code_examples\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kspwiki.nexisonline.net/wiki/Module_code_examples\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBut for the \u0022not a Part\u0022 thing, I\u0027m not sure it\u0027s possible to do right now.\u003C/p\u003E\u003Cp\u003EWhat was new in 0.15 is the PartModule class (lots of details here: \u003Ca href=\u0022http://kerbalspaceprogram.com/forum/showthread.php/10296-0-15-code-update-PartModule-KSPField-KSPEvent-ConfigNode-and-PartResource\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://kerbalspaceprogram.com/forum/showthread.php/10296-0-15-code-update-PartModule-KSPField-KSPEvent-ConfigNode-and-PartResource\u003C/a\u003E), but even with this, you still need to add your code via a part (or edit the .cfg of an existing one).\u003C/p\u003E\u003Cp\u003EFrom what I got from the code above, you\u0027re trying to control engines; those are the parts you should extend (or create your own).\u003C/p\u003E\u003Cp\u003EAs for this.vessel, well, if your class is not inherited from Part, and doesn\u0027t have \u0022Vessel vessel = (code to define the vessel)\u0022 in it, sure, this.vessel doesn\u0027t work, since it\u0027s not defined in your class.\u003C/p\u003E\u003Cp\u003EThe keyword \u0022this\u0022 means that it\u0027s the current instance of a class; you could have a Part A (decoupler) and a Part B (engine) at the same time, both parts, but if your code says \u0022this.vessel\u0022, A and B will each look their own value for vessel.\u003C/p\u003E\u003Cp\u003EAnyway, I\u0027m pretty sure you\u0027ll have to use Part or PartModule; even MechJeb still uses a part (and it\u0027s one of the biggest plug-in out there).\u003C/p\u003E\n"},{"CreatedByName":"Cryphonus","CreatedById":23502,"CreatedDateTime":"2012-08-20T22:17:17Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022seannybgoode\u0022 data-cite=\u0022seannybgoode\u0022\u003E\u003Cdiv\u003EOK so I\u0027m a noob. I started developing plugins for KSP about 2 hours ago. I\u0027m using VS 2010. I\u0027m not sure what I\u0027m doing wrong, but I\u0027m getting a \u0022an Object Reference is required for the non-static field method or property Vessel.\u0026lt;anything I try to use in the vessel class\u0026gt;\u003Cp\u003EHere\u0027s my code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eusing System;\u003Cbr\u003Eusing System.Collections.Generic;\u003Cbr\u003Eusing System.Linq;\u003Cbr\u003Eusing System.Text;\u003Cbr\u003Eusing UnityEngine;\u003Cbr\u003Eusing UnityThreading;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Enamespace KSPEngines\u003Cbr\u003E{\u003Cbr\u003E    public class EngineControls\u003Cbr\u003E    {\u003Cbr\u003E        protected override void onFlightStart()\u003Cbr\u003E        {\u003Cbr\u003E            startGUI();\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public void startGUI()\u003Cbr\u003E        {\u003Cbr\u003E            if (Vessel.active)\u003Cbr\u003E            {\u003Cbr\u003E                Guid vesselID = Vessel.id;\u003Cbr\u003E            }\u003Cbr\u003E            GUI.Box(new Rect(25,25,100,100), \u0022Engine Controls\u0022);\u003Cbr\u003E        }\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EExtend your class as a Part and add OnPartStart or something like that (search the .dll). Now even if you don\u0027t wan\u0027t to do a part (just engine control as far as i can see), you should add a part that will trigger the engine control. That\u0027s how things work, you shouldn\u0027t do things in the GUI section because physics are not being simulated while you have your GUI open.\u003C/p\u003E\n"}]}