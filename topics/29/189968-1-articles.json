{"TopicId":189968,"ForumId":29,"TopicTitle":"GUILayout.Toggle not spacing properly","CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-11-24T01:37:51Z","PageNum":1,"Articles":[{"CreatedByName":"linuxgurugamer","CreatedById":129964,"CreatedDateTime":"2019-11-24T01:37:51Z","Content":"\n\u003Cp\u003E\nI\u0027ve come across an odd problem. It seems that the standard KSP skin doesn\u0027t define the GUILayout.Toggle width properly. I\u0027ve tried it with just GUILayout.Toggle, and also using CalcSize, and in both cases the effective width is just the size of the radiobutton. Has anyone else seen this? It\u0027s hit me in two mods I\u0027m working on right now\n\u003C/p\u003E\n\u003Cp\u003E\nWhen I use the standard Unity skin, it works.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve opened a bug about this:\u00A0\u00A0\u003Ca href=\u0022https://bugs.kerbalspaceprogram.com/issues/24417\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://bugs.kerbalspaceprogram.com/issues/24417\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe following images show the issue:\n\u003C/p\u003E\n\u003Cp\u003E\nUnity skin, everything working properly\u003Cbr\u003E\u003Cimg alt=\u0022237TSZ6.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002211.54\u0022 height=\u0022104\u0022 width=\u0022901\u0022 src=\u0022https://i.imgur.com/237TSZ6.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nKSP skin, left shows the problem, right is working due to using CalcSize\u003Cbr\u003E\u003Cimg alt=\u0022V5pYuw4.png\u0022 class=\u0022ipsImage\u0022 data-ratio=\u002211.18\u0022 height=\u0022101\u0022 width=\u0022903\u0022 src=\u0022https://i.imgur.com/V5pYuw4.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nHere is the code you can try out.\u00A0 Click the toggle labeled \u0022Use Alt.Skin\u0022 to toggle between the standard Unity skin and the KSP skin:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003Eusing System.Collections.Generic;\nusing UnityEngine;\nusing KSP.Localization;\nusing KSP.UI.Screens;\n\nnamespace BadDemo\n{\n    [KSPAddon(KSPAddon.Startup.FlightEditorAndKSC, false)]\n    public partial class FlightEditSaver : MonoBehaviour\n    {\n        const string ALT = \u0022Use Alt.Skin\u0022;\n        const float REVERTWIDTH = 450;\n        const float REVERTHEIGHT = 100;\n        Rect _revertRect = new Rect((Screen.width - REVERTWIDTH) * .75f, (Screen.height - REVERTHEIGHT) / 2, REVERTWIDTH, REVERTHEIGHT);\n        Rect _revertRect2 = new Rect((Screen.width - REVERTWIDTH) * .25f, (Screen.height - REVERTHEIGHT) / 2, REVERTWIDTH, REVERTHEIGHT);\n\n        bool useAltSkin = true;\n        void OnGUI()\n        {\n            if (!useAltSkin)\n                GUI.skin = HighLogic.Skin;\n            _revertRect = GUILayout.Window(this.GetInstanceID() \u002B 1, _revertRect, new GUI.WindowFunction(DrawWithCalc), \u0022Using CalcSize\u0022, new GUILayoutOption[0]);\n            _revertRect2 = GUILayout.Window(this.GetInstanceID() \u002B 2, _revertRect2, new GUI.WindowFunction(DrawNoCalc), \u0022No Size Calculation\u0022, new GUILayoutOption[0]);\n\n        }\n\n        void DrawWithCalc(int id)\n        {\n            GUILayout.BeginHorizontal();\n            Display(\u0022one\u0022);\n            Display(\u0022Two\u0022);\n            Display(\u0022three\u0022);\n            GUILayout.FlexibleSpace();\n            Display(ALT);\n            GUILayout.EndHorizontal();\n            GUI.DragWindow();\n        }\n        void DrawNoCalc(int id)\n        {\n            GUILayout.BeginHorizontal();\n            GUILayout.Toggle(false, \u0022one\u0022);\n            GUILayout.Toggle(false, \u0022Two\u0022);\n            GUILayout.Toggle(false, \u0022three\u0022);\n            GUILayout.FlexibleSpace();\n            useAltSkin = GUILayout.Toggle(useAltSkin, ALT);\n            GUILayout.EndHorizontal();\n            GUI.DragWindow();\n        }\n\n\n        void Display(string str)\n        {\n            GUIContent content = new GUIContent(str);\n            var size = GUI.skin.textField.CalcSize(content);\n            if (str == ALT)\n                useAltSkin = GUILayout.Toggle(useAltSkin, content, GUILayout.Width(size.x \u002B 24));\n            else\n                GUILayout.Toggle(false, content, GUILayout.Width(size.x \u002B 24));\n        }\n    }\n\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-11-24T15:55:04Z\u0022 title=\u002211/24/2019 03:55  PM\u0022 data-short=\u00224 yr\u0022\u003ENovember 24, 2019\u003C/time\u003E by linuxgurugamer\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2021-02-26T21:39:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223709098\u0022 data-ipsquote-contentid=\u0022189968\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221574559471\u0022 data-ipsquote-userid=\u0022129964\u0022 data-ipsquote-username=\u0022linuxgurugamer\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/23/2019 at 7:37 PM, linuxgurugamer said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHas anyone else seen this?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSeeing it right now, thanks for sharing your workaround.\n\u003C/p\u003E\n"}]}