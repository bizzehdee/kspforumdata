{"TopicId":130131,"ForumId":29,"TopicTitle":"[Answered] Are DLLs compiled with Roslyn (C# 6) compatible with Linux/OSX KSP?","CreatedByName":"Aelfhe1m","CreatedById":142910,"CreatedDateTime":"2016-01-17T18:22:52Z","PageNum":1,"Articles":[{"CreatedByName":"Aelfhe1m","CreatedById":142910,"CreatedDateTime":"2016-01-17T18:22:52Z","Content":"\n\u003Cp\u003E\nI would like to take advantage of some of the new language features in C# 6/Visual Studio 2015\u00A0but I\u0027m unsure whether the result is mono compatible. Testing on my Win 10 machine shows no problems. Anyone know if Linux or Mac OS versions of KSP would have any problem with\u00A0the DLL? (The compile target is still .NET 3.5.)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-18T00:50:47Z\u0022 title=\u002201/18/2016 12:50  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 18, 2016\u003C/time\u003E by Aelfhe1m\u003C/strong\u003E\n\u003Cbr\u003ESet title to answered\n\u003C/span\u003E\n"},{"CreatedByName":"Aelfhe1m","CreatedById":142910,"CreatedDateTime":"2016-01-17T20:23:09Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222366896\u0022 data-ipsquote-contentid=\u0022130131\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453058089\u0022 data-ipsquote-userid=\u0022113164\u0022 data-ipsquote-username=\u0022Thomas P.\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, Thomas P. said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAs long as they don\u0027t use .NET 4\u002B specific things, such as async, they are completely compatible with Mono, since the result is still valid IL code.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks. Thought that should be the case but nice to have confirmation.\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-01-17T21:10:38Z","Content":"\n\u003Cp\u003E\nThey are. You can even compile with Roslyn on Linux. The last few Mechjeb-dev and \u00A0ModuleManager are build with Roslyn on Linux.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI will most likely start to use C# features 6 soonish, but I am afraid of the impact of people who help with my mods...\n\u003C/p\u003E\n"},{"CreatedByName":"Aelfhe1m","CreatedById":142910,"CreatedDateTime":"2016-01-17T23:02:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222367150\u0022 data-ipsquote-contentid=\u0022130131\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453065038\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThey are. You can even compile with Roslyn on Linux. The last few Mechjeb-dev and \u00A0ModuleManager are build with Roslyn on Linux.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOh, last I looked mono was still catching up with some of the Roslyn features (not that those specific features were ones I planned to use for modding)\u00A0or has Microsoft released a Linux native compiler that I haven\u0027t noticed?\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI will most likely start to use C# features 6 soonish, but I am afraid of the impact of people who help with my mods...\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes, could be a concern with more collaborative mods but C# 6 is mostly\u00A0just syntactic sugar.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter you\u0027ve seen ?. and $\u0022{}\u0022 used a couple of times I find it becomes second nature for most people. Anyone that\u0027s done a lot of Linq or Func programming is used to the =\u0026gt; lambda arrow so expression body methods look natural too.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-17T23:05:44Z\u0022 title=\u002201/17/2016 11:05  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 17, 2016\u003C/time\u003E by Aelfhe1m\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-01-18T09:05:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222367320\u0022 data-ipsquote-contentid=\u0022130131\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453071756\u0022 data-ipsquote-userid=\u0022142910\u0022 data-ipsquote-username=\u0022Aelfhe1m\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n10 hours ago, Aelfhe1m said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nOh, last I looked mono was still catching up with some of the Roslyn features (not that those specific features were ones I planned to use for modding)\u00A0or has Microsoft released a Linux native compiler that I haven\u0027t noticed?\n\u003C/p\u003E\n\u003Cp\u003E\nYes, could be a concern with more collaborative mods but C# 6 is mostly\u00A0just syntactic sugar.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter you\u0027ve seen ?. and $\u0022{}\u0022 used a couple of times I find it becomes second nature for most people. Anyone that\u0027s done a lot of Linq or Func programming is used to the =\u0026gt; lambda arrow so expression body methods look natural too.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe mono compiler does not officially support .NET 3.5 so I did not want to take risk (and I somehow trust the MS compiler to generate better IL). Having Roslyn run on linux involve the really complex procedure of copying 8 files from a Windows PC \u003Cimg alt=\u0022;)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0or a \u003Ca href=\u0022https://bitbucket.org/alexzzzz/unity-c-5.0-and-6.0-integration/src/0da763dabe23876b820dbd506e1868cd9cd9ef0f/CSharp60Support/Roslyn/?at=default\u0022 rel=\u0022external nofollow\u0022\u003Econvenient project\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0?. and $\u0022{} is what I am interested most. I have read that ?.\u00A0may ont work properly with Unity object since \u003Ca href=\u0022http://blogs.unity3d.com/2014/05/16/custom-operator-should-we-keep-it/\u0022 rel=\u0022external nofollow\u0022\u003Ethey override the equality operator\u003C/a\u003E. I need to\u00A0test that\n\u003C/p\u003E\n\u003Cp\u003E\nLinq is nice but allocate far too many object with Unity old Mono. The\u00A0Func is something I need to look into more since I don\u0027t really see the point so far (beside the compact form, and the obvious use with Linq)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-18T09:07:13Z\u0022 title=\u002201/18/2016 09:07  AM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 18, 2016\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Aelfhe1m","CreatedById":142910,"CreatedDateTime":"2016-01-18T18:07:14Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222367918\u0022 data-ipsquote-contentid=\u0022130131\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221453107947\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n9 hours ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI have read that ?.\u00A0may ont work properly with Unity object since \u003Ca href=\u0022http://blogs.unity3d.com/2014/05/16/custom-operator-should-we-keep-it/\u0022 rel=\u0022external nofollow\u0022\u003Ethey override the equality operator\u003C/a\u003E. I need to\u00A0test that\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIf I\u0027m reading that article correctly then the override is only applied in the Unity editor itself so would not affect the vast majority of KSP mods that are never run there (may affect the debugging experience though if you hook up through Unity but I\u0027ve not reached that level of complexity yet). I\u0027ve done a little testing with\u00A0FlightGlobals.ActiveVessel?.XXX and on the returned sub-objects and they seem to work as expected with no spurious values or\u00A0NREs in the game log. Not definitive by any means but a hopeful indication.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-01-18T18:09:11Z\u0022 title=\u002201/18/2016 06:09  PM\u0022 data-short=\u00228 yr\u0022\u003EJanuary 18, 2016\u003C/time\u003E by Aelfhe1m\u003C/strong\u003E\n\u003Cbr\u003Eafterthought\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-01-18T18:50:33Z","Content":"\n\u003Cp\u003E\nGreat, I somehow missed the \u0022Editor\u0022 part \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}