{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":77,"Articles":[{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-09-06T01:40:35Z","Content":"\n\u003Cp\u003E@EladDv: Yikes, there are several issues with your code and they are bad enough I can\u0027t actually parse what you are trying to do with this.\u003C/p\u003E\u003Cp\u003EMy comments in line:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E  partConfig.Save(KSPUtil.ApplicationRootPath\u002B \u0022\\\\EladsConfig.cfg\u0022); //Okay, you are saving the partConfig configNode to disk at that file location.         \u003Cbr\u003E            Part FinalPart = ConfigNode.CreateObjectFromConfig\u0026lt;Part\u0026gt;(partConfig) ; //making a new part FinalPart from the partConfig configNode. You sure this is a valid part configNode? I see no error checking or null checking to make sure this worked.\u003Cbr\u003E            //ConfigNode.LoadObjectFromConfig(FinalPart, partConfig);\u003Cbr\u003E            List\u0026lt;PartResource\u0026gt; newList = new List\u0026lt;PartResource\u0026gt;(); //make a new list of Resources, alright.\u003Cbr\u003E            foreach (ConfigNode node in TotalResources) //cycle through the TotalResources list, but as ConfigNodes? That seems odd but as you don\u0027t post your code where you populate TotalResources I can\u0027t comment further.\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log(\u0022 creating resources \u0022);\u003Cbr\u003E                PartResource res = new PartResource(); //make a new resource called res\u003Cbr\u003E                string resourceName = node.GetValue(\u0022name\u0022);\u003Cbr\u003E                double resourceAmount = double.Parse(node.GetValue(\u0022amount\u0022));\u003Cbr\u003E                double resourceMax = double.Parse(node.GetValue(\u0022maxAmount\u0022));\u003Cbr\u003E                res.resourceName = resourceName;\u003Cbr\u003E                res.amount = resourceAmount;\u003Cbr\u003E                res.maxAmount = resourceMax;\u003Cbr\u003E                FinalPart.Resources.Add(node); //you are adding the raw node to FinalPart? You sure this works? Resources is a list of PartResource objects, not ConfigNode obejcts.\u003Cbr\u003E\u003Cbr\u003E                //something is missing here, you made the res Resource but you just hit the end of the method where you created it without saving it, you hit this close bracket the res object gets sent to garbage collection to be destroyed.\u003Cbr\u003E            }\u003Cbr\u003E            Debug.Log(\u0022 created resources \u0022);\u003Cbr\u003E            Debug.Log(\u0022 Created Part \u0022);\u003Cbr\u003E            Debug.Log(\u0022 Part mass \u0022 \u002B FinalPart.mass);\u003Cbr\u003E            Debug.Log(\u0022 Part Name \u0022 \u002B FinalPart.partName);\u003Cbr\u003E            return FinalPart;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo ya, I can\u0027t actually tell what you were trying to do. Notable the \u0027res\u0027 resource object isn\u0027t actually doing anything.\u003C/p\u003E\u003Cp\u003E@NathanKell: The issue with ForEach being a bad option in Unity is only true if you use Unity\u0027s built-in compiler. If you use a recent compiler, such as Microsoft\u0027s Visual Studio, there is no issue with ForEach.\u003C/p\u003E\u003Cp\u003E@Commander Jebidiah: You\u0027d have to run code that compared current temperature of a part to that part\u0027s maxTemp, then trigger the alarm via a .playSound object. Exactly how depends on what you are doing, just heatshield parts? Probably would use a PartModule. Every part on the loaded vessel? Probably use a KSPAddon.Flight class to do so.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-06T01:48:59Z\u0022 title=\u002209/06/2015 01:48  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 6, 2015\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"EladDv","CreatedById":118368,"CreatedDateTime":"2015-09-06T08:27:08Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E@EladDv: Yikes, there are several issues with your code and they are bad enough I can\u0027t actually parse what you are trying to do with this.\u003Cp\u003EMy comments in line:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E  partConfig.Save(KSPUtil.ApplicationRootPath\u002B \u0022\\\\EladsConfig.cfg\u0022); //Okay, you are saving the partConfig configNode to disk at that file location.         \u003Cbr\u003E            Part FinalPart = ConfigNode.CreateObjectFromConfig\u0026lt;Part\u0026gt;(partConfig) ; //making a new part FinalPart from the partConfig configNode. You sure this is a valid part configNode? I see no error checking or null checking to make sure this worked.\u003Cbr\u003E            //ConfigNode.LoadObjectFromConfig(FinalPart, partConfig);\u003Cbr\u003E            List\u0026lt;PartResource\u0026gt; newList = new List\u0026lt;PartResource\u0026gt;(); //make a new list of Resources, alright.\u003Cbr\u003E            foreach (ConfigNode node in TotalResources) //cycle through the TotalResources list, but as ConfigNodes? That seems odd but as you don\u0027t post your code where you populate TotalResources I can\u0027t comment further.\u003Cbr\u003E            {\u003Cbr\u003E                Debug.Log(\u0022 creating resources \u0022);\u003Cbr\u003E                PartResource res = new PartResource(); //make a new resource called res\u003Cbr\u003E                string resourceName = node.GetValue(\u0022name\u0022);\u003Cbr\u003E                double resourceAmount = double.Parse(node.GetValue(\u0022amount\u0022));\u003Cbr\u003E                double resourceMax = double.Parse(node.GetValue(\u0022maxAmount\u0022));\u003Cbr\u003E                res.resourceName = resourceName;\u003Cbr\u003E                res.amount = resourceAmount;\u003Cbr\u003E                res.maxAmount = resourceMax;\u003Cbr\u003E                FinalPart.Resources.Add(node); //you are adding the raw node to FinalPart? You sure this works? Resources is a list of PartResource objects, not ConfigNode obejcts.\u003Cbr\u003E\u003Cbr\u003E                //something is missing here, you made the res Resource but you just hit the end of the method where you created it without saving it, you hit this close bracket the res object gets sent to garbage collection to be destroyed.\u003Cbr\u003E            }\u003Cbr\u003E            Debug.Log(\u0022 created resources \u0022);\u003Cbr\u003E            Debug.Log(\u0022 Created Part \u0022);\u003Cbr\u003E            Debug.Log(\u0022 Part mass \u0022 \u002B FinalPart.mass);\u003Cbr\u003E            Debug.Log(\u0022 Part Name \u0022 \u002B FinalPart.partName);\u003Cbr\u003E            return FinalPart;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ESo ya, I can\u0027t actually tell what you were trying to do. Notable the \u0027res\u0027 resource object isn\u0027t actually doing anything.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFirst I\u0027d like to say thanks for the detailed look.\u003C/p\u003E\u003Cp\u003EThe config node partConfig i am creating the new part from is never null and always valid- at least in that test case (if i can get it to work in one case i will put more checks but currently i see no reason why)\u003C/p\u003E\u003Cp\u003ETotalResources is just the confignodes of all the resources i added to the part (that\u0027s after combining amounts) that part is good-as i can get the resource count to be right if i check it.\u003C/p\u003E\u003Cp\u003Ethe res object is a remnants from an earlier iteration where i accessed the FinalPart.Resources.list directly and tried to add in the resources that way-it serves no purpose in this iteration and i should comment it out but it\u0027s nice to have there in case i need it.\u003C/p\u003E\u003Cp\u003Epart.Resources.add and part.AddResources take only a config node as their argument and are basically the same function(the latter is calling the first), and what they do is basically get the node and convert it to a part resource(what i did with res) and add it to the list(i tried to do that with res as well but it returned NRE) my main suspicion is that it somehow initializes the part with a null Resources field and then because it\u0027s read only it prevents me from setting it-i have tried to poke inside with bindingflags but to no avail.\u003C/p\u003E\u003Cp\u003Ei could go around that problem by copying another part into FinalPart and change it\u0027s values to the desired ones(sadly LoadObjectFromConfig dosnt work in that case very well) but that\u0027s really ugly and i would rather use it as last resort.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-09-06T23:45:07Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EFengist:\u003Cp\u003E1. The code looks correct, although it\u0027s worth noting that in Unity, foreach is a bad idea in realtime applications. I\u0027d suggest something like:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif(FlightGlobals.ActiveVessel != null)\u003Cbr\u003Efor(int p = FlightGlobals.ActiveVessel.Parts.Count - 1; p \u0026gt;= 0; --p)\u003Cbr\u003E{\u003Cbr\u003E\tfor(int i = FlightGlobals.ActiveVessel.Parts[p].Modules.Count - 1; i \u0026gt;= 0; --i)\u003Cbr\u003E\t{\u003Cbr\u003E\t\tPartModule m = FlightGlobals.ActiveVessel.Parts[p].Modules[i];\u003Cbr\u003E\t\tif(m is ModuleResourceIntake)\u003Cbr\u003E\t\t\t(m as ModuleResourceIntake).Activate()\u003Cbr\u003E\t}\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E2. ModuleEnginesFX derives from ModuleEngines. So you can just use the above code, and instead of checking if m is ModuleResourceIntake (and casting to that) you can check if m is ModuleEngines and cast to that.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks Nathan! Worked great. I had to make some modifications due to flawed logic but it works as intended. I had to set the intakes to enabled=false as well as closing them otherwise you could manually reopen them. Just in case you\u0027re curious as to why I need to do this, I\u0027m working on a submersible with electric engines. It\u0027ll also have a near 0 thrust LF engine with an alternator on it to recharge batteries. I could have used ModuleGenerator to accomplish the same thing, but the smoke and sounds from a ModuleEngine is what I wanted but I didn\u0027t want it to be usable when submerged.\u003C/p\u003E\u003Cp\u003EAs for the engines, didn\u0027t work as intended. I tried changing various settings and nothing I found really worked with both stock and mods. What I settled on was:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E        if (FlightGlobals.ActiveVessel.altitude \u0026gt; 2.0)\u003Cbr\u003E        {\u003Cbr\u003E            //Debug.Log(\u0022[Maritime Pack]Shutting Down Engine\u0022);\u003Cbr\u003E            FlightGlobals.ActiveVessel.ctrlState.mainThrottle = 0;\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhich works. Get above 2m and the throttle drops to 0, get below 2m and it magically goes back to where you had it.\u003C/p\u003E\u003Cp\u003EThanks again.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-09-07T16:34:55Z","Content":"\n\u003Cp\u003ENext question: And I know not many people have worked with the camera in KSP so... here goes.\u003C/p\u003E\u003Cp\u003EI\u0027m working with some old code from Hooligan Labs Sub mod. After much hacking, I have a camera that works underwater. The problem: Unlike the surface camera which stops when it hits terrain, the code I have does not. It\u0027ll pass right through the underwater terrain. I\u0027m trying to stop it from doing that by finding it\u0027s distance to the terrain.\u003C/p\u003E\u003Cp\u003EI have tried this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EcameraAltitude = Terrain.activeTerrain.SampleHeight(UnderwaterCamera.ActiveFlightCamera.transform.position);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewhich leads to a nullref.\u003C/p\u003E\u003Cp\u003EI\u0027ve tried casting a ray downward from the camera like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        RaycastHit hit;\u003Cbr\u003E        if (Physics.Raycast(UnderwaterCamera.ActiveFlightCamera.transform.position, Vector3.down, out hit, 5000))\u003Cbr\u003E            {\u003Cbr\u003E                ScreenMessages.PostScreenMessage(new ScreenMessage(\u0022Camera Hit: \u0022 \u002B hit.transform.name \u002B\u0022 Distance: \u0022\u002Bhit.distance, 3f, ScreenMessageStyle.UPPER_LEFT));\u003Cbr\u003E            }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EWhich leads to some REALLY odd results. It seems that even when the terrain is 50m below the camera, the ray doesn\u0027t hit anything for several thousand meters. \u003C/p\u003E\u003Cp\u003EI can get the altitude of the camera doing this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    cameraAltitude = findAltitude(UnderwaterCamera.ActiveFlightCamera.transform);\u003Cbr\u003E\u003Cbr\u003E    private static double findAltitude(Transform aLocation)\u003Cbr\u003E    {\u003Cbr\u003E        if (FlightGlobals.ActiveVessel == null) return 0;\u003Cbr\u003E        return Vector3.Distance(aLocation.position, FlightGlobals.ActiveVessel.mainBody.position) - (FlightGlobals.ActiveVessel.mainBody.Radius);\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut, that tells me the altitude from the surface of the water, not the actual bottom of the ocean, which when submerged, is a negative number.\u003C/p\u003E\u003Cp\u003EI can get the vessel\u0027s distance to the terrain with this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EFlightGlobals.ActiveVessel.heightFromTerrain\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut, there seems to be nothing like that for a camera.\u003C/p\u003E\u003Cp\u003EAny ideas would be greatly appreciated. And pls keep in mind when explaining, I\u0027m still a noob at this whole plugin thing.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2015-09-07T22:51:34Z","Content":"\n\u003Cp\u003EI run a raycast for actual vessel height in my Landing Height mod (in my sig) if you want to see the actual code, but there are several cases where I have to fall back to using the Vessel.HeightFromTerrain that you linked.\u003C/p\u003E\u003Cp\u003EThe two biggest issues are:\u003C/p\u003E\u003Cp\u003Ea) Deep underwater, there does not seem to be a PQS layer to hit with the raycast. I don\u0027t know if it\u0027s based of how far underwater, or how far from shore, but a large percentage of the ocean floor just doesn\u0027t exist.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E The raycast return can get wonky when really close (\u0026lt;2meter) to ground. It seems to sometimes miss the top of the PQS terrain collider and return from the bottom edge of the PQS. This only causes errors in the 10 meter or so range though, nothing like you described.\u003C/p\u003E\u003Cp\u003EFor what you are doing, I think you are going to have to dive into the PQS stuff to do this correctly and that\u0027s not something I\u0027ve ever dealt with so I can\u0027t offer any advice on it.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"PhoenixMercurous","CreatedById":150846,"CreatedDateTime":"2015-09-08T05:59:18Z","Content":"\n\u003Cp\u003EHello all. I\u0027m new to C# and Unity, so this question may be rather basic.\u003C/p\u003E\u003Cp\u003EI\u0027m starting a small mod and trying to add a few new fuels for some specialty engines. I think I\u0027ve got the .cfg file format down, but I haven\u0027t figured out how to tell the game to load my .cfg file to make the resource available. I\u0027ve looked through the CRP files, tried reading the API documentation on PartResourceDefinition to try define the resource directly in C#, and tried searching this thread (that just game me posts of people doing odd things with fuel), but I can\u0027t figure it out.\u003C/p\u003E\u003Cp\u003EMy \u0022coding\u0022 experience is mostly with number crunching, so this is rather different.\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-09-08T06:32:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022PhoenixMercurous\u0022 data-cite=\u0022PhoenixMercurous\u0022\u003E\u003Cdiv\u003EHello all. I\u0027m new to C# and Unity, so this question may be rather basic.\u003Cp\u003EI\u0027m starting a small mod and trying to add a few new fuels for some specialty engines. I think I\u0027ve got the .cfg file format down, but I haven\u0027t figured out how to tell the game to load my .cfg file to make the resource available. I\u0027ve looked through the CRP files, tried reading the API documentation on PartResourceDefinition to try define the resource directly in C#, and tried searching this thread (that just game me posts of people doing odd things with fuel), but I can\u0027t figure it out.\u003C/p\u003E\u003Cp\u003EMy \u0022coding\u0022 experience is mostly with number crunching, so this is rather different.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"AlphaAsh","CreatedById":105348,"CreatedDateTime":"2015-09-08T11:52:12Z","Content":"\n\u003Cp\u003ETrying to calculate the dimensions of a Vessel.\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E                                ShipTemplate scShip = ???;                                Vector3 vSize = ShipConstruction.CalculateCraftSize(scShip);\u003C/pre\u003E\u003Cp\u003EEasy enough if it was a ShipConstruction in the editor. It\u0027s a Vessel in the Flight Scene. I\u0027ve hunted through what\u0027s available on Vessel and nothing seems to point to that Vessel\u0027s ShipTemplate.\u003C/p\u003E\u003Cp\u003EAny thoughts on how I get a Vessel\u0027s ShipTemplate, so I can just use CalculateCraftSize, which is right bloody there to do what I want, calculate the size of a freakin craft.... ahem, excuse me.\u003C/p\u003E\u003Cp\u003EEDIT - nm Occurs to me it couldn\u0027t handle docked craft anyway. I guess there\u0027s just the long way \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-08T12:09:40Z\u0022 title=\u002209/08/2015 12:09  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 8, 2015\u003C/time\u003E by AlphaAsh\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"PhoenixMercurous","CreatedById":150846,"CreatedDateTime":"2015-09-08T11:53:15Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blowfish\u0022 data-cite=\u0022blowfish\u0022\u003E\u003Cdiv\u003EAny and all .cfg files inside GameData are loaded into the game database (where all resource definitions, parts, etc are found and parsed from). Except if they\u0027re in a PluginData folder, in which case they\u0027re ignored.\u003C/div\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-08T12:50:26Z\u0022 title=\u002209/08/2015 12:50  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 8, 2015\u003C/time\u003E by PhoenixMercurous\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MrHappyFace","CreatedById":76365,"CreatedDateTime":"2015-09-08T16:05:14Z","Content":"\n\u003Cp\u003E\u003Cspan style=\u0022color:#333333;\u0022\u003EI posted this question in its own thread, but I\u0027m posting it here too, because this thread seems much more active.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022MrHappyFace\u0022 data-cite=\u0022MrHappyFace\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:Verdana;\u0022\u003EI have a plugin that spawns some gameobjects into the game. Unfortunately, they shift around whenever the floating origin shifts. Does anyone know how to shift them back when that happens.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:Verdana;\u0022\u003EI\u0027ve tried using the GameEvents.onFloatingOriginShift event, but it does not appear to do anything.\u003C/span\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-family:Verdana;\u0022\u003EI also tried checking the FloatingOrigin.Offset property every frame to see if it\u0027s changed, and it works, but there is still 1 frame where it\u0027s shifted before I can shift it back, which usually ends up with an object appearing inside my ship for a single frame and tearing it apart. \u003C/span\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-08T16:07:35Z\u0022 title=\u002209/08/2015 04:07  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 8, 2015\u003C/time\u003E by MrHappyFace\u003C/strong\u003E\n\u003Cbr\u003Eformatting\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-09-09T04:20:20Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EI run a raycast for actual vessel height in my Landing Height mod (in my sig) if you want to see the actual code, but there are several cases where I have to fall back to using the Vessel.HeightFromTerrain that you linked.\u003Cp\u003EThe two biggest issues are:\u003C/p\u003E\u003Cp\u003Ea) Deep underwater, there does not seem to be a PQS layer to hit with the raycast. I don\u0027t know if it\u0027s based of how far underwater, or how far from shore, but a large percentage of the ocean floor just doesn\u0027t exist.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E The raycast return can get wonky when really close (\u0026lt;2meter) to ground. It seems to sometimes miss the top of the PQS terrain collider and return from the bottom edge of the PQS. This only causes errors in the 10 meter or so range though, nothing like you described.\u003C/p\u003E\u003Cp\u003EFor what you are doing, I think you are going to have to dive into the PQS stuff to do this correctly and that\u0027s not something I\u0027ve ever dealt with so I can\u0027t offer any advice on it.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESo far, my issue is getting the raycast to fire faster than the mouse can move. I\u0027ve tried spherecast but it appears to ram into the camera itself. Thanks for the ideas tho, i\u0027ll look more into the pqs.\u003C/p\u003E\n"},{"CreatedByName":"yerdnadm","CreatedById":150141,"CreatedDateTime":"2015-09-09T07:06:02Z","Content":"\n\u003Cp\u003EDoes anyone know how I can figure out what ship part is currently highlighted, i.e. under the cursor?\u003C/p\u003E\u003Cp\u003EI can see in the debugger that there are two non-public bools that change state when the cursor hovers over a part, but they don\u0027t seem accessible, nor are their names readable (strange characters)\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-09-09T07:59:55Z","Content":"\n\u003Cp\u003EIf you have a module on the part in question, \u003Ca href=\u0022https://github.com/Crzyrndm/ProceduralWings/blob/master/Source/WingManipulator.cs#L979\u0022 rel=\u0022external nofollow\u0022\u003EOnMouseOver\u003C/a\u003E is called continuously while the part is highlighted\u003C/p\u003E\n"},{"CreatedByName":"Sharkman Briton","CreatedById":148040,"CreatedDateTime":"2015-09-09T16:30:30Z","Content":"\n\u003Cp\u003EWhere can I easily make models and textures/would anyone be able to help make models with me?\u003C/p\u003E\n"},{"CreatedByName":"EladDv","CreatedById":118368,"CreatedDateTime":"2015-09-09T17:30:27Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sharkman Briton\u0022 data-cite=\u0022Sharkman Briton\u0022\u003E\u003Cdiv\u003EWhere can I easily make models and textures/would anyone be able to help make models with me?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Ewhile this belongs on the modeling and texturing section i would suggest blender\u003C/p\u003E\n"},{"CreatedByName":"Sharkman Briton","CreatedById":148040,"CreatedDateTime":"2015-09-09T18:10:25Z","Content":"\n\u003Cp\u003EThanks.\u003C/p\u003E\n"},{"CreatedByName":"yerdnadm","CreatedById":150141,"CreatedDateTime":"2015-09-10T05:49:38Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Crzyrndm\u0022 data-cite=\u0022Crzyrndm\u0022\u003E\u003Cdiv\u003EIf you have a module on the part in question, \u003Ca href=\u0022https://github.com/Crzyrndm/ProceduralWings/blob/master/Source/WingManipulator.cs#L979\u0022 rel=\u0022external nofollow\u0022\u003EOnMouseOver\u003C/a\u003E is called continuously while the part is highlighted\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFrom the code, it seems like that gets called in the editor, what about during flight?\u003C/p\u003E\u003Cp\u003EIs this the only way that I can find if a part is highlighted or not?\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-09-10T08:51:33Z","Content":"\n\u003Cp\u003EIt gets called in flight (used for dumping info to the log in the above case). Editor only functions are hidden behind a \u003Ca href=\u0022https://github.com/Crzyrndm/ProceduralWings/blob/master/Source/WingManipulator.cs#L982\u0022 rel=\u0022external nofollow\u0022\u003EHighLogic.LoadedSceneIsEditor\u003C/a\u003E check. The only way? Probably not but I don\u0027t know of any others off the top of my head.\u003C/p\u003E\n"},{"CreatedByName":"Sharkman Briton","CreatedById":148040,"CreatedDateTime":"2015-09-10T13:57:06Z","Content":"\n\u003Cp\u003EHow do I make a .cfg file for parts? And seperately, a .cfg file for resources.\u003C/p\u003E\n"},{"CreatedByName":"hab136","CreatedById":75997,"CreatedDateTime":"2015-09-11T06:58:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sharkman Briton\u0022 data-cite=\u0022Sharkman Briton\u0022\u003E\u003Cdiv\u003EHow do I make a .cfg file for parts? And seperately, a .cfg file for resources.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOpen Notepad or vi or TextEdit or whatever editor you like, and type it in \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EIf you\u0027re looking for the structure, you can copy any of the parts from GameData\\Squad\\Parts to get started.\u003C/p\u003E\u003Cp\u003EFor resources, it\u0027s just:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ERESOURCE_DEFINITION\u003Cbr\u003E{\u003Cbr\u003E\tname = CarbonDioxide\u003Cbr\u003E\tdensity = 0.000001951\u003Cbr\u003E\tflowMode = ALL_VESSEL\u003Cbr\u003E\ttransfer = PUMP\u003Cbr\u003E\tisTweakable = true\u003Cbr\u003E\tunitCost = 0.0000028637\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EPlease check the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/91998\u0022 rel=\u0022external nofollow\u0022\u003ECommunity Resource Pack\u003C/a\u003E to make sure you\u0027re not creating a conflicting resource (and for lots of examples!)\u003C/p\u003E\n"},{"CreatedByName":"Sharkman Briton","CreatedById":148040,"CreatedDateTime":"2015-09-12T20:33:51Z","Content":"\n\u003Cp\u003EThank you! I have it mostly sorted now, but I have another question! *Gasp!*\u003C/p\u003E\u003Cp\u003ETheres a fuel flow thing in engine configs, and I\u0027ve asked at #KSPModders and they don\u0027t know the setups for it, ATM the fuel flow mode for the engine is STACK_PRIORITY_SEARCH or something like that, what should I type in to change it to stage search?\u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-09-12T21:09:49Z","Content":"\n\u003Cp\u003EIt is STAGE_PRIORITY_FLOW (see the .cfg for the stock jet engines).\u003C/p\u003E\n"},{"CreatedByName":"blowfish","CreatedById":119688,"CreatedDateTime":"2015-09-12T21:17:09Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Sharkman Briton\u0022 data-cite=\u0022Sharkman Briton\u0022\u003E\u003Cdiv\u003EThank you! I have it mostly sorted now, but I have another question! *Gasp!*\u003Cp\u003ETheres a fuel flow thing in engine configs, and I\u0027ve asked at #KSPModders and they don\u0027t know the setups for it, ATM the fuel flow mode for the engine is STACK_PRIORITY_SEARCH or something like that, what should I type in to change it to stage search?\u003C/p\u003E\u003Cp\u003EThanks.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThe options are NO_FLOW (only resources on same part), ALL_VESSEL (anything on the vessel), STAGE_PRIORITY_FLOW (anything in the same stage), STACK_PRIORITY_SEARCH (anything stack connected in the same stage), and NULL (can\u0027t do anything).\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-09-13T00:29:12Z","Content":"\n\u003Cp\u003ECorrection: STAGE_PRIORITY_FLOW flows from anywhere on the vessel, same as ALL_VESSEL, it just preferentially draws from parts in earlier stages (so, e.g. if your initial stage has monoprop, and your upper stage has monoprop, and your payload has monoprop, RCS thrusters everywhere on the ship will first draw from the initial stage and suck it dry, then move on to the upper stage, and finally the payload).\u003C/p\u003E\n"},{"CreatedByName":"Sharkman Briton","CreatedById":148040,"CreatedDateTime":"2015-09-13T11:24:54Z","Content":"\n\u003Cp\u003EYa gonna have to all get used to this real soon:\u003C/p\u003E\u003Cp\u003EHow do I UV unwrap in Blender? I go into edit mode, mesh, UV something, then UV unwrap, on one of my engine models it says in the top of the screen something about scale or something and doesn\u0027t do anything, on the other it does nothing but doesn\u0027t display an error.\u003C/p\u003E\n"}]}