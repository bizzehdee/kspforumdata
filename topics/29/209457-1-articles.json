{"TopicId":209457,"ForumId":29,"TopicTitle":"Maybe I don\u0027t understand OnSave()?","CreatedByName":"orionguy","CreatedById":168402,"CreatedDateTime":"2022-08-21T20:36:01Z","PageNum":1,"Articles":[{"CreatedByName":"orionguy","CreatedById":168402,"CreatedDateTime":"2022-08-21T20:36:01Z","Content":"\n\u003Cp\u003E\nVery very new to KSP mods but not new to programming.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI set up my IDE and used the example mod from the forums and everything works great.\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m just confused about OnSave.\u00A0 I will eventually want to send a message with the persistence file to a node.js api every time the game has been saved by the user or by persistence.\u00A0 First step is knowing when the game has been saved.\u00A0 I have tried the following...\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003Eusing System;\nusing UnityEngine;\n\nnamespace TestMod\n{\n    [KSPScenario(ScenarioCreationOptions.AddToNewGames | ScenarioCreationOptions.AddToExistingGames, GameScenes.SPACECENTER | GameScenes.MAINMENU | GameScenes.FLIGHT)]\n    public class TestMod : ScenarioModule\n    {\n        public override void OnLoad(ConfigNode node)\n        {\n            base.OnLoad(node);\n        }\n        public override void OnSave(ConfigNode node)\n        {\n            Debug.Log(\u0022A save happened!\u0022);\n            base.OnSave(node);\n        }\n    }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nNothing happens.\u00A0 Maybe I don\u0027t understand when OnSave is triggered or why?\u00A0 or how?\u00A0\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for any help you can provide.\n\u003C/p\u003E\n"},{"CreatedByName":"Jason Melancon","CreatedById":199485,"CreatedDateTime":"2022-08-28T20:11:06Z","Content":"\n\u003Cp\u003E\nDoes it work if you delete \u0022override\u0022 from the method definitions? That modifier is absent in the \u0022Getting Started\u0022 thread examples (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/153765-getting-started-the-basics-of-writing-a-plug-in/\u0022 rel=\u0022\u0022\u003Ehttps://forum.kerbalspaceprogram.com/index.php?/topic/153765-getting-started-the-basics-of-writing-a-plug-in/\u003C/a\u003E).\n\u003C/p\u003E\n"},{"CreatedByName":"orionguy","CreatedById":168402,"CreatedDateTime":"2022-09-04T22:53:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00224168229\u0022 data-ipsquote-contentid=\u0022209457\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221661717466\u0022 data-ipsquote-userid=\u0022199485\u0022 data-ipsquote-username=\u0022Jason Melancon\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 8/28/2022 at 3:11 PM, Jason Melancon said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nDoes it work if you delete \u0022override\u0022 from the method definitions? That modifier is absent in the \u0022Getting Started\u0022 thread examples (\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/153765-getting-started-the-basics-of-writing-a-plug-in/\u0022 rel=\u0022\u0022\u003Ehttps://forum.kerbalspaceprogram.com/index.php?/topic/153765-getting-started-the-basics-of-writing-a-plug-in/\u003C/a\u003E).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for the help, but that change didn\u0027t do the trick.\n\u003C/p\u003E\n\u003Cp\u003E\nHowever, I saw other examples where folks used KSPAddon instead of KSPScenario and bound their own load and save functions to the\u00A0 GameEvents.\u00A0 This seems to work.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\u003Cspan class=\u0022pln\u0022\u003Eusing System;\nusing UnityEngine;\n\nnamespace TestMod\n{\n    [KSPAddon(KSPAddon.Startup.MainMenu, true)]\n    public class TestMod : MonoBehaviour\n    {\n        public void Awake()\n        {\n            Debug.Log(\u0022Testmod Awake\u0022);\n\n            GameEvents.onGameStateCreated.Add(GameLoad);\n            GameEvents.onGameStateSaved.Add(GameSave);\n        }\n        public void GameLoad(Game game)\n        {\n            Debug.Log(\u0022Load triggered\u0022);\n        }\n        public void GameSave(Game game)\n        {\n            Debug.Log(\u0022Save triggered\u0022);\n        } \n    }\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"}]}