{"TopicId":132535,"ForumId":29,"TopicTitle":"Disable the particle emitter in editor","CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2016-02-20T04:23:46Z","PageNum":1,"Articles":[{"CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2016-02-20T04:23:46Z","Content":"\n\u003Cp\u003E\nIs there a way to disable the\u00A0particle emitter in editor?\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/svutbVb.png\u0022 alt=\u0022svutbVb.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 if (HighLogic.LoadedSceneIsEditor)\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 {\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 \u00A0 \u00A0 ABTransform.gameObject.SetActive(false);\u003Cbr\u003E\u003Cbr\u003E\n\u00A0 \u00A0 \u00A0 \u00A0 }\n\u003C/p\u003E\n\u003Cp\u003E\nThe code can only disable when you drag it out, it still shows up in the components list, is there a away to hide it?\n\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2016-02-20T05:01:22Z","Content":"\n\u003Cp\u003E\nAdd the Icon_Hidden tag to the particle emitter\u0027s GameObject inside Unity before exporting it\n\u003C/p\u003E\n"},{"CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2016-02-22T03:30:48Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222420140\u0022 data-ipsquote-contentid=\u0022132535\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221455944482\u0022 data-ipsquote-userid=\u002275857\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2016/2/20 at 0:01 AM, xEvilReeperx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAdd the Icon_Hidden tag to the particle emitter\u0027s GameObject inside Unity before exporting it\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022CurRuwx.png\u0022 class=\u0022ipsImage\u0022 src=\u0022http://i.imgur.com/CurRuwx.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nI set it like this, but it doesn\u0027t work.\n\u003C/p\u003E\n\u003Cp\u003E\nMaybe I have to deactivate Emit and activate again?\n\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2016-02-22T05:04:54Z","Content":"\n\u003Cp\u003E\nLooks like it\u0027s an oversight in KSP. Particle[Emitter/Animator/Renderer] components work with Icon_Hidden but KSPParticleEmitter and probably SkinnedMeshRenderer do not. The Icon_Only tag functions normally.\n\u003C/p\u003E\n\u003Cp\u003E\nWell, easily fixed in code:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n[KSPAddon(KSPAddon.Startup.Instantly, true)]\npublic class FixIconHiddenBug : LoadingSystem\n{\n    private static bool _hasRun = false;\n    private const string IconHiddenTag = \u0022Icon_Hidden\u0022;\n\n    private void Start()\n    {\n        if (_hasRun)\n        {\n            Destroy(gameObject);\n            return;\n        }\n            \n        FindObjectOfType\u0026lt;LoadingScreen\u0026gt;().loaders.Add(this);\n    }\n\n    public override bool IsReady()\n    {\n        return _hasRun;\n    }\n\n    public override void StartLoad()\n    {\n        _hasRun = true;\n\n        var startTime = Time.realtimeSinceStartup;\n\n        foreach (\n            var iconGo in PartLoader.LoadedPartsList.Where(ap =\u0026gt; ap.iconPrefab != null).Select(ap =\u0026gt; ap.iconPrefab))\n        {\n            PartLoader.StripTaggedTransforms(iconGo.transform, IconHiddenTag);\n        }\n\n        print(\u0022Finished fixing tags in \u0022 \u002B (Time.realtimeSinceStartup - startTime).ToString(\u0022F3\u0022) \u002B \u0022 sec\u0022);\n    }\n\n    public override string ProgressTitle()\n    {\n        return \u0022Fixing icon tags\u0022;\n    }\n}\u003C/pre\u003E\n\u003Cp\u003E\nEdit: Just so nobody is surprised by it, this will delete any tagged GO \u003Cem\u003Eand its children\u003C/em\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-02-22T05:28:17Z\u0022 title=\u002202/22/2016 05:28  AM\u0022 data-short=\u00228 yr\u0022\u003EFebruary 22, 2016\u003C/time\u003E by xEvilReeperx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2016-02-24T15:35:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222423741\u0022 data-ipsquote-contentid=\u0022132535\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221456117494\u0022 data-ipsquote-userid=\u002275857\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 2/22/2016 at 0:04 AM, xEvilReeperx said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLooks like it\u0027s an oversight in KSP. Particle[Emitter/Animator/Renderer] components work with Icon_Hidden but KSPParticleEmitter and probably SkinnedMeshRenderer do not. The Icon_Only tag functions normally.\n\u003C/p\u003E\n\u003Cp\u003E\nWell, easily fixed in code:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n\n[KSPAddon(KSPAddon.Startup.Instantly, true)]\npublic class FixIconHiddenBug : LoadingSystem\n{\n    private static bool _hasRun = false;\n    private const string IconHiddenTag = \u0022Icon_Hidden\u0022;\n\n    private void Start()\n    {\n        if (_hasRun)\n        {\n            Destroy(gameObject);\n            return;\n        }\n            \n        FindObjectOfType\u0026lt;LoadingScreen\u0026gt;().loaders.Add(this);\n    }\n\n    public override bool IsReady()\n    {\n        return _hasRun;\n    }\n\n    public override void StartLoad()\n    {\n        _hasRun = true;\n\n        var startTime = Time.realtimeSinceStartup;\n\n        foreach (\n            var iconGo in PartLoader.LoadedPartsList.Where(ap =\u0026gt; ap.iconPrefab != null).Select(ap =\u0026gt; ap.iconPrefab))\n        {\n            PartLoader.StripTaggedTransforms(iconGo.transform, IconHiddenTag);\n        }\n\n        print(\u0022Finished fixing tags in \u0022 \u002B (Time.realtimeSinceStartup - startTime).ToString(\u0022F3\u0022) \u002B \u0022 sec\u0022);\n    }\n\n    public override string ProgressTitle()\n    {\n        return \u0022Fixing icon tags\u0022;\n    }\n}\u003C/pre\u003E\n\u003Cp\u003E\nEdit: Just so nobody is surprised by it, this will delete any tagged GO \u003Cem\u003Eand its children\u003C/em\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDoes the normal Unity\u00A0Particle Emitter works in KSP? I think it doesn\u0027t work in some older versions.\n\u003C/p\u003E\n\u003Cp\u003E\nThank you for your code!\n\u003C/p\u003E\n"}]}