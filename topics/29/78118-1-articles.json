{"TopicId":78118,"ForumId":29,"TopicTitle":"Let\u0026#039;s have a \u0026quot;modders warn each other about mod-breaking 0.24 changes\u0026quot; thread.","CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-07-18T04:41:36Z","PageNum":1,"Articles":[{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-07-18T04:41:36Z","Content":"\n\u003Cp\u003EI figure there must be some things that the 0.24 API changes will break here and there in various mods, and over the next several days there\u0027s going to be a lot of modders discovering them the hard way.\u003C/p\u003E\u003Cp\u003ETo help ease the pain, I thought it made sense to start this thread where modders can post anything they discovered in their own mods that they had to change for 0.24 - to help other modders get their mods updated faster without having to do the same trial-and-error discovery themselves.\u003C/p\u003E\u003Cp\u003EI don\u0027t have anything to post yet - I\u0027m going to play stock 0.24 for a while first to get the feel for how it works, so I know which changed behaviors in a mod are correct and which aren\u0027t.\u003C/p\u003E\u003Cp\u003E(To clarify: This thread isn\u0027t for making use of brand new features - like adding a button to the stock toolbar or adding customizations to the contracts. This is for \u0022this code used to do X in 0.23.5, but now in 0.24 it does Y instead, and I had to change it in this way to get it to do X again.\u0022\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-18T04:44:25Z\u0022 title=\u002207/18/2014 04:44  AM\u0022 data-short=\u00229 yr\u0022\u003EJuly 18, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Virtualgenius","CreatedById":67644,"CreatedDateTime":"2014-07-18T04:52:27Z","Content":"\n\u003Cp\u003EYou mean a thread like this \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/55401-Community-Mods-and-Plugins-Library\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/55401-Community-Mods-and-Plugins-Library\u003C/a\u003E that shows you whats updated to 0.24\u003C/p\u003E\n"},{"CreatedByName":"FlowerChild","CreatedById":74289,"CreatedDateTime":"2014-07-18T05:22:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Virtualgenius\u0022 data-cite=\u0022Virtualgenius\u0022\u003E\u003Cdiv\u003EYou mean a thread like this \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/55401-Community-Mods-and-Plugins-Library\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/55401-Community-Mods-and-Plugins-Library\u003C/a\u003E that shows you whats updated to 0.24\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENo. The thread you just linked to is largely for players. It looks like this thread is intended for modders to give each other a head\u0027s up about what\u0027s changed internally with KSP, which sounds like a good idea to me.\u003C/p\u003E\u003Cp\u003EI\u0027ll post anything I come across here as well. So far the only compile error I ran into with BTSM was due to a the onGUIRecoveryDialogSpawn GameEvent being renamed or removed (for obvious reasons), but I\u0027ve just temporarily disabled that bit of code for the time being while I work on other stuff, as it was non-critical.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-07-18T06:25:13Z","Content":"\n\u003Cp\u003EI know crew objects got changed a fair bit, but I\u0027ll let TaranisElsu (who knows about that) chime in.\u003C/p\u003E\u003Cp\u003EI do know, though I forget who discovered this, that MonoBehaviour defaults to having its bool enabled member be false. You need to set it = true in Start() or various methods (including OnGUI!) won\u0027t be called.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-18T13:44:53Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EI do know, though I forget who discovered this, that MonoBehaviour defaults to having its bool enabled member be false. You need to set it = true in Start() or various methods (including OnGUI!) won\u0027t be called.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI must be misunderstanding what you mean. I use monobehavior like this:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E [KSPAddon(KSPAddon.Startup.Flight, false)]\u003Cbr\u003E    public class TWR1 : MonoBehaviour\u003C/pre\u003E\u003Cp\u003E\u003Ca href=\u0022https://github.com/SirDiazo/TWR1/blob/master/TWR1/TWR1.cs#L23\u0022 rel=\u0022external nofollow\u0022\u003ESource code link\u003C/a\u003E\u003C/p\u003E\u003Cp\u003Eto start my Vertical Velocity mod and I did not have to change my code anywhere to set any sort of enabled bool. All my methods seem to work fine, including the GUI, so I\u0027m not sure what this enabled bool is supposed to do.\u003C/p\u003E\u003Cp\u003EHaving said that, to actually contribute:\u003C/p\u003E\u003Cp\u003EFlightControl: Seems to be no changes. RCS, pitch/yaw/roll, and throttle control all worked without any code changes.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022text-decoration:line-through;\u0022\u003EPartModules Save/Load: Seems to be no changes. Note that I always explicitly call SetValue and GetValue inside the OnSave and OnLoad commands though as I was never able to get the automatic saving of KSPField values to work correctly even back in 0.23.5\u003C/span\u003E (I retract this statement, see my new post.)\u003C/p\u003E\u003Cp\u003EActionGroups: Seems to be no changes to how action groups are saved to a part and how they are invoked.\u003C/p\u003E\u003Cp\u003EWhat I\u0027ve found so far for what it is worth.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-29T13:55:31Z\u0022 title=\u002207/29/2014 01:55  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 29, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-07-18T14:00:02Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EI do know, though I forget who discovered this, that MonoBehaviour defaults to having its bool enabled member be false. You need to set it = true in Start() or various methods (including OnGUI!) won\u0027t be called.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis seems to be wrong. I have never used MonoBehaviour.enabled, and OnGUI() is still called.\u003C/p\u003E\n"},{"CreatedByName":"Greys","CreatedById":57109,"CreatedDateTime":"2014-07-18T17:23:47Z","Content":"\n\u003Cp\u003EThere are two new overloads of Part.RequestResource(), now offering a third argument to override flowMode; thus negating the reason for flowMode to have been defined at the resource level.\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ERequestResource(int resourceID, double demand, ResourceFlowMode flowMode)RequestResource(string resourceName, double demand, ResourceFlowMode flowMode)\npublic enum ResourceFlowMode{\tNO_FLOW,\tALL_VESSEL,\tSTAGE_PRIORITY_FLOW,\tSTACK_PRIORITY_SEARCH,\tNULL}\u003C/pre\u003E\u003Cp\u003EThis change was made to allow the Verner engines to override the flow mode of LFO and the option is provided by ModuleEngineFX, but ModuleEngine uses one of the four other RequestResource()s that does not offer this third argument.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-07-18T17:31:01Z","Content":"\n\u003Cp\u003EAvailablePart.cost used to be an int and is now a float.\u003C/p\u003E\u003Cp\u003ENot sure if it is new but PartResourceDefinition.unitCost gives the cost per unit (as a float) of a resource for working out how much partially filled fuel tanks cost.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-07-29T03:56:56Z","Content":"\n\u003Cp\u003ESome kOS users just found one today. I don\u0027t think I\u0027d ever heard of this complaint before 0.24 so it might have been introduced with the Unity engine update underneath 0.24.\u003C/p\u003E\u003Cp\u003EIn 0.24, the Unity engine underneath is returning the wrong values for some keypresses when you examine their unicode char values.\u003C/p\u003E\u003Cp\u003EWhen processing a Keydown event, Event.current.character is supposed to be the unicode character corresponding to the keypress. But on specifically the Linux build, and the Linux build only, the RETURN character, which should be producing the unicode character 0x000d (ascii 13, CR, with leading zero high byte to turn it into unicode), is actually being returned as 0xff0d instead of 0x000d. (the padded high byte of the unicode character is all 1 bits instead of all 0 bits). Thus checks like this:\u003C/p\u003E\u003Cp\u003Eif (Event.current.character == 13) { do stuff }\u003C/p\u003E\u003Cp\u003Edon\u0027t work right on the Linux build. Because the character is coming back as 0xff0d instead of 0x000d, it\u0027s not the value 13(decimal), it\u0027s the value 65293(decimal).\u003C/p\u003E\u003Cp\u003EI made the workaround of detecting if the high byte of the unicode is exactly FF, and if it is, then replace it with 00 instead, figuring that none of the unicode characters from 0xff00 through 0xffff are actually characters that would ever correspond to a key on any keyboard in any language. (They\u0027re full-width line-drawing font characters for use when you want to print characters that touch each other edge-to-edge without any space between them, like for box drawing. They\u0027re not characters that exist on any keyboard, unless you\u0027ve somehow managed to run Kerbal Space Program on a Commodore 64.).\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-29T14:03:09Z","Content":"\n\u003Cp\u003EI\u0027m going to retract my statement about partModules being unchanged.\u003C/p\u003E\u003Cp\u003EIn my actions group mod I have several users reporting issues that logging shows is tracked back to the mod\u0027s partModule being missing.\u003C/p\u003E\u003Cp\u003EAs I use the partModule for data storage this is a critical issue and I\u0027ve gotten enough reports that I am moving my data storage to a scenarioModule for the next version I release.\u003C/p\u003E\u003Cp\u003EI am unable to replicate this on my machine, but it seems to be that KSP\u0027s partModule loader is fragile and once too many mods start messing around with partModules, especially adding/removing them in code rather then with ModuleManger (so they are not in the protoModule library) seems to cause partModules to be lost.\u003C/p\u003E\u003Cp\u003EThe specific example that brought me to this is that I use ModuleManger to add my AGXModule to every part on game start, this has worked fine since KSP 0.22 and been rock solid until 0.24 came along.\u003C/p\u003E\u003Cp\u003ENow, when people reporting this problem post there log files, the log files show that my AGXModule is not present on the part when my plugin goes looking for it. Therefore I believe KSP\u0027s partModule loader is screwing up, or being screwed up by another mod.\u003C/p\u003E\u003Cp\u003EEither way, I can\u0027t trust a partModule for data storage at the moment so I\u0027m moving everything to a scenario module.\u003C/p\u003E\u003Cp\u003EDoes anyone else do extensive work with partModules that is seeing something similar? Notably things resetting to default (which would be the partModule going missing, then being re-added back in by code during the loading process).\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2014-07-29T14:18:24Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EI\u0027m going to retract my statement about partModules being unchanged.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI thought the bugs in module loading/reordering was what Squad fixed in 0.24.1...\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-29T14:30:42Z","Content":"\n\u003Cp\u003EI saw that in the patch notes myself and was hopeful it would tighten things up. (There are some other, minor issues I\u0027m having with partModules that I worked around that I was hoping had been fixed.)\u003C/p\u003E\u003Cp\u003EHowever, whatever they did has resulted in my partModule where I store my data going missing. As-in, the module is just gone from the .craft and persistence file, not reset to defaults.\u003C/p\u003E\u003Cp\u003EThis is reliably reproducible by different people using my action groups mod (although I am unable to replicate it on my machine, it seems to require a certain number of mods installed that conflict with each other) so I am certain enough in what is going on that I posted about it here.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-07-29T15:13:51Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EDoes anyone else do extensive work with partModules that is seeing something similar? Notably things resetting to default (which would be the partModule going missing, then being re-added back in by code during the loading process).\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027ve had a few reports of partModules not being applied to parts with an IVA the way they are supposed to be. I\u0027m fairly certain this is due to the module manager config and load order issues. Normally this just throws an error and prevents saving of SCANsat map data from IVA screens, but a few people have seen crashes that seem to be caused by this.\u003C/p\u003E\u003Cp\u003EI think you\u0027re right that using partModules for persistence storage when the partModule isn\u0027t actually integral to the part is a bad idea. I intend to transfer all of this storage over to the SCANsat scenario module and hopefully get around this whole problem.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-29T15:28:11Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EI think you\u0027re right that using partModules for persistence storage when the partModule isn\u0027t actually integral to the part is a bad idea. I intend to transfer all of this storage over to the SCANsat scenario module and hopefully get around this whole problem.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not sure the integral partModules are immune either. There are reports in the bug forum of ships magically refilling their fuel tanks which I would suspect is caused by the resources module being wiped and recreated. (Not tested or anything, but sounds logical to me.)\u003C/p\u003E\u003Cp\u003EEither way, I\u0027m moving to the scenarioModule for data storage also, that should be more reliable.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-07-29T18:07:07Z","Content":"\n\u003Cp\u003EIt\u0027s possible that Squad did do something to fix the PartModule loading problem in 0.24, but that what they did might require a code change that wasn\u0027t properly explained to modders when it was released, so the problem is improved in the stock game\u0027s PartModules, but is ironically actually making the problem effectively worse in mods that still do things the old way.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EHowever, whatever they did has resulted in my partModule where I store my data going missing. As-in, the module is just gone from the .craft and persistence file, not reset to defaults.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ESadly, because kOS has always had messy problems with the kOS computer state (i.e. variables in the pretend computer\u0027s memory) not reloading correctly, the fact that it doesn\u0027t work right after 0.24 tells me nothing - because it was buggy before 0.24 already.\u003C/p\u003E\u003Cp\u003EDoes it only seem to affect cases where people dynamically added the PartModule at runtime to the part? Does it work okay for cases where the part.cfg file itself is hardcoded to use the PartModule? (that\u0027s the case for kOS and LaserDist - the two mods I\u0027ve had my fingers in - kOS CAN be added to a part with ModuleManager, but only if the user does it themselves - the mod no longer ships with those configurations enabled because we had too many problems with it even in the past.)\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-07-29T18:25:03Z","Content":"\n\u003Cp\u003EFor adding the partModule, I took the brute force approach and use a modulemanager script that adds my data storage module to every part in the LoaderDatabase.\u003C/p\u003E\u003Cp\u003EBecause of that, I don\u0027t add my partModule in code because I know every part will have it already.\u003C/p\u003E\u003Cp\u003EWhich is how I know the partModule is vanishing, the log files have what are effectively \u0022partModule not found\u0022 errors all over the place from the people reporting this. That includes people who the mod worked on KSP 0.23.5 so I know they have modulemanager and the part.cfg script file installed correctly.\u003C/p\u003E\u003Cp\u003EI have speculation about what is going on, notably the fact that there are messages in the log about a partModule not being found and replaced, but the bottom line is I can\u0027t trust a partModule to save data anymore so I\u0027m moving it all to a scenarioModule.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-07-29T19:34:45Z","Content":"\n\u003Cp\u003EHas anyone reported this as a bug to SQUAD? It seems pretty major, given that PartModule has API methods to be called for OnSave and OnLoad, to have a situation where you can\u0027t actually persist the data.\u003C/p\u003E\u003Cp\u003EHave you tried looking at the persistence save file on disk to see what it\u0027s actually writing out when you save and quit the game? That might give clues about what\u0027s going on, since it\u0027s normally supposed to store the PartModule\u0027s data that way when you load/unload a vessel.\u003C/p\u003E\u003Cp\u003EFor example, here\u0027s a snippet of a vessel in the savefile that has a kOS part on it - this is the part of the file storing the kOS computer part:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\t\t\tPART\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tname = kOSMachine1m\u003Cbr\u003E\t\t\t\tuid = 3130583856\u003Cbr\u003E\t\t\t\tmid = 3160650642\u003Cbr\u003E\t\t\t\tlaunchID = 0\u003Cbr\u003E\t\t\t\tparent = 1\u003Cbr\u003E\t\t\t\tposition = 0,-0.461709976196289,0\u003Cbr\u003E\t\t\t\trotation = 0,0,0,1\u003Cbr\u003E\t\t\t\tmirror = 1,1,1\u003Cbr\u003E\t\t\t\tistg = 0\u003Cbr\u003E\t\t\t\tdstg = 0\u003Cbr\u003E\t\t\t\tsqor = -1\u003Cbr\u003E\t\t\t\tsidx = -1\u003Cbr\u003E\t\t\t\tattm = 0\u003Cbr\u003E\t\t\t\tsrfN = None, -1\u003Cbr\u003E\t\t\t\tattN = bottom, 3\u003Cbr\u003E\t\t\t\tattN = top, 1\u003Cbr\u003E\t\t\t\tmass = 0.12\u003Cbr\u003E\t\t\t\ttemp = -175.5791\u003Cbr\u003E\t\t\t\texpt = 0.5\u003Cbr\u003E\t\t\t\tstate = 0\u003Cbr\u003E\t\t\t\tconnected = True\u003Cbr\u003E\t\t\t\tattached = True\u003Cbr\u003E\t\t\t\tflag = Squad/Flags/default\u003Cbr\u003E\t\t\t\trTrf = kOSMachine1m\u003Cbr\u003E\t\t\t\tmodCost = 0\u003Cbr\u003E\t\t\t\tEVENTS\u003Cbr\u003E\t\t\t\t{\u003Cbr\u003E\t\t\t\t}\u003Cbr\u003E\t\t\t\tACTIONS\u003Cbr\u003E\t\t\t\t{\u003Cbr\u003E\t\t\t\t}\u003Cbr\u003E\t\t\t\tMODULE\u003Cbr\u003E\t\t\t\t{\u003Cbr\u003E\t\t\t\t\tname = kOSProcessor\u003Cbr\u003E\t\t\t\t\tisEnabled = True\u003Cbr\u003E\t\t\t\t\tdiskSpace = 10000\u003Cbr\u003E\t\t\t\t\tMaxPartId = 100\u003Cbr\u003E\t\t\t\t\tRequiredPower = 0.1\u003Cbr\u003E\t\t\t\t\tEVENTS\u003Cbr\u003E\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\tActivate\u003Cbr\u003E\t\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\t\tactive = True\u003Cbr\u003E\t\t\t\t\t\t\tguiActive = True\u003Cbr\u003E\t\t\t\t\t\t\tguiIcon = Open Terminal\u003Cbr\u003E\t\t\t\t\t\t\tguiName = Open Terminal\u003Cbr\u003E\t\t\t\t\t\t\tcategory = Open Terminal\u003Cbr\u003E\t\t\t\t\t\t\tguiActiveUnfocused = False\u003Cbr\u003E\t\t\t\t\t\t\tunfocusedRange = 2\u003Cbr\u003E\t\t\t\t\t\t\texternalToEVAOnly = True\u003Cbr\u003E\t\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t\t\tTogglePower\u003Cbr\u003E\t\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\t\tactive = True\u003Cbr\u003E\t\t\t\t\t\t\tguiActive = True\u003Cbr\u003E\t\t\t\t\t\t\tguiIcon = Toggle Power\u003Cbr\u003E\t\t\t\t\t\t\tguiName = Toggle Power\u003Cbr\u003E\t\t\t\t\t\t\tcategory = Toggle Power\u003Cbr\u003E\t\t\t\t\t\t\tguiActiveUnfocused = False\u003Cbr\u003E\t\t\t\t\t\t\tunfocusedRange = 2\u003Cbr\u003E\t\t\t\t\t\t\texternalToEVAOnly = True\u003Cbr\u003E\t\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t\tACTIONS\u003Cbr\u003E\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\tActivate\u003Cbr\u003E\t\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\t\tactionGroup = Custom09\u003Cbr\u003E\t\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t\t\tDeactivate\u003Cbr\u003E\t\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\t\tactionGroup = None\u003Cbr\u003E\t\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t\t\tTogglePower\u003Cbr\u003E\t\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\t\tactionGroup = None\u003Cbr\u003E\t\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t\tharddisk\u003Cbr\u003E\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\tcapacity = 10000\u003Cbr\u003E\t\t\t\t\t\tvolumeName = \u003Cbr\u003E\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t\tcontext\u003Cbr\u003E\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\tvariables\u003Cbr\u003E\t\t\t\t\t\t{\u003Cbr\u003E\t\t\t\t\t\t\tgt0 = 1000\u003Cbr\u003E\t\t\t\t\t\t\ttheta0 = 0\u003Cbr\u003E\t\t\t\t\t\t\tgt1 = 50000\u003Cbr\u003E\t\t\t\t\t\t\ttheta1 = 90\u003Cbr\u003E\t\t\t\t\t\t\tmaxq = 7000\u003Cbr\u003E\t\t\t\t\t\t\tsolidthrust = 1000\u003Cbr\u003E\t\t\t\t\t\t\tliquidthrust = 430\u003Cbr\u003E\t\t\t\t\t\t\tb = Kerbin\u003Cbr\u003E\t\t\t\t\t\t\tmu = 0\u003Cbr\u003E\t\t\t\t\t\t\trb = 600000\u003Cbr\u003E\t\t\t\t\t\t\tsoi = 84159286\u003Cbr\u003E\t\t\t\t\t\t\tad0 = 1.2230948554874\u003Cbr\u003E\t\t\t\t\t\t\tsh = 5000\u003Cbr\u003E\t\t\t\t\t\t\tha = 69077\u003Cbr\u003E\t\t\t\t\t\t\tlorb = 80000\u003Cbr\u003E\t\t\t\t\t\t\teuler = 2.718281828\u003Cbr\u003E\t\t\t\t\t\t\tpi = 3.1415926535\u003Cbr\u003E\t\t\t\t\t\t\ttset = 0.0339023084802981\u003Cbr\u003E\t\t\t\t\t\t\tralt = 31.9084739685059\u003Cbr\u003E\t\t\t\t\t\t\ttign = 158.499999999858\u003Cbr\u003E\t\t\t\t\t\t\tt0vsm = 1592.02330798716\u003Cbr\u003E\t\t\t\t\t\t\tt0 = 1753.00213134636\u003Cbr\u003E\t\t\t\t\t\t\tdrag = 3.55079036339349\u003Cbr\u003E\t\t\t\t\t\t\ttheta = -89.9998993748686\u003Cbr\u003E\t\t\t\t\t\t\tar = 53151.25\u003Cbr\u003E\t\t\t\t\t\t\tdt = 51.054667705775\u003Cbr\u003E\t\t\t\t\t\t\tvsm = 1595.21901562825\u003Cbr\u003E\t\t\t\t\t\t\texp = -10.6302496743923\u003Cbr\u003E\t\t\t\t\t\t\tad = 2.95665986071201E-05\u003Cbr\u003E\t\t\t\t\t\t\tq = 37.619412217597\u003Cbr\u003E\t\t\t\t\t\t\tvl = 6300\u003Cbr\u003E\t\t\t\t\t\t\tvh = 7700\u003Cbr\u003E\t\t\t\t\t\t\tdv = 25.317020411188\u003Cbr\u003E\t\t\t\t\t\t\tda = 3.15866273197437\u003Cbr\u003E\t\t\t\t\t\t\tta = 26.155287415735\u003Cbr\u003E\t\t\t\t\t\t\tga = 8.28037904523618\u003Cbr\u003E\t\t\t\t\t\t\tdc = 0.0107218905712116\u003Cbr\u003E\t\t\t\t\t\t\tarr = 0.999326849489796\u003Cbr\u003E\t\t\t\t\t\t\tpda = 1.11805701491496E-06\u003Cbr\u003E\t\t\t\t\t\t\talt = 80000\u003Cbr\u003E\t\t\t\t\t\t\tvom = 1709.09521461651\u003Cbr\u003E\t\t\t\t\t\t\tr = 669089.06619147\u003Cbr\u003E\t\t\t\t\t\t\tra = 680070.156316288\u003Cbr\u003E\t\t\t\t\t\t\tva = 1658.47870757092\u003Cbr\u003E\t\t\t\t\t\t\ta = 462533.177782449\u003Cbr\u003E\t\t\t\t\t\t\tr2 = 680070.319430686\u003Cbr\u003E\t\t\t\t\t\t\ta2 = 680035.159715343\u003Cbr\u003E\t\t\t\t\t\t\tv2 = 2278.73482559418\u003Cbr\u003E\t\t\t\t\t\t\tdeltav = 620.256118023264\u003Cbr\u003E\t\t\t\t\t\t\tx = NODE(1875.23204280658,0,0,620.256118023264)\u003Cbr\u003E\t\t\t\t\t\t\tnd = NODE(1875.23204280658,0,0,620.256118023264)\u003Cbr\u003E\t\t\t\t\t\t\tmaxda = 26.2232454284736\u003Cbr\u003E\t\t\t\t\t\t\tdob = 23.6528898527336\u003Cbr\u003E\t\t\t\t\t\t\tt1 = 1863.40559788021\u003Cbr\u003E\t\t\t\t\t\t\toldwp = 0\u003Cbr\u003E\t\t\t\t\t\t\trt = 0.232024883524446\u003Cbr\u003E\t\t\t\t\t\t\twp = 0\u003Cbr\u003E\t\t\t\t\t\t\ttvar = 0.101480078682016\u003Cbr\u003E\t\t\t\t\t\t\tnp = R(0.024,194.344,0)\u003Cbr\u003E\t\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t\t}\u003Cbr\u003E\t\t\t\t}\u003Cbr\u003E\t\t\t\tRESOURCE\u003Cbr\u003E\t\t\t\t{\u003Cbr\u003E\t\t\t\t\tname = ElectricCharge\u003Cbr\u003E\t\t\t\t\tamount = 4.99933333330167\u003Cbr\u003E\t\t\t\t\tmaxAmount = 5\u003Cbr\u003E\t\t\t\t\tflowState = True\u003Cbr\u003E\t\t\t\t\tisTweakable = True\u003Cbr\u003E\t\t\t\t\thideFlow = False\u003Cbr\u003E\t\t\t\t\tflowMode = Both\u003Cbr\u003E\t\t\t\t}\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIn your case, is it not even saving the MODULE section at all to the file? If so then that\u0027s the bug, and that\u0027s how it needs to be complained about to SQUAD, I think.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-07-29T19:37:54Z\u0022 title=\u002207/29/2014 07:37  PM\u0022 data-short=\u00229 yr\u0022\u003EJuly 29, 2014\u003C/time\u003E by Steven Mading\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2014-08-01T21:23:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EI saw that in the patch notes myself and was hopeful it would tighten things up. (There are some other, minor issues I\u0027m having with partModules that I worked around that I was hoping had been fixed.)\u003Cp\u003EHowever, whatever they did has resulted in my partModule where I store my data going missing. As-in, the module is just gone from the .craft and persistence file, not reset to defaults.\u003C/p\u003E\u003Cp\u003EThis is reliably reproducible by different people using my action groups mod (although I am unable to replicate it on my machine, it seems to require a certain number of mods installed that conflict with each other) so I am certain enough in what is going on that I posted about it here.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis sounds like a similar conversation we\u0027ve had in the past.\u003C/p\u003E\u003Cp\u003EHow is the PartModule being added and what version of Module Manager? Versions of MM pre-2.2.0 will delete PartModules that were dynamically added regardless of what data they were storing.\u003C/p\u003E\u003Cp\u003EAdmittedly there might be a problem going on with 0.24.x\u0027s new module fixing code but you don\u0027t even have to look there for potential problems as Module Manager has been a culprit in that regard long before 0.24\u003C/p\u003E\u003Cp\u003EEdit: I strongly advise removing Module Manager from the equation when testing for this if you really think it\u0027s Squad\u0027s new code that\u0027s at fault. Use a testing environment that doesn\u0027t even include Module Manager and only add PartModules via edited part files. I really cannot understate the capacity for Module Manager to destroy persistant data (prior to version 2.2.0)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-01T21:28:46Z\u0022 title=\u002208/01/2014 09:28  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 1, 2014\u003C/time\u003E by Starwaster\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-01T21:42:05Z","Content":"\n\u003Cp\u003EOkay, here is the logic process that I followed to cause me to decide I can\u0027t trust partModules for critical data storage any more.\u003C/p\u003E\u003Cp\u003EKSP 0.23.5\u003C/p\u003E\u003Cp\u003EUsing moduleManager I add my AGX partModule to every part using a simple @PART[*] wildcard. This is rock solid and I never have any issues with the partModule itself.\u003C/p\u003E\u003Cp\u003EI require Modulemanager 2.0 or newer since several weeks before KSP 0.24 is released.\u003C/p\u003E\u003Cp\u003EKSP .24 is released and I see an upsurge in people reporting data loss and other weird behavior in my mod. I try troubleshooting and add more and more logging to figure out what is going on, until in version 1.12 I finally add enough logging to make me realize the fact that my partModule is missing.\u003C/p\u003E\u003Cp\u003EThese reports include people who have been running my mod on 0.23.5 for weeks without issue, so I know they have moduleManger version 2.0 or newer and the correct part.cfg for moduleManger to process.\u003C/p\u003E\u003Cp\u003ETo be clear, the partModule I add to every part via moduleManager with a part.cfg has been working for months \u003Cem\u003Eis not present\u003C/em\u003E when I try to refer to it in my code.\u003C/p\u003E\u003Cp\u003EI can state this with 100% certainty because of the fact that I add my partModule to every part means that I assume my partModule is present and I never run .addModule() in code in any version of my mod.\u003C/p\u003E\u003Cp\u003ETherefore at some point between the initial game load where moduleManager adds my partModule, and actually using that partModule in the flight or editor scene, my partModule is being deleted.\u003C/p\u003E\u003Cp\u003ETherefore I can not use a partModule for reliable data storage. Even if I go and add an error trap to add my partModule back in via an .addModule() I still lose all my saved data as adding the partModule back in will reset the partModule\u0027s data values to defaults.\u003C/p\u003E\u003Cp\u003E(I suspect this issue is partially masked by mods that check for the partModule and if is not present add it back in. In this case the partModule would still be present, it would just have its values reset to defaults which looks like a \u0022did not save correctly\u0022 error, rather then a \u0022partModule was deleted and recreated\u0022 error.)\u003C/p\u003E\u003Cp\u003EI don\u0027t know what Squad has done to their partModule loader module, but even on their own partModules I think they are having problems. I saw a bug report about a vessel\u0027s fuel tanks refilling to full when returning to it after a while, that I would strongly suspect is caused by the FUEL module being lost and then being re-added with the default of full tanks.\u003C/p\u003E\u003Cp\u003ESo, that\u0027s where I\u0027m coming from. I don\u0027t trust partModules for data storage any more and I\u0027m switching over to scenarioModules for that.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-01T21:57:50Z\u0022 title=\u002208/01/2014 09:57  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 1, 2014\u003C/time\u003E by Diazo\u003C/strong\u003E\n\u003C/span\u003E\n"}]}