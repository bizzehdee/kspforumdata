{"TopicId":94813,"ForumId":29,"TopicTitle":"Getting screen space of App Button?","CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-12-28T20:55:48Z","PageNum":1,"Articles":[{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-12-28T20:55:48Z","Content":"\n\u003Cp\u003EI want to get the screen space coordinates of my button in the app launcher so that I can position the open window relative to the button just like the stock GUI does.\u003C/p\u003E\u003Cp\u003EHowever I can\u0027t seem to figure out how to do this. I can grab the button\u0027s transform, but that appears to be in world 3d space, and I can\u0027t figure out how to get the proper camera to translate them, I tried this code, but it just throws NRE\u0027s all over the place.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        internal void CalculateWindowBounds()\u003Cbr\u003E        {\u003Cbr\u003E            if (appLauncherButton == null)\u003Cbr\u003E                return;\u003Cbr\u003E            Transform buttonTransform = appLauncherButton.transform;\u003Cbr\u003E            Debug.Log(\u0022TestFlight MasterStatusDisplay: buttonTransform = \u0022 \u002B buttonTransform.localPosition);\u003Cbr\u003E            Vector3 buttonCoords = HighLogic.fetch.camera.WorldToScreenPoint(buttonTransform.localPosition);\u003Cbr\u003E            Debug.Log(\u0022TestFlight MasterStatusDisplay: buttonCoords = \u0022 \u002B buttonCoords);\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2014-12-28T22:02:38Z","Content":"\n\u003Cp\u003EThis will get you there, but you do need to get the right camera. So in the editor or flight mode it works, but in the SC scene its not the right camera.\u003C/p\u003E\u003Cp\u003Egives you the bottom right corner of the button if ApplicationLauncher.isPositionedAtTop is true or the top right corner is the app launcher is at the bottom\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ECamera.current.WorldToScreenPoint(appLauncherButton.GetAnchor())\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Agathorn","CreatedById":99662,"CreatedDateTime":"2014-12-28T22:14:37Z","Content":"\n\u003Cp\u003EThanks, so it looks like I am on the right track, I just need to figure out how to get the proper camera. Like you said in Flight mode its easy, but not sure about the other scenes. Guess I have some API digging ahead of me.\u003C/p\u003E\u003Cp\u003EFor now I\u0027m just going to cop out and use a fixed position relative to the corner of the screen I think.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2014-12-28T23:04:53Z","Content":"\n\u003Cp\u003Eyeah you need three of em from memory\u003C/p\u003E\u003Cp\u003Emapview.mapcamera\u003C/p\u003E\u003Cp\u003Espacecentercamera \u003C/p\u003E\u003Cp\u003Eand you can use current camera for the flight and editor scenes\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-12-28T23:33:02Z","Content":"\n\u003Cp\u003EShouldn\u0027t there be a UI camera object somewhere in the scene? As a last resort, you could simply get that object by name, and use that.\u003C/p\u003E\n"},{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2014-12-29T00:40:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022blizzy78\u0022 data-cite=\u0022blizzy78\u0022\u003E\u003Cdiv\u003EShouldn\u0027t there be a UI camera object somewhere in the scene? As a last resort, you could simply get that object by name, and use that.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Eyeah, but I couldn\u0027t recall that one off the top of my head \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blizzy78","CreatedById":68543,"CreatedDateTime":"2014-12-30T15:06:22Z","Content":"\n\u003Cp\u003EMe neither, but the name should be pretty easy to find.\u003C/p\u003E\n"}]}