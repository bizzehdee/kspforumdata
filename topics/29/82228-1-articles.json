{"TopicId":82228,"ForumId":29,"TopicTitle":"[Solved]How to get altitude from specified transform","CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2014-08-20T18:00:40Z","PageNum":1,"Articles":[{"CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2014-08-20T18:00:40Z","Content":"\n\u003Cp\u003EI want to figure out the altitude from one transform on the model but not the vessel center.\u003C/p\u003E\u003Cp\u003EFollowing code didn\u0027t give a reasonable reading. I want to calculate the altitude beyond the sea so raycast can not help(Maybe?).\u003C/p\u003E\u003Cp\u003EAny help will be appreciated.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ETransform[] detectorTransform = part.FindModelTransforms(detector); //Get the transform position\u003Cbr\u003Evector3 relativeposition = detectorTransform.position - vessel.Transform.position; // calculate the distance between detector and vessel center\u003Cbr\u003Efloat height = vessel.altitude \u002B relativeposition.y; //give out result\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-21T19:29:15Z\u0022 title=\u002208/21/2014 07:29  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 21, 2014\u003C/time\u003E by flywlyx\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-20T19:41:32Z","Content":"\n\u003Cp\u003EThe issue is that relativeposition.y has no relation to the body a vessel is above, rather it is probably straight up in World space co-ordinates that everything orbits in.\u003C/p\u003E\u003Cp\u003EIf you are in a roughly equatorial orbit, relativeposition.y will be roughly \u0027north\u0027 as relative to the body you are orbiting.\u003C/p\u003E\u003Cp\u003EFor what you want, I think there is a method you can call to get altitude directly, something like FlightGlobals.GetAltitude(Vector3) if I remember right.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2014-08-20T20:06:09Z","Content":"\n\u003Cp\u003EI think you want a single transform, not an array.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ETransform detectorTransform = part.FindModelTransform(detector); //FindModelTransform without the s\u003Cbr\u003Efloat height = mainBody.getAltitude(detectorTransform.position);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"flywlyx","CreatedById":64436,"CreatedDateTime":"2014-08-21T00:44:59Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EThe issue is that relativeposition.y has no relation to the body a vessel is above, rather it is probably straight up in World space co-ordinates that everything orbits in.\u003Cp\u003EIf you are in a roughly equatorial orbit, relativeposition.y will be roughly \u0027north\u0027 as relative to the body you are orbiting.\u003C/p\u003E\u003Cp\u003EFor what you want, I think there is a method you can call to get altitude directly, something like FlightGlobals.GetAltitude(Vector3) if I remember right.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou are right, FlightGlobals.getAltitudeAtPos(Vector3) is more easier.\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003E\u003Cspan style=\u0022color:#C0C0C0;\u0022\u003E- - - Updated - - -\u003C/span\u003E\u003C/span\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DMagic\u0022 data-cite=\u0022DMagic\u0022\u003E\u003Cdiv\u003EI think you want a single transform, not an array.\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ETransform detectorTransform = part.FindModelTransform(detector); //FindModelTransform without the s\u003Cbr\u003Efloat height = mainBody.getAltitude(detectorTransform.position);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI always make more silly mistake like thsi:blush:thank you\u003C/p\u003E\n"}]}