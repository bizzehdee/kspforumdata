{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":50,"Articles":[{"CreatedByName":"McOffsky","CreatedById":108431,"CreatedDateTime":"2014-08-14T00:40:23Z","Content":"\n\u003Cp\u003E@Ippo\u003C/p\u003E\u003Cp\u003ENah, that would be total mess. I will go with module manager approach, and write simple module to communicate with my part.\u003C/p\u003E\u003Cp\u003E@Diazo\u003C/p\u003E\u003Cp\u003ETo be honest this dazzled me so much to force me to write here. Uid in persistent.sfs file differs from uid in game, and, like ConstructID, changes after every ship load. It makes no sense.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-14T01:03:25Z","Content":"\n\u003Cp\u003EOkay, uid is generated based on a ship somehow, it\u0027s not random.\u003C/p\u003E\u003Cp\u003EStart a fresh save, lauch a Kerbal 2, it has the \u003Cem\u003Esame\u003C/em\u003E uid as my previous test did with the kerbal 2\u0027s in my old save. The uid that the first Kerbal 2 has on launch that swapped to the second Kerbal 2 when I launched it has now appeared a 3rd time on the 3rd Kerbal 2 (first Kerbal 2 in my new save).\u003C/p\u003E\u003Cp\u003ESo really, what good is the uid?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"BahamutoD","CreatedById":72433,"CreatedDateTime":"2014-08-15T16:51:05Z","Content":"\n\u003Cp\u003EDoes anyone know if there\u0027s a way to get the Vector3 force of drag that is being applied to a part?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-15T18:02:51Z","Content":"\n\u003Cp\u003EI was not able to find anything when I looked for it while working on my Velocity mod, although I was more looking for lift then drag at the time.\u003C/p\u003E\u003Cp\u003ELater I noticed something about drag in one of the Flight classes (FlightIntegrator I think?) but I was working on something else at the time and did not investigate.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-08-15T21:16:53Z","Content":"\n\u003Cp\u003EYou can see if the part contains a FAR module and then reflect to get the drag force. If not, the drag force will be 8 * part.rb.mass * part.drag * 0.5 * vessel.srf_velocity * vessel.srf_velocity * vessel.atmdensity\u003C/p\u003E\n"},{"CreatedByName":"BahamutoD","CreatedById":72433,"CreatedDateTime":"2014-08-17T23:33:58Z","Content":"\n\u003Cp\u003EThanks guys.\u003C/p\u003E\u003Cp\u003ENathanKell, that\u0027s perfect!\u003C/p\u003E\n"},{"CreatedByName":"DaMichel","CreatedById":93697,"CreatedDateTime":"2014-08-18T10:27:08Z","Content":"\n\u003Cp\u003EI\u0027m having trouble rendering GUIText objects correctly. In brief: i believe it is rendered by the wrong camera and therefore appears in the wrong place on screen.\u003C/p\u003E\u003Cp\u003ESo i have code like this\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E    GameObject CreateGUIText(string name, string text, TextAnchor anchor, Color color, float x, float y, Transform parent)\u003Cbr\u003E    {\u003Cbr\u003E        GameObject o = new GameObject(\u0022KFI-\u0022\u002Bname);\u003Cbr\u003E        o.layer = 12; // navball layer\u003Cbr\u003E        o.transform.parent = parent;\u003Cbr\u003E        o.transform.localPosition = new Vector3(x, y, 0);\u003Cbr\u003E        GUIText t = o.AddComponent\u0026lt;GUIText\u0026gt;();\u003Cbr\u003E        t.text = text;\u003Cbr\u003E        t.alignment = TextAlignment.Left;\u003Cbr\u003E        t.anchor    = anchor;\u003Cbr\u003E        t.material.color = color;\u003Cbr\u003E    }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ein OnGui\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003Eif (text1 == null)\u003Cbr\u003E  text1 = CreateGUIText(\u0022test1\u0022, \u0022Hello\u0022, TextAnchor.LowerLeft, Color.yellow, 0f, 0.2f, guiInfo.navball.transform);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ewhere guiInfo.navball points to the navball game object. \u003C/p\u003E\u003Cp\u003Etext1.transform.position is reported as the coordinates i expect, matching those of other gui stuff like the speed indicator text. So it should be aligned with the center of the nav ball. But the text actually appears in the far right of the screen.\u003C/p\u003E\u003Cp\u003EThe \u0022layer\u0022 variable is set the value which the other gui stuff has, too. To my understanding this should take care of selecting the proper camera. But it doesn\u0027t apparently.\u003C/p\u003E\u003Cp\u003EAny help is appreciated. I have been banging my head against gui issues for way too long now ...\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-08-18T12:54:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022DaMichel\u0022 data-cite=\u0022DaMichel\u0022\u003E\u003Cdiv\u003EI\u0027m having trouble rendering GUIText objects correctly. In brief: i believe it is rendered by the wrong camera and therefore appears in the wrong place on screen.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ERight camera, wrong position. The problem is that the NavBall\u0027s position is defined in \u003Cem\u003Eworld space\u003C/em\u003E, whereas \u003Ca href=\u0022http://docs.unity3d.com/Manual/class-GuiText.html\u0022 rel=\u0022external nofollow\u0022\u003EGUIText\u003C/a\u003E\u0027s position is expected to be in normalized screen space. You need to convert it:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003ECamera cam = Camera.allCameras.FirstOrDefault(c =\u0026gt; (c.cullingMask \u0026amp; (1 \u0026lt;\u0026lt; 12)) != 0);\u003Cbr\u003E\u003Cbr\u003Eif (cam != null)\u003Cbr\u003E    t.transform.position = cam.WorldToViewportPoint(/* navball position here */);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-18T14:57:40Z","Content":"\n\u003Cp\u003EOkay, I\u0027m trying to wrap my head around how KSP\u0027s saving system works.\u003C/p\u003E\u003Cp\u003EIs there anyway I can tell from the code what kind of save has been called when it is not my mod making the save request?\u003C/p\u003E\u003Cp\u003EThe best I currently have come up with is to watch the quick-save key and if that is pressed it is an auto-save, otherwise it is a regular save. However, I know there are several mods out there for manipulating auto-saves and if a player has one of those installed I\u0027ll be making a regular save when they auto-save via the mod and that will be a critical failure for my mod.\u003C/p\u003E\u003Cp\u003EThe other fallback I have is to simply save in a cascading file list so every time a save happens I make a new file. Then when a load is called, I use the time-stamp to determine which file I load. The problem with this is that if I save 10 files, if a person goes long enough without loading there auto-save I will lose the auto-save file and can\u0027t load it.\u003C/p\u003E\u003Cp\u003EAnyone have any thoughts or know what code I need to be looking at to do this?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"DaMichel","CreatedById":93697,"CreatedDateTime":"2014-08-18T16:20:21Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022xEvilReeperx\u0022 data-cite=\u0022xEvilReeperx\u0022\u003E\u003Cdiv\u003E\u003Cp\u003ERight camera, wrong position. The problem is that the NavBall\u0027s position is defined in world space, whereas GUIText\u0027s position is expected to be in normalized screen space. You need to convert it:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThanks! This makes total sense. I\u0027ve seen the coordinates go from 0 to 2 and just dismissed it as some oddity. Now i know where that came from.\u003C/p\u003E\u003Cp\u003ESorry if i take the whole hand instead instead of the pinkie ... do you happen to know how to use ScreenSafeGUIText? I tried\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        ScreenSafeGUIText t2 = o.AddComponent\u0026lt;ScreenSafeGUIText\u0026gt;();\u003Cbr\u003E        t2.text = text;\u003Cbr\u003E        t2.textSize = 12;\u003Cbr\u003E        t2.textStyle = GUI.skin.label;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Einstead of using GUIText. Here i don\u0027t get anything drawn. Also i guess ScreenSafeGUIText is meant to be in world space then, right?\u003C/p\u003E\u003Cp\u003EEdit: Got it! With\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E        t2.textStyle = new GUIStyle();\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ei can see the text. And as suspected it lives in world coordinates.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-08-18T19:24:00Z\u0022 title=\u002208/18/2014 07:24  PM\u0022 data-short=\u00229 yr\u0022\u003EAugust 18, 2014\u003C/time\u003E by DaMichel\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MasseFlieger","CreatedById":74250,"CreatedDateTime":"2014-08-20T17:18:16Z","Content":"\n\u003Cp\u003EHey guys, quick question, and I know this has been asked in the past, Im just not that good at programming. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EI am trying to write a quick function in a PartModule class to call on my IConfigNode class to save a value into the craft file, and also to load that value from the file at the start of the flight. Perhaps I am misunderstanding something, here is my IConfigNode Code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\t\u003Cbr\u003E\u003Cbr\u003E        [Serializable]\u003Cbr\u003E\tpublic class ExtendedTrimConfigNode : IConfigNode\u003Cbr\u003E\t{\u003Cbr\u003E\u003Cbr\u003E\t\tprivate bool bDebug = true;\u003Cbr\u003E\u003Cbr\u003E\t\t[SerializeField]\u003Cbr\u003E\t\tpublic float config_fPT;\u003Cbr\u003E\t\t[SerializeField]\u003Cbr\u003E\t\tpublic float config_fYT;\u003Cbr\u003E\t\t[SerializeField]\u003Cbr\u003E\t\tpublic float config_fRT;\u003Cbr\u003E\u003Cbr\u003E\t\tpublic string CLASS_NAME = \u0022ExtendedTrimConfigNode\u0022;\u003Cbr\u003E\t\tpublic string SAVED_PITCH_TRIM = \u0022Saved_fPT\u0022;\u003Cbr\u003E\t\tpublic string SAVED_YAW_TRIM = \u0022Saved_fYT\u0022;\u003Cbr\u003E\t\tpublic string SAVED_ROLL_TRIM = \u0022Saved_fRT\u0022;\u003Cbr\u003E\t\tpublic string CURRENT_PITCH_TRIM = \u0022Current_fPt\u0022;\u003Cbr\u003E\t\tpublic string CURRENT_YAW_TRIM = \u0022Current_fYt\u0022;\u003Cbr\u003E\t\tpublic string CURRENT_ROLL_TRIM = \u0022Current_fRt\u0022;\u003Cbr\u003E\u003Cbr\u003E\t\tpublic void Load(ConfigNode node)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tfloat f;\u003Cbr\u003E\t\t\tint iFound = 0;\u003Cbr\u003E\t\t\tif (node.HasValue (SAVED_PITCH_TRIM) \u0026amp;\u0026amp; float.TryParse (node.GetValue (SAVED_PITCH_TRIM), out f))\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tconfig_fPT = f;\u003Cbr\u003E\t\t\t\tiFound = iFound \u002B 1;\u003Cbr\u003E\t\t\t\tif (bDebug) {Debug.Log (CLASS_NAME \u002B \u0022_Load(): Pitch Trim to \u0022 \u002B f.ToString ());}\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tif (node.HasValue (SAVED_YAW_TRIM) \u0026amp;\u0026amp; float.TryParse (node.GetValue (SAVED_YAW_TRIM), out f))\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tconfig_fYT = f;\u003Cbr\u003E\t\t\t\tiFound = iFound \u002B 1;\u003Cbr\u003E\t\t\t\tif (bDebug) {Debug.Log (CLASS_NAME \u002B \u0022_Load(): Yaw Trim to \u0022 \u002B f.ToString());}\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tif (node.HasValue (SAVED_ROLL_TRIM) \u0026amp;\u0026amp; float.TryParse (node.GetValue (SAVED_ROLL_TRIM), out f))\u003Cbr\u003E\t\t\t{\u003Cbr\u003E\t\t\t\tconfig_fRT = f;\u003Cbr\u003E\t\t\t\tiFound = iFound \u002B 1;\u003Cbr\u003E\t\t\t\tif (bDebug) {Debug.Log (CLASS_NAME \u002B \u0022_Load(): Roll Trim to \u0022 \u002B f.ToString());}\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t\tif (iFound == 0) {\u003Cbr\u003E\t\t\t\tconfig_fPT = 0.0f;\u003Cbr\u003E\t\t\t\tconfig_fRT = 0.0f;\u003Cbr\u003E\t\t\t\tconfig_fYT = 0.0f;\u003Cbr\u003E\t\t\t\tif (bDebug){Debug.Log (CLASS_NAME \u002B \u0022_Load(): No saved trim found\u0022);}\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\tpublic void Save(ConfigNode node)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tnode.AddValue (SAVED_PITCH_TRIM, config_fPT.ToString ());\u003Cbr\u003E\t\t\tnode.AddValue (SAVED_ROLL_TRIM, config_fRT.ToString ());\u003Cbr\u003E\t\t\tnode.AddValue (SAVED_YAW_TRIM, config_fYT.ToString ());\u003Cbr\u003E\t\t\tif (bDebug) {Debug.Log (CLASS_NAME \u002B \u0022_Save(): Trim values saved to CFG\u0022);}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\t}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EI am currently trying to create a new instance of it, and then simply calling it at a specific point in the partModule code, i.e. when the user triggers an action group:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\u003Cbr\u003E\t\tpublic ExtendedTrimModule()\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tif (myNode == null) {\u003Cbr\u003E\t\t\t\tmyNode = new ExtendedTrimConfigNode();\u003Cbr\u003E\t\t\t\tif (bDebug) { Debug.Log (CLASS_NAME \u002B\u0022(): Setting new Config Node\u0022);}\u003Cbr\u003E\t\t\t}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E                [KSPAction(\u0022Save Trim to CFG\u0022)]\u003Cbr\u003E\t\tpublic void SaveTrimAG(KSPActionParam param)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tmyNode.config_fPT = Current_fPT;\u003Cbr\u003E\t\t\tmyNode.config_fRT = Current_fRT;\u003Cbr\u003E\t\t\tmyNode.config_fYT = Current_fYT;\u003Cbr\u003E\t\t\tmyNode.Save ();\u003Cbr\u003E\t\t\tif (bDebug) {Debug.Log (CLASS_NAME \u002B \u0022_SaveTrimAG(): Trim saved to CFG\u0022);}\u003Cbr\u003E\t\t}\u003Cbr\u003E\t\t[KSPAction(\u0022Set Trim from Saved\u0022)]\u003Cbr\u003E\t\tpublic void setFromSavedTrimAG(KSPActionParam param)\u003Cbr\u003E\t\t{\u003Cbr\u003E\t\t\tmyNode.config_fPT = Current_fPT;\u003Cbr\u003E\t\t\tmyNode.config_fRT = Current_fRT;\u003Cbr\u003E\t\t\tmyNode.config_fYT = Current_fYT;\u003Cbr\u003E\t\t\tmyNode.Load ();\u003Cbr\u003E\t\t\tif (bDebug) {Debug.Log (CLASS_NAME \u002B \u0022_SetFromSavedTrimAG(): Trim SET from CFG\u0022);}\u003Cbr\u003E\t\t}\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EPlease note, I tried to paste only the relevant parts of the code for ease, let me know if this makes sense.\u003C/p\u003E\u003Cp\u003EAlso, is an in flight craft allowed to read from the original .craft file? or would all the reading and setting of a value be strictly into the persistence file?\u003C/p\u003E\u003Cp\u003EThank you for all the help.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-20T19:36:05Z","Content":"\n\u003Cp\u003EI can\u0027t tell for sure with the snippets posted, but there is something weird going on with your save call.\u003C/p\u003E\u003Cp\u003EIn the second snippet you call myNode.Save(); but the Save method in the first snippet expects a ConfigNode node. This should throw you a compile error and not run.\u003C/p\u003E\u003Cp\u003EOn your second question, there is no way in game to access the .craft file after the initial read to launch the vessel. You can write your own method to do so if you really need to, but it is a significant chunk of code. \u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"MasseFlieger","CreatedById":74250,"CreatedDateTime":"2014-08-20T20:02:52Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EI can\u0027t tell for sure with the snippets posted, but there is something weird going on with your save call.\u003Cp\u003EIn the second snippet you call myNode.Save(); but the Save method in the first snippet expects a ConfigNode node. This should throw you a compile error and not run.\u003C/p\u003E\u003Cp\u003EOn your second question, there is no way in game to access the .craft file after the initial read to launch the vessel. You can write your own method to do so if you really need to, but it is a significant chunk of code. \u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EApologies for not being clearer, thats what I cant figure out, which ConfigNode should I be passing there?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-20T20:10:48Z","Content":"\n\u003Cp\u003EOh, alright. Backing up a step here.\u003C/p\u003E\u003Cp\u003EThe IConfig node interface is how KSP saves data. \u003C/p\u003E\u003Cp\u003EWhen KSP goes \u0022it\u0027s time to save!\u0022, everything tagged with IConfignode gets handed a ConfigNode by KSP that represents the persistent.sfs file and the Save() method runs.\u003C/p\u003E\u003Cp\u003EThen at load time, KSP passes back the same ConfigNode and runs the Load() method.\u003C/p\u003E\u003Cp\u003EYou can\u0027t call the Save/Load routine yourself, you can only add code to the Save/Load methods to run when KSP calls for the save.\u003C/p\u003E\u003Cp\u003ETaking a guess at what you are trying to do, I don\u0027t think you need this at all. In your partModule class, the Save/Load methods are valid, just save/load your data in those. You don\u0027t need anything fancier to save 3 floats like you are trying to do.\u003C/p\u003E\u003Cp\u003EYou can even use KSPFields, those are save/load automatically as long as the persistent = true flag is set.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"MasseFlieger","CreatedById":74250,"CreatedDateTime":"2014-08-20T20:44:54Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EOh, alright. Backing up a step here.\u003Cp\u003EThe IConfig node interface is how KSP saves data. \u003C/p\u003E\u003Cp\u003EWhen KSP goes \u0022it\u0027s time to save!\u0022, everything tagged with IConfignode gets handed a ConfigNode by KSP that represents the persistent.sfs file and the Save() method runs.\u003C/p\u003E\u003Cp\u003EThen at load time, KSP passes back the same ConfigNode and runs the Load() method.\u003C/p\u003E\u003Cp\u003EYou can\u0027t call the Save/Load routine yourself, you can only add code to the Save/Load methods to run when KSP calls for the save.\u003C/p\u003E\u003Cp\u003ETaking a guess at what you are trying to do, I don\u0027t think you need this at all. In your partModule class, the Save/Load methods are valid, just save/load your data in those. You don\u0027t need anything fancier to save 3 floats like you are trying to do.\u003C/p\u003E\u003Cp\u003EYou can even use KSPFields, those are save/load automatically as long as the persistent = true flag is set.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EPerfect - I think I understand this now, really appreciate the explanation.\u003C/p\u003E\n"},{"CreatedByName":"metaphor","CreatedById":57640,"CreatedDateTime":"2014-08-24T17:06:52Z","Content":"\n\u003Cp\u003EI\u0027m making a \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/91363-WIP-Planet-Randomizer\u0022 rel=\u0022external nofollow\u0022\u003Eplanet randomizer mod\u003C/a\u003E and I have a bug where when creating more than one game during the same KSP session, the second one uses the starting configuration of the first one, instead of starting with the stock planets. If KSP is restarted between starting different games, this problem goes away.\u003C/p\u003E\u003Cp\u003EThis is what my starting function looks like (I\u0027m saving the planet configuration in a file along with the regular save file):\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E        public void Start()\u003Cbr\u003E        {\u003Cbr\u003E            GameObject.DontDestroyOnLoad(this);\u003Cbr\u003E            GameEvents.onGameSceneLoadRequested.Add(new EventData\u0026lt;GameScenes\u0026gt;.OnEvent(OnGameSceneLoadRequested));\u003Cbr\u003E            PlanetSettings.Load(KSPUtil.ApplicationRootPath \u002B \u0022/GameData/PlanetRandomizer/Resources/PlanetRandomizer.cfg\u0022);\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        void OnGameSceneLoadRequested(GameScenes scene)\u003Cbr\u003E        {\u003Cbr\u003E            if (scene == GameScenes.SPACECENTER)\u003Cbr\u003E            {\u003Cbr\u003E                if (File.Exists(KSPUtil.ApplicationRootPath \u002B \u0022/saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/PlanetRandomizer.cfg\u0022))\u003Cbr\u003E                {\u003Cbr\u003E                    print(\u0022Loading System\u0022);\u003Cbr\u003E                    PlanetSettings.Load(KSPUtil.ApplicationRootPath \u002B \u0022/saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/PlanetRandomizer.cfg\u0022);\u003Cbr\u003E                    RebuildSystem();\u003Cbr\u003E                }\u003Cbr\u003E                else if (!File.Exists(KSPUtil.ApplicationRootPath \u002B \u0022/saves/\u0022 \u002B HighLogic.SaveFolder \u002B \u0022/PlanetRandomizer.cfg\u0022))\u003Cbr\u003E                {\u003Cbr\u003E                    print(\u0022Showing GUI\u0022);\u003Cbr\u003E                    showGUI = true;\u003Cbr\u003E                }\u003Cbr\u003E            }\u003Cbr\u003E        }\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAnyone have any suggestions on how to fix this? I took this code mostly from another mod and I\u0027m not exactly sure what\u0027s happening here.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-24T22:56:42Z","Content":"\n\u003Cp\u003EHere is the issue I think:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EGameObject.DontDestroyOnLoad(this);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBecause you call this, your mod does not unload upon returning to the main menu to start another game, therefore the settings from the previous game are used rather then KSP default.\u003C/p\u003E\u003Cp\u003EYou\u0027ll need to find the code to destroy your mod manually and call it when switching scenes to the main menu. (I think, I\u0027ve never used DontDestroyOnLoad myself.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"metaphor","CreatedById":57640,"CreatedDateTime":"2014-08-25T04:57:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EHere is the issue I think:\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EGameObject.DontDestroyOnLoad(this);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBecause you call this, your mod does not unload upon returning to the main menu to start another game, therefore the settings from the previous game are used rather then KSP default.\u003C/p\u003E\u003Cp\u003EYou\u0027ll need to find the code to destroy your mod manually and call it when switching scenes to the main menu. (I think, I\u0027ve never used DontDestroyOnLoad myself.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EHmm, I just tried destroying the mod manually when switching to main menu. This doesn\u0027t fix the bug though. I think it\u0027s just that celestial bodies don\u0027t get reset at mainmenu, but only at game start.\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-25T13:37:50Z","Content":"\n\u003Cp\u003EYou mean the default Kerbol system?\u003C/p\u003E\u003Cp\u003EYa, that would not surprise me that it only gets defined once during game start. \u003C/p\u003E\u003Cp\u003EI\u0027d look at making a \u0022default\u0022 PlanetRandomizer.cfg file that gets loaded whenever a new game is started to deal with this issue, but not knowing your code you may have some sort of shortcut you could do.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"metaphor","CreatedById":57640,"CreatedDateTime":"2014-08-27T18:41:32Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Diazo\u0022 data-cite=\u0022Diazo\u0022\u003E\u003Cdiv\u003EYou mean the default Kerbol system?\u003Cp\u003EYa, that would not surprise me that it only gets defined once during game start. \u003C/p\u003E\u003Cp\u003EI\u0027d look at making a \u0022default\u0022 PlanetRandomizer.cfg file that gets loaded whenever a new game is started to deal with this issue, but not knowing your code you may have some sort of shortcut you could do.\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThis is exactly what I did. Worked very nicely and also took care of some other bugs. Thanks!\u003C/p\u003E\u003Cp\u003EA different question: are there any tutorials on how to upload source code to Github and keep it updated (with git)?\u003C/p\u003E\n"},{"CreatedByName":"TaranisElsu","CreatedById":57742,"CreatedDateTime":"2014-08-29T01:31:51Z","Content":"\n\u003Cp\u003EI was frustrated trying to understand the ControlTypes enum for use with the InputLockManager, so I converted the values into binary:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ENone                                                                                          0\u003Cbr\u003EPITCH                                                                                         1\u003Cbr\u003EROLL                                                                                        100\u003Cbr\u003EYAW                                                                                        1000\u003Cbr\u003ETHROTTLE                                                                                  10000\u003Cbr\u003ESAS                                                                                      100000\u003Cbr\u003EPAUSE                                                                                   1000000\u003Cbr\u003ESTAGING                                                                                10000000\u003Cbr\u003ECAMERAMODES                                                                          1 00000000\u003Cbr\u003EMISC                                                                                10 00000000\u003Cbr\u003ECAMERACONTROLS                                                                     100 00000000\u003Cbr\u003ETIMEWARP                                                                          1000 00000000\u003Cbr\u003EMAP                                                                              10000 00000000\u003Cbr\u003ELINEAR                                                                          100000 00000000\u003Cbr\u003EQUICKSAVE                                                                      1000000 00000000\u003Cbr\u003EQUICKLOAD                                                                     10000000 00000000\u003Cbr\u003EVESSEL_SWITCHING                                                            1 00000000 00000000\u003Cbr\u003ECUSTOM_ACTION_GROUPS                                                       10 00000000 00000000\u003Cbr\u003EGROUP_ABORT                                                               100 00000000 00000000\u003Cbr\u003EGROUP_GEARS                                                              1000 00000000 00000000\u003Cbr\u003EGROUP_LIGHTS                                                            10000 00000000 00000000\u003Cbr\u003EGROUP_BRAKES                                                           100000 00000000 00000000\u003Cbr\u003EGROUP_STAGE                                                           1000000 00000000 00000000\u003Cbr\u003EGROUPS_ALL                                                            1111110 00000000 00000000\u003Cbr\u003EACTIONS_SHIP                                                         10000000 00000000 00000000\u003Cbr\u003EACTIONS_EXTERNAL                                                   1 00000000 00000000 00000000\u003Cbr\u003EACTIONS_ALL                                                        1 10000000 00000000 00000000\u003Cbr\u003ERCS                                                               10 00000000 00000000 00000000\u003Cbr\u003EWHEEL_STEER                                                      100 00000000 00000000 00000000\u003Cbr\u003EWHEEL_THROTTLE                                                  1000 00000000 00000000 00000000\u003Cbr\u003EEVA_INPUT                                                      10000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_ICON_HOVER                                             100000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_ICON_PICK                                             1000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_TAB_SWITCH                                           10000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_SAVE                                               1 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_LOAD                                              10 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_EXIT                                             100 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_NEW                                             1000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_LAUNCH                                         10000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_UI_TOPRIGHT                                    11111 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_PAD_PICK_PLACE                                100000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_PAD_PICK_COPY                                1000000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_EDIT_STAGES                                 10000000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_EDIT_NAME_FIELDS                          1 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_ROTATE_PARTS                             10 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_UNDO_REDO                               100 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_SYM_SNAP                               1000 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_OVERLAYS                              10000 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_MODE_SWITCH                          100000 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_UI_TOPBAR                            100001 00011111 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_UI                                   101101 10011111 00000000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_SOFT_LOCK                            111110 01100000 11100000 00000000 00000000 00000000\u003Cbr\u003EEDITOR_LOCK                                 111110 01100000 11100000 00000000 00000100 00000000\u003Cbr\u003ETRACKINGSTATION_UI                         1000000 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003ETRACKINGSTATION_ALL                        1000000 00000000 00000000 00000000 00001100 00000000\u003Cbr\u003EKSC_FACILITIES                            10000000 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003EKSC_UI                                  1 00000000 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003EKSC_ALL                                 1 10000000 00000000 00000000 00000000 00001100 00000000\u003Cbr\u003EAPPLAUNCHER_BUTTONS                    10 00000000 00000000 00000000 00000000 00000000 00000000\u003Cbr\u003EALL_SHIP_CONTROLS       11111111 11111111 11111111 11111111 11111111 11111110 00100010 10111111\u003Cbr\u003EAll                     11111111 11111111 11111111 11111111 11111111 11111111 11111111 11111111\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENow it is easier to see which flags are set with which values.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cblockquote\u003E\u003Cp\u003EHere is the simple (and ugly) Python script that I threw together:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cbr\u003Edef insert_spaces(string):\u003Cbr\u003E return \u0027 \u0027.join(string[i:i\u002B8] for i in range(0, len(string), 8))\u003Cbr\u003E\u003Cbr\u003Ewith open(\u0027flags.txt\u0027) as file:\u003Cbr\u003E for line in file:\u003Cbr\u003E tokens = line.split()\u003Cbr\u003E flagName = tokens[0]\u003Cbr\u003E flagValue = int(tokens[1])\u003Cbr\u003E\u003Cbr\u003E flagString = \u0022{:64b}\u0022.format(flagValue)\u003Cbr\u003E flagString = insert_spaces(flagString)\u003Cbr\u003E\u003Cbr\u003E print(\u0022{0:23} {1} {0}\u0022.format(flagName, flagString))\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003ENote that I already scrubbed the ControlTypes file so that instead of: \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cbr\u003Eusing System;\u003Cbr\u003E\u003Cbr\u003E[Flags]\u003Cbr\u003Epublic enum ControlTypes\u003Cbr\u003E{\u003Cbr\u003E None = 0,\u003Cbr\u003E PITCH = 1,\u003Cbr\u003E ROLL = 4,\u003Cbr\u003E YAW = 8,\u003Cbr\u003E...etc...\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eit looked like:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003Cbr\u003ENone 0\u003Cbr\u003EPITCH 1\u003Cbr\u003EROLL 4\u003Cbr\u003EYAW 8\u003Cbr\u003E...etc...\u003Cbr\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-29T17:17:01Z","Content":"\n\u003Cp\u003ENice work. But what exactly does the InputLockManager do?\u003C/p\u003E\u003Cp\u003EI have simply ignored it and no issues with my mod, but what does it lock? Set that and it will ignore the relevant keyboard input?\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-08-29T19:04:02Z","Content":"\n\u003Cp\u003EYep.\u003C/p\u003E\u003Cp\u003ESo you can lock out flight controls during timewarp, for example.\u003C/p\u003E\n"},{"CreatedByName":"TMarkos","CreatedById":89993,"CreatedDateTime":"2014-08-30T22:54:36Z","Content":"\n\u003Cp\u003EI\u0027m trying to render a vector using LineRenderer and I\u0027m running into a snag. I\u0027ve got this set up:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EoDirObj = new GameObject(\u0022Indicator\u0022);\u003Cbr\u003EoDirObj.layer = 10; // Map layer!\u003Cbr\u003EoDirection = oDirObj.AddComponent\u0026lt;LineRenderer\u0026gt;();\u003Cbr\u003EVector3d mapFarPos = ScaledSpace.LocalToScaledSpace(far.orbit.pos.xzy); //far is a Vessel\u003Cbr\u003EoDirection.useWorldSpace = false;\u003Cbr\u003EoDirection.transform.parent = farTarget.transform; // farTarget is far\u0027s parent body\u0027s MapObject\u003Cbr\u003EoDirection.transform.localPosition = mapFarPos;\u003Cbr\u003EoDirection.material = new Material(Shader.Find(\u0022Particles/Additive\u0022));\u003Cbr\u003EoDirection.SetColors(Color.green, Color.green);\u003Cbr\u003EoDirection.SetWidth(2.0f, 2.0f);\u003Cbr\u003EoDirection.SetVertexCount(2);\u003Cbr\u003EoDirection.SetPosition(0, mapFarPos);\u003Cbr\u003EoDirection.SetPosition(1, mapFarPos \u002B exitTraj);  // exitTraj is the vector I want to represent.\u003Cbr\u003EoDirection.enabled = true;\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EIt draws the line, and it\u0027s close to what it should be, but it\u0027s always offset just a little bit and it\u0027s skewed in directions it shouldn\u0027t be going. That green line in the pictures should be tangent to the red orbit, and it should originate with the outer orbiting satellite on the red orbit. Am I using the wrong references to grab orbital position or something? What could be causing the exit vector to go up like that when every element in this is on the same plane? I\u0027m using the same exitTraj variable to calculate both the red orbit and the green line, and I know the red orbit is accurate. Any help on this would be much appreciated, I\u0027ve been bashing my head against this particular brick wall for a long time.\u003C/p\u003E\u003Cblockquote lang=\u0022en\u0022\u003E\u003Ca href=\u0022//imgur.com/a/4q15h\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\n"},{"CreatedByName":"Dunbaratu","CreatedById":63481,"CreatedDateTime":"2014-08-31T15:18:48Z","Content":"\n\u003Cp\u003EIt looks to me, on a quick cursory glance, that you\u0027re trying to set the position of the line the same way twice, thus making it have the translation offset twice over rather than once over.\u003C/p\u003E\u003Cp\u003ESee these two lines:\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022TMarkos\u0022 data-cite=\u0022TMarkos\u0022\u003E\u003Cdiv\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EoDirection.transform.localPosition = mapFarPos;\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EoDirection.SetPosition(0, mapFarPos);\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThere\u0027s two approaches to take:\u003C/p\u003E\u003Cp\u003E1 - Give the line object a transformation matrix that describes a local frame of reference in which the origin point is zero\u0027ed at what what the world coordinates would call mapFarPos.\u003C/p\u003E\u003Cp\u003E2 - Use the coordinates raw without a local transform, and tell the line to draw from mapFarPos.\u003C/p\u003E\u003Cp\u003EIt looks like you\u0027re trying to do both, which essentially offsets the origin point twice over.\u003C/p\u003E\n"}]}