{"TopicId":175487,"ForumId":29,"TopicTitle":"Rapid unplanned disassembly issue","CreatedByName":"Darinth","CreatedById":186781,"CreatedDateTime":"2018-05-30T23:20:18Z","PageNum":1,"Articles":[{"CreatedByName":"Darinth","CreatedById":186781,"CreatedDateTime":"2018-05-30T23:20:19Z","Content":"\n\u003Cp\u003E\nI\u0027m currently trying to build a part that can deploy an energy shield. After a few iterations, I\u0027ve gotten as far as creating an energy shield with a fair bit of success, the biggest issue at the moment is that if the shield doesn\u0027t start turned on, the craft will perform rapid disassembly upon being turned on. If it starts turned on I can turn it on/off as I wish, but it seems like when it gets turned on it is subjected to odd physics effects and rips the vessel apart.\n\u003C/p\u003E\n\u003Cp\u003E\nCurrently, I have a model (.mu)\u00A0that consists of a transparent model and a collider that is a hollow sphere. The .cfg file reference the model for the mini \u003Cabbr title=\u0022In-Situ Resource Utilization\u0022\u003EISRU\u003C/abbr\u003E (which is what I\u0027m using for the part model) and the sphere shield .mu. I\u0027ve also got 2 sets of drag cubes, one for when the shield is active and one for when it\u0027s inactive.\u00A0To turn the shield on/off I simply mark the game object that has the shield model \u0026amp; collider active/inactive and adjust the drag cube weighting (the ship tears itself apart regardless of if I adjust the drag cube weighting). I\u0027ll eventually have to work on marking objects shielded/unshielded I think, but I\u0027m not 100% sure on that.\n\u003C/p\u003E\n\u003Cp\u003E\nThus far, I\u0027ve tried initializing the shield in OnAwake, OnInitialize, and having now been doing it in FixedUpdate with a boolean flag to indicate when the shield state needs updated. Regardless of where I do it, the ship will explode when the shield is turned on if it started in the off state.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve also tried adjusting the shield gameobject to several different positions after examining the locations of other gameobjects on the part using KOI and thinking that if I matched them it might balance out the physics forces. I\u0027ve also tried calling part.update() as I seem to recall that there may be something I need to do to tell the KSP engine that a part has changed. Any ideas on what might be causing a part that gets a collider added to it to tear itself apart or something else I might be doing that would cause it?\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2018-05-31T17:39:35Z","Content":"\n\u003Cp\u003E\nThere is a special call that needs to happen in order to inform KSP to ignore same-vessel-collisions for specific colliders.\n\u003C/p\u003E\n\u003Cp\u003E\nI think it is something like --\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 part.ScheduleSetCollisionIgnores();\n\u003C/p\u003E\n\u003Cp\u003E\nor\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 part.SetCollisionIgnores();\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nErrr... perhaps it is actually this that I was thinking of (used in KSPWheel):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003ECollisionManager.IgnoreCollidersOnVessel(vessel, newCollider);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nEither way; yes, you are correct; you need to inform the KSP engine that new colliders are present and that the same-vessel collision ignores need to be updated.\n\u003C/p\u003E\n"},{"CreatedByName":"Darinth","CreatedById":186781,"CreatedDateTime":"2018-05-31T22:06:18Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223390136\u0022 data-ipsquote-contentid=\u0022175487\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221527788375\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThere is a special call that needs to happen in order to inform KSP to ignore same-vessel-collisions for specific colliders.\n\u003C/p\u003E\n\u003Cp\u003E\nI think it is something like --\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 part.ScheduleSetCollisionIgnores();\n\u003C/p\u003E\n\u003Cp\u003E\nor\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 part.SetCollisionIgnores();\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nErrr... perhaps it is actually this that I was thinking of (used in KSPWheel):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003ECollisionManager\u003Cspan\u003E\uFEFF\u003C/span\u003E.IgnoreCollidersOnVessel(vessel, newCollider);\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nEither way; yes, you are correct; you need to inform the KSP engine that new colliders are present and that the same-vessel collision ignores need to be updated.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYay! You fixed it! \u003Cimg alt=\u0022^_^\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_happy.png\u0022 title=\u0022^_^\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIt was the CollisionManager, though I\u0027m not certain why. I\u0027d specifically made the sphere collide hollow. I\u0027m going to assume something was lost in translation with unity and that despite my best effort, it is in fact not\u00A0hollow as intended.\n\u003C/p\u003E\n\u003Cp\u003E\nThank you!\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222018-05-31T22:08:29Z\u0022 title=\u002205/31/2018 10:08  PM\u0022 data-short=\u00226 yr\u0022\u003EMay 31, 2018\u003C/time\u003E by Darinth\u003C/strong\u003E\n\u003C/span\u003E\n"}]}