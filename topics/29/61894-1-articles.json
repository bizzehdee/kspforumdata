{"TopicId":61894,"ForumId":29,"TopicTitle":"A GUI DropDownList","CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2014-02-02T03:35:48Z","PageNum":1,"Articles":[{"CreatedByName":"TriggerAu","CreatedById":57838,"CreatedDateTime":"2014-02-02T03:35:48Z","Content":"\n\u003Cp\u003EI\u0027ve been progressing my plugin rewrite and wanted to use a dropdownlist control, only to find that there isnt a native Unity one. Because I\u0027m either persistent or stupid - the jury is still out - I fiddled around until I got the below working. Apologies for the audio and my dodgy voice over \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\n\u003C/p\u003E\u003Cdiv class=\u0022ipsEmbeddedVideo\u0022 contenteditable=\u0022false\u0022\u003E\u003Cdiv\u003E\u003Ciframe width=\u0022480\u0022 height=\u0022270\u0022 src=\u0022https://www.youtube.com/embed/NfnMaBGOGlw?feature=oembed\u0022 frameborder=\u00220\u0022 allowfullscreen=\u0022true\u0022\u003E\u003C/iframe\u003E\u003C/div\u003E\u003C/div\u003E\u003Cp\u003EBasically it is a reasonably simple dropdown control, you feed it a list of strings, but you do have to call a few functions in the right part of the draw routine so that things are ordered/layered correctly for it to function. You can look through the source code and see the plugin class, but here is the usage details from the above video\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E        void DrawWindow(Int32 id)\u003Cbr\u003E        {\u003Cbr\u003E            //this draws the transparent catching button that stops items behind the listbox getting events - and does the actual selection of listitems\u003Cbr\u003E            //Its the first item in the draw function so its at the lowest layer, and therefore consumes button click events\u003Cbr\u003E            ddlTest.DrawBlockingSelector();\u003Cbr\u003E\u003Cbr\u003E            //Layout Code here\u003Cbr\u003E            GUILayout.BeginVertical();\u003Cbr\u003E            GUILayout.Label(\u0022The dropdown should work and obscure the second button\u0022);\u003Cbr\u003E\u003Cbr\u003E            //This draws the button and displays/hides the listbox - returns true if someone clicked the button\u003Cbr\u003E            ddlTest.DrawButton();\u003Cbr\u003E\u003Cbr\u003E            //Heres our button to avoid clicking\u003Cbr\u003E            if (GUILayout.Button(\u0022Dont click this through list\u0022))\u003Cbr\u003E                ScreenMessages.PostScreenMessage(\u0022Clicked the Dont Button\u0022, 1, ScreenMessageStyle.UPPER_RIGHT);\u003Cbr\u003E\u003Cbr\u003E            GUILayout.EndVertical();\u003Cbr\u003E\u003Cbr\u003E            //These two go at the end so the dropdown is drawn over the other controls, and closes the dropdown if someone clicks elsewhere in the window\u003Cbr\u003E            ddlTest.DrawDropDown();\u003Cbr\u003E            ddlTest.CloseOnOutsideClick();\u003Cbr\u003E\u003Cbr\u003E            GUI.DragWindow();\u003Cbr\u003E        }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cstrong\u003EThe only thing to be aware of is that because it is drawing the dropdown inside the window if the list is bigger than the window the draw calls will be clipped.\u003C/strong\u003E\u003C/p\u003E\u003Cp\u003EI plan to use this in a few plugins and add some styling, selection icons, etc, but feel free to use any of this as you see fit (is in the same source code location as the Plugin Framework and licensed by MIT License).\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://ksppluginframework.codeplex.com/SourceControl/latest#Examples-InProgress/DropDownListDemo.cs\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cspan style=\u0022font-size:12px;\u0022\u003E\u003Cstrong\u003ESource Code\u003C/strong\u003E\u003C/span\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EI\u0027ll probably write an extra blog post about how I threw it together a bit later.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2014-02-02T07:37:00Z","Content":"\n\u003Cp\u003EMost excellent!\u003C/p\u003E\n"},{"CreatedByName":"timmers_uk","CreatedById":97413,"CreatedDateTime":"2014-02-02T23:58:01Z","Content":"\n\u003Cp\u003EOoh handy.\u003C/p\u003E\n"},{"CreatedByName":"Trueborn","CreatedById":65830,"CreatedDateTime":"2014-02-04T17:23:34Z","Content":"\n\u003Cp\u003EI might just have a place for that... cool.\u003C/p\u003E\n"}]}