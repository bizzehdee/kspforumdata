{"TopicId":7542,"ForumId":29,"TopicTitle":"The official unoffical \u0026quot;help a fellow plugin developer\u0026quot; thread","CreatedByName":"Cephei","CreatedById":2555,"CreatedDateTime":"2012-03-04T10:02:40Z","PageNum":64,"Articles":[{"CreatedByName":"Robotengineer","CreatedById":104525,"CreatedDateTime":"2015-02-10T20:57:41Z","Content":"\n\u003Cp\u003EIs there a way to easily convert CelestialBody info into a ConfigNode? Without having to write out Yourcfg.AddValue() statements for each param you want?\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-10T21:08:01Z","Content":"\n\u003Cp\u003EUgh, that does make things a little more complex. You can still do it without reflection or dependencies though (which to me is preferable).\u003C/p\u003E\u003Cp\u003EYou could build a reference on reaching the Main Menu which has all applicable mod parts and their intake area. The issue with this would be parts which can change (I imagine tweakscale could be a bit of an issue here unless you can query the rescale factor)\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eforeach (ConfigNode node in GameDatabase.Instance.GetConfigNodes(\u0022PART\u0022))\u003Cbr\u003E{\u003Cbr\u003E    float area;\u003Cbr\u003E    ConfigNode intakeNode = node.GetNode(\u0022AtmosphericIntake\u0022);\u003Cbr\u003E    if (intakeNode != null)\u003Cbr\u003E    {\u003Cbr\u003E        float.TryParse(intakeNode.GetValue(\u0022area\u0022), out area);\u003Cbr\u003E        modIntakeDict.Add(node.GetValue(\u0022name\u0022), area); // Dictionary\u0026lt;string,float\u0026gt; (part name, intake area)\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"enneract","CreatedById":56759,"CreatedDateTime":"2015-02-11T21:09:07Z","Content":"\n\u003Cp\u003EIs there any way to insert a ScenarioModule into the game save\\load queue other than using the KSPScenario annotation?\u003C/p\u003E\u003Cp\u003EI need my ScenarioModule loaded faster than that.\u003C/p\u003E\n"},{"CreatedByName":"ctordtor","CreatedById":137906,"CreatedDateTime":"2015-02-12T23:22:07Z","Content":"\n\u003Cp\u003EI am calling Die() on a Kerbal, and it shows the KIA message below, however if I click on EVA the Kerbal(s) all come back to life, tried searching didn\u0027t really find anything.\u003C/p\u003E\u003Cp\u003ESample code:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E   public class TestModule : PartModule\u003Cbr\u003E    {\u003Cbr\u003E        private bool foundCrew;\u003Cbr\u003E\u003Cbr\u003E        public override void OnStart(StartState state)\u003Cbr\u003E        {\u003Cbr\u003E            print(\u0022Hello Kerbin!\u0022);\u003Cbr\u003E            base.OnStart(state);\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        public override void OnUpdate()\u003Cbr\u003E        {\u003Cbr\u003E            if (foundCrew) return;\u003Cbr\u003E\u003Cbr\u003E            var crew = vessel.GetVesselCrew();\u003Cbr\u003E            foreach (var c in crew)\u003Cbr\u003E            {\u003Cbr\u003E                foundCrew = true;\u003Cbr\u003E                StartCoroutine(KillKerbal(c));\u003Cbr\u003E            }\u003Cbr\u003E\u003Cbr\u003E            base.OnUpdate();\u003Cbr\u003E        }\u003Cbr\u003E\u003Cbr\u003E        private IEnumerator KillKerbal(ProtoCrewMember c)\u003Cbr\u003E        {\u003Cbr\u003E            yield return new WaitForSeconds(5);\u003Cbr\u003E            c.Die();\u003Cbr\u003E\u003Cbr\u003E        }\u003Cbr\u003E    }\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-12T23:29:06Z","Content":"\n\u003Cp\u003EAfter killing the kerbal try adding: vessel.GetCrew().Remove\u00A9;\u003C/p\u003E\n"},{"CreatedByName":"ctordtor","CreatedById":137906,"CreatedDateTime":"2015-02-12T23:40:14Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Crzyrndm\u0022 data-cite=\u0022Crzyrndm\u0022\u003E\u003Cdiv\u003EAfter killing the kerbal try adding: vessel.GetCrew().Remove\u00A9;\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EGave that a shot, doesn\u0027t seem to make an effect. The EVA/IVA buttons are still available on their portraits and all of them are able to be revived.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-13T00:08:14Z\u0022 title=\u002202/13/2015 12:08  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 13, 2015\u003C/time\u003E by ctordtor\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ctordtor","CreatedById":137906,"CreatedDateTime":"2015-02-13T00:17:05Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022ctordtor\u0022 data-cite=\u0022ctordtor\u0022\u003E\u003Cdiv\u003EGave that a shot, doesn\u0027t seem to make an effect. The EVA/IVA buttons are still available on their portraits and all of them are able to be revived.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EIn the logs I\u0027m seeing:\u003C/p\u003E\u003Cp\u003E[Log]: [00:00:00]: Jebediah Kerman was killed.\u003C/p\u003E\u003Cp\u003E[Log]: [00:00:00]: Bill Kerman was killed.\u003C/p\u003E\u003Cp\u003E[Log]: [00:00:00]: Bob Kerman was killed.\u003C/p\u003E\u003Cp\u003EFor grins, I added:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003Eif(vessel.GetVesselCrew().Remove(c)) print(\u0022Removed\u0022);\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EBut Removed doesn\u0027t show up in the log.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-13T00:37:26Z","Content":"\n\u003Cp\u003ETry \u003Ca href=\u0022https://github.com/taraniselsu/TacLifeSupport/blob/master/Source/LifeSupportController.cs#L588\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E method from TACLS (when in doubt, find a reference \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)\u003C/p\u003E\n"},{"CreatedByName":"ctordtor","CreatedById":137906,"CreatedDateTime":"2015-02-13T00:47:44Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Crzyrndm\u0022 data-cite=\u0022Crzyrndm\u0022\u003E\u003Cdiv\u003ETry \u003Ca href=\u0022https://github.com/taraniselsu/TacLifeSupport/blob/master/Source/LifeSupportController.cs#L588\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E method from TACLS (when in doubt, find a reference \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell that certainly did the trick! Thanks for the reference. Unfortunately, now the KIA portrait is gone. I was really hoping to keep that just to needle the player :-D\u003C/p\u003E\n"},{"CreatedByName":"Koobze","CreatedById":137698,"CreatedDateTime":"2015-02-14T04:39:03Z","Content":"\n\u003Cp\u003EEdit: Nevermind! Found that \u0022flightID\u0022 does this exactly.\u003C/p\u003E\u003Cp\u003EI am trying to link two objects, and save the reference between them in a persistent KSPField. Just saving the pointer doesn\u0027t work since the address will change each time etc, is there some consistent way to get a specific object after saving and loading? I think that the \u0022routine mission manager\u0022 mod has you manually name a docking port, which is then uses as a reference to find it again after load, but I wanted something more automatic. Is there an internal part-instance-id that stays consistent across saves? Or am I best to generate a random GUID for my part and reference that way?\u003C/p\u003E\u003Cp\u003E Thanks!\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-14T04:47:26Z\u0022 title=\u002202/14/2015 04:47  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 14, 2015\u003C/time\u003E by Koobze\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-14T08:15:36Z","Content":"\n\u003Cp\u003EI found several id numbers which are saved for every part:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cul\u003E\u003Cli\u003Ecid\u003Cbr\u003E- get it with Part.craftID\u003Cbr\u003E- different for each part of a vessel\u003Cbr\u003E- I don\u0027t know if it stays the same all the time.\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Euid\u003Cbr\u003E- get it with Part.flightID\u003Cbr\u003E- different for each part\u003Cbr\u003E- doesn\u0027t change on load/save and docking/undocking\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003Emid\u003Cbr\u003E- get it with Part.missionID\u003Cbr\u003E- same for for all parts of a vessel\u003Cbr\u003E- is set when the vessel is created the first time (upon launch)\u003Cbr\u003E- doesn\u0027t change on load/save and docking/undocking\u003Cbr\u003E\u003C/li\u003E\u003Cli\u003ElaunchID\u003Cbr\u003E- get it with Part.launchID\u003Cbr\u003E- same for all part on the vessel\u003Cbr\u003E- I don\u0027t know if it stays the same all the time.\u003Cbr\u003E\u003C/li\u003E\u003C/ul\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EA lot about the use of this numbers are unknown.\u003C/p\u003E\n"},{"CreatedByName":"Koobze","CreatedById":137698,"CreatedDateTime":"2015-02-14T08:36:37Z","Content":"\n\u003Cp\u003EThanks, for now I am using flightID but I will keep an eye on it to see if it changes.\u003C/p\u003E\u003Cp\u003EOn an unrelated note... I\u0027ve been trying to figure out how to change a Kerbal\u0027s velocity, but I can\u0027t seem to get it right. Been trying to make a Star Trek style teleporter to beam down to the surface of the planet, but every time my Kerbal retains his orbit velocity and smashes into the planet. I\u0027ve tried using the kerbal\u0027s vessel.ChangeWorldVelocity, changing his rigidbody.velocity, changing his obt_velocity, but nothing seems to work. Anyone know how to get this done? I\u0027ve killed Jeb so many times now. And what is World Velocity anyway? I don\u0027t see anywhere to actually query it.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-14T08:44:03Z","Content":"\n\u003Cp\u003ELook at how HyperEdit does it.\u003C/p\u003E\n"},{"CreatedByName":"Koobze","CreatedById":137698,"CreatedDateTime":"2015-02-14T09:04:26Z","Content":"\n\u003Cp\u003EGood idea, completely forgot about HyperEdit despite abusing it all the time.\u003C/p\u003E\n"},{"CreatedByName":"Lucius","CreatedById":89422,"CreatedDateTime":"2015-02-19T13:57:20Z","Content":"\n\u003Cp\u003EHey quick question: so far has it proven possible to make a part cost science to first unlock (as in, first unlock the tech tree node, then to unlock the individual part for use costs science)? \u003C/p\u003E\u003Cp\u003EIf so, how was it done? Even an example workaround, like I believe at one point interstellar was capable of doing it.\u003C/p\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-19T16:47:06Z","Content":"\n\u003Cp\u003EThe mouse events let you figure out which UI elements you hover when you press a mouse button. I guess that\u0027s how it was done.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-21T03:44:06Z","Content":"\n\u003Cp\u003EInitialising a floatCurve from a part config.\u003C/p\u003E\u003Cp\u003EEverything I\u0027ve read indicates I can just tag it as a KSPField and it works the same as most any other config variable. However I\u0027m having no luck with this approach.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[KSPField]\u003Cbr\u003EFloatCurve torqueCurve = new FloatCurve();\u003Cbr\u003E\u003Cbr\u003E// inside FixedUpdate()\u003Cbr\u003EtorqueCurve.Evaluate(0.5); // returns zero\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThe config for the module has this for the floatcurve\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003EtorqueCurve\u003Cbr\u003E{\u003Cbr\u003E    key = 0 1\u003Cbr\u003E    key = 1 1\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Ebut evaluate always returns zero.\u003C/p\u003E\u003Cp\u003EI checked the MM cache and the torquecurve is inside the partmodule where I would expect it to be.\u003C/p\u003E\u003Cp\u003EFull source \u003Ca href=\u0022https://github.com/Crzyrndm/RW-Saturatable/blob/master/SaturatableRW/RWSaturatable.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-21T03:53:50Z\u0022 title=\u002202/21/2015 03:53  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 21, 2015\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-21T07:43:21Z","Content":"\n\u003Cp\u003EI\u0027m not sure about that, but I think adding the KSPField attribute doesn\u0027t imply, that the float curve is saved and loaded by KSP by default.\u003C/p\u003E\u003Cp\u003EYou\u0027ll have to modify it:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPField(isPersistant = true)]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EAlso make sure you test that on a newly launched vessel. Existing parts may not have that attribute if you launched them before you added it in your code.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-21T07:54:55Z","Content":"\n\u003Cp\u003ENada, KSPField works on it\u0027s default values if you just tag it like I have done (persistent = false, no GUI, etc.). You can see it higher up the source page I linked for saturationScale (which is 100% confirmed working as intended). Also, tagging things with persistent = true when you don\u0027t need to permanently track them is a bad idea (exactly because of cfg changes not taking effect on old parts)\u003C/p\u003E\u003Cp\u003EEDIT\u003C/p\u003E\u003Cp\u003EWith persistent = true, I took a look in the save file just to make sure. torqueCurve had no keys\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-21T08:06:44Z\u0022 title=\u002202/21/2015 08:06  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 21, 2015\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"*Aqua*","CreatedById":103926,"CreatedDateTime":"2015-02-21T08:16:33Z","Content":"\n\u003Cp\u003EI found a very old thread about KSPField: \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/10296-0-15-code-update-PartModule-KSPField-KSPEvent-ConfigNode-and-PartResource?p=168279\u0026amp;viewfull=1#post168279\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/10296-0-15-code-update-PartModule-KSPField-KSPEvent-ConfigNode-and-PartResource?p=168279\u0026amp;viewfull=1#post168279\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EIf I understand that post right, KSPField can\u0027t handle complex data structures without some help. But again, it\u0027s a very old post. It could be different now.\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-21T08:28:20Z","Content":"\n\u003Cp\u003EFloatCurve implements IConfigNode, which is what KSPField requires to function\u003C/p\u003E\u003Cp\u003EI\u0027m beginning to doubt my config placement this is so persistent. Does \u003Ca href=\u0022https://github.com/Crzyrndm/RW-Saturatable/blob/master/GameData/RW%20Saturatable/RW.cfg\u0022 rel=\u0022external nofollow\u0022\u003Ethis\u003C/a\u003E make sense to someone other than me?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-21T08:33:29Z\u0022 title=\u002202/21/2015 08:33  AM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 21, 2015\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-02-21T10:37:09Z","Content":"\n\u003Cp\u003EYou need to not initialize it in the description. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E[KSPField]\u003Cbr\u003Epublic FloatCurve torqueCurve ;\u003Cbr\u003E\u003Cbr\u003E\u003Cbr\u003Epublic override void OnAwake()\u003Cbr\u003E{\u003Cbr\u003E  if (torqueCurve == null)\u003Cbr\u003E  {\u003Cbr\u003E      torqueCurve = new FloatCurve();\u003Cbr\u003E  }\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Crzyrndm","CreatedById":92871,"CreatedDateTime":"2015-02-21T21:40:50Z","Content":"\n\u003Cp\u003E*smacks head*\u003C/p\u003E\u003Cp\u003E\u0026lt;== forgot it has to be public\u003C/p\u003E\u003Cp\u003Etyvm sarbian\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-02-21T21:43:42Z\u0022 title=\u002202/21/2015 09:43  PM\u0022 data-short=\u00229 yr\u0022\u003EFebruary 21, 2015\u003C/time\u003E by Crzyrndm\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Candre","CreatedById":15181,"CreatedDateTime":"2015-02-22T19:46:48Z","Content":"\n\u003Cp\u003EJust dropping in after a few years out-of-game.\u003C/p\u003E\u003Cp\u003EI\u0027d like to know whether there are library restrictions in place for mod development - I faintly remember some sort of DLL inspection/sanitation to prevent malicious code from a while back. I\u0027m toying with the idea of integrating a broad .NET library and I\u0027m afraid it might get the boot because it\u0027s likely full of unmanaged/unrestricted code and other goodies like that. Or I just made this all up...\u003C/p\u003E\u003Cp\u003EGoogle couldn\u0027t relieve me, sorry.\u003C/p\u003E\u003Cp\u003EThanks in advance!,\u003C/p\u003E\u003Cp\u003ECandre.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-02-23T12:26:13Z","Content":"\n\u003Cp\u003ESome of the restrictions were lifted a while back. I know that \u0022System.Diagnostics.Process\u0022 is still on the list, but I don\u0027t know if there is any other.\u003C/p\u003E\u003Cp\u003EAre you sure you really need big libs ? You may have problem with anything not targeting .NET 3.5.\u003C/p\u003E\n"}]}