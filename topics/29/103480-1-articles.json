{"TopicId":103480,"ForumId":29,"TopicTitle":"Loading a material with a script","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-05T22:55:36Z","PageNum":1,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-05T22:55:36Z","Content":"Hello, I\u0027m trying to load a material with a script file using Resources.load. My code is as follows:\n\n    Material m_skyMaterial = Resources.Load (\u0022Materials/Atmo/Sky.mat\u0022) as Material;\n\nHowever, my material is always null. What am I doing wrong?"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-06T01:10:32Z","Content":"Alright so I looked around, and apparently it can\u0027t be done directly and I need to go through a shader loader first.\n\nI put the following code together from rbray\u0027s work and nlight\u0027s work but it still doesn\u0027t work\n\n    \t\tpublic static Shader GetShader()\t\t{\t\t\tAssembly assembly = Assembly.GetExecutingAssembly();\t\t\tStreamReader shaderStreamReader = new StreamReader(assembly.GetManifestResourceStream(KSPUtil.ApplicationRootPath\u002B\u0022/Sky.shader\u0022));\t\t\tString shaderTxt = shaderStreamReader.ReadToEnd();\t\t\treturn new Material(shaderTxt).shader;\t\t}\n\nI tried every filename and path combination and nothing seems to work. Any help would be appreciated at this point.\n\n- - - Updated - - -\n\nIf anyone is interested in this, I got the shader to load with this code\n\n    \t\tpublic static Material GetMatFromShader2()\t\t{\t\t\tstring codeBase = Assembly.GetExecutingAssembly().CodeBase;\t\t\tUriBuilder uri = new UriBuilder(codeBase);\t\t\tstring path = Uri.UnescapeDataString(uri.Path);\t\t\tStreamReader shaderStream = new StreamReader(new FileStream(Path.GetDirectoryName(path) \u002B \u0022\\\\\u0022 \u002B \u0022Sky.shader\u0022, FileMode.Open, FileAccess.Read));\t\t\tstring shaderContent = shaderStream.ReadToEnd();\t\t\treturn new Material (shaderContent);\t\t}"}]}