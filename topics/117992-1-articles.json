{"TopicId":117992,"ForumId":34,"TopicTitle":"[1.7-1.9] SMURFF: Simple Module adjUstments for Real-ish Fuel-mass Fractions 1.9.1 (02019 Nov 12)","CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-08-08T22:30:00Z","PageNum":1,"Articles":[{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-08-08T22:30:00Z","Content":"# \nSMURFF: Simple Module adjUstments for Real-ish Fuel-mass Fractions\n\n*For people who want real-ish fuel mass fractions without too much hassle. Formerly \u0022Simple Mass adjUstments for Real-ish Fuel-mass Fractions.\u0022*\n\n![SMURFF%20logo.png](https://raw.githubusercontent.com/Kerbas-ad-astra/SMURFF/master/SMURFF%20logo.png)\n\n## \nFeatures\n\nSMURFF is a Module Manager patch that reduces the dry masses of fuel tanks and engines and improves engine performance so that KSP rockets can have fuel mass fractions closer to what we make in the real world, without going into per-part configurations like e.g. Realism Overhaul.\n\nMost of a real rocket\u0027s structural strength comes from the fuel inside of it, rather than the tanks themselves -- the \u0022tank\u0022 is just a metal shell to hold the fuel together. KSP fuel tanks, on the other hand, seem to be made of lead plates and rebar. This is all well and good for a planet where you only need 3.5 km/s to get to orbit, but it\u0027s not a lot of fun for the real solar system. To help ease the transition to \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E (without requiring per-part configurations, thus allowing *any* mods to be supported), SMURFF makes several adjustments to engines, tanks, crew modules, and heat shields. These adjustments are calibrated so that stock and stockalike-balanced parts will have their performance (\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E, fuel mass fraction, and ballistic coefficient) improved to be \u0022real-ish\u0022 -- representative of typical aerospace technology of the last few decades, so that rockets built in \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E or 10X have mass fractions similar to real rockets. You can reduce the buffs applied to parts (without tinkering with the mathematics) by reducing the values of \u0022**tanklever**\u0022, \u0022**enginelever**\u0022, and \u0022**podlever**\u0022 at the top of SMURFF.cfg (or with a patch). When they\u0027re set to 1 (as they are by default), the adjustments are made at their full values, and when they\u0027re set to 0, parts are left at stock performance values. In-between is in-between, so those interested in intermediate-difficulty solar systems may want to experiment with setting the values to 0.5.\n\nThere are some built-in protections to prevent part masses from being sent into negative values, but otherwise, SMURFF will patch parts as if their mass and thrust values are balanced with stock parts. If you want to exclude parts from being patched (e.g. because they already have real-ish \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E), include \u0022**SMURFFExclude = true**\u0022 in the top-level config. To avoid griping from KSP when SMURFF is not installed, you can use a patch like this one:\n\n    @PART[whatever_parts]:NEEDS[SMURFF]\n    {\n        %SMURFFExclude = true\n    }\n\nThe specific adjustments are as follows:\n\n- Stock and stockalike liquid fuel tanks (\u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E, \u003Cabbr title=\u0022Liquid Fuel\u0022\u003ELF\u003C/abbr\u003E, Monoprop) have a fuel mass fraction of 87-89%; SMURFF increases this to 97% by reducing dry mass by 76%, putting them in line with real spacecraft fuel tanks.\n    - Tanks that have fuel-switching patches from Stock Fuel Switch will get the appropriate mass buff for their equivalent Liquid Fuel and Oxidizer contents.\n    - Other parts with switchable fuel tanks get their dry masses divided by 4.2, except for parts which are switchable in-flight, which only get a 50% dry mass reduction.\n- Xenon gas tanks are adjusted from 56% to 90% (86% reduction in dry mass). I\u0027ve seen some NASA sources saying xenon tanks are 95% fuel (or suggesting that they will soon be so), others suggesting 85%, so I went with 90%.\n- Ore tanks are adjusted from 86% to 95% ore-by-mass (70% reduction in dry mass), to baseline against 55-gallon drums.\n- Several mod resources are also handled (mostly from Nertea\u0027s various addons, since those have enough parts to produce a consistent balance).\n    - LH2 tanks get their mass fractions adjusted from 83% to 78% (a slight *increase* in dry mass). Because of the \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E buff, hydrolox \u0022lifter\u0022 fuel tanks still go from 84% to 93% fuel by mass.\n    - The zero-boil-off power requirement is increased by a factor of 15, so they now require 1.2 EC/sec per 1000 L of hydrogen stored. (That\u0027s nearly 1400 EC/sec for the largest LH2 tank. The best way I can think of to handle that is with a dedicated 2.5m nuclear reactor.) Real zero-boil-off systems also require a heavy mass investment in passive thermal isolation and dedicated cryocooling systems, so it wouldn\u0027t be possible to use a rocket tank for zero-boil-off storage just by connecting it to a nuclear reactor, but this is one place where I bent for gameplay reasons.\n    - Argon gas tanks from Near Future Propulsion are adjusted from 75% to 62% fuel (an *increase* in dry mass). In stock, they match the efficiency of xenon tanks for gameplay balance reasons, but in reality, xenon tanks are much more efficient, and argon not nearly as much (xenon atoms are heavier, so a much greater mass of xenon can be packed into a given tank design). Argon is more abundant (and thus cheaper) than xenon by orders of magnitude, so for large missions, the reduced fuel cost may be enough to make up for the mass penalty.\n    - If anyone has a reference for the mass-efficiency of lithium storage and vaporization systems for spacecraft, I\u0027d be happy to hear it. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022) Until then, I\u0027m buffing them to 87% fuel, which corresponds to a volume density between \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E/MP and LH2.\n    - NFP\u0027s xenon tanks are 75% fuel by mass (and they adjust stock xenon tanks\u0027 masses accordingly), so SMURFF\u0027s xenon patches will adapt themselves if NFP is installed.\n    - Karbonite is not handled at this time, as its tanks\u0027 mass efficiencies are already better than 95%.\n- Bipropellant (\u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E and LH2/Ox -- or anything with Oxidizer) rocket engines\u0027 thrusts are increased by 50%. Any that are not crew containers or multi-mode engines also get a 62.5% reduction in mass. Comparing the stock \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003Eengines to real RP-1/LOX rockets (as opposed to the LH2/LOX SSME, as I did previously), the \u0022orbital\u0022 (i.e. stackable) stock engines have TWRs from 15-25, while real engines have TWRs from 60-100 (and getting up to 150 nowadays), so the TWRs need to be quadrupled. The Skipper is actually a pretty good analog to the Merlin (several hundred kN of thrust, 2-3 meters tall), but rather than just cutting the weight to match TWRs, I increase the thrust so that stock rockets don\u0027t need ridiculous numbers of engines (recall that SpaceX uses nine Merlins on their first stages -- and incidentally, it turns out that SpaceY engines get their TWRs pushed into the 120-150 range, just like SpaceX\u0027s).\n    - SRBs (baselining with the Kickback compared to the Space Shuttle SRBs) get their dry masses reduced by 40% and specific impulses get buffed by 40 seconds. Their thrusts are left unchanged -- fuel density and \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E are already close to reality.\n    - Nuclear thermal rockets, jet engines, monopropellant rockets, and ion thrusters are left alone. (Oxidizer-burning modes of multi-mode engines still get the thrust buff.)\n- Crew containers (pods, cockpits, cabins, etc.) and heat shields have their masses reduced by half (and their pyrolysisLossFactor doubled). I justify this by looking at the mass-per-passenger of space capsules and jet liners, ballistic coefficents, and comparing crew cabins to fuel tanks of the same size. For example, the Mk1-2 command pod weighs as much as the Apollo Command Module despite being nearly 40% smaller (by diameter -- 26% of the volume) and carrying half-sized astronauts. The Mk1 and Mk2 crew cabins weigh as much as a full fuel tank of the same size, despite being mostly air-filled. Same for heat shields -- the Apollo heat shield was 3.9 meters across and weighed 850 kg, vs. 2800 kg for the stock 3.75m heat shield. (The reason that I didn\u0027t cut heat shield masses by 70% is so that shields can still be used for landing larger masses than just a capsule.)\n- Most of the patches stack (e.g. a service module with both monoprop and liquid fuel will have its mass reduced appropriately), but not the ones that divide tank mass by a factor (crew capsule, bipropellant engine, and general-purpose switchable tank) -- only one of those may apply to any part, and they get applied in that order.\n\nThe result is that rockets have more Earth-like mass fractions and thus are able to achieve Earth-like payload masses without requiring the construction of horrible asparagus monsters. To compare: with stock part masses, to get the Mk1-2 capsule (plus parachute and heat shield) up into space, I need to convert the Kerbal X into the \u0022Kerbal X Triple-Heavy\u0022 (or \u0022Kerbal 7\u0022), with 6 asparagus-staged size 2 boosters identical to the core (actually, identical plus the round X200-6R tank from TurboNisuReloaded) and an extended upper-stage tank (an X200-32 instead of the stock -16). It gets just shy of 7 tons into LEO (not counting the spent upper stage) with a 465-ton rocket (not counting the payload -- almost 70 times as much rocket as payload) which blows up the launchpad at takeoff. With SMURFF, I just have to make the Kerbal X into the \u0022Kerbal Xtended\u0022 by doubling the upper-stage fuel tank (the stock Kerbal X is entirely capable of getting into orbit on its own, but the extension is necessary to add the heat shield...), putting 3.52 tons into orbit (not counting the spent upper stage) with a 113.9-ton rocket (not counting the payload -- 32.36 times as much rocket as payload). The Falcon 9 v1 got 10.5 tons into orbit and weighed 335 tons (31.9 times as much rocket as payload), using slightly less efficient engines than the Skipper and Poodle, so I figure I\u0027m close enough for Kerbal work.\n\n## \nDependencies\n\nSMURFF depends on [**Module Manager**](https://forum.kerbalspaceprogram.com/threads/55219) version **2.6.16 or later** to function.\n\n## \nRecommendations\n\nSMURFF is mainly intended for use with [**Real Solar System**](https://forum.kerbalspaceprogram.com/threads/55145). It\u0027s why I made it, and that\u0027s where the default balance is set. Try setting the levers to 0.5 for intermediate solar systems, like 64K or SKY.\n\nBig rocket fractions (i.e. 1 kg into LEO = 25\u002B kg of rocket) call for big rockets, so [**SpaceY**](https://forum.kerbalspaceprogram.com/threads/100408) and [**SpaceY Expanded**](https://forum.kerbalspaceprogram.com/threads/133301) (alternatively, [**Behemoth Aerospace Engineering**](https://forum.kerbalspaceprogram.com/threads/124064) or [**Near Future Launch Vehicles**](https://kerbal.curseforge.com/projects/near-future-launch-vehicles)) are recommended to get big rockets without big part counts. 1.875m rocket parts from [**Home-Grown Rockets**](https://forum.kerbalspaceprogram.com/index.php?/topic/131556-104-5-hgr-community-fixes-home-grown-fixes-for-home-grown-rockets-v12-2016-mar-01/) (maintained by yours truly) and [**MOLE**](https://forum.kerbalspaceprogram.com/index.php?/topic/94352-alpha-11-mark-one-laboratory-extensions-mole-v0503/) are also great for large upper stages and for payloads that are just too big for 1.25m rockets, but where 2.5m is overkill. (Since thrust increases with the square of scale, and mass with the cube, all else being equal, the jump from 1.25 to 2.5 is proportionally much steeper than the jump from 2.5 to 3.75, so I\u0027ve found 1.875m parts to be surprisingly handy.)\n\nOf course, the other way around needing massive launch vehicles is to make smaller probes, so I\u0027ve also gotten quite a bit of mileage out of [**RLA (Recontinued)**](https://forum.kerbalspaceprogram.com/index.php?/topic/164877-130-rla-recontinued-1410/) and [**Modular Rocket Systems**](https://forum.kerbalspaceprogram.com/index.php?/topic/83959-1213-modular-rocket-systems-v1131-2016-10-21-stock-alike-parts-pack/). (Most of that mileage is from the \u0022Sparkler\u0022 engine in MRS.)\n\n## \nSuggestions\n\nOther addons that bring \u0022real-ish\u0022 capabilities and challenges to Kerbal Space Program include:\n\n- [**SCANSat**](https://forum.kerbalspaceprogram.com/threads/80369), to make biome and elevation maps globally available (vs. the limited-view and limited-access KerbNet system) and optionally require just a bit more effort when scanning for resources.\n    - [**DMagic Orbital Science**](https://forum.kerbalspaceprogram.com/index.php?/topic/59009-13x-dmagic-orbital-science-new-science-parts-v1310-6132017/), [**Impact!**](https://forum.kerbalspaceprogram.com/index.php?/topic/102771-13x-impact-impact-science-and-contracts-v160/), MOLE, [**Nehemiah Engineering Orbital Science**](https://forum.kerbalspaceprogram.com/index.php?/topic/106924-13-nehemia-engineering-orbital-science-mods-neos-michas-build-07b2/), and the [**Breaking Ground**](https://www.kerbalspaceprogram.com/game/breakingground/) expansion add science experiments that have actually been run in space. [**Station Science**](https://forum.kerbalspaceprogram.com/index.php?/topic/154629-130-station-science-continued-v230/) is in the same vein, although it\u0027s a little more on the \u0027fantastic\u0027 side. (If you\u0027re going to run most or all of these, you should probably use an expanded tech tree or dial back science returns in the difficulty options, to preserve game balance.)\n- [**\u003Cabbr title=\u0022Umbra Space Industries (a collection of mods)\u0022\u003EUSI\u003C/abbr\u003E Life Support**](https://forum.kerbalspaceprogram.com/threads/116790), for a life support system which is simple and forgiving (unless you configure it to kill Kerbals).\n    - [**\u003Cabbr title=\u0022Umbra Space Industries (a collection of mods)\u0022\u003EUSI\u003C/abbr\u003E Kolonization Systems**](https://forum.kerbalspaceprogram.com/threads/79588) and/or [**Pathfinder**](https://forum.kerbalspaceprogram.com/index.php?/topic/121397-113-pathfinder-100-space-camping-geoscience/), for \u003Cabbr title=\u0022In-Situ Resource Utilization\u0022\u003EISRU\u003C/abbr\u003E that allows self-sustaining colonies (with some effort).\n    - You should also consider picking up [**Global Construction**](https://forum.kerbalspaceprogram.com/index.php?/topic/154167-17-global-construction/) and/or [**Extraplanetary Launchpads**](https://forum.kerbalspaceprogram.com/threads/59545) and [**OSE Workshop**](https://forum.kerbalspaceprogram.com/threads/108234) (and [**Kerbal Inventory System**](https://forum.kerbalspaceprogram.com/threads/113111), OSE\u0027s dependency), as an extension of NASA\u0027s real-world interest in in-situ manufacturing and repair. (And to give your bases something new to do.)\n    - To (loosely) simulate long-term physical impacts of microgravity, there\u0027s [**KeepFit**](https://forum.kerbalspaceprogram.com/index.php?/topic/61510-113wip-plugin0108627072016-keepfit-kerbal-fitness-degradation/). (Be advised that it does require specific mods for \u0022exercising\u0022 spaces. Currently [Civilian Population](https://forum.kerbalspaceprogram.com/index.php?/topic/162204-13-civilian-population-209-university/), [CxAerospace](https://forum.kerbalspaceprogram.com/index.php?/topic/138910-13-cxaerospace-stations-parts-pack-v162-2017-5-24/), [DSEV](https://forum.kerbalspaceprogram.com/index.php?/topic/122162-13-deep-space-exploration-vessels-230-build-nasa-inspired-ships-in-ksp/), [Stockalike Station Parts Redux](https://forum.kerbalspaceprogram.com/index.php?/topic/170211-131-stockalike-station-parts-redux-january-28th/), [SXT](https://forum.kerbalspaceprogram.com/index.php?/topic/151129-131-sxt-continued/), [Tokamak Industries](https://forum.kerbalspaceprogram.com/index.php?/topic/163166-13-tokamak-industries-refurbished-parts-featuring-porkjets-hab-pack/), and UKS are the only mods with \u0022recognized\u0022 exercise rooms. It is much more generous when it comes to mods with \u0022neutral\u0022 habitation space.)\n    - As an alternative to KeepFit and \u003Cabbr title=\u0022Umbra Space Industries (a collection of mods)\u0022\u003EUSI\u003C/abbr\u003E-LS\u0027s habitation effects, [KerbalHealth](https://forum.kerbalspaceprogram.com/index.php?/topic/155313-131-kerbal-health-11-2018-01-20-new-mechanics-rebalance-optimization-more-supported-mods/) looks promising.\n- Nertea\u0027s [**Cryogenic Engines**](https://forum.kerbalspaceprogram.com/threads/117766), [**Kerbal Atomics**](https://forum.kerbalspaceprogram.com/index.php?/topic/130503-105-kerbal-atomics-fancy-nuclear-engines-20022016-fixes-nfe-support/), and [**Near Future Technologies**](https://forum.kerbalspaceprogram.com/index.php?/topic/47786-105-near-future-technologies-merry-christmas-updated-all-to-105/) provide cryogenic, nuclear thermal, and ion and plasma propulsion systems, as well as a simple boiloff and boiloff mitigation mechanism for liquid hydrogen. SMURFF will adjust their respective fuel tanks to match their actual or predicted performance. (Except for lithium, which I haven\u0027t found any references for -- it gets adjusted, but it\u0027s largely a guess on my part.)\n- For more realistic handling of engine throttles and attitude control (because real rocket engines can\u0027t be throttled down to 1% of their maximum thrust), check out [**Throttle Limit Extended**](https://forum.kerbalspaceprogram.com/index.php?/topic/169352-131-throttle-limit-extended/) and [**MandatoryRCS**](https://forum.kerbalspaceprogram.com/index.php?/topic/154658-131-mandatoryrcs-14-part-pack-10-reaction-wheels-nerf-sas-rotation-persistence/) (I recommend turning on the option that permits reaction wheels in crewed pods to operate, since otherwise that\u0027s just *yet another* part you\u0027ll have to add to a vessel).\n\nFeel free to suggest other \u0022real-ish\u0022 addons! To give you some idea of what I\u0027m looking for, addons suggested with SMURFF shall adhere to the following criteria:\n\n1. They shall not require individual parts to be configured in order to function (as e.g. RealFuels does) -- if an addon can\u0027t work out-of-the-box with any other addons that people use, it doesn\u0027t belong on the list.\n2. They shall improve the realism of some aspect of KSP that is not very or not at all realistic. (KSP has no life support whatsoever, so \u003Cabbr title=\u0022Umbra Space Industries (a collection of mods)\u0022\u003EUSI\u003C/abbr\u003E-LS is included, but it has mildly realistic aerodynamic and heating systems, so \u003Cabbr title=\u0022Ferram Aerospace Research (mod)\u0022\u003EFAR\u003C/abbr\u003E and Deadly Reentry are not.)\n\nOf course, criterion zero is that I won\u0027t suggest an addon that I don\u0027t like and use (or have used or considered using) myself. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\n## \nDownload and install\n\n- [**GitHub**](https://github.com/Kerbas-ad-astra/SMURFF/releases)\n- CurseForge\n\nFrom there, just unzip the \u0022SMURFF\u0022 folder into your GameData directory.\n\nPlease let me know in [**the forum thread**](https://forum.kerbalspaceprogram.com/threads/131023) or on [**the GitHub issue tracker**](https://github.com/Kerbas-ad-astra/SMURFF/issues) if you find any issues!\n\n## \nVersion history and changelog\n\n- 2015 08 08: Initial release.\n- 2015 11 19 (1.1): Renamed to Simple **Module**adjUstments for Real-ish Fuel-mass Fractions (since we\u0027re not just touching mass anymore).\n    - \u002B50% to non-\u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E engine thrusts and -62.5% to mass, to bring TWRs in line with RP-1/LOX engines and reduce need for ridiculous engine clusters.\n    - \u002B40 seconds to \u003Cabbr title=\u0022Solid fuel Rocket Booster\u0022\u003ESRB\u003C/abbr\u003E Isp, to bring Kickbacks in line with Space Shuttle SRBs.\n    - Mass reduction of resource containers is now proportional to their contents, so parts which have resources and do other things (e.g. command pods, wings with fuel) only get mass reduction corresponding to the part of them which holds resources (e.g. command pods are now slightly lighter because of their monopropellant storage, but not by a factor of 4).\n    - New patch to act on Procedural Parts.\n    - Based on RealFuels data and further research, LH2 and argon mass fractions no longer improved.\n    - Adjusted patch to properly grab all engine modules.\n    - Compatible with Stock Fuel Switch and Cryogenic Engines.\n        - **If you replaced or modified Cryogenic Engines\u0027s fuel switcher patch, make sure you restore it to the original -- otherwise, tanks might get double-buffed.**\n- 2015 11 20 (1.1.1): Minor bug fixes.\n    - Fixed Procedural Parts patch (thanks to speedwaystar).\n    - Excluded air-breathing jets, nuclear thermal rockets, monopropellant engines, and ion engines from \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E buffs. (They\u0027re close enough to reality already.)\n- 2015 11 22 (1.1.2): More compatibility (inspired by Atomic Age).\n    - Improved selectivity of engine mass buff by excluding multi-mode engines and IntakeAtm-breathing engines. (All Oxidizer-burning engine modes will still get a thrust increase.)\n- 2015 12 07 (1.1.3): More selection adjustments.\n    - Changed engine mass buffs to apply to engines which only have oxidizer-burning modes (so that SpaceY\u0027s engines get buffed -- they use a MultiModeEngine module to simulate the all-nozzle vs. center-out/center-only modes of operation, so excluding all multi-mode engines wasn\u0027t fair.)\n- 2016 01 08 (1.1.4): Argon adaptation\n    - New ArgonGas patch for the tank efficiency changes made in Near Future Propulsion 0.6.0.\n    - **I\u0027ve made some slight changes in the backend for handling Cryogenic Engines.** In my testing, I haven\u0027t noticed any changes in spacecraft mass (either in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E or in flight), but please be careful!\n- 2016 01 27 (1.2): Entry, Descent, and Landing\n    - Masses of crew containers and heat shields are reduced by half, to permit reduced (and reasonable) capsule ballistic coefficients. Now pods are more likely slow down in time to get their chutes open.\n    - Added a \u0022reserved mass\u0022 system so that engines and pods only modify mass which is not accounted for by fuel tanks and batteries.\n    - Added a \u0022SMURFFCONFIG\u0022 section -- adjust the \u0022tanklever\u0022, \u0022enginelever\u0022, and \u0022podlever\u0022 variables to control how much of a buff is applied. 1 for real-ish performance (default), 0 to leave stock values alone, and everything in between is in between. Try 0.5 for the likes of 64k or SKY.\n    - Changed patches to run FOR[zSMURFF], so that the patches run later. SpaceY\u0027s engines now get properly buffed when Cryogenic Engines is installed. (SpaceY replaces the ModuleEnginesFX modules of some engines in that circumstance, and since SpaceY comes after SMURFF, the thrust buff was being overwritten.)\n    - Added a \u0022fix\u0022 for parts whose mass gets sent into the negatives (i.e. any part which weighs less than it \u0022should\u0022 by stockalike standards): their masses get restored to their initial values.\n    - Added support for \u0022SMURFFExclude\u0022 -- add \u0022SMURFFExclude = true\u0022 to any part you don\u0027t want to get buffed.\n- 2016 02 02 (1.2.1): De-icing\n    - Adapted to new Cryogenic Tanks LH2 mass fractions and tank setups. (LH2 tanks actually get hit with the nerf-bat.)\n- 2016 02 20 (1.2.2): Sore throat\n    - Added some new patch logic to catch ablative engines.\n- 2016 03 17 (1.3): Wild Blue Yonder\n    - Parts with WBIResourceSwitcher (e.g. the Titan fuel tanks from MOLE) are now included in the switchable-tanks patches.\n    - Switchable (FS and Interstellar Fuel Switch) tanks with different tankMasses now get proper mass buffs, thanks to the new array-editing features in Module Manager.\n        - This feature is only present in \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E version 2.6.16 or later, so **this version and later versions are not compatible with KSP 1.0.4.**\n- 2016 05 17 (1.4): Inb4B9\n    - Handles B9 Part Switcher, and the corresponding updates to Cryogenic Engines.\n        - Also changed patches to run FOR[zzz\\_SMURFF], so that it comes after the cryotanks patch.\n        - Because the corresponding version of Cryogenic Engines was released for KSP 1.1.2, **this version and later versions are not compatible with KSP 1.0.5, 1.1.0, or 1.1.1.**\n    - Handles the tankResourceMassDivider variable from the generic IFS patch.\n    - Lithium tanks now get buffed.\n- 2016 05 26 (1.5): Ore Rly?\n    - Ore tanks are now adjusted, baselined against 55-gallon drums.\n    - Compatible with tank types included in Near Future Construction 0.6.2.\n    - Added new \u0022Extras\u0022 folder for patches that are too part-specific to be included in the main distribution. The first Extra patch is for the CryoX and soft tanks from Ven\u0027s Stock Revamp. I make no promises about their balance when used with CryoTanks or other fuel-switching plugins...\n- 2016 05 28 (1.5.1): Mass Deregulation\n    - Relaxed one of the \u0022overdraft protection\u0022 checks.\n- 2016 05 28 (1.5.2): Ore you sure?\n    - Added procedural ore tank type.\n- 2016 05 28 (1.5.3): B9-B\n    - Made the CryoTank patches less brittle, to handle parts with multiple B9PartSwitch modules (e.g. Fuel Tanks Plus).\n- 2016 08 15 (1.5.4): Tanks F-Ore Nothing\n    - Added an \u0022Extra\u0022 patch to fix the procedural ore tank. If you\u0027re using Procedural Parts, drop the \u0022ProcOreFixer.cfg\u0022 patch in your GameData folder (anywhere will do).\n    - The license is changed to the GPL v3 (or later).\n- 02016 10 29 (1.5.5): Snow Miser\n    - Updated CryoTanks patch to adapt to rebalance.\n    - Because the corresponding version of CryoTanks was released for KSP 1.2, **this version and later versions are not compatible with KSP 1.1.2 or 1.1.3**.\n- 02017 01 28 (1.6): Happy New Year\n    - Removed \u0022Extra\u0022 patch for the procedural ore tank, as they\u0027ve accepted my PR to add it directly to the part config.\n    - Engine patches now operate on minThrust as well as maxThrust (if someone should ever release an engine with nonzero minThrust).\n    - Reduced reaction-wheel authority on command pods in proportion to their mass reduction.\n    - Adjusted IFS patch. It works again, but note that IFS already has its own \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E patch, so SMURFF defers to that.\n    - Added support for Mark IV tank types. Because the corresponding version of Mark IV was released for KSP 1.2.2, **this version and later versions are not compatible with KSP 1.2.0 or 1.2.1**.\n- 02017 02 24 (1.6.1): B9-C\n    - Another tweak to the CryoTank patch, to avoid stepping into B9\u0027s CryoTank patches.\n- 02017 04 10 (1.6.2): Kerbals Not Smurffs\n    - Exclude Kerbals from SMURFF patching.\n    - Add pure-\u003Cabbr title=\u0022Liquid Fuel\u0022\u003ELF\u003C/abbr\u003E IFS patch.\n- 02018 02 09 (1.7.0): Zero Level\n    - Adjusted tank math to remove divide-by-zero error. Feel free to set tanklever = 0 now!\n    - Rebalance of tank adjustment factors to adapt to changes in Near Future Propulsion and CryoTanks (and some in response to user feedback). \u003Cabbr title=\u0022Liquid Fuel and Oxidizer\u0022\u003ELFO\u003C/abbr\u003E and hydrolox tanks got a bit of a buff, most everything else stays put. Because the corresponding versions of NFP and CryoTanks were released for KSP 1.3.1, **this version and later versions are not compatible with KSP 1.2.2 or 1.3.0**.\n    - The \u0022Extra\u0022 patch for Ven\u0027s Stock Revamp is more detailed, and now has different behavior for when CryoTanks is or is not installed. Their performance is baselined to the Super Lightweight (Space Shuttle External) Tank.\n- 02018 03 21 (1.8.0): Kerbal Equinox\n    - Updated xenon patches to new balance of stock tanks. Because those changes were made in KSP 1.4.0, **this version and later versions are not compatible with KSP 1.3.1**.\n- 02019 05 19 (1.9.0): The Power of the Special\n    - Vintage Kerbal suit variants now excluded from patching.\n    - Moved Ven\u0027s \u0022Extra\u0022 patch into the main SMURFF folder, now called \u0022Special\u0022.\n    - Squad\u0027s new capsules (Mk1-3, Mk2, and Mk2 Lander Can) now have a \u0022Special\u0022 patch, since they\u0027re much lighter than their predecessors.\n    - Update ZBO power requirement patch and Procedural Parts patch to adapt to CryoTanks update.\n    - New \u0022Special\u0022 patch for Universal Storage II tanks.\n    - New \u0022Special\u0022 patch to handle Tundra Exploration fuel tanks.\n- 02019 11 12 (1.9.1): Green Origin\n    - Adding support for CryoTanks\u0027 liquid methane tank variants. Because these were added for a version of CryoTanks made for KSP 1.7, **this version and later versions are not compatible with KSP 1.4 to 1.6.**\n    - Futuristic Kerbal suit variants (Breaking Ground) now excluded from patching.\n\n## \nRoadmap\n\nAs I get the time, I\u0027ll publish to CurseForge.\n\nIf you find any classes of parts (i.e. anything that can be described by using Module Manager to filter by module, resource, mass, etc.) that get horribly mistreated, I\u0027ll make an adjustment. I might even make a special patch for a particular mod\u0027s parts, if it\u0027s not too much trouble on my part.\n\n## \nRoadmap\n\nAs I get the time, I\u0027ll publish to CurseForge.\n\nIf you find any classes of parts (i.e. anything that can be described by using Module Manager to filter by module, resource, mass, etc.) that get horribly mistreated, I\u0027ll make an adjustment. That being said, I\u0027m not planning to include special patches for parts that are already themselves outliers in the main distribution (although I *might* add some to the \u0022Extras\u0022 folder) -- the whole point of SMURFF is to avoid that level of complication.\n\n## \nCredits\n\nThanks are owed to NathanKell and the entire Realism Overhaul team for making an incredibly detailed, thoroughly researched and calculated system...and convincing me to make something simpler. ![:wink:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif \u0022:wink:\u0022) The tank-mass spreadsheet was a handy resource!\n\nEven more thanks to ialdeboath and sarbian for the power of Module Manager. Seriously, half of my addons wouldn\u0027t exist if not for them.\n\n## \nLicense\n\nSimple Module adjUstments for Real-ish Fuel-mass Fractions (\u0022SMURFF\u0022) is copyright 2015-2018 Kerbas\\_ad\\_astra. Configuration files are released under the [**GPL v3 license**](https://www.gnu.org/licenses/gpl-3.0) (or any later version). Any redistributions must use a different name and folder (per section 7c). All other rights (e.g. the SMURFF logo) reserved.\n\n**Edited \u003Ctime datetime=\u00222020-03-15T20:04:48Z\u0022 title=\u002203/15/2020 08:04  PM\u0022 data-short=\u00224 yr\u0022\u003EMarch 15, 2020\u003C/time\u003E by Kerbas\\_ad\\_astra**\n  \nVersion 1.9.1"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-08-09T23:27:33Z","Content":"Brilliant. Just brilliant. Now, I have to say, KSP: RishA sounds like a brilliant idea."},{"CreatedByName":"cantab","CreatedById":104935,"CreatedDateTime":"2015-08-09T23:45:50Z","Content":"Simple but effective mod, I plan to use it if and when I start playing with RSS, since I tried RO and didn\u0027t enjoy it.\n\nI\u0027m not sure how much if at all engine performance needs changing. As you say, what we have is within the range of hypergolic fuels or kerolox."},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-08-10T01:10:49Z","Content":"Without the RishA I don\u0027t think SMURFF is enough. This rocket can not quite reach orbit. It\u0027s just short. If I tuned my ascent profile, it might make it. But still, that\u0027s far too big a rocket not to reach orbit or barely reach orbit.\n\n![zw4bWdn.png](http://i.imgur.com/zw4bWdn.png)\n\nThat\u0027s why I think KIDS-like functionality is needed. And RishA seems to be just that.\n\nEDIT: It might just be Ven\u0027s Stock Revamp or improper use of cryogenic engines. This rocket made it to orbit with fuel to spare.\n\n\u003E [Javascript is disabled. View full album](//imgur.com/a/HQS1I)\n\n**Edited \u003Ctime datetime=\u00222015-08-10T03:20:02Z\u0022 title=\u002208/10/2015 03:20  AM\u0022 data-short=\u00228 yr\u0022\u003EAugust 10, 2015\u003C/time\u003E by GregroxMun**"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-08-10T04:20:06Z","Content":"\u003E \n\u003E Without the RishA I don\u0027t think SMURFF is enough. This rocket can not quite reach orbit. It\u0027s just short. If I tuned my ascent profile, it might make it. But still, that\u0027s far too big a rocket not to reach orbit or barely reach orbit.\n\u003E [http://i.imgur.com/zw4bWdn.png](http://i.imgur.com/zw4bWdn.png)\n\u003E \n\u003E That\u0027s why I think KIDS-like functionality is needed. And RishA seems to be just that.\n\u003E \n\u003E EDIT: It might just be Ven\u0027s Stock Revamp or improper use of cryogenic engines. This rocket made it to orbit with fuel to spare.\n\u003E \n\u003E [http://imgur.com/a/HQS1I](http://imgur.com/a/HQS1I)\n\nVen\u0027s Stock Revamp just tweaks textures and models, right? That shouldn\u0027t be a problem.\n\nDefinitely be careful with Cryogenic Engines -- if you don\u0027t delete \u0022CryoEngines/Patches/CryoEnginesFuelTankSwitcher.cfg\u0022, you won\u0027t get any benefit from SMURFF.\n\nComparing your rocket designs, I see you have a very large lower stage on your first rocket. In general, all efficiency numbers and mass fractions and such being equal, the optimal arrangement is to get roughly equal delta-V\u0027s from each stage. (Since upper-stage motors tend to be more efficient, it can be more optimal to get more delta-V from them, but be careful with TWR in that case.) Your second rocket appears to have more evenly-scaled stages. If you have Kerbal Engineer, it might help to see what it says in the VAB. In my (admittedly limited) experience, it takes about 9.2-9.5 km/s of delta-V to get to LEO, so if your first rocket doesn\u0027t get that, it might help to give it another fuel tank up top and, if TWR becomes an issue, replace one of those S3-14400\u0027s with a -7200 and -3600 (or use boosters).\n\nAlso, I see your first rocket uses a C7 adapter -- those (and all spaceplane parts) have worse fuel fractions than a vanilla fuel tank (not by much, when SMURFF is installed, but upper stages can be sensitive to that sort of thing). [Modular Rocket Systems](https://forum.kerbalspaceprogram.com/threads/93067) has a size2-size1 adapter that matches the typical fuel fraction.\n\nRegarding Isps, I\u0027m not quite sold on budging them for LFO engines. The density of Liquid Fuel is clearly more like RP-1 than LH2 (although neither is quite as dense as LOX, unlike our Liquid Fuel and Oxidizer), and there is a pretty wide gulf between the efficiencies LOX/RP-1 engines and LOX/LH2 engines, as you can see in the table in [this Wikipedia article](https://en.wikipedia.org/wiki/Comparison_of_orbital_rocket_engines). In testing, I do get similar payload mass fractions to real rockets (in general, 1 kg of payload = 25-50 kg of rocket). SRBs could probably stand a buff, though -- the Space Shuttle SRBs had Isp from 240 s SL to 268 s vac, vs. 195/220 for the Kickback -- a boost of 30-50 seconds across the board might be in order for them. Unfortunately, the second digit is harder to reach than the first, especially if I end up having to carry the one. I\u0027ve got some ideas for breaking out the atmosphere curve into dummy variables that I can manipulate more freely before sticking the modified Isps back in, but it\u0027s definitely going to take some guru meditation and serious testing before I\u0027ve got something for release.\n\nIn the end, looking over engine stats, stock engines have very different TWRs (from 3-25, a spread of 8x), while real kerolox rocket engines tend to be more uniform (60-150, spread of 2.5x). Unfortunately, since SMURFF doesn\u0027t (and won\u0027t) do any individual tweaking, any imbalances between engines are preserved, so you may just have to break out KER and play around to find which engines do the best for whatever mission plan you have. Sorry. :/\n\nEdit: However, there does seem to be a trend that TWR goes with mass. I might be able to rig up a line-fit and buff the masses of smaller engines more. I don\u0027t get a whole lot of testing time in during the week, but I\u0027ll see what I come up with -- I definitely noticed that my all-size-1 rocket was getting a worse payload mass fraction than my all-size-2 rockets. Meanwhile, ensuring that I don\u0027t mistreat engines from the mods that I use (SpaceY, RLA, HGR... argh, the whole point of SMURFF was to be simple! ![:rolleyes:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_rolleyes.gif)).\n\n**Edited \u003Ctime datetime=\u00222015-08-10T04:33:43Z\u0022 title=\u002208/10/2015 04:33  AM\u0022 data-short=\u00228 yr\u0022\u003EAugust 10, 2015\u003C/time\u003E by Kerbas\\_ad\\_astra**"},{"CreatedByName":"Whirligig Girl","CreatedById":36077,"CreatedDateTime":"2015-08-13T12:06:12Z","Content":"I can\u0027t seem to get CryoEngines to run on LFO-mode. I put the LFO patch config in the patches folder of CryoEngines, and removed the FuelTankSwitcher patch. If I remove CommunityResourcePack, the parts won\u0027t load (presumably because they\u0027re being patched instead of modified). Did I miss a step?\n\nCouldn\u0027t you do a special patch for CryoEngines LH2 fuel tanks, considering that they do have more accurate fuel densities and all."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-08-14T02:36:33Z","Content":"One issue I\u0027ve discovered with the LFO patch is that it misspells one of the engine names -- \u0022cryoEngine-375-1\u0022 should be \u0022cryoengine-375-1\u0022. After fixing that (and deleting the tankswitch patch), I can load a game with CryoEngines and without CRP just fine. That may be the only obstacle for you.\n\nI cannot patch CryoEngines\u0027 LH2 fuel tank masses directly because (a) it doesn\u0027t have any tanks of its own and (![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png) the fuel switcher patches (and the fuel switcher plugins) use a variable called \u0022tankMass\u0022 which is a list of semicolon-separated numbers (a unique mass for each tank setup, which overrides whatever value is in the stock mass variable). I can\u0027t do math on that since Module Manager tries to ingest the whole thing as a number and fails. (Modifying Module Manager to usefully process semicolon-, comma-, and space-separated lists of values would be cool, but is beyond my ability at this time.)\n\nI can certainly make a modified fuel-switcher patch (i.e. a replacement for the one that comes with CryogenicEngines) that uses smaller numbers (reducing \u0022massPerUnitLH2\u0022 and the like), but I need to spend some time going over Nertea\u0027s math to make sure that everything gets adjusted in step. I\u0027ll see if I can get this done in the next day or two.\n\nEDIT: Got it done in a day. Bolded lines are the changes.\n\n    // LF/O tanks@PART[*]:HAS[@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleEnginesFX],!MODULE[ModuleEngines],!MODULE[FSfuelSwitch]]:NEEDS[!modularFuelTanks]:NEEDS[!RealFuels]{[B]    @mass /= 2 // SMURFF buff for switchable tanks -- was 88%, now 94% (vs. 97% for single-mode tanks)[/B]    %LF = #$RESOURCE[LiquidFuel]/maxAmount$    %OX = #$RESOURCE[Oxidizer]/maxAmount$    %totalCap = #$RESOURCE[LiquidFuel]/maxAmount$    @totalCap \u002B= #$RESOURCE[Oxidizer]/maxAmount$    %LH2FudgeFactor = 1.5 // \u003C- EDIT HERE (effectively multiplies LH2 density by this number)    %mixOXProportion = 0.45 // \u003C- EDIT HERE (proportion of tank volume containing OX; this value should be set approximately = 5.5 / [5.5 \u002B [10 / LH2FudgeFactor]])[B]    %massPerUnitLH2 = 0.0000175 // was 67% fuel, now 80% -- not as much as real-ish value of 85%, but that\u0027s the switchable tank penalty.  // 0.000035 // \u003C- EDIT HERE (dry mass per unit LH2 capacity)[/B]    %onlyLH2 = #$totalCap$    @onlyLH2 *= 5.5    @onlyLH2 *= #$LH2FudgeFactor$    %mixOX = #$totalCap$    @mixOX *= #$mixOXProportion$    %mixLH2 = #$mixOX$    @mixLH2 *= 10    %tempVar = 0    %dryCost = 0    @dryCost = #$cost$    %LFCost = 0    %OXCost = 0    %LH2Cost = 0    %mixLH2Cost = 0    %mixLFCost = 0    // compute cost of stock tank fuel    @tempVar = #$RESOURCE[LiquidFuel]/maxAmount$    @tempVar *= 0.8    @mixLFCost \u002B= #$tempVar$    @tempVar = #$RESOURCE[Oxidizer]/maxAmount$    @tempVar *= 0.18    @mixLFCost \u002B= #$tempVar$    @dryCost -= #$mixLFCost$    @cost -= #$mixLFCost$    // Cost LF only    @tempVar = #$totalCap$    @tempVar *= 0.8    @LFCost \u002B= #$tempVar$    // Cost OX only    @tempVar = #$totalCap$    @tempVar *= 0.18    @OXCost \u002B= #$tempVar$    // Cost LH2 only    @tempVar = #$onlyLH2$    @tempVar *= 0.03675    @LH2Cost \u002B= #$tempVar$    // Cost mix    @tempVar = #$mixLH2$    @tempVar *= 0.03675    @mixLH2Cost \u002B= #$tempVar$    @tempVar = #$mixOX$    @tempVar *= 0.18    @mixLH2Cost \u002B= #$tempVar$    // masses    %massOffset = #$mass$    @tempVar = #$totalCap$[B]    @tempVar *= 0.0003125 // 0.000625 // standard dry mass per units of LF/OX[/B]    @massOffset -= #$tempVar$ // this value accounts for any non-standard fuel tank mass, which should remain constant across fuel configurations, e.g., extra mass for spaceplane tanks    %mixLH2mass = #$mixOX$[B]    @mixLH2mass *= 0.0003125 // 0.000625[/B]    @tempVar = #$mixLH2$    @tempVar *= #$massPerUnitLH2$    @mixLH2mass \u002B= #$tempVar$    @mixLH2mass \u002B= #$massOffset$    %onlyLH2mass = #$onlyLH2$    @onlyLH2mass *= #$massPerUnitLH2$    @onlyLH2mass \u002B= #$massOffset$    @tempVar = 0    MODULE    {        name = InterstellarFuelSwitch        volumeMultiplier = 1        massMultiplier = 1        resourceGui = LF/OX;LH2/OX;LF;OX;LH2        resourceNames = LiquidFuel,Oxidizer;LqdHydrogen,Oxidizer;LiquidFuel;Oxidizer;LqdHydrogen        resourceAmounts = #$../LF$,$../OX$;$../mixLH2$,$../mixOX$;$../totalCap$;$../totalCap$;$../onlyLH2$        //tankCost = #$../mixLFCost$;$../mixLH2Cost$;$../LFCost$;$../OXCost$;$../LH2Cost$        displayCurrentTankCost = true        hasGUI = true        showInfo = true        availableInFlight = false        availableInEditor = true        basePartMass = 0        tankMass = #$../mass$;$../mixLH2mass$;$../mass$;$../mass$;$../onlyLH2mass$    }    !RESOURCE[LiquidFuel] {}    !RESOURCE[Oxidizer] {}}// Pure LH2 tanks@PART[*]:HAS[@RESOURCE[LqdHydrogen],!MODULE[InterstellarFuelSwitch],!MODULE[ModuleEnginesFX],!MODULE[ModuleEngines],!MODULE[FSfuelSwitch]]:NEEDS[!modularFuelTanks]:NEEDS[!RealFuels]{    %LH2 = #$RESOURCE[LqdHydrogen]/maxAmount$    %LH2FudgeFactor = 1.5 // (this should match LH2FudgeFactor for stock tanks above)    %mixOXProportion = 0.45 // (this should match mixOXProportion for stock tanks above)[B]    %massPerUnitLH2 = 0.0000125 // Was 75%, now 85% -- not sure how wild I am about having a full \u0022real-ish\u0022 value for a switchable fuel tank, but at least it\u0027s in line with fuel-switch improvement factor of 2 // 0.000025 // \u003C- EDIT HERE (dry mass per unit LH2 capacity; this should be \u003C massPerUnitLH2 for stock  tanks)[/B][B]    %massPerUnitOX = 0.00025 // Was 91%, now 95% -- a decent penalty from real-ish of 96-97% // 0.0005 // \u003C- EDIT HERE (dry mass per unit OX capacity; this should be \u003C the standard stock value of 0.000625)[/B]    %OX = #$LH2$    @OX /= #$LH2FudgeFactor$    @OX /= 5.5    %mixOX = #$OX$    @mixOX *= #$mixOXProportion$    %mixLH2 = #$mixOX$    @mixLH2 *= 10    // masses    %onlyLH2mass = #$LH2$    @onlyLH2mass *= #$massPerUnitLH2$    %massOffset = #$mass$    @massOffset -= #$onlyLH2mass$ // this value accounts for any non-standard fuel tank mass, which should remain constant across fuel configurations, e.g., lower dry mass ratios for larger tanks    @onlyLH2mass \u002B= #$massOffset$    %mixLH2mass = #$mixOX$    @mixLH2mass *= #$massPerUnitOX$    %tempVar = #$mixLH2$    @tempVar *= #$massPerUnitLH2$    @mixLH2mass \u002B= #$tempVar$    @mixLH2mass \u002B= #$massOffset$    %onlyOXmass = #$OX$    @onlyOXmass *= #$massPerUnitOX$    @onlyOXmass \u002B= #$massOffset$    @tempVar = 0    MODULE    {        name = InterstellarFuelSwitch        volumeMultiplier = 1        massMultiplier = 1        resourceGui = LH2;LH2/OX;OX        resourceNames = LqdHydrogen;LqdHydrogen,Oxidizer;Oxidizer        resourceAmounts = #$../LH2$;$../mixLH2$,$../mixOX$;$../OX$        displayCurrentTankCost = true        hasGUI = true        showInfo = true        availableInFlight = false        availableInEditor = true        basePartMass = 0        tankMass = #$../onlyLH2mass$;$../mixLH2mass$;$../onlyOXmass$    }    !RESOURCE[LqdHydrogen] {}    }\n\nHere are some test results. Basically, \u0022how much mass is required to get 5.1 km/s of Delta-V with a Mk 1 pod, a size 1 upper-stage motor (i.e. LV-909 or Chelyabinsk), and size 1 FL-Txx tanks?\u0022\n\nStock:\n\nLV-909: 11 tons\n\nChel LH2: 8 tons\n\nSMURFF, using the fuel-switch patch that comes with Cryogenic Engines (i.e. stock fuel mass fractions, reduced engine masses):\n\nLV-909: 9 tons\n\nChel LH2: 6 tons\n\nSMURFF, using the modified fuel-switch patch above:\n\nLV-909: 6.4 tons\n\nChel LH2: 4.9 tons\n\nSMURFF, no fuel switch patch, LFO patch for the Cryogenic Engines:\n\nLV-909: 5.1 tons (note that this is the actual baseline craft -- Mk1 pod, 1 FL-T800 tank, 1 LV-909 -- hence the specific value of 5.1 km/s)\n\nChel LFO: 4.3 tons\n\nEven with the hit to Isp, the LFO cryogenic engines perform better than LH2 cryogenic engines because of the slight mass fraction penalty of the switchable tank (even with the improved patch above -- 94-95% doesn\u0027t sound much worse than 96-97%, but that pesky logarithm in the rocket equation amplifies these little differences -- log(1/0.05) = 1.30, log(1/0.03) = 1.52, ratio is 1.17, which beats the Isp advantage of 455/425 = 1.07). I\u0027m okay with this penalty, since the fuel tanks can be changed in flight, but there you go. Science!\n\nEDIT 2: After studying the part, the tanks can\u0027t be switched in the field. I\u0027ll ask what people think about keeping the penalty vs. losing it.\n\n**Edited \u003Ctime datetime=\u00222015-09-17T02:40:00Z\u0022 title=\u002209/17/2015 02:40  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 17, 2015\u003C/time\u003E by Kerbas\\_ad\\_astra**"},{"CreatedByName":"monstah","CreatedById":95210,"CreatedDateTime":"2015-08-14T13:39:49Z","Content":"\u003E \n\u003E so let me know if you\u0027re interested in **KSP-RishA: Real-ish Adjustments**. (I\u0027m also open to suggestions for the name.)\n\nYes, very much! I\u0027ve not found RSS or RO much fun because of all the hassle. Yes to large systems and dV requirements, no to convoluted gameplay!\n\n\u003E \n\u003E I have zero interest in making adjustments for individual parts -- the whole point of SMURFF is to avoid that level of complication.\n\nWhich is exactly why I found this mod so appealing. Thanks!"},{"CreatedByName":"falken","CreatedById":17316,"CreatedDateTime":"2015-08-14T14:21:28Z","Content":"Ah, you covered that. I might go thru my cfg files and manually nerf the isp.\n\nI\u0027m using k scales and still finding that my shuttles and rockets are too fuel efficient on ascent.\n\nThis mod certainly helps with the twr issues that come with the sheer size and mass of a shuttle external tank though"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-08-15T05:10:20Z","Content":"I\u0027m glad you both like SMURFF. (I see that Realism Overhaul provides an \u0022ROMini\u0022 patch which does some of the same things as SMURFF, but I stand by my approach of reducing mass rather than tinkering with rescaleFactor...that doesn\u0027t always turn out well.) I wasn\u0027t so bothered by the complexity of RO (I figure that using CKAN would cut down on the time required to install it), but having to give up some of the mods that I use was a bridge too far. Hence SMURFF.\n\nAlso, for those looking for a more comprehensive \u0022real-ish\u0022 experience, I\u0027ve added some suggestions of other real-ish addons to the OP. AntennaRange, SCANSat, and USI Life Support (and some supporting addons) to begin with. I\u0027m happy to hear more suggestions, though I don\u0027t plan on making the list too big."},{"CreatedByName":"falken","CreatedById":17316,"CreatedDateTime":"2015-08-16T18:23:57Z","Content":"Just thought I would let you know that this doesn\u0027t seem to work on procedural fuel tanks.\n\nThe Kerbodyne S3-14400 tank (3.75m largest nasa mission tank) weighs 2.3t dry\n\nA procedural tank of the same size weighs 9.1 tonnes dry."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-08-18T00:36:49Z","Content":"Procedural Parts use a special \u0022dryDensity\u0022 variable to set their masses, which wasn\u0027t included in the mass reduction (and is now). I\u0027ve pushed an update to my repo which should work (get the latest config [**here**](https://github.com/Kerbas-ad-astra/SMURFF/blob/master/GameData/SMURFF/SMURFF.cfg)). Unfortunately, I don\u0027t think I\u0027ll have the time to put together a proper release for a couple of weeks or so, but you can replace SMURFF.cfg and get it working. Thanks for the heads-up!"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-08-21T20:11:07Z","Content":"Awesome work!\n\nROMini adjusts scale because for a 1.5t payload, you do tend to need a 2m rocket, and because otherwise reentries are way harder than they should be (you get only ~40% of the drag on reentry with KSP\u0027s parts\u0027 size and mass, which is almost like saying you\u0027re reentering your capsule nose-first). This also allows more \u0022useful for RSS-size planets\u0022 engine thrusts--the Mainsail in KSP is little better than an H-1 (8 of them were on Saturn I), and 1/7th an F-1.\n\nOh, and feel free to grab anything useful from ROMini. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n(If Sarbian allows wildcard matching of values as well as nodes, the use of rescaleFactor could be abolished for MODEL-node parts)"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-08-22T00:41:06Z","Content":"\u003E \n\u003E Awesome work!\n\u003E ROMini adjusts scale because for a 1.5t payload, you do tend to need a 2m rocket, and because otherwise reentries are way harder than they should be (you get only ~40% of the drag on reentry with KSP\u0027s parts\u0027 size and mass, which is almost like saying you\u0027re reentering your capsule nose-first). This also allows more \u0022useful for RSS-size planets\u0022 engine thrusts--the Mainsail in KSP is little better than an H-1 (8 of them were on Saturn I), and 1/7th an F-1.\n\u003E \n\u003E Oh, and feel free to grab anything useful from ROMini. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\u003E \n\u003E (If Sarbian allows wildcard matching of values as well as nodes, the use of rescaleFactor could be abolished for MODEL-node parts)\n\nThanks for the compliment!\n\nLooking at ROMini, I think the reason you\u0027re having difficulty working with MODEL nodes is that it\u0027s missing some asterisks inside brackets. To look for models, it should say \u0022HAS[@MODEL\n\n**[\\*]**]\u0022, or \u0022HAS[!MODEL\n\n**[\\*]**]\u0022 to look for parts with no models, and for \u0022scale\u0022 and other variables, that would be \u0022#scale\n\n**[\\*]**\u0022 or \u0022~scale\n\n**[\\*]**\u0022. I don\u0027t have lots of time right now to try out my own advice, but that\u0027s the immediate issue I see.\n\nI\u0027m still not planning to rescale any parts with SMURFF/RishA, but I see your point re: TWR -- since real rocket engines get TWRs around 80-100, vs. up to 25 with stock KSP, I might try increasing thrust by 60% or more as well as reducing mass by half as I already have. For ballistic coefficients, I\u0027ll have to see -- I\u0027ve had no trouble reentering on Earth from LEO, but I\u0027ll see how my Moon tests go. If it\u0027s a problem, I might knock down the mass of command pods some (the Mk1-2 is especially hefty compared to the Apollo CM and Orion)."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-08-22T04:00:53Z","Content":"Regarding the MM code in ROMini, it works fine. That is in fact the correct syntax. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\n~scale[] will find an absence of any scale, just as ~scale[\\*] will, and note that MODEL doesn\u0027t have a name = line to match against with [\\*]. At one point, perhaps still, that would fail. (Remember @NODE[foo] is the same as @NODE:HAS[#name[foo]] and @NODE:HAS[#name[\\*]] will not match a NODE that lacks a name.)\n\nWhat I was talking about is the bug in KSP where a part with MODEL nodes and a rescaleFactor that is not set explicitly to 1.0 will change size on revert / vessel-swap / etc. Try it yourself: give a part with a MODEL node some non-1.0 rescaleFactor. Launch it. Now revert to launch. Presto resize-o.\n\nHowever, since scale = x (i.e. the scale outside MODEL nodes) is \\_also\\_ bugged, one cannot simply do @MODEL,\\* { %scale = 1.6, 1.6, 1.6 } and then @scale \\*= 1.6. In some cases the nodes will not properly scale. If there were a way to wildcard-change values (i.e node\\_\\* = foo) then I could get around it, but as of now...that\u0027s why ROMini uses rescaleFactor even for MODEL nodes.\n\nYou could (and should) give engines realistic TWRs without rescaling--indeed, the first half of ROMini does no rescaling whatsoever, and is all about mass and thrust and Isp. The point I was making with rescaling, however, is that stock KSP only supports three and a half sizes for LVs (.625 doesn\u0027t really work well for LVs since your payload will be wider than your LV). That means that if you force 1.25m capsules to use 2.5m rockets, you\u0027re running low on super-heavy stuff. If you scale everything up to real life *densities* as well as TWRs and dry fractions, then things \u0022just work\u0022--old-1.25m stacks work fine with old-1.25m payloads, etc.\n\nAs to the Mk1-2: huh? It\u0027s 4.5 tons. Apollo, in toto, was ~5.8 to 6 tons, which is just about what a Mk1-2 with a docking port, chutes, heat shield, and RCS thrusters is. Pretty close match. That means, at the correct mass and 41% the surface area, you get 41% of the drag (2.44x the ballistic coefficient)."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-08-25T03:52:47Z","Content":"I\u0027m well aware of the bad interaction between MODEL{} nodes and rescaleFactor (filed a couple of bug reports about it), but I had forgotten that scaling the nodes would also have to be done (which is odd, since I\u0027ve been tinkering with patches that do just that for specific parts, but whatever). I suppose that a (permanent, cfg-altering) batch script to catch all node\\_\\* would be more trouble than ROMini is intended to go to.\n\nRegarding the need for heavy rockets, maybe I\u0027ll have to include HGR (1.875m rockets, surprisingly handy for smoothing out the transition from 1.25 to 2.5) and SpaceY and/or Behemoth Aerospace Engineering in the suggestions. I\u0027ve launched size 1 capsules with size 1 rockets (and size 2) without too much trouble, but I\u0027ve yet to send up anything bigger -- that was just to prove that I was in the ballpark with my values.\n\nAs far as the Mk1-2, I should have used language relating to density, sorry for the lack of clarity. If we want to match the ballistic coefficients of the Orion or Apollo capsules (and I\u0027m sure it\u0027s no coincidence that theirs match), the Mk1-2 pod (plus accessories) has to weigh 2.25 tons. The Mk1 pod isn\u0027t so bad compared to Mercury, though adding thrusters and such might push it to be just as over-dense."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-09-05T16:03:57Z","Content":"\u003E \n\u003E Oh, and feel free to grab anything useful from ROMini. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nI\u0027ve figured out something I\u0027m happy to share the other direction as well!\n\nYour current Isp patching reads out the keys from atmosphereCurve and strips away the leading 0 or 1, which will leave behind any tangents and prevent you from doing math on those keys. To just pick out the second element (i.e. the specific impulse itself), you can do the following:\n\n    @PART[*]:HAS[@RESOURCE[SolidFuel]]:FOR[SMURFF]{    [...]    @MODULE[ModuleEngines*]:HAS[@PROPELLANT[SolidFuel]]    {         key0 = #$atmosphereCurve/key,0[1, ]$ //get the keys -- the second  element of the first space-separated list called \u0022key\u0022.        key1 = #$atmosphereCurve/key,1[1, ]$        @key0 \u002B= 40 //modify values -- add 40 seconds to bring Kickback close to Space Shuttle SRBs.        @key1 \u002B= 40         @atmosphereCurve //Unfortunately, this will wipe any tangents  until I figure out a way to identify which keys have tangents and which  don\u0027t. SRBs usually don\u0027t have any, but the \u00221\u0022 key of RLA Stockalike\u0027s  SRBs do.        {            @key,0 = #$key,0[0, ]$ $../key0$ //$key,0[2, ]$ $key,0[3, ]$            @key,1 = #$key,1[0, ]$ $../key1$ //$key,1[2, ]$ $key,1[3, ]$        }    }    [...]}\n\nThe only shortcoming is that it deletes any tangents, and uncommenting the second halves of the @key,X lines will result in keys that don\u0027t have tangents getting duplicated (e.g. key = 0 285 0 285 0 285). It would be great if I could find out in advance if a key has tangents or not, but at least I can always get the specific impulse whether they\u0027re there or not."},{"CreatedByName":"pap1723","CreatedById":148945,"CreatedDateTime":"2015-09-10T15:30:28Z","Content":"Hi Kerbas,\n\nThanks for this mod, it is great! Would this work if I wanted to use the Interstellar mod pack in RSS?"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-09-10T17:14:31Z","Content":"It will probably work. The worst thing that can happen with SMURFF is \u0022nothing\u0022 (i.e. no benefit). I understand that Interstellar adds a bunch of resources, and SMURFF won\u0027t act on those, but anything with an InterstellarFuelSwitch module will get a modest benefit (as long as the tankMass variable is not used)."},{"CreatedByName":"Sharkman Briton","CreatedById":148040,"CreatedDateTime":"2015-09-14T08:27:11Z","Content":"Awesome mod! Does it work with KW rocketry and SpaceY?"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-09-14T09:02:04Z","Content":"\u003E \n\u003E Most of a real rocket\u0027s structural strength comes from the fuel inside of it, rather than the tanks themselves -- the \u0022tank\u0022 is just a metal shell to hold the fuel together. KSP fuel tanks, on the other hand, seem to be made of lead plates and rebar.\n\nIntresting statement, you got any science facs to back that up?\n\nSay, I\u0027m looking for some advice, \n\nFor KSPI-E I introduced the Interstellar Fuel Tanks which can switch propellant. For lightest Propellant, Liquid Hydrogen, I reduced the mass by 1/8 the mass of a regular mass.\n\nMy largest tank, the X48, contains 55200 liter (3,91092t) and has a mass with a mass of 0.75t (LqdHydrogen) which would make the an effective Wetmass of 84%. How does this compare to your adjustments to the LqdHydrogen tanks of NF?\n\n**Edited \u003Ctime datetime=\u00222015-09-14T09:16:48Z\u0022 title=\u002209/14/2015 09:16  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 14, 2015\u003C/time\u003E by FreeThinker**"},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-09-14T14:05:09Z","Content":"\u003E \n\u003E Awesome mod! Does it work with KW rocketry and SpaceY?\n\nIt certainly does! It will work with anything that has stock fuels or engine modules. (I guess it would work with ModuleEnginesRF, since it looks for \u0022ModuleEngines\\*\u0022, but if you\u0027re using RealFuels, then there\u0027s really no need to use SMURFF.)\n\nThe next version will work even better with mod parts -- mass savings will scale by propellant amount, so parts with multiple purposes besides fuel storage (e.g. service modules, command pods. service bays with integrated tanks) will get appropriate mass reductions, as opposed to buffing everything like a fuel tank or not at all.\n\n\u003E \n\u003E Intresting statement, you got any science facs to back that up?\n\u003E Say, I\u0027m looking for some advice, \n\u003E \n\u003E For KSPI-E I introduced the Interstellar Fuel Tanks which can switch propellant. For lightest Propellant, Liquid Hydrogen, I reduced the mass by 1/8 the mass of a regular mass.\n\u003E \n\u003E My largest tank, the X48, contains 55200 liter (3,91092t) and has a mass with a mass of 0.75t (LqdHydrogen) which would make the an effective Wetmass of 84%. How does this compare to your adjustments to the LqdHydrogen tanks of NF?\n\nAnecdotally, one of my managers used to work at a Delta IV plant, and described the tanks as being like soda cans, a comparison repeated elsewhere (in fact, Don Pettit\u0027s \u0022[**The Tyranny of the Rocket Equation**](https://www.nasa.gov/mission_pages/station/expeditions/expedition30/tryanny.html)\u0022 points out that soda cans are actually less efficient than the space shuttle external tank -- they\u0027re \u0022only\u0022 94% \u0022fuel\u0022 by mass). They\u0027re designed to contain bursting pressure, not to support weight, and given how much of a rocket\u0027s cross-sectional area is fuel rather than metal, there\u0027s really no other way to go about it. In fact, [**this article**](http://www.businessalabama.com/Business-Alabama/October-2013/Where-Rockets-are-Born/) goes even further and describes the Atlas V\u0027s upper stage as being like a balloon, unable to support its own weight when empty. I don\u0027t have any numbers specifically (nobody seems to care much about the internal pressure of lower-stage tanks -- all the numbers are on upper-stage pressure-fed tanks), but putting longitudinal compression loads on a thin hollow cylinder is bad news.\n\nAs to your second question, the wet mass of Near Future Tech\u0027s liquid hydrogen tanks comes out to 86% (like the Space Shuttle\u0027s external tank, according to my rough figuring) -- which doesn\u0027t sound that much better than 84%, but the logarithm in the rocket equation means a rocket will get about 8% less delta-V from your LH2 tanks vs. buffed NFP tanks. If your tanks are switchable in the field, that might be an acceptable balancing penalty."},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-09-14T17:06:45Z","Content":"Centaur is indeed a balloon tank, as was the old (Atlas II and earlier) lower stage tank. Also the Ariane V EPC is a balloon tank. Other tanks are rigid and don\u0027t require constant pressurization, but they\u0027re still very thin and light. Your numbers seem very low; I\u0027d expect something like 97% fuel fraction for non-balloon tanks, and not much less than 99% for balloon tanks (for kerolox density). LH2, now, the tanks will be rather heavier in a weight-weight comparison; EPC is 6.6% structural fraction (counting engines, guidance, interstage base, etc, as well as tank mass), Centaur is about 11%, and so forth. At a rough cut I\u0027d expect LH2 tanks to have 1.3-1.6x the structural mass, per mass of propellant, as another tank.\n\nNormal pressurized tanks (i.e. not those for pressure-fed stages) run about 2 atm of pressure IIRC."},{"CreatedByName":"Kerbas_ad_astra","CreatedById":126593,"CreatedDateTime":"2015-09-14T20:17:57Z","Content":"When you say my numbers are \u0022too low\u0022, do you mean the fuel mass fractions should be higher? I\u0027m treating all tanks as non-balloon tanks (since they clearly don\u0027t collapse when empty); going from 1 ton of tank per 8 tons of fuel to 0.25 tons does get to 97% fuel (96.969696...%).\n\nFor LH2, I approximated the desired mass fraction by allocating 63.1% of the space shuttle ET\u0027s dry mass to the LH2 tank (because it\u0027s 29.6/46.9 of the tank\u0027s length), hence 86.4%. I suppose this assumes no mass to the intertank (probably false...), but I was primarily interested in getting a number that\u0027s \u0022close enough\u0022 so that I could get SMURFF out the door. Going by your guideline instead, 8 tons of LH2 should have .25 \\* 1.3-1.6 = 0.325-0.4 tons of tank, or 95.2-96.1%?"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2015-09-14T21:42:53Z","Content":"Sorry, must have misread. 3% structural / 9\u0026% fuel fraction does sound right.\n\nFor LH2 RF goes with 0.0206t per cubic meter for a non-balloon (Delta IV-like) tank, or 0.0066t for balloon cryo. That equates to 22.5% and 8.5% structural fractions Clearly I was getting confused between the LH2 tank\u0027s structural fraction alone (which is very high) and the sum of 5.5:1 or 6:1 LOX/LH2\u0027s structural fraction...(which is on the order of 1.5x compared to LOX/kero)\n\nsorry...\n\nYou might want to check the Volumes page here: [https://www.dropbox.com/s/lz2ntsqhwe192xv/Calcs.xls?dl=0](https://www.dropbox.com/s/lz2ntsqhwe192xv/Calcs.xls?dl=0)\n\nIt has all the data RF uses to mass tanks."}]}