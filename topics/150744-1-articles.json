{"TopicId":150744,"ForumId":29,"TopicTitle":"Catching engine exception","CreatedByName":"aikixd","CreatedById":116054,"CreatedDateTime":"2016-10-24T13:54:12Z","PageNum":1,"Articles":[{"CreatedByName":"aikixd","CreatedById":116054,"CreatedDateTime":"2016-10-24T13:54:12Z","Content":"\n\u003Cp\u003E\nI am trying to update the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/72605-110-flight-manager-for-reusable-stages-fmrs-x110-experimental/\u0026amp;page=1\u0022 rel=\u0022\u0022\u003EFMRS\u003C/a\u003E\u00A0mod for 1.2.\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s my first time with KSP and Unity, so be gentle.\n\u003C/p\u003E\n\u003Cp\u003E\nI have updated the deprecated methods, and it works fine for me. But there\u0027s one guy, who has game crashes when reverting the flight with the plugin. The mod itself essentially creates game saves, one for each controllable stage and gives the ability to load them, while injecting the vehicle states into the main save. It seems that the crash happens after loading the scene. I am not familiar with unity scene system, to be sure though.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe linked thread contains some relevant info and this is the relevant part of the output\u00A0log:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003E#### FMRS: enter scene_change_handler(GameScenes input_scene) FLIGHT\nUnityEngine.DebugLogHandler:Internal_Log(LogType, String, Object)\nUnityEngine.DebugLogHandler:LogFormat(LogType, Object, String, Object[])\nUnityEngine.Logger:Log(LogType, Object)\nUnityEngine.Debug:Log(Object)\nFMRS.FMRS_Core:scene_change_handler(GameScenes)\nEventData\u00601:Fire(GameScenes)\nHighLogic:LoadScene(GameScenes)\nFlightDriver:StartAndFocusVessel(Game, Int32)\nFMRS.FMRS_Core:jump_to_vessel(Guid, Boolean)\nFMRS.FMRS_Core:MainGUI(Int32)\nUnityEngine.LayoutedWindow:DoWindow(Int32) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUILayout.cs:485)\nUnityEngine.GUI:CallWindowDelegate(WindowFunction, Int32, GUISkin, Int32, Single, Single, GUIStyle) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUI.cs:1896)\n \n(Filename: C:/buildslave/unity/build/Runtime/IMGUI/Managed/GUILayout.cs Line: 485)\n\n#### FMRS: scene_change_handler\nUnityEngine.DebugLogHandler:Internal_Log(LogType, String, Object)\nUnityEngine.DebugLogHandler:LogFormat(LogType, Object, String, Object[])\nUnityEngine.Logger:Log(LogType, Object)\nUnityEngine.Debug:Log(Object)\nFMRS.FMRS_Core:scene_change_handler(GameScenes)\nEventData\u00601:Fire(GameScenes)\nHighLogic:LoadScene(GameScenes)\nFlightDriver:StartAndFocusVessel(Game, Int32)\nFMRS.FMRS_Core:jump_to_vessel(Guid, Boolean)\nFMRS.FMRS_Core:MainGUI(Int32)\nUnityEngine.LayoutedWindow:DoWindow(Int32) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUILayout.cs:485)\nUnityEngine.GUI:CallWindowDelegate(WindowFunction, Int32, GUISkin, Int32, Single, Single, GUIStyle) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUI.cs:1896)\n \n(Filename: C:/buildslave/unity/build/Runtime/IMGUI/Managed/GUILayout.cs Line: 485)\n\n#### FMRS: leave scene_change_handler(GameScenes input_scene)\nUnityEngine.DebugLogHandler:Internal_Log(LogType, String, Object)\nUnityEngine.DebugLogHandler:LogFormat(LogType, Object, String, Object[])\nUnityEngine.Logger:Log(LogType, Object)\nUnityEngine.Debug:Log(Object)\nFMRS.FMRS_Core:scene_change_handler(GameScenes)\nEventData\u00601:Fire(GameScenes)\nHighLogic:LoadScene(GameScenes)\nFlightDriver:StartAndFocusVessel(Game, Int32)\nFMRS.FMRS_Core:jump_to_vessel(Guid, Boolean)\nFMRS.FMRS_Core:MainGUI(Int32)\nUnityEngine.LayoutedWindow:DoWindow(Int32) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUILayout.cs:485)\nUnityEngine.GUI:CallWindowDelegate(WindowFunction, Int32, GUISkin, Int32, Single, Single, GUIStyle) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUI.cs:1896)\n \n(Filename: C:/buildslave/unity/build/Runtime/IMGUI/Managed/GUILayout.cs Line: 485)\n\n[UIMasterController]: HideUI\nUnityEngine.DebugLogHandler:Internal_Log(LogType, String, Object)\nUnityEngine.DebugLogHandler:LogFormat(LogType, Object, String, Object[])\nUnityEngine.Logger:Log(LogType, Object)\nUnityEngine.Debug:Log(Object)\nKSP.UI.UIMasterController:HideUI()\nLoadingBufferMask:Show()\nLoadingBufferMask:OnSceneChange(GameScenes)\nEventData\u00601:Fire(GameScenes)\nHighLogic:LoadScene(GameScenes)\nFlightDriver:StartAndFocusVessel(Game, Int32)\nFMRS.FMRS_Core:jump_to_vessel(Guid, Boolean)\nFMRS.FMRS_Core:MainGUI(Int32)\nUnityEngine.LayoutedWindow:DoWindow(Int32) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUILayout.cs:485)\nUnityEngine.GUI:CallWindowDelegate(WindowFunction, Int32, GUISkin, Int32, Single, Single, GUIStyle) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUI.cs:1896)\n \n(Filename: C:/buildslave/unity/build/Runtime/IMGUI/Managed/GUILayout.cs Line: 485)\n\n[HighLogic]: =========================== Scene Change : From FLIGHT to FLIGHT =====================\nUnityEngine.DebugLogHandler:Internal_Log(LogType, String, Object)\nUnityEngine.DebugLogHandler:LogFormat(LogType, Object, String, Object[])\nUnityEngine.Logger:Log(LogType, Object)\nUnityEngine.Debug:LogWarning(Object)\nHighLogic:LoadScene(GameScenes)\nFlightDriver:StartAndFocusVessel(Game, Int32)\nFMRS.FMRS_Core:jump_to_vessel(Guid, Boolean)\nFMRS.FMRS_Core:MainGUI(Int32)\nUnityEngine.LayoutedWindow:DoWindow(Int32) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUILayout.cs:485)\nUnityEngine.GUI:CallWindowDelegate(WindowFunction, Int32, GUISkin, Int32, Single, Single, GUIStyle) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUI.cs:1896)\n \n(Filename: C:/buildslave/unity/build/Runtime/IMGUI/Managed/GUILayout.cs Line: 485)\n\n#### FMRS: leaving jump_to_vessel(Guid vessel_id)\nUnityEngine.DebugLogHandler:Internal_Log(LogType, String, Object)\nUnityEngine.DebugLogHandler:LogFormat(LogType, Object, String, Object[])\nUnityEngine.Logger:Log(LogType, Object)\nUnityEngine.Debug:Log(Object)\nFMRS.FMRS_Core:jump_to_vessel(Guid, Boolean)\nFMRS.FMRS_Core:MainGUI(Int32)\nUnityEngine.LayoutedWindow:DoWindow(Int32) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUILayout.cs:485)\nUnityEngine.GUI:CallWindowDelegate(WindowFunction, Int32, GUISkin, Int32, Single, Single, GUIStyle) (at C:\\buildslave\\unity\\build\\Runtime\\IMGUI\\Managed\\GUI.cs:1896)\n \n(Filename: C:/buildslave/unity/build/Runtime/IMGUI/Managed/GUILayout.cs Line: 485)\n\nCrash!!!\nSymInit: Symbol-SearchPath: \u0027.;C:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program;C:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program;C:\\WINDOWS;C:\\WINDOWS\\system32;SRV*C:\\websymbols*http://msdl.microsoft.com/download/symbols;\u0027, symOptions: 530, UserName: \u0027Sven\u0027\nOS-Version: 10.0.14393 () 0x100-0x1\nUnloading 9 Unused Serialized files (Serialized files now loaded: 0)\nC:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program\\KSP_x64_Dbg.exe:KSP_x64_Dbg.exe (00007FF6005D0000), size: 25534464 (result: 0), SymType: \u0027-exported-\u0027, PDB: \u0027C:\\Program Files (x86)\\Steam\\steamapps\\common\\Kerbal Space Program\\KSP_x64_Dbg.exe\u0027, fileVersion: 5.4.0.23386\nC:\\WINDOWS\\SYSTEM32\\ntdll.dll:ntdll.dll (00007FFE82AC0000), size: 1904640 (result: 0), SymType: \u0027-exported-\u0027, PDB: \u0027C:\\WINDOWS\\SYSTEM32\\ntdll.dll\u0027, fileVersion: 10.0.14393.206\n[...]\n\n========== OUTPUTING STACK TRACE ==================\n\nRtlLookupFunctionEntry returned NULL function. Aborting stack walk.\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026lt;Missing\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Estacktrace\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022atn\u0022\u003Einformation\u003C/span\u003E\u003Cspan class=\u0022tag\u0022\u003E\u0026gt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n========== END OF STACKTRACE ===========\n\n**** Crash! ****\u003C/span\u003E\u003C/pre\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nI tried wrap all the methods in the the flight scene class with try blocks and to log the exceptions, but it didn\u0027t do.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-10-24T15:58:07Z","Content":"\n\u003Cp\u003E\nThat\u0027s not an exception, that\u0027s a Unity crash. Hiding exception won\u0027t help with that (and it seldom helps). If it crashes then it is most likely the mod has changed some objects states in a bad way\n\u003C/p\u003E\n"},{"CreatedByName":"aikixd","CreatedById":116054,"CreatedDateTime":"2016-10-24T16:20:45Z","Content":"\n\u003Cp\u003E\nCan the steam overlay do bad things? Or perhaps there are some differences in a steam build?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2016-10-24T16:41:42Z","Content":"\n\u003Cp\u003E\nI don\u0027t know of any problem with the overlay. The user could launch the game manually without steam to check if it works better without the overlay (the steam build is the same as the other one)\n\u003C/p\u003E\n"}]}