{"TopicId":103963,"ForumId":36,"TopicTitle":"[WIP][1.9.x-1.12.x] Scatterer-atmospheric scattering (0.0838 - 14/08/2022) Scattering improvements, in-game atmo generation and multi-sun support","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-12T08:37:35Z","PageNum":274,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-11-27T13:25:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223229111\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221511773089\u0022 data-ipsquote-userid=\u002278589\u0022 data-ipsquote-username=\u0022DrPastah\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, DrPastah said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow do I optimize terrain shadows? I think that\u0027s the issue as my FPS goes up when I\u0027m high above Kerbin. I don\u0027t understand the settings.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe only setting affecting shadow performance is in the game settings under \u0022shadow quality\u0022 and \u0022shadow cascades\u0022. The settings in scatterer are for fixing artifacts.\n\u003C/p\u003E\n\u003Cp\u003E\nYou can do what Agustin said, that\u0027s it really, other settings don\u0027t affect performance.\n\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-11-27T19:38:34Z","Content":"\n\u003Cp\u003E\nHello everyone,\n\u003C/p\u003E\n\u003Cp\u003E\nif the current\u00A0\u003Cstrong\u003E\u0022Draw atmo on top of \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E clouds(old cloud shading, use with \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E 7-4)\u0022\u003C/strong\u003E\u00A0was removed to allow for improvements to the scaled space shaders and a more coherent look throughout (only the new \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E integration would be left) as well as fixes to atmosphere draw orders and to streamline development, would this be an issue?\n\u003C/p\u003E\n"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-11-27T19:44:00Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223229411\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221511811514\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHello everyone,\n\u003C/p\u003E\n\u003Cp\u003E\nif the current\u00A0\u003Cstrong\u003E\u0022Draw atmo on top of \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E clouds(old cloud shading, use with \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E 7-4)\u0022\u003C/strong\u003E\u00A0was removed to allow for improvements to the scaled space shaders and a more coherent look throughout (only the new \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E integration would be left) as well as fixes to atmosphere draw orders and to streamline development, would this be an issue?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNope, I\u2019m all for progression. Having to continue to develop\u00A0for an older plugin will just continue to slow development.\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-11-27T23:47:54Z\u0022 title=\u002211/27/2017 11:47  PM\u0022 data-short=\u00226 yr\u0022\u003ENovember 27, 2017\u003C/time\u003E by Galileo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-11-27T20:05:43Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104258\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0022 rel=\u0022\u0022\u003E@blackrack\u003C/a\u003E\u00A0is there anyway you can make the map view match the configPoint with the highest altitude by default instead of us having to try an match it up manually? I hate getting a body to look good, but then I forget to adjust the map view and have to spend more time on that.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-11-27T20:13:44Z\u0022 title=\u002211/27/2017 08:13  PM\u0022 data-short=\u00226 yr\u0022\u003ENovember 27, 2017\u003C/time\u003E by Galileo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2017-11-27T20:14:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223229427\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221511813143\u0022 data-ipsquote-userid=\u0022150430\u0022 data-ipsquote-username=\u0022Galileo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 minutes ago, Galileo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104258\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0022 rel=\u0022\u0022\u003E@blackrack\u003C/a\u003E\u00A0is there anyway you can make the map view match the configPoint instead by default instead of us having to try an match it up manually? I hate getting a body to look good, but then I forget to adjust the map view and have to spend more time on that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI can add a \u0022copy settings from top node\u0022 button I guess, just make sure to remind me If I forget \u003Cimg alt=\u0022:P\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 title=\u0022:P\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-11-27T20:15:01Z","Content":"\n\u003Cp\u003E\nThat would be awesome\n\u003C/p\u003E\n"},{"CreatedByName":"Poodmund","CreatedById":128643,"CreatedDateTime":"2017-11-27T21:55:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223229411\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221511811514\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHello everyone,\n\u003C/p\u003E\n\u003Cp\u003E\nif the current\u00A0\u003Cstrong\u003E\u0022Draw atmo on top of \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E clouds(old cloud shading, use with \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E 7-4)\u0022\u003C/strong\u003E\u00A0was removed to allow for improvements to the scaled space shaders and a more coherent look throughout (only the new \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E integration would be left) as well as fixes to atmosphere draw orders and to streamline development, would this be an issue?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAbsolutely not an issue. \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E 7-4 should not be used, its archaic and if its holding back potential development of this plugin then that is pretty sad to be honest.\n\u003C/p\u003E\n"},{"CreatedByName":"Agustin","CreatedById":172127,"CreatedDateTime":"2017-11-28T18:12:43Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223229427\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221511813143\u0022 data-ipsquote-userid=\u0022150430\u0022 data-ipsquote-username=\u0022Galileo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 hours ago, Galileo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104258\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0022 rel=\u0022\u0022\u003E@blackrack\u003C/a\u003E\u00A0is there anyway you can make the map view match the configPoint with the highest altitude by default instead of us having to try an match it up manually? I hate getting a body to look good, but then I forget to adjust the map view and have to spend more time on that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nwhat is that?\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-30T16:22:36Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223229411\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221511811514\u0022 data-ipsquote-userid=\u0022104258\u0022 data-ipsquote-username=\u0022blackrack\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/27/2017 at 12:38 PM, blackrack said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nscaled space shaders and a more coherent look throughout (only the new \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E integration would be left) as well as fixes to atmosphere draw orders and to streamline development, would this be an issue?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhile I have absolutely nothing against dropping of legacy \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E support (yay for progress) -- I\u0027m curious if the changes to the Scatterer shaders will have any impact on the ability to capture the visuals in standard cameras (e.g. TextureReplacer / TexturesUnlimited)?\n\u003C/p\u003E\n\u003Cp\u003E\nCurrently I\u0027m able to capture the standard (non-scaled space) atmosphere scattering properly during cubemap creation (e.g. while on the surface/in the atmo) -- but the scaled space scatter appears to be done as a post-process effect rather than as a rendered mesh (e.g. no atmosphere/scattering in reflections when on-orbit).\u00A0 Is this still the case / changing at all?\n\u003C/p\u003E\n\u003Cp\u003E\n(On that note, I would love for there to be a method to properly capture the post-process effects (ocean/scaled-space scatter) in cubemap reflection cameras; could possibly put together a PR if there was interest in such a feature/support)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"MOARdV","CreatedById":60950,"CreatedDateTime":"2017-11-30T22:41:55Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223231706\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512058956\u0022 data-ipsquote-userid=\u0022138730\u0022 data-ipsquote-username=\u0022Shadowmage\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, Shadowmage said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n(On that note, I would love for there to be a method to properly capture the post-process effects (ocean/scaled-space scatter) in cubemap reflection cameras; could possibly put together a PR if there was interest in such a feature/support)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe RPM / MAS cameras show visual errors with scatterer / \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E currently.\u00A0 I\u0027ve blindly poked at the problem with a sharp stick several times, but it keeps resurfacing.\u00A0 If this PR was general enough to work for non-cubemap-reflection cameras, I would be extremely happy.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-30T23:05:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223231970\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512081715\u0022 data-ipsquote-userid=\u002260950\u0022 data-ipsquote-username=\u0022MOARdV\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n15 minutes ago, MOARdV said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe RPM / MAS cameras show visual errors with scatterer / \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E currently.\u00A0 I\u0027ve blindly poked at the problem with a sharp stick several times, but it keeps resurfacing.\u00A0 If this PR was general enough to work for non-cubemap-reflection cameras, I would be extremely happy.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWell, currently if you give your camera the same name as the Texture Replacer camera -- it \u003Cs\u003Ewill\u003C/s\u003E \u003Cem\u003Eshould\u003C/em\u003E remove the visual artifacts ( name:\u00A0 TRReflectionCamera\u00A0 ).\u00A0 This is some code built-into Scatterer that disables the post-processing anytime a camera with that specific name is doing any rendering, and it works great so far from my interactions with it.\n\u003C/p\u003E\n\u003Cp\u003E\nBut it does this by disabling post processing for those cameras -- which, by its nature, precludes any potential to use the effects from that post-processing (god-ray-shadows, ocean surfaces, probably more I haven\u0027t poked at).\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003EIf \u003C/em\u003EI\u0027ve read the Scatterer code correctly -- it \u003Cem\u003Emight \u003C/em\u003Ebe possible to properly setup the post-processing effects so that they are applied to the cubemap/other cameras properly.\u00A0 I say -might-, because I\u0027m not sure how resource/computation the setup is for the different camera location/perspectives/frustum setups.\u00A0 Potentially it could be \u0027as simple\u0027 as pushing a camera location, orientation and near/far clip data into the post-processing setup.\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-12-01T00:23:43Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223231970\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512081715\u0022 data-ipsquote-userid=\u002260950\u0022 data-ipsquote-username=\u0022MOARdV\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, MOARdV said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003E[...snip...] problems with EVE\u003C/abbr\u003E currently.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThis is actually a second problem that I had to find a solution for -- \u003Cabbr title=\u0022Environmental Visual Enhancement (mod)\u0022\u003EEVE\u003C/abbr\u003E by default writes \u00270\u0027 into the alpha channel of anything underneath a \u0027cloud shadow\u0027.\u00A0 Basically you have to add a full-screen post-process filter to fix the alpha channel.\u00A0 -- \u003Ca href=\u0022https://github.com/shadowmage45/TexturesUnlimited/blob/master/CustomShaders/SSTU-SetAlpha.shader\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/shadowmage45/TexturesUnlimited/blob/master/CustomShaders/SSTU-SetAlpha.shader\u003C/a\u003E --\u00A0\u003Ca href=\u0022https://github.com/shadowmage45/TexturesUnlimited/blob/master/Plugin/SSTUTools/KSPShaderTools/Addon/ReflectionManager.cs#L265\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/shadowmage45/TexturesUnlimited/blob/master/Plugin/SSTUTools/KSPShaderTools/Addon/ReflectionManager.cs#L265\u003C/a\u003E --\u00A0 \u003Ca href=\u0022https://github.com/shadowmage45/TexturesUnlimited/blob/master/Plugin/SSTUTools/KSPShaderTools/Addon/ReflectionManager.cs#L756-L791\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/shadowmage45/TexturesUnlimited/blob/master/Plugin/SSTUTools/KSPShaderTools/Addon/ReflectionManager.cs#L756-L791\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n(Apologies for the semi-off-topic stuff....)\n\u003C/p\u003E\n"},{"CreatedByName":"Tynton","CreatedById":130307,"CreatedDateTime":"2017-12-01T05:22:02Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104258\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0022 rel=\u0022\u0022\u003E@blackrack\u003C/a\u003E I\u0027ve been trying to use some of JadeofMaar\u0027s lensflares for a mod that adds a number of new stars. Well what happened is that I ended up running out of RAM almost with only two stars after testing his lensflares. I\u0027m not certain entirely what is going wrong but I did use the stock scatterer lensflares without issue.\n\u003C/p\u003E\n"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-12-01T05:38:58Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223232233\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512105722\u0022 data-ipsquote-userid=\u0022130307\u0022 data-ipsquote-username=\u0022Tynton\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n17 minutes ago, Tynton said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022104258\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/104258-blackrack/\u0022 rel=\u0022\u0022\u003E@blackrack\u003C/a\u003E I\u0027ve been trying to use some of JadeofMaar\u0027s lensflares for a mod that adds a number of new stars. Well what happened is that I ended up running out of RAM almost with only two stars after testing his lensflares. I\u0027m not certain entirely what is going wrong but I did use the stock scatterer lensflares without issue.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHis textures are 5k textures. That may be an issue for your system. I would bring it up with \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167617-jadeofmaar/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022167617\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/167617-jadeofmaar/\u0022 rel=\u0022\u0022\u003E@JadeOfMaar\u003C/a\u003E on his thread. I would have logs ready so he can get a look at your specs\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-01T05:39:52Z\u0022 title=\u002212/01/2017 05:39  AM\u0022 data-short=\u00226 yr\u0022\u003EDecember 1, 2017\u003C/time\u003E by Galileo\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Tynton","CreatedById":130307,"CreatedDateTime":"2017-12-01T05:40:12Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/150430-galileo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022150430\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/150430-galileo/\u0022 rel=\u0022\u0022\u003E@Galileo\u003C/a\u003E I turned the resolution down to 1K, I was PM\u0027ing him about the issue and we decided to bring it up to blackrack.\n\u003C/p\u003E\n"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-12-01T05:41:20Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223232250\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512106812\u0022 data-ipsquote-userid=\u0022130307\u0022 data-ipsquote-username=\u0022Tynton\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nJust now, Tynton said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/150430-galileo/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022150430\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/150430-galileo/\u0022 rel=\u0022\u0022\u003E@Galileo\u003C/a\u003E I turned the resolution down to 1K, I was PM\u0027ing him about the issue and we decided to bring it up to blackrack.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAh wierd.. well I would have logs ready any way, just in case it\u2019s something easily identifiable in them\n\u003C/p\u003E\n"},{"CreatedByName":"Tynton","CreatedById":130307,"CreatedDateTime":"2017-12-01T05:48:58Z","Content":"\n\u003Cp\u003E\nLinks to output log and KSP log: \u003Ca href=\u0022https://www.dropbox.com/sh/ci6u0gqhwxd2i3b/AACjf47Tl8C9tAIAxYi_ulNFa?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/sh/ci6u0gqhwxd2i3b/AACjf47Tl8C9tAIAxYi_ulNFa?dl=0\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Agustin","CreatedById":172127,"CreatedDateTime":"2017-12-01T12:57:54Z","Content":"\n\u003Cp\u003E\ni have lots of these:\u003Cbr\u003E\n[EXC 18:15:14.273] NullReferenceException\u003Cbr\u003E\n\u00A0\u00A0 \u00A0scatterer.DisableEffectsForTextureReplacer.OnPreCull ()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.Camera:RenderToCubemap(RenderTexture, Int32)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0KSPShaderTools.ReflectionManager:renderCubeFace(RenderTexture, Int32, Vector3, Int32, Single, Single)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0KSPShaderTools.ReflectionManager:renderFace(RenderTexture, Int32, Vector3)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0KSPShaderTools.ReflectionManager:updateReflections(Boolean)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0KSPShaderTools.ReflectionManager:Update()\n\u003C/p\u003E\n\u003Cp\u003E\nKSP.log:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.dropbox.com/s/py8hy3j7hozherp/KSP%20LOG%20AGUSTIN.rar?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/py8hy3j7hozherp/KSP LOG AGUSTIN.rar?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u00221A4HGFv.png\u0022 class=\u0022ipsImage\u0022 height=\u0022576\u0022 src=\u0022https://i.imgur.com/1A4HGFv.png\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-01T13:00:15Z\u0022 title=\u002212/01/2017 01:00  PM\u0022 data-short=\u00226 yr\u0022\u003EDecember 1, 2017\u003C/time\u003E by Agustin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"maja","CreatedById":168379,"CreatedDateTime":"2017-12-01T13:20:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223232403\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512133074\u0022 data-ipsquote-userid=\u0022172127\u0022 data-ipsquote-username=\u0022Agustin\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, Agustin said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\ni have lots of these:\u003Cbr\u003E\n[EXC 18:15:14.273] NullReferenceException\u003Cbr\u003E\n\u00A0\u00A0 \u00A0scatterer.DisableEffectsForTextureReplacer.OnPreCull ()\u003Cbr\u003E\n\u00A0\u00A0 \u00A0UnityEngine.Camera:RenderToCubemap(RenderTexture, Int32)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0KSPShaderTools.ReflectionManager:renderCubeFace(RenderTexture, Int32, Vector3, Int32, Single, Single)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0KSPShaderTools.ReflectionManager:renderFace(RenderTexture, Int32, Vector3)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0KSPShaderTools.ReflectionManager:updateReflections(Boolean)\u003Cbr\u003E\n\u00A0\u00A0 \u00A0KSPShaderTools.ReflectionManager:Update()\n\u003C/p\u003E\n\u003Cp\u003E\nKSP.log:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.dropbox.com/s/py8hy3j7hozherp/KSP%20LOG%20AGUSTIN.rar?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/py8hy3j7hozherp/KSP LOG AGUSTIN.rar?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI see that you have TextureReplacerReplaced v0.5.1.0. Try to update to the latest version (v0.5.3) and if this isn\u0027t help, then try to narrow it to the lowest number of mods to replicate this exception. I have the latest scatterer, SVE and TRR and don\u0027t have this issue.\n\u003C/p\u003E\n"},{"CreatedByName":"Galileo","CreatedById":150430,"CreatedDateTime":"2017-12-01T15:52:58Z","Content":"\n\u003Cp\u003E\nAgustin, it may also be Texures Unlimited since it\u2019s deals with A LOT of reflections....\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-12-01T16:24:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223232500\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512143578\u0022 data-ipsquote-userid=\u0022150430\u0022 data-ipsquote-username=\u0022Galileo\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n21 minutes ago, Galileo said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAgustin, it may also be Texures Unlimited since it\u2019s deals with A LOT of reflections....\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nExcept that in this case the error is occurring from inside of Scatterer specific code, being called through standard Unity methods.\n\u003C/p\u003E\n\u003Cp\u003E\nSomething in the Scatterer code is not checking its references properly in that function ( \u00A0scatterer.DisableEffectsForTextureReplacer.OnPreCull ()\u00A0 ).\u00A0 It is not a function that TU is calling, but is one of the Unity callbacks that has been built into scatterer code, which Unity calls whenever any camera renders anything (I have zero control over that function from TU end of things).\u00A0 Nor is TU at any point touching anything in Scatterer ( there is no code-side interaction between the two ).\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027\u0027m more than happy to try and help track down \u003Cem\u003Ewhat\u003C/em\u003E is going on, but it is not something that \u003Cem\u003EI\u003C/em\u003E will be able to fix.\n\u003C/p\u003E\n"},{"CreatedByName":"Agustin","CreatedById":172127,"CreatedDateTime":"2017-12-01T16:36:24Z","Content":"\n\u003Cp\u003E\nI updated Texture Replacer Replaced and it still happens anyway. I\u0027ll try to do some testing and come back but I have this err logs for quite some time now... Sometimes it gets worse, sometimes it doesn\u0027t... Now I am playing and the ALT\u002BF12 windoes is full of red messages saying exception null reference.\n\u003C/p\u003E\n\u003Cp\u003E\nIn kspx64 folder there are these as well... This last time more than before...\n\u003C/p\u003E\n\u003Cp\u003E\nNullReferenceException\u003Cbr\u003E\n\u00A0 at (wrapper managed-to-native) UnityEngine.Renderer:set_enabled (bool)\u003Cbr\u003E\n\u00A0 at scatterer.DisableEffectsForTextureReplacer.OnPreCull () [0x00000] in \u0026lt;filename unknown\u0026gt;:0\u003Cbr\u003E\nUnityEngine.Camera:Internal_RenderToCubemapRT(RenderTexture, Int32)\u003Cbr\u003E\nUnityEngine.Camera:RenderToCubemap(RenderTexture, Int32)\u003Cbr\u003E\nKSPShaderTools.ReflectionManager:renderCubeFace(RenderTexture, Int32, Vector3, Int32, Single, Single)\u003Cbr\u003E\nKSPShaderTools.ReflectionManager:renderFace(RenderTexture, Int32, Vector3)\u003Cbr\u003E\nKSPShaderTools.ReflectionManager:updateReflections(Boolean)\u003Cbr\u003E\nKSPShaderTools.ReflectionManager:Update()\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\n(Filename:\u00A0 Line: -1)\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-01T16:41:39Z\u0022 title=\u002212/01/2017 04:41  PM\u0022 data-short=\u00226 yr\u0022\u003EDecember 1, 2017\u003C/time\u003E by Agustin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"maja","CreatedById":168379,"CreatedDateTime":"2017-12-01T16:59:56Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156145-augustin/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022156145\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156145-augustin/\u0022 rel=\u0022\u0022\u003E@Augustin\u003C/a\u003E\u00A0narrow it down to least amount of mods needed to reproduce this error. It will help track down this bug.\n\u003C/p\u003E\n"},{"CreatedByName":"Agustin","CreatedById":172127,"CreatedDateTime":"2017-12-01T18:16:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223232556\u0022 data-ipsquote-contentid=\u0022103963\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221512147596\u0022 data-ipsquote-userid=\u0022168379\u0022 data-ipsquote-username=\u0022maja\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, maja said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156145-augustin/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022156145\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/156145-augustin/\u0022 rel=\u0022\u0022\u003E@Augustin\u003C/a\u003E\u00A0narrow it down to least amount of mods needed to reproduce this error. It will help track down this bug.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI am trying but it\u0027s difficult. Recently I launched a rocket and everything was okay. Then I reverted to the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E and launched again, and full of constant nullreference messages. I reverted back and launched again(exact thing I did before, seconds after launchnig) and the errors were not there anymore. Maybe I am in space and it starts to happen again with no aparent reason...\n\u003C/p\u003E\n\u003Cp\u003E\nNext time it happens I will save and try to make it reproducable or something\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-01T18:46:30Z\u0022 title=\u002212/01/2017 06:46  PM\u0022 data-short=\u00226 yr\u0022\u003EDecember 1, 2017\u003C/time\u003E by Agustin\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-12-01T19:17:37Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/172127-agustin/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022172127\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/172127-agustin/\u0022 rel=\u0022\u0022\u003E@Agustin\u003C/a\u003E The error is not caused by TextureReplacer, but is being triggered by TexturesUnlimited; the code with the error would \u003Cem\u003Eappear\u003C/em\u003E to be in the Scatterer code that disables scatterer for reflection cameras\u00A0 (I say \u003Cem\u003Eappear\u003C/em\u003E, as sometimes the root cause of a problem can be not what it would seem).\u00A0 The solution will likely have to come on the Scatterer end of things, though I won\u0027t know more until I can setup the Scatterer repo/build environment and dig in for some testing.\n\u003C/p\u003E\n\u003Cp\u003E\n(I am quite curious why I have not seen any of these problems during my debug/testing?\u00A0 Are you using DX9 by chance? )\n\u003C/p\u003E\n"}]}