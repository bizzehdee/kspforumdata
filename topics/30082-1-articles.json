{"TopicId":30082,"ForumId":50,"TopicTitle":"Adjusting ASAS PID Values...","CreatedByName":"Reblet","CreatedById":64545,"CreatedDateTime":"2013-05-29T20:44:26Z","PageNum":1,"Articles":[{"CreatedByName":"Reblet","CreatedById":64545,"CreatedDateTime":"2013-05-29T20:44:26Z","Content":"\n\u003Cp\u003E... otherwise known as defeating ASAS wobbly-wob of death.\u003C/p\u003E\u003Cp\u003EAlthough I\u0027ve only been building KSP rockets for a short while, I\u0027ve already noticed that ASAS, while very useful for keeping a rocket pointing approximately straight up, does have a tendency to... overcorrect. Even with smaller rockets using gimballed engines there\u0027s a distinct wobble and the mainsail can make some rockets look more like snakes. I\u0027m sure most players will recognise this. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003ENow, I decided to tune the ASAS PID values a bit and came up with the following:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EKi = 0.015\u003Cbr\u003EKp = 0.075\u003Cbr\u003EKd = 0.015\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThis is pretty different from the default values:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003EKi = 1\u003Cbr\u003EKp = 0.6\u003Cbr\u003EKd = 1\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EEven so, this modified ASAS was able to take my Alpha II rocket (about 50 tonnes, pictures below) straight up, without any significant wobble. Even after unbalancing the rocket with a few RCS tanks one side, the modified ASAS took her pretty much straight up. An added bonus of the low ASAS strength is that you can \u0027push through\u0027 the controls for minor course corrections with ASAS enabled.\u003C/p\u003E\u003Cp\u003EUnfortunately, according to the wiki, the ASAS input is angular momentum, which makes the optimal PID values dependent on the (distribution of) mass in the rocket. Thus, there are currently no single optimal set of values; however my values should provide a useful starting point for optimising ASAS for your particular rocket. Probably, lighter/smaller rockets should have higher PID values (with Kp being the most important parameter), whereas bigger ones should have lower ones, but more experimentation is needed. If you find some good PID values for your craft, please share.\u003C/p\u003E\u003Cp\u003EPerhaps one of the devs reading this can clarify why they chose to use angular momentum, rather than angular velocity? I think if angular velocity is the input for the controller, it should be possible to come up with a set of PID values that gives stable (not wobbly) behaviour for a very broad range of craft.\u003C/p\u003E\u003Cp\u003EAs promised, some pictures:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://streps.home.xs4all.nl/ksp/asaspids/asaspids1.jpg\u0022 alt=\u0022asaspids1.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EStats for the test craft.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://streps.home.xs4all.nl/ksp/asaspids/asaspids2.jpg\u0022 alt=\u0022asaspids2.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EUnsurprisingly, turning off ASAS for an unbalanced rocket doesn\u0027t end well.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://streps.home.xs4all.nl/ksp/asaspids/asaspids3.jpg\u0022 alt=\u0022asaspids3.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EWith the modified ASAS, the rocket keeps pretty much pointing straight up. The pitch control stays stable at about -5/8, to counteract the unbalance in the rocket. With the normal ASAS, the pitch would swing back and forth wildly.\u003C/p\u003E\u003Cp\u003EThank you for reading and may your rockets launch straight up, without wobble!\u003C/p\u003E\u003Cp\u003EDisclaimer: No Kerbals were harmed in the production of this post.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-05-29T20:45:47Z\u0022 title=\u002205/29/2013 08:45  PM\u0022 data-short=\u002211 yr\u0022\u003EMay 29, 2013\u003C/time\u003E by Reblet\u003C/strong\u003E\n\u003Cbr\u003Etypo\n\u003C/span\u003E\n"},{"CreatedByName":"destroyer2012","CreatedById":53884,"CreatedDateTime":"2013-05-29T20:52:47Z","Content":"\n\u003Cp\u003EVery cool. I will def try out these PID values and see if they make my rockets less wobbly, thanks for the effort!\u003C/p\u003E\n"},{"CreatedByName":"dagothar","CreatedById":66759,"CreatedDateTime":"2013-05-29T22:14:39Z","Content":"\n\u003Cp\u003EThis is pretty interesting, I haven\u0027t yet got to editing part configurations and didn\u0027t realize you can adjust PID gains. I\u0027d really need to read in on how it was implemented in KSP. \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/SAS\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/SAS\u003C/a\u003E seems to say the input is angular velocity and not momentum.\u003C/p\u003E\n"},{"CreatedByName":"Reblet","CreatedById":64545,"CreatedDateTime":"2013-05-29T23:17:13Z","Content":"\n\u003Cp\u003EInteresting.\u003C/p\u003E\u003Cp\u003EAccording to \u003Ca href=\u0022http://wiki.kerbalspaceprogram.com/wiki/Advanced_S.A.S._Module\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://wiki.kerbalspaceprogram.com/wiki/Advanced_S.A.S._Module\u003C/a\u003E it is angular momentum. The page on the normal S.A.S. module also states: \u003Cem\u003E0.11.0 (undocumented) SAS now use angular momentum instead of angular velocity - takes into account inertia momentum of the ship.\u003C/em\u003E This suggests that an early version did, in fact, use angular velocity, but this was changed in 0.11.0.\u003C/p\u003E\u003Cp\u003EI just tested with a very small ship and there the PID values from the standard ASAS do give a stable output, which suggests the input is indeed angular momentum.\u003C/p\u003E\n"},{"CreatedByName":"PakledHostage","CreatedById":8059,"CreatedDateTime":"2013-05-29T23:33:31Z","Content":"\n\u003Cp\u003ESquad had mentioned at one point that they were planning to make SAS and ASAS gains tweakable. The announcement was probably on one of the pages that was eaten by the Kraken...\u003C/p\u003E\n"},{"CreatedByName":"Behemoth1702","CreatedById":111620,"CreatedDateTime":"2014-12-27T05:27:37Z","Content":"\n\u003Cp\u003EHello guys,\u003C/p\u003E\u003Cp\u003EI am looking for information on what these values mean, how the affect the SAS systems. Where can I read up on the definitions of:\u003C/p\u003E\u003Cp\u003EKp\u003C/p\u003E\u003Cp\u003EKi\u003C/p\u003E\u003Cp\u003EKd\u003C/p\u003E\u003Cp\u003EAnd maybe even:\u003C/p\u003E\u003Cp\u003EScalar\u003C/p\u003E\u003Cp\u003EI Clamp Lower\u003C/p\u003E\u003Cp\u003EI Clamp Upper\u003C/p\u003E\u003Cp\u003E(from pilot assistant mod).\u003C/p\u003E\u003Cp\u003EGoogle keeps redirecting me to these forums but I might be blind or something. :-/\u003C/p\u003E\u003Cp\u003EThanks in advance!\u003C/p\u003E\u003Cp\u003EAnswers have been found:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/100073-0-90-Pilot-Assistant-Atmospheric-piloting-aids-0-9-6-0-%28Dec-20%29?p=1631866#post1631866\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://forum.kerbalspaceprogram.com/threads/100073-0-90-Pilot-Assistant-Atmospheric-piloting-aids-0-9-6-0-%28Dec-20%29?p=1631866#post1631866\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222014-12-27T06:54:26Z\u0022 title=\u002212/27/2014 06:54  AM\u0022 data-short=\u00229 yr\u0022\u003EDecember 27, 2014\u003C/time\u003E by Behemoth1702\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"rkman","CreatedById":15721,"CreatedDateTime":"2015-01-02T15:29:35Z","Content":"\n\u003Cp\u003EPID values used to be in the part cfg\u0027s with ModuleSAS, but they are no longer there since 0.90.\u003C/p\u003E\u003Cp\u003EAlso now that Kerbal pilots perform (A)SAS functions, i suppose tuning their PID is not possible in stock. Those PID values might even be linked to Kerbal\u0027s character traits.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-01-02T15:31:55Z\u0022 title=\u002201/02/2015 03:31  PM\u0022 data-short=\u00229 yr\u0022\u003EJanuary 2, 2015\u003C/time\u003E by rkman\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-01-02T15:37:15Z","Content":"\n\u003Cp\u003EReblet, that post is from May 2013, those values were exposed in the part.cfg files at that time, but they are now in the module for SAS which is not so easily edited by the player.\u003C/p\u003E\u003Cp\u003EYou can learn more about PID controllers \u003Ca href=\u0022https://en.wikipedia.org/wiki/PID_controller\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003Ehere\u003C/strong\u003E\u003C/a\u003E, unfortunately to use them you would have needed Regex\u0027s PID tuner which is no longer available.\u003C/p\u003E\u003Cp\u003EThe tuner probably won\u0027t work on the 0.90.0 module anyway as it was changed to include the SAS hold modes.\u003C/p\u003E\n"}]}