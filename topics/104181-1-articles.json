{"TopicId":104181,"ForumId":29,"TopicTitle":"Rotating a vector by another vector","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T14:48:42Z","PageNum":1,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T14:48:42Z","Content":"My algebra is rusty as hell, basically I have two 3-dimensional vectors and I want to rotate one of them by the angle(s) the other one is rotated. For example, in this image, I want to rotate the orange vector by the blue vector.\n\n![1yBlrr3.png](http://i.imgur.com/1yBlrr3.png)\n\nHow do I do this without computing calculating costly trigonometrics every frame? I know you have to use a matrix or quaternion but both are confusing to me."},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-15T15:00:46Z","Content":"green = Quaternion.AngleAxis(180, blue) \\* orange\n\nWhich mean rotate orange by 180\u00C3\u201A\u00C2\u00B0 arround the blue vector.\n\nAnd yes, this is using a quaternion because that\u0027s how you rotate stuff without \u0022costly trigonometrics every frame?\u0022\n\n**Edited \u003Ctime datetime=\u00222015-04-15T15:03:48Z\u0022 title=\u002204/15/2015 03:03  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 15, 2015\u003C/time\u003E by sarbian**"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T15:15:58Z","Content":"\u003E \n\u003E green = Quaternion.AngleAxis(180, blue) \\* orange\n\u003E Which mean rotate orange by 180\u00C3\u201A\u00C2\u00B0 arround the blue vector.\n\u003E \n\u003E And yes, this is using a quaternion because that\u0027s how you rotate stuff without \u0022costly trigonometrics every frame?\u0022\n\nI\u0027m not sure this is correct, I don\u0027t get the 180 degrees part, I\u0027m trying to rotate the orange vector around the z-axis by the angle between the blue vector and the black line.\n\nAlso, can I do this in a shader?\n\nEdit: Oh wait wait, you\u0027re correct, anyway, how to do it in CG?\n\n**Edited \u003Ctime datetime=\u00222015-04-15T15:20:29Z\u0022 title=\u002204/15/2015 03:20  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 15, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-15T15:32:43Z","Content":"What I gave work for the example but it may not me what you are looking for.\n\nFirst let me state that what you ask is not really precise. Your example is obviously in 2D so I can only assume that your vector are in the same plane.\n\nTo get the angle between Orange and blue : \n\nangle = Quaternion.Angle(orange, blue)\n\nTo get the axis you are turning around ( you called it Z so it may be just equal to Vector.front but I\u0027ll calculate it anyway) \n\naxis = Vector3.Cross(orange, blue)\n\nTo get green :\n\ngreen = Quaternion.AngleAxis(angle, axis) \\* orange\n\nAs for the shader part : no idea. I am bad at shader ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T15:47:49Z","Content":"\u003E \n\u003E What I gave work for the example but it may not me what you are looking for.\n\u003E First let me state that what you ask is not really precise. Your example is obviously in 2D so I can only assume that your vector are in the same plane.\n\u003E \n\u003E To get the angle between Orange and blue : \n\u003E \n\u003E angle = Quaternion.Angle(orange, blue)\n\u003E \n\u003E To get the axis you are turning around ( you called it Z so it may be just equal to Vector.front but I\u0027ll calculate it anyway) \n\u003E \n\u003E axis = Vector3.Cross(orange, blue)\n\u003E \n\u003E To get green :\n\u003E \n\u003E green = Quaternion.AngleAxis(angle, axis) \\* orange\n\u003E \n\u003E As for the shader part : no idea. I am bad at shader ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nWell it\u0027s hard to explain without making a 2d analogy but let\u0027s just say I have 3 vectors A, B and C in three dimensional space.\n\nVector A and B are in a random orientation in space. Vector C has a known orientation relative to vector A. I want to find vector C\u0027 such as C\u0027 has the same relative orientation to B, that C has to A. Does this make sense?\n\nIn the example I posted, vector A would be the black line if it was a vector pointing up, vector B would be blue, vector C would be orange and C\u0027 would be green.\n\nThe way I understand it now, I think I have to create a quaternion from vector A to vector B, then multiply it by C.\n\nBasically, C\u0027=C\\* Quaternion.SetFromToRotation (A,![B)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png)\n\nSomeone correct me if I\u0027m wrong.\n\n**Edited \u003Ctime datetime=\u00222015-04-15T16:33:26Z\u0022 title=\u002204/15/2015 04:33  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 15, 2015\u003C/time\u003E by blackrack**"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-15T17:41:26Z","Content":"Yes, it looks like what you want."},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T18:33:29Z","Content":"Thanks a lot."},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2015-04-15T18:43:30Z","Content":"\u003E \n\u003E Your example is obviously in 2D so I can only assume that your vector are in the same plane.\n\nI think it\u0027s safe to assume that \u0022the rotation takes place in the plane that contains both vectors A and B\u0022 making this automatically a rotation in a two-dimensional plane (but not necesarilly and in fact highly unlikely, a plane perpendicular to the x, y or z-axis.)"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-16T08:15:49Z","Content":"And you point is ? The code I posted does just that. Without that assumption there is an infinite number of vector where the angle between blue and green is the same as green and orange."},{"CreatedByName":"ratchet freak","CreatedById":119895,"CreatedDateTime":"2015-04-16T10:21:49Z","Content":"You want to reflect orange on the plane with normal blue?\n\n-orange \u002B2\\*orange\\*dot(orange, blue)"}]}