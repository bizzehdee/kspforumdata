{"TopicId":104181,"ForumId":29,"TopicTitle":"Rotating a vector by another vector","CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T14:48:42Z","PageNum":1,"Articles":[{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T14:48:42Z","Content":"\n\u003Cp\u003EMy algebra is rusty as hell, basically I have two 3-dimensional vectors and I want to rotate one of them by the angle(s) the other one is rotated. For example, in this image, I want to rotate the orange vector by the blue vector.\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/1yBlrr3.png\u0022 alt=\u00221yBlrr3.png\u0022\u003E\u003C/p\u003E\u003Cp\u003EHow do I do this without computing calculating costly trigonometrics every frame? I know you have to use a matrix or quaternion but both are confusing to me.\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-15T15:00:46Z","Content":"\n\u003Cp\u003Egreen = Quaternion.AngleAxis(180, blue) * orange\u003C/p\u003E\u003Cp\u003EWhich mean rotate orange by 180\u00C3\u201A\u00C2\u00B0 arround the blue vector.\u003C/p\u003E\u003Cp\u003EAnd yes, this is using a quaternion because that\u0027s how you rotate stuff without \u0022costly trigonometrics every frame?\u0022\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-15T15:03:48Z\u0022 title=\u002204/15/2015 03:03  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 15, 2015\u003C/time\u003E by sarbian\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T15:15:58Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003Egreen = Quaternion.AngleAxis(180, blue) * orange\u003Cp\u003EWhich mean rotate orange by 180\u00C3\u201A\u00C2\u00B0 arround the blue vector.\u003C/p\u003E\u003Cp\u003EAnd yes, this is using a quaternion because that\u0027s how you rotate stuff without \u0022costly trigonometrics every frame?\u0022\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m not sure this is correct, I don\u0027t get the 180 degrees part, I\u0027m trying to rotate the orange vector around the z-axis by the angle between the blue vector and the black line.\u003C/p\u003E\u003Cp\u003EAlso, can I do this in a shader?\u003C/p\u003E\u003Cp\u003EEdit: Oh wait wait, you\u0027re correct, anyway, how to do it in CG?\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-15T15:20:29Z\u0022 title=\u002204/15/2015 03:20  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 15, 2015\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-15T15:32:43Z","Content":"\n\u003Cp\u003EWhat I gave work for the example but it may not me what you are looking for.\u003C/p\u003E\u003Cp\u003EFirst let me state that what you ask is not really precise. Your example is obviously in 2D so I can only assume that your vector are in the same plane.\u003C/p\u003E\u003Cp\u003ETo get the angle between Orange and blue : \u003C/p\u003E\u003Cp\u003Eangle = Quaternion.Angle(orange, blue)\u003C/p\u003E\u003Cp\u003ETo get the axis you are turning around ( you called it Z so it may be just equal to Vector.front but I\u0027ll calculate it anyway) \u003C/p\u003E\u003Cp\u003Eaxis = Vector3.Cross(orange, blue)\u003C/p\u003E\u003Cp\u003ETo get green :\u003C/p\u003E\u003Cp\u003Egreen = Quaternion.AngleAxis(angle, axis) * orange\u003C/p\u003E\u003Cp\u003EAs for the shader part : no idea. I am bad at shader \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T15:47:49Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EWhat I gave work for the example but it may not me what you are looking for.\u003Cp\u003EFirst let me state that what you ask is not really precise. Your example is obviously in 2D so I can only assume that your vector are in the same plane.\u003C/p\u003E\u003Cp\u003ETo get the angle between Orange and blue : \u003C/p\u003E\u003Cp\u003Eangle = Quaternion.Angle(orange, blue)\u003C/p\u003E\u003Cp\u003ETo get the axis you are turning around ( you called it Z so it may be just equal to Vector.front but I\u0027ll calculate it anyway) \u003C/p\u003E\u003Cp\u003Eaxis = Vector3.Cross(orange, blue)\u003C/p\u003E\u003Cp\u003ETo get green :\u003C/p\u003E\u003Cp\u003Egreen = Quaternion.AngleAxis(angle, axis) * orange\u003C/p\u003E\u003Cp\u003EAs for the shader part : no idea. I am bad at shader \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell it\u0027s hard to explain without making a 2d analogy but let\u0027s just say I have 3 vectors A, B and C in three dimensional space.\u003C/p\u003E\u003Cp\u003EVector A and B are in a random orientation in space. Vector C has a known orientation relative to vector A. I want to find vector C\u0027 such as C\u0027 has the same relative orientation to B, that C has to A. Does this make sense?\u003C/p\u003E\u003Cp\u003EIn the example I posted, vector A would be the black line if it was a vector pointing up, vector B would be blue, vector C would be orange and C\u0027 would be green.\u003C/p\u003E\u003Cp\u003EThe way I understand it now, I think I have to create a quaternion from vector A to vector B, then multiply it by C.\u003C/p\u003E\u003Cp\u003EBasically, C\u0027=C* Quaternion.SetFromToRotation (A,\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_cool.png\u0022 alt=\u0022B)\u0022\u003E\u003C/p\u003E\u003Cp\u003ESomeone correct me if I\u0027m wrong.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-15T16:33:26Z\u0022 title=\u002204/15/2015 04:33  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 15, 2015\u003C/time\u003E by blackrack\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-15T17:41:26Z","Content":"\n\u003Cp\u003EYes, it looks like what you want.\u003C/p\u003E\n"},{"CreatedByName":"blackrack","CreatedById":104258,"CreatedDateTime":"2015-04-15T18:33:29Z","Content":"\n\u003Cp\u003EThanks a lot.\u003C/p\u003E\n"},{"CreatedByName":"Kerbart","CreatedById":78303,"CreatedDateTime":"2015-04-15T18:43:30Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sarbian\u0022 data-cite=\u0022sarbian\u0022\u003E\u003Cdiv\u003EYour example is obviously in 2D so I can only assume that your vector are in the same plane.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI think it\u0027s safe to assume that \u0022the rotation takes place in the plane that contains both vectors A and B\u0022 making this automatically a rotation in a two-dimensional plane (but not necesarilly and in fact highly unlikely, a plane perpendicular to the x, y or z-axis.)\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2015-04-16T08:15:49Z","Content":"\n\u003Cp\u003EAnd you point is ? The code I posted does just that. Without that assumption there is an infinite number of vector where the angle between blue and green is the same as green and orange.\u003C/p\u003E\n"},{"CreatedByName":"ratchet freak","CreatedById":119895,"CreatedDateTime":"2015-04-16T10:21:49Z","Content":"\n\u003Cp\u003EYou want to reflect orange on the plane with normal blue?\u003C/p\u003E\u003Cp\u003E-orange \u002B2*orange*dot(orange, blue)\u003C/p\u003E\n"}]}