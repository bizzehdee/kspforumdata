{"TopicId":217745,"ForumId":120,"TopicTitle":"Suggestion: Natural frequencies might be the cause of a lot of unwanted rocket \u0026quot;wobble\u0026quot;, and ideas on how to reduce the wobblieness","CreatedByName":"Skitles","CreatedById":229461,"CreatedDateTime":"2023-06-17T17:38:20Z","PageNum":1,"Articles":[{"CreatedByName":"Skitles","CreatedById":229461,"CreatedDateTime":"2023-06-17T17:38:20Z","Content":"\n\u003Cp\u003E\nHi!\n\u003C/p\u003E\n\u003Cp\u003E\nI have had this thought bubbling in me for a while now, and feel like it might be worth sharing if it can help the development in any way.\u003Cbr\u003E\nI could also be completely wrong about everything, but i think it is worth a shot \u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:18px;\u0022\u003E\u003Cstrong\u003EShort summary: (TL;DR)\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI believe a lot of the wobbliness of the rockets are currently caused by the Kerbals over-steering the rockets at one of the rockets natural frequencies, constantly increasing the wobble with the engines.\n\u003C/p\u003E\n\u003Cp\u003E\nMy ideas for potential fixes is to help mitigate the wobble, assuming that a solid-mechanics type FEM solver is used behind the scenes and the more detailed suggestions come from a place of \u0022Why would a FEM model do this?\u0022 and how can I change the model to help the solver find a stable result.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003ESilly example:\u003C/em\u003E\u003Cbr\u003E\nThink about a play-ground swing, you use your legs to build momentum to get you higher and higher up.\u003Cbr\u003E\nKerbals are likely doing the same thing, but instead of doing it at a playground Jeb has decided to try it with the Saturn V using its rocket engines instead.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003EPotential fixes: \u003Cspan style=\u0022color:#c0392b;\u0022\u003E(None of it is an easy quick-fix)\u003C/span\u003E\u003Cbr\u003E\nA: Tell the Kerbals to stop playing around with the rockets making them flop about, its only funny the first couple of times.\u003C/em\u003E\u003Cbr\u003E\n\u003Cem\u003EB: Slap some dampening on the joints / system to help reduce the impact of natural frequencies\u003C/em\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:18px;\u0022\u003E\u003Cstrong\u003EHow to reproduce / check this theory:\u003C/strong\u003E\u003C/span\u003E\u003Cbr\u003E\nBuild a long and fairly thin rocket, with a lot of engines that can gimbal, and have a high \u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003E\u003Cabbr title=\u0022Thrust-to-weight ratio\u0022\u003ETWR\u003C/abbr\u003E\u003C/abbr\u003E.\u003Cbr\u003E\nYou might be OK while in the thick atmosphere, as that helps to stabilize the rocket, but when the atmosphere decreases, the rocket starts to wobble.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you somehow still manage to get a rocket to be stable you can reduce the stability by increasing the weight on the top part of the rocket where the command pod is.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003E\u003Cstrong\u003EWhat happens:\u003C/strong\u003E\u003C/em\u003E\u003Cbr\u003E\nSince the rocket is controlled from the command pod at the top, and the thrust/corrections are added to the bottom, there will be a slight delay between the engines gimbaling to adjust the direction and for the command pod to actually start to change direction.\n\u003C/p\u003E\n\u003Cp\u003E\nBy the time the command pod has achieved the wanted adjustment, the bottom part of the rocket has over-corrected, and sends the command pod in the opposite direction from where it wanted to be, so the \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003E\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E\u003C/abbr\u003E gimbals the engines back in the other direction, which ends up also being over-corrected, and as it repeats this pattern over and over, the rocket incrementally starts to wobble more and more as each cycle adds more energy into the wobble.\n\u003C/p\u003E\n\u003Cp\u003E\nThe frequency of the over-correction cycle is likely going to be the rockets natural frequency.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003E\u003Cstrong\u003EHow to stop the rocket flopping without adding rigidity / struts:\u003C/strong\u003E\u003C/em\u003E\u003Cbr\u003E\n\u003Cspan style=\u0022font-size:12px;\u0022\u003E(or at least reduce the scale of the flopping) \u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nReduce the amount of possible gimbal on the engines.\u003Cbr\u003E\nIt makes it harder to change trajectory early in the flight with only a tiny bit of engine gimbal, but it is much harder for the \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003E\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E\u003C/abbr\u003E to over-correct its adjustments that cause the wobble mentioned above.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003EExample:\u003C/em\u003E\u003Cbr\u003E\nIn KSP1 if i need to launch a massive, enormous rocket, use a singe Rhino engine with less than 50% allowed gimbal, together with 8-16 Vector engines that are not allowed to gimble at all per booster \u0026amp;/or 1st stage.\u003Cbr\u003E\nThis usually solves most of the wobble from launching a rocket until it gets to orbit.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003E\u003Cstrong\u003Enote about planes:\u003C/strong\u003E\u003C/em\u003E\u003Cbr\u003E\nThe wobble that happens with flying planes is likely caused by the same reason, but the over-correcting is done with elevons instead of the engines.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:12px;\u0022\u003E\u003Cspan style=\u0022color:#f39c12;\u0022\u003E\u003Cem\u003ESide-note about the solid mechanics aspects of this concerning joint rigidity\u003C/em\u003E\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\n\u003Cspan style=\u0022font-size:11px;\u0022\u003ESince the natural frequency is calculated as bellow:\u003Cbr\u003E\n\u003Cem\u003Ef=1/(2\u03C0)\u00D7\u221A(k/m)\u003C/em\u003E\u003Cbr\u003E\n\u003Cem\u003E\u003Cstrong\u003Em\u003C/strong\u003E\u003C/em\u003E = mass, and \u003Cem\u003E\u003Cstrong\u003Ek\u003C/strong\u003E\u003C/em\u003E = the stiffness of the vehicle. (simplified)\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:11px;\u0022\u003EIncreasing the stiffness (joint rigidity) is not going to stop this from happening, it is just slightly going to increase the frequency that it happens on.\u003Cbr\u003E\nThe increased stiffness is going to help slightly by increasing the energy required to over-steer the engines, but it does not solve problem.\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:18px;\u0022\u003E\u003Cstrong\u003EPotential fixes:\u003C/strong\u003E\u003C/span\u003E\u003Cbr\u003E\n\u003Cspan style=\u0022color:#c0392b;\u0022\u003E\u003Cem\u003EThe proposed fixes are not an easy quick-fix, and use FEM solvers or physics that might not exist in the game currently\u003C/em\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cem\u003EA: Tell the Kerbals to stop playing around with the rockets\u003C/em\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe first and the \u0022easier\u0022 of the possible solutions is to figure out the natural frequencies (eigenfrequencies) of any given vehicle before launch using the vehicles stiffness matrix in a modal analysis before launch.\u003Cbr\u003E\nOnce the natural frequencies are found before launch, tell the \u003Cabbr title=\u0022Stability Augmentation System\u0022\u003E\u003Cabbr title=\u0022Stability Augmentation System\u0022\u003ESAS\u003C/abbr\u003E\u003C/abbr\u003E to stay clear of correcting the vehicle around those frequencies.\n\u003C/p\u003E\n\u003Cp\u003E\nAdded difficulty here is that as the fuel drains, the weight changes, and the natural frequencies also change, so that needs to be considered.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cem\u003EB: Slap some dampening on them joints\u003C/em\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe wobble as mentioned above could be caused because the stiffness matrix of a vehicle has no dampening. Meaning that all energy added into the vehicle is stored in springs, and there is little or nothing absorbing the energy apart from time, \u003Cabbr title=\u0022Reaction Control System\u0022\u003E\u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E\u003C/abbr\u003E and friction from an atmosphere.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cem\u003EExample:\u003C/em\u003E\u003Cbr\u003E\nThink about the suspension in a car. Today\u0027s cars have both a shock absorber (damper) and a spring, so when you drive over a bump, any wobble / vibrations caused by the bump is taken up by the shock absorber so the car ride feels smooth.\u003Cbr\u003E\nCompare that to an old car (preferably with a leaf-spring suspension) driving over a bump would cause the car to bump up and down for a bit making the experience rougher.\n\u003C/p\u003E\n\u003Cp\u003E\nIf there is no dampening considered in the stiffness matrix of the vehicle, the vehicles are going to react like an old car but worse, in the example given above.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe downside to adding dampers to the joints is that it will make the physics simulation more complex and a lot harder to converge / find a \u0022good enough\u0022 result, leading to each calculation taking more time, causing even worse FPS, so it is a give and take type solution.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003EWell done on actually reading this entire thing?!\u003C/span\u003E\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nIt ended up being much longer than I anticipated, but I hope I managed to get the general idea across.\u003Cbr\u003E\nIf nothing else, I hope it was an interesting read and not just a waste of your time \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003E\u003Cspan style=\u0022font-size:18px;\u0022\u003EReference:\u003C/span\u003E\u003C/strong\u003E\u003Cbr\u003E\nPretty good summary on the general topic on Wikipedia:\u003Cbr\u003E\n\u003Ca href=\u0022https://en.wikipedia.org/wiki/Modal_analysis_using_FEM\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Modal_analysis_using_FEM\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222023-06-17T22:38:21Z\u0022 title=\u002206/17/2023 10:38  PM\u0022 data-short=\u00221 yr\u0022\u003EJune 17, 2023\u003C/time\u003E by Skitles\u003C/strong\u003E\n\u003Cbr\u003EChanged title a bit\n\u003C/span\u003E\n"},{"CreatedByName":"mattihase","CreatedById":73161,"CreatedDateTime":"2023-06-26T13:25:03Z","Content":"\n\u003Cp\u003E\ndepending on how close the joints are in ksp to stock unity joints, there should be a dampener option in there. Though it\u0027s a pain to get just right.\n\u003C/p\u003E\n"}]}