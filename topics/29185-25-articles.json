{"TopicId":29185,"ForumId":34,"TopicTitle":"[0.20] Modular Fuel System 1.3/realistic fuels, reconfigurable fuel tanks and engines","CreatedByName":"ialdabaoth","CreatedById":57270,"CreatedDateTime":"2013-05-26T01:00:23Z","PageNum":25,"Articles":[{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-10-07T00:55:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003Eok, my dropbox link for MFS is updated.\u003Cp\u003EChanges to MFS source:\u003C/p\u003E\u003Cp\u003E1. Fixed bug with amount/maxAmount. amount now acts as ratio of maxAmount, with full = 1.0. Clamp to 0 if tank is not fillable.\u003C/p\u003E\u003Cp\u003E2. Added support for ElectricCharge where 1 unit volume = 100 units charge.\u003C/p\u003E\u003Cp\u003E3. Added support for parts that have both modular fuel tanks AND modular engine configs. Note that it\u0027s still at most ONE of each.\u003C/p\u003E\u003Cp\u003E4. Allow basemass to be set in part module definitions, not just in tank definition. (For instance, Oscar-B\u0027s can be less efficient)\u003C/p\u003E\u003Cp\u003E5. Allow part mass changes to be disabled by setting basemass = -1 (used for parts that combine tank and engine like Bobcat\u0027s stages, where you don\u0027t want the mass to be changed by fuel tank changes).\u003C/p\u003E\u003Cp\u003E6. Add support for fuel-specific TANK overrides in part module definitions. In a ModularFuelTank module, you can add the same TANK{} blocks you would in a TANK_DEFINITION{} and they will override what\u0027s pulled from the appropriate TANK_DEFINITION. You can add as many or as few keys to the TANK{} as you want; unspecified keys will be pulled from the default.\u003C/p\u003E\u003Cp\u003EIn configs, I added a new TANK_DEFINITION, ServiceModule. It contains LF/Ox (or NTO/MMH in RealFuels mode), some monopropellant, and a bit of ElectricCharge.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EFascinating! What sort of mass are you assigning a unit volume worth of batteries? (ElectricCharge)\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-07T01:00:40Z","Content":"\n\u003Cp\u003EThe right amount \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif\u0022 alt=\u0022:P\u0022\u003E\u003C/p\u003E\u003Cp\u003EIf my calculations are correct 100 units of charge should mass (basemass \u002B fueltypemass) 0.005, just what the 100-unit battery does.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-07T01:12:49Z","Content":"\n\u003Cp\u003EApologies. Typo on the mass for the realfuels version of electric charge. Should be 4875, not 4375 like in the regular version (because SM basemass in RF mode goes down from 625 to 125). Will fix asap.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-07T01:37:50Z","Content":"\n\u003Cp\u003EFixed.\u003C/p\u003E\u003Cp\u003EI should point out the main reason I did the amount fix, at least, and added the SM tank, was so that life support resources (and life support _waste_ resources) could be handled by MFS. I have a MFS-based TAC config if anyone wants that too.\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-10-07T01:56:29Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022NathanKell\u0022 data-cite=\u0022NathanKell\u0022\u003E\u003Cdiv\u003EFixed.\u003Cp\u003EI should point out the main reason I did the amount fix, at least, and added the SM tank, was so that life support resources (and life support _waste_ resources) could be handled by MFS. I have a MFS-based TAC config if anyone wants that too.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m interested, if it lets me try TAC without those cannisters...\u003C/p\u003E\n"},{"CreatedByName":"Jivaii","CreatedById":75048,"CreatedDateTime":"2013-10-07T02:13:39Z","Content":"\n\u003Cp\u003EWondering if it\u0027s possible to add other resources if they aren\u0027t already defined.\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-10-07T02:27:37Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Jivaii\u0022 data-cite=\u0022Jivaii\u0022\u003E\u003Cdiv\u003EWondering if it\u0027s possible to add other resources if they aren\u0027t already defined.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell if they aren\u0027t defined then you define them. \u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ERESOURCE_DEFINITION\u003Cbr\u003E{\u003Cbr\u003E\tname = VespeneGas\u003Cbr\u003E\tdensity = 0.00007\u003Cbr\u003E\tflowMode = ALL_VESSEL\u003Cbr\u003E\ttransfer = PUMP\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThen, to add the new resource as a possible tank configuration in the Default tank category:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\tTANK\u003Cbr\u003E\t{\u003Cbr\u003E\t   name = VespeneGas\u003Cbr\u003E\t   utilization = 0.995\u003Cbr\u003E\t   mass = 0.0\u003Cbr\u003E\t   temperature = -253\u003Cbr\u003E\t   amount = 0.0\u003Cbr\u003E\t   maxAmount = 0.0\u003Cbr\u003E\t   note =  We require more of it!\u003Cbr\u003E\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eta-da!\u003C/p\u003E\n"},{"CreatedByName":"Jivaii","CreatedById":75048,"CreatedDateTime":"2013-10-07T02:31:50Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Starwaster\u0022 data-cite=\u0022Starwaster\u0022\u003E\u003Cdiv\u003EWell if they aren\u0027t defined then you define them. \u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003ERESOURCE_DEFINITION\u003Cbr\u003E{\u003Cbr\u003E\tname = VespeneGas\u003Cbr\u003E\tdensity = 0.00007\u003Cbr\u003E\tflowMode = ALL_VESSEL\u003Cbr\u003E\ttransfer = PUMP\u003Cbr\u003E}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003EThen, to add the new resource as a possible tank configuration in the Default tank category:\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E\tTANK\u003Cbr\u003E\t{\u003Cbr\u003E\t   name = VespeneGas\u003Cbr\u003E\t   utilization = 0.995\u003Cbr\u003E\t   mass = 0.0\u003Cbr\u003E\t   temperature = -253\u003Cbr\u003E\t   amount = 0.0\u003Cbr\u003E\t   maxAmount = 0.0\u003Cbr\u003E\t   note =  We require more of it!\u003Cbr\u003E\t}\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003Eta-da!\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EThat\u0027s what I was looking for =)\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-07T02:42:22Z","Content":"\n\u003Cp\u003ELOL @ note.\u003C/p\u003E\u003Cp\u003ERe: TACLS, \u003Ca href=\u0022https://www.dropbox.com/s/dy69i4x93c2bm0z/TAC_LS.cfg\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/dy69i4x93c2bm0z/TAC_LS.cfg\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENOTE: I am using TACLS with renamed resources (the _TAC stripped from the end). If you want to use this for stock TACLS, put the _TACs back on all the resources.\u003C/p\u003E\u003Cp\u003EHas support for, oh, tons of mods.\u003C/p\u003E\u003Cp\u003EChange quantities to taste. NOTE: This adds an MFT to each part in it, so...if it already has an MFT, you\u0027re in trouble. Has Values I Like , tweak to taste.\u003C/p\u003E\u003Cp\u003EI defined three custom MFT tanks: LifeSupport (has only food/water/O2), LifeSupportWaste (has only wastes), and LifeSupportCC (has all six, but comes full of only food/water/O2, and the other three tanks are amount=0). CC = closed cycle.\u003C/p\u003E\u003Cp\u003EI also added support for the six resources to tanktype Default (at amount/maxAmount = 0), and ServiceModule(amount = 10%, so it will take up the same ratio of the SM tank as monopropellant, roughly).\u003C/p\u003E\u003Cp\u003ETank masses and utilizations are guesses: I figure sealing a tank costs a bit of mass (for water and wastewater) and pressurizing a tank does too and has lower utilization (O2/CO2). That\u0027s why the volumes are multiples of 1.01 rather than 1, a tank of 3.03 volume has exactly 1 unit each of food/water/O2.\u003C/p\u003E\u003Cp\u003EMass equates to the standard LifeSupport tank in TAC.\u003C/p\u003E\n"},{"CreatedByName":"Chestburster","CreatedById":69476,"CreatedDateTime":"2013-10-07T06:38:22Z","Content":"\n\u003Cp\u003ENathan, may i suggest opening a new thread for the \u0022forked\u0022 version? May be easier for new people to find the newest version with configs.\u003C/p\u003E\u003Cp\u003ESecond: Since i\u0027m in the process of updating my configs i had the idea about changing the current RF mixtures. LF\u002BOX would be replaced by MMH/N2O4 with an ISP reduction of ~20%; LF\u002BLOX will get replaced by RP-1/LOX with \u002B10% thrust and -10% ISP; LH2/LOX would stay at 100% thrust and \u002B5-10% ISP (values are capped at real worlds max ISP. I made a quick and dirty \u003Ca href=\u0022https://www.dropbox.com/s/iodust7mdbciylk/MFS-RF-Props.xlsx\u0022 rel=\u0022external nofollow\u0022\u003Eexcel-sheet\u003C/a\u003E for the calcs)\u003C/p\u003E\u003Cp\u003EAfter the change, hypergolics will be for light and cheap rockets, long-lasting probes and interplanetary ships. RP-1/LOX for your workhorse first stage launcher and LH2/LOX for the lighter upper stages and SSMEs.\u003C/p\u003E\u003Cp\u003EThird: ialdabaoth planned to integrate the ISP fixer within the MFS codework. Would it be possible for you to do the same, Nathan?\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-07T06:56:22Z","Content":"\n\u003Cp\u003EChestBurster, check inside my archive for my excel file. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022;)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI did exactly that, basically, but also rebalanced all engines to tech levels. It autogenerates cfg files for all values you input. Should be very helpful for what you want. (Check the Isps sheet--it\u0027s almost identical to yours. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_happy.png\u0022 alt=\u0022^_^\u0022\u003E)\u003C/p\u003E\u003Cp\u003EJust reset all data to stock (including the names), and set the multipliers as you want under KL/HL/HG (it controls sea-level Isp multiplier for that mode, so hydrolox can have proportionally lower IspSL). There are multipliers on the right for thrust under different regimes, although I should add more for the most flexibility. I\u0027ll do that for you if you want.\u003C/p\u003E\u003Cp\u003EAnyway, no more manual editing of cfgs: I make excel do it for us, hurrah.\u003C/p\u003E\u003Cp\u003EYeah, I should create a new thread. And interesting you should mention thrust correction: I was just looking at doing that (Starwaster mentioned it), and forgot that ialdabaoth was going to add that. Sure, I can do that.\u003C/p\u003E\n"},{"CreatedByName":"Chestburster","CreatedById":69476,"CreatedDateTime":"2013-10-07T07:20:52Z","Content":"\n\u003Cp\u003EGoing to take a look at your sheet and see what i can do with it. Looks interesting so far.\u003C/p\u003E\u003Cp\u003EI like the tech level idea, will make it easier to implement the engines when .22 arrives.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003EPS: now i realy wish i had a second monitor.. xD\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EEdit: Finished the fuel tank files to support the latest mod updates and added KOSMOS support. Engines and RealFuels will have to wait a bit longer since im playing around with the excel sheet.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/uzwjptwcd09nhke/MFS%20Configs%20V1.6%20WIP.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/uzwjptwcd09nhke/MFS%20Configs%20V1.6%20WIP.zip\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222013-10-07T09:59:52Z\u0022 title=\u002210/07/2013 09:59  AM\u0022 data-short=\u002210 yr\u0022\u003EOctober 7, 2013\u003C/time\u003E by Chestburster\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"CaptRobau","CreatedById":41695,"CreatedDateTime":"2013-10-08T22:59:16Z","Content":"\n\u003Cp\u003EI made the FASA fuel tanks compatible with Modular Fuel System 1.3. Has it been done before? If not, you\u0027re (whether you be the main dev or one of the branch devs) free to include it in your next release.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropboxusercontent.com/u/23500849/FASA_ModularFuelTanks.cfg\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/23500849/FASA_ModularFuelTanks.cfg\u003C/a\u003E\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-10T01:53:17Z","Content":"\n\u003Cp\u003ECool!\u003C/p\u003E\u003Cp\u003ESome of it was in the archive I posted, but not all of them--very useful, thanks!\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-10-10T09:17:35Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Chestburster\u0022 data-cite=\u0022Chestburster\u0022\u003E\u003Cdiv\u003EGoing to take a look at your sheet and see what i can do with it. Looks interesting so far.\u003Cp\u003EI like the tech level idea, will make it easier to implement the engines when .22 arrives.\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cp\u003E\u003Cspan style=\u0022font-size:8px;\u0022\u003EPS: now i realy wish i had a second monitor.. xD\u003C/span\u003E\u003C/p\u003E\u003Cp\u003EEdit: Finished the fuel tank files to support the latest mod updates and added KOSMOS support. Engines and RealFuels will have to wait a bit longer since im playing around with the excel sheet.\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://www.dropbox.com/s/uzwjptwcd09nhke/MFS%20Configs%20V1.6%20WIP.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/uzwjptwcd09nhke/MFS%20Configs%20V1.6%20WIP.zip\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003Edon\u0027t forget please to include the mass fixes for LF/OX tanks in default and cryotanks \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E also add some mass to fuselage tanks as strange things happen if parts have zero mass (see my sig for fixes)\u003C/p\u003E\n"},{"CreatedByName":"Starwaster","CreatedById":71262,"CreatedDateTime":"2013-10-10T10:09:09Z","Content":"\n\u003Cp\u003EUpdated my RealFuels config to bring Kethane\u002BLiquidO2 configurations for KW Rocketry engines up to date.\u003C/p\u003E\n"},{"CreatedByName":"rhoark","CreatedById":57151,"CreatedDateTime":"2013-10-10T12:51:31Z","Content":"\n\u003Cp\u003ESomething has been bothering me for awhile and might be taken into account if a comprehensive balance pass is underway:\u003C/p\u003E\u003Cp\u003ELow thrust engines are typically intended for use in a vacuum, but ideal vacuum Isp requires a large bell nozzle. The KW Service Propulsion engine is representative of what a vacuum engine should look like. All the moderate-thrust stock engines have small nozzles. I think the 909 and Poodle should get improved atmospheric Isp at the expense of vacuum Isp (and still have the advantage of low profile). KW or others can provide the large vacuum nozzles, or else new parts could be provided with stock 909/Poodle stats but T30/Atlas models.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-10T20:28:03Z","Content":"\n\u003Cp\u003EWhen you consider that it\u0027s not just shape but area ratio, the options get even worse, because while the the T30 might have a longer more bell-like nozzle, it\u0027s clearly got a sea-level-optimized area ratio. On the other hand, the 909 and Poodle do at least appear to have the correct area ratio (if you trace the nozzle upwards and assume the throat is a reasonable distance from where the nozzle emerges).\u003C/p\u003E\n"},{"CreatedByName":"p1t1o","CreatedById":74091,"CreatedDateTime":"2013-10-10T21:27:19Z","Content":"\n\u003Cp\u003EI\u0027ve been making my own config files for various mods since I got modular fuels quite a while ago, will I be able to keep these or will have to modify them to work with whatever new build will be released?\u003C/p\u003E\u003Cp\u003EI freaking love this mod, makes nuclear engines so much more interesting - I\u0027ve re-balanced my nuclear engines to use nuclear fuel a lot faster though and have added a fuel re-processing capability to my RTGs and added a tank that can contain nuclear fuel/waste.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-10T21:32:44Z","Content":"\n\u003Cp\u003EWell, hybrid engines configs work differently now. But everything else should be forwards-compatible. Only difference is the densities of various things have changed rather slightly, and I created an excel spreadsheet to autogenerate engine configs. So even if you did need to update, it wouldn\u0027t take long.\u003C/p\u003E\u003Cp\u003EOh, and there\u0027s now correct thrust scaling (by Isp) so your TWR at sea level will suffer.\u003C/p\u003E\n"},{"CreatedByName":"p1t1o","CreatedById":74091,"CreatedDateTime":"2013-10-10T22:51:06Z","Content":"\n\u003Cp\u003EHybrid engine configs? Is that where a part has an engine and a tank? How exactly does that work because FASA has been a pain to work with so far!\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-10T22:53:49Z","Content":"\n\u003Cp\u003ENo, it\u0027s where an engine can switch modes in-flight, like the B9 SABRE or a LOX-Augmented NTR.\u003C/p\u003E\u003Cp\u003EI fixed the can\u0027t-have-tanks-and-engines-on-same-part bug in my dev build. It supports FASA. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"p1t1o","CreatedById":74091,"CreatedDateTime":"2013-10-10T23:08:09Z","Content":"\n\u003Cp\u003ELooking forward to the release of that \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EDon\u0027t have too many hybrids, shouldn\u0027t be much of a problem. LOVE the SABRES.\u003C/p\u003E\n"},{"CreatedByName":"NathanKell","CreatedById":75006,"CreatedDateTime":"2013-10-10T23:25:59Z","Content":"\n\u003Cp\u003EUm...it\u0027s the same dropbox link I\u0027m always posting in this thread, \u003Ca href=\u0022https://www.dropbox.com/sh/16v210v2vbwv3ov/nmInpsRZ1P\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/sh/16v210v2vbwv3ov/nmInpsRZ1P\u003C/a\u003E \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Chestburster","CreatedById":69476,"CreatedDateTime":"2013-10-10T23:30:55Z","Content":"\n\u003Cp\u003EYou need to be a bit patient for now. Expect the beta of 1.4 on Monday or Tuesday. It\u0027s a \u0022big\u0022 overhaul, thats all i say for now ;-) .\u003C/p\u003E\n"}]}