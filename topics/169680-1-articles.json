{"TopicId":169680,"ForumId":29,"TopicTitle":"Adding a Slope Option to KerbNet","CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-17T00:06:19Z","PageNum":1,"Articles":[{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-17T00:06:19Z","Content":"\n\u003Cp\u003E\nI\u0027d like to add a Slope mode to KerbNet, so that a vessel can see Ore, Altitude, Biomes, and Slope.\n\u003C/p\u003E\n\u003Cp\u003E\nThis is my first mod, but I think what I want to do is pretty simple. It\u0027d just be the altitude mode, but with slope instead.\n\u003C/p\u003E\n\u003Cp\u003E\nIt looks like I want a PartModule, and I need to subclass KerbNetMode (\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_kerb_net_1_1_kerb_net_mode.html\u0022 rel=\u0022\u0022\u003Ehttps://kerbalspaceprogram.com/api/class_kerb_net_1_1_kerb_net_mode.html).\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nLooks like I want to attach this to existing parts, so looks like I need to use ModuleManager.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve read through the \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/153765-getting-started-the-basics-of-writing-a-plug-in/\u0022 rel=\u0022\u0022\u003Ebasic start guide\u003C/a\u003E. Any advice on what to research next?\n\u003C/p\u003E\n"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2018-01-17T01:38:31Z","Content":"\n\u003Cp\u003E\nKerbNetMode is not a PartModule, it\u0027s just a class that serves as the base for each different mode to determine how the map is actually drawn.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat you would need is to use \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E to add your new slope mode to whichever KerbNet part you want to have it.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, for example, in the probeCoreHex part config you would need to use \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E to add to the DISPLAY_MODES node:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\n\tMODULE\n\t{\n\t\tname = ModuleKerbNetAccess\n\t\tMinimumFoV = 17\n\t\tMaximumFoV = 63\n\t\tAnomalyDetection = 0.12\n\t\tDISPLAY_MODES\n\t\t{\n\t\t\tMode = Terrain,#autoLOC_438839 //#autoLOC_438839 = Terrain\n\t\t\tMode = Slope,Slope //the second word is the translated term used for the actual display\n\t\t}\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nTo generate a slope map you would need to make a new class that inherits KerbNetMode and overrides the relevant methods:\n\u003C/p\u003E\n\u003Cp\u003E\nCustomPass - this looks like where you would take the terrain data and convert it slope (I\u0027m pretty sure that all KerbNet modes generate terrain data); you would have to convert pixel color to an altitude value, then calculate slope from there, or something along those lines.\n\u003C/p\u003E\n\u003Cp\u003E\nLocalCoordinateInfo - this is where you would get slope info for the center or cursor point to print in the KerbNet window.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe problem here is that the terrain altitude data is interpolated, only every x pixel on every y row (2 or 4 pixels probably) is actually calculated, so the default terrain map is not very accurate. I\u0027m also not sure of how you would figure out what the min and max altitude is for a\u00A0given map (you would need this to convert pixel color back to altitude).\n\u003C/p\u003E\n\u003Cp\u003E\nI think you can disable the stock terrain data generation by setting the \u0022doTerrainContourPass\u0022 field for you KerbNetMode class to false. Then you would have to calculate the terrain altitude data yourself in the CustomPass method, convert terrain data to slope,\u00A0convert slope data to color and apply that to the map texture.\u00A0\u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nGetting terrain data is pretty slow, even for the relatively small KerbNet map (that\u0027s why the stock modes interpolate the data). So you would have to balance the trade off of slow map generation with the accuracy of\u00A0the slope calculation.\n\u003C/p\u003E\n\u003Cp\u003E\nThe slope calculation itself can also be a bit math heavy, so you have to decide how accurate you want that part to be, too.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSCANsat uses two methods for calculating slope, one for drawing the map, which isn\u0027t very accurate, but produces decent results:\u00A0\u003Ca href=\u0022https://github.com/S-C-A-N/SCANsat/blob/release/SCANsat/SCAN_Map/SCANmap.cs#L908-L939\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/S-C-A-N/SCANsat/blob/release/SCANsat/SCAN_Map/SCANmap.cs#L908-L939\u003C/a\u003E\u00A0(this one is probably indecipherable without knowing how the map code works overall \u003Cimg alt=\u0022:kiss:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_kiss.gif\u0022 title=\u0022:kiss:\u0022\u003E).\n\u003C/p\u003E\n\u003Cp\u003E\nAnd the other for finding the slope at a highly localized locations, like the current vessel location or when the mouse is over a pixel on the map:\u00A0\u003Ca href=\u0022https://github.com/S-C-A-N/SCANsat/blob/release/SCANsat/SCANutil.cs#L699-L753\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/S-C-A-N/SCANsat/blob/release/SCANsat/SCANutil.cs#L699-L753\u003C/a\u003E\u00A0(this one calculates the slope by comparing the altitude at the 8 points surrounding the location).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-17T01:51:14Z","Content":"\n\u003Cp\u003E\nHow does the game know that the word \u0022Slope\u0022 is associated with this new slope class? Does it use reflection to do that?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-01-17T09:54:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223269948\u0022 data-ipsquote-contentid=\u0022169680\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516153874\u0022 data-ipsquote-userid=\u0022151345\u0022 data-ipsquote-username=\u0022Wcmille\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Wcmille said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHow does the game know that the word \u0022Slope\u0022 is associated with this new slope class? Does it use reflection to do that?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAny class that implements\u00A0KerbNetMode is loaded by the game. The \u0022name\u0022 member of the class is the one that is used for the mode name.\n\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-18T02:44:05Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257146\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0022 rel=\u0022\u0022\u003E@sarbian\u003C/a\u003E and \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57416-dmagic/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257416\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57416-dmagic/\u0022 rel=\u0022\u0022\u003E@DMagic\u003C/a\u003E -- thanks for your help!\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what I have so far. I\u0027m trying just to see if I can get the code to register inside the game before I go farther. Trying to make my slope KerbNet so that it just displays a red screen. Once I\u0027ve got it installed correctly, I\u0027ll get to work on making the display correct.\n\u003C/p\u003E\n\u003Cp\u003E\nSo far, this doesn\u0027t seem to work.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s my module manager file (all of it):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n@PART[probeStackSmall]\n{\n\t@MODULE[ModuleKerbNetAccess]\n\t{\n\t\tMinimumFoV = 9\n\t\tMaximumFoV = 81\n\t\tAnomalyDetection = 0.24\n\t\tDISPLAY_MODES\n\t\t{\n\t\t\tMode = Biome,#autoLOC_438890 //#autoLOC_438890 = Biome\n\t\t\tMode = Terrain,#autoLOC_438839 //#autoLOC_438839 = Terrain\n\t\t\tMode = Slope, Slope\n\t\t}\n\t}\n}\u003C/pre\u003E\n\u003Cp\u003E\nHere\u0027s my code file (there\u0027s only this file in the assembly):\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-c prettyprinted\u0022\u003E\n\u003Cspan class=\u0022kwd\u0022\u003Eusing\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EKerbNet\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eusing\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EUnityEngine\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n\u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Enamespace\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E wcmille\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Eclass\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003ESlope\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E:\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EKerbNetMode\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E override \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Evoid\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EOnInit\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E()\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            name \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022str\u0022\u003E\u0022Slope\u0022\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            displayName \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022str\u0022\u003E\u0022Slope\u0022\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\n        \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Epublic\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E override \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Evoid\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003ECustomPass\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan\u003ETexture2D\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E tex\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            base\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ECustomPass\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Etex\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            var pixels \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E tex\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003EGetPixels\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E();\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Efor\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan\u003Eint\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E i \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E i \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u0026lt;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E pixels\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ELength\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E;\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E\u002B\u002B\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ei\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E)\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E{\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \n                pixels\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E[\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Ei\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E]\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E=\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan class=\u0022kwd\u0022\u003Enew\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E \u003C/span\u003E\u003Cspan\u003EColor\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E255\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E,\u003C/span\u003E\u003Cspan class=\u0022lit\u0022\u003E0\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n            tex\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E.\u003C/span\u003E\u003Cspan\u003ESetPixels\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E(\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003Epixels\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E);\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n        \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n    \u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003Cspan class=\u0022pln\u0022\u003E\n\u003C/span\u003E\u003Cspan class=\u0022pun\u0022\u003E}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-01-18T09:22:47Z","Content":"\n\u003Cp\u003E\nSet\u00A0doCustomPass to true in init and you should be fine.\n\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-20T20:34:56Z","Content":"\n\u003Cp\u003E\nThanks for that, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257146\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0022 rel=\u0022\u0022\u003E@sarbian\u003C/a\u003E . When I install the mod, log messages in the Init get called, but the log get\u0027s continuously spammed with this message:\n\u003C/p\u003E\n\u003Cp\u003E\n\u0022[EXC 14:26:09.295] MissingMethodException: Method not found: \u0027KeyBinding.GetKey\u0027.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nIf I remove my mod or I replace the code with the tutorial code, I don\u0027t get this message.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m wondering if I didn\u0027t override the class enough or if I have some missing references?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-01-20T20:50:08Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223273334\u0022 data-ipsquote-contentid=\u0022169680\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516480496\u0022 data-ipsquote-userid=\u0022151345\u0022 data-ipsquote-username=\u0022Wcmille\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 minutes ago, Wcmille said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThanks for that, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257146\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0022 rel=\u0022\u0022\u003E@sarbian\u003C/a\u003E . When I install the mod, log messages in the Init get called, but the log get\u0027s continuously spammed with this message:\n\u003C/p\u003E\n\u003Cp\u003E\n\u0022[EXC 14:26:09.295] MissingMethodException: Method not found: \u0027KeyBinding.GetKey\u0027.\u0022\n\u003C/p\u003E\n\u003Cp\u003E\nIf I remove my mod or I replace the code with the tutorial code, I don\u0027t get this message.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027m wondering if I didn\u0027t override the class enough or if I have some missing references?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAre you sure you compiled your DLL with the same KSP version that you run it with ?\n\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-20T20:59:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223273345\u0022 data-ipsquote-contentid=\u0022169680\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221516481408\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre you sure you compiled your DLL with the same KSP version that you run it with ?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFrom an internet search, it sounds like I must not be. That puzzles me. I have only one instance of KSP on my machine. I am referencing these 4 assemblies:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nAssembly-CSharp\n\u003C/li\u003E\n\u003Cli\u003E\nAssembly-CSharp-firstpass\n\u003C/li\u003E\n\u003Cli\u003E\nUnityEngine\n\u003C/li\u003E\n\u003Cli\u003E\nUnityEngine.UI\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nThese come from: \u0026lt;PATH\u0026gt;\\Kerbal Space Program\\KSP_x64_Data\\Managed\\\u0026lt;Assembly\u0026gt;\n\u003C/p\u003E\n\u003Cp\u003E\nI am running in 64-bit mode.\n\u003C/p\u003E\n\u003Cp\u003E\nI think mscorlib is getting implicitly referenced by the compiler (VS Community 2017), but that could be different.\n\u003C/p\u003E\n\u003Cp\u003E\nI wonder how else I might try to troubleshoot this?\n\u003C/p\u003E\n"},{"CreatedByName":"Benjamin Kerman","CreatedById":172792,"CreatedDateTime":"2018-01-21T17:12:02Z","Content":"\n\u003Cp\u003E\nStupid question, but I don\u0027t see it elsewhere in the thread.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe MS C# API defaults to the current version of C#, which is 4.7.1 (iirc). You have to make sure that whatever functions you\u0027re using still existed back in the days of C# 3.5, which KSP is written in.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSame thing with the KSP API, which is updated to the latest version. If you\u0027re working with an older version of KSP, things might have changed in the API.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe compiler must be set to compile for C# v.3.5, as it defaults to the latest one.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe last thing is to check your using statements.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nGood luck!\n\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-21T20:56:22Z","Content":"\n\u003Cp\u003E\nI think those are all correct. The target framework for the assembly is .NET 3..5. Can\u0027t see why using statements would create a run-time problem if it resolves unambiguously.\n\u003C/p\u003E\n\u003Cp\u003E\nIf anyone is so inclined, I\u0027d be very thankful to see if this works/runs for anyone else. here\u0027s the dropbox link:\u003Cbr\u003E\u003Ca href=\u0022https://www.dropbox.com/s/e8ba6mhf52f7lzp/wcmille.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/e8ba6mhf52f7lzp/wcmille.zip?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThe test is to make a sandbox game, put a probe core on the launch pad, and open up KerbNet. You\u0027ll need to hand-deploy the ModuleManager file to your mods folder, and your game path won\u0027t be the same as the one I deploy to in my post-build step.\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-01-22T13:19:43Z","Content":"\n\u003Cp\u003E\nCheck if you do not have an old lib copied in the project folder.\n\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-27T01:11:31Z","Content":"\n\u003Cp\u003E\nI deleted the bin and obj folders to isolate that out.\n\u003C/p\u003E\n\u003Cp\u003E\nHere are some other things I have tried; this did not seem to help:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nI have run in 32 and 64 bit mode.\n\u003C/li\u003E\n\u003Cli\u003E\nI have removed all my mods, except ModuleManager\n\u003C/li\u003E\n\u003Cli\u003E\nI tried adding the System namespace\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nWould anyone be willing to try compiling my project on their machine to see if the error reproduces?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-01-27T12:57:24Z","Content":"\n\u003Cp\u003E\nSure\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-01-27T14:05:52Z","Content":"\n\u003Cp\u003E\nThere :\u00A0\u003Ca href=\u0022https://www.dropbox.com/s/7wim9oncen0d56b/wcmille.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/7wim9oncen0d56b/wcmille.zip?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI added the system references to make sure it uses the one from KSP, changes the references to remove the hint path and switch to a user path (wcmille.csproj.user , I prefer this way of setting reference path), added some more code so the displayed strings are the right one and fixed the \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patch since a @ was missing.\n\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-27T19:18:11Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223278980\u0022 data-ipsquote-contentid=\u0022169680\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517061952\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 hours ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThere :\u00A0\u003Ca href=\u0022https://www.dropbox.com/s/7wim9oncen0d56b/wcmille.zip?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.dropbox.com/s/7wim9oncen0d56b/wcmille.zip?dl=0\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI added the system references to make sure it uses the one from KSP, changes the references to remove the hint path and switch to a user path (wcmille.csproj.user , I prefer this way of setting reference path), added some more code so the displayed strings are the right one and fixed the \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patch since a @ was missing.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNot seeing the change in the .cfg file in the drop box. Is that what you meant by the \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patch?\n\u003C/p\u003E\n"},{"CreatedByName":"sarbian","CreatedById":57146,"CreatedDateTime":"2018-01-27T19:39:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223279173\u0022 data-ipsquote-contentid=\u0022169680\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517080691\u0022 data-ipsquote-userid=\u0022151345\u0022 data-ipsquote-username=\u0022Wcmille\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n20 minutes ago, Wcmille said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNot seeing the change in the .cfg file in the drop box. Is that what you meant by the \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patch?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nErr sorry, I edited the file in my ksp install and did not zip the right one\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E@PART[probeStackSmall]\n{\n\t@MODULE[ModuleKerbNetAccess]\n\t{\n\t\tMinimumFoV = 9\n\t\tMaximumFoV = 81\n\t\tAnomalyDetection = 0.24\n\t\t@DISPLAY_MODES\n\t\t{\n\t\t\tMode = Biome,#autoLOC_438890 //#autoLOC_438890 = Biome\n\t\t\tMode = Terrain,#autoLOC_438839 //#autoLOC_438839 = Terrain\n\t\t\tMode = Slope,Slope\n\t\t}\n\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-27T19:46:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223279183\u0022 data-ipsquote-contentid=\u0022169680\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221517081961\u0022 data-ipsquote-userid=\u002257146\u0022 data-ipsquote-username=\u0022sarbian\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 minutes ago, sarbian said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nErr sorry, I edited the file in my ksp install and did not zip the right one\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\n\u003Cspan class=\u0022pln\u0022\u003E@PART[probeStackSmall]\n{\n\t@MODULE[ModuleKerbNetAccess]\n\t{\n\t\tMinimumFoV = 9\n\t\tMaximumFoV = 81\n\t\tAnomalyDetection = 0.24\n\t\t@DISPLAY_MODES\n\t\t{\n\t\t\tMode = Biome,#autoLOC_438890 //#autoLOC_438890 = Biome\n\t\t\tMode = Terrain,#autoLOC_438839 //#autoLOC_438839 = Terrain\n\t\t\tMode = Slope,Slope\n\t\t}\n\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThanks for that. Looks like that did it.\n\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-01-28T21:45:48Z","Content":"\n\u003Cp\u003E\nHere\u0027s an image of the mod. At present, its showing contours of the surface. I find something like this to be much more helpful than altitude, because I\u0027m looking for areas on the ground that are going to be really flat.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u002289E05172EDD1D0D8F2F3FEE96D810E19433FBBA1\u0022 class=\u0022ipsImage\u0022 height=\u0022571\u0022 src=\u0022https://steamuserimages-a.akamaihd.net/ugc/932677690980216510/89E05172EDD1D0D8F2F3FEE96D810E19433FBBA1/\u0022 width=\u0022418\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Wcmille","CreatedById":151345,"CreatedDateTime":"2018-02-03T20:43:40Z","Content":"\n\u003Cp\u003E\n\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257146\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0022 rel=\u0022\u0022\u003E@sarbian\u003C/a\u003E -- I never bothered to look at the log once I got the mod to work. The mod works, but its spamming the log. I just tried running your code from DropBox, and that\u0027s spamming the log with the same MissingMethodException. Does your dropbox version spam the log on your machine? What version of Visual Studio are you building with?\n\u003C/p\u003E\n"}]}