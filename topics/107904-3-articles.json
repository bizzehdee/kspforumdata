{"TopicId":107904,"ForumId":20,"TopicTitle":"Mod to Generate Science Contracts by Searching Science Archives to Find New Science to Do","CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-05-06T15:47:38Z","PageNum":3,"Articles":[{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-05-12T22:32:53Z","Content":"\u003E \n\u003E Already got it so you could filter it any which way - it\u0027ll be just as easy to do surface only, orbital only, flight only, biome-specific, etc.\n\u003E Ugh, I thought I was just about done, but realized I don\u0027t have anything for looking at what experiments can actually be DONE by the player. Research is part of it, but there are other aspects:\n\u003E \n\u003E \n\u003E \n\u003E 1. Does the player have the pre-requisite building upgrade (EVA and samples)? For EVA it\u0027s even uglier, because you can do EVAs on the surface of Kerbin without an upgrade, so it\u0027s got some special cases.\n\u003E 2. Asteroid sample experiments are a big outlier. Hypothetically, you can do it right on day 1, but I wouldn\u0027t want to offer the player \u0022do an asteroid sample while landed in Kerbin\u0027s grasslands\u0022 in a simple 1-star contract. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\u003E 3. Is there even a way to tell that a given experiment requires a part? I\u0027ll have to look closer at that.\n\nIt\u0027s never as easy as you first think :/\n\nI\u0027d say do whatever is easiest. Maybe just dont offer these contracts for Kerbin...\n\nI dont think there is a way to tell if an experiment requires a part; you probably will manually have to tell it to check...\n\nIf all that is too hard, i\u0027d say just check if a player has unlocked surface samples, and if so, tell players to collect surface sample from X biome. That would be a GREAT start!"},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-05-12T22:41:23Z","Content":"\u003E \n\u003E Ugh, I thought I was just about done, but realized I don\u0027t have anything for looking at what experiments can actually be DONE by the player. Research is part of it, but there are other aspects:\n\u003E \n\u003E \n\u003E 1. Does the player have the pre-requisite building upgrade (EVA and samples)? For EVA it\u0027s even uglier, because you can do EVAs on the surface of Kerbin without an upgrade, so it\u0027s got some special cases.\n\u003E 2. Asteroid sample experiments are a big outlier. Hypothetically, you can do it right on day 1, but I wouldn\u0027t want to offer the player \u0022do an asteroid sample while landed in Kerbin\u0027s grasslands\u0022 in a simple 1-star contract. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\u003E 3. Is there even a way to tell that a given experiment requires a part? I\u0027ll have to look closer at that.\n\n2. GameVariables.Instance.UnlockedSpaceObjectDiscovery(ScenarioUpgradeableFacilities.GetFacilityLevel(SpaceCenterFacility.TrackingStation))\n\nAnd really maybe it\u0027s better not to worry about where the asteroid sample comes from, just ask for a class size. And these are infinitely repeatable on different asteroids so it doesn\u0027t much matter anyway.\n\n1. Something like 2, but I don\u0027t have the exact code on hand. ![:cool:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif)\n\n3. I\u0027m not aware of anywhere that experiments are tied to actual parts, I suppose you could loop through all of the parts with a ModuleScienceExperiment and check their experimentID, then check if any valid part is available."},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-13T05:02:05Z","Content":"Alrighty, thanks again DMagic, got all the progression stuff in. Took a while to figure out that AvailablePart.moduleInfos[].moduleName I was looking for was not \u0022ModuleScienceExperiment\u0022, not \u0022ScienceExperiment\u0022, but \u0022Science Experiment\u0022. Jeez.\n\nAnyway, I think I\u0027ve got all the groundwork stuff done, so now it\u0027s mostly a question of putting the contracts together, which hopefully won\u0027t take too long (but I can sometimes get carried away when I come up with an interesting idea for a contract...).\n\nSo what do we want to call this thing? Going through a couple names in my head, and right now I like \u0022Contract Pack: Field Research\u0022. Thoughts?"},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-05-13T06:24:42Z","Content":"\u003E \n\u003E Alrighty, thanks again DMagic, got all the progression stuff in. Took a while to figure out that AvailablePart.moduleInfos[].moduleName I was looking for was not \u0022ModuleScienceExperiment\u0022, not \u0022ScienceExperiment\u0022, but \u0022Science Experiment\u0022. Jeez.\n\u003E Anyway, I think I\u0027ve got all the groundwork stuff done, so now it\u0027s mostly a question of putting the contracts together, which hopefully won\u0027t take too long (but I can sometimes get carried away when I come up with an interesting idea for a contract...).\n\u003E \n\u003E So what do we want to call this thing? Going through a couple names in my head, and right now I like \u0022Contract Pack: Field Research\u0022. Thoughts?\n\nBiome Research? To indicate that the mod is integrated with KSP biomes... or Biome Field Research?\n\nWhen i thought the author of \u0022For Science!\u0022 mod might be interested in writing this mod, i thought it should be called \u0022Do Science!\u0022..."},{"CreatedByName":"aquilux","CreatedById":23859,"CreatedDateTime":"2015-05-13T16:04:08Z","Content":"I was asking as a solution for the issue of figuring out whether or not a contract is valid, but maybe it\u0027s being looked at the wrong way? Maybe an area should be identified, then a contract built around it? Maybe if a scansat dependency is unavoidable, scanning could be incorporated in the contract building, making it so that you have to have a minimum level of scan detail for certain types of contracts?"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-13T18:13:04Z","Content":"\u003E \n\u003E I was asking as a solution for the issue of figuring out whether or not a contract is valid, but maybe it\u0027s being looked at the wrong way? Maybe an area should be identified, then a contract built around it? Maybe if a scansat dependency is unavoidable, scanning could be incorporated in the contract building, making it so that you have to have a minimum level of scan detail for certain types of contracts?\n\nAh I see. I\u0027m thinking for the first version I\u0027ll just leave it as is, but it will need to be addressed at some point. My current thinking (which hasn\u0027t been vetted by looking at what\u0027s possible) is to do a walkthrough of the vertices of the underlying data structure that represents the planet\u0027s mesh/PQS (which I finally just figured out stands for Planet Quad Sphere). For each vertex get the biome and flag whether it\u0027s above or below sea level. Use that information to get a % of land/water for each biome. I can then use that to estimate what biome/situation combinations can be considered extremely difficult and filter them out (or better yet, filter them into special 3-star contracts that make the difficulty clear).\n\nI have no idea how hard that will be code wise. I have no idea how performant it will be (do I need to do it one-time only at game start and cache the results to disk? or perhaps once per game without caching?). Regardless, I can\u0027t see it being something that can be done per scene change/game load.\n\nAs far as the player figuring out where the biomes are, the most I\u0027ll do is give suggestions in the mod\u0027s thread. SCANsat is one, KRE shows the current biome, and the stock cheat menu has the biome overlay. Out of game, the wiki has biome maps for everything, and I\u0027m sure there\u0027s more options out there too. Some players may want to figure it out on their own, as the biome names often give enough of a hint (\u0022Highlands\u0022, \u0022Northern Craters\u0022, \u0022Poles\u0022, etc.)\n\n- - - Updated - - -\n\n\u003E \n\u003E Biome Research? To indicate that the mod is integrated with KSP biomes... or Biome Field Research?\n\u003E When i thought the author of \u0022For Science!\u0022 mod might be interested in writing this mod, i thought it should be called \u0022Do Science!\u0022...\n\nAh, but there are also experiments that are non-biome specific. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"amorymeltzer","CreatedById":111542,"CreatedDateTime":"2015-05-13T18:35:33Z","Content":"\u003E \n\u003E So what do we want to call this thing? Going through a couple names in my head, and right now I like \u0022Contract Pack: Field Research\u0022. Thoughts?\n\nPerhaps something like Directed Contracts or Directed Science? \u0022Field Research\u0022 sounds more like something new rather than making contracts more productive."},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-13T18:37:16Z","Content":"\u003E \n\u003E Perhaps something like Directed Contracts or Directed Science? \u0022Field Research\u0022 sounds more like something new rather than making contracts more productive.\n\nOh but it is something new... the contracts aren\u0027t all just going to be \u0022go do experiment X at location Y\u0022... that\u0027s too boring. Going to have to make some more interesting contracts than that. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"amorymeltzer","CreatedById":111542,"CreatedDateTime":"2015-05-13T19:57:53Z","Content":"Sorry, meant new as in \u0022new parts/experiments\u0022, but YMMV."},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-13T20:34:51Z","Content":"\u003E \n\u003E Sorry, meant new as in \u0022new parts/experiments\u0022, but YMMV.\n\nFair enough - I\u0027m hoping the \u0022Contract Pack\u0022 designation keeps people from expecting that. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"arkie87","CreatedById":103434,"CreatedDateTime":"2015-05-13T21:07:12Z","Content":"\u003E \n\u003E Oh but it is something new... the contracts aren\u0027t all just going to be \u0022go do experiment X at location Y\u0022... that\u0027s too boring. Going to have to make some more interesting contracts than that. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\ni look forward to being surprised by your idea(s) ![:sticktongue:](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue2.gif)"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-15T01:51:40Z","Content":"Well, I was getting way too many \u0022Splashed down at Kerbin\u0027s Mountains\u0022 shenanigans, so I had to implement something. It\u0027s still a work in progress, but I was able to read from the height map directly, so it\u0027s relatively fast. Got some interesting data from it:\n\n[TABLE=class: grid, width: 160]\n\n[TR]\n\n[TD]**Biome**[/TD]\n\n[TD=align: right]**Land%**[/TD]\n\n[/TR]\n\n[TR]\n\n[TD]Badlands[/TD]\n\n[TD=align: right]84.25[/TD]\n\n[/TR]\n\n[TR]\n\n[TD]Deserts[/TD]\n\n[TD=align: right]80.33[/TD]\n\n[/TR]\n\n[TR]\n\n[TD]Grasslands[/TD]\n\n[TD=align: right]66.99[/TD]\n\n[/TR]\n\n[TR]\n\n[TD]Highlands[/TD]\n\n[TD=align: right]99.57[/TD]\n\n[/TR]\n\n[TR]\n\n[TD]Ice Caps[/TD]\n\n[TD=align: right]0.20[/TD]\n\n[/TR]\n\n[TR]\n\n[TD]Mountains[/TD]\n\n[TD=align: right]99.39[/TD]\n\n[/TR]\n\n[TR]\n\n[TD]Shores[/TD]\n\n[TD=align: right]0.16[/TD]\n\n[/TR]\n\n[TR]\n\n[TD]Tundra[/TD]\n\n[TD=align: right]48.39[/TD]\n\n[/TR]\n\n[TR]\n\n[TD]Water[/TD]\n\n[TD=align: right]0.00[/TD]\n\n[/TR]\n\n[/TABLE]\n\nSome are fairly unsurprising, but there\u0027s some outliers - the ice caps are all water? Does that mean that the ice caps are actually implemented not as terrain but as a structure? That probably also would explain the 50/50 split on tundra. Grasslands also seems to have a surprisingly high percentage of water."},{"CreatedByName":"amorymeltzer","CreatedById":111542,"CreatedDateTime":"2015-05-15T13:50:15Z","Content":"That\u0027s really fascinating to have! Should be published elsewhere if it\u0027s not already..."},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-15T15:28:37Z","Content":"Sounds like something you could integrate into your spreadsheet!\n\nIt\u0027s pulled directly from the height and biome maps, which are undoubtedly buried in the game code so I doubt you\u0027d be able to do the same thing in perl. But if you want me to provide the data for the other bodies, I can do that once I get everything verified."},{"CreatedByName":"DMagic","CreatedById":57416,"CreatedDateTime":"2015-05-15T17:26:51Z","Content":"You\u0027re cross-checking biome name and terrain height at a location? \n\nAre you assigning ocean based on anything below 0m? I\u0027m pretty sure that the ice caps are all at 0m, which would explain that biome. Maybe you should make the cutoff -1m or -5m, something like that. The terrain height comes from the pqsController right? It will give negative values under the ocean, so it should work."},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-15T17:32:29Z","Content":"\u003E \n\u003E You\u0027re cross-checking biome name and terrain height at a location? \n\u003E Are you assigning ocean based on anything below 0m? I\u0027m pretty sure that the ice caps are all at 0m, which would explain that biome. Maybe you should make the cutoff -1m or -5m, something like that. The terrain height comes from the pqsController right? It will give negative values under the ocean, so it should work.\n\nCorrect on everything you said above. I\u0027m going to play around with the numbers a bit and see if there\u0027s stuff right at/near the threshold to see if that change the ice caps (and possibly grasslands, those numbers just don\u0027t feel right)."},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-15T20:12:57Z","Content":"Gotta run, so will just post the raw data. Had to take a completely new approach, but the numbers are way more sensible. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nIce Caps = 0.999788348589873\n\nShores = 0.111981799797776\n\nWater = 0.00176463097382161\n\nGrasslands = 0.98367677703172\n\nHighlands = 0.999844123454224\n\nTundra = 0.858763471355644\n\nMountains = 0.996277338296882\n\nBadlands = 1\n\nDeserts = 0.993243243243243"},{"CreatedByName":"The Lone Wolfling","CreatedById":13675,"CreatedDateTime":"2015-05-16T00:08:18Z","Content":"I am slightly alarmed by the 0.18% of water that\u0027s land, myself. Can you dump coordinates of water in land biomes, and vice versa?"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-16T03:36:09Z","Content":"\u003E \n\u003E I am slightly alarmed by the 0.18% of water that\u0027s land, myself. Can you dump coordinates of water in land biomes, and vice versa?\n\nHeh, you read my mind. What I found was that there are many, many PQSmod objects that modify the terrain height. I had hoped that just using the height map directly would be close enough for my purposes, but there\u0027s a lot of areas that get modified significantly by other things (like the ice sheet that has some logic for setting it to 30m across the board). So I changed it to take a random sampling of locations to gather the biome data and doing it using a normal vector (which is significantly slower). But doing it this way, I have the coordinates for those outliers, so I\u0027m thinking I\u0027ll make contracts for visiting the rare biome/situation combinations and provide waypoints to guide the player.\n\nOh, and I though there were some archipelago type islands that account for the ocean/landed combinations? Not sure, once I get to the stage where I\u0027m testing those extracted locations I\u0027ll post some screenshots. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"Barking Sands","CreatedById":143433,"CreatedDateTime":"2015-05-16T04:32:56Z","Content":"That sounds totally awesome @nightingale. Can\u0027t wait to see a full array of land mass percentages. I can finally rule out Splashed@KerbinSrfBadlands, and complete my list of all possible reports with a science point spreadsheet. This is even more scientific than MythBusters. ![:D](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif)\n\nThe contracts with waypoints to complete the more difficult biome studies are what will make this one of the must-have mods in my book. Way to go!"},{"CreatedByName":"Enceos","CreatedById":110725,"CreatedDateTime":"2015-05-16T04:34:36Z","Content":"I\u0027ve been watching this thread with much interest for the past 4 days. It is fascinating to see people collaborate on a brilliant idea.\n\nThis contract pack/generator will be the biggest thing of all.\n\nAs for the naming of this pack I would suggest \u0022Undiscovered Science\u0022. What do you think?"},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-16T04:59:53Z","Content":"\u003E \n\u003E I\u0027ve been watching this thread with much interest for the past 4 days. It is fascinating to see people collaborate on a brilliant idea.\n\u003E This contract pack/generator will be the biggest thing of all.\n\u003E \n\u003E As for the naming of this pack I would suggest \u0022Undiscovered Science\u0022. What do you think?\n\nOooh, there\u0027s something I like about that name, I\u0027ll have to give it some thought.\n\nNow, how about some rare science? It\u0027s kind of disappointing that there\u0027s nothing in the text that actually refers to the fact that it\u0027s splashed down.\n\n![1kpVzTN.png](http://i.imgur.com/1kpVzTN.png)\n\nIf anyone wants to do some exploring, here\u0027s a few of the other rare science locations that I collected:\n\n    Land waypoints for biome Water    -76.552734375, 171.826171875    -77.607421875, 171.826171875    72.861328125, 343.564453125Water waypoints for biome Ice Caps    72.158203125, 343.564453125    74.619140625, 346.552734375    72.158203125, 346.552734375Water waypoints for biome Highlands    -3.427734375, 19.599609375Water waypoints for biome Mountains    40.869140625, 211.376953125    -59.326171875, 317.021484375    -21.181640625, 65.654296875Water waypoints for biome Deserts    10.458984375, 260.947265625    4.306640625, 244.423828125    8.876953125, 227.900390625Water waypoints for biome Badlands    -2.373046875, 70.576171875    -13.798828125, 47.021484375    -17.841796875, 30.322265625"},{"CreatedByName":"Barking Sands","CreatedById":143433,"CreatedDateTime":"2015-05-16T05:20:28Z","Content":"\u003E \n\u003E Now, how about some rare science? It\u0027s kind of disappointing that there\u0027s nothing in the text that actually refers to the fact that it\u0027s splashed down.\n\u003E [http://i.imgur.com/1kpVzTN.png](http://i.imgur.com/1kpVzTN.png)\n\nBased on my calculations, a materials study while splashed down yields 9 science, but while landed yields 7.5; while you are clearly splashed down in the image, you aren\u0027t being recognized as splashed down in the game. That is just weird. Speaking of weird, how about the name \u0022Weird Science?\u0022 ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\nSpeaking of naming, is this planned to be a standalone mod or a contract pack for the Contract Configurator? I was thinking it was a CC contract pack that would be called something like the \u0022Kepler Science Explorer\u0022 pack."},{"CreatedByName":"nightingale","CreatedById":119307,"CreatedDateTime":"2015-05-16T05:26:50Z","Content":"\u003E \n\u003E Based on my calculations, a materials study while splashed down yields 9 science, but while landed yields 7.5; while you are clearly splashed down in the image, you aren\u0027t being recognized as splashed down in the game. That is just weird. Speaking of weird, how about the name \u0022Weird Science?\u0022 ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\u003E Speaking of naming, is this planned to be a standalone mod or a contract pack for the Contract Configurator? I was thinking it was a CC contract pack that would be called something like the \u0022Kepler Science Explorer\u0022 pack.\n\nHuh, weird. I actually spawned in shallow water and had to roll myself deeper. Guess I didn\u0027t go quite deep enough. ![:P](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_tongue.gif)\n\nIt\u0027ll be a Contract Configurator contract pack. Weird Science doesn\u0027t do it for me, but I do like \u0022Science Explorer\u0022."},{"CreatedByName":"Tontow","CreatedById":64552,"CreatedDateTime":"2015-05-16T07:29:05Z","Content":"I think \u0022Science Explorer contract pack\u0022 would be good if it is just a contract pack.\n\nBut if it is a mod that will stop offering a contract after and only after you sucked all the science out of a location, then I think \u0022Do Science!\u0022 would be better."}]}