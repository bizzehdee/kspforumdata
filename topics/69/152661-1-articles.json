{"TopicId":152661,"ForumId":69,"TopicTitle":"KSP and CPU instruction sets?","CreatedByName":"iSilver","CreatedById":171078,"CreatedDateTime":"2016-11-27T14:58:29Z","PageNum":1,"Articles":[{"CreatedByName":"iSilver","CreatedById":171078,"CreatedDateTime":"2016-11-27T14:58:29Z","Content":"\n\u003Cp\u003E\nDoes KSP utilize AVX, AVX2, and FMA3/FMA? Or still on SSE2/SSE4 codes? I\u0027m thinking of getting a new cpu optimized for some physics based games like KSP and BeamNG.\n\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-11-28T10:58:54Z","Content":"\n\u003Cp\u003E\nHi \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/171078-isilver/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022171078\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/171078-isilver/\u0022 rel=\u0022\u0022\u003E@iSilver\u003C/a\u003E, KSP is limited to what the \u003Ca href=\u0022https://unity3d.com/unity/system-requirements\u0022 rel=\u0022external nofollow\u0022\u003EUnity3D engine supports.\u003C/a\u003E\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Ch3\u003E\nFor running Unity games\n\u003C/h3\u003E\n\u003Cp\u003E\nGenerally content developed with Unity can run pretty much everywhere. How well it runs is dependent on the complexity of your project. More detailed requirements:\n\u003C/p\u003E\n\u003Cul class=\u0022l\u0022\u003E\n\u003Cli\u003E\nDesktop:\n\u003Cul\u003E\n\u003Cli\u003E\nOS: Windows XP SP2\u002B, Mac OS X 10.8\u002B, Ubuntu 12.04\u002B, SteamOS\u002B.\n\u003C/li\u003E\n\u003Cli\u003E\nGraphics card: DX9 (shader model 3.0) or DX11 with feature level 9.3 capabilities.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Cstrong\u003ECPU: SSE2 instruction set support.\u003C/strong\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHope this helps.\n\u003C/p\u003E\n"},{"CreatedByName":"iSilver","CreatedById":171078,"CreatedDateTime":"2016-11-28T17:06:40Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222866960\u0022 data-ipsquote-contentid=\u0022152661\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480330734\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n6 hours ago, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/171078-isilver/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022171078\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/171078-isilver/\u0022 rel=\u0022\u0022\u003E@iSilver\u003C/a\u003E, KSP is limited to what the \u003Ca href=\u0022https://unity3d.com/unity/system-requirements\u0022 rel=\u0022external nofollow\u0022\u003EUnity3D engine supports.\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nHope this helps.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThank you\u00A0\u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/16426-sal_vager/\u0026amp;do=hovercard\u0022 data-mentionid=\u002216426\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/16426-sal_vager/\u0022 rel=\u0022\u0022\u003E@sal_vager\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nTurns out I don\u0027t need those latest extensions yet, keeping my 3570k for now.\n\u003C/p\u003E\n\u003Cp\u003E\nMuch appreciated.\n\u003C/p\u003E\n"},{"CreatedByName":"iSilver","CreatedById":171078,"CreatedDateTime":"2016-12-01T11:40:43Z","Content":"\n\u003Cp\u003E\nI\u0027ve just found out that Unity 5.x Physx 3 actually runs with two code paths (SSE2 for older/value cpus and AVX for newer/mid-to-high cpus).\n\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-12-01T12:27:46Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222870586\u0022 data-ipsquote-contentid=\u0022152661\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480592443\u0022 data-ipsquote-userid=\u0022171078\u0022 data-ipsquote-username=\u0022iSilver\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n46 minutes ago, iSilver said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI\u0027ve just found out that Unity 5.x Physx 3 actually runs with two code paths (SSE2 for older/value cpus and AVX for newer/mid-to-high cpus).\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nInteresting! Would you happen to have a link?\n\u003C/p\u003E\n"},{"CreatedByName":"iSilver","CreatedById":171078,"CreatedDateTime":"2016-12-01T12:57:57Z","Content":"\n\u003Cp\u003E\n\u003Ca href=\u0022http://physxinfo.com/wiki/PhysX_SDK_3.x\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://physxinfo.com/wiki/PhysX_SDK_3.x\u003C/a\u003E\u00A0\u003Cb style=\u0022color:rgb(0,0,0);font-family:sans-serif;font-size:12.8px;font-style:normal;letter-spacing:normal;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003EDeformables\u003C/b\u003E\u00A0section.\n\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-12-01T16:59:41Z","Content":"\n\u003Cp\u003E\nAhh I see, I don\u0027t know if the version of PhysX in Unity does all of that, one difference with the Unity version that I know of is that it only provides software physics at this time, except for a handful of optional things such as hair rendering, but SSE2 can be taken as a minimum.\n\u003C/p\u003E\n"},{"CreatedByName":"iSilver","CreatedById":171078,"CreatedDateTime":"2016-12-01T18:45:51Z","Content":"\n\u003Cp\u003E\nI ran several fps tests with a 175-part rocket\u002Blander\u00A0and no noticeable difference between AVX (normal) and disabled AVX (xsavedisable 1: disabled AVX in Windows 10). Both result in consistent fps range of 60\u00A0to 70 (unlocked framerate \u0026amp; no vsync). My 3570k doesn\u0027t support AVX2 though.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg src=\u0022https://i.imgur.com/sBSkvwy.jpg\u0022 class=\u0022ipsImage\u0022 alt=\u0022sBSkvwy.jpg\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-12-01T19:47:15Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222871019\u0022 data-ipsquote-contentid=\u0022152661\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480617951\u0022 data-ipsquote-userid=\u0022171078\u0022 data-ipsquote-username=\u0022iSilver\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, iSilver said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Cp\u003E\nI ran several fps tests with a 175-part rocket\u002Blander\u00A0and no noticeable difference between AVX (normal) and disabled AVX (xsavedisable 1: disabled AVX in Windows 10). Both result in consistent fps range of 60\u00A0to 70 (unlocked framerate \u0026amp; no vsync). My 3570k doesn\u0027t support AVX2 though.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nMakes sense, neither the \u003Ca href=\u0022https://docs.unity3d.com/Manual/UpgradeGuide5-Physics.html\u0022 rel=\u0022external nofollow\u0022\u003EUnity manual\u003C/a\u003E\u003Cspan ipsnoautolink=\u0022true\u0022\u003E or the \u003Ca href=\u0022https://blogs.unity3d.com/2014/07/08/high-performance-physics-in-unity-5/\u0022 rel=\u0022external nofollow\u0022\u003EUnity 5 blog post\u003C/a\u003E mention AVX at all, so it\u0027s likely unavailable.\u003C/span\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-12-02T09:13:29Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222870635\u0022 data-ipsquote-contentid=\u0022152661\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480597077\u0022 data-ipsquote-userid=\u0022171078\u0022 data-ipsquote-username=\u0022iSilver\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n19 hours ago, iSilver said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022http://physxinfo.com/wiki/PhysX_SDK_3.x\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://physxinfo.com/wiki/PhysX_SDK_3.x\u003C/a\u003E\u00A0\u003Cb style=\u0022color:rgb(0,0,0);font-family:sans-serif;font-size:12.8px;font-style:normal;letter-spacing:normal;text-align:left;text-indent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);\u0022\u003EDeformables\u003C/b\u003E\u00A0section.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nGiven the only mention is in the deformables section, which KSP doesn\u0027t use, I wouldn\u0027t expect anything in KSP/Unity to be any faster.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222871019\u0022 data-ipsquote-contentid=\u0022152661\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480617951\u0022 data-ipsquote-userid=\u0022171078\u0022 data-ipsquote-username=\u0022iSilver\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 hours ago, iSilver said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nand disabled AVX (xsavedisable 1: disabled AVX in Windows 10)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe MS documentation for this option indicates that it disables the use of the XSAVE instruction in the Windows kernel. \u00A0Nothing to do with AVX as far as I can see, it concerns the saving of the processor state so is only relevant to CPU context switches.\n\u003C/p\u003E\n\u003Cp\u003E\nThe bit of software on your machine\u00A0most likely to use AVX is your graphic card driver (or video encode/decode stuff but that\u0027s irrelevant to KSP) but even this is unlikely to make any significant difference as it just won\u0027t get used enough to be significant.\u00A0 If only 1% of the time is spent doing things using AVX instead then you will never see more than a 1% improvement (and probably more like 0.25%).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222870881\u0022 data-ipsquote-contentid=\u0022152661\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480611581\u0022 data-ipsquote-userid=\u002216426\u0022 data-ipsquote-username=\u0022sal_vager\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 hours ago, sal_vager said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nbut SSE2 can be taken as a minimum.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIndeed, SSE2 is an absolute requirement for Unity 5 (and probably 4 too) games. \u00A0SSE2 was introduced in the first Pentium 4 CPUs so\u00A0I really wouldn\u0027t want to play KSP on a machine without it, even if it were possible... \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"iSilver","CreatedById":171078,"CreatedDateTime":"2016-12-02T17:22:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222871755\u0022 data-ipsquote-contentid=\u0022152661\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480670009\u0022 data-ipsquote-userid=\u002297386\u0022 data-ipsquote-username=\u0022Padishar\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n7 hours ago, Padishar said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe MS documentation for this option indicates that it disables the use of the XSAVE instruction in the Windows kernel. \u00A0Nothing to do with AVX as far as I can see, it concerns the saving of the processor state so is only relevant to CPU context switches.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nIt does disable the cpu extended states (AVX\u002B, FMA, F16C) by disabling the use of xsave instruction.\n\u003C/p\u003E\n\u003Cp\u003E\nHere, with AVX enabled and disabled AIDA64 FPU\u00A0mandel (\u003Cspan style=\u0022font-size:12pt;font-family:Verdana;color:#000000;\u0022\u003E\u003Cspan style=\u0022font-size:10pt;font-family:Verdana;color:#000000;\u0022\u003Edouble-precision fp)\u00A0\u003C/span\u003E\u003C/span\u003Ebenchmark results:\n\u003C/p\u003E\n\u003Cp\u003E\nAVX on (normal windows):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg src=\u0022http://i.imgur.com/AYvRxg8.png\u0022 class=\u0022ipsImage\u0022 alt=\u0022AYvRxg8.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAVX off (xsavedisable 1):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg src=\u0022http://i.imgur.com/R4XQub7.png\u0022 class=\u0022ipsImage\u0022 alt=\u0022R4XQub7.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nCPUID bit readings:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg src=\u0022http://i.imgur.com/CXLmkkp.png\u0022 class=\u0022ipsImage\u0022 alt=\u0022CXLmkkp.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg src=\u0022http://i.imgur.com/sma96Yg.png\u0022 class=\u0022ipsImage\u0022 alt=\u0022sma96Yg.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nJust run any AVX/AVX2/FMA optimized benchmark with both settings.\n\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2016-12-02T17:55:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222872156\u0022 data-ipsquote-contentid=\u0022152661\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221480699326\u0022 data-ipsquote-userid=\u0022171078\u0022 data-ipsquote-username=\u0022iSilver\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n32 minutes ago, iSilver said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nIt does disable the cpu extended states\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI stand corrected, thanks for that. \u00A0It would be nice if MSDN said something about it actually disabling the AVX instructions in the CPU but it isn\u0027t the first bit of MS documentation that\u0027s wrong or misleading... \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u003C/p\u003E\n"}]}