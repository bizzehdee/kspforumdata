{"TopicId":120499,"ForumId":69,"TopicTitle":"SPH mirror symmetry, unequal drag on cargo bays","CreatedByName":"Clouds","CreatedById":32610,"CreatedDateTime":"2015-09-09T10:58:30Z","PageNum":1,"Articles":[{"CreatedByName":"Clouds","CreatedById":32610,"CreatedDateTime":"2015-09-09T10:58:30Z","Content":"\n\u003Cp\u003ESorry that I don\u0027t have a more minimal example/reduced test case. This is the first time I\u0027ve NOTICED a problem.\u003C/p\u003E\u003Cp\u003EThis (ugly, utilitarian, unspectacular) SSTO was pulling to the right, and also having trouble breaking the sound barrier. Well...I found out why. Check the drag values. (You can also see the SAS beginning to try left-yaw to hold it true.)\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022http://i.imgur.com/PceXDVM.jpg\u0022 alt=\u0022PceXDVM.jpg\u0022\u003E\u003C/p\u003E\u003Cp\u003EIt was built with symmetry. If I alt-click to copy each side, then place them back without using symmetry, then both sides have equal, low drag.\u003C/p\u003E\u003Cp\u003ECraft file: \u003Ca href=\u0022https://www.sendspace.com/file/az9t10\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.sendspace.com/file/az9t10\u003C/a\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-09T11:17:49Z\u0022 title=\u002209/09/2015 11:17  AM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 9, 2015\u003C/time\u003E by Clouds\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Gaarst","CreatedById":126740,"CreatedDateTime":"2015-09-09T12:19:20Z","Content":"\n\u003Cp\u003ECargo bays are known to cause problem with drag: something like parts behind them being exposed to airflow and causing drag. But I didn\u0027t know there were issues with symmetry...\u003C/p\u003E\u003Cp\u003EThere\u0027s not much you can do I\u0027m afraid. I don\u0027t think Claw\u0027s Stock Bug Fix Modules has a fix for this issue (to be confirmed) so you either have to wait for a fix from Squad or redesign your craft. This issue might also be somewhat random, so if you launch you ship several times there might be a chance that this doesn\u0027t occur.\u003C/p\u003E\u003Cp\u003EI hope someone else will be able to help you better than I can \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Clouds","CreatedById":32610,"CreatedDateTime":"2015-09-11T09:45:26Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Gaarst\u0022 data-cite=\u0022Gaarst\u0022\u003E\u003Cdiv\u003EI hope someone else will be able to help you better than I can \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, I did say that it was \u0022fixable\u0022 by placing the parts without symmetry after the fact, but, that\u0027s a workaround. It doesn\u0027t keep it from happening in the first place. \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 alt=\u0022:wink:\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-09-11T16:32:10Z","Content":"\n\u003Cp\u003EI suppose the most important question is whether it only happens with cargo bays (and service bays) or with other parts when applied with symmetry too...\u003C/p\u003E\u003Cp\u003ESome similar sounding bugs have been reported in the official bug tracker, e.g. \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/5260\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://bugs.kerbalspaceprogram.com/issues/5260\u003C/a\u003E, though about lift rather than drag. They may well be different effects of the same underlying bug.\u003C/p\u003E\n"},{"CreatedByName":"Stoney3K","CreatedById":139954,"CreatedDateTime":"2015-09-13T08:00:51Z","Content":"\n\u003Cp\u003ENoticed the same thing. Mk3 space plane with Mk2 side tanks and utility/cargo bays, causes uneven drag even though the tanks and bays are exactly identical. Ultimately this leads to the ship yawing to one side and losing control when supersonic.\u003C/p\u003E\u003Cp\u003EI noticed the phantom lift issue as well, which would cause a similar problem on the roll axis.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-09-13T08:30:57Z","Content":"\n\u003Cp\u003EThis is interesting and I think I know what\u0027s going on, this shouldn\u0027t be reproducible with other parts if I\u0027m right.\u003C/p\u003E\u003Cp\u003ECargobays have two nodes at each end so they can be serially attached and the payload can be fitted inside, when a cargobay is normally attached the \u0022out\u0022 facing node is connected and drag is calculated correctly, but if the bay is a symmetry clone it may be attaching via the wrong node, ignoring the strict part alignment rules.\u003C/p\u003E\u003Cp\u003EThis would cause KSP to treat the bay as if it was not occluded at all, you get a \u003Cem\u003Elot \u003C/em\u003Eof drag from the flat face of a Mk3 part.\u003C/p\u003E\u003Cp\u003EAlso, because of the strict attachment rules you should find that you cannot fit a part to the front inner node of the bay, it will instead try to fit to the front outer node, ie: inside the part in front of the cargobay.\u003C/p\u003E\u003Cp\u003EThis does not seem to occur all the time though, the craft file Clouds posted has equal drag on both sides but was made with symmetry, the issue only arises when the cargobays themselves are removed and refitted in symmetry.\u003C/p\u003E\u003Cp\u003EI can see from the part hierarchy that he placed other parts of the nacelle first, then created a symmetric pair, so the first cargobay would attach normally, its clone would also have correct attachment and the craft would be fine.\u003C/p\u003E\u003Cp\u003ESo rather than having to place all cargobays singularly to avoid this issue, just place the parent part of the cargobay in symmetry instead.\u003C/p\u003E\u003Cp\u003EEdit:\u003C/p\u003E\u003Cp\u003EFurther testing shows I was right, marking as solved.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-09-16T21:47:19Z\u0022 title=\u002209/16/2015 09:47  PM\u0022 data-short=\u00228 yr\u0022\u003ESeptember 16, 2015\u003C/time\u003E by sal_vager\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Stoney3K","CreatedById":139954,"CreatedDateTime":"2015-09-16T14:27:00Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022sal_vager\u0022 data-cite=\u0022sal_vager\u0022\u003E\u003Cdiv\u003E\u003Cp\u003EFurther testing shows I was right, marking as solved.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENegative on that. I have a craft with a Mk3 main fuselage and Mk2 fuel tanks used as nacelles, attached in symmetry, which have cargo bays attached to them (via their node). This seems to cause unequal drag and body lift issues.\u003C/p\u003E\u003Cp\u003EWill provide craft file if required.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-09-16T14:28:26Z","Content":"\n\u003Cp\u003EPlease provide it.\u003C/p\u003E\n"},{"CreatedByName":"Stoney3K","CreatedById":139954,"CreatedDateTime":"2015-09-16T18:05:20Z","Content":"\n\u003Cp\u003EJust something I quickly slapped together:\u003C/p\u003E\u003Cp\u003E\u003Cimg src=\u0022https://lh5.googleusercontent.com/ICTr6F9hNewG819Dz72Hnzk48ZU5bIQggfHej6FeFPHWH5LMdG320zIw3QiLF6YDSl8xliDCbhRKOAI=w1275-h553\u0022 alt=\u0022ICTr6F9hNewG819Dz72Hnzk48ZU5bIQggfHej6FeFPHWH5LMdG320zIw3QiLF6YDSl8xliDCbhRKOAI=w1275-h553\u0022\u003E\u003C/p\u003E\u003Cp\u003ECraft file:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://drive.google.com/file/d/0BxraMdXm6-GLejJ1N2k0V2ZJajg/view?usp=sharing\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/file/d/0BxraMdXm6-GLejJ1N2k0V2ZJajg/view?usp=sharing\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EBay on the left has a drag of 14, while the bay on the right has a drag of 7 just like the fuel tanks.\u003C/p\u003E\u003Cp\u003EBays are attached to the forward fuel tanks which are attached to the center cargo bay fuselage. The fuel tanks (and wings and everything attached to that) were placed with mirror symmetry.\u003C/p\u003E\u003Cp\u003EIssue is not Windows-specific since I built this craft on Linux.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-09-16T23:30:51Z","Content":"\n\u003Cp\u003EOkay, so knowing what I know from my previous testing I poked your craft a bit, and sure enough it was not possible to attach a part to the front inner node of the starboard cargobay, it was already connected to the fuel tank in front of it.\u003C/p\u003E\u003Cp\u003EAnd flying the craft showed excessive drag on one side, just as you say.\u003C/p\u003E\u003Cp\u003EBut it was fixable in the same way I outlined above, resulting in a low drag craft, further testing showed the drag from the bad bay to be just as high as other cargobays with no streamlining at all.\u003C/p\u003E\u003Cblockquote class=\u0022imgur-embed-pub\u0022 lang=\u0022en\u0022 data-id=\u0022a/vjz4c\u0022\u003E\u003Ca href=\u0022//imgur.com/a/vjz4c\u0022 rel=\u0022external nofollow\u0022\u003EJavascript is disabled. View full album\u003C/a\u003E\u003C/blockquote\u003E\u003Cscript async=\u0022\u0022 src=\u0022//s.imgur.com/min/embed.js\u0022 charset=\u0022utf-8\u0022\u003E\u003C/script\u003E\u003Cp\u003EHere\u0027s the fixed craft \u003Ca href=\u0022https://www.dropbox.com/s/9m57f79wr7i81im/Javelin%20100%20Fixed.craft?dl=0\u0022 rel=\u0022external nofollow\u0022\u003E\u003Cstrong\u003E[Dropbox link]\u003C/strong\u003E\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EThe issue with drag can be solved, and is only a symptom of another issue, that being the strict part attachment rules ignored by symmetry clones and can only cause an issue with bays as they are the only parts with dual nodes.\u003C/p\u003E\u003Cp\u003EBut that is an issue for the official bug tracker, this is not the bug tracker, this is the support forum \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Stoney3K","CreatedById":139954,"CreatedDateTime":"2015-09-17T07:49:48Z","Content":"\n\u003Cp\u003ESo how did you fix the issue now? Did you attach each nacelle one by one? Because that would work fine when the nacelles are perfectly level and centered on the middle fuselage, but it would throw the craft out of balance if you try to shift or rotate the wings, as their symmetrical clones won\u0027t move or rotate along with it. And there is no way to align them numerically, so you would need to eyeball it.\u003C/p\u003E\u003Cp\u003EI already tried removing the bays and re-attaching them without any symmetry, but that will break the symmetry for the rest of the parts in the nacelle. It\u0027s fine and dandy when the nacelles are straight and level, but impossible to balance when the nacelle and the wings have an angle of incidence.\u003C/p\u003E\u003Cp\u003EMy suspicion is that the problem is caused by the inner and outer nodes of the cargo bay being so close together that the symmetry rules will pick the closest one nearby, which is the wrong one. Adding a bulkhead and shifting the node slightly inward would solve that issue, but it would cause a new issue with the cargo bays no longer being capable of carrying long payloads.\u003C/p\u003E\u003Cp\u003EAlternatively, you would have the inner node floating in mid-air, but this would cause a cosmetic ugliness.\u003C/p\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-09-17T08:30:05Z","Content":"\n\u003Cp\u003EI just used normal 2x symmetry, if you look at the craft I fixed you will see the nacelles are not separate parts, one is the symmetry clone of the other.\u003C/p\u003E\u003Cp\u003EIf the strict part attachment rule was being honoured by symmetry clones this issue would not occur, if you read through the Imgur gallery you\u0027ll see what I mean, so next time this happens to you just rettach the nacelles to get it to work correctly.\u003C/p\u003E\u003Cp\u003EIt would be useful to know exactly how you and Clouds are able to trigger this issue when most other players are not, so if you can consistently reproduce the effect with a simpler craft please post step by step instructions.\u003C/p\u003E\n"}]}