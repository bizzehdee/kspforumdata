{"TopicId":116529,"ForumId":69,"TopicTitle":"Forced dx11 FPS drops/stuttering with crewed vessels only, when -forced-d3d11 is used","CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-07-21T23:09:45Z","PageNum":1,"Articles":[{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-07-21T23:09:45Z","Content":"Hello,\n\nSorry for the sort of double post, reason: I did a **clean** install and **stock** KSP 1.0.4 gives the same issues for me.\n\nMy problem is when using -force-d3d11: \n\n-**every crewed** vessel, on the launchpad/outside the VAB, has major very short frequent fps drops, which result very stuttering game play.\n\n- any **uncrewed** vessel has no problems. Gameplay is smooth without any fps drops/stuttering.\n\nTwo screenshots of a stock vessel on the pad with the Debug menu showing the FPS drops in the performance graph, clearly shows the issue.\n\n[http://imgur.com/Ssq84i6,g3pdheK#0](http://imgur.com/Ssq84i6,g3pdheK#0)\n\nAnyone here who can clarify what I ran into?\n\nPS OpenGL is out of the question for me due to it poor performance on my rig.\n\nMy system specs:\n\nOS: Win7 x64\n\nCPU: Intel X5460 @3.8\n\nRAM: 6Gb ddr800\n\nGPU: (2x) HD5770"},{"CreatedByName":"joe_da_cro","CreatedById":147943,"CreatedDateTime":"2015-07-22T01:29:58Z","Content":"check a few things.\n\nCPU usuage\n\nGPU usuage\n\nVRAM usuage (your card has 512 to 1GB video memory)\n\nby that screen shot you are running at ~15 fps and get spikes above that occasionally. personally i think its that your VRam usage is hiting your cards limit.but its only a guess at this point"},{"CreatedByName":"Captain Sierra","CreatedById":74666,"CreatedDateTime":"2015-07-22T01:57:07Z","Content":"\u003E \n\u003E check a few things.\n\u003E CPU usuage\n\u003E \n\u003E GPU usuage\n\u003E \n\u003E VRAM usuage (your card has 512 to 1GB video memory)\n\u003E \n\u003E by that screen shot you are running at ~15 fps and get spikes above that occasionally. personally i think its that your VRam usage is hiting your cards limit.but its only a guess at this point\n\nI can confirm the issue and I have 2GB of VRAM.\n\nAnd welcome to the forums, way to be helpful."},{"CreatedByName":"Gkirmathal","CreatedById":135480,"CreatedDateTime":"2015-07-22T09:43:11Z","Content":"@joe, please review my second screenshots: uncrewed, has a constant 30\u002Bfps, no dips etc. Fluent gameplay.\n\nIf vram was the cause, what does one crewmemer add which causes this issue?\n\nIll check cpu usage tonight. Thougj nothing was out of the ordinary if memory serves me right."},{"CreatedByName":"joe_da_cro","CreatedById":147943,"CreatedDateTime":"2015-07-22T15:16:05Z","Content":"it is odd i loaded the d3d11 version of the game and i dont have that problem.\n\ni can tell you my ram usages is about 1.5GB also vram is about the same too. (this is straight stock install with 0 mods).\n\ni guess the best thing we can do is set a control for what could be going on. So if you could replicate the conditions i had on my game.\n\n- fresh install of the game\n\n- start a new game\n\n- build a command module and the basic solid fuel booster.\n\n- report launch fps\n\n- report inflight fps\n\nmy results are as follows.\n\nlauncher fps: 60 (vsynced)\n\ninflight fps: 53\n\ni have a 3770k @ 4.2Ghz\n\nand a 770GTX 4GB \n\n32 GB 1600Mhz ram with no swap files.\n\nnow to give some theory on what could be happening with manned and unmanned. when you are loading a manned mission you are loading the interiors and kerbals inside as well as the rest of the ship. the reason i suggested the control for the experiment is to reduce the parts and to see how your game reacts to a simple ship. \n\nI posted my specs so you may compare to help find what is slowing your performance in game. \n\nlastly try this experiment only if you are comfortable in doing so.\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\n\ngo into control panel \u003E system \u003E advanced system settings\n\nmake sure you have the advanced tab selected.\n\nclick on the settings button in the performance section\n\nclick on the advanced tab\n\nclick on change on the virtual memory section\n\nuntick automatically manage paging file size for the system. (or leave unticked if it already is)\n\nclick on custom size\n\nset initial size to 16mb\n\nset maximum size to what ever shows as recommended.\n\nonce you apply this, you will receive a message that windows will not be able to do error reporting with less than 800mb of page files. this warning is mostly for blue screens and you can change it back after you finish the experiment.\n\nNow once you have applied the settings restart your PC\n\nonce restarted play kerbal firstly running the control settings i gave earlier to see if there is any diffference (there shouldnt be) then secondly launch a common style ship you like to use. the longer you play the better the test.\n\nonce you finish if you go back to the page file page i directed earlier you should see how much pagefile windows has assigned becuase it ran out of RAM and needed more. if the number is a few hundred MB then its not too bad and i have hit another dead end. if it is ~350\u002B it could be a possible cause of your issues.\n\nNote if you do this experiment make sure you change it back to the settings before unless you dont mind the settings as they are. also when windows re sizes the pagefile file on your hard disk/ssd you will notice lag and slow downs. while this takes place and your pc will return to normal once it has finished the resize.\n\nI hope there is some help here.\n\np.s one application i use when which i think is a god send. it is called process lasso. it is like an advanced task manager but it has other cool features like setting power profiles for certain applications, setting core parking, application priority, cpu affinity, io priority etc. it has a gaming mode too which will set your PC to high performance and not use its inbuilt CPU balancer on games while balancing other apps. helps for running virus scans while you are playing. i wont post the links here but you can easily google it and install the free version which is not as good as the paid version but still decent. i personally paid for the application after using the free version for a while."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-07-22T17:38:57Z","Content":"Don\u0027t forget guys that the -force-d3d11 and -force-opengl command line arguments are [***Unity3d Game engine features***](http://docs.unity3d.com/Manual/CommandLineArguments.html), Squad didn\u0027t include them and have absolutely no control over them, and cannot address any issues that arise from using them, KSP is only tested on d3d9.\n\nWe volunteers and members can try to offer advice though, but all I can really suggest is that you try another graphics driver.\n\nAlso, if you have jumpy text in-game from using -force-d3d11, that\u0027s why."}]}