{"TopicId":161152,"ForumId":69,"TopicTitle":"Segfault closing KSP; system halt after a few minutes","CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2017-05-27T08:54:33Z","PageNum":1,"Articles":[{"CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2017-05-27T08:54:33Z","Content":"\n\u003Cp\u003E\nfyi, unmodded KSP 1.3 64 on linux debian 9, last logfile-entries (verbose logging):\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n[LOG 09:33:14.500] [HighLogic]: =========================== Scene Change : From SPACECENTER to MAINMENU (Async) =====================\u003Cbr\u003E\n[LOG 09:33:14.501] [UIMasterController]: ShowUI\u003Cbr\u003E\n[LOG 09:33:14.501] Game Unpaused!\u003Cbr\u003E\n[LOG 09:33:14.624] [UIApp] OnDestroy: ContractsApp\u003Cbr\u003E\n[LOG 09:33:14.625] [UIApp] OnDestroy: KSPedia\u003Cbr\u003E\n[LOG 09:33:14.635] [UIMasterController]: HideUI\u003Cbr\u003E\n[LOG 09:33:15.143] [UIMasterController]: ShowUI\u003Cbr\u003E\n[LOG 09:33:15.309] [ScenarioUpgradeables]: Back to Main Menu. Clearing persistent data.\u003Cbr\u003E\n[LOG 09:33:15.309] [ApplicationLauncher] OnSceneLoadedGUIReady: scene MAINMENU ShouldBeVisible() True ShouldBeOnTop() True iIsPositionedAtTop False\u003Cbr\u003E\n[LOG 09:33:15.309] [ApplicationLauncher] SpawnSimpleLayout: VerticalTopDown\u003Cbr\u003E\n[LOG 09:33:15.310] [ApplicationLauncher] SetHidden:\u003Cbr\u003E\n[LOG 09:33:15.312] [MessageSystem] Reposition 0.02 7645\u003Cbr\u003E\n[LOG 09:33:19.900] [UIApp] OnDestroy: MessageSystem\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nHappens even without loading the game after when i just start and quit directly from the loading menu:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n[LOG 09:38:49.394] [HighLogic]: =========================== Scene Change : From LOADING to MAINMENU =====================\u003Cbr\u003E\n[LOG 09:38:49.560] [UIMasterController]: ShowUI\u003Cbr\u003E\n[LOG 09:38:49.738] [GameParameters]: Loaded custom parameter class CommNetParams.\u003Cbr\u003E\n[LOG 09:38:49.738] [GameParameters]: Loaded custom parameter class AdvancedParams.\u003Cbr\u003E\n[LOG 09:38:49.763] [ApplicationLauncher] Awake False\u003Cbr\u003E\n[LOG 09:38:49.764] [ApplicationLauncher] SpawnSimpleLayout: VerticalTopDown\u003Cbr\u003E\n[LOG 09:38:49.771] [UiApp] Awake: MessageSystem\u003Cbr\u003E\n[LOG 09:38:49.771] [ApplicationLauncher] OnSceneLoadedGUIReady: scene MAINMENU ShouldBeVisible() True ShouldBeOnTop() True iIsPositionedAtTop True\u003Cbr\u003E\n[LOG 09:38:49.786] [UIApp] Adding MessageSystem to Application Launcher\u003Cbr\u003E\n[LOG 09:38:49.788] [ApplicationLauncher] SetHidden:\u003Cbr\u003E\n[LOG 09:38:49.794] [MessageSystem] OnAppInitialized\u003Cbr\u003E\n[LOG 09:38:49.794] [MessageSystem] Reposition 0.03809502 6779\u003Cbr\u003E\n[LOG 09:38:52.738] [UIApp] OnDestroy: MessageSystem\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nThe last few lines of gdb output:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThread 3 \u0022KSP.x86_64\u0022 received signal SIGPWR, Power fail/restart.\u003Cbr\u003E\n0x00007ffff79c7536 in futex_abstimed_wait_cancelable (private=0, abstime=0x0, expected=0,\u003Cbr\u003E\n\u00A0\u00A0\u00A0 futex_word=0x7ffff36a3070) at ../sysdeps/unix/sysv/linux/futex-internal.h:205\u003Cbr\u003E\n205\u00A0\u00A0 \u00A0../sysdeps/unix/sysv/linux/futex-internal.h: No such file or directory.\u003Cbr\u003E\n(gdb)\u003Cbr\u003E\nContinuing.\n\u003C/p\u003E\n\u003Cp\u003E\nThread 3 \u0022KSP.x86_64\u0022 received signal SIGXCPU, CPU time limit exceeded.\u003Cbr\u003E\n0x00007ffff61c23a6 in __GI___sigsuspend (set=0x7ffff36a5900)\u003Cbr\u003E\n\u00A0\u00A0\u00A0 at ../sysdeps/unix/sysv/linux/sigsuspend.c:30\u003Cbr\u003E\n30\u00A0\u00A0 \u00A0../sysdeps/unix/sysv/linux/sigsuspend.c: No such file or directory.\u003Cbr\u003E\n(gdb)\u003Cbr\u003E\nContinuing.\u003Cbr\u003E\n[Thread 0x7ffff2ad6700 (LWP 3642) exited]\u003Cbr\u003E\n[Thread 0x7ffff7ff1700 (LWP 3641) exited]\u003Cbr\u003E\n[Thread 0x7ffff28d5700 (LWP 3643) exited]\n\u003C/p\u003E\n\u003Cp\u003E\nThread 1 \u0022KSP.x86_64\u0022 received signal SIGSEGV, Segmentation fault.\u003Cbr\u003E\n[Switching to Thread 0x7ffff7fd3740 (LWP 3637)]\u003Cbr\u003E\n0x0000000000f2dd3d in ?? ()\u003Cbr\u003E\n(gdb)\u003Cbr\u003E\nContinuing.\u003Cbr\u003E\nCouldn\u0027t get registers: No such process.\u003Cbr\u003E\nCouldn\u0027t get registers: No such process.\u003Cbr\u003E\nCouldn\u0027t get registers: No such process.\u003Cbr\u003E\n(gdb)\u003Cbr\u003E\nContinuing.\u003Cbr\u003E\nCouldn\u0027t get registers: No such process.\u003Cbr\u003E\n(gdb) [Thread 0x7ffff0881700 (LWP 3644) exited]\n\u003C/p\u003E\n\u003Cp\u003E\nCannot execute this command without a live selected thread.\u003Cbr\u003E\n(gdb)\u003Cbr\u003E\nCannot execute this command without a live selected thread.\u003Cbr\u003E\n(gdb)\u003Cbr\u003E\nCannot execute this command without a live selected thread.\u003Cbr\u003E\n(gdb)\u003Cbr\u003E\nCannot execute this command without a live selected thread.\u003Cbr\u003E\n(gdb)\u003Cbr\u003E\nProgram terminated with signal SIGSEGV, Segmentation fault.\u003Cbr\u003E\nThe program no longer exists.\u003Cbr\u003E\nQuit\u003Cbr\u003E\n(gdb)\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-27T16:25:48Z\u0022 title=\u002205/27/2017 04:25  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 27, 2017\u003C/time\u003E by Green Baron\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ThirdOfSeven","CreatedById":135015,"CreatedDateTime":"2017-05-27T11:18:17Z","Content":"\n\u003Cp\u003E\nProgram received signal SIGSEGV, Segmentation fault.\u003Cbr\u003E\n0x0000000000011816 in ?? ()\u003Cbr\u003E\n(gdb) bt\u003Cbr\u003E\n#0\u00A0 0x0000000000011816 in ?? ()\u003Cbr\u003E\n#1\u00A0 0x00007fff405435de in setLanguage () from /home/stasikos/Soft/KSP/KSP_1.3/KSP_Data/Plugins/x86_64/liblingoona.grammar.kerbal.so\u003Cbr\u003E\n#2\u00A0 0x00000000402415ed in ?? ()\u003Cbr\u003E\n#3\u00A0 0x00007fffffffc1e0 in ?? ()\u003Cbr\u003E\n#4\u00A0 0x0000000001fe00e0 in ?? ()\u003Cbr\u003E\n#5\u00A0 0x0000000000000000 in ?? ()\u003Cbr\u003E\n(gdb)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cbr\u003E\nDo you have such backtrace too (bt command)? If so, I have same issue probably \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E On Ubuntu 14.04 x86_64 with gcc-4.9 (to get that lingoona loading)\n\u003C/p\u003E\n"},{"CreatedByName":"ThirdOfSeven","CreatedById":135015,"CreatedDateTime":"2017-05-27T11:34:44Z","Content":"\n\u003Cp\u003E\nIf you want a really quick and dirty fix for that, you can rename KSP_Data/Plugins/x86_64/liblingoona.grammar.kerbal.so to, for example, liblingoona.grammar.kerbal.so_ so it will not load. It leads to some artifacts in displayed messages though, but game will run until we can get good fix for that.\n\u003C/p\u003E\n\u003Cp\u003E\nP.S. It applies if your bt commands shows problem is in liblingoona only.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-27T11:36:00Z\u0022 title=\u002205/27/2017 11:36  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 27, 2017\u003C/time\u003E by ThirdOfSeven\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2017-05-27T11:39:41Z","Content":"\n\u003Cp\u003E\nTakes me some time to get there because the program generates \u003Cs\u003Ehundreds of\u003C/s\u003E a lot of SIGPWRs and SIGXCPUs. Threading problems ? Backtrace after receiving SIGSEGV:\n\u003C/p\u003E\n\u003Cdiv class=\u0022ipsSpoiler\u0022 data-ipsspoiler=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsSpoiler_header\u0022\u003E\n\u003Cspan\u003ESpoiler\u003C/span\u003E\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsSpoiler_contents\u0022\u003E\n\u003Cp\u003E\nbt\u003Cbr\u003E\n#0\u00A0 0x0000000000f2dd3d in ?? ()\u003Cbr\u003E\n#1\u00A0 0x00007ffff61c4910 in __run_exit_handlers (status=0, listp=0x7ffff65275d8 \u0026lt;__exit_funcs\u0026gt;,\u003Cbr\u003E\n\u00A0\u00A0\u00A0 run_list_atexit=run_list_atexit@entry=true, run_dtors=run_dtors@entry=true) at exit.c:83\u003Cbr\u003E\n#2\u00A0 0x00007ffff61c496a in __GI_exit (status=\u0026lt;optimized out\u0026gt;) at exit.c:105\u003Cbr\u003E\n#3\u00A0 0x00007ffff61af2b8 in __libc_start_main (main=0x4651a0, argc=1, argv=0x7fffffffe6b8,\u003Cbr\u003E\n\u00A0\u00A0\u00A0 init=\u0026lt;optimized out\u0026gt;, fini=\u0026lt;optimized out\u0026gt;, rtld_fini=\u0026lt;optimized out\u0026gt;,\u003Cbr\u003E\n\u00A0\u00A0\u00A0 stack_end=0x7fffffffe6a8) at ../csu/libc-start.c:325\u003Cbr\u003E\n#4\u00A0 0x000000000046f695 in ?? ()\u003Cbr\u003E\n#5\u00A0 0x00007fffffffe6a8 in ?? ()\u003Cbr\u003E\n#6\u00A0 0x000000000000001c in ?? ()\u003Cbr\u003E\n#7\u00A0 0x0000000000000001 in ?? ()\u003Cbr\u003E\n#8\u00A0 0x00007fffffffe9ac in ?? ()\u003Cbr\u003E\n#9\u00A0 0x0000000000000000 in ?? ()\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E\n\u003Cp\u003E\nNot very helpful. The kernel apparently intervenes on cleanup, after the graphics window was closed.\n\u003C/p\u003E\n\u003Cp\u003E\nFunny thing: this happens just by loading ksp to the initial menu and pressing directly quit.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-27T11:43:19Z\u0022 title=\u002205/27/2017 11:43  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 27, 2017\u003C/time\u003E by Green Baron\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ThirdOfSeven","CreatedById":135015,"CreatedDateTime":"2017-05-27T12:31:13Z","Content":"\n\u003Cp\u003E\nOh, sorry you got into Main menu at least.\n\u003C/p\u003E\n"},{"CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2017-05-27T12:45:33Z","Content":"\n\u003Cp\u003E\nHallelujah ! :-)\n\u003C/p\u003E\n\u003Cp\u003E\nAm reporting this because i\u0027d expect problems like this to come up whenever they like. Usually 20 sec. before an otherwise successful touchdown on Tylo or so ...\n\u003C/p\u003E\n"},{"CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2017-05-27T16:23:24Z","Content":"\n\u003Cp\u003E\n... and so it comes: after a few minutes of play my pc powers off, no shutdown, simply a halt, then restarts. I already mentioned all those unhandled SIGPWRs and SIGXCPUs. The first time i see a program behave like that.\n\u003C/p\u003E\n\u003Cp\u003E\nThough i have a reasonable filesystem and shouldn\u0027t suffer from any dataloss this is certainly not playable.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cs\u003EEdit: system halt did not happen when gdb was running, but all all those unhandled signals heavily clutter the output. This really is the first that i blame a program for halting the pc.\u003C/s\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nYes, it does.\n\u003C/p\u003E\n\u003Cp\u003E\nNothing in the system log files ...\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-27T17:24:11Z\u0022 title=\u002205/27/2017 05:24  PM\u0022 data-short=\u00227 yr\u0022\u003EMay 27, 2017\u003C/time\u003E by Green Baron\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ThirdOfSeven","CreatedById":135015,"CreatedDateTime":"2017-05-29T05:18:57Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223070019\u0022 data-ipsquote-contentid=\u0022161152\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221495902204\u0022 data-ipsquote-userid=\u0022107381\u0022 data-ipsquote-username=\u0022Green Baron\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/27/2017 at 7:23 PM, Green Baron said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\n... and so it comes: after a few minutes of play my pc powers off, no shutdown, simply a halt, then restarts. I already mentioned all those unhandled SIGPWRs and SIGXCPUs. The first time i see a program behave like that.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThose signals is not something causing this. You can stop halting on them if you tell gdb\n\u003C/p\u003E\n\u003Cp\u003E\n\u0026gt; handle SIGPWR nostop noprint\n\u003C/p\u003E\n\u003Cp\u003E\n\u0026gt; handle SIGXCPU nostop noprint\n\u003C/p\u003E\n\u003Cp\u003E\nthey are just signals system sends to application to note it is quite CPU-hungry and must save some CPU time. You need to check something else.\n\u003C/p\u003E\n\u003Cp\u003E\nHalting like that may be hardware (overheating?) problem, not software. Check with something else running to load your system, maybe video encoding, archiving things or running cpuburn tool.\n\u003C/p\u003E\n"},{"CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2017-05-29T07:24:28Z","Content":"\n\u003Cp\u003E\nI know about the signals. No, it is definitely KSP halting the system.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: cpu temp below 60\u00B0 according to sensors. This is not an overheating problem. The pc has 4 years, i played a lot ksp on it (little since 1.0.5).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-05-29T08:07:06Z\u0022 title=\u002205/29/2017 08:07  AM\u0022 data-short=\u00227 yr\u0022\u003EMay 29, 2017\u003C/time\u003E by Green Baron\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2017-05-29T09:45:39Z","Content":"\n\u003Cp\u003E\nA software provoked halt is a single instruction.\n\u003C/p\u003E\n\u003Cp\u003E\nI limited cpu frequency to something below norm frequency (3200 of 3500mhz) and the halts still happen a few seconds into a flight. There is no software running except for the system processes and a terminal. This is debian 9, no other software has provoked that behaviour before.\n\u003C/p\u003E\n\u003Cp\u003E\nI could experiment further with limiting the cpu time or memory for the application but i doubt that is worth the while. I\u0027d rather expect a forgotten piece of code somewhere in the stack of tools, engines and frameworks ksp uses. Maybe others come up with similar problems ....\n\u003C/p\u003E\n"},{"CreatedByName":"Green Baron","CreatedById":107381,"CreatedDateTime":"2017-05-29T17:07:04Z","Content":"\n\u003Cp\u003E\nKsp ran on my notebook for ~10min without crashes. But the poor thing is a little overstressed :-)\n\u003C/p\u003E\n\u003Cp\u003E\nOn exit the above mentioned segfault happened there as well.\n\u003C/p\u003E\n"}]}