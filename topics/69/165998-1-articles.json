{"TopicId":165998,"ForumId":69,"TopicTitle":"Solved, FYI: 1.3 linux early crash on startup, no logs produced.","CreatedByName":"manaiaK","CreatedById":129599,"CreatedDateTime":"2017-09-30T02:51:59Z","PageNum":1,"Articles":[{"CreatedByName":"manaiaK","CreatedById":129599,"CreatedDateTime":"2017-09-30T02:51:59Z","Content":"\n\u003Cp\u003E\nI\u0027ll just put this here as a record of troubleshooting a problem with KSP 1.3 on Linux Mint 17.3 Cinnamon 64-bit. I hope it helps someone else, someday...\n\u003C/p\u003E\n\u003Cp\u003E\nHardware: Sandy Bridge i7-2600, 12GB, 1TB, GXT1050 (2GB VRAM).\u00A0 Shell: Bash.\n\u003C/p\u003E\n\u003Cp\u003E\nProcess to produce the problem:\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ cd ~/games/ksp_1_3/\u00A0\u00A0 # folder to which KSP 1.3 was unzipped.\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ ./KSP.x86_64\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nResult:\n\u003C/p\u003E\n\u003Cp\u003E\nA completely blank/dark grey screen flashes up a couple of times, and then I am returned to the command line. A core dump is produced.\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ echo $?\u003Cbr\u003E\n127\u003C/span\u003E\u003C/span\u003E\u003Cbr\u003E\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ find . -type f -name \u0022*.log\u0022\u003Cbr\u003E\n$\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 #no results.\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u0022127\u0022 is the universal \u0022user-defined error\u0022 return code. Not much help. Nor is the core dump of much help, without the source code or a binary compiled for debugging. As shown, no log files are produced by KSP.\n\u003C/p\u003E\n\u003Cp\u003E\nSolution Steps:\n\u003C/p\u003E\n\u003Cp\u003E\nRequired packages: \u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003Estrace\u003C/span\u003E and \u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003Emlocate\u003C/span\u003E.\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ sudo updatedb \u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ strace -s 256 -o strace.log ./KSP.x86_64\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAs before KSP runs and crashes, but this time a file strace.log is produced. The \u0022-s 256\u0022 means record up to 256 bytes of strings in the program, so you can get full file names.\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ less strace.log\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nPress \u0027End\u0027 to go to the end of the file.\u00A0 Working backwards from the end of the trace log,\u00A0 the last significant thing was an error within the file \u0022libkeyboard.so\u0022.\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ ls -lh \u0060locate libkeyboard.so\u0060\u003Cbr\u003E\n-rwxr-xr-x 1 manaiaK\u00A0 users\u00A0 13K May 26 04:54 /srv/home/manaiaK/games/ksp_1_3/KSP_Data/Plugins/x86_64/libkeyboard.so*\u003Cbr\u003E\n-rwxr-xr-x 1 manaiaK\u00A0 users 7.7K May 26 04:54 /srv/home/manaiaK/games/ksp_1_3/KSP_Data/Plugins/x86/libkeyboard.so*\u003Cbr\u003E\n-rw-r--r-- 1 root root\u00A0\u00A0 56K Jun 25\u00A0 2014 /usr/lib/gnome-settings-daemon-3.0/libkeyboard.so\u003Cbr\u003E\n-rw-r--r-- 1 root root\u00A0\u00A0 31K Mar\u00A0 8\u00A0 2016 /usr/lib/x86_64-linux-gnu/cinnamon-settings-daemon-3.0/libkeyboard.so\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nSo, there are different versions of this file.\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ cd KSP_Data/Plugins/x86_64\u003Cbr\u003E\n$ cp libkeyboard.so libkeyboard.so.bak\u003Cbr\u003E\n$ cp /usr/lib/x86_64-linux-gnu/cinnamon-settings-daemon-3.0/libkeyboard.so .\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ cd -\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 # returns to ~games/ksp_1_3\u003Cbr\u003E\n$ strace -s 256 -o strace.log ./KSP.x86_64\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nKSP runs and crashes as before, but inspecting the strace.log file as before reveals a different problem! Progress!.\n\u003C/p\u003E\n\u003Cp\u003E\nThis time the problem is with a file liblingoona.grammar.kerbal.so, which is unique to KSP\n\u003C/p\u003E\n\u003Cp\u003E\nI downloaded the KSP 1.3.1 pre-release, and sure enough the liblingoona.grammar.kerbal.so file was different.\u00A0 Copying the 1.3.1 liblingoona in place of the one in my 1.3 install\u00A0 using the process described above fixed that problem.\n\u003C/p\u003E\n\u003Cp\u003E\nAfter that, KSP ran normally but produced a SIGSEGV and core dump when I quit the game.\n\u003C/p\u003E\n\u003Cp\u003E\nTo not get core dumps when I run KSP, but still get them when required for debugging my own stuff:-\n\u003C/p\u003E\n\u003Cp style=\u0022margin-left:40px;\u0022\u003E\n\u003Cspan style=\u0022color:#669900;\u0022\u003E\u003Cspan style=\u0022font-family:\u0027Lucida Sans Unicode\u0027, \u0027Lucida Grande\u0027, sans-serif;\u0022\u003E$ ulimit -c 0 ; ./KSP_x86_64 ; ulimit -c unlimited\u003C/span\u003E\u003C/span\u003E\n\u003C/p\u003E\n"}]}