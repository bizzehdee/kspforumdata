{"TopicId":110173,"ForumId":69,"TopicTitle":"Extremely low framerates, low computer load","CreatedByName":"martinborgen","CreatedById":142875,"CreatedDateTime":"2015-05-21T00:05:35Z","PageNum":1,"Articles":[{"CreatedByName":"martinborgen","CreatedById":142875,"CreatedDateTime":"2015-05-21T00:05:35Z","Content":"I have framerates extremely rarely above 9. A spaceplane or rocket at 100-ish parts is usually between 2-4. Task manager shows processor load (for each logical core) to be no more than 16-20%, ram is not full (about 2,5 - 2,7 GB for KSP), and hard drive activity is very low. \n\nRunning KSP, latest update via Steam, on a (from dxdiag):\n\n    Windows 8.1 64-bit (6.3, Build 9600) (9600.winblue_r9.150322-1500)ASUSTeK COMPUTER INC.       System Model: X550JK               BIOS: X550JK.303          Processor: Intel(R) Core(TM) i5-4200H CPU @ 2.80GHz (4 CPUs), ~2.8GHz             Memory: 8192MB RAMAvailable OS Memory: 8076MB RAM          Page File: 3545MB used, 6321MB availableWindows Dir: C:\\Windows    DirectX Version: DirectX 11DX Setup Parameters: Not found   User DPI Setting: Using System DPI System DPI Setting: 96 DPI (100 percent)    DWM DPI Scaling: Disabled     DxDiag Version: 6.03.9600.17415 64bit UnicodeIntel(R) HD Graphics 4600       Manufacturer: Intel Corporation          Chip type: Intel(R) HD Graphics Family           DAC type: Internal        Device Type: Full Device         Device Key: Enum\\PCI\\VEN_8086\u0026DEV_0416\u0026SUBSYS_178D1043\u0026REV_06     Display Memory: 1792 MB   Dedicated Memory: 32 MB      Shared Memory: 1760 MB       Current Mode: 1920 x 1080 (32 bit) (59Hz) Monitor Name: BenQ E2200HD DVI      Monitor Model: BenQ E2200HD         Monitor Id: BNQ790C        Native Mode: 1920 x 1080(p) (60.000Hz)        Output Type: HDMI        Driver Name: igdumdim64.dll,igd10iumd64.dll,igd10iumd64.dll,igdumdim32,igd10iumd32,igd10iumd32Driver File Version: 10.18.0010.3496 (English)     Driver Version: 10.18.10.3496        DDI Version: 11.1     Feature Levels: 11.1,11.0,10.1,10.0,9.3,9.2,9.1       Driver Model: WDDM 1.3Graphics Preemption: DMA Compute Preemption: Thread           Miracast: SupportedHybrid Graphics GPU: Integrated     Power P-states: Not Supported  Driver Attributes: Final Retail   Driver Date/Size: 3/18/2014 05:10:38, 26168168 bytes        WHQL Logo\u0027d: n/a    WHQL Date Stamp: n/a  Device Identifier: {D7B78E66-4756-11CF-5B7E-8737BBC2C735}          Vendor ID: 0x8086          Device ID: 0x0416          SubSys ID: 0x178D1043        Revision ID: 0x0006 Driver Strong Name: oem7.inf:5f63e534dd929195:iHSWM_w81:10.18.10.3496:pci\\ven_8086\u0026dev_0416\u0026subsys_178d1043     Rank Of Driver: 00DA0001        Video Accel: ModeMPEG2_A ModeMPEG2_C ModeWMV9_C ModeVC1_C         DXVA2 Modes: DXVA2_ModeMPEG2_VLD  DXVA2_ModeMPEG2_IDCT  DXVA2_ModeWMV9_IDCT  DXVA2_ModeVC1_IDCT  DXVA2_ModeH264_VLD_NoFGT     Deinterlace Caps: {BF752EF6-8CC4-457A-BE1B-08BD1CAEEE9F}: Format(In/Out)=(YUY2,YUY2) Frames(Prev/Fwd/Back)=(0,0,1) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_EdgeFiltering                      {335AA36E-7884-43A4-9C91-7F87FAF3E37E}: Format(In/Out)=(YUY2,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_BOBVerticalStretch                      {5A54A0C9-C7EC-4BD9-8EDE-F3C75DC4393B}: Format(In/Out)=(YUY2,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend                      {BF752EF6-8CC4-457A-BE1B-08BD1CAEEE9F}: Format(In/Out)=(UYVY,YUY2) Frames(Prev/Fwd/Back)=(0,0,1) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_EdgeFiltering                      {335AA36E-7884-43A4-9C91-7F87FAF3E37E}: Format(In/Out)=(UYVY,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_BOBVerticalStretch                      {5A54A0C9-C7EC-4BD9-8EDE-F3C75DC4393B}: Format(In/Out)=(UYVY,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend                      {BF752EF6-8CC4-457A-BE1B-08BD1CAEEE9F}: Format(In/Out)=(YV12,YUY2) Frames(Prev/Fwd/Back)=(0,0,1) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_EdgeFiltering                      {335AA36E-7884-43A4-9C91-7F87FAF3E37E}: Format(In/Out)=(YV12,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_BOBVerticalStretch                      {5A54A0C9-C7EC-4BD9-8EDE-F3C75DC4393B}: Format(In/Out)=(YV12,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend                      {BF752EF6-8CC4-457A-BE1B-08BD1CAEEE9F}: Format(In/Out)=(NV12,YUY2) Frames(Prev/Fwd/Back)=(0,0,1) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_EdgeFiltering                      {335AA36E-7884-43A4-9C91-7F87FAF3E37E}: Format(In/Out)=(NV12,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_BOBVerticalStretch                      {5A54A0C9-C7EC-4BD9-8EDE-F3C75DC4393B}: Format(In/Out)=(NV12,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend                      {BF752EF6-8CC4-457A-BE1B-08BD1CAEEE9F}: Format(In/Out)=(IMC1,YUY2) Frames(Prev/Fwd/Back)=(0,0,1) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_EdgeFiltering                      {335AA36E-7884-43A4-9C91-7F87FAF3E37E}: Format(In/Out)=(IMC1,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_BOBVerticalStretch                      {5A54A0C9-C7EC-4BD9-8EDE-F3C75DC4393B}: Format(In/Out)=(IMC1,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend                      {BF752EF6-8CC4-457A-BE1B-08BD1CAEEE9F}: Format(In/Out)=(IMC2,YUY2) Frames(Prev/Fwd/Back)=(0,0,1) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_EdgeFiltering                      {335AA36E-7884-43A4-9C91-7F87FAF3E37E}: Format(In/Out)=(IMC2,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_BOBVerticalStretch                      {5A54A0C9-C7EC-4BD9-8EDE-F3C75DC4393B}: Format(In/Out)=(IMC2,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend                      {BF752EF6-8CC4-457A-BE1B-08BD1CAEEE9F}: Format(In/Out)=(IMC3,YUY2) Frames(Prev/Fwd/Back)=(0,0,1) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_EdgeFiltering                      {335AA36E-7884-43A4-9C91-7F87FAF3E37E}: Format(In/Out)=(IMC3,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_BOBVerticalStretch                      {5A54A0C9-C7EC-4BD9-8EDE-F3C75DC4393B}: Format(In/Out)=(IMC3,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend                      {BF752EF6-8CC4-457A-BE1B-08BD1CAEEE9F}: Format(In/Out)=(IMC4,YUY2) Frames(Prev/Fwd/Back)=(0,0,1) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_EdgeFiltering                      {335AA36E-7884-43A4-9C91-7F87FAF3E37E}: Format(In/Out)=(IMC4,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend DeinterlaceTech_BOBVerticalStretch                      {5A54A0C9-C7EC-4BD9-8EDE-F3C75DC4393B}: Format(In/Out)=(IMC4,YUY2) Frames(Prev/Fwd/Back)=(0,0,0) Caps=VideoProcess_YUV2RGB VideoProcess_StretchX VideoProcess_StretchY VideoProcess_AlphaBlend        D3D9 Overlay: Supported            DXVA-HD: Supported       DDraw Status: Enabled         D3D Status: Enabled         AGP Status: Enabled          Card name: NVIDIA GeForce GTX 850M            Manufacturer: NVIDIA          Chip type: GeForce GTX 850M           DAC type: Integrated RAMDAC        Device Type: Render-Only Device         Device Key: Enum\\PCI\\VEN_10DE\u0026DEV_1391\u0026SUBSYS_178D1043\u0026REV_A2     Display Memory: 4039 MB   Dedicated Memory: 1991 MB      Shared Memory: 2048 MB       Current Mode: n/a        Driver Name: nvd3dumx,nvwgf2umx,nvwgf2umx,nvd3dum,nvwgf2um,nvwgf2umDriver File Version: 9.18.0013.5286 (English)     Driver Version: 9.18.13.5286        DDI Version: 11     Feature Levels: 11.0,10.1,10.0,9.3,9.2,9.1       Driver Model: WDDM 1.3Graphics Preemption: DMA Compute Preemption: DMA           Miracast: Not Supported by Graphics driverHybrid Graphics GPU: Discrete     Power P-states: Not Supported  Driver Attributes: Final Retail   Driver Date/Size: 5/12/2015 08:27:22, 15858728 bytes        WHQL Logo\u0027d: n/a    WHQL Date Stamp: n/a  Device Identifier: n/a          Vendor ID: 0x10DE          Device ID: 0x1391          SubSys ID: 0x178D1043        Revision ID: 0x00A2 Driver Strong Name: oem47.inf:0f066de33b1d74a7:Section217:9.18.13.5286:pci\\ven_10de\u0026dev_1391\u0026subsys_178d1043     Rank Of Driver: 00DA0001        Video Accel: n/a        DXVA2 Modes: DXVA2_ModeMPEG2_VLD  DXVA2_ModeVC1_VLD  DXVA2_ModeH264_VLD_NoFGT        Deinterlace Caps: n/a       D3D9 Overlay: n/a            DXVA-HD: n/a       DDraw Status: Enabled         D3D Status: Enabled         AGP Status: Enabled"},{"CreatedByName":"Aakurb","CreatedById":141854,"CreatedDateTime":"2015-05-22T16:53:45Z","Content":"Same by me, very low fps. On previous versions I had gorgeous 30-40 fps always. Now near my space station the fps is about 9, on Duna near several modules it\u0027s 6. Even near a tiny Mun lander(see the image below) the fps is not higher that 14.\n\n![RbBAWWHGi5A.jpg](http://cs624430.vk.me/v624430410/30c43/RbBAWWHGi5A.jpg)"},{"CreatedByName":"martinborgen","CreatedById":142875,"CreatedDateTime":"2015-05-23T22:27:53Z","Content":"Hmm. Also my GPU doesen\u0027t seem to be the issue - judging by the fan...\n\nI would really appreciate some help or fix for this, as it makes the game hard to enjoy. I mean, if the computer was working, I could understand, since it\u0027s by no means a supercomputer, but now it\u0027s just above idling."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-24T07:31:47Z","Content":"Can you post your KSP.log please, it will show which graphics card KSP is using."},{"CreatedByName":"martinborgen","CreatedById":142875,"CreatedDateTime":"2015-05-24T11:13:42Z","Content":"Logs, (from a previous bug report): but I guess it\u0027s the same info.\n\n[https://drive.google.com/file/d/0B-rO2rdIDe4cMGxpQzhiS21YNUU/view?usp=sharing](https://drive.google.com/file/d/0B-rO2rdIDe4cMGxpQzhiS21YNUU/view?usp=sharing)\n\n[https://drive.google.com/file/d/0B-rO2rdIDe4cUTJLNkF3ZDhOaDg/view?usp=sharing](https://drive.google.com/file/d/0B-rO2rdIDe4cUTJLNkF3ZDhOaDg/view?usp=sharing)\n\nI do have set in the Nvidia control panel and such to use the GTX850m card for KSP, but of course, it might explain it if it\u0027s using the HDgraphics."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-24T12:41:27Z","Content":"The log says KSP is using your Geforce, but there\u0027s a lot of NaN errors:\n\n    dT is NaN! tA: 2.6855454146862, E: 0, M: 0, T: NaN(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)Unpacking Duna Outpost on Wheels\n\nDo you only have trouble with one craft or on one save? Try a new save.\n\nAlso if you have a mouse with a high DPI, try turning it down."},{"CreatedByName":"martinborgen","CreatedById":142875,"CreatedDateTime":"2015-05-27T19:31:52Z","Content":"\u003E \n\u003E The log says KSP is using your Geforce, but there\u0027s a lot of NaN errors:\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E \n\u003E     dT is NaN! tA: 2.6855454146862, E: 0, M: 0, T: NaN(Filename: C:/buildslave/unity/build/artifacts/StandalonePlayerGenerated/UnityEngineDebug.cpp Line: 56)Unpacking Duna Outpost on Wheels\n\u003E \n\u003E \n\u003E \n\u003E \n\u003E Do you only have trouble with one craft or on one save? Try a new save.\n\u003E \n\u003E Also if you have a mouse with a high DPI, try turning it down.\n\nSlightly better on a new save, which led me to clean up the debree and old probes I have. While in tracking station, I found that if I stopped tracking things, frame rates increased. All the flags lowers the FPS by quite some. \n\nHowever, still I have very low frame rates without much computer load. \n\nI haven\u0027t tried the mouse thing - I have a USB Intellimouse. \n\nWhat does the NaN errors imply?"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-05-28T10:13:59Z","Content":"NaN is Not A Number, or a divide by zero, sometimes they don\u0027t do anything, but usually they eat your craft.\n\nSometimes if you do a find/replace on your save and change all the NaN\u0027s to 1\u0027s it works, back up first though."},{"CreatedByName":"martinborgen","CreatedById":142875,"CreatedDateTime":"2015-08-10T00:34:00Z","Content":"I have not investigated NaNs, I think I tried once, and the game diddn\u0027t like it. It happens a lot though (though negligible number of crashes/bugs). Anyone has a clue why? I have not found any correlation between their occurrence (through debug menu) and the low FPS. (As low FPS is constant, although worsened the more things going on at the same time). \n\nFurther, I\u0027ve checked on GPU-Z what my GPU\u0027s up to - and it\u0027s chillin\u0027 at 10-20% load. In fact, it seems the low FPS is parallel to lowered GPU load - basically, the GPU doesn\u0027t try hard enough, and less as more things happen. Disc usage is low, memory has a margin, CPU is 10-20%. I simply cannot find the bottleneck, and it\u0027s only KSP. Recently got new nVidia drivers, no difference. \n\nDebug menu also showed, on performance, there seems to be an FPS diagram. Mine is two lines, one at 1, the other straight at 25. The menu proclaims 25.0 FPS, both as minimum and maximum. Is this normal? I see the FPS diagram wobble/small spikes (upwards) sometimes when I unpause the game, or switch nVidia settings in the background, then back to 25.0 (while my actual FPS, measured through steam and my eyes is below 10).\n\n**Edited \u003Ctime datetime=\u00222015-08-10T00:36:21Z\u0022 title=\u002208/10/2015 12:36  AM\u0022 data-short=\u00228 yr\u0022\u003EAugust 10, 2015\u003C/time\u003E by martinborgen**"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-08-10T08:51:06Z","Content":"Does rotating the view with the mouse, or opening the action menu on a part make the issue worse?"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-08-10T09:17:05Z","Content":"Check what speed your cpu is running at while ksp is running. Some laptops have a habit of throttling the cpu even when something like ksp is thrashing a single core. Make sure that your machine isn\u0027t set to a power saving mode. You may need to go in the advanced settings and change the min and max cpu speeds though the high performance mode should be enough.\n\n**Edited \u003Ctime datetime=\u00222015-08-10T13:50:04Z\u0022 title=\u002208/10/2015 01:50  PM\u0022 data-short=\u00228 yr\u0022\u003EAugust 10, 2015\u003C/time\u003E by Padishar**\n  \nPhone changed cpu to cup"},{"CreatedByName":"martinborgen","CreatedById":142875,"CreatedDateTime":"2015-08-10T09:53:50Z","Content":"\u003E \n\u003E Does rotating the view with the mouse, or opening the action menu on a part make the issue worse?\n\nNo, nothing I can notice.\n\n\u003E \n\u003E Check what speed your cpu is running at while ksp is running. Some laptops have a habit of throttling the cup even when something like ksp is thrashing a single core. Make sure that your machine isn\u0027t set to a power saving mode. You may need to go in the advanced settings and change the min and max cup speeds though the high performance mode should be enough.\n\nBy speed, you mean the load or processor clocking? From memory, the clock is at 2,2\u002B GHz, but I will check it up for you. All the cores show similar load, all around 20%.\n\nI have turned every slides to performance, but I might have missed some obscure one."},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-08-10T09:55:21Z","Content":"Is it plugged in? Laptops by default go on a powersave mode when on battery."},{"CreatedByName":"martinborgen","CreatedById":142875,"CreatedDateTime":"2015-08-10T11:11:11Z","Content":"Laptop plugged in. However, I just found one power setting, masked by bad wording, (perhaps bad translation to Swedish OS), Power saving scheme selection worded as \u0022power schemes visible on the battery meter\u0022 or something similar. I tried ticking \u0022power4gear maximum performance\u0022, instead of \u0022power4gear power saving\u0022. Voila, the FPS is back! Loads on 49%, FPS on 40! Ah, the smoothness! \n\nToo many places to choose the same thing, Nvidia control panel, GeForce experience, etc. were all set to maximum performance, no power save. But this one, under control panel, energy options, was the key!\n\nWell, still it won\u0027t work harder on re-entry when FPS is at 20, load is at 40-50%, but it\u0027s so much better, still feels smooth."},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-08-10T13:53:36Z","Content":"For reentry you could try turning the atmospheric effects setting down a notch and see if it helps."}]}