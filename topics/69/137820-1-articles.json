{"TopicId":137820,"ForumId":69,"TopicTitle":"KSP 1.1 crashes on startup (and kills X session)","CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-04-23T04:02:56Z","PageNum":1,"Articles":[{"CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-04-23T04:02:56Z","Content":"\n\u003Cp\u003E\nHello Linux x86_64 here, Ubuntu 14.04 LTS, Gnome Classic (metacity, no compiz or other graphical crap), nvidia-340. I am seeing a fairly consistent crash on startup. I am running a 2x 1920x1080 setup, but the problem happens even in single-monitor mode. After launching KSP_x86_64, a black game window appears (sized to be about 1920x1080, plus window decorations). A few seconds later, the (still black) game window flickers, killing my window manager, all running Xorg clients, and my entire Xorg session, meaning that I have to log in again. This is quite reproducible.\n\u003C/p\u003E\n\u003Cp\u003E\nI found that the problem is a lot less likely to happen if I edit ~/.config/unity3d/Squad/Kerbal Space Program/prefs and delete any lines containing \u0027Screenmanager\u0027. However, usually these lines will return if the game is restarted, meaning that I have to do this every time the game starts. Sometimes, even deleting the screenmanager lines does not prevent the game from crashing the whole graphical interface, but it generally helps. Any thoughts?\n\u003C/p\u003E\n\u003Cp\u003E\nEdit to add: These are the lines that I have to delete in \u0027prefs\u0027. I imagine the actual resolution is a little lower than 1920x1080, due to sizes of window borders and window decorations. Perhaps Unity\u0027s initial attempts to attain this resolution (before KSP does its own internal window resize) is what\u0027s causing the disaster.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 \u0026lt;pref name=\u0022Screenmanager Is Fullscreen mode\u0022 type=\u0022int\u0022\u0026gt;0\u0026lt;/pref\u0026gt;\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 \u0026lt;pref name=\u0022Screenmanager Resolution Height\u0022 type=\u0022int\u0022\u0026gt;1053\u0026lt;/pref\u0026gt;\u003Cbr\u003E\n\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0\u00A0 \u0026lt;pref name=\u0022Screenmanager Resolution Width\u0022 type=\u0022int\u0022\u0026gt;1912\u0026lt;/pref\u0026gt;\n\u003C/p\u003E\n\u003Cp\u003E\nDuring the startup phase (before the screen with the progress bar and three kerbals), it is very easy to crash the game (and the window manager, and X) just by trying to move the game window or to resize it.\n\u003C/p\u003E\n"},{"CreatedByName":"lukeoftheaura","CreatedById":124144,"CreatedDateTime":"2016-04-23T13:13:25Z","Content":"\n\u003Cp\u003E\nSame bug, but I get as far as \u0022made with unity\u0022 before I have to restart my xsession.\n\u003C/p\u003E\n"},{"CreatedByName":"senden9","CreatedById":162624,"CreatedDateTime":"2016-04-23T17:10:03Z","Content":"\n\u003Cp\u003E\nSame Problem. \u003Ca href=\u0022https://storage.spdns.eu/index.php/s/6KvzaoSRwKAxm3L\u0022 rel=\u0022external nofollow\u0022\u003EHere\u003C/a\u003E you can find a very verbose log of my system from Nvidia (uploaded because it is relatively large and i have no permission to upload in the forum). The next few lines show the stack trace from KSP:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n           PID: 8300 (KSP.x86_64)\n           UID: 1000 (USERNAME)\n           GID: 1000 (USERNAME)\n        Signal: 6 (ABRT)\n     Timestamp: Sat 2016-04-23 18:46:15 CEST (19min ago)\n  Command Line: /home/USERNAME/spiele/KSP_linux/KSP.x86_64\n    Executable: /home/USERNAME/spiele/KSP_linux/KSP.x86_64\n Control Group: /user.slice/user-1000.slice/\u003Ca href=\u0022/cdn-cgi/l/email-protection\u0022 class=\u0022__cf_email__\u0022 data-cfemail=\u00222e5b5d4b5c6e1f1e1e1e005d4b5c58474d4b\u0022\u003E[email\u0026#160;protected]\u003C/a\u003E/dbus.service\n          Unit: \u003Ca href=\u0022/cdn-cgi/l/email-protection\u0022 class=\u0022__cf_email__\u0022 data-cfemail=\u0022720701170032434242425c011700041b1117\u0022\u003E[email\u0026#160;protected]\u003C/a\u003E\n     User Unit: \u003Ca href=\u0022/cdn-cgi/l/email-protection\u0022 class=\u0022__cf_email__\u0022 data-cfemail=\u00224d383e283f0d7c7d7d7d633e283f3b242e28\u0022\u003E[email\u0026#160;protected]\u003C/a\u003E\n         Slice: user-1000.slice\n     Owner UID: 1000 (USERNAME)\n       Boot ID: 7130b4462fdb47e6a4a15fe7d39c134f\n    Machine ID: a01ef40d74ee4414826f317ba7e29803\n      Hostname: USERNAME-PC\n      Coredump: /var/lib/systemd/coredump/core.KSP\\x2ex86_64.1000.7130b4462fdb47e6a4a15fe7d39c134f.8300.1461429975000000000000.lz4\n       Message: Process 8300 (KSP.x86_64) of user 1000 dumped core.\n                \n                Stack trace of thread 8300:\n                #0  0x00007f3da28a32a8 raise (libc.so.6)\n                #1  0x00007f3da28a472a abort (libc.so.6)\n                #2  0x00007f3da0f9a976 n/a (libmono.so)\n                #3  0x00007f3da4095e80 __restore_rt (libpthread.so.0)\n                #4  0x00007f3da28a32a8 raise (libc.so.6)\n                #5  0x00007f3da28a472a abort (libc.so.6)\n                #6  0x00007f3da28df369 __libc_message (libc.so.6)\n                #7  0x00007f3da28e4d96 malloc_printerr (libc.so.6)\n                #8  0x00007f3da28e557e _int_free (libc.so.6)\n                #9  0x000000000067669e n/a (KSP.x86_64)\n                #10 0x00000000006874b9 n/a (KSP.x86_64)\n                #11 0x0000000000476ac7 n/a (KSP.x86_64)\n                #12 0x0000000000759085 n/a (KSP.x86_64)\n                #13 0x00000000007596a6 n/a (KSP.x86_64)\n                #14 0x000000000072a9d5 n/a (KSP.x86_64)\n                #15 0x0000000000461f38 n/a (KSP.x86_64)\n                #16 0x00007f3da2890710 __libc_start_main (libc.so.6)\n                #17 0x000000000046b4ed n/a (KSP.x86_64)\u003C/pre\u003E\n\u003Cp\u003E\nMaybe this can help someone to find the bug or a workaround.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: It it help somebody i can also provide the coredump.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit 2: Add another stack trace:\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n           PID: 12845 (KSP.x86_64)\n           UID: 1000 (USERNAME)\n           GID: 1000 (USERNAME)\n        Signal: 6 (ABRT)\n     Timestamp: Sat 2016-04-23 19:24:36 CEST (2min 17s ago)\n  Command Line: ./KSP.x86_64 -force-gfx-direct\n    Executable: /home/USERNAME/spiele/KSP_linux/KSP.x86_64\n Control Group: /user.slice/user-1000.slice/\u003Ca href=\u0022/cdn-cgi/l/email-protection\u0022 class=\u0022__cf_email__\u0022 data-cfemail=\u0022e89d9b8d9aa8d9d8d8d8c69b8d9a9e818b8d\u0022\u003E[email\u0026#160;protected]\u003C/a\u003E/dbus.service\n          Unit: \u003Ca href=\u0022/cdn-cgi/l/email-protection\u0022 class=\u0022__cf_email__\u0022 data-cfemail=\u002280f5f3e5f2c0b1b0b0b0aef3e5f2f6e9e3e5\u0022\u003E[email\u0026#160;protected]\u003C/a\u003E\n     User Unit: \u003Ca href=\u0022/cdn-cgi/l/email-protection\u0022 class=\u0022__cf_email__\u0022 data-cfemail=\u0022cdb8bea8bf8dfcfdfdfde3bea8bfbba4aea8\u0022\u003E[email\u0026#160;protected]\u003C/a\u003E\n         Slice: user-1000.slice\n     Owner UID: 1000 (USERNAME)\n       Boot ID: 7130b4462fdb47e6a4a15fe7d39c134f\n    Machine ID: a01ef40d74ee4414826f317ba7e29803\n      Hostname: STEFANO-PC\n      Coredump: /var/lib/systemd/coredump/core.KSP\\x2ex86_64.1000.7130b4462fdb47e6a4a15fe7d39c134f.12845.1461432276000000000000.lz4\n       Message: Process 12845 (KSP.x86_64) of user 1000 dumped core.\n                \n                Stack trace of thread 12845:\n                #0  0x00007feed02ab2a8 raise (libc.so.6)\n                #1  0x00007feed02ac72a abort (libc.so.6)\n                #2  0x00007feece9a2976 n/a (libmono.so)\n                #3  0x00007feed1a9de80 __restore_rt (libpthread.so.0)\n                #4  0x00007feed02ab2a8 raise (libc.so.6)\n                #5  0x00007feed02ac72a abort (libc.so.6)\n                #6  0x00007feed02e7369 __libc_message (libc.so.6)\n                #7  0x00007feed02ecd96 malloc_printerr (libc.so.6)\n                #8  0x00007feed02ed57e _int_free (libc.so.6)\n                #9  0x00000000005a5558 n/a (KSP.x86_64)\n                #10 0x00000000005813fc n/a (KSP.x86_64)\n                #11 0x0000000000578744 n/a (KSP.x86_64)\n                #12 0x000000000047416a n/a (KSP.x86_64)\n                #13 0x0000000000476abb n/a (KSP.x86_64)\n                #14 0x0000000000759085 n/a (KSP.x86_64)\n                #15 0x00000000007596a6 n/a (KSP.x86_64)\n                #16 0x000000000072a9d5 n/a (KSP.x86_64)\n                #17 0x0000000000461f38 n/a (KSP.x86_64)\n                #18 0x00007feed0298710 __libc_start_main (libc.so.6)\n                #19 0x000000000046b4ed n/a (KSP.x86_64)\n\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-04-23T17:33:52Z\u0022 title=\u002204/23/2016 05:33  PM\u0022 data-short=\u00228 yr\u0022\u003EApril 23, 2016\u003C/time\u003E by senden9\u003C/strong\u003E\n\u003Cbr\u003Enew trace\n\u003C/span\u003E\n"},{"CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-04-23T21:29:14Z","Content":"\n\u003Cp\u003E\nFor me, the X session restarts all on its own, presumably due to the window manager not liking size abuse (how on earth...?). I should point out that in addition to the screenmanager workaround, I had to synlink libpulse-simple.so.0 to /dev/null (inside the KSP directory) and launch KSP with LD_LIBRARY_PATH=. or else it aborts even before getting to the point of (maybe) crashing the window manager.\n\u003C/p\u003E\n"},{"CreatedByName":"senden9","CreatedById":162624,"CreatedDateTime":"2016-04-24T09:46:41Z","Content":"\n\u003Cp\u003E\nThanks evilwombat,\n\u003C/p\u003E\n\u003Cp\u003E\nnow i can start the game. The game crashed \u0022only\u0022 once since this fix.\n\u003C/p\u003E\n\u003Cp\u003E\nEdit: It works 3/5 of the time\u2026\n\u003C/p\u003E\n\u003Cp\u003E\nEdit 2: And from time to time the game crash when while i play \u2026\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-04-24T10:27:17Z\u0022 title=\u002204/24/2016 10:27  AM\u0022 data-short=\u00228 yr\u0022\u003EApril 24, 2016\u003C/time\u003E by senden9\u003C/strong\u003E\n\u003Cbr\u003Esee above\n\u003C/span\u003E\n"},{"CreatedByName":"Michael Yoo","CreatedById":159181,"CreatedDateTime":"2016-04-25T15:52:06Z","Content":"\n\u003Cp\u003E\nAlso just experienced this issue. Vanila install with fresh settings and no mods.\n\u003C/p\u003E\n\u003Cp\u003E\nRemoving\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode\u0022\u003E\n-force-gfx-direct\u003C/pre\u003E\n\u003Cp\u003E\nFrom the launch options fixed the crashing for me. See if it works for you.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWith the AMD Catalyst driver the game would crash without that option, but it seems to be the opposite now that I\u0027ve moved to the open source driver.\n\u003C/p\u003E\n"},{"CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-04-25T19:31:13Z","Content":"\n\u003Cp\u003E\nThanks. I\u0027ve had a little more success after I realized that the \u0027Screenmanager\u0027 nonsense in the \u0027prefs\u0027 file gets saved back to the file every time you exit the game. So, it\u0027s been standard procedure to delete the \u0027Screenmanager\u0027 lines from \u0027prefs\u0027 on *every* startup. Yeah, I should write a script.\n\u003C/p\u003E\n\u003Cp\u003E\nI am not using steam, so I don\u0027t have any launch options, so I don\u0027t think \u0022-force-glx-direct\u0022 applies to my situation... Maybe I can try *adding* and see if that helps \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"inv","CreatedById":162852,"CreatedDateTime":"2016-04-26T02:15:47Z","Content":"\n\u003Cp\u003E\nIt seems, that it is\u00A0not exclusively a KSP problem... I\u0027ve found this topic, when I was looking for the solution for the same problem with superhot. I also had a problem with KSP recently after an update to 5.5. So, apparently, unity5 based games are causing X session to restart.\n\u003C/p\u003E\n"},{"CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-08-09T06:57:59Z","Content":"\n\u003Cp\u003E\nThe Linux version *still* fails to launch (two months later) with a \u0022player initialization error\u0022 if Patcher is used. The version downloaded from the KSP Store works, kind of - every other launch, Unity gets into a situation where it starts madly resizing the game window on startup, until the window manager runs out of memory and is killed. This happens in a matter of seconds. Deleting the size/screen selection from \u0027prefs\u0027 helps, but only about half the time.\n\u003C/p\u003E\n\u003Cp\u003E\nVersions prior to 1.1 did not have this problem.\n\u003C/p\u003E\n\u003Cp\u003E\nI know everyone thinks that Xpox and PS4 are the next shiny things, but can existing, paying customers get some bugfixes, please? \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-08-10T07:57:22Z","Content":"\n\u003Cp\u003E\nProblem still happens. KSP developers are working on console ports, but existing paying users still have to deal with Unity getting into an infinite-resize loop and taking down the rest of the desktop environment with it. Plus, the Patcher repo still points to a KSP instance that is outright busted, to the point where it won\u0027t even start (for months now). Since v1.1.3, the workaround of deleting the screenmanager crap from \u0027prefs\u0027 no longer works. Come on.\n\u003C/p\u003E\n\u003Cp\u003E\nIs there no way to force Unity to operate at a fixed geometry, and stop trying to alter the size of the game window more than ONCE during startup? Come onm guys. I\u0027ve been with you since 0.2whatever.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-10T08:03:25Z\u0022 title=\u002208/10/2016 08:03  AM\u0022 data-short=\u00227 yr\u0022\u003EAugust 10, 2016\u003C/time\u003E by evilwombat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-08-10T12:40:59Z","Content":"\n\u003Cp\u003E\nThe repo is fine, it\u0027s the patcher itself and it\u0027s being worked on.\n\u003C/p\u003E\n\u003Cp\u003E\nYou can force Unity to use specific resolutions, \u003Ca href=\u0022https://docs.unity3d.com/Manual/CommandLineArguments.html\u0022 rel=\u0022external nofollow\u0022\u003Ethere are a number of command line options here.\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThese are likely what you need.\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nQuote\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022\u003E\n\u003Ctable\u003E\u003Ctbody\u003E\n\u003Ctr\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\n\u003Cstrong\u003E-screen-fullscreen\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\nOverrides the default fullscreen state. This must be 0 or 1.\n\u003C/td\u003E\n\u003C/tr\u003E\n\u003Ctr\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\n\u003Cstrong\u003E-screen-height\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\nOverrides the default screen height. This must be an integer from a supported resolution.\n\u003C/td\u003E\n\u003C/tr\u003E\n\u003Ctr\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\n\u003Cstrong\u003E-screen-width\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\nOverrides the default screen width. This must be an integer from a supported resolution.\n\u003C/td\u003E\n\u003C/tr\u003E\n\u003Ctr\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\n\u003Cstrong\u003E-screen-quality\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\nOverrides the default screen quality. Example usage would be: \u003Ccode\u003E/path/to/myGame -screen-quality Beautiful\u003C/code\u003E\n\u003C/td\u003E\n\u003C/tr\u003E\n\u003Ctr\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\n\u003Cstrong\u003E-show-screen-selector\u003C/strong\u003E\n\u003C/td\u003E\n\u003Ctd style=\u0022text-align:left;\u0022\u003E\nForces the screen selector dialog to be shown.\n\u003C/td\u003E\n\u003C/tr\u003E\n\u003C/tbody\u003E\u003C/table\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAs for fixing this, Squad will continue to update to newer versions of Unity as they become available.\n\u003C/p\u003E\n"},{"CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-08-11T09:47:45Z","Content":"\n\u003Cp\u003E\nThanks. I appreciate the effort, but the Unity options don\u0027t do jack excrementse. Well, that\u0027s not entirely true. The -screen-width and -screen-height options *do* in fact set an *initial* screen resolution. As soon as I launch KSP.x86_64, I get a black window sized to the dimensions I specified. However, after a few seconds of showing a black window, the game will either resize itself to whatever was configured using the KSP Graphics options, or it will start madly resizing itself until it occupies the entire screen and the entire window manager crashes (killing off any other graphical applications that were open at the time, and kicking me out to the login screen).\n\u003C/p\u003E\n\u003Cp\u003E\nSo, no. Unity (or the game) still insist on forcing a screen size, and they still try to fight the window manager (classic metacity) until the WM runs out of memory. Normally I wouldn\u0027t be a cheeks hole about this type of nonsense, but (a) paying customer and (b) it\u0027s been months, and despite my love for the KSP developers, the situation at hand is nevertheless frustrating. Especially so because this wasn\u0027t a problem prior to 1.1, and the crash takes down the whole damn desktop environment with it.\n\u003C/p\u003E\n\u003Cp\u003E\nAs for the Patcher, hmm. I am able to run Patcher and it completes rsync successfully. Problem is, the resulting game instance is unplayable, and I have to log back into the KSP Store and download a fresh copy (or unzip the local archive if I kept it).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-11T09:49:11Z\u0022 title=\u002208/11/2016 09:49  AM\u0022 data-short=\u00227 yr\u0022\u003EAugust 11, 2016\u003C/time\u003E by evilwombat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-08-11T10:22:32Z","Content":"\n\u003Cp\u003E\nAnd the patcher is still using the same repo as the store copy, so it\u0027s not the repo \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022true\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nWhat you describe with resolutions \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/142488-evilwombat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022142488\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/142488-evilwombat/\u0022 rel=\u0022\u0022\u003E@evilwombat\u003C/a\u003E does not occur for me, so I can\u0027t test any of the workarounds, the one that I think you need is OOM killer, by \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/137644-psycho_zs/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022137644\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/137644-psycho_zs/\u0022 id=\u0022ips_uid_8657_6\u0022 rel=\u0022\u0022\u003E@Psycho_zs\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ciframe data-embedcontent=\u0022\u0022 frameborder=\u00220\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/83214-the-linux-thread/\u0026amp;do=embed\u0026amp;embedComment=2542435\u0026amp;embedDo=findComment\u0026amp;page=29#comment-2542435\u0022\u003E\u003C/iframe\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis seems to be a bug between Unity3D and the Gnome and Unity desktop environments, it doesn\u0027t occur on xfce or lxde.\n\u003C/p\u003E\n\u003Cp\u003E\nAs before though, make sure you delete the prefs file, that should force Unity to make one with the KSP resolution settings.\n\u003C/p\u003E\n\u003Cp\u003E\nThere\u0027s no way to disable prefs unfortunately, it\u0027s created by Unity3D for all Unity3D games on Linux and OSX, its windows equivalent is the windows registry key for each field.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAlso don\u0027t swear on the forums.\n\u003C/p\u003E\n"},{"CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-08-11T11:41:57Z","Content":"\n\u003Cp\u003E\nHmmm. Indeed, I have noticed the problem happens (at least, more) frequently on Gnome (Metacity) than on something more basic (twm). But, I am not running any fancy Gnome screen effects, or even the Unity environment (not to be confused with Unity the game engine - argh).\n\u003C/p\u003E\n\u003Cp\u003E\nI do indeed delete the \u0027prefs\u0027 file (or rather, overwrite it with a version without any of the ScreenManager options in it) on every startup, but this workaround stopped working in v1.1.2 / v1.1.3. Still no luck.\n\u003C/p\u003E\n\u003Cp\u003E\nThe Unity resolution options don\u0027t seem to be the problem per se anymore. The game starts (with just a black window) using Unity size settings, but the mad resizing only right about when the Squad logo is about to appear. In some instances, the window resizes *once* and the game starts, but in others, the window grows out of control in a matter of less than a second. This makes me believe that the resizing / crash problem is not due to Unity internals, but due to something KSP code is doing as part of its startup sequence (like resizing the window again, this time to match the screen dimensions found in settings.cfg rather than in prefs).\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s interesting that another user had a similar problem. While trying to catch this problem in the act, I managed to kill KSP an instant before it took down X. As it turns out, the memory leak is not within X itself (I don\u0027t think...) but within the window manager (metacity), as evidenced by a large amount of memory being freed if I kill/relaunch the WM without relaunching X. It makes sense that a giant burst of window resizing (and fighting the window owner) could bring out gremlins. I just wish KSP made a single attempt to resize itself and then left the dimensions alone. Sometimes this problem can even be triggered by inadvertently dragging the game window to a new location on screen. Sigh.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, what is needed to diagnose this further? I am not sure what the exact logic is that KSP uses to set its screen dimensions, but clearly this happens in two steps (once on startup, through prefs, and the second time, through settings.cfg). Maybe the settings.cfg mechanism is being a bit too aggressive. Shrug.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-11T11:42:57Z\u0022 title=\u002208/11/2016 11:42  AM\u0022 data-short=\u00227 yr\u0022\u003EAugust 11, 2016\u003C/time\u003E by evilwombat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-08-11T13:23:03Z","Content":"\n\u003Cp\u003E\nYou mention dragging the window \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/142488-evilwombat/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022142488\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/142488-evilwombat/\u0022 id=\u0022ips_uid_5715_7\u0022 rel=\u0022\u0022\u003E@evilwombat\u003C/a\u003E, do you do this when KSP starts or do you leave KSP alone?\n\u003C/p\u003E\n\u003Cp\u003E\nI say this because \u003Ca href=\u0022https://www.dropbox.com/s/v60euvsn0cni1bn/1289%20screen%20bounce.mp4?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Ethis is what I see when I drag the window\u003C/a\u003E, though it does not crash and doesn\u0027t happen when I leave the window alone.\n\u003C/p\u003E\n\u003Cp\u003E\nUnity3D starts first, sets the screen resolution to the contents of the prefs file, then Unity3D starts KSP, the very first thing KSP does is show the monkey head screen, there\u0027s nothing before that point that is Squads.\n\u003C/p\u003E\n\u003Cp\u003E\nEven the KSP.exe/KSP.x86 is just a generic Unity3D binary file, and is interchangeable with the binary from any other Unity game.\n\u003C/p\u003E\n\u003Cp\u003E\nIf that is what you see then I do see this, I thought it was something else.\n\u003C/p\u003E\n"},{"CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-08-12T11:22:45Z","Content":"\n\u003Cp\u003E\nHmm. I generally leave the KSP window alone. Since it seems to be sensitive to window size (and possibly position), I generally leave it untouched as the game is running. Usually the window can be moved without incident, but once or twice I\u0027ve had some sloppy mouse movement resulting in the window getting \u0022touched\u0022 in a way that brought out the problem. But I\u0027m less worried about that, and more worried about simple startup killing off the X session.\n\u003C/p\u003E\n\u003Cp\u003E\nHere\u0027s what mine does (half the time): \u003Ca href=\u0022https://dl.dropboxusercontent.com/u/79740546/VID_20160812_035954.mp4\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropboxusercontent.com/u/79740546/VID_20160812_035954.mp4\u003C/a\u003E\u003Cbr\u003E\nYou can see why a screen recording program would have been unuseful here \u003Cimg alt=\u0022:D\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 title=\u0022:D\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nIn some cases, the KSP window becomes outright huge (spanning the entire screen width) maybe a split second prior to the whole environment imploding, though this video does not capture that particular behavior.\n\u003C/p\u003E\n\u003Cp\u003E\nIn the cases where the game DOES successfully start up, I do see a distinct moment where the window is resized. That is, the game starts up using some Unity default size (controllable through command line options you specified), and the game window remains this way (with no content) for the first few seconds after launch. A few seconds later, window resizes itself to match the dimensions set in persistent.cfg (this happens right when the monkey head appears).\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-12T11:23:08Z\u0022 title=\u002208/12/2016 11:23  AM\u0022 data-short=\u00227 yr\u0022\u003EAugust 12, 2016\u003C/time\u003E by evilwombat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-08-12T11:47:04Z","Content":"\n\u003Cp\u003E\nHave you tried without LD_LIBRARY_PATH= ?\n\u003C/p\u003E\n\u003Cp\u003E\nI usually just click the .x86 or .x86_64 directly, or cd to the folder and run KSP with no arguments.\n\u003C/p\u003E\n"},{"CreatedByName":"evilwombat","CreatedById":142488,"CreatedDateTime":"2016-08-13T11:33:19Z","Content":"\n\u003Cp\u003E\nI need the LD_LIBRARY_PATH part because I don\u0027t have Pulseaudio installed on my system, and instead, I have a local symlink called libpulse-simple.so.0 (whatever that\u0027s called) to /dev/null. Or has that been fixed in v1.1.3?\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-08-13T11:34:02Z\u0022 title=\u002208/13/2016 11:34  AM\u0022 data-short=\u00227 yr\u0022\u003EAugust 13, 2016\u003C/time\u003E by evilwombat\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2016-08-13T12:09:35Z","Content":"\n\u003Cp\u003E\nNah that\u0027s meant to be fixed in a later version of Unity3D than is used by KSP 1.1.3\n\u003C/p\u003E\n\u003Cp\u003E\nAnother workaround is pulsenomore by kspflo which is essentially the same, \u003Ca href=\u0022http://bugs.kerbalspaceprogram.com/issues/7515\u0022 rel=\u0022external nofollow\u0022\u003Eavailable here.\u003C/a\u003E\n\u003C/p\u003E\n"}]}