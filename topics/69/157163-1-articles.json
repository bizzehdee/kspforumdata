{"TopicId":157163,"ForumId":69,"TopicTitle":"Right Click menu\u0060s","CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2017-03-01T15:41:38Z","PageNum":1,"Articles":[{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2017-03-01T15:41:38Z","Content":"\n\u003Cp\u003E\nHi all I am using latest 64bit KSP version.\n\u003C/p\u003E\n\u003Cp\u003E\nNow I have tested this with a modded install and unmodded and it does this on both.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOK so your on the runway and you right click the cockpit to bring up the menu this menu will decrease FPS.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nNow open 3 more of these windows by right clicking other craft parts and watch the FPS get even lower.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI have noticed on some parts modded and unmodded that some have a lot of optoins so the window can be rather large.\n\u003C/p\u003E\n\u003Cp\u003E\nIf this is true the FPS hit can be very high.\n\u003C/p\u003E\n\u003Cp\u003E\nIs this a known issue? can it be fixed whats causing this :(.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks in advance \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nEDIT\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nForgot to add that when this happens the TIMER also flickers from yellow to green so some thing within these menus is causing some issue?.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-03-01T16:12:15Z\u0022 title=\u002203/01/2017 04:12  PM\u0022 data-short=\u00227 yr\u0022\u003EMarch 1, 2017\u003C/time\u003E by stk2008\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2017-03-01T19:41:43Z","Content":"\n\u003Cp\u003E\nOk, if you like, do this test. Have KSP in a window, so you can tab in and out of it. Have all your Part Action Windows (PAW, as the right-click menu with parts is called by the devs) open, and a way to see the FPS (like the performance tab on the debug Window, Mod-F12). As you noticed, the FPS drops (the more so the more controls on PAWs displayed, like blue buttons and sliders).\n\u003C/p\u003E\n\u003Cp\u003E\nNow tab out of KSP (Mod-Alt), and magically the FPS goes back to the maximum. Tab back in, the FPS drops again.\n\u003C/p\u003E\n\u003Cp\u003E\nWhat happened? KSP keeps updating values shown on the GUI, but doesn\u0027t accept any commands until its window gains focus back. The reason for all that FPS drop is with the polling cycle with each one of those controls on PAWs, at each frame the program checks if the user is interacting, that is only performed within an active window. Unity has a quite complex way to detect a mouse action with any of the elements drawn on the GUI (since Unity 4.6, older calls to GUI elements still work but often give undesired results) so each check to perform causes a drop in FPS. Should say KSP stretches Unity to the limits, the engine isn\u0027t really designed to have so many controls on the GUI at once.\n\u003C/p\u003E\n\u003Cp\u003E\nSo, indeed this is a known issue, but can\u0027t be solved unless Unity changes to a more performant interaction model and KSP code is then changed to use that model (have no clue if this will ever happen).\n\u003C/p\u003E\n"},{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2017-03-01T19:45:52Z","Content":"\n\u003Cp\u003E\nThats awesome that it is a known issue at least :).\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for the very fast reply appriciate that.\n\u003C/p\u003E\n\u003Cp\u003E\nLets prey and hope UNITY do some thing as this would be awesome to have fixed.\n\u003C/p\u003E\n\u003Cp\u003E\nHas any one actually contacted UNITY and said about any improvments or link them to this thread?.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThanks\n\u003C/p\u003E\n"},{"CreatedByName":"diomedea","CreatedById":93700,"CreatedDateTime":"2017-03-01T20:05:35Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222972110\u0022 data-ipsquote-contentid=\u0022157163\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221488397552\u0022 data-ipsquote-userid=\u0022162264\u0022 data-ipsquote-username=\u0022stk2008\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n16 minutes ago, stk2008 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHas any one actually contacted UNITY and said about any improvments or link them to this thread?.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nDon\u0027t want to show one specific link, as I have yet to find one where Unity officially took position on the issue (may exist, didn\u0027t find one yet myself). But Unity forum has a lot threads about such issues (e.g.,\u00A0\u003Ca href=\u0022https://forum.unity3d.com/search/7109274/?q=Mouse\u002Bpolling\u0026amp;t=post\u0026amp;o=date\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://forum.unity3d.com/search/7109274/?q=Mouse\u002Bpolling\u0026amp;t=post\u0026amp;o=date\u003C/a\u003E ).\n\u003C/p\u003E\n"},{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2017-03-01T20:09:15Z","Content":"\n\u003Cp\u003E\nThanks again for replying well I suppose all we can do is wait?.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2017-03-16T13:11:41Z","Content":"\n\u003Cp\u003E\nJust forgot to mention this but\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWe all know the right click menus eat FPS which SUCKSSSS.\n\u003C/p\u003E\n\u003Cp\u003E\nBut why does it cause physics lag?.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI mean when I have a right click menu open some times the clock at top left flashes like bloody crazy.\n\u003C/p\u003E\n\u003Cp\u003E\nRealy sucks that this is an issue as KSP relys on these menus alot :(.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nSo to sum it up we know these menus cause FPS drop but is it normal to cause such a physics lag with some of these menus?\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-03-17T18:37:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222987094\u0022 data-ipsquote-contentid=\u0022157163\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221489669901\u0022 data-ipsquote-userid=\u0022162264\u0022 data-ipsquote-username=\u0022stk2008\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 3/16/2017 at 7:11 AM, stk2008 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSo to sum it up we know these menus cause FPS drop but is it normal to cause such a physics lag with some of these menus?\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYes.\u00A0 Even though the game was partially multi-threaded with the change to Unity 5.x\u002B, the majority is still single threaded -- especially the synchronization between physics and rendering.\u00A0 Physics has to -stop- processing when the rendering thread is doing its thing, and as the UI stuff all lives on the render/UI thread, this causes a longer-than-optimal pause of the physics during each rendered frame.\n\u003C/p\u003E\n\u003Cp\u003E\n-Some- multhreading models can do simultaneous rendering and physics, where the physics is working on the -next- frame while rendering is processing the \u0027-current- frame, but engines setup such as those are rare\u0027ish and have significant overhead as a large portion of the game state needs to be copied between threads every frame/physics update (at the very least object positions, velocities, and rotations).\u00A0 I do not believe that Unity is one of those engines, and still uses standard thread synchronization (blocking) techniques between render and physics threads.\u003Cbr\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"stk2008","CreatedById":162264,"CreatedDateTime":"2017-03-17T19:25:30Z","Content":"\n\u003Cp\u003E\nWow that was an in depth explonation :).\n\u003C/p\u003E\n\u003Cp\u003E\nSounds like its not easely fixed then :(.\n\u003C/p\u003E\n\u003Cp\u003E\nThanks for replying though and at least its not just my game/computer \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"}]}