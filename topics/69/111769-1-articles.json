{"TopicId":111769,"ForumId":69,"TopicTitle":"[PartJoint]: None of the provided nodes was valid!","CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2015-06-02T20:06:43Z","PageNum":1,"Articles":[{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2015-06-02T20:06:43Z","Content":"I\u0027ve been having docking port bugs off and on ever since unlocking docking ports in KSP 1.0, and today it got so severe a problem that my game progress is halted.\n\nWhat\u0027s happened is that almost every docking port on my LKO station has become unable to undock. I tried the instructions detailed in a few other threads around here, and it helped the first time, but a few days later the bug came back with a vengeance.\n\nOne of the first things I tried was renaming the station. I\u0027d previously noticed some Klaw bugs that seemed to go away as a result of renaming the vessel - perhaps KSP was confused when sorting out multiple \u0022DOCKEDVESSEL\u0022s of the same name. No luck.\n\nNext I tried Claw\u0027s solution as detailed in [FIX: Dock / Undocking Bug in 0.23.5](https://forum.kerbalspaceprogram.com/threads/78863). It helped at first - I was able to restore functionality to the two ports I needed to work; I didn\u0027t do an exhaustive analysis of the rest of the station though, so I can\u0027t say whether it did or would have helped.\n\nWhat I do know is it isn\u0027t helping now. I have verified that every pair of connected docking ports is in the proper configuration, i.e. one says \u0022Docked (same vessel)\u0022, the other says \u0022Docked (dockee)\u0022, and they link to each other\u0027s uid correctly. As far as I can tell by reading it, the save file is flawless (but of course it can\u0027t be or I wouldn\u0027t have this whole problem).\n\nAs a last-ditch resort, I tried something else that occasionally helps with Klaw bugs, i.e. enabling the \u0022Decouple Node\u0022 action on the docking ports. That did nothing to help and simply threw an unsurprising NullReferenceException.\n\nInvestigating further, I opened the error log and found a large block of warnings reading:\n\n[PartJoint]: None of the provided nodes was valid!\n\nThe block was large (over a dozen), but not hundreds, nor did it repeat. I have a hunch that one warning was thrown by each docking port because something is wrong with the \u0022PartJoint\u0022 connecting it to the other port; perhaps the save file is somehow causing the port to be given a reference to the wrong part or something.\n\nI didn\u0027t want to post a new thread without being sure it was a new issue, so of course I checked Google and the forum\u0027s Search page.\n\nI also tried to see if I could blame it on any of the three mods I have installed: HyperEdit, Kerbal Alarm Clock, and KER. No dice - none of those mods have anything about causing docking issues in their threads (not something I expected anyway given their nature), the station in question consists entirely of stock parts, and most importantly, digging through KSP.log and output\\_log.txt indicated that the error was apparently coming from the PartJoint class and being piped through Unity\u0027s built-in debug script.\n\nSo now I turn to the community seeking help. Is this related to a known issue? Have others been affected similarly? And might anyone have a solution?\n\nAttached here are my KSP.log and output\\_log.txt: [KSP.log](https://dl.dropboxusercontent.com/u/13276416/KSP/KSP.log) | [output_log.txt](https://dl.dropboxusercontent.com/u/13276416/KSP/output_log.txt)\n\nAnd here is the save file experiencing the issue: [persistent.sfs](https://dl.dropboxusercontent.com/u/13276416/KSP/persistent.sfs)\n\nThe bug has attacked one of the last vessels in the list, \u0022Station 1.0.2 Ring Station Edition\u0022. Apologies to anyone reading through it for the fact that I currently have a lot of stuff flying around and the station in question has around 400 parts. ^^;\n\nIn case it helps:\n\nWindows 7 64-bit OS with KSP 1.0.2 32-bit, non-Steam, running on Intel HD Graphics 4000 with SM3 terrain shaders disabled.\n\nI doubt any of that really affects this, but just in case xP\n\n**Edited \u003Ctime datetime=\u00222015-06-02T20:13:52Z\u0022 title=\u002206/02/2015 08:13  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 2, 2015\u003C/time\u003E by parameciumkid**\n  \npersistent.sfs"},{"CreatedByName":"problemecium","CreatedById":101649,"CreatedDateTime":"2015-06-03T20:01:30Z","Content":"Update on my bug hunt: Using Claw\u0027s \u0022in depth\u0022 solution was fruitless, but using a modification of the \u0022quick and dirty\u0022 solution I was able to successfully restore functionality to at least one port (I have yet to check the rest). What I did specifically:\n\n- Enable \u0022Decouple Node\u0022 on all docking ports using a bulk search \u0026 replace function\n\n- Assign all ports with the \u0022Docked (dockee)\u0022 state an attachment to their \u0022parent port\u0022 by changing the first \u0022attN = None, -1\u0022 to \u0022attN = top, [parent]\u0022 where \u0022[parent]\u0022 is the port\u0027s parent index as recorded in its Part block.\n\n\u003E \n\u003E PART{\n\u003E \n\u003E  name = dockingPort2\n\u003E \n\u003E  ...\n\u003E \n\u003E  parent = 7\n\u003E \n\u003E  ...\n\u003E \n\u003E  attN = top, 7\n\u003E \n\u003E  attN = bottom, 5\n\u003E \n\u003E  ...\n\u003E \n\u003E  MODULE{\n\u003E \n\u003E  name = ModuleDockingNode\n\u003E \n\u003E  state = Docked (dockee)\n\u003E \n\u003E  ...\n\u003E \n\u003E  }\n\u003E \n\u003E  ...\n\u003E \n\u003E }\n\u003E \n\u003E \n\n- Resolve all conflicts wherein the newly assigned attN is the same as one of the other attached parts, e.g. the bottom attN or a surface attachment attN; for the time being I simply left these with \u0022attN = None, -1\u0022 but the presence of a few of the aforementioned \u0022None of the provided nodes was valid\u0022 messages suggests this isn\u0027t the \u0022real\u0022 solution. I suspect that the bottom attNs have been assigned erroneously, perhaps due to the surface-attached ports\u0027 top and bottom nodes being very close together and KSP ending up thinking I\u0027d docked onto the ports\u0027 bottom nodes.\n\n- Attempt to decouple one of a pair of ports, and if a null reference occurs, reload the save file and instead decouple the other port.\n\nI was thus able to at least get my crew ferry detached, which is a good sign, but I only treated the symptoms and have every reason to believe the bug can and will strike again and therefore still needs attention. Once again, if anyone has any answers, or even some useful information to help us all find the answer, please reply!\n\n**Edited \u003Ctime datetime=\u00222015-06-03T20:08:47Z\u0022 title=\u002206/03/2015 08:08  PM\u0022 data-short=\u00229 yr\u0022\u003EJune 3, 2015\u003C/time\u003E by parameciumkid**"},{"CreatedByName":"sal_vager","CreatedById":16426,"CreatedDateTime":"2015-06-03T20:08:04Z","Content":"I wish I had an answer for you but the only time I saw this was with one of Zekes tanks, it needed re-rooting in the editor to fix."}]}