{"TopicId":103137,"ForumId":16,"TopicTitle":"How to build stageable ion ship?","CreatedByName":"Foxster","CreatedById":113764,"CreatedDateTime":"2015-04-01T13:03:38Z","PageNum":1,"Articles":[{"CreatedByName":"Foxster","CreatedById":113764,"CreatedDateTime":"2015-04-01T13:03:38Z","Content":"I\u0027ve been messing with a ship recently that has some ion engines in the mix. I would have liked to make the ion bit bigger, with more stages. However, ion has the screwy fuel feed mechanics that seem to make fuel ducts not work and tanks get emptied from all over the craft in seemingly random ways. \n\nHow can you make multi-stage ion craft?"},{"CreatedByName":"Taki117","CreatedById":89975,"CreatedDateTime":"2015-04-01T13:14:32Z","Content":"The easiest way is to simply disable the tanks in an upper stage by clicking the green arrow next to the amount\n\nAlternatively you could go into the resource file for Xenon and change the fuel flow type."},{"CreatedByName":"jarmund","CreatedById":126888,"CreatedDateTime":"2015-04-01T15:18:30Z","Content":"TAC Fuel Balancer will help you out here. It allows for auto-transfering in and out of tanks as you please."},{"CreatedByName":"Foxster","CreatedById":113764,"CreatedDateTime":"2015-04-01T15:24:26Z","Content":"Thanks, guys. \n\nDon\u0027t want to install another mod just for this so I guess its a matter of disabling the flow with the green arrows."},{"CreatedByName":"jarmund","CreatedById":126888,"CreatedDateTime":"2015-04-01T15:28:32Z","Content":"Just for the record, the mod is very useful in general. I for one use its aajto-balance feature a lot for planes and fuel barges"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-04-01T16:11:53Z","Content":"Xenon\u0027s fuel flow works like this: \n\nSet stage # for each tank by counting decouplers between root part and the tank.\n\nDrain fuel evenly from all tanks with the same stage #, starting with the highest.\n\nSo arranging tanks around a central core is problematic, because they all have one decoupler between them and the root part and thus get counted as the same stage #. Better to attach two tanks with radial decouplers and then make stacks under those tanks."},{"CreatedByName":"Mister Dilsby","CreatedById":232743,"CreatedDateTime":"2015-04-01T16:14:11Z","Content":"My (failed) Eve ascent ship has multiple staged ions that worked, sort of. Here is the .craft file: http://kerbalx.com/kuzzter/Evoglide 2B.craft\u0022 target=\u0022\\_blank\u0022\u003Edownload Evoglide 2B\u0027\u003Ehttp://[download Evoglide 2B](http://kerbalx.com/kuzzter/Evoglide)\n\nIf you want to fly the silly thing, EVA the pilot and he will be able to board the command seat from the lander can\u0027s ladder. Then throttle up, spacebar to eject the lander can and tower: space again to light the aerospikes and release from the portable pad, climb at any angle up to 45 degrees and eject spent rockets with spacebar, spacebar yet again and you are now running on ions in Stage 4. I have the outer two pairs of ion engines attached to droppable pylons. Intent was to run on 9 engines, draining only from the tanks on the outer pylons, then run on 7 engines, draining only the second outer set, then eject those and run on 5 engines for rest of flight. \n\nThis is where ion staging gets strange. It seems to treat all the detachable tanks as one group regardless of what stage they are in. In other words it will drain from the Stage 4 and Stage 3 tanks since those are all on the other side of separators, but not from the core set of tanks permanently attached in Stage 2. My workaround in this case was to simply disable all the tanks in Stage 3, as shown:\n\n![3e29agy.png](http://i.imgur.com/3e29agy.png)\n\nWhen the Stage 4 tanks are nearly empty, I start feed from one of the Stage 3 tanks in each pylon. That way when Stage 4 is empty and I drop the tanks, the remaining 7 engines still get fuel. Then I enable all the rest of the tanks in Stage 3. From that point everything works as you\u0027d expect--only the Stage 3 tanks drain, and when you drop them Stage 2 will start feeding. \n\nHope this helps!\n\nETA: RIC\u0027s explanation makes perfect sense. All of my pylons each have one decoupler between themselves and root, therefore they all feed together. Adding a second decoupler to the outermost pylons should make the Evoglide 2B stage as intended.\n\n**Edited \u003Ctime datetime=\u00222015-04-01T16:21:19Z\u0022 title=\u002204/01/2015 04:21  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by Mister Dilsby**"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-04-01T16:19:07Z","Content":"^^ It\u0027s because there is only one decoupler between each tank and the root part. See my post above."},{"CreatedByName":"Foxster","CreatedById":113764,"CreatedDateTime":"2015-04-01T16:23:25Z","Content":"Confirmed. \n\nThis craft uses the bottom set of tanks first...\n\n![BOBPffT.jpg](http://i.imgur.com/BOBPffT.jpg)\n\nNot ideal but now I know how it works I can do things with it. Thanks."},{"CreatedByName":"Mister Dilsby","CreatedById":232743,"CreatedDateTime":"2015-04-01T16:27:04Z","Content":"\u003E \n\u003E ^^ It\u0027s because there is only one decoupler between each tank and the root part. See my post above.\n\n^^^I did, I did, you ninja\u0027d me you ninja you!"},{"CreatedByName":"Foxster","CreatedById":113764,"CreatedDateTime":"2015-04-01T21:12:39Z","Content":"Umm, seems its not as simple as that after all. Things get screwy if you have more than one stage of ion engines. \n\nThis works OK...\n\n![NSfEqY2.jpg](http://i.imgur.com/NSfEqY2.jpg)\n\nThe fuel goes from the bottom, then the middle then the top tanks. \n\nBut this doesn\u0027t work...\n\n![Q06PURi.jpg](http://i.imgur.com/Q06PURi.jpg)\n\nIt has the decouplers in stages from the bottom up just like the previous one but after the first two stages (5 \u0026 6) it starts using Xenon from all the remaining tanks, as you can see from the delta-V stats screen where stage 4 uses all the remaining fuel.\n\nI\u0027m a bit stumped now. \n\nI can use ions for a top 25kdV stage but I was hoping to have multiple ion stages for, say, 50kdV."},{"CreatedByName":"Dazpoet","CreatedById":132380,"CreatedDateTime":"2015-04-01T21:20:11Z","Content":"Just \u0022close\u0022 the tanks you don\u0027t want it to drain from manually? There should be a small green thing next to the resource (Xenon in this case) in the right-click menu. Click that so it becomes red and it shouldn\u0027t drain from there until you click it back to green again."},{"CreatedByName":"Mister Dilsby","CreatedById":232743,"CreatedDateTime":"2015-04-01T21:21:47Z","Content":"Did you get to the 7-stage config by copying and pasting a subassembly from the 4-stage config? If so I wonder whether the stage precedence somehow got copied along with the parts...one way to check would be by hand-building a trial stage 5 onto the 4-stage and seeing if that works."},{"CreatedByName":"-Velocity-","CreatedById":74097,"CreatedDateTime":"2015-04-01T21:24:40Z","Content":"In stock, the xenon tanks need to be separated by decouplers. I created a \u0022refuelable\u0022, massive xenon-propelled ship that had paired, xenon fuel assemblages attached to the ship via docking ports, and with each fuel assemblage pair separated by a decoupler. (A \u0022fuel assemblage\u0022 was a subassembly I created that had like 100 xenon tanks tightly packed together with Clampatron Sr. docking ports at each end. Effectively, it is just a very large xenon tank.) When a fuel assemblage goes empty, xenon fuel begins to get drawn from the next set of fuel assemblages down the line, and the empty fuel assemblage is discarded. (It is possible to refuel the fuel assemblage, but it would be HIGHLY tedious.) The ship is \u0022refuelable\u0022 in that once it\u0027s returned to Kerbin orbit, I can launch a rocket containing new fuel assemblages and dock them onto the ship with a \u0022construction drone\u0022.\n\nSo basically, xenon tanks and xenon tank groups just need to be separated by decouplers to get them to feed your engines in a staged manner. If I remember correctly, crossfeed enable/disable had no effect on xenon fuel, which is why I had to use decouplers.\n\nJust be careful, and save a lot, because if you press the spacebar accidentally, you can split your xenon ship in half... the decouplers are only there to force the xenon fuel to flow correctly, in a staged manner, and are NEVER intended to actually be activated, because doing so splits the ship apart. Obviously, it would be best if Squad made xenon fuel follow the same rules as regular fuels, but it is what it is ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\nOh, and all those people saying to \u0022just disable the tanks\u0022- umm, that doesn\u0027t work so well when your ship weighs like 300 metric tons and has like 750 xenon tanks or whatever ridiculous number my ship ended up having. I don\u0027t remember.\n\nOH and I never actually launched this ship into orbit because some new patch came out, but I proved the concept was viable on the ground.\n\n**Edited \u003Ctime datetime=\u00222015-04-01T21:28:52Z\u0022 title=\u002204/01/2015 09:28  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by |Velocity|**"},{"CreatedByName":"Foxster","CreatedById":113764,"CreatedDateTime":"2015-04-01T21:28:50Z","Content":"\u003E \n\u003E Did you get to the 7-stage config by copying and pasting a subassembly from the 4-stage config? If so I wonder whether the stage precedence somehow got copied along with the parts...one way to check would be by hand-building a trial stage 5 onto the 4-stage and seeing if that works.\n\nYea, that occurred to me and I did just what you said and built the bottom stage manually again and it still did the same.\n\n- - - Updated - - -\n\n\u003E \n\u003E In stock, the xenon tanks need to be separated by decouplers. I created a \u0022refuelable\u0022, massive xenon-propelled ship that had paired, xenon fuel assemblages attached to the ship via docking ports, and with each fuel assemblage pair separated by a decoupler. (A \u0022fuel assemblage\u0022 was a subassembly I created that had like 100 xenon tanks tightly packed together with Clampatron Sr. docking ports at each end. Effectively, it is just a very large xenon tank.) When a fuel assemblage goes empty, xenon fuel begins to get drawn from the next set of fuel assemblages down the line, and the empty fuel assemblage is discarded. (It is possible to refuel the fuel assemblage, but it would be HIGHLY tedious.) The ship is \u0022refuelable\u0022 in that once it\u0027s returned to Kerbin orbit, I can launch a rocket containing new fuel assemblages and dock them onto the ship.\n\u003E So basically, xenon tanks and xenon tank groups just need to be separated by decouplers to get them to feed your engines in a staged manner. If I remember correctly, crossfeed enable/disable had no effect on xenon fuel, which is why I had to use decouplers.\n\u003E \n\u003E Just be careful, and save a lot, because if you press the spacebar accidentally, you can split your xenon ship in half... the decouplers are only there to force the xenon fuel to flow correctly, in a staged manner, and are NEVER intended to actually be activated, because doing so splits the ship apart. Obviously, it would be best if Squad made xenon fuel follow the same rules as regular fuels, but it is what it is ![:(](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif)\n\u003E \n\u003E Oh, and all those people saying to \u0022just disable the tanks\u0022- umm, that doesn\u0027t work so well when your ship weighs like 300 metric tons and has like 750 xenon tanks ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)\n\nI kinda have that already with the first craft above. Each of the bottom stages of tanks are separated by decouplers and, as I said, that works OK. The difficulty comes when trying to stage multiple sets of engines too."},{"CreatedByName":"-Velocity-","CreatedById":74097,"CreatedDateTime":"2015-04-01T21:33:23Z","Content":"\u003E \n\u003E Yea, that occurred to me and I did just what you said and built the bottom stage manually again and it still did the same.\n\u003E - - - Updated - - -\n\u003E \n\u003E I kinda have that already with the first craft above. Each of the bottom stages of tanks are separated by decouplers and, as I said, that works OK. The difficulty comes when trying to stage multiple sets of engines too.\n\nOdd. I built an \u0022interstellar probe\u0022 that I launched away from Kerbol at something like 100 km/s. I had staged ion engines on that one. They worked just fine.\n\nEdit- maybe just try a single set of tanks per ion engine, not staged tanks for each engine set. Less efficient, yes, but by a whole lot? Not really.\n\nAlso, did you actually test this configuration in game? Those delta-V stats by Mechjeb could easily be incorrect, especially for something more \u0022arcane\u0022 like staged ion engines, which is a relatively new feature. I\u0027ve seen the delta-V stats bug out before or otherwise have incorrect information. Alternatively, those stats could in FACT be correct, because you simply have the craft staged incorrectly- like the decouplers are out of order or something.\n\n**Edited \u003Ctime datetime=\u00222015-04-01T21:38:35Z\u0022 title=\u002204/01/2015 09:38  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 1, 2015\u003C/time\u003E by |Velocity|**"},{"CreatedByName":"Foxster","CreatedById":113764,"CreatedDateTime":"2015-04-01T21:46:51Z","Content":"I\u0027m getting tired and a bit punchy on this. Think I\u0027ll start again tomorrow. \n\nThanks for the help."},{"CreatedByName":"Mister Dilsby","CreatedById":232743,"CreatedDateTime":"2015-04-02T00:45:06Z","Content":"\u003E \n\u003E I\u0027m getting tired and a bit punchy on this. Think I\u0027ll start again tomorrow.\n\nI can definitely feel that! When you get back to it here\u0027s another thought: could it matter what decouplers and tanks the algorithm \u0027finds\u0027 as it traces a path back to root? That is, would it work if you laid it all out in one line with no branches like so:\n\n[ROOT][T1]=[T2]=[T3]=...[Tn]\n\n(where [T] are tanks and = represents one decoupler)\n\nrather than having multiple branches like this, and trying to differentiate by adding decouplers:\n\n[T1]=[ROOT]==[T2]\n\n...Hypothesis being that the multibranch method reaches a limit in number of stages but the linear method does not.\n\n**Edited \u003Ctime datetime=\u00222015-04-02T15:26:49Z\u0022 title=\u002204/02/2015 03:26  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 2, 2015\u003C/time\u003E by Mister Dilsby**"},{"CreatedByName":"Red Iron Crown","CreatedById":12858,"CreatedDateTime":"2015-04-02T15:22:26Z","Content":"If you have ion thrusters in different stages it confuses the dV calculators like MJ and KER. They assume that an engine will burn all fuel available to it before staging the engines away, and with ions that means draining the entire vessel including stages above it. It will calculate drop tanks without thrusters just fine, but once you get to a stage with jettisonable thrusters in it the simulation behaves strangely.\n\nThe workaround is to disable the thrusters in all but the last stage. This will yield correct dV numbers but the TWR for those lower stages will be incorrect."},{"CreatedByName":"Aethon","CreatedById":110755,"CreatedDateTime":"2015-04-02T16:22:58Z","Content":"![8D90F639C9780426A7C97BDACB1C35B36ADF8E88](http://cloud-4.steamusercontent.com/ugc/535138632469175139/8D90F639C9780426A7C97BDACB1C35B36ADF8E88/)\n\nLol. Here are the last few stages of my Sundiver. It requires some babysitting, turning on and off tanks, fuel transfer etc., if you want it to perform efficiently, but it works. Below the tree stage is an LVN. I\u0027m not sure whether KER is calculating the dv correctly, but I think it is. Dv actually goes up at times during the mission."},{"CreatedByName":"dontbesilly","CreatedById":137150,"CreatedDateTime":"2016-05-23T20:32:00Z","Content":"Spiral Staging (Asparagus) drains fuel as planned, from the outside to the inside, with xenon tanks - no fidgeting with fuel on/off switch.\n\nKER shows it \u0022not\u0022, MJ does show it. ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif \u0022:)\u0022)\n\nTested on the landing pad.\n\n![QZ6qUrs.jpg](http://i.imgur.com/QZ6qUrs.jpg)\n\nEngine block removed to give a better view (which obviously does not show any staging stats).\n\n![CDzBJUx.jpg](http://i.imgur.com/CDzBJUx.jpg)"},{"CreatedByName":"FleshJeb","CreatedById":111640,"CreatedDateTime":"2016-05-24T01:03:22Z","Content":"I need to experiment to see if batteries are stagable..."}]}