{"TopicId":150842,"ForumId":20,"TopicTitle":"Mod to make cabin lights consume EC?","CreatedByName":"fourfa","CreatedById":151713,"CreatedDateTime":"2016-10-26T00:57:12Z","PageNum":1,"Articles":[{"CreatedByName":"fourfa","CreatedById":151713,"CreatedDateTime":"2016-10-26T00:57:12Z","Content":"\n\u003Cp\u003E\nSimple request - is there a realism mod that makes the cabin lights consume electric power?\n\u003C/p\u003E\n"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2016-10-26T01:42:43Z","Content":"\n\u003Cp\u003E\nI did a little quick testing.\u00A0 This can be done with a ModuleManager patch, but I need to figure out the detection logic and write the script.\u00A0 I tested it by directly editing the Mk1 Command pod like so...\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E\t//MODULE\n\t//{\n\t//\tname = ModuleAnimateGeneric\n\t//\tanimationName = Mk1Lights\n\t//\tdefaultActionGroup = Light\n\t//\tactionGUIName = Toggle Lights\n\t//\tstartEventGUIName = Lights On\n\t//\tendEventGUIName = Lights Off\n\t//}\n\tMODULE\n\t{\n\t\tname = ModuleLight\n\t\tlightName = spotlight\n\t\tuseAnimationDim = true\n\t\tlightBrightenSpeed = 2.5\n\t\tlightDimSpeed = 2.5\n\t\tresourceAmount = 0.04\n\t\tanimationName = Mk1Lights\n\t\tuseResources = true\n\t}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\nGive me a little bit and I\u0027ll figure out the module filter.\u00A0 I just copied those values from the light parts and it seems to work ok.\u00A0 Though I have no idea how much power they should actually consume.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-26T01:45:07Z\u0022 title=\u002210/26/2016 01:45  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 26, 2016\u003C/time\u003E by Alshain\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2016-10-26T02:19:04Z","Content":"\n\u003Cp\u003E\nOk, well this is turning out to be more difficult than I thought.\u00A0 Squad is nothing if not consistently inconsistent so the plane parts use a different module for the lights than the rocket parts.\n\u003C/p\u003E\n\u003Cp\u003E\nThese patches seem to work with the plane parts, I have to do some testing on the others.\u00A0 I couldn\u0027t find a real good way to condense these into a single patch without running the risk of messing up a modded part so I opted to just keep them as separate patches.\n\u003C/p\u003E\n\u003Cpre class=\u0022ipsCode prettyprint lang-html prettyprinted\u0022\u003E\n\u003Cspan class=\u0022pln\u0022\u003E// Add electric resource consumption to cockpit lights\n// Author: Alshain\n\n@PART[Mark1Cockpit] \n{\n\t@MODULE[ModuleAnimateGeneric]\n\t{\n\t\t@name = ModuleLight\n\t\t%useAnimationDim = true\n\t\t%lightBrightenSpeed = 2.5\n\t\t%lightDimSpeed = 2.5\n\t\t%resourceAmount = 0.01\n\t\t%useResources = true\n\t}\n}\n\n@PART[Mark2Cockpit] \n{\n\t@MODULE[ModuleAnimateGeneric]\n\t{\n\t\t@name = ModuleLight\n\t\t%useAnimationDim = true\n\t\t%lightBrightenSpeed = 2.5\n\t\t%lightDimSpeed = 2.5\n\t\t%resourceAmount = 0.01\n\t\t%useResources = true\n\t}\n}\n\n@PART[MK1CrewCabin] \n{\n\t@MODULE[ModuleAnimateGeneric]\n\t{\n\t\t@name = ModuleLight\n\t\t%useAnimationDim = true\n\t\t%lightBrightenSpeed = 2.5\n\t\t%lightDimSpeed = 2.5\n\t\t%resourceAmount = 0.01\n\t\t%useResources = true\n\t}\n}\n\n@PART[mk2Cockpit_Standard] \n{\n\t@MODULE[ModuleAnimateGeneric]\n\t{\n\t\t@name = ModuleLight\n\t\t%useAnimationDim = true\n\t\t%lightBrightenSpeed = 2.5\n\t\t%lightDimSpeed = 2.5\n\t\t%resourceAmount = 0.01\n\t\t%useResources = true\n\t}\n}\n\n@PART[mk2Cockpit_Inline] \n{\n\t@MODULE[ModuleAnimateGeneric]\n\t{\n\t\t@name = ModuleLight\n\t\t%useAnimationDim = true\n\t\t%lightBrightenSpeed = 2.5\n\t\t%lightDimSpeed = 2.5\n\t\t%resourceAmount = 0.01\n\t\t%useResources = true\n\t}\n}\n\n@PART[mk2CrewCabin] \n{\n\t@MODULE[ModuleAnimateGeneric]\n\t{\n\t\t@name = ModuleLight\n\t\t%useAnimationDim = true\n\t\t%lightBrightenSpeed = 2.5\n\t\t%lightDimSpeed = 2.5\n\t\t%resourceAmount = 0.01\n\t\t%useResources = true\n\t}\n}\n\n@PART[mk3Cockpit_Shuttle] \n{\n\t@MODULE[ModuleAnimateGeneric]\n\t{\n\t\t@name = ModuleLight\n\t\t%useAnimationDim = true\n\t\t%lightBrightenSpeed = 2.5\n\t\t%lightDimSpeed = 2.5\n\t\t%resourceAmount = 0.01\n\t\t%useResources = true\n\t}\n}\n\n@PART[mk3CrewCabin] \n{\n\t@MODULE[ModuleAnimateGeneric]\n\t{\n\t\t@name = ModuleLight\n\t\t%useAnimationDim = true\n\t\t%lightBrightenSpeed = 2.5\n\t\t%lightDimSpeed = 2.5\n\t\t%resourceAmount = 0.01\n\t\t%useResources = true\n\t}\n}\u003C/span\u003E\u003C/pre\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-26T02:26:50Z\u0022 title=\u002210/26/2016 02:26  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 26, 2016\u003C/time\u003E by Alshain\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2016-10-26T03:27:20Z","Content":"\n\u003Cp\u003E\nOk, well it looks like the other lights aren\u0027t going to work this way.\u00A0 They use a module that actually changes the color of the \u0027glass\u0027 rather than using a model with a built-in animation.\u00A0 A plugin is going to have to extend that color changing module in order to add a resource drain to it.\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ll take a look at making that plugin tomorrow.\u00A0 I don\u0027t think it will be too difficult.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-10-26T03:38:27Z\u0022 title=\u002210/26/2016 03:38  AM\u0022 data-short=\u00227 yr\u0022\u003EOctober 26, 2016\u003C/time\u003E by Alshain\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"fourfa","CreatedById":151713,"CreatedDateTime":"2016-10-26T07:48:43Z","Content":"\n\u003Cp\u003E\nWow, looking forward to it! Thanks\n\u003C/p\u003E\n"},{"CreatedByName":"Alshain","CreatedById":110959,"CreatedDateTime":"2016-10-27T02:26:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00222823944\u0022 data-ipsquote-contentid=\u0022150842\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221477468123\u0022 data-ipsquote-userid=\u0022151713\u0022 data-ipsquote-username=\u0022fourfa\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n18 hours ago, fourfa said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWow, looking forward to it! Thanks\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nOk, so the good news is I was able to quite easily extend ModuleColorChanger, the module that the rocket part lights uses.\n\u003C/p\u003E\n\u003Cp\u003E\nThe bad news is I had hoped to also extend ModuleAnimateGeneric that the cockpits use so I could charge them more cleanly, but so far I haven\u0027t found a way to detect if the animation is on or off (though I can detect the transition or \u0022moving\u0022 as it is called in the code).\u00A0 However, since the earlier patches I posted that convert it to ModuleLight seem to work ok you can just use that for now.\u00A0 I\u0027m just hoping there isn\u0027t a side effect of that I\u0027m not aware of.\n\u003C/p\u003E\n\u003Cp\u003E\nFor ModuleColorChanger, I\u0027ve written the rate, amount, and resource type in as public variables, so if there is another part using that module other than the cabin lights you could have it charge EC... or actually any resource... with a simple module manager patch and no change to the plugin.\n\u003C/p\u003E\n\u003Cp\u003E\nI will probably go ahead and package this up in the next day or two as time permits and push it out for you.\u00A0 I\u0027ll include the cockpit patches in the package as well.\u00A0 It will likely appear in my modlet thread you see in my signature.\n\u003C/p\u003E\n"}]}