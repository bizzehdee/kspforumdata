{"TopicId":16177,"ForumId":34,"TopicTitle":"[0.17] Fuel Transfer Mod V 0.2.2","CreatedByName":"younata","CreatedById":17757,"CreatedDateTime":"2012-08-06T02:57:10Z","PageNum":5,"Articles":[{"CreatedByName":"cttw","CreatedById":2670,"CreatedDateTime":"2012-10-10T10:19:55Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kellven\u0022 data-cite=\u0022kellven\u0022\u003E\u003Cdiv\u003EAppears this is incompatible with:\u003Cp\u003ELooked at his code, and he\u0027s ...erm... modifying the stock classes directly, which I didn\u0027t think was possible, but it\u0027s causing a problem when your mod goes to check for a stock fuel/rcs tank.\u003C/p\u003E\u003Cp\u003EThe skinny:\u003C/p\u003E\u003Cp\u003E(in FuelTransferCore)\u003C/p\u003E\u003Cp\u003E-You\u0027re using \u0022.GetType() == typeof(FuelTank)\u0022 which compares the runtime type of the part against the unmodified runtime type of the stock FuelTank class.\u003C/p\u003E\u003Cp\u003E-He\u0027s modifying the runtime type of the stock parts, including the tanks.\u003C/p\u003E\u003Cp\u003E-Result is you find no tanks, and the list for transfer is empty.\u003C/p\u003E\u003Cp\u003EI had to exclude the MuMech roboparts for a plugin I did, and found \u0022part.ClassName\u0022 is set to the name of the class the part uses, and is just a string; bypassing typing, and multi-plugin dependencies. So I changed your stock tank checks(3 sets?) to:\u003C/p\u003E\u003Cp\u003E.ClassName == \u0022FuelTank\u0022\u003C/p\u003E\u003Cp\u003Eand\u003C/p\u003E\u003Cp\u003E.ClassName == \u0022RCSFuelTank\u0022\u003C/p\u003E\u003Cp\u003Erecompiled, and it all seems to work out in game.\u003C/p\u003E\u003Cp\u003EHere\u0027s the modified .cs file:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropbox.com/u/74137297/FuelTransferModule.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropbox.com/u/74137297/FuelTransferModule.cs\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI\u0027m running into this problem. How do I use this file?\u003C/p\u003E\n"},{"CreatedByName":"Subcidal","CreatedById":20751,"CreatedDateTime":"2012-10-10T23:05:34Z","Content":"\n\u003Cp\u003EYeah if you could compile that fix into a .dll for us whom don\u0027t code, Would be much appreciated.\u003C/p\u003E\n"},{"CreatedByName":"Exelcior_esp","CreatedById":37004,"CreatedDateTime":"2012-10-12T13:13:10Z","Content":"\n\u003Cp\u003EMen, this mod is awesome, worked perfectly, and thanks for this, my duna crew can go home (i dont give a **** for the crew... the only one i want home right now is jeb \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cheesy.gif\u0022 alt=\u0022:D\u0022\u003E)\u003C/p\u003E\n"},{"CreatedByName":"blspblackdeath","CreatedById":20067,"CreatedDateTime":"2012-10-13T10:45:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kellven\u0022 data-cite=\u0022kellven\u0022\u003E\u003Cdiv\u003EAppears this is incompatible with:\u003Cp\u003ELooked at his code, and he\u0027s ...erm... modifying the stock classes directly, which I didn\u0027t think was possible, but it\u0027s causing a problem when your mod goes to check for a stock fuel/rcs tank.\u003C/p\u003E\u003Cp\u003EThe skinny:\u003C/p\u003E\u003Cp\u003E(in FuelTransferCore)\u003C/p\u003E\u003Cp\u003E-You\u0027re using \u0022.GetType() == typeof(FuelTank)\u0022 which compares the runtime type of the part against the unmodified runtime type of the stock FuelTank class.\u003C/p\u003E\u003Cp\u003E-He\u0027s modifying the runtime type of the stock parts, including the tanks.\u003C/p\u003E\u003Cp\u003E-Result is you find no tanks, and the list for transfer is empty.\u003C/p\u003E\u003Cp\u003EI had to exclude the MuMech roboparts for a plugin I did, and found \u0022part.ClassName\u0022 is set to the name of the class the part uses, and is just a string; bypassing typing, and multi-plugin dependencies. So I changed your stock tank checks(3 sets?) to:\u003C/p\u003E\u003Cp\u003E.ClassName == \u0022FuelTank\u0022\u003C/p\u003E\u003Cp\u003Eand\u003C/p\u003E\u003Cp\u003E.ClassName == \u0022RCSFuelTank\u0022\u003C/p\u003E\u003Cp\u003Erecompiled, and it all seems to work out in game.\u003C/p\u003E\u003Cp\u003EHere\u0027s the modified .cs file:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropbox.com/u/74137297/FuelTransferModule.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropbox.com/u/74137297/FuelTransferModule.cs\u003C/a\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECan someone make this to a working .dll???\u003C/p\u003E\u003Cp\u003EI can\u0060t refill my tanker and rescue Jeb. *sniff*\u003C/p\u003E\n"},{"CreatedByName":"pr0user303","CreatedById":38789,"CreatedDateTime":"2012-10-13T13:10:31Z","Content":"\n\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 alt=\u0022:(\u0022\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E:confused:can someone plz tell me why there r MACOX and fuel transfer file i dunno which 1 should i choose and plz tell me the instruction for installtion..\n"},{"CreatedByName":"kellven","CreatedById":16971,"CreatedDateTime":"2012-10-15T01:07:16Z","Content":"\n\u003Cp\u003EI sent the author a message, but haven\u0027t heard back in an hour or so, so impatience personified(me) just compiled my fix for using this with MajiirKerbalLib.\u003C/p\u003E\u003Cp\u003EHere\u0027s the fixed version:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropbox.com/u/74137297/KFuelTransferFix.dll\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropbox.com/u/74137297/KFuelTransferFix.dll\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ENote: Filename has been changed to avoid crossing the streams.\u003C/p\u003E\u003Cp\u003EInstructions: \u003Cstrong\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003EDrop\u003C/span\u003E\u003C/strong\u003E this dll into your plugins folder and \u003Cstrong\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003EMove\u003C/span\u003E\u003C/strong\u003E \u0022FuelTransferMod.dll\u0022 somewhere safe. \u003Cstrong\u003E\u003Cspan style=\u0022text-decoration:underline;\u0022\u003EDo not\u003C/span\u003E\u003C/strong\u003E use both at the same time.\u003C/p\u003E\u003Cp\u003E When Younata comes back and fixes this, just delete \u0022KFuelTransferFix.dll\u0022 and forget about it.\u003C/p\u003E\u003Cp\u003Ecode is here again:\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022https://dl.dropbox.com/u/74137297/FuelTransferModule.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://dl.dropbox.com/u/74137297/FuelTransferModule.cs\u003C/a\u003E\u003C/p\u003E\u003Cp\u003EAll I did was change the tank testing to use the Part.Classname string instead of runtime type comparison.\u003C/p\u003E\n"},{"CreatedByName":"cttw","CreatedById":2670,"CreatedDateTime":"2012-10-15T09:08:45Z","Content":"\n\u003Cp\u003EThank you for being impatient, kellven.\u003C/p\u003E\n"},{"CreatedByName":"FeedbackGuy","CreatedById":40080,"CreatedDateTime":"2012-10-15T21:34:51Z","Content":"\n\u003Cp\u003EYes nice. Im thinking of having Kethane stations on the mun/minmus and everytime a craft has a lack of fuel the kethane from the station will replenish it(much like a mun gas station).\u003C/p\u003E\u003Cp\u003ECan be also usefull for trips to Duna and Eve(well if u miss the mun and u cant refuel you go starvin\u0027)\u003C/p\u003E\n"},{"CreatedByName":"Majiir","CreatedById":7550,"CreatedDateTime":"2012-10-15T22:13:06Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kellven\u0022 data-cite=\u0022kellven\u0022\u003E\u003Cdiv\u003ELooked at his code, and he\u0027s ...erm... modifying the stock classes directly, which I didn\u0027t think was possible\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kellven\u0022 data-cite=\u0022kellven\u0022\u003E\u003Cdiv\u003E, but it\u0027s causing a problem when your mod goes to check for a stock fuel/rcs tank.\u003Cp\u003EThe skinny:\u003C/p\u003E\u003Cp\u003E(in FuelTransferCore)\u003C/p\u003E\u003Cp\u003E-You\u0027re using \u003Cstrong\u003E\u0022.GetType() == typeof(FuelTank)\u0022 which compares the runtime type\u003C/strong\u003E of the part against the unmodified runtime type of the stock FuelTank class.\u003C/p\u003E\u003Cp\u003E-He\u0027s modifying the runtime type of the stock parts, including the tanks.\u003C/p\u003E\u003Cp\u003E-Result is you find no tanks, and the list for transfer is empty.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI have bolded the real problem. That is, simply put, the \u003Cstrong\u003Ewrong\u003C/strong\u003E way to check for type constraints in C#.\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022kellven\u0022 data-cite=\u0022kellven\u0022\u003E\u003Cdiv\u003EI had to exclude the MuMech roboparts for a plugin I did, and found \u0022part.ClassName\u0022 is set to the name of the class the part uses, and is just a string; bypassing typing, and multi-plugin dependencies. So I changed your stock tank checks(3 sets?) to:\u003Cp\u003E.ClassName == \u0022FuelTank\u0022\u003C/p\u003E\u003Cp\u003Eand\u003C/p\u003E\u003Cp\u003E.ClassName == \u0022RCSFuelTank\u0022\u003C/p\u003E\u003Cp\u003Erecompiled, and it all seems to work out in game.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EI applaud your timeliness and resourcefulness, but I must emphasize that this is \u003Cstrong\u003Ealso a wrong\u003C/strong\u003E way to check for type constraints in C#. I have \u003Ca href=\u0022https://github.com/younata/FuelTransferModule/pull/11\u0022 rel=\u0022external nofollow\u0022\u003Esubmitted a pull request on Github\u003C/a\u003E with the correct fix and an explanation.\u003C/p\u003E\u003Cp\u003EBy the way, if you find plugin compatibility issues, please notify both plugin authors! (I did suspect this plugin would have a compatibility issue with MajiirKerbalLib, but I didn\u0027t suspect someone would have already found it.) \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222012-10-15T22:23:31Z\u0022 title=\u002210/15/2012 10:23  PM\u0022 data-short=\u002211 yr\u0022\u003EOctober 15, 2012\u003C/time\u003E by Majiir\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"younata","CreatedById":17757,"CreatedDateTime":"2012-10-15T22:42:43Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Majiir\u0022 data-cite=\u0022Majiir\u0022\u003E\u003Cdiv\u003E\u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_cool.gif\u0022 alt=\u0022:cool:\u0022\u003E\u003Cp\u003EI have bolded the real problem. That is, simply put, the \u003Cstrong\u003Ewrong\u003C/strong\u003E way to check for type constraints in C#.\u003C/p\u003E\u003Cp\u003EI applaud your timeliness and resourcefulness, but I must emphasize that this is \u003Cstrong\u003Ealso a wrong\u003C/strong\u003E way to check for type constraints in C#. I have \u003Ca href=\u0022https://github.com/younata/FuelTransferModule/pull/11\u0022 rel=\u0022external nofollow\u0022\u003Esubmitted a pull request on Github\u003C/a\u003E with the correct fix and an explanation.\u003C/p\u003E\u003Cp\u003EBy the way, if you find plugin compatibility issues, please notify both plugin authors! (I did suspect this plugin would have a compatibility issue with MajiirKerbalLib, but I didn\u0027t suspect someone would have already found it.) \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EOh, hey. There was activity here. I was only aware of this issue when Majiir submitted his pull request to me.\u003C/p\u003E\u003Cp\u003ERight, so I\u0027ve accepted Majiir\u0027s pull request. The main plugin supports this now. It\u0027s also good to know what the c#-ian way of doing things is.\u003C/p\u003E\u003Cp\u003EBut, yeah, you can redownload 0.2.2 at \u003Ca href=\u0022http://rachelbrindle.com/ksp/FuelTransferModule.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://rachelbrindle.com/ksp/FuelTransferModule.zip\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EThe permalink is \u003Ca href=\u0022http://rachelbrindle.com/ksp/FuelTransferModule-0.2.2.zip\u0022 rel=\u0022external nofollow\u0022\u003Ehttp://rachelbrindle.com/ksp/FuelTransferModule-0.2.2.zip\u003C/a\u003E\u003C/p\u003E\u003Cp\u003ESorry for the inconvenience.\u003C/p\u003E\n"},{"CreatedByName":"Majiir","CreatedById":7550,"CreatedDateTime":"2012-10-16T00:41:41Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022younata\u0022 data-cite=\u0022younata\u0022\u003E\u003Cdiv\u003ERight, so I\u0027ve accepted Majiir\u0027s pull request.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ECheers!\u003C/p\u003E\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022younata\u0022 data-cite=\u0022younata\u0022\u003E\u003Cdiv\u003ESorry for the inconvenience.\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003ENot a problem! I didn\u0027t mean to sound annoyed, by the way; I just wanted to be very clear in case someone wasn\u0027t paying close attention.\u003C/p\u003E\n"}]}