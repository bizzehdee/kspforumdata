{"TopicId":202583,"ForumId":109,"TopicTitle":"Surface fixed and rendezvous reference frames","CreatedByName":"Chocolat Oreos","CreatedById":159045,"CreatedDateTime":"2021-05-22T11:09:16Z","PageNum":1,"Articles":[{"CreatedByName":"Chocolat Oreos","CreatedById":159045,"CreatedDateTime":"2021-05-22T11:09:16Z","Content":"\n\u003Cp\u003E\nHello, things that\u00A0I would really like to see in KSP 2 are surface fixed reference frames, let me elaborate:\n\u003C/p\u003E\n\u003Cp\u003E\nThere is this mod called principia, it models n-body gravitation and has an option to manually change reference frames, one of the options is a surface-fixed one. This one is really useful for analyzing how a satellite drifts in say a geostationary orbit, or even a Molniya orbit, and is really nice for fine tuning orbits like that. Here is an example how this would look in a \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u00A0KSP 1 system in a geostationary orbit:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022unknown.png\u0022 data-ratio=\u0022119.92\u0022 width=\u00221200\u0022 src=\u0022https://cdn.discordapp.com/attachments/358224709550342146/843425589599797278/unknown.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHere you see a satellites\u00A0history as it moves\u00A0into GEO (using \u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003E\u003Cabbr title=\u0022Real Solar System (mod)\u0022\u003ERSS\u003C/abbr\u003E\u003C/abbr\u003E \u002B principia). It is clearly visible that at the final trajectory, the satellite has very minimal movement with reference to the fixed surface of\u00A0Earth (in map view).\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nIn principia there is also this other reference frame, where you can select a target, and the target becomes the center of the reference frame (like the visual effect you\u0027d get when you get an encounter with another body), this is way more intuitive to look at than 2\u00A0closest approach markers as we would have in stock KSP 1.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI would really enjoy these features in KSP 2, if possible.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-05-22T11:10:39Z\u0022 title=\u002205/22/2021 11:10  AM\u0022 data-short=\u00223 yr\u0022\u003EMay 22, 2021\u003C/time\u003E by Chocolat Oreos\u003C/strong\u003E\n\u003Cbr\u003Esaid stock while it was RSS\n\u003C/span\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-05-22T21:01:28Z","Content":"\n\u003Cp\u003E\nAre reference frames even a thing in the conics approximation? You can\u0027t have a reference frame for a separate body when you are deciding a specific one is basically the center of your universe at a given point.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWell, that\u0027s partially lies. You have one reference frame, which is the body that you\u0027re within the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E of.\n\u003C/p\u003E\n\u003Cp\u003E\nThat all said, there had to be a way. Otherwise manuever nodes and interplanetary transfer wouldn\u0027t even work.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I\u0027m kinda stumped on the details.\n\u003C/p\u003E\n"},{"CreatedByName":"Chocolat Oreos","CreatedById":159045,"CreatedDateTime":"2021-05-23T10:25:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223977128\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621717288\u0022 data-ipsquote-userid=\u0022197414\u0022 data-ipsquote-username=\u0022Incarnation of Chaos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n13 hours ago, Incarnation of Chaos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre reference frames even a thing in the conics approximation? You can\u0027t have a reference frame for a separate body when you are deciding a specific one is basically the center of your universe at a given point.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nWell, that\u0027s partially lies. You have one reference frame, which is the body that you\u0027re within the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u003C/abbr\u003E of.\n\u003C/p\u003E\n\u003Cp\u003E\nThat all said, there had to be a way. Otherwise manuever nodes and interplanetary transfer wouldn\u0027t even work.\n\u003C/p\u003E\n\u003Cp\u003E\nSo I\u0027m kinda stumped on the details.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think stock handles switching reference frames already (automatically) with encounters in map view (i.e. clicking on a planet when there\u0027s an incoming encounter and seeing how it will fly by based on that planets inertial). So I presume handling a surface reference frame should also be possible, although maybe a bit trickier to implement with a stock like conic system on rails.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2021-05-23T11:39:27Z","Content":"\n\u003Cp\u003E\nI like this idea, I find it cool when making a rendezvous\u00A0that having one ship as a reference frame really helps predict when the best time to maneuver the other ship is.\n\u003C/p\u003E\n"},{"CreatedByName":"Chocolat Oreos","CreatedById":159045,"CreatedDateTime":"2021-05-23T11:52:01Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223977391\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621769967\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI like this idea, I find it cool when making a rendezvous\u00A0that having one ship as a reference frame really helps predict when the best time to maneuver the other ship is.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI agree, and for anyone wondering: Here is an example to what a target reference frame can do:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022unknown.png\u0022 data-ratio=\u002283.18\u0022 width=\u00221088\u0022 src=\u0022https://cdn.discordapp.com/attachments/480397772248580098/733047958232105092/unknown.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHere you see a kerbals\u00A0position with respect to a lander (stock \u002B principia). And its a bit more visually understandable to\u00A0see what\u0027s going on here. The only downside is that you can\u0027t see if your spacecraft will crash into a body on its way towards the target. This reference frame is partially the reason I completely switched to principia a while ago.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nedit: Note that here you can also easily see the ascending / descending node compared to the targets orbit, so it\u0027s nicer to adjust inclinations like this too.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022unknown.png\u0022 data-ratio=\u002277.25\u0022 width=\u00221200\u0022 src=\u0022https://cdn.discordapp.com/attachments/774012505432522754/846003084881690715/unknown.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nHere is another example, like this you not only get to see the first closest approach, but one that is 2 days ahead. Here a simple prograde maneuver is planned to intercept an orbit from\u00A0a satellite in a different orbital plane.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cimg alt=\u0022unknown.png\u0022 data-ratio=\u002291.00\u0022 width=\u00221200\u0022 src=\u0022https://cdn.discordapp.com/attachments/774012505432522754/846004123127513108/unknown.png\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\nAfter that it\u0027s really easy to adjust a closest approach with a second maneuver.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-05-23T12:42:35Z\u0022 title=\u002205/23/2021 12:42  PM\u0022 data-short=\u00223 yr\u0022\u003EMay 23, 2021\u003C/time\u003E by Chocolat Oreos\u003C/strong\u003E\n\u003Cbr\u003Eadded another example\n\u003C/span\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-05-23T16:16:16Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223977370\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621765531\u0022 data-ipsquote-userid=\u0022159045\u0022 data-ipsquote-username=\u0022Chocolat Oreos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n5 hours ago, Chocolat Oreos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI think stock handles switching reference frames already (automatically) with encounters in map view (i.e. clicking on a planet when there\u0027s an incoming encounter and seeing how it will fly by based on that planets inertial). So I presume handling a surface reference frame should also be possible, although maybe a bit trickier to implement with a stock like conic system on rails.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah I think you\u0027re spot on, so KSP2 would just have to move some of the functions out of specific actions and into a more general panel of options.\n\u003C/p\u003E\n"},{"CreatedByName":"cubinator","CreatedById":150330,"CreatedDateTime":"2021-05-24T01:25:33Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223977128\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621717288\u0022 data-ipsquote-userid=\u0022197414\u0022 data-ipsquote-username=\u0022Incarnation of Chaos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/22/2021 at 4:01 PM, Incarnation of Chaos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre reference frames even a thing in the conics approximation? You can\u0027t have a reference frame for a separate body when you are deciding a specific one is basically the center of your universe at a given point.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI think I\u0027ve seen surface fixed frames as an option\u00A0in the\u00A0\u003Cem\u003ETrajectories\u003C/em\u003E\u00A0mod that calculates atmospheric entry.\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2021-05-24T10:33:47Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223977128\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621717288\u0022 data-ipsquote-userid=\u0022197414\u0022 data-ipsquote-username=\u0022Incarnation of Chaos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/22/2021 at 5:01 PM, Incarnation of Chaos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nAre reference frames even a thing in the conics approximation? You can\u0027t have a reference frame for a separate body when you are deciding a specific one is basically the center of your universe at a given point.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThinking about this mathematically isn\u0027t this just a \u003Ca href=\u0022https://en.wikipedia.org/wiki/Change_of_basis\u0022 rel=\u0022external nofollow\u0022\u003Echange of basis\u003C/a\u003E? if A is in reference to O and B is in reference to O then there should be a way to have A referenced to B. It\u0027s been a while since I learned linear algebra and haven\u0027t applied it to programming but my intuition leads me to believe this shouldn\u0027t be a problem.\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-05-26T06:28:54Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223977924\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621852427\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/24/2021 at 5:33 AM, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThinking about this mathematically isn\u0027t this just a \u003Ca href=\u0022https://en.wikipedia.org/wiki/Change_of_basis\u0022 rel=\u0022external nofollow\u0022\u003Echange of basis\u003C/a\u003E? if A is in reference to O and B is in reference to O then there should be a way to have A referenced to B. It\u0027s been a while since I learned linear algebra and haven\u0027t applied it to programming but my intuition leads me to believe this shouldn\u0027t be a problem.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah the more I\u0027ve thought of it the more i\u0027ve realized KSP stock already does this on a limited extent.\n\u003C/p\u003E\n\u003Cp\u003E\nI think I\u0027m just not as familiar with Reference Frames in general as i should be.\n\u003C/p\u003E\n"},{"CreatedByName":"HenryBlatbugIII","CreatedById":159624,"CreatedDateTime":"2021-05-26T10:54:50Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223977924\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221621852427\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/24/2021 at 11:33 AM, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThinking about this mathematically isn\u0027t this just a \u003Ca href=\u0022https://en.wikipedia.org/wiki/Change_of_basis\u0022 rel=\u0022external nofollow\u0022\u003Echange of basis\u003C/a\u003E? if A is in reference to O and B is in reference to O then there should be a way to have A referenced to B. It\u0027s been a while since I learned linear algebra and haven\u0027t applied it to programming but my intuition leads me to believe this shouldn\u0027t be a problem.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYou\u0027re right if we\u0027re just talking about instantaneous locations and velocities, but it\u0027s more complicated when we\u0027re talking about continuous orbits.\u00A0 In the normal \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E reference frame, an orbit is always an ellipse (or other conic section).\u00A0 However, in a surface-fixed or rendezvous target reference frame, it\u0027s unlikely that your current orbit is even a closed shape (unless your current orbital period is an integer multiple (or divisor) of the planet\u0027s rotational period or your target\u0027s orbital period).\n\u003C/p\u003E\n\u003Cp\u003E\nNote that the \u0022rendezvous frame\u0022 orbit that Chocolat Oreos posted above isn\u0027t a simple ellipse; it\u0027s an elliptical spiral that almost, but not quite, repeats (and is only drawn for ~4 orbits).\u00A0 If you aren\u0027t already close to a stationary orbit or a rendezvous, your orbit could look like a many-petaled flower in these frames.\u00A0\u00A0 The orbits are still calculable, but it\u0027s complex enough that I would be surprised if the devs decide that this functionality is worth including in the stock game.\n\u003C/p\u003E\n\u003Cp\u003E\n(Don\u0027t get me wrong; I think this is a great idea.\u00A0 I just think it\u0027s more likely to be done as a mod.)\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2021-05-27T09:34:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223979044\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221622026490\u0022 data-ipsquote-userid=\u0022159624\u0022 data-ipsquote-username=\u0022HenryBlatbugIII\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n22 hours ago, HenryBlatbugIII said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nYou\u0027re right if we\u0027re just talking about instantaneous locations and velocities, but it\u0027s more complicated when we\u0027re talking about continuous orbits.\u00A0 In the normal \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESOI\u003C/abbr\u003E\u003C/abbr\u003E reference frame, an orbit is always an ellipse (or other conic section).\u00A0 However, in a surface-fixed or rendezvous target reference frame, it\u0027s unlikely that your current orbit is even a closed shape (unless your current orbital period is an integer multiple (or divisor) of the planet\u0027s rotational period or your target\u0027s orbital period).\n\u003C/p\u003E\n\u003Cp\u003E\nNote that the \u0022rendezvous frame\u0022 orbit that Chocolat Oreos posted above isn\u0027t a simple ellipse; it\u0027s an elliptical spiral that almost, but not quite, repeats (and is only drawn for ~4 orbits).\u00A0 If you aren\u0027t already close to a stationary orbit or a rendezvous, your orbit could look like a many-petaled flower in these frames.\u00A0\u00A0 The orbits are still calculable, but it\u0027s complex enough that I would be surprised if the devs decide that this functionality is worth including in the stock game.\n\u003C/p\u003E\n\u003Cp\u003E\n(Don\u0027t get me wrong; I think this is a great idea.\u00A0 I just think it\u0027s more likely to be done as a mod.)\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nWhy does the finished product have to be a closed shape or ellipse?\u00A0Just have maximum draw time limits.\u00A0You already have the 2 ellipses you\u0027re multiplying, you\u0027re just transforming one with respect to the other. Also, Chocolat Oreos image comes from an N-body system, not patched conics so it\u0027s obviously going to show more complex patterns. I still doubt the computation will be very intense though as it\u0027s just matrix multiplication of equal time points with a line connecting each point.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat all said, I doubt this feature will show up also.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Chocolat Oreos","CreatedById":159045,"CreatedDateTime":"2021-05-27T09:58:22Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223979712\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221622108061\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 minutes ago, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhy does the finished product have to be a closed shape or ellipse?\u00A0Just have maximum draw time limits.\u00A0You already have the 2 ellipses you\u0027re multiplying, you\u0027re just transforming one with respect to the other. Also, Chocolat Oreos image comes from an N-body system, not patched conics so it\u0027s obviously going to show more complex patterns. I still doubt the computation will be very intense though as it\u0027s just matrix multiplication of equal time points with a line connecting each point.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat all said, I doubt this feature will show up also.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNote that the N-body system wouldn\u0027t make much of a difference compared to a stock system for that picture, as the difference for Hohmann transfers isn\u0027t much (in this scenario)\u00A0and the orbits are elliptical just like in stock on an Earth centered inertial. But I do agree to the time button, or maybe even have a button that would increment the time based on orbital periods, but that\u0027s hard if the rendezvous is on an hyperbolic intersection, so maybe just a time slider.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI also doubt that this feature will ever exist, but it would be really useful to have.\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-06-05T22:59:51Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223979712\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221622108061\u0022 data-ipsquote-userid=\u0022180102\u0022 data-ipsquote-username=\u0022mcwaffles2003\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 5/27/2021 at 4:34 AM, mcwaffles2003 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nWhy does the finished product have to be a closed shape or ellipse?\u00A0Just have maximum draw time limits.\u00A0You already have the 2 ellipses you\u0027re multiplying, you\u0027re just transforming one with respect to the other. Also, Chocolat Oreos image comes from an N-body system, not patched conics so it\u0027s obviously going to show more complex patterns. I still doubt the computation will be very intense though as it\u0027s just matrix multiplication of equal time points with a line connecting each point.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThat all said, I doubt this feature will show up also.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nKeep in mind just\u00A0\u003Cem\u003Etraversing a matrix\u003C/em\u003E is a\u00A0 O(N^2) operation for CPU code. Performing multiplication is a linear operation, but as you might have to traverse the matrix to get the required values multiple times for a single calculation... were approching levels of time complexity that hurts my brain.\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-06-05T23:20:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223984739\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221622933991\u0022 data-ipsquote-userid=\u0022197414\u0022 data-ipsquote-username=\u0022Incarnation of Chaos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n14 minutes ago, Incarnation of Chaos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nKeep in mind just\u00A0\u003Cem\u003Etraversing a matrix\u003C/em\u003E is a\u00A0 O(N^2) operation for CPU code. Performing multiplication is a linear operation, but as you might have to traverse the matrix to get the required values multiple times for a single calculation... were approching levels of time complexity that hurts my brain.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not sure where you\u0027re even going with this. If we\u0027re restricting the discussion to \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E orbits, and we are simply adding an extra frame of reference, you don\u0027t need to recompute anything. You simply draw a tessellated orbit for several revolutions, or within convenient time frame, and then pass a time parameter along with each and a parametrized transform matrix. The matrix multiplication in question is a normal 4x4 transform. There is nothing here that scales with any sort of N. Position of each point is essentially closed form to within your method for computing trig functions and anomaly. This is so cheap to run on the shader that it\u0027s not even worth discussing as added complexity.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you are not convinced, I can put together a WebGL example that does this in real time without even registering as a GPU load.\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-06-05T23:41:34Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223984744\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221622935221\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n23 minutes ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m not sure where you\u0027re even going with this. If we\u0027re restricting the discussion to \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E orbits, and we are simply adding an extra frame of reference, you don\u0027t need to recompute anything. You simply draw a tessellated orbit for several revolutions, or within convenient time frame, and then pass a time parameter along with each and a parametrized transform matrix. The matrix multiplication in question is a normal 4x4 transform. There is nothing here that scales with any sort of N. Position of each point is essentially closed form to within your method for computing trig functions and anomaly. This is so cheap to run on the shader that it\u0027s not even worth discussing as added complexity.\n\u003C/p\u003E\n\u003Cp\u003E\nIf you are not convinced, I can put together a WebGL example that does this in real time without even registering as a GPU load.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThey\u0027re not doing tessellation for drawing orbits on the GPU, per the developer.\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s all on the CPU, hense my concern.\n\u003C/p\u003E\n\u003Cp\u003E\nLink to relevant reply-\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/201736-developer-insights-9-%E2%80%93-orbit-tessellation/\u0026amp;do=findComment\u0026amp;comment=3961987\u0022 rel=\u0022\u0022\u003Ehttps://forum.kerbalspaceprogram.com/index.php?/topic/201736-developer-insights-9-\u2013-orbit-tessellation/\u0026amp;do=findComment\u0026amp;comment=3961987\u003C/a\u003E\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222021-06-05T23:45:12Z\u0022 title=\u002206/05/2021 11:45  PM\u0022 data-short=\u00223 yr\u0022\u003EJune 5, 2021\u003C/time\u003E by Incarnation of Chaos\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-06-06T00:27:13Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223984754\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221622936494\u0022 data-ipsquote-userid=\u0022197414\u0022 data-ipsquote-username=\u0022Incarnation of Chaos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, Incarnation of Chaos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThey\u0027re not doing tessellation for drawing orbits on the GPU, per the developer.\n\u003C/p\u003E\n\u003Cp\u003E\nIt\u0027s all on the CPU, hense my concern.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nNobody said anything about tessellating on the GPU.\u00A0 You send a tessellated orbit in \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E coordinates to the GPU and transform to body coordinates in the vertex shader. It\u0027s one 4x4 matrix multiply per vertex. That\u0027s basically free.\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-06-06T02:10:52Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223984764\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221622939233\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n1 hour ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nNobody said anything about tessellating on the GPU.\u00A0 You send a tessellated orbit in \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E coordinates to the GPU and transform to body coordinates in the vertex shader. It\u0027s one 4x4 matrix multiply per vertex. That\u0027s basically free.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nSorry, i thought you used \u0022Shader\u0022 to mean something running on the GPU \u0026lt;.\u0026lt;\n\u003C/p\u003E\n\u003Cp\u003E\nThen as long as it doesn\u0027t have to loop through the matrix and grab values, it wouldn\u0027t perform poorly. Which from reading over your approach, looks like it avoids that entirely.\n\u003C/p\u003E\n"},{"CreatedByName":"K^2","CreatedById":57710,"CreatedDateTime":"2021-06-06T03:14:45Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223984789\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221622945452\u0022 data-ipsquote-userid=\u0022197414\u0022 data-ipsquote-username=\u0022Incarnation of Chaos\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n43 minutes ago, Incarnation of Chaos said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nSorry, i thought you used \u0022Shader\u0022 to mean something running on the GPU \u0026lt;.\u0026lt;\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThe shader\u00A0\u003Cem\u003Edoes\u003C/em\u003E\u00A0run on the GPU. But it doesn\u0027t handle tessellation. I mean, it can - you can totally do pixel-perfect conic sections on GPU, but relevant approaches\u00A0becomes kind of hardware-specific, and I honestly have no idea how much pain it\u0027d be to even set it up on Unity... So lets skip that mess. We already know that Intercept went with CPU tessellation. So there is already an algorithm that takes orbital elements of given ship and turns it into a list of points which will be connected with straight line segments to form an approximation of the curve on the screen. We take that list of points - if it goes to the boundaries of \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E, take it as is; if it closes on itself, you can repeat this list several times to cover several orbits. In \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E coordinate system, the points are going to be the same for several orbits, so we just copy the list. Then this list of points is sent to the GPU to get drawn to the screen and this is where vertex shader can do its magic.\n\u003C/p\u003E\n\u003Cp\u003E\nNormally, you just want to transform verts from \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E space to screen space. This is done with two (sometimes three*) matrix multiplications. First takes the points from \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E space to camera space, second applies projection transform to fit the frustum of the screen space. To make it relative to the body, we need to add one more matrix multiplication to take points from \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E space to body space. Rest of the math stays the same. The kicker is that this new matrix isn\u0027t the same for every single point - it\u0027s time dependent. Which means we have to pass time index with each spline vertex (easy, we need it for computations anyways) and to compute the relevant transform matrix - that will cost you a sin/cos computation. Using lookup table and refining with series expansion, you can get a sin/cos in just a few iterations, so we\u0027re looking at a cost of maybe an extra dozen multiply/add operations, and then you do the matrix multiplication.\n\u003C/p\u003E\n\u003Cp\u003E\nFor comparison, something very similar is done for things like motion blurs and light trails in a lot of games. A tech artist who\u0027s a bit more on the techier side will have no trouble setting up a vertex shader for this in Unity or any other engine.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n* Ok, just for the sake of completeness, the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E -\u0026gt; Camera transformation could be baked as pair of matrices. \u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoi\u003C/abbr\u003E -\u0026gt; World and World -\u0026gt; Camera. But I doubt it, because that can result in huge loss of precision. Good practice is to pre-multiply these transforms in CPU before handing them off to shader. You can still lose precision here, but because the error is the same for the entire frame, it doesn\u0027t cause distortion or clipping effects. So I\u0027m almost sure we\u0027re talking about just two matrices here. One to transform to camera space and one for projection.\n\u003C/p\u003E\n"},{"CreatedByName":"Incarnation of Chaos","CreatedById":197414,"CreatedDateTime":"2021-06-06T05:22:26Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223984799\u0022 data-ipsquote-contentid=\u0022202583\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221622949285\u0022 data-ipsquote-userid=\u002257710\u0022 data-ipsquote-username=\u0022K^2\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n2 hours ago, K^2 said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nThe shader\u00A0\u003Cem\u003Edoes\u003C/em\u003E\u00A0run on the GPU. But it doesn\u0027t handle tessellation. I mean, it can - you can totally do pixel-perfect conic sections on GPU, but relevant approaches\u00A0becomes kind of hardware-specific, and I honestly have no idea how much pain it\u0027d be to even set it up on Unity... So lets skip that mess. We already know that Intercept went with CPU tessellation. So there is already an algorithm that takes orbital elements of given ship and turns it into a list of points which will be connected with straight line segments to form an approximation of the curve on the screen. We take that list of points - if it goes to the boundaries of \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E, take it as is; if it closes on itself, you can repeat this list several times to cover several orbits. In \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E coordinate system, the points are going to be the same for several orbits, so we just copy the list. Then this list of points is sent to the GPU to get drawn to the screen and this is where vertex shader can do its magic.\n\u003C/p\u003E\n\u003Cp\u003E\nNormally, you just want to transform verts from \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E space to screen space. This is done with two (sometimes three*) matrix multiplications. First takes the points from \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E space to camera space, second applies projection transform to fit the frustum of the screen space. To make it relative to the body, we need to add one more matrix multiplication to take points from \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E space to body space. Rest of the math stays the same. The kicker is that this new matrix isn\u0027t the same for every single point - it\u0027s time dependent. Which means we have to pass time index with each spline vertex (easy, we need it for computations anyways) and to compute the relevant transform matrix - that will cost you a sin/cos computation. \u003Cstrong\u003EUsing lookup table and refining with series expansion, you can get a sin/cos in just a few iterations, so we\u0027re looking at a cost of maybe an extra dozen multiply/add operations, and then you do the matrix multiplication.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nFor comparison, something very similar is done for things like motion blurs and light trails in a lot of games. A tech artist who\u0027s a bit more on the techier side will have no trouble setting up a vertex shader for this in Unity or any other engine.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n* Ok, just for the sake of completeness, the \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoI\u003C/abbr\u003E\u003C/abbr\u003E -\u0026gt; Camera transformation could be baked as pair of matrices. \u003Cabbr title=\u0022Sphere of Influence\u0022\u003E\u003Cabbr title=\u0022Sphere of Influence\u0022\u003ESoi\u003C/abbr\u003E\u003C/abbr\u003E -\u0026gt; World and World -\u0026gt; Camera. But I doubt it, because that can result in huge loss of precision. Good practice is to pre-multiply these transforms in CPU before handing them off to shader. You can still lose precision here, but because the error is the same for the entire frame, it doesn\u0027t cause distortion or clipping effects. So I\u0027m almost sure we\u0027re talking about just two matrices here. One to transform to camera space and one for projection.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nAnd that\u0027s where i got it wrong, i didn\u0027t even think you\u0027d be able to use a lookup table. Great breakdown as always.\n\u003C/p\u003E\n"},{"CreatedByName":"mcwaffles2003","CreatedById":180102,"CreatedDateTime":"2021-06-06T07:36:48Z","Content":"\n\u003Cp\u003E\nWell... I learned a lot thanks to both of you.\n\u003C/p\u003E\n"}]}