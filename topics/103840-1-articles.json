{"TopicId":103840,"ForumId":36,"TopicTitle":"How to get fuel count for active vessel ?","CreatedByName":"creekorful","CreatedById":116499,"CreatedDateTime":"2015-04-10T12:16:29Z","PageNum":1,"Articles":[{"CreatedByName":"creekorful","CreatedById":116499,"CreatedDateTime":"2015-04-10T12:16:29Z","Content":"\n\u003Cp\u003EHello everyone, i have a little question,\u003C/p\u003E\u003Cp\u003EHow to get fuel count for the active vessel ? (The fuel in all parts in mean, for the entire vessel),\u003C/p\u003E\u003Cp\u003EI want to get it to check if fuel level is low.\u003C/p\u003E\u003Cp\u003EAlso if there is a way to check is fuel level is low directly, tell me about it\u003C/p\u003E\u003Cp\u003EThank you in advance. \u003C/p\u003E\u003Cp\u003ECreekorful\u003C/p\u003E\u003Cp\u003E(By getting fuel level i mean wich function or method i had to use with my plugin using VS13 and C#)\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-10T12:27:35Z\u0022 title=\u002204/10/2015 12:27  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 10, 2015\u003C/time\u003E by creekorful\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"MindstormerOne","CreatedById":140193,"CreatedDateTime":"2015-04-10T12:25:22Z","Content":"\n\u003Cp\u003EIn the top right corner there\u0027s a button you can press and it will show you how much fuel you have relative to how much your vehicle can carry.\u003C/p\u003E\n"},{"CreatedByName":"creekorful","CreatedById":116499,"CreatedDateTime":"2015-04-10T12:26:47Z","Content":"\n\u003Cp\u003EThank you, but not like this, i mean with my plugin, in C#\u003C/p\u003E\u003Cp\u003EI want to know wich function i hade to use to get fuel level in active vesssel.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-10T12:30:59Z\u0022 title=\u002204/10/2015 12:30  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 10, 2015\u003C/time\u003E by creekorful\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"FreeThinker","CreatedById":117389,"CreatedDateTime":"2015-04-10T13:04:03Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022creekorful\u0022 data-cite=\u0022creekorful\u0022\u003E\u003Cdiv\u003EThank you, but not like this, i mean with my plugin, in C#\u003Cp\u003EI want to know wich function i hade to use to get fuel level in active vesssel.\u003C/p\u003E\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EYou have to summorise the amount of resource for each part in a vessel filtered on resourcetype\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[COLOR=blue]\u003Cbr\u003Epublic double getTotalResourceCapacity(Part my_part, string resource_name)         \u003Cbr\u003E{             \u003Cbr\u003E    return my_part.GetConnectedResources(resource_name).ToList().Sum(partresource =\u0026gt; partresource.maxAmount);     \u003Cbr\u003E}\u003Cbr\u003E\u003Cbr\u003Epublic static class PartExtensions \u003Cbr\u003E{\u003Cbr\u003E    public static IEnumerable\u0026lt;PartResource\u0026gt; GetConnectedResources(this Part part, String resourcename)\u003Cbr\u003E    {\u003Cbr\u003E       PartResourceDefinition definition = PartResourceLibrary.Instance.GetDefinition(resourcename);\u003Cbr\u003E       return GetConnectedResources(part, definition);\u003Cbr\u003E    }\u003Cbr\u003E\u003Cbr\u003E    public static IEnumerable\u0026lt;PartResource\u0026gt; GetConnectedResources(this Part part, PartResourceDefinition definition)\u003Cbr\u003E    {\u003Cbr\u003E        List\u0026lt;PartResource\u0026gt; resources = new List\u0026lt;PartResource\u0026gt;();\u003Cbr\u003E        part.GetConnectedResources(definition.id, definition.resourceFlowMode, resources);\u003Cbr\u003E        return resources;\u003Cbr\u003E    }\u003Cbr\u003E}\u003Cbr\u003E[/COLOR]\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-04-10T13:15:26Z\u0022 title=\u002204/10/2015 01:15  PM\u0022 data-short=\u00229 yr\u0022\u003EApril 10, 2015\u003C/time\u003E by FreeThinker\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"michaelhester07","CreatedById":96470,"CreatedDateTime":"2015-04-10T13:23:01Z","Content":"\n\u003Cp\u003EVessel.getActiveResources() \u003C/p\u003E\u003Cp\u003Ealso works to return a list of resources on the vessel.\u003C/p\u003E\u003Cp\u003EIf you then want to consume a resource then \u003C/p\u003E\u003Cp\u003Epart.requestResource() \u003C/p\u003E\u003Cp\u003ETo get the active vessel\u003C/p\u003E\u003Cp\u003EFlightGlobals.activeVessel\u003C/p\u003E\u003Cp\u003EAlthough you\u0027ll just want to get the vessel through the module\u0027s part\u003C/p\u003E\u003Cp\u003Ethis.part.vessel\u003C/p\u003E\u003Cp\u003ESo that your mod can still process resources if it\u0027s loaded but not being actively driven.\u003C/p\u003E\n"}]}