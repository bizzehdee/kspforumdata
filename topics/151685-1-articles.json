{"TopicId":151685,"ForumId":55,"TopicTitle":"CommNet Overhaul","CreatedByName":"natsirt721","CreatedById":117557,"CreatedDateTime":"2016-11-07T18:17:33Z","PageNum":1,"Articles":[{"CreatedByName":"natsirt721","CreatedById":117557,"CreatedDateTime":"2016-11-07T18:17:33Z","Content":"\n\u003Cp\u003E\nPreviously I had expressed some grievances regarding the way that KSP handles signal strength and data transmission. \u00A0After some time with my nose buried in information theory books and 30 year old PDFs about the DSN, I propose an improved system that is a little more realistic, but not too technically challenging.\n\u003C/p\u003E\n\u003Cp\u003E\nFirst, the concept of bands. \u00A0The DSN is capable of operating in several bands, and these are;\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nL-band (1-2 GHz)\n\u003C/li\u003E\n\u003Cli\u003E\nS-band (2-4 GHz)\n\u003C/li\u003E\n\u003Cli\u003E\nX-band (7-11\u00A0GHz)\n\u003C/li\u003E\n\u003Cli\u003E\nand more recently\u00A0Ka-band (26-40 GHz)\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nLower power bands are available earlier in career mode, and the Tracking Station is capable of operating on higher energy bands with upgrades. \u00A0Also included with the L3 station would be the ability to use a 500 GHz infrared laser communicator (with a new part or 2), which would provide a wide-band long-range communication link with properly equipped vessels. Higher power bands provide more bandwidth and less distance attenuation, but have higher energy costs per mit.\n\u003C/p\u003E\n\u003Cp\u003E\nEarly antennae would only be able to utilize the L-band, but with the\u00A0as-yet unimplemented\u00A0part upgrade system they would be available to use a higher power band with the proper tech (eg, the Communotron 16 family would be L-band only at unlock, but could be upgraded to use the S-band later on). \u00A0The late-game antennae\u00A0would be capable of utilizing all bands, but only one at a time. \u00A0This would be selected during vessel construction via the context menu, and would be fixed at launch.\n\u003C/p\u003E\n\u003Cp\u003E\nEach antenna also has 2 qualities (for determining signal)\u00A0for each band. \u00A0The first\u00A0is the transmitter power measured in decibel-milliwatts (dBm), and the second is the antenna gain (also in dBm). \u00A0The antenna also has a noise power, but this is independent of the band used. \u00A0The tracking station also has these qualities for each band as well as a \u0027nominal bandwidth\u0027 value (~1-10Hz, except for the laser communicator which would be in the high kHz range), and upgrades will adjust the values to optimize for increased communication\u00A0bandwidth and longer-distance communication (ie, higher power, higher gain, less noise power).\n\u003C/p\u003E\n\u003Cp\u003E\nWorking with real-world values is difficult in KSP because of the reduced system size, but I have here a worked example with some conceptualized values. \u00A0Before we get started, here is a quick unit conversion:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\ndBm = [10 * log(W)] \u002B 30\u00A0 \u00A0\u00A0\u003Cem\u003E(watts to decibel-milliwatts)\u003C/em\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nW = 10 ^ ([dBm \u002B 30] / 10) \u00A0 \u003Cem\u003E(decibel-milliwatts to watts)\u003C/em\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nTracking Station: Level 1 L-band transmit/receive\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nGain: \u002B50 dBm \u00A0\n\u003Cul\u003E\u003Cli\u003E\ngain is directly proportional to the square of the antenna diameter and inversely proportional to the square of the wavelength\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nPower: 30 kW = \u002B44.8 dBm \u00A0\n\u003Cul\u003E\u003Cli\u003E\npower is simply the transmitter power, a \u0027chosen\u0027 value\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nNoise Power: 4.00e-20 W or -173.9 dBm\n\u003Cul\u003E\u003Cli\u003E\nthermal interference on the receiving end. \u00A0directly\u00A0proportional to bandwidth and dependent on the boltzmann constant\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003Cli\u003E\nBandwidth: 10 Hz\n\u003Cul\u003E\u003Cli\u003E\nBandwidth choice is arbitrary (read: defined by the hardware), but is usually higher on manned missions in cis-munar to allow for direct voice transmission. \u00A0Unfortunately, this isn\u0027t a modelable feature so the bandwidth should stay low to keep the noise power down.\n\u003C/li\u003E\n\u003C/ul\u003E\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nCommunotron-16 in Mun orbit, L-band transmit/receive\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nGain: \u002B3 dBm\n\u003C/li\u003E\n\u003Cli\u003E\nPower 0.1W = -10 dBm\n\u003C/li\u003E\n\u003Cli\u003E\nNoise Power: 1.38e-20 W or -176.8 dBm\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nMunar orbit is ~11.5x10^6 m from kerbin (give or take), so distance attenuation is calculated by:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nl^2 / (4*pi*r)^2\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nWhere l is the wavelength and r the distance (units of meters, result is in watts). \u00A0L-band has a wavelength of ~20cm (0.2m), so this equation evaluates to ~2.7e-10 W or -95.6 dBm\n\u003C/p\u003E\n\u003Cp\u003E\nTo calculate received power, simply add the transmit power, the gains of the transmitter and receiver, and the distance losses.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nUplink Signal: 50 dBm (station) \u002B 3 dBm (probe) \u002B 44.8 dBm (station power) -95.6 dBm (distance loss) = \u003Cem\u003E6.5 dBm or 4.6 Watts\u00A0received\u00A0at Mun\u003C/em\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nDownlink Signal: 50 dBm (station) \u002B 3 dBm (probe) -10 dBm (probe power) -95.6 dBm (distance loss) = \u003Cem\u003E-48 dBm or 0.000015 Watts\u00A0received\u00A0at \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E\u003C/em\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nNow, we can calculate the signal-to-noise ratio (SNR) for the uplink and downlink, and this is done by dividing the signal by the noise power of the receiver. \u00A0Note that this has to be done in Watts because of the logarithmic nature of the decibel system.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nUplink SNR = 4.6 W / 1.38x10^-20 W = 3.33\u003Cem\u003Ee20\u003C/em\u003E\n\u003C/li\u003E\n\u003Cli\u003E\nDownlink SNR = 1.5x10^-5 W / 4x10^-20 W = \u003Cem\u003E3.75e14\u003C/em\u003E\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nUsing the Shannon-Hartley theorem, we the calculate the maximum bitrate at which information can be exchanged across the link. \u00A0This bitrate is used for determining probe control on the uplink side, and for determining data TX rate on the downlink side.\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nC = B * log(1\u002BSNR)/log(2)\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nwhere C is the bitrate, B the available bandwidth, and log the logarithm base 10. \u00A0This equation can be simplified by taking the numerator and using a logarithm base 2 without the denominator, but I figured I\u0027d put it in calculator-friendly mode for those of you who don\u0027t know how to do change of base. \u00A0Using this, we calculate our max bitrate in each direction:\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nUplink bitrate = 10Hz * log(1\u002B3.33e20) / log(2) = 681 bits/s\n\u003C/li\u003E\n\u003Cli\u003E\nDownlink bitrate = 10Hz * log(1\u002B3.75e14) / log(2) = 484 bits/s\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nAs you can see, these numbers are pretty small compared to modern communication standards, but they are probably within an order\u00A0of magnitude or two\u00A0of the balanced values. \u00A0According to wikipedia (nb: not-necessarily reputable source) the 20W transmitter on the Apollo LM could support a 56 kbit\u00A0telemetry link or a 1.6kbit backup link, ergo\u00A0the base values for power, noise, and gain require a bit of tweaking (especially for the higher power bands). \u00A0As mentioned above, the downlink bitrate determines the rate at which science can be transmitted. \u00A0This requires a re-scaling of the \u0027mit\u0027, as these rates could transmit any experiment in less than a tenth of a second, however the \u0027mit\u0027 system seems to be arbitrary right now so this isn\u0027t a huge deal. \u00A0The uplink bitrate would determine whether a probe was controllable or not - too low of a bitrate (set arbitrary value here) and the probe can\u0027t effectively receive commands from ground. Alternatively, a minimum receive power could be used as the limiter rather than bitrate - this would allow the player to calculate probe controllability a little easier. \u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nThe actual transmission system works like so:\n\u003C/p\u003E\n\u003Cp\u003E\nAntenna also have a \u0027power per mit\u0027 value, which depends on the band being utilized. \u00A0Higher power bands require more EC/mit, but due to the difficult task of converting EC to Joules (EC/s to Watts) I haven\u0027t run any numbers here. \u00A0The rough estimate I\u0027ve seen is 1EC = 1kJ (1EC/s = 1kW) but I\u0027m not sure how well this is balanced.\u00A0 The transmit bitrate for an antenna would be tweakable by a percentage slider;\u00A0this allows the player to continuously transmit data at a slower rate than maximum which may be necessary do to electrical constraints.\n\u003C/p\u003E\n\u003Cp\u003E\nFor use with relays, each link would have a bitrate calculated, and the lowest bitrate would be the bitrate for the channel.\n\u003C/p\u003E\n\u003Cp\u003E\nWhen a probe desires to transmit data to \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E, the\u00A0downlink bitrate\u00A0is calculated and a \u0027long action\u0027 similar to how the MPL works begins. \u00A0The antenna begins transmitting data at the calculated downlink bitrate times the percentage slider (and consuming EC at a proper rate), and science will either 1) begin to accumulate at \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E until all the data goes through OR 2) build up in the antenna until it has all been \u0027transmitted\u0027, from which another action made on the antenna will \u0027commit\u0027 the science to \u003Cabbr title=\u0022Kerbal Space Center\u0022\u003EKSC\u003C/abbr\u003E. \u00A0The former would be ideal, but I\u0027m not sure how KSP would take to incrementing the science over time, especially through warp.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nOn the player end, they would require a signal distance attenuation table for each band, and the would simply sum the tracking station gain, probe gain,\u00A0the loss in the table, and the transmitter power to get a received power. \u00A0The bitrates would be calculated under the hood, and be displayed on the probe antenna\u0027s context menu. \u00A0Send and receive power would be displayed in the current signal strength bar next to the chronometer.\n\u003C/p\u003E\n\u003Cp\u003E\nThe purpose of this redesign is simple:\u00A0to increase realism in the science process. \u00A0Yes, the \u0027unlock points\u0027 system has its flaws, but that doesn\u0027t mean the transmission system has to be garbage as well. \u00A0The New Horizons probe took over a year to broadcast all of the data it collected at Pluto, and the Voyager probes still have a non-zero downlink bitrate (~200 bits/s IIRC). \u00A0Why can I send back all my data from Jool at lightning-speed?\u00A0 Separating the uplink and downlink signals also allows us to create one-way\u00A0links, for what that\u0027s worth - another realistic scenario that the current system cannot simulate.\n\u003C/p\u003E\n\u003Cp\u003E\ntl;dr: The CommNet mechanics are\u00A0trash and it wouldn\u0027t take much effort to make it better.\n\u003C/p\u003E\n"},{"CreatedByName":"StupidAndy","CreatedById":171175,"CreatedDateTime":"2016-11-07T18:40:36Z","Content":"\n\u003Cp\u003E\nit doesn\u0027t have to be implemented into the game, you can make into a mod (if your good at coding, i have a BUNCH of good ideas, and i cant code so\u00A0\u003Cimg alt=\u0022:(\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_sad.gif\u0022 title=\u0022:(\u0022\u003E)\n\u003C/p\u003E\n"},{"CreatedByName":"Thygrrr","CreatedById":170612,"CreatedDateTime":"2016-11-11T12:01:34Z","Content":"\n\u003Cp\u003E\nLooking at the code of many\u00A0of the Mods out there, you don\u0027t really need to be good at coding, either. \u003Cimg alt=\u0022:wink:\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_wink.gif\u0022 title=\u0022;)\u0022\u003E\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nJust do it \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0Think Kerbal and cobble it together.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-11T12:19:39Z\u0022 title=\u002211/11/2016 12:19  PM\u0022 data-short=\u00227 yr\u0022\u003ENovember 11, 2016\u003C/time\u003E by Thygrrr\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"KSK","CreatedById":61025,"CreatedDateTime":"2016-11-11T12:41:05Z","Content":"\n\u003Cp\u003E\nSounds like this would make a great mod for those that like the extra realism but I\u0027m struggling to see how it really affects gameplay. It doesn\u0027t seem to matter whether you\u0027re dealing with antennas with\u00A0a particular\u00A0\u0027range\u0027 (however inaccurate that term is) or antennas with a particular bitrate (which might be technically more accurate), the practical upshot is much the same. Want to send a probe further out? Better equip it with a better antenna. And \u0027antenna range\u0027 for all its flaws, at least has the virtue of being easy to visualize.\n\u003C/p\u003E\n\u003Cp\u003E\nIn fact, for\u00A0probe control, you could think of \u0027antenna range\u0027 as \u0027maximum range at which practical probe control is possible with that antenna\u0027. The whole notion of probe control as currently depicted in-game isn\u0027t realistic anyway (interplanetary distances not being amenable to real-time control), so the added realism of antenna bitrate over antenna \u0027range\u0027 is largely moot anyway, in my opinion.\n\u003C/p\u003E\n\u003Cp\u003E\nScience transmission - you might have a point here and if game time was important for anything else at all\u00A0then a better science transmission mechanic might be fun. As it stands, your proposal doesn\u0027t seem to add much other than the possibility of timewarping your way through a data transmission if you choose to use a low power antenna? And for uncrewed vessels, given that a high power antenna would be necessary for \u0027probe control\u0027 anyway, then why can\u0027t we just transmit the science using that antenna?\n\u003C/p\u003E\n\u003Cp\u003E\nSummary.\u00A0 Fun if you like added realism or really can\u0027t stand the term \u0027antenna range\u0027 but otherwise given the lack of realism in so many other gameplay mechanics, this seems to be realism for realism\u0027s sake with no particular benefit to the rest of the game.\u00A0In my opinion only of course.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222016-11-11T12:42:49Z\u0022 title=\u002211/11/2016 12:42  PM\u0022 data-short=\u00227 yr\u0022\u003ENovember 11, 2016\u003C/time\u003E by KSK\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"tater","CreatedById":119411,"CreatedDateTime":"2016-11-12T18:28:35Z","Content":"\n\u003Cp\u003E\nTo work in game, this would have to use a system like \u003Cabbr title=\u0022In-Situ Resource Utilization\u0022\u003EISRU\u003C/abbr\u003E, where the game would have the effective data rate of the system, and would \u0022catch up\u0022 each time the craft in question was in focus. Ie: You have a data rate such that it takes 100 days to transmit all the science data (say 100 points for example). You go do something else, then com back in 25 days to do a course correction on your craft. The game would then increment your received science by 25 points, with the remaining 75 (a point a day) still to come. If your course corrections used up a day, you\u0027d see that 1 point show up as well for the new day.\n\u003C/p\u003E\n"},{"CreatedByName":"Errol","CreatedById":118622,"CreatedDateTime":"2016-11-12T18:51:00Z","Content":"\n\u003Cp\u003E\nI think the comm net has other problems to work on first, mainly resolving this whole relay antenna business.\n\u003C/p\u003E\n"}]}