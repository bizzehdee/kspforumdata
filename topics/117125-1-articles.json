{"TopicId":117125,"ForumId":15,"TopicTitle":"Wanted: Unity .anim text with KSP particle emitter","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T01:27:08Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T01:27:08Z","Content":"Ok, I\u0027m having an issue with KSP trying to load a part with a particle emitter. Since I\u0027m using Unity 5 the error in the KSP logs looks suspiciously like the error when I first tried to animate emissives. Basically, I\u0027m trying to turn the particle emitter off by changing the value of the \u0027emit\u0027 setting. Dunno if I\u0027m doing it wrong, but if I\u0027m doing it right I\u0027d appreciate a text output of an .anim file that toggles the emit from a 4.2.2 copy of Unity. Basically, I think the classID in the anim was changed by Unity but isn\u0027t recognized by KSP. Here\u0027s the .anim file I\u0027m having issues with just as an example of what I\u0027d like to compare.\n\nThanks\n\n    %YAML 1.1%TAG !u! tag:unity3d.com,2011:--- !u!74 \u00267400000AnimationClip:  m_ObjectHideFlags: 0  m_PrefabParentObject: {fileID: 0}  m_PrefabInternal: {fileID: 0}  m_Name: valveAnim  serializedVersion: 6  m_Legacy: 1  m_Compressed: 0  m_UseHighQualityCurve: 1  m_RotationCurves: []  m_CompressedRotationCurves: []  m_PositionCurves: []  m_ScaleCurves: []  m_FloatCurves:  - curve:      serializedVersion: 2      m_Curve:      - time: 0        value: 0        inSlope: Infinity        outSlope: Infinity        tangentMode: 31      - time: .166666672        value: 1        inSlope: Infinity        outSlope: Infinity        tangentMode: 31      m_PreInfinity: 2      m_PostInfinity: 2    attribute: emit    path: Steam_Whistle_Cylinder1_auv/GameObject    classID: 114    script: {fileID: -1272454729, guid: 1d6ea3ac39c17304f87ac73826842850, type: 3}  m_PPtrCurves: []  m_SampleRate: 60  m_WrapMode: 0  m_Bounds:    m_Center: {x: 0, y: 0, z: 0}    m_Extent: {x: 0, y: 0, z: 0}  m_ClipBindingConstant:    genericBindings: []    pptrCurveMapping: []  m_AnimationClipSettings:    serializedVersion: 2    m_StartTime: 0    m_StopTime: .166666672    m_OrientationOffsetY: 0    m_Level: 0    m_CycleOffset: 0    m_LoopTime: 1    m_LoopBlend: 0    m_LoopBlendOrientation: 0    m_LoopBlendPositionY: 0    m_LoopBlendPositionXZ: 0    m_KeepOriginalOrientation: 0    m_KeepOriginalPositionY: 1    m_KeepOriginalPositionXZ: 0    m_HeightFromFeet: 0    m_Mirror: 0  m_EditorCurves:  - curve:      serializedVersion: 2      m_Curve:      - time: 0        value: 0        inSlope: Infinity        outSlope: Infinity        tangentMode: 31      - time: .166666672        value: 1        inSlope: Infinity        outSlope: Infinity        tangentMode: 31      m_PreInfinity: 2      m_PostInfinity: 2    attribute: emit    path: Steam_Whistle_Cylinder1_auv/GameObject    classID: 114    script: {fileID: -1272454729, guid: 1d6ea3ac39c17304f87ac73826842850, type: 3}  m_EulerEditorCurves: []  m_HasGenericRootTransform: 0  m_HasMotionFloatCurves: 0  m_GenerateMotionCurves: 0  m_Events: []"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-07-29T01:32:43Z","Content":"I think you got it mixed up. KSP Particles are exported as separate MU files, it\u0027s essentially an empty game object with a particle emitter. They are spawned and attached at run time in KSP and values manipulated through part modules in the part config file, usually engines, or RCS with RCSFX plugin.\n\nyou never animate any values of an emitter in a animation clip. Doing so will most likely cause an error when you attempt to export the part."},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T07:45:37Z","Content":"Well, that\u0027s not what I read. Ok, so I can get the emitter working in unity no problem. How do I turn it on and off? The plan is, to use it instead of the animations used in heat dissipators. Does naming it in the config instead of an animation turn it on and off?\n\n[Here\u0027s what I read.](http://ducttapeeinstein.com/ksp-particle-emitter-added-part-working-game/) Granted, it\u0027s pretty sparse but it seems to say you can change the emitter properties with an animation. Unity had no problem with it and toggling the emitter in the animation did work. KSP didn\u0027t like it when it tried to import it.\n\n**Edited \u003Ctime datetime=\u00222015-07-29T08:32:29Z\u0022 title=\u002207/29/2015 08:32  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 29, 2015\u003C/time\u003E by Fengist**"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-07-29T14:12:42Z","Content":"Very Interesting. I didn\u0027t know that, never tried it that way either. I\u0027ll take a look when I get back home from wokr.\n\n**Edited \u003Ctime datetime=\u00222015-07-29T14:23:57Z\u0022 title=\u002207/29/2015 02:23  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 29, 2015\u003C/time\u003E by nli2work**"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T14:26:27Z","Content":"I\u0027m guessing it\u0027s the classID that\u0027s changed. That\u0027s one of the things that changed on emissives and was throwing the same error in the logs. Which is why I\u0027d kinda like to see an .anim from 4.2.2 that toggles the emissive and see what classID it is.\n\n**Edited \u003Ctime datetime=\u00222015-07-29T15:01:45Z\u0022 title=\u002207/29/2015 03:01  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 29, 2015\u003C/time\u003E by Fengist**"},{"CreatedByName":"Enceos","CreatedById":110725,"CreatedDateTime":"2015-07-29T18:07:24Z","Content":"I loved working with curves in Unity 5, cause version 4 lacks even basic features like copying and pasting curve nodes.\n\nBut the problem is Unity 5 uses different emissive curve IDs, KSP PartTools doesn\u0027t recognize them.\n\nHere\u0027s my emissive animation [gears.anim](https://www.dropbox.com/s/pty1xs82cbl7z1l/gears.anim?dl=0) it has moving parts and emissive, you\u0027ll distinguish them. Don\u0027t know how you extracted the code from the .anim file."},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T23:00:36Z","Content":"Thanks Enceos but I won\u0027t be able to read it. In order to make animations a YAML (text) file you\u0027ll need to change a setting in unity. In [this link](https://forum.kerbalspaceprogram.com/threads/126518-Resolved-Cockpit-lights?p=2043262\u0026viewfull=1#post2043262)is the how to change unity to tell it to export the animations as text. It\u0027s also the method I use to make Unity 5 emissives work in KSP. Also Xyphos has created a script to convert Unity 5 emissives to KSP [here](https://forum.kerbalspaceprogram.com/threads/130085-Unity-Script-Legacy-Animation-Converter).\n\nWhat I really need is a text animation file that changes something, anything in the KSP Particle Emitter. It appears that anything that gets animated with the particle emitter, Unity gives it a classID of 114. I suspect that changed between Unity 4.2.2 and 5 to the point that KSP doesn\u0027t recognize it.\n\n**Edited \u003Ctime datetime=\u00222015-07-29T23:04:36Z\u0022 title=\u002207/29/2015 11:04  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 29, 2015\u003C/time\u003E by Fengist**"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-07-30T07:12:17Z","Content":"here\u0027s one, I added curves on the Emit and Max Energy attributes, from 4.2.2\n\n    %YAML 1.1%TAG !u! tag:unity3d.com,2011:--- !u!74 \u00267400000AnimationClip:  m_ObjectHideFlags: 0  m_PrefabParentObject: {fileID: 0}  m_PrefabInternal: {fileID: 0}  m_Name: particleCurve  serializedVersion: 3  m_AnimationType: 1  m_Compressed: 0  m_RotationCurves: []  m_CompressedRotationCurves: []  m_PositionCurves: []  m_ScaleCurves: []  m_FloatCurves:  - curve:      serializedVersion: 2      m_Curve:      - time: 0        value: 0        inSlope: 6        outSlope: 6        tangentMode: 10      - time: .166666672        value: 1        inSlope: 6        outSlope: 6        tangentMode: 10      m_PreInfinity: 2      m_PostInfinity: 2    attribute: emit    path:     classID: 114    script: {fileID: -1272454729, guid: a1b1dd47b2bfcd04ba9203ca055053c4, type: 3}  - curve:      serializedVersion: 2      m_Curve:      - time: 0        value: 3        inSlope: 21        outSlope: 21        tangentMode: 10      - time: .333333343        value: 10        inSlope: 21        outSlope: 21        tangentMode: 10      m_PreInfinity: 2      m_PostInfinity: 2    attribute: maxEnergy    path:     classID: 114    script: {fileID: -1272454729, guid: a1b1dd47b2bfcd04ba9203ca055053c4, type: 3}  m_SampleRate: 60  m_WrapMode: 0  m_Bounds:    m_Center: {x: 0, y: 0, z: 0}    m_Extent: {x: 0, y: 0, z: 0}  m_MuscleClipInfo:    m_StartTime: 0    m_StopTime: 1    m_OrientationOffsetY: 0    m_Level: 0    m_CycleOffset: 0    m_LoopBlend: 0    m_LoopBlendOrientation: 0    m_LoopBlendPositionY: 0    m_LoopBlendPositionXZ: 0    m_KeepOriginalOrientation: 0    m_KeepOriginalPositionY: 1    m_KeepOriginalPositionXZ: 0    m_HeightFromFeet: 0    m_Mirror: 0  m_EditorCurves:  - curve:      serializedVersion: 2      m_Curve:      - time: 0        value: 0        inSlope: 6        outSlope: 6        tangentMode: 10      - time: .166666672        value: 1        inSlope: 6        outSlope: 6        tangentMode: 10      m_PreInfinity: 2      m_PostInfinity: 2    attribute: emit    path:     classID: 114    script: {fileID: -1272454729, guid: a1b1dd47b2bfcd04ba9203ca055053c4, type: 3}  - curve:      serializedVersion: 2      m_Curve:      - time: 0        value: 3        inSlope: 21        outSlope: 21        tangentMode: 10      - time: .333333343        value: 10        inSlope: 21        outSlope: 21        tangentMode: 10      m_PreInfinity: 2      m_PostInfinity: 2    attribute: maxEnergy    path:     classID: 114    script: {fileID: -1272454729, guid: a1b1dd47b2bfcd04ba9203ca055053c4, type: 3}  m_EulerEditorCurves: []  m_Events: []"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-08-08T07:00:46Z","Content":"Thanks Nil, after spending hours dissecting the anim\u0027s, I still have no clue. Can\u0027t get either to work. I\u0027ve just moved on."}]}