{"TopicId":117125,"ForumId":15,"TopicTitle":"Wanted: Unity .anim text with KSP particle emitter","CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T01:27:08Z","PageNum":1,"Articles":[{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T01:27:08Z","Content":"\n\u003Cp\u003EOk, I\u0027m having an issue with KSP trying to load a part with a particle emitter. Since I\u0027m using Unity 5 the error in the KSP logs looks suspiciously like the error when I first tried to animate emissives. Basically, I\u0027m trying to turn the particle emitter off by changing the value of the \u0027emit\u0027 setting. Dunno if I\u0027m doing it wrong, but if I\u0027m doing it right I\u0027d appreciate a text output of an .anim file that toggles the emit from a 4.2.2 copy of Unity. Basically, I think the classID in the anim was changed by Unity but isn\u0027t recognized by KSP. Here\u0027s the .anim file I\u0027m having issues with just as an example of what I\u0027d like to compare.\u003C/p\u003E\u003Cp\u003EThanks\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E\u003Cbr\u003E%YAML 1.1\u003Cbr\u003E%TAG !u! tag:unity3d.com,2011:\u003Cbr\u003E--- !u!74 \u0026amp;7400000\u003Cbr\u003EAnimationClip:\u003Cbr\u003E  m_ObjectHideFlags: 0\u003Cbr\u003E  m_PrefabParentObject: {fileID: 0}\u003Cbr\u003E  m_PrefabInternal: {fileID: 0}\u003Cbr\u003E  m_Name: valveAnim\u003Cbr\u003E  serializedVersion: 6\u003Cbr\u003E  m_Legacy: 1\u003Cbr\u003E  m_Compressed: 0\u003Cbr\u003E  m_UseHighQualityCurve: 1\u003Cbr\u003E  m_RotationCurves: []\u003Cbr\u003E  m_CompressedRotationCurves: []\u003Cbr\u003E  m_PositionCurves: []\u003Cbr\u003E  m_ScaleCurves: []\u003Cbr\u003E  m_FloatCurves:\u003Cbr\u003E  - curve:\u003Cbr\u003E      serializedVersion: 2\u003Cbr\u003E      m_Curve:\u003Cbr\u003E      - time: 0\u003Cbr\u003E        value: 0\u003Cbr\u003E        inSlope: Infinity\u003Cbr\u003E        outSlope: Infinity\u003Cbr\u003E        tangentMode: 31\u003Cbr\u003E      - time: .166666672\u003Cbr\u003E        value: 1\u003Cbr\u003E        inSlope: Infinity\u003Cbr\u003E        outSlope: Infinity\u003Cbr\u003E        tangentMode: 31\u003Cbr\u003E      m_PreInfinity: 2\u003Cbr\u003E      m_PostInfinity: 2\u003Cbr\u003E    attribute: emit\u003Cbr\u003E    path: Steam_Whistle_Cylinder1_auv/GameObject\u003Cbr\u003E    classID: 114\u003Cbr\u003E    script: {fileID: -1272454729, guid: 1d6ea3ac39c17304f87ac73826842850, type: 3}\u003Cbr\u003E  m_PPtrCurves: []\u003Cbr\u003E  m_SampleRate: 60\u003Cbr\u003E  m_WrapMode: 0\u003Cbr\u003E  m_Bounds:\u003Cbr\u003E    m_Center: {x: 0, y: 0, z: 0}\u003Cbr\u003E    m_Extent: {x: 0, y: 0, z: 0}\u003Cbr\u003E  m_ClipBindingConstant:\u003Cbr\u003E    genericBindings: []\u003Cbr\u003E    pptrCurveMapping: []\u003Cbr\u003E  m_AnimationClipSettings:\u003Cbr\u003E    serializedVersion: 2\u003Cbr\u003E    m_StartTime: 0\u003Cbr\u003E    m_StopTime: .166666672\u003Cbr\u003E    m_OrientationOffsetY: 0\u003Cbr\u003E    m_Level: 0\u003Cbr\u003E    m_CycleOffset: 0\u003Cbr\u003E    m_LoopTime: 1\u003Cbr\u003E    m_LoopBlend: 0\u003Cbr\u003E    m_LoopBlendOrientation: 0\u003Cbr\u003E    m_LoopBlendPositionY: 0\u003Cbr\u003E    m_LoopBlendPositionXZ: 0\u003Cbr\u003E    m_KeepOriginalOrientation: 0\u003Cbr\u003E    m_KeepOriginalPositionY: 1\u003Cbr\u003E    m_KeepOriginalPositionXZ: 0\u003Cbr\u003E    m_HeightFromFeet: 0\u003Cbr\u003E    m_Mirror: 0\u003Cbr\u003E  m_EditorCurves:\u003Cbr\u003E  - curve:\u003Cbr\u003E      serializedVersion: 2\u003Cbr\u003E      m_Curve:\u003Cbr\u003E      - time: 0\u003Cbr\u003E        value: 0\u003Cbr\u003E        inSlope: Infinity\u003Cbr\u003E        outSlope: Infinity\u003Cbr\u003E        tangentMode: 31\u003Cbr\u003E      - time: .166666672\u003Cbr\u003E        value: 1\u003Cbr\u003E        inSlope: Infinity\u003Cbr\u003E        outSlope: Infinity\u003Cbr\u003E        tangentMode: 31\u003Cbr\u003E      m_PreInfinity: 2\u003Cbr\u003E      m_PostInfinity: 2\u003Cbr\u003E    attribute: emit\u003Cbr\u003E    path: Steam_Whistle_Cylinder1_auv/GameObject\u003Cbr\u003E    classID: 114\u003Cbr\u003E    script: {fileID: -1272454729, guid: 1d6ea3ac39c17304f87ac73826842850, type: 3}\u003Cbr\u003E  m_EulerEditorCurves: []\u003Cbr\u003E  m_HasGenericRootTransform: 0\u003Cbr\u003E  m_HasMotionFloatCurves: 0\u003Cbr\u003E  m_GenerateMotionCurves: 0\u003Cbr\u003E  m_Events: []\u003Cbr\u003E\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-07-29T01:32:43Z","Content":"\n\u003Cp\u003EI think you got it mixed up. KSP Particles are exported as separate MU files, it\u0027s essentially an empty game object with a particle emitter. They are spawned and attached at run time in KSP and values manipulated through part modules in the part config file, usually engines, or RCS with RCSFX plugin.\u003C/p\u003E\u003Cp\u003Eyou never animate any values of an emitter in a animation clip. Doing so will most likely cause an error when you attempt to export the part.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T07:45:37Z","Content":"\n\u003Cp\u003EWell, that\u0027s not what I read. Ok, so I can get the emitter working in unity no problem. How do I turn it on and off? The plan is, to use it instead of the animations used in heat dissipators. Does naming it in the config instead of an animation turn it on and off?\u003C/p\u003E\u003Cp\u003E\u003Ca href=\u0022http://ducttapeeinstein.com/ksp-particle-emitter-added-part-working-game/\u0022 rel=\u0022external nofollow\u0022\u003EHere\u0027s what I read.\u003C/a\u003E Granted, it\u0027s pretty sparse but it seems to say you can change the emitter properties with an animation. Unity had no problem with it and toggling the emitter in the animation did work. KSP didn\u0027t like it when it tried to import it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-29T08:32:29Z\u0022 title=\u002207/29/2015 08:32  AM\u0022 data-short=\u00228 yr\u0022\u003EJuly 29, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-07-29T14:12:42Z","Content":"\n\u003Cp\u003EVery Interesting. I didn\u0027t know that, never tried it that way either. I\u0027ll take a look when I get back home from wokr.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-29T14:23:57Z\u0022 title=\u002207/29/2015 02:23  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 29, 2015\u003C/time\u003E by nli2work\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T14:26:27Z","Content":"\n\u003Cp\u003EI\u0027m guessing it\u0027s the classID that\u0027s changed. That\u0027s one of the things that changed on emissives and was throwing the same error in the logs. Which is why I\u0027d kinda like to see an .anim from 4.2.2 that toggles the emissive and see what classID it is.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-29T15:01:45Z\u0022 title=\u002207/29/2015 03:01  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 29, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Enceos","CreatedById":110725,"CreatedDateTime":"2015-07-29T18:07:24Z","Content":"\n\u003Cp\u003EI loved working with curves in Unity 5, cause version 4 lacks even basic features like copying and pasting curve nodes.\u003C/p\u003E\u003Cp\u003EBut the problem is Unity 5 uses different emissive curve IDs, KSP PartTools doesn\u0027t recognize them.\u003C/p\u003E\u003Cp\u003EHere\u0027s my emissive animation \u003Ca href=\u0022https://www.dropbox.com/s/pty1xs82cbl7z1l/gears.anim?dl=0\u0022 rel=\u0022external nofollow\u0022\u003Egears.anim\u003C/a\u003E it has moving parts and emissive, you\u0027ll distinguish them. Don\u0027t know how you extracted the code from the .anim file.\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-07-29T23:00:36Z","Content":"\n\u003Cp\u003EThanks Enceos but I won\u0027t be able to read it. In order to make animations a YAML (text) file you\u0027ll need to change a setting in unity. In \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/126518-Resolved-Cockpit-lights?p=2043262\u0026amp;viewfull=1#post2043262\u0022 rel=\u0022external nofollow\u0022\u003Ethis link \u003C/a\u003Eis the how to change unity to tell it to export the animations as text. It\u0027s also the method I use to make Unity 5 emissives work in KSP. Also Xyphos has created a script to convert Unity 5 emissives to KSP \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/threads/130085-Unity-Script-Legacy-Animation-Converter\u0022 rel=\u0022external nofollow\u0022\u003Ehere\u003C/a\u003E.\u003C/p\u003E\u003Cp\u003EWhat I really need is a text animation file that changes something, anything in the KSP Particle Emitter. It appears that anything that gets animated with the particle emitter, Unity gives it a classID of 114. I suspect that changed between Unity 4.2.2 and 5 to the point that KSP doesn\u0027t recognize it.\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222015-07-29T23:04:36Z\u0022 title=\u002207/29/2015 11:04  PM\u0022 data-short=\u00228 yr\u0022\u003EJuly 29, 2015\u003C/time\u003E by Fengist\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"nli2work","CreatedById":106805,"CreatedDateTime":"2015-07-30T07:12:17Z","Content":"\n\u003Cp\u003Ehere\u0027s one, I added curves on the Emit and Max Energy attributes, from 4.2.2\u003C/p\u003E\u003Cp\u003E\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E%YAML 1.1\u003Cbr\u003E%TAG !u! tag:unity3d.com,2011:\u003Cbr\u003E--- !u!74 \u0026amp;7400000\u003Cbr\u003EAnimationClip:\u003Cbr\u003E  m_ObjectHideFlags: 0\u003Cbr\u003E  m_PrefabParentObject: {fileID: 0}\u003Cbr\u003E  m_PrefabInternal: {fileID: 0}\u003Cbr\u003E  m_Name: particleCurve\u003Cbr\u003E  serializedVersion: 3\u003Cbr\u003E  m_AnimationType: 1\u003Cbr\u003E  m_Compressed: 0\u003Cbr\u003E  m_RotationCurves: []\u003Cbr\u003E  m_CompressedRotationCurves: []\u003Cbr\u003E  m_PositionCurves: []\u003Cbr\u003E  m_ScaleCurves: []\u003Cbr\u003E  m_FloatCurves:\u003Cbr\u003E  - curve:\u003Cbr\u003E      serializedVersion: 2\u003Cbr\u003E      m_Curve:\u003Cbr\u003E      - time: 0\u003Cbr\u003E        value: 0\u003Cbr\u003E        inSlope: 6\u003Cbr\u003E        outSlope: 6\u003Cbr\u003E        tangentMode: 10\u003Cbr\u003E      - time: .166666672\u003Cbr\u003E        value: 1\u003Cbr\u003E        inSlope: 6\u003Cbr\u003E        outSlope: 6\u003Cbr\u003E        tangentMode: 10\u003Cbr\u003E      m_PreInfinity: 2\u003Cbr\u003E      m_PostInfinity: 2\u003Cbr\u003E    attribute: emit\u003Cbr\u003E    path: \u003Cbr\u003E    classID: 114\u003Cbr\u003E    script: {fileID: -1272454729, guid: a1b1dd47b2bfcd04ba9203ca055053c4, type: 3}\u003Cbr\u003E  - curve:\u003Cbr\u003E      serializedVersion: 2\u003Cbr\u003E      m_Curve:\u003Cbr\u003E      - time: 0\u003Cbr\u003E        value: 3\u003Cbr\u003E        inSlope: 21\u003Cbr\u003E        outSlope: 21\u003Cbr\u003E        tangentMode: 10\u003Cbr\u003E      - time: .333333343\u003Cbr\u003E        value: 10\u003Cbr\u003E        inSlope: 21\u003Cbr\u003E        outSlope: 21\u003Cbr\u003E        tangentMode: 10\u003Cbr\u003E      m_PreInfinity: 2\u003Cbr\u003E      m_PostInfinity: 2\u003Cbr\u003E    attribute: maxEnergy\u003Cbr\u003E    path: \u003Cbr\u003E    classID: 114\u003Cbr\u003E    script: {fileID: -1272454729, guid: a1b1dd47b2bfcd04ba9203ca055053c4, type: 3}\u003Cbr\u003E  m_SampleRate: 60\u003Cbr\u003E  m_WrapMode: 0\u003Cbr\u003E  m_Bounds:\u003Cbr\u003E    m_Center: {x: 0, y: 0, z: 0}\u003Cbr\u003E    m_Extent: {x: 0, y: 0, z: 0}\u003Cbr\u003E  m_MuscleClipInfo:\u003Cbr\u003E    m_StartTime: 0\u003Cbr\u003E    m_StopTime: 1\u003Cbr\u003E    m_OrientationOffsetY: 0\u003Cbr\u003E    m_Level: 0\u003Cbr\u003E    m_CycleOffset: 0\u003Cbr\u003E    m_LoopBlend: 0\u003Cbr\u003E    m_LoopBlendOrientation: 0\u003Cbr\u003E    m_LoopBlendPositionY: 0\u003Cbr\u003E    m_LoopBlendPositionXZ: 0\u003Cbr\u003E    m_KeepOriginalOrientation: 0\u003Cbr\u003E    m_KeepOriginalPositionY: 1\u003Cbr\u003E    m_KeepOriginalPositionXZ: 0\u003Cbr\u003E    m_HeightFromFeet: 0\u003Cbr\u003E    m_Mirror: 0\u003Cbr\u003E  m_EditorCurves:\u003Cbr\u003E  - curve:\u003Cbr\u003E      serializedVersion: 2\u003Cbr\u003E      m_Curve:\u003Cbr\u003E      - time: 0\u003Cbr\u003E        value: 0\u003Cbr\u003E        inSlope: 6\u003Cbr\u003E        outSlope: 6\u003Cbr\u003E        tangentMode: 10\u003Cbr\u003E      - time: .166666672\u003Cbr\u003E        value: 1\u003Cbr\u003E        inSlope: 6\u003Cbr\u003E        outSlope: 6\u003Cbr\u003E        tangentMode: 10\u003Cbr\u003E      m_PreInfinity: 2\u003Cbr\u003E      m_PostInfinity: 2\u003Cbr\u003E    attribute: emit\u003Cbr\u003E    path: \u003Cbr\u003E    classID: 114\u003Cbr\u003E    script: {fileID: -1272454729, guid: a1b1dd47b2bfcd04ba9203ca055053c4, type: 3}\u003Cbr\u003E  - curve:\u003Cbr\u003E      serializedVersion: 2\u003Cbr\u003E      m_Curve:\u003Cbr\u003E      - time: 0\u003Cbr\u003E        value: 3\u003Cbr\u003E        inSlope: 21\u003Cbr\u003E        outSlope: 21\u003Cbr\u003E        tangentMode: 10\u003Cbr\u003E      - time: .333333343\u003Cbr\u003E        value: 10\u003Cbr\u003E        inSlope: 21\u003Cbr\u003E        outSlope: 21\u003Cbr\u003E        tangentMode: 10\u003Cbr\u003E      m_PreInfinity: 2\u003Cbr\u003E      m_PostInfinity: 2\u003Cbr\u003E    attribute: maxEnergy\u003Cbr\u003E    path: \u003Cbr\u003E    classID: 114\u003Cbr\u003E    script: {fileID: -1272454729, guid: a1b1dd47b2bfcd04ba9203ca055053c4, type: 3}\u003Cbr\u003E  m_EulerEditorCurves: []\u003Cbr\u003E  m_Events: []\u003Cbr\u003E\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Fengist","CreatedById":78435,"CreatedDateTime":"2015-08-08T07:00:46Z","Content":"\n\u003Cp\u003EThanks Nil, after spending hours dissecting the anim\u0027s, I still have no clue. Can\u0027t get either to work. I\u0027ve just moved on.\u003C/p\u003E\n"}]}