{"TopicId":189530,"ForumId":24,"TopicTitle":"Math, KSP Calculators Questions","CreatedByName":"ScrapIron","CreatedById":200912,"CreatedDateTime":"2019-11-03T02:58:50Z","PageNum":1,"Articles":[{"CreatedByName":"ScrapIron","CreatedById":200912,"CreatedDateTime":"2019-11-03T02:58:50Z","Content":"\n\u003Cp\u003E\nI\u0027m very new to the community, but very thankful already to all of the great posts, mods, and calculators. I particularly like the calculators that folks have developed, and I\u0027m wondering if anyone has more detailed knowledge about the actual mathematics. It seems the calculators are using approximations, which is understandable since the math gets tough quickly without them. Specifically, I\u0027ve been looking at planetary phase angles. Olex\u0027s (\u003Ca href=\u0022https://ksp.olex.biz/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ksp.olex.biz/\u003C/a\u003E) calculator and KSP wiki (\u003Ca href=\u0022https://wiki.kerbalspaceprogram.com/wiki/Time\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://wiki.kerbalspaceprogram.com/wiki/Time\u003C/a\u003E) both report that the optimal phase angle for transfer is 44.36 degrees. I can derive this value, but I don\u0027t think it\u0027s technically correct, and that it could vary, say, between 38-53 degrees. Can anyone discuss this?\n\u003C/p\u003E\n\u003Cp\u003E\n-Also, I apologize if I\u0027m posting in the wrong place.\n\u003C/p\u003E\n"},{"CreatedByName":"VoidSquid","CreatedById":196199,"CreatedDateTime":"2019-11-03T03:35:09Z","Content":"\n\u003Cp\u003E\nHi and welcome, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/200912-scrapiron/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022200912\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/200912-scrapiron/\u0022 rel=\u0022\u0022\u003E@ScrapIron\u003C/a\u003E,\n\u003C/p\u003E\n\u003Cp\u003E\nWow, I\u0027m impressed, you certainly are a very smart person (much smarter than me anyway)\u00A0\u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u00A0\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003EGuys coming to my mind immediately here are definitely \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0026amp;do=hovercard\u0022 data-mentionid=\u002257146\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/57146-sarbian/\u0022 rel=\u0022\u0022\u003E@sarbian\u003C/a\u003E\u00A0, \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/92465-jim-digriz/\u0026amp;do=hovercard\u0022 data-mentionid=\u002292465\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/92465-jim-digriz/\u0022 rel=\u0022\u0022\u003E@Jim DiGriz\u003C/a\u003E\u00A0and the other folks developing \u003Cabbr title=\u0022Mechjeb (mod)\u0022\u003EMJ\u003C/abbr\u003E, see this thread\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Ciframe allowfullscreen=\u0022\u0022 data-controller=\u0022core.front.core.autosizeiframe\u0022 data-embedauthorid=\u002257146\u0022 data-embedcontent=\u0022\u0022 data-embedid=\u0022embed77188012\u0022 scrolling=\u0022no\u0022 src=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/154834-18x-anatid-robotics-mumech-mechjeb-autopilot-290-19-october-2019/\u0026amp;do=embed\u0022 style=\u0022height:211px;max-width:502px;\u0022\u003E\u003C/iframe\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n"},{"CreatedByName":"Jim DiGriz","CreatedById":92465,"CreatedDateTime":"2019-11-24T22:32:59Z","Content":"\n\u003Cp\u003E\nLambert solvers.\n\u003C/p\u003E\n\u003Cp\u003E\nIn the simplest case, neglecting the planetary orbits and only looking at the heliocentric problem you have three orbits and two unknowns.\u00A0 One is the coast to your departure time, which is determined by the departure planet\u0027s orbit.\u00A0 The last is the coast to the arrival time, which is determined by the arrival planets orbit.\u00A0 To figure out the transfer orbit from the departure position and time to the arrival position and time you use a Lambert problem solver.\n\u003C/p\u003E\n\u003Cp\u003E\nMechJeb actually has two.\u00A0 I think this one is Battin\u0027s method:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/MuMech/MechJeb2/blob/dev/MechJeb2/LambertSolver.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/MuMech/MechJeb2/blob/dev/MechJeb2/LambertSolver.cs\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis one is Gooding\u0027s Method:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/MuMech/MechJeb2/blob/dev/MechJeb2/GoodingSolver.cs\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/MuMech/MechJeb2/blob/dev/MechJeb2/GoodingSolver.cs\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nI think the Gooding one is robust enough now that the former could be deleted, although I haven\u0027t fully tested the multi-revolution behavior of the Gooding Solver yet.\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway.\n\u003C/p\u003E\n\u003Cp\u003E\nNow given the departure and arrival times you can solve the problem for how much delta V it costs for the departure burn and for the arrival burn (unless you\u0027re not going to match orbits and are going to do an impactor or a flyby).\n\u003C/p\u003E\n\u003Cp\u003E\nThe problem then becomes searching for departure and arrival times which minimize the cost of the transfer orbit.\u00A0 You can brute force search that and that is what produces a porkchop plot.\u00A0 Or you can turn it into a minimization problem and use off-the-shelf algorithms to find the minimum value.\u00A0 Newton\u0027s method is the Calculus 101 tool that can be used to solve that problem, but since derivative information is difficult to obtain for the problem, its better to use some kind of quasi-Newtonian solver like Levenburg-Marquardt.\u00A0 For finding global solutions to the optimization problem that is harder and is the domain of simulated annealing or basin hopping algorithms.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-11-24T22:33:38Z\u0022 title=\u002211/24/2019 10:33  PM\u0022 data-short=\u00224 yr\u0022\u003ENovember 24, 2019\u003C/time\u003E by Jim DiGriz\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"ScrapIron","CreatedById":200912,"CreatedDateTime":"2019-12-16T14:26:07Z","Content":"\n\u003Cp\u003E\nOk, thanks for confirming my suspicions. I\u0027ve developed an algorithm for non circular transfers. The basic mechanics is relatively simple, alg-trig formulas, but there\u0027s no way to solve the system of 5-6 equations I get. The transcendental trig functions make it so. Time gets a little complicated, too. The orbiting craft has to travel partly around its orbit, and then around the rendezvous ellipse. This time has to match the time of the target in orbit. The series expansions relating time and true anamoly, or numerical integration (which is just a simple series with lots of terms) work.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nMy process has been this: given the positions of orbiter and target, determine where the orbiter burns and with what delta-v. I choose a position ahead of the orbiter in increments, then choose increments in delta-v for each position to determine an ellipse that just touches/intersects the target ellipse. Then, check the time of flight of both objects. If times match (are close), then done.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried working tangents (derivatives of polar positions) into the problem, but that fails because equal tangents don\u0027t insure intersection.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, I\u0027ve got an iterative procedure that working. I was just wondering if anyone else here has attempted this, and it seems so. There\u0027s supposedly a third degree differential equation that\u0027s really efficient at getting the solution. I\u0027ve read a little about the Lambert problem, but I was trying to solve the problem myself, from scratch; just basic principles.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnother note, too. Excel sucks for this type of heavy-duty number crunching. I had to put in error catches because dumb excel truncates floating point numbers due to its rudimentary bit scheme. Have to do this in a real math language.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve enjoyed solving this problem by myself, with only basic principles (mechanics, etc.). Now that I\u0027ve done it, I\u0027m curious to see what other folks have done. I\u0027m relieved too, to know the solution is not closed form (trivial). The drawback of working alone is the almost insane, or obsessed state it can put a person in. I imagine this is how some of the pioneers felt at times, Kepler for sure. Thank you for responding, and thank you for the links. Very appreciated!\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2019-12-17T20:31:24Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223717872\u0022 data-ipsquote-contentid=\u0022189530\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576506367\u0022 data-ipsquote-userid=\u0022200912\u0022 data-ipsquote-username=\u0022ScrapIron\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 12/16/2019 at 8:26 AM, ScrapIron said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nMy process has been this: given the positions of orbiter and target, determine where the orbiter burns and with what delta-v. I choose a position ahead of the orbiter in increments, then choose increments in delta-v for each position to determine an ellipse that just touches/intersects the target ellipse. Then, check the time of flight of both objects. If times match (are close), then done.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nI\u0027ve tried working tangents (derivatives of polar positions) into the problem, but that fails because equal tangents don\u0027t insure intersection.\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, I\u0027ve got an iterative procedure that working. I was just wondering if anyone else here has attempted this, and it seems so. There\u0027s supposedly a third degree differential equation that\u0027s really efficient at getting the solution. I\u0027ve read a little about the Lambert problem, but I was trying to solve the problem myself, from scratch; just basic principles.\u00A0\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHi \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/200912-scrapiron/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022200912\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/200912-scrapiron/\u0022 rel=\u0022\u0022\u003E@ScrapIron\u003C/a\u003E, welcome to the forum and thanks for posting this topic.\u00A0It\u0027s giving me flashbacks to developing Astrogator!\n\u003C/p\u003E\n\u003Cp\u003E\nMy strategy was similar, but I think I used less sophisticated math than you did.\u00A0I use the bisection method to minimize the difference in \u0022phase angles\u0022 (probably not a proper use of the term but hopefully you can intuit the meaning)\u00A0at time of arrival, since those values dropped out most naturally from the calculations I was able to figure out:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/HebaruSan/Astrogator/blob/60cd8c74b72bc0436e4f7a5a0cb7e7ec67887c20/src/PhysicsTools.cs#L305-L324\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/HebaruSan/Astrogator/blob/60cd8c74b72bc0436e4f7a5a0cb7e7ec67887c20/src/PhysicsTools.cs#L305-L324\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, I\u0027m very interested in your work, I suppose for the selfish reason of wanting to learn and improve my mod. If you have any suggestions for code improvements, I\u0027m all ears!\n\u003C/p\u003E\n"},{"CreatedByName":"pmborg","CreatedById":198861,"CreatedDateTime":"2019-12-17T20:53:06Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223699244\u0022 data-ipsquote-contentid=\u0022189530\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221572749930\u0022 data-ipsquote-userid=\u0022200912\u0022 data-ipsquote-username=\u0022ScrapIron\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/3/2019 at 2:58 AM, ScrapIron said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nI\u0027m very new to the community, but very thankful already to all of the great posts, mods, and calculators. I particularly like the calculators that folks have developed, and I\u0027m wondering if anyone has more detailed knowledge about the actual mathematics. It seems the calculators are using approximations, which is understandable since the math gets tough quickly without them. Specifically, I\u0027ve been looking at planetary phase angles. Olex\u0027s (\u003Ca href=\u0022https://ksp.olex.biz/\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://ksp.olex.biz/\u003C/a\u003E) calculator and KSP wiki (\u003Ca href=\u0022https://wiki.kerbalspaceprogram.com/wiki/Time\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://wiki.kerbalspaceprogram.com/wiki/Time\u003C/a\u003E) both report that the optimal phase angle for transfer is 44.36 degrees. I can derive this value, but I don\u0027t think it\u0027s technically correct, and that it could vary, say, between 38-53 degrees. Can anyone discuss this?\n\u003C/p\u003E\n\u003Cp\u003E\n-Also, I apologize if I\u0027m posting in the wrong place.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHello,\n\u003C/p\u003E\n\u003Cp\u003E\nIn my opinion the best way to learn the Math for this orbital mechanics is write our own programs to be used in KOS.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ETrying to do a mission 100% full auto-pilot:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n- go on kerbin orbit\n\u003C/li\u003E\n\u003Cli\u003E\n- do a circular orbit\n\u003C/li\u003E\n\u003Cli\u003E\n- go to mun\n\u003C/li\u003E\n\u003Cli\u003E\n-land on mun\n\u003C/li\u003E\n\u003Cli\u003E\n-return to orbit\n\u003C/li\u003E\n\u003Cli\u003E\n-land on kerbin\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nthen to do inner planet and into an outer planet and so on...\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan\u003E\u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-17T20:53:48Z\u0022 title=\u002212/17/2019 08:53  PM\u0022 data-short=\u00224 yr\u0022\u003EDecember 17, 2019\u003C/time\u003E by pmborg\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Maxsimal","CreatedById":160254,"CreatedDateTime":"2019-12-20T19:12:04Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-gramm=\u0022false\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223699244\u0022 data-ipsquote-contentid=\u0022189530\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221572749930\u0022 data-ipsquote-userid=\u0022200912\u0022 data-ipsquote-username=\u0022ScrapIron\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/3/2019 at 2:58 AM, ScrapIron said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents ipsClearfix\u0022 data-gramm=\u0022false\u0022\u003E\n\u003Cp\u003E\nI\u0027m very new to the community, but very thankful already to all of the great posts, mods, and calculators. I particularly like the calculators that folks have developed, and I\u0027m wondering if anyone has more detailed knowledge about the actual mathematics. It seems the calculators are using approximations, which is understandable since the math gets tough quickly without them. Specifically, I\u0027ve been looking at planetary phase angles. Olex\u0027s (\u003Ca href=\u0022https://ksp.olex.biz/\u0022 rel=\u0022external nofollow\u0022 target=\u0022_blank\u0022\u003Ehttps://ksp.olex.biz/\u003C/a\u003E) calculator and KSP wiki (\u003Ca href=\u0022https://wiki.kerbalspaceprogram.com/wiki/Time\u0022 rel=\u0022external nofollow\u0022 target=\u0022_blank\u0022\u003Ehttps://wiki.kerbalspaceprogram.com/wiki/Time\u003C/a\u003E) both report that the optimal phase angle for transfer is 44.36 degrees. I can derive this value, but I don\u0027t think it\u0027s technically correct, and that it could vary, say, between 38-53 degrees. Can anyone discuss this?\n\u003C/p\u003E\n\u003Cp\u003E\n-Also, I apologize if I\u0027m posting in the wrong place.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nPhase angle between two perfectly circular 0 inclination orbits w/Keplerian orbital motion shouldn\u0027t be a range, there\u0027s\u00A0an exact value that you can get to analytically for a simple Hohmann transfer.\u00A0Kerbin\u0027s is perfectly circular,\u00A0and Duna\u0027s is nearly so.\u00A0 I believe that calculator\u00A0is narrowing the problem down by assuming Duna\u0027s is as well.\u00A0 \u00A0\u003Cbr\u003E\u003Cbr\u003E\nHowever, even if you did use Duna\u0027s real orbit rather than assuming it\u0027s circular, I don\u0027t think the range would be that wide - transfers to other bodies with more eccentric/inclined orbits though, you\u0027re right, it would be a wider range, and dependent on which orbit you\u0027re looking at.\u00A0 If you notice, neither of those places mentions which Kerbal date you should depart from/asks you for which Kerbal date to search from.\n\u003C/p\u003E\n"},{"CreatedByName":"Jim DiGriz","CreatedById":92465,"CreatedDateTime":"2019-12-21T18:09:21Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223718416\u0022 data-ipsquote-contentid=\u0022189530\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576614684\u0022 data-ipsquote-userid=\u0022156657\u0022 data-ipsquote-username=\u0022HebaruSan\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 12/17/2019 at 12:31 PM, HebaruSan said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nHi \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/200912-scrapiron/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022200912\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/200912-scrapiron/\u0022 rel=\u0022\u0022\u003E@ScrapIron\u003C/a\u003E, welcome to the forum and thanks for posting this topic.\u00A0It\u0027s giving me flashbacks to developing Astrogator!\n\u003C/p\u003E\n\u003Cp\u003E\nMy strategy was similar, but I think I used less sophisticated math than you did.\u00A0I use the bisection method to minimize the difference in \u0022phase angles\u0022 (probably not a proper use of the term but hopefully you can intuit the meaning)\u00A0at time of arrival, since those values dropped out most naturally from the calculations I was able to figure out:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://github.com/HebaruSan/Astrogator/blob/60cd8c74b72bc0436e4f7a5a0cb7e7ec67887c20/src/PhysicsTools.cs#L305-L324\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://github.com/HebaruSan/Astrogator/blob/B60cd8c74b72bc0436e4f7a5a0cb7e7ec67887c20/src/PhysicsTools.cs#L305-L324\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nAnyway, I\u0027m very interested in your work, I suppose for the selfish reason of wanting to learn and improve my mod. If you have any suggestions for code improvements, I\u0027m all ears!\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nFor root finding on a line you should look at\u00A0 Brent\u0027s method:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://en.wikipedia.org/wiki/Brent%27s_method\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Brent\u0027s_method\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nOr the brent.m file here:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.mathworks.com/matlabcentral/fileexchange/73600-trans-lunar-trajectory-optimization-otb-version\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.mathworks.com/matlabcentral/fileexchange/73600-trans-lunar-trajectory-optimization-otb-version\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nFor N-dimensional root finding Levenburg-Marquardt is the next step up, C# code can be found here:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.alglib.net/optimization/levenbergmarquardt.php\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.alglib.net/optimization/levenbergmarquardt.php\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nOr Matlab\u0027s fsolve:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.mathworks.com/help/optim/ug/fsolve.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.mathworks.com/help/optim/ug/fsolve.html\u003C/a\u003E\n\u003C/p\u003E\n"},{"CreatedByName":"HebaruSan","CreatedById":156657,"CreatedDateTime":"2019-12-21T18:17:02Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223719720\u0022 data-ipsquote-contentid=\u0022189530\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221576951761\u0022 data-ipsquote-userid=\u002292465\u0022 data-ipsquote-username=\u0022Jim DiGriz\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n4 minutes ago, Jim DiGriz said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nFor root finding on a line you should look at\u00A0 Brent\u0027s method:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://en.wikipedia.org/wiki/Brent%27s_method\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://en.wikipedia.org/wiki/Brent\u0027s_method\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nOr the brent.m file here:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.mathworks.com/matlabcentral/fileexchange/73600-trans-lunar-trajectory-optimization-otb-version\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.mathworks.com/matlabcentral/fileexchange/73600-trans-lunar-trajectory-optimization-otb-version\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nFor N-dimensional root finding Levenburg-Marquardt is the next step up, C# code can be found here:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.alglib.net/optimization/levenbergmarquardt.php\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.alglib.net/optimization/levenbergmarquardt.php\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nOr Matlab\u0027s fsolve:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://www.mathworks.com/help/optim/ug/fsolve.html\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://www.mathworks.com/help/optim/ug/fsolve.html\u003C/a\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nHmm, what improvements would these give? I don\u0027t think the bisection method is causing me any problems currently; it finds the\u00A0roots, and it\u0027s fast enough. I was thinking more along the lines of improvements in the equations being solved, ideally for greater accuracy.\n\u003C/p\u003E\n"},{"CreatedByName":"Jim DiGriz","CreatedById":92465,"CreatedDateTime":"2019-12-21T18:38:28Z","Content":"\n\u003Cp\u003E\nGenerally its better to approach the problem as an optimization problem rather than a system of equations to be solved.\u00A0 So use an off the shelf solution to the Lambert problem, wrap that with your source and destination orbit propagators (e.g. Orbit.\u003Ca href=\u0022https://kerbalspaceprogram.com/api/class_orbit.html#a490b94dd45609fae8c646ec8b36f5239\u0022 rel=\u0022\u0022\u003EGetOrbitalStateVectorsAtUT\u003C/a\u003E ) and pose the problem as a minimization problem of finding the starting time and ending time (or duration) of the transfer that minimizes the deltaV.\u00A0 To do that you have a 2 dimensional root finding problem with two variables (start and end time).\u00A0 Feed that into Levenburg-Marquardt and you should get an accurate result.\u00A0 Of course the problem is a global optimization problem with many local minima (all the upcoming transfer windows) so you need to feed it an initial guess.\u00A0 That\u0027s enough to do a simple helocentric solver.\n\u003C/p\u003E\n\u003Cp\u003E\nYou can also do a solver that uses KSP\u0027s Orbit class to propagate orbits using the actual in-game patched conics API.\u00A0 In which case you can adopt a \u0022shooting method\u0022 where the time and 3-vector of the burn can be optimized, and then you propagate to find the point of closest approach to the target orbit.\u00A0 Then wrap that with Levenburg-Marquardt, although its a bit tricky since you want to minimize the delta-V of the burn while keeping the final orbit nearly intersecting the target.\n\u003C/p\u003E\n\u003Cp\u003E\nA lot more clever things can then be done by replacing Levenburg-Marquardt with an NLP solver like ipopt or Matlab\u0027s fmincon, to do constrained nonlinear optimization, but that is also much more complicated.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222019-12-21T18:39:42Z\u0022 title=\u002212/21/2019 06:39  PM\u0022 data-short=\u00224 yr\u0022\u003EDecember 21, 2019\u003C/time\u003E by Jim DiGriz\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"Retro Starship","CreatedById":200667,"CreatedDateTime":"2020-01-07T16:27:41Z","Content":"\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022background-color:#ffffff;\u0022\u003EWelcome to the KSP forum \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/200912-scrapiron/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022200912\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/200912-scrapiron/\u0022 rel=\u0022\u0022\u003E@ScrapIron\u003C/a\u003ESorry for the late welcome.\u00A0Always\u00A0try to check out new members but get\u00A0cough\u00A0up on so many\u00A0other\u00A0topics. New here\u00A0myself\u00A0by a few months. Love KSP, so much fun.\u003C/span\u003E\n\u003C/p\u003E\n"}]}