{"TopicId":109300,"ForumId":29,"TopicTitle":"Best way to request electric charge from the vessel?","CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-05-15T02:06:37Z","PageNum":1,"Articles":[{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-05-15T02:06:37Z","Content":"Hi all, \n\nI am stumped on this one. What I\u0027ve tried thus far isn\u0027t working for me and I\u0027m sure there\u0027s something simple I\u0027m missing. Is there a way for a part module to request electric charge from the vessel, and not just the part\u0027s resource? Thanks for the help! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"m4v","CreatedById":67965,"CreatedDateTime":"2015-05-15T02:17:51Z","Content":"part.RequestResource gets the resource from the vessel according the resource\u0027s rules. For EC is from any part."},{"CreatedByName":"Angelo Kerman","CreatedById":106975,"CreatedDateTime":"2015-05-15T06:08:49Z","Content":"Ah ok, I\u0027ll give that a try. Thanks! ![:)](//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif)"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-05-15T10:38:24Z","Content":"HI newbie here.\n\nDo you have to iterate part.RequestResource for all parts? Am I even asking the right question?"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-05-15T10:51:46Z","Content":"\u003E \n\u003E HI newbie here.\n\u003E Do you have to iterate part.RequestResource for all parts? Am I even asking the right question?\n\nNo, you just call it on the part that you are drawing the resource from which is usually the part your module is a part of, e.g. ModuleEngines calls it on the engine part itself. It then uses either the defined flow rule for the resource or the specific flow rule you specify in the call to take the resource from whatever part(s) on the vessel it should.\n\nAlso note that there is at least one bug in RequestResource when using the ALL\\_VESSEL or STAGE\\_PRIORITY rules. See [this thread](https://forum.kerbalspaceprogram.com/threads/97565-Electric-charge-doesn-t-add-up) for details but basically you will sometimes not get the amount you request even though it is available in the vessel. You must always check the value returned from the function which tells you how much you were actually given...\n\n**Edited \u003Ctime datetime=\u00222015-05-15T18:03:41Z\u0022 title=\u002205/15/2015 06:03  PM\u0022 data-short=\u00229 yr\u0022\u003EMay 15, 2015\u003C/time\u003E by Padishar**"},{"CreatedByName":"CaptainKipard","CreatedById":70516,"CreatedDateTime":"2015-05-15T11:43:15Z","Content":"Maybe I\u0027m misunderstanding but I thought OP wanted to get electric charge value for the whole vessel.\n\nAlso see which thread?\n\n**Edited \u003Ctime datetime=\u00222015-05-15T11:46:51Z\u0022 title=\u002205/15/2015 11:46  AM\u0022 data-short=\u00229 yr\u0022\u003EMay 15, 2015\u003C/time\u003E by Cpt. Kipard**"},{"CreatedByName":"Padishar","CreatedById":97386,"CreatedDateTime":"2015-05-15T18:16:10Z","Content":"\u003E \n\u003E Maybe I\u0027m misunderstanding but I thought OP wanted to get electric charge value for the whole vessel.\n\u003E Also see which thread?\n\nAhhh, I see what you mean. Yes, RequestResource is used to actually remove (or add) resources to a vessel via the particular part following the resource flow rules. If you just want to know how much electric charge is on the whole vessel then you will have to add it up. This either means looping through the whole part list and adding it all up, taking care to check the disabled flags etc., or calling Part.GetConnectedResources to get a list of the resources actually available to a particular part and iterating through that list instead (much easier but may cause lots of garbage collection if called often for large vessels).\n\nSeems I forgot to add the link, sorry and fixed."}]}