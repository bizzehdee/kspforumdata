{"TopicId":80821,"ForumId":29,"TopicTitle":"Are part modules started before the scenario modules?","CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-08-05T17:20:51Z","PageNum":1,"Articles":[{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-08-05T17:20:51Z","Content":"\n\u003Cp\u003EHi everyone,\u003C/p\u003E\u003Cp\u003EI\u0027m having a problem with scenario modules. I have one that contains some settings and other amenities, so that my PartModules can access them.\u003C/p\u003E\u003Cp\u003EHowever, I need to load these values during OnStart(), and it appears that when I try to do that the ScenarioModule hasn\u0027t been instantiated yet.\u003C/p\u003E\u003Cp\u003EAnd yes, I did remember to add the scenario to the game before I tried to use it. Does anybody know more about this?\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-08-06T11:09:07Z","Content":"\n\u003Cp\u003EI don\u0027t know about PartModules but it\u0027s definitely possible to have KSPAddons initialized before ScenarioModules. If my addon needs to work with one, I use a coroutine to wait until the ScenarioModule is ready\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-08-06T12:18:56Z","Content":"\n\u003Cp\u003EWould you mind if I asked you for an example?\u003C/p\u003E\n"},{"CreatedByName":"Diazo","CreatedById":81549,"CreatedDateTime":"2014-08-06T13:41:37Z","Content":"\n\u003Cp\u003EThe other thing to look at is the Awake() method. \u003C/p\u003E\u003Cp\u003EFrom the unity documentation, Awake() runs when the assembly is loaded, Start() runs when the scene is ready to run.\u003C/p\u003E\u003Cp\u003EAs I understand it, Start() is effectively the first Update() frame where-as Awake() runs as soon as that class is initialized. \u003C/p\u003E\u003Cp\u003ENote however that KSP does stuff behind the scenes in Awake and I\u0027m not sure it is available all the time. (So as always, testing required.)\u003C/p\u003E\u003Cp\u003ED.\u003C/p\u003E\n"},{"CreatedByName":"xEvilReeperx","CreatedById":75857,"CreatedDateTime":"2014-08-06T21:30:39Z","Content":"\n\u003Cblockquote data-ipsquote=\u0022\u0022 class=\u0022ipsQuote\u0022 data-ipsquote-username=\u0022Ippo\u0022 data-cite=\u0022Ippo\u0022\u003E\u003Cdiv\u003EWould you mind if I asked you for an example?\u003C/div\u003E\u003C/blockquote\u003E\u003Cp\u003EWell, the most common example would probably be doing something with the R\u0026amp;D instance. I found that trying to access it directly in my own Start leads to problems (at least in flight it does), so I work along these lines instead:\u003C/p\u003E\u003Cdiv\u003E\u003C/div\u003E\u003Cpre class=\u0022ipsCode\u0022\u003E[KSPAddon(KSPAddon.Startup.Flight, false)]\u003Cbr\u003Epublic class RnDAccessor : MonoBehaviour\u003Cbr\u003E{\u003Cbr\u003E    IEnumerator Start()\u003Cbr\u003E    {\u003Cbr\u003E        while (ResearchAndDevelopment.Instance == null)\u003Cbr\u003E            yield return 0;\u003Cbr\u003E\u003Cbr\u003E        // now R\u0026amp;D is ready\u003Cbr\u003E    }\u003Cbr\u003E}\u003C/pre\u003E\u003Cp\u003E\u003C/p\u003E\n"},{"CreatedByName":"Ippo","CreatedById":107018,"CreatedDateTime":"2014-08-08T19:01:43Z","Content":"\n\u003Cp\u003EHi there, I implemented it and it works like a charm \u003Cimg src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 alt=\u0022:)\u0022\u003E\u003C/p\u003E\u003Cp\u003EI actually didn\u0027t convert Start to a coroutine though... I\u0027ll try later just out of curiosity. Thanks!\u003C/p\u003E\n"}]}