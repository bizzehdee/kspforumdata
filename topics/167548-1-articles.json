{"TopicId":167548,"ForumId":34,"TopicTitle":"[1.3.1] Upgrade Editor - Choose upgrades for each part in VAB or SPH.","CreatedByName":"NotTheRealRMS","CreatedById":172906,"CreatedDateTime":"2017-11-15T03:57:28Z","PageNum":1,"Articles":[{"CreatedByName":"NotTheRealRMS","CreatedById":172906,"CreatedDateTime":"2017-11-15T03:57:28Z","Content":"\n\u003Cp\u003E\nThis was originally meant to become \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/158081-*\u0022 rel=\u0022\u0022\u003EUpgradesGUI\u003C/a\u003E Continued, but for several reasons starting \u0022from scratch\u0022 proved more practical, and this Add-On inherited only a little from the former by \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/163039-gotmachine/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022163039\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/163039-gotmachine/\u0022 rel=\u0022\u0022\u003E@Gotmachine\u003C/a\u003E. For now it remains more limited than UpgradesGUI in certain ways.\n\u003C/p\u003E\n\u003Cp\u003E\nThis plugin works in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E or \u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E and adds a\u00A0button to the right-click menu on any parts with upgrades to expand their applications and allow for implementing upgrades as alternatives which can be chosen at any time, regardless of newer ones being unlocked in the Tech Tree.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EDISCLAIMER\u003C/strong\u003E\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003E:\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nA lot needs to be improved before it gets even close to completed. This plugin was tested on Engines and \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E where, with the aid of the \u003Cabbr title=\u0022Module Manager (mod)\u0022\u003EMM\u003C/abbr\u003E patches, it worked both in\u00A0 Editor and Flight, but there are almost certainly bugs.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:20px;\u0022\u003E\u003Cstrong\u003EDownload\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EUpgrade Editor 0.3.4 \u003C/strong\u003E(includes source code):\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/open?id=1Cm5WA73G3IEONZ-JjEXQC0ULmpUA3Og1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/open?id=1Cm5WA73G3IEONZ-JjEXQC0ULmpUA3Og1\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EOlder versions:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/open?id=1Zlj9p-RIceb1yP-43V-8SjG_30FIP_fk\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/open?id=1Zlj9p-RIceb1yP-43V-8SjG_30FIP_fk\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EDEPENDENCIES:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/50533-*\u0022 rel=\u0022\u0022\u003EModuleManager\u003C/a\u003E (bundled version may become temporarily outdated in the future)\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003ELicense: GNU General Public License(\u003C/strong\u003E\u003Cstrong\u003EGPL) 3.0\u003C/strong\u003E \u003Cstrong\u003Eexcept for:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nRDColoredUpgradeIcon.cs \u003Ca href=\u0022https://github.com/gotmachine/UpgradesUIExtensions/blob/master/UpgradesUIExtensions/RDColoredUpgradeIcon.cs\u0022 rel=\u0022external nofollow\u0022\u003Efrom UpgradesGUI\u003C/a\u003E continues with its \u003Ca href=\u0022https://unlicense.org/\u0022 rel=\u0022external nofollow\u0022\u003EUnlicense\u003C/a\u003E.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cimg alt=\u0022LKn51I3.jpg\u0022 class=\u0022ipsImage\u0022 height=\u0022578\u0022 src=\u0022https://i.imgur.com/LKn51I3.jpg\u0022 width=\u00221024\u0022\u003E\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:20px;\u0022\u003E\u003Cstrong\u003EUpgrade Editor\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nUpgrade Editor was created to make the part/module upgrades feature introduced in 1.2 about as flexible as RealFuels engine and \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E upgrades: configurable per part. \u003Cstrong\u003ENote that the plugin doesn\u0027t add any upgrades\u003C/strong\u003E. If you want to have them in your game you need to download other mods that implement the upgrade feature. It also highlights part upgrades in the\u00A0 the nodes part list with a pale green background to better differentiate them from parts.\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EHow to Use:\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nIf you really want to browse every upgrade, even max diameter changes for procedural parts, delete UpgradesToIgnore.cfg\n\u003C/li\u003E\n\u003Cli\u003E\nWhile designing a vessel in the \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E/\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E, add a part for it which has unlocked upgrades.\n\u003C/li\u003E\n\u003Cli\u003E\nAfter placing the part in the editor, click on \u0022Upgrade Editor\u0022 in the Part\u0027s right-click menu.\n\u003C/li\u003E\n\u003Cli\u003E\n\u0022Toggle All\u0022 will either disable or enable all upgrades at once. \u0022Always Enable\u0022 ignores custom settings.\n\u003C/li\u003E\n\u003Cli\u003E\nWhen you\u0027re finished with a part, just close the Upgrade Editor by clicking on \u0022Close\u0022. Check its \u0022Show Upgraded Stats\u0022.\n\u003C/li\u003E\n\u003Cli\u003E\nAfter that, any part featuring the same upgrades that is added to the craft will inherit such settings as well.\n\u003C/li\u003E\n\u003Cli\u003E\nTo reset settings, use the reset \u0026amp; close button in the menu, which will enable again all upgrades before closing the UI.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003ESuggested mods with upgrades:\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/154041-*\u0022 rel=\u0022\u0022\u003ESufficiently Realistic Progression Zero\u003C/a\u003E - this was created to support it and is bundled together with it(not necessarily the latest version).\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/117090-*\u0022 rel=\u0022\u0022\u003ESSTULabs\u003C/a\u003E - upgrades that come with SSTU aren\u0027t of the type that would be significantly improved by the features of the Upgrade Editor(yet), but I\u0027m recommending it anyway.\n\u003C/li\u003E\n\u003Cli\u003E\n\u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/122020-*\u0022 rel=\u0022\u0022\u003EBluedog Design Bureau\u003C/a\u003E - might not really have two upgrades that can be considered tradeoffs, giving this editor a purpose for its parts, but it does have many upgrades.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nIf you\u0027re interested in implementing part upgrades for yours, another mod\u0027s or Stock engines or \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E as alternatives where the capabilities of this Add-On would be very useful, PM me and I\u0027ll include your mod in the list. \u003Cstrong\u003EIf you want to bundle this plugin with your mod because it would be useful for it, you don\u0027t need to ask for permission. Just keep its license and readme in your bundle, and\u00A0if you want to remove its source code from it, add a link to this thread or to its download link with source included in its readme should it not have either one yet by then.\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EA few examples of potential uses:\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nAn engine or \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E that can be switched between MonoPropellant and \u003Cabbr title=\u0022Liquid Fuel\u0022\u003ELF\u003C/abbr\u003E/Ox. Could be added to any Stock part through ModuleManager.\n\u003C/li\u003E\n\u003Cli\u003E\nSeveral upgrades for engines or \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E placed in the same tech tree\u0027s node with different tradeoffs between thrust, specific impulse and cost.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EKnown Issues and Limitations:\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nThis plugin was not tested for every imaginable situation where it could be of use. Bugs may exist.\n\u003C/li\u003E\n\u003Cli\u003E\nThere is no in-game interface to edit the ignore list of upgrades yet.\n\u003C/li\u003E\n\u003Cli\u003E\nTerrible support for part symmetry. First this won\u0027t apply automatically to all symmetrical counterparts of the selected part yet. Then there are bugs: if you open the Upgrade Editor Menu in a part, change its upgrade settings then alter its symmetry, argument out of range exception spam will happen and the Upgrade Editor button may disappear in all affected parts. Doesn\u0027t happen when picking a new part for symmetry from the left part menu, which inherits upgrade settings from latest edited similar with Upgrade Editor, and can also be avoided by saving and reloading the vessel after using the Upgrade Editor Menu to only then apply symmetry.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003EChangelog:\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EVersion 0.3.4\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nFixed crippling bug with \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E part upgrades by disabling the OnAwake() command for ModuleRCS and RCSFX. Now works correctly instead of having no \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E thrust at all.\n\u003C/li\u003E\n\u003Cli\u003E\nFixed major bug where the first part with modified upgrade settings in a vessel loaded in \u003Cabbr title=\u0022Vehicle Assembly Building\u0022\u003EVAB\u003C/abbr\u003E/\u003Cabbr title=\u0022SpacePlane Hangar\u0022\u003ESPH\u003C/abbr\u003E didn\u0027t have its upgrades properly applied.\n\u003C/li\u003E\n\u003Cli\u003E\nFixed lack of reset to original Part Stats modified by PartStatsUpgradeModule upon disabling relevant upgrades.\n\u003C/li\u003E\n\u003Cli\u003E\nFixed occasional bug where an Engine or \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E with upgrades that did not change propellant type would not have such reverted back during the load of a craft file if upgrades that changed such settings were disabled, depending on the quantity and position of the involved parts in a saved craft.\n\u003C/li\u003E\n\u003Cli\u003E\nToggle All Upgrades now is set to false by default, which makes any part picked from the left menu in the Editor inherit the same settings last applied to a similar part through the Upgrade Editor.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cspan style=\u0022font-size:14px;\u0022\u003E\u003Cstrong\u003EVersion 0.3.3\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nAdded capability of loading original part configs without upgrades and removed no longer necessary ModuleManager workaround patches.\n\u003C/li\u003E\n\u003Cli\u003E\nAdded an Ignore List so upgrades that are utterly pointless to disable like diameter increases for procedural parts won\u0027t show up.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cspan style=\u0022font-size:14px;\u0022\u003E\u003Cstrong\u003EVersion 0.3.2.5\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nAdded full persistence for upgrade settings. Saved crafts now store which upgrades should not be enabled for every part in them.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u003Cspan style=\u0022font-size:14px;\u0022\u003E\u003Cstrong\u003EVersion 0.3.2\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\nFirst test release, inheriting only the R\u0026amp;D tech tree highlight from UpgradesGUI and relying on wholly new code for everything else.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cspan style=\u0022font-size:16px;\u0022\u003E\u003Cstrong\u003ESpecial Thanks:\u003C/strong\u003E\u003C/span\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nTo \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/163039-gotmachine/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022163039\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/163039-gotmachine/\u0022 rel=\u0022\u0022\u003E@Gotmachine\u003C/a\u003E for doing UpgradesGUI, which inspired this project and served as reference for it.\n\u003C/p\u003E\n\u003Cp\u003E\nTo \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022138730\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/\u0022 rel=\u0022\u0022\u003E@Shadowmage\u003C/a\u003E for \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/117090-wip131-sstulabs-low-part-count-solutions-orbiters-landers-lifters-dev-thread-10-09-17/\u0026amp;do=findComment\u0026amp;comment=3216789\u0022 rel=\u0022\u0022\u003Eunintentionally giving me a hint on how to achieve this\u003C/a\u003E when I was about to give up on this and mostly because I really like SSTU.\n\u003C/p\u003E\n\u003Cp\u003E\nTo \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/149324-*\u0022 rel=\u0022\u0022\u003Eeveryone who shared and/or created examples of PopupDialog uses\u003C/a\u003E , references without which I\u0027d never succeed in creating this.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-12-13T20:55:17Z\u0022 title=\u002212/13/2017 08:55  PM\u0022 data-short=\u00226 yr\u0022\u003EDecember 13, 2017\u003C/time\u003E by NotTheRealRMS\u003C/strong\u003E\n\u003Cbr\u003E0.3.4 and added new screenshot\n\u003C/span\u003E\n"},{"CreatedByName":"Shadowmage","CreatedById":138730,"CreatedDateTime":"2017-11-15T16:32:23Z","Content":"\n\u003Cp\u003E\nVery interesting mod -- really a feature that should have been included in the stock upgrade system.\u00A0 A way to pick which upgrades are applied seems like a very basic part of the system.\n\u003C/p\u003E\n\u003Cp\u003E\nIf this plays well with SSTU code, it removes some of the reasons I\u0027ve been hesitating on engine and other part upgrades.\n\u003C/p\u003E\n\u003Cp\u003E\n\u00A0\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223219673\u0022 data-ipsquote-contentid=\u0022167548\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221510718248\u0022 data-ipsquote-userid=\u0022172906\u0022 data-ipsquote-username=\u0022NotTheRealRMS\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\n12 hours ago, NotTheRealRMS said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nTo \u003Ca contenteditable=\u0022false\u0022 data-ipshover=\u0022\u0022 data-ipshover-target=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/\u0026amp;do=hovercard\u0022 data-mentionid=\u0022138730\u0022 href=\u0022https://forum.kerbalspaceprogram.com/index.php?/profile/138730-shadowmage/\u0022 rel=\u0022\u0022\u003E@Shadowmage\u003C/a\u003E for \u003Ca href=\u0022https://forum.kerbalspaceprogram.com/index.php?/topic/117090-wip131-sstulabs-low-part-count-solutions-orbiters-landers-lifters-dev-thread-10-09-17/\u0026amp;do=findComment\u0026amp;comment=3216789\u0022 rel=\u0022\u0022\u003Eunintentionally giving me a hint on how to achieve this\u003C/a\u003E when I was about to give up on this and mostly because I really like SSTU.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nYeah... I sometimes do that kind of thing\u00A0 (usually it is intentional though) \u003Cimg alt=\u0022:)\u0022 data-emoticon=\u0022\u0022 src=\u0022//kerbal-forum-uploads.s3.us-west-2.amazonaws.com/emoticons/default_k_smiley.gif\u0022 title=\u0022:)\u0022\u003E\u003C/p\u003E\n"},{"CreatedByName":"Gotmachine","CreatedById":163039,"CreatedDateTime":"2017-11-15T20:31:00Z","Content":"\n\u003Cp\u003E\nInteresting. I gave up on updating UpgradesGUI after 1.3 because I couldn\u0027t get a reliable way to manage the per-part status of upgrades. It\u0027s a big mess.\n\u003C/p\u003E\n\u003Cp\u003E\nDoing it with a partmodule is a good idea and may work in the end, but you haven\u0027t overcome what made me give up : they added some custom logic in the editor, upgrades are always reapplied to parts that gets loaded in the editor based on the current enabled/disabled status in the\u00A0PartUpgradeHandler, regardless of what was saved. Try this :\n\u003C/p\u003E\n\u003Cul\u003E\u003Cli\u003E\ncreate a new sandbox game, set the difficulty settings to have all upgrades enabled (the effect would be the same in career mode with unlocked upgrades)\n\u003C/li\u003E\n\u003Cli\u003E\ngo to the editor, add a part\n\u003C/li\u003E\n\u003Cli\u003E\nedit the upgrades\n\u003C/li\u003E\n\u003Cli\u003E\nsave the craft\n\u003C/li\u003E\n\u003Cli\u003E\nopen the craft\n\u003C/li\u003E\n\u003Cli\u003E\nall stats are reverted to non-upgraded state. I think this is because your plugin is setting AllEnabled to false in Start(). If AllEnabled was set to the default (true), all existing upgrades would be applied to all partmodules on the craft.\n\u003C/li\u003E\n\u003C/ul\u003E\u003Cp\u003E\nThis mean that when loading an existing craft in the editor, you need to iterate trough each module of each part, enable/disable upgrades in the PartUpgradeHandler according to the craft saved Upgrade confignode and apply them. Since you have gone the partmodule way, it shouldn\u0027t be too difficult.\n\u003C/p\u003E\n\u003Cp\u003E\nAs for reverting to base stats when no upgrades are applied, it is indeed messy. \u003Ca href=\u0022https://github.com/gotmachine/UpgradesUIExtensions/blob/2a8ea858c1542f4ea55af6f8e66657a966201339/UpgradesUIExtensions/EditorTooltipWithUpgrades.cs#L422\u0022 rel=\u0022external nofollow\u0022\u003EHere is how I\u0027m doing it\u003C/a\u003E. It won\u0027t handle sub-nodes but in my tests for a 1.3 version, I found a workaround : instead of copying the field values from the prefab partinfo confignodes, I instantiate the part, get the field values from it and then destroy it. A bit hacky but it works and will support every possible partmodule.\n\u003C/p\u003E\n\u003Cp\u003E\nLicense note :\u00A0 you can re-license my code under GPL, no need to release some part under the unlicense (it\u0027s an unrestricted public domain license). This said, I encourage you to release your work in the public domain too so others can freely reuse your code, in my humble opinion the license hell around here is getting awful.\n\u003C/p\u003E\n"},{"CreatedByName":"NotTheRealRMS","CreatedById":172906,"CreatedDateTime":"2017-11-16T23:03:31Z","Content":"\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223220169\u0022 data-ipsquote-contentid=\u0022167548\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221510777860\u0022 data-ipsquote-userid=\u0022163039\u0022 data-ipsquote-username=\u0022Gotmachine\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/15/2017 at 8:31 PM, Gotmachine said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nInteresting. I gave up on updating UpgradesGUI after 1.3 because I couldn\u0027t get a reliable way to manage the per-part status of upgrades. It\u0027s a big mess.\n\u003C/p\u003E\n\u003Cp\u003E\nDoing it with a partmodule is a good idea and may work in the end, but you haven\u0027t overcome what made me give up : they added some custom logic in the editor, upgrades are always reapplied to parts that gets loaded in the editor based on the current enabled/disabled status in the\u00A0PartUpgradeHandler, regardless of what was saved.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nThrough a combination of storing the names of all upgrades that should be disabled in a single string separated by commas, processed by the code every time a craft is first loaded through a \u003Cem\u003Epublic override void OnStart(StartState state)\u003C/em\u003E, it\u0027s done, and finally the critical feature of persistence is in:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Cstrong\u003EVersion 0.32.5\u003C/strong\u003E:\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/open?id=1NLNZ3O65bHJKk8FkIi2PScZW2ouEYIwQ\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/open?id=1NLNZ3O65bHJKk8FkIi2PScZW2ouEYIwQ\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nCreating persistent settings in saved vessels was a much higher priority than improving the code so workarounds won\u0027t be needed. Now it\u0027s mostly functional for engines and \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E. Tested it with 5 parts including an engine with two modes like the Stock RAPIER where each mode had its own specific upgrade changes and there were no issues, but it may lag a bit when loading crafts with tons of parts featuring upgrades. A version that just reads correctly from the original Part config without upgrades for any module will(or more honestly may) be done later. Same on loading all parts in symmetry at once and applying the changes simultaneously(unless the Stock code already handles upgrades on parts with symmetry like that).\n\u003C/p\u003E\n\u003Cblockquote class=\u0022ipsQuote\u0022 data-ipsquote=\u0022\u0022 data-ipsquote-contentapp=\u0022forums\u0022 data-ipsquote-contentclass=\u0022forums_Topic\u0022 data-ipsquote-contentcommentid=\u00223220169\u0022 data-ipsquote-contentid=\u0022167548\u0022 data-ipsquote-contenttype=\u0022forums\u0022 data-ipsquote-timestamp=\u00221510777860\u0022 data-ipsquote-userid=\u0022163039\u0022 data-ipsquote-username=\u0022Gotmachine\u0022\u003E\n\u003Cdiv class=\u0022ipsQuote_citation\u0022\u003E\nOn 11/15/2017 at 8:31 PM, Gotmachine said:\n\u003C/div\u003E\n\u003Cdiv class=\u0022ipsQuote_contents\u0022\u003E\n\u003Cp\u003E\nLicense note :\u00A0 you can re-license my code under GPL, no need to release some part under the unlicense (it\u0027s an unrestricted public domain license). This said, I encourage you to release your work in the public domain too so others can freely reuse your code, in my humble opinion the license hell around here is getting awful.\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/blockquote\u003E\n\u003Cp\u003E\nI\u0027m not going to re-license as a matter of respect. As for the license choice,\u00A0 \u003Ca href=\u0022https://stallman.org/saint.html\u0022 rel=\u0022external nofollow\u0022\u003Eevery time you release anything under the GNU GPL, you receive a blessing\u003C/a\u003E.\n\u003C/p\u003E\n\u003Cspan class=\u0022ipsType_reset ipsType_medium ipsType_light\u0022 data-excludequote=\u0022\u0022\u003E\n\u003Cstrong\u003EEdited \u003Ctime datetime=\u00222017-11-16T23:06:57Z\u0022 title=\u002211/16/2017 11:06  PM\u0022 data-short=\u00226 yr\u0022\u003ENovember 16, 2017\u003C/time\u003E by NotTheRealRMS\u003C/strong\u003E\n\u003C/span\u003E\n"},{"CreatedByName":"NotTheRealRMS","CreatedById":172906,"CreatedDateTime":"2017-11-23T16:59:12Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003EVersion 0.3.3:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/open?id=19E0zdBBullUf4Gt1SfgIMeWa1z5egFvo\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/open?id=19E0zdBBullUf4Gt1SfgIMeWa1z5egFvo\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nFinally devised a method to load the original part config without upgrades in the plugin for each and every module that requires such procedure in a part, so all those workarounds from the previous versions are now obsolete, and most of its shortcomings are gone. Therefore, delete any previous UpgradeEditor folder if you\u0027re installing this new version, a recommended acting for updating any KSP mod.\n\u003C/p\u003E\n\u003Cp\u003E\nAlso, there is something new besides finally getting this to support any possible PartModule with upgrades: ignore lists for things like upgrades that increase max diameter for procedural parts and thus would be pointless to disable. A few default settings exist in UpgradesToIgnore.cfg for the only mod with procedural parts making extensive use of the Part Upgrade system I know of, SSTU.\n\u003C/p\u003E\n"},{"CreatedByName":"NotTheRealRMS","CreatedById":172906,"CreatedDateTime":"2017-12-13T20:19:23Z","Content":"\n\u003Cp\u003E\n\u003Cstrong\u003EVersion 0.3.4:\u003C/strong\u003E\n\u003C/p\u003E\n\u003Cp\u003E\n\u003Ca href=\u0022https://drive.google.com/open?id=1Cm5WA73G3IEONZ-JjEXQC0ULmpUA3Og1\u0022 rel=\u0022external nofollow\u0022\u003Ehttps://drive.google.com/open?id=1Cm5WA73G3IEONZ-JjEXQC0ULmpUA3Og1\u003C/a\u003E\n\u003C/p\u003E\n\u003Cp\u003E\nThis version should have been the first one for public release,\u003Cstrong\u003E \u003C/strong\u003Ebecause besides not having yet a decent setup to support part symmetry(there are ways to deal with limitations in the support for part symmetry though, see the Readme for details), all major issues that could be identified and reproduced were fixed now.\n\u003C/p\u003E\n\u003Cp\u003E\nLetting the issue with ModuleRCS and RCSFX slide was a big mistake, but it\u0027s solved now. Apparently using OnAwake() on some modules will cause trouble. Perhaps it would be best to not use such command at all, because apparently its lack is not hindering the load of original part configs for \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E parts with upgrades in any form, but unless other Modules also end having problems because of it, it will remain being applied on modules other than \u003Cabbr title=\u0022Reaction Control System\u0022\u003ERCS\u003C/abbr\u003E for now.\n\u003C/p\u003E\n\u003Cp\u003E\nNo matter how many bugs are fixed, it won\u0027t change the fact the entire code base of this plugin is sort of like duct tape and epoxy plastered over an unfinished framework in an attempt to improve it, but it mostly works now, besides lacking perfect, flawless support for parts with symmetrical counterparts.\n\u003C/p\u003E\n"},{"CreatedByName":"theonegalen","CreatedById":71012,"CreatedDateTime":"2018-04-05T17:12:17Z","Content":"\n\u003Cp\u003E\nI very much hope this hasn\u0027t been abandoned. This is fantastic and essential for anyone that uses the upgrade system.\n\u003C/p\u003E\n"}]}